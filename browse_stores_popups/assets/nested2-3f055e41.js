import{S as q,i as W,s as z,e as A,h as G,$ as be,j as p,W as te,o as m,aP as Vr,b as Z,c as Q,d as C,g as h,m as b,w as yt,l as x,t as $,n as _,p as v,X as Lt,Y as It,Z as Pt,_ as Mt,a7 as Ee,J as ie,K as ae,aQ as St,u as w,k,D as H,I as ke,N as an,O as vr,q as fe,P as wr,Q as kr,T as Tt,U as yr,V as Sr,aX as Xr,aY as rt,a4 as hn,aZ as Kr,f as fn,aO as Zr,ar as un,ae as cn,aj as Vt,r as $n,F as Tr,a as en,v as Ut,aW as V,a_ as ue,a$ as me,B as K,ah as J,C as ce,ak as Y,b0 as ne,G as Ft,H as Jr,aS as Yr,ab as bn,R as Or,b1 as pn,b2 as mn,E as Cr,as as Qr,ag as xr,aU as vn,al as el,am as wn,an as kn,ao as jt,aV as yn,L as tl,M as nl,y as rl}from"./index-4e94e58c.js";import{C as Te,d as Be,j as Ot,f as Et,h as oe,l as B,c as zt,k as ll,S as ol,B as sl,b as vt,G as il}from"./StreetViewTool-71f9c1c5.js";import{a as Ue,F as al}from"./Popup-4e0caae9.js";import{P as re}from"./Popup-16f72121.js";import{R as fl,C as Ve,Z as ul}from"./ZoomOutMap-05d315c3.js";import{L as cl,a as $l}from"./LineMeasureController-33cecf2d.js";function pl(r){let e;return{c(){e=A("span"),G(e,"class","svelte-kzgqtg"),be(e,"background",r[0])},m(n,t){p(n,e,t)},p(n,[t]){t&1&&be(e,"background",n[0])},i:te,o:te,d(n){n&&m(e)}}}function ml(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class _e extends q{constructor(e){super(),W(this,e,ml,pl,z,{color:0})}}const _l="/atip/browse_stores_popups/assets/help-d011708a.svg";function gl(r){let e,n;const t=r[1].default,l=Lt(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),G(e,"class","govuk-prose")},m(o,i){p(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&It(l,t,o,o[4],n?Mt(t,o[4],i,null):Pt(o[4]),null)},i(o){n||($(l,o),n=!0)},o(o){_(l,o),n=!1},d(o){o&&m(e),l&&l.d(o)}}}function dl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[gl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Vr({props:a}),Z.push(()=>Q(t,"open",s)),{c(){e=A("button"),e.innerHTML=`<img src="${_l}" title="Help" alt="Help"/>`,n=C(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){p(f,e,c),p(f,n,c),b(t,f,c),o=!0,i||(u=yt(e,"click",r[2]),i=!0)},p(f,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,d.open=f[0],x(()=>l=!1)),t.$set(d)},i(f){o||($(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){f&&(m(e),m(n)),v(t,f),i=!1,u()}}}function hl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class se extends q{constructor(e){super(),W(this,e,hl,dl,z,{})}}function Sn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Tn(r){let e,n,t,l=r[1]+"",o,i,u;return n=new _e({props:{color:r[2]}}),{c(){e=A("li"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){p(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p(s,a){const f={};a&1&&(f.color=s[2]),n.$set(f),(!u||a&1)&&l!==(l=s[1]+"")&&H(o,l)},i(s){u||($(n.$$.fragment,s),u=!0)},o(s){_(n.$$.fragment,s),u=!1},d(s){s&&m(e),v(n)}}}function bl(r){let e,n,t=Ee(r[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=Tn(Sn(r,t,i));const o=i=>_(l[i],1,1,()=>{l[i]=null});return{c(){e=A("ul");for(let i=0;i<l.length;i+=1)l[i].c()},m(i,u){p(i,e,u);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);n=!0},p(i,u){if(u&1){t=Ee(i[0]);let s;for(s=0;s<t.length;s+=1){const a=Sn(i,t,s);l[s]?(l[s].p(a,u),$(l[s],1)):(l[s]=Tn(a),l[s].c(),$(l[s],1),l[s].m(e,null))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)$(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)_(l[u]);n=!1},d(i){i&&m(e),St(l,i)}}}function vl(r){let e,n;return e=new Te({props:{label:"Legend",$$slots:{default:[bl]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class kl extends q{constructor(e){super(),W(this,e,wl,vl,z,{rows:0})}}function On(r){let e=r[0],n,t,l=Cn(r);return{c(){l.c(),n=ke()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&z(e,e=o[0])?(ie(),_(l,1,1,te),ae(),l=Cn(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){_(l),t=!1},d(o){o&&m(n),l.d(o)}}}function Cn(r){let e;const n=r[10].default,t=Lt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&It(t,n,l,l[9],e?Mt(n,l[9],o,null):Pt(l[9]),null)},i(l){e||($(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function yl(r){let e,n,t=r[0]&&On(r);return{c(){t&&t.c(),e=ke()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=On(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),_(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){_(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function Sl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=an("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=vr();fe(r,f,y=>n(8,l=y)),fe(r,c,y=>n(0,t=y));let d,g=!0;return wr(()=>{t&&d&&l&&(kr(f,t,d),Tt(c,t=null,t),n(6,d=void 0))}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,s=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,i=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Tt(c,t=u,t),yr(l,t,Sr({type:"raster",tiles:s,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,d=l==null?void 0:l.getSource(t)),n(7,g=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,d=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&d&&(g?n(7,g=!1):d.setTiles(s))},[t,f,c,u,s,a,d,g,l,i,o]}class Tl extends q{constructor(e){super(),W(this,e,Sl,yl,z,{id:3,tiles:4,tileSize:5})}}function Ol(r){let e;const n=r[16].default,t=Lt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&It(t,n,l,l[24],e?Mt(n,l[24],o,null):Pt(l[24]),null)},i(l){e||($(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Cl(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Ol]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Xr({props:o}),Z.push(()=>Q(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],x(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Al(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=an("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:d=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:O=void 0}=e,{manageHoverState:T=!1}=e,{hovered:F=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:N=!0}=e;function I(j){F=j,n(0,F)}function E(j){rt.call(this,r,j)}function M(j){rt.call(this,r,j)}function L(j){rt.call(this,r,j)}function P(j){rt.call(this,r,j)}function R(j){rt.call(this,r,j)}function U(j){rt.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,i=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,s=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,d=j.filter),"applyToClusters"in j&&n(9,g=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,S=j.maxzoom),"hoverCursor"in j&&n(12,O=j.hoverCursor),"manageHoverState"in j&&n(13,T=j.manageHoverState),"hovered"in j&&n(0,F=j.hovered),"eventsIfTopMost"in j&&n(14,D=j.eventsIfTopMost),"interactive"in j&&n(15,N=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[F,o,i,u,s,a,f,c,d,g,y,S,O,T,D,N,t,I,E,M,L,P,R,U,l]}class Ll extends q{constructor(e){super(),W(this,e,Al,Cl,z,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function An(r){let e=r[0],n,t,l=Ln(r);return{c(){l.c(),n=ke()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&z(e,e=o[0])?(ie(),_(l,1,1,te),ae(),l=Ln(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){_(l),t=!1},d(o){o&&m(n),l.d(o)}}}function Ln(r){let e;const n=r[9].default,t=Lt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&It(t,n,l,l[8],e?Mt(n,l[8],o,null):Pt(l[8]),null)},i(l){e||($(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Il(r){let e,n,t=r[0]&&An(r);return{c(){t&&t.c(),e=ke()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=An(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),_(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){_(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function Pl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=an("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!hn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Kr;hn.addProtocol("pmtiles",y.tile)}const{map:c,self:d}=vr();fe(r,c,y=>n(7,l=y)),fe(r,d,y=>n(0,t=y));let g;return wr(()=>{t&&l&&(kr(c,t,g),Tt(d,t=null,t),g=void 0)}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,s=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,i=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Tt(d,t=u,t),yr(l,t,Sr({type:"vector",url:s,tiles:a,promoteId:f}),y=>l&&y===t,()=>{t&&(g=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{g=l==null?void 0:l.getSource(u)}))},[t,c,d,u,s,a,f,l,i,o]}class $e extends q{constructor(e){super(),W(this,e,Pl,Il,z,{id:3,url:4,tiles:5,promoteId:6})}}function Ml(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Fl(r){let e,n,t=r[0]=="Private (development)"&&Ml();return{c(){t&&t.c(),e=C(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),p(l,e,o),p(l,n,o)},p:te,d(l){l&&(m(e),m(n)),t&&t.d(l)}}}function El(r){let e,n,t,l,o,i;return o=new se({props:{$$slots:{default:[Fl]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=C(),h(o.$$.fragment)},m(u,s){p(u,e,s),k(e,n),k(e,t),k(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||($(o.$$.fragment,u),i=!0)},o(u){_(o.$$.fragment,u),i=!1},d(u){u&&m(e),v(o)}}}function Nl(r){return[fn()]}class Dl extends q{constructor(e){super(),W(this,e,Nl,El,z,{})}}const jl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var de=Uint8Array,Ye=Uint16Array,Ar=Uint32Array,Lr=new de([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ir=new de([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Rl=new de([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Pr=function(r,e){for(var n=new Ye(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Ar(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Mr=Pr(Lr,2),Fr=Mr[0],Bl=Mr[1];Fr[28]=258,Bl[258]=28;var Hl=Pr(Ir,0),Ul=Hl[0],tn=new Ye(32768);for(var le=0;le<32768;++le){var qe=(le&43690)>>>1|(le&21845)<<1;qe=(qe&52428)>>>2|(qe&13107)<<2,qe=(qe&61680)>>>4|(qe&3855)<<4,tn[le]=((qe&65280)>>>8|(qe&255)<<8)>>>1}var kt=function(r,e,n){for(var t=r.length,l=0,o=new Ye(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Ye(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Ye(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)u[tn[c]>>>s]=a}else for(u=new Ye(t),l=0;l<t;++l)r[l]&&(u[l]=tn[i[r[l]-1]++]>>>15-r[l]);return u},Nt=new de(288);for(var le=0;le<144;++le)Nt[le]=8;for(var le=144;le<256;++le)Nt[le]=9;for(var le=256;le<280;++le)Nt[le]=7;for(var le=280;le<288;++le)Nt[le]=8;var Er=new de(32);for(var le=0;le<32;++le)Er[le]=5;var zl=kt(Nt,9,1),Gl=kt(Er,5,1),Xt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},ye=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Kt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},ql=function(r){return(r+7)/8|0},_n=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Ye:r.BYTES_PER_ELEMENT==4?Ar:de)(n-e);return t.set(r.subarray(e,n)),t},Wl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Se=function(r,e,n){var t=new Error(e||Wl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Se),!n)throw t;return t},Vl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new de(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new de(t*3));var i=function(tt){var Ze=e.length;if(tt>Ze){var nt=new de(Math.max(Ze*2,tt));nt.set(e),e=nt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,d=n.m,g=n.n,y=t*8;do{if(!f){u=ye(r,s,1);var S=ye(r,s+1,3);if(s+=3,S)if(S==1)f=zl,c=Gl,d=9,g=5;else if(S==2){var D=ye(r,s,31)+257,N=ye(r,s+10,15)+4,I=D+ye(r,s+5,31)+1;s+=14;for(var E=new de(I),M=new de(19),L=0;L<N;++L)M[Rl[L]]=ye(r,s+L*3,7);s+=N*3;for(var P=Xt(M),R=(1<<P)-1,U=kt(M,P,1),L=0;L<I;){var j=U[ye(r,s,R)];s+=j&15;var O=j>>>4;if(O<16)E[L++]=O;else{var X=0,pe=0;for(O==16?(pe=3+ye(r,s,3),s+=2,X=E[L-1]):O==17?(pe=3+ye(r,s,7),s+=3):O==18&&(pe=11+ye(r,s,127),s+=7);pe--;)E[L++]=X}}var gt=E.subarray(0,D),ve=E.subarray(D);d=Xt(gt),g=Xt(ve),f=kt(gt,d,1),c=kt(ve,g,1)}else Se(1);else{var O=ql(s)+4,T=r[O-4]|r[O-3]<<8,F=O+T;if(F>t){o&&Se(0);break}l&&i(a+T),e.set(r.subarray(O,F),a),n.b=a+=T,n.p=s=F*8,n.f=u;continue}if(s>y){o&&Se(0);break}}l&&i(a+131072);for(var xe=(1<<d)-1,dt=(1<<g)-1,et=s;;et=s){var X=f[Kt(r,s)&xe],ge=X>>>4;if(s+=X&15,s>y){o&&Se(0);break}if(X||Se(2),ge<256)e[a++]=ge;else if(ge==256){et=s,f=null;break}else{var ht=ge-254;if(ge>264){var L=ge-257,je=Lr[L];ht=ye(r,s,(1<<je)-1)+Fr[L],s+=je}var Ge=c[Kt(r,s)&dt],Ke=Ge>>>4;Ge||Se(3),s+=Ge&15;var ve=Ul[Ke];if(Ke>3){var je=Ir[Ke];ve+=Kt(r,s)&(1<<je)-1,s+=je}if(s>y){o&&Se(0);break}l&&i(a+131072);for(var bt=a+ht;a<bt;a+=4)e[a]=e[a-ve],e[a+1]=e[a+1-ve],e[a+2]=e[a+2-ve],e[a+3]=e[a+3-ve];a=bt}}n.l=f,n.p=et,n.b=a,n.f=u,f&&(u=1,n.m=d,n.d=c,n.n=g)}while(!u);return a==e.length?e:_n(e,0,a)},Xl=new de(0),Fe=function(r,e){return r[e]|r[e+1]<<8},Oe=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Zt=function(r,e){return Oe(r,e)+Oe(r,e+4)*4294967296};function Kl(r,e){return Vl(r,e)}var nn=typeof TextDecoder<"u"&&new TextDecoder,Zl=0;try{nn.decode(Xl,{stream:!0}),Zl=1}catch{}var Jl=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,_n(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Nr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(nn)return nn.decode(r);var l=Jl(r),o=l[0],i=l[1];return i.length&&Se(8),o}}var Yl=function(r,e){return e+30+Fe(r,e+26)+Fe(r,e+28)},Ql=function(r,e,n){var t=Fe(r,e+28),l=Nr(r.subarray(e+46,e+46+t),!(Fe(r,e+8)&2048)),o=e+46+t,i=Oe(r,e+20),u=n&&i==4294967295?xl(r,o):[i,Oe(r,e+24),Oe(r,e+42)],s=u[0],a=u[1],f=u[2];return[Fe(r,e+10),s,a,l,o+Fe(r,e+30)+Fe(r,e+32),f]},xl=function(r,e){for(;Fe(r,e)!=1;e+=4+Fe(r,e+2));return[Zt(r,e+12),Zt(r,e+4),Zt(r,e+20)]};function eo(r,e){for(var n={},t=r.length-22;Oe(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Se(13);var l=Fe(r,t+8);if(!l)return{};var o=Oe(r,t+16),i=o==4294967295||l==65535;if(i){var u=Oe(r,t-12);i=Oe(r,u)==101075792,i&&(l=Oe(r,u+32),o=Oe(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=Ql(r,o,i),c=f[0],d=f[1],g=f[2],y=f[3],S=f[4],O=f[5],T=Yl(r,O);o=S,(!s||s({name:y,size:d,originalSize:g,compression:c}))&&(c?c==8?n[y]=Kl(r.subarray(T,T+d),new de(g)):Se(14,"unknown compression type "+c):n[y]=_n(r,T,T+d))}return n}function to(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Jt):Jt(r)}function Jt(r){var e=new Uint8Array(r),n=eo(e);return Promise.resolve(no(n))}function no(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Nr(r[l])}return e}function Ne(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Qe(t)===e)return t;n++}}function Dt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Qe(l)===e&&n.push(l),t++}return n}function Gt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Qe(l)===e&&n(l,t):n(l,t),t++}}function ro(r,e,n){var t=[];return Gt(r,e,function(l,o){t.push(n(l,o))}),t}var lo=/.+\:/;function Qe(r){return r.tagName.replace(lo,"")}function Dr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Qe(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Dr(r.childNodes[t]),t++;return e+="</"+Qe(r)+">",e}function oo(r){var e=r.documentElement,n=Ne(e,"sheetData"),t=[];return Gt(n,"row",function(l){Gt(l,"c",function(o){t.push(o)})}),t}function so(r,e){return Ne(e,"v")}function io(r,e){if(e.firstChild&&Qe(e.firstChild)==="is"&&e.firstChild.firstChild&&Qe(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function ao(r){var e=r.documentElement,n=Ne(e,"dimension");if(n)return n.getAttribute("ref")}function fo(r){var e=r.documentElement,n=Ne(e,"cellStyleXfs");return n?Dt(n,"xf"):[]}function uo(r){var e=r.documentElement,n=Ne(e,"cellXfs");return n?Dt(n,"xf"):[]}function co(r){var e=r.documentElement,n=Ne(e,"numFmts");return n?Dt(n,"numFmt"):[]}function $o(r){var e=r.documentElement;return ro(e,"si",function(n){var t=Ne(n,"t");if(t)return t.textContent;var l="";return Gt(n,"r",function(o){l+=Ne(o,"t").textContent}),l})}function po(r){var e=r.documentElement;return Ne(e,"workbookPr")}function mo(r){var e=r.documentElement;return Dt(e,"Relationship")}function _o(r){var e=r.documentElement,n=Ne(e,"sheets");return Dt(n,"sheet")}function go(r,e){var n=e.createDocument(r),t={},l=po(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return _o(n).forEach(o),t}function ho(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Yt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Yt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Yt(u);break}};return mo(n).forEach(l),t}function Yt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function In(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Pn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?In(Object(n),!0).forEach(function(t){bo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function bo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function vo(r,e){if(!r)return{};var n=e.createDocument(r),t=fo(n).map(Qt),l=co(n).map(wo).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Pn(Pn({},t[u.xfId]),Qt(u,l)):Qt(u,l)};return uo(n).map(o)}function wo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Qt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function ko(r,e){return r?$o(e.createDocument(r)):[]}function jr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function yo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=So(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function So(r,e){if(r){if(typeof r=="string")return Mn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(r,e)}}function Mn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function To(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Oo.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&Lo(l.numberFormat.template))return!0}}var Oo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Co=/^\[\$-414\]/,Ao=/;@$/;function Lo(r){r=r.toLowerCase(),r=r.replace(Co,""),r=r.replace(Ao,"");for(var e=r.split(/\W+/),n=yo(e),t;!(t=n()).done;){var l=t.value;if(Io.indexOf(l)<0)return!1}return!0}var Io=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Po(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=xt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=xt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=xt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Mo(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var d=Number(r);if(isNaN(d))throw new Error('Invalid "numeric" cell value: '.concat(r));r=d,To(r,o(),i,a)&&(r=jr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Mo(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function xt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Fo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Eo(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function No(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Fo.indexOf(r[n]),n++;return e}function Rr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),No(r[0].trim())]}function Do(r,e,n,t,l,o,i){var u=Rr(r.getAttribute("r")),s=so(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:Po(a,f,{getInlineStringValue:function(){return io(e,r)},getInlineStringXml:function(){return Dr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function jo(r,e,n,t,l,o){var i=oo(r);return i.length===0?[]:i.map(function(u){return Do(u,r,e,n,t,l,o)})}function Ro(r,e){return zo(r)||Uo(r,e)||Ho(r,e)||Bo()}function Bo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ho(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Uo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function zo(r){if(Array.isArray(r))return r}function Go(r){var e=ao(r);if(e)return e=e.split(":").map(Rr).map(function(n){var t=Ro(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function qo(r,e,n,t,l,o){var i=e.createDocument(r),u=jo(i,e,n,t,l,o),s=Go(i)||Eo(u);return{cells:u,dimensions:s}}function Wo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Vo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vo(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Xo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=Wo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Ko(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Zo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zo(r,e){if(r){if(typeof r=="string")return Nn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(r,e)}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Jo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Ko(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Yo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Br(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qo(r,e){return ts(r)||es(r,e)||Br(r,e)||xo()}function xo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Br(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function es(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ts(r){if(Array.isArray(r))return r}function ns(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Qo(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=Yo(t),d;!(d=c()).done;){var g=d.value,y=g.row-1,S=g.column-1;S<i&&y<u&&(s[y][S]=g.value)}var O=e.rowMap;if(O)for(var T=0;T<s.length;)O[T]=T,T++;return s=Xo(Jo(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:O}),e.transformData&&(s=e.transformData(s)),s}function rs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ls(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ls(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Rn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function os(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(t){ss(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ss(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function is(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=os({sheet:1},n));var t=function(d){if(!r[d])throw new Error('"'.concat(d,'" file not found inside the *.xlsx file zip archive'));return r[d]},l=ho(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?ko(t(l.sharedStrings),e):[],i=l.styles?vo(t(l.styles),e):{},u=go(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var d=c.name;return{name:d}});var s=as(n.sheet,u.sheets);if(!s||!l.sheets[s])throw fs(n.sheet,u.sheets);var a=qo(t(l.sheets[s]),e,o,i,u,n),f=ns(a,n);return n.properties?{data:f,properties:u}:f}function as(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=rs(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function fs(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function rn(r){"@babel/helpers - typeof";return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(r)}function Bn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function us(r,e,n){return e&&Bn(r.prototype,e),n&&Bn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function cs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function $s(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ct(r,e)}function ps(r){var e=Hr();return function(){var t=At(r),l;if(e){var o=At(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return ms(this,l)}}function ms(r,e){if(e&&(rn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _s(r)}function _s(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function ln(r){var e=typeof Map=="function"?new Map:void 0;return ln=function(t){if(t===null||!gs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Bt(t,arguments,At(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ct(l,t)},ln(r)}function Bt(r,e,n){return Hr()?Bt=Reflect.construct:Bt=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Ct(a,i.prototype),a},Bt.apply(null,arguments)}function Hr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function gs(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ct(r,e){return Ct=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Ct(r,e)}function At(r){return At=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},At(r)}var he=function(r){$s(n,r);var e=ps(n);function n(t){var l;return cs(this,n),l=e.call(this,"invalid"),l.reason=t,l}return us(n)}(ln(Error));function ds(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new he("not_a_number")}if(typeof r!="number")throw new he("not_a_number");if(isNaN(r))throw new he("invalid_number");if(!isFinite(r))throw new he("out_of_bounds");return r}function hs(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new he("invalid_number");if(!isFinite(r))throw new he("out_of_bounds");return String(r)}throw new he("not_a_string")}function bs(r){if(typeof r=="boolean")return r;throw new he("not_a_boolean")}function vs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new he("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new he("invalid_number");if(!isFinite(r))throw new he("out_of_bounds");var t=jr(r,n);if(isNaN(t.valueOf()))throw new he("out_of_bounds");return t}throw new he("not_a_date")}function ws(r,e){return Ss(r)||ys(r,e)||Ur(r,e)||ks()}function ks(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ys(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ss(r){if(Array.isArray(r))return r}function on(r){"@babel/helpers - typeof";return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(r)}function Ts(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ur(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ur(r,e){if(r){if(typeof r=="string")return Hn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hn(r,e)}}function Hn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Un(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function zn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Un(Object(n),!0).forEach(function(t){Os(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Os(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Gn={isColumnOriented:!1};function Cs(r,e,n){n?n=zn(zn({},Gn),n):n=Gn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;Ps(e),l&&(r=Is(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=zr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var d=Ts(a),g;!(g=d()).done;){var y=g.value;y.row=o[y.row-1]+1}return{rows:s,errors:a}}function zr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var d=f[a],g=r[d],y=on(g.type)==="object"&&!Array.isArray(g.type),S=e[t.indexOf(d)];S===void 0&&(S=null);var O=void 0,T=void 0,F=void 0;if(y)O=zr(g.type,e,n,t,l,o);else if(S===null)O=null;else if(Array.isArray(g.type)){var D=!1,N=Ls(S).map(function(E){var M=qn(E,g,o);return M.error&&(O=E,T=M.error,F=M.reason),M.value!==null&&(D=!0),M.value});T||(O=D?N:null)}else{var I=qn(S,g,o);T=I.error,F=I.reason,O=T?S:I.value}!T&&O===null&&g.required&&(T="required"),T?(T={error:T,row:n+1,column:d,value:O},F&&(T.reason=F),g.type&&(T.type=g.type),l.push(T)):(u&&O!==null&&(u=!1),(O!==null||o.includeNullValues)&&(i[g.prop]=O))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function qn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=lt(r,e.parse):e.type?t=As(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function lt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function As(r,e,n){switch(e){case String:return lt(r,hs);case Number:return lt(r,ds);case Date:return lt(r,function(t){return vs(t,{properties:n.properties})});case Boolean:return lt(r,bs);default:if(typeof e=="function")return lt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Gr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Gr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function Ls(r){for(var e=[],n=0;n<r.length;){var t=Gr(r,",",n),l=ws(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var Is=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Ps(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function sn(r){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(r)}function qr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;sn(o)==="object"&&(o=Object.keys(r[l])[0],i=qr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var Ms=["schema","map"];function Wn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Rt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wn(Object(n),!0).forEach(function(t){Fs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Fs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Es(r,e){if(r==null)return{};var n=Ns(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Ns(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Ds(r,e,n){var t=n.schema,l=n.map,o=Es(n,Ms);!t&&l&&(t=qr(l));var i=is(r,e,Rt(Rt({},o),{},{properties:t||o.properties}));return t?Cs(i.data,t,Rt(Rt({},o),{},{properties:i.properties})):i}function js(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return to(r).then(function(n){return Ds(n,jl,e)})}function Rs(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>Bs(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(l.browse.num_features=l.browse.num_features!==void 0?l.browse.num_features+1:1,t.properties.funding_programme=l.funding_programme,t.id=n++)}return e}function Bs(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Hs(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await js(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Zr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function Wr(r){return un(["get","intervention_type"],{area:Be.area,route:Be.route,crossing:Be.crossing,other:Be.other},"white")}function Vn(r){return[["Areas",Be.area],["Routes",Be.route],["Crossings",Be.crossing],["Other",Be.other]]}const ee={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},He=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Us(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Ot({props:u}),Z.push(()=>Q(e,"value",i)),e.$on("change",r[2]),l=new kl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],x(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function zs(r,e,n){let t;fe(r,cn,s=>n(4,t=s));let l="interventionType",o=Vn();function i(){let s;l=="interventionType"?(s=Wr(),n(1,o=Vn())):(s=un(["get","funding_programme"],{ATF2:ee.atf2,ATF3:ee.atf3,ATF4:ee.atf4},"grey"),n(1,o=[["ATF2",ee.atf2],["ATF3",ee.atf3],["ATF4",ee.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class Gs extends q{constructor(e){super(),W(this,e,zs,Us,z,{})}}const _t=Vt({type:"FeatureCollection",features:[],schemes:{}}),qt=Vt(new Map),Xn=Vt(!0),Ht=Vt("");function qs(r){let e;return{c(){e=w("Clear")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ws(r){let e,n,t,l,o,i;return t=new en({props:{$$slots:{default:[qs]},$$scope:{ctx:r}}}),t.$on("click",r[11]),{c(){e=A("input"),n=C(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterText")},m(u,s){p(u,e,s),Ut(e,r[4]),p(u,n,s),b(t,u,s),l=!0,o||(i=yt(e,"input",r[10]),o=!0)},p(u,s){s&16&&e.value!==u[4]&&Ut(e,u[4]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||($(t.$$.fragment,u),l=!0)},o(u){_(t.$$.fragment,u),l=!1},d(u){u&&(m(e),m(n)),v(t,u),o=!1,i()}}}function Vs(r){let e,n,t,l,o,i,u,s,a,f;function c(S){r[8](S)}let d={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(d.value=r[2]),e=new Ot({props:d}),Z.push(()=>Q(e,"value",c));function g(S){r[9](S)}let y={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(y.value=r[3]),l=new Ot({props:y}),Z.push(()=>Q(l,"value",g)),u=new Tr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Ws]},$$scope:{ctx:r}}}),a=new Gs({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(S,O){b(e,S,O),p(S,t,O),b(l,S,O),p(S,i,O),b(u,S,O),p(S,s,O),b(a,S,O),f=!0},p(S,O){const T={};O&32&&(T.choices=S[5]),!n&&O&4&&(n=!0,T.value=S[2],x(()=>n=!1)),e.$set(T);const F={};O&64&&(F.choices=S[6]),!o&&O&8&&(o=!0,F.value=S[3],x(()=>o=!1)),l.$set(F);const D={};O&65552&&(D.$$scope={dirty:O,ctx:S}),u.$set(D)},i(S){f||($(e.$$.fragment,S),$(l.$$.fragment,S),$(u.$$.fragment,S),$(a.$$.fragment,S),f=!0)},o(S){_(e.$$.fragment,S),_(l.$$.fragment,S),_(u.$$.fragment,S),_(a.$$.fragment,S),f=!1},d(S){S&&(m(t),m(i),m(s)),v(e,S),v(l,S),v(u,S),v(a,S)}}}function Xs(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",d,g,y=r[7].other.toLocaleString()+"",S,O;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),d=w(c),g=w(" crossings, "),S=w(y),O=w(`
    other)`)},m(T,F){p(T,e,F),p(T,t,F),p(T,l,F),p(T,i,F),p(T,u,F),p(T,a,F),p(T,f,F),p(T,d,F),p(T,g,F),p(T,S,F),p(T,O,F)},p(T,F){F&1&&n!==(n=T[0].size.toLocaleString()+"")&&H(t,n),F&128&&o!==(o=T[7].route.toLocaleString()+"")&&H(i,o),F&128&&s!==(s=T[7].area.toLocaleString()+"")&&H(a,s),F&128&&c!==(c=T[7].crossing.toLocaleString()+"")&&H(d,c),F&128&&y!==(y=T[7].other.toLocaleString()+"")&&H(S,y)},d(T){T&&(m(e),m(t),m(l),m(i),m(u),m(a),m(f),m(d),m(g),m(S),m(O))}}}function Ks(r){let e,n,t;function l(i){r[12](i)}let o={id:"show-schemes",$$slots:{default:[Xs]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new oe({props:o}),Z.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65665&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],x(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Zs(r){let e,n,t,l;return e=new Te({props:{label:"Filters",$$slots:{default:[Vs]},$$scope:{ctx:r}}}),t=new Et({props:{small:!0,$$slots:{default:[Ks]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65660&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65667&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Js(r,e,n){let t,l,o;fe(r,Ht,D=>n(4,t=D)),fe(r,_t,D=>n(13,l=D)),fe(r,qt,D=>n(14,o=D));let{schemesToBeShown:i=new Set}=e,{show:u=!0}=e,s=[],a="",f=[],c="",d={area:0,route:0,crossing:0,other:0};$n(()=>{var I,E;let D=new Set,N=new Set;for(let M of o.values())(I=M.browse)!=null&&I.authority_or_region&&D.add(M.browse.authority_or_region),(E=M.browse)!=null&&E.funding_programme&&N.add(M.browse.funding_programme);n(5,s=Array.from(D.entries())),s.sort(),n(6,f=Array.from(N.entries())),f.sort()});function g(D,N,I){let E=D.toLowerCase(),M=P=>{var R,U,j,X;if(E&&!((R=P.properties.name)!=null&&R.toLowerCase().includes(E))&&!((U=P.properties.description)!=null&&U.toLowerCase().includes(E)))return!1;if(N||I){let pe=o.get(P.properties.scheme_reference);if(N&&((j=pe.browse)==null?void 0:j.authority_or_region)!=N||I&&((X=pe.browse)==null?void 0:X.funding_programme)!=I)return!1}return!0};n(0,i=new Set(l.features.filter(M).map(P=>P.properties.scheme_reference))),n(7,d={area:0,route:0,crossing:0,other:0});let L=P=>{var R,U;return!(!i.has(P.properties.scheme_reference)||E&&!((R=P.properties.name)!=null&&R.toLowerCase().includes(E))&&!((U=P.properties.description)!=null&&U.toLowerCase().includes(E)))};for(let P of l.features)L(P)?(delete P.properties.hide_while_editing,n(7,d[P.properties.intervention_type]++,d)):P.properties.hide_while_editing=!0;_t.set(l),n(7,d)}function y(D){a=D,n(2,a)}function S(D){c=D,n(3,c)}function O(){t=this.value,Ht.set(t)}const T=()=>Tt(Ht,t="",t);function F(D){u=D,n(1,u)}return r.$$set=D=>{"schemesToBeShown"in D&&n(0,i=D.schemesToBeShown),"show"in D&&n(1,u=D.show)},r.$$.update=()=>{r.$$.dirty&28&&g(t,a,c)},[i,u,a,c,t,s,f,d,y,S,O,T,F]}class Ys extends q{constructor(e){super(),W(this,e,Js,Zs,z,{schemesToBeShown:0,show:1})}}function Qs(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xs(r){let e,n,t,l,o;return t=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Qs]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data  Crown copyright and database right
  2023.`)},m(i,u){p(i,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||($(t.$$.fragment,i),o=!0)},o(i){_(t.$$.fragment,i),o=!1},d(i){i&&m(e),v(t)}}}class De extends q{constructor(e){super(),W(this,e,null,xs,z,{})}}function Kn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Zn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Jn(r){let e,n;return{c(){e=A("span"),n=w(`
    `),be(e,"background",r[5]),be(e,"width","100%"),be(e,"border","1px solid black")},m(t,l){p(t,e,l),k(e,n)},p(t,l){l&1&&be(e,"background",t[5])},d(t){t&&m(e)}}}function Yn(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&H(t,n)},d(l){l&&m(e)}}}function ei(r){let e,n,t,l=Ee(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Jn(Zn(r,l,s));let i=Ee(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Yn(Kn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=C(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();be(e,"display","flex"),be(t,"display","flex"),be(t,"justify-content","space-between")},m(s,a){p(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);p(s,n,a),p(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=Ee(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Zn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Jn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=Ee(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Kn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Yn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:te,o:te,d(s){s&&(m(e),m(n),m(t)),St(o,s),St(u,s)}}}function ti(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class ze extends q{constructor(e){super(),W(this,e,ti,ei,z,{colorScale:0,limits:1})}}function Qn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function ni(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ri(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function li(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function oi(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function si(r){let e,n,t,l,o,i,u,s,a,f,c,d;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ri]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[li]},$$scope:{ctx:r}}}),f=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[oi]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),s=A("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(g,y){p(g,e,y),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),p(g,u,y),p(g,s,y),k(s,a),b(f,s,null),k(s,c),d=!0},p(g,y){const S={};y&65536&&(S.$$scope={dirty:y,ctx:g}),t.$set(S);const O={};y&65536&&(O.$$scope={dirty:y,ctx:g}),o.$set(O);const T={};y&65536&&(T.$$scope={dirty:y,ctx:g}),f.$set(T)},i(g){d||($(t.$$.fragment,g),$(o.$$.fragment,g),$(f.$$.fragment,g),d=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),d=!1},d(g){g&&(m(e),m(u),m(s)),v(t),v(o),v(f)}}}function ii(r){let e,n,t;return n=new se({props:{$$slots:{default:[si]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function xn(r){let e,n;return e=new ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ai(r){let e;return{c(){e=w("Average cars per household")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ui(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ci(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function $i(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y;return o=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[fi]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ui]},$$scope:{ctx:r}}}),d=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=C(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=w("License: "),h(d.$$.fragment),g=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(S,O){p(S,e,O),p(S,n,O),p(S,t,O),k(t,l),b(o,t,null),k(t,i),b(u,t,null),k(t,s),p(S,a,O),p(S,f,O),k(f,c),b(d,f,null),k(f,g),y=!0},p(S,O){const T={};O&65536&&(T.$$scope={dirty:O,ctx:S}),o.$set(T);const F={};O&65536&&(F.$$scope={dirty:O,ctx:S}),u.$set(F);const D={};O&65536&&(D.$$scope={dirty:O,ctx:S}),d.$set(D)},i(S){y||($(o.$$.fragment,S),$(u.$$.fragment,S),$(d.$$.fragment,S),y=!0)},o(S){_(o.$$.fragment,S),_(u.$$.fragment,S),_(d.$$.fragment,S),y=!1},d(S){S&&(m(e),m(n),m(t),m(a),m(f)),v(o),v(u),v(d)}}}function pi(r){let e,n,t;return n=new se({props:{$$slots:{default:[$i]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function er(r){let e,n;return e=new ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mi(r){let e;return{c(){e=w("Population density")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function _i(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function gi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function di(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[_i]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[gi]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function hi(r){let e,n,t;return n=new se({props:{$$slots:{default:[di]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function tr(r){let e,n,t,l;return t=new ze({props:{colorScale:r[4],limits:r[6]().map(Oi)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=C(),h(t.$$.fragment)},m(o,i){p(o,e,i),p(o,n,i),b(t,o,i),l=!0},p:te,i(o){l||($(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),v(t,o)}}}function bi(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){p(a,e,f),k(e,n),k(e,t),k(t,o),k(e,i),k(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&H(o,l),f&8192&&u!==(u=a[14]+"")&&H(s,u)},d(a){a&&m(e)}}}function vi(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=A("b"),s=w(u),a=w(`
          cars`)},m(f,c){p(f,e,c),k(e,n),k(e,l),k(e,o),k(e,i),k(i,s),k(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&H(l,t),c&8200&&u!==(u=f[15]+"")&&H(s,u)},d(f){f&&m(e)}}}function wi(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){p(f,e,c),k(e,n),k(n,l),k(n,o),k(e,i),k(e,s),k(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&H(l,t),c&8192&&u!==(u=f[14]+"")&&H(s,u)},d(f){f&&m(e)}}}function ki(r){Qn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?wi:o[3]=="average_cars_per_household"?vi:bi}let t=n(r),l=t(r);return{c(){l.c(),e=ke()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){Qn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function yi(r){let e,n;return e=new re({props:{$$slots:{default:[ki,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Si(r){let e,n,t,l;const o=[B(Re),{sourceLayer:Re},{paint:{"fill-color":me(["get",r[3]],r[6](),r[4]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[yi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ue({props:i}),e.$on("click",r[5]);const u=[B(`${Re}-outline`),{sourceLayer:Re},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ce({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Y(o,[f&0&&ne(B(Re)),f&0&&{sourceLayer:Re},f&88&&{paint:{"fill-color":me(["get",a[3]],a[6](),a[4]),"fill-opacity":K(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&8?Y(u,[f&0&&ne(B(`${Re}-outline`)),f&0&&{sourceLayer:Re},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(d)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Ti(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y;function S(L){r[7](L)}let O={id:"percent_households_with_car",$$slots:{right:[ii],default:[ni]},$$scope:{ctx:r}};r[0]!==void 0&&(O.checked=r[0]),e=new oe({props:O}),Z.push(()=>Q(e,"checked",S)),e.$on("change",r[8]);let T=r[3]=="percent_households_with_car"&&xn(r);function F(L){r[9](L)}let D={id:"average_cars_per_household",$$slots:{right:[pi],default:[ai]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),o=new oe({props:D}),Z.push(()=>Q(o,"checked",F)),o.$on("change",r[10]);let N=r[3]=="average_cars_per_household"&&er(r);function I(L){r[11](L)}let E={id:"population_density",$$slots:{right:[hi],default:[mi]},$$scope:{ctx:r}};r[2]!==void 0&&(E.checked=r[2]),a=new oe({props:E}),Z.push(()=>Q(a,"checked",I)),a.$on("change",r[12]);let M=r[3]=="population_density"&&tr(r);return g=new $e({props:{url:`pmtiles://${ue()}/v1/${Re}.pmtiles`,$$slots:{default:[Si]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),T&&T.c(),l=C(),h(o.$$.fragment),u=C(),N&&N.c(),s=C(),h(a.$$.fragment),c=C(),M&&M.c(),d=C(),h(g.$$.fragment)},m(L,P){b(e,L,P),p(L,t,P),T&&T.m(L,P),p(L,l,P),b(o,L,P),p(L,u,P),N&&N.m(L,P),p(L,s,P),b(a,L,P),p(L,c,P),M&&M.m(L,P),p(L,d,P),b(g,L,P),y=!0},p(L,[P]){const R={};P&65536&&(R.$$scope={dirty:P,ctx:L}),!n&&P&1&&(n=!0,R.checked=L[0],x(()=>n=!1)),e.$set(R),L[3]=="percent_households_with_car"?T?(T.p(L,P),P&8&&$(T,1)):(T=xn(L),T.c(),$(T,1),T.m(l.parentNode,l)):T&&(ie(),_(T,1,1,()=>{T=null}),ae());const U={};P&65536&&(U.$$scope={dirty:P,ctx:L}),!i&&P&2&&(i=!0,U.checked=L[1],x(()=>i=!1)),o.$set(U),L[3]=="average_cars_per_household"?N?(N.p(L,P),P&8&&$(N,1)):(N=er(L),N.c(),$(N,1),N.m(s.parentNode,s)):N&&(ie(),_(N,1,1,()=>{N=null}),ae());const j={};P&65536&&(j.$$scope={dirty:P,ctx:L}),!f&&P&4&&(f=!0,j.checked=L[2],x(()=>f=!1)),a.$set(j),L[3]=="population_density"?M?(M.p(L,P),P&8&&$(M,1)):(M=tr(L),M.c(),$(M,1),M.m(d.parentNode,d)):M&&(ie(),_(M,1,1,()=>{M=null}),ae());const X={};P&65544&&(X.$$scope={dirty:P,ctx:L}),g.$set(X)},i(L){y||($(e.$$.fragment,L),$(T),$(o.$$.fragment,L),$(N),$(a.$$.fragment,L),$(M),$(g.$$.fragment,L),y=!0)},o(L){_(e.$$.fragment,L),_(T),_(o.$$.fragment,L),_(N),_(a.$$.fragment,L),_(M),_(g.$$.fragment,L),y=!1},d(L){L&&(m(t),m(l),m(u),m(s),m(c),m(d)),v(e,L),T&&T.d(L),v(o,L),N&&N.d(L),v(a,L),M&&M.d(L),v(g,L)}}}let Re="census_output_areas";const Oi=r=>r.toLocaleString();function Ci(r,e,n){let t=ee.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(O){let T=O.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${T}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${T}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(O){l=O,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function d(O){o=O,n(1,o)}const g=()=>{n(0,l=!1),n(2,i=!1)};function y(O){i=O,n(2,i)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,d,g,y,S]}class Ai extends q{constructor(e){super(),W(this,e,Ci,Ti,z,{})}}function Li(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ii(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pi(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Ii]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),k(e,n),b(t,e,null),k(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Mi(r){let e,n,t;return n=new se({props:{$$slots:{default:[Pi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Fi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&m(e)}}}function Ei(r){let e,n;return e=new re({props:{$$slots:{default:[Fi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ni(r){let e,n,t,l;const o=[B(ot),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ei]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ue({props:i}),e.$on("click",ji);const u=[B(`${ot}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ce({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(ot)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${ot}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Di(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ot,$$slots:{right:[Mi],default:[Li]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),Z.push(()=>Q(e,"checked",i)),l=new Ft({props:{data:`${ue()}/v1/${ot}.geojson`,$$slots:{default:[Ni]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ot="combined_authorities";function ji(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ri(r,e,n){let t=ee.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Bi extends q{constructor(e){super(),W(this,e,Ri,Di,z,{})}}function Hi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ui(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function zi(r){let e;return{c(){e=w(`here
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Gi(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),o=new V({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[zi]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function qi(r){let e,n,t;return n=new se({props:{$$slots:{default:[Gi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function nr(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wi(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,d=r[4].rank.toLocaleString()+"",g,y;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(i),s=C(),a=A("p"),f=w("Rank: "),c=A("b"),g=w(d),y=w(`
        / 32,844 LSOAs`)},m(S,O){p(S,e,O),k(e,t),k(e,l),k(e,o),k(o,u),p(S,s,O),p(S,a,O),k(a,f),k(a,c),k(c,g),k(a,y)},p(S,O){O&16&&n!==(n=S[4].LSOA11CD+"")&&H(t,n),O&16&&i!==(i=S[4].score+"")&&H(u,i),O&16&&d!==(d=S[4].rank.toLocaleString()+"")&&H(g,d)},d(S){S&&(m(e),m(s),m(a))}}}function Vi(r){let e,n;return e=new re({props:{$$slots:{default:[Wi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xi(r){let e,n,t,l;const o=[B(Ae),{sourceLayer:Ae},{paint:{"fill-color":me(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Vi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ue({props:i});const u=[B(`${Ae}-outline`),{sourceLayer:Ae},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ce({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Y(o,[f&0&&ne(B(Ae)),f&0&&{sourceLayer:Ae},f&6&&{paint:{"fill-color":me(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":K(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&1?Y(u,[f&0&&ne(B(`${Ae}-outline`)),f&0&&{sourceLayer:Ae},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Ki(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:Ae,$$slots:{right:[qi],default:[Hi]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new oe({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&nr(r);return o=new $e({props:{url:`pmtiles://${ue()}/v1/${Ae}.pmtiles`,$$slots:{default:[Xi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=nr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Ae="imd";function Zi(r,e,n){let t=ee.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Ji extends q{constructor(e){super(),W(this,e,Zi,Ki,z,{})}}function Yi(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Qi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xi(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Qi]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),k(e,n),b(t,e,null),k(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function ea(r){let e,n,t;return n=new se({props:{$$slots:{default:[xi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ta(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&m(e)}}}function na(r){let e,n;return e=new re({props:{$$slots:{default:[ta,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ra(r){let e,n,t,l;const o=[B(st),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[na]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ue({props:i}),e.$on("click",oa);const u=[B(`${st}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ce({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(st)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${st}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function la(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:st,$$slots:{right:[ea],default:[Yi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),Z.push(()=>Q(e,"checked",i)),l=new Ft({props:{data:`${ue()}/v1/${st}.geojson`,$$slots:{default:[ra]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let st="local_authority_districts";function oa(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function sa(r,e,n){let t=ee.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ia extends q{constructor(e){super(),W(this,e,sa,la,z,{})}}function aa(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function fa(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ua(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ca(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function $a(r){let e;return{c(){e=w("this map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function pa(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ma(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y,S,O,T,F,D,N,I,E;return t=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[fa]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ua]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ca]},$$scope:{ctx:r}}}),g=new V({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[$a]},$$scope:{ctx:r}}}),F=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[pa]},$$scope:{ctx:r}}}),I=new De({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=A("strong"),d=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(g.$$.fragment),y=w(" to get more details."),S=C(),O=A("p"),T=w("Data from ONS Geography via "),h(F.$$.fragment),D=w(", as of November 2022."),N=C(),h(I.$$.fragment)},m(M,L){p(M,e,L),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),b(u,e,null),k(e,s),p(M,a,L),p(M,f,L),k(f,c),k(c,d),b(g,c,null),k(c,y),p(M,S,L),p(M,O,L),k(O,T),b(F,O,null),k(O,D),p(M,N,L),b(I,M,L),E=!0},p(M,L){const P={};L&16&&(P.$$scope={dirty:L,ctx:M}),t.$set(P);const R={};L&16&&(R.$$scope={dirty:L,ctx:M}),o.$set(R);const U={};L&16&&(U.$$scope={dirty:L,ctx:M}),u.$set(U);const j={};L&16&&(j.$$scope={dirty:L,ctx:M}),g.$set(j);const X={};L&16&&(X.$$scope={dirty:L,ctx:M}),F.$set(X)},i(M){E||($(t.$$.fragment,M),$(o.$$.fragment,M),$(u.$$.fragment,M),$(g.$$.fragment,M),$(F.$$.fragment,M),$(I.$$.fragment,M),E=!0)},o(M){_(t.$$.fragment,M),_(o.$$.fragment,M),_(u.$$.fragment,M),_(g.$$.fragment,M),_(F.$$.fragment,M),_(I.$$.fragment,M),E=!1},d(M){M&&(m(e),m(a),m(f),m(S),m(O),m(N)),v(t),v(o),v(u),v(g),v(F),v(I,M)}}}function _a(r){let e,n,t;return n=new se({props:{$$slots:{default:[ma]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ga(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&m(e)}}}function da(r){let e,n;return e=new re({props:{$$slots:{default:[ga,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ha(r){let e,n,t,l;const o=[B(Le),{sourceLayer:Le},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[da]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ue({props:i});const u=[B(`${Le}-outline`),{sourceLayer:Le},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ce({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(Le)),f&0&&{sourceLayer:Le},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${Le}-outline`)),f&0&&{sourceLayer:Le},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function ba(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Le,$$slots:{right:[_a],default:[aa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),Z.push(()=>Q(e,"checked",i)),l=new $e({props:{url:`pmtiles://${ue()}/v1/${Le}.pmtiles`,$$slots:{default:[ha]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Le="local_planning_authorities";function va(r,e,n){let t=ee.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class wa extends q{constructor(e){super(),W(this,e,va,ba,z,{})}}function ka(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function ya(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Sa(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ya]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),k(e,n),b(t,e,null),k(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Ta(r){let e,n,t;return n=new se({props:{$$slots:{default:[Sa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Oa(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&H(t,n)},d(l){l&&m(e)}}}function Ca(r){let e,n;return e=new re({props:{$$slots:{default:[Oa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Aa(r){let e,n,t,l;const o=[B(Ie),{sourceLayer:Ie},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ca]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ue({props:i}),e.$on("click",Ia);const u=[B(`${Ie}-outline`),{sourceLayer:Ie},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ce({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(Ie)),f&0&&{sourceLayer:Ie},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${Ie}-outline`)),f&0&&{sourceLayer:Ie},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function La(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ie,$$slots:{right:[Ta],default:[ka]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),Z.push(()=>Q(e,"checked",i)),l=new $e({props:{url:`pmtiles://${ue()}/v1/${Ie}.pmtiles`,$$slots:{default:[Aa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ie="parliamentary_constituencies";function Ia(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Pa(r,e,n){let t=ee.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ma extends q{constructor(e){super(),W(this,e,Pa,La,z,{})}}function Fa(r){let e;return{c(){e=w("Pollution")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ea(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Na(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Da(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ja(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y,S,O;return t=new V({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ea]},$$scope:{ctx:r}}}),f=new V({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Na]},$$scope:{ctx:r}}}),d=new V({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Da]},$$scope:{ctx:r}}}),S=new De({}),{c(){e=A("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        gm
        `),o=A("sup"),o.textContent="3",i=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=C(),s=A("p"),a=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(d.$$.fragment),g=w("."),y=C(),h(S.$$.fragment)},m(T,F){p(T,e,F),k(e,n),b(t,e,null),k(e,l),k(e,o),k(e,i),p(T,u,F),p(T,s,F),k(s,a),b(f,s,null),k(s,c),b(d,s,null),k(s,g),p(T,y,F),b(S,T,F),O=!0},p(T,F){const D={};F&2048&&(D.$$scope={dirty:F,ctx:T}),t.$set(D);const N={};F&2048&&(N.$$scope={dirty:F,ctx:T}),f.$set(N);const I={};F&2048&&(I.$$scope={dirty:F,ctx:T}),d.$set(I)},i(T){O||($(t.$$.fragment,T),$(f.$$.fragment,T),$(d.$$.fragment,T),$(S.$$.fragment,T),O=!0)},o(T){_(t.$$.fragment,T),_(f.$$.fragment,T),_(d.$$.fragment,T),_(S.$$.fragment,T),O=!1},d(T){T&&(m(e),m(u),m(s),m(y)),v(t),v(f),v(d),v(S,T)}}}function Ra(r){let e,n,t;return n=new se({props:{$$slots:{default:[ja]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function rr(r){let e,n,t,l,o=r[3](r[0])+"",i,u,s,a,f,c,d,g,y,S,O,T,F;function D(L){r[7](L)}let N={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(N.value=r[0]),e=new Ot({props:N}),Z.push(()=>Q(e,"value",D));const I=[Ha,Ba],E=[];function M(L,P){return L[0]=="Noise"?0:1}return g=M(r),y=E[g]=I[g](r),{c(){h(e.$$.fragment),t=C(),l=A("p"),i=w(o),u=C(),s=A("div"),a=A("label"),f=w(`Opacity
      `),c=A("input"),d=C(),y.c(),S=ke(),G(c,"type","range"),G(c,"min","0"),G(c,"max","100")},m(L,P){b(e,L,P),p(L,t,P),p(L,l,P),k(l,i),p(L,u,P),p(L,s,P),k(s,a),k(a,f),k(a,c),Ut(c,r[2]),p(L,d,P),E[g].m(L,P),p(L,S,P),O=!0,T||(F=[yt(c,"change",r[8]),yt(c,"input",r[8])],T=!0)},p(L,P){const R={};!n&&P&1&&(n=!0,R.value=L[0],x(()=>n=!1)),e.$set(R),(!O||P&1)&&o!==(o=L[3](L[0])+"")&&H(i,o),P&4&&Ut(c,L[2]);let U=g;g=M(L),g===U?E[g].p(L,P):(ie(),_(E[U],1,1,()=>{E[U]=null}),ae(),y=E[g],y?y.p(L,P):(y=E[g]=I[g](L),y.c()),$(y,1),y.m(S.parentNode,S))},i(L){O||($(e.$$.fragment,L),$(y),O=!0)},o(L){_(e.$$.fragment,L),_(y),O=!1},d(L){L&&(m(t),m(l),m(u),m(s),m(d),m(S)),v(e,L),E[g].d(L),T=!1,Jr(F)}}}function Ba(r){let e,n,t;return{c(){e=A("img"),bn(e.src,n=r[5](r[0]))||G(e,"src",n),G(e,"width",150),G(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){p(l,e,o)},p(l,o){o&1&&!bn(e.src,n=l[5](l[0]))&&G(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&G(e,"alt",t)},i:te,o:te,d(l){l&&m(e)}}}function Ha(r){let e,n;return e=new ze({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ua(r){let e,n;const t=[B("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new fl({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&6?Y(t,[t[0],i&4&&{paint:{"raster-opacity":o[2]/100}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function za(r){let e,n,t,l,o,i;function u(f){r[6](f)}let s={id:"pollution",$$slots:{right:[Ra],default:[Fa]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new oe({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[1]&&rr(r);return o=new Tl({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Ua]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],x(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&$(a,1)):(a=rr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const g={};c&1&&(g.tiles=[f[4](f[0])]),c&2054&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}function Ga(r,e,n){let t,l=!1,o=50,i="PM25_viridis";function u(){return i=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${i}/MapServer/WMSServer`}function s(y){return t[1]}function a(y){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${S}`}function f(y){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${S}`}function c(y){l=y,n(1,l)}function d(y){i=y,n(0,i)}function g(){o=Yr(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[i])},[i,l,o,s,a,f,c,d,g]}class qa extends q{constructor(e){super(),W(this,e,Ga,za,z,{})}}function Wa(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Va(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Xa(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Va]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),k(e,n),b(t,e,null),k(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Ka(r){let e,n,t;return n=new se({props:{$$slots:{default:[Xa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Za(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&m(e)}}}function Ja(r){let e,n;return e=new re({props:{$$slots:{default:[Za,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ya(r){let e,n,t,l;const o=[B(Pe),{sourceLayer:Pe},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ja]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ue({props:i}),e.$on("click",xa);const u=[B(`${Pe}-outline`),{sourceLayer:Pe},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ce({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(Pe)),f&0&&{sourceLayer:Pe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${Pe}-outline`)),f&0&&{sourceLayer:Pe},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Qa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Pe,$$slots:{right:[Ka],default:[Wa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),Z.push(()=>Q(e,"checked",i)),l=new $e({props:{url:`pmtiles://${ue()}/v1/${Pe}.pmtiles`,$$slots:{default:[Ya]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Pe="wards";function xa(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function ef(r,e,n){let t=ee.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class tf extends q{constructor(e){super(),W(this,e,ef,Qa,z,{})}}function nf(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function rf(r){let e,n,t,l;return t=new V({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){p(o,e,i),k(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||($(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&m(e),v(t)}}}class Xe extends q{constructor(e){super(),W(this,e,null,rf,z,{})}}function lf(r){let e,n,t;return e=new _e({props:{color:ee.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function of(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function sf(r){let e,n,t,l,o,i,u,s,a;return o=new V({props:{href:"https://gtfs.org",$$slots:{default:[of]},$$scope:{ctx:r}}}),s=new Xe({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=C(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),k(t,l),b(o,t,null),k(t,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&8&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(u)),v(o),v(s,f)}}}function af(r){let e,n,t;return n=new se({props:{$$slots:{default:[sf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ff(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function uf(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function cf(r){let e;function n(o,i){return o[2].has_bus_lane?uf:ff}let t=n(r),l=t(r);return{c(){l.c(),e=ke()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function $f(r){let e,n;return e=new re({props:{$$slots:{default:[cf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pf(r){let e,n;const t=[B(it),{sourceLayer:it},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ee.bus_route_with_lane,ee.bus_route_without_lane],"line-width":5,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[$f]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ce({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Y(t,[i&0&&ne(B(it)),i&0&&{sourceLayer:it},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function mf(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:it,$$slots:{right:[af],default:[lf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),Z.push(()=>Q(e,"checked",i)),l=new $e({props:{url:`pmtiles://${ue()}/v1/${it}.pmtiles`,$$slots:{default:[pf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let it="bus_routes";function _f(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class gf extends q{constructor(e){super(),W(this,e,_f,mf,z,{})}}function lr(r){const e=Sf(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function or(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function df(r){let e;return{c(){e=w("Cycle paths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function hf(r){let e,n,t,l,o,i,u,s;return u=new Xe({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=C(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=C(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=C(),h(u.$$.fragment)},m(a,f){p(a,e,f),p(a,n,f),p(a,t,f),p(a,l,f),p(a,o,f),p(a,i,f),b(u,a,f),s=!0},p:te,i(a){s||($(u.$$.fragment,a),s=!0)},o(a){_(u.$$.fragment,a),s=!1},d(a){a&&(m(e),m(n),m(t),m(l),m(o),m(i)),v(u,a)}}}function bf(r){let e,n,t;return n=new se({props:{$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function sr(r){let e,n,t=Ee(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=ir(or(r,t,i));const o=i=>_(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=ke()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);p(i,e,u),n=!0},p(i,u){if(u&2){t=Ee(i[1]);let s;for(s=0;s<t.length;s+=1){const a=or(i,t,s);l[s]?(l[s].p(a,u),$(l[s],1)):(l[s]=ir(a),l[s].c(),$(l[s],1),l[s].m(e.parentNode,e))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)$(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)_(l[u]);n=!1},d(i){i&&m(e),St(l,i)}}}function ir(r){let e,n,t,l=r[7]+"",o,i,u;return n=new _e({props:{color:r[8]}}),{c(){e=A("div"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){p(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p:te,i(s){u||($(n.$$.fragment,s),u=!0)},o(s){_(n.$$.fragment,s),u=!1},d(s){s&&m(e),v(n)}}}function vf(r){lr(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,d,g=r[6]+"",y;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Direction: "),u=A("b"),a=C(),f=A("p"),c=w("Width: "),d=A("b"),y=w(g)},m(S,O){p(S,e,O),k(e,t),p(S,l,O),p(S,o,O),k(o,i),k(o,u),u.innerHTML=s,p(S,a,O),p(S,f,O),k(f,c),k(f,d),k(d,y)},p(S,O){lr(S),O&8&&n!==(n=S[4]+"")&&H(t,n),O&8&&s!==(s=S[5]+"")&&(u.innerHTML=s),O&8&&g!==(g=S[6]+"")&&H(y,g)},d(S){S&&(m(e),m(l),m(o),m(a),m(f))}}}function wf(r){let e,n;return e=new re({props:{$$slots:{default:[vf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kf(r){let e,n;const t=[B(at),{sourceLayer:at},{paint:{"line-color":un(["get","kind"],{track:ee.cycle_paths.track,lane:ee.cycle_paths.lane,shared_use_segregated:ee.cycle_paths.shared_use_segregated,shared_use_unsegregated:ee.cycle_paths.shared_use_unsegregated},"red"),"line-width":He,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[wf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ce({props:l}),e.$on("click",Tf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Y(t,[i&0&&ne(B(at)),i&0&&{sourceLayer:at},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function yf(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:at,$$slots:{right:[bf],default:[df]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new oe({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&sr(r);return o=new $e({props:{url:`pmtiles://${ue()}/v1/${at}.pmtiles`,$$slots:{default:[kf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=sr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const g={};c&2049&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let at="cycle_paths";function Sf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Tf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Of(r,e,n){let t=[["Separated tracks",ee.cycle_paths.track],["Unprotected lanes",ee.cycle_paths.lane],["Shared-use (segregated)",ee.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",ee.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Cf extends q{constructor(e){super(),W(this,e,Of,yf,z,{})}}function Af(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Lf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function If(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Lf]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),k(e,n),b(t,e,null),k(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Pf(r){let e,n,t;return n=new se({props:{$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Mf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&H(t,n)},d(l){l&&m(e)}}}function Ff(r){let e,n;return e=new re({props:{$$slots:{default:[Mf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ef(r){let e,n;const t=[B(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Ff]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ce({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(B(ft)),i&0&&{sourceLayer:ft},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Nf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ft,$$slots:{right:[Pf],default:[Af]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),Z.push(()=>Q(e,"checked",i)),l=new $e({props:{url:`pmtiles://${ue()}/v1/${ft}.pmtiles`,$$slots:{default:[Ef]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ft="mrn";function Df(r,e,n){let t=ee.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class jf extends q{constructor(e){super(),W(this,e,Df,Nf,z,{})}}function Rf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Bf(r){let e;return{c(){e=w("the PCT website")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Uf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new V({props:{href:"https://www.pct.bike",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),a=new V({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=C(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=C(),o=A("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(d,g){p(d,e,g),p(d,n,g),p(d,t,g),p(d,l,g),p(d,o,g),k(o,i),b(u,o,null),k(o,s),b(a,o,null),k(o,f),c=!0},p(d,g){const y={};g&1024&&(y.$$scope={dirty:g,ctx:d}),u.$set(y);const S={};g&1024&&(S.$$scope={dirty:g,ctx:d}),a.$set(S)},i(d){c||($(u.$$.fragment,d),$(a.$$.fragment,d),c=!0)},o(d){_(u.$$.fragment,d),_(a.$$.fragment,d),c=!1},d(d){d&&(m(e),m(n),m(t),m(l),m(o)),v(u),v(a)}}}function zf(r){let e,n,t;return n=new se({props:{$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ar(r){let e,n,t,l,o,i,u,s;e=new ze({props:{colorScale:r[3],limits:r[4]}});function a(g){r[7](g)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new Or({props:f}),Z.push(()=>Q(t,"value",a));function c(g){r[8](g)}let d={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(d.value=r[1]),i=new Ot({props:d}),Z.push(()=>Q(i,"value",c)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),o=C(),h(i.$$.fragment)},m(g,y){b(e,g,y),p(g,n,y),b(t,g,y),p(g,o,y),b(i,g,y),s=!0},p(g,y){const S={};!l&&y&1&&(l=!0,S.value=g[0],x(()=>l=!1)),t.$set(S);const O={};!u&&y&2&&(u=!0,O.value=g[1],x(()=>u=!1)),i.$set(O)},i(g){s||($(e.$$.fragment,g),$(t.$$.fragment,g),$(i.$$.fragment,g),s=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(i.$$.fragment,g),s=!1},d(g){g&&(m(n),m(o)),v(e,g),v(t,g),v(i,g)}}}function Gf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new pn(!1),t=ke(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function qf(r){let e,n;return e=new re({props:{$$slots:{default:[Gf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wf(r){let e,n;const t=[B(Me),{sourceLayer:Me},{paint:{"line-color":me(["get",r[1]],r[4],r[3]),"line-width":He,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Me?"visible":"none"}}];let l={$$slots:{default:[qf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ce({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Y(t,[i&0&&ne(B(Me)),i&0&&{sourceLayer:Me},i&26&&{paint:{"line-color":me(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Me?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Vf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new pn(!1),t=ke(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Xf(r){let e,n;return e=new re({props:{$$slots:{default:[Vf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kf(r){let e,n;const t=[B(Je),{sourceLayer:Je},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",r[1]],r[4],r[3]),"line-width":He,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Je?"visible":"none"}}];let l={$$slots:{default:[Xf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ce({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Y(t,[i&0&&ne(B(Je)),i&0&&{sourceLayer:Je},t[2],t[3],i&26&&{paint:{"line-color":me(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Je?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Zf(r){let e,n,t,l,o,i,u,s;function a(d){r[6](d)}let f={id:Me,$$slots:{right:[zf],default:[Rf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new oe({props:f}),Z.push(()=>Q(e,"checked",a));let c=r[2]&&ar(r);return o=new $e({props:{url:`pmtiles://${ue()}/v1/${Me}.pmtiles`,$$slots:{default:[Wf]},$$scope:{ctx:r}}}),u=new $e({props:{url:`pmtiles://${ue()}/v1/${Je}.pmtiles`,$$slots:{default:[Kf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),c&&c.c(),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(d,g){b(e,d,g),p(d,t,g),c&&c.m(d,g),p(d,l,g),b(o,d,g),p(d,i,g),b(u,d,g),s=!0},p(d,[g]){const y={};g&1024&&(y.$$scope={dirty:g,ctx:d}),!n&&g&4&&(n=!0,y.checked=d[2],x(()=>n=!1)),e.$set(y),d[2]?c?(c.p(d,g),g&4&&$(c,1)):(c=ar(d),c.c(),$(c,1),c.m(l.parentNode,l)):c&&(ie(),_(c,1,1,()=>{c=null}),ae());const S={};g&1031&&(S.$$scope={dirty:g,ctx:d}),o.$set(S);const O={};g&1031&&(O.$$scope={dirty:g,ctx:d}),u.$set(O)},i(d){s||($(e.$$.fragment,d),$(c),$(o.$$.fragment,d),$(u.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(c),_(o.$$.fragment,d),_(u.$$.fragment,d),s=!1},d(d){d&&(m(t),m(l),m(i)),v(e,d),c&&c.d(d),v(o,d),v(u,d)}}}let Me="pct_commute",Je="pct_school";function Jf(r,e,n){let t=ee.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Me,i="baseline",u=!1;function s(d){let g=d.baseline,y=d.gov_target,S=d.go_dutch,O=`<h2>Trip purpose: ${o==Me?"commuting":"school"}</h2>`;if(O+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)O+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,O+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let T=(y/g).toFixed(1),F=(S/g).toFixed(1);O+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${T}x</b> of baseline)</p>`,O+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${F}x</b> of baseline)</p>`}return O}function a(d){u=d,n(2,u)}function f(d){o=d,n(0,o)}function c(d){i=d,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class Yf extends q{constructor(e){super(),W(this,e,Jf,Zf,z,{})}}function Qf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xf(r){let e;return{c(){e=w("Basemap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function eu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function tu(r){let e,n,t,l,o,i,u,s,a,f,c,d;return t=new V({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[xf]},$$scope:{ctx:r}}}),f=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=C(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=C(),s=A("p"),a=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(g,y){p(g,e,y),k(e,n),b(t,e,null),k(e,l),p(g,o,y),p(g,i,y),p(g,u,y),p(g,s,y),k(s,a),b(f,s,null),k(s,c),d=!0},p(g,y){const S={};y&256&&(S.$$scope={dirty:y,ctx:g}),t.$set(S);const O={};y&256&&(O.$$scope={dirty:y,ctx:g}),f.$set(O)},i(g){d||($(t.$$.fragment,g),$(f.$$.fragment,g),d=!0)},o(g){_(t.$$.fragment,g),_(f.$$.fragment,g),d=!1},d(g){g&&(m(e),m(o),m(i),m(u),m(s)),v(t),v(f)}}}function nu(r){let e,n,t;return n=new se({props:{$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function fr(r){let e,n,t,l,o;e=new ze({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new Or({props:u}),Z.push(()=>Q(t,"value",i)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],x(()=>l=!1)),t.$set(f)},i(s){o||($(e.$$.fragment,s),$(t.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),o=!1},d(s){s&&m(n),v(e,s),v(t,s)}}}function ru(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,d=r[4][r[7].highest_description]+"",g,y;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=C(),u=A("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),g=w(d),y=w(")")},m(S,O){p(S,e,O),k(e,n),k(e,l),k(e,o),p(S,i,O),p(S,u,O),k(u,s),k(u,f),k(u,c),k(u,g),k(u,y)},p(S,O){O&128&&t!==(t=S[7].indicative_mph+"")&&H(l,t),O&128&&a!==(a=S[7].highest_mph+"")&&H(f,a),O&128&&d!==(d=S[4][S[7].highest_description]+"")&&H(g,d)},d(S){S&&(m(e),m(i),m(u))}}}function lu(r){let e,n;return e=new re({props:{$$slots:{default:[ru,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ou(r){let e,n;const t=[B(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",r[0]],r[3],r[2]),"line-width":He,"line-opacity":K(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[lu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ce({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Y(t,[i&0&&ne(B(ut)),i&0&&{sourceLayer:ut},t[2],t[3],i&13&&{paint:{"line-color":me(["get",o[0]],o[3],o[2]),"line-width":He,"line-opacity":K(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function su(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ut,$$slots:{right:[nu],default:[Qf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new oe({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[1]&&fr(r);return o=new $e({props:{url:`pmtiles://${mn()}/v1/${ut}.pmtiles`,$$slots:{default:[ou]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&256&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],x(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&$(a,1)):(a=fr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const g={};c&259&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="road_speeds";function iu(r,e,n){let t=ee.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class au extends q{constructor(e){super(),W(this,e,iu,su,z,{})}}function fu(r){let e;return{c(){e=w("OS Road widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function uu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function cu(r){let e,n,t,l,o,i,u,s,a;return u=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=C(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=C(),o=A("p"),i=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),p(f,l,c),p(f,o,c),k(o,i),b(u,o,null),k(o,s),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),u.$set(d)},i(f){a||($(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(l),m(o)),v(u)}}}function $u(r){let e,n,t;return n=new se({props:{$$slots:{default:[cu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ur(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pu(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",d,g;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),i=w(`
        meters`),u=C(),s=A("p"),a=w("Minimum width: "),f=A("b"),d=w(c),g=w(`
        meters`)},m(y,S){p(y,e,S),k(e,n),k(e,t),k(t,o),k(e,i),p(y,u,S),p(y,s,S),k(s,a),k(s,f),k(f,d),k(s,g)},p(y,S){S&16&&l!==(l=y[4].average+"")&&H(o,l),S&16&&c!==(c=y[4].minimum+"")&&H(d,c)},d(y){y&&(m(e),m(u),m(s))}}}function mu(r){let e,n;return e=new re({props:{$$slots:{default:[pu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _u(r){let e,n;const t=[B(ct),{sourceLayer:ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get","average"],r[2],r[1]),"line-width":He,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[mu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ce({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Y(t,[i&0&&ne(B(ct)),i&0&&{sourceLayer:ct},t[2],t[3],i&6&&{paint:{"line-color":me(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function gu(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ct,$$slots:{right:[$u],default:[fu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new oe({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&ur(r);return o=new $e({props:{url:`pmtiles://${mn()}/v1/${ct}.pmtiles`,$$slots:{default:[_u]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=ur(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ct="road_widths";function du(r,e,n){let t=ee.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class hu extends q{constructor(e){super(),W(this,e,du,gu,z,{})}}function bu(r){let e,n,t;return{c(){e=A("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(l,o){p(l,e,o),r[7](e),n||(t=yt(e,"change",r[5]),n=!0)},p:te,d(l){l&&m(e),r[7](null),n=!1,t()}}}function cr(r){let e,n;return e=new Et({props:{small:!0,$$slots:{default:[wu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vu(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new _e({props:{color:wt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),p(u,n,s),p(u,l,s),p(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&H(l,t)},i(u){i||($(e.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),i=!1},d(u){u&&(m(n),m(l),m(o)),v(e,u)}}}function wu(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[vu]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new oe({props:o}),Z.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],x(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function ku(r){let e,n,t,l,o,i;e=new Tr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[bu]},$$scope:{ctx:r}}}),t=new Cr({props:{errorMessage:r[3]}});let u=r[2]>0&&cr(r);return{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),u&&u.c(),o=ke()},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),u&&u.m(s,a),p(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&$(u,1)):(u=cr(s),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(ie(),_(u,1,1,()=>{u=null}),ae())},i(s){i||($(e.$$.fragment,s),$(t.$$.fragment,s),$(u),i=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(u),i=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),u&&u.d(s)}}}function yu(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,d,g,y,S=r[10].notes+"",O,T,F,D,N,I,E,M=r[10].id+"",L,P,R,U,j,X=(r[10].inspector??"???")+"",pe,gt,ve,xe=r[10].submission_time+"",dt,et,ge,ht,je,Ge=r[10].scheme_reference+"",Ke,bt,tt,Ze=r[10].current_design_stage+"",nt;return{c(){e=A("div"),n=A("h2"),l=w(t),o=C(),i=A("p"),u=A("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=C(),d=A("p"),g=A("u"),g.textContent="Notes",y=w(`
          : `),O=w(S),T=C(),F=A("hr"),D=C(),N=A("p"),I=w("Critical issue ID: "),E=A("b"),L=w(M),P=C(),R=A("p"),U=w("Submitted by "),j=A("b"),pe=w(X),gt=w(`
          at
          `),ve=A("b"),dt=w(xe),et=C(),ge=A("p"),ht=w("For scheme "),je=A("b"),Ke=w(Ge),bt=w(`
          in stage
          `),tt=A("b"),nt=w(Ze),be(e,"max-width","30vw")},m(we,Ce){p(we,e,Ce),k(e,n),k(n,l),k(e,o),k(e,i),k(i,u),k(i,s),k(i,f),k(e,c),k(e,d),k(d,g),k(d,y),k(d,O),k(e,T),k(e,F),k(e,D),k(e,N),k(N,I),k(N,E),k(E,L),k(e,P),k(e,R),k(R,U),k(R,j),k(j,pe),k(R,gt),k(R,ve),k(ve,dt),k(e,et),k(e,ge),k(ge,ht),k(ge,je),k(je,Ke),k(ge,bt),k(ge,tt),k(tt,nt)},p(we,Ce){Ce&1024&&t!==(t=we[10].critical_type+"")&&H(l,t),Ce&1024&&a!==(a=we[10].location_description+"")&&H(f,a),Ce&1024&&S!==(S=we[10].notes+"")&&H(O,S),Ce&1024&&M!==(M=we[10].id+"")&&H(L,M),Ce&1024&&X!==(X=(we[10].inspector??"???")+"")&&H(pe,X),Ce&1024&&xe!==(xe=we[10].submission_time+"")&&H(dt,xe),Ce&1024&&Ge!==(Ge=we[10].scheme_reference+"")&&H(Ke,Ge),Ce&1024&&Ze!==(Ze=we[10].current_design_stage+"")&&H(nt,Ze)},d(we){we&&m(e)}}}function Su(r){let e,n;return e=new re({props:{$$slots:{default:[yu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tu(r){let e,n,t,l,o,i;const u=[B(`${We}-clusters`),{applyToClusters:!0},{paint:{"circle-color":wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let g=0;g<u.length;g+=1)s=J(s,u[g]);e=new Ve({props:s}),e.$on("click",r[6]);const a=[B(`${We}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let g=0;g<a.length;g+=1)f=J(f,a[g]);t=new Ll({props:f});const c=[B(`${We}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":wt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let d={$$slots:{default:[Su]},$$scope:{ctx:r}};for(let g=0;g<c.length;g+=1)d=J(d,c[g]);return o=new Ve({props:d}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment)},m(g,y){b(e,g,y),p(g,n,y),b(t,g,y),p(g,l,y),b(o,g,y),i=!0},p(g,y){const S=y&2?Y(u,[y&0&&ne(B(`${We}-clusters`)),u[1],y&0&&{paint:{"circle-color":wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:g[1]?"visible":"none"}},u[4]]):{};e.$set(S);const O=y&2?Y(a,[y&0&&ne(B(`${We}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:g[1]?"visible":"none"}}]):{};t.$set(O);const T=y&2?Y(c,[y&0&&ne(B(`${We}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":wt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:g[1]?"visible":"none"}}]):{};y&2048&&(T.$$scope={dirty:y,ctx:g}),o.$set(T)},i(g){i||($(e.$$.fragment,g),$(t.$$.fragment,g),$(o.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),i=!1},d(g){g&&(m(n),m(l)),v(e,g),v(t,g),v(o,g)}}}function Ou(r){let e,n,t,l;return e=new Te({props:{label:"Critical Issues",$$slots:{default:[ku]},$$scope:{ctx:r}}}),t=new Ft({props:{id:We,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}let We="criticals",wt="red";function Cu(r,e,n){let t;fe(r,cn,g=>n(9,t=g));let l,o=!0,i=0,u="",s=Qr();async function a(g){try{n(4,s=await Hs(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f(g){t.getSource(We).getClusterExpansionZoom(g.detail.features[0].properties.cluster_id,(y,S)=>{y||t.easeTo({center:g.detail.features[0].geometry.coordinates,zoom:S})})}function c(g){Z[g?"unshift":"push"](()=>{l=g,n(0,l)})}function d(g){o=g,n(1,o)}return[l,o,i,u,s,a,f,c,d]}class Au extends q{constructor(e){super(),W(this,e,Cu,Ou,z,{})}}function Lu(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Iu(r){let e;return{c(){e=w("crossing")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pu(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Iu]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),k(e,n),b(t,e,null),k(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Mu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Pu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Fu(r){let e,n=$r(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=$r(l[3])+"")&&H(t,n)},d(l){l&&m(e)}}}function Eu(r){let e,n;return e=new re({props:{$$slots:{default:[Fu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nu(r){let e,n;const t=[B($t),{sourceLayer:$t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Eu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ve({props:l}),e.$on("click",ju),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(B($t)),i&0&&{sourceLayer:$t},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Du(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:$t,$$slots:{right:[Mu],default:[Lu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),Z.push(()=>Q(e,"checked",i)),l=new $e({props:{url:`pmtiles://${ue()}/v1/${$t}.pmtiles`,$$slots:{default:[Nu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let $t="crossings";function $r(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function ju(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Ru(r,e,n){let t=ee.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Bu extends q{constructor(e){super(),W(this,e,Ru,Du,z,{})}}function Hu(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Uu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function zu(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Uu]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),k(e,n),b(t,e,null),k(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Gu(r){let e,n,t;return n=new se({props:{$$slots:{default:[zu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function qu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(i,u){p(i,e,u),k(e,n),k(e,t),k(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&H(o,l)},d(i){i&&m(e)}}}function Wu(r){let e,n;return e=new re({props:{$$slots:{default:[qu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vu(r){let e,n;const t=[B(pt),{sourceLayer:pt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Wu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(B(pt)),i&0&&{sourceLayer:pt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Xu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:pt,$$slots:{right:[Gu],default:[Hu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),Z.push(()=>Q(e,"checked",i)),l=new $e({props:{url:`pmtiles://${ue()}/v1/${pt}.pmtiles`,$$slots:{default:[Vu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let pt="cycle_parking";function Ku(r,e,n){let t=ee.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Zu extends q{constructor(e){super(),W(this,e,Ku,Xu,z,{})}}function Ju(r){let e,n,t,l;return e=new _e({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=C(),t=w(r[2])},m(o,i){b(e,o,i),p(o,n,i),p(o,t,i),l=!0},p(o,i){(!l||i&4)&&H(t,o[2])},i(o){l||($(e.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),l=!1},d(o){o&&(m(n),m(t)),v(e,o)}}}function Yu(r){let e;const n=r[5].default,t=Lt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&It(t,n,l,l[7],e?Mt(n,l[7],o,null):Pt(l[7]),null)},i(l){e||($(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Qu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function xu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&H(t,n)},d(l){l&&m(e)}}}function ec(r){let e,n;return e=new re({props:{$$slots:{default:[xu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tc(r){let e,n;const t=[B(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":K(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[ec]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Y(t,[i&1&&ne(B(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":K(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function nc(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[Qu],default:[Ju]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new oe({props:u}),Z.push(()=>Q(e,"checked",i)),l=new $e({props:{url:`pmtiles://${ue()}/v1/${r[0]}.pmtiles`,$$slots:{default:[tc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],x(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${ue()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function rc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=ee[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class gn extends q{constructor(e){super(),W(this,e,rc,nc,z,{name:0,singularNoun:1,pluralNoun:2})}}function lc(r){let e;return{c(){e=w("hospital")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function oc(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[lc]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),k(e,n),b(t,e,null),k(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function sc(r){let e,n;return e=new gn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[oc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class ic extends q{constructor(e){super(),W(this,e,null,sc,z,{})}}function ac(r){let e,n,t;return e=new _e({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function fc(r){let e;return{c(){e=w("railway station")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function uc(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[fc]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),k(e,n),b(t,e,null),k(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function cc(r){let e,n,t;return n=new se({props:{$$slots:{default:[uc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function $c(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&H(t,n)},d(l){l&&m(e)}}}function pc(r){let e,n;return e=new re({props:{$$slots:{default:[$c,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mc(r){let e,n;const t=[B(Wt),{paint:{"circle-color":r[1],"circle-radius":zt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[pc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(B(Wt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":zt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _c(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Wt,$$slots:{right:[cc],default:[ac]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new oe({props:u}),Z.push(()=>Q(e,"checked",i)),l=new Ft({props:{data:`${ue()}/v1/${Wt}.geojson`,$$slots:{default:[mc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Wt="railway_stations";function gc(r,e,n){let t=ee.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class dc extends q{constructor(e){super(),W(this,e,gc,_c,z,{})}}function hc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function bc(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[hc]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),k(e,n),b(t,e,null),k(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function vc(r){let e,n;return e=new gn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class wc extends q{constructor(e){super(),W(this,e,null,vc,z,{})}}function kc(r){let e;return{c(){e=w("sports pitches")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function yc(r){let e;return{c(){e=w("sports centres")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Sc(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[kc]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[yc]},$$scope:{ctx:r}}}),s=new Xe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function Tc(r){let e,n;return e=new gn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Sc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Oc extends q{constructor(e){super(),W(this,e,null,Tc,z,{})}}function Cc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ac(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Lc(r){let e;return{c(){e=w("methodology")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ic(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new V({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Lc]},$$scope:{ctx:r}}}),f=new De({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=C(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=C(),h(f.$$.fragment)},m(d,g){p(d,e,g),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),p(d,u,g),p(d,s,g),p(d,a,g),b(f,d,g),c=!0},p(d,g){const y={};g&64&&(y.$$scope={dirty:g,ctx:d}),t.$set(y);const S={};g&64&&(S.$$scope={dirty:g,ctx:d}),o.$set(S)},i(d){c||($(t.$$.fragment,d),$(o.$$.fragment,d),$(f.$$.fragment,d),c=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),c=!1},d(d){d&&(m(e),m(u),m(s),m(a)),v(t),v(o),v(f,d)}}}function Pc(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ic]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function pr(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,d,g,y=r[5].pedal_cycles_2022.toLocaleString()+"",S,O,T,F,D,N=r[5].method+"",I;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(s),f=C(),c=A("p"),d=w("Total pedal cycles (2022 AADF): "),g=A("b"),S=w(y),O=C(),T=A("p"),F=w("Count method: "),D=A("b"),I=w(N)},m(E,M){p(E,e,M),k(e,t),p(E,l,M),p(E,o,M),k(o,i),k(o,u),k(u,a),p(E,f,M),p(E,c,M),k(c,d),k(c,g),k(g,S),p(E,O,M),p(E,T,M),k(T,F),k(T,D),k(D,I)},p(E,M){M&32&&n!==(n=E[5].location+"")&&H(t,n),M&32&&s!==(s=E[5].motor_vehicles_2022.toLocaleString()+"")&&H(a,s),M&32&&y!==(y=E[5].pedal_cycles_2022.toLocaleString()+"")&&H(S,y),M&32&&N!==(N=E[5].method+"")&&H(I,N)},d(E){E&&(m(e),m(l),m(o),m(f),m(c),m(O),m(T))}}}function Fc(r){let e,n;return e=new re({props:{$$slots:{default:[Mc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ec(r){let e,n;const t=[B(mt),{sourceLayer:mt},{paint:{"circle-color":me(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Fc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ve({props:l}),e.$on("click",Dc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Y(t,[i&0&&ne(B(mt)),i&0&&{sourceLayer:mt},i&6&&{paint:{"circle-color":me(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Nc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:mt,$$slots:{right:[Pc],default:[Cc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new oe({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&pr(r);return o=new $e({props:{url:`pmtiles://${ue()}/v1/${mt}.pmtiles`,$$slots:{default:[Ec]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&64&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=pr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),_(a,1,1,()=>{a=null}),ae());const g={};c&65&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let mt="vehicle_counts";function Dc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function jc(r,e,n){let t=ee.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class Rc extends q{constructor(e){super(),W(this,e,jc,Nc,z,{})}}function Bc(r){let e,n,t,l,o,i,u,s;return e=new wc({}),t=new ic({}),o=new Oc({}),u=new dc({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),p(a,l,f),b(o,a,f),p(a,i,f),b(u,a,f),s=!0},i(a){s||($(e.$$.fragment,a),$(t.$$.fragment,a),$(o.$$.fragment,a),$(u.$$.fragment,a),s=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),s=!1},d(a){a&&(m(n),m(l),m(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Hc(r){let e,n;return e=new Et({props:{small:!0,$$slots:{default:[Bc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Cf({}),t=new jf({}),o=new gf({}),u=new Zu({}),a=new Bu({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,d){b(e,c,d),p(c,n,d),b(t,c,d),p(c,l,d),b(o,c,d),p(c,i,d),b(u,c,d),p(c,s,d),b(a,c,d),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function zc(r){let e,n;return e=new Et({props:{small:!0,$$slots:{default:[Uc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Ma({}),t=new tf({}),o=new Bi({}),u=new ia({}),a=new wa({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,d){b(e,c,d),p(c,n,d),b(t,c,d),p(c,l,d),b(o,c,d),p(c,i,d),b(u,c,d),p(c,s,d),b(a,c,d),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function qc(r){let e,n;return e=new Et({props:{small:!0,$$slots:{default:[Gc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wc(r){let e,n,t,l;return e=new Ai({}),t=new Ji({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Vc(r){let e,n,t,l;return e=new hu({}),t=new au({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Xc(r){let e,n,t,l,o=fn()=="Private (development)",i,u,s;e=new Rc({}),t=new Yf({});let a=o&&Vc();return u=new qa({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),a&&a.c(),i=C(),h(u.$$.fragment)},m(f,c){b(e,f,c),p(f,n,c),b(t,f,c),p(f,l,c),a&&a.m(f,c),p(f,i,c),b(u,f,c),s=!0},p:te,i(f){s||($(e.$$.fragment,f),$(t.$$.fragment,f),$(a),$(u.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(a),_(u.$$.fragment,f),s=!1},d(f){f&&(m(n),m(l),m(i)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function Kc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new ol({props:u}),Z.push(()=>Q(e,"enabled",i)),l=new cl({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],x(()=>n=!1)),e.$set(f)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Zc(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y,S,O;return e=new Au({}),t=new Te({props:{label:"Trip generators",$$slots:{default:[Hc]},$$scope:{ctx:r}}}),o=new Te({props:{label:"Existing infrastructure",$$slots:{default:[zc]},$$scope:{ctx:r}}}),u=new Te({props:{label:"Boundaries",$$slots:{default:[qc]},$$scope:{ctx:r}}}),a=new Te({props:{label:"Census",$$slots:{default:[Wc]},$$scope:{ctx:r}}}),c=new Te({props:{label:"Other",$$slots:{default:[Xc]},$$scope:{ctx:r}}}),g=new Te({props:{label:"Tools",$$slots:{default:[Kc]},$$scope:{ctx:r}}}),S=new ll({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),h(c.$$.fragment),d=C(),h(g.$$.fragment),y=C(),h(S.$$.fragment)},m(T,F){b(e,T,F),p(T,n,F),b(t,T,F),p(T,l,F),b(o,T,F),p(T,i,F),b(u,T,F),p(T,s,F),b(a,T,F),p(T,f,F),b(c,T,F),p(T,d,F),b(g,T,F),p(T,y,F),b(S,T,F),O=!0},p(T,F){const D={};F&8&&(D.$$scope={dirty:F,ctx:T}),t.$set(D);const N={};F&8&&(N.$$scope={dirty:F,ctx:T}),o.$set(N);const I={};F&8&&(I.$$scope={dirty:F,ctx:T}),u.$set(I);const E={};F&8&&(E.$$scope={dirty:F,ctx:T}),a.$set(E);const M={};F&8&&(M.$$scope={dirty:F,ctx:T}),c.$set(M);const L={};F&9&&(L.$$scope={dirty:F,ctx:T}),g.$set(L);const P={};F&2&&(P.disabled=!T[1]),S.$set(P)},i(T){O||($(e.$$.fragment,T),$(t.$$.fragment,T),$(o.$$.fragment,T),$(u.$$.fragment,T),$(a.$$.fragment,T),$(c.$$.fragment,T),$(g.$$.fragment,T),$(S.$$.fragment,T),O=!0)},o(T){_(e.$$.fragment,T),_(t.$$.fragment,T),_(o.$$.fragment,T),_(u.$$.fragment,T),_(a.$$.fragment,T),_(c.$$.fragment,T),_(g.$$.fragment,T),_(S.$$.fragment,T),O=!1},d(T){T&&(m(n),m(l),m(i),m(s),m(f),m(d),m(y)),v(e,T),v(t,T),v(o,T),v(u,T),v(a,T),v(c,T),v(g,T),v(S,T)}}}function Jc(r){let e,n;return e=new Te({props:{label:"Layers",open:!0,$$slots:{default:[Zc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yc(r,e,n){let t,l;fe(r,Xn,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&Xn.set(!t)},[t,l,o]}class Qc extends q{constructor(e){super(),W(this,e,Yc,Jc,z,{})}}function xc(r,e,n){let{loadFile:t}=e;return $n(async()=>{let o=await(await fetch(`${mn()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class e$ extends q{constructor(e){super(),W(this,e,xc,null,z,{loadFile:0})}}function t$(r){let e;return{c(){e=w("Show on map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function n$(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function r$(r){let e,n,t,l;return e=new en({props:{$$slots:{default:[t$]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new en({props:{$$slots:{default:[n$]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&32&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function l$(r){var F,D,N;let e,n,t=((F=r[0].browse)==null?void 0:F.authority_or_region)+"",l,o,i,u,s=((D=r[0].browse)==null?void 0:D.capital_scheme_id)+"",a,f,c,d,g=((N=r[0].browse)==null?void 0:N.funding_programme)+"",y,S,O,T;return O=new sl({props:{$$slots:{default:[r$]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=C(),i=A("p"),u=w("Capital scheme ID: "),a=w(s),f=C(),c=A("p"),d=w("Funding programme: "),y=w(g),S=C(),h(O.$$.fragment)},m(I,E){p(I,e,E),k(e,n),k(e,l),p(I,o,E),p(I,i,E),k(i,u),k(i,a),p(I,f,E),p(I,c,E),k(c,d),k(c,y),p(I,S,E),b(O,I,E),T=!0},p(I,E){var L,P,R;(!T||E&1)&&t!==(t=((L=I[0].browse)==null?void 0:L.authority_or_region)+"")&&H(l,t),(!T||E&1)&&s!==(s=((P=I[0].browse)==null?void 0:P.capital_scheme_id)+"")&&H(a,s),(!T||E&1)&&g!==(g=((R=I[0].browse)==null?void 0:R.funding_programme)+"")&&H(y,g);const M={};E&32&&(M.$$scope={dirty:E,ctx:I}),O.$set(M)},i(I){T||($(O.$$.fragment,I),T=!0)},o(I){_(O.$$.fragment,I),T=!1},d(I){I&&(m(e),m(o),m(i),m(f),m(c),m(S)),v(O,I)}}}function o$(r){var t;let e,n;return e=new Te({props:{label:`${r[0].scheme_reference}: ${(t=r[0].browse)==null?void 0:t.num_features} features`,$$slots:{default:[l$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),n=!0},p(l,[o]){var u;const i={};o&1&&(i.label=`${l[0].scheme_reference}: ${(u=l[0].browse)==null?void 0:u.num_features} features`),o&33&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||($(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function s$(r,e,n){let t,l;fe(r,_t,s=>n(3,t=s)),fe(r,cn,s=>n(4,l=s));let{scheme:o}=e;function i(){let s={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(xr(s),{padding:20,animate:!1})}function u(){var f,c;let s={type:"FeatureCollection",features:t.features.filter(d=>d.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(s)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=s=>{"scheme"in s&&n(0,o=s.scheme)},[o,i,u]}class i$ extends q{constructor(e){super(),W(this,e,s$,o$,z,{scheme:0})}}function mr(r){let e,n,t=vn(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,i){p(o,e,i),k(e,n),k(e,l)},p(o,i){i&1&&t!==(t=vn(o[0].length_meters)+"")&&H(l,t)},d(o){o&&m(e)}}}function _r(r){let e,n=r[2](r[0].description)+"";return{c(){e=A("p")},m(t,l){p(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[2](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&m(e)}}}function a$(r){let e,n,t,l=r[2](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,d,g,y,S,O=r[0].scheme_reference+"",T,F,D,N,I,E,M,L=r[0].length_meters&&mr(r),P=r[0].description&&_r(r);return{c(){var R,U,j;e=A("div"),n=A("h2"),t=new pn(!1),o=w(" ("),u=w(i),s=w(")"),a=C(),L&&L.c(),f=C(),P&&P.c(),c=C(),d=A("hr"),g=C(),y=A("p"),S=w("Part of scheme "),T=w(O),F=C(),D=A("p"),D.textContent=`Authority or region: ${(R=r[1].browse)==null?void 0:R.authority_or_region}`,N=C(),I=A("p"),I.textContent=`Capital scheme ID: ${(U=r[1].browse)==null?void 0:U.capital_scheme_id}`,E=C(),M=A("p"),M.textContent=`Funding programme: ${(j=r[1].browse)==null?void 0:j.funding_programme}`,t.a=o,be(e,"max-width","30vw")},m(R,U){p(R,e,U),k(e,n),t.m(l,n),k(n,o),k(n,u),k(n,s),k(e,a),L&&L.m(e,null),k(e,f),P&&P.m(e,null),k(e,c),k(e,d),k(e,g),k(e,y),k(y,S),k(y,T),k(e,F),k(e,D),k(e,N),k(e,I),k(e,E),k(e,M)},p(R,[U]){U&1&&l!==(l=R[2](R[0].name)+"")&&t.p(l),U&1&&i!==(i=R[0].intervention_type+"")&&H(u,i),R[0].length_meters?L?L.p(R,U):(L=mr(R),L.c(),L.m(e,f)):L&&(L.d(1),L=null),R[0].description?P?P.p(R,U):(P=_r(R),P.c(),P.m(e,c)):P&&(P.d(1),P=null),U&1&&O!==(O=R[0].scheme_reference+"")&&H(T,O)},i:te,o:te,d(R){R&&m(e),L&&L.d(),P&&P.d()}}}function f$(r,e,n){let t,l;fe(r,Ht,s=>n(3,t=s)),fe(r,qt,s=>n(4,l=s));let{props:o}=e,i=l.get(o.scheme_reference);function u(s){return t?s.replace(new RegExp(t,"gi"),a=>`<mark>${a}</mark>`):s}return r.$$set=s=>{"props"in s&&n(0,o=s.props)},[o,i,u]}class dn extends q{constructor(e){super(),W(this,e,f$,a$,z,{props:0})}}function u$(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&H(t,n)},d(l){l&&m(e)}}}function c$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $$(r){let e,n,t,l;return e=new re({props:{$$slots:{default:[u$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new re({props:{openOn:"click",$$slots:{default:[c$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function p$(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&H(t,n)},d(l){l&&m(e)}}}function m$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _$(r){let e,n,t,l;return e=new re({props:{$$slots:{default:[p$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new re({props:{openOn:"click",$$slots:{default:[m$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function g$(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&H(t,n)},d(l){l&&m(e)}}}function d$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function h$(r){let e,n,t,l;return e=new re({props:{$$slots:{default:[g$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new re({props:{openOn:"click",$$slots:{default:[d$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function b$(r){let e,n,t,l,o,i,u,s,a,f;const c=[B("interventions-points"),{filter:["all",wn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":zt,"circle-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let d={$$slots:{default:[$$]},$$scope:{ctx:r}};for(let I=0;I<c.length;I+=1)d=J(d,c[I]);e=new Ve({props:d});const g=[B("interventions-lines"),{filter:["all",kn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":vt,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[_$]},$$scope:{ctx:r}};for(let I=0;I<g.length;I+=1)y=J(y,g[I]);t=new ce({props:y});const S=[B("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*vt,"circle-opacity":0,"circle-stroke-color":Be.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let O={};for(let I=0;I<S.length;I+=1)O=J(O,S[I]);o=new Ve({props:O});const T=[B("interventions-polygons"),{filter:["all",jt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":K(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let F={$$slots:{default:[h$]},$$scope:{ctx:r}};for(let I=0;I<T.length;I+=1)F=J(F,T[I]);u=new Ue({props:F});const D=[B("interventions-polygons-outlines"),{filter:["all",jt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*vt}},{layout:{visibility:r[0]?"visible":"none"}}];let N={};for(let I=0;I<D.length;I+=1)N=J(N,D[I]);return a=new ce({props:N}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(I,E){b(e,I,E),p(I,n,E),b(t,I,E),p(I,l,E),b(o,I,E),p(I,i,E),b(u,I,E),p(I,s,E),b(a,I,E),f=!0},p(I,E){const M=E&29?Y(c,[c[0],E&24&&{filter:["all",wn,I[3],I[4]]},c[2],c[3],E&4&&{paint:{"circle-color":I[2],"circle-radius":zt,"circle-opacity":K(1,.5)}},E&1&&{layout:{visibility:I[0]?"visible":"none"}},c[6]]):{};E&128&&(M.$$scope={dirty:E,ctx:I}),e.$set(M);const L=E&13?Y(g,[g[0],E&8&&{filter:["all",kn,I[3]]},g[2],g[3],E&4&&{paint:{"line-color":I[2],"line-width":vt,"line-opacity":K(1,.5)}},E&1&&{layout:{visibility:I[0]?"visible":"none"}},g[6]]):{};E&128&&(L.$$scope={dirty:E,ctx:I}),t.$set(L);const P=E&1?Y(S,[S[0],S[1],S[2],{layout:{visibility:I[0]?"visible":"none"}}]):{};o.$set(P);const R=E&13?Y(T,[T[0],E&8&&{filter:["all",jt,I[3]]},T[2],T[3],E&4&&{paint:{"fill-color":I[2],"fill-opacity":K(.2,.5)}},E&1&&{layout:{visibility:I[0]?"visible":"none"}},T[6]]):{};E&128&&(R.$$scope={dirty:E,ctx:I}),u.$set(R);const U=E&13?Y(D,[D[0],E&8&&{filter:["all",jt,I[3]]},E&4&&{paint:{"line-color":I[2],"line-opacity":.5,"line-width":.7*vt}},E&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};a.$set(U)},i(I){f||($(e.$$.fragment,I),$(t.$$.fragment,I),$(o.$$.fragment,I),$(u.$$.fragment,I),$(a.$$.fragment,I),f=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(o.$$.fragment,I),_(u.$$.fragment,I),_(a.$$.fragment,I),f=!1},d(I){I&&(m(n),m(l),m(i),m(s)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I)}}}function v$(r){let e,n;return e=new Ft({props:{data:r[1],$$slots:{default:[b$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function w$(r,e,n){let t,l;fe(r,_t,a=>n(5,l=a));let{showSchemes:o}=e,i=Wr();const u=["!=",["get","hide_while_editing"],!0],s=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=el(l))},[o,t,i,u,s,l]}class k$ extends q{constructor(e){super(),W(this,e,w$,v$,z,{showSchemes:0})}}function gr(r,e,n){const t=r.slice();return t[10]=e[n],t}function y$(r){let e,n;return e=new e$({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dr(r){let e,n,t,l;function o(s){r[7](s)}function i(s){r[8](s)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new Ys({props:u}),Z.push(()=>Q(e,"schemesToBeShown",o)),Z.push(()=>Q(e,"show",i)),{c(){h(e.$$.fragment)},m(s,a){b(e,s,a),l=!0},p(s,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=s[1],x(()=>n=!1)),!t&&a&4&&(t=!0,f.show=s[2],x(()=>t=!1)),e.$set(f)},i(s){l||($(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){v(e,s)}}}function hr(r){let e,n;return e=new i$({props:{scheme:r[10]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.scheme=t[10]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function br(r){let e=r[1].has(r[10].scheme_reference),n,t,l=e&&hr(r);return{c(){l&&l.c(),n=ke()},m(o,i){l&&l.m(o,i),p(o,n,i),t=!0},p(o,i){i&34&&(e=o[1].has(o[10].scheme_reference)),e?l?(l.p(o,i),i&34&&$(l,1)):(l=hr(o),l.c(),$(l,1),l.m(n.parentNode,n)):l&&(ie(),_(l,1,1,()=>{l=null}),ae())},i(o){t||($(l),t=!0)},o(o){_(l),t=!1},d(o){o&&m(n),l&&l.d(o)}}}function S$(r){let e,n,t,l,o,i,u,s,a,f,c=fn()=="Private (development)",d,g,y,S,O,T,F,D;o=new ul({props:{boundaryGeojson:r[3]}}),u=new Dl({}),a=new tl({});let N=c&&y$(r);g=new al({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[6]}}),S=new Cr({props:{errorMessage:r[0]}});let I=r[5].size>0&&dr(r),E=Ee(r[5].values()),M=[];for(let P=0;P<E.length;P+=1)M[P]=br(gr(r,E,P));const L=P=>_(M[P],1,1,()=>{M[P]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),N&&N.c(),d=C(),h(g.$$.fragment),y=C(),h(S.$$.fragment),O=C(),I&&I.c(),T=C(),F=A("ul");for(let P=0;P<M.length;P+=1)M[P].c();be(n,"display","flex"),be(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(P,R){p(P,e,R),k(e,n),k(n,t),k(n,l),b(o,n,null),k(e,i),b(u,e,null),k(e,s),b(a,e,null),k(e,f),N&&N.m(e,null),k(e,d),b(g,e,null),k(e,y),b(S,e,null),k(e,O),I&&I.m(e,null),k(e,T),k(e,F);for(let U=0;U<M.length;U+=1)M[U]&&M[U].m(F,null);D=!0},p(P,R){const U={};R&8&&(U.boundaryGeojson=P[3]),o.$set(U),c&&N.p(P,R);const j={};if(R&1&&(j.errorMessage=P[0]),S.$set(j),P[5].size>0?I?(I.p(P,R),R&32&&$(I,1)):(I=dr(P),I.c(),$(I,1),I.m(e,T)):I&&(ie(),_(I,1,1,()=>{I=null}),ae()),R&34){E=Ee(P[5].values());let X;for(X=0;X<E.length;X+=1){const pe=gr(P,E,X);M[X]?(M[X].p(pe,R),$(M[X],1)):(M[X]=br(pe),M[X].c(),$(M[X],1),M[X].m(F,null))}for(ie(),X=E.length;X<M.length;X+=1)L(X);ae()}},i(P){if(!D){$(o.$$.fragment,P),$(u.$$.fragment,P),$(a.$$.fragment,P),$(N),$(g.$$.fragment,P),$(S.$$.fragment,P),$(I);for(let R=0;R<E.length;R+=1)$(M[R]);D=!0}},o(P){_(o.$$.fragment,P),_(u.$$.fragment,P),_(a.$$.fragment,P),_(N),_(g.$$.fragment,P),_(S.$$.fragment,P),_(I),M=M.filter(Boolean);for(let R=0;R<M.length;R+=1)_(M[R]);D=!1},d(P){P&&m(e),v(o),v(u),v(a),N&&N.d(),v(g),v(S),I&&I.d(),St(M,P)}}}function T$(r){let e,n,t,l,o,i,u;return e=new il({}),t=new k$({props:{showSchemes:r[2]}}),i=new Qc({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),o=A("div"),h(i.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),p(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&4&&(f.showSchemes=s[2]),t.$set(f)},i(s){u||($(e.$$.fragment,s),$(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),v(i)}}}function O$(r){let e,n,t;return n=new nl({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[T$]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),G(e,"slot","main")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.style=l[4]),o&8196&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function C$(r){let e,n;return e=new $l({props:{$$slots:{main:[O$],sidebar:[S$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&8255&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function A$(r,e,n){let t,l,o;fe(r,_t,g=>n(3,t=g)),fe(r,yn,g=>n(4,l=g)),fe(r,qt,g=>n(5,o=g)),$n(()=>{rl()});const i=new URLSearchParams(window.location.search);yn.set(i.get("style")||"dataviz");let u="",s=new Set,a=!0;function f(g){try{_t.set(JSON.parse(g)),qt.set(Rs(t)),n(0,u="")}catch(y){n(0,u=`The file you loaded is broken: ${y}`)}}function c(g){s=g,n(1,s)}function d(g){a=g,n(2,a)}return[u,s,a,t,l,o,f,c,d]}class L$ extends q{constructor(e){super(),W(this,e,A$,C$,z,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new L$({target:document.getElementById("app")});
