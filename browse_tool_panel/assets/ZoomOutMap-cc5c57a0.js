import{S as Y,i as X,s as x,O as ge,e as T,j as c,k as B,T as he,U as be,V as ye,t as L,o as M,p as R,l as v,f as J,ao as ue,x as D,N as Ee,bd as un,K as Et,Y as le,v as ke,J as Se,F as fn,h as q,m as K,q as Q,E as cn,ab as Fe,Z as Pe,be as dn,bf as ct,aX as mn,bg as _n,w as je,am as gn,aj as Ge,_ as Me,$ as ze,r as ve,b0 as dt,bh as hn,b as He,c as lt,n as it,ag as $,a7 as H,bi as we,bj as Te,b2 as mt,bk as bn,a9 as ot,a2 as st,bl as yn,ac as kn,ad as vn,u as wn,bm as pn,b4 as Pt,a as Zt,ax as _t,ay as De,bn as Ln,bo as Tn,b3 as Ut,a0 as jt,a8 as Mn,bp as gt,bq as nt,br as zn,bs as Cn,a4 as ht,b1 as Sn,aY as bt,af as In,bt as Bn,R as Rn,al as En}from"./index-4ca1fce7.js";function Pn(l){let e,t;const n=l[1].default,i=ge(n,l,l[0],null);return{c(){e=T("div"),i&&i.c(),c(e,"class","govuk-button-group")},m(o,s){B(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&1)&&he(i,n,o,o[0],t?ye(n,o[0],s,null):be(o[0]),null)},i(o){t||(L(i,o),t=!0)},o(o){M(i,o),t=!1},d(o){o&&R(e),i&&i.d(o)}}}function Zn(l,e,t){let{$$slots:n={},$$scope:i}=e;return l.$$set=o=>{"$$scope"in o&&t(0,i=o.$$scope)},[i,n]}class gi extends Y{constructor(e){super(),X(this,e,Zn,Pn,x,{})}}function Un(l){let e,t,n;const i=l[3].default,o=ge(i,l,l[2],null);return{c(){e=T("fieldset"),t=T("div"),o&&o.c(),c(t,"class",l[0]),c(t,"data-module","govuk-checkboxes"),c(e,"class","govuk-fieldset")},m(s,r){B(s,e,r),v(e,t),o&&o.m(t,null),n=!0},p(s,[r]){o&&o.p&&(!n||r&4)&&he(o,i,s,s[2],n?ye(i,s[2],r,null):be(s[2]),null)},i(s){n||(L(o,s),n=!0)},o(s){M(o,s),n=!1},d(s){s&&R(e),o&&o.d(s)}}}function jn(l,e,t){let{$$slots:n={},$$scope:i}=e,{small:o=!1}=e,s=o?"govuk-checkboxes--small":"govuk-checkboxes";return l.$$set=r=>{"small"in r&&t(1,o=r.small),"$$scope"in r&&t(2,i=r.$$scope)},[s,o,i,n]}class hi extends Y{constructor(e){super(),X(this,e,jn,Un,x,{small:1})}}const Wn=l=>({}),yt=l=>({});function Vn(l){let e,t,n,i,o,s,r,u,a;const f=l[5].default,d=ge(f,l,l[4],null),_=l[5].right,b=ge(_,l,l[4],yt);return{c(){e=T("div"),t=T("input"),n=J(),i=T("label"),d&&d.c(),o=J(),s=T("span"),b&&b.c(),c(t,"type","checkbox"),c(t,"class","govuk-checkboxes__input"),c(t,"id",l[3]),c(i,"class","govuk-label govuk-checkboxes__label"),c(i,"for",l[3]),c(i,"title",l[1]),ue(s,"float","right"),c(e,"class","govuk-checkboxes__item"),c(e,"style",l[2])},m(h,k){B(h,e,k),v(e,t),t.checked=l[0],v(e,n),v(e,i),d&&d.m(i,null),v(e,o),v(e,s),b&&b.m(s,null),r=!0,u||(a=[D(t,"change",l[7]),D(t,"change",l[6])],u=!0)},p(h,[k]){k&1&&(t.checked=h[0]),d&&d.p&&(!r||k&16)&&he(d,f,h,h[4],r?ye(f,h[4],k,null):be(h[4]),null),(!r||k&2)&&c(i,"title",h[1]),b&&b.p&&(!r||k&16)&&he(b,_,h,h[4],r?ye(_,h[4],k,Wn):be(h[4]),yt)},i(h){r||(L(d,h),L(b,h),r=!0)},o(h){M(d,h),M(b,h),r=!1},d(h){h&&R(e),d&&d.d(h),b&&b.d(h),u=!1,Ee(a)}}}function On(l,e,t){let{$$slots:n={},$$scope:i}=e;const o=un(n);let{checked:s}=e,{hint:r=null}=e,a=o.right!==void 0?"float: none":"",f=Et();function d(b){le.call(this,l,b)}function _(){s=this.checked,t(0,s)}return l.$$set=b=>{"checked"in b&&t(0,s=b.checked),"hint"in b&&t(1,r=b.hint),"$$scope"in b&&t(4,i=b.$$scope)},[s,r,a,f,i,n,d,_]}class bi extends Y{constructor(e){super(),X(this,e,On,Vn,x,{checked:0,hint:1})}}function An(l){let e,t,n,i,o,s,r;const u=l[3].default,a=ge(u,l,l[2],null);return{c(){e=T("details"),t=T("summary"),n=T("span"),i=ke(l[0]),o=J(),s=T("div"),a&&a.c(),c(n,"class","govuk-details__summary-text"),c(t,"class","govuk-details__summary"),c(s,"class","govuk-details__text"),e.open=l[1],c(e,"class","govuk-details"),c(e,"data-module","govuk-details")},m(f,d){B(f,e,d),v(e,t),v(t,n),v(n,i),v(e,o),v(e,s),a&&a.m(s,null),r=!0},p(f,[d]){(!r||d&1)&&Se(i,f[0]),a&&a.p&&(!r||d&4)&&he(a,u,f,f[2],r?ye(u,f[2],d,null):be(f[2]),null),(!r||d&2)&&(e.open=f[1])},i(f){r||(L(a,f),r=!0)},o(f){M(a,f),r=!1},d(f){f&&R(e),a&&a.d(f)}}}function Dn(l,e,t){let{$$slots:n={},$$scope:i}=e,{label:o}=e,{open:s=!1}=e;return l.$$set=r=>{"label"in r&&t(0,o=r.label),"open"in r&&t(1,s=r.open),"$$scope"in r&&t(2,i=r.$$scope)},[o,s,i,n]}class Fn extends Y{constructor(e){super(),X(this,e,Dn,An,x,{label:0,open:1})}}function kt(l,e,t){const n=l.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function vt(l){let e;return{c(){e=T("option"),e.__value="",je(e,e.__value)},m(t,n){B(t,e,n)},d(t){t&&R(e)}}}function wt(l){let e,t=l[10]+"",n,i;return{c(){e=T("option"),n=ke(t),e.__value=i=l[9],je(e,e.__value)},m(o,s){B(o,e,s),v(e,n)},p(o,s){s&4&&t!==(t=o[10]+"")&&Se(n,t),s&4&&i!==(i=o[9])&&(e.__value=i,je(e,e.__value))},d(o){o&&R(e)}}}function Gn(l){let e,t,n,i,o,s,r;e=new cn({props:{errorMessage:l[5]}});let u=l[3]&&vt(),a=Fe(l[2]),f=[];for(let d=0;d<a.length;d+=1)f[d]=wt(kt(l,a,d));return{c(){q(e.$$.fragment),t=J(),n=T("select"),u&&u.c(),i=Pe();for(let d=0;d<f.length;d+=1)f[d].c();c(n,"class","govuk-select"),c(n,"id",l[6]),n.disabled=l[4],l[0]===void 0&&dn(()=>l[8].call(n))},m(d,_){K(e,d,_),B(d,t,_),B(d,n,_),u&&u.m(n,null),v(n,i);for(let b=0;b<f.length;b+=1)f[b]&&f[b].m(n,null);ct(n,l[0],!0),o=!0,s||(r=[D(n,"change",l[8]),D(n,"change",l[7])],s=!0)},p(d,_){const b={};if(_&32&&(b.errorMessage=d[5]),e.$set(b),d[3]?u||(u=vt(),u.c(),u.m(n,i)):u&&(u.d(1),u=null),_&4){a=Fe(d[2]);let h;for(h=0;h<a.length;h+=1){const k=kt(d,a,h);f[h]?f[h].p(k,_):(f[h]=wt(k),f[h].c(),f[h].m(n,null))}for(;h<f.length;h+=1)f[h].d(1);f.length=a.length}(!o||_&16)&&(n.disabled=d[4]),_&5&&ct(n,d[0])},i(d){o||(L(e.$$.fragment,d),o=!0)},o(d){M(e.$$.fragment,d),o=!1},d(d){d&&(R(t),R(n)),Q(e,d),u&&u.d(),mn(f,d),s=!1,Ee(r)}}}function Hn(l){let e,t;return e=new fn({props:{label:l[1],id:l[6],$$slots:{default:[Gn]},$$scope:{ctx:l}}}),{c(){q(e.$$.fragment)},m(n,i){K(e,n,i),t=!0},p(n,[i]){const o={};i&2&&(o.label=n[1]),i&8253&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Nn(l,e,t){let{label:n}=e,{choices:i}=e,{emptyOption:o=!1}=e,{disabled:s=!1}=e,{errorMessage:r=""}=e,{value:u}=e,a=Et();function f(_){le.call(this,l,_)}function d(){u=_n(this),t(0,u),t(2,i)}return l.$$set=_=>{"label"in _&&t(1,n=_.label),"choices"in _&&t(2,i=_.choices),"emptyOption"in _&&t(3,o=_.emptyOption),"disabled"in _&&t(4,s=_.disabled),"errorMessage"in _&&t(5,r=_.errorMessage),"value"in _&&t(0,u=_.value)},[u,n,i,o,s,r,a,f,d]}class qn extends Y{constructor(e){super(),X(this,e,Nn,Hn,x,{label:1,choices:2,emptyOption:3,disabled:4,errorMessage:5,value:0})}}function yi(l){return{id:l,beforeId:Kn(l)}}function Kn(l){let e=gn(Ge);if(!e){console.warn(`getBeforeId(${l}) called before map is ready. Z-ordering may be incorrect.`);return}let t,n=!1;for(let i=pt.length-1;i>=0;i--){let o=pt[i];if(o==l){n=!0;break}e.getLayer(o)&&(t=o)}if(!n)throw new Error(`Layer ID ${l} not defined in layerZorder`);return t}let C=l=>l,ne=l=>l,Qn=l=>l,Jn=l=>l,Yn=l=>l,Xn=l=>l,xn=l=>l;const pt=[xn("raster-basemap"),C("parliamentary_constituencies"),C("parliamentary_constituencies-outline"),C("wards"),C("wards-outline"),C("combined_authorities"),C("combined_authorities-outline"),C("local_authority_districts"),C("local_authority_districts-outline"),C("local_planning_authorities"),C("local_planning_authorities-outline"),C("census_output_areas"),C("census_output_areas-outline"),C("imd"),C("imd-outline"),C("pollution"),C("road_noise"),C("mrn"),C("srn"),C("bus_routes"),C("trams"),C("national_cycle_network"),C("cycle_paths"),C("pct_commute"),C("pct_school"),C("road_widths"),C("road_speeds"),C("pavement_widths"),C("gradient"),C("gradient_arrows"),C("education"),C("hospitals"),C("sports_spaces"),C("railway_stations"),C("cycle_parking"),C("crossings"),C("vehicle_counts"),C("stats19"),C("bus_stops"),ne("interventions-coverage-polygons-outlines"),ne(C("interventions-polygons")),ne(C("interventions-polygons-outlines")),ne("hover-polygons"),ne("hover-lines"),ne(C("interventions-lines")),ne(C("interventions-lines-endpoints")),ne("hover-points"),ne(C("interventions-points")),C("criticals-clusters"),C("criticals-counts"),C("criticals-points"),ne("edit-polygon-fill"),ne("edit-polygon-lines"),ne("edit-polygon-vertices"),ne("draw-split-route"),ne("route-points"),ne("route-lines"),ne("route-polygons"),Qn("road_label"),Xn(Jn(Yn("Road labels"))),ne("boundary"),C("measurement-line"),ne("georeferenced-image"),C("cover-interactive-layers")],Wt="/atip/browse_tool_panel/assets/basemap-fa4beab2.svg";function $n(l){let e,t;return e=new Ne({props:{$$slots:{default:[tl]},$$scope:{ctx:l}}}),e.$on("click",l[5]),{c(){q(e.$$.fragment)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i&64&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function el(l){let e,t,n,i,o,s;t=new Ne({props:{activated:!0,$$slots:{default:[nl]},$$scope:{ctx:l}}}),t.$on("click",l[3]);function r(a){l[4](a)}let u={label:"Basemap",choices:hn(),disabled:l[0]};return l[2]!==void 0&&(u.value=l[2]),i=new qn({props:u}),He.push(()=>lt(i,"value",r)),{c(){e=T("div"),q(t.$$.fragment),n=J(),q(i.$$.fragment),ue(e,"display","flex"),ue(e,"flex-flow","column")},m(a,f){B(a,e,f),K(t,e,null),v(e,n),K(i,e,null),s=!0},p(a,f){const d={};f&64&&(d.$$scope={dirty:f,ctx:a}),t.$set(d);const _={};f&1&&(_.disabled=a[0]),!o&&f&4&&(o=!0,_.value=a[2],it(()=>o=!1)),i.$set(_)},i(a){s||(L(t.$$.fragment,a),L(i.$$.fragment,a),s=!0)},o(a){M(t.$$.fragment,a),M(i.$$.fragment,a),s=!1},d(a){a&&R(e),Q(t),Q(i)}}}function tl(l){let e,t;return{c(){e=T("img"),$(e.src,t=Wt)||c(e,"src",t),c(e,"alt","Basemap")},m(n,i){B(n,e,i)},p:H,d(n){n&&R(e)}}}function nl(l){let e,t;return{c(){e=T("img"),$(e.src,t=Wt)||c(e,"src",t),c(e,"alt","Basemap")},m(n,i){B(n,e,i)},p:H,d(n){n&&R(e)}}}function ll(l){let e,t,n,i;const o=[el,$n],s=[];function r(u,a){return u[1]?0:1}return e=r(l),t=s[e]=o[e](l),{c(){t.c(),n=Pe()},m(u,a){s[e].m(u,a),B(u,n,a),i=!0},p(u,[a]){let f=e;e=r(u),e===f?s[e].p(u,a):(Me(),M(s[f],1,1,()=>{s[f]=null}),ze(),t=s[e],t?t.p(u,a):(t=s[e]=o[e](u),t.c()),L(t,1),t.m(n.parentNode,n))},i(u){i||(L(t),i=!0)},o(u){M(t),i=!1},d(u){u&&R(n),s[e].d(u)}}}function il(l,e,t){let n;ve(l,dt,a=>t(2,n=a));let{disabled:i=!1}=e,o=!1;const s=()=>t(1,o=!1);function r(a){n=a,dt.set(n)}const u=()=>t(1,o=!0);return l.$$set=a=>{"disabled"in a&&t(0,i=a.disabled)},[i,o,n,s,r,u]}class ki extends Y{constructor(e){super(),X(this,e,il,ll,x,{disabled:0})}}function ol(l){let e,t;return{c(){e=we("svg"),t=we("path"),c(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),c(e,"viewBox","0 0 14 14"),c(e,"width","13"),c(e,"height","13"),c(e,"class","svelte-en2qvf")},m(n,i){B(n,e,i),v(e,t)},p:H,i:H,o:H,d(n){n&&R(e)}}}class Vt extends Y{constructor(e){super(),X(this,e,null,ol,x,{})}}function sl(l){let e,t;return{c(){e=we("svg"),t=we("path"),c(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),c(e,"viewBox","0 0 30 30"),c(e,"fill","none"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"class","svelte-d2loi5")},m(n,i){B(n,e,i),v(e,t)},p:H,i:H,o:H,d(n){n&&R(e)}}}class Ot extends Y{constructor(e){super(),X(this,e,null,sl,x,{})}}function rl(l){let e,t;return{c(){e=T("img"),$(e.src,t=l[3]+"area.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){B(n,e,i)},p(n,i){i&8&&!$(e.src,t=n[3]+"area.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&R(e)}}}function al(l){let e,t;return{c(){e=T("img"),$(e.src,t=l[3]+"reverse.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){B(n,e,i)},p(n,i){i&8&&!$(e.src,t=n[3]+"reverse.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&R(e)}}}function ul(l){let e,t;return{c(){e=T("img"),$(e.src,t=l[3]+"poi.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){B(n,e,i)},p(n,i){i&8&&!$(e.src,t=n[3]+"poi.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&R(e)}}}function fl(l){let e,t;return{c(){e=T("img"),$(e.src,t=l[3]+"postal_code.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){B(n,e,i)},p(n,i){i&8&&!$(e.src,t=n[3]+"postal_code.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&R(e)}}}function cl(l){let e,t;return{c(){e=T("img"),$(e.src,t=l[3]+"street.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){B(n,e,i)},p(n,i){i&8&&!$(e.src,t=n[3]+"street.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&R(e)}}}function dl(l){let e,t;return{c(){e=T("img"),$(e.src,t=l[3]+"road.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){B(n,e,i)},p(n,i){i&8&&!$(e.src,t=n[3]+"road.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&R(e)}}}function ml(l){let e,t;return{c(){e=T("img"),$(e.src,t=l[3]+"housenumber.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){B(n,e,i)},p(n,i){i&8&&!$(e.src,t=n[3]+"housenumber.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&R(e)}}}function _l(l){let e,t,n,i;return{c(){e=T("img"),$(e.src,t=l[5])||c(e,"src",t),c(e,"alt",l[4]),c(e,"class","svelte-ltkwvy")},m(o,s){B(o,e,s),n||(i=D(e,"error",l[14]),n=!0)},p(o,s){s&32&&!$(e.src,t=o[5])&&c(e,"src",t),s&16&&c(e,"alt",o[4])},d(o){o&&R(e),n=!1,i()}}}function Lt(l){let e,t;return{c(){e=T("span"),t=ke(l[6]),c(e,"class","secondary svelte-ltkwvy")},m(n,i){B(n,e,i),v(e,t)},p(n,i){i&64&&Se(t,n[6])},d(n){n&&R(e)}}}function gl(l){var O,A;let e,t,n,i,o,s,r,u,a=(l[7]?l[0].place_name:l[0].place_name.replace(/,.*/,""))+"",f,d,_=l[2]==="always"||l[2]&&!l[0].address&&((O=l[0].properties)==null?void 0:O.kind)!=="road"&&((A=l[0].properties)==null?void 0:A.kind)!=="road_relation"&&!l[0].id.startsWith("address.")&&!l[0].id.startsWith("postal_code.")&&(!l[0].id.startsWith("poi.")||!l[5])&&!l[7],b,h,k=(l[7]?"":l[0].place_name.replace(/[^,]*,?\s*/,""))+"",Z,P,F;function y(S,z){var oe,g;return z&1&&(t=null),z&1&&(n=null),z&1&&(i=null),S[5]?_l:S[0].address?ml:((oe=S[0].properties)==null?void 0:oe.kind)==="road"||((g=S[0].properties)==null?void 0:g.kind)==="road_relation"?dl:(t==null&&(t=!!S[0].id.startsWith("address.")),t?cl:(n==null&&(n=!!S[0].id.startsWith("postal_code.")),n?fl:(i==null&&(i=!!S[0].id.startsWith("poi.")),i?ul:S[7]?al:rl)))}let E=y(l,-1),w=E(l),V=_&&Lt(l);return{c(){e=T("li"),w.c(),o=J(),s=T("span"),r=T("span"),u=T("span"),f=ke(a),d=J(),V&&V.c(),b=J(),h=T("span"),Z=ke(k),c(u,"class","primary svelte-ltkwvy"),c(r,"class","svelte-ltkwvy"),c(h,"class","line2 svelte-ltkwvy"),c(s,"class","texts svelte-ltkwvy"),c(e,"tabindex","0"),c(e,"data-selected",l[1]),c(e,"class","svelte-ltkwvy"),Te(e,"selected",l[1])},m(S,z){B(S,e,z),w.m(e,null),v(e,o),v(e,s),v(s,r),v(r,u),v(u,f),v(r,d),V&&V.m(r,null),v(s,b),v(s,h),v(h,Z),P||(F=[D(e,"mouseenter",l[12]),D(e,"focus",l[13])],P=!0)},p(S,[z]){var oe,g;E===(E=y(S,z))&&w?w.p(S,z):(w.d(1),w=E(S),w&&(w.c(),w.m(e,o))),z&1&&a!==(a=(S[7]?S[0].place_name:S[0].place_name.replace(/,.*/,""))+"")&&Se(f,a),z&37&&(_=S[2]==="always"||S[2]&&!S[0].address&&((oe=S[0].properties)==null?void 0:oe.kind)!=="road"&&((g=S[0].properties)==null?void 0:g.kind)!=="road_relation"&&!S[0].id.startsWith("address.")&&!S[0].id.startsWith("postal_code.")&&(!S[0].id.startsWith("poi.")||!S[5])&&!S[7]),_?V?V.p(S,z):(V=Lt(S),V.c(),V.m(r,null)):V&&(V.d(1),V=null),z&1&&k!==(k=(S[7]?"":S[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&Se(Z,k),z&2&&c(e,"data-selected",S[1]),z&2&&Te(e,"selected",S[1])},i:H,o:H,d(S){S&&R(e),w.d(),V&&V.d(),P=!1,Ee(F)}}}function hl(l,e,t){var y;let n,i,{feature:o}=e,{selected:s=!1}=e,{showPlaceType:r}=e,{missingIconsCache:u}=e,{iconsBaseUrl:a}=e;const f=(y=o.properties)==null?void 0:y.categories;let d,_,b=0,h=o.place_type[0]==="reverse";function k(E){_&&u.add(_),t(10,b++,b)}function Z(E){le.call(this,l,E)}function P(E){le.call(this,l,E)}const F=E=>k(E.currentTarget);return l.$$set=E=>{"feature"in E&&t(0,o=E.feature),"selected"in E&&t(1,s=E.selected),"showPlaceType"in E&&t(2,r=E.showPlaceType),"missingIconsCache"in E&&t(9,u=E.missingIconsCache),"iconsBaseUrl"in E&&t(3,a=E.iconsBaseUrl)},l.$$.update=()=>{var E,w,V,O;if(l.$$.dirty&3640)do t(11,n--,n),t(4,d=f==null?void 0:f[n]),t(5,_=d?a+d.replace(/ /g,"_")+".svg":void 0);while(n>-1&&(!_||u.has(_)));l.$$.dirty&1&&t(6,i=o.id.startsWith("poi.")?(w=(E=o.properties)==null?void 0:E.categories)==null?void 0:w.join(", "):((O=(V=o.properties)==null?void 0:V.place_type_name)==null?void 0:O[0])??o.place_type[0])},t(11,n=(f==null?void 0:f.length)??0),[o,s,r,a,d,_,i,h,k,u,b,n,Z,P,F]}class bl extends Y{constructor(e){super(),X(this,e,hl,gl,x,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function yl(l){let e;return{c(){e=T("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',c(e,"class","svelte-7cmwmc")},m(t,n){B(t,e,n)},p:H,i:H,o:H,d(t){t&&R(e)}}}class kl extends Y{constructor(e){super(),X(this,e,null,yl,x,{})}}function vl(l){let e,t;return{c(){e=we("svg"),t=we("path"),c(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),c(e,"viewBox","0 0 60.006 21.412"),c(e,"width","14"),c(e,"height","20"),c(e,"class","svelte-en2qvf")},m(n,i){B(n,e,i),v(e,t)},p:H,i:H,o:H,d(n){n&&R(e)}}}class wl extends Y{constructor(e){super(),X(this,e,null,vl,x,{})}}function pl(l){let e,t,n;return{c(){e=we("svg"),t=we("circle"),n=we("path"),c(t,"cx","4.789"),c(t,"cy","4.787"),c(t,"r","3.85"),ue(t,"stroke-width","1.875"),ue(t,"fill","none"),c(n,"d","M12.063 12.063 7.635 7.635"),ue(n,"stroke-width","1.875"),ue(n,"stroke-linecap","round"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","13"),c(e,"height","13"),c(e,"viewBox","0 0 13 13"),c(e,"class","svelte-1bpbt60")},m(i,o){B(i,e,o),v(e,t),v(e,n)},p:H,i:H,o:H,d(i){i&&R(e)}}}class Ll extends Y{constructor(e){super(),X(this,e,null,pl,x,{})}}function Tl(l,e,t){const n=e[1],i=e[0],o=n-i;return l===n&&t?l:((l-i)%o+o)%o+i}function Tt(l){const e=[...l];return e[2]<e[0]&&(e[2]+=360),e}let Ue;async function Ml(l,e,t){const n=l==null?void 0:l.getCenterAndZoom();for(const i of e??[])if(!(n&&(i.minZoom!=null&&i.minZoom>n[0]||i.maxZoom!=null&&i.maxZoom<n[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(Ue&&i.cachedLocationExpiry&&Ue.time+i.cachedLocationExpiry>Date.now()){if(!Ue.coords)break e;return Ue.coords}let o;try{return o=await new Promise((s,r)=>{t.signal.addEventListener("abort",()=>{r(Error("aborted"))}),navigator.geolocation.getCurrentPosition(u=>{s([u.coords.longitude,u.coords.latitude].map(a=>a.toFixed(6)).join(","))},u=>{r(u)},i)}),o}catch{}finally{i.cachedLocationExpiry&&(Ue={time:Date.now(),coords:o})}if(t.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(n&&i.type==="map-center")return n[1].toFixed(6)+","+n[2].toFixed(6)}}function Mt(l,e,t){const n=l.slice();return n[81]=e[t],n[83]=t,n}function zt(l){let e,t;return e=new kl({}),{c(){q(e.$$.fragment)},m(n,i){K(e,n,i),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Ct(l){let e,t,n,i,o;return t=new wl({}),{c(){e=T("button"),q(t.$$.fragment),c(e,"type","button"),c(e,"title",l[9]),c(e,"class","svelte-zh3kmv"),Te(e,"active",l[0])},m(s,r){B(s,e,r),K(t,e,null),n=!0,i||(o=D(e,"click",l[67]),i=!0)},p(s,r){(!n||r[0]&512)&&c(e,"title",s[9]),(!n||r[0]&1)&&Te(e,"active",s[0])},i(s){n||(L(t.$$.fragment,s),n=!0)},o(s){M(t.$$.fragment,s),n=!1},d(s){s&&R(e),Q(t),i=!1,o()}}}function zl(l){let e,t=[],n=new Map,i,o,s,r=Fe(l[14]);const u=a=>a[81].id+(a[81].address?","+a[81].address:"");for(let a=0;a<r.length;a+=1){let f=Mt(l,r,a),d=u(f);n.set(d,t[a]=St(d,f))}return{c(){e=T("ul");for(let a=0;a<t.length;a+=1)t[a].c();c(e,"class","svelte-zh3kmv")},m(a,f){B(a,e,f);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);i=!0,o||(s=[D(e,"mouseleave",l[71]),D(e,"blur",l[72])],o=!0)},p(a,f){f[0]&17880064&&(r=Fe(a[14]),Me(),t=kn(t,f,u,1,a,r,n,e,vn,St,null,Mt),ze())},i(a){if(!i){for(let f=0;f<r.length;f+=1)L(t[f]);i=!0}},o(a){for(let f=0;f<t.length;f+=1)M(t[f]);i=!1},d(a){a&&R(e);for(let f=0;f<t.length;f+=1)t[f].d();o=!1,Ee(s)}}}function Cl(l){let e,t,n,i,o,s;return t=new Ot({}),{c(){e=T("div"),q(t.$$.fragment),n=J(),i=T("div"),o=ke(l[7]),c(i,"class","svelte-zh3kmv"),c(e,"class","no-results svelte-zh3kmv")},m(r,u){B(r,e,u),K(t,e,null),v(e,n),v(e,i),v(i,o),s=!0},p(r,u){(!s||u[0]&128)&&Se(o,r[7])},i(r){s||(L(t.$$.fragment,r),s=!0)},o(r){M(t.$$.fragment,r),s=!1},d(r){r&&R(e),Q(t)}}}function Sl(l){let e="",t;return{c(){t=ke(e)},m(n,i){B(n,t,i)},p:H,i:H,o:H,d(n){n&&R(t)}}}function Il(l){let e,t,n,i,o,s,r,u,a,f,d;return t=new Ot({}),u=new Vt({}),{c(){e=T("div"),q(t.$$.fragment),n=J(),i=T("div"),o=ke(l[6]),s=J(),r=T("button"),q(u.$$.fragment),c(i,"class","svelte-zh3kmv"),c(r,"class","svelte-zh3kmv"),c(e,"class","error svelte-zh3kmv")},m(_,b){B(_,e,b),K(t,e,null),v(e,n),v(e,i),v(i,o),v(e,s),v(e,r),K(u,r,null),a=!0,f||(d=D(r,"click",l[68]),f=!0)},p(_,b){(!a||b[0]&64)&&Se(o,_[6])},i(_){a||(L(t.$$.fragment,_),L(u.$$.fragment,_),a=!0)},o(_){M(t.$$.fragment,_),M(u.$$.fragment,_),a=!1},d(_){_&&R(e),Q(t),Q(u),f=!1,d()}}}function St(l,e){let t,n,i;function o(){return e[69](e[83])}function s(){return e[70](e[81])}return n=new bl({props:{feature:e[81],showPlaceType:e[10],selected:e[15]===e[83],missingIconsCache:e[20],iconsBaseUrl:e[12]}}),n.$on("mouseenter",o),n.$on("focus",s),{key:l,first:null,c(){t=Pe(),q(n.$$.fragment),this.first=t},m(r,u){B(r,t,u),K(n,r,u),i=!0},p(r,u){e=r;const a={};u[0]&16384&&(a.feature=e[81]),u[0]&1024&&(a.showPlaceType=e[10]),u[0]&49152&&(a.selected=e[15]===e[83]),u[0]&4096&&(a.iconsBaseUrl=e[12]),n.$set(a)},i(r){i||(L(n.$$.fragment,r),i=!0)},o(r){M(n.$$.fragment,r),i=!1},d(r){r&&R(t),Q(n,r)}}}function Bl(l){let e,t,n,i,o,s,r,u,a,f,d,_,b,h,k,Z,P,F,y,E,w,V=!1;o=new Ll({}),d=new Vt({});let O=l[19]&&zt(),A=l[5]===!0&&Ct(l);const S=l[59].default,z=ge(S,l,l[58],null),oe=[Il,Sl,Cl,zl],g=[];function pe(I,G){var ie,p;return I[18]?0:I[16]?((ie=I[14])==null?void 0:ie.length)===0?2:I[16]&&((p=I[14])!=null&&p.length)?3:-1:1}return~(Z=pe(l))&&(P=g[Z]=oe[Z](l)),{c(){e=J(),t=T("form"),n=T("div"),i=T("button"),q(o.$$.fragment),s=J(),r=T("input"),u=J(),a=T("div"),f=T("button"),q(d.$$.fragment),_=J(),O&&O.c(),b=J(),A&&A.c(),h=J(),z&&z.c(),k=J(),P&&P.c(),c(i,"class","search-button svelte-zh3kmv"),c(i,"type","button"),c(r,"placeholder",l[8]),c(r,"aria-label",l[8]),c(r,"class","svelte-zh3kmv"),c(f,"type","button"),c(f,"title",l[3]),c(f,"class","svelte-zh3kmv"),c(a,"class","clear-button-container svelte-zh3kmv"),Te(a,"displayable",l[1]!==""),c(n,"class","input-group svelte-zh3kmv"),c(t,"tabindex","0"),c(t,"class",F=mt(l[2])+" svelte-zh3kmv"),Te(t,"can-collapse",l[4]&&l[1]==="")},m(I,G){B(I,e,G),B(I,t,G),v(t,n),v(n,i),K(o,i,null),v(n,s),v(n,r),l[61](r),je(r,l[1]),v(n,u),v(n,a),v(a,f),K(d,f,null),v(a,_),O&&O.m(a,null),v(n,b),A&&A.m(n,null),v(n,h),z&&z.m(n,null),v(t,k),~Z&&g[Z].m(t,null),y=!0,E||(w=[D(i,"click",l[60]),D(r,"input",l[62]),D(r,"focus",l[63]),D(r,"blur",l[64]),D(r,"keydown",l[22]),D(r,"input",l[65]),D(f,"click",l[66]),D(t,"submit",bn(l[21]))],E=!0)},p(I,G){(!y||G[0]&256)&&c(r,"placeholder",I[8]),(!y||G[0]&256)&&c(r,"aria-label",I[8]),G[0]&2&&r.value!==I[1]&&je(r,I[1]),(!y||G[0]&8)&&c(f,"title",I[3]),I[19]?O?G[0]&524288&&L(O,1):(O=zt(),O.c(),L(O,1),O.m(a,null)):O&&(Me(),M(O,1,1,()=>{O=null}),ze()),(!y||G[0]&2)&&Te(a,"displayable",I[1]!==""),I[5]===!0?A?(A.p(I,G),G[0]&32&&L(A,1)):(A=Ct(I),A.c(),L(A,1),A.m(n,h)):A&&(Me(),M(A,1,1,()=>{A=null}),ze()),z&&z.p&&(!y||G[1]&134217728)&&he(z,S,I,I[58],y?ye(S,I[58],G,null):be(I[58]),null);let ie=Z;Z=pe(I),Z===ie?~Z&&g[Z].p(I,G):(P&&(Me(),M(g[ie],1,1,()=>{g[ie]=null}),ze()),~Z?(P=g[Z],P?P.p(I,G):(P=g[Z]=oe[Z](I),P.c()),L(P,1),P.m(t,null)):P=null),(!y||G[0]&4&&F!==(F=mt(I[2])+" svelte-zh3kmv"))&&c(t,"class",F),(!y||G[0]&22)&&Te(t,"can-collapse",I[4]&&I[1]==="")},i(I){y||(L(V),L(o.$$.fragment,I),L(d.$$.fragment,I),L(O),L(A),L(z,I),L(P),y=!0)},o(I){M(V),M(o.$$.fragment,I),M(d.$$.fragment,I),M(O),M(A),M(z,I),M(P),y=!1},d(I){I&&(R(e),R(t)),Q(o),l[61](null),Q(d),O&&O.d(),A&&A.d(),z&&z.d(I),~Z&&g[Z].d(),E=!1,Ee(w)}}}function Rl(l,e,t){let n,{$$slots:i={},$$scope:o}=e,{class:s=void 0}=e,{apiKey:r}=e,{bbox:u=void 0}=e,{clearButtonTitle:a="clear"}=e,{clearOnBlur:f=!1}=e,{collapsed:d=!1}=e,{country:_=void 0}=e,{debounceSearch:b=200}=e,{enableReverse:h=!1}=e,{errorMessage:k="Something went wrong…"}=e,{filter:Z=()=>!0}=e,{flyTo:P=!0}=e,{fuzzyMatch:F=!0}=e,{language:y=void 0}=e,{limit:E=void 0}=e,{mapController:w=void 0}=e,{minLength:V=2}=e,{noResultsMessage:O="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:A="Search"}=e,{proximity:S=[{type:"server-geolocation"}]}=e,{reverseActive:z=h==="always"}=e,{reverseButtonTitle:oe="toggle reverse geocoding"}=e,{searchValue:g=""}=e,{showFullGeometry:pe=!0}=e,{showPlaceType:I="ifNeeded"}=e,{showResultsWhileTyping:G=!0}=e,{selectFirst:ie=!0}=e,{flyToSelected:p=!1}=e,{markerOnSelected:ae=!0}=e,{types:se=void 0}=e,{excludeTypes:fe=!1}=e,{zoom:Ze=16}=e,{maxZoom:Ie=18}=e,{apiUrl:qe="https://api.maptiler.com/geocoding"}=e,{fetchParameters:Ke={}}=e,{iconsBaseUrl:rt="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.2/icons/"}=e,{adjustUrlQuery:Qe=m=>{}}=e;function Dt(){ce.focus()}function Ft(){ce.blur()}function at(m,te=!0){t(1,g=m),te?(t(15,N=-1),ft()):(xe(),setTimeout(()=>{ce.focus(),ce.select()}))}function Gt(){t(14,j=void 0),t(55,U=void 0),t(15,N=-1)}function Ht(){t(54,ee=[]),t(55,U=void 0)}let Be=!1,j,ee,U,ut="",ce,N=-1,de,We=[],Ce,Re,Ve,Je;const Nt=new Set,Le=ot();st(()=>{w&&(w.setEventHandler(void 0),w.indicateReverse(!1),w.setSelectedMarker(-1),w.setMarkers(void 0,void 0))});function ft(m){if(Re&&(clearTimeout(Re),Re=void 0),N>-1&&j)t(55,U=j[N]),t(1,g=U.place_type[0]==="reverse"?U.place_name:U.place_name.replace(/,.*/,"")),t(18,de=void 0),t(54,ee=void 0),t(15,N=-1);else if(g){const te=m||!Ye(g);Xe(g,{exact:!0}).then(()=>{t(54,ee=j),t(55,U=void 0),te&&qt()}).catch(me=>t(18,de=me))}}function Ye(m){try{return yn(m,6)}catch{return!1}}async function Xe(m,{byId:te=!1,exact:me=!1}={}){t(18,de=void 0),Ce==null||Ce.abort();const _e=new AbortController;t(19,Ce=_e);try{const W=Ye(m),re=new URLSearchParams;if(y!==void 0&&re.set("language",Array.isArray(y)?y.join(","):y??""),se&&re.set("types",se.join(",")),fe&&re.set("excludeTypes",String(fe)),u&&re.set("bbox",u.map(Ae=>Ae.toFixed(6)).join(",")),_&&re.set("country",Array.isArray(_)?_.join(","):_),!te&&!W){const Ae=await Ml(w,S,_e);Ae&&re.set("proximity",Ae),(me||!G)&&re.set("autocomplete","false"),re.set("fuzzyMatch",String(F))}E!==void 0&&(!W||(se==null?void 0:se.length)===1)&&re.set("limit",String(E)),re.set("key",r),Qe(re);const Oe=qe+"/"+encodeURIComponent(W?W.decimalLongitude+","+W.decimalLatitude:m)+".json?"+re.toString();if(Oe===ut){te?(t(14,j=void 0),t(55,U=We[0])):t(14,j=We);return}ut=Oe;const et=await fetch(Oe,{signal:_e.signal,...Ke});if(!et.ok)throw new Error(await et.text());const tt=await et.json();Le("response",{url:Oe,featureCollection:tt}),te?(t(14,j=void 0),t(55,U=tt.features[0]),We=[U]):(t(14,j=tt.features.filter(Z)),W&&j.unshift({type:"Feature",properties:{},id:"reverse_"+W.decimalLongitude+"_"+W.decimalLatitude,text:W.decimalLatitude+", "+W.decimalLongitude,place_name:W.decimalLatitude+", "+W.decimalLongitude,place_type:["reverse"],center:[W.decimalLongitude,W.decimalLatitude],bbox:[W.decimalLongitude,W.decimalLatitude,W.decimalLongitude,W.decimalLatitude],geometry:{type:"Point",coordinates:[W.decimalLongitude,W.decimalLatitude]}}),We=j,W&&ce.focus())}catch(W){if(W&&typeof W=="object"&&"name"in W&&W.name==="AbortError")return;throw W}finally{_e===Ce&&t(19,Ce=void 0)}}function qt(){var me;if(!(ee!=null&&ee.length)||!P)return;const m=[180,90,-180,-90],te=!ee.some(_e=>!_e.matching_text);for(const _e of ee)if(te||!_e.matching_text)for(const W of[0,1,2,3])m[W]=Math[W<2?"min":"max"](m[W],((me=_e.bbox)==null?void 0:me[W])??_e.center[W%2]);w&&ee.length>0&&(U&&m[0]===m[2]&&m[1]===m[3]?w.flyTo(U.center,Ze):w.fitBounds(Tt(m),50,Ie))}function Kt(m){t(0,z=h==="always"),t(14,j=void 0),t(55,U=void 0),t(15,N=-1),at(m[1].toFixed(6)+", "+Tl(m[0],[-180,180],!0).toFixed(6),!1)}function Qt(m){if(!j)return;let te=m.key==="ArrowDown"?1:m.key==="ArrowUp"?-1:0;te&&(N===(ie?0:-1)&&te===-1&&t(15,N=j.length),t(15,N+=te),N>=j.length&&t(15,N=-1),N<0&&ie&&t(15,N=0),m.preventDefault())}function xe(m=!0){if(t(18,de=void 0),G){if(Re&&clearTimeout(Re),g.length<V)return;const te=g;Re=window.setTimeout(()=>{Xe(te).catch(me=>t(18,de=me))},m?b:0)}else t(14,j=void 0),t(18,de=void 0)}function $e(m){t(55,U=m),t(1,g=m.place_name),t(15,N=-1)}const Jt=()=>ce.focus();function Yt(m){He[m?"unshift":"push"](()=>{ce=m,t(17,ce)})}function Xt(){g=this.value,t(1,g),t(13,Be),t(27,f)}const xt=()=>t(13,Be=!0),$t=()=>t(13,Be=!1),en=()=>xe(),tn=()=>{t(1,g=""),ce.focus()},nn=()=>t(0,z=!z),ln=()=>t(18,de=void 0),on=m=>t(15,N=m),sn=m=>$e(m),rn=()=>{ie||t(15,N=-1)},an=()=>{};return l.$$set=m=>{"class"in m&&t(2,s=m.class),"apiKey"in m&&t(25,r=m.apiKey),"bbox"in m&&t(26,u=m.bbox),"clearButtonTitle"in m&&t(3,a=m.clearButtonTitle),"clearOnBlur"in m&&t(27,f=m.clearOnBlur),"collapsed"in m&&t(4,d=m.collapsed),"country"in m&&t(28,_=m.country),"debounceSearch"in m&&t(29,b=m.debounceSearch),"enableReverse"in m&&t(5,h=m.enableReverse),"errorMessage"in m&&t(6,k=m.errorMessage),"filter"in m&&t(30,Z=m.filter),"flyTo"in m&&t(31,P=m.flyTo),"fuzzyMatch"in m&&t(32,F=m.fuzzyMatch),"language"in m&&t(33,y=m.language),"limit"in m&&t(34,E=m.limit),"mapController"in m&&t(35,w=m.mapController),"minLength"in m&&t(36,V=m.minLength),"noResultsMessage"in m&&t(7,O=m.noResultsMessage),"placeholder"in m&&t(8,A=m.placeholder),"proximity"in m&&t(37,S=m.proximity),"reverseActive"in m&&t(0,z=m.reverseActive),"reverseButtonTitle"in m&&t(9,oe=m.reverseButtonTitle),"searchValue"in m&&t(1,g=m.searchValue),"showFullGeometry"in m&&t(38,pe=m.showFullGeometry),"showPlaceType"in m&&t(10,I=m.showPlaceType),"showResultsWhileTyping"in m&&t(39,G=m.showResultsWhileTyping),"selectFirst"in m&&t(11,ie=m.selectFirst),"flyToSelected"in m&&t(40,p=m.flyToSelected),"markerOnSelected"in m&&t(41,ae=m.markerOnSelected),"types"in m&&t(42,se=m.types),"excludeTypes"in m&&t(43,fe=m.excludeTypes),"zoom"in m&&t(44,Ze=m.zoom),"maxZoom"in m&&t(45,Ie=m.maxZoom),"apiUrl"in m&&t(46,qe=m.apiUrl),"fetchParameters"in m&&t(47,Ke=m.fetchParameters),"iconsBaseUrl"in m&&t(12,rt=m.iconsBaseUrl),"adjustUrlQuery"in m&&t(48,Qe=m.adjustUrlQuery),"$$scope"in m&&t(58,o=m.$$scope)},l.$$.update=()=>{if(l.$$.dirty[0]&134225920&&setTimeout(()=>{t(16,Ve=Be),f&&!Be&&t(1,g="")}),l.$$.dirty[0]&16386|l.$$.dirty[1]&32&&g.length<V&&(t(55,U=void 0),t(14,j=void 0),t(18,de=void 0),t(54,ee=j)),l.$$.dirty[1]&16777344&&pe&&U&&!U.address&&U.geometry.type==="Point"&&U.place_type[0]!=="reverse"&&Xe(U.id,{byId:!0}).catch(m=>t(18,de=m)),l.$$.dirty[1]&50356241&&(w&&U&&U.id!==Je&&P&&(!U.bbox||U.bbox[0]===U.bbox[2]&&U.bbox[1]===U.bbox[3]?w.flyTo(U.center,U.id.startsWith("poi.")||U.id.startsWith("address.")?Ie:Ze):w.fitBounds(Tt(U.bbox),50,Ie),t(14,j=void 0),t(54,ee=void 0),t(15,N=-1)),t(56,Je=U==null?void 0:U.id)),l.$$.dirty[0]&18432&&ie&&j!=null&&j.length&&t(15,N=0),l.$$.dirty[0]&2050&&(ie||t(15,N=-1)),l.$$.dirty[0]&16384|l.$$.dirty[1]&8388608&&ee!==j&&t(54,ee=void 0),l.$$.dirty[0]&81921|l.$$.dirty[1]&8388624&&w&&w.setEventHandler(m=>{switch(m.type){case"mapClick":z&&Kt(m.coordinates);break;case"markerClick":{const te=j==null?void 0:j.find(me=>me.id===m.id);te&&$e(te)}break;case"markerMouseEnter":ee&&t(15,N=Ve?(j==null?void 0:j.findIndex(te=>te.id===m.id))??-1:-1);break;case"markerMouseLeave":ee&&t(15,N=-1);break}}),l.$$.dirty[0]&49152&&t(57,n=j==null?void 0:j[N]),l.$$.dirty[1]&67133969&&w&&n&&P&&p&&w.flyTo(n.center,n.id.startsWith("poi.")||n.id.startsWith("address.")?Ie:Ze),l.$$.dirty[1]&1040&&(ae||w==null||w.setMarkers(void 0,void 0)),l.$$.dirty[1]&75498512&&w&&ae&&!ee&&(w.setMarkers(n?[n]:void 0,void 0),w.setSelectedMarker(n?0:-1)),l.$$.dirty[1]&25165840&&w&&w.setMarkers(ee,U),l.$$.dirty[0]&32768|l.$$.dirty[1]&8388624&&ee&&w&&w.setSelectedMarker(N),l.$$.dirty[0]&2|l.$$.dirty[1]&16&&w){const m=Ye(g);w.setReverseMarker(m?[m.decimalLongitude,m.decimalLatitude]:void 0)}l.$$.dirty[1]&67108864&&Le("select",n),l.$$.dirty[1]&16777216&&Le("pick",U),l.$$.dirty[0]&81920&&Le("optionsVisibilityChange",Ve&&!!j),l.$$.dirty[0]&16384&&Le("featuresListed",j),l.$$.dirty[1]&8388608&&Le("featuresMarked",ee),l.$$.dirty[0]&1&&Le("reverseToggle",z),l.$$.dirty[0]&2&&Le("queryChange",g),l.$$.dirty[0]&1|l.$$.dirty[1]&16&&w&&w.indicateReverse(z)},[z,g,s,a,d,h,k,O,A,oe,I,ie,rt,Be,j,N,Ve,ce,de,Ce,Nt,ft,Qt,xe,$e,r,u,f,_,b,Z,P,F,y,E,w,V,S,pe,G,p,ae,se,fe,Ze,Ie,qe,Ke,Qe,Dt,Ft,at,Gt,Ht,ee,U,Je,n,o,i,Jt,Yt,Xt,xt,$t,en,tn,nn,ln,on,sn,rn,an]}class El extends Y{constructor(e){super(),X(this,e,Rl,Bl,x,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}}function It(l){let e,t;return e=new El({props:{mapController:l[0],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){q(e.$$.fragment)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i&1&&(o.mapController=n[0]),e.$set(o)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Pl(l){let e,t,n=l[0]&&It(l);return{c(){n&&n.c(),e=Pe()},m(i,o){n&&n.m(i,o),B(i,e,o),t=!0},p(i,[o]){i[0]?n?(n.p(i,o),o&1&&L(n,1)):(n=It(i),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(Me(),M(n,1,1,()=>{n=null}),ze())},i(i){t||(L(n),t=!0)},o(i){M(n),t=!1},d(i){i&&R(e),n&&n.d(i)}}}function Zl(l,e,t){let n;ve(l,Ge,o=>t(1,n=o));let i;return wn(()=>{t(0,i=pn(n,Pt))}),[i]}class vi extends Y{constructor(e){super(),X(this,e,Zl,Pl,x,{})}}function Ul(l){let e;const t=l[3].default,n=ge(t,l,l[5],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&32)&&he(n,t,i,i[5],e?ye(t,i[5],o,null):be(i[5]),null)},i(i){e||(L(n,i),e=!0)},o(i){M(n,i),e=!1},d(i){n&&n.d(i)}}}function jl(l){let e,t;return e=new Zt({props:{style:"margin-bottom: 0px; "+l[1],disabled:l[0],$$slots:{default:[Ul]},$$scope:{ctx:l}}}),e.$on("click",l[4]),{c(){q(e.$$.fragment)},m(n,i){K(e,n,i),t=!0},p(n,[i]){const o={};i&2&&(o.style="margin-bottom: 0px; "+n[1]),i&1&&(o.disabled=n[0]),i&32&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Wl(l,e,t){let n,{$$slots:i={},$$scope:o}=e,{activated:s=!1}=e,{disabled:r=!1}=e;function u(a){le.call(this,l,a)}return l.$$set=a=>{"activated"in a&&t(2,s=a.activated),"disabled"in a&&t(0,r=a.disabled),"$$scope"in a&&t(5,o=a.$$scope)},l.$$.update=()=>{l.$$.dirty&4&&t(1,n=s?"background: grey":"")},[r,n,s,i,u,o]}class Ne extends Y{constructor(e){super(),X(this,e,Wl,jl,x,{activated:2,disabled:0})}}function Vl(l,e,t){t===void 0&&(t={});var n=_t(l),i=_t(e),o=De(i[1]-n[1]),s=De(i[0]-n[0]),r=De(n[1]),u=De(i[1]),a=Math.pow(Math.sin(o/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(r)*Math.cos(u);return Ln(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),t.units)}function wi(l,e){return e===void 0&&(e={}),Tn(l,function(t,n){var i=n.geometry.coordinates;return t+Vl(i[0],i[1],e)},0)}const Ol={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",hovering:"black",lineEndpointColor:"black",streetview:"blue",measuringLine:"cyan"},pi=10,Li=10;function Ti(){return Al(["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"])}function Al(l){return l[Math.floor(Math.random()*l.length)]}function Dl(l){let e;const t=l[16].default,n=ge(t,l,l[24],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&16777216)&&he(n,t,i,i[24],e?ye(t,i[24],o,null):be(i[24]),null)},i(i){e||(L(n,i),e=!0)},o(i){M(n,i),e=!1},d(i){n&&n.d(i)}}}function Fl(l){let e,t,n;function i(s){l[17](s)}let o={id:l[1],type:"circle",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[Dl]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Ut({props:o}),He.push(()=>lt(e,"hovered",i)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){q(e.$$.fragment)},m(s,r){K(e,s,r),n=!0},p(s,[r]){const u={};r&2&&(u.id=s[1]),r&4&&(u.source=s[2]),r&8&&(u.sourceLayer=s[3]),r&16&&(u.beforeId=s[4]),r&32&&(u.beforeLayerType=s[5]),r&64&&(u.paint=s[6]),r&128&&(u.layout=s[7]),r&256&&(u.filter=s[8]),r&512&&(u.applyToClusters=s[9]),r&1024&&(u.minzoom=s[10]),r&2048&&(u.maxzoom=s[11]),r&4096&&(u.hoverCursor=s[12]),r&8192&&(u.manageHoverState=s[13]),r&16384&&(u.eventsIfTopMost=s[14]),r&32768&&(u.interactive=s[15]),r&16777216&&(u.$$scope={dirty:r,ctx:s}),!t&&r&1&&(t=!0,u.hovered=s[0],it(()=>t=!1)),e.$set(u)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){M(e.$$.fragment,s),n=!1},d(s){Q(e,s)}}}function Gl(l,e,t){let{$$slots:n={},$$scope:i}=e,{id:o=jt("circle")}=e,{source:s=void 0}=e,{sourceLayer:r=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f}=e,{layout:d=void 0}=e,{filter:_=void 0}=e,{applyToClusters:b=void 0}=e,{minzoom:h=void 0}=e,{maxzoom:k=void 0}=e,{hoverCursor:Z=void 0}=e,{manageHoverState:P=!1}=e,{hovered:F=null}=e,{eventsIfTopMost:y=!1}=e,{interactive:E=!0}=e;function w(g){F=g,t(0,F)}function V(g){le.call(this,l,g)}function O(g){le.call(this,l,g)}function A(g){le.call(this,l,g)}function S(g){le.call(this,l,g)}function z(g){le.call(this,l,g)}function oe(g){le.call(this,l,g)}return l.$$set=g=>{"id"in g&&t(1,o=g.id),"source"in g&&t(2,s=g.source),"sourceLayer"in g&&t(3,r=g.sourceLayer),"beforeId"in g&&t(4,u=g.beforeId),"beforeLayerType"in g&&t(5,a=g.beforeLayerType),"paint"in g&&t(6,f=g.paint),"layout"in g&&t(7,d=g.layout),"filter"in g&&t(8,_=g.filter),"applyToClusters"in g&&t(9,b=g.applyToClusters),"minzoom"in g&&t(10,h=g.minzoom),"maxzoom"in g&&t(11,k=g.maxzoom),"hoverCursor"in g&&t(12,Z=g.hoverCursor),"manageHoverState"in g&&t(13,P=g.manageHoverState),"hovered"in g&&t(0,F=g.hovered),"eventsIfTopMost"in g&&t(14,y=g.eventsIfTopMost),"interactive"in g&&t(15,E=g.interactive),"$$scope"in g&&t(24,i=g.$$scope)},[F,o,s,r,u,a,f,d,_,b,h,k,Z,P,y,E,n,w,V,O,A,S,z,oe,i]}class Mi extends Y{constructor(e){super(),X(this,e,Gl,Fl,x,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Hl(l,e,t){let n;const i=ot();let{layer:o=void 0}=e;const{map:s}=Mn();ve(l,s,f=>t(2,n=f));function r(f){i(f.type,{...f,map:s})}const u=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],a=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return st(()=>{if(n)if(o)for(const f of u)n.off(f,o,r);else for(const f of a)n.off(f,r)}),l.$$set=f=>{"layer"in f&&t(1,o=f.layer)},l.$$.update=()=>{if(l.$$.dirty&6&&n)if(o)for(const f of u)n.on(f,o,r);else for(const f of a)n.on(f,r)},[s,o,n]}class zi extends Y{constructor(e){super(),X(this,e,Hl,null,x,{layer:1})}}const Nl=l=>({marker:l&8}),Bt=l=>({marker:l[3]});function ql(l){let e,t,n,i,o,s,r;const u=l[19].default,a=ge(u,l,l[18],Bt);return{c(){e=T("div"),a&&a.c(),c(e,"tabindex",t=l[1]?0:void 0),c(e,"role",n=l[1]?"button":void 0),ue(e,"z-index",l[2])},m(f,d){B(f,e,d),a&&a.m(e,null),o=!0,s||(r=[gt(l[7].call(null,e)),gt(i=Kl.call(null,e,l[0])),D(e,"click",nt(l[20])),D(e,"dblclick",nt(l[21])),D(e,"contextmenu",nt(l[22])),D(e,"mouseenter",l[23]),D(e,"mouseleave",l[24]),D(e,"mousemove",l[25]),D(e,"keydown",l[8])],s=!0)},p(f,[d]){a&&a.p&&(!o||d&262152)&&he(a,u,f,f[18],o?ye(u,f[18],d,Nl):be(f[18]),Bt),(!o||d&2&&t!==(t=f[1]?0:void 0))&&c(e,"tabindex",t),(!o||d&2&&n!==(n=f[1]?"button":void 0))&&c(e,"role",n),i&&zn(i.update)&&d&1&&i.update.call(null,f[0]),d&4&&ue(e,"z-index",f[2])},i(f){o||(L(a,f),o=!0)},o(f){M(a,f),o=!1},d(f){f&&R(e),a&&a.d(f),s=!1,Ee(r)}}}function Kl(l,e){const t=l.className;function n(i){i?l.className=`${t} ${i}`:l.className=t}return n(e),{update:n}}function Ql(l,e,t){let n,i,o,{$$slots:s={},$$scope:r}=e,{marker:u=void 0}=e,{lngLat:a}=e,{class:f=void 0}=e,{interactive:d=!0}=e,{asButton:_=!1}=e,{draggable:b=!1}=e,{feature:h=null}=e,{offset:k=void 0}=e,{zIndex:Z=void 0}=e,{rotation:P=0}=e,{opacity:F=1}=e;const y=ot(),{map:E,layerEvent:w,self:V}=Cn();ve(l,E,p=>t(27,o=p)),ve(l,w,p=>t(26,n=p)),ve(l,V,p=>t(3,i=p));function O(p){ht(V,i=new Pt.Marker({element:p,rotation:P,draggable:b,offset:k,opacity:F.toString()}).setLngLat(a).addTo(o),i),t(11,u=i);const ae=()=>z("dragstart"),se=()=>{A(),z("drag")},fe=()=>{A(),z("dragend")};return b&&(i.on("dragstart",ae),i.on("drag",se),i.on("dragend",fe)),{destroy(){b&&(i==null||i.off("dragstart",ae),i==null||i.off("drag",se),i==null||i.off("dragend",fe)),t(11,u=void 0),i==null||i.remove()}}}function A(){let p=i==null?void 0:i.getLngLat();p&&(Array.isArray(a)?t(10,a=[p.lng,p.lat]):a&&"lon"in a?t(10,a={lon:p.lng,lat:p.lat}):t(10,a=p))}function S(p){p.key===" "&&(p.preventDefault(),p.stopPropagation(),z("click"))}function z(p){if(!d)return;let ae=i==null?void 0:i.getLngLat();if(!ae)return;const se=[ae.lng,ae.lat];let fe={map:o,marker:i,lngLat:se,features:[{type:"Feature",properties:(h==null?void 0:h.properties)??{},geometry:{type:"Point",coordinates:se}}]};ht(w,n={...fe,layerType:"marker",type:p},n),y(p,fe)}const oe=()=>z("click"),g=()=>z("dblclick"),pe=()=>z("contextmenu"),I=p=>{z("mouseenter")},G=()=>{z("mouseleave")},ie=()=>z("mousemove");return l.$$set=p=>{"marker"in p&&t(11,u=p.marker),"lngLat"in p&&t(10,a=p.lngLat),"class"in p&&t(0,f=p.class),"interactive"in p&&t(12,d=p.interactive),"asButton"in p&&t(1,_=p.asButton),"draggable"in p&&t(13,b=p.draggable),"feature"in p&&t(14,h=p.feature),"offset"in p&&t(15,k=p.offset),"zIndex"in p&&t(2,Z=p.zIndex),"rotation"in p&&t(16,P=p.rotation),"opacity"in p&&t(17,F=p.opacity),"$$scope"in p&&t(18,r=p.$$scope)},l.$$.update=()=>{l.$$.dirty&1032&&(i==null||i.setLngLat(a)),l.$$.dirty&32776&&(i==null||i.setOffset(k??[0,0])),l.$$.dirty&65544&&(i==null||i.setRotation(P)),l.$$.dirty&131080&&(i==null||i.setOpacity(F.toString()))},[f,_,Z,i,E,w,V,O,S,z,a,u,d,b,h,k,P,F,r,s,oe,g,pe,I,G,ie]}class Ci extends Y{constructor(e){super(),X(this,e,Ql,ql,x,{marker:11,lngLat:10,class:0,interactive:12,asButton:1,draggable:13,feature:14,offset:15,zIndex:2,rotation:16,opacity:17})}}function Jl(l){let e;const t=l[8].default,n=ge(t,l,l[15],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&32768)&&he(n,t,i,i[15],e?ye(t,i[15],o,null):be(i[15]),null)},i(i){e||(L(n,i),e=!0)},o(i){M(n,i),e=!1},d(i){n&&n.d(i)}}}function Yl(l){let e,t;return e=new Ut({props:{id:l[0],type:"raster",source:l[1],beforeId:l[2],beforeLayerType:l[3],paint:l[4],layout:l[5],minzoom:l[6],maxzoom:l[7],$$slots:{default:[Jl]},$$scope:{ctx:l}}}),e.$on("click",l[9]),e.$on("dblclick",l[10]),e.$on("contextmenu",l[11]),e.$on("mouseenter",l[12]),e.$on("mousemove",l[13]),e.$on("mouseleave",l[14]),{c(){q(e.$$.fragment)},m(n,i){K(e,n,i),t=!0},p(n,[i]){const o={};i&1&&(o.id=n[0]),i&2&&(o.source=n[1]),i&4&&(o.beforeId=n[2]),i&8&&(o.beforeLayerType=n[3]),i&16&&(o.paint=n[4]),i&32&&(o.layout=n[5]),i&64&&(o.minzoom=n[6]),i&128&&(o.maxzoom=n[7]),i&32768&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Xl(l,e,t){let{$$slots:n={},$$scope:i}=e,{id:o=jt("raster-layer")}=e,{source:s=void 0}=e,{beforeId:r=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:a}=e,{layout:f=void 0}=e,{minzoom:d=void 0}=e,{maxzoom:_=void 0}=e;function b(y){le.call(this,l,y)}function h(y){le.call(this,l,y)}function k(y){le.call(this,l,y)}function Z(y){le.call(this,l,y)}function P(y){le.call(this,l,y)}function F(y){le.call(this,l,y)}return l.$$set=y=>{"id"in y&&t(0,o=y.id),"source"in y&&t(1,s=y.source),"beforeId"in y&&t(2,r=y.beforeId),"beforeLayerType"in y&&t(3,u=y.beforeLayerType),"paint"in y&&t(4,a=y.paint),"layout"in y&&t(5,f=y.layout),"minzoom"in y&&t(6,d=y.minzoom),"maxzoom"in y&&t(7,_=y.maxzoom),"$$scope"in y&&t(15,i=y.$$scope)},[o,s,r,u,a,f,d,_,n,b,h,k,Z,P,F,i]}class Si extends Y{constructor(e){super(),X(this,e,Xl,Yl,x,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}function xl(l){let e;return{c(){e=ke("Luc Chaissac")},m(t,n){B(t,e,n)},d(t){t&&R(e)}}}function $l(l){let e,t,n,i,o,s,r,u,a;return u=new Sn({props:{href:"https://icon-icons.com/icon/screenshot-cursor-camera/100181",$$slots:{default:[xl]},$$scope:{ctx:l}}}),{c(){e=T("ul"),t=T("li"),t.innerHTML=`<b>Click</b>
    on the map to open a new tab with a 3rd-party imagery provider`,n=J(),i=T("li"),i.innerHTML=`Press <b>Escape</b>
    to exit this mode`,o=J(),s=T("li"),r=ke("Cursor by "),q(u.$$.fragment)},m(f,d){B(f,e,d),v(e,t),v(e,n),v(e,i),v(e,o),v(e,s),v(s,r),K(u,s,null),a=!0},p(f,[d]){const _={};d&1&&(_.$$scope={dirty:d,ctx:f}),u.$set(_)},i(f){a||(L(u.$$.fragment,f),a=!0)},o(f){M(u.$$.fragment,f),a=!1},d(f){f&&R(e),Q(u)}}}class ei extends Y{constructor(e){super(),X(this,e,null,$l,x,{})}}const At="/atip/browse_tool_panel/assets/street_view-48580b6a.svg",ti="/atip/browse_tool_panel/assets/camera_cursor-824d29b6.svg",{window:ni}=In;function Rt(l){let e,t,n,i;const o=[ii,li],s=[];function r(u,a){return u[0]?0:1}return e=r(l),t=s[e]=o[e](l),{c(){t.c(),n=Pe()},m(u,a){s[e].m(u,a),B(u,n,a),i=!0},p(u,a){let f=e;e=r(u),e===f?s[e].p(u,a):(Me(),M(s[f],1,1,()=>{s[f]=null}),ze(),t=s[e],t?t.p(u,a):(t=s[e]=o[e](u),t.c()),L(t,1),t.m(n.parentNode,n))},i(u){i||(L(t),i=!0)},o(u){M(t),i=!1},d(u){u&&R(n),s[e].d(u)}}}function li(l){let e,t;return e=new Ne({props:{$$slots:{default:[oi]},$$scope:{ctx:l}}}),e.$on("click",l[6]),{c(){q(e.$$.fragment)},m(n,i){K(e,n,i),t=!0},p(n,i){const o={};i&4096&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function ii(l){let e,t,n,i,o,s,r,u;t=new Ne({props:{activated:!0,$$slots:{default:[si]},$$scope:{ctx:l}}}),t.$on("click",l[4]);function a(d){l[5](d)}let f={legend:"Source",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return l[2].streetViewImagery!==void 0&&(f.value=l[2].streetViewImagery),i=new Rn({props:f}),He.push(()=>lt(i,"value",a)),r=new Fn({props:{label:"Help",$$slots:{default:[ri]},$$scope:{ctx:l}}}),{c(){e=T("div"),q(t.$$.fragment),n=J(),q(i.$$.fragment),s=J(),q(r.$$.fragment),ue(e,"display","flex"),ue(e,"flex-flow","column")},m(d,_){B(d,e,_),K(t,e,null),v(e,n),K(i,e,null),v(e,s),K(r,e,null),u=!0},p(d,_){const b={};_&4096&&(b.$$scope={dirty:_,ctx:d}),t.$set(b);const h={};!o&&_&4&&(o=!0,h.value=d[2].streetViewImagery,it(()=>o=!1)),i.$set(h);const k={};_&4096&&(k.$$scope={dirty:_,ctx:d}),r.$set(k)},i(d){u||(L(t.$$.fragment,d),L(i.$$.fragment,d),L(r.$$.fragment,d),u=!0)},o(d){M(t.$$.fragment,d),M(i.$$.fragment,d),M(r.$$.fragment,d),u=!1},d(d){d&&R(e),Q(t),Q(i),Q(r)}}}function oi(l){let e,t;return{c(){e=T("img"),$(e.src,t=At)||c(e,"src",t),c(e,"alt","StreetView")},m(n,i){B(n,e,i)},p:H,d(n){n&&R(e)}}}function si(l){let e,t;return{c(){e=T("img"),$(e.src,t=At)||c(e,"src",t),c(e,"alt","Disable StreetView")},m(n,i){B(n,e,i)},p:H,d(n){n&&R(e)}}}function ri(l){let e,t;return e=new ei({}),{c(){q(e.$$.fragment)},m(n,i){K(e,n,i),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function ai(l){let e,t,n,i,o=l[1]&&Rt(l);return{c(){o&&o.c(),e=Pe()},m(s,r){o&&o.m(s,r),B(s,e,r),t=!0,n||(i=D(ni,"keydown",l[3]),n=!0)},p(s,[r]){s[1]?o?(o.p(s,r),r&2&&L(o,1)):(o=Rt(s),o.c(),L(o,1),o.m(e.parentNode,e)):o&&(Me(),M(o,1,1,()=>{o=null}),ze())},i(s){t||(L(o),t=!0)},o(s){M(o),t=!1},d(s){s&&R(e),o&&o.d(s),n=!1,i()}}}function ui(l,e,t){let n,i;ve(l,bt,k=>t(2,n=k)),ve(l,Ge,k=>t(8,i=k));let{enabled:o}=e,{showControls:s=!0}=e,r=[];function u(){i.on("click",f),i.getCanvas().style.cursor=`url(${ti}), auto`,r=Bn();for(let k of r)k.setProperty(i,"line-color",Ol.streetview)}function a(){if(i){i.off("click",f),i.getCanvas().style.cursor="inherit";for(let k of r)k.returnToDefaultPaintValues(i);r=[]}}st(a);function f(k){if(!o)return;let Z=k.lngLat.lng,P=k.lngLat.lat;n.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${P},${Z}&cbp=11,0,0,0,0`,"_blank"):n.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${P}~${Z}&style=x`,"_blank")}function d(k){o&&k.key=="Escape"&&(k.stopPropagation(),t(0,o=!1))}const _=()=>t(0,o=!1);function b(k){l.$$.not_equal(n.streetViewImagery,k)&&(n.streetViewImagery=k,bt.set(n))}const h=()=>t(0,o=!0);return l.$$set=k=>{"enabled"in k&&t(0,o=k.enabled),"showControls"in k&&t(1,s=k.showControls)},l.$$.update=()=>{l.$$.dirty&1&&(o?u():a())},[o,s,n,d,_,b,h]}class Ii extends Y{constructor(e){super(),X(this,e,ui,ai,x,{enabled:0,showControls:1})}}const fi="/atip/browse_tool_panel/assets/zoom_out_map-b2e1091a.svg";function ci(l){let e,t;return{c(){e=T("img"),$(e.src,t=fi)||c(e,"src",t),c(e,"alt","Zoom to show entire boundary")},m(n,i){B(n,e,i)},p:H,d(n){n&&R(e)}}}function di(l){let e,t;return e=new Zt({props:{title:"Zoom to show entire boundary",$$slots:{default:[ci]},$$scope:{ctx:l}}}),e.$on("click",l[0]),{c(){q(e.$$.fragment)},m(n,i){K(e,n,i),t=!0},p(n,[i]){const o={};i&8&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){M(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function mi(l,e,t){let n;ve(l,Ge,s=>t(2,n=s));let{boundaryGeojson:i}=e;function o(){let s=En(i);Number.isFinite(s[0])&&n.fitBounds(s,{padding:20,animate:!0,duration:500})}return l.$$set=s=>{"boundaryGeojson"in s&&t(1,i=s.boundaryGeojson)},[o,i]}class Bi extends Y{constructor(e){super(),X(this,e,mi,di,x,{boundaryGeojson:1})}}export{gi as B,Mi as C,vi as G,Ne as I,Ci as M,Si as R,Ii as S,Bi as Z,wi as a,Li as b,pi as c,Ol as d,Vl as e,zi as f,Fn as g,hi as h,bi as i,ei as j,qn as k,yi as l,ki as m,Ti as r};
