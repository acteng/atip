import{S as Y,i as K,s as J,e as T,j as G,ao as ke,k as $,a7 as Q,p,aU as Jl,b as W,c as V,f as O,h as b,m as v,x as Ze,n as X,t as g,o as d,q as w,O as ht,T as bt,U as vt,V as wt,b2 as Vn,l as h,ab as De,_ as ce,$ as $e,aX as ct,v as k,J as B,Z as Me,a0 as Dn,a1 as Yl,r as Ae,a2 as Kl,a3 as Zl,a4 as ut,a5 as Ql,a6 as xl,b3 as Lo,Y as St,b4 as Xn,b5 as Ao,G as yt,aO as yn,aF as Sn,P as ee,I as Oe,ag as Tt,aT as Io,av as $t,aj as jn,an as nn,u as Rn,a as Ot,F as Cn,w as Ye,b1 as te,b6 as he,b7 as Le,H as x,D as qe,W as ne,b8 as ae,N as eo,aZ as xt,b9 as $n,ba as dt,R as to,E as no,bb as No,bc as Mo,g as Tn,al as Po,C as Fo,a$ as Jn,ap as Eo,aq as Yn,ar as Kn,as as on,b0 as Zn,L as Do,d as jo,M as Ro,z as Bo}from"./index-f7c04f2c.js";import{l as H,d as Ke,a as zo,I as ro,g as He,f as Ho,M as qo,k as _t,h as xe,i as le,R as Go,C as pt,S as Uo,m as Wo,B as Vo,c as Qn,b as It,Z as Xo,G as Jo}from"./ZoomOutMap-1b2d752c.js";import{P as fe}from"./Popup-bb8236ea.js";function Yo(l){let e;return{c(){e=T("span"),G(e,"class","svelte-kzgqtg"),ke(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&ke(e,"background",n[0])},i:Q,o:Q,d(n){n&&p(e)}}}function Ko(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Pe extends Y{constructor(e){super(),K(this,e,Ko,Yo,J,{color:0})}}const Zo="/atip/browse_tool_panel/assets/help-d011708a.svg";function Qo(l){let e,n;const t=l[1].default,r=ht(t,l,l[4],null);return{c(){e=T("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&bt(r,t,o,o[4],n?wt(t,o[4],s,null):vt(o[4]),null)},i(o){n||(g(r,o),n=!0)},o(o){d(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function xo(l){let e,n,t,r,o,s,u;function a(f){l[3](f)}let i={title:"Help",$$slots:{default:[Qo]},$$scope:{ctx:l}};return l[0]!==void 0&&(i.open=l[0]),t=new Jl({props:i}),W.push(()=>V(t,"open",a)),{c(){e=T("button"),e.innerHTML=`<img src="${Zo}" title="Help" alt="Help"/>`,n=O(),b(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),v(t,f,c),o=!0,s||(u=Ze(e,"click",l[2]),s=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,_.open=f[0],X(()=>r=!1)),t.$set(_)},i(f){o||(g(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),w(t,f),s=!1,u()}}}function es(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(a){o=a,n(0,o)}return l.$$set=a=>{"$$scope"in a&&n(4,r=a.$$scope)},[o,t,s,u,r]}class me extends Y{constructor(e){super(),K(this,e,es,xo,J,{})}}const ts=l=>({}),xn=l=>({}),ns=l=>({}),er=l=>({});function rs(l){let e,n,t,r,o,s,u,a,i,f,c;const _=l[4].sidebar,m=ht(_,l,l[3],er),y=l[4].main,C=ht(y,l,l[3],xn);return{c(){e=T("div"),n=T("aside"),t=T("div"),m&&m.c(),r=O(),o=T("button"),o.textContent="â†’",u=O(),a=T("main"),C&&C.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(o,"type","button"),G(o,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(n,"class",s=Vn(l[1]?"":"collapsed")+" svelte-1n0etgd"),ke(n,"--sidebarWidth",l[0]),G(a,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(S,A){$(S,e,A),h(e,n),h(n,t),m&&m.m(t,null),h(n,r),h(n,o),h(e,u),h(e,a),C&&C.m(a,null),i=!0,f||(c=Ze(o,"click",l[2]),f=!0)},p(S,[A]){m&&m.p&&(!i||A&8)&&bt(m,_,S,S[3],i?wt(_,S[3],A,ns):vt(S[3]),er),(!i||A&2&&s!==(s=Vn(S[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(n,"class",s),(!i||A&1)&&ke(n,"--sidebarWidth",S[0]),C&&C.p&&(!i||A&8)&&bt(C,y,S,S[3],i?wt(y,S[3],A,ts):vt(S[3]),xn)},i(S){i||(g(m,S),g(C,S),i=!0)},o(S){d(m,S),d(C,S),i=!1},d(S){S&&p(e),m&&m.d(S),C&&C.d(S),f=!1,c()}}}function ls(l,e,n){let{$$slots:t={},$$scope:r}=e,{sidebarWidth:o="25rem"}=e,s=!0;function u(){n(1,s=!s)}return l.$$set=a=>{"sidebarWidth"in a&&n(0,o=a.sidebarWidth),"$$scope"in a&&n(3,r=a.$$scope)},[o,s,u,r,t]}class os extends Y{constructor(e){super(),K(this,e,ls,rs,J,{sidebarWidth:0})}}function tr(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function nr(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Pe({props:{color:l[2]}}),{c(){e=T("li"),b(n.$$.fragment),t=O(),o=k(r),s=O()},m(a,i){$(a,e,i),v(n,e,null),h(e,t),h(e,o),h(e,s),u=!0},p(a,i){const f={};i&1&&(f.color=a[2]),n.$set(f),(!u||i&1)&&r!==(r=a[1]+"")&&B(o,r)},i(a){u||(g(n.$$.fragment,a),u=!0)},o(a){d(n.$$.fragment,a),u=!1},d(a){a&&p(e),w(n)}}}function ss(l){let e,n,t=De(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=nr(tr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){e=T("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);n=!0},p(s,[u]){if(u&1){t=De(s[0]);let a;for(a=0;a<t.length;a+=1){const i=tr(s,t,a);r[a]?(r[a].p(i,u),g(r[a],1)):(r[a]=nr(i),r[a].c(),g(r[a],1),r[a].m(e,null))}for(ce(),a=t.length;a<r.length;a+=1)o(a);$e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)g(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),ct(r,s)}}}function is(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class Bn extends Y{constructor(e){super(),K(this,e,is,ss,J,{rows:0})}}function rr(l){let e=l[0],n,t,r=lr(l);return{c(){r.c(),n=Me()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?(ce(),d(r,1,1,Q),$e(),r=lr(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function lr(l){let e;const n=l[10].default,t=ht(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&bt(t,n,r,r[9],e?wt(n,r[9],o,null):vt(r[9]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function as(l){let e,n,t=l[0]&&rr(l);return{c(){t&&t.c(),e=Me()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=rr(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function fs(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Dn("raster-source")}=e,{tiles:a}=e,{tileSize:i=void 0}=e;const{map:f,self:c}=Yl();Ae(l,f,y=>n(8,r=y)),Ae(l,c,y=>n(0,t=y));let _,m=!0;return Kl(()=>{t&&_&&r&&(Zl(f,t,_),ut(c,t=null,t),n(6,_=void 0))}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,a=y.tiles),"tileSize"in y&&n(5,i=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(ut(c,t=u,t),Ql(r,t,xl({type:"raster",tiles:a,tileSize:i}),y=>r&&y===t,()=>{t&&(n(6,_=r==null?void 0:r.getSource(t)),n(7,m=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,_=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&_&&(m?n(7,m=!1):_.setTiles(a))},[t,f,c,u,a,i,_,m,r,s,o]}class us extends Y{constructor(e){super(),K(this,e,fs,as,J,{id:3,tiles:4,tileSize:5})}}function cs(l){let e;const n=l[16].default,t=ht(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&bt(t,n,r,r[24],e?wt(n,r[24],o,null):vt(r[24]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function $s(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[cs]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Lo({props:o}),W.push(()=>V(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,[u]){const a={};u&2&&(a.id=s[1]),u&4&&(a.source=s[2]),u&8&&(a.sourceLayer=s[3]),u&16&&(a.beforeId=s[4]),u&32&&(a.beforeLayerType=s[5]),u&64&&(a.paint=s[6]),u&128&&(a.layout=s[7]),u&256&&(a.filter=s[8]),u&512&&(a.applyToClusters=s[9]),u&1024&&(a.minzoom=s[10]),u&2048&&(a.maxzoom=s[11]),u&4096&&(a.hoverCursor=s[12]),u&8192&&(a.manageHoverState=s[13]),u&16384&&(a.eventsIfTopMost=s[14]),u&32768&&(a.interactive=s[15]),u&16777216&&(a.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,a.hovered=s[0],X(()=>n=!1)),e.$set(a)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function ps(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Dn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:a=void 0}=e,{beforeLayerType:i=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:A=!1}=e,{hovered:R=null}=e,{eventsIfTopMost:M=!1}=e,{interactive:E=!0}=e;function L(D){R=D,n(0,R)}function N(D){St.call(this,l,D)}function P(D){St.call(this,l,D)}function I(D){St.call(this,l,D)}function j(D){St.call(this,l,D)}function U(D){St.call(this,l,D)}function q(D){St.call(this,l,D)}return l.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,s=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,a=D.beforeId),"beforeLayerType"in D&&n(5,i=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,_=D.filter),"applyToClusters"in D&&n(9,m=D.applyToClusters),"minzoom"in D&&n(10,y=D.minzoom),"maxzoom"in D&&n(11,C=D.maxzoom),"hoverCursor"in D&&n(12,S=D.hoverCursor),"manageHoverState"in D&&n(13,A=D.manageHoverState),"hovered"in D&&n(0,R=D.hovered),"eventsIfTopMost"in D&&n(14,M=D.eventsIfTopMost),"interactive"in D&&n(15,E=D.interactive),"$$scope"in D&&n(24,r=D.$$scope)},[R,o,s,u,a,i,f,c,_,m,y,C,S,A,M,E,t,L,N,P,I,j,U,q,r]}class pn extends Y{constructor(e){super(),K(this,e,ps,$s,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function or(l){let e=l[0],n,t,r=sr(l);return{c(){r.c(),n=Me()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?(ce(),d(r,1,1,Q),$e(),r=sr(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function sr(l){let e;const n=l[9].default,t=ht(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&bt(t,n,r,r[8],e?wt(n,r[8],o,null):vt(r[8]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function ms(l){let e,n,t=l[0]&&or(l);return{c(){t&&t.c(),e=Me()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=or(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function _s(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Dn("vector")}=e,{url:a=null}=e,{tiles:i=null}=e,{promoteId:f=null}=e;if(a&&a.includes("pmtiles://")&&!Xn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Ao;Xn.addProtocol("pmtiles",y.tile)}const{map:c,self:_}=Yl();Ae(l,c,y=>n(7,r=y)),Ae(l,_,y=>n(0,t=y));let m;return Kl(()=>{t&&r&&(Zl(c,t,m),ut(_,t=null,t),m=void 0)}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,a=y.url),"tiles"in y&&n(5,i=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(ut(_,t=u,t),Ql(r,t,xl({type:"vector",url:a,tiles:i,promoteId:f}),y=>r&&y===t,()=>{t&&(m=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{m=r==null?void 0:r.getSource(u)}))},[t,c,_,u,a,i,f,r,s,o]}class ye extends Y{constructor(e){super(),K(this,e,_s,ms,J,{id:3,url:4,tiles:5,promoteId:6})}}const lo="/atip/browse_tool_panel/assets/measure-2cd04177.svg";function ir(l,e,n){const t=l.slice();return t[11]=e[n],t[12]=e,t[13]=n,t}function gs(l){let e,n,t;return n=new ro({props:{$$slots:{default:[hs]},$$scope:{ctx:l}}}),n.$on("click",l[9]),{c(){e=T("div"),b(n.$$.fragment)},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16384&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ds(l){let e,n,t,r,o,s=l[2].toFixed(2)+"",u,a,i,f,c,_,m,y,C;n=new ro({props:{activated:!0,$$slots:{default:[bs]},$$scope:{ctx:l}}}),n.$on("click",l[4]),f=new He({props:{label:"Help",$$slots:{default:[vs]},$$scope:{ctx:l}}}),_=new Ho({}),_.$on("click",l[3]);let S=De(l[0]),A=[];for(let M=0;M<S.length;M+=1)A[M]=ar(ir(l,S,M));const R=M=>d(A[M],1,1,()=>{A[M]=null});return{c(){e=T("div"),b(n.$$.fragment),t=O(),r=T("p"),o=k("Length: "),u=k(s),a=k(" meters"),i=O(),b(f.$$.fragment),c=O(),b(_.$$.fragment),m=O();for(let M=0;M<A.length;M+=1)A[M].c();y=Me(),ke(e,"display","flex"),ke(e,"flex-flow","column")},m(M,E){$(M,e,E),v(n,e,null),h(e,t),h(e,r),h(r,o),h(r,u),h(r,a),h(e,i),v(f,e,null),$(M,c,E),v(_,M,E),$(M,m,E);for(let L=0;L<A.length;L+=1)A[L]&&A[L].m(M,E);$(M,y,E),C=!0},p(M,E){const L={};E&16384&&(L.$$scope={dirty:E,ctx:M}),n.$set(L),(!C||E&4)&&s!==(s=M[2].toFixed(2)+"")&&B(u,s);const N={};if(E&16384&&(N.$$scope={dirty:E,ctx:M}),f.$set(N),E&65){S=De(M[0]);let P;for(P=0;P<S.length;P+=1){const I=ir(M,S,P);A[P]?(A[P].p(I,E),g(A[P],1)):(A[P]=ar(I),A[P].c(),g(A[P],1),A[P].m(y.parentNode,y))}for(ce(),P=S.length;P<A.length;P+=1)R(P);$e()}},i(M){if(!C){g(n.$$.fragment,M),g(f.$$.fragment,M),g(_.$$.fragment,M);for(let E=0;E<S.length;E+=1)g(A[E]);C=!0}},o(M){d(n.$$.fragment,M),d(f.$$.fragment,M),d(_.$$.fragment,M),A=A.filter(Boolean);for(let E=0;E<A.length;E+=1)d(A[E]);C=!1},d(M){M&&(p(e),p(c),p(m),p(y)),w(n),w(f),w(_,M),ct(A,M)}}}function hs(l){let e,n;return{c(){e=T("img"),Tt(e.src,n=lo)||G(e,"src",n),G(e,"alt","Measure lines")},m(t,r){$(t,e,r)},p:Q,d(t){t&&p(e)}}}function bs(l){let e,n;return{c(){e=T("img"),Tt(e.src,n=lo)||G(e,"src",n),G(e,"alt","Stop measuring lines")},m(t,r){$(t,e,r)},p:Q,d(t){t&&p(e)}}}function vs(l){let e;return{c(){e=T("ul"),e.innerHTML=`<li><b>Click</b>
          on the map to place a new waypoint</li> <li><b>Click and drag</b>
          an existing waypoint to move it</li> <li><b>Click</b>
          an existing waypoint to delete it</li> <li>Press <b>Escape</b>
          to exit this mode</li>`},m(n,t){$(n,e,t)},p:Q,d(n){n&&p(e)}}}function ws(l){let e,n;return{c(){e=T("span"),n=O(),G(e,"class","dot svelte-1tzt432")},m(t,r){$(t,e,r),$(t,n,r)},p:Q,d(t){t&&(p(e),p(n))}}}function ar(l){let e,n,t;function r(u){l[7](u,l[11],l[12],l[13])}function o(){return l[8](l[13])}let s={draggable:!0,$$slots:{default:[ws]},$$scope:{ctx:l}};return l[11]!==void 0&&(s.lngLat=l[11]),e=new qo({props:s}),W.push(()=>V(e,"lngLat",r)),e.$on("click",o),{c(){b(e.$$.fragment)},m(u,a){v(e,u,a),t=!0},p(u,a){l=u;const i={};a&16384&&(i.$$scope={dirty:a,ctx:l}),!n&&a&1&&(n=!0,i.lngLat=l[11],X(()=>n=!1)),e.$set(i)},i(u){t||(g(e.$$.fragment,u),t=!0)},o(u){d(e.$$.fragment,u),t=!1},d(u){w(e,u)}}}function ks(l){let e,n;const t=[H("measurement-line"),{paint:{"line-color":Ke.measuringLine,"line-width":5}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u={};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ys(l){let e,n,t,r,o,s,u;const a=[ds,gs],i=[];function f(c,_){return c[1]?0:1}return e=f(l),n=i[e]=a[e](l),r=new yt({props:{data:l[0].length<2?yn():Sn(l[0]),$$slots:{default:[ks]},$$scope:{ctx:l}}}),{c(){n.c(),t=O(),b(r.$$.fragment)},m(c,_){i[e].m(c,_),$(c,t,_),v(r,c,_),o=!0,s||(u=Ze(window,"keydown",l[5]),s=!0)},p(c,[_]){let m=e;e=f(c),e===m?i[e].p(c,_):(ce(),d(i[m],1,1,()=>{i[m]=null}),$e(),n=i[e],n?n.p(c,_):(n=i[e]=a[e](c),n.c()),g(n,1),n.m(t.parentNode,t));const y={};_&1&&(y.data=c[0].length<2?yn():Sn(c[0])),_&16384&&(y.$$scope={dirty:_,ctx:c}),r.$set(y)},i(c){o||(g(n),g(r.$$.fragment,c),o=!0)},o(c){d(n),d(r.$$.fragment,c),o=!1},d(c){c&&p(t),i[e].d(c),w(r,c),s=!1,u()}}}function Ss(l,e,n){let t,r=!1,o=[];function s(y){return y.length<2?0:1e3*zo(Sn(y),{units:"kilometers"})}function u(y){n(0,o=[...o,y.detail.lngLat.toArray()])}function a(){n(1,r=!1),n(0,o=[])}function i(y){r&&y.key==="Escape"&&(y.stopPropagation(),a())}function f(y){o.splice(y,1),n(0,o)}function c(y,C,S,A){S[A]=y,n(0,o)}const _=y=>f(y),m=()=>n(1,r=!0);return l.$$.update=()=>{l.$$.dirty&1&&n(2,t=s(o))},[o,r,t,u,a,i,f,c,_,m]}class Cs extends Y{constructor(e){super(),K(this,e,Ss,ys,J,{})}}const Ts={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Re=Uint8Array,gt=Uint16Array,oo=Uint32Array,so=new Re([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),io=new Re([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Os=new Re([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ao=function(l,e){for(var n=new gt(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new oo(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},fo=ao(so,2),uo=fo[0],Ls=fo[1];uo[28]=258,Ls[258]=28;var As=ao(io,0),Is=As[0],On=new gt(32768);for(var we=0;we<32768;++we){var at=(we&43690)>>>1|(we&21845)<<1;at=(at&52428)>>>2|(at&13107)<<2,at=(at&61680)>>>4|(at&3855)<<4,On[we]=((at&65280)>>>8|(at&255)<<8)>>>1}var Qt=function(l,e,n){for(var t=l.length,r=0,o=new gt(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new gt(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new gt(1<<e);var a=15-e;for(r=0;r<t;++r)if(l[r])for(var i=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[On[c]>>>a]=i}else for(u=new gt(t),r=0;r<t;++r)l[r]&&(u[r]=On[s[l[r]-1]++]>>>15-l[r]);return u},rn=new Re(288);for(var we=0;we<144;++we)rn[we]=8;for(var we=144;we<256;++we)rn[we]=9;for(var we=256;we<280;++we)rn[we]=7;for(var we=280;we<288;++we)rn[we]=8;var co=new Re(32);for(var we=0;we<32;++we)co[we]=5;var Ns=Qt(rn,9,1),Ms=Qt(co,5,1),mn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},Ue=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},_n=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Ps=function(l){return(l+7)/8|0},zn=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?gt:l.BYTES_PER_ELEMENT==4?oo:Re)(n-e);return t.set(l.subarray(e,n)),t},Fs=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],We=function(l,e,n){var t=new Error(e||Fs[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,We),!n)throw t;return t},Es=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Re(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Re(t*3));var s=function(ge){var ve=e.length;if(ge>ve){var _e=new Re(Math.max(ve*2,ge));_e.set(e),e=_e}},u=n.f||0,a=n.p||0,i=n.b||0,f=n.l,c=n.d,_=n.m,m=n.n,y=t*8;do{if(!f){u=Ue(l,a,1);var C=Ue(l,a+1,3);if(a+=3,C)if(C==1)f=Ns,c=Ms,_=9,m=5;else if(C==2){var M=Ue(l,a,31)+257,E=Ue(l,a+10,15)+4,L=M+Ue(l,a+5,31)+1;a+=14;for(var N=new Re(L),P=new Re(19),I=0;I<E;++I)P[Os[I]]=Ue(l,a+I*3,7);a+=E*3;for(var j=mn(P),U=(1<<j)-1,q=Qt(P,j,1),I=0;I<L;){var D=q[Ue(l,a,U)];a+=D&15;var S=D>>>4;if(S<16)N[I++]=S;else{var F=0,z=0;for(S==16?(z=3+Ue(l,a,3),a+=2,F=N[I-1]):S==17?(z=3+Ue(l,a,7),a+=3):S==18&&(z=11+Ue(l,a,127),a+=7);z--;)N[I++]=F}}var oe=N.subarray(0,M),se=N.subarray(M);_=mn(oe),m=mn(se),f=Qt(oe,_,1),c=Qt(se,m,1)}else We(1);else{var S=Ps(a)+4,A=l[S-4]|l[S-3]<<8,R=S+A;if(R>t){o&&We(0);break}r&&s(i+A),e.set(l.subarray(S,R),i),n.b=i+=A,n.p=a=R*8,n.f=u;continue}if(a>y){o&&We(0);break}}r&&s(i+131072);for(var Se=(1<<_)-1,de=(1<<m)-1,Ce=a;;Ce=a){var F=f[_n(l,a)&Se],ie=F>>>4;if(a+=F&15,a>y){o&&We(0);break}if(F||We(2),ie<256)e[i++]=ie;else if(ie==256){Ce=a,f=null;break}else{var Ne=ie-254;if(ie>264){var I=ie-257,Te=so[I];Ne=Ue(l,a,(1<<Te)-1)+uo[I],a+=Te}var be=c[_n(l,a)&de],re=be>>>4;be||We(3),a+=be&15;var se=Is[re];if(re>3){var Te=io[re];se+=_n(l,a)&(1<<Te)-1,a+=Te}if(a>y){o&&We(0);break}r&&s(i+131072);for(var pe=i+Ne;i<pe;i+=4)e[i]=e[i-se],e[i+1]=e[i+1-se],e[i+2]=e[i+2-se],e[i+3]=e[i+3-se];i=pe}}n.l=f,n.p=Ce,n.b=i,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=m)}while(!u);return i==e.length?e:zn(e,0,i)},Ds=new Re(0),Je=function(l,e){return l[e]|l[e+1]<<8},Ve=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},gn=function(l,e){return Ve(l,e)+Ve(l,e+4)*4294967296};function js(l,e){return Es(l,e)}var Ln=typeof TextDecoder<"u"&&new TextDecoder,Rs=0;try{Ln.decode(Ds,{stream:!0}),Rs=1}catch{}var Bs=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,zn(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function $o(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(Ln)return Ln.decode(l);var r=Bs(l),o=r[0],s=r[1];return s.length&&We(8),o}}var zs=function(l,e){return e+30+Je(l,e+26)+Je(l,e+28)},Hs=function(l,e,n){var t=Je(l,e+28),r=$o(l.subarray(e+46,e+46+t),!(Je(l,e+8)&2048)),o=e+46+t,s=Ve(l,e+20),u=n&&s==4294967295?qs(l,o):[s,Ve(l,e+24),Ve(l,e+42)],a=u[0],i=u[1],f=u[2];return[Je(l,e+10),a,i,r,o+Je(l,e+30)+Je(l,e+32),f]},qs=function(l,e){for(;Je(l,e)!=1;e+=4+Je(l,e+2));return[gn(l,e+12),gn(l,e+4),gn(l,e+20)]};function Gs(l,e){for(var n={},t=l.length-22;Ve(l,t)!=101010256;--t)(!t||l.length-t>65558)&&We(13);var r=Je(l,t+8);if(!r)return{};var o=Ve(l,t+16),s=o==4294967295||r==65535;if(s){var u=Ve(l,t-12);s=Ve(l,u)==101075792,s&&(r=Ve(l,u+32),o=Ve(l,u+48))}for(var a=e&&e.filter,i=0;i<r;++i){var f=Hs(l,o,s),c=f[0],_=f[1],m=f[2],y=f[3],C=f[4],S=f[5],A=zs(l,S);o=C,(!a||a({name:y,size:_,originalSize:m,compression:c}))&&(c?c==8?n[y]=js(l.subarray(A,A+_),new Re(m)):We(14,"unknown compression type "+c):n[y]=zn(l,A,A+_))}return n}function Us(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(dn):dn(l)}function dn(l){var e=new Uint8Array(l),n=Gs(e);return Promise.resolve(Ws(n))}function Ws(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=$o(l[r])}return e}function Qe(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&kt(t)===e)return t;n++}}function ln(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&kt(r)===e&&n.push(r),t++}return n}function fn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&kt(r)===e&&n(r,t):n(r,t),t++}}function Vs(l,e,n){var t=[];return fn(l,e,function(r,o){t.push(n(r,o))}),t}var Xs=/.+\:/;function kt(l){return l.tagName.replace(Xs,"")}function po(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+kt(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=po(l.childNodes[t]),t++;return e+="</"+kt(l)+">",e}function Js(l){var e=l.documentElement,n=Qe(e,"sheetData"),t=[];return fn(n,"row",function(r){fn(r,"c",function(o){t.push(o)})}),t}function Ys(l,e){return Qe(e,"v")}function Ks(l,e){if(e.firstChild&&kt(e.firstChild)==="is"&&e.firstChild.firstChild&&kt(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Zs(l){var e=l.documentElement,n=Qe(e,"dimension");if(n)return n.getAttribute("ref")}function Qs(l){var e=l.documentElement,n=Qe(e,"cellStyleXfs");return n?ln(n,"xf"):[]}function xs(l){var e=l.documentElement,n=Qe(e,"cellXfs");return n?ln(n,"xf"):[]}function ei(l){var e=l.documentElement,n=Qe(e,"numFmts");return n?ln(n,"numFmt"):[]}function ti(l){var e=l.documentElement;return Vs(e,"si",function(n){var t=Qe(n,"t");if(t)return t.textContent;var r="";return fn(n,"r",function(o){r+=Qe(o,"t").textContent}),r})}function ni(l){var e=l.documentElement;return Qe(e,"workbookPr")}function ri(l){var e=l.documentElement;return ln(e,"Relationship")}function li(l){var e=l.documentElement,n=Qe(e,"sheets");return ln(n,"sheet")}function oi(l,e){var n=e.createDocument(l),t={},r=ni(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return li(n).forEach(o),t}function si(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),a=s.getAttribute("Type");switch(a){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=hn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=hn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=hn(u);break}};return ri(n).forEach(r),t}function hn(l){return l[0]==="/"?l.slice(1):"xl/"+l}function fr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function ur(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fr(Object(n),!0).forEach(function(t){ii(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ii(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ai(l,e){if(!l)return{};var n=e.createDocument(l),t=Qs(n).map(bn),r=ei(n).map(fi).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?ur(ur({},t[u.xfId]),bn(u,r)):bn(u,r)};return xs(n).map(o)}function fi(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function bn(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function ui(l,e){return l?ti(e.createDocument(l)):[]}function mo(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function ci(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=$i(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $i(l,e){if(l){if(typeof l=="string")return cr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cr(l,e)}}function cr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function pi(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(mi.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&di(t.numberFormat.template))return!0}}var mi=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],_i=/^\[\$-414\]/,gi=/;@$/;function di(l){l=l.toLowerCase(),l=l.replace(_i,""),l=l.replace(gi,"");for(var e=l.split(/\W+/),n=ci(e),t;!(t=n()).done;){var r=t.value;if(hi.indexOf(r)<0)return!1}return!0}var hi=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function bi(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,a=n.properties,i=n.options;switch(e||(e="n"),e){case"str":l=vn(l,i);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=vn(l,i);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=vn(l,i);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=vi(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var _=pi(o(),s,i);_?(l=$r(l),l=mo(l,a)):l=(i.parseNumber||$r)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function vi(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function vn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function $r(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var wi=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function ki(l){var e=function(i,f){return i-f},n=l.map(function(a){return a.row}).sort(e),t=l.map(function(a){return a.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function yi(l){for(var e=0,n=0;n<l.length;)e*=26,e+=wi.indexOf(l[n]),n++;return e}function _o(l){return l=l.split(/(\d+)/),[parseInt(l[1]),yi(l[0].trim())]}function Si(l,e,n,t,r,o,s){var u=_o(l.getAttribute("r")),a=Ys(e,l),i=a&&a.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:bi(i,f,{getInlineStringValue:function(){return Ks(e,l)},getInlineStringXml:function(){return po(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function Ci(l,e,n,t,r,o){var s=Js(l);return s.length===0?[]:s.map(function(u){return Si(u,l,e,n,t,r,o)})}function Ti(l,e){return Ii(l)||Ai(l,e)||Li(l,e)||Oi()}function Oi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Li(l,e){if(l){if(typeof l=="string")return pr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pr(l,e)}}function pr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ai(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(a){o=!0,u=a}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ii(l){if(Array.isArray(l))return l}function Ni(l){var e=Zs(l);if(e)return e=e.split(":").map(_o).map(function(n){var t=Ti(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Mi(l,e,n,t,r,o){var s=e.createDocument(l),u=Ci(s,e,n,t,r,o),a=Ni(s)||ki(u);return{cells:u,dimensions:a}}function Pi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Fi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fi(l,e){if(l){if(typeof l=="string")return mr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(l,e)}}function mr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ei(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,a=Pi(l[s]),i;!(i=a()).done;){var f=i.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Di(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ji(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ji(l,e){if(l){if(typeof l=="string")return _r(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(l,e)}}function _r(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ri(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=Di(l),a;!(a=u()).done;){var i=a.value;if(t(i[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function Bi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=go(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zi(l,e){return Gi(l)||qi(l,e)||go(l,e)||Hi()}function Hi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function go(l,e){if(l){if(typeof l=="string")return gr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(l,e)}}function gr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function qi(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(a){o=!0,u=a}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Gi(l){if(Array.isArray(l))return l}function Ui(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=zi(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,a=new Array(u),i=0;i<u;){a[i]=new Array(s);for(var f=0;f<s;)a[i][f]=null,f++;i++}for(var c=Bi(t),_;!(_=c()).done;){var m=_.value,y=m.row-1,C=m.column-1;C<s&&y<u&&(a[y][C]=m.value)}var S=e.rowMap;if(S)for(var A=0;A<a.length;)S[A]=A,A++;return a=Ei(Ri(a,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(a=e.transformData(a)),a}function Wi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Vi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vi(l,e){if(l){if(typeof l=="string")return dr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(l,e)}}function dr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function hr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Xi(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hr(Object(n),!0).forEach(function(t){Ji(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):hr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Ji(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Yi(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Xi({sheet:1},n));var t=function(_){if(!l[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return l[_]},r=si(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?ui(t(r.sharedStrings),e):[],s=r.styles?ai(t(r.styles),e):{},u=oi(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var a=Ki(n.sheet,u.sheets);if(!a||!r.sheets[a])throw Zi(n.sheet,u.sheets);var i=Mi(t(r.sheets[a]),e,o,s,u,n),f=Ui(i,n);return n.properties?{data:f,properties:u}:f}function Ki(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=Wi(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Zi(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function An(l){"@babel/helpers - typeof";return An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},An(l)}function br(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Qi(l,e,n){return e&&br(l.prototype,e),n&&br(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function xi(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function ea(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&en(l,e)}function ta(l){var e=ho();return function(){var t=tn(l),r;if(e){var o=tn(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return na(this,r)}}function na(l,e){if(e&&(An(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ra(l)}function ra(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function In(l){var e=typeof Map=="function"?new Map:void 0;return In=function(t){if(t===null||!la(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return an(t,arguments,tn(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),en(r,t)},In(l)}function an(l,e,n){return ho()?an=Reflect.construct:an=function(r,o,s){var u=[null];u.push.apply(u,o);var a=Function.bind.apply(r,u),i=new a;return s&&en(i,s.prototype),i},an.apply(null,arguments)}function ho(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function la(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function en(l,e){return en=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},en(l,e)}function tn(l){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},tn(l)}var Be=function(l){ea(n,l);var e=ta(n);function n(t){var r;return xi(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Qi(n)}(In(Error));function oa(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new Be("not_a_number")}if(typeof l!="number")throw new Be("not_a_number");if(isNaN(l))throw new Be("invalid_number");if(!isFinite(l))throw new Be("out_of_bounds");return l}function sa(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new Be("invalid_number");if(!isFinite(l))throw new Be("out_of_bounds");return String(l)}throw new Be("not_a_string")}function ia(l){if(typeof l=="boolean")return l;throw new Be("not_a_boolean")}function aa(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new Be("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new Be("invalid_number");if(!isFinite(l))throw new Be("out_of_bounds");var t=mo(l,n);if(isNaN(t.valueOf()))throw new Be("out_of_bounds");return t}throw new Be("not_a_date")}function fa(l,e){return $a(l)||ca(l,e)||bo(l,e)||ua()}function ua(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ca(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(a){o=!0,u=a}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function $a(l){if(Array.isArray(l))return l}function Nn(l){"@babel/helpers - typeof";return Nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(l)}function pa(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=bo(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bo(l,e){if(l){if(typeof l=="string")return vr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vr(l,e)}}function vr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function wr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function kr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wr(Object(n),!0).forEach(function(t){ma(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ma(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var yr={isColumnOriented:!1};function _a(l,e,n){n?n=kr(kr({},yr),n):n=yr;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ba(e),r&&(l=ha(l));for(var u=l[0],a=[],i=[],f=1;f<l.length;f++){var c=vo(e,l[f],f,u,i,n);(c!==null||s===!1)&&a.push(c)}if(o)for(var _=pa(i),m;!(m=_()).done;){var y=m.value;y.row=o[y.row-1]+1}return{rows:a,errors:i}}function vo(l,e,n,t,r,o){for(var s={},u=!0,a=function(R){var M=R.column,E=R.value,L=R.error,N=R.reason,P={error:L,row:n+1,column:M,value:E};return N&&(P.reason=N),l[M].type&&(P.type=l[M].type),P},i=[],f=function(){var R=_[c],M=l[R],E=Nn(M.type)==="object"&&!Array.isArray(M.type),L=e[t.indexOf(R)];L===void 0&&(L=null);var N=void 0,P=void 0,I=void 0;if(E)N=vo(M.type,e,n,t,r,o);else if(L===null)N=null;else if(Array.isArray(M.type)){var j=!1,U=da(L).map(function(D){var F=Sr(D,M,o);return F.error&&(N=D,P=F.error,I=F.reason),F.value!==null&&(j=!0),F.value});P||(N=j?U:null)}else{var q=Sr(L,M,o);P=q.error,I=q.reason,N=P?L:q.value}!P&&N===null&&(typeof M.required=="function"?i.push({column:R}):M.required===!0&&(P="required")),P?r.push(a({column:R,value:N,error:P,reason:I})):(u&&N!==null&&(u=!1),(N!==null||o.includeNullValues)&&(s[M.prop]=N))},c=0,_=Object.keys(l);c<_.length;c++)f();if(u)return null;for(var m=0,y=i;m<y.length;m++){var C=y[m].column,S=l[C].required(s);S&&r.push(a({column:C,value:null,error:"required"}))}return s}function Sr(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=Ct(l,e.parse):e.type?t=ga(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function Ct(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ga(l,e,n){switch(e){case String:return Ct(l,sa);case Number:return Ct(l,oa);case Date:return Ct(l,function(t){return aa(t,{properties:n.properties})});case Boolean:return Ct(l,ia);default:if(typeof e=="function")return Ct(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function wo(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=wo(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function da(l){for(var e=[],n=0;n<l.length;){var t=wo(l,",",n),r=fa(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var ha=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function ba(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function Mn(l){"@babel/helpers - typeof";return Mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mn(l)}function ko(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;Mn(o)==="object"&&(o=Object.keys(l[r])[0],s=ko(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var va=["schema","map"];function Cr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function sn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cr(Object(n),!0).forEach(function(t){wa(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function wa(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ka(l,e){if(l==null)return{};var n=ya(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function ya(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function Sa(l,e,n){var t=n.schema,r=n.map,o=ka(n,va);!t&&r&&(t=ko(r));var s=Yi(l,e,sn(sn({},o),{},{properties:t||o.properties}));return t?_a(s.data,t,sn(sn({},o),{},{properties:s.properties})):s}function Ca(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Us(l).then(function(n){return Sa(n,Ts,e)})}function Ta(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>Oa(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function Oa(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function La(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ca(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Io(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Pn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function Aa(l){return $t(["get","intervention_type"],{area:Ke.area,route:Ke.route,crossing:Ke.crossing,other:Ke.other},"white")}function Ia(l){return[["Areas",Ke.area],["Routes",Ke.route],["Crossings",Ke.crossing],["Other",Ke.other]]}const Z={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},ze=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Fn(){let[l,e]=yo(Pn,Z.funding_programmes);return[$t(["get","funding_programme"],l,"grey"),e]}function Na(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=yo(l,Z.current_milestone);return[$t(["get","current_milestone"],e,"grey"),n]}function yo(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Ma(l){let e,n;return e=new Bn({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Pa(l){let e,n,t,r,o;function s(a){l[3](a)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new _t({props:u}),W.push(()=>V(e,"value",s)),e.$on("change",l[2]),r=new He({props:{label:"Legend",$$slots:{default:[Ma]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};!n&&i&1&&(n=!0,f.value=a[0],X(()=>n=!1)),e.$set(f);const c={};i&66&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}function Fa(l,e,n){let t;Ae(l,jn,i=>n(4,t=i));let r="fundingProgramme",[o,s]=Fn();function u(){let i;r=="interventionType"?(i=Aa(),n(1,s=Ia())):r=="fundingProgramme"?n(1,[i,s]=Fn(),s):r=="currentMilestone"&&n(1,[i,s]=Na(),s),t.setPaintProperty("interventions-points","circle-color",i),t.setPaintProperty("interventions-lines","line-color",i),t.setPaintProperty("interventions-polygons","fill-color",i),t.setPaintProperty("interventions-polygons-outlines","line-color",i)}function a(i){r=i,n(0,r)}return[r,s,u,a]}class Ea extends Y{constructor(e){super(),K(this,e,Fa,Pa,J,{})}}const Lt=nn({type:"FeatureCollection",features:[],schemes:{}}),un=nn(new Map),Tr=nn(!0),Nt=nn(""),Mt=nn("");function Da(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ra(l){let e,n,t,r,o,s;return t=new Ot({props:{$$slots:{default:[ja]},$$scope:{ctx:l}}}),t.$on("click",l[19]),{c(){e=T("input"),n=O(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,a){$(u,e,a),Ye(e,l[7]),$(u,n,a),v(t,u,a),r=!0,o||(s=Ze(e,"input",l[18]),o=!0)},p(u,a){a&128&&e.value!==u[7]&&Ye(e,u[7]);const i={};a&134217728&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){r||(g(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function Ba(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function za(l){let e,n,t,r,o,s;return t=new Ot({props:{$$slots:{default:[Ba]},$$scope:{ctx:l}}}),t.$on("click",l[21]),{c(){e=T("input"),n=O(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,a){$(u,e,a),Ye(e,l[6]),$(u,n,a),v(t,u,a),r=!0,o||(s=Ze(e,"input",l[20]),o=!0)},p(u,a){a&64&&e.value!==u[6]&&Ye(e,u[6]);const i={};a&134217728&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){r||(g(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function Ha(l){let e,n,t,r,o,s,u,a,i,f,c,_,m,y,C,S,A,R,M,E;e=new Ot({props:{$$slots:{default:[Da]},$$scope:{ctx:l}}}),e.$on("click",l[13]);function L(F){l[14](F)}let N={label:"Authority or region",choices:l[8],emptyOption:!0};l[2]!==void 0&&(N.value=l[2]),t=new _t({props:N}),W.push(()=>V(t,"value",L));function P(F){l[15](F)}let I={label:"Funding programme",choices:l[9],emptyOption:!0};l[3]!==void 0&&(I.value=l[3]),s=new _t({props:I}),W.push(()=>V(s,"value",P));function j(F){l[16](F)}let U={label:"Current milestone",choices:l[10],emptyOption:!0};l[4]!==void 0&&(U.value=l[4]),i=new _t({props:U}),W.push(()=>V(i,"value",j));function q(F){l[17](F)}let D={label:"Sketch source",choices:l[12],emptyOption:!0};return l[5]!==void 0&&(D.value=l[5]),_=new _t({props:D}),W.push(()=>V(_,"value",q)),C=new Cn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Ra]},$$scope:{ctx:l}}}),A=new Cn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[za]},$$scope:{ctx:l}}}),M=new Ea({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment),a=O(),b(i.$$.fragment),c=O(),b(_.$$.fragment),y=O(),b(C.$$.fragment),S=O(),b(A.$$.fragment),R=O(),b(M.$$.fragment)},m(F,z){v(e,F,z),$(F,n,z),v(t,F,z),$(F,o,z),v(s,F,z),$(F,a,z),v(i,F,z),$(F,c,z),v(_,F,z),$(F,y,z),v(C,F,z),$(F,S,z),v(A,F,z),$(F,R,z),v(M,F,z),E=!0},p(F,z){const oe={};z&134217728&&(oe.$$scope={dirty:z,ctx:F}),e.$set(oe);const se={};z&256&&(se.choices=F[8]),!r&&z&4&&(r=!0,se.value=F[2],X(()=>r=!1)),t.$set(se);const Se={};z&512&&(Se.choices=F[9]),!u&&z&8&&(u=!0,Se.value=F[3],X(()=>u=!1)),s.$set(Se);const de={};z&1024&&(de.choices=F[10]),!f&&z&16&&(f=!0,de.value=F[4],X(()=>f=!1)),i.$set(de);const Ce={};!m&&z&32&&(m=!0,Ce.value=F[5],X(()=>m=!1)),_.$set(Ce);const ie={};z&134217856&&(ie.$$scope={dirty:z,ctx:F}),C.$set(ie);const Ne={};z&134217792&&(Ne.$$scope={dirty:z,ctx:F}),A.$set(Ne)},i(F){E||(g(e.$$.fragment,F),g(t.$$.fragment,F),g(s.$$.fragment,F),g(i.$$.fragment,F),g(_.$$.fragment,F),g(C.$$.fragment,F),g(A.$$.fragment,F),g(M.$$.fragment,F),E=!0)},o(F){d(e.$$.fragment,F),d(t.$$.fragment,F),d(s.$$.fragment,F),d(i.$$.fragment,F),d(_.$$.fragment,F),d(C.$$.fragment,F),d(A.$$.fragment,F),d(M.$$.fragment,F),E=!1},d(F){F&&(p(n),p(o),p(a),p(c),p(y),p(S),p(R)),w(e,F),w(t,F),w(s,F),w(i,F),w(_,F),w(C,F),w(A,F),w(M,F)}}}function qa(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[11].route.toLocaleString()+"",s,u,a=l[11].area.toLocaleString()+"",i,f,c=l[11].crossing.toLocaleString()+"",_,m,y=l[11].other.toLocaleString()+"",C,S,A=Or(l[11].totalLength).toFixed(1)+"",R,M;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),u=k(`
    routes, `),i=k(a),f=k(` areas,
    `),_=k(c),m=k(" crossings, "),C=k(y),S=k(`
    other, with total LineString length of `),R=k(A),M=k(" miles)")},m(E,L){$(E,e,L),$(E,t,L),$(E,r,L),$(E,s,L),$(E,u,L),$(E,i,L),$(E,f,L),$(E,_,L),$(E,m,L),$(E,C,L),$(E,S,L),$(E,R,L),$(E,M,L)},p(E,L){L&1&&n!==(n=E[0].size.toLocaleString()+"")&&B(t,n),L&2048&&o!==(o=E[11].route.toLocaleString()+"")&&B(s,o),L&2048&&a!==(a=E[11].area.toLocaleString()+"")&&B(i,a),L&2048&&c!==(c=E[11].crossing.toLocaleString()+"")&&B(_,c),L&2048&&y!==(y=E[11].other.toLocaleString()+"")&&B(C,y),L&2048&&A!==(A=Or(E[11].totalLength).toFixed(1)+"")&&B(R,A)},d(E){E&&(p(e),p(t),p(r),p(s),p(u),p(i),p(f),p(_),p(m),p(C),p(S),p(R),p(M))}}}function Ga(l){let e,n,t;function r(s){l[22](s)}let o={$$slots:{default:[qa]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const a={};u&134219777&&(a.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,a.checked=s[1],X(()=>n=!1)),e.$set(a)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ua(l){let e,n,t,r;return e=new He({props:{label:"Filters",$$slots:{default:[Ha]},$$scope:{ctx:l}}}),t=new xe({props:{small:!0,$$slots:{default:[Ga]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&134219772&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const a={};s&134219779&&(a.$$scope={dirty:s,ctx:o}),t.$set(a)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Or(l){return l*621371e-9}function Wa(l,e,n){let t,r,o,s;Ae(l,Mt,z=>n(6,t=z)),Ae(l,Nt,z=>n(7,r=z)),Ae(l,Lt,z=>n(23,o=z)),Ae(l,un,z=>n(24,s=z));let{schemesToBeShown:u=new Set}=e,{show:a=!0}=e,i=[],f="",c=[],_=new Set(Pn.slice(0,-1)),m="",y=[],C="",S=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],A="",R={area:0,route:0,crossing:0,other:0,totalLength:0};Rn(()=>{var Se,de,Ce;let z=new Set,oe=new Set,se=new Set;for(let ie of s.values())(Se=ie.browse)!=null&&Se.authority_or_region&&z.add(ie.browse.authority_or_region),(de=ie.browse)!=null&&de.funding_programme&&oe.add(ie.browse.funding_programme),(Ce=ie.browse)!=null&&Ce.current_milestone&&se.add(ie.browse.current_milestone);n(8,i=Array.from(z.entries())),i.sort(),n(9,c=Pn.map(ie=>[ie,ie])),n(10,y=Array.from(se.entries())),y.sort()});function M(z,oe,se,Se,de,Ce){let ie=oe.toLowerCase(),Ne=se.toLowerCase(),Te=re=>{var pe,ge,ve,_e,Ie,Fe,At;if(ie&&!((pe=re.properties.name)!=null&&pe.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))return!1;if(z||Ne||Se||de||Ce){let Xe=s.get(re.properties.scheme_reference);if(Se&&((ve=Xe.browse)==null?void 0:ve.authority_or_region)!=Se||de&&de!=="Other"&&((_e=Xe.browse)==null?void 0:_e.funding_programme)!=de||de==="Other"&&_.has(((Ie=Xe.browse)==null?void 0:Ie.funding_programme)??"")||Ce&&((Fe=Xe.browse)==null?void 0:Fe.current_milestone)!=Ce||Ne&&!Xe.scheme_reference.toLowerCase().includes(Ne)&&!(Xe.scheme_name??"").toLowerCase().includes(Ne)||z&&z!=="Both"&&z!==((At=Xe.browse)==null?void 0:At.sketch_source))return!1}return!0};n(0,u=new Set(o.features.filter(Te).map(re=>re.properties.scheme_reference))),n(11,R={area:0,route:0,crossing:0,other:0,totalLength:0});let be=re=>{var pe,ge;return!(!u.has(re.properties.scheme_reference)||ie&&!((pe=re.properties.name)!=null&&pe.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))};for(let re of o.features)be(re)?(delete re.properties.hide_while_editing,n(11,R[re.properties.intervention_type]++,R),re.geometry.type=="LineString"&&re.properties.length_meters&&n(11,R.totalLength+=re.properties.length_meters,R)):re.properties.hide_while_editing=!0;Lt.set(o),n(11,R)}function E(){n(5,A=""),n(2,f=""),n(3,m=""),n(4,C=""),ut(Nt,r="",r),ut(Mt,t="",t)}function L(z){f=z,n(2,f)}function N(z){m=z,n(3,m)}function P(z){C=z,n(4,C)}function I(z){A=z,n(5,A)}function j(){r=this.value,Nt.set(r)}const U=()=>ut(Nt,r="",r);function q(){t=this.value,Mt.set(t)}const D=()=>ut(Mt,t="",t);function F(z){a=z,n(1,a)}return l.$$set=z=>{"schemesToBeShown"in z&&n(0,u=z.schemesToBeShown),"show"in z&&n(1,a=z.show)},l.$$.update=()=>{l.$$.dirty&252&&M(A,r,t,f,m,C)},[u,a,f,m,C,A,t,r,i,c,y,R,S,E,L,N,P,I,j,U,q,D,F]}class Va extends Y{constructor(e){super(),K(this,e,Wa,Ua,J,{schemesToBeShown:0,show:1})}}function Xa(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ja(l){let e,n,t,r,o;return t=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Xa]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment),r=k(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),h(e,n),v(t,e,null),h(e,r),o=!0},p(s,[u]){const a={};u&1&&(a.$$scope={dirty:u,ctx:s}),t.$set(a)},i(s){o||(g(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class je extends Y{constructor(e){super(),K(this,e,null,Ja,J,{})}}function Lr(l,e,n){const t=l.slice();return t[2]=e[n],t}function Ar(l,e,n){const t=l.slice();return t[5]=e[n],t}function Ir(l){let e,n;return{c(){e=T("span"),n=k(`Â 
    `),ke(e,"background",l[5]),ke(e,"width","100%"),ke(e,"border","1px solid black")},m(t,r){$(t,e,r),h(e,n)},p(t,r){r&1&&ke(e,"background",t[5])},d(t){t&&p(e)}}}function Nr(l){let e,n=l[2]+"",t;return{c(){e=T("span"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&B(t,n)},d(r){r&&p(e)}}}function Ya(l){let e,n,t,r=De(l[0]),o=[];for(let a=0;a<r.length;a+=1)o[a]=Ir(Ar(l,r,a));let s=De(l[1]),u=[];for(let a=0;a<s.length;a+=1)u[a]=Nr(Lr(l,s,a));return{c(){e=T("div");for(let a=0;a<o.length;a+=1)o[a].c();n=O(),t=T("div");for(let a=0;a<u.length;a+=1)u[a].c();ke(e,"display","flex"),ke(t,"display","flex"),ke(t,"justify-content","space-between")},m(a,i){$(a,e,i);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(a,n,i),$(a,t,i);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(a,[i]){if(i&1){r=De(a[0]);let f;for(f=0;f<r.length;f+=1){const c=Ar(a,r,f);o[f]?o[f].p(c,i):(o[f]=Ir(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(i&2){s=De(a[1]);let f;for(f=0;f<s.length;f+=1){const c=Lr(a,s,f);u[f]?u[f].p(c,i):(u[f]=Nr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:Q,o:Q,d(a){a&&(p(e),p(n),p(t)),ct(o,a),ct(u,a)}}}function Ka(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ge extends Y{constructor(e){super(),K(this,e,Ka,Ya,J,{colorScale:0,limits:1})}}function Mr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Za(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qa(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ef(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tf(l){let e,n,t,r,o,s,u,a,i,f,c,_;return t=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Qa]},$$scope:{ctx:l}}}),o=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[xa]},$$scope:{ctx:l}}}),f=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ef]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=O(),a=T("p"),i=k("License: "),b(f.$$.fragment),c=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(m,u,y),$(m,a,y),h(a,i),v(f,a,null),h(a,c),_=!0},p(m,y){const C={};y&65536&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&65536&&(S.$$scope={dirty:y,ctx:m}),o.$set(S);const A={};y&65536&&(A.$$scope={dirty:y,ctx:m}),f.$set(A)},i(m){_||(g(t.$$.fragment,m),g(o.$$.fragment,m),g(f.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),_=!1},d(m){m&&(p(e),p(u),p(a)),w(t),w(o),w(f)}}}function nf(l){let e,n,t;return n=new me({props:{$$slots:{default:[tf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Pr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rf(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sf(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function af(l){let e,n,t,r,o,s,u,a,i,f,c,_,m,y;return o=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[lf]},$$scope:{ctx:l}}}),u=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[of]},$$scope:{ctx:l}}}),_=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[sf]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=T("p"),r=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(u.$$.fragment),a=k("."),i=O(),f=T("p"),c=k("License: "),b(_.$$.fragment),m=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(C,S){$(C,e,S),$(C,n,S),$(C,t,S),h(t,r),v(o,t,null),h(t,s),v(u,t,null),h(t,a),$(C,i,S),$(C,f,S),h(f,c),v(_,f,null),h(f,m),y=!0},p(C,S){const A={};S&65536&&(A.$$scope={dirty:S,ctx:C}),o.$set(A);const R={};S&65536&&(R.$$scope={dirty:S,ctx:C}),u.$set(R);const M={};S&65536&&(M.$$scope={dirty:S,ctx:C}),_.$set(M)},i(C){y||(g(o.$$.fragment,C),g(u.$$.fragment,C),g(_.$$.fragment,C),y=!0)},o(C){d(o.$$.fragment,C),d(u.$$.fragment,C),d(_.$$.fragment,C),y=!1},d(C){C&&(p(e),p(n),p(t),p(i),p(f)),w(o),w(u),w(_)}}}function ff(l){let e,n,t;return n=new me({props:{$$slots:{default:[af]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Fr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function uf(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pf(l){let e,n,t,r,o,s,u,a,i;return t=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[cf]},$$scope:{ctx:l}}}),o=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[$f]},$$scope:{ctx:l}}}),a=new je({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&65536&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){i||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(a,f)}}}function mf(l){let e,n,t;return n=new me({props:{$$slots:{default:[pf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Er(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[4],limits:l[6]().map(kf)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:Q,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function _f(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",a;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(r),s=k(`
          people per square kilometre in `),a=k(u)},m(i,f){$(i,e,f),h(e,n),h(e,t),h(t,o),h(e,s),h(e,a)},p(i,f){f&8200&&r!==(r=i[15].toLocaleString()+"")&&B(o,r),f&8192&&u!==(u=i[14]+"")&&B(a,u)},d(i){i&&p(e)}}}function gf(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",a,i;return{c(){e=T("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=T("b"),a=k(u),i=k(`
          cars`)},m(f,c){$(f,e,c),h(e,n),h(e,r),h(e,o),h(e,s),h(s,a),h(e,i)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(r,t),c&8200&&u!==(u=f[15]+"")&&B(a,u)},d(f){f&&p(e)}}}function df(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",a,i;return{c(){e=T("p"),n=T("b"),r=k(t),o=k("%"),s=k(`
          of households in `),a=k(u),i=k(" have 1 or more cars")},m(f,c){$(f,e,c),h(e,n),h(n,r),h(n,o),h(e,s),h(e,a),h(e,i)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(r,t),c&8192&&u!==(u=f[14]+"")&&B(a,u)},d(f){f&&p(e)}}}function hf(l){Mr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?df:o[3]=="average_cars_per_household"?gf:_f}let t=n(l),r=t(l);return{c(){r.c(),e=Me()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){Mr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function bf(l){let e,n;return e=new fe({props:{$$slots:{default:[hf,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vf(l){let e,n,t,r;const o=[H(tt),{sourceLayer:tt},{paint:{"fill-color":Le(["get",l[3]],l[6](),l[4]),"fill-opacity":x(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[bf]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s}),e.$on("click",l[5]);const u=[H(`${tt}-outline`),{sourceLayer:tt},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&88?ne(o,[f&0&&ae(H(tt)),f&0&&{sourceLayer:tt},f&88&&{paint:{"fill-color":Le(["get",i[3]],i[6](),i[4]),"fill-opacity":x(.5,.7)}},f&8&&{layout:{visibility:i[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&8?ne(u,[f&0&&ae(H(`${tt}-outline`)),f&0&&{sourceLayer:tt},u[2],f&8&&{layout:{visibility:i[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function wf(l){let e,n,t,r,o,s,u,a,i,f,c,_,m,y;function C(I){l[7](I)}let S={$$slots:{right:[nf],default:[Za]},$$scope:{ctx:l}};l[0]!==void 0&&(S.checked=l[0]),e=new le({props:S}),W.push(()=>V(e,"checked",C)),e.$on("change",l[8]);let A=l[3]=="percent_households_with_car"&&Pr(l);function R(I){l[9](I)}let M={$$slots:{right:[ff],default:[rf]},$$scope:{ctx:l}};l[1]!==void 0&&(M.checked=l[1]),o=new le({props:M}),W.push(()=>V(o,"checked",R)),o.$on("change",l[10]);let E=l[3]=="average_cars_per_household"&&Fr(l);function L(I){l[11](I)}let N={$$slots:{right:[mf],default:[uf]},$$scope:{ctx:l}};l[2]!==void 0&&(N.checked=l[2]),i=new le({props:N}),W.push(()=>V(i,"checked",L)),i.$on("change",l[12]);let P=l[3]=="population_density"&&Er(l);return m=new ye({props:{url:`pmtiles://${he()}/v1/${tt}.pmtiles`,$$slots:{default:[vf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),A&&A.c(),r=O(),b(o.$$.fragment),u=O(),E&&E.c(),a=O(),b(i.$$.fragment),c=O(),P&&P.c(),_=O(),b(m.$$.fragment)},m(I,j){v(e,I,j),$(I,t,j),A&&A.m(I,j),$(I,r,j),v(o,I,j),$(I,u,j),E&&E.m(I,j),$(I,a,j),v(i,I,j),$(I,c,j),P&&P.m(I,j),$(I,_,j),v(m,I,j),y=!0},p(I,[j]){const U={};j&65536&&(U.$$scope={dirty:j,ctx:I}),!n&&j&1&&(n=!0,U.checked=I[0],X(()=>n=!1)),e.$set(U),I[3]=="percent_households_with_car"?A?(A.p(I,j),j&8&&g(A,1)):(A=Pr(I),A.c(),g(A,1),A.m(r.parentNode,r)):A&&(ce(),d(A,1,1,()=>{A=null}),$e());const q={};j&65536&&(q.$$scope={dirty:j,ctx:I}),!s&&j&2&&(s=!0,q.checked=I[1],X(()=>s=!1)),o.$set(q),I[3]=="average_cars_per_household"?E?(E.p(I,j),j&8&&g(E,1)):(E=Fr(I),E.c(),g(E,1),E.m(a.parentNode,a)):E&&(ce(),d(E,1,1,()=>{E=null}),$e());const D={};j&65536&&(D.$$scope={dirty:j,ctx:I}),!f&&j&4&&(f=!0,D.checked=I[2],X(()=>f=!1)),i.$set(D),I[3]=="population_density"?P?(P.p(I,j),j&8&&g(P,1)):(P=Er(I),P.c(),g(P,1),P.m(_.parentNode,_)):P&&(ce(),d(P,1,1,()=>{P=null}),$e());const F={};j&65544&&(F.$$scope={dirty:j,ctx:I}),m.$set(F)},i(I){y||(g(e.$$.fragment,I),g(A),g(o.$$.fragment,I),g(E),g(i.$$.fragment,I),g(P),g(m.$$.fragment,I),y=!0)},o(I){d(e.$$.fragment,I),d(A),d(o.$$.fragment,I),d(E),d(i.$$.fragment,I),d(P),d(m.$$.fragment,I),y=!1},d(I){I&&(p(t),p(r),p(u),p(a),p(c),p(_)),w(e,I),A&&A.d(I),w(o,I),E&&E.d(I),w(i,I),P&&P.d(I),w(m,I)}}}let tt="census_output_areas";const kf=l=>l.toLocaleString();function yf(l,e,n){let t=Z.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function a(S){let A=S.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${A}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${A}`,"_blank")}function i(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(S){r=S,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function _(S){o=S,n(1,o)}const m=()=>{n(0,r=!1),n(2,s=!1)};function y(S){s=S,n(2,s)}const C=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,a,i,f,c,_,m,y,C]}class Sf extends Y{constructor(e){super(),K(this,e,yf,wf,J,{})}}function Cf(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Q,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Tf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Of(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Tf]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of December 2022."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Lf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Of]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Af(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function If(l){let e,n;return e=new fe({props:{$$slots:{default:[Af,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Nf(l){let e,n,t,r;const o=[H(Pt),{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[If]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s}),e.$on("click",Pf);const u=[H(`${Pt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&3?ne(o,[f&0&&ae(H(Pt)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(H(`${Pt}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Mf(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[Lf],default:[Cf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new yt({props:{data:`${he()}/v1/${Pt}.geojson`,$$slots:{default:[Nf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Pt="combined_authorities";function Pf(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ff(l,e,n){let t=Z.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ef extends Y{constructor(e){super(),K(this,e,Ff,Mf,J,{})}}function Df(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jf(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rf(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bf(l){let e,n,t,r,o,s,u,a,i;return t=new te({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[jf]},$$scope:{ctx:l}}}),o=new te({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Rf]},$$scope:{ctx:l}}}),a=new je({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){i||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(a,f)}}}function zf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Bf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Dr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hf(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,a,i,f,c,_=l[4].rank.toLocaleString()+"",m,y;return{c(){e=T("p"),t=k(n),r=k(` has an IMD score of
        `),o=T("b"),u=k(s),a=O(),i=T("p"),f=k("Rank: "),c=T("b"),m=k(_),y=k(`
        / 32,844 LSOAs`)},m(C,S){$(C,e,S),h(e,t),h(e,r),h(e,o),h(o,u),$(C,a,S),$(C,i,S),h(i,f),h(i,c),h(c,m),h(i,y)},p(C,S){S&16&&n!==(n=C[4].LSOA11CD+"")&&B(t,n),S&16&&s!==(s=C[4].score+"")&&B(u,s),S&16&&_!==(_=C[4].rank.toLocaleString()+"")&&B(m,_)},d(C){C&&(p(e),p(a),p(i))}}}function qf(l){let e,n;return e=new fe({props:{$$slots:{default:[Hf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gf(l){let e,n,t,r;const o=[H(nt),{sourceLayer:nt},{paint:{"fill-color":Le(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":x(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[qf]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s});const u=[H(`${nt}-outline`),{sourceLayer:nt},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&7?ne(o,[f&0&&ae(H(nt)),f&0&&{sourceLayer:nt},f&6&&{paint:{"fill-color":Le(["-",10,["get","decile"]],i[2],i[1]),"fill-opacity":x(.5,.7)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&1?ne(u,[f&0&&ae(H(`${nt}-outline`)),f&0&&{sourceLayer:nt},u[2],f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Uf(l){let e,n,t,r,o,s;function u(f){l[3](f)}let a={$$slots:{right:[zf],default:[Df]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&Dr(l);return o=new ye({props:{url:`pmtiles://${he()}/v1/${nt}.pmtiles`,$$slots:{default:[Gf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=Dr(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let nt="imd";function Wf(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Vf extends Y{constructor(e){super(),K(this,e,Wf,Uf,J,{})}}function Xf(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Q,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Jf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yf(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Jf]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of January 2024."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Kf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Yf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Zf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Qf(l){let e,n;return e=new fe({props:{$$slots:{default:[Zf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xf(l){let e,n,t,r;const o=[H(Ft),{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Qf]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s}),e.$on("click",tu);const u=[H(`${Ft}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&3?ne(o,[f&0&&ae(H(Ft)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(H(`${Ft}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function eu(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[Kf],default:[Xf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new yt({props:{data:`${he()}/v1/${Ft}.geojson`,$$slots:{default:[xf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Ft="local_authority_districts";function tu(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function nu(l,e,n){let t=Z.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class ru extends Y{constructor(e){super(),K(this,e,nu,eu,J,{})}}function lu(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Q,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function ou(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function su(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function au(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fu(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uu(l){let e,n,t,r,o,s,u,a,i,f,c,_,m,y,C,S,A,R,M,E,L,N;return t=new te({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ou]},$$scope:{ctx:l}}}),o=new te({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[su]},$$scope:{ctx:l}}}),u=new te({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[iu]},$$scope:{ctx:l}}}),m=new te({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[au]},$$scope:{ctx:l}}}),R=new te({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[fu]},$$scope:{ctx:l}}}),L=new je({}),{c(){e=T("p"),n=k("LPAs may be a "),b(t.$$.fragment),r=k(", "),b(o.$$.fragment),s=k("y, or "),b(u.$$.fragment),a=k("."),i=O(),f=T("p"),c=T("strong"),_=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(m.$$.fragment),y=k(" to get more details."),C=O(),S=T("p"),A=k("Data from ONS Geography via "),b(R.$$.fragment),M=k(", as of November 2022."),E=O(),b(L.$$.fragment)},m(P,I){$(P,e,I),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),v(u,e,null),h(e,a),$(P,i,I),$(P,f,I),h(f,c),h(c,_),v(m,c,null),h(c,y),$(P,C,I),$(P,S,I),h(S,A),v(R,S,null),h(S,M),$(P,E,I),v(L,P,I),N=!0},p(P,I){const j={};I&16&&(j.$$scope={dirty:I,ctx:P}),t.$set(j);const U={};I&16&&(U.$$scope={dirty:I,ctx:P}),o.$set(U);const q={};I&16&&(q.$$scope={dirty:I,ctx:P}),u.$set(q);const D={};I&16&&(D.$$scope={dirty:I,ctx:P}),m.$set(D);const F={};I&16&&(F.$$scope={dirty:I,ctx:P}),R.$set(F)},i(P){N||(g(t.$$.fragment,P),g(o.$$.fragment,P),g(u.$$.fragment,P),g(m.$$.fragment,P),g(R.$$.fragment,P),g(L.$$.fragment,P),N=!0)},o(P){d(t.$$.fragment,P),d(o.$$.fragment,P),d(u.$$.fragment,P),d(m.$$.fragment,P),d(R.$$.fragment,P),d(L.$$.fragment,P),N=!1},d(P){P&&(p(e),p(i),p(f),p(C),p(S),p(E)),w(t),w(o),w(u),w(m),w(R),w(L,P)}}}function cu(l){let e,n,t;return n=new me({props:{$$slots:{default:[uu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function $u(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function pu(l){let e,n;return e=new fe({props:{$$slots:{default:[$u,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mu(l){let e,n,t,r;const o=[H(rt),{sourceLayer:rt},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[pu]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s});const u=[H(`${rt}-outline`),{sourceLayer:rt},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&3?ne(o,[f&0&&ae(H(rt)),f&0&&{sourceLayer:rt},f&2&&{paint:{"fill-color":i[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(H(`${rt}-outline`)),f&0&&{sourceLayer:rt},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function _u(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[cu],default:[lu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${he()}/v1/${rt}.pmtiles`,$$slots:{default:[mu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let rt="local_planning_authorities";function gu(l,e,n){let t=Z.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class du extends Y{constructor(e){super(),K(this,e,gu,_u,J,{})}}function hu(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Q,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function bu(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vu(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[bu]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function wu(l){let e,n,t;return n=new me({props:{$$slots:{default:[vu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ku(l){let e,n=l[3].Name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&B(t,n)},d(r){r&&p(e)}}}function yu(l){let e,n;return e=new fe({props:{$$slots:{default:[ku,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Su(l){let e,n,t,r;const o=[H(lt),{sourceLayer:lt},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[yu]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s}),e.$on("click",Tu);const u=[H(`${lt}-outline`),{sourceLayer:lt},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&3?ne(o,[f&0&&ae(H(lt)),f&0&&{sourceLayer:lt},f&2&&{paint:{"fill-color":i[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(H(`${lt}-outline`)),f&0&&{sourceLayer:lt},f&2&&{paint:{"line-color":i[1],"line-width":5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Cu(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[wu],default:[hu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${he()}/v1/${lt}.pmtiles`,$$slots:{default:[Su]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let lt="parliamentary_constituencies";function Tu(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ou(l,e,n){let t=Z.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Lu extends Y{constructor(e){super(),K(this,e,Ou,Cu,J,{})}}function Au(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Iu(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nu(l){let e,n,t,r,o,s,u,a,i;return t=new te({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Iu]},$$scope:{ctx:l}}}),a=new je({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        Âµgm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),h(e,o),h(e,s),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){i||(g(t.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(a,f)}}}function Mu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Nu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function jr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,a,i,f,c,_,m,y,C,S,A,R;function M(L){l[7](L)}let E={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return l[0]!==void 0&&(E.value=l[0]),e=new _t({props:E}),W.push(()=>V(e,"value",M)),{c(){b(e.$$.fragment),t=O(),r=T("p"),s=k(o),u=O(),a=T("div"),i=T("label"),f=k(`Opacity
      `),c=T("input"),_=O(),m=T("img"),G(c,"type","range"),G(c,"min","0"),G(c,"max","100"),Tt(m.src,y=l[5](l[0]))||G(m,"src",y),G(m,"width",150),G(m,"alt",C=`Legend for ${l[0]} layer`)},m(L,N){v(e,L,N),$(L,t,N),$(L,r,N),h(r,s),$(L,u,N),$(L,a,N),h(a,i),h(i,f),h(i,c),Ye(c,l[2]),$(L,_,N),$(L,m,N),S=!0,A||(R=[Ze(c,"change",l[8]),Ze(c,"input",l[8])],A=!0)},p(L,N){const P={};!n&&N&1&&(n=!0,P.value=L[0],X(()=>n=!1)),e.$set(P),(!S||N&1)&&o!==(o=L[3](L[0])+"")&&B(s,o),N&4&&Ye(c,L[2]),(!S||N&1&&!Tt(m.src,y=L[5](L[0])))&&G(m,"src",y),(!S||N&1&&C!==(C=`Legend for ${L[0]} layer`))&&G(m,"alt",C)},i(L){S||(g(e.$$.fragment,L),S=!0)},o(L){d(e.$$.fragment,L),S=!1},d(L){L&&(p(t),p(r),p(u),p(a),p(_),p(m)),w(e,L),A=!1,eo(R)}}}function Pu(l){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Go({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&6?ne(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Fu(l){let e,n,t,r,o,s;function u(f){l[6](f)}let a={$$slots:{right:[Mu],default:[Au]},$$scope:{ctx:l}};l[1]!==void 0&&(a.checked=l[1]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[1]&&jr(l);return o=new us({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Pu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?i?(i.p(f,c),c&2&&g(i,1)):(i=jr(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&1&&(m.tiles=[f[4](f[0])]),c&2054&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}function Eu(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function a(y){return t[1]}function i(y){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${C}`}function f(y){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${C}`}function c(y){r=y,n(1,r)}function _(y){s=y,n(0,s)}function m(){o=xt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s])},[s,r,o,a,i,f,c,_,m]}class Du extends Y{constructor(e){super(),K(this,e,Eu,Fu,J,{})}}function ju(l){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ru(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bu(l){let e,n,t,r,o,s,u,a,i;return o=new te({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Ru]},$$scope:{ctx:l}}}),a=new je({}),{c(){e=T("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=O(),t=T("p"),r=k("Data from June 2019, produced by "),b(o.$$.fragment),s=k(". See there for methodology details"),u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(g(o.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(o.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(a,f)}}}function zu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Bu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Rr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hu(l){let e,n=l[3].noiseclass+"",t,r,o=Br(l[3].noiseclass)+"",s,u;return{c(){e=T("p"),t=k(n),r=k(" dB ("),s=k(o),u=k(")")},m(a,i){$(a,e,i),h(e,t),h(e,r),h(e,s),h(e,u)},p(a,i){i&8&&n!==(n=a[3].noiseclass+"")&&B(t,n),i&8&&o!==(o=Br(a[3].noiseclass)+"")&&B(s,o)},d(a){a&&p(e)}}}function qu(l){let e,n;return e=new fe({props:{$$slots:{default:[Hu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gu(l){let e,n;const t=[H(Et),{sourceLayer:Et},{paint:{"fill-color":$t(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][0],"65.0-69.9":l[1][1],"70.0-74.9":l[1][1],">=75.0":l[1][2]},"red"),"fill-opacity":x(.5,.8)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[qu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(H(Et)),s&0&&{sourceLayer:Et},s&2&&{paint:{"fill-color":$t(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":x(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Uu(l){let e,n,t,r,o,s;function u(f){l[2](f)}let a={$$slots:{right:[zu],default:[ju]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&Rr(l);return o=new ye({props:{url:`pmtiles://${he()}/v1/${Et}.pmtiles`,$$slots:{default:[Gu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=Rr(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&17&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Et="road_noise";function Br(l){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[l]}function Wu(l,e,n){let t=[Z.sequential_low_to_high[0],Z.sequential_low_to_high[2],Z.sequential_low_to_high[4]],r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Vu extends Y{constructor(e){super(),K(this,e,Wu,Uu,J,{})}}function Xu(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Q,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Ju(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yu(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ju]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Ku(l){let e,n,t;return n=new me({props:{$$slots:{default:[Yu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Zu(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Qu(l){let e,n;return e=new fe({props:{$$slots:{default:[Zu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xu(l){let e,n,t,r;const o=[H(ot),{sourceLayer:ot},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Qu]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s}),e.$on("click",tc);const u=[H(`${ot}-outline`),{sourceLayer:ot},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&3?ne(o,[f&0&&ae(H(ot)),f&0&&{sourceLayer:ot},f&2&&{paint:{"fill-color":i[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(H(`${ot}-outline`)),f&0&&{sourceLayer:ot},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function ec(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[Ku],default:[Xu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${he()}/v1/${ot}.pmtiles`,$$slots:{default:[xu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let ot="wards";function tc(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function nc(l,e,n){let t=Z.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class rc extends Y{constructor(e){super(),K(this,e,nc,ec,J,{})}}function lc(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oc(l){let e,n,t,r;return t=new te({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[lc]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&p(e),w(t)}}}class et extends Y{constructor(e){super(),K(this,e,null,oc,J,{})}}function sc(l){let e,n,t;return e=new Pe({props:{color:Z.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Q,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function ic(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ac(l){let e,n,t,r,o,s,u,a,i;return o=new te({props:{href:"https://gtfs.org",$$slots:{default:[ic]},$$scope:{ctx:l}}}),a=new et({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=T("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(g(o.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(o.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(a,f)}}}function fc(l){let e,n,t;return n=new me({props:{$$slots:{default:[ac]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function uc(l){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cc(l){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $c(l){let e;function n(o,s){return o[2].has_bus_lane?cc:uc}let t=n(l),r=t(l);return{c(){r.c(),e=Me()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function pc(l){let e,n;return e=new fe({props:{$$slots:{default:[$c,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mc(l){let e,n;const t=[H(Dt),{sourceLayer:Dt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[pc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(H(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function _c(l){let e,n,t,r,o;function s(a){l[1](a)}let u={$$slots:{right:[fc],default:[sc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${he()}/v1/${Dt}.pmtiles`,$$slots:{default:[mc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&8&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&9&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Dt="bus_routes";function gc(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class dc extends Y{constructor(e){super(),K(this,e,gc,_c,J,{})}}function zr(l){const e=Oc(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function Hr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function hc(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bc(l){let e,n,t,r,o,s,u,a;return u=new et({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=O(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=O(),b(u.$$.fragment)},m(i,f){$(i,e,f),$(i,n,f),$(i,t,f),$(i,r,f),$(i,o,f),$(i,s,f),v(u,i,f),a=!0},p:Q,i(i){a||(g(u.$$.fragment,i),a=!0)},o(i){d(u.$$.fragment,i),a=!1},d(i){i&&(p(e),p(n),p(t),p(r),p(o),p(s)),w(u,i)}}}function vc(l){let e,n,t;return n=new me({props:{$$slots:{default:[bc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function qr(l){let e,n,t;return n=new xe({props:{$$slots:{default:[kc]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),ke(e,"border","1px solid black"),ke(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function wc(l){let e,n,t=l[9]+"",r,o,s;return e=new Pe({props:{color:l[10]}}),{c(){b(e.$$.fragment),n=O(),r=k(t),o=O()},m(u,a){v(e,u,a),$(u,n,a),$(u,r,a),$(u,o,a),s=!0},p:Q,i(u){s||(g(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function Gr(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[wc]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){l=s;const a={};u&8192&&(a.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,a.checked=l[1][l[6]],X(()=>n=!1)),e.$set(a)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function kc(l){let e,n,t=De(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Gr(Hr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Me()},m(s,u){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=De(s[2]);let a;for(a=0;a<t.length;a+=1){const i=Hr(s,t,a);r[a]?(r[a].p(i,u),g(r[a],1)):(r[a]=Gr(i),r[a].c(),g(r[a],1),r[a].m(e.parentNode,e))}for(ce(),a=t.length;a<r.length;a+=1)o(a);$e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)g(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),ct(r,s)}}}function yc(l){zr(l);let e,n=l[6]+"",t,r,o,s,u,a=l[7]+"",i,f,c,_,m=l[8]+"",y;return{c(){e=T("h2"),t=k(n),r=O(),o=T("p"),s=k("Direction: "),u=T("b"),i=O(),f=T("p"),c=k("Width: "),_=T("b"),y=k(m)},m(C,S){$(C,e,S),h(e,t),$(C,r,S),$(C,o,S),h(o,s),h(o,u),u.innerHTML=a,$(C,i,S),$(C,f,S),h(f,c),h(f,_),h(_,y)},p(C,S){zr(C),S&32&&n!==(n=C[6]+"")&&B(t,n),S&32&&a!==(a=C[7]+"")&&(u.innerHTML=a),S&32&&m!==(m=C[8]+"")&&B(y,m)},d(C){C&&(p(e),p(r),p(o),p(i),p(f))}}}function Sc(l){let e,n;return e=new fe({props:{$$slots:{default:[yc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Cc(l){let e,n;const t=[H(jt),{sourceLayer:jt},{paint:{"line-color":$t(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Ur(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[Sc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),e.$on("click",Lc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(H(jt)),s&0&&{sourceLayer:jt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Ur(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Tc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let a={$$slots:{right:[vc],default:[hc]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&qr(l);return o=new ye({props:{url:`pmtiles://${he()}/v1/${jt}.pmtiles`,$$slots:{default:[Cc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&8192&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=qr(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&8195&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let jt="cycle_paths";function Oc(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function Lc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Ur(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function Ac(l,e,n){let t=[["track","Separated tracks",Z.cycle_paths.track],["lane","Unprotected lanes",Z.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(a){r=a,n(0,r)}function u(a,i){l.$$.not_equal(o[i],a)&&(o[i]=a,n(1,o))}return[r,o,t,s,u]}class Ic extends Y{constructor(e){super(),K(this,e,Ac,Tc,J,{})}}function Nc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Q,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Mc(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pc(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Mc]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),r=k(", as of September 2021."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Fc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Pc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Ec(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function Dc(l){let e,n;return e=new fe({props:{$$slots:{default:[Ec,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function jc(l){let e,n;const t=[H(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Dc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(H(Rt)),s&0&&{sourceLayer:Rt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Rc(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[Fc],default:[Nc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${he()}/v1/${Rt}.pmtiles`,$$slots:{default:[jc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Rt="mrn";function Bc(l,e,n){let t=Z.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class zc extends Y{constructor(e){super(),K(this,e,Bc,Rc,J,{})}}function Hc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Strategic Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Q,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function qc(l){let e;return{c(){e=k(`OS Open Roads
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gc(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[qc]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Uc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Gc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Wc(l){let e,n=(l[3].name??"Unknown SRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown SRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function Vc(l){let e,n;return e=new fe({props:{$$slots:{default:[Wc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Xc(l){let e,n;const t=[H(Bt),{sourceLayer:Bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Vc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(H(Bt)),s&0&&{sourceLayer:Bt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Jc(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[Uc],default:[Hc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${he()}/v1/${Bt}.pmtiles`,$$slots:{default:[Xc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Bt="srn";function Yc(l,e,n){let t=Z.srn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Kc extends Y{constructor(e){super(),K(this,e,Yc,Jc,J,{})}}function Zc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Q,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Qc(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xc(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Qc]},$$scope:{ctx:l}}}),s=new je({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function e$(l){let e,n,t;return n=new me({props:{$$slots:{default:[xc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Wr(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&B(o,r)},d(s){s&&p(e)}}}function Vr(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&B(o,r)},d(s){s&&p(e)}}}function Xr(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&B(o,r)},d(s){s&&p(e)}}}function Jr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&B(o,r)},d(s){s&&p(e)}}}function Yr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&B(o,r)},d(s){s&&p(e)}}}function Kr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&B(o,r)},d(s){s&&p(e)}}}function Zr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&B(o,r)},d(s){s&&p(e)}}}function Qr(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&B(o,r)},d(s){s&&p(e)}}}function xr(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&B(o,r)},d(s){s&&p(e)}}}function t$(l){let e,n,t,r,o,s,u,a,i,f=l[3].Desc_&&Wr(l),c=l[3].Greenway&&Vr(l),_=l[3].RouteType&&Xr(l),m=l[3].RouteNo&&Jr(l),y=l[3].RouteCat&&Yr(l),C=l[3].OpenStatus&&Kr(l),S=l[3].Surface&&Zr(l),A=l[3].Quality&&Qr(l),R=l[3].RoadClass&&xr(l);return{c(){e=T("ul"),f&&f.c(),n=O(),c&&c.c(),t=O(),_&&_.c(),r=O(),m&&m.c(),o=O(),y&&y.c(),s=O(),C&&C.c(),u=O(),S&&S.c(),a=O(),A&&A.c(),i=O(),R&&R.c()},m(M,E){$(M,e,E),f&&f.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),_&&_.m(e,null),h(e,r),m&&m.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),C&&C.m(e,null),h(e,u),S&&S.m(e,null),h(e,a),A&&A.m(e,null),h(e,i),R&&R.m(e,null)},p(M,E){M[3].Desc_?f?f.p(M,E):(f=Wr(M),f.c(),f.m(e,n)):f&&(f.d(1),f=null),M[3].Greenway?c?c.p(M,E):(c=Vr(M),c.c(),c.m(e,t)):c&&(c.d(1),c=null),M[3].RouteType?_?_.p(M,E):(_=Xr(M),_.c(),_.m(e,r)):_&&(_.d(1),_=null),M[3].RouteNo?m?m.p(M,E):(m=Jr(M),m.c(),m.m(e,o)):m&&(m.d(1),m=null),M[3].RouteCat?y?y.p(M,E):(y=Yr(M),y.c(),y.m(e,s)):y&&(y.d(1),y=null),M[3].OpenStatus?C?C.p(M,E):(C=Kr(M),C.c(),C.m(e,u)):C&&(C.d(1),C=null),M[3].Surface?S?S.p(M,E):(S=Zr(M),S.c(),S.m(e,a)):S&&(S.d(1),S=null),M[3].Quality?A?A.p(M,E):(A=Qr(M),A.c(),A.m(e,i)):A&&(A.d(1),A=null),M[3].RoadClass?R?R.p(M,E):(R=xr(M),R.c(),R.m(e,null)):R&&(R.d(1),R=null)},d(M){M&&p(e),f&&f.d(),c&&c.d(),_&&_.d(),m&&m.d(),y&&y.d(),C&&C.d(),S&&S.d(),A&&A.d(),R&&R.d()}}}function n$(l){let e,n;return e=new fe({props:{$$slots:{default:[t$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function r$(l){let e,n;const t=[H(zt),{sourceLayer:zt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[n$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(H(zt)),s&0&&{sourceLayer:zt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function l$(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[e$],default:[Zc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${he()}/v1/${zt}.pmtiles`,$$slots:{default:[r$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let zt="national_cycle_network";function o$(l,e,n){let t=Z.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class s$ extends Y{constructor(e){super(),K(this,e,o$,l$,J,{})}}function el(l,e,n){const t=l.slice();return t[5]=e[n][0],t[6]=e[n][1],t[7]=e[n][2],t}function i$(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function a$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function f$(l){let e,n,t,r,o,s,u,a,i,f,c;return i=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[a$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,n=O(),t=T("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,r=O(),o=T("p"),o.textContent="Data valid as of 1 January, 2024",s=O(),u=T("p"),a=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(i.$$.fragment),f=k(".")},m(_,m){$(_,e,m),$(_,n,m),$(_,t,m),$(_,r,m),$(_,o,m),$(_,s,m),$(_,u,m),h(u,a),v(i,u,null),h(u,f),c=!0},p(_,m){const y={};m&1024&&(y.$$scope={dirty:m,ctx:_}),i.$set(y)},i(_){c||(g(i.$$.fragment,_),c=!0)},o(_){d(i.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(r),p(o),p(s),p(u)),w(i)}}}function u$(l){let e,n,t;return n=new me({props:{$$slots:{default:[f$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function tl(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function c$(l){let e,n,t=cn(l[4].angle+l[7])+"",r;return{c(){e=T("p"),n=new dt(!1),r=k(` side of the road: no pavement
          `),n.a=r},m(o,s){$(o,e,s),n.m(t,e),h(e,r)},p(o,s){s&16&&t!==(t=cn(o[4].angle+o[7])+"")&&n.p(t)},d(o){o&&p(e)}}}function $$(l){let e,n,t=cn(l[4].angle+l[7])+"",r,o,s=l[5]+"",u,a,i,f=l[6]+"",c,_;return{c(){e=T("p"),n=new dt(!1),r=k(` side of the road:
            `),o=T("b"),u=k(s),a=k(`
            m average,
            `),i=T("b"),c=k(f),_=k(`
            m minimum
          `),n.a=r},m(m,y){$(m,e,y),n.m(t,e),h(e,r),h(e,o),h(o,u),h(e,a),h(e,i),h(i,c),h(e,_)},p(m,y){y&16&&t!==(t=cn(m[4].angle+m[7])+"")&&n.p(t),y&16&&s!==(s=m[5]+"")&&B(u,s),y&16&&f!==(f=m[6]+"")&&B(c,f)},d(m){m&&p(e)}}}function nl(l){let e;function n(o,s){return o[5]?$$:c$}let t=n(l),r=t(l);return{c(){r.c(),e=Me()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function p$(l){let e,n=De([[l[4].left_average,l[4].left_minimum,-90],[l[4].right_average,l[4].right_minimum,90]]),t=[];for(let r=0;r<2;r+=1)t[r]=nl(el(l,n,r));return{c(){for(let r=0;r<2;r+=1)t[r].c();e=Me()},m(r,o){for(let s=0;s<2;s+=1)t[s]&&t[s].m(r,o);$(r,e,o)},p(r,o){if(o&16){n=De([[r[4].left_average,r[4].left_minimum,-90],[r[4].right_average,r[4].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const u=el(r,n,s);t[s]?t[s].p(u,o):(t[s]=nl(u),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(r){r&&p(e),ct(t,r)}}}function m$(l){let e,n;return e=new fe({props:{openOn:"hover",$$slots:{default:[p$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1040&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _$(l){let e,n;const t=[H(Ht),{sourceLayer:Ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],l[2],l[1]),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[m$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(H(Ht)),s&0&&{sourceLayer:Ht},t[2],t[3],s&6&&{paint:{"line-color":Le(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":ze,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function g$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let a={$$slots:{right:[u$],default:[i$]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&tl(l);return o=new ye({props:{url:`pmtiles://${$n()}/v1/${Ht}.pmtiles`,$$slots:{default:[_$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&1024&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=tl(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&1025&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Ht="pavement_widths";function d$(l){let e=Math.floor((l+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function cn(l){return`${d$(l)} <span style="display: inline-block; rotate: ${l}deg">â¬†</span>`}function h$(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class b$ extends Y{constructor(e){super(),K(this,e,h$,g$,J,{})}}function v$(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function w$(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function k$(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function y$(l){let e,n,t,r,o,s,u,a,i,f,c;return u=new te({props:{href:"https://www.pct.bike",$$slots:{default:[w$]},$$scope:{ctx:l}}}),i=new te({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[k$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=O(),o=T("p"),s=k("See "),b(u.$$.fragment),a=k(" and "),b(i.$$.fragment),f=k(" for details on methodology and data sources.")},m(_,m){$(_,e,m),$(_,n,m),$(_,t,m),$(_,r,m),$(_,o,m),h(o,s),v(u,o,null),h(o,a),v(i,o,null),h(o,f),c=!0},p(_,m){const y={};m&1024&&(y.$$scope={dirty:m,ctx:_}),u.$set(y);const C={};m&1024&&(C.$$scope={dirty:m,ctx:_}),i.$set(C)},i(_){c||(g(u.$$.fragment,_),g(i.$$.fragment,_),c=!0)},o(_){d(u.$$.fragment,_),d(i.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(r),p(o)),w(u),w(i)}}}function S$(l){let e,n,t;return n=new me({props:{$$slots:{default:[y$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function rl(l){let e,n,t,r,o,s,u,a;e=new Ge({props:{colorScale:l[3],limits:l[4]}});function i(m){l[7](m)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new to({props:f}),W.push(()=>V(t,"value",i));function c(m){l[8](m)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(_.value=l[1]),s=new _t({props:_}),W.push(()=>V(s,"value",c)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,o,y),v(s,m,y),a=!0},p(m,y){const C={};!r&&y&1&&(r=!0,C.value=m[0],X(()=>r=!1)),t.$set(C);const S={};!u&&y&2&&(u=!0,S.value=m[1],X(()=>u=!1)),s.$set(S)},i(m){a||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(s.$$.fragment,m),a=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(s.$$.fragment,m),a=!1},d(m){m&&(p(n),p(o)),w(e,m),w(t,m),w(s,m)}}}function C$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new dt(!1),t=Me(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function T$(l){let e,n;return e=new fe({props:{$$slots:{default:[C$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function O$(l){let e,n;const t=[H(it),{sourceLayer:it},{paint:{"line-color":Le(["get",l[1]],l[4],l[3]),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[2]&&l[0]==it?"visible":"none"}}];let r={$$slots:{default:[T$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ae(H(it)),s&0&&{sourceLayer:it},s&26&&{paint:{"line-color":Le(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==it?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function L$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new dt(!1),t=Me(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function A$(l){let e,n;return e=new fe({props:{$$slots:{default:[L$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function I$(l){let e,n;const t=[H(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get",l[1]],l[4],l[3]),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[2]&&l[0]==mt?"visible":"none"}}];let r={$$slots:{default:[A$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ae(H(mt)),s&0&&{sourceLayer:mt},t[2],t[3],s&26&&{paint:{"line-color":Le(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==mt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function N$(l){let e,n,t,r,o,s,u,a;function i(_){l[6](_)}let f={$$slots:{right:[S$],default:[v$]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),W.push(()=>V(e,"checked",i));let c=l[2]&&rl(l);return o=new ye({props:{url:`pmtiles://${he()}/v1/${it}.pmtiles`,$$slots:{default:[O$]},$$scope:{ctx:l}}}),u=new ye({props:{url:`pmtiles://${he()}/v1/${mt}.pmtiles`,$$slots:{default:[I$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),c&&c.c(),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment)},m(_,m){v(e,_,m),$(_,t,m),c&&c.m(_,m),$(_,r,m),v(o,_,m),$(_,s,m),v(u,_,m),a=!0},p(_,[m]){const y={};m&1024&&(y.$$scope={dirty:m,ctx:_}),!n&&m&4&&(n=!0,y.checked=_[2],X(()=>n=!1)),e.$set(y),_[2]?c?(c.p(_,m),m&4&&g(c,1)):(c=rl(_),c.c(),g(c,1),c.m(r.parentNode,r)):c&&(ce(),d(c,1,1,()=>{c=null}),$e());const C={};m&1031&&(C.$$scope={dirty:m,ctx:_}),o.$set(C);const S={};m&1031&&(S.$$scope={dirty:m,ctx:_}),u.$set(S)},i(_){a||(g(e.$$.fragment,_),g(c),g(o.$$.fragment,_),g(u.$$.fragment,_),a=!0)},o(_){d(e.$$.fragment,_),d(c),d(o.$$.fragment,_),d(u.$$.fragment,_),a=!1},d(_){_&&(p(t),p(r),p(s)),w(e,_),c&&c.d(_),w(o,_),w(u,_)}}}let it="pct_commute",mt="pct_school";function M$(l,e,n){let t=Z.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=it,s="baseline",u=!1;function a(_){let m=_.baseline,y=_.gov_target,C=_.go_dutch,S=`<h2>Trip purpose: ${o==it?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let A=(y/m).toFixed(1),R=(C/m).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${A}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${R}x</b> of baseline)</p>`}return S}function i(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){s=_,n(1,s)}return[o,s,u,t,r,a,i,f,c]}class P$ extends Y{constructor(e){super(),K(this,e,M$,N$,J,{})}}function F$(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function E$(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function D$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function j$(l){let e,n,t,r,o,s,u,a,i,f,c,_;return t=new te({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[E$]},$$scope:{ctx:l}}}),f=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[D$]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",u=O(),a=T("p"),i=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),c=k(".")},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,r),$(m,o,y),$(m,s,y),$(m,u,y),$(m,a,y),h(a,i),v(f,a,null),h(a,c),_=!0},p(m,y){const C={};y&256&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&256&&(S.$$scope={dirty:y,ctx:m}),f.$set(S)},i(m){_||(g(t.$$.fragment,m),g(f.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(f.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(u),p(a)),w(t),w(f)}}}function R$(l){let e,n,t;return n=new me({props:{$$slots:{default:[j$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ll(l){let e,n,t,r,o;e=new Ge({props:{colorScale:l[2],limits:l[3]}});function s(a){l[6](a)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new to({props:u}),W.push(()=>V(t,"value",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,i){v(e,a,i),$(a,n,i),v(t,a,i),o=!0},p(a,i){const f={};!r&&i&1&&(r=!0,f.value=a[0],X(()=>r=!1)),t.$set(f)},i(a){o||(g(e.$$.fragment,a),g(t.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),o=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function B$(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,a,i=l[7].highest_mph+"",f,c,_=l[4][l[7].highest_description]+"",m,y;return{c(){e=T("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=O(),u=T("p"),a=k("Highest average speed: "),f=k(i),c=k(" mph (during "),m=k(_),y=k(")")},m(C,S){$(C,e,S),h(e,n),h(e,r),h(e,o),$(C,s,S),$(C,u,S),h(u,a),h(u,f),h(u,c),h(u,m),h(u,y)},p(C,S){S&128&&t!==(t=C[7].indicative_mph+"")&&B(r,t),S&128&&i!==(i=C[7].highest_mph+"")&&B(f,i),S&128&&_!==(_=C[4][C[7].highest_description]+"")&&B(m,_)},d(C){C&&(p(e),p(s),p(u))}}}function z$(l){let e,n;return e=new fe({props:{$$slots:{default:[B$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function H$(l){let e,n;const t=[H(qt),{sourceLayer:qt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get",l[0]],l[3],l[2]),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[z$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&15?ne(t,[s&0&&ae(H(qt)),s&0&&{sourceLayer:qt},t[2],t[3],s&13&&{paint:{"line-color":Le(["get",o[0]],o[3],o[2]),"line-width":ze,"line-opacity":x(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function q$(l){let e,n,t,r,o,s;function u(f){l[5](f)}let a={$$slots:{right:[R$],default:[F$]},$$scope:{ctx:l}};l[1]!==void 0&&(a.checked=l[1]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[1]&&ll(l);return o=new ye({props:{url:`pmtiles://${$n()}/v1/${qt}.pmtiles`,$$slots:{default:[H$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?i?(i.p(f,c),c&2&&g(i,1)):(i=ll(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&259&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let qt="road_speeds";function G$(l,e,n){let t=Z.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(f){s=f,n(1,s)}function i(f){o=f,n(0,o)}return[o,s,t,r,u,a,i]}class U$ extends Y{constructor(e){super(),K(this,e,G$,q$,J,{})}}function W$(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function V$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function X$(l){let e,n,t,r,o,s,u,a,i;return u=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[V$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",r=O(),o=T("p"),s=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),a=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),h(o,s),v(u,o,null),h(o,a),i=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){i||(g(u.$$.fragment,f),i=!0)},o(f){d(u.$$.fragment,f),i=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),w(u)}}}function J$(l){let e,n,t;return n=new me({props:{$$slots:{default:[X$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ol(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Y$(l){let e,n,t,r=l[4].average+"",o,s,u,a,i,f,c=l[4].minimum+"",_,m;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(r),s=k(`
        meters`),u=O(),a=T("p"),i=k("Minimum width: "),f=T("b"),_=k(c),m=k(`
        meters`)},m(y,C){$(y,e,C),h(e,n),h(e,t),h(t,o),h(e,s),$(y,u,C),$(y,a,C),h(a,i),h(a,f),h(f,_),h(a,m)},p(y,C){C&16&&r!==(r=y[4].average+"")&&B(o,r),C&16&&c!==(c=y[4].minimum+"")&&B(_,c)},d(y){y&&(p(e),p(u),p(a))}}}function K$(l){let e,n;return e=new fe({props:{$$slots:{default:[Y$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Z$(l){let e,n;const t=[H(Gt),{sourceLayer:Gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get","average"],l[2],l[1]),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[K$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(H(Gt)),s&0&&{sourceLayer:Gt},t[2],t[3],s&6&&{paint:{"line-color":Le(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Q$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let a={$$slots:{right:[J$],default:[W$]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&ol(l);return o=new ye({props:{url:`pmtiles://${$n()}/v1/${Gt}.pmtiles`,$$slots:{default:[Z$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=ol(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Gt="road_widths";function x$(l,e,n){let t=Z.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class ep extends Y{constructor(e){super(),K(this,e,x$,Q$,J,{})}}function tp(l){let e,n,t;return e=new Pe({props:{color:Z.trams}}),{c(){b(e.$$.fragment),n=k(`
  Trams`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Q,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function np(l){let e,n,t,r;return t=new et({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:Q,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function rp(l){let e,n,t;return n=new me({props:{$$slots:{default:[np]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function lp(l){let e,n;const t=[H(Ut),{sourceLayer:Ut},{paint:{"line-color":Z.trams,"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),e.$on("click",sp),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(H(Ut)),s&0&&{sourceLayer:Ut},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function op(l){let e,n,t,r,o;function s(a){l[1](a)}let u={$$slots:{right:[rp],default:[tp]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${he()}/v1/${Ut}.pmtiles`,$$slots:{default:[lp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&4&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&5&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Ut="trams";function sp(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function ip(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class ap extends Y{constructor(e){super(),K(this,e,ip,op,J,{})}}function fp(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function up(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cp(l){let e,n,t,r,o,s,u,a,i;return t=new te({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[up]},$$scope:{ctx:l}}}),a=new je({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=O(),s=T("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),$(f,o,c),$(f,s,c),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){i||(g(t.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(o),p(s),p(u)),w(t),w(a,f)}}}function $p(l){let e,n,t;return n=new me({props:{$$slots:{default:[cp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function sl(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:Q,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function pp(l){let e,n,t,r=l[4].stop_name+"",o,s,u,a,i,f=l[4].peak+"",c,_,m,y,C,S=l[4].peak_description+"",A,R,M,E,L,N=l[4].total+"",P,I,j=l[4].total_description+"",U,q;return{c(){e=T("p"),n=k("Stop name: "),t=T("b"),o=k(r),s=O(),u=T("p"),a=k("Peak: "),i=T("b"),c=k(f),_=k(`
        buses during the busiest hour of any day`),m=O(),y=T("p"),C=k("The peak hour is "),A=k(S),R=O(),M=T("p"),E=k("Total buses per day: "),L=T("b"),P=k(N),I=k(`
        (for `),U=k(j),q=k(", the busiest day of the week)")},m(D,F){$(D,e,F),h(e,n),h(e,t),h(t,o),$(D,s,F),$(D,u,F),h(u,a),h(u,i),h(i,c),h(u,_),$(D,m,F),$(D,y,F),h(y,C),h(y,A),$(D,R,F),$(D,M,F),h(M,E),h(M,L),h(L,P),h(M,I),h(M,U),h(M,q)},p(D,F){F&16&&r!==(r=D[4].stop_name+"")&&B(o,r),F&16&&f!==(f=D[4].peak+"")&&B(c,f),F&16&&S!==(S=D[4].peak_description+"")&&B(A,S),F&16&&N!==(N=D[4].total+"")&&B(P,N),F&16&&j!==(j=D[4].total_description+"")&&B(U,j)},d(D){D&&(p(e),p(s),p(u),p(m),p(y),p(R),p(M))}}}function mp(l){let e,n;return e=new fe({props:{$$slots:{default:[pp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _p(l){let e,n;const t=[H(Wt),{sourceLayer:Wt},{paint:{"circle-color":Le(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[mp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new pt({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(H(Wt)),s&0&&{sourceLayer:Wt},s&6&&{paint:{"circle-color":Le(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function gp(l){let e,n,t,r,o,s;function u(f){l[3](f)}let a={$$slots:{right:[$p],default:[fp]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&sl(l);return o=new ye({props:{url:`pmtiles://${he()}/v1/${Wt}.pmtiles`,$$slots:{default:[_p]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=sl(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Wt="bus_stops";function dp(l,e,n){let t=Z.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class hp extends Y{constructor(e){super(),K(this,e,dp,gp,J,{})}}function bp(l){let e,n,t;return{c(){e=T("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=Ze(e,"change",l[5]),n=!0)},p:Q,d(r){r&&p(e),l[7](null),n=!1,t()}}}function il(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[wp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vp(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Pe({props:{color:Vt}}),{c(){b(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(u,a){v(e,u,a),$(u,n,a),$(u,r,a),$(u,o,a),s=!0},p(u,a){(!s||a&4)&&t!==(t=u[2].toLocaleString()+"")&&B(r,t)},i(u){s||(g(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function wp(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[vp]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const a={};u&2052&&(a.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,a.checked=s[1],X(()=>n=!1)),e.$set(a)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function kp(l){let e,n,t,r,o,s;e=new Cn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[bp]},$$scope:{ctx:l}}}),t=new no({props:{errorMessage:l[3]}});let u=l[2]>0&&il(l);return{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),u&&u.c(),o=Me()},m(a,i){v(e,a,i),$(a,n,i),v(t,a,i),$(a,r,i),u&&u.m(a,i),$(a,o,i),s=!0},p(a,i){const f={};i&2049&&(f.$$scope={dirty:i,ctx:a}),e.$set(f);const c={};i&8&&(c.errorMessage=a[3]),t.$set(c),a[2]>0?u?(u.p(a,i),i&4&&g(u,1)):(u=il(a),u.c(),g(u,1),u.m(o.parentNode,o)):u&&(ce(),d(u,1,1,()=>{u=null}),$e())},i(a){s||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(u),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(u),s=!1},d(a){a&&(p(n),p(r),p(o)),w(e,a),w(t,a),u&&u.d(a)}}}function yp(l){let e,n,t=l[10].critical_type+"",r,o,s,u,a,i=l[10].location_description+"",f,c,_,m,y,C=l[10].notes+"",S,A,R,M,E,L,N,P=l[10].id+"",I,j,U,q,D,F=(l[10].inspector??"???")+"",z,oe,se,Se=l[10].submission_time+"",de,Ce,ie,Ne,Te,be=l[10].scheme_reference+"",re,pe,ge,ve=l[10].current_design_stage+"",_e;return{c(){e=T("div"),n=T("h2"),r=k(t),o=O(),s=T("p"),u=T("u"),u.textContent="Location",a=k(`
          : `),f=k(i),c=O(),_=T("p"),m=T("u"),m.textContent="Notes",y=k(`
          : `),S=k(C),A=O(),R=T("hr"),M=O(),E=T("p"),L=k("Critical issue ID: "),N=T("b"),I=k(P),j=O(),U=T("p"),q=k("Submitted by "),D=T("b"),z=k(F),oe=k(`
          at
          `),se=T("b"),de=k(Se),Ce=O(),ie=T("p"),Ne=k("For scheme "),Te=T("b"),re=k(be),pe=k(`
          in stage
          `),ge=T("b"),_e=k(ve),ke(e,"max-width","30vw")},m(Ie,Fe){$(Ie,e,Fe),h(e,n),h(n,r),h(e,o),h(e,s),h(s,u),h(s,a),h(s,f),h(e,c),h(e,_),h(_,m),h(_,y),h(_,S),h(e,A),h(e,R),h(e,M),h(e,E),h(E,L),h(E,N),h(N,I),h(e,j),h(e,U),h(U,q),h(U,D),h(D,z),h(U,oe),h(U,se),h(se,de),h(e,Ce),h(e,ie),h(ie,Ne),h(ie,Te),h(Te,re),h(ie,pe),h(ie,ge),h(ge,_e)},p(Ie,Fe){Fe&1024&&t!==(t=Ie[10].critical_type+"")&&B(r,t),Fe&1024&&i!==(i=Ie[10].location_description+"")&&B(f,i),Fe&1024&&C!==(C=Ie[10].notes+"")&&B(S,C),Fe&1024&&P!==(P=Ie[10].id+"")&&B(I,P),Fe&1024&&F!==(F=(Ie[10].inspector??"???")+"")&&B(z,F),Fe&1024&&Se!==(Se=Ie[10].submission_time+"")&&B(de,Se),Fe&1024&&be!==(be=Ie[10].scheme_reference+"")&&B(re,be),Fe&1024&&ve!==(ve=Ie[10].current_design_stage+"")&&B(_e,ve)},d(Ie){Ie&&p(e)}}}function Sp(l){let e,n;return e=new fe({props:{$$slots:{default:[yp,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Cp(l){let e,n,t,r,o,s;const u=[H("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":Vt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let a={};for(let m=0;m<u.length;m+=1)a=ee(a,u[m]);e=new pt({props:a}),e.$on("click",l[6]);const i=[H("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let m=0;m<i.length;m+=1)f=ee(f,i[m]);t=new pn({props:f});const c=[H("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Vt,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let _={$$slots:{default:[Sp]},$$scope:{ctx:l}};for(let m=0;m<c.length;m+=1)_=ee(_,c[m]);return o=new pt({props:_}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,r,y),v(o,m,y),s=!0},p(m,y){const C=y&2?ne(u,[u[0],u[1],y&0&&{paint:{"circle-color":Vt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:m[1]?"visible":"none"}},u[4]]):{};e.$set(C);const S=y&2?ne(i,[i[0],i[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:m[1]?"visible":"none"}}]):{};t.$set(S);const A=y&2?ne(c,[c[0],c[1],c[2],c[3],y&0&&{paint:{"circle-color":Vt,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:m[1]?"visible":"none"}}]):{};y&2048&&(A.$$scope={dirty:y,ctx:m}),o.$set(A)},i(m){s||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),s=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),s=!1},d(m){m&&(p(n),p(r)),w(e,m),w(t,m),w(o,m)}}}function Tp(l){let e,n,t,r;return e=new He({props:{label:"Critical Issues",$$slots:{default:[kp]},$$scope:{ctx:l}}}),t=new yt({props:{id:So,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Cp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const a={};s&16&&(a.data=o[4]),s&2050&&(a.$$scope={dirty:s,ctx:o}),t.$set(a)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let So="criticals",Vt="red";function Op(l,e,n){let t;Ae(l,jn,m=>n(9,t=m));let r,o=!0,s=0,u="",a=yn();async function i(m){try{n(4,a=await La(r.files[0])),n(2,s=a.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}async function f(m){let y=await t.getSource(So).getClusterExpansionZoom(m.detail.features[0].properties.cluster_id);t.easeTo({center:m.detail.features[0].geometry.coordinates,zoom:y})}function c(m){W[m?"unshift":"push"](()=>{r=m,n(0,r)})}function _(m){o=m,n(1,o)}return[r,o,s,u,a,i,f,c,_]}class Lp extends Y{constructor(e){super(),K(this,e,Op,Tp,J,{})}}function Ap(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ip(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Np(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Ip]},$$scope:{ctx:l}}}),s=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Mp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Np]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function al(l){let e,n;return e=new Bn({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Pp(l){let e,n=fl(l[3])+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=fl(r[3])+"")&&B(t,n)},d(r){r&&p(e)}}}function Fp(l){let e,n;return e=new fe({props:{$$slots:{default:[Pp,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ep(l){let e,n;const t=[H(Xt),{sourceLayer:Xt},{paint:{"circle-color":$t(["get","crossing"],{traffic_signals:Z.signalized_crossing},Z.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Fp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new pt({props:r}),e.$on("click",jp),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(H(Xt)),s&0&&{sourceLayer:Xt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Dp(l){let e,n,t,r,o,s;function u(f){l[2](f)}let a={$$slots:{right:[Mp],default:[Ap]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&al(l);return o=new ye({props:{url:`pmtiles://${he()}/v1/${Xt}.pmtiles`,$$slots:{default:[Ep]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=al(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&17&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Xt="crossings";function fl(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function jp(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function Rp(l,e,n){let t=!1,r=[["Signalized",Z.signalized_crossing],["Other",Z.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class Bp extends Y{constructor(e){super(),K(this,e,Rp,Dp,J,{})}}function zp(l){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hp(l){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qp(l){let e,n,t,r,o,s,u,a,i,f,c,_,m;return u=new te({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Hp]},$$scope:{ctx:l}}}),f=new je({}),_=new et({}),{c(){e=T("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=O(),t=T("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=O(),o=T("p"),s=k("This layer is built from "),b(u.$$.fragment),a=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),i=O(),b(f.$$.fragment),c=O(),b(_.$$.fragment)},m(y,C){$(y,e,C),$(y,n,C),$(y,t,C),$(y,r,C),$(y,o,C),h(o,s),v(u,o,null),h(o,a),$(y,i,C),v(f,y,C),$(y,c,C),v(_,y,C),m=!0},p(y,C){const S={};C&32&&(S.$$scope={dirty:C,ctx:y}),u.$set(S)},i(y){m||(g(u.$$.fragment,y),g(f.$$.fragment,y),g(_.$$.fragment,y),m=!0)},o(y){d(u.$$.fragment,y),d(f.$$.fragment,y),d(_.$$.fragment,y),m=!1},d(y){y&&(p(e),p(n),p(t),p(r),p(o),p(i),p(c)),w(u),w(f,y),w(_,y)}}}function Gp(l){let e,n,t;return n=new me({props:{$$slots:{default:[qp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ul(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Up(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=T("p"),n=k("Gradient: "),t=T("b"),o=k(r),s=k(`
        %`)},m(u,a){$(u,e,a),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,a){a&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&B(o,r)},d(u){u&&p(e)}}}function Wp(l){let e,n;return e=new fe({props:{$$slots:{default:[Up,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Vp(l){let e,n,t,r;const o=[H(st),{sourceLayer:st},{manageHoverState:!0},{paint:{"line-color":Le(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[Wp]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new Oe({props:s});const u=[H(st+"_arrows"),{sourceLayer:st},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new pn({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&7?ne(o,[f&0&&ae(H(st)),f&0&&{sourceLayer:st},o[2],f&6&&{paint:{"line-color":Le(["/",["abs",["get","gradient"]],100],i[2],i[1]),"line-width":ze,"line-opacity":x(1,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&1?ne(u,[f&0&&ae(H(st+"_arrows")),f&0&&{sourceLayer:st},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Xp(l){let e,n,t,r,o,s;function u(f){l[3](f)}let a={$$slots:{right:[Gp],default:[zp]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&ul(l);return o=new ye({props:{url:`pmtiles://${he()}/v1/${st}.pmtiles`,$$slots:{default:[Vp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=ul(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let st="gradient";function Jp(l,e,n){let t=Z.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Yp extends Y{constructor(e){super(),K(this,e,Jp,Xp,J,{})}}function Kp(l){let e,n,t;return{c(){e=T("img"),t=k(`
  Cycle parking`),Tt(e.src,n=No)||G(e,"src",n),G(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:Q,d(r){r&&(p(e),p(t))}}}function Zp(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qp(l){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xp(l){let e,n,t,r,o,s,u,a,i,f,c;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Zp]},$$scope:{ctx:l}}}),a=new te({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Qp]},$$scope:{ctx:l}}}),f=new et({}),{c(){e=T("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),s=T("p"),u=k("Icon from "),b(a.$$.fragment),i=O(),b(f.$$.fragment)},m(_,m){$(_,e,m),h(e,n),v(t,e,null),h(e,r),$(_,o,m),$(_,s,m),h(s,u),v(a,s,null),$(_,i,m),v(f,_,m),c=!0},p(_,m){const y={};m&8&&(y.$$scope={dirty:m,ctx:_}),t.$set(y);const C={};m&8&&(C.$$scope={dirty:m,ctx:_}),a.$set(C)},i(_){c||(g(t.$$.fragment,_),g(a.$$.fragment,_),g(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(a.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(o),p(s),p(i)),w(t),w(a),w(f,_)}}}function em(l){let e,n,t;return n=new me({props:{$$slots:{default:[xp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function tm(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&B(o,r)},d(s){s&&p(e)}}}function nm(l){let e,n;return e=new fe({props:{$$slots:{default:[tm,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rm(l){let e,n;const t=[H(Jt),{sourceLayer:Jt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[nm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new pn({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(H(Jt)),s&0&&{sourceLayer:Jt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function lm(l){let e,n,t,r,o;function s(a){l[1](a)}let u={$$slots:{right:[em],default:[Kp]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${he()}/v1/${Jt}.pmtiles`,$$slots:{default:[rm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&8&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&9&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Jt="cycle_parking";function om(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class sm extends Y{constructor(e){super(),K(this,e,om,lm,J,{})}}function im(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function am(l){let e,n,t,r;return t=new et({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:Q,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function fm(l){let e,n,t;return n=new me({props:{$$slots:{default:[am]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function cl(l){let e,n,t;return n=new xe({props:{$$slots:{default:[pm]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),ke(e,"border","1px solid black"),ke(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function um(l){let e,n,t;return e=new Pe({props:{color:Z.education.schools}}),{c(){b(e.$$.fragment),n=k(`
        Schools`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Q,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function cm(l){let e,n,t;return e=new Pe({props:{color:Z.education.colleges}}),{c(){b(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Q,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function $m(l){let e,n,t;return e=new Pe({props:{color:Z.education.universities}}),{c(){b(e.$$.fragment),n=k(`
        Universities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Q,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function pm(l){let e,n,t,r,o,s,u,a,i;function f(S){l[3](S)}let c={$$slots:{default:[um]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),W.push(()=>V(e,"checked",f));function _(S){l[4](S)}let m={$$slots:{default:[cm]},$$scope:{ctx:l}};l[1].college!==void 0&&(m.checked=l[1].college),r=new le({props:m}),W.push(()=>V(r,"checked",_));function y(S){l[5](S)}let C={$$slots:{default:[$m]},$$scope:{ctx:l}};return l[1].university!==void 0&&(C.checked=l[1].university),u=new le({props:C}),W.push(()=>V(u,"checked",y)),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment),s=O(),b(u.$$.fragment)},m(S,A){v(e,S,A),$(S,t,A),v(r,S,A),$(S,s,A),v(u,S,A),i=!0},p(S,A){const R={};A&128&&(R.$$scope={dirty:A,ctx:S}),!n&&A&2&&(n=!0,R.checked=S[1].school,X(()=>n=!1)),e.$set(R);const M={};A&128&&(M.$$scope={dirty:A,ctx:S}),!o&&A&2&&(o=!0,M.checked=S[1].college,X(()=>o=!1)),r.$set(M);const E={};A&128&&(E.$$scope={dirty:A,ctx:S}),!a&&A&2&&(a=!0,E.checked=S[1].university,X(()=>a=!1)),u.$set(E)},i(S){i||(g(e.$$.fragment,S),g(r.$$.fragment,S),g(u.$$.fragment,S),i=!0)},o(S){d(e.$$.fragment,S),d(r.$$.fragment,S),d(u.$$.fragment,S),i=!1},d(S){S&&(p(t),p(s)),w(e,S),w(r,S),w(u,S)}}}function mm(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&B(t,n)},d(r){r&&p(e)}}}function _m(l){let e,n;return e=new fe({props:{$$slots:{default:[mm,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gm(l){let e,n;const t=[H(Yt),{sourceLayer:Yt},{paint:{"fill-color":$t(["get","type"],{school:Z.education.schools,college:Z.education.colleges,university:Z.education.universities},"grey"),"fill-opacity":x(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:$l(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[_m]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(H(Yt)),s&0&&{sourceLayer:Yt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:$l(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function dm(l){let e,n,t,r,o,s;function u(f){l[2](f)}let a={$$slots:{right:[fm],default:[im]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&cl(l);return o=new ye({props:{url:`pmtiles://${he()}/v1/${Yt}.pmtiles`,$$slots:{default:[gm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&128&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=cl(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&131&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Yt="education";function $l(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function hm(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(i){t=i,n(0,t)}function s(i){l.$$.not_equal(r.school,i)&&(r.school=i,n(1,r))}function u(i){l.$$.not_equal(r.college,i)&&(r.college=i,n(1,r))}function a(i){l.$$.not_equal(r.university,i)&&(r.university=i,n(1,r))}return[t,r,o,s,u,a]}class bm extends Y{constructor(e){super(),K(this,e,hm,dm,J,{})}}function vm(l){let e,n,t,r;return e=new Pe({props:{color:l[4]}}),{c(){b(e.$$.fragment),n=O(),t=k(l[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&B(t,o[2])},i(o){r||(g(e.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function wm(l){let e;const n=l[5].default,t=ht(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&bt(t,n,r,r[7],e?wt(n,r[7],o,null):vt(r[7]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function km(l){let e,n,t;return n=new me({props:{$$slots:{default:[wm]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ym(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&B(t,n)},d(r){r&&p(e)}}}function Sm(l){let e,n;return e=new fe({props:{$$slots:{default:[ym,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Cm(l){let e,n;const t=[H(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":x(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Sm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&25?ne(t,[s&1&&ae(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":x(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Tm(l){let e,n,t,r,o;function s(a){l[6](a)}let u={$$slots:{right:[km],default:[vm]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ye({props:{url:`pmtiles://${he()}/v1/${l[0]}.pmtiles`,$$slots:{default:[Cm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&132&&(f.$$scope={dirty:i,ctx:a}),!n&&i&8&&(n=!0,f.checked=a[3],X(()=>n=!1)),e.$set(f);const c={};i&1&&(c.url=`pmtiles://${he()}/v1/${a[0]}.pmtiles`),i&139&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}function Om(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,a=Z[o],i=!1;function f(c){i=c,n(3,i)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,i,a,t,f,r]}class Co extends Y{constructor(e){super(),K(this,e,Om,Tm,J,{name:0,singularNoun:1,pluralNoun:2})}}function Lm(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Am(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Lm]},$$scope:{ctx:l}}}),s=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&1&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Im(l){let e,n;return e=new Co({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Am]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Nm extends Y{constructor(e){super(),K(this,e,null,Im,J,{})}}function Mm(l){let e,n,t;return{c(){e=T("img"),t=k(`
  Railway Stations`),Tt(e.src,n=Mo)||G(e,"src",n),G(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:Q,d(r){r&&(p(e),p(t))}}}function Pm(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fm(l){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Em(l){let e,n,t,r,o,s,u,a,i,f,c,_;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Pm]},$$scope:{ctx:l}}}),a=new te({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Fm]},$$scope:{ctx:l}}}),c=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),s=T("p"),u=k("Icon from "),b(a.$$.fragment),i=k(". (Note that not all stations shown are National Rail.)"),f=O(),b(c.$$.fragment)},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,r),$(m,o,y),$(m,s,y),h(s,u),v(a,s,null),h(s,i),$(m,f,y),v(c,m,y),_=!0},p(m,y){const C={};y&8&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&8&&(S.$$scope={dirty:y,ctx:m}),a.$set(S)},i(m){_||(g(t.$$.fragment,m),g(a.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(a.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(f)),w(t),w(a),w(c,m)}}}function Dm(l){let e,n,t;return n=new me({props:{$$slots:{default:[Em]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function jm(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&B(t,n)},d(r){r&&p(e)}}}function Rm(l){let e,n;return e=new fe({props:{$$slots:{default:[jm,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Bm(l){let e,n;const t=[H(En),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Rm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new pn({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(H(En)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function zm(l){let e,n,t,r,o;function s(a){l[1](a)}let u={$$slots:{right:[Dm],default:[Mm]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new yt({props:{data:`${he()}/v1/${En}.geojson`,$$slots:{default:[Bm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&8&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&9&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let En="railway_stations";function Hm(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class qm extends Y{constructor(e){super(),K(this,e,Hm,zm,J,{})}}function Gm(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Um(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wm(l){let e,n,t,r,o,s,u,a,i;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Gm]},$$scope:{ctx:l}}}),o=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Um]},$$scope:{ctx:l}}}),a=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){i||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(a,f)}}}function Vm(l){let e,n;return e=new Co({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Wm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Xm extends Y{constructor(e){super(),K(this,e,null,Vm,J,{})}}function Jm(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ym(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Km(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zm(l){let e,n,t,r,o,s,u,a,i,f,c,_,m,y,C,S,A,R,M,E,L,N,P;return t=new te({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Ym]},$$scope:{ctx:l}}}),A=new te({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Km]},$$scope:{ctx:l}}}),N=new je({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=O(),s=T("ul"),u=T("li"),u.textContent="Only collisions between 2017 and 2022 are included",a=O(),i=T("li"),i.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=O(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,_=O(),m=T("li"),m.textContent='The "pedestrians" category also include mobility scooters',y=O(),C=T("li"),S=k("All limitations "),b(A.$$.fragment),R=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),M=O(),E=T("p"),E.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=O(),b(N.$$.fragment)},m(I,j){$(I,e,j),h(e,n),v(t,e,null),h(e,r),$(I,o,j),$(I,s,j),h(s,u),h(s,a),h(s,i),h(s,f),h(s,c),h(s,_),h(s,m),h(s,y),h(s,C),h(C,S),v(A,C,null),h(C,R),$(I,M,j),$(I,E,j),$(I,L,j),v(N,I,j),P=!0},p(I,j){const U={};j&16777216&&(U.$$scope={dirty:j,ctx:I}),t.$set(U);const q={};j&16777216&&(q.$$scope={dirty:j,ctx:I}),A.$set(q)},i(I){P||(g(t.$$.fragment,I),g(A.$$.fragment,I),g(N.$$.fragment,I),P=!0)},o(I){d(t.$$.fragment,I),d(A.$$.fragment,I),d(N.$$.fragment,I),P=!1},d(I){I&&(p(e),p(o),p(s),p(M),p(E),p(L)),w(t),w(A),w(N,I)}}}function Qm(l){let e,n,t;return n=new me({props:{$$slots:{default:[Zm]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function pl(l){let e,n,t,r,o,s,u,a,i,f,c,_,m;return n=new xe({props:{small:!0,$$slots:{default:[r_]},$$scope:{ctx:l}}}),f=new Bn({props:{rows:l[14]}}),{c(){e=T("div"),b(n.$$.fragment),t=O(),r=T("div"),o=k(`Filter years:
      `),s=T("input"),u=k(`
      -
      `),a=T("input"),i=O(),b(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(a,"type","number"),G(a,"min",2017),G(a,"max",2022),G(a,"class","svelte-1ft65rw"),ke(e,"border","1px solid black"),ke(e,"padding","8px")},m(y,C){$(y,e,C),v(n,e,null),h(e,t),h(e,r),h(r,o),h(r,s),Ye(s,l[4]),h(r,u),h(r,a),Ye(a,l[5]),h(e,i),v(f,e,null),c=!0,_||(m=[Ze(s,"input",l[20]),Ze(a,"input",l[21])],_=!0)},p(y,C){const S={};C&16777231&&(S.$$scope={dirty:C,ctx:y}),n.$set(S),C&16&&xt(s.value)!==y[4]&&Ye(s,y[4]),C&32&&xt(a.value)!==y[5]&&Ye(a,y[5])},i(y){c||(g(n.$$.fragment,y),g(f.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(f.$$.fragment,y),c=!1},d(y){y&&p(e),w(n),w(f),_=!1,eo(m)}}}function xm(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function e_(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function t_(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function n_(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function r_(l){let e,n,t,r,o,s,u,a,i,f,c,_;function m(L){l[16](L)}let y={$$slots:{default:[xm]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new le({props:y}),W.push(()=>V(e,"checked",m));function C(L){l[17](L)}let S={$$slots:{default:[e_]},$$scope:{ctx:l}};l[1]!==void 0&&(S.checked=l[1]),r=new le({props:S}),W.push(()=>V(r,"checked",C));function A(L){l[18](L)}let R={$$slots:{default:[t_]},$$scope:{ctx:l}};l[2]!==void 0&&(R.checked=l[2]),u=new le({props:R}),W.push(()=>V(u,"checked",A));function M(L){l[19](L)}let E={$$slots:{default:[n_]},$$scope:{ctx:l}};return l[3]!==void 0&&(E.checked=l[3]),f=new le({props:E}),W.push(()=>V(f,"checked",M)),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(f.$$.fragment)},m(L,N){v(e,L,N),$(L,t,N),v(r,L,N),$(L,s,N),v(u,L,N),$(L,i,N),v(f,L,N),_=!0},p(L,N){const P={};N&16777216&&(P.$$scope={dirty:N,ctx:L}),!n&&N&1&&(n=!0,P.checked=L[0],X(()=>n=!1)),e.$set(P);const I={};N&16777216&&(I.$$scope={dirty:N,ctx:L}),!o&&N&2&&(o=!0,I.checked=L[1],X(()=>o=!1)),r.$set(I);const j={};N&16777216&&(j.$$scope={dirty:N,ctx:L}),!a&&N&4&&(a=!0,j.checked=L[2],X(()=>a=!1)),u.$set(j);const U={};N&16777216&&(U.$$scope={dirty:N,ctx:L}),!c&&N&8&&(c=!0,U.checked=L[3],X(()=>c=!1)),f.$set(U)},i(L){_||(g(e.$$.fragment,L),g(r.$$.fragment,L),g(u.$$.fragment,L),g(f.$$.fragment,L),_=!0)},o(L){d(e.$$.fragment,L),d(r.$$.fragment,L),d(u.$$.fragment,L),d(f.$$.fragment,L),_=!1},d(L){L&&(p(t),p(s),p(i)),w(e,L),w(r,L),w(u,L),w(f,L)}}}function ml(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&B(o,r)},d(s){s&&p(e)}}}function _l(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&B(o,r)},d(s){s&&p(e)}}}function l_(l){let e,n,t,r=l[23].year+"",o,s,u,a,i,f=l[10][l[23].severity]+"",c,_,m,y,C,S=gl(l[23])+"",A,R,M,E,L,N=l[23].pedestrian_location&&ml(l),P=l[23].pedestrian_movement&&_l(l);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(r),s=O(),u=T("p"),a=k("Severity: "),i=T("b"),c=k(f),_=O(),m=T("p"),y=k("Casualties: "),C=T("b"),A=k(S),R=O(),N&&N.c(),M=O(),P&&P.c(),E=O(),L=T("p"),L.textContent="Click to open full report in CycleStreets"},m(I,j){$(I,e,j),h(e,n),h(e,t),h(t,o),$(I,s,j),$(I,u,j),h(u,a),h(u,i),h(i,c),$(I,_,j),$(I,m,j),h(m,y),h(m,C),h(C,A),$(I,R,j),N&&N.m(I,j),$(I,M,j),P&&P.m(I,j),$(I,E,j),$(I,L,j)},p(I,j){j&8388608&&r!==(r=I[23].year+"")&&B(o,r),j&8388608&&f!==(f=I[10][I[23].severity]+"")&&B(c,f),j&8388608&&S!==(S=gl(I[23])+"")&&B(A,S),I[23].pedestrian_location?N?N.p(I,j):(N=ml(I),N.c(),N.m(M.parentNode,M)):N&&(N.d(1),N=null),I[23].pedestrian_movement?P?P.p(I,j):(P=_l(I),P.c(),P.m(E.parentNode,E)):P&&(P.d(1),P=null)},d(I){I&&(p(e),p(s),p(u),p(_),p(m),p(R),p(M),p(E),p(L)),N&&N.d(I),P&&P.d(I)}}}function o_(l){let e,n;return e=new fe({props:{$$slots:{default:[l_,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function s_(l){let e,n;const t=[H(Kt),{sourceLayer:Kt},{paint:{"circle-color":Le(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[o_]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new pt({props:r}),e.$on("click",a_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&14528?ne(t,[s&0&&ae(H(Kt)),s&0&&{sourceLayer:Kt},s&14336&&{paint:{"circle-color":Le(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function i_(l){let e,n,t,r,o,s;function u(f){l[15](f)}let a={$$slots:{right:[Qm],default:[Jm]},$$scope:{ctx:l}};l[6]!==void 0&&(a.checked=l[6]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[6]&&pl(l);return o=new ye({props:{url:`pmtiles://${he()}/v1/${Kt}.pmtiles`,$$slots:{default:[s_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16777216&&(_.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,_.checked=f[6],X(()=>n=!1)),e.$set(_),f[6]?i?(i.p(f,c),c&64&&g(i,1)):(i=pl(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&16777408&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Kt="stats19";function gl(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function a_(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function f_(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,a=!1,i=2017,f=2022;function c(U,q,D,F,z,oe){let se=["any"];return o&&se.push(["get","pedestrian"]),s&&se.push(["get","cyclist"]),u&&se.push(["get","horse_rider"]),a&&se.push(["get","other"]),["all",[">=",["get","year"],i],["<=",["get","year"],f],se]}let _={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},m={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},C=Z.sequential_low_to_high[4],S=Z.sequential_low_to_high[2],A=Z.sequential_low_to_high[0],R=[["Fatal",C],["Serious",S],["Slight",A]];function M(U){r=U,n(6,r)}function E(U){o=U,n(0,o)}function L(U){s=U,n(1,s)}function N(U){u=U,n(2,u)}function P(U){a=U,n(3,a)}function I(){i=xt(this.value),n(4,i)}function j(){f=xt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,a,i,f,r,t,_,m,y,C,S,A,R,M,E,L,N,P,I,j]}class u_ extends Y{constructor(e){super(),K(this,e,f_,i_,J,{})}}function c_(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $_(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function p_(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function m_(l){let e,n,t,r,o,s,u,a,i,f,c;return t=new te({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[$_]},$$scope:{ctx:l}}}),o=new te({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[p_]},$$scope:{ctx:l}}}),f=new je({}),{c(){e=T("p"),n=k("AADF (annual average daily flow) data from "),b(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=O(),a=T("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,i=O(),b(f.$$.fragment)},m(_,m){$(_,e,m),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(_,u,m),$(_,a,m),$(_,i,m),v(f,_,m),c=!0},p(_,m){const y={};m&64&&(y.$$scope={dirty:m,ctx:_}),t.$set(y);const C={};m&64&&(C.$$scope={dirty:m,ctx:_}),o.$set(C)},i(_){c||(g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(u),p(a),p(i)),w(t),w(o),w(f,_)}}}function __(l){let e,n,t;return n=new me({props:{$$slots:{default:[m_]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function dl(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[3]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function g_(l){let e,n=l[5].location+"",t,r,o,s,u=l[5].year+"",a,i,f,c=l[5].motor_vehicles.toLocaleString()+"",_,m,y,C,S=l[5].year+"",A,R,M,E=l[5].pedal_cycles.toLocaleString()+"",L,N,P,I,j,U=l[5].method+"",q;return{c(){e=T("h2"),t=k(n),r=O(),o=T("p"),s=k("Total motor vehicles ("),a=k(u),i=k(` AADF):
        `),f=T("b"),_=k(c),m=O(),y=T("p"),C=k("Total pedal cycles ("),A=k(S),R=k(` AADF):
        `),M=T("b"),L=k(E),N=O(),P=T("p"),I=k("Count method: "),j=T("b"),q=k(U)},m(D,F){$(D,e,F),h(e,t),$(D,r,F),$(D,o,F),h(o,s),h(o,a),h(o,i),h(o,f),h(f,_),$(D,m,F),$(D,y,F),h(y,C),h(y,A),h(y,R),h(y,M),h(M,L),$(D,N,F),$(D,P,F),h(P,I),h(P,j),h(j,q)},p(D,F){F&32&&n!==(n=D[5].location+"")&&B(t,n),F&32&&u!==(u=D[5].year+"")&&B(a,u),F&32&&c!==(c=D[5].motor_vehicles.toLocaleString()+"")&&B(_,c),F&32&&S!==(S=D[5].year+"")&&B(A,S),F&32&&E!==(E=D[5].pedal_cycles.toLocaleString()+"")&&B(L,E),F&32&&U!==(U=D[5].method+"")&&B(q,U)},d(D){D&&(p(e),p(r),p(o),p(m),p(y),p(N),p(P))}}}function d_(l){let e,n;return e=new fe({props:{$$slots:{default:[g_,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function h_(l){let e,n;const t=[H(Zt),{sourceLayer:Zt},{paint:{"circle-color":Le(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[d_]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new pt({props:r}),e.$on("click",v_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(H(Zt)),s&0&&{sourceLayer:Zt},s&6&&{paint:{"circle-color":Le(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function b_(l){let e,n,t,r,o,s;function u(f){l[4](f)}let a={$$slots:{right:[__],default:[c_]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&dl(l);return o=new ye({props:{url:`pmtiles://${he()}/v1/${Zt}.pmtiles`,$$slots:{default:[h_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=dl(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&65&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Zt="vehicle_counts";function v_(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function w_(l,e,n){let t=Z.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(a){s=a,n(0,s)}return[s,t,r,o,u]}class k_ extends Y{constructor(e){super(),K(this,e,w_,b_,J,{})}}function y_(l){let e,n,t,r,o,s,u,a;return e=new bm({}),t=new Nm({}),o=new Xm({}),u=new qm({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),$(i,r,f),v(o,i,f),$(i,s,f),v(u,i,f),a=!0},i(i){a||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(o.$$.fragment,i),g(u.$$.fragment,i),a=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(o.$$.fragment,i),d(u.$$.fragment,i),a=!1},d(i){i&&(p(n),p(r),p(s)),w(e,i),w(t,i),w(o,i),w(u,i)}}}function S_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[y_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function C_(l){let e,n,t,r,o,s,u,a,i,f,c,_;return e=new Ic({}),t=new s$({}),o=new zc({}),u=new Kc({}),i=new sm({}),c=new Bp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),a=O(),b(i.$$.fragment),f=O(),b(c.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,r,y),v(o,m,y),$(m,s,y),v(u,m,y),$(m,a,y),v(i,m,y),$(m,f,y),v(c,m,y),_=!0},i(m){_||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),g(u.$$.fragment,m),g(i.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),d(i.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(n),p(r),p(s),p(a),p(f)),w(e,m),w(t,m),w(o,m),w(u,m),w(i,m),w(c,m)}}}function T_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[C_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function O_(l){let e,n,t,r,o,s;return e=new dc({}),t=new ap({}),o=new hp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(u,a){v(e,u,a),$(u,n,a),v(t,u,a),$(u,r,a),v(o,u,a),s=!0},i(u){s||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function L_(l){let e,n,t,r,o,s,u,a,i,f;return e=new Lu({}),t=new rc({}),o=new Ef({}),u=new ru({}),i=new du({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),a=O(),b(i.$$.fragment)},m(c,_){v(e,c,_),$(c,n,_),v(t,c,_),$(c,r,_),v(o,c,_),$(c,s,_),v(u,c,_),$(c,a,_),v(i,c,_),f=!0},i(c){f||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(i.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(i.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(a)),w(e,c),w(t,c),w(o,c),w(u,c),w(i,c)}}}function A_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[L_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function I_(l){let e,n,t,r;return e=new Sf({}),t=new Vf({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function N_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[I_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function M_(l){let e,n,t,r,o,s;return e=new ep({}),t=new b$({}),o=new U$({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(u,a){v(e,u,a),$(u,n,a),v(t,u,a),$(u,r,a),v(o,u,a),s=!0},i(u){s||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function P_(l){let e,n,t,r,o,s,u,a,i=Tn()=="Private (development)",f,c,_,m,y;e=new k_({}),t=new u_({}),o=new P$({}),u=new Yp({});let C=i&&M_();return c=new Du({}),m=new Vu({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),a=O(),C&&C.c(),f=O(),b(c.$$.fragment),_=O(),b(m.$$.fragment)},m(S,A){v(e,S,A),$(S,n,A),v(t,S,A),$(S,r,A),v(o,S,A),$(S,s,A),v(u,S,A),$(S,a,A),C&&C.m(S,A),$(S,f,A),v(c,S,A),$(S,_,A),v(m,S,A),y=!0},p:Q,i(S){y||(g(e.$$.fragment,S),g(t.$$.fragment,S),g(o.$$.fragment,S),g(u.$$.fragment,S),g(C),g(c.$$.fragment,S),g(m.$$.fragment,S),y=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(o.$$.fragment,S),d(u.$$.fragment,S),d(C),d(c.$$.fragment,S),d(m.$$.fragment,S),y=!1},d(S){S&&(p(n),p(r),p(s),p(a),p(f),p(_)),w(e,S),w(t,S),w(o,S),w(u,S),C&&C.d(S),w(c,S),w(m,S)}}}function F_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[P_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function E_(l){let e,n,t,r,o,s,u,a,i,f,c,_,m,y;return e=new Lp({}),t=new He({props:{label:"Trip generators",$$slots:{default:[S_]},$$scope:{ctx:l}}}),o=new He({props:{label:"Existing infrastructure",$$slots:{default:[T_]},$$scope:{ctx:l}}}),u=new He({props:{label:"Public transit",$$slots:{default:[O_]},$$scope:{ctx:l}}}),i=new He({props:{label:"Boundaries",$$slots:{default:[A_]},$$scope:{ctx:l}}}),c=new He({props:{label:"Census",$$slots:{default:[N_]},$$scope:{ctx:l}}}),m=new He({props:{label:"Other",$$slots:{default:[F_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),a=O(),b(i.$$.fragment),f=O(),b(c.$$.fragment),_=O(),b(m.$$.fragment)},m(C,S){v(e,C,S),$(C,n,S),v(t,C,S),$(C,r,S),v(o,C,S),$(C,s,S),v(u,C,S),$(C,a,S),v(i,C,S),$(C,f,S),v(c,C,S),$(C,_,S),v(m,C,S),y=!0},p(C,S){const A={};S&1&&(A.$$scope={dirty:S,ctx:C}),t.$set(A);const R={};S&1&&(R.$$scope={dirty:S,ctx:C}),o.$set(R);const M={};S&1&&(M.$$scope={dirty:S,ctx:C}),u.$set(M);const E={};S&1&&(E.$$scope={dirty:S,ctx:C}),i.$set(E);const L={};S&1&&(L.$$scope={dirty:S,ctx:C}),c.$set(L);const N={};S&1&&(N.$$scope={dirty:S,ctx:C}),m.$set(N)},i(C){y||(g(e.$$.fragment,C),g(t.$$.fragment,C),g(o.$$.fragment,C),g(u.$$.fragment,C),g(i.$$.fragment,C),g(c.$$.fragment,C),g(m.$$.fragment,C),y=!0)},o(C){d(e.$$.fragment,C),d(t.$$.fragment,C),d(o.$$.fragment,C),d(u.$$.fragment,C),d(i.$$.fragment,C),d(c.$$.fragment,C),d(m.$$.fragment,C),y=!1},d(C){C&&(p(n),p(r),p(s),p(a),p(f),p(_)),w(e,C),w(t,C),w(o,C),w(u,C),w(i,C),w(c,C),w(m,C)}}}function D_(l){let e,n;return e=new He({props:{label:"Layers",open:!0,$$slots:{default:[E_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class j_ extends Y{constructor(e){super(),K(this,e,null,D_,J,{})}}function R_(l){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&2?ne(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function B_(l){let e,n,t,r,o,s,u,a,i,f;function c(m){l[3](m)}let _={};return l[0]!==void 0&&(_.enabled=l[0]),n=new Uo({props:_}),W.push(()=>V(n,"enabled",c)),o=new Cs({}),u=new Wo({props:{disabled:!l[1]}}),i=new yt({props:{data:l[2],$$slots:{default:[R_]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),a=O(),b(i.$$.fragment),G(e,"class","govuk-prose svelte-tdfg8w")},m(m,y){$(m,e,y),v(n,e,null),h(e,r),v(o,e,null),h(e,s),v(u,e,null),$(m,a,y),v(i,m,y),f=!0},p(m,[y]){const C={};!t&&y&1&&(t=!0,C.enabled=m[0],X(()=>t=!1)),n.$set(C);const S={};y&2&&(S.disabled=!m[1]),u.$set(S);const A={};y&18&&(A.$$scope={dirty:y,ctx:m}),i.$set(A)},i(m){f||(g(n.$$.fragment,m),g(o.$$.fragment,m),g(u.$$.fragment,m),g(i.$$.fragment,m),f=!0)},o(m){d(n.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),d(i.$$.fragment,m),f=!1},d(m){m&&(p(e),p(a)),w(n),w(o),w(u),w(i,m)}}}function z_(l,e,n){let t,r;Ae(l,Tr,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&Tr.set(!t)},[t,r,o,s]}class H_ extends Y{constructor(e){super(),K(this,e,z_,B_,J,{})}}function hl(l){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function q_(l){let e,n=l[0]&&hl();return{c(){n&&n.c(),e=Me()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=hl(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Q,o:Q,d(t){t&&p(e),n&&n.d(t)}}}function G_(l,e,n){let{loadFile:t}=e,r=!0;return Rn(async()=>{let s=await(await fetch(`${$n()}/v1/all_schemes_output.geojson.gz`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class U_ extends Y{constructor(e){super(),K(this,e,G_,q_,J,{loadFile:1})}}function bl(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),h(e,n),h(e,r)},p(s,u){var a;u&1&&t!==(t=((a=s[0].browse)==null?void 0:a.current_milestone)+"")&&B(r,t)},d(s){s&&p(e)}}}function W_(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function V_(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function X_(l){let e,n,t,r;return e=new Ot({props:{$$slots:{default:[W_]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new Ot({props:{$$slots:{default:[V_]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const a={};s&32&&(a.$$scope={dirty:s,ctx:o}),t.$set(a)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function J_(l){var j,U,q,D;let e,n,t=l[0].scheme_reference+"",r,o,s,u,a=((j=l[0].browse)==null?void 0:j.authority_or_region)+"",i,f,c,_,m=((U=l[0].browse)==null?void 0:U.capital_scheme_id)+"",y,C,S,A,R=((q=l[0].browse)==null?void 0:q.funding_programme)+"",M,E,L,N,P,I=((D=l[0].browse)==null?void 0:D.current_milestone)&&bl(l);return N=new Vo({props:{$$slots:{default:[X_]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Scheme reference: "),r=k(t),o=O(),s=T("p"),u=k("Authority or region: "),i=k(a),f=O(),c=T("p"),_=k("Capital scheme ID: "),y=k(m),C=O(),S=T("p"),A=k("Funding programme: "),M=k(R),E=O(),I&&I.c(),L=O(),b(N.$$.fragment)},m(F,z){$(F,e,z),h(e,n),h(e,r),$(F,o,z),$(F,s,z),h(s,u),h(s,i),$(F,f,z),$(F,c,z),h(c,_),h(c,y),$(F,C,z),$(F,S,z),h(S,A),h(S,M),$(F,E,z),I&&I.m(F,z),$(F,L,z),v(N,F,z),P=!0},p(F,z){var se,Se,de,Ce;(!P||z&1)&&t!==(t=F[0].scheme_reference+"")&&B(r,t),(!P||z&1)&&a!==(a=((se=F[0].browse)==null?void 0:se.authority_or_region)+"")&&B(i,a),(!P||z&1)&&m!==(m=((Se=F[0].browse)==null?void 0:Se.capital_scheme_id)+"")&&B(y,m),(!P||z&1)&&R!==(R=((de=F[0].browse)==null?void 0:de.funding_programme)+"")&&B(M,R),(Ce=F[0].browse)!=null&&Ce.current_milestone?I?I.p(F,z):(I=bl(F),I.c(),I.m(L.parentNode,L)):I&&(I.d(1),I=null);const oe={};z&32&&(oe.$$scope={dirty:z,ctx:F}),N.$set(oe)},i(F){P||(g(N.$$.fragment,F),P=!0)},o(F){d(N.$$.fragment,F),P=!1},d(F){F&&(p(e),p(o),p(s),p(f),p(c),p(C),p(S),p(E),p(L)),I&&I.d(F),w(N,F)}}}function Y_(l){let e,n;return e=new He({props:{label:`${l[0].scheme_name}`,$$slots:{default:[J_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function K_(l,e,n){let t,r;Ae(l,Lt,a=>n(3,t=a)),Ae(l,jn,a=>n(4,r=a));let{scheme:o}=e;function s(){let a={type:"FeatureCollection",features:t.features.filter(i=>i.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Po(a),{padding:20,animate:!1})}function u(){var f,c;let a={type:"FeatureCollection",features:t.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},i=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";Fo(i,JSON.stringify(a)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=a=>{"scheme"in a&&n(0,o=a.scheme)},[o,s,u]}class Z_ extends Y{constructor(e){super(),K(this,e,K_,Y_,J,{scheme:0})}}function vl(l){let e,n,t,r=l[0].status+"",o;return{c(){e=T("p"),n=k("Status: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].status+"")&&B(o,r)},d(s){s&&p(e)}}}function wl(l){let e,n,t,r=l[0].timescale+"",o;return{c(){e=T("p"),n=k("Timescale: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale+"")&&B(o,r)},d(s){s&&p(e)}}}function kl(l){let e,n,t,r=l[0].timescale_year+"",o;return{c(){e=T("p"),n=k("Estimated completion year: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale_year+"")&&B(o,r)},d(s){s&&p(e)}}}function yl(l){let e,n,t,r=l[0].year_published+"",o;return{c(){e=T("p"),n=k("Scheme most recently published: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_published+"")&&B(o,r)},d(s){s&&p(e)}}}function Sl(l){let e,n,t,r=l[0].year_consulted+"",o;return{c(){e=T("p"),n=k("Scheme most recently consulted on: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_consulted+"")&&B(o,r)},d(s){s&&p(e)}}}function Q_(l){let e,n,t,r,o,s=l[0].status&&vl(l),u=l[0].timescale&&wl(l),a=l[0].timescale_year&&kl(l),i=l[0].year_published&&yl(l),f=l[0].year_consulted&&Sl(l);return{c(){s&&s.c(),e=O(),u&&u.c(),n=O(),a&&a.c(),t=O(),i&&i.c(),r=O(),f&&f.c(),o=Me()},m(c,_){s&&s.m(c,_),$(c,e,_),u&&u.m(c,_),$(c,n,_),a&&a.m(c,_),$(c,t,_),i&&i.m(c,_),$(c,r,_),f&&f.m(c,_),$(c,o,_)},p(c,[_]){c[0].status?s?s.p(c,_):(s=vl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?u?u.p(c,_):(u=wl(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),c[0].timescale_year?a?a.p(c,_):(a=kl(c),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),c[0].year_published?i?i.p(c,_):(i=yl(c),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null),c[0].year_consulted?f?f.p(c,_):(f=Sl(c),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i:Q,o:Q,d(c){c&&(p(e),p(n),p(t),p(r),p(o)),s&&s.d(c),u&&u.d(c),a&&a.d(c),i&&i.d(c),f&&f.d(c)}}}function x_(l,e,n){let{props:t}=e;return l.$$set=r=>{"props"in r&&n(0,t=r.props)},[t]}class To extends Y{constructor(e){super(),K(this,e,x_,Q_,J,{props:0})}}function Cl(l){let e,n,t,r=l[0].budget.toLocaleString()+"",o,s;return{c(){e=T("p"),n=k("Cost: "),t=T("b"),o=k(r),s=k(`
    GBP`)},m(u,a){$(u,e,a),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,a){a&1&&r!==(r=u[0].budget.toLocaleString()+"")&&B(o,r)},d(u){u&&p(e)}}}function Tl(l){let e;return{c(){e=T("p"),e.textContent="Development is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ol(l){let e;return{c(){e=T("p"),e.textContent="Construction is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ll(l){let e,n,t,r;return{c(){e=T("p"),n=k("Funding sources: "),t=T("b"),r=k(l[1])},m(o,s){$(o,e,s),h(e,n),h(e,t),h(t,r)},p(o,s){s&2&&B(r,o[1])},d(o){o&&p(e)}}}function eg(l){let e,n,t,r,o=l[0].budget&&Cl(l),s=l[0].development_funded&&Tl(),u=l[0].construction_funded&&Ol(),a=l[1]&&Ll(l);return{c(){o&&o.c(),e=O(),s&&s.c(),n=O(),u&&u.c(),t=O(),a&&a.c(),r=Me()},m(i,f){o&&o.m(i,f),$(i,e,f),s&&s.m(i,f),$(i,n,f),u&&u.m(i,f),$(i,t,f),a&&a.m(i,f),$(i,r,f)},p(i,[f]){i[0].budget?o?o.p(i,f):(o=Cl(i),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),i[0].development_funded?s||(s=Tl(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),i[0].construction_funded?u||(u=Ol(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),i[1]?a?a.p(i,f):(a=Ll(i),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},i:Q,o:Q,d(i){i&&(p(e),p(n),p(t),p(r)),o&&o.d(i),s&&s.d(i),u&&u.d(i),a&&a.d(i)}}}function tg(l){if(!l.funding_sources)return"";let e=[];for(let n of["atf2","atf3","atf4","atf4e","crsts","luf"])l.funding_sources[n]&&e.push(n.toUpperCase());return l.funding_sources.other&&e.push(l.funding_sources.other),e.join(", ")}function ng(l,e,n){let t,{props:r}=e;return l.$$set=o=>{"props"in o&&n(0,r=o.props)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=tg(r))},[r,t]}class Oo extends Y{constructor(e){super(),K(this,e,ng,eg,J,{props:0})}}function wn(l){const e=l.slice(),n=e[1].pipeline;return e[5]=n,e}function kn(l){const e=l.slice(),n=e[0].pipeline;return e[5]=n,e}function Al(l){let e,n,t,r=Jn(l[0].length_meters)+"",o;return{c(){e=T("p"),n=k("Length: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=Jn(s[0].length_meters)+"")&&B(o,r)},d(s){s&&p(e)}}}function Il(l){let e,n=ft(l[0].description,l[2])+"";return{c(){e=T("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=ft(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Nl(l){let e,n,t,r,o,s,u,a=l[5].atf4_type&&Ml(l),i=l[5].accuracy&&Pl(l),f=l[5].is_alternative&&Fl();return r=new Oo({props:{props:l[5]}}),s=new To({props:{props:l[5]}}),{c(){a&&a.c(),e=O(),i&&i.c(),n=O(),f&&f.c(),t=O(),b(r.$$.fragment),o=O(),b(s.$$.fragment)},m(c,_){a&&a.m(c,_),$(c,e,_),i&&i.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),v(r,c,_),$(c,o,_),v(s,c,_),u=!0},p(c,_){c[5].atf4_type?a?a.p(c,_):(a=Ml(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[5].accuracy?i?i.p(c,_):(i=Pl(c),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),c[5].is_alternative?f||(f=Fl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const m={};_&1&&(m.props=c[5]),r.$set(m);const y={};_&1&&(y.props=c[5]),s.$set(y)},i(c){u||(g(r.$$.fragment,c),g(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),a&&a.d(c),i&&i.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function Ml(l){let e,n,t,r=l[5].atf4_type+"",o;return{c(){e=T("p"),n=k("ATF4 type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].atf4_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Pl(l){let e,n,t,r=l[5].accuracy+"",o;return{c(){e=T("p"),n=k("Accuracy: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].accuracy+"")&&B(o,r)},d(s){s&&p(e)}}}function Fl(l){let e;return{c(){e=T("p"),e.textContent="Represents an alternative route"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function El(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.capital_scheme_id)+"",o;return{c(){e=T("p"),n=k("Capital scheme ID: "),t=T("b"),o=k(r)},m(u,a){$(u,e,a),h(e,n),h(e,t),h(t,o)},p(u,a){var i;a&2&&r!==(r=((i=u[1].browse)==null?void 0:i.capital_scheme_id)+"")&&B(o,r)},d(u){u&&p(e)}}}function Dl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.current_milestone)+"",o;return{c(){e=T("p"),n=k("Current milestone: "),t=T("b"),o=k(r)},m(u,a){$(u,e,a),h(e,n),h(e,t),h(t,o)},p(u,a){var i;a&2&&r!==(r=((i=u[1].browse)==null?void 0:i.current_milestone)+"")&&B(o,r)},d(u){u&&p(e)}}}function jl(l){let e,n,t,r,o,s,u,a=l[5].scheme_type&&Rl(l),i=l[5].atf4_lead_type&&Bl(l),f=l[5].scheme_description&&zl(l);return r=new Oo({props:{props:l[5]}}),s=new To({props:{props:l[5]}}),{c(){a&&a.c(),e=O(),i&&i.c(),n=O(),f&&f.c(),t=O(),b(r.$$.fragment),o=O(),b(s.$$.fragment)},m(c,_){a&&a.m(c,_),$(c,e,_),i&&i.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),v(r,c,_),$(c,o,_),v(s,c,_),u=!0},p(c,_){c[5].scheme_type?a?a.p(c,_):(a=Rl(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[5].atf4_lead_type?i?i.p(c,_):(i=Bl(c),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),c[5].scheme_description?f?f.p(c,_):(f=zl(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const m={};_&2&&(m.props=c[5]),r.$set(m);const y={};_&2&&(y.props=c[5]),s.$set(y)},i(c){u||(g(r.$$.fragment,c),g(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),a&&a.d(c),i&&i.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function Rl(l){let e,n,t,r=l[5].scheme_type+"",o;return{c(){e=T("p"),n=k("Scheme type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].scheme_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Bl(l){let e,n,t,r=l[5].atf4_lead_type+"",o;return{c(){e=T("p"),n=k("ATF4 lead type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].atf4_lead_type+"")&&B(o,r)},d(s){s&&p(e)}}}function zl(l){let e,n,t=l[5].scheme_description+"",r;return{c(){e=T("p"),n=k("Descripton: "),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,r)},p(o,s){s&2&&t!==(t=o[5].scheme_description+"")&&B(r,t)},d(o){o&&p(e)}}}function rg(l){var Ie,Fe,At,Xe;let e,n,t,r=ft(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,a,i,f,c,_,m,y,C,S,A,R=ft(l[1].scheme_name??"",l[3])+"",M,E,L=ft(l[0].scheme_reference,l[3])+"",N,P,I,j,U,q=((Ie=l[1].browse)==null?void 0:Ie.authority_or_region)+"",D,F,z,oe,se,Se,de=((Fe=l[1].browse)==null?void 0:Fe.funding_programme)+"",Ce,ie,Ne,Te,be=l[0].length_meters&&Al(l),re=l[0].description&&Il(l),pe=l[0].pipeline&&Nl(kn(l)),ge=((At=l[1].browse)==null?void 0:At.capital_scheme_id)&&El(l),ve=((Xe=l[1].browse)==null?void 0:Xe.current_milestone)&&Dl(l),_e=l[1].pipeline&&jl(wn(l));return{c(){e=T("div"),n=T("h2"),t=new dt(!1),o=k(" ("),u=k(s),a=k(")"),i=O(),be&&be.c(),f=O(),re&&re.c(),c=O(),pe&&pe.c(),_=O(),m=T("hr"),y=O(),C=T("p"),S=k("Part of scheme: "),A=new dt(!1),M=k(" ("),E=new dt(!1),N=k(")"),P=O(),I=T("p"),j=k("Authority or region: "),U=T("b"),D=k(q),F=O(),ge&&ge.c(),z=O(),oe=T("p"),se=k("Funding programme: "),Se=T("b"),Ce=k(de),ie=O(),ve&&ve.c(),Ne=O(),_e&&_e.c(),t.a=o,A.a=M,E.a=N,ke(e,"max-width","30vw"),ke(e,"max-height","60vh"),ke(e,"overflow","auto")},m(ue,Ee){$(ue,e,Ee),h(e,n),t.m(r,n),h(n,o),h(n,u),h(n,a),h(e,i),be&&be.m(e,null),h(e,f),re&&re.m(e,null),h(e,c),pe&&pe.m(e,null),h(e,_),h(e,m),h(e,y),h(e,C),h(C,S),A.m(R,C),h(C,M),E.m(L,C),h(C,N),h(e,P),h(e,I),h(I,j),h(I,U),h(U,D),h(e,F),ge&&ge.m(e,null),h(e,z),h(e,oe),h(oe,se),h(oe,Se),h(Se,Ce),h(e,ie),ve&&ve.m(e,null),h(e,Ne),_e&&_e.m(e,null),Te=!0},p(ue,[Ee]){var qn,Gn,Un,Wn;(!Te||Ee&5)&&r!==(r=ft(ue[0].name,ue[2])+"")&&t.p(r),(!Te||Ee&1)&&s!==(s=ue[0].intervention_type+"")&&B(u,s),ue[0].length_meters?be?be.p(ue,Ee):(be=Al(ue),be.c(),be.m(e,f)):be&&(be.d(1),be=null),ue[0].description?re?re.p(ue,Ee):(re=Il(ue),re.c(),re.m(e,c)):re&&(re.d(1),re=null),ue[0].pipeline?pe?(pe.p(kn(ue),Ee),Ee&1&&g(pe,1)):(pe=Nl(kn(ue)),pe.c(),g(pe,1),pe.m(e,_)):pe&&(ce(),d(pe,1,1,()=>{pe=null}),$e()),(!Te||Ee&10)&&R!==(R=ft(ue[1].scheme_name??"",ue[3])+"")&&A.p(R),(!Te||Ee&9)&&L!==(L=ft(ue[0].scheme_reference,ue[3])+"")&&E.p(L),(!Te||Ee&2)&&q!==(q=((qn=ue[1].browse)==null?void 0:qn.authority_or_region)+"")&&B(D,q),(Gn=ue[1].browse)!=null&&Gn.capital_scheme_id?ge?ge.p(ue,Ee):(ge=El(ue),ge.c(),ge.m(e,z)):ge&&(ge.d(1),ge=null),(!Te||Ee&2)&&de!==(de=((Un=ue[1].browse)==null?void 0:Un.funding_programme)+"")&&B(Ce,de),(Wn=ue[1].browse)!=null&&Wn.current_milestone?ve?ve.p(ue,Ee):(ve=Dl(ue),ve.c(),ve.m(e,Ne)):ve&&(ve.d(1),ve=null),ue[1].pipeline?_e?(_e.p(wn(ue),Ee),Ee&2&&g(_e,1)):(_e=jl(wn(ue)),_e.c(),g(_e,1),_e.m(e,null)):_e&&(ce(),d(_e,1,1,()=>{_e=null}),$e())},i(ue){Te||(g(pe),g(_e),Te=!0)},o(ue){d(pe),d(_e),Te=!1},d(ue){ue&&p(e),be&&be.d(),re&&re.d(),pe&&pe.d(),ge&&ge.d(),ve&&ve.d(),_e&&_e.d()}}}function ft(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function lg(l,e,n){let t,r,o,s;Ae(l,un,a=>n(4,r=a)),Ae(l,Nt,a=>n(2,o=a)),Ae(l,Mt,a=>n(3,s=a));let{props:u}=e;return l.$$set=a=>{"props"in a&&n(0,u=a.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class Hn extends Y{constructor(e){super(),K(this,e,lg,rg,J,{props:0})}}function og(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function sg(l){let e,n;return e=new Hn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ig(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[og,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[sg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const a={};s&192&&(a.$$scope={dirty:s,ctx:o}),t.$set(a)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function ag(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function fg(l){let e,n;return e=new Hn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ug(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[ag,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[fg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const a={};s&192&&(a.$$scope={dirty:s,ctx:o}),t.$set(a)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function cg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function $g(l){let e,n;return e=new Hn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pg(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[cg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[$g,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const a={};s&192&&(a.$$scope={dirty:s,ctx:o}),t.$set(a)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function mg(l){let e,n,t,r,o,s,u,a,i,f;const c=[H("interventions-points"),{filter:["all",Yn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":Qn,"circle-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let _={$$slots:{default:[ig]},$$scope:{ctx:l}};for(let L=0;L<c.length;L+=1)_=ee(_,c[L]);e=new pt({props:_});const m=[H("interventions-lines"),{filter:["all",Kn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":It,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[ug]},$$scope:{ctx:l}};for(let L=0;L<m.length;L+=1)y=ee(y,m[L]);t=new Oe({props:y});const C=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*It,"circle-opacity":0,"circle-stroke-color":Ke.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let S={};for(let L=0;L<C.length;L+=1)S=ee(S,C[L]);o=new pt({props:S});const A=[H("interventions-polygons"),{filter:["all",on,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":x(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let R={$$slots:{default:[pg]},$$scope:{ctx:l}};for(let L=0;L<A.length;L+=1)R=ee(R,A[L]);u=new qe({props:R});const M=[H("interventions-polygons-outlines"),{filter:["all",on,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*It}},{layout:{visibility:l[0]?"visible":"none"}}];let E={};for(let L=0;L<M.length;L+=1)E=ee(E,M[L]);return i=new Oe({props:E}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),a=O(),b(i.$$.fragment)},m(L,N){v(e,L,N),$(L,n,N),v(t,L,N),$(L,r,N),v(o,L,N),$(L,s,N),v(u,L,N),$(L,a,N),v(i,L,N),f=!0},p(L,N){const P=N&29?ne(c,[c[0],N&24&&{filter:["all",Yn,L[3],L[4]]},c[2],c[3],N&4&&{paint:{"circle-color":L[2],"circle-radius":Qn,"circle-opacity":x(1,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};N&128&&(P.$$scope={dirty:N,ctx:L}),e.$set(P);const I=N&13?ne(m,[m[0],N&8&&{filter:["all",Kn,L[3]]},m[2],m[3],N&4&&{paint:{"line-color":L[2],"line-width":It,"line-opacity":x(1,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},m[6]]):{};N&128&&(I.$$scope={dirty:N,ctx:L}),t.$set(I);const j=N&1?ne(C,[C[0],C[1],C[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(j);const U=N&13?ne(A,[A[0],N&8&&{filter:["all",on,L[3]]},A[2],A[3],N&4&&{paint:{"fill-color":L[2],"fill-opacity":x(.2,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},A[6]]):{};N&128&&(U.$$scope={dirty:N,ctx:L}),u.$set(U);const q=N&13?ne(M,[M[0],N&8&&{filter:["all",on,L[3]]},N&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*It}},N&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};i.$set(q)},i(L){f||(g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(u.$$.fragment,L),g(i.$$.fragment,L),f=!0)},o(L){d(e.$$.fragment,L),d(t.$$.fragment,L),d(o.$$.fragment,L),d(u.$$.fragment,L),d(i.$$.fragment,L),f=!1},d(L){L&&(p(n),p(r),p(s),p(a)),w(e,L),w(t,L),w(o,L),w(u,L),w(i,L)}}}function _g(l){let e,n;return e=new yt({props:{data:l[1],$$slots:{default:[mg]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gg(l,e,n){let t,r;Ae(l,Lt,i=>n(5,r=i));let{showSchemes:o}=e,[s]=Fn();const u=["!=",["get","hide_while_editing"],!0],a=["!=",["get","endpoint"],!0];return l.$$set=i=>{"showSchemes"in i&&n(0,o=i.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=Eo(r))},[o,t,s,u,a,r]}class dg extends Y{constructor(e){super(),K(this,e,gg,_g,J,{showSchemes:0})}}function Hl(l,e,n){const t=l.slice();return t[13]=e[n],t}function ql(l,e,n){const t=l.slice();return t[16]=e[n],t}function hg(l){let e,n;return e=new U_({props:{loadFile:l[7]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Gl(l){let e,n,t,r,o;e=new Ot({props:{$$slots:{default:[bg]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(a){l[9](a)}let u={title:"About this scheme data",$$slots:{default:[vg]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new Jl({props:u}),W.push(()=>V(t,"open",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,i){v(e,a,i),$(a,n,i),v(t,a,i),o=!0},p(a,i){const f={};i&524288&&(f.$$scope={dirty:i,ctx:a}),e.$set(f);const c={};i&524304&&(c.$$scope={dirty:i,ctx:a}),!r&&i&8&&(r=!0,c.open=a[3],X(()=>r=!1)),t.$set(c)},i(a){o||(g(e.$$.fragment,a),g(t.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),o=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function bg(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ul(l){let e,n,t=l[16]+"",r;return{c(){e=T("li"),n=T("p"),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&B(r,t)},d(o){o&&p(e)}}}function vg(l){let e,n,t,r,o=De(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=Ul(ql(l,o,u));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=O(),r=T("ul");for(let u=0;u<s.length;u+=1)s[u].c();G(e,"class","govuk-prose")},m(u,a){$(u,e,a),h(e,n),h(e,t),h(e,r);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(r,null)},p(u,a){if(a&16){o=De(u[4].notes);let i;for(i=0;i<o.length;i+=1){const f=ql(u,o,i);s[i]?s[i].p(f,a):(s[i]=Ul(f),s[i].c(),s[i].m(r,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=o.length}},d(u){u&&p(e),ct(s,u)}}}function Wl(l){let e,n,t,r;function o(a){l[10](a)}function s(a){l[11](a)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new Va({props:u}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){b(e.$$.fragment)},m(a,i){v(e,a,i),r=!0},p(a,i){const f={};!n&&i&2&&(n=!0,f.schemesToBeShown=a[1],X(()=>n=!1)),!t&&i&4&&(t=!0,f.show=a[2],X(()=>t=!1)),e.$set(f)},i(a){r||(g(e.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),r=!1},d(a){w(e,a)}}}function Vl(l){let e,n;return e=new Z_({props:{scheme:l[13]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Xl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&Vl(l);return{c(){r&&r.c(),n=Me()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&g(r,1)):(r=Vl(o),r.c(),g(r,1),r.m(n.parentNode,n)):r&&(ce(),d(r,1,1,()=>{r=null}),$e())},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function wg(l){let e,n,t,r,o,s,u,a,i,f,c=Tn()=="Private (development)",_,m,y,C,S,A,R,M,E;o=new Xo({props:{boundaryGeojson:l[4]}}),i=new Do({});let L=c&&hg(l),N=l[4].notes&&Gl(l);y=new jo({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),S=new no({props:{errorMessage:l[0]}});let P=l[6].size>0&&Wl(l),I=De(l[6].values()),j=[];for(let q=0;q<I.length;q+=1)j[q]=Xl(Hl(l,I,q));const U=q=>d(j[q],1,1,()=>{j[q]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",r=O(),b(o.$$.fragment),s=O(),u=T("p"),u.textContent=`App version: ${Tn()}`,a=O(),b(i.$$.fragment),f=O(),L&&L.c(),_=O(),N&&N.c(),m=O(),b(y.$$.fragment),C=O(),b(S.$$.fragment),A=O(),P&&P.c(),R=O(),M=T("ul");for(let q=0;q<j.length;q+=1)j[q].c();ke(n,"display","flex"),ke(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(q,D){$(q,e,D),h(e,n),h(n,t),h(n,r),v(o,n,null),h(e,s),h(e,u),h(e,a),v(i,e,null),h(e,f),L&&L.m(e,null),h(e,_),N&&N.m(e,null),h(e,m),v(y,e,null),h(e,C),v(S,e,null),h(e,A),P&&P.m(e,null),h(e,R),h(e,M);for(let F=0;F<j.length;F+=1)j[F]&&j[F].m(M,null);E=!0},p(q,D){const F={};D&16&&(F.boundaryGeojson=q[4]),o.$set(F),c&&L.p(q,D),q[4].notes?N?(N.p(q,D),D&16&&g(N,1)):(N=Gl(q),N.c(),g(N,1),N.m(e,m)):N&&(ce(),d(N,1,1,()=>{N=null}),$e());const z={};if(D&1&&(z.errorMessage=q[0]),S.$set(z),q[6].size>0?P?(P.p(q,D),D&64&&g(P,1)):(P=Wl(q),P.c(),g(P,1),P.m(e,R)):P&&(ce(),d(P,1,1,()=>{P=null}),$e()),D&66){I=De(q[6].values());let oe;for(oe=0;oe<I.length;oe+=1){const se=Hl(q,I,oe);j[oe]?(j[oe].p(se,D),g(j[oe],1)):(j[oe]=Xl(se),j[oe].c(),g(j[oe],1),j[oe].m(M,null))}for(ce(),oe=I.length;oe<j.length;oe+=1)U(oe);$e()}},i(q){if(!E){g(o.$$.fragment,q),g(i.$$.fragment,q),g(L),g(N),g(y.$$.fragment,q),g(S.$$.fragment,q),g(P);for(let D=0;D<I.length;D+=1)g(j[D]);E=!0}},o(q){d(o.$$.fragment,q),d(i.$$.fragment,q),d(L),d(N),d(y.$$.fragment,q),d(S.$$.fragment,q),d(P),j=j.filter(Boolean);for(let D=0;D<j.length;D+=1)d(j[D]);E=!1},d(q){q&&p(e),w(o),w(i),L&&L.d(),N&&N.d(),w(y),w(S),P&&P.d(),ct(j,q)}}}function kg(l){let e,n,t,r,o,s,u,a,i,f;return e=new dg({props:{showSchemes:l[2]}}),r=new Jo({}),s=new H_({}),i=new j_({}),{c(){b(e.$$.fragment),n=O(),t=T("div"),b(r.$$.fragment),o=O(),b(s.$$.fragment),u=O(),a=T("div"),b(i.$$.fragment),G(t,"class","top-left svelte-gm5o0v"),G(a,"class","top-right svelte-gm5o0v")},m(c,_){v(e,c,_),$(c,n,_),$(c,t,_),v(r,t,null),h(t,o),v(s,t,null),$(c,u,_),$(c,a,_),v(i,a,null),f=!0},p(c,_){const m={};_&4&&(m.showSchemes=c[2]),e.$set(m)},i(c){f||(g(e.$$.fragment,c),g(r.$$.fragment,c),g(s.$$.fragment,c),g(i.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(r.$$.fragment,c),d(s.$$.fragment,c),d(i.$$.fragment,c),f=!1},d(c){c&&(p(n),p(t),p(u),p(a)),w(e,c),w(r),w(s),w(i)}}}function yg(l){let e,n,t;return n=new Ro({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[kg]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Sg(l){let e,n;return e=new os({props:{$$slots:{main:[yg],sidebar:[wg]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Cg(l,e,n){let t,r,o;Ae(l,Lt,S=>n(4,t=S)),Ae(l,Zn,S=>n(5,r=S)),Ae(l,un,S=>n(6,o=S)),Rn(()=>{Bo()});const s=new URLSearchParams(window.location.search);Zn.set(s.get("style")||"dataviz");let u="",a=new Set,i=!0,f=!1;function c(S){try{Lt.set(JSON.parse(S)),un.set(Ta(t)),n(0,u="")}catch(A){n(0,u=`The file you loaded is broken: ${A}`)}}const _=()=>n(3,f=!0);function m(S){f=S,n(3,f)}function y(S){a=S,n(1,a)}function C(S){i=S,n(2,i)}return[u,a,i,f,t,r,o,c,_,m,y,C]}class Tg extends Y{constructor(e){super(),K(this,e,Cg,Sg,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Tg({target:document.getElementById("app")});
