import{S as Y,i as K,s as J,e as T,j as G,ao as Ce,k as $,a7 as Z,p,aU as Vl,b as W,c as V,f as O,h as b,m as v,x as Ze,n as X,t as g,o as d,q as w,O as dt,T as ht,U as bt,V as vt,b2 as Wn,l as h,ab as je,_ as ce,$ as $e,aX as wt,v as k,J as B,Z as De,a0 as Dn,a1 as Xl,r as Ae,a2 as Jl,a3 as Yl,a4 as ut,a5 as Kl,a6 as Zl,b3 as So,Y as St,b4 as Vn,b5 as Co,G as yt,aO as kn,aF as yn,P as ee,I as Oe,a as ct,ag as Qt,aT as To,av as $t,aj as En,an as nn,u as jn,F as Sn,w as Ye,b1 as te,b6 as he,b7 as Le,H as x,D as qe,W as ne,b8 as ae,N as Ql,aZ as xt,b9 as cn,R as xl,ba as Kt,E as eo,bb as Oo,bc as Lo,g as Cn,al as Ao,C as Io,a$ as Xn,ap as No,aq as Jn,ar as Yn,as as on,b0 as Kn,L as Po,d as Mo,M as Fo,z as Do}from"./index-4ca1fce7.js";import{l as H,d as Ke,a as Eo,g as He,f as jo,M as Ro,k as _t,h as xe,i as le,R as Bo,C as pt,S as zo,m as Ho,B as qo,c as Zn,b as Lt,Z as Go,G as Uo}from"./ZoomOutMap-6bb90067.js";import{P as fe}from"./Popup-54150c4c.js";function Wo(l){let e;return{c(){e=T("span"),G(e,"class","svelte-kzgqtg"),Ce(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Ce(e,"background",n[0])},i:Z,o:Z,d(n){n&&p(e)}}}function Vo(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Pe extends Y{constructor(e){super(),K(this,e,Vo,Wo,J,{color:0})}}const Xo="/atip/browse_tool_panel/assets/help-d011708a.svg";function Jo(l){let e,n;const t=l[1].default,r=dt(t,l,l[4],null);return{c(){e=T("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&ht(r,t,o,o[4],n?vt(t,o[4],s,null):bt(o[4]),null)},i(o){n||(g(r,o),n=!0)},o(o){d(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function Yo(l){let e,n,t,r,o,s,u;function a(f){l[3](f)}let i={title:"Help",$$slots:{default:[Jo]},$$scope:{ctx:l}};return l[0]!==void 0&&(i.open=l[0]),t=new Vl({props:i}),W.push(()=>V(t,"open",a)),{c(){e=T("button"),e.innerHTML=`<img src="${Xo}" title="Help" alt="Help"/>`,n=O(),b(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),v(t,f,c),o=!0,s||(u=Ze(e,"click",l[2]),s=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,_.open=f[0],X(()=>r=!1)),t.$set(_)},i(f){o||(g(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),w(t,f),s=!1,u()}}}function Ko(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(a){o=a,n(0,o)}return l.$$set=a=>{"$$scope"in a&&n(4,r=a.$$scope)},[o,t,s,u,r]}class me extends Y{constructor(e){super(),K(this,e,Ko,Yo,J,{})}}const Zo=l=>({}),Qn=l=>({}),Qo=l=>({}),xn=l=>({});function xo(l){let e,n,t,r,o,s,u,a,i,f,c;const _=l[4].sidebar,m=dt(_,l,l[3],xn),y=l[4].main,C=dt(y,l,l[3],Qn);return{c(){e=T("div"),n=T("aside"),t=T("div"),m&&m.c(),r=O(),o=T("button"),o.textContent="â†’",u=O(),a=T("main"),C&&C.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(o,"type","button"),G(o,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(n,"class",s=Wn(l[1]?"":"collapsed")+" svelte-1n0etgd"),Ce(n,"--sidebarWidth",l[0]),G(a,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(S,A){$(S,e,A),h(e,n),h(n,t),m&&m.m(t,null),h(n,r),h(n,o),h(e,u),h(e,a),C&&C.m(a,null),i=!0,f||(c=Ze(o,"click",l[2]),f=!0)},p(S,[A]){m&&m.p&&(!i||A&8)&&ht(m,_,S,S[3],i?vt(_,S[3],A,Qo):bt(S[3]),xn),(!i||A&2&&s!==(s=Wn(S[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(n,"class",s),(!i||A&1)&&Ce(n,"--sidebarWidth",S[0]),C&&C.p&&(!i||A&8)&&ht(C,y,S,S[3],i?vt(y,S[3],A,Zo):bt(S[3]),Qn)},i(S){i||(g(m,S),g(C,S),i=!0)},o(S){d(m,S),d(C,S),i=!1},d(S){S&&p(e),m&&m.d(S),C&&C.d(S),f=!1,c()}}}function es(l,e,n){let{$$slots:t={},$$scope:r}=e,{sidebarWidth:o="25rem"}=e,s=!0;function u(){n(1,s=!s)}return l.$$set=a=>{"sidebarWidth"in a&&n(0,o=a.sidebarWidth),"$$scope"in a&&n(3,r=a.$$scope)},[o,s,u,r,t]}class ts extends Y{constructor(e){super(),K(this,e,es,xo,J,{sidebarWidth:0})}}function er(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function tr(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Pe({props:{color:l[2]}}),{c(){e=T("li"),b(n.$$.fragment),t=O(),o=k(r),s=O()},m(a,i){$(a,e,i),v(n,e,null),h(e,t),h(e,o),h(e,s),u=!0},p(a,i){const f={};i&1&&(f.color=a[2]),n.$set(f),(!u||i&1)&&r!==(r=a[1]+"")&&B(o,r)},i(a){u||(g(n.$$.fragment,a),u=!0)},o(a){d(n.$$.fragment,a),u=!1},d(a){a&&p(e),w(n)}}}function ns(l){let e,n,t=je(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=tr(er(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){e=T("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(e,null);n=!0},p(s,[u]){if(u&1){t=je(s[0]);let a;for(a=0;a<t.length;a+=1){const i=er(s,t,a);r[a]?(r[a].p(i,u),g(r[a],1)):(r[a]=tr(i),r[a].c(),g(r[a],1),r[a].m(e,null))}for(ce(),a=t.length;a<r.length;a+=1)o(a);$e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)g(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),wt(r,s)}}}function rs(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class Rn extends Y{constructor(e){super(),K(this,e,rs,ns,J,{rows:0})}}function nr(l){let e=l[0],n,t,r=rr(l);return{c(){r.c(),n=De()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?(ce(),d(r,1,1,Z),$e(),r=rr(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function rr(l){let e;const n=l[10].default,t=dt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&ht(t,n,r,r[9],e?vt(n,r[9],o,null):bt(r[9]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function ls(l){let e,n,t=l[0]&&nr(l);return{c(){t&&t.c(),e=De()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=nr(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function os(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Dn("raster-source")}=e,{tiles:a}=e,{tileSize:i=void 0}=e;const{map:f,self:c}=Xl();Ae(l,f,y=>n(8,r=y)),Ae(l,c,y=>n(0,t=y));let _,m=!0;return Jl(()=>{t&&_&&r&&(Yl(f,t,_),ut(c,t=null,t),n(6,_=void 0))}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,a=y.tiles),"tileSize"in y&&n(5,i=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(ut(c,t=u,t),Kl(r,t,Zl({type:"raster",tiles:a,tileSize:i}),y=>r&&y===t,()=>{t&&(n(6,_=r==null?void 0:r.getSource(t)),n(7,m=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,_=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&_&&(m?n(7,m=!1):_.setTiles(a))},[t,f,c,u,a,i,_,m,r,s,o]}class ss extends Y{constructor(e){super(),K(this,e,os,ls,J,{id:3,tiles:4,tileSize:5})}}function is(l){let e;const n=l[16].default,t=dt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&ht(t,n,r,r[24],e?vt(n,r[24],o,null):bt(r[24]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function as(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[is]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new So({props:o}),W.push(()=>V(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,[u]){const a={};u&2&&(a.id=s[1]),u&4&&(a.source=s[2]),u&8&&(a.sourceLayer=s[3]),u&16&&(a.beforeId=s[4]),u&32&&(a.beforeLayerType=s[5]),u&64&&(a.paint=s[6]),u&128&&(a.layout=s[7]),u&256&&(a.filter=s[8]),u&512&&(a.applyToClusters=s[9]),u&1024&&(a.minzoom=s[10]),u&2048&&(a.maxzoom=s[11]),u&4096&&(a.hoverCursor=s[12]),u&8192&&(a.manageHoverState=s[13]),u&16384&&(a.eventsIfTopMost=s[14]),u&32768&&(a.interactive=s[15]),u&16777216&&(a.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,a.hovered=s[0],X(()=>n=!1)),e.$set(a)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function fs(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Dn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:a=void 0}=e,{beforeLayerType:i=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:A=!1}=e,{hovered:R=null}=e,{eventsIfTopMost:F=!1}=e,{interactive:D=!0}=e;function L(E){R=E,n(0,R)}function N(E){St.call(this,l,E)}function M(E){St.call(this,l,E)}function I(E){St.call(this,l,E)}function j(E){St.call(this,l,E)}function U(E){St.call(this,l,E)}function q(E){St.call(this,l,E)}return l.$$set=E=>{"id"in E&&n(1,o=E.id),"source"in E&&n(2,s=E.source),"sourceLayer"in E&&n(3,u=E.sourceLayer),"beforeId"in E&&n(4,a=E.beforeId),"beforeLayerType"in E&&n(5,i=E.beforeLayerType),"paint"in E&&n(6,f=E.paint),"layout"in E&&n(7,c=E.layout),"filter"in E&&n(8,_=E.filter),"applyToClusters"in E&&n(9,m=E.applyToClusters),"minzoom"in E&&n(10,y=E.minzoom),"maxzoom"in E&&n(11,C=E.maxzoom),"hoverCursor"in E&&n(12,S=E.hoverCursor),"manageHoverState"in E&&n(13,A=E.manageHoverState),"hovered"in E&&n(0,R=E.hovered),"eventsIfTopMost"in E&&n(14,F=E.eventsIfTopMost),"interactive"in E&&n(15,D=E.interactive),"$$scope"in E&&n(24,r=E.$$scope)},[R,o,s,u,a,i,f,c,_,m,y,C,S,A,F,D,t,L,N,M,I,j,U,q,r]}class $n extends Y{constructor(e){super(),K(this,e,fs,as,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function lr(l){let e=l[0],n,t,r=or(l);return{c(){r.c(),n=De()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?(ce(),d(r,1,1,Z),$e(),r=or(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function or(l){let e;const n=l[9].default,t=dt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&ht(t,n,r,r[8],e?vt(n,r[8],o,null):bt(r[8]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function us(l){let e,n,t=l[0]&&lr(l);return{c(){t&&t.c(),e=De()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=lr(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function cs(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Dn("vector")}=e,{url:a=null}=e,{tiles:i=null}=e,{promoteId:f=null}=e;if(a&&a.includes("pmtiles://")&&!Vn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Co;Vn.addProtocol("pmtiles",y.tile)}const{map:c,self:_}=Xl();Ae(l,c,y=>n(7,r=y)),Ae(l,_,y=>n(0,t=y));let m;return Jl(()=>{t&&r&&(Yl(c,t,m),ut(_,t=null,t),m=void 0)}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,a=y.url),"tiles"in y&&n(5,i=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(ut(_,t=u,t),Kl(r,t,Zl({type:"vector",url:a,tiles:i,promoteId:f}),y=>r&&y===t,()=>{t&&(m=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{m=r==null?void 0:r.getSource(u)}))},[t,c,_,u,a,i,f,r,s,o]}class ke extends Y{constructor(e){super(),K(this,e,cs,us,J,{id:3,url:4,tiles:5,promoteId:6})}}const $s="/atip/browse_tool_panel/assets/measure-2cd04177.svg";function sr(l,e,n){const t=l.slice();return t[11]=e[n],t[12]=e,t[13]=n,t}function ps(l){let e,n,t;return n=new ct({props:{$$slots:{default:[_s]},$$scope:{ctx:l}}}),n.$on("click",l[9]),{c(){e=T("div"),b(n.$$.fragment)},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16384&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ms(l){let e,n,t,r,o,s,u,a,i,f;n=new ct({props:{$$slots:{default:[gs]},$$scope:{ctx:l}}}),n.$on("click",l[4]);let c=l[2]&&ir(l);o=new He({props:{label:"Help",$$slots:{default:[ds]},$$scope:{ctx:l}}}),u=new jo({}),u.$on("click",l[3]);let _=je(l[0]),m=[];for(let C=0;C<_.length;C+=1)m[C]=ar(sr(l,_,C));const y=C=>d(m[C],1,1,()=>{m[C]=null});return{c(){e=T("div"),b(n.$$.fragment),t=O(),c&&c.c(),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),a=O();for(let C=0;C<m.length;C+=1)m[C].c();i=De()},m(C,S){$(C,e,S),v(n,e,null),$(C,t,S),c&&c.m(C,S),$(C,r,S),v(o,C,S),$(C,s,S),v(u,C,S),$(C,a,S);for(let A=0;A<m.length;A+=1)m[A]&&m[A].m(C,S);$(C,i,S),f=!0},p(C,S){const A={};S&16384&&(A.$$scope={dirty:S,ctx:C}),n.$set(A),C[2]?c?c.p(C,S):(c=ir(C),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null);const R={};if(S&16384&&(R.$$scope={dirty:S,ctx:C}),o.$set(R),S&65){_=je(C[0]);let F;for(F=0;F<_.length;F+=1){const D=sr(C,_,F);m[F]?(m[F].p(D,S),g(m[F],1)):(m[F]=ar(D),m[F].c(),g(m[F],1),m[F].m(i.parentNode,i))}for(ce(),F=_.length;F<m.length;F+=1)y(F);$e()}},i(C){if(!f){g(n.$$.fragment,C),g(o.$$.fragment,C),g(u.$$.fragment,C);for(let S=0;S<_.length;S+=1)g(m[S]);f=!0}},o(C){d(n.$$.fragment,C),d(o.$$.fragment,C),d(u.$$.fragment,C),m=m.filter(Boolean);for(let S=0;S<m.length;S+=1)d(m[S]);f=!1},d(C){C&&(p(e),p(t),p(r),p(s),p(a),p(i)),w(n),c&&c.d(C),w(o,C),w(u,C),wt(m,C)}}}function _s(l){let e,n;return{c(){e=T("img"),Qt(e.src,n=$s)||G(e,"src",n),G(e,"alt","Measure lines")},m(t,r){$(t,e,r)},p:Z,d(t){t&&p(e)}}}function gs(l){let e;return{c(){e=k("Stop measuring")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ir(l){let e,n,t=l[2].toFixed(2)+"",r,o;return{c(){e=T("p"),n=k("Length: "),r=k(t),o=k(" meters")},m(s,u){$(s,e,u),h(e,n),h(e,r),h(e,o)},p(s,u){u&4&&t!==(t=s[2].toFixed(2)+"")&&B(r,t)},d(s){s&&p(e)}}}function ds(l){let e;return{c(){e=T("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){$(n,e,t)},p:Z,d(n){n&&p(e)}}}function hs(l){let e,n;return{c(){e=T("span"),n=O(),G(e,"class","dot svelte-1tzt432")},m(t,r){$(t,e,r),$(t,n,r)},p:Z,d(t){t&&(p(e),p(n))}}}function ar(l){let e,n,t;function r(u){l[7](u,l[11],l[12],l[13])}function o(){return l[8](l[13])}let s={draggable:!0,$$slots:{default:[hs]},$$scope:{ctx:l}};return l[11]!==void 0&&(s.lngLat=l[11]),e=new Ro({props:s}),W.push(()=>V(e,"lngLat",r)),e.$on("click",o),{c(){b(e.$$.fragment)},m(u,a){v(e,u,a),t=!0},p(u,a){l=u;const i={};a&16384&&(i.$$scope={dirty:a,ctx:l}),!n&&a&1&&(n=!0,i.lngLat=l[11],X(()=>n=!1)),e.$set(i)},i(u){t||(g(e.$$.fragment,u),t=!0)},o(u){d(e.$$.fragment,u),t=!1},d(u){w(e,u)}}}function bs(l){let e,n;const t=[H("measurement-line"),{paint:{"line-color":Ke.measuringLine,"line-width":5}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u={};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function vs(l){let e,n,t,r,o,s,u;const a=[ms,ps],i=[];function f(c,_){return c[1]?0:1}return e=f(l),n=i[e]=a[e](l),r=new yt({props:{data:l[0].length<2?kn():yn(l[0]),$$slots:{default:[bs]},$$scope:{ctx:l}}}),{c(){n.c(),t=O(),b(r.$$.fragment)},m(c,_){i[e].m(c,_),$(c,t,_),v(r,c,_),o=!0,s||(u=Ze(window,"keydown",l[5]),s=!0)},p(c,[_]){let m=e;e=f(c),e===m?i[e].p(c,_):(ce(),d(i[m],1,1,()=>{i[m]=null}),$e(),n=i[e],n?n.p(c,_):(n=i[e]=a[e](c),n.c()),g(n,1),n.m(t.parentNode,t));const y={};_&1&&(y.data=c[0].length<2?kn():yn(c[0])),_&16384&&(y.$$scope={dirty:_,ctx:c}),r.$set(y)},i(c){o||(g(n),g(r.$$.fragment,c),o=!0)},o(c){d(n),d(r.$$.fragment,c),o=!1},d(c){c&&p(t),i[e].d(c),w(r,c),s=!1,u()}}}function ws(l,e,n){let t,r=!1,o=[];function s(y){return y.length<2?null:1e3*Eo(yn(y),{units:"kilometers"})}function u(y){n(0,o=[...o,y.detail.lngLat.toArray()])}function a(){n(1,r=!1),n(0,o=[])}function i(y){r&&y.key==="Escape"&&(y.stopPropagation(),a())}function f(y){o.splice(y,1),n(0,o)}function c(y,C,S,A){S[A]=y,n(0,o)}const _=y=>f(y),m=()=>n(1,r=!0);return l.$$.update=()=>{l.$$.dirty&1&&n(2,t=s(o))},[o,r,t,u,a,i,f,c,_,m]}class ks extends Y{constructor(e){super(),K(this,e,ws,vs,J,{})}}const ys={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Re=Uint8Array,gt=Uint16Array,to=Uint32Array,no=new Re([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ro=new Re([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ss=new Re([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),lo=function(l,e){for(var n=new gt(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new to(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},oo=lo(no,2),so=oo[0],Cs=oo[1];so[28]=258,Cs[258]=28;var Ts=lo(ro,0),Os=Ts[0],Tn=new gt(32768);for(var we=0;we<32768;++we){var at=(we&43690)>>>1|(we&21845)<<1;at=(at&52428)>>>2|(at&13107)<<2,at=(at&61680)>>>4|(at&3855)<<4,Tn[we]=((at&65280)>>>8|(at&255)<<8)>>>1}var Zt=function(l,e,n){for(var t=l.length,r=0,o=new gt(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new gt(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new gt(1<<e);var a=15-e;for(r=0;r<t;++r)if(l[r])for(var i=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[Tn[c]>>>a]=i}else for(u=new gt(t),r=0;r<t;++r)l[r]&&(u[r]=Tn[s[l[r]-1]++]>>>15-l[r]);return u},rn=new Re(288);for(var we=0;we<144;++we)rn[we]=8;for(var we=144;we<256;++we)rn[we]=9;for(var we=256;we<280;++we)rn[we]=7;for(var we=280;we<288;++we)rn[we]=8;var io=new Re(32);for(var we=0;we<32;++we)io[we]=5;var Ls=Zt(rn,9,1),As=Zt(io,5,1),pn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},Ue=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},mn=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Is=function(l){return(l+7)/8|0},Bn=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?gt:l.BYTES_PER_ELEMENT==4?to:Re)(n-e);return t.set(l.subarray(e,n)),t},Ns=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],We=function(l,e,n){var t=new Error(e||Ns[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,We),!n)throw t;return t},Ps=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Re(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Re(t*3));var s=function(ge){var ve=e.length;if(ge>ve){var _e=new Re(Math.max(ve*2,ge));_e.set(e),e=_e}},u=n.f||0,a=n.p||0,i=n.b||0,f=n.l,c=n.d,_=n.m,m=n.n,y=t*8;do{if(!f){u=Ue(l,a,1);var C=Ue(l,a+1,3);if(a+=3,C)if(C==1)f=Ls,c=As,_=9,m=5;else if(C==2){var F=Ue(l,a,31)+257,D=Ue(l,a+10,15)+4,L=F+Ue(l,a+5,31)+1;a+=14;for(var N=new Re(L),M=new Re(19),I=0;I<D;++I)M[Ss[I]]=Ue(l,a+I*3,7);a+=D*3;for(var j=pn(M),U=(1<<j)-1,q=Zt(M,j,1),I=0;I<L;){var E=q[Ue(l,a,U)];a+=E&15;var S=E>>>4;if(S<16)N[I++]=S;else{var P=0,z=0;for(S==16?(z=3+Ue(l,a,3),a+=2,P=N[I-1]):S==17?(z=3+Ue(l,a,7),a+=3):S==18&&(z=11+Ue(l,a,127),a+=7);z--;)N[I++]=P}}var oe=N.subarray(0,F),se=N.subarray(F);_=pn(oe),m=pn(se),f=Zt(oe,_,1),c=Zt(se,m,1)}else We(1);else{var S=Is(a)+4,A=l[S-4]|l[S-3]<<8,R=S+A;if(R>t){o&&We(0);break}r&&s(i+A),e.set(l.subarray(S,R),i),n.b=i+=A,n.p=a=R*8,n.f=u;continue}if(a>y){o&&We(0);break}}r&&s(i+131072);for(var ye=(1<<_)-1,de=(1<<m)-1,Se=a;;Se=a){var P=f[mn(l,a)&ye],ie=P>>>4;if(a+=P&15,a>y){o&&We(0);break}if(P||We(2),ie<256)e[i++]=ie;else if(ie==256){Se=a,f=null;break}else{var Ne=ie-254;if(ie>264){var I=ie-257,Te=no[I];Ne=Ue(l,a,(1<<Te)-1)+so[I],a+=Te}var be=c[mn(l,a)&de],re=be>>>4;be||We(3),a+=be&15;var se=Os[re];if(re>3){var Te=ro[re];se+=mn(l,a)&(1<<Te)-1,a+=Te}if(a>y){o&&We(0);break}r&&s(i+131072);for(var pe=i+Ne;i<pe;i+=4)e[i]=e[i-se],e[i+1]=e[i+1-se],e[i+2]=e[i+2-se],e[i+3]=e[i+3-se];i=pe}}n.l=f,n.p=Se,n.b=i,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=m)}while(!u);return i==e.length?e:Bn(e,0,i)},Ms=new Re(0),Je=function(l,e){return l[e]|l[e+1]<<8},Ve=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},_n=function(l,e){return Ve(l,e)+Ve(l,e+4)*4294967296};function Fs(l,e){return Ps(l,e)}var On=typeof TextDecoder<"u"&&new TextDecoder,Ds=0;try{On.decode(Ms,{stream:!0}),Ds=1}catch{}var Es=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,Bn(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function ao(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(On)return On.decode(l);var r=Es(l),o=r[0],s=r[1];return s.length&&We(8),o}}var js=function(l,e){return e+30+Je(l,e+26)+Je(l,e+28)},Rs=function(l,e,n){var t=Je(l,e+28),r=ao(l.subarray(e+46,e+46+t),!(Je(l,e+8)&2048)),o=e+46+t,s=Ve(l,e+20),u=n&&s==4294967295?Bs(l,o):[s,Ve(l,e+24),Ve(l,e+42)],a=u[0],i=u[1],f=u[2];return[Je(l,e+10),a,i,r,o+Je(l,e+30)+Je(l,e+32),f]},Bs=function(l,e){for(;Je(l,e)!=1;e+=4+Je(l,e+2));return[_n(l,e+12),_n(l,e+4),_n(l,e+20)]};function zs(l,e){for(var n={},t=l.length-22;Ve(l,t)!=101010256;--t)(!t||l.length-t>65558)&&We(13);var r=Je(l,t+8);if(!r)return{};var o=Ve(l,t+16),s=o==4294967295||r==65535;if(s){var u=Ve(l,t-12);s=Ve(l,u)==101075792,s&&(r=Ve(l,u+32),o=Ve(l,u+48))}for(var a=e&&e.filter,i=0;i<r;++i){var f=Rs(l,o,s),c=f[0],_=f[1],m=f[2],y=f[3],C=f[4],S=f[5],A=js(l,S);o=C,(!a||a({name:y,size:_,originalSize:m,compression:c}))&&(c?c==8?n[y]=Fs(l.subarray(A,A+_),new Re(m)):We(14,"unknown compression type "+c):n[y]=Bn(l,A,A+_))}return n}function Hs(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(gn):gn(l)}function gn(l){var e=new Uint8Array(l),n=zs(e);return Promise.resolve(qs(n))}function qs(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=ao(l[r])}return e}function Qe(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&kt(t)===e)return t;n++}}function ln(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&kt(r)===e&&n.push(r),t++}return n}function fn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&kt(r)===e&&n(r,t):n(r,t),t++}}function Gs(l,e,n){var t=[];return fn(l,e,function(r,o){t.push(n(r,o))}),t}var Us=/.+\:/;function kt(l){return l.tagName.replace(Us,"")}function fo(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+kt(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=fo(l.childNodes[t]),t++;return e+="</"+kt(l)+">",e}function Ws(l){var e=l.documentElement,n=Qe(e,"sheetData"),t=[];return fn(n,"row",function(r){fn(r,"c",function(o){t.push(o)})}),t}function Vs(l,e){return Qe(e,"v")}function Xs(l,e){if(e.firstChild&&kt(e.firstChild)==="is"&&e.firstChild.firstChild&&kt(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Js(l){var e=l.documentElement,n=Qe(e,"dimension");if(n)return n.getAttribute("ref")}function Ys(l){var e=l.documentElement,n=Qe(e,"cellStyleXfs");return n?ln(n,"xf"):[]}function Ks(l){var e=l.documentElement,n=Qe(e,"cellXfs");return n?ln(n,"xf"):[]}function Zs(l){var e=l.documentElement,n=Qe(e,"numFmts");return n?ln(n,"numFmt"):[]}function Qs(l){var e=l.documentElement;return Gs(e,"si",function(n){var t=Qe(n,"t");if(t)return t.textContent;var r="";return fn(n,"r",function(o){r+=Qe(o,"t").textContent}),r})}function xs(l){var e=l.documentElement;return Qe(e,"workbookPr")}function ei(l){var e=l.documentElement;return ln(e,"Relationship")}function ti(l){var e=l.documentElement,n=Qe(e,"sheets");return ln(n,"sheet")}function ni(l,e){var n=e.createDocument(l),t={},r=xs(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return ti(n).forEach(o),t}function ri(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),a=s.getAttribute("Type");switch(a){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=dn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=dn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=dn(u);break}};return ei(n).forEach(r),t}function dn(l){return l[0]==="/"?l.slice(1):"xl/"+l}function fr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function ur(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fr(Object(n),!0).forEach(function(t){li(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function li(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function oi(l,e){if(!l)return{};var n=e.createDocument(l),t=Ys(n).map(hn),r=Zs(n).map(si).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?ur(ur({},t[u.xfId]),hn(u,r)):hn(u,r)};return Ks(n).map(o)}function si(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function hn(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function ii(l,e){return l?Qs(e.createDocument(l)):[]}function uo(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function ai(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=fi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fi(l,e){if(l){if(typeof l=="string")return cr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cr(l,e)}}function cr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ui(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(ci.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&mi(t.numberFormat.template))return!0}}var ci=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],$i=/^\[\$-414\]/,pi=/;@$/;function mi(l){l=l.toLowerCase(),l=l.replace($i,""),l=l.replace(pi,"");for(var e=l.split(/\W+/),n=ai(e),t;!(t=n()).done;){var r=t.value;if(_i.indexOf(r)<0)return!1}return!0}var _i=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function gi(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,a=n.properties,i=n.options;switch(e||(e="n"),e){case"str":l=bn(l,i);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=bn(l,i);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=bn(l,i);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=di(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var _=ui(o(),s,i);_?(l=$r(l),l=uo(l,a)):l=(i.parseNumber||$r)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function di(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function bn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function $r(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var hi=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function bi(l){var e=function(i,f){return i-f},n=l.map(function(a){return a.row}).sort(e),t=l.map(function(a){return a.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function vi(l){for(var e=0,n=0;n<l.length;)e*=26,e+=hi.indexOf(l[n]),n++;return e}function co(l){return l=l.split(/(\d+)/),[parseInt(l[1]),vi(l[0].trim())]}function wi(l,e,n,t,r,o,s){var u=co(l.getAttribute("r")),a=Vs(e,l),i=a&&a.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:gi(i,f,{getInlineStringValue:function(){return Xs(e,l)},getInlineStringXml:function(){return fo(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function ki(l,e,n,t,r,o){var s=Ws(l);return s.length===0?[]:s.map(function(u){return wi(u,l,e,n,t,r,o)})}function yi(l,e){return Oi(l)||Ti(l,e)||Ci(l,e)||Si()}function Si(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ci(l,e){if(l){if(typeof l=="string")return pr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pr(l,e)}}function pr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ti(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(a){o=!0,u=a}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Oi(l){if(Array.isArray(l))return l}function Li(l){var e=Js(l);if(e)return e=e.split(":").map(co).map(function(n){var t=yi(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Ai(l,e,n,t,r,o){var s=e.createDocument(l),u=ki(s,e,n,t,r,o),a=Li(s)||bi(u);return{cells:u,dimensions:a}}function Ii(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Ni(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ni(l,e){if(l){if(typeof l=="string")return mr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(l,e)}}function mr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Pi(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,a=Ii(l[s]),i;!(i=a()).done;){var f=i.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Mi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Fi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fi(l,e){if(l){if(typeof l=="string")return _r(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(l,e)}}function _r(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Di(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=Mi(l),a;!(a=u()).done;){var i=a.value;if(t(i[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function Ei(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=$o(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ji(l,e){return zi(l)||Bi(l,e)||$o(l,e)||Ri()}function Ri(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $o(l,e){if(l){if(typeof l=="string")return gr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(l,e)}}function gr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Bi(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(a){o=!0,u=a}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function zi(l){if(Array.isArray(l))return l}function Hi(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=ji(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,a=new Array(u),i=0;i<u;){a[i]=new Array(s);for(var f=0;f<s;)a[i][f]=null,f++;i++}for(var c=Ei(t),_;!(_=c()).done;){var m=_.value,y=m.row-1,C=m.column-1;C<s&&y<u&&(a[y][C]=m.value)}var S=e.rowMap;if(S)for(var A=0;A<a.length;)S[A]=A,A++;return a=Pi(Di(a,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(a=e.transformData(a)),a}function qi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Gi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gi(l,e){if(l){if(typeof l=="string")return dr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(l,e)}}function dr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function hr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Ui(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hr(Object(n),!0).forEach(function(t){Wi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):hr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Wi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Vi(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Ui({sheet:1},n));var t=function(_){if(!l[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return l[_]},r=ri(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?ii(t(r.sharedStrings),e):[],s=r.styles?oi(t(r.styles),e):{},u=ni(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var a=Xi(n.sheet,u.sheets);if(!a||!r.sheets[a])throw Ji(n.sheet,u.sheets);var i=Ai(t(r.sheets[a]),e,o,s,u,n),f=Hi(i,n);return n.properties?{data:f,properties:u}:f}function Xi(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=qi(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Ji(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Ln(l){"@babel/helpers - typeof";return Ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ln(l)}function br(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Yi(l,e,n){return e&&br(l.prototype,e),n&&br(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function Ki(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function Zi(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&en(l,e)}function Qi(l){var e=po();return function(){var t=tn(l),r;if(e){var o=tn(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return xi(this,r)}}function xi(l,e){if(e&&(Ln(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ea(l)}function ea(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function An(l){var e=typeof Map=="function"?new Map:void 0;return An=function(t){if(t===null||!ta(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return an(t,arguments,tn(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),en(r,t)},An(l)}function an(l,e,n){return po()?an=Reflect.construct:an=function(r,o,s){var u=[null];u.push.apply(u,o);var a=Function.bind.apply(r,u),i=new a;return s&&en(i,s.prototype),i},an.apply(null,arguments)}function po(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ta(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function en(l,e){return en=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},en(l,e)}function tn(l){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},tn(l)}var Be=function(l){Zi(n,l);var e=Qi(n);function n(t){var r;return Ki(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Yi(n)}(An(Error));function na(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new Be("not_a_number")}if(typeof l!="number")throw new Be("not_a_number");if(isNaN(l))throw new Be("invalid_number");if(!isFinite(l))throw new Be("out_of_bounds");return l}function ra(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new Be("invalid_number");if(!isFinite(l))throw new Be("out_of_bounds");return String(l)}throw new Be("not_a_string")}function la(l){if(typeof l=="boolean")return l;throw new Be("not_a_boolean")}function oa(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new Be("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new Be("invalid_number");if(!isFinite(l))throw new Be("out_of_bounds");var t=uo(l,n);if(isNaN(t.valueOf()))throw new Be("out_of_bounds");return t}throw new Be("not_a_date")}function sa(l,e){return fa(l)||aa(l,e)||mo(l,e)||ia()}function ia(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aa(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(a){o=!0,u=a}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function fa(l){if(Array.isArray(l))return l}function In(l){"@babel/helpers - typeof";return In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(l)}function ua(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=mo(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mo(l,e){if(l){if(typeof l=="string")return vr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vr(l,e)}}function vr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function wr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function kr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?wr(Object(n),!0).forEach(function(t){ca(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):wr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ca(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var yr={isColumnOriented:!1};function $a(l,e,n){n?n=kr(kr({},yr),n):n=yr;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ga(e),r&&(l=_a(l));for(var u=l[0],a=[],i=[],f=1;f<l.length;f++){var c=_o(e,l[f],f,u,i,n);(c!==null||s===!1)&&a.push(c)}if(o)for(var _=ua(i),m;!(m=_()).done;){var y=m.value;y.row=o[y.row-1]+1}return{rows:a,errors:i}}function _o(l,e,n,t,r,o){for(var s={},u=!0,a=function(R){var F=R.column,D=R.value,L=R.error,N=R.reason,M={error:L,row:n+1,column:F,value:D};return N&&(M.reason=N),l[F].type&&(M.type=l[F].type),M},i=[],f=function(){var R=_[c],F=l[R],D=In(F.type)==="object"&&!Array.isArray(F.type),L=e[t.indexOf(R)];L===void 0&&(L=null);var N=void 0,M=void 0,I=void 0;if(D)N=_o(F.type,e,n,t,r,o);else if(L===null)N=null;else if(Array.isArray(F.type)){var j=!1,U=ma(L).map(function(E){var P=Sr(E,F,o);return P.error&&(N=E,M=P.error,I=P.reason),P.value!==null&&(j=!0),P.value});M||(N=j?U:null)}else{var q=Sr(L,F,o);M=q.error,I=q.reason,N=M?L:q.value}!M&&N===null&&(typeof F.required=="function"?i.push({column:R}):F.required===!0&&(M="required")),M?r.push(a({column:R,value:N,error:M,reason:I})):(u&&N!==null&&(u=!1),(N!==null||o.includeNullValues)&&(s[F.prop]=N))},c=0,_=Object.keys(l);c<_.length;c++)f();if(u)return null;for(var m=0,y=i;m<y.length;m++){var C=y[m].column,S=l[C].required(s);S&&r.push(a({column:C,value:null,error:"required"}))}return s}function Sr(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=Ct(l,e.parse):e.type?t=pa(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function Ct(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function pa(l,e,n){switch(e){case String:return Ct(l,ra);case Number:return Ct(l,na);case Date:return Ct(l,function(t){return oa(t,{properties:n.properties})});case Boolean:return Ct(l,la);default:if(typeof e=="function")return Ct(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function go(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=go(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function ma(l){for(var e=[],n=0;n<l.length;){var t=go(l,",",n),r=sa(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var _a=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function ga(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function Nn(l){"@babel/helpers - typeof";return Nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(l)}function ho(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;Nn(o)==="object"&&(o=Object.keys(l[r])[0],s=ho(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var da=["schema","map"];function Cr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function sn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cr(Object(n),!0).forEach(function(t){ha(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Cr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ha(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ba(l,e){if(l==null)return{};var n=va(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function va(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function wa(l,e,n){var t=n.schema,r=n.map,o=ba(n,da);!t&&r&&(t=ho(r));var s=Vi(l,e,sn(sn({},o),{},{properties:t||o.properties}));return t?$a(s.data,t,sn(sn({},o),{},{properties:s.properties})):s}function ka(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Hs(l).then(function(n){return wa(n,ys,e)})}function ya(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>Sa(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function Sa(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function Ca(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await ka(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=To(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Pn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function Ta(l){return $t(["get","intervention_type"],{area:Ke.area,route:Ke.route,crossing:Ke.crossing,other:Ke.other},"white")}function Oa(l){return[["Areas",Ke.area],["Routes",Ke.route],["Crossings",Ke.crossing],["Other",Ke.other]]}const Q={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},ze=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Mn(){let[l,e]=bo(Pn,Q.funding_programmes);return[$t(["get","funding_programme"],l,"grey"),e]}function La(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=bo(l,Q.current_milestone);return[$t(["get","current_milestone"],e,"grey"),n]}function bo(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Aa(l){let e,n;return e=new Rn({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ia(l){let e,n,t,r,o;function s(a){l[3](a)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new _t({props:u}),W.push(()=>V(e,"value",s)),e.$on("change",l[2]),r=new He({props:{label:"Legend",$$slots:{default:[Aa]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};!n&&i&1&&(n=!0,f.value=a[0],X(()=>n=!1)),e.$set(f);const c={};i&66&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}function Na(l,e,n){let t;Ae(l,En,i=>n(4,t=i));let r="fundingProgramme",[o,s]=Mn();function u(){let i;r=="interventionType"?(i=Ta(),n(1,s=Oa())):r=="fundingProgramme"?n(1,[i,s]=Mn(),s):r=="currentMilestone"&&n(1,[i,s]=La(),s),t.setPaintProperty("interventions-points","circle-color",i),t.setPaintProperty("interventions-lines","line-color",i),t.setPaintProperty("interventions-polygons","fill-color",i),t.setPaintProperty("interventions-polygons-outlines","line-color",i)}function a(i){r=i,n(0,r)}return[r,s,u,a]}class Pa extends Y{constructor(e){super(),K(this,e,Na,Ia,J,{})}}const Tt=nn({type:"FeatureCollection",features:[],schemes:{}}),un=nn(new Map),Tr=nn(!0),At=nn(""),It=nn("");function Ma(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fa(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Da(l){let e,n,t,r,o,s;return t=new ct({props:{$$slots:{default:[Fa]},$$scope:{ctx:l}}}),t.$on("click",l[19]),{c(){e=T("input"),n=O(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,a){$(u,e,a),Ye(e,l[7]),$(u,n,a),v(t,u,a),r=!0,o||(s=Ze(e,"input",l[18]),o=!0)},p(u,a){a&128&&e.value!==u[7]&&Ye(e,u[7]);const i={};a&134217728&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){r||(g(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function Ea(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(l){let e,n,t,r,o,s;return t=new ct({props:{$$slots:{default:[Ea]},$$scope:{ctx:l}}}),t.$on("click",l[21]),{c(){e=T("input"),n=O(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,a){$(u,e,a),Ye(e,l[6]),$(u,n,a),v(t,u,a),r=!0,o||(s=Ze(e,"input",l[20]),o=!0)},p(u,a){a&64&&e.value!==u[6]&&Ye(e,u[6]);const i={};a&134217728&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){r||(g(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function Ra(l){let e,n,t,r,o,s,u,a,i,f,c,_,m,y,C,S,A,R,F,D;e=new ct({props:{$$slots:{default:[Ma]},$$scope:{ctx:l}}}),e.$on("click",l[13]);function L(P){l[14](P)}let N={label:"Authority or region",choices:l[8],emptyOption:!0};l[2]!==void 0&&(N.value=l[2]),t=new _t({props:N}),W.push(()=>V(t,"value",L));function M(P){l[15](P)}let I={label:"Funding programme",choices:l[9],emptyOption:!0};l[3]!==void 0&&(I.value=l[3]),s=new _t({props:I}),W.push(()=>V(s,"value",M));function j(P){l[16](P)}let U={label:"Current milestone",choices:l[10],emptyOption:!0};l[4]!==void 0&&(U.value=l[4]),i=new _t({props:U}),W.push(()=>V(i,"value",j));function q(P){l[17](P)}let E={label:"Sketch source",choices:l[12],emptyOption:!0};return l[5]!==void 0&&(E.value=l[5]),_=new _t({props:E}),W.push(()=>V(_,"value",q)),C=new Sn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Da]},$$scope:{ctx:l}}}),A=new Sn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[ja]},$$scope:{ctx:l}}}),F=new Pa({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment),a=O(),b(i.$$.fragment),c=O(),b(_.$$.fragment),y=O(),b(C.$$.fragment),S=O(),b(A.$$.fragment),R=O(),b(F.$$.fragment)},m(P,z){v(e,P,z),$(P,n,z),v(t,P,z),$(P,o,z),v(s,P,z),$(P,a,z),v(i,P,z),$(P,c,z),v(_,P,z),$(P,y,z),v(C,P,z),$(P,S,z),v(A,P,z),$(P,R,z),v(F,P,z),D=!0},p(P,z){const oe={};z&134217728&&(oe.$$scope={dirty:z,ctx:P}),e.$set(oe);const se={};z&256&&(se.choices=P[8]),!r&&z&4&&(r=!0,se.value=P[2],X(()=>r=!1)),t.$set(se);const ye={};z&512&&(ye.choices=P[9]),!u&&z&8&&(u=!0,ye.value=P[3],X(()=>u=!1)),s.$set(ye);const de={};z&1024&&(de.choices=P[10]),!f&&z&16&&(f=!0,de.value=P[4],X(()=>f=!1)),i.$set(de);const Se={};!m&&z&32&&(m=!0,Se.value=P[5],X(()=>m=!1)),_.$set(Se);const ie={};z&134217856&&(ie.$$scope={dirty:z,ctx:P}),C.$set(ie);const Ne={};z&134217792&&(Ne.$$scope={dirty:z,ctx:P}),A.$set(Ne)},i(P){D||(g(e.$$.fragment,P),g(t.$$.fragment,P),g(s.$$.fragment,P),g(i.$$.fragment,P),g(_.$$.fragment,P),g(C.$$.fragment,P),g(A.$$.fragment,P),g(F.$$.fragment,P),D=!0)},o(P){d(e.$$.fragment,P),d(t.$$.fragment,P),d(s.$$.fragment,P),d(i.$$.fragment,P),d(_.$$.fragment,P),d(C.$$.fragment,P),d(A.$$.fragment,P),d(F.$$.fragment,P),D=!1},d(P){P&&(p(n),p(o),p(a),p(c),p(y),p(S),p(R)),w(e,P),w(t,P),w(s,P),w(i,P),w(_,P),w(C,P),w(A,P),w(F,P)}}}function Ba(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[11].route.toLocaleString()+"",s,u,a=l[11].area.toLocaleString()+"",i,f,c=l[11].crossing.toLocaleString()+"",_,m,y=l[11].other.toLocaleString()+"",C,S,A=Or(l[11].totalLength).toFixed(1)+"",R,F;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),u=k(`
    routes, `),i=k(a),f=k(` areas,
    `),_=k(c),m=k(" crossings, "),C=k(y),S=k(`
    other, with total LineString length of `),R=k(A),F=k(" miles)")},m(D,L){$(D,e,L),$(D,t,L),$(D,r,L),$(D,s,L),$(D,u,L),$(D,i,L),$(D,f,L),$(D,_,L),$(D,m,L),$(D,C,L),$(D,S,L),$(D,R,L),$(D,F,L)},p(D,L){L&1&&n!==(n=D[0].size.toLocaleString()+"")&&B(t,n),L&2048&&o!==(o=D[11].route.toLocaleString()+"")&&B(s,o),L&2048&&a!==(a=D[11].area.toLocaleString()+"")&&B(i,a),L&2048&&c!==(c=D[11].crossing.toLocaleString()+"")&&B(_,c),L&2048&&y!==(y=D[11].other.toLocaleString()+"")&&B(C,y),L&2048&&A!==(A=Or(D[11].totalLength).toFixed(1)+"")&&B(R,A)},d(D){D&&(p(e),p(t),p(r),p(s),p(u),p(i),p(f),p(_),p(m),p(C),p(S),p(R),p(F))}}}function za(l){let e,n,t;function r(s){l[22](s)}let o={$$slots:{default:[Ba]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const a={};u&134219777&&(a.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,a.checked=s[1],X(()=>n=!1)),e.$set(a)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ha(l){let e,n,t,r;return e=new He({props:{label:"Filters",$$slots:{default:[Ra]},$$scope:{ctx:l}}}),t=new xe({props:{small:!0,$$slots:{default:[za]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&134219772&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const a={};s&134219779&&(a.$$scope={dirty:s,ctx:o}),t.$set(a)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Or(l){return l*621371e-9}function qa(l,e,n){let t,r,o,s;Ae(l,It,z=>n(6,t=z)),Ae(l,At,z=>n(7,r=z)),Ae(l,Tt,z=>n(23,o=z)),Ae(l,un,z=>n(24,s=z));let{schemesToBeShown:u=new Set}=e,{show:a=!0}=e,i=[],f="",c=[],_=new Set(Pn.slice(0,-1)),m="",y=[],C="",S=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],A="",R={area:0,route:0,crossing:0,other:0,totalLength:0};jn(()=>{var ye,de,Se;let z=new Set,oe=new Set,se=new Set;for(let ie of s.values())(ye=ie.browse)!=null&&ye.authority_or_region&&z.add(ie.browse.authority_or_region),(de=ie.browse)!=null&&de.funding_programme&&oe.add(ie.browse.funding_programme),(Se=ie.browse)!=null&&Se.current_milestone&&se.add(ie.browse.current_milestone);n(8,i=Array.from(z.entries())),i.sort(),n(9,c=Pn.map(ie=>[ie,ie])),n(10,y=Array.from(se.entries())),y.sort()});function F(z,oe,se,ye,de,Se){let ie=oe.toLowerCase(),Ne=se.toLowerCase(),Te=re=>{var pe,ge,ve,_e,Ie,Me,Ot;if(ie&&!((pe=re.properties.name)!=null&&pe.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))return!1;if(z||Ne||ye||de||Se){let Xe=s.get(re.properties.scheme_reference);if(ye&&((ve=Xe.browse)==null?void 0:ve.authority_or_region)!=ye||de&&de!=="Other"&&((_e=Xe.browse)==null?void 0:_e.funding_programme)!=de||de==="Other"&&_.has(((Ie=Xe.browse)==null?void 0:Ie.funding_programme)??"")||Se&&((Me=Xe.browse)==null?void 0:Me.current_milestone)!=Se||Ne&&!Xe.scheme_reference.toLowerCase().includes(Ne)&&!(Xe.scheme_name??"").toLowerCase().includes(Ne)||z&&z!=="Both"&&z!==((Ot=Xe.browse)==null?void 0:Ot.sketch_source))return!1}return!0};n(0,u=new Set(o.features.filter(Te).map(re=>re.properties.scheme_reference))),n(11,R={area:0,route:0,crossing:0,other:0,totalLength:0});let be=re=>{var pe,ge;return!(!u.has(re.properties.scheme_reference)||ie&&!((pe=re.properties.name)!=null&&pe.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))};for(let re of o.features)be(re)?(delete re.properties.hide_while_editing,n(11,R[re.properties.intervention_type]++,R),re.geometry.type=="LineString"&&re.properties.length_meters&&n(11,R.totalLength+=re.properties.length_meters,R)):re.properties.hide_while_editing=!0;Tt.set(o),n(11,R)}function D(){n(5,A=""),n(2,f=""),n(3,m=""),n(4,C=""),ut(At,r="",r),ut(It,t="",t)}function L(z){f=z,n(2,f)}function N(z){m=z,n(3,m)}function M(z){C=z,n(4,C)}function I(z){A=z,n(5,A)}function j(){r=this.value,At.set(r)}const U=()=>ut(At,r="",r);function q(){t=this.value,It.set(t)}const E=()=>ut(It,t="",t);function P(z){a=z,n(1,a)}return l.$$set=z=>{"schemesToBeShown"in z&&n(0,u=z.schemesToBeShown),"show"in z&&n(1,a=z.show)},l.$$.update=()=>{l.$$.dirty&252&&F(A,r,t,f,m,C)},[u,a,f,m,C,A,t,r,i,c,y,R,S,D,L,N,M,I,j,U,q,E,P]}class Ga extends Y{constructor(e){super(),K(this,e,qa,Ha,J,{schemesToBeShown:0,show:1})}}function Ua(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wa(l){let e,n,t,r,o;return t=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ua]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment),r=k(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),h(e,n),v(t,e,null),h(e,r),o=!0},p(s,[u]){const a={};u&1&&(a.$$scope={dirty:u,ctx:s}),t.$set(a)},i(s){o||(g(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class Ee extends Y{constructor(e){super(),K(this,e,null,Wa,J,{})}}function Lr(l,e,n){const t=l.slice();return t[2]=e[n],t}function Ar(l,e,n){const t=l.slice();return t[5]=e[n],t}function Ir(l){let e,n;return{c(){e=T("span"),n=k(`Â 
    `),Ce(e,"background",l[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,r){$(t,e,r),h(e,n)},p(t,r){r&1&&Ce(e,"background",t[5])},d(t){t&&p(e)}}}function Nr(l){let e,n=l[2]+"",t;return{c(){e=T("span"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&B(t,n)},d(r){r&&p(e)}}}function Va(l){let e,n,t,r=je(l[0]),o=[];for(let a=0;a<r.length;a+=1)o[a]=Ir(Ar(l,r,a));let s=je(l[1]),u=[];for(let a=0;a<s.length;a+=1)u[a]=Nr(Lr(l,s,a));return{c(){e=T("div");for(let a=0;a<o.length;a+=1)o[a].c();n=O(),t=T("div");for(let a=0;a<u.length;a+=1)u[a].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(a,i){$(a,e,i);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(a,n,i),$(a,t,i);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(a,[i]){if(i&1){r=je(a[0]);let f;for(f=0;f<r.length;f+=1){const c=Ar(a,r,f);o[f]?o[f].p(c,i):(o[f]=Ir(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(i&2){s=je(a[1]);let f;for(f=0;f<s.length;f+=1){const c=Lr(a,s,f);u[f]?u[f].p(c,i):(u[f]=Nr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:Z,o:Z,d(a){a&&(p(e),p(n),p(t)),wt(o,a),wt(u,a)}}}function Xa(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ge extends Y{constructor(e){super(),K(this,e,Xa,Va,J,{colorScale:0,limits:1})}}function Pr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Ja(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ya(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ka(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Za(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qa(l){let e,n,t,r,o,s,u,a,i,f,c,_;return t=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ya]},$$scope:{ctx:l}}}),o=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ka]},$$scope:{ctx:l}}}),f=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Za]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=O(),a=T("p"),i=k("License: "),b(f.$$.fragment),c=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(m,u,y),$(m,a,y),h(a,i),v(f,a,null),h(a,c),_=!0},p(m,y){const C={};y&65536&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&65536&&(S.$$scope={dirty:y,ctx:m}),o.$set(S);const A={};y&65536&&(A.$$scope={dirty:y,ctx:m}),f.$set(A)},i(m){_||(g(t.$$.fragment,m),g(o.$$.fragment,m),g(f.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),_=!1},d(m){m&&(p(e),p(u),p(a)),w(t),w(o),w(f)}}}function xa(l){let e,n,t;return n=new me({props:{$$slots:{default:[Qa]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Mr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Z,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ef(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tf(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(l){let e,n,t,r,o,s,u,a,i,f,c,_,m,y;return o=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[tf]},$$scope:{ctx:l}}}),u=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[nf]},$$scope:{ctx:l}}}),_=new te({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[rf]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=T("p"),r=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(u.$$.fragment),a=k("."),i=O(),f=T("p"),c=k("License: "),b(_.$$.fragment),m=k(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(C,S){$(C,e,S),$(C,n,S),$(C,t,S),h(t,r),v(o,t,null),h(t,s),v(u,t,null),h(t,a),$(C,i,S),$(C,f,S),h(f,c),v(_,f,null),h(f,m),y=!0},p(C,S){const A={};S&65536&&(A.$$scope={dirty:S,ctx:C}),o.$set(A);const R={};S&65536&&(R.$$scope={dirty:S,ctx:C}),u.$set(R);const F={};S&65536&&(F.$$scope={dirty:S,ctx:C}),_.$set(F)},i(C){y||(g(o.$$.fragment,C),g(u.$$.fragment,C),g(_.$$.fragment,C),y=!0)},o(C){d(o.$$.fragment,C),d(u.$$.fragment,C),d(_.$$.fragment,C),y=!1},d(C){C&&(p(e),p(n),p(t),p(i),p(f)),w(o),w(u),w(_)}}}function of(l){let e,n,t;return n=new me({props:{$$slots:{default:[lf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Fr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Z,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function sf(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function af(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ff(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uf(l){let e,n,t,r,o,s,u,a,i;return t=new te({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[af]},$$scope:{ctx:l}}}),o=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ff]},$$scope:{ctx:l}}}),a=new Ee({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&65536&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){i||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(a,f)}}}function cf(l){let e,n,t;return n=new me({props:{$$slots:{default:[uf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Dr(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[4],limits:l[6]().map(bf)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:Z,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function $f(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",a;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(r),s=k(`
          people per square kilometre in `),a=k(u)},m(i,f){$(i,e,f),h(e,n),h(e,t),h(t,o),h(e,s),h(e,a)},p(i,f){f&8200&&r!==(r=i[15].toLocaleString()+"")&&B(o,r),f&8192&&u!==(u=i[14]+"")&&B(a,u)},d(i){i&&p(e)}}}function pf(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",a,i;return{c(){e=T("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=T("b"),a=k(u),i=k(`
          cars`)},m(f,c){$(f,e,c),h(e,n),h(e,r),h(e,o),h(e,s),h(s,a),h(e,i)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(r,t),c&8200&&u!==(u=f[15]+"")&&B(a,u)},d(f){f&&p(e)}}}function mf(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",a,i;return{c(){e=T("p"),n=T("b"),r=k(t),o=k("%"),s=k(`
          of households in `),a=k(u),i=k(" have 1 or more cars")},m(f,c){$(f,e,c),h(e,n),h(n,r),h(n,o),h(e,s),h(e,a),h(e,i)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(r,t),c&8192&&u!==(u=f[14]+"")&&B(a,u)},d(f){f&&p(e)}}}function _f(l){Pr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?mf:o[3]=="average_cars_per_household"?pf:$f}let t=n(l),r=t(l);return{c(){r.c(),e=De()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){Pr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function gf(l){let e,n;return e=new fe({props:{$$slots:{default:[_f,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function df(l){let e,n,t,r;const o=[H(tt),{sourceLayer:tt},{paint:{"fill-color":Le(["get",l[3]],l[6](),l[4]),"fill-opacity":x(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[gf]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s}),e.$on("click",l[5]);const u=[H(`${tt}-outline`),{sourceLayer:tt},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&88?ne(o,[f&0&&ae(H(tt)),f&0&&{sourceLayer:tt},f&88&&{paint:{"fill-color":Le(["get",i[3]],i[6](),i[4]),"fill-opacity":x(.5,.7)}},f&8&&{layout:{visibility:i[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&8?ne(u,[f&0&&ae(H(`${tt}-outline`)),f&0&&{sourceLayer:tt},u[2],f&8&&{layout:{visibility:i[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function hf(l){let e,n,t,r,o,s,u,a,i,f,c,_,m,y;function C(I){l[7](I)}let S={$$slots:{right:[xa],default:[Ja]},$$scope:{ctx:l}};l[0]!==void 0&&(S.checked=l[0]),e=new le({props:S}),W.push(()=>V(e,"checked",C)),e.$on("change",l[8]);let A=l[3]=="percent_households_with_car"&&Mr(l);function R(I){l[9](I)}let F={$$slots:{right:[of],default:[ef]},$$scope:{ctx:l}};l[1]!==void 0&&(F.checked=l[1]),o=new le({props:F}),W.push(()=>V(o,"checked",R)),o.$on("change",l[10]);let D=l[3]=="average_cars_per_household"&&Fr(l);function L(I){l[11](I)}let N={$$slots:{right:[cf],default:[sf]},$$scope:{ctx:l}};l[2]!==void 0&&(N.checked=l[2]),i=new le({props:N}),W.push(()=>V(i,"checked",L)),i.$on("change",l[12]);let M=l[3]=="population_density"&&Dr(l);return m=new ke({props:{url:`pmtiles://${he()}/v1/${tt}.pmtiles`,$$slots:{default:[df]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),A&&A.c(),r=O(),b(o.$$.fragment),u=O(),D&&D.c(),a=O(),b(i.$$.fragment),c=O(),M&&M.c(),_=O(),b(m.$$.fragment)},m(I,j){v(e,I,j),$(I,t,j),A&&A.m(I,j),$(I,r,j),v(o,I,j),$(I,u,j),D&&D.m(I,j),$(I,a,j),v(i,I,j),$(I,c,j),M&&M.m(I,j),$(I,_,j),v(m,I,j),y=!0},p(I,[j]){const U={};j&65536&&(U.$$scope={dirty:j,ctx:I}),!n&&j&1&&(n=!0,U.checked=I[0],X(()=>n=!1)),e.$set(U),I[3]=="percent_households_with_car"?A?(A.p(I,j),j&8&&g(A,1)):(A=Mr(I),A.c(),g(A,1),A.m(r.parentNode,r)):A&&(ce(),d(A,1,1,()=>{A=null}),$e());const q={};j&65536&&(q.$$scope={dirty:j,ctx:I}),!s&&j&2&&(s=!0,q.checked=I[1],X(()=>s=!1)),o.$set(q),I[3]=="average_cars_per_household"?D?(D.p(I,j),j&8&&g(D,1)):(D=Fr(I),D.c(),g(D,1),D.m(a.parentNode,a)):D&&(ce(),d(D,1,1,()=>{D=null}),$e());const E={};j&65536&&(E.$$scope={dirty:j,ctx:I}),!f&&j&4&&(f=!0,E.checked=I[2],X(()=>f=!1)),i.$set(E),I[3]=="population_density"?M?(M.p(I,j),j&8&&g(M,1)):(M=Dr(I),M.c(),g(M,1),M.m(_.parentNode,_)):M&&(ce(),d(M,1,1,()=>{M=null}),$e());const P={};j&65544&&(P.$$scope={dirty:j,ctx:I}),m.$set(P)},i(I){y||(g(e.$$.fragment,I),g(A),g(o.$$.fragment,I),g(D),g(i.$$.fragment,I),g(M),g(m.$$.fragment,I),y=!0)},o(I){d(e.$$.fragment,I),d(A),d(o.$$.fragment,I),d(D),d(i.$$.fragment,I),d(M),d(m.$$.fragment,I),y=!1},d(I){I&&(p(t),p(r),p(u),p(a),p(c),p(_)),w(e,I),A&&A.d(I),w(o,I),D&&D.d(I),w(i,I),M&&M.d(I),w(m,I)}}}let tt="census_output_areas";const bf=l=>l.toLocaleString();function vf(l,e,n){let t=Q.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function a(S){let A=S.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${A}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${A}`,"_blank")}function i(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(S){r=S,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function _(S){o=S,n(1,o)}const m=()=>{n(0,r=!1),n(2,s=!1)};function y(S){s=S,n(2,s)}const C=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,a,i,f,c,_,m,y,C]}class wf extends Y{constructor(e){super(),K(this,e,vf,hf,J,{})}}function kf(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function yf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sf(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[yf]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of December 2022."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Cf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Sf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Tf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Of(l){let e,n;return e=new fe({props:{$$slots:{default:[Tf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Lf(l){let e,n,t,r;const o=[H(Nt),{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Of]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s}),e.$on("click",If);const u=[H(`${Nt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&3?ne(o,[f&0&&ae(H(Nt)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(H(`${Nt}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Af(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[Cf],default:[kf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new yt({props:{data:`${he()}/v1/${Nt}.geojson`,$$slots:{default:[Lf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Nt="combined_authorities";function If(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Nf(l,e,n){let t=Q.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Pf extends Y{constructor(e){super(),K(this,e,Nf,Af,J,{})}}function Mf(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ff(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Df(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ef(l){let e,n,t,r,o,s,u,a,i;return t=new te({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Ff]},$$scope:{ctx:l}}}),o=new te({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Df]},$$scope:{ctx:l}}}),a=new Ee({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){i||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(a,f)}}}function jf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ef]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Er(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Z,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Rf(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,a,i,f,c,_=l[4].rank.toLocaleString()+"",m,y;return{c(){e=T("p"),t=k(n),r=k(` has an IMD score of
        `),o=T("b"),u=k(s),a=O(),i=T("p"),f=k("Rank: "),c=T("b"),m=k(_),y=k(`
        / 32,844 LSOAs`)},m(C,S){$(C,e,S),h(e,t),h(e,r),h(e,o),h(o,u),$(C,a,S),$(C,i,S),h(i,f),h(i,c),h(c,m),h(i,y)},p(C,S){S&16&&n!==(n=C[4].LSOA11CD+"")&&B(t,n),S&16&&s!==(s=C[4].score+"")&&B(u,s),S&16&&_!==(_=C[4].rank.toLocaleString()+"")&&B(m,_)},d(C){C&&(p(e),p(a),p(i))}}}function Bf(l){let e,n;return e=new fe({props:{$$slots:{default:[Rf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zf(l){let e,n,t,r;const o=[H(nt),{sourceLayer:nt},{paint:{"fill-color":Le(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":x(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Bf]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s});const u=[H(`${nt}-outline`),{sourceLayer:nt},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&7?ne(o,[f&0&&ae(H(nt)),f&0&&{sourceLayer:nt},f&6&&{paint:{"fill-color":Le(["-",10,["get","decile"]],i[2],i[1]),"fill-opacity":x(.5,.7)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&1?ne(u,[f&0&&ae(H(`${nt}-outline`)),f&0&&{sourceLayer:nt},u[2],f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Hf(l){let e,n,t,r,o,s;function u(f){l[3](f)}let a={$$slots:{right:[jf],default:[Mf]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&Er(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${nt}.pmtiles`,$$slots:{default:[zf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=Er(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let nt="imd";function qf(l,e,n){let t=Q.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Gf extends Y{constructor(e){super(),K(this,e,qf,Hf,J,{})}}function Uf(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Wf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vf(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Wf]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of January 2024."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Xf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Vf]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Jf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Yf(l){let e,n;return e=new fe({props:{$$slots:{default:[Jf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Kf(l){let e,n,t,r;const o=[H(Pt),{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Yf]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s}),e.$on("click",Qf);const u=[H(`${Pt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&3?ne(o,[f&0&&ae(H(Pt)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(H(`${Pt}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Zf(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[Xf],default:[Uf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new yt({props:{data:`${he()}/v1/${Pt}.geojson`,$$slots:{default:[Kf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Pt="local_authority_districts";function Qf(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function xf(l,e,n){let t=Q.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class eu extends Y{constructor(e){super(),K(this,e,xf,Zf,J,{})}}function tu(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function nu(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ru(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lu(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ou(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function su(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(l){let e,n,t,r,o,s,u,a,i,f,c,_,m,y,C,S,A,R,F,D,L,N;return t=new te({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[nu]},$$scope:{ctx:l}}}),o=new te({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ru]},$$scope:{ctx:l}}}),u=new te({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[lu]},$$scope:{ctx:l}}}),m=new te({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ou]},$$scope:{ctx:l}}}),R=new te({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[su]},$$scope:{ctx:l}}}),L=new Ee({}),{c(){e=T("p"),n=k("LPAs may be a "),b(t.$$.fragment),r=k(", "),b(o.$$.fragment),s=k("y, or "),b(u.$$.fragment),a=k("."),i=O(),f=T("p"),c=T("strong"),_=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(m.$$.fragment),y=k(" to get more details."),C=O(),S=T("p"),A=k("Data from ONS Geography via "),b(R.$$.fragment),F=k(", as of November 2022."),D=O(),b(L.$$.fragment)},m(M,I){$(M,e,I),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),v(u,e,null),h(e,a),$(M,i,I),$(M,f,I),h(f,c),h(c,_),v(m,c,null),h(c,y),$(M,C,I),$(M,S,I),h(S,A),v(R,S,null),h(S,F),$(M,D,I),v(L,M,I),N=!0},p(M,I){const j={};I&16&&(j.$$scope={dirty:I,ctx:M}),t.$set(j);const U={};I&16&&(U.$$scope={dirty:I,ctx:M}),o.$set(U);const q={};I&16&&(q.$$scope={dirty:I,ctx:M}),u.$set(q);const E={};I&16&&(E.$$scope={dirty:I,ctx:M}),m.$set(E);const P={};I&16&&(P.$$scope={dirty:I,ctx:M}),R.$set(P)},i(M){N||(g(t.$$.fragment,M),g(o.$$.fragment,M),g(u.$$.fragment,M),g(m.$$.fragment,M),g(R.$$.fragment,M),g(L.$$.fragment,M),N=!0)},o(M){d(t.$$.fragment,M),d(o.$$.fragment,M),d(u.$$.fragment,M),d(m.$$.fragment,M),d(R.$$.fragment,M),d(L.$$.fragment,M),N=!1},d(M){M&&(p(e),p(i),p(f),p(C),p(S),p(D)),w(t),w(o),w(u),w(m),w(R),w(L,M)}}}function au(l){let e,n,t;return n=new me({props:{$$slots:{default:[iu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function fu(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function uu(l){let e,n;return e=new fe({props:{$$slots:{default:[fu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cu(l){let e,n,t,r;const o=[H(rt),{sourceLayer:rt},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[uu]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s});const u=[H(`${rt}-outline`),{sourceLayer:rt},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&3?ne(o,[f&0&&ae(H(rt)),f&0&&{sourceLayer:rt},f&2&&{paint:{"fill-color":i[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(H(`${rt}-outline`)),f&0&&{sourceLayer:rt},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function $u(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[au],default:[tu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${rt}.pmtiles`,$$slots:{default:[cu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let rt="local_planning_authorities";function pu(l,e,n){let t=Q.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class mu extends Y{constructor(e){super(),K(this,e,pu,$u,J,{})}}function _u(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function gu(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function du(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[gu]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function hu(l){let e,n,t;return n=new me({props:{$$slots:{default:[du]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function bu(l){let e,n=l[3].Name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&B(t,n)},d(r){r&&p(e)}}}function vu(l){let e,n;return e=new fe({props:{$$slots:{default:[bu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function wu(l){let e,n,t,r;const o=[H(lt),{sourceLayer:lt},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[vu]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s}),e.$on("click",yu);const u=[H(`${lt}-outline`),{sourceLayer:lt},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&3?ne(o,[f&0&&ae(H(lt)),f&0&&{sourceLayer:lt},f&2&&{paint:{"fill-color":i[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(H(`${lt}-outline`)),f&0&&{sourceLayer:lt},f&2&&{paint:{"line-color":i[1],"line-width":5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function ku(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[hu],default:[_u]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${lt}.pmtiles`,$$slots:{default:[wu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let lt="parliamentary_constituencies";function yu(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Su(l,e,n){let t=Q.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Cu extends Y{constructor(e){super(),K(this,e,Su,ku,J,{})}}function Tu(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ou(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lu(l){let e,n,t,r,o,s,u,a,i;return t=new te({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ou]},$$scope:{ctx:l}}}),a=new Ee({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        Âµgm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),h(e,o),h(e,s),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){i||(g(t.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(a,f)}}}function Au(l){let e,n,t;return n=new me({props:{$$slots:{default:[Lu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function jr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,a,i,f,c,_,m,y,C,S,A,R;function F(L){l[7](L)}let D={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return l[0]!==void 0&&(D.value=l[0]),e=new _t({props:D}),W.push(()=>V(e,"value",F)),{c(){b(e.$$.fragment),t=O(),r=T("p"),s=k(o),u=O(),a=T("div"),i=T("label"),f=k(`Opacity
      `),c=T("input"),_=O(),m=T("img"),G(c,"type","range"),G(c,"min","0"),G(c,"max","100"),Qt(m.src,y=l[5](l[0]))||G(m,"src",y),G(m,"width",150),G(m,"alt",C=`Legend for ${l[0]} layer`)},m(L,N){v(e,L,N),$(L,t,N),$(L,r,N),h(r,s),$(L,u,N),$(L,a,N),h(a,i),h(i,f),h(i,c),Ye(c,l[2]),$(L,_,N),$(L,m,N),S=!0,A||(R=[Ze(c,"change",l[8]),Ze(c,"input",l[8])],A=!0)},p(L,N){const M={};!n&&N&1&&(n=!0,M.value=L[0],X(()=>n=!1)),e.$set(M),(!S||N&1)&&o!==(o=L[3](L[0])+"")&&B(s,o),N&4&&Ye(c,L[2]),(!S||N&1&&!Qt(m.src,y=L[5](L[0])))&&G(m,"src",y),(!S||N&1&&C!==(C=`Legend for ${L[0]} layer`))&&G(m,"alt",C)},i(L){S||(g(e.$$.fragment,L),S=!0)},o(L){d(e.$$.fragment,L),S=!1},d(L){L&&(p(t),p(r),p(u),p(a),p(_),p(m)),w(e,L),A=!1,Ql(R)}}}function Iu(l){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Bo({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&6?ne(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Nu(l){let e,n,t,r,o,s;function u(f){l[6](f)}let a={$$slots:{right:[Au],default:[Tu]},$$scope:{ctx:l}};l[1]!==void 0&&(a.checked=l[1]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[1]&&jr(l);return o=new ss({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Iu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?i?(i.p(f,c),c&2&&g(i,1)):(i=jr(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&1&&(m.tiles=[f[4](f[0])]),c&2054&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}function Pu(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function a(y){return t[1]}function i(y){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${C}`}function f(y){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${C}`}function c(y){r=y,n(1,r)}function _(y){s=y,n(0,s)}function m(){o=xt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s])},[s,r,o,a,i,f,c,_,m]}class Mu extends Y{constructor(e){super(),K(this,e,Pu,Nu,J,{})}}function Fu(l){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Du(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Eu(l){let e,n,t,r,o,s,u,a,i;return o=new te({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Du]},$$scope:{ctx:l}}}),a=new Ee({}),{c(){e=T("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=O(),t=T("p"),r=k("Data from June 2019, produced by "),b(o.$$.fragment),s=k(". See there for methodology details"),u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(g(o.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(o.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(a,f)}}}function ju(l){let e,n,t;return n=new me({props:{$$slots:{default:[Eu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Rr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Z,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ru(l){let e,n=l[3].noiseclass+"",t,r,o=Br(l[3].noiseclass)+"",s,u;return{c(){e=T("p"),t=k(n),r=k(" dB ("),s=k(o),u=k(")")},m(a,i){$(a,e,i),h(e,t),h(e,r),h(e,s),h(e,u)},p(a,i){i&8&&n!==(n=a[3].noiseclass+"")&&B(t,n),i&8&&o!==(o=Br(a[3].noiseclass)+"")&&B(s,o)},d(a){a&&p(e)}}}function Bu(l){let e,n;return e=new fe({props:{$$slots:{default:[Ru,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zu(l){let e,n;const t=[H(Mt),{sourceLayer:Mt},{paint:{"fill-color":$t(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][0],"65.0-69.9":l[1][1],"70.0-74.9":l[1][1],">=75.0":l[1][2]},"red"),"fill-opacity":x(.5,.8)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Bu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(H(Mt)),s&0&&{sourceLayer:Mt},s&2&&{paint:{"fill-color":$t(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":x(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Hu(l){let e,n,t,r,o,s;function u(f){l[2](f)}let a={$$slots:{right:[ju],default:[Fu]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&Rr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Mt}.pmtiles`,$$slots:{default:[zu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=Rr(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&17&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Mt="road_noise";function Br(l){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[l]}function qu(l,e,n){let t=[Q.sequential_low_to_high[0],Q.sequential_low_to_high[2],Q.sequential_low_to_high[4]],r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Gu extends Y{constructor(e){super(),K(this,e,qu,Hu,J,{})}}function Uu(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Wu(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vu(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Wu]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Xu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Vu]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Ju(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Yu(l){let e,n;return e=new fe({props:{$$slots:{default:[Ju,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ku(l){let e,n,t,r;const o=[H(ot),{sourceLayer:ot},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Yu]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new qe({props:s}),e.$on("click",Qu);const u=[H(`${ot}-outline`),{sourceLayer:ot},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new Oe({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&3?ne(o,[f&0&&ae(H(ot)),f&0&&{sourceLayer:ot},f&2&&{paint:{"fill-color":i[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(H(`${ot}-outline`)),f&0&&{sourceLayer:ot},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Zu(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[Xu],default:[Uu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${ot}.pmtiles`,$$slots:{default:[Ku]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let ot="wards";function Qu(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function xu(l,e,n){let t=Q.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class ec extends Y{constructor(e){super(),K(this,e,xu,Zu,J,{})}}function tc(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nc(l){let e,n,t,r;return t=new te({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[tc]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&p(e),w(t)}}}class et extends Y{constructor(e){super(),K(this,e,null,nc,J,{})}}function rc(l){let e,n,t;return e=new Pe({props:{color:Q.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function lc(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oc(l){let e,n,t,r,o,s,u,a,i;return o=new te({props:{href:"https://gtfs.org",$$slots:{default:[lc]},$$scope:{ctx:l}}}),a=new et({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=T("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(g(o.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(o.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(a,f)}}}function sc(l){let e,n,t;return n=new me({props:{$$slots:{default:[oc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ic(l){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ac(l){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fc(l){let e;function n(o,s){return o[2].has_bus_lane?ac:ic}let t=n(l),r=t(l);return{c(){r.c(),e=De()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function uc(l){let e,n;return e=new fe({props:{$$slots:{default:[fc,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cc(l){let e,n;const t=[H(Ft),{sourceLayer:Ft},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Q.bus_route_with_lane,Q.bus_route_without_lane],"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[uc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(H(Ft)),s&0&&{sourceLayer:Ft},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function $c(l){let e,n,t,r,o;function s(a){l[1](a)}let u={$$slots:{right:[sc],default:[rc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Ft}.pmtiles`,$$slots:{default:[cc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&8&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&9&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Ft="bus_routes";function pc(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class mc extends Y{constructor(e){super(),K(this,e,pc,$c,J,{})}}function zr(l){const e=Sc(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function Hr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function _c(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gc(l){let e,n,t,r,o,s,u,a;return u=new et({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=O(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=O(),b(u.$$.fragment)},m(i,f){$(i,e,f),$(i,n,f),$(i,t,f),$(i,r,f),$(i,o,f),$(i,s,f),v(u,i,f),a=!0},p:Z,i(i){a||(g(u.$$.fragment,i),a=!0)},o(i){d(u.$$.fragment,i),a=!1},d(i){i&&(p(e),p(n),p(t),p(r),p(o),p(s)),w(u,i)}}}function dc(l){let e,n,t;return n=new me({props:{$$slots:{default:[gc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function qr(l){let e,n,t;return n=new xe({props:{$$slots:{default:[bc]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function hc(l){let e,n,t=l[9]+"",r,o,s;return e=new Pe({props:{color:l[10]}}),{c(){b(e.$$.fragment),n=O(),r=k(t),o=O()},m(u,a){v(e,u,a),$(u,n,a),$(u,r,a),$(u,o,a),s=!0},p:Z,i(u){s||(g(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function Gr(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[hc]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){l=s;const a={};u&8192&&(a.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,a.checked=l[1][l[6]],X(()=>n=!1)),e.$set(a)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function bc(l){let e,n,t=je(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Gr(Hr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=De()},m(s,u){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=je(s[2]);let a;for(a=0;a<t.length;a+=1){const i=Hr(s,t,a);r[a]?(r[a].p(i,u),g(r[a],1)):(r[a]=Gr(i),r[a].c(),g(r[a],1),r[a].m(e.parentNode,e))}for(ce(),a=t.length;a<r.length;a+=1)o(a);$e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)g(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),wt(r,s)}}}function vc(l){zr(l);let e,n=l[6]+"",t,r,o,s,u,a=l[7]+"",i,f,c,_,m=l[8]+"",y;return{c(){e=T("h2"),t=k(n),r=O(),o=T("p"),s=k("Direction: "),u=T("b"),i=O(),f=T("p"),c=k("Width: "),_=T("b"),y=k(m)},m(C,S){$(C,e,S),h(e,t),$(C,r,S),$(C,o,S),h(o,s),h(o,u),u.innerHTML=a,$(C,i,S),$(C,f,S),h(f,c),h(f,_),h(_,y)},p(C,S){zr(C),S&32&&n!==(n=C[6]+"")&&B(t,n),S&32&&a!==(a=C[7]+"")&&(u.innerHTML=a),S&32&&m!==(m=C[8]+"")&&B(y,m)},d(C){C&&(p(e),p(r),p(o),p(i),p(f))}}}function wc(l){let e,n;return e=new fe({props:{$$slots:{default:[vc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function kc(l){let e,n;const t=[H(Dt),{sourceLayer:Dt},{paint:{"line-color":$t(["get","kind"],{track:Q.cycle_paths.track,lane:Q.cycle_paths.lane,shared_use_segregated:Q.cycle_paths.shared_use_segregated,shared_use_unsegregated:Q.cycle_paths.shared_use_unsegregated},"red"),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Ur(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[wc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),e.$on("click",Cc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(H(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Ur(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function yc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let a={$$slots:{right:[dc],default:[_c]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&qr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Dt}.pmtiles`,$$slots:{default:[kc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&8192&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=qr(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&8195&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Dt="cycle_paths";function Sc(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function Cc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Ur(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function Tc(l,e,n){let t=[["track","Separated tracks",Q.cycle_paths.track],["lane","Unprotected lanes",Q.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Q.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Q.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(a){r=a,n(0,r)}function u(a,i){l.$$.not_equal(o[i],a)&&(o[i]=a,n(1,o))}return[r,o,t,s,u]}class Oc extends Y{constructor(e){super(),K(this,e,Tc,yc,J,{})}}function Lc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Ac(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ic(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Ac]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),r=k(", as of September 2021."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Nc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ic]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Pc(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function Mc(l){let e,n;return e=new fe({props:{$$slots:{default:[Pc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Fc(l){let e,n;const t=[H(Et),{sourceLayer:Et},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Mc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(H(Et)),s&0&&{sourceLayer:Et},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Dc(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[Nc],default:[Lc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Et}.pmtiles`,$$slots:{default:[Fc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Et="mrn";function Ec(l,e,n){let t=Q.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class jc extends Y{constructor(e){super(),K(this,e,Ec,Dc,J,{})}}function Rc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Strategic Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Bc(l){let e;return{c(){e=k(`OS Open Roads
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zc(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Bc]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=T("p"),n=k("Data from "),b(t.$$.fragment),r=k(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Hc(l){let e,n,t;return n=new me({props:{$$slots:{default:[zc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function qc(l){let e,n=(l[3].name??"Unknown SRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown SRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function Gc(l){let e,n;return e=new fe({props:{$$slots:{default:[qc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Uc(l){let e,n;const t=[H(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Gc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(H(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Wc(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[Hc],default:[Rc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${jt}.pmtiles`,$$slots:{default:[Uc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let jt="srn";function Vc(l,e,n){let t=Q.srn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Xc extends Y{constructor(e){super(),K(this,e,Vc,Wc,J,{})}}function Jc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Yc(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Kc(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Yc]},$$scope:{ctx:l}}}),s=new Ee({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Zc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Kc]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Wr(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&B(o,r)},d(s){s&&p(e)}}}function Vr(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&B(o,r)},d(s){s&&p(e)}}}function Xr(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&B(o,r)},d(s){s&&p(e)}}}function Jr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&B(o,r)},d(s){s&&p(e)}}}function Yr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&B(o,r)},d(s){s&&p(e)}}}function Kr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&B(o,r)},d(s){s&&p(e)}}}function Zr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&B(o,r)},d(s){s&&p(e)}}}function Qr(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&B(o,r)},d(s){s&&p(e)}}}function xr(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&B(o,r)},d(s){s&&p(e)}}}function Qc(l){let e,n,t,r,o,s,u,a,i,f=l[3].Desc_&&Wr(l),c=l[3].Greenway&&Vr(l),_=l[3].RouteType&&Xr(l),m=l[3].RouteNo&&Jr(l),y=l[3].RouteCat&&Yr(l),C=l[3].OpenStatus&&Kr(l),S=l[3].Surface&&Zr(l),A=l[3].Quality&&Qr(l),R=l[3].RoadClass&&xr(l);return{c(){e=T("ul"),f&&f.c(),n=O(),c&&c.c(),t=O(),_&&_.c(),r=O(),m&&m.c(),o=O(),y&&y.c(),s=O(),C&&C.c(),u=O(),S&&S.c(),a=O(),A&&A.c(),i=O(),R&&R.c()},m(F,D){$(F,e,D),f&&f.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),_&&_.m(e,null),h(e,r),m&&m.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),C&&C.m(e,null),h(e,u),S&&S.m(e,null),h(e,a),A&&A.m(e,null),h(e,i),R&&R.m(e,null)},p(F,D){F[3].Desc_?f?f.p(F,D):(f=Wr(F),f.c(),f.m(e,n)):f&&(f.d(1),f=null),F[3].Greenway?c?c.p(F,D):(c=Vr(F),c.c(),c.m(e,t)):c&&(c.d(1),c=null),F[3].RouteType?_?_.p(F,D):(_=Xr(F),_.c(),_.m(e,r)):_&&(_.d(1),_=null),F[3].RouteNo?m?m.p(F,D):(m=Jr(F),m.c(),m.m(e,o)):m&&(m.d(1),m=null),F[3].RouteCat?y?y.p(F,D):(y=Yr(F),y.c(),y.m(e,s)):y&&(y.d(1),y=null),F[3].OpenStatus?C?C.p(F,D):(C=Kr(F),C.c(),C.m(e,u)):C&&(C.d(1),C=null),F[3].Surface?S?S.p(F,D):(S=Zr(F),S.c(),S.m(e,a)):S&&(S.d(1),S=null),F[3].Quality?A?A.p(F,D):(A=Qr(F),A.c(),A.m(e,i)):A&&(A.d(1),A=null),F[3].RoadClass?R?R.p(F,D):(R=xr(F),R.c(),R.m(e,null)):R&&(R.d(1),R=null)},d(F){F&&p(e),f&&f.d(),c&&c.d(),_&&_.d(),m&&m.d(),y&&y.d(),C&&C.d(),S&&S.d(),A&&A.d(),R&&R.d()}}}function xc(l){let e,n;return e=new fe({props:{$$slots:{default:[Qc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function e$(l){let e,n;const t=[H(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[xc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(H(Rt)),s&0&&{sourceLayer:Rt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function t$(l){let e,n,t,r,o;function s(a){l[2](a)}let u={$$slots:{right:[Zc],default:[Jc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Rt}.pmtiles`,$$slots:{default:[e$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Rt="national_cycle_network";function n$(l,e,n){let t=Q.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class r$ extends Y{constructor(e){super(),K(this,e,n$,t$,J,{})}}function l$(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function o$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function s$(l){let e,n,t,r,o,s,u,a,i,f,c;return i=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[o$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,n=O(),t=T("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,r=O(),o=T("p"),o.textContent="Data valid as of 1 January, 2024",s=O(),u=T("p"),a=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(i.$$.fragment),f=k(".")},m(_,m){$(_,e,m),$(_,n,m),$(_,t,m),$(_,r,m),$(_,o,m),$(_,s,m),$(_,u,m),h(u,a),v(i,u,null),h(u,f),c=!0},p(_,m){const y={};m&32&&(y.$$scope={dirty:m,ctx:_}),i.$set(y)},i(_){c||(g(i.$$.fragment,_),c=!0)},o(_){d(i.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(r),p(o),p(s),p(u)),w(i)}}}function i$(l){let e,n,t;return n=new me({props:{$$slots:{default:[s$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function el(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Z,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function a$(l){let e;return{c(){e=T("p"),e.textContent="Left side of the road: no pavement"},m(n,t){$(n,e,t)},p:Z,d(n){n&&p(e)}}}function f$(l){let e,n,t,r=l[4].left_average+"",o,s,u,a=l[4].left_minimum+"",i,f;return{c(){e=T("p"),n=k("Left side of the road: "),t=T("b"),o=k(r),s=k(`
          m average,
          `),u=T("b"),i=k(a),f=k(`
          m minimum`)},m(c,_){$(c,e,_),h(e,n),h(e,t),h(t,o),h(e,s),h(e,u),h(u,i),h(e,f)},p(c,_){_&16&&r!==(r=c[4].left_average+"")&&B(o,r),_&16&&a!==(a=c[4].left_minimum+"")&&B(i,a)},d(c){c&&p(e)}}}function u$(l){let e;return{c(){e=T("p"),e.textContent="Right side of the road: no pavement"},m(n,t){$(n,e,t)},p:Z,d(n){n&&p(e)}}}function c$(l){let e,n,t,r=l[4].right_average+"",o,s,u,a=l[4].right_minimum+"",i,f;return{c(){e=T("p"),n=k("Right side of the road: "),t=T("b"),o=k(r),s=k(`
          m average,
          `),u=T("b"),i=k(a),f=k(`
          m minimum`)},m(c,_){$(c,e,_),h(e,n),h(e,t),h(t,o),h(e,s),h(e,u),h(u,i),h(e,f)},p(c,_){_&16&&r!==(r=c[4].right_average+"")&&B(o,r),_&16&&a!==(a=c[4].right_minimum+"")&&B(i,a)},d(c){c&&p(e)}}}function $$(l){let e,n;function t(i,f){return i[4].left_average?f$:a$}let r=t(l),o=r(l);function s(i,f){return i[4].right_average?c$:u$}let u=s(l),a=u(l);return{c(){o.c(),e=O(),a.c(),n=De()},m(i,f){o.m(i,f),$(i,e,f),a.m(i,f),$(i,n,f)},p(i,f){r===(r=t(i))&&o?o.p(i,f):(o.d(1),o=r(i),o&&(o.c(),o.m(e.parentNode,e))),u===(u=s(i))&&a?a.p(i,f):(a.d(1),a=u(i),a&&(a.c(),a.m(n.parentNode,n)))},d(i){i&&(p(e),p(n)),o.d(i),a.d(i)}}}function p$(l){let e,n;return e=new fe({props:{$$slots:{default:[$$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function m$(l){let e,n;const t=[H(Bt),{sourceLayer:Bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],l[2],l[1]),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[p$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(H(Bt)),s&0&&{sourceLayer:Bt},t[2],t[3],s&6&&{paint:{"line-color":Le(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":ze,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function _$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let a={$$slots:{right:[i$],default:[l$]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&el(l);return o=new ke({props:{url:`pmtiles://${cn()}/v1/${Bt}.pmtiles`,$$slots:{default:[m$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=el(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Bt="pavement_widths";function g$(l,e,n){let t=Q.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class d$ extends Y{constructor(e){super(),K(this,e,g$,_$,J,{})}}function h$(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function b$(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function v$(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function w$(l){let e,n,t,r,o,s,u,a,i,f,c;return u=new te({props:{href:"https://www.pct.bike",$$slots:{default:[b$]},$$scope:{ctx:l}}}),i=new te({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[v$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=O(),o=T("p"),s=k("See "),b(u.$$.fragment),a=k(" and "),b(i.$$.fragment),f=k(" for details on methodology and data sources.")},m(_,m){$(_,e,m),$(_,n,m),$(_,t,m),$(_,r,m),$(_,o,m),h(o,s),v(u,o,null),h(o,a),v(i,o,null),h(o,f),c=!0},p(_,m){const y={};m&1024&&(y.$$scope={dirty:m,ctx:_}),u.$set(y);const C={};m&1024&&(C.$$scope={dirty:m,ctx:_}),i.$set(C)},i(_){c||(g(u.$$.fragment,_),g(i.$$.fragment,_),c=!0)},o(_){d(u.$$.fragment,_),d(i.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(r),p(o)),w(u),w(i)}}}function k$(l){let e,n,t;return n=new me({props:{$$slots:{default:[w$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function tl(l){let e,n,t,r,o,s,u,a;e=new Ge({props:{colorScale:l[3],limits:l[4]}});function i(m){l[7](m)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new xl({props:f}),W.push(()=>V(t,"value",i));function c(m){l[8](m)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(_.value=l[1]),s=new _t({props:_}),W.push(()=>V(s,"value",c)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),o=O(),b(s.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,o,y),v(s,m,y),a=!0},p(m,y){const C={};!r&&y&1&&(r=!0,C.value=m[0],X(()=>r=!1)),t.$set(C);const S={};!u&&y&2&&(u=!0,S.value=m[1],X(()=>u=!1)),s.$set(S)},i(m){a||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(s.$$.fragment,m),a=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(s.$$.fragment,m),a=!1},d(m){m&&(p(n),p(o)),w(e,m),w(t,m),w(s,m)}}}function y$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Kt(!1),t=De(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function S$(l){let e,n;return e=new fe({props:{$$slots:{default:[y$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function C$(l){let e,n;const t=[H(it),{sourceLayer:it},{paint:{"line-color":Le(["get",l[1]],l[4],l[3]),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[2]&&l[0]==it?"visible":"none"}}];let r={$$slots:{default:[S$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ae(H(it)),s&0&&{sourceLayer:it},s&26&&{paint:{"line-color":Le(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==it?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function T$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Kt(!1),t=De(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function O$(l){let e,n;return e=new fe({props:{$$slots:{default:[T$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function L$(l){let e,n;const t=[H(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get",l[1]],l[4],l[3]),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[2]&&l[0]==mt?"visible":"none"}}];let r={$$slots:{default:[O$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ae(H(mt)),s&0&&{sourceLayer:mt},t[2],t[3],s&26&&{paint:{"line-color":Le(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==mt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function A$(l){let e,n,t,r,o,s,u,a;function i(_){l[6](_)}let f={$$slots:{right:[k$],default:[h$]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),W.push(()=>V(e,"checked",i));let c=l[2]&&tl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${it}.pmtiles`,$$slots:{default:[C$]},$$scope:{ctx:l}}}),u=new ke({props:{url:`pmtiles://${he()}/v1/${mt}.pmtiles`,$$slots:{default:[L$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),c&&c.c(),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment)},m(_,m){v(e,_,m),$(_,t,m),c&&c.m(_,m),$(_,r,m),v(o,_,m),$(_,s,m),v(u,_,m),a=!0},p(_,[m]){const y={};m&1024&&(y.$$scope={dirty:m,ctx:_}),!n&&m&4&&(n=!0,y.checked=_[2],X(()=>n=!1)),e.$set(y),_[2]?c?(c.p(_,m),m&4&&g(c,1)):(c=tl(_),c.c(),g(c,1),c.m(r.parentNode,r)):c&&(ce(),d(c,1,1,()=>{c=null}),$e());const C={};m&1031&&(C.$$scope={dirty:m,ctx:_}),o.$set(C);const S={};m&1031&&(S.$$scope={dirty:m,ctx:_}),u.$set(S)},i(_){a||(g(e.$$.fragment,_),g(c),g(o.$$.fragment,_),g(u.$$.fragment,_),a=!0)},o(_){d(e.$$.fragment,_),d(c),d(o.$$.fragment,_),d(u.$$.fragment,_),a=!1},d(_){_&&(p(t),p(r),p(s)),w(e,_),c&&c.d(_),w(o,_),w(u,_)}}}let it="pct_commute",mt="pct_school";function I$(l,e,n){let t=Q.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=it,s="baseline",u=!1;function a(_){let m=_.baseline,y=_.gov_target,C=_.go_dutch,S=`<h2>Trip purpose: ${o==it?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let A=(y/m).toFixed(1),R=(C/m).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${A}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${R}x</b> of baseline)</p>`}return S}function i(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){s=_,n(1,s)}return[o,s,u,t,r,a,i,f,c]}class N$ extends Y{constructor(e){super(),K(this,e,I$,A$,J,{})}}function P$(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function M$(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function F$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function D$(l){let e,n,t,r,o,s,u,a,i,f,c,_;return t=new te({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[M$]},$$scope:{ctx:l}}}),f=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[F$]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",u=O(),a=T("p"),i=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),c=k(".")},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,r),$(m,o,y),$(m,s,y),$(m,u,y),$(m,a,y),h(a,i),v(f,a,null),h(a,c),_=!0},p(m,y){const C={};y&256&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&256&&(S.$$scope={dirty:y,ctx:m}),f.$set(S)},i(m){_||(g(t.$$.fragment,m),g(f.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(f.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(u),p(a)),w(t),w(f)}}}function E$(l){let e,n,t;return n=new me({props:{$$slots:{default:[D$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function nl(l){let e,n,t,r,o;e=new Ge({props:{colorScale:l[2],limits:l[3]}});function s(a){l[6](a)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new xl({props:u}),W.push(()=>V(t,"value",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,i){v(e,a,i),$(a,n,i),v(t,a,i),o=!0},p(a,i){const f={};!r&&i&1&&(r=!0,f.value=a[0],X(()=>r=!1)),t.$set(f)},i(a){o||(g(e.$$.fragment,a),g(t.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),o=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function j$(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,a,i=l[7].highest_mph+"",f,c,_=l[4][l[7].highest_description]+"",m,y;return{c(){e=T("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=O(),u=T("p"),a=k("Highest average speed: "),f=k(i),c=k(" mph (during "),m=k(_),y=k(")")},m(C,S){$(C,e,S),h(e,n),h(e,r),h(e,o),$(C,s,S),$(C,u,S),h(u,a),h(u,f),h(u,c),h(u,m),h(u,y)},p(C,S){S&128&&t!==(t=C[7].indicative_mph+"")&&B(r,t),S&128&&i!==(i=C[7].highest_mph+"")&&B(f,i),S&128&&_!==(_=C[4][C[7].highest_description]+"")&&B(m,_)},d(C){C&&(p(e),p(s),p(u))}}}function R$(l){let e,n;return e=new fe({props:{$$slots:{default:[j$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function B$(l){let e,n;const t=[H(zt),{sourceLayer:zt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get",l[0]],l[3],l[2]),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[R$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&15?ne(t,[s&0&&ae(H(zt)),s&0&&{sourceLayer:zt},t[2],t[3],s&13&&{paint:{"line-color":Le(["get",o[0]],o[3],o[2]),"line-width":ze,"line-opacity":x(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function z$(l){let e,n,t,r,o,s;function u(f){l[5](f)}let a={$$slots:{right:[E$],default:[P$]},$$scope:{ctx:l}};l[1]!==void 0&&(a.checked=l[1]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[1]&&nl(l);return o=new ke({props:{url:`pmtiles://${cn()}/v1/${zt}.pmtiles`,$$slots:{default:[B$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?i?(i.p(f,c),c&2&&g(i,1)):(i=nl(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&259&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let zt="road_speeds";function H$(l,e,n){let t=Q.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(f){s=f,n(1,s)}function i(f){o=f,n(0,o)}return[o,s,t,r,u,a,i]}class q$ extends Y{constructor(e){super(),K(this,e,H$,z$,J,{})}}function G$(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function U$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function W$(l){let e,n,t,r,o,s,u,a,i;return u=new te({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[U$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",r=O(),o=T("p"),s=k(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),a=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),h(o,s),v(u,o,null),h(o,a),i=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){i||(g(u.$$.fragment,f),i=!0)},o(f){d(u.$$.fragment,f),i=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),w(u)}}}function V$(l){let e,n,t;return n=new me({props:{$$slots:{default:[W$]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function rl(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Z,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function X$(l){let e,n,t,r=l[4].average+"",o,s,u,a,i,f,c=l[4].minimum+"",_,m;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(r),s=k(`
        meters`),u=O(),a=T("p"),i=k("Minimum width: "),f=T("b"),_=k(c),m=k(`
        meters`)},m(y,C){$(y,e,C),h(e,n),h(e,t),h(t,o),h(e,s),$(y,u,C),$(y,a,C),h(a,i),h(a,f),h(f,_),h(a,m)},p(y,C){C&16&&r!==(r=y[4].average+"")&&B(o,r),C&16&&c!==(c=y[4].minimum+"")&&B(_,c)},d(y){y&&(p(e),p(u),p(a))}}}function J$(l){let e,n;return e=new fe({props:{$$slots:{default:[X$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Y$(l){let e,n;const t=[H(Ht),{sourceLayer:Ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get","average"],l[2],l[1]),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[J$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(H(Ht)),s&0&&{sourceLayer:Ht},t[2],t[3],s&6&&{paint:{"line-color":Le(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function K$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let a={$$slots:{right:[V$],default:[G$]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&rl(l);return o=new ke({props:{url:`pmtiles://${cn()}/v1/${Ht}.pmtiles`,$$slots:{default:[Y$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=rl(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Ht="road_widths";function Z$(l,e,n){let t=Q.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Q$ extends Y{constructor(e){super(),K(this,e,Z$,K$,J,{})}}function x$(l){let e,n,t;return e=new Pe({props:{color:Q.trams}}),{c(){b(e.$$.fragment),n=k(`
  Trams`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function ep(l){let e,n,t,r;return t=new et({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:Z,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function tp(l){let e,n,t;return n=new me({props:{$$slots:{default:[ep]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function np(l){let e,n;const t=[H(qt),{sourceLayer:qt},{paint:{"line-color":Q.trams,"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Oe({props:r}),e.$on("click",lp),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(H(qt)),s&0&&{sourceLayer:qt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function rp(l){let e,n,t,r,o;function s(a){l[1](a)}let u={$$slots:{right:[tp],default:[x$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${qt}.pmtiles`,$$slots:{default:[np]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&4&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&5&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let qt="trams";function lp(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function op(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class sp extends Y{constructor(e){super(),K(this,e,op,rp,J,{})}}function ip(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ap(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fp(l){let e,n,t,r,o,s,u,a,i;return t=new te({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[ap]},$$scope:{ctx:l}}}),a=new Ee({}),{c(){e=T("p"),n=k("Data from the "),b(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=O(),s=T("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),$(f,o,c),$(f,s,c),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){i||(g(t.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(o),p(s),p(u)),w(t),w(a,f)}}}function up(l){let e,n,t;return n=new me({props:{$$slots:{default:[fp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ll(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:Z,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function cp(l){let e,n,t,r=l[4].stop_name+"",o,s,u,a,i,f=l[4].peak+"",c,_,m,y,C,S=l[4].peak_description+"",A,R,F,D,L,N=l[4].total+"",M,I,j=l[4].total_description+"",U,q;return{c(){e=T("p"),n=k("Stop name: "),t=T("b"),o=k(r),s=O(),u=T("p"),a=k("Peak: "),i=T("b"),c=k(f),_=k(`
        buses during the busiest hour of any day`),m=O(),y=T("p"),C=k("The peak hour is "),A=k(S),R=O(),F=T("p"),D=k("Total buses per day: "),L=T("b"),M=k(N),I=k(`
        (for `),U=k(j),q=k(", the busiest day of the week)")},m(E,P){$(E,e,P),h(e,n),h(e,t),h(t,o),$(E,s,P),$(E,u,P),h(u,a),h(u,i),h(i,c),h(u,_),$(E,m,P),$(E,y,P),h(y,C),h(y,A),$(E,R,P),$(E,F,P),h(F,D),h(F,L),h(L,M),h(F,I),h(F,U),h(F,q)},p(E,P){P&16&&r!==(r=E[4].stop_name+"")&&B(o,r),P&16&&f!==(f=E[4].peak+"")&&B(c,f),P&16&&S!==(S=E[4].peak_description+"")&&B(A,S),P&16&&N!==(N=E[4].total+"")&&B(M,N),P&16&&j!==(j=E[4].total_description+"")&&B(U,j)},d(E){E&&(p(e),p(s),p(u),p(m),p(y),p(R),p(F))}}}function $p(l){let e,n;return e=new fe({props:{$$slots:{default:[cp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pp(l){let e,n;const t=[H(Gt),{sourceLayer:Gt},{paint:{"circle-color":Le(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[$p]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new pt({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(H(Gt)),s&0&&{sourceLayer:Gt},s&6&&{paint:{"circle-color":Le(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function mp(l){let e,n,t,r,o,s;function u(f){l[3](f)}let a={$$slots:{right:[up],default:[ip]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&ll(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Gt}.pmtiles`,$$slots:{default:[pp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=ll(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Gt="bus_stops";function _p(l,e,n){let t=Q.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class gp extends Y{constructor(e){super(),K(this,e,_p,mp,J,{})}}function dp(l){let e,n,t;return{c(){e=T("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=Ze(e,"change",l[5]),n=!0)},p:Z,d(r){r&&p(e),l[7](null),n=!1,t()}}}function ol(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[bp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function hp(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Pe({props:{color:Ut}}),{c(){b(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(u,a){v(e,u,a),$(u,n,a),$(u,r,a),$(u,o,a),s=!0},p(u,a){(!s||a&4)&&t!==(t=u[2].toLocaleString()+"")&&B(r,t)},i(u){s||(g(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function bp(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[hp]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const a={};u&2052&&(a.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,a.checked=s[1],X(()=>n=!1)),e.$set(a)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function vp(l){let e,n,t,r,o,s;e=new Sn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[dp]},$$scope:{ctx:l}}}),t=new eo({props:{errorMessage:l[3]}});let u=l[2]>0&&ol(l);return{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),u&&u.c(),o=De()},m(a,i){v(e,a,i),$(a,n,i),v(t,a,i),$(a,r,i),u&&u.m(a,i),$(a,o,i),s=!0},p(a,i){const f={};i&2049&&(f.$$scope={dirty:i,ctx:a}),e.$set(f);const c={};i&8&&(c.errorMessage=a[3]),t.$set(c),a[2]>0?u?(u.p(a,i),i&4&&g(u,1)):(u=ol(a),u.c(),g(u,1),u.m(o.parentNode,o)):u&&(ce(),d(u,1,1,()=>{u=null}),$e())},i(a){s||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(u),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(u),s=!1},d(a){a&&(p(n),p(r),p(o)),w(e,a),w(t,a),u&&u.d(a)}}}function wp(l){let e,n,t=l[10].critical_type+"",r,o,s,u,a,i=l[10].location_description+"",f,c,_,m,y,C=l[10].notes+"",S,A,R,F,D,L,N,M=l[10].id+"",I,j,U,q,E,P=(l[10].inspector??"???")+"",z,oe,se,ye=l[10].submission_time+"",de,Se,ie,Ne,Te,be=l[10].scheme_reference+"",re,pe,ge,ve=l[10].current_design_stage+"",_e;return{c(){e=T("div"),n=T("h2"),r=k(t),o=O(),s=T("p"),u=T("u"),u.textContent="Location",a=k(`
          : `),f=k(i),c=O(),_=T("p"),m=T("u"),m.textContent="Notes",y=k(`
          : `),S=k(C),A=O(),R=T("hr"),F=O(),D=T("p"),L=k("Critical issue ID: "),N=T("b"),I=k(M),j=O(),U=T("p"),q=k("Submitted by "),E=T("b"),z=k(P),oe=k(`
          at
          `),se=T("b"),de=k(ye),Se=O(),ie=T("p"),Ne=k("For scheme "),Te=T("b"),re=k(be),pe=k(`
          in stage
          `),ge=T("b"),_e=k(ve),Ce(e,"max-width","30vw")},m(Ie,Me){$(Ie,e,Me),h(e,n),h(n,r),h(e,o),h(e,s),h(s,u),h(s,a),h(s,f),h(e,c),h(e,_),h(_,m),h(_,y),h(_,S),h(e,A),h(e,R),h(e,F),h(e,D),h(D,L),h(D,N),h(N,I),h(e,j),h(e,U),h(U,q),h(U,E),h(E,z),h(U,oe),h(U,se),h(se,de),h(e,Se),h(e,ie),h(ie,Ne),h(ie,Te),h(Te,re),h(ie,pe),h(ie,ge),h(ge,_e)},p(Ie,Me){Me&1024&&t!==(t=Ie[10].critical_type+"")&&B(r,t),Me&1024&&i!==(i=Ie[10].location_description+"")&&B(f,i),Me&1024&&C!==(C=Ie[10].notes+"")&&B(S,C),Me&1024&&M!==(M=Ie[10].id+"")&&B(I,M),Me&1024&&P!==(P=(Ie[10].inspector??"???")+"")&&B(z,P),Me&1024&&ye!==(ye=Ie[10].submission_time+"")&&B(de,ye),Me&1024&&be!==(be=Ie[10].scheme_reference+"")&&B(re,be),Me&1024&&ve!==(ve=Ie[10].current_design_stage+"")&&B(_e,ve)},d(Ie){Ie&&p(e)}}}function kp(l){let e,n;return e=new fe({props:{$$slots:{default:[wp,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function yp(l){let e,n,t,r,o,s;const u=[H("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":Ut,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let a={};for(let m=0;m<u.length;m+=1)a=ee(a,u[m]);e=new pt({props:a}),e.$on("click",l[6]);const i=[H("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let m=0;m<i.length;m+=1)f=ee(f,i[m]);t=new $n({props:f});const c=[H("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Ut,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let _={$$slots:{default:[kp]},$$scope:{ctx:l}};for(let m=0;m<c.length;m+=1)_=ee(_,c[m]);return o=new pt({props:_}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,r,y),v(o,m,y),s=!0},p(m,y){const C=y&2?ne(u,[u[0],u[1],y&0&&{paint:{"circle-color":Ut,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:m[1]?"visible":"none"}},u[4]]):{};e.$set(C);const S=y&2?ne(i,[i[0],i[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:m[1]?"visible":"none"}}]):{};t.$set(S);const A=y&2?ne(c,[c[0],c[1],c[2],c[3],y&0&&{paint:{"circle-color":Ut,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:m[1]?"visible":"none"}}]):{};y&2048&&(A.$$scope={dirty:y,ctx:m}),o.$set(A)},i(m){s||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),s=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),s=!1},d(m){m&&(p(n),p(r)),w(e,m),w(t,m),w(o,m)}}}function Sp(l){let e,n,t,r;return e=new He({props:{label:"Critical Issues",$$slots:{default:[vp]},$$scope:{ctx:l}}}),t=new yt({props:{id:vo,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[yp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const a={};s&16&&(a.data=o[4]),s&2050&&(a.$$scope={dirty:s,ctx:o}),t.$set(a)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let vo="criticals",Ut="red";function Cp(l,e,n){let t;Ae(l,En,m=>n(9,t=m));let r,o=!0,s=0,u="",a=kn();async function i(m){try{n(4,a=await Ca(r.files[0])),n(2,s=a.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}async function f(m){let y=await t.getSource(vo).getClusterExpansionZoom(m.detail.features[0].properties.cluster_id);t.easeTo({center:m.detail.features[0].geometry.coordinates,zoom:y})}function c(m){W[m?"unshift":"push"](()=>{r=m,n(0,r)})}function _(m){o=m,n(1,o)}return[r,o,s,u,a,i,f,c,_]}class Tp extends Y{constructor(e){super(),K(this,e,Cp,Sp,J,{})}}function Op(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lp(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ap(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Lp]},$$scope:{ctx:l}}}),s=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Ip(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ap]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function sl(l){let e,n;return e=new Rn({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Z,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Np(l){let e,n=il(l[3])+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=il(r[3])+"")&&B(t,n)},d(r){r&&p(e)}}}function Pp(l){let e,n;return e=new fe({props:{$$slots:{default:[Np,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Mp(l){let e,n;const t=[H(Wt),{sourceLayer:Wt},{paint:{"circle-color":$t(["get","crossing"],{traffic_signals:Q.signalized_crossing},Q.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Pp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new pt({props:r}),e.$on("click",Dp),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(H(Wt)),s&0&&{sourceLayer:Wt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Fp(l){let e,n,t,r,o,s;function u(f){l[2](f)}let a={$$slots:{right:[Ip],default:[Op]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&sl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Wt}.pmtiles`,$$slots:{default:[Mp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=sl(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&17&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Wt="crossings";function il(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function Dp(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function Ep(l,e,n){let t=!1,r=[["Signalized",Q.signalized_crossing],["Other",Q.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class jp extends Y{constructor(e){super(),K(this,e,Ep,Fp,J,{})}}function Rp(l){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bp(l){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zp(l){let e,n,t,r,o,s,u,a,i,f,c,_,m;return u=new te({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Bp]},$$scope:{ctx:l}}}),f=new Ee({}),_=new et({}),{c(){e=T("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=O(),t=T("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=O(),o=T("p"),s=k("This layer is built from "),b(u.$$.fragment),a=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),i=O(),b(f.$$.fragment),c=O(),b(_.$$.fragment)},m(y,C){$(y,e,C),$(y,n,C),$(y,t,C),$(y,r,C),$(y,o,C),h(o,s),v(u,o,null),h(o,a),$(y,i,C),v(f,y,C),$(y,c,C),v(_,y,C),m=!0},p(y,C){const S={};C&32&&(S.$$scope={dirty:C,ctx:y}),u.$set(S)},i(y){m||(g(u.$$.fragment,y),g(f.$$.fragment,y),g(_.$$.fragment,y),m=!0)},o(y){d(u.$$.fragment,y),d(f.$$.fragment,y),d(_.$$.fragment,y),m=!1},d(y){y&&(p(e),p(n),p(t),p(r),p(o),p(i),p(c)),w(u),w(f,y),w(_,y)}}}function Hp(l){let e,n,t;return n=new me({props:{$$slots:{default:[zp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function al(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Z,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qp(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=T("p"),n=k("Gradient: "),t=T("b"),o=k(r),s=k(`
        %`)},m(u,a){$(u,e,a),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,a){a&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&B(o,r)},d(u){u&&p(e)}}}function Gp(l){let e,n;return e=new fe({props:{$$slots:{default:[qp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Up(l){let e,n,t,r;const o=[H(st),{sourceLayer:st},{manageHoverState:!0},{paint:{"line-color":Le(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":ze,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[Gp]},$$scope:{ctx:l}};for(let i=0;i<o.length;i+=1)s=ee(s,o[i]);e=new Oe({props:s});const u=[H(st+"_arrows"),{sourceLayer:st},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=ee(a,u[i]);return t=new $n({props:a}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),r=!0},p(i,f){const c=f&7?ne(o,[f&0&&ae(H(st)),f&0&&{sourceLayer:st},o[2],f&6&&{paint:{"line-color":Le(["/",["abs",["get","gradient"]],100],i[2],i[1]),"line-width":ze,"line-opacity":x(1,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&1?ne(u,[f&0&&ae(H(st+"_arrows")),f&0&&{sourceLayer:st},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){r||(g(e.$$.fragment,i),g(t.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),r=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Wp(l){let e,n,t,r,o,s;function u(f){l[3](f)}let a={$$slots:{right:[Hp],default:[Rp]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&al(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${st}.pmtiles`,$$slots:{default:[Up]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=al(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let st="gradient";function Vp(l,e,n){let t=Q.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Xp extends Y{constructor(e){super(),K(this,e,Vp,Wp,J,{})}}function Jp(l){let e,n,t;return{c(){e=T("img"),t=k(`
  Cycle parking`),Qt(e.src,n=Oo)||G(e,"src",n),G(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:Z,d(r){r&&(p(e),p(t))}}}function Yp(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Kp(l){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zp(l){let e,n,t,r,o,s,u,a,i,f,c;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Yp]},$$scope:{ctx:l}}}),a=new te({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Kp]},$$scope:{ctx:l}}}),f=new et({}),{c(){e=T("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),s=T("p"),u=k("Icon from "),b(a.$$.fragment),i=O(),b(f.$$.fragment)},m(_,m){$(_,e,m),h(e,n),v(t,e,null),h(e,r),$(_,o,m),$(_,s,m),h(s,u),v(a,s,null),$(_,i,m),v(f,_,m),c=!0},p(_,m){const y={};m&8&&(y.$$scope={dirty:m,ctx:_}),t.$set(y);const C={};m&8&&(C.$$scope={dirty:m,ctx:_}),a.$set(C)},i(_){c||(g(t.$$.fragment,_),g(a.$$.fragment,_),g(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(a.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(o),p(s),p(i)),w(t),w(a),w(f,_)}}}function Qp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Zp]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function xp(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&B(o,r)},d(s){s&&p(e)}}}function em(l){let e,n;return e=new fe({props:{$$slots:{default:[xp,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function tm(l){let e,n;const t=[H(Vt),{sourceLayer:Vt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[em]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new $n({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(H(Vt)),s&0&&{sourceLayer:Vt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function nm(l){let e,n,t,r,o;function s(a){l[1](a)}let u={$$slots:{right:[Qp],default:[Jp]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Vt}.pmtiles`,$$slots:{default:[tm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&8&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&9&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Vt="cycle_parking";function rm(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class lm extends Y{constructor(e){super(),K(this,e,rm,nm,J,{})}}function om(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sm(l){let e,n,t,r;return t=new et({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=O(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:Z,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function im(l){let e,n,t;return n=new me({props:{$$slots:{default:[sm]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function fl(l){let e,n,t;return n=new xe({props:{$$slots:{default:[cm]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function am(l){let e,n,t;return e=new Pe({props:{color:Q.education.schools}}),{c(){b(e.$$.fragment),n=k(`
        Schools`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function fm(l){let e,n,t;return e=new Pe({props:{color:Q.education.colleges}}),{c(){b(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function um(l){let e,n,t;return e=new Pe({props:{color:Q.education.universities}}),{c(){b(e.$$.fragment),n=k(`
        Universities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function cm(l){let e,n,t,r,o,s,u,a,i;function f(S){l[3](S)}let c={$$slots:{default:[am]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),W.push(()=>V(e,"checked",f));function _(S){l[4](S)}let m={$$slots:{default:[fm]},$$scope:{ctx:l}};l[1].college!==void 0&&(m.checked=l[1].college),r=new le({props:m}),W.push(()=>V(r,"checked",_));function y(S){l[5](S)}let C={$$slots:{default:[um]},$$scope:{ctx:l}};return l[1].university!==void 0&&(C.checked=l[1].university),u=new le({props:C}),W.push(()=>V(u,"checked",y)),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment),s=O(),b(u.$$.fragment)},m(S,A){v(e,S,A),$(S,t,A),v(r,S,A),$(S,s,A),v(u,S,A),i=!0},p(S,A){const R={};A&128&&(R.$$scope={dirty:A,ctx:S}),!n&&A&2&&(n=!0,R.checked=S[1].school,X(()=>n=!1)),e.$set(R);const F={};A&128&&(F.$$scope={dirty:A,ctx:S}),!o&&A&2&&(o=!0,F.checked=S[1].college,X(()=>o=!1)),r.$set(F);const D={};A&128&&(D.$$scope={dirty:A,ctx:S}),!a&&A&2&&(a=!0,D.checked=S[1].university,X(()=>a=!1)),u.$set(D)},i(S){i||(g(e.$$.fragment,S),g(r.$$.fragment,S),g(u.$$.fragment,S),i=!0)},o(S){d(e.$$.fragment,S),d(r.$$.fragment,S),d(u.$$.fragment,S),i=!1},d(S){S&&(p(t),p(s)),w(e,S),w(r,S),w(u,S)}}}function $m(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&B(t,n)},d(r){r&&p(e)}}}function pm(l){let e,n;return e=new fe({props:{$$slots:{default:[$m,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mm(l){let e,n;const t=[H(Xt),{sourceLayer:Xt},{paint:{"fill-color":$t(["get","type"],{school:Q.education.schools,college:Q.education.colleges,university:Q.education.universities},"grey"),"fill-opacity":x(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:ul(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[pm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(H(Xt)),s&0&&{sourceLayer:Xt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:ul(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function _m(l){let e,n,t,r,o,s;function u(f){l[2](f)}let a={$$slots:{right:[im],default:[om]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&fl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Xt}.pmtiles`,$$slots:{default:[mm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&128&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=fl(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&131&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Xt="education";function ul(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function gm(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(i){t=i,n(0,t)}function s(i){l.$$.not_equal(r.school,i)&&(r.school=i,n(1,r))}function u(i){l.$$.not_equal(r.college,i)&&(r.college=i,n(1,r))}function a(i){l.$$.not_equal(r.university,i)&&(r.university=i,n(1,r))}return[t,r,o,s,u,a]}class dm extends Y{constructor(e){super(),K(this,e,gm,_m,J,{})}}function hm(l){let e,n,t,r;return e=new Pe({props:{color:l[4]}}),{c(){b(e.$$.fragment),n=O(),t=k(l[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&B(t,o[2])},i(o){r||(g(e.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function bm(l){let e;const n=l[5].default,t=dt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&ht(t,n,r,r[7],e?vt(n,r[7],o,null):bt(r[7]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function vm(l){let e,n,t;return n=new me({props:{$$slots:{default:[bm]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function wm(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&B(t,n)},d(r){r&&p(e)}}}function km(l){let e,n;return e=new fe({props:{$$slots:{default:[wm,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ym(l){let e,n;const t=[H(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":x(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[km]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&25?ne(t,[s&1&&ae(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":x(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Sm(l){let e,n,t,r,o;function s(a){l[6](a)}let u={$$slots:{right:[vm],default:[hm]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${l[0]}.pmtiles`,$$slots:{default:[ym]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&132&&(f.$$scope={dirty:i,ctx:a}),!n&&i&8&&(n=!0,f.checked=a[3],X(()=>n=!1)),e.$set(f);const c={};i&1&&(c.url=`pmtiles://${he()}/v1/${a[0]}.pmtiles`),i&139&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}function Cm(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,a=Q[o],i=!1;function f(c){i=c,n(3,i)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,i,a,t,f,r]}class wo extends Y{constructor(e){super(),K(this,e,Cm,Sm,J,{name:0,singularNoun:1,pluralNoun:2})}}function Tm(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Om(l){let e,n,t,r,o,s,u;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Tm]},$$scope:{ctx:l}}}),s=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),b(s.$$.fragment)},m(a,i){$(a,e,i),h(e,n),v(t,e,null),h(e,r),$(a,o,i),v(s,a,i),u=!0},p(a,i){const f={};i&1&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(g(t.$$.fragment,a),g(s.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(s.$$.fragment,a),u=!1},d(a){a&&(p(e),p(o)),w(t),w(s,a)}}}function Lm(l){let e,n;return e=new wo({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Om]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Am extends Y{constructor(e){super(),K(this,e,null,Lm,J,{})}}function Im(l){let e,n,t;return{c(){e=T("img"),t=k(`
  Railway Stations`),Qt(e.src,n=Lo)||G(e,"src",n),G(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:Z,d(r){r&&(p(e),p(t))}}}function Nm(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pm(l){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mm(l){let e,n,t,r,o,s,u,a,i,f,c,_;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Nm]},$$scope:{ctx:l}}}),a=new te({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Pm]},$$scope:{ctx:l}}}),c=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),s=T("p"),u=k("Icon from "),b(a.$$.fragment),i=k(". (Note that not all stations shown are National Rail.)"),f=O(),b(c.$$.fragment)},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,r),$(m,o,y),$(m,s,y),h(s,u),v(a,s,null),h(s,i),$(m,f,y),v(c,m,y),_=!0},p(m,y){const C={};y&8&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&8&&(S.$$scope={dirty:y,ctx:m}),a.$set(S)},i(m){_||(g(t.$$.fragment,m),g(a.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(a.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(f)),w(t),w(a),w(c,m)}}}function Fm(l){let e,n,t;return n=new me({props:{$$slots:{default:[Mm]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Dm(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&B(t,n)},d(r){r&&p(e)}}}function Em(l){let e,n;return e=new fe({props:{$$slots:{default:[Dm,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function jm(l){let e,n;const t=[H(Fn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Em]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new $n({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(H(Fn)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Rm(l){let e,n,t,r,o;function s(a){l[1](a)}let u={$$slots:{right:[Fm],default:[Im]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new yt({props:{data:`${he()}/v1/${Fn}.geojson`,$$slots:{default:[jm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment)},m(a,i){v(e,a,i),$(a,t,i),v(r,a,i),o=!0},p(a,[i]){const f={};i&8&&(f.$$scope={dirty:i,ctx:a}),!n&&i&1&&(n=!0,f.checked=a[0],X(()=>n=!1)),e.$set(f);const c={};i&9&&(c.$$scope={dirty:i,ctx:a}),r.$set(c)},i(a){o||(g(e.$$.fragment,a),g(r.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(r.$$.fragment,a),o=!1},d(a){a&&p(t),w(e,a),w(r,a)}}}let Fn="railway_stations";function Bm(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class zm extends Y{constructor(e){super(),K(this,e,Bm,Rm,J,{})}}function Hm(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qm(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gm(l){let e,n,t,r,o,s,u,a,i;return t=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Hm]},$$scope:{ctx:l}}}),o=new te({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[qm]},$$scope:{ctx:l}}}),a=new et({}),{c(){e=T("p"),n=k("This shows "),b(t.$$.fragment),r=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),b(a.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(a,f,c),i=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){i||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(a,f)}}}function Um(l){let e,n;return e=new wo({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Gm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class Wm extends Y{constructor(e){super(),K(this,e,null,Um,J,{})}}function Vm(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xm(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jm(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ym(l){let e,n,t,r,o,s,u,a,i,f,c,_,m,y,C,S,A,R,F,D,L,N,M;return t=new te({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Xm]},$$scope:{ctx:l}}}),A=new te({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Jm]},$$scope:{ctx:l}}}),N=new Ee({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=O(),s=T("ul"),u=T("li"),u.textContent="Only collisions between 2017 and 2022 are included",a=O(),i=T("li"),i.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=O(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,_=O(),m=T("li"),m.textContent='The "pedestrians" category also include mobility scooters',y=O(),C=T("li"),S=k("All limitations "),b(A.$$.fragment),R=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),F=O(),D=T("p"),D.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=O(),b(N.$$.fragment)},m(I,j){$(I,e,j),h(e,n),v(t,e,null),h(e,r),$(I,o,j),$(I,s,j),h(s,u),h(s,a),h(s,i),h(s,f),h(s,c),h(s,_),h(s,m),h(s,y),h(s,C),h(C,S),v(A,C,null),h(C,R),$(I,F,j),$(I,D,j),$(I,L,j),v(N,I,j),M=!0},p(I,j){const U={};j&16777216&&(U.$$scope={dirty:j,ctx:I}),t.$set(U);const q={};j&16777216&&(q.$$scope={dirty:j,ctx:I}),A.$set(q)},i(I){M||(g(t.$$.fragment,I),g(A.$$.fragment,I),g(N.$$.fragment,I),M=!0)},o(I){d(t.$$.fragment,I),d(A.$$.fragment,I),d(N.$$.fragment,I),M=!1},d(I){I&&(p(e),p(o),p(s),p(F),p(D),p(L)),w(t),w(A),w(N,I)}}}function Km(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ym]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function cl(l){let e,n,t,r,o,s,u,a,i,f,c,_,m;return n=new xe({props:{small:!0,$$slots:{default:[t_]},$$scope:{ctx:l}}}),f=new Rn({props:{rows:l[14]}}),{c(){e=T("div"),b(n.$$.fragment),t=O(),r=T("div"),o=k(`Filter years:
      `),s=T("input"),u=k(`
      -
      `),a=T("input"),i=O(),b(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(a,"type","number"),G(a,"min",2017),G(a,"max",2022),G(a,"class","svelte-1ft65rw"),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(y,C){$(y,e,C),v(n,e,null),h(e,t),h(e,r),h(r,o),h(r,s),Ye(s,l[4]),h(r,u),h(r,a),Ye(a,l[5]),h(e,i),v(f,e,null),c=!0,_||(m=[Ze(s,"input",l[20]),Ze(a,"input",l[21])],_=!0)},p(y,C){const S={};C&16777231&&(S.$$scope={dirty:C,ctx:y}),n.$set(S),C&16&&xt(s.value)!==y[4]&&Ye(s,y[4]),C&32&&xt(a.value)!==y[5]&&Ye(a,y[5])},i(y){c||(g(n.$$.fragment,y),g(f.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(f.$$.fragment,y),c=!1},d(y){y&&p(e),w(n),w(f),_=!1,Ql(m)}}}function Zm(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qm(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xm(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function e_(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function t_(l){let e,n,t,r,o,s,u,a,i,f,c,_;function m(L){l[16](L)}let y={$$slots:{default:[Zm]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new le({props:y}),W.push(()=>V(e,"checked",m));function C(L){l[17](L)}let S={$$slots:{default:[Qm]},$$scope:{ctx:l}};l[1]!==void 0&&(S.checked=l[1]),r=new le({props:S}),W.push(()=>V(r,"checked",C));function A(L){l[18](L)}let R={$$slots:{default:[xm]},$$scope:{ctx:l}};l[2]!==void 0&&(R.checked=l[2]),u=new le({props:R}),W.push(()=>V(u,"checked",A));function F(L){l[19](L)}let D={$$slots:{default:[e_]},$$scope:{ctx:l}};return l[3]!==void 0&&(D.checked=l[3]),f=new le({props:D}),W.push(()=>V(f,"checked",F)),{c(){b(e.$$.fragment),t=O(),b(r.$$.fragment),s=O(),b(u.$$.fragment),i=O(),b(f.$$.fragment)},m(L,N){v(e,L,N),$(L,t,N),v(r,L,N),$(L,s,N),v(u,L,N),$(L,i,N),v(f,L,N),_=!0},p(L,N){const M={};N&16777216&&(M.$$scope={dirty:N,ctx:L}),!n&&N&1&&(n=!0,M.checked=L[0],X(()=>n=!1)),e.$set(M);const I={};N&16777216&&(I.$$scope={dirty:N,ctx:L}),!o&&N&2&&(o=!0,I.checked=L[1],X(()=>o=!1)),r.$set(I);const j={};N&16777216&&(j.$$scope={dirty:N,ctx:L}),!a&&N&4&&(a=!0,j.checked=L[2],X(()=>a=!1)),u.$set(j);const U={};N&16777216&&(U.$$scope={dirty:N,ctx:L}),!c&&N&8&&(c=!0,U.checked=L[3],X(()=>c=!1)),f.$set(U)},i(L){_||(g(e.$$.fragment,L),g(r.$$.fragment,L),g(u.$$.fragment,L),g(f.$$.fragment,L),_=!0)},o(L){d(e.$$.fragment,L),d(r.$$.fragment,L),d(u.$$.fragment,L),d(f.$$.fragment,L),_=!1},d(L){L&&(p(t),p(s),p(i)),w(e,L),w(r,L),w(u,L),w(f,L)}}}function $l(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&B(o,r)},d(s){s&&p(e)}}}function pl(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&B(o,r)},d(s){s&&p(e)}}}function n_(l){let e,n,t,r=l[23].year+"",o,s,u,a,i,f=l[10][l[23].severity]+"",c,_,m,y,C,S=ml(l[23])+"",A,R,F,D,L,N=l[23].pedestrian_location&&$l(l),M=l[23].pedestrian_movement&&pl(l);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(r),s=O(),u=T("p"),a=k("Severity: "),i=T("b"),c=k(f),_=O(),m=T("p"),y=k("Casualties: "),C=T("b"),A=k(S),R=O(),N&&N.c(),F=O(),M&&M.c(),D=O(),L=T("p"),L.textContent="Click to open full report in CycleStreets"},m(I,j){$(I,e,j),h(e,n),h(e,t),h(t,o),$(I,s,j),$(I,u,j),h(u,a),h(u,i),h(i,c),$(I,_,j),$(I,m,j),h(m,y),h(m,C),h(C,A),$(I,R,j),N&&N.m(I,j),$(I,F,j),M&&M.m(I,j),$(I,D,j),$(I,L,j)},p(I,j){j&8388608&&r!==(r=I[23].year+"")&&B(o,r),j&8388608&&f!==(f=I[10][I[23].severity]+"")&&B(c,f),j&8388608&&S!==(S=ml(I[23])+"")&&B(A,S),I[23].pedestrian_location?N?N.p(I,j):(N=$l(I),N.c(),N.m(F.parentNode,F)):N&&(N.d(1),N=null),I[23].pedestrian_movement?M?M.p(I,j):(M=pl(I),M.c(),M.m(D.parentNode,D)):M&&(M.d(1),M=null)},d(I){I&&(p(e),p(s),p(u),p(_),p(m),p(R),p(F),p(D),p(L)),N&&N.d(I),M&&M.d(I)}}}function r_(l){let e,n;return e=new fe({props:{$$slots:{default:[n_,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function l_(l){let e,n;const t=[H(Jt),{sourceLayer:Jt},{paint:{"circle-color":Le(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[r_]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new pt({props:r}),e.$on("click",s_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&14528?ne(t,[s&0&&ae(H(Jt)),s&0&&{sourceLayer:Jt},s&14336&&{paint:{"circle-color":Le(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function o_(l){let e,n,t,r,o,s;function u(f){l[15](f)}let a={$$slots:{right:[Km],default:[Vm]},$$scope:{ctx:l}};l[6]!==void 0&&(a.checked=l[6]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[6]&&cl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Jt}.pmtiles`,$$slots:{default:[l_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16777216&&(_.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,_.checked=f[6],X(()=>n=!1)),e.$set(_),f[6]?i?(i.p(f,c),c&64&&g(i,1)):(i=cl(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&16777408&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Jt="stats19";function ml(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function s_(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function i_(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,a=!1,i=2017,f=2022;function c(U,q,E,P,z,oe){let se=["any"];return o&&se.push(["get","pedestrian"]),s&&se.push(["get","cyclist"]),u&&se.push(["get","horse_rider"]),a&&se.push(["get","other"]),["all",[">=",["get","year"],i],["<=",["get","year"],f],se]}let _={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},m={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},C=Q.sequential_low_to_high[4],S=Q.sequential_low_to_high[2],A=Q.sequential_low_to_high[0],R=[["Fatal",C],["Serious",S],["Slight",A]];function F(U){r=U,n(6,r)}function D(U){o=U,n(0,o)}function L(U){s=U,n(1,s)}function N(U){u=U,n(2,u)}function M(U){a=U,n(3,a)}function I(){i=xt(this.value),n(4,i)}function j(){f=xt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,a,i,f,r,t,_,m,y,C,S,A,R,F,D,L,N,M,I,j]}class a_ extends Y{constructor(e){super(),K(this,e,i_,o_,J,{})}}function f_(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function u_(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function c_(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $_(l){let e,n,t,r,o,s,u,a,i,f,c;return t=new te({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[u_]},$$scope:{ctx:l}}}),o=new te({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[c_]},$$scope:{ctx:l}}}),f=new Ee({}),{c(){e=T("p"),n=k("AADF (annual average daily flow) data from "),b(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=O(),a=T("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,i=O(),b(f.$$.fragment)},m(_,m){$(_,e,m),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(_,u,m),$(_,a,m),$(_,i,m),v(f,_,m),c=!0},p(_,m){const y={};m&64&&(y.$$scope={dirty:m,ctx:_}),t.$set(y);const C={};m&64&&(C.$$scope={dirty:m,ctx:_}),o.$set(C)},i(_){c||(g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(u),p(a),p(i)),w(t),w(o),w(f,_)}}}function p_(l){let e,n,t;return n=new me({props:{$$slots:{default:[$_]},$$scope:{ctx:l}}}),{c(){e=T("span"),b(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function _l(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[3]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Z,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function m_(l){let e,n=l[5].location+"",t,r,o,s,u=l[5].year+"",a,i,f,c=l[5].motor_vehicles.toLocaleString()+"",_,m,y,C,S=l[5].year+"",A,R,F,D=l[5].pedal_cycles.toLocaleString()+"",L,N,M,I,j,U=l[5].method+"",q;return{c(){e=T("h2"),t=k(n),r=O(),o=T("p"),s=k("Total motor vehicles ("),a=k(u),i=k(` AADF):
        `),f=T("b"),_=k(c),m=O(),y=T("p"),C=k("Total pedal cycles ("),A=k(S),R=k(` AADF):
        `),F=T("b"),L=k(D),N=O(),M=T("p"),I=k("Count method: "),j=T("b"),q=k(U)},m(E,P){$(E,e,P),h(e,t),$(E,r,P),$(E,o,P),h(o,s),h(o,a),h(o,i),h(o,f),h(f,_),$(E,m,P),$(E,y,P),h(y,C),h(y,A),h(y,R),h(y,F),h(F,L),$(E,N,P),$(E,M,P),h(M,I),h(M,j),h(j,q)},p(E,P){P&32&&n!==(n=E[5].location+"")&&B(t,n),P&32&&u!==(u=E[5].year+"")&&B(a,u),P&32&&c!==(c=E[5].motor_vehicles.toLocaleString()+"")&&B(_,c),P&32&&S!==(S=E[5].year+"")&&B(A,S),P&32&&D!==(D=E[5].pedal_cycles.toLocaleString()+"")&&B(L,D),P&32&&U!==(U=E[5].method+"")&&B(q,U)},d(E){E&&(p(e),p(r),p(o),p(m),p(y),p(N),p(M))}}}function __(l){let e,n;return e=new fe({props:{$$slots:{default:[m_,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function g_(l){let e,n;const t=[H(Yt),{sourceLayer:Yt},{paint:{"circle-color":Le(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[__]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new pt({props:r}),e.$on("click",h_),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(H(Yt)),s&0&&{sourceLayer:Yt},s&6&&{paint:{"circle-color":Le(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function d_(l){let e,n,t,r,o,s;function u(f){l[4](f)}let a={$$slots:{right:[p_],default:[f_]},$$scope:{ctx:l}};l[0]!==void 0&&(a.checked=l[0]),e=new le({props:a}),W.push(()=>V(e,"checked",u));let i=l[0]&&_l(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Yt}.pmtiles`,$$slots:{default:[g_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=O(),i&&i.c(),r=O(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&g(i,1)):(i=_l(f),i.c(),g(i,1),i.m(r.parentNode,r)):i&&(ce(),d(i,1,1,()=>{i=null}),$e());const m={};c&65&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(i),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),i&&i.d(f),w(o,f)}}}let Yt="vehicle_counts";function h_(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function b_(l,e,n){let t=Q.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(a){s=a,n(0,s)}return[s,t,r,o,u]}class v_ extends Y{constructor(e){super(),K(this,e,b_,d_,J,{})}}function w_(l){let e,n,t,r,o,s,u,a;return e=new dm({}),t=new Am({}),o=new Wm({}),u=new zm({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment)},m(i,f){v(e,i,f),$(i,n,f),v(t,i,f),$(i,r,f),v(o,i,f),$(i,s,f),v(u,i,f),a=!0},i(i){a||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(o.$$.fragment,i),g(u.$$.fragment,i),a=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(o.$$.fragment,i),d(u.$$.fragment,i),a=!1},d(i){i&&(p(n),p(r),p(s)),w(e,i),w(t,i),w(o,i),w(u,i)}}}function k_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[w_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function y_(l){let e,n,t,r,o,s,u,a,i,f,c,_;return e=new Oc({}),t=new r$({}),o=new jc({}),u=new Xc({}),i=new lm({}),c=new jp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),a=O(),b(i.$$.fragment),f=O(),b(c.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,r,y),v(o,m,y),$(m,s,y),v(u,m,y),$(m,a,y),v(i,m,y),$(m,f,y),v(c,m,y),_=!0},i(m){_||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),g(u.$$.fragment,m),g(i.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),d(i.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(n),p(r),p(s),p(a),p(f)),w(e,m),w(t,m),w(o,m),w(u,m),w(i,m),w(c,m)}}}function S_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[y_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function C_(l){let e,n,t,r,o,s;return e=new mc({}),t=new sp({}),o=new gp({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(u,a){v(e,u,a),$(u,n,a),v(t,u,a),$(u,r,a),v(o,u,a),s=!0},i(u){s||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function T_(l){let e,n,t,r,o,s,u,a,i,f;return e=new Cu({}),t=new ec({}),o=new Pf({}),u=new eu({}),i=new mu({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),a=O(),b(i.$$.fragment)},m(c,_){v(e,c,_),$(c,n,_),v(t,c,_),$(c,r,_),v(o,c,_),$(c,s,_),v(u,c,_),$(c,a,_),v(i,c,_),f=!0},i(c){f||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(i.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(i.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(a)),w(e,c),w(t,c),w(o,c),w(u,c),w(i,c)}}}function O_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[T_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function L_(l){let e,n,t,r;return e=new wf({}),t=new Gf({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function A_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[L_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function I_(l){let e,n,t,r,o,s;return e=new Q$({}),t=new d$({}),o=new q$({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment)},m(u,a){v(e,u,a),$(u,n,a),v(t,u,a),$(u,r,a),v(o,u,a),s=!0},i(u){s||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function N_(l){let e,n,t,r,o,s,u,a,i=Cn()=="Private (development)",f,c,_,m,y;e=new v_({}),t=new a_({}),o=new N$({}),u=new Xp({});let C=i&&I_();return c=new Mu({}),m=new Gu({}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),a=O(),C&&C.c(),f=O(),b(c.$$.fragment),_=O(),b(m.$$.fragment)},m(S,A){v(e,S,A),$(S,n,A),v(t,S,A),$(S,r,A),v(o,S,A),$(S,s,A),v(u,S,A),$(S,a,A),C&&C.m(S,A),$(S,f,A),v(c,S,A),$(S,_,A),v(m,S,A),y=!0},p:Z,i(S){y||(g(e.$$.fragment,S),g(t.$$.fragment,S),g(o.$$.fragment,S),g(u.$$.fragment,S),g(C),g(c.$$.fragment,S),g(m.$$.fragment,S),y=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(o.$$.fragment,S),d(u.$$.fragment,S),d(C),d(c.$$.fragment,S),d(m.$$.fragment,S),y=!1},d(S){S&&(p(n),p(r),p(s),p(a),p(f),p(_)),w(e,S),w(t,S),w(o,S),w(u,S),C&&C.d(S),w(c,S),w(m,S)}}}function P_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[N_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function M_(l){let e,n,t,r,o,s,u,a,i,f,c,_,m,y;return e=new Tp({}),t=new He({props:{label:"Trip generators",$$slots:{default:[k_]},$$scope:{ctx:l}}}),o=new He({props:{label:"Existing infrastructure",$$slots:{default:[S_]},$$scope:{ctx:l}}}),u=new He({props:{label:"Public transit",$$slots:{default:[C_]},$$scope:{ctx:l}}}),i=new He({props:{label:"Boundaries",$$slots:{default:[O_]},$$scope:{ctx:l}}}),c=new He({props:{label:"Census",$$slots:{default:[A_]},$$scope:{ctx:l}}}),m=new He({props:{label:"Other",$$slots:{default:[P_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),a=O(),b(i.$$.fragment),f=O(),b(c.$$.fragment),_=O(),b(m.$$.fragment)},m(C,S){v(e,C,S),$(C,n,S),v(t,C,S),$(C,r,S),v(o,C,S),$(C,s,S),v(u,C,S),$(C,a,S),v(i,C,S),$(C,f,S),v(c,C,S),$(C,_,S),v(m,C,S),y=!0},p(C,S){const A={};S&1&&(A.$$scope={dirty:S,ctx:C}),t.$set(A);const R={};S&1&&(R.$$scope={dirty:S,ctx:C}),o.$set(R);const F={};S&1&&(F.$$scope={dirty:S,ctx:C}),u.$set(F);const D={};S&1&&(D.$$scope={dirty:S,ctx:C}),i.$set(D);const L={};S&1&&(L.$$scope={dirty:S,ctx:C}),c.$set(L);const N={};S&1&&(N.$$scope={dirty:S,ctx:C}),m.$set(N)},i(C){y||(g(e.$$.fragment,C),g(t.$$.fragment,C),g(o.$$.fragment,C),g(u.$$.fragment,C),g(i.$$.fragment,C),g(c.$$.fragment,C),g(m.$$.fragment,C),y=!0)},o(C){d(e.$$.fragment,C),d(t.$$.fragment,C),d(o.$$.fragment,C),d(u.$$.fragment,C),d(i.$$.fragment,C),d(c.$$.fragment,C),d(m.$$.fragment,C),y=!1},d(C){C&&(p(n),p(r),p(s),p(a),p(f),p(_)),w(e,C),w(t,C),w(o,C),w(u,C),w(i,C),w(c,C),w(m,C)}}}function F_(l){let e,n;return e=new He({props:{label:"Layers",open:!0,$$slots:{default:[M_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class D_ extends Y{constructor(e){super(),K(this,e,null,F_,J,{})}}function E_(l){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new qe({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&2?ne(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function j_(l){let e,n,t,r,o,s,u,a,i,f;function c(m){l[3](m)}let _={};return l[0]!==void 0&&(_.enabled=l[0]),n=new zo({props:_}),W.push(()=>V(n,"enabled",c)),o=new ks({}),u=new Ho({props:{disabled:!l[1]}}),i=new yt({props:{data:l[2],$$slots:{default:[E_]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),a=O(),b(i.$$.fragment),G(e,"class","svelte-tdfg8w")},m(m,y){$(m,e,y),v(n,e,null),h(e,r),v(o,e,null),h(e,s),v(u,e,null),$(m,a,y),v(i,m,y),f=!0},p(m,[y]){const C={};!t&&y&1&&(t=!0,C.enabled=m[0],X(()=>t=!1)),n.$set(C);const S={};y&2&&(S.disabled=!m[1]),u.$set(S);const A={};y&18&&(A.$$scope={dirty:y,ctx:m}),i.$set(A)},i(m){f||(g(n.$$.fragment,m),g(o.$$.fragment,m),g(u.$$.fragment,m),g(i.$$.fragment,m),f=!0)},o(m){d(n.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),d(i.$$.fragment,m),f=!1},d(m){m&&(p(e),p(a)),w(n),w(o),w(u),w(i,m)}}}function R_(l,e,n){let t,r;Ae(l,Tr,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&Tr.set(!t)},[t,r,o,s]}class B_ extends Y{constructor(e){super(),K(this,e,R_,j_,J,{})}}function gl(l){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function z_(l){let e,n=l[0]&&gl();return{c(){n&&n.c(),e=De()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=gl(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Z,o:Z,d(t){t&&p(e),n&&n.d(t)}}}function H_(l,e,n){let{loadFile:t}=e,r=!0;return jn(async()=>{let s=await(await fetch(`${cn()}/v1/all_schemes_output.geojson.gz`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class q_ extends Y{constructor(e){super(),K(this,e,H_,z_,J,{loadFile:1})}}function dl(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),h(e,n),h(e,r)},p(s,u){var a;u&1&&t!==(t=((a=s[0].browse)==null?void 0:a.current_milestone)+"")&&B(r,t)},d(s){s&&p(e)}}}function G_(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function U_(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function W_(l){let e,n,t,r;return e=new ct({props:{$$slots:{default:[G_]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new ct({props:{$$slots:{default:[U_]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const a={};s&32&&(a.$$scope={dirty:s,ctx:o}),t.$set(a)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function V_(l){var j,U,q,E;let e,n,t=l[0].scheme_reference+"",r,o,s,u,a=((j=l[0].browse)==null?void 0:j.authority_or_region)+"",i,f,c,_,m=((U=l[0].browse)==null?void 0:U.capital_scheme_id)+"",y,C,S,A,R=((q=l[0].browse)==null?void 0:q.funding_programme)+"",F,D,L,N,M,I=((E=l[0].browse)==null?void 0:E.current_milestone)&&dl(l);return N=new qo({props:{$$slots:{default:[W_]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Scheme reference: "),r=k(t),o=O(),s=T("p"),u=k("Authority or region: "),i=k(a),f=O(),c=T("p"),_=k("Capital scheme ID: "),y=k(m),C=O(),S=T("p"),A=k("Funding programme: "),F=k(R),D=O(),I&&I.c(),L=O(),b(N.$$.fragment)},m(P,z){$(P,e,z),h(e,n),h(e,r),$(P,o,z),$(P,s,z),h(s,u),h(s,i),$(P,f,z),$(P,c,z),h(c,_),h(c,y),$(P,C,z),$(P,S,z),h(S,A),h(S,F),$(P,D,z),I&&I.m(P,z),$(P,L,z),v(N,P,z),M=!0},p(P,z){var se,ye,de,Se;(!M||z&1)&&t!==(t=P[0].scheme_reference+"")&&B(r,t),(!M||z&1)&&a!==(a=((se=P[0].browse)==null?void 0:se.authority_or_region)+"")&&B(i,a),(!M||z&1)&&m!==(m=((ye=P[0].browse)==null?void 0:ye.capital_scheme_id)+"")&&B(y,m),(!M||z&1)&&R!==(R=((de=P[0].browse)==null?void 0:de.funding_programme)+"")&&B(F,R),(Se=P[0].browse)!=null&&Se.current_milestone?I?I.p(P,z):(I=dl(P),I.c(),I.m(L.parentNode,L)):I&&(I.d(1),I=null);const oe={};z&32&&(oe.$$scope={dirty:z,ctx:P}),N.$set(oe)},i(P){M||(g(N.$$.fragment,P),M=!0)},o(P){d(N.$$.fragment,P),M=!1},d(P){P&&(p(e),p(o),p(s),p(f),p(c),p(C),p(S),p(D),p(L)),I&&I.d(P),w(N,P)}}}function X_(l){let e,n;return e=new He({props:{label:`${l[0].scheme_name}`,$$slots:{default:[V_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function J_(l,e,n){let t,r;Ae(l,Tt,a=>n(3,t=a)),Ae(l,En,a=>n(4,r=a));let{scheme:o}=e;function s(){let a={type:"FeatureCollection",features:t.features.filter(i=>i.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Ao(a),{padding:20,animate:!1})}function u(){var f,c;let a={type:"FeatureCollection",features:t.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},i=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";Io(i,JSON.stringify(a)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=a=>{"scheme"in a&&n(0,o=a.scheme)},[o,s,u]}class Y_ extends Y{constructor(e){super(),K(this,e,J_,X_,J,{scheme:0})}}function hl(l){let e,n,t,r=l[0].status+"",o;return{c(){e=T("p"),n=k("Status: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].status+"")&&B(o,r)},d(s){s&&p(e)}}}function bl(l){let e,n,t,r=l[0].timescale+"",o;return{c(){e=T("p"),n=k("Timescale: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale+"")&&B(o,r)},d(s){s&&p(e)}}}function vl(l){let e,n,t,r=l[0].timescale_year+"",o;return{c(){e=T("p"),n=k("Estimated completion year: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale_year+"")&&B(o,r)},d(s){s&&p(e)}}}function wl(l){let e,n,t,r=l[0].year_published+"",o;return{c(){e=T("p"),n=k("Scheme most recently published: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_published+"")&&B(o,r)},d(s){s&&p(e)}}}function kl(l){let e,n,t,r=l[0].year_consulted+"",o;return{c(){e=T("p"),n=k("Scheme most recently consulted on: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_consulted+"")&&B(o,r)},d(s){s&&p(e)}}}function K_(l){let e,n,t,r,o,s=l[0].status&&hl(l),u=l[0].timescale&&bl(l),a=l[0].timescale_year&&vl(l),i=l[0].year_published&&wl(l),f=l[0].year_consulted&&kl(l);return{c(){s&&s.c(),e=O(),u&&u.c(),n=O(),a&&a.c(),t=O(),i&&i.c(),r=O(),f&&f.c(),o=De()},m(c,_){s&&s.m(c,_),$(c,e,_),u&&u.m(c,_),$(c,n,_),a&&a.m(c,_),$(c,t,_),i&&i.m(c,_),$(c,r,_),f&&f.m(c,_),$(c,o,_)},p(c,[_]){c[0].status?s?s.p(c,_):(s=hl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?u?u.p(c,_):(u=bl(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),c[0].timescale_year?a?a.p(c,_):(a=vl(c),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),c[0].year_published?i?i.p(c,_):(i=wl(c),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null),c[0].year_consulted?f?f.p(c,_):(f=kl(c),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i:Z,o:Z,d(c){c&&(p(e),p(n),p(t),p(r),p(o)),s&&s.d(c),u&&u.d(c),a&&a.d(c),i&&i.d(c),f&&f.d(c)}}}function Z_(l,e,n){let{props:t}=e;return l.$$set=r=>{"props"in r&&n(0,t=r.props)},[t]}class ko extends Y{constructor(e){super(),K(this,e,Z_,K_,J,{props:0})}}function yl(l){let e,n,t,r=l[0].budget.toLocaleString()+"",o,s;return{c(){e=T("p"),n=k("Cost: "),t=T("b"),o=k(r),s=k(`
    GBP`)},m(u,a){$(u,e,a),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,a){a&1&&r!==(r=u[0].budget.toLocaleString()+"")&&B(o,r)},d(u){u&&p(e)}}}function Sl(l){let e;return{c(){e=T("p"),e.textContent="Development is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cl(l){let e;return{c(){e=T("p"),e.textContent="Construction is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tl(l){let e,n,t,r;return{c(){e=T("p"),n=k("Funding sources: "),t=T("b"),r=k(l[1])},m(o,s){$(o,e,s),h(e,n),h(e,t),h(t,r)},p(o,s){s&2&&B(r,o[1])},d(o){o&&p(e)}}}function Q_(l){let e,n,t,r,o=l[0].budget&&yl(l),s=l[0].development_funded&&Sl(),u=l[0].construction_funded&&Cl(),a=l[1]&&Tl(l);return{c(){o&&o.c(),e=O(),s&&s.c(),n=O(),u&&u.c(),t=O(),a&&a.c(),r=De()},m(i,f){o&&o.m(i,f),$(i,e,f),s&&s.m(i,f),$(i,n,f),u&&u.m(i,f),$(i,t,f),a&&a.m(i,f),$(i,r,f)},p(i,[f]){i[0].budget?o?o.p(i,f):(o=yl(i),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),i[0].development_funded?s||(s=Sl(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),i[0].construction_funded?u||(u=Cl(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),i[1]?a?a.p(i,f):(a=Tl(i),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},i:Z,o:Z,d(i){i&&(p(e),p(n),p(t),p(r)),o&&o.d(i),s&&s.d(i),u&&u.d(i),a&&a.d(i)}}}function x_(l){if(!l.funding_sources)return"";let e=[];for(let n of["atf2","atf3","atf4","atf4e","crsts","luf"])l.funding_sources[n]&&e.push(n.toUpperCase());return l.funding_sources.other&&e.push(l.funding_sources.other),e.join(", ")}function eg(l,e,n){let t,{props:r}=e;return l.$$set=o=>{"props"in o&&n(0,r=o.props)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=x_(r))},[r,t]}class yo extends Y{constructor(e){super(),K(this,e,eg,Q_,J,{props:0})}}function vn(l){const e=l.slice(),n=e[1].pipeline;return e[5]=n,e}function wn(l){const e=l.slice(),n=e[0].pipeline;return e[5]=n,e}function Ol(l){let e,n,t,r=Xn(l[0].length_meters)+"",o;return{c(){e=T("p"),n=k("Length: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=Xn(s[0].length_meters)+"")&&B(o,r)},d(s){s&&p(e)}}}function Ll(l){let e,n=ft(l[0].description,l[2])+"";return{c(){e=T("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=ft(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Al(l){let e,n,t,r,o,s,u,a=l[5].atf4_type&&Il(l),i=l[5].accuracy&&Nl(l),f=l[5].is_alternative&&Pl();return r=new yo({props:{props:l[5]}}),s=new ko({props:{props:l[5]}}),{c(){a&&a.c(),e=O(),i&&i.c(),n=O(),f&&f.c(),t=O(),b(r.$$.fragment),o=O(),b(s.$$.fragment)},m(c,_){a&&a.m(c,_),$(c,e,_),i&&i.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),v(r,c,_),$(c,o,_),v(s,c,_),u=!0},p(c,_){c[5].atf4_type?a?a.p(c,_):(a=Il(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[5].accuracy?i?i.p(c,_):(i=Nl(c),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),c[5].is_alternative?f||(f=Pl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const m={};_&1&&(m.props=c[5]),r.$set(m);const y={};_&1&&(y.props=c[5]),s.$set(y)},i(c){u||(g(r.$$.fragment,c),g(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),a&&a.d(c),i&&i.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function Il(l){let e,n,t,r=l[5].atf4_type+"",o;return{c(){e=T("p"),n=k("ATF4 type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].atf4_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Nl(l){let e,n,t,r=l[5].accuracy+"",o;return{c(){e=T("p"),n=k("Accuracy: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].accuracy+"")&&B(o,r)},d(s){s&&p(e)}}}function Pl(l){let e;return{c(){e=T("p"),e.textContent="Represents an alternative route"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ml(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.capital_scheme_id)+"",o;return{c(){e=T("p"),n=k("Capital scheme ID: "),t=T("b"),o=k(r)},m(u,a){$(u,e,a),h(e,n),h(e,t),h(t,o)},p(u,a){var i;a&2&&r!==(r=((i=u[1].browse)==null?void 0:i.capital_scheme_id)+"")&&B(o,r)},d(u){u&&p(e)}}}function Fl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.current_milestone)+"",o;return{c(){e=T("p"),n=k("Current milestone: "),t=T("b"),o=k(r)},m(u,a){$(u,e,a),h(e,n),h(e,t),h(t,o)},p(u,a){var i;a&2&&r!==(r=((i=u[1].browse)==null?void 0:i.current_milestone)+"")&&B(o,r)},d(u){u&&p(e)}}}function Dl(l){let e,n,t,r,o,s,u,a=l[5].scheme_type&&El(l),i=l[5].atf4_lead_type&&jl(l),f=l[5].scheme_description&&Rl(l);return r=new yo({props:{props:l[5]}}),s=new ko({props:{props:l[5]}}),{c(){a&&a.c(),e=O(),i&&i.c(),n=O(),f&&f.c(),t=O(),b(r.$$.fragment),o=O(),b(s.$$.fragment)},m(c,_){a&&a.m(c,_),$(c,e,_),i&&i.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),v(r,c,_),$(c,o,_),v(s,c,_),u=!0},p(c,_){c[5].scheme_type?a?a.p(c,_):(a=El(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[5].atf4_lead_type?i?i.p(c,_):(i=jl(c),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),c[5].scheme_description?f?f.p(c,_):(f=Rl(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const m={};_&2&&(m.props=c[5]),r.$set(m);const y={};_&2&&(y.props=c[5]),s.$set(y)},i(c){u||(g(r.$$.fragment,c),g(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),a&&a.d(c),i&&i.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function El(l){let e,n,t,r=l[5].scheme_type+"",o;return{c(){e=T("p"),n=k("Scheme type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].scheme_type+"")&&B(o,r)},d(s){s&&p(e)}}}function jl(l){let e,n,t,r=l[5].atf4_lead_type+"",o;return{c(){e=T("p"),n=k("ATF4 lead type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].atf4_lead_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Rl(l){let e,n,t=l[5].scheme_description+"",r;return{c(){e=T("p"),n=k("Descripton: "),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,r)},p(o,s){s&2&&t!==(t=o[5].scheme_description+"")&&B(r,t)},d(o){o&&p(e)}}}function tg(l){var Ie,Me,Ot,Xe;let e,n,t,r=ft(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,a,i,f,c,_,m,y,C,S,A,R=ft(l[1].scheme_name??"",l[3])+"",F,D,L=ft(l[0].scheme_reference,l[3])+"",N,M,I,j,U,q=((Ie=l[1].browse)==null?void 0:Ie.authority_or_region)+"",E,P,z,oe,se,ye,de=((Me=l[1].browse)==null?void 0:Me.funding_programme)+"",Se,ie,Ne,Te,be=l[0].length_meters&&Ol(l),re=l[0].description&&Ll(l),pe=l[0].pipeline&&Al(wn(l)),ge=((Ot=l[1].browse)==null?void 0:Ot.capital_scheme_id)&&Ml(l),ve=((Xe=l[1].browse)==null?void 0:Xe.current_milestone)&&Fl(l),_e=l[1].pipeline&&Dl(vn(l));return{c(){e=T("div"),n=T("h2"),t=new Kt(!1),o=k(" ("),u=k(s),a=k(")"),i=O(),be&&be.c(),f=O(),re&&re.c(),c=O(),pe&&pe.c(),_=O(),m=T("hr"),y=O(),C=T("p"),S=k("Part of scheme: "),A=new Kt(!1),F=k(" ("),D=new Kt(!1),N=k(")"),M=O(),I=T("p"),j=k("Authority or region: "),U=T("b"),E=k(q),P=O(),ge&&ge.c(),z=O(),oe=T("p"),se=k("Funding programme: "),ye=T("b"),Se=k(de),ie=O(),ve&&ve.c(),Ne=O(),_e&&_e.c(),t.a=o,A.a=F,D.a=N,Ce(e,"max-width","30vw"),Ce(e,"max-height","60vh"),Ce(e,"overflow","auto")},m(ue,Fe){$(ue,e,Fe),h(e,n),t.m(r,n),h(n,o),h(n,u),h(n,a),h(e,i),be&&be.m(e,null),h(e,f),re&&re.m(e,null),h(e,c),pe&&pe.m(e,null),h(e,_),h(e,m),h(e,y),h(e,C),h(C,S),A.m(R,C),h(C,F),D.m(L,C),h(C,N),h(e,M),h(e,I),h(I,j),h(I,U),h(U,E),h(e,P),ge&&ge.m(e,null),h(e,z),h(e,oe),h(oe,se),h(oe,ye),h(ye,Se),h(e,ie),ve&&ve.m(e,null),h(e,Ne),_e&&_e.m(e,null),Te=!0},p(ue,[Fe]){var Hn,qn,Gn,Un;(!Te||Fe&5)&&r!==(r=ft(ue[0].name,ue[2])+"")&&t.p(r),(!Te||Fe&1)&&s!==(s=ue[0].intervention_type+"")&&B(u,s),ue[0].length_meters?be?be.p(ue,Fe):(be=Ol(ue),be.c(),be.m(e,f)):be&&(be.d(1),be=null),ue[0].description?re?re.p(ue,Fe):(re=Ll(ue),re.c(),re.m(e,c)):re&&(re.d(1),re=null),ue[0].pipeline?pe?(pe.p(wn(ue),Fe),Fe&1&&g(pe,1)):(pe=Al(wn(ue)),pe.c(),g(pe,1),pe.m(e,_)):pe&&(ce(),d(pe,1,1,()=>{pe=null}),$e()),(!Te||Fe&10)&&R!==(R=ft(ue[1].scheme_name??"",ue[3])+"")&&A.p(R),(!Te||Fe&9)&&L!==(L=ft(ue[0].scheme_reference,ue[3])+"")&&D.p(L),(!Te||Fe&2)&&q!==(q=((Hn=ue[1].browse)==null?void 0:Hn.authority_or_region)+"")&&B(E,q),(qn=ue[1].browse)!=null&&qn.capital_scheme_id?ge?ge.p(ue,Fe):(ge=Ml(ue),ge.c(),ge.m(e,z)):ge&&(ge.d(1),ge=null),(!Te||Fe&2)&&de!==(de=((Gn=ue[1].browse)==null?void 0:Gn.funding_programme)+"")&&B(Se,de),(Un=ue[1].browse)!=null&&Un.current_milestone?ve?ve.p(ue,Fe):(ve=Fl(ue),ve.c(),ve.m(e,Ne)):ve&&(ve.d(1),ve=null),ue[1].pipeline?_e?(_e.p(vn(ue),Fe),Fe&2&&g(_e,1)):(_e=Dl(vn(ue)),_e.c(),g(_e,1),_e.m(e,null)):_e&&(ce(),d(_e,1,1,()=>{_e=null}),$e())},i(ue){Te||(g(pe),g(_e),Te=!0)},o(ue){d(pe),d(_e),Te=!1},d(ue){ue&&p(e),be&&be.d(),re&&re.d(),pe&&pe.d(),ge&&ge.d(),ve&&ve.d(),_e&&_e.d()}}}function ft(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function ng(l,e,n){let t,r,o,s;Ae(l,un,a=>n(4,r=a)),Ae(l,At,a=>n(2,o=a)),Ae(l,It,a=>n(3,s=a));let{props:u}=e;return l.$$set=a=>{"props"in a&&n(0,u=a.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class zn extends Y{constructor(e){super(),K(this,e,ng,tg,J,{props:0})}}function rg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function lg(l){let e,n;return e=new zn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function og(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[rg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[lg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const a={};s&192&&(a.$$scope={dirty:s,ctx:o}),t.$set(a)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function sg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function ig(l){let e,n;return e=new zn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ag(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[sg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[ig,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const a={};s&192&&(a.$$scope={dirty:s,ctx:o}),t.$set(a)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function fg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function ug(l){let e,n;return e=new zn({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cg(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[fg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[ug,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const a={};s&192&&(a.$$scope={dirty:s,ctx:o}),t.$set(a)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function $g(l){let e,n,t,r,o,s,u,a,i,f;const c=[H("interventions-points"),{filter:["all",Jn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":Zn,"circle-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let _={$$slots:{default:[og]},$$scope:{ctx:l}};for(let L=0;L<c.length;L+=1)_=ee(_,c[L]);e=new pt({props:_});const m=[H("interventions-lines"),{filter:["all",Yn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":Lt,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[ag]},$$scope:{ctx:l}};for(let L=0;L<m.length;L+=1)y=ee(y,m[L]);t=new Oe({props:y});const C=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Lt,"circle-opacity":0,"circle-stroke-color":Ke.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let S={};for(let L=0;L<C.length;L+=1)S=ee(S,C[L]);o=new pt({props:S});const A=[H("interventions-polygons"),{filter:["all",on,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":x(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let R={$$slots:{default:[cg]},$$scope:{ctx:l}};for(let L=0;L<A.length;L+=1)R=ee(R,A[L]);u=new qe({props:R});const F=[H("interventions-polygons-outlines"),{filter:["all",on,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*Lt}},{layout:{visibility:l[0]?"visible":"none"}}];let D={};for(let L=0;L<F.length;L+=1)D=ee(D,F[L]);return i=new Oe({props:D}),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment),r=O(),b(o.$$.fragment),s=O(),b(u.$$.fragment),a=O(),b(i.$$.fragment)},m(L,N){v(e,L,N),$(L,n,N),v(t,L,N),$(L,r,N),v(o,L,N),$(L,s,N),v(u,L,N),$(L,a,N),v(i,L,N),f=!0},p(L,N){const M=N&29?ne(c,[c[0],N&24&&{filter:["all",Jn,L[3],L[4]]},c[2],c[3],N&4&&{paint:{"circle-color":L[2],"circle-radius":Zn,"circle-opacity":x(1,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};N&128&&(M.$$scope={dirty:N,ctx:L}),e.$set(M);const I=N&13?ne(m,[m[0],N&8&&{filter:["all",Yn,L[3]]},m[2],m[3],N&4&&{paint:{"line-color":L[2],"line-width":Lt,"line-opacity":x(1,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},m[6]]):{};N&128&&(I.$$scope={dirty:N,ctx:L}),t.$set(I);const j=N&1?ne(C,[C[0],C[1],C[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(j);const U=N&13?ne(A,[A[0],N&8&&{filter:["all",on,L[3]]},A[2],A[3],N&4&&{paint:{"fill-color":L[2],"fill-opacity":x(.2,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},A[6]]):{};N&128&&(U.$$scope={dirty:N,ctx:L}),u.$set(U);const q=N&13?ne(F,[F[0],N&8&&{filter:["all",on,L[3]]},N&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*Lt}},N&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};i.$set(q)},i(L){f||(g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(u.$$.fragment,L),g(i.$$.fragment,L),f=!0)},o(L){d(e.$$.fragment,L),d(t.$$.fragment,L),d(o.$$.fragment,L),d(u.$$.fragment,L),d(i.$$.fragment,L),f=!1},d(L){L&&(p(n),p(r),p(s),p(a)),w(e,L),w(t,L),w(o,L),w(u,L),w(i,L)}}}function pg(l){let e,n;return e=new yt({props:{data:l[1],$$slots:{default:[$g]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mg(l,e,n){let t,r;Ae(l,Tt,i=>n(5,r=i));let{showSchemes:o}=e,[s]=Mn();const u=["!=",["get","hide_while_editing"],!0],a=["!=",["get","endpoint"],!0];return l.$$set=i=>{"showSchemes"in i&&n(0,o=i.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=No(r))},[o,t,s,u,a,r]}class _g extends Y{constructor(e){super(),K(this,e,mg,pg,J,{showSchemes:0})}}function Bl(l,e,n){const t=l.slice();return t[13]=e[n],t}function zl(l,e,n){const t=l.slice();return t[16]=e[n],t}function gg(l){let e,n;return e=new q_({props:{loadFile:l[7]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:Z,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hl(l){let e,n,t,r,o;e=new ct({props:{$$slots:{default:[dg]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(a){l[9](a)}let u={title:"About this scheme data",$$slots:{default:[hg]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new Vl({props:u}),W.push(()=>V(t,"open",s)),{c(){b(e.$$.fragment),n=O(),b(t.$$.fragment)},m(a,i){v(e,a,i),$(a,n,i),v(t,a,i),o=!0},p(a,i){const f={};i&524288&&(f.$$scope={dirty:i,ctx:a}),e.$set(f);const c={};i&524304&&(c.$$scope={dirty:i,ctx:a}),!r&&i&8&&(r=!0,c.open=a[3],X(()=>r=!1)),t.$set(c)},i(a){o||(g(e.$$.fragment,a),g(t.$$.fragment,a),o=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),o=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function dg(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ql(l){let e,n,t=l[16]+"",r;return{c(){e=T("li"),n=T("p"),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&B(r,t)},d(o){o&&p(e)}}}function hg(l){let e,n,t,r,o=je(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=ql(zl(l,o,u));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=O(),r=T("ul");for(let u=0;u<s.length;u+=1)s[u].c();G(e,"class","govuk-prose")},m(u,a){$(u,e,a),h(e,n),h(e,t),h(e,r);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(r,null)},p(u,a){if(a&16){o=je(u[4].notes);let i;for(i=0;i<o.length;i+=1){const f=zl(u,o,i);s[i]?s[i].p(f,a):(s[i]=ql(f),s[i].c(),s[i].m(r,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=o.length}},d(u){u&&p(e),wt(s,u)}}}function Gl(l){let e,n,t,r;function o(a){l[10](a)}function s(a){l[11](a)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new Ga({props:u}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){b(e.$$.fragment)},m(a,i){v(e,a,i),r=!0},p(a,i){const f={};!n&&i&2&&(n=!0,f.schemesToBeShown=a[1],X(()=>n=!1)),!t&&i&4&&(t=!0,f.show=a[2],X(()=>t=!1)),e.$set(f)},i(a){r||(g(e.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),r=!1},d(a){w(e,a)}}}function Ul(l){let e,n;return e=new Y_({props:{scheme:l[13]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Wl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&Ul(l);return{c(){r&&r.c(),n=De()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&g(r,1)):(r=Ul(o),r.c(),g(r,1),r.m(n.parentNode,n)):r&&(ce(),d(r,1,1,()=>{r=null}),$e())},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function bg(l){let e,n,t,r,o,s,u,a,i,f,c=Cn()=="Private (development)",_,m,y,C,S,A,R,F,D;o=new Go({props:{boundaryGeojson:l[4]}}),i=new Po({});let L=c&&gg(l),N=l[4].notes&&Hl(l);y=new Mo({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),S=new eo({props:{errorMessage:l[0]}});let M=l[6].size>0&&Gl(l),I=je(l[6].values()),j=[];for(let q=0;q<I.length;q+=1)j[q]=Wl(Bl(l,I,q));const U=q=>d(j[q],1,1,()=>{j[q]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",r=O(),b(o.$$.fragment),s=O(),u=T("p"),u.textContent=`App version: ${Cn()}`,a=O(),b(i.$$.fragment),f=O(),L&&L.c(),_=O(),N&&N.c(),m=O(),b(y.$$.fragment),C=O(),b(S.$$.fragment),A=O(),M&&M.c(),R=O(),F=T("ul");for(let q=0;q<j.length;q+=1)j[q].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(q,E){$(q,e,E),h(e,n),h(n,t),h(n,r),v(o,n,null),h(e,s),h(e,u),h(e,a),v(i,e,null),h(e,f),L&&L.m(e,null),h(e,_),N&&N.m(e,null),h(e,m),v(y,e,null),h(e,C),v(S,e,null),h(e,A),M&&M.m(e,null),h(e,R),h(e,F);for(let P=0;P<j.length;P+=1)j[P]&&j[P].m(F,null);D=!0},p(q,E){const P={};E&16&&(P.boundaryGeojson=q[4]),o.$set(P),c&&L.p(q,E),q[4].notes?N?(N.p(q,E),E&16&&g(N,1)):(N=Hl(q),N.c(),g(N,1),N.m(e,m)):N&&(ce(),d(N,1,1,()=>{N=null}),$e());const z={};if(E&1&&(z.errorMessage=q[0]),S.$set(z),q[6].size>0?M?(M.p(q,E),E&64&&g(M,1)):(M=Gl(q),M.c(),g(M,1),M.m(e,R)):M&&(ce(),d(M,1,1,()=>{M=null}),$e()),E&66){I=je(q[6].values());let oe;for(oe=0;oe<I.length;oe+=1){const se=Bl(q,I,oe);j[oe]?(j[oe].p(se,E),g(j[oe],1)):(j[oe]=Wl(se),j[oe].c(),g(j[oe],1),j[oe].m(F,null))}for(ce(),oe=I.length;oe<j.length;oe+=1)U(oe);$e()}},i(q){if(!D){g(o.$$.fragment,q),g(i.$$.fragment,q),g(L),g(N),g(y.$$.fragment,q),g(S.$$.fragment,q),g(M);for(let E=0;E<I.length;E+=1)g(j[E]);D=!0}},o(q){d(o.$$.fragment,q),d(i.$$.fragment,q),d(L),d(N),d(y.$$.fragment,q),d(S.$$.fragment,q),d(M),j=j.filter(Boolean);for(let E=0;E<j.length;E+=1)d(j[E]);D=!1},d(q){q&&p(e),w(o),w(i),L&&L.d(),N&&N.d(),w(y),w(S),M&&M.d(),wt(j,q)}}}function vg(l){let e,n,t,r,o,s,u,a,i,f;return e=new _g({props:{showSchemes:l[2]}}),r=new Uo({}),s=new B_({}),i=new D_({}),{c(){b(e.$$.fragment),n=O(),t=T("div"),b(r.$$.fragment),o=O(),b(s.$$.fragment),u=O(),a=T("div"),b(i.$$.fragment),G(t,"class","top-left svelte-gm5o0v"),G(a,"class","top-right svelte-gm5o0v")},m(c,_){v(e,c,_),$(c,n,_),$(c,t,_),v(r,t,null),h(t,o),v(s,t,null),$(c,u,_),$(c,a,_),v(i,a,null),f=!0},p(c,_){const m={};_&4&&(m.showSchemes=c[2]),e.$set(m)},i(c){f||(g(e.$$.fragment,c),g(r.$$.fragment,c),g(s.$$.fragment,c),g(i.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(r.$$.fragment,c),d(s.$$.fragment,c),d(i.$$.fragment,c),f=!1},d(c){c&&(p(n),p(t),p(u),p(a)),w(e,c),w(r),w(s),w(i)}}}function wg(l){let e,n,t;return n=new Fo({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[vg]},$$scope:{ctx:l}}}),{c(){e=T("div"),b(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function kg(l){let e,n;return e=new ts({props:{$$slots:{main:[wg],sidebar:[bg]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function yg(l,e,n){let t,r,o;Ae(l,Tt,S=>n(4,t=S)),Ae(l,Kn,S=>n(5,r=S)),Ae(l,un,S=>n(6,o=S)),jn(()=>{Do()});const s=new URLSearchParams(window.location.search);Kn.set(s.get("style")||"dataviz");let u="",a=new Set,i=!0,f=!1;function c(S){try{Tt.set(JSON.parse(S)),un.set(ya(t)),n(0,u="")}catch(A){n(0,u=`The file you loaded is broken: ${A}`)}}const _=()=>n(3,f=!0);function m(S){f=S,n(3,f)}function y(S){a=S,n(1,a)}function C(S){i=S,n(2,i)}return[u,a,i,f,t,r,o,c,_,m,y,C]}class Sg extends Y{constructor(e){super(),K(this,e,yg,kg,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Sg({target:document.getElementById("app")});
