import{S as H,i as V,s as G,V as ye,e as B,f as A,X as ce,j as h,x as le,p as g,W as Re,u as b,k as O,U as se,b as Z,c as R,I as oe,g as y,m as k,o as q,t as d,y as me,l as _,n as he,q as L,_ as X,C as ie,aW as Ee,a1 as Se,G as de,a7 as Te,h as F,aV as I,a0 as St,az as qt,a2 as Ce,r as Je,F as Kt,a as Ie,v as it,w as Wt,H as Jt,L as Xt,M as Yt,N as Qt,D as Tt,aX as at,ag as Dt,d as en,z as tn,A as nn,a9 as rn,aP as sn,E as on,ad as ln}from"./data_getter-953f5689.js";import{d as fe,H as ue,j as De,S as qe,h as an,i as ct,g as Ot,C as Xe,L as cn,Z as fn,M as un,I as pn,b as $n,B as mn}from"./schemas-217422fc.js";const W={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"};function ft(s,e,n){const t=s.slice();return t[2]=e[n],t}function ut(s,e,n){const t=s.slice();return t[5]=e[n],t}function pt(s){let e,n;return{c(){e=B("span"),n=b(` 
    `),ce(e,"background",s[5]),ce(e,"width","100%"),ce(e,"border","1px solid black")},m(t,r){h(t,e,r),O(e,n)},p(t,r){r&1&&ce(e,"background",t[5])},d(t){t&&g(e)}}}function $t(s){let e,n=s[2].toLocaleString()+"",t;return{c(){e=B("span"),t=b(n)},m(r,o){h(r,e,o),O(e,t)},p(r,o){o&2&&n!==(n=r[2].toLocaleString()+"")&&se(t,n)},d(r){r&&g(e)}}}function hn(s){let e,n,t,r=ye(s[0]),o=[];for(let l=0;l<r.length;l+=1)o[l]=pt(ut(s,r,l));let i=ye(s[1]),c=[];for(let l=0;l<i.length;l+=1)c[l]=$t(ft(s,i,l));return{c(){e=B("div");for(let l=0;l<o.length;l+=1)o[l].c();n=A(),t=B("div");for(let l=0;l<c.length;l+=1)c[l].c();ce(e,"display","flex"),ce(t,"display","flex"),ce(t,"justify-content","space-between")},m(l,u){h(l,e,u);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);h(l,n,u),h(l,t,u);for(let a=0;a<c.length;a+=1)c[a]&&c[a].m(t,null)},p(l,[u]){if(u&1){r=ye(l[0]);let a;for(a=0;a<r.length;a+=1){const f=ut(l,r,a);o[a]?o[a].p(f,u):(o[a]=pt(f),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}if(u&2){i=ye(l[1]);let a;for(a=0;a<i.length;a+=1){const f=ft(l,i,a);c[a]?c[a].p(f,u):(c[a]=$t(f),c[a].c(),c[a].m(t,null))}for(;a<c.length;a+=1)c[a].d(1);c.length=i.length}},i:le,o:le,d(l){l&&(g(e),g(n),g(t)),Re(o,l),Re(c,l)}}}function gn(s,e,n){let{colorScale:t}=e,{limits:r}=e;return s.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ye extends H{constructor(e){super(),V(this,e,gn,hn,G,{colorScale:0,limits:1})}}function dn(s){let e;return{c(){e=b("Percent of households with a car")},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function _n(s){let e;return{c(){e=b(`NOMIS TS045
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function wn(s){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function vn(s){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function bn(s){let e,n,t,r,o,i,c,l,u,a,f,p;return t=new I({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[_n]},$$scope:{ctx:s}}}),o=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[wn]},$$scope:{ctx:s}}}),a=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[vn]},$$scope:{ctx:s}}}),{c(){e=B("p"),n=b("Car/van availability data is from the 2021 census, via "),y(t.$$.fragment),r=b(". Output area boundaries from "),y(o.$$.fragment),i=b("."),c=A(),l=B("p"),u=b("License: "),y(a.$$.fragment),f=b(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(m,w){h(m,e,w),O(e,n),k(t,e,null),O(e,r),k(o,e,null),O(e,i),h(m,c,w),h(m,l,w),O(l,u),k(a,l,null),O(l,f),p=!0},p(m,w){const $={};w&131072&&($.$$scope={dirty:w,ctx:m}),t.$set($);const C={};w&131072&&(C.$$scope={dirty:w,ctx:m}),o.$set(C);const v={};w&131072&&(v.$$scope={dirty:w,ctx:m}),a.$set(v)},i(m){p||(d(t.$$.fragment,m),d(o.$$.fragment,m),d(a.$$.fragment,m),p=!0)},o(m){_(t.$$.fragment,m),_(o.$$.fragment,m),_(a.$$.fragment,m),p=!1},d(m){m&&(g(e),g(c),g(l)),L(t),L(o),L(a)}}}function yn(s){let e,n,t;return n=new ue({props:{$$slots:{default:[bn]},$$scope:{ctx:s}}}),{c(){e=B("span"),y(n.$$.fragment),F(e,"slot","right")},m(r,o){h(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&131072&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(d(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),L(n)}}}function mt(s){let e,n;return e=new Ye({props:{colorScale:s[4],limits:s[7]()}}),{c(){y(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p:le,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function kn(s){let e;return{c(){e=b("Average cars per household")},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Ln(s){let e;return{c(){e=b(`NOMIS TS045
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Cn(s){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Sn(s){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Tn(s){let e,n,t,r,o,i,c,l,u,a,f,p,m,w;return o=new I({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ln]},$$scope:{ctx:s}}}),c=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Cn]},$$scope:{ctx:s}}}),p=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Sn]},$$scope:{ctx:s}}}),{c(){e=B("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=A(),t=B("p"),r=b("Car/van availability data is from the 2021 census, via "),y(o.$$.fragment),i=b(". Output area boundaries from "),y(c.$$.fragment),l=b("."),u=A(),a=B("p"),f=b("License: "),y(p.$$.fragment),m=b(`. Contains OS data © Crown copyright and database
        right 2023.`)},m($,C){h($,e,C),h($,n,C),h($,t,C),O(t,r),k(o,t,null),O(t,i),k(c,t,null),O(t,l),h($,u,C),h($,a,C),O(a,f),k(p,a,null),O(a,m),w=!0},p($,C){const v={};C&131072&&(v.$$scope={dirty:C,ctx:$}),o.$set(v);const T={};C&131072&&(T.$$scope={dirty:C,ctx:$}),c.$set(T);const M={};C&131072&&(M.$$scope={dirty:C,ctx:$}),p.$set(M)},i($){w||(d(o.$$.fragment,$),d(c.$$.fragment,$),d(p.$$.fragment,$),w=!0)},o($){_(o.$$.fragment,$),_(c.$$.fragment,$),_(p.$$.fragment,$),w=!1},d($){$&&(g(e),g(n),g(t),g(u),g(a)),L(o),L(c),L(p)}}}function Dn(s){let e,n,t;return n=new ue({props:{$$slots:{default:[Tn]},$$scope:{ctx:s}}}),{c(){e=B("span"),y(n.$$.fragment),F(e,"slot","right")},m(r,o){h(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&131072&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(d(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),L(n)}}}function ht(s){let e,n;return e=new Ye({props:{colorScale:s[4],limits:s[7]()}}),{c(){y(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p:le,i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function On(s){let e;return{c(){e=b("Population density")},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Un(s){let e;return{c(){e=b(`NOMIS TS006
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Mn(s){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function An(s){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Bn(s){let e,n,t,r,o,i,c,l,u,a,f,p;return t=new I({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Un]},$$scope:{ctx:s}}}),o=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Mn]},$$scope:{ctx:s}}}),a=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[An]},$$scope:{ctx:s}}}),{c(){e=B("p"),n=b("Population density data is from the 2021 census, via "),y(t.$$.fragment),r=b(". Output area boundaries from "),y(o.$$.fragment),i=b("."),c=A(),l=B("p"),u=b("License: "),y(a.$$.fragment),f=b(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(m,w){h(m,e,w),O(e,n),k(t,e,null),O(e,r),k(o,e,null),O(e,i),h(m,c,w),h(m,l,w),O(l,u),k(a,l,null),O(l,f),p=!0},p(m,w){const $={};w&131072&&($.$$scope={dirty:w,ctx:m}),t.$set($);const C={};w&131072&&(C.$$scope={dirty:w,ctx:m}),o.$set(C);const v={};w&131072&&(v.$$scope={dirty:w,ctx:m}),a.$set(v)},i(m){p||(d(t.$$.fragment,m),d(o.$$.fragment,m),d(a.$$.fragment,m),p=!0)},o(m){_(t.$$.fragment,m),_(o.$$.fragment,m),_(a.$$.fragment,m),p=!1},d(m){m&&(g(e),g(c),g(l)),L(t),L(o),L(a)}}}function En(s){let e,n,t;return n=new ue({props:{$$slots:{default:[Bn]},$$scope:{ctx:s}}}),{c(){e=B("span"),y(n.$$.fragment),F(e,"slot","right")},m(r,o){h(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&131072&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(d(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),L(n)}}}function gt(s){let e,n,t,r;return t=new Ye({props:{colorScale:s[4],limits:s[7]()}}),{c(){e=B("p"),e.textContent="(people per square kilometres)",n=A(),y(t.$$.fragment)},m(o,i){h(o,e,i),h(o,n,i),k(t,o,i),r=!0},p:le,i(o){r||(d(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(g(e),g(n)),L(t,o)}}}function Pn(s){let e,n,t,r,o,i,c,l,u,a,f,p,m,w;function $(S){s[9](S)}let C={id:"percent_households_with_car",$$slots:{right:[yn],default:[dn]},$$scope:{ctx:s}};s[0]!==void 0&&(C.checked=s[0]),e=new fe({props:C}),Z.push(()=>R(e,"checked",$)),e.$on("change",s[10]);let v=s[3]=="percent_households_with_car"&&mt(s);function T(S){s[11](S)}let M={id:"average_cars_per_household",$$slots:{right:[Dn],default:[kn]},$$scope:{ctx:s}};s[1]!==void 0&&(M.checked=s[1]),o=new fe({props:M}),Z.push(()=>R(o,"checked",T)),o.$on("change",s[12]);let D=s[3]=="average_cars_per_household"&&ht(s);function U(S){s[13](S)}let E={id:"population_density",$$slots:{right:[En],default:[On]},$$scope:{ctx:s}};s[2]!==void 0&&(E.checked=s[2]),u=new fe({props:E}),Z.push(()=>R(u,"checked",U)),u.$on("change",s[14]);let P=s[3]=="population_density"&&gt(s);return m=new oe({props:{layer:te,tooltip:s[5],show:s[3]!="",clickable:!0}}),m.$on("click",s[6]),{c(){y(e.$$.fragment),t=A(),v&&v.c(),r=A(),y(o.$$.fragment),c=A(),D&&D.c(),l=A(),y(u.$$.fragment),f=A(),P&&P.c(),p=A(),y(m.$$.fragment)},m(S,N){k(e,S,N),h(S,t,N),v&&v.m(S,N),h(S,r,N),k(o,S,N),h(S,c,N),D&&D.m(S,N),h(S,l,N),k(u,S,N),h(S,f,N),P&&P.m(S,N),h(S,p,N),k(m,S,N),w=!0},p(S,[N]){const x={};N&131072&&(x.$$scope={dirty:N,ctx:S}),!n&&N&1&&(n=!0,x.checked=S[0],q(()=>n=!1)),e.$set(x),S[3]=="percent_households_with_car"?v?(v.p(S,N),N&8&&d(v,1)):(v=mt(S),v.c(),d(v,1),v.m(r.parentNode,r)):v&&(me(),_(v,1,1,()=>{v=null}),he());const _e={};N&131072&&(_e.$$scope={dirty:N,ctx:S}),!i&&N&2&&(i=!0,_e.checked=S[1],q(()=>i=!1)),o.$set(_e),S[3]=="average_cars_per_household"?D?(D.p(S,N),N&8&&d(D,1)):(D=ht(S),D.c(),d(D,1),D.m(l.parentNode,l)):D&&(me(),_(D,1,1,()=>{D=null}),he());const Oe={};N&131072&&(Oe.$$scope={dirty:N,ctx:S}),!a&&N&4&&(a=!0,Oe.checked=S[2],q(()=>a=!1)),u.$set(Oe),S[3]=="population_density"?P?(P.p(S,N),N&8&&d(P,1)):(P=gt(S),P.c(),d(P,1),P.m(p.parentNode,p)):P&&(me(),_(P,1,1,()=>{P=null}),he());const Ne={};N&8&&(Ne.show=S[3]!=""),m.$set(Ne)},i(S){w||(d(e.$$.fragment,S),d(v),d(o.$$.fragment,S),d(D),d(u.$$.fragment,S),d(P),d(m.$$.fragment,S),w=!0)},o(S){_(e.$$.fragment,S),_(v),_(o.$$.fragment,S),_(D),_(u.$$.fragment,S),_(P),_(m.$$.fragment,S),w=!1},d(S){S&&(g(t),g(r),g(c),g(l),g(f),g(p)),L(e,S),v&&v.d(S),L(o,S),D&&D.d(S),L(u,S),P&&P.d(S),L(m,S)}}}let te="census_output_areas";function Nn(s,e,n){let t;X(s,ie,D=>n(8,t=D));let r=`${te}-outline`,o=W.sequential_low_to_high,i=!1,c=!1,l=!1,u="";Ee(t,te,`https://atip.uk/layers/v1/${te}.pmtiles`),Se(t,{id:te,source:te,sourceLayer:te,color:"black",opacity:de(.5,.7)}),Te(t,{id:r,source:te,sourceLayer:te,color:"black",width:.5});function a(D){let U=D.properties.OA21CD,E=D.properties[u];return u=="percent_households_with_car"?`<p>${E}% of households in ${U} have 1 or more cars</p>`:u=="average_cars_per_household"?`<p>Households in ${U} have an average of ${E} cars</p>`:`<p>There are ${E.toLocaleString()} people per square kilometre in ${U}</p>`}function f(D){let U=D.detail.properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${U}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${U}`,"_blank")}function p(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function m(){let D=p(),U=["step",["get",u]];for(let E=1;E<D.length;E++)U.push(o[E-1]),U.push(D[E]);return U.push(o[o.length-1]),U}function w(D){i=D,n(0,i)}const $=()=>{n(1,c=!1),n(2,l=!1)};function C(D){c=D,n(1,c)}const v=()=>{n(0,i=!1),n(2,l=!1)};function T(D){l=D,n(2,l)}const M=()=>{n(0,i=!1),n(1,c=!1)};return s.$$.update=()=>{s.$$.dirty&271&&(i?n(3,u="percent_households_with_car"):c?n(3,u="average_cars_per_household"):l?n(3,u="population_density"):n(3,u=""),u?(t.setPaintProperty(te,"fill-color",m()),t.setLayoutProperty(r,"visibility","visible")):t.setLayoutProperty(r,"visibility","none"))},[i,c,l,u,o,a,f,p,t,w,$,C,v,T,M]}class zn extends H{constructor(e){super(),V(this,e,Nn,Pn,G,{})}}function In(s){let e,n,t;return e=new De({props:{color:s[1]}}),{c(){y(e.$$.fragment),n=b(`
  Combined authorities`)},m(r,o){k(e,r,o),h(r,n,o),t=!0},p:le,i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&g(n),L(e,r)}}}function xn(s){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Fn(s){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function jn(s){let e,n,t,r,o,i,c,l,u,a;return t=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[xn]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Fn]},$$scope:{ctx:s}}}),{c(){e=B("p"),n=b("Data from "),y(t.$$.fragment),r=b(", as of December 2022."),o=A(),i=B("p"),c=b("License: "),y(l.$$.fragment),u=b(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(f,p){h(f,e,p),O(e,n),k(t,e,null),O(e,r),h(f,o,p),h(f,i,p),O(i,c),k(l,i,null),O(i,u),a=!0},p(f,p){const m={};p&32&&(m.$$scope={dirty:p,ctx:f}),t.$set(m);const w={};p&32&&(w.$$scope={dirty:p,ctx:f}),l.$set(w)},i(f){a||(d(t.$$.fragment,f),d(l.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(l.$$.fragment,f),a=!1},d(f){f&&(g(e),g(o),g(i)),L(t),L(l)}}}function Hn(s){let e,n,t;return n=new ue({props:{$$slots:{default:[jn]},$$scope:{ctx:s}}}),{c(){e=B("span"),y(n.$$.fragment),F(e,"slot","right")},m(r,o){h(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(d(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),L(n)}}}function Vn(s){let e,n,t,r,o;function i(l){s[3](l)}let c={id:pe,$$slots:{right:[Hn],default:[In]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.checked=s[0]),e=new fe({props:c}),Z.push(()=>R(e,"checked",i)),r=new oe({props:{layer:pe,tooltip:Gn,show:s[0],clickable:!0}}),r.$on("click",Zn),{c(){y(e.$$.fragment),t=A(),y(r.$$.fragment)},m(l,u){k(e,l,u),h(l,t,u),k(r,l,u),o=!0},p(l,[u]){const a={};u&32&&(a.$$scope={dirty:u,ctx:l}),!n&&u&1&&(n=!0,a.checked=l[0],q(()=>n=!1)),e.$set(a);const f={};u&1&&(f.show=l[0]),r.$set(f)},i(l){o||(d(e.$$.fragment,l),d(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),L(e,l),L(r,l)}}}let pe="combined_authorities";function Gn(s){return`<p>${s.properties.name}</p>`}function Zn(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.properties.CAUTH22CD}`,"_blank")}function Rn(s,e,n){let t;X(s,ie,l=>n(2,t=l));let r=W.combined_authorities,o=`${pe}-outline`;St(t,pe,`https://atip.uk/layers/v1/${pe}.geojson`),Se(t,{id:pe,source:pe,color:r,opacity:de(.5,.1)}),Te(t,{id:o,source:pe,color:r,width:2.5});let i=!1;function c(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,c]}class qn extends H{constructor(e){super(),V(this,e,Rn,Vn,G,{})}}function Kn(s){let e=new Map;for(let[t,r]of Object.entries(s.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:r.authority_or_region,capital_scheme_id:r.capital_scheme_id,funding_programme:r.funding_programme});let n=1;for(let t of s.features){let r=e.get(t.properties.scheme_reference);r.num_features++,t.properties.funding_programme=r.funding_programme,t.id=n++}return e}function Wn(s){let e,n,t,r,o;function i(l){s[3](l)}let c={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return s[0]!==void 0&&(c.value=s[0]),e=new qe({props:c}),Z.push(()=>R(e,"value",i)),e.$on("change",s[2]),r=new an({props:{rows:s[1]}}),{c(){y(e.$$.fragment),t=A(),y(r.$$.fragment)},m(l,u){k(e,l,u),h(l,t,u),k(r,l,u),o=!0},p(l,[u]){const a={};!n&&u&1&&(n=!0,a.value=l[0],q(()=>n=!1)),e.$set(a);const f={};u&2&&(f.rows=l[1]),r.$set(f)},i(l){o||(d(e.$$.fragment,l),d(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),L(e,l),L(r,l)}}}function Jn(s,e,n){let t;X(s,ie,l=>n(4,t=l));let r="interventionType",o=ct("v1");function i(){let l;r=="interventionType"?(l=Ot("v1"),n(1,o=ct("v1"))):(l=qt(["get","funding_programme"],{ATF2:W.atf2,ATF3:W.atf3,ATF4:W.atf4},"grey"),n(1,o=[["ATF2",W.atf2],["ATF3",W.atf3],["ATF4",W.atf4]])),t.setPaintProperty("interventions-points","circle-color",l),t.setPaintProperty("interventions-lines","line-color",l),t.setPaintProperty("interventions-polygons","fill-color",l),t.setPaintProperty("interventions-polygon-outlines","line-color",l)}function c(l){r=l,n(0,r)}return[r,o,i,c]}class Xn extends H{constructor(e){super(),V(this,e,Jn,Wn,G,{})}}function Yn(s){let e;return{c(){e=b("Clear")},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Qn(s){let e,n,t,r,o,i;return t=new Ie({props:{$$slots:{default:[Yn]},$$scope:{ctx:s}}}),t.$on("click",s[11]),{c(){e=B("input"),n=A(),y(t.$$.fragment),F(e,"type","text"),F(e,"class","govuk-input govuk-input--width-10"),F(e,"id","filterText")},m(c,l){h(c,e,l),it(e,s[0]),h(c,n,l),k(t,c,l),r=!0,o||(i=Wt(e,"input",s[10]),o=!0)},p(c,l){l&1&&e.value!==c[0]&&it(e,c[0]);const u={};l&16384&&(u.$$scope={dirty:l,ctx:c}),t.$set(u)},i(c){r||(d(t.$$.fragment,c),r=!0)},o(c){_(t.$$.fragment,c),r=!1},d(c){c&&(g(e),g(n)),L(t,c),o=!1,i()}}}function er(s){let e,n,t,r,o,i,c,l,u,a;function f($){s[8]($)}let p={label:"Authority or region",id:"filterAuthority",choices:s[4],emptyOption:!0};s[2]!==void 0&&(p.value=s[2]),e=new qe({props:p}),Z.push(()=>R(e,"value",f));function m($){s[9]($)}let w={label:"Funding programme",id:"filterFundingProgramme",choices:s[5],emptyOption:!0};return s[3]!==void 0&&(w.value=s[3]),r=new qe({props:w}),Z.push(()=>R(r,"value",m)),c=new Kt({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Qn]},$$scope:{ctx:s}}}),u=new Xn({}),{c(){y(e.$$.fragment),t=A(),y(r.$$.fragment),i=A(),y(c.$$.fragment),l=A(),y(u.$$.fragment)},m($,C){k(e,$,C),h($,t,C),k(r,$,C),h($,i,C),k(c,$,C),h($,l,C),k(u,$,C),a=!0},p($,C){const v={};C&16&&(v.choices=$[4]),!n&&C&4&&(n=!0,v.value=$[2],q(()=>n=!1)),e.$set(v);const T={};C&32&&(T.choices=$[5]),!o&&C&8&&(o=!0,T.value=$[3],q(()=>o=!1)),r.$set(T);const M={};C&16385&&(M.$$scope={dirty:C,ctx:$}),c.$set(M)},i($){a||(d(e.$$.fragment,$),d(r.$$.fragment,$),d(c.$$.fragment,$),d(u.$$.fragment,$),a=!0)},o($){_(e.$$.fragment,$),_(r.$$.fragment,$),_(c.$$.fragment,$),_(u.$$.fragment,$),a=!1},d($){$&&(g(t),g(i),g(l)),L(e,$),L(r,$),L(c,$),L(u,$)}}}function tr(s){let e,n,t,r,o=s[1].size+"",i,c,l=s[6].route+"",u,a,f=s[6].area+"",p,m,w=s[6].crossing+"",$,C,v=s[6].other+"",T,M,D;return e=new Xe({props:{label:"Filters",$$slots:{default:[er]},$$scope:{ctx:s}}}),{c(){y(e.$$.fragment),n=A(),t=B("p"),r=b("Showing "),i=b(o),c=b(" schemes ("),u=b(l),a=b(" routes, "),p=b(f),m=b(` areas,
  `),$=b(w),C=b(" crossings, "),T=b(v),M=b(" other)")},m(U,E){k(e,U,E),h(U,n,E),h(U,t,E),O(t,r),O(t,i),O(t,c),O(t,u),O(t,a),O(t,p),O(t,m),O(t,$),O(t,C),O(t,T),O(t,M),D=!0},p(U,[E]){const P={};E&16445&&(P.$$scope={dirty:E,ctx:U}),e.$set(P),(!D||E&2)&&o!==(o=U[1].size+"")&&se(i,o),(!D||E&64)&&l!==(l=U[6].route+"")&&se(u,l),(!D||E&64)&&f!==(f=U[6].area+"")&&se(p,f),(!D||E&64)&&w!==(w=U[6].crossing+"")&&se($,w),(!D||E&64)&&v!==(v=U[6].other+"")&&se(T,v)},i(U){D||(d(e.$$.fragment,U),D=!0)},o(U){_(e.$$.fragment,U),D=!1},d(U){U&&(g(n),g(t)),L(e,U)}}}function nr(s,e,n){let t;X(s,Ce,v=>n(12,t=v));let{schemes:r}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,c=[],l="",u=[],a="",f={area:0,route:0,crossing:0,other:0};Je(()=>{let v=new Set,T=new Set;for(let M of r.values())M.authority_or_region&&v.add(M.authority_or_region),M.funding_programme&&T.add(M.funding_programme);n(4,c=Array.from(v.entries())),c.sort(),n(5,u=Array.from(T.entries())),u.sort()});function p(v,T,M){let D=v.toLowerCase(),U=P=>{var S,N;if(D&&!((S=P.properties.name)!=null&&S.toLowerCase().includes(D))&&!((N=P.properties.description)!=null&&N.toLowerCase().includes(D)))return!1;if(T||M){let x=r.get(P.properties.scheme_reference);if(T&&x.authority_or_region!=T||M&&x.funding_programme!=M)return!1}return!0};n(1,o=new Set(t.features.filter(U).map(P=>P.properties.scheme_reference))),n(6,f={area:0,route:0,crossing:0,other:0});let E=P=>{var S,N;return!(!o.has(P.properties.scheme_reference)||D&&!((S=P.properties.name)!=null&&S.toLowerCase().includes(D))&&!((N=P.properties.description)!=null&&N.toLowerCase().includes(D)))};Ce.update(P=>{for(let S of P.features)E(S)?(delete S.properties.hide_while_editing,n(6,f[S.properties.intervention_type]++,f)):S.properties.hide_while_editing=!0;return P}),n(6,f)}function m(v){l=v,n(2,l)}function w(v){a=v,n(3,a)}function $(){i=this.value,n(0,i)}const C=()=>n(0,i="");return s.$$set=v=>{"schemes"in v&&n(7,r=v.schemes),"schemesToBeShown"in v&&n(1,o=v.schemesToBeShown),"filterText"in v&&n(0,i=v.filterText)},s.$$.update=()=>{s.$$.dirty&13&&p(i,l,a)},[i,o,l,a,c,u,f,r,m,w,$,C]}class rr extends H{constructor(e){super(),V(this,e,nr,tr,G,{schemes:7,schemesToBeShown:1,filterText:0})}}function sr(s){let e,n,t,r;return e=new De({props:{color:s[3]}}),{c(){y(e.$$.fragment),n=A(),t=b(s[1])},m(o,i){k(e,o,i),h(o,n,i),h(o,t,i),r=!0},p(o,i){(!r||i&2)&&se(t,o[1])},i(o){r||(d(e.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),r=!1},d(o){o&&(g(n),g(t)),L(e,o)}}}function or(s){let e;const n=s[6].default,t=Jt(n,s,s[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&Xt(t,n,r,r[8],e?Qt(n,r[8],o,null):Yt(r[8]),null)},i(r){e||(d(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function lr(s){let e,n,t;return n=new ue({props:{$$slots:{default:[or]},$$scope:{ctx:s}}}),{c(){e=B("span"),y(n.$$.fragment),F(e,"slot","right")},m(r,o){h(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(d(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),L(n)}}}function ir(s){let e,n,t,r,o;function i(l){s[7](l)}let c={id:s[0],$$slots:{right:[lr],default:[sr]},$$scope:{ctx:s}};return s[2]!==void 0&&(c.checked=s[2]),e=new fe({props:c}),Z.push(()=>R(e,"checked",i)),r=new oe({props:{layer:s[0],tooltip:s[4],show:s[2],clickable:!1}}),{c(){y(e.$$.fragment),t=A(),y(r.$$.fragment)},m(l,u){k(e,l,u),h(l,t,u),k(r,l,u),o=!0},p(l,[u]){const a={};u&1&&(a.id=l[0]),u&258&&(a.$$scope={dirty:u,ctx:l}),!n&&u&4&&(n=!0,a.checked=l[2],q(()=>n=!1)),e.$set(a);const f={};u&1&&(f.layer=l[0]),u&4&&(f.show=l[2]),r.$set(f)},i(l){o||(d(e.$$.fragment,l),d(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),L(e,l),L(r,l)}}}function ar(s,e,n){let t;X(s,ie,m=>n(9,t=m));let{$$slots:r={},$$scope:o}=e,{name:i}=e,{singularNoun:c}=e,{pluralNoun:l}=e,u=W[i];Ee(t,i,`https://atip.uk/layers/v1/${i}.pmtiles`),Se(t,{id:i,source:i,sourceLayer:i,color:u,opacity:de(1,.7)});let a=!1;function f(m){return`<p>${m.properties.name??`Unnamed ${c}`}</p>`}function p(m){a=m,n(2,a)}return s.$$set=m=>{"name"in m&&n(0,i=m.name),"singularNoun"in m&&n(5,c=m.singularNoun),"pluralNoun"in m&&n(1,l=m.pluralNoun),"$$scope"in m&&n(8,o=m.$$scope)},[i,l,a,u,f,c,r,p,o]}class Ut extends H{constructor(e){super(),V(this,e,ar,ir,G,{name:0,singularNoun:5,pluralNoun:1})}}function cr(s){let e;return{c(){e=b("hospital")},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function fr(s){let e;return{c(){e=b("Open Data Commons Open Database License")},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function ur(s){let e,n,t,r,o,i,c,l,u;return t=new I({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[cr]},$$scope:{ctx:s}}}),l=new I({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[fr]},$$scope:{ctx:s}}}),{c(){e=B("p"),n=b("This shows "),y(t.$$.fragment),r=b(` data from OpenStreetMap. It doesn't include outpatient clinics
    or individual doctor's offices.`),o=A(),i=B("p"),c=b("License: "),y(l.$$.fragment)},m(a,f){h(a,e,f),O(e,n),k(t,e,null),O(e,r),h(a,o,f),h(a,i,f),O(i,c),k(l,i,null),u=!0},p(a,f){const p={};f&1&&(p.$$scope={dirty:f,ctx:a}),t.$set(p);const m={};f&1&&(m.$$scope={dirty:f,ctx:a}),l.$set(m)},i(a){u||(d(t.$$.fragment,a),d(l.$$.fragment,a),u=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),u=!1},d(a){a&&(g(e),g(o),g(i)),L(t),L(l)}}}function pr(s){let e,n;return e=new Ut({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[ur]},$$scope:{ctx:s}}}),{c(){y(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}class $r extends H{constructor(e){super(),V(this,e,null,pr,G,{})}}function mr(s){let e,n,t;return e=new De({props:{color:s[1]}}),{c(){y(e.$$.fragment),n=b(`
  Local Authority Districts`)},m(r,o){k(e,r,o),h(r,n,o),t=!0},p:le,i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&g(n),L(e,r)}}}function hr(s){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function gr(s){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function dr(s){let e,n,t,r,o,i,c,l,u,a;return t=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[hr]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[gr]},$$scope:{ctx:s}}}),{c(){e=B("p"),n=b("Data from "),y(t.$$.fragment),r=b(", as of May 2023."),o=A(),i=B("p"),c=b("License: "),y(l.$$.fragment),u=b(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(f,p){h(f,e,p),O(e,n),k(t,e,null),O(e,r),h(f,o,p),h(f,i,p),O(i,c),k(l,i,null),O(i,u),a=!0},p(f,p){const m={};p&32&&(m.$$scope={dirty:p,ctx:f}),t.$set(m);const w={};p&32&&(w.$$scope={dirty:p,ctx:f}),l.$set(w)},i(f){a||(d(t.$$.fragment,f),d(l.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(l.$$.fragment,f),a=!1},d(f){f&&(g(e),g(o),g(i)),L(t),L(l)}}}function _r(s){let e,n,t;return n=new ue({props:{$$slots:{default:[dr]},$$scope:{ctx:s}}}),{c(){e=B("span"),y(n.$$.fragment),F(e,"slot","right")},m(r,o){h(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(d(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),L(n)}}}function wr(s){let e,n,t,r,o;function i(l){s[3](l)}let c={id:$e,$$slots:{right:[_r],default:[mr]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.checked=s[0]),e=new fe({props:c}),Z.push(()=>R(e,"checked",i)),r=new oe({props:{layer:$e,tooltip:vr,show:s[0],clickable:!0}}),r.$on("click",br),{c(){y(e.$$.fragment),t=A(),y(r.$$.fragment)},m(l,u){k(e,l,u),h(l,t,u),k(r,l,u),o=!0},p(l,[u]){const a={};u&32&&(a.$$scope={dirty:u,ctx:l}),!n&&u&1&&(n=!0,a.checked=l[0],q(()=>n=!1)),e.$set(a);const f={};u&1&&(f.show=l[0]),r.$set(f)},i(l){o||(d(e.$$.fragment,l),d(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),L(e,l),L(r,l)}}}let $e="local_authority_districts";function vr(s){return`<p>${s.properties.name}</p>`}function br(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.properties.LAD23CD}`,"_blank")}function yr(s,e,n){let t;X(s,ie,l=>n(2,t=l));let r=W.local_authority_districts,o=`${$e}-outline`;St(t,$e,`https://atip.uk/layers/v1/${$e}.geojson`),Se(t,{id:$e,source:$e,color:r,opacity:de(.5,.1)}),Te(t,{id:o,source:$e,color:r,width:2.5});let i=!1;function c(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,c]}class kr extends H{constructor(e){super(),V(this,e,yr,wr,G,{})}}function Lr(s){let e,n,t;return e=new De({props:{color:s[1]}}),{c(){y(e.$$.fragment),n=b(`
  MRN`)},m(r,o){k(e,r,o),h(r,n,o),t=!0},p:le,i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&g(n),L(e,r)}}}function Cr(s){let e;return{c(){e=b(`Major Road Network
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Sr(s){let e;return{c(){e=b("Open Government License")},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Tr(s){let e,n,t,r,o,i,c,l,u;return t=new I({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Cr]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Sr]},$$scope:{ctx:s}}}),{c(){e=B("p"),n=b("Data from the "),y(t.$$.fragment),r=b("."),o=A(),i=B("p"),c=b("License: "),y(l.$$.fragment)},m(a,f){h(a,e,f),O(e,n),k(t,e,null),O(e,r),h(a,o,f),h(a,i,f),O(i,c),k(l,i,null),u=!0},p(a,f){const p={};f&16&&(p.$$scope={dirty:f,ctx:a}),t.$set(p);const m={};f&16&&(m.$$scope={dirty:f,ctx:a}),l.$set(m)},i(a){u||(d(t.$$.fragment,a),d(l.$$.fragment,a),u=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),u=!1},d(a){a&&(g(e),g(o),g(i)),L(t),L(l)}}}function Dr(s){let e,n,t;return n=new ue({props:{$$slots:{default:[Tr]},$$scope:{ctx:s}}}),{c(){e=B("span"),y(n.$$.fragment),F(e,"slot","right")},m(r,o){h(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(d(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),L(n)}}}function Or(s){let e,n,t,r,o;function i(l){s[2](l)}let c={id:ge,$$slots:{right:[Dr],default:[Lr]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.checked=s[0]),e=new fe({props:c}),Z.push(()=>R(e,"checked",i)),r=new oe({props:{layer:ge,tooltip:Ur,show:s[0],clickable:!1}}),{c(){y(e.$$.fragment),t=A(),y(r.$$.fragment)},m(l,u){k(e,l,u),h(l,t,u),k(r,l,u),o=!0},p(l,[u]){const a={};u&16&&(a.$$scope={dirty:u,ctx:l}),!n&&u&1&&(n=!0,a.checked=l[0],q(()=>n=!1)),e.$set(a);const f={};u&1&&(f.show=l[0]),r.$set(f)},i(l){o||(d(e.$$.fragment,l),d(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),L(e,l),L(r,l)}}}let ge="mrn";function Ur(s){return`<p>${s.properties.name??"Unknown MRN road"}</p>`}function Mr(s,e,n){let t;X(s,ie,c=>n(3,t=c));let r=W.mrn;Ee(t,ge,`https://atip.uk/layers/v1/${ge}.pmtiles`),Te(t,{id:ge,source:ge,sourceLayer:ge,color:r,width:7,opacity:de(.5,1)});let o=!1;function i(c){o=c,n(0,o)}return[o,r,i]}class Ar extends H{constructor(e){super(),V(this,e,Mr,Or,G,{})}}function Br(s){let e,n,t;return e=new De({props:{color:s[1]}}),{c(){y(e.$$.fragment),n=b(`
  Parliamentary constituencies`)},m(r,o){k(e,r,o),h(r,n,o),t=!0},p:le,i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&g(n),L(e,r)}}}function Er(s){let e;return{c(){e=b(`Ordnance Survey Boundary-Line
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Pr(s){let e;return{c(){e=b("Open Government License")},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Nr(s){let e,n,t,r,o,i,c,l,u;return t=new I({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Er]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Pr]},$$scope:{ctx:s}}}),{c(){e=B("p"),n=b("Data from "),y(t.$$.fragment),r=b("."),o=A(),i=B("p"),c=b("License: "),y(l.$$.fragment)},m(a,f){h(a,e,f),O(e,n),k(t,e,null),O(e,r),h(a,o,f),h(a,i,f),O(i,c),k(l,i,null),u=!0},p(a,f){const p={};f&32&&(p.$$scope={dirty:f,ctx:a}),t.$set(p);const m={};f&32&&(m.$$scope={dirty:f,ctx:a}),l.$set(m)},i(a){u||(d(t.$$.fragment,a),d(l.$$.fragment,a),u=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),u=!1},d(a){a&&(g(e),g(o),g(i)),L(t),L(l)}}}function zr(s){let e,n,t;return n=new ue({props:{$$slots:{default:[Nr]},$$scope:{ctx:s}}}),{c(){e=B("span"),y(n.$$.fragment),F(e,"slot","right")},m(r,o){h(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(d(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),L(n)}}}function Ir(s){let e,n,t,r,o;function i(l){s[3](l)}let c={id:ne,$$slots:{right:[zr],default:[Br]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.checked=s[0]),e=new fe({props:c}),Z.push(()=>R(e,"checked",i)),r=new oe({props:{layer:ne,tooltip:xr,show:s[0],clickable:!0}}),r.$on("click",Fr),{c(){y(e.$$.fragment),t=A(),y(r.$$.fragment)},m(l,u){k(e,l,u),h(l,t,u),k(r,l,u),o=!0},p(l,[u]){const a={};u&32&&(a.$$scope={dirty:u,ctx:l}),!n&&u&1&&(n=!0,a.checked=l[0],q(()=>n=!1)),e.$set(a);const f={};u&1&&(f.show=l[0]),r.$set(f)},i(l){o||(d(e.$$.fragment,l),d(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),L(e,l),L(r,l)}}}let ne="parliamentary_constituencies";function xr(s){return`<p>${s.properties.Name}</p>`}function Fr(s){let e=s.detail.properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function jr(s,e,n){let t;X(s,ie,l=>n(2,t=l));let r=W.parliamentary_constituencies,o=`${ne}-outline`;Ee(t,ne,`https://atip.uk/layers/v1/${ne}.pmtiles`),Se(t,{id:ne,source:ne,sourceLayer:ne,color:r,opacity:de(.5,.1)}),Te(t,{id:o,source:ne,sourceLayer:ne,color:r,width:5});let i=!1;function c(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,c]}class Hr extends H{constructor(e){super(),V(this,e,jr,Ir,G,{})}}function Vr(s){let e;return{c(){e=b("Show on map")},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Gr(s){let e;return{c(){e=b("Edit scheme locally")},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Zr(s){let e,n,t=s[0].authority_or_region+"",r,o,i,c,l=s[0].capital_scheme_id+"",u,a,f,p,m=s[0].funding_programme+"",w,$,C,v,T,M,D;return v=new Ie({props:{$$slots:{default:[Vr]},$$scope:{ctx:s}}}),v.$on("click",s[3]),M=new Ie({props:{disabled:s[1],title:s[2],$$slots:{default:[Gr]},$$scope:{ctx:s}}}),M.$on("click",s[4]),{c(){e=B("p"),n=b("Authority or region: "),r=b(t),o=A(),i=B("p"),c=b("Capital scheme ID: "),u=b(l),a=A(),f=B("p"),p=b("Funding programme: "),w=b(m),$=A(),C=B("div"),y(v.$$.fragment),T=A(),y(M.$$.fragment),F(C,"class","govuk-button-group")},m(U,E){h(U,e,E),O(e,n),O(e,r),h(U,o,E),h(U,i,E),O(i,c),O(i,u),h(U,a,E),h(U,f,E),O(f,p),O(f,w),h(U,$,E),h(U,C,E),k(v,C,null),O(C,T),k(M,C,null),D=!0},p(U,E){(!D||E&1)&&t!==(t=U[0].authority_or_region+"")&&se(r,t),(!D||E&1)&&l!==(l=U[0].capital_scheme_id+"")&&se(u,l),(!D||E&1)&&m!==(m=U[0].funding_programme+"")&&se(w,m);const P={};E&256&&(P.$$scope={dirty:E,ctx:U}),v.$set(P);const S={};E&256&&(S.$$scope={dirty:E,ctx:U}),M.$set(S)},i(U){D||(d(v.$$.fragment,U),d(M.$$.fragment,U),D=!0)},o(U){_(v.$$.fragment,U),_(M.$$.fragment,U),D=!1},d(U){U&&(g(e),g(o),g(i),g(a),g(f),g($),g(C)),L(v),L(M)}}}function Rr(s){let e,n;return e=new Xe({props:{label:`${s[0].scheme_reference}: ${s[0].num_features} features`,$$slots:{default:[Zr]},$$scope:{ctx:s}}}),{c(){y(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),r&257&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function qr(s,e,n){let t,r;X(s,Ce,f=>n(6,t=f)),X(s,ie,f=>n(7,r=f));let{scheme:o}=e,{authorityNames:i}=e,c=!i.has(o.authority_or_region),l=c?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function u(){let f={type:"FeatureCollection",features:t.features.filter(p=>p.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Tt(f),{padding:20,animate:!1})}function a(){let f={type:"FeatureCollection",features:t.features.filter(m=>m.properties.scheme_reference==o.scheme_reference)},p=o.authority_or_region;window.localStorage.setItem(p,JSON.stringify(f)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return s.$$set=f=>{"scheme"in f&&n(0,o=f.scheme),"authorityNames"in f&&n(5,i=f.authorityNames)},[o,c,l,u,a,i]}class Kr extends H{constructor(e){super(),V(this,e,qr,Rr,G,{scheme:0,authorityNames:5})}}function Wr(s){let e;return{c(){e=b("primary and secondary schools")},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Jr(s){let e;return{c(){e=b("Open Data Commons Open Database License")},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function Xr(s){let e,n,t,r,o,i,c,l,u;return t=new I({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[Wr]},$$scope:{ctx:s}}}),l=new I({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Jr]},$$scope:{ctx:s}}}),{c(){e=B("p"),n=b("This shows "),y(t.$$.fragment),r=b(` from OpenStreetMap. It doesn't include kindergartens, colleges,
    universities, or other training schools.`),o=A(),i=B("p"),c=b("License: "),y(l.$$.fragment)},m(a,f){h(a,e,f),O(e,n),k(t,e,null),O(e,r),h(a,o,f),h(a,i,f),O(i,c),k(l,i,null),u=!0},p(a,f){const p={};f&1&&(p.$$scope={dirty:f,ctx:a}),t.$set(p);const m={};f&1&&(m.$$scope={dirty:f,ctx:a}),l.$set(m)},i(a){u||(d(t.$$.fragment,a),d(l.$$.fragment,a),u=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),u=!1},d(a){a&&(g(e),g(o),g(i)),L(t),L(l)}}}function Yr(s){let e,n;return e=new Ut({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[Xr]},$$scope:{ctx:s}}}),{c(){y(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}class Qr extends H{constructor(e){super(),V(this,e,null,Yr,G,{})}}function es(s){let e,n,t;return e=new De({props:{color:s[1]}}),{c(){y(e.$$.fragment),n=b(`
  Wards`)},m(r,o){k(e,r,o),h(r,n,o),t=!0},p:le,i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&g(n),L(e,r)}}}function ts(s){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function ns(s){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function rs(s){let e,n,t,r,o,i,c,l,u,a;return t=new I({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[ts]},$$scope:{ctx:s}}}),l=new I({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ns]},$$scope:{ctx:s}}}),{c(){e=B("p"),n=b("Data from "),y(t.$$.fragment),r=b(", as of May 2023."),o=A(),i=B("p"),c=b("License: "),y(l.$$.fragment),u=b(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(f,p){h(f,e,p),O(e,n),k(t,e,null),O(e,r),h(f,o,p),h(f,i,p),O(i,c),k(l,i,null),O(i,u),a=!0},p(f,p){const m={};p&32&&(m.$$scope={dirty:p,ctx:f}),t.$set(m);const w={};p&32&&(w.$$scope={dirty:p,ctx:f}),l.$set(w)},i(f){a||(d(t.$$.fragment,f),d(l.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(l.$$.fragment,f),a=!1},d(f){f&&(g(e),g(o),g(i)),L(t),L(l)}}}function ss(s){let e,n,t;return n=new ue({props:{$$slots:{default:[rs]},$$scope:{ctx:s}}}),{c(){e=B("span"),y(n.$$.fragment),F(e,"slot","right")},m(r,o){h(r,e,o),k(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(d(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&g(e),L(n)}}}function os(s){let e,n,t,r,o;function i(l){s[3](l)}let c={id:re,$$slots:{right:[ss],default:[es]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.checked=s[0]),e=new fe({props:c}),Z.push(()=>R(e,"checked",i)),r=new oe({props:{layer:re,tooltip:ls,show:s[0],clickable:!0}}),r.$on("click",is),{c(){y(e.$$.fragment),t=A(),y(r.$$.fragment)},m(l,u){k(e,l,u),h(l,t,u),k(r,l,u),o=!0},p(l,[u]){const a={};u&32&&(a.$$scope={dirty:u,ctx:l}),!n&&u&1&&(n=!0,a.checked=l[0],q(()=>n=!1)),e.$set(a);const f={};u&1&&(f.show=l[0]),r.$set(f)},i(l){o||(d(e.$$.fragment,l),d(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&g(t),L(e,l),L(r,l)}}}let re="wards";function ls(s){return`<p>${s.properties.name}</p>`}function is(s){let e=encodeURIComponent(s.detail.properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function as(s,e,n){let t;X(s,ie,l=>n(2,t=l));let r=W.wards,o=`${re}-outline`;Ee(t,re,`https://atip.uk/layers/v1/${re}.pmtiles`),Se(t,{id:re,source:re,sourceLayer:re,color:r,opacity:de(.5,.1)}),Te(t,{id:o,source:re,sourceLayer:re,color:r,width:2.5});let i=!1;function c(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,c]}class cs extends H{constructor(e){super(),V(this,e,as,os,G,{})}}var j=(s,e,n)=>new Promise((t,r)=>{var o=l=>{try{c(n.next(l))}catch(u){r(u)}},i=l=>{try{c(n.throw(l))}catch(u){r(u)}},c=l=>l.done?t(l.value):Promise.resolve(l.value).then(o,i);c((n=n.apply(s,e)).next())}),J=Uint8Array,ke=Uint16Array,fs=Int32Array,Mt=new J([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),At=new J([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),us=new J([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Bt=function(s,e){for(var n=new ke(31),t=0;t<31;++t)n[t]=e+=1<<s[t-1];for(var r=new fs(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return{b:n,r}},Et=Bt(Mt,2),Pt=Et.b,ps=Et.r;Pt[28]=258,ps[258]=28;var $s=Bt(At,0),ms=$s.b,Ke=new ke(32768);for(z=0;z<32768;++z)ae=(z&43690)>>1|(z&21845)<<1,ae=(ae&52428)>>2|(ae&13107)<<2,ae=(ae&61680)>>4|(ae&3855)<<4,Ke[z]=((ae&65280)>>8|(ae&255)<<8)>>1;var ae,z,Be=function(s,e,n){for(var t=s.length,r=0,o=new ke(e);r<t;++r)s[r]&&++o[s[r]-1];var i=new ke(e);for(r=1;r<e;++r)i[r]=i[r-1]+o[r-1]<<1;var c;if(n){c=new ke(1<<e);var l=15-e;for(r=0;r<t;++r)if(s[r])for(var u=r<<4|s[r],a=e-s[r],f=i[s[r]-1]++<<a,p=f|(1<<a)-1;f<=p;++f)c[Ke[f]>>l]=u}else for(c=new ke(t),r=0;r<t;++r)s[r]&&(c[r]=Ke[i[s[r]-1]++]>>15-s[r]);return c},Pe=new J(288);for(z=0;z<144;++z)Pe[z]=8;var z;for(z=144;z<256;++z)Pe[z]=9;var z;for(z=256;z<280;++z)Pe[z]=7;var z;for(z=280;z<288;++z)Pe[z]=8;var z,Nt=new J(32);for(z=0;z<32;++z)Nt[z]=5;var z,hs=Be(Pe,9,1),gs=Be(Nt,5,1),Ge=function(s){for(var e=s[0],n=1;n<s.length;++n)s[n]>e&&(e=s[n]);return e},Q=function(s,e,n){var t=e/8|0;return(s[t]|s[t+1]<<8)>>(e&7)&n},Ze=function(s,e){var n=e/8|0;return(s[n]|s[n+1]<<8|s[n+2]<<16)>>(e&7)},ds=function(s){return(s+7)/8|0},_s=function(s,e,n){(e==null||e<0)&&(e=0),(n==null||n>s.length)&&(n=s.length);var t=new J(n-e);return t.set(s.subarray(e,n)),t},ws=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],K=function(s,e,n){var t=new Error(e||ws[s]);if(t.code=s,Error.captureStackTrace&&Error.captureStackTrace(t,K),!n)throw t;return t},Qe=function(s,e,n,t){var r=s.length,o=t?t.length:0;if(!r||e.f&&!e.l)return n||new J(0);var i=!n||e.i!=2,c=e.i;n||(n=new J(r*3));var l=function(st){var ot=n.length;if(st>ot){var lt=new J(Math.max(ot*2,st));lt.set(n),n=lt}},u=e.f||0,a=e.p||0,f=e.b||0,p=e.l,m=e.d,w=e.m,$=e.n,C=r*8;do{if(!p){u=Q(s,a,1);var v=Q(s,a+1,3);if(a+=3,v)if(v==1)p=hs,m=gs,w=9,$=5;else if(v==2){var U=Q(s,a,31)+257,E=Q(s,a+10,15)+4,P=U+Q(s,a+5,31)+1;a+=14;for(var S=new J(P),N=new J(19),x=0;x<E;++x)N[us[x]]=Q(s,a+x*3,7);a+=E*3;for(var _e=Ge(N),Oe=(1<<_e)-1,Ne=Be(N,_e,1),x=0;x<P;){var et=Ne[Q(s,a,Oe)];a+=et&15;var T=et>>4;if(T<16)S[x++]=T;else{var we=0,ze=0;for(T==16?(ze=3+Q(s,a,3),a+=2,we=S[x-1]):T==17?(ze=3+Q(s,a,7),a+=3):T==18&&(ze=11+Q(s,a,127),a+=7);ze--;)S[x++]=we}}var tt=S.subarray(0,U),Y=S.subarray(U);w=Ge(tt),$=Ge(Y),p=Be(tt,w,1),m=Be(Y,$,1)}else K(1);else{var T=ds(a)+4,M=s[T-4]|s[T-3]<<8,D=T+M;if(D>r){c&&K(0);break}i&&l(f+M),n.set(s.subarray(T,D),f),e.b=f+=M,e.p=a=D*8,e.f=u;continue}if(a>C){c&&K(0);break}}i&&l(f+131072);for(var Gt=(1<<w)-1,Zt=(1<<$)-1,Fe=a;;Fe=a){var we=p[Ze(s,a)&Gt],ve=we>>4;if(a+=we&15,a>C){c&&K(0);break}if(we||K(2),ve<256)n[f++]=ve;else if(ve==256){Fe=a,p=null;break}else{var nt=ve-254;if(ve>264){var x=ve-257,Ue=Mt[x];nt=Q(s,a,(1<<Ue)-1)+Pt[x],a+=Ue}var je=m[Ze(s,a)&Zt],He=je>>4;je||K(3),a+=je&15;var Y=ms[He];if(He>3){var Ue=At[He];Y+=Ze(s,a)&(1<<Ue)-1,a+=Ue}if(a>C){c&&K(0);break}i&&l(f+131072);var Ve=f+nt;if(f<Y){var rt=o-Y,Rt=Math.min(Y,Ve);for(rt+f<0&&K(3);f<Rt;++f)n[f]=t[rt+f]}for(;f<Ve;f+=4)n[f]=n[f-Y],n[f+1]=n[f+1-Y],n[f+2]=n[f+2-Y],n[f+3]=n[f+3-Y];f=Ve}}e.l=p,e.p=Fe,e.b=f,e.f=u,p&&(u=1,e.m=w,e.d=m,e.n=$)}while(!u);return f==n.length?n:_s(n,0,f)},vs=new J(0),bs=function(s){(s[0]!=31||s[1]!=139||s[2]!=8)&&K(6,"invalid gzip data");var e=s[3],n=10;e&4&&(n+=(s[10]|s[11]<<8)+2);for(var t=(e>>3&1)+(e>>4&1);t>0;t-=!s[n++]);return n+(e&2)},ys=function(s){var e=s.length;return(s[e-4]|s[e-3]<<8|s[e-2]<<16|s[e-1]<<24)>>>0},ks=function(s,e){return((s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31)&&K(6,"invalid zlib data"),(s[1]>>5&1)==+!e&&K(6,"invalid zlib data: "+(s[1]&32?"need":"unexpected")+" dictionary"),(s[1]>>3&4)+2};function Ls(s,e){return Qe(s,{i:2},e&&e.out,e&&e.dictionary)}function Cs(s,e){var n=bs(s);return n+8>s.length&&K(6,"invalid gzip data"),Qe(s.subarray(n,-8),{i:2},e&&e.out||new J(ys(s)),e&&e.dictionary)}function Ss(s,e){return Qe(s.subarray(ks(s,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function We(s,e){return s[0]==31&&s[1]==139&&s[2]==8?Cs(s,e):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?Ls(s,e):Ss(s,e)}var Ts=typeof TextDecoder<"u"&&new TextDecoder,Ds=0;try{Ts.decode(vs,{stream:!0}),Ds=1}catch{}var zt=(s,e)=>s*Math.pow(2,e),Me=(s,e)=>Math.floor(s/Math.pow(2,e)),xe=(s,e)=>zt(s.getUint16(e+1,!0),8)+s.getUint8(e),It=(s,e)=>zt(s.getUint32(e+2,!0),16)+s.getUint16(e,!0),Os=(s,e,n,t,r)=>{if(s!=t.getUint8(r))return s-t.getUint8(r);const o=xe(t,r+1);if(e!=o)return e-o;const i=xe(t,r+4);return n!=i?n-i:0},Us=(s,e,n,t)=>{const r=xt(s,e|128,n,t);return r?{z:e,x:n,y:t,offset:r[0],length:r[1],is_dir:!0}:null},dt=(s,e,n,t)=>{const r=xt(s,e,n,t);return r?{z:e,x:n,y:t,offset:r[0],length:r[1],is_dir:!1}:null},xt=(s,e,n,t)=>{let r=0,o=s.byteLength/17-1;for(;r<=o;){const i=o+r>>1,c=Os(e,n,t,s,i*17);if(c>0)r=i+1;else if(c<0)o=i-1;else return[It(s,i*17+7),s.getUint32(i*17+13,!0)]}return null},Ms=(s,e)=>s.is_dir&&!e.is_dir?1:!s.is_dir&&e.is_dir?-1:s.z!==e.z?s.z-e.z:s.x!==e.x?s.x-e.x:s.y-e.y,Ft=(s,e)=>{const n=s.getUint8(e*17);return{z:n&127,x:xe(s,e*17+1),y:xe(s,e*17+4),offset:It(s,e*17+7),length:s.getUint32(e*17+13,!0),is_dir:n>>7===1}},_t=s=>{const e=[],n=new DataView(s);for(let t=0;t<n.byteLength/17;t++)e.push(Ft(n,t));return As(e)},As=s=>{s.sort(Ms);const e=new ArrayBuffer(17*s.length),n=new Uint8Array(e);for(let t=0;t<s.length;t++){const r=s[t];let o=r.z;r.is_dir&&(o=o|128),n[t*17]=o,n[t*17+1]=r.x&255,n[t*17+2]=r.x>>8&255,n[t*17+3]=r.x>>16&255,n[t*17+4]=r.y&255,n[t*17+5]=r.y>>8&255,n[t*17+6]=r.y>>16&255,n[t*17+7]=r.offset&255,n[t*17+8]=Me(r.offset,8)&255,n[t*17+9]=Me(r.offset,16)&255,n[t*17+10]=Me(r.offset,24)&255,n[t*17+11]=Me(r.offset,32)&255,n[t*17+12]=Me(r.offset,48)&255,n[t*17+13]=r.length&255,n[t*17+14]=r.length>>8&255,n[t*17+15]=r.length>>16&255,n[t*17+16]=r.length>>24&255}return e},Bs=(s,e)=>{if(s.byteLength<17)return null;const n=s.byteLength/17,t=Ft(s,n-1);if(t.is_dir){const r=t.z,o=e.z-r,i=Math.trunc(e.x/(1<<o)),c=Math.trunc(e.y/(1<<o));return{z:r,x:i,y:c}}return null};function Es(s){return j(this,null,function*(){const e=yield s.getBytes(0,512e3),n=new DataView(e.data),t=n.getUint32(4,!0),r=n.getUint16(8,!0),o=new TextDecoder("utf-8"),i=JSON.parse(o.decode(new DataView(e.data,10,t)));let c=0;i.compression==="gzip"&&(c=2);let l=0;"minzoom"in i&&(l=+i.minzoom);let u=0;"maxzoom"in i&&(u=+i.maxzoom);let a=0,f=0,p=0,m=-180,w=-85,$=180,C=85;if(i.bounds){const T=i.bounds.split(",");m=+T[0],w=+T[1],$=+T[2],C=+T[3]}if(i.center){const T=i.center.split(",");a=+T[0],f=+T[1],p=+T[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+t,rootDirectoryLength:r*17,jsonMetadataOffset:10,jsonMetadataLength:t,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:c,tileType:1,minZoom:l,maxZoom:u,minLon:m,minLat:w,maxLon:$,maxLat:C,centerZoom:p,centerLon:a,centerLat:f,etag:e.etag}})}function Ps(s,e,n,t,r,o,i){return j(this,null,function*(){let c=yield n.getArrayBuffer(e,s.rootDirectoryOffset,s.rootDirectoryLength,s);s.specVersion===1&&(c=_t(c));const l=dt(new DataView(c),t,r,o);if(l){let f=(yield e.getBytes(l.offset,l.length,i)).data;const p=new DataView(f);return p.getUint8(0)==31&&p.getUint8(1)==139&&(f=We(new Uint8Array(f))),{data:f}}const u=Bs(new DataView(c),{z:t,x:r,y:o});if(u){const a=Us(new DataView(c),u.z,u.x,u.y);if(a){let f=yield n.getArrayBuffer(e,a.offset,a.length,s);s.specVersion===1&&(f=_t(f));const p=dt(new DataView(f),t,r,o);if(p){let w=(yield e.getBytes(p.offset,p.length,i)).data;const $=new DataView(w);return $.getUint8(0)==31&&$.getUint8(1)==139&&(w=We(new Uint8Array(w))),{data:w}}}}})}var jt={getHeader:Es,getZxy:Ps},Ns=class{constructor(){this.tile=(s,e)=>{if(s.type=="json"){const n=s.url.substr(10);let t=this.tiles.get(n);return t||(t=new wt(n),this.tiles.set(n,t)),t.getHeader().then(r=>{const o={tiles:[s.url+"/{z}/{x}/{y}"],minzoom:r.minZoom,maxzoom:r.maxZoom,bounds:[r.minLon,r.minLat,r.maxLon,r.maxLat]};e(null,o,null,null)}).catch(r=>{e(r,null,null,null)}),{cancel:()=>{}}}else{const n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),t=s.url.match(n);if(!t)throw new Error("Invalid PMTiles protocol URL");const r=t[1];let o=this.tiles.get(r);o||(o=new wt(r),this.tiles.set(r,o));const i=t[2],c=t[3],l=t[4],u=new AbortController,a=u.signal;let f=()=>{u.abort()};return o.getHeader().then(p=>{o.getZxy(+i,+c,+l,a).then(m=>{m?e(null,new Uint8Array(m.data),m.cacheControl,m.expires):p.tileType==1?e(null,new Uint8Array,null,null):e(null,null,null,null)}).catch(m=>{m.name!=="AbortError"&&e(m,null,null,null)})}),{cancel:f}}},this.tiles=new Map}add(s){this.tiles.set(s.source.getKey(),s)}get(s){return this.tiles.get(s)}};function be(s,e){return(e>>>0)*4294967296+(s>>>0)}function zs(s,e){const n=e.buf;let t,r;if(r=n[e.pos++],t=(r&112)>>4,r<128||(r=n[e.pos++],t|=(r&127)<<3,r<128)||(r=n[e.pos++],t|=(r&127)<<10,r<128)||(r=n[e.pos++],t|=(r&127)<<17,r<128)||(r=n[e.pos++],t|=(r&127)<<24,r<128)||(r=n[e.pos++],t|=(r&1)<<31,r<128))return be(s,t);throw new Error("Expected varint not more than 10 bytes")}function Ae(s){const e=s.buf;let n,t;return t=e[s.pos++],n=t&127,t<128||(t=e[s.pos++],n|=(t&127)<<7,t<128)||(t=e[s.pos++],n|=(t&127)<<14,t<128)||(t=e[s.pos++],n|=(t&127)<<21,t<128)?n:(t=e[s.pos],n|=(t&15)<<28,zs(n,s))}function Is(s,e,n,t){if(t==0){n==1&&(e[0]=s-1-e[0],e[1]=s-1-e[1]);const r=e[0];e[0]=e[1],e[1]=r}}var xs=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function Fs(s,e,n){if(s>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,s)-1||n>Math.pow(2,s)-1)throw Error("tile x/y outside zoom level bounds");const t=xs[s],r=Math.pow(2,s);let o=0,i=0,c=0;const l=[e,n];let u=r/2;for(;u>0;)o=(l[0]&u)>0?1:0,i=(l[1]&u)>0?1:0,c+=u*u*(3*o^i),Is(u,l,o,i),u=u/2;return t+c}function Ht(s,e){return j(this,null,function*(){if(e===1||e===0)return s;if(e===2){if(typeof globalThis.DecompressionStream>"u")return We(new Uint8Array(s));{let t=new Response(s).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(t).arrayBuffer()}}else throw Error("Compression method not supported")})}var js=127;function Hs(s,e){let n=0,t=s.length-1;for(;n<=t;){const r=t+n>>1,o=e-s[r].tileId;if(o>0)n=r+1;else if(o<0)t=r-1;else return s[r]}return t>=0&&(s[t].runLength===0||e-s[t].tileId<s[t].runLength)?s[t]:null}var Vs=class{constructor(s){this.url=s}getKey(){return this.url}getBytes(s,e,n){return j(this,null,function*(){let t;n||(t=new AbortController,n=t.signal);let r=yield fetch(this.url,{signal:n,headers:{Range:"bytes="+s+"-"+(s+e-1)}});if(r.status===416&&s===0){const c=r.headers.get("Content-Range");if(!c||!c.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const l=+c.substr(8);r=yield fetch(this.url,{signal:n,headers:{Range:"bytes=0-"+(l-1)}})}if(r.status>=300)throw Error("Bad response code: "+r.status);const o=r.headers.get("Content-Length");if(r.status===200&&(!o||+o>e))throw t&&t.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield r.arrayBuffer(),etag:r.headers.get("ETag")||void 0,cacheControl:r.headers.get("Cache-Control")||void 0,expires:r.headers.get("Expires")||void 0}})}};function ee(s,e){const n=s.getUint32(e+4,!0),t=s.getUint32(e+0,!0);return n*Math.pow(2,32)+t}function Gs(s,e){const n=new DataView(s),t=n.getUint8(7);if(t>3)throw Error(`Archive is spec version ${t} but this library supports up to spec version 3`);return{specVersion:t,rootDirectoryOffset:ee(n,8),rootDirectoryLength:ee(n,16),jsonMetadataOffset:ee(n,24),jsonMetadataLength:ee(n,32),leafDirectoryOffset:ee(n,40),leafDirectoryLength:ee(n,48),tileDataOffset:ee(n,56),tileDataLength:ee(n,64),numAddressedTiles:ee(n,72),numTileEntries:ee(n,80),numTileContents:ee(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:e}}function Vt(s){const e={buf:new Uint8Array(s),pos:0},n=Ae(e),t=[];let r=0;for(let o=0;o<n;o++){const i=Ae(e);t.push({tileId:r+i,offset:0,length:0,runLength:1}),r+=i}for(let o=0;o<n;o++)t[o].runLength=Ae(e);for(let o=0;o<n;o++)t[o].length=Ae(e);for(let o=0;o<n;o++){const i=Ae(e);i===0&&o>0?t[o].offset=t[o-1].offset+t[o-1].length:t[o].offset=i-1}return t}function Zs(s){const e=new DataView(s);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Le=class extends Error{};function Rs(s,e,n,t){return j(this,null,function*(){const r=yield s.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(Zs(r.data)<3)return[yield jt.getHeader(s)];const i=r.data.slice(0,js);let c=r.etag;t&&r.etag!=t&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+s.getKey()),c=void 0);const l=Gs(i,c);if(n){const u=r.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),a=s.getKey()+"|"+(l.etag||"")+"|"+l.rootDirectoryOffset+"|"+l.rootDirectoryLength,f=Vt(yield e(u,l.internalCompression));return[l,[a,f.length,f]]}return[l,void 0]})}function qs(s,e,n,t,r){return j(this,null,function*(){const o=yield s.getBytes(n,t);if(r.etag&&r.etag!==o.etag)throw new Le(o.etag);const i=yield e(o.data,r.internalCompression),c=Vt(i);if(c.length===0)throw new Error("Empty directory is invalid");return c})}var Ks=class{constructor(s=100,e=!0,n=Ht){this.cache=new Map,this.maxCacheEntries=s,this.counter=1,this.prefetch=e,this.decompress=n}getHeader(s,e){return j(this,null,function*(){const n=s.getKey();if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const t=new Promise((r,o)=>{Rs(s,this.decompress,this.prefetch,e).then(i=>{i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:Promise.resolve(i[1][2])}),r(i[0]),this.prune()}).catch(i=>{o(i)})});return this.cache.set(n,{lastUsed:this.counter++,data:t}),t})}getDirectory(s,e,n,t){return j(this,null,function*(){const r=s.getKey()+"|"+(t.etag||"")+"|"+e+"|"+n;if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const o=new Promise((i,c)=>{qs(s,this.decompress,e,n,t).then(l=>{i(l),this.prune()}).catch(l=>{c(l)})});return this.cache.set(r,{lastUsed:this.counter++,data:o}),o})}getArrayBuffer(s,e,n,t){return j(this,null,function*(){const r=s.getKey()+"|"+(t.etag||"")+"|"+e+"|"+n;if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const o=new Promise((i,c)=>{s.getBytes(e,n).then(l=>{if(t.etag&&t.etag!==l.etag)throw new Le(l.etag);i(l.data),this.cache.has(r),this.prune()}).catch(l=>{c(l)})});return this.cache.set(r,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let s=1/0,e;this.cache.forEach((n,t)=>{n.lastUsed<s&&(s=n.lastUsed,e=t)}),e&&this.cache.delete(e)}}invalidate(s,e){return j(this,null,function*(){this.cache.delete(s.getKey()),yield this.getHeader(s,e)})}},wt=class{constructor(s,e,n){typeof s=="string"?this.source=new Vs(s):this.source=s,n?this.decompress=n:this.decompress=Ht,e?this.cache=e:this.cache=new Ks}getHeader(){return j(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(s,e,n,t){return j(this,null,function*(){const r=Fs(s,e,n),o=yield this.cache.getHeader(this.source);if(o.specVersion<3)return jt.getZxy(o,this.source,this.cache,s,e,n,t);if(s<o.minZoom||s>o.maxZoom)return;let i=o.rootDirectoryOffset,c=o.rootDirectoryLength;for(let l=0;l<=3;l++){const u=yield this.cache.getDirectory(this.source,i,c,o),a=Hs(u,r);if(a)if(a.runLength>0){const f=yield this.source.getBytes(o.tileDataOffset+a.offset,a.length,t);if(o.etag&&o.etag!==f.etag)throw new Le(f.etag);return{data:yield this.decompress(f.data,o.tileCompression),cacheControl:f.cacheControl,expires:f.expires}}else i=o.leafDirectoryOffset+a.offset,c=a.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(s,e,n,t){return j(this,null,function*(){try{return yield this.getZxyAttempt(s,e,n,t)}catch(r){if(r instanceof Le)return this.cache.invalidate(this.source,r.message),yield this.getZxyAttempt(s,e,n,t);throw r}})}getMetadataAttempt(){return j(this,null,function*(){const s=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(s.jsonMetadataOffset,s.jsonMetadataLength);if(s.etag&&s.etag!==e.etag)throw new Le(e.etag);const n=yield this.decompress(e.data,s.internalCompression),t=new TextDecoder("utf-8");return JSON.parse(t.decode(n))})}getMetadata(){return j(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(s){if(s instanceof Le)return this.cache.invalidate(this.source,s.message),yield this.getMetadataAttempt();throw s}})}};function Ws(s){return Je(()=>{let e=new Ns;at.addProtocol("pmtiles",e.tile)}),Dt(()=>{at.removeProtocol("pmtiles")}),[]}class Js extends H{constructor(e){super(),V(this,e,Ws,null,G,{})}}function vt(s,e,n){const t=s.slice();return t[15]=e[n],t}function Xs(s){let e;return{c(){e=b("Home")},m(n,t){h(n,e,t)},d(n){n&&g(e)}}}function bt(s){let e,n;return e=new on({props:{errorMessage:s[1]}}),{c(){y(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.errorMessage=t[1]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function yt(s){let e,n,t,r;function o(l){s[10](l)}function i(l){s[11](l)}let c={schemes:s[2]};return s[3]!==void 0&&(c.schemesToBeShown=s[3]),s[4]!==void 0&&(c.filterText=s[4]),e=new rr({props:c}),Z.push(()=>R(e,"schemesToBeShown",o)),Z.push(()=>R(e,"filterText",i)),{c(){y(e.$$.fragment)},m(l,u){k(e,l,u),r=!0},p(l,u){const a={};u&4&&(a.schemes=l[2]),!n&&u&8&&(n=!0,a.schemesToBeShown=l[3],q(()=>n=!1)),!t&&u&16&&(t=!0,a.filterText=l[4],q(()=>t=!1)),e.$set(a)},i(l){r||(d(e.$$.fragment,l),r=!0)},o(l){_(e.$$.fragment,l),r=!1},d(l){L(e,l)}}}function kt(s){let e,n,t=ye(s[2].values()),r=[];for(let i=0;i<t.length;i+=1)r[i]=Ct(vt(s,t,i));const o=i=>_(r[i],1,1,()=>{r[i]=null});return{c(){e=B("ul");for(let i=0;i<r.length;i+=1)r[i].c()},m(i,c){h(i,e,c);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);n=!0},p(i,c){if(c&13){t=ye(i[2].values());let l;for(l=0;l<t.length;l+=1){const u=vt(i,t,l);r[l]?(r[l].p(u,c),d(r[l],1)):(r[l]=Ct(u),r[l].c(),d(r[l],1),r[l].m(e,null))}for(me(),l=t.length;l<r.length;l+=1)o(l);he()}},i(i){if(!n){for(let c=0;c<t.length;c+=1)d(r[c]);n=!0}},o(i){r=r.filter(Boolean);for(let c=0;c<r.length;c+=1)_(r[c]);n=!1},d(i){i&&g(e),Re(r,i)}}}function Lt(s){let e,n;return e=new Kr({props:{scheme:s[15],authorityNames:s[0]}}),{c(){y(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,r){const o={};r&4&&(o.scheme=t[15]),r&1&&(o.authorityNames=t[0]),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function Ct(s){let e=s[3].has(s[15].scheme_reference),n,t,r=e&&Lt(s);return{c(){r&&r.c(),n=ln()},m(o,i){r&&r.m(o,i),h(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[15].scheme_reference)),e?r?(r.p(o,i),i&12&&d(r,1)):(r=Lt(o),r.c(),d(r,1),r.m(n.parentNode,n)):r&&(me(),_(r,1,1,()=>{r=null}),he())},i(o){t||(d(r),t=!0)},o(o){_(r),t=!1},d(o){o&&g(n),r&&r.d(o)}}}function Ys(s){let e,n,t,r,o,i,c,l,u,a,f,p,m;n=new Ie({props:{$$slots:{default:[Xs]},$$scope:{ctx:s}}}),n.$on("click",s[9]),c=new fn({props:{boundaryGeojson:s[5]}});let w=s[1]&&bt(s);a=new en({props:{label:"Load from GeoJSON",id:"load-geojson",loadFile:s[7]}});let $=s[2].size>0&&yt(s),C=s[0]&&kt(s);return{c(){e=B("div"),y(n.$$.fragment),t=A(),r=B("div"),o=B("h1"),o.textContent="Browse schemes",i=A(),y(c.$$.fragment),l=A(),w&&w.c(),u=A(),y(a.$$.fragment),f=A(),$&&$.c(),p=A(),C&&C.c(),ce(r,"display","flex"),ce(r,"justify-content","space-between"),F(e,"slot","sidebar"),F(e,"class","govuk-prose")},m(v,T){h(v,e,T),k(n,e,null),O(e,t),O(e,r),O(r,o),O(r,i),k(c,r,null),O(e,l),w&&w.m(e,null),O(e,u),k(a,e,null),O(e,f),$&&$.m(e,null),O(e,p),C&&C.m(e,null),m=!0},p(v,T){const M={};T&262144&&(M.$$scope={dirty:T,ctx:v}),n.$set(M);const D={};T&32&&(D.boundaryGeojson=v[5]),c.$set(D),v[1]?w?(w.p(v,T),T&2&&d(w,1)):(w=bt(v),w.c(),d(w,1),w.m(e,u)):w&&(me(),_(w,1,1,()=>{w=null}),he()),v[2].size>0?$?($.p(v,T),T&4&&d($,1)):($=yt(v),$.c(),d($,1),$.m(e,p)):$&&(me(),_($,1,1,()=>{$=null}),he()),v[0]?C?(C.p(v,T),T&1&&d(C,1)):(C=kt(v),C.c(),d(C,1),C.m(e,null)):C&&(me(),_(C,1,1,()=>{C=null}),he())},i(v){m||(d(n.$$.fragment,v),d(c.$$.fragment,v),d(w),d(a.$$.fragment,v),d($),d(C),m=!0)},o(v){_(n.$$.fragment,v),_(c.$$.fragment,v),_(w),_(a.$$.fragment,v),_($),_(C),m=!1},d(v){v&&g(e),L(n),L(c),w&&w.d(),L(a),$&&$.d(),C&&C.d()}}}function Qs(s){let e,n,t,r,o,i,c,l,u,a,f,p,m,w;return e=new Qr({}),t=new $r({}),o=new Ar({}),c=new Hr({}),u=new cs({}),f=new qn({}),m=new kr({}),{c(){y(e.$$.fragment),n=A(),y(t.$$.fragment),r=A(),y(o.$$.fragment),i=A(),y(c.$$.fragment),l=A(),y(u.$$.fragment),a=A(),y(f.$$.fragment),p=A(),y(m.$$.fragment)},m($,C){k(e,$,C),h($,n,C),k(t,$,C),h($,r,C),k(o,$,C),h($,i,C),k(c,$,C),h($,l,C),k(u,$,C),h($,a,C),k(f,$,C),h($,p,C),k(m,$,C),w=!0},i($){w||(d(e.$$.fragment,$),d(t.$$.fragment,$),d(o.$$.fragment,$),d(c.$$.fragment,$),d(u.$$.fragment,$),d(f.$$.fragment,$),d(m.$$.fragment,$),w=!0)},o($){_(e.$$.fragment,$),_(t.$$.fragment,$),_(o.$$.fragment,$),_(c.$$.fragment,$),_(u.$$.fragment,$),_(f.$$.fragment,$),_(m.$$.fragment,$),w=!1},d($){$&&(g(n),g(r),g(i),g(l),g(a),g(p)),L(e,$),L(t,$),L(o,$),L(c,$),L(u,$),L(f,$),L(m,$)}}}function eo(s){let e,n,t,r,o,i;return e=new $n({props:{small:!0,$$slots:{default:[Qs]},$$scope:{ctx:s}}}),t=new zn({}),o=new mn({props:{style:s[6]}}),{c(){y(e.$$.fragment),n=A(),y(t.$$.fragment),r=A(),y(o.$$.fragment)},m(c,l){k(e,c,l),h(c,n,l),k(t,c,l),h(c,r,l),k(o,c,l),i=!0},p(c,l){const u={};l&262144&&(u.$$scope={dirty:l,ctx:c}),e.$set(u)},i(c){i||(d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),i=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),i=!1},d(c){c&&(g(n),g(r)),L(e,c),L(t,c),L(o,c)}}}function to(s){let e,n,t,r,o,i,c,l,u,a,f;return e=new pn({props:{colorInterventions:Ot("v1")}}),t=new oe({props:{layer:"interventions-points",tooltip:s[8],clickable:!1}}),o=new oe({props:{layer:"interventions-lines",tooltip:s[8],clickable:!1}}),c=new oe({props:{layer:"interventions-polygons",tooltip:s[8],clickable:!1}}),a=new Xe({props:{label:"Layers",open:!0,$$slots:{default:[eo]},$$scope:{ctx:s}}}),{c(){y(e.$$.fragment),n=A(),y(t.$$.fragment),r=A(),y(o.$$.fragment),i=A(),y(c.$$.fragment),l=A(),u=B("div"),y(a.$$.fragment),F(u,"class","top-right svelte-nlvvhu")},m(p,m){k(e,p,m),h(p,n,m),k(t,p,m),h(p,r,m),k(o,p,m),h(p,i,m),k(c,p,m),h(p,l,m),h(p,u,m),k(a,u,null),f=!0},p(p,m){const w={};m&262144&&(w.$$scope={dirty:m,ctx:p}),a.$set(w)},i(p){f||(d(e.$$.fragment,p),d(t.$$.fragment,p),d(o.$$.fragment,p),d(c.$$.fragment,p),d(a.$$.fragment,p),f=!0)},o(p){_(e.$$.fragment,p),_(t.$$.fragment,p),_(o.$$.fragment,p),_(c.$$.fragment,p),_(a.$$.fragment,p),f=!1},d(p){p&&(g(n),g(r),g(i),g(l),g(u)),L(e,p),L(t,p),L(o,p),L(c,p),L(a)}}}function no(s){let e,n,t,r,o;return n=new Js({}),r=new un({props:{style:s[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[to]},$$scope:{ctx:s}}}),{c(){e=B("div"),y(n.$$.fragment),t=A(),y(r.$$.fragment),F(e,"slot","main")},m(i,c){h(i,e,c),k(n,e,null),O(e,t),k(r,e,null),o=!0},p(i,c){const l={};c&262144&&(l.$$scope={dirty:c,ctx:i}),r.$set(l)},i(i){o||(d(n.$$.fragment,i),d(r.$$.fragment,i),o=!0)},o(i){_(n.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&g(e),L(n),L(r)}}}function ro(s){let e,n;return e=new cn({props:{$$slots:{main:[no],sidebar:[Ys]},$$scope:{ctx:s}}}),{c(){y(e.$$.fragment)},m(t,r){k(e,t,r),n=!0},p(t,[r]){const o={};r&262207&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(d(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){L(e,t)}}}function so(s,e,n){let t,r;X(s,ie,T=>n(12,t=T)),X(s,Ce,T=>n(5,r=T));let o=null;Je(async()=>{tn();let T=await nn();n(0,o=new Set(T.features.map(M=>M.properties.name)))});let c=new URLSearchParams(window.location.search).get("style")||"dataviz",l="",u=new Map,a=new Set,f="";Dt(()=>{Ce.set(rn())});function p(T){try{let M=JSON.parse(T);n(2,u=Kn(M)),Ce.set(M),n(1,l=""),t==null||t.fitBounds(Tt(M),{padding:20,animate:!1})}catch(M){n(1,l=`Couldn't load schemes from a file: ${M}`)}}function m(T){let M=T.properties;var D='<div style="max-width: 30vw;">';return D+=`<h2>${w(M.name)} (${M.intervention_type})</h2>`,D+=`<p>Scheme reference: ${M.scheme_reference}</p>`,M.length_meters&&(D+=`<p>Length: ${sn(M.length_meters)}</p>`),M.description&&(D+=`<p>${w(M.description)}</p>`),D+="</div>",D}function w(T){return f?T.replace(new RegExp(f,"gi"),M=>`<mark>${M}</mark>`):T}const $=()=>window.open("index.html");function C(T){a=T,n(3,a)}function v(T){f=T,n(4,f)}return[o,l,u,a,f,r,c,p,m,$,C,v]}class oo extends H{constructor(e){super(),V(this,e,so,ro,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new oo({target:document.getElementById("app")});
