import{aq as vf,av as mf,S as ke,i as Ce,s as Le,b as Ae,c as De,I as Ge,g as x,f as W,m as F,j as N,o as Se,t as M,y as ir,l as S,n as fr,p as A,q as P,_ as Ee,C as qe,aW as Gr,a1 as Dr,G as ur,a7 as Sr,V as it,e as re,W as Ha,x as cr,u as R,h as be,a0 as Ga,aV as we,k as V,U as Xe,a2 as Ar,r as Xt,F as df,a as ft,v as Ma,w as $f,H as bf,L as _f,M as yf,N as wf,az as kf,D as qa,aX as Ta,ag as Va,d as Cf,X as Na,z as Lf,A as Mf,a9 as Tf,aP as Nf,E as Af,ad as Df}from"./data_getter-1915396d.js";import{d as pr,S as ut,j as hr,H as gr,C as Yt,h as Sf,i as Aa,g as ja,L as Ef,Z as xf,M as Ff,I as Pf,b as zf,B as Of}from"./Map-079fdb36.js";var Za={exports:{}};/**
 * chroma.js - JavaScript library for color conversions
 *
 * Copyright (c) 2011-2019, Gregor Aisch
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *
 * 1. Redistributions of source code must retain the above copyright notice, this
 * list of conditions and the following disclaimer.
 *
 * 2. Redistributions in binary form must reproduce the above copyright notice,
 * this list of conditions and the following disclaimer in the documentation
 * and/or other materials provided with the distribution.
 *
 * 3. The name Gregor Aisch may not be used to endorse or promote products
 * derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS"
 * AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
 * IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL GREGOR AISCH OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,
 * INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,
 * BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY
 * OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
 * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
 * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -------------------------------------------------------
 *
 * chroma.js includes colors from colorbrewer2.org, which are released under
 * the following license:
 *
 * Copyright (c) 2002 Cynthia Brewer, Mark Harrower,
 * and The Pennsylvania State University.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing,
 * software distributed under the License is distributed on an
 * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,
 * either express or implied. See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * ------------------------------------------------------
 *
 * Named colors are taken from X11 Color Names.
 * http://www.w3.org/TR/css3-color/#svg-color
 *
 * @preserve
 */(function(o,e){(function(n,r){o.exports=r()})(vf,function(){for(var n=function(t,s,l){return s===void 0&&(s=0),l===void 0&&(l=1),t<s?s:t>l?l:t},r=n,a=function(t){t._clipped=!1,t._unclipped=t.slice(0);for(var s=0;s<=3;s++)s<3?((t[s]<0||t[s]>255)&&(t._clipped=!0),t[s]=r(t[s],0,255)):s===3&&(t[s]=r(t[s],0,1));return t},f={},u=0,g=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];u<g.length;u+=1){var i=g[u];f["[object "+i+"]"]=i.toLowerCase()}var m=function(t){return f[Object.prototype.toString.call(t)]||"object"},h=m,c=function(t,s){return s===void 0&&(s=null),t.length>=3?Array.prototype.slice.call(t):h(t[0])=="object"&&s?s.split("").filter(function(l){return t[0][l]!==void 0}).map(function(l){return t[0][l]}):t[0]},w=m,k=function(t){if(t.length<2)return null;var s=t.length-1;return w(t[s])=="string"?t[s].toLowerCase():null},L=Math.PI,_={clip_rgb:a,limit:n,type:m,unpack:c,last:k,PI:L,TWOPI:L*2,PITHIRD:L/3,DEG2RAD:L/180,RAD2DEG:180/L},z={format:{},autodetect:[]},U=_.last,G=_.clip_rgb,j=_.type,X=z,Z=function(){for(var s=[],l=arguments.length;l--;)s[l]=arguments[l];var p=this;if(j(s[0])==="object"&&s[0].constructor&&s[0].constructor===this.constructor)return s[0];var d=U(s),$=!1;if(!d){$=!0,X.sorted||(X.autodetect=X.autodetect.sort(function(T,B){return B.p-T.p}),X.sorted=!0);for(var v=0,b=X.autodetect;v<b.length;v+=1){var y=b[v];if(d=y.test.apply(y,s),d)break}}if(X.format[d]){var C=X.format[d].apply(null,$?s:s.slice(0,-1));p._rgb=G(C)}else throw new Error("unknown format: "+s);p._rgb.length===3&&p._rgb.push(1)};Z.prototype.toString=function(){return j(this.hex)=="function"?this.hex():"["+this._rgb.join(",")+"]"};var O=Z,ue=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(ue.Color,[null].concat(t)))};ue.Color=O,ue.version="2.4.2";var Y=ue,Fe=_.unpack,he=Math.max,Vr=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=Fe(t,"rgb"),p=l[0],d=l[1],$=l[2];p=p/255,d=d/255,$=$/255;var v=1-he(p,he(d,$)),b=v<1?1/(1-v):0,y=(1-p-v)*b,C=(1-d-v)*b,T=(1-$-v)*b;return[y,C,T,v]},pt=Vr,ht=_.unpack,jr=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];t=ht(t,"cmyk");var l=t[0],p=t[1],d=t[2],$=t[3],v=t.length>4?t[4]:1;return $===1?[0,0,0,v]:[l>=1?0:255*(1-l)*(1-$),p>=1?0:255*(1-p)*(1-$),d>=1?0:255*(1-d)*(1-$),v]},Ye=jr,vr=Y,Er=O,_e=z,gt=_.unpack,vt=_.type,xr=pt;Er.prototype.cmyk=function(){return xr(this._rgb)},vr.cmyk=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(Er,[null].concat(t,["cmyk"])))},_e.format.cmyk=Ye,_e.autodetect.push({p:2,test:function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];if(t=gt(t,"cmyk"),vt(t)==="array"&&t.length===4)return"cmyk"}});var Je=_.unpack,Zr=_.last,Ve=function(t){return Math.round(t*100)/100},Fr=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=Je(t,"hsla"),p=Zr(t)||"lsa";return l[0]=Ve(l[0]||0),l[1]=Ve(l[1]*100)+"%",l[2]=Ve(l[2]*100)+"%",p==="hsla"||l.length>3&&l[3]<1?(l[3]=l.length>3?l[3]:1,p="hsla"):l.length=3,p+"("+l.join(",")+")"},Pr=Fr,zr=_.unpack,Wr=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];t=zr(t,"rgba");var l=t[0],p=t[1],d=t[2];l/=255,p/=255,d/=255;var $=Math.min(l,p,d),v=Math.max(l,p,d),b=(v+$)/2,y,C;return v===$?(y=0,C=Number.NaN):y=b<.5?(v-$)/(v+$):(v-$)/(2-v-$),l==v?C=(p-d)/(v-$):p==v?C=2+(d-l)/(v-$):d==v&&(C=4+(l-p)/(v-$)),C*=60,C<0&&(C+=360),t.length>3&&t[3]!==void 0?[C,y,b,t[3]]:[C,y,b]},Xr=Wr,Yr=_.unpack,Jr=_.last,Kr=Pr,io=Xr,mt=Math.round,fo=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=Yr(t,"rgba"),p=Jr(t)||"rgb";return p.substr(0,3)=="hsl"?Kr(io(l),p):(l[0]=mt(l[0]),l[1]=mt(l[1]),l[2]=mt(l[2]),(p==="rgba"||l.length>3&&l[3]<1)&&(l[3]=l.length>3?l[3]:1,p="rgba"),p+"("+l.slice(0,p==="rgb"?3:4).join(",")+")")},uo=fo,co=_.unpack,dt=Math.round,po=function(){for(var t,s=[],l=arguments.length;l--;)s[l]=arguments[l];s=co(s,"hsl");var p=s[0],d=s[1],$=s[2],v,b,y;if(d===0)v=b=y=$*255;else{var C=[0,0,0],T=[0,0,0],B=$<.5?$*(1+d):$+d-$*d,D=2*$-B,H=p/360;C[0]=H+1/3,C[1]=H,C[2]=H-1/3;for(var I=0;I<3;I++)C[I]<0&&(C[I]+=1),C[I]>1&&(C[I]-=1),6*C[I]<1?T[I]=D+(B-D)*6*C[I]:2*C[I]<1?T[I]=B:3*C[I]<2?T[I]=D+(B-D)*(2/3-C[I])*6:T[I]=D;t=[dt(T[0]*255),dt(T[1]*255),dt(T[2]*255)],v=t[0],b=t[1],y=t[2]}return s.length>3?[v,b,y,s[3]]:[v,b,y,1]},Kt=po,Qt=Kt,en=z,rn=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,tn=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,nn=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,an=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,on=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,sn=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,ln=Math.round,fn=function(t){t=t.toLowerCase().trim();var s;if(en.format.named)try{return en.format.named(t)}catch{}if(s=t.match(rn)){for(var l=s.slice(1,4),p=0;p<3;p++)l[p]=+l[p];return l[3]=1,l}if(s=t.match(tn)){for(var d=s.slice(1,5),$=0;$<4;$++)d[$]=+d[$];return d}if(s=t.match(nn)){for(var v=s.slice(1,4),b=0;b<3;b++)v[b]=ln(v[b]*2.55);return v[3]=1,v}if(s=t.match(an)){for(var y=s.slice(1,5),C=0;C<3;C++)y[C]=ln(y[C]*2.55);return y[3]=+y[3],y}if(s=t.match(on)){var T=s.slice(1,4);T[1]*=.01,T[2]*=.01;var B=Qt(T);return B[3]=1,B}if(s=t.match(sn)){var D=s.slice(1,4);D[1]*=.01,D[2]*=.01;var H=Qt(D);return H[3]=+s[4],H}};fn.test=function(t){return rn.test(t)||tn.test(t)||nn.test(t)||an.test(t)||on.test(t)||sn.test(t)};var ho=fn,go=Y,un=O,cn=z,vo=_.type,mo=uo,pn=ho;un.prototype.css=function(t){return mo(this._rgb,t)},go.css=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(un,[null].concat(t,["css"])))},cn.format.css=pn,cn.autodetect.push({p:5,test:function(t){for(var s=[],l=arguments.length-1;l-- >0;)s[l]=arguments[l+1];if(!s.length&&vo(t)==="string"&&pn.test(t))return"css"}});var hn=O,$o=Y,bo=z,_o=_.unpack;bo.format.gl=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=_o(t,"rgba");return l[0]*=255,l[1]*=255,l[2]*=255,l},$o.gl=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(hn,[null].concat(t,["gl"])))},hn.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var yo=_.unpack,wo=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=yo(t,"rgb"),p=l[0],d=l[1],$=l[2],v=Math.min(p,d,$),b=Math.max(p,d,$),y=b-v,C=y*100/255,T=v/(255-y)*100,B;return y===0?B=Number.NaN:(p===b&&(B=(d-$)/y),d===b&&(B=2+($-p)/y),$===b&&(B=4+(p-d)/y),B*=60,B<0&&(B+=360)),[B,C,T]},ko=wo,Co=_.unpack,Lo=Math.floor,Mo=function(){for(var t,s,l,p,d,$,v=[],b=arguments.length;b--;)v[b]=arguments[b];v=Co(v,"hcg");var y=v[0],C=v[1],T=v[2],B,D,H;T=T*255;var I=C*255;if(C===0)B=D=H=T;else{y===360&&(y=0),y>360&&(y-=360),y<0&&(y+=360),y/=60;var J=Lo(y),ee=y-J,ne=T*(1-C),oe=ne+I*(1-ee),me=ne+I*ee,ve=ne+I;switch(J){case 0:t=[ve,me,ne],B=t[0],D=t[1],H=t[2];break;case 1:s=[oe,ve,ne],B=s[0],D=s[1],H=s[2];break;case 2:l=[ne,ve,me],B=l[0],D=l[1],H=l[2];break;case 3:p=[ne,oe,ve],B=p[0],D=p[1],H=p[2];break;case 4:d=[me,ne,ve],B=d[0],D=d[1],H=d[2];break;case 5:$=[ve,ne,oe],B=$[0],D=$[1],H=$[2];break}}return[B,D,H,v.length>3?v[3]:1]},To=Mo,No=_.unpack,Ao=_.type,Do=Y,gn=O,vn=z,So=ko;gn.prototype.hcg=function(){return So(this._rgb)},Do.hcg=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(gn,[null].concat(t,["hcg"])))},vn.format.hcg=To,vn.autodetect.push({p:1,test:function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];if(t=No(t,"hcg"),Ao(t)==="array"&&t.length===3)return"hcg"}});var Eo=_.unpack,xo=_.last,Qr=Math.round,Fo=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=Eo(t,"rgba"),p=l[0],d=l[1],$=l[2],v=l[3],b=xo(t)||"auto";v===void 0&&(v=1),b==="auto"&&(b=v<1?"rgba":"rgb"),p=Qr(p),d=Qr(d),$=Qr($);var y=p<<16|d<<8|$,C="000000"+y.toString(16);C=C.substr(C.length-6);var T="0"+Qr(v*255).toString(16);switch(T=T.substr(T.length-2),b.toLowerCase()){case"rgba":return"#"+C+T;case"argb":return"#"+T+C;default:return"#"+C}},mn=Fo,Po=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,zo=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,Oo=function(t){if(t.match(Po)){(t.length===4||t.length===7)&&(t=t.substr(1)),t.length===3&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var s=parseInt(t,16),l=s>>16,p=s>>8&255,d=s&255;return[l,p,d,1]}if(t.match(zo)){(t.length===5||t.length===9)&&(t=t.substr(1)),t.length===4&&(t=t.split(""),t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var $=parseInt(t,16),v=$>>24&255,b=$>>16&255,y=$>>8&255,C=Math.round(($&255)/255*100)/100;return[v,b,y,C]}throw new Error("unknown hex color: "+t)},dn=Oo,Bo=Y,$n=O,Uo=_.type,bn=z,Io=mn;$n.prototype.hex=function(t){return Io(this._rgb,t)},Bo.hex=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply($n,[null].concat(t,["hex"])))},bn.format.hex=dn,bn.autodetect.push({p:4,test:function(t){for(var s=[],l=arguments.length-1;l-- >0;)s[l]=arguments[l+1];if(!s.length&&Uo(t)==="string"&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var Ro=_.unpack,_n=_.TWOPI,Ho=Math.min,Go=Math.sqrt,qo=Math.acos,Vo=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=Ro(t,"rgb"),p=l[0],d=l[1],$=l[2];p/=255,d/=255,$/=255;var v,b=Ho(p,d,$),y=(p+d+$)/3,C=y>0?1-b/y:0;return C===0?v=NaN:(v=(p-d+(p-$))/2,v/=Go((p-d)*(p-d)+(p-$)*(d-$)),v=qo(v),$>d&&(v=_n-v),v/=_n),[v*360,C,y]},jo=Vo,Zo=_.unpack,$t=_.limit,mr=_.TWOPI,bt=_.PITHIRD,dr=Math.cos,Wo=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];t=Zo(t,"hsi");var l=t[0],p=t[1],d=t[2],$,v,b;return isNaN(l)&&(l=0),isNaN(p)&&(p=0),l>360&&(l-=360),l<0&&(l+=360),l/=360,l<1/3?(b=(1-p)/3,$=(1+p*dr(mr*l)/dr(bt-mr*l))/3,v=1-(b+$)):l<2/3?(l-=1/3,$=(1-p)/3,v=(1+p*dr(mr*l)/dr(bt-mr*l))/3,b=1-($+v)):(l-=2/3,v=(1-p)/3,b=(1+p*dr(mr*l)/dr(bt-mr*l))/3,$=1-(v+b)),$=$t(d*$*3),v=$t(d*v*3),b=$t(d*b*3),[$*255,v*255,b*255,t.length>3?t[3]:1]},Xo=Wo,Yo=_.unpack,Jo=_.type,Ko=Y,yn=O,wn=z,Qo=jo;yn.prototype.hsi=function(){return Qo(this._rgb)},Ko.hsi=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(yn,[null].concat(t,["hsi"])))},wn.format.hsi=Xo,wn.autodetect.push({p:2,test:function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];if(t=Yo(t,"hsi"),Jo(t)==="array"&&t.length===3)return"hsi"}});var es=_.unpack,rs=_.type,ts=Y,kn=O,Cn=z,ns=Xr;kn.prototype.hsl=function(){return ns(this._rgb)},ts.hsl=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(kn,[null].concat(t,["hsl"])))},Cn.format.hsl=Kt,Cn.autodetect.push({p:2,test:function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];if(t=es(t,"hsl"),rs(t)==="array"&&t.length===3)return"hsl"}});var as=_.unpack,os=Math.min,ss=Math.max,ls=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];t=as(t,"rgb");var l=t[0],p=t[1],d=t[2],$=os(l,p,d),v=ss(l,p,d),b=v-$,y,C,T;return T=v/255,v===0?(y=Number.NaN,C=0):(C=b/v,l===v&&(y=(p-d)/b),p===v&&(y=2+(d-l)/b),d===v&&(y=4+(l-p)/b),y*=60,y<0&&(y+=360)),[y,C,T]},is=ls,fs=_.unpack,us=Math.floor,cs=function(){for(var t,s,l,p,d,$,v=[],b=arguments.length;b--;)v[b]=arguments[b];v=fs(v,"hsv");var y=v[0],C=v[1],T=v[2],B,D,H;if(T*=255,C===0)B=D=H=T;else{y===360&&(y=0),y>360&&(y-=360),y<0&&(y+=360),y/=60;var I=us(y),J=y-I,ee=T*(1-C),ne=T*(1-C*J),oe=T*(1-C*(1-J));switch(I){case 0:t=[T,oe,ee],B=t[0],D=t[1],H=t[2];break;case 1:s=[ne,T,ee],B=s[0],D=s[1],H=s[2];break;case 2:l=[ee,T,oe],B=l[0],D=l[1],H=l[2];break;case 3:p=[ee,ne,T],B=p[0],D=p[1],H=p[2];break;case 4:d=[oe,ee,T],B=d[0],D=d[1],H=d[2];break;case 5:$=[T,ee,ne],B=$[0],D=$[1],H=$[2];break}}return[B,D,H,v.length>3?v[3]:1]},ps=cs,hs=_.unpack,gs=_.type,vs=Y,Ln=O,Mn=z,ms=is;Ln.prototype.hsv=function(){return ms(this._rgb)},vs.hsv=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(Ln,[null].concat(t,["hsv"])))},Mn.format.hsv=ps,Mn.autodetect.push({p:2,test:function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];if(t=hs(t,"hsv"),gs(t)==="array"&&t.length===3)return"hsv"}});var et={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},$r=et,ds=_.unpack,Tn=Math.pow,$s=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=ds(t,"rgb"),p=l[0],d=l[1],$=l[2],v=bs(p,d,$),b=v[0],y=v[1],C=v[2],T=116*y-16;return[T<0?0:T,500*(b-y),200*(y-C)]},_t=function(t){return(t/=255)<=.04045?t/12.92:Tn((t+.055)/1.055,2.4)},yt=function(t){return t>$r.t3?Tn(t,1/3):t/$r.t2+$r.t0},bs=function(t,s,l){t=_t(t),s=_t(s),l=_t(l);var p=yt((.4124564*t+.3575761*s+.1804375*l)/$r.Xn),d=yt((.2126729*t+.7151522*s+.072175*l)/$r.Yn),$=yt((.0193339*t+.119192*s+.9503041*l)/$r.Zn);return[p,d,$]},Nn=$s,br=et,_s=_.unpack,ys=Math.pow,ws=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];t=_s(t,"lab");var l=t[0],p=t[1],d=t[2],$,v,b,y,C,T;return v=(l+16)/116,$=isNaN(p)?v:v+p/500,b=isNaN(d)?v:v-d/200,v=br.Yn*kt(v),$=br.Xn*kt($),b=br.Zn*kt(b),y=wt(3.2404542*$-1.5371385*v-.4985314*b),C=wt(-.969266*$+1.8760108*v+.041556*b),T=wt(.0556434*$-.2040259*v+1.0572252*b),[y,C,T,t.length>3?t[3]:1]},wt=function(t){return 255*(t<=.00304?12.92*t:1.055*ys(t,1/2.4)-.055)},kt=function(t){return t>br.t1?t*t*t:br.t2*(t-br.t0)},An=ws,ks=_.unpack,Cs=_.type,Ls=Y,Dn=O,Sn=z,Ms=Nn;Dn.prototype.lab=function(){return Ms(this._rgb)},Ls.lab=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(Dn,[null].concat(t,["lab"])))},Sn.format.lab=An,Sn.autodetect.push({p:2,test:function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];if(t=ks(t,"lab"),Cs(t)==="array"&&t.length===3)return"lab"}});var Ts=_.unpack,Ns=_.RAD2DEG,As=Math.sqrt,Ds=Math.atan2,Ss=Math.round,Es=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=Ts(t,"lab"),p=l[0],d=l[1],$=l[2],v=As(d*d+$*$),b=(Ds($,d)*Ns+360)%360;return Ss(v*1e4)===0&&(b=Number.NaN),[p,v,b]},En=Es,xs=_.unpack,Fs=Nn,Ps=En,zs=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=xs(t,"rgb"),p=l[0],d=l[1],$=l[2],v=Fs(p,d,$),b=v[0],y=v[1],C=v[2];return Ps(b,y,C)},Os=zs,Bs=_.unpack,Us=_.DEG2RAD,Is=Math.sin,Rs=Math.cos,Hs=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=Bs(t,"lch"),p=l[0],d=l[1],$=l[2];return isNaN($)&&($=0),$=$*Us,[p,Rs($)*d,Is($)*d]},xn=Hs,Gs=_.unpack,qs=xn,Vs=An,js=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];t=Gs(t,"lch");var l=t[0],p=t[1],d=t[2],$=qs(l,p,d),v=$[0],b=$[1],y=$[2],C=Vs(v,b,y),T=C[0],B=C[1],D=C[2];return[T,B,D,t.length>3?t[3]:1]},Fn=js,Zs=_.unpack,Ws=Fn,Xs=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=Zs(t,"hcl").reverse();return Ws.apply(void 0,l)},Ys=Xs,Js=_.unpack,Ks=_.type,Pn=Y,rt=O,Ct=z,zn=Os;rt.prototype.lch=function(){return zn(this._rgb)},rt.prototype.hcl=function(){return zn(this._rgb).reverse()},Pn.lch=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(rt,[null].concat(t,["lch"])))},Pn.hcl=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(rt,[null].concat(t,["hcl"])))},Ct.format.lch=Fn,Ct.format.hcl=Ys,["lch","hcl"].forEach(function(t){return Ct.autodetect.push({p:2,test:function(){for(var s=[],l=arguments.length;l--;)s[l]=arguments[l];if(s=Js(s,t),Ks(s)==="array"&&s.length===3)return t}})});var Qs={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},On=Qs,el=O,Bn=z,rl=_.type,Or=On,tl=dn,nl=mn;el.prototype.name=function(){for(var t=nl(this._rgb,"rgb"),s=0,l=Object.keys(Or);s<l.length;s+=1){var p=l[s];if(Or[p]===t)return p.toLowerCase()}return t},Bn.format.named=function(t){if(t=t.toLowerCase(),Or[t])return tl(Or[t]);throw new Error("unknown color name: "+t)},Bn.autodetect.push({p:5,test:function(t){for(var s=[],l=arguments.length-1;l-- >0;)s[l]=arguments[l+1];if(!s.length&&rl(t)==="string"&&Or[t.toLowerCase()])return"named"}});var al=_.unpack,ol=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=al(t,"rgb"),p=l[0],d=l[1],$=l[2];return(p<<16)+(d<<8)+$},sl=ol,ll=_.type,il=function(t){if(ll(t)=="number"&&t>=0&&t<=16777215){var s=t>>16,l=t>>8&255,p=t&255;return[s,l,p,1]}throw new Error("unknown num color: "+t)},fl=il,ul=Y,Un=O,In=z,cl=_.type,pl=sl;Un.prototype.num=function(){return pl(this._rgb)},ul.num=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(Un,[null].concat(t,["num"])))},In.format.num=fl,In.autodetect.push({p:5,test:function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];if(t.length===1&&cl(t[0])==="number"&&t[0]>=0&&t[0]<=16777215)return"num"}});var hl=Y,Lt=O,Rn=z,Hn=_.unpack,Gn=_.type,qn=Math.round;Lt.prototype.rgb=function(t){return t===void 0&&(t=!0),t===!1?this._rgb.slice(0,3):this._rgb.slice(0,3).map(qn)},Lt.prototype.rgba=function(t){return t===void 0&&(t=!0),this._rgb.slice(0,4).map(function(s,l){return l<3?t===!1?s:qn(s):s})},hl.rgb=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(Lt,[null].concat(t,["rgb"])))},Rn.format.rgb=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=Hn(t,"rgba");return l[3]===void 0&&(l[3]=1),l},Rn.autodetect.push({p:3,test:function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];if(t=Hn(t,"rgba"),Gn(t)==="array"&&(t.length===3||t.length===4&&Gn(t[3])=="number"&&t[3]>=0&&t[3]<=1))return"rgb"}});var tt=Math.log,gl=function(t){var s=t/100,l,p,d;return s<66?(l=255,p=s<6?0:-155.25485562709179-.44596950469579133*(p=s-2)+104.49216199393888*tt(p),d=s<20?0:-254.76935184120902+.8274096064007395*(d=s-10)+115.67994401066147*tt(d)):(l=351.97690566805693+.114206453784165*(l=s-55)-40.25366309332127*tt(l),p=325.4494125711974+.07943456536662342*(p=s-50)-28.0852963507957*tt(p),d=255),[l,p,d,1]},Vn=gl,vl=Vn,ml=_.unpack,dl=Math.round,$l=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];for(var l=ml(t,"rgb"),p=l[0],d=l[2],$=1e3,v=4e4,b=.4,y;v-$>b;){y=(v+$)*.5;var C=vl(y);C[2]/C[0]>=d/p?v=y:$=y}return dl(y)},bl=$l,Mt=Y,nt=O,Tt=z,_l=bl;nt.prototype.temp=nt.prototype.kelvin=nt.prototype.temperature=function(){return _l(this._rgb)},Mt.temp=Mt.kelvin=Mt.temperature=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(nt,[null].concat(t,["temp"])))},Tt.format.temp=Tt.format.kelvin=Tt.format.temperature=Vn;var yl=_.unpack,Nt=Math.cbrt,wl=Math.pow,kl=Math.sign,Cl=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=yl(t,"rgb"),p=l[0],d=l[1],$=l[2],v=[At(p/255),At(d/255),At($/255)],b=v[0],y=v[1],C=v[2],T=Nt(.4122214708*b+.5363325363*y+.0514459929*C),B=Nt(.2119034982*b+.6806995451*y+.1073969566*C),D=Nt(.0883024619*b+.2817188376*y+.6299787005*C);return[.2104542553*T+.793617785*B-.0040720468*D,1.9779984951*T-2.428592205*B+.4505937099*D,.0259040371*T+.7827717662*B-.808675766*D]},jn=Cl;function At(t){var s=Math.abs(t);return s<.04045?t/12.92:(kl(t)||1)*wl((s+.055)/1.055,2.4)}var Ll=_.unpack,at=Math.pow,Ml=Math.sign,Tl=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];t=Ll(t,"lab");var l=t[0],p=t[1],d=t[2],$=at(l+.3963377774*p+.2158037573*d,3),v=at(l-.1055613458*p-.0638541728*d,3),b=at(l-.0894841775*p-1.291485548*d,3);return[255*Dt(4.0767416621*$-3.3077115913*v+.2309699292*b),255*Dt(-1.2684380046*$+2.6097574011*v-.3413193965*b),255*Dt(-.0041960863*$-.7034186147*v+1.707614701*b),t.length>3?t[3]:1]},Zn=Tl;function Dt(t){var s=Math.abs(t);return s>.0031308?(Ml(t)||1)*(1.055*at(s,1/2.4)-.055):t*12.92}var Nl=_.unpack,Al=_.type,Dl=Y,Wn=O,Xn=z,Sl=jn;Wn.prototype.oklab=function(){return Sl(this._rgb)},Dl.oklab=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(Wn,[null].concat(t,["oklab"])))},Xn.format.oklab=Zn,Xn.autodetect.push({p:3,test:function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];if(t=Nl(t,"oklab"),Al(t)==="array"&&t.length===3)return"oklab"}});var El=_.unpack,xl=jn,Fl=En,Pl=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];var l=El(t,"rgb"),p=l[0],d=l[1],$=l[2],v=xl(p,d,$),b=v[0],y=v[1],C=v[2];return Fl(b,y,C)},zl=Pl,Ol=_.unpack,Bl=xn,Ul=Zn,Il=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];t=Ol(t,"lch");var l=t[0],p=t[1],d=t[2],$=Bl(l,p,d),v=$[0],b=$[1],y=$[2],C=Ul(v,b,y),T=C[0],B=C[1],D=C[2];return[T,B,D,t.length>3?t[3]:1]},Rl=Il,Hl=_.unpack,Gl=_.type,ql=Y,Yn=O,Jn=z,Vl=zl;Yn.prototype.oklch=function(){return Vl(this._rgb)},ql.oklch=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];return new(Function.prototype.bind.apply(Yn,[null].concat(t,["oklch"])))},Jn.format.oklch=Rl,Jn.autodetect.push({p:3,test:function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];if(t=Hl(t,"oklch"),Gl(t)==="array"&&t.length===3)return"oklch"}});var Kn=O,jl=_.type;Kn.prototype.alpha=function(t,s){return s===void 0&&(s=!1),t!==void 0&&jl(t)==="number"?s?(this._rgb[3]=t,this):new Kn([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]};var Zl=O;Zl.prototype.clipped=function(){return this._rgb._clipped||!1};var ar=O,Wl=et;ar.prototype.darken=function(t){t===void 0&&(t=1);var s=this,l=s.lab();return l[0]-=Wl.Kn*t,new ar(l,"lab").alpha(s.alpha(),!0)},ar.prototype.brighten=function(t){return t===void 0&&(t=1),this.darken(-t)},ar.prototype.darker=ar.prototype.darken,ar.prototype.brighter=ar.prototype.brighten;var Xl=O;Xl.prototype.get=function(t){var s=t.split("."),l=s[0],p=s[1],d=this[l]();if(p){var $=l.indexOf(p)-(l.substr(0,2)==="ok"?2:0);if($>-1)return d[$];throw new Error("unknown channel "+p+" in mode "+l)}else return d};var _r=O,Yl=_.type,Jl=Math.pow,Kl=1e-7,Ql=20;_r.prototype.luminance=function(t){if(t!==void 0&&Yl(t)==="number"){if(t===0)return new _r([0,0,0,this._rgb[3]],"rgb");if(t===1)return new _r([255,255,255,this._rgb[3]],"rgb");var s=this.luminance(),l="rgb",p=Ql,d=function(v,b){var y=v.interpolate(b,.5,l),C=y.luminance();return Math.abs(t-C)<Kl||!p--?y:C>t?d(v,y):d(y,b)},$=(s>t?d(new _r([0,0,0]),this):d(this,new _r([255,255,255]))).rgb();return new _r($.concat([this._rgb[3]]))}return ei.apply(void 0,this._rgb.slice(0,3))};var ei=function(t,s,l){return t=St(t),s=St(s),l=St(l),.2126*t+.7152*s+.0722*l},St=function(t){return t/=255,t<=.03928?t/12.92:Jl((t+.055)/1.055,2.4)},Me={},Qn=O,ea=_.type,ot=Me,ra=function(t,s,l){l===void 0&&(l=.5);for(var p=[],d=arguments.length-3;d-- >0;)p[d]=arguments[d+3];var $=p[0]||"lrgb";if(!ot[$]&&!p.length&&($=Object.keys(ot)[0]),!ot[$])throw new Error("interpolation mode "+$+" is not defined");return ea(t)!=="object"&&(t=new Qn(t)),ea(s)!=="object"&&(s=new Qn(s)),ot[$](t,s,l).alpha(t.alpha()+l*(s.alpha()-t.alpha()))},ta=O,ri=ra;ta.prototype.mix=ta.prototype.interpolate=function(t,s){s===void 0&&(s=.5);for(var l=[],p=arguments.length-2;p-- >0;)l[p]=arguments[p+2];return ri.apply(void 0,[this,t,s].concat(l))};var na=O;na.prototype.premultiply=function(t){t===void 0&&(t=!1);var s=this._rgb,l=s[3];return t?(this._rgb=[s[0]*l,s[1]*l,s[2]*l,l],this):new na([s[0]*l,s[1]*l,s[2]*l,l],"rgb")};var Et=O,ti=et;Et.prototype.saturate=function(t){t===void 0&&(t=1);var s=this,l=s.lch();return l[1]+=ti.Kn*t,l[1]<0&&(l[1]=0),new Et(l,"lch").alpha(s.alpha(),!0)},Et.prototype.desaturate=function(t){return t===void 0&&(t=1),this.saturate(-t)};var aa=O,oa=_.type;aa.prototype.set=function(t,s,l){l===void 0&&(l=!1);var p=t.split("."),d=p[0],$=p[1],v=this[d]();if($){var b=d.indexOf($)-(d.substr(0,2)==="ok"?2:0);if(b>-1){if(oa(s)=="string")switch(s.charAt(0)){case"+":v[b]+=+s;break;case"-":v[b]+=+s;break;case"*":v[b]*=+s.substr(1);break;case"/":v[b]/=+s.substr(1);break;default:v[b]=+s}else if(oa(s)==="number")v[b]=s;else throw new Error("unsupported value for Color.set");var y=new aa(v,d);return l?(this._rgb=y._rgb,this):y}throw new Error("unknown channel "+$+" in mode "+d)}else return v};var ni=O,ai=function(t,s,l){var p=t._rgb,d=s._rgb;return new ni(p[0]+l*(d[0]-p[0]),p[1]+l*(d[1]-p[1]),p[2]+l*(d[2]-p[2]),"rgb")};Me.rgb=ai;var oi=O,xt=Math.sqrt,yr=Math.pow,si=function(t,s,l){var p=t._rgb,d=p[0],$=p[1],v=p[2],b=s._rgb,y=b[0],C=b[1],T=b[2];return new oi(xt(yr(d,2)*(1-l)+yr(y,2)*l),xt(yr($,2)*(1-l)+yr(C,2)*l),xt(yr(v,2)*(1-l)+yr(T,2)*l),"rgb")};Me.lrgb=si;var li=O,ii=function(t,s,l){var p=t.lab(),d=s.lab();return new li(p[0]+l*(d[0]-p[0]),p[1]+l*(d[1]-p[1]),p[2]+l*(d[2]-p[2]),"lab")};Me.lab=ii;var sa=O,wr=function(t,s,l,p){var d,$,v,b;p==="hsl"?(v=t.hsl(),b=s.hsl()):p==="hsv"?(v=t.hsv(),b=s.hsv()):p==="hcg"?(v=t.hcg(),b=s.hcg()):p==="hsi"?(v=t.hsi(),b=s.hsi()):p==="lch"||p==="hcl"?(p="hcl",v=t.hcl(),b=s.hcl()):p==="oklch"&&(v=t.oklch().reverse(),b=s.oklch().reverse());var y,C,T,B,D,H;(p.substr(0,1)==="h"||p==="oklch")&&(d=v,y=d[0],T=d[1],D=d[2],$=b,C=$[0],B=$[1],H=$[2]);var I,J,ee,ne;return!isNaN(y)&&!isNaN(C)?(C>y&&C-y>180?ne=C-(y+360):C<y&&y-C>180?ne=C+360-y:ne=C-y,J=y+l*ne):isNaN(y)?isNaN(C)?J=Number.NaN:(J=C,(D==1||D==0)&&p!="hsv"&&(I=B)):(J=y,(H==1||H==0)&&p!="hsv"&&(I=T)),I===void 0&&(I=T+l*(B-T)),ee=D+l*(H-D),p==="oklch"?new sa([ee,I,J],p):new sa([J,I,ee],p)},fi=wr,la=function(t,s,l){return fi(t,s,l,"lch")};Me.lch=la,Me.hcl=la;var ui=O,ci=function(t,s,l){var p=t.num(),d=s.num();return new ui(p+l*(d-p),"num")};Me.num=ci;var pi=wr,hi=function(t,s,l){return pi(t,s,l,"hcg")};Me.hcg=hi;var gi=wr,vi=function(t,s,l){return gi(t,s,l,"hsi")};Me.hsi=vi;var mi=wr,di=function(t,s,l){return mi(t,s,l,"hsl")};Me.hsl=di;var $i=wr,bi=function(t,s,l){return $i(t,s,l,"hsv")};Me.hsv=bi;var _i=O,yi=function(t,s,l){var p=t.oklab(),d=s.oklab();return new _i(p[0]+l*(d[0]-p[0]),p[1]+l*(d[1]-p[1]),p[2]+l*(d[2]-p[2]),"oklab")};Me.oklab=yi;var wi=wr,ki=function(t,s,l){return wi(t,s,l,"oklch")};Me.oklch=ki;var Ft=O,Ci=_.clip_rgb,Pt=Math.pow,zt=Math.sqrt,Ot=Math.PI,ia=Math.cos,fa=Math.sin,Li=Math.atan2,Mi=function(t,s,l){s===void 0&&(s="lrgb"),l===void 0&&(l=null);var p=t.length;l||(l=Array.from(new Array(p)).map(function(){return 1}));var d=p/l.reduce(function(J,ee){return J+ee});if(l.forEach(function(J,ee){l[ee]*=d}),t=t.map(function(J){return new Ft(J)}),s==="lrgb")return Ti(t,l);for(var $=t.shift(),v=$.get(s),b=[],y=0,C=0,T=0;T<v.length;T++)if(v[T]=(v[T]||0)*l[0],b.push(isNaN(v[T])?0:l[0]),s.charAt(T)==="h"&&!isNaN(v[T])){var B=v[T]/180*Ot;y+=ia(B)*l[0],C+=fa(B)*l[0]}var D=$.alpha()*l[0];t.forEach(function(J,ee){var ne=J.get(s);D+=J.alpha()*l[ee+1];for(var oe=0;oe<v.length;oe++)if(!isNaN(ne[oe]))if(b[oe]+=l[ee+1],s.charAt(oe)==="h"){var me=ne[oe]/180*Ot;y+=ia(me)*l[ee+1],C+=fa(me)*l[ee+1]}else v[oe]+=ne[oe]*l[ee+1]});for(var H=0;H<v.length;H++)if(s.charAt(H)==="h"){for(var I=Li(C/b[H],y/b[H])/Ot*180;I<0;)I+=360;for(;I>=360;)I-=360;v[H]=I}else v[H]=v[H]/b[H];return D/=p,new Ft(v,s).alpha(D>.99999?1:D,!0)},Ti=function(t,s){for(var l=t.length,p=[0,0,0,0],d=0;d<t.length;d++){var $=t[d],v=s[d]/l,b=$._rgb;p[0]+=Pt(b[0],2)*v,p[1]+=Pt(b[1],2)*v,p[2]+=Pt(b[2],2)*v,p[3]+=b[3]*v}return p[0]=zt(p[0]),p[1]=zt(p[1]),p[2]=zt(p[2]),p[3]>.9999999&&(p[3]=1),new Ft(Ci(p))},Pe=Y,kr=_.type,Ni=Math.pow,Bt=function(t){var s="rgb",l=Pe("#ccc"),p=0,d=[0,1],$=[],v=[0,0],b=!1,y=[],C=!1,T=0,B=1,D=!1,H={},I=!0,J=1,ee=function(E){if(E=E||["#fff","#000"],E&&kr(E)==="string"&&Pe.brewer&&Pe.brewer[E.toLowerCase()]&&(E=Pe.brewer[E.toLowerCase()]),kr(E)==="array"){E.length===1&&(E=[E[0],E[0]]),E=E.slice(0);for(var q=0;q<E.length;q++)E[q]=Pe(E[q]);$.length=0;for(var Q=0;Q<E.length;Q++)$.push(Q/(E.length-1))}return ye(),y=E},ne=function(E){if(b!=null){for(var q=b.length-1,Q=0;Q<q&&E>=b[Q];)Q++;return Q-1}return 0},oe=function(E){return E},me=function(E){return E},ve=function(E,q){var Q,K;if(q==null&&(q=!1),isNaN(E)||E===null)return l;if(q)K=E;else if(b&&b.length>2){var de=ne(E);K=de/(b.length-2)}else B!==T?K=(E-T)/(B-T):K=1;K=me(K),q||(K=oe(K)),J!==1&&(K=Ni(K,J)),K=v[0]+K*(1-v[0]-v[1]),K=Math.min(1,Math.max(0,K));var ce=Math.floor(K*1e4);if(I&&H[ce])Q=H[ce];else{if(kr(y)==="array")for(var ae=0;ae<$.length;ae++){var le=$[ae];if(K<=le){Q=y[ae];break}if(K>=le&&ae===$.length-1){Q=y[ae];break}if(K>le&&K<$[ae+1]){K=(K-le)/($[ae+1]-le),Q=Pe.interpolate(y[ae],y[ae+1],K,s);break}}else kr(y)==="function"&&(Q=y(K));I&&(H[ce]=Q)}return Q},ye=function(){return H={}};ee(t);var te=function(E){var q=Pe(ve(E));return C&&q[C]?q[C]():q};return te.classes=function(E){if(E!=null){if(kr(E)==="array")b=E,d=[E[0],E[E.length-1]];else{var q=Pe.analyze(d);E===0?b=[q.min,q.max]:b=Pe.limits(q,"e",E)}return te}return b},te.domain=function(E){if(!arguments.length)return d;T=E[0],B=E[E.length-1],$=[];var q=y.length;if(E.length===q&&T!==B)for(var Q=0,K=Array.from(E);Q<K.length;Q+=1){var de=K[Q];$.push((de-T)/(B-T))}else{for(var ce=0;ce<q;ce++)$.push(ce/(q-1));if(E.length>2){var ae=E.map(function(ie,fe){return fe/(E.length-1)}),le=E.map(function(ie){return(ie-T)/(B-T)});le.every(function(ie,fe){return ae[fe]===ie})||(me=function(ie){if(ie<=0||ie>=1)return ie;for(var fe=0;ie>=le[fe+1];)fe++;var Oe=(ie-le[fe])/(le[fe+1]-le[fe]),er=ae[fe]+Oe*(ae[fe+1]-ae[fe]);return er})}}return d=[T,B],te},te.mode=function(E){return arguments.length?(s=E,ye(),te):s},te.range=function(E,q){return ee(E),te},te.out=function(E){return C=E,te},te.spread=function(E){return arguments.length?(p=E,te):p},te.correctLightness=function(E){return E==null&&(E=!0),D=E,ye(),D?oe=function(q){for(var Q=ve(0,!0).lab()[0],K=ve(1,!0).lab()[0],de=Q>K,ce=ve(q,!0).lab()[0],ae=Q+(K-Q)*q,le=ce-ae,ie=0,fe=1,Oe=20;Math.abs(le)>.01&&Oe-- >0;)(function(){return de&&(le*=-1),le<0?(ie=q,q+=(fe-q)*.5):(fe=q,q+=(ie-q)*.5),ce=ve(q,!0).lab()[0],le=ce-ae})();return q}:oe=function(q){return q},te},te.padding=function(E){return E!=null?(kr(E)==="number"&&(E=[E,E]),v=E,te):v},te.colors=function(E,q){arguments.length<2&&(q="hex");var Q=[];if(arguments.length===0)Q=y.slice(0);else if(E===1)Q=[te(.5)];else if(E>1){var K=d[0],de=d[1]-K;Q=Ai(0,E,!1).map(function(fe){return te(K+fe/(E-1)*de)})}else{t=[];var ce=[];if(b&&b.length>2)for(var ae=1,le=b.length,ie=1<=le;ie?ae<le:ae>le;ie?ae++:ae--)ce.push((b[ae-1]+b[ae])*.5);else ce=d;Q=ce.map(function(fe){return te(fe)})}return Pe[q]&&(Q=Q.map(function(fe){return fe[q]()})),Q},te.cache=function(E){return E!=null?(I=E,te):I},te.gamma=function(E){return E!=null?(J=E,te):J},te.nodata=function(E){return E!=null?(l=Pe(E),te):l},te};function Ai(t,s,l){for(var p=[],d=t<s,$=l?d?s+1:s-1:s,v=t;d?v<$:v>$;d?v++:v--)p.push(v);return p}var Br=O,Di=Bt,Si=function(t){for(var s=[1,1],l=1;l<t;l++){for(var p=[1],d=1;d<=s.length;d++)p[d]=(s[d]||0)+s[d-1];s=p}return s},Ei=function(t){var s,l,p,d,$,v,b;if(t=t.map(function(D){return new Br(D)}),t.length===2)s=t.map(function(D){return D.lab()}),$=s[0],v=s[1],d=function(D){var H=[0,1,2].map(function(I){return $[I]+D*(v[I]-$[I])});return new Br(H,"lab")};else if(t.length===3)l=t.map(function(D){return D.lab()}),$=l[0],v=l[1],b=l[2],d=function(D){var H=[0,1,2].map(function(I){return(1-D)*(1-D)*$[I]+2*(1-D)*D*v[I]+D*D*b[I]});return new Br(H,"lab")};else if(t.length===4){var y;p=t.map(function(D){return D.lab()}),$=p[0],v=p[1],b=p[2],y=p[3],d=function(D){var H=[0,1,2].map(function(I){return(1-D)*(1-D)*(1-D)*$[I]+3*(1-D)*(1-D)*D*v[I]+3*(1-D)*D*D*b[I]+D*D*D*y[I]});return new Br(H,"lab")}}else if(t.length>=5){var C,T,B;C=t.map(function(D){return D.lab()}),B=t.length-1,T=Si(B),d=function(D){var H=1-D,I=[0,1,2].map(function(J){return C.reduce(function(ee,ne,oe){return ee+T[oe]*Math.pow(H,B-oe)*Math.pow(D,oe)*ne[J]},0)});return new Br(I,"lab")}}else throw new RangeError("No point in running bezier with only one color.");return d},xi=function(t){var s=Ei(t);return s.scale=function(){return Di(s)},s},Ut=Y,ze=function(t,s,l){if(!ze[l])throw new Error("unknown blend mode "+l);return ze[l](t,s)},Ke=function(t){return function(s,l){var p=Ut(l).rgb(),d=Ut(s).rgb();return Ut.rgb(t(p,d))}},Qe=function(t){return function(s,l){var p=[];return p[0]=t(s[0],l[0]),p[1]=t(s[1],l[1]),p[2]=t(s[2],l[2]),p}},Fi=function(t){return t},Pi=function(t,s){return t*s/255},zi=function(t,s){return t>s?s:t},Oi=function(t,s){return t>s?t:s},Bi=function(t,s){return 255*(1-(1-t/255)*(1-s/255))},Ui=function(t,s){return s<128?2*t*s/255:255*(1-2*(1-t/255)*(1-s/255))},Ii=function(t,s){return 255*(1-(1-s/255)/(t/255))},Ri=function(t,s){return t===255?255:(t=255*(s/255)/(1-t/255),t>255?255:t)};ze.normal=Ke(Qe(Fi)),ze.multiply=Ke(Qe(Pi)),ze.screen=Ke(Qe(Bi)),ze.overlay=Ke(Qe(Ui)),ze.darken=Ke(Qe(zi)),ze.lighten=Ke(Qe(Oi)),ze.dodge=Ke(Qe(Ri)),ze.burn=Ke(Qe(Ii));for(var Hi=ze,It=_.type,Gi=_.clip_rgb,qi=_.TWOPI,Vi=Math.pow,ji=Math.sin,Zi=Math.cos,ua=Y,Wi=function(t,s,l,p,d){t===void 0&&(t=300),s===void 0&&(s=-1.5),l===void 0&&(l=1),p===void 0&&(p=1),d===void 0&&(d=[0,1]);var $=0,v;It(d)==="array"?v=d[1]-d[0]:(v=0,d=[d,d]);var b=function(y){var C=qi*((t+120)/360+s*y),T=Vi(d[0]+v*y,p),B=$!==0?l[0]+y*$:l,D=B*T*(1-T)/2,H=Zi(C),I=ji(C),J=T+D*(-.14861*H+1.78277*I),ee=T+D*(-.29227*H-.90649*I),ne=T+D*(1.97294*H);return ua(Gi([J*255,ee*255,ne*255,1]))};return b.start=function(y){return y==null?t:(t=y,b)},b.rotations=function(y){return y==null?s:(s=y,b)},b.gamma=function(y){return y==null?p:(p=y,b)},b.hue=function(y){return y==null?l:(l=y,It(l)==="array"?($=l[1]-l[0],$===0&&(l=l[1])):$=0,b)},b.lightness=function(y){return y==null?d:(It(y)==="array"?(d=y,v=y[1]-y[0]):(d=[y,y],v=0),b)},b.scale=function(){return ua.scale(b)},b.hue(l),b},Xi=O,Yi="0123456789abcdef",Ji=Math.floor,Ki=Math.random,Qi=function(){for(var t="#",s=0;s<6;s++)t+=Yi.charAt(Ji(Ki()*16));return new Xi(t,"hex")},Rt=m,ca=Math.log,ef=Math.pow,rf=Math.floor,tf=Math.abs,pa=function(t,s){s===void 0&&(s=null);var l={min:Number.MAX_VALUE,max:Number.MAX_VALUE*-1,sum:0,values:[],count:0};return Rt(t)==="object"&&(t=Object.values(t)),t.forEach(function(p){s&&Rt(p)==="object"&&(p=p[s]),p!=null&&!isNaN(p)&&(l.values.push(p),l.sum+=p,p<l.min&&(l.min=p),p>l.max&&(l.max=p),l.count+=1)}),l.domain=[l.min,l.max],l.limits=function(p,d){return ha(l,p,d)},l},ha=function(t,s,l){s===void 0&&(s="equal"),l===void 0&&(l=7),Rt(t)=="array"&&(t=pa(t));var p=t.min,d=t.max,$=t.values.sort(function(Gt,qt){return Gt-qt});if(l===1)return[p,d];var v=[];if(s.substr(0,1)==="c"&&(v.push(p),v.push(d)),s.substr(0,1)==="e"){v.push(p);for(var b=1;b<l;b++)v.push(p+b/l*(d-p));v.push(d)}else if(s.substr(0,1)==="l"){if(p<=0)throw new Error("Logarithmic scales are only possible for values > 0");var y=Math.LOG10E*ca(p),C=Math.LOG10E*ca(d);v.push(p);for(var T=1;T<l;T++)v.push(ef(10,y+T/l*(C-y)));v.push(d)}else if(s.substr(0,1)==="q"){v.push(p);for(var B=1;B<l;B++){var D=($.length-1)*B/l,H=rf(D);if(H===D)v.push($[H]);else{var I=D-H;v.push($[H]*(1-I)+$[H+1]*I)}}v.push(d)}else if(s.substr(0,1)==="k"){var J,ee=$.length,ne=new Array(ee),oe=new Array(l),me=!0,ve=0,ye=null;ye=[],ye.push(p);for(var te=1;te<l;te++)ye.push(p+te/l*(d-p));for(ye.push(d);me;){for(var E=0;E<l;E++)oe[E]=0;for(var q=0;q<ee;q++)for(var Q=$[q],K=Number.MAX_VALUE,de=void 0,ce=0;ce<l;ce++){var ae=tf(ye[ce]-Q);ae<K&&(K=ae,de=ce),oe[de]++,ne[q]=de}for(var le=new Array(l),ie=0;ie<l;ie++)le[ie]=null;for(var fe=0;fe<ee;fe++)J=ne[fe],le[J]===null?le[J]=$[fe]:le[J]+=$[fe];for(var Oe=0;Oe<l;Oe++)le[Oe]*=1/oe[Oe];me=!1;for(var er=0;er<l;er++)if(le[er]!==ye[er]){me=!0;break}ye=le,ve++,ve>200&&(me=!1)}for(var rr={},Cr=0;Cr<l;Cr++)rr[Cr]=[];for(var Lr=0;Lr<ee;Lr++)J=ne[Lr],rr[J].push($[Lr]);for(var Ze=[],or=0;or<l;or++)Ze.push(rr[or][0]),Ze.push(rr[or][rr[or].length-1]);Ze=Ze.sort(function(Gt,qt){return Gt-qt}),v.push(Ze[0]);for(var Ur=1;Ur<Ze.length;Ur+=2){var sr=Ze[Ur];!isNaN(sr)&&v.indexOf(sr)===-1&&v.push(sr)}}return v},ga={analyze:pa,limits:ha},va=O,nf=function(t,s){t=new va(t),s=new va(s);var l=t.luminance(),p=s.luminance();return l>p?(l+.05)/(p+.05):(p+.05)/(l+.05)},ma=O,je=Math.sqrt,pe=Math.pow,af=Math.min,of=Math.max,da=Math.atan2,$a=Math.abs,st=Math.cos,ba=Math.sin,sf=Math.exp,_a=Math.PI,lf=function(t,s,l,p,d){l===void 0&&(l=1),p===void 0&&(p=1),d===void 0&&(d=1);var $=function(sr){return 360*sr/(2*_a)},v=function(sr){return 2*_a*sr/360};t=new ma(t),s=new ma(s);var b=Array.from(t.lab()),y=b[0],C=b[1],T=b[2],B=Array.from(s.lab()),D=B[0],H=B[1],I=B[2],J=(y+D)/2,ee=je(pe(C,2)+pe(T,2)),ne=je(pe(H,2)+pe(I,2)),oe=(ee+ne)/2,me=.5*(1-je(pe(oe,7)/(pe(oe,7)+pe(25,7)))),ve=C*(1+me),ye=H*(1+me),te=je(pe(ve,2)+pe(T,2)),E=je(pe(ye,2)+pe(I,2)),q=(te+E)/2,Q=$(da(T,ve)),K=$(da(I,ye)),de=Q>=0?Q:Q+360,ce=K>=0?K:K+360,ae=$a(de-ce)>180?(de+ce+360)/2:(de+ce)/2,le=1-.17*st(v(ae-30))+.24*st(v(2*ae))+.32*st(v(3*ae+6))-.2*st(v(4*ae-63)),ie=ce-de;ie=$a(ie)<=180?ie:ce<=de?ie+360:ie-360,ie=2*je(te*E)*ba(v(ie)/2);var fe=D-y,Oe=E-te,er=1+.015*pe(J-50,2)/je(20+pe(J-50,2)),rr=1+.045*q,Cr=1+.015*q*le,Lr=30*sf(-pe((ae-275)/25,2)),Ze=2*je(pe(q,7)/(pe(q,7)+pe(25,7))),or=-Ze*ba(2*v(Lr)),Ur=je(pe(fe/(l*er),2)+pe(Oe/(p*rr),2)+pe(ie/(d*Cr),2)+or*(Oe/(p*rr))*(ie/(d*Cr)));return of(0,af(100,Ur))},ya=O,ff=function(t,s,l){l===void 0&&(l="lab"),t=new ya(t),s=new ya(s);var p=t.get(l),d=s.get(l),$=0;for(var v in p){var b=(p[v]||0)-(d[v]||0);$+=b*b}return Math.sqrt($)},uf=O,cf=function(){for(var t=[],s=arguments.length;s--;)t[s]=arguments[s];try{return new(Function.prototype.bind.apply(uf,[null].concat(t))),!0}catch{return!1}},wa=Y,ka=Bt,pf={cool:function(){return ka([wa.hsl(180,1,.9),wa.hsl(250,.7,.4)])},hot:function(){return ka(["#000","#f00","#ff0","#fff"]).mode("rgb")}},lt={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},Ht=0,Ca=Object.keys(lt);Ht<Ca.length;Ht+=1){var La=Ca[Ht];lt[La.toLowerCase()]=lt[La]}var hf=lt,ge=Y;ge.average=Mi,ge.bezier=xi,ge.blend=Hi,ge.cubehelix=Wi,ge.mix=ge.interpolate=ra,ge.random=Qi,ge.scale=Bt,ge.analyze=ga.analyze,ge.contrast=nf,ge.deltaE=lf,ge.distance=ff,ge.limits=ga.limits,ge.valid=cf,ge.scales=pf,ge.colors=On,ge.brewer=hf;var gf=ge;return gf})})(Za);var Bf=Za.exports;const Uf=mf(Bf);function Da(o,e,n){const r=o.slice();return r[10]=e[n],r}function If(o){let e;return{c(){e=R("Census OA")},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function Rf(o){let e;return{c(){e=re("p"),e.textContent="TODO!"},m(n,r){N(n,e,r)},p:cr,d(n){n&&A(e)}}}function Hf(o){let e,n,r;return n=new gr({props:{$$slots:{default:[Rf]},$$scope:{ctx:o}}}),{c(){e=re("span"),x(n.$$.fragment),be(e,"slot","right")},m(a,f){N(a,e,f),F(n,e,null),r=!0},p(a,f){const u={};f&8192&&(u.$$scope={dirty:f,ctx:a}),n.$set(u)},i(a){r||(M(n.$$.fragment,a),r=!0)},o(a){S(n.$$.fragment,a),r=!1},d(a){a&&A(e),P(n)}}}function Sa(o){let e,n,r,a,f,u=it(o[2]),g=[];for(let c=0;c<u.length;c+=1)g[c]=Ea(Da(o,u,c));const i=c=>S(g[c],1,1,()=>{g[c]=null});function m(c){o[7](c)}let h={label:"OA color by",id:"colorBy",choices:[["Pcnt HH With Car Bands","Percent of households with a car"],["Avg Cars per HH Bands","Average cars per household"],["pop_density_deciles","Population density"]]};return o[1]!==void 0&&(h.value=o[1]),r=new ut({props:h}),Ae.push(()=>De(r,"value",m)),r.$on("change",o[4]),{c(){e=re("div");for(let c=0;c<g.length;c+=1)g[c].c();n=W(),x(r.$$.fragment)},m(c,w){N(c,e,w);for(let k=0;k<g.length;k+=1)g[k]&&g[k].m(e,null);N(c,n,w),F(r,c,w),f=!0},p(c,w){if(w&4){u=it(c[2]);let L;for(L=0;L<u.length;L+=1){const _=Da(c,u,L);g[L]?(g[L].p(_,w),M(g[L],1)):(g[L]=Ea(_),g[L].c(),M(g[L],1),g[L].m(e,null))}for(ir(),L=u.length;L<g.length;L+=1)i(L);fr()}const k={};!a&&w&2&&(a=!0,k.value=c[1],Se(()=>a=!1)),r.$set(k)},i(c){if(!f){for(let w=0;w<u.length;w+=1)M(g[w]);M(r.$$.fragment,c),f=!0}},o(c){g=g.filter(Boolean);for(let w=0;w<g.length;w+=1)S(g[w]);S(r.$$.fragment,c),f=!1},d(c){c&&(A(e),A(n)),Ha(g,c),P(r,c)}}}function Ea(o){let e,n;return e=new hr({props:{color:o[10]}}),{c(){x(e.$$.fragment)},m(r,a){F(e,r,a),n=!0},p:cr,i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){P(e,r)}}}function Gf(o){let e,n,r,a,f,u;function g(h){o[6](h)}let i={id:Ie,$$slots:{right:[Hf],default:[If]},$$scope:{ctx:o}};o[0]!==void 0&&(i.checked=o[0]),e=new pr({props:i}),Ae.push(()=>De(e,"checked",g));let m=o[0]&&Sa(o);return f=new Ge({props:{layer:Ie,tooltip:o[3],show:o[0]}}),f.$on("click",qf),{c(){x(e.$$.fragment),r=W(),m&&m.c(),a=W(),x(f.$$.fragment)},m(h,c){F(e,h,c),N(h,r,c),m&&m.m(h,c),N(h,a,c),F(f,h,c),u=!0},p(h,[c]){const w={};c&8192&&(w.$$scope={dirty:c,ctx:h}),!n&&c&1&&(n=!0,w.checked=h[0],Se(()=>n=!1)),e.$set(w),h[0]?m?(m.p(h,c),c&1&&M(m,1)):(m=Sa(h),m.c(),M(m,1),m.m(a.parentNode,a)):m&&(ir(),S(m,1,1,()=>{m=null}),fr());const k={};c&1&&(k.show=h[0]),f.$set(k)},i(h){u||(M(e.$$.fragment,h),M(m),M(f.$$.fragment,h),u=!0)},o(h){S(e.$$.fragment,h),S(m),S(f.$$.fragment,h),u=!1},d(h){h&&(A(r),A(a)),P(e,h),m&&m.d(h),P(f,h)}}}let Ie="census_oa";function qf(o){window.alert(JSON.stringify(o.detail.properties,"  ",null))}function Vf(o,e,n){let r;Ee(o,qe,k=>n(5,r=k));let a=`${Ie}-outline`,f=Uf.scale(["rgba(222,235,247,1)","rgba(49,130,189,1)"]).mode("lch").colors(10),u="Pcnt HH With Car Bands";Gr(r,Ie,`https://atip.uk/layers/v1/${Ie}.pmtiles`),Dr(r,{id:Ie,source:Ie,sourceLayer:Ie,color:m(),opacity:ur(.5,.9)}),Sr(r,{id:a,source:Ie,sourceLayer:Ie,color:"black",width:.5});let g=!1;function i(k){let L={"Pcnt HH With Car Bands":"Pcnt HH With Car","Avg Cars per HH Bands":"Avg Cars per HH",pop_density_deciles:"pop_density"}[u];return`<p>${k.properties[L]}</p>`}function m(){let k=["step",["get",u]];for(let L=0;L<10;L++)k.push(f[L]),k.push(L);return k.push("red"),console.log(k),k}function h(){r.setPaintProperty(Ie,"fill-color",m())}function c(k){g=k,n(0,g)}function w(k){u=k,n(1,u)}return o.$$.update=()=>{o.$$.dirty&33&&r.getLayer(a)&&r.setLayoutProperty(a,"visibility",g?"visible":"none")},[g,u,f,i,h,r,c,w]}class jf extends ke{constructor(e){super(),Ce(this,e,Vf,Gf,Le,{})}}const xe={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"};function Zf(o){let e,n,r;return e=new hr({props:{color:o[1]}}),{c(){x(e.$$.fragment),n=R(`
  Combined authorities`)},m(a,f){F(e,a,f),N(a,n,f),r=!0},p:cr,i(a){r||(M(e.$$.fragment,a),r=!0)},o(a){S(e.$$.fragment,a),r=!1},d(a){a&&A(n),P(e,a)}}}function Wf(o){let e;return{c(){e=R(`ONS Geography
        `)},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function Xf(o){let e;return{c(){e=R(`Open Government License
        `)},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function Yf(o){let e,n,r,a,f,u,g,i,m,h;return r=new we({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Wf]},$$scope:{ctx:o}}}),i=new we({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Xf]},$$scope:{ctx:o}}}),{c(){e=re("p"),n=R("Data from "),x(r.$$.fragment),a=R(", as of December 2022."),f=W(),u=re("p"),g=R("License: "),x(i.$$.fragment),m=R(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(c,w){N(c,e,w),V(e,n),F(r,e,null),V(e,a),N(c,f,w),N(c,u,w),V(u,g),F(i,u,null),V(u,m),h=!0},p(c,w){const k={};w&32&&(k.$$scope={dirty:w,ctx:c}),r.$set(k);const L={};w&32&&(L.$$scope={dirty:w,ctx:c}),i.$set(L)},i(c){h||(M(r.$$.fragment,c),M(i.$$.fragment,c),h=!0)},o(c){S(r.$$.fragment,c),S(i.$$.fragment,c),h=!1},d(c){c&&(A(e),A(f),A(u)),P(r),P(i)}}}function Jf(o){let e,n,r;return n=new gr({props:{$$slots:{default:[Yf]},$$scope:{ctx:o}}}),{c(){e=re("span"),x(n.$$.fragment),be(e,"slot","right")},m(a,f){N(a,e,f),F(n,e,null),r=!0},p(a,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:a}),n.$set(u)},i(a){r||(M(n.$$.fragment,a),r=!0)},o(a){S(n.$$.fragment,a),r=!1},d(a){a&&A(e),P(n)}}}function Kf(o){let e,n,r,a,f;function u(i){o[3](i)}let g={id:tr,$$slots:{right:[Jf],default:[Zf]},$$scope:{ctx:o}};return o[0]!==void 0&&(g.checked=o[0]),e=new pr({props:g}),Ae.push(()=>De(e,"checked",u)),a=new Ge({props:{layer:tr,tooltip:Qf,show:o[0]}}),a.$on("click",eu),{c(){x(e.$$.fragment),r=W(),x(a.$$.fragment)},m(i,m){F(e,i,m),N(i,r,m),F(a,i,m),f=!0},p(i,[m]){const h={};m&32&&(h.$$scope={dirty:m,ctx:i}),!n&&m&1&&(n=!0,h.checked=i[0],Se(()=>n=!1)),e.$set(h);const c={};m&1&&(c.show=i[0]),a.$set(c)},i(i){f||(M(e.$$.fragment,i),M(a.$$.fragment,i),f=!0)},o(i){S(e.$$.fragment,i),S(a.$$.fragment,i),f=!1},d(i){i&&A(r),P(e,i),P(a,i)}}}let tr="combined_authorities";function Qf(o){return`<p>${o.properties.name}</p>`}function eu(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.properties.CAUTH22CD}`,"_blank")}function ru(o,e,n){let r;Ee(o,qe,i=>n(2,r=i));let a=xe.combined_authorities,f=`${tr}-outline`;Ga(r,tr,`https://atip.uk/layers/v1/${tr}.geojson`),Dr(r,{id:tr,source:tr,color:a,opacity:ur(.5,.1)}),Sr(r,{id:f,source:tr,color:a,width:2.5});let u=!1;function g(i){u=i,n(0,u)}return o.$$.update=()=>{o.$$.dirty&5&&r.getLayer(f)&&r.setLayoutProperty(f,"visibility",u?"visible":"none")},[u,a,r,g]}class tu extends ke{constructor(e){super(),Ce(this,e,ru,Kf,Le,{})}}function nu(o){let e=new Map;for(let[r,a]of Object.entries(o.schemes))e.set(r,{scheme_reference:r,num_features:0,authority_or_region:a.authority_or_region,capital_scheme_id:a.capital_scheme_id,funding_programme:a.funding_programme});let n=1;for(let r of o.features){let a=e.get(r.properties.scheme_reference);a.num_features++,r.properties.funding_programme=a.funding_programme,r.id=n++}return e}function au(o){let e;return{c(){e=R("Clear")},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function ou(o){let e,n,r,a,f,u;return r=new ft({props:{$$slots:{default:[au]},$$scope:{ctx:o}}}),r.$on("click",o[11]),{c(){e=re("input"),n=W(),x(r.$$.fragment),be(e,"type","text"),be(e,"class","govuk-input govuk-input--width-10"),be(e,"id","filterText")},m(g,i){N(g,e,i),Ma(e,o[0]),N(g,n,i),F(r,g,i),a=!0,f||(u=$f(e,"input",o[10]),f=!0)},p(g,i){i&1&&e.value!==g[0]&&Ma(e,g[0]);const m={};i&16384&&(m.$$scope={dirty:i,ctx:g}),r.$set(m)},i(g){a||(M(r.$$.fragment,g),a=!0)},o(g){S(r.$$.fragment,g),a=!1},d(g){g&&(A(e),A(n)),P(r,g),f=!1,u()}}}function su(o){let e,n,r,a,f,u,g,i;function m(k){o[8](k)}let h={label:"Authority or region",id:"filterAuthority",choices:o[4],emptyOption:!0};o[2]!==void 0&&(h.value=o[2]),e=new ut({props:h}),Ae.push(()=>De(e,"value",m));function c(k){o[9](k)}let w={label:"Funding programme",id:"filterFundingProgramme",choices:o[5],emptyOption:!0};return o[3]!==void 0&&(w.value=o[3]),a=new ut({props:w}),Ae.push(()=>De(a,"value",c)),g=new df({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[ou]},$$scope:{ctx:o}}}),{c(){x(e.$$.fragment),r=W(),x(a.$$.fragment),u=W(),x(g.$$.fragment)},m(k,L){F(e,k,L),N(k,r,L),F(a,k,L),N(k,u,L),F(g,k,L),i=!0},p(k,L){const _={};L&16&&(_.choices=k[4]),!n&&L&4&&(n=!0,_.value=k[2],Se(()=>n=!1)),e.$set(_);const z={};L&32&&(z.choices=k[5]),!f&&L&8&&(f=!0,z.value=k[3],Se(()=>f=!1)),a.$set(z);const U={};L&16385&&(U.$$scope={dirty:L,ctx:k}),g.$set(U)},i(k){i||(M(e.$$.fragment,k),M(a.$$.fragment,k),M(g.$$.fragment,k),i=!0)},o(k){S(e.$$.fragment,k),S(a.$$.fragment,k),S(g.$$.fragment,k),i=!1},d(k){k&&(A(r),A(u)),P(e,k),P(a,k),P(g,k)}}}function lu(o){let e,n,r,a,f=o[1].size+"",u,g,i=o[6].route+"",m,h,c=o[6].area+"",w,k,L=o[6].crossing+"",_,z,U=o[6].other+"",G,j,X;return e=new Yt({props:{label:"Filters",$$slots:{default:[su]},$$scope:{ctx:o}}}),{c(){x(e.$$.fragment),n=W(),r=re("p"),a=R("Showing "),u=R(f),g=R(" schemes ("),m=R(i),h=R(" routes, "),w=R(c),k=R(` areas,
  `),_=R(L),z=R(" crossings, "),G=R(U),j=R(" other)")},m(Z,O){F(e,Z,O),N(Z,n,O),N(Z,r,O),V(r,a),V(r,u),V(r,g),V(r,m),V(r,h),V(r,w),V(r,k),V(r,_),V(r,z),V(r,G),V(r,j),X=!0},p(Z,[O]){const ue={};O&16445&&(ue.$$scope={dirty:O,ctx:Z}),e.$set(ue),(!X||O&2)&&f!==(f=Z[1].size+"")&&Xe(u,f),(!X||O&64)&&i!==(i=Z[6].route+"")&&Xe(m,i),(!X||O&64)&&c!==(c=Z[6].area+"")&&Xe(w,c),(!X||O&64)&&L!==(L=Z[6].crossing+"")&&Xe(_,L),(!X||O&64)&&U!==(U=Z[6].other+"")&&Xe(G,U)},i(Z){X||(M(e.$$.fragment,Z),X=!0)},o(Z){S(e.$$.fragment,Z),X=!1},d(Z){Z&&(A(n),A(r)),P(e,Z)}}}function iu(o,e,n){let r;Ee(o,Ar,U=>n(12,r=U));let{schemes:a}=e,{schemesToBeShown:f=new Set}=e,{filterText:u=""}=e,g=[],i="",m=[],h="",c={area:0,route:0,crossing:0,other:0};Xt(()=>{let U=new Set,G=new Set;for(let j of a.values())j.authority_or_region&&U.add(j.authority_or_region),j.funding_programme&&G.add(j.funding_programme);n(4,g=Array.from(U.entries())),g.sort(),n(5,m=Array.from(G.entries())),m.sort()});function w(U,G,j){let X=U.toLowerCase(),Z=ue=>{var Y,Fe;if(X&&!((Y=ue.properties.name)!=null&&Y.toLowerCase().includes(X))&&!((Fe=ue.properties.description)!=null&&Fe.toLowerCase().includes(X)))return!1;if(G||j){let he=a.get(ue.properties.scheme_reference);if(G&&he.authority_or_region!=G||j&&he.funding_programme!=j)return!1}return!0};n(1,f=new Set(r.features.filter(Z).map(ue=>ue.properties.scheme_reference))),n(6,c={area:0,route:0,crossing:0,other:0});let O=ue=>{var Y,Fe;return!(!f.has(ue.properties.scheme_reference)||X&&!((Y=ue.properties.name)!=null&&Y.toLowerCase().includes(X))&&!((Fe=ue.properties.description)!=null&&Fe.toLowerCase().includes(X)))};Ar.update(ue=>{for(let Y of ue.features)O(Y)?(delete Y.properties.hide_while_editing,n(6,c[Y.properties.intervention_type]++,c)):Y.properties.hide_while_editing=!0;return ue}),n(6,c)}function k(U){i=U,n(2,i)}function L(U){h=U,n(3,h)}function _(){u=this.value,n(0,u)}const z=()=>n(0,u="");return o.$$set=U=>{"schemes"in U&&n(7,a=U.schemes),"schemesToBeShown"in U&&n(1,f=U.schemesToBeShown),"filterText"in U&&n(0,u=U.filterText)},o.$$.update=()=>{o.$$.dirty&13&&w(u,i,h)},[u,f,i,h,g,m,c,a,k,L,_,z]}class fu extends ke{constructor(e){super(),Ce(this,e,iu,lu,Le,{schemes:7,schemesToBeShown:1,filterText:0})}}function uu(o){let e,n,r,a;return e=new hr({props:{color:o[3]}}),{c(){x(e.$$.fragment),n=W(),r=R(o[1])},m(f,u){F(e,f,u),N(f,n,u),N(f,r,u),a=!0},p(f,u){(!a||u&2)&&Xe(r,f[1])},i(f){a||(M(e.$$.fragment,f),a=!0)},o(f){S(e.$$.fragment,f),a=!1},d(f){f&&(A(n),A(r)),P(e,f)}}}function cu(o){let e;const n=o[6].default,r=bf(n,o,o[8],null);return{c(){r&&r.c()},m(a,f){r&&r.m(a,f),e=!0},p(a,f){r&&r.p&&(!e||f&256)&&_f(r,n,a,a[8],e?wf(n,a[8],f,null):yf(a[8]),null)},i(a){e||(M(r,a),e=!0)},o(a){S(r,a),e=!1},d(a){r&&r.d(a)}}}function pu(o){let e,n,r;return n=new gr({props:{$$slots:{default:[cu]},$$scope:{ctx:o}}}),{c(){e=re("span"),x(n.$$.fragment),be(e,"slot","right")},m(a,f){N(a,e,f),F(n,e,null),r=!0},p(a,f){const u={};f&256&&(u.$$scope={dirty:f,ctx:a}),n.$set(u)},i(a){r||(M(n.$$.fragment,a),r=!0)},o(a){S(n.$$.fragment,a),r=!1},d(a){a&&A(e),P(n)}}}function hu(o){let e,n,r,a,f;function u(i){o[7](i)}let g={id:o[0],$$slots:{right:[pu],default:[uu]},$$scope:{ctx:o}};return o[2]!==void 0&&(g.checked=o[2]),e=new pr({props:g}),Ae.push(()=>De(e,"checked",u)),a=new Ge({props:{layer:o[0],tooltip:o[4],show:o[2]}}),{c(){x(e.$$.fragment),r=W(),x(a.$$.fragment)},m(i,m){F(e,i,m),N(i,r,m),F(a,i,m),f=!0},p(i,[m]){const h={};m&1&&(h.id=i[0]),m&258&&(h.$$scope={dirty:m,ctx:i}),!n&&m&4&&(n=!0,h.checked=i[2],Se(()=>n=!1)),e.$set(h);const c={};m&1&&(c.layer=i[0]),m&4&&(c.show=i[2]),a.$set(c)},i(i){f||(M(e.$$.fragment,i),M(a.$$.fragment,i),f=!0)},o(i){S(e.$$.fragment,i),S(a.$$.fragment,i),f=!1},d(i){i&&A(r),P(e,i),P(a,i)}}}function gu(o,e,n){let r;Ee(o,qe,k=>n(9,r=k));let{$$slots:a={},$$scope:f}=e,{name:u}=e,{singularNoun:g}=e,{pluralNoun:i}=e,m=xe[u];Gr(r,u,`https://atip.uk/layers/v1/${u}.pmtiles`),Dr(r,{id:u,source:u,sourceLayer:u,color:m,opacity:ur(1,.7)});let h=!1;function c(k){return`<p>${k.properties.name??`Unnamed ${g}`}</p>`}function w(k){h=k,n(2,h)}return o.$$set=k=>{"name"in k&&n(0,u=k.name),"singularNoun"in k&&n(5,g=k.singularNoun),"pluralNoun"in k&&n(1,i=k.pluralNoun),"$$scope"in k&&n(8,f=k.$$scope)},[u,i,h,m,c,g,a,w,f]}class Wa extends ke{constructor(e){super(),Ce(this,e,gu,hu,Le,{name:0,singularNoun:5,pluralNoun:1})}}function vu(o){let e;return{c(){e=R("hospital")},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function mu(o){let e;return{c(){e=R("Open Data Commons Open Database License")},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function du(o){let e,n,r,a,f,u,g,i,m;return r=new we({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[vu]},$$scope:{ctx:o}}}),i=new we({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[mu]},$$scope:{ctx:o}}}),{c(){e=re("p"),n=R("This shows "),x(r.$$.fragment),a=R(` data from OpenStreetMap. It doesn't include outpatient clinics
    or individual doctor's offices.`),f=W(),u=re("p"),g=R("License: "),x(i.$$.fragment)},m(h,c){N(h,e,c),V(e,n),F(r,e,null),V(e,a),N(h,f,c),N(h,u,c),V(u,g),F(i,u,null),m=!0},p(h,c){const w={};c&1&&(w.$$scope={dirty:c,ctx:h}),r.$set(w);const k={};c&1&&(k.$$scope={dirty:c,ctx:h}),i.$set(k)},i(h){m||(M(r.$$.fragment,h),M(i.$$.fragment,h),m=!0)},o(h){S(r.$$.fragment,h),S(i.$$.fragment,h),m=!1},d(h){h&&(A(e),A(f),A(u)),P(r),P(i)}}}function $u(o){let e,n;return e=new Wa({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[du]},$$scope:{ctx:o}}}),{c(){x(e.$$.fragment)},m(r,a){F(e,r,a),n=!0},p(r,[a]){const f={};a&1&&(f.$$scope={dirty:a,ctx:r}),e.$set(f)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){P(e,r)}}}class bu extends ke{constructor(e){super(),Ce(this,e,null,$u,Le,{})}}function _u(o){let e,n,r,a,f;function u(i){o[3](i)}let g={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return o[0]!==void 0&&(g.value=o[0]),e=new ut({props:g}),Ae.push(()=>De(e,"value",u)),e.$on("change",o[2]),a=new Sf({props:{rows:o[1]}}),{c(){x(e.$$.fragment),r=W(),x(a.$$.fragment)},m(i,m){F(e,i,m),N(i,r,m),F(a,i,m),f=!0},p(i,[m]){const h={};!n&&m&1&&(n=!0,h.value=i[0],Se(()=>n=!1)),e.$set(h);const c={};m&2&&(c.rows=i[1]),a.$set(c)},i(i){f||(M(e.$$.fragment,i),M(a.$$.fragment,i),f=!0)},o(i){S(e.$$.fragment,i),S(a.$$.fragment,i),f=!1},d(i){i&&A(r),P(e,i),P(a,i)}}}function yu(o,e,n){let r;Ee(o,qe,i=>n(4,r=i));let a="interventionType",f=Aa("v1");function u(){let i;a=="interventionType"?(i=ja("v1"),n(1,f=Aa("v1"))):(i=kf(["get","funding_programme"],{ATF2:xe.atf2,ATF3:xe.atf3,ATF4:xe.atf4},"grey"),n(1,f=[["ATF2",xe.atf2],["ATF3",xe.atf3],["ATF4",xe.atf4]])),r.setPaintProperty("interventions-points","circle-color",i),r.setPaintProperty("interventions-lines","line-color",i),r.setPaintProperty("interventions-polygons","fill-color",i),r.setPaintProperty("interventions-polygon-outlines","line-color",i)}function g(i){a=i,n(0,a)}return[a,f,u,g]}class wu extends ke{constructor(e){super(),Ce(this,e,yu,_u,Le,{})}}function ku(o){let e,n,r;return e=new hr({props:{color:o[1]}}),{c(){x(e.$$.fragment),n=R(`
  Local Authority Districts`)},m(a,f){F(e,a,f),N(a,n,f),r=!0},p:cr,i(a){r||(M(e.$$.fragment,a),r=!0)},o(a){S(e.$$.fragment,a),r=!1},d(a){a&&A(n),P(e,a)}}}function Cu(o){let e;return{c(){e=R(`ONS Geography
        `)},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function Lu(o){let e;return{c(){e=R(`Open Government License
        `)},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function Mu(o){let e,n,r,a,f,u,g,i,m,h;return r=new we({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Cu]},$$scope:{ctx:o}}}),i=new we({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Lu]},$$scope:{ctx:o}}}),{c(){e=re("p"),n=R("Data from "),x(r.$$.fragment),a=R(", as of May 2023."),f=W(),u=re("p"),g=R("License: "),x(i.$$.fragment),m=R(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(c,w){N(c,e,w),V(e,n),F(r,e,null),V(e,a),N(c,f,w),N(c,u,w),V(u,g),F(i,u,null),V(u,m),h=!0},p(c,w){const k={};w&32&&(k.$$scope={dirty:w,ctx:c}),r.$set(k);const L={};w&32&&(L.$$scope={dirty:w,ctx:c}),i.$set(L)},i(c){h||(M(r.$$.fragment,c),M(i.$$.fragment,c),h=!0)},o(c){S(r.$$.fragment,c),S(i.$$.fragment,c),h=!1},d(c){c&&(A(e),A(f),A(u)),P(r),P(i)}}}function Tu(o){let e,n,r;return n=new gr({props:{$$slots:{default:[Mu]},$$scope:{ctx:o}}}),{c(){e=re("span"),x(n.$$.fragment),be(e,"slot","right")},m(a,f){N(a,e,f),F(n,e,null),r=!0},p(a,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:a}),n.$set(u)},i(a){r||(M(n.$$.fragment,a),r=!0)},o(a){S(n.$$.fragment,a),r=!1},d(a){a&&A(e),P(n)}}}function Nu(o){let e,n,r,a,f;function u(i){o[3](i)}let g={id:nr,$$slots:{right:[Tu],default:[ku]},$$scope:{ctx:o}};return o[0]!==void 0&&(g.checked=o[0]),e=new pr({props:g}),Ae.push(()=>De(e,"checked",u)),a=new Ge({props:{layer:nr,tooltip:Au,show:o[0]}}),a.$on("click",Du),{c(){x(e.$$.fragment),r=W(),x(a.$$.fragment)},m(i,m){F(e,i,m),N(i,r,m),F(a,i,m),f=!0},p(i,[m]){const h={};m&32&&(h.$$scope={dirty:m,ctx:i}),!n&&m&1&&(n=!0,h.checked=i[0],Se(()=>n=!1)),e.$set(h);const c={};m&1&&(c.show=i[0]),a.$set(c)},i(i){f||(M(e.$$.fragment,i),M(a.$$.fragment,i),f=!0)},o(i){S(e.$$.fragment,i),S(a.$$.fragment,i),f=!1},d(i){i&&A(r),P(e,i),P(a,i)}}}let nr="local_authority_districts";function Au(o){return`<p>${o.properties.name}</p>`}function Du(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.properties.LAD23CD}`,"_blank")}function Su(o,e,n){let r;Ee(o,qe,i=>n(2,r=i));let a=xe.local_authority_districts,f=`${nr}-outline`;Ga(r,nr,`https://atip.uk/layers/v1/${nr}.geojson`),Dr(r,{id:nr,source:nr,color:a,opacity:ur(.5,.1)}),Sr(r,{id:f,source:nr,color:a,width:2.5});let u=!1;function g(i){u=i,n(0,u)}return o.$$.update=()=>{o.$$.dirty&5&&r.getLayer(f)&&r.setLayoutProperty(f,"visibility",u?"visible":"none")},[u,a,r,g]}class Eu extends ke{constructor(e){super(),Ce(this,e,Su,Nu,Le,{})}}function xu(o){let e,n,r;return e=new hr({props:{color:o[1]}}),{c(){x(e.$$.fragment),n=R(`
  MRN`)},m(a,f){F(e,a,f),N(a,n,f),r=!0},p:cr,i(a){r||(M(e.$$.fragment,a),r=!0)},o(a){S(e.$$.fragment,a),r=!1},d(a){a&&A(n),P(e,a)}}}function Fu(o){let e;return{c(){e=R(`Major Road Network
        `)},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function Pu(o){let e;return{c(){e=R("Open Government License")},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function zu(o){let e,n,r,a,f,u,g,i,m;return r=new we({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Fu]},$$scope:{ctx:o}}}),i=new we({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Pu]},$$scope:{ctx:o}}}),{c(){e=re("p"),n=R("Data from the "),x(r.$$.fragment),a=R("."),f=W(),u=re("p"),g=R("License: "),x(i.$$.fragment)},m(h,c){N(h,e,c),V(e,n),F(r,e,null),V(e,a),N(h,f,c),N(h,u,c),V(u,g),F(i,u,null),m=!0},p(h,c){const w={};c&16&&(w.$$scope={dirty:c,ctx:h}),r.$set(w);const k={};c&16&&(k.$$scope={dirty:c,ctx:h}),i.$set(k)},i(h){m||(M(r.$$.fragment,h),M(i.$$.fragment,h),m=!0)},o(h){S(r.$$.fragment,h),S(i.$$.fragment,h),m=!1},d(h){h&&(A(e),A(f),A(u)),P(r),P(i)}}}function Ou(o){let e,n,r;return n=new gr({props:{$$slots:{default:[zu]},$$scope:{ctx:o}}}),{c(){e=re("span"),x(n.$$.fragment),be(e,"slot","right")},m(a,f){N(a,e,f),F(n,e,null),r=!0},p(a,f){const u={};f&16&&(u.$$scope={dirty:f,ctx:a}),n.$set(u)},i(a){r||(M(n.$$.fragment,a),r=!0)},o(a){S(n.$$.fragment,a),r=!1},d(a){a&&A(e),P(n)}}}function Bu(o){let e,n,r,a,f;function u(i){o[2](i)}let g={id:lr,$$slots:{right:[Ou],default:[xu]},$$scope:{ctx:o}};return o[0]!==void 0&&(g.checked=o[0]),e=new pr({props:g}),Ae.push(()=>De(e,"checked",u)),a=new Ge({props:{layer:lr,tooltip:Uu,show:o[0]}}),{c(){x(e.$$.fragment),r=W(),x(a.$$.fragment)},m(i,m){F(e,i,m),N(i,r,m),F(a,i,m),f=!0},p(i,[m]){const h={};m&16&&(h.$$scope={dirty:m,ctx:i}),!n&&m&1&&(n=!0,h.checked=i[0],Se(()=>n=!1)),e.$set(h);const c={};m&1&&(c.show=i[0]),a.$set(c)},i(i){f||(M(e.$$.fragment,i),M(a.$$.fragment,i),f=!0)},o(i){S(e.$$.fragment,i),S(a.$$.fragment,i),f=!1},d(i){i&&A(r),P(e,i),P(a,i)}}}let lr="mrn";function Uu(o){return`<p>${o.properties.name??"Unknown MRN road"}</p>`}function Iu(o,e,n){let r;Ee(o,qe,g=>n(3,r=g));let a=xe.mrn;Gr(r,lr,`https://atip.uk/layers/v1/${lr}.pmtiles`),Sr(r,{id:lr,source:lr,sourceLayer:lr,color:a,width:7,opacity:ur(.5,1)});let f=!1;function u(g){f=g,n(0,f)}return[f,a,u]}class Ru extends ke{constructor(e){super(),Ce(this,e,Iu,Bu,Le,{})}}function Hu(o){let e,n,r;return e=new hr({props:{color:o[1]}}),{c(){x(e.$$.fragment),n=R(`
  Parliamentary constituencies`)},m(a,f){F(e,a,f),N(a,n,f),r=!0},p:cr,i(a){r||(M(e.$$.fragment,a),r=!0)},o(a){S(e.$$.fragment,a),r=!1},d(a){a&&A(n),P(e,a)}}}function Gu(o){let e;return{c(){e=R(`Ordnance Survey Boundary-Line
        `)},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function qu(o){let e;return{c(){e=R("Open Government License")},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function Vu(o){let e,n,r,a,f,u,g,i,m;return r=new we({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Gu]},$$scope:{ctx:o}}}),i=new we({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[qu]},$$scope:{ctx:o}}}),{c(){e=re("p"),n=R("Data from "),x(r.$$.fragment),a=R("."),f=W(),u=re("p"),g=R("License: "),x(i.$$.fragment)},m(h,c){N(h,e,c),V(e,n),F(r,e,null),V(e,a),N(h,f,c),N(h,u,c),V(u,g),F(i,u,null),m=!0},p(h,c){const w={};c&32&&(w.$$scope={dirty:c,ctx:h}),r.$set(w);const k={};c&32&&(k.$$scope={dirty:c,ctx:h}),i.$set(k)},i(h){m||(M(r.$$.fragment,h),M(i.$$.fragment,h),m=!0)},o(h){S(r.$$.fragment,h),S(i.$$.fragment,h),m=!1},d(h){h&&(A(e),A(f),A(u)),P(r),P(i)}}}function ju(o){let e,n,r;return n=new gr({props:{$$slots:{default:[Vu]},$$scope:{ctx:o}}}),{c(){e=re("span"),x(n.$$.fragment),be(e,"slot","right")},m(a,f){N(a,e,f),F(n,e,null),r=!0},p(a,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:a}),n.$set(u)},i(a){r||(M(n.$$.fragment,a),r=!0)},o(a){S(n.$$.fragment,a),r=!1},d(a){a&&A(e),P(n)}}}function Zu(o){let e,n,r,a,f;function u(i){o[3](i)}let g={id:Re,$$slots:{right:[ju],default:[Hu]},$$scope:{ctx:o}};return o[0]!==void 0&&(g.checked=o[0]),e=new pr({props:g}),Ae.push(()=>De(e,"checked",u)),a=new Ge({props:{layer:Re,tooltip:Wu,show:o[0]}}),a.$on("click",Xu),{c(){x(e.$$.fragment),r=W(),x(a.$$.fragment)},m(i,m){F(e,i,m),N(i,r,m),F(a,i,m),f=!0},p(i,[m]){const h={};m&32&&(h.$$scope={dirty:m,ctx:i}),!n&&m&1&&(n=!0,h.checked=i[0],Se(()=>n=!1)),e.$set(h);const c={};m&1&&(c.show=i[0]),a.$set(c)},i(i){f||(M(e.$$.fragment,i),M(a.$$.fragment,i),f=!0)},o(i){S(e.$$.fragment,i),S(a.$$.fragment,i),f=!1},d(i){i&&A(r),P(e,i),P(a,i)}}}let Re="parliamentary_constituencies";function Wu(o){return`<p>${o.properties.Name}</p>`}function Xu(o){let e=o.detail.properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Yu(o,e,n){let r;Ee(o,qe,i=>n(2,r=i));let a=xe.parliamentary_constituencies,f=`${Re}-outline`;Gr(r,Re,`https://atip.uk/layers/v1/${Re}.pmtiles`),Dr(r,{id:Re,source:Re,sourceLayer:Re,color:a,opacity:ur(.5,.1)}),Sr(r,{id:f,source:Re,sourceLayer:Re,color:a,width:5});let u=!1;function g(i){u=i,n(0,u)}return o.$$.update=()=>{o.$$.dirty&5&&r.getLayer(f)&&r.setLayoutProperty(f,"visibility",u?"visible":"none")},[u,a,r,g]}class Ju extends ke{constructor(e){super(),Ce(this,e,Yu,Zu,Le,{})}}function Ku(o){let e;return{c(){e=R("Show on map")},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function Qu(o){let e;return{c(){e=R("Edit scheme locally")},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function ec(o){let e,n,r=o[0].authority_or_region+"",a,f,u,g,i=o[0].capital_scheme_id+"",m,h,c,w,k=o[0].funding_programme+"",L,_,z,U,G,j,X;return U=new ft({props:{$$slots:{default:[Ku]},$$scope:{ctx:o}}}),U.$on("click",o[3]),j=new ft({props:{disabled:o[1],title:o[2],$$slots:{default:[Qu]},$$scope:{ctx:o}}}),j.$on("click",o[4]),{c(){e=re("p"),n=R("Authority or region: "),a=R(r),f=W(),u=re("p"),g=R("Capital scheme ID: "),m=R(i),h=W(),c=re("p"),w=R("Funding programme: "),L=R(k),_=W(),z=re("div"),x(U.$$.fragment),G=W(),x(j.$$.fragment),be(z,"class","govuk-button-group")},m(Z,O){N(Z,e,O),V(e,n),V(e,a),N(Z,f,O),N(Z,u,O),V(u,g),V(u,m),N(Z,h,O),N(Z,c,O),V(c,w),V(c,L),N(Z,_,O),N(Z,z,O),F(U,z,null),V(z,G),F(j,z,null),X=!0},p(Z,O){(!X||O&1)&&r!==(r=Z[0].authority_or_region+"")&&Xe(a,r),(!X||O&1)&&i!==(i=Z[0].capital_scheme_id+"")&&Xe(m,i),(!X||O&1)&&k!==(k=Z[0].funding_programme+"")&&Xe(L,k);const ue={};O&256&&(ue.$$scope={dirty:O,ctx:Z}),U.$set(ue);const Y={};O&256&&(Y.$$scope={dirty:O,ctx:Z}),j.$set(Y)},i(Z){X||(M(U.$$.fragment,Z),M(j.$$.fragment,Z),X=!0)},o(Z){S(U.$$.fragment,Z),S(j.$$.fragment,Z),X=!1},d(Z){Z&&(A(e),A(f),A(u),A(h),A(c),A(_),A(z)),P(U),P(j)}}}function rc(o){let e,n;return e=new Yt({props:{label:`${o[0].scheme_reference}: ${o[0].num_features} features`,$$slots:{default:[ec]},$$scope:{ctx:o}}}),{c(){x(e.$$.fragment)},m(r,a){F(e,r,a),n=!0},p(r,[a]){const f={};a&1&&(f.label=`${r[0].scheme_reference}: ${r[0].num_features} features`),a&257&&(f.$$scope={dirty:a,ctx:r}),e.$set(f)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){P(e,r)}}}function tc(o,e,n){let r,a;Ee(o,Ar,c=>n(6,r=c)),Ee(o,qe,c=>n(7,a=c));let{scheme:f}=e,{authorityNames:u}=e,g=!u.has(f.authority_or_region),i=g?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function m(){let c={type:"FeatureCollection",features:r.features.filter(w=>w.properties.scheme_reference==f.scheme_reference)};a==null||a.fitBounds(qa(c),{padding:20,animate:!1})}function h(){let c={type:"FeatureCollection",features:r.features.filter(k=>k.properties.scheme_reference==f.scheme_reference)},w=f.authority_or_region;window.localStorage.setItem(w,JSON.stringify(c)),window.open(`scheme.html?authority=${f.authority_or_region}`,"_blank")}return o.$$set=c=>{"scheme"in c&&n(0,f=c.scheme),"authorityNames"in c&&n(5,u=c.authorityNames)},[f,g,i,m,h,u]}class nc extends ke{constructor(e){super(),Ce(this,e,tc,rc,Le,{scheme:0,authorityNames:5})}}function ac(o){let e;return{c(){e=R("primary and secondary schools")},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function oc(o){let e;return{c(){e=R("Open Data Commons Open Database License")},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function sc(o){let e,n,r,a,f,u,g,i,m;return r=new we({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[ac]},$$scope:{ctx:o}}}),i=new we({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[oc]},$$scope:{ctx:o}}}),{c(){e=re("p"),n=R("This shows "),x(r.$$.fragment),a=R(` from OpenStreetMap. It doesn't include kindergartens, colleges,
    universities, or other training schools.`),f=W(),u=re("p"),g=R("License: "),x(i.$$.fragment)},m(h,c){N(h,e,c),V(e,n),F(r,e,null),V(e,a),N(h,f,c),N(h,u,c),V(u,g),F(i,u,null),m=!0},p(h,c){const w={};c&1&&(w.$$scope={dirty:c,ctx:h}),r.$set(w);const k={};c&1&&(k.$$scope={dirty:c,ctx:h}),i.$set(k)},i(h){m||(M(r.$$.fragment,h),M(i.$$.fragment,h),m=!0)},o(h){S(r.$$.fragment,h),S(i.$$.fragment,h),m=!1},d(h){h&&(A(e),A(f),A(u)),P(r),P(i)}}}function lc(o){let e,n;return e=new Wa({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[sc]},$$scope:{ctx:o}}}),{c(){x(e.$$.fragment)},m(r,a){F(e,r,a),n=!0},p(r,[a]){const f={};a&1&&(f.$$scope={dirty:a,ctx:r}),e.$set(f)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){P(e,r)}}}class ic extends ke{constructor(e){super(),Ce(this,e,null,lc,Le,{})}}function fc(o){let e,n,r;return e=new hr({props:{color:o[1]}}),{c(){x(e.$$.fragment),n=R(`
  Wards`)},m(a,f){F(e,a,f),N(a,n,f),r=!0},p:cr,i(a){r||(M(e.$$.fragment,a),r=!0)},o(a){S(e.$$.fragment,a),r=!1},d(a){a&&A(n),P(e,a)}}}function uc(o){let e;return{c(){e=R(`ONS Geography
        `)},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function cc(o){let e;return{c(){e=R(`Open Government License
        `)},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function pc(o){let e,n,r,a,f,u,g,i,m,h;return r=new we({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[uc]},$$scope:{ctx:o}}}),i=new we({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[cc]},$$scope:{ctx:o}}}),{c(){e=re("p"),n=R("Data from "),x(r.$$.fragment),a=R(", as of May 2023."),f=W(),u=re("p"),g=R("License: "),x(i.$$.fragment),m=R(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(c,w){N(c,e,w),V(e,n),F(r,e,null),V(e,a),N(c,f,w),N(c,u,w),V(u,g),F(i,u,null),V(u,m),h=!0},p(c,w){const k={};w&32&&(k.$$scope={dirty:w,ctx:c}),r.$set(k);const L={};w&32&&(L.$$scope={dirty:w,ctx:c}),i.$set(L)},i(c){h||(M(r.$$.fragment,c),M(i.$$.fragment,c),h=!0)},o(c){S(r.$$.fragment,c),S(i.$$.fragment,c),h=!1},d(c){c&&(A(e),A(f),A(u)),P(r),P(i)}}}function hc(o){let e,n,r;return n=new gr({props:{$$slots:{default:[pc]},$$scope:{ctx:o}}}),{c(){e=re("span"),x(n.$$.fragment),be(e,"slot","right")},m(a,f){N(a,e,f),F(n,e,null),r=!0},p(a,f){const u={};f&32&&(u.$$scope={dirty:f,ctx:a}),n.$set(u)},i(a){r||(M(n.$$.fragment,a),r=!0)},o(a){S(n.$$.fragment,a),r=!1},d(a){a&&A(e),P(n)}}}function gc(o){let e,n,r,a,f;function u(i){o[3](i)}let g={id:He,$$slots:{right:[hc],default:[fc]},$$scope:{ctx:o}};return o[0]!==void 0&&(g.checked=o[0]),e=new pr({props:g}),Ae.push(()=>De(e,"checked",u)),a=new Ge({props:{layer:He,tooltip:vc,show:o[0]}}),a.$on("click",mc),{c(){x(e.$$.fragment),r=W(),x(a.$$.fragment)},m(i,m){F(e,i,m),N(i,r,m),F(a,i,m),f=!0},p(i,[m]){const h={};m&32&&(h.$$scope={dirty:m,ctx:i}),!n&&m&1&&(n=!0,h.checked=i[0],Se(()=>n=!1)),e.$set(h);const c={};m&1&&(c.show=i[0]),a.$set(c)},i(i){f||(M(e.$$.fragment,i),M(a.$$.fragment,i),f=!0)},o(i){S(e.$$.fragment,i),S(a.$$.fragment,i),f=!1},d(i){i&&A(r),P(e,i),P(a,i)}}}let He="wards";function vc(o){return`<p>${o.properties.name}</p>`}function mc(o){let e=encodeURIComponent(o.detail.properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function dc(o,e,n){let r;Ee(o,qe,i=>n(2,r=i));let a=xe.wards,f=`${He}-outline`;Gr(r,He,`https://atip.uk/layers/v1/${He}.pmtiles`),Dr(r,{id:He,source:He,sourceLayer:He,color:a,opacity:ur(.5,.1)}),Sr(r,{id:f,source:He,sourceLayer:He,color:a,width:2.5});let u=!1;function g(i){u=i,n(0,u)}return o.$$.update=()=>{o.$$.dirty&5&&r.getLayer(f)&&r.setLayoutProperty(f,"visibility",u?"visible":"none")},[u,a,r,g]}class $c extends ke{constructor(e){super(),Ce(this,e,dc,gc,Le,{})}}var $e=(o,e,n)=>new Promise((r,a)=>{var f=i=>{try{g(n.next(i))}catch(m){a(m)}},u=i=>{try{g(n.throw(i))}catch(m){a(m)}},g=i=>i.done?r(i.value):Promise.resolve(i.value).then(f,u);g((n=n.apply(o,e)).next())}),Ne=Uint8Array,Tr=Uint16Array,bc=Int32Array,Xa=new Ne([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ya=new Ne([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_c=new Ne([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ja=function(o,e){for(var n=new Tr(31),r=0;r<31;++r)n[r]=e+=1<<o[r-1];for(var a=new bc(n[30]),r=1;r<30;++r)for(var f=n[r];f<n[r+1];++f)a[f]=f-n[r]<<5|r;return{b:n,r:a}},Ka=Ja(Xa,2),Qa=Ka.b,yc=Ka.r;Qa[28]=258,yc[258]=28;var wc=Ja(Ya,0),kc=wc.b,Zt=new Tr(32768);for(se=0;se<32768;++se)We=(se&43690)>>1|(se&21845)<<1,We=(We&52428)>>2|(We&13107)<<2,We=(We&61680)>>4|(We&3855)<<4,Zt[se]=((We&65280)>>8|(We&255)<<8)>>1;var We,se,Hr=function(o,e,n){for(var r=o.length,a=0,f=new Tr(e);a<r;++a)o[a]&&++f[o[a]-1];var u=new Tr(e);for(a=1;a<e;++a)u[a]=u[a-1]+f[a-1]<<1;var g;if(n){g=new Tr(1<<e);var i=15-e;for(a=0;a<r;++a)if(o[a])for(var m=a<<4|o[a],h=e-o[a],c=u[o[a]-1]++<<h,w=c|(1<<h)-1;c<=w;++c)g[Zt[c]>>i]=m}else for(g=new Tr(r),a=0;a<r;++a)o[a]&&(g[a]=Zt[u[o[a]-1]++]>>15-o[a]);return g},qr=new Ne(288);for(se=0;se<144;++se)qr[se]=8;var se;for(se=144;se<256;++se)qr[se]=9;var se;for(se=256;se<280;++se)qr[se]=7;var se;for(se=280;se<288;++se)qr[se]=8;var se,eo=new Ne(32);for(se=0;se<32;++se)eo[se]=5;var se,Cc=Hr(qr,9,1),Lc=Hr(eo,5,1),Vt=function(o){for(var e=o[0],n=1;n<o.length;++n)o[n]>e&&(e=o[n]);return e},Be=function(o,e,n){var r=e/8|0;return(o[r]|o[r+1]<<8)>>(e&7)&n},jt=function(o,e){var n=e/8|0;return(o[n]|o[n+1]<<8|o[n+2]<<16)>>(e&7)},Mc=function(o){return(o+7)/8|0},Tc=function(o,e,n){(e==null||e<0)&&(e=0),(n==null||n>o.length)&&(n=o.length);var r=new Ne(n-e);return r.set(o.subarray(e,n)),r},Nc=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Te=function(o,e,n){var r=new Error(e||Nc[o]);if(r.code=o,Error.captureStackTrace&&Error.captureStackTrace(r,Te),!n)throw r;return r},Jt=function(o,e,n,r){var a=o.length,f=r?r.length:0;if(!a||e.f&&!e.l)return n||new Ne(0);var u=!n||e.i!=2,g=e.i;n||(n=new Ne(a*3));var i=function(Yr){var Jr=n.length;if(Yr>Jr){var Kr=new Ne(Math.max(Jr*2,Yr));Kr.set(n),n=Kr}},m=e.f||0,h=e.p||0,c=e.b||0,w=e.l,k=e.d,L=e.m,_=e.n,z=a*8;do{if(!w){m=Be(o,h,1);var U=Be(o,h+1,3);if(h+=3,U)if(U==1)w=Cc,k=Lc,L=9,_=5;else if(U==2){var Z=Be(o,h,31)+257,O=Be(o,h+10,15)+4,ue=Z+Be(o,h+5,31)+1;h+=14;for(var Y=new Ne(ue),Fe=new Ne(19),he=0;he<O;++he)Fe[_c[he]]=Be(o,h+he*3,7);h+=O*3;for(var Vr=Vt(Fe),pt=(1<<Vr)-1,ht=Hr(Fe,Vr,1),he=0;he<ue;){var jr=ht[Be(o,h,pt)];h+=jr&15;var G=jr>>4;if(G<16)Y[he++]=G;else{var Ye=0,vr=0;for(G==16?(vr=3+Be(o,h,3),h+=2,Ye=Y[he-1]):G==17?(vr=3+Be(o,h,7),h+=3):G==18&&(vr=11+Be(o,h,127),h+=7);vr--;)Y[he++]=Ye}}var Er=Y.subarray(0,Z),_e=Y.subarray(Z);L=Vt(Er),_=Vt(_e),w=Hr(Er,L,1),k=Hr(_e,_,1)}else Te(1);else{var G=Mc(h)+4,j=o[G-4]|o[G-3]<<8,X=G+j;if(X>a){g&&Te(0);break}u&&i(c+j),n.set(o.subarray(G,X),c),e.b=c+=j,e.p=h=X*8,e.f=m;continue}if(h>z){g&&Te(0);break}}u&&i(c+131072);for(var gt=(1<<L)-1,vt=(1<<_)-1,xr=h;;xr=h){var Ye=w[jt(o,h)&gt],Je=Ye>>4;if(h+=Ye&15,h>z){g&&Te(0);break}if(Ye||Te(2),Je<256)n[c++]=Je;else if(Je==256){xr=h,w=null;break}else{var Zr=Je-254;if(Je>264){var he=Je-257,Ve=Xa[he];Zr=Be(o,h,(1<<Ve)-1)+Qa[he],h+=Ve}var Fr=k[jt(o,h)&vt],Pr=Fr>>4;Fr||Te(3),h+=Fr&15;var _e=kc[Pr];if(Pr>3){var Ve=Ya[Pr];_e+=jt(o,h)&(1<<Ve)-1,h+=Ve}if(h>z){g&&Te(0);break}u&&i(c+131072);var zr=c+Zr;if(c<_e){var Wr=f-_e,Xr=Math.min(_e,zr);for(Wr+c<0&&Te(3);c<Xr;++c)n[c]=r[Wr+c]}for(;c<zr;c+=4)n[c]=n[c-_e],n[c+1]=n[c+1-_e],n[c+2]=n[c+2-_e],n[c+3]=n[c+3-_e];c=zr}}e.l=w,e.p=xr,e.b=c,e.f=m,w&&(m=1,e.m=L,e.d=k,e.n=_)}while(!m);return c==n.length?n:Tc(n,0,c)},Ac=new Ne(0),Dc=function(o){(o[0]!=31||o[1]!=139||o[2]!=8)&&Te(6,"invalid gzip data");var e=o[3],n=10;e&4&&(n+=(o[10]|o[11]<<8)+2);for(var r=(e>>3&1)+(e>>4&1);r>0;r-=!o[n++]);return n+(e&2)},Sc=function(o){var e=o.length;return(o[e-4]|o[e-3]<<8|o[e-2]<<16|o[e-1]<<24)>>>0},Ec=function(o,e){return((o[0]&15)!=8||o[0]>>4>7||(o[0]<<8|o[1])%31)&&Te(6,"invalid zlib data"),(o[1]>>5&1)==+!e&&Te(6,"invalid zlib data: "+(o[1]&32?"need":"unexpected")+" dictionary"),(o[1]>>3&4)+2};function xc(o,e){return Jt(o,{i:2},e&&e.out,e&&e.dictionary)}function Fc(o,e){var n=Dc(o);return n+8>o.length&&Te(6,"invalid gzip data"),Jt(o.subarray(n,-8),{i:2},e&&e.out||new Ne(Sc(o)),e&&e.dictionary)}function Pc(o,e){return Jt(o.subarray(Ec(o,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function Wt(o,e){return o[0]==31&&o[1]==139&&o[2]==8?Fc(o,e):(o[0]&15)!=8||o[0]>>4>7||(o[0]<<8|o[1])%31?xc(o,e):Pc(o,e)}var zc=typeof TextDecoder<"u"&&new TextDecoder,Oc=0;try{zc.decode(Ac,{stream:!0}),Oc=1}catch{}var ro=(o,e)=>o*Math.pow(2,e),Ir=(o,e)=>Math.floor(o/Math.pow(2,e)),ct=(o,e)=>ro(o.getUint16(e+1,!0),8)+o.getUint8(e),to=(o,e)=>ro(o.getUint32(e+2,!0),16)+o.getUint16(e,!0),Bc=(o,e,n,r,a)=>{if(o!=r.getUint8(a))return o-r.getUint8(a);const f=ct(r,a+1);if(e!=f)return e-f;const u=ct(r,a+4);return n!=u?n-u:0},Uc=(o,e,n,r)=>{const a=no(o,e|128,n,r);return a?{z:e,x:n,y:r,offset:a[0],length:a[1],is_dir:!0}:null},xa=(o,e,n,r)=>{const a=no(o,e,n,r);return a?{z:e,x:n,y:r,offset:a[0],length:a[1],is_dir:!1}:null},no=(o,e,n,r)=>{let a=0,f=o.byteLength/17-1;for(;a<=f;){const u=f+a>>1,g=Bc(e,n,r,o,u*17);if(g>0)a=u+1;else if(g<0)f=u-1;else return[to(o,u*17+7),o.getUint32(u*17+13,!0)]}return null},Ic=(o,e)=>o.is_dir&&!e.is_dir?1:!o.is_dir&&e.is_dir?-1:o.z!==e.z?o.z-e.z:o.x!==e.x?o.x-e.x:o.y-e.y,ao=(o,e)=>{const n=o.getUint8(e*17);return{z:n&127,x:ct(o,e*17+1),y:ct(o,e*17+4),offset:to(o,e*17+7),length:o.getUint32(e*17+13,!0),is_dir:n>>7===1}},Fa=o=>{const e=[],n=new DataView(o);for(let r=0;r<n.byteLength/17;r++)e.push(ao(n,r));return Rc(e)},Rc=o=>{o.sort(Ic);const e=new ArrayBuffer(17*o.length),n=new Uint8Array(e);for(let r=0;r<o.length;r++){const a=o[r];let f=a.z;a.is_dir&&(f=f|128),n[r*17]=f,n[r*17+1]=a.x&255,n[r*17+2]=a.x>>8&255,n[r*17+3]=a.x>>16&255,n[r*17+4]=a.y&255,n[r*17+5]=a.y>>8&255,n[r*17+6]=a.y>>16&255,n[r*17+7]=a.offset&255,n[r*17+8]=Ir(a.offset,8)&255,n[r*17+9]=Ir(a.offset,16)&255,n[r*17+10]=Ir(a.offset,24)&255,n[r*17+11]=Ir(a.offset,32)&255,n[r*17+12]=Ir(a.offset,48)&255,n[r*17+13]=a.length&255,n[r*17+14]=a.length>>8&255,n[r*17+15]=a.length>>16&255,n[r*17+16]=a.length>>24&255}return e},Hc=(o,e)=>{if(o.byteLength<17)return null;const n=o.byteLength/17,r=ao(o,n-1);if(r.is_dir){const a=r.z,f=e.z-a,u=Math.trunc(e.x/(1<<f)),g=Math.trunc(e.y/(1<<f));return{z:a,x:u,y:g}}return null};function Gc(o){return $e(this,null,function*(){const e=yield o.getBytes(0,512e3),n=new DataView(e.data),r=n.getUint32(4,!0),a=n.getUint16(8,!0),f=new TextDecoder("utf-8"),u=JSON.parse(f.decode(new DataView(e.data,10,r)));let g=0;u.compression==="gzip"&&(g=2);let i=0;"minzoom"in u&&(i=+u.minzoom);let m=0;"maxzoom"in u&&(m=+u.maxzoom);let h=0,c=0,w=0,k=-180,L=-85,_=180,z=85;if(u.bounds){const G=u.bounds.split(",");k=+G[0],L=+G[1],_=+G[2],z=+G[3]}if(u.center){const G=u.center.split(",");h=+G[0],c=+G[1],w=+G[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+r,rootDirectoryLength:a*17,jsonMetadataOffset:10,jsonMetadataLength:r,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:g,tileType:1,minZoom:i,maxZoom:m,minLon:k,minLat:L,maxLon:_,maxLat:z,centerZoom:w,centerLon:h,centerLat:c,etag:e.etag}})}function qc(o,e,n,r,a,f,u){return $e(this,null,function*(){let g=yield n.getArrayBuffer(e,o.rootDirectoryOffset,o.rootDirectoryLength,o);o.specVersion===1&&(g=Fa(g));const i=xa(new DataView(g),r,a,f);if(i){let c=(yield e.getBytes(i.offset,i.length,u)).data;const w=new DataView(c);return w.getUint8(0)==31&&w.getUint8(1)==139&&(c=Wt(new Uint8Array(c))),{data:c}}const m=Hc(new DataView(g),{z:r,x:a,y:f});if(m){const h=Uc(new DataView(g),m.z,m.x,m.y);if(h){let c=yield n.getArrayBuffer(e,h.offset,h.length,o);o.specVersion===1&&(c=Fa(c));const w=xa(new DataView(c),r,a,f);if(w){let L=(yield e.getBytes(w.offset,w.length,u)).data;const _=new DataView(L);return _.getUint8(0)==31&&_.getUint8(1)==139&&(L=Wt(new Uint8Array(L))),{data:L}}}}})}var oo={getHeader:Gc,getZxy:qc},Vc=class{constructor(){this.tile=(o,e)=>{if(o.type=="json"){const n=o.url.substr(10);let r=this.tiles.get(n);return r||(r=new Pa(n),this.tiles.set(n,r)),r.getHeader().then(a=>{const f={tiles:[o.url+"/{z}/{x}/{y}"],minzoom:a.minZoom,maxzoom:a.maxZoom,bounds:[a.minLon,a.minLat,a.maxLon,a.maxLat]};e(null,f,null,null)}).catch(a=>{e(a,null,null,null)}),{cancel:()=>{}}}else{const n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),r=o.url.match(n);if(!r)throw new Error("Invalid PMTiles protocol URL");const a=r[1];let f=this.tiles.get(a);f||(f=new Pa(a),this.tiles.set(a,f));const u=r[2],g=r[3],i=r[4],m=new AbortController,h=m.signal;let c=()=>{m.abort()};return f.getHeader().then(w=>{f.getZxy(+u,+g,+i,h).then(k=>{k?e(null,new Uint8Array(k.data),k.cacheControl,k.expires):w.tileType==1?e(null,new Uint8Array,null,null):e(null,null,null,null)}).catch(k=>{k.name!=="AbortError"&&e(k,null,null,null)})}),{cancel:c}}},this.tiles=new Map}add(o){this.tiles.set(o.source.getKey(),o)}get(o){return this.tiles.get(o)}};function Mr(o,e){return(e>>>0)*4294967296+(o>>>0)}function jc(o,e){const n=e.buf;let r,a;if(a=n[e.pos++],r=(a&112)>>4,a<128||(a=n[e.pos++],r|=(a&127)<<3,a<128)||(a=n[e.pos++],r|=(a&127)<<10,a<128)||(a=n[e.pos++],r|=(a&127)<<17,a<128)||(a=n[e.pos++],r|=(a&127)<<24,a<128)||(a=n[e.pos++],r|=(a&1)<<31,a<128))return Mr(o,r);throw new Error("Expected varint not more than 10 bytes")}function Rr(o){const e=o.buf;let n,r;return r=e[o.pos++],n=r&127,r<128||(r=e[o.pos++],n|=(r&127)<<7,r<128)||(r=e[o.pos++],n|=(r&127)<<14,r<128)||(r=e[o.pos++],n|=(r&127)<<21,r<128)?n:(r=e[o.pos],n|=(r&15)<<28,jc(n,o))}function Zc(o,e,n,r){if(r==0){n==1&&(e[0]=o-1-e[0],e[1]=o-1-e[1]);const a=e[0];e[0]=e[1],e[1]=a}}var Wc=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function Xc(o,e,n){if(o>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,o)-1||n>Math.pow(2,o)-1)throw Error("tile x/y outside zoom level bounds");const r=Wc[o],a=Math.pow(2,o);let f=0,u=0,g=0;const i=[e,n];let m=a/2;for(;m>0;)f=(i[0]&m)>0?1:0,u=(i[1]&m)>0?1:0,g+=m*m*(3*f^u),Zc(m,i,f,u),m=m/2;return r+g}function so(o,e){return $e(this,null,function*(){if(e===1||e===0)return o;if(e===2){if(typeof globalThis.DecompressionStream>"u")return Wt(new Uint8Array(o));{let r=new Response(o).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(r).arrayBuffer()}}else throw Error("Compression method not supported")})}var Yc=127;function Jc(o,e){let n=0,r=o.length-1;for(;n<=r;){const a=r+n>>1,f=e-o[a].tileId;if(f>0)n=a+1;else if(f<0)r=a-1;else return o[a]}return r>=0&&(o[r].runLength===0||e-o[r].tileId<o[r].runLength)?o[r]:null}var Kc=class{constructor(o){this.url=o}getKey(){return this.url}getBytes(o,e,n){return $e(this,null,function*(){let r;n||(r=new AbortController,n=r.signal);let a=yield fetch(this.url,{signal:n,headers:{Range:"bytes="+o+"-"+(o+e-1)}});if(a.status===416&&o===0){const g=a.headers.get("Content-Range");if(!g||!g.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const i=+g.substr(8);a=yield fetch(this.url,{signal:n,headers:{Range:"bytes=0-"+(i-1)}})}if(a.status>=300)throw Error("Bad response code: "+a.status);const f=a.headers.get("Content-Length");if(a.status===200&&(!f||+f>e))throw r&&r.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield a.arrayBuffer(),etag:a.headers.get("ETag")||void 0,cacheControl:a.headers.get("Cache-Control")||void 0,expires:a.headers.get("Expires")||void 0}})}};function Ue(o,e){const n=o.getUint32(e+4,!0),r=o.getUint32(e+0,!0);return n*Math.pow(2,32)+r}function Qc(o,e){const n=new DataView(o),r=n.getUint8(7);if(r>3)throw Error(`Archive is spec version ${r} but this library supports up to spec version 3`);return{specVersion:r,rootDirectoryOffset:Ue(n,8),rootDirectoryLength:Ue(n,16),jsonMetadataOffset:Ue(n,24),jsonMetadataLength:Ue(n,32),leafDirectoryOffset:Ue(n,40),leafDirectoryLength:Ue(n,48),tileDataOffset:Ue(n,56),tileDataLength:Ue(n,64),numAddressedTiles:Ue(n,72),numTileEntries:Ue(n,80),numTileContents:Ue(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:e}}function lo(o){const e={buf:new Uint8Array(o),pos:0},n=Rr(e),r=[];let a=0;for(let f=0;f<n;f++){const u=Rr(e);r.push({tileId:a+u,offset:0,length:0,runLength:1}),a+=u}for(let f=0;f<n;f++)r[f].runLength=Rr(e);for(let f=0;f<n;f++)r[f].length=Rr(e);for(let f=0;f<n;f++){const u=Rr(e);u===0&&f>0?r[f].offset=r[f-1].offset+r[f-1].length:r[f].offset=u-1}return r}function e0(o){const e=new DataView(o);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Nr=class extends Error{};function r0(o,e,n,r){return $e(this,null,function*(){const a=yield o.getBytes(0,16384);if(new DataView(a.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(e0(a.data)<3)return[yield oo.getHeader(o)];const u=a.data.slice(0,Yc);let g=a.etag;r&&a.etag!=r&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+o.getKey()),g=void 0);const i=Qc(u,g);if(n){const m=a.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),h=o.getKey()+"|"+(i.etag||"")+"|"+i.rootDirectoryOffset+"|"+i.rootDirectoryLength,c=lo(yield e(m,i.internalCompression));return[i,[h,c.length,c]]}return[i,void 0]})}function t0(o,e,n,r,a){return $e(this,null,function*(){const f=yield o.getBytes(n,r);if(a.etag&&a.etag!==f.etag)throw new Nr(f.etag);const u=yield e(f.data,a.internalCompression),g=lo(u);if(g.length===0)throw new Error("Empty directory is invalid");return g})}var n0=class{constructor(o=100,e=!0,n=so){this.cache=new Map,this.maxCacheEntries=o,this.counter=1,this.prefetch=e,this.decompress=n}getHeader(o,e){return $e(this,null,function*(){const n=o.getKey();if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const r=new Promise((a,f)=>{r0(o,this.decompress,this.prefetch,e).then(u=>{u[1]&&this.cache.set(u[1][0],{lastUsed:this.counter++,data:Promise.resolve(u[1][2])}),a(u[0]),this.prune()}).catch(u=>{f(u)})});return this.cache.set(n,{lastUsed:this.counter++,data:r}),r})}getDirectory(o,e,n,r){return $e(this,null,function*(){const a=o.getKey()+"|"+(r.etag||"")+"|"+e+"|"+n;if(this.cache.has(a))return this.cache.get(a).lastUsed=this.counter++,yield this.cache.get(a).data;const f=new Promise((u,g)=>{t0(o,this.decompress,e,n,r).then(i=>{u(i),this.prune()}).catch(i=>{g(i)})});return this.cache.set(a,{lastUsed:this.counter++,data:f}),f})}getArrayBuffer(o,e,n,r){return $e(this,null,function*(){const a=o.getKey()+"|"+(r.etag||"")+"|"+e+"|"+n;if(this.cache.has(a))return this.cache.get(a).lastUsed=this.counter++,yield this.cache.get(a).data;const f=new Promise((u,g)=>{o.getBytes(e,n).then(i=>{if(r.etag&&r.etag!==i.etag)throw new Nr(i.etag);u(i.data),this.cache.has(a),this.prune()}).catch(i=>{g(i)})});return this.cache.set(a,{lastUsed:this.counter++,data:f}),f})}prune(){if(this.cache.size>=this.maxCacheEntries){let o=1/0,e;this.cache.forEach((n,r)=>{n.lastUsed<o&&(o=n.lastUsed,e=r)}),e&&this.cache.delete(e)}}invalidate(o,e){return $e(this,null,function*(){this.cache.delete(o.getKey()),yield this.getHeader(o,e)})}},Pa=class{constructor(o,e,n){typeof o=="string"?this.source=new Kc(o):this.source=o,n?this.decompress=n:this.decompress=so,e?this.cache=e:this.cache=new n0}getHeader(){return $e(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(o,e,n,r){return $e(this,null,function*(){const a=Xc(o,e,n),f=yield this.cache.getHeader(this.source);if(f.specVersion<3)return oo.getZxy(f,this.source,this.cache,o,e,n,r);if(o<f.minZoom||o>f.maxZoom)return;let u=f.rootDirectoryOffset,g=f.rootDirectoryLength;for(let i=0;i<=3;i++){const m=yield this.cache.getDirectory(this.source,u,g,f),h=Jc(m,a);if(h)if(h.runLength>0){const c=yield this.source.getBytes(f.tileDataOffset+h.offset,h.length,r);if(f.etag&&f.etag!==c.etag)throw new Nr(c.etag);return{data:yield this.decompress(c.data,f.tileCompression),cacheControl:c.cacheControl,expires:c.expires}}else u=f.leafDirectoryOffset+h.offset,g=h.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(o,e,n,r){return $e(this,null,function*(){try{return yield this.getZxyAttempt(o,e,n,r)}catch(a){if(a instanceof Nr)return this.cache.invalidate(this.source,a.message),yield this.getZxyAttempt(o,e,n,r);throw a}})}getMetadataAttempt(){return $e(this,null,function*(){const o=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(o.jsonMetadataOffset,o.jsonMetadataLength);if(o.etag&&o.etag!==e.etag)throw new Nr(e.etag);const n=yield this.decompress(e.data,o.internalCompression),r=new TextDecoder("utf-8");return JSON.parse(r.decode(n))})}getMetadata(){return $e(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(o){if(o instanceof Nr)return this.cache.invalidate(this.source,o.message),yield this.getMetadataAttempt();throw o}})}};function a0(o){return Xt(()=>{let e=new Vc;Ta.addProtocol("pmtiles",e.tile)}),Va(()=>{Ta.removeProtocol("pmtiles")}),[]}class o0 extends ke{constructor(e){super(),Ce(this,e,a0,null,Le,{})}}function za(o,e,n){const r=o.slice();return r[15]=e[n],r}function s0(o){let e;return{c(){e=R("Home")},m(n,r){N(n,e,r)},d(n){n&&A(e)}}}function Oa(o){let e,n;return e=new Af({props:{errorMessage:o[1]}}),{c(){x(e.$$.fragment)},m(r,a){F(e,r,a),n=!0},p(r,a){const f={};a&2&&(f.errorMessage=r[1]),e.$set(f)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){P(e,r)}}}function Ba(o){let e,n,r,a;function f(i){o[10](i)}function u(i){o[11](i)}let g={schemes:o[2]};return o[3]!==void 0&&(g.schemesToBeShown=o[3]),o[4]!==void 0&&(g.filterText=o[4]),e=new fu({props:g}),Ae.push(()=>De(e,"schemesToBeShown",f)),Ae.push(()=>De(e,"filterText",u)),{c(){x(e.$$.fragment)},m(i,m){F(e,i,m),a=!0},p(i,m){const h={};m&4&&(h.schemes=i[2]),!n&&m&8&&(n=!0,h.schemesToBeShown=i[3],Se(()=>n=!1)),!r&&m&16&&(r=!0,h.filterText=i[4],Se(()=>r=!1)),e.$set(h)},i(i){a||(M(e.$$.fragment,i),a=!0)},o(i){S(e.$$.fragment,i),a=!1},d(i){P(e,i)}}}function Ua(o){let e,n,r=it(o[2].values()),a=[];for(let u=0;u<r.length;u+=1)a[u]=Ra(za(o,r,u));const f=u=>S(a[u],1,1,()=>{a[u]=null});return{c(){e=re("ul");for(let u=0;u<a.length;u+=1)a[u].c()},m(u,g){N(u,e,g);for(let i=0;i<a.length;i+=1)a[i]&&a[i].m(e,null);n=!0},p(u,g){if(g&13){r=it(u[2].values());let i;for(i=0;i<r.length;i+=1){const m=za(u,r,i);a[i]?(a[i].p(m,g),M(a[i],1)):(a[i]=Ra(m),a[i].c(),M(a[i],1),a[i].m(e,null))}for(ir(),i=r.length;i<a.length;i+=1)f(i);fr()}},i(u){if(!n){for(let g=0;g<r.length;g+=1)M(a[g]);n=!0}},o(u){a=a.filter(Boolean);for(let g=0;g<a.length;g+=1)S(a[g]);n=!1},d(u){u&&A(e),Ha(a,u)}}}function Ia(o){let e,n;return e=new nc({props:{scheme:o[15],authorityNames:o[0]}}),{c(){x(e.$$.fragment)},m(r,a){F(e,r,a),n=!0},p(r,a){const f={};a&4&&(f.scheme=r[15]),a&1&&(f.authorityNames=r[0]),e.$set(f)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){P(e,r)}}}function Ra(o){let e=o[3].has(o[15].scheme_reference),n,r,a=e&&Ia(o);return{c(){a&&a.c(),n=Df()},m(f,u){a&&a.m(f,u),N(f,n,u),r=!0},p(f,u){u&12&&(e=f[3].has(f[15].scheme_reference)),e?a?(a.p(f,u),u&12&&M(a,1)):(a=Ia(f),a.c(),M(a,1),a.m(n.parentNode,n)):a&&(ir(),S(a,1,1,()=>{a=null}),fr())},i(f){r||(M(a),r=!0)},o(f){S(a),r=!1},d(f){f&&A(n),a&&a.d(f)}}}function l0(o){let e,n,r,a,f,u,g,i,m,h,c,w,k;n=new ft({props:{$$slots:{default:[s0]},$$scope:{ctx:o}}}),n.$on("click",o[9]),g=new xf({props:{boundaryGeojson:o[5]}});let L=o[1]&&Oa(o);h=new Cf({props:{label:"Load from GeoJSON",id:"load-geojson",loadFile:o[7]}});let _=o[2].size>0&&Ba(o),z=o[0]&&Ua(o);return{c(){e=re("div"),x(n.$$.fragment),r=W(),a=re("div"),f=re("h1"),f.textContent="Browse schemes",u=W(),x(g.$$.fragment),i=W(),L&&L.c(),m=W(),x(h.$$.fragment),c=W(),_&&_.c(),w=W(),z&&z.c(),Na(a,"display","flex"),Na(a,"justify-content","space-between"),be(e,"slot","sidebar"),be(e,"class","govuk-prose")},m(U,G){N(U,e,G),F(n,e,null),V(e,r),V(e,a),V(a,f),V(a,u),F(g,a,null),V(e,i),L&&L.m(e,null),V(e,m),F(h,e,null),V(e,c),_&&_.m(e,null),V(e,w),z&&z.m(e,null),k=!0},p(U,G){const j={};G&262144&&(j.$$scope={dirty:G,ctx:U}),n.$set(j);const X={};G&32&&(X.boundaryGeojson=U[5]),g.$set(X),U[1]?L?(L.p(U,G),G&2&&M(L,1)):(L=Oa(U),L.c(),M(L,1),L.m(e,m)):L&&(ir(),S(L,1,1,()=>{L=null}),fr()),U[2].size>0?_?(_.p(U,G),G&4&&M(_,1)):(_=Ba(U),_.c(),M(_,1),_.m(e,w)):_&&(ir(),S(_,1,1,()=>{_=null}),fr()),U[0]?z?(z.p(U,G),G&1&&M(z,1)):(z=Ua(U),z.c(),M(z,1),z.m(e,null)):z&&(ir(),S(z,1,1,()=>{z=null}),fr())},i(U){k||(M(n.$$.fragment,U),M(g.$$.fragment,U),M(L),M(h.$$.fragment,U),M(_),M(z),k=!0)},o(U){S(n.$$.fragment,U),S(g.$$.fragment,U),S(L),S(h.$$.fragment,U),S(_),S(z),k=!1},d(U){U&&A(e),P(n),P(g),L&&L.d(),P(h),_&&_.d(),z&&z.d()}}}function i0(o){let e,n,r,a,f,u,g,i,m,h,c,w,k,L;return e=new ic({}),r=new bu({}),f=new Ru({}),g=new Ju({}),m=new $c({}),c=new tu({}),k=new Eu({}),{c(){x(e.$$.fragment),n=W(),x(r.$$.fragment),a=W(),x(f.$$.fragment),u=W(),x(g.$$.fragment),i=W(),x(m.$$.fragment),h=W(),x(c.$$.fragment),w=W(),x(k.$$.fragment)},m(_,z){F(e,_,z),N(_,n,z),F(r,_,z),N(_,a,z),F(f,_,z),N(_,u,z),F(g,_,z),N(_,i,z),F(m,_,z),N(_,h,z),F(c,_,z),N(_,w,z),F(k,_,z),L=!0},i(_){L||(M(e.$$.fragment,_),M(r.$$.fragment,_),M(f.$$.fragment,_),M(g.$$.fragment,_),M(m.$$.fragment,_),M(c.$$.fragment,_),M(k.$$.fragment,_),L=!0)},o(_){S(e.$$.fragment,_),S(r.$$.fragment,_),S(f.$$.fragment,_),S(g.$$.fragment,_),S(m.$$.fragment,_),S(c.$$.fragment,_),S(k.$$.fragment,_),L=!1},d(_){_&&(A(n),A(a),A(u),A(i),A(h),A(w)),P(e,_),P(r,_),P(f,_),P(g,_),P(m,_),P(c,_),P(k,_)}}}function f0(o){let e,n,r,a,f,u,g,i,m,h;return e=new wu({}),f=new zf({props:{small:!0,$$slots:{default:[i0]},$$scope:{ctx:o}}}),g=new jf({}),m=new Of({props:{style:o[6]}}),{c(){x(e.$$.fragment),n=W(),r=re("hr"),a=W(),x(f.$$.fragment),u=W(),x(g.$$.fragment),i=W(),x(m.$$.fragment)},m(c,w){F(e,c,w),N(c,n,w),N(c,r,w),N(c,a,w),F(f,c,w),N(c,u,w),F(g,c,w),N(c,i,w),F(m,c,w),h=!0},p(c,w){const k={};w&262144&&(k.$$scope={dirty:w,ctx:c}),f.$set(k)},i(c){h||(M(e.$$.fragment,c),M(f.$$.fragment,c),M(g.$$.fragment,c),M(m.$$.fragment,c),h=!0)},o(c){S(e.$$.fragment,c),S(f.$$.fragment,c),S(g.$$.fragment,c),S(m.$$.fragment,c),h=!1},d(c){c&&(A(n),A(r),A(a),A(u),A(i)),P(e,c),P(f,c),P(g,c),P(m,c)}}}function u0(o){let e,n,r,a,f,u,g,i,m,h,c;return e=new Pf({props:{colorInterventions:ja("v1")}}),r=new Ge({props:{layer:"interventions-points",tooltip:o[8]}}),f=new Ge({props:{layer:"interventions-lines",tooltip:o[8]}}),g=new Ge({props:{layer:"interventions-polygons",tooltip:o[8]}}),h=new Yt({props:{label:"Layers",open:!0,$$slots:{default:[f0]},$$scope:{ctx:o}}}),{c(){x(e.$$.fragment),n=W(),x(r.$$.fragment),a=W(),x(f.$$.fragment),u=W(),x(g.$$.fragment),i=W(),m=re("div"),x(h.$$.fragment),be(m,"class","top-right svelte-nlvvhu")},m(w,k){F(e,w,k),N(w,n,k),F(r,w,k),N(w,a,k),F(f,w,k),N(w,u,k),F(g,w,k),N(w,i,k),N(w,m,k),F(h,m,null),c=!0},p(w,k){const L={};k&262144&&(L.$$scope={dirty:k,ctx:w}),h.$set(L)},i(w){c||(M(e.$$.fragment,w),M(r.$$.fragment,w),M(f.$$.fragment,w),M(g.$$.fragment,w),M(h.$$.fragment,w),c=!0)},o(w){S(e.$$.fragment,w),S(r.$$.fragment,w),S(f.$$.fragment,w),S(g.$$.fragment,w),S(h.$$.fragment,w),c=!1},d(w){w&&(A(n),A(a),A(u),A(i),A(m)),P(e,w),P(r,w),P(f,w),P(g,w),P(h)}}}function c0(o){let e,n,r,a,f;return n=new o0({}),a=new Ff({props:{style:o[6],$$slots:{default:[u0]},$$scope:{ctx:o}}}),{c(){e=re("div"),x(n.$$.fragment),r=W(),x(a.$$.fragment),be(e,"slot","main")},m(u,g){N(u,e,g),F(n,e,null),V(e,r),F(a,e,null),f=!0},p(u,g){const i={};g&262144&&(i.$$scope={dirty:g,ctx:u}),a.$set(i)},i(u){f||(M(n.$$.fragment,u),M(a.$$.fragment,u),f=!0)},o(u){S(n.$$.fragment,u),S(a.$$.fragment,u),f=!1},d(u){u&&A(e),P(n),P(a)}}}function p0(o){let e,n;return e=new Ef({props:{$$slots:{main:[c0],sidebar:[l0]},$$scope:{ctx:o}}}),{c(){x(e.$$.fragment)},m(r,a){F(e,r,a),n=!0},p(r,[a]){const f={};a&262207&&(f.$$scope={dirty:a,ctx:r}),e.$set(f)},i(r){n||(M(e.$$.fragment,r),n=!0)},o(r){S(e.$$.fragment,r),n=!1},d(r){P(e,r)}}}function h0(o,e,n){let r,a;Ee(o,qe,G=>n(12,r=G)),Ee(o,Ar,G=>n(5,a=G));let f=null;Xt(async()=>{Lf();let G=await Mf();n(0,f=new Set(G.features.map(j=>j.properties.name)))});let g=new URLSearchParams(window.location.search).get("style")||"dataviz",i="",m=new Map,h=new Set,c="";Va(()=>{Ar.set(Tf())});function w(G){try{let j=JSON.parse(G);n(2,m=nu(j)),Ar.set(j),n(1,i=""),r==null||r.fitBounds(qa(j),{padding:20,animate:!1})}catch(j){n(1,i=`Couldn't load schemes from a file: ${j}`)}}function k(G){let j=G.properties;var X='<div style="max-width: 30vw;">';return X+=`<h2>${L(j.name)} (${j.intervention_type})</h2>`,X+=`<p>Scheme reference: ${j.scheme_reference}</p>`,j.length_meters&&(X+=`<p>Length: ${Nf(j.length_meters)}</p>`),j.description&&(X+=`<p>${L(j.description)}</p>`),X+="</div>",X}function L(G){return c?G.replace(new RegExp(c,"gi"),j=>`<mark>${j}</mark>`):G}const _=()=>window.open("index.html");function z(G){h=G,n(3,h)}function U(G){c=G,n(4,c)}return[f,i,m,h,c,a,g,w,k,_,z,U]}class g0 extends ke{constructor(e){super(),Ce(this,e,h0,p0,Le,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new g0({target:document.getElementById("app")});
