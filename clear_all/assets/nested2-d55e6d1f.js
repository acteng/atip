import{S as J,i as K,s as Y,e as C,h as G,$ as Ce,j as $,W as le,o as p,aP as el,b as W,c as V,d as L,g as b,m as v,w as it,l as X,t as _,n as d,p as w,X as zt,Y as Gt,Z as Ut,_ as qt,a7 as Fe,J as _e,K as ge,aQ as At,u as k,k as h,D as B,I as Me,N as wn,O as tl,q as be,P as nl,Q as rl,T as st,U as ll,V as ol,aX as Al,aY as $t,a4 as Pn,aZ as Ll,aO as Il,ar as tn,ae as kn,aj as Wt,r as yn,a as Lt,F as cn,v as Ye,aW as Q,a_ as ve,a$ as ke,B as Z,ah as ee,C as ye,ak as te,b0 as ie,G as Pt,H as sl,aS as Rt,ab as Mn,b1 as nn,R as il,b2 as Dt,E as al,as as Pl,f as $n,ag as Ml,aU as Nn,al as Nl,am as Fn,an as En,ao as Yt,aV as Dn,L as Fl,M as El,y as Dl}from"./index-5c4786eb.js";import{d as et,j as Ot,C as Be,f as nt,h as ae,l as H,c as Kt,k as jl,S as Rl,B as Bl,b as Mt,G as Hl}from"./StreetViewTool-fe9b0ae5.js";import{a as Je,F as zl}from"./Popup-d9b62ed1.js";import{P as ce}from"./Popup-2294f104.js";import{R as Gl,C as tt,Z as Ul}from"./ZoomOutMap-b9983e7c.js";import{L as ql,a as Wl}from"./LineMeasureController-1a6bf5a7.js";function Vl(r){let e;return{c(){e=C("span"),G(e,"class","svelte-kzgqtg"),Ce(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Ce(e,"background",n[0])},i:le,o:le,d(n){n&&p(e)}}}function Xl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class Oe extends J{constructor(e){super(),K(this,e,Xl,Vl,Y,{color:0})}}const Yl="/atip/clear_all/assets/help-d011708a.svg";function Ql(r){let e,n;const t=r[1].default,l=zt(t,r,r[4],null);return{c(){e=C("div"),l&&l.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&Gt(l,t,o,o[4],n?qt(t,o[4],s,null):Ut(o[4]),null)},i(o){n||(_(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function Jl(r){let e,n,t,l,o,s,f;function i(u){r[3](u)}let a={title:"Help",$$slots:{default:[Ql]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new el({props:a}),W.push(()=>V(t,"open",i)),{c(){e=C("button"),e.innerHTML=`<img src="${Yl}" title="Help" alt="Help"/>`,n=L(),b(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(u,c){$(u,e,c),$(u,n,c),v(t,u,c),o=!0,s||(f=it(e,"click",r[2]),s=!0)},p(u,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,g.open=u[0],X(()=>l=!1)),t.$set(g)},i(u){o||(_(t.$$.fragment,u),o=!0)},o(u){d(t.$$.fragment,u),o=!1},d(u){u&&(p(e),p(n)),w(t,u),s=!1,f()}}}function Kl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function f(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,f,l]}class de extends J{constructor(e){super(),K(this,e,Kl,Jl,Y,{})}}function jn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Rn(r){let e,n,t,l=r[1]+"",o,s,f;return n=new Oe({props:{color:r[2]}}),{c(){e=C("li"),b(n.$$.fragment),t=L(),o=k(l),s=L()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),n.$set(u),(!f||a&1)&&l!==(l=i[1]+"")&&B(o,l)},i(i){f||(_(n.$$.fragment,i),f=!0)},o(i){d(n.$$.fragment,i),f=!1},d(i){i&&p(e),w(n)}}}function Zl(r){let e,n,t=Fe(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Rn(jn(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){e=C("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,f){$(s,e,f);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[f]){if(f&1){t=Fe(s[0]);let i;for(i=0;i<t.length;i+=1){const a=jn(s,t,i);l[i]?(l[i].p(a,f),_(l[i],1)):(l[i]=Rn(a),l[i].c(),_(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)o(i);ge()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)_(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)d(l[f]);n=!1},d(s){s&&p(e),At(l,s)}}}function xl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class fl extends J{constructor(e){super(),K(this,e,xl,Zl,Y,{rows:0})}}function Bn(r){let e=r[0],n,t,l=Hn(r);return{c(){l.c(),n=Me()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?(_e(),d(l,1,1,le),ge(),l=Hn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Hn(r){let e;const n=r[10].default,t=zt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Gt(t,n,l,l[9],e?qt(n,l[9],o,null):Ut(l[9]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function eo(r){let e,n,t=r[0]&&Bn(r);return{c(){t&&t.c(),e=Me()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=Bn(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(_e(),d(t,1,1,()=>{t=null}),ge())},i(l){n||(_(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function to(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=wn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:u,self:c}=tl();be(r,u,y=>n(8,l=y)),be(r,c,y=>n(0,t=y));let g,m=!0;return nl(()=>{t&&g&&l&&(rl(u,t,g),st(c,t=null,t),n(6,g=void 0))}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==f&&(st(c,t=f,t),ll(l,t,ol({type:"raster",tiles:i,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,g=l==null?void 0:l.getSource(t)),n(7,m=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,g=l==null?void 0:l.getSource(f))})),r.$$.dirty&208&&g&&(m?n(7,m=!1):g.setTiles(i))},[t,u,c,f,i,a,g,m,l,s,o]}class no extends J{constructor(e){super(),K(this,e,to,eo,Y,{id:3,tiles:4,tileSize:5})}}function ro(r){let e;const n=r[16].default,t=zt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Gt(t,n,l,l[24],e?qt(n,l[24],o,null):Ut(l[24]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function lo(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[ro]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Al({props:o}),W.push(()=>V(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function oo(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=wn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:A=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:O=!1}=e,{hovered:F=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:E=!0}=e;function I(j){F=j,n(0,F)}function P(j){$t.call(this,r,j)}function N(j){$t.call(this,r,j)}function S(j){$t.call(this,r,j)}function M(j){$t.call(this,r,j)}function U(j){$t.call(this,r,j)}function R(j){$t.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,f=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,u=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,g=j.filter),"applyToClusters"in j&&n(9,m=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,A=j.maxzoom),"hoverCursor"in j&&n(12,T=j.hoverCursor),"manageHoverState"in j&&n(13,O=j.manageHoverState),"hovered"in j&&n(0,F=j.hovered),"eventsIfTopMost"in j&&n(14,D=j.eventsIfTopMost),"interactive"in j&&n(15,E=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[F,o,s,f,i,a,u,c,g,m,y,A,T,O,D,E,t,I,P,N,S,M,U,R,l]}class so extends J{constructor(e){super(),K(this,e,oo,lo,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function zn(r){let e=r[0],n,t,l=Gn(r);return{c(){l.c(),n=Me()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?(_e(),d(l,1,1,le),ge(),l=Gn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Gn(r){let e;const n=r[9].default,t=zt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Gt(t,n,l,l[8],e?qt(n,l[8],o,null):Ut(l[8]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function io(r){let e,n,t=r[0]&&zn(r);return{c(){t&&t.c(),e=Me()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=zn(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(_e(),d(t,1,1,()=>{t=null}),ge())},i(l){n||(_(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function ao(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=wn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e;if(i&&i.includes("pmtiles://")&&!Pn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Ll;Pn.addProtocol("pmtiles",y.tile)}const{map:c,self:g}=tl();be(r,c,y=>n(7,l=y)),be(r,g,y=>n(0,t=y));let m;return nl(()=>{t&&l&&(rl(c,t,m),st(g,t=null,t),m=void 0)}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,u=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==f&&(st(g,t=f,t),ll(l,t,ol({type:"vector",url:i,tiles:a,promoteId:u}),y=>l&&y===t,()=>{t&&(m=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{m=l==null?void 0:l.getSource(f)}))},[t,c,g,f,i,a,u,l,s,o]}class we extends J{constructor(e){super(),K(this,e,ao,io,Y,{id:3,url:4,tiles:5,promoteId:6})}}const fo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ie=Uint8Array,ut=Uint16Array,ul=Uint32Array,cl=new Ie([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),$l=new Ie([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uo=new Ie([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),pl=function(r,e){for(var n=new ut(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new ul(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},ml=pl(cl,2),_l=ml[0],co=ml[1];_l[28]=258,co[258]=28;var $o=pl($l,0),po=$o[0],pn=new ut(32768);for(var me=0;me<32768;++me){var rt=(me&43690)>>>1|(me&21845)<<1;rt=(rt&52428)>>>2|(rt&13107)<<2,rt=(rt&61680)>>>4|(rt&3855)<<4,pn[me]=((rt&65280)>>>8|(rt&255)<<8)>>>1}var jt=function(r,e,n){for(var t=r.length,l=0,o=new ut(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new ut(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var f;if(n){f=new ut(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],u=e-r[l],c=s[r[l]-1]++<<u,g=c|(1<<u)-1;c<=g;++c)f[pn[c]>>>i]=a}else for(f=new ut(t),l=0;l<t;++l)r[l]&&(f[l]=pn[s[r[l]-1]++]>>>15-r[l]);return f},Vt=new Ie(288);for(var me=0;me<144;++me)Vt[me]=8;for(var me=144;me<256;++me)Vt[me]=9;for(var me=256;me<280;++me)Vt[me]=7;for(var me=280;me<288;++me)Vt[me]=8;var gl=new Ie(32);for(var me=0;me<32;++me)gl[me]=5;var mo=jt(Vt,9,1),_o=jt(gl,5,1),rn=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},je=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},ln=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},go=function(r){return(r+7)/8|0},Sn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?ut:r.BYTES_PER_ELEMENT==4?ul:Ie)(n-e);return t.set(r.subarray(e,n)),t},ho=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Re=function(r,e,n){var t=new Error(e||ho[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Re),!n)throw t;return t},bo=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Ie(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ie(t*3));var s=function(Ne){var Se=e.length;if(Ne>Se){var Ze=new Ie(Math.max(Se*2,Ne));Ze.set(e),e=Ze}},f=n.f||0,i=n.p||0,a=n.b||0,u=n.l,c=n.d,g=n.m,m=n.n,y=t*8;do{if(!u){f=je(r,i,1);var A=je(r,i+1,3);if(i+=3,A)if(A==1)u=mo,c=_o,g=9,m=5;else if(A==2){var D=je(r,i,31)+257,E=je(r,i+10,15)+4,I=D+je(r,i+5,31)+1;i+=14;for(var P=new Ie(I),N=new Ie(19),S=0;S<E;++S)N[uo[S]]=je(r,i+S*3,7);i+=E*3;for(var M=rn(N),U=(1<<M)-1,R=jt(N,M,1),S=0;S<I;){var j=R[je(r,i,U)];i+=j&15;var T=j>>>4;if(T<16)P[S++]=T;else{var z=0,q=0;for(T==16?(q=3+je(r,i,3),i+=2,z=P[S-1]):T==17?(q=3+je(r,i,7),i+=3):T==18&&(q=11+je(r,i,127),i+=7);q--;)P[S++]=z}}var x=P.subarray(0,D),ne=P.subarray(D);g=rn(x),m=rn(ne),u=jt(x,g,1),c=jt(ne,m,1)}else Re(1);else{var T=go(i)+4,O=r[T-4]|r[T-3]<<8,F=T+O;if(F>t){o&&Re(0);break}l&&s(a+O),e.set(r.subarray(T,F),a),n.b=a+=O,n.p=i=F*8,n.f=f;continue}if(i>y){o&&Re(0);break}}l&&s(a+131072);for(var ue=(1<<g)-1,Le=(1<<m)-1,Te=i;;Te=i){var z=u[ln(r,i)&ue],oe=z>>>4;if(i+=z&15,i>y){o&&Re(0);break}if(z||Re(2),oe<256)e[a++]=oe;else if(oe==256){Te=i,u=null;break}else{var Ae=oe-254;if(oe>264){var S=oe-257,fe=cl[S];Ae=je(r,i,(1<<fe)-1)+_l[S],i+=fe}var $e=c[ln(r,i)&Le],pe=$e>>>4;$e||Re(3),i+=$e&15;var ne=po[pe];if(pe>3){var fe=$l[pe];ne+=ln(r,i)&(1<<fe)-1,i+=fe}if(i>y){o&&Re(0);break}l&&s(a+131072);for(var De=a+Ae;a<De;a+=4)e[a]=e[a-ne],e[a+1]=e[a+1-ne],e[a+2]=e[a+2-ne],e[a+3]=e[a+3-ne];a=De}}n.l=u,n.p=Te,n.b=a,n.f=f,u&&(f=1,n.m=g,n.d=c,n.n=m)}while(!f);return a==e.length?e:Sn(e,0,a)},vo=new Ie(0),Xe=function(r,e){return r[e]|r[e+1]<<8},He=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},on=function(r,e){return He(r,e)+He(r,e+4)*4294967296};function wo(r,e){return bo(r,e)}var mn=typeof TextDecoder<"u"&&new TextDecoder,ko=0;try{mn.decode(vo,{stream:!0}),ko=1}catch{}var yo=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,Sn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function dl(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(mn)return mn.decode(r);var l=yo(r),o=l[0],s=l[1];return s.length&&Re(8),o}}var So=function(r,e){return e+30+Xe(r,e+26)+Xe(r,e+28)},Co=function(r,e,n){var t=Xe(r,e+28),l=dl(r.subarray(e+46,e+46+t),!(Xe(r,e+8)&2048)),o=e+46+t,s=He(r,e+20),f=n&&s==4294967295?To(r,o):[s,He(r,e+24),He(r,e+42)],i=f[0],a=f[1],u=f[2];return[Xe(r,e+10),i,a,l,o+Xe(r,e+30)+Xe(r,e+32),u]},To=function(r,e){for(;Xe(r,e)!=1;e+=4+Xe(r,e+2));return[on(r,e+12),on(r,e+4),on(r,e+20)]};function Oo(r,e){for(var n={},t=r.length-22;He(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Re(13);var l=Xe(r,t+8);if(!l)return{};var o=He(r,t+16),s=o==4294967295||l==65535;if(s){var f=He(r,t-12);s=He(r,f)==101075792,s&&(l=He(r,f+32),o=He(r,f+48))}for(var i=e&&e.filter,a=0;a<l;++a){var u=Co(r,o,s),c=u[0],g=u[1],m=u[2],y=u[3],A=u[4],T=u[5],O=So(r,T);o=A,(!i||i({name:y,size:g,originalSize:m,compression:c}))&&(c?c==8?n[y]=wo(r.subarray(O,O+g),new Ie(m)):Re(14,"unknown compression type "+c):n[y]=Sn(r,O,O+g))}return n}function Ao(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(sn):sn(r)}function sn(r){var e=new Uint8Array(r),n=Oo(e);return Promise.resolve(Lo(n))}function Lo(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=dl(r[l])}return e}function Qe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&ct(t)===e)return t;n++}}function Xt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&ct(l)===e&&n.push(l),t++}return n}function Zt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&ct(l)===e&&n(l,t):n(l,t),t++}}function Io(r,e,n){var t=[];return Zt(r,e,function(l,o){t.push(n(l,o))}),t}var Po=/.+\:/;function ct(r){return r.tagName.replace(Po,"")}function hl(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+ct(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=hl(r.childNodes[t]),t++;return e+="</"+ct(r)+">",e}function Mo(r){var e=r.documentElement,n=Qe(e,"sheetData"),t=[];return Zt(n,"row",function(l){Zt(l,"c",function(o){t.push(o)})}),t}function No(r,e){return Qe(e,"v")}function Fo(r,e){if(e.firstChild&&ct(e.firstChild)==="is"&&e.firstChild.firstChild&&ct(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Eo(r){var e=r.documentElement,n=Qe(e,"dimension");if(n)return n.getAttribute("ref")}function Do(r){var e=r.documentElement,n=Qe(e,"cellStyleXfs");return n?Xt(n,"xf"):[]}function jo(r){var e=r.documentElement,n=Qe(e,"cellXfs");return n?Xt(n,"xf"):[]}function Ro(r){var e=r.documentElement,n=Qe(e,"numFmts");return n?Xt(n,"numFmt"):[]}function Bo(r){var e=r.documentElement;return Io(e,"si",function(n){var t=Qe(n,"t");if(t)return t.textContent;var l="";return Zt(n,"r",function(o){l+=Qe(o,"t").textContent}),l})}function Ho(r){var e=r.documentElement;return Qe(e,"workbookPr")}function zo(r){var e=r.documentElement;return Xt(e,"Relationship")}function Go(r){var e=r.documentElement,n=Qe(e,"sheets");return Xt(n,"sheet")}function Uo(r,e){var n=e.createDocument(r),t={},l=Ho(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(f){f.getAttribute("name")&&t.sheets.push({id:f.getAttribute("sheetId"),name:f.getAttribute("name"),relationId:f.getAttribute("r:id")})};return Go(n).forEach(o),t}function qo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var f=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=an(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=an(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=an(f);break}};return zo(n).forEach(l),t}function an(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Un(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function qn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Un(Object(n),!0).forEach(function(t){Wo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Wo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Vo(r,e){if(!r)return{};var n=e.createDocument(r),t=Do(n).map(fn),l=Ro(n).map(Xo).reduce(function(s,f){return s[f.id]=f,s},[]),o=function(f){return f.hasAttribute("xfId")?qn(qn({},t[f.xfId]),fn(f,l)):fn(f,l)};return jo(n).map(o)}function Xo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function fn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Yo(r,e){return r?Bo(e.createDocument(r)):[]}function bl(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Qo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Jo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jo(r,e){if(r){if(typeof r=="string")return Wn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wn(r,e)}}function Wn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ko(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Zo.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&ts(l.numberFormat.template))return!0}}var Zo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],xo=/^\[\$-414\]/,es=/;@$/;function ts(r){r=r.toLowerCase(),r=r.replace(xo,""),r=r.replace(es,"");for(var e=r.split(/\W+/),n=Qo(e),t;!(t=n()).done;){var l=t.value;if(ns.indexOf(l)<0)return!1}return!0}var ns=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function rs(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,f=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=un(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=un(r,a);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=f.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=f[u],r=un(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=ls(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var g=Number(r);if(isNaN(g))throw new Error('Invalid "numeric" cell value: '.concat(r));r=g,Ko(r,o(),s,a)&&(r=bl(r,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function ls(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function un(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var os=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function ss(r){var e=function(a,u){return a-u},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],f=t[t.length-1];return[{row:l,column:s},{row:o,column:f}]}function is(r){for(var e=0,n=0;n<r.length;)e*=26,e+=os.indexOf(r[n]),n++;return e}function vl(r){return r=r.split(/(\d+)/),[parseInt(r[1]),is(r[0].trim())]}function as(r,e,n,t,l,o,s){var f=vl(r.getAttribute("r")),i=No(e,r),a=i&&i.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:f[0],column:f[1],value:rs(a,u,{getInlineStringValue:function(){return Fo(e,r)},getInlineStringXml:function(){return hl(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function fs(r,e,n,t,l,o){var s=Mo(r);return s.length===0?[]:s.map(function(f){return as(f,r,e,n,t,l,o)})}function us(r,e){return ms(r)||ps(r,e)||$s(r,e)||cs()}function cs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $s(r,e){if(r){if(typeof r=="string")return Vn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(r,e)}}function Vn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ps(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function ms(r){if(Array.isArray(r))return r}function _s(r){var e=Eo(r);if(e)return e=e.split(":").map(vl).map(function(n){var t=us(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function gs(r,e,n,t,l,o){var s=e.createDocument(r),f=fs(s,e,n,t,l,o),i=_s(s)||ss(f);return{cells:f,dimensions:i}}function ds(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=hs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hs(r,e){if(r){if(typeof r=="string")return Xn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xn(r,e)}}function Xn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function bs(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var f=!0,i=ds(r[s]),a;!(a=i()).done;){var u=a.value;if(l(u)!==null){f=!1;break}}if(f)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function vs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ws(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ws(r,e){if(r){if(typeof r=="string")return Yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(r,e)}}function Yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ks(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,f=vs(r),i;!(i=f()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var u=0;u<r.length;)r[u].splice(o,1),u++;else if(l)break;o--}return r}function ys(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=wl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ss(r,e){return Os(r)||Ts(r,e)||wl(r,e)||Cs()}function Cs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wl(r,e){if(r){if(typeof r=="string")return Qn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qn(r,e)}}function Qn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ts(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Os(r){if(Array.isArray(r))return r}function As(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Ss(n,2);l[0];for(var o=l[1],s=o.column,f=o.row,i=new Array(f),a=0;a<f;){i[a]=new Array(s);for(var u=0;u<s;)i[a][u]=null,u++;a++}for(var c=ys(t),g;!(g=c()).done;){var m=g.value,y=m.row-1,A=m.column-1;A<s&&y<f&&(i[y][A]=m.value)}var T=e.rowMap;if(T)for(var O=0;O<i.length;)T[O]=O,O++;return i=bs(ks(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(i=e.transformData(i)),i}function Ls(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Is(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Is(r,e){if(r){if(typeof r=="string")return Jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(r,e)}}function Jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Kn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Ps(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Kn(Object(n),!0).forEach(function(t){Ms(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Kn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ms(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ns(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Ps({sheet:1},n));var t=function(g){if(!r[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return r[g]},l=qo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Yo(t(l.sharedStrings),e):[],s=l.styles?Vo(t(l.styles),e):{},f=Uo(t("xl/workbook.xml"),e);if(n.getSheets)return f.sheets.map(function(c){var g=c.name;return{name:g}});var i=Fs(n.sheet,f.sheets);if(!i||!l.sheets[i])throw Es(n.sheet,f.sheets);var a=gs(t(l.sheets[i]),e,o,s,f,n),u=As(a,n);return n.properties?{data:u,properties:f}:u}function Fs(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Ls(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Es(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function _n(r){"@babel/helpers - typeof";return _n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(r)}function Zn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Ds(r,e,n){return e&&Zn(r.prototype,e),n&&Zn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function js(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Rs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Bt(r,e)}function Bs(r){var e=kl();return function(){var t=Ht(r),l;if(e){var o=Ht(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return Hs(this,l)}}function Hs(r,e){if(e&&(_n(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return zs(r)}function zs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function gn(r){var e=typeof Map=="function"?new Map:void 0;return gn=function(t){if(t===null||!Gs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Jt(t,arguments,Ht(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Bt(l,t)},gn(r)}function Jt(r,e,n){return kl()?Jt=Reflect.construct:Jt=function(l,o,s){var f=[null];f.push.apply(f,o);var i=Function.bind.apply(l,f),a=new i;return s&&Bt(a,s.prototype),a},Jt.apply(null,arguments)}function kl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gs(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Bt(r,e){return Bt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Bt(r,e)}function Ht(r){return Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ht(r)}var Pe=function(r){Rs(n,r);var e=Bs(n);function n(t){var l;return js(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Ds(n)}(gn(Error));function Us(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Pe("not_a_number")}if(typeof r!="number")throw new Pe("not_a_number");if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");return r}function qs(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");return String(r)}throw new Pe("not_a_string")}function Ws(r){if(typeof r=="boolean")return r;throw new Pe("not_a_boolean")}function Vs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Pe("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");var t=bl(r,n);if(isNaN(t.valueOf()))throw new Pe("out_of_bounds");return t}throw new Pe("not_a_date")}function Xs(r,e){return Js(r)||Qs(r,e)||yl(r,e)||Ys()}function Ys(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Js(r){if(Array.isArray(r))return r}function dn(r){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(r)}function Ks(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=yl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yl(r,e){if(r){if(typeof r=="string")return xn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(r,e)}}function xn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function er(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function tr(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?er(Object(n),!0).forEach(function(t){Zs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Zs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var nr={isColumnOriented:!1};function xs(r,e,n){n?n=tr(tr({},nr),n):n=nr;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ri(e),l&&(r=ni(r));for(var f=r[0],i=[],a=[],u=1;u<r.length;u++){var c=Sl(e,r[u],u,f,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=Ks(a),m;!(m=g()).done;){var y=m.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function Sl(r,e,n,t,l,o){for(var s={},f=!0,i=function(){var g=u[a],m=r[g],y=dn(m.type)==="object"&&!Array.isArray(m.type),A=e[t.indexOf(g)];A===void 0&&(A=null);var T=void 0,O=void 0,F=void 0;if(y)T=Sl(m.type,e,n,t,l,o);else if(A===null)T=null;else if(Array.isArray(m.type)){var D=!1,E=ti(A).map(function(P){var N=rr(P,m,o);return N.error&&(T=P,O=N.error,F=N.reason),N.value!==null&&(D=!0),N.value});O||(T=D?E:null)}else{var I=rr(A,m,o);O=I.error,F=I.reason,T=O?A:I.value}!O&&T===null&&m.required&&(O="required"),O?(O={error:O,row:n+1,column:g,value:T},F&&(O.reason=F),m.type&&(O.type=m.type),l.push(O)):(f&&T!==null&&(f=!1),(T!==null||o.includeNullValues)&&(s[m.prop]=T))},a=0,u=Object.keys(r);a<u.length;a++)i();return f?null:s}function rr(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=pt(r,e.parse):e.type?t=ei(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function pt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ei(r,e,n){switch(e){case String:return pt(r,qs);case Number:return pt(r,Us);case Date:return pt(r,function(t){return Vs(t,{properties:n.properties})});case Boolean:return pt(r,Ws);default:if(typeof e=="function")return pt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Cl(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=Cl(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function ti(r){for(var e=[],n=0;n<r.length;){var t=Cl(r,",",n),l=Xs(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var ni=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function ri(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function hn(r){"@babel/helpers - typeof";return hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(r)}function Tl(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;hn(o)==="object"&&(o=Object.keys(r[l])[0],s=Tl(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var li=["schema","map"];function lr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Qt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lr(Object(n),!0).forEach(function(t){oi(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function oi(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function si(r,e){if(r==null)return{};var n=ii(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ii(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function ai(r,e,n){var t=n.schema,l=n.map,o=si(n,li);!t&&l&&(t=Tl(l));var s=Ns(r,e,Qt(Qt({},o),{},{properties:t||o.properties}));return t?xs(s.data,t,Qt(Qt({},o),{},{properties:s.properties})):s}function fi(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ao(r).then(function(n){return ai(n,fo,e)})}function ui(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>ci(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function ci(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function $i(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await fi(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Il(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const bn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function pi(r){return tn(["get","intervention_type"],{area:et.area,route:et.route,crossing:et.crossing,other:et.other},"white")}function mi(r){return[["Areas",et.area],["Routes",et.route],["Crossings",et.crossing],["Other",et.other]]}const se={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},ze=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function vn(){let[r,e]=Ol(bn,se.funding_programmes);return[tn(["get","funding_programme"],r,"grey"),e]}function _i(){let r=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=Ol(r,se.current_milestone);return[tn(["get","current_milestone"],e,"grey"),n]}function Ol(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function gi(r){let e,n;return e=new fl({props:{rows:r[1]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function di(r){let e,n,t,l,o;function s(i){r[3](i)}let f={label:"Color interventions",id:"colorInterventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(f.value=r[0]),e=new Ot({props:f}),W.push(()=>V(e,"value",s)),e.$on("change",r[2]),l=new Be({props:{label:"Legend",$$slots:{default:[gi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};!n&&a&1&&(n=!0,u.value=i[0],X(()=>n=!1)),e.$set(u);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function hi(r,e,n){let t;be(r,kn,a=>n(4,t=a));let l="fundingProgramme",[o,s]=vn();function f(){let a;l=="interventionType"?(a=pi(),n(1,s=mi())):l=="fundingProgramme"?n(1,[a,s]=vn(),s):l=="currentMilestone"&&n(1,[a,s]=_i(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){l=a,n(0,l)}return[l,s,f,i]}class bi extends J{constructor(e){super(),K(this,e,hi,di,Y,{})}}const It=Wt({type:"FeatureCollection",features:[],schemes:{}}),xt=Wt(new Map),or=Wt(!0),Nt=Wt(""),Ft=Wt("");function vi(r){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wi(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ki(r){let e,n,t,l,o,s;return t=new Lt({props:{$$slots:{default:[wi]},$$scope:{ctx:r}}}),t.$on("click",r[16]),{c(){e=C("input"),n=L(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){$(f,e,i),Ye(e,r[6]),$(f,n,i),v(t,f,i),l=!0,o||(s=it(e,"input",r[15]),o=!0)},p(f,i){i&64&&e.value!==f[6]&&Ye(e,f[6]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(_(t.$$.fragment,f),l=!0)},o(f){d(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function yi(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Si(r){let e,n,t,l,o,s;return t=new Lt({props:{$$slots:{default:[yi]},$$scope:{ctx:r}}}),t.$on("click",r[18]),{c(){e=C("input"),n=L(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(f,i){$(f,e,i),Ye(e,r[5]),$(f,n,i),v(t,f,i),l=!0,o||(s=it(e,"input",r[17]),o=!0)},p(f,i){i&32&&e.value!==f[5]&&Ye(e,f[5]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(_(t.$$.fragment,f),l=!0)},o(f){d(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),w(t,f),o=!1,s()}}}function Ci(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,A,T,O;e=new Lt({props:{$$slots:{default:[vi]},$$scope:{ctx:r}}}),e.$on("click",r[11]);function F(S){r[12](S)}let D={label:"Authority or region",id:"filterAuthority",choices:r[7],emptyOption:!0};r[2]!==void 0&&(D.value=r[2]),t=new Ot({props:D}),W.push(()=>V(t,"value",F));function E(S){r[13](S)}let I={label:"Funding programme",id:"filterFundingProgramme",choices:r[8],emptyOption:!0};r[3]!==void 0&&(I.value=r[3]),s=new Ot({props:I}),W.push(()=>V(s,"value",E));function P(S){r[14](S)}let N={label:"Current milestone",id:"filterCurrentMilestone",choices:r[9],emptyOption:!0};return r[4]!==void 0&&(N.value=r[4]),a=new Ot({props:N}),W.push(()=>V(a,"value",P)),g=new cn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[ki]},$$scope:{ctx:r}}}),y=new cn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Si]},$$scope:{ctx:r}}}),T=new bi({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),o=L(),b(s.$$.fragment),i=L(),b(a.$$.fragment),c=L(),b(g.$$.fragment),m=L(),b(y.$$.fragment),A=L(),b(T.$$.fragment)},m(S,M){v(e,S,M),$(S,n,M),v(t,S,M),$(S,o,M),v(s,S,M),$(S,i,M),v(a,S,M),$(S,c,M),v(g,S,M),$(S,m,M),v(y,S,M),$(S,A,M),v(T,S,M),O=!0},p(S,M){const U={};M&16777216&&(U.$$scope={dirty:M,ctx:S}),e.$set(U);const R={};M&128&&(R.choices=S[7]),!l&&M&4&&(l=!0,R.value=S[2],X(()=>l=!1)),t.$set(R);const j={};M&256&&(j.choices=S[8]),!f&&M&8&&(f=!0,j.value=S[3],X(()=>f=!1)),s.$set(j);const z={};M&512&&(z.choices=S[9]),!u&&M&16&&(u=!0,z.value=S[4],X(()=>u=!1)),a.$set(z);const q={};M&16777280&&(q.$$scope={dirty:M,ctx:S}),g.$set(q);const x={};M&16777248&&(x.$$scope={dirty:M,ctx:S}),y.$set(x)},i(S){O||(_(e.$$.fragment,S),_(t.$$.fragment,S),_(s.$$.fragment,S),_(a.$$.fragment,S),_(g.$$.fragment,S),_(y.$$.fragment,S),_(T.$$.fragment,S),O=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(s.$$.fragment,S),d(a.$$.fragment,S),d(g.$$.fragment,S),d(y.$$.fragment,S),d(T.$$.fragment,S),O=!1},d(S){S&&(p(n),p(o),p(i),p(c),p(m),p(A)),w(e,S),w(t,S),w(s,S),w(a,S),w(g,S),w(y,S),w(T,S)}}}function Ti(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[10].route.toLocaleString()+"",s,f,i=r[10].area.toLocaleString()+"",a,u,c=r[10].crossing.toLocaleString()+"",g,m,y=r[10].other.toLocaleString()+"",A,T,O=sr(r[10].totalLength).toFixed(1)+"",F,D;return{c(){e=k("Showing "),t=k(n),l=k(" schemes ("),s=k(o),f=k(`
    routes, `),a=k(i),u=k(` areas,
    `),g=k(c),m=k(" crossings, "),A=k(y),T=k(`
    other, with total LineString length of `),F=k(O),D=k(" miles)")},m(E,I){$(E,e,I),$(E,t,I),$(E,l,I),$(E,s,I),$(E,f,I),$(E,a,I),$(E,u,I),$(E,g,I),$(E,m,I),$(E,A,I),$(E,T,I),$(E,F,I),$(E,D,I)},p(E,I){I&1&&n!==(n=E[0].size.toLocaleString()+"")&&B(t,n),I&1024&&o!==(o=E[10].route.toLocaleString()+"")&&B(s,o),I&1024&&i!==(i=E[10].area.toLocaleString()+"")&&B(a,i),I&1024&&c!==(c=E[10].crossing.toLocaleString()+"")&&B(g,c),I&1024&&y!==(y=E[10].other.toLocaleString()+"")&&B(A,y),I&1024&&O!==(O=sr(E[10].totalLength).toFixed(1)+"")&&B(F,O)},d(E){E&&(p(e),p(t),p(l),p(s),p(f),p(a),p(u),p(g),p(m),p(A),p(T),p(F),p(D))}}}function Oi(r){let e,n,t;function l(s){r[19](s)}let o={id:"show-schemes",$$slots:{default:[Ti]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ae({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&16778241&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ai(r){let e,n,t,l;return e=new Be({props:{label:"Filters",$$slots:{default:[Ci]},$$scope:{ctx:r}}}),t=new nt({props:{small:!0,$$slots:{default:[Oi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&16778236&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16778243&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function sr(r){return r*621371e-9}function Li(r,e,n){let t,l,o,s;be(r,Ft,R=>n(5,t=R)),be(r,Nt,R=>n(6,l=R)),be(r,It,R=>n(20,o=R)),be(r,xt,R=>n(21,s=R));let{schemesToBeShown:f=new Set}=e,{show:i=!0}=e,a=[],u="",c=[],g=new Set(bn.slice(0,-1)),m="",y=[],A="",T={area:0,route:0,crossing:0,other:0,totalLength:0};yn(()=>{var q,x,ne;let R=new Set,j=new Set,z=new Set;for(let ue of s.values())(q=ue.browse)!=null&&q.authority_or_region&&R.add(ue.browse.authority_or_region),(x=ue.browse)!=null&&x.funding_programme&&j.add(ue.browse.funding_programme),(ne=ue.browse)!=null&&ne.current_milestone&&z.add(ue.browse.current_milestone);n(7,a=Array.from(R.entries())),a.sort(),n(8,c=bn.map(ue=>[ue,ue])),n(9,y=Array.from(z.entries())),y.sort()});function O(R,j,z,q,x){let ne=R.toLowerCase(),ue=j.toLowerCase(),Le=oe=>{var Ae,fe,$e,pe,De,Ne;if(ne&&!((Ae=oe.properties.name)!=null&&Ae.toLowerCase().includes(ne))&&!((fe=oe.properties.description)!=null&&fe.toLowerCase().includes(ne)))return!1;if(ue||z||q||x){let Se=s.get(oe.properties.scheme_reference);if(z&&(($e=Se.browse)==null?void 0:$e.authority_or_region)!=z||q&&q!=="Other"&&((pe=Se.browse)==null?void 0:pe.funding_programme)!=q||q==="Other"&&g.has(((De=Se.browse)==null?void 0:De.funding_programme)??"")||x&&((Ne=Se.browse)==null?void 0:Ne.current_milestone)!=x||ue&&!Se.scheme_reference.toLowerCase().includes(ue)&&!(Se.scheme_name??"").toLowerCase().includes(ue))return!1}return!0};n(0,f=new Set(o.features.filter(Le).map(oe=>oe.properties.scheme_reference))),n(10,T={area:0,route:0,crossing:0,other:0,totalLength:0});let Te=oe=>{var Ae,fe;return!(!f.has(oe.properties.scheme_reference)||ne&&!((Ae=oe.properties.name)!=null&&Ae.toLowerCase().includes(ne))&&!((fe=oe.properties.description)!=null&&fe.toLowerCase().includes(ne)))};for(let oe of o.features)Te(oe)?(delete oe.properties.hide_while_editing,n(10,T[oe.properties.intervention_type]++,T),oe.geometry.type=="LineString"&&oe.properties.length_meters&&n(10,T.totalLength+=oe.properties.length_meters,T)):oe.properties.hide_while_editing=!0;It.set(o),n(10,T)}function F(){n(2,u=""),n(3,m=""),n(4,A=""),st(Nt,l="",l),st(Ft,t="",t)}function D(R){u=R,n(2,u)}function E(R){m=R,n(3,m)}function I(R){A=R,n(4,A)}function P(){l=this.value,Nt.set(l)}const N=()=>st(Nt,l="",l);function S(){t=this.value,Ft.set(t)}const M=()=>st(Ft,t="",t);function U(R){i=R,n(1,i)}return r.$$set=R=>{"schemesToBeShown"in R&&n(0,f=R.schemesToBeShown),"show"in R&&n(1,i=R.show)},r.$$.update=()=>{r.$$.dirty&124&&O(l,t,u,m,A)},[f,i,u,m,A,t,l,a,c,y,T,F,D,E,I,P,N,S,M,U]}class Ii extends J{constructor(e){super(),K(this,e,Li,Ai,Y,{schemesToBeShown:0,show:1})}}function Pi(r){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mi(r){let e,n,t,l,o;return t=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Pi]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("License: "),b(t.$$.fragment),l=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,f){$(s,e,f),h(e,n),v(t,e,null),h(e,l),o=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){o||(_(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class Ee extends J{constructor(e){super(),K(this,e,null,Mi,Y,{})}}function ir(r,e,n){const t=r.slice();return t[2]=e[n],t}function ar(r,e,n){const t=r.slice();return t[5]=e[n],t}function fr(r){let e,n;return{c(){e=C("span"),n=k(`
    `),Ce(e,"background",r[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,l){$(t,e,l),h(e,n)},p(t,l){l&1&&Ce(e,"background",t[5])},d(t){t&&p(e)}}}function ur(r){let e,n=r[2]+"",t;return{c(){e=C("span"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&B(t,n)},d(l){l&&p(e)}}}function Ni(r){let e,n,t,l=Fe(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=fr(ar(r,l,i));let s=Fe(r[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=ur(ir(r,s,i));return{c(){e=C("div");for(let i=0;i<o.length;i+=1)o[i].c();n=L(),t=C("div");for(let i=0;i<f.length;i+=1)f[i].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);$(i,n,a),$(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){l=Fe(i[0]);let u;for(u=0;u<l.length;u+=1){const c=ar(i,l,u);o[u]?o[u].p(c,a):(o[u]=fr(c),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}if(a&2){s=Fe(i[1]);let u;for(u=0;u<s.length;u+=1){const c=ir(i,s,u);f[u]?f[u].p(c,a):(f[u]=ur(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:le,o:le,d(i){i&&(p(e),p(n),p(t)),At(o,i),At(f,i)}}}function Fi(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ke extends J{constructor(e){super(),K(this,e,Fi,Ni,Y,{colorScale:0,limits:1})}}function cr(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Ei(r){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Di(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ji(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ri(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bi(r){let e,n,t,l,o,s,f,i,a,u,c,g;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Di]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ji]},$$scope:{ctx:r}}}),u=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ri]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=L(),i=C("p"),a=k("License: "),b(u.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(m,f,y),$(m,i,y),h(i,a),v(u,i,null),h(i,c),g=!0},p(m,y){const A={};y&65536&&(A.$$scope={dirty:y,ctx:m}),t.$set(A);const T={};y&65536&&(T.$$scope={dirty:y,ctx:m}),o.$set(T);const O={};y&65536&&(O.$$scope={dirty:y,ctx:m}),u.$set(O)},i(m){g||(_(t.$$.fragment,m),_(o.$$.fragment,m),_(u.$$.fragment,m),g=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),g=!1},d(m){m&&(p(e),p(f),p(i)),w(t),w(o),w(u)}}}function Hi(r){let e,n,t;return n=new de({props:{$$slots:{default:[Bi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function $r(r){let e,n;return e=new Ke({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zi(r){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gi(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ui(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qi(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y;return o=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Gi]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),g=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[qi]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=C("p"),l=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(f.$$.fragment),i=k("."),a=L(),u=C("p"),c=k("License: "),b(g.$$.fragment),m=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(A,T){$(A,e,T),$(A,n,T),$(A,t,T),h(t,l),v(o,t,null),h(t,s),v(f,t,null),h(t,i),$(A,a,T),$(A,u,T),h(u,c),v(g,u,null),h(u,m),y=!0},p(A,T){const O={};T&65536&&(O.$$scope={dirty:T,ctx:A}),o.$set(O);const F={};T&65536&&(F.$$scope={dirty:T,ctx:A}),f.$set(F);const D={};T&65536&&(D.$$scope={dirty:T,ctx:A}),g.$set(D)},i(A){y||(_(o.$$.fragment,A),_(f.$$.fragment,A),_(g.$$.fragment,A),y=!0)},o(A){d(o.$$.fragment,A),d(f.$$.fragment,A),d(g.$$.fragment,A),y=!1},d(A){A&&(p(e),p(n),p(t),p(a),p(u)),w(o),w(f),w(g)}}}function Vi(r){let e,n,t;return n=new de({props:{$$slots:{default:[Wi]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function pr(r){let e,n;return e=new Ke({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Xi(r){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yi(r){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ji(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Yi]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Qi]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=C("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),f=L(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const m={};c&65536&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function Ki(r){let e,n,t;return n=new de({props:{$$slots:{default:[Ji]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function mr(r){let e,n,t,l;return t=new Ke({props:{colorScale:r[4],limits:r[6]().map(oa)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",n=L(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:le,i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function Zi(r){let e,n,t,l=r[15].toLocaleString()+"",o,s,f=r[14]+"",i;return{c(){e=C("p"),n=k("There are "),t=C("b"),o=k(l),s=k(`
          people per square kilometre in `),i=k(f)},m(a,u){$(a,e,u),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,u){u&8200&&l!==(l=a[15].toLocaleString()+"")&&B(o,l),u&8192&&f!==(f=a[14]+"")&&B(i,f)},d(a){a&&p(e)}}}function xi(r){let e,n,t=r[14]+"",l,o,s,f=r[15]+"",i,a;return{c(){e=C("p"),n=k("Households in "),l=k(t),o=k(` have an average of
          `),s=C("b"),i=k(f),a=k(`
          cars`)},m(u,c){$(u,e,c),h(e,n),h(e,l),h(e,o),h(e,s),h(s,i),h(e,a)},p(u,c){c&8192&&t!==(t=u[14]+"")&&B(l,t),c&8200&&f!==(f=u[15]+"")&&B(i,f)},d(u){u&&p(e)}}}function ea(r){let e,n,t=r[15]+"",l,o,s,f=r[14]+"",i,a;return{c(){e=C("p"),n=C("b"),l=k(t),o=k("%"),s=k(`
          of households in `),i=k(f),a=k(" have 1 or more cars")},m(u,c){$(u,e,c),h(e,n),h(n,l),h(n,o),h(e,s),h(e,i),h(e,a)},p(u,c){c&8200&&t!==(t=u[15]+"")&&B(l,t),c&8192&&f!==(f=u[14]+"")&&B(i,f)},d(u){u&&p(e)}}}function ta(r){cr(r);let e;function n(o,s){return o[3]=="percent_households_with_car"?ea:o[3]=="average_cars_per_household"?xi:Zi}let t=n(r),l=t(r);return{c(){l.c(),e=Me()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){cr(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function na(r){let e,n;return e=new ce({props:{$$slots:{default:[ta,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ra(r){let e,n,t,l;const o=[H(xe),{sourceLayer:xe},{paint:{"fill-color":ke(["get",r[3]],r[6](),r[4]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[na]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Je({props:s}),e.$on("click",r[5]);const f=[H(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&88?te(o,[u&0&&ie(H(xe)),u&0&&{sourceLayer:xe},u&88&&{paint:{"fill-color":ke(["get",a[3]],a[6](),a[4]),"fill-opacity":Z(.5,.7)}},u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};u&65544&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&8?te(f,[u&0&&ie(H(`${xe}-outline`)),u&0&&{sourceLayer:xe},f[2],u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function la(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y;function A(S){r[7](S)}let T={id:"percent_households_with_car",$$slots:{right:[Hi],default:[Ei]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new ae({props:T}),W.push(()=>V(e,"checked",A)),e.$on("change",r[8]);let O=r[3]=="percent_households_with_car"&&$r(r);function F(S){r[9](S)}let D={id:"average_cars_per_household",$$slots:{right:[Vi],default:[zi]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),o=new ae({props:D}),W.push(()=>V(o,"checked",F)),o.$on("change",r[10]);let E=r[3]=="average_cars_per_household"&&pr(r);function I(S){r[11](S)}let P={id:"population_density",$$slots:{right:[Ki],default:[Xi]},$$scope:{ctx:r}};r[2]!==void 0&&(P.checked=r[2]),a=new ae({props:P}),W.push(()=>V(a,"checked",I)),a.$on("change",r[12]);let N=r[3]=="population_density"&&mr(r);return m=new we({props:{url:`pmtiles://${ve()}/v1/${xe}.pmtiles`,$$slots:{default:[ra]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),O&&O.c(),l=L(),b(o.$$.fragment),f=L(),E&&E.c(),i=L(),b(a.$$.fragment),c=L(),N&&N.c(),g=L(),b(m.$$.fragment)},m(S,M){v(e,S,M),$(S,t,M),O&&O.m(S,M),$(S,l,M),v(o,S,M),$(S,f,M),E&&E.m(S,M),$(S,i,M),v(a,S,M),$(S,c,M),N&&N.m(S,M),$(S,g,M),v(m,S,M),y=!0},p(S,[M]){const U={};M&65536&&(U.$$scope={dirty:M,ctx:S}),!n&&M&1&&(n=!0,U.checked=S[0],X(()=>n=!1)),e.$set(U),S[3]=="percent_households_with_car"?O?(O.p(S,M),M&8&&_(O,1)):(O=$r(S),O.c(),_(O,1),O.m(l.parentNode,l)):O&&(_e(),d(O,1,1,()=>{O=null}),ge());const R={};M&65536&&(R.$$scope={dirty:M,ctx:S}),!s&&M&2&&(s=!0,R.checked=S[1],X(()=>s=!1)),o.$set(R),S[3]=="average_cars_per_household"?E?(E.p(S,M),M&8&&_(E,1)):(E=pr(S),E.c(),_(E,1),E.m(i.parentNode,i)):E&&(_e(),d(E,1,1,()=>{E=null}),ge());const j={};M&65536&&(j.$$scope={dirty:M,ctx:S}),!u&&M&4&&(u=!0,j.checked=S[2],X(()=>u=!1)),a.$set(j),S[3]=="population_density"?N?(N.p(S,M),M&8&&_(N,1)):(N=mr(S),N.c(),_(N,1),N.m(g.parentNode,g)):N&&(_e(),d(N,1,1,()=>{N=null}),ge());const z={};M&65544&&(z.$$scope={dirty:M,ctx:S}),m.$set(z)},i(S){y||(_(e.$$.fragment,S),_(O),_(o.$$.fragment,S),_(E),_(a.$$.fragment,S),_(N),_(m.$$.fragment,S),y=!0)},o(S){d(e.$$.fragment,S),d(O),d(o.$$.fragment,S),d(E),d(a.$$.fragment,S),d(N),d(m.$$.fragment,S),y=!1},d(S){S&&(p(t),p(l),p(f),p(i),p(c),p(g)),w(e,S),O&&O.d(S),w(o,S),E&&E.d(S),w(a,S),N&&N.d(S),w(m,S)}}}let xe="census_output_areas";const oa=r=>r.toLocaleString();function sa(r,e,n){let t=se.sequential_low_to_high,l=!1,o=!1,s=!1,f="";function i(T){let O=T.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${O}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${O}`,"_blank")}function a(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function u(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(T){o=T,n(1,o)}const m=()=>{n(0,l=!1),n(2,s=!1)};function y(T){s=T,n(2,s)}const A=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,f="percent_households_with_car"):o?n(3,f="average_cars_per_household"):s?n(3,f="population_density"):n(3,f=""))},[l,o,s,f,t,i,a,u,c,g,m,y,A]}class ia extends J{constructor(e){super(),K(this,e,sa,la,Y,{})}}function aa(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function fa(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ua(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[fa]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of December 2022."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function ca(r){let e,n,t;return n=new de({props:{$$slots:{default:[ua]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function $a(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function pa(r){let e,n;return e=new ce({props:{$$slots:{default:[$a,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ma(r){let e,n,t,l;const o=[H(mt),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[pa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Je({props:s}),e.$on("click",ga);const f=[H(`${mt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(H(mt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&ie(H(`${mt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function _a(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:mt,$$slots:{right:[ca],default:[aa]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new Pt({props:{data:`${ve()}/v1/${mt}.geojson`,$$slots:{default:[ma]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let mt="combined_authorities";function ga(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function da(r,e,n){let t=se.combined_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ha extends J{constructor(e){super(),K(this,e,da,_a,Y,{})}}function ba(r){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function va(r){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wa(r){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ka(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[va]},$$scope:{ctx:r}}}),o=new Q({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[wa]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=C("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),l=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),f=L(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const m={};c&32&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function ya(r){let e,n,t;return n=new de({props:{$$slots:{default:[ka]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function _r(r){let e,n;return e=new Ke({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Sa(r){let e,n=r[4].LSOA11CD+"",t,l,o,s=r[4].score+"",f,i,a,u,c,g=r[4].rank.toLocaleString()+"",m,y;return{c(){e=C("p"),t=k(n),l=k(` has an IMD score of
        `),o=C("b"),f=k(s),i=L(),a=C("p"),u=k("Rank: "),c=C("b"),m=k(g),y=k(`
        / 32,844 LSOAs`)},m(A,T){$(A,e,T),h(e,t),h(e,l),h(e,o),h(o,f),$(A,i,T),$(A,a,T),h(a,u),h(a,c),h(c,m),h(a,y)},p(A,T){T&16&&n!==(n=A[4].LSOA11CD+"")&&B(t,n),T&16&&s!==(s=A[4].score+"")&&B(f,s),T&16&&g!==(g=A[4].rank.toLocaleString()+"")&&B(m,g)},d(A){A&&(p(e),p(i),p(a))}}}function Ca(r){let e,n;return e=new ce({props:{$$slots:{default:[Sa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ta(r){let e,n,t,l;const o=[H(Ge),{sourceLayer:Ge},{paint:{"fill-color":ke(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ca]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Je({props:s});const f=[H(`${Ge}-outline`),{sourceLayer:Ge},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&7?te(o,[u&0&&ie(H(Ge)),u&0&&{sourceLayer:Ge},u&6&&{paint:{"fill-color":ke(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Z(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&1?te(f,[u&0&&ie(H(`${Ge}-outline`)),u&0&&{sourceLayer:Ge},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Oa(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:Ge,$$slots:{right:[ya],default:[ba]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&_r(r);return o=new we({props:{url:`pmtiles://${ve()}/v1/${Ge}.pmtiles`,$$slots:{default:[Ta]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=_r(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Ge="imd";function Aa(r,e,n){let t=se.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class La extends J{constructor(e){super(),K(this,e,Aa,Oa,Y,{})}}function Ia(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Pa(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ma(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Pa]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Na(r){let e,n,t;return n=new de({props:{$$slots:{default:[Ma]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Fa(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Ea(r){let e,n;return e=new ce({props:{$$slots:{default:[Fa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Da(r){let e,n,t,l;const o=[H(_t),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ea]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Je({props:s}),e.$on("click",Ra);const f=[H(`${_t}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(H(_t)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&ie(H(`${_t}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function ja(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:_t,$$slots:{right:[Na],default:[Ia]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new Pt({props:{data:`${ve()}/v1/${_t}.geojson`,$$slots:{default:[Da]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let _t="local_authority_districts";function Ra(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Ba(r,e,n){let t=se.local_authority_districts,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Ha extends J{constructor(e){super(),K(this,e,Ba,ja,Y,{})}}function za(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Ga(r){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ua(r){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qa(r){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wa(r){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Va(r){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xa(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,A,T,O,F,D,E,I,P;return t=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ga]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Ua]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[qa]},$$scope:{ctx:r}}}),m=new Q({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Wa]},$$scope:{ctx:r}}}),F=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Va]},$$scope:{ctx:r}}}),I=new Ee({}),{c(){e=C("p"),n=k("LPAs may be a "),b(t.$$.fragment),l=k(", "),b(o.$$.fragment),s=k("y, or "),b(f.$$.fragment),i=k("."),a=L(),u=C("p"),c=C("strong"),g=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(m.$$.fragment),y=k(" to get more details."),A=L(),T=C("p"),O=k("Data from ONS Geography via "),b(F.$$.fragment),D=k(", as of November 2022."),E=L(),b(I.$$.fragment)},m(N,S){$(N,e,S),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),v(f,e,null),h(e,i),$(N,a,S),$(N,u,S),h(u,c),h(c,g),v(m,c,null),h(c,y),$(N,A,S),$(N,T,S),h(T,O),v(F,T,null),h(T,D),$(N,E,S),v(I,N,S),P=!0},p(N,S){const M={};S&16&&(M.$$scope={dirty:S,ctx:N}),t.$set(M);const U={};S&16&&(U.$$scope={dirty:S,ctx:N}),o.$set(U);const R={};S&16&&(R.$$scope={dirty:S,ctx:N}),f.$set(R);const j={};S&16&&(j.$$scope={dirty:S,ctx:N}),m.$set(j);const z={};S&16&&(z.$$scope={dirty:S,ctx:N}),F.$set(z)},i(N){P||(_(t.$$.fragment,N),_(o.$$.fragment,N),_(f.$$.fragment,N),_(m.$$.fragment,N),_(F.$$.fragment,N),_(I.$$.fragment,N),P=!0)},o(N){d(t.$$.fragment,N),d(o.$$.fragment,N),d(f.$$.fragment,N),d(m.$$.fragment,N),d(F.$$.fragment,N),d(I.$$.fragment,N),P=!1},d(N){N&&(p(e),p(a),p(u),p(A),p(T),p(E)),w(t),w(o),w(f),w(m),w(F),w(I,N)}}}function Ya(r){let e,n,t;return n=new de({props:{$$slots:{default:[Xa]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Qa(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Ja(r){let e,n;return e=new ce({props:{$$slots:{default:[Qa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ka(r){let e,n,t,l;const o=[H(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ja]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Je({props:s});const f=[H(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(H(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&ie(H(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Za(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Ue,$$slots:{right:[Ya],default:[za]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${Ue}.pmtiles`,$$slots:{default:[Ka]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ue="local_planning_authorities";function xa(r,e,n){let t=se.local_planning_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ef extends J{constructor(e){super(),K(this,e,xa,Za,Y,{})}}function tf(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function nf(r){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[nf]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function lf(r){let e,n,t;return n=new de({props:{$$slots:{default:[rf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function of(r){let e,n=r[3].Name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&B(t,n)},d(l){l&&p(e)}}}function sf(r){let e,n;return e=new ce({props:{$$slots:{default:[of,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function af(r){let e,n,t,l;const o=[H(qe),{sourceLayer:qe},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[sf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Je({props:s}),e.$on("click",uf);const f=[H(`${qe}-outline`),{sourceLayer:qe},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(H(qe)),u&0&&{sourceLayer:qe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&ie(H(`${qe}-outline`)),u&0&&{sourceLayer:qe},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function ff(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:qe,$$slots:{right:[lf],default:[tf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${qe}.pmtiles`,$$slots:{default:[af]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let qe="parliamentary_constituencies";function uf(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function cf(r,e,n){let t=se.parliamentary_constituencies,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class $f extends J{constructor(e){super(),K(this,e,cf,ff,Y,{})}}function pf(r){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mf(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _f(r){let e;return{c(){e=k(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gf(r){let e;return{c(){e=k(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function df(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,A,T;return t=new Q({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[mf]},$$scope:{ctx:r}}}),u=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[_f]},$$scope:{ctx:r}}}),g=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[gf]},$$scope:{ctx:r}}}),A=new Ee({}),{c(){e=C("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),l=k(`. The measurements are annual means, in units of
        gm
        `),o=C("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),f=L(),i=C("p"),a=k("The noise layer is from "),b(u.$$.fragment),c=k(", using 2017 data. See their "),b(g.$$.fragment),m=k("."),y=L(),b(A.$$.fragment)},m(O,F){$(O,e,F),h(e,n),v(t,e,null),h(e,l),h(e,o),h(e,s),$(O,f,F),$(O,i,F),h(i,a),v(u,i,null),h(i,c),v(g,i,null),h(i,m),$(O,y,F),v(A,O,F),T=!0},p(O,F){const D={};F&2048&&(D.$$scope={dirty:F,ctx:O}),t.$set(D);const E={};F&2048&&(E.$$scope={dirty:F,ctx:O}),u.$set(E);const I={};F&2048&&(I.$$scope={dirty:F,ctx:O}),g.$set(I)},i(O){T||(_(t.$$.fragment,O),_(u.$$.fragment,O),_(g.$$.fragment,O),_(A.$$.fragment,O),T=!0)},o(O){d(t.$$.fragment,O),d(u.$$.fragment,O),d(g.$$.fragment,O),d(A.$$.fragment,O),T=!1},d(O){O&&(p(e),p(f),p(i),p(y)),w(t),w(u),w(g),w(A,O)}}}function hf(r){let e,n,t;return n=new de({props:{$$slots:{default:[df]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function gr(r){let e,n,t,l,o=r[3](r[0])+"",s,f,i,a,u,c,g,m,y,A,T,O,F;function D(S){r[7](S)}let E={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(E.value=r[0]),e=new Ot({props:E}),W.push(()=>V(e,"value",D));const I=[vf,bf],P=[];function N(S,M){return S[0]=="Noise"?0:1}return m=N(r),y=P[m]=I[m](r),{c(){b(e.$$.fragment),t=L(),l=C("p"),s=k(o),f=L(),i=C("div"),a=C("label"),u=k(`Opacity
      `),c=C("input"),g=L(),y.c(),A=Me(),G(c,"type","range"),G(c,"min","0"),G(c,"max","100")},m(S,M){v(e,S,M),$(S,t,M),$(S,l,M),h(l,s),$(S,f,M),$(S,i,M),h(i,a),h(a,u),h(a,c),Ye(c,r[2]),$(S,g,M),P[m].m(S,M),$(S,A,M),T=!0,O||(F=[it(c,"change",r[8]),it(c,"input",r[8])],O=!0)},p(S,M){const U={};!n&&M&1&&(n=!0,U.value=S[0],X(()=>n=!1)),e.$set(U),(!T||M&1)&&o!==(o=S[3](S[0])+"")&&B(s,o),M&4&&Ye(c,S[2]);let R=m;m=N(S),m===R?P[m].p(S,M):(_e(),d(P[R],1,1,()=>{P[R]=null}),ge(),y=P[m],y?y.p(S,M):(y=P[m]=I[m](S),y.c()),_(y,1),y.m(A.parentNode,A))},i(S){T||(_(e.$$.fragment,S),_(y),T=!0)},o(S){d(e.$$.fragment,S),d(y),T=!1},d(S){S&&(p(t),p(l),p(f),p(i),p(g),p(A)),w(e,S),P[m].d(S),O=!1,sl(F)}}}function bf(r){let e,n,t;return{c(){e=C("img"),Mn(e.src,n=r[5](r[0]))||G(e,"src",n),G(e,"width",150),G(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!Mn(e.src,n=l[5](l[0]))&&G(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&G(e,"alt",t)},i:le,o:le,d(l){l&&p(e)}}}function vf(r){let e,n;return e=new Ke({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function wf(r){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Gl({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function kf(r){let e,n,t,l,o,s;function f(u){r[6](u)}let i={id:"pollution",$$slots:{right:[hf],default:[pf]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[1]&&gr(r);return o=new no({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[wf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,g.checked=u[1],X(()=>n=!1)),e.$set(g),u[1]?a?(a.p(u,c),c&2&&_(a,1)):(a=gr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&1&&(m.tiles=[u[4](u[0])]),c&2054&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}function yf(r,e,n){let t,l=!1,o=50,s="PM25_viridis";function f(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let A=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${f()}?bbox={bbox-epsg-3857}&${A}`}function u(y){let A=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${f()}?${A}`}function c(y){l=y,n(1,l)}function g(y){s=y,n(0,s)}function m(){o=Rt(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,l,o,i,a,u,c,g,m]}class Sf extends J{constructor(e){super(),K(this,e,yf,kf,Y,{})}}function Cf(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Tf(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Of(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Tf]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Af(r){let e,n,t;return n=new de({props:{$$slots:{default:[Of]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Lf(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function If(r){let e,n;return e=new ce({props:{$$slots:{default:[Lf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Pf(r){let e,n,t,l;const o=[H(We),{sourceLayer:We},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[If]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Je({props:s}),e.$on("click",Nf);const f=[H(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(H(We)),u&0&&{sourceLayer:We},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?te(f,[u&0&&ie(H(`${We}-outline`)),u&0&&{sourceLayer:We},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Mf(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:We,$$slots:{right:[Af],default:[Cf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${We}.pmtiles`,$$slots:{default:[Pf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let We="wards";function Nf(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Ff(r,e,n){let t=se.wards,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Ef extends J{constructor(e){super(),K(this,e,Ff,Mf,Y,{})}}function Df(r){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jf(r){let e,n,t,l;return t=new Q({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Df]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),l=!0},p(o,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:o}),t.$set(f)},i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&p(e),w(t)}}}class at extends J{constructor(e){super(),K(this,e,null,jf,Y,{})}}function Rf(r){let e,n,t;return e=new Oe({props:{color:se.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Bf(r){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hf(r){let e,n,t,l,o,s,f,i,a;return o=new Q({props:{href:"https://gtfs.org",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),i=new at({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=C("p"),l=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),f=L(),b(i.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),h(t,l),v(o,t,null),h(t,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:u}),o.$set(g)},i(u){a||(_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(f)),w(o),w(i,u)}}}function zf(r){let e,n,t;return n=new de({props:{$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Gf(r){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uf(r){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qf(r){let e;function n(o,s){return o[2].has_bus_lane?Uf:Gf}let t=n(r),l=t(r);return{c(){l.c(),e=Me()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Wf(r){let e,n;return e=new ce({props:{$$slots:{default:[qf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Vf(r){let e,n;const t=[H(gt),{sourceLayer:gt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],se.bus_route_with_lane,se.bus_route_without_lane],"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Wf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&1?te(t,[s&0&&ie(H(gt)),s&0&&{sourceLayer:gt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Xf(r){let e,n,t,l,o;function s(i){r[1](i)}let f={id:gt,$$slots:{right:[zf],default:[Rf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${gt}.pmtiles`,$$slots:{default:[Vf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let gt="bus_routes";function Yf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Qf extends J{constructor(e){super(),K(this,e,Yf,Xf,Y,{})}}function dr(r){const e=ou(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function hr(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function Jf(r){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Kf(r){let e,n,t,l,o,s,f,i;return f=new at({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=L(),o=C("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=L(),b(f.$$.fragment)},m(a,u){$(a,e,u),$(a,n,u),$(a,t,u),$(a,l,u),$(a,o,u),$(a,s,u),v(f,a,u),i=!0},p:le,i(a){i||(_(f.$$.fragment,a),i=!0)},o(a){d(f.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(s)),w(f,a)}}}function Zf(r){let e,n,t;return n=new de({props:{$$slots:{default:[Kf]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function br(r){let e,n,t;return n=new nt({props:{$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function xf(r){let e,n,t=r[9]+"",l,o,s;return e=new Oe({props:{color:r[10]}}),{c(){b(e.$$.fragment),n=L(),l=k(t),o=L()},m(f,i){v(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p:le,i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),w(e,f)}}}function vr(r){let e,n,t;function l(s){r[4](s,r[6])}let o={id:r[6],$$slots:{default:[xf]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new ae({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){r=s;const i={};f&8192&&(i.$$scope={dirty:f,ctx:r}),!n&&f&6&&(n=!0,i.checked=r[1][r[6]],X(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function eu(r){let e,n,t=Fe(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=vr(hr(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Me()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);$(s,e,f),n=!0},p(s,f){if(f&6){t=Fe(s[2]);let i;for(i=0;i<t.length;i+=1){const a=hr(s,t,i);l[i]?(l[i].p(a,f),_(l[i],1)):(l[i]=vr(a),l[i].c(),_(l[i],1),l[i].m(e.parentNode,e))}for(_e(),i=t.length;i<l.length;i+=1)o(i);ge()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)_(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)d(l[f]);n=!1},d(s){s&&p(e),At(l,s)}}}function tu(r){dr(r);let e,n=r[6]+"",t,l,o,s,f,i=r[7]+"",a,u,c,g,m=r[8]+"",y;return{c(){e=C("h2"),t=k(n),l=L(),o=C("p"),s=k("Direction: "),f=C("b"),a=L(),u=C("p"),c=k("Width: "),g=C("b"),y=k(m)},m(A,T){$(A,e,T),h(e,t),$(A,l,T),$(A,o,T),h(o,s),h(o,f),f.innerHTML=i,$(A,a,T),$(A,u,T),h(u,c),h(u,g),h(g,y)},p(A,T){dr(A),T&32&&n!==(n=A[6]+"")&&B(t,n),T&32&&i!==(i=A[7]+"")&&(f.innerHTML=i),T&32&&m!==(m=A[8]+"")&&B(y,m)},d(A){A&&(p(e),p(l),p(o),p(a),p(u))}}}function nu(r){let e,n;return e=new ce({props:{$$slots:{default:[tu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ru(r){let e,n;const t=[H(dt),{sourceLayer:dt},{paint:{"line-color":tn(["get","kind"],{track:se.cycle_paths.track,lane:se.cycle_paths.lane,shared_use_segregated:se.cycle_paths.shared_use_segregated,shared_use_unsegregated:se.cycle_paths.shared_use_unsegregated},"red"),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:wr(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[nu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new ye({props:l}),e.$on("click",su),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(H(dt)),s&0&&{sourceLayer:dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:wr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function lu(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:dt,$$slots:{right:[Zf],default:[Jf]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&br(r);return o=new we({props:{url:`pmtiles://${ve()}/v1/${dt}.pmtiles`,$$slots:{default:[ru]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=br(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&8195&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let dt="cycle_paths";function ou(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function su(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function wr(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function iu(r,e,n){let t=[["track","Separated tracks",se.cycle_paths.track],["lane","Unprotected lanes",se.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",se.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",se.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){l=i,n(0,l)}function f(i,a){r.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[l,o,t,s,f]}class au extends J{constructor(e){super(),K(this,e,iu,lu,Y,{})}}function fu(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function uu(r){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cu(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[uu]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=C("p"),n=k("Data from the "),b(t.$$.fragment),l=k(", as of September 2021."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function $u(r){let e,n,t;return n=new de({props:{$$slots:{default:[cu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function pu(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&B(t,n)},d(l){l&&p(e)}}}function mu(r){let e,n;return e=new ce({props:{$$slots:{default:[pu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _u(r){let e,n;const t=[H(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[mu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(H(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function gu(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:ht,$$slots:{right:[$u],default:[fu]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${ht}.pmtiles`,$$slots:{default:[_u]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let ht="mrn";function du(r,e,n){let t=se.mrn,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class hu extends J{constructor(e){super(),K(this,e,du,gu,Y,{})}}function bu(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function vu(r){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wu(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[vu]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=C("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),l=k(", downloaded on 22/01/2024."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function ku(r){let e,n,t;return n=new de({props:{$$slots:{default:[wu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function kr(r){let e,n,t,l=r[3].Desc_+"",o;return{c(){e=C("li"),n=k("Description: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Desc_+"")&&B(o,l)},d(s){s&&p(e)}}}function yr(r){let e,n,t,l=r[3].Greenway+"",o;return{c(){e=C("li"),n=k("Is greenway: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Greenway+"")&&B(o,l)},d(s){s&&p(e)}}}function Sr(r){let e,n,t,l=r[3].RouteType+"",o;return{c(){e=C("li"),n=k("Route type: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteType+"")&&B(o,l)},d(s){s&&p(e)}}}function Cr(r){let e,n,t,l=r[3].RouteNo+"",o;return{c(){e=C("li"),n=k("Route number: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteNo+"")&&B(o,l)},d(s){s&&p(e)}}}function Tr(r){let e,n,t,l=r[3].RouteCat+"",o;return{c(){e=C("li"),n=k("Route Category: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteCat+"")&&B(o,l)},d(s){s&&p(e)}}}function Or(r){let e,n,t,l=r[3].OpenStatus+"",o;return{c(){e=C("li"),n=k("Open Status: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].OpenStatus+"")&&B(o,l)},d(s){s&&p(e)}}}function Ar(r){let e,n,t,l=r[3].Surface+"",o;return{c(){e=C("li"),n=k("Surface: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Surface+"")&&B(o,l)},d(s){s&&p(e)}}}function Lr(r){let e,n,t,l=r[3].Quality+"",o;return{c(){e=C("li"),n=k("Quality: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].Quality+"")&&B(o,l)},d(s){s&&p(e)}}}function Ir(r){let e,n,t,l=r[3].RoadClass+"",o;return{c(){e=C("li"),n=k("Road Class: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=s[3].RoadClass+"")&&B(o,l)},d(s){s&&p(e)}}}function yu(r){let e,n,t,l,o,s,f,i,a,u=r[3].Desc_&&kr(r),c=r[3].Greenway&&yr(r),g=r[3].RouteType&&Sr(r),m=r[3].RouteNo&&Cr(r),y=r[3].RouteCat&&Tr(r),A=r[3].OpenStatus&&Or(r),T=r[3].Surface&&Ar(r),O=r[3].Quality&&Lr(r),F=r[3].RoadClass&&Ir(r);return{c(){e=C("ul"),u&&u.c(),n=L(),c&&c.c(),t=L(),g&&g.c(),l=L(),m&&m.c(),o=L(),y&&y.c(),s=L(),A&&A.c(),f=L(),T&&T.c(),i=L(),O&&O.c(),a=L(),F&&F.c()},m(D,E){$(D,e,E),u&&u.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),g&&g.m(e,null),h(e,l),m&&m.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),A&&A.m(e,null),h(e,f),T&&T.m(e,null),h(e,i),O&&O.m(e,null),h(e,a),F&&F.m(e,null)},p(D,E){D[3].Desc_?u?u.p(D,E):(u=kr(D),u.c(),u.m(e,n)):u&&(u.d(1),u=null),D[3].Greenway?c?c.p(D,E):(c=yr(D),c.c(),c.m(e,t)):c&&(c.d(1),c=null),D[3].RouteType?g?g.p(D,E):(g=Sr(D),g.c(),g.m(e,l)):g&&(g.d(1),g=null),D[3].RouteNo?m?m.p(D,E):(m=Cr(D),m.c(),m.m(e,o)):m&&(m.d(1),m=null),D[3].RouteCat?y?y.p(D,E):(y=Tr(D),y.c(),y.m(e,s)):y&&(y.d(1),y=null),D[3].OpenStatus?A?A.p(D,E):(A=Or(D),A.c(),A.m(e,f)):A&&(A.d(1),A=null),D[3].Surface?T?T.p(D,E):(T=Ar(D),T.c(),T.m(e,i)):T&&(T.d(1),T=null),D[3].Quality?O?O.p(D,E):(O=Lr(D),O.c(),O.m(e,a)):O&&(O.d(1),O=null),D[3].RoadClass?F?F.p(D,E):(F=Ir(D),F.c(),F.m(e,null)):F&&(F.d(1),F=null)},d(D){D&&p(e),u&&u.d(),c&&c.d(),g&&g.d(),m&&m.d(),y&&y.d(),A&&A.d(),T&&T.d(),O&&O.d(),F&&F.d()}}}function Su(r){let e,n;return e=new ce({props:{$$slots:{default:[yu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Cu(r){let e,n;const t=[H(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Su]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(H(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Tu(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:bt,$$slots:{right:[ku],default:[bu]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${bt}.pmtiles`,$$slots:{default:[Cu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let bt="national_cycle_network";function Ou(r,e,n){let t=se.national_cycle_network,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Au extends J{constructor(e){super(),K(this,e,Ou,Tu,Y,{})}}function Lu(r){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Iu(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pu(r){let e,n,t,l,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Iu]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=L(),t=C("p"),t.textContent="Data valid as of 1 January, 2024",l=L(),o=C("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),h(o,s),v(f,o,null),h(o,i),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),f.$set(g)},i(u){a||(_(f.$$.fragment,u),a=!0)},o(u){d(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),w(f)}}}function Mu(r){let e,n,t;return n=new de({props:{$$slots:{default:[Pu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Pr(r){let e,n;return e=new Ke({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Nu(r){let e,n,t,l=r[4].side+"",o,s,f,i,a,u=r[4].average+"",c,g,m,y,A,T,O=r[4].minimum+"",F,D;return{c(){e=C("p"),n=k("Side of the road: "),t=C("b"),o=k(l),s=L(),f=C("p"),i=k("Average width: "),a=C("b"),c=k(u),g=k(`
        meters`),m=L(),y=C("p"),A=k("Minimum width: "),T=C("b"),F=k(O),D=k(`
        meters`)},m(E,I){$(E,e,I),h(e,n),h(e,t),h(t,o),$(E,s,I),$(E,f,I),h(f,i),h(f,a),h(a,c),h(f,g),$(E,m,I),$(E,y,I),h(y,A),h(y,T),h(T,F),h(y,D)},p(E,I){I&16&&l!==(l=E[4].side+"")&&B(o,l),I&16&&u!==(u=E[4].average+"")&&B(c,u),I&16&&O!==(O=E[4].minimum+"")&&B(F,O)},d(E){E&&(p(e),p(s),p(f),p(m),p(y))}}}function Fu(r){let e,n;return e=new ce({props:{$$slots:{default:[Nu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Eu(r){let e,n;const t=[H(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],r[2],r[1]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Fu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&ie(H(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&6&&{paint:{"line-color":ke(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Du(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:vt,$$slots:{right:[Mu],default:[Lu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&Pr(r);return o=new we({props:{url:`pmtiles://${nn()}/v1/${vt}.pmtiles`,$$slots:{default:[Eu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Pr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let vt="pavement_widths";function ju(r,e,n){let t=se.sequential_low_to_high,l=[0,2,4,6,8,13],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class Ru extends J{constructor(e){super(),K(this,e,ju,Du,Y,{})}}function Bu(r){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hu(r){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zu(r){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gu(r){let e,n,t,l,o,s,f,i,a,u,c;return f=new Q({props:{href:"https://www.pct.bike",$$slots:{default:[Hu]},$$scope:{ctx:r}}}),a=new Q({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[zu]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=L(),o=C("p"),s=k("See "),b(f.$$.fragment),i=k(" and "),b(a.$$.fragment),u=k(" for details on methodology and data sources.")},m(g,m){$(g,e,m),$(g,n,m),$(g,t,m),$(g,l,m),$(g,o,m),h(o,s),v(f,o,null),h(o,i),v(a,o,null),h(o,u),c=!0},p(g,m){const y={};m&1024&&(y.$$scope={dirty:m,ctx:g}),f.$set(y);const A={};m&1024&&(A.$$scope={dirty:m,ctx:g}),a.$set(A)},i(g){c||(_(f.$$.fragment,g),_(a.$$.fragment,g),c=!0)},o(g){d(f.$$.fragment,g),d(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(l),p(o)),w(f),w(a)}}}function Uu(r){let e,n,t;return n=new de({props:{$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Mr(r){let e,n,t,l,o,s,f,i;e=new Ke({props:{colorScale:r[3],limits:r[4]}});function a(m){r[7](m)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(u.value=r[0]),t=new il({props:u}),W.push(()=>V(t,"value",a));function c(m){r[8](m)}let g={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(g.value=r[1]),s=new Ot({props:g}),W.push(()=>V(s,"value",c)),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),o=L(),b(s.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,o,y),v(s,m,y),i=!0},p(m,y){const A={};!l&&y&1&&(l=!0,A.value=m[0],X(()=>l=!1)),t.$set(A);const T={};!f&&y&2&&(f=!0,T.value=m[1],X(()=>f=!1)),s.$set(T)},i(m){i||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(s.$$.fragment,m),i=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(s.$$.fragment,m),i=!1},d(m){m&&(p(n),p(o)),w(e,m),w(t,m),w(s,m)}}}function qu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Dt(!1),t=Me(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Wu(r){let e,n;return e=new ce({props:{$$slots:{default:[qu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Vu(r){let e,n;const t=[H(Ve),{sourceLayer:Ve},{paint:{"line-color":ke(["get",r[1]],r[4],r[3]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ve?"visible":"none"}}];let l={$$slots:{default:[Wu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&31?te(t,[s&0&&ie(H(Ve)),s&0&&{sourceLayer:Ve},s&26&&{paint:{"line-color":ke(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==Ve?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Xu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Dt(!1),t=Me(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Yu(r){let e,n;return e=new ce({props:{$$slots:{default:[Xu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qu(r){let e,n;const t=[H(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",r[1]],r[4],r[3]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==ft?"visible":"none"}}];let l={$$slots:{default:[Yu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&31?te(t,[s&0&&ie(H(ft)),s&0&&{sourceLayer:ft},t[2],t[3],s&26&&{paint:{"line-color":ke(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ft?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Ju(r){let e,n,t,l,o,s,f,i;function a(g){r[6](g)}let u={id:Ve,$$slots:{right:[Uu],default:[Bu]},$$scope:{ctx:r}};r[2]!==void 0&&(u.checked=r[2]),e=new ae({props:u}),W.push(()=>V(e,"checked",a));let c=r[2]&&Mr(r);return o=new we({props:{url:`pmtiles://${ve()}/v1/${Ve}.pmtiles`,$$slots:{default:[Vu]},$$scope:{ctx:r}}}),f=new we({props:{url:`pmtiles://${ve()}/v1/${ft}.pmtiles`,$$slots:{default:[Qu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),c&&c.c(),l=L(),b(o.$$.fragment),s=L(),b(f.$$.fragment)},m(g,m){v(e,g,m),$(g,t,m),c&&c.m(g,m),$(g,l,m),v(o,g,m),$(g,s,m),v(f,g,m),i=!0},p(g,[m]){const y={};m&1024&&(y.$$scope={dirty:m,ctx:g}),!n&&m&4&&(n=!0,y.checked=g[2],X(()=>n=!1)),e.$set(y),g[2]?c?(c.p(g,m),m&4&&_(c,1)):(c=Mr(g),c.c(),_(c,1),c.m(l.parentNode,l)):c&&(_e(),d(c,1,1,()=>{c=null}),ge());const A={};m&1031&&(A.$$scope={dirty:m,ctx:g}),o.$set(A);const T={};m&1031&&(T.$$scope={dirty:m,ctx:g}),f.$set(T)},i(g){i||(_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(f.$$.fragment,g),i=!0)},o(g){d(e.$$.fragment,g),d(c),d(o.$$.fragment,g),d(f.$$.fragment,g),i=!1},d(g){g&&(p(t),p(l),p(s)),w(e,g),c&&c.d(g),w(o,g),w(f,g)}}}let Ve="pct_commute",ft="pct_school";function Ku(r,e,n){let t=se.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ve,s="baseline",f=!1;function i(g){let m=g.baseline,y=g.gov_target,A=g.go_dutch,T=`<h2>Trip purpose: ${o==Ve?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)T+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${A.toLocaleString()}</b></p>`;else{let O=(y/m).toFixed(1),F=(A/m).toFixed(1);T+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${O}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${A.toLocaleString()} (<b>${F}x</b> of baseline)</p>`}return T}function a(g){f=g,n(2,f)}function u(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,f,t,l,i,a,u,c]}class Zu extends J{constructor(e){super(),K(this,e,Ku,Ju,Y,{})}}function xu(r){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ec(r){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tc(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nc(r){let e,n,t,l,o,s,f,i,a,u,c,g;return t=new Q({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[ec]},$$scope:{ctx:r}}}),u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[tc]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),l=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),s=C("p"),s.textContent="Data valid as of 1 September, 2023",f=L(),i=C("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),c=k(".")},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,l),$(m,o,y),$(m,s,y),$(m,f,y),$(m,i,y),h(i,a),v(u,i,null),h(i,c),g=!0},p(m,y){const A={};y&256&&(A.$$scope={dirty:y,ctx:m}),t.$set(A);const T={};y&256&&(T.$$scope={dirty:y,ctx:m}),u.$set(T)},i(m){g||(_(t.$$.fragment,m),_(u.$$.fragment,m),g=!0)},o(m){d(t.$$.fragment,m),d(u.$$.fragment,m),g=!1},d(m){m&&(p(e),p(o),p(s),p(f),p(i)),w(t),w(u)}}}function rc(r){let e,n,t;return n=new de({props:{$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Nr(r){let e,n,t,l,o;e=new Ke({props:{colorScale:r[2],limits:r[3]}});function s(i){r[6](i)}let f={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(f.value=r[0]),t=new il({props:f}),W.push(()=>V(t,"value",s)),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const u={};!l&&a&1&&(l=!0,u.value=i[0],X(()=>l=!1)),t.$set(u)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function lc(r){let e,n,t=r[7].indicative_mph+"",l,o,s,f,i,a=r[7].highest_mph+"",u,c,g=r[4][r[7].highest_description]+"",m,y;return{c(){e=C("p"),n=k("Posted speed limit: "),l=k(t),o=k(" mph"),s=L(),f=C("p"),i=k("Highest average speed: "),u=k(a),c=k(" mph (during "),m=k(g),y=k(")")},m(A,T){$(A,e,T),h(e,n),h(e,l),h(e,o),$(A,s,T),$(A,f,T),h(f,i),h(f,u),h(f,c),h(f,m),h(f,y)},p(A,T){T&128&&t!==(t=A[7].indicative_mph+"")&&B(l,t),T&128&&a!==(a=A[7].highest_mph+"")&&B(u,a),T&128&&g!==(g=A[4][A[7].highest_description]+"")&&B(m,g)},d(A){A&&(p(e),p(s),p(f))}}}function oc(r){let e,n;return e=new ce({props:{$$slots:{default:[lc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function sc(r){let e,n;const t=[H(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",r[0]],r[3],r[2]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[oc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&15?te(t,[s&0&&ie(H(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&13&&{paint:{"line-color":ke(["get",o[0]],o[3],o[2]),"line-width":ze,"line-opacity":Z(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function ic(r){let e,n,t,l,o,s;function f(u){r[5](u)}let i={id:wt,$$slots:{right:[rc],default:[xu]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[1]&&Nr(r);return o=new we({props:{url:`pmtiles://${nn()}/v1/${wt}.pmtiles`,$$slots:{default:[sc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,g.checked=u[1],X(()=>n=!1)),e.$set(g),u[1]?a?(a.p(u,c),c&2&&_(a,1)):(a=Nr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&259&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let wt="road_speeds";function ac(r,e,n){let t=se.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",s=!1,f={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(u){s=u,n(1,s)}function a(u){o=u,n(0,o)}return[o,s,t,l,f,i,a]}class fc extends J{constructor(e){super(),K(this,e,ac,ic,Y,{})}}function uc(r){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cc(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $c(r){let e,n,t,l,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[cc]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",l=L(),o=C("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),h(o,s),v(f,o,null),h(o,i),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),f.$set(g)},i(u){a||(_(f.$$.fragment,u),a=!0)},o(u){d(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),w(f)}}}function pc(r){let e,n,t;return n=new de({props:{$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Fr(r){let e,n;return e=new Ke({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mc(r){let e,n,t,l=r[4].average+"",o,s,f,i,a,u,c=r[4].minimum+"",g,m;return{c(){e=C("p"),n=k("Average width: "),t=C("b"),o=k(l),s=k(`
        meters`),f=L(),i=C("p"),a=k("Minimum width: "),u=C("b"),g=k(c),m=k(`
        meters`)},m(y,A){$(y,e,A),h(e,n),h(e,t),h(t,o),h(e,s),$(y,f,A),$(y,i,A),h(i,a),h(i,u),h(u,g),h(i,m)},p(y,A){A&16&&l!==(l=y[4].average+"")&&B(o,l),A&16&&c!==(c=y[4].minimum+"")&&B(g,c)},d(y){y&&(p(e),p(f),p(i))}}}function _c(r){let e,n;return e=new ce({props:{$$slots:{default:[mc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gc(r){let e,n;const t=[H(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],r[2],r[1]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[_c]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&ie(H(kt)),s&0&&{sourceLayer:kt},t[2],t[3],s&6&&{paint:{"line-color":ke(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function dc(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:kt,$$slots:{right:[pc],default:[uc]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&Fr(r);return o=new we({props:{url:`pmtiles://${nn()}/v1/${kt}.pmtiles`,$$slots:{default:[gc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Fr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let kt="road_widths";function hc(r,e,n){let t=se.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class bc extends J{constructor(e){super(),K(this,e,hc,dc,Y,{})}}function vc(r){let e,n,t;return{c(){e=C("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=it(e,"change",r[5]),n=!0)},p:le,d(l){l&&p(e),r[7](null),n=!1,t()}}}function Er(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[kc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function wc(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new Oe({props:{color:Et}}),{c(){b(e.$$.fragment),n=k(`
        Show `),l=k(t),o=k(" issues")},m(f,i){v(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p(f,i){(!s||i&4)&&t!==(t=f[2].toLocaleString()+"")&&B(l,t)},i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),w(e,f)}}}function kc(r){let e,n,t;function l(s){r[8](s)}let o={id:"show-criticals",$$slots:{default:[wc]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ae({props:o}),W.push(()=>V(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,f){v(e,s,f),t=!0},p(s,f){const i={};f&2052&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function yc(r){let e,n,t,l,o,s;e=new cn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[vc]},$$scope:{ctx:r}}}),t=new al({props:{errorMessage:r[3]}});let f=r[2]>0&&Er(r);return{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),f&&f.c(),o=Me()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),f&&f.m(i,a),$(i,o,a),s=!0},p(i,a){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?f?(f.p(i,a),a&4&&_(f,1)):(f=Er(i),f.c(),_(f,1),f.m(o.parentNode,o)):f&&(_e(),d(f,1,1,()=>{f=null}),ge())},i(i){s||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(f),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(f),s=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),f&&f.d(i)}}}function Sc(r){let e,n,t=r[10].critical_type+"",l,o,s,f,i,a=r[10].location_description+"",u,c,g,m,y,A=r[10].notes+"",T,O,F,D,E,I,P,N=r[10].id+"",S,M,U,R,j,z=(r[10].inspector??"???")+"",q,x,ne,ue=r[10].submission_time+"",Le,Te,oe,Ae,fe,$e=r[10].scheme_reference+"",pe,De,Ne,Se=r[10].current_design_stage+"",Ze;return{c(){e=C("div"),n=C("h2"),l=k(t),o=L(),s=C("p"),f=C("u"),f.textContent="Location",i=k(`
          : `),u=k(a),c=L(),g=C("p"),m=C("u"),m.textContent="Notes",y=k(`
          : `),T=k(A),O=L(),F=C("hr"),D=L(),E=C("p"),I=k("Critical issue ID: "),P=C("b"),S=k(N),M=L(),U=C("p"),R=k("Submitted by "),j=C("b"),q=k(z),x=k(`
          at
          `),ne=C("b"),Le=k(ue),Te=L(),oe=C("p"),Ae=k("For scheme "),fe=C("b"),pe=k($e),De=k(`
          in stage
          `),Ne=C("b"),Ze=k(Se),Ce(e,"max-width","30vw")},m(re,he){$(re,e,he),h(e,n),h(n,l),h(e,o),h(e,s),h(s,f),h(s,i),h(s,u),h(e,c),h(e,g),h(g,m),h(g,y),h(g,T),h(e,O),h(e,F),h(e,D),h(e,E),h(E,I),h(E,P),h(P,S),h(e,M),h(e,U),h(U,R),h(U,j),h(j,q),h(U,x),h(U,ne),h(ne,Le),h(e,Te),h(e,oe),h(oe,Ae),h(oe,fe),h(fe,pe),h(oe,De),h(oe,Ne),h(Ne,Ze)},p(re,he){he&1024&&t!==(t=re[10].critical_type+"")&&B(l,t),he&1024&&a!==(a=re[10].location_description+"")&&B(u,a),he&1024&&A!==(A=re[10].notes+"")&&B(T,A),he&1024&&N!==(N=re[10].id+"")&&B(S,N),he&1024&&z!==(z=(re[10].inspector??"???")+"")&&B(q,z),he&1024&&ue!==(ue=re[10].submission_time+"")&&B(Le,ue),he&1024&&$e!==($e=re[10].scheme_reference+"")&&B(pe,$e),he&1024&&Se!==(Se=re[10].current_design_stage+"")&&B(Ze,Se)},d(re){re&&p(e)}}}function Cc(r){let e,n;return e=new ce({props:{$$slots:{default:[Sc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Tc(r){let e,n,t,l,o,s;const f=[H(`${lt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Et,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let m=0;m<f.length;m+=1)i=ee(i,f[m]);e=new tt({props:i}),e.$on("click",r[6]);const a=[H(`${lt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let u={};for(let m=0;m<a.length;m+=1)u=ee(u,a[m]);t=new so({props:u});const c=[H(`${lt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Et,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let g={$$slots:{default:[Cc]},$$scope:{ctx:r}};for(let m=0;m<c.length;m+=1)g=ee(g,c[m]);return o=new tt({props:g}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,l,y),v(o,m,y),s=!0},p(m,y){const A=y&2?te(f,[y&0&&ie(H(`${lt}-clusters`)),f[1],y&0&&{paint:{"circle-color":Et,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:m[1]?"visible":"none"}},f[4]]):{};e.$set(A);const T=y&2?te(a,[y&0&&ie(H(`${lt}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:m[1]?"visible":"none"}}]):{};t.$set(T);const O=y&2?te(c,[y&0&&ie(H(`${lt}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":Et,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:m[1]?"visible":"none"}}]):{};y&2048&&(O.$$scope={dirty:y,ctx:m}),o.$set(O)},i(m){s||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(o.$$.fragment,m),s=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),s=!1},d(m){m&&(p(n),p(l)),w(e,m),w(t,m),w(o,m)}}}function Oc(r){let e,n,t,l;return e=new Be({props:{label:"Critical Issues",$$slots:{default:[yc]},$$scope:{ctx:r}}}),t=new Pt({props:{id:lt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&2063&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let lt="criticals",Et="red";function Ac(r,e,n){let t;be(r,kn,m=>n(9,t=m));let l,o=!0,s=0,f="",i=Pl();async function a(m){try{n(4,i=await $i(l.files[0])),n(2,s=i.features.length),n(3,f="")}catch(y){n(3,f=`The file you loaded is broken: ${y}`)}}function u(m){t.getSource(lt).getClusterExpansionZoom(m.detail.features[0].properties.cluster_id,(y,A)=>{y||t.easeTo({center:m.detail.features[0].geometry.coordinates,zoom:A})})}function c(m){W[m?"unshift":"push"](()=>{l=m,n(0,l)})}function g(m){o=m,n(1,o)}return[l,o,s,f,i,a,u,c,g]}class Lc extends J{constructor(e){super(),K(this,e,Ac,Oc,Y,{})}}function Ic(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Crossings`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Pc(r){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mc(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Pc]},$$scope:{ctx:r}}}),s=new at({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Nc(r){let e,n,t;return n=new de({props:{$$slots:{default:[Mc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Fc(r){let e,n=Dr(r[3])+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=Dr(l[3])+"")&&B(t,n)},d(l){l&&p(e)}}}function Ec(r){let e,n;return e=new ce({props:{$$slots:{default:[Fc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Dc(r){let e,n;const t=[H(yt),{sourceLayer:yt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Ec]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new tt({props:l}),e.$on("click",Rc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(H(yt)),s&0&&{sourceLayer:yt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function jc(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:yt,$$slots:{right:[Nc],default:[Ic]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${yt}.pmtiles`,$$slots:{default:[Dc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let yt="crossings";function Dr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Rc(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Bc(r,e,n){let t=se.crossings,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Hc extends J{constructor(e){super(),K(this,e,Bc,jc,Y,{})}}function zc(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Cycle parking`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Gc(r){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uc(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Gc]},$$scope:{ctx:r}}}),s=new at({}),{c(){e=C("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),l=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function qc(r){let e,n,t;return n=new de({props:{$$slots:{default:[Uc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Wc(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=C("p"),n=k("Capacity: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8&&l!==(l=(s[3].capacity??"unknown")+"")&&B(o,l)},d(s){s&&p(e)}}}function Vc(r){let e,n;return e=new ce({props:{$$slots:{default:[Wc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Xc(r){let e,n;const t=[H(St),{sourceLayer:St},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Vc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new tt({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(H(St)),s&0&&{sourceLayer:St},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Yc(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:St,$$slots:{right:[qc],default:[zc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${St}.pmtiles`,$$slots:{default:[Xc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let St="cycle_parking";function Qc(r,e,n){let t=se.cycle_parking,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Jc extends J{constructor(e){super(),K(this,e,Qc,Yc,Y,{})}}function Kc(r){let e,n,t,l;return e=new Oe({props:{color:r[4]}}),{c(){b(e.$$.fragment),n=L(),t=k(r[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),l=!0},p(o,s){(!l||s&4)&&B(t,o[2])},i(o){l||(_(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function Zc(r){let e;const n=r[5].default,t=zt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Gt(t,n,l,l[7],e?qt(n,l[7],o,null):Ut(l[7]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function xc(r){let e,n,t;return n=new de({props:{$$slots:{default:[Zc]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function e$(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&B(t,n)},d(l){l&&p(e)}}}function t$(r){let e,n;return e=new ce({props:{$$slots:{default:[e$,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function n$(r){let e,n;const t=[H(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Z(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[t$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Je({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&25?te(t,[s&1&&ie(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Z(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function r$(r){let e,n,t,l,o;function s(i){r[6](i)}let f={id:r[0],$$slots:{right:[xc],default:[Kc]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.checked=r[3]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${r[0]}.pmtiles`,$$slots:{default:[n$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&1&&(u.id=i[0]),a&132&&(u.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,u.checked=i[3],X(()=>n=!1)),e.$set(u);const c={};a&1&&(c.url=`pmtiles://${ve()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function l$(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:f}=e,i=se[o],a=!1;function u(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,f=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,s,f,a,i,t,u,l]}class Cn extends J{constructor(e){super(),K(this,e,l$,r$,Y,{name:0,singularNoun:1,pluralNoun:2})}}function o$(r){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function s$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[o$]},$$scope:{ctx:r}}}),s=new at({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function i$(r){let e,n;return e=new Cn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[s$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class a$ extends J{constructor(e){super(),K(this,e,null,i$,Y,{})}}function f$(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Railway Stations`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function u$(r){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function c$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[u$]},$$scope:{ctx:r}}}),s=new at({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function $$(r){let e,n,t;return n=new de({props:{$$slots:{default:[c$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function p$(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&B(t,n)},d(l){l&&p(e)}}}function m$(r){let e,n;return e=new ce({props:{$$slots:{default:[p$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _$(r){let e,n;const t=[H(en),{paint:{"circle-color":r[1],"circle-radius":Kt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[m$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new tt({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(H(en)),s&2&&{paint:{"circle-color":o[1],"circle-radius":Kt/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function g$(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:en,$$slots:{right:[$$],default:[f$]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new Pt({props:{data:`${ve()}/v1/${en}.geojson`,$$slots:{default:[_$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let en="railway_stations";function d$(r,e,n){let t=se.railway_stations,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class h$ extends J{constructor(e){super(),K(this,e,d$,g$,Y,{})}}function b$(r){let e;return{c(){e=k("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function v$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[b$]},$$scope:{ctx:r}}}),s=new at({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function w$(r){let e,n;return e=new Cn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[v$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class k$ extends J{constructor(e){super(),K(this,e,null,w$,Y,{})}}function y$(r){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function S$(r){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function C$(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[y$]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[S$]},$$scope:{ctx:r}}}),i=new at({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),l=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),f=L(),b(i.$$.fragment)},m(u,c){$(u,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(u,f,c),v(i,u,c),a=!0},p(u,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const m={};c&1&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){d(t.$$.fragment,u),d(o.$$.fragment,u),d(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),w(t),w(o),w(i,u)}}}function T$(r){let e,n;return e=new Cn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[C$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class O$ extends J{constructor(e){super(),K(this,e,null,T$,Y,{})}}function A$(r){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function L$(r){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function I$(r){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function P$(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,A,T,O,F,D,E,I,P,N;return t=new Q({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[L$]},$$scope:{ctx:r}}}),O=new Q({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[I$]},$$scope:{ctx:r}}}),P=new Ee({}),{c(){e=C("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),l=k(" dataset. Please note these limitations:"),o=L(),s=C("ul"),f=C("li"),f.textContent="Only collisions between 2017 and 2022 are included",i=L(),a=C("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,u=L(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=L(),m=C("li"),m.textContent='The "pedestrians" category also include mobility scooters',y=L(),A=C("li"),T=k("All limitations "),b(O.$$.fragment),F=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),D=L(),E=C("p"),E.textContent="You can click a point to open the full report, thanks to CycleStreets.",I=L(),b(P.$$.fragment)},m(S,M){$(S,e,M),h(e,n),v(t,e,null),h(e,l),$(S,o,M),$(S,s,M),h(s,f),h(s,i),h(s,a),h(s,u),h(s,c),h(s,g),h(s,m),h(s,y),h(s,A),h(A,T),v(O,A,null),h(A,F),$(S,D,M),$(S,E,M),$(S,I,M),v(P,S,M),N=!0},p(S,M){const U={};M&16777216&&(U.$$scope={dirty:M,ctx:S}),t.$set(U);const R={};M&16777216&&(R.$$scope={dirty:M,ctx:S}),O.$set(R)},i(S){N||(_(t.$$.fragment,S),_(O.$$.fragment,S),_(P.$$.fragment,S),N=!0)},o(S){d(t.$$.fragment,S),d(O.$$.fragment,S),d(P.$$.fragment,S),N=!1},d(S){S&&(p(e),p(o),p(s),p(D),p(E),p(I)),w(t),w(O),w(P,S)}}}function M$(r){let e,n,t;return n=new de({props:{$$slots:{default:[P$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function jr(r){let e,n,t,l,o,s,f,i,a,u,c,g,m;return n=new nt({props:{small:!0,$$slots:{default:[j$]},$$scope:{ctx:r}}}),u=new fl({props:{rows:r[14]}}),{c(){e=C("div"),b(n.$$.fragment),t=L(),l=C("div"),o=k(`Filter years:
      `),s=C("input"),f=k(`
      -
      `),i=C("input"),a=L(),b(u.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(y,A){$(y,e,A),v(n,e,null),h(e,t),h(e,l),h(l,o),h(l,s),Ye(s,r[4]),h(l,f),h(l,i),Ye(i,r[5]),h(e,a),v(u,e,null),c=!0,g||(m=[it(s,"input",r[20]),it(i,"input",r[21])],g=!0)},p(y,A){const T={};A&16777231&&(T.$$scope={dirty:A,ctx:y}),n.$set(T),A&16&&Rt(s.value)!==y[4]&&Ye(s,y[4]),A&32&&Rt(i.value)!==y[5]&&Ye(i,y[5])},i(y){c||(_(n.$$.fragment,y),_(u.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(u.$$.fragment,y),c=!1},d(y){y&&p(e),w(n),w(u),g=!1,sl(m)}}}function N$(r){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function F$(r){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function E$(r){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function D$(r){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function j$(r){let e,n,t,l,o,s,f,i,a,u,c,g;function m(I){r[16](I)}let y={id:"stats19-pedestrians",$$slots:{default:[N$]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new ae({props:y}),W.push(()=>V(e,"checked",m));function A(I){r[17](I)}let T={id:"stats19-cyclists",$$slots:{default:[F$]},$$scope:{ctx:r}};r[1]!==void 0&&(T.checked=r[1]),l=new ae({props:T}),W.push(()=>V(l,"checked",A));function O(I){r[18](I)}let F={id:"stats19-horse-riders",$$slots:{default:[E$]},$$scope:{ctx:r}};r[2]!==void 0&&(F.checked=r[2]),f=new ae({props:F}),W.push(()=>V(f,"checked",O));function D(I){r[19](I)}let E={id:"stats19-other",$$slots:{default:[D$]},$$scope:{ctx:r}};return r[3]!==void 0&&(E.checked=r[3]),u=new ae({props:E}),W.push(()=>V(u,"checked",D)),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment),s=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment)},m(I,P){v(e,I,P),$(I,t,P),v(l,I,P),$(I,s,P),v(f,I,P),$(I,a,P),v(u,I,P),g=!0},p(I,P){const N={};P&16777216&&(N.$$scope={dirty:P,ctx:I}),!n&&P&1&&(n=!0,N.checked=I[0],X(()=>n=!1)),e.$set(N);const S={};P&16777216&&(S.$$scope={dirty:P,ctx:I}),!o&&P&2&&(o=!0,S.checked=I[1],X(()=>o=!1)),l.$set(S);const M={};P&16777216&&(M.$$scope={dirty:P,ctx:I}),!i&&P&4&&(i=!0,M.checked=I[2],X(()=>i=!1)),f.$set(M);const U={};P&16777216&&(U.$$scope={dirty:P,ctx:I}),!c&&P&8&&(c=!0,U.checked=I[3],X(()=>c=!1)),u.$set(U)},i(I){g||(_(e.$$.fragment,I),_(l.$$.fragment,I),_(f.$$.fragment,I),_(u.$$.fragment,I),g=!0)},o(I){d(e.$$.fragment,I),d(l.$$.fragment,I),d(f.$$.fragment,I),d(u.$$.fragment,I),g=!1},d(I){I&&(p(t),p(s),p(a)),w(e,I),w(l,I),w(f,I),w(u,I)}}}function Rr(r){let e,n,t,l=r[8][r[23].pedestrian_location]+"",o;return{c(){e=C("p"),n=k("Pedestrian location: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8388608&&l!==(l=s[8][s[23].pedestrian_location]+"")&&B(o,l)},d(s){s&&p(e)}}}function Br(r){let e,n,t,l=r[9][r[23].pedestrian_movement]+"",o;return{c(){e=C("p"),n=k("Pedestrian movement: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),h(e,n),h(e,t),h(t,o)},p(s,f){f&8388608&&l!==(l=s[9][s[23].pedestrian_movement]+"")&&B(o,l)},d(s){s&&p(e)}}}function R$(r){let e,n,t,l=r[23].year+"",o,s,f,i,a,u=r[10][r[23].severity]+"",c,g,m,y,A,T=Hr(r[23])+"",O,F,D,E,I,P=r[23].pedestrian_location&&Rr(r),N=r[23].pedestrian_movement&&Br(r);return{c(){e=C("p"),n=k("Year: "),t=C("b"),o=k(l),s=L(),f=C("p"),i=k("Severity: "),a=C("b"),c=k(u),g=L(),m=C("p"),y=k("Casualties: "),A=C("b"),O=k(T),F=L(),P&&P.c(),D=L(),N&&N.c(),E=L(),I=C("p"),I.textContent="Click to open full report in CycleStreets"},m(S,M){$(S,e,M),h(e,n),h(e,t),h(t,o),$(S,s,M),$(S,f,M),h(f,i),h(f,a),h(a,c),$(S,g,M),$(S,m,M),h(m,y),h(m,A),h(A,O),$(S,F,M),P&&P.m(S,M),$(S,D,M),N&&N.m(S,M),$(S,E,M),$(S,I,M)},p(S,M){M&8388608&&l!==(l=S[23].year+"")&&B(o,l),M&8388608&&u!==(u=S[10][S[23].severity]+"")&&B(c,u),M&8388608&&T!==(T=Hr(S[23])+"")&&B(O,T),S[23].pedestrian_location?P?P.p(S,M):(P=Rr(S),P.c(),P.m(D.parentNode,D)):P&&(P.d(1),P=null),S[23].pedestrian_movement?N?N.p(S,M):(N=Br(S),N.c(),N.m(E.parentNode,E)):N&&(N.d(1),N=null)},d(S){S&&(p(e),p(s),p(f),p(g),p(m),p(F),p(D),p(E),p(I)),P&&P.d(S),N&&N.d(S)}}}function B$(r){let e,n;return e=new ce({props:{$$slots:{default:[R$,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&25165824&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function H$(r){let e,n;const t=[H(Ct),{sourceLayer:Ct},{paint:{"circle-color":ke(["get","severity"],[1,2,3],[r[11],r[12],r[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[7]},{layout:{visibility:r[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[B$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new tt({props:l}),e.$on("click",G$),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&14528?te(t,[s&0&&ie(H(Ct)),s&0&&{sourceLayer:Ct},s&14336&&{paint:{"circle-color":ke(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function z$(r){let e,n,t,l,o,s;function f(u){r[15](u)}let i={id:Ct,$$slots:{right:[M$],default:[A$]},$$scope:{ctx:r}};r[6]!==void 0&&(i.checked=r[6]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[6]&&jr(r);return o=new we({props:{url:`pmtiles://${ve()}/v1/${Ct}.pmtiles`,$$slots:{default:[H$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:u}),!n&&c&64&&(n=!0,g.checked=u[6],X(()=>n=!1)),e.$set(g),u[6]?a?(a.p(u,c),c&64&&_(a,1)):(a=jr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&16777408&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Ct="stats19";function Hr(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function G$(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function U$(r,e,n){let t,l=!1,o=!0,s=!0,f=!0,i=!1,a=2017,u=2022;function c(U,R,j,z,q,x){let ne=["any"];return o&&ne.push(["get","pedestrian"]),s&&ne.push(["get","cyclist"]),f&&ne.push(["get","horse_rider"]),i&&ne.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],u],ne]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},m={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},A=se.sequential_low_to_high[4],T=se.sequential_low_to_high[2],O=se.sequential_low_to_high[0],F=[["Fatal",A],["Serious",T],["Slight",O]];function D(U){l=U,n(6,l)}function E(U){o=U,n(0,o)}function I(U){s=U,n(1,s)}function P(U){f=U,n(2,f)}function N(U){i=U,n(3,i)}function S(){a=Rt(this.value),n(4,a)}function M(){u=Rt(this.value),n(5,u)}return r.$$.update=()=>{r.$$.dirty&63&&n(7,t=c())},[o,s,f,i,a,u,l,t,g,m,y,A,T,O,F,D,E,I,P,N,S,M]}class q$ extends J{constructor(e){super(),K(this,e,U$,z$,Y,{})}}function W$(r){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function V$(r){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function X$(r){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Y$(r){let e,n,t,l,o,s,f,i,a,u,c;return t=new Q({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[V$]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[X$]},$$scope:{ctx:r}}}),u=new Ee({}),{c(){e=C("p"),n=k("2022 AADF (annual average daily flow) data from "),b(t.$$.fragment),l=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),f=L(),i=C("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=L(),b(u.$$.fragment)},m(g,m){$(g,e,m),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(g,f,m),$(g,i,m),$(g,a,m),v(u,g,m),c=!0},p(g,m){const y={};m&64&&(y.$$scope={dirty:m,ctx:g}),t.$set(y);const A={};m&64&&(A.$$scope={dirty:m,ctx:g}),o.$set(A)},i(g){c||(_(t.$$.fragment,g),_(o.$$.fragment,g),_(u.$$.fragment,g),c=!0)},o(g){d(t.$$.fragment,g),d(o.$$.fragment,g),d(u.$$.fragment,g),c=!1},d(g){g&&(p(e),p(f),p(i),p(a)),w(t),w(o),w(u,g)}}}function Q$(r){let e,n,t;return n=new de({props:{$$slots:{default:[Y$]},$$scope:{ctx:r}}}),{c(){e=C("span"),b(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function zr(r){let e,n;return e=new Ke({props:{colorScale:r[1],limits:r[3]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function J$(r){let e,n=r[5].location+"",t,l,o,s,f,i=r[5].motor_vehicles_2022.toLocaleString()+"",a,u,c,g,m,y=r[5].pedal_cycles_2022.toLocaleString()+"",A,T,O,F,D,E=r[5].method+"",I;return{c(){e=C("h2"),t=k(n),l=L(),o=C("p"),s=k("Total motor vehicles (2022 AADF): "),f=C("b"),a=k(i),u=L(),c=C("p"),g=k("Total pedal cycles (2022 AADF): "),m=C("b"),A=k(y),T=L(),O=C("p"),F=k("Count method: "),D=C("b"),I=k(E)},m(P,N){$(P,e,N),h(e,t),$(P,l,N),$(P,o,N),h(o,s),h(o,f),h(f,a),$(P,u,N),$(P,c,N),h(c,g),h(c,m),h(m,A),$(P,T,N),$(P,O,N),h(O,F),h(O,D),h(D,I)},p(P,N){N&32&&n!==(n=P[5].location+"")&&B(t,n),N&32&&i!==(i=P[5].motor_vehicles_2022.toLocaleString()+"")&&B(a,i),N&32&&y!==(y=P[5].pedal_cycles_2022.toLocaleString()+"")&&B(A,y),N&32&&E!==(E=P[5].method+"")&&B(I,E)},d(P){P&&(p(e),p(l),p(o),p(u),p(c),p(T),p(O))}}}function K$(r){let e,n;return e=new ce({props:{$$slots:{default:[J$,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Z$(r){let e,n;const t=[H(Tt),{sourceLayer:Tt},{paint:{"circle-color":ke(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[K$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new tt({props:l}),e.$on("click",ep),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&ie(H(Tt)),s&0&&{sourceLayer:Tt},s&6&&{paint:{"circle-color":ke(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function x$(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={id:Tt,$$slots:{right:[Q$],default:[W$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&zr(r);return o=new we({props:{url:`pmtiles://${ve()}/v1/${Tt}.pmtiles`,$$slots:{default:[Z$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(u,c){v(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),v(o,u,c),s=!0},p(u,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=zr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(_e(),d(a,1,1,()=>{a=null}),ge());const m={};c&65&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(a),d(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),w(e,u),a&&a.d(u),w(o,u)}}}let Tt="vehicle_counts";function ep(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function tp(r,e,n){let t=se.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function f(i){s=i,n(0,s)}return[s,t,l,o,f]}class np extends J{constructor(e){super(),K(this,e,tp,x$,Y,{})}}function rp(r){let e,n,t,l,o,s,f,i;return e=new k$({}),t=new a$({}),o=new O$({}),f=new h$({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){v(e,a,u),$(a,n,u),v(t,a,u),$(a,l,u),v(o,a,u),$(a,s,u),v(f,a,u),i=!0},i(a){i||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(f.$$.fragment,a),i=!1},d(a){a&&(p(n),p(l),p(s)),w(e,a),w(t,a),w(o,a),w(f,a)}}}function lp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[rp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function op(r){let e,n,t,l,o,s,f,i,a,u,c,g;return e=new au({}),t=new Au({}),o=new hu({}),f=new Qf({}),a=new Jc({}),c=new Hc({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),u=L(),b(c.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,l,y),v(o,m,y),$(m,s,y),v(f,m,y),$(m,i,y),v(a,m,y),$(m,u,y),v(c,m,y),g=!0},i(m){g||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(o.$$.fragment,m),_(f.$$.fragment,m),_(a.$$.fragment,m),_(c.$$.fragment,m),g=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),d(a.$$.fragment,m),d(c.$$.fragment,m),g=!1},d(m){m&&(p(n),p(l),p(s),p(i),p(u)),w(e,m),w(t,m),w(o,m),w(f,m),w(a,m),w(c,m)}}}function sp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[op]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ip(r){let e,n,t,l,o,s,f,i,a,u;return e=new $f({}),t=new Ef({}),o=new ha({}),f=new Ha({}),a=new ef({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(c,g){v(e,c,g),$(c,n,g),v(t,c,g),$(c,l,g),v(o,c,g),$(c,s,g),v(f,c,g),$(c,i,g),v(a,c,g),u=!0},i(c){u||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(f.$$.fragment,c),d(a.$$.fragment,c),u=!1},d(c){c&&(p(n),p(l),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(f,c),w(a,c)}}}function ap(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[ip]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function fp(r){let e,n,t,l;return e=new ia({}),t=new La({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function up(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[fp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cp(r){let e,n,t,l,o,s;return e=new bc({}),t=new Ru({}),o=new fc({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment)},m(f,i){v(e,f,i),$(f,n,i),v(t,f,i),$(f,l,i),v(o,f,i),s=!0},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l)),w(e,f),w(t,f),w(o,f)}}}function $p(r){let e,n,t,l,o,s,f=$n()=="Private (development)",i,a,u;e=new np({}),t=new q$({}),o=new Zu({});let c=f&&cp();return a=new Sf({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),c&&c.c(),i=L(),b(a.$$.fragment)},m(g,m){v(e,g,m),$(g,n,m),v(t,g,m),$(g,l,m),v(o,g,m),$(g,s,m),c&&c.m(g,m),$(g,i,m),v(a,g,m),u=!0},p:le,i(g){u||(_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),_(c),_(a.$$.fragment,g),u=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),d(c),d(a.$$.fragment,g),u=!1},d(g){g&&(p(n),p(l),p(s),p(i)),w(e,g),w(t,g),w(o,g),c&&c.d(g),w(a,g)}}}function pp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[$p]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mp(r){let e,n,t,l,o;function s(i){r[3](i)}let f={};return r[0]!==void 0&&(f.enabled=r[0]),e=new Rl({props:f}),W.push(()=>V(e,"enabled",s)),l=new ql({}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,a){const u={};!n&&a&1&&(n=!0,u.enabled=i[0],X(()=>n=!1)),e.$set(u)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function _p(r){let e,n,t,l,o,s,f,i,a,u,c,g,m,y,A,T;return e=new Lc({}),t=new Be({props:{label:"Trip generators",$$slots:{default:[lp]},$$scope:{ctx:r}}}),o=new Be({props:{label:"Existing infrastructure",$$slots:{default:[sp]},$$scope:{ctx:r}}}),f=new Be({props:{label:"Boundaries",$$slots:{default:[ap]},$$scope:{ctx:r}}}),a=new Be({props:{label:"Census",$$slots:{default:[up]},$$scope:{ctx:r}}}),c=new Be({props:{label:"Other",$$slots:{default:[pp]},$$scope:{ctx:r}}}),m=new Be({props:{label:"Tools",$$slots:{default:[mp]},$$scope:{ctx:r}}}),A=new jl({props:{disabled:!r[1]}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),u=L(),b(c.$$.fragment),g=L(),b(m.$$.fragment),y=L(),b(A.$$.fragment)},m(O,F){v(e,O,F),$(O,n,F),v(t,O,F),$(O,l,F),v(o,O,F),$(O,s,F),v(f,O,F),$(O,i,F),v(a,O,F),$(O,u,F),v(c,O,F),$(O,g,F),v(m,O,F),$(O,y,F),v(A,O,F),T=!0},p(O,F){const D={};F&16&&(D.$$scope={dirty:F,ctx:O}),t.$set(D);const E={};F&16&&(E.$$scope={dirty:F,ctx:O}),o.$set(E);const I={};F&16&&(I.$$scope={dirty:F,ctx:O}),f.$set(I);const P={};F&16&&(P.$$scope={dirty:F,ctx:O}),a.$set(P);const N={};F&16&&(N.$$scope={dirty:F,ctx:O}),c.$set(N);const S={};F&17&&(S.$$scope={dirty:F,ctx:O}),m.$set(S);const M={};F&2&&(M.disabled=!O[1]),A.$set(M)},i(O){T||(_(e.$$.fragment,O),_(t.$$.fragment,O),_(o.$$.fragment,O),_(f.$$.fragment,O),_(a.$$.fragment,O),_(c.$$.fragment,O),_(m.$$.fragment,O),_(A.$$.fragment,O),T=!0)},o(O){d(e.$$.fragment,O),d(t.$$.fragment,O),d(o.$$.fragment,O),d(f.$$.fragment,O),d(a.$$.fragment,O),d(c.$$.fragment,O),d(m.$$.fragment,O),d(A.$$.fragment,O),T=!1},d(O){O&&(p(n),p(l),p(s),p(i),p(u),p(g),p(y)),w(e,O),w(t,O),w(o,O),w(f,O),w(a,O),w(c,O),w(m,O),w(A,O)}}}function gp(r){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Je({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const f=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function dp(r){let e,n,t,l;return e=new Be({props:{label:"Layers",open:!0,$$slots:{default:[_p]},$$scope:{ctx:r}}}),t=new Pt({props:{data:r[2],$$slots:{default:[gp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const f={};s&19&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function hp(r,e,n){let t,l;be(r,or,f=>n(1,l=f));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(f){t=f,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&or.set(!t)},[t,l,o,s]}class bp extends J{constructor(e){super(),K(this,e,hp,dp,Y,{})}}function Gr(r){let e;return{c(){e=C("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vp(r){let e,n=r[0]&&Gr();return{c(){n&&n.c(),e=Me()},m(t,l){n&&n.m(t,l),$(t,e,l)},p(t,[l]){t[0]?n||(n=Gr(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:le,o:le,d(t){t&&p(e),n&&n.d(t)}}}function wp(r,e,n){let{loadFile:t}=e,l=!0;return yn(async()=>{let s=await(await fetch(`${nn()}/v1/random_schemes.geojson`)).text();t(s),n(0,l=!1)}),r.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[l,t]}class kp extends J{constructor(e){super(),K(this,e,wp,vp,Y,{loadFile:1})}}function Ur(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=C("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),h(e,n),h(e,l)},p(s,f){var i;f&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&B(l,t)},d(s){s&&p(e)}}}function yp(r){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sp(r){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cp(r){let e,n,t,l;return e=new Lt({props:{$$slots:{default:[yp]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Lt({props:{$$slots:{default:[Sp]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Tp(r){var M,U,R,j;let e,n,t=r[0].scheme_reference+"",l,o,s,f,i=((M=r[0].browse)==null?void 0:M.authority_or_region)+"",a,u,c,g,m=((U=r[0].browse)==null?void 0:U.capital_scheme_id)+"",y,A,T,O,F=((R=r[0].browse)==null?void 0:R.funding_programme)+"",D,E,I,P,N,S=((j=r[0].browse)==null?void 0:j.current_milestone)&&Ur(r);return P=new Bl({props:{$$slots:{default:[Cp]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("Scheme reference: "),l=k(t),o=L(),s=C("p"),f=k("Authority or region: "),a=k(i),u=L(),c=C("p"),g=k("Capital scheme ID: "),y=k(m),A=L(),T=C("p"),O=k("Funding programme: "),D=k(F),E=L(),S&&S.c(),I=L(),b(P.$$.fragment)},m(z,q){$(z,e,q),h(e,n),h(e,l),$(z,o,q),$(z,s,q),h(s,f),h(s,a),$(z,u,q),$(z,c,q),h(c,g),h(c,y),$(z,A,q),$(z,T,q),h(T,O),h(T,D),$(z,E,q),S&&S.m(z,q),$(z,I,q),v(P,z,q),N=!0},p(z,q){var ne,ue,Le,Te;(!N||q&1)&&t!==(t=z[0].scheme_reference+"")&&B(l,t),(!N||q&1)&&i!==(i=((ne=z[0].browse)==null?void 0:ne.authority_or_region)+"")&&B(a,i),(!N||q&1)&&m!==(m=((ue=z[0].browse)==null?void 0:ue.capital_scheme_id)+"")&&B(y,m),(!N||q&1)&&F!==(F=((Le=z[0].browse)==null?void 0:Le.funding_programme)+"")&&B(D,F),(Te=z[0].browse)!=null&&Te.current_milestone?S?S.p(z,q):(S=Ur(z),S.c(),S.m(I.parentNode,I)):S&&(S.d(1),S=null);const x={};q&32&&(x.$$scope={dirty:q,ctx:z}),P.$set(x)},i(z){N||(_(P.$$.fragment,z),N=!0)},o(z){d(P.$$.fragment,z),N=!1},d(z){z&&(p(e),p(o),p(s),p(u),p(c),p(A),p(T),p(E),p(I)),S&&S.d(z),w(P,z)}}}function Op(r){let e,n;return e=new Be({props:{label:`${r[0].scheme_name}`,$$slots:{default:[Tp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_name}`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ap(r,e,n){let t,l;be(r,It,i=>n(3,t=i)),be(r,kn,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(Ml(i),{padding:20,animate:!1})}function f(){var u,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((u=o.browse)==null?void 0:u.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,f]}class Lp extends J{constructor(e){super(),K(this,e,Ap,Op,Y,{scheme:0})}}function qr(r){let e,n,t=Nn(r[0].length_meters)+"",l;return{c(){e=C("p"),n=k("Length: "),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,l)},p(o,s){s&1&&t!==(t=Nn(o[0].length_meters)+"")&&B(l,t)},d(o){o&&p(e)}}}function Wr(r){let e,n=ot(r[0].description,r[2])+"";return{c(){e=C("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&5&&n!==(n=ot(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Vr(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=C("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),h(e,n),h(e,l)},p(s,f){var i;f&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&B(l,t)},d(s){s&&p(e)}}}function Ip(r){var De,Ne,Se,Ze;let e,n,t,l=ot(r[0].name,r[2])+"",o,s=r[0].intervention_type+"",f,i,a,u,c,g,m,y,A,T,O=ot(r[1].scheme_name??"",r[3])+"",F,D,E=ot(r[0].scheme_reference,r[3])+"",I,P,N,S,M=((De=r[1].browse)==null?void 0:De.authority_or_region)+"",U,R,j,z,q=((Ne=r[1].browse)==null?void 0:Ne.capital_scheme_id)+"",x,ne,ue,Le,Te=((Se=r[1].browse)==null?void 0:Se.funding_programme)+"",oe,Ae,fe=r[0].length_meters&&qr(r),$e=r[0].description&&Wr(r),pe=((Ze=r[1].browse)==null?void 0:Ze.current_milestone)&&Vr(r);return{c(){e=C("div"),n=C("h2"),t=new Dt(!1),o=k(" ("),f=k(s),i=k(")"),a=L(),fe&&fe.c(),u=L(),$e&&$e.c(),c=L(),g=C("hr"),m=L(),y=C("p"),A=k("Part of scheme: "),T=new Dt(!1),F=k(" ("),D=new Dt(!1),I=k(")"),P=L(),N=C("p"),S=k("Authority or region: "),U=k(M),R=L(),j=C("p"),z=k("Capital scheme ID: "),x=k(q),ne=L(),ue=C("p"),Le=k("Funding programme: "),oe=k(Te),Ae=L(),pe&&pe.c(),t.a=o,T.a=F,D.a=I,Ce(e,"max-width","30vw")},m(re,he){$(re,e,he),h(e,n),t.m(l,n),h(n,o),h(n,f),h(n,i),h(e,a),fe&&fe.m(e,null),h(e,u),$e&&$e.m(e,null),h(e,c),h(e,g),h(e,m),h(e,y),h(y,A),T.m(O,y),h(y,F),D.m(E,y),h(y,I),h(e,P),h(e,N),h(N,S),h(N,U),h(e,R),h(e,j),h(j,z),h(j,x),h(e,ne),h(e,ue),h(ue,Le),h(ue,oe),h(e,Ae),pe&&pe.m(e,null)},p(re,[he]){var On,An,Ln,In;he&5&&l!==(l=ot(re[0].name,re[2])+"")&&t.p(l),he&1&&s!==(s=re[0].intervention_type+"")&&B(f,s),re[0].length_meters?fe?fe.p(re,he):(fe=qr(re),fe.c(),fe.m(e,u)):fe&&(fe.d(1),fe=null),re[0].description?$e?$e.p(re,he):($e=Wr(re),$e.c(),$e.m(e,c)):$e&&($e.d(1),$e=null),he&10&&O!==(O=ot(re[1].scheme_name??"",re[3])+"")&&T.p(O),he&9&&E!==(E=ot(re[0].scheme_reference,re[3])+"")&&D.p(E),he&2&&M!==(M=((On=re[1].browse)==null?void 0:On.authority_or_region)+"")&&B(U,M),he&2&&q!==(q=((An=re[1].browse)==null?void 0:An.capital_scheme_id)+"")&&B(x,q),he&2&&Te!==(Te=((Ln=re[1].browse)==null?void 0:Ln.funding_programme)+"")&&B(oe,Te),(In=re[1].browse)!=null&&In.current_milestone?pe?pe.p(re,he):(pe=Vr(re),pe.c(),pe.m(e,null)):pe&&(pe.d(1),pe=null)},i:le,o:le,d(re){re&&p(e),fe&&fe.d(),$e&&$e.d(),pe&&pe.d()}}}function ot(r,e){return e?r.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):r}function Pp(r,e,n){let t,l,o,s;be(r,xt,i=>n(4,l=i)),be(r,Nt,i=>n(2,o=i)),be(r,Ft,i=>n(3,s=i));let{props:f}=e;return r.$$set=i=>{"props"in i&&n(0,f=i.props)},r.$$.update=()=>{r.$$.dirty&17&&n(1,t=l.get(f.scheme_reference))},[f,t,o,s,l]}class Tn extends J{constructor(e){super(),K(this,e,Pp,Ip,Y,{props:0})}}function Mp(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Np(r){let e,n;return e=new Tn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Fp(r){let e,n,t,l;return e=new ce({props:{popupClass:"border-popup",$$slots:{default:[Mp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Np,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Ep(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Dp(r){let e,n;return e=new Tn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function jp(r){let e,n,t,l;return e=new ce({props:{popupClass:"border-popup",$$slots:{default:[Ep,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Dp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Rp(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Bp(r){let e,n;return e=new Tn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hp(r){let e,n,t,l;return e=new ce({props:{popupClass:"border-popup",$$slots:{default:[Rp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Bp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function zp(r){let e,n,t,l,o,s,f,i,a,u;const c=[H("interventions-points"),{filter:["all",Fn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Kt,"circle-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[Fp]},$$scope:{ctx:r}};for(let I=0;I<c.length;I+=1)g=ee(g,c[I]);e=new tt({props:g});const m=[H("interventions-lines"),{filter:["all",En,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Mt,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[jp]},$$scope:{ctx:r}};for(let I=0;I<m.length;I+=1)y=ee(y,m[I]);t=new ye({props:y});const A=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Mt,"circle-opacity":0,"circle-stroke-color":et.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let I=0;I<A.length;I+=1)T=ee(T,A[I]);o=new tt({props:T});const O=[H("interventions-polygons"),{filter:["all",Yt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":Z(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let F={$$slots:{default:[Hp]},$$scope:{ctx:r}};for(let I=0;I<O.length;I+=1)F=ee(F,O[I]);f=new Je({props:F});const D=[H("interventions-polygons-outlines"),{filter:["all",Yt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Mt}},{layout:{visibility:r[0]?"visible":"none"}}];let E={};for(let I=0;I<D.length;I+=1)E=ee(E,D[I]);return a=new ye({props:E}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(I,P){v(e,I,P),$(I,n,P),v(t,I,P),$(I,l,P),v(o,I,P),$(I,s,P),v(f,I,P),$(I,i,P),v(a,I,P),u=!0},p(I,P){const N=P&29?te(c,[c[0],P&24&&{filter:["all",Fn,I[3],I[4]]},c[2],c[3],P&4&&{paint:{"circle-color":I[2],"circle-radius":Kt,"circle-opacity":Z(1,.5)}},P&1&&{layout:{visibility:I[0]?"visible":"none"}},c[6]]):{};P&128&&(N.$$scope={dirty:P,ctx:I}),e.$set(N);const S=P&13?te(m,[m[0],P&8&&{filter:["all",En,I[3]]},m[2],m[3],P&4&&{paint:{"line-color":I[2],"line-width":Mt,"line-opacity":Z(1,.5)}},P&1&&{layout:{visibility:I[0]?"visible":"none"}},m[6]]):{};P&128&&(S.$$scope={dirty:P,ctx:I}),t.$set(S);const M=P&1?te(A,[A[0],A[1],A[2],{layout:{visibility:I[0]?"visible":"none"}}]):{};o.$set(M);const U=P&13?te(O,[O[0],P&8&&{filter:["all",Yt,I[3]]},O[2],O[3],P&4&&{paint:{"fill-color":I[2],"fill-opacity":Z(.2,.5)}},P&1&&{layout:{visibility:I[0]?"visible":"none"}},O[6]]):{};P&128&&(U.$$scope={dirty:P,ctx:I}),f.$set(U);const R=P&13?te(D,[D[0],P&8&&{filter:["all",Yt,I[3]]},P&4&&{paint:{"line-color":I[2],"line-opacity":.5,"line-width":.7*Mt}},P&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};a.$set(R)},i(I){u||(_(e.$$.fragment,I),_(t.$$.fragment,I),_(o.$$.fragment,I),_(f.$$.fragment,I),_(a.$$.fragment,I),u=!0)},o(I){d(e.$$.fragment,I),d(t.$$.fragment,I),d(o.$$.fragment,I),d(f.$$.fragment,I),d(a.$$.fragment,I),u=!1},d(I){I&&(p(n),p(l),p(s),p(i)),w(e,I),w(t,I),w(o,I),w(f,I),w(a,I)}}}function Gp(r){let e,n;return e=new Pt({props:{data:r[1],$$slots:{default:[zp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Up(r,e,n){let t,l;be(r,It,a=>n(5,l=a));let{showSchemes:o}=e,[s]=vn();const f=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=Nl(l))},[o,t,s,f,i,l]}class qp extends J{constructor(e){super(),K(this,e,Up,Gp,Y,{showSchemes:0})}}function Xr(r,e,n){const t=r.slice();return t[13]=e[n],t}function Yr(r,e,n){const t=r.slice();return t[16]=e[n],t}function Wp(r){let e,n;return e=new kp({props:{loadFile:r[7]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qr(r){let e,n,t,l,o;e=new Lt({props:{$$slots:{default:[Vp]},$$scope:{ctx:r}}}),e.$on("click",r[8]);function s(i){r[9](i)}let f={title:"About this scheme data",$$slots:{default:[Xp]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.open=r[3]),t=new el({props:f}),W.push(()=>V(t,"open",s)),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const u={};a&524288&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!l&&a&8&&(l=!0,c.open=i[3],X(()=>l=!1)),t.$set(c)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Vp(r){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jr(r){let e,n,t=r[16]+"",l;return{c(){e=C("li"),n=C("p"),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,l)},p(o,s){s&16&&t!==(t=o[16]+"")&&B(l,t)},d(o){o&&p(e)}}}function Xp(r){let e,n,t,l,o=Fe(r[4].notes),s=[];for(let f=0;f<o.length;f+=1)s[f]=Jr(Yr(r,o,f));return{c(){e=C("div"),n=C("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=L(),l=C("ul");for(let f=0;f<s.length;f+=1)s[f].c();G(e,"class","govuk-prose")},m(f,i){$(f,e,i),h(e,n),h(e,t),h(e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,null)},p(f,i){if(i&16){o=Fe(f[4].notes);let a;for(a=0;a<o.length;a+=1){const u=Yr(f,o,a);s[a]?s[a].p(u,i):(s[a]=Jr(u),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(f){f&&p(e),At(s,f)}}}function Kr(r){let e,n,t,l;function o(i){r[10](i)}function s(i){r[11](i)}let f={};return r[1]!==void 0&&(f.schemesToBeShown=r[1]),r[2]!==void 0&&(f.show=r[2]),e=new Ii({props:f}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),l=!0},p(i,a){const u={};!n&&a&2&&(n=!0,u.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,u.show=i[2],X(()=>t=!1)),e.$set(u)},i(i){l||(_(e.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),l=!1},d(i){w(e,i)}}}function Zr(r){let e,n;return e=new Lp({props:{scheme:r[13]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xr(r){let e=r[1].has(r[13].scheme_reference),n,t,l=e&&Zr(r);return{c(){l&&l.c(),n=Me()},m(o,s){l&&l.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?l?(l.p(o,s),s&66&&_(l,1)):(l=Zr(o),l.c(),_(l,1),l.m(n.parentNode,n)):l&&(_e(),d(l,1,1,()=>{l=null}),ge())},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function Yp(r){let e,n,t,l,o,s,f,i,a,u,c=$n()=="Private (development)",g,m,y,A,T,O,F,D,E;o=new Ul({props:{boundaryGeojson:r[4]}}),a=new Fl({});let I=c&&Wp(r),P=r[4].notes&&Qr(r);y=new zl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),T=new al({props:{errorMessage:r[0]}});let N=r[6].size>0&&Kr(r),S=Fe(r[6].values()),M=[];for(let R=0;R<S.length;R+=1)M[R]=xr(Xr(r,S,R));const U=R=>d(M[R],1,1,()=>{M[R]=null});return{c(){e=C("div"),n=C("div"),t=C("h1"),t.textContent="Browse schemes",l=L(),b(o.$$.fragment),s=L(),f=C("p"),f.textContent=`App version: ${$n()}`,i=L(),b(a.$$.fragment),u=L(),I&&I.c(),g=L(),P&&P.c(),m=L(),b(y.$$.fragment),A=L(),b(T.$$.fragment),O=L(),N&&N.c(),F=L(),D=C("ul");for(let R=0;R<M.length;R+=1)M[R].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(R,j){$(R,e,j),h(e,n),h(n,t),h(n,l),v(o,n,null),h(e,s),h(e,f),h(e,i),v(a,e,null),h(e,u),I&&I.m(e,null),h(e,g),P&&P.m(e,null),h(e,m),v(y,e,null),h(e,A),v(T,e,null),h(e,O),N&&N.m(e,null),h(e,F),h(e,D);for(let z=0;z<M.length;z+=1)M[z]&&M[z].m(D,null);E=!0},p(R,j){const z={};j&16&&(z.boundaryGeojson=R[4]),o.$set(z),c&&I.p(R,j),R[4].notes?P?(P.p(R,j),j&16&&_(P,1)):(P=Qr(R),P.c(),_(P,1),P.m(e,m)):P&&(_e(),d(P,1,1,()=>{P=null}),ge());const q={};if(j&1&&(q.errorMessage=R[0]),T.$set(q),R[6].size>0?N?(N.p(R,j),j&64&&_(N,1)):(N=Kr(R),N.c(),_(N,1),N.m(e,F)):N&&(_e(),d(N,1,1,()=>{N=null}),ge()),j&66){S=Fe(R[6].values());let x;for(x=0;x<S.length;x+=1){const ne=Xr(R,S,x);M[x]?(M[x].p(ne,j),_(M[x],1)):(M[x]=xr(ne),M[x].c(),_(M[x],1),M[x].m(D,null))}for(_e(),x=S.length;x<M.length;x+=1)U(x);ge()}},i(R){if(!E){_(o.$$.fragment,R),_(a.$$.fragment,R),_(I),_(P),_(y.$$.fragment,R),_(T.$$.fragment,R),_(N);for(let j=0;j<S.length;j+=1)_(M[j]);E=!0}},o(R){d(o.$$.fragment,R),d(a.$$.fragment,R),d(I),d(P),d(y.$$.fragment,R),d(T.$$.fragment,R),d(N),M=M.filter(Boolean);for(let j=0;j<M.length;j+=1)d(M[j]);E=!1},d(R){R&&p(e),w(o),w(a),I&&I.d(),P&&P.d(),w(y),w(T),N&&N.d(),At(M,R)}}}function Qp(r){let e,n,t,l,o,s,f;return e=new Hl({}),t=new qp({props:{showSchemes:r[2]}}),s=new bp({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),o=C("div"),b(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),$(i,o,a),v(s,o,null),f=!0},p(i,a){const u={};a&4&&(u.showSchemes=i[2]),t.$set(u)},i(i){f||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),f=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),w(s)}}}function Jp(r){let e,n,t;return n=new El({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Qp]},$$scope:{ctx:r}}}),{c(){e=C("div"),b(n.$$.fragment),G(e,"slot","main")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.style=l[5]),o&524292&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Kp(r){let e,n;return e=new Wl({props:{$$slots:{main:[Jp],sidebar:[Yp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&524415&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Zp(r,e,n){let t,l,o;be(r,It,T=>n(4,t=T)),be(r,Dn,T=>n(5,l=T)),be(r,xt,T=>n(6,o=T)),yn(()=>{Dl()});const s=new URLSearchParams(window.location.search);Dn.set(s.get("style")||"dataviz");let f="",i=new Set,a=!0,u=!1;function c(T){try{It.set(JSON.parse(T)),xt.set(ui(t)),n(0,f="")}catch(O){n(0,f=`The file you loaded is broken: ${O}`)}}const g=()=>n(3,u=!0);function m(T){u=T,n(3,u)}function y(T){i=T,n(1,i)}function A(T){a=T,n(2,a)}return[f,i,a,u,t,l,o,c,g,m,y,A]}class xp extends J{constructor(e){super(),K(this,e,Zp,Kp,Y,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new xp({target:document.getElementById("app")});
