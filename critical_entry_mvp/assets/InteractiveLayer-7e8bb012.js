import{S,i as w,s as p,a7 as ne,g as C,v as R,n as F,e as v,c as I,q as D,f as g,h as k,N as T,O as j,aL as E,P as ie,aE as se,r as z,u as H,aF as Z,L as x,C as O,D as q,E as A,G as P,H as G,I as N,J as ae,t as M,k as B,K as J,Q as K,aW as oe,w as ue,l as fe,d as $,m as ee,o as te,F as re,b as ce,U as Q,z as de,aS as _e,M as ge,y as me,p as he,aa as ke}from"./layer_helper_utils-ee68651d.js";function U(n){let e,t,l,i;return{c(){e=v("div"),t=v("span"),t.textContent="Error:",l=I(),i=D(n[0]),g(t,"class","govuk-visually-hidden"),g(e,"class","govuk-error-message")},m(o,a){C(o,e,a),k(e,t),k(e,l),k(e,i)},p(o,a){a&1&&T(i,o[0])},d(o){o&&F(e)}}}function be(n){let e,t=n[0]&&U(n);return{c(){t&&t.c(),e=ne()},m(l,i){t&&t.m(l,i),C(l,e,i)},p(l,[i]){l[0]?t?t.p(l,i):(t=U(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:R,o:R,d(l){l&&F(e),t&&t.d(l)}}}function ve(n,e,t){let{errorMessage:l}=e;return n.$$set=i=>{"errorMessage"in i&&t(0,l=i.errorMessage)},[l]}class Oe extends S{constructor(e){super(),w(this,e,ve,be,p,{errorMessage:0})}}function X(n,e,t){const l=n.slice();return l[8]=e[t][0],l[9]=e[t][1],l}function V(n){let e,t,l,i,o=!1,a,c,f=n[9]+"",u,r,s,b,h,d;return b=se(n[7][0]),{c(){e=v("div"),t=v("input"),a=I(),c=v("label"),u=D(f),s=I(),g(t,"class","govuk-radios__input"),g(t,"id",l=n[2]+n[8]),g(t,"type","radio"),t.__value=i=n[8],z(t,t.__value),g(c,"class","govuk-label govuk-radios__label"),g(c,"for",r=n[2]+n[8]),g(e,"class","govuk-radios__item"),b.p(t)},m(m,y){C(m,e,y),k(e,t),t.checked=t.__value===n[0],k(e,a),k(e,c),k(c,u),k(e,s),h||(d=[H(t,"change",n[6]),H(t,"change",n[5])],h=!0)},p(m,y){y&12&&l!==(l=m[2]+m[8])&&g(t,"id",l),y&8&&i!==(i=m[8])&&(t.__value=i,z(t,t.__value),o=!0),(o||y&9)&&(t.checked=t.__value===m[0]),y&8&&f!==(f=m[9]+"")&&T(u,f),y&12&&r!==(r=m[2]+m[8])&&g(c,"for",r)},d(m){m&&F(e),b.r(),h=!1,Z(d)}}}function ye(n){let e,t,l,i,o,a,c=j(n[3]),f=[];for(let u=0;u<c.length;u+=1)f[u]=V(X(n,c,u));return{c(){e=v("div"),t=v("fieldset"),l=v("legend"),i=D(n[1]),o=I(),a=v("div");for(let u=0;u<f.length;u+=1)f[u].c();g(l,"class","govuk-fieldset__legend"),g(a,"class","govuk-radios"),g(a,"data-module","govuk-radios"),E(a,"govuk-radios--inline",n[4]),E(a,"govuk-radios--small",n[4]),g(t,"class","govuk-fieldset"),g(e,"class","govuk-form-group")},m(u,r){C(u,e,r),k(e,t),k(t,l),k(l,i),k(t,o),k(t,a);for(let s=0;s<f.length;s+=1)f[s]&&f[s].m(a,null)},p(u,[r]){if(r&2&&T(i,u[1]),r&13){c=j(u[3]);let s;for(s=0;s<c.length;s+=1){const b=X(u,c,s);f[s]?f[s].p(b,r):(f[s]=V(b),f[s].c(),f[s].m(a,null))}for(;s<f.length;s+=1)f[s].d(1);f.length=c.length}r&16&&E(a,"govuk-radios--inline",u[4]),r&16&&E(a,"govuk-radios--small",u[4])},i:R,o:R,d(u){u&&F(e),ie(f,u)}}}function Le(n,e,t){let{legend:l}=e,{id:i}=e,{choices:o}=e,{inlineSmall:a=!1}=e,{value:c}=e;const f=[[]];function u(s){x.call(this,n,s)}function r(){c=this.__value,t(0,c)}return n.$$set=s=>{"legend"in s&&t(1,l=s.legend),"id"in s&&t(2,i=s.id),"choices"in s&&t(3,o=s.choices),"inlineSmall"in s&&t(4,a=s.inlineSmall),"value"in s&&t(0,c=s.value)},[c,l,i,o,a,u,r,f]}class Pe extends S{constructor(e){super(),w(this,e,Le,ye,p,{legend:1,id:2,choices:3,inlineSmall:4,value:0})}}function Ce(n){let e,t,l,i;const o=n[2].default,a=O(o,n,n[1],null);let c=[{type:"button"},{class:"govuk-button govuk-button--secondary"},{"data-module":"govuk-button"},n[0]],f={};for(let u=0;u<c.length;u+=1)f=q(f,c[u]);return{c(){e=v("button"),a&&a.c(),A(e,f)},m(u,r){C(u,e,r),a&&a.m(e,null),e.autofocus&&e.focus(),t=!0,l||(i=H(e,"click",n[3]),l=!0)},p(u,[r]){a&&a.p&&(!t||r&2)&&P(a,o,u,u[1],t?N(o,u[1],r,null):G(u[1]),null),A(e,f=ae(c,[{type:"button"},{class:"govuk-button govuk-button--secondary"},{"data-module":"govuk-button"},r&1&&u[0]]))},i(u){t||(M(a,u),t=!0)},o(u){B(a,u),t=!1},d(u){u&&F(e),a&&a.d(u),l=!1,i()}}}function Fe(n,e,t){let{$$slots:l={},$$scope:i}=e;function o(a){x.call(this,n,a)}return n.$$set=a=>{t(0,e=q(q({},e),J(a))),"$$scope"in a&&t(1,i=a.$$scope)},e=J(e),[e,i,l,o]}class Ee extends S{constructor(e){super(),w(this,e,Fe,Ce,p,{})}}function Y(n){let e,t;return e=new Ee({props:{$$slots:{default:[Me]},$$scope:{ctx:n}}}),e.$on("click",n[5]),{c(){$(e.$$.fragment)},m(l,i){ee(e,l,i),t=!0},p(l,i){const o={};i&128&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}function Me(n){let e;return{c(){e=D("X")},m(t,l){C(t,e,l)},d(t){t&&F(e)}}}function Be(n){let e,t,l,i,o,a,c,f,u,r,s=n[2]&&Y(n);const b=n[4].default,h=O(b,n,n[7],null);return{c(){e=v("div"),t=v("div"),l=v("div"),i=v("h1"),o=D(n[1]),a=I(),s&&s.c(),c=I(),h&&h.c(),g(i,"class","govuk-heading-l"),K(l,"display","flex"),K(l,"justify-content","space-between"),g(t,"class","content centered-fullscreen svelte-stcgp5"),g(e,"class","background svelte-stcgp5"),E(e,"open",n[0]),E(e,"closed",!n[0])},m(d,m){C(d,e,m),k(e,t),k(t,l),k(l,i),k(i,o),k(l,a),s&&s.m(l,null),k(t,c),h&&h.m(t,null),f=!0,u||(r=[H(t,"click",oe(Se)),H(e,"click",n[6])],u=!0)},p(d,[m]){(!f||m&2)&&T(o,d[1]),d[2]?s?(s.p(d,m),m&4&&M(s,1)):(s=Y(d),s.c(),M(s,1),s.m(l,null)):s&&(ue(),B(s,1,1,()=>{s=null}),fe()),h&&h.p&&(!f||m&128)&&P(h,b,d,d[7],f?N(b,d[7],m,null):G(d[7]),null),(!f||m&1)&&E(e,"open",d[0]),(!f||m&1)&&E(e,"closed",!d[0])},i(d){f||(M(s),M(h,d),f=!0)},o(d){B(s),B(h,d),f=!1},d(d){d&&F(e),s&&s.d(),h&&h.d(d),u=!1,Z(r)}}}const Se=()=>null;function we(n,e,t){let{$$slots:l={},$$scope:i}=e,{title:o}=e,{open:a=!1}=e,{displayEscapeButton:c=!0}=e,{canCloseByClickingBackground:f=!0}=e;const u=()=>t(0,a=!1),r=()=>{f&&t(0,a=!1)};return n.$$set=s=>{"title"in s&&t(1,o=s.title),"open"in s&&t(0,a=s.open),"displayEscapeButton"in s&&t(2,c=s.displayEscapeButton),"canCloseByClickingBackground"in s&&t(3,f=s.canCloseByClickingBackground),"$$scope"in s&&t(7,i=s.$$scope)},[a,o,c,f,l,u,r,i]}class Ge extends S{constructor(e){super(),w(this,e,we,Be,p,{title:1,open:0,displayEscapeButton:2,canCloseByClickingBackground:3})}}function pe(n){let e,t;const l=n[2].default,i=O(l,n,n[1],null);return{c(){e=v("a"),i&&i.c(),g(e,"href",n[0]),g(e,"target","_blank"),g(e,"rel","noreferrer")},m(o,a){C(o,e,a),i&&i.m(e,null),t=!0},p(o,[a]){i&&i.p&&(!t||a&2)&&P(i,l,o,o[1],t?N(l,o[1],a,null):G(o[1]),null),(!t||a&1)&&g(e,"href",o[0])},i(o){t||(M(i,o),t=!0)},o(o){B(i,o),t=!1},d(o){o&&F(e),i&&i.d(o)}}}function Ie(n,e,t){let{$$slots:l={},$$scope:i}=e,{href:o}=e;return n.$$set=a=>{"href"in a&&t(0,o=a.href),"$$scope"in a&&t(1,i=a.$$scope)},[o,i,l]}class Ne extends S{constructor(e){super(),w(this,e,Ie,pe,p,{href:0})}}function He(n){let e,t,l;return{c(){e=v("input"),e.disabled=n[2],g(e,"class","govuk-file-upload"),g(e,"id",n[1]),g(e,"type","file")},m(i,o){C(i,e,o),n[6](e),t||(l=H(e,"change",n[4]),t=!0)},p(i,o){o&4&&(e.disabled=i[2]),o&2&&g(e,"id",i[1])},d(i){i&&F(e),n[6](null),t=!1,l()}}}function De(n){let e,t;return e=new re({props:{label:n[0],id:n[1],$$slots:{default:[He]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(l,i){ee(e,l,i),t=!0},p(l,[i]){const o={};i&1&&(o.label=l[0]),i&2&&(o.id=l[1]),i&142&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}function Re(n,e,t){let{label:l}=e,{id:i}=e,{loadFile:o}=e,{disabled:a=!1}=e,c;function f(r){let s=new FileReader;s.onload=h=>{o(h.target.result)};let b=c.files;s.readAsText(b[0])}function u(r){ce[r?"unshift":"push"](()=>{c=r,t(3,c)})}return n.$$set=r=>{"label"in r&&t(0,l=r.label),"id"in r&&t(1,i=r.id),"loadFile"in r&&t(5,o=r.loadFile),"disabled"in r&&t(2,a=r.disabled)},[l,i,a,c,f,o,u]}class We extends S{constructor(e){super(),w(this,e,Re,De,p,{label:0,id:1,loadFile:5,disabled:2})}}function Te(n,e,t){let l,i;Q(n,de,_=>t(6,l=_)),Q(n,_e,_=>t(7,i=_));const o=ge();let{layer:a}=e,{clickable:c}=e,{tooltip:f=null}=e,{show:u=!0}=e,{ignoreHigherLayers:r=[]}=e,{hoveredFeature:s=null}=e,b=new me.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});he(()=>{l.on("mousemove",a,h),l.on("mouseleave",a,d),c&&l.on("click",a,y)}),ke(()=>{l.off("mousemove",a,h),l.off("mouseleave",a,d),c&&l.off("click",a,y),m(),b.remove()});function h(_){if(!i)return;let L=_.features??[];if(L.length!=0){if(L[0].id||console.log(`Features in the ${a} layer don't have IDs; InteractiveLayer won't work`),W(_)){d();return}if((s==null?void 0:s.id)!=L[0].id){if(m(),t(0,s=L[0]),l.setFeatureState(s,{hover:!0}),f){let le=`<div class="govuk-prose">${f(s)}</div>`;b.setLngLat(_.lngLat).setHTML(le).addTo(l)}c&&(l.getCanvas().style.cursor="pointer")}else f&&b.setLngLat(_.lngLat)}}function d(){i&&(m(),t(0,s=null),b.remove(),c&&(l.getCanvas().style.cursor="inherit"))}function m(){s&&l.setFeatureState(s,{hover:!1})}function y(_){if(!i)return;let L=_.features??[];if(L.length>0){if(W(_))return;o("click",L[0])}}function W(_){for(let L of l.queryRenderedFeatures(_.point)){if(L.layer.id==a)return!1;if(!r.includes(L.layer.id))return!0}return!1}return n.$$set=_=>{"layer"in _&&t(1,a=_.layer),"clickable"in _&&t(2,c=_.clickable),"tooltip"in _&&t(3,f=_.tooltip),"show"in _&&t(4,u=_.show),"ignoreHigherLayers"in _&&t(5,r=_.ignoreHigherLayers),"hoveredFeature"in _&&t(0,s=_.hoveredFeature)},n.$$.update=()=>{n.$$.dirty&82&&l.getLayer(a)&&l.setLayoutProperty(a,"visibility",u?"visible":"none")},[s,a,c,f,u,r,l]}class je extends S{constructor(e){super(),w(this,e,Te,null,p,{layer:1,clickable:2,tooltip:3,show:4,ignoreHigherLayers:5,hoveredFeature:0})}}export{Oe as E,We as F,je as I,Ge as M,Pe as R,Ee as S,Ne as a};
