import{S as M,i as w,s as E,a9 as J,h as C,w as q,o as F,e as v,d as H,r as S,g as y,j as k,O as P,D as V,T as N,aN as B,v as I,aY as X,t as p,x as Y,l as L,n as K,H as Q,I as U,J as Z,aH as x,a as $,f as R,m as W,p as z,F as ee,b as te,W as O,A as ne,aV as le,N as se,z as ie,q as ae,ac as oe}from"./layer_helper_utils-3f0de19d.js";function j(s){let e,n,t,l;return{c(){e=v("div"),n=v("span"),n.textContent="Error:",t=H(),l=S(s[0]),y(n,"class","govuk-visually-hidden"),y(e,"class","govuk-error-message")},m(a,o){C(a,e,o),k(e,n),k(e,t),k(e,l)},p(a,o){o&1&&P(l,a[0])},d(a){a&&F(e)}}}function re(s){let e,n=s[0]&&j(s);return{c(){n&&n.c(),e=J()},m(t,l){n&&n.m(t,l),C(t,e,l)},p(t,[l]){t[0]?n?n.p(t,l):(n=j(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:q,o:q,d(t){t&&F(e),n&&n.d(t)}}}function ue(s,e,n){let{errorMessage:t}=e;return s.$$set=l=>{"errorMessage"in l&&n(0,t=l.errorMessage)},[t]}class ye extends M{constructor(e){super(),w(this,e,ue,re,E,{errorMessage:0})}}function A(s){let e,n;return e=new $({props:{$$slots:{default:[fe]},$$scope:{ctx:s}}}),e.$on("click",s[5]),{c(){R(e.$$.fragment)},m(t,l){W(e,t,l),n=!0},p(t,l){const a={};l&128&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function fe(s){let e;return{c(){e=S("X")},m(n,t){C(n,e,t)},d(n){n&&F(e)}}}function ce(s){let e,n,t,l,a,o,d,f,_,c,i=s[2]&&A(s);const h=s[4].default,g=V(h,s,s[7],null);return{c(){e=v("div"),n=v("div"),t=v("div"),l=v("h1"),a=S(s[1]),o=H(),i&&i.c(),d=H(),g&&g.c(),y(l,"class","govuk-heading-l"),N(t,"display","flex"),N(t,"justify-content","space-between"),y(n,"class","content centered-fullscreen svelte-stcgp5"),y(e,"class","background svelte-stcgp5"),B(e,"open",s[0]),B(e,"closed",!s[0])},m(u,m){C(u,e,m),k(e,n),k(n,t),k(t,l),k(l,a),k(t,o),i&&i.m(t,null),k(n,d),g&&g.m(n,null),f=!0,_||(c=[I(n,"click",X(de)),I(e,"click",s[6])],_=!0)},p(u,[m]){(!f||m&2)&&P(a,u[1]),u[2]?i?(i.p(u,m),m&4&&p(i,1)):(i=A(u),i.c(),p(i,1),i.m(t,null)):i&&(Y(),L(i,1,1,()=>{i=null}),K()),g&&g.p&&(!f||m&128)&&Q(g,h,u,u[7],f?Z(h,u[7],m,null):U(u[7]),null),(!f||m&1)&&B(e,"open",u[0]),(!f||m&1)&&B(e,"closed",!u[0])},i(u){f||(p(i),p(g,u),f=!0)},o(u){L(i),L(g,u),f=!1},d(u){u&&F(e),i&&i.d(),g&&g.d(u),_=!1,x(c)}}}const de=()=>null;function ge(s,e,n){let{$$slots:t={},$$scope:l}=e,{title:a}=e,{open:o=!1}=e,{displayEscapeButton:d=!0}=e,{canCloseByClickingBackground:f=!0}=e;const _=()=>n(0,o=!1),c=()=>{f&&n(0,o=!1)};return s.$$set=i=>{"title"in i&&n(1,a=i.title),"open"in i&&n(0,o=i.open),"displayEscapeButton"in i&&n(2,d=i.displayEscapeButton),"canCloseByClickingBackground"in i&&n(3,f=i.canCloseByClickingBackground),"$$scope"in i&&n(7,l=i.$$scope)},[o,a,d,f,t,_,c,l]}class ve extends M{constructor(e){super(),w(this,e,ge,ce,E,{title:1,open:0,displayEscapeButton:2,canCloseByClickingBackground:3})}}function me(s){let e,n,t;return{c(){e=v("input"),e.disabled=s[2],y(e,"class","govuk-file-upload"),y(e,"id",s[1]),y(e,"type","file")},m(l,a){C(l,e,a),s[6](e),n||(t=I(e,"change",s[4]),n=!0)},p(l,a){a&4&&(e.disabled=l[2]),a&2&&y(e,"id",l[1])},d(l){l&&F(e),s[6](null),n=!1,t()}}}function _e(s){let e,n;return e=new ee({props:{label:s[0],id:s[1],$$slots:{default:[me]},$$scope:{ctx:s}}}),{c(){R(e.$$.fragment)},m(t,l){W(e,t,l),n=!0},p(t,[l]){const a={};l&1&&(a.label=t[0]),l&2&&(a.id=t[1]),l&142&&(a.$$scope={dirty:l,ctx:t}),e.$set(a)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){z(e,t)}}}function he(s,e,n){let{label:t}=e,{id:l}=e,{loadFile:a}=e,{disabled:o=!1}=e,d;function f(c){let i=new FileReader;i.onload=g=>{a(g.target.result)};let h=d.files;i.readAsText(h[0])}function _(c){te[c?"unshift":"push"](()=>{d=c,n(3,d)})}return s.$$set=c=>{"label"in c&&n(0,t=c.label),"id"in c&&n(1,l=c.id),"loadFile"in c&&n(5,a=c.loadFile),"disabled"in c&&n(2,o=c.disabled)},[t,l,o,d,f,a,_]}class pe extends M{constructor(e){super(),w(this,e,he,_e,E,{label:0,id:1,loadFile:5,disabled:2})}}function be(s,e,n){let t,l;O(s,ne,r=>n(6,t=r)),O(s,le,r=>n(7,l=r));const a=se();let{layer:o}=e,{clickable:d}=e,{tooltip:f=null}=e,{show:_=!0}=e,{ignoreHigherLayers:c=[]}=e,{hoveredFeature:i=null}=e,h=new ie.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});ae(()=>{t.on("mousemove",o,g),t.on("mouseleave",o,u),d&&t.on("click",o,T)}),oe(()=>{t.off("mousemove",o,g),t.off("mouseleave",o,u),d&&t.off("click",o,T),m(),h.remove()});function g(r){if(!l)return;let b=r.features??[];if(b.length!=0){if(b[0].id||console.log(`Features in the ${o} layer don't have IDs; InteractiveLayer won't work`),D(r)){u();return}if((i==null?void 0:i.id)!=b[0].id){if(m(),n(0,i=b[0]),t.setFeatureState(i,{hover:!0}),f){let G=`<div class="govuk-prose">${f(i)}</div>`;h.setLngLat(r.lngLat).setHTML(G).addTo(t)}d&&(t.getCanvas().style.cursor="pointer")}else f&&h.setLngLat(r.lngLat)}}function u(){l&&(m(),n(0,i=null),h.remove(),d&&(t.getCanvas().style.cursor="inherit"))}function m(){i&&t.setFeatureState(i,{hover:!1})}function T(r){if(!l)return;let b=r.features??[];if(b.length>0){if(D(r))return;a("click",b[0])}}function D(r){for(let b of t.queryRenderedFeatures(r.point)){if(b.layer.id==o)return!1;if(!c.includes(b.layer.id))return!0}return!1}return s.$$set=r=>{"layer"in r&&n(1,o=r.layer),"clickable"in r&&n(2,d=r.clickable),"tooltip"in r&&n(3,f=r.tooltip),"show"in r&&n(4,_=r.show),"ignoreHigherLayers"in r&&n(5,c=r.ignoreHigherLayers),"hoveredFeature"in r&&n(0,i=r.hoveredFeature)},s.$$.update=()=>{s.$$.dirty&82&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",_?"visible":"none")},[i,o,d,f,_,c,t]}class Le extends M{constructor(e){super(),w(this,e,be,null,E,{layer:1,clickable:2,tooltip:3,show:4,ignoreHigherLayers:5,hoveredFeature:0})}}export{ye as E,pe as F,Le as I,ve as M};
