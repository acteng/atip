import{S as p,i as w,s as S,a6 as ne,g as C,v as R,n as E,e as v,c as I,q as D,f as g,h as k,M as T,N as j,aK as F,O as ie,aD as se,r as z,u as H,aE as Z,K as x,C as O,D as q,E as A,G as P,H as G,I as K,t as M,k as B,J,P as V,aV as ae,w as oe,l as ue,d as $,m as ee,o as te,F as fe,b as re,T as W,z as ce,aR as de,L as _e,y as ge,p as he,a9 as me}from"./layer_helper_utils-391e6b00.js";function ke(n,e){const t={},l={},i={$$scope:1};let o=n.length;for(;o--;){const s=n[o],r=e[o];if(r){for(const u in s)u in r||(l[u]=1);for(const u in r)i[u]||(t[u]=r[u],i[u]=1);n[o]=r}else for(const u in s)i[u]=1}for(const s in l)s in t||(t[s]=void 0);return t}function X(n){let e,t,l,i;return{c(){e=v("div"),t=v("span"),t.textContent="Error:",l=I(),i=D(n[0]),g(t,"class","govuk-visually-hidden"),g(e,"class","govuk-error-message")},m(o,s){C(o,e,s),k(e,t),k(e,l),k(e,i)},p(o,s){s&1&&T(i,o[0])},d(o){o&&E(e)}}}function be(n){let e,t=n[0]&&X(n);return{c(){t&&t.c(),e=ne()},m(l,i){t&&t.m(l,i),C(l,e,i)},p(l,[i]){l[0]?t?t.p(l,i):(t=X(l),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:R,o:R,d(l){l&&E(e),t&&t.d(l)}}}function ve(n,e,t){let{errorMessage:l}=e;return n.$$set=i=>{"errorMessage"in i&&t(0,l=i.errorMessage)},[l]}class Oe extends p{constructor(e){super(),w(this,e,ve,be,S,{errorMessage:0})}}function Q(n,e,t){const l=n.slice();return l[8]=e[t][0],l[9]=e[t][1],l}function U(n){let e,t,l,i,o=!1,s,r,u=n[9]+"",f,c,a,b,m,d;return b=se(n[7][0]),{c(){e=v("div"),t=v("input"),s=I(),r=v("label"),f=D(u),a=I(),g(t,"class","govuk-radios__input"),g(t,"id",l=n[2]+n[8]),g(t,"type","radio"),t.__value=i=n[8],z(t,t.__value),g(r,"class","govuk-label govuk-radios__label"),g(r,"for",c=n[2]+n[8]),g(e,"class","govuk-radios__item"),b.p(t)},m(h,y){C(h,e,y),k(e,t),t.checked=t.__value===n[0],k(e,s),k(e,r),k(r,f),k(e,a),m||(d=[H(t,"change",n[6]),H(t,"change",n[5])],m=!0)},p(h,y){y&12&&l!==(l=h[2]+h[8])&&g(t,"id",l),y&8&&i!==(i=h[8])&&(t.__value=i,z(t,t.__value),o=!0),(o||y&9)&&(t.checked=t.__value===h[0]),y&8&&u!==(u=h[9]+"")&&T(f,u),y&12&&c!==(c=h[2]+h[8])&&g(r,"for",c)},d(h){h&&E(e),b.r(),m=!1,Z(d)}}}function ye(n){let e,t,l,i,o,s,r=j(n[3]),u=[];for(let f=0;f<r.length;f+=1)u[f]=U(Q(n,r,f));return{c(){e=v("div"),t=v("fieldset"),l=v("legend"),i=D(n[1]),o=I(),s=v("div");for(let f=0;f<u.length;f+=1)u[f].c();g(l,"class","govuk-fieldset__legend"),g(s,"class","govuk-radios"),g(s,"data-module","govuk-radios"),F(s,"govuk-radios--inline",n[4]),F(s,"govuk-radios--small",n[4]),g(t,"class","govuk-fieldset"),g(e,"class","govuk-form-group")},m(f,c){C(f,e,c),k(e,t),k(t,l),k(l,i),k(t,o),k(t,s);for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(s,null)},p(f,[c]){if(c&2&&T(i,f[1]),c&13){r=j(f[3]);let a;for(a=0;a<r.length;a+=1){const b=Q(f,r,a);u[a]?u[a].p(b,c):(u[a]=U(b),u[a].c(),u[a].m(s,null))}for(;a<u.length;a+=1)u[a].d(1);u.length=r.length}c&16&&F(s,"govuk-radios--inline",f[4]),c&16&&F(s,"govuk-radios--small",f[4])},i:R,o:R,d(f){f&&E(e),ie(u,f)}}}function Le(n,e,t){let{legend:l}=e,{id:i}=e,{choices:o}=e,{inlineSmall:s=!1}=e,{value:r}=e;const u=[[]];function f(a){x.call(this,n,a)}function c(){r=this.__value,t(0,r)}return n.$$set=a=>{"legend"in a&&t(1,l=a.legend),"id"in a&&t(2,i=a.id),"choices"in a&&t(3,o=a.choices),"inlineSmall"in a&&t(4,s=a.inlineSmall),"value"in a&&t(0,r=a.value)},[r,l,i,o,s,f,c,u]}class Pe extends p{constructor(e){super(),w(this,e,Le,ye,S,{legend:1,id:2,choices:3,inlineSmall:4,value:0})}}function Ce(n){let e,t,l,i;const o=n[2].default,s=O(o,n,n[1],null);let r=[{type:"button"},{class:"govuk-button govuk-button--secondary"},{"data-module":"govuk-button"},n[0]],u={};for(let f=0;f<r.length;f+=1)u=q(u,r[f]);return{c(){e=v("button"),s&&s.c(),A(e,u)},m(f,c){C(f,e,c),s&&s.m(e,null),e.autofocus&&e.focus(),t=!0,l||(i=H(e,"click",n[3]),l=!0)},p(f,[c]){s&&s.p&&(!t||c&2)&&P(s,o,f,f[1],t?K(o,f[1],c,null):G(f[1]),null),A(e,u=ke(r,[{type:"button"},{class:"govuk-button govuk-button--secondary"},{"data-module":"govuk-button"},c&1&&f[0]]))},i(f){t||(M(s,f),t=!0)},o(f){B(s,f),t=!1},d(f){f&&E(e),s&&s.d(f),l=!1,i()}}}function Ee(n,e,t){let{$$slots:l={},$$scope:i}=e;function o(s){x.call(this,n,s)}return n.$$set=s=>{t(0,e=q(q({},e),J(s))),"$$scope"in s&&t(1,i=s.$$scope)},e=J(e),[e,i,l,o]}class Fe extends p{constructor(e){super(),w(this,e,Ee,Ce,S,{})}}function Y(n){let e,t;return e=new Fe({props:{$$slots:{default:[Me]},$$scope:{ctx:n}}}),e.$on("click",n[5]),{c(){$(e.$$.fragment)},m(l,i){ee(e,l,i),t=!0},p(l,i){const o={};i&128&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}function Me(n){let e;return{c(){e=D("X")},m(t,l){C(t,e,l)},d(t){t&&E(e)}}}function Be(n){let e,t,l,i,o,s,r,u,f,c,a=n[2]&&Y(n);const b=n[4].default,m=O(b,n,n[7],null);return{c(){e=v("div"),t=v("div"),l=v("div"),i=v("h1"),o=D(n[1]),s=I(),a&&a.c(),r=I(),m&&m.c(),g(i,"class","govuk-heading-l"),V(l,"display","flex"),V(l,"justify-content","space-between"),g(t,"class","content centered-fullscreen svelte-stcgp5"),g(e,"class","background svelte-stcgp5"),F(e,"open",n[0]),F(e,"closed",!n[0])},m(d,h){C(d,e,h),k(e,t),k(t,l),k(l,i),k(i,o),k(l,s),a&&a.m(l,null),k(t,r),m&&m.m(t,null),u=!0,f||(c=[H(t,"click",ae(pe)),H(e,"click",n[6])],f=!0)},p(d,[h]){(!u||h&2)&&T(o,d[1]),d[2]?a?(a.p(d,h),h&4&&M(a,1)):(a=Y(d),a.c(),M(a,1),a.m(l,null)):a&&(oe(),B(a,1,1,()=>{a=null}),ue()),m&&m.p&&(!u||h&128)&&P(m,b,d,d[7],u?K(b,d[7],h,null):G(d[7]),null),(!u||h&1)&&F(e,"open",d[0]),(!u||h&1)&&F(e,"closed",!d[0])},i(d){u||(M(a),M(m,d),u=!0)},o(d){B(a),B(m,d),u=!1},d(d){d&&E(e),a&&a.d(),m&&m.d(d),f=!1,Z(c)}}}const pe=()=>null;function we(n,e,t){let{$$slots:l={},$$scope:i}=e,{title:o}=e,{open:s=!1}=e,{displayEscapeButton:r=!0}=e,{canCloseByClickingBackground:u=!0}=e;const f=()=>t(0,s=!1),c=()=>{u&&t(0,s=!1)};return n.$$set=a=>{"title"in a&&t(1,o=a.title),"open"in a&&t(0,s=a.open),"displayEscapeButton"in a&&t(2,r=a.displayEscapeButton),"canCloseByClickingBackground"in a&&t(3,u=a.canCloseByClickingBackground),"$$scope"in a&&t(7,i=a.$$scope)},[s,o,r,u,l,f,c,i]}class Ge extends p{constructor(e){super(),w(this,e,we,Be,S,{title:1,open:0,displayEscapeButton:2,canCloseByClickingBackground:3})}}function Se(n){let e,t;const l=n[2].default,i=O(l,n,n[1],null);return{c(){e=v("a"),i&&i.c(),g(e,"href",n[0]),g(e,"target","_blank"),g(e,"rel","noreferrer")},m(o,s){C(o,e,s),i&&i.m(e,null),t=!0},p(o,[s]){i&&i.p&&(!t||s&2)&&P(i,l,o,o[1],t?K(l,o[1],s,null):G(o[1]),null),(!t||s&1)&&g(e,"href",o[0])},i(o){t||(M(i,o),t=!0)},o(o){B(i,o),t=!1},d(o){o&&E(e),i&&i.d(o)}}}function Ie(n,e,t){let{$$slots:l={},$$scope:i}=e,{href:o}=e;return n.$$set=s=>{"href"in s&&t(0,o=s.href),"$$scope"in s&&t(1,i=s.$$scope)},[o,i,l]}class Ke extends p{constructor(e){super(),w(this,e,Ie,Se,S,{href:0})}}function He(n){let e,t,l;return{c(){e=v("input"),e.disabled=n[2],g(e,"class","govuk-file-upload"),g(e,"id",n[1]),g(e,"type","file")},m(i,o){C(i,e,o),n[6](e),t||(l=H(e,"change",n[4]),t=!0)},p(i,o){o&4&&(e.disabled=i[2]),o&2&&g(e,"id",i[1])},d(i){i&&E(e),n[6](null),t=!1,l()}}}function De(n){let e,t;return e=new fe({props:{label:n[0],id:n[1],$$slots:{default:[He]},$$scope:{ctx:n}}}),{c(){$(e.$$.fragment)},m(l,i){ee(e,l,i),t=!0},p(l,[i]){const o={};i&1&&(o.label=l[0]),i&2&&(o.id=l[1]),i&142&&(o.$$scope={dirty:i,ctx:l}),e.$set(o)},i(l){t||(M(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){te(e,l)}}}function Re(n,e,t){let{label:l}=e,{id:i}=e,{loadFile:o}=e,{disabled:s=!1}=e,r;function u(c){let a=new FileReader;a.onload=m=>{o(m.target.result)};let b=r.files;a.readAsText(b[0])}function f(c){re[c?"unshift":"push"](()=>{r=c,t(3,r)})}return n.$$set=c=>{"label"in c&&t(0,l=c.label),"id"in c&&t(1,i=c.id),"loadFile"in c&&t(5,o=c.loadFile),"disabled"in c&&t(2,s=c.disabled)},[l,i,s,r,u,o,f]}class Ne extends p{constructor(e){super(),w(this,e,Re,De,S,{label:0,id:1,loadFile:5,disabled:2})}}function Te(n,e,t){let l,i;W(n,ce,_=>t(6,l=_)),W(n,de,_=>t(7,i=_));const o=_e();let{layer:s}=e,{clickable:r}=e,{tooltip:u=null}=e,{show:f=!0}=e,{ignoreHigherLayers:c=[]}=e,{hoveredFeature:a=null}=e,b=new ge.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});he(()=>{l.on("mousemove",s,m),l.on("mouseleave",s,d),r&&l.on("click",s,y)}),me(()=>{l.off("mousemove",s,m),l.off("mouseleave",s,d),r&&l.off("click",s,y),h(),b.remove()});function m(_){if(!i)return;let L=_.features??[];if(L.length!=0){if(L[0].id||console.log(`Features in the ${s} layer don't have IDs; InteractiveLayer won't work`),N(_)){d();return}if((a==null?void 0:a.id)!=L[0].id){if(h(),t(0,a=L[0]),l.setFeatureState(a,{hover:!0}),u){let le=`<div class="govuk-prose">${u(a)}</div>`;b.setLngLat(_.lngLat).setHTML(le).addTo(l)}r&&(l.getCanvas().style.cursor="pointer")}else u&&b.setLngLat(_.lngLat)}}function d(){i&&(h(),t(0,a=null),b.remove(),r&&(l.getCanvas().style.cursor="inherit"))}function h(){a&&l.setFeatureState(a,{hover:!1})}function y(_){if(!i)return;let L=_.features??[];if(L.length>0){if(N(_))return;o("click",L[0])}}function N(_){for(let L of l.queryRenderedFeatures(_.point)){if(L.layer.id==s)return!1;if(!c.includes(L.layer.id))return!0}return!1}return n.$$set=_=>{"layer"in _&&t(1,s=_.layer),"clickable"in _&&t(2,r=_.clickable),"tooltip"in _&&t(3,u=_.tooltip),"show"in _&&t(4,f=_.show),"ignoreHigherLayers"in _&&t(5,c=_.ignoreHigherLayers),"hoveredFeature"in _&&t(0,a=_.hoveredFeature)},n.$$.update=()=>{n.$$.dirty&82&&l.getLayer(s)&&l.setLayoutProperty(s,"visibility",f?"visible":"none")},[a,s,r,u,f,c,l]}class je extends p{constructor(e){super(),w(this,e,Te,null,S,{layer:1,clickable:2,tooltip:3,show:4,ignoreHigherLayers:5,hoveredFeature:0})}}export{Oe as E,Ne as F,je as I,Ge as M,Pe as R,Fe as S,Ke as a,ke as g};
