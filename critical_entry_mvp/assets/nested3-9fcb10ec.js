import{S as O,i as U,s as W,F as V,b as L,a as M,d as v,c as P,m as w,g as m,j as R,t as g,k as b,n as d,o as h,e as T,f as k,r as I,u as q,q as G,as as ie,U as oe,z as re,p as ne,aa as ae,y as le,h as j,w as ue,l as fe,x as pe,v as z,N as ce}from"./layer_helper_utils-ee68651d.js";import{S as ee,L as me,M as de}from"./MapLibreMap-4b02a3b2.js";import{D as _e}from"./DefaultButton-84ad59fd.js";import{T as $e}from"./TextArea-fb080bc1.js";function ge(o){let e,s,i;return{c(){e=T("input"),k(e,"type","text"),k(e,"class","govuk-input govuk-input--width-10"),k(e,"id","inspector")},m(t,n){m(t,e,n),I(e,o[0]),s||(i=q(e,"input",o[10]),s=!0)},p(t,n){n&1&&e.value!==t[0]&&I(e,t[0])},d(t){t&&d(e),s=!1,i()}}}function be(o){let e,s,i;return{c(){e=T("input"),k(e,"type","text"),k(e,"class","govuk-input govuk-input--width-10"),k(e,"id","scheme_reference")},m(t,n){m(t,e,n),I(e,o[1]),s||(i=q(e,"input",o[11]),s=!0)},p(t,n){n&2&&e.value!==t[1]&&I(e,t[1])},d(t){t&&d(e),s=!1,i()}}}function ke(o){let e,s,i;return{c(){e=T("input"),k(e,"type","text"),k(e,"class","govuk-input govuk-input--width-10"),k(e,"id","location_description")},m(t,n){m(t,e,n),I(e,o[4]),s||(i=q(e,"input",o[14]),s=!0)},p(t,n){n&16&&e.value!==t[4]&&I(e,t[4])},d(t){t&&d(e),s=!1,i()}}}function ve(o){let e;return{c(){e=G("Export")},m(s,i){m(s,e,i)},d(s){s&&d(e)}}}function we(o){let e,s,i,t,n,a,l,u,_,p,c,S,y,B,A,C,D;e=new V({props:{label:"Inspector name",id:"inspector",$$slots:{default:[ge]},$$scope:{ctx:o}}}),i=new V({props:{label:"Scheme reference",id:"scheme_reference",$$slots:{default:[be]},$$scope:{ctx:o}}});function E(r){o[12](r)}let $={label:"Current design stage",id:"current_design_stage",choices:o[6],emptyOption:!0};o[2]!==void 0&&($.value=o[2]),n=new ee({props:$}),L.push(()=>M(n,"value",E));function N(r){o[13](r)}let F={label:"Critical issue type",id:"critical_issue_type",choices:o[7],emptyOption:!0};o[3]!==void 0&&(F.value=o[3]),u=new ee({props:F}),L.push(()=>M(u,"value",N)),c=new V({props:{label:"Describe this location",id:"location_description",$$slots:{default:[ke]},$$scope:{ctx:o}}});function se(r){o[15](r)}let H={label:"Comments or notes"};return o[5]!==void 0&&(H.value=o[5]),y=new $e({props:H}),L.push(()=>M(y,"value",se)),C=new _e({props:{$$slots:{default:[ve]},$$scope:{ctx:o}}}),C.$on("click",o[8]),{c(){v(e.$$.fragment),s=P(),v(i.$$.fragment),t=P(),v(n.$$.fragment),l=P(),v(u.$$.fragment),p=P(),v(c.$$.fragment),S=P(),v(y.$$.fragment),A=P(),v(C.$$.fragment)},m(r,f){w(e,r,f),m(r,s,f),w(i,r,f),m(r,t,f),w(n,r,f),m(r,l,f),w(u,r,f),m(r,p,f),w(c,r,f),m(r,S,f),w(y,r,f),m(r,A,f),w(C,r,f),D=!0},p(r,[f]){const J={};f&65537&&(J.$$scope={dirty:f,ctx:r}),e.$set(J);const K={};f&65538&&(K.$$scope={dirty:f,ctx:r}),i.$set(K);const Q={};!a&&f&4&&(a=!0,Q.value=r[2],R(()=>a=!1)),n.$set(Q);const X={};!_&&f&8&&(_=!0,X.value=r[3],R(()=>_=!1)),u.$set(X);const Y={};f&65552&&(Y.$$scope={dirty:f,ctx:r}),c.$set(Y);const Z={};!B&&f&32&&(B=!0,Z.value=r[5],R(()=>B=!1)),y.$set(Z);const x={};f&65536&&(x.$$scope={dirty:f,ctx:r}),C.$set(x)},i(r){D||(g(e.$$.fragment,r),g(i.$$.fragment,r),g(n.$$.fragment,r),g(u.$$.fragment,r),g(c.$$.fragment,r),g(y.$$.fragment,r),g(C.$$.fragment,r),D=!0)},o(r){b(e.$$.fragment,r),b(i.$$.fragment,r),b(n.$$.fragment,r),b(u.$$.fragment,r),b(c.$$.fragment,r),b(y.$$.fragment,r),b(C.$$.fragment,r),D=!1},d(r){r&&(d(s),d(t),d(l),d(p),d(S),d(A)),h(e,r),h(i,r),h(n,r),h(u,r),h(c,r),h(y,r),h(C,r)}}}function te(o){return o.map(e=>[e,e])}function he(o){let e=25569,i=24*(60*60*1e3);return o.getTime()/i+e}function ye(o,e,s){let{pt:i}=e,t=window.localStorage.getItem("inspector")??"",n=window.localStorage.getItem("scheme_reference")??"",a="",l="",u="",_="",p=te(["Baseline","Feasibility Design","Preliminary Design","Outline Design","Detailed Design","Inspection"]),c=te(["1 - Conflict at Side Roads","2 - Conflict at Major Junctions / Roundabouts","3 - Collision Alongside or from Behind","4 - Trip Hazard","5 - Kerbside Activity","6A - Risk of Crossing Conflict (Busy Roads)","6B - Risk of Crossing Conflict (Quieter Roads)","7A - Standard of Crossing Facility (Busy Roads)","7B - Standard of Crossing Facility (Junction)","8 - Traffic Speed (>37mph)","9A - Traffic Volume (>10,000vpd)","9B - Traffic Volume (>5% HGVs)","10 - Crossing Speed","11A - Footway Width (Absolute Minimum <1m)","11B - Footway Width (at Pinchpoints)","11C - Footway Width - Poor Pedestrian Comfort","12 - Tram - Insufficient width next to Tram Track","13 - Tram/Rail - Poor Crossing Angle","14 - Major Cycle Surface Defect","15 - Major Pedestrian Surface Defect","16 - Inappropriate Shared Use","17 - Barriers, Steps and/or Dismount signs","18 - Route isn't direct, logical or intuitive to all users","19 - Inappropriate Surface Materials","20 - Inappropriate Lighting","21 - Routes must join other facilities as a network"]);function S(){let $=0,N=he(new Date),F=[$,t,N,n,a,l,ie(i.toArray().reverse()).join(","),u,_];navigator.clipboard.writeText(F.join("	")),window.alert("Go to a new row at the bottom of Form Input, and press Control+V to paste")}function y(){t=this.value,s(0,t)}function B(){n=this.value,s(1,n)}function A($){a=$,s(2,a)}function C($){l=$,s(3,l)}function D(){u=this.value,s(4,u)}function E($){_=$,s(5,_)}return o.$$set=$=>{"pt"in $&&s(9,i=$.pt)},o.$$.update=()=>{o.$$.dirty&1&&window.localStorage.setItem("inspector",t),o.$$.dirty&2&&window.localStorage.setItem("scheme_reference",n)},[t,n,a,l,u,_,p,c,S,i,y,B,A,C,D,E]}class Ce extends O{constructor(e){super(),U(this,e,ye,we,W,{pt:9})}}function Se(o,e,s){let i;oe(o,re,l=>s(2,i=l));let t=null,{markerPosition:n=null}=e;ne(()=>{i.on("click",a)}),ae(()=>{t&&t.remove(),i.off("click",a)});function a(l){t||(t=new le.Marker({draggable:!0}).setLngLat(l.lngLat).addTo(i),s(0,n=t.getLngLat()),t.on("dragend",()=>{s(0,n=t.getLngLat())}))}return o.$$set=l=>{"markerPosition"in l&&s(0,n=l.markerPosition)},[n]}class Pe extends O{constructor(e){super(),U(this,e,Se,null,W,{markerPosition:0})}}function Te(o){let e;return{c(){e=T("p"),e.textContent="Click the map to add a critical"},m(s,i){m(s,e,i)},p:z,i:z,o:z,d(s){s&&d(e)}}}function De(o){let e,s,i,t,n,a;return n=new Ce({props:{pt:o[0]}}),{c(){e=T("p"),s=G("Critical at "),i=G(o[0]),t=P(),v(n.$$.fragment)},m(l,u){m(l,e,u),j(e,s),j(e,i),m(l,t,u),w(n,l,u),a=!0},p(l,u){(!a||u&1)&&ce(i,l[0]);const _={};u&1&&(_.pt=l[0]),n.$set(_)},i(l){a||(g(n.$$.fragment,l),a=!0)},o(l){b(n.$$.fragment,l),a=!1},d(l){l&&(d(e),d(t)),h(n,l)}}}function Ie(o){let e,s,i,t,n,a;const l=[De,Te],u=[];function _(p,c){return p[0]?0:1}return t=_(o),n=u[t]=l[t](o),{c(){e=T("div"),s=T("h1"),s.textContent="Critical issue entry",i=P(),n.c(),k(e,"slot","sidebar"),k(e,"class","govuk-prose")},m(p,c){m(p,e,c),j(e,s),j(e,i),u[t].m(e,null),a=!0},p(p,c){let S=t;t=_(p),t===S?u[t].p(p,c):(ue(),b(u[S],1,1,()=>{u[S]=null}),fe(),n=u[t],n?n.p(p,c):(n=u[t]=l[t](p),n.c()),g(n,1),n.m(e,null))},i(p){a||(g(n),a=!0)},o(p){b(n),a=!1},d(p){p&&d(e),u[t].d()}}}function Be(o){let e,s,i;function t(a){o[1](a)}let n={};return o[0]!==void 0&&(n.markerPosition=o[0]),e=new Pe({props:n}),L.push(()=>M(e,"markerPosition",t)),{c(){v(e.$$.fragment)},m(a,l){w(e,a,l),i=!0},p(a,l){const u={};!s&&l&1&&(s=!0,u.markerPosition=a[0],R(()=>s=!1)),e.$set(u)},i(a){i||(g(e.$$.fragment,a),i=!0)},o(a){b(e.$$.fragment,a),i=!1},d(a){h(e,a)}}}function Ae(o){let e,s,i;return s=new de({props:{style:"dataviz",startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Be]},$$scope:{ctx:o}}}),{c(){e=T("div"),v(s.$$.fragment),k(e,"slot","main")},m(t,n){m(t,e,n),w(s,e,null),i=!0},p(t,n){const a={};n&5&&(a.$$scope={dirty:n,ctx:t}),s.$set(a)},i(t){i||(g(s.$$.fragment,t),i=!0)},o(t){b(s.$$.fragment,t),i=!1},d(t){t&&d(e),h(s)}}}function Fe(o){let e,s;return e=new me({props:{$$slots:{main:[Ae],sidebar:[Ie]},$$scope:{ctx:o}}}),{c(){v(e.$$.fragment)},m(i,t){w(e,i,t),s=!0},p(i,[t]){const n={};t&5&&(n.$$scope={dirty:t,ctx:i}),e.$set(n)},i(i){s||(g(e.$$.fragment,i),s=!0)},o(i){b(e.$$.fragment,i),s=!1},d(i){h(e,i)}}}function Le(o,e,s){ne(()=>{pe()});let i=null;function t(n){i=n,s(0,i)}return[i,t]}class Me extends O{constructor(e){super(),U(this,e,Le,Fe,W,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Me({target:document.getElementById("app")});
