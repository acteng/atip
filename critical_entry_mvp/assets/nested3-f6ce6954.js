import{S as E,i as z,s as N,F,b as B,a as L,d as k,c as P,m as v,g as m,j as A,t as _,k as $,n as d,o as h,e as S,f as g,r as I,u as O,T as te,z as ne,p as Z,a9 as se,y as ie,h as D,w as re,l as oe,x as ae,v as j,q as U,M as le}from"./layer_helper_utils-391e6b00.js";import{S as X,L as ue,M as fe}from"./MapLibreMap-9b6c918a.js";import{T as ce}from"./TextArea-bfa9e332.js";function pe(r){let e,i,s;return{c(){e=S("input"),g(e,"type","text"),g(e,"class","govuk-input govuk-input--width-10"),g(e,"id","inspector")},m(t,n){m(t,e,n),I(e,r[0]),i||(s=O(e,"input",r[8]),i=!0)},p(t,n){n&1&&e.value!==t[0]&&I(e,t[0])},d(t){t&&d(e),i=!1,s()}}}function me(r){let e,i,s;return{c(){e=S("input"),g(e,"type","text"),g(e,"class","govuk-input govuk-input--width-10"),g(e,"id","scheme_reference")},m(t,n){m(t,e,n),I(e,r[1]),i||(s=O(e,"input",r[9]),i=!0)},p(t,n){n&2&&e.value!==t[1]&&I(e,t[1])},d(t){t&&d(e),i=!1,s()}}}function de(r){let e,i,s;return{c(){e=S("input"),g(e,"type","text"),g(e,"class","govuk-input govuk-input--width-10"),g(e,"id","location_description")},m(t,n){m(t,e,n),I(e,r[4]),i||(s=O(e,"input",r[12]),i=!0)},p(t,n){n&16&&e.value!==t[4]&&I(e,t[4])},d(t){t&&d(e),i=!1,s()}}}function _e(r){let e,i,s,t,n,a,l,u,y,c,p,w,b,M,T;e=new F({props:{label:"Inspector name",id:"inspector",$$slots:{default:[pe]},$$scope:{ctx:r}}}),s=new F({props:{label:"Scheme reference",id:"scheme_reference",$$slots:{default:[me]},$$scope:{ctx:r}}});function R(o){r[10](o)}let C={label:"Current design stage",id:"current_design_stage",choices:r[6],emptyOption:!0};r[2]!==void 0&&(C.value=r[2]),n=new X({props:C}),B.push(()=>L(n,"value",R));function x(o){r[11](o)}let V={label:"Critical issue type",id:"critical_issue_type",choices:r[7],emptyOption:!0};r[3]!==void 0&&(V.value=r[3]),u=new X({props:V}),B.push(()=>L(u,"value",x)),p=new F({props:{label:"Describe this location",id:"location_description",$$slots:{default:[de]},$$scope:{ctx:r}}});function ee(o){r[13](o)}let W={label:"Comments or notes"};return r[5]!==void 0&&(W.value=r[5]),b=new ce({props:W}),B.push(()=>L(b,"value",ee)),{c(){k(e.$$.fragment),i=P(),k(s.$$.fragment),t=P(),k(n.$$.fragment),l=P(),k(u.$$.fragment),c=P(),k(p.$$.fragment),w=P(),k(b.$$.fragment)},m(o,f){v(e,o,f),m(o,i,f),v(s,o,f),m(o,t,f),v(n,o,f),m(o,l,f),v(u,o,f),m(o,c,f),v(p,o,f),m(o,w,f),v(b,o,f),T=!0},p(o,[f]){const q={};f&16385&&(q.$$scope={dirty:f,ctx:o}),e.$set(q);const G={};f&16386&&(G.$$scope={dirty:f,ctx:o}),s.$set(G);const H={};!a&&f&4&&(a=!0,H.value=o[2],A(()=>a=!1)),n.$set(H);const J={};!y&&f&8&&(y=!0,J.value=o[3],A(()=>y=!1)),u.$set(J);const K={};f&16400&&(K.$$scope={dirty:f,ctx:o}),p.$set(K);const Q={};!M&&f&32&&(M=!0,Q.value=o[5],A(()=>M=!1)),b.$set(Q)},i(o){T||(_(e.$$.fragment,o),_(s.$$.fragment,o),_(n.$$.fragment,o),_(u.$$.fragment,o),_(p.$$.fragment,o),_(b.$$.fragment,o),T=!0)},o(o){$(e.$$.fragment,o),$(s.$$.fragment,o),$(n.$$.fragment,o),$(u.$$.fragment,o),$(p.$$.fragment,o),$(b.$$.fragment,o),T=!1},d(o){o&&(d(i),d(t),d(l),d(c),d(w)),h(e,o),h(s,o),h(n,o),h(u,o),h(p,o),h(b,o)}}}function Y(r){return r.map(e=>[e,e])}function $e(r,e,i){let s=window.localStorage.getItem("inspector")??"",t=window.localStorage.getItem("scheme_reference")??"",n="",a="",l="",u="",y=Y(["Baseline","Feasibility Design","Preliminary Design","Outline Design","Detailed Design","Inspection"]),c=Y(["1 - Conflict at Side Roads","2 - Conflict at Major Junctions / Roundabouts","3 - Collision Alongside or from Behind","4 - Trip Hazard","5 - Kerbside Activity","6A - Risk of Crossing Conflict (Busy Roads)","6B - Risk of Crossing Conflict (Quieter Roads)","7A - Standard of Crossing Facility (Busy Roads)","7B - Standard of Crossing Facility (Junction)","8 - Traffic Speed (>37mph)","9A - Traffic Volume (>10,000vpd)","9B - Traffic Volume (>5% HGVs)","10 - Crossing Speed","11A - Footway Width (Absolute Minimum <1m)","11B - Footway Width (at Pinchpoints)","11C - Footway Width - Poor Pedestrian Comfort","12 - Tram - Insufficient width next to Tram Track","13 - Tram/Rail - Poor Crossing Angle","14 - Major Cycle Surface Defect","15 - Major Pedestrian Surface Defect","16 - Inappropriate Shared Use","17 - Barriers, Steps and/or Dismount signs","18 - Route isn't direct, logical or intuitive to all users","19 - Inappropriate Surface Materials","20 - Inappropriate Lighting","21 - Routes must join other facilities as a network"]);function p(){s=this.value,i(0,s)}function w(){t=this.value,i(1,t)}function b(C){n=C,i(2,n)}function M(C){a=C,i(3,a)}function T(){l=this.value,i(4,l)}function R(C){u=C,i(5,u)}return r.$$.update=()=>{r.$$.dirty&1&&window.localStorage.setItem("inspector",s),r.$$.dirty&2&&window.localStorage.setItem("scheme_reference",t)},[s,t,n,a,l,u,y,c,p,w,b,M,T,R]}class ge extends E{constructor(e){super(),z(this,e,$e,_e,N,{})}}function be(r,e,i){let s;te(r,ne,l=>i(2,s=l));let t=null,{markerPosition:n=null}=e;Z(()=>{s.on("click",a)}),se(()=>{t&&t.remove(),s.off("click",a)});function a(l){t||(t=new ie.Marker({draggable:!0}).setLngLat(l.lngLat).addTo(s),i(0,n=t.getLngLat()),t.on("dragend",()=>{i(0,n=t.getLngLat())}))}return r.$$set=l=>{"markerPosition"in l&&i(0,n=l.markerPosition)},[n]}class ke extends E{constructor(e){super(),z(this,e,be,null,N,{markerPosition:0})}}function ve(r){let e;return{c(){e=S("p"),e.textContent="Click the map to add a critical"},m(i,s){m(i,e,s)},p:j,i:j,o:j,d(i){i&&d(e)}}}function he(r){let e,i,s,t,n,a;return n=new ge({}),{c(){e=S("p"),i=U("Critical at "),s=U(r[0]),t=P(),k(n.$$.fragment)},m(l,u){m(l,e,u),D(e,i),D(e,s),m(l,t,u),v(n,l,u),a=!0},p(l,u){(!a||u&1)&&le(s,l[0])},i(l){a||(_(n.$$.fragment,l),a=!0)},o(l){$(n.$$.fragment,l),a=!1},d(l){l&&(d(e),d(t)),h(n,l)}}}function we(r){let e,i,s,t,n,a;const l=[he,ve],u=[];function y(c,p){return c[0]?0:1}return t=y(r),n=u[t]=l[t](r),{c(){e=S("div"),i=S("h1"),i.textContent="Critical issue entry",s=P(),n.c(),g(e,"slot","sidebar"),g(e,"class","govuk-prose")},m(c,p){m(c,e,p),D(e,i),D(e,s),u[t].m(e,null),a=!0},p(c,p){let w=t;t=y(c),t===w?u[t].p(c,p):(re(),$(u[w],1,1,()=>{u[w]=null}),oe(),n=u[t],n?n.p(c,p):(n=u[t]=l[t](c),n.c()),_(n,1),n.m(e,null))},i(c){a||(_(n),a=!0)},o(c){$(n),a=!1},d(c){c&&d(e),u[t].d()}}}function ye(r){let e,i,s;function t(a){r[1](a)}let n={};return r[0]!==void 0&&(n.markerPosition=r[0]),e=new ke({props:n}),B.push(()=>L(e,"markerPosition",t)),{c(){k(e.$$.fragment)},m(a,l){v(e,a,l),s=!0},p(a,l){const u={};!i&&l&1&&(i=!0,u.markerPosition=a[0],A(()=>i=!1)),e.$set(u)},i(a){s||(_(e.$$.fragment,a),s=!0)},o(a){$(e.$$.fragment,a),s=!1},d(a){h(e,a)}}}function Ce(r){let e,i,s;return i=new fe({props:{style:"dataviz",startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[ye]},$$scope:{ctx:r}}}),{c(){e=S("div"),k(i.$$.fragment),g(e,"slot","main")},m(t,n){m(t,e,n),v(i,e,null),s=!0},p(t,n){const a={};n&5&&(a.$$scope={dirty:n,ctx:t}),i.$set(a)},i(t){s||(_(i.$$.fragment,t),s=!0)},o(t){$(i.$$.fragment,t),s=!1},d(t){t&&d(e),h(i)}}}function Se(r){let e,i;return e=new ue({props:{$$slots:{main:[Ce],sidebar:[we]},$$scope:{ctx:r}}}),{c(){k(e.$$.fragment)},m(s,t){v(e,s,t),i=!0},p(s,[t]){const n={};t&5&&(n.$$scope={dirty:t,ctx:s}),e.$set(n)},i(s){i||(_(e.$$.fragment,s),i=!0)},o(s){$(e.$$.fragment,s),i=!1},d(s){h(e,s)}}}function Pe(r,e,i){Z(()=>{ae()});let s=null;function t(n){s=n,i(0,s)}return[s,t]}class Te extends E{constructor(e){super(),z(this,e,Pe,Se,N,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Te({target:document.getElementById("app")});
