import{S as b,i as w,s as S,b as q,c as A,f as k,m as L,k as T,t as d,l as m,p as C,e as $,g,J as G,h as v,w as H,o as y,M as K,d as E,aw as W,j as B,v as Q,aH as U,aI as Y,aJ as V,aK as X,H as N,x,n as ee,I as te,r as ne,G as oe,a as re,N as D,A as F,B as se,T as ae,P as le,Z as O,Y as Z,Q as ie,a1 as ce,a0 as ue,$ as z,ao as J}from"./layer_helper_utils-add7f0af.js";import{e as fe,C as pe,a as de,l as j,c}from"./StreetViewController-72772fe4.js";function ge(s){let e,o,t;function n(r){s[2](r)}let l={label:"Basemap",id:"basemap",choices:[["streets","Streets"],["hybrid","Satellite"],["dataviz","Dataviz"]]};return s[0]!==void 0&&(l.value=s[0]),e=new fe({props:l}),q.push(()=>A(e,"value",n)),e.$on("change",s[1]),{c(){k(e.$$.fragment)},m(r,i){L(e,r,i),t=!0},p(r,[i]){const a={};!o&&i&1&&(o=!0,a.value=r[0],T(()=>o=!1)),e.$set(a)},i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){m(e.$$.fragment,r),t=!1},d(r){C(e,r)}}}function me(s,e,o){let{style:t}=e;function n(){let r=new URLSearchParams(window.location.search);r.set("style",t);let i=`${window.location.pathname}?${r.toString()}${window.location.hash}`;window.location.href=i}function l(r){t=r,o(0,t)}return s.$$set=r=>{"style"in r&&o(0,t=r.style)},[t,n,l]}class De extends b{constructor(e){super(),w(this,e,me,ge,S,{style:0})}}function _e(s){let e;return{c(){e=$("span"),g(e,"class","svelte-kzgqtg"),G(e,"background",s[0])},m(o,t){v(o,e,t)},p(o,[t]){t&1&&G(e,"background",o[0])},i:H,o:H,d(o){o&&y(e)}}}function he(s,e,o){let{color:t}=e;return s.$$set=n=>{"color"in n&&o(0,t=n.color)},[t]}class $e extends b{constructor(e){super(),w(this,e,he,_e,S,{color:0})}}const ve="/atip/critical_entry_mvp/assets/help-d011708a.svg";function ye(s){let e,o;const t=s[1].default,n=U(t,s,s[4],null);return{c(){e=$("div"),n&&n.c(),g(e,"class","govuk-prose")},m(l,r){v(l,e,r),n&&n.m(e,null),o=!0},p(l,r){n&&n.p&&(!o||r&16)&&Y(n,t,l,l[4],o?X(t,l[4],r,null):V(l[4]),null)},i(l){o||(d(n,l),o=!0)},o(l){m(n,l),o=!1},d(l){l&&y(e),n&&n.d(l)}}}function be(s){let e,o,t,n,l,r,i,a,f;function p(u){s[3](u)}let I={title:"Help",$$slots:{default:[ye]},$$scope:{ctx:s}};return s[0]!==void 0&&(I.open=s[0]),l=new K({props:I}),q.push(()=>A(l,"open",p)),{c(){e=$("button"),o=$("img"),n=E(),k(l.$$.fragment),W(o.src,t=ve)||g(o,"src",t),g(o,"title","Help"),g(o,"alt","Help"),g(e,"class","svelte-7d9d1l")},m(u,_){v(u,e,_),B(e,o),v(u,n,_),L(l,u,_),i=!0,a||(f=Q(e,"click",s[2]),a=!0)},p(u,[_]){const P={};_&16&&(P.$$scope={dirty:_,ctx:u}),!r&&_&1&&(r=!0,P.open=u[0],T(()=>r=!1)),l.$set(P)},i(u){i||(d(l.$$.fragment,u),i=!0)},o(u){m(l.$$.fragment,u),i=!1},d(u){u&&(y(e),y(n)),C(l,u),a=!1,f()}}}function we(s,e,o){let{$$slots:t={},$$scope:n}=e,l=!1;const r=()=>o(0,l=!0);function i(a){l=a,o(0,l)}return s.$$set=a=>{"$$scope"in a&&o(4,n=a.$$scope)},[l,t,r,i,n]}class Ge extends b{constructor(e){super(),w(this,e,we,be,S,{})}}function M(s,e,o){const t=s.slice();return t[1]=e[o][0],t[2]=e[o][1],t}function R(s){let e,o,t,n=s[1]+"",l,r,i;return o=new $e({props:{color:s[2]}}),{c(){e=$("li"),k(o.$$.fragment),t=E(),l=ne(n),r=E()},m(a,f){v(a,e,f),L(o,e,null),B(e,t),B(e,l),B(e,r),i=!0},p(a,f){const p={};f&1&&(p.color=a[2]),o.$set(p),(!i||f&1)&&n!==(n=a[1]+"")&&oe(l,n)},i(a){i||(d(o.$$.fragment,a),i=!0)},o(a){m(o.$$.fragment,a),i=!1},d(a){a&&y(e),C(o)}}}function Se(s){let e,o,t=N(s[0]),n=[];for(let r=0;r<t.length;r+=1)n[r]=R(M(s,t,r));const l=r=>m(n[r],1,1,()=>{n[r]=null});return{c(){e=$("ul");for(let r=0;r<n.length;r+=1)n[r].c()},m(r,i){v(r,e,i);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);o=!0},p(r,i){if(i&1){t=N(r[0]);let a;for(a=0;a<t.length;a+=1){const f=M(r,t,a);n[a]?(n[a].p(f,i),d(n[a],1)):(n[a]=R(f),n[a].c(),d(n[a],1),n[a].m(e,null))}for(x(),a=t.length;a<n.length;a+=1)l(a);ee()}},i(r){if(!o){for(let i=0;i<t.length;i+=1)d(n[i]);o=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)m(n[i]);o=!1},d(r){r&&y(e),te(n,r)}}}function ke(s){let e,o;return e=new pe({props:{label:"Legend",$$slots:{default:[Se]},$$scope:{ctx:s}}}),{c(){k(e.$$.fragment)},m(t,n){L(e,t,n),o=!0},p(t,[n]){const l={};n&33&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){o||(d(e.$$.fragment,t),o=!0)},o(t){m(e.$$.fragment,t),o=!1},d(t){C(e,t)}}}function Le(s,e,o){let{rows:t}=e;return s.$$set=n=>{"rows"in n&&o(0,t=n.rows)},[t]}class Ne extends b{constructor(e){super(),w(this,e,Le,ke,S,{rows:0})}}const Ce="/atip/critical_entry_mvp/assets/zoom_out_map-b2e1091a.svg";function Ie(s){let e,o;return{c(){e=$("img"),W(e.src,o=Ce)||g(e,"src",o),g(e,"alt","Zoom to show entire boundary")},m(t,n){v(t,e,n)},p:H,d(t){t&&y(e)}}}function Be(s){let e,o;return e=new re({props:{title:"Zoom to show entire boundary",$$slots:{default:[Ie]},$$scope:{ctx:s}}}),e.$on("click",s[0]),{c(){k(e.$$.fragment)},m(t,n){L(e,t,n),o=!0},p(t,[n]){const l={};n&8&&(l.$$scope={dirty:n,ctx:t}),e.$set(l)},i(t){o||(d(e.$$.fragment,t),o=!0)},o(t){m(e.$$.fragment,t),o=!1},d(t){C(e,t)}}}function Pe(s,e,o){let t;D(s,F,r=>o(2,t=r));let{boundaryGeojson:n}=e;function l(){t.fitBounds(se(n),{padding:20,animate:!0,duration:500})}return s.$$set=r=>{"boundaryGeojson"in r&&o(1,n=r.boundaryGeojson)},[l,n]}class Oe extends b{constructor(e){super(),w(this,e,Pe,Be,S,{boundaryGeojson:1})}}let h="interventions";function je(s,e,o){let t,n;D(s,F,a=>o(1,t=a)),D(s,ae,a=>o(2,n=a));let{colorInterventions:l}=e;le(t,h,n);const r=["!=","hide_while_editing",!0];return O(t,{id:"interventions-points",source:h,filter:["all",ce,r,["!=","endpoint",!0]],color:l,radius:de}),Z(t,{id:"interventions-lines",source:h,filter:["all",ue,r],color:l,width:j}),O(t,{id:"interventions-lines-endpoints",source:h,filter:["==","endpoint",!0],radius:.5*j,opacity:0,strokeColor:c.lineEndpointColor,strokeWidth:2}),ie(t,{id:"interventions-polygons",source:h,filter:["all",z,r],color:l,opacity:.2}),Z(t,{id:"interventions-polygon-outlines",source:h,filter:["all",z,r],color:l,opacity:.5,width:.7*j}),s.$$set=a=>{"colorInterventions"in a&&o(0,l=a.colorInterventions)},s.$$.update=()=>{if(s.$$.dirty&6){let a=JSON.parse(JSON.stringify(n)),f=[];for(let p of a.features)if(p.geometry.type=="LineString"&&!p.properties.hide_while_editing)for(let I of[p.geometry.coordinates[0],p.geometry.coordinates[p.geometry.coordinates.length-1]])f.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:I}});a.features=a.features.concat(f),t.getSource(h).setData(a)}},[l,t,n]}class Ze extends b{constructor(e){super(),w(this,e,je,null,S,{colorInterventions:0})}}function ze(s){return{v1:"Scheme Design",v2:"Experimental Scheme Design",planning:"Development Planning",criticals:"Critical Issues",atf4:"ATF4 Scheme"}[s]}function Je(s){return{v1:"an intervention",v2:"an intervention",planning:"a development",criticals:"a critical issue",atf4:"an intervention"}[s]}function Me(s){return{v1:"interventions",v2:"interventions",planning:"developments",criticals:"critical issues",atf4:"interventions"}[s]}function Re(s){return s=="planning"?J(["get","reference_type",["get","planning"]],{preapp:c.preapp,outline:c.outline,"reserved matters":c["reserved matters"],"local plan":c["local plan"]},"black"):J(["get","intervention_type"],{area:c.area,route:c.route,crossing:c.crossing,other:c.other},"white")}function qe(s){return s=="planning"?[["Preapp",c.preapp],["Outline",c.outline],["Reserved matters",c["reserved matters"]],["Local plan",c["local plan"]]]:[["Areas",c.area],["Routes",c.route],["Crossings",c.crossing],["Other",c.other]]}export{De as B,$e as C,Ge as H,Ze as I,Ne as L,Oe as Z,Me as a,ze as b,Re as c,qe as d,Je as s};
