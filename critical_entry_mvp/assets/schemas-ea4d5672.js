import{S,i as C,s as L,D as H,e as h,g as f,h as y,j as k,H as E,I as O,J as R,t as v,l as b,o as w,d as I,T as M,v as Z,aH as ee,M as te,aX as ne,b as X,c as Y,f as P,m as j,k as K,p as D,w as z,aD as V,P as W,x as se,n as oe,Q as le,r as re,O as ie,a as ae,W as N,A as x,B as ce,_ as ue,Y as fe,a4 as q,a3 as A,Z as de,a8 as pe,a7 as ge,a6 as J,av as T}from"./layer_helper_utils-3f0de19d.js";import{b as me,C as _e,a as he,l as G,c as m}from"./StreetViewController-15a6515c.js";import{M as ve}from"./InteractiveLayer-a088098b.js";function be(o){let e,t,n;const s=o[3].default,r=H(s,o,o[2],null);return{c(){e=h("fieldset"),t=h("div"),r&&r.c(),f(t,"class",o[0]),f(t,"data-module","govuk-checkboxes"),f(e,"class","govuk-fieldset")},m(l,a){y(l,e,a),k(e,t),r&&r.m(t,null),n=!0},p(l,[a]){r&&r.p&&(!n||a&4)&&E(r,s,l,l[2],n?R(s,l[2],a,null):O(l[2]),null)},i(l){n||(v(r,l),n=!0)},o(l){b(r,l),n=!1},d(l){l&&w(e),r&&r.d(l)}}}function $e(o,e,t){let{$$slots:n={},$$scope:s}=e,{small:r=!1}=e,l=r?"govuk-checkboxes--small":"govuk-checkboxes";return o.$$set=a=>{"small"in a&&t(1,r=a.small),"$$scope"in a&&t(2,s=a.$$scope)},[l,r,s,n]}class Je extends S{constructor(e){super(),C(this,e,$e,be,L,{small:1})}}const ke=o=>({}),F=o=>({});function ye(o){let e,t,n,s,r,l,a,i,g;const _=o[5].default,p=H(_,o,o[4],null),d=o[5].right,c=H(d,o,o[4],F);return{c(){e=h("div"),t=h("input"),n=I(),s=h("label"),p&&p.c(),r=I(),l=h("span"),c&&c.c(),f(t,"type","checkbox"),f(t,"class","govuk-checkboxes__input"),f(t,"id",o[1]),f(s,"class","govuk-label govuk-checkboxes__label"),f(s,"for",o[1]),f(s,"title",o[2]),M(l,"float","right"),f(e,"class","govuk-checkboxes__item"),f(e,"style",o[3])},m(u,$){y(u,e,$),k(e,t),t.checked=o[0],k(e,n),k(e,s),p&&p.m(s,null),k(e,r),k(e,l),c&&c.m(l,null),a=!0,i||(g=[Z(t,"change",o[7]),Z(t,"change",o[6])],i=!0)},p(u,[$]){(!a||$&2)&&f(t,"id",u[1]),$&1&&(t.checked=u[0]),p&&p.p&&(!a||$&16)&&E(p,_,u,u[4],a?R(_,u[4],$,null):O(u[4]),null),(!a||$&2)&&f(s,"for",u[1]),(!a||$&4)&&f(s,"title",u[2]),c&&c.p&&(!a||$&16)&&E(c,d,u,u[4],a?R(d,u[4],$,ke):O(u[4]),F)},i(u){a||(v(p,u),v(c,u),a=!0)},o(u){b(p,u),b(c,u),a=!1},d(u){u&&w(e),p&&p.d(u),c&&c.d(u),i=!1,ee(g)}}}function we(o,e,t){let{$$slots:n={},$$scope:s}=e;const r=ne(n);let{id:l}=e,{checked:a}=e,{hint:i=null}=e,_=r.right!==void 0?"float: none":"";function p(c){te.call(this,o,c)}function d(){a=this.checked,t(0,a)}return o.$$set=c=>{"id"in c&&t(1,l=c.id),"checked"in c&&t(0,a=c.checked),"hint"in c&&t(2,i=c.hint),"$$scope"in c&&t(4,s=c.$$scope)},[a,l,i,_,s,n,p,d]}class Te extends S{constructor(e){super(),C(this,e,we,ye,L,{id:1,checked:0,hint:2})}}function Se(o){let e,t,n;function s(l){o[2](l)}let r={label:"Basemap",id:"basemap",choices:[["streets","Streets"],["hybrid","Satellite"],["dataviz","Dataviz"]]};return o[0]!==void 0&&(r.value=o[0]),e=new me({props:r}),X.push(()=>Y(e,"value",s)),e.$on("change",o[1]),{c(){P(e.$$.fragment)},m(l,a){j(e,l,a),n=!0},p(l,[a]){const i={};!t&&a&1&&(t=!0,i.value=l[0],K(()=>t=!1)),e.$set(i)},i(l){n||(v(e.$$.fragment,l),n=!0)},o(l){b(e.$$.fragment,l),n=!1},d(l){D(e,l)}}}function Ce(o,e,t){let{style:n}=e;function s(){let l=new URLSearchParams(window.location.search);l.set("style",n);let a=`${window.location.pathname}?${l.toString()}${window.location.hash}`;window.location.href=a}function r(l){n=l,t(0,n)}return o.$$set=l=>{"style"in l&&t(0,n=l.style)},[n,s,r]}class Fe extends S{constructor(e){super(),C(this,e,Ce,Se,L,{style:0})}}function Le(o){let e;return{c(){e=h("span"),f(e,"class","svelte-kzgqtg"),M(e,"background",o[0])},m(t,n){y(t,e,n)},p(t,[n]){n&1&&M(e,"background",t[0])},i:z,o:z,d(t){t&&w(e)}}}function Be(o,e,t){let{color:n}=e;return o.$$set=s=>{"color"in s&&t(0,n=s.color)},[n]}class Ie extends S{constructor(e){super(),C(this,e,Be,Le,L,{color:0})}}const Pe="/atip/critical_entry_mvp/assets/help-d011708a.svg";function je(o){let e,t;const n=o[1].default,s=H(n,o,o[4],null);return{c(){e=h("div"),s&&s.c(),f(e,"class","govuk-prose")},m(r,l){y(r,e,l),s&&s.m(e,null),t=!0},p(r,l){s&&s.p&&(!t||l&16)&&E(s,n,r,r[4],t?R(n,r[4],l,null):O(r[4]),null)},i(r){t||(v(s,r),t=!0)},o(r){b(s,r),t=!1},d(r){r&&w(e),s&&s.d(r)}}}function De(o){let e,t,n,s,r,l,a,i,g;function _(d){o[3](d)}let p={title:"Help",$$slots:{default:[je]},$$scope:{ctx:o}};return o[0]!==void 0&&(p.open=o[0]),r=new ve({props:p}),X.push(()=>Y(r,"open",_)),{c(){e=h("button"),t=h("img"),s=I(),P(r.$$.fragment),V(t.src,n=Pe)||f(t,"src",n),f(t,"title","Help"),f(t,"alt","Help"),f(e,"class","svelte-7d9d1l")},m(d,c){y(d,e,c),k(e,t),y(d,s,c),j(r,d,c),a=!0,i||(g=Z(e,"click",o[2]),i=!0)},p(d,[c]){const u={};c&16&&(u.$$scope={dirty:c,ctx:d}),!l&&c&1&&(l=!0,u.open=d[0],K(()=>l=!1)),r.$set(u)},i(d){a||(v(r.$$.fragment,d),a=!0)},o(d){b(r.$$.fragment,d),a=!1},d(d){d&&(w(e),w(s)),D(r,d),i=!1,g()}}}function He(o,e,t){let{$$slots:n={},$$scope:s}=e,r=!1;const l=()=>t(0,r=!0);function a(i){r=i,t(0,r)}return o.$$set=i=>{"$$scope"in i&&t(4,s=i.$$scope)},[r,n,l,a,s]}class Qe extends S{constructor(e){super(),C(this,e,He,De,L,{})}}function Q(o,e,t){const n=o.slice();return n[1]=e[t][0],n[2]=e[t][1],n}function U(o){let e,t,n,s=o[1]+"",r,l,a;return t=new Ie({props:{color:o[2]}}),{c(){e=h("li"),P(t.$$.fragment),n=I(),r=re(s),l=I()},m(i,g){y(i,e,g),j(t,e,null),k(e,n),k(e,r),k(e,l),a=!0},p(i,g){const _={};g&1&&(_.color=i[2]),t.$set(_),(!a||g&1)&&s!==(s=i[1]+"")&&ie(r,s)},i(i){a||(v(t.$$.fragment,i),a=!0)},o(i){b(t.$$.fragment,i),a=!1},d(i){i&&w(e),D(t)}}}function Ee(o){let e,t,n=W(o[0]),s=[];for(let l=0;l<n.length;l+=1)s[l]=U(Q(o,n,l));const r=l=>b(s[l],1,1,()=>{s[l]=null});return{c(){e=h("ul");for(let l=0;l<s.length;l+=1)s[l].c()},m(l,a){y(l,e,a);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null);t=!0},p(l,a){if(a&1){n=W(l[0]);let i;for(i=0;i<n.length;i+=1){const g=Q(l,n,i);s[i]?(s[i].p(g,a),v(s[i],1)):(s[i]=U(g),s[i].c(),v(s[i],1),s[i].m(e,null))}for(se(),i=n.length;i<s.length;i+=1)r(i);oe()}},i(l){if(!t){for(let a=0;a<n.length;a+=1)v(s[a]);t=!0}},o(l){s=s.filter(Boolean);for(let a=0;a<s.length;a+=1)b(s[a]);t=!1},d(l){l&&w(e),le(s,l)}}}function Oe(o){let e,t;return e=new _e({props:{label:"Legend",$$slots:{default:[Ee]},$$scope:{ctx:o}}}),{c(){P(e.$$.fragment)},m(n,s){j(e,n,s),t=!0},p(n,[s]){const r={};s&33&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function Re(o,e,t){let{rows:n}=e;return o.$$set=s=>{"rows"in s&&t(0,n=s.rows)},[n]}class Ue extends S{constructor(e){super(),C(this,e,Re,Oe,L,{rows:0})}}const Ge="/atip/critical_entry_mvp/assets/zoom_out_map-b2e1091a.svg";function Me(o){let e,t;return{c(){e=h("img"),V(e.src,t=Ge)||f(e,"src",t),f(e,"alt","Zoom to show entire boundary")},m(n,s){y(n,e,s)},p:z,d(n){n&&w(e)}}}function Ze(o){let e,t;return e=new ae({props:{title:"Zoom to show entire boundary",$$slots:{default:[Me]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){P(e.$$.fragment)},m(n,s){j(e,n,s),t=!0},p(n,[s]){const r={};s&8&&(r.$$scope={dirty:s,ctx:n}),e.$set(r)},i(n){t||(v(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){D(e,n)}}}function ze(o,e,t){let n;N(o,x,l=>t(2,n=l));let{boundaryGeojson:s}=e;function r(){n.fitBounds(ce(s),{padding:20,animate:!0,duration:500})}return o.$$set=l=>{"boundaryGeojson"in l&&t(1,s=l.boundaryGeojson)},[r,s]}class Xe extends S{constructor(e){super(),C(this,e,ze,Ze,L,{boundaryGeojson:1})}}let B="interventions";function Ne(o,e,t){let n,s;N(o,x,i=>t(1,n=i)),N(o,ue,i=>t(2,s=i));let{colorInterventions:r}=e;fe(n,B,s);const l=["!=","hide_while_editing",!0];return q(n,{id:"interventions-points",source:B,filter:["all",pe,l,["!=","endpoint",!0]],color:r,radius:he}),A(n,{id:"interventions-lines",source:B,filter:["all",ge,l],color:r,width:G}),q(n,{id:"interventions-lines-endpoints",source:B,filter:["==","endpoint",!0],radius:.5*G,opacity:0,strokeColor:m.lineEndpointColor,strokeWidth:2}),de(n,{id:"interventions-polygons",source:B,filter:["all",J,l],color:r,opacity:.2}),A(n,{id:"interventions-polygon-outlines",source:B,filter:["all",J,l],color:r,opacity:.5,width:.7*G}),o.$$set=i=>{"colorInterventions"in i&&t(0,r=i.colorInterventions)},o.$$.update=()=>{if(o.$$.dirty&6){let i=JSON.parse(JSON.stringify(s)),g=[];for(let _ of i.features)if(_.geometry.type=="LineString"&&!_.properties.hide_while_editing)for(let p of[_.geometry.coordinates[0],_.geometry.coordinates[_.geometry.coordinates.length-1]])g.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:p}});i.features=i.features.concat(g),n.getSource(B).setData(i)}},[r,n,s]}class Ye extends S{constructor(e){super(),C(this,e,Ne,null,L,{colorInterventions:0})}}function Ke(o){return{v1:"Scheme Design",v2:"Experimental Scheme Design",planning:"Development Planning",criticals:"Critical Issues",atf4:"ATF4 Scheme"}[o]}function Ve(o){return{v1:"an intervention",v2:"an intervention",planning:"a development",criticals:"a critical issue",atf4:"an intervention"}[o]}function xe(o){return{v1:"interventions",v2:"interventions",planning:"developments",criticals:"critical issues",atf4:"interventions"}[o]}function et(o){return o=="planning"?T(["get","reference_type",["get","planning"]],{preapp:m.preapp,outline:m.outline,"reserved matters":m["reserved matters"],"local plan":m["local plan"]},"black"):T(["get","intervention_type"],{area:m.area,route:m.route,crossing:m.crossing,other:m.other},"white")}function tt(o){return o=="planning"?[["Preapp",m.preapp],["Outline",m.outline],["Reserved matters",m["reserved matters"]],["Local plan",m["local plan"]]]:[["Areas",m.area],["Routes",m.route],["Crossings",m.crossing],["Other",m.other]]}export{Fe as B,Je as C,Qe as H,Ye as I,Ue as L,Xe as Z,Te as a,xe as b,Ke as c,et as d,tt as e,Ie as f,Ve as s};
