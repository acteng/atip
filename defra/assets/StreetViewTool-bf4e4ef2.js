import{S as j,i as Q,s as J,aL as be,e as M,h as c,j as I,aM as ye,aN as ke,aO as ve,t as C,n as S,o as B,k as w,d as G,az as Gt,w as H,aq as Se,b3 as qt,aR as ie,F as Ft,g as Z,m as D,p as N,E as Ot,aA as Ee,Z as Ie,aD as Zt,ba as $e,aB as Dt,bb as Nt,v as Le,u as ee,C as we,bc as Kt,b as We,c as Ke,l as je,q as Ue,aJ as et,bd as ue,H as q,be as fe,D as x,b9 as Ve,bf as jt,_ as he,$ as ge,bg as Qt,ai as ht,aH as Jt,aI as Xt,B as gt,r as Yt,bh as xt,aX as $t,a0 as Ae,bi as el,bj as tl,aP as ll,aQ as nl,aK as rl,ar as tt,bk as il,a as bt,R as sl}from"./index-14eadd57.js";const ol=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function al(l){let e,t;const n=l[1].default,r=be(n,l,l[0],null);return{c(){e=M("div"),r&&r.c(),c(e,"class","govuk-button-group")},m(s,i){I(s,e,i),r&&r.m(e,null),t=!0},p(s,[i]){r&&r.p&&(!t||i&1)&&ye(r,n,s,s[0],t?ve(n,s[0],i,null):ke(s[0]),null)},i(s){t||(C(r,s),t=!0)},o(s){S(r,s),t=!1},d(s){s&&B(e),r&&r.d(s)}}}function fl(l,e,t){let{$$slots:n={},$$scope:r}=e;return l.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n]}class bn extends j{constructor(e){super(),Q(this,e,fl,al,J,{})}}function ul(l){let e,t,n;const r=l[3].default,s=be(r,l,l[2],null);return{c(){e=M("fieldset"),t=M("div"),s&&s.c(),c(t,"class",l[0]),c(t,"data-module","govuk-checkboxes"),c(e,"class","govuk-fieldset")},m(i,o){I(i,e,o),w(e,t),s&&s.m(t,null),n=!0},p(i,[o]){s&&s.p&&(!n||o&4)&&ye(s,r,i,i[2],n?ve(r,i[2],o,null):ke(i[2]),null)},i(i){n||(C(s,i),n=!0)},o(i){S(s,i),n=!1},d(i){i&&B(e),s&&s.d(i)}}}function cl(l,e,t){let{$$slots:n={},$$scope:r}=e,{small:s=!1}=e,i=s?"govuk-checkboxes--small":"govuk-checkboxes";return l.$$set=o=>{"small"in o&&t(1,s=o.small),"$$scope"in o&&t(2,r=o.$$scope)},[i,s,r,n]}class yn extends j{constructor(e){super(),Q(this,e,cl,ul,J,{small:1})}}const ml=l=>({}),lt=l=>({});function dl(l){let e,t,n,r,s,i,o,f,m;const a=l[5].default,d=be(a,l,l[4],null),_=l[5].right,v=be(_,l,l[4],lt);return{c(){e=M("div"),t=M("input"),n=G(),r=M("label"),d&&d.c(),s=G(),i=M("span"),v&&v.c(),c(t,"type","checkbox"),c(t,"class","govuk-checkboxes__input"),c(t,"id",l[1]),c(r,"class","govuk-label govuk-checkboxes__label"),c(r,"for",l[1]),c(r,"title",l[2]),Gt(i,"float","right"),c(e,"class","govuk-checkboxes__item"),c(e,"style",l[3])},m(b,h){I(b,e,h),w(e,t),t.checked=l[0],w(e,n),w(e,r),d&&d.m(r,null),w(e,s),w(e,i),v&&v.m(i,null),o=!0,f||(m=[H(t,"change",l[7]),H(t,"change",l[6])],f=!0)},p(b,[h]){(!o||h&2)&&c(t,"id",b[1]),h&1&&(t.checked=b[0]),d&&d.p&&(!o||h&16)&&ye(d,a,b,b[4],o?ve(a,b[4],h,null):ke(b[4]),null),(!o||h&2)&&c(r,"for",b[1]),(!o||h&4)&&c(r,"title",b[2]),v&&v.p&&(!o||h&16)&&ye(v,_,b,b[4],o?ve(_,b[4],h,ml):ke(b[4]),lt)},i(b){o||(C(d,b),C(v,b),o=!0)},o(b){S(d,b),S(v,b),o=!1},d(b){b&&B(e),d&&d.d(b),v&&v.d(b),f=!1,Se(m)}}}function _l(l,e,t){let{$$slots:n={},$$scope:r}=e;const s=qt(n);let{id:i}=e,{checked:o}=e,{hint:f=null}=e,a=s.right!==void 0?"float: none":"";function d(v){ie.call(this,l,v)}function _(){o=this.checked,t(0,o)}return l.$$set=v=>{"id"in v&&t(1,i=v.id),"checked"in v&&t(0,o=v.checked),"hint"in v&&t(2,f=v.hint),"$$scope"in v&&t(4,r=v.$$scope)},[o,i,f,a,r,n,d,_]}class kn extends j{constructor(e){super(),Q(this,e,_l,dl,J,{id:1,checked:0,hint:2})}}function nt(l,e,t){const n=l.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function rt(l){let e;return{c(){e=M("option"),e.__value="",Le(e,e.__value)},m(t,n){I(t,e,n)},d(t){t&&B(e)}}}function it(l){let e,t=l[10]+"",n,r;return{c(){e=M("option"),n=ee(t),e.__value=r=l[9],Le(e,e.__value)},m(s,i){I(s,e,i),w(e,n)},p(s,i){i&8&&t!==(t=s[10]+"")&&we(n,t),i&8&&r!==(r=s[9])&&(e.__value=r,Le(e,e.__value))},d(s){s&&B(e)}}}function hl(l){let e,t,n,r,s,i,o;e=new Ot({props:{errorMessage:l[6]}});let f=l[4]&&rt(),m=Ee(l[3]),a=[];for(let d=0;d<m.length;d+=1)a[d]=it(nt(l,m,d));return{c(){Z(e.$$.fragment),t=G(),n=M("select"),f&&f.c(),r=Ie();for(let d=0;d<a.length;d+=1)a[d].c();c(n,"class","govuk-select"),c(n,"id",l[2]),n.disabled=l[5],l[0]===void 0&&Zt(()=>l[8].call(n))},m(d,_){D(e,d,_),I(d,t,_),I(d,n,_),f&&f.m(n,null),w(n,r);for(let v=0;v<a.length;v+=1)a[v]&&a[v].m(n,null);$e(n,l[0],!0),s=!0,i||(o=[H(n,"change",l[8]),H(n,"change",l[7])],i=!0)},p(d,_){const v={};if(_&64&&(v.errorMessage=d[6]),e.$set(v),d[4]?f||(f=rt(),f.c(),f.m(n,r)):f&&(f.d(1),f=null),_&8){m=Ee(d[3]);let b;for(b=0;b<m.length;b+=1){const h=nt(d,m,b);a[b]?a[b].p(h,_):(a[b]=it(h),a[b].c(),a[b].m(n,null))}for(;b<a.length;b+=1)a[b].d(1);a.length=m.length}(!s||_&4)&&c(n,"id",d[2]),(!s||_&32)&&(n.disabled=d[5]),_&9&&$e(n,d[0])},i(d){s||(C(e.$$.fragment,d),s=!0)},o(d){S(e.$$.fragment,d),s=!1},d(d){d&&(B(t),B(n)),N(e,d),f&&f.d(),Dt(a,d),i=!1,Se(o)}}}function gl(l){let e,t;return e=new Ft({props:{label:l[1],id:l[2],$$slots:{default:[hl]},$$scope:{ctx:l}}}),{c(){Z(e.$$.fragment)},m(n,r){D(e,n,r),t=!0},p(n,[r]){const s={};r&2&&(s.label=n[1]),r&4&&(s.id=n[2]),r&8317&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function bl(l,e,t){let{label:n}=e,{id:r}=e,{choices:s}=e,{emptyOption:i=!1}=e,{disabled:o=!1}=e,{errorMessage:f=""}=e,{value:m}=e;function a(_){ie.call(this,l,_)}function d(){m=Nt(this),t(0,m),t(3,s)}return l.$$set=_=>{"label"in _&&t(1,n=_.label),"id"in _&&t(2,r=_.id),"choices"in _&&t(3,s=_.choices),"emptyOption"in _&&t(4,i=_.emptyOption),"disabled"in _&&t(5,o=_.disabled),"errorMessage"in _&&t(6,f=_.errorMessage),"value"in _&&t(0,m=_.value)},[m,n,r,s,i,o,f,a,d]}class yl extends j{constructor(e){super(),Q(this,e,bl,gl,J,{label:1,id:2,choices:3,emptyOption:4,disabled:5,errorMessage:6,value:0})}}function kl(l){let e,t,n;function r(i){l[2](i)}let s={label:"Basemap",id:"basemap",choices:Kt(),disabled:l[0]};return l[1]!==void 0&&(s.value=l[1]),e=new yl({props:s}),We.push(()=>Ke(e,"value",r)),{c(){Z(e.$$.fragment)},m(i,o){D(e,i,o),n=!0},p(i,[o]){const f={};o&1&&(f.disabled=i[0]),!t&&o&2&&(t=!0,f.value=i[1],je(()=>t=!1)),e.$set(f)},i(i){n||(C(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){N(e,i)}}}function vl(l,e,t){let n;Ue(l,et,i=>t(1,n=i));let{disabled:r=!1}=e;function s(i){n=i,et.set(n)}return l.$$set=i=>{"disabled"in i&&t(0,r=i.disabled)},[r,n,s]}class vn extends j{constructor(e){super(),Q(this,e,vl,kl,J,{disabled:0})}}function wl(l){let e,t,n,r,s,i,o;const f=l[3].default,m=be(f,l,l[2],null);return{c(){e=M("details"),t=M("summary"),n=M("span"),r=ee(l[0]),s=G(),i=M("div"),m&&m.c(),c(n,"class","govuk-details__summary-text"),c(t,"class","govuk-details__summary"),c(i,"class","govuk-details__text"),e.open=l[1],c(e,"class","govuk-details"),c(e,"data-module","govuk-details")},m(a,d){I(a,e,d),w(e,t),w(t,n),w(n,r),w(e,s),w(e,i),m&&m.m(i,null),o=!0},p(a,[d]){(!o||d&1)&&we(r,a[0]),m&&m.p&&(!o||d&4)&&ye(m,f,a,a[2],o?ve(f,a[2],d,null):ke(a[2]),null),(!o||d&2)&&(e.open=a[1])},i(a){o||(C(m,a),o=!0)},o(a){S(m,a),o=!1},d(a){a&&B(e),m&&m.d(a)}}}function Ml(l,e,t){let{$$slots:n={},$$scope:r}=e,{label:s}=e,{open:i=!1}=e;return l.$$set=o=>{"label"in o&&t(0,s=o.label),"open"in o&&t(1,i=o.open),"$$scope"in o&&t(2,r=o.$$scope)},[s,i,r,n]}class Tl extends j{constructor(e){super(),Q(this,e,Ml,wl,J,{label:0,open:1})}}function Cl(l){let e,t;return{c(){e=ue("svg"),t=ue("path"),c(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),c(e,"viewBox","0 0 60.006 21.412"),c(e,"width","14"),c(e,"height","20"),c(e,"class","svelte-en2qvf")},m(n,r){I(n,e,r),w(e,t)},p:q,i:q,o:q,d(n){n&&B(e)}}}class pl extends j{constructor(e){super(),Q(this,e,null,Cl,J,{})}}function Ll(l){let e,t;return{c(){e=M("img"),x(e.src,t=l[3]+"area.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,r){I(n,e,r)},p(n,r){r&8&&!x(e.src,t=n[3]+"area.svg")&&c(e,"src",t),r&64&&c(e,"alt",n[6])},d(n){n&&B(e)}}}function Sl(l){let e,t;return{c(){e=M("img"),x(e.src,t=l[3]+"poi.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,r){I(n,e,r)},p(n,r){r&8&&!x(e.src,t=n[3]+"poi.svg")&&c(e,"src",t),r&64&&c(e,"alt",n[6])},d(n){n&&B(e)}}}function Il(l){let e,t;return{c(){e=M("img"),x(e.src,t=l[3]+"postal_code.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,r){I(n,e,r)},p(n,r){r&8&&!x(e.src,t=n[3]+"postal_code.svg")&&c(e,"src",t),r&64&&c(e,"alt",n[6])},d(n){n&&B(e)}}}function Bl(l){let e,t;return{c(){e=M("img"),x(e.src,t=l[3]+"street.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,r){I(n,e,r)},p(n,r){r&8&&!x(e.src,t=n[3]+"street.svg")&&c(e,"src",t),r&64&&c(e,"alt",n[6])},d(n){n&&B(e)}}}function Rl(l){let e,t;return{c(){e=M("img"),x(e.src,t=l[3]+"road.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,r){I(n,e,r)},p(n,r){r&8&&!x(e.src,t=n[3]+"road.svg")&&c(e,"src",t),r&64&&c(e,"alt",n[6])},d(n){n&&B(e)}}}function zl(l){let e,t;return{c(){e=M("img"),x(e.src,t=l[3]+"housenumber.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,r){I(n,e,r)},p(n,r){r&8&&!x(e.src,t=n[3]+"housenumber.svg")&&c(e,"src",t),r&64&&c(e,"alt",n[6])},d(n){n&&B(e)}}}function Pl(l){let e,t,n,r;return{c(){e=M("img"),x(e.src,t=l[5])||c(e,"src",t),c(e,"alt",l[4]),c(e,"class","svelte-ltkwvy")},m(s,i){I(s,e,i),n||(r=H(e,"error",l[12]),n=!0)},p(s,i){i&32&&!x(e.src,t=s[5])&&c(e,"src",t),i&16&&c(e,"alt",s[4])},d(s){s&&B(e),n=!1,r()}}}function st(l){let e,t;return{c(){e=M("span"),t=ee(l[6]),c(e,"class","secondary svelte-ltkwvy")},m(n,r){I(n,e,r),w(e,t)},p(n,r){r&64&&we(t,n[6])},d(n){n&&B(e)}}}function Al(l){var te,O;let e,t,n,r,s,i,o,f,m=l[0].place_name.replace(/,.*/,"")+"",a,d,_=l[2]==="always"||l[2]&&!l[0].address&&((te=l[0].properties)==null?void 0:te.kind)!=="road"&&((O=l[0].properties)==null?void 0:O.kind)!=="road_relation"&&!l[0].id.startsWith("address.")&&!l[0].id.startsWith("postal_code.")&&(!l[0].id.startsWith("poi.")||!l[5]),v,b,h=l[0].place_name.replace(/[^,]*,?\s*/,"")+"",P,E,T;function F(p,R){var k,g;return R&1&&(t=null),R&1&&(n=null),R&1&&(r=null),p[5]?Pl:p[0].address?zl:((k=p[0].properties)==null?void 0:k.kind)==="road"||((g=p[0].properties)==null?void 0:g.kind)==="road_relation"?Rl:(t==null&&(t=!!p[0].id.startsWith("address.")),t?Bl:(n==null&&(n=!!p[0].id.startsWith("postal_code.")),n?Il:(r==null&&(r=!!p[0].id.startsWith("poi.")),r?Sl:Ll)))}let K=F(l,-1),y=K(l),L=_&&st(l);return{c(){e=M("li"),y.c(),s=G(),i=M("span"),o=M("span"),f=M("span"),a=ee(m),d=G(),L&&L.c(),v=G(),b=M("span"),P=ee(h),c(f,"class","primary svelte-ltkwvy"),c(o,"class","svelte-ltkwvy"),c(b,"class","line2 svelte-ltkwvy"),c(i,"class","texts svelte-ltkwvy"),c(e,"tabindex","0"),c(e,"data-selected",l[1]),c(e,"class","svelte-ltkwvy"),fe(e,"selected",l[1])},m(p,R){I(p,e,R),y.m(e,null),w(e,s),w(e,i),w(i,o),w(o,f),w(f,a),w(o,d),L&&L.m(o,null),w(i,v),w(i,b),w(b,P),E||(T=[H(e,"mouseenter",l[10]),H(e,"focus",l[11])],E=!0)},p(p,[R]){var k,g;K===(K=F(p,R))&&y?y.p(p,R):(y.d(1),y=K(p),y&&(y.c(),y.m(e,s))),R&1&&m!==(m=p[0].place_name.replace(/,.*/,"")+"")&&we(a,m),R&37&&(_=p[2]==="always"||p[2]&&!p[0].address&&((k=p[0].properties)==null?void 0:k.kind)!=="road"&&((g=p[0].properties)==null?void 0:g.kind)!=="road_relation"&&!p[0].id.startsWith("address.")&&!p[0].id.startsWith("postal_code.")&&(!p[0].id.startsWith("poi.")||!p[5])),_?L?L.p(p,R):(L=st(p),L.c(),L.m(o,null)):L&&(L.d(1),L=null),R&1&&h!==(h=p[0].place_name.replace(/[^,]*,?\s*/,"")+"")&&we(P,h),R&2&&c(e,"data-selected",p[1]),R&2&&fe(e,"selected",p[1])},i:q,o:q,d(p){p&&B(e),y.d(),L&&L.d(),E=!1,Se(T)}}}function El(l,e,t){var E;let n,r,{feature:s}=e,{selected:i=!1}=e,{showPlaceType:o}=e,{missingIconsCache:f}=e,{iconsBaseUrl:m}=e;const a=(E=s.properties)==null?void 0:E.categories;let d,_;function v(T){_&&f.add(_),t(9,n--,n)}function b(T){ie.call(this,l,T)}function h(T){ie.call(this,l,T)}const P=T=>v(T.currentTarget);return l.$$set=T=>{"feature"in T&&t(0,s=T.feature),"selected"in T&&t(1,i=T.selected),"showPlaceType"in T&&t(2,o=T.showPlaceType),"missingIconsCache"in T&&t(8,f=T.missingIconsCache),"iconsBaseUrl"in T&&t(3,m=T.iconsBaseUrl)},l.$$.update=()=>{var T,F,K,y;if(l.$$.dirty&824)do t(9,n--,n),t(4,d=a==null?void 0:a[n]),t(5,_=d?m+d.replace(/ /g,"_")+".svg":void 0);while(n>-1&&(!_||f.has(_)));l.$$.dirty&1&&t(6,r=s.id.startsWith("poi.")?(F=(T=s.properties)==null?void 0:T.categories)==null?void 0:F.join(", "):((y=(K=s.properties)==null?void 0:K.place_type_name)==null?void 0:y[0])??s.place_type[0])},t(9,n=(a==null?void 0:a.length)??0),[s,i,o,m,d,_,r,v,f,n,b,h,P]}class Ul extends j{constructor(e){super(),Q(this,e,El,Al,J,{feature:0,selected:1,showPlaceType:2,missingIconsCache:8,iconsBaseUrl:3})}}function Vl(l){let e;return{c(){e=M("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',c(e,"class","svelte-7cmwmc")},m(t,n){I(t,e,n)},p:q,i:q,o:q,d(t){t&&B(e)}}}class Wl extends j{constructor(e){super(),Q(this,e,null,Vl,J,{})}}function Hl(l){let e,t;return{c(){e=ue("svg"),t=ue("path"),c(t,"d","M13.101 14.261 8.74 9.899a4.797 4.797 0 0 1-1.425.748 5.165 5.165 0 0 1-1.603.248c-1.446 0-2.677-.5-3.693-1.503S.495 7.164.495 5.717c0-1.446.508-2.678 1.524-3.693C3.035 1.008 4.266.5 5.712.5c1.448 0 2.672.508 3.675 1.524 1.002 1.015 1.503 2.247 1.503 3.693 0 .558-.08 1.092-.239 1.603-.159.512-.411.98-.757 1.405l4.382 4.4a.74.74 0 0 1 .229.568.81.81 0 0 1-.249.568.787.787 0 0 1-.577.239.787.787 0 0 1-.578-.239ZM5.712 9.223c.97 0 1.796-.342 2.48-1.026a3.378 3.378 0 0 0 1.026-2.48c0-.982-.34-1.818-1.016-2.509-.677-.69-1.507-1.035-2.49-1.035a3.42 3.42 0 0 0-2.509 1.035 3.42 3.42 0 0 0-1.035 2.51c0 .982.345 1.812 1.035 2.488.691.678 1.527 1.017 2.51 1.017Z"),c(e,"width","14"),c(e,"height","14"),c(e,"viewBox","0 0 15 15"),c(e,"class","svelte-en2qvf")},m(n,r){I(n,e,r),w(e,t)},p:q,i:q,o:q,d(n){n&&B(e)}}}class Gl extends j{constructor(e){super(),Q(this,e,null,Hl,J,{})}}function ql(l){let e,t;return{c(){e=ue("svg"),t=ue("path"),c(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),c(e,"viewBox","0 0 14 14"),c(e,"width","13"),c(e,"height","13"),c(e,"class","svelte-en2qvf")},m(n,r){I(n,e,r),w(e,t)},p:q,i:q,o:q,d(n){n&&B(e)}}}class yt extends j{constructor(e){super(),Q(this,e,null,ql,J,{})}}function Fl(l){let e,t;return{c(){e=ue("svg"),t=ue("path"),c(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),c(e,"viewBox","0 0 30 30"),c(e,"fill","none"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"class","svelte-d2loi5")},m(n,r){I(n,e,r),w(e,t)},p:q,i:q,o:q,d(n){n&&B(e)}}}class kt extends j{constructor(e){super(),Q(this,e,null,Fl,J,{})}}function ot(l,e,t){const n=l.slice();return n[75]=e[t],n[77]=t,n}function at(l){let e,t;return e=new Wl({}),{c(){Z(e.$$.fragment)},m(n,r){D(e,n,r),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function ft(l){let e,t,n,r,s;return t=new pl({}),{c(){e=M("button"),Z(t.$$.fragment),c(e,"type","button"),c(e,"title",l[9]),c(e,"class","svelte-1r7dvt7"),fe(e,"active",l[0])},m(i,o){I(i,e,o),D(t,e,null),n=!0,r||(s=H(e,"click",l[61]),r=!0)},p(i,o){(!n||o[0]&512)&&c(e,"title",i[9]),(!n||o[0]&1)&&fe(e,"active",i[0])},i(i){n||(C(t.$$.fragment,i),n=!0)},o(i){S(t.$$.fragment,i),n=!1},d(i){i&&B(e),N(t),r=!1,s()}}}function Ol(l){let e,t=[],n=new Map,r,s,i,o=Ee(l[13]);const f=m=>m[75].id+(m[75].address?","+m[75].address:"");for(let m=0;m<o.length;m+=1){let a=ot(l,o,m),d=f(a);n.set(d,t[m]=ut(d,a))}return{c(){e=M("ul");for(let m=0;m<t.length;m+=1)t[m].c();c(e,"class","svelte-1r7dvt7")},m(m,a){I(m,e,a);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);r=!0,s||(i=[H(e,"mouseleave",l[65]),H(e,"blur",l[66])],s=!0)},p(m,a){a[0]&8940544&&(o=Ee(m[13]),he(),t=Jt(t,a,f,1,m,o,n,e,Xt,ut,null,ot),ge())},i(m){if(!r){for(let a=0;a<o.length;a+=1)C(t[a]);r=!0}},o(m){for(let a=0;a<t.length;a+=1)S(t[a]);r=!1},d(m){m&&B(e);for(let a=0;a<t.length;a+=1)t[a].d();s=!1,Se(i)}}}function Zl(l){let e,t,n,r,s,i;return t=new kt({}),{c(){e=M("div"),Z(t.$$.fragment),n=G(),r=M("div"),s=ee(l[7]),c(r,"class","svelte-1r7dvt7"),c(e,"class","no-results svelte-1r7dvt7")},m(o,f){I(o,e,f),D(t,e,null),w(e,n),w(e,r),w(r,s),i=!0},p(o,f){(!i||f[0]&128)&&we(s,o[7])},i(o){i||(C(t.$$.fragment,o),i=!0)},o(o){S(t.$$.fragment,o),i=!1},d(o){o&&B(e),N(t)}}}function Dl(l){let e="",t;return{c(){t=ee(e)},m(n,r){I(n,t,r)},p:q,i:q,o:q,d(n){n&&B(t)}}}function Nl(l){let e,t,n,r,s,i,o,f,m,a,d;return t=new kt({}),f=new yt({}),{c(){e=M("div"),Z(t.$$.fragment),n=G(),r=M("div"),s=ee(l[6]),i=G(),o=M("button"),Z(f.$$.fragment),c(r,"class","svelte-1r7dvt7"),c(o,"class","svelte-1r7dvt7"),c(e,"class","error svelte-1r7dvt7")},m(_,v){I(_,e,v),D(t,e,null),w(e,n),w(e,r),w(r,s),w(e,i),w(e,o),D(f,o,null),m=!0,a||(d=H(o,"click",l[62]),a=!0)},p(_,v){(!m||v[0]&64)&&we(s,_[6])},i(_){m||(C(t.$$.fragment,_),C(f.$$.fragment,_),m=!0)},o(_){S(t.$$.fragment,_),S(f.$$.fragment,_),m=!1},d(_){_&&B(e),N(t),N(f),a=!1,d()}}}function ut(l,e){let t,n,r;function s(){return e[63](e[77])}function i(){return e[64](e[75])}return n=new Ul({props:{feature:e[75],showPlaceType:e[10],selected:e[14]===e[77],missingIconsCache:e[19],iconsBaseUrl:e[11]}}),n.$on("mouseenter",s),n.$on("focus",i),{key:l,first:null,c(){t=Ie(),Z(n.$$.fragment),this.first=t},m(o,f){I(o,t,f),D(n,o,f),r=!0},p(o,f){e=o;const m={};f[0]&8192&&(m.feature=e[75]),f[0]&1024&&(m.showPlaceType=e[10]),f[0]&24576&&(m.selected=e[14]===e[77]),f[0]&2048&&(m.iconsBaseUrl=e[11]),n.$set(m)},i(o){r||(C(n.$$.fragment,o),r=!0)},o(o){S(n.$$.fragment,o),r=!1},d(o){o&&B(t),N(n,o)}}}function Kl(l){let e,t,n,r,s,i,o,f,m,a,d,_,v,b,h,P,E,T,F,K;r=new Gl({}),a=new yt({});let y=l[18]&&at(),L=l[5]===!0&&ft(l);const te=l[53].default,O=be(te,l,l[52],null),p=[Nl,Dl,Zl,Ol],R=[];function k(g,U){var se,ce;return g[17]?0:g[15]?((se=g[13])==null?void 0:se.length)===0?2:g[15]&&((ce=g[13])!=null&&ce.length)?3:-1:1}return~(h=k(l))&&(P=R[h]=p[h](l)),{c(){e=M("form"),t=M("div"),n=M("button"),Z(r.$$.fragment),s=G(),i=M("input"),o=G(),f=M("div"),m=M("button"),Z(a.$$.fragment),d=G(),y&&y.c(),_=G(),L&&L.c(),v=G(),O&&O.c(),b=G(),P&&P.c(),c(n,"class","search-button svelte-1r7dvt7"),c(n,"type","button"),c(i,"placeholder",l[8]),c(i,"aria-label",l[8]),c(i,"class","svelte-1r7dvt7"),c(m,"type","button"),c(m,"title",l[3]),c(m,"class","svelte-1r7dvt7"),c(f,"class","clear-button-container svelte-1r7dvt7"),fe(f,"displayable",l[1]!==""),c(t,"class","input-group svelte-1r7dvt7"),c(e,"tabindex","0"),c(e,"class",E=Ve(l[2])+" svelte-1r7dvt7"),fe(e,"can-collapse",l[4]&&l[1]==="")},m(g,U){I(g,e,U),w(e,t),w(t,n),D(r,n,null),w(t,s),w(t,i),l[55](i),Le(i,l[1]),w(t,o),w(t,f),w(f,m),D(a,m,null),w(f,d),y&&y.m(f,null),w(t,_),L&&L.m(t,null),w(t,v),O&&O.m(t,null),w(e,b),~h&&R[h].m(e,null),T=!0,F||(K=[H(n,"click",l[54]),H(i,"input",l[56]),H(i,"focus",l[57]),H(i,"blur",l[58]),H(i,"keydown",l[21]),H(i,"input",l[59]),H(m,"click",l[60]),H(e,"submit",jt(l[20]))],F=!0)},p(g,U){(!T||U[0]&256)&&c(i,"placeholder",g[8]),(!T||U[0]&256)&&c(i,"aria-label",g[8]),U[0]&2&&i.value!==g[1]&&Le(i,g[1]),(!T||U[0]&8)&&c(m,"title",g[3]),g[18]?y?U[0]&262144&&C(y,1):(y=at(),y.c(),C(y,1),y.m(f,null)):y&&(he(),S(y,1,1,()=>{y=null}),ge()),(!T||U[0]&2)&&fe(f,"displayable",g[1]!==""),g[5]===!0?L?(L.p(g,U),U[0]&32&&C(L,1)):(L=ft(g),L.c(),C(L,1),L.m(t,v)):L&&(he(),S(L,1,1,()=>{L=null}),ge()),O&&O.p&&(!T||U[1]&2097152)&&ye(O,te,g,g[52],T?ve(te,g[52],U,null):ke(g[52]),null);let se=h;h=k(g),h===se?~h&&R[h].p(g,U):(P&&(he(),S(R[se],1,1,()=>{R[se]=null}),ge()),~h?(P=R[h],P?P.p(g,U):(P=R[h]=p[h](g),P.c()),C(P,1),P.m(e,null)):P=null),(!T||U[0]&4&&E!==(E=Ve(g[2])+" svelte-1r7dvt7"))&&c(e,"class",E),(!T||U[0]&22)&&fe(e,"can-collapse",g[4]&&g[1]==="")},i(g){T||(C(r.$$.fragment,g),C(a.$$.fragment,g),C(y),C(L),C(O,g),C(P),T=!0)},o(g){S(r.$$.fragment,g),S(a.$$.fragment,g),S(y),S(L),S(O,g),S(P),T=!1},d(g){g&&B(e),N(r),l[55](null),N(a),y&&y.d(),L&&L.d(),O&&O.d(g),~h&&R[h].d(),F=!1,Se(K)}}}function jl(l,e,t){const n=e[1],r=e[0],s=n-r;return l===n&&t?l:((l-r)%s+s)%s+r}function ct(l){let e=[...l];return e[2]<e[0]&&(e[2]+=360),e}function Ql(l,e,t){let n,{$$slots:r={},$$scope:s}=e,{class:i=void 0}=e,{apiKey:o}=e,{bbox:f=void 0}=e,{clearButtonTitle:m="clear"}=e,{clearOnBlur:a=!1}=e,{collapsed:d=!1}=e,{country:_=void 0}=e,{debounceSearch:v=200}=e,{enableReverse:b=!1}=e,{errorMessage:h="Something went wrongâ€¦"}=e,{filter:P=()=>!0}=e,{flyTo:E=!0}=e,{fuzzyMatch:T=!0}=e,{language:F=void 0}=e,{limit:K=void 0}=e,{mapController:y=void 0}=e,{minLength:L=2}=e,{noResultsMessage:te="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:O="Search"}=e,{proximity:p=void 0}=e,{reverseActive:R=b==="always"}=e,{reverseButtonTitle:k="toggle reverse geocoding"}=e,{searchValue:g=""}=e,{showFullGeometry:U=!0}=e,{showPlaceType:se="ifNeeded"}=e,{showResultsWhileTyping:ce=!0}=e,{trackProximity:Be=!0}=e,{types:me=void 0}=e,{zoom:Re=16}=e,{maxZoom:pe=18}=e,{apiUrl:He="https://api.maptiler.com/geocoding"}=e,{fetchParameters:Ge={}}=e,{iconsBaseUrl:Qe="https://cdn.maptiler.com/maptiler-geocoding-control/v0.0.99/icons/"}=e;function vt(){le.focus()}function wt(){le.blur()}function Je(u,W=!0){t(1,g=u),W?(t(14,V=-1),Ye()):(Oe(),setTimeout(()=>{le.focus(),le.select()}))}let Me=!1,A,X,z,Xe="",le,V=-1,ne,ze=[],de,Te,Pe,qe;const Mt=new Set,oe=Qt();ht(()=>{y&&(y.setEventHandler(void 0),y.indicateReverse(!1),y.setSelectedMarker(-1),y.setMarkers(void 0,void 0))});function Ye(u){if(Te&&(clearTimeout(Te),Te=void 0),V>-1&&A)t(49,z=A[V]),t(1,g=z.place_name.replace(/,.*/,"")),t(17,ne=void 0),t(48,X=void 0),t(14,V=-1);else if(g){const W=u||!xe();Fe(g,{exact:!0}).then(()=>{t(48,X=A),t(49,z=void 0),W&&Tt()}).catch(re=>t(17,ne=re))}}function xe(){return/^-?\d+(\.\d+)?,-?\d+(\.\d+)?$/.test(g)}async function Fe(u,{byId:W=!1,exact:re=!1}={}){t(17,ne=void 0);const Ce=xe(),$=new URLSearchParams;F!=null&&$.set("language",Array.isArray(F)?F.join(","):F),me&&$.set("types",me.join(",")),Ce||(f&&$.set("bbox",f.map(ae=>ae.toFixed(6)).join(",")),_&&$.set("country",Array.isArray(_)?_.join(","):_)),W||(p&&$.set("proximity",p.map(ae=>ae.toFixed(6)).join(",")),(re||!ce)&&$.set("autocomplete","false"),$.set("fuzzyMatch",String(T))),K!==void 0&&(!Ce||(me==null?void 0:me.length)===1)&&$.set("limit",String(K)),$.set("key",o);const _e=He+"/"+encodeURIComponent(u)+".json?"+$.toString();if(_e===Xe){W?(t(13,A=void 0),t(49,z=ze[0])):t(13,A=ze);return}Xe=_e,de==null||de.abort();const Y=new AbortController;t(18,de=Y);let De;try{De=await fetch(_e,{signal:Y.signal,...Ge}).finally(()=>{Y===de&&t(18,de=void 0)})}catch(ae){if(ae&&typeof ae=="object"&&"name"in ae&&ae.name==="AbortError")return;throw new Error}if(!De.ok)throw new Error;const Ne=await De.json();oe("response",{url:_e,featureCollection:Ne}),W?(t(13,A=void 0),t(49,z=Ne.features[0]),ze=[z]):(t(13,A=Ne.features.filter(P)),ze=A,Ce&&le.focus())}function Tt(){var re,Ce,$,_e;if(!(X!=null&&X.length)||!E)return;const u=[180,90,-180,-90],W=!X.some(Y=>!Y.matching_text);for(const Y of X)(W||!Y.matching_text)&&(u[0]=Math.min(u[0],((re=Y.bbox)==null?void 0:re[0])??Y.center[0]),u[1]=Math.min(u[1],((Ce=Y.bbox)==null?void 0:Ce[1])??Y.center[1]),u[2]=Math.max(u[2],(($=Y.bbox)==null?void 0:$[2])??Y.center[0]),u[3]=Math.max(u[3],((_e=Y.bbox)==null?void 0:_e[3])??Y.center[1]));y&&X.length>0&&(z&&u[0]===u[2]&&u[1]===u[3]?y.flyTo(z.center,Re):y.fitBounds(ct(u),50,pe))}function Ct(u){t(0,R=b==="always"),Je(jl(u[0],[-180,180],!0).toFixed(6)+","+u[1].toFixed(6))}function pt(u){if(!A)return;let W=u.key==="ArrowDown"?1:u.key==="ArrowUp"?-1:0;W?(V===-1&&W===-1&&t(14,V=A.length),t(14,V+=W),V>=A.length&&t(14,V=-1),u.preventDefault()):["ArrowLeft","ArrowRight","Home","End"].includes(u.key)&&t(14,V=-1)}function Oe(u=!0){if(t(17,ne=void 0),ce){if(Te&&clearTimeout(Te),g.length<L)return;const W=g;Te=window.setTimeout(()=>{Fe(W).catch(re=>t(17,ne=re))},u?v:0)}else t(13,A=void 0),t(17,ne=void 0)}function Ze(u){t(49,z=u),t(1,g=u.place_name),t(14,V=-1)}const Lt=()=>le.focus();function St(u){We[u?"unshift":"push"](()=>{le=u,t(16,le)})}function It(){g=this.value,t(1,g),t(12,Me),t(27,a)}const Bt=()=>t(12,Me=!0),Rt=()=>t(12,Me=!1),zt=()=>Oe(),Pt=()=>{t(1,g=""),le.focus()},At=()=>t(0,R=!R),Et=()=>t(17,ne=void 0),Ut=u=>t(14,V=u),Vt=u=>Ze(u),Wt=()=>t(14,V=-1),Ht=()=>{};return l.$$set=u=>{"class"in u&&t(2,i=u.class),"apiKey"in u&&t(25,o=u.apiKey),"bbox"in u&&t(26,f=u.bbox),"clearButtonTitle"in u&&t(3,m=u.clearButtonTitle),"clearOnBlur"in u&&t(27,a=u.clearOnBlur),"collapsed"in u&&t(4,d=u.collapsed),"country"in u&&t(28,_=u.country),"debounceSearch"in u&&t(29,v=u.debounceSearch),"enableReverse"in u&&t(5,b=u.enableReverse),"errorMessage"in u&&t(6,h=u.errorMessage),"filter"in u&&t(30,P=u.filter),"flyTo"in u&&t(31,E=u.flyTo),"fuzzyMatch"in u&&t(32,T=u.fuzzyMatch),"language"in u&&t(33,F=u.language),"limit"in u&&t(34,K=u.limit),"mapController"in u&&t(35,y=u.mapController),"minLength"in u&&t(36,L=u.minLength),"noResultsMessage"in u&&t(7,te=u.noResultsMessage),"placeholder"in u&&t(8,O=u.placeholder),"proximity"in u&&t(24,p=u.proximity),"reverseActive"in u&&t(0,R=u.reverseActive),"reverseButtonTitle"in u&&t(9,k=u.reverseButtonTitle),"searchValue"in u&&t(1,g=u.searchValue),"showFullGeometry"in u&&t(37,U=u.showFullGeometry),"showPlaceType"in u&&t(10,se=u.showPlaceType),"showResultsWhileTyping"in u&&t(38,ce=u.showResultsWhileTyping),"trackProximity"in u&&t(39,Be=u.trackProximity),"types"in u&&t(40,me=u.types),"zoom"in u&&t(41,Re=u.zoom),"maxZoom"in u&&t(42,pe=u.maxZoom),"apiUrl"in u&&t(43,He=u.apiUrl),"fetchParameters"in u&&t(44,Ge=u.fetchParameters),"iconsBaseUrl"in u&&t(11,Qe=u.iconsBaseUrl),"$$scope"in u&&t(52,s=u.$$scope)},l.$$.update=()=>{if(l.$$.dirty[1]&256&&(Be||t(24,p=void 0)),l.$$.dirty[0]&134221824&&setTimeout(()=>{t(15,Pe=Me),a&&!Me&&t(1,g="")}),l.$$.dirty[0]&8194|l.$$.dirty[1]&32&&g.length<L&&(t(49,z=void 0),t(13,A=void 0),t(17,ne=void 0),t(48,X=A)),l.$$.dirty[1]&262208&&U&&z&&!z.address&&z.geometry.type==="Point"&&Fe(z.id,{byId:!0}).catch(u=>t(17,ne=u)),l.$$.dirty[1]&789521&&(y&&z&&z.id!==qe&&E&&(!z.bbox||z.bbox[0]===z.bbox[2]&&z.bbox[1]===z.bbox[3]?y.flyTo(z.center,z.id.startsWith("poi.")||z.id.startsWith("address.")?pe:Re):y.fitBounds(ct(z.bbox),50,pe),t(13,A=void 0),t(48,X=void 0),t(14,V=-1)),t(50,qe=z==null?void 0:z.id)),l.$$.dirty[0]&8192|l.$$.dirty[1]&131072&&X!==A&&t(48,X=void 0),l.$$.dirty[1]&393232&&y&&y.setMarkers(X,z),l.$$.dirty[0]&2&&t(14,V=-1),l.$$.dirty[0]&40961|l.$$.dirty[1]&272&&y&&y.setEventHandler(u=>{switch(u.type){case"mapClick":R&&Ct(u.coordinates);break;case"proximityChange":t(24,p=Be?u.proximity:void 0);break;case"markerClick":{const W=A==null?void 0:A.find(re=>re.id===u.id);W&&Ze(W)}break;case"markerMouseEnter":t(14,V=Pe?(A==null?void 0:A.findIndex(W=>W.id===u.id))??-1:-1);break;case"markerMouseLeave":t(14,V=-1);break}}),l.$$.dirty[0]&16384|l.$$.dirty[1]&16&&(y==null||y.setSelectedMarker(V)),l.$$.dirty[0]&24576&&t(51,n=A==null?void 0:A[V]),l.$$.dirty[0]&2|l.$$.dirty[1]&16){const u=/^(-?\d+(?:\.\d*)?),(-?\d+(?:\.\d*)?)$/.exec(g);y==null||y.setReverseMarker(u?[Number(u[1]),Number(u[2])]:void 0)}l.$$.dirty[1]&1048576&&oe("select",n),l.$$.dirty[1]&262144&&oe("pick",z),l.$$.dirty[0]&40960&&oe("optionsVisibilityChange",Pe&&!!A),l.$$.dirty[0]&8192&&oe("featuresListed",A),l.$$.dirty[1]&131072&&oe("featuresMarked",X),l.$$.dirty[0]&1&&oe("reverseToggle",R),l.$$.dirty[0]&2&&oe("queryChange",g),l.$$.dirty[0]&1|l.$$.dirty[1]&16&&y&&y.indicateReverse(R)},[R,g,i,m,d,b,h,te,O,k,se,Qe,Me,A,V,Pe,le,ne,de,Mt,Ye,pt,Oe,Ze,p,o,f,a,_,v,P,E,T,F,K,y,L,U,ce,Be,me,Re,pe,He,Ge,vt,wt,Je,X,z,qe,n,s,r,Lt,St,It,Bt,Rt,zt,Pt,At,Et,Ut,Vt,Wt,Ht]}class Jl extends j{constructor(e){super(),Q(this,e,Ql,Kl,J,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:24,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:37,showPlaceType:10,showResultsWhileTyping:38,trackProximity:39,types:40,zoom:41,maxZoom:42,apiUrl:43,fetchParameters:44,iconsBaseUrl:11,focus:45,blur:46,setQuery:47},null,[-1,-1,-1])}get focus(){return this.$$.ctx[45]}get blur(){return this.$$.ctx[46]}get setQuery(){return this.$$.ctx[47]}}function mt(l){let e,t,n,r;return t=new Jl({props:{mapController:l[1],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){e=M("div"),Z(t.$$.fragment),c(e,"class",n=Ve(l[0])+" svelte-13xba41")},m(s,i){I(s,e,i),D(t,e,null),r=!0},p(s,i){const o={};i&2&&(o.mapController=s[1]),t.$set(o),(!r||i&1&&n!==(n=Ve(s[0])+" svelte-13xba41"))&&c(e,"class",n)},i(s){r||(C(t.$$.fragment,s),r=!0)},o(s){S(t.$$.fragment,s),r=!1},d(s){s&&B(e),N(t)}}}function Xl(l){let e,t,n=l[1]&&mt(l);return{c(){n&&n.c(),e=Ie()},m(r,s){n&&n.m(r,s),I(r,e,s),t=!0},p(r,[s]){r[1]?n?(n.p(r,s),s&2&&C(n,1)):(n=mt(r),n.c(),C(n,1),n.m(e.parentNode,e)):n&&(he(),S(n,1,1,()=>{n=null}),ge())},i(r){t||(C(n),t=!0)},o(r){S(n),t=!1},d(r){r&&B(e),n&&n.d(r)}}}function Yl(l,e,t){let n;Ue(l,gt,i=>t(2,n=i));let{position:r="top-left"}=e,s;return Yt(()=>{t(1,s=xt(n,$t))}),l.$$set=i=>{"position"in i&&t(0,r=i.position)},[r,s]}class wn extends j{constructor(e){super(),Q(this,e,Yl,Xl,J,{position:0})}}function dt(l){if(!l)throw new Error("coord is required");if(!Array.isArray(l)){if(l.type==="Feature"&&l.geometry!==null&&l.geometry.type==="Point")return l.geometry.coordinates;if(l.type==="Point")return l.coordinates}if(Array.isArray(l)&&l.length>=2&&!Array.isArray(l[0])&&!Array.isArray(l[1]))return l;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Mn(l){if(Array.isArray(l))return l;if(l.type==="Feature"){if(l.geometry!==null)return l.geometry.coordinates}else if(l.coordinates)return l.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function Tn(l,e){return l.type==="FeatureCollection"?"FeatureCollection":l.type==="GeometryCollection"?"GeometryCollection":l.type==="Feature"&&l.geometry!==null?l.geometry.type:l.type}function xl(l,e,t){t===void 0&&(t={});var n=dt(l),r=dt(e),s=Ae(r[1]-n[1]),i=Ae(r[0]-n[0]),o=Ae(n[1]),f=Ae(r[1]),m=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(o)*Math.cos(f);return el(2*Math.atan2(Math.sqrt(m),Math.sqrt(1-m)),t.units)}function Cn(l,e){return e===void 0&&(e={}),tl(l,function(t,n){var r=n.geometry.coordinates;return t+xl(r[0],r[1],e)},0)}const $l={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black",streetview:"blue",measuringLine:"cyan"},pn=10,Ln=10;function en(l){let e;const t=l[15].default,n=be(t,l,l[23],null);return{c(){n&&n.c()},m(r,s){n&&n.m(r,s),e=!0},p(r,s){n&&n.p&&(!e||s&8388608)&&ye(n,t,r,r[23],e?ve(t,r[23],s,null):ke(r[23]),null)},i(r){e||(C(n,r),e=!0)},o(r){S(n,r),e=!1},d(r){n&&n.d(r)}}}function tn(l){let e,t,n;function r(i){l[16](i)}let s={id:l[1],type:"line",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],minzoom:l[9],maxzoom:l[10],hoverCursor:l[11],manageHoverState:l[12],eventsIfTopMost:l[13],interactive:l[14],$$slots:{default:[en]},$$scope:{ctx:l}};return l[0]!==void 0&&(s.hovered=l[0]),e=new ll({props:s}),We.push(()=>Ke(e,"hovered",r)),e.$on("click",l[17]),e.$on("dblclick",l[18]),e.$on("contextmenu",l[19]),e.$on("mouseenter",l[20]),e.$on("mousemove",l[21]),e.$on("mouseleave",l[22]),{c(){Z(e.$$.fragment)},m(i,o){D(e,i,o),n=!0},p(i,[o]){const f={};o&2&&(f.id=i[1]),o&4&&(f.source=i[2]),o&8&&(f.sourceLayer=i[3]),o&16&&(f.beforeId=i[4]),o&32&&(f.beforeLayerType=i[5]),o&64&&(f.paint=i[6]),o&128&&(f.layout=i[7]),o&256&&(f.filter=i[8]),o&512&&(f.minzoom=i[9]),o&1024&&(f.maxzoom=i[10]),o&2048&&(f.hoverCursor=i[11]),o&4096&&(f.manageHoverState=i[12]),o&8192&&(f.eventsIfTopMost=i[13]),o&16384&&(f.interactive=i[14]),o&8388608&&(f.$$scope={dirty:o,ctx:i}),!t&&o&1&&(t=!0,f.hovered=i[0],je(()=>t=!1)),e.$set(f)},i(i){n||(C(e.$$.fragment,i),n=!0)},o(i){S(e.$$.fragment,i),n=!1},d(i){N(e,i)}}}function ln(l,e,t){let{$$slots:n={},$$scope:r}=e,{id:s=nl("line")}=e,{source:i=void 0}=e,{sourceLayer:o=void 0}=e,{beforeId:f=void 0}=e,{beforeLayerType:m=void 0}=e,{paint:a}=e,{layout:d=void 0}=e,{filter:_=void 0}=e,{minzoom:v=void 0}=e,{maxzoom:b=void 0}=e,{hoverCursor:h=void 0}=e,{manageHoverState:P=!1}=e,{hovered:E=null}=e,{eventsIfTopMost:T=!1}=e,{interactive:F=!0}=e;function K(k){E=k,t(0,E)}function y(k){ie.call(this,l,k)}function L(k){ie.call(this,l,k)}function te(k){ie.call(this,l,k)}function O(k){ie.call(this,l,k)}function p(k){ie.call(this,l,k)}function R(k){ie.call(this,l,k)}return l.$$set=k=>{"id"in k&&t(1,s=k.id),"source"in k&&t(2,i=k.source),"sourceLayer"in k&&t(3,o=k.sourceLayer),"beforeId"in k&&t(4,f=k.beforeId),"beforeLayerType"in k&&t(5,m=k.beforeLayerType),"paint"in k&&t(6,a=k.paint),"layout"in k&&t(7,d=k.layout),"filter"in k&&t(8,_=k.filter),"minzoom"in k&&t(9,v=k.minzoom),"maxzoom"in k&&t(10,b=k.maxzoom),"hoverCursor"in k&&t(11,h=k.hoverCursor),"manageHoverState"in k&&t(12,P=k.manageHoverState),"hovered"in k&&t(0,E=k.hovered),"eventsIfTopMost"in k&&t(13,T=k.eventsIfTopMost),"interactive"in k&&t(14,F=k.interactive),"$$scope"in k&&t(23,r=k.$$scope)},[E,s,i,o,f,m,a,d,_,v,b,h,P,T,F,n,K,y,L,te,O,p,R,r]}class Sn extends j{constructor(e){super(),Q(this,e,ln,tn,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function nn(l){let e;return{c(){e=ee("Luc Chaissac")},m(t,n){I(t,e,n)},d(t){t&&B(e)}}}function rn(l){let e,t,n,r,s,i,o,f,m;return f=new rl({props:{href:"https://icon-icons.com/icon/screenshot-cursor-camera/100181",$$slots:{default:[nn]},$$scope:{ctx:l}}}),{c(){e=M("ul"),t=M("li"),t.innerHTML=`<b>Click</b>
    on the map to open a new tab with a 3rd-party imagery provider`,n=G(),r=M("li"),r.innerHTML=`Press <b>Escape</b>
    to exit this mode`,s=G(),i=M("li"),o=ee("Cursor by "),Z(f.$$.fragment)},m(a,d){I(a,e,d),w(e,t),w(e,n),w(e,r),w(e,s),w(e,i),w(i,o),D(f,i,null),m=!0},p(a,[d]){const _={};d&1&&(_.$$scope={dirty:d,ctx:a}),f.$set(_)},i(a){m||(C(f.$$.fragment,a),m=!0)},o(a){S(f.$$.fragment,a),m=!1},d(a){a&&B(e),N(f)}}}class sn extends j{constructor(e){super(),Q(this,e,null,rn,J,{})}}const on="/atip/defra/assets/camera_cursor-824d29b6.svg",{window:an}=ol;function _t(l){let e,t,n,r;const s=[un,fn],i=[];function o(f,m){return f[0]?0:1}return e=o(l),t=i[e]=s[e](l),{c(){t.c(),n=Ie()},m(f,m){i[e].m(f,m),I(f,n,m),r=!0},p(f,m){let a=e;e=o(f),e===a?i[e].p(f,m):(he(),S(i[a],1,1,()=>{i[a]=null}),ge(),t=i[e],t?t.p(f,m):(t=i[e]=s[e](f),t.c()),C(t,1),t.m(n.parentNode,n))},i(f){r||(C(t),r=!0)},o(f){S(t),r=!1},d(f){f&&B(n),i[e].d(f)}}}function fn(l){let e,t;return e=new bt({props:{$$slots:{default:[cn]},$$scope:{ctx:l}}}),e.$on("click",l[6]),{c(){Z(e.$$.fragment)},m(n,r){D(e,n,r),t=!0},p(n,r){const s={};r&4096&&(s.$$scope={dirty:r,ctx:n}),e.$set(s)},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function un(l){let e,t,n,r,s,i,o;e=new bt({props:{$$slots:{default:[mn]},$$scope:{ctx:l}}}),e.$on("click",l[4]);function f(a){l[5](a)}let m={legend:"Source",id:"streetViewImagery",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return l[2].streetViewImagery!==void 0&&(m.value=l[2].streetViewImagery),n=new sl({props:m}),We.push(()=>Ke(n,"value",f)),i=new Tl({props:{label:"Help",$$slots:{default:[dn]},$$scope:{ctx:l}}}),{c(){Z(e.$$.fragment),t=G(),Z(n.$$.fragment),s=G(),Z(i.$$.fragment)},m(a,d){D(e,a,d),I(a,t,d),D(n,a,d),I(a,s,d),D(i,a,d),o=!0},p(a,d){const _={};d&4096&&(_.$$scope={dirty:d,ctx:a}),e.$set(_);const v={};!r&&d&4&&(r=!0,v.value=a[2].streetViewImagery,je(()=>r=!1)),n.$set(v);const b={};d&4096&&(b.$$scope={dirty:d,ctx:a}),i.$set(b)},i(a){o||(C(e.$$.fragment,a),C(n.$$.fragment,a),C(i.$$.fragment,a),o=!0)},o(a){S(e.$$.fragment,a),S(n.$$.fragment,a),S(i.$$.fragment,a),o=!1},d(a){a&&(B(t),B(s)),N(e,a),N(n,a),N(i,a)}}}function cn(l){let e;return{c(){e=ee("Enable Street View")},m(t,n){I(t,e,n)},d(t){t&&B(e)}}}function mn(l){let e;return{c(){e=ee("Disable Street View")},m(t,n){I(t,e,n)},d(t){t&&B(e)}}}function dn(l){let e,t;return e=new sn({}),{c(){Z(e.$$.fragment)},m(n,r){D(e,n,r),t=!0},i(n){t||(C(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){N(e,n)}}}function _n(l){let e,t,n,r,s=l[1]&&_t(l);return{c(){s&&s.c(),e=Ie()},m(i,o){s&&s.m(i,o),I(i,e,o),t=!0,n||(r=H(an,"keydown",l[3]),n=!0)},p(i,[o]){i[1]?s?(s.p(i,o),o&2&&C(s,1)):(s=_t(i),s.c(),C(s,1),s.m(e.parentNode,e)):s&&(he(),S(s,1,1,()=>{s=null}),ge())},i(i){t||(C(s),t=!0)},o(i){S(s),t=!1},d(i){i&&B(e),s&&s.d(i),n=!1,r()}}}function hn(l,e,t){let n,r;Ue(l,tt,h=>t(2,n=h)),Ue(l,gt,h=>t(8,r=h));let{enabled:s}=e,{showControls:i=!0}=e,o=[];function f(){r.on("click",a),r.getCanvas().style.cursor=`url(${on}), auto`,o=il();for(let h of o)h.setProperty(r,"line-color",$l.streetview)}function m(){r.off("click",a),r.getCanvas().style.cursor="inherit";for(let h of o)h.returnToDefaultPaintValues(r);o=[]}ht(m);function a(h){if(!s)return;let P=h.lngLat.lng,E=h.lngLat.lat;n.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${E},${P}&cbp=11,0,0,0,0`,"_blank"):n.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${E}~${P}&style=x`,"_blank")}function d(h){s&&h.key=="Escape"&&(h.stopPropagation(),t(0,s=!1))}const _=()=>t(0,s=!1);function v(h){l.$$.not_equal(n.streetViewImagery,h)&&(n.streetViewImagery=h,tt.set(n))}const b=()=>t(0,s=!0);return l.$$set=h=>{"enabled"in h&&t(0,s=h.enabled),"showControls"in h&&t(1,i=h.showControls)},l.$$.update=()=>{l.$$.dirty&1&&(s?f():m())},[s,i,n,d,_,v,b]}class In extends j{constructor(e){super(),Q(this,e,hn,_n,J,{enabled:0,showControls:1})}}export{bn as B,Tl as C,wn as G,Sn as L,In as S,Ln as a,$l as b,pn as c,Mn as d,xl as e,Tn as f,dt as g,yn as h,kn as i,sn as j,vn as k,Cn as l,yl as m};
