import{S as W,i as z,s as G,ap as Hr,b as U,c as V,e as A,d as O,g as h,h as x,j as p,m as b,w as tn,l as X,t as $,n as g,o as m,p as v,aL as mt,aM as _t,aN as gt,aO as dt,aP as cr,aQ as Rt,aR as be,Z as Te,_ as ie,$ as ae,aS as $r,q as De,ai as pr,aT as mr,aU as Ft,aV as _r,aW as gr,H as ne,aX as cn,aY as Rr,u as w,k as y,f as nn,aj as Gr,B as rn,ax as dr,r as ln,F as hr,a as Kt,v as $n,C as H,aK as q,aA as ze,az as Se,aB as Dt,aZ as fe,O as B,a_ as $e,A as K,P as Y,Y as J,a$ as te,G as At,R as br,b0 as on,b1 as sn,E as vr,x as Wr,b2 as pn,N as zr,aF as mn,U as Ur,V as _n,W as gn,X as Pt,aJ as dn,L as qr,M as Vr,y as Xr}from"./index-14eadd57.js";import{m as Tt,C as Ie,h as Lt,i as le,L as ue,c as jt,k as Kr,S as Yr,B as Jr,a as yt,b as Zr,G as Qr}from"./StreetViewTool-bf4e4ef2.js";import{L as xr,s as hn,c as wr,a as ge,C as Ue,Z as el}from"./schemas-d2e701a0.js";import{a as Be,F as tl}from"./Popup-2ff7389e.js";import{P as oe}from"./Popup-9fa5d4d1.js";import{L as nl,a as rl}from"./LineMeasureController-90d761d7.js";const ll="/atip/defra/assets/help-d011708a.svg";function ol(r){let e,n;const t=r[1].default,l=mt(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),x(e,"class","govuk-prose")},m(o,i){p(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&_t(l,t,o,o[4],n?dt(t,o[4],i,null):gt(o[4]),null)},i(o){n||($(l,o),n=!0)},o(o){g(l,o),n=!1},d(o){o&&m(e),l&&l.d(o)}}}function sl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[ol]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Hr({props:a}),U.push(()=>V(t,"open",s)),{c(){e=A("button"),e.innerHTML=`<img src="${ll}" title="Help" alt="Help"/>`,n=O(),h(t.$$.fragment),x(e,"class","svelte-7d9d1l")},m(f,c){p(f,e,c),p(f,n,c),b(t,f,c),o=!0,i||(u=tn(e,"click",r[2]),i=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,_.open=f[0],X(()=>l=!1)),t.$set(_)},i(f){o||($(t.$$.fragment,f),o=!0)},o(f){g(t.$$.fragment,f),o=!1},d(f){f&&(m(e),m(n)),v(t,f),i=!1,u()}}}function il(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class se extends W{constructor(e){super(),z(this,e,il,sl,G,{})}}function al(r){let e;const n=r[8].default,t=mt(n,r,r[15],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&32768)&&_t(t,n,l,l[15],e?dt(n,l[15],o,null):gt(l[15]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function fl(r){let e,n;return e=new cr({props:{id:r[0],type:"raster",source:r[1],beforeId:r[2],beforeLayerType:r[3],paint:r[4],layout:r[5],minzoom:r[6],maxzoom:r[7],$$slots:{default:[al]},$$scope:{ctx:r}}}),e.$on("click",r[9]),e.$on("dblclick",r[10]),e.$on("contextmenu",r[11]),e.$on("mouseenter",r[12]),e.$on("mousemove",r[13]),e.$on("mouseleave",r[14]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.id=t[0]),l&2&&(o.source=t[1]),l&4&&(o.beforeId=t[2]),l&8&&(o.beforeLayerType=t[3]),l&16&&(o.paint=t[4]),l&32&&(o.layout=t[5]),l&64&&(o.minzoom=t[6]),l&128&&(o.maxzoom=t[7]),l&32768&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ul(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=Rt("raster-layer")}=e,{source:i=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:s=void 0}=e,{paint:a}=e,{layout:f=void 0}=e,{minzoom:c=void 0}=e,{maxzoom:_=void 0}=e;function d(N){be.call(this,r,N)}function k(N){be.call(this,r,N)}function T(N){be.call(this,r,N)}function C(N){be.call(this,r,N)}function S(N){be.call(this,r,N)}function L(N){be.call(this,r,N)}return r.$$set=N=>{"id"in N&&n(0,o=N.id),"source"in N&&n(1,i=N.source),"beforeId"in N&&n(2,u=N.beforeId),"beforeLayerType"in N&&n(3,s=N.beforeLayerType),"paint"in N&&n(4,a=N.paint),"layout"in N&&n(5,f=N.layout),"minzoom"in N&&n(6,c=N.minzoom),"maxzoom"in N&&n(7,_=N.maxzoom),"$$scope"in N&&n(15,l=N.$$scope)},[o,i,u,s,a,f,c,_,t,d,k,T,C,S,L,l]}class cl extends W{constructor(e){super(),z(this,e,ul,fl,G,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}function bn(r){let e=r[0],n,t,l=vn(r);return{c(){l.c(),n=Te()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&G(e,e=o[0])?(ie(),g(l,1,1,ne),ae(),l=vn(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l.d(o)}}}function vn(r){let e;const n=r[10].default,t=mt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&_t(t,n,l,l[9],e?dt(n,l[9],o,null):gt(l[9]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function $l(r){let e,n,t=r[0]&&bn(r);return{c(){t&&t.c(),e=Te()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=bn(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),g(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){g(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function pl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=Rt("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=$r();De(r,f,k=>n(8,l=k)),De(r,c,k=>n(0,t=k));let _,d=!0;return pr(()=>{t&&_&&l&&(mr(f,t,_),Ft(c,t=null,t),n(6,_=void 0))}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"tiles"in k&&n(4,s=k.tiles),"tileSize"in k&&n(5,a=k.tileSize),"$$scope"in k&&n(9,i=k.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Ft(c,t=u,t),_r(l,t,gr({type:"raster",tiles:s,tileSize:a}),k=>l&&k===t,()=>{t&&(n(6,_=l==null?void 0:l.getSource(t)),n(7,d=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,_=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&_&&(d?n(7,d=!1):_.setTiles(s))},[t,f,c,u,s,a,_,d,l,i,o]}class ml extends W{constructor(e){super(),z(this,e,pl,$l,G,{id:3,tiles:4,tileSize:5})}}function _l(r){let e;const n=r[16].default,t=mt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&_t(t,n,l,l[24],e?dt(n,l[24],o,null):gt(l[24]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function gl(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[_l]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new cr({props:o}),U.push(()=>V(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],X(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function dl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=Rt("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:S=!1}=e,{hovered:L=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:j=!0}=e;function I(D){L=D,n(0,L)}function F(D){be.call(this,r,D)}function P(D){be.call(this,r,D)}function M(D){be.call(this,r,D)}function E(D){be.call(this,r,D)}function R(D){be.call(this,r,D)}function ee(D){be.call(this,r,D)}return r.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,i=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,s=D.beforeId),"beforeLayerType"in D&&n(5,a=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,_=D.filter),"applyToClusters"in D&&n(9,d=D.applyToClusters),"minzoom"in D&&n(10,k=D.minzoom),"maxzoom"in D&&n(11,T=D.maxzoom),"hoverCursor"in D&&n(12,C=D.hoverCursor),"manageHoverState"in D&&n(13,S=D.manageHoverState),"hovered"in D&&n(0,L=D.hovered),"eventsIfTopMost"in D&&n(14,N=D.eventsIfTopMost),"interactive"in D&&n(15,j=D.interactive),"$$scope"in D&&n(24,l=D.$$scope)},[L,o,i,u,s,a,f,c,_,d,k,T,C,S,N,j,t,I,F,P,M,E,R,ee,l]}class hl extends W{constructor(e){super(),z(this,e,dl,gl,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function wn(r){let e=r[0],n,t,l=yn(r);return{c(){l.c(),n=Te()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&G(e,e=o[0])?(ie(),g(l,1,1,ne),ae(),l=yn(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l.d(o)}}}function yn(r){let e;const n=r[9].default,t=mt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&_t(t,n,l,l[8],e?dt(n,l[8],o,null):gt(l[8]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function bl(r){let e,n,t=r[0]&&wn(r);return{c(){t&&t.c(),e=Te()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=wn(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),g(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){g(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function vl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=Rt("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!cn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let k=new Rr;cn.addProtocol("pmtiles",k.tile)}const{map:c,self:_}=$r();De(r,c,k=>n(7,l=k)),De(r,_,k=>n(0,t=k));let d;return pr(()=>{t&&l&&(mr(c,t,d),Ft(_,t=null,t),d=void 0)}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"url"in k&&n(4,s=k.url),"tiles"in k&&n(5,a=k.tiles),"promoteId"in k&&n(6,f=k.promoteId),"$$scope"in k&&n(8,i=k.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Ft(_,t=u,t),_r(l,t,gr({type:"vector",url:s,tiles:a,promoteId:f}),k=>l&&k===t,()=>{t&&(d=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{d=l==null?void 0:l.getSource(u)}))},[t,c,_,u,s,a,f,l,i,o]}class ce extends W{constructor(e){super(),z(this,e,vl,bl,G,{id:3,url:4,tiles:5,promoteId:6})}}function wl(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function yl(r){let e,n,t,l,o=r[0]=="Private (development)"&&wl();return{c(){o&&o.c(),e=O(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated.",t=O(),l=A("p"),l.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,u){o&&o.m(i,u),p(i,e,u),p(i,n,u),p(i,t,u),p(i,l,u)},p:ne,d(i){i&&(m(e),m(n),m(t),m(l)),o&&o.d(i)}}}function kl(r){let e,n,t,l,o,i;return o=new se({props:{$$slots:{default:[yl]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=O(),h(o.$$.fragment)},m(u,s){p(u,e,s),y(e,n),y(e,t),y(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||($(o.$$.fragment,u),i=!0)},o(u){g(o.$$.fragment,u),i=!1},d(u){u&&m(e),v(o)}}}function Sl(r){return[nn()]}class Tl extends W{constructor(e){super(),z(this,e,Sl,kl,G,{})}}const Cl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var me=Uint8Array,Ze=Uint16Array,yr=Uint32Array,kr=new me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Sr=new me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ol=new me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tr=function(r,e){for(var n=new Ze(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new yr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Cr=Tr(kr,2),Or=Cr[0],Al=Cr[1];Or[28]=258,Al[258]=28;var Ll=Tr(Sr,0),Il=Ll[0],Yt=new Ze(32768);for(var re=0;re<32768;++re){var Re=(re&43690)>>>1|(re&21845)<<1;Re=(Re&52428)>>>2|(Re&13107)<<2,Re=(Re&61680)>>>4|(Re&3855)<<4,Yt[re]=((Re&65280)>>>8|(Re&255)<<8)>>>1}var St=function(r,e,n){for(var t=r.length,l=0,o=new Ze(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Ze(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Ze(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[Yt[c]>>>s]=a}else for(u=new Ze(t),l=0;l<t;++l)r[l]&&(u[l]=Yt[i[r[l]-1]++]>>>15-r[l]);return u},It=new me(288);for(var re=0;re<144;++re)It[re]=8;for(var re=144;re<256;++re)It[re]=9;for(var re=256;re<280;++re)It[re]=7;for(var re=280;re<288;++re)It[re]=8;var Ar=new me(32);for(var re=0;re<32;++re)Ar[re]=5;var Nl=St(It,9,1),Pl=St(Ar,5,1),Gt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},we=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Wt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Ml=function(r){return(r+7)/8|0},an=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Ze:r.BYTES_PER_ELEMENT==4?yr:me)(n-e);return t.set(r.subarray(e,n)),t},El=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ye=function(r,e,n){var t=new Error(e||El[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,ye),!n)throw t;return t},Fl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new me(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new me(t*3));var i=function(tt){var Ke=e.length;if(tt>Ke){var nt=new me(Math.max(Ke*2,tt));nt.set(e),e=nt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,_=n.m,d=n.n,k=t*8;do{if(!f){u=we(r,s,1);var T=we(r,s+1,3);if(s+=3,T)if(T==1)f=Nl,c=Pl,_=9,d=5;else if(T==2){var N=we(r,s,31)+257,j=we(r,s+10,15)+4,I=N+we(r,s+5,31)+1;s+=14;for(var F=new me(I),P=new me(19),M=0;M<j;++M)P[Ol[M]]=we(r,s+M*3,7);s+=j*3;for(var E=Gt(P),R=(1<<E)-1,ee=St(P,E,1),M=0;M<I;){var D=ee[we(r,s,R)];s+=D&15;var C=D>>>4;if(C<16)F[M++]=C;else{var Z=0,ve=0;for(C==16?(ve=3+we(r,s,3),s+=2,Z=F[M-1]):C==17?(ve=3+we(r,s,7),s+=3):C==18&&(ve=11+we(r,s,127),s+=7);ve--;)F[M++]=Z}}var ht=F.subarray(0,N),de=F.subarray(N);_=Gt(ht),d=Gt(de),f=St(ht,_,1),c=St(de,d,1)}else ye(1);else{var C=Ml(s)+4,S=r[C-4]|r[C-3]<<8,L=C+S;if(L>t){o&&ye(0);break}l&&i(a+S),e.set(r.subarray(C,L),a),n.b=a+=S,n.p=s=L*8,n.f=u;continue}if(s>k){o&&ye(0);break}}l&&i(a+131072);for(var xe=(1<<_)-1,bt=(1<<d)-1,et=s;;et=s){var Z=f[Wt(r,s)&xe],pe=Z>>>4;if(s+=Z&15,s>k){o&&ye(0);break}if(Z||ye(2),pe<256)e[a++]=pe;else if(pe==256){et=s,f=null;break}else{var vt=pe-254;if(pe>264){var M=pe-257,Fe=kr[M];vt=we(r,s,(1<<Fe)-1)+Or[M],s+=Fe}var He=c[Wt(r,s)&bt],Xe=He>>>4;He||ye(3),s+=He&15;var de=Il[Xe];if(Xe>3){var Fe=Sr[Xe];de+=Wt(r,s)&(1<<Fe)-1,s+=Fe}if(s>k){o&&ye(0);break}l&&i(a+131072);for(var wt=a+vt;a<wt;a+=4)e[a]=e[a-de],e[a+1]=e[a+1-de],e[a+2]=e[a+2-de],e[a+3]=e[a+3-de];a=wt}}n.l=f,n.p=et,n.b=a,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=d)}while(!u);return a==e.length?e:an(e,0,a)},Dl=new me(0),Pe=function(r,e){return r[e]|r[e+1]<<8},ke=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},zt=function(r,e){return ke(r,e)+ke(r,e+4)*4294967296};function jl(r,e){return Fl(r,e)}var Jt=typeof TextDecoder<"u"&&new TextDecoder,Bl=0;try{Jt.decode(Dl,{stream:!0}),Bl=1}catch{}var Hl=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,an(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Lr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(Jt)return Jt.decode(r);var l=Hl(r),o=l[0],i=l[1];return i.length&&ye(8),o}}var Rl=function(r,e){return e+30+Pe(r,e+26)+Pe(r,e+28)},Gl=function(r,e,n){var t=Pe(r,e+28),l=Lr(r.subarray(e+46,e+46+t),!(Pe(r,e+8)&2048)),o=e+46+t,i=ke(r,e+20),u=n&&i==4294967295?Wl(r,o):[i,ke(r,e+24),ke(r,e+42)],s=u[0],a=u[1],f=u[2];return[Pe(r,e+10),s,a,l,o+Pe(r,e+30)+Pe(r,e+32),f]},Wl=function(r,e){for(;Pe(r,e)!=1;e+=4+Pe(r,e+2));return[zt(r,e+12),zt(r,e+4),zt(r,e+20)]};function zl(r,e){for(var n={},t=r.length-22;ke(r,t)!=101010256;--t)(!t||r.length-t>65558)&&ye(13);var l=Pe(r,t+8);if(!l)return{};var o=ke(r,t+16),i=o==4294967295||l==65535;if(i){var u=ke(r,t-12);i=ke(r,u)==101075792,i&&(l=ke(r,u+32),o=ke(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=Gl(r,o,i),c=f[0],_=f[1],d=f[2],k=f[3],T=f[4],C=f[5],S=Rl(r,C);o=T,(!s||s({name:k,size:_,originalSize:d,compression:c}))&&(c?c==8?n[k]=jl(r.subarray(S,S+_),new me(d)):ye(14,"unknown compression type "+c):n[k]=an(r,S,S+_))}return n}function Ul(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Ut):Ut(r)}function Ut(r){var e=new Uint8Array(r),n=zl(e);return Promise.resolve(ql(n))}function ql(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Lr(r[l])}return e}function Me(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Qe(t)===e)return t;n++}}function Nt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Qe(l)===e&&n.push(l),t++}return n}function Bt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Qe(l)===e&&n(l,t):n(l,t),t++}}function Vl(r,e,n){var t=[];return Bt(r,e,function(l,o){t.push(n(l,o))}),t}var Xl=/.+\:/;function Qe(r){return r.tagName.replace(Xl,"")}function Ir(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Qe(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Ir(r.childNodes[t]),t++;return e+="</"+Qe(r)+">",e}function Kl(r){var e=r.documentElement,n=Me(e,"sheetData"),t=[];return Bt(n,"row",function(l){Bt(l,"c",function(o){t.push(o)})}),t}function Yl(r,e){return Me(e,"v")}function Jl(r,e){if(e.firstChild&&Qe(e.firstChild)==="is"&&e.firstChild.firstChild&&Qe(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Zl(r){var e=r.documentElement,n=Me(e,"dimension");if(n)return n.getAttribute("ref")}function Ql(r){var e=r.documentElement,n=Me(e,"cellStyleXfs");return n?Nt(n,"xf"):[]}function xl(r){var e=r.documentElement,n=Me(e,"cellXfs");return n?Nt(n,"xf"):[]}function eo(r){var e=r.documentElement,n=Me(e,"numFmts");return n?Nt(n,"numFmt"):[]}function to(r){var e=r.documentElement;return Vl(e,"si",function(n){var t=Me(n,"t");if(t)return t.textContent;var l="";return Bt(n,"r",function(o){l+=Me(o,"t").textContent}),l})}function no(r){var e=r.documentElement;return Me(e,"workbookPr")}function ro(r){var e=r.documentElement;return Nt(e,"Relationship")}function lo(r){var e=r.documentElement,n=Me(e,"sheets");return Nt(n,"sheet")}function oo(r,e){var n=e.createDocument(r),t={},l=no(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return lo(n).forEach(o),t}function so(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=qt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=qt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=qt(u);break}};return ro(n).forEach(l),t}function qt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function kn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Sn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kn(Object(n),!0).forEach(function(t){io(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):kn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function io(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ao(r,e){if(!r)return{};var n=e.createDocument(r),t=Ql(n).map(Vt),l=eo(n).map(fo).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Sn(Sn({},t[u.xfId]),Vt(u,l)):Vt(u,l)};return xl(n).map(o)}function fo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Vt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function uo(r,e){return r?to(e.createDocument(r)):[]}function Nr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function co(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=$o(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $o(r,e){if(r){if(typeof r=="string")return Tn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tn(r,e)}}function Tn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function po(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(mo.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&ho(l.numberFormat.template))return!0}}var mo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],_o=/^\[\$-414\]/,go=/;@$/;function ho(r){r=r.toLowerCase(),r=r.replace(_o,""),r=r.replace(go,"");for(var e=r.split(/\W+/),n=co(e),t;!(t=n()).done;){var l=t.value;if(bo.indexOf(l)<0)return!1}return!0}var bo=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function vo(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Xt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Xt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Xt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=wo(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var _=Number(r);if(isNaN(_))throw new Error('Invalid "numeric" cell value: '.concat(r));r=_,po(r,o(),i,a)&&(r=Nr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function wo(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Xt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var yo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function ko(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function So(r){for(var e=0,n=0;n<r.length;)e*=26,e+=yo.indexOf(r[n]),n++;return e}function Pr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),So(r[0].trim())]}function To(r,e,n,t,l,o,i){var u=Pr(r.getAttribute("r")),s=Yl(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:vo(a,f,{getInlineStringValue:function(){return Jl(e,r)},getInlineStringXml:function(){return Ir(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function Co(r,e,n,t,l,o){var i=Kl(r);return i.length===0?[]:i.map(function(u){return To(u,r,e,n,t,l,o)})}function Oo(r,e){return No(r)||Io(r,e)||Lo(r,e)||Ao()}function Ao(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lo(r,e){if(r){if(typeof r=="string")return Cn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(r,e)}}function Cn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Io(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function No(r){if(Array.isArray(r))return r}function Po(r){var e=Zl(r);if(e)return e=e.split(":").map(Pr).map(function(n){var t=Oo(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Mo(r,e,n,t,l,o){var i=e.createDocument(r),u=Co(i,e,n,t,l,o),s=Po(i)||ko(u);return{cells:u,dimensions:s}}function Eo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Fo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fo(r,e){if(r){if(typeof r=="string")return On(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(r,e)}}function On(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Do(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=Eo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function jo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Bo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bo(r,e){if(r){if(typeof r=="string")return An(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(r,e)}}function An(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ho(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=jo(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Ro(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Mr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Go(r,e){return Uo(r)||zo(r,e)||Mr(r,e)||Wo()}function Wo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mr(r,e){if(r){if(typeof r=="string")return Ln(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(r,e)}}function Ln(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function zo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Uo(r){if(Array.isArray(r))return r}function qo(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Go(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=Ro(t),_;!(_=c()).done;){var d=_.value,k=d.row-1,T=d.column-1;T<i&&k<u&&(s[k][T]=d.value)}var C=e.rowMap;if(C)for(var S=0;S<s.length;)C[S]=S,S++;return s=Do(Ho(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(s=e.transformData(s)),s}function Vo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Xo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xo(r,e){if(r){if(typeof r=="string")return In(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(r,e)}}function In(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Nn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Ko(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nn(Object(n),!0).forEach(function(t){Yo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Yo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Jo(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Ko({sheet:1},n));var t=function(_){if(!r[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return r[_]},l=so(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?uo(t(l.sharedStrings),e):[],i=l.styles?ao(t(l.styles),e):{},u=oo(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var s=Zo(n.sheet,u.sheets);if(!s||!l.sheets[s])throw Qo(n.sheet,u.sheets);var a=Mo(t(l.sheets[s]),e,o,i,u,n),f=qo(a,n);return n.properties?{data:f,properties:u}:f}function Zo(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Vo(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Qo(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Zt(r){"@babel/helpers - typeof";return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(r)}function Pn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function xo(r,e,n){return e&&Pn(r.prototype,e),n&&Pn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function es(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ts(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ct(r,e)}function ns(r){var e=Er();return function(){var t=Ot(r),l;if(e){var o=Ot(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return rs(this,l)}}function rs(r,e){if(e&&(Zt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ls(r)}function ls(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Qt(r){var e=typeof Map=="function"?new Map:void 0;return Qt=function(t){if(t===null||!os(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Et(t,arguments,Ot(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ct(l,t)},Qt(r)}function Et(r,e,n){return Er()?Et=Reflect.construct:Et=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Ct(a,i.prototype),a},Et.apply(null,arguments)}function Er(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function os(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ct(r,e){return Ct=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Ct(r,e)}function Ot(r){return Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ot(r)}var _e=function(r){ts(n,r);var e=ns(n);function n(t){var l;return es(this,n),l=e.call(this,"invalid"),l.reason=t,l}return xo(n)}(Qt(Error));function ss(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new _e("not_a_number")}if(typeof r!="number")throw new _e("not_a_number");if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return r}function is(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return String(r)}throw new _e("not_a_string")}function as(r){if(typeof r=="boolean")return r;throw new _e("not_a_boolean")}function fs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new _e("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");var t=Nr(r,n);if(isNaN(t.valueOf()))throw new _e("out_of_bounds");return t}throw new _e("not_a_date")}function us(r,e){return ps(r)||$s(r,e)||Fr(r,e)||cs()}function cs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $s(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ps(r){if(Array.isArray(r))return r}function xt(r){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(r)}function ms(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Fr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fr(r,e){if(r){if(typeof r=="string")return Mn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(r,e)}}function Mn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function En(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Fn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?En(Object(n),!0).forEach(function(t){_s(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function _s(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Dn={isColumnOriented:!1};function gs(r,e,n){n?n=Fn(Fn({},Dn),n):n=Dn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;vs(e),l&&(r=bs(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Dr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var _=ms(a),d;!(d=_()).done;){var k=d.value;k.row=o[k.row-1]+1}return{rows:s,errors:a}}function Dr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var _=f[a],d=r[_],k=xt(d.type)==="object"&&!Array.isArray(d.type),T=e[t.indexOf(_)];T===void 0&&(T=null);var C=void 0,S=void 0,L=void 0;if(k)C=Dr(d.type,e,n,t,l,o);else if(T===null)C=null;else if(Array.isArray(d.type)){var N=!1,j=hs(T).map(function(F){var P=jn(F,d,o);return P.error&&(C=F,S=P.error,L=P.reason),P.value!==null&&(N=!0),P.value});S||(C=N?j:null)}else{var I=jn(T,d,o);S=I.error,L=I.reason,C=S?T:I.value}!S&&C===null&&d.required&&(S="required"),S?(S={error:S,row:n+1,column:_,value:C},L&&(S.reason=L),d.type&&(S.type=d.type),l.push(S)):(u&&C!==null&&(u=!1),(C!==null||o.includeNullValues)&&(i[d.prop]=C))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function jn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=rt(r,e.parse):e.type?t=ds(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function rt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ds(r,e,n){switch(e){case String:return rt(r,is);case Number:return rt(r,ss);case Date:return rt(r,function(t){return fs(t,{properties:n.properties})});case Boolean:return rt(r,as);default:if(typeof e=="function")return rt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function jr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=jr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function hs(r){for(var e=[],n=0;n<r.length;){var t=jr(r,",",n),l=us(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var bs=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function vs(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function en(r){"@babel/helpers - typeof";return en=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(r)}function Br(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;en(o)==="object"&&(o=Object.keys(r[l])[0],i=Br(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var ws=["schema","map"];function Bn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Mt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bn(Object(n),!0).forEach(function(t){ys(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ys(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ks(r,e){if(r==null)return{};var n=Ss(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Ss(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Ts(r,e,n){var t=n.schema,l=n.map,o=ks(n,ws);!t&&l&&(t=Br(l));var i=Jo(r,e,Mt(Mt({},o),{},{properties:t||o.properties}));return t?gs(i.data,t,Mt(Mt({},o),{},{properties:i.properties})):i}function Cs(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ul(r).then(function(n){return Ts(n,Cl,e)})}function Os(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:l.authority_or_region,capital_scheme_id:l.capital_scheme_id,funding_programme:l.funding_programme});r.features=r.features.filter(t=>As(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.num_features++,t.properties.funding_programme=l.funding_programme,t.id=n++}return e}function As(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Ls(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Cs(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Gr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Q={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},je=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Is(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Tt({props:u}),U.push(()=>V(e,"value",i)),e.$on("change",r[2]),l=new xr({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],X(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Ns(r,e,n){let t;De(r,rn,s=>n(4,t=s));let l="interventionType",o=hn("v1");function i(){let s;l=="interventionType"?(s=wr("v1"),n(1,o=hn("v1"))):(s=dr(["get","funding_programme"],{ATF2:Q.atf2,ATF3:Q.atf3,ATF4:Q.atf4},"grey"),n(1,o=[["ATF2",Q.atf2],["ATF3",Q.atf3],["ATF4",Q.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class Ps extends W{constructor(e){super(),z(this,e,Ns,Is,G,{})}}function Ms(r){let e;return{c(){e=w("Clear")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Es(r){let e,n,t,l,o,i;return t=new Kt({props:{$$slots:{default:[Ms]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=A("input"),n=O(),h(t.$$.fragment),x(e,"type","text"),x(e,"class","govuk-input govuk-input--width-10"),x(e,"id","filterText")},m(u,s){p(u,e,s),$n(e,r[0]),p(u,n,s),b(t,u,s),l=!0,o||(i=tn(e,"input",r[12]),o=!0)},p(u,s){s&1&&e.value!==u[0]&&$n(e,u[0]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||($(t.$$.fragment,u),l=!0)},o(u){g(t.$$.fragment,u),l=!1},d(u){u&&(m(e),m(n)),v(t,u),o=!1,i()}}}function Fs(r){let e,n,t,l,o,i,u,s,a,f;function c(T){r[10](T)}let _={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&(_.value=r[3]),e=new Tt({props:_}),U.push(()=>V(e,"value",c));function d(T){r[11](T)}let k={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(k.value=r[4]),l=new Tt({props:k}),U.push(()=>V(l,"value",d)),u=new hr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Es]},$$scope:{ctx:r}}}),a=new Ps({}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(T,C){b(e,T,C),p(T,t,C),b(l,T,C),p(T,i,C),b(u,T,C),p(T,s,C),b(a,T,C),f=!0},p(T,C){const S={};C&32&&(S.choices=T[5]),!n&&C&8&&(n=!0,S.value=T[3],X(()=>n=!1)),e.$set(S);const L={};C&64&&(L.choices=T[6]),!o&&C&16&&(o=!0,L.value=T[4],X(()=>o=!1)),l.$set(L);const N={};C&65537&&(N.$$scope={dirty:C,ctx:T}),u.$set(N)},i(T){f||($(e.$$.fragment,T),$(l.$$.fragment,T),$(u.$$.fragment,T),$(a.$$.fragment,T),f=!0)},o(T){g(e.$$.fragment,T),g(l.$$.fragment,T),g(u.$$.fragment,T),g(a.$$.fragment,T),f=!1},d(T){T&&(m(t),m(i),m(s)),v(e,T),v(l,T),v(u,T),v(a,T)}}}function Ds(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",_,d,k=r[7].other.toLocaleString()+"",T,C;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),_=w(c),d=w(" crossings, "),T=w(k),C=w(`
    other)`)},m(S,L){p(S,e,L),p(S,t,L),p(S,l,L),p(S,i,L),p(S,u,L),p(S,a,L),p(S,f,L),p(S,_,L),p(S,d,L),p(S,T,L),p(S,C,L)},p(S,L){L&2&&n!==(n=S[1].size.toLocaleString()+"")&&H(t,n),L&128&&o!==(o=S[7].route.toLocaleString()+"")&&H(i,o),L&128&&s!==(s=S[7].area.toLocaleString()+"")&&H(a,s),L&128&&c!==(c=S[7].crossing.toLocaleString()+"")&&H(_,c),L&128&&k!==(k=S[7].other.toLocaleString()+"")&&H(T,k)},d(S){S&&(m(e),m(t),m(l),m(i),m(u),m(a),m(f),m(_),m(d),m(T),m(C))}}}function js(r){let e,n,t;function l(i){r[14](i)}let o={id:"show-schemes",$$slots:{default:[Ds]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new le({props:o}),U.push(()=>V(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65666&&(s.$$scope={dirty:u,ctx:i}),!n&&u&4&&(n=!0,s.checked=i[2],X(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Bs(r){let e,n,t,l;return e=new Ie({props:{label:"Filters",$$slots:{default:[Fs]},$$scope:{ctx:r}}}),t=new Lt({props:{small:!0,$$slots:{default:[js]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65657&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65670&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Hs(r,e,n){let{schemesGj:t}=e,{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,{show:u=!0}=e,s=[],a="",f=[],c="",_={area:0,route:0,crossing:0,other:0};ln(()=>{let N=new Set,j=new Set;for(let I of l.values())I.authority_or_region&&N.add(I.authority_or_region),I.funding_programme&&j.add(I.funding_programme);n(5,s=Array.from(N.entries())),s.sort(),n(6,f=Array.from(j.entries())),f.sort()});function d(N,j,I){let F=N.toLowerCase(),P=E=>{var R,ee;if(F&&!((R=E.properties.name)!=null&&R.toLowerCase().includes(F))&&!((ee=E.properties.description)!=null&&ee.toLowerCase().includes(F)))return!1;if(j||I){let D=l.get(E.properties.scheme_reference);if(j&&D.authority_or_region!=j||I&&D.funding_programme!=I)return!1}return!0};n(1,o=new Set(t.features.filter(P).map(E=>E.properties.scheme_reference))),n(7,_={area:0,route:0,crossing:0,other:0});let M=E=>{var R,ee;return!(!o.has(E.properties.scheme_reference)||F&&!((R=E.properties.name)!=null&&R.toLowerCase().includes(F))&&!((ee=E.properties.description)!=null&&ee.toLowerCase().includes(F)))};for(let E of t.features)M(E)?(delete E.properties.hide_while_editing,n(7,_[E.properties.intervention_type]++,_)):E.properties.hide_while_editing=!0;n(8,t),n(7,_)}function k(N){a=N,n(3,a)}function T(N){c=N,n(4,c)}function C(){i=this.value,n(0,i)}const S=()=>n(0,i="");function L(N){u=N,n(2,u)}return r.$$set=N=>{"schemesGj"in N&&n(8,t=N.schemesGj),"schemes"in N&&n(9,l=N.schemes),"schemesToBeShown"in N&&n(1,o=N.schemesToBeShown),"filterText"in N&&n(0,i=N.filterText),"show"in N&&n(2,u=N.show)},r.$$.update=()=>{r.$$.dirty&25&&d(i,a,c)},[i,o,u,a,c,s,f,_,t,l,k,T,C,S,L]}class Rs extends W{constructor(e){super(),z(this,e,Hs,Bs,G,{schemesGj:8,schemes:9,schemesToBeShown:1,filterText:0,show:2})}}function Gs(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ws(r){let e,n,t,l,o;return t=new q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Gs]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,u){p(i,e,u),y(e,n),b(t,e,null),y(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||($(t.$$.fragment,i),o=!0)},o(i){g(t.$$.fragment,i),o=!1},d(i){i&&m(e),v(t)}}}class Ee extends W{constructor(e){super(),z(this,e,null,Ws,G,{})}}function Hn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Rn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Gn(r){let e,n;return{c(){e=A("span"),n=w(` 
    `),Se(e,"background",r[5]),Se(e,"width","100%"),Se(e,"border","1px solid black")},m(t,l){p(t,e,l),y(e,n)},p(t,l){l&1&&Se(e,"background",t[5])},d(t){t&&m(e)}}}function Wn(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&H(t,n)},d(l){l&&m(e)}}}function zs(r){let e,n,t,l=ze(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Gn(Rn(r,l,s));let i=ze(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Wn(Hn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=O(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();Se(e,"display","flex"),Se(t,"display","flex"),Se(t,"justify-content","space-between")},m(s,a){p(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);p(s,n,a),p(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=ze(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Rn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Gn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=ze(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Hn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Wn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:ne,o:ne,d(s){s&&(m(e),m(n),m(t)),Dt(o,s),Dt(u,s)}}}function Us(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class qe extends W{constructor(e){super(),z(this,e,Us,zs,G,{colorScale:0,limits:1})}}function zn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function qs(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Vs(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Xs(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ks(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ys(r){let e,n,t,l,o,i,u,s,a,f,c,_;return t=new q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Vs]},$$scope:{ctx:r}}}),o=new q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Xs]},$$scope:{ctx:r}}}),f=new q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ks]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=O(),s=A("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(d,k){p(d,e,k),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(d,u,k),p(d,s,k),y(s,a),b(f,s,null),y(s,c),_=!0},p(d,k){const T={};k&65536&&(T.$$scope={dirty:k,ctx:d}),t.$set(T);const C={};k&65536&&(C.$$scope={dirty:k,ctx:d}),o.$set(C);const S={};k&65536&&(S.$$scope={dirty:k,ctx:d}),f.$set(S)},i(d){_||($(t.$$.fragment,d),$(o.$$.fragment,d),$(f.$$.fragment,d),_=!0)},o(d){g(t.$$.fragment,d),g(o.$$.fragment,d),g(f.$$.fragment,d),_=!1},d(d){d&&(m(e),m(u),m(s)),v(t),v(o),v(f)}}}function Js(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ys]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Un(r){let e,n;return e=new qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zs(r){let e;return{c(){e=w("Average cars per household")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qs(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xs(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ei(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ti(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,k;return o=new q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Qs]},$$scope:{ctx:r}}}),u=new q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[xs]},$$scope:{ctx:r}}}),_=new q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ei]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=O(),f=A("p"),c=w("License: "),h(_.$$.fragment),d=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(T,C){p(T,e,C),p(T,n,C),p(T,t,C),y(t,l),b(o,t,null),y(t,i),b(u,t,null),y(t,s),p(T,a,C),p(T,f,C),y(f,c),b(_,f,null),y(f,d),k=!0},p(T,C){const S={};C&65536&&(S.$$scope={dirty:C,ctx:T}),o.$set(S);const L={};C&65536&&(L.$$scope={dirty:C,ctx:T}),u.$set(L);const N={};C&65536&&(N.$$scope={dirty:C,ctx:T}),_.$set(N)},i(T){k||($(o.$$.fragment,T),$(u.$$.fragment,T),$(_.$$.fragment,T),k=!0)},o(T){g(o.$$.fragment,T),g(u.$$.fragment,T),g(_.$$.fragment,T),k=!1},d(T){T&&(m(e),m(n),m(t),m(a),m(f)),v(o),v(u),v(_)}}}function ni(r){let e,n,t;return n=new se({props:{$$slots:{default:[ti]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function qn(r){let e,n;return e=new qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ri(r){let e;return{c(){e=w("Population density")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function li(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function oi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function si(r){let e,n,t,l,o,i,u,s,a;return t=new q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[li]},$$scope:{ctx:r}}}),o=new q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[oi]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=O(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function ii(r){let e,n,t;return n=new se({props:{$$slots:{default:[si]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Vn(r){let e,n,t,l;return t=new qe({props:{colorScale:r[4],limits:r[6]().map(_i)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=O(),h(t.$$.fragment)},m(o,i){p(o,e,i),p(o,n,i),b(t,o,i),l=!0},p:ne,i(o){l||($(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),v(t,o)}}}function ai(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){p(a,e,f),y(e,n),y(e,t),y(t,o),y(e,i),y(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&H(o,l),f&8192&&u!==(u=a[14]+"")&&H(s,u)},d(a){a&&m(e)}}}function fi(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=A("b"),s=w(u),a=w(`
          cars`)},m(f,c){p(f,e,c),y(e,n),y(e,l),y(e,o),y(e,i),y(i,s),y(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&H(l,t),c&8200&&u!==(u=f[15]+"")&&H(s,u)},d(f){f&&m(e)}}}function ui(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){p(f,e,c),y(e,n),y(n,l),y(n,o),y(e,i),y(e,s),y(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&H(l,t),c&8192&&u!==(u=f[14]+"")&&H(s,u)},d(f){f&&m(e)}}}function ci(r){zn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?ui:o[3]=="average_cars_per_household"?fi:ai}let t=n(r),l=t(r);return{c(){l.c(),e=Te()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){zn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function $i(r){let e,n;return e=new oe({props:{$$slots:{default:[ci,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pi(r){let e,n,t,l;const o=[B(Ye),{sourceLayer:Ye},{paint:{"fill-color":$e(["get",r[3]],r[6](),r[4]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[$i]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i}),e.$on("click",r[5]);const u=[B(`${Ye}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?J(o,[f&0&&te(B(Ye)),f&0&&{sourceLayer:Ye},f&88&&{paint:{"fill-color":$e(["get",a[3]],a[6](),a[4]),"fill-opacity":K(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&8?J(u,[f&0&&te(B(`${Ye}-outline`)),u[1],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function mi(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,k;function T(M){r[7](M)}let C={id:"percent_households_with_car",$$slots:{right:[Js],default:[qs]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new le({props:C}),U.push(()=>V(e,"checked",T)),e.$on("change",r[8]);let S=r[3]=="percent_households_with_car"&&Un(r);function L(M){r[9](M)}let N={id:"average_cars_per_household",$$slots:{right:[ni],default:[Zs]},$$scope:{ctx:r}};r[1]!==void 0&&(N.checked=r[1]),o=new le({props:N}),U.push(()=>V(o,"checked",L)),o.$on("change",r[10]);let j=r[3]=="average_cars_per_household"&&qn(r);function I(M){r[11](M)}let F={id:"population_density",$$slots:{right:[ii],default:[ri]},$$scope:{ctx:r}};r[2]!==void 0&&(F.checked=r[2]),a=new le({props:F}),U.push(()=>V(a,"checked",I)),a.$on("change",r[12]);let P=r[3]=="population_density"&&Vn(r);return d=new ce({props:{url:`pmtiles://${fe()}/v1/${Ye}.pmtiles`,$$slots:{default:[pi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),S&&S.c(),l=O(),h(o.$$.fragment),u=O(),j&&j.c(),s=O(),h(a.$$.fragment),c=O(),P&&P.c(),_=O(),h(d.$$.fragment)},m(M,E){b(e,M,E),p(M,t,E),S&&S.m(M,E),p(M,l,E),b(o,M,E),p(M,u,E),j&&j.m(M,E),p(M,s,E),b(a,M,E),p(M,c,E),P&&P.m(M,E),p(M,_,E),b(d,M,E),k=!0},p(M,[E]){const R={};E&65536&&(R.$$scope={dirty:E,ctx:M}),!n&&E&1&&(n=!0,R.checked=M[0],X(()=>n=!1)),e.$set(R),M[3]=="percent_households_with_car"?S?(S.p(M,E),E&8&&$(S,1)):(S=Un(M),S.c(),$(S,1),S.m(l.parentNode,l)):S&&(ie(),g(S,1,1,()=>{S=null}),ae());const ee={};E&65536&&(ee.$$scope={dirty:E,ctx:M}),!i&&E&2&&(i=!0,ee.checked=M[1],X(()=>i=!1)),o.$set(ee),M[3]=="average_cars_per_household"?j?(j.p(M,E),E&8&&$(j,1)):(j=qn(M),j.c(),$(j,1),j.m(s.parentNode,s)):j&&(ie(),g(j,1,1,()=>{j=null}),ae());const D={};E&65536&&(D.$$scope={dirty:E,ctx:M}),!f&&E&4&&(f=!0,D.checked=M[2],X(()=>f=!1)),a.$set(D),M[3]=="population_density"?P?(P.p(M,E),E&8&&$(P,1)):(P=Vn(M),P.c(),$(P,1),P.m(_.parentNode,_)):P&&(ie(),g(P,1,1,()=>{P=null}),ae());const Z={};E&65544&&(Z.$$scope={dirty:E,ctx:M}),d.$set(Z)},i(M){k||($(e.$$.fragment,M),$(S),$(o.$$.fragment,M),$(j),$(a.$$.fragment,M),$(P),$(d.$$.fragment,M),k=!0)},o(M){g(e.$$.fragment,M),g(S),g(o.$$.fragment,M),g(j),g(a.$$.fragment,M),g(P),g(d.$$.fragment,M),k=!1},d(M){M&&(m(t),m(l),m(u),m(s),m(c),m(_)),v(e,M),S&&S.d(M),v(o,M),j&&j.d(M),v(a,M),P&&P.d(M),v(d,M)}}}let Ye="census_output_areas";const _i=r=>r.toLocaleString();function gi(r,e,n){let t=Q.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(C){let S=C.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${S}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${S}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(C){l=C,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function _(C){o=C,n(1,o)}const d=()=>{n(0,l=!1),n(2,i=!1)};function k(C){i=C,n(2,i)}const T=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,_,d,k,T]}class di extends W{constructor(e){super(),z(this,e,gi,mi,G,{})}}function hi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function bi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function vi(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[bi]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function wi(r){let e,n,t;return n=new se({props:{$$slots:{default:[vi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function yi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&m(e)}}}function ki(r){let e,n;return e=new oe({props:{$$slots:{default:[yi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Si(r){let e,n,t,l;const o=[B(lt),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ki]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i}),e.$on("click",Ci);const u=[B(`${lt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&te(B(lt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?J(u,[f&0&&te(B(`${lt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Ti(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:lt,$$slots:{right:[wi],default:[hi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>V(e,"checked",i)),l=new At({props:{data:`${fe()}/v1/${lt}.geojson`,$$slots:{default:[Si]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let lt="combined_authorities";function Ci(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Oi(r,e,n){let t=Q.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ai extends W{constructor(e){super(),z(this,e,Oi,Ti,G,{})}}function Li(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ii(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ni(r){let e;return{c(){e=w(`here
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pi(r){let e,n,t,l,o,i,u,s,a;return t=new q({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Ii]},$$scope:{ctx:r}}}),o=new q({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Ni]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=O(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function Mi(r){let e,n,t;return n=new se({props:{$$slots:{default:[Pi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Xn(r){let e,n;return e=new qe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ei(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,_=r[4].rank.toLocaleString()+"",d,k;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(i),s=O(),a=A("p"),f=w("Rank: "),c=A("b"),d=w(_),k=w(`
        / 32,844 LSOAs`)},m(T,C){p(T,e,C),y(e,t),y(e,l),y(e,o),y(o,u),p(T,s,C),p(T,a,C),y(a,f),y(a,c),y(c,d),y(a,k)},p(T,C){C&16&&n!==(n=T[4].LSOA11CD+"")&&H(t,n),C&16&&i!==(i=T[4].score+"")&&H(u,i),C&16&&_!==(_=T[4].rank.toLocaleString()+"")&&H(d,_)},d(T){T&&(m(e),m(s),m(a))}}}function Fi(r){let e,n;return e=new oe({props:{$$slots:{default:[Ei,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Di(r){let e,n,t,l;const o=[B(Ge),{sourceLayer:Ge},{paint:{"fill-color":$e(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Fi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i});const u=[B(`${Ge}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?J(o,[f&0&&te(B(Ge)),f&0&&{sourceLayer:Ge},f&6&&{paint:{"fill-color":$e(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":K(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?J(u,[f&0&&te(B(`${Ge}-outline`)),u[1],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function ji(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:Ge,$$slots:{right:[Mi],default:[Li]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),U.push(()=>V(e,"checked",u));let a=r[0]&&Xn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Ge}.pmtiles`,$$slots:{default:[Di]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=Xn(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Ge="imd";function Bi(r,e,n){let t=Q.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Hi extends W{constructor(e){super(),z(this,e,Bi,ji,G,{})}}function Ri(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Gi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Wi(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Gi]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function zi(r){let e,n,t;return n=new se({props:{$$slots:{default:[Wi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Ui(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&m(e)}}}function qi(r){let e,n;return e=new oe({props:{$$slots:{default:[Ui,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vi(r){let e,n,t,l;const o=[B(ot),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[qi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i}),e.$on("click",Ki);const u=[B(`${ot}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&te(B(ot)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?J(u,[f&0&&te(B(`${ot}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Xi(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ot,$$slots:{right:[zi],default:[Ri]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>V(e,"checked",i)),l=new At({props:{data:`${fe()}/v1/${ot}.geojson`,$$slots:{default:[Vi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ot="local_authority_districts";function Ki(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Yi(r,e,n){let t=Q.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ji extends W{constructor(e){super(),z(this,e,Yi,Xi,G,{})}}function Zi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Qi(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xi(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ea(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ta(r){let e;return{c(){e=w("this map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function na(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ra(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,k,T,C,S,L,N,j,I,F;return t=new q({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Qi]},$$scope:{ctx:r}}}),o=new q({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[xi]},$$scope:{ctx:r}}}),u=new q({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ea]},$$scope:{ctx:r}}}),d=new q({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ta]},$$scope:{ctx:r}}}),L=new q({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[na]},$$scope:{ctx:r}}}),I=new Ee({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=O(),f=A("p"),c=A("strong"),_=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),k=w(" to get more details."),T=O(),C=A("p"),S=w("Data from ONS Geography via "),h(L.$$.fragment),N=w(", as of November 2022."),j=O(),h(I.$$.fragment)},m(P,M){p(P,e,M),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),b(u,e,null),y(e,s),p(P,a,M),p(P,f,M),y(f,c),y(c,_),b(d,c,null),y(c,k),p(P,T,M),p(P,C,M),y(C,S),b(L,C,null),y(C,N),p(P,j,M),b(I,P,M),F=!0},p(P,M){const E={};M&16&&(E.$$scope={dirty:M,ctx:P}),t.$set(E);const R={};M&16&&(R.$$scope={dirty:M,ctx:P}),o.$set(R);const ee={};M&16&&(ee.$$scope={dirty:M,ctx:P}),u.$set(ee);const D={};M&16&&(D.$$scope={dirty:M,ctx:P}),d.$set(D);const Z={};M&16&&(Z.$$scope={dirty:M,ctx:P}),L.$set(Z)},i(P){F||($(t.$$.fragment,P),$(o.$$.fragment,P),$(u.$$.fragment,P),$(d.$$.fragment,P),$(L.$$.fragment,P),$(I.$$.fragment,P),F=!0)},o(P){g(t.$$.fragment,P),g(o.$$.fragment,P),g(u.$$.fragment,P),g(d.$$.fragment,P),g(L.$$.fragment,P),g(I.$$.fragment,P),F=!1},d(P){P&&(m(e),m(a),m(f),m(T),m(C),m(j)),v(t),v(o),v(u),v(d),v(L),v(I,P)}}}function la(r){let e,n,t;return n=new se({props:{$$slots:{default:[ra]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function oa(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&m(e)}}}function sa(r){let e,n;return e=new oe({props:{$$slots:{default:[oa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ia(r){let e,n,t,l;const o=[B(Oe),{sourceLayer:Oe},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[sa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i});const u=[B(`${Oe}-outline`),{sourceLayer:Oe},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&te(B(Oe)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?J(u,[f&0&&te(B(`${Oe}-outline`)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function aa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Oe,$$slots:{right:[la],default:[Zi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>V(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Oe}.pmtiles`,$$slots:{default:[ia]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Oe="local_planning_authorities";function fa(r,e,n){let t=Q.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ua extends W{constructor(e){super(),z(this,e,fa,aa,G,{})}}function ca(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function $a(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function pa(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[$a]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function ma(r){let e,n,t;return n=new se({props:{$$slots:{default:[pa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function _a(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&H(t,n)},d(l){l&&m(e)}}}function ga(r){let e,n;return e=new oe({props:{$$slots:{default:[_a,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function da(r){let e,n,t,l;const o=[B(Ae),{sourceLayer:Ae},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ga]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i}),e.$on("click",ba);const u=[B(`${Ae}-outline`),{sourceLayer:Ae},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&te(B(Ae)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?J(u,[f&0&&te(B(`${Ae}-outline`)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function ha(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ae,$$slots:{right:[ma],default:[ca]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>V(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ae}.pmtiles`,$$slots:{default:[da]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ae="parliamentary_constituencies";function ba(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function va(r,e,n){let t=Q.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class wa extends W{constructor(e){super(),z(this,e,va,ha,G,{})}}function ya(r){let e;return{c(){e=w("Pollution")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ka(r){let e,n,t,l;return t=new Ee({}),{c(){e=A("p"),e.textContent="TODO",n=O(),h(t.$$.fragment)},m(o,i){p(o,e,i),p(o,n,i),b(t,o,i),l=!0},p:ne,i(o){l||($(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),v(t,o)}}}function Sa(r){let e,n,t;return n=new se({props:{$$slots:{default:[ka]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Kn(r){let e,n,t;function l(i){r[4](i)}let o={label:"Pollutant",id:"pollutant",choices:[["NOx_viridis","NO2 (Nitrogen dioxide)"],["PM25_viridis","PM2.5 (Particulate matter < 2.5 microns)"],["PM10_viridis","PM10 (Particulate matter < 10 microns)"]]};return r[0]!==void 0&&(o.value=r[0]),e=new Tt({props:o}),U.push(()=>V(e,"value",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};!n&&u&1&&(n=!0,s.value=i[0],X(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ta(r){let e,n;const t=[B("pollution"),{paint:{"raster-opacity":.5}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new cl({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&2?J(t,[t[0],t[1],{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ca(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:"pollution",$$slots:{right:[Sa],default:[ya]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),U.push(()=>V(e,"checked",u));let a=r[1]&&Kn(r);return o=new ml({props:{tiles:r[2],tileSize:256,$$slots:{default:[Ta]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&$(a,1)):(a=Kn(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&4&&(d.tiles=f[2]),c&34&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}function Oa(r){let e=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:{NOx_viridis:"21",PM25_viridis:"20",PM10_viridis:"21"}[r]}).toString();return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2021/${r}/MapServer/WMSServer?bbox={bbox-epsg-3857}&${e}`}function Aa(r,e,n){let t,l=!1,o="PM25_viridis";function i(s){l=s,n(1,l)}function u(s){o=s,n(0,o)}return r.$$.update=()=>{r.$$.dirty&1&&n(2,t=[Oa(o)])},[o,l,t,i,u]}class La extends W{constructor(e){super(),z(this,e,Aa,Ca,G,{})}}function Ia(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Na(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pa(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Na]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Ma(r){let e,n,t;return n=new se({props:{$$slots:{default:[Pa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Ea(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&m(e)}}}function Fa(r){let e,n;return e=new oe({props:{$$slots:{default:[Ea,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Da(r){let e,n,t,l;const o=[B(Le),{sourceLayer:Le},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Fa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Be({props:i}),e.$on("click",Ba);const u=[B(`${Le}-outline`),{sourceLayer:Le},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&te(B(Le)),f&0&&{sourceLayer:Le},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?J(u,[f&0&&te(B(`${Le}-outline`)),f&0&&{sourceLayer:Le},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function ja(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Le,$$slots:{right:[Ma],default:[Ia]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>V(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Le}.pmtiles`,$$slots:{default:[Da]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Le="wards";function Ba(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Ha(r,e,n){let t=Q.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ra extends W{constructor(e){super(),z(this,e,Ha,ja,G,{})}}function Ga(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Wa(r){let e,n,t,l;return t=new q({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ga]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){p(o,e,i),y(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||($(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&m(e),v(t)}}}class Ve extends W{constructor(e){super(),z(this,e,null,Wa,G,{})}}function za(r){let e,n,t;return e=new ge({props:{color:Q.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ua(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function qa(r){let e,n,t,l,o,i,u,s,a;return o=new q({props:{href:"https://gtfs.org",$$slots:{default:[Ua]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),h(s.$$.fragment)},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),y(t,l),b(o,t,null),y(t,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||($(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(u)),v(o),v(s,f)}}}function Va(r){let e,n,t;return n=new se({props:{$$slots:{default:[qa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Xa(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ka(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ya(r){let e;function n(o,i){return o[2].has_bus_lane?Ka:Xa}let t=n(r),l=t(r);return{c(){l.c(),e=Te()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function Ja(r){let e,n;return e=new oe({props:{$$slots:{default:[Ya,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Za(r){let e,n;const t=[B(st),{sourceLayer:st},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Q.bus_route_with_lane,Q.bus_route_without_lane],"line-width":5,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Ja]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?J(t,[i&0&&te(B(st)),i&0&&{sourceLayer:st},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Qa(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:st,$$slots:{right:[Va],default:[za]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>V(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${st}.pmtiles`,$$slots:{default:[Za]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let st="bus_routes";function xa(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class ef extends W{constructor(e){super(),z(this,e,xa,Qa,G,{})}}function Yn(r){const e=ff(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function Jn(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function tf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function nf(r){let e,n,t,l,o,i,u,s;return u=new Ve({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=O(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=O(),h(u.$$.fragment)},m(a,f){p(a,e,f),p(a,n,f),p(a,t,f),p(a,l,f),p(a,o,f),p(a,i,f),b(u,a,f),s=!0},p:ne,i(a){s||($(u.$$.fragment,a),s=!0)},o(a){g(u.$$.fragment,a),s=!1},d(a){a&&(m(e),m(n),m(t),m(l),m(o),m(i)),v(u,a)}}}function rf(r){let e,n,t;return n=new se({props:{$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Zn(r){let e,n,t=ze(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=Qn(Jn(r,t,i));const o=i=>g(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Te()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);p(i,e,u),n=!0},p(i,u){if(u&2){t=ze(i[1]);let s;for(s=0;s<t.length;s+=1){const a=Jn(i,t,s);l[s]?(l[s].p(a,u),$(l[s],1)):(l[s]=Qn(a),l[s].c(),$(l[s],1),l[s].m(e.parentNode,e))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)$(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(i){i&&m(e),Dt(l,i)}}}function Qn(r){let e,n,t,l=r[7]+"",o,i,u;return n=new ge({props:{color:r[8]}}),{c(){e=A("div"),h(n.$$.fragment),t=O(),o=w(l),i=O()},m(s,a){p(s,e,a),b(n,e,null),y(e,t),y(e,o),y(e,i),u=!0},p:ne,i(s){u||($(n.$$.fragment,s),u=!0)},o(s){g(n.$$.fragment,s),u=!1},d(s){s&&m(e),v(n)}}}function lf(r){Yn(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,_,d=r[6]+"",k;return{c(){e=A("h2"),t=w(n),l=O(),o=A("p"),i=w("Direction: "),u=A("b"),a=O(),f=A("p"),c=w("Width: "),_=A("b"),k=w(d)},m(T,C){p(T,e,C),y(e,t),p(T,l,C),p(T,o,C),y(o,i),y(o,u),u.innerHTML=s,p(T,a,C),p(T,f,C),y(f,c),y(f,_),y(_,k)},p(T,C){Yn(T),C&8&&n!==(n=T[4]+"")&&H(t,n),C&8&&s!==(s=T[5]+"")&&(u.innerHTML=s),C&8&&d!==(d=T[6]+"")&&H(k,d)},d(T){T&&(m(e),m(l),m(o),m(a),m(f))}}}function of(r){let e,n;return e=new oe({props:{$$slots:{default:[lf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sf(r){let e,n;const t=[B(it),{sourceLayer:it},{paint:{"line-color":dr(["get","kind"],{track:Q.cycle_paths.track,lane:Q.cycle_paths.lane,shared_use_segregated:Q.cycle_paths.shared_use_segregated,shared_use_unsegregated:Q.cycle_paths.shared_use_unsegregated},"red"),"line-width":je,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[of]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),e.$on("click",uf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?J(t,[i&0&&te(B(it)),i&0&&{sourceLayer:it},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function af(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:it,$$slots:{right:[rf],default:[tf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),U.push(()=>V(e,"checked",u));let a=r[0]&&Zn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${it}.pmtiles`,$$slots:{default:[sf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=Zn(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&2049&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let it="cycle_paths";function ff(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function uf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function cf(r,e,n){let t=[["Separated tracks",Q.cycle_paths.track],["Unprotected lanes",Q.cycle_paths.lane],["Shared-use (segregated)",Q.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",Q.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class $f extends W{constructor(e){super(),z(this,e,cf,af,G,{})}}function pf(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function mf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function _f(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[mf]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function gf(r){let e,n,t;return n=new se({props:{$$slots:{default:[_f]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function df(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&H(t,n)},d(l){l&&m(e)}}}function hf(r){let e,n;return e=new oe({props:{$$slots:{default:[df,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bf(r){let e,n;const t=[B(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[hf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&te(B(at)),i&0&&{sourceLayer:at},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:at,$$slots:{right:[gf],default:[pf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>V(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${at}.pmtiles`,$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let at="mrn";function wf(r,e,n){let t=Q.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class yf extends W{constructor(e){super(),z(this,e,wf,vf,G,{})}}function kf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Sf(r){let e;return{c(){e=w("the PCT website")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Tf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Cf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new q({props:{href:"https://www.pct.bike",$$slots:{default:[Sf]},$$scope:{ctx:r}}}),a=new q({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Tf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=O(),o=A("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(_,d){p(_,e,d),p(_,n,d),p(_,t,d),p(_,l,d),p(_,o,d),y(o,i),b(u,o,null),y(o,s),b(a,o,null),y(o,f),c=!0},p(_,d){const k={};d&1024&&(k.$$scope={dirty:d,ctx:_}),u.$set(k);const T={};d&1024&&(T.$$scope={dirty:d,ctx:_}),a.$set(T)},i(_){c||($(u.$$.fragment,_),$(a.$$.fragment,_),c=!0)},o(_){g(u.$$.fragment,_),g(a.$$.fragment,_),c=!1},d(_){_&&(m(e),m(n),m(t),m(l),m(o)),v(u),v(a)}}}function Of(r){let e,n,t;return n=new se({props:{$$slots:{default:[Cf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function xn(r){let e,n,t,l,o,i,u,s;e=new qe({props:{colorScale:r[3],limits:r[4]}});function a(d){r[7](d)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new br({props:f}),U.push(()=>V(t,"value",a));function c(d){r[8](d)}let _={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(_.value=r[1]),i=new Tt({props:_}),U.push(()=>V(i,"value",c)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(i.$$.fragment)},m(d,k){b(e,d,k),p(d,n,k),b(t,d,k),p(d,o,k),b(i,d,k),s=!0},p(d,k){const T={};!l&&k&1&&(l=!0,T.value=d[0],X(()=>l=!1)),t.$set(T);const C={};!u&&k&2&&(u=!0,C.value=d[1],X(()=>u=!1)),i.$set(C)},i(d){s||($(e.$$.fragment,d),$(t.$$.fragment,d),$(i.$$.fragment,d),s=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(i.$$.fragment,d),s=!1},d(d){d&&(m(n),m(o)),v(e,d),v(t,d),v(i,d)}}}function Af(r){let e,n=r[5](r[9])+"",t;return{c(){e=new on(!1),t=Te(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Lf(r){let e,n;return e=new oe({props:{$$slots:{default:[Af,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function If(r){let e,n;const t=[B(Ne),{sourceLayer:Ne},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":je,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ne?"visible":"none"}}];let l={$$slots:{default:[Lf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?J(t,[i&0&&te(B(Ne)),i&0&&{sourceLayer:Ne},i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":je,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ne?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Nf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new on(!1),t=Te(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Pf(r){let e,n;return e=new oe({props:{$$slots:{default:[Nf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mf(r){let e,n;const t=[B(Je),{sourceLayer:Je},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":je,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Je?"visible":"none"}}];let l={$$slots:{default:[Pf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?J(t,[i&0&&te(B(Je)),i&0&&{sourceLayer:Je},t[2],t[3],i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":je,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Je?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ef(r){let e,n,t,l,o,i,u,s;function a(_){r[6](_)}let f={id:Ne,$$slots:{right:[Of],default:[kf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new le({props:f}),U.push(()=>V(e,"checked",a));let c=r[2]&&xn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Ne}.pmtiles`,$$slots:{default:[If]},$$scope:{ctx:r}}}),u=new ce({props:{url:`pmtiles://${fe()}/v1/${Je}.pmtiles`,$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),c&&c.c(),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment)},m(_,d){b(e,_,d),p(_,t,d),c&&c.m(_,d),p(_,l,d),b(o,_,d),p(_,i,d),b(u,_,d),s=!0},p(_,[d]){const k={};d&1024&&(k.$$scope={dirty:d,ctx:_}),!n&&d&4&&(n=!0,k.checked=_[2],X(()=>n=!1)),e.$set(k),_[2]?c?(c.p(_,d),d&4&&$(c,1)):(c=xn(_),c.c(),$(c,1),c.m(l.parentNode,l)):c&&(ie(),g(c,1,1,()=>{c=null}),ae());const T={};d&1031&&(T.$$scope={dirty:d,ctx:_}),o.$set(T);const C={};d&1031&&(C.$$scope={dirty:d,ctx:_}),u.$set(C)},i(_){s||($(e.$$.fragment,_),$(c),$(o.$$.fragment,_),$(u.$$.fragment,_),s=!0)},o(_){g(e.$$.fragment,_),g(c),g(o.$$.fragment,_),g(u.$$.fragment,_),s=!1},d(_){_&&(m(t),m(l),m(i)),v(e,_),c&&c.d(_),v(o,_),v(u,_)}}}let Ne="pct_commute",Je="pct_school";function Ff(r,e,n){let t=Q.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ne,i="baseline",u=!1;function s(_){let d=_.baseline,k=_.gov_target,T=_.go_dutch,C=`<h2>Trip purpose: ${o==Ne?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)C+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let S=(k/d).toFixed(1),L=(T/d).toFixed(1);C+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${S}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${L}x</b> of baseline)</p>`}return C}function a(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){i=_,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class Df extends W{constructor(e){super(),z(this,e,Ff,Ef,G,{})}}function jf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Bf(r){let e;return{c(){e=w("Basemap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Rf(r){let e,n,t,l,o,i,u,s,a,f,c,_;return t=new q({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),f=new q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=O(),s=A("p"),a=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(d,k){p(d,e,k),y(e,n),b(t,e,null),y(e,l),p(d,o,k),p(d,i,k),p(d,u,k),p(d,s,k),y(s,a),b(f,s,null),y(s,c),_=!0},p(d,k){const T={};k&256&&(T.$$scope={dirty:k,ctx:d}),t.$set(T);const C={};k&256&&(C.$$scope={dirty:k,ctx:d}),f.$set(C)},i(d){_||($(t.$$.fragment,d),$(f.$$.fragment,d),_=!0)},o(d){g(t.$$.fragment,d),g(f.$$.fragment,d),_=!1},d(d){d&&(m(e),m(o),m(i),m(u),m(s)),v(t),v(f)}}}function Gf(r){let e,n,t;return n=new se({props:{$$slots:{default:[Rf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function er(r){let e,n,t,l,o;e=new qe({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new br({props:u}),U.push(()=>V(t,"value",i)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],X(()=>l=!1)),t.$set(f)},i(s){o||($(e.$$.fragment,s),$(t.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),o=!1},d(s){s&&m(n),v(e,s),v(t,s)}}}function Wf(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,_=r[4][r[7].highest_description]+"",d,k;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=O(),u=A("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),d=w(_),k=w(")")},m(T,C){p(T,e,C),y(e,n),y(e,l),y(e,o),p(T,i,C),p(T,u,C),y(u,s),y(u,f),y(u,c),y(u,d),y(u,k)},p(T,C){C&128&&t!==(t=T[7].indicative_mph+"")&&H(l,t),C&128&&a!==(a=T[7].highest_mph+"")&&H(f,a),C&128&&_!==(_=T[4][T[7].highest_description]+"")&&H(d,_)},d(T){T&&(m(e),m(i),m(u))}}}function zf(r){let e,n;return e=new oe({props:{$$slots:{default:[Wf,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uf(r){let e,n;const t=[B(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[0]],r[3],r[2]),"line-width":je,"line-opacity":K(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[zf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?J(t,[i&0&&te(B(ft)),i&0&&{sourceLayer:ft},t[2],t[3],i&13&&{paint:{"line-color":$e(["get",o[0]],o[3],o[2]),"line-width":je,"line-opacity":K(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function qf(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ft,$$slots:{right:[Gf],default:[jf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),U.push(()=>V(e,"checked",u));let a=r[1]&&er(r);return o=new ce({props:{url:`pmtiles://${sn()}/v1/${ft}.pmtiles`,$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&$(a,1)):(a=er(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ft="road_speeds";function Vf(r,e,n){let t=Q.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class Xf extends W{constructor(e){super(),z(this,e,Vf,qf,G,{})}}function Kf(r){let e;return{c(){e=w("OS Road widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Yf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Jf(r){let e,n,t,l,o,i,u,s,a;return u=new q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Yf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=O(),o=A("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),p(f,l,c),p(f,o,c),y(o,i),b(u,o,null),y(o,s),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||($(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(l),m(o)),v(u)}}}function Zf(r){let e,n,t;return n=new se({props:{$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function tr(r){let e,n;return e=new qe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qf(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",_,d;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),i=w(`
        meters`),u=O(),s=A("p"),a=w("Minimum width: "),f=A("b"),_=w(c),d=w(`
        meters`)},m(k,T){p(k,e,T),y(e,n),y(e,t),y(t,o),y(e,i),p(k,u,T),p(k,s,T),y(s,a),y(s,f),y(f,_),y(s,d)},p(k,T){T&16&&l!==(l=k[4].average+"")&&H(o,l),T&16&&c!==(c=k[4].minimum+"")&&H(_,c)},d(k){k&&(m(e),m(u),m(s))}}}function xf(r){let e,n;return e=new oe({props:{$$slots:{default:[Qf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function eu(r){let e,n;const t=[B(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get","average"],r[2],r[1]),"line-width":je,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[xf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?J(t,[i&0&&te(B(ut)),i&0&&{sourceLayer:ut},t[2],t[3],i&6&&{paint:{"line-color":$e(["get","average"],o[2],o[1]),"line-width":je,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function tu(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ut,$$slots:{right:[Zf],default:[Kf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),U.push(()=>V(e,"checked",u));let a=r[0]&&tr(r);return o=new ce({props:{url:`pmtiles://${sn()}/v1/${ut}.pmtiles`,$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=tr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="road_widths";function nu(r,e,n){let t=Q.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class ru extends W{constructor(e){super(),z(this,e,nu,tu,G,{})}}function lu(r){let e,n,t;return{c(){e=A("input"),x(e,"class","govuk-file-upload"),x(e,"id","load-criticals"),x(e,"type","file")},m(l,o){p(l,e,o),r[7](e),n||(t=tn(e,"change",r[5]),n=!0)},p:ne,d(l){l&&m(e),r[7](null),n=!1,t()}}}function nr(r){let e,n;return e=new Lt({props:{small:!0,$$slots:{default:[su]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ou(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new ge({props:{color:kt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),p(u,n,s),p(u,l,s),p(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&H(l,t)},i(u){i||($(e.$$.fragment,u),i=!0)},o(u){g(e.$$.fragment,u),i=!1},d(u){u&&(m(n),m(l),m(o)),v(e,u)}}}function su(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[ou]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),U.push(()=>V(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],X(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function iu(r){let e,n,t,l,o,i;e=new hr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[lu]},$$scope:{ctx:r}}}),t=new vr({props:{errorMessage:r[3]}});let u=r[2]>0&&nr(r);return{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),u&&u.c(),o=Te()},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),u&&u.m(s,a),p(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&$(u,1)):(u=nr(s),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(ie(),g(u,1,1,()=>{u=null}),ae())},i(s){i||($(e.$$.fragment,s),$(t.$$.fragment,s),$(u),i=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(u),i=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),u&&u.d(s)}}}function au(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,_,d,k,T=r[10].notes+"",C,S,L,N,j,I,F,P=r[10].id+"",M,E,R,ee,D,Z=(r[10].inspector??"???")+"",ve,ht,de,xe=r[10].submission_time+"",bt,et,pe,vt,Fe,He=r[10].scheme_reference+"",Xe,wt,tt,Ke=r[10].current_design_stage+"",nt;return{c(){e=A("div"),n=A("h2"),l=w(t),o=O(),i=A("p"),u=A("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=O(),_=A("p"),d=A("u"),d.textContent="Notes",k=w(`
          : `),C=w(T),S=O(),L=A("hr"),N=O(),j=A("p"),I=w("Critical issue ID: "),F=A("b"),M=w(P),E=O(),R=A("p"),ee=w("Submitted by "),D=A("b"),ve=w(Z),ht=w(`
          at
          `),de=A("b"),bt=w(xe),et=O(),pe=A("p"),vt=w("For scheme "),Fe=A("b"),Xe=w(He),wt=w(`
          in stage
          `),tt=A("b"),nt=w(Ke),Se(e,"max-width","30vw")},m(he,Ce){p(he,e,Ce),y(e,n),y(n,l),y(e,o),y(e,i),y(i,u),y(i,s),y(i,f),y(e,c),y(e,_),y(_,d),y(_,k),y(_,C),y(e,S),y(e,L),y(e,N),y(e,j),y(j,I),y(j,F),y(F,M),y(e,E),y(e,R),y(R,ee),y(R,D),y(D,ve),y(R,ht),y(R,de),y(de,bt),y(e,et),y(e,pe),y(pe,vt),y(pe,Fe),y(Fe,Xe),y(pe,wt),y(pe,tt),y(tt,nt)},p(he,Ce){Ce&1024&&t!==(t=he[10].critical_type+"")&&H(l,t),Ce&1024&&a!==(a=he[10].location_description+"")&&H(f,a),Ce&1024&&T!==(T=he[10].notes+"")&&H(C,T),Ce&1024&&P!==(P=he[10].id+"")&&H(M,P),Ce&1024&&Z!==(Z=(he[10].inspector??"???")+"")&&H(ve,Z),Ce&1024&&xe!==(xe=he[10].submission_time+"")&&H(bt,xe),Ce&1024&&He!==(He=he[10].scheme_reference+"")&&H(Xe,He),Ce&1024&&Ke!==(Ke=he[10].current_design_stage+"")&&H(nt,Ke)},d(he){he&&m(e)}}}function fu(r){let e,n;return e=new oe({props:{$$slots:{default:[au,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uu(r){let e,n,t,l,o,i;const u=[B(`${We}-clusters`),{applyToClusters:!0},{paint:{"circle-color":kt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let d=0;d<u.length;d+=1)s=Y(s,u[d]);e=new Ue({props:s}),e.$on("click",r[6]);const a=[B(`${We}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=Y(f,a[d]);t=new hl({props:f});const c=[B(`${We}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":kt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let _={$$slots:{default:[fu]},$$scope:{ctx:r}};for(let d=0;d<c.length;d+=1)_=Y(_,c[d]);return o=new Ue({props:_}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment)},m(d,k){b(e,d,k),p(d,n,k),b(t,d,k),p(d,l,k),b(o,d,k),i=!0},p(d,k){const T=k&2?J(u,[k&0&&te(B(`${We}-clusters`)),u[1],k&0&&{paint:{"circle-color":kt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},k&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(T);const C=k&2?J(a,[k&0&&te(B(`${We}-counts`)),a[1],k&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(C);const S=k&2?J(c,[k&0&&te(B(`${We}-points`)),c[1],c[2],c[3],k&0&&{paint:{"circle-color":kt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},k&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};k&2048&&(S.$$scope={dirty:k,ctx:d}),o.$set(S)},i(d){i||($(e.$$.fragment,d),$(t.$$.fragment,d),$(o.$$.fragment,d),i=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(o.$$.fragment,d),i=!1},d(d){d&&(m(n),m(l)),v(e,d),v(t,d),v(o,d)}}}function cu(r){let e,n,t,l;return e=new Ie({props:{label:"Critical Issues",$$slots:{default:[iu]},$$scope:{ctx:r}}}),t=new At({props:{id:We,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}let We="criticals",kt="red";function $u(r,e,n){let t;De(r,rn,d=>n(9,t=d));let l,o=!0,i=0,u="",s=Wr();async function a(d){try{n(4,s=await Ls(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(k){n(3,u=`The file you loaded is broken: ${k}`)}}function f(d){t.getSource(We).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id,(k,T)=>{k||t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:T})})}function c(d){U[d?"unshift":"push"](()=>{l=d,n(0,l)})}function _(d){o=d,n(1,o)}return[l,o,i,u,s,a,f,c,_]}class pu extends W{constructor(e){super(),z(this,e,$u,cu,G,{})}}function mu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function _u(r){let e;return{c(){e=w("crossing")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function gu(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[_u]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function du(r){let e,n,t;return n=new se({props:{$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function hu(r){let e,n=rr(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=rr(l[3])+"")&&H(t,n)},d(l){l&&m(e)}}}function bu(r){let e,n;return e=new oe({props:{$$slots:{default:[hu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vu(r){let e,n;const t=[B(ct),{sourceLayer:ct},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[bu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ue({props:l}),e.$on("click",yu),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&te(B(ct)),i&0&&{sourceLayer:ct},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function wu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ct,$$slots:{right:[du],default:[mu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>V(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${ct}.pmtiles`,$$slots:{default:[vu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ct="crossings";function rr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function yu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function ku(r,e,n){let t=Q.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Su extends W{constructor(e){super(),z(this,e,ku,wu,G,{})}}function Tu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Cu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ou(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Cu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Au(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ou]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Lu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(i,u){p(i,e,u),y(e,n),y(e,t),y(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&H(o,l)},d(i){i&&m(e)}}}function Iu(r){let e,n;return e=new oe({props:{$$slots:{default:[Lu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nu(r){let e,n;const t=[B($t),{sourceLayer:$t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Iu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&te(B($t)),i&0&&{sourceLayer:$t},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Pu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:$t,$$slots:{right:[Au],default:[Tu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>V(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${$t}.pmtiles`,$$slots:{default:[Nu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let $t="cycle_parking";function Mu(r,e,n){let t=Q.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Eu extends W{constructor(e){super(),z(this,e,Mu,Pu,G,{})}}function Fu(r){let e,n,t,l;return e=new ge({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=O(),t=w(r[2])},m(o,i){b(e,o,i),p(o,n,i),p(o,t,i),l=!0},p(o,i){(!l||i&4)&&H(t,o[2])},i(o){l||($(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){o&&(m(n),m(t)),v(e,o)}}}function Du(r){let e;const n=r[5].default,t=mt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&_t(t,n,l,l[7],e?dt(n,l[7],o,null):gt(l[7]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function ju(r){let e,n,t;return n=new se({props:{$$slots:{default:[Du]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Bu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&H(t,n)},d(l){l&&m(e)}}}function Hu(r){let e,n;return e=new oe({props:{$$slots:{default:[Bu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ru(r){let e,n;const t=[B(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":K(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Hu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Be({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?J(t,[i&1&&te(B(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":K(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Gu(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[ju],default:[Fu]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),U.push(()=>V(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Ru]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],X(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${fe()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Wu(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=Q[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class fn extends W{constructor(e){super(),z(this,e,Wu,Gu,G,{name:0,singularNoun:1,pluralNoun:2})}}function zu(r){let e;return{c(){e=w("hospital")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Uu(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[zu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function qu(r){let e,n;return e=new fn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Vu extends W{constructor(e){super(),z(this,e,null,qu,G,{})}}function Xu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ku(r){let e;return{c(){e=w("railway station")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Yu(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Ku]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Ju(r){let e,n,t;return n=new se({props:{$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Zu(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&H(t,n)},d(l){l&&m(e)}}}function Qu(r){let e,n;return e=new oe({props:{$$slots:{default:[Zu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xu(r){let e,n;const t=[B(Ht),{paint:{"circle-color":r[1],"circle-radius":jt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&te(B(Ht)),i&2&&{paint:{"circle-color":o[1],"circle-radius":jt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ec(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ht,$$slots:{right:[Ju],default:[Xu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>V(e,"checked",i)),l=new At({props:{data:`${fe()}/v1/${Ht}.geojson`,$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ht="railway_stations";function tc(r,e,n){let t=Q.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class nc extends W{constructor(e){super(),z(this,e,tc,ec,G,{})}}function rc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function lc(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[rc]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function oc(r){let e,n;return e=new fn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class sc extends W{constructor(e){super(),z(this,e,null,oc,G,{})}}function ic(r){let e;return{c(){e=w("sports pitches")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ac(r){let e;return{c(){e=w("sports centres")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fc(r){let e,n,t,l,o,i,u,s,a;return t=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[ic]},$$scope:{ctx:r}}}),o=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[ac]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function uc(r){let e,n;return e=new fn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class cc extends W{constructor(e){super(),z(this,e,null,uc,G,{})}}function $c(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function pc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function mc(r){let e;return{c(){e=w("methodology")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function _c(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new q({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[pc]},$$scope:{ctx:r}}}),o=new q({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[mc]},$$scope:{ctx:r}}}),f=new Ee({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=O(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=O(),h(f.$$.fragment)},m(_,d){p(_,e,d),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(_,u,d),p(_,s,d),p(_,a,d),b(f,_,d),c=!0},p(_,d){const k={};d&64&&(k.$$scope={dirty:d,ctx:_}),t.$set(k);const T={};d&64&&(T.$$scope={dirty:d,ctx:_}),o.$set(T)},i(_){c||($(t.$$.fragment,_),$(o.$$.fragment,_),$(f.$$.fragment,_),c=!0)},o(_){g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),c=!1},d(_){_&&(m(e),m(u),m(s),m(a)),v(t),v(o),v(f,_)}}}function gc(r){let e,n,t;return n=new se({props:{$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function lr(r){let e,n;return e=new qe({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,_,d,k=r[5].pedal_cycles_2022.toLocaleString()+"",T,C,S,L,N,j=r[5].method+"",I;return{c(){e=A("h2"),t=w(n),l=O(),o=A("p"),i=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(s),f=O(),c=A("p"),_=w("Total pedal cycles (2022 AADF): "),d=A("b"),T=w(k),C=O(),S=A("p"),L=w("Count method: "),N=A("b"),I=w(j)},m(F,P){p(F,e,P),y(e,t),p(F,l,P),p(F,o,P),y(o,i),y(o,u),y(u,a),p(F,f,P),p(F,c,P),y(c,_),y(c,d),y(d,T),p(F,C,P),p(F,S,P),y(S,L),y(S,N),y(N,I)},p(F,P){P&32&&n!==(n=F[5].location+"")&&H(t,n),P&32&&s!==(s=F[5].motor_vehicles_2022.toLocaleString()+"")&&H(a,s),P&32&&k!==(k=F[5].pedal_cycles_2022.toLocaleString()+"")&&H(T,k),P&32&&j!==(j=F[5].method+"")&&H(I,j)},d(F){F&&(m(e),m(l),m(o),m(f),m(c),m(C),m(S))}}}function hc(r){let e,n;return e=new oe({props:{$$slots:{default:[dc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bc(r){let e,n;const t=[B(pt),{sourceLayer:pt},{paint:{"circle-color":$e(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[hc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ue({props:l}),e.$on("click",wc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?J(t,[i&0&&te(B(pt)),i&0&&{sourceLayer:pt},i&6&&{paint:{"circle-color":$e(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:pt,$$slots:{right:[gc],default:[$c]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),U.push(()=>V(e,"checked",u));let a=r[0]&&lr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${pt}.pmtiles`,$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=lr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let pt="vehicle_counts";function wc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function yc(r,e,n){let t=Q.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class kc extends W{constructor(e){super(),z(this,e,yc,vc,G,{})}}function Sc(r){let e,n,t,l,o,i,u,s;return e=new sc({}),t=new Vu({}),o=new cc({}),u=new nc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),p(a,l,f),b(o,a,f),p(a,i,f),b(u,a,f),s=!0},i(a){s||($(e.$$.fragment,a),$(t.$$.fragment,a),$(o.$$.fragment,a),$(u.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),s=!1},d(a){a&&(m(n),m(l),m(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Tc(r){let e,n;return e=new Lt({props:{small:!0,$$slots:{default:[Sc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cc(r){let e,n,t,l,o,i,u,s,a,f;return e=new $f({}),t=new yf({}),o=new ef({}),u=new Eu({}),a=new Su({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(c,_){b(e,c,_),p(c,n,_),b(t,c,_),p(c,l,_),b(o,c,_),p(c,i,_),b(u,c,_),p(c,s,_),b(a,c,_),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Oc(r){let e,n;return e=new Lt({props:{small:!0,$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ac(r){let e,n,t,l,o,i,u,s,a,f;return e=new wa({}),t=new Ra({}),o=new Ai({}),u=new Ji({}),a=new ua({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(c,_){b(e,c,_),p(c,n,_),b(t,c,_),p(c,l,_),b(o,c,_),p(c,i,_),b(u,c,_),p(c,s,_),b(a,c,_),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Lc(r){let e,n;return e=new Lt({props:{small:!0,$$slots:{default:[Ac]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ic(r){let e,n,t,l;return e=new di({}),t=new Hi({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Nc(r){let e,n,t,l;return e=new ru({}),t=new Xf({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Pc(r){let e,n,t,l,o=nn()=="Private (development)",i,u,s;e=new kc({}),t=new Df({});let a=o&&Nc();return u=new La({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),a&&a.c(),i=O(),h(u.$$.fragment)},m(f,c){b(e,f,c),p(f,n,c),b(t,f,c),p(f,l,c),a&&a.m(f,c),p(f,i,c),b(u,f,c),s=!0},p:ne,i(f){s||($(e.$$.fragment,f),$(t.$$.fragment,f),$(a),$(u.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(a),g(u.$$.fragment,f),s=!1},d(f){f&&(m(n),m(l),m(i)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function Mc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new Yr({props:u}),U.push(()=>V(e,"enabled",i)),l=new nl({}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],X(()=>n=!1)),e.$set(f)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Ec(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,k,T,C;return e=new pu({}),t=new Ie({props:{label:"Trip generators",$$slots:{default:[Tc]},$$scope:{ctx:r}}}),o=new Ie({props:{label:"Existing infrastructure",$$slots:{default:[Oc]},$$scope:{ctx:r}}}),u=new Ie({props:{label:"Boundaries",$$slots:{default:[Lc]},$$scope:{ctx:r}}}),a=new Ie({props:{label:"Census",$$slots:{default:[Ic]},$$scope:{ctx:r}}}),c=new Ie({props:{label:"Other",$$slots:{default:[Pc]},$$scope:{ctx:r}}}),d=new Ie({props:{label:"Tools",$$slots:{default:[Mc]},$$scope:{ctx:r}}}),T=new Kr({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment),f=O(),h(c.$$.fragment),_=O(),h(d.$$.fragment),k=O(),h(T.$$.fragment)},m(S,L){b(e,S,L),p(S,n,L),b(t,S,L),p(S,l,L),b(o,S,L),p(S,i,L),b(u,S,L),p(S,s,L),b(a,S,L),p(S,f,L),b(c,S,L),p(S,_,L),b(d,S,L),p(S,k,L),b(T,S,L),C=!0},p(S,L){const N={};L&8&&(N.$$scope={dirty:L,ctx:S}),t.$set(N);const j={};L&8&&(j.$$scope={dirty:L,ctx:S}),o.$set(j);const I={};L&8&&(I.$$scope={dirty:L,ctx:S}),u.$set(I);const F={};L&8&&(F.$$scope={dirty:L,ctx:S}),a.$set(F);const P={};L&8&&(P.$$scope={dirty:L,ctx:S}),c.$set(P);const M={};L&9&&(M.$$scope={dirty:L,ctx:S}),d.$set(M);const E={};L&2&&(E.disabled=!S[1]),T.$set(E)},i(S){C||($(e.$$.fragment,S),$(t.$$.fragment,S),$(o.$$.fragment,S),$(u.$$.fragment,S),$(a.$$.fragment,S),$(c.$$.fragment,S),$(d.$$.fragment,S),$(T.$$.fragment,S),C=!0)},o(S){g(e.$$.fragment,S),g(t.$$.fragment,S),g(o.$$.fragment,S),g(u.$$.fragment,S),g(a.$$.fragment,S),g(c.$$.fragment,S),g(d.$$.fragment,S),g(T.$$.fragment,S),C=!1},d(S){S&&(m(n),m(l),m(i),m(s),m(f),m(_),m(k)),v(e,S),v(t,S),v(o,S),v(u,S),v(a,S),v(c,S),v(d,S),v(T,S)}}}function Fc(r){let e,n;return e=new Ie({props:{label:"Layers",open:!0,$$slots:{default:[Ec]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Dc(r,e,n){let t,l;De(r,pn,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&pn.set(!t)},[t,l,o]}class jc extends W{constructor(e){super(),z(this,e,Dc,Fc,G,{})}}function Bc(r,e,n){let{loadFile:t}=e;return ln(async()=>{let o=await(await fetch(`${sn()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class Hc extends W{constructor(e){super(),z(this,e,Bc,null,G,{loadFile:0})}}function Rc(r){let e;return{c(){e=w("Show on map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Gc(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Wc(r){let e,n,t,l;return e=new Kt({props:{$$slots:{default:[Rc]},$$scope:{ctx:r}}}),e.$on("click",r[3]),t=new Kt({props:{disabled:r[1],title:r[2],$$slots:{default:[Gc]},$$scope:{ctx:r}}}),t.$on("click",r[4]),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&256&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function zc(r){let e,n,t=r[0].authority_or_region+"",l,o,i,u,s=r[0].capital_scheme_id+"",a,f,c,_,d=r[0].funding_programme+"",k,T,C,S;return C=new Jr({props:{$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=O(),i=A("p"),u=w("Capital scheme ID: "),a=w(s),f=O(),c=A("p"),_=w("Funding programme: "),k=w(d),T=O(),h(C.$$.fragment)},m(L,N){p(L,e,N),y(e,n),y(e,l),p(L,o,N),p(L,i,N),y(i,u),y(i,a),p(L,f,N),p(L,c,N),y(c,_),y(c,k),p(L,T,N),b(C,L,N),S=!0},p(L,N){(!S||N&1)&&t!==(t=L[0].authority_or_region+"")&&H(l,t),(!S||N&1)&&s!==(s=L[0].capital_scheme_id+"")&&H(a,s),(!S||N&1)&&d!==(d=L[0].funding_programme+"")&&H(k,d);const j={};N&256&&(j.$$scope={dirty:N,ctx:L}),C.$set(j)},i(L){S||($(C.$$.fragment,L),S=!0)},o(L){g(C.$$.fragment,L),S=!1},d(L){L&&(m(e),m(o),m(i),m(f),m(c),m(T)),v(C,L)}}}function Uc(r){let e,n;return e=new Ie({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[zc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),l&257&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qc(r,e,n){let t;De(r,rn,c=>n(7,t=c));let{schemesGj:l}=e,{scheme:o}=e,{authorityNames:i}=e,u=!i.has(o.authority_or_region),s=u?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function a(){let c={type:"FeatureCollection",features:l.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(zr(c),{padding:20,animate:!1})}function f(){let c={type:"FeatureCollection",features:l.features.filter(d=>d.properties.scheme_reference==o.scheme_reference)},_=o.authority_or_region;window.localStorage.setItem(_,JSON.stringify(c)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return r.$$set=c=>{"schemesGj"in c&&n(5,l=c.schemesGj),"scheme"in c&&n(0,o=c.scheme),"authorityNames"in c&&n(6,i=c.authorityNames)},[o,u,s,a,f,l,i]}class Vc extends W{constructor(e){super(),z(this,e,qc,Uc,G,{schemesGj:5,scheme:0,authorityNames:6})}}const Xc=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function or(r){let e,n,t=mn(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,i){p(o,e,i),y(e,n),y(e,l)},p(o,i){i&1&&t!==(t=mn(o[0].length_meters)+"")&&H(l,t)},d(o){o&&m(e)}}}function sr(r){let e,n=r[1](r[0].description)+"";return{c(){e=A("p")},m(t,l){p(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&m(e)}}}function Kc(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,_=r[0].scheme_reference+"",d,k,T,C=r[0].length_meters&&or(r),S=r[0].description&&sr(r);return{c(){e=A("div"),n=A("h2"),t=new on(!1),o=w(" ("),u=w(i),s=w(")"),a=O(),f=A("p"),c=w("Scheme reference: "),d=w(_),k=O(),C&&C.c(),T=O(),S&&S.c(),t.a=o,Se(e,"max-width","30vw")},m(L,N){p(L,e,N),y(e,n),t.m(l,n),y(n,o),y(n,u),y(n,s),y(e,a),y(e,f),y(f,c),y(f,d),y(e,k),C&&C.m(e,null),y(e,T),S&&S.m(e,null)},p(L,[N]){N&1&&l!==(l=L[1](L[0].name)+"")&&t.p(l),N&1&&i!==(i=L[0].intervention_type+"")&&H(u,i),N&1&&_!==(_=L[0].scheme_reference+"")&&H(d,_),L[0].length_meters?C?C.p(L,N):(C=or(L),C.c(),C.m(e,T)):C&&(C.d(1),C=null),L[0].description?S?S.p(L,N):(S=sr(L),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:ne,o:ne,d(L){L&&m(e),C&&C.d(),S&&S.d()}}}function Yc(r,e,n){let{props:t}=e,{filterText:l}=e;function o(i){return l?i.replace(new RegExp(l,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,l=i.filterText)},[t,o,l]}class un extends W{constructor(e){super(),z(this,e,Yc,Kc,G,{props:0,filterText:2})}}function Jc(r){let e,n;return e=new un({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zc(r){let e,n;return e=new oe({props:{$$slots:{default:[Jc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qc(r){let e,n;return e=new un({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xc(r){let e,n;return e=new oe({props:{$$slots:{default:[Qc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function e$(r){let e,n;return e=new un({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function t$(r){let e,n;return e=new oe({props:{$$slots:{default:[e$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function n$(r){let e,n,t,l,o,i,u,s,a,f;const c=[B("interventions-points"),{filter:["all",_n,r[4],r[5]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[3],"circle-radius":jt,"circle-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let _={$$slots:{default:[Zc]},$$scope:{ctx:r}};for(let I=0;I<c.length;I+=1)_=Y(_,c[I]);e=new Ue({props:_});const d=[B("interventions-lines"),{filter:["all",gn,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[3],"line-width":yt,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let k={$$slots:{default:[xc]},$$scope:{ctx:r}};for(let I=0;I<d.length;I+=1)k=Y(k,d[I]);t=new ue({props:k});const T=[B("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*yt,"circle-opacity":0,"circle-stroke-color":Zr.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let C={};for(let I=0;I<T.length;I+=1)C=Y(C,T[I]);o=new Ue({props:C});const S=[B("interventions-polygons"),{filter:["all",Pt,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[3],"fill-opacity":K(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let L={$$slots:{default:[t$]},$$scope:{ctx:r}};for(let I=0;I<S.length;I+=1)L=Y(L,S[I]);u=new Be({props:L});const N=[B("interventions-polygons-outlines"),{filter:["all",Pt,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*yt}},{layout:{visibility:r[0]?"visible":"none"}}];let j={};for(let I=0;I<N.length;I+=1)j=Y(j,N[I]);return a=new ue({props:j}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(I,F){b(e,I,F),p(I,n,F),b(t,I,F),p(I,l,F),b(o,I,F),p(I,i,F),b(u,I,F),p(I,s,F),b(a,I,F),f=!0},p(I,F){const P=F&57?J(c,[c[0],F&48&&{filter:["all",_n,I[4],I[5]]},c[2],c[3],F&8&&{paint:{"circle-color":I[3],"circle-radius":jt,"circle-opacity":K(1,.5)}},F&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};F&258&&(P.$$scope={dirty:F,ctx:I}),e.$set(P);const M=F&25?J(d,[d[0],F&16&&{filter:["all",gn,I[4]]},d[2],d[3],F&8&&{paint:{"line-color":I[3],"line-width":yt,"line-opacity":K(1,.5)}},F&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};F&258&&(M.$$scope={dirty:F,ctx:I}),t.$set(M);const E=F&1?J(T,[T[0],T[1],T[2],{layout:{visibility:I[0]?"visible":"none"}}]):{};o.$set(E);const R=F&25?J(S,[S[0],F&16&&{filter:["all",Pt,I[4]]},S[2],S[3],F&8&&{paint:{"fill-color":I[3],"fill-opacity":K(.2,.5)}},F&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};F&258&&(R.$$scope={dirty:F,ctx:I}),u.$set(R);const ee=F&25?J(N,[N[0],F&16&&{filter:["all",Pt,I[4]]},F&8&&{paint:{"line-color":I[3],"line-opacity":.5,"line-width":.7*yt}},F&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};a.$set(ee)},i(I){f||($(e.$$.fragment,I),$(t.$$.fragment,I),$(o.$$.fragment,I),$(u.$$.fragment,I),$(a.$$.fragment,I),f=!0)},o(I){g(e.$$.fragment,I),g(t.$$.fragment,I),g(o.$$.fragment,I),g(u.$$.fragment,I),g(a.$$.fragment,I),f=!1},d(I){I&&(m(n),m(l),m(i),m(s)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I)}}}function r$(r){let e,n;return e=new At({props:{data:r[2],$$slots:{default:[n$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function l$(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,{filterText:i}=e,u=wr("v1");const s=["!=","hide_while_editing",!0],a=["!=","endpoint",!0];return r.$$set=f=>{"schemesGj"in f&&n(6,l=f.schemesGj),"showSchemes"in f&&n(0,o=f.showSchemes),"filterText"in f&&n(1,i=f.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Ur(l))},[o,i,t,u,s,a,l]}class o$ extends W{constructor(e){super(),z(this,e,l$,r$,G,{schemesGj:6,showSchemes:0,filterText:1})}}function ir(r,e,n){const t=r.slice();return t[14]=e[n],t}function s$(r){let e,n;return e=new Hc({props:{loadFile:r[8]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ar(r){let e,n,t,l,o,i;function u(_){r[9](_)}function s(_){r[10](_)}function a(_){r[11](_)}function f(_){r[12](_)}let c={schemes:r[2]};return r[1]!==void 0&&(c.schemesGj=r[1]),r[3]!==void 0&&(c.schemesToBeShown=r[3]),r[4]!==void 0&&(c.filterText=r[4]),r[5]!==void 0&&(c.show=r[5]),e=new Rs({props:c}),U.push(()=>V(e,"schemesGj",u)),U.push(()=>V(e,"schemesToBeShown",s)),U.push(()=>V(e,"filterText",a)),U.push(()=>V(e,"show",f)),{c(){h(e.$$.fragment)},m(_,d){b(e,_,d),i=!0},p(_,d){const k={};d&4&&(k.schemes=_[2]),!n&&d&2&&(n=!0,k.schemesGj=_[1],X(()=>n=!1)),!t&&d&8&&(t=!0,k.schemesToBeShown=_[3],X(()=>t=!1)),!l&&d&16&&(l=!0,k.filterText=_[4],X(()=>l=!1)),!o&&d&32&&(o=!0,k.show=_[5],X(()=>o=!1)),e.$set(k)},i(_){i||($(e.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),i=!1},d(_){v(e,_)}}}function fr(r){let e,n;return e=new Vc({props:{schemesGj:r[1],scheme:r[14],authorityNames:r[7]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[14]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ur(r){let e=r[3].has(r[14].scheme_reference),n,t,l=e&&fr(r);return{c(){l&&l.c(),n=Te()},m(o,i){l&&l.m(o,i),p(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[14].scheme_reference)),e?l?(l.p(o,i),i&12&&$(l,1)):(l=fr(o),l.c(),$(l,1),l.m(n.parentNode,n)):l&&(ie(),g(l,1,1,()=>{l=null}),ae())},i(o){t||($(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l&&l.d(o)}}}function i$(r){let e,n,t,l,o,i,u,s,a,f,c=nn()=="Private (development)",_,d,k,T,C,S,L,N;o=new el({props:{boundaryGeojson:r[1]}}),u=new Tl({}),a=new qr({});let j=c&&s$(r);d=new tl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[8]}}),T=new vr({props:{errorMessage:r[0]}});let I=r[2].size>0&&ar(r),F=ze(r[2].values()),P=[];for(let E=0;E<F.length;E+=1)P[E]=ur(ir(r,F,E));const M=E=>g(P[E],1,1,()=>{P[E]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment),f=O(),j&&j.c(),_=O(),h(d.$$.fragment),k=O(),h(T.$$.fragment),C=O(),I&&I.c(),S=O(),L=A("ul");for(let E=0;E<P.length;E+=1)P[E].c();Se(n,"display","flex"),Se(n,"justify-content","space-between"),x(e,"slot","sidebar"),x(e,"class","govuk-prose")},m(E,R){p(E,e,R),y(e,n),y(n,t),y(n,l),b(o,n,null),y(e,i),b(u,e,null),y(e,s),b(a,e,null),y(e,f),j&&j.m(e,null),y(e,_),b(d,e,null),y(e,k),b(T,e,null),y(e,C),I&&I.m(e,null),y(e,S),y(e,L);for(let ee=0;ee<P.length;ee+=1)P[ee]&&P[ee].m(L,null);N=!0},p(E,R){const ee={};R&2&&(ee.boundaryGeojson=E[1]),o.$set(ee),c&&j.p(E,R);const D={};if(R&1&&(D.errorMessage=E[0]),T.$set(D),E[2].size>0?I?(I.p(E,R),R&4&&$(I,1)):(I=ar(E),I.c(),$(I,1),I.m(e,S)):I&&(ie(),g(I,1,1,()=>{I=null}),ae()),R&142){F=ze(E[2].values());let Z;for(Z=0;Z<F.length;Z+=1){const ve=ir(E,F,Z);P[Z]?(P[Z].p(ve,R),$(P[Z],1)):(P[Z]=ur(ve),P[Z].c(),$(P[Z],1),P[Z].m(L,null))}for(ie(),Z=F.length;Z<P.length;Z+=1)M(Z);ae()}},i(E){if(!N){$(o.$$.fragment,E),$(u.$$.fragment,E),$(a.$$.fragment,E),$(j),$(d.$$.fragment,E),$(T.$$.fragment,E),$(I);for(let R=0;R<F.length;R+=1)$(P[R]);N=!0}},o(E){g(o.$$.fragment,E),g(u.$$.fragment,E),g(a.$$.fragment,E),g(j),g(d.$$.fragment,E),g(T.$$.fragment,E),g(I),P=P.filter(Boolean);for(let R=0;R<P.length;R+=1)g(P[R]);N=!1},d(E){E&&m(e),v(o),v(u),v(a),j&&j.d(),v(d),v(T),I&&I.d(),Dt(P,E)}}}function a$(r){let e,n,t,l,o,i,u;return e=new Qr({}),t=new o$({props:{schemesGj:r[1],filterText:r[4],showSchemes:r[5]}}),i=new jc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),o=A("div"),h(i.$$.fragment),x(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),p(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&2&&(f.schemesGj=s[1]),a&16&&(f.filterText=s[4]),a&32&&(f.showSchemes=s[5]),t.$set(f)},i(s){u||($(e.$$.fragment,s),$(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),v(i)}}}function f$(r){let e,n,t;return n=new Vr({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[a$]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),x(e,"slot","main")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.style=l[6]),o&131122&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function u$(r){let e,n;return e=new rl({props:{$$slots:{main:[f$],sidebar:[i$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&131199&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function c$(r,e,n){let t;De(r,dn,S=>n(6,t=S)),ln(()=>{Xr()});let l=new Set(Xc);const o=new URLSearchParams(window.location.search);dn.set(o.get("style")||"dataviz");let i="",u={type:"FeatureCollection",features:[],schemes:{}},s=new Map,a=new Set,f="",c=!0;function _(S){try{n(1,u=JSON.parse(S)),n(2,s=Os(u)),n(0,i="")}catch(L){n(0,i=`The file you loaded is broken: ${L}`)}}function d(S){u=S,n(1,u)}function k(S){a=S,n(3,a)}function T(S){f=S,n(4,f)}function C(S){c=S,n(5,c)}return[i,u,s,a,f,c,t,l,_,d,k,T,C]}class $$ extends W{constructor(e){super(),z(this,e,c$,u$,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new $$({target:document.getElementById("app")});
