import{S as W,i as z,s as G,ap as Wr,b as q,c as X,e as A,d as O,g as h,h as U,j as p,m as b,w as Tt,l as K,t as $,n as g,o as m,p as v,aL as mt,aM as _t,aN as gt,aO as dt,aP as mr,aQ as Wt,aR as be,Z as Te,_ as ie,$ as ae,aS as _r,q as De,ai as gr,aT as dr,aU as Dt,aV as hr,aW as br,H as ne,aX as $n,aY as zr,u as w,k as y,f as rn,aj as Ur,B as ln,ax as vr,r as on,F as wr,a as Jt,v as jt,C as H,aK as V,aA as ze,az as Se,aB as Bt,aZ as fe,O as B,a_ as $e,A as Y,P as J,Y as Z,a$ as te,G as Lt,D as pn,aq as qr,ay as Vr,R as kr,b0 as sn,b1 as an,E as yr,x as Xr,b2 as mn,N as Kr,aF as _n,U as Yr,V as gn,W as dn,X as Mt,aJ as hn,L as Jr,M as Zr,y as Qr}from"./index-14eadd57.js";import{m as Ct,C as Ie,h as It,i as le,L as ue,c as Ht,k as xr,S as el,B as tl,a as kt,b as nl,G as rl}from"./StreetViewTool-bf4e4ef2.js";import{L as ll,s as bn,c as Sr,a as ge,C as Ue,Z as ol}from"./schemas-d2e701a0.js";import{a as Be,F as sl}from"./Popup-2ff7389e.js";import{P as oe}from"./Popup-9fa5d4d1.js";import{L as il,a as al}from"./LineMeasureController-90d761d7.js";const fl="/atip/defra/assets/help-d011708a.svg";function ul(r){let e,n;const t=r[1].default,l=mt(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),U(e,"class","govuk-prose")},m(o,i){p(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&_t(l,t,o,o[4],n?dt(t,o[4],i,null):gt(o[4]),null)},i(o){n||($(l,o),n=!0)},o(o){g(l,o),n=!1},d(o){o&&m(e),l&&l.d(o)}}}function cl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[ul]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Wr({props:a}),q.push(()=>X(t,"open",s)),{c(){e=A("button"),e.innerHTML=`<img src="${fl}" title="Help" alt="Help"/>`,n=O(),h(t.$$.fragment),U(e,"class","svelte-7d9d1l")},m(f,c){p(f,e,c),p(f,n,c),b(t,f,c),o=!0,i||(u=Tt(e,"click",r[2]),i=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,_.open=f[0],K(()=>l=!1)),t.$set(_)},i(f){o||($(t.$$.fragment,f),o=!0)},o(f){g(t.$$.fragment,f),o=!1},d(f){f&&(m(e),m(n)),v(t,f),i=!1,u()}}}function $l(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class se extends W{constructor(e){super(),z(this,e,$l,cl,G,{})}}function pl(r){let e;const n=r[8].default,t=mt(n,r,r[15],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&32768)&&_t(t,n,l,l[15],e?dt(n,l[15],o,null):gt(l[15]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function ml(r){let e,n;return e=new mr({props:{id:r[0],type:"raster",source:r[1],beforeId:r[2],beforeLayerType:r[3],paint:r[4],layout:r[5],minzoom:r[6],maxzoom:r[7],$$slots:{default:[pl]},$$scope:{ctx:r}}}),e.$on("click",r[9]),e.$on("dblclick",r[10]),e.$on("contextmenu",r[11]),e.$on("mouseenter",r[12]),e.$on("mousemove",r[13]),e.$on("mouseleave",r[14]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.id=t[0]),l&2&&(o.source=t[1]),l&4&&(o.beforeId=t[2]),l&8&&(o.beforeLayerType=t[3]),l&16&&(o.paint=t[4]),l&32&&(o.layout=t[5]),l&64&&(o.minzoom=t[6]),l&128&&(o.maxzoom=t[7]),l&32768&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _l(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=Wt("raster-layer")}=e,{source:i=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:s=void 0}=e,{paint:a}=e,{layout:f=void 0}=e,{minzoom:c=void 0}=e,{maxzoom:_=void 0}=e;function d(P){be.call(this,r,P)}function S(P){be.call(this,r,P)}function T(P){be.call(this,r,P)}function C(P){be.call(this,r,P)}function k(P){be.call(this,r,P)}function L(P){be.call(this,r,P)}return r.$$set=P=>{"id"in P&&n(0,o=P.id),"source"in P&&n(1,i=P.source),"beforeId"in P&&n(2,u=P.beforeId),"beforeLayerType"in P&&n(3,s=P.beforeLayerType),"paint"in P&&n(4,a=P.paint),"layout"in P&&n(5,f=P.layout),"minzoom"in P&&n(6,c=P.minzoom),"maxzoom"in P&&n(7,_=P.maxzoom),"$$scope"in P&&n(15,l=P.$$scope)},[o,i,u,s,a,f,c,_,t,d,S,T,C,k,L,l]}class gl extends W{constructor(e){super(),z(this,e,_l,ml,G,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}function vn(r){let e=r[0],n,t,l=wn(r);return{c(){l.c(),n=Te()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&G(e,e=o[0])?(ie(),g(l,1,1,ne),ae(),l=wn(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l.d(o)}}}function wn(r){let e;const n=r[10].default,t=mt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&_t(t,n,l,l[9],e?dt(n,l[9],o,null):gt(l[9]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function dl(r){let e,n,t=r[0]&&vn(r);return{c(){t&&t.c(),e=Te()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=vn(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),g(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){g(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function hl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=Wt("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=_r();De(r,f,S=>n(8,l=S)),De(r,c,S=>n(0,t=S));let _,d=!0;return gr(()=>{t&&_&&l&&(dr(f,t,_),Dt(c,t=null,t),n(6,_=void 0))}),r.$$set=S=>{"id"in S&&n(3,u=S.id),"tiles"in S&&n(4,s=S.tiles),"tileSize"in S&&n(5,a=S.tileSize),"$$scope"in S&&n(9,i=S.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Dt(c,t=u,t),hr(l,t,br({type:"raster",tiles:s,tileSize:a}),S=>l&&S===t,()=>{t&&(n(6,_=l==null?void 0:l.getSource(t)),n(7,d=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,_=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&_&&(d?n(7,d=!1):_.setTiles(s))},[t,f,c,u,s,a,_,d,l,i,o]}class bl extends W{constructor(e){super(),z(this,e,hl,dl,G,{id:3,tiles:4,tileSize:5})}}function vl(r){let e;const n=r[16].default,t=mt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&_t(t,n,l,l[24],e?dt(n,l[24],o,null):gt(l[24]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function wl(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[vl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new mr({props:o}),q.push(()=>X(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],K(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function kl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=Wt("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:S=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:k=!1}=e,{hovered:L=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:j=!0}=e;function I(D){L=D,n(0,L)}function F(D){be.call(this,r,D)}function N(D){be.call(this,r,D)}function M(D){be.call(this,r,D)}function E(D){be.call(this,r,D)}function R(D){be.call(this,r,D)}function ee(D){be.call(this,r,D)}return r.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,i=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,s=D.beforeId),"beforeLayerType"in D&&n(5,a=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,_=D.filter),"applyToClusters"in D&&n(9,d=D.applyToClusters),"minzoom"in D&&n(10,S=D.minzoom),"maxzoom"in D&&n(11,T=D.maxzoom),"hoverCursor"in D&&n(12,C=D.hoverCursor),"manageHoverState"in D&&n(13,k=D.manageHoverState),"hovered"in D&&n(0,L=D.hovered),"eventsIfTopMost"in D&&n(14,P=D.eventsIfTopMost),"interactive"in D&&n(15,j=D.interactive),"$$scope"in D&&n(24,l=D.$$scope)},[L,o,i,u,s,a,f,c,_,d,S,T,C,k,P,j,t,I,F,N,M,E,R,ee,l]}class yl extends W{constructor(e){super(),z(this,e,kl,wl,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function kn(r){let e=r[0],n,t,l=yn(r);return{c(){l.c(),n=Te()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&G(e,e=o[0])?(ie(),g(l,1,1,ne),ae(),l=yn(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l.d(o)}}}function yn(r){let e;const n=r[9].default,t=mt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&_t(t,n,l,l[8],e?dt(n,l[8],o,null):gt(l[8]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Sl(r){let e,n,t=r[0]&&kn(r);return{c(){t&&t.c(),e=Te()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=kn(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),g(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){g(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function Tl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=Wt("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!$n.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let S=new zr;$n.addProtocol("pmtiles",S.tile)}const{map:c,self:_}=_r();De(r,c,S=>n(7,l=S)),De(r,_,S=>n(0,t=S));let d;return gr(()=>{t&&l&&(dr(c,t,d),Dt(_,t=null,t),d=void 0)}),r.$$set=S=>{"id"in S&&n(3,u=S.id),"url"in S&&n(4,s=S.url),"tiles"in S&&n(5,a=S.tiles),"promoteId"in S&&n(6,f=S.promoteId),"$$scope"in S&&n(8,i=S.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Dt(_,t=u,t),hr(l,t,br({type:"vector",url:s,tiles:a,promoteId:f}),S=>l&&S===t,()=>{t&&(d=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{d=l==null?void 0:l.getSource(u)}))},[t,c,_,u,s,a,f,l,i,o]}class ce extends W{constructor(e){super(),z(this,e,Tl,Sl,G,{id:3,url:4,tiles:5,promoteId:6})}}function Cl(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ol(r){let e,n,t,l,o=r[0]=="Private (development)"&&Cl();return{c(){o&&o.c(),e=O(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated.",t=O(),l=A("p"),l.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,u){o&&o.m(i,u),p(i,e,u),p(i,n,u),p(i,t,u),p(i,l,u)},p:ne,d(i){i&&(m(e),m(n),m(t),m(l)),o&&o.d(i)}}}function Al(r){let e,n,t,l,o,i;return o=new se({props:{$$slots:{default:[Ol]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=O(),h(o.$$.fragment)},m(u,s){p(u,e,s),y(e,n),y(e,t),y(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||($(o.$$.fragment,u),i=!0)},o(u){g(o.$$.fragment,u),i=!1},d(u){u&&m(e),v(o)}}}function Ll(r){return[rn()]}class Il extends W{constructor(e){super(),z(this,e,Ll,Al,G,{})}}const Pl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var me=Uint8Array,Ze=Uint16Array,Tr=Uint32Array,Cr=new me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Or=new me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Nl=new me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ar=function(r,e){for(var n=new Ze(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Tr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Lr=Ar(Cr,2),Ir=Lr[0],Ml=Lr[1];Ir[28]=258,Ml[258]=28;var El=Ar(Or,0),Fl=El[0],Zt=new Ze(32768);for(var re=0;re<32768;++re){var Re=(re&43690)>>>1|(re&21845)<<1;Re=(Re&52428)>>>2|(Re&13107)<<2,Re=(Re&61680)>>>4|(Re&3855)<<4,Zt[re]=((Re&65280)>>>8|(Re&255)<<8)>>>1}var St=function(r,e,n){for(var t=r.length,l=0,o=new Ze(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Ze(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Ze(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[Zt[c]>>>s]=a}else for(u=new Ze(t),l=0;l<t;++l)r[l]&&(u[l]=Zt[i[r[l]-1]++]>>>15-r[l]);return u},Pt=new me(288);for(var re=0;re<144;++re)Pt[re]=8;for(var re=144;re<256;++re)Pt[re]=9;for(var re=256;re<280;++re)Pt[re]=7;for(var re=280;re<288;++re)Pt[re]=8;var Pr=new me(32);for(var re=0;re<32;++re)Pr[re]=5;var Dl=St(Pt,9,1),jl=St(Pr,5,1),zt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},we=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Ut=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Bl=function(r){return(r+7)/8|0},fn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Ze:r.BYTES_PER_ELEMENT==4?Tr:me)(n-e);return t.set(r.subarray(e,n)),t},Hl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ke=function(r,e,n){var t=new Error(e||Hl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,ke),!n)throw t;return t},Rl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new me(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new me(t*3));var i=function(tt){var Ke=e.length;if(tt>Ke){var nt=new me(Math.max(Ke*2,tt));nt.set(e),e=nt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,_=n.m,d=n.n,S=t*8;do{if(!f){u=we(r,s,1);var T=we(r,s+1,3);if(s+=3,T)if(T==1)f=Dl,c=jl,_=9,d=5;else if(T==2){var P=we(r,s,31)+257,j=we(r,s+10,15)+4,I=P+we(r,s+5,31)+1;s+=14;for(var F=new me(I),N=new me(19),M=0;M<j;++M)N[Nl[M]]=we(r,s+M*3,7);s+=j*3;for(var E=zt(N),R=(1<<E)-1,ee=St(N,E,1),M=0;M<I;){var D=ee[we(r,s,R)];s+=D&15;var C=D>>>4;if(C<16)F[M++]=C;else{var Q=0,ve=0;for(C==16?(ve=3+we(r,s,3),s+=2,Q=F[M-1]):C==17?(ve=3+we(r,s,7),s+=3):C==18&&(ve=11+we(r,s,127),s+=7);ve--;)F[M++]=Q}}var ht=F.subarray(0,P),de=F.subarray(P);_=zt(ht),d=zt(de),f=St(ht,_,1),c=St(de,d,1)}else ke(1);else{var C=Bl(s)+4,k=r[C-4]|r[C-3]<<8,L=C+k;if(L>t){o&&ke(0);break}l&&i(a+k),e.set(r.subarray(C,L),a),n.b=a+=k,n.p=s=L*8,n.f=u;continue}if(s>S){o&&ke(0);break}}l&&i(a+131072);for(var xe=(1<<_)-1,bt=(1<<d)-1,et=s;;et=s){var Q=f[Ut(r,s)&xe],pe=Q>>>4;if(s+=Q&15,s>S){o&&ke(0);break}if(Q||ke(2),pe<256)e[a++]=pe;else if(pe==256){et=s,f=null;break}else{var vt=pe-254;if(pe>264){var M=pe-257,Fe=Cr[M];vt=we(r,s,(1<<Fe)-1)+Ir[M],s+=Fe}var He=c[Ut(r,s)&bt],Xe=He>>>4;He||ke(3),s+=He&15;var de=Fl[Xe];if(Xe>3){var Fe=Or[Xe];de+=Ut(r,s)&(1<<Fe)-1,s+=Fe}if(s>S){o&&ke(0);break}l&&i(a+131072);for(var wt=a+vt;a<wt;a+=4)e[a]=e[a-de],e[a+1]=e[a+1-de],e[a+2]=e[a+2-de],e[a+3]=e[a+3-de];a=wt}}n.l=f,n.p=et,n.b=a,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=d)}while(!u);return a==e.length?e:fn(e,0,a)},Gl=new me(0),Ne=function(r,e){return r[e]|r[e+1]<<8},ye=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},qt=function(r,e){return ye(r,e)+ye(r,e+4)*4294967296};function Wl(r,e){return Rl(r,e)}var Qt=typeof TextDecoder<"u"&&new TextDecoder,zl=0;try{Qt.decode(Gl,{stream:!0}),zl=1}catch{}var Ul=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,fn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Nr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(Qt)return Qt.decode(r);var l=Ul(r),o=l[0],i=l[1];return i.length&&ke(8),o}}var ql=function(r,e){return e+30+Ne(r,e+26)+Ne(r,e+28)},Vl=function(r,e,n){var t=Ne(r,e+28),l=Nr(r.subarray(e+46,e+46+t),!(Ne(r,e+8)&2048)),o=e+46+t,i=ye(r,e+20),u=n&&i==4294967295?Xl(r,o):[i,ye(r,e+24),ye(r,e+42)],s=u[0],a=u[1],f=u[2];return[Ne(r,e+10),s,a,l,o+Ne(r,e+30)+Ne(r,e+32),f]},Xl=function(r,e){for(;Ne(r,e)!=1;e+=4+Ne(r,e+2));return[qt(r,e+12),qt(r,e+4),qt(r,e+20)]};function Kl(r,e){for(var n={},t=r.length-22;ye(r,t)!=101010256;--t)(!t||r.length-t>65558)&&ke(13);var l=Ne(r,t+8);if(!l)return{};var o=ye(r,t+16),i=o==4294967295||l==65535;if(i){var u=ye(r,t-12);i=ye(r,u)==101075792,i&&(l=ye(r,u+32),o=ye(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=Vl(r,o,i),c=f[0],_=f[1],d=f[2],S=f[3],T=f[4],C=f[5],k=ql(r,C);o=T,(!s||s({name:S,size:_,originalSize:d,compression:c}))&&(c?c==8?n[S]=Wl(r.subarray(k,k+_),new me(d)):ke(14,"unknown compression type "+c):n[S]=fn(r,k,k+_))}return n}function Yl(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Vt):Vt(r)}function Vt(r){var e=new Uint8Array(r),n=Kl(e);return Promise.resolve(Jl(n))}function Jl(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Nr(r[l])}return e}function Me(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Qe(t)===e)return t;n++}}function Nt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Qe(l)===e&&n.push(l),t++}return n}function Rt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Qe(l)===e&&n(l,t):n(l,t),t++}}function Zl(r,e,n){var t=[];return Rt(r,e,function(l,o){t.push(n(l,o))}),t}var Ql=/.+\:/;function Qe(r){return r.tagName.replace(Ql,"")}function Mr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Qe(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Mr(r.childNodes[t]),t++;return e+="</"+Qe(r)+">",e}function xl(r){var e=r.documentElement,n=Me(e,"sheetData"),t=[];return Rt(n,"row",function(l){Rt(l,"c",function(o){t.push(o)})}),t}function eo(r,e){return Me(e,"v")}function to(r,e){if(e.firstChild&&Qe(e.firstChild)==="is"&&e.firstChild.firstChild&&Qe(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function no(r){var e=r.documentElement,n=Me(e,"dimension");if(n)return n.getAttribute("ref")}function ro(r){var e=r.documentElement,n=Me(e,"cellStyleXfs");return n?Nt(n,"xf"):[]}function lo(r){var e=r.documentElement,n=Me(e,"cellXfs");return n?Nt(n,"xf"):[]}function oo(r){var e=r.documentElement,n=Me(e,"numFmts");return n?Nt(n,"numFmt"):[]}function so(r){var e=r.documentElement;return Zl(e,"si",function(n){var t=Me(n,"t");if(t)return t.textContent;var l="";return Rt(n,"r",function(o){l+=Me(o,"t").textContent}),l})}function io(r){var e=r.documentElement;return Me(e,"workbookPr")}function ao(r){var e=r.documentElement;return Nt(e,"Relationship")}function fo(r){var e=r.documentElement,n=Me(e,"sheets");return Nt(n,"sheet")}function uo(r,e){var n=e.createDocument(r),t={},l=io(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return fo(n).forEach(o),t}function co(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Xt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Xt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Xt(u);break}};return ao(n).forEach(l),t}function Xt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Sn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Tn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sn(Object(n),!0).forEach(function(t){$o(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function $o(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function po(r,e){if(!r)return{};var n=e.createDocument(r),t=ro(n).map(Kt),l=oo(n).map(mo).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Tn(Tn({},t[u.xfId]),Kt(u,l)):Kt(u,l)};return lo(n).map(o)}function mo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Kt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function _o(r,e){return r?so(e.createDocument(r)):[]}function Er(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function go(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ho(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ho(r,e){if(r){if(typeof r=="string")return Cn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(r,e)}}function Cn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function bo(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(vo.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&yo(l.numberFormat.template))return!0}}var vo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],wo=/^\[\$-414\]/,ko=/;@$/;function yo(r){r=r.toLowerCase(),r=r.replace(wo,""),r=r.replace(ko,"");for(var e=r.split(/\W+/),n=go(e),t;!(t=n()).done;){var l=t.value;if(So.indexOf(l)<0)return!1}return!0}var So=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function To(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Yt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Yt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Yt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Co(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var _=Number(r);if(isNaN(_))throw new Error('Invalid "numeric" cell value: '.concat(r));r=_,bo(r,o(),i,a)&&(r=Er(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Co(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Yt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Oo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Ao(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function Lo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Oo.indexOf(r[n]),n++;return e}function Fr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Lo(r[0].trim())]}function Io(r,e,n,t,l,o,i){var u=Fr(r.getAttribute("r")),s=eo(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:To(a,f,{getInlineStringValue:function(){return to(e,r)},getInlineStringXml:function(){return Mr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function Po(r,e,n,t,l,o){var i=xl(r);return i.length===0?[]:i.map(function(u){return Io(u,r,e,n,t,l,o)})}function No(r,e){return Do(r)||Fo(r,e)||Eo(r,e)||Mo()}function Mo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eo(r,e){if(r){if(typeof r=="string")return On(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(r,e)}}function On(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Fo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Do(r){if(Array.isArray(r))return r}function jo(r){var e=no(r);if(e)return e=e.split(":").map(Fr).map(function(n){var t=No(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Bo(r,e,n,t,l,o){var i=e.createDocument(r),u=Po(i,e,n,t,l,o),s=jo(i)||Ao(u);return{cells:u,dimensions:s}}function Ho(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ro(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ro(r,e){if(r){if(typeof r=="string")return An(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(r,e)}}function An(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Go(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=Ho(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Wo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=zo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zo(r,e){if(r){if(typeof r=="string")return Ln(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(r,e)}}function Ln(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Uo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Wo(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function qo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Dr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vo(r,e){return Yo(r)||Ko(r,e)||Dr(r,e)||Xo()}function Xo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dr(r,e){if(r){if(typeof r=="string")return In(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(r,e)}}function In(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ko(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Yo(r){if(Array.isArray(r))return r}function Jo(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Vo(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=qo(t),_;!(_=c()).done;){var d=_.value,S=d.row-1,T=d.column-1;T<i&&S<u&&(s[S][T]=d.value)}var C=e.rowMap;if(C)for(var k=0;k<s.length;)C[k]=k,k++;return s=Go(Uo(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(s=e.transformData(s)),s}function Zo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Qo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qo(r,e){if(r){if(typeof r=="string")return Pn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(r,e)}}function Pn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Nn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function xo(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nn(Object(n),!0).forEach(function(t){es(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function es(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ts(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=xo({sheet:1},n));var t=function(_){if(!r[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return r[_]},l=co(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?_o(t(l.sharedStrings),e):[],i=l.styles?po(t(l.styles),e):{},u=uo(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var s=ns(n.sheet,u.sheets);if(!s||!l.sheets[s])throw rs(n.sheet,u.sheets);var a=Bo(t(l.sheets[s]),e,o,i,u,n),f=Jo(a,n);return n.properties?{data:f,properties:u}:f}function ns(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Zo(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function rs(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function xt(r){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(r)}function Mn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function ls(r,e,n){return e&&Mn(r.prototype,e),n&&Mn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function os(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ss(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ot(r,e)}function is(r){var e=jr();return function(){var t=At(r),l;if(e){var o=At(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return as(this,l)}}function as(r,e){if(e&&(xt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return fs(r)}function fs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function en(r){var e=typeof Map=="function"?new Map:void 0;return en=function(t){if(t===null||!us(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Ft(t,arguments,At(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ot(l,t)},en(r)}function Ft(r,e,n){return jr()?Ft=Reflect.construct:Ft=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Ot(a,i.prototype),a},Ft.apply(null,arguments)}function jr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function us(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ot(r,e){return Ot=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Ot(r,e)}function At(r){return At=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},At(r)}var _e=function(r){ss(n,r);var e=is(n);function n(t){var l;return os(this,n),l=e.call(this,"invalid"),l.reason=t,l}return ls(n)}(en(Error));function cs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new _e("not_a_number")}if(typeof r!="number")throw new _e("not_a_number");if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return r}function $s(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return String(r)}throw new _e("not_a_string")}function ps(r){if(typeof r=="boolean")return r;throw new _e("not_a_boolean")}function ms(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new _e("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");var t=Er(r,n);if(isNaN(t.valueOf()))throw new _e("out_of_bounds");return t}throw new _e("not_a_date")}function _s(r,e){return hs(r)||ds(r,e)||Br(r,e)||gs()}function gs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ds(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function hs(r){if(Array.isArray(r))return r}function tn(r){"@babel/helpers - typeof";return tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(r)}function bs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Br(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Br(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Fn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Dn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fn(Object(n),!0).forEach(function(t){vs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function vs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var jn={isColumnOriented:!1};function ws(r,e,n){n?n=Dn(Dn({},jn),n):n=jn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;Ts(e),l&&(r=Ss(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Hr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var _=bs(a),d;!(d=_()).done;){var S=d.value;S.row=o[S.row-1]+1}return{rows:s,errors:a}}function Hr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var _=f[a],d=r[_],S=tn(d.type)==="object"&&!Array.isArray(d.type),T=e[t.indexOf(_)];T===void 0&&(T=null);var C=void 0,k=void 0,L=void 0;if(S)C=Hr(d.type,e,n,t,l,o);else if(T===null)C=null;else if(Array.isArray(d.type)){var P=!1,j=ys(T).map(function(F){var N=Bn(F,d,o);return N.error&&(C=F,k=N.error,L=N.reason),N.value!==null&&(P=!0),N.value});k||(C=P?j:null)}else{var I=Bn(T,d,o);k=I.error,L=I.reason,C=k?T:I.value}!k&&C===null&&d.required&&(k="required"),k?(k={error:k,row:n+1,column:_,value:C},L&&(k.reason=L),d.type&&(k.type=d.type),l.push(k)):(u&&C!==null&&(u=!1),(C!==null||o.includeNullValues)&&(i[d.prop]=C))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function Bn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=rt(r,e.parse):e.type?t=ks(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function rt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ks(r,e,n){switch(e){case String:return rt(r,$s);case Number:return rt(r,cs);case Date:return rt(r,function(t){return ms(t,{properties:n.properties})});case Boolean:return rt(r,ps);default:if(typeof e=="function")return rt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Rr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Rr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function ys(r){for(var e=[],n=0;n<r.length;){var t=Rr(r,",",n),l=_s(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var Ss=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Ts(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function nn(r){"@babel/helpers - typeof";return nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(r)}function Gr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;nn(o)==="object"&&(o=Object.keys(r[l])[0],i=Gr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var Cs=["schema","map"];function Hn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Et(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hn(Object(n),!0).forEach(function(t){Os(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Os(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function As(r,e){if(r==null)return{};var n=Ls(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Ls(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Is(r,e,n){var t=n.schema,l=n.map,o=As(n,Cs);!t&&l&&(t=Gr(l));var i=ts(r,e,Et(Et({},o),{},{properties:t||o.properties}));return t?ws(i.data,t,Et(Et({},o),{},{properties:i.properties})):i}function Ps(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Yl(r).then(function(n){return Is(n,Pl,e)})}function Ns(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:l.authority_or_region,capital_scheme_id:l.capital_scheme_id,funding_programme:l.funding_programme});r.features=r.features.filter(t=>Ms(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.num_features++,t.properties.funding_programme=l.funding_programme,t.id=n++}return e}function Ms(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Es(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ps(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Ur(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const x={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},je=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Fs(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Ct({props:u}),q.push(()=>X(e,"value",i)),e.$on("change",r[2]),l=new ll({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],K(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Ds(r,e,n){let t;De(r,ln,s=>n(4,t=s));let l="interventionType",o=bn("v1");function i(){let s;l=="interventionType"?(s=Sr("v1"),n(1,o=bn("v1"))):(s=vr(["get","funding_programme"],{ATF2:x.atf2,ATF3:x.atf3,ATF4:x.atf4},"grey"),n(1,o=[["ATF2",x.atf2],["ATF3",x.atf3],["ATF4",x.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class js extends W{constructor(e){super(),z(this,e,Ds,Fs,G,{})}}function Bs(r){let e;return{c(){e=w("Clear")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hs(r){let e,n,t,l,o,i;return t=new Jt({props:{$$slots:{default:[Bs]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=A("input"),n=O(),h(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterText")},m(u,s){p(u,e,s),jt(e,r[0]),p(u,n,s),b(t,u,s),l=!0,o||(i=Tt(e,"input",r[12]),o=!0)},p(u,s){s&1&&e.value!==u[0]&&jt(e,u[0]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||($(t.$$.fragment,u),l=!0)},o(u){g(t.$$.fragment,u),l=!1},d(u){u&&(m(e),m(n)),v(t,u),o=!1,i()}}}function Rs(r){let e,n,t,l,o,i,u,s,a,f;function c(T){r[10](T)}let _={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&(_.value=r[3]),e=new Ct({props:_}),q.push(()=>X(e,"value",c));function d(T){r[11](T)}let S={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(S.value=r[4]),l=new Ct({props:S}),q.push(()=>X(l,"value",d)),u=new wr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Hs]},$$scope:{ctx:r}}}),a=new js({}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(T,C){b(e,T,C),p(T,t,C),b(l,T,C),p(T,i,C),b(u,T,C),p(T,s,C),b(a,T,C),f=!0},p(T,C){const k={};C&32&&(k.choices=T[5]),!n&&C&8&&(n=!0,k.value=T[3],K(()=>n=!1)),e.$set(k);const L={};C&64&&(L.choices=T[6]),!o&&C&16&&(o=!0,L.value=T[4],K(()=>o=!1)),l.$set(L);const P={};C&65537&&(P.$$scope={dirty:C,ctx:T}),u.$set(P)},i(T){f||($(e.$$.fragment,T),$(l.$$.fragment,T),$(u.$$.fragment,T),$(a.$$.fragment,T),f=!0)},o(T){g(e.$$.fragment,T),g(l.$$.fragment,T),g(u.$$.fragment,T),g(a.$$.fragment,T),f=!1},d(T){T&&(m(t),m(i),m(s)),v(e,T),v(l,T),v(u,T),v(a,T)}}}function Gs(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",_,d,S=r[7].other.toLocaleString()+"",T,C;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),_=w(c),d=w(" crossings, "),T=w(S),C=w(`
    other)`)},m(k,L){p(k,e,L),p(k,t,L),p(k,l,L),p(k,i,L),p(k,u,L),p(k,a,L),p(k,f,L),p(k,_,L),p(k,d,L),p(k,T,L),p(k,C,L)},p(k,L){L&2&&n!==(n=k[1].size.toLocaleString()+"")&&H(t,n),L&128&&o!==(o=k[7].route.toLocaleString()+"")&&H(i,o),L&128&&s!==(s=k[7].area.toLocaleString()+"")&&H(a,s),L&128&&c!==(c=k[7].crossing.toLocaleString()+"")&&H(_,c),L&128&&S!==(S=k[7].other.toLocaleString()+"")&&H(T,S)},d(k){k&&(m(e),m(t),m(l),m(i),m(u),m(a),m(f),m(_),m(d),m(T),m(C))}}}function Ws(r){let e,n,t;function l(i){r[14](i)}let o={id:"show-schemes",$$slots:{default:[Gs]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new le({props:o}),q.push(()=>X(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65666&&(s.$$scope={dirty:u,ctx:i}),!n&&u&4&&(n=!0,s.checked=i[2],K(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function zs(r){let e,n,t,l;return e=new Ie({props:{label:"Filters",$$slots:{default:[Rs]},$$scope:{ctx:r}}}),t=new It({props:{small:!0,$$slots:{default:[Ws]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65657&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65670&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Us(r,e,n){let{schemesGj:t}=e,{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,{show:u=!0}=e,s=[],a="",f=[],c="",_={area:0,route:0,crossing:0,other:0};on(()=>{let P=new Set,j=new Set;for(let I of l.values())I.authority_or_region&&P.add(I.authority_or_region),I.funding_programme&&j.add(I.funding_programme);n(5,s=Array.from(P.entries())),s.sort(),n(6,f=Array.from(j.entries())),f.sort()});function d(P,j,I){let F=P.toLowerCase(),N=E=>{var R,ee;if(F&&!((R=E.properties.name)!=null&&R.toLowerCase().includes(F))&&!((ee=E.properties.description)!=null&&ee.toLowerCase().includes(F)))return!1;if(j||I){let D=l.get(E.properties.scheme_reference);if(j&&D.authority_or_region!=j||I&&D.funding_programme!=I)return!1}return!0};n(1,o=new Set(t.features.filter(N).map(E=>E.properties.scheme_reference))),n(7,_={area:0,route:0,crossing:0,other:0});let M=E=>{var R,ee;return!(!o.has(E.properties.scheme_reference)||F&&!((R=E.properties.name)!=null&&R.toLowerCase().includes(F))&&!((ee=E.properties.description)!=null&&ee.toLowerCase().includes(F)))};for(let E of t.features)M(E)?(delete E.properties.hide_while_editing,n(7,_[E.properties.intervention_type]++,_)):E.properties.hide_while_editing=!0;n(8,t),n(7,_)}function S(P){a=P,n(3,a)}function T(P){c=P,n(4,c)}function C(){i=this.value,n(0,i)}const k=()=>n(0,i="");function L(P){u=P,n(2,u)}return r.$$set=P=>{"schemesGj"in P&&n(8,t=P.schemesGj),"schemes"in P&&n(9,l=P.schemes),"schemesToBeShown"in P&&n(1,o=P.schemesToBeShown),"filterText"in P&&n(0,i=P.filterText),"show"in P&&n(2,u=P.show)},r.$$.update=()=>{r.$$.dirty&25&&d(i,a,c)},[i,o,u,a,c,s,f,_,t,l,S,T,C,k,L]}class qs extends W{constructor(e){super(),z(this,e,Us,zs,G,{schemesGj:8,schemes:9,schemesToBeShown:1,filterText:0,show:2})}}function Vs(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Xs(r){let e,n,t,l,o;return t=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Vs]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data  Crown copyright and database right
  2023.`)},m(i,u){p(i,e,u),y(e,n),b(t,e,null),y(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||($(t.$$.fragment,i),o=!0)},o(i){g(t.$$.fragment,i),o=!1},d(i){i&&m(e),v(t)}}}class Ee extends W{constructor(e){super(),z(this,e,null,Xs,G,{})}}function Rn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Gn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Wn(r){let e,n;return{c(){e=A("span"),n=w(`
    `),Se(e,"background",r[5]),Se(e,"width","100%"),Se(e,"border","1px solid black")},m(t,l){p(t,e,l),y(e,n)},p(t,l){l&1&&Se(e,"background",t[5])},d(t){t&&m(e)}}}function zn(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&H(t,n)},d(l){l&&m(e)}}}function Ks(r){let e,n,t,l=ze(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Wn(Gn(r,l,s));let i=ze(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=zn(Rn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=O(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();Se(e,"display","flex"),Se(t,"display","flex"),Se(t,"justify-content","space-between")},m(s,a){p(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);p(s,n,a),p(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=ze(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Gn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Wn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=ze(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Rn(s,i,f);u[f]?u[f].p(c,a):(u[f]=zn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:ne,o:ne,d(s){s&&(m(e),m(n),m(t)),Bt(o,s),Bt(u,s)}}}function Ys(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class qe extends W{constructor(e){super(),z(this,e,Ys,Ks,G,{colorScale:0,limits:1})}}function Un(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Js(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Zs(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qs(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xs(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ei(r){let e,n,t,l,o,i,u,s,a,f,c,_;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Zs]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Qs]},$$scope:{ctx:r}}}),f=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[xs]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=O(),s=A("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(d,S){p(d,e,S),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(d,u,S),p(d,s,S),y(s,a),b(f,s,null),y(s,c),_=!0},p(d,S){const T={};S&65536&&(T.$$scope={dirty:S,ctx:d}),t.$set(T);const C={};S&65536&&(C.$$scope={dirty:S,ctx:d}),o.$set(C);const k={};S&65536&&(k.$$scope={dirty:S,ctx:d}),f.$set(k)},i(d){_||($(t.$$.fragment,d),$(o.$$.fragment,d),$(f.$$.fragment,d),_=!0)},o(d){g(t.$$.fragment,d),g(o.$$.fragment,d),g(f.$$.fragment,d),_=!1},d(d){d&&(m(e),m(u),m(s)),v(t),v(o),v(f)}}}function ti(r){let e,n,t;return n=new se({props:{$$slots:{default:[ei]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function qn(r){let e,n;return e=new qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ni(r){let e;return{c(){e=w("Average cars per household")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ri(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function li(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function oi(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function si(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,S;return o=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ri]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[li]},$$scope:{ctx:r}}}),_=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[oi]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=O(),f=A("p"),c=w("License: "),h(_.$$.fragment),d=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(T,C){p(T,e,C),p(T,n,C),p(T,t,C),y(t,l),b(o,t,null),y(t,i),b(u,t,null),y(t,s),p(T,a,C),p(T,f,C),y(f,c),b(_,f,null),y(f,d),S=!0},p(T,C){const k={};C&65536&&(k.$$scope={dirty:C,ctx:T}),o.$set(k);const L={};C&65536&&(L.$$scope={dirty:C,ctx:T}),u.$set(L);const P={};C&65536&&(P.$$scope={dirty:C,ctx:T}),_.$set(P)},i(T){S||($(o.$$.fragment,T),$(u.$$.fragment,T),$(_.$$.fragment,T),S=!0)},o(T){g(o.$$.fragment,T),g(u.$$.fragment,T),g(_.$$.fragment,T),S=!1},d(T){T&&(m(e),m(n),m(t),m(a),m(f)),v(o),v(u),v(_)}}}function ii(r){let e,n,t;return n=new se({props:{$$slots:{default:[si]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Vn(r){let e,n;return e=new qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ai(r){let e;return{c(){e=w("Population density")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fi(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ui(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ci(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[fi]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ui]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=O(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function $i(r){let e,n,t;return n=new se({props:{$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Xn(r){let e,n,t,l;return t=new qe({props:{colorScale:r[4],limits:r[6]().map(vi)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=O(),h(t.$$.fragment)},m(o,i){p(o,e,i),p(o,n,i),b(t,o,i),l=!0},p:ne,i(o){l||($(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),v(t,o)}}}function pi(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){p(a,e,f),y(e,n),y(e,t),y(t,o),y(e,i),y(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&H(o,l),f&8192&&u!==(u=a[14]+"")&&H(s,u)},d(a){a&&m(e)}}}function mi(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=A("b"),s=w(u),a=w(`
          cars`)},m(f,c){p(f,e,c),y(e,n),y(e,l),y(e,o),y(e,i),y(i,s),y(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&H(l,t),c&8200&&u!==(u=f[15]+"")&&H(s,u)},d(f){f&&m(e)}}}function _i(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){p(f,e,c),y(e,n),y(n,l),y(n,o),y(e,i),y(e,s),y(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&H(l,t),c&8192&&u!==(u=f[14]+"")&&H(s,u)},d(f){f&&m(e)}}}function gi(r){Un(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?_i:o[3]=="average_cars_per_household"?mi:pi}let t=n(r),l=t(r);return{c(){l.c(),e=Te()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){Un(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function di(r){let e,n;return e=new oe({props:{$$slots:{default:[gi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hi(r){let e,n,t,l;const o=[B(Ye),{sourceLayer:Ye},{paint:{"fill-color":$e(["get",r[3]],r[6](),r[4]),"fill-opacity":Y(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[di]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i}),e.$on("click",r[5]);const u=[B(`${Ye}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Z(o,[f&0&&te(B(Ye)),f&0&&{sourceLayer:Ye},f&88&&{paint:{"fill-color":$e(["get",a[3]],a[6](),a[4]),"fill-opacity":Y(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&8?Z(u,[f&0&&te(B(`${Ye}-outline`)),u[1],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function bi(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,S;function T(M){r[7](M)}let C={id:"percent_households_with_car",$$slots:{right:[ti],default:[Js]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new le({props:C}),q.push(()=>X(e,"checked",T)),e.$on("change",r[8]);let k=r[3]=="percent_households_with_car"&&qn(r);function L(M){r[9](M)}let P={id:"average_cars_per_household",$$slots:{right:[ii],default:[ni]},$$scope:{ctx:r}};r[1]!==void 0&&(P.checked=r[1]),o=new le({props:P}),q.push(()=>X(o,"checked",L)),o.$on("change",r[10]);let j=r[3]=="average_cars_per_household"&&Vn(r);function I(M){r[11](M)}let F={id:"population_density",$$slots:{right:[$i],default:[ai]},$$scope:{ctx:r}};r[2]!==void 0&&(F.checked=r[2]),a=new le({props:F}),q.push(()=>X(a,"checked",I)),a.$on("change",r[12]);let N=r[3]=="population_density"&&Xn(r);return d=new ce({props:{url:`pmtiles://${fe()}/v1/${Ye}.pmtiles`,$$slots:{default:[hi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),k&&k.c(),l=O(),h(o.$$.fragment),u=O(),j&&j.c(),s=O(),h(a.$$.fragment),c=O(),N&&N.c(),_=O(),h(d.$$.fragment)},m(M,E){b(e,M,E),p(M,t,E),k&&k.m(M,E),p(M,l,E),b(o,M,E),p(M,u,E),j&&j.m(M,E),p(M,s,E),b(a,M,E),p(M,c,E),N&&N.m(M,E),p(M,_,E),b(d,M,E),S=!0},p(M,[E]){const R={};E&65536&&(R.$$scope={dirty:E,ctx:M}),!n&&E&1&&(n=!0,R.checked=M[0],K(()=>n=!1)),e.$set(R),M[3]=="percent_households_with_car"?k?(k.p(M,E),E&8&&$(k,1)):(k=qn(M),k.c(),$(k,1),k.m(l.parentNode,l)):k&&(ie(),g(k,1,1,()=>{k=null}),ae());const ee={};E&65536&&(ee.$$scope={dirty:E,ctx:M}),!i&&E&2&&(i=!0,ee.checked=M[1],K(()=>i=!1)),o.$set(ee),M[3]=="average_cars_per_household"?j?(j.p(M,E),E&8&&$(j,1)):(j=Vn(M),j.c(),$(j,1),j.m(s.parentNode,s)):j&&(ie(),g(j,1,1,()=>{j=null}),ae());const D={};E&65536&&(D.$$scope={dirty:E,ctx:M}),!f&&E&4&&(f=!0,D.checked=M[2],K(()=>f=!1)),a.$set(D),M[3]=="population_density"?N?(N.p(M,E),E&8&&$(N,1)):(N=Xn(M),N.c(),$(N,1),N.m(_.parentNode,_)):N&&(ie(),g(N,1,1,()=>{N=null}),ae());const Q={};E&65544&&(Q.$$scope={dirty:E,ctx:M}),d.$set(Q)},i(M){S||($(e.$$.fragment,M),$(k),$(o.$$.fragment,M),$(j),$(a.$$.fragment,M),$(N),$(d.$$.fragment,M),S=!0)},o(M){g(e.$$.fragment,M),g(k),g(o.$$.fragment,M),g(j),g(a.$$.fragment,M),g(N),g(d.$$.fragment,M),S=!1},d(M){M&&(m(t),m(l),m(u),m(s),m(c),m(_)),v(e,M),k&&k.d(M),v(o,M),j&&j.d(M),v(a,M),N&&N.d(M),v(d,M)}}}let Ye="census_output_areas";const vi=r=>r.toLocaleString();function wi(r,e,n){let t=x.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(C){let k=C.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${k}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${k}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(C){l=C,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function _(C){o=C,n(1,o)}const d=()=>{n(0,l=!1),n(2,i=!1)};function S(C){i=C,n(2,i)}const T=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,_,d,S,T]}class ki extends W{constructor(e){super(),z(this,e,wi,bi,G,{})}}function yi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Si(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ti(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Si]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Ci(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ti]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Oi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&m(e)}}}function Ai(r){let e,n;return e=new oe({props:{$$slots:{default:[Oi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Li(r){let e,n,t,l;const o=[B(lt),{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ai]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i}),e.$on("click",Pi);const u=[B(`${lt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&te(B(lt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?Z(u,[f&0&&te(B(`${lt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Ii(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:lt,$$slots:{right:[Ci],default:[yi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),q.push(()=>X(e,"checked",i)),l=new Lt({props:{data:`${fe()}/v1/${lt}.geojson`,$$slots:{default:[Li]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let lt="combined_authorities";function Pi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ni(r,e,n){let t=x.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Mi extends W{constructor(e){super(),z(this,e,Ni,Ii,G,{})}}function Ei(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Fi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Di(r){let e;return{c(){e=w(`here
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ji(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Fi]},$$scope:{ctx:r}}}),o=new V({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Di]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=O(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function Bi(r){let e,n,t;return n=new se({props:{$$slots:{default:[ji]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Kn(r){let e,n;return e=new qe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hi(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,_=r[4].rank.toLocaleString()+"",d,S;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(i),s=O(),a=A("p"),f=w("Rank: "),c=A("b"),d=w(_),S=w(`
        / 32,844 LSOAs`)},m(T,C){p(T,e,C),y(e,t),y(e,l),y(e,o),y(o,u),p(T,s,C),p(T,a,C),y(a,f),y(a,c),y(c,d),y(a,S)},p(T,C){C&16&&n!==(n=T[4].LSOA11CD+"")&&H(t,n),C&16&&i!==(i=T[4].score+"")&&H(u,i),C&16&&_!==(_=T[4].rank.toLocaleString()+"")&&H(d,_)},d(T){T&&(m(e),m(s),m(a))}}}function Ri(r){let e,n;return e=new oe({props:{$$slots:{default:[Hi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gi(r){let e,n,t,l;const o=[B(Ge),{sourceLayer:Ge},{paint:{"fill-color":$e(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Y(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Ri]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i});const u=[B(`${Ge}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Z(o,[f&0&&te(B(Ge)),f&0&&{sourceLayer:Ge},f&6&&{paint:{"fill-color":$e(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Y(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?Z(u,[f&0&&te(B(`${Ge}-outline`)),u[1],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Wi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:Ge,$$slots:{right:[Bi],default:[Ei]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),q.push(()=>X(e,"checked",u));let a=r[0]&&Kn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Ge}.pmtiles`,$$slots:{default:[Gi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=Kn(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Ge="imd";function zi(r,e,n){let t=x.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Ui extends W{constructor(e){super(),z(this,e,zi,Wi,G,{})}}function qi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Vi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Xi(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Vi]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Ki(r){let e,n,t;return n=new se({props:{$$slots:{default:[Xi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Yi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&m(e)}}}function Ji(r){let e,n;return e=new oe({props:{$$slots:{default:[Yi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zi(r){let e,n,t,l;const o=[B(ot),{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ji]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i}),e.$on("click",xi);const u=[B(`${ot}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&te(B(ot)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?Z(u,[f&0&&te(B(`${ot}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Qi(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ot,$$slots:{right:[Ki],default:[qi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),q.push(()=>X(e,"checked",i)),l=new Lt({props:{data:`${fe()}/v1/${ot}.geojson`,$$slots:{default:[Zi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ot="local_authority_districts";function xi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function ea(r,e,n){let t=x.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ta extends W{constructor(e){super(),z(this,e,ea,Qi,G,{})}}function na(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function ra(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function la(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function oa(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function sa(r){let e;return{c(){e=w("this map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ia(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function aa(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,S,T,C,k,L,P,j,I,F;return t=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ra]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[la]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[oa]},$$scope:{ctx:r}}}),d=new V({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[sa]},$$scope:{ctx:r}}}),L=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ia]},$$scope:{ctx:r}}}),I=new Ee({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=O(),f=A("p"),c=A("strong"),_=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),S=w(" to get more details."),T=O(),C=A("p"),k=w("Data from ONS Geography via "),h(L.$$.fragment),P=w(", as of November 2022."),j=O(),h(I.$$.fragment)},m(N,M){p(N,e,M),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),b(u,e,null),y(e,s),p(N,a,M),p(N,f,M),y(f,c),y(c,_),b(d,c,null),y(c,S),p(N,T,M),p(N,C,M),y(C,k),b(L,C,null),y(C,P),p(N,j,M),b(I,N,M),F=!0},p(N,M){const E={};M&16&&(E.$$scope={dirty:M,ctx:N}),t.$set(E);const R={};M&16&&(R.$$scope={dirty:M,ctx:N}),o.$set(R);const ee={};M&16&&(ee.$$scope={dirty:M,ctx:N}),u.$set(ee);const D={};M&16&&(D.$$scope={dirty:M,ctx:N}),d.$set(D);const Q={};M&16&&(Q.$$scope={dirty:M,ctx:N}),L.$set(Q)},i(N){F||($(t.$$.fragment,N),$(o.$$.fragment,N),$(u.$$.fragment,N),$(d.$$.fragment,N),$(L.$$.fragment,N),$(I.$$.fragment,N),F=!0)},o(N){g(t.$$.fragment,N),g(o.$$.fragment,N),g(u.$$.fragment,N),g(d.$$.fragment,N),g(L.$$.fragment,N),g(I.$$.fragment,N),F=!1},d(N){N&&(m(e),m(a),m(f),m(T),m(C),m(j)),v(t),v(o),v(u),v(d),v(L),v(I,N)}}}function fa(r){let e,n,t;return n=new se({props:{$$slots:{default:[aa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ua(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&m(e)}}}function ca(r){let e,n;return e=new oe({props:{$$slots:{default:[ua,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $a(r){let e,n,t,l;const o=[B(Oe),{sourceLayer:Oe},{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[ca]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i});const u=[B(`${Oe}-outline`),{sourceLayer:Oe},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&te(B(Oe)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?Z(u,[f&0&&te(B(`${Oe}-outline`)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function pa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Oe,$$slots:{right:[fa],default:[na]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),q.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Oe}.pmtiles`,$$slots:{default:[$a]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Oe="local_planning_authorities";function ma(r,e,n){let t=x.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class _a extends W{constructor(e){super(),z(this,e,ma,pa,G,{})}}function ga(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function da(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ha(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[da]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function ba(r){let e,n,t;return n=new se({props:{$$slots:{default:[ha]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function va(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&H(t,n)},d(l){l&&m(e)}}}function wa(r){let e,n;return e=new oe({props:{$$slots:{default:[va,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ka(r){let e,n,t,l;const o=[B(Ae),{sourceLayer:Ae},{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[wa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i}),e.$on("click",Sa);const u=[B(`${Ae}-outline`),{sourceLayer:Ae},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&te(B(Ae)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?Z(u,[f&0&&te(B(`${Ae}-outline`)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function ya(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ae,$$slots:{right:[ba],default:[ga]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),q.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ae}.pmtiles`,$$slots:{default:[ka]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ae="parliamentary_constituencies";function Sa(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ta(r,e,n){let t=x.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ca extends W{constructor(e){super(),z(this,e,Ta,ya,G,{})}}function Oa(r){let e;return{c(){e=w("Pollution")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Aa(r){let e,n,t,l;return t=new Ee({}),{c(){e=A("p"),e.textContent="TODO",n=O(),h(t.$$.fragment)},m(o,i){p(o,e,i),p(o,n,i),b(t,o,i),l=!0},p:ne,i(o){l||($(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),v(t,o)}}}function La(r){let e,n,t;return n=new se({props:{$$slots:{default:[Aa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Yn(r){let e,n,t,l,o,i,u,s,a,f,c,_,d;function S(C){r[4](C)}let T={label:"Pollutant",id:"pollutant",choices:[["NOx_viridis","NO2 (Nitrogen dioxide)"],["PM25_viridis","PM2.5 (Particulate matter < 2.5 microns)"],["PM10_viridis","PM10 (Particulate matter < 10 microns)"]]};return r[2]!==void 0&&(T.value=r[2]),e=new Ct({props:T}),q.push(()=>X(e,"value",S)),{c(){h(e.$$.fragment),t=O(),l=A("div"),o=A("label"),i=w(`Opacity
      `),u=A("input"),s=O(),a=A("img"),U(u,"type","range"),U(u,"min","0"),U(u,"max","100"),pn(a.src,f=Zn(r[2]))||U(a,"src",f)},m(C,k){b(e,C,k),p(C,t,k),p(C,l,k),y(l,o),y(o,i),y(o,u),jt(u,r[1]),p(C,s,k),p(C,a,k),c=!0,_||(d=[Tt(u,"change",r[5]),Tt(u,"input",r[5])],_=!0)},p(C,k){const L={};!n&&k&4&&(n=!0,L.value=C[2],K(()=>n=!1)),e.$set(L),k&2&&jt(u,C[1]),(!c||k&4&&!pn(a.src,f=Zn(C[2])))&&U(a,"src",f)},i(C){c||($(e.$$.fragment,C),c=!0)},o(C){g(e.$$.fragment,C),c=!1},d(C){C&&(m(t),m(l),m(s),m(a)),v(e,C),_=!1,qr(d)}}}function Ia(r){let e,n;const t=[B("pollution"),{paint:{"raster-opacity":r[1]/100}},{layout:{visibility:r[0]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new gl({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Z(t,[t[0],i&2&&{paint:{"raster-opacity":o[1]/100}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Pa(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:"pollution",$$slots:{right:[La],default:[Oa]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),q.push(()=>X(e,"checked",u));let a=r[0]&&Yn(r);return o=new bl({props:{tiles:[Jn(r[2])],tileSize:256,$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=Yn(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&4&&(d.tiles=[Jn(f[2])]),c&67&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}function Jn(r){let e=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:{NOx_viridis:"21",PM25_viridis:"20",PM10_viridis:"21"}[r]}).toString();return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2021/${r}/MapServer/WMSServer?bbox={bbox-epsg-3857}&${e}`}function Zn(r){let e=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:{NOx_viridis:"21",PM25_viridis:"20",PM10_viridis:"21"}[r]}).toString();return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2021/${r}/MapServer/WMSServer?${e}`}function Na(r,e,n){let t=!1,l=50,o="PM25_viridis";function i(a){t=a,n(0,t)}function u(a){o=a,n(2,o)}function s(){l=Vr(this.value),n(1,l)}return[t,l,o,i,u,s]}class Ma extends W{constructor(e){super(),z(this,e,Na,Pa,G,{})}}function Ea(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Fa(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Da(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Fa]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function ja(r){let e,n,t;return n=new se({props:{$$slots:{default:[Da]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Ba(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&m(e)}}}function Ha(r){let e,n;return e=new oe({props:{$$slots:{default:[Ba,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ra(r){let e,n,t,l;const o=[B(Le),{sourceLayer:Le},{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ha]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i}),e.$on("click",Wa);const u=[B(`${Le}-outline`),{sourceLayer:Le},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&te(B(Le)),f&0&&{sourceLayer:Le},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?Z(u,[f&0&&te(B(`${Le}-outline`)),f&0&&{sourceLayer:Le},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Ga(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Le,$$slots:{right:[ja],default:[Ea]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),q.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Le}.pmtiles`,$$slots:{default:[Ra]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Le="wards";function Wa(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function za(r,e,n){let t=x.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ua extends W{constructor(e){super(),z(this,e,za,Ga,G,{})}}function qa(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Va(r){let e,n,t,l;return t=new V({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[qa]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){p(o,e,i),y(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||($(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&m(e),v(t)}}}class Ve extends W{constructor(e){super(),z(this,e,null,Va,G,{})}}function Xa(r){let e,n,t;return e=new ge({props:{color:x.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ka(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ya(r){let e,n,t,l,o,i,u,s,a;return o=new V({props:{href:"https://gtfs.org",$$slots:{default:[Ka]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),h(s.$$.fragment)},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),y(t,l),b(o,t,null),y(t,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||($(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(u)),v(o),v(s,f)}}}function Ja(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ya]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Za(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qa(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xa(r){let e;function n(o,i){return o[2].has_bus_lane?Qa:Za}let t=n(r),l=t(r);return{c(){l.c(),e=Te()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function ef(r){let e,n;return e=new oe({props:{$$slots:{default:[xa,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tf(r){let e,n;const t=[B(st),{sourceLayer:st},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],x.bus_route_with_lane,x.bus_route_without_lane],"line-width":5,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[ef]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Z(t,[i&0&&te(B(st)),i&0&&{sourceLayer:st},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function nf(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:st,$$slots:{right:[Ja],default:[Xa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),q.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${st}.pmtiles`,$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let st="bus_routes";function rf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class lf extends W{constructor(e){super(),z(this,e,rf,nf,G,{})}}function Qn(r){const e=pf(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function xn(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function of(r){let e;return{c(){e=w("Cycle paths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function sf(r){let e,n,t,l,o,i,u,s;return u=new Ve({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=O(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=O(),h(u.$$.fragment)},m(a,f){p(a,e,f),p(a,n,f),p(a,t,f),p(a,l,f),p(a,o,f),p(a,i,f),b(u,a,f),s=!0},p:ne,i(a){s||($(u.$$.fragment,a),s=!0)},o(a){g(u.$$.fragment,a),s=!1},d(a){a&&(m(e),m(n),m(t),m(l),m(o),m(i)),v(u,a)}}}function af(r){let e,n,t;return n=new se({props:{$$slots:{default:[sf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function er(r){let e,n,t=ze(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=tr(xn(r,t,i));const o=i=>g(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Te()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);p(i,e,u),n=!0},p(i,u){if(u&2){t=ze(i[1]);let s;for(s=0;s<t.length;s+=1){const a=xn(i,t,s);l[s]?(l[s].p(a,u),$(l[s],1)):(l[s]=tr(a),l[s].c(),$(l[s],1),l[s].m(e.parentNode,e))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)$(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(i){i&&m(e),Bt(l,i)}}}function tr(r){let e,n,t,l=r[7]+"",o,i,u;return n=new ge({props:{color:r[8]}}),{c(){e=A("div"),h(n.$$.fragment),t=O(),o=w(l),i=O()},m(s,a){p(s,e,a),b(n,e,null),y(e,t),y(e,o),y(e,i),u=!0},p:ne,i(s){u||($(n.$$.fragment,s),u=!0)},o(s){g(n.$$.fragment,s),u=!1},d(s){s&&m(e),v(n)}}}function ff(r){Qn(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,_,d=r[6]+"",S;return{c(){e=A("h2"),t=w(n),l=O(),o=A("p"),i=w("Direction: "),u=A("b"),a=O(),f=A("p"),c=w("Width: "),_=A("b"),S=w(d)},m(T,C){p(T,e,C),y(e,t),p(T,l,C),p(T,o,C),y(o,i),y(o,u),u.innerHTML=s,p(T,a,C),p(T,f,C),y(f,c),y(f,_),y(_,S)},p(T,C){Qn(T),C&8&&n!==(n=T[4]+"")&&H(t,n),C&8&&s!==(s=T[5]+"")&&(u.innerHTML=s),C&8&&d!==(d=T[6]+"")&&H(S,d)},d(T){T&&(m(e),m(l),m(o),m(a),m(f))}}}function uf(r){let e,n;return e=new oe({props:{$$slots:{default:[ff,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cf(r){let e,n;const t=[B(it),{sourceLayer:it},{paint:{"line-color":vr(["get","kind"],{track:x.cycle_paths.track,lane:x.cycle_paths.lane,shared_use_segregated:x.cycle_paths.shared_use_segregated,shared_use_unsegregated:x.cycle_paths.shared_use_unsegregated},"red"),"line-width":je,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[uf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),e.$on("click",mf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Z(t,[i&0&&te(B(it)),i&0&&{sourceLayer:it},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function $f(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:it,$$slots:{right:[af],default:[of]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),q.push(()=>X(e,"checked",u));let a=r[0]&&er(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${it}.pmtiles`,$$slots:{default:[cf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=er(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&2049&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let it="cycle_paths";function pf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function mf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function _f(r,e,n){let t=[["Separated tracks",x.cycle_paths.track],["Unprotected lanes",x.cycle_paths.lane],["Shared-use (segregated)",x.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",x.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class gf extends W{constructor(e){super(),z(this,e,_f,$f,G,{})}}function df(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function hf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function bf(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[hf]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function vf(r){let e,n,t;return n=new se({props:{$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function wf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&H(t,n)},d(l){l&&m(e)}}}function kf(r){let e,n;return e=new oe({props:{$$slots:{default:[wf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yf(r){let e,n;const t=[B(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[kf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Z(t,[i&0&&te(B(at)),i&0&&{sourceLayer:at},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Y(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Sf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:at,$$slots:{right:[vf],default:[df]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),q.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${at}.pmtiles`,$$slots:{default:[yf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let at="mrn";function Tf(r,e,n){let t=x.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Cf extends W{constructor(e){super(),z(this,e,Tf,Sf,G,{})}}function Of(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Af(r){let e;return{c(){e=w("the PCT website")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Lf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function If(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new V({props:{href:"https://www.pct.bike",$$slots:{default:[Af]},$$scope:{ctx:r}}}),a=new V({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Lf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=O(),o=A("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(_,d){p(_,e,d),p(_,n,d),p(_,t,d),p(_,l,d),p(_,o,d),y(o,i),b(u,o,null),y(o,s),b(a,o,null),y(o,f),c=!0},p(_,d){const S={};d&1024&&(S.$$scope={dirty:d,ctx:_}),u.$set(S);const T={};d&1024&&(T.$$scope={dirty:d,ctx:_}),a.$set(T)},i(_){c||($(u.$$.fragment,_),$(a.$$.fragment,_),c=!0)},o(_){g(u.$$.fragment,_),g(a.$$.fragment,_),c=!1},d(_){_&&(m(e),m(n),m(t),m(l),m(o)),v(u),v(a)}}}function Pf(r){let e,n,t;return n=new se({props:{$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function nr(r){let e,n,t,l,o,i,u,s;e=new qe({props:{colorScale:r[3],limits:r[4]}});function a(d){r[7](d)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new kr({props:f}),q.push(()=>X(t,"value",a));function c(d){r[8](d)}let _={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(_.value=r[1]),i=new Ct({props:_}),q.push(()=>X(i,"value",c)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(i.$$.fragment)},m(d,S){b(e,d,S),p(d,n,S),b(t,d,S),p(d,o,S),b(i,d,S),s=!0},p(d,S){const T={};!l&&S&1&&(l=!0,T.value=d[0],K(()=>l=!1)),t.$set(T);const C={};!u&&S&2&&(u=!0,C.value=d[1],K(()=>u=!1)),i.$set(C)},i(d){s||($(e.$$.fragment,d),$(t.$$.fragment,d),$(i.$$.fragment,d),s=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(i.$$.fragment,d),s=!1},d(d){d&&(m(n),m(o)),v(e,d),v(t,d),v(i,d)}}}function Nf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new sn(!1),t=Te(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Mf(r){let e,n;return e=new oe({props:{$$slots:{default:[Nf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ef(r){let e,n;const t=[B(Pe),{sourceLayer:Pe},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":je,"line-opacity":Y(1,.5)}},{layout:{visibility:r[2]&&r[0]==Pe?"visible":"none"}}];let l={$$slots:{default:[Mf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Z(t,[i&0&&te(B(Pe)),i&0&&{sourceLayer:Pe},i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":je,"line-opacity":Y(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Pe?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ff(r){let e,n=r[5](r[9])+"",t;return{c(){e=new sn(!1),t=Te(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Df(r){let e,n;return e=new oe({props:{$$slots:{default:[Ff,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jf(r){let e,n;const t=[B(Je),{sourceLayer:Je},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":je,"line-opacity":Y(1,.5)}},{layout:{visibility:r[2]&&r[0]==Je?"visible":"none"}}];let l={$$slots:{default:[Df]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Z(t,[i&0&&te(B(Je)),i&0&&{sourceLayer:Je},t[2],t[3],i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":je,"line-opacity":Y(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Je?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Bf(r){let e,n,t,l,o,i,u,s;function a(_){r[6](_)}let f={id:Pe,$$slots:{right:[Pf],default:[Of]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new le({props:f}),q.push(()=>X(e,"checked",a));let c=r[2]&&nr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Pe}.pmtiles`,$$slots:{default:[Ef]},$$scope:{ctx:r}}}),u=new ce({props:{url:`pmtiles://${fe()}/v1/${Je}.pmtiles`,$$slots:{default:[jf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),c&&c.c(),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment)},m(_,d){b(e,_,d),p(_,t,d),c&&c.m(_,d),p(_,l,d),b(o,_,d),p(_,i,d),b(u,_,d),s=!0},p(_,[d]){const S={};d&1024&&(S.$$scope={dirty:d,ctx:_}),!n&&d&4&&(n=!0,S.checked=_[2],K(()=>n=!1)),e.$set(S),_[2]?c?(c.p(_,d),d&4&&$(c,1)):(c=nr(_),c.c(),$(c,1),c.m(l.parentNode,l)):c&&(ie(),g(c,1,1,()=>{c=null}),ae());const T={};d&1031&&(T.$$scope={dirty:d,ctx:_}),o.$set(T);const C={};d&1031&&(C.$$scope={dirty:d,ctx:_}),u.$set(C)},i(_){s||($(e.$$.fragment,_),$(c),$(o.$$.fragment,_),$(u.$$.fragment,_),s=!0)},o(_){g(e.$$.fragment,_),g(c),g(o.$$.fragment,_),g(u.$$.fragment,_),s=!1},d(_){_&&(m(t),m(l),m(i)),v(e,_),c&&c.d(_),v(o,_),v(u,_)}}}let Pe="pct_commute",Je="pct_school";function Hf(r,e,n){let t=x.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Pe,i="baseline",u=!1;function s(_){let d=_.baseline,S=_.gov_target,T=_.go_dutch,C=`<h2>Trip purpose: ${o==Pe?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)C+=`<p>Government target (2025): <b>${S.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let k=(S/d).toFixed(1),L=(T/d).toFixed(1);C+=`<p>Government target (2025): ${S.toLocaleString()} (<b>${k}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${L}x</b> of baseline)</p>`}return C}function a(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){i=_,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class Rf extends W{constructor(e){super(),z(this,e,Hf,Bf,G,{})}}function Gf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Wf(r){let e;return{c(){e=w("Basemap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function zf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Uf(r){let e,n,t,l,o,i,u,s,a,f,c,_;return t=new V({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Wf]},$$scope:{ctx:r}}}),f=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=O(),s=A("p"),a=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(d,S){p(d,e,S),y(e,n),b(t,e,null),y(e,l),p(d,o,S),p(d,i,S),p(d,u,S),p(d,s,S),y(s,a),b(f,s,null),y(s,c),_=!0},p(d,S){const T={};S&256&&(T.$$scope={dirty:S,ctx:d}),t.$set(T);const C={};S&256&&(C.$$scope={dirty:S,ctx:d}),f.$set(C)},i(d){_||($(t.$$.fragment,d),$(f.$$.fragment,d),_=!0)},o(d){g(t.$$.fragment,d),g(f.$$.fragment,d),_=!1},d(d){d&&(m(e),m(o),m(i),m(u),m(s)),v(t),v(f)}}}function qf(r){let e,n,t;return n=new se({props:{$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function rr(r){let e,n,t,l,o;e=new qe({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new kr({props:u}),q.push(()=>X(t,"value",i)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],K(()=>l=!1)),t.$set(f)},i(s){o||($(e.$$.fragment,s),$(t.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),o=!1},d(s){s&&m(n),v(e,s),v(t,s)}}}function Vf(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,_=r[4][r[7].highest_description]+"",d,S;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=O(),u=A("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),d=w(_),S=w(")")},m(T,C){p(T,e,C),y(e,n),y(e,l),y(e,o),p(T,i,C),p(T,u,C),y(u,s),y(u,f),y(u,c),y(u,d),y(u,S)},p(T,C){C&128&&t!==(t=T[7].indicative_mph+"")&&H(l,t),C&128&&a!==(a=T[7].highest_mph+"")&&H(f,a),C&128&&_!==(_=T[4][T[7].highest_description]+"")&&H(d,_)},d(T){T&&(m(e),m(i),m(u))}}}function Xf(r){let e,n;return e=new oe({props:{$$slots:{default:[Vf,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kf(r){let e,n;const t=[B(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[0]],r[3],r[2]),"line-width":je,"line-opacity":Y(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[Xf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Z(t,[i&0&&te(B(ft)),i&0&&{sourceLayer:ft},t[2],t[3],i&13&&{paint:{"line-color":$e(["get",o[0]],o[3],o[2]),"line-width":je,"line-opacity":Y(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yf(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ft,$$slots:{right:[qf],default:[Gf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),q.push(()=>X(e,"checked",u));let a=r[1]&&rr(r);return o=new ce({props:{url:`pmtiles://${an()}/v1/${ft}.pmtiles`,$$slots:{default:[Kf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],K(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&$(a,1)):(a=rr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ft="road_speeds";function Jf(r,e,n){let t=x.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class Zf extends W{constructor(e){super(),z(this,e,Jf,Yf,G,{})}}function Qf(r){let e;return{c(){e=w("OS Road widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function eu(r){let e,n,t,l,o,i,u,s,a;return u=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=O(),o=A("p"),i=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),p(f,l,c),p(f,o,c),y(o,i),b(u,o,null),y(o,s),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||($(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(l),m(o)),v(u)}}}function tu(r){let e,n,t;return n=new se({props:{$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function lr(r){let e,n;return e=new qe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nu(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",_,d;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),i=w(`
        meters`),u=O(),s=A("p"),a=w("Minimum width: "),f=A("b"),_=w(c),d=w(`
        meters`)},m(S,T){p(S,e,T),y(e,n),y(e,t),y(t,o),y(e,i),p(S,u,T),p(S,s,T),y(s,a),y(s,f),y(f,_),y(s,d)},p(S,T){T&16&&l!==(l=S[4].average+"")&&H(o,l),T&16&&c!==(c=S[4].minimum+"")&&H(_,c)},d(S){S&&(m(e),m(u),m(s))}}}function ru(r){let e,n;return e=new oe({props:{$$slots:{default:[nu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lu(r){let e,n;const t=[B(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get","average"],r[2],r[1]),"line-width":je,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[ru]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Z(t,[i&0&&te(B(ut)),i&0&&{sourceLayer:ut},t[2],t[3],i&6&&{paint:{"line-color":$e(["get","average"],o[2],o[1]),"line-width":je,"line-opacity":Y(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ou(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ut,$$slots:{right:[tu],default:[Qf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),q.push(()=>X(e,"checked",u));let a=r[0]&&lr(r);return o=new ce({props:{url:`pmtiles://${an()}/v1/${ut}.pmtiles`,$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=lr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="road_widths";function su(r,e,n){let t=x.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class iu extends W{constructor(e){super(),z(this,e,su,ou,G,{})}}function au(r){let e,n,t;return{c(){e=A("input"),U(e,"class","govuk-file-upload"),U(e,"id","load-criticals"),U(e,"type","file")},m(l,o){p(l,e,o),r[7](e),n||(t=Tt(e,"change",r[5]),n=!0)},p:ne,d(l){l&&m(e),r[7](null),n=!1,t()}}}function or(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fu(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new ge({props:{color:yt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),p(u,n,s),p(u,l,s),p(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&H(l,t)},i(u){i||($(e.$$.fragment,u),i=!0)},o(u){g(e.$$.fragment,u),i=!1},d(u){u&&(m(n),m(l),m(o)),v(e,u)}}}function uu(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[fu]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),q.push(()=>X(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],K(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function cu(r){let e,n,t,l,o,i;e=new wr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[au]},$$scope:{ctx:r}}}),t=new yr({props:{errorMessage:r[3]}});let u=r[2]>0&&or(r);return{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),u&&u.c(),o=Te()},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),u&&u.m(s,a),p(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&$(u,1)):(u=or(s),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(ie(),g(u,1,1,()=>{u=null}),ae())},i(s){i||($(e.$$.fragment,s),$(t.$$.fragment,s),$(u),i=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(u),i=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),u&&u.d(s)}}}function $u(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,_,d,S,T=r[10].notes+"",C,k,L,P,j,I,F,N=r[10].id+"",M,E,R,ee,D,Q=(r[10].inspector??"???")+"",ve,ht,de,xe=r[10].submission_time+"",bt,et,pe,vt,Fe,He=r[10].scheme_reference+"",Xe,wt,tt,Ke=r[10].current_design_stage+"",nt;return{c(){e=A("div"),n=A("h2"),l=w(t),o=O(),i=A("p"),u=A("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=O(),_=A("p"),d=A("u"),d.textContent="Notes",S=w(`
          : `),C=w(T),k=O(),L=A("hr"),P=O(),j=A("p"),I=w("Critical issue ID: "),F=A("b"),M=w(N),E=O(),R=A("p"),ee=w("Submitted by "),D=A("b"),ve=w(Q),ht=w(`
          at
          `),de=A("b"),bt=w(xe),et=O(),pe=A("p"),vt=w("For scheme "),Fe=A("b"),Xe=w(He),wt=w(`
          in stage
          `),tt=A("b"),nt=w(Ke),Se(e,"max-width","30vw")},m(he,Ce){p(he,e,Ce),y(e,n),y(n,l),y(e,o),y(e,i),y(i,u),y(i,s),y(i,f),y(e,c),y(e,_),y(_,d),y(_,S),y(_,C),y(e,k),y(e,L),y(e,P),y(e,j),y(j,I),y(j,F),y(F,M),y(e,E),y(e,R),y(R,ee),y(R,D),y(D,ve),y(R,ht),y(R,de),y(de,bt),y(e,et),y(e,pe),y(pe,vt),y(pe,Fe),y(Fe,Xe),y(pe,wt),y(pe,tt),y(tt,nt)},p(he,Ce){Ce&1024&&t!==(t=he[10].critical_type+"")&&H(l,t),Ce&1024&&a!==(a=he[10].location_description+"")&&H(f,a),Ce&1024&&T!==(T=he[10].notes+"")&&H(C,T),Ce&1024&&N!==(N=he[10].id+"")&&H(M,N),Ce&1024&&Q!==(Q=(he[10].inspector??"???")+"")&&H(ve,Q),Ce&1024&&xe!==(xe=he[10].submission_time+"")&&H(bt,xe),Ce&1024&&He!==(He=he[10].scheme_reference+"")&&H(Xe,He),Ce&1024&&Ke!==(Ke=he[10].current_design_stage+"")&&H(nt,Ke)},d(he){he&&m(e)}}}function pu(r){let e,n;return e=new oe({props:{$$slots:{default:[$u,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mu(r){let e,n,t,l,o,i;const u=[B(`${We}-clusters`),{applyToClusters:!0},{paint:{"circle-color":yt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let d=0;d<u.length;d+=1)s=J(s,u[d]);e=new Ue({props:s}),e.$on("click",r[6]);const a=[B(`${We}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=J(f,a[d]);t=new yl({props:f});const c=[B(`${We}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":yt,"circle-opacity":Y(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let _={$$slots:{default:[pu]},$$scope:{ctx:r}};for(let d=0;d<c.length;d+=1)_=J(_,c[d]);return o=new Ue({props:_}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment)},m(d,S){b(e,d,S),p(d,n,S),b(t,d,S),p(d,l,S),b(o,d,S),i=!0},p(d,S){const T=S&2?Z(u,[S&0&&te(B(`${We}-clusters`)),u[1],S&0&&{paint:{"circle-color":yt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},S&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(T);const C=S&2?Z(a,[S&0&&te(B(`${We}-counts`)),a[1],S&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(C);const k=S&2?Z(c,[S&0&&te(B(`${We}-points`)),c[1],c[2],c[3],S&0&&{paint:{"circle-color":yt,"circle-opacity":Y(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},S&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};S&2048&&(k.$$scope={dirty:S,ctx:d}),o.$set(k)},i(d){i||($(e.$$.fragment,d),$(t.$$.fragment,d),$(o.$$.fragment,d),i=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(o.$$.fragment,d),i=!1},d(d){d&&(m(n),m(l)),v(e,d),v(t,d),v(o,d)}}}function _u(r){let e,n,t,l;return e=new Ie({props:{label:"Critical Issues",$$slots:{default:[cu]},$$scope:{ctx:r}}}),t=new Lt({props:{id:We,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[mu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}let We="criticals",yt="red";function gu(r,e,n){let t;De(r,ln,d=>n(9,t=d));let l,o=!0,i=0,u="",s=Xr();async function a(d){try{n(4,s=await Es(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(S){n(3,u=`The file you loaded is broken: ${S}`)}}function f(d){t.getSource(We).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id,(S,T)=>{S||t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:T})})}function c(d){q[d?"unshift":"push"](()=>{l=d,n(0,l)})}function _(d){o=d,n(1,o)}return[l,o,i,u,s,a,f,c,_]}class du extends W{constructor(e){super(),z(this,e,gu,_u,G,{})}}function hu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function bu(r){let e;return{c(){e=w("crossing")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function vu(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[bu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function wu(r){let e,n,t;return n=new se({props:{$$slots:{default:[vu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ku(r){let e,n=sr(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=sr(l[3])+"")&&H(t,n)},d(l){l&&m(e)}}}function yu(r){let e,n;return e=new oe({props:{$$slots:{default:[ku,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Su(r){let e,n;const t=[B(ct),{sourceLayer:ct},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[yu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ue({props:l}),e.$on("click",Cu),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Z(t,[i&0&&te(B(ct)),i&0&&{sourceLayer:ct},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Tu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ct,$$slots:{right:[wu],default:[hu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),q.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${ct}.pmtiles`,$$slots:{default:[Su]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ct="crossings";function sr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Cu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Ou(r,e,n){let t=x.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Au extends W{constructor(e){super(),z(this,e,Ou,Tu,G,{})}}function Lu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Iu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pu(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Iu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Nu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Pu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Mu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(i,u){p(i,e,u),y(e,n),y(e,t),y(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&H(o,l)},d(i){i&&m(e)}}}function Eu(r){let e,n;return e=new oe({props:{$$slots:{default:[Mu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fu(r){let e,n;const t=[B($t),{sourceLayer:$t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Eu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Z(t,[i&0&&te(B($t)),i&0&&{sourceLayer:$t},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Du(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:$t,$$slots:{right:[Nu],default:[Lu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),q.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${$t}.pmtiles`,$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let $t="cycle_parking";function ju(r,e,n){let t=x.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Bu extends W{constructor(e){super(),z(this,e,ju,Du,G,{})}}function Hu(r){let e,n,t,l;return e=new ge({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=O(),t=w(r[2])},m(o,i){b(e,o,i),p(o,n,i),p(o,t,i),l=!0},p(o,i){(!l||i&4)&&H(t,o[2])},i(o){l||($(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){o&&(m(n),m(t)),v(e,o)}}}function Ru(r){let e;const n=r[5].default,t=mt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&_t(t,n,l,l[7],e?dt(n,l[7],o,null):gt(l[7]),null)},i(l){e||($(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Gu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ru]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Wu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&H(t,n)},d(l){l&&m(e)}}}function zu(r){let e,n;return e=new oe({props:{$$slots:{default:[Wu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uu(r){let e,n;const t=[B(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Y(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[zu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Be({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Z(t,[i&1&&te(B(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":Y(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function qu(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[Gu],default:[Hu]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),q.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],K(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${fe()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Vu(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=x[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class un extends W{constructor(e){super(),z(this,e,Vu,qu,G,{name:0,singularNoun:1,pluralNoun:2})}}function Xu(r){let e;return{c(){e=w("hospital")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ku(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Xu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Yu(r){let e,n;return e=new un({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Ku]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Ju extends W{constructor(e){super(),z(this,e,null,Yu,G,{})}}function Zu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ne,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Qu(r){let e;return{c(){e=w("railway station")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xu(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Qu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function ec(r){let e,n,t;return n=new se({props:{$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function tc(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&H(t,n)},d(l){l&&m(e)}}}function nc(r){let e,n;return e=new oe({props:{$$slots:{default:[tc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rc(r){let e,n;const t=[B(Gt),{paint:{"circle-color":r[1],"circle-radius":Ht/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[nc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Z(t,[i&0&&te(B(Gt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Ht/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function lc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Gt,$$slots:{right:[ec],default:[Zu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),q.push(()=>X(e,"checked",i)),l=new Lt({props:{data:`${fe()}/v1/${Gt}.geojson`,$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Gt="railway_stations";function oc(r,e,n){let t=x.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class sc extends W{constructor(e){super(),z(this,e,oc,lc,G,{})}}function ic(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ac(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[ic]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=O(),h(i.$$.fragment)},m(s,a){p(s,e,a),y(e,n),b(t,e,null),y(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function fc(r){let e,n;return e=new un({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[ac]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class uc extends W{constructor(e){super(),z(this,e,null,fc,G,{})}}function cc(r){let e;return{c(){e=w("sports pitches")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function $c(r){let e;return{c(){e=w("sports centres")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function pc(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[cc]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[$c]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function mc(r){let e,n;return e=new un({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[pc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class _c extends W{constructor(e){super(),z(this,e,null,mc,G,{})}}function gc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function dc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function hc(r){let e;return{c(){e=w("methodology")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function bc(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new V({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[dc]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[hc]},$$scope:{ctx:r}}}),f=new Ee({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=O(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=O(),h(f.$$.fragment)},m(_,d){p(_,e,d),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),p(_,u,d),p(_,s,d),p(_,a,d),b(f,_,d),c=!0},p(_,d){const S={};d&64&&(S.$$scope={dirty:d,ctx:_}),t.$set(S);const T={};d&64&&(T.$$scope={dirty:d,ctx:_}),o.$set(T)},i(_){c||($(t.$$.fragment,_),$(o.$$.fragment,_),$(f.$$.fragment,_),c=!0)},o(_){g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),c=!1},d(_){_&&(m(e),m(u),m(s),m(a)),v(t),v(o),v(f,_)}}}function vc(r){let e,n,t;return n=new se({props:{$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ir(r){let e,n;return e=new qe({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,_,d,S=r[5].pedal_cycles_2022.toLocaleString()+"",T,C,k,L,P,j=r[5].method+"",I;return{c(){e=A("h2"),t=w(n),l=O(),o=A("p"),i=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(s),f=O(),c=A("p"),_=w("Total pedal cycles (2022 AADF): "),d=A("b"),T=w(S),C=O(),k=A("p"),L=w("Count method: "),P=A("b"),I=w(j)},m(F,N){p(F,e,N),y(e,t),p(F,l,N),p(F,o,N),y(o,i),y(o,u),y(u,a),p(F,f,N),p(F,c,N),y(c,_),y(c,d),y(d,T),p(F,C,N),p(F,k,N),y(k,L),y(k,P),y(P,I)},p(F,N){N&32&&n!==(n=F[5].location+"")&&H(t,n),N&32&&s!==(s=F[5].motor_vehicles_2022.toLocaleString()+"")&&H(a,s),N&32&&S!==(S=F[5].pedal_cycles_2022.toLocaleString()+"")&&H(T,S),N&32&&j!==(j=F[5].method+"")&&H(I,j)},d(F){F&&(m(e),m(l),m(o),m(f),m(c),m(C),m(k))}}}function kc(r){let e,n;return e=new oe({props:{$$slots:{default:[wc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yc(r){let e,n;const t=[B(pt),{sourceLayer:pt},{paint:{"circle-color":$e(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[kc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ue({props:l}),e.$on("click",Tc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Z(t,[i&0&&te(B(pt)),i&0&&{sourceLayer:pt},i&6&&{paint:{"circle-color":$e(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Sc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:pt,$$slots:{right:[vc],default:[gc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),q.push(()=>X(e,"checked",u));let a=r[0]&&ir(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${pt}.pmtiles`,$$slots:{default:[yc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=ir(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),g(a,1,1,()=>{a=null}),ae());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let pt="vehicle_counts";function Tc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Cc(r,e,n){let t=x.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class Oc extends W{constructor(e){super(),z(this,e,Cc,Sc,G,{})}}function Ac(r){let e,n,t,l,o,i,u,s;return e=new uc({}),t=new Ju({}),o=new _c({}),u=new sc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),p(a,l,f),b(o,a,f),p(a,i,f),b(u,a,f),s=!0},i(a){s||($(e.$$.fragment,a),$(t.$$.fragment,a),$(o.$$.fragment,a),$(u.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),s=!1},d(a){a&&(m(n),m(l),m(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Lc(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[Ac]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ic(r){let e,n,t,l,o,i,u,s,a,f;return e=new gf({}),t=new Cf({}),o=new lf({}),u=new Bu({}),a=new Au({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(c,_){b(e,c,_),p(c,n,_),b(t,c,_),p(c,l,_),b(o,c,_),p(c,i,_),b(u,c,_),p(c,s,_),b(a,c,_),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Pc(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[Ic]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Ca({}),t=new Ua({}),o=new Mi({}),u=new ta({}),a=new _a({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(c,_){b(e,c,_),p(c,n,_),b(t,c,_),p(c,l,_),b(o,c,_),p(c,i,_),b(u,c,_),p(c,s,_),b(a,c,_),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Mc(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[Nc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ec(r){let e,n,t,l;return e=new ki({}),t=new Ui({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Fc(r){let e,n,t,l;return e=new iu({}),t=new Zf({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Dc(r){let e,n,t,l,o=rn()=="Private (development)",i,u,s;e=new Oc({}),t=new Rf({});let a=o&&Fc();return u=new Ma({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),a&&a.c(),i=O(),h(u.$$.fragment)},m(f,c){b(e,f,c),p(f,n,c),b(t,f,c),p(f,l,c),a&&a.m(f,c),p(f,i,c),b(u,f,c),s=!0},p:ne,i(f){s||($(e.$$.fragment,f),$(t.$$.fragment,f),$(a),$(u.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(a),g(u.$$.fragment,f),s=!1},d(f){f&&(m(n),m(l),m(i)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function jc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new el({props:u}),q.push(()=>X(e,"enabled",i)),l=new il({}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],K(()=>n=!1)),e.$set(f)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Bc(r){let e,n,t,l,o,i,u,s,a,f,c,_,d,S,T,C;return e=new du({}),t=new Ie({props:{label:"Trip generators",$$slots:{default:[Lc]},$$scope:{ctx:r}}}),o=new Ie({props:{label:"Existing infrastructure",$$slots:{default:[Pc]},$$scope:{ctx:r}}}),u=new Ie({props:{label:"Boundaries",$$slots:{default:[Mc]},$$scope:{ctx:r}}}),a=new Ie({props:{label:"Census",$$slots:{default:[Ec]},$$scope:{ctx:r}}}),c=new Ie({props:{label:"Other",$$slots:{default:[Dc]},$$scope:{ctx:r}}}),d=new Ie({props:{label:"Tools",$$slots:{default:[jc]},$$scope:{ctx:r}}}),T=new xr({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment),f=O(),h(c.$$.fragment),_=O(),h(d.$$.fragment),S=O(),h(T.$$.fragment)},m(k,L){b(e,k,L),p(k,n,L),b(t,k,L),p(k,l,L),b(o,k,L),p(k,i,L),b(u,k,L),p(k,s,L),b(a,k,L),p(k,f,L),b(c,k,L),p(k,_,L),b(d,k,L),p(k,S,L),b(T,k,L),C=!0},p(k,L){const P={};L&8&&(P.$$scope={dirty:L,ctx:k}),t.$set(P);const j={};L&8&&(j.$$scope={dirty:L,ctx:k}),o.$set(j);const I={};L&8&&(I.$$scope={dirty:L,ctx:k}),u.$set(I);const F={};L&8&&(F.$$scope={dirty:L,ctx:k}),a.$set(F);const N={};L&8&&(N.$$scope={dirty:L,ctx:k}),c.$set(N);const M={};L&9&&(M.$$scope={dirty:L,ctx:k}),d.$set(M);const E={};L&2&&(E.disabled=!k[1]),T.$set(E)},i(k){C||($(e.$$.fragment,k),$(t.$$.fragment,k),$(o.$$.fragment,k),$(u.$$.fragment,k),$(a.$$.fragment,k),$(c.$$.fragment,k),$(d.$$.fragment,k),$(T.$$.fragment,k),C=!0)},o(k){g(e.$$.fragment,k),g(t.$$.fragment,k),g(o.$$.fragment,k),g(u.$$.fragment,k),g(a.$$.fragment,k),g(c.$$.fragment,k),g(d.$$.fragment,k),g(T.$$.fragment,k),C=!1},d(k){k&&(m(n),m(l),m(i),m(s),m(f),m(_),m(S)),v(e,k),v(t,k),v(o,k),v(u,k),v(a,k),v(c,k),v(d,k),v(T,k)}}}function Hc(r){let e,n;return e=new Ie({props:{label:"Layers",open:!0,$$slots:{default:[Bc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rc(r,e,n){let t,l;De(r,mn,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&mn.set(!t)},[t,l,o]}class Gc extends W{constructor(e){super(),z(this,e,Rc,Hc,G,{})}}function Wc(r,e,n){let{loadFile:t}=e;return on(async()=>{let o=await(await fetch(`${an()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class zc extends W{constructor(e){super(),z(this,e,Wc,null,G,{loadFile:0})}}function Uc(r){let e;return{c(){e=w("Show on map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function qc(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Vc(r){let e,n,t,l;return e=new Jt({props:{$$slots:{default:[Uc]},$$scope:{ctx:r}}}),e.$on("click",r[3]),t=new Jt({props:{disabled:r[1],title:r[2],$$slots:{default:[qc]},$$scope:{ctx:r}}}),t.$on("click",r[4]),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&256&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Xc(r){let e,n,t=r[0].authority_or_region+"",l,o,i,u,s=r[0].capital_scheme_id+"",a,f,c,_,d=r[0].funding_programme+"",S,T,C,k;return C=new tl({props:{$$slots:{default:[Vc]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=O(),i=A("p"),u=w("Capital scheme ID: "),a=w(s),f=O(),c=A("p"),_=w("Funding programme: "),S=w(d),T=O(),h(C.$$.fragment)},m(L,P){p(L,e,P),y(e,n),y(e,l),p(L,o,P),p(L,i,P),y(i,u),y(i,a),p(L,f,P),p(L,c,P),y(c,_),y(c,S),p(L,T,P),b(C,L,P),k=!0},p(L,P){(!k||P&1)&&t!==(t=L[0].authority_or_region+"")&&H(l,t),(!k||P&1)&&s!==(s=L[0].capital_scheme_id+"")&&H(a,s),(!k||P&1)&&d!==(d=L[0].funding_programme+"")&&H(S,d);const j={};P&256&&(j.$$scope={dirty:P,ctx:L}),C.$set(j)},i(L){k||($(C.$$.fragment,L),k=!0)},o(L){g(C.$$.fragment,L),k=!1},d(L){L&&(m(e),m(o),m(i),m(f),m(c),m(T)),v(C,L)}}}function Kc(r){let e,n;return e=new Ie({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[Xc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),l&257&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yc(r,e,n){let t;De(r,ln,c=>n(7,t=c));let{schemesGj:l}=e,{scheme:o}=e,{authorityNames:i}=e,u=!i.has(o.authority_or_region),s=u?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function a(){let c={type:"FeatureCollection",features:l.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(Kr(c),{padding:20,animate:!1})}function f(){let c={type:"FeatureCollection",features:l.features.filter(d=>d.properties.scheme_reference==o.scheme_reference)},_=o.authority_or_region;window.localStorage.setItem(_,JSON.stringify(c)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return r.$$set=c=>{"schemesGj"in c&&n(5,l=c.schemesGj),"scheme"in c&&n(0,o=c.scheme),"authorityNames"in c&&n(6,i=c.authorityNames)},[o,u,s,a,f,l,i]}class Jc extends W{constructor(e){super(),z(this,e,Yc,Kc,G,{schemesGj:5,scheme:0,authorityNames:6})}}const Zc=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function ar(r){let e,n,t=_n(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,i){p(o,e,i),y(e,n),y(e,l)},p(o,i){i&1&&t!==(t=_n(o[0].length_meters)+"")&&H(l,t)},d(o){o&&m(e)}}}function fr(r){let e,n=r[1](r[0].description)+"";return{c(){e=A("p")},m(t,l){p(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&m(e)}}}function Qc(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,_=r[0].scheme_reference+"",d,S,T,C=r[0].length_meters&&ar(r),k=r[0].description&&fr(r);return{c(){e=A("div"),n=A("h2"),t=new sn(!1),o=w(" ("),u=w(i),s=w(")"),a=O(),f=A("p"),c=w("Scheme reference: "),d=w(_),S=O(),C&&C.c(),T=O(),k&&k.c(),t.a=o,Se(e,"max-width","30vw")},m(L,P){p(L,e,P),y(e,n),t.m(l,n),y(n,o),y(n,u),y(n,s),y(e,a),y(e,f),y(f,c),y(f,d),y(e,S),C&&C.m(e,null),y(e,T),k&&k.m(e,null)},p(L,[P]){P&1&&l!==(l=L[1](L[0].name)+"")&&t.p(l),P&1&&i!==(i=L[0].intervention_type+"")&&H(u,i),P&1&&_!==(_=L[0].scheme_reference+"")&&H(d,_),L[0].length_meters?C?C.p(L,P):(C=ar(L),C.c(),C.m(e,T)):C&&(C.d(1),C=null),L[0].description?k?k.p(L,P):(k=fr(L),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i:ne,o:ne,d(L){L&&m(e),C&&C.d(),k&&k.d()}}}function xc(r,e,n){let{props:t}=e,{filterText:l}=e;function o(i){return l?i.replace(new RegExp(l,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,l=i.filterText)},[t,o,l]}class cn extends W{constructor(e){super(),z(this,e,xc,Qc,G,{props:0,filterText:2})}}function e$(r){let e,n;return e=new cn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function t$(r){let e,n;return e=new oe({props:{$$slots:{default:[e$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function n$(r){let e,n;return e=new cn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function r$(r){let e,n;return e=new oe({props:{$$slots:{default:[n$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function l$(r){let e,n;return e=new cn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function o$(r){let e,n;return e=new oe({props:{$$slots:{default:[l$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function s$(r){let e,n,t,l,o,i,u,s,a,f;const c=[B("interventions-points"),{filter:["all",gn,r[4],r[5]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[3],"circle-radius":Ht,"circle-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let _={$$slots:{default:[t$]},$$scope:{ctx:r}};for(let I=0;I<c.length;I+=1)_=J(_,c[I]);e=new Ue({props:_});const d=[B("interventions-lines"),{filter:["all",dn,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[3],"line-width":kt,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let S={$$slots:{default:[r$]},$$scope:{ctx:r}};for(let I=0;I<d.length;I+=1)S=J(S,d[I]);t=new ue({props:S});const T=[B("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*kt,"circle-opacity":0,"circle-stroke-color":nl.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let C={};for(let I=0;I<T.length;I+=1)C=J(C,T[I]);o=new Ue({props:C});const k=[B("interventions-polygons"),{filter:["all",Mt,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[3],"fill-opacity":Y(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let L={$$slots:{default:[o$]},$$scope:{ctx:r}};for(let I=0;I<k.length;I+=1)L=J(L,k[I]);u=new Be({props:L});const P=[B("interventions-polygons-outlines"),{filter:["all",Mt,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*kt}},{layout:{visibility:r[0]?"visible":"none"}}];let j={};for(let I=0;I<P.length;I+=1)j=J(j,P[I]);return a=new ue({props:j}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(I,F){b(e,I,F),p(I,n,F),b(t,I,F),p(I,l,F),b(o,I,F),p(I,i,F),b(u,I,F),p(I,s,F),b(a,I,F),f=!0},p(I,F){const N=F&57?Z(c,[c[0],F&48&&{filter:["all",gn,I[4],I[5]]},c[2],c[3],F&8&&{paint:{"circle-color":I[3],"circle-radius":Ht,"circle-opacity":Y(1,.5)}},F&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};F&258&&(N.$$scope={dirty:F,ctx:I}),e.$set(N);const M=F&25?Z(d,[d[0],F&16&&{filter:["all",dn,I[4]]},d[2],d[3],F&8&&{paint:{"line-color":I[3],"line-width":kt,"line-opacity":Y(1,.5)}},F&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};F&258&&(M.$$scope={dirty:F,ctx:I}),t.$set(M);const E=F&1?Z(T,[T[0],T[1],T[2],{layout:{visibility:I[0]?"visible":"none"}}]):{};o.$set(E);const R=F&25?Z(k,[k[0],F&16&&{filter:["all",Mt,I[4]]},k[2],k[3],F&8&&{paint:{"fill-color":I[3],"fill-opacity":Y(.2,.5)}},F&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};F&258&&(R.$$scope={dirty:F,ctx:I}),u.$set(R);const ee=F&25?Z(P,[P[0],F&16&&{filter:["all",Mt,I[4]]},F&8&&{paint:{"line-color":I[3],"line-opacity":.5,"line-width":.7*kt}},F&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};a.$set(ee)},i(I){f||($(e.$$.fragment,I),$(t.$$.fragment,I),$(o.$$.fragment,I),$(u.$$.fragment,I),$(a.$$.fragment,I),f=!0)},o(I){g(e.$$.fragment,I),g(t.$$.fragment,I),g(o.$$.fragment,I),g(u.$$.fragment,I),g(a.$$.fragment,I),f=!1},d(I){I&&(m(n),m(l),m(i),m(s)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I)}}}function i$(r){let e,n;return e=new Lt({props:{data:r[2],$$slots:{default:[s$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function a$(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,{filterText:i}=e,u=Sr("v1");const s=["!=","hide_while_editing",!0],a=["!=","endpoint",!0];return r.$$set=f=>{"schemesGj"in f&&n(6,l=f.schemesGj),"showSchemes"in f&&n(0,o=f.showSchemes),"filterText"in f&&n(1,i=f.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Yr(l))},[o,i,t,u,s,a,l]}class f$ extends W{constructor(e){super(),z(this,e,a$,i$,G,{schemesGj:6,showSchemes:0,filterText:1})}}function ur(r,e,n){const t=r.slice();return t[14]=e[n],t}function u$(r){let e,n;return e=new zc({props:{loadFile:r[8]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cr(r){let e,n,t,l,o,i;function u(_){r[9](_)}function s(_){r[10](_)}function a(_){r[11](_)}function f(_){r[12](_)}let c={schemes:r[2]};return r[1]!==void 0&&(c.schemesGj=r[1]),r[3]!==void 0&&(c.schemesToBeShown=r[3]),r[4]!==void 0&&(c.filterText=r[4]),r[5]!==void 0&&(c.show=r[5]),e=new qs({props:c}),q.push(()=>X(e,"schemesGj",u)),q.push(()=>X(e,"schemesToBeShown",s)),q.push(()=>X(e,"filterText",a)),q.push(()=>X(e,"show",f)),{c(){h(e.$$.fragment)},m(_,d){b(e,_,d),i=!0},p(_,d){const S={};d&4&&(S.schemes=_[2]),!n&&d&2&&(n=!0,S.schemesGj=_[1],K(()=>n=!1)),!t&&d&8&&(t=!0,S.schemesToBeShown=_[3],K(()=>t=!1)),!l&&d&16&&(l=!0,S.filterText=_[4],K(()=>l=!1)),!o&&d&32&&(o=!0,S.show=_[5],K(()=>o=!1)),e.$set(S)},i(_){i||($(e.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),i=!1},d(_){v(e,_)}}}function $r(r){let e,n;return e=new Jc({props:{schemesGj:r[1],scheme:r[14],authorityNames:r[7]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[14]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pr(r){let e=r[3].has(r[14].scheme_reference),n,t,l=e&&$r(r);return{c(){l&&l.c(),n=Te()},m(o,i){l&&l.m(o,i),p(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[14].scheme_reference)),e?l?(l.p(o,i),i&12&&$(l,1)):(l=$r(o),l.c(),$(l,1),l.m(n.parentNode,n)):l&&(ie(),g(l,1,1,()=>{l=null}),ae())},i(o){t||($(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l&&l.d(o)}}}function c$(r){let e,n,t,l,o,i,u,s,a,f,c=rn()=="Private (development)",_,d,S,T,C,k,L,P;o=new ol({props:{boundaryGeojson:r[1]}}),u=new Il({}),a=new Jr({});let j=c&&u$(r);d=new sl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[8]}}),T=new yr({props:{errorMessage:r[0]}});let I=r[2].size>0&&cr(r),F=ze(r[2].values()),N=[];for(let E=0;E<F.length;E+=1)N[E]=pr(ur(r,F,E));const M=E=>g(N[E],1,1,()=>{N[E]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment),f=O(),j&&j.c(),_=O(),h(d.$$.fragment),S=O(),h(T.$$.fragment),C=O(),I&&I.c(),k=O(),L=A("ul");for(let E=0;E<N.length;E+=1)N[E].c();Se(n,"display","flex"),Se(n,"justify-content","space-between"),U(e,"slot","sidebar"),U(e,"class","govuk-prose")},m(E,R){p(E,e,R),y(e,n),y(n,t),y(n,l),b(o,n,null),y(e,i),b(u,e,null),y(e,s),b(a,e,null),y(e,f),j&&j.m(e,null),y(e,_),b(d,e,null),y(e,S),b(T,e,null),y(e,C),I&&I.m(e,null),y(e,k),y(e,L);for(let ee=0;ee<N.length;ee+=1)N[ee]&&N[ee].m(L,null);P=!0},p(E,R){const ee={};R&2&&(ee.boundaryGeojson=E[1]),o.$set(ee),c&&j.p(E,R);const D={};if(R&1&&(D.errorMessage=E[0]),T.$set(D),E[2].size>0?I?(I.p(E,R),R&4&&$(I,1)):(I=cr(E),I.c(),$(I,1),I.m(e,k)):I&&(ie(),g(I,1,1,()=>{I=null}),ae()),R&142){F=ze(E[2].values());let Q;for(Q=0;Q<F.length;Q+=1){const ve=ur(E,F,Q);N[Q]?(N[Q].p(ve,R),$(N[Q],1)):(N[Q]=pr(ve),N[Q].c(),$(N[Q],1),N[Q].m(L,null))}for(ie(),Q=F.length;Q<N.length;Q+=1)M(Q);ae()}},i(E){if(!P){$(o.$$.fragment,E),$(u.$$.fragment,E),$(a.$$.fragment,E),$(j),$(d.$$.fragment,E),$(T.$$.fragment,E),$(I);for(let R=0;R<F.length;R+=1)$(N[R]);P=!0}},o(E){g(o.$$.fragment,E),g(u.$$.fragment,E),g(a.$$.fragment,E),g(j),g(d.$$.fragment,E),g(T.$$.fragment,E),g(I),N=N.filter(Boolean);for(let R=0;R<N.length;R+=1)g(N[R]);P=!1},d(E){E&&m(e),v(o),v(u),v(a),j&&j.d(),v(d),v(T),I&&I.d(),Bt(N,E)}}}function $$(r){let e,n,t,l,o,i,u;return e=new rl({}),t=new f$({props:{schemesGj:r[1],filterText:r[4],showSchemes:r[5]}}),i=new Gc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),o=A("div"),h(i.$$.fragment),U(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),p(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&2&&(f.schemesGj=s[1]),a&16&&(f.filterText=s[4]),a&32&&(f.showSchemes=s[5]),t.$set(f)},i(s){u||($(e.$$.fragment,s),$(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),v(i)}}}function p$(r){let e,n,t;return n=new Zr({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[$$]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),U(e,"slot","main")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.style=l[6]),o&131122&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function m$(r){let e,n;return e=new al({props:{$$slots:{main:[p$],sidebar:[c$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&131199&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _$(r,e,n){let t;De(r,hn,k=>n(6,t=k)),on(()=>{Qr()});let l=new Set(Zc);const o=new URLSearchParams(window.location.search);hn.set(o.get("style")||"dataviz");let i="",u={type:"FeatureCollection",features:[],schemes:{}},s=new Map,a=new Set,f="",c=!0;function _(k){try{n(1,u=JSON.parse(k)),n(2,s=Ns(u)),n(0,i="")}catch(L){n(0,i=`The file you loaded is broken: ${L}`)}}function d(k){u=k,n(1,u)}function S(k){a=k,n(3,a)}function T(k){f=k,n(4,f)}function C(k){c=k,n(5,c)}return[i,u,s,a,f,c,t,l,_,d,S,T,C]}class g$ extends W{constructor(e){super(),z(this,e,_$,m$,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new g$({target:document.getElementById("app")});
