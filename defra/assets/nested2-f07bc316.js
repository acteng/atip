import{S as z,i as U,s as G,ap as Hr,b as V,c as X,e as A,d as O,g as h,h as W,j as m,m as b,w as Tt,l as K,t as p,n as d,o as _,p as v,aL as mt,aM as _t,aN as gt,aO as dt,aP as $r,aQ as Wt,aR as be,Z as Te,_ as ie,$ as ae,aS as pr,q as De,ai as mr,aT as _r,aU as Dt,aV as gr,aW as dr,H as ne,aX as $n,aY as Gr,u as w,k as y,f as rn,aj as Wr,B as ln,ax as hr,r as on,F as br,a as Jt,v as jt,C as R,aK as q,aA as ze,az as Se,aB as Bt,aZ as fe,O as B,a_ as $e,A as Y,P as J,Y as Z,a$ as te,G as Lt,D as pn,aq as zr,ay as Ur,R as vr,b0 as sn,b1 as an,E as wr,x as qr,b2 as mn,N as Vr,aF as _n,U as Xr,V as gn,W as dn,X as Mt,aJ as hn,L as Kr,M as Yr,y as Jr}from"./index-14eadd57.js";import{m as Ct,C as Ie,h as It,i as le,L as ue,c as Rt,k as Zr,S as Qr,B as xr,a as kt,b as el,G as tl}from"./StreetViewTool-bf4e4ef2.js";import{L as nl,s as bn,c as kr,a as ge,C as Ue,Z as rl}from"./schemas-d2e701a0.js";import{a as Be,F as ll}from"./Popup-2ff7389e.js";import{P as oe}from"./Popup-9fa5d4d1.js";import{L as ol,a as sl}from"./LineMeasureController-90d761d7.js";const il="/atip/defra/assets/help-d011708a.svg";function al(r){let e,n;const t=r[1].default,l=mt(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),W(e,"class","govuk-prose")},m(o,i){m(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&_t(l,t,o,o[4],n?dt(t,o[4],i,null):gt(o[4]),null)},i(o){n||(p(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&_(e),l&&l.d(o)}}}function fl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[al]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Hr({props:a}),V.push(()=>X(t,"open",s)),{c(){e=A("button"),e.innerHTML=`<img src="${il}" title="Help" alt="Help"/>`,n=O(),h(t.$$.fragment),W(e,"class","svelte-7d9d1l")},m(f,c){m(f,e,c),m(f,n,c),b(t,f,c),o=!0,i||(u=Tt(e,"click",r[2]),i=!0)},p(f,[c]){const $={};c&16&&($.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,$.open=f[0],K(()=>l=!1)),t.$set($)},i(f){o||(p(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(_(e),_(n)),v(t,f),i=!1,u()}}}function ul(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class se extends z{constructor(e){super(),U(this,e,ul,fl,G,{})}}function cl(r){let e;const n=r[8].default,t=mt(n,r,r[15],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&32768)&&_t(t,n,l,l[15],e?dt(n,l[15],o,null):gt(l[15]),null)},i(l){e||(p(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function $l(r){let e,n;return e=new $r({props:{id:r[0],type:"raster",source:r[1],beforeId:r[2],beforeLayerType:r[3],paint:r[4],layout:r[5],minzoom:r[6],maxzoom:r[7],$$slots:{default:[cl]},$$scope:{ctx:r}}}),e.$on("click",r[9]),e.$on("dblclick",r[10]),e.$on("contextmenu",r[11]),e.$on("mouseenter",r[12]),e.$on("mousemove",r[13]),e.$on("mouseleave",r[14]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.id=t[0]),l&2&&(o.source=t[1]),l&4&&(o.beforeId=t[2]),l&8&&(o.beforeLayerType=t[3]),l&16&&(o.paint=t[4]),l&32&&(o.layout=t[5]),l&64&&(o.minzoom=t[6]),l&128&&(o.maxzoom=t[7]),l&32768&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=Wt("raster-layer")}=e,{source:i=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:s=void 0}=e,{paint:a}=e,{layout:f=void 0}=e,{minzoom:c=void 0}=e,{maxzoom:$=void 0}=e;function g(N){be.call(this,r,N)}function k(N){be.call(this,r,N)}function T(N){be.call(this,r,N)}function C(N){be.call(this,r,N)}function S(N){be.call(this,r,N)}function L(N){be.call(this,r,N)}return r.$$set=N=>{"id"in N&&n(0,o=N.id),"source"in N&&n(1,i=N.source),"beforeId"in N&&n(2,u=N.beforeId),"beforeLayerType"in N&&n(3,s=N.beforeLayerType),"paint"in N&&n(4,a=N.paint),"layout"in N&&n(5,f=N.layout),"minzoom"in N&&n(6,c=N.minzoom),"maxzoom"in N&&n(7,$=N.maxzoom),"$$scope"in N&&n(15,l=N.$$scope)},[o,i,u,s,a,f,c,$,t,g,k,T,C,S,L,l]}class ml extends z{constructor(e){super(),U(this,e,pl,$l,G,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}function vn(r){let e=r[0],n,t,l=wn(r);return{c(){l.c(),n=Te()},m(o,i){l.m(o,i),m(o,n,i),t=!0},p(o,i){i&1&&G(e,e=o[0])?(ie(),d(l,1,1,ne),ae(),l=wn(o),l.c(),p(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(p(l),t=!0)},o(o){d(l),t=!1},d(o){o&&_(n),l.d(o)}}}function wn(r){let e;const n=r[10].default,t=mt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&_t(t,n,l,l[9],e?dt(n,l[9],o,null):gt(l[9]),null)},i(l){e||(p(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function _l(r){let e,n,t=r[0]&&vn(r);return{c(){t&&t.c(),e=Te()},m(l,o){t&&t.m(l,o),m(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&p(t,1)):(t=vn(l),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(ie(),d(t,1,1,()=>{t=null}),ae())},i(l){n||(p(t),n=!0)},o(l){d(t),n=!1},d(l){l&&_(e),t&&t.d(l)}}}function gl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=Wt("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=pr();De(r,f,k=>n(8,l=k)),De(r,c,k=>n(0,t=k));let $,g=!0;return mr(()=>{t&&$&&l&&(_r(f,t,$),Dt(c,t=null,t),n(6,$=void 0))}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"tiles"in k&&n(4,s=k.tiles),"tileSize"in k&&n(5,a=k.tileSize),"$$scope"in k&&n(9,i=k.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Dt(c,t=u,t),gr(l,t,dr({type:"raster",tiles:s,tileSize:a}),k=>l&&k===t,()=>{t&&(n(6,$=l==null?void 0:l.getSource(t)),n(7,g=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,$=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&$&&(g?n(7,g=!1):$.setTiles(s))},[t,f,c,u,s,a,$,g,l,i,o]}class dl extends z{constructor(e){super(),U(this,e,gl,_l,G,{id:3,tiles:4,tileSize:5})}}function hl(r){let e;const n=r[16].default,t=mt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&_t(t,n,l,l[24],e?dt(n,l[24],o,null):gt(l[24]),null)},i(l){e||(p(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function bl(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[hl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new $r({props:o}),V.push(()=>X(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],K(()=>n=!1)),e.$set(s)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function vl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=Wt("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:$=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:S=!1}=e,{hovered:L=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:D=!0}=e;function I(j){L=j,n(0,L)}function M(j){be.call(this,r,j)}function P(j){be.call(this,r,j)}function E(j){be.call(this,r,j)}function F(j){be.call(this,r,j)}function H(j){be.call(this,r,j)}function ee(j){be.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,i=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,s=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,$=j.filter),"applyToClusters"in j&&n(9,g=j.applyToClusters),"minzoom"in j&&n(10,k=j.minzoom),"maxzoom"in j&&n(11,T=j.maxzoom),"hoverCursor"in j&&n(12,C=j.hoverCursor),"manageHoverState"in j&&n(13,S=j.manageHoverState),"hovered"in j&&n(0,L=j.hovered),"eventsIfTopMost"in j&&n(14,N=j.eventsIfTopMost),"interactive"in j&&n(15,D=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[L,o,i,u,s,a,f,c,$,g,k,T,C,S,N,D,t,I,M,P,E,F,H,ee,l]}class wl extends z{constructor(e){super(),U(this,e,vl,bl,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function kn(r){let e=r[0],n,t,l=yn(r);return{c(){l.c(),n=Te()},m(o,i){l.m(o,i),m(o,n,i),t=!0},p(o,i){i&1&&G(e,e=o[0])?(ie(),d(l,1,1,ne),ae(),l=yn(o),l.c(),p(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(p(l),t=!0)},o(o){d(l),t=!1},d(o){o&&_(n),l.d(o)}}}function yn(r){let e;const n=r[9].default,t=mt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&_t(t,n,l,l[8],e?dt(n,l[8],o,null):gt(l[8]),null)},i(l){e||(p(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function kl(r){let e,n,t=r[0]&&kn(r);return{c(){t&&t.c(),e=Te()},m(l,o){t&&t.m(l,o),m(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&p(t,1)):(t=kn(l),t.c(),p(t,1),t.m(e.parentNode,e)):t&&(ie(),d(t,1,1,()=>{t=null}),ae())},i(l){n||(p(t),n=!0)},o(l){d(t),n=!1},d(l){l&&_(e),t&&t.d(l)}}}function yl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=Wt("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!$n.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let k=new Gr;$n.addProtocol("pmtiles",k.tile)}const{map:c,self:$}=pr();De(r,c,k=>n(7,l=k)),De(r,$,k=>n(0,t=k));let g;return mr(()=>{t&&l&&(_r(c,t,g),Dt($,t=null,t),g=void 0)}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"url"in k&&n(4,s=k.url),"tiles"in k&&n(5,a=k.tiles),"promoteId"in k&&n(6,f=k.promoteId),"$$scope"in k&&n(8,i=k.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Dt($,t=u,t),gr(l,t,dr({type:"vector",url:s,tiles:a,promoteId:f}),k=>l&&k===t,()=>{t&&(g=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{g=l==null?void 0:l.getSource(u)}))},[t,c,$,u,s,a,f,l,i,o]}class ce extends z{constructor(e){super(),U(this,e,yl,kl,G,{id:3,url:4,tiles:5,promoteId:6})}}function Sl(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Tl(r){let e,n,t,l,o=r[0]=="Private (development)"&&Sl();return{c(){o&&o.c(),e=O(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated.",t=O(),l=A("p"),l.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,u){o&&o.m(i,u),m(i,e,u),m(i,n,u),m(i,t,u),m(i,l,u)},p:ne,d(i){i&&(_(e),_(n),_(t),_(l)),o&&o.d(i)}}}function Cl(r){let e,n,t,l,o,i;return o=new se({props:{$$slots:{default:[Tl]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=O(),h(o.$$.fragment)},m(u,s){m(u,e,s),y(e,n),y(e,t),y(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(p(o.$$.fragment,u),i=!0)},o(u){d(o.$$.fragment,u),i=!1},d(u){u&&_(e),v(o)}}}function Ol(r){return[rn()]}class Al extends z{constructor(e){super(),U(this,e,Ol,Cl,G,{})}}const Ll={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var me=Uint8Array,Ze=Uint16Array,yr=Uint32Array,Sr=new me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Tr=new me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Il=new me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Cr=function(r,e){for(var n=new Ze(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new yr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Or=Cr(Sr,2),Ar=Or[0],Pl=Or[1];Ar[28]=258,Pl[258]=28;var Nl=Cr(Tr,0),Ml=Nl[0],Zt=new Ze(32768);for(var re=0;re<32768;++re){var He=(re&43690)>>>1|(re&21845)<<1;He=(He&52428)>>>2|(He&13107)<<2,He=(He&61680)>>>4|(He&3855)<<4,Zt[re]=((He&65280)>>>8|(He&255)<<8)>>>1}var St=function(r,e,n){for(var t=r.length,l=0,o=new Ze(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Ze(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Ze(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,$=c|(1<<f)-1;c<=$;++c)u[Zt[c]>>>s]=a}else for(u=new Ze(t),l=0;l<t;++l)r[l]&&(u[l]=Zt[i[r[l]-1]++]>>>15-r[l]);return u},Pt=new me(288);for(var re=0;re<144;++re)Pt[re]=8;for(var re=144;re<256;++re)Pt[re]=9;for(var re=256;re<280;++re)Pt[re]=7;for(var re=280;re<288;++re)Pt[re]=8;var Lr=new me(32);for(var re=0;re<32;++re)Lr[re]=5;var El=St(Pt,9,1),Fl=St(Lr,5,1),zt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},we=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Ut=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Dl=function(r){return(r+7)/8|0},fn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Ze:r.BYTES_PER_ELEMENT==4?yr:me)(n-e);return t.set(r.subarray(e,n)),t},jl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ke=function(r,e,n){var t=new Error(e||jl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,ke),!n)throw t;return t},Bl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new me(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new me(t*3));var i=function(tt){var Ke=e.length;if(tt>Ke){var nt=new me(Math.max(Ke*2,tt));nt.set(e),e=nt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,$=n.m,g=n.n,k=t*8;do{if(!f){u=we(r,s,1);var T=we(r,s+1,3);if(s+=3,T)if(T==1)f=El,c=Fl,$=9,g=5;else if(T==2){var N=we(r,s,31)+257,D=we(r,s+10,15)+4,I=N+we(r,s+5,31)+1;s+=14;for(var M=new me(I),P=new me(19),E=0;E<D;++E)P[Il[E]]=we(r,s+E*3,7);s+=D*3;for(var F=zt(P),H=(1<<F)-1,ee=St(P,F,1),E=0;E<I;){var j=ee[we(r,s,H)];s+=j&15;var C=j>>>4;if(C<16)M[E++]=C;else{var Q=0,ve=0;for(C==16?(ve=3+we(r,s,3),s+=2,Q=M[E-1]):C==17?(ve=3+we(r,s,7),s+=3):C==18&&(ve=11+we(r,s,127),s+=7);ve--;)M[E++]=Q}}var ht=M.subarray(0,N),de=M.subarray(N);$=zt(ht),g=zt(de),f=St(ht,$,1),c=St(de,g,1)}else ke(1);else{var C=Dl(s)+4,S=r[C-4]|r[C-3]<<8,L=C+S;if(L>t){o&&ke(0);break}l&&i(a+S),e.set(r.subarray(C,L),a),n.b=a+=S,n.p=s=L*8,n.f=u;continue}if(s>k){o&&ke(0);break}}l&&i(a+131072);for(var xe=(1<<$)-1,bt=(1<<g)-1,et=s;;et=s){var Q=f[Ut(r,s)&xe],pe=Q>>>4;if(s+=Q&15,s>k){o&&ke(0);break}if(Q||ke(2),pe<256)e[a++]=pe;else if(pe==256){et=s,f=null;break}else{var vt=pe-254;if(pe>264){var E=pe-257,Fe=Sr[E];vt=we(r,s,(1<<Fe)-1)+Ar[E],s+=Fe}var Re=c[Ut(r,s)&bt],Xe=Re>>>4;Re||ke(3),s+=Re&15;var de=Ml[Xe];if(Xe>3){var Fe=Tr[Xe];de+=Ut(r,s)&(1<<Fe)-1,s+=Fe}if(s>k){o&&ke(0);break}l&&i(a+131072);for(var wt=a+vt;a<wt;a+=4)e[a]=e[a-de],e[a+1]=e[a+1-de],e[a+2]=e[a+2-de],e[a+3]=e[a+3-de];a=wt}}n.l=f,n.p=et,n.b=a,n.f=u,f&&(u=1,n.m=$,n.d=c,n.n=g)}while(!u);return a==e.length?e:fn(e,0,a)},Rl=new me(0),Ne=function(r,e){return r[e]|r[e+1]<<8},ye=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},qt=function(r,e){return ye(r,e)+ye(r,e+4)*4294967296};function Hl(r,e){return Bl(r,e)}var Qt=typeof TextDecoder<"u"&&new TextDecoder,Gl=0;try{Qt.decode(Rl,{stream:!0}),Gl=1}catch{}var Wl=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,fn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Ir(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(Qt)return Qt.decode(r);var l=Wl(r),o=l[0],i=l[1];return i.length&&ke(8),o}}var zl=function(r,e){return e+30+Ne(r,e+26)+Ne(r,e+28)},Ul=function(r,e,n){var t=Ne(r,e+28),l=Ir(r.subarray(e+46,e+46+t),!(Ne(r,e+8)&2048)),o=e+46+t,i=ye(r,e+20),u=n&&i==4294967295?ql(r,o):[i,ye(r,e+24),ye(r,e+42)],s=u[0],a=u[1],f=u[2];return[Ne(r,e+10),s,a,l,o+Ne(r,e+30)+Ne(r,e+32),f]},ql=function(r,e){for(;Ne(r,e)!=1;e+=4+Ne(r,e+2));return[qt(r,e+12),qt(r,e+4),qt(r,e+20)]};function Vl(r,e){for(var n={},t=r.length-22;ye(r,t)!=101010256;--t)(!t||r.length-t>65558)&&ke(13);var l=Ne(r,t+8);if(!l)return{};var o=ye(r,t+16),i=o==4294967295||l==65535;if(i){var u=ye(r,t-12);i=ye(r,u)==101075792,i&&(l=ye(r,u+32),o=ye(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=Ul(r,o,i),c=f[0],$=f[1],g=f[2],k=f[3],T=f[4],C=f[5],S=zl(r,C);o=T,(!s||s({name:k,size:$,originalSize:g,compression:c}))&&(c?c==8?n[k]=Hl(r.subarray(S,S+$),new me(g)):ke(14,"unknown compression type "+c):n[k]=fn(r,S,S+$))}return n}function Xl(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Vt):Vt(r)}function Vt(r){var e=new Uint8Array(r),n=Vl(e);return Promise.resolve(Kl(n))}function Kl(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Ir(r[l])}return e}function Me(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Qe(t)===e)return t;n++}}function Nt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Qe(l)===e&&n.push(l),t++}return n}function Ht(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Qe(l)===e&&n(l,t):n(l,t),t++}}function Yl(r,e,n){var t=[];return Ht(r,e,function(l,o){t.push(n(l,o))}),t}var Jl=/.+\:/;function Qe(r){return r.tagName.replace(Jl,"")}function Pr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Qe(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Pr(r.childNodes[t]),t++;return e+="</"+Qe(r)+">",e}function Zl(r){var e=r.documentElement,n=Me(e,"sheetData"),t=[];return Ht(n,"row",function(l){Ht(l,"c",function(o){t.push(o)})}),t}function Ql(r,e){return Me(e,"v")}function xl(r,e){if(e.firstChild&&Qe(e.firstChild)==="is"&&e.firstChild.firstChild&&Qe(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function eo(r){var e=r.documentElement,n=Me(e,"dimension");if(n)return n.getAttribute("ref")}function to(r){var e=r.documentElement,n=Me(e,"cellStyleXfs");return n?Nt(n,"xf"):[]}function no(r){var e=r.documentElement,n=Me(e,"cellXfs");return n?Nt(n,"xf"):[]}function ro(r){var e=r.documentElement,n=Me(e,"numFmts");return n?Nt(n,"numFmt"):[]}function lo(r){var e=r.documentElement;return Yl(e,"si",function(n){var t=Me(n,"t");if(t)return t.textContent;var l="";return Ht(n,"r",function(o){l+=Me(o,"t").textContent}),l})}function oo(r){var e=r.documentElement;return Me(e,"workbookPr")}function so(r){var e=r.documentElement;return Nt(e,"Relationship")}function io(r){var e=r.documentElement,n=Me(e,"sheets");return Nt(n,"sheet")}function ao(r,e){var n=e.createDocument(r),t={},l=oo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return io(n).forEach(o),t}function fo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Xt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Xt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Xt(u);break}};return so(n).forEach(l),t}function Xt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Sn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Tn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sn(Object(n),!0).forEach(function(t){uo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function uo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function co(r,e){if(!r)return{};var n=e.createDocument(r),t=to(n).map(Kt),l=ro(n).map($o).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Tn(Tn({},t[u.xfId]),Kt(u,l)):Kt(u,l)};return no(n).map(o)}function $o(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Kt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function po(r,e){return r?lo(e.createDocument(r)):[]}function Nr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function mo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=_o(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _o(r,e){if(r){if(typeof r=="string")return Cn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(r,e)}}function Cn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function go(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(ho.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&wo(l.numberFormat.template))return!0}}var ho=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],bo=/^\[\$-414\]/,vo=/;@$/;function wo(r){r=r.toLowerCase(),r=r.replace(bo,""),r=r.replace(vo,"");for(var e=r.split(/\W+/),n=mo(e),t;!(t=n()).done;){var l=t.value;if(ko.indexOf(l)<0)return!1}return!0}var ko=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function yo(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Yt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Yt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Yt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=So(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var $=Number(r);if(isNaN($))throw new Error('Invalid "numeric" cell value: '.concat(r));r=$,go(r,o(),i,a)&&(r=Nr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function So(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Yt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var To=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Co(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function Oo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=To.indexOf(r[n]),n++;return e}function Mr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Oo(r[0].trim())]}function Ao(r,e,n,t,l,o,i){var u=Mr(r.getAttribute("r")),s=Ql(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:yo(a,f,{getInlineStringValue:function(){return xl(e,r)},getInlineStringXml:function(){return Pr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function Lo(r,e,n,t,l,o){var i=Zl(r);return i.length===0?[]:i.map(function(u){return Ao(u,r,e,n,t,l,o)})}function Io(r,e){return Eo(r)||Mo(r,e)||No(r,e)||Po()}function Po(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function No(r,e){if(r){if(typeof r=="string")return On(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(r,e)}}function On(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Mo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Eo(r){if(Array.isArray(r))return r}function Fo(r){var e=eo(r);if(e)return e=e.split(":").map(Mr).map(function(n){var t=Io(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Do(r,e,n,t,l,o){var i=e.createDocument(r),u=Lo(i,e,n,t,l,o),s=Fo(i)||Co(u);return{cells:u,dimensions:s}}function jo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Bo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bo(r,e){if(r){if(typeof r=="string")return An(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(r,e)}}function An(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ro(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=jo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Ho(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Go(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Go(r,e){if(r){if(typeof r=="string")return Ln(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(r,e)}}function Ln(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Wo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Ho(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function zo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Er(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uo(r,e){return Xo(r)||Vo(r,e)||Er(r,e)||qo()}function qo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Er(r,e){if(r){if(typeof r=="string")return In(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(r,e)}}function In(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Vo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Xo(r){if(Array.isArray(r))return r}function Ko(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Uo(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=zo(t),$;!($=c()).done;){var g=$.value,k=g.row-1,T=g.column-1;T<i&&k<u&&(s[k][T]=g.value)}var C=e.rowMap;if(C)for(var S=0;S<s.length;)C[S]=S,S++;return s=Ro(Wo(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(s=e.transformData(s)),s}function Yo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Jo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jo(r,e){if(r){if(typeof r=="string")return Pn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(r,e)}}function Pn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Nn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Zo(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nn(Object(n),!0).forEach(function(t){Qo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Nn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Qo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function xo(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Zo({sheet:1},n));var t=function($){if(!r[$])throw new Error('"'.concat($,'" file not found inside the *.xlsx file zip archive'));return r[$]},l=fo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?po(t(l.sharedStrings),e):[],i=l.styles?co(t(l.styles),e):{},u=ao(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var $=c.name;return{name:$}});var s=es(n.sheet,u.sheets);if(!s||!l.sheets[s])throw ts(n.sheet,u.sheets);var a=Do(t(l.sheets[s]),e,o,i,u,n),f=Ko(a,n);return n.properties?{data:f,properties:u}:f}function es(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Yo(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function ts(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function xt(r){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(r)}function Mn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function ns(r,e,n){return e&&Mn(r.prototype,e),n&&Mn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function rs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ls(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ot(r,e)}function os(r){var e=Fr();return function(){var t=At(r),l;if(e){var o=At(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return ss(this,l)}}function ss(r,e){if(e&&(xt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return is(r)}function is(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function en(r){var e=typeof Map=="function"?new Map:void 0;return en=function(t){if(t===null||!as(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Ft(t,arguments,At(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ot(l,t)},en(r)}function Ft(r,e,n){return Fr()?Ft=Reflect.construct:Ft=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Ot(a,i.prototype),a},Ft.apply(null,arguments)}function Fr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function as(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ot(r,e){return Ot=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Ot(r,e)}function At(r){return At=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},At(r)}var _e=function(r){ls(n,r);var e=os(n);function n(t){var l;return rs(this,n),l=e.call(this,"invalid"),l.reason=t,l}return ns(n)}(en(Error));function fs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new _e("not_a_number")}if(typeof r!="number")throw new _e("not_a_number");if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return r}function us(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return String(r)}throw new _e("not_a_string")}function cs(r){if(typeof r=="boolean")return r;throw new _e("not_a_boolean")}function $s(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new _e("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");var t=Nr(r,n);if(isNaN(t.valueOf()))throw new _e("out_of_bounds");return t}throw new _e("not_a_date")}function ps(r,e){return gs(r)||_s(r,e)||Dr(r,e)||ms()}function ms(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _s(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function gs(r){if(Array.isArray(r))return r}function tn(r){"@babel/helpers - typeof";return tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(r)}function ds(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Dr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dr(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Fn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Dn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fn(Object(n),!0).forEach(function(t){hs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function hs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var jn={isColumnOriented:!1};function bs(r,e,n){n?n=Dn(Dn({},jn),n):n=jn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;ys(e),l&&(r=ks(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=jr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var $=ds(a),g;!(g=$()).done;){var k=g.value;k.row=o[k.row-1]+1}return{rows:s,errors:a}}function jr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var $=f[a],g=r[$],k=tn(g.type)==="object"&&!Array.isArray(g.type),T=e[t.indexOf($)];T===void 0&&(T=null);var C=void 0,S=void 0,L=void 0;if(k)C=jr(g.type,e,n,t,l,o);else if(T===null)C=null;else if(Array.isArray(g.type)){var N=!1,D=ws(T).map(function(M){var P=Bn(M,g,o);return P.error&&(C=M,S=P.error,L=P.reason),P.value!==null&&(N=!0),P.value});S||(C=N?D:null)}else{var I=Bn(T,g,o);S=I.error,L=I.reason,C=S?T:I.value}!S&&C===null&&g.required&&(S="required"),S?(S={error:S,row:n+1,column:$,value:C},L&&(S.reason=L),g.type&&(S.type=g.type),l.push(S)):(u&&C!==null&&(u=!1),(C!==null||o.includeNullValues)&&(i[g.prop]=C))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function Bn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=rt(r,e.parse):e.type?t=vs(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function rt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function vs(r,e,n){switch(e){case String:return rt(r,us);case Number:return rt(r,fs);case Date:return rt(r,function(t){return $s(t,{properties:n.properties})});case Boolean:return rt(r,cs);default:if(typeof e=="function")return rt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Br(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Br(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function ws(r){for(var e=[],n=0;n<r.length;){var t=Br(r,",",n),l=ps(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var ks=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function ys(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function nn(r){"@babel/helpers - typeof";return nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(r)}function Rr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;nn(o)==="object"&&(o=Object.keys(r[l])[0],i=Rr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var Ss=["schema","map"];function Rn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Et(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(t){Ts(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ts(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Cs(r,e){if(r==null)return{};var n=Os(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Os(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function As(r,e,n){var t=n.schema,l=n.map,o=Cs(n,Ss);!t&&l&&(t=Rr(l));var i=xo(r,e,Et(Et({},o),{},{properties:t||o.properties}));return t?bs(i.data,t,Et(Et({},o),{},{properties:i.properties})):i}function Ls(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Xl(r).then(function(n){return As(n,Ll,e)})}function Is(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:l.authority_or_region,capital_scheme_id:l.capital_scheme_id,funding_programme:l.funding_programme});r.features=r.features.filter(t=>Ps(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.num_features++,t.properties.funding_programme=l.funding_programme,t.id=n++}return e}function Ps(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Ns(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ls(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Wr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const x={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},je=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Ms(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Ct({props:u}),V.push(()=>X(e,"value",i)),e.$on("change",r[2]),l=new nl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],K(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(p(e.$$.fragment,s),p(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}function Es(r,e,n){let t;De(r,ln,s=>n(4,t=s));let l="interventionType",o=bn("v1");function i(){let s;l=="interventionType"?(s=kr("v1"),n(1,o=bn("v1"))):(s=hr(["get","funding_programme"],{ATF2:x.atf2,ATF3:x.atf3,ATF4:x.atf4},"grey"),n(1,o=[["ATF2",x.atf2],["ATF3",x.atf3],["ATF4",x.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class Fs extends z{constructor(e){super(),U(this,e,Es,Ms,G,{})}}function Ds(r){let e;return{c(){e=w("Clear")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function js(r){let e,n,t,l,o,i;return t=new Jt({props:{$$slots:{default:[Ds]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=A("input"),n=O(),h(t.$$.fragment),W(e,"type","text"),W(e,"class","govuk-input govuk-input--width-10"),W(e,"id","filterText")},m(u,s){m(u,e,s),jt(e,r[0]),m(u,n,s),b(t,u,s),l=!0,o||(i=Tt(e,"input",r[12]),o=!0)},p(u,s){s&1&&e.value!==u[0]&&jt(e,u[0]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(p(t.$$.fragment,u),l=!0)},o(u){d(t.$$.fragment,u),l=!1},d(u){u&&(_(e),_(n)),v(t,u),o=!1,i()}}}function Bs(r){let e,n,t,l,o,i,u,s,a,f;function c(T){r[10](T)}let $={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&($.value=r[3]),e=new Ct({props:$}),V.push(()=>X(e,"value",c));function g(T){r[11](T)}let k={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(k.value=r[4]),l=new Ct({props:k}),V.push(()=>X(l,"value",g)),u=new br({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[js]},$$scope:{ctx:r}}}),a=new Fs({}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(T,C){b(e,T,C),m(T,t,C),b(l,T,C),m(T,i,C),b(u,T,C),m(T,s,C),b(a,T,C),f=!0},p(T,C){const S={};C&32&&(S.choices=T[5]),!n&&C&8&&(n=!0,S.value=T[3],K(()=>n=!1)),e.$set(S);const L={};C&64&&(L.choices=T[6]),!o&&C&16&&(o=!0,L.value=T[4],K(()=>o=!1)),l.$set(L);const N={};C&65537&&(N.$$scope={dirty:C,ctx:T}),u.$set(N)},i(T){f||(p(e.$$.fragment,T),p(l.$$.fragment,T),p(u.$$.fragment,T),p(a.$$.fragment,T),f=!0)},o(T){d(e.$$.fragment,T),d(l.$$.fragment,T),d(u.$$.fragment,T),d(a.$$.fragment,T),f=!1},d(T){T&&(_(t),_(i),_(s)),v(e,T),v(l,T),v(u,T),v(a,T)}}}function Rs(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",$,g,k=r[7].other.toLocaleString()+"",T,C;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),$=w(c),g=w(" crossings, "),T=w(k),C=w(`
    other)`)},m(S,L){m(S,e,L),m(S,t,L),m(S,l,L),m(S,i,L),m(S,u,L),m(S,a,L),m(S,f,L),m(S,$,L),m(S,g,L),m(S,T,L),m(S,C,L)},p(S,L){L&2&&n!==(n=S[1].size.toLocaleString()+"")&&R(t,n),L&128&&o!==(o=S[7].route.toLocaleString()+"")&&R(i,o),L&128&&s!==(s=S[7].area.toLocaleString()+"")&&R(a,s),L&128&&c!==(c=S[7].crossing.toLocaleString()+"")&&R($,c),L&128&&k!==(k=S[7].other.toLocaleString()+"")&&R(T,k)},d(S){S&&(_(e),_(t),_(l),_(i),_(u),_(a),_(f),_($),_(g),_(T),_(C))}}}function Hs(r){let e,n,t;function l(i){r[14](i)}let o={id:"show-schemes",$$slots:{default:[Rs]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new le({props:o}),V.push(()=>X(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65666&&(s.$$scope={dirty:u,ctx:i}),!n&&u&4&&(n=!0,s.checked=i[2],K(()=>n=!1)),e.$set(s)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Gs(r){let e,n,t,l;return e=new Ie({props:{label:"Filters",$$slots:{default:[Bs]},$$scope:{ctx:r}}}),t=new It({props:{small:!0,$$slots:{default:[Hs]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),m(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65657&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65670&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(p(e.$$.fragment,o),p(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&_(n),v(e,o),v(t,o)}}}function Ws(r,e,n){let{schemesGj:t}=e,{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,{show:u=!0}=e,s=[],a="",f=[],c="",$={area:0,route:0,crossing:0,other:0};on(()=>{let N=new Set,D=new Set;for(let I of l.values())I.authority_or_region&&N.add(I.authority_or_region),I.funding_programme&&D.add(I.funding_programme);n(5,s=Array.from(N.entries())),s.sort(),n(6,f=Array.from(D.entries())),f.sort()});function g(N,D,I){let M=N.toLowerCase(),P=F=>{var H,ee;if(M&&!((H=F.properties.name)!=null&&H.toLowerCase().includes(M))&&!((ee=F.properties.description)!=null&&ee.toLowerCase().includes(M)))return!1;if(D||I){let j=l.get(F.properties.scheme_reference);if(D&&j.authority_or_region!=D||I&&j.funding_programme!=I)return!1}return!0};n(1,o=new Set(t.features.filter(P).map(F=>F.properties.scheme_reference))),n(7,$={area:0,route:0,crossing:0,other:0});let E=F=>{var H,ee;return!(!o.has(F.properties.scheme_reference)||M&&!((H=F.properties.name)!=null&&H.toLowerCase().includes(M))&&!((ee=F.properties.description)!=null&&ee.toLowerCase().includes(M)))};for(let F of t.features)E(F)?(delete F.properties.hide_while_editing,n(7,$[F.properties.intervention_type]++,$)):F.properties.hide_while_editing=!0;n(8,t),n(7,$)}function k(N){a=N,n(3,a)}function T(N){c=N,n(4,c)}function C(){i=this.value,n(0,i)}const S=()=>n(0,i="");function L(N){u=N,n(2,u)}return r.$$set=N=>{"schemesGj"in N&&n(8,t=N.schemesGj),"schemes"in N&&n(9,l=N.schemes),"schemesToBeShown"in N&&n(1,o=N.schemesToBeShown),"filterText"in N&&n(0,i=N.filterText),"show"in N&&n(2,u=N.show)},r.$$.update=()=>{r.$$.dirty&25&&g(i,a,c)},[i,o,u,a,c,s,f,$,t,l,k,T,C,S,L]}class zs extends z{constructor(e){super(),U(this,e,Ws,Gs,G,{schemesGj:8,schemes:9,schemesToBeShown:1,filterText:0,show:2})}}function Us(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function qs(r){let e,n,t,l,o;return t=new q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Us]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,u){m(i,e,u),y(e,n),b(t,e,null),y(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(p(t.$$.fragment,i),o=!0)},o(i){d(t.$$.fragment,i),o=!1},d(i){i&&_(e),v(t)}}}class Ee extends z{constructor(e){super(),U(this,e,null,qs,G,{})}}function Hn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Gn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Wn(r){let e,n;return{c(){e=A("span"),n=w(` 
    `),Se(e,"background",r[5]),Se(e,"width","100%"),Se(e,"border","1px solid black")},m(t,l){m(t,e,l),y(e,n)},p(t,l){l&1&&Se(e,"background",t[5])},d(t){t&&_(e)}}}function zn(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){m(l,e,o),y(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&R(t,n)},d(l){l&&_(e)}}}function Vs(r){let e,n,t,l=ze(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Wn(Gn(r,l,s));let i=ze(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=zn(Hn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=O(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();Se(e,"display","flex"),Se(t,"display","flex"),Se(t,"justify-content","space-between")},m(s,a){m(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);m(s,n,a),m(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=ze(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Gn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Wn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=ze(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Hn(s,i,f);u[f]?u[f].p(c,a):(u[f]=zn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:ne,o:ne,d(s){s&&(_(e),_(n),_(t)),Bt(o,s),Bt(u,s)}}}function Xs(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class qe extends z{constructor(e){super(),U(this,e,Xs,Vs,G,{colorScale:0,limits:1})}}function Un(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Ks(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Ys(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Js(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Zs(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Qs(r){let e,n,t,l,o,i,u,s,a,f,c,$;return t=new q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ys]},$$scope:{ctx:r}}}),o=new q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Js]},$$scope:{ctx:r}}}),f=new q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Zs]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=O(),s=A("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(g,k){m(g,e,k),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),m(g,u,k),m(g,s,k),y(s,a),b(f,s,null),y(s,c),$=!0},p(g,k){const T={};k&65536&&(T.$$scope={dirty:k,ctx:g}),t.$set(T);const C={};k&65536&&(C.$$scope={dirty:k,ctx:g}),o.$set(C);const S={};k&65536&&(S.$$scope={dirty:k,ctx:g}),f.$set(S)},i(g){$||(p(t.$$.fragment,g),p(o.$$.fragment,g),p(f.$$.fragment,g),$=!0)},o(g){d(t.$$.fragment,g),d(o.$$.fragment,g),d(f.$$.fragment,g),$=!1},d(g){g&&(_(e),_(u),_(s)),v(t),v(o),v(f)}}}function xs(r){let e,n,t;return n=new se({props:{$$slots:{default:[Qs]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function qn(r){let e,n;return e=new qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ei(r){let e;return{c(){e=w("Average cars per household")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function ti(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function ni(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function ri(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function li(r){let e,n,t,l,o,i,u,s,a,f,c,$,g,k;return o=new q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ti]},$$scope:{ctx:r}}}),u=new q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ni]},$$scope:{ctx:r}}}),$=new q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ri]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=O(),f=A("p"),c=w("License: "),h($.$$.fragment),g=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(T,C){m(T,e,C),m(T,n,C),m(T,t,C),y(t,l),b(o,t,null),y(t,i),b(u,t,null),y(t,s),m(T,a,C),m(T,f,C),y(f,c),b($,f,null),y(f,g),k=!0},p(T,C){const S={};C&65536&&(S.$$scope={dirty:C,ctx:T}),o.$set(S);const L={};C&65536&&(L.$$scope={dirty:C,ctx:T}),u.$set(L);const N={};C&65536&&(N.$$scope={dirty:C,ctx:T}),$.$set(N)},i(T){k||(p(o.$$.fragment,T),p(u.$$.fragment,T),p($.$$.fragment,T),k=!0)},o(T){d(o.$$.fragment,T),d(u.$$.fragment,T),d($.$$.fragment,T),k=!1},d(T){T&&(_(e),_(n),_(t),_(a),_(f)),v(o),v(u),v($)}}}function oi(r){let e,n,t;return n=new se({props:{$$slots:{default:[li]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Vn(r){let e,n;return e=new qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function si(r){let e;return{c(){e=w("Population density")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function ii(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function ai(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function fi(r){let e,n,t,l,o,i,u,s,a;return t=new q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ii]},$$scope:{ctx:r}}}),o=new q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ai]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=O(),h(s.$$.fragment)},m(f,c){m(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),m(f,u,c),b(s,f,c),a=!0},p(f,c){const $={};c&65536&&($.$$scope={dirty:c,ctx:f}),t.$set($);const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(p(t.$$.fragment,f),p(o.$$.fragment,f),p(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(_(e),_(u)),v(t),v(o),v(s,f)}}}function ui(r){let e,n,t;return n=new se({props:{$$slots:{default:[fi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Xn(r){let e,n,t,l;return t=new qe({props:{colorScale:r[4],limits:r[6]().map(hi)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=O(),h(t.$$.fragment)},m(o,i){m(o,e,i),m(o,n,i),b(t,o,i),l=!0},p:ne,i(o){l||(p(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(_(e),_(n)),v(t,o)}}}function ci(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){m(a,e,f),y(e,n),y(e,t),y(t,o),y(e,i),y(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&R(o,l),f&8192&&u!==(u=a[14]+"")&&R(s,u)},d(a){a&&_(e)}}}function $i(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=A("b"),s=w(u),a=w(`
          cars`)},m(f,c){m(f,e,c),y(e,n),y(e,l),y(e,o),y(e,i),y(i,s),y(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&R(l,t),c&8200&&u!==(u=f[15]+"")&&R(s,u)},d(f){f&&_(e)}}}function pi(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){m(f,e,c),y(e,n),y(n,l),y(n,o),y(e,i),y(e,s),y(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&R(l,t),c&8192&&u!==(u=f[14]+"")&&R(s,u)},d(f){f&&_(e)}}}function mi(r){Un(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?pi:o[3]=="average_cars_per_household"?$i:ci}let t=n(r),l=t(r);return{c(){l.c(),e=Te()},m(o,i){l.m(o,i),m(o,e,i)},p(o,i){Un(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&_(e),l.d(o)}}}function _i(r){let e,n;return e=new oe({props:{$$slots:{default:[mi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gi(r){let e,n,t,l;const o=[B(Ye),{sourceLayer:Ye},{paint:{"fill-color":$e(["get",r[3]],r[6](),r[4]),"fill-opacity":Y(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[_i]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i}),e.$on("click",r[5]);const u=[B(`${Ye}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Z(o,[f&0&&te(B(Ye)),f&0&&{sourceLayer:Ye},f&88&&{paint:{"fill-color":$e(["get",a[3]],a[6](),a[4]),"fill-opacity":Y(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&8?Z(u,[f&0&&te(B(`${Ye}-outline`)),u[1],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set($)},i(a){l||(p(e.$$.fragment,a),p(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function di(r){let e,n,t,l,o,i,u,s,a,f,c,$,g,k;function T(E){r[7](E)}let C={id:"percent_households_with_car",$$slots:{right:[xs],default:[Ks]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new le({props:C}),V.push(()=>X(e,"checked",T)),e.$on("change",r[8]);let S=r[3]=="percent_households_with_car"&&qn(r);function L(E){r[9](E)}let N={id:"average_cars_per_household",$$slots:{right:[oi],default:[ei]},$$scope:{ctx:r}};r[1]!==void 0&&(N.checked=r[1]),o=new le({props:N}),V.push(()=>X(o,"checked",L)),o.$on("change",r[10]);let D=r[3]=="average_cars_per_household"&&Vn(r);function I(E){r[11](E)}let M={id:"population_density",$$slots:{right:[ui],default:[si]},$$scope:{ctx:r}};r[2]!==void 0&&(M.checked=r[2]),a=new le({props:M}),V.push(()=>X(a,"checked",I)),a.$on("change",r[12]);let P=r[3]=="population_density"&&Xn(r);return g=new ce({props:{url:`pmtiles://${fe()}/v1/${Ye}.pmtiles`,$$slots:{default:[gi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),S&&S.c(),l=O(),h(o.$$.fragment),u=O(),D&&D.c(),s=O(),h(a.$$.fragment),c=O(),P&&P.c(),$=O(),h(g.$$.fragment)},m(E,F){b(e,E,F),m(E,t,F),S&&S.m(E,F),m(E,l,F),b(o,E,F),m(E,u,F),D&&D.m(E,F),m(E,s,F),b(a,E,F),m(E,c,F),P&&P.m(E,F),m(E,$,F),b(g,E,F),k=!0},p(E,[F]){const H={};F&65536&&(H.$$scope={dirty:F,ctx:E}),!n&&F&1&&(n=!0,H.checked=E[0],K(()=>n=!1)),e.$set(H),E[3]=="percent_households_with_car"?S?(S.p(E,F),F&8&&p(S,1)):(S=qn(E),S.c(),p(S,1),S.m(l.parentNode,l)):S&&(ie(),d(S,1,1,()=>{S=null}),ae());const ee={};F&65536&&(ee.$$scope={dirty:F,ctx:E}),!i&&F&2&&(i=!0,ee.checked=E[1],K(()=>i=!1)),o.$set(ee),E[3]=="average_cars_per_household"?D?(D.p(E,F),F&8&&p(D,1)):(D=Vn(E),D.c(),p(D,1),D.m(s.parentNode,s)):D&&(ie(),d(D,1,1,()=>{D=null}),ae());const j={};F&65536&&(j.$$scope={dirty:F,ctx:E}),!f&&F&4&&(f=!0,j.checked=E[2],K(()=>f=!1)),a.$set(j),E[3]=="population_density"?P?(P.p(E,F),F&8&&p(P,1)):(P=Xn(E),P.c(),p(P,1),P.m($.parentNode,$)):P&&(ie(),d(P,1,1,()=>{P=null}),ae());const Q={};F&65544&&(Q.$$scope={dirty:F,ctx:E}),g.$set(Q)},i(E){k||(p(e.$$.fragment,E),p(S),p(o.$$.fragment,E),p(D),p(a.$$.fragment,E),p(P),p(g.$$.fragment,E),k=!0)},o(E){d(e.$$.fragment,E),d(S),d(o.$$.fragment,E),d(D),d(a.$$.fragment,E),d(P),d(g.$$.fragment,E),k=!1},d(E){E&&(_(t),_(l),_(u),_(s),_(c),_($)),v(e,E),S&&S.d(E),v(o,E),D&&D.d(E),v(a,E),P&&P.d(E),v(g,E)}}}let Ye="census_output_areas";const hi=r=>r.toLocaleString();function bi(r,e,n){let t=x.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(C){let S=C.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${S}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${S}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(C){l=C,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function $(C){o=C,n(1,o)}const g=()=>{n(0,l=!1),n(2,i=!1)};function k(C){i=C,n(2,i)}const T=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,$,g,k,T]}class vi extends z{constructor(e){super(),U(this,e,bi,di,G,{})}}function wi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:ne,i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function ki(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function yi(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ki]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),y(e,n),b(t,e,null),y(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(p(t.$$.fragment,s),p(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function Si(r){let e,n,t;return n=new se({props:{$$slots:{default:[yi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Ti(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){m(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&_(e)}}}function Ci(r){let e,n;return e=new oe({props:{$$slots:{default:[Ti,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oi(r){let e,n,t,l;const o=[B(lt),{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ci]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i}),e.$on("click",Li);const u=[B(`${lt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&te(B(lt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&3?Z(u,[f&0&&te(B(`${lt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(p(e.$$.fragment,a),p(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function Ai(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:lt,$$slots:{right:[Si],default:[wi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new Lt({props:{data:`${fe()}/v1/${lt}.geojson`,$$slots:{default:[Oi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(p(e.$$.fragment,s),p(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let lt="combined_authorities";function Li(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ii(r,e,n){let t=x.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Pi extends z{constructor(e){super(),U(this,e,Ii,Ai,G,{})}}function Ni(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Mi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Ei(r){let e;return{c(){e=w(`here
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Fi(r){let e,n,t,l,o,i,u,s,a;return t=new q({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Mi]},$$scope:{ctx:r}}}),o=new q({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Ei]},$$scope:{ctx:r}}}),s=new Ee({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=O(),h(s.$$.fragment)},m(f,c){m(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),m(f,u,c),b(s,f,c),a=!0},p(f,c){const $={};c&32&&($.$$scope={dirty:c,ctx:f}),t.$set($);const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(p(t.$$.fragment,f),p(o.$$.fragment,f),p(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(_(e),_(u)),v(t),v(o),v(s,f)}}}function Di(r){let e,n,t;return n=new se({props:{$$slots:{default:[Fi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Kn(r){let e,n;return e=new qe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ji(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,$=r[4].rank.toLocaleString()+"",g,k;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(i),s=O(),a=A("p"),f=w("Rank: "),c=A("b"),g=w($),k=w(`
        / 32,844 LSOAs`)},m(T,C){m(T,e,C),y(e,t),y(e,l),y(e,o),y(o,u),m(T,s,C),m(T,a,C),y(a,f),y(a,c),y(c,g),y(a,k)},p(T,C){C&16&&n!==(n=T[4].LSOA11CD+"")&&R(t,n),C&16&&i!==(i=T[4].score+"")&&R(u,i),C&16&&$!==($=T[4].rank.toLocaleString()+"")&&R(g,$)},d(T){T&&(_(e),_(s),_(a))}}}function Bi(r){let e,n;return e=new oe({props:{$$slots:{default:[ji,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ri(r){let e,n,t,l;const o=[B(Ge),{sourceLayer:Ge},{paint:{"fill-color":$e(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Y(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Bi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i});const u=[B(`${Ge}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Z(o,[f&0&&te(B(Ge)),f&0&&{sourceLayer:Ge},f&6&&{paint:{"fill-color":$e(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Y(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&1?Z(u,[f&0&&te(B(`${Ge}-outline`)),u[1],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(p(e.$$.fragment,a),p(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function Hi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:Ge,$$slots:{right:[Di],default:[Ni]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&Kn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Ge}.pmtiles`,$$slots:{default:[Ri]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),m(f,t,c),a&&a.m(f,c),m(f,l,c),b(o,f,c),i=!0},p(f,[c]){const $={};c&32&&($.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,$.checked=f[0],K(()=>n=!1)),e.$set($),f[0]?a?(a.p(f,c),c&1&&p(a,1)):(a=Kn(f),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(p(e.$$.fragment,f),p(a),p(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(_(t),_(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Ge="imd";function Gi(r,e,n){let t=x.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Wi extends z{constructor(e){super(),U(this,e,Gi,Hi,G,{})}}function zi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:ne,i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function Ui(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function qi(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),y(e,n),b(t,e,null),y(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(p(t.$$.fragment,s),p(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function Vi(r){let e,n,t;return n=new se({props:{$$slots:{default:[qi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Xi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){m(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&_(e)}}}function Ki(r){let e,n;return e=new oe({props:{$$slots:{default:[Xi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yi(r){let e,n,t,l;const o=[B(ot),{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ki]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i}),e.$on("click",Zi);const u=[B(`${ot}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&te(B(ot)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&3?Z(u,[f&0&&te(B(`${ot}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(p(e.$$.fragment,a),p(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function Ji(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ot,$$slots:{right:[Vi],default:[zi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new Lt({props:{data:`${fe()}/v1/${ot}.geojson`,$$slots:{default:[Yi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(p(e.$$.fragment,s),p(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let ot="local_authority_districts";function Zi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Qi(r,e,n){let t=x.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class xi extends z{constructor(e){super(),U(this,e,Qi,Ji,G,{})}}function ea(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:ne,i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function ta(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function na(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function ra(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function la(r){let e;return{c(){e=w("this map")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function oa(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function sa(r){let e,n,t,l,o,i,u,s,a,f,c,$,g,k,T,C,S,L,N,D,I,M;return t=new q({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ta]},$$scope:{ctx:r}}}),o=new q({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[na]},$$scope:{ctx:r}}}),u=new q({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ra]},$$scope:{ctx:r}}}),g=new q({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[la]},$$scope:{ctx:r}}}),L=new q({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[oa]},$$scope:{ctx:r}}}),I=new Ee({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=O(),f=A("p"),c=A("strong"),$=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(g.$$.fragment),k=w(" to get more details."),T=O(),C=A("p"),S=w("Data from ONS Geography via "),h(L.$$.fragment),N=w(", as of November 2022."),D=O(),h(I.$$.fragment)},m(P,E){m(P,e,E),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),b(u,e,null),y(e,s),m(P,a,E),m(P,f,E),y(f,c),y(c,$),b(g,c,null),y(c,k),m(P,T,E),m(P,C,E),y(C,S),b(L,C,null),y(C,N),m(P,D,E),b(I,P,E),M=!0},p(P,E){const F={};E&16&&(F.$$scope={dirty:E,ctx:P}),t.$set(F);const H={};E&16&&(H.$$scope={dirty:E,ctx:P}),o.$set(H);const ee={};E&16&&(ee.$$scope={dirty:E,ctx:P}),u.$set(ee);const j={};E&16&&(j.$$scope={dirty:E,ctx:P}),g.$set(j);const Q={};E&16&&(Q.$$scope={dirty:E,ctx:P}),L.$set(Q)},i(P){M||(p(t.$$.fragment,P),p(o.$$.fragment,P),p(u.$$.fragment,P),p(g.$$.fragment,P),p(L.$$.fragment,P),p(I.$$.fragment,P),M=!0)},o(P){d(t.$$.fragment,P),d(o.$$.fragment,P),d(u.$$.fragment,P),d(g.$$.fragment,P),d(L.$$.fragment,P),d(I.$$.fragment,P),M=!1},d(P){P&&(_(e),_(a),_(f),_(T),_(C),_(D)),v(t),v(o),v(u),v(g),v(L),v(I,P)}}}function ia(r){let e,n,t;return n=new se({props:{$$slots:{default:[sa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function aa(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){m(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&_(e)}}}function fa(r){let e,n;return e=new oe({props:{$$slots:{default:[aa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ua(r){let e,n,t,l;const o=[B(Oe),{sourceLayer:Oe},{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[fa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i});const u=[B(`${Oe}-outline`),{sourceLayer:Oe},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&te(B(Oe)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&3?Z(u,[f&0&&te(B(`${Oe}-outline`)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(p(e.$$.fragment,a),p(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function ca(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Oe,$$slots:{right:[ia],default:[ea]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Oe}.pmtiles`,$$slots:{default:[ua]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(p(e.$$.fragment,s),p(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let Oe="local_planning_authorities";function $a(r,e,n){let t=x.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class pa extends z{constructor(e){super(),U(this,e,$a,ca,G,{})}}function ma(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:ne,i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function _a(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function ga(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[_a]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),y(e,n),b(t,e,null),y(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(p(t.$$.fragment,s),p(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function da(r){let e,n,t;return n=new se({props:{$$slots:{default:[ga]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function ha(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){m(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&R(t,n)},d(l){l&&_(e)}}}function ba(r){let e,n;return e=new oe({props:{$$slots:{default:[ha,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function va(r){let e,n,t,l;const o=[B(Ae),{sourceLayer:Ae},{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ba]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i}),e.$on("click",ka);const u=[B(`${Ae}-outline`),{sourceLayer:Ae},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&te(B(Ae)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&3?Z(u,[f&0&&te(B(`${Ae}-outline`)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(p(e.$$.fragment,a),p(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function wa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ae,$$slots:{right:[da],default:[ma]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ae}.pmtiles`,$$slots:{default:[va]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(p(e.$$.fragment,s),p(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let Ae="parliamentary_constituencies";function ka(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function ya(r,e,n){let t=x.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Sa extends z{constructor(e){super(),U(this,e,ya,wa,G,{})}}function Ta(r){let e;return{c(){e=w("Pollution")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Ca(r){let e;return{c(){e=w(`DEFRA
      `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Oa(r){let e,n,t,l,o,i,u;return n=new q({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ca]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=w("These layers show air quality data from "),h(n.$$.fragment),t=w(`. The measurements are annual means, in units of µgm
      `),l=A("sup"),l.textContent="3",o=w(`
      . Note the particulate matter layers are not corrected for natural
      sources.
      `),h(i.$$.fragment)},m(s,a){m(s,e,a),b(n,s,a),m(s,t,a),m(s,l,a),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1024&&(f.$$scope={dirty:a,ctx:s}),n.$set(f)},i(s){u||(p(n.$$.fragment,s),p(i.$$.fragment,s),u=!0)},o(s){d(n.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(t),_(l),_(o)),v(n,s),v(i,s)}}}function Aa(r){let e,n,t;return n=new se({props:{$$slots:{default:[Oa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Yn(r){let e,n,t,l,o,i=r[1][2]+"",u,s,a,f,c,$,g,k,T,C,S,L,N;function D(M){r[8](M)}let I={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return r[0]!==void 0&&(I.value=r[0]),e=new Ct({props:I}),V.push(()=>X(e,"value",D)),{c(){h(e.$$.fragment),t=O(),l=A("p"),o=w("Data for "),u=w(i),s=O(),a=A("div"),f=A("label"),c=w(`Opacity
      `),$=A("input"),g=O(),k=A("img"),W($,"type","range"),W($,"min","0"),W($,"max","100"),pn(k.src,T=r[6](r[4]))||W(k,"src",T),W(k,"width",150),W(k,"alt",C=`Legend for ${r[0]} layer`)},m(M,P){b(e,M,P),m(M,t,P),m(M,l,P),y(l,o),y(l,u),m(M,s,P),m(M,a,P),y(a,f),y(f,c),y(f,$),jt($,r[3]),m(M,g,P),m(M,k,P),S=!0,L||(N=[Tt($,"change",r[9]),Tt($,"input",r[9])],L=!0)},p(M,P){const E={};!n&&P&1&&(n=!0,E.value=M[0],K(()=>n=!1)),e.$set(E),(!S||P&2)&&i!==(i=M[1][2]+"")&&R(u,i),P&8&&jt($,M[3]),(!S||P&16&&!pn(k.src,T=M[6](M[4])))&&W(k,"src",T),(!S||P&1&&C!==(C=`Legend for ${M[0]} layer`))&&W(k,"alt",C)},i(M){S||(p(e.$$.fragment,M),S=!0)},o(M){d(e.$$.fragment,M),S=!1},d(M){M&&(_(t),_(l),_(s),_(a),_(g),_(k)),v(e,M),L=!1,zr(N)}}}function La(r){let e,n;const t=[B("pollution"),{paint:{"raster-opacity":r[3]/100}},{layout:{visibility:r[2]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ml({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&12?Z(t,[t[0],i&8&&{paint:{"raster-opacity":o[3]/100}},i&4&&{layout:{visibility:o[2]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ia(r){let e,n,t,l,o,i;function u(f){r[7](f)}let s={id:"pollution",$$slots:{right:[Aa],default:[Ta]},$$scope:{ctx:r}};r[2]!==void 0&&(s.checked=r[2]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[2]&&Yn(r);return o=new dl({props:{tiles:[r[5](r[4])],tileSize:256,$$slots:{default:[La]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),m(f,t,c),a&&a.m(f,c),m(f,l,c),b(o,f,c),i=!0},p(f,[c]){const $={};c&1024&&($.$$scope={dirty:c,ctx:f}),!n&&c&4&&(n=!0,$.checked=f[2],K(()=>n=!1)),e.$set($),f[2]?a?(a.p(f,c),c&4&&p(a,1)):(a=Yn(f),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const g={};c&16&&(g.tiles=[f[5](f[4])]),c&1036&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(p(e.$$.fragment,f),p(a),p(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(_(t),_(l)),v(e,f),a&&a.d(f),v(o,f)}}}function Pa(r,e,n){let t,l,o=!1,i=50,u="PM25_viridis";function s(g){let k=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[1]}).toString();return`${g}?bbox={bbox-epsg-3857}&${k}`}function a(g){let k=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[1]}).toString();return`${g}?${k}`}function f(g){o=g,n(2,o)}function c(g){u=g,n(0,u)}function $(){i=Ur(this.value),n(3,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(1,t={NOx_viridis:["aq_amb_2022","22","2022"],PM25_viridis:["aq_amb_2022","21","2022"],PM10_viridis:["aq_amb_2022","22","2022"],NOxRoads_viridis:["aq_amb_2022","22","2022"],PM25Roads_viridis:["aq_amb_2022","14","2022"],PM10Roads_viridis:["aq_amb_2022","22","2022"]}[u]),r.$$.dirty&3&&n(4,l=`https://ukair.maps.rcdo.co.uk/ukairserver/services/${t[0]}/${u}/MapServer/WMSServer`)},[u,t,o,i,l,s,a,f,c,$]}class Na extends z{constructor(e){super(),U(this,e,Pa,Ia,G,{})}}function Ma(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:ne,i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function Ea(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Fa(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ea]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),y(e,n),b(t,e,null),y(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(p(t.$$.fragment,s),p(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function Da(r){let e,n,t;return n=new se({props:{$$slots:{default:[Fa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function ja(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){m(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&_(e)}}}function Ba(r){let e,n;return e=new oe({props:{$$slots:{default:[ja,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ra(r){let e,n,t,l;const o=[B(Le),{sourceLayer:Le},{paint:{"fill-color":r[1],"fill-opacity":Y(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ba]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Be({props:i}),e.$on("click",Ga);const u=[B(`${Le}-outline`),{sourceLayer:Le},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&te(B(Le)),f&0&&{sourceLayer:Le},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Y(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const $=f&3?Z(u,[f&0&&te(B(`${Le}-outline`)),f&0&&{sourceLayer:Le},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(p(e.$$.fragment,a),p(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function Ha(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Le,$$slots:{right:[Da],default:[Ma]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Le}.pmtiles`,$$slots:{default:[Ra]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(p(e.$$.fragment,s),p(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let Le="wards";function Ga(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Wa(r,e,n){let t=x.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class za extends z{constructor(e){super(),U(this,e,Wa,Ha,G,{})}}function Ua(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function qa(r){let e,n,t,l;return t=new q({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ua]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){m(o,e,i),y(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(p(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&_(e),v(t)}}}class Ve extends z{constructor(e){super(),U(this,e,null,qa,G,{})}}function Va(r){let e,n,t;return e=new ge({props:{color:x.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:ne,i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function Xa(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Ka(r){let e,n,t,l,o,i,u,s,a;return o=new q({props:{href:"https://gtfs.org",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),h(s.$$.fragment)},m(f,c){m(f,e,c),m(f,n,c),m(f,t,c),y(t,l),b(o,t,null),y(t,i),m(f,u,c),b(s,f,c),a=!0},p(f,c){const $={};c&8&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(p(o.$$.fragment,f),p(s.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(_(e),_(n),_(t),_(u)),v(o),v(s,f)}}}function Ya(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ka]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Ja(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Za(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Qa(r){let e;function n(o,i){return o[2].has_bus_lane?Za:Ja}let t=n(r),l=t(r);return{c(){l.c(),e=Te()},m(o,i){l.m(o,i),m(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&_(e),l.d(o)}}}function xa(r){let e,n;return e=new oe({props:{$$slots:{default:[Qa,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ef(r){let e,n;const t=[B(st),{sourceLayer:st},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],x.bus_route_with_lane,x.bus_route_without_lane],"line-width":5,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[xa]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Z(t,[i&0&&te(B(st)),i&0&&{sourceLayer:st},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function tf(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:st,$$slots:{right:[Ya],default:[Va]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${st}.pmtiles`,$$slots:{default:[ef]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(p(e.$$.fragment,s),p(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let st="bus_routes";function nf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class rf extends z{constructor(e){super(),U(this,e,nf,tf,G,{})}}function Jn(r){const e=$f(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function Zn(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function lf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function of(r){let e,n,t,l,o,i,u,s;return u=new Ve({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=O(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=O(),h(u.$$.fragment)},m(a,f){m(a,e,f),m(a,n,f),m(a,t,f),m(a,l,f),m(a,o,f),m(a,i,f),b(u,a,f),s=!0},p:ne,i(a){s||(p(u.$$.fragment,a),s=!0)},o(a){d(u.$$.fragment,a),s=!1},d(a){a&&(_(e),_(n),_(t),_(l),_(o),_(i)),v(u,a)}}}function sf(r){let e,n,t;return n=new se({props:{$$slots:{default:[of]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Qn(r){let e,n,t=ze(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=xn(Zn(r,t,i));const o=i=>d(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Te()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);m(i,e,u),n=!0},p(i,u){if(u&2){t=ze(i[1]);let s;for(s=0;s<t.length;s+=1){const a=Zn(i,t,s);l[s]?(l[s].p(a,u),p(l[s],1)):(l[s]=xn(a),l[s].c(),p(l[s],1),l[s].m(e.parentNode,e))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)p(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)d(l[u]);n=!1},d(i){i&&_(e),Bt(l,i)}}}function xn(r){let e,n,t,l=r[7]+"",o,i,u;return n=new ge({props:{color:r[8]}}),{c(){e=A("div"),h(n.$$.fragment),t=O(),o=w(l),i=O()},m(s,a){m(s,e,a),b(n,e,null),y(e,t),y(e,o),y(e,i),u=!0},p:ne,i(s){u||(p(n.$$.fragment,s),u=!0)},o(s){d(n.$$.fragment,s),u=!1},d(s){s&&_(e),v(n)}}}function af(r){Jn(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,$,g=r[6]+"",k;return{c(){e=A("h2"),t=w(n),l=O(),o=A("p"),i=w("Direction: "),u=A("b"),a=O(),f=A("p"),c=w("Width: "),$=A("b"),k=w(g)},m(T,C){m(T,e,C),y(e,t),m(T,l,C),m(T,o,C),y(o,i),y(o,u),u.innerHTML=s,m(T,a,C),m(T,f,C),y(f,c),y(f,$),y($,k)},p(T,C){Jn(T),C&8&&n!==(n=T[4]+"")&&R(t,n),C&8&&s!==(s=T[5]+"")&&(u.innerHTML=s),C&8&&g!==(g=T[6]+"")&&R(k,g)},d(T){T&&(_(e),_(l),_(o),_(a),_(f))}}}function ff(r){let e,n;return e=new oe({props:{$$slots:{default:[af,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uf(r){let e,n;const t=[B(it),{sourceLayer:it},{paint:{"line-color":hr(["get","kind"],{track:x.cycle_paths.track,lane:x.cycle_paths.lane,shared_use_segregated:x.cycle_paths.shared_use_segregated,shared_use_unsegregated:x.cycle_paths.shared_use_unsegregated},"red"),"line-width":je,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[ff]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),e.$on("click",pf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Z(t,[i&0&&te(B(it)),i&0&&{sourceLayer:it},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function cf(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:it,$$slots:{right:[sf],default:[lf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&Qn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${it}.pmtiles`,$$slots:{default:[uf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),m(f,t,c),a&&a.m(f,c),m(f,l,c),b(o,f,c),i=!0},p(f,[c]){const $={};c&2048&&($.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,$.checked=f[0],K(()=>n=!1)),e.$set($),f[0]?a?(a.p(f,c),c&1&&p(a,1)):(a=Qn(f),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const g={};c&2049&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(p(e.$$.fragment,f),p(a),p(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(_(t),_(l)),v(e,f),a&&a.d(f),v(o,f)}}}let it="cycle_paths";function $f(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function pf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function mf(r,e,n){let t=[["Separated tracks",x.cycle_paths.track],["Unprotected lanes",x.cycle_paths.lane],["Shared-use (segregated)",x.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",x.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class _f extends z{constructor(e){super(),U(this,e,mf,cf,G,{})}}function gf(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:ne,i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function df(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function hf(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[df]},$$scope:{ctx:r}}}),i=new Ee({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),y(e,n),b(t,e,null),y(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(p(t.$$.fragment,s),p(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function bf(r){let e,n,t;return n=new se({props:{$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function vf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){m(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&R(t,n)},d(l){l&&_(e)}}}function wf(r){let e,n;return e=new oe({props:{$$slots:{default:[vf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kf(r){let e,n;const t=[B(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[wf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Z(t,[i&0&&te(B(at)),i&0&&{sourceLayer:at},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Y(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function yf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:at,$$slots:{right:[bf],default:[gf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${at}.pmtiles`,$$slots:{default:[kf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(p(e.$$.fragment,s),p(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let at="mrn";function Sf(r,e,n){let t=x.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Tf extends z{constructor(e){super(),U(this,e,Sf,yf,G,{})}}function Cf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Of(r){let e;return{c(){e=w("the PCT website")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Af(r){let e;return{c(){e=w("2017 journal article")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Lf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new q({props:{href:"https://www.pct.bike",$$slots:{default:[Of]},$$scope:{ctx:r}}}),a=new q({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Af]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=O(),o=A("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m($,g){m($,e,g),m($,n,g),m($,t,g),m($,l,g),m($,o,g),y(o,i),b(u,o,null),y(o,s),b(a,o,null),y(o,f),c=!0},p($,g){const k={};g&1024&&(k.$$scope={dirty:g,ctx:$}),u.$set(k);const T={};g&1024&&(T.$$scope={dirty:g,ctx:$}),a.$set(T)},i($){c||(p(u.$$.fragment,$),p(a.$$.fragment,$),c=!0)},o($){d(u.$$.fragment,$),d(a.$$.fragment,$),c=!1},d($){$&&(_(e),_(n),_(t),_(l),_(o)),v(u),v(a)}}}function If(r){let e,n,t;return n=new se({props:{$$slots:{default:[Lf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function er(r){let e,n,t,l,o,i,u,s;e=new qe({props:{colorScale:r[3],limits:r[4]}});function a(g){r[7](g)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new vr({props:f}),V.push(()=>X(t,"value",a));function c(g){r[8](g)}let $={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&($.value=r[1]),i=new Ct({props:$}),V.push(()=>X(i,"value",c)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(i.$$.fragment)},m(g,k){b(e,g,k),m(g,n,k),b(t,g,k),m(g,o,k),b(i,g,k),s=!0},p(g,k){const T={};!l&&k&1&&(l=!0,T.value=g[0],K(()=>l=!1)),t.$set(T);const C={};!u&&k&2&&(u=!0,C.value=g[1],K(()=>u=!1)),i.$set(C)},i(g){s||(p(e.$$.fragment,g),p(t.$$.fragment,g),p(i.$$.fragment,g),s=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(i.$$.fragment,g),s=!1},d(g){g&&(_(n),_(o)),v(e,g),v(t,g),v(i,g)}}}function Pf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new sn(!1),t=Te(),e.a=t},m(l,o){e.m(n,l,o),m(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(_(t),e.d())}}}function Nf(r){let e,n;return e=new oe({props:{$$slots:{default:[Pf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mf(r){let e,n;const t=[B(Pe),{sourceLayer:Pe},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":je,"line-opacity":Y(1,.5)}},{layout:{visibility:r[2]&&r[0]==Pe?"visible":"none"}}];let l={$$slots:{default:[Nf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Z(t,[i&0&&te(B(Pe)),i&0&&{sourceLayer:Pe},i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":je,"line-opacity":Y(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Pe?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ef(r){let e,n=r[5](r[9])+"",t;return{c(){e=new sn(!1),t=Te(),e.a=t},m(l,o){e.m(n,l,o),m(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(_(t),e.d())}}}function Ff(r){let e,n;return e=new oe({props:{$$slots:{default:[Ef,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Df(r){let e,n;const t=[B(Je),{sourceLayer:Je},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":je,"line-opacity":Y(1,.5)}},{layout:{visibility:r[2]&&r[0]==Je?"visible":"none"}}];let l={$$slots:{default:[Ff]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Z(t,[i&0&&te(B(Je)),i&0&&{sourceLayer:Je},t[2],t[3],i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":je,"line-opacity":Y(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Je?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function jf(r){let e,n,t,l,o,i,u,s;function a($){r[6]($)}let f={id:Pe,$$slots:{right:[If],default:[Cf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new le({props:f}),V.push(()=>X(e,"checked",a));let c=r[2]&&er(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Pe}.pmtiles`,$$slots:{default:[Mf]},$$scope:{ctx:r}}}),u=new ce({props:{url:`pmtiles://${fe()}/v1/${Je}.pmtiles`,$$slots:{default:[Df]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),c&&c.c(),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment)},m($,g){b(e,$,g),m($,t,g),c&&c.m($,g),m($,l,g),b(o,$,g),m($,i,g),b(u,$,g),s=!0},p($,[g]){const k={};g&1024&&(k.$$scope={dirty:g,ctx:$}),!n&&g&4&&(n=!0,k.checked=$[2],K(()=>n=!1)),e.$set(k),$[2]?c?(c.p($,g),g&4&&p(c,1)):(c=er($),c.c(),p(c,1),c.m(l.parentNode,l)):c&&(ie(),d(c,1,1,()=>{c=null}),ae());const T={};g&1031&&(T.$$scope={dirty:g,ctx:$}),o.$set(T);const C={};g&1031&&(C.$$scope={dirty:g,ctx:$}),u.$set(C)},i($){s||(p(e.$$.fragment,$),p(c),p(o.$$.fragment,$),p(u.$$.fragment,$),s=!0)},o($){d(e.$$.fragment,$),d(c),d(o.$$.fragment,$),d(u.$$.fragment,$),s=!1},d($){$&&(_(t),_(l),_(i)),v(e,$),c&&c.d($),v(o,$),v(u,$)}}}let Pe="pct_commute",Je="pct_school";function Bf(r,e,n){let t=x.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Pe,i="baseline",u=!1;function s($){let g=$.baseline,k=$.gov_target,T=$.go_dutch,C=`<h2>Trip purpose: ${o==Pe?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)C+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let S=(k/g).toFixed(1),L=(T/g).toFixed(1);C+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${S}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${L}x</b> of baseline)</p>`}return C}function a($){u=$,n(2,u)}function f($){o=$,n(0,o)}function c($){i=$,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class Rf extends z{constructor(e){super(),U(this,e,Bf,jf,G,{})}}function Hf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Gf(r){let e;return{c(){e=w("Basemap")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Wf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function zf(r){let e,n,t,l,o,i,u,s,a,f,c,$;return t=new q({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Gf]},$$scope:{ctx:r}}}),f=new q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Wf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=O(),s=A("p"),a=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(g,k){m(g,e,k),y(e,n),b(t,e,null),y(e,l),m(g,o,k),m(g,i,k),m(g,u,k),m(g,s,k),y(s,a),b(f,s,null),y(s,c),$=!0},p(g,k){const T={};k&256&&(T.$$scope={dirty:k,ctx:g}),t.$set(T);const C={};k&256&&(C.$$scope={dirty:k,ctx:g}),f.$set(C)},i(g){$||(p(t.$$.fragment,g),p(f.$$.fragment,g),$=!0)},o(g){d(t.$$.fragment,g),d(f.$$.fragment,g),$=!1},d(g){g&&(_(e),_(o),_(i),_(u),_(s)),v(t),v(f)}}}function Uf(r){let e,n,t;return n=new se({props:{$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function tr(r){let e,n,t,l,o;e=new qe({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new vr({props:u}),V.push(()=>X(t,"value",i)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(s,a){b(e,s,a),m(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],K(()=>l=!1)),t.$set(f)},i(s){o||(p(e.$$.fragment,s),p(t.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),o=!1},d(s){s&&_(n),v(e,s),v(t,s)}}}function qf(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,$=r[4][r[7].highest_description]+"",g,k;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=O(),u=A("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),g=w($),k=w(")")},m(T,C){m(T,e,C),y(e,n),y(e,l),y(e,o),m(T,i,C),m(T,u,C),y(u,s),y(u,f),y(u,c),y(u,g),y(u,k)},p(T,C){C&128&&t!==(t=T[7].indicative_mph+"")&&R(l,t),C&128&&a!==(a=T[7].highest_mph+"")&&R(f,a),C&128&&$!==($=T[4][T[7].highest_description]+"")&&R(g,$)},d(T){T&&(_(e),_(i),_(u))}}}function Vf(r){let e,n;return e=new oe({props:{$$slots:{default:[qf,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xf(r){let e,n;const t=[B(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[0]],r[3],r[2]),"line-width":je,"line-opacity":Y(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[Vf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Z(t,[i&0&&te(B(ft)),i&0&&{sourceLayer:ft},t[2],t[3],i&13&&{paint:{"line-color":$e(["get",o[0]],o[3],o[2]),"line-width":je,"line-opacity":Y(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Kf(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ft,$$slots:{right:[Uf],default:[Hf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[1]&&tr(r);return o=new ce({props:{url:`pmtiles://${an()}/v1/${ft}.pmtiles`,$$slots:{default:[Xf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),m(f,t,c),a&&a.m(f,c),m(f,l,c),b(o,f,c),i=!0},p(f,[c]){const $={};c&256&&($.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,$.checked=f[1],K(()=>n=!1)),e.$set($),f[1]?a?(a.p(f,c),c&2&&p(a,1)):(a=tr(f),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const g={};c&259&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(p(e.$$.fragment,f),p(a),p(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(_(t),_(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ft="road_speeds";function Yf(r,e,n){let t=x.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class Jf extends z{constructor(e){super(),U(this,e,Yf,Kf,G,{})}}function Zf(r){let e;return{c(){e=w("OS Road widths")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Qf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function xf(r){let e,n,t,l,o,i,u,s,a;return u=new q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Qf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=O(),o=A("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){m(f,e,c),m(f,n,c),m(f,t,c),m(f,l,c),m(f,o,c),y(o,i),b(u,o,null),y(o,s),a=!0},p(f,c){const $={};c&32&&($.$$scope={dirty:c,ctx:f}),u.$set($)},i(f){a||(p(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(_(e),_(n),_(t),_(l),_(o)),v(u)}}}function eu(r){let e,n,t;return n=new se({props:{$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function nr(r){let e,n;return e=new qe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tu(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",$,g;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),i=w(`
        meters`),u=O(),s=A("p"),a=w("Minimum width: "),f=A("b"),$=w(c),g=w(`
        meters`)},m(k,T){m(k,e,T),y(e,n),y(e,t),y(t,o),y(e,i),m(k,u,T),m(k,s,T),y(s,a),y(s,f),y(f,$),y(s,g)},p(k,T){T&16&&l!==(l=k[4].average+"")&&R(o,l),T&16&&c!==(c=k[4].minimum+"")&&R($,c)},d(k){k&&(_(e),_(u),_(s))}}}function nu(r){let e,n;return e=new oe({props:{$$slots:{default:[tu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ru(r){let e,n;const t=[B(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get","average"],r[2],r[1]),"line-width":je,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[nu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Z(t,[i&0&&te(B(ut)),i&0&&{sourceLayer:ut},t[2],t[3],i&6&&{paint:{"line-color":$e(["get","average"],o[2],o[1]),"line-width":je,"line-opacity":Y(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function lu(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ut,$$slots:{right:[eu],default:[Zf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&nr(r);return o=new ce({props:{url:`pmtiles://${an()}/v1/${ut}.pmtiles`,$$slots:{default:[ru]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),m(f,t,c),a&&a.m(f,c),m(f,l,c),b(o,f,c),i=!0},p(f,[c]){const $={};c&32&&($.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,$.checked=f[0],K(()=>n=!1)),e.$set($),f[0]?a?(a.p(f,c),c&1&&p(a,1)):(a=nr(f),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(p(e.$$.fragment,f),p(a),p(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(_(t),_(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="road_widths";function ou(r,e,n){let t=x.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class su extends z{constructor(e){super(),U(this,e,ou,lu,G,{})}}function iu(r){let e,n,t;return{c(){e=A("input"),W(e,"class","govuk-file-upload"),W(e,"id","load-criticals"),W(e,"type","file")},m(l,o){m(l,e,o),r[7](e),n||(t=Tt(e,"change",r[5]),n=!0)},p:ne,d(l){l&&_(e),r[7](null),n=!1,t()}}}function rr(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[fu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function au(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new ge({props:{color:yt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),m(u,n,s),m(u,l,s),m(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&R(l,t)},i(u){i||(p(e.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),i=!1},d(u){u&&(_(n),_(l),_(o)),v(e,u)}}}function fu(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[au]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),V.push(()=>X(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],K(()=>n=!1)),e.$set(s)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function uu(r){let e,n,t,l,o,i;e=new br({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[iu]},$$scope:{ctx:r}}}),t=new wr({props:{errorMessage:r[3]}});let u=r[2]>0&&rr(r);return{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),u&&u.c(),o=Te()},m(s,a){b(e,s,a),m(s,n,a),b(t,s,a),m(s,l,a),u&&u.m(s,a),m(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&p(u,1)):(u=rr(s),u.c(),p(u,1),u.m(o.parentNode,o)):u&&(ie(),d(u,1,1,()=>{u=null}),ae())},i(s){i||(p(e.$$.fragment,s),p(t.$$.fragment,s),p(u),i=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(u),i=!1},d(s){s&&(_(n),_(l),_(o)),v(e,s),v(t,s),u&&u.d(s)}}}function cu(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,$,g,k,T=r[10].notes+"",C,S,L,N,D,I,M,P=r[10].id+"",E,F,H,ee,j,Q=(r[10].inspector??"???")+"",ve,ht,de,xe=r[10].submission_time+"",bt,et,pe,vt,Fe,Re=r[10].scheme_reference+"",Xe,wt,tt,Ke=r[10].current_design_stage+"",nt;return{c(){e=A("div"),n=A("h2"),l=w(t),o=O(),i=A("p"),u=A("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=O(),$=A("p"),g=A("u"),g.textContent="Notes",k=w(`
          : `),C=w(T),S=O(),L=A("hr"),N=O(),D=A("p"),I=w("Critical issue ID: "),M=A("b"),E=w(P),F=O(),H=A("p"),ee=w("Submitted by "),j=A("b"),ve=w(Q),ht=w(`
          at
          `),de=A("b"),bt=w(xe),et=O(),pe=A("p"),vt=w("For scheme "),Fe=A("b"),Xe=w(Re),wt=w(`
          in stage
          `),tt=A("b"),nt=w(Ke),Se(e,"max-width","30vw")},m(he,Ce){m(he,e,Ce),y(e,n),y(n,l),y(e,o),y(e,i),y(i,u),y(i,s),y(i,f),y(e,c),y(e,$),y($,g),y($,k),y($,C),y(e,S),y(e,L),y(e,N),y(e,D),y(D,I),y(D,M),y(M,E),y(e,F),y(e,H),y(H,ee),y(H,j),y(j,ve),y(H,ht),y(H,de),y(de,bt),y(e,et),y(e,pe),y(pe,vt),y(pe,Fe),y(Fe,Xe),y(pe,wt),y(pe,tt),y(tt,nt)},p(he,Ce){Ce&1024&&t!==(t=he[10].critical_type+"")&&R(l,t),Ce&1024&&a!==(a=he[10].location_description+"")&&R(f,a),Ce&1024&&T!==(T=he[10].notes+"")&&R(C,T),Ce&1024&&P!==(P=he[10].id+"")&&R(E,P),Ce&1024&&Q!==(Q=(he[10].inspector??"???")+"")&&R(ve,Q),Ce&1024&&xe!==(xe=he[10].submission_time+"")&&R(bt,xe),Ce&1024&&Re!==(Re=he[10].scheme_reference+"")&&R(Xe,Re),Ce&1024&&Ke!==(Ke=he[10].current_design_stage+"")&&R(nt,Ke)},d(he){he&&_(e)}}}function $u(r){let e,n;return e=new oe({props:{$$slots:{default:[cu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pu(r){let e,n,t,l,o,i;const u=[B(`${We}-clusters`),{applyToClusters:!0},{paint:{"circle-color":yt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let g=0;g<u.length;g+=1)s=J(s,u[g]);e=new Ue({props:s}),e.$on("click",r[6]);const a=[B(`${We}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let g=0;g<a.length;g+=1)f=J(f,a[g]);t=new wl({props:f});const c=[B(`${We}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":yt,"circle-opacity":Y(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let $={$$slots:{default:[$u]},$$scope:{ctx:r}};for(let g=0;g<c.length;g+=1)$=J($,c[g]);return o=new Ue({props:$}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment)},m(g,k){b(e,g,k),m(g,n,k),b(t,g,k),m(g,l,k),b(o,g,k),i=!0},p(g,k){const T=k&2?Z(u,[k&0&&te(B(`${We}-clusters`)),u[1],k&0&&{paint:{"circle-color":yt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},k&2&&{layout:{visibility:g[1]?"visible":"none"}},u[4]]):{};e.$set(T);const C=k&2?Z(a,[k&0&&te(B(`${We}-counts`)),a[1],k&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:g[1]?"visible":"none"}}]):{};t.$set(C);const S=k&2?Z(c,[k&0&&te(B(`${We}-points`)),c[1],c[2],c[3],k&0&&{paint:{"circle-color":yt,"circle-opacity":Y(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},k&2&&{layout:{visibility:g[1]?"visible":"none"}}]):{};k&2048&&(S.$$scope={dirty:k,ctx:g}),o.$set(S)},i(g){i||(p(e.$$.fragment,g),p(t.$$.fragment,g),p(o.$$.fragment,g),i=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),i=!1},d(g){g&&(_(n),_(l)),v(e,g),v(t,g),v(o,g)}}}function mu(r){let e,n,t,l;return e=new Ie({props:{label:"Critical Issues",$$slots:{default:[uu]},$$scope:{ctx:r}}}),t=new Lt({props:{id:We,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[pu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),m(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(p(e.$$.fragment,o),p(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&_(n),v(e,o),v(t,o)}}}let We="criticals",yt="red";function _u(r,e,n){let t;De(r,ln,g=>n(9,t=g));let l,o=!0,i=0,u="",s=qr();async function a(g){try{n(4,s=await Ns(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(k){n(3,u=`The file you loaded is broken: ${k}`)}}function f(g){t.getSource(We).getClusterExpansionZoom(g.detail.features[0].properties.cluster_id,(k,T)=>{k||t.easeTo({center:g.detail.features[0].geometry.coordinates,zoom:T})})}function c(g){V[g?"unshift":"push"](()=>{l=g,n(0,l)})}function $(g){o=g,n(1,o)}return[l,o,i,u,s,a,f,c,$]}class gu extends z{constructor(e){super(),U(this,e,_u,mu,G,{})}}function du(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:ne,i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function hu(r){let e;return{c(){e=w("crossing")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function bu(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[hu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),y(e,n),b(t,e,null),y(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(p(t.$$.fragment,s),p(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function vu(r){let e,n,t;return n=new se({props:{$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function wu(r){let e,n=lr(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){m(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=lr(l[3])+"")&&R(t,n)},d(l){l&&_(e)}}}function ku(r){let e,n;return e=new oe({props:{$$slots:{default:[wu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yu(r){let e,n;const t=[B(ct),{sourceLayer:ct},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[ku]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ue({props:l}),e.$on("click",Tu),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Z(t,[i&0&&te(B(ct)),i&0&&{sourceLayer:ct},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Su(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ct,$$slots:{right:[vu],default:[du]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${ct}.pmtiles`,$$slots:{default:[yu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(p(e.$$.fragment,s),p(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let ct="crossings";function lr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Tu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Cu(r,e,n){let t=x.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ou extends z{constructor(e){super(),U(this,e,Cu,Su,G,{})}}function Au(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:ne,i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function Lu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Iu(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Lu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),y(e,n),b(t,e,null),y(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(p(t.$$.fragment,s),p(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function Pu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Iu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Nu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(i,u){m(i,e,u),y(e,n),y(e,t),y(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&R(o,l)},d(i){i&&_(e)}}}function Mu(r){let e,n;return e=new oe({props:{$$slots:{default:[Nu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Eu(r){let e,n;const t=[B($t),{sourceLayer:$t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Mu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Z(t,[i&0&&te(B($t)),i&0&&{sourceLayer:$t},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Fu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:$t,$$slots:{right:[Pu],default:[Au]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${$t}.pmtiles`,$$slots:{default:[Eu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(p(e.$$.fragment,s),p(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let $t="cycle_parking";function Du(r,e,n){let t=x.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ju extends z{constructor(e){super(),U(this,e,Du,Fu,G,{})}}function Bu(r){let e,n,t,l;return e=new ge({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=O(),t=w(r[2])},m(o,i){b(e,o,i),m(o,n,i),m(o,t,i),l=!0},p(o,i){(!l||i&4)&&R(t,o[2])},i(o){l||(p(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(_(n),_(t)),v(e,o)}}}function Ru(r){let e;const n=r[5].default,t=mt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&_t(t,n,l,l[7],e?dt(n,l[7],o,null):gt(l[7]),null)},i(l){e||(p(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Hu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ru]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Gu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){m(l,e,o),y(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&R(t,n)},d(l){l&&_(e)}}}function Wu(r){let e,n;return e=new oe({props:{$$slots:{default:[Gu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zu(r){let e,n;const t=[B(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Y(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Wu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Be({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Z(t,[i&1&&te(B(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":Y(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Uu(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[Hu],default:[Bu]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[zu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],K(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${fe()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(p(e.$$.fragment,s),p(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}function qu(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=x[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class un extends z{constructor(e){super(),U(this,e,qu,Uu,G,{name:0,singularNoun:1,pluralNoun:2})}}function Vu(r){let e;return{c(){e=w("hospital")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Xu(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Vu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),y(e,n),b(t,e,null),y(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(p(t.$$.fragment,s),p(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function Ku(r){let e,n;return e=new un({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Xu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Yu extends z{constructor(e){super(),U(this,e,null,Ku,G,{})}}function Ju(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:ne,i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function Zu(r){let e;return{c(){e=w("railway station")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Qu(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Zu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),y(e,n),b(t,e,null),y(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(p(t.$$.fragment,s),p(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function xu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Qu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function ec(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){m(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&R(t,n)},d(l){l&&_(e)}}}function tc(r){let e,n;return e=new oe({props:{$$slots:{default:[ec,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nc(r){let e,n;const t=[B(Gt),{paint:{"circle-color":r[1],"circle-radius":Rt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[tc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Z(t,[i&0&&te(B(Gt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Rt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function rc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Gt,$$slots:{right:[xu],default:[Ju]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new Lt({props:{data:`${fe()}/v1/${Gt}.geojson`,$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(p(e.$$.fragment,s),p(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let Gt="railway_stations";function lc(r,e,n){let t=x.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class oc extends z{constructor(e){super(),U(this,e,lc,rc,G,{})}}function sc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function ic(r){let e,n,t,l,o,i,u;return t=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[sc]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),y(e,n),b(t,e,null),y(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(p(t.$$.fragment,s),p(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function ac(r){let e,n;return e=new un({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[ic]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class fc extends z{constructor(e){super(),U(this,e,null,ac,G,{})}}function uc(r){let e;return{c(){e=w("sports pitches")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function cc(r){let e;return{c(){e=w("sports centres")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function $c(r){let e,n,t,l,o,i,u,s,a;return t=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[uc]},$$scope:{ctx:r}}}),o=new q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[cc]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),h(s.$$.fragment)},m(f,c){m(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),m(f,u,c),b(s,f,c),a=!0},p(f,c){const $={};c&1&&($.$$scope={dirty:c,ctx:f}),t.$set($);const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(p(t.$$.fragment,f),p(o.$$.fragment,f),p(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(_(e),_(u)),v(t),v(o),v(s,f)}}}function pc(r){let e,n;return e=new un({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class mc extends z{constructor(e){super(),U(this,e,null,pc,G,{})}}function _c(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function gc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function dc(r){let e;return{c(){e=w("methodology")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function hc(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new q({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[gc]},$$scope:{ctx:r}}}),o=new q({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[dc]},$$scope:{ctx:r}}}),f=new Ee({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=O(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=O(),h(f.$$.fragment)},m($,g){m($,e,g),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),m($,u,g),m($,s,g),m($,a,g),b(f,$,g),c=!0},p($,g){const k={};g&64&&(k.$$scope={dirty:g,ctx:$}),t.$set(k);const T={};g&64&&(T.$$scope={dirty:g,ctx:$}),o.$set(T)},i($){c||(p(t.$$.fragment,$),p(o.$$.fragment,$),p(f.$$.fragment,$),c=!0)},o($){d(t.$$.fragment,$),d(o.$$.fragment,$),d(f.$$.fragment,$),c=!1},d($){$&&(_(e),_(u),_(s),_(a)),v(t),v(o),v(f,$)}}}function bc(r){let e,n,t;return n=new se({props:{$$slots:{default:[hc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),W(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function or(r){let e,n;return e=new qe({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,$,g,k=r[5].pedal_cycles_2022.toLocaleString()+"",T,C,S,L,N,D=r[5].method+"",I;return{c(){e=A("h2"),t=w(n),l=O(),o=A("p"),i=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(s),f=O(),c=A("p"),$=w("Total pedal cycles (2022 AADF): "),g=A("b"),T=w(k),C=O(),S=A("p"),L=w("Count method: "),N=A("b"),I=w(D)},m(M,P){m(M,e,P),y(e,t),m(M,l,P),m(M,o,P),y(o,i),y(o,u),y(u,a),m(M,f,P),m(M,c,P),y(c,$),y(c,g),y(g,T),m(M,C,P),m(M,S,P),y(S,L),y(S,N),y(N,I)},p(M,P){P&32&&n!==(n=M[5].location+"")&&R(t,n),P&32&&s!==(s=M[5].motor_vehicles_2022.toLocaleString()+"")&&R(a,s),P&32&&k!==(k=M[5].pedal_cycles_2022.toLocaleString()+"")&&R(T,k),P&32&&D!==(D=M[5].method+"")&&R(I,D)},d(M){M&&(_(e),_(l),_(o),_(f),_(c),_(C),_(S))}}}function wc(r){let e,n;return e=new oe({props:{$$slots:{default:[vc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kc(r){let e,n;const t=[B(pt),{sourceLayer:pt},{paint:{"circle-color":$e(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[wc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ue({props:l}),e.$on("click",Sc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Z(t,[i&0&&te(B(pt)),i&0&&{sourceLayer:pt},i&6&&{paint:{"circle-color":$e(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(p(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function yc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:pt,$$slots:{right:[bc],default:[_c]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&or(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${pt}.pmtiles`,$$slots:{default:[kc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),m(f,t,c),a&&a.m(f,c),m(f,l,c),b(o,f,c),i=!0},p(f,[c]){const $={};c&64&&($.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,$.checked=f[0],K(()=>n=!1)),e.$set($),f[0]?a?(a.p(f,c),c&1&&p(a,1)):(a=or(f),a.c(),p(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const g={};c&65&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(p(e.$$.fragment,f),p(a),p(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(_(t),_(l)),v(e,f),a&&a.d(f),v(o,f)}}}let pt="vehicle_counts";function Sc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Tc(r,e,n){let t=x.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class Cc extends z{constructor(e){super(),U(this,e,Tc,yc,G,{})}}function Oc(r){let e,n,t,l,o,i,u,s;return e=new fc({}),t=new Yu({}),o=new mc({}),u=new oc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),m(a,l,f),b(o,a,f),m(a,i,f),b(u,a,f),s=!0},i(a){s||(p(e.$$.fragment,a),p(t.$$.fragment,a),p(o.$$.fragment,a),p(u.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),s=!1},d(a){a&&(_(n),_(l),_(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Ac(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[Oc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lc(r){let e,n,t,l,o,i,u,s,a,f;return e=new _f({}),t=new Tf({}),o=new rf({}),u=new ju({}),a=new Ou({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(c,$){b(e,c,$),m(c,n,$),b(t,c,$),m(c,l,$),b(o,c,$),m(c,i,$),b(u,c,$),m(c,s,$),b(a,c,$),f=!0},i(c){f||(p(e.$$.fragment,c),p(t.$$.fragment,c),p(o.$$.fragment,c),p(u.$$.fragment,c),p(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(_(n),_(l),_(i),_(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Ic(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Sa({}),t=new za({}),o=new Pi({}),u=new xi({}),a=new pa({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(c,$){b(e,c,$),m(c,n,$),b(t,c,$),m(c,l,$),b(o,c,$),m(c,i,$),b(u,c,$),m(c,s,$),b(a,c,$),f=!0},i(c){f||(p(e.$$.fragment,c),p(t.$$.fragment,c),p(o.$$.fragment,c),p(u.$$.fragment,c),p(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(_(n),_(l),_(i),_(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Nc(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[Pc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mc(r){let e,n,t,l;return e=new vi({}),t=new Wi({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),m(o,n,i),b(t,o,i),l=!0},i(o){l||(p(e.$$.fragment,o),p(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&_(n),v(e,o),v(t,o)}}}function Ec(r){let e,n,t,l;return e=new su({}),t=new Jf({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),m(o,n,i),b(t,o,i),l=!0},i(o){l||(p(e.$$.fragment,o),p(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&_(n),v(e,o),v(t,o)}}}function Fc(r){let e,n,t,l,o=rn()=="Private (development)",i,u,s;e=new Cc({}),t=new Rf({});let a=o&&Ec();return u=new Na({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),a&&a.c(),i=O(),h(u.$$.fragment)},m(f,c){b(e,f,c),m(f,n,c),b(t,f,c),m(f,l,c),a&&a.m(f,c),m(f,i,c),b(u,f,c),s=!0},p:ne,i(f){s||(p(e.$$.fragment,f),p(t.$$.fragment,f),p(a),p(u.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(a),d(u.$$.fragment,f),s=!1},d(f){f&&(_(n),_(l),_(i)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function Dc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new Qr({props:u}),V.push(()=>X(e,"enabled",i)),l=new ol({}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],K(()=>n=!1)),e.$set(f)},i(s){o||(p(e.$$.fragment,s),p(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}function jc(r){let e,n,t,l,o,i,u,s,a,f,c,$,g,k,T,C;return e=new gu({}),t=new Ie({props:{label:"Trip generators",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),o=new Ie({props:{label:"Existing infrastructure",$$slots:{default:[Ic]},$$scope:{ctx:r}}}),u=new Ie({props:{label:"Boundaries",$$slots:{default:[Nc]},$$scope:{ctx:r}}}),a=new Ie({props:{label:"Census",$$slots:{default:[Mc]},$$scope:{ctx:r}}}),c=new Ie({props:{label:"Other",$$slots:{default:[Fc]},$$scope:{ctx:r}}}),g=new Ie({props:{label:"Tools",$$slots:{default:[Dc]},$$scope:{ctx:r}}}),T=new Zr({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment),f=O(),h(c.$$.fragment),$=O(),h(g.$$.fragment),k=O(),h(T.$$.fragment)},m(S,L){b(e,S,L),m(S,n,L),b(t,S,L),m(S,l,L),b(o,S,L),m(S,i,L),b(u,S,L),m(S,s,L),b(a,S,L),m(S,f,L),b(c,S,L),m(S,$,L),b(g,S,L),m(S,k,L),b(T,S,L),C=!0},p(S,L){const N={};L&8&&(N.$$scope={dirty:L,ctx:S}),t.$set(N);const D={};L&8&&(D.$$scope={dirty:L,ctx:S}),o.$set(D);const I={};L&8&&(I.$$scope={dirty:L,ctx:S}),u.$set(I);const M={};L&8&&(M.$$scope={dirty:L,ctx:S}),a.$set(M);const P={};L&8&&(P.$$scope={dirty:L,ctx:S}),c.$set(P);const E={};L&9&&(E.$$scope={dirty:L,ctx:S}),g.$set(E);const F={};L&2&&(F.disabled=!S[1]),T.$set(F)},i(S){C||(p(e.$$.fragment,S),p(t.$$.fragment,S),p(o.$$.fragment,S),p(u.$$.fragment,S),p(a.$$.fragment,S),p(c.$$.fragment,S),p(g.$$.fragment,S),p(T.$$.fragment,S),C=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(o.$$.fragment,S),d(u.$$.fragment,S),d(a.$$.fragment,S),d(c.$$.fragment,S),d(g.$$.fragment,S),d(T.$$.fragment,S),C=!1},d(S){S&&(_(n),_(l),_(i),_(s),_(f),_($),_(k)),v(e,S),v(t,S),v(o,S),v(u,S),v(a,S),v(c,S),v(g,S),v(T,S)}}}function Bc(r){let e,n;return e=new Ie({props:{label:"Layers",open:!0,$$slots:{default:[jc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rc(r,e,n){let t,l;De(r,mn,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&mn.set(!t)},[t,l,o]}class Hc extends z{constructor(e){super(),U(this,e,Rc,Bc,G,{})}}function Gc(r,e,n){let{loadFile:t}=e;return on(async()=>{let o=await(await fetch(`${an()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class Wc extends z{constructor(e){super(),U(this,e,Gc,null,G,{loadFile:0})}}function zc(r){let e;return{c(){e=w("Show on map")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Uc(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function qc(r){let e,n,t,l;return e=new Jt({props:{$$slots:{default:[zc]},$$scope:{ctx:r}}}),e.$on("click",r[3]),t=new Jt({props:{disabled:r[1],title:r[2],$$slots:{default:[Uc]},$$scope:{ctx:r}}}),t.$on("click",r[4]),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),m(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&256&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(p(e.$$.fragment,o),p(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&_(n),v(e,o),v(t,o)}}}function Vc(r){let e,n,t=r[0].authority_or_region+"",l,o,i,u,s=r[0].capital_scheme_id+"",a,f,c,$,g=r[0].funding_programme+"",k,T,C,S;return C=new xr({props:{$$slots:{default:[qc]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=O(),i=A("p"),u=w("Capital scheme ID: "),a=w(s),f=O(),c=A("p"),$=w("Funding programme: "),k=w(g),T=O(),h(C.$$.fragment)},m(L,N){m(L,e,N),y(e,n),y(e,l),m(L,o,N),m(L,i,N),y(i,u),y(i,a),m(L,f,N),m(L,c,N),y(c,$),y(c,k),m(L,T,N),b(C,L,N),S=!0},p(L,N){(!S||N&1)&&t!==(t=L[0].authority_or_region+"")&&R(l,t),(!S||N&1)&&s!==(s=L[0].capital_scheme_id+"")&&R(a,s),(!S||N&1)&&g!==(g=L[0].funding_programme+"")&&R(k,g);const D={};N&256&&(D.$$scope={dirty:N,ctx:L}),C.$set(D)},i(L){S||(p(C.$$.fragment,L),S=!0)},o(L){d(C.$$.fragment,L),S=!1},d(L){L&&(_(e),_(o),_(i),_(f),_(c),_(T)),v(C,L)}}}function Xc(r){let e,n;return e=new Ie({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[Vc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),l&257&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kc(r,e,n){let t;De(r,ln,c=>n(7,t=c));let{schemesGj:l}=e,{scheme:o}=e,{authorityNames:i}=e,u=!i.has(o.authority_or_region),s=u?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function a(){let c={type:"FeatureCollection",features:l.features.filter($=>$.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(Vr(c),{padding:20,animate:!1})}function f(){let c={type:"FeatureCollection",features:l.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},$=o.authority_or_region;window.localStorage.setItem($,JSON.stringify(c)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return r.$$set=c=>{"schemesGj"in c&&n(5,l=c.schemesGj),"scheme"in c&&n(0,o=c.scheme),"authorityNames"in c&&n(6,i=c.authorityNames)},[o,u,s,a,f,l,i]}class Yc extends z{constructor(e){super(),U(this,e,Kc,Xc,G,{schemesGj:5,scheme:0,authorityNames:6})}}const Jc=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function sr(r){let e,n,t=_n(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,i){m(o,e,i),y(e,n),y(e,l)},p(o,i){i&1&&t!==(t=_n(o[0].length_meters)+"")&&R(l,t)},d(o){o&&_(e)}}}function ir(r){let e,n=r[1](r[0].description)+"";return{c(){e=A("p")},m(t,l){m(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&_(e)}}}function Zc(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,$=r[0].scheme_reference+"",g,k,T,C=r[0].length_meters&&sr(r),S=r[0].description&&ir(r);return{c(){e=A("div"),n=A("h2"),t=new sn(!1),o=w(" ("),u=w(i),s=w(")"),a=O(),f=A("p"),c=w("Scheme reference: "),g=w($),k=O(),C&&C.c(),T=O(),S&&S.c(),t.a=o,Se(e,"max-width","30vw")},m(L,N){m(L,e,N),y(e,n),t.m(l,n),y(n,o),y(n,u),y(n,s),y(e,a),y(e,f),y(f,c),y(f,g),y(e,k),C&&C.m(e,null),y(e,T),S&&S.m(e,null)},p(L,[N]){N&1&&l!==(l=L[1](L[0].name)+"")&&t.p(l),N&1&&i!==(i=L[0].intervention_type+"")&&R(u,i),N&1&&$!==($=L[0].scheme_reference+"")&&R(g,$),L[0].length_meters?C?C.p(L,N):(C=sr(L),C.c(),C.m(e,T)):C&&(C.d(1),C=null),L[0].description?S?S.p(L,N):(S=ir(L),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:ne,o:ne,d(L){L&&_(e),C&&C.d(),S&&S.d()}}}function Qc(r,e,n){let{props:t}=e,{filterText:l}=e;function o(i){return l?i.replace(new RegExp(l,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,l=i.filterText)},[t,o,l]}class cn extends z{constructor(e){super(),U(this,e,Qc,Zc,G,{props:0,filterText:2})}}function xc(r){let e,n;return e=new cn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function e$(r){let e,n;return e=new oe({props:{$$slots:{default:[xc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function t$(r){let e,n;return e=new cn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function n$(r){let e,n;return e=new oe({props:{$$slots:{default:[t$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function r$(r){let e,n;return e=new cn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function l$(r){let e,n;return e=new oe({props:{$$slots:{default:[r$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function o$(r){let e,n,t,l,o,i,u,s,a,f;const c=[B("interventions-points"),{filter:["all",gn,r[4],r[5]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[3],"circle-radius":Rt,"circle-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let $={$$slots:{default:[e$]},$$scope:{ctx:r}};for(let I=0;I<c.length;I+=1)$=J($,c[I]);e=new Ue({props:$});const g=[B("interventions-lines"),{filter:["all",dn,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[3],"line-width":kt,"line-opacity":Y(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let k={$$slots:{default:[n$]},$$scope:{ctx:r}};for(let I=0;I<g.length;I+=1)k=J(k,g[I]);t=new ue({props:k});const T=[B("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*kt,"circle-opacity":0,"circle-stroke-color":el.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let C={};for(let I=0;I<T.length;I+=1)C=J(C,T[I]);o=new Ue({props:C});const S=[B("interventions-polygons"),{filter:["all",Mt,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[3],"fill-opacity":Y(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let L={$$slots:{default:[l$]},$$scope:{ctx:r}};for(let I=0;I<S.length;I+=1)L=J(L,S[I]);u=new Be({props:L});const N=[B("interventions-polygons-outlines"),{filter:["all",Mt,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*kt}},{layout:{visibility:r[0]?"visible":"none"}}];let D={};for(let I=0;I<N.length;I+=1)D=J(D,N[I]);return a=new ue({props:D}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(I,M){b(e,I,M),m(I,n,M),b(t,I,M),m(I,l,M),b(o,I,M),m(I,i,M),b(u,I,M),m(I,s,M),b(a,I,M),f=!0},p(I,M){const P=M&57?Z(c,[c[0],M&48&&{filter:["all",gn,I[4],I[5]]},c[2],c[3],M&8&&{paint:{"circle-color":I[3],"circle-radius":Rt,"circle-opacity":Y(1,.5)}},M&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};M&258&&(P.$$scope={dirty:M,ctx:I}),e.$set(P);const E=M&25?Z(g,[g[0],M&16&&{filter:["all",dn,I[4]]},g[2],g[3],M&8&&{paint:{"line-color":I[3],"line-width":kt,"line-opacity":Y(1,.5)}},M&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};M&258&&(E.$$scope={dirty:M,ctx:I}),t.$set(E);const F=M&1?Z(T,[T[0],T[1],T[2],{layout:{visibility:I[0]?"visible":"none"}}]):{};o.$set(F);const H=M&25?Z(S,[S[0],M&16&&{filter:["all",Mt,I[4]]},S[2],S[3],M&8&&{paint:{"fill-color":I[3],"fill-opacity":Y(.2,.5)}},M&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};M&258&&(H.$$scope={dirty:M,ctx:I}),u.$set(H);const ee=M&25?Z(N,[N[0],M&16&&{filter:["all",Mt,I[4]]},M&8&&{paint:{"line-color":I[3],"line-opacity":.5,"line-width":.7*kt}},M&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};a.$set(ee)},i(I){f||(p(e.$$.fragment,I),p(t.$$.fragment,I),p(o.$$.fragment,I),p(u.$$.fragment,I),p(a.$$.fragment,I),f=!0)},o(I){d(e.$$.fragment,I),d(t.$$.fragment,I),d(o.$$.fragment,I),d(u.$$.fragment,I),d(a.$$.fragment,I),f=!1},d(I){I&&(_(n),_(l),_(i),_(s)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I)}}}function s$(r){let e,n;return e=new Lt({props:{data:r[2],$$slots:{default:[o$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function i$(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,{filterText:i}=e,u=kr("v1");const s=["!=","hide_while_editing",!0],a=["!=","endpoint",!0];return r.$$set=f=>{"schemesGj"in f&&n(6,l=f.schemesGj),"showSchemes"in f&&n(0,o=f.showSchemes),"filterText"in f&&n(1,i=f.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Xr(l))},[o,i,t,u,s,a,l]}class a$ extends z{constructor(e){super(),U(this,e,i$,s$,G,{schemesGj:6,showSchemes:0,filterText:1})}}function ar(r,e,n){const t=r.slice();return t[14]=e[n],t}function f$(r){let e,n;return e=new Wc({props:{loadFile:r[8]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fr(r){let e,n,t,l,o,i;function u($){r[9]($)}function s($){r[10]($)}function a($){r[11]($)}function f($){r[12]($)}let c={schemes:r[2]};return r[1]!==void 0&&(c.schemesGj=r[1]),r[3]!==void 0&&(c.schemesToBeShown=r[3]),r[4]!==void 0&&(c.filterText=r[4]),r[5]!==void 0&&(c.show=r[5]),e=new zs({props:c}),V.push(()=>X(e,"schemesGj",u)),V.push(()=>X(e,"schemesToBeShown",s)),V.push(()=>X(e,"filterText",a)),V.push(()=>X(e,"show",f)),{c(){h(e.$$.fragment)},m($,g){b(e,$,g),i=!0},p($,g){const k={};g&4&&(k.schemes=$[2]),!n&&g&2&&(n=!0,k.schemesGj=$[1],K(()=>n=!1)),!t&&g&8&&(t=!0,k.schemesToBeShown=$[3],K(()=>t=!1)),!l&&g&16&&(l=!0,k.filterText=$[4],K(()=>l=!1)),!o&&g&32&&(o=!0,k.show=$[5],K(()=>o=!1)),e.$set(k)},i($){i||(p(e.$$.fragment,$),i=!0)},o($){d(e.$$.fragment,$),i=!1},d($){v(e,$)}}}function ur(r){let e,n;return e=new Yc({props:{schemesGj:r[1],scheme:r[14],authorityNames:r[7]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[14]),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cr(r){let e=r[3].has(r[14].scheme_reference),n,t,l=e&&ur(r);return{c(){l&&l.c(),n=Te()},m(o,i){l&&l.m(o,i),m(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[14].scheme_reference)),e?l?(l.p(o,i),i&12&&p(l,1)):(l=ur(o),l.c(),p(l,1),l.m(n.parentNode,n)):l&&(ie(),d(l,1,1,()=>{l=null}),ae())},i(o){t||(p(l),t=!0)},o(o){d(l),t=!1},d(o){o&&_(n),l&&l.d(o)}}}function u$(r){let e,n,t,l,o,i,u,s,a,f,c=rn()=="Private (development)",$,g,k,T,C,S,L,N;o=new rl({props:{boundaryGeojson:r[1]}}),u=new Al({}),a=new Kr({});let D=c&&f$(r);g=new ll({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[8]}}),T=new wr({props:{errorMessage:r[0]}});let I=r[2].size>0&&fr(r),M=ze(r[2].values()),P=[];for(let F=0;F<M.length;F+=1)P[F]=cr(ar(r,M,F));const E=F=>d(P[F],1,1,()=>{P[F]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment),f=O(),D&&D.c(),$=O(),h(g.$$.fragment),k=O(),h(T.$$.fragment),C=O(),I&&I.c(),S=O(),L=A("ul");for(let F=0;F<P.length;F+=1)P[F].c();Se(n,"display","flex"),Se(n,"justify-content","space-between"),W(e,"slot","sidebar"),W(e,"class","govuk-prose")},m(F,H){m(F,e,H),y(e,n),y(n,t),y(n,l),b(o,n,null),y(e,i),b(u,e,null),y(e,s),b(a,e,null),y(e,f),D&&D.m(e,null),y(e,$),b(g,e,null),y(e,k),b(T,e,null),y(e,C),I&&I.m(e,null),y(e,S),y(e,L);for(let ee=0;ee<P.length;ee+=1)P[ee]&&P[ee].m(L,null);N=!0},p(F,H){const ee={};H&2&&(ee.boundaryGeojson=F[1]),o.$set(ee),c&&D.p(F,H);const j={};if(H&1&&(j.errorMessage=F[0]),T.$set(j),F[2].size>0?I?(I.p(F,H),H&4&&p(I,1)):(I=fr(F),I.c(),p(I,1),I.m(e,S)):I&&(ie(),d(I,1,1,()=>{I=null}),ae()),H&142){M=ze(F[2].values());let Q;for(Q=0;Q<M.length;Q+=1){const ve=ar(F,M,Q);P[Q]?(P[Q].p(ve,H),p(P[Q],1)):(P[Q]=cr(ve),P[Q].c(),p(P[Q],1),P[Q].m(L,null))}for(ie(),Q=M.length;Q<P.length;Q+=1)E(Q);ae()}},i(F){if(!N){p(o.$$.fragment,F),p(u.$$.fragment,F),p(a.$$.fragment,F),p(D),p(g.$$.fragment,F),p(T.$$.fragment,F),p(I);for(let H=0;H<M.length;H+=1)p(P[H]);N=!0}},o(F){d(o.$$.fragment,F),d(u.$$.fragment,F),d(a.$$.fragment,F),d(D),d(g.$$.fragment,F),d(T.$$.fragment,F),d(I),P=P.filter(Boolean);for(let H=0;H<P.length;H+=1)d(P[H]);N=!1},d(F){F&&_(e),v(o),v(u),v(a),D&&D.d(),v(g),v(T),I&&I.d(),Bt(P,F)}}}function c$(r){let e,n,t,l,o,i,u;return e=new tl({}),t=new a$({props:{schemesGj:r[1],filterText:r[4],showSchemes:r[5]}}),i=new Hc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),o=A("div"),h(i.$$.fragment),W(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),m(s,n,a),b(t,s,a),m(s,l,a),m(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&2&&(f.schemesGj=s[1]),a&16&&(f.filterText=s[4]),a&32&&(f.showSchemes=s[5]),t.$set(f)},i(s){u||(p(e.$$.fragment,s),p(t.$$.fragment,s),p(i.$$.fragment,s),u=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(n),_(l),_(o)),v(e,s),v(t,s),v(i)}}}function $$(r){let e,n,t;return n=new Yr({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[c$]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),W(e,"slot","main")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.style=l[6]),o&131122&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(p(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function p$(r){let e,n;return e=new sl({props:{$$slots:{main:[$$],sidebar:[u$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&131199&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(p(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function m$(r,e,n){let t;De(r,hn,S=>n(6,t=S)),on(()=>{Jr()});let l=new Set(Jc);const o=new URLSearchParams(window.location.search);hn.set(o.get("style")||"dataviz");let i="",u={type:"FeatureCollection",features:[],schemes:{}},s=new Map,a=new Set,f="",c=!0;function $(S){try{n(1,u=JSON.parse(S)),n(2,s=Is(u)),n(0,i="")}catch(L){n(0,i=`The file you loaded is broken: ${L}`)}}function g(S){u=S,n(1,u)}function k(S){a=S,n(3,a)}function T(S){f=S,n(4,f)}function C(S){c=S,n(5,c)}return[i,u,s,a,f,c,t,l,$,g,k,T,C]}class _$ extends z{constructor(e){super(),U(this,e,m$,p$,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new _$({target:document.getElementById("app")});
