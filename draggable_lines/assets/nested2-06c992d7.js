import{S as z,i as q,s as W,aB as Dr,b as V,c as Z,e as A,d as O,g as d,C as jr,h as Q,j as _,k as y,m as b,w as Mt,l as x,t as m,n as h,o as g,p as v,aM as Bt,aN as Ht,aO as Rt,aP as Gt,$ as be,as as ie,at as ae,aV as cr,aW as cn,aX as Fr,q as je,a2 as $r,aY as $n,aZ as Mr,a_ as Br,D as te,a$ as Hr,b0 as rt,A as Ct,r as Wt,K as M,N as K,O as Y,P as J,x as rn,a as kt,u as k,f as ln,ao as Rr,aq as Jt,F as pr,v as pn,B as H,aU as X,aD as Ue,ap as Se,aE as Pt,b1 as fe,b2 as $e,R as mr,b3 as on,b4 as sn,E as _r,b5 as mn,J as Gr,aJ as _n,_ as Wr,Z as gn,Y as hn,X as Lt,aT as dn,L as Ur,M as zr,y as qr}from"./index-eeb08b48.js";import{e as It,C as Le,b as Tt,d as le,a as Dt,B as Vr,S as Xr,l as lt,c as bn,L as Kr}from"./StreetViewController-f07a9af5.js";import{C as Fe,L as ue,a as Yr,b as vn,e as gr,f as ge,Z as Jr}from"./schemas-a27823b4.js";import{L as Zr,G as Qe,h as G,a as Me,F as Qr}from"./GeoJSON-cba80219.js";import{P as re}from"./Popup-dd848620.js";const xr="/atip/draggable_lines/assets/help-d011708a.svg";function el(r){let e,n;const t=r[1].default,l=Bt(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),Q(e,"class","govuk-prose")},m(o,i){_(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Ht(l,t,o,o[4],n?Gt(t,o[4],i,null):Rt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){h(l,o),n=!1},d(o){o&&g(e),l&&l.d(o)}}}function tl(r){let e,n,t,l,o,i,u,s,a;function f(p){r[3](p)}let c={title:"Help",$$slots:{default:[el]},$$scope:{ctx:r}};return r[0]!==void 0&&(c.open=r[0]),o=new Dr({props:c}),V.push(()=>Z(o,"open",f)),{c(){e=A("button"),n=A("img"),l=O(),d(o.$$.fragment),jr(n.src,t=xr)||Q(n,"src",t),Q(n,"title","Help"),Q(n,"alt","Help"),Q(e,"class","svelte-7d9d1l")},m(p,$){_(p,e,$),y(e,n),_(p,l,$),b(o,p,$),u=!0,s||(a=Mt(e,"click",r[2]),s=!0)},p(p,[$]){const T={};$&16&&(T.$$scope={dirty:$,ctx:p}),!i&&$&1&&(i=!0,T.open=p[0],x(()=>i=!1)),o.$set(T)},i(p){u||(m(o.$$.fragment,p),u=!0)},o(p){h(o.$$.fragment,p),u=!1},d(p){p&&(g(e),g(l)),v(o,p),s=!1,a()}}}function nl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class oe extends z{constructor(e){super(),q(this,e,nl,tl,W,{})}}function wn(r){let e=r[0],n,t,l=kn(r);return{c(){l.c(),n=be()},m(o,i){l.m(o,i),_(o,n,i),t=!0},p(o,i){i&1&&W(e,e=o[0])?(ie(),h(l,1,1,te),ae(),l=kn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){h(l),t=!1},d(o){o&&g(n),l.d(o)}}}function kn(r){let e;const n=r[9].default,t=Bt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Ht(t,n,l,l[8],e?Gt(n,l[8],o,null):Rt(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){h(t,l),e=!1},d(l){t&&t.d(l)}}}function rl(r){let e,n,t=r[0]&&wn(r);return{c(){t&&t.c(),e=be()},m(l,o){t&&t.m(l,o),_(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=wn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ie(),h(t,1,1,()=>{t=null}),ae())},i(l){n||(m(t),n=!0)},o(l){h(t),n=!1},d(l){l&&g(e),t&&t.d(l)}}}function ll(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=cr("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!cn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let $=new Hr;cn.addProtocol("pmtiles",$.tile)}const{map:c,self:p}=Fr();return je(r,c,$=>n(7,t=$)),je(r,p,$=>n(0,l=$)),$r(()=>{if(l){let $=l;$n(p,l=null,l),Mr().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource($))})}}),r.$$set=$=>{"id"in $&&n(3,u=$.id),"url"in $&&n(4,s=$.url),"tiles"in $&&n(5,a=$.tiles),"promoteId"in $&&n(6,f=$.promoteId),"$$scope"in $&&n(8,i=$.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&t&&l!==u&&(l&&t.removeSource(l),$n(p,l=u,l),t.addSource(l,Br({type:"vector",url:s,tiles:a,promoteId:f})))},[l,c,p,u,s,a,f,t,i,o]}class ce extends z{constructor(e){super(),q(this,e,ll,rl,W,{id:3,url:4,tiles:5,promoteId:6})}}function ol(r){let e;const n=r[15].default,t=Bt(n,r,r[23],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8388608)&&Ht(t,n,l,l[23],e?Gt(n,l[23],o,null):Rt(l[23]),null)},i(l){e||(m(t,l),e=!0)},o(l){h(t,l),e=!1},d(l){t&&t.d(l)}}}function sl(r){let e,n,t;function l(i){r[16](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[ol]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Zr({props:o}),V.push(()=>Z(e,"hovered",l)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){d(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&8388608&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function il(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=cr("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:$=void 0}=e,{minzoom:T=void 0}=e,{maxzoom:w=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:S=!1}=e,{hovered:E=null}=e,{eventsIfTopMost:j=!1}=e;function B(F){E=F,n(0,E)}function L(F){rt.call(this,r,F)}function P(F){rt.call(this,r,F)}function N(F){rt.call(this,r,F)}function I(F){rt.call(this,r,F)}function D(F){rt.call(this,r,F)}function R(F){rt.call(this,r,F)}return r.$$set=F=>{"id"in F&&n(1,o=F.id),"source"in F&&n(2,i=F.source),"sourceLayer"in F&&n(3,u=F.sourceLayer),"beforeId"in F&&n(4,s=F.beforeId),"beforeLayerType"in F&&n(5,a=F.beforeLayerType),"paint"in F&&n(6,f=F.paint),"layout"in F&&n(7,c=F.layout),"filter"in F&&n(8,p=F.filter),"applyToClusters"in F&&n(9,$=F.applyToClusters),"minzoom"in F&&n(10,T=F.minzoom),"maxzoom"in F&&n(11,w=F.maxzoom),"hoverCursor"in F&&n(12,C=F.hoverCursor),"manageHoverState"in F&&n(13,S=F.manageHoverState),"hovered"in F&&n(0,E=F.hovered),"eventsIfTopMost"in F&&n(14,j=F.eventsIfTopMost),"$$scope"in F&&n(23,l=F.$$scope)},[E,o,i,u,s,a,f,c,p,$,T,w,C,S,j,t,B,L,P,N,I,D,R,l]}class al extends z{constructor(e){super(),q(this,e,il,sl,W,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function yn(r){let e,n;return e=new re({props:{$$slots:{default:[fl]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fl(r){let e;return{c(){e=A("p"),e.textContent="Drag to remove or click to remove"},m(n,t){_(n,e,t)},p:te,d(n){n&&g(e)}}}function ul(r){let e,n,t=!r[0]&&yn(r);return{c(){t&&t.c(),e=be()},m(l,o){t&&t.m(l,o),_(l,e,o),n=!0},p(l,o){l[0]?t&&(ie(),h(t,1,1,()=>{t=null}),ae()):t?o&1&&m(t,1):(t=yn(l),t.c(),m(t,1),t.m(e.parentNode,e))},i(l){n||(m(t),n=!0)},o(l){h(t),n=!1},d(l){l&&g(e),t&&t.d(l)}}}function cl(r){let e,n;const t=[M("line-tool-endpoints"),{paint:{"circle-color":"red","circle-radius":5,"circle-stroke-color":"black","circle-stroke-width":G(1,3)}},{manageHoverState:!0}];let l={$$slots:{default:[ul]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new Fe({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&0?Y(t,[i&0&&J(M("line-tool-endpoints")),i&0&&{paint:{"circle-color":"red","circle-radius":5,"circle-stroke-color":"black","circle-stroke-width":G(1,3)}},t[2]]):{};i&2049&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function $l(r){let e,n;return e=new Qe({props:{data:r[1],$$slots:{default:[cl]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&2049&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pl(r,e,n){let t,l;je(r,Ct,T=>n(5,l=T));let{active:o}=e,{points:i}=e;Wt(()=>{l.on("click",f),l.on("mousedown",c),l.on("mouseup",p),l.on("mousemove",$)}),$r(()=>{l.off("click",f),l.off("mousedown",c),l.off("mouseup",p),l.off("mousemove",$)});function u(T){let w=rn();for(let C of T)w.features.push({type:"Feature",id:w.features.length,properties:{},geometry:{type:"Point",coordinates:C.toArray()}});return w}let s=null,a=!1;function f(T){o&&(s==null?(i.push(T.lngLat),n(2,i)):(i.splice(s,1),n(2,i)))}function c(T){o&&(console.log("STARTING TO DRAG"),T.preventDefault(),n(0,a=!0),l.getCanvas().style.cursor="grab")}function p(){o&&a&&(console.log("STOPPING THE DRAG"),n(0,a=!1),l.getCanvas().style.cursor="pointer")}function $(T){if(o)if(console.log(`moved to ${T.lngLat.toArray()} whilst dragging ${a} and hovering ${s}`),a)console.log(`dragging ${s} to ${T.lngLat}`),n(2,i[s]=T.lngLat,i),n(2,i);else{s=null;for(let w of l.queryRenderedFeatures(T.point,{layers:["line-tool-endpoints"]})){s=w.id,l.getCanvas().style.cursor="pointer";break}}}return r.$$set=T=>{"active"in T&&n(3,o=T.active),"points"in T&&n(2,i=T.points)},r.$$.update=()=>{r.$$.dirty&4&&n(1,t=u(i))},[a,t,i,o]}class ml extends z{constructor(e){super(),q(this,e,pl,$l,W,{active:3,points:2})}}function _l(r){let e,n;const t=[M("line-tool-line"),{paint:{"line-color":"cyan","line-width":5}}];let l={};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&0?Y(t,[J(M("line-tool-line")),t[1]]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function gl(r){let e,n;return e=new kt({props:{$$slots:{default:[dl]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&256&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hl(r){let e,n;return e=new kt({props:{$$slots:{default:[bl]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&256&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dl(r){let e;return{c(){e=k("Measure distances")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function bl(r){let e;return{c(){e=k("Stop measuring")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function vl(r){let e,n,t,l,o,i,u,s,a;function f(w){r[5](w)}let c={active:r[1]};r[0]!==void 0&&(c.points=r[0]),e=new ml({props:c}),V.push(()=>Z(e,"points",f)),l=new Qe({props:{data:r[2],$$slots:{default:[_l]},$$scope:{ctx:r}}});const p=[hl,gl],$=[];function T(w,C){return w[1]?0:1}return i=T(r),u=$[i]=p[i](r),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment),o=O(),u.c(),s=be()},m(w,C){b(e,w,C),_(w,t,C),b(l,w,C),_(w,o,C),$[i].m(w,C),_(w,s,C),a=!0},p(w,[C]){const S={};C&2&&(S.active=w[1]),!n&&C&1&&(n=!0,S.points=w[0],x(()=>n=!1)),e.$set(S);const E={};C&4&&(E.data=w[2]),C&256&&(E.$$scope={dirty:C,ctx:w}),l.$set(E);let j=i;i=T(w),i===j?$[i].p(w,C):(ie(),h($[j],1,1,()=>{$[j]=null}),ae(),u=$[i],u?u.p(w,C):(u=$[i]=p[i](w),u.c()),m(u,1),u.m(s.parentNode,s))},i(w){a||(m(e.$$.fragment,w),m(l.$$.fragment,w),m(u),a=!0)},o(w){h(e.$$.fragment,w),h(l.$$.fragment,w),h(u),a=!1},d(w){w&&(g(t),g(o),g(s)),v(e,w),v(l,w),$[i].d(w)}}}function wl(r,e,n){let t,l;je(r,Ct,c=>n(6,l=c));let o=!1,i=[];function u(c){console.log(c);let p=rn();return c.length>1&&p.features.push({type:"Feature",properties:{},geometry:{type:"LineString",coordinates:c.map($=>$.toArray())}}),p}function s(){n(1,o=!0),l.getCanvas().style.cursor="crosshair"}function a(){n(1,o=!1),n(0,i=[]),l.getCanvas().style.cursor="inherit"}function f(c){i=c,n(0,i)}return r.$$.update=()=>{r.$$.dirty&1&&n(2,t=u(i))},[i,o,t,s,a,f]}class kl extends z{constructor(e){super(),q(this,e,wl,vl,W,{})}}function yl(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Sl(r){let e,n,t,l,o=r[0]=="Private (development)"&&yl();return{c(){o&&o.c(),e=O(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated.",t=O(),l=A("p"),l.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,u){o&&o.m(i,u),_(i,e,u),_(i,n,u),_(i,t,u),_(i,l,u)},p:te,d(i){i&&(g(e),g(n),g(t),g(l)),o&&o.d(i)}}}function Cl(r){let e,n,t,l,o,i;return o=new oe({props:{$$slots:{default:[Sl]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=k("App version: "),t=k(r[0]),l=O(),d(o.$$.fragment)},m(u,s){_(u,e,s),y(e,n),y(e,t),y(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(m(o.$$.fragment,u),i=!0)},o(u){h(o.$$.fragment,u),i=!1},d(u){u&&g(e),v(o)}}}function Tl(r){return[ln()]}class Ol extends z{constructor(e){super(),q(this,e,Tl,Cl,W,{})}}const Al={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var me=Uint8Array,Je=Uint16Array,hr=Uint32Array,dr=new me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),br=new me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ll=new me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),vr=function(r,e){for(var n=new Je(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new hr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},wr=vr(dr,2),kr=wr[0],El=wr[1];kr[28]=258,El[258]=28;var Nl=vr(br,0),Pl=Nl[0],Zt=new Je(32768);for(var ne=0;ne<32768;++ne){var Re=(ne&43690)>>>1|(ne&21845)<<1;Re=(Re&52428)>>>2|(Re&13107)<<2,Re=(Re&61680)>>>4|(Re&3855)<<4,Zt[ne]=((Re&65280)>>>8|(Re&255)<<8)>>>1}var wt=function(r,e,n){for(var t=r.length,l=0,o=new Je(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Je(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Je(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,p=c|(1<<f)-1;c<=p;++c)u[Zt[c]>>>s]=a}else for(u=new Je(t),l=0;l<t;++l)r[l]&&(u[l]=Zt[i[r[l]-1]++]>>>15-r[l]);return u},Ot=new me(288);for(var ne=0;ne<144;++ne)Ot[ne]=8;for(var ne=144;ne<256;++ne)Ot[ne]=9;for(var ne=256;ne<280;++ne)Ot[ne]=7;for(var ne=280;ne<288;++ne)Ot[ne]=8;var yr=new me(32);for(var ne=0;ne<32;++ne)yr[ne]=5;var Il=wt(Ot,9,1),Dl=wt(yr,5,1),Ut=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},we=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},zt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},jl=function(r){return(r+7)/8|0},an=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Je:r.BYTES_PER_ELEMENT==4?hr:me)(n-e);return t.set(r.subarray(e,n)),t},Fl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ke=function(r,e,n){var t=new Error(e||Fl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,ke),!n)throw t;return t},Ml=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new me(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new me(t*3));var i=function(tt){var Xe=e.length;if(tt>Xe){var nt=new me(Math.max(Xe*2,tt));nt.set(e),e=nt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,p=n.m,$=n.n,T=t*8;do{if(!f){u=we(r,s,1);var w=we(r,s+1,3);if(s+=3,w)if(w==1)f=Il,c=Dl,p=9,$=5;else if(w==2){var j=we(r,s,31)+257,B=we(r,s+10,15)+4,L=j+we(r,s+5,31)+1;s+=14;for(var P=new me(L),N=new me(19),I=0;I<B;++I)N[Ll[I]]=we(r,s+I*3,7);s+=B*3;for(var D=Ut(N),R=(1<<D)-1,F=wt(N,D,1),I=0;I<L;){var se=F[we(r,s,R)];s+=se&15;var C=se>>>4;if(C<16)P[I++]=C;else{var ee=0,ve=0;for(C==16?(ve=3+we(r,s,3),s+=2,ee=P[I-1]):C==17?(ve=3+we(r,s,7),s+=3):C==18&&(ve=11+we(r,s,127),s+=7);ve--;)P[I++]=ee}}var gt=P.subarray(0,j),he=P.subarray(j);p=Ut(gt),$=Ut(he),f=wt(gt,p,1),c=wt(he,$,1)}else ke(1);else{var C=jl(s)+4,S=r[C-4]|r[C-3]<<8,E=C+S;if(E>t){o&&ke(0);break}l&&i(a+S),e.set(r.subarray(C,E),a),n.b=a+=S,n.p=s=E*8,n.f=u;continue}if(s>T){o&&ke(0);break}}l&&i(a+131072);for(var xe=(1<<p)-1,ht=(1<<$)-1,et=s;;et=s){var ee=f[zt(r,s)&xe],pe=ee>>>4;if(s+=ee&15,s>T){o&&ke(0);break}if(ee||ke(2),pe<256)e[a++]=pe;else if(pe==256){et=s,f=null;break}else{var dt=pe-254;if(pe>264){var I=pe-257,De=dr[I];dt=we(r,s,(1<<De)-1)+kr[I],s+=De}var He=c[zt(r,s)&ht],Ve=He>>>4;He||ke(3),s+=He&15;var he=Pl[Ve];if(Ve>3){var De=br[Ve];he+=zt(r,s)&(1<<De)-1,s+=De}if(s>T){o&&ke(0);break}l&&i(a+131072);for(var bt=a+dt;a<bt;a+=4)e[a]=e[a-he],e[a+1]=e[a+1-he],e[a+2]=e[a+2-he],e[a+3]=e[a+3-he];a=bt}}n.l=f,n.p=et,n.b=a,n.f=u,f&&(u=1,n.m=p,n.d=c,n.n=$)}while(!u);return a==e.length?e:an(e,0,a)},Bl=new me(0),Ne=function(r,e){return r[e]|r[e+1]<<8},ye=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},qt=function(r,e){return ye(r,e)+ye(r,e+4)*4294967296};function Hl(r,e){return Ml(r,e)}var Qt=typeof TextDecoder<"u"&&new TextDecoder,Rl=0;try{Qt.decode(Bl,{stream:!0}),Rl=1}catch{}var Gl=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,an(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Sr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(Qt)return Qt.decode(r);var l=Gl(r),o=l[0],i=l[1];return i.length&&ke(8),o}}var Wl=function(r,e){return e+30+Ne(r,e+26)+Ne(r,e+28)},Ul=function(r,e,n){var t=Ne(r,e+28),l=Sr(r.subarray(e+46,e+46+t),!(Ne(r,e+8)&2048)),o=e+46+t,i=ye(r,e+20),u=n&&i==4294967295?zl(r,o):[i,ye(r,e+24),ye(r,e+42)],s=u[0],a=u[1],f=u[2];return[Ne(r,e+10),s,a,l,o+Ne(r,e+30)+Ne(r,e+32),f]},zl=function(r,e){for(;Ne(r,e)!=1;e+=4+Ne(r,e+2));return[qt(r,e+12),qt(r,e+4),qt(r,e+20)]};function ql(r,e){for(var n={},t=r.length-22;ye(r,t)!=101010256;--t)(!t||r.length-t>65558)&&ke(13);var l=Ne(r,t+8);if(!l)return{};var o=ye(r,t+16),i=o==4294967295||l==65535;if(i){var u=ye(r,t-12);i=ye(r,u)==101075792,i&&(l=ye(r,u+32),o=ye(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=Ul(r,o,i),c=f[0],p=f[1],$=f[2],T=f[3],w=f[4],C=f[5],S=Wl(r,C);o=w,(!s||s({name:T,size:p,originalSize:$,compression:c}))&&(c?c==8?n[T]=Hl(r.subarray(S,S+p),new me($)):ke(14,"unknown compression type "+c):n[T]=an(r,S,S+p))}return n}function Vl(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Vt):Vt(r)}function Vt(r){var e=new Uint8Array(r),n=ql(e);return Promise.resolve(Xl(n))}function Xl(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Sr(r[l])}return e}function Pe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Ze(t)===e)return t;n++}}function At(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Ze(l)===e&&n.push(l),t++}return n}function jt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Ze(l)===e&&n(l,t):n(l,t),t++}}function Kl(r,e,n){var t=[];return jt(r,e,function(l,o){t.push(n(l,o))}),t}var Yl=/.+\:/;function Ze(r){return r.tagName.replace(Yl,"")}function Cr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Ze(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Cr(r.childNodes[t]),t++;return e+="</"+Ze(r)+">",e}function Jl(r){var e=r.documentElement,n=Pe(e,"sheetData"),t=[];return jt(n,"row",function(l){jt(l,"c",function(o){t.push(o)})}),t}function Zl(r,e){return Pe(e,"v")}function Ql(r,e){if(e.firstChild&&Ze(e.firstChild)==="is"&&e.firstChild.firstChild&&Ze(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function xl(r){var e=r.documentElement,n=Pe(e,"dimension");if(n)return n.getAttribute("ref")}function eo(r){var e=r.documentElement,n=Pe(e,"cellStyleXfs");return n?At(n,"xf"):[]}function to(r){var e=r.documentElement,n=Pe(e,"cellXfs");return n?At(n,"xf"):[]}function no(r){var e=r.documentElement,n=Pe(e,"numFmts");return n?At(n,"numFmt"):[]}function ro(r){var e=r.documentElement;return Kl(e,"si",function(n){var t=Pe(n,"t");if(t)return t.textContent;var l="";return jt(n,"r",function(o){l+=Pe(o,"t").textContent}),l})}function lo(r){var e=r.documentElement;return Pe(e,"workbookPr")}function oo(r){var e=r.documentElement;return At(e,"Relationship")}function so(r){var e=r.documentElement,n=Pe(e,"sheets");return At(n,"sheet")}function io(r,e){var n=e.createDocument(r),t={},l=lo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return so(n).forEach(o),t}function ao(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Xt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Xt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Xt(u);break}};return oo(n).forEach(l),t}function Xt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Sn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Cn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sn(Object(n),!0).forEach(function(t){fo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function fo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function uo(r,e){if(!r)return{};var n=e.createDocument(r),t=eo(n).map(Kt),l=no(n).map(co).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Cn(Cn({},t[u.xfId]),Kt(u,l)):Kt(u,l)};return to(n).map(o)}function co(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Kt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function $o(r,e){return r?ro(e.createDocument(r)):[]}function Tr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function po(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=mo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mo(r,e){if(r){if(typeof r=="string")return Tn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tn(r,e)}}function Tn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function _o(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(go.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&vo(l.numberFormat.template))return!0}}var go=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],ho=/^\[\$-414\]/,bo=/;@$/;function vo(r){r=r.toLowerCase(),r=r.replace(ho,""),r=r.replace(bo,"");for(var e=r.split(/\W+/),n=po(e),t;!(t=n()).done;){var l=t.value;if(wo.indexOf(l)<0)return!1}return!0}var wo=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function ko(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Yt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Yt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Yt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=yo(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var p=Number(r);if(isNaN(p))throw new Error('Invalid "numeric" cell value: '.concat(r));r=p,_o(r,o(),i,a)&&(r=Tr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function yo(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Yt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var So=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Co(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function To(r){for(var e=0,n=0;n<r.length;)e*=26,e+=So.indexOf(r[n]),n++;return e}function Or(r){return r=r.split(/(\d+)/),[parseInt(r[1]),To(r[0].trim())]}function Oo(r,e,n,t,l,o,i){var u=Or(r.getAttribute("r")),s=Zl(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:ko(a,f,{getInlineStringValue:function(){return Ql(e,r)},getInlineStringXml:function(){return Cr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function Ao(r,e,n,t,l,o){var i=Jl(r);return i.length===0?[]:i.map(function(u){return Oo(u,r,e,n,t,l,o)})}function Lo(r,e){return Io(r)||Po(r,e)||No(r,e)||Eo()}function Eo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function No(r,e){if(r){if(typeof r=="string")return On(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(r,e)}}function On(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Po(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Io(r){if(Array.isArray(r))return r}function Do(r){var e=xl(r);if(e)return e=e.split(":").map(Or).map(function(n){var t=Lo(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function jo(r,e,n,t,l,o){var i=e.createDocument(r),u=Ao(i,e,n,t,l,o),s=Do(i)||Co(u);return{cells:u,dimensions:s}}function Fo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Mo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mo(r,e){if(r){if(typeof r=="string")return An(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(r,e)}}function An(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Bo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=Fo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Ho(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ro(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ro(r,e){if(r){if(typeof r=="string")return Ln(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(r,e)}}function Ln(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Go(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Ho(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Wo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ar(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uo(r,e){return Vo(r)||qo(r,e)||Ar(r,e)||zo()}function zo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ar(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function qo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Vo(r){if(Array.isArray(r))return r}function Xo(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Uo(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=Wo(t),p;!(p=c()).done;){var $=p.value,T=$.row-1,w=$.column-1;w<i&&T<u&&(s[T][w]=$.value)}var C=e.rowMap;if(C)for(var S=0;S<s.length;)C[S]=S,S++;return s=Bo(Go(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(s=e.transformData(s)),s}function Ko(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Yo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yo(r,e){if(r){if(typeof r=="string")return Nn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(r,e)}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Pn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Jo(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pn(Object(n),!0).forEach(function(t){Zo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Zo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Qo(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Jo({sheet:1},n));var t=function(p){if(!r[p])throw new Error('"'.concat(p,'" file not found inside the *.xlsx file zip archive'));return r[p]},l=ao(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?$o(t(l.sharedStrings),e):[],i=l.styles?uo(t(l.styles),e):{},u=io(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var p=c.name;return{name:p}});var s=xo(n.sheet,u.sheets);if(!s||!l.sheets[s])throw es(n.sheet,u.sheets);var a=jo(t(l.sheets[s]),e,o,i,u,n),f=Xo(a,n);return n.properties?{data:f,properties:u}:f}function xo(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Ko(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function es(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function xt(r){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(r)}function In(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function ts(r,e,n){return e&&In(r.prototype,e),n&&In(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function ns(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function rs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&yt(r,e)}function ls(r){var e=Lr();return function(){var t=St(r),l;if(e){var o=St(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return os(this,l)}}function os(r,e){if(e&&(xt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ss(r)}function ss(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function en(r){var e=typeof Map=="function"?new Map:void 0;return en=function(t){if(t===null||!is(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Nt(t,arguments,St(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),yt(l,t)},en(r)}function Nt(r,e,n){return Lr()?Nt=Reflect.construct:Nt=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&yt(a,i.prototype),a},Nt.apply(null,arguments)}function Lr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function is(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function yt(r,e){return yt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},yt(r,e)}function St(r){return St=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},St(r)}var _e=function(r){rs(n,r);var e=ls(n);function n(t){var l;return ns(this,n),l=e.call(this,"invalid"),l.reason=t,l}return ts(n)}(en(Error));function as(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new _e("not_a_number")}if(typeof r!="number")throw new _e("not_a_number");if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return r}function fs(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return String(r)}throw new _e("not_a_string")}function us(r){if(typeof r=="boolean")return r;throw new _e("not_a_boolean")}function cs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new _e("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");var t=Tr(r,n);if(isNaN(t.valueOf()))throw new _e("out_of_bounds");return t}throw new _e("not_a_date")}function $s(r,e){return _s(r)||ms(r,e)||Er(r,e)||ps()}function ps(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ms(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function _s(r){if(Array.isArray(r))return r}function tn(r){"@babel/helpers - typeof";return tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(r)}function gs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Er(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Er(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function jn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Fn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?jn(Object(n),!0).forEach(function(t){hs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):jn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function hs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Mn={isColumnOriented:!1};function ds(r,e,n){n?n=Fn(Fn({},Mn),n):n=Mn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;ks(e),l&&(r=ws(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Nr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var p=gs(a),$;!($=p()).done;){var T=$.value;T.row=o[T.row-1]+1}return{rows:s,errors:a}}function Nr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var p=f[a],$=r[p],T=tn($.type)==="object"&&!Array.isArray($.type),w=e[t.indexOf(p)];w===void 0&&(w=null);var C=void 0,S=void 0,E=void 0;if(T)C=Nr($.type,e,n,t,l,o);else if(w===null)C=null;else if(Array.isArray($.type)){var j=!1,B=vs(w).map(function(P){var N=Bn(P,$,o);return N.error&&(C=P,S=N.error,E=N.reason),N.value!==null&&(j=!0),N.value});S||(C=j?B:null)}else{var L=Bn(w,$,o);S=L.error,E=L.reason,C=S?w:L.value}!S&&C===null&&$.required&&(S="required"),S?(S={error:S,row:n+1,column:p,value:C},E&&(S.reason=E),$.type&&(S.type=$.type),l.push(S)):(u&&C!==null&&(u=!1),(C!==null||o.includeNullValues)&&(i[$.prop]=C))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function Bn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=ot(r,e.parse):e.type?t=bs(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function ot(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function bs(r,e,n){switch(e){case String:return ot(r,fs);case Number:return ot(r,as);case Date:return ot(r,function(t){return cs(t,{properties:n.properties})});case Boolean:return ot(r,us);default:if(typeof e=="function")return ot(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Pr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Pr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function vs(r){for(var e=[],n=0;n<r.length;){var t=Pr(r,",",n),l=$s(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var ws=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function ks(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function nn(r){"@babel/helpers - typeof";return nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(r)}function Ir(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;nn(o)==="object"&&(o=Object.keys(r[l])[0],i=Ir(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var ys=["schema","map"];function Hn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Et(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hn(Object(n),!0).forEach(function(t){Ss(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ss(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Cs(r,e){if(r==null)return{};var n=Ts(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Ts(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Os(r,e,n){var t=n.schema,l=n.map,o=Cs(n,ys);!t&&l&&(t=Ir(l));var i=Qo(r,e,Et(Et({},o),{},{properties:t||o.properties}));return t?ds(i.data,t,Et(Et({},o),{},{properties:i.properties})):i}function As(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Vl(r).then(function(n){return Os(n,Al,e)})}function Ls(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:l.authority_or_region,capital_scheme_id:l.capital_scheme_id,funding_programme:l.funding_programme});let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.num_features++,t.properties.funding_programme=l.funding_programme,t.id=n++}return e}async function Es(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await As(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Rr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const U={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Ie=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Ns(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new It({props:u}),V.push(()=>Z(e,"value",i)),e.$on("change",r[2]),l=new Yr({props:{rows:r[1]}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],x(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}function Ps(r,e,n){let t;je(r,Ct,s=>n(4,t=s));let l="interventionType",o=vn("v1");function i(){let s;l=="interventionType"?(s=gr("v1"),n(1,o=vn("v1"))):(s=Jt(["get","funding_programme"],{ATF2:U.atf2,ATF3:U.atf3,ATF4:U.atf4},"grey"),n(1,o=[["ATF2",U.atf2],["ATF3",U.atf3],["ATF4",U.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class Is extends z{constructor(e){super(),q(this,e,Ps,Ns,W,{})}}function Ds(r){let e;return{c(){e=k("Clear")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function js(r){let e,n,t,l,o,i;return t=new kt({props:{$$slots:{default:[Ds]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=A("input"),n=O(),d(t.$$.fragment),Q(e,"type","text"),Q(e,"class","govuk-input govuk-input--width-10"),Q(e,"id","filterText")},m(u,s){_(u,e,s),pn(e,r[0]),_(u,n,s),b(t,u,s),l=!0,o||(i=Mt(e,"input",r[12]),o=!0)},p(u,s){s&1&&e.value!==u[0]&&pn(e,u[0]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){h(t.$$.fragment,u),l=!1},d(u){u&&(g(e),g(n)),v(t,u),o=!1,i()}}}function Fs(r){let e,n,t,l,o,i,u,s,a,f;function c(w){r[10](w)}let p={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&(p.value=r[3]),e=new It({props:p}),V.push(()=>Z(e,"value",c));function $(w){r[11](w)}let T={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(T.value=r[4]),l=new It({props:T}),V.push(()=>Z(l,"value",$)),u=new pr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[js]},$$scope:{ctx:r}}}),a=new Is({}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment),i=O(),d(u.$$.fragment),s=O(),d(a.$$.fragment)},m(w,C){b(e,w,C),_(w,t,C),b(l,w,C),_(w,i,C),b(u,w,C),_(w,s,C),b(a,w,C),f=!0},p(w,C){const S={};C&32&&(S.choices=w[5]),!n&&C&8&&(n=!0,S.value=w[3],x(()=>n=!1)),e.$set(S);const E={};C&64&&(E.choices=w[6]),!o&&C&16&&(o=!0,E.value=w[4],x(()=>o=!1)),l.$set(E);const j={};C&65537&&(j.$$scope={dirty:C,ctx:w}),u.$set(j)},i(w){f||(m(e.$$.fragment,w),m(l.$$.fragment,w),m(u.$$.fragment,w),m(a.$$.fragment,w),f=!0)},o(w){h(e.$$.fragment,w),h(l.$$.fragment,w),h(u.$$.fragment,w),h(a.$$.fragment,w),f=!1},d(w){w&&(g(t),g(i),g(s)),v(e,w),v(l,w),v(u,w),v(a,w)}}}function Ms(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",p,$,T=r[7].other.toLocaleString()+"",w,C;return{c(){e=k("Showing "),t=k(n),l=k(" schemes ("),i=k(o),u=k(`
    routes, `),a=k(s),f=k(` areas,
    `),p=k(c),$=k(" crossings, "),w=k(T),C=k(`
    other)`)},m(S,E){_(S,e,E),_(S,t,E),_(S,l,E),_(S,i,E),_(S,u,E),_(S,a,E),_(S,f,E),_(S,p,E),_(S,$,E),_(S,w,E),_(S,C,E)},p(S,E){E&2&&n!==(n=S[1].size.toLocaleString()+"")&&H(t,n),E&128&&o!==(o=S[7].route.toLocaleString()+"")&&H(i,o),E&128&&s!==(s=S[7].area.toLocaleString()+"")&&H(a,s),E&128&&c!==(c=S[7].crossing.toLocaleString()+"")&&H(p,c),E&128&&T!==(T=S[7].other.toLocaleString()+"")&&H(w,T)},d(S){S&&(g(e),g(t),g(l),g(i),g(u),g(a),g(f),g(p),g($),g(w),g(C))}}}function Bs(r){let e,n,t;function l(i){r[14](i)}let o={id:"show-schemes",$$slots:{default:[Ms]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new le({props:o}),V.push(()=>Z(e,"checked",l)),{c(){d(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65666&&(s.$$scope={dirty:u,ctx:i}),!n&&u&4&&(n=!0,s.checked=i[2],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Hs(r){let e,n,t,l;return e=new Le({props:{label:"Filters",$$slots:{default:[Fs]},$$scope:{ctx:r}}}),t=new Tt({props:{small:!0,$$slots:{default:[Bs]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65657&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65670&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),h(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Rs(r,e,n){let{schemesGj:t}=e,{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,{show:u=!0}=e,s=[],a="",f=[],c="",p={area:0,route:0,crossing:0,other:0};Wt(()=>{let j=new Set,B=new Set;for(let L of l.values())L.authority_or_region&&j.add(L.authority_or_region),L.funding_programme&&B.add(L.funding_programme);n(5,s=Array.from(j.entries())),s.sort(),n(6,f=Array.from(B.entries())),f.sort()});function $(j,B,L){let P=j.toLowerCase(),N=D=>{var R,F;if(P&&!((R=D.properties.name)!=null&&R.toLowerCase().includes(P))&&!((F=D.properties.description)!=null&&F.toLowerCase().includes(P)))return!1;if(B||L){let se=l.get(D.properties.scheme_reference);if(B&&se.authority_or_region!=B||L&&se.funding_programme!=L)return!1}return!0};n(1,o=new Set(t.features.filter(N).map(D=>D.properties.scheme_reference))),n(7,p={area:0,route:0,crossing:0,other:0});let I=D=>{var R,F;return!(!o.has(D.properties.scheme_reference)||P&&!((R=D.properties.name)!=null&&R.toLowerCase().includes(P))&&!((F=D.properties.description)!=null&&F.toLowerCase().includes(P)))};for(let D of t.features)I(D)?(delete D.properties.hide_while_editing,n(7,p[D.properties.intervention_type]++,p)):D.properties.hide_while_editing=!0;n(8,t),n(7,p)}function T(j){a=j,n(3,a)}function w(j){c=j,n(4,c)}function C(){i=this.value,n(0,i)}const S=()=>n(0,i="");function E(j){u=j,n(2,u)}return r.$$set=j=>{"schemesGj"in j&&n(8,t=j.schemesGj),"schemes"in j&&n(9,l=j.schemes),"schemesToBeShown"in j&&n(1,o=j.schemesToBeShown),"filterText"in j&&n(0,i=j.filterText),"show"in j&&n(2,u=j.show)},r.$$.update=()=>{r.$$.dirty&25&&$(i,a,c)},[i,o,u,a,c,s,f,p,t,l,T,w,C,S,E]}class Gs extends z{constructor(e){super(),q(this,e,Rs,Hs,W,{schemesGj:8,schemes:9,schemesToBeShown:1,filterText:0,show:2})}}function Ws(r){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Us(r){let e,n,t,l,o;return t=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ws]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=k("License: "),d(t.$$.fragment),l=k(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,u){_(i,e,u),y(e,n),b(t,e,null),y(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(m(t.$$.fragment,i),o=!0)},o(i){h(t.$$.fragment,i),o=!1},d(i){i&&g(e),v(t)}}}class Be extends z{constructor(e){super(),q(this,e,null,Us,W,{})}}function Rn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Gn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Wn(r){let e,n;return{c(){e=A("span"),n=k(` 
    `),Se(e,"background",r[5]),Se(e,"width","100%"),Se(e,"border","1px solid black")},m(t,l){_(t,e,l),y(e,n)},p(t,l){l&1&&Se(e,"background",t[5])},d(t){t&&g(e)}}}function Un(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=k(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&H(t,n)},d(l){l&&g(e)}}}function zs(r){let e,n,t,l=Ue(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Wn(Gn(r,l,s));let i=Ue(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Un(Rn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=O(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();Se(e,"display","flex"),Se(t,"display","flex"),Se(t,"justify-content","space-between")},m(s,a){_(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);_(s,n,a),_(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=Ue(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Gn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Wn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=Ue(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Rn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Un(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:te,o:te,d(s){s&&(g(e),g(n),g(t)),Pt(o,s),Pt(u,s)}}}function qs(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class ze extends z{constructor(e){super(),q(this,e,qs,zs,W,{colorScale:0,limits:1})}}function zn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Vs(r){let e;return{c(){e=k("Percent of households with a car")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Xs(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ks(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ys(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Js(r){let e,n,t,l,o,i,u,s,a,f,c,p;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Xs]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ks]},$$scope:{ctx:r}}}),f=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ys]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=k("Car/van availability data is from the 2021 census, via "),d(t.$$.fragment),l=k(". Output area boundaries from "),d(o.$$.fragment),i=k("."),u=O(),s=A("p"),a=k("License: "),d(f.$$.fragment),c=k(`. Contains OS data © Crown copyright and database
        right 2023.`)},m($,T){_($,e,T),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),_($,u,T),_($,s,T),y(s,a),b(f,s,null),y(s,c),p=!0},p($,T){const w={};T&65536&&(w.$$scope={dirty:T,ctx:$}),t.$set(w);const C={};T&65536&&(C.$$scope={dirty:T,ctx:$}),o.$set(C);const S={};T&65536&&(S.$$scope={dirty:T,ctx:$}),f.$set(S)},i($){p||(m(t.$$.fragment,$),m(o.$$.fragment,$),m(f.$$.fragment,$),p=!0)},o($){h(t.$$.fragment,$),h(o.$$.fragment,$),h(f.$$.fragment,$),p=!1},d($){$&&(g(e),g(u),g(s)),v(t),v(o),v(f)}}}function Zs(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Js]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function qn(r){let e,n;return e=new ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qs(r){let e;return{c(){e=k("Average cars per household")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function xs(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ei(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ti(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ni(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,T;return o=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[xs]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ei]},$$scope:{ctx:r}}}),p=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ti]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=A("p"),l=k("Car/van availability data is from the 2021 census, via "),d(o.$$.fragment),i=k(". Output area boundaries from "),d(u.$$.fragment),s=k("."),a=O(),f=A("p"),c=k("License: "),d(p.$$.fragment),$=k(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(w,C){_(w,e,C),_(w,n,C),_(w,t,C),y(t,l),b(o,t,null),y(t,i),b(u,t,null),y(t,s),_(w,a,C),_(w,f,C),y(f,c),b(p,f,null),y(f,$),T=!0},p(w,C){const S={};C&65536&&(S.$$scope={dirty:C,ctx:w}),o.$set(S);const E={};C&65536&&(E.$$scope={dirty:C,ctx:w}),u.$set(E);const j={};C&65536&&(j.$$scope={dirty:C,ctx:w}),p.$set(j)},i(w){T||(m(o.$$.fragment,w),m(u.$$.fragment,w),m(p.$$.fragment,w),T=!0)},o(w){h(o.$$.fragment,w),h(u.$$.fragment,w),h(p.$$.fragment,w),T=!1},d(w){w&&(g(e),g(n),g(t),g(a),g(f)),v(o),v(u),v(p)}}}function ri(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ni]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Vn(r){let e,n;return e=new ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function li(r){let e;return{c(){e=k("Population density")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function oi(r){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function si(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ii(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[oi]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[si]},$$scope:{ctx:r}}}),s=new Be({}),{c(){e=A("p"),n=k("Population density data is from the 2021 census, via "),d(t.$$.fragment),l=k(". Output area boundaries from "),d(o.$$.fragment),i=k("."),u=O(),d(s.$$.fragment)},m(f,c){_(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&65536&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const $={};c&65536&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){h(t.$$.fragment,f),h(o.$$.fragment,f),h(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(u)),v(t),v(o),v(s,f)}}}function ai(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ii]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Xn(r){let e,n,t,l;return t=new ze({props:{colorScale:r[4],limits:r[6]().map(gi)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=O(),d(t.$$.fragment)},m(o,i){_(o,e,i),_(o,n,i),b(t,o,i),l=!0},p:te,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){h(t.$$.fragment,o),l=!1},d(o){o&&(g(e),g(n)),v(t,o)}}}function fi(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=k("There are "),t=A("b"),o=k(l),i=k(`
          people per square kilometre in `),s=k(u)},m(a,f){_(a,e,f),y(e,n),y(e,t),y(t,o),y(e,i),y(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&H(o,l),f&8192&&u!==(u=a[14]+"")&&H(s,u)},d(a){a&&g(e)}}}function ui(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=k("Households in "),l=k(t),o=k(` have an average of
          `),i=A("b"),s=k(u),a=k(`
          cars`)},m(f,c){_(f,e,c),y(e,n),y(e,l),y(e,o),y(e,i),y(i,s),y(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&H(l,t),c&8200&&u!==(u=f[15]+"")&&H(s,u)},d(f){f&&g(e)}}}function ci(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=k(t),o=k("%"),i=k(`
          of households in `),s=k(u),a=k(" have 1 or more cars")},m(f,c){_(f,e,c),y(e,n),y(n,l),y(n,o),y(e,i),y(e,s),y(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&H(l,t),c&8192&&u!==(u=f[14]+"")&&H(s,u)},d(f){f&&g(e)}}}function $i(r){zn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?ci:o[3]=="average_cars_per_household"?ui:fi}let t=n(r),l=t(r);return{c(){l.c(),e=be()},m(o,i){l.m(o,i),_(o,e,i)},p(o,i){zn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&g(e),l.d(o)}}}function pi(r){let e,n;return e=new re({props:{$$slots:{default:[$i,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mi(r){let e,n,t,l;const o=[M(Ke),{sourceLayer:Ke},{paint:{"fill-color":$e(["get",r[3]],r[6](),r[4]),"fill-opacity":G(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[pi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=K(i,o[a]);e=new Me({props:i}),e.$on("click",r[5]);const u=[M(`${Ke}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=K(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Y(o,[f&0&&J(M(Ke)),f&0&&{sourceLayer:Ke},f&88&&{paint:{"fill-color":$e(["get",a[3]],a[6](),a[4]),"fill-opacity":G(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&8?Y(u,[f&0&&J(M(`${Ke}-outline`)),u[1],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function _i(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,T;function w(I){r[7](I)}let C={id:"percent_households_with_car",$$slots:{right:[Zs],default:[Vs]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new le({props:C}),V.push(()=>Z(e,"checked",w)),e.$on("change",r[8]);let S=r[3]=="percent_households_with_car"&&qn(r);function E(I){r[9](I)}let j={id:"average_cars_per_household",$$slots:{right:[ri],default:[Qs]},$$scope:{ctx:r}};r[1]!==void 0&&(j.checked=r[1]),o=new le({props:j}),V.push(()=>Z(o,"checked",E)),o.$on("change",r[10]);let B=r[3]=="average_cars_per_household"&&Vn(r);function L(I){r[11](I)}let P={id:"population_density",$$slots:{right:[ai],default:[li]},$$scope:{ctx:r}};r[2]!==void 0&&(P.checked=r[2]),a=new le({props:P}),V.push(()=>Z(a,"checked",L)),a.$on("change",r[12]);let N=r[3]=="population_density"&&Xn(r);return $=new ce({props:{url:`pmtiles://${fe()}/v1/${Ke}.pmtiles`,$$slots:{default:[mi]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),S&&S.c(),l=O(),d(o.$$.fragment),u=O(),B&&B.c(),s=O(),d(a.$$.fragment),c=O(),N&&N.c(),p=O(),d($.$$.fragment)},m(I,D){b(e,I,D),_(I,t,D),S&&S.m(I,D),_(I,l,D),b(o,I,D),_(I,u,D),B&&B.m(I,D),_(I,s,D),b(a,I,D),_(I,c,D),N&&N.m(I,D),_(I,p,D),b($,I,D),T=!0},p(I,[D]){const R={};D&65536&&(R.$$scope={dirty:D,ctx:I}),!n&&D&1&&(n=!0,R.checked=I[0],x(()=>n=!1)),e.$set(R),I[3]=="percent_households_with_car"?S?(S.p(I,D),D&8&&m(S,1)):(S=qn(I),S.c(),m(S,1),S.m(l.parentNode,l)):S&&(ie(),h(S,1,1,()=>{S=null}),ae());const F={};D&65536&&(F.$$scope={dirty:D,ctx:I}),!i&&D&2&&(i=!0,F.checked=I[1],x(()=>i=!1)),o.$set(F),I[3]=="average_cars_per_household"?B?(B.p(I,D),D&8&&m(B,1)):(B=Vn(I),B.c(),m(B,1),B.m(s.parentNode,s)):B&&(ie(),h(B,1,1,()=>{B=null}),ae());const se={};D&65536&&(se.$$scope={dirty:D,ctx:I}),!f&&D&4&&(f=!0,se.checked=I[2],x(()=>f=!1)),a.$set(se),I[3]=="population_density"?N?(N.p(I,D),D&8&&m(N,1)):(N=Xn(I),N.c(),m(N,1),N.m(p.parentNode,p)):N&&(ie(),h(N,1,1,()=>{N=null}),ae());const ee={};D&65544&&(ee.$$scope={dirty:D,ctx:I}),$.$set(ee)},i(I){T||(m(e.$$.fragment,I),m(S),m(o.$$.fragment,I),m(B),m(a.$$.fragment,I),m(N),m($.$$.fragment,I),T=!0)},o(I){h(e.$$.fragment,I),h(S),h(o.$$.fragment,I),h(B),h(a.$$.fragment,I),h(N),h($.$$.fragment,I),T=!1},d(I){I&&(g(t),g(l),g(u),g(s),g(c),g(p)),v(e,I),S&&S.d(I),v(o,I),B&&B.d(I),v(a,I),N&&N.d(I),v($,I)}}}let Ke="census_output_areas";const gi=r=>r.toLocaleString();function hi(r,e,n){let t=U.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(C){let S=C.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${S}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${S}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(C){l=C,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function p(C){o=C,n(1,o)}const $=()=>{n(0,l=!1),n(2,i=!1)};function T(C){i=C,n(2,i)}const w=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,p,$,T,w]}class di extends z{constructor(e){super(),q(this,e,hi,_i,W,{})}}function bi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=k(`
  Combined authorities`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function vi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function wi(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[vi]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=A("p"),n=k("Data from "),d(t.$$.fragment),l=k(", as of December 2022."),o=O(),d(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function ki(r){let e,n,t;return n=new oe({props:{$$slots:{default:[wi]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function yi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=k(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function Si(r){let e,n;return e=new re({props:{$$slots:{default:[yi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ci(r){let e,n,t,l;const o=[M(st),{paint:{"fill-color":r[1],"fill-opacity":G(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Si]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=K(i,o[a]);e=new Me({props:i}),e.$on("click",Oi);const u=[M(`${st}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=K(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&J(M(st)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":G(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Y(u,[f&0&&J(M(`${st}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Ti(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:st,$$slots:{right:[ki],default:[bi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new Qe({props:{data:`${fe()}/v1/${st}.geojson`,$$slots:{default:[Ci]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let st="combined_authorities";function Oi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ai(r,e,n){let t=U.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Li extends z{constructor(e){super(),q(this,e,Ai,Ti,W,{})}}function Ei(r){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ni(r){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Pi(r){let e;return{c(){e=k(`here
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ii(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Ni]},$$scope:{ctx:r}}}),o=new X({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Pi]},$$scope:{ctx:r}}}),s=new Be({}),{c(){e=A("p"),n=k("The 2019 English IMD scores come from "),d(t.$$.fragment),l=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),d(o.$$.fragment),i=k("."),u=O(),d(s.$$.fragment)},m(f,c){_(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const $={};c&32&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){h(t.$$.fragment,f),h(o.$$.fragment,f),h(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(u)),v(t),v(o),v(s,f)}}}function Di(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ii]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Kn(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ji(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,p=r[4].rank.toLocaleString()+"",$,T;return{c(){e=A("p"),t=k(n),l=k(` has an IMD score of
        `),o=A("b"),u=k(i),s=O(),a=A("p"),f=k("Rank: "),c=A("b"),$=k(p),T=k(`
        / 32,844 LSOAs`)},m(w,C){_(w,e,C),y(e,t),y(e,l),y(e,o),y(o,u),_(w,s,C),_(w,a,C),y(a,f),y(a,c),y(c,$),y(a,T)},p(w,C){C&16&&n!==(n=w[4].LSOA11CD+"")&&H(t,n),C&16&&i!==(i=w[4].score+"")&&H(u,i),C&16&&p!==(p=w[4].rank.toLocaleString()+"")&&H($,p)},d(w){w&&(g(e),g(s),g(a))}}}function Fi(r){let e,n;return e=new re({props:{$$slots:{default:[ji,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mi(r){let e,n,t,l;const o=[M(Ge),{sourceLayer:Ge},{paint:{"fill-color":$e(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":G(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let i={$$slots:{default:[Fi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=K(i,o[a]);e=new Me({props:i});const u=[M(`${Ge}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=K(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Y(o,[f&0&&J(M(Ge)),f&0&&{sourceLayer:Ge},f&6&&{paint:{"fill-color":$e(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":G(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&1?Y(u,[f&0&&J(M(`${Ge}-outline`)),u[1],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Bi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:Ge,$$slots:{right:[Di],default:[Ei]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[0]&&Kn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Ge}.pmtiles`,$$slots:{default:[Mi]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),a&&a.c(),l=O(),d(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],x(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Kn(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),h(a,1,1,()=>{a=null}),ae());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Ge="imd";function Hi(r,e,n){let t=U.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Ri extends z{constructor(e){super(),q(this,e,Hi,Bi,W,{})}}function Gi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Wi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ui(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Wi]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=A("p"),n=k("Data from "),d(t.$$.fragment),l=k(", as of May 2023."),o=O(),d(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function zi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ui]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function qi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=k(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function Vi(r){let e,n;return e=new re({props:{$$slots:{default:[qi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xi(r){let e,n,t,l;const o=[M(it),{paint:{"fill-color":r[1],"fill-opacity":G(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Vi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=K(i,o[a]);e=new Me({props:i}),e.$on("click",Yi);const u=[M(`${it}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=K(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&J(M(it)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":G(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Y(u,[f&0&&J(M(`${it}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Ki(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:it,$$slots:{right:[zi],default:[Gi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new Qe({props:{data:`${fe()}/v1/${it}.geojson`,$$slots:{default:[Xi]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let it="local_authority_districts";function Yi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Ji(r,e,n){let t=U.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Zi extends z{constructor(e){super(),q(this,e,Ji,Ki,W,{})}}function Qi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function xi(r){let e;return{c(){e=k(`local authority
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ea(r){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ta(r){let e;return{c(){e=k(`development corporation
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function na(r){let e;return{c(){e=k("this map")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ra(r){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function la(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,T,w,C,S,E,j,B,L,P;return t=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[xi]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ea]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ta]},$$scope:{ctx:r}}}),$=new X({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[na]},$$scope:{ctx:r}}}),E=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ra]},$$scope:{ctx:r}}}),L=new Be({}),{c(){e=A("p"),n=k("LPAs may be a "),d(t.$$.fragment),l=k(", "),d(o.$$.fragment),i=k("y, or "),d(u.$$.fragment),s=k("."),a=O(),f=A("p"),c=A("strong"),p=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),d($.$$.fragment),T=k(" to get more details."),w=O(),C=A("p"),S=k("Data from ONS Geography via "),d(E.$$.fragment),j=k(", as of November 2022."),B=O(),d(L.$$.fragment)},m(N,I){_(N,e,I),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),b(u,e,null),y(e,s),_(N,a,I),_(N,f,I),y(f,c),y(c,p),b($,c,null),y(c,T),_(N,w,I),_(N,C,I),y(C,S),b(E,C,null),y(C,j),_(N,B,I),b(L,N,I),P=!0},p(N,I){const D={};I&16&&(D.$$scope={dirty:I,ctx:N}),t.$set(D);const R={};I&16&&(R.$$scope={dirty:I,ctx:N}),o.$set(R);const F={};I&16&&(F.$$scope={dirty:I,ctx:N}),u.$set(F);const se={};I&16&&(se.$$scope={dirty:I,ctx:N}),$.$set(se);const ee={};I&16&&(ee.$$scope={dirty:I,ctx:N}),E.$set(ee)},i(N){P||(m(t.$$.fragment,N),m(o.$$.fragment,N),m(u.$$.fragment,N),m($.$$.fragment,N),m(E.$$.fragment,N),m(L.$$.fragment,N),P=!0)},o(N){h(t.$$.fragment,N),h(o.$$.fragment,N),h(u.$$.fragment,N),h($.$$.fragment,N),h(E.$$.fragment,N),h(L.$$.fragment,N),P=!1},d(N){N&&(g(e),g(a),g(f),g(w),g(C),g(B)),v(t),v(o),v(u),v($),v(E),v(L,N)}}}function oa(r){let e,n,t;return n=new oe({props:{$$slots:{default:[la]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function sa(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=k(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function ia(r){let e,n;return e=new re({props:{$$slots:{default:[sa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function aa(r){let e,n,t,l;const o=[M(Te),{sourceLayer:Te},{paint:{"fill-color":r[1],"fill-opacity":G(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let i={$$slots:{default:[ia]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=K(i,o[a]);e=new Me({props:i});const u=[M(`${Te}-outline`),{sourceLayer:Te},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=K(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&J(M(Te)),f&0&&{sourceLayer:Te},f&2&&{paint:{"fill-color":a[1],"fill-opacity":G(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Y(u,[f&0&&J(M(`${Te}-outline`)),f&0&&{sourceLayer:Te},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function fa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Te,$$slots:{right:[oa],default:[Qi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Te}.pmtiles`,$$slots:{default:[aa]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Te="local_planning_authorities";function ua(r,e,n){let t=U.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ca extends z{constructor(e){super(),q(this,e,ua,fa,W,{})}}function $a(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function pa(r){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ma(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[pa]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=A("p"),n=k("Data from "),d(t.$$.fragment),l=k(", as of May 2023."),o=O(),d(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function _a(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ma]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function ga(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=k(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&H(t,n)},d(l){l&&g(e)}}}function ha(r){let e,n;return e=new re({props:{$$slots:{default:[ga,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function da(r){let e,n,t,l;const o=[M(Oe),{sourceLayer:Oe},{paint:{"fill-color":r[1],"fill-opacity":G(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ha]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=K(i,o[a]);e=new Me({props:i}),e.$on("click",va);const u=[M(`${Oe}-outline`),{sourceLayer:Oe},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=K(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&J(M(Oe)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":G(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Y(u,[f&0&&J(M(`${Oe}-outline`)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function ba(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Oe,$$slots:{right:[_a],default:[$a]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Oe}.pmtiles`,$$slots:{default:[da]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Oe="parliamentary_constituencies";function va(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function wa(r,e,n){let t=U.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ka extends z{constructor(e){super(),q(this,e,wa,ba,W,{})}}function ya(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=k(`
  Wards`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Sa(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ca(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Sa]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=A("p"),n=k("Data from "),d(t.$$.fragment),l=k(", as of May 2023."),o=O(),d(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Ta(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ca]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Oa(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=k(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function Aa(r){let e,n;return e=new re({props:{$$slots:{default:[Oa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function La(r){let e,n,t,l;const o=[M(Ae),{sourceLayer:Ae},{paint:{"fill-color":r[1],"fill-opacity":G(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Aa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=K(i,o[a]);e=new Me({props:i}),e.$on("click",Na);const u=[M(`${Ae}-outline`),{sourceLayer:Ae},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=K(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&J(M(Ae)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"fill-color":a[1],"fill-opacity":G(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Y(u,[f&0&&J(M(`${Ae}-outline`)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Ea(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ae,$$slots:{right:[Ta],default:[ya]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ae}.pmtiles`,$$slots:{default:[La]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Ae="wards";function Na(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Pa(r,e,n){let t=U.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ia extends z{constructor(e){super(),q(this,e,Pa,Ea,W,{})}}function Da(r){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ja(r){let e,n,t,l;return t=new X({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Da]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=k("License: "),d(t.$$.fragment)},m(o,i){_(o,e,i),y(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){h(t.$$.fragment,o),l=!1},d(o){o&&g(e),v(t)}}}class qe extends z{constructor(e){super(),q(this,e,null,ja,W,{})}}function Fa(r){let e,n,t;return e=new ge({props:{color:U.bus_route_with_lane}}),{c(){d(e.$$.fragment),n=k(`
  Bus routes`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Ma(r){let e;return{c(){e=k(`GTFS
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ba(r){let e,n,t,l,o,i,u,s,a;return o=new X({props:{href:"https://gtfs.org",$$slots:{default:[Ma]},$$scope:{ctx:r}}}),s=new qe({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=A("p"),l=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),d(o.$$.fragment),i=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),d(s.$$.fragment)},m(f,c){_(f,e,c),_(f,n,c),_(f,t,c),y(t,l),b(o,t,null),y(t,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&8&&(p.$$scope={dirty:c,ctx:f}),o.$set(p)},i(f){a||(m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){h(o.$$.fragment,f),h(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(n),g(t),g(u)),v(o),v(s,f)}}}function Ha(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ba]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Ra(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ga(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Wa(r){let e;function n(o,i){return o[2].has_bus_lane?Ga:Ra}let t=n(r),l=t(r);return{c(){l.c(),e=be()},m(o,i){l.m(o,i),_(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&g(e),l.d(o)}}}function Ua(r){let e,n;return e=new re({props:{$$slots:{default:[Wa,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function za(r){let e,n;const t=[M(at),{sourceLayer:at},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],U.bus_route_with_lane,U.bus_route_without_lane],"line-width":5,"line-opacity":G(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[Ua]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Y(t,[i&0&&J(M(at)),i&0&&{sourceLayer:at},i&0&&{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],U.bus_route_with_lane,U.bus_route_without_lane],"line-width":5,"line-opacity":G(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function qa(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:at,$$slots:{right:[Ha],default:[Fa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${at}.pmtiles`,$$slots:{default:[za]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let at="bus_routes";function Va(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Xa extends z{constructor(e){super(),q(this,e,Va,qa,W,{})}}function Yn(r){const e=tf(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function Jn(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function Ka(r){let e;return{c(){e=k("Cycle paths")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ya(r){let e,n,t,l,o,i,u,s;return u=new qe({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=O(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=O(),d(u.$$.fragment)},m(a,f){_(a,e,f),_(a,n,f),_(a,t,f),_(a,l,f),_(a,o,f),_(a,i,f),b(u,a,f),s=!0},p:te,i(a){s||(m(u.$$.fragment,a),s=!0)},o(a){h(u.$$.fragment,a),s=!1},d(a){a&&(g(e),g(n),g(t),g(l),g(o),g(i)),v(u,a)}}}function Ja(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ya]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Zn(r){let e,n,t=Ue(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=Qn(Jn(r,t,i));const o=i=>h(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=be()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);_(i,e,u),n=!0},p(i,u){if(u&2){t=Ue(i[1]);let s;for(s=0;s<t.length;s+=1){const a=Jn(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=Qn(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)h(l[u]);n=!1},d(i){i&&g(e),Pt(l,i)}}}function Qn(r){let e,n,t,l=r[7]+"",o,i,u;return n=new ge({props:{color:r[8]}}),{c(){e=A("div"),d(n.$$.fragment),t=O(),o=k(l),i=O()},m(s,a){_(s,e,a),b(n,e,null),y(e,t),y(e,o),y(e,i),u=!0},p:te,i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){h(n.$$.fragment,s),u=!1},d(s){s&&g(e),v(n)}}}function Za(r){Yn(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,p,$=r[6]+"",T;return{c(){e=A("h2"),t=k(n),l=O(),o=A("p"),i=k("Direction: "),u=A("b"),a=O(),f=A("p"),c=k("Width: "),p=A("b"),T=k($)},m(w,C){_(w,e,C),y(e,t),_(w,l,C),_(w,o,C),y(o,i),y(o,u),u.innerHTML=s,_(w,a,C),_(w,f,C),y(f,c),y(f,p),y(p,T)},p(w,C){Yn(w),C&8&&n!==(n=w[4]+"")&&H(t,n),C&8&&s!==(s=w[5]+"")&&(u.innerHTML=s),C&8&&$!==($=w[6]+"")&&H(T,$)},d(w){w&&(g(e),g(l),g(o),g(a),g(f))}}}function Qa(r){let e,n;return e=new re({props:{$$slots:{default:[Za,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xa(r){let e,n;const t=[M(ft),{sourceLayer:ft},{paint:{"line-color":Jt(["get","kind"],{track:U.cycle_paths.track,lane:U.cycle_paths.lane,shared_use_segregated:U.cycle_paths.shared_use_segregated,shared_use_unsegregated:U.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ie,"line-opacity":G(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Qa]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new ue({props:l}),e.$on("click",nf),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Y(t,[i&0&&J(M(ft)),i&0&&{sourceLayer:ft},i&0&&{paint:{"line-color":Jt(["get","kind"],{track:U.cycle_paths.track,lane:U.cycle_paths.lane,shared_use_segregated:U.cycle_paths.shared_use_segregated,shared_use_unsegregated:U.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ie,"line-opacity":G(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ef(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:ft,$$slots:{right:[Ja],default:[Ka]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[0]&&Zn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${ft}.pmtiles`,$$slots:{default:[xa]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),a&&a.c(),l=O(),d(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&2048&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],x(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Zn(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),h(a,1,1,()=>{a=null}),ae());const $={};c&2049&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ft="cycle_paths";function tf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function nf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function rf(r,e,n){let t=[["Separated tracks",U.cycle_paths.track],["Unprotected lanes",U.cycle_paths.lane],["Shared-use (segregated)",U.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",U.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class lf extends z{constructor(e){super(),q(this,e,rf,ef,W,{})}}function of(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=k(`
  Major Road Network`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function sf(r){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function af(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[sf]},$$scope:{ctx:r}}}),i=new Be({}),{c(){e=A("p"),n=k("Data from the "),d(t.$$.fragment),l=k(", as of September 2021."),o=O(),d(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function ff(r){let e,n,t;return n=new oe({props:{$$slots:{default:[af]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function uf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=k(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&H(t,n)},d(l){l&&g(e)}}}function cf(r){let e,n;return e=new re({props:{$$slots:{default:[uf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $f(r){let e,n;const t=[M(ut),{sourceLayer:ut},{manageHoverState:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":G(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[cf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&J(M(ut)),i&0&&{sourceLayer:ut},t[2],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":G(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function pf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ut,$$slots:{right:[ff],default:[of]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${ut}.pmtiles`,$$slots:{default:[$f]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let ut="mrn";function mf(r,e,n){let t=U.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class _f extends z{constructor(e){super(),q(this,e,mf,pf,W,{})}}function gf(r){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function hf(r){let e;return{c(){e=k("the PCT website")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function df(r){let e;return{c(){e=k("2017 journal article")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function bf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new X({props:{href:"https://www.pct.bike",$$slots:{default:[hf]},$$scope:{ctx:r}}}),a=new X({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[df]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=O(),o=A("p"),i=k("See "),d(u.$$.fragment),s=k(" and "),d(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(p,$){_(p,e,$),_(p,n,$),_(p,t,$),_(p,l,$),_(p,o,$),y(o,i),b(u,o,null),y(o,s),b(a,o,null),y(o,f),c=!0},p(p,$){const T={};$&1024&&(T.$$scope={dirty:$,ctx:p}),u.$set(T);const w={};$&1024&&(w.$$scope={dirty:$,ctx:p}),a.$set(w)},i(p){c||(m(u.$$.fragment,p),m(a.$$.fragment,p),c=!0)},o(p){h(u.$$.fragment,p),h(a.$$.fragment,p),c=!1},d(p){p&&(g(e),g(n),g(t),g(l),g(o)),v(u),v(a)}}}function vf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function xn(r){let e,n,t,l,o,i,u,s;e=new ze({props:{colorScale:r[3],limits:r[4]}});function a($){r[7]($)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new mr({props:f}),V.push(()=>Z(t,"value",a));function c($){r[8]($)}let p={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(p.value=r[1]),i=new It({props:p}),V.push(()=>Z(i,"value",c)),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),o=O(),d(i.$$.fragment)},m($,T){b(e,$,T),_($,n,T),b(t,$,T),_($,o,T),b(i,$,T),s=!0},p($,T){const w={};!l&&T&1&&(l=!0,w.value=$[0],x(()=>l=!1)),t.$set(w);const C={};!u&&T&2&&(u=!0,C.value=$[1],x(()=>u=!1)),i.$set(C)},i($){s||(m(e.$$.fragment,$),m(t.$$.fragment,$),m(i.$$.fragment,$),s=!0)},o($){h(e.$$.fragment,$),h(t.$$.fragment,$),h(i.$$.fragment,$),s=!1},d($){$&&(g(n),g(o)),v(e,$),v(t,$),v(i,$)}}}function wf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new on(!1),t=be(),e.a=t},m(l,o){e.m(n,l,o),_(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(g(t),e.d())}}}function kf(r){let e,n;return e=new re({props:{$$slots:{default:[wf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yf(r){let e,n;const t=[M(Ee),{sourceLayer:Ee},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":Ie,"line-opacity":G(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ee?"visible":"none"}}];let l={$$slots:{default:[kf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Y(t,[i&0&&J(M(Ee)),i&0&&{sourceLayer:Ee},i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":Ie,"line-opacity":G(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ee?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Sf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new on(!1),t=be(),e.a=t},m(l,o){e.m(n,l,o),_(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(g(t),e.d())}}}function Cf(r){let e,n;return e=new re({props:{$$slots:{default:[Sf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tf(r){let e,n;const t=[M(Ye),{sourceLayer:Ye},{manageHoverState:!0},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":Ie,"line-opacity":G(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ye?"visible":"none"}}];let l={$$slots:{default:[Cf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Y(t,[i&0&&J(M(Ye)),i&0&&{sourceLayer:Ye},t[2],i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":Ie,"line-opacity":G(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ye?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Of(r){let e,n,t,l,o,i,u,s;function a(p){r[6](p)}let f={id:Ee,$$slots:{right:[vf],default:[gf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new le({props:f}),V.push(()=>Z(e,"checked",a));let c=r[2]&&xn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Ee}.pmtiles`,$$slots:{default:[yf]},$$scope:{ctx:r}}}),u=new ce({props:{url:`pmtiles://${fe()}/v1/${Ye}.pmtiles`,$$slots:{default:[Tf]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),c&&c.c(),l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment)},m(p,$){b(e,p,$),_(p,t,$),c&&c.m(p,$),_(p,l,$),b(o,p,$),_(p,i,$),b(u,p,$),s=!0},p(p,[$]){const T={};$&1024&&(T.$$scope={dirty:$,ctx:p}),!n&&$&4&&(n=!0,T.checked=p[2],x(()=>n=!1)),e.$set(T),p[2]?c?(c.p(p,$),$&4&&m(c,1)):(c=xn(p),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(ie(),h(c,1,1,()=>{c=null}),ae());const w={};$&1031&&(w.$$scope={dirty:$,ctx:p}),o.$set(w);const C={};$&1031&&(C.$$scope={dirty:$,ctx:p}),u.$set(C)},i(p){s||(m(e.$$.fragment,p),m(c),m(o.$$.fragment,p),m(u.$$.fragment,p),s=!0)},o(p){h(e.$$.fragment,p),h(c),h(o.$$.fragment,p),h(u.$$.fragment,p),s=!1},d(p){p&&(g(t),g(l),g(i)),v(e,p),c&&c.d(p),v(o,p),v(u,p)}}}let Ee="pct_commute",Ye="pct_school";function Af(r,e,n){let t=U.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ee,i="baseline",u=!1;function s(p){let $=p.baseline,T=p.gov_target,w=p.go_dutch,C=`<h2>Trip purpose: ${o==Ee?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${$.toLocaleString()}</b></p>`,$==0)C+=`<p>Government target (2025): <b>${T.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${w.toLocaleString()}</b></p>`;else{let S=(T/$).toFixed(1),E=(w/$).toFixed(1);C+=`<p>Government target (2025): ${T.toLocaleString()} (<b>${S}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${w.toLocaleString()} (<b>${E}x</b> of baseline)</p>`}return C}function a(p){u=p,n(2,u)}function f(p){o=p,n(0,o)}function c(p){i=p,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class Lf extends z{constructor(e){super(),q(this,e,Af,Of,W,{})}}function Ef(r){let e;return{c(){e=k("OS Speeds")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Nf(r){let e;return{c(){e=k("Basemap")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Pf(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function If(r){let e,n,t,l,o,i,u,s,a,f,c,p;return t=new X({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Nf]},$$scope:{ctx:r}}}),f=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Pf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=k("The average speed data is collected over a six-month period by "),d(t.$$.fragment),l=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=O(),s=A("p"),a=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),d(f.$$.fragment),c=k(".")},m($,T){_($,e,T),y(e,n),b(t,e,null),y(e,l),_($,o,T),_($,i,T),_($,u,T),_($,s,T),y(s,a),b(f,s,null),y(s,c),p=!0},p($,T){const w={};T&256&&(w.$$scope={dirty:T,ctx:$}),t.$set(w);const C={};T&256&&(C.$$scope={dirty:T,ctx:$}),f.$set(C)},i($){p||(m(t.$$.fragment,$),m(f.$$.fragment,$),p=!0)},o($){h(t.$$.fragment,$),h(f.$$.fragment,$),p=!1},d($){$&&(g(e),g(o),g(i),g(u),g(s)),v(t),v(f)}}}function Df(r){let e,n,t;return n=new oe({props:{$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function er(r){let e,n,t,l,o;e=new ze({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new mr({props:u}),V.push(()=>Z(t,"value",i)),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(s,a){b(e,s,a),_(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],x(()=>l=!1)),t.$set(f)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(t.$$.fragment,s),o=!1},d(s){s&&g(n),v(e,s),v(t,s)}}}function jf(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,p=r[4][r[7].highest_description]+"",$,T;return{c(){e=A("p"),n=k("Posted speed limit: "),l=k(t),o=k(" mph"),i=O(),u=A("p"),s=k("Highest average speed: "),f=k(a),c=k(" mph (during "),$=k(p),T=k(")")},m(w,C){_(w,e,C),y(e,n),y(e,l),y(e,o),_(w,i,C),_(w,u,C),y(u,s),y(u,f),y(u,c),y(u,$),y(u,T)},p(w,C){C&128&&t!==(t=w[7].indicative_mph+"")&&H(l,t),C&128&&a!==(a=w[7].highest_mph+"")&&H(f,a),C&128&&p!==(p=w[4][w[7].highest_description]+"")&&H($,p)},d(w){w&&(g(e),g(i),g(u))}}}function Ff(r){let e,n;return e=new re({props:{$$slots:{default:[jf,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mf(r){let e,n;const t=[M(ct),{sourceLayer:ct},{manageHoverState:!0},{paint:{"line-color":$e(["get",r[0]],r[3],r[2]),"line-width":Ie,"line-opacity":G(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[Ff]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Y(t,[i&0&&J(M(ct)),i&0&&{sourceLayer:ct},t[2],i&13&&{paint:{"line-color":$e(["get",o[0]],o[3],o[2]),"line-width":Ie,"line-opacity":G(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Bf(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ct,$$slots:{right:[Df],default:[Ef]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[1]&&er(r);return o=new ce({props:{url:`pmtiles://${sn()}/v1/${ct}.pmtiles`,$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),a&&a.c(),l=O(),d(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,p.checked=f[1],x(()=>n=!1)),e.$set(p),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=er(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),h(a,1,1,()=>{a=null}),ae());const $={};c&259&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ct="road_speeds";function Hf(r,e,n){let t=U.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class Rf extends z{constructor(e){super(),q(this,e,Hf,Bf,W,{})}}function Gf(r){let e;return{c(){e=k("OS Road widths")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Wf(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Uf(r){let e,n,t,l,o,i,u,s,a;return u=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Wf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=O(),o=A("p"),i=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),d(u.$$.fragment),s=k(".")},m(f,c){_(f,e,c),_(f,n,c),_(f,t,c),_(f,l,c),_(f,o,c),y(o,i),b(u,o,null),y(o,s),a=!0},p(f,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),u.$set(p)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){h(u.$$.fragment,f),a=!1},d(f){f&&(g(e),g(n),g(t),g(l),g(o)),v(u)}}}function zf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function tr(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[2]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qf(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",p,$;return{c(){e=A("p"),n=k("Average width: "),t=A("b"),o=k(l),i=k(`
        meters`),u=O(),s=A("p"),a=k("Minimum width: "),f=A("b"),p=k(c),$=k(`
        meters`)},m(T,w){_(T,e,w),y(e,n),y(e,t),y(t,o),y(e,i),_(T,u,w),_(T,s,w),y(s,a),y(s,f),y(f,p),y(s,$)},p(T,w){w&16&&l!==(l=T[4].average+"")&&H(o,l),w&16&&c!==(c=T[4].minimum+"")&&H(p,c)},d(T){T&&(g(e),g(u),g(s))}}}function Vf(r){let e,n;return e=new re({props:{$$slots:{default:[qf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xf(r){let e,n;const t=[M($t),{sourceLayer:$t},{manageHoverState:!0},{paint:{"line-color":$e(["get","average"],r[2],r[1]),"line-width":Ie,"line-opacity":G(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Vf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Y(t,[i&0&&J(M($t)),i&0&&{sourceLayer:$t},t[2],i&6&&{paint:{"line-color":$e(["get","average"],o[2],o[1]),"line-width":Ie,"line-opacity":G(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Kf(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:$t,$$slots:{right:[zf],default:[Gf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[0]&&tr(r);return o=new ce({props:{url:`pmtiles://${sn()}/v1/${$t}.pmtiles`,$$slots:{default:[Xf]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),a&&a.c(),l=O(),d(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],x(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=tr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),h(a,1,1,()=>{a=null}),ae());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let $t="road_widths";function Yf(r,e,n){let t=U.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Jf extends z{constructor(e){super(),q(this,e,Yf,Kf,W,{})}}function Zf(r){let e,n,t;return{c(){e=A("input"),Q(e,"class","govuk-file-upload"),Q(e,"id","load-criticals"),Q(e,"type","file")},m(l,o){_(l,e,o),r[7](e),n||(t=Mt(e,"change",r[5]),n=!0)},p:te,d(l){l&&g(e),r[7](null),n=!1,t()}}}function nr(r){let e,n;return e=new Tt({props:{small:!0,$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qf(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new ge({props:{color:vt}}),{c(){d(e.$$.fragment),n=k(`
        Show `),l=k(t),o=k(" issues")},m(u,s){b(e,u,s),_(u,n,s),_(u,l,s),_(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&H(l,t)},i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){h(e.$$.fragment,u),i=!1},d(u){u&&(g(n),g(l),g(o)),v(e,u)}}}function xf(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[Qf]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),V.push(()=>Z(e,"checked",l)),{c(){d(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function eu(r){let e,n,t,l,o,i;e=new pr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Zf]},$$scope:{ctx:r}}}),t=new _r({props:{errorMessage:r[3]}});let u=r[2]>0&&nr(r);return{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),u&&u.c(),o=be()},m(s,a){b(e,s,a),_(s,n,a),b(t,s,a),_(s,l,a),u&&u.m(s,a),_(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&m(u,1)):(u=nr(s),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(ie(),h(u,1,1,()=>{u=null}),ae())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(u),i=!0)},o(s){h(e.$$.fragment,s),h(t.$$.fragment,s),h(u),i=!1},d(s){s&&(g(n),g(l),g(o)),v(e,s),v(t,s),u&&u.d(s)}}}function tu(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,p,$,T,w=r[10].notes+"",C,S,E,j,B,L,P,N=r[10].id+"",I,D,R,F,se,ee=(r[10].inspector??"???")+"",ve,gt,he,xe=r[10].submission_time+"",ht,et,pe,dt,De,He=r[10].scheme_reference+"",Ve,bt,tt,Xe=r[10].current_design_stage+"",nt;return{c(){e=A("div"),n=A("h2"),l=k(t),o=O(),i=A("p"),u=A("u"),u.textContent="Location",s=k(`
          : `),f=k(a),c=O(),p=A("p"),$=A("u"),$.textContent="Notes",T=k(`
          : `),C=k(w),S=O(),E=A("hr"),j=O(),B=A("p"),L=k("Critical issue ID: "),P=A("b"),I=k(N),D=O(),R=A("p"),F=k("Submitted by "),se=A("b"),ve=k(ee),gt=k(`
          at
          `),he=A("b"),ht=k(xe),et=O(),pe=A("p"),dt=k("For scheme "),De=A("b"),Ve=k(He),bt=k(`
          in stage
          `),tt=A("b"),nt=k(Xe),Se(e,"max-width","30vw")},m(de,Ce){_(de,e,Ce),y(e,n),y(n,l),y(e,o),y(e,i),y(i,u),y(i,s),y(i,f),y(e,c),y(e,p),y(p,$),y(p,T),y(p,C),y(e,S),y(e,E),y(e,j),y(e,B),y(B,L),y(B,P),y(P,I),y(e,D),y(e,R),y(R,F),y(R,se),y(se,ve),y(R,gt),y(R,he),y(he,ht),y(e,et),y(e,pe),y(pe,dt),y(pe,De),y(De,Ve),y(pe,bt),y(pe,tt),y(tt,nt)},p(de,Ce){Ce&1024&&t!==(t=de[10].critical_type+"")&&H(l,t),Ce&1024&&a!==(a=de[10].location_description+"")&&H(f,a),Ce&1024&&w!==(w=de[10].notes+"")&&H(C,w),Ce&1024&&N!==(N=de[10].id+"")&&H(I,N),Ce&1024&&ee!==(ee=(de[10].inspector??"???")+"")&&H(ve,ee),Ce&1024&&xe!==(xe=de[10].submission_time+"")&&H(ht,xe),Ce&1024&&He!==(He=de[10].scheme_reference+"")&&H(Ve,He),Ce&1024&&Xe!==(Xe=de[10].current_design_stage+"")&&H(nt,Xe)},d(de){de&&g(e)}}}function nu(r){let e,n;return e=new re({props:{$$slots:{default:[tu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ru(r){let e,n,t,l,o,i;const u=[M(`${We}-clusters`),{applyToClusters:!0},{paint:{"circle-color":vt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let $=0;$<u.length;$+=1)s=K(s,u[$]);e=new Fe({props:s}),e.$on("click",r[6]);const a=[M(`${We}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let $=0;$<a.length;$+=1)f=K(f,a[$]);t=new al({props:f});const c=[M(`${We}-points`),{applyToClusters:!1},{manageHoverState:!0},{paint:{"circle-color":vt,"circle-opacity":G(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let p={$$slots:{default:[nu]},$$scope:{ctx:r}};for(let $=0;$<c.length;$+=1)p=K(p,c[$]);return o=new Fe({props:p}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),d(o.$$.fragment)},m($,T){b(e,$,T),_($,n,T),b(t,$,T),_($,l,T),b(o,$,T),i=!0},p($,T){const w=T&2?Y(u,[T&0&&J(M(`${We}-clusters`)),u[1],T&0&&{paint:{"circle-color":vt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},T&2&&{layout:{visibility:$[1]?"visible":"none"}},u[4]]):{};e.$set(w);const C=T&2?Y(a,[T&0&&J(M(`${We}-counts`)),a[1],T&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:$[1]?"visible":"none"}}]):{};t.$set(C);const S=T&2?Y(c,[T&0&&J(M(`${We}-points`)),c[1],c[2],T&0&&{paint:{"circle-color":vt,"circle-opacity":G(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},T&2&&{layout:{visibility:$[1]?"visible":"none"}}]):{};T&2048&&(S.$$scope={dirty:T,ctx:$}),o.$set(S)},i($){i||(m(e.$$.fragment,$),m(t.$$.fragment,$),m(o.$$.fragment,$),i=!0)},o($){h(e.$$.fragment,$),h(t.$$.fragment,$),h(o.$$.fragment,$),i=!1},d($){$&&(g(n),g(l)),v(e,$),v(t,$),v(o,$)}}}function lu(r){let e,n,t,l;return e=new Le({props:{label:"Critical Issues",$$slots:{default:[eu]},$$scope:{ctx:r}}}),t=new Qe({props:{id:We,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[ru]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),h(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}let We="criticals",vt="red";function ou(r,e,n){let t;je(r,Ct,$=>n(9,t=$));let l,o=!0,i=0,u="",s=rn();async function a($){try{n(4,s=await Es(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(T){n(3,u=`The file you loaded is broken: ${T}`)}}function f($){t.getSource(We).getClusterExpansionZoom($.detail.features[0].properties.cluster_id,(T,w)=>{T||t.easeTo({center:$.detail.features[0].geometry.coordinates,zoom:w})})}function c($){V[$?"unshift":"push"](()=>{l=$,n(0,l)})}function p($){o=$,n(1,o)}return[l,o,i,u,s,a,f,c,p]}class su extends z{constructor(e){super(),q(this,e,ou,lu,W,{})}}function iu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=k(`
  Crossings`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function au(r){let e;return{c(){e=k("crossing")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function fu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[au]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=A("p"),n=k("This shows "),d(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),d(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function uu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[fu]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function cu(r){let e,n=rr(r[3])+"",t;return{c(){e=A("p"),t=k(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=rr(l[3])+"")&&H(t,n)},d(l){l&&g(e)}}}function $u(r){let e,n;return e=new re({props:{$$slots:{default:[cu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pu(r){let e,n;const t=[M(pt),{sourceLayer:pt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let l={$$slots:{default:[$u]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new Fe({props:l}),e.$on("click",_u),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&J(M(pt)),i&0&&{sourceLayer:pt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function mu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:pt,$$slots:{right:[uu],default:[iu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${pt}.pmtiles`,$$slots:{default:[pu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let pt="crossings";function rr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function _u(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function gu(r,e,n){let t=U.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class hu extends z{constructor(e){super(),q(this,e,gu,mu,W,{})}}function du(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=k(`
  Cycle parking`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function bu(r){let e;return{c(){e=k("OpenStreetMap")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function vu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[bu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=A("p"),n=k("Cycle parking, according to "),d(t.$$.fragment),l=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),d(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function wu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[vu]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function ku(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=k("Capacity: "),t=A("b"),o=k(l)},m(i,u){_(i,e,u),y(e,n),y(e,t),y(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&H(o,l)},d(i){i&&g(e)}}}function yu(r){let e,n;return e=new re({props:{$$slots:{default:[ku,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Su(r){let e,n;const t=[M(mt),{sourceLayer:mt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[yu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new Fe({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&J(M(mt)),i&0&&{sourceLayer:mt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Cu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:mt,$$slots:{right:[wu],default:[du]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${mt}.pmtiles`,$$slots:{default:[Su]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let mt="cycle_parking";function Tu(r,e,n){let t=U.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ou extends z{constructor(e){super(),q(this,e,Tu,Cu,W,{})}}function Au(r){let e,n,t,l;return e=new ge({props:{color:r[4]}}),{c(){d(e.$$.fragment),n=O(),t=k(r[2])},m(o,i){b(e,o,i),_(o,n,i),_(o,t,i),l=!0},p(o,i){(!l||i&4)&&H(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),l=!1},d(o){o&&(g(n),g(t)),v(e,o)}}}function Lu(r){let e;const n=r[5].default,t=Bt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Ht(t,n,l,l[7],e?Gt(n,l[7],o,null):Rt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){h(t,l),e=!1},d(l){t&&t.d(l)}}}function Eu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Lu]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Nu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=k(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&H(t,n)},d(l){l&&g(e)}}}function Pu(r){let e,n;return e=new re({props:{$$slots:{default:[Nu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Iu(r){let e,n;const t=[M(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":G(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[Pu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new Me({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Y(t,[i&1&&J(M(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":G(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Du(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[Eu],default:[Au]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Iu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],x(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${fe()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}function ju(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=U[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class fn extends z{constructor(e){super(),q(this,e,ju,Du,W,{name:0,singularNoun:1,pluralNoun:2})}}function Fu(r){let e;return{c(){e=k("hospital")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Mu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Fu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=A("p"),n=k("This shows "),d(t.$$.fragment),l=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),d(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Bu(r){let e,n;return e=new fn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Hu extends z{constructor(e){super(),q(this,e,null,Bu,W,{})}}function Ru(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=k(`
  Railway Stations`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Gu(r){let e;return{c(){e=k("railway station")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Wu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Gu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=A("p"),n=k("This shows "),d(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),d(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Uu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function zu(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=k(n)},m(l,o){_(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&H(t,n)},d(l){l&&g(e)}}}function qu(r){let e,n;return e=new re({props:{$$slots:{default:[zu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vu(r){let e,n;const t=[M(Ft),{paint:{"circle-color":r[1],"circle-radius":Dt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new Fe({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&J(M(Ft)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Dt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Xu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ft,$$slots:{right:[Uu],default:[Ru]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>Z(e,"checked",i)),l=new Qe({props:{data:`${fe()}/v1/${Ft}.geojson`,$$slots:{default:[Vu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Ft="railway_stations";function Ku(r,e,n){let t=U.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Yu extends z{constructor(e){super(),q(this,e,Ku,Xu,W,{})}}function Ju(r){let e;return{c(){e=k("primary and secondary schools")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Zu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[Ju]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=A("p"),n=k("This shows "),d(t.$$.fragment),l=k(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=O(),d(i.$$.fragment)},m(s,a){_(s,e,a),y(e,n),b(t,e,null),y(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Qu(r){let e,n;return e=new fn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[Zu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class xu extends z{constructor(e){super(),q(this,e,null,Qu,W,{})}}function ec(r){let e;return{c(){e=k("sports pitches")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function tc(r){let e;return{c(){e=k("sports centres")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function nc(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[ec]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[tc]},$$scope:{ctx:r}}}),s=new qe({}),{c(){e=A("p"),n=k("This shows "),d(t.$$.fragment),l=k(" and "),d(o.$$.fragment),i=k(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),d(s.$$.fragment)},m(f,c){_(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const $={};c&1&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){h(t.$$.fragment,f),h(o.$$.fragment,f),h(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(u)),v(t),v(o),v(s,f)}}}function rc(r){let e,n;return e=new fn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class lc extends z{constructor(e){super(),q(this,e,null,rc,W,{})}}function oc(r){let e;return{c(){e=k("Vehicle counts")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function sc(r){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ic(r){let e;return{c(){e=k("methodology")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ac(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new X({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[sc]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[ic]},$$scope:{ctx:r}}}),f=new Be({}),{c(){e=A("p"),n=k("2022 AADF (annual average daily flow) data from "),d(t.$$.fragment),l=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),d(o.$$.fragment),i=k(" for details and caveats about the measurements."),u=O(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=O(),d(f.$$.fragment)},m(p,$){_(p,e,$),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),_(p,u,$),_(p,s,$),_(p,a,$),b(f,p,$),c=!0},p(p,$){const T={};$&64&&(T.$$scope={dirty:$,ctx:p}),t.$set(T);const w={};$&64&&(w.$$scope={dirty:$,ctx:p}),o.$set(w)},i(p){c||(m(t.$$.fragment,p),m(o.$$.fragment,p),m(f.$$.fragment,p),c=!0)},o(p){h(t.$$.fragment,p),h(o.$$.fragment,p),h(f.$$.fragment,p),c=!1},d(p){p&&(g(e),g(u),g(s),g(a)),v(t),v(o),v(f,p)}}}function fc(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ac]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),Q(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function lr(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[3]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,p,$,T=r[5].pedal_cycles_2022.toLocaleString()+"",w,C,S,E,j,B=r[5].method+"",L;return{c(){e=A("h2"),t=k(n),l=O(),o=A("p"),i=k("Total motor vehicles (2022 AADF): "),u=A("b"),a=k(s),f=O(),c=A("p"),p=k("Total pedal cycles (2022 AADF): "),$=A("b"),w=k(T),C=O(),S=A("p"),E=k("Count method: "),j=A("b"),L=k(B)},m(P,N){_(P,e,N),y(e,t),_(P,l,N),_(P,o,N),y(o,i),y(o,u),y(u,a),_(P,f,N),_(P,c,N),y(c,p),y(c,$),y($,w),_(P,C,N),_(P,S,N),y(S,E),y(S,j),y(j,L)},p(P,N){N&32&&n!==(n=P[5].location+"")&&H(t,n),N&32&&s!==(s=P[5].motor_vehicles_2022.toLocaleString()+"")&&H(a,s),N&32&&T!==(T=P[5].pedal_cycles_2022.toLocaleString()+"")&&H(w,T),N&32&&B!==(B=P[5].method+"")&&H(L,B)},d(P){P&&(g(e),g(l),g(o),g(f),g(c),g(C),g(S))}}}function cc(r){let e,n;return e=new re({props:{$$slots:{default:[uc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $c(r){let e,n;const t=[M(_t),{sourceLayer:_t},{paint:{"circle-color":$e(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let l={$$slots:{default:[cc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new Fe({props:l}),e.$on("click",mc),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Y(t,[i&0&&J(M(_t)),i&0&&{sourceLayer:_t},i&6&&{paint:{"circle-color":$e(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function pc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:_t,$$slots:{right:[fc],default:[oc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>Z(e,"checked",u));let a=r[0]&&lr(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${_t}.pmtiles`,$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),a&&a.c(),l=O(),d(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&64&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],x(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=lr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ie(),h(a,1,1,()=>{a=null}),ae());const $={};c&65&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let _t="vehicle_counts";function mc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function _c(r,e,n){let t=U.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class gc extends z{constructor(e){super(),q(this,e,_c,pc,W,{})}}function hc(r){let e,n,t,l,o,i,u,s;return e=new xu({}),t=new Hu({}),o=new lc({}),u=new Yu({}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),_(a,l,f),b(o,a,f),_(a,i,f),b(u,a,f),s=!0},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),s=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),h(o.$$.fragment,a),h(u.$$.fragment,a),s=!1},d(a){a&&(g(n),g(l),g(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function dc(r){let e,n;return e=new Tt({props:{small:!0,$$slots:{default:[hc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bc(r){let e,n,t,l,o,i,u,s,a,f;return e=new lf({}),t=new _f({}),o=new Xa({}),u=new Ou({}),a=new hu({}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment),s=O(),d(a.$$.fragment)},m(c,p){b(e,c,p),_(c,n,p),b(t,c,p),_(c,l,p),b(o,c,p),_(c,i,p),b(u,c,p),_(c,s,p),b(a,c,p),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){h(e.$$.fragment,c),h(t.$$.fragment,c),h(o.$$.fragment,c),h(u.$$.fragment,c),h(a.$$.fragment,c),f=!1},d(c){c&&(g(n),g(l),g(i),g(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function vc(r){let e,n;return e=new Tt({props:{small:!0,$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wc(r){let e,n,t,l,o,i,u,s,a,f;return e=new ka({}),t=new Ia({}),o=new Li({}),u=new Zi({}),a=new ca({}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment),s=O(),d(a.$$.fragment)},m(c,p){b(e,c,p),_(c,n,p),b(t,c,p),_(c,l,p),b(o,c,p),_(c,i,p),b(u,c,p),_(c,s,p),b(a,c,p),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){h(e.$$.fragment,c),h(t.$$.fragment,c),h(o.$$.fragment,c),h(u.$$.fragment,c),h(a.$$.fragment,c),f=!1},d(c){c&&(g(n),g(l),g(i),g(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function kc(r){let e,n;return e=new Tt({props:{small:!0,$$slots:{default:[wc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yc(r){let e,n,t,l;return e=new di({}),t=new Ri({}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),h(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Sc(r){let e,n,t,l;return e=new Jf({}),t=new Rf({}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),h(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Cc(r){let e,n,t,l,o=ln()=="Private (development)",i,u;e=new gc({}),t=new Lf({});let s=o&&Sc();return{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),s&&s.c(),i=be()},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),_(a,l,f),s&&s.m(a,f),_(a,i,f),u=!0},p:te,i(a){u||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(s),u=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),h(s),u=!1},d(a){a&&(g(n),g(l),g(i)),v(e,a),v(t,a),s&&s.d(a)}}}function Tc(r){let e,n,t,l,o;function i(s){r[4](s)}let u={displayEnableButton:!0};return r[1]!==void 0&&(u.isInactive=r[1]),e=new Xr({props:u}),r[3](e),V.push(()=>Z(e,"isInactive",i)),l=new kl({}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&2&&(n=!0,f.isInactive=s[1],x(()=>n=!1)),e.$set(f)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&g(t),r[3](null),v(e,s),v(l,s)}}}function Oc(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,T,w,C;return e=new su({}),t=new Le({props:{label:"Trip generators",$$slots:{default:[dc]},$$scope:{ctx:r}}}),o=new Le({props:{label:"Existing infrastructure",$$slots:{default:[vc]},$$scope:{ctx:r}}}),u=new Le({props:{label:"Boundaries",$$slots:{default:[kc]},$$scope:{ctx:r}}}),a=new Le({props:{label:"Census",$$slots:{default:[yc]},$$scope:{ctx:r}}}),c=new Le({props:{label:"Other",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),$=new Le({props:{label:"Tools",$$slots:{default:[Tc]},$$scope:{ctx:r}}}),w=new Vr({props:{disabled:!r[1]}}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment),s=O(),d(a.$$.fragment),f=O(),d(c.$$.fragment),p=O(),d($.$$.fragment),T=O(),d(w.$$.fragment)},m(S,E){b(e,S,E),_(S,n,E),b(t,S,E),_(S,l,E),b(o,S,E),_(S,i,E),b(u,S,E),_(S,s,E),b(a,S,E),_(S,f,E),b(c,S,E),_(S,p,E),b($,S,E),_(S,T,E),b(w,S,E),C=!0},p(S,E){const j={};E&32&&(j.$$scope={dirty:E,ctx:S}),t.$set(j);const B={};E&32&&(B.$$scope={dirty:E,ctx:S}),o.$set(B);const L={};E&32&&(L.$$scope={dirty:E,ctx:S}),u.$set(L);const P={};E&32&&(P.$$scope={dirty:E,ctx:S}),a.$set(P);const N={};E&32&&(N.$$scope={dirty:E,ctx:S}),c.$set(N);const I={};E&35&&(I.$$scope={dirty:E,ctx:S}),$.$set(I);const D={};E&2&&(D.disabled=!S[1]),w.$set(D)},i(S){C||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(o.$$.fragment,S),m(u.$$.fragment,S),m(a.$$.fragment,S),m(c.$$.fragment,S),m($.$$.fragment,S),m(w.$$.fragment,S),C=!0)},o(S){h(e.$$.fragment,S),h(t.$$.fragment,S),h(o.$$.fragment,S),h(u.$$.fragment,S),h(a.$$.fragment,S),h(c.$$.fragment,S),h($.$$.fragment,S),h(w.$$.fragment,S),C=!1},d(S){S&&(g(n),g(l),g(i),g(s),g(f),g(p),g(T)),v(e,S),v(t,S),v(o,S),v(u,S),v(a,S),v(c,S),v($,S),v(w,S)}}}function Ac(r){let e,n,t,l;return e=new Le({props:{label:"Layers",open:!0,$$slots:{default:[Oc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0,t||(l=Mt(window,"keydown",r[2]),t=!0)},p(o,[i]){const u={};i&35&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o),t=!1,l()}}}function Lc(r,e,n){let t;je(r,mn,s=>n(1,t=s));let l;function o(s){!t&&s.key=="Escape"&&(l.disableStreetView(),s.preventDefault())}function i(s){V[s?"unshift":"push"](()=>{l=s,n(0,l)})}function u(s){t=s,mn.set(t)}return[l,t,o,i,u]}class Ec extends z{constructor(e){super(),q(this,e,Lc,Ac,W,{})}}function Nc(r,e,n){let{loadFile:t}=e;return Wt(async()=>{let o=await(await fetch(`${sn()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class Pc extends z{constructor(e){super(),q(this,e,Nc,null,W,{loadFile:0})}}function Ic(r){let e;return{c(){e=k("Show on map")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Dc(r){let e;return{c(){e=k("Edit scheme locally")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function jc(r){let e,n,t=r[0].authority_or_region+"",l,o,i,u,s=r[0].capital_scheme_id+"",a,f,c,p,$=r[0].funding_programme+"",T,w,C,S,E,j,B;return S=new kt({props:{$$slots:{default:[Ic]},$$scope:{ctx:r}}}),S.$on("click",r[3]),j=new kt({props:{disabled:r[1],title:r[2],$$slots:{default:[Dc]},$$scope:{ctx:r}}}),j.$on("click",r[4]),{c(){e=A("p"),n=k("Authority or region: "),l=k(t),o=O(),i=A("p"),u=k("Capital scheme ID: "),a=k(s),f=O(),c=A("p"),p=k("Funding programme: "),T=k($),w=O(),C=A("div"),d(S.$$.fragment),E=O(),d(j.$$.fragment),Q(C,"class","govuk-button-group")},m(L,P){_(L,e,P),y(e,n),y(e,l),_(L,o,P),_(L,i,P),y(i,u),y(i,a),_(L,f,P),_(L,c,P),y(c,p),y(c,T),_(L,w,P),_(L,C,P),b(S,C,null),y(C,E),b(j,C,null),B=!0},p(L,P){(!B||P&1)&&t!==(t=L[0].authority_or_region+"")&&H(l,t),(!B||P&1)&&s!==(s=L[0].capital_scheme_id+"")&&H(a,s),(!B||P&1)&&$!==($=L[0].funding_programme+"")&&H(T,$);const N={};P&256&&(N.$$scope={dirty:P,ctx:L}),S.$set(N);const I={};P&256&&(I.$$scope={dirty:P,ctx:L}),j.$set(I)},i(L){B||(m(S.$$.fragment,L),m(j.$$.fragment,L),B=!0)},o(L){h(S.$$.fragment,L),h(j.$$.fragment,L),B=!1},d(L){L&&(g(e),g(o),g(i),g(f),g(c),g(w),g(C)),v(S),v(j)}}}function Fc(r){let e,n;return e=new Le({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[jc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),l&257&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mc(r,e,n){let t;je(r,Ct,c=>n(7,t=c));let{schemesGj:l}=e,{scheme:o}=e,{authorityNames:i}=e,u=!i.has(o.authority_or_region),s=u?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function a(){let c={type:"FeatureCollection",features:l.features.filter(p=>p.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(Gr(c),{padding:20,animate:!1})}function f(){let c={type:"FeatureCollection",features:l.features.filter($=>$.properties.scheme_reference==o.scheme_reference)},p=o.authority_or_region;window.localStorage.setItem(p,JSON.stringify(c)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return r.$$set=c=>{"schemesGj"in c&&n(5,l=c.schemesGj),"scheme"in c&&n(0,o=c.scheme),"authorityNames"in c&&n(6,i=c.authorityNames)},[o,u,s,a,f,l,i]}class Bc extends z{constructor(e){super(),q(this,e,Mc,Fc,W,{schemesGj:5,scheme:0,authorityNames:6})}}const Hc=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function or(r){let e,n,t=_n(r[0].length_meters)+"",l;return{c(){e=A("p"),n=k("Length: "),l=k(t)},m(o,i){_(o,e,i),y(e,n),y(e,l)},p(o,i){i&1&&t!==(t=_n(o[0].length_meters)+"")&&H(l,t)},d(o){o&&g(e)}}}function sr(r){let e,n=r[1](r[0].description)+"";return{c(){e=A("p")},m(t,l){_(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&g(e)}}}function Rc(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,p=r[0].scheme_reference+"",$,T,w,C=r[0].length_meters&&or(r),S=r[0].description&&sr(r);return{c(){e=A("div"),n=A("h2"),t=new on(!1),o=k(" ("),u=k(i),s=k(")"),a=O(),f=A("p"),c=k("Scheme reference: "),$=k(p),T=O(),C&&C.c(),w=O(),S&&S.c(),t.a=o,Se(e,"max-width","30vw")},m(E,j){_(E,e,j),y(e,n),t.m(l,n),y(n,o),y(n,u),y(n,s),y(e,a),y(e,f),y(f,c),y(f,$),y(e,T),C&&C.m(e,null),y(e,w),S&&S.m(e,null)},p(E,[j]){j&1&&l!==(l=E[1](E[0].name)+"")&&t.p(l),j&1&&i!==(i=E[0].intervention_type+"")&&H(u,i),j&1&&p!==(p=E[0].scheme_reference+"")&&H($,p),E[0].length_meters?C?C.p(E,j):(C=or(E),C.c(),C.m(e,w)):C&&(C.d(1),C=null),E[0].description?S?S.p(E,j):(S=sr(E),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:te,o:te,d(E){E&&g(e),C&&C.d(),S&&S.d()}}}function Gc(r,e,n){let{props:t}=e,{filterText:l}=e;function o(i){return l?i.replace(new RegExp(l,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,l=i.filterText)},[t,o,l]}class un extends z{constructor(e){super(),q(this,e,Gc,Rc,W,{props:0,filterText:2})}}function Wc(r){let e,n;return e=new un({props:{props:r[7],filterText:r[1]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uc(r){let e,n;return e=new re({props:{$$slots:{default:[Wc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zc(r){let e,n;return e=new un({props:{props:r[7],filterText:r[1]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qc(r){let e,n;return e=new re({props:{$$slots:{default:[zc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vc(r){let e,n;return e=new un({props:{props:r[7],filterText:r[1]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xc(r){let e,n;return e=new re({props:{$$slots:{default:[Vc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kc(r){let e,n,t,l,o,i,u,s,a,f;const c=[M("interventions-points"),{filter:["all",gn,r[4],r[5]]},{manageHoverState:!0},{paint:{"circle-color":r[3],"circle-radius":Dt,"circle-opacity":G(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let p={$$slots:{default:[Uc]},$$scope:{ctx:r}};for(let L=0;L<c.length;L+=1)p=K(p,c[L]);e=new Fe({props:p});const $=[M("interventions-lines"),{filter:["all",hn,r[4]]},{manageHoverState:!0},{paint:{"line-color":r[3],"line-width":lt,"line-opacity":G(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let T={$$slots:{default:[qc]},$$scope:{ctx:r}};for(let L=0;L<$.length;L+=1)T=K(T,$[L]);t=new ue({props:T});const w=[M("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*lt,"circle-opacity":0,"circle-stroke-color":bn.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let C={};for(let L=0;L<w.length;L+=1)C=K(C,w[L]);o=new Fe({props:C});const S=[M("interventions-polygons"),{filter:["all",Lt,r[4]]},{manageHoverState:!0},{paint:{"fill-color":r[3],"fill-opacity":G(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let E={$$slots:{default:[Xc]},$$scope:{ctx:r}};for(let L=0;L<S.length;L+=1)E=K(E,S[L]);u=new Me({props:E});const j=[M("interventions-polygons-outlines"),{filter:["all",Lt,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*lt}},{layout:{visibility:r[0]?"visible":"none"}}];let B={};for(let L=0;L<j.length;L+=1)B=K(B,j[L]);return a=new ue({props:B}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment),s=O(),d(a.$$.fragment)},m(L,P){b(e,L,P),_(L,n,P),b(t,L,P),_(L,l,P),b(o,L,P),_(L,i,P),b(u,L,P),_(L,s,P),b(a,L,P),f=!0},p(L,P){const N=P&57?Y(c,[P&0&&J(M("interventions-points")),P&48&&{filter:["all",gn,L[4],L[5]]},c[2],P&8&&{paint:{"circle-color":L[3],"circle-radius":Dt,"circle-opacity":G(1,.5)}},P&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};P&258&&(N.$$scope={dirty:P,ctx:L}),e.$set(N);const I=P&25?Y($,[P&0&&J(M("interventions-lines")),P&16&&{filter:["all",hn,L[4]]},$[2],P&8&&{paint:{"line-color":L[3],"line-width":lt,"line-opacity":G(1,.5)}},P&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};P&258&&(I.$$scope={dirty:P,ctx:L}),t.$set(I);const D=P&1?Y(w,[P&0&&J(M("interventions-lines-endpoints")),w[1],P&0&&{paint:{"circle-radius":.5*lt,"circle-opacity":0,"circle-stroke-color":bn.lineEndpointColor,"circle-stroke-width":2}},P&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(D);const R=P&25?Y(S,[P&0&&J(M("interventions-polygons")),P&16&&{filter:["all",Lt,L[4]]},S[2],P&8&&{paint:{"fill-color":L[3],"fill-opacity":G(.2,.5)}},P&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};P&258&&(R.$$scope={dirty:P,ctx:L}),u.$set(R);const F=P&25?Y(j,[P&0&&J(M("interventions-polygons-outlines")),P&16&&{filter:["all",Lt,L[4]]},P&8&&{paint:{"line-color":L[3],"line-opacity":.5,"line-width":.7*lt}},P&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(F)},i(L){f||(m(e.$$.fragment,L),m(t.$$.fragment,L),m(o.$$.fragment,L),m(u.$$.fragment,L),m(a.$$.fragment,L),f=!0)},o(L){h(e.$$.fragment,L),h(t.$$.fragment,L),h(o.$$.fragment,L),h(u.$$.fragment,L),h(a.$$.fragment,L),f=!1},d(L){L&&(g(n),g(l),g(i),g(s)),v(e,L),v(t,L),v(o,L),v(u,L),v(a,L)}}}function Yc(r){let e,n;return e=new Qe({props:{data:r[2],$$slots:{default:[Kc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jc(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,{filterText:i}=e,u=gr("v1");const s=["!=","hide_while_editing",!0],a=["!=","endpoint",!0];return r.$$set=f=>{"schemesGj"in f&&n(6,l=f.schemesGj),"showSchemes"in f&&n(0,o=f.showSchemes),"filterText"in f&&n(1,i=f.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Wr(l))},[o,i,t,u,s,a,l]}class Zc extends z{constructor(e){super(),q(this,e,Jc,Yc,W,{schemesGj:6,showSchemes:0,filterText:1})}}function ir(r,e,n){const t=r.slice();return t[14]=e[n],t}function Qc(r){let e,n;return e=new Pc({props:{loadFile:r[8]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ar(r){let e,n,t,l,o,i;function u(p){r[9](p)}function s(p){r[10](p)}function a(p){r[11](p)}function f(p){r[12](p)}let c={schemes:r[2]};return r[1]!==void 0&&(c.schemesGj=r[1]),r[3]!==void 0&&(c.schemesToBeShown=r[3]),r[4]!==void 0&&(c.filterText=r[4]),r[5]!==void 0&&(c.show=r[5]),e=new Gs({props:c}),V.push(()=>Z(e,"schemesGj",u)),V.push(()=>Z(e,"schemesToBeShown",s)),V.push(()=>Z(e,"filterText",a)),V.push(()=>Z(e,"show",f)),{c(){d(e.$$.fragment)},m(p,$){b(e,p,$),i=!0},p(p,$){const T={};$&4&&(T.schemes=p[2]),!n&&$&2&&(n=!0,T.schemesGj=p[1],x(()=>n=!1)),!t&&$&8&&(t=!0,T.schemesToBeShown=p[3],x(()=>t=!1)),!l&&$&16&&(l=!0,T.filterText=p[4],x(()=>l=!1)),!o&&$&32&&(o=!0,T.show=p[5],x(()=>o=!1)),e.$set(T)},i(p){i||(m(e.$$.fragment,p),i=!0)},o(p){h(e.$$.fragment,p),i=!1},d(p){v(e,p)}}}function fr(r){let e,n;return e=new Bc({props:{schemesGj:r[1],scheme:r[14],authorityNames:r[7]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[14]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ur(r){let e=r[3].has(r[14].scheme_reference),n,t,l=e&&fr(r);return{c(){l&&l.c(),n=be()},m(o,i){l&&l.m(o,i),_(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[14].scheme_reference)),e?l?(l.p(o,i),i&12&&m(l,1)):(l=fr(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(ie(),h(l,1,1,()=>{l=null}),ae())},i(o){t||(m(l),t=!0)},o(o){h(l),t=!1},d(o){o&&g(n),l&&l.d(o)}}}function xc(r){let e,n,t,l,o,i,u,s,a,f,c=ln()=="Private (development)",p,$,T,w,C,S,E,j;o=new Jr({props:{boundaryGeojson:r[1]}}),u=new Ol({}),a=new Ur({});let B=c&&Qc(r);$=new Qr({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[8]}}),w=new _r({props:{errorMessage:r[0]}});let L=r[2].size>0&&ar(r),P=Ue(r[2].values()),N=[];for(let D=0;D<P.length;D+=1)N[D]=ur(ir(r,P,D));const I=D=>h(N[D],1,1,()=>{N[D]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment),s=O(),d(a.$$.fragment),f=O(),B&&B.c(),p=O(),d($.$$.fragment),T=O(),d(w.$$.fragment),C=O(),L&&L.c(),S=O(),E=A("ul");for(let D=0;D<N.length;D+=1)N[D].c();Se(n,"display","flex"),Se(n,"justify-content","space-between"),Q(e,"slot","sidebar"),Q(e,"class","govuk-prose")},m(D,R){_(D,e,R),y(e,n),y(n,t),y(n,l),b(o,n,null),y(e,i),b(u,e,null),y(e,s),b(a,e,null),y(e,f),B&&B.m(e,null),y(e,p),b($,e,null),y(e,T),b(w,e,null),y(e,C),L&&L.m(e,null),y(e,S),y(e,E);for(let F=0;F<N.length;F+=1)N[F]&&N[F].m(E,null);j=!0},p(D,R){const F={};R&2&&(F.boundaryGeojson=D[1]),o.$set(F),c&&B.p(D,R);const se={};if(R&1&&(se.errorMessage=D[0]),w.$set(se),D[2].size>0?L?(L.p(D,R),R&4&&m(L,1)):(L=ar(D),L.c(),m(L,1),L.m(e,S)):L&&(ie(),h(L,1,1,()=>{L=null}),ae()),R&142){P=Ue(D[2].values());let ee;for(ee=0;ee<P.length;ee+=1){const ve=ir(D,P,ee);N[ee]?(N[ee].p(ve,R),m(N[ee],1)):(N[ee]=ur(ve),N[ee].c(),m(N[ee],1),N[ee].m(E,null))}for(ie(),ee=P.length;ee<N.length;ee+=1)I(ee);ae()}},i(D){if(!j){m(o.$$.fragment,D),m(u.$$.fragment,D),m(a.$$.fragment,D),m(B),m($.$$.fragment,D),m(w.$$.fragment,D),m(L);for(let R=0;R<P.length;R+=1)m(N[R]);j=!0}},o(D){h(o.$$.fragment,D),h(u.$$.fragment,D),h(a.$$.fragment,D),h(B),h($.$$.fragment,D),h(w.$$.fragment,D),h(L),N=N.filter(Boolean);for(let R=0;R<N.length;R+=1)h(N[R]);j=!1},d(D){D&&g(e),v(o),v(u),v(a),B&&B.d(),v($),v(w),L&&L.d(),Pt(N,D)}}}function e$(r){let e,n,t,l,o;return e=new Zc({props:{schemesGj:r[1],filterText:r[4],showSchemes:r[5]}}),l=new Ec({}),{c(){d(e.$$.fragment),n=O(),t=A("div"),d(l.$$.fragment),Q(t,"class","top-right svelte-u44ed2")},m(i,u){b(e,i,u),_(i,n,u),_(i,t,u),b(l,t,null),o=!0},p(i,u){const s={};u&2&&(s.schemesGj=i[1]),u&16&&(s.filterText=i[4]),u&32&&(s.showSchemes=i[5]),e.$set(s)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){h(e.$$.fragment,i),h(l.$$.fragment,i),o=!1},d(i){i&&(g(n),g(t)),v(e,i),v(l)}}}function t$(r){let e,n,t;return n=new zr({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[e$]},$$scope:{ctx:r}}}),{c(){e=A("div"),d(n.$$.fragment),Q(e,"slot","main")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.style=l[6]),o&131122&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function n$(r){let e,n;return e=new Kr({props:{$$slots:{main:[t$],sidebar:[xc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&131199&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function r$(r,e,n){let t;je(r,dn,S=>n(6,t=S)),Wt(()=>{qr()});let l=new Set(Hc);const o=new URLSearchParams(window.location.search);dn.set(o.get("style")||"dataviz");let i="",u={type:"FeatureCollection",features:[],schemes:{}},s=new Map,a=new Set,f="",c=!0;function p(S){try{n(1,u=JSON.parse(S)),n(2,s=Ls(u)),n(0,i="")}catch(E){n(0,i=`The file you loaded is broken: ${E}`)}}function $(S){u=S,n(1,u)}function T(S){a=S,n(3,a)}function w(S){f=S,n(4,f)}function C(S){c=S,n(5,c)}return[i,u,s,a,f,c,t,l,p,$,T,w,C]}class l$ extends z{constructor(e){super(),q(this,e,r$,n$,W,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new l$({target:document.getElementById("app")});
