var Gs=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var ei=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var Pt=(n,e,t)=>(Gs(n,e,"access private method"),t);import{S as Ce,i as Me,s as Oe,x as ye,y as st,f as J,z as Qt,g as P,h as T,B as ut,C as Te,p as x,D as Ne,E as rt,t as be,F as Re,G as en,H as ae,e as R,I as We,J as k,l as $,r as ft,K as zs,L as fn,c as q,n as j,M as tt,o as Y,N as nt,O as Ml,P as Ol,d as ge,m as me,q as _e,Q as yi,R as hn,T as dt,U as ht,V as pt,W as gt,X as Vs,Y as Nr,Z as Tn,_ as Rr,$ as Ke,b as Ge,a0 as Il,a1 as mo,a2 as qs,j as kn,a3 as Js,a as bt,k as vt,a4 as Er,a5 as Ys,a6 as Ws,a7 as ti,a8 as Ei,a9 as _o,w as wi,aa as bo,ab as Hs,ac as Zs,ad as vo,ae as Xs,af as Dn,ag as Ks,A as Qs,u as $s}from"./authorities-0402f8cb.js";function yo(n){let e,t;return{c(){e=st("title"),t=be(n[1])},m(r,o){P(r,e,o),T(e,t)},p(r,o){o&2&&Re(t,r[1])},d(r){r&&x(e)}}}function ea(n){let e,t,r=n[1]&&yo(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let s=0;s<o.length;s+=1)l=ye(l,o[s]);return{c(){e=st("svg"),r&&r.c(),t=st("path"),J(t,"d","M22 16L12 26 10.6 24.6 19.2 16 10.6 7.4 12 6z"),Qt(e,l)},m(s,u){P(s,e,u),r&&r.m(e,null),T(e,t)},p(s,[u]){s[1]?r?r.p(s,u):(r=yo(s),r.c(),r.m(e,t)):r&&(r.d(1),r=null),Qt(e,l=ut(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:s[0]},u&1&&{height:s[0]},u&4&&s[2],u&8&&s[3]]))},i:Te,o:Te,d(s){s&&x(e),r&&r.d()}}}function ta(n,e,t){let r,o;const l=["size","title"];let s=Ne(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=ye(ye({},e),rt(f))),t(3,s=Ne(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=rt(e),[u,c,o,s,r]}class na extends Ce{constructor(e){super(),Me(this,e,ta,ea,Oe,{size:0,title:1})}}const Si=na;function Eo(n,e,t){const r=n.slice();return r[2]=e[t].width,r}function ra(n){let e,t,r,o,l=[n[4],{style:t="width: "+n[2]+";"+n[4].style}],s={};for(let u=0;u<l.length;u+=1)s=ye(s,l[u]);return{c(){e=R("p"),We(e,s),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",n[0])},m(u,c){P(u,e,c),r||(o=[$(e,"click",n[12]),$(e,"mouseover",n[13]),$(e,"mouseenter",n[14]),$(e,"mouseleave",n[15])],r=!0)},p(u,c){We(e,s=ut(l,[c&16&&u[4],c&20&&t!==(t="width: "+u[2]+";"+u[4].style)&&{style:t}])),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",u[0])},d(u){u&&x(e),r=!1,ft(o)}}}function ia(n){let e,t,r,o=n[3],l=[];for(let c=0;c<o.length;c+=1)l[c]=wo(Eo(n,o,c));let s=[n[4]],u={};for(let c=0;c<s.length;c+=1)u=ye(u,s[c]);return{c(){e=R("div");for(let c=0;c<l.length;c+=1)l[c].c();We(e,u)},m(c,f){P(c,e,f);for(let g=0;g<l.length;g+=1)l[g].m(e,null);t||(r=[$(e,"click",n[8]),$(e,"mouseover",n[9]),$(e,"mouseenter",n[10]),$(e,"mouseleave",n[11])],t=!0)},p(c,f){if(f&9){o=c[3];let g;for(g=0;g<o.length;g+=1){const _=Eo(c,o,g);l[g]?l[g].p(_,f):(l[g]=wo(_),l[g].c(),l[g].m(e,null))}for(;g<l.length;g+=1)l[g].d(1);l.length=o.length}We(e,u=ut(s,[f&16&&c[4]]))},d(c){c&&x(e),zs(l,c),t=!1,ft(r)}}}function wo(n){let e;return{c(){e=R("p"),fn(e,"width",n[2]),k(e,"bx--skeleton__text",!0),k(e,"bx--skeleton__heading",n[0])},m(t,r){P(t,e,r)},p(t,r){r&8&&fn(e,"width",t[2]),r&1&&k(e,"bx--skeleton__heading",t[0])},d(t){t&&x(e)}}}function oa(n){let e;function t(l,s){return l[1]?ia:ra}let r=t(n),o=r(n);return{c(){o.c(),e=en()},m(l,s){o.m(l,s),P(l,e,s)},p(l,[s]){r===(r=t(l))&&o?o.p(l,s):(o.d(1),o=r(l),o&&(o.c(),o.m(e.parentNode,e)))},i:Te,o:Te,d(l){o.d(l),l&&x(e)}}}function la(n,e,t){let r,o,l;const s=["lines","heading","paragraph","width"];let u=Ne(e,s),{lines:c=3}=e,{heading:f=!1}=e,{paragraph:g=!1}=e,{width:_="100%"}=e;const m=[.973,.153,.567];function d(N){ae.call(this,n,N)}function p(N){ae.call(this,n,N)}function y(N){ae.call(this,n,N)}function I(N){ae.call(this,n,N)}function G(N){ae.call(this,n,N)}function O(N){ae.call(this,n,N)}function C(N){ae.call(this,n,N)}function A(N){ae.call(this,n,N)}return n.$$set=N=>{e=ye(ye({},e),rt(N)),t(4,u=Ne(e,s)),"lines"in N&&t(5,c=N.lines),"heading"in N&&t(0,f=N.heading),"paragraph"in N&&t(1,g=N.paragraph),"width"in N&&t(2,_=N.width)},n.$$.update=()=>{if(n.$$.dirty&4&&t(7,o=parseInt(_,10)),n.$$.dirty&4&&t(6,l=_.includes("px")),n.$$.dirty&238&&g)for(let N=0;N<c;N++){const D=l?o-75:0,ce=l?o:75,z=Math.floor(m[N%3]*(ce-D+1))+D+"px";t(3,r=[...r,{width:l?z:`calc(${_} - ${z})`}])}},t(3,r=[]),[f,g,_,r,u,c,l,o,d,p,y,I,G,O,C,A]}class sa extends Ce{constructor(e){super(),Me(this,e,la,oa,Oe,{lines:5,heading:0,paragraph:1,width:2})}}const Bn=sa;function So(n,e,t){const r=n.slice();return r[9]=e[t],r}function ko(n){let e,t,r,o,l,s,u,c,f,g,_,m,d;return r=new Si({props:{class:"bx--accordion__arrow"}}),l=new Bn({props:{class:"bx--accordion__title"}}),c=new Bn({props:{width:"90%"}}),g=new Bn({props:{width:"80%"}}),m=new Bn({props:{width:"95%"}}),{c(){e=R("li"),t=R("span"),ge(r.$$.fragment),o=q(),ge(l.$$.fragment),s=q(),u=R("div"),ge(c.$$.fragment),f=q(),ge(g.$$.fragment),_=q(),ge(m.$$.fragment),k(t,"bx--accordion__heading",!0),k(u,"bx--accordion__content",!0),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",!0)},m(p,y){P(p,e,y),T(e,t),me(r,t,null),T(t,o),me(l,t,null),T(e,s),T(e,u),me(c,u,null),T(u,f),me(g,u,null),T(u,_),me(m,u,null),d=!0},i(p){d||(j(r.$$.fragment,p),j(l.$$.fragment,p),j(c.$$.fragment,p),j(g.$$.fragment,p),j(m.$$.fragment,p),d=!0)},o(p){Y(r.$$.fragment,p),Y(l.$$.fragment,p),Y(c.$$.fragment,p),Y(g.$$.fragment,p),Y(m.$$.fragment,p),d=!1},d(p){p&&x(e),_e(r),_e(l),_e(c),_e(g),_e(m)}}}function To(n,e){let t,r,o,l,s,u,c;return o=new Si({props:{class:"bx--accordion__arrow"}}),s=new Bn({props:{class:"bx--accordion__title"}}),{key:n,first:null,c(){t=R("li"),r=R("span"),ge(o.$$.fragment),l=q(),ge(s.$$.fragment),u=q(),k(r,"bx--accordion__heading",!0),k(t,"bx--accordion__item",!0),this.first=t},m(f,g){P(f,t,g),T(t,r),me(o,r,null),T(r,l),me(s,r,null),T(t,u),c=!0},p(f,g){},i(f){c||(j(o.$$.fragment,f),j(s.$$.fragment,f),c=!0)},o(f){Y(o.$$.fragment,f),Y(s.$$.fragment,f),c=!1},d(f){f&&x(t),_e(o),_e(s)}}}function aa(n){let e,t,r=[],o=new Map,l,s,u,c=n[3]&&ko(),f=Array.from({length:n[3]?n[0]-1:n[0]},Co);const g=d=>d[9];for(let d=0;d<f.length;d+=1){let p=So(n,f,d),y=g(p);o.set(y,r[d]=To(y))}let _=[n[4]],m={};for(let d=0;d<_.length;d+=1)m=ye(m,_[d]);return{c(){e=R("ul"),c&&c.c(),t=q();for(let d=0;d<r.length;d+=1)r[d].c();We(e,m),k(e,"bx--skeleton",!0),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",n[1]==="start"),k(e,"bx--accordion--end",n[1]==="end"),k(e,"bx--accordion--sm",n[2]==="sm"),k(e,"bx--accordion--xl",n[2]==="xl")},m(d,p){P(d,e,p),c&&c.m(e,null),T(e,t);for(let y=0;y<r.length;y+=1)r[y].m(e,null);l=!0,s||(u=[$(e,"click",n[5]),$(e,"mouseover",n[6]),$(e,"mouseenter",n[7]),$(e,"mouseleave",n[8])],s=!0)},p(d,[p]){d[3]?c?p&8&&j(c,1):(c=ko(),c.c(),j(c,1),c.m(e,t)):c&&(tt(),Y(c,1,1,()=>{c=null}),nt()),p&9&&(f=Array.from({length:d[3]?d[0]-1:d[0]},Co),tt(),r=Ml(r,p,g,1,d,f,o,e,Ol,To,null,So),nt()),We(e,m=ut(_,[p&16&&d[4]])),k(e,"bx--skeleton",!0),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",d[1]==="start"),k(e,"bx--accordion--end",d[1]==="end"),k(e,"bx--accordion--sm",d[2]==="sm"),k(e,"bx--accordion--xl",d[2]==="xl")},i(d){if(!l){j(c);for(let p=0;p<f.length;p+=1)j(r[p]);l=!0}},o(d){Y(c);for(let p=0;p<r.length;p+=1)Y(r[p]);l=!1},d(d){d&&x(e),c&&c.d();for(let p=0;p<r.length;p+=1)r[p].d();s=!1,ft(u)}}}const Co=(n,e)=>e;function ua(n,e,t){const r=["count","align","size","open"];let o=Ne(e,r),{count:l=4}=e,{align:s="end"}=e,{size:u=void 0}=e,{open:c=!0}=e;function f(d){ae.call(this,n,d)}function g(d){ae.call(this,n,d)}function _(d){ae.call(this,n,d)}function m(d){ae.call(this,n,d)}return n.$$set=d=>{e=ye(ye({},e),rt(d)),t(4,o=Ne(e,r)),"count"in d&&t(0,l=d.count),"align"in d&&t(1,s=d.align),"size"in d&&t(2,u=d.size),"open"in d&&t(3,c=d.open)},[l,s,u,c,o,f,g,_,m]}class fa extends Ce{constructor(e){super(),Me(this,e,ua,aa,Oe,{count:0,align:1,size:2,open:3})}}const ca=fa;function da(n){let e,t,r,o;const l=n[6].default,s=dt(l,n,n[5],null);let u=[n[3]],c={};for(let f=0;f<u.length;f+=1)c=ye(c,u[f]);return{c(){e=R("ul"),s&&s.c(),We(e,c),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",n[0]==="start"),k(e,"bx--accordion--end",n[0]==="end"),k(e,"bx--accordion--sm",n[1]==="sm"),k(e,"bx--accordion--xl",n[1]==="xl")},m(f,g){P(f,e,g),s&&s.m(e,null),t=!0,r||(o=[$(e,"click",n[7]),$(e,"mouseover",n[8]),$(e,"mouseenter",n[9]),$(e,"mouseleave",n[10])],r=!0)},p(f,g){s&&s.p&&(!t||g&32)&&ht(s,l,f,f[5],t?gt(l,f[5],g,null):pt(f[5]),null),We(e,c=ut(u,[g&8&&f[3]])),k(e,"bx--accordion",!0),k(e,"bx--accordion--start",f[0]==="start"),k(e,"bx--accordion--end",f[0]==="end"),k(e,"bx--accordion--sm",f[1]==="sm"),k(e,"bx--accordion--xl",f[1]==="xl")},i(f){t||(j(s,f),t=!0)},o(f){Y(s,f),t=!1},d(f){f&&x(e),s&&s.d(f),r=!1,ft(o)}}}function ha(n){let e,t;const r=[n[3],{align:n[0]},{size:n[1]}];let o={};for(let l=0;l<r.length;l+=1)o=ye(o,r[l]);return e=new ca({props:o}),e.$on("click",n[11]),e.$on("mouseover",n[12]),e.$on("mouseenter",n[13]),e.$on("mouseleave",n[14]),{c(){ge(e.$$.fragment)},m(l,s){me(e,l,s),t=!0},p(l,s){const u=s&11?ut(r,[s&8&&Vs(l[3]),s&1&&{align:l[0]},s&2&&{size:l[1]}]):{};e.$set(u)},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){Y(e.$$.fragment,l),t=!1},d(l){_e(e,l)}}}function pa(n){let e,t,r,o;const l=[ha,da],s=[];function u(c,f){return c[2]?0:1}return e=u(n),t=s[e]=l[e](n),{c(){t.c(),r=en()},m(c,f){s[e].m(c,f),P(c,r,f),o=!0},p(c,[f]){let g=e;e=u(c),e===g?s[e].p(c,f):(tt(),Y(s[g],1,1,()=>{s[g]=null}),nt(),t=s[e],t?t.p(c,f):(t=s[e]=l[e](c),t.c()),j(t,1),t.m(r.parentNode,r))},i(c){o||(j(t),o=!0)},o(c){Y(t),o=!1},d(c){s[e].d(c),c&&x(r)}}}function ga(n,e,t){const r=["align","size","disabled","skeleton"];let o=Ne(e,r),{$$slots:l={},$$scope:s}=e,{align:u="end"}=e,{size:c=void 0}=e,{disabled:f=!1}=e,{skeleton:g=!1}=e;const _=hn(f);yi("Accordion",{disableItems:_});function m(A){ae.call(this,n,A)}function d(A){ae.call(this,n,A)}function p(A){ae.call(this,n,A)}function y(A){ae.call(this,n,A)}function I(A){ae.call(this,n,A)}function G(A){ae.call(this,n,A)}function O(A){ae.call(this,n,A)}function C(A){ae.call(this,n,A)}return n.$$set=A=>{e=ye(ye({},e),rt(A)),t(3,o=Ne(e,r)),"align"in A&&t(0,u=A.align),"size"in A&&t(1,c=A.size),"disabled"in A&&t(4,f=A.disabled),"skeleton"in A&&t(2,g=A.skeleton),"$$scope"in A&&t(5,s=A.$$scope)},n.$$.update=()=>{n.$$.dirty&16&&_.set(f)},[u,c,g,o,f,s,l,m,d,p,y,I,G,O,C]}class ma extends Ce{constructor(e){super(),Me(this,e,ga,pa,Oe,{align:0,size:1,disabled:4,skeleton:2})}}const _a=ma,ba=n=>({}),Mo=n=>({});function va(n){let e;return{c(){e=be(n[2])},m(t,r){P(t,e,r)},p(t,r){r&4&&Re(e,t[2])},d(t){t&&x(e)}}}function ya(n){let e,t,r,o,l,s,u,c,f,g;r=new Si({props:{class:"bx--accordion__arrow","aria-label":n[3]}});const _=n[7].title,m=dt(_,n,n[6],Mo),d=m||va(n),p=n[7].default,y=dt(p,n,n[6],null);let I=[n[5]],G={};for(let O=0;O<I.length;O+=1)G=ye(G,I[O]);return{c(){e=R("li"),t=R("button"),ge(r.$$.fragment),o=q(),l=R("div"),d&&d.c(),s=q(),u=R("div"),y&&y.c(),k(l,"bx--accordion__title",!0),J(t,"type","button"),J(t,"title",n[3]),J(t,"aria-expanded",n[0]),t.disabled=n[1],k(t,"bx--accordion__heading",!0),k(u,"bx--accordion__content",!0),We(e,G),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",n[0]),k(e,"bx--accordion__item--disabled",n[1]),k(e,"bx--accordion__item--expanding",n[4]==="expanding"),k(e,"bx--accordion__item--collapsing",n[4]==="collapsing")},m(O,C){P(O,e,C),T(e,t),me(r,t,null),T(t,o),T(t,l),d&&d.m(l,null),T(e,s),T(e,u),y&&y.m(u,null),c=!0,f||(g=[$(t,"click",n[9]),$(t,"click",n[14]),$(t,"mouseover",n[10]),$(t,"mouseenter",n[11]),$(t,"mouseleave",n[12]),$(t,"keydown",n[13]),$(t,"keydown",n[15]),$(e,"animationend",n[8]),$(e,"animationend",n[16])],f=!0)},p(O,[C]){const A={};C&8&&(A["aria-label"]=O[3]),r.$set(A),m?m.p&&(!c||C&64)&&ht(m,_,O,O[6],c?gt(_,O[6],C,ba):pt(O[6]),Mo):d&&d.p&&(!c||C&4)&&d.p(O,c?C:-1),(!c||C&8)&&J(t,"title",O[3]),(!c||C&1)&&J(t,"aria-expanded",O[0]),(!c||C&2)&&(t.disabled=O[1]),y&&y.p&&(!c||C&64)&&ht(y,p,O,O[6],c?gt(p,O[6],C,null):pt(O[6]),null),We(e,G=ut(I,[C&32&&O[5]])),k(e,"bx--accordion__item",!0),k(e,"bx--accordion__item--active",O[0]),k(e,"bx--accordion__item--disabled",O[1]),k(e,"bx--accordion__item--expanding",O[4]==="expanding"),k(e,"bx--accordion__item--collapsing",O[4]==="collapsing")},i(O){c||(j(r.$$.fragment,O),j(d,O),j(y,O),c=!0)},o(O){Y(r.$$.fragment,O),Y(d,O),Y(y,O),c=!1},d(O){O&&x(e),_e(r),d&&d.d(O),y&&y.d(O),f=!1,ft(g)}}}function Ea(n,e,t){const r=["title","open","disabled","iconDescription"];let o=Ne(e,r),{$$slots:l={},$$scope:s}=e,{title:u="title"}=e,{open:c=!1}=e,{disabled:f=!1}=e,{iconDescription:g="Expand/Collapse"}=e,_=f;const d=Nr("Accordion").disableItems.subscribe(z=>{!z&&_||t(1,f=z)});let p;Tn(()=>()=>{d()});function y(z){ae.call(this,n,z)}function I(z){ae.call(this,n,z)}function G(z){ae.call(this,n,z)}function O(z){ae.call(this,n,z)}function C(z){ae.call(this,n,z)}function A(z){ae.call(this,n,z)}const N=()=>{t(0,c=!c),t(4,p=c?"expanding":"collapsing")},D=({key:z})=>{c&&z==="Escape"&&t(0,c=!1)},ce=()=>{t(4,p=void 0)};return n.$$set=z=>{e=ye(ye({},e),rt(z)),t(5,o=Ne(e,r)),"title"in z&&t(2,u=z.title),"open"in z&&t(0,c=z.open),"disabled"in z&&t(1,f=z.disabled),"iconDescription"in z&&t(3,g=z.iconDescription),"$$scope"in z&&t(6,s=z.$$scope)},[c,f,u,g,p,o,s,l,y,I,G,O,C,A,N,D,ce]}class wa extends Ce{constructor(e){super(),Me(this,e,Ea,ya,Oe,{title:2,open:0,disabled:1,iconDescription:3})}}const Sa=wa;function Oo(n){let e,t;return{c(){e=st("title"),t=be(n[1])},m(r,o){P(r,e,o),T(e,t)},p(r,o){o&2&&Re(t,r[1])},d(r){r&&x(e)}}}function ka(n){let e,t,r,o=n[1]&&Oo(n),l=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],s={};for(let u=0;u<l.length;u+=1)s=ye(s,l[u]);return{c(){e=st("svg"),o&&o.c(),t=st("path"),r=st("path"),J(t,"d","M16,2C8.3,2,2,8.3,2,16s6.3,14,14,14s14-6.3,14-14C30,8.3,23.7,2,16,2z M14.9,8h2.2v11h-2.2V8z M16,25	c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22c0.8,0,1.5,0.7,1.5,1.5S16.8,25,16,25z"),J(r,"fill","none"),J(r,"d","M17.5,23.5c0,0.8-0.7,1.5-1.5,1.5c-0.8,0-1.5-0.7-1.5-1.5S15.2,22,16,22	C16.8,22,17.5,22.7,17.5,23.5z M17.1,8h-2.2v11h2.2V8z"),J(r,"data-icon-path","inner-path"),J(r,"opacity","0"),Qt(e,s)},m(u,c){P(u,e,c),o&&o.m(e,null),T(e,t),T(e,r)},p(u,[c]){u[1]?o?o.p(u,c):(o=Oo(u),o.c(),o.m(e,t)):o&&(o.d(1),o=null),Qt(e,s=ut(l,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},c&1&&{width:u[0]},c&1&&{height:u[0]},c&4&&u[2],c&8&&u[3]]))},i:Te,o:Te,d(u){u&&x(e),o&&o.d()}}}function Ta(n,e,t){let r,o;const l=["size","title"];let s=Ne(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=ye(ye({},e),rt(f))),t(3,s=Ne(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=rt(e),[u,c,o,s,r]}class Ca extends Ce{constructor(e){super(),Me(this,e,Ta,ka,Oe,{size:0,title:1})}}const Ll=Ca;function Io(n){let e,t;return{c(){e=st("title"),t=be(n[1])},m(r,o){P(r,e,o),T(e,t)},p(r,o){o&2&&Re(t,r[1])},d(r){r&&x(e)}}}function Ma(n){let e,t,r,o,l=n[1]&&Io(n),s=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],u={};for(let c=0;c<s.length;c+=1)u=ye(u,s[c]);return{c(){e=st("svg"),l&&l.c(),t=st("path"),r=st("path"),o=st("path"),J(t,"fill","none"),J(t,"d","M16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Zm-1.125-5h2.25V12h-2.25Z"),J(t,"data-icon-path","inner-path"),J(r,"d","M16.002,6.1714h-.004L4.6487,27.9966,4.6506,28H27.3494l.0019-.0034ZM14.875,12h2.25v9h-2.25ZM16,26a1.5,1.5,0,1,1,1.5-1.5A1.5,1.5,0,0,1,16,26Z"),J(o,"d","M29,30H3a1,1,0,0,1-.8872-1.4614l13-25a1,1,0,0,1,1.7744,0l13,25A1,1,0,0,1,29,30ZM4.6507,28H27.3493l.002-.0033L16.002,6.1714h-.004L4.6487,27.9967Z"),Qt(e,u)},m(c,f){P(c,e,f),l&&l.m(e,null),T(e,t),T(e,r),T(e,o)},p(c,[f]){c[1]?l?l.p(c,f):(l=Io(c),l.c(),l.m(e,t)):l&&(l.d(1),l=null),Qt(e,u=ut(s,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},f&1&&{width:c[0]},f&1&&{height:c[0]},f&4&&c[2],f&8&&c[3]]))},i:Te,o:Te,d(c){c&&x(e),l&&l.d()}}}function Oa(n,e,t){let r,o;const l=["size","title"];let s=Ne(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=ye(ye({},e),rt(f))),t(3,s=Ne(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=rt(e),[u,c,o,s,r]}class Ia extends Ce{constructor(e){super(),Me(this,e,Oa,Ma,Oe,{size:0,title:1})}}const La=Ia,Pa=n=>({}),Lo=n=>({});function Po(n){let e,t;const r=n[16].labelText,o=dt(r,n,n[15],Lo),l=o||xa(n);return{c(){e=R("span"),l&&l.c(),k(e,"bx--visually-hidden",n[7])},m(s,u){P(s,e,u),l&&l.m(e,null),t=!0},p(s,u){o?o.p&&(!t||u&32768)&&ht(o,r,s,s[15],t?gt(r,s[15],u,Pa):pt(s[15]),Lo):l&&l.p&&(!t||u&64)&&l.p(s,t?u:-1),(!t||u&128)&&k(e,"bx--visually-hidden",s[7])},i(s){t||(j(l,s),t=!0)},o(s){Y(l,s),t=!1},d(s){s&&x(e),l&&l.d(s)}}}function xa(n){let e;return{c(){e=be(n[6])},m(t,r){P(t,e,r)},p(t,r){r&64&&Re(e,t[6])},d(t){t&&x(e)}}}function Aa(n){let e,t,r,o,l,s,u,c,f,g=(n[6]||n[13].labelText)&&Po(n),_=[n[12]],m={};for(let d=0;d<_.length;d+=1)m=ye(m,_[d]);return{c(){e=R("div"),t=R("input"),r=q(),o=R("label"),l=R("span"),s=q(),g&&g.c(),J(t,"type","radio"),J(t,"id",n[8]),J(t,"name",n[9]),t.checked=n[0],t.disabled=n[3],t.required=n[4],t.value=n[2],k(t,"bx--radio-button",!0),k(l,"bx--radio-button__appearance",!0),J(o,"for",n[8]),k(o,"bx--radio-button__label",!0),We(e,m),k(e,"bx--radio-button-wrapper",!0),k(e,"bx--radio-button-wrapper--label-left",n[5]==="left")},m(d,p){P(d,e,p),T(e,t),n[18](t),T(e,r),T(e,o),T(o,l),T(o,s),g&&g.m(o,null),u=!0,c||(f=[$(t,"change",n[17]),$(t,"change",n[19])],c=!0)},p(d,[p]){(!u||p&256)&&J(t,"id",d[8]),(!u||p&512)&&J(t,"name",d[9]),(!u||p&1)&&(t.checked=d[0]),(!u||p&8)&&(t.disabled=d[3]),(!u||p&16)&&(t.required=d[4]),(!u||p&4)&&(t.value=d[2]),d[6]||d[13].labelText?g?(g.p(d,p),p&8256&&j(g,1)):(g=Po(d),g.c(),j(g,1),g.m(o,null)):g&&(tt(),Y(g,1,1,()=>{g=null}),nt()),(!u||p&256)&&J(o,"for",d[8]),We(e,m=ut(_,[p&4096&&d[12]])),k(e,"bx--radio-button-wrapper",!0),k(e,"bx--radio-button-wrapper--label-left",d[5]==="left")},i(d){u||(j(g),u=!0)},o(d){Y(g),u=!1},d(d){d&&x(e),n[18](null),g&&g.d(),c=!1,ft(f)}}}function Na(n,e,t){const r=["value","checked","disabled","required","labelPosition","labelText","hideLabel","id","name","ref"];let o=Ne(e,r),l,{$$slots:s={},$$scope:u}=e;const c=Rr(s);let{value:f=""}=e,{checked:g=!1}=e,{disabled:_=!1}=e,{required:m=!1}=e,{labelPosition:d="right"}=e,{labelText:p=""}=e,{hideLabel:y=!1}=e,{id:I="ccs-"+Math.random().toString(36)}=e,{name:G=""}=e,{ref:O=null}=e;const C=Nr("RadioButtonGroup"),A=C?C.selectedValue:hn(g?f:void 0);Ke(n,A,z=>t(14,l=z)),C&&C.add({id:I,checked:g,disabled:_,value:f});function N(z){ae.call(this,n,z)}function D(z){Ge[z?"unshift":"push"](()=>{O=z,t(1,O)})}const ce=()=>{C&&C.update(f)};return n.$$set=z=>{e=ye(ye({},e),rt(z)),t(12,o=Ne(e,r)),"value"in z&&t(2,f=z.value),"checked"in z&&t(0,g=z.checked),"disabled"in z&&t(3,_=z.disabled),"required"in z&&t(4,m=z.required),"labelPosition"in z&&t(5,d=z.labelPosition),"labelText"in z&&t(6,p=z.labelText),"hideLabel"in z&&t(7,y=z.hideLabel),"id"in z&&t(8,I=z.id),"name"in z&&t(9,G=z.name),"ref"in z&&t(1,O=z.ref),"$$scope"in z&&t(15,u=z.$$scope)},n.$$.update=()=>{n.$$.dirty&16388&&t(0,g=l===f)},[g,O,f,_,m,d,p,y,I,G,C,A,o,c,l,u,s,N,D,ce]}class Ra extends Ce{constructor(e){super(),Me(this,e,Na,Aa,Oe,{value:2,checked:0,disabled:3,required:4,labelPosition:5,labelText:6,hideLabel:7,id:8,name:9,ref:1})}}const wr=Ra;function xo(n){let e,t;return{c(){e=st("title"),t=be(n[1])},m(r,o){P(r,e,o),T(e,t)},p(r,o){o&2&&Re(t,r[1])},d(r){r&&x(e)}}}function Fa(n){let e,t,r=n[1]&&xo(n),o=[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},{width:n[0]},{height:n[0]},n[2],n[3]],l={};for(let s=0;s<o.length;s+=1)l=ye(l,o[s]);return{c(){e=st("svg"),r&&r.c(),t=st("path"),J(t,"d","M30 28.6L3.4 2 2 3.4l10.1 10.1L4 21.6V28h6.4l8.1-8.1L28.6 30 30 28.6zM9.6 26H6v-3.6l7.5-7.5 3.6 3.6L9.6 26zM29.4 6.2L29.4 6.2l-3.6-3.6c-.8-.8-2-.8-2.8 0l0 0 0 0-8 8 1.4 1.4L20 8.4l3.6 3.6L20 15.6l1.4 1.4 8-8C30.2 8.2 30.2 7 29.4 6.2L29.4 6.2zM25 10.6L21.4 7l3-3L28 7.6 25 10.6z"),Qt(e,l)},m(s,u){P(s,e,u),r&&r.m(e,null),T(e,t)},p(s,[u]){s[1]?r?r.p(s,u):(r=xo(s),r.c(),r.m(e,t)):r&&(r.d(1),r=null),Qt(e,l=ut(o,[{xmlns:"http://www.w3.org/2000/svg"},{viewBox:"0 0 32 32"},{fill:"currentColor"},{preserveAspectRatio:"xMidYMid meet"},u&1&&{width:s[0]},u&1&&{height:s[0]},u&4&&s[2],u&8&&s[3]]))},i:Te,o:Te,d(s){s&&x(e),r&&r.d()}}}function Da(n,e,t){let r,o;const l=["size","title"];let s=Ne(e,l),{size:u=16}=e,{title:c=void 0}=e;return n.$$set=f=>{t(5,e=ye(ye({},e),rt(f))),t(3,s=Ne(e,l)),"size"in f&&t(0,u=f.size),"title"in f&&t(1,c=f.title)},n.$$.update=()=>{t(4,r=e["aria-label"]||e["aria-labelledby"]||c),t(2,o={"aria-hidden":r?void 0:!0,role:r?"img":void 0,focusable:Number(e.tabindex)===0?!0:void 0})},e=rt(e),[u,c,o,s,r]}class Ua extends Ce{constructor(e){super(),Me(this,e,Da,Fa,Oe,{size:0,title:1})}}const ja=Ua;function Ba(n){let e,t,r,o;const l=n[5].default,s=dt(l,n,n[4],null);let u=[n[3]],c={};for(let f=0;f<u.length;f+=1)c=ye(c,u[f]);return{c(){e=R("ol"),s&&s.c(),We(e,c),k(e,"bx--list--ordered",!n[1]),k(e,"bx--list--ordered--native",n[1]),k(e,"bx--list--nested",n[0]),k(e,"bx--list--expressive",n[2])},m(f,g){P(f,e,g),s&&s.m(e,null),t=!0,r||(o=[$(e,"click",n[6]),$(e,"mouseover",n[7]),$(e,"mouseenter",n[8]),$(e,"mouseleave",n[9])],r=!0)},p(f,[g]){s&&s.p&&(!t||g&16)&&ht(s,l,f,f[4],t?gt(l,f[4],g,null):pt(f[4]),null),We(e,c=ut(u,[g&8&&f[3]])),k(e,"bx--list--ordered",!f[1]),k(e,"bx--list--ordered--native",f[1]),k(e,"bx--list--nested",f[0]),k(e,"bx--list--expressive",f[2])},i(f){t||(j(s,f),t=!0)},o(f){Y(s,f),t=!1},d(f){f&&x(e),s&&s.d(f),r=!1,ft(o)}}}function Ga(n,e,t){const r=["nested","native","expressive"];let o=Ne(e,r),{$$slots:l={},$$scope:s}=e,{nested:u=!1}=e,{native:c=!1}=e,{expressive:f=!1}=e;function g(p){ae.call(this,n,p)}function _(p){ae.call(this,n,p)}function m(p){ae.call(this,n,p)}function d(p){ae.call(this,n,p)}return n.$$set=p=>{e=ye(ye({},e),rt(p)),t(3,o=Ne(e,r)),"nested"in p&&t(0,u=p.nested),"native"in p&&t(1,c=p.native),"expressive"in p&&t(2,f=p.expressive),"$$scope"in p&&t(4,s=p.$$scope)},[u,c,f,o,s,l,g,_,m,d]}class za extends Ce{constructor(e){super(),Me(this,e,Ga,Ba,Oe,{nested:0,native:1,expressive:2})}}const Va=za,qa=n=>({}),Ao=n=>({});function No(n){let e,t;const r=n[11].legendText,o=dt(r,n,n[10],Ao),l=o||Ja(n);return{c(){e=R("legend"),l&&l.c(),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[2])},m(s,u){P(s,e,u),l&&l.m(e,null),t=!0},p(s,u){o?o.p&&(!t||u&1024)&&ht(o,r,s,s[10],t?gt(r,s[10],u,qa):pt(s[10]),Ao):l&&l.p&&(!t||u&2)&&l.p(s,t?u:-1),(!t||u&4)&&k(e,"bx--visually-hidden",s[2])},i(s){t||(j(l,s),t=!0)},o(s){Y(l,s),t=!1},d(s){s&&x(e),l&&l.d(s)}}}function Ja(n){let e;return{c(){e=be(n[1])},m(t,r){P(t,e,r)},p(t,r){r&2&&Re(e,t[1])},d(t){t&&x(e)}}}function Ya(n){let e,t,r,o,l,s,u=(n[1]||n[8].legendText)&&No(n);const c=n[11].default,f=dt(c,n,n[10],null);let g=[{id:n[5]},n[7]],_={};for(let m=0;m<g.length;m+=1)_=ye(_,g[m]);return{c(){e=R("div"),t=R("fieldset"),u&&u.c(),r=q(),f&&f.c(),t.disabled=n[0],k(t,"bx--radio-button-group",!0),k(t,"bx--radio-button-group--vertical",n[4]==="vertical"),k(t,"bx--radio-button-group--label-left",n[3]==="left"),k(t,"bx--radio-button-group--label-right",n[3]==="right"),We(e,_),k(e,"bx--form-item",!0)},m(m,d){P(m,e,d),T(e,t),u&&u.m(t,null),T(t,r),f&&f.m(t,null),o=!0,l||(s=[$(e,"click",n[12]),$(e,"mouseover",n[13]),$(e,"mouseenter",n[14]),$(e,"mouseleave",n[15])],l=!0)},p(m,[d]){m[1]||m[8].legendText?u?(u.p(m,d),d&258&&j(u,1)):(u=No(m),u.c(),j(u,1),u.m(t,r)):u&&(tt(),Y(u,1,1,()=>{u=null}),nt()),f&&f.p&&(!o||d&1024)&&ht(f,c,m,m[10],o?gt(c,m[10],d,null):pt(m[10]),null),(!o||d&1)&&(t.disabled=m[0]),(!o||d&16)&&k(t,"bx--radio-button-group--vertical",m[4]==="vertical"),(!o||d&8)&&k(t,"bx--radio-button-group--label-left",m[3]==="left"),(!o||d&8)&&k(t,"bx--radio-button-group--label-right",m[3]==="right"),We(e,_=ut(g,[(!o||d&32)&&{id:m[5]},d&128&&m[7]])),k(e,"bx--form-item",!0)},i(m){o||(j(u),j(f,m),o=!0)},o(m){Y(u),Y(f,m),o=!1},d(m){m&&x(e),u&&u.d(),f&&f.d(m),l=!1,ft(s)}}}function Wa(n,e,t){const r=["selected","disabled","legendText","hideLegend","labelPosition","orientation","id"];let o=Ne(e,r),l,{$$slots:s={},$$scope:u}=e;const c=Rr(s);let{selected:f=void 0}=e,{disabled:g=!1}=e,{legendText:_=""}=e,{hideLegend:m=!1}=e,{labelPosition:d="right"}=e,{orientation:p="horizontal"}=e,{id:y=void 0}=e;const I=Il(),G=hn(f);Ke(n,G,D=>t(16,l=D)),yi("RadioButtonGroup",{selectedValue:G,add:({checked:D,value:ce})=>{D&&G.set(ce)},update:D=>{t(9,f=D)}}),Tn(()=>{mo(G,l=f,l)}),qs(()=>{mo(G,l=f,l)}),G.subscribe(D=>{t(9,f=D),I("change",D)});function O(D){ae.call(this,n,D)}function C(D){ae.call(this,n,D)}function A(D){ae.call(this,n,D)}function N(D){ae.call(this,n,D)}return n.$$set=D=>{e=ye(ye({},e),rt(D)),t(7,o=Ne(e,r)),"selected"in D&&t(9,f=D.selected),"disabled"in D&&t(0,g=D.disabled),"legendText"in D&&t(1,_=D.legendText),"hideLegend"in D&&t(2,m=D.hideLegend),"labelPosition"in D&&t(3,d=D.labelPosition),"orientation"in D&&t(4,p=D.orientation),"id"in D&&t(5,y=D.id),"$$scope"in D&&t(10,u=D.$$scope)},[g,_,m,d,p,y,G,o,c,f,u,s,O,C,A,N]}class Ha extends Ce{constructor(e){super(),Me(this,e,Wa,Ya,Oe,{selected:9,disabled:0,legendText:1,hideLegend:2,labelPosition:3,orientation:4,id:5})}}const Za=Ha,Xa=n=>({}),Ro=n=>({});function Fo(n){let e,t,r,o;const l=n[20].labelText,s=dt(l,n,n[19],Ro),u=s||Ka(n);let c=n[5]&&Do(n);return{c(){e=R("div"),t=R("label"),u&&u.c(),r=q(),c&&c.c(),J(t,"for",n[14]),k(t,"bx--label",!0),k(t,"bx--visually-hidden",n[11]),k(t,"bx--label--disabled",n[7]),k(e,"bx--text-area__label-wrapper",!0)},m(f,g){P(f,e,g),T(e,t),u&&u.m(t,null),T(e,r),c&&c.m(e,null),o=!0},p(f,g){s?s.p&&(!o||g[0]&524288)&&ht(s,l,f,f[19],o?gt(l,f[19],g,Xa):pt(f[19]),Ro):u&&u.p&&(!o||g[0]&1024)&&u.p(f,o?g:[-1,-1]),(!o||g[0]&16384)&&J(t,"for",f[14]),(!o||g[0]&2048)&&k(t,"bx--visually-hidden",f[11]),(!o||g[0]&128)&&k(t,"bx--label--disabled",f[7]),f[5]?c?c.p(f,g):(c=Do(f),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(f){o||(j(u,f),o=!0)},o(f){Y(u,f),o=!1},d(f){f&&x(e),u&&u.d(f),c&&c.d()}}}function Ka(n){let e;return{c(){e=be(n[10])},m(t,r){P(t,e,r)},p(t,r){r[0]&1024&&Re(e,t[10])},d(t){t&&x(e)}}}function Do(n){let e,t=n[0].length+"",r,o,l;return{c(){e=R("div"),r=be(t),o=be("/"),l=be(n[5]),k(e,"bx--label",!0),k(e,"bx--label--disabled",n[7])},m(s,u){P(s,e,u),T(e,r),T(e,o),T(e,l)},p(s,u){u[0]&1&&t!==(t=s[0].length+"")&&Re(r,t),u[0]&32&&Re(l,s[5]),u[0]&128&&k(e,"bx--label--disabled",s[7])},d(s){s&&x(e)}}}function Uo(n){let e,t;return e=new Ll({props:{class:"bx--text-area__invalid-icon"}}),{c(){ge(e.$$.fragment)},m(r,o){me(e,r,o),t=!0},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){Y(e.$$.fragment,r),t=!1},d(r){_e(e,r)}}}function jo(n){let e,t;return{c(){e=R("div"),t=be(n[9]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[7])},m(r,o){P(r,e,o),T(e,t)},p(r,o){o[0]&512&&Re(t,r[9]),o[0]&128&&k(e,"bx--form__helper-text--disabled",r[7])},d(r){r&&x(e)}}}function Bo(n){let e,t;return{c(){e=R("div"),t=be(n[13]),J(e,"id",n[16]),k(e,"bx--form-requirement",!0)},m(r,o){P(r,e,o),T(e,t)},p(r,o){o[0]&8192&&Re(t,r[13]),o[0]&65536&&J(e,"id",r[16])},d(r){r&&x(e)}}}function Qa(n){let e,t,r,o,l,s,u,c,f,g,_,m,d,p,y=(n[10]||n[17].labelText)&&!n[11]&&Fo(n),I=n[12]&&Uo(),G=[{"aria-invalid":s=n[12]||void 0},{"aria-describedby":u=n[12]?n[16]:void 0},{disabled:n[7]},{id:n[14]},{name:n[15]},{cols:n[3]},{rows:n[4]},{placeholder:n[2]},{readOnly:n[8]},{maxlength:c=n[5]??void 0},n[18]],O={};for(let N=0;N<G.length;N+=1)O=ye(O,G[N]);let C=!n[12]&&n[9]&&jo(n),A=n[12]&&Bo(n);return{c(){e=R("div"),y&&y.c(),t=q(),r=R("div"),I&&I.c(),o=q(),l=R("textarea"),g=q(),C&&C.c(),_=q(),A&&A.c(),We(l,O),k(l,"bx--text-area",!0),k(l,"bx--text-area--light",n[6]),k(l,"bx--text-area--invalid",n[12]),J(r,"data-invalid",f=n[12]||void 0),k(r,"bx--text-area__wrapper",!0),k(e,"bx--form-item",!0)},m(N,D){P(N,e,D),y&&y.m(e,null),T(e,t),T(e,r),I&&I.m(r,null),T(r,o),T(r,l),l.autofocus&&l.focus(),n[32](l),kn(l,n[0]),T(e,g),C&&C.m(e,null),T(e,_),A&&A.m(e,null),m=!0,d||(p=[$(l,"input",n[33]),$(l,"change",n[25]),$(l,"input",n[26]),$(l,"keydown",n[27]),$(l,"keyup",n[28]),$(l,"focus",n[29]),$(l,"blur",n[30]),$(l,"paste",n[31]),$(e,"click",n[21]),$(e,"mouseover",n[22]),$(e,"mouseenter",n[23]),$(e,"mouseleave",n[24])],d=!0)},p(N,D){(N[10]||N[17].labelText)&&!N[11]?y?(y.p(N,D),D[0]&134144&&j(y,1)):(y=Fo(N),y.c(),j(y,1),y.m(e,t)):y&&(tt(),Y(y,1,1,()=>{y=null}),nt()),N[12]?I?D[0]&4096&&j(I,1):(I=Uo(),I.c(),j(I,1),I.m(r,o)):I&&(tt(),Y(I,1,1,()=>{I=null}),nt()),We(l,O=ut(G,[(!m||D[0]&4096&&s!==(s=N[12]||void 0))&&{"aria-invalid":s},(!m||D[0]&69632&&u!==(u=N[12]?N[16]:void 0))&&{"aria-describedby":u},(!m||D[0]&128)&&{disabled:N[7]},(!m||D[0]&16384)&&{id:N[14]},(!m||D[0]&32768)&&{name:N[15]},(!m||D[0]&8)&&{cols:N[3]},(!m||D[0]&16)&&{rows:N[4]},(!m||D[0]&4)&&{placeholder:N[2]},(!m||D[0]&256)&&{readOnly:N[8]},(!m||D[0]&32&&c!==(c=N[5]??void 0))&&{maxlength:c},D[0]&262144&&N[18]])),D[0]&1&&kn(l,N[0]),k(l,"bx--text-area",!0),k(l,"bx--text-area--light",N[6]),k(l,"bx--text-area--invalid",N[12]),(!m||D[0]&4096&&f!==(f=N[12]||void 0))&&J(r,"data-invalid",f),!N[12]&&N[9]?C?C.p(N,D):(C=jo(N),C.c(),C.m(e,_)):C&&(C.d(1),C=null),N[12]?A?A.p(N,D):(A=Bo(N),A.c(),A.m(e,null)):A&&(A.d(1),A=null)},i(N){m||(j(y),j(I),m=!0)},o(N){Y(y),Y(I),m=!1},d(N){N&&x(e),y&&y.d(),I&&I.d(),n[32](null),C&&C.d(),A&&A.d(),d=!1,ft(p)}}}function $a(n,e,t){let r;const o=["value","placeholder","cols","rows","maxCount","light","disabled","readonly","helperText","labelText","hideLabel","invalid","invalidText","id","name","ref"];let l=Ne(e,o),{$$slots:s={},$$scope:u}=e;const c=Rr(s);let{value:f=""}=e,{placeholder:g=""}=e,{cols:_=50}=e,{rows:m=4}=e,{maxCount:d=void 0}=e,{light:p=!1}=e,{disabled:y=!1}=e,{readonly:I=!1}=e,{helperText:G=""}=e,{labelText:O=""}=e,{hideLabel:C=!1}=e,{invalid:A=!1}=e,{invalidText:N=""}=e,{id:D="ccs-"+Math.random().toString(36)}=e,{name:ce=void 0}=e,{ref:z=null}=e;function le(M){ae.call(this,n,M)}function X(M){ae.call(this,n,M)}function F(M){ae.call(this,n,M)}function ne(M){ae.call(this,n,M)}function te(M){ae.call(this,n,M)}function ie(M){ae.call(this,n,M)}function Q(M){ae.call(this,n,M)}function de(M){ae.call(this,n,M)}function ke(M){ae.call(this,n,M)}function Ie(M){ae.call(this,n,M)}function Le(M){ae.call(this,n,M)}function Be(M){Ge[M?"unshift":"push"](()=>{z=M,t(1,z)})}function ue(){f=this.value,t(0,f)}return n.$$set=M=>{e=ye(ye({},e),rt(M)),t(18,l=Ne(e,o)),"value"in M&&t(0,f=M.value),"placeholder"in M&&t(2,g=M.placeholder),"cols"in M&&t(3,_=M.cols),"rows"in M&&t(4,m=M.rows),"maxCount"in M&&t(5,d=M.maxCount),"light"in M&&t(6,p=M.light),"disabled"in M&&t(7,y=M.disabled),"readonly"in M&&t(8,I=M.readonly),"helperText"in M&&t(9,G=M.helperText),"labelText"in M&&t(10,O=M.labelText),"hideLabel"in M&&t(11,C=M.hideLabel),"invalid"in M&&t(12,A=M.invalid),"invalidText"in M&&t(13,N=M.invalidText),"id"in M&&t(14,D=M.id),"name"in M&&t(15,ce=M.name),"ref"in M&&t(1,z=M.ref),"$$scope"in M&&t(19,u=M.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&16384&&t(16,r=`error-${D}`)},[f,z,g,_,m,d,p,y,I,G,O,C,A,N,D,ce,r,c,l,u,s,le,X,F,ne,te,ie,Q,de,ke,Ie,Le,Be,ue]}class eu extends Ce{constructor(e){super(),Me(this,e,$a,Qa,Oe,{value:0,placeholder:2,cols:3,rows:4,maxCount:5,light:6,disabled:7,readonly:8,helperText:9,labelText:10,hideLabel:11,invalid:12,invalidText:13,id:14,name:15,ref:1},null,[-1,-1])}}const tu=eu,nu=n=>({}),Go=n=>({}),ru=n=>({}),zo=n=>({});function Vo(n){let e,t,r,o=n[9]&&qo(n),l=!n[20]&&n[6]&&Jo(n);return{c(){e=R("div"),o&&o.c(),t=q(),l&&l.c(),k(e,"bx--text-input__label-helper-wrapper",!0)},m(s,u){P(s,e,u),o&&o.m(e,null),T(e,t),l&&l.m(e,null),r=!0},p(s,u){s[9]?o?(o.p(s,u),u[0]&512&&j(o,1)):(o=qo(s),o.c(),j(o,1),o.m(e,t)):o&&(tt(),Y(o,1,1,()=>{o=null}),nt()),!s[20]&&s[6]?l?l.p(s,u):(l=Jo(s),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},i(s){r||(j(o),r=!0)},o(s){Y(o),r=!1},d(s){s&&x(e),o&&o.d(),l&&l.d()}}}function qo(n){let e,t;const r=n[26].labelText,o=dt(r,n,n[25],zo),l=o||iu(n);return{c(){e=R("label"),l&&l.c(),J(e,"for",n[7]),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[10]),k(e,"bx--label--disabled",n[5]),k(e,"bx--label--inline",n[16]),k(e,"bx--label--inline--sm",n[2]==="sm"),k(e,"bx--label--inline--xl",n[2]==="xl")},m(s,u){P(s,e,u),l&&l.m(e,null),t=!0},p(s,u){o?o.p&&(!t||u[0]&33554432)&&ht(o,r,s,s[25],t?gt(r,s[25],u,ru):pt(s[25]),zo):l&&l.p&&(!t||u[0]&512)&&l.p(s,t?u:[-1,-1]),(!t||u[0]&128)&&J(e,"for",s[7]),(!t||u[0]&1024)&&k(e,"bx--visually-hidden",s[10]),(!t||u[0]&32)&&k(e,"bx--label--disabled",s[5]),(!t||u[0]&65536)&&k(e,"bx--label--inline",s[16]),(!t||u[0]&4)&&k(e,"bx--label--inline--sm",s[2]==="sm"),(!t||u[0]&4)&&k(e,"bx--label--inline--xl",s[2]==="xl")},i(s){t||(j(l,s),t=!0)},o(s){Y(l,s),t=!1},d(s){s&&x(e),l&&l.d(s)}}}function iu(n){let e;return{c(){e=be(n[9])},m(t,r){P(t,e,r)},p(t,r){r[0]&512&&Re(e,t[9])},d(t){t&&x(e)}}}function Jo(n){let e,t;return{c(){e=R("div"),t=be(n[6]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[5]),k(e,"bx--form__helper-text--inline",n[16])},m(r,o){P(r,e,o),T(e,t)},p(r,o){o[0]&64&&Re(t,r[6]),o[0]&32&&k(e,"bx--form__helper-text--disabled",r[5]),o[0]&65536&&k(e,"bx--form__helper-text--inline",r[16])},d(r){r&&x(e)}}}function Yo(n){let e,t;const r=n[26].labelText,o=dt(r,n,n[25],Go),l=o||ou(n);return{c(){e=R("label"),l&&l.c(),J(e,"for",n[7]),k(e,"bx--label",!0),k(e,"bx--visually-hidden",n[10]),k(e,"bx--label--disabled",n[5]),k(e,"bx--label--inline",n[16]),k(e,"bx--label--inline-sm",n[16]&&n[2]==="sm"),k(e,"bx--label--inline-xl",n[16]&&n[2]==="xl")},m(s,u){P(s,e,u),l&&l.m(e,null),t=!0},p(s,u){o?o.p&&(!t||u[0]&33554432)&&ht(o,r,s,s[25],t?gt(r,s[25],u,nu):pt(s[25]),Go):l&&l.p&&(!t||u[0]&512)&&l.p(s,t?u:[-1,-1]),(!t||u[0]&128)&&J(e,"for",s[7]),(!t||u[0]&1024)&&k(e,"bx--visually-hidden",s[10]),(!t||u[0]&32)&&k(e,"bx--label--disabled",s[5]),(!t||u[0]&65536)&&k(e,"bx--label--inline",s[16]),(!t||u[0]&65540)&&k(e,"bx--label--inline-sm",s[16]&&s[2]==="sm"),(!t||u[0]&65540)&&k(e,"bx--label--inline-xl",s[16]&&s[2]==="xl")},i(s){t||(j(l,s),t=!0)},o(s){Y(l,s),t=!1},d(s){s&&x(e),l&&l.d(s)}}}function ou(n){let e;return{c(){e=be(n[9])},m(t,r){P(t,e,r)},p(t,r){r[0]&512&&Re(e,t[9])},d(t){t&&x(e)}}}function Wo(n){let e,t;return e=new Ll({props:{class:"bx--text-input__invalid-icon"}}),{c(){ge(e.$$.fragment)},m(r,o){me(e,r,o),t=!0},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){Y(e.$$.fragment,r),t=!1},d(r){_e(e,r)}}}function Ho(n){let e,t;return e=new La({props:{class:`bx--text-input__invalid-icon
            bx--text-input__invalid-icon--warning`}}),{c(){ge(e.$$.fragment)},m(r,o){me(e,r,o),t=!0},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){Y(e.$$.fragment,r),t=!1},d(r){_e(e,r)}}}function Zo(n){let e,t;return e=new ja({props:{class:"bx--text-input__readonly-icon"}}),{c(){ge(e.$$.fragment)},m(r,o){me(e,r,o),t=!0},i(r){t||(j(e.$$.fragment,r),t=!0)},o(r){Y(e.$$.fragment,r),t=!1},d(r){_e(e,r)}}}function Xo(n){let e;return{c(){e=R("hr"),k(e,"bx--text-input__divider",!0)},m(t,r){P(t,e,r)},d(t){t&&x(e)}}}function Ko(n){let e,t;return{c(){e=R("div"),t=be(n[12]),J(e,"id",n[19]),k(e,"bx--form-requirement",!0)},m(r,o){P(r,e,o),T(e,t)},p(r,o){o[0]&4096&&Re(t,r[12]),o[0]&524288&&J(e,"id",r[19])},d(r){r&&x(e)}}}function Qo(n){let e,t;return{c(){e=R("div"),t=be(n[14]),J(e,"id",n[18]),k(e,"bx--form-requirement",!0)},m(r,o){P(r,e,o),T(e,t)},p(r,o){o[0]&16384&&Re(t,r[14]),o[0]&262144&&J(e,"id",r[18])},d(r){r&&x(e)}}}function $o(n){let e,t;return{c(){e=R("div"),t=be(n[6]),k(e,"bx--form__helper-text",!0),k(e,"bx--form__helper-text--disabled",n[5]),k(e,"bx--form__helper-text--inline",n[16])},m(r,o){P(r,e,o),T(e,t)},p(r,o){o[0]&64&&Re(t,r[6]),o[0]&32&&k(e,"bx--form__helper-text--disabled",r[5]),o[0]&65536&&k(e,"bx--form__helper-text--inline",r[16])},d(r){r&&x(e)}}}function el(n){let e,t;return{c(){e=R("div"),t=be(n[12]),J(e,"id",n[19]),k(e,"bx--form-requirement",!0)},m(r,o){P(r,e,o),T(e,t)},p(r,o){o[0]&4096&&Re(t,r[12]),o[0]&524288&&J(e,"id",r[19])},d(r){r&&x(e)}}}function tl(n){let e,t;return{c(){e=R("div"),t=be(n[14]),J(e,"id",n[18]),k(e,"bx--form-requirement",!0)},m(r,o){P(r,e,o),T(e,t)},p(r,o){o[0]&16384&&Re(t,r[14]),o[0]&262144&&J(e,"id",r[18])},d(r){r&&x(e)}}}function lu(n){let e,t,r,o,l,s,u,c,f,g,_,m,d,p,y,I,G,O,C,A,N,D,ce,z,le=n[16]&&Vo(n),X=!n[16]&&(n[9]||n[24].labelText)&&Yo(n),F=n[11]&&Wo(),ne=!n[11]&&n[13]&&Ho(),te=n[17]&&Zo(),ie=[{"data-invalid":g=n[11]||void 0},{"aria-invalid":_=n[11]||void 0},{"data-warn":m=n[13]||void 0},{"aria-describedby":d=n[11]?n[19]:n[13]?n[18]:void 0},{disabled:n[5]},{id:n[7]},{name:n[8]},{placeholder:n[3]},{required:n[15]},{readOnly:n[17]},n[23]],Q={};for(let M=0;M<ie.length;M+=1)Q=ye(Q,ie[M]);let de=n[20]&&Xo(),ke=n[20]&&!n[16]&&n[11]&&Ko(n),Ie=n[20]&&!n[16]&&n[13]&&Qo(n),Le=!n[11]&&!n[13]&&!n[20]&&!n[16]&&n[6]&&$o(n),Be=!n[20]&&n[11]&&el(n),ue=!n[20]&&!n[11]&&n[13]&&tl(n);return{c(){e=R("div"),le&&le.c(),t=q(),X&&X.c(),r=q(),o=R("div"),l=R("div"),F&&F.c(),s=q(),ne&&ne.c(),u=q(),te&&te.c(),c=q(),f=R("input"),p=q(),de&&de.c(),y=q(),ke&&ke.c(),I=q(),Ie&&Ie.c(),C=q(),Le&&Le.c(),A=q(),Be&&Be.c(),N=q(),ue&&ue.c(),We(f,Q),k(f,"bx--text-input",!0),k(f,"bx--text-input--light",n[4]),k(f,"bx--text-input--invalid",n[11]),k(f,"bx--text-input--warn",n[13]),k(f,"bx--text-input--sm",n[2]==="sm"),k(f,"bx--text-input--xl",n[2]==="xl"),J(l,"data-invalid",G=n[11]||void 0),J(l,"data-warn",O=n[13]||void 0),k(l,"bx--text-input__field-wrapper",!0),k(l,"bx--text-input__field-wrapper--warning",!n[11]&&n[13]),k(o,"bx--text-input__field-outer-wrapper",!0),k(o,"bx--text-input__field-outer-wrapper--inline",n[16]),k(e,"bx--form-item",!0),k(e,"bx--text-input-wrapper",!0),k(e,"bx--text-input-wrapper--inline",n[16]),k(e,"bx--text-input-wrapper--light",n[4]),k(e,"bx--text-input-wrapper--readonly",n[17])},m(M,pe){P(M,e,pe),le&&le.m(e,null),T(e,t),X&&X.m(e,null),T(e,r),T(e,o),T(o,l),F&&F.m(l,null),T(l,s),ne&&ne.m(l,null),T(l,u),te&&te.m(l,null),T(l,c),T(l,f),f.autofocus&&f.focus(),n[36](f),kn(f,n[0]),T(l,p),de&&de.m(l,null),T(l,y),ke&&ke.m(l,null),T(l,I),Ie&&Ie.m(l,null),T(o,C),Le&&Le.m(o,null),T(o,A),Be&&Be.m(o,null),T(o,N),ue&&ue.m(o,null),D=!0,ce||(z=[$(f,"input",n[37]),$(f,"change",n[22]),$(f,"input",n[21]),$(f,"keydown",n[31]),$(f,"keyup",n[32]),$(f,"focus",n[33]),$(f,"blur",n[34]),$(f,"paste",n[35]),$(e,"click",n[27]),$(e,"mouseover",n[28]),$(e,"mouseenter",n[29]),$(e,"mouseleave",n[30])],ce=!0)},p(M,pe){M[16]?le?(le.p(M,pe),pe[0]&65536&&j(le,1)):(le=Vo(M),le.c(),j(le,1),le.m(e,t)):le&&(tt(),Y(le,1,1,()=>{le=null}),nt()),!M[16]&&(M[9]||M[24].labelText)?X?(X.p(M,pe),pe[0]&16843264&&j(X,1)):(X=Yo(M),X.c(),j(X,1),X.m(e,r)):X&&(tt(),Y(X,1,1,()=>{X=null}),nt()),M[11]?F?pe[0]&2048&&j(F,1):(F=Wo(),F.c(),j(F,1),F.m(l,s)):F&&(tt(),Y(F,1,1,()=>{F=null}),nt()),!M[11]&&M[13]?ne?pe[0]&10240&&j(ne,1):(ne=Ho(),ne.c(),j(ne,1),ne.m(l,u)):ne&&(tt(),Y(ne,1,1,()=>{ne=null}),nt()),M[17]?te?pe[0]&131072&&j(te,1):(te=Zo(),te.c(),j(te,1),te.m(l,c)):te&&(tt(),Y(te,1,1,()=>{te=null}),nt()),We(f,Q=ut(ie,[(!D||pe[0]&2048&&g!==(g=M[11]||void 0))&&{"data-invalid":g},(!D||pe[0]&2048&&_!==(_=M[11]||void 0))&&{"aria-invalid":_},(!D||pe[0]&8192&&m!==(m=M[13]||void 0))&&{"data-warn":m},(!D||pe[0]&796672&&d!==(d=M[11]?M[19]:M[13]?M[18]:void 0))&&{"aria-describedby":d},(!D||pe[0]&32)&&{disabled:M[5]},(!D||pe[0]&128)&&{id:M[7]},(!D||pe[0]&256)&&{name:M[8]},(!D||pe[0]&8)&&{placeholder:M[3]},(!D||pe[0]&32768)&&{required:M[15]},(!D||pe[0]&131072)&&{readOnly:M[17]},pe[0]&8388608&&M[23]])),pe[0]&1&&f.value!==M[0]&&kn(f,M[0]),k(f,"bx--text-input",!0),k(f,"bx--text-input--light",M[4]),k(f,"bx--text-input--invalid",M[11]),k(f,"bx--text-input--warn",M[13]),k(f,"bx--text-input--sm",M[2]==="sm"),k(f,"bx--text-input--xl",M[2]==="xl"),M[20]?de||(de=Xo(),de.c(),de.m(l,y)):de&&(de.d(1),de=null),M[20]&&!M[16]&&M[11]?ke?ke.p(M,pe):(ke=Ko(M),ke.c(),ke.m(l,I)):ke&&(ke.d(1),ke=null),M[20]&&!M[16]&&M[13]?Ie?Ie.p(M,pe):(Ie=Qo(M),Ie.c(),Ie.m(l,null)):Ie&&(Ie.d(1),Ie=null),(!D||pe[0]&2048&&G!==(G=M[11]||void 0))&&J(l,"data-invalid",G),(!D||pe[0]&8192&&O!==(O=M[13]||void 0))&&J(l,"data-warn",O),(!D||pe[0]&10240)&&k(l,"bx--text-input__field-wrapper--warning",!M[11]&&M[13]),!M[11]&&!M[13]&&!M[20]&&!M[16]&&M[6]?Le?Le.p(M,pe):(Le=$o(M),Le.c(),Le.m(o,A)):Le&&(Le.d(1),Le=null),!M[20]&&M[11]?Be?Be.p(M,pe):(Be=el(M),Be.c(),Be.m(o,N)):Be&&(Be.d(1),Be=null),!M[20]&&!M[11]&&M[13]?ue?ue.p(M,pe):(ue=tl(M),ue.c(),ue.m(o,null)):ue&&(ue.d(1),ue=null),(!D||pe[0]&65536)&&k(o,"bx--text-input__field-outer-wrapper--inline",M[16]),(!D||pe[0]&65536)&&k(e,"bx--text-input-wrapper--inline",M[16]),(!D||pe[0]&16)&&k(e,"bx--text-input-wrapper--light",M[4]),(!D||pe[0]&131072)&&k(e,"bx--text-input-wrapper--readonly",M[17])},i(M){D||(j(le),j(X),j(F),j(ne),j(te),D=!0)},o(M){Y(le),Y(X),Y(F),Y(ne),Y(te),D=!1},d(M){M&&x(e),le&&le.d(),X&&X.d(),F&&F.d(),ne&&ne.d(),te&&te.d(),n[36](null),de&&de.d(),ke&&ke.d(),Ie&&Ie.d(),Le&&Le.d(),Be&&Be.d(),ue&&ue.d(),ce=!1,ft(z)}}}function su(n,e,t){let r,o,l;const s=["size","value","placeholder","light","disabled","helperText","id","name","labelText","hideLabel","invalid","invalidText","warn","warnText","ref","required","inline","readonly"];let u=Ne(e,s),{$$slots:c={},$$scope:f}=e;const g=Rr(c);let{size:_=void 0}=e,{value:m=""}=e,{placeholder:d=""}=e,{light:p=!1}=e,{disabled:y=!1}=e,{helperText:I=""}=e,{id:G="ccs-"+Math.random().toString(36)}=e,{name:O=void 0}=e,{labelText:C=""}=e,{hideLabel:A=!1}=e,{invalid:N=!1}=e,{invalidText:D=""}=e,{warn:ce=!1}=e,{warnText:z=""}=e,{ref:le=null}=e,{required:X=!1}=e,{inline:F=!1}=e,{readonly:ne=!1}=e;const te=Nr("Form"),ie=Il();function Q(ee){return u.type!=="number"?ee:ee!=""?Number(ee):null}const de=ee=>{t(0,m=Q(ee.target.value)),ie("input",m)},ke=ee=>{ie("change",Q(ee.target.value))};function Ie(ee){ae.call(this,n,ee)}function Le(ee){ae.call(this,n,ee)}function Be(ee){ae.call(this,n,ee)}function ue(ee){ae.call(this,n,ee)}function M(ee){ae.call(this,n,ee)}function pe(ee){ae.call(this,n,ee)}function it(ee){ae.call(this,n,ee)}function Cn(ee){ae.call(this,n,ee)}function Mt(ee){ae.call(this,n,ee)}function fe(ee){Ge[ee?"unshift":"push"](()=>{le=ee,t(1,le)})}function oe(){m=this.value,t(0,m)}return n.$$set=ee=>{e=ye(ye({},e),rt(ee)),t(23,u=Ne(e,s)),"size"in ee&&t(2,_=ee.size),"value"in ee&&t(0,m=ee.value),"placeholder"in ee&&t(3,d=ee.placeholder),"light"in ee&&t(4,p=ee.light),"disabled"in ee&&t(5,y=ee.disabled),"helperText"in ee&&t(6,I=ee.helperText),"id"in ee&&t(7,G=ee.id),"name"in ee&&t(8,O=ee.name),"labelText"in ee&&t(9,C=ee.labelText),"hideLabel"in ee&&t(10,A=ee.hideLabel),"invalid"in ee&&t(11,N=ee.invalid),"invalidText"in ee&&t(12,D=ee.invalidText),"warn"in ee&&t(13,ce=ee.warn),"warnText"in ee&&t(14,z=ee.warnText),"ref"in ee&&t(1,le=ee.ref),"required"in ee&&t(15,X=ee.required),"inline"in ee&&t(16,F=ee.inline),"readonly"in ee&&t(17,ne=ee.readonly),"$$scope"in ee&&t(25,f=ee.$$scope)},n.$$.update=()=>{n.$$.dirty[0]&128&&t(19,o=`error-${G}`),n.$$.dirty[0]&128&&t(18,l=`warn-${G}`)},t(20,r=!!te&&te.isFluid),[m,le,_,d,p,y,I,G,O,C,A,N,D,ce,z,X,F,ne,l,o,r,de,ke,u,g,f,c,Ie,Le,Be,ue,M,pe,it,Cn,Mt,fe,oe]}class au extends Ce{constructor(e){super(),Me(this,e,su,lu,Oe,{size:2,value:0,placeholder:3,light:4,disabled:5,helperText:6,id:7,name:8,labelText:9,hideLabel:10,invalid:11,invalidText:12,warn:13,warnText:14,ref:1,required:15,inline:16,readonly:17},null,[-1,-1])}}const uu=au;function fu(n){let e;return{c(){e=be(`Click one of the draw icons to the top right of the map (the icons allow
      you to draw points, lines, polygons or routes)`)},m(t,r){P(t,e,r)},d(t){t&&x(e)}}}function cu(n){let e;return{c(){e=be(`Draw the intervention on the map, clicking the original point or 'Finish
      snapping' for the Polygon and Route tools respectively`)},m(t,r){P(t,e,r)},d(t){t&&x(e)}}}function du(n){let e;return{c(){e=be("Fill in the details that appear (Intervention type, name, description)")},m(t,r){P(t,e,r)},d(t){t&&x(e)}}}function hu(n){let e;return{c(){e=be(`Click the "Save" button or "Delete" button to save or remove the
      intervention`)},m(t,r){P(t,e,r)},d(t){t&&x(e)}}}function pu(n){let e,t,r,o,l,s,u,c;return e=new Er({props:{$$slots:{default:[fu]},$$scope:{ctx:n}}}),r=new Er({props:{$$slots:{default:[cu]},$$scope:{ctx:n}}}),l=new Er({props:{$$slots:{default:[du]},$$scope:{ctx:n}}}),u=new Er({props:{$$slots:{default:[hu]},$$scope:{ctx:n}}}),{c(){ge(e.$$.fragment),t=q(),ge(r.$$.fragment),o=q(),ge(l.$$.fragment),s=q(),ge(u.$$.fragment)},m(f,g){me(e,f,g),P(f,t,g),me(r,f,g),P(f,o,g),me(l,f,g),P(f,s,g),me(u,f,g),c=!0},p(f,g){const _={};g&4&&(_.$$scope={dirty:g,ctx:f}),e.$set(_);const m={};g&4&&(m.$$scope={dirty:g,ctx:f}),r.$set(m);const d={};g&4&&(d.$$scope={dirty:g,ctx:f}),l.$set(d);const p={};g&4&&(p.$$scope={dirty:g,ctx:f}),u.$set(p)},i(f){c||(j(e.$$.fragment,f),j(r.$$.fragment,f),j(l.$$.fragment,f),j(u.$$.fragment,f),c=!0)},o(f){Y(e.$$.fragment,f),Y(r.$$.fragment,f),Y(l.$$.fragment,f),Y(u.$$.fragment,f),c=!1},d(f){_e(e,f),f&&x(t),_e(r,f),f&&x(o),_e(l,f),f&&x(s),_e(u,f)}}}function gu(n){let e,t,r,o,l,s,u,c,f,g,_,m,d,p,y,I,G,O,C,A,N,D,ce,z,le,X;return l=new Va({props:{$$slots:{default:[pu]},$$scope:{ctx:n}}}),{c(){e=R("p"),e.textContent="For each intervention:",t=q(),r=R("br"),o=q(),ge(l.$$.fragment),s=q(),u=R("br"),c=q(),f=R("p"),f.textContent=`Repeat the steps above for each substantial infrastructure intervention in
    the scheme.`,g=q(),_=R("br"),m=q(),d=R("p"),d.textContent=`To make further edits to attribute data, or to delete an intervention, click
    on its name in the left hand panel or its geometry in the map.`,p=q(),y=R("br"),I=q(),G=R("p"),G.textContent=`Click the "Export to GeoJSON" button to download the dataset representing
    the scheme, which can be made up of one or more intervention, as a GeoJSON
    file. After saving the file, you can delete the interventions, change the
    scheme name, and start a new set of interventions representing a new scheme.`,O=q(),C=R("br"),A=q(),N=R("p"),N.textContent=`To load a GeoJSON file that you have already saved from the tool, click the
    "Load from GeoJSON" button and select the file.`,D=q(),ce=R("br"),z=q(),le=R("p"),le.innerHTML=`Note: the <strong>Route tool</strong> works by calculating routes between
    start and end points using the existing transport network according to
    OpenStreetMap. Use it by clicking on the location where you would like the
    route to start and then clicking on the location where you would like the
    route to end on the map. The route will be calculated and drawn on the map.
    After you click &quot;Finish snapping&quot; you can edit the route by dragging
    individual points. This can be useful for representing links that are not
    part of the existing transport network, such as a new bridge or path.
    However,
    <strong>you cannot add or remove points</strong> with the Route tool. If the
    planned route intervention you would like to sketch as part of a scheme contains
    one or more new links (for example containing new bridges or paths between cul-de-sacs),
    you may want to use the Line tool instead.`},m(F,ne){P(F,e,ne),P(F,t,ne),P(F,r,ne),P(F,o,ne),me(l,F,ne),P(F,s,ne),P(F,u,ne),P(F,c,ne),P(F,f,ne),P(F,g,ne),P(F,_,ne),P(F,m,ne),P(F,d,ne),P(F,p,ne),P(F,y,ne),P(F,I,ne),P(F,G,ne),P(F,O,ne),P(F,C,ne),P(F,A,ne),P(F,N,ne),P(F,D,ne),P(F,ce,ne),P(F,z,ne),P(F,le,ne),X=!0},p(F,ne){const te={};ne&4&&(te.$$scope={dirty:ne,ctx:F}),l.$set(te)},i(F){X||(j(l.$$.fragment,F),X=!0)},o(F){Y(l.$$.fragment,F),X=!1},d(F){F&&x(e),F&&x(t),F&&x(r),F&&x(o),_e(l,F),F&&x(s),F&&x(u),F&&x(c),F&&x(f),F&&x(g),F&&x(_),F&&x(m),F&&x(d),F&&x(p),F&&x(y),F&&x(I),F&&x(G),F&&x(O),F&&x(C),F&&x(A),F&&x(N),F&&x(D),F&&x(ce),F&&x(z),F&&x(le)}}}function mu(n){let e,t,r;function o(s){n[1](s)}let l={passiveModal:!0,modalHeading:"Instructions",$$slots:{default:[gu]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.open=n[0]),e=new Js({props:l}),Ge.push(()=>bt(e,"open",o,n[0])),{c(){ge(e.$$.fragment)},m(s,u){me(e,s,u),r=!0},p(s,[u]){const c={};u&4&&(c.$$scope={dirty:u,ctx:s}),!t&&u&1&&(t=!0,c.open=s[0],vt(()=>t=!1)),e.$set(c)},i(s){r||(j(e.$$.fragment,s),r=!0)},o(s){Y(e.$$.fragment,s),r=!1},d(s){_e(e,s)}}}function _u(n,e,t){let{open:r}=e;function o(l){r=l,t(0,r)}return n.$$set=l=>{"open"in l&&t(0,r=l.open)},[r,o]}class bu extends Ce{constructor(e){super(),Me(this,e,_u,mu,Oe,{open:0})}}const Nt=hn(null),je=hn(si()),kt=hn(null),li=hn(null);function si(){return{type:"FeatureCollection",features:[]}}const Fr=Ys(je,n=>{let e=n.features.find(t=>t.properties.editing);return e?e.id:null});function cn(n){Ws(Fr)!=n&&(je.update(e=>{for(let t of e.features)t.id==n?t.properties.editing=!0:delete t.properties.editing;return e}),kt.set(n))}function Pl(n){let e=new Set;for(let r of n.features)e.add(r.id);let t=e.size+1;for(;e.has(t);)t++;return t}function nl(n){let e;const t=n[4].default,r=dt(t,n,n[3],null);return{c(){r&&r.c()},m(o,l){r&&r.m(o,l),e=!0},p(o,l){r&&r.p&&(!e||l&8)&&ht(r,t,o,o[3],e?gt(t,o[3],l,null):pt(o[3]),null)},i(o){e||(j(r,o),e=!0)},o(o){Y(r,o),e=!1},d(o){r&&r.d(o)}}}function vu(n){let e,t,r=n[1]&&nl(n);return{c(){e=R("div"),r&&r.c(),J(e,"class","map svelte-12dpf1u")},m(o,l){P(o,e,l),r&&r.m(e,null),n[5](e),t=!0},p(o,[l]){o[1]?r?(r.p(o,l),l&2&&j(r,1)):(r=nl(o),r.c(),j(r,1),r.m(e,null)):r&&(tt(),Y(r,1,1,()=>{r=null}),nt())},i(o){t||(j(r),t=!0)},o(o){Y(r),t=!1},d(o){o&&x(e),r&&r.d(),n[5](null)}}}function yu(n,e,t){let{$$slots:r={},$$scope:o}=e,{style:l}=e,s,u,c=!1;yi("setCamera",!window.location.hash),Tn(()=>{s=new ti.Map({container:u,style:`https://api.maptiler.com/maps/${l}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),s.addControl(new ti.ScaleControl),s.addControl(new ti.NavigationControl({visualizePitch:!0}),"bottom-right"),s.on("load",()=>{t(1,c=!0),Nt.set(s)}),new ResizeObserver(()=>{s.resize()}).observe(u)}),Ei(()=>{s.remove()});function f(g){Ge[g?"unshift":"push"](()=>{u=g,t(0,u)})}return n.$$set=g=>{"style"in g&&t(2,l=g.style),"$$scope"in g&&t(3,o=g.$$scope)},[u,c,l,o,r,f]}class Eu extends Ce{constructor(e){super(),Me(this,e,yu,vu,Oe,{style:2})}}const wu=n=>({}),rl=n=>({}),Su=n=>({}),il=n=>({}),ku=n=>({}),ol=n=>({});function Tu(n){let e,t,r,o,l,s,u,c,f,g,_,m;const d=n[3].nav,p=dt(d,n,n[2],ol),y=n[3].sidebar,I=dt(y,n,n[2],il),G=n[3].main,O=dt(G,n,n[2],rl);return{c(){e=R("aside"),t=R("div"),r=R("nav"),p&&p.c(),o=q(),I&&I.c(),l=q(),s=R("div"),s.textContent="→",c=q(),f=R("main"),O&&O.c(),J(r,"class","svelte-19nerxn"),J(t,"class","sidebar-content content-container svelte-19nerxn"),J(s,"class","sidebar-toggle rounded-rect svelte-19nerxn"),J(e,"class",u=_o(n[0]?"":"collapsed")+" svelte-19nerxn"),J(f,"class","svelte-19nerxn")},m(C,A){P(C,e,A),T(e,t),T(t,r),p&&p.m(r,null),T(t,o),I&&I.m(t,null),T(e,l),T(e,s),P(C,c,A),P(C,f,A),O&&O.m(f,null),g=!0,_||(m=$(s,"click",n[1]),_=!0)},p(C,[A]){p&&p.p&&(!g||A&4)&&ht(p,d,C,C[2],g?gt(d,C[2],A,ku):pt(C[2]),ol),I&&I.p&&(!g||A&4)&&ht(I,y,C,C[2],g?gt(y,C[2],A,Su):pt(C[2]),il),(!g||A&1&&u!==(u=_o(C[0]?"":"collapsed")+" svelte-19nerxn"))&&J(e,"class",u),O&&O.p&&(!g||A&4)&&ht(O,G,C,C[2],g?gt(G,C[2],A,wu):pt(C[2]),rl)},i(C){g||(j(p,C),j(I,C),j(O,C),g=!0)},o(C){Y(p,C),Y(I,C),Y(O,C),g=!1},d(C){C&&x(e),p&&p.d(C),I&&I.d(C),C&&x(c),C&&x(f),O&&O.d(C),_=!1,m()}}}function Cu(n,e,t){let{$$slots:r={},$$scope:o}=e,l=!0;function s(){t(0,l=!l)}return n.$$set=u=>{"$$scope"in u&&t(2,o=u.$$scope)},[l,s,o,r]}class Mu extends Ce{constructor(e){super(),Me(this,e,Cu,Tu,Oe,{})}}var ct=63710088e-1,Ou={centimeters:ct*100,centimetres:ct*100,degrees:ct/111325,feet:ct*3.28084,inches:ct*39.37,kilometers:ct/1e3,kilometres:ct/1e3,meters:ct,metres:ct,miles:ct/1609.344,millimeters:ct*1e3,millimetres:ct*1e3,nauticalmiles:ct/1852,radians:1,yards:ct*1.0936};function qn(n,e,t){t===void 0&&(t={});var r={type:"Feature"};return(t.id===0||t.id)&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.properties=e||{},r.geometry=n,r}function Iu(n,e,t){t===void 0&&(t={});for(var r=0,o=n;r<o.length;r++){var l=o[r];if(l.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<l[l.length-1].length;s++)if(l[l.length-1][s]!==l[0][s])throw new Error("First and last Position are not equivalent.")}var u={type:"Polygon",coordinates:n};return qn(u,e,t)}function Lu(n,e,t){if(t===void 0&&(t={}),n.length<2)throw new Error("coordinates must be an array of two or more positions");var r={type:"LineString",coordinates:n};return qn(r,e,t)}function Pu(n,e,t){t===void 0&&(t={});var r={type:"MultiPolygon",coordinates:n};return qn(r,e,t)}function xu(n,e){e===void 0&&(e="kilometers");var t=Ou[e];if(!t)throw new Error(e+" units is invalid");return n*t}function Sr(n){var e=n%360;return e*Math.PI/180}/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Au(n,e){var t={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,o,l,s;return s={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(f){return function(g){return c([f,g])}}function c(f){if(r)throw new TypeError("Generator is already executing.");for(;t;)try{if(r=1,o&&(l=f[0]&2?o.return:f[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,f[1])).done)return l;switch(o=0,l&&(f=[f[0]&2,l.value]),f[0]){case 0:case 1:l=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,o=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(l=t.trys,!(l=l.length>0&&l[l.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!l||f[1]>l[0]&&f[1]<l[3])){t.label=f[1];break}if(f[0]===6&&t.label<l[1]){t.label=l[1],l=f;break}if(l&&t.label<l[2]){t.label=l[2],t.ops.push(f);break}l[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(n,t)}catch(g){f=[6,g],o=0}finally{r=l=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var $t=function(){function n(e,t){this.next=null,this.key=e,this.data=t,this.left=null,this.right=null}return n}();function Nu(n,e){return n>e?1:n<e?-1:0}function Zt(n,e,t){for(var r=new $t(null,null),o=r,l=r;;){var s=t(n,e.key);if(s<0){if(e.left===null)break;if(t(n,e.left.key)<0){var u=e.left;if(e.left=u.right,u.right=e,e=u,e.left===null)break}l.left=e,l=e,e=e.left}else if(s>0){if(e.right===null)break;if(t(n,e.right.key)>0){var u=e.right;if(e.right=u.left,u.left=e,e=u,e.right===null)break}o.right=e,o=e,e=e.right}else break}return o.right=e.left,l.left=e.right,e.left=r.right,e.right=r.left,e}function ni(n,e,t,r){var o=new $t(n,e);if(t===null)return o.left=o.right=null,o;t=Zt(n,t,r);var l=r(n,t.key);return l<0?(o.left=t.left,o.right=t,t.left=null):l>=0&&(o.right=t.right,o.left=t,t.right=null),o}function ll(n,e,t){var r=null,o=null;if(e){e=Zt(n,e,t);var l=t(e.key,n);l===0?(r=e.left,o=e.right):l<0?(o=e.right,e.right=null,r=e):(r=e.left,e.left=null,o=e)}return{left:r,right:o}}function Ru(n,e,t){return e===null?n:(n===null||(e=Zt(n.key,e,t),e.left=n),e)}function ai(n,e,t,r,o){if(n){r(""+e+(t?"└── ":"├── ")+o(n)+`
`);var l=e+(t?"    ":"│   ");n.left&&ai(n.left,l,!1,r,o),n.right&&ai(n.right,l,!0,r,o)}}var ki=function(){function n(e){e===void 0&&(e=Nu),this._root=null,this._size=0,this._comparator=e}return n.prototype.insert=function(e,t){return this._size++,this._root=ni(e,t,this._root,this._comparator)},n.prototype.add=function(e,t){var r=new $t(e,t);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var o=this._comparator,l=Zt(e,this._root,o),s=o(e,l.key);return s===0?this._root=l:(s<0?(r.left=l.left,r.right=l,l.left=null):s>0&&(r.right=l.right,r.left=l,l.right=null),this._size++,this._root=r),this._root},n.prototype.remove=function(e){this._root=this._remove(e,this._root,this._comparator)},n.prototype._remove=function(e,t,r){var o;if(t===null)return null;t=Zt(e,t,r);var l=r(e,t.key);return l===0?(t.left===null?o=t.right:(o=Zt(e,t.left,r),o.right=t.right),this._size--,o):t},n.prototype.pop=function(){var e=this._root;if(e){for(;e.left;)e=e.left;return this._root=Zt(e.key,this._root,this._comparator),this._root=this._remove(e.key,this._root,this._comparator),{key:e.key,data:e.data}}return null},n.prototype.findStatic=function(e){for(var t=this._root,r=this._comparator;t;){var o=r(e,t.key);if(o===0)return t;o<0?t=t.left:t=t.right}return null},n.prototype.find=function(e){return this._root&&(this._root=Zt(e,this._root,this._comparator),this._comparator(e,this._root.key)!==0)?null:this._root},n.prototype.contains=function(e){for(var t=this._root,r=this._comparator;t;){var o=r(e,t.key);if(o===0)return!0;o<0?t=t.left:t=t.right}return!1},n.prototype.forEach=function(e,t){for(var r=this._root,o=[],l=!1;!l;)r!==null?(o.push(r),r=r.left):o.length!==0?(r=o.pop(),e.call(t,r),r=r.right):l=!0;return this},n.prototype.range=function(e,t,r,o){for(var l=[],s=this._comparator,u=this._root,c;l.length!==0||u;)if(u)l.push(u),u=u.left;else{if(u=l.pop(),c=s(u.key,t),c>0)break;if(s(u.key,e)>=0&&r.call(o,u))return this;u=u.right}return this},n.prototype.keys=function(){var e=[];return this.forEach(function(t){var r=t.key;return e.push(r)}),e},n.prototype.values=function(){var e=[];return this.forEach(function(t){var r=t.data;return e.push(r)}),e},n.prototype.min=function(){return this._root?this.minNode(this._root).key:null},n.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},n.prototype.minNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.left;)e=e.left;return e},n.prototype.maxNode=function(e){if(e===void 0&&(e=this._root),e)for(;e.right;)e=e.right;return e},n.prototype.at=function(e){for(var t=this._root,r=!1,o=0,l=[];!r;)if(t)l.push(t),t=t.left;else if(l.length>0){if(t=l.pop(),o===e)return t;o++,t=t.right}else r=!0;return null},n.prototype.next=function(e){var t=this._root,r=null;if(e.right){for(r=e.right;r.left;)r=r.left;return r}for(var o=this._comparator;t;){var l=o(e.key,t.key);if(l===0)break;l<0?(r=t,t=t.left):t=t.right}return r},n.prototype.prev=function(e){var t=this._root,r=null;if(e.left!==null){for(r=e.left;r.right;)r=r.right;return r}for(var o=this._comparator;t;){var l=o(e.key,t.key);if(l===0)break;l<0?t=t.left:(r=t,t=t.right)}return r},n.prototype.clear=function(){return this._root=null,this._size=0,this},n.prototype.toList=function(){return Du(this._root)},n.prototype.load=function(e,t,r){t===void 0&&(t=[]),r===void 0&&(r=!1);var o=e.length,l=this._comparator;if(r&&ci(e,t,0,o-1,l),this._root===null)this._root=ui(e,t,0,o),this._size=o;else{var s=Uu(this.toList(),Fu(e,t),l);o=this._size+o,this._root=fi({head:s},0,o)}return this},n.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(n.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),n.prototype.toString=function(e){e===void 0&&(e=function(r){return String(r.key)});var t=[];return ai(this._root,"",!0,function(r){return t.push(r)},e),t.join("")},n.prototype.update=function(e,t,r){var o=this._comparator,l=ll(e,this._root,o),s=l.left,u=l.right;o(e,t)<0?u=ni(t,r,u,o):s=ni(t,r,s,o),this._root=Ru(s,u,o)},n.prototype.split=function(e){return ll(e,this._root,this._comparator)},n.prototype[Symbol.iterator]=function(){var e;return Au(this,function(t){switch(t.label){case 0:e=this.minNode(),t.label=1;case 1:return e?[4,e]:[3,3];case 2:return t.sent(),e=this.next(e),[3,1];case 3:return[2]}})},n}();function ui(n,e,t,r){var o=r-t;if(o>0){var l=t+Math.floor(o/2),s=n[l],u=e[l],c=new $t(s,u);return c.left=ui(n,e,t,l),c.right=ui(n,e,l+1,r),c}return null}function Fu(n,e){for(var t=new $t(null,null),r=t,o=0;o<n.length;o++)r=r.next=new $t(n[o],e[o]);return r.next=null,t.next}function Du(n){for(var e=n,t=[],r=!1,o=new $t(null,null),l=o;!r;)e?(t.push(e),e=e.left):t.length>0?(e=l=l.next=t.pop(),e=e.right):r=!0;return l.next=null,o.next}function fi(n,e,t){var r=t-e;if(r>0){var o=e+Math.floor(r/2),l=fi(n,e,o),s=n.head;return s.left=l,n.head=n.head.next,s.right=fi(n,o+1,t),s}return null}function Uu(n,e,t){for(var r=new $t(null,null),o=r,l=n,s=e;l!==null&&s!==null;)t(l.key,s.key)<0?(o.next=l,l=l.next):(o.next=s,s=s.next),o=o.next;return l!==null?o.next=l:s!==null&&(o.next=s),r.next}function ci(n,e,t,r,o){if(!(t>=r)){for(var l=n[t+r>>1],s=t-1,u=r+1;;){do s++;while(o(n[s],l)<0);do u--;while(o(n[u],l)>0);if(s>=u)break;var c=n[s];n[s]=n[u],n[u]=c,c=e[s],e[s]=e[u],e[u]=c}ci(n,e,t,u,o),ci(n,e,u+1,r,o)}}function yt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function sl(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function at(n,e,t){return e&&sl(n.prototype,e),t&&sl(n,t),n}var Un=function(e,t){return e.ll.x<=t.x&&t.x<=e.ur.x&&e.ll.y<=t.y&&t.y<=e.ur.y},di=function(e,t){if(t.ur.x<e.ll.x||e.ur.x<t.ll.x||t.ur.y<e.ll.y||e.ur.y<t.ll.y)return null;var r=e.ll.x<t.ll.x?t.ll.x:e.ll.x,o=e.ur.x<t.ur.x?e.ur.x:t.ur.x,l=e.ll.y<t.ll.y?t.ll.y:e.ll.y,s=e.ur.y<t.ur.y?e.ur.y:t.ur.y;return{ll:{x:r,y:l},ur:{x:o,y:s}}},Xt=Number.EPSILON;Xt===void 0&&(Xt=Math.pow(2,-52));var ju=Xt*Xt,hi=function(e,t){if(-Xt<e&&e<Xt&&-Xt<t&&t<Xt)return 0;var r=e-t;return r*r<ju*e*t?0:e<t?-1:1},Bu=function(){function n(){yt(this,n),this.reset()}return at(n,[{key:"reset",value:function(){this.xRounder=new al,this.yRounder=new al}},{key:"round",value:function(t,r){return{x:this.xRounder.round(t),y:this.yRounder.round(r)}}}]),n}(),al=function(){function n(){yt(this,n),this.tree=new ki,this.round(0)}return at(n,[{key:"round",value:function(t){var r=this.tree.add(t),o=this.tree.prev(r);if(o!==null&&hi(r.key,o.key)===0)return this.tree.remove(t),o.key;var l=this.tree.next(r);return l!==null&&hi(r.key,l.key)===0?(this.tree.remove(t),l.key):t}}]),n}(),Jn=new Bu,Gn=function(e,t){return e.x*t.y-e.y*t.x},xl=function(e,t){return e.x*t.x+e.y*t.y},ul=function(e,t,r){var o={x:t.x-e.x,y:t.y-e.y},l={x:r.x-e.x,y:r.y-e.y},s=Gn(o,l);return hi(s,0)},Lr=function(e){return Math.sqrt(xl(e,e))},Gu=function(e,t,r){var o={x:t.x-e.x,y:t.y-e.y},l={x:r.x-e.x,y:r.y-e.y};return Gn(l,o)/Lr(l)/Lr(o)},zu=function(e,t,r){var o={x:t.x-e.x,y:t.y-e.y},l={x:r.x-e.x,y:r.y-e.y};return xl(l,o)/Lr(l)/Lr(o)},fl=function(e,t,r){return t.y===0?null:{x:e.x+t.x/t.y*(r-e.y),y:r}},cl=function(e,t,r){return t.x===0?null:{x:r,y:e.y+t.y/t.x*(r-e.x)}},Vu=function(e,t,r,o){if(t.x===0)return cl(r,o,e.x);if(o.x===0)return cl(e,t,r.x);if(t.y===0)return fl(r,o,e.y);if(o.y===0)return fl(e,t,r.y);var l=Gn(t,o);if(l==0)return null;var s={x:r.x-e.x,y:r.y-e.y},u=Gn(s,t)/l,c=Gn(s,o)/l,f=e.x+c*t.x,g=r.x+u*o.x,_=e.y+c*t.y,m=r.y+u*o.y,d=(f+g)/2,p=(_+m)/2;return{x:d,y:p}},xt=function(){at(n,null,[{key:"compare",value:function(t,r){var o=n.comparePoints(t.point,r.point);return o!==0?o:(t.point!==r.point&&t.link(r),t.isLeft!==r.isLeft?t.isLeft?1:-1:Pr.compare(t.segment,r.segment))}},{key:"comparePoints",value:function(t,r){return t.x<r.x?-1:t.x>r.x?1:t.y<r.y?-1:t.y>r.y?1:0}}]);function n(e,t){yt(this,n),e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}return at(n,[{key:"link",value:function(t){if(t.point===this.point)throw new Error("Tried to link already linked events");for(var r=t.point.events,o=0,l=r.length;o<l;o++){var s=r[o];this.point.events.push(s),s.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var t=this.point.events.length,r=0;r<t;r++){var o=this.point.events[r];if(o.segment.consumedBy===void 0)for(var l=r+1;l<t;l++){var s=this.point.events[l];s.consumedBy===void 0&&o.otherSE.point.events===s.otherSE.point.events&&o.segment.consume(s.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var t=[],r=0,o=this.point.events.length;r<o;r++){var l=this.point.events[r];l!==this&&!l.segment.ringOut&&l.segment.isInResult()&&t.push(l)}return t}},{key:"getLeftmostComparator",value:function(t){var r=this,o=new Map,l=function(u){var c=u.otherSE;o.set(u,{sine:Gu(r.point,t.point,c.point),cosine:zu(r.point,t.point,c.point)})};return function(s,u){o.has(s)||l(s),o.has(u)||l(u);var c=o.get(s),f=c.sine,g=c.cosine,_=o.get(u),m=_.sine,d=_.cosine;return f>=0&&m>=0?g<d?1:g>d?-1:0:f<0&&m<0?g<d?-1:g>d?1:0:m<f?-1:m>f?1:0}}}]),n}(),qu=0,Pr=function(){at(n,null,[{key:"compare",value:function(t,r){var o=t.leftSE.point.x,l=r.leftSE.point.x,s=t.rightSE.point.x,u=r.rightSE.point.x;if(u<o)return 1;if(s<l)return-1;var c=t.leftSE.point.y,f=r.leftSE.point.y,g=t.rightSE.point.y,_=r.rightSE.point.y;if(o<l){if(f<c&&f<g)return 1;if(f>c&&f>g)return-1;var m=t.comparePoint(r.leftSE.point);if(m<0)return 1;if(m>0)return-1;var d=r.comparePoint(t.rightSE.point);return d!==0?d:-1}if(o>l){if(c<f&&c<_)return-1;if(c>f&&c>_)return 1;var p=r.comparePoint(t.leftSE.point);if(p!==0)return p;var y=t.comparePoint(r.rightSE.point);return y<0?1:y>0?-1:1}if(c<f)return-1;if(c>f)return 1;if(s<u){var I=r.comparePoint(t.rightSE.point);if(I!==0)return I}if(s>u){var G=t.comparePoint(r.rightSE.point);if(G<0)return 1;if(G>0)return-1}if(s!==u){var O=g-c,C=s-o,A=_-f,N=u-l;if(O>C&&A<N)return 1;if(O<C&&A>N)return-1}return s>u?1:s<u||g<_?-1:g>_?1:t.id<r.id?-1:t.id>r.id?1:0}}]);function n(e,t,r,o){yt(this,n),this.id=++qu,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=r,this.windings=o}return at(n,[{key:"replaceRightSE",value:function(t){this.rightSE=t,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var t=this.leftSE.point.y,r=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:t<r?t:r},ur:{x:this.rightSE.point.x,y:t>r?t:r}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(t){return t.x===this.leftSE.point.x&&t.y===this.leftSE.point.y||t.x===this.rightSE.point.x&&t.y===this.rightSE.point.y}},{key:"comparePoint",value:function(t){if(this.isAnEndpoint(t))return 0;var r=this.leftSE.point,o=this.rightSE.point,l=this.vector();if(r.x===o.x)return t.x===r.x?0:t.x<r.x?1:-1;var s=(t.y-r.y)/l.y,u=r.x+s*l.x;if(t.x===u)return 0;var c=(t.x-r.x)/l.x,f=r.y+c*l.y;return t.y===f?0:t.y<f?-1:1}},{key:"getIntersection",value:function(t){var r=this.bbox(),o=t.bbox(),l=di(r,o);if(l===null)return null;var s=this.leftSE.point,u=this.rightSE.point,c=t.leftSE.point,f=t.rightSE.point,g=Un(r,c)&&this.comparePoint(c)===0,_=Un(o,s)&&t.comparePoint(s)===0,m=Un(r,f)&&this.comparePoint(f)===0,d=Un(o,u)&&t.comparePoint(u)===0;if(_&&g)return d&&!m?u:!d&&m?f:null;if(_)return m&&s.x===f.x&&s.y===f.y?null:s;if(g)return d&&u.x===c.x&&u.y===c.y?null:c;if(d&&m)return null;if(d)return u;if(m)return f;var p=Vu(s,this.vector(),c,t.vector());return p===null||!Un(l,p)?null:Jn.round(p.x,p.y)}},{key:"split",value:function(t){var r=[],o=t.events!==void 0,l=new xt(t,!0),s=new xt(t,!1),u=this.rightSE;this.replaceRightSE(s),r.push(s),r.push(l);var c=new n(l,u,this.rings.slice(),this.windings.slice());return xt.comparePoints(c.leftSE.point,c.rightSE.point)>0&&c.swapEvents(),xt.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),o&&(l.checkForConsuming(),s.checkForConsuming()),r}},{key:"swapEvents",value:function(){var t=this.rightSE;this.rightSE=this.leftSE,this.leftSE=t,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var r=0,o=this.windings.length;r<o;r++)this.windings[r]*=-1}},{key:"consume",value:function(t){for(var r=this,o=t;r.consumedBy;)r=r.consumedBy;for(;o.consumedBy;)o=o.consumedBy;var l=n.compare(r,o);if(l!==0){if(l>0){var s=r;r=o,o=s}if(r.prev===o){var u=r;r=o,o=u}for(var c=0,f=o.rings.length;c<f;c++){var g=o.rings[c],_=o.windings[c],m=r.rings.indexOf(g);m===-1?(r.rings.push(g),r.windings.push(_)):r.windings[m]+=_}o.rings=null,o.windings=null,o.consumedBy=r,o.leftSE.consumedBy=r.leftSE,o.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var t=this.prev.consumedBy||this.prev;this._beforeState=t.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var t=this.beforeState();this._afterState={rings:t.rings.slice(0),windings:t.windings.slice(0),multiPolys:[]};for(var r=this._afterState.rings,o=this._afterState.windings,l=this._afterState.multiPolys,s=0,u=this.rings.length;s<u;s++){var c=this.rings[s],f=this.windings[s],g=r.indexOf(c);g===-1?(r.push(c),o.push(f)):o[g]+=f}for(var _=[],m=[],d=0,p=r.length;d<p;d++)if(o[d]!==0){var y=r[d],I=y.poly;if(m.indexOf(I)===-1)if(y.isExterior)_.push(I);else{m.indexOf(I)===-1&&m.push(I);var G=_.indexOf(y.poly);G!==-1&&_.splice(G,1)}}for(var O=0,C=_.length;O<C;O++){var A=_[O].multiPoly;l.indexOf(A)===-1&&l.push(A)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var t=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch(Tt.type){case"union":{var o=t.length===0,l=r.length===0;this._isInResult=o!==l;break}case"intersection":{var s,u;t.length<r.length?(s=t.length,u=r.length):(s=r.length,u=t.length),this._isInResult=u===Tt.numMultiPolys&&s<u;break}case"xor":{var c=Math.abs(t.length-r.length);this._isInResult=c%2===1;break}case"difference":{var f=function(_){return _.length===1&&_[0].isSubject};this._isInResult=f(t)!==f(r);break}default:throw new Error("Unrecognized operation type found ".concat(Tt.type))}return this._isInResult}}],[{key:"fromRing",value:function(t,r,o){var l,s,u,c=xt.comparePoints(t,r);if(c<0)l=t,s=r,u=1;else if(c>0)l=r,s=t,u=-1;else throw new Error("Tried to create degenerate segment at [".concat(t.x,", ").concat(t.y,"]"));var f=new xt(l,!0),g=new xt(s,!1);return new n(f,g,[o],[u])}}]),n}(),dl=function(){function n(e,t,r){if(yt(this,n),!Array.isArray(e)||e.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=t,this.isExterior=r,this.segments=[],typeof e[0][0]!="number"||typeof e[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var o=Jn.round(e[0][0],e[0][1]);this.bbox={ll:{x:o.x,y:o.y},ur:{x:o.x,y:o.y}};for(var l=o,s=1,u=e.length;s<u;s++){if(typeof e[s][0]!="number"||typeof e[s][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var c=Jn.round(e[s][0],e[s][1]);c.x===l.x&&c.y===l.y||(this.segments.push(Pr.fromRing(l,c,this)),c.x<this.bbox.ll.x&&(this.bbox.ll.x=c.x),c.y<this.bbox.ll.y&&(this.bbox.ll.y=c.y),c.x>this.bbox.ur.x&&(this.bbox.ur.x=c.x),c.y>this.bbox.ur.y&&(this.bbox.ur.y=c.y),l=c)}(o.x!==l.x||o.y!==l.y)&&this.segments.push(Pr.fromRing(l,o,this))}return at(n,[{key:"getSweepEvents",value:function(){for(var t=[],r=0,o=this.segments.length;r<o;r++){var l=this.segments[r];t.push(l.leftSE),t.push(l.rightSE)}return t}}]),n}(),Ju=function(){function n(e,t){if(yt(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new dl(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,o=e.length;r<o;r++){var l=new dl(e[r],this,!1);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.interiorRings.push(l)}this.multiPoly=t}return at(n,[{key:"getSweepEvents",value:function(){for(var t=this.exteriorRing.getSweepEvents(),r=0,o=this.interiorRings.length;r<o;r++)for(var l=this.interiorRings[r].getSweepEvents(),s=0,u=l.length;s<u;s++)t.push(l[s]);return t}}]),n}(),hl=function(){function n(e,t){if(yt(this,n),!Array.isArray(e))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof e[0][0][0]=="number"&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,o=e.length;r<o;r++){var l=new Ju(e[r],this);l.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=l.bbox.ll.x),l.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=l.bbox.ll.y),l.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=l.bbox.ur.x),l.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=l.bbox.ur.y),this.polys.push(l)}this.isSubject=t}return at(n,[{key:"getSweepEvents",value:function(){for(var t=[],r=0,o=this.polys.length;r<o;r++)for(var l=this.polys[r].getSweepEvents(),s=0,u=l.length;s<u;s++)t.push(l[s]);return t}}]),n}(),Yu=function(){at(n,null,[{key:"factory",value:function(t){for(var r=[],o=0,l=t.length;o<l;o++){var s=t[o];if(!(!s.isInResult()||s.ringOut)){for(var u=null,c=s.leftSE,f=s.rightSE,g=[c],_=c.point,m=[];u=c,c=f,g.push(c),c.point!==_;)for(;;){var d=c.getAvailableLinkedEvents();if(d.length===0){var p=g[0].point,y=g[g.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(p.x,",")+" ".concat(p.y,"]. Last matching segment found ends at")+" [".concat(y.x,", ").concat(y.y,"]."))}if(d.length===1){f=d[0].otherSE;break}for(var I=null,G=0,O=m.length;G<O;G++)if(m[G].point===c.point){I=G;break}if(I!==null){var C=m.splice(I)[0],A=g.splice(C.index);A.unshift(A[0].otherSE),r.push(new n(A.reverse()));continue}m.push({index:g.length,point:c.point});var N=c.getLeftmostComparator(u);f=d.sort(N)[0].otherSE;break}r.push(new n(g))}}return r}}]);function n(e){yt(this,n),this.events=e;for(var t=0,r=e.length;t<r;t++)e[t].segment.ringOut=this;this.poly=null}return at(n,[{key:"getGeom",value:function(){for(var t=this.events[0].point,r=[t],o=1,l=this.events.length-1;o<l;o++){var s=this.events[o].point,u=this.events[o+1].point;ul(s,t,u)!==0&&(r.push(s),t=s)}if(r.length===1)return null;var c=r[0],f=r[1];ul(c,t,f)===0&&r.shift(),r.push(r[0]);for(var g=this.isExteriorRing()?1:-1,_=this.isExteriorRing()?0:r.length-1,m=this.isExteriorRing()?r.length:-1,d=[],p=_;p!=m;p+=g)d.push([r[p].x,r[p].y]);return d}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var t=this.enclosingRing();this._isExteriorRing=t?!t.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var t=this.events[0],r=1,o=this.events.length;r<o;r++){var l=this.events[r];xt.compare(t,l)>0&&(t=l)}for(var s=t.segment.prevInResult(),u=s?s.prevInResult():null;;){if(!s)return null;if(!u)return s.ringOut;if(u.ringOut!==s.ringOut)return u.ringOut.enclosingRing()!==s.ringOut?s.ringOut:s.ringOut.enclosingRing();s=u.prevInResult(),u=s?s.prevInResult():null}}}]),n}(),pl=function(){function n(e){yt(this,n),this.exteriorRing=e,e.poly=this,this.interiorRings=[]}return at(n,[{key:"addInterior",value:function(t){this.interiorRings.push(t),t.poly=this}},{key:"getGeom",value:function(){var t=[this.exteriorRing.getGeom()];if(t[0]===null)return null;for(var r=0,o=this.interiorRings.length;r<o;r++){var l=this.interiorRings[r].getGeom();l!==null&&t.push(l)}return t}}]),n}(),Wu=function(){function n(e){yt(this,n),this.rings=e,this.polys=this._composePolys(e)}return at(n,[{key:"getGeom",value:function(){for(var t=[],r=0,o=this.polys.length;r<o;r++){var l=this.polys[r].getGeom();l!==null&&t.push(l)}return t}},{key:"_composePolys",value:function(t){for(var r=[],o=0,l=t.length;o<l;o++){var s=t[o];if(!s.poly)if(s.isExteriorRing())r.push(new pl(s));else{var u=s.enclosingRing();u.poly||r.push(new pl(u)),u.poly.addInterior(s)}}return r}}]),n}(),Hu=function(){function n(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Pr.compare;yt(this,n),this.queue=e,this.tree=new ki(t),this.segments=[]}return at(n,[{key:"process",value:function(t){var r=t.segment,o=[];if(t.consumedBy)return t.isLeft?this.queue.remove(t.otherSE):this.tree.remove(r),o;var l=t.isLeft?this.tree.insert(r):this.tree.find(r);if(!l)throw new Error("Unable to find segment #".concat(r.id," ")+"[".concat(r.leftSE.point.x,", ").concat(r.leftSE.point.y,"] -> ")+"[".concat(r.rightSE.point.x,", ").concat(r.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var s=l,u=l,c=void 0,f=void 0;c===void 0;)s=this.tree.prev(s),s===null?c=null:s.key.consumedBy===void 0&&(c=s.key);for(;f===void 0;)u=this.tree.next(u),u===null?f=null:u.key.consumedBy===void 0&&(f=u.key);if(t.isLeft){var g=null;if(c){var _=c.getIntersection(r);if(_!==null&&(r.isAnEndpoint(_)||(g=_),!c.isAnEndpoint(_)))for(var m=this._splitSafely(c,_),d=0,p=m.length;d<p;d++)o.push(m[d])}var y=null;if(f){var I=f.getIntersection(r);if(I!==null&&(r.isAnEndpoint(I)||(y=I),!f.isAnEndpoint(I)))for(var G=this._splitSafely(f,I),O=0,C=G.length;O<C;O++)o.push(G[O])}if(g!==null||y!==null){var A=null;if(g===null)A=y;else if(y===null)A=g;else{var N=xt.comparePoints(g,y);A=N<=0?g:y}this.queue.remove(r.rightSE),o.push(r.rightSE);for(var D=r.split(A),ce=0,z=D.length;ce<z;ce++)o.push(D[ce])}o.length>0?(this.tree.remove(r),o.push(t)):(this.segments.push(r),r.prev=c)}else{if(c&&f){var le=c.getIntersection(f);if(le!==null){if(!c.isAnEndpoint(le))for(var X=this._splitSafely(c,le),F=0,ne=X.length;F<ne;F++)o.push(X[F]);if(!f.isAnEndpoint(le))for(var te=this._splitSafely(f,le),ie=0,Q=te.length;ie<Q;ie++)o.push(te[ie])}}this.tree.remove(r)}return o}},{key:"_splitSafely",value:function(t,r){this.tree.remove(t);var o=t.rightSE;this.queue.remove(o);var l=t.split(r);return l.push(o),t.consumedBy===void 0&&this.tree.insert(t),l}}]),n}(),gl=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Zu=typeof process<"u"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Xu=function(){function n(){yt(this,n)}return at(n,[{key:"run",value:function(t,r,o){Tt.type=t,Jn.reset();for(var l=[new hl(r,!0)],s=0,u=o.length;s<u;s++)l.push(new hl(o[s],!1));if(Tt.numMultiPolys=l.length,Tt.type==="difference")for(var c=l[0],f=1;f<l.length;)di(l[f].bbox,c.bbox)!==null?f++:l.splice(f,1);if(Tt.type==="intersection"){for(var g=0,_=l.length;g<_;g++)for(var m=l[g],d=g+1,p=l.length;d<p;d++)if(di(m.bbox,l[d].bbox)===null)return[]}for(var y=new ki(xt.compare),I=0,G=l.length;I<G;I++)for(var O=l[I].getSweepEvents(),C=0,A=O.length;C<A;C++)if(y.insert(O[C]),y.size>gl)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var N=new Hu(y),D=y.size,ce=y.pop();ce;){var z=ce.key;if(y.size===D){var le=z.segment;throw new Error("Unable to pop() ".concat(z.isLeft?"left":"right"," SweepEvent ")+"[".concat(z.point.x,", ").concat(z.point.y,"] from segment #").concat(le.id," ")+"[".concat(le.leftSE.point.x,", ").concat(le.leftSE.point.y,"] -> ")+"[".concat(le.rightSE.point.x,", ").concat(le.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(y.size>gl)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(N.segments.length>Zu)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var X=N.process(z),F=0,ne=X.length;F<ne;F++){var te=X[F];te.consumedBy===void 0&&y.insert(te)}D=y.size,ce=y.pop()}Jn.reset();var ie=Yu.factory(N.segments),Q=new Wu(ie);return Q.getGeom()}}]),n}(),Tt=new Xu,Ku=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Tt.run("union",e,r)},Qu=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Tt.run("intersection",e,r)},$u=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Tt.run("xor",e,r)},ef=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return Tt.run("difference",e,r)},Tr={union:Ku,intersection:Qu,xor:$u,difference:ef};function tf(n,e){var t=rf(e),r=null;return n.type==="FeatureCollection"?r=nf(n):r=Al(Tr.union(n.geometry.coordinates)),r.geometry.coordinates.forEach(function(o){t.geometry.coordinates.push(o[0])}),t}function nf(n){var e=n.features.length===2?Tr.union(n.features[0].geometry.coordinates,n.features[1].geometry.coordinates):Tr.union.apply(Tr,n.features.map(function(t){return t.geometry.coordinates}));return Al(e)}function Al(n){return Pu(n)}function rf(n){var e=[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]],t=n&&n.geometry.coordinates||e;return Iu(t)}const of={"line-cap":"round","line-join":"round"},Nl=["==","$type","Polygon"],Rl=["==","$type","LineString"],Fl=["==","$type","Point"];function pi(n,e,t=1){return{type:"line",layout:of,paint:{"line-color":n,"line-width":e,"line-opacity":t}}}function Dl(n,e){return{type:"fill",paint:{"fill-color":n,"fill-opacity":e}}}function Ul(n,e,t=1){return{type:"circle",paint:{"circle-radius":e,"circle-color":n,"circle-opacity":t}}}function Ti(n,e,t){if(n.getSource(e)){let r=[];for(let o of n.getStyle().layers)o.source==e&&r.push(o.id);for(let o of r)n.removeLayer(o);n.removeSource(e)}n.addSource(e,t)}function dn(n,e,t=null){n.getLayer(e.id)&&n.removeLayer(e.id),t&&!n.getLayer(t)&&(t=null),n.addLayer(e,t)}function lf(n,e,t){let r;Ke(n,Nt,s=>t(1,r=s));let{boundaryGeojson:o}=e;return Nr("setCamera")&&r.fitBounds(wi(o),{padding:20,animate:!1}),Ti(r,"boundary",{type:"geojson",data:tf(o)}),dn(r,{id:"boundary",source:"boundary",...Dl("black",.5)}),n.$$set=s=>{"boundaryGeojson"in s&&t(0,o=s.boundaryGeojson)},[o]}class sf extends Ce{constructor(e){super(),Me(this,e,lf,null,Oe,{boundaryGeojson:0})}}function af(n){let e,t,r,o,l,s,u,c;return e=new wr({props:{labelText:"Area",value:"area"}}),r=new wr({props:{labelText:"Route",value:"route"}}),l=new wr({props:{labelText:"Crossing",value:"crossing"}}),u=new wr({props:{labelText:"Other",value:"other"}}),{c(){ge(e.$$.fragment),t=q(),ge(r.$$.fragment),o=q(),ge(l.$$.fragment),s=q(),ge(u.$$.fragment)},m(f,g){me(e,f,g),P(f,t,g),me(r,f,g),P(f,o,g),me(l,f,g),P(f,s,g),me(u,f,g),c=!0},p:Te,i(f){c||(j(e.$$.fragment,f),j(r.$$.fragment,f),j(l.$$.fragment,f),j(u.$$.fragment,f),c=!0)},o(f){Y(e.$$.fragment,f),Y(r.$$.fragment,f),Y(l.$$.fragment,f),Y(u.$$.fragment,f),c=!1},d(f){_e(e,f),f&&x(t),_e(r,f),f&&x(o),_e(l,f),f&&x(s),_e(u,f)}}}function ml(n){let e,t,r=_l(n[3])+"",o,l,s;return{c(){e=R("p"),t=be("Length: "),o=be(r),l=q(),s=R("br")},m(u,c){P(u,e,c),T(e,t),T(e,o),P(u,l,c),P(u,s,c)},p(u,c){c&8&&r!==(r=_l(u[3])+"")&&Re(o,r)},d(u){u&&x(e),u&&x(l),u&&x(s)}}}function uf(n){let e,t,r,o,l,s,u,c,f,g,_,m,d,p,y,I,G,O,C,A,N,D,ce;function z(Q){n[7](Q)}let le={labelText:"Name"};n[0]!==void 0&&(le.value=n[0]),e=new uu({props:le}),Ge.push(()=>bt(e,"value",z,n[0]));function X(Q){n[8](Q)}let F={$$slots:{default:[af]},$$scope:{ctx:n}};n[1]!==void 0&&(F.selected=n[1]),s=new Za({props:F}),Ge.push(()=>bt(s,"selected",X,n[1]));function ne(Q){n[9](Q)}let te={labelText:"Description"};n[2]!==void 0&&(te.value=n[2]),_=new tu({props:te}),Ge.push(()=>bt(_,"value",ne,n[2]));let ie=n[3]&&ml(n);return{c(){ge(e.$$.fragment),r=q(),o=R("br"),l=q(),ge(s.$$.fragment),c=q(),f=R("br"),g=q(),ge(_.$$.fragment),d=q(),p=R("br"),y=q(),ie&&ie.c(),I=q(),G=R("div"),O=R("button"),O.textContent="Delete",C=q(),A=R("button"),A.textContent="Save",J(O,"type","button"),J(A,"type","button"),fn(A,"float","right")},m(Q,de){me(e,Q,de),P(Q,r,de),P(Q,o,de),P(Q,l,de),me(s,Q,de),P(Q,c,de),P(Q,f,de),P(Q,g,de),me(_,Q,de),P(Q,d,de),P(Q,p,de),P(Q,y,de),ie&&ie.m(Q,de),P(Q,I,de),P(Q,G,de),T(G,O),T(G,C),T(G,A),n[11](G),N=!0,D||(ce=[$(O,"click",n[5]),$(A,"click",n[10])],D=!0)},p(Q,[de]){const ke={};!t&&de&1&&(t=!0,ke.value=Q[0],vt(()=>t=!1)),e.$set(ke);const Ie={};de&4096&&(Ie.$$scope={dirty:de,ctx:Q}),!u&&de&2&&(u=!0,Ie.selected=Q[1],vt(()=>u=!1)),s.$set(Ie);const Le={};!m&&de&4&&(m=!0,Le.value=Q[2],vt(()=>m=!1)),_.$set(Le),Q[3]?ie?ie.p(Q,de):(ie=ml(Q),ie.c(),ie.m(I.parentNode,I)):ie&&(ie.d(1),ie=null)},i(Q){N||(j(e.$$.fragment,Q),j(s.$$.fragment,Q),j(_.$$.fragment,Q),N=!0)},o(Q){Y(e.$$.fragment,Q),Y(s.$$.fragment,Q),Y(_.$$.fragment,Q),N=!1},d(Q){_e(e,Q),Q&&x(r),Q&&x(o),Q&&x(l),_e(s,Q),Q&&x(c),Q&&x(f),Q&&x(g),_e(_,Q),Q&&x(d),Q&&x(p),Q&&x(y),ie&&ie.d(Q),Q&&x(I),Q&&x(G),n[11](null),D=!1,ft(ce)}}}function _l(n){return n<1e3?Math.round(n)+" m":(n/1e3).toFixed(1)+"km"}function ff(n,e,t){let{id:r}=e,{name:o}=e,{intervention_type:l}=e,{description:s}=e,{length_meters:u}=e,c;Fr.subscribe(y=>{r==y&&setTimeout(()=>c==null?void 0:c.scrollIntoView({behavior:"smooth"}),1)});function f(){je.update(y=>(y.features=y.features.filter(I=>I.id!=r),y)),cn(null)}function g(y){o=y,t(0,o)}function _(y){l=y,t(1,l)}function m(y){s=y,t(2,s)}const d=()=>cn(null);function p(y){Ge[y?"unshift":"push"](()=>{c=y,t(4,c)})}return n.$$set=y=>{"id"in y&&t(6,r=y.id),"name"in y&&t(0,o=y.name),"intervention_type"in y&&t(1,l=y.intervention_type),"description"in y&&t(2,s=y.description),"length_meters"in y&&t(3,u=y.length_meters)},[o,l,s,u,c,f,r,g,_,m,d,p]}class cf extends Ce{constructor(e){super(),Me(this,e,ff,uf,Oe,{id:6,name:0,intervention_type:1,description:2,length_meters:3})}}function bl(n,e,t){const r=n.slice();return r[10]=e[t],r[11]=e,r[12]=t,r}function df(n){let e,t,r,o,l,s;function u(_){n[5](_,n[10])}function c(_){n[6](_,n[10])}function f(_){n[7](_,n[10])}let g={id:n[10].id,length_meters:n[10].properties.length_meters};return n[10].properties.name!==void 0&&(g.name=n[10].properties.name),n[10].properties.intervention_type!==void 0&&(g.intervention_type=n[10].properties.intervention_type),n[10].properties.description!==void 0&&(g.description=n[10].properties.description),e=new cf({props:g}),Ge.push(()=>bt(e,"name",u,n[10].properties.name)),Ge.push(()=>bt(e,"intervention_type",c,n[10].properties.intervention_type)),Ge.push(()=>bt(e,"description",f,n[10].properties.description)),{c(){ge(e.$$.fragment),l=q()},m(_,m){me(e,_,m),P(_,l,m),s=!0},p(_,m){n=_;const d={};m&1&&(d.id=n[10].id),m&1&&(d.length_meters=n[10].properties.length_meters),!t&&m&1&&(t=!0,d.name=n[10].properties.name,vt(()=>t=!1)),!r&&m&1&&(r=!0,d.intervention_type=n[10].properties.intervention_type,vt(()=>r=!1)),!o&&m&1&&(o=!0,d.description=n[10].properties.description,vt(()=>o=!1)),e.$set(d)},i(_){s||(j(e.$$.fragment,_),s=!0)},o(_){Y(e.$$.fragment,_),s=!1},d(_){_e(e,_),_&&x(l)}}}function hf(n){let e=n[12]+1+"",t,r,o=xr(n[10])+"",l;return{c(){t=be(e),r=be(") "),l=be(o)},m(s,u){P(s,t,u),P(s,r,u),P(s,l,u)},p(s,u){u&1&&e!==(e=s[12]+1+"")&&Re(t,e),u&1&&o!==(o=xr(s[10])+"")&&Re(l,o)},d(s){s&&x(t),s&&x(r),s&&x(l)}}}function pf(n){let e,t=n[12]+1+"",r,o,l=xr(n[10])+"",s;return{c(){e=R("strong"),r=be(t),o=be(") "),s=be(l)},m(u,c){P(u,e,c),T(e,r),T(e,o),T(e,s)},p(u,c){c&1&&t!==(t=u[12]+1+"")&&Re(r,t),c&1&&l!==(l=xr(u[10])+"")&&Re(s,l)},d(u){u&&x(e)}}}function gf(n){let e;function t(l,s){return l[10].id==l[1]?pf:hf}let r=t(n),o=r(n);return{c(){o.c(),e=q()},m(l,s){o.m(l,s),P(l,e,s)},p(l,s){r===(r=t(l))&&o?o.p(l,s):(o.d(1),o=r(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){o.d(l),l&&x(e)}}}function vl(n,e){let t,r,o,l;function s(c){e[8](c,e[10])}let u={$$slots:{title:[gf],default:[df]},$$scope:{ctx:e}};return e[10].properties.editing!==void 0&&(u.open=e[10].properties.editing),r=new Sa({props:u}),Ge.push(()=>bt(r,"open",s,e[10].properties.editing)),r.$on("click",function(){bo(e[3](e[10].id))&&e[3](e[10].id).apply(this,arguments)}),r.$on("mouseenter",function(){bo(e[2](e[10].id))&&e[2](e[10].id).apply(this,arguments)}),r.$on("mouseleave",e[2](null)),{key:n,first:null,c(){t=en(),ge(r.$$.fragment),this.first=t},m(c,f){P(c,t,f),me(r,c,f),l=!0},p(c,f){e=c;const g={};f&8195&&(g.$$scope={dirty:f,ctx:e}),!o&&f&1&&(o=!0,g.open=e[10].properties.editing,vt(()=>o=!1)),r.$set(g)},i(c){l||(j(r.$$.fragment,c),l=!0)},o(c){Y(r.$$.fragment,c),l=!1},d(c){c&&x(t),_e(r,c)}}}function mf(n){let e=[],t=new Map,r,o,l=n[0].features;const s=u=>u[10].id;for(let u=0;u<l.length;u+=1){let c=bl(n,l,u),f=s(c);t.set(f,e[u]=vl(f,c))}return{c(){for(let u=0;u<e.length;u+=1)e[u].c();r=en()},m(u,c){for(let f=0;f<e.length;f+=1)e[f].m(u,c);P(u,r,c),o=!0},p(u,c){c&15&&(l=u[0].features,tt(),e=Ml(e,c,s,1,u,l,t,r.parentNode,Ol,vl,r,bl),nt())},i(u){if(!o){for(let c=0;c<l.length;c+=1)j(e[c]);o=!0}},o(u){for(let c=0;c<e.length;c+=1)Y(e[c]);o=!1},d(u){for(let c=0;c<e.length;c+=1)e[c].d(u);u&&x(r)}}}function _f(n){let e,t,r,o;return e=new _a({props:{$$slots:{default:[mf]},$$scope:{ctx:n}}}),{c(){ge(e.$$.fragment)},m(l,s){me(e,l,s),t=!0,r||(o=$(window,"keydown",n[4]),r=!0)},p(l,[s]){const u={};s&8195&&(u.$$scope={dirty:s,ctx:l}),e.$set(u)},i(l){t||(j(e.$$.fragment,l),t=!0)},o(l){Y(e.$$.fragment,l),t=!1},d(l){_e(e,l),r=!1,o()}}}function xr(n){if(n.properties.name)return n.properties.name;var e=n.properties.intervention_type;return e=="other"&&(n.geometry.type=="Point"?e="point":n.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function bf(n,e,t){let r,o,l;Ke(n,Fr,d=>t(9,r=d)),Ke(n,je,d=>t(0,o=d)),Ke(n,kt,d=>t(1,l=d));function s(d){r==null&&kt.set(d)}function u(d){console.log(`Clicked ${d} from the sidebar; going to edit-attribute`),li.set(null),li.set(d);for(let p of o.features)p.properties.editing&&p.id!=d&&delete p.properties.editing;kt.set(d)}function c(d){const p=r;if(d.key=="Delete"){const y=d.originalTarget.tagName;if(y!="CANVAS"&&y!="BODY")return;d.preventDefault(),je.update(I=>(I.features=I.features.filter(G=>G.id!=p),I))}}function f(d,p){n.$$.not_equal(p.properties.name,d)&&(p.properties.name=d,je.set(o))}function g(d,p){n.$$.not_equal(p.properties.intervention_type,d)&&(p.properties.intervention_type=d,je.set(o))}function _(d,p){n.$$.not_equal(p.properties.description,d)&&(p.properties.description=d,je.set(o))}function m(d,p){n.$$.not_equal(p.properties.editing,d)&&(p.properties.editing=d,je.set(o))}return[o,l,s,u,c,f,g,_,m]}class vf extends Ce{constructor(e){super(),Me(this,e,bf,_f,Oe,{})}}function yl(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function yf(n,e,t){t===void 0&&(t={});var r=yl(n),o=yl(e),l=Sr(o[1]-r[1]),s=Sr(o[0]-r[0]),u=Sr(r[1]),c=Sr(o[1]),f=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(s/2),2)*Math.cos(u)*Math.cos(c);return xu(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),t.units)}function jl(n,e,t){if(n!==null)for(var r,o,l,s,u,c,f,g=0,_=0,m,d=n.type,p=d==="FeatureCollection",y=d==="Feature",I=p?n.features.length:1,G=0;G<I;G++){f=p?n.features[G].geometry:y?n.geometry:n,m=f?f.type==="GeometryCollection":!1,u=m?f.geometries.length:1;for(var O=0;O<u;O++){var C=0,A=0;if(s=m?f.geometries[O]:f,s!==null){c=s.coordinates;var N=s.type;switch(g=t&&(N==="Polygon"||N==="MultiPolygon")?1:0,N){case null:break;case"Point":if(e(c,_,G,C,A)===!1)return!1;_++,C++;break;case"LineString":case"MultiPoint":for(r=0;r<c.length;r++){if(e(c[r],_,G,C,A)===!1)return!1;_++,N==="MultiPoint"&&C++}N==="LineString"&&C++;break;case"Polygon":case"MultiLineString":for(r=0;r<c.length;r++){for(o=0;o<c[r].length-g;o++){if(e(c[r][o],_,G,C,A)===!1)return!1;_++}N==="MultiLineString"&&C++,N==="Polygon"&&A++}N==="Polygon"&&C++;break;case"MultiPolygon":for(r=0;r<c.length;r++){for(A=0,o=0;o<c[r].length;o++){for(l=0;l<c[r][o].length-g;l++){if(e(c[r][o][l],_,G,C,A)===!1)return!1;_++}A++}C++}break;case"GeometryCollection":for(r=0;r<s.geometries.length;r++)if(jl(s.geometries[r],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function Ef(n,e){var t,r,o,l,s,u,c,f,g,_,m=0,d=n.type==="FeatureCollection",p=n.type==="Feature",y=d?n.features.length:1;for(t=0;t<y;t++){for(u=d?n.features[t].geometry:p?n.geometry:n,f=d?n.features[t].properties:p?n.properties:{},g=d?n.features[t].bbox:p?n.bbox:void 0,_=d?n.features[t].id:p?n.id:void 0,c=u?u.type==="GeometryCollection":!1,s=c?u.geometries.length:1,o=0;o<s;o++){if(l=c?u.geometries[o]:u,l===null){if(e(null,m,f,g,_)===!1)return!1;continue}switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(l,m,f,g,_)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<l.geometries.length;r++)if(e(l.geometries[r],m,f,g,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}m++}}function wf(n,e){Ef(n,function(t,r,o,l,s){var u=t===null?null:t.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return e(qn(t,o,{bbox:l,id:s}),r,0)===!1?!1:void 0}var c;switch(u){case"MultiPoint":c="Point";break;case"MultiLineString":c="LineString";break;case"MultiPolygon":c="Polygon";break}for(var f=0;f<t.coordinates.length;f++){var g=t.coordinates[f],_={type:c,coordinates:g};if(e(qn(_,o),r,f)===!1)return!1}})}function Sf(n,e){wf(n,function(t,r,o){var l=0;if(t.geometry){var s=t.geometry.type;if(!(s==="Point"||s==="MultiPoint")){var u,c=0,f=0,g=0;if(jl(t,function(_,m,d,p,y){if(u===void 0||r>c||p>f||y>g){u=_,c=r,f=p,g=y,l=0;return}var I=Lu([u,_],t.properties);if(e(I,r,o,y,l)===!1)return!1;l++,u=_})===!1)return!1}}})}function kf(n,e,t){var r=t,o=!1;return Sf(n,function(l,s,u,c,f){o===!1&&t===void 0?r=l:r=e(r,l,s,u,c,f),o=!0}),r}function Tf(n,e){return e===void 0&&(e={}),kf(n,function(t,r){var o=r.geometry.coordinates;return t+yf(o[0],o[1],e)},0)}function Cf(n){let e,t,r,o,l,s,u,c,f,g,_,m,d,p,y,I,G,O,C,A=n[0].features.length+"",N,D,ce,z,le,X,F,ne;return{c(){e=R("div"),t=R("label"),r=be(`Scheme name:
    `),o=R("input"),l=q(),s=R("br"),u=q(),c=R("div"),f=R("label"),g=R("input"),_=q(),m=R("button"),m.textContent="Load from GeoJSON",d=q(),p=R("button"),p.textContent="Export to GeoJSON",y=q(),I=R("br"),G=q(),O=R("div"),C=R("span"),N=be(A),D=be(" interventions"),ce=q(),z=R("button"),le=be("Clear all"),J(o,"type","text"),J(g,"type","file"),J(g,"id","load_geojson"),J(g,"class","svelte-lhyd1e"),J(m,"type","button"),J(m,"onclick","document.getElementById('load_geojson').click();"),J(p,"type","button"),J(p,"class","align-right svelte-lhyd1e"),J(z,"type","button"),J(z,"class","align-right svelte-lhyd1e"),z.disabled=X=n[0].features.length==0},m(te,ie){P(te,e,ie),T(e,t),T(t,r),T(t,o),kn(o,n[0].scheme_name),P(te,l,ie),P(te,s,ie),P(te,u,ie),P(te,c,ie),T(c,f),T(f,g),T(f,_),T(f,m),T(c,d),T(c,p),P(te,y,ie),P(te,I,ie),P(te,G,ie),P(te,O,ie),T(O,C),T(C,N),T(C,D),T(O,ce),T(O,z),T(z,le),F||(ne=[$(o,"input",n[5]),$(g,"change",n[3]),$(p,"click",n[2]),$(z,"click",n[1])],F=!0)},p(te,[ie]){ie&1&&o.value!==te[0].scheme_name&&kn(o,te[0].scheme_name),ie&1&&A!==(A=te[0].features.length+"")&&Re(N,A),ie&1&&X!==(X=te[0].features.length==0)&&(z.disabled=X)},i:Te,o:Te,d(te){te&&x(e),te&&x(l),te&&x(s),te&&x(u),te&&x(c),te&&x(y),te&&x(I),te&&x(G),te&&x(O),F=!1,ft(ne)}}}function Mf(n,e){var t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(e)),t.setAttribute("download",n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function Of(n,e,t){let r;Ke(n,je,m=>t(0,r=m));let{authorityName:o}=e,l=window.localStorage.getItem(o);if(l)try{je.set(g(JSON.parse(l)))}catch(m){console.log(`Failed to load from local storage: ${m}`)}function s(){confirm("Do you want to clear the current scheme? (You should save it first!)")&&je.update(m=>(delete m.scheme_name,m.features=[],m))}function u(){const m=JSON.parse(JSON.stringify(r));for(let d of m.features)delete d.properties.editing,delete d.properties.hide_while_editing;return m}function c(){let m=u();var d=o;m.authority=o,m.origin="atip-v1",m.scheme_name&&(d+="_"+m.scheme_name),d+=".txt",Mf(d,JSON.stringify(m,null,"  "))}function f(m){const d=new FileReader;d.onload=p=>{try{je.set(g(JSON.parse(p.target.result)))}catch(y){window.alert(`Couldn't load scheme from a file: ${y}`)}},d.readAsText(m.target.files[0])}function g(m){let d=1;for(let p of m.features)p.geometry.type=="LineString"&&!p.properties.length_meters&&(p.properties.length_meters=Tf(p.geometry,{units:"kilometers"})*1e3),p.id=d++;return m}function _(){r.scheme_name=this.value,je.set(r)}return n.$$set=m=>{"authorityName"in m&&t(4,o=m.authorityName)},n.$$.update=()=>{n.$$.dirty&17&&r&&(console.log("GJ changed, saving to local storage"),window.localStorage.setItem(o,JSON.stringify(u())))},[r,s,c,f,o,_]}class If extends Ce{constructor(e){super(),Me(this,e,Of,Cf,Oe,{authorityName:4})}}const Lf="/atip/draw_v3/assets/zoom_out_map-b2e1091a.svg";function Pf(n){let e,t,r,o,l;return{c(){e=R("button"),t=R("img"),Hs(t.src,r=Lf)||J(t,"src",r),J(t,"alt","Zoom to show entire boundary"),J(e,"type","button"),J(e,"title","Zoom to show entire boundary"),J(e,"class","svelte-qzjsqo")},m(s,u){P(s,e,u),T(e,t),o||(l=$(e,"click",n[0]),o=!0)},p:Te,i:Te,o:Te,d(s){s&&x(e),o=!1,l()}}}function xf(n,e,t){let r;Ke(n,Nt,s=>t(2,r=s));let{boundaryGeojson:o}=e;function l(){r.fitBounds(wi(o),{padding:20,animate:!0,duration:500})}return n.$$set=s=>{"boundaryGeojson"in s&&t(1,o=s.boundaryGeojson)},[l,o]}class Af extends Ce{constructor(e){super(),Me(this,e,xf,Pf,Oe,{boundaryGeojson:1})}}function Nf(n){let e,t,r,o,l,s,u;return{c(){e=R("div"),t=be(`Basemap:
  `),r=R("select"),o=R("option"),o.textContent="Streets",l=R("option"),l.textContent="Satellite",o.__value="streets",o.value=o.__value,l.__value="hybrid",l.value=l.__value,n[0]===void 0&&Zs(()=>n[2].call(r)),J(e,"class","svelte-1tbnm6i")},m(c,f){P(c,e,f),T(e,t),T(e,r),T(r,o),T(r,l),vo(r,n[0]),s||(u=[$(r,"change",n[2]),$(r,"change",n[1])],s=!0)},p(c,[f]){f&1&&vo(r,c[0])},i:Te,o:Te,d(c){c&&x(e),s=!1,ft(u)}}}function Rf(n,e,t){let{style:r}=e;function o(){let s=new URLSearchParams(window.location.search);s.set("style",r);let u=`${window.location.pathname}?${s.toString()}${window.location.hash}`;window.location.href=u}function l(){r=Xs(this),t(0,r)}return n.$$set=s=>{"style"in s&&t(0,r=s.style)},[r,o,l]}class Ff extends Ce{constructor(e){super(),Me(this,e,Rf,Nf,Oe,{style:0})}}const Ct={area:"#e41a1c",route:"#377eb8",crossing:"#4daf4a",other:"#984ea3",hovering:"black"},Bl=10,gi=10;function Df(n){let e,t,r,o,l,s,u,c,f,g,_,m,d,p,y,I,G,O,C;return{c(){e=R("div"),t=R("h1"),t.textContent="Interventions",r=q(),o=R("ul"),l=R("li"),s=R("span"),u=be("Areas"),c=q(),f=R("li"),g=R("span"),_=be("Routes"),m=q(),d=R("li"),p=R("span"),y=be("Crossings"),I=q(),G=R("li"),O=R("span"),C=be("Other"),J(t,"class","svelte-p551i1"),J(s,"class","svelte-p551i1"),fn(s,"background",Ct.area),J(g,"class","svelte-p551i1"),fn(g,"background",Ct.route),J(p,"class","svelte-p551i1"),fn(p,"background",Ct.crossing),J(O,"class","svelte-p551i1"),fn(O,"background",Ct.other),J(e,"class","svelte-p551i1")},m(A,N){P(A,e,N),T(e,t),T(e,r),T(e,o),T(o,l),T(l,s),T(l,u),T(o,c),T(o,f),T(f,g),T(f,_),T(o,m),T(o,d),T(d,p),T(d,y),T(o,I),T(o,G),T(G,O),T(G,C)},p:Te,i:Te,o:Te,d(A){A&&x(e)}}}class Uf extends Ce{constructor(e){super(),Me(this,e,null,Df,Oe,{})}}let jn="interventions";function jf(n,e,t){let r,o;Ke(n,Nt,u=>t(0,r=u)),Ke(n,je,u=>t(1,o=u)),Ti(r,jn,{type:"geojson",data:o});const l=["match",["get","intervention_type"],"area",Ct.area,"route",Ct.route,"crossing",Ct.crossing,"other",Ct.other,"white"],s=["!=","hide_while_editing",!0];return dn(r,{id:"interventions-points",source:jn,filter:["all",Fl,s],...Ul(l,Bl)}),dn(r,{id:"interventions-lines",source:jn,filter:["all",Rl,s],...pi(l,gi)}),dn(r,{id:"interventions-polygons",source:jn,filter:["all",Nl,s],...Dl(l,.5)},"hover-polygons"),n.$$.update=()=>{n.$$.dirty&3&&r.getSource(jn).setData(o)},[r,o]}class Bf extends Ce{constructor(e){super(),Me(this,e,jf,null,Oe,{})}}let En="hover";function Gf(n,e,t){let r,o;return Ke(n,Nt,l=>t(0,r=l)),Ke(n,je,l=>t(1,o=l)),Ti(r,En,{type:"geojson",data:si()}),dn(r,{id:"hover-polygons",source:En,filter:Nl,...pi(Ct.hovering,.5*gi,1)}),dn(r,{id:"hover-lines",source:En,filter:Rl,...pi(Ct.hovering,1.5*gi,1)},"interventions-lines"),dn(r,{id:"hover-points",source:En,filter:Fl,...Ul(Ct.hovering,1.5*Bl,1)},"interventions-points"),kt.subscribe(l=>{l!=null?r.getSource(En).setData(o.features.find(s=>s.id==l)):r.getSource(En).setData(si())}),[]}class zf extends Ce{constructor(e){super(),Me(this,e,Gf,null,Oe,{})}}var mi={},Vf={get exports(){return mi},set exports(n){mi=n}};(function(n,e){(function(t,r){n.exports=r()})(Dn,function(){var t=function(i,a){var h={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},b={on:function(E,w,B){if(h[E]===void 0)throw new Error("Invalid event type: "+E);h[E].push({selector:w,fn:B})},render:function(E){a.store.featureChanged(E)}},v=function(E,w){for(var B=h[E],V=B.length;V--;){var K=B[V];if(K.selector(w)){K.fn.call(b,w)||a.store.render(),a.ui.updateMapClasses();break}}};return i.start.call(b),{render:i.render,stop:function(){i.stop&&i.stop()},trash:function(){i.trash&&(i.trash(),a.store.render())},combineFeatures:function(){i.combineFeatures&&i.combineFeatures()},uncombineFeatures:function(){i.uncombineFeatures&&i.uncombineFeatures()},drag:function(E){v("drag",E)},click:function(E){v("click",E)},mousemove:function(E){v("mousemove",E)},mousedown:function(E){v("mousedown",E)},mouseup:function(E){v("mouseup",E)},mouseout:function(E){v("mouseout",E)},keydown:function(E){v("keydown",E)},keyup:function(E){v("keyup",E)},touchstart:function(E){v("touchstart",E)},touchmove:function(E){v("touchmove",E)},touchend:function(E){v("touchend",E)},tap:function(E){v("tap",E)}}};function r(i){if(i.__esModule)return i;var a=i.default;if(typeof a=="function"){var h=function b(){if(this instanceof b){var v=[null];v.push.apply(v,arguments);var E=Function.bind.apply(a,v);return new E}return a.apply(this,arguments)};h.prototype=a.prototype}else h={};return Object.defineProperty(h,"__esModule",{value:!0}),Object.keys(i).forEach(function(b){var v=Object.getOwnPropertyDescriptor(i,b);Object.defineProperty(h,b,v.get?v:{enumerable:!0,get:function(){return i[b]}})}),h}var o={},l={RADIUS:6378137,FLATTENING:1/298.257223563,POLAR_RADIUS:63567523142e-4},s=l;function u(i){var a=0;if(i&&i.length>0){a+=Math.abs(c(i[0]));for(var h=1;h<i.length;h++)a-=Math.abs(c(i[h]))}return a}function c(i){var a,h,b,v,E,w,B=0,V=i.length;if(V>2){for(w=0;w<V;w++)w===V-2?(b=V-2,v=V-1,E=0):w===V-1?(b=V-1,v=0,E=1):(b=w,v=w+1,E=w+2),a=i[b],h=i[v],B+=(f(i[E][0])-f(a[0]))*Math.sin(f(h[1]));B=B*s.RADIUS*s.RADIUS/2}return B}function f(i){return i*Math.PI/180}o.geometry=function i(a){var h,b=0;switch(a.type){case"Polygon":return u(a.coordinates);case"MultiPolygon":for(h=0;h<a.coordinates.length;h++)b+=u(a.coordinates[h]);return b;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(h=0;h<a.geometries.length;h++)b+=i(a.geometries[h]);return b}},o.ring=c;var g={CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},_={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},m={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},d={POLYGON:"polygon",LINE:"line_string",POINT:"point"},p={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},y={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select",STATIC:"static"},I={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},G={MOVE:"move",CHANGE_COORDINATES:"change_coordinates"},O={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},C={ACTIVE:"true",INACTIVE:"false"},A=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],N=-85,D=Object.freeze({__proto__:null,classes:g,sources:_,cursors:m,types:d,geojsonTypes:p,modes:y,events:I,updateActions:G,meta:O,activeStates:C,interactions:A,LAT_MIN:-90,LAT_RENDERED_MIN:N,LAT_MAX:90,LAT_RENDERED_MAX:85,LNG_MIN:-270,LNG_MAX:270}),ce={Point:0,LineString:1,MultiLineString:1,Polygon:2};function z(i,a){var h=ce[i.geometry.type]-ce[a.geometry.type];return h===0&&i.geometry.type===p.POLYGON?i.area-a.area:h}function le(i){return i.map(function(a){return a.geometry.type===p.POLYGON&&(a.area=o.geometry({type:p.FEATURE,property:{},geometry:a.geometry})),a}).sort(z).map(function(a){return delete a.area,a})}function X(i,a){return a===void 0&&(a=0),[[i.point.x-a,i.point.y-a],[i.point.x+a,i.point.y+a]]}function F(i){if(this._items={},this._nums={},this._length=i?i.length:0,i)for(var a=0,h=i.length;a<h;a++)this.add(i[a]),i[a]!==void 0&&(typeof i[a]=="string"?this._items[i[a]]=a:this._nums[i[a]]=a)}F.prototype.add=function(i){return this.has(i)||(this._length++,typeof i=="string"?this._items[i]=this._length:this._nums[i]=this._length),this},F.prototype.delete=function(i){return this.has(i)===!1||(this._length--,delete this._items[i],delete this._nums[i]),this},F.prototype.has=function(i){return(typeof i=="string"||typeof i=="number")&&(this._items[i]!==void 0||this._nums[i]!==void 0)},F.prototype.values=function(){var i=this,a=[];return Object.keys(this._items).forEach(function(h){a.push({k:h,v:i._items[h]})}),Object.keys(this._nums).forEach(function(h){a.push({k:JSON.parse(h),v:i._nums[h]})}),a.sort(function(h,b){return h.v-b.v}).map(function(h){return h.k})},F.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var ne=[O.FEATURE,O.MIDPOINT,O.VERTEX],te={click:function(i,a,h){return ie(i,a,h,h.options.clickBuffer)},touch:function(i,a,h){return ie(i,a,h,h.options.touchBuffer)}};function ie(i,a,h,b){if(h.map===null)return[];var v=i?X(i,b):a,E={};h.options.styles&&(E.layers=h.options.styles.map(function(K){return K.id}));var w=h.map.queryRenderedFeatures(v,E).filter(function(K){return ne.indexOf(K.properties.meta)!==-1}),B=new F,V=[];return w.forEach(function(K){var Z=K.properties.id;B.has(Z)||(B.add(Z),V.push(K))}),le(V)}function Q(i,a){var h=te.click(i,null,a),b={mouse:m.NONE};return h[0]&&(b.mouse=h[0].properties.active===C.ACTIVE?m.MOVE:m.POINTER,b.feature=h[0].properties.meta),a.events.currentModeName().indexOf("draw")!==-1&&(b.mouse=m.ADD),a.ui.queueMapClasses(b),a.ui.updateMapClasses(),h[0]}function de(i,a){var h=i.x-a.x,b=i.y-a.y;return Math.sqrt(h*h+b*b)}function ke(i,a,h){h===void 0&&(h={});var b=h.fineTolerance!=null?h.fineTolerance:4,v=h.grossTolerance!=null?h.grossTolerance:12,E=h.interval!=null?h.interval:500;i.point=i.point||a.point,i.time=i.time||a.time;var w=de(i.point,a.point);return w<b||w<v&&a.time-i.time<E}function Ie(i,a,h){h===void 0&&(h={});var b=h.tolerance!=null?h.tolerance:25,v=h.interval!=null?h.interval:250;return i.point=i.point||a.point,i.time=i.time||a.time,de(i.point,a.point)<b&&a.time-i.time<v}var Le={},Be={get exports(){return Le},set exports(i){Le=i}}.exports=function(i,a){if(a||(a=16),i===void 0&&(i=128),i<=0)return"0";for(var h=Math.log(Math.pow(2,i))/Math.log(a),b=2;h===1/0;b*=2)h=Math.log(Math.pow(2,i/b))/Math.log(a)*b;var v=h-Math.floor(h),E="";for(b=0;b<Math.floor(h);b++)E=Math.floor(Math.random()*a).toString(a)+E;if(v){var w=Math.pow(a,v);E=Math.floor(Math.random()*w).toString(a)+E}var B=parseInt(E,a);return B!==1/0&&B>=Math.pow(2,i)?Be(i,a):E};Be.rack=function(i,a,h){var b=function(E){var w=0;do{if(w++>10){if(!h)throw new Error("too many ID collisions, use more bits");i+=h}var B=Be(i,a)}while(Object.hasOwnProperty.call(v,B));return v[B]=E,B},v=b.hats={};return b.get=function(E){return b.hats[E]},b.set=function(E,w){return b.hats[E]=w,b},b.bits=i||128,b.base=a||16,b};var ue=function(i,a){this.ctx=i,this.properties=a.properties||{},this.coordinates=a.geometry.coordinates,this.id=a.id||Le(),this.type=a.geometry.type};ue.prototype.changed=function(){this.ctx.store.featureChanged(this.id)},ue.prototype.incomingCoords=function(i){this.setCoordinates(i)},ue.prototype.setCoordinates=function(i){this.coordinates=i,this.changed()},ue.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))},ue.prototype.setProperty=function(i,a){this.properties[i]=a},ue.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:p.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))},ue.prototype.internal=function(i){var a={id:this.id,meta:O.FEATURE,"meta:type":this.type,active:C.INACTIVE,mode:i};if(this.ctx.options.userProperties)for(var h in this.properties)a["user_"+h]=this.properties[h];return{type:p.FEATURE,properties:a,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var M=function(i,a){ue.call(this,i,a)};(M.prototype=Object.create(ue.prototype)).isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"},M.prototype.updateCoordinate=function(i,a,h){this.coordinates=arguments.length===3?[a,h]:[i,a],this.changed()},M.prototype.getCoordinate=function(){return this.getCoordinates()};var pe=function(i,a){ue.call(this,i,a)};(pe.prototype=Object.create(ue.prototype)).isValid=function(){return this.coordinates.length>1},pe.prototype.addCoordinate=function(i,a,h){this.changed();var b=parseInt(i,10);this.coordinates.splice(b,0,[a,h])},pe.prototype.getCoordinate=function(i){var a=parseInt(i,10);return JSON.parse(JSON.stringify(this.coordinates[a]))},pe.prototype.removeCoordinate=function(i){this.changed(),this.coordinates.splice(parseInt(i,10),1)},pe.prototype.updateCoordinate=function(i,a,h){var b=parseInt(i,10);this.coordinates[b]=[a,h],this.changed()};var it=function(i,a){ue.call(this,i,a),this.coordinates=this.coordinates.map(function(h){return h.slice(0,-1)})};(it.prototype=Object.create(ue.prototype)).isValid=function(){return this.coordinates.length!==0&&this.coordinates.every(function(i){return i.length>2})},it.prototype.incomingCoords=function(i){this.coordinates=i.map(function(a){return a.slice(0,-1)}),this.changed()},it.prototype.setCoordinates=function(i){this.coordinates=i,this.changed()},it.prototype.addCoordinate=function(i,a,h){this.changed();var b=i.split(".").map(function(v){return parseInt(v,10)});this.coordinates[b[0]].splice(b[1],0,[a,h])},it.prototype.removeCoordinate=function(i){this.changed();var a=i.split(".").map(function(b){return parseInt(b,10)}),h=this.coordinates[a[0]];h&&(h.splice(a[1],1),h.length<3&&this.coordinates.splice(a[0],1))},it.prototype.getCoordinate=function(i){var a=i.split(".").map(function(b){return parseInt(b,10)}),h=this.coordinates[a[0]];return JSON.parse(JSON.stringify(h[a[1]]))},it.prototype.getCoordinates=function(){return this.coordinates.map(function(i){return i.concat([i[0]])})},it.prototype.updateCoordinate=function(i,a,h){this.changed();var b=i.split("."),v=parseInt(b[0],10),E=parseInt(b[1],10);this.coordinates[v]===void 0&&(this.coordinates[v]=[]),this.coordinates[v][E]=[a,h]};var Cn={MultiPoint:M,MultiLineString:pe,MultiPolygon:it},Mt=function(i,a,h,b,v){var E=h.split("."),w=parseInt(E[0],10),B=E[1]?E.slice(1).join("."):null;return i[w][a](B,b,v)},fe=function(i,a){if(ue.call(this,i,a),delete this.coordinates,this.model=Cn[a.geometry.type],this.model===void 0)throw new TypeError(a.geometry.type+" is not a valid type");this.features=this._coordinatesToFeatures(a.geometry.coordinates)};function oe(i){this.map=i.map,this.drawConfig=JSON.parse(JSON.stringify(i.options||{})),this._ctx=i}(fe.prototype=Object.create(ue.prototype))._coordinatesToFeatures=function(i){var a=this,h=this.model.bind(this);return i.map(function(b){return new h(a.ctx,{id:Le(),type:p.FEATURE,properties:{},geometry:{coordinates:b,type:a.type.replace("Multi","")}})})},fe.prototype.isValid=function(){return this.features.every(function(i){return i.isValid()})},fe.prototype.setCoordinates=function(i){this.features=this._coordinatesToFeatures(i),this.changed()},fe.prototype.getCoordinate=function(i){return Mt(this.features,"getCoordinate",i)},fe.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(function(i){return i.type===p.POLYGON?i.getCoordinates():i.coordinates})))},fe.prototype.updateCoordinate=function(i,a,h){Mt(this.features,"updateCoordinate",i,a,h),this.changed()},fe.prototype.addCoordinate=function(i,a,h){Mt(this.features,"addCoordinate",i,a,h),this.changed()},fe.prototype.removeCoordinate=function(i){Mt(this.features,"removeCoordinate",i),this.changed()},fe.prototype.getFeatures=function(){return this.features},oe.prototype.setSelected=function(i){return this._ctx.store.setSelected(i)},oe.prototype.setSelectedCoordinates=function(i){var a=this;this._ctx.store.setSelectedCoordinates(i),i.reduce(function(h,b){return h[b.feature_id]===void 0&&(h[b.feature_id]=!0,a._ctx.store.get(b.feature_id).changed()),h},{})},oe.prototype.getSelected=function(){return this._ctx.store.getSelected()},oe.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()},oe.prototype.isSelected=function(i){return this._ctx.store.isSelected(i)},oe.prototype.getFeature=function(i){return this._ctx.store.get(i)},oe.prototype.select=function(i){return this._ctx.store.select(i)},oe.prototype.deselect=function(i){return this._ctx.store.deselect(i)},oe.prototype.deleteFeature=function(i,a){return a===void 0&&(a={}),this._ctx.store.delete(i,a)},oe.prototype.addFeature=function(i){return this._ctx.store.add(i)},oe.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()},oe.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()},oe.prototype.setActionableState=function(i){i===void 0&&(i={});var a={trash:i.trash||!1,combineFeatures:i.combineFeatures||!1,uncombineFeatures:i.uncombineFeatures||!1};return this._ctx.events.actionable(a)},oe.prototype.changeMode=function(i,a,h){return a===void 0&&(a={}),h===void 0&&(h={}),this._ctx.events.changeMode(i,a,h)},oe.prototype.updateUIClasses=function(i){return this._ctx.ui.queueMapClasses(i)},oe.prototype.activateUIButton=function(i){return this._ctx.ui.setActiveButton(i)},oe.prototype.featuresAt=function(i,a,h){if(h===void 0&&(h="click"),h!=="click"&&h!=="touch")throw new Error("invalid buffer type");return te[h](i,a,this._ctx)},oe.prototype.newFeature=function(i){var a=i.geometry.type;return a===p.POINT?new M(this._ctx,i):a===p.LINE_STRING?new pe(this._ctx,i):a===p.POLYGON?new it(this._ctx,i):new fe(this._ctx,i)},oe.prototype.isInstanceOf=function(i,a){if(i===p.POINT)return a instanceof M;if(i===p.LINE_STRING)return a instanceof pe;if(i===p.POLYGON)return a instanceof it;if(i==="MultiFeature")return a instanceof fe;throw new Error("Unknown feature class: "+i)},oe.prototype.doRender=function(i){return this._ctx.store.featureChanged(i)},oe.prototype.onSetup=function(){},oe.prototype.onDrag=function(){},oe.prototype.onClick=function(){},oe.prototype.onMouseMove=function(){},oe.prototype.onMouseDown=function(){},oe.prototype.onMouseUp=function(){},oe.prototype.onMouseOut=function(){},oe.prototype.onKeyUp=function(){},oe.prototype.onKeyDown=function(){},oe.prototype.onTouchStart=function(){},oe.prototype.onTouchMove=function(){},oe.prototype.onTouchEnd=function(){},oe.prototype.onTap=function(){},oe.prototype.onStop=function(){},oe.prototype.onTrash=function(){},oe.prototype.onCombineFeature=function(){},oe.prototype.onUncombineFeature=function(){},oe.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var ee={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},Mn=Object.keys(ee);function On(i){var a=Object.keys(i);return function(h,b){b===void 0&&(b={});var v={},E=a.reduce(function(w,B){return w[B]=i[B],w},new oe(h));return{start:function(){var w=this;v=E.onSetup(b),Mn.forEach(function(B){var V,K=ee[B],Z=function(){return!1};i[K]&&(Z=function(){return!0}),w.on(B,Z,(V=K,function(W){return E[V](v,W)}))})},stop:function(){E.onStop(v)},trash:function(){E.onTrash(v)},combineFeatures:function(){E.onCombineFeatures(v)},uncombineFeatures:function(){E.onUncombineFeatures(v)},render:function(w,B){E.toDisplayFeatures(v,w,B)}}}}function Et(i){return[].concat(i).filter(function(a){return a!==void 0})}function Jl(){var i=this;if(!(i.ctx.map&&i.ctx.map.getSource(_.HOT)!==void 0))return V();var a=i.ctx.events.currentModeName();i.ctx.ui.queueMapClasses({mode:a});var h=[],b=[];i.isDirty?b=i.getAllIds():(h=i.getChangedIds().filter(function(K){return i.get(K)!==void 0}),b=i.sources.hot.filter(function(K){return K.properties.id&&h.indexOf(K.properties.id)===-1&&i.get(K.properties.id)!==void 0}).map(function(K){return K.properties.id})),i.sources.hot=[];var v=i.sources.cold.length;i.sources.cold=i.isDirty?[]:i.sources.cold.filter(function(K){var Z=K.properties.id||K.properties.parent;return h.indexOf(Z)===-1});var E=v!==i.sources.cold.length||b.length>0;function w(K,Z){var W=i.get(K).internal(a);i.ctx.events.currentModeRender(W,function(he){i.sources[Z].push(he)})}if(h.forEach(function(K){return w(K,"hot")}),b.forEach(function(K){return w(K,"cold")}),E&&i.ctx.map.getSource(_.COLD).setData({type:p.FEATURE_COLLECTION,features:i.sources.cold}),i.ctx.map.getSource(_.HOT).setData({type:p.FEATURE_COLLECTION,features:i.sources.hot}),i._emitSelectionChange&&(i.ctx.map.fire(I.SELECTION_CHANGE,{features:i.getSelected().map(function(K){return K.toGeoJSON()}),points:i.getSelectedCoordinates().map(function(K){return{type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:K.coordinates}}})}),i._emitSelectionChange=!1),i._deletedFeaturesToEmit.length){var B=i._deletedFeaturesToEmit.map(function(K){return K.toGeoJSON()});i._deletedFeaturesToEmit=[],i.ctx.map.fire(I.DELETE,{features:B})}function V(){i.isDirty=!1,i.clearChangedIds()}V(),i.ctx.map.fire(I.RENDER,{})}function Fe(i){var a,h=this;this._features={},this._featureIds=new F,this._selectedFeatureIds=new F,this._selectedCoordinates=[],this._changedFeatureIds=new F,this._deletedFeaturesToEmit=[],this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=i,this.sources={hot:[],cold:[]},this.render=function(){a||(a=requestAnimationFrame(function(){a=null,Jl.call(h)}))},this.isDirty=!1}function Ci(i,a){var h=i._selectedCoordinates.filter(function(b){return i._selectedFeatureIds.has(b.feature_id)});i._selectedCoordinates.length===h.length||a.silent||(i._emitSelectionChange=!0),i._selectedCoordinates=h}Fe.prototype.createRenderBatch=function(){var i=this,a=this.render,h=0;return this.render=function(){h++},function(){i.render=a,h>0&&i.render()}},Fe.prototype.setDirty=function(){return this.isDirty=!0,this},Fe.prototype.featureChanged=function(i){return this._changedFeatureIds.add(i),this},Fe.prototype.getChangedIds=function(){return this._changedFeatureIds.values()},Fe.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this},Fe.prototype.getAllIds=function(){return this._featureIds.values()},Fe.prototype.add=function(i){return this.featureChanged(i.id),this._features[i.id]=i,this._featureIds.add(i.id),this},Fe.prototype.delete=function(i,a){var h=this;return a===void 0&&(a={}),Et(i).forEach(function(b){h._featureIds.has(b)&&(h._featureIds.delete(b),h._selectedFeatureIds.delete(b),a.silent||h._deletedFeaturesToEmit.indexOf(h._features[b])===-1&&h._deletedFeaturesToEmit.push(h._features[b]),delete h._features[b],h.isDirty=!0)}),Ci(this,a),this},Fe.prototype.get=function(i){return this._features[i]},Fe.prototype.getAll=function(){var i=this;return Object.keys(this._features).map(function(a){return i._features[a]})},Fe.prototype.select=function(i,a){var h=this;return a===void 0&&(a={}),Et(i).forEach(function(b){h._selectedFeatureIds.has(b)||(h._selectedFeatureIds.add(b),h._changedFeatureIds.add(b),a.silent||(h._emitSelectionChange=!0))}),this},Fe.prototype.deselect=function(i,a){var h=this;return a===void 0&&(a={}),Et(i).forEach(function(b){h._selectedFeatureIds.has(b)&&(h._selectedFeatureIds.delete(b),h._changedFeatureIds.add(b),a.silent||(h._emitSelectionChange=!0))}),Ci(this,a),this},Fe.prototype.clearSelected=function(i){return i===void 0&&(i={}),this.deselect(this._selectedFeatureIds.values(),{silent:i.silent}),this},Fe.prototype.setSelected=function(i,a){var h=this;return a===void 0&&(a={}),i=Et(i),this.deselect(this._selectedFeatureIds.values().filter(function(b){return i.indexOf(b)===-1}),{silent:a.silent}),this.select(i.filter(function(b){return!h._selectedFeatureIds.has(b)}),{silent:a.silent}),this},Fe.prototype.setSelectedCoordinates=function(i){return this._selectedCoordinates=i,this._emitSelectionChange=!0,this},Fe.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this},Fe.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()},Fe.prototype.getSelected=function(){var i=this;return this._selectedFeatureIds.values().map(function(a){return i.get(a)})},Fe.prototype.getSelectedCoordinates=function(){var i=this;return this._selectedCoordinates.map(function(a){return{coordinates:i.get(a.feature_id).getCoordinate(a.coord_path)}})},Fe.prototype.isSelected=function(i){return this._selectedFeatureIds.has(i)},Fe.prototype.setFeatureProperty=function(i,a,h){this.get(i).setProperty(a,h),this.featureChanged(i)},Fe.prototype.storeMapConfig=function(){var i=this;A.forEach(function(a){i.ctx.map[a]&&(i._mapInitialConfig[a]=i.ctx.map[a].isEnabled())})},Fe.prototype.restoreMapConfig=function(){var i=this;Object.keys(this._mapInitialConfig).forEach(function(a){i._mapInitialConfig[a]?i.ctx.map[a].enable():i.ctx.map[a].disable()})},Fe.prototype.getInitialConfigValue=function(i){return this._mapInitialConfig[i]===void 0||this._mapInitialConfig[i]};var zt=function(){for(var i=arguments,a={},h=0;h<arguments.length;h++){var b=i[h];for(var v in b)Yl.call(b,v)&&(a[v]=b[v])}return a},Yl=Object.prototype.hasOwnProperty,Wl=["mode","feature","mouse"];function Hl(i){var a=null,h=null,b={onRemove:function(){return i.map.off("load",b.connect),clearInterval(h),b.removeLayers(),i.store.restoreMapConfig(),i.ui.removeButtons(),i.events.removeEventListeners(),i.ui.clearMapClasses(),i.map=null,i.container=null,i.store=null,a&&a.parentNode&&a.parentNode.removeChild(a),a=null,this},connect:function(){i.map.off("load",b.connect),clearInterval(h),b.addLayers(),i.store.storeMapConfig(),i.events.addEventListeners()},onAdd:function(v){var E=v.fire;return v.fire=function(w,B){var V=arguments;return E.length===1&&arguments.length!==1&&(V=[zt({},{type:w},B)]),E.apply(v,V)},i.map=v,i.events=function(w){var B=Object.keys(w.options.modes).reduce(function(U,re){return U[re]=On(w.options.modes[re]),U},{}),V={},K={},Z={},W=null,he=null;Z.drag=function(U,re){re({point:U.point,time:new Date().getTime()})?(w.ui.queueMapClasses({mouse:m.DRAG}),he.drag(U)):U.originalEvent.stopPropagation()},Z.mousedrag=function(U){Z.drag(U,function(re){return!ke(V,re)})},Z.touchdrag=function(U){Z.drag(U,function(re){return!Ie(K,re)})},Z.mousemove=function(U){if((U.originalEvent.buttons!==void 0?U.originalEvent.buttons:U.originalEvent.which)===1)return Z.mousedrag(U);var re=Q(U,w);U.featureTarget=re,he.mousemove(U)},Z.mousedown=function(U){V={time:new Date().getTime(),point:U.point};var re=Q(U,w);U.featureTarget=re,he.mousedown(U)},Z.mouseup=function(U){var re=Q(U,w);U.featureTarget=re,ke(V,{point:U.point,time:new Date().getTime()})?he.click(U):he.mouseup(U)},Z.mouseout=function(U){he.mouseout(U)},Z.touchstart=function(U){if(U.originalEvent.preventDefault(),w.options.touchEnabled){K={time:new Date().getTime(),point:U.point};var re=te.touch(U,null,w)[0];U.featureTarget=re,he.touchstart(U)}},Z.touchmove=function(U){if(U.originalEvent.preventDefault(),w.options.touchEnabled)return he.touchmove(U),Z.touchdrag(U)},Z.touchend=function(U){if(U.originalEvent.preventDefault(),w.options.touchEnabled){var re=te.touch(U,null,w)[0];U.featureTarget=re,Ie(K,{time:new Date().getTime(),point:U.point})?he.tap(U):he.touchend(U)}};var ze=function(U){return!(U===8||U===46||U>=48&&U<=57)};function ve(U,re,Pe){Pe===void 0&&(Pe={}),he.stop();var Qe=B[U];if(Qe===void 0)throw new Error(U+" is not valid");W=U;var Je=Qe(w,re);he=t(Je,w),Pe.silent||w.map.fire(I.MODE_CHANGE,{mode:U}),w.store.setDirty(),w.store.render()}Z.keydown=function(U){(U.srcElement||U.target).classList[0]==="mapboxgl-canvas"&&(U.keyCode!==8&&U.keyCode!==46||!w.options.controls.trash?ze(U.keyCode)?he.keydown(U):U.keyCode===49&&w.options.controls.point?ve(y.DRAW_POINT):U.keyCode===50&&w.options.controls.line_string?ve(y.DRAW_LINE_STRING):U.keyCode===51&&w.options.controls.polygon&&ve(y.DRAW_POLYGON):(U.preventDefault(),he.trash()))},Z.keyup=function(U){ze(U.keyCode)&&he.keyup(U)},Z.zoomend=function(){w.store.changeZoom()},Z.data=function(U){if(U.dataType==="style"){var re=w.setup,Pe=w.map,Qe=w.options,Je=w.store;Qe.styles.some(function(Vr){return Pe.getLayer(Vr.id)})||(re.addLayers(),Je.setDirty(),Je.render())}};var qe={trash:!1,combineFeatures:!1,uncombineFeatures:!1};return{start:function(){W=w.options.defaultMode,he=t(B[W](w),w)},changeMode:ve,actionable:function(U){var re=!1;Object.keys(U).forEach(function(Pe){if(qe[Pe]===void 0)throw new Error("Invalid action type");qe[Pe]!==U[Pe]&&(re=!0),qe[Pe]=U[Pe]}),re&&w.map.fire(I.ACTIONABLE,{actions:qe})},currentModeName:function(){return W},currentModeRender:function(U,re){return he.render(U,re)},fire:function(U,re){Z[U]&&Z[U](re)},addEventListeners:function(){w.map.on("mousemove",Z.mousemove),w.map.on("mousedown",Z.mousedown),w.map.on("mouseup",Z.mouseup),w.map.on("data",Z.data),w.map.on("touchmove",Z.touchmove),w.map.on("touchstart",Z.touchstart),w.map.on("touchend",Z.touchend),w.container.addEventListener("mouseout",Z.mouseout),w.options.keybindings&&(w.container.addEventListener("keydown",Z.keydown),w.container.addEventListener("keyup",Z.keyup))},removeEventListeners:function(){w.map.off("mousemove",Z.mousemove),w.map.off("mousedown",Z.mousedown),w.map.off("mouseup",Z.mouseup),w.map.off("data",Z.data),w.map.off("touchmove",Z.touchmove),w.map.off("touchstart",Z.touchstart),w.map.off("touchend",Z.touchend),w.container.removeEventListener("mouseout",Z.mouseout),w.options.keybindings&&(w.container.removeEventListener("keydown",Z.keydown),w.container.removeEventListener("keyup",Z.keyup))},trash:function(U){he.trash(U)},combineFeatures:function(){he.combineFeatures()},uncombineFeatures:function(){he.uncombineFeatures()},getMode:function(){return W}}}(i),i.ui=function(w){var B={},V=null,K={mode:null,feature:null,mouse:null},Z={mode:null,feature:null,mouse:null};function W(U){Z=zt(Z,U)}function he(){var U,re;if(w.container){var Pe=[],Qe=[];Wl.forEach(function(Je){Z[Je]!==K[Je]&&(Pe.push(Je+"-"+K[Je]),Z[Je]!==null&&Qe.push(Je+"-"+Z[Je]))}),Pe.length>0&&(U=w.container.classList).remove.apply(U,Pe),Qe.length>0&&(re=w.container.classList).add.apply(re,Qe),K=zt(K,Z)}}function ze(U,re){re===void 0&&(re={});var Pe=document.createElement("button");return Pe.className=g.CONTROL_BUTTON+" "+re.className,Pe.setAttribute("title",re.title),re.container.appendChild(Pe),Pe.addEventListener("click",function(Qe){if(Qe.preventDefault(),Qe.stopPropagation(),Qe.target===V)return ve(),void re.onDeactivate();qe(U),re.onActivate()},!0),Pe}function ve(){V&&(V.classList.remove(g.ACTIVE_BUTTON),V=null)}function qe(U){ve();var re=B[U];re&&re&&U!=="trash"&&(re.classList.add(g.ACTIVE_BUTTON),V=re)}return{setActiveButton:qe,queueMapClasses:W,updateMapClasses:he,clearMapClasses:function(){W({mode:null,feature:null,mouse:null}),he()},addButtons:function(){var U=w.options.controls,re=document.createElement("div");return re.className=g.CONTROL_GROUP+" "+g.CONTROL_BASE,U&&(U[d.LINE]&&(B[d.LINE]=ze(d.LINE,{container:re,className:g.CONTROL_BUTTON_LINE,title:"LineString tool "+(w.options.keybindings?"(l)":""),onActivate:function(){return w.events.changeMode(y.DRAW_LINE_STRING)},onDeactivate:function(){return w.events.trash()}})),U[d.POLYGON]&&(B[d.POLYGON]=ze(d.POLYGON,{container:re,className:g.CONTROL_BUTTON_POLYGON,title:"Polygon tool "+(w.options.keybindings?"(p)":""),onActivate:function(){return w.events.changeMode(y.DRAW_POLYGON)},onDeactivate:function(){return w.events.trash()}})),U[d.POINT]&&(B[d.POINT]=ze(d.POINT,{container:re,className:g.CONTROL_BUTTON_POINT,title:"Marker tool "+(w.options.keybindings?"(m)":""),onActivate:function(){return w.events.changeMode(y.DRAW_POINT)},onDeactivate:function(){return w.events.trash()}})),U.trash&&(B.trash=ze("trash",{container:re,className:g.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:function(){w.events.trash()}})),U.combine_features&&(B.combine_features=ze("combineFeatures",{container:re,className:g.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:function(){w.events.combineFeatures()}})),U.uncombine_features&&(B.uncombine_features=ze("uncombineFeatures",{container:re,className:g.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:function(){w.events.uncombineFeatures()}}))),re},removeButtons:function(){Object.keys(B).forEach(function(U){var re=B[U];re.parentNode&&re.parentNode.removeChild(re),delete B[U]})}}}(i),i.container=v.getContainer(),i.store=new Fe(i),a=i.ui.addButtons(),i.options.boxSelect&&(v.boxZoom.disable(),v.dragPan.disable(),v.dragPan.enable()),v.loaded()?b.connect():(v.on("load",b.connect),h=setInterval(function(){v.loaded()&&b.connect()},16)),i.events.start(),a},addLayers:function(){i.map.addSource(_.COLD,{data:{type:p.FEATURE_COLLECTION,features:[]},type:"geojson"}),i.map.addSource(_.HOT,{data:{type:p.FEATURE_COLLECTION,features:[]},type:"geojson"}),i.options.styles.forEach(function(v){i.map.addLayer(v)}),i.store.setDirty(!0),i.store.render()},removeLayers:function(){i.options.styles.forEach(function(v){i.map.getLayer(v.id)&&i.map.removeLayer(v.id)}),i.map.getSource(_.COLD)&&i.map.removeSource(_.COLD),i.map.getSource(_.HOT)&&i.map.removeSource(_.HOT)}};return i.setup=b,b}var Mi=[{id:"gl-draw-polygon-fill-inactive",type:"fill",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],paint:{"fill-color":"#3bb2d0","fill-outline-color":"#3bb2d0","fill-opacity":.1}},{id:"gl-draw-polygon-fill-active",type:"fill",filter:["all",["==","active","true"],["==","$type","Polygon"]],paint:{"fill-color":"#fbb03b","fill-outline-color":"#fbb03b","fill-opacity":.1}},{id:"gl-draw-polygon-midpoint",type:"circle",filter:["all",["==","$type","Point"],["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-stroke-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","Polygon"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-polygon-stroke-active",type:"line",filter:["all",["==","active","true"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-line-inactive",type:"line",filter:["all",["==","active","false"],["==","$type","LineString"],["!=","mode","static"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#3bb2d0","line-width":2}},{id:"gl-draw-line-active",type:"line",filter:["all",["==","$type","LineString"],["==","active","true"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#fbb03b","line-dasharray":[.2,2],"line-width":2}},{id:"gl-draw-polygon-and-line-vertex-stroke-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-color":"#fff"}},{id:"gl-draw-polygon-and-line-vertex-inactive",type:"circle",filter:["all",["==","meta","vertex"],["==","$type","Point"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#fbb03b"}},{id:"gl-draw-point-point-stroke-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":5,"circle-opacity":1,"circle-color":"#fff"}},{id:"gl-draw-point-inactive",type:"circle",filter:["all",["==","active","false"],["==","$type","Point"],["==","meta","feature"],["!=","mode","static"]],paint:{"circle-radius":3,"circle-color":"#3bb2d0"}},{id:"gl-draw-point-stroke-active",type:"circle",filter:["all",["==","$type","Point"],["==","active","true"],["!=","meta","midpoint"]],paint:{"circle-radius":7,"circle-color":"#fff"}},{id:"gl-draw-point-active",type:"circle",filter:["all",["==","$type","Point"],["!=","meta","midpoint"],["==","active","true"]],paint:{"circle-radius":5,"circle-color":"#fbb03b"}},{id:"gl-draw-polygon-fill-static",type:"fill",filter:["all",["==","mode","static"],["==","$type","Polygon"]],paint:{"fill-color":"#404040","fill-outline-color":"#404040","fill-opacity":.1}},{id:"gl-draw-polygon-stroke-static",type:"line",filter:["all",["==","mode","static"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-line-static",type:"line",filter:["all",["==","mode","static"],["==","$type","LineString"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"#404040","line-width":2}},{id:"gl-draw-point-static",type:"circle",filter:["all",["==","mode","static"],["==","$type","Point"]],paint:{"circle-radius":5,"circle-color":"#404040"}}];function Wn(i){return function(a){var h=a.featureTarget;return!!h&&!!h.properties&&h.properties.meta===i}}function Oi(i){return!!i.originalEvent&&!!i.originalEvent.shiftKey&&i.originalEvent.button===0}function tn(i){return!!i.featureTarget&&!!i.featureTarget.properties&&i.featureTarget.properties.active===C.ACTIVE&&i.featureTarget.properties.meta===O.FEATURE}function Dr(i){return!!i.featureTarget&&!!i.featureTarget.properties&&i.featureTarget.properties.active===C.INACTIVE&&i.featureTarget.properties.meta===O.FEATURE}function Hn(i){return i.featureTarget===void 0}function Ii(i){return!!i.featureTarget&&!!i.featureTarget.properties&&i.featureTarget.properties.meta===O.FEATURE}function In(i){var a=i.featureTarget;return!!a&&!!a.properties&&a.properties.meta===O.VERTEX}function Zn(i){return!!i.originalEvent&&i.originalEvent.shiftKey===!0}function Xn(i){return i.keyCode===27}function Kn(i){return i.keyCode===13}var Zl=Object.freeze({__proto__:null,isOfMetaType:Wn,isShiftMousedown:Oi,isActiveFeature:tn,isInactiveFeature:Dr,noTarget:Hn,isFeature:Ii,isVertex:In,isShiftDown:Zn,isEscapeKey:Xn,isEnterKey:Kn,isTrue:function(){return!0}}),Xl=pn;function pn(i,a){this.x=i,this.y=a}function Ur(i,a){var h=a.getBoundingClientRect();return new Xl(i.clientX-h.left-(a.clientLeft||0),i.clientY-h.top-(a.clientTop||0))}function gn(i,a,h,b){return{type:p.FEATURE,properties:{meta:O.VERTEX,parent:i,coord_path:h,active:b?C.ACTIVE:C.INACTIVE},geometry:{type:p.POINT,coordinates:a}}}function Li(i,a,h){var b=a.geometry.coordinates,v=h.geometry.coordinates;if(b[1]>85||b[1]<N||v[1]>85||v[1]<N)return null;var E={lng:(b[0]+v[0])/2,lat:(b[1]+v[1])/2};return{type:p.FEATURE,properties:{meta:O.MIDPOINT,parent:i,lng:E.lng,lat:E.lat,coord_path:h.properties.coord_path},geometry:{type:p.POINT,coordinates:[E.lng,E.lat]}}}function Qn(i,a,h){a===void 0&&(a={}),h===void 0&&(h=null);var b,v=i.geometry,E=v.type,w=v.coordinates,B=i.properties&&i.properties.id,V=[];function K(W,he){var ze="",ve=null;W.forEach(function(qe,U){var re=he!=null?he+"."+U:String(U),Pe=gn(B,qe,re,Z(re));if(a.midpoints&&ve){var Qe=Li(B,ve,Pe);Qe&&V.push(Qe)}ve=Pe;var Je=JSON.stringify(qe);ze!==Je&&V.push(Pe),U===0&&(ze=Je)})}function Z(W){return!!a.selectedPaths&&a.selectedPaths.indexOf(W)!==-1}return E===p.POINT?V.push(gn(B,w,h,Z(h))):E===p.POLYGON?w.forEach(function(W,he){K(W,h!==null?h+"."+he:String(he))}):E===p.LINE_STRING?K(w,h):E.indexOf(p.MULTI_PREFIX)===0&&(b=E.replace(p.MULTI_PREFIX,""),w.forEach(function(W,he){var ze={type:p.FEATURE,properties:i.properties,geometry:{type:b,coordinates:W}};V=V.concat(Qn(ze,a,he))})),V}pn.prototype={clone:function(){return new pn(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,a){return this.clone()._rotateAround(i,a)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var a=i.x-this.x,h=i.y-this.y;return a*a+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,a){return Math.atan2(this.x*a-this.y*i,this.x*i+this.y*a)},_matMult:function(i){var a=i[0]*this.x+i[1]*this.y,h=i[2]*this.x+i[3]*this.y;return this.x=a,this.y=h,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var a=Math.cos(i),h=Math.sin(i),b=a*this.x-h*this.y,v=h*this.x+a*this.y;return this.x=b,this.y=v,this},_rotateAround:function(i,a){var h=Math.cos(i),b=Math.sin(i),v=a.x+h*(this.x-a.x)-b*(this.y-a.y),E=a.y+b*(this.x-a.x)+h*(this.y-a.y);return this.x=v,this.y=E,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},pn.convert=function(i){return i instanceof pn?i:Array.isArray(i)?new pn(i[0],i[1]):i};var wt={enable:function(i){setTimeout(function(){i.map&&i.map.doubleClickZoom&&i._ctx&&i._ctx.store&&i._ctx.store.getInitialConfigValue&&i._ctx.store.getInitialConfigValue("doubleClickZoom")&&i.map.doubleClickZoom.enable()},0)},disable:function(i){setTimeout(function(){i.map&&i.map.doubleClickZoom&&i.map.doubleClickZoom.disable()},0)}},Ln={},Kl={get exports(){return Ln},set exports(i){Ln=i}},Pi=function(i){if(!i||!i.type)return null;var a=Ql[i.type];if(!a)return null;if(a==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:i}]};if(a==="feature")return{type:"FeatureCollection",features:[i]};if(a==="featurecollection")return i},Ql={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"},$l=Object.freeze({__proto__:null,default:function i(a){switch(a&&a.type||null){case"FeatureCollection":return a.features=a.features.reduce(function(h,b){return h.concat(i(b))},[]),a;case"Feature":return a.geometry?i(a.geometry).map(function(h){var b={type:"Feature",properties:JSON.parse(JSON.stringify(a.properties)),geometry:h};return a.id!==void 0&&(b.id=a.id),b}):[a];case"MultiPoint":return a.coordinates.map(function(h){return{type:"Point",coordinates:h}});case"MultiPolygon":return a.coordinates.map(function(h){return{type:"Polygon",coordinates:h}});case"MultiLineString":return a.coordinates.map(function(h){return{type:"LineString",coordinates:h}});case"GeometryCollection":return a.geometries.map(i).reduce(function(h,b){return h.concat(b)},[]);case"Point":case"Polygon":case"LineString":return[a]}}}),es=Pi,$n=r($l),ts=function(i){return function a(h){return Array.isArray(h)&&h.length&&typeof h[0]=="number"?[h]:h.reduce(function(b,v){return Array.isArray(v)&&Array.isArray(v[0])?b.concat(a(v)):(b.push(v),b)},[])}(i)};$n instanceof Function||($n=$n.default);var jr={},ns={get exports(){return jr},set exports(i){jr=i}}.exports=function(i){return new mt(i)};function mt(i){this.value=i}function xi(i,a,h){var b=[],v=[],E=!0;return function w(B){var V=h?Ai(B):B,K={},Z=!0,W={node:V,node_:B,path:[].concat(b),parent:v[v.length-1],parents:v,key:b.slice(-1)[0],isRoot:b.length===0,level:b.length,circular:null,update:function(ve,qe){W.isRoot||(W.parent.node[W.key]=ve),W.node=ve,qe&&(Z=!1)},delete:function(ve){delete W.parent.node[W.key],ve&&(Z=!1)},remove:function(ve){Ni(W.parent.node)?W.parent.node.splice(W.key,1):delete W.parent.node[W.key],ve&&(Z=!1)},keys:null,before:function(ve){K.before=ve},after:function(ve){K.after=ve},pre:function(ve){K.pre=ve},post:function(ve){K.post=ve},stop:function(){E=!1},block:function(){Z=!1}};if(!E)return W;function he(){if(typeof W.node=="object"&&W.node!==null){W.keys&&W.node_===W.node||(W.keys=er(W.node)),W.isLeaf=W.keys.length==0;for(var ve=0;ve<v.length;ve++)if(v[ve].node_===B){W.circular=v[ve];break}}else W.isLeaf=!0,W.keys=null;W.notLeaf=!W.isLeaf,W.notRoot=!W.isRoot}he();var ze=a.call(W,W.node);return ze!==void 0&&W.update&&W.update(ze),K.before&&K.before.call(W,W.node),Z&&(typeof W.node!="object"||W.node===null||W.circular||(v.push(W),he(),tr(W.keys,function(ve,qe){b.push(ve),K.pre&&K.pre.call(W,W.node[ve],ve);var U=w(W.node[ve]);h&&nr.call(W.node,ve)&&(W.node[ve]=U.node),U.isLast=qe==W.keys.length-1,U.isFirst=qe==0,K.post&&K.post.call(W,U),b.pop()}),v.pop()),K.after&&K.after.call(W,W.node)),W}(i).node}function Ai(i){if(typeof i=="object"&&i!==null){var a;if(Ni(i))a=[];else if(mn(i)==="[object Date]")a=new Date(i.getTime?i.getTime():i);else if(function(v){return mn(v)==="[object RegExp]"}(i))a=new RegExp(i);else if(function(v){return mn(v)==="[object Error]"}(i))a={message:i.message};else if(function(v){return mn(v)==="[object Boolean]"}(i))a=new Boolean(i);else if(function(v){return mn(v)==="[object Number]"}(i))a=new Number(i);else if(function(v){return mn(v)==="[object String]"}(i))a=new String(i);else if(Object.create&&Object.getPrototypeOf)a=Object.create(Object.getPrototypeOf(i));else if(i.constructor===Object)a={};else{var h=i.constructor&&i.constructor.prototype||i.__proto__||{},b=function(){};b.prototype=h,a=new b}return tr(er(i),function(v){a[v]=i[v]}),a}return i}mt.prototype.get=function(i){for(var a=this.value,h=0;h<i.length;h++){var b=i[h];if(!a||!nr.call(a,b)){a=void 0;break}a=a[b]}return a},mt.prototype.has=function(i){for(var a=this.value,h=0;h<i.length;h++){var b=i[h];if(!a||!nr.call(a,b))return!1;a=a[b]}return!0},mt.prototype.set=function(i,a){for(var h=this.value,b=0;b<i.length-1;b++){var v=i[b];nr.call(h,v)||(h[v]={}),h=h[v]}return h[i[b]]=a,a},mt.prototype.map=function(i){return xi(this.value,i,!0)},mt.prototype.forEach=function(i){return this.value=xi(this.value,i,!1),this.value},mt.prototype.reduce=function(i,a){var h=arguments.length===1,b=h?this.value:a;return this.forEach(function(v){this.isRoot&&h||(b=i.call(this,b,v))}),b},mt.prototype.paths=function(){var i=[];return this.forEach(function(a){i.push(this.path)}),i},mt.prototype.nodes=function(){var i=[];return this.forEach(function(a){i.push(this.node)}),i},mt.prototype.clone=function(){var i=[],a=[];return function h(b){for(var v=0;v<i.length;v++)if(i[v]===b)return a[v];if(typeof b=="object"&&b!==null){var E=Ai(b);return i.push(b),a.push(E),tr(er(b),function(w){E[w]=h(b[w])}),i.pop(),a.pop(),E}return b}(this.value)};var er=Object.keys||function(i){var a=[];for(var h in i)a.push(h);return a};function mn(i){return Object.prototype.toString.call(i)}var Ni=Array.isArray||function(i){return Object.prototype.toString.call(i)==="[object Array]"},tr=function(i,a){if(i.forEach)return i.forEach(a);for(var h=0;h<i.length;h++)a(i[h],h,i)};tr(er(mt.prototype),function(i){ns[i]=function(a){var h=[].slice.call(arguments,1),b=new mt(a);return b[i].apply(b,h)}});var nr=Object.hasOwnProperty||function(i,a){return a in i},rs=ot;function ot(i){if(!(this instanceof ot))return new ot(i);this._bbox=i||[1/0,1/0,-1/0,-1/0],this._valid=!!i}ot.prototype.include=function(i){return this._valid=!0,this._bbox[0]=Math.min(this._bbox[0],i[0]),this._bbox[1]=Math.min(this._bbox[1],i[1]),this._bbox[2]=Math.max(this._bbox[2],i[0]),this._bbox[3]=Math.max(this._bbox[3],i[1]),this},ot.prototype.equals=function(i){var a;return a=i instanceof ot?i.bbox():i,this._bbox[0]==a[0]&&this._bbox[1]==a[1]&&this._bbox[2]==a[2]&&this._bbox[3]==a[3]},ot.prototype.center=function(i){return this._valid?[(this._bbox[0]+this._bbox[2])/2,(this._bbox[1]+this._bbox[3])/2]:null},ot.prototype.union=function(i){var a;return this._valid=!0,a=i instanceof ot?i.bbox():i,this._bbox[0]=Math.min(this._bbox[0],a[0]),this._bbox[1]=Math.min(this._bbox[1],a[1]),this._bbox[2]=Math.max(this._bbox[2],a[2]),this._bbox[3]=Math.max(this._bbox[3],a[3]),this},ot.prototype.bbox=function(){return this._valid?this._bbox:null},ot.prototype.contains=function(i){if(!i)return this._fastContains();if(!this._valid)return null;var a=i[0],h=i[1];return this._bbox[0]<=a&&this._bbox[1]<=h&&this._bbox[2]>=a&&this._bbox[3]>=h},ot.prototype.intersect=function(i){return this._valid?(a=i instanceof ot?i.bbox():i,!(this._bbox[0]>a[2]||this._bbox[2]<a[0]||this._bbox[3]<a[1]||this._bbox[1]>a[3])):null;var a},ot.prototype._fastContains=function(){if(!this._valid)return new Function("return null;");var i="return "+this._bbox[0]+"<= ll[0] &&"+this._bbox[1]+"<= ll[1] &&"+this._bbox[2]+">= ll[0] &&"+this._bbox[3]+">= ll[1]";return new Function("ll",i)},ot.prototype.polygon=function(){return this._valid?{type:"Polygon",coordinates:[[[this._bbox[0],this._bbox[1]],[this._bbox[2],this._bbox[1]],[this._bbox[2],this._bbox[3]],[this._bbox[0],this._bbox[3]],[this._bbox[0],this._bbox[1]]]]}:null};var is=function(i){if(!i)return[];var a=$n(es(i)),h=[];return a.features.forEach(function(b){b.geometry&&(h=h.concat(ts(b.geometry.coordinates)))}),h},os=jr,ls=rs,Ri={features:["FeatureCollection"],coordinates:["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon"],geometry:["Feature"],geometries:["GeometryCollection"]},ss=Object.keys(Ri);function Br(i){for(var a=ls(),h=is(i),b=0;b<h.length;b++)a.include(h[b]);return a}Kl.exports=function(i){return Br(i).bbox()},Ln.polygon=function(i){return Br(i).polygon()},Ln.bboxify=function(i){return os(i).map(function(a){a&&ss.some(function(h){return!!a[h]&&Ri[h].indexOf(a.type)!==-1})&&(a.bbox=Br(a).bbox(),this.update(a))})};var rr=-90;function Gr(i,a){var h=rr,b=90,v=rr,E=90,w=270,B=-270;i.forEach(function(K){var Z=Ln(K),W=Z[1],he=Z[3],ze=Z[0],ve=Z[2];W>h&&(h=W),he<b&&(b=he),he>v&&(v=he),W<E&&(E=W),ze<w&&(w=ze),ve>B&&(B=ve)});var V=a;return h+V.lat>85&&(V.lat=85-h),v+V.lat>90&&(V.lat=90-v),b+V.lat<-85&&(V.lat=-85-b),E+V.lat<rr&&(V.lat=rr-E),w+V.lng<=-270&&(V.lng+=360*Math.ceil(Math.abs(V.lng)/360)),B+V.lng>=270&&(V.lng-=360*Math.ceil(Math.abs(V.lng)/360)),V}function zr(i,a){var h=Gr(i.map(function(b){return b.toGeoJSON()}),a);i.forEach(function(b){var v,E=b.getCoordinates(),w=function(V){var K={lng:V[0]+h.lng,lat:V[1]+h.lat};return[K.lng,K.lat]},B=function(V){return V.map(function(K){return w(K)})};b.type===p.POINT?v=w(E):b.type===p.LINE_STRING||b.type===p.MULTI_POINT?v=E.map(w):b.type===p.POLYGON||b.type===p.MULTI_LINE_STRING?v=E.map(B):b.type===p.MULTI_POLYGON&&(v=E.map(function(V){return V.map(function(K){return B(K)})})),b.incomingCoords(v)})}var He={onSetup:function(i){var a=this,h={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initiallySelectedFeatureIds:i.featureIds||[]};return this.setSelected(h.initiallySelectedFeatureIds.filter(function(b){return a.getFeature(b)!==void 0})),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),h},fireUpdate:function(){this.map.fire(I.UPDATE,{action:G.MOVE,features:this.getSelected().map(function(i){return i.toGeoJSON()})})},fireActionable:function(){var i=this,a=this.getSelected(),h=a.filter(function(B){return i.isInstanceOf("MultiFeature",B)}),b=!1;if(a.length>1){b=!0;var v=a[0].type.replace("Multi","");a.forEach(function(B){B.type.replace("Multi","")!==v&&(b=!1)})}var E=h.length>0,w=a.length>0;this.setActionableState({combineFeatures:b,uncombineFeatures:E,trash:w})},getUniqueIds:function(i){return i.length?i.map(function(a){return a.properties.id}).filter(function(a){return a!==void 0}).reduce(function(a,h){return a.add(h),a},new F).values():[]},stopExtendedInteractions:function(i){i.boxSelectElement&&(i.boxSelectElement.parentNode&&i.boxSelectElement.parentNode.removeChild(i.boxSelectElement),i.boxSelectElement=null),this.map.dragPan.enable(),i.boxSelecting=!1,i.canBoxSelect=!1,i.dragMoving=!1,i.canDragMove=!1},onStop:function(){wt.enable(this)},onMouseMove:function(i){return this.stopExtendedInteractions(i),!0},onMouseOut:function(i){return!i.dragMoving||this.fireUpdate()}};He.onTap=He.onClick=function(i,a){return Hn(a)?this.clickAnywhere(i,a):Wn(O.VERTEX)(a)?this.clickOnVertex(i,a):Ii(a)?this.clickOnFeature(i,a):void 0},He.clickAnywhere=function(i){var a=this,h=this.getSelectedIds();h.length&&(this.clearSelectedFeatures(),h.forEach(function(b){return a.doRender(b)})),wt.enable(this),this.stopExtendedInteractions(i)},He.clickOnVertex=function(i,a){this.changeMode(y.DIRECT_SELECT,{featureId:a.featureTarget.properties.parent,coordPath:a.featureTarget.properties.coord_path,startPos:a.lngLat}),this.updateUIClasses({mouse:m.MOVE})},He.startOnActiveFeature=function(i,a){this.stopExtendedInteractions(i),this.map.dragPan.disable(),this.doRender(a.featureTarget.properties.id),i.canDragMove=!0,i.dragMoveLocation=a.lngLat},He.clickOnFeature=function(i,a){var h=this;wt.disable(this),this.stopExtendedInteractions(i);var b=Zn(a),v=this.getSelectedIds(),E=a.featureTarget.properties.id,w=this.isSelected(E);if(!b&&w&&this.getFeature(E).type!==p.POINT)return this.changeMode(y.DIRECT_SELECT,{featureId:E});w&&b?(this.deselect(E),this.updateUIClasses({mouse:m.POINTER}),v.length===1&&wt.enable(this)):!w&&b?(this.select(E),this.updateUIClasses({mouse:m.MOVE})):w||b||(v.forEach(function(B){return h.doRender(B)}),this.setSelected(E),this.updateUIClasses({mouse:m.MOVE})),this.doRender(E)},He.onMouseDown=function(i,a){return tn(a)?this.startOnActiveFeature(i,a):this.drawConfig.boxSelect&&Oi(a)?this.startBoxSelect(i,a):void 0},He.startBoxSelect=function(i,a){this.stopExtendedInteractions(i),this.map.dragPan.disable(),i.boxSelectStartLocation=Ur(a.originalEvent,this.map.getContainer()),i.canBoxSelect=!0},He.onTouchStart=function(i,a){if(tn(a))return this.startOnActiveFeature(i,a)},He.onDrag=function(i,a){return i.canDragMove?this.dragMove(i,a):this.drawConfig.boxSelect&&i.canBoxSelect?this.whileBoxSelect(i,a):void 0},He.whileBoxSelect=function(i,a){i.boxSelecting=!0,this.updateUIClasses({mouse:m.ADD}),i.boxSelectElement||(i.boxSelectElement=document.createElement("div"),i.boxSelectElement.classList.add(g.BOX_SELECT),this.map.getContainer().appendChild(i.boxSelectElement));var h=Ur(a.originalEvent,this.map.getContainer()),b=Math.min(i.boxSelectStartLocation.x,h.x),v=Math.max(i.boxSelectStartLocation.x,h.x),E=Math.min(i.boxSelectStartLocation.y,h.y),w=Math.max(i.boxSelectStartLocation.y,h.y),B="translate("+b+"px, "+E+"px)";i.boxSelectElement.style.transform=B,i.boxSelectElement.style.WebkitTransform=B,i.boxSelectElement.style.width=v-b+"px",i.boxSelectElement.style.height=w-E+"px"},He.dragMove=function(i,a){i.dragMoving=!0,a.originalEvent.stopPropagation();var h={lng:a.lngLat.lng-i.dragMoveLocation.lng,lat:a.lngLat.lat-i.dragMoveLocation.lat};zr(this.getSelected(),h),i.dragMoveLocation=a.lngLat},He.onTouchEnd=He.onMouseUp=function(i,a){var h=this;if(i.dragMoving)this.fireUpdate();else if(i.boxSelecting){var b=[i.boxSelectStartLocation,Ur(a.originalEvent,this.map.getContainer())],v=this.featuresAt(null,b,"click"),E=this.getUniqueIds(v).filter(function(w){return!h.isSelected(w)});E.length&&(this.select(E),E.forEach(function(w){return h.doRender(w)}),this.updateUIClasses({mouse:m.MOVE}))}this.stopExtendedInteractions(i)},He.toDisplayFeatures=function(i,a,h){a.properties.active=this.isSelected(a.properties.id)?C.ACTIVE:C.INACTIVE,h(a),this.fireActionable(),a.properties.active===C.ACTIVE&&a.geometry.type!==p.POINT&&Qn(a).forEach(h)},He.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()},He.onCombineFeatures=function(){var i=this.getSelected();if(!(i.length===0||i.length<2)){for(var a=[],h=[],b=i[0].type.replace("Multi",""),v=0;v<i.length;v++){var E=i[v];if(E.type.replace("Multi","")!==b)return;E.type.includes("Multi")?E.getCoordinates().forEach(function(B){a.push(B)}):a.push(E.getCoordinates()),h.push(E.toGeoJSON())}if(h.length>1){var w=this.newFeature({type:p.FEATURE,properties:h[0].properties,geometry:{type:"Multi"+b,coordinates:a}});this.addFeature(w),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([w.id]),this.map.fire(I.COMBINE_FEATURES,{createdFeatures:[w.toGeoJSON()],deletedFeatures:h})}this.fireActionable()}},He.onUncombineFeatures=function(){var i=this,a=this.getSelected();if(a.length!==0){for(var h=[],b=[],v=function(w){var B=a[w];i.isInstanceOf("MultiFeature",B)&&(B.getFeatures().forEach(function(V){i.addFeature(V),V.properties=B.properties,h.push(V.toGeoJSON()),i.select([V.id])}),i.deleteFeature(B.id,{silent:!0}),b.push(B.toGeoJSON()))},E=0;E<a.length;E++)v(E);h.length>1&&this.map.fire(I.UNCOMBINE_FEATURES,{createdFeatures:h,deletedFeatures:b}),this.fireActionable()}};var Fi=Wn(O.VERTEX),as=Wn(O.MIDPOINT),Vt={fireUpdate:function(){this.map.fire(I.UPDATE,{action:G.CHANGE_COORDINATES,features:this.getSelected().map(function(i){return i.toGeoJSON()})})},fireActionable:function(i){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:i.selectedCoordPaths.length>0})},startDragging:function(i,a){this.map.dragPan.disable(),i.canDragMove=!0,i.dragMoveLocation=a.lngLat},stopDragging:function(i){this.map.dragPan.enable(),i.dragMoving=!1,i.canDragMove=!1,i.dragMoveLocation=null},onVertex:function(i,a){this.startDragging(i,a);var h=a.featureTarget.properties,b=i.selectedCoordPaths.indexOf(h.coord_path);Zn(a)||b!==-1?Zn(a)&&b===-1&&i.selectedCoordPaths.push(h.coord_path):i.selectedCoordPaths=[h.coord_path];var v=this.pathsToCoordinates(i.featureId,i.selectedCoordPaths);this.setSelectedCoordinates(v)},onMidpoint:function(i,a){this.startDragging(i,a);var h=a.featureTarget.properties;i.feature.addCoordinate(h.coord_path,h.lng,h.lat),this.fireUpdate(),i.selectedCoordPaths=[h.coord_path]},pathsToCoordinates:function(i,a){return a.map(function(h){return{feature_id:i,coord_path:h}})},onFeature:function(i,a){i.selectedCoordPaths.length===0?this.startDragging(i,a):this.stopDragging(i)},dragFeature:function(i,a,h){zr(this.getSelected(),h),i.dragMoveLocation=a.lngLat},dragVertex:function(i,a,h){for(var b=i.selectedCoordPaths.map(function(B){return i.feature.getCoordinate(B)}),v=Gr(b.map(function(B){return{type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:B}}}),h),E=0;E<b.length;E++){var w=b[E];i.feature.updateCoordinate(i.selectedCoordPaths[E],w[0]+v.lng,w[1]+v.lat)}},clickNoTarget:function(){this.changeMode(y.SIMPLE_SELECT)},clickInactive:function(){this.changeMode(y.SIMPLE_SELECT)},clickActiveFeature:function(i){i.selectedCoordPaths=[],this.clearSelectedCoordinates(),i.feature.changed()},onSetup:function(i){var a=i.featureId,h=this.getFeature(a);if(!h)throw new Error("You must provide a featureId to enter direct_select mode");if(h.type===p.POINT)throw new TypeError("direct_select mode doesn't handle point features");var b={featureId:a,feature:h,dragMoveLocation:i.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:i.coordPath?[i.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(a,b.selectedCoordPaths)),this.setSelected(a),wt.disable(this),this.setActionableState({trash:!0}),b},onStop:function(){wt.enable(this),this.clearSelectedCoordinates()},toDisplayFeatures:function(i,a,h){i.featureId===a.properties.id?(a.properties.active=C.ACTIVE,h(a),Qn(a,{map:this.map,midpoints:!0,selectedPaths:i.selectedCoordPaths}).forEach(h)):(a.properties.active=C.INACTIVE,h(a)),this.fireActionable(i)},onTrash:function(i){i.selectedCoordPaths.sort(function(a,h){return h.localeCompare(a,"en",{numeric:!0})}).forEach(function(a){return i.feature.removeCoordinate(a)}),this.fireUpdate(),i.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(i),i.feature.isValid()===!1&&(this.deleteFeature([i.featureId]),this.changeMode(y.SIMPLE_SELECT,{}))},onMouseMove:function(i,a){var h=tn(a),b=Fi(a),v=i.selectedCoordPaths.length===0;return h&&v||b&&!v?this.updateUIClasses({mouse:m.MOVE}):this.updateUIClasses({mouse:m.NONE}),this.stopDragging(i),!0},onMouseOut:function(i){return i.dragMoving&&this.fireUpdate(),!0}};Vt.onTouchStart=Vt.onMouseDown=function(i,a){return Fi(a)?this.onVertex(i,a):tn(a)?this.onFeature(i,a):as(a)?this.onMidpoint(i,a):void 0},Vt.onDrag=function(i,a){if(i.canDragMove===!0){i.dragMoving=!0,a.originalEvent.stopPropagation();var h={lng:a.lngLat.lng-i.dragMoveLocation.lng,lat:a.lngLat.lat-i.dragMoveLocation.lat};i.selectedCoordPaths.length>0?this.dragVertex(i,a,h):this.dragFeature(i,a,h),i.dragMoveLocation=a.lngLat}},Vt.onClick=function(i,a){return Hn(a)?this.clickNoTarget(i,a):tn(a)?this.clickActiveFeature(i,a):Dr(a)?this.clickInactive(i,a):void this.stopDragging(i)},Vt.onTap=function(i,a){return Hn(a)?this.clickNoTarget(i,a):tn(a)?this.clickActiveFeature(i,a):Dr(a)?this.clickInactive(i,a):void 0},Vt.onTouchEnd=Vt.onMouseUp=function(i){i.dragMoving&&this.fireUpdate(),this.stopDragging(i)};var Ot={};function ir(i,a){return!!i.lngLat&&i.lngLat.lng===a[0]&&i.lngLat.lat===a[1]}Ot.onSetup=function(){var i=this.newFeature({type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:[]}});return this.addFeature(i),this.clearSelectedFeatures(),this.updateUIClasses({mouse:m.ADD}),this.activateUIButton(d.POINT),this.setActionableState({trash:!0}),{point:i}},Ot.stopDrawingAndRemove=function(i){this.deleteFeature([i.point.id],{silent:!0}),this.changeMode(y.SIMPLE_SELECT)},Ot.onTap=Ot.onClick=function(i,a){this.updateUIClasses({mouse:m.MOVE}),i.point.updateCoordinate("",a.lngLat.lng,a.lngLat.lat),this.map.fire(I.CREATE,{features:[i.point.toGeoJSON()]}),this.changeMode(y.SIMPLE_SELECT,{featureIds:[i.point.id]})},Ot.onStop=function(i){this.activateUIButton(),i.point.getCoordinate().length||this.deleteFeature([i.point.id],{silent:!0})},Ot.toDisplayFeatures=function(i,a,h){var b=a.properties.id===i.point.id;if(a.properties.active=b?C.ACTIVE:C.INACTIVE,!b)return h(a)},Ot.onTrash=Ot.stopDrawingAndRemove,Ot.onKeyUp=function(i,a){if(Xn(a)||Kn(a))return this.stopDrawingAndRemove(i,a)};var nn={onSetup:function(){var i=this.newFeature({type:p.FEATURE,properties:{},geometry:{type:p.POLYGON,coordinates:[[]]}});return this.addFeature(i),this.clearSelectedFeatures(),wt.disable(this),this.updateUIClasses({mouse:m.ADD}),this.activateUIButton(d.POLYGON),this.setActionableState({trash:!0}),{polygon:i,currentVertexPosition:0}},clickAnywhere:function(i,a){if(i.currentVertexPosition>0&&ir(a,i.polygon.coordinates[0][i.currentVertexPosition-1]))return this.changeMode(y.SIMPLE_SELECT,{featureIds:[i.polygon.id]});this.updateUIClasses({mouse:m.ADD}),i.polygon.updateCoordinate("0."+i.currentVertexPosition,a.lngLat.lng,a.lngLat.lat),i.currentVertexPosition++,i.polygon.updateCoordinate("0."+i.currentVertexPosition,a.lngLat.lng,a.lngLat.lat)},clickOnVertex:function(i){return this.changeMode(y.SIMPLE_SELECT,{featureIds:[i.polygon.id]})},onMouseMove:function(i,a){i.polygon.updateCoordinate("0."+i.currentVertexPosition,a.lngLat.lng,a.lngLat.lat),In(a)&&this.updateUIClasses({mouse:m.POINTER})}};nn.onTap=nn.onClick=function(i,a){return In(a)?this.clickOnVertex(i,a):this.clickAnywhere(i,a)},nn.onKeyUp=function(i,a){Xn(a)?(this.deleteFeature([i.polygon.id],{silent:!0}),this.changeMode(y.SIMPLE_SELECT)):Kn(a)&&this.changeMode(y.SIMPLE_SELECT,{featureIds:[i.polygon.id]})},nn.onStop=function(i){this.updateUIClasses({mouse:m.NONE}),wt.enable(this),this.activateUIButton(),this.getFeature(i.polygon.id)!==void 0&&(i.polygon.removeCoordinate("0."+i.currentVertexPosition),i.polygon.isValid()?this.map.fire(I.CREATE,{features:[i.polygon.toGeoJSON()]}):(this.deleteFeature([i.polygon.id],{silent:!0}),this.changeMode(y.SIMPLE_SELECT,{},{silent:!0})))},nn.toDisplayFeatures=function(i,a,h){var b=a.properties.id===i.polygon.id;if(a.properties.active=b?C.ACTIVE:C.INACTIVE,!b)return h(a);if(a.geometry.coordinates.length!==0){var v=a.geometry.coordinates[0].length;if(!(v<3)){if(a.properties.meta=O.FEATURE,h(gn(i.polygon.id,a.geometry.coordinates[0][0],"0.0",!1)),v>3){var E=a.geometry.coordinates[0].length-3;h(gn(i.polygon.id,a.geometry.coordinates[0][E],"0."+E,!1))}if(v<=4){var w=[[a.geometry.coordinates[0][0][0],a.geometry.coordinates[0][0][1]],[a.geometry.coordinates[0][1][0],a.geometry.coordinates[0][1][1]]];if(h({type:p.FEATURE,properties:a.properties,geometry:{coordinates:w,type:p.LINE_STRING}}),v===3)return}return h(a)}}},nn.onTrash=function(i){this.deleteFeature([i.polygon.id],{silent:!0}),this.changeMode(y.SIMPLE_SELECT)};var rn={onSetup:function(i){var a,h,b=(i=i||{}).featureId,v="forward";if(b){if(!(a=this.getFeature(b)))throw new Error("Could not find a feature with the provided featureId");var E=i.from;if(E&&E.type==="Feature"&&E.geometry&&E.geometry.type==="Point"&&(E=E.geometry),E&&E.type==="Point"&&E.coordinates&&E.coordinates.length===2&&(E=E.coordinates),!E||!Array.isArray(E))throw new Error("Please use the `from` property to indicate which point to continue the line from");var w=a.coordinates.length-1;if(a.coordinates[w][0]===E[0]&&a.coordinates[w][1]===E[1])h=w+1,a.addCoordinate.apply(a,[h].concat(a.coordinates[w]));else{if(a.coordinates[0][0]!==E[0]||a.coordinates[0][1]!==E[1])throw new Error("`from` should match the point at either the start or the end of the provided LineString");v="backwards",h=0,a.addCoordinate.apply(a,[h].concat(a.coordinates[0]))}}else a=this.newFeature({type:p.FEATURE,properties:{},geometry:{type:p.LINE_STRING,coordinates:[]}}),h=0,this.addFeature(a);return this.clearSelectedFeatures(),wt.disable(this),this.updateUIClasses({mouse:m.ADD}),this.activateUIButton(d.LINE),this.setActionableState({trash:!0}),{line:a,currentVertexPosition:h,direction:v}},clickAnywhere:function(i,a){if(i.currentVertexPosition>0&&ir(a,i.line.coordinates[i.currentVertexPosition-1])||i.direction==="backwards"&&ir(a,i.line.coordinates[i.currentVertexPosition+1]))return this.changeMode(y.SIMPLE_SELECT,{featureIds:[i.line.id]});this.updateUIClasses({mouse:m.ADD}),i.line.updateCoordinate(i.currentVertexPosition,a.lngLat.lng,a.lngLat.lat),i.direction==="forward"?(i.currentVertexPosition++,i.line.updateCoordinate(i.currentVertexPosition,a.lngLat.lng,a.lngLat.lat)):i.line.addCoordinate(0,a.lngLat.lng,a.lngLat.lat)},clickOnVertex:function(i){return this.changeMode(y.SIMPLE_SELECT,{featureIds:[i.line.id]})},onMouseMove:function(i,a){i.line.updateCoordinate(i.currentVertexPosition,a.lngLat.lng,a.lngLat.lat),In(a)&&this.updateUIClasses({mouse:m.POINTER})}};rn.onTap=rn.onClick=function(i,a){if(In(a))return this.clickOnVertex(i,a);this.clickAnywhere(i,a)},rn.onKeyUp=function(i,a){Kn(a)?this.changeMode(y.SIMPLE_SELECT,{featureIds:[i.line.id]}):Xn(a)&&(this.deleteFeature([i.line.id],{silent:!0}),this.changeMode(y.SIMPLE_SELECT))},rn.onStop=function(i){wt.enable(this),this.activateUIButton(),this.getFeature(i.line.id)!==void 0&&(i.line.removeCoordinate(""+i.currentVertexPosition),i.line.isValid()?this.map.fire(I.CREATE,{features:[i.line.toGeoJSON()]}):(this.deleteFeature([i.line.id],{silent:!0}),this.changeMode(y.SIMPLE_SELECT,{},{silent:!0})))},rn.onTrash=function(i){this.deleteFeature([i.line.id],{silent:!0}),this.changeMode(y.SIMPLE_SELECT)},rn.toDisplayFeatures=function(i,a,h){var b=a.properties.id===i.line.id;if(a.properties.active=b?C.ACTIVE:C.INACTIVE,!b)return h(a);a.geometry.coordinates.length<2||(a.properties.meta=O.FEATURE,h(gn(i.line.id,a.geometry.coordinates[i.direction==="forward"?a.geometry.coordinates.length-2:1],""+(i.direction==="forward"?a.geometry.coordinates.length-2:1),!1)),h(a))};var Di={simple_select:He,direct_select:Vt,draw_point:Ot,draw_polygon:nn,draw_line_string:rn},us={defaultMode:y.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:Mi,modes:Di,controls:{},userProperties:!1},fs={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},cs={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Ui(i,a){return i.map(function(h){return h.source?h:zt(h,{id:h.id+"."+a,source:a==="hot"?_.HOT:_.COLD})})}var or={};(function(i,a){var h="__lodash_hash_undefined__",b=9007199254740991,v="[object Arguments]",E="[object Array]",w="[object Boolean]",B="[object Date]",V="[object Error]",K="[object Function]",Z="[object Map]",W="[object Number]",he="[object Object]",ze="[object Promise]",ve="[object RegExp]",qe="[object Set]",U="[object String]",re="[object Symbol]",Pe="[object WeakMap]",Qe="[object ArrayBuffer]",Je="[object DataView]",Vr=/^\[object .+?Constructor\]$/,ms=/^(?:0|[1-9]\d*)$/,De={};De["[object Float32Array]"]=De["[object Float64Array]"]=De["[object Int8Array]"]=De["[object Int16Array]"]=De["[object Int32Array]"]=De["[object Uint8Array]"]=De["[object Uint8ClampedArray]"]=De["[object Uint16Array]"]=De["[object Uint32Array]"]=!0,De[v]=De[E]=De[Qe]=De[w]=De[Je]=De[B]=De[V]=De[K]=De[Z]=De[W]=De[he]=De[ve]=De[qe]=De[U]=De[Pe]=!1;var Bi=typeof Dn=="object"&&Dn&&Dn.Object===Object&&Dn,_s=typeof self=="object"&&self&&self.Object===Object&&self,Rt=Bi||_s||Function("return this")(),Gi=a&&!a.nodeType&&a,zi=Gi&&i&&!i.nodeType&&i,Vi=zi&&zi.exports===Gi,qr=Vi&&Bi.process,qi=function(){try{return qr&&qr.binding&&qr.binding("util")}catch{}}(),Ji=qi&&qi.isTypedArray;function bs(S,L){for(var H=-1,se=S==null?0:S.length;++H<se;)if(L(S[H],H,S))return!0;return!1}function vs(S){var L=-1,H=Array(S.size);return S.forEach(function(se,Ue){H[++L]=[Ue,se]}),H}function ys(S){var L=-1,H=Array(S.size);return S.forEach(function(se){H[++L]=se}),H}var Yi,Wi,Hi,Es=Array.prototype,ws=Function.prototype,sr=Object.prototype,Jr=Rt["__core-js_shared__"],Zi=ws.toString,It=sr.hasOwnProperty,Xi=(Yi=/[^.]+$/.exec(Jr&&Jr.keys&&Jr.keys.IE_PROTO||""))?"Symbol(src)_1."+Yi:"",Ki=sr.toString,Ss=RegExp("^"+Zi.call(It).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qi=Vi?Rt.Buffer:void 0,ar=Rt.Symbol,$i=Rt.Uint8Array,eo=sr.propertyIsEnumerable,ks=Es.splice,on=ar?ar.toStringTag:void 0,to=Object.getOwnPropertySymbols,Ts=Qi?Qi.isBuffer:void 0,Cs=(Wi=Object.keys,Hi=Object,function(S){return Wi(Hi(S))}),Yr=_n(Rt,"DataView"),Pn=_n(Rt,"Map"),Wr=_n(Rt,"Promise"),Hr=_n(Rt,"Set"),Zr=_n(Rt,"WeakMap"),xn=_n(Object,"create"),Ms=an(Yr),Os=an(Pn),Is=an(Wr),Ls=an(Hr),Ps=an(Zr),no=ar?ar.prototype:void 0,Xr=no?no.valueOf:void 0;function ln(S){var L=-1,H=S==null?0:S.length;for(this.clear();++L<H;){var se=S[L];this.set(se[0],se[1])}}function Ft(S){var L=-1,H=S==null?0:S.length;for(this.clear();++L<H;){var se=S[L];this.set(se[0],se[1])}}function sn(S){var L=-1,H=S==null?0:S.length;for(this.clear();++L<H;){var se=S[L];this.set(se[0],se[1])}}function ur(S){var L=-1,H=S==null?0:S.length;for(this.__data__=new sn;++L<H;)this.add(S[L])}function qt(S){var L=this.__data__=new Ft(S);this.size=L.size}function xs(S,L){var H=dr(S),se=!H&&Ds(S),Ue=!H&&!se&&Kr(S),we=!H&&!se&&!Ue&&co(S),Ve=H||se||Ue||we,Ye=Ve?function(Xe,Lt){for(var Dt=-1,lt=Array(Xe);++Dt<Xe;)lt[Dt]=Lt(Dt);return lt}(S.length,String):[],St=Ye.length;for(var Ze in S)!L&&!It.call(S,Ze)||Ve&&(Ze=="length"||Ue&&(Ze=="offset"||Ze=="parent")||we&&(Ze=="buffer"||Ze=="byteLength"||Ze=="byteOffset")||Fs(Ze,St))||Ye.push(Ze);return Ye}function fr(S,L){for(var H=S.length;H--;)if(so(S[H][0],L))return H;return-1}function An(S){return S==null?S===void 0?"[object Undefined]":"[object Null]":on&&on in Object(S)?function(L){var H=It.call(L,on),se=L[on];try{L[on]=void 0;var Ue=!0}catch{}var we=Ki.call(L);return Ue&&(H?L[on]=se:delete L[on]),we}(S):function(L){return Ki.call(L)}(S)}function ro(S){return Nn(S)&&An(S)==v}function io(S,L,H,se,Ue){return S===L||(S==null||L==null||!Nn(S)&&!Nn(L)?S!=S&&L!=L:function(we,Ve,Ye,St,Ze,Xe){var Lt=dr(we),Dt=dr(Ve),lt=Lt?E:Jt(we),Ut=Dt?E:Jt(Ve),bn=(lt=lt==v?he:lt)==he,hr=(Ut=Ut==v?he:Ut)==he,vn=lt==Ut;if(vn&&Kr(we)){if(!Kr(Ve))return!1;Lt=!0,bn=!1}if(vn&&!bn)return Xe||(Xe=new qt),Lt||co(we)?oo(we,Ve,Ye,St,Ze,Xe):function(Ae,xe,pr,Yt,Qr,_t,jt){switch(pr){case Je:if(Ae.byteLength!=xe.byteLength||Ae.byteOffset!=xe.byteOffset)return!1;Ae=Ae.buffer,xe=xe.buffer;case Qe:return!(Ae.byteLength!=xe.byteLength||!_t(new $i(Ae),new $i(xe)));case w:case B:case W:return so(+Ae,+xe);case V:return Ae.name==xe.name&&Ae.message==xe.message;case ve:case U:return Ae==xe+"";case Z:var Wt=vs;case qe:var Fn=1&Yt;if(Wt||(Wt=ys),Ae.size!=xe.size&&!Fn)return!1;var gr=jt.get(Ae);if(gr)return gr==xe;Yt|=2,jt.set(Ae,xe);var yn=oo(Wt(Ae),Wt(xe),Yt,Qr,_t,jt);return jt.delete(Ae),yn;case re:if(Xr)return Xr.call(Ae)==Xr.call(xe)}return!1}(we,Ve,lt,Ye,St,Ze,Xe);if(!(1&Ye)){var Rn=bn&&It.call(we,"__wrapped__"),ho=hr&&It.call(Ve,"__wrapped__");if(Rn||ho){var js=Rn?we.value():we,Bs=ho?Ve.value():Ve;return Xe||(Xe=new qt),Ze(js,Bs,Ye,St,Xe)}}return vn?(Xe||(Xe=new qt),function(Ae,xe,pr,Yt,Qr,_t){var jt=1&pr,Wt=lo(Ae),Fn=Wt.length,gr=lo(xe).length;if(Fn!=gr&&!jt)return!1;for(var yn=Fn;yn--;){var un=Wt[yn];if(!(jt?un in xe:It.call(xe,un)))return!1}var po=_t.get(Ae);if(po&&_t.get(xe))return po==xe;var mr=!0;_t.set(Ae,xe),_t.set(xe,Ae);for(var $r=jt;++yn<Fn;){var _r=Ae[un=Wt[yn]],br=xe[un];if(Yt)var go=jt?Yt(br,_r,un,xe,Ae,_t):Yt(_r,br,un,Ae,xe,_t);if(!(go===void 0?_r===br||Qr(_r,br,pr,Yt,_t):go)){mr=!1;break}$r||($r=un=="constructor")}if(mr&&!$r){var vr=Ae.constructor,yr=xe.constructor;vr==yr||!("constructor"in Ae)||!("constructor"in xe)||typeof vr=="function"&&vr instanceof vr&&typeof yr=="function"&&yr instanceof yr||(mr=!1)}return _t.delete(Ae),_t.delete(xe),mr}(we,Ve,Ye,St,Ze,Xe)):!1}(S,L,H,se,io,Ue))}function As(S){return!(!fo(S)||function(L){return!!Xi&&Xi in L}(S))&&(ao(S)?Ss:Vr).test(an(S))}function Ns(S){if(H=(L=S)&&L.constructor,se=typeof H=="function"&&H.prototype||sr,L!==se)return Cs(S);var L,H,se,Ue=[];for(var we in Object(S))It.call(S,we)&&we!="constructor"&&Ue.push(we);return Ue}function oo(S,L,H,se,Ue,we){var Ve=1&H,Ye=S.length,St=L.length;if(Ye!=St&&!(Ve&&St>Ye))return!1;var Ze=we.get(S);if(Ze&&we.get(L))return Ze==L;var Xe=-1,Lt=!0,Dt=2&H?new ur:void 0;for(we.set(S,L),we.set(L,S);++Xe<Ye;){var lt=S[Xe],Ut=L[Xe];if(se)var bn=Ve?se(Ut,lt,Xe,L,S,we):se(lt,Ut,Xe,S,L,we);if(bn!==void 0){if(bn)continue;Lt=!1;break}if(Dt){if(!bs(L,function(hr,vn){if(Rn=vn,!Dt.has(Rn)&&(lt===hr||Ue(lt,hr,H,se,we)))return Dt.push(vn);var Rn})){Lt=!1;break}}else if(lt!==Ut&&!Ue(lt,Ut,H,se,we)){Lt=!1;break}}return we.delete(S),we.delete(L),Lt}function lo(S){return function(L,H,se){var Ue=H(L);return dr(L)?Ue:function(we,Ve){for(var Ye=-1,St=Ve.length,Ze=we.length;++Ye<St;)we[Ze+Ye]=Ve[Ye];return we}(Ue,se(L))}(S,Us,Rs)}function cr(S,L){var H,se,Ue=S.__data__;return((se=typeof(H=L))=="string"||se=="number"||se=="symbol"||se=="boolean"?H!=="__proto__":H===null)?Ue[typeof L=="string"?"string":"hash"]:Ue.map}function _n(S,L){var H=function(se,Ue){return se==null?void 0:se[Ue]}(S,L);return As(H)?H:void 0}ln.prototype.clear=function(){this.__data__=xn?xn(null):{},this.size=0},ln.prototype.delete=function(S){var L=this.has(S)&&delete this.__data__[S];return this.size-=L?1:0,L},ln.prototype.get=function(S){var L=this.__data__;if(xn){var H=L[S];return H===h?void 0:H}return It.call(L,S)?L[S]:void 0},ln.prototype.has=function(S){var L=this.__data__;return xn?L[S]!==void 0:It.call(L,S)},ln.prototype.set=function(S,L){var H=this.__data__;return this.size+=this.has(S)?0:1,H[S]=xn&&L===void 0?h:L,this},Ft.prototype.clear=function(){this.__data__=[],this.size=0},Ft.prototype.delete=function(S){var L=this.__data__,H=fr(L,S);return!(H<0)&&(H==L.length-1?L.pop():ks.call(L,H,1),--this.size,!0)},Ft.prototype.get=function(S){var L=this.__data__,H=fr(L,S);return H<0?void 0:L[H][1]},Ft.prototype.has=function(S){return fr(this.__data__,S)>-1},Ft.prototype.set=function(S,L){var H=this.__data__,se=fr(H,S);return se<0?(++this.size,H.push([S,L])):H[se][1]=L,this},sn.prototype.clear=function(){this.size=0,this.__data__={hash:new ln,map:new(Pn||Ft),string:new ln}},sn.prototype.delete=function(S){var L=cr(this,S).delete(S);return this.size-=L?1:0,L},sn.prototype.get=function(S){return cr(this,S).get(S)},sn.prototype.has=function(S){return cr(this,S).has(S)},sn.prototype.set=function(S,L){var H=cr(this,S),se=H.size;return H.set(S,L),this.size+=H.size==se?0:1,this},ur.prototype.add=ur.prototype.push=function(S){return this.__data__.set(S,h),this},ur.prototype.has=function(S){return this.__data__.has(S)},qt.prototype.clear=function(){this.__data__=new Ft,this.size=0},qt.prototype.delete=function(S){var L=this.__data__,H=L.delete(S);return this.size=L.size,H},qt.prototype.get=function(S){return this.__data__.get(S)},qt.prototype.has=function(S){return this.__data__.has(S)},qt.prototype.set=function(S,L){var H=this.__data__;if(H instanceof Ft){var se=H.__data__;if(!Pn||se.length<199)return se.push([S,L]),this.size=++H.size,this;H=this.__data__=new sn(se)}return H.set(S,L),this.size=H.size,this};var Rs=to?function(S){return S==null?[]:(S=Object(S),function(L,H){for(var se=-1,Ue=L==null?0:L.length,we=0,Ve=[];++se<Ue;){var Ye=L[se];H(Ye,se,L)&&(Ve[we++]=Ye)}return Ve}(to(S),function(L){return eo.call(S,L)}))}:function(){return[]},Jt=An;function Fs(S,L){return!!(L=L??b)&&(typeof S=="number"||ms.test(S))&&S>-1&&S%1==0&&S<L}function an(S){if(S!=null){try{return Zi.call(S)}catch{}try{return S+""}catch{}}return""}function so(S,L){return S===L||S!=S&&L!=L}(Yr&&Jt(new Yr(new ArrayBuffer(1)))!=Je||Pn&&Jt(new Pn)!=Z||Wr&&Jt(Wr.resolve())!=ze||Hr&&Jt(new Hr)!=qe||Zr&&Jt(new Zr)!=Pe)&&(Jt=function(S){var L=An(S),H=L==he?S.constructor:void 0,se=H?an(H):"";if(se)switch(se){case Ms:return Je;case Os:return Z;case Is:return ze;case Ls:return qe;case Ps:return Pe}return L});var Ds=ro(function(){return arguments}())?ro:function(S){return Nn(S)&&It.call(S,"callee")&&!eo.call(S,"callee")},dr=Array.isArray,Kr=Ts||function(){return!1};function ao(S){if(!fo(S))return!1;var L=An(S);return L==K||L=="[object GeneratorFunction]"||L=="[object AsyncFunction]"||L=="[object Proxy]"}function uo(S){return typeof S=="number"&&S>-1&&S%1==0&&S<=b}function fo(S){var L=typeof S;return S!=null&&(L=="object"||L=="function")}function Nn(S){return S!=null&&typeof S=="object"}var co=Ji?function(S){return function(L){return S(L)}}(Ji):function(S){return Nn(S)&&uo(S.length)&&!!De[An(S)]};function Us(S){return(L=S)!=null&&uo(L.length)&&!ao(L)?xs(S):Ns(S);var L}i.exports=function(S,L){return io(S,L)}})({get exports(){return or},set exports(i){or=i}},or);var ds=or;function ji(i,a){return i.length===a.length&&JSON.stringify(i.map(function(h){return h}).sort())===JSON.stringify(a.map(function(h){return h}).sort())}var hs={Polygon:it,LineString:pe,Point:M,MultiPolygon:fe,MultiLineString:fe,MultiPoint:fe},ps=Object.freeze({__proto__:null,CommonSelectors:Zl,constrainFeatureMovement:Gr,createMidPoint:Li,createSupplementaryPoints:Qn,createVertex:gn,doubleClickZoom:wt,euclideanDistance:de,featuresAt:te,getFeatureAtAndSetCursors:Q,isClick:ke,isEventAtCoordinates:ir,isTap:Ie,mapEventToBoundingBox:X,ModeHandler:t,moveFeatures:zr,sortFeatures:le,stringSetsAreEqual:ji,StringSet:F,theme:Mi,toDenseArray:Et}),gs=function(i,a){var h={options:i=function(v){v===void 0&&(v={});var E=zt(v);return v.controls||(E.controls={}),v.displayControlsDefault===!1?E.controls=zt(cs,v.controls):E.controls=zt(fs,v.controls),(E=zt(us,E)).styles=Ui(E.styles,"cold").concat(Ui(E.styles,"hot")),E}(i)};a=function(v,E){return E.modes=y,E.getFeatureIdsAt=function(w){return te.click({point:w},null,v).map(function(B){return B.properties.id})},E.getSelectedIds=function(){return v.store.getSelectedIds()},E.getSelected=function(){return{type:p.FEATURE_COLLECTION,features:v.store.getSelectedIds().map(function(w){return v.store.get(w)}).map(function(w){return w.toGeoJSON()})}},E.getSelectedPoints=function(){return{type:p.FEATURE_COLLECTION,features:v.store.getSelectedCoordinates().map(function(w){return{type:p.FEATURE,properties:{},geometry:{type:p.POINT,coordinates:w.coordinates}}})}},E.set=function(w){if(w.type===void 0||w.type!==p.FEATURE_COLLECTION||!Array.isArray(w.features))throw new Error("Invalid FeatureCollection");var B=v.store.createRenderBatch(),V=v.store.getAllIds().slice(),K=E.add(w),Z=new F(K);return(V=V.filter(function(W){return!Z.has(W)})).length&&E.delete(V),B(),K},E.add=function(w){var B=JSON.parse(JSON.stringify(Pi(w))).features.map(function(V){if(V.id=V.id||Le(),V.geometry===null)throw new Error("Invalid geometry: null");if(v.store.get(V.id)===void 0||v.store.get(V.id).type!==V.geometry.type){var K=hs[V.geometry.type];if(K===void 0)throw new Error("Invalid geometry type: "+V.geometry.type+".");var Z=new K(v,V);v.store.add(Z)}else{var W=v.store.get(V.id);W.properties=V.properties,ds(W.getCoordinates(),V.geometry.coordinates)||W.incomingCoords(V.geometry.coordinates)}return V.id});return v.store.render(),B},E.get=function(w){var B=v.store.get(w);if(B)return B.toGeoJSON()},E.getAll=function(){return{type:p.FEATURE_COLLECTION,features:v.store.getAll().map(function(w){return w.toGeoJSON()})}},E.delete=function(w){return v.store.delete(w,{silent:!0}),E.getMode()!==y.DIRECT_SELECT||v.store.getSelectedIds().length?v.store.render():v.events.changeMode(y.SIMPLE_SELECT,void 0,{silent:!0}),E},E.deleteAll=function(){return v.store.delete(v.store.getAllIds(),{silent:!0}),E.getMode()===y.DIRECT_SELECT?v.events.changeMode(y.SIMPLE_SELECT,void 0,{silent:!0}):v.store.render(),E},E.changeMode=function(w,B){return B===void 0&&(B={}),w===y.SIMPLE_SELECT&&E.getMode()===y.SIMPLE_SELECT?(ji(B.featureIds||[],v.store.getSelectedIds())||(v.store.setSelected(B.featureIds,{silent:!0}),v.store.render()),E):(w===y.DIRECT_SELECT&&E.getMode()===y.DIRECT_SELECT&&B.featureId===v.store.getSelectedIds()[0]||v.events.changeMode(w,B,{silent:!0}),E)},E.getMode=function(){return v.events.getMode()},E.trash=function(){return v.events.trash({silent:!0}),E},E.combineFeatures=function(){return v.events.combineFeatures({silent:!0}),E},E.uncombineFeatures=function(){return v.events.uncombineFeatures({silent:!0}),E},E.setFeatureProperty=function(w,B,V){return v.store.setFeatureProperty(w,B,V),E},E}(h,a),h.api=a;var b=Hl(h);return a.onAdd=b.onAdd,a.onRemove=b.onRemove,a.types=d,a.options=i,a};function lr(i){gs(i,this)}return lr.modes=Di,lr.constants=D,lr.lib=ps,lr})})(Vf);const El=Ks(mi);function wl(n){let e;return{c(){e=R("p"),e.textContent="Click an intervention to fill out its attributes"},m(t,r){P(t,e,r)},d(t){t&&x(e)}}}function qf(n){let e,t=n[0]==wn&&wl();return{c(){t&&t.c(),e=en()},m(r,o){t&&t.m(r,o),P(r,e,o)},p(r,[o]){r[0]==wn?t||(t=wl(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Te,o:Te,d(r){t&&t.d(r),r&&x(e)}}}const wn="edit-attribute";function Gl(){}function Jf(n,e,t){let r,o,l;Ke(n,Nt,f=>t(4,r=f)),Ke(n,je,f=>t(5,o=f)),Ke(n,Fr,f=>t(6,l=f));let{mode:s}=e,{changeMode:u}=e;function c(){cn(null)}return r.on("mousemove",f=>{if(s==wn&&l==null){let _=r.queryRenderedFeatures(f.point,{layers:["interventions-points","interventions-lines","interventions-polygons"]});var g=null;_.length>0&&(g=_[0].id),kt.set(g)}}),r.on("mouseout",()=>{s==wn&&l==null&&kt.set(null)}),r.on("click",f=>{if(s==wn){let g=r.queryRenderedFeatures(f.point,{layers:["interventions-points","interventions-lines","interventions-polygons"]});g.length>0?cn(g[0].id):cn(null)}}),li.subscribe(f=>{if(f){let g=o.features.find(_=>_.id==f);g.geometry.type=="Point"?r.flyTo({center:g.geometry.coordinates}):r.fitBounds(wi(g),{padding:200,animate:!0,duration:500}),u(wn)}}),n.$$set=f=>{"mode"in f&&t(0,s=f.mode),"changeMode"in f&&t(1,u=f.changeMode)},[s,u,Gl,c]}class Yf extends Ce{constructor(e){super(),Me(this,e,Jf,qf,Oe,{mode:0,changeMode:1,start:2,stop:3})}get start(){return Gl}get stop(){return this.$$.ctx[3]}}function Sl(n){let e;return{c(){e=R("p"),e.textContent="Click an intervention to edit its geometry"},m(t,r){P(t,e,r)},d(t){t&&x(e)}}}function Wf(n){let e,t=n[0]==Bt&&Sl();return{c(){t&&t.c(),e=en()},m(r,o){t&&t.m(r,o),P(r,e,o)},p(r,[o]){r[0]==Bt?t||(t=Sl(),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:Te,o:Te,d(r){t&&t.d(r),r&&x(e)}}}const Bt="edit-geometry";function zl(){}function Hf(n,e,t){let r;Ke(n,Nt,_=>t(7,r=_));let{mode:o}=e,{routeSnapper:l}=e,{snapTool:s}=e,{drawControls:u}=e;function c(){f&&(u.changeMode("static"),u.deleteAll(),l.stop(),je.update(_=>{let m=_.features.find(d=>d.id==f);return delete m.properties.hide_while_editing,_})),f=null,kt.set(null)}let f=null;r.on("mousemove",_=>{if(o==Bt&&f==null){let d=r.queryRenderedFeatures(_.point,{layers:["interventions-points","interventions-lines","interventions-polygons"]});var m=null;d.length>0&&(m=d[0].id),kt.set(m)}}),r.on("mouseout",()=>{o==Bt&&f==null&&kt.set(null)}),r.on("click",_=>{if(o==Bt&&f==null){let m=r.queryRenderedFeatures(_.point,{layers:["interventions-points","interventions-lines","interventions-polygons"]});m.length>0&&g(m[0].id)}}),s.addEventListener("new-route",_=>{if(o==Bt){const m=_.detail;je.update(d=>{let p=d.features.find(y=>y.id==f);return p.properties.length_meters=m.properties.length_meters,p.properties.waypoints=m.properties.waypoints,delete p.properties.hide_while_editing,p.geometry=m.geometry,d}),f=null}}),s.addEventListener("no-new-route",()=>{o==Bt&&(je.update(_=>{let m=_.features.find(d=>d.id==f);return delete m.properties.hide_while_editing,_}),f=null)}),r.on("draw.update",_=>{if(o==Bt){const m=_.features[0];je.update(d=>{let p=d.features.find(y=>y.id==f);return p.geometry=m.geometry,d})}}),r.on("draw.selectionchange",_=>{o==Bt&&_.features.length==0&&(u.changeMode("static"),u.deleteAll(),je.update(m=>{let d=m.features.find(p=>p.id==f);return delete d.properties.hide_while_editing,m}),f=null)});function g(_){kt.set(null);let m;je.update(d=>(m=d.features.find(p=>p.id==_),m.properties.hide_while_editing=!0,d)),f=_,m.geometry.type=="LineString"?l.editExisting(m):m.geometry.type=="Polygon"?(u.add(m),u.changeMode("direct_select",{featureId:f})):m.geometry.type=="Point"&&(u.add(m),u.changeMode("simple_select"))}return n.$$set=_=>{"mode"in _&&t(0,o=_.mode),"routeSnapper"in _&&t(1,l=_.routeSnapper),"snapTool"in _&&t(2,s=_.snapTool),"drawControls"in _&&t(3,u=_.drawControls)},[o,l,s,u,zl,c]}class Zf extends Ce{constructor(e){super(),Me(this,e,Hf,Wf,Oe,{mode:0,routeSnapper:1,snapTool:2,drawControls:3,start:4,stop:5})}get start(){return zl}get stop(){return this.$$.ctx[5]}}let Ee;const Vl=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});Vl.decode();let Cr=new Uint8Array;function zn(){return Cr.byteLength===0&&(Cr=new Uint8Array(Ee.memory.buffer)),Cr}function Sn(n,e){return Vl.decode(zn().subarray(n,n+e))}const Gt=new Array(32).fill(void 0);Gt.push(void 0,null,!0,!1);let Vn=Gt.length;function $e(n){Vn===Gt.length&&Gt.push(Gt.length+1);const e=Vn;return Vn=Gt[e],Gt[e]=n,e}function Se(n){return Gt[n]}function Xf(n){n<36||(Gt[n]=Vn,Vn=n)}function _i(n){const e=Se(n);return Xf(n),e}function ri(n){return n==null}let Mr=new Float64Array;function Kf(){return Mr.byteLength===0&&(Mr=new Float64Array(Ee.memory.buffer)),Mr}let Or=new Int32Array;function et(){return Or.byteLength===0&&(Or=new Int32Array(Ee.memory.buffer)),Or}let Kt=0;const Ir=new TextEncoder("utf-8"),Qf=typeof Ir.encodeInto=="function"?function(n,e){return Ir.encodeInto(n,e)}:function(n,e){const t=Ir.encode(n);return e.set(t),{read:n.length,written:t.length}};function kr(n,e,t){if(t===void 0){const u=Ir.encode(n),c=e(u.length);return zn().subarray(c,c+u.length).set(u),Kt=u.length,c}let r=n.length,o=e(r);const l=zn();let s=0;for(;s<r;s++){const u=n.charCodeAt(s);if(u>127)break;l[o+s]=u}if(s!==r){s!==0&&(n=n.slice(s)),o=t(o,r,r=s+n.length*3);const u=zn().subarray(o+s,o+r),c=Qf(n,u);s+=c.written}return Kt=s,o}function bi(n){const e=typeof n;if(e=="number"||e=="boolean"||n==null)return`${n}`;if(e=="string")return`"${n}"`;if(e=="symbol"){const o=n.description;return o==null?"Symbol":`Symbol(${o})`}if(e=="function"){const o=n.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(n)){const o=n.length;let l="[";o>0&&(l+=bi(n[0]));for(let s=1;s<o;s++)l+=", "+bi(n[s]);return l+="]",l}const t=/\[object ([^\]]+)\]/.exec(toString.call(n));let r;if(t.length>1)r=t[1];else return toString.call(n);if(r=="Object")try{return"Object("+JSON.stringify(n)+")"}catch{return"Object"}return n instanceof Error?`${n.name}: ${n.message}
${n.stack}`:r}function $f(n,e){const t=e(n.length*1);return zn().set(n,t/1),Kt=n.length,t}function ii(n,e){try{return n.apply(this,e)}catch(t){Ee.__wbindgen_exn_store($e(t))}}class Ar{static __wrap(e){const t=Object.create(Ar.prototype);return t.ptr=e,t}__destroy_into_raw(){const e=this.ptr;return this.ptr=0,e}free(){const e=this.__destroy_into_raw();Ee.__wbg_jsroutesnapper_free(e)}constructor(e){try{const l=Ee.__wbindgen_add_to_stack_pointer(-16),s=$f(e,Ee.__wbindgen_malloc),u=Kt;Ee.jsroutesnapper_new(l,s,u);var t=et()[l/4+0],r=et()[l/4+1],o=et()[l/4+2];if(o)throw _i(r);return Ar.__wrap(t)}finally{Ee.__wbindgen_add_to_stack_pointer(16)}}setConfig(e){Ee.jsroutesnapper_setConfig(this.ptr,$e(e))}toFinalFeature(){try{const r=Ee.__wbindgen_add_to_stack_pointer(-16);Ee.jsroutesnapper_toFinalFeature(r,this.ptr);var e=et()[r/4+0],t=et()[r/4+1];let o;return e!==0&&(o=Sn(e,t).slice(),Ee.__wbindgen_free(e,t*1)),o}finally{Ee.__wbindgen_add_to_stack_pointer(16)}}renderGeojson(){try{const r=Ee.__wbindgen_add_to_stack_pointer(-16);Ee.jsroutesnapper_renderGeojson(r,this.ptr);var e=et()[r/4+0],t=et()[r/4+1];return Sn(e,t)}finally{Ee.__wbindgen_add_to_stack_pointer(16),Ee.__wbindgen_free(e,t)}}setSnapMode(e){Ee.jsroutesnapper_setSnapMode(this.ptr,e)}onMouseMove(e,t,r){return Ee.jsroutesnapper_onMouseMove(this.ptr,e,t,r)!==0}onClick(){Ee.jsroutesnapper_onClick(this.ptr)}onDragStart(){return Ee.jsroutesnapper_onDragStart(this.ptr)!==0}onMouseUp(){return Ee.jsroutesnapper_onMouseUp(this.ptr)!==0}clearState(){Ee.jsroutesnapper_clearState(this.ptr)}editExisting(e){try{const o=Ee.__wbindgen_add_to_stack_pointer(-16);Ee.jsroutesnapper_editExisting(o,this.ptr,$e(e));var t=et()[o/4+0],r=et()[o/4+1];if(r)throw _i(t)}finally{Ee.__wbindgen_add_to_stack_pointer(16)}}}async function ec(n,e){if(typeof Response=="function"&&n instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(n,e)}catch(r){if(n.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await n.arrayBuffer();return await WebAssembly.instantiate(t,e)}else{const t=await WebAssembly.instantiate(n,e);return t instanceof WebAssembly.Instance?{instance:t,module:n}:t}}function tc(){const n={};return n.wbg={},n.wbg.__wbindgen_string_new=function(e,t){const r=Sn(e,t);return $e(r)},n.wbg.__wbindgen_object_drop_ref=function(e){_i(e)},n.wbg.__wbindgen_boolean_get=function(e){const t=Se(e);return typeof t=="boolean"?t?1:0:2},n.wbg.__wbindgen_error_new=function(e,t){const r=new Error(Sn(e,t));return $e(r)},n.wbg.__wbindgen_is_object=function(e){const t=Se(e);return typeof t=="object"&&t!==null},n.wbg.__wbindgen_is_undefined=function(e){return Se(e)===void 0},n.wbg.__wbindgen_in=function(e,t){return Se(e)in Se(t)},n.wbg.__wbindgen_number_get=function(e,t){const r=Se(t),o=typeof r=="number"?r:void 0;Kf()[e/8+1]=ri(o)?0:o,et()[e/4+0]=!ri(o)},n.wbg.__wbindgen_jsval_loose_eq=function(e,t){return Se(e)==Se(t)},n.wbg.__wbindgen_string_get=function(e,t){const r=Se(t),o=typeof r=="string"?r:void 0;var l=ri(o)?0:kr(o,Ee.__wbindgen_malloc,Ee.__wbindgen_realloc),s=Kt;et()[e/4+1]=s,et()[e/4+0]=l},n.wbg.__wbg_String_91fba7ded13ba54c=function(e,t){const r=String(Se(t)),o=kr(r,Ee.__wbindgen_malloc,Ee.__wbindgen_realloc),l=Kt;et()[e/4+1]=l,et()[e/4+0]=o},n.wbg.__wbindgen_object_clone_ref=function(e){const t=Se(e);return $e(t)},n.wbg.__wbg_getwithrefkey_15c62c2b8546208d=function(e,t){const r=Se(e)[Se(t)];return $e(r)},n.wbg.__wbg_log_4b5638ad60bdc54a=function(e){console.log(Se(e))},n.wbg.__wbg_get_57245cc7d7c7619d=function(e,t){const r=Se(e)[t>>>0];return $e(r)},n.wbg.__wbg_length_6e3bbe7c8bd4dbd8=function(e){return Se(e).length},n.wbg.__wbindgen_is_function=function(e){return typeof Se(e)=="function"},n.wbg.__wbg_next_579e583d33566a86=function(e){const t=Se(e).next;return $e(t)},n.wbg.__wbg_next_aaef7c8aa5e212ac=function(){return ii(function(e){const t=Se(e).next();return $e(t)},arguments)},n.wbg.__wbg_done_1b73b0672e15f234=function(e){return Se(e).done},n.wbg.__wbg_value_1ccc36bc03462d71=function(e){const t=Se(e).value;return $e(t)},n.wbg.__wbg_iterator_6f9d4f28845f426c=function(){return $e(Symbol.iterator)},n.wbg.__wbg_get_765201544a2b6869=function(){return ii(function(e,t){const r=Reflect.get(Se(e),Se(t));return $e(r)},arguments)},n.wbg.__wbg_call_97ae9d8645dc388b=function(){return ii(function(e,t){const r=Se(e).call(Se(t));return $e(r)},arguments)},n.wbg.__wbg_isArray_27c46c67f498e15d=function(e){return Array.isArray(Se(e))},n.wbg.__wbg_instanceof_ArrayBuffer_e5e48f4762c5610b=function(e){let t;try{t=Se(e)instanceof ArrayBuffer}catch{t=!1}return t},n.wbg.__wbg_buffer_3f3d764d4747d564=function(e){const t=Se(e).buffer;return $e(t)},n.wbg.__wbg_new_8c3f0052272a457a=function(e){const t=new Uint8Array(Se(e));return $e(t)},n.wbg.__wbg_set_83db9690f9353e79=function(e,t,r){Se(e).set(Se(t),r>>>0)},n.wbg.__wbg_length_9e1ae1900cb0fbd5=function(e){return Se(e).length},n.wbg.__wbg_instanceof_Uint8Array_971eeda69eb75003=function(e){let t;try{t=Se(e)instanceof Uint8Array}catch{t=!1}return t},n.wbg.__wbg_new_abda76e883ba8a5f=function(){const e=new Error;return $e(e)},n.wbg.__wbg_stack_658279fe44541cf6=function(e,t){const r=Se(t).stack,o=kr(r,Ee.__wbindgen_malloc,Ee.__wbindgen_realloc),l=Kt;et()[e/4+1]=l,et()[e/4+0]=o},n.wbg.__wbg_error_f851667af71bcfc6=function(e,t){try{console.error(Sn(e,t))}finally{Ee.__wbindgen_free(e,t)}},n.wbg.__wbindgen_debug_string=function(e,t){const r=bi(Se(t)),o=kr(r,Ee.__wbindgen_malloc,Ee.__wbindgen_realloc),l=Kt;et()[e/4+1]=l,et()[e/4+0]=o},n.wbg.__wbindgen_throw=function(e,t){throw new Error(Sn(e,t))},n.wbg.__wbindgen_memory=function(){const e=Ee.memory;return $e(e)},n}function nc(n,e){return Ee=n.exports,ql.__wbindgen_wasm_module=e,Mr=new Float64Array,Or=new Int32Array,Cr=new Uint8Array,Ee}async function ql(n){typeof n>"u"&&(n="/atip/draw_v3/assets/route_snapper_bg.wasm");const e=tc();(typeof n=="string"||typeof Request=="function"&&n instanceof Request||typeof URL=="function"&&n instanceof URL)&&(n=fetch(n));const{instance:t,module:r}=await ec(await n,e);return nc(t,r)}var Yn,vi,At,Ht;class rc{constructor(e,t,r){ei(this,Yn);ei(this,At);this.controlDiv=r,this.map=e,console.time("Deserialize and setup JsRouteSnapper"),this.inner=new Ar(t),console.timeEnd("Deserialize and setup JsRouteSnapper"),console.log("JsRouteSnapper ready, waiting for idle event"),this.active=!1,this.loaded=!1,this.map.once("idle",()=>{console.log("JsRouteSnapper now usable"),this.map.addSource("route-snapper",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),this.map.addLayer({id:"route-points",type:"circle",source:"route-snapper",paint:{"circle-radius":["match",["get","type"],"unimportant",10/2,10],"circle-color":["match",["get","type"],"hovered","green","important","red","black"]},filter:["in","$type","Point"]}),this.map.addLayer({id:"route-lines",type:"line",source:"route-snapper",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":"black","line-width":2.5},filter:["in","$type","LineString"]}),this.loaded=!0,this.map.on("mousemove",s=>{if(!this.active)return;const u={x:s.point.x-30,y:s.point.y},c=this.map.unproject(s.point).distanceTo(this.map.unproject(u));this.inner.onMouseMove(s.lngLat.lng,s.lngLat.lat,c)&&Pt(this,At,Ht).call(this)}),this.map.on("click",()=>{this.active&&(this.inner.onClick(),Pt(this,At,Ht).call(this))}),this.map.on("dragstart",s=>{this.active&&this.inner.onDragStart()&&this.map.dragPan.disable()}),this.map.on("mouseup",s=>{this.active&&this.inner.onMouseUp()&&this.map.dragPan.enable()}),document.addEventListener("keypress",s=>{this.active&&s.key=="Enter"&&(s.preventDefault(),Pt(this,Yn,vi).call(this))}),document.addEventListener("keydown",s=>{this.active&&s.key=="Shift"&&(s.preventDefault(),this.inner.setSnapMode(!1),Pt(this,At,Ht).call(this))}),document.addEventListener("keyup",s=>{this.active&&s.key=="Shift"&&(s.preventDefault(),this.inner.setSnapMode(!0),Pt(this,At,Ht).call(this))}),this.stop()})}isActive(){return this.active}tearDown(){this.loaded&&(this.map.removeLayer("route-points"),this.map.removeLayer("route-lines"),this.map.removeSource("route-snapper"))}editExisting(e){if(!this.loaded){console.error("editExisting called before the map idle event received. Not starting tool.");return}e.properties.waypoints||(e.properties.waypoints=[{lon:e.geometry.coordinates[0][0],lat:e.geometry.coordinates[0][1],snapped:!0},{lon:e.geometry.coordinates[e.geometry.coordinates.length-1][0],lat:e.geometry.coordinates[e.geometry.coordinates.length-1][1],snapped:!0}]),this.start(),this.inner.editExisting(e.properties.waypoints),Pt(this,At,Ht).call(this)}stop(){if(!this.loaded)return;this.active=!1,this.inner.clearState(),Pt(this,At,Ht).call(this),this.controlDiv.innerHTML="";let e=document.createElement("button");e.innerText="Route tool",e.type="button",e.onclick=()=>{this.controlDiv.dispatchEvent(new CustomEvent("activate")),this.start()},this.controlDiv.appendChild(e)}start(){if(this.active)return;this.active=!0;let e=document.createElement("button");e.type="button",e.innerText="Finish route",e.onclick=()=>{Pt(this,Yn,vi).call(this)};let t=document.createElement("button");t.type="button",t.innerText="Cancel",t.onclick=()=>{this.controlDiv.dispatchEvent(new CustomEvent("no-new-route")),this.stop()},this.controlDiv.innerHTML="";let r=document.createElement("div");r.style="display: flex; justify-content: space-evenly;",r.appendChild(e),r.appendChild(t),this.controlDiv.appendChild(r);let o=document.createElement("input");o.type="checkbox",o.id="avoidDoublingBack",o.onclick=()=>{this.inner.setConfig({avoid_doubling_back:o.checked}),Pt(this,At,Ht).call(this)};let l=document.createElement("label");l.innerText="Avoid doubling back",l.for=o.id;let s=document.createElement("div");s.appendChild(o),s.appendChild(l),this.controlDiv.append(s);const u=document.createElement("ul");u.innerHTML="<li><b>Click</b> green points on the transport network</br>to create snapped routes</li><li>Hold <b>Shift</b> to draw a point anywhere</li><li><b>Click and drag</b> any point to move it</li><li><b>Click</b> a red waypoint to delete it</li><li>Press <b>Enter</b> to finish route</li>",this.controlDiv.appendChild(u)}}Yn=new WeakSet,vi=function(){const e=this.inner.toFinalFeature();e?this.controlDiv.dispatchEvent(new CustomEvent("new-route",{detail:JSON.parse(e)})):this.controlDiv.dispatchEvent(new CustomEvent("no-new-route")),this.stop()},At=new WeakSet,Ht=function(){this.loaded&&this.map.getSource("route-snapper").setData(JSON.parse(this.inner.renderGeojson()))};async function ic(n,e){const t=await fetch(n),r=t.body.getReader(),o=t.headers.get("Content-Length");let l=0,s=[];for(;;){const{done:f,value:g}=await r.read();if(f)break;s.push(g),l+=g.length;const _=100*l/o;e.style=`background: linear-gradient(to right, red ${_}%, transparent 0);`}let u=new Uint8Array(l),c=0;for(let f of s)u.set(f,c),c+=f.length;return u}function oc(n){let e,t;return{c(){e=R("div"),t=R("div"),t.textContent="Route tool loading..."},m(r,o){P(r,e,o),T(e,t),n[8](t),n[9](e)},p:Te,i:Te,o:Te,d(r){r&&x(e),n[8](null),n[9](null)}}}const oi="route";function lc(n,e,t){let r;Ke(n,Nt,p=>t(10,r=p));let{mode:o}=e,{changeMode:l}=e,{url:s}=e,{snapTool:u}=e,c,{routeSnapper:f}=e;function g(){f.isActive()||f.start()}function _(){f==null||f.stop()}Tn(async()=>{await ql(),console.log(`Grabbing ${s}`);try{const p=await ic(s,c);t(2,f=new rc(r,p,u))}catch(p){console.log(`Route tool broke: ${p}`),t(0,u.innerHTML="Failed to load",u)}u.addEventListener("activate",()=>{l(oi)}),u.addEventListener("no-new-route",()=>{o==oi&&l("edit-attribute")}),u.addEventListener("new-route",p=>{if(o==oi){const y=p.detail;je.update(I=>(y.id=Pl(I),y.properties.intervention_type="route",I.features.push(y),I)),l("edit-attribute"),cn(y.id)}})}),Ei(()=>{f==null||f.tearDown()});function m(p){Ge[p?"unshift":"push"](()=>{c=p,t(1,c)})}function d(p){Ge[p?"unshift":"push"](()=>{u=p,t(0,u)})}return n.$$set=p=>{"mode"in p&&t(3,o=p.mode),"changeMode"in p&&t(4,l=p.changeMode),"url"in p&&t(5,s=p.url),"snapTool"in p&&t(0,u=p.snapTool),"routeSnapper"in p&&t(2,f=p.routeSnapper)},[u,c,f,o,l,s,g,_,m,d]}class sc extends Ce{constructor(e){super(),Me(this,e,lc,oc,Oe,{mode:3,changeMode:4,url:5,snapTool:0,routeSnapper:2,start:6,stop:7})}get start(){return this.$$.ctx[6]}get stop(){return this.$$.ctx[7]}}function ac(n){let e;return{c(){e=R("p"),e.innerHTML="Click the map to add a vertex. Click the last vertex or press <strong>Enter</strong> to finish."},m(t,r){P(t,e,r)},d(t){t&&x(e)}}}function uc(n){let e;return{c(){e=R("p"),e.textContent="Click the map to draw a new point"},m(t,r){P(t,e,r)},d(t){t&&x(e)}}}function fc(n){let e;function t(l,s){if(l[1]=="point"&&l[0]==l[1])return uc;if(l[1]=="polygon"&&l[0]==l[1])return ac}let r=t(n),o=r&&r(n);return{c(){o&&o.c(),e=en()},m(l,s){o&&o.m(l,s),P(l,e,s)},p(l,[s]){r!==(r=t(l))&&(o&&o.d(1),o=r&&r(l),o&&(o.c(),o.m(e.parentNode,e)))},i:Te,o:Te,d(l){o&&o.d(l),l&&x(e)}}}function cc(n,e,t){let r;Ke(n,Nt,_=>t(7,r=_));let{thisMode:o}=e,{mode:l}=e,{changeMode:s}=e,{drawControls:u}=e,c;function f(){u.changeMode(`draw_${o}`)}function g(){c=null,u.changeMode("static"),u.deleteAll()}return r.on("draw.create",_=>{if(l==o){const m=_.features[0];je.update(d=>(m.properties.intervention_type=o=="point"?"other":"area",m.id=Pl(d),d.features.push(m),c=m.id,d))}}),r.on("draw.modechange",_=>{if(l==o){let m=c;s("edit-attribute"),m?(cn(m),c=null):console.error(`After drawing a new ${o}, we lost the new feature ID`)}}),n.$$set=_=>{"thisMode"in _&&t(0,o=_.thisMode),"mode"in _&&t(1,l=_.mode),"changeMode"in _&&t(2,s=_.changeMode),"drawControls"in _&&t(3,u=_.drawControls)},[o,l,s,u,f,g]}class kl extends Ce{constructor(e){super(),Me(this,e,cc,fc,Oe,{thisMode:0,mode:1,changeMode:2,drawControls:3,start:4,stop:5})}get start(){return this.$$.ctx[4]}get stop(){return this.$$.ctx[5]}}function Tl(n){let e,t,r,o,l,s,u,c,f,g,_,m,d,p,y,I,G,O,C,A,N,D,ce,z,le,X,F,ne,te,ie,Q,de,ke,Ie,Le,Be={mode:n[4],changeMode:n[10]};u=new Yf({props:Be}),n[12](u);let ue=n[1]&&n[2]&&Cl(n),M={thisMode:"point",mode:n[4],changeMode:n[10],drawControls:n[3]};A=new kl({props:M}),n[16](A);let pe={thisMode:"polygon",mode:n[4],changeMode:n[10],drawControls:n[3]};F=new kl({props:pe}),n[18](F);function it(fe){n[20](fe)}function Cn(fe){n[21](fe)}let Mt={mode:n[4],changeMode:n[10],url:n[0]};return n[1]!==void 0&&(Mt.routeSnapper=n[1]),n[2]!==void 0&&(Mt.snapTool=n[2]),ie=new sc({props:Mt}),n[19](ie),Ge.push(()=>bt(ie,"routeSnapper",it,n[1])),Ge.push(()=>bt(ie,"snapTool",Cn,n[2])),{c(){e=R("div"),t=R("div"),r=R("button"),o=be("Edit attributes"),s=q(),ge(u.$$.fragment),c=q(),f=R("div"),g=R("button"),_=be("Edit geometry"),d=q(),ue&&ue.c(),p=q(),y=R("div"),I=R("button"),G=be("New point"),C=q(),ge(A.$$.fragment),N=q(),D=R("div"),ce=R("button"),z=be("New polygon"),X=q(),ge(F.$$.fragment),ne=q(),te=R("div"),ge(ie.$$.fragment),J(r,"type","button"),r.disabled=l=n[4]=="edit-attribute",J(r,"class","svelte-51rdg3"),J(g,"type","button"),g.disabled=m=n[4]=="edit-geometry",J(g,"class","svelte-51rdg3"),J(I,"type","button"),I.disabled=O=n[4]=="point",J(I,"class","svelte-51rdg3"),J(ce,"type","button"),ce.disabled=le=n[4]=="polygon",J(ce,"class","svelte-51rdg3"),J(e,"class","toolbox svelte-51rdg3")},m(fe,oe){P(fe,e,oe),T(e,t),T(t,r),T(r,o),T(t,s),me(u,t,null),T(e,c),T(e,f),T(f,g),T(g,_),T(f,d),ue&&ue.m(f,null),T(e,p),T(e,y),T(y,I),T(I,G),T(y,C),me(A,y,null),T(e,N),T(e,D),T(D,ce),T(ce,z),T(D,X),me(F,D,null),T(e,ne),T(e,te),me(ie,te,null),ke=!0,Ie||(Le=[$(r,"click",n[11]),$(g,"click",n[13]),$(I,"click",n[15]),$(ce,"click",n[17])],Ie=!0)},p(fe,oe){(!ke||oe&16&&l!==(l=fe[4]=="edit-attribute"))&&(r.disabled=l);const ee={};oe&16&&(ee.mode=fe[4]),u.$set(ee),(!ke||oe&16&&m!==(m=fe[4]=="edit-geometry"))&&(g.disabled=m),fe[1]&&fe[2]?ue?(ue.p(fe,oe),oe&6&&j(ue,1)):(ue=Cl(fe),ue.c(),j(ue,1),ue.m(f,null)):ue&&(tt(),Y(ue,1,1,()=>{ue=null}),nt()),(!ke||oe&16&&O!==(O=fe[4]=="point"))&&(I.disabled=O);const Mn={};oe&16&&(Mn.mode=fe[4]),oe&8&&(Mn.drawControls=fe[3]),A.$set(Mn),(!ke||oe&16&&le!==(le=fe[4]=="polygon"))&&(ce.disabled=le);const On={};oe&16&&(On.mode=fe[4]),oe&8&&(On.drawControls=fe[3]),F.$set(On);const Et={};oe&16&&(Et.mode=fe[4]),oe&1&&(Et.url=fe[0]),!Q&&oe&2&&(Q=!0,Et.routeSnapper=fe[1],vt(()=>Q=!1)),!de&&oe&4&&(de=!0,Et.snapTool=fe[2],vt(()=>de=!1)),ie.$set(Et)},i(fe){ke||(j(u.$$.fragment,fe),j(ue),j(A.$$.fragment,fe),j(F.$$.fragment,fe),j(ie.$$.fragment,fe),ke=!0)},o(fe){Y(u.$$.fragment,fe),Y(ue),Y(A.$$.fragment,fe),Y(F.$$.fragment,fe),Y(ie.$$.fragment,fe),ke=!1},d(fe){fe&&x(e),n[12](null),_e(u),ue&&ue.d(),n[16](null),_e(A),n[18](null),_e(F),n[19](null),_e(ie),Ie=!1,ft(Le)}}}function Cl(n){let e,t,r={mode:n[4],routeSnapper:n[1],snapTool:n[2],drawControls:n[3]};return e=new Zf({props:r}),n[14](e),{c(){ge(e.$$.fragment)},m(o,l){me(e,o,l),t=!0},p(o,l){const s={};l&16&&(s.mode=o[4]),l&2&&(s.routeSnapper=o[1]),l&4&&(s.snapTool=o[2]),l&8&&(s.drawControls=o[3]),e.$set(s)},i(o){t||(j(e.$$.fragment,o),t=!0)},o(o){Y(e.$$.fragment,o),t=!1},d(o){n[14](null),_e(e,o)}}}function dc(n){let e,t,r=n[3]&&Tl(n);return{c(){r&&r.c(),e=en()},m(o,l){r&&r.m(o,l),P(o,e,l),t=!0},p(o,[l]){o[3]?r?(r.p(o,l),l&8&&j(r,1)):(r=Tl(o),r.c(),j(r,1),r.m(e.parentNode,e)):r&&(tt(),Y(r,1,1,()=>{r=null}),nt())},i(o){t||(j(r),t=!0)},o(o){Y(r),t=!1},d(o){r&&r.d(o),o&&x(e)}}}function hc(n,e,t){let r;Ke(n,Nt,X=>t(22,r=X));let{routeUrl:o}=e,l,s,u,c="edit-attribute",f,g,_,m,d;function p(X){let F={"edit-attribute":f,"edit-geometry":g,route:_,point:m,polygon:d};if(c==X){console.log(`Mode is already ${c}, not changing`);return}console.log(`Stopping old mode ${c}`),F[c].stop(),t(4,c=X),console.log(`Starting new mode ${c}`),F[c].start()}Tn(()=>{let X={};X.onSetup=function(){return this.setActionableState(),{}},X.toDisplayFeatures=function(ne,te,ie){ie(te)},t(3,u=new El({displayControlsDefault:!1,controls:{point:!0,polygon:!0},modes:Object.assign({static:X},El.modes)})),r.addControl(u),u.changeMode("static");let F=document.getElementsByClassName("maplibregl-ctrl-top-right");for(;F.length>0;)F[0].remove()}),Ei(()=>{u&&(r.removeControl(u),t(3,u=null))});const y=()=>p("edit-attribute");function I(X){Ge[X?"unshift":"push"](()=>{f=X,t(5,f)})}const G=()=>p("edit-geometry");function O(X){Ge[X?"unshift":"push"](()=>{g=X,t(6,g)})}const C=()=>p("point");function A(X){Ge[X?"unshift":"push"](()=>{m=X,t(8,m)})}const N=()=>p("polygon");function D(X){Ge[X?"unshift":"push"](()=>{d=X,t(9,d)})}function ce(X){Ge[X?"unshift":"push"](()=>{_=X,t(7,_)})}function z(X){l=X,t(1,l)}function le(X){s=X,t(2,s)}return n.$$set=X=>{"routeUrl"in X&&t(0,o=X.routeUrl)},[o,l,s,u,c,f,g,_,m,d,p,y,I,G,O,C,A,N,D,ce,z,le]}class pc extends Ce{constructor(e){super(),Me(this,e,hc,dc,Oe,{routeUrl:0})}}function gc(n){let e,t,r,o,l,s,u,c;return{c(){e=R("div"),t=R("button"),t.textContent="Home",r=q(),o=R("button"),o.textContent="About",l=q(),s=R("button"),s.textContent="Instructions",J(t,"type","button"),J(t,"onclick","window.open('index.html');"),J(o,"type","button"),J(s,"type","button"),J(e,"slot","nav")},m(f,g){P(f,e,g),T(e,t),T(e,r),T(e,o),T(e,l),T(e,s),u||(c=[$(o,"click",n[6]),$(s,"click",n[7])],u=!0)},p:Te,d(f){f&&x(e),u=!1,ft(c)}}}function mc(n){let e,t,r,o,l,s,u,c,f,g,_,m;return l=new Af({props:{boundaryGeojson:n[3]}}),u=new If({props:{authorityName:n[4]}}),_=new vf({}),{c(){e=R("div"),t=R("h1"),r=be(n[4]),o=q(),ge(l.$$.fragment),s=q(),ge(u.$$.fragment),c=q(),f=R("br"),g=q(),ge(_.$$.fragment),J(e,"slot","sidebar")},m(d,p){P(d,e,p),T(e,t),T(t,r),T(t,o),me(l,t,null),T(e,s),me(u,e,null),T(e,c),T(e,f),T(e,g),me(_,e,null),m=!0},p(d,p){const y={};p&8&&(y.boundaryGeojson=d[3]),l.$set(y)},i(d){m||(j(l.$$.fragment,d),j(u.$$.fragment,d),j(_.$$.fragment,d),m=!0)},o(d){Y(l.$$.fragment,d),Y(u.$$.fragment,d),Y(_.$$.fragment,d),m=!1},d(d){d&&x(e),_e(l),_e(u),_e(_)}}}function _c(n){let e,t,r,o,l,s,u,c,f,g,_,m;return e=new sf({props:{boundaryGeojson:n[3]}}),r=new Bf({}),l=new zf({}),u=new pc({props:{routeUrl:n[2]}}),f=new Ff({props:{style:n[5]}}),_=new Uf({}),{c(){ge(e.$$.fragment),t=q(),ge(r.$$.fragment),o=q(),ge(l.$$.fragment),s=q(),ge(u.$$.fragment),c=q(),ge(f.$$.fragment),g=q(),ge(_.$$.fragment)},m(d,p){me(e,d,p),P(d,t,p),me(r,d,p),P(d,o,p),me(l,d,p),P(d,s,p),me(u,d,p),P(d,c,p),me(f,d,p),P(d,g,p),me(_,d,p),m=!0},p(d,p){const y={};p&8&&(y.boundaryGeojson=d[3]),e.$set(y);const I={};p&4&&(I.routeUrl=d[2]),u.$set(I)},i(d){m||(j(e.$$.fragment,d),j(r.$$.fragment,d),j(l.$$.fragment,d),j(u.$$.fragment,d),j(f.$$.fragment,d),j(_.$$.fragment,d),m=!0)},o(d){Y(e.$$.fragment,d),Y(r.$$.fragment,d),Y(l.$$.fragment,d),Y(u.$$.fragment,d),Y(f.$$.fragment,d),Y(_.$$.fragment,d),m=!1},d(d){_e(e,d),d&&x(t),_e(r,d),d&&x(o),_e(l,d),d&&x(s),_e(u,d),d&&x(c),_e(f,d),d&&x(g),_e(_,d)}}}function bc(n){let e,t,r;return t=new Eu({props:{style:n[5],$$slots:{default:[_c]},$$scope:{ctx:n}}}),{c(){e=R("div"),ge(t.$$.fragment),J(e,"slot","main")},m(o,l){P(o,e,l),me(t,e,null),r=!0},p(o,l){const s={};l&8204&&(s.$$scope={dirty:l,ctx:o}),t.$set(s)},i(o){r||(j(t.$$.fragment,o),r=!0)},o(o){Y(t.$$.fragment,o),r=!1},d(o){o&&x(e),_e(t)}}}function vc(n){let e,t,r,o,l,s,u,c;e=new Mu({props:{$$slots:{main:[bc],sidebar:[mc],nav:[gc]},$$scope:{ctx:n}}});function f(d){n[8](d)}let g={};n[0]!==void 0&&(g.open=n[0]),r=new Qs({props:g}),Ge.push(()=>bt(r,"open",f,n[0]));function _(d){n[9](d)}let m={};return n[1]!==void 0&&(m.open=n[1]),s=new bu({props:m}),Ge.push(()=>bt(s,"open",_,n[1])),{c(){ge(e.$$.fragment),t=q(),ge(r.$$.fragment),l=q(),ge(s.$$.fragment)},m(d,p){me(e,d,p),P(d,t,p),me(r,d,p),P(d,l,p),me(s,d,p),c=!0},p(d,[p]){const y={};p&8204&&(y.$$scope={dirty:p,ctx:d}),e.$set(y);const I={};!o&&p&1&&(o=!0,I.open=d[0],vt(()=>o=!1)),r.$set(I);const G={};!u&&p&2&&(u=!0,G.open=d[1],vt(()=>u=!1)),s.$set(G)},i(d){c||(j(e.$$.fragment,d),j(r.$$.fragment,d),j(s.$$.fragment,d),c=!0)},o(d){Y(e.$$.fragment,d),Y(r.$$.fragment,d),Y(s.$$.fragment,d),c=!1},d(d){_e(e,d),d&&x(t),_e(r,d),d&&x(l),_e(s,d)}}}function yc(n,e,t){let r=!1,o=!1,l=window.location.hostname.includes("atip.uk");const s=new URLSearchParams(window.location.search);let u=s.get("authority"),c=s.get("style")||"streets";var f=`https://atip.uk/route-snappers/${u}.bin`;l||(f=`https://atip.uk/route-snappers-dev/${u}.bin`);function g(){t(0,r=!r),t(1,o=!1)}function _(){t(1,o=!o),t(0,r=!1)}let m;Tn(async()=>{t(3,m=await d())});async function d(){const G=await(await fetch($s)).text(),O=JSON.parse(G);return O.features=O.features.filter(C=>C.properties.name==u),O}function p(I){r=I,t(0,r)}function y(I){o=I,t(1,o)}return[r,o,f,m,u,c,g,_,p,y]}class Ec extends Ce{constructor(e){super(),Me(this,e,yc,vc,Oe,{})}}new Ec({target:document.getElementById("app")});
