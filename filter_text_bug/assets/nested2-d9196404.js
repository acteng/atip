import{S as U,i as z,s as W,az as Br,b as V,c as Y,e as O,d as L,g as h,C as Hr,h as K,j as _,k,m as b,w as dt,l as J,t as m,n as d,o as g,p as v,aK as Rt,aL as Wt,aM as Gt,aN as Ut,$ as ke,ar as ae,as as fe,aT as gr,aU as mn,aV as Rr,q as Be,a2 as sn,aW as _n,aX as Wr,aY as Gr,D as te,aZ as Ur,a_ as lt,u as w,f as an,an as zr,A as Tt,ap as Zt,r as Lt,F as dr,a as yt,v as gn,B as H,a$ as Qt,aE as qr,aB as De,aO as Vr,aP as Xr,K as B,N as Z,O as Q,P as x,x as xt,aa as Kr,aS as X,ao as Le,aC as Dt,b0 as ce,b1 as _e,R as hr,b2 as fn,b3 as un,E as br,b4 as dn,J as Yr,aH as hn,_ as Jr,Z as bn,Y as vn,X as Et,aR as wn,L as Zr,M as Qr,y as xr}from"./index-e4fa1fb7.js";import{e as Ft,C as Ce,b as Ot,d as se,c as Mt,a as jt,B as el,S as tl,l as ot,L as nl}from"./StreetViewController-566da81b.js";import{c as rl,e as kn,i as vr,L as $e,l as ll,j as ve,C as Ve,Z as ol}from"./index-07b54b7b.js";import{L as sl,G as ht,h as q,a as He,F as il}from"./GeoJSON-872f1126.js";import{P as le}from"./Popup-ebb53f65.js";const al="/atip/filter_text_bug/assets/help-d011708a.svg";function fl(r){let e,n;const t=r[1].default,l=Rt(t,r,r[4],null);return{c(){e=O("div"),l&&l.c(),K(e,"class","govuk-prose")},m(o,i){_(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Wt(l,t,o,o[4],n?Ut(t,o[4],i,null):Gt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&g(e),l&&l.d(o)}}}function ul(r){let e,n,t,l,o,i,u,s,a;function f(p){r[3](p)}let c={title:"Help",$$slots:{default:[fl]},$$scope:{ctx:r}};return r[0]!==void 0&&(c.open=r[0]),o=new Br({props:c}),V.push(()=>Y(o,"open",f)),{c(){e=O("button"),n=O("img"),l=L(),h(o.$$.fragment),Hr(n.src,t=al)||K(n,"src",t),K(n,"title","Help"),K(n,"alt","Help"),K(e,"class","svelte-7d9d1l")},m(p,$){_(p,e,$),k(e,n),_(p,l,$),b(o,p,$),u=!0,s||(a=dt(e,"click",r[2]),s=!0)},p(p,[$]){const y={};$&16&&(y.$$scope={dirty:$,ctx:p}),!i&&$&1&&(i=!0,y.open=p[0],J(()=>i=!1)),o.$set(y)},i(p){u||(m(o.$$.fragment,p),u=!0)},o(p){d(o.$$.fragment,p),u=!1},d(p){p&&(g(e),g(l)),v(o,p),s=!1,a()}}}function cl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class ie extends U{constructor(e){super(),z(this,e,cl,ul,W,{})}}function yn(r){let e=r[0],n,t,l=Sn(r);return{c(){l.c(),n=ke()},m(o,i){l.m(o,i),_(o,n,i),t=!0},p(o,i){i&1&&W(e,e=o[0])?(ae(),d(l,1,1,te),fe(),l=Sn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){d(l),t=!1},d(o){o&&g(n),l.d(o)}}}function Sn(r){let e;const n=r[9].default,t=Rt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Wt(t,n,l,l[8],e?Ut(n,l[8],o,null):Gt(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function $l(r){let e,n,t=r[0]&&yn(r);return{c(){t&&t.c(),e=ke()},m(l,o){t&&t.m(l,o),_(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=yn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ae(),d(t,1,1,()=>{t=null}),fe())},i(l){n||(m(t),n=!0)},o(l){d(t),n=!1},d(l){l&&g(e),t&&t.d(l)}}}function pl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=gr("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!mn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let $=new Ur;mn.addProtocol("pmtiles",$.tile)}const{map:c,self:p}=Rr();return Be(r,c,$=>n(7,t=$)),Be(r,p,$=>n(0,l=$)),sn(()=>{if(l){let $=l;_n(p,l=null,l),Wr().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource($))})}}),r.$$set=$=>{"id"in $&&n(3,u=$.id),"url"in $&&n(4,s=$.url),"tiles"in $&&n(5,a=$.tiles),"promoteId"in $&&n(6,f=$.promoteId),"$$scope"in $&&n(8,i=$.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&t&&l!==u&&(l&&t.removeSource(l),_n(p,l=u,l),t.addSource(l,Gr({type:"vector",url:s,tiles:a,promoteId:f})))},[l,c,p,u,s,a,f,t,i,o]}class pe extends U{constructor(e){super(),z(this,e,pl,$l,W,{id:3,url:4,tiles:5,promoteId:6})}}function ml(r){let e;const n=r[15].default,t=Rt(n,r,r[23],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8388608)&&Wt(t,n,l,l[23],e?Ut(n,l[23],o,null):Gt(l[23]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function _l(r){let e,n,t;function l(i){r[16](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[ml]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new sl({props:o}),V.push(()=>Y(e,"hovered",l)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&8388608&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function gl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=gr("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:$=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:C=!1}=e,{hovered:N=null}=e,{eventsIfTopMost:I=!1}=e;function j(F){N=F,n(0,N)}function A(F){lt.call(this,r,F)}function E(F){lt.call(this,r,F)}function D(F){lt.call(this,r,F)}function P(F){lt.call(this,r,F)}function M(F){lt.call(this,r,F)}function ee(F){lt.call(this,r,F)}return r.$$set=F=>{"id"in F&&n(1,o=F.id),"source"in F&&n(2,i=F.source),"sourceLayer"in F&&n(3,u=F.sourceLayer),"beforeId"in F&&n(4,s=F.beforeId),"beforeLayerType"in F&&n(5,a=F.beforeLayerType),"paint"in F&&n(6,f=F.paint),"layout"in F&&n(7,c=F.layout),"filter"in F&&n(8,p=F.filter),"applyToClusters"in F&&n(9,$=F.applyToClusters),"minzoom"in F&&n(10,y=F.minzoom),"maxzoom"in F&&n(11,S=F.maxzoom),"hoverCursor"in F&&n(12,T=F.hoverCursor),"manageHoverState"in F&&n(13,C=F.manageHoverState),"hovered"in F&&n(0,N=F.hovered),"eventsIfTopMost"in F&&n(14,I=F.eventsIfTopMost),"$$scope"in F&&n(23,l=F.$$scope)},[N,o,i,u,s,a,f,c,p,$,y,S,T,C,I,t,j,A,E,D,P,M,ee,l]}class dl extends U{constructor(e){super(),z(this,e,gl,_l,W,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function hl(r){let e;return{c(){e=O("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function bl(r){let e,n,t,l,o=r[0]=="Private (development)"&&hl();return{c(){o&&o.c(),e=L(),n=O("p"),n.textContent="Note the ATF scheme data has not been validated.",t=L(),l=O("p"),l.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,u){o&&o.m(i,u),_(i,e,u),_(i,n,u),_(i,t,u),_(i,l,u)},p:te,d(i){i&&(g(e),g(n),g(t),g(l)),o&&o.d(i)}}}function vl(r){let e,n,t,l,o,i;return o=new ie({props:{$$slots:{default:[bl]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("App version: "),t=w(r[0]),l=L(),h(o.$$.fragment)},m(u,s){_(u,e,s),k(e,n),k(e,t),k(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(m(o.$$.fragment,u),i=!0)},o(u){d(o.$$.fragment,u),i=!1},d(u){u&&g(e),v(o)}}}function wl(r){return[an()]}class kl extends U{constructor(e){super(),z(this,e,wl,vl,W,{})}}const yl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var he=Uint8Array,xe=Uint16Array,wr=Uint32Array,kr=new he([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),yr=new he([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Sl=new he([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sr=function(r,e){for(var n=new xe(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new wr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Cr=Sr(kr,2),Tr=Cr[0],Cl=Cr[1];Tr[28]=258,Cl[258]=28;var Tl=Sr(yr,0),Ll=Tl[0],en=new xe(32768);for(var re=0;re<32768;++re){var Ue=(re&43690)>>>1|(re&21845)<<1;Ue=(Ue&52428)>>>2|(Ue&13107)<<2,Ue=(Ue&61680)>>>4|(Ue&3855)<<4,en[re]=((Ue&65280)>>>8|(Ue&255)<<8)>>>1}var kt=function(r,e,n){for(var t=r.length,l=0,o=new xe(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new xe(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new xe(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,p=c|(1<<f)-1;c<=p;++c)u[en[c]>>>s]=a}else for(u=new xe(t),l=0;l<t;++l)r[l]&&(u[l]=en[i[r[l]-1]++]>>>15-r[l]);return u},At=new he(288);for(var re=0;re<144;++re)At[re]=8;for(var re=144;re<256;++re)At[re]=9;for(var re=256;re<280;++re)At[re]=7;for(var re=280;re<288;++re)At[re]=8;var Lr=new he(32);for(var re=0;re<32;++re)Lr[re]=5;var Ol=kt(At,9,1),Al=kt(Lr,5,1),zt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},ye=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},qt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Pl=function(r){return(r+7)/8|0},cn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?xe:r.BYTES_PER_ELEMENT==4?wr:he)(n-e);return t.set(r.subarray(e,n)),t},El=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Se=function(r,e,n){var t=new Error(e||El[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Se),!n)throw t;return t},Nl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new he(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new he(t*3));var i=function(nt){var Je=e.length;if(nt>Je){var rt=new he(Math.max(Je*2,nt));rt.set(e),e=rt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,p=n.m,$=n.n,y=t*8;do{if(!f){u=ye(r,s,1);var S=ye(r,s+1,3);if(s+=3,S)if(S==1)f=Ol,c=Al,p=9,$=5;else if(S==2){var I=ye(r,s,31)+257,j=ye(r,s+10,15)+4,A=I+ye(r,s+5,31)+1;s+=14;for(var E=new he(A),D=new he(19),P=0;P<j;++P)D[Sl[P]]=ye(r,s+P*3,7);s+=j*3;for(var M=zt(D),ee=(1<<M)-1,F=kt(D,M,1),P=0;P<A;){var ue=F[ye(r,s,ee)];s+=ue&15;var T=ue>>>4;if(T<16)E[P++]=T;else{var R=0,ne=0;for(T==16?(ne=3+ye(r,s,3),s+=2,R=E[P-1]):T==17?(ne=3+ye(r,s,7),s+=3):T==18&&(ne=11+ye(r,s,127),s+=7);ne--;)E[P++]=R}}var ge=E.subarray(0,I),me=E.subarray(I);p=zt(ge),$=zt(me),f=kt(ge,p,1),c=kt(me,$,1)}else Se(1);else{var T=Pl(s)+4,C=r[T-4]|r[T-3]<<8,N=T+C;if(N>t){o&&Se(0);break}l&&i(a+C),e.set(r.subarray(T,N),a),n.b=a+=C,n.p=s=N*8,n.f=u;continue}if(s>y){o&&Se(0);break}}l&&i(a+131072);for(var oe=(1<<p)-1,We=(1<<$)-1,tt=s;;tt=s){var R=f[qt(r,s)&oe],de=R>>>4;if(s+=R&15,s>y){o&&Se(0);break}if(R||Se(2),de<256)e[a++]=de;else if(de==256){tt=s,f=null;break}else{var bt=de-254;if(de>264){var P=de-257,je=kr[P];bt=ye(r,s,(1<<je)-1)+Tr[P],s+=je}var Ge=c[qt(r,s)&We],Ye=Ge>>>4;Ge||Se(3),s+=Ge&15;var me=Ll[Ye];if(Ye>3){var je=yr[Ye];me+=qt(r,s)&(1<<je)-1,s+=je}if(s>y){o&&Se(0);break}l&&i(a+131072);for(var vt=a+bt;a<vt;a+=4)e[a]=e[a-me],e[a+1]=e[a+1-me],e[a+2]=e[a+2-me],e[a+3]=e[a+3-me];a=vt}}n.l=f,n.p=tt,n.b=a,n.f=u,f&&(u=1,n.m=p,n.d=c,n.n=$)}while(!u);return a==e.length?e:cn(e,0,a)},Il=new he(0),Ie=function(r,e){return r[e]|r[e+1]<<8},Te=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Vt=function(r,e){return Te(r,e)+Te(r,e+4)*4294967296};function Dl(r,e){return Nl(r,e)}var tn=typeof TextDecoder<"u"&&new TextDecoder,Fl=0;try{tn.decode(Il,{stream:!0}),Fl=1}catch{}var Ml=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,cn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Or(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(tn)return tn.decode(r);var l=Ml(r),o=l[0],i=l[1];return i.length&&Se(8),o}}var jl=function(r,e){return e+30+Ie(r,e+26)+Ie(r,e+28)},Bl=function(r,e,n){var t=Ie(r,e+28),l=Or(r.subarray(e+46,e+46+t),!(Ie(r,e+8)&2048)),o=e+46+t,i=Te(r,e+20),u=n&&i==4294967295?Hl(r,o):[i,Te(r,e+24),Te(r,e+42)],s=u[0],a=u[1],f=u[2];return[Ie(r,e+10),s,a,l,o+Ie(r,e+30)+Ie(r,e+32),f]},Hl=function(r,e){for(;Ie(r,e)!=1;e+=4+Ie(r,e+2));return[Vt(r,e+12),Vt(r,e+4),Vt(r,e+20)]};function Rl(r,e){for(var n={},t=r.length-22;Te(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Se(13);var l=Ie(r,t+8);if(!l)return{};var o=Te(r,t+16),i=o==4294967295||l==65535;if(i){var u=Te(r,t-12);i=Te(r,u)==101075792,i&&(l=Te(r,u+32),o=Te(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=Bl(r,o,i),c=f[0],p=f[1],$=f[2],y=f[3],S=f[4],T=f[5],C=jl(r,T);o=S,(!s||s({name:y,size:p,originalSize:$,compression:c}))&&(c?c==8?n[y]=Dl(r.subarray(C,C+p),new he($)):Se(14,"unknown compression type "+c):n[y]=cn(r,C,C+p))}return n}function Wl(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Xt):Xt(r)}function Xt(r){var e=new Uint8Array(r),n=Rl(e);return Promise.resolve(Gl(n))}function Gl(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Or(r[l])}return e}function Fe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&et(t)===e)return t;n++}}function Pt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&et(l)===e&&n.push(l),t++}return n}function Bt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&et(l)===e&&n(l,t):n(l,t),t++}}function Ul(r,e,n){var t=[];return Bt(r,e,function(l,o){t.push(n(l,o))}),t}var zl=/.+\:/;function et(r){return r.tagName.replace(zl,"")}function Ar(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+et(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Ar(r.childNodes[t]),t++;return e+="</"+et(r)+">",e}function ql(r){var e=r.documentElement,n=Fe(e,"sheetData"),t=[];return Bt(n,"row",function(l){Bt(l,"c",function(o){t.push(o)})}),t}function Vl(r,e){return Fe(e,"v")}function Xl(r,e){if(e.firstChild&&et(e.firstChild)==="is"&&e.firstChild.firstChild&&et(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Kl(r){var e=r.documentElement,n=Fe(e,"dimension");if(n)return n.getAttribute("ref")}function Yl(r){var e=r.documentElement,n=Fe(e,"cellStyleXfs");return n?Pt(n,"xf"):[]}function Jl(r){var e=r.documentElement,n=Fe(e,"cellXfs");return n?Pt(n,"xf"):[]}function Zl(r){var e=r.documentElement,n=Fe(e,"numFmts");return n?Pt(n,"numFmt"):[]}function Ql(r){var e=r.documentElement;return Ul(e,"si",function(n){var t=Fe(n,"t");if(t)return t.textContent;var l="";return Bt(n,"r",function(o){l+=Fe(o,"t").textContent}),l})}function xl(r){var e=r.documentElement;return Fe(e,"workbookPr")}function eo(r){var e=r.documentElement;return Pt(e,"Relationship")}function to(r){var e=r.documentElement,n=Fe(e,"sheets");return Pt(n,"sheet")}function no(r,e){var n=e.createDocument(r),t={},l=xl(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return to(n).forEach(o),t}function ro(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Kt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Kt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Kt(u);break}};return eo(n).forEach(l),t}function Kt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Cn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Tn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Cn(Object(n),!0).forEach(function(t){lo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Cn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function lo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function oo(r,e){if(!r)return{};var n=e.createDocument(r),t=Yl(n).map(Yt),l=Zl(n).map(so).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Tn(Tn({},t[u.xfId]),Yt(u,l)):Yt(u,l)};return Jl(n).map(o)}function so(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Yt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function io(r,e){return r?Ql(e.createDocument(r)):[]}function Pr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function ao(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=fo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fo(r,e){if(r){if(typeof r=="string")return Ln(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(r,e)}}function Ln(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function uo(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(co.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&mo(l.numberFormat.template))return!0}}var co=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],$o=/^\[\$-414\]/,po=/;@$/;function mo(r){r=r.toLowerCase(),r=r.replace($o,""),r=r.replace(po,"");for(var e=r.split(/\W+/),n=ao(e),t;!(t=n()).done;){var l=t.value;if(_o.indexOf(l)<0)return!1}return!0}var _o=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function go(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Jt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Jt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Jt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=ho(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var p=Number(r);if(isNaN(p))throw new Error('Invalid "numeric" cell value: '.concat(r));r=p,uo(r,o(),i,a)&&(r=Pr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function ho(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Jt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var bo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function vo(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function wo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=bo.indexOf(r[n]),n++;return e}function Er(r){return r=r.split(/(\d+)/),[parseInt(r[1]),wo(r[0].trim())]}function ko(r,e,n,t,l,o,i){var u=Er(r.getAttribute("r")),s=Vl(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:go(a,f,{getInlineStringValue:function(){return Xl(e,r)},getInlineStringXml:function(){return Ar(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function yo(r,e,n,t,l,o){var i=ql(r);return i.length===0?[]:i.map(function(u){return ko(u,r,e,n,t,l,o)})}function So(r,e){return Oo(r)||Lo(r,e)||To(r,e)||Co()}function Co(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function To(r,e){if(r){if(typeof r=="string")return On(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(r,e)}}function On(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Lo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Oo(r){if(Array.isArray(r))return r}function Ao(r){var e=Kl(r);if(e)return e=e.split(":").map(Er).map(function(n){var t=So(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Po(r,e,n,t,l,o){var i=e.createDocument(r),u=yo(i,e,n,t,l,o),s=Ao(i)||vo(u);return{cells:u,dimensions:s}}function Eo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=No(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function No(r,e){if(r){if(typeof r=="string")return An(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(r,e)}}function An(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Io(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=Eo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Do(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Fo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fo(r,e){if(r){if(typeof r=="string")return Pn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(r,e)}}function Pn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Mo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Do(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function jo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Nr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bo(r,e){return Wo(r)||Ro(r,e)||Nr(r,e)||Ho()}function Ho(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nr(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ro(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Wo(r){if(Array.isArray(r))return r}function Go(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Bo(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=jo(t),p;!(p=c()).done;){var $=p.value,y=$.row-1,S=$.column-1;S<i&&y<u&&(s[y][S]=$.value)}var T=e.rowMap;if(T)for(var C=0;C<s.length;)T[C]=C,C++;return s=Io(Mo(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(s=e.transformData(s)),s}function Uo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=zo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zo(r,e){if(r){if(typeof r=="string")return Nn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(r,e)}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function In(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function qo(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?In(Object(n),!0).forEach(function(t){Vo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Vo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Xo(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=qo({sheet:1},n));var t=function(p){if(!r[p])throw new Error('"'.concat(p,'" file not found inside the *.xlsx file zip archive'));return r[p]},l=ro(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?io(t(l.sharedStrings),e):[],i=l.styles?oo(t(l.styles),e):{},u=no(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var p=c.name;return{name:p}});var s=Ko(n.sheet,u.sheets);if(!s||!l.sheets[s])throw Yo(n.sheet,u.sheets);var a=Po(t(l.sheets[s]),e,o,i,u,n),f=Go(a,n);return n.properties?{data:f,properties:u}:f}function Ko(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Uo(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Yo(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function nn(r){"@babel/helpers - typeof";return nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(r)}function Dn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Jo(r,e,n){return e&&Dn(r.prototype,e),n&&Dn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Zo(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Qo(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&St(r,e)}function xo(r){var e=Ir();return function(){var t=Ct(r),l;if(e){var o=Ct(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return es(this,l)}}function es(r,e){if(e&&(nn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ts(r)}function ts(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function rn(r){var e=typeof Map=="function"?new Map:void 0;return rn=function(t){if(t===null||!ns(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return It(t,arguments,Ct(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),St(l,t)},rn(r)}function It(r,e,n){return Ir()?It=Reflect.construct:It=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&St(a,i.prototype),a},It.apply(null,arguments)}function Ir(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ns(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function St(r,e){return St=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},St(r,e)}function Ct(r){return Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ct(r)}var be=function(r){Qo(n,r);var e=xo(n);function n(t){var l;return Zo(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Jo(n)}(rn(Error));function rs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new be("not_a_number")}if(typeof r!="number")throw new be("not_a_number");if(isNaN(r))throw new be("invalid_number");if(!isFinite(r))throw new be("out_of_bounds");return r}function ls(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new be("invalid_number");if(!isFinite(r))throw new be("out_of_bounds");return String(r)}throw new be("not_a_string")}function os(r){if(typeof r=="boolean")return r;throw new be("not_a_boolean")}function ss(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new be("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new be("invalid_number");if(!isFinite(r))throw new be("out_of_bounds");var t=Pr(r,n);if(isNaN(t.valueOf()))throw new be("out_of_bounds");return t}throw new be("not_a_date")}function is(r,e){return us(r)||fs(r,e)||Dr(r,e)||as()}function as(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function us(r){if(Array.isArray(r))return r}function ln(r){"@babel/helpers - typeof";return ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(r)}function cs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Dr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dr(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Mn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function jn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mn(Object(n),!0).forEach(function(t){$s(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function $s(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Bn={isColumnOriented:!1};function ps(r,e,n){n?n=jn(jn({},Bn),n):n=Bn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;ds(e),l&&(r=gs(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Fr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var p=cs(a),$;!($=p()).done;){var y=$.value;y.row=o[y.row-1]+1}return{rows:s,errors:a}}function Fr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var p=f[a],$=r[p],y=ln($.type)==="object"&&!Array.isArray($.type),S=e[t.indexOf(p)];S===void 0&&(S=null);var T=void 0,C=void 0,N=void 0;if(y)T=Fr($.type,e,n,t,l,o);else if(S===null)T=null;else if(Array.isArray($.type)){var I=!1,j=_s(S).map(function(E){var D=Hn(E,$,o);return D.error&&(T=E,C=D.error,N=D.reason),D.value!==null&&(I=!0),D.value});C||(T=I?j:null)}else{var A=Hn(S,$,o);C=A.error,N=A.reason,T=C?S:A.value}!C&&T===null&&$.required&&(C="required"),C?(C={error:C,row:n+1,column:p,value:T},N&&(C.reason=N),$.type&&(C.type=$.type),l.push(C)):(u&&T!==null&&(u=!1),(T!==null||o.includeNullValues)&&(i[$.prop]=T))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function Hn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=st(r,e.parse):e.type?t=ms(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function st(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ms(r,e,n){switch(e){case String:return st(r,ls);case Number:return st(r,rs);case Date:return st(r,function(t){return ss(t,{properties:n.properties})});case Boolean:return st(r,os);default:if(typeof e=="function")return st(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Mr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Mr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function _s(r){for(var e=[],n=0;n<r.length;){var t=Mr(r,",",n),l=is(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var gs=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function ds(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function on(r){"@babel/helpers - typeof";return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(r)}function jr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;on(o)==="object"&&(o=Object.keys(r[l])[0],i=jr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var hs=["schema","map"];function Rn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Nt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(t){bs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function bs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function vs(r,e){if(r==null)return{};var n=ws(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ws(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function ks(r,e,n){var t=n.schema,l=n.map,o=vs(n,hs);!t&&l&&(t=jr(l));var i=Xo(r,e,Nt(Nt({},o),{},{properties:t||o.properties}));return t?ps(i.data,t,Nt(Nt({},o),{},{properties:i.properties})):i}function ys(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Wl(r).then(function(n){return ks(n,yl,e)})}function Ss(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:l.authority_or_region,capital_scheme_id:l.capital_scheme_id,funding_programme:l.funding_programme});r.features=r.features.filter(t=>Cs(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.num_features++,t.properties.funding_programme=l.funding_programme,t.id=n++}return e}function Cs(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Ts(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await ys(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=zr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const G={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Me=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Ls(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Ft({props:u}),V.push(()=>Y(e,"value",i)),e.$on("change",r[2]),l=new rl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],J(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}function Os(r,e,n){let t;Be(r,Tt,s=>n(4,t=s));let l="interventionType",o=kn("v1");function i(){let s;l=="interventionType"?(s=vr("v1"),n(1,o=kn("v1"))):(s=Zt(["get","funding_programme"],{ATF2:G.atf2,ATF3:G.atf3,ATF4:G.atf4},"grey"),n(1,o=[["ATF2",G.atf2],["ATF3",G.atf3],["ATF4",G.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class As extends U{constructor(e){super(),z(this,e,Os,Ls,W,{})}}function Ps(r){let e;return{c(){e=w("Clear")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Es(r){let e,n,t,l,o,i;return t=new yt({props:{$$slots:{default:[Ps]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=O("input"),n=L(),h(t.$$.fragment),K(e,"type","text"),K(e,"class","govuk-input govuk-input--width-10"),K(e,"id","filterText")},m(u,s){_(u,e,s),gn(e,r[0]),_(u,n,s),b(t,u,s),l=!0,o||(i=dt(e,"input",r[12]),o=!0)},p(u,s){s&1&&e.value!==u[0]&&gn(e,u[0]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){d(t.$$.fragment,u),l=!1},d(u){u&&(g(e),g(n)),v(t,u),o=!1,i()}}}function Ns(r){let e,n,t,l,o,i,u,s,a,f;function c(S){r[10](S)}let p={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&(p.value=r[3]),e=new Ft({props:p}),V.push(()=>Y(e,"value",c));function $(S){r[11](S)}let y={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(y.value=r[4]),l=new Ft({props:y}),V.push(()=>Y(l,"value",$)),u=new dr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Es]},$$scope:{ctx:r}}}),a=new As({}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment),i=L(),h(u.$$.fragment),s=L(),h(a.$$.fragment)},m(S,T){b(e,S,T),_(S,t,T),b(l,S,T),_(S,i,T),b(u,S,T),_(S,s,T),b(a,S,T),f=!0},p(S,T){const C={};T&32&&(C.choices=S[5]),!n&&T&8&&(n=!0,C.value=S[3],J(()=>n=!1)),e.$set(C);const N={};T&64&&(N.choices=S[6]),!o&&T&16&&(o=!0,N.value=S[4],J(()=>o=!1)),l.$set(N);const I={};T&65537&&(I.$$scope={dirty:T,ctx:S}),u.$set(I)},i(S){f||(m(e.$$.fragment,S),m(l.$$.fragment,S),m(u.$$.fragment,S),m(a.$$.fragment,S),f=!0)},o(S){d(e.$$.fragment,S),d(l.$$.fragment,S),d(u.$$.fragment,S),d(a.$$.fragment,S),f=!1},d(S){S&&(g(t),g(i),g(s)),v(e,S),v(l,S),v(u,S),v(a,S)}}}function Is(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",p,$,y=r[7].other.toLocaleString()+"",S,T;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),p=w(c),$=w(" crossings, "),S=w(y),T=w(`
    other)`)},m(C,N){_(C,e,N),_(C,t,N),_(C,l,N),_(C,i,N),_(C,u,N),_(C,a,N),_(C,f,N),_(C,p,N),_(C,$,N),_(C,S,N),_(C,T,N)},p(C,N){N&2&&n!==(n=C[1].size.toLocaleString()+"")&&H(t,n),N&128&&o!==(o=C[7].route.toLocaleString()+"")&&H(i,o),N&128&&s!==(s=C[7].area.toLocaleString()+"")&&H(a,s),N&128&&c!==(c=C[7].crossing.toLocaleString()+"")&&H(p,c),N&128&&y!==(y=C[7].other.toLocaleString()+"")&&H(S,y)},d(C){C&&(g(e),g(t),g(l),g(i),g(u),g(a),g(f),g(p),g($),g(S),g(T))}}}function Ds(r){let e,n,t;function l(i){r[14](i)}let o={id:"show-schemes",$$slots:{default:[Is]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new se({props:o}),V.push(()=>Y(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65666&&(s.$$scope={dirty:u,ctx:i}),!n&&u&4&&(n=!0,s.checked=i[2],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Fs(r){let e,n,t,l;return e=new Ce({props:{label:"Filters",$$slots:{default:[Ns]},$$scope:{ctx:r}}}),t=new Ot({props:{small:!0,$$slots:{default:[Ds]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65657&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65670&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Ms(r,e,n){let{schemesGj:t}=e,{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,{show:u=!0}=e,s=[],a="",f=[],c="",p={area:0,route:0,crossing:0,other:0};Lt(()=>{let I=new Set,j=new Set;for(let A of l.values())A.authority_or_region&&I.add(A.authority_or_region),A.funding_programme&&j.add(A.funding_programme);n(5,s=Array.from(I.entries())),s.sort(),n(6,f=Array.from(j.entries())),f.sort()});function $(I,j,A){let E=I.toLowerCase(),D=M=>{var ee,F;if(E&&!((ee=M.properties.name)!=null&&ee.toLowerCase().includes(E))&&!((F=M.properties.description)!=null&&F.toLowerCase().includes(E)))return!1;if(j||A){let ue=l.get(M.properties.scheme_reference);if(j&&ue.authority_or_region!=j||A&&ue.funding_programme!=A)return!1}return!0};n(1,o=new Set(t.features.filter(D).map(M=>M.properties.scheme_reference))),n(7,p={area:0,route:0,crossing:0,other:0});let P=M=>{var ee,F;return!(!o.has(M.properties.scheme_reference)||E&&!((ee=M.properties.name)!=null&&ee.toLowerCase().includes(E))&&!((F=M.properties.description)!=null&&F.toLowerCase().includes(E)))};for(let M of t.features)P(M)?(delete M.properties.hide_while_editing,n(7,p[M.properties.intervention_type]++,p)):M.properties.hide_while_editing=!0;n(8,t),n(7,p)}function y(I){a=I,n(3,a)}function S(I){c=I,n(4,c)}function T(){i=this.value,n(0,i)}const C=()=>n(0,i="");function N(I){u=I,n(2,u)}return r.$$set=I=>{"schemesGj"in I&&n(8,t=I.schemesGj),"schemes"in I&&n(9,l=I.schemes),"schemesToBeShown"in I&&n(1,o=I.schemesToBeShown),"filterText"in I&&n(0,i=I.filterText),"show"in I&&n(2,u=I.show)},r.$$.update=()=>{r.$$.dirty&25&&$(i,a,c)},[i,o,u,a,c,s,f,p,t,l,y,S,T,C,N]}class js extends U{constructor(e){super(),z(this,e,Ms,Fs,W,{schemesGj:8,schemes:9,schemesToBeShown:1,filterText:0,show:2})}}function Bs(r,e,n){let t;Be(r,Tt,u=>n(3,t=u));let l=null,{markerPosition:o}=e,{markerPositionUpdated:i}=e;return Lt(()=>{l=new Qt.Marker({draggable:!0}).setLngLat(o).addTo(t),l.on("dragstart",()=>{t.getCanvas().style.cursor="grabbing"}),l.on("drag",()=>{n(0,o=l.getLngLat()),i()}),l.on("dragend",()=>{t.getCanvas().style.cursor="inherit"})}),sn(()=>{l&&l.remove()}),r.$$set=u=>{"markerPosition"in u&&n(0,o=u.markerPosition),"markerPositionUpdated"in u&&n(1,i=u.markerPositionUpdated)},[o,i]}class Hs extends U{constructor(e){super(),z(this,e,Bs,null,W,{markerPosition:0,markerPositionUpdated:1})}}function Wn(r,e,n){const t=r.slice();return t[16]=e[n],t[17]=e,t[18]=n,t}function Rs(r){let e,n;return e=new yt({props:{$$slots:{default:[Gs]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&524288&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ws(r){let e,n;return e=new yt({props:{$$slots:{default:[Us]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&524288&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gs(r){let e;return{c(){e=w("Disable Line Measurement Tool")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Us(r){let e;return{c(){e=w("Enable Line Measurement Tool")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Gn(r){var c;let e,n,t,l=[],o=new Map,i,u,s=r[2]&&((c=r[2].properties)==null?void 0:c.length)&&Un(r);n=new Ce({props:{label:"Help",$$slots:{default:[zs]},$$scope:{ctx:r}}});let a=De(r[1]);const f=p=>p[16].id;for(let p=0;p<a.length;p+=1){let $=Wn(r,a,p),y=f($);o.set(y,l[p]=zn(y,$))}return{c(){s&&s.c(),e=L(),h(n.$$.fragment),t=L();for(let p=0;p<l.length;p+=1)l[p].c();i=ke()},m(p,$){s&&s.m(p,$),_(p,e,$),b(n,p,$),_(p,t,$);for(let y=0;y<l.length;y+=1)l[y]&&l[y].m(p,$);_(p,i,$),u=!0},p(p,$){var S;p[2]&&((S=p[2].properties)!=null&&S.length)?s?s.p(p,$):(s=Un(p),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null);const y={};$&524288&&(y.$$scope={dirty:$,ctx:p}),n.$set(y),$&258&&(a=De(p[1]),ae(),l=Vr(l,$,f,1,p,a,o,i.parentNode,Xr,zn,i,Wn),fe())},i(p){if(!u){m(n.$$.fragment,p);for(let $=0;$<a.length;$+=1)m(l[$]);u=!0}},o(p){d(n.$$.fragment,p);for(let $=0;$<l.length;$+=1)d(l[$]);u=!1},d(p){p&&(g(e),g(t),g(i)),s&&s.d(p),v(n,p);for(let $=0;$<l.length;$+=1)l[$].d(p)}}}function Un(r){var i;let e,n,t=((i=r[2].properties)==null?void 0:i.length)+"",l,o;return{c(){e=O("p"),n=w("Length: "),l=w(t),o=w("m")},m(u,s){_(u,e,s),k(e,n),k(e,l),k(e,o)},p(u,s){var a;s&4&&t!==(t=((a=u[2].properties)==null?void 0:a.length)+"")&&H(l,t)},d(u){u&&g(e)}}}function zs(r){let e;return{c(){e=O("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){_(n,e,t)},p:te,d(n){n&&g(e)}}}function zn(r,e){let n,t,l,o;function i(s){e[9](s,e[16])}let u={markerPositionUpdated:e[8]};return e[16].lngLat!==void 0&&(u.markerPosition=e[16].lngLat),t=new Hs({props:u}),V.push(()=>Y(t,"markerPosition",i)),{key:r,first:null,c(){n=ke(),h(t.$$.fragment),this.first=n},m(s,a){_(s,n,a),b(t,s,a),o=!0},p(s,a){e=s;const f={};!l&&a&2&&(l=!0,f.markerPosition=e[16].lngLat,J(()=>l=!1)),t.$set(f)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&g(n),v(t,s)}}}function qs(r){let e,n;const t=[B("measurement-line"),{paint:{"line-color":Mt.measuringLine,"line-width":5}}];let l={};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&0?Q(t,[i&0&&x(B("measurement-line")),i&0&&{paint:{"line-color":Mt.measuringLine,"line-width":5}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Vs(r){let e,n,t,l,o,i,u,s;const a=[Ws,Rs],f=[];function c($,y){return $[0]?0:1}e=c(r),n=f[e]=a[e](r);let p=!r[0]&&Gn(r);return o=new ht({props:{data:r[3],$$slots:{default:[qs]},$$scope:{ctx:r}}}),{c(){n.c(),t=L(),p&&p.c(),l=L(),h(o.$$.fragment)},m($,y){f[e].m($,y),_($,t,y),p&&p.m($,y),_($,l,y),b(o,$,y),i=!0,u||(s=[dt(window,"keydown",r[6]),dt(window,"keyup",r[7])],u=!0)},p($,[y]){let S=e;e=c($),e===S?f[e].p($,y):(ae(),d(f[S],1,1,()=>{f[S]=null}),fe(),n=f[e],n?n.p($,y):(n=f[e]=a[e]($),n.c()),m(n,1),n.m(t.parentNode,t)),$[0]?p&&(ae(),d(p,1,1,()=>{p=null}),fe()):p?(p.p($,y),y&1&&m(p,1)):(p=Gn($),p.c(),m(p,1),p.m(l.parentNode,l));const T={};y&8&&(T.data=$[3]),y&524288&&(T.$$scope={dirty:y,ctx:$}),o.$set(T)},i($){i||(m(n),m(p),m(o.$$.fragment,$),i=!0)},o($){d(n),d(p),d(o.$$.fragment,$),i=!1},d($){$&&(g(t),g(l)),f[e].d($),p&&p.d($),v(o,$),u=!1,qr(s)}}}function Xs(r,e,n){let t;Be(r,Tt,I=>n(12,t=I));let l=!0,o=[],i,u=!1,s=0,a=xt();function f(I){l||(u||(o.push({id:s++,lngLat:I.lngLat}),n(1,o),T()),u&&o.length>0&&(c(I.lngLat),T()))}function c(I){let A=new Qt.LngLat(0,-90).distanceTo(new Qt.LngLat(0,90)),E;o.forEach(D=>{const P=D.lngLat;A>=I.distanceTo(P)&&(E=P,A=I.distanceTo(P))}),E&&n(1,o=o.filter(D=>{const P=D.lngLat;return P.lng!=(E==null?void 0:E.lng)||P.lat!=(E==null?void 0:E.lat)}))}function p(){n(0,l=!1)}function $(){n(0,l=!0),n(1,o=[]),C()}function y(I){I.key==="Shift"&&(u=!0),I.key==="Escape"&&$()}function S(I){I.key==="Shift"&&(u=!1)}function T(){if(o.length<2){C();return}const I=o.map(j=>[j.lngLat.lng,j.lngLat.lat]);n(2,i=Kr(I,{})),i.properties&&n(2,i.properties.length=(ll(i)*1e3).toFixed(2),i),n(3,a=JSON.parse(JSON.stringify(i)))}function C(){n(2,i=void 0),n(3,a=xt())}Lt(()=>{t.on("click",f)}),sn(()=>{t.off("click",f)});function N(I,j){r.$$.not_equal(j.lngLat,I)&&(j.lngLat=I,n(1,o))}return[l,o,i,a,p,$,y,S,T,N]}class Ks extends U{constructor(e){super(),z(this,e,Xs,Vs,W,{})}}function Ys(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Js(r){let e,n,t,l,o;return t=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ys]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data  Crown copyright and database right
  2023.`)},m(i,u){_(i,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(m(t.$$.fragment,i),o=!0)},o(i){d(t.$$.fragment,i),o=!1},d(i){i&&g(e),v(t)}}}class Re extends U{constructor(e){super(),z(this,e,null,Js,W,{})}}function qn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Vn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Xn(r){let e,n;return{c(){e=O("span"),n=w(`
    `),Le(e,"background",r[5]),Le(e,"width","100%"),Le(e,"border","1px solid black")},m(t,l){_(t,e,l),k(e,n)},p(t,l){l&1&&Le(e,"background",t[5])},d(t){t&&g(e)}}}function Kn(r){let e,n=r[2]+"",t;return{c(){e=O("span"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&H(t,n)},d(l){l&&g(e)}}}function Zs(r){let e,n,t,l=De(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Xn(Vn(r,l,s));let i=De(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Kn(qn(r,i,s));return{c(){e=O("div");for(let s=0;s<o.length;s+=1)o[s].c();n=L(),t=O("div");for(let s=0;s<u.length;s+=1)u[s].c();Le(e,"display","flex"),Le(t,"display","flex"),Le(t,"justify-content","space-between")},m(s,a){_(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);_(s,n,a),_(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=De(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Vn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Xn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=De(s[1]);let f;for(f=0;f<i.length;f+=1){const c=qn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Kn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:te,o:te,d(s){s&&(g(e),g(n),g(t)),Dt(o,s),Dt(u,s)}}}function Qs(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Xe extends U{constructor(e){super(),z(this,e,Qs,Zs,W,{colorScale:0,limits:1})}}function Yn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function xs(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ei(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ti(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ni(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ri(r){let e,n,t,l,o,i,u,s,a,f,c,p;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ei]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ti]},$$scope:{ctx:r}}}),f=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ni]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=L(),s=O("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m($,y){_($,e,y),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_($,u,y),_($,s,y),k(s,a),b(f,s,null),k(s,c),p=!0},p($,y){const S={};y&65536&&(S.$$scope={dirty:y,ctx:$}),t.$set(S);const T={};y&65536&&(T.$$scope={dirty:y,ctx:$}),o.$set(T);const C={};y&65536&&(C.$$scope={dirty:y,ctx:$}),f.$set(C)},i($){p||(m(t.$$.fragment,$),m(o.$$.fragment,$),m(f.$$.fragment,$),p=!0)},o($){d(t.$$.fragment,$),d(o.$$.fragment,$),d(f.$$.fragment,$),p=!1},d($){$&&(g(e),g(u),g(s)),v(t),v(o),v(f)}}}function li(r){let e,n,t;return n=new ie({props:{$$slots:{default:[ri]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Jn(r){let e,n;return e=new Xe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oi(r){let e;return{c(){e=w("Average cars per household")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function si(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ii(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ai(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function fi(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,y;return o=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[si]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ii]},$$scope:{ctx:r}}}),p=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ai]},$$scope:{ctx:r}}}),{c(){e=O("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=O("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=L(),f=O("p"),c=w("License: "),h(p.$$.fragment),$=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(S,T){_(S,e,T),_(S,n,T),_(S,t,T),k(t,l),b(o,t,null),k(t,i),b(u,t,null),k(t,s),_(S,a,T),_(S,f,T),k(f,c),b(p,f,null),k(f,$),y=!0},p(S,T){const C={};T&65536&&(C.$$scope={dirty:T,ctx:S}),o.$set(C);const N={};T&65536&&(N.$$scope={dirty:T,ctx:S}),u.$set(N);const I={};T&65536&&(I.$$scope={dirty:T,ctx:S}),p.$set(I)},i(S){y||(m(o.$$.fragment,S),m(u.$$.fragment,S),m(p.$$.fragment,S),y=!0)},o(S){d(o.$$.fragment,S),d(u.$$.fragment,S),d(p.$$.fragment,S),y=!1},d(S){S&&(g(e),g(n),g(t),g(a),g(f)),v(o),v(u),v(p)}}}function ui(r){let e,n,t;return n=new ie({props:{$$slots:{default:[fi]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Zn(r){let e,n;return e=new Xe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ci(r){let e;return{c(){e=w("Population density")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function $i(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function pi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function mi(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[$i]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[pi]},$$scope:{ctx:r}}}),s=new Re({}),{c(){e=O("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=L(),h(s.$$.fragment)},m(f,c){_(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&65536&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const $={};c&65536&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(u)),v(t),v(o),v(s,f)}}}function _i(r){let e,n,t;return n=new ie({props:{$$slots:{default:[mi]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Qn(r){let e,n,t,l;return t=new Xe({props:{colorScale:r[4],limits:r[6]().map(yi)}}),{c(){e=O("p"),e.textContent="(people per square kilometres)",n=L(),h(t.$$.fragment)},m(o,i){_(o,e,i),_(o,n,i),b(t,o,i),l=!0},p:te,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(g(e),g(n)),v(t,o)}}}function gi(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=O("p"),n=w("There are "),t=O("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){_(a,e,f),k(e,n),k(e,t),k(t,o),k(e,i),k(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&H(o,l),f&8192&&u!==(u=a[14]+"")&&H(s,u)},d(a){a&&g(e)}}}function di(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=O("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=O("b"),s=w(u),a=w(`
          cars`)},m(f,c){_(f,e,c),k(e,n),k(e,l),k(e,o),k(e,i),k(i,s),k(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&H(l,t),c&8200&&u!==(u=f[15]+"")&&H(s,u)},d(f){f&&g(e)}}}function hi(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=O("p"),n=O("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){_(f,e,c),k(e,n),k(n,l),k(n,o),k(e,i),k(e,s),k(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&H(l,t),c&8192&&u!==(u=f[14]+"")&&H(s,u)},d(f){f&&g(e)}}}function bi(r){Yn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?hi:o[3]=="average_cars_per_household"?di:gi}let t=n(r),l=t(r);return{c(){l.c(),e=ke()},m(o,i){l.m(o,i),_(o,e,i)},p(o,i){Yn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&g(e),l.d(o)}}}function vi(r){let e,n;return e=new le({props:{$$slots:{default:[bi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wi(r){let e,n,t,l;const o=[B(Ze),{sourceLayer:Ze},{paint:{"fill-color":_e(["get",r[3]],r[6](),r[4]),"fill-opacity":q(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[vi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new He({props:i}),e.$on("click",r[5]);const u=[B(`${Ze}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Q(o,[f&0&&x(B(Ze)),f&0&&{sourceLayer:Ze},f&88&&{paint:{"fill-color":_e(["get",a[3]],a[6](),a[4]),"fill-opacity":q(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&8?Q(u,[f&0&&x(B(`${Ze}-outline`)),u[1],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function ki(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,y;function S(P){r[7](P)}let T={id:"percent_households_with_car",$$slots:{right:[li],default:[xs]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new se({props:T}),V.push(()=>Y(e,"checked",S)),e.$on("change",r[8]);let C=r[3]=="percent_households_with_car"&&Jn(r);function N(P){r[9](P)}let I={id:"average_cars_per_household",$$slots:{right:[ui],default:[oi]},$$scope:{ctx:r}};r[1]!==void 0&&(I.checked=r[1]),o=new se({props:I}),V.push(()=>Y(o,"checked",N)),o.$on("change",r[10]);let j=r[3]=="average_cars_per_household"&&Zn(r);function A(P){r[11](P)}let E={id:"population_density",$$slots:{right:[_i],default:[ci]},$$scope:{ctx:r}};r[2]!==void 0&&(E.checked=r[2]),a=new se({props:E}),V.push(()=>Y(a,"checked",A)),a.$on("change",r[12]);let D=r[3]=="population_density"&&Qn(r);return $=new pe({props:{url:`pmtiles://${ce()}/v1/${Ze}.pmtiles`,$$slots:{default:[wi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),C&&C.c(),l=L(),h(o.$$.fragment),u=L(),j&&j.c(),s=L(),h(a.$$.fragment),c=L(),D&&D.c(),p=L(),h($.$$.fragment)},m(P,M){b(e,P,M),_(P,t,M),C&&C.m(P,M),_(P,l,M),b(o,P,M),_(P,u,M),j&&j.m(P,M),_(P,s,M),b(a,P,M),_(P,c,M),D&&D.m(P,M),_(P,p,M),b($,P,M),y=!0},p(P,[M]){const ee={};M&65536&&(ee.$$scope={dirty:M,ctx:P}),!n&&M&1&&(n=!0,ee.checked=P[0],J(()=>n=!1)),e.$set(ee),P[3]=="percent_households_with_car"?C?(C.p(P,M),M&8&&m(C,1)):(C=Jn(P),C.c(),m(C,1),C.m(l.parentNode,l)):C&&(ae(),d(C,1,1,()=>{C=null}),fe());const F={};M&65536&&(F.$$scope={dirty:M,ctx:P}),!i&&M&2&&(i=!0,F.checked=P[1],J(()=>i=!1)),o.$set(F),P[3]=="average_cars_per_household"?j?(j.p(P,M),M&8&&m(j,1)):(j=Zn(P),j.c(),m(j,1),j.m(s.parentNode,s)):j&&(ae(),d(j,1,1,()=>{j=null}),fe());const ue={};M&65536&&(ue.$$scope={dirty:M,ctx:P}),!f&&M&4&&(f=!0,ue.checked=P[2],J(()=>f=!1)),a.$set(ue),P[3]=="population_density"?D?(D.p(P,M),M&8&&m(D,1)):(D=Qn(P),D.c(),m(D,1),D.m(p.parentNode,p)):D&&(ae(),d(D,1,1,()=>{D=null}),fe());const R={};M&65544&&(R.$$scope={dirty:M,ctx:P}),$.$set(R)},i(P){y||(m(e.$$.fragment,P),m(C),m(o.$$.fragment,P),m(j),m(a.$$.fragment,P),m(D),m($.$$.fragment,P),y=!0)},o(P){d(e.$$.fragment,P),d(C),d(o.$$.fragment,P),d(j),d(a.$$.fragment,P),d(D),d($.$$.fragment,P),y=!1},d(P){P&&(g(t),g(l),g(u),g(s),g(c),g(p)),v(e,P),C&&C.d(P),v(o,P),j&&j.d(P),v(a,P),D&&D.d(P),v($,P)}}}let Ze="census_output_areas";const yi=r=>r.toLocaleString();function Si(r,e,n){let t=G.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(T){let C=T.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${C}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${C}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function p(T){o=T,n(1,o)}const $=()=>{n(0,l=!1),n(2,i=!1)};function y(T){i=T,n(2,i)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,p,$,y,S]}class Ci extends U{constructor(e){super(),z(this,e,Si,ki,W,{})}}function Ti(r){let e,n,t;return e=new ve({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Li(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Oi(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Li]},$$scope:{ctx:r}}}),i=new Re({}),{c(){e=O("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Ai(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Oi]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Pi(r){let e,n=r[3].name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function Ei(r){let e,n;return e=new le({props:{$$slots:{default:[Pi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ni(r){let e,n,t,l;const o=[B(it),{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ei]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new He({props:i}),e.$on("click",Di);const u=[B(`${it}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&x(B(it)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Q(u,[f&0&&x(B(`${it}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Ii(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:it,$$slots:{right:[Ai],default:[Ti]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),V.push(()=>Y(e,"checked",i)),l=new ht({props:{data:`${ce()}/v1/${it}.geojson`,$$slots:{default:[Ni]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let it="combined_authorities";function Di(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Fi(r,e,n){let t=G.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Mi extends U{constructor(e){super(),z(this,e,Fi,Ii,W,{})}}function ji(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Bi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Hi(r){let e;return{c(){e=w(`here
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ri(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Bi]},$$scope:{ctx:r}}}),o=new X({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),s=new Re({}),{c(){e=O("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=L(),h(s.$$.fragment)},m(f,c){_(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const $={};c&32&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(u)),v(t),v(o),v(s,f)}}}function Wi(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Ri]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function xn(r){let e,n;return e=new Xe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gi(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,p=r[4].rank.toLocaleString()+"",$,y;return{c(){e=O("p"),t=w(n),l=w(` has an IMD score of
        `),o=O("b"),u=w(i),s=L(),a=O("p"),f=w("Rank: "),c=O("b"),$=w(p),y=w(`
        / 32,844 LSOAs`)},m(S,T){_(S,e,T),k(e,t),k(e,l),k(e,o),k(o,u),_(S,s,T),_(S,a,T),k(a,f),k(a,c),k(c,$),k(a,y)},p(S,T){T&16&&n!==(n=S[4].LSOA11CD+"")&&H(t,n),T&16&&i!==(i=S[4].score+"")&&H(u,i),T&16&&p!==(p=S[4].rank.toLocaleString()+"")&&H($,p)},d(S){S&&(g(e),g(s),g(a))}}}function Ui(r){let e,n;return e=new le({props:{$$slots:{default:[Gi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zi(r){let e,n,t,l;const o=[B(ze),{sourceLayer:ze},{paint:{"fill-color":_e(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":q(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let i={$$slots:{default:[Ui]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new He({props:i});const u=[B(`${ze}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Q(o,[f&0&&x(B(ze)),f&0&&{sourceLayer:ze},f&6&&{paint:{"fill-color":_e(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":q(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&1?Q(u,[f&0&&x(B(`${ze}-outline`)),u[1],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function qi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ze,$$slots:{right:[Wi],default:[ji]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),V.push(()=>Y(e,"checked",u));let a=r[0]&&xn(r);return o=new pe({props:{url:`pmtiles://${ce()}/v1/${ze}.pmtiles`,$$slots:{default:[zi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],J(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=xn(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ze="imd";function Vi(r,e,n){let t=G.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Xi extends U{constructor(e){super(),z(this,e,Vi,qi,W,{})}}function Ki(r){let e,n,t;return e=new ve({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Yi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ji(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Yi]},$$scope:{ctx:r}}}),i=new Re({}),{c(){e=O("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Zi(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Ji]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Qi(r){let e,n=r[3].name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function xi(r){let e,n;return e=new le({props:{$$slots:{default:[Qi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ea(r){let e,n,t,l;const o=[B(at),{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[xi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new He({props:i}),e.$on("click",na);const u=[B(`${at}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&x(B(at)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Q(u,[f&0&&x(B(`${at}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function ta(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:at,$$slots:{right:[Zi],default:[Ki]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),V.push(()=>Y(e,"checked",i)),l=new ht({props:{data:`${ce()}/v1/${at}.geojson`,$$slots:{default:[ea]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let at="local_authority_districts";function na(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function ra(r,e,n){let t=G.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class la extends U{constructor(e){super(),z(this,e,ra,ta,W,{})}}function oa(r){let e,n,t;return e=new ve({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function sa(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ia(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function aa(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function fa(r){let e;return{c(){e=w("this map")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ua(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ca(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,y,S,T,C,N,I,j,A,E;return t=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[sa]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ia]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[aa]},$$scope:{ctx:r}}}),$=new X({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[fa]},$$scope:{ctx:r}}}),N=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ua]},$$scope:{ctx:r}}}),A=new Re({}),{c(){e=O("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=L(),f=O("p"),c=O("strong"),p=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h($.$$.fragment),y=w(" to get more details."),S=L(),T=O("p"),C=w("Data from ONS Geography via "),h(N.$$.fragment),I=w(", as of November 2022."),j=L(),h(A.$$.fragment)},m(D,P){_(D,e,P),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),b(u,e,null),k(e,s),_(D,a,P),_(D,f,P),k(f,c),k(c,p),b($,c,null),k(c,y),_(D,S,P),_(D,T,P),k(T,C),b(N,T,null),k(T,I),_(D,j,P),b(A,D,P),E=!0},p(D,P){const M={};P&16&&(M.$$scope={dirty:P,ctx:D}),t.$set(M);const ee={};P&16&&(ee.$$scope={dirty:P,ctx:D}),o.$set(ee);const F={};P&16&&(F.$$scope={dirty:P,ctx:D}),u.$set(F);const ue={};P&16&&(ue.$$scope={dirty:P,ctx:D}),$.$set(ue);const R={};P&16&&(R.$$scope={dirty:P,ctx:D}),N.$set(R)},i(D){E||(m(t.$$.fragment,D),m(o.$$.fragment,D),m(u.$$.fragment,D),m($.$$.fragment,D),m(N.$$.fragment,D),m(A.$$.fragment,D),E=!0)},o(D){d(t.$$.fragment,D),d(o.$$.fragment,D),d(u.$$.fragment,D),d($.$$.fragment,D),d(N.$$.fragment,D),d(A.$$.fragment,D),E=!1},d(D){D&&(g(e),g(a),g(f),g(S),g(T),g(j)),v(t),v(o),v(u),v($),v(N),v(A,D)}}}function $a(r){let e,n,t;return n=new ie({props:{$$slots:{default:[ca]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function pa(r){let e,n=r[3].name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function ma(r){let e,n;return e=new le({props:{$$slots:{default:[pa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _a(r){let e,n,t,l;const o=[B(Ae),{sourceLayer:Ae},{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let i={$$slots:{default:[ma]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new He({props:i});const u=[B(`${Ae}-outline`),{sourceLayer:Ae},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&x(B(Ae)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Q(u,[f&0&&x(B(`${Ae}-outline`)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function ga(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ae,$$slots:{right:[$a],default:[oa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),V.push(()=>Y(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ae}.pmtiles`,$$slots:{default:[_a]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Ae="local_planning_authorities";function da(r,e,n){let t=G.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ha extends U{constructor(e){super(),z(this,e,da,ga,W,{})}}function ba(r){let e,n,t;return e=new ve({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function va(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function wa(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[va]},$$scope:{ctx:r}}}),i=new Re({}),{c(){e=O("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function ka(r){let e,n,t;return n=new ie({props:{$$slots:{default:[wa]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function ya(r){let e,n=r[3].Name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&H(t,n)},d(l){l&&g(e)}}}function Sa(r){let e,n;return e=new le({props:{$$slots:{default:[ya,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ca(r){let e,n,t,l;const o=[B(Pe),{sourceLayer:Pe},{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Sa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new He({props:i}),e.$on("click",La);const u=[B(`${Pe}-outline`),{sourceLayer:Pe},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&x(B(Pe)),f&0&&{sourceLayer:Pe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Q(u,[f&0&&x(B(`${Pe}-outline`)),f&0&&{sourceLayer:Pe},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function Ta(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Pe,$$slots:{right:[ka],default:[ba]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),V.push(()=>Y(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Pe}.pmtiles`,$$slots:{default:[Ca]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Pe="parliamentary_constituencies";function La(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Oa(r,e,n){let t=G.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Aa extends U{constructor(e){super(),z(this,e,Oa,Ta,W,{})}}function Pa(r){let e,n,t;return e=new ve({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Ea(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Na(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ea]},$$scope:{ctx:r}}}),i=new Re({}),{c(){e=O("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Ia(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Na]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Da(r){let e,n=r[3].name+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&g(e)}}}function Fa(r){let e,n;return e=new le({props:{$$slots:{default:[Da,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ma(r){let e,n,t,l;const o=[B(Ee),{sourceLayer:Ee},{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Fa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new He({props:i}),e.$on("click",Ba);const u=[B(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new $e({props:s}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Q(o,[f&0&&x(B(Ee)),f&0&&{sourceLayer:Ee},f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?Q(u,[f&0&&x(B(`${Ee}-outline`)),f&0&&{sourceLayer:Ee},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&g(n),v(e,a),v(t,a)}}}function ja(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ee,$$slots:{right:[Ia],default:[Pa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),V.push(()=>Y(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ee}.pmtiles`,$$slots:{default:[Ma]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Ee="wards";function Ba(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Ha(r,e,n){let t=G.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ra extends U{constructor(e){super(),z(this,e,Ha,ja,W,{})}}function Wa(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ga(r){let e,n,t,l;return t=new X({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Wa]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){_(o,e,i),k(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&g(e),v(t)}}}class Ke extends U{constructor(e){super(),z(this,e,null,Ga,W,{})}}function Ua(r){let e,n,t;return e=new ve({props:{color:G.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function za(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function qa(r){let e,n,t,l,o,i,u,s,a;return o=new X({props:{href:"https://gtfs.org",$$slots:{default:[za]},$$scope:{ctx:r}}}),s=new Ke({}),{c(){e=O("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=O("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=L(),h(s.$$.fragment)},m(f,c){_(f,e,c),_(f,n,c),_(f,t,c),k(t,l),b(o,t,null),k(t,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&8&&(p.$$scope={dirty:c,ctx:f}),o.$set(p)},i(f){a||(m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(n),g(t),g(u)),v(o),v(s,f)}}}function Va(r){let e,n,t;return n=new ie({props:{$$slots:{default:[qa]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Xa(r){let e;return{c(){e=O("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ka(r){let e;return{c(){e=O("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Ya(r){let e;function n(o,i){return o[2].has_bus_lane?Ka:Xa}let t=n(r),l=t(r);return{c(){l.c(),e=ke()},m(o,i){l.m(o,i),_(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&g(e),l.d(o)}}}function Ja(r){let e,n;return e=new le({props:{$$slots:{default:[Ya,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Za(r){let e,n;const t=[B(ft),{sourceLayer:ft},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],G.bus_route_with_lane,G.bus_route_without_lane],"line-width":5,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[Ja]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Q(t,[i&0&&x(B(ft)),i&0&&{sourceLayer:ft},i&0&&{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],G.bus_route_with_lane,G.bus_route_without_lane],"line-width":5,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Qa(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:ft,$$slots:{right:[Va],default:[Ua]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),V.push(()=>Y(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${ft}.pmtiles`,$$slots:{default:[Za]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let ft="bus_routes";function xa(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class ef extends U{constructor(e){super(),z(this,e,xa,Qa,W,{})}}function er(r){const e=ff(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function tr(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function tf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function nf(r){let e,n,t,l,o,i,u,s;return u=new Ke({}),{c(){e=O("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=O("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=L(),o=O("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=L(),h(u.$$.fragment)},m(a,f){_(a,e,f),_(a,n,f),_(a,t,f),_(a,l,f),_(a,o,f),_(a,i,f),b(u,a,f),s=!0},p:te,i(a){s||(m(u.$$.fragment,a),s=!0)},o(a){d(u.$$.fragment,a),s=!1},d(a){a&&(g(e),g(n),g(t),g(l),g(o),g(i)),v(u,a)}}}function rf(r){let e,n,t;return n=new ie({props:{$$slots:{default:[nf]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function nr(r){let e,n,t=De(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=rr(tr(r,t,i));const o=i=>d(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=ke()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);_(i,e,u),n=!0},p(i,u){if(u&2){t=De(i[1]);let s;for(s=0;s<t.length;s+=1){const a=tr(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=rr(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(ae(),s=t.length;s<l.length;s+=1)o(s);fe()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)d(l[u]);n=!1},d(i){i&&g(e),Dt(l,i)}}}function rr(r){let e,n,t,l=r[7]+"",o,i,u;return n=new ve({props:{color:r[8]}}),{c(){e=O("div"),h(n.$$.fragment),t=L(),o=w(l),i=L()},m(s,a){_(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p:te,i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){d(n.$$.fragment,s),u=!1},d(s){s&&g(e),v(n)}}}function lf(r){er(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,p,$=r[6]+"",y;return{c(){e=O("h2"),t=w(n),l=L(),o=O("p"),i=w("Direction: "),u=O("b"),a=L(),f=O("p"),c=w("Width: "),p=O("b"),y=w($)},m(S,T){_(S,e,T),k(e,t),_(S,l,T),_(S,o,T),k(o,i),k(o,u),u.innerHTML=s,_(S,a,T),_(S,f,T),k(f,c),k(f,p),k(p,y)},p(S,T){er(S),T&8&&n!==(n=S[4]+"")&&H(t,n),T&8&&s!==(s=S[5]+"")&&(u.innerHTML=s),T&8&&$!==($=S[6]+"")&&H(y,$)},d(S){S&&(g(e),g(l),g(o),g(a),g(f))}}}function of(r){let e,n;return e=new le({props:{$$slots:{default:[lf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sf(r){let e,n;const t=[B(ut),{sourceLayer:ut},{paint:{"line-color":Zt(["get","kind"],{track:G.cycle_paths.track,lane:G.cycle_paths.lane,shared_use_segregated:G.cycle_paths.shared_use_segregated,shared_use_unsegregated:G.cycle_paths.shared_use_unsegregated},"red"),"line-width":Me,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[of]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),e.$on("click",uf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Q(t,[i&0&&x(B(ut)),i&0&&{sourceLayer:ut},i&0&&{paint:{"line-color":Zt(["get","kind"],{track:G.cycle_paths.track,lane:G.cycle_paths.lane,shared_use_segregated:G.cycle_paths.shared_use_segregated,shared_use_unsegregated:G.cycle_paths.shared_use_unsegregated},"red"),"line-width":Me,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function af(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:ut,$$slots:{right:[rf],default:[tf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),V.push(()=>Y(e,"checked",u));let a=r[0]&&nr(r);return o=new pe({props:{url:`pmtiles://${ce()}/v1/${ut}.pmtiles`,$$slots:{default:[sf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&2048&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],J(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=nr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const $={};c&2049&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="cycle_paths";function ff(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function uf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function cf(r,e,n){let t=[["Separated tracks",G.cycle_paths.track],["Unprotected lanes",G.cycle_paths.lane],["Shared-use (segregated)",G.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",G.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class $f extends U{constructor(e){super(),z(this,e,cf,af,W,{})}}function pf(r){let e,n,t;return e=new ve({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function mf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function _f(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[mf]},$$scope:{ctx:r}}}),i=new Re({}),{c(){e=O("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function gf(r){let e,n,t;return n=new ie({props:{$$slots:{default:[_f]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function df(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&H(t,n)},d(l){l&&g(e)}}}function hf(r){let e,n;return e=new le({props:{$$slots:{default:[df,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bf(r){let e,n;const t=[B(ct),{sourceLayer:ct},{manageHoverState:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[hf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&x(B(ct)),i&0&&{sourceLayer:ct},t[2],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ct,$$slots:{right:[gf],default:[pf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),V.push(()=>Y(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${ct}.pmtiles`,$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let ct="mrn";function wf(r,e,n){let t=G.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class kf extends U{constructor(e){super(),z(this,e,wf,vf,W,{})}}function yf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Sf(r){let e;return{c(){e=w("the PCT website")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Cf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Tf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new X({props:{href:"https://www.pct.bike",$$slots:{default:[Sf]},$$scope:{ctx:r}}}),a=new X({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Cf]},$$scope:{ctx:r}}}),{c(){e=O("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=O("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=L(),o=O("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(p,$){_(p,e,$),_(p,n,$),_(p,t,$),_(p,l,$),_(p,o,$),k(o,i),b(u,o,null),k(o,s),b(a,o,null),k(o,f),c=!0},p(p,$){const y={};$&1024&&(y.$$scope={dirty:$,ctx:p}),u.$set(y);const S={};$&1024&&(S.$$scope={dirty:$,ctx:p}),a.$set(S)},i(p){c||(m(u.$$.fragment,p),m(a.$$.fragment,p),c=!0)},o(p){d(u.$$.fragment,p),d(a.$$.fragment,p),c=!1},d(p){p&&(g(e),g(n),g(t),g(l),g(o)),v(u),v(a)}}}function Lf(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Tf]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function lr(r){let e,n,t,l,o,i,u,s;e=new Xe({props:{colorScale:r[3],limits:r[4]}});function a($){r[7]($)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new hr({props:f}),V.push(()=>Y(t,"value",a));function c($){r[8]($)}let p={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(p.value=r[1]),i=new Ft({props:p}),V.push(()=>Y(i,"value",c)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(i.$$.fragment)},m($,y){b(e,$,y),_($,n,y),b(t,$,y),_($,o,y),b(i,$,y),s=!0},p($,y){const S={};!l&&y&1&&(l=!0,S.value=$[0],J(()=>l=!1)),t.$set(S);const T={};!u&&y&2&&(u=!0,T.value=$[1],J(()=>u=!1)),i.$set(T)},i($){s||(m(e.$$.fragment,$),m(t.$$.fragment,$),m(i.$$.fragment,$),s=!0)},o($){d(e.$$.fragment,$),d(t.$$.fragment,$),d(i.$$.fragment,$),s=!1},d($){$&&(g(n),g(o)),v(e,$),v(t,$),v(i,$)}}}function Of(r){let e,n=r[5](r[9])+"",t;return{c(){e=new fn(!1),t=ke(),e.a=t},m(l,o){e.m(n,l,o),_(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(g(t),e.d())}}}function Af(r){let e,n;return e=new le({props:{$$slots:{default:[Of,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pf(r){let e,n;const t=[B(Ne),{sourceLayer:Ne},{paint:{"line-color":_e(["get",r[1]],r[4],r[3]),"line-width":Me,"line-opacity":q(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ne?"visible":"none"}}];let l={$$slots:{default:[Af]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Q(t,[i&0&&x(B(Ne)),i&0&&{sourceLayer:Ne},i&26&&{paint:{"line-color":_e(["get",o[1]],o[4],o[3]),"line-width":Me,"line-opacity":q(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ne?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ef(r){let e,n=r[5](r[9])+"",t;return{c(){e=new fn(!1),t=ke(),e.a=t},m(l,o){e.m(n,l,o),_(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(g(t),e.d())}}}function Nf(r){let e,n;return e=new le({props:{$$slots:{default:[Ef,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function If(r){let e,n;const t=[B(Qe),{sourceLayer:Qe},{manageHoverState:!0},{paint:{"line-color":_e(["get",r[1]],r[4],r[3]),"line-width":Me,"line-opacity":q(1,.5)}},{layout:{visibility:r[2]&&r[0]==Qe?"visible":"none"}}];let l={$$slots:{default:[Nf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Q(t,[i&0&&x(B(Qe)),i&0&&{sourceLayer:Qe},t[2],i&26&&{paint:{"line-color":_e(["get",o[1]],o[4],o[3]),"line-width":Me,"line-opacity":q(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Qe?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Df(r){let e,n,t,l,o,i,u,s;function a(p){r[6](p)}let f={id:Ne,$$slots:{right:[Lf],default:[yf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new se({props:f}),V.push(()=>Y(e,"checked",a));let c=r[2]&&lr(r);return o=new pe({props:{url:`pmtiles://${ce()}/v1/${Ne}.pmtiles`,$$slots:{default:[Pf]},$$scope:{ctx:r}}}),u=new pe({props:{url:`pmtiles://${ce()}/v1/${Qe}.pmtiles`,$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),c&&c.c(),l=L(),h(o.$$.fragment),i=L(),h(u.$$.fragment)},m(p,$){b(e,p,$),_(p,t,$),c&&c.m(p,$),_(p,l,$),b(o,p,$),_(p,i,$),b(u,p,$),s=!0},p(p,[$]){const y={};$&1024&&(y.$$scope={dirty:$,ctx:p}),!n&&$&4&&(n=!0,y.checked=p[2],J(()=>n=!1)),e.$set(y),p[2]?c?(c.p(p,$),$&4&&m(c,1)):(c=lr(p),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(ae(),d(c,1,1,()=>{c=null}),fe());const S={};$&1031&&(S.$$scope={dirty:$,ctx:p}),o.$set(S);const T={};$&1031&&(T.$$scope={dirty:$,ctx:p}),u.$set(T)},i(p){s||(m(e.$$.fragment,p),m(c),m(o.$$.fragment,p),m(u.$$.fragment,p),s=!0)},o(p){d(e.$$.fragment,p),d(c),d(o.$$.fragment,p),d(u.$$.fragment,p),s=!1},d(p){p&&(g(t),g(l),g(i)),v(e,p),c&&c.d(p),v(o,p),v(u,p)}}}let Ne="pct_commute",Qe="pct_school";function Ff(r,e,n){let t=G.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ne,i="baseline",u=!1;function s(p){let $=p.baseline,y=p.gov_target,S=p.go_dutch,T=`<h2>Trip purpose: ${o==Ne?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${$.toLocaleString()}</b></p>`,$==0)T+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let C=(y/$).toFixed(1),N=(S/$).toFixed(1);T+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${C}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${N}x</b> of baseline)</p>`}return T}function a(p){u=p,n(2,u)}function f(p){o=p,n(0,o)}function c(p){i=p,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class Mf extends U{constructor(e){super(),z(this,e,Ff,Df,W,{})}}function jf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Bf(r){let e;return{c(){e=w("Basemap")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Hf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Rf(r){let e,n,t,l,o,i,u,s,a,f,c,p;return t=new X({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),f=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){e=O("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),i=O("p"),i.textContent="Data valid as of 1 September, 2023",u=L(),s=O("p"),a=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m($,y){_($,e,y),k(e,n),b(t,e,null),k(e,l),_($,o,y),_($,i,y),_($,u,y),_($,s,y),k(s,a),b(f,s,null),k(s,c),p=!0},p($,y){const S={};y&256&&(S.$$scope={dirty:y,ctx:$}),t.$set(S);const T={};y&256&&(T.$$scope={dirty:y,ctx:$}),f.$set(T)},i($){p||(m(t.$$.fragment,$),m(f.$$.fragment,$),p=!0)},o($){d(t.$$.fragment,$),d(f.$$.fragment,$),p=!1},d($){$&&(g(e),g(o),g(i),g(u),g(s)),v(t),v(f)}}}function Wf(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Rf]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function or(r){let e,n,t,l,o;e=new Xe({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new hr({props:u}),V.push(()=>Y(t,"value",i)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(s,a){b(e,s,a),_(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],J(()=>l=!1)),t.$set(f)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),o=!1},d(s){s&&g(n),v(e,s),v(t,s)}}}function Gf(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,p=r[4][r[7].highest_description]+"",$,y;return{c(){e=O("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=L(),u=O("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),$=w(p),y=w(")")},m(S,T){_(S,e,T),k(e,n),k(e,l),k(e,o),_(S,i,T),_(S,u,T),k(u,s),k(u,f),k(u,c),k(u,$),k(u,y)},p(S,T){T&128&&t!==(t=S[7].indicative_mph+"")&&H(l,t),T&128&&a!==(a=S[7].highest_mph+"")&&H(f,a),T&128&&p!==(p=S[4][S[7].highest_description]+"")&&H($,p)},d(S){S&&(g(e),g(i),g(u))}}}function Uf(r){let e,n;return e=new le({props:{$$slots:{default:[Gf,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zf(r){let e,n;const t=[B($t),{sourceLayer:$t},{manageHoverState:!0},{paint:{"line-color":_e(["get",r[0]],r[3],r[2]),"line-width":Me,"line-opacity":q(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[Uf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Q(t,[i&0&&x(B($t)),i&0&&{sourceLayer:$t},t[2],i&13&&{paint:{"line-color":_e(["get",o[0]],o[3],o[2]),"line-width":Me,"line-opacity":q(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function qf(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:$t,$$slots:{right:[Wf],default:[jf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new se({props:s}),V.push(()=>Y(e,"checked",u));let a=r[1]&&or(r);return o=new pe({props:{url:`pmtiles://${un()}/v1/${$t}.pmtiles`,$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,p.checked=f[1],J(()=>n=!1)),e.$set(p),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=or(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const $={};c&259&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let $t="road_speeds";function Vf(r,e,n){let t=G.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class Xf extends U{constructor(e){super(),z(this,e,Vf,qf,W,{})}}function Kf(r){let e;return{c(){e=w("OS Road widths")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Yf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Jf(r){let e,n,t,l,o,i,u,s,a;return u=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Yf]},$$scope:{ctx:r}}}),{c(){e=O("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=O("p"),t.textContent="Data valid as of 1 September, 2023",l=L(),o=O("p"),i=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){_(f,e,c),_(f,n,c),_(f,t,c),_(f,l,c),_(f,o,c),k(o,i),b(u,o,null),k(o,s),a=!0},p(f,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),u.$set(p)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(g(e),g(n),g(t),g(l),g(o)),v(u)}}}function Zf(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function sr(r){let e,n;return e=new Xe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qf(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",p,$;return{c(){e=O("p"),n=w("Average width: "),t=O("b"),o=w(l),i=w(`
        meters`),u=L(),s=O("p"),a=w("Minimum width: "),f=O("b"),p=w(c),$=w(`
        meters`)},m(y,S){_(y,e,S),k(e,n),k(e,t),k(t,o),k(e,i),_(y,u,S),_(y,s,S),k(s,a),k(s,f),k(f,p),k(s,$)},p(y,S){S&16&&l!==(l=y[4].average+"")&&H(o,l),S&16&&c!==(c=y[4].minimum+"")&&H(p,c)},d(y){y&&(g(e),g(u),g(s))}}}function xf(r){let e,n;return e=new le({props:{$$slots:{default:[Qf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function eu(r){let e,n;const t=[B(pt),{sourceLayer:pt},{manageHoverState:!0},{paint:{"line-color":_e(["get","average"],r[2],r[1]),"line-width":Me,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[xf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new $e({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Q(t,[i&0&&x(B(pt)),i&0&&{sourceLayer:pt},t[2],i&6&&{paint:{"line-color":_e(["get","average"],o[2],o[1]),"line-width":Me,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function tu(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:pt,$$slots:{right:[Zf],default:[Kf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),V.push(()=>Y(e,"checked",u));let a=r[0]&&sr(r);return o=new pe({props:{url:`pmtiles://${un()}/v1/${pt}.pmtiles`,$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],J(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=sr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let pt="road_widths";function nu(r,e,n){let t=G.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class ru extends U{constructor(e){super(),z(this,e,nu,tu,W,{})}}function lu(r){let e,n,t;return{c(){e=O("input"),K(e,"class","govuk-file-upload"),K(e,"id","load-criticals"),K(e,"type","file")},m(l,o){_(l,e,o),r[7](e),n||(t=dt(e,"change",r[5]),n=!0)},p:te,d(l){l&&g(e),r[7](null),n=!1,t()}}}function ir(r){let e,n;return e=new Ot({props:{small:!0,$$slots:{default:[su]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ou(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new ve({props:{color:wt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),_(u,n,s),_(u,l,s),_(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&H(l,t)},i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),i=!1},d(u){u&&(g(n),g(l),g(o)),v(e,u)}}}function su(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[ou]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),V.push(()=>Y(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],J(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function iu(r){let e,n,t,l,o,i;e=new dr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[lu]},$$scope:{ctx:r}}}),t=new br({props:{errorMessage:r[3]}});let u=r[2]>0&&ir(r);return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),u&&u.c(),o=ke()},m(s,a){b(e,s,a),_(s,n,a),b(t,s,a),_(s,l,a),u&&u.m(s,a),_(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&m(u,1)):(u=ir(s),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(ae(),d(u,1,1,()=>{u=null}),fe())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(u),i=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(u),i=!1},d(s){s&&(g(n),g(l),g(o)),v(e,s),v(t,s),u&&u.d(s)}}}function au(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,p,$,y,S=r[10].notes+"",T,C,N,I,j,A,E,D=r[10].id+"",P,M,ee,F,ue,R=(r[10].inspector??"???")+"",ne,ge,me,oe=r[10].submission_time+"",We,tt,de,bt,je,Ge=r[10].scheme_reference+"",Ye,vt,nt,Je=r[10].current_design_stage+"",rt;return{c(){e=O("div"),n=O("h2"),l=w(t),o=L(),i=O("p"),u=O("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=L(),p=O("p"),$=O("u"),$.textContent="Notes",y=w(`
          : `),T=w(S),C=L(),N=O("hr"),I=L(),j=O("p"),A=w("Critical issue ID: "),E=O("b"),P=w(D),M=L(),ee=O("p"),F=w("Submitted by "),ue=O("b"),ne=w(R),ge=w(`
          at
          `),me=O("b"),We=w(oe),tt=L(),de=O("p"),bt=w("For scheme "),je=O("b"),Ye=w(Ge),vt=w(`
          in stage
          `),nt=O("b"),rt=w(Je),Le(e,"max-width","30vw")},m(we,Oe){_(we,e,Oe),k(e,n),k(n,l),k(e,o),k(e,i),k(i,u),k(i,s),k(i,f),k(e,c),k(e,p),k(p,$),k(p,y),k(p,T),k(e,C),k(e,N),k(e,I),k(e,j),k(j,A),k(j,E),k(E,P),k(e,M),k(e,ee),k(ee,F),k(ee,ue),k(ue,ne),k(ee,ge),k(ee,me),k(me,We),k(e,tt),k(e,de),k(de,bt),k(de,je),k(je,Ye),k(de,vt),k(de,nt),k(nt,rt)},p(we,Oe){Oe&1024&&t!==(t=we[10].critical_type+"")&&H(l,t),Oe&1024&&a!==(a=we[10].location_description+"")&&H(f,a),Oe&1024&&S!==(S=we[10].notes+"")&&H(T,S),Oe&1024&&D!==(D=we[10].id+"")&&H(P,D),Oe&1024&&R!==(R=(we[10].inspector??"???")+"")&&H(ne,R),Oe&1024&&oe!==(oe=we[10].submission_time+"")&&H(We,oe),Oe&1024&&Ge!==(Ge=we[10].scheme_reference+"")&&H(Ye,Ge),Oe&1024&&Je!==(Je=we[10].current_design_stage+"")&&H(rt,Je)},d(we){we&&g(e)}}}function fu(r){let e,n;return e=new le({props:{$$slots:{default:[au,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uu(r){let e,n,t,l,o,i;const u=[B(`${qe}-clusters`),{applyToClusters:!0},{paint:{"circle-color":wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let $=0;$<u.length;$+=1)s=Z(s,u[$]);e=new Ve({props:s}),e.$on("click",r[6]);const a=[B(`${qe}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let $=0;$<a.length;$+=1)f=Z(f,a[$]);t=new dl({props:f});const c=[B(`${qe}-points`),{applyToClusters:!1},{manageHoverState:!0},{paint:{"circle-color":wt,"circle-opacity":q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let p={$$slots:{default:[fu]},$$scope:{ctx:r}};for(let $=0;$<c.length;$+=1)p=Z(p,c[$]);return o=new Ve({props:p}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment)},m($,y){b(e,$,y),_($,n,y),b(t,$,y),_($,l,y),b(o,$,y),i=!0},p($,y){const S=y&2?Q(u,[y&0&&x(B(`${qe}-clusters`)),u[1],y&0&&{paint:{"circle-color":wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:$[1]?"visible":"none"}},u[4]]):{};e.$set(S);const T=y&2?Q(a,[y&0&&x(B(`${qe}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:$[1]?"visible":"none"}}]):{};t.$set(T);const C=y&2?Q(c,[y&0&&x(B(`${qe}-points`)),c[1],c[2],y&0&&{paint:{"circle-color":wt,"circle-opacity":q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:$[1]?"visible":"none"}}]):{};y&2048&&(C.$$scope={dirty:y,ctx:$}),o.$set(C)},i($){i||(m(e.$$.fragment,$),m(t.$$.fragment,$),m(o.$$.fragment,$),i=!0)},o($){d(e.$$.fragment,$),d(t.$$.fragment,$),d(o.$$.fragment,$),i=!1},d($){$&&(g(n),g(l)),v(e,$),v(t,$),v(o,$)}}}function cu(r){let e,n,t,l;return e=new Ce({props:{label:"Critical Issues",$$slots:{default:[iu]},$$scope:{ctx:r}}}),t=new ht({props:{id:qe,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}let qe="criticals",wt="red";function $u(r,e,n){let t;Be(r,Tt,$=>n(9,t=$));let l,o=!0,i=0,u="",s=xt();async function a($){try{n(4,s=await Ts(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f($){t.getSource(qe).getClusterExpansionZoom($.detail.features[0].properties.cluster_id,(y,S)=>{y||t.easeTo({center:$.detail.features[0].geometry.coordinates,zoom:S})})}function c($){V[$?"unshift":"push"](()=>{l=$,n(0,l)})}function p($){o=$,n(1,o)}return[l,o,i,u,s,a,f,c,p]}class pu extends U{constructor(e){super(),z(this,e,$u,cu,W,{})}}function mu(r){let e,n,t;return e=new ve({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function _u(r){let e;return{c(){e=w("crossing")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function gu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[_u]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=O("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function du(r){let e,n,t;return n=new ie({props:{$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function hu(r){let e,n=ar(r[3])+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=ar(l[3])+"")&&H(t,n)},d(l){l&&g(e)}}}function bu(r){let e,n;return e=new le({props:{$$slots:{default:[hu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vu(r){let e,n;const t=[B(mt),{sourceLayer:mt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let l={$$slots:{default:[bu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ve({props:l}),e.$on("click",ku),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&x(B(mt)),i&0&&{sourceLayer:mt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function wu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:mt,$$slots:{right:[du],default:[mu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),V.push(()=>Y(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${mt}.pmtiles`,$$slots:{default:[vu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let mt="crossings";function ar(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function ku(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function yu(r,e,n){let t=G.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Su extends U{constructor(e){super(),z(this,e,yu,wu,W,{})}}function Cu(r){let e,n,t;return e=new ve({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Tu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Lu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Tu]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=O("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Ou(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Lu]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Au(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=O("p"),n=w("Capacity: "),t=O("b"),o=w(l)},m(i,u){_(i,e,u),k(e,n),k(e,t),k(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&H(o,l)},d(i){i&&g(e)}}}function Pu(r){let e,n;return e=new le({props:{$$slots:{default:[Au,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Eu(r){let e,n;const t=[B(_t),{sourceLayer:_t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[Pu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&x(B(_t)),i&0&&{sourceLayer:_t},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Nu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:_t,$$slots:{right:[Ou],default:[Cu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),V.push(()=>Y(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${_t}.pmtiles`,$$slots:{default:[Eu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let _t="cycle_parking";function Iu(r,e,n){let t=G.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Du extends U{constructor(e){super(),z(this,e,Iu,Nu,W,{})}}function Fu(r){let e,n,t,l;return e=new ve({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=L(),t=w(r[2])},m(o,i){b(e,o,i),_(o,n,i),_(o,t,i),l=!0},p(o,i){(!l||i&4)&&H(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(g(n),g(t)),v(e,o)}}}function Mu(r){let e;const n=r[5].default,t=Rt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Wt(t,n,l,l[7],e?Ut(n,l[7],o,null):Gt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function ju(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Bu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&H(t,n)},d(l){l&&g(e)}}}function Hu(r){let e,n;return e=new le({props:{$$slots:{default:[Bu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ru(r){let e,n;const t=[B(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":q(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[Hu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new He({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Q(t,[i&1&&x(B(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":q(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Wu(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[ju],default:[Fu]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new se({props:u}),V.push(()=>Y(e,"checked",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Ru]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],J(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${ce()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}function Gu(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=G[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class $n extends U{constructor(e){super(),z(this,e,Gu,Wu,W,{name:0,singularNoun:1,pluralNoun:2})}}function Uu(r){let e;return{c(){e=w("hospital")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function zu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Uu]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=O("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function qu(r){let e,n;return e=new $n({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[zu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Vu extends U{constructor(e){super(),z(this,e,null,qu,W,{})}}function Xu(r){let e,n,t;return e=new ve({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),_(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&g(n),v(e,l)}}}function Ku(r){let e;return{c(){e=w("railway station")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Yu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Ku]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=O("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function Ju(r){let e,n,t;return n=new ie({props:{$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function Zu(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=O("p"),t=w(n)},m(l,o){_(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&H(t,n)},d(l){l&&g(e)}}}function Qu(r){let e,n;return e=new le({props:{$$slots:{default:[Zu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xu(r){let e,n;const t=[B(Ht),{paint:{"circle-color":r[1],"circle-radius":jt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Q(t,[i&0&&x(B(Ht)),i&2&&{paint:{"circle-color":o[1],"circle-radius":jt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ec(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ht,$$slots:{right:[Ju],default:[Xu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),V.push(()=>Y(e,"checked",i)),l=new ht({props:{data:`${ce()}/v1/${Ht}.geojson`,$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],J(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),v(e,s),v(l,s)}}}let Ht="railway_stations";function tc(r,e,n){let t=G.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class nc extends U{constructor(e){super(),z(this,e,tc,ec,W,{})}}function rc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function lc(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[rc]},$$scope:{ctx:r}}}),i=new Ke({}),{c(){e=O("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=L(),h(i.$$.fragment)},m(s,a){_(s,e,a),k(e,n),b(t,e,null),k(e,l),_(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(g(e),g(o)),v(t),v(i,s)}}}function oc(r){let e,n;return e=new $n({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class sc extends U{constructor(e){super(),z(this,e,null,oc,W,{})}}function ic(r){let e;return{c(){e=w("sports pitches")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function ac(r){let e;return{c(){e=w("sports centres")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function fc(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[ic]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[ac]},$$scope:{ctx:r}}}),s=new Ke({}),{c(){e=O("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=L(),h(s.$$.fragment)},m(f,c){_(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const $={};c&1&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(g(e),g(u)),v(t),v(o),v(s,f)}}}function uc(r){let e,n;return e=new $n({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class cc extends U{constructor(e){super(),z(this,e,null,uc,W,{})}}function $c(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function pc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function mc(r){let e;return{c(){e=w("methodology")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function _c(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new X({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[pc]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[mc]},$$scope:{ctx:r}}}),f=new Re({}),{c(){e=O("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=L(),s=O("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=L(),h(f.$$.fragment)},m(p,$){_(p,e,$),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),_(p,u,$),_(p,s,$),_(p,a,$),b(f,p,$),c=!0},p(p,$){const y={};$&64&&(y.$$scope={dirty:$,ctx:p}),t.$set(y);const S={};$&64&&(S.$$scope={dirty:$,ctx:p}),o.$set(S)},i(p){c||(m(t.$$.fragment,p),m(o.$$.fragment,p),m(f.$$.fragment,p),c=!0)},o(p){d(t.$$.fragment,p),d(o.$$.fragment,p),d(f.$$.fragment,p),c=!1},d(p){p&&(g(e),g(u),g(s),g(a)),v(t),v(o),v(f,p)}}}function gc(r){let e,n,t;return n=new ie({props:{$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){e=O("span"),h(n.$$.fragment),K(e,"slot","right")},m(l,o){_(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&g(e),v(n)}}}function fr(r){let e,n;return e=new Xe({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,p,$,y=r[5].pedal_cycles_2022.toLocaleString()+"",S,T,C,N,I,j=r[5].method+"",A;return{c(){e=O("h2"),t=w(n),l=L(),o=O("p"),i=w("Total motor vehicles (2022 AADF): "),u=O("b"),a=w(s),f=L(),c=O("p"),p=w("Total pedal cycles (2022 AADF): "),$=O("b"),S=w(y),T=L(),C=O("p"),N=w("Count method: "),I=O("b"),A=w(j)},m(E,D){_(E,e,D),k(e,t),_(E,l,D),_(E,o,D),k(o,i),k(o,u),k(u,a),_(E,f,D),_(E,c,D),k(c,p),k(c,$),k($,S),_(E,T,D),_(E,C,D),k(C,N),k(C,I),k(I,A)},p(E,D){D&32&&n!==(n=E[5].location+"")&&H(t,n),D&32&&s!==(s=E[5].motor_vehicles_2022.toLocaleString()+"")&&H(a,s),D&32&&y!==(y=E[5].pedal_cycles_2022.toLocaleString()+"")&&H(S,y),D&32&&j!==(j=E[5].method+"")&&H(A,j)},d(E){E&&(g(e),g(l),g(o),g(f),g(c),g(T),g(C))}}}function hc(r){let e,n;return e=new le({props:{$$slots:{default:[dc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bc(r){let e,n;const t=[B(gt),{sourceLayer:gt},{paint:{"circle-color":_e(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let l={$$slots:{default:[hc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Ve({props:l}),e.$on("click",wc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Q(t,[i&0&&x(B(gt)),i&0&&{sourceLayer:gt},i&6&&{paint:{"circle-color":_e(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:gt,$$slots:{right:[gc],default:[$c]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new se({props:s}),V.push(()=>Y(e,"checked",u));let a=r[0]&&fr(r);return o=new pe({props:{url:`pmtiles://${ce()}/v1/${gt}.pmtiles`,$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),l=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),_(f,t,c),a&&a.m(f,c),_(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&64&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],J(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=fr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const $={};c&65&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(g(t),g(l)),v(e,f),a&&a.d(f),v(o,f)}}}let gt="vehicle_counts";function wc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function kc(r,e,n){let t=G.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class yc extends U{constructor(e){super(),z(this,e,kc,vc,W,{})}}function Sc(r){let e,n,t,l,o,i,u,s;return e=new sc({}),t=new Vu({}),o=new cc({}),u=new nc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(u.$$.fragment)},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),_(a,l,f),b(o,a,f),_(a,i,f),b(u,a,f),s=!0},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),s=!1},d(a){a&&(g(n),g(l),g(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Cc(r){let e,n;return e=new Ot({props:{small:!0,$$slots:{default:[Sc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tc(r){let e,n,t,l,o,i,u,s,a,f;return e=new $f({}),t=new kf({}),o=new ef({}),u=new Du({}),a=new Su({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(u.$$.fragment),s=L(),h(a.$$.fragment)},m(c,p){b(e,c,p),_(c,n,p),b(t,c,p),_(c,l,p),b(o,c,p),_(c,i,p),b(u,c,p),_(c,s,p),b(a,c,p),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(g(n),g(l),g(i),g(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Lc(r){let e,n;return e=new Ot({props:{small:!0,$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Aa({}),t=new Ra({}),o=new Mi({}),u=new la({}),a=new ha({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(u.$$.fragment),s=L(),h(a.$$.fragment)},m(c,p){b(e,c,p),_(c,n,p),b(t,c,p),_(c,l,p),b(o,c,p),_(c,i,p),b(u,c,p),_(c,s,p),b(a,c,p),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(g(n),g(l),g(i),g(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Ac(r){let e,n;return e=new Ot({props:{small:!0,$$slots:{default:[Oc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pc(r){let e,n,t,l;return e=new Ci({}),t=new Xi({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Ec(r){let e,n,t,l;return e=new ru({}),t=new Xf({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,i){b(e,o,i),_(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&g(n),v(e,o),v(t,o)}}}function Nc(r){let e,n,t,l,o=an()=="Private (development)",i,u;e=new yc({}),t=new Mf({});let s=o&&Ec();return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),s&&s.c(),i=ke()},m(a,f){b(e,a,f),_(a,n,f),b(t,a,f),_(a,l,f),s&&s.m(a,f),_(a,i,f),u=!0},p:te,i(a){u||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(s),u=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(s),u=!1},d(a){a&&(g(n),g(l),g(i)),v(e,a),v(t,a),s&&s.d(a)}}}function Ic(r){let e,n,t,l,o;function i(s){r[4](s)}let u={displayEnableButton:!0};return r[1]!==void 0&&(u.isInactive=r[1]),e=new tl({props:u}),r[3](e),V.push(()=>Y(e,"isInactive",i)),l=new Ks({}),{c(){h(e.$$.fragment),t=L(),h(l.$$.fragment)},m(s,a){b(e,s,a),_(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&2&&(n=!0,f.isInactive=s[1],J(()=>n=!1)),e.$set(f)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&g(t),r[3](null),v(e,s),v(l,s)}}}function Dc(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,y,S,T;return e=new pu({}),t=new Ce({props:{label:"Trip generators",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),o=new Ce({props:{label:"Existing infrastructure",$$slots:{default:[Lc]},$$scope:{ctx:r}}}),u=new Ce({props:{label:"Boundaries",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),a=new Ce({props:{label:"Census",$$slots:{default:[Pc]},$$scope:{ctx:r}}}),c=new Ce({props:{label:"Other",$$slots:{default:[Nc]},$$scope:{ctx:r}}}),$=new Ce({props:{label:"Tools",$$slots:{default:[Ic]},$$scope:{ctx:r}}}),S=new el({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(u.$$.fragment),s=L(),h(a.$$.fragment),f=L(),h(c.$$.fragment),p=L(),h($.$$.fragment),y=L(),h(S.$$.fragment)},m(C,N){b(e,C,N),_(C,n,N),b(t,C,N),_(C,l,N),b(o,C,N),_(C,i,N),b(u,C,N),_(C,s,N),b(a,C,N),_(C,f,N),b(c,C,N),_(C,p,N),b($,C,N),_(C,y,N),b(S,C,N),T=!0},p(C,N){const I={};N&32&&(I.$$scope={dirty:N,ctx:C}),t.$set(I);const j={};N&32&&(j.$$scope={dirty:N,ctx:C}),o.$set(j);const A={};N&32&&(A.$$scope={dirty:N,ctx:C}),u.$set(A);const E={};N&32&&(E.$$scope={dirty:N,ctx:C}),a.$set(E);const D={};N&32&&(D.$$scope={dirty:N,ctx:C}),c.$set(D);const P={};N&35&&(P.$$scope={dirty:N,ctx:C}),$.$set(P);const M={};N&2&&(M.disabled=!C[1]),S.$set(M)},i(C){T||(m(e.$$.fragment,C),m(t.$$.fragment,C),m(o.$$.fragment,C),m(u.$$.fragment,C),m(a.$$.fragment,C),m(c.$$.fragment,C),m($.$$.fragment,C),m(S.$$.fragment,C),T=!0)},o(C){d(e.$$.fragment,C),d(t.$$.fragment,C),d(o.$$.fragment,C),d(u.$$.fragment,C),d(a.$$.fragment,C),d(c.$$.fragment,C),d($.$$.fragment,C),d(S.$$.fragment,C),T=!1},d(C){C&&(g(n),g(l),g(i),g(s),g(f),g(p),g(y)),v(e,C),v(t,C),v(o,C),v(u,C),v(a,C),v(c,C),v($,C),v(S,C)}}}function Fc(r){let e,n,t,l;return e=new Ce({props:{label:"Layers",open:!0,$$slots:{default:[Dc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0,t||(l=dt(window,"keydown",r[2]),t=!0)},p(o,[i]){const u={};i&35&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o),t=!1,l()}}}function Mc(r,e,n){let t;Be(r,dn,s=>n(1,t=s));let l;function o(s){!t&&s.key=="Escape"&&(l.disableStreetView(),s.preventDefault())}function i(s){V[s?"unshift":"push"](()=>{l=s,n(0,l)})}function u(s){t=s,dn.set(t)}return[l,t,o,i,u]}class jc extends U{constructor(e){super(),z(this,e,Mc,Fc,W,{})}}function Bc(r,e,n){let{loadFile:t}=e;return Lt(async()=>{let o=await(await fetch(`${un()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class Hc extends U{constructor(e){super(),z(this,e,Bc,null,W,{loadFile:0})}}function Rc(r){let e;return{c(){e=w("Show on map")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Wc(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){_(n,e,t)},d(n){n&&g(e)}}}function Gc(r){let e,n,t=r[0].authority_or_region+"",l,o,i,u,s=r[0].capital_scheme_id+"",a,f,c,p,$=r[0].funding_programme+"",y,S,T,C,N,I,j;return C=new yt({props:{$$slots:{default:[Rc]},$$scope:{ctx:r}}}),C.$on("click",r[3]),I=new yt({props:{disabled:r[1],title:r[2],$$slots:{default:[Wc]},$$scope:{ctx:r}}}),I.$on("click",r[4]),{c(){e=O("p"),n=w("Authority or region: "),l=w(t),o=L(),i=O("p"),u=w("Capital scheme ID: "),a=w(s),f=L(),c=O("p"),p=w("Funding programme: "),y=w($),S=L(),T=O("div"),h(C.$$.fragment),N=L(),h(I.$$.fragment),K(T,"class","govuk-button-group")},m(A,E){_(A,e,E),k(e,n),k(e,l),_(A,o,E),_(A,i,E),k(i,u),k(i,a),_(A,f,E),_(A,c,E),k(c,p),k(c,y),_(A,S,E),_(A,T,E),b(C,T,null),k(T,N),b(I,T,null),j=!0},p(A,E){(!j||E&1)&&t!==(t=A[0].authority_or_region+"")&&H(l,t),(!j||E&1)&&s!==(s=A[0].capital_scheme_id+"")&&H(a,s),(!j||E&1)&&$!==($=A[0].funding_programme+"")&&H(y,$);const D={};E&256&&(D.$$scope={dirty:E,ctx:A}),C.$set(D);const P={};E&256&&(P.$$scope={dirty:E,ctx:A}),I.$set(P)},i(A){j||(m(C.$$.fragment,A),m(I.$$.fragment,A),j=!0)},o(A){d(C.$$.fragment,A),d(I.$$.fragment,A),j=!1},d(A){A&&(g(e),g(o),g(i),g(f),g(c),g(S),g(T)),v(C),v(I)}}}function Uc(r){let e,n;return e=new Ce({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[Gc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),l&257&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zc(r,e,n){let t;Be(r,Tt,c=>n(7,t=c));let{schemesGj:l}=e,{scheme:o}=e,{authorityNames:i}=e,u=!i.has(o.authority_or_region),s=u?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function a(){let c={type:"FeatureCollection",features:l.features.filter(p=>p.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(Yr(c),{padding:20,animate:!1})}function f(){let c={type:"FeatureCollection",features:l.features.filter($=>$.properties.scheme_reference==o.scheme_reference)},p=o.authority_or_region;window.localStorage.setItem(p,JSON.stringify(c)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return r.$$set=c=>{"schemesGj"in c&&n(5,l=c.schemesGj),"scheme"in c&&n(0,o=c.scheme),"authorityNames"in c&&n(6,i=c.authorityNames)},[o,u,s,a,f,l,i]}class qc extends U{constructor(e){super(),z(this,e,zc,Uc,W,{schemesGj:5,scheme:0,authorityNames:6})}}const Vc=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function ur(r){let e,n,t=hn(r[0].length_meters)+"",l;return{c(){e=O("p"),n=w("Length: "),l=w(t)},m(o,i){_(o,e,i),k(e,n),k(e,l)},p(o,i){i&1&&t!==(t=hn(o[0].length_meters)+"")&&H(l,t)},d(o){o&&g(e)}}}function cr(r){let e,n=r[1](r[0].description)+"";return{c(){e=O("p")},m(t,l){_(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&g(e)}}}function Xc(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,p=r[0].scheme_reference+"",$,y,S,T=r[0].length_meters&&ur(r),C=r[0].description&&cr(r);return{c(){e=O("div"),n=O("h2"),t=new fn(!1),o=w(" ("),u=w(i),s=w(")"),a=L(),f=O("p"),c=w("Scheme reference: "),$=w(p),y=L(),T&&T.c(),S=L(),C&&C.c(),t.a=o,Le(e,"max-width","30vw")},m(N,I){_(N,e,I),k(e,n),t.m(l,n),k(n,o),k(n,u),k(n,s),k(e,a),k(e,f),k(f,c),k(f,$),k(e,y),T&&T.m(e,null),k(e,S),C&&C.m(e,null)},p(N,[I]){I&1&&l!==(l=N[1](N[0].name)+"")&&t.p(l),I&1&&i!==(i=N[0].intervention_type+"")&&H(u,i),I&1&&p!==(p=N[0].scheme_reference+"")&&H($,p),N[0].length_meters?T?T.p(N,I):(T=ur(N),T.c(),T.m(e,S)):T&&(T.d(1),T=null),N[0].description?C?C.p(N,I):(C=cr(N),C.c(),C.m(e,null)):C&&(C.d(1),C=null)},i:te,o:te,d(N){N&&g(e),T&&T.d(),C&&C.d()}}}function Kc(r,e,n){let{props:t}=e,{filterText:l}=e;function o(i){return l?i.replace(new RegExp(l,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,l=i.filterText)},[t,o,l]}class pn extends U{constructor(e){super(),z(this,e,Kc,Xc,W,{props:0,filterText:2})}}function Yc(r){let e,n;return e=new pn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jc(r){let e,n;return e=new le({props:{$$slots:{default:[Yc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zc(r){let e,n;return e=new pn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qc(r){let e,n;return e=new le({props:{$$slots:{default:[Zc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xc(r){let e,n;return e=new pn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function e$(r){let e,n;return e=new le({props:{$$slots:{default:[xc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function t$(r){let e,n,t,l,o,i,u,s,a,f;const c=[B("interventions-points"),{filter:["all",bn,r[4],r[5]]},{manageHoverState:!0},{paint:{"circle-color":r[3],"circle-radius":jt,"circle-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let p={$$slots:{default:[Jc]},$$scope:{ctx:r}};for(let A=0;A<c.length;A+=1)p=Z(p,c[A]);e=new Ve({props:p});const $=[B("interventions-lines"),{filter:["all",vn,r[4]]},{manageHoverState:!0},{paint:{"line-color":r[3],"line-width":ot,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let y={$$slots:{default:[Qc]},$$scope:{ctx:r}};for(let A=0;A<$.length;A+=1)y=Z(y,$[A]);t=new $e({props:y});const S=[B("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*ot,"circle-opacity":0,"circle-stroke-color":Mt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let A=0;A<S.length;A+=1)T=Z(T,S[A]);o=new Ve({props:T});const C=[B("interventions-polygons"),{filter:["all",Et,r[4]]},{manageHoverState:!0},{paint:{"fill-color":r[3],"fill-opacity":q(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let N={$$slots:{default:[e$]},$$scope:{ctx:r}};for(let A=0;A<C.length;A+=1)N=Z(N,C[A]);u=new He({props:N});const I=[B("interventions-polygons-outlines"),{filter:["all",Et,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*ot}},{layout:{visibility:r[0]?"visible":"none"}}];let j={};for(let A=0;A<I.length;A+=1)j=Z(j,I[A]);return a=new $e({props:j}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),l=L(),h(o.$$.fragment),i=L(),h(u.$$.fragment),s=L(),h(a.$$.fragment)},m(A,E){b(e,A,E),_(A,n,E),b(t,A,E),_(A,l,E),b(o,A,E),_(A,i,E),b(u,A,E),_(A,s,E),b(a,A,E),f=!0},p(A,E){const D=E&57?Q(c,[E&0&&x(B("interventions-points")),E&48&&{filter:["all",bn,A[4],A[5]]},c[2],E&8&&{paint:{"circle-color":A[3],"circle-radius":jt,"circle-opacity":q(1,.5)}},E&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};E&258&&(D.$$scope={dirty:E,ctx:A}),e.$set(D);const P=E&25?Q($,[E&0&&x(B("interventions-lines")),E&16&&{filter:["all",vn,A[4]]},$[2],E&8&&{paint:{"line-color":A[3],"line-width":ot,"line-opacity":q(1,.5)}},E&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};E&258&&(P.$$scope={dirty:E,ctx:A}),t.$set(P);const M=E&1?Q(S,[E&0&&x(B("interventions-lines-endpoints")),S[1],E&0&&{paint:{"circle-radius":.5*ot,"circle-opacity":0,"circle-stroke-color":Mt.lineEndpointColor,"circle-stroke-width":2}},E&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};o.$set(M);const ee=E&25?Q(C,[E&0&&x(B("interventions-polygons")),E&16&&{filter:["all",Et,A[4]]},C[2],E&8&&{paint:{"fill-color":A[3],"fill-opacity":q(.2,.5)}},E&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};E&258&&(ee.$$scope={dirty:E,ctx:A}),u.$set(ee);const F=E&25?Q(I,[E&0&&x(B("interventions-polygons-outlines")),E&16&&{filter:["all",Et,A[4]]},E&8&&{paint:{"line-color":A[3],"line-opacity":.5,"line-width":.7*ot}},E&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};a.$set(F)},i(A){f||(m(e.$$.fragment,A),m(t.$$.fragment,A),m(o.$$.fragment,A),m(u.$$.fragment,A),m(a.$$.fragment,A),f=!0)},o(A){d(e.$$.fragment,A),d(t.$$.fragment,A),d(o.$$.fragment,A),d(u.$$.fragment,A),d(a.$$.fragment,A),f=!1},d(A){A&&(g(n),g(l),g(i),g(s)),v(e,A),v(t,A),v(o,A),v(u,A),v(a,A)}}}function n$(r){let e,n;return e=new ht({props:{data:r[2],$$slots:{default:[t$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function r$(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,{filterText:i}=e,u=vr("v1");const s=["!=","hide_while_editing",!0],a=["!=","endpoint",!0];return r.$$set=f=>{"schemesGj"in f&&n(6,l=f.schemesGj),"showSchemes"in f&&n(0,o=f.showSchemes),"filterText"in f&&n(1,i=f.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Jr(l))},[o,i,t,u,s,a,l]}class l$ extends U{constructor(e){super(),z(this,e,r$,n$,W,{schemesGj:6,showSchemes:0,filterText:1})}}function $r(r,e,n){const t=r.slice();return t[14]=e[n],t}function o$(r){let e,n;return e=new Hc({props:{loadFile:r[8]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pr(r){let e,n,t,l,o,i;function u(p){r[9](p)}function s(p){r[10](p)}function a(p){r[11](p)}function f(p){r[12](p)}let c={schemes:r[2]};return r[1]!==void 0&&(c.schemesGj=r[1]),r[3]!==void 0&&(c.schemesToBeShown=r[3]),r[4]!==void 0&&(c.filterText=r[4]),r[5]!==void 0&&(c.show=r[5]),e=new js({props:c}),V.push(()=>Y(e,"schemesGj",u)),V.push(()=>Y(e,"schemesToBeShown",s)),V.push(()=>Y(e,"filterText",a)),V.push(()=>Y(e,"show",f)),{c(){h(e.$$.fragment)},m(p,$){b(e,p,$),i=!0},p(p,$){const y={};$&4&&(y.schemes=p[2]),!n&&$&2&&(n=!0,y.schemesGj=p[1],J(()=>n=!1)),!t&&$&8&&(t=!0,y.schemesToBeShown=p[3],J(()=>t=!1)),!l&&$&16&&(l=!0,y.filterText=p[4],J(()=>l=!1)),!o&&$&32&&(o=!0,y.show=p[5],J(()=>o=!1)),e.$set(y)},i(p){i||(m(e.$$.fragment,p),i=!0)},o(p){d(e.$$.fragment,p),i=!1},d(p){v(e,p)}}}function mr(r){let e,n;return e=new qc({props:{schemesGj:r[1],scheme:r[14],authorityNames:r[7]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[14]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _r(r){let e=r[3].has(r[14].scheme_reference),n,t,l=e&&mr(r);return{c(){l&&l.c(),n=ke()},m(o,i){l&&l.m(o,i),_(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[14].scheme_reference)),e?l?(l.p(o,i),i&12&&m(l,1)):(l=mr(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(ae(),d(l,1,1,()=>{l=null}),fe())},i(o){t||(m(l),t=!0)},o(o){d(l),t=!1},d(o){o&&g(n),l&&l.d(o)}}}function s$(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,y,S=an()=="Private (development)",T,C,N,I,j,A,E,D;a=new ol({props:{boundaryGeojson:r[1]}}),c=new kl({}),$=new Zr({});let P=S&&o$(r);C=new il({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[8]}}),I=new br({props:{errorMessage:r[0]}});let M=r[2].size>0&&pr(r),ee=De(r[2].values()),F=[];for(let R=0;R<ee.length;R+=1)F[R]=_r($r(r,ee,R));const ue=R=>d(F[R],1,1,()=>{F[R]=null});return{c(){e=O("div"),n=O("p"),t=w("This updates correctly: "),l=w(r[4]),o=L(),i=O("div"),u=O("h1"),u.textContent="Browse schemes",s=L(),h(a.$$.fragment),f=L(),h(c.$$.fragment),p=L(),h($.$$.fragment),y=L(),P&&P.c(),T=L(),h(C.$$.fragment),N=L(),h(I.$$.fragment),j=L(),M&&M.c(),A=L(),E=O("ul");for(let R=0;R<F.length;R+=1)F[R].c();Le(i,"display","flex"),Le(i,"justify-content","space-between"),K(e,"slot","sidebar"),K(e,"class","govuk-prose")},m(R,ne){_(R,e,ne),k(e,n),k(n,t),k(n,l),k(e,o),k(e,i),k(i,u),k(i,s),b(a,i,null),k(e,f),b(c,e,null),k(e,p),b($,e,null),k(e,y),P&&P.m(e,null),k(e,T),b(C,e,null),k(e,N),b(I,e,null),k(e,j),M&&M.m(e,null),k(e,A),k(e,E);for(let ge=0;ge<F.length;ge+=1)F[ge]&&F[ge].m(E,null);D=!0},p(R,ne){(!D||ne&16)&&H(l,R[4]);const ge={};ne&2&&(ge.boundaryGeojson=R[1]),a.$set(ge),S&&P.p(R,ne);const me={};if(ne&1&&(me.errorMessage=R[0]),I.$set(me),R[2].size>0?M?(M.p(R,ne),ne&4&&m(M,1)):(M=pr(R),M.c(),m(M,1),M.m(e,A)):M&&(ae(),d(M,1,1,()=>{M=null}),fe()),ne&142){ee=De(R[2].values());let oe;for(oe=0;oe<ee.length;oe+=1){const We=$r(R,ee,oe);F[oe]?(F[oe].p(We,ne),m(F[oe],1)):(F[oe]=_r(We),F[oe].c(),m(F[oe],1),F[oe].m(E,null))}for(ae(),oe=ee.length;oe<F.length;oe+=1)ue(oe);fe()}},i(R){if(!D){m(a.$$.fragment,R),m(c.$$.fragment,R),m($.$$.fragment,R),m(P),m(C.$$.fragment,R),m(I.$$.fragment,R),m(M);for(let ne=0;ne<ee.length;ne+=1)m(F[ne]);D=!0}},o(R){d(a.$$.fragment,R),d(c.$$.fragment,R),d($.$$.fragment,R),d(P),d(C.$$.fragment,R),d(I.$$.fragment,R),d(M),F=F.filter(Boolean);for(let ne=0;ne<F.length;ne+=1)d(F[ne]);D=!1},d(R){R&&g(e),v(a),v(c),v($),P&&P.d(),v(C),v(I),M&&M.d(),Dt(F,R)}}}function i$(r){let e,n,t,l,o,i,u,s,a,f,c,p,$;return e=new l$({props:{schemesGj:r[1],filterText:r[4],showSchemes:r[5]}}),p=new jc({}),{c(){h(e.$$.fragment),n=L(),t=O("div"),l=O("p"),o=w("This does not update: "),i=w(r[4]),u=L(),s=O("p"),a=w("But this one is fine: "),f=w(r[5]),c=L(),h(p.$$.fragment),K(t,"class","top-right svelte-u44ed2")},m(y,S){b(e,y,S),_(y,n,S),_(y,t,S),k(t,l),k(l,o),k(l,i),k(t,u),k(t,s),k(s,a),k(s,f),k(t,c),b(p,t,null),$=!0},p(y,S){const T={};S&2&&(T.schemesGj=y[1]),S&16&&(T.filterText=y[4]),S&32&&(T.showSchemes=y[5]),e.$set(T),(!$||S&16)&&H(i,y[4]),(!$||S&32)&&H(f,y[5])},i(y){$||(m(e.$$.fragment,y),m(p.$$.fragment,y),$=!0)},o(y){d(e.$$.fragment,y),d(p.$$.fragment,y),$=!1},d(y){y&&(g(n),g(t)),v(e,y),v(p)}}}function a$(r){let e,n,t,l,o,i,u;return n=new Qr({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[i$]},$$scope:{ctx:r}}}),{c(){e=O("div"),h(n.$$.fragment),t=L(),l=O("p"),o=w("This one updates: "),i=w(r[4]),K(l,"id","debugme"),K(e,"slot","main")},m(s,a){_(s,e,a),b(n,e,null),k(e,t),k(e,l),k(l,o),k(l,i),u=!0},p(s,a){const f={};a&64&&(f.style=s[6]),a&131122&&(f.$$scope={dirty:a,ctx:s}),n.$set(f),(!u||a&16)&&H(i,s[4])},i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){d(n.$$.fragment,s),u=!1},d(s){s&&g(e),v(n)}}}function f$(r){let e,n;return e=new nl({props:{$$slots:{main:[a$],sidebar:[s$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&131199&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function u$(r,e,n){let t;Be(r,wn,C=>n(6,t=C)),Lt(()=>{xr()});let l=new Set(Vc);const o=new URLSearchParams(window.location.search);wn.set(o.get("style")||"dataviz");let i="",u={type:"FeatureCollection",features:[],schemes:{}},s=new Map,a=new Set,f="",c=!0;function p(C){try{n(1,u=JSON.parse(C)),n(2,s=Ss(u)),n(0,i="")}catch(N){n(0,i=`The file you loaded is broken: ${N}`)}}function $(C){u=C,n(1,u)}function y(C){a=C,n(3,a)}function S(C){f=C,n(4,f)}function T(C){c=C,n(5,c)}return[i,u,s,a,f,c,t,l,p,$,y,S,T]}class c$ extends U{constructor(e){super(),z(this,e,u$,f$,W,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new c$({target:document.getElementById("app")});
