import{S as J,i as K,s as Y,e as O,h as G,a1 as Se,j as $,Y as ne,o as p,aR as ul,b as U,c as W,d as L,g as h,m as b,w as it,l as V,t as m,n as _,p as v,Z as Wt,_ as Vt,$ as Xt,a0 as Yt,a9 as je,N as $e,O as pe,aU as _t,u as y,k as w,H as z,K as Fe,P as Cn,Q as cl,q as ke,T as $l,U as pl,V as st,W as ml,X as _l,a$ as Bl,b0 as $t,a6 as En,b1 as zl,aQ as Hl,at as ht,ag as Tn,al as Qt,r as On,a as gt,F as mn,v as We,a_ as Q,b2 as he,b3 as we,C as x,aj as ee,D as ye,am as te,b4 as ae,G as bt,J as gl,aW as qt,ad as tn,b5 as ln,R as dl,b6 as zt,E as hl,aL as ql,b7 as Gl,b8 as Ul,f as _n,ai as Wl,B as Vl,aY as Dn,an as Xl,ao as jn,ap as Rn,aq as Zt,aZ as Bn,L as Yl,M as Ql,y as Jl}from"./index-723112e7.js";import{d as rt,j as mt,C as De,f as Xe,h as le,l as H,k as Kl,S as Zl,B as xl,c as zn,b as vt,G as eo}from"./StreetViewTool-66158cac.js";import{a as Ge,F as to}from"./Popup-6077660e.js";import{P as fe}from"./Popup-66fed2ec.js";import{R as no,C as at,Z as ro}from"./ZoomOutMap-0bc0c1d6.js";import{L as lo,a as oo}from"./LineMeasureController-46721e29.js";function so(l){let e;return{c(){e=O("span"),G(e,"class","svelte-kzgqtg"),Se(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Se(e,"background",n[0])},i:ne,o:ne,d(n){n&&p(e)}}}function io(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Oe extends J{constructor(e){super(),K(this,e,io,so,Y,{color:0})}}const ao="/atip/fix-storage-quota-bug/assets/help-d011708a.svg";function fo(l){let e,n;const t=l[1].default,r=Wt(t,l,l[4],null);return{c(){e=O("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&Vt(r,t,o,o[4],n?Yt(t,o[4],s,null):Xt(o[4]),null)},i(o){n||(m(r,o),n=!0)},o(o){_(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function uo(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[fo]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new ul({props:a}),U.push(()=>W(t,"open",i)),{c(){e=O("button"),e.innerHTML=`<img src="${ao}" title="Help" alt="Help"/>`,n=L(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,s||(u=it(e,"click",l[2]),s=!0)},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,g.open=f[0],V(()=>r=!1)),t.$set(g)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),s=!1,u()}}}function co(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class me extends J{constructor(e){super(),K(this,e,co,uo,Y,{})}}function Hn(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function qn(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Oe({props:{color:l[2]}}),{c(){e=O("li"),h(n.$$.fragment),t=L(),o=y(r),s=L()},m(i,a){$(i,e,a),b(n,e,null),w(e,t),w(e,o),w(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&z(o,r)},i(i){u||(m(n.$$.fragment,i),u=!0)},o(i){_(n.$$.fragment,i),u=!1},d(i){i&&p(e),v(n)}}}function $o(l){let e,n,t=je(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=qn(Hn(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){e=O("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=je(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Hn(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=qn(a),r[i].c(),m(r[i],1),r[i].m(e,null))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),_t(r,s)}}}function po(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class Ln extends J{constructor(e){super(),K(this,e,po,$o,Y,{rows:0})}}function Gn(l){let e=l[0],n,t,r=Un(l);return{c(){r.c(),n=Fe()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),_(r,1,1,ne),pe(),r=Un(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Un(l){let e;const n=l[10].default,t=Wt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&Vt(t,n,r,r[9],e?Yt(n,r[9],o,null):Xt(r[9]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function mo(l){let e,n,t=l[0]&&Gn(l);return{c(){t&&t.c(),e=Fe()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Gn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),_(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function _o(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Cn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=cl();ke(l,f,k=>n(8,r=k)),ke(l,c,k=>n(0,t=k));let g,d=!0;return $l(()=>{t&&g&&r&&(pl(f,t,g),st(c,t=null,t),n(6,g=void 0))}),l.$$set=k=>{"id"in k&&n(3,u=k.id),"tiles"in k&&n(4,i=k.tiles),"tileSize"in k&&n(5,a=k.tileSize),"$$scope"in k&&n(9,s=k.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(st(c,t=u,t),ml(r,t,_l({type:"raster",tiles:i,tileSize:a}),k=>r&&k===t,()=>{t&&(n(6,g=r==null?void 0:r.getSource(t)),n(7,d=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,g=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&g&&(d?n(7,d=!1):g.setTiles(i))},[t,f,c,u,i,a,g,d,r,s,o]}class go extends J{constructor(e){super(),K(this,e,_o,mo,Y,{id:3,tiles:4,tileSize:5})}}function ho(l){let e;const n=l[16].default,t=Wt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&Vt(t,n,r,r[24],e?Yt(n,r[24],o,null):Xt(r[24]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function bo(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[ho]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Bl({props:o}),U.push(()=>W(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function vo(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Cn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:M=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:I=!1}=e,{interactive:P=!0}=e;function A(D){j=D,n(0,j)}function F(D){$t.call(this,l,D)}function E(D){$t.call(this,l,D)}function S(D){$t.call(this,l,D)}function N(D){$t.call(this,l,D)}function q(D){$t.call(this,l,D)}function R(D){$t.call(this,l,D)}return l.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,s=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,i=D.beforeId),"beforeLayerType"in D&&n(5,a=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,g=D.filter),"applyToClusters"in D&&n(9,d=D.applyToClusters),"minzoom"in D&&n(10,k=D.minzoom),"maxzoom"in D&&n(11,T=D.maxzoom),"hoverCursor"in D&&n(12,C=D.hoverCursor),"manageHoverState"in D&&n(13,M=D.manageHoverState),"hovered"in D&&n(0,j=D.hovered),"eventsIfTopMost"in D&&n(14,I=D.eventsIfTopMost),"interactive"in D&&n(15,P=D.interactive),"$$scope"in D&&n(24,r=D.$$scope)},[j,o,s,u,i,a,f,c,g,d,k,T,C,M,I,P,t,A,F,E,S,N,q,R,r]}class on extends J{constructor(e){super(),K(this,e,vo,bo,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Wn(l){let e=l[0],n,t,r=Vn(l);return{c(){r.c(),n=Fe()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),_(r,1,1,ne),pe(),r=Vn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Vn(l){let e;const n=l[9].default,t=Wt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&Vt(t,n,r,r[8],e?Yt(n,r[8],o,null):Xt(r[8]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function wo(l){let e,n,t=l[0]&&Wn(l);return{c(){t&&t.c(),e=Fe()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Wn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),_(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function ko(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Cn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!En.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let k=new zl;En.addProtocol("pmtiles",k.tile)}const{map:c,self:g}=cl();ke(l,c,k=>n(7,r=k)),ke(l,g,k=>n(0,t=k));let d;return $l(()=>{t&&r&&(pl(c,t,d),st(g,t=null,t),d=void 0)}),l.$$set=k=>{"id"in k&&n(3,u=k.id),"url"in k&&n(4,i=k.url),"tiles"in k&&n(5,a=k.tiles),"promoteId"in k&&n(6,f=k.promoteId),"$$scope"in k&&n(8,s=k.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(st(g,t=u,t),ml(r,t,_l({type:"vector",url:i,tiles:a,promoteId:f}),k=>r&&k===t,()=>{t&&(d=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{d=r==null?void 0:r.getSource(u)}))},[t,c,g,u,i,a,f,r,s,o]}class ve extends J{constructor(e){super(),K(this,e,ko,wo,Y,{id:3,url:4,tiles:5,promoteId:6})}}const yo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Me=Uint8Array,ut=Uint16Array,bl=Uint32Array,vl=new Me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wl=new Me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),So=new Me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kl=function(l,e){for(var n=new ut(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new bl(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},yl=kl(vl,2),Sl=yl[0],Co=yl[1];Sl[28]=258,Co[258]=28;var To=kl(wl,0),Oo=To[0],gn=new ut(32768);for(var de=0;de<32768;++de){var lt=(de&43690)>>>1|(de&21845)<<1;lt=(lt&52428)>>>2|(lt&13107)<<2,lt=(lt&61680)>>>4|(lt&3855)<<4,gn[de]=((lt&65280)>>>8|(lt&255)<<8)>>>1}var Ht=function(l,e,n){for(var t=l.length,r=0,o=new ut(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new ut(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new ut(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,g=c|(1<<f)-1;c<=g;++c)u[gn[c]>>>i]=a}else for(u=new ut(t),r=0;r<t;++r)l[r]&&(u[r]=gn[s[l[r]-1]++]>>>15-l[r]);return u},Jt=new Me(288);for(var de=0;de<144;++de)Jt[de]=8;for(var de=144;de<256;++de)Jt[de]=9;for(var de=256;de<280;++de)Jt[de]=7;for(var de=280;de<288;++de)Jt[de]=8;var Cl=new Me(32);for(var de=0;de<32;++de)Cl[de]=5;var Lo=Ht(Jt,9,1),Ao=Ht(Cl,5,1),sn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},ze=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},an=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Io=function(l){return(l+7)/8|0},An=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?ut:l.BYTES_PER_ELEMENT==4?bl:Me)(n-e);return t.set(l.subarray(e,n)),t},Mo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],He=function(l,e,n){var t=new Error(e||Mo[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,He),!n)throw t;return t},Po=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Me(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Me(t*3));var s=function(Ee){var Ce=e.length;if(Ee>Ce){var Qe=new Me(Math.max(Ce*2,Ee));Qe.set(e),e=Qe}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,g=n.m,d=n.n,k=t*8;do{if(!f){u=ze(l,i,1);var T=ze(l,i+1,3);if(i+=3,T)if(T==1)f=Lo,c=Ao,g=9,d=5;else if(T==2){var I=ze(l,i,31)+257,P=ze(l,i+10,15)+4,A=I+ze(l,i+5,31)+1;i+=14;for(var F=new Me(A),E=new Me(19),S=0;S<P;++S)E[So[S]]=ze(l,i+S*3,7);i+=P*3;for(var N=sn(E),q=(1<<N)-1,R=Ht(E,N,1),S=0;S<A;){var D=R[ze(l,i,q)];i+=D&15;var C=D>>>4;if(C<16)F[S++]=C;else{var B=0,X=0;for(C==16?(X=3+ze(l,i,3),i+=2,B=F[S-1]):C==17?(X=3+ze(l,i,7),i+=3):C==18&&(X=11+ze(l,i,127),i+=7);X--;)F[S++]=B}}var re=F.subarray(0,I),oe=F.subarray(I);g=sn(re),d=sn(oe),f=Ht(re,g,1),c=Ht(oe,d,1)}else He(1);else{var C=Io(i)+4,M=l[C-4]|l[C-3]<<8,j=C+M;if(j>t){o&&He(0);break}r&&s(a+M),e.set(l.subarray(C,j),a),n.b=a+=M,n.p=i=j*8,n.f=u;continue}if(i>k){o&&He(0);break}}r&&s(a+131072);for(var ce=(1<<g)-1,Ie=(1<<d)-1,Te=i;;Te=i){var B=f[an(l,i)&ce],ie=B>>>4;if(i+=B&15,i>k){o&&He(0);break}if(B||He(2),ie<256)e[a++]=ie;else if(ie==256){Te=i,f=null;break}else{var Le=ie-254;if(ie>264){var S=ie-257,ue=vl[S];Le=ze(l,i,(1<<ue)-1)+Sl[S],i+=ue}var _e=c[an(l,i)&Ie],ge=_e>>>4;_e||He(3),i+=_e&15;var oe=Oo[ge];if(ge>3){var ue=wl[ge];oe+=an(l,i)&(1<<ue)-1,i+=ue}if(i>k){o&&He(0);break}r&&s(a+131072);for(var Be=a+Le;a<Be;a+=4)e[a]=e[a-oe],e[a+1]=e[a+1-oe],e[a+2]=e[a+2-oe],e[a+3]=e[a+3-oe];a=Be}}n.l=f,n.p=Te,n.b=a,n.f=u,f&&(u=1,n.m=g,n.d=c,n.n=d)}while(!u);return a==e.length?e:An(e,0,a)},No=new Me(0),Ue=function(l,e){return l[e]|l[e+1]<<8},qe=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},fn=function(l,e){return qe(l,e)+qe(l,e+4)*4294967296};function Fo(l,e){return Po(l,e)}var dn=typeof TextDecoder<"u"&&new TextDecoder,Eo=0;try{dn.decode(No,{stream:!0}),Eo=1}catch{}var Do=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,An(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function Tl(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(dn)return dn.decode(l);var r=Do(l),o=r[0],s=r[1];return s.length&&He(8),o}}var jo=function(l,e){return e+30+Ue(l,e+26)+Ue(l,e+28)},Ro=function(l,e,n){var t=Ue(l,e+28),r=Tl(l.subarray(e+46,e+46+t),!(Ue(l,e+8)&2048)),o=e+46+t,s=qe(l,e+20),u=n&&s==4294967295?Bo(l,o):[s,qe(l,e+24),qe(l,e+42)],i=u[0],a=u[1],f=u[2];return[Ue(l,e+10),i,a,r,o+Ue(l,e+30)+Ue(l,e+32),f]},Bo=function(l,e){for(;Ue(l,e)!=1;e+=4+Ue(l,e+2));return[fn(l,e+12),fn(l,e+4),fn(l,e+20)]};function zo(l,e){for(var n={},t=l.length-22;qe(l,t)!=101010256;--t)(!t||l.length-t>65558)&&He(13);var r=Ue(l,t+8);if(!r)return{};var o=qe(l,t+16),s=o==4294967295||r==65535;if(s){var u=qe(l,t-12);s=qe(l,u)==101075792,s&&(r=qe(l,u+32),o=qe(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=Ro(l,o,s),c=f[0],g=f[1],d=f[2],k=f[3],T=f[4],C=f[5],M=jo(l,C);o=T,(!i||i({name:k,size:g,originalSize:d,compression:c}))&&(c?c==8?n[k]=Fo(l.subarray(M,M+g),new Me(d)):He(14,"unknown compression type "+c):n[k]=An(l,M,M+g))}return n}function Ho(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(un):un(l)}function un(l){var e=new Uint8Array(l),n=zo(e);return Promise.resolve(qo(n))}function qo(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=Tl(l[r])}return e}function Ve(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&ct(t)===e)return t;n++}}function Kt(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&ct(r)===e&&n.push(r),t++}return n}function nn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&ct(r)===e&&n(r,t):n(r,t),t++}}function Go(l,e,n){var t=[];return nn(l,e,function(r,o){t.push(n(r,o))}),t}var Uo=/.+\:/;function ct(l){return l.tagName.replace(Uo,"")}function Ol(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+ct(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=Ol(l.childNodes[t]),t++;return e+="</"+ct(l)+">",e}function Wo(l){var e=l.documentElement,n=Ve(e,"sheetData"),t=[];return nn(n,"row",function(r){nn(r,"c",function(o){t.push(o)})}),t}function Vo(l,e){return Ve(e,"v")}function Xo(l,e){if(e.firstChild&&ct(e.firstChild)==="is"&&e.firstChild.firstChild&&ct(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Yo(l){var e=l.documentElement,n=Ve(e,"dimension");if(n)return n.getAttribute("ref")}function Qo(l){var e=l.documentElement,n=Ve(e,"cellStyleXfs");return n?Kt(n,"xf"):[]}function Jo(l){var e=l.documentElement,n=Ve(e,"cellXfs");return n?Kt(n,"xf"):[]}function Ko(l){var e=l.documentElement,n=Ve(e,"numFmts");return n?Kt(n,"numFmt"):[]}function Zo(l){var e=l.documentElement;return Go(e,"si",function(n){var t=Ve(n,"t");if(t)return t.textContent;var r="";return nn(n,"r",function(o){r+=Ve(o,"t").textContent}),r})}function xo(l){var e=l.documentElement;return Ve(e,"workbookPr")}function es(l){var e=l.documentElement;return Kt(e,"Relationship")}function ts(l){var e=l.documentElement,n=Ve(e,"sheets");return Kt(n,"sheet")}function ns(l,e){var n=e.createDocument(l),t={},r=xo(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return ts(n).forEach(o),t}function rs(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=cn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=cn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=cn(u);break}};return es(n).forEach(r),t}function cn(l){return l[0]==="/"?l.slice(1):"xl/"+l}function Xn(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Yn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xn(Object(n),!0).forEach(function(t){ls(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ls(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function os(l,e){if(!l)return{};var n=e.createDocument(l),t=Qo(n).map($n),r=Ko(n).map(ss).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?Yn(Yn({},t[u.xfId]),$n(u,r)):$n(u,r)};return Jo(n).map(o)}function ss(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function $n(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function is(l,e){return l?Zo(e.createDocument(l)):[]}function Ll(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function as(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=fs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fs(l,e){if(l){if(typeof l=="string")return Qn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qn(l,e)}}function Qn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function us(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(cs.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&ms(t.numberFormat.template))return!0}}var cs=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],$s=/^\[\$-414\]/,ps=/;@$/;function ms(l){l=l.toLowerCase(),l=l.replace($s,""),l=l.replace(ps,"");for(var e=l.split(/\W+/),n=as(e),t;!(t=n()).done;){var r=t.value;if(_s.indexOf(r)<0)return!1}return!0}var _s=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function gs(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=pn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=pn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=pn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=ds(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var g=us(o(),s,a);g?(l=Jn(l),l=Ll(l,i)):l=(a.parseNumber||Jn)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function ds(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function pn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function Jn(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var hs=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function bs(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function vs(l){for(var e=0,n=0;n<l.length;)e*=26,e+=hs.indexOf(l[n]),n++;return e}function Al(l){return l=l.split(/(\d+)/),[parseInt(l[1]),vs(l[0].trim())]}function ws(l,e,n,t,r,o,s){var u=Al(l.getAttribute("r")),i=Vo(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:gs(a,f,{getInlineStringValue:function(){return Xo(e,l)},getInlineStringXml:function(){return Ol(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function ks(l,e,n,t,r,o){var s=Wo(l);return s.length===0?[]:s.map(function(u){return ws(u,l,e,n,t,r,o)})}function ys(l,e){return Os(l)||Ts(l,e)||Cs(l,e)||Ss()}function Ss(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cs(l,e){if(l){if(typeof l=="string")return Kn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(l,e)}}function Kn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ts(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Os(l){if(Array.isArray(l))return l}function Ls(l){var e=Yo(l);if(e)return e=e.split(":").map(Al).map(function(n){var t=ys(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function As(l,e,n,t,r,o){var s=e.createDocument(l),u=ks(s,e,n,t,r,o),i=Ls(s)||bs(u);return{cells:u,dimensions:i}}function Is(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Ms(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ms(l,e){if(l){if(typeof l=="string")return Zn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(l,e)}}function Zn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ps(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=Is(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Ns(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Fs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fs(l,e){if(l){if(typeof l=="string")return xn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(l,e)}}function xn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Es(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=Ns(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function Ds(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Il(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function js(l,e){return zs(l)||Bs(l,e)||Il(l,e)||Rs()}function Rs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Il(l,e){if(l){if(typeof l=="string")return er(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(l,e)}}function er(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Bs(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function zs(l){if(Array.isArray(l))return l}function Hs(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=js(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=Ds(t),g;!(g=c()).done;){var d=g.value,k=d.row-1,T=d.column-1;T<s&&k<u&&(i[k][T]=d.value)}var C=e.rowMap;if(C)for(var M=0;M<i.length;)C[M]=M,M++;return i=Ps(Es(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(i=e.transformData(i)),i}function qs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Gs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gs(l,e){if(l){if(typeof l=="string")return tr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(l,e)}}function tr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function nr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Us(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nr(Object(n),!0).forEach(function(t){Ws(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Ws(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Vs(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Us({sheet:1},n));var t=function(g){if(!l[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return l[g]},r=rs(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?is(t(r.sharedStrings),e):[],s=r.styles?os(t(r.styles),e):{},u=ns(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var g=c.name;return{name:g}});var i=Xs(n.sheet,u.sheets);if(!i||!r.sheets[i])throw Ys(n.sheet,u.sheets);var a=As(t(r.sheets[i]),e,o,s,u,n),f=Hs(a,n);return n.properties?{data:f,properties:u}:f}function Xs(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=qs(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Ys(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function hn(l){"@babel/helpers - typeof";return hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(l)}function rr(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Qs(l,e,n){return e&&rr(l.prototype,e),n&&rr(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function Js(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function Ks(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&Gt(l,e)}function Zs(l){var e=Ml();return function(){var t=Ut(l),r;if(e){var o=Ut(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return xs(this,r)}}function xs(l,e){if(e&&(hn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ei(l)}function ei(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function bn(l){var e=typeof Map=="function"?new Map:void 0;return bn=function(t){if(t===null||!ti(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return en(t,arguments,Ut(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Gt(r,t)},bn(l)}function en(l,e,n){return Ml()?en=Reflect.construct:en=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&Gt(a,s.prototype),a},en.apply(null,arguments)}function Ml(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ti(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function Gt(l,e){return Gt=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},Gt(l,e)}function Ut(l){return Ut=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Ut(l)}var Pe=function(l){Ks(n,l);var e=Zs(n);function n(t){var r;return Js(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Qs(n)}(bn(Error));function ni(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new Pe("not_a_number")}if(typeof l!="number")throw new Pe("not_a_number");if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");return l}function ri(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");return String(l)}throw new Pe("not_a_string")}function li(l){if(typeof l=="boolean")return l;throw new Pe("not_a_boolean")}function oi(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new Pe("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");var t=Ll(l,n);if(isNaN(t.valueOf()))throw new Pe("out_of_bounds");return t}throw new Pe("not_a_date")}function si(l,e){return fi(l)||ai(l,e)||Pl(l,e)||ii()}function ii(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ai(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function fi(l){if(Array.isArray(l))return l}function vn(l){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(l)}function ui(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Pl(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pl(l,e){if(l){if(typeof l=="string")return lr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lr(l,e)}}function lr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function or(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function sr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?or(Object(n),!0).forEach(function(t){ci(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ci(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var ir={isColumnOriented:!1};function $i(l,e,n){n?n=sr(sr({},ir),n):n=ir;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;gi(e),r&&(l=_i(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=Nl(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=ui(a),d;!(d=g()).done;){var k=d.value;k.row=o[k.row-1]+1}return{rows:i,errors:a}}function Nl(l,e,n,t,r,o){for(var s={},u=!0,i=function(j){var I=j.column,P=j.value,A=j.error,F=j.reason,E={error:A,row:n+1,column:I,value:P};return F&&(E.reason=F),l[I].type&&(E.type=l[I].type),E},a=[],f=function(){var j=g[c],I=l[j],P=vn(I.type)==="object"&&!Array.isArray(I.type),A=e[t.indexOf(j)];A===void 0&&(A=null);var F=void 0,E=void 0,S=void 0;if(P)F=Nl(I.type,e,n,t,r,o);else if(A===null)F=null;else if(Array.isArray(I.type)){var N=!1,q=mi(A).map(function(D){var B=ar(D,I,o);return B.error&&(F=D,E=B.error,S=B.reason),B.value!==null&&(N=!0),B.value});E||(F=N?q:null)}else{var R=ar(A,I,o);E=R.error,S=R.reason,F=E?A:R.value}!E&&F===null&&(typeof I.required=="function"?a.push({column:j}):I.required===!0&&(E="required")),E?r.push(i({column:j,value:F,error:E,reason:S})):(u&&F!==null&&(u=!1),(F!==null||o.includeNullValues)&&(s[I.prop]=F))},c=0,g=Object.keys(l);c<g.length;c++)f();if(u)return null;for(var d=0,k=a;d<k.length;d++){var T=k[d].column,C=l[T].required(s);C&&r.push(i({column:T,value:null,error:"required"}))}return s}function ar(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=pt(l,e.parse):e.type?t=pi(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function pt(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function pi(l,e,n){switch(e){case String:return pt(l,ri);case Number:return pt(l,ni);case Date:return pt(l,function(t){return oi(t,{properties:n.properties})});case Boolean:return pt(l,li);default:if(typeof e=="function")return pt(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Fl(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=Fl(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function mi(l){for(var e=[],n=0;n<l.length;){var t=Fl(l,",",n),r=si(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var _i=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function gi(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function wn(l){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(l)}function El(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;wn(o)==="object"&&(o=Object.keys(l[r])[0],s=El(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var di=["schema","map"];function fr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function xt(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fr(Object(n),!0).forEach(function(t){hi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function hi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function bi(l,e){if(l==null)return{};var n=vi(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function vi(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function wi(l,e,n){var t=n.schema,r=n.map,o=bi(n,di);!t&&r&&(t=El(r));var s=Vs(l,e,xt(xt({},o),{},{properties:t||o.properties}));return t?$i(s.data,t,xt(xt({},o),{},{properties:s.properties})):s}function ki(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ho(l).then(function(n){return wi(n,yo,e)})}function yi(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>Si(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function Si(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function Ci(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await ki(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Hl(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const kn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function Ti(l){return ht(["get","intervention_type"],{area:rt.area,route:rt.route,crossing:rt.crossing,other:rt.other},"white")}function Oi(l){return[["Areas",rt.area],["Routes",rt.route],["Crossings",rt.crossing],["Other",rt.other]]}const Z={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},Ne=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function yn(){let[l,e]=Dl(kn,Z.funding_programmes);return[ht(["get","funding_programme"],l,"grey"),e]}function Li(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=Dl(l,Z.current_milestone);return[ht(["get","current_milestone"],e,"grey"),n]}function Dl(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Ai(l){let e,n;return e=new Ln({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ii(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new mt({props:u}),U.push(()=>W(e,"value",s)),e.$on("change",l[2]),r=new De({props:{label:"Legend",$$slots:{default:[Ai]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],V(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Mi(l,e,n){let t;ke(l,Tn,a=>n(4,t=a));let r="fundingProgramme",[o,s]=yn();function u(){let a;r=="interventionType"?(a=Ti(),n(1,s=Oi())):r=="fundingProgramme"?n(1,[a,s]=yn(),s):r=="currentMilestone"&&n(1,[a,s]=Li(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class Pi extends J{constructor(e){super(),K(this,e,Mi,Ii,Y,{})}}const dt=Qt({type:"FeatureCollection",features:[],schemes:{}}),rn=Qt(new Map),ur=Qt(!0),wt=Qt(""),kt=Qt("");function Ni(l){let e;return{c(){e=y("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fi(l){let e;return{c(){e=y("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ei(l){let e,n,t,r,o,s;return t=new gt({props:{$$slots:{default:[Fi]},$$scope:{ctx:l}}}),t.$on("click",l[16]),{c(){e=O("input"),n=L(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,i){$(u,e,i),We(e,l[6]),$(u,n,i),b(t,u,i),r=!0,o||(s=it(e,"input",l[15]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&We(e,u[6]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function Di(l){let e;return{c(){e=y("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ji(l){let e,n,t,r,o,s;return t=new gt({props:{$$slots:{default:[Di]},$$scope:{ctx:l}}}),t.$on("click",l[18]),{c(){e=O("input"),n=L(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,i){$(u,e,i),We(e,l[5]),$(u,n,i),b(t,u,i),r=!0,o||(s=it(e,"input",l[17]),o=!0)},p(u,i){i&32&&e.value!==u[5]&&We(e,u[5]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function Ri(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k,T,C,M;e=new gt({props:{$$slots:{default:[Ni]},$$scope:{ctx:l}}}),e.$on("click",l[11]);function j(S){l[12](S)}let I={label:"Authority or region",choices:l[7],emptyOption:!0};l[2]!==void 0&&(I.value=l[2]),t=new mt({props:I}),U.push(()=>W(t,"value",j));function P(S){l[13](S)}let A={label:"Funding programme",choices:l[8],emptyOption:!0};l[3]!==void 0&&(A.value=l[3]),s=new mt({props:A}),U.push(()=>W(s,"value",P));function F(S){l[14](S)}let E={label:"Current milestone",choices:l[9],emptyOption:!0};return l[4]!==void 0&&(E.value=l[4]),a=new mt({props:E}),U.push(()=>W(a,"value",F)),g=new mn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Ei]},$$scope:{ctx:l}}}),k=new mn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[ji]},$$scope:{ctx:l}}}),C=new Pi({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(s.$$.fragment),i=L(),h(a.$$.fragment),c=L(),h(g.$$.fragment),d=L(),h(k.$$.fragment),T=L(),h(C.$$.fragment)},m(S,N){b(e,S,N),$(S,n,N),b(t,S,N),$(S,o,N),b(s,S,N),$(S,i,N),b(a,S,N),$(S,c,N),b(g,S,N),$(S,d,N),b(k,S,N),$(S,T,N),b(C,S,N),M=!0},p(S,N){const q={};N&16777216&&(q.$$scope={dirty:N,ctx:S}),e.$set(q);const R={};N&128&&(R.choices=S[7]),!r&&N&4&&(r=!0,R.value=S[2],V(()=>r=!1)),t.$set(R);const D={};N&256&&(D.choices=S[8]),!u&&N&8&&(u=!0,D.value=S[3],V(()=>u=!1)),s.$set(D);const B={};N&512&&(B.choices=S[9]),!f&&N&16&&(f=!0,B.value=S[4],V(()=>f=!1)),a.$set(B);const X={};N&16777280&&(X.$$scope={dirty:N,ctx:S}),g.$set(X);const re={};N&16777248&&(re.$$scope={dirty:N,ctx:S}),k.$set(re)},i(S){M||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(s.$$.fragment,S),m(a.$$.fragment,S),m(g.$$.fragment,S),m(k.$$.fragment,S),m(C.$$.fragment,S),M=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(s.$$.fragment,S),_(a.$$.fragment,S),_(g.$$.fragment,S),_(k.$$.fragment,S),_(C.$$.fragment,S),M=!1},d(S){S&&(p(n),p(o),p(i),p(c),p(d),p(T)),v(e,S),v(t,S),v(s,S),v(a,S),v(g,S),v(k,S),v(C,S)}}}function Bi(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[10].route.toLocaleString()+"",s,u,i=l[10].area.toLocaleString()+"",a,f,c=l[10].crossing.toLocaleString()+"",g,d,k=l[10].other.toLocaleString()+"",T,C,M=cr(l[10].totalLength).toFixed(1)+"",j,I;return{c(){e=y("Showing "),t=y(n),r=y(" schemes ("),s=y(o),u=y(`
    routes, `),a=y(i),f=y(` areas,
    `),g=y(c),d=y(" crossings, "),T=y(k),C=y(`
    other, with total LineString length of `),j=y(M),I=y(" miles)")},m(P,A){$(P,e,A),$(P,t,A),$(P,r,A),$(P,s,A),$(P,u,A),$(P,a,A),$(P,f,A),$(P,g,A),$(P,d,A),$(P,T,A),$(P,C,A),$(P,j,A),$(P,I,A)},p(P,A){A&1&&n!==(n=P[0].size.toLocaleString()+"")&&z(t,n),A&1024&&o!==(o=P[10].route.toLocaleString()+"")&&z(s,o),A&1024&&i!==(i=P[10].area.toLocaleString()+"")&&z(a,i),A&1024&&c!==(c=P[10].crossing.toLocaleString()+"")&&z(g,c),A&1024&&k!==(k=P[10].other.toLocaleString()+"")&&z(T,k),A&1024&&M!==(M=cr(P[10].totalLength).toFixed(1)+"")&&z(j,M)},d(P){P&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(g),p(d),p(T),p(C),p(j),p(I))}}}function zi(l){let e,n,t;function r(s){l[19](s)}let o={$$slots:{default:[Bi]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&16778241&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Hi(l){let e,n,t,r;return e=new De({props:{label:"Filters",$$slots:{default:[Ri]},$$scope:{ctx:l}}}),t=new Xe({props:{small:!0,$$slots:{default:[zi]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&16778236&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16778243&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function cr(l){return l*621371e-9}function qi(l,e,n){let t,r,o,s;ke(l,kt,R=>n(5,t=R)),ke(l,wt,R=>n(6,r=R)),ke(l,dt,R=>n(20,o=R)),ke(l,rn,R=>n(21,s=R));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],g=new Set(kn.slice(0,-1)),d="",k=[],T="",C={area:0,route:0,crossing:0,other:0,totalLength:0};On(()=>{var X,re,oe;let R=new Set,D=new Set,B=new Set;for(let ce of s.values())(X=ce.browse)!=null&&X.authority_or_region&&R.add(ce.browse.authority_or_region),(re=ce.browse)!=null&&re.funding_programme&&D.add(ce.browse.funding_programme),(oe=ce.browse)!=null&&oe.current_milestone&&B.add(ce.browse.current_milestone);n(7,a=Array.from(R.entries())),a.sort(),n(8,c=kn.map(ce=>[ce,ce])),n(9,k=Array.from(B.entries())),k.sort()});function M(R,D,B,X,re){let oe=R.toLowerCase(),ce=D.toLowerCase(),Ie=ie=>{var Le,ue,_e,ge,Be,Ee;if(oe&&!((Le=ie.properties.name)!=null&&Le.toLowerCase().includes(oe))&&!((ue=ie.properties.description)!=null&&ue.toLowerCase().includes(oe)))return!1;if(ce||B||X||re){let Ce=s.get(ie.properties.scheme_reference);if(B&&((_e=Ce.browse)==null?void 0:_e.authority_or_region)!=B||X&&X!=="Other"&&((ge=Ce.browse)==null?void 0:ge.funding_programme)!=X||X==="Other"&&g.has(((Be=Ce.browse)==null?void 0:Be.funding_programme)??"")||re&&((Ee=Ce.browse)==null?void 0:Ee.current_milestone)!=re||ce&&!Ce.scheme_reference.toLowerCase().includes(ce)&&!(Ce.scheme_name??"").toLowerCase().includes(ce))return!1}return!0};n(0,u=new Set(o.features.filter(Ie).map(ie=>ie.properties.scheme_reference))),n(10,C={area:0,route:0,crossing:0,other:0,totalLength:0});let Te=ie=>{var Le,ue;return!(!u.has(ie.properties.scheme_reference)||oe&&!((Le=ie.properties.name)!=null&&Le.toLowerCase().includes(oe))&&!((ue=ie.properties.description)!=null&&ue.toLowerCase().includes(oe)))};for(let ie of o.features)Te(ie)?(delete ie.properties.hide_while_editing,n(10,C[ie.properties.intervention_type]++,C),ie.geometry.type=="LineString"&&ie.properties.length_meters&&n(10,C.totalLength+=ie.properties.length_meters,C)):ie.properties.hide_while_editing=!0;dt.set(o),n(10,C)}function j(){n(2,f=""),n(3,d=""),n(4,T=""),st(wt,r="",r),st(kt,t="",t)}function I(R){f=R,n(2,f)}function P(R){d=R,n(3,d)}function A(R){T=R,n(4,T)}function F(){r=this.value,wt.set(r)}const E=()=>st(wt,r="",r);function S(){t=this.value,kt.set(t)}const N=()=>st(kt,t="",t);function q(R){i=R,n(1,i)}return l.$$set=R=>{"schemesToBeShown"in R&&n(0,u=R.schemesToBeShown),"show"in R&&n(1,i=R.show)},l.$$.update=()=>{l.$$.dirty&124&&M(r,t,f,d,T)},[u,i,f,d,T,t,r,a,c,k,C,j,I,P,A,F,E,S,N,q]}class Gi extends J{constructor(e){super(),K(this,e,qi,Hi,Y,{schemesToBeShown:0,show:1})}}function Ui(l){let e;return{c(){e=y(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(l){let e,n,t,r,o;return t=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ui]},$$scope:{ctx:l}}}),{c(){e=O("p"),n=y("License: "),h(t.$$.fragment),r=y(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),w(e,n),b(t,e,null),w(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){_(t.$$.fragment,s),o=!1},d(s){s&&p(e),v(t)}}}class Ae extends J{constructor(e){super(),K(this,e,null,Wi,Y,{})}}function $r(l,e,n){const t=l.slice();return t[2]=e[n],t}function pr(l,e,n){const t=l.slice();return t[5]=e[n],t}function mr(l){let e,n;return{c(){e=O("span"),n=y(` 
    `),Se(e,"background",l[5]),Se(e,"width","100%"),Se(e,"border","1px solid black")},m(t,r){$(t,e,r),w(e,n)},p(t,r){r&1&&Se(e,"background",t[5])},d(t){t&&p(e)}}}function _r(l){let e,n=l[2]+"",t;return{c(){e=O("span"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&z(t,n)},d(r){r&&p(e)}}}function Vi(l){let e,n,t,r=je(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=mr(pr(l,r,i));let s=je(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=_r($r(l,s,i));return{c(){e=O("div");for(let i=0;i<o.length;i+=1)o[i].c();n=L(),t=O("div");for(let i=0;i<u.length;i+=1)u[i].c();Se(e,"display","flex"),Se(t,"display","flex"),Se(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=je(i[0]);let f;for(f=0;f<r.length;f+=1){const c=pr(i,r,f);o[f]?o[f].p(c,a):(o[f]=mr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=je(i[1]);let f;for(f=0;f<s.length;f+=1){const c=$r(i,s,f);u[f]?u[f].p(c,a):(u[f]=_r(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:ne,o:ne,d(i){i&&(p(e),p(n),p(t)),_t(o,i),_t(u,i)}}}function Xi(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Re extends J{constructor(e){super(),K(this,e,Xi,Vi,Y,{colorScale:0,limits:1})}}function gr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Yi(l){let e;return{c(){e=y("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qi(l){let e;return{c(){e=y(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ji(l){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ki(l){let e;return{c(){e=y(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zi(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Qi]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ji]},$$scope:{ctx:l}}}),f=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ki]},$$scope:{ctx:l}}}),{c(){e=O("p"),n=y("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),r=y(". Output area boundaries from "),h(o.$$.fragment),s=y("."),u=L(),i=O("p"),a=y("License: "),h(f.$$.fragment),c=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(d,k){$(d,e,k),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(d,u,k),$(d,i,k),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,k){const T={};k&65536&&(T.$$scope={dirty:k,ctx:d}),t.$set(T);const C={};k&65536&&(C.$$scope={dirty:k,ctx:d}),o.$set(C);const M={};k&65536&&(M.$$scope={dirty:k,ctx:d}),f.$set(M)},i(d){g||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(u),p(i)),v(t),v(o),v(f)}}}function xi(l){let e,n,t;return n=new me({props:{$$slots:{default:[Zi]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function dr(l){let e,n;return e=new Re({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ea(l){let e;return{c(){e=y("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ta(l){let e;return{c(){e=y(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function na(l){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ra(l){let e;return{c(){e=y(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function la(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k;return o=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ta]},$$scope:{ctx:l}}}),u=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[na]},$$scope:{ctx:l}}}),g=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ra]},$$scope:{ctx:l}}}),{c(){e=O("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=O("p"),r=y("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=y(". Output area boundaries from "),h(u.$$.fragment),i=y("."),a=L(),f=O("p"),c=y("License: "),h(g.$$.fragment),d=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(T,C){$(T,e,C),$(T,n,C),$(T,t,C),w(t,r),b(o,t,null),w(t,s),b(u,t,null),w(t,i),$(T,a,C),$(T,f,C),w(f,c),b(g,f,null),w(f,d),k=!0},p(T,C){const M={};C&65536&&(M.$$scope={dirty:C,ctx:T}),o.$set(M);const j={};C&65536&&(j.$$scope={dirty:C,ctx:T}),u.$set(j);const I={};C&65536&&(I.$$scope={dirty:C,ctx:T}),g.$set(I)},i(T){k||(m(o.$$.fragment,T),m(u.$$.fragment,T),m(g.$$.fragment,T),k=!0)},o(T){_(o.$$.fragment,T),_(u.$$.fragment,T),_(g.$$.fragment,T),k=!1},d(T){T&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(g)}}}function oa(l){let e,n,t;return n=new me({props:{$$slots:{default:[la]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function hr(l){let e,n;return e=new Re({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sa(l){let e;return{c(){e=y("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ia(l){let e;return{c(){e=y(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function aa(l){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fa(l){let e,n,t,r,o,s,u,i,a;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ia]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[aa]},$$scope:{ctx:l}}}),i=new Ae({}),{c(){e=O("p"),n=y("Population density data is from the 2021 census, via "),h(t.$$.fragment),r=y(". Output area boundaries from "),h(o.$$.fragment),s=y("."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function ua(l){let e,n,t;return n=new me({props:{$$slots:{default:[fa]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function br(l){let e,n,t,r;return t=new Re({props:{colorScale:l[4],limits:l[6]().map(ha)}}),{c(){e=O("p"),e.textContent="(people per square kilometres)",n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function ca(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=O("p"),n=y("There are "),t=O("b"),o=y(r),s=y(`
          people per square kilometre in `),i=y(u)},m(a,f){$(a,e,f),w(e,n),w(e,t),w(t,o),w(e,s),w(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&z(o,r),f&8192&&u!==(u=a[14]+"")&&z(i,u)},d(a){a&&p(e)}}}function $a(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=O("p"),n=y("Households in "),r=y(t),o=y(` have an average of
          `),s=O("b"),i=y(u),a=y(`
          cars`)},m(f,c){$(f,e,c),w(e,n),w(e,r),w(e,o),w(e,s),w(s,i),w(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&z(r,t),c&8200&&u!==(u=f[15]+"")&&z(i,u)},d(f){f&&p(e)}}}function pa(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=O("p"),n=O("b"),r=y(t),o=y("%"),s=y(`
          of households in `),i=y(u),a=y(" have 1 or more cars")},m(f,c){$(f,e,c),w(e,n),w(n,r),w(n,o),w(e,s),w(e,i),w(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&z(r,t),c&8192&&u!==(u=f[14]+"")&&z(i,u)},d(f){f&&p(e)}}}function ma(l){gr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?pa:o[3]=="average_cars_per_household"?$a:ca}let t=n(l),r=t(l);return{c(){r.c(),e=Fe()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){gr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function _a(l){let e,n;return e=new fe({props:{$$slots:{default:[ma,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ga(l){let e,n,t,r;const o=[H(Je),{sourceLayer:Je},{paint:{"fill-color":we(["get",l[3]],l[6](),l[4]),"fill-opacity":x(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[_a]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",l[5]);const u=[H(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&88?te(o,[f&0&&ae(H(Je)),f&0&&{sourceLayer:Je},f&88&&{paint:{"fill-color":we(["get",a[3]],a[6](),a[4]),"fill-opacity":x(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&8?te(u,[f&0&&ae(H(`${Je}-outline`)),f&0&&{sourceLayer:Je},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function da(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k;function T(S){l[7](S)}let C={$$slots:{right:[xi],default:[Yi]},$$scope:{ctx:l}};l[0]!==void 0&&(C.checked=l[0]),e=new le({props:C}),U.push(()=>W(e,"checked",T)),e.$on("change",l[8]);let M=l[3]=="percent_households_with_car"&&dr(l);function j(S){l[9](S)}let I={$$slots:{right:[oa],default:[ea]},$$scope:{ctx:l}};l[1]!==void 0&&(I.checked=l[1]),o=new le({props:I}),U.push(()=>W(o,"checked",j)),o.$on("change",l[10]);let P=l[3]=="average_cars_per_household"&&hr(l);function A(S){l[11](S)}let F={$$slots:{right:[ua],default:[sa]},$$scope:{ctx:l}};l[2]!==void 0&&(F.checked=l[2]),a=new le({props:F}),U.push(()=>W(a,"checked",A)),a.$on("change",l[12]);let E=l[3]=="population_density"&&br(l);return d=new ve({props:{url:`pmtiles://${he()}/v1/${Je}.pmtiles`,$$slots:{default:[ga]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),M&&M.c(),r=L(),h(o.$$.fragment),u=L(),P&&P.c(),i=L(),h(a.$$.fragment),c=L(),E&&E.c(),g=L(),h(d.$$.fragment)},m(S,N){b(e,S,N),$(S,t,N),M&&M.m(S,N),$(S,r,N),b(o,S,N),$(S,u,N),P&&P.m(S,N),$(S,i,N),b(a,S,N),$(S,c,N),E&&E.m(S,N),$(S,g,N),b(d,S,N),k=!0},p(S,[N]){const q={};N&65536&&(q.$$scope={dirty:N,ctx:S}),!n&&N&1&&(n=!0,q.checked=S[0],V(()=>n=!1)),e.$set(q),S[3]=="percent_households_with_car"?M?(M.p(S,N),N&8&&m(M,1)):(M=dr(S),M.c(),m(M,1),M.m(r.parentNode,r)):M&&($e(),_(M,1,1,()=>{M=null}),pe());const R={};N&65536&&(R.$$scope={dirty:N,ctx:S}),!s&&N&2&&(s=!0,R.checked=S[1],V(()=>s=!1)),o.$set(R),S[3]=="average_cars_per_household"?P?(P.p(S,N),N&8&&m(P,1)):(P=hr(S),P.c(),m(P,1),P.m(i.parentNode,i)):P&&($e(),_(P,1,1,()=>{P=null}),pe());const D={};N&65536&&(D.$$scope={dirty:N,ctx:S}),!f&&N&4&&(f=!0,D.checked=S[2],V(()=>f=!1)),a.$set(D),S[3]=="population_density"?E?(E.p(S,N),N&8&&m(E,1)):(E=br(S),E.c(),m(E,1),E.m(g.parentNode,g)):E&&($e(),_(E,1,1,()=>{E=null}),pe());const B={};N&65544&&(B.$$scope={dirty:N,ctx:S}),d.$set(B)},i(S){k||(m(e.$$.fragment,S),m(M),m(o.$$.fragment,S),m(P),m(a.$$.fragment,S),m(E),m(d.$$.fragment,S),k=!0)},o(S){_(e.$$.fragment,S),_(M),_(o.$$.fragment,S),_(P),_(a.$$.fragment,S),_(E),_(d.$$.fragment,S),k=!1},d(S){S&&(p(t),p(r),p(u),p(i),p(c),p(g)),v(e,S),M&&M.d(S),v(o,S),P&&P.d(S),v(a,S),E&&E.d(S),v(d,S)}}}let Je="census_output_areas";const ha=l=>l.toLocaleString();function ba(l,e,n){let t=Z.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(C){let M=C.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${M}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${M}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(C){r=C,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(C){o=C,n(1,o)}const d=()=>{n(0,r=!1),n(2,s=!1)};function k(C){s=C,n(2,s)}const T=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,g,d,k,T]}class va extends J{constructor(e){super(),K(this,e,ba,da,Y,{})}}function wa(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  Combined authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function ka(l){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ya(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ka]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=O("p"),n=y("Data from "),h(t.$$.fragment),r=y(", as of December 2022."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Sa(l){let e,n,t;return n=new me({props:{$$slots:{default:[ya]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ca(l){let e,n=l[3].name+"",t;return{c(){e=O("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Ta(l){let e,n;return e=new fe({props:{$$slots:{default:[Ca,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oa(l){let e,n,t,r;const o=[H(yt),{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ta]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",Aa);const u=[H(`${yt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(yt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(H(`${yt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function La(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Sa],default:[wa]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new bt({props:{data:`${he()}/v1/${yt}.geojson`,$$slots:{default:[Oa]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let yt="combined_authorities";function Aa(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ia(l,e,n){let t=Z.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ma extends J{constructor(e){super(),K(this,e,Ia,La,Y,{})}}function Pa(l){let e;return{c(){e=y("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Na(l){let e;return{c(){e=y(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fa(l){let e;return{c(){e=y(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ea(l){let e,n,t,r,o,s,u,i,a;return t=new Q({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Na]},$$scope:{ctx:l}}}),o=new Q({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Fa]},$$scope:{ctx:l}}}),i=new Ae({}),{c(){e=O("p"),n=y("The 2019 English IMD scores come from "),h(t.$$.fragment),r=y(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=y("."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function Da(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ea]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function vr(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ja(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,g=l[4].rank.toLocaleString()+"",d,k;return{c(){e=O("p"),t=y(n),r=y(` has an IMD score of
        `),o=O("b"),u=y(s),i=L(),a=O("p"),f=y("Rank: "),c=O("b"),d=y(g),k=y(`
        / 32,844 LSOAs`)},m(T,C){$(T,e,C),w(e,t),w(e,r),w(e,o),w(o,u),$(T,i,C),$(T,a,C),w(a,f),w(a,c),w(c,d),w(a,k)},p(T,C){C&16&&n!==(n=T[4].LSOA11CD+"")&&z(t,n),C&16&&s!==(s=T[4].score+"")&&z(u,s),C&16&&g!==(g=T[4].rank.toLocaleString()+"")&&z(d,g)},d(T){T&&(p(e),p(i),p(a))}}}function Ra(l){let e,n;return e=new fe({props:{$$slots:{default:[ja,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ba(l){let e,n,t,r;const o=[H(Ke),{sourceLayer:Ke},{paint:{"fill-color":we(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":x(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ra]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s});const u=[H(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(H(Ke)),f&0&&{sourceLayer:Ke},f&6&&{paint:{"fill-color":we(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":x(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?te(u,[f&0&&ae(H(`${Ke}-outline`)),f&0&&{sourceLayer:Ke},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function za(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Da],default:[Pa]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&vr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Ke}.pmtiles`,$$slots:{default:[Ba]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=vr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ke="imd";function Ha(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class qa extends J{constructor(e){super(),K(this,e,Ha,za,Y,{})}}function Ga(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  Local Authority Districts`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Ua(l){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wa(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Ua]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=O("p"),n=y("Data from "),h(t.$$.fragment),r=y(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Va(l){let e,n,t;return n=new me({props:{$$slots:{default:[Wa]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Xa(l){let e,n=l[3].name+"",t;return{c(){e=O("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Ya(l){let e,n;return e=new fe({props:{$$slots:{default:[Xa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qa(l){let e,n,t,r;const o=[H(St),{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ya]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",Ka);const u=[H(`${St}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(St)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(H(`${St}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ja(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Va],default:[Ga]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new bt({props:{data:`${he()}/v1/${St}.geojson`,$$slots:{default:[Qa]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let St="local_authority_districts";function Ka(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function Za(l,e,n){let t=Z.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class xa extends J{constructor(e){super(),K(this,e,Za,Ja,Y,{})}}function ef(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  Local Planning Authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function tf(l){let e;return{c(){e=y(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nf(l){let e;return{c(){e=y(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(l){let e;return{c(){e=y(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(l){let e;return{c(){e=y("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(l){let e;return{c(){e=y(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sf(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k,T,C,M,j,I,P,A,F;return t=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[tf]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[nf]},$$scope:{ctx:l}}}),u=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[rf]},$$scope:{ctx:l}}}),d=new Q({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[lf]},$$scope:{ctx:l}}}),j=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[of]},$$scope:{ctx:l}}}),A=new Ae({}),{c(){e=O("p"),n=y("LPAs may be a "),h(t.$$.fragment),r=y(", "),h(o.$$.fragment),s=y("y, or "),h(u.$$.fragment),i=y("."),a=L(),f=O("p"),c=O("strong"),g=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),k=y(" to get more details."),T=L(),C=O("p"),M=y("Data from ONS Geography via "),h(j.$$.fragment),I=y(", as of November 2022."),P=L(),h(A.$$.fragment)},m(E,S){$(E,e,S),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),b(u,e,null),w(e,i),$(E,a,S),$(E,f,S),w(f,c),w(c,g),b(d,c,null),w(c,k),$(E,T,S),$(E,C,S),w(C,M),b(j,C,null),w(C,I),$(E,P,S),b(A,E,S),F=!0},p(E,S){const N={};S&16&&(N.$$scope={dirty:S,ctx:E}),t.$set(N);const q={};S&16&&(q.$$scope={dirty:S,ctx:E}),o.$set(q);const R={};S&16&&(R.$$scope={dirty:S,ctx:E}),u.$set(R);const D={};S&16&&(D.$$scope={dirty:S,ctx:E}),d.$set(D);const B={};S&16&&(B.$$scope={dirty:S,ctx:E}),j.$set(B)},i(E){F||(m(t.$$.fragment,E),m(o.$$.fragment,E),m(u.$$.fragment,E),m(d.$$.fragment,E),m(j.$$.fragment,E),m(A.$$.fragment,E),F=!0)},o(E){_(t.$$.fragment,E),_(o.$$.fragment,E),_(u.$$.fragment,E),_(d.$$.fragment,E),_(j.$$.fragment,E),_(A.$$.fragment,E),F=!1},d(E){E&&(p(e),p(a),p(f),p(T),p(C),p(P)),v(t),v(o),v(u),v(d),v(j),v(A,E)}}}function af(l){let e,n,t;return n=new me({props:{$$slots:{default:[sf]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function ff(l){let e,n=l[3].name+"",t;return{c(){e=O("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function uf(l){let e,n;return e=new fe({props:{$$slots:{default:[ff,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cf(l){let e,n,t,r;const o=[H(Ze),{sourceLayer:Ze},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[uf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s});const u=[H(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(Ze)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(H(`${Ze}-outline`)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function $f(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[af],default:[ef]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Ze}.pmtiles`,$$slots:{default:[cf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ze="local_planning_authorities";function pf(l,e,n){let t=Z.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class mf extends J{constructor(e){super(),K(this,e,pf,$f,Y,{})}}function _f(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  Parliamentary constituencies`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function gf(l){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function df(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[gf]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=O("p"),n=y("Data from "),h(t.$$.fragment),r=y(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function hf(l){let e,n,t;return n=new me({props:{$$slots:{default:[df]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function bf(l){let e,n=l[3].Name+"",t;return{c(){e=O("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&z(t,n)},d(r){r&&p(e)}}}function vf(l){let e,n;return e=new fe({props:{$$slots:{default:[bf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wf(l){let e,n,t,r;const o=[H(xe),{sourceLayer:xe},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[vf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",yf);const u=[H(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(xe)),f&0&&{sourceLayer:xe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(H(`${xe}-outline`)),f&0&&{sourceLayer:xe},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function kf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[hf],default:[_f]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${xe}.pmtiles`,$$slots:{default:[wf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let xe="parliamentary_constituencies";function yf(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Sf(l,e,n){let t=Z.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Cf extends J{constructor(e){super(),K(this,e,Sf,kf,Y,{})}}function Tf(l){let e;return{c(){e=y("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Of(l){let e;return{c(){e=y(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lf(l){let e;return{c(){e=y(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Af(l){let e;return{c(){e=y(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function If(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k,T,C;return t=new Q({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Of]},$$scope:{ctx:l}}}),f=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Lf]},$$scope:{ctx:l}}}),g=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Af]},$$scope:{ctx:l}}}),T=new Ae({}),{c(){e=O("p"),n=y("Most layers show air quality data from "),h(t.$$.fragment),r=y(`. The measurements are annual means, in units of
        µgm
        `),o=O("sup"),o.textContent="3",s=y(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=L(),i=O("p"),a=y("The noise layer is from "),h(f.$$.fragment),c=y(", using 2017 data. See their "),h(g.$$.fragment),d=y("."),k=L(),h(T.$$.fragment)},m(M,j){$(M,e,j),w(e,n),b(t,e,null),w(e,r),w(e,o),w(e,s),$(M,u,j),$(M,i,j),w(i,a),b(f,i,null),w(i,c),b(g,i,null),w(i,d),$(M,k,j),b(T,M,j),C=!0},p(M,j){const I={};j&2048&&(I.$$scope={dirty:j,ctx:M}),t.$set(I);const P={};j&2048&&(P.$$scope={dirty:j,ctx:M}),f.$set(P);const A={};j&2048&&(A.$$scope={dirty:j,ctx:M}),g.$set(A)},i(M){C||(m(t.$$.fragment,M),m(f.$$.fragment,M),m(g.$$.fragment,M),m(T.$$.fragment,M),C=!0)},o(M){_(t.$$.fragment,M),_(f.$$.fragment,M),_(g.$$.fragment,M),_(T.$$.fragment,M),C=!1},d(M){M&&(p(e),p(u),p(i),p(k)),v(t),v(f),v(g),v(T,M)}}}function Mf(l){let e,n,t;return n=new me({props:{$$slots:{default:[If]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function wr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,g,d,k,T,C,M,j;function I(S){l[7](S)}let P={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};l[0]!==void 0&&(P.value=l[0]),e=new mt({props:P}),U.push(()=>W(e,"value",I));const A=[Nf,Pf],F=[];function E(S,N){return S[0]=="Noise"?0:1}return d=E(l),k=F[d]=A[d](l),{c(){h(e.$$.fragment),t=L(),r=O("p"),s=y(o),u=L(),i=O("div"),a=O("label"),f=y(`Opacity
      `),c=O("input"),g=L(),k.c(),T=Fe(),G(c,"type","range"),G(c,"min","0"),G(c,"max","100")},m(S,N){b(e,S,N),$(S,t,N),$(S,r,N),w(r,s),$(S,u,N),$(S,i,N),w(i,a),w(a,f),w(a,c),We(c,l[2]),$(S,g,N),F[d].m(S,N),$(S,T,N),C=!0,M||(j=[it(c,"change",l[8]),it(c,"input",l[8])],M=!0)},p(S,N){const q={};!n&&N&1&&(n=!0,q.value=S[0],V(()=>n=!1)),e.$set(q),(!C||N&1)&&o!==(o=S[3](S[0])+"")&&z(s,o),N&4&&We(c,S[2]);let R=d;d=E(S),d===R?F[d].p(S,N):($e(),_(F[R],1,1,()=>{F[R]=null}),pe(),k=F[d],k?k.p(S,N):(k=F[d]=A[d](S),k.c()),m(k,1),k.m(T.parentNode,T))},i(S){C||(m(e.$$.fragment,S),m(k),C=!0)},o(S){_(e.$$.fragment,S),_(k),C=!1},d(S){S&&(p(t),p(r),p(u),p(i),p(g),p(T)),v(e,S),F[d].d(S),M=!1,gl(j)}}}function Pf(l){let e,n,t;return{c(){e=O("img"),tn(e.src,n=l[5](l[0]))||G(e,"src",n),G(e,"width",150),G(e,"alt",t=`Legend for ${l[0]} layer`)},m(r,o){$(r,e,o)},p(r,o){o&1&&!tn(e.src,n=r[5](r[0]))&&G(e,"src",n),o&1&&t!==(t=`Legend for ${r[0]} layer`)&&G(e,"alt",t)},i:ne,o:ne,d(r){r&&p(e)}}}function Nf(l){let e,n;return e=new Re({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ff(l){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new no({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ef(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={$$slots:{right:[Mf],default:[Tf]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&wr(l);return o=new go({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Ff]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=wr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&1&&(d.tiles=[f[4](f[0])]),c&2054&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}function Df(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(k){return t[1]}function a(k){let T=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${T}`}function f(k){let T=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${T}`}function c(k){r=k,n(1,r)}function g(k){s=k,n(0,s)}function d(){o=qt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,r,o,i,a,f,c,g,d]}class jf extends J{constructor(e){super(),K(this,e,Df,Ef,Y,{})}}function Rf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  Wards`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Bf(l){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zf(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Bf]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=O("p"),n=y("Data from "),h(t.$$.fragment),r=y(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Hf(l){let e,n,t;return n=new me({props:{$$slots:{default:[zf]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function qf(l){let e,n=l[3].name+"",t;return{c(){e=O("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Gf(l){let e,n;return e=new fe({props:{$$slots:{default:[qf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uf(l){let e,n,t,r;const o=[H(et),{sourceLayer:et},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Gf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ge({props:s}),e.$on("click",Vf);const u=[H(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(et)),f&0&&{sourceLayer:et},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(H(`${et}-outline`)),f&0&&{sourceLayer:et},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Wf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Hf],default:[Rf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${et}.pmtiles`,$$slots:{default:[Uf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let et="wards";function Vf(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Xf(l,e,n){let t=Z.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Yf extends J{constructor(e){super(),K(this,e,Xf,Wf,Y,{})}}function Qf(l){let e;return{c(){e=y("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jf(l){let e,n,t,r;return t=new Q({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Qf]},$$scope:{ctx:l}}}),{c(){e=O("p"),n=y("License: "),h(t.$$.fragment)},m(o,s){$(o,e,s),w(e,n),b(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&p(e),v(t)}}}class Ye extends J{constructor(e){super(),K(this,e,null,Jf,Y,{})}}function Kf(l){let e,n,t;return e=new Oe({props:{color:Z.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=y(`
  Bus routes`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Zf(l){let e;return{c(){e=y(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xf(l){let e,n,t,r,o,s,u,i,a;return o=new Q({props:{href:"https://gtfs.org",$$slots:{default:[Zf]},$$scope:{ctx:l}}}),i=new Ye({}),{c(){e=O("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=O("p"),r=y("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=y(`, and doesn't include which routes are run or the
        frequency of service.`),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),w(t,r),b(o,t,null),w(t,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(i,f)}}}function eu(l){let e,n,t;return n=new me({props:{$$slots:{default:[xf]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function tu(l){let e;return{c(){e=O("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nu(l){let e;return{c(){e=O("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ru(l){let e;function n(o,s){return o[2].has_bus_lane?nu:tu}let t=n(l),r=t(l);return{c(){r.c(),e=Fe()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function lu(l){let e,n;return e=new fe({props:{$$slots:{default:[ru,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ou(l){let e,n;const t=[H(Ct),{sourceLayer:Ct},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[lu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(Ct)),s&0&&{sourceLayer:Ct},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function su(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[eu],default:[Kf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Ct}.pmtiles`,$$slots:{default:[ou]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ct="bus_routes";function iu(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class au extends J{constructor(e){super(),K(this,e,iu,su,Y,{})}}function kr(l){const e=hu(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function yr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function fu(l){let e;return{c(){e=y("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uu(l){let e,n,t,r,o,s,u,i;return u=new Ye({}),{c(){e=O("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=O("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=L(),o=O("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=L(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),b(u,a,f),i=!0},p:ne,i(a){i||(m(u.$$.fragment,a),i=!0)},o(a){_(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),v(u,a)}}}function cu(l){let e,n,t;return n=new me({props:{$$slots:{default:[uu]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Sr(l){let e,n,t;return n=new Xe({props:{$$slots:{default:[pu]},$$scope:{ctx:l}}}),{c(){e=O("div"),h(n.$$.fragment),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function $u(l){let e,n,t=l[9]+"",r,o,s;return e=new Oe({props:{color:l[10]}}),{c(){h(e.$$.fragment),n=L(),r=y(t),o=L()},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:ne,i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function Cr(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[$u]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function pu(l){let e,n,t=je(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Cr(yr(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Fe()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=je(s[2]);let i;for(i=0;i<t.length;i+=1){const a=yr(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Cr(a),r[i].c(),m(r[i],1),r[i].m(e.parentNode,e))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),_t(r,s)}}}function mu(l){kr(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,g,d=l[8]+"",k;return{c(){e=O("h2"),t=y(n),r=L(),o=O("p"),s=y("Direction: "),u=O("b"),a=L(),f=O("p"),c=y("Width: "),g=O("b"),k=y(d)},m(T,C){$(T,e,C),w(e,t),$(T,r,C),$(T,o,C),w(o,s),w(o,u),u.innerHTML=i,$(T,a,C),$(T,f,C),w(f,c),w(f,g),w(g,k)},p(T,C){kr(T),C&32&&n!==(n=T[6]+"")&&z(t,n),C&32&&i!==(i=T[7]+"")&&(u.innerHTML=i),C&32&&d!==(d=T[8]+"")&&z(k,d)},d(T){T&&(p(e),p(r),p(o),p(a),p(f))}}}function _u(l){let e,n;return e=new fe({props:{$$slots:{default:[mu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gu(l){let e,n;const t=[H(Tt),{sourceLayer:Tt},{paint:{"line-color":ht(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Tr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[_u]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),e.$on("click",bu),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(Tt)),s&0&&{sourceLayer:Tt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Tr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function du(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[cu],default:[fu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Sr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Tt}.pmtiles`,$$slots:{default:[gu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Sr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&8195&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Tt="cycle_paths";function hu(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function bu(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Tr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function vu(l,e,n){let t=[["track","Separated tracks",Z.cycle_paths.track],["lane","Unprotected lanes",Z.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class wu extends J{constructor(e){super(),K(this,e,vu,du,Y,{})}}function ku(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  Major Road Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function yu(l){let e;return{c(){e=y(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Su(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[yu]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=O("p"),n=y("Data from the "),h(t.$$.fragment),r=y(", as of September 2021."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Cu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Su]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Tu(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=O("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&z(t,n)},d(r){r&&p(e)}}}function Ou(l){let e,n;return e=new fe({props:{$$slots:{default:[Tu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lu(l){let e,n;const t=[H(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Ou]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(Ot)),s&0&&{sourceLayer:Ot},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Au(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Cu],default:[ku]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Ot}.pmtiles`,$$slots:{default:[Lu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ot="mrn";function Iu(l,e,n){let t=Z.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Mu extends J{constructor(e){super(),K(this,e,Iu,Au,Y,{})}}function Pu(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=y(`
  National Cycle Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Nu(l){let e;return{c(){e=y(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fu(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Nu]},$$scope:{ctx:l}}}),s=new Ae({}),{c(){e=O("p"),n=y("Data from Sustrans about the "),h(t.$$.fragment),r=y(", downloaded on 22/01/2024."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Eu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Fu]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Or(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=O("li"),n=y("Description: "),t=O("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&z(o,r)},d(s){s&&p(e)}}}function Lr(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=O("li"),n=y("Is greenway: "),t=O("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&z(o,r)},d(s){s&&p(e)}}}function Ar(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=O("li"),n=y("Route type: "),t=O("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&z(o,r)},d(s){s&&p(e)}}}function Ir(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=O("li"),n=y("Route number: "),t=O("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&z(o,r)},d(s){s&&p(e)}}}function Mr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=O("li"),n=y("Route Category: "),t=O("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&z(o,r)},d(s){s&&p(e)}}}function Pr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=O("li"),n=y("Open Status: "),t=O("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&z(o,r)},d(s){s&&p(e)}}}function Nr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=O("li"),n=y("Surface: "),t=O("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&z(o,r)},d(s){s&&p(e)}}}function Fr(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=O("li"),n=y("Quality: "),t=O("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&z(o,r)},d(s){s&&p(e)}}}function Er(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=O("li"),n=y("Road Class: "),t=O("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&z(o,r)},d(s){s&&p(e)}}}function Du(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&Or(l),c=l[3].Greenway&&Lr(l),g=l[3].RouteType&&Ar(l),d=l[3].RouteNo&&Ir(l),k=l[3].RouteCat&&Mr(l),T=l[3].OpenStatus&&Pr(l),C=l[3].Surface&&Nr(l),M=l[3].Quality&&Fr(l),j=l[3].RoadClass&&Er(l);return{c(){e=O("ul"),f&&f.c(),n=L(),c&&c.c(),t=L(),g&&g.c(),r=L(),d&&d.c(),o=L(),k&&k.c(),s=L(),T&&T.c(),u=L(),C&&C.c(),i=L(),M&&M.c(),a=L(),j&&j.c()},m(I,P){$(I,e,P),f&&f.m(e,null),w(e,n),c&&c.m(e,null),w(e,t),g&&g.m(e,null),w(e,r),d&&d.m(e,null),w(e,o),k&&k.m(e,null),w(e,s),T&&T.m(e,null),w(e,u),C&&C.m(e,null),w(e,i),M&&M.m(e,null),w(e,a),j&&j.m(e,null)},p(I,P){I[3].Desc_?f?f.p(I,P):(f=Or(I),f.c(),f.m(e,n)):f&&(f.d(1),f=null),I[3].Greenway?c?c.p(I,P):(c=Lr(I),c.c(),c.m(e,t)):c&&(c.d(1),c=null),I[3].RouteType?g?g.p(I,P):(g=Ar(I),g.c(),g.m(e,r)):g&&(g.d(1),g=null),I[3].RouteNo?d?d.p(I,P):(d=Ir(I),d.c(),d.m(e,o)):d&&(d.d(1),d=null),I[3].RouteCat?k?k.p(I,P):(k=Mr(I),k.c(),k.m(e,s)):k&&(k.d(1),k=null),I[3].OpenStatus?T?T.p(I,P):(T=Pr(I),T.c(),T.m(e,u)):T&&(T.d(1),T=null),I[3].Surface?C?C.p(I,P):(C=Nr(I),C.c(),C.m(e,i)):C&&(C.d(1),C=null),I[3].Quality?M?M.p(I,P):(M=Fr(I),M.c(),M.m(e,a)):M&&(M.d(1),M=null),I[3].RoadClass?j?j.p(I,P):(j=Er(I),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},d(I){I&&p(e),f&&f.d(),c&&c.d(),g&&g.d(),d&&d.d(),k&&k.d(),T&&T.d(),C&&C.d(),M&&M.d(),j&&j.d()}}}function ju(l){let e,n;return e=new fe({props:{$$slots:{default:[Du,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ru(l){let e,n;const t=[H(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[ju]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(Lt)),s&0&&{sourceLayer:Lt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Bu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Eu],default:[Pu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Lt}.pmtiles`,$$slots:{default:[Ru]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Lt="national_cycle_network";function zu(l,e,n){let t=Z.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Hu extends J{constructor(e){super(),K(this,e,zu,Bu,Y,{})}}function qu(l){let e;return{c(){e=y("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gu(l){let e;return{c(){e=y(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uu(l){let e,n,t,r,o,s,u,i,a;return u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Gu]},$$scope:{ctx:l}}}),{c(){e=O("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=L(),t=O("p"),t.textContent="Data valid as of 1 January, 2024",r=L(),o=O("p"),s=y(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=y(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function Wu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Uu]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Dr(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vu(l){let e,n,t,r=l[4].side+"",o,s,u,i,a,f=l[4].average+"",c,g,d,k,T,C,M=l[4].minimum+"",j,I;return{c(){e=O("p"),n=y("Side of the road: "),t=O("b"),o=y(r),s=L(),u=O("p"),i=y("Average width: "),a=O("b"),c=y(f),g=y(`
        meters`),d=L(),k=O("p"),T=y("Minimum width: "),C=O("b"),j=y(M),I=y(`
        meters`)},m(P,A){$(P,e,A),w(e,n),w(e,t),w(t,o),$(P,s,A),$(P,u,A),w(u,i),w(u,a),w(a,c),w(u,g),$(P,d,A),$(P,k,A),w(k,T),w(k,C),w(C,j),w(k,I)},p(P,A){A&16&&r!==(r=P[4].side+"")&&z(o,r),A&16&&f!==(f=P[4].average+"")&&z(c,f),A&16&&M!==(M=P[4].minimum+"")&&z(j,M)},d(P){P&&(p(e),p(s),p(u),p(d),p(k))}}}function Xu(l){let e,n;return e=new fe({props:{$$slots:{default:[Vu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yu(l){let e,n;const t=[H(At),{sourceLayer:At},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],l[2],l[1]),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Xu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(H(At)),s&0&&{sourceLayer:At},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Ne,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Qu(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Wu],default:[qu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Dr(l);return o=new ve({props:{url:`pmtiles://${ln()}/v1/${At}.pmtiles`,$$slots:{default:[Yu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Dr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let At="pavement_widths";function Ju(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Ku extends J{constructor(e){super(),K(this,e,Ju,Qu,Y,{})}}function Zu(l){let e;return{c(){e=y("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xu(l){let e;return{c(){e=y("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ec(l){let e;return{c(){e=y("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tc(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new Q({props:{href:"https://www.pct.bike",$$slots:{default:[xu]},$$scope:{ctx:l}}}),a=new Q({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[ec]},$$scope:{ctx:l}}}),{c(){e=O("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=O("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=L(),o=O("p"),s=y("See "),h(u.$$.fragment),i=y(" and "),h(a.$$.fragment),f=y(" for details on methodology and data sources.")},m(g,d){$(g,e,d),$(g,n,d),$(g,t,d),$(g,r,d),$(g,o,d),w(o,s),b(u,o,null),w(o,i),b(a,o,null),w(o,f),c=!0},p(g,d){const k={};d&1024&&(k.$$scope={dirty:d,ctx:g}),u.$set(k);const T={};d&1024&&(T.$$scope={dirty:d,ctx:g}),a.$set(T)},i(g){c||(m(u.$$.fragment,g),m(a.$$.fragment,g),c=!0)},o(g){_(u.$$.fragment,g),_(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(r),p(o)),v(u),v(a)}}}function nc(l){let e,n,t;return n=new me({props:{$$slots:{default:[tc]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function jr(l){let e,n,t,r,o,s,u,i;e=new Re({props:{colorScale:l[3],limits:l[4]}});function a(d){l[7](d)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new dl({props:f}),U.push(()=>W(t,"value",a));function c(d){l[8](d)}let g={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(g.value=l[1]),s=new mt({props:g}),U.push(()=>W(s,"value",c)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(s.$$.fragment)},m(d,k){b(e,d,k),$(d,n,k),b(t,d,k),$(d,o,k),b(s,d,k),i=!0},p(d,k){const T={};!r&&k&1&&(r=!0,T.value=d[0],V(()=>r=!1)),t.$set(T);const C={};!u&&k&2&&(u=!0,C.value=d[1],V(()=>u=!1)),s.$set(C)},i(d){i||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(s.$$.fragment,d),i=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(s.$$.fragment,d),i=!1},d(d){d&&(p(n),p(o)),v(e,d),v(t,d),v(s,d)}}}function rc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new zt(!1),t=Fe(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function lc(l){let e,n;return e=new fe({props:{$$slots:{default:[rc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oc(l){let e,n;const t=[H(nt),{sourceLayer:nt},{paint:{"line-color":we(["get",l[1]],l[4],l[3]),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[2]&&l[0]==nt?"visible":"none"}}];let r={$$slots:{default:[lc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(H(nt)),s&0&&{sourceLayer:nt},s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Ne,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==nt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function sc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new zt(!1),t=Fe(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function ic(l){let e,n;return e=new fe({props:{$$slots:{default:[sc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ac(l){let e,n;const t=[H(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",l[1]],l[4],l[3]),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[2]&&l[0]==ft?"visible":"none"}}];let r={$$slots:{default:[ic]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(H(ft)),s&0&&{sourceLayer:ft},t[2],t[3],s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Ne,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ft?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function fc(l){let e,n,t,r,o,s,u,i;function a(g){l[6](g)}let f={$$slots:{right:[nc],default:[Zu]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),U.push(()=>W(e,"checked",a));let c=l[2]&&jr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${nt}.pmtiles`,$$slots:{default:[oc]},$$scope:{ctx:l}}}),u=new ve({props:{url:`pmtiles://${he()}/v1/${ft}.pmtiles`,$$slots:{default:[ac]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),c&&c.c(),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment)},m(g,d){b(e,g,d),$(g,t,d),c&&c.m(g,d),$(g,r,d),b(o,g,d),$(g,s,d),b(u,g,d),i=!0},p(g,[d]){const k={};d&1024&&(k.$$scope={dirty:d,ctx:g}),!n&&d&4&&(n=!0,k.checked=g[2],V(()=>n=!1)),e.$set(k),g[2]?c?(c.p(g,d),d&4&&m(c,1)):(c=jr(g),c.c(),m(c,1),c.m(r.parentNode,r)):c&&($e(),_(c,1,1,()=>{c=null}),pe());const T={};d&1031&&(T.$$scope={dirty:d,ctx:g}),o.$set(T);const C={};d&1031&&(C.$$scope={dirty:d,ctx:g}),u.$set(C)},i(g){i||(m(e.$$.fragment,g),m(c),m(o.$$.fragment,g),m(u.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(u.$$.fragment,g),i=!1},d(g){g&&(p(t),p(r),p(s)),v(e,g),c&&c.d(g),v(o,g),v(u,g)}}}let nt="pct_commute",ft="pct_school";function uc(l,e,n){let t=Z.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=nt,s="baseline",u=!1;function i(g){let d=g.baseline,k=g.gov_target,T=g.go_dutch,C=`<h2>Trip purpose: ${o==nt?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)C+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let M=(k/d).toFixed(1),j=(T/d).toFixed(1);C+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${M}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${j}x</b> of baseline)</p>`}return C}function a(g){u=g,n(2,u)}function f(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class cc extends J{constructor(e){super(),K(this,e,uc,fc,Y,{})}}function $c(l){let e;return{c(){e=y("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pc(l){let e;return{c(){e=y("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mc(l){let e;return{c(){e=y(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _c(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new Q({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[pc]},$$scope:{ctx:l}}}),f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[mc]},$$scope:{ctx:l}}}),{c(){e=O("p"),n=y("The average speed data is collected over a six-month period by "),h(t.$$.fragment),r=y(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),s=O("p"),s.textContent="Data valid as of 1 September, 2023",u=L(),i=O("p"),a=y(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=y(".")},m(d,k){$(d,e,k),w(e,n),b(t,e,null),w(e,r),$(d,o,k),$(d,s,k),$(d,u,k),$(d,i,k),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,k){const T={};k&256&&(T.$$scope={dirty:k,ctx:d}),t.$set(T);const C={};k&256&&(C.$$scope={dirty:k,ctx:d}),f.$set(C)},i(d){g||(m(t.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(o),p(s),p(u),p(i)),v(t),v(f)}}}function gc(l){let e,n,t;return n=new me({props:{$$slots:{default:[_c]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Rr(l){let e,n,t,r,o;e=new Re({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new dl({props:u}),U.push(()=>W(t,"value",s)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],V(()=>r=!1)),t.$set(f)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function dc(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,g=l[4][l[7].highest_description]+"",d,k;return{c(){e=O("p"),n=y("Posted speed limit: "),r=y(t),o=y(" mph"),s=L(),u=O("p"),i=y("Highest average speed: "),f=y(a),c=y(" mph (during "),d=y(g),k=y(")")},m(T,C){$(T,e,C),w(e,n),w(e,r),w(e,o),$(T,s,C),$(T,u,C),w(u,i),w(u,f),w(u,c),w(u,d),w(u,k)},p(T,C){C&128&&t!==(t=T[7].indicative_mph+"")&&z(r,t),C&128&&a!==(a=T[7].highest_mph+"")&&z(f,a),C&128&&g!==(g=T[4][T[7].highest_description]+"")&&z(d,g)},d(T){T&&(p(e),p(s),p(u))}}}function hc(l){let e,n;return e=new fe({props:{$$slots:{default:[dc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bc(l){let e,n;const t=[H(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",l[0]],l[3],l[2]),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[hc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&15?te(t,[s&0&&ae(H(It)),s&0&&{sourceLayer:It},t[2],t[3],s&13&&{paint:{"line-color":we(["get",o[0]],o[3],o[2]),"line-width":Ne,"line-opacity":x(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vc(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={$$slots:{right:[gc],default:[$c]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&Rr(l);return o=new ve({props:{url:`pmtiles://${ln()}/v1/${It}.pmtiles`,$$slots:{default:[bc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=Rr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let It="road_speeds";function wc(l,e,n){let t=Z.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class kc extends J{constructor(e){super(),K(this,e,wc,vc,Y,{})}}function yc(l){let e;return{c(){e=y("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sc(l){let e;return{c(){e=y(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cc(l){let e,n,t,r,o,s,u,i,a;return u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Sc]},$$scope:{ctx:l}}}),{c(){e=O("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=O("p"),t.textContent="Data valid as of 1 September, 2023",r=L(),o=O("p"),s=y(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=y(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function Tc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Cc]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Br(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oc(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",g,d;return{c(){e=O("p"),n=y("Average width: "),t=O("b"),o=y(r),s=y(`
        meters`),u=L(),i=O("p"),a=y("Minimum width: "),f=O("b"),g=y(c),d=y(`
        meters`)},m(k,T){$(k,e,T),w(e,n),w(e,t),w(t,o),w(e,s),$(k,u,T),$(k,i,T),w(i,a),w(i,f),w(f,g),w(i,d)},p(k,T){T&16&&r!==(r=k[4].average+"")&&z(o,r),T&16&&c!==(c=k[4].minimum+"")&&z(g,c)},d(k){k&&(p(e),p(u),p(i))}}}function Lc(l){let e,n;return e=new fe({props:{$$slots:{default:[Oc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ac(l){let e,n;const t=[H(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],l[2],l[1]),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Lc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(H(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Ne,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ic(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Tc],default:[yc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Br(l);return o=new ve({props:{url:`pmtiles://${ln()}/v1/${Mt}.pmtiles`,$$slots:{default:[Ac]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Br(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Mt="road_widths";function Mc(l,e,n){let t=Z.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Pc extends J{constructor(e){super(),K(this,e,Mc,Ic,Y,{})}}function Nc(l){let e,n,t;return e=new Oe({props:{color:Z.trams}}),{c(){h(e.$$.fragment),n=y(`
  Trams`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Fc(l){let e,n,t,r;return t=new Ye({}),{c(){e=O("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Ec(l){let e,n,t;return n=new me({props:{$$slots:{default:[Fc]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Dc(l){let e,n;const t=[H(Pt),{sourceLayer:Pt},{paint:{"line-color":Z.trams,"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),e.$on("click",Rc),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(Pt)),s&0&&{sourceLayer:Pt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function jc(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Ec],default:[Nc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Pt}.pmtiles`,$$slots:{default:[Dc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Pt="trams";function Rc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Bc(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class zc extends J{constructor(e){super(),K(this,e,Bc,jc,Y,{})}}function Hc(l){let e;return{c(){e=y("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qc(l){let e;return{c(){e=y(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gc(l){let e,n,t,r,o,s,u,i,a;return t=new Q({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[qc]},$$scope:{ctx:l}}}),i=new Ae({}),{c(){e=O("p"),n=y("Data from the "),h(t.$$.fragment),r=y(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=L(),s=O("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),$(f,o,c),$(f,s,c),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),v(t),v(i,f)}}}function Uc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Gc]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function zr(l){let e,n,t,r;return t=new Re({props:{colorScale:l[1],limits:l[2]}}),{c(){e=O("p"),e.textContent="Peak hourly frequency:",n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Wc(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,g,d,k,T,C=l[4].peak_description+"",M,j,I,P,A,F=l[4].total+"",E,S,N=l[4].total_description+"",q,R;return{c(){e=O("p"),n=y("Stop name: "),t=O("b"),o=y(r),s=L(),u=O("p"),i=y("Peak: "),a=O("b"),c=y(f),g=y(`
        buses during the busiest hour of any day`),d=L(),k=O("p"),T=y("The peak hour is "),M=y(C),j=L(),I=O("p"),P=y("Total buses per day: "),A=O("b"),E=y(F),S=y(`
        (for `),q=y(N),R=y(", the busiest day of the week)")},m(D,B){$(D,e,B),w(e,n),w(e,t),w(t,o),$(D,s,B),$(D,u,B),w(u,i),w(u,a),w(a,c),w(u,g),$(D,d,B),$(D,k,B),w(k,T),w(k,M),$(D,j,B),$(D,I,B),w(I,P),w(I,A),w(A,E),w(I,S),w(I,q),w(I,R)},p(D,B){B&16&&r!==(r=D[4].stop_name+"")&&z(o,r),B&16&&f!==(f=D[4].peak+"")&&z(c,f),B&16&&C!==(C=D[4].peak_description+"")&&z(M,C),B&16&&F!==(F=D[4].total+"")&&z(E,F),B&16&&N!==(N=D[4].total_description+"")&&z(q,N)},d(D){D&&(p(e),p(s),p(u),p(d),p(k),p(j),p(I))}}}function Vc(l){let e,n;return e=new fe({props:{$$slots:{default:[Wc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xc(l){let e,n;const t=[H(Nt),{sourceLayer:Nt},{paint:{"circle-color":we(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Vc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new at({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(H(Nt)),s&0&&{sourceLayer:Nt},s&6&&{paint:{"circle-color":we(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Uc],default:[Hc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&zr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Nt}.pmtiles`,$$slots:{default:[Xc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=zr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Nt="bus_stops";function Qc(l,e,n){let t=Z.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Jc extends J{constructor(e){super(),K(this,e,Qc,Yc,Y,{})}}function Kc(l){let e,n,t;return{c(){e=O("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=it(e,"change",l[5]),n=!0)},p:ne,d(r){r&&p(e),l[7](null),n=!1,t()}}}function Hr(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[xc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zc(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Oe({props:{color:Ft}}),{c(){h(e.$$.fragment),n=y(`
        Show `),r=y(t),o=y(" issues")},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&z(r,t)},i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function xc(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[Zc]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function e$(l){let e,n,t,r,o,s;e=new mn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Kc]},$$scope:{ctx:l}}}),t=new hl({props:{errorMessage:l[3]}});let u=l[2]>0&&Hr(l);return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),u&&u.c(),o=Fe()},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&m(u,1)):(u=Hr(i),u.c(),m(u,1),u.m(o.parentNode,o)):u&&($e(),_(u,1,1,()=>{u=null}),pe())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(u),s=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(u),s=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),u&&u.d(i)}}}function t$(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,g,d,k,T=l[10].notes+"",C,M,j,I,P,A,F,E=l[10].id+"",S,N,q,R,D,B=(l[10].inspector??"???")+"",X,re,oe,ce=l[10].submission_time+"",Ie,Te,ie,Le,ue,_e=l[10].scheme_reference+"",ge,Be,Ee,Ce=l[10].current_design_stage+"",Qe;return{c(){e=O("div"),n=O("h2"),r=y(t),o=L(),s=O("p"),u=O("u"),u.textContent="Location",i=y(`
          : `),f=y(a),c=L(),g=O("p"),d=O("u"),d.textContent="Notes",k=y(`
          : `),C=y(T),M=L(),j=O("hr"),I=L(),P=O("p"),A=y("Critical issue ID: "),F=O("b"),S=y(E),N=L(),q=O("p"),R=y("Submitted by "),D=O("b"),X=y(B),re=y(`
          at
          `),oe=O("b"),Ie=y(ce),Te=L(),ie=O("p"),Le=y("For scheme "),ue=O("b"),ge=y(_e),Be=y(`
          in stage
          `),Ee=O("b"),Qe=y(Ce),Se(e,"max-width","30vw")},m(se,be){$(se,e,be),w(e,n),w(n,r),w(e,o),w(e,s),w(s,u),w(s,i),w(s,f),w(e,c),w(e,g),w(g,d),w(g,k),w(g,C),w(e,M),w(e,j),w(e,I),w(e,P),w(P,A),w(P,F),w(F,S),w(e,N),w(e,q),w(q,R),w(q,D),w(D,X),w(q,re),w(q,oe),w(oe,Ie),w(e,Te),w(e,ie),w(ie,Le),w(ie,ue),w(ue,ge),w(ie,Be),w(ie,Ee),w(Ee,Qe)},p(se,be){be&1024&&t!==(t=se[10].critical_type+"")&&z(r,t),be&1024&&a!==(a=se[10].location_description+"")&&z(f,a),be&1024&&T!==(T=se[10].notes+"")&&z(C,T),be&1024&&E!==(E=se[10].id+"")&&z(S,E),be&1024&&B!==(B=(se[10].inspector??"???")+"")&&z(X,B),be&1024&&ce!==(ce=se[10].submission_time+"")&&z(Ie,ce),be&1024&&_e!==(_e=se[10].scheme_reference+"")&&z(ge,_e),be&1024&&Ce!==(Ce=se[10].current_design_stage+"")&&z(Qe,Ce)},d(se){se&&p(e)}}}function n$(l){let e,n;return e=new fe({props:{$$slots:{default:[t$,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function r$(l){let e,n,t,r,o,s;const u=[H("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":Ft,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let d=0;d<u.length;d+=1)i=ee(i,u[d]);e=new at({props:i}),e.$on("click",l[6]);const a=[H("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=ee(f,a[d]);t=new on({props:f});const c=[H("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Ft,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let g={$$slots:{default:[n$]},$$scope:{ctx:l}};for(let d=0;d<c.length;d+=1)g=ee(g,c[d]);return o=new at({props:g}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(d,k){b(e,d,k),$(d,n,k),b(t,d,k),$(d,r,k),b(o,d,k),s=!0},p(d,k){const T=k&2?te(u,[u[0],u[1],k&0&&{paint:{"circle-color":Ft,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},k&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(T);const C=k&2?te(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(C);const M=k&2?te(c,[c[0],c[1],c[2],c[3],k&0&&{paint:{"circle-color":Ft,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},k&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};k&2048&&(M.$$scope={dirty:k,ctx:d}),o.$set(M)},i(d){s||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(o.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),s=!1},d(d){d&&(p(n),p(r)),v(e,d),v(t,d),v(o,d)}}}function l$(l){let e,n,t,r;return e=new De({props:{label:"Critical Issues",$$slots:{default:[e$]},$$scope:{ctx:l}}}),t=new bt({props:{id:jl,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[r$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let jl="criticals",Ft="red";function o$(l,e,n){let t;ke(l,Tn,d=>n(9,t=d));let r,o=!0,s=0,u="",i=ql();async function a(d){try{n(4,i=await Ci(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(k){n(3,u=`The file you loaded is broken: ${k}`)}}async function f(d){let k=await t.getSource(jl).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id);t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:k})}function c(d){U[d?"unshift":"push"](()=>{r=d,n(0,r)})}function g(d){o=d,n(1,o)}return[r,o,s,u,i,a,f,c,g]}class s$ extends J{constructor(e){super(),K(this,e,o$,l$,Y,{})}}function i$(l){let e;return{c(){e=y("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function a$(l){let e;return{c(){e=y("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function f$(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[a$]},$$scope:{ctx:l}}}),s=new Ye({}),{c(){e=O("p"),n=y("This shows "),h(t.$$.fragment),r=y(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function u$(l){let e,n,t;return n=new me({props:{$$slots:{default:[f$]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function qr(l){let e,n;return e=new Ln({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function c$(l){let e,n=Gr(l[3])+"",t;return{c(){e=O("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=Gr(r[3])+"")&&z(t,n)},d(r){r&&p(e)}}}function $$(l){let e,n;return e=new fe({props:{$$slots:{default:[c$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function p$(l){let e,n;const t=[H(Et),{sourceLayer:Et},{paint:{"circle-color":ht(["get","crossing"],{traffic_signals:Z.signalized_crossing},Z.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[$$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new at({props:r}),e.$on("click",_$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(Et)),s&0&&{sourceLayer:Et},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function m$(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[u$],default:[i$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&qr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Et}.pmtiles`,$$slots:{default:[p$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=qr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&17&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Et="crossings";function Gr(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function _$(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function g$(l,e,n){let t=!1,r=[["Signalized",Z.signalized_crossing],["Other",Z.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class d$ extends J{constructor(e){super(),K(this,e,g$,m$,Y,{})}}function h$(l){let e;return{c(){e=y("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function b$(l){let e;return{c(){e=y("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function v$(l){let e,n,t,r,o,s,u,i,a,f,c,g,d;return u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[b$]},$$scope:{ctx:l}}}),f=new Ae({}),g=new Ye({}),{c(){e=O("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=L(),t=O("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=L(),o=O("p"),s=y("This layer is built from "),h(u.$$.fragment),i=y(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=L(),h(f.$$.fragment),c=L(),h(g.$$.fragment)},m(k,T){$(k,e,T),$(k,n,T),$(k,t,T),$(k,r,T),$(k,o,T),w(o,s),b(u,o,null),w(o,i),$(k,a,T),b(f,k,T),$(k,c,T),b(g,k,T),d=!0},p(k,T){const C={};T&32&&(C.$$scope={dirty:T,ctx:k}),u.$set(C)},i(k){d||(m(u.$$.fragment,k),m(f.$$.fragment,k),m(g.$$.fragment,k),d=!0)},o(k){_(u.$$.fragment,k),_(f.$$.fragment,k),_(g.$$.fragment,k),d=!1},d(k){k&&(p(e),p(n),p(t),p(r),p(o),p(a),p(c)),v(u),v(f,k),v(g,k)}}}function w$(l){let e,n,t;return n=new me({props:{$$slots:{default:[v$]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ur(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function k$(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=O("p"),n=y("Gradient: "),t=O("b"),o=y(r),s=y(`
        %`)},m(u,i){$(u,e,i),w(e,n),w(e,t),w(t,o),w(e,s)},p(u,i){i&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&z(o,r)},d(u){u&&p(e)}}}function y$(l){let e,n;return e=new fe({props:{$$slots:{default:[k$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function S$(l){let e,n,t,r;const o=[H(tt),{sourceLayer:tt},{manageHoverState:!0},{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":Ne,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[y$]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ye({props:s});const u=[H(tt+"_arrows"),{sourceLayer:tt},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new on({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(H(tt)),f&0&&{sourceLayer:tt},o[2],f&6&&{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Ne,"line-opacity":x(1,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?te(u,[f&0&&ae(H(tt+"_arrows")),f&0&&{sourceLayer:tt},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function C$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[w$],default:[h$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Ur(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${tt}.pmtiles`,$$slots:{default:[S$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Ur(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let tt="gradient";function T$(l,e,n){let t=Z.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class O$ extends J{constructor(e){super(),K(this,e,T$,C$,Y,{})}}function L$(l){let e,n,t;return{c(){e=O("img"),t=y(`
  Cycle parking`),tn(e.src,n=Gl)||G(e,"src",n),G(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function A$(l){let e;return{c(){e=y("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function I$(l){let e;return{c(){e=y("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function M$(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[A$]},$$scope:{ctx:l}}}),i=new Q({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[I$]},$$scope:{ctx:l}}}),f=new Ye({}),{c(){e=O("p"),n=y("Cycle parking, according to "),h(t.$$.fragment),r=y(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),s=O("p"),u=y("Icon from "),h(i.$$.fragment),a=L(),h(f.$$.fragment)},m(g,d){$(g,e,d),w(e,n),b(t,e,null),w(e,r),$(g,o,d),$(g,s,d),w(s,u),b(i,s,null),$(g,a,d),b(f,g,d),c=!0},p(g,d){const k={};d&8&&(k.$$scope={dirty:d,ctx:g}),t.$set(k);const T={};d&8&&(T.$$scope={dirty:d,ctx:g}),i.$set(T)},i(g){c||(m(t.$$.fragment,g),m(i.$$.fragment,g),m(f.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(i.$$.fragment,g),_(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(o),p(s),p(a)),v(t),v(i),v(f,g)}}}function P$(l){let e,n,t;return n=new me({props:{$$slots:{default:[M$]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function N$(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=O("p"),n=y("Capacity: "),t=O("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&z(o,r)},d(s){s&&p(e)}}}function F$(l){let e,n;return e=new fe({props:{$$slots:{default:[N$,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function E$(l){let e,n;const t=[H(Dt),{sourceLayer:Dt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[F$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new on({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(Dt)),s&0&&{sourceLayer:Dt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function D$(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[P$],default:[L$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Dt}.pmtiles`,$$slots:{default:[E$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Dt="cycle_parking";function j$(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class R$ extends J{constructor(e){super(),K(this,e,j$,D$,Y,{})}}function B$(l){let e;return{c(){e=y("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function z$(l){let e,n,t,r;return t=new Ye({}),{c(){e=O("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function H$(l){let e,n,t;return n=new me({props:{$$slots:{default:[z$]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Wr(l){let e,n,t;return n=new Xe({props:{$$slots:{default:[W$]},$$scope:{ctx:l}}}),{c(){e=O("div"),h(n.$$.fragment),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function q$(l){let e,n,t;return e=new Oe({props:{color:Z.education.schools}}),{c(){h(e.$$.fragment),n=y(`
        Schools`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function G$(l){let e,n,t;return e=new Oe({props:{color:Z.education.colleges}}),{c(){h(e.$$.fragment),n=y(`
        Colleges`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function U$(l){let e,n,t;return e=new Oe({props:{color:Z.education.universities}}),{c(){h(e.$$.fragment),n=y(`
        Universities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function W$(l){let e,n,t,r,o,s,u,i,a;function f(C){l[3](C)}let c={$$slots:{default:[q$]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),U.push(()=>W(e,"checked",f));function g(C){l[4](C)}let d={$$slots:{default:[G$]},$$scope:{ctx:l}};l[1].college!==void 0&&(d.checked=l[1].college),r=new le({props:d}),U.push(()=>W(r,"checked",g));function k(C){l[5](C)}let T={$$slots:{default:[U$]},$$scope:{ctx:l}};return l[1].university!==void 0&&(T.checked=l[1].university),u=new le({props:T}),U.push(()=>W(u,"checked",k)),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment),s=L(),h(u.$$.fragment)},m(C,M){b(e,C,M),$(C,t,M),b(r,C,M),$(C,s,M),b(u,C,M),a=!0},p(C,M){const j={};M&128&&(j.$$scope={dirty:M,ctx:C}),!n&&M&2&&(n=!0,j.checked=C[1].school,V(()=>n=!1)),e.$set(j);const I={};M&128&&(I.$$scope={dirty:M,ctx:C}),!o&&M&2&&(o=!0,I.checked=C[1].college,V(()=>o=!1)),r.$set(I);const P={};M&128&&(P.$$scope={dirty:M,ctx:C}),!i&&M&2&&(i=!0,P.checked=C[1].university,V(()=>i=!1)),u.$set(P)},i(C){a||(m(e.$$.fragment,C),m(r.$$.fragment,C),m(u.$$.fragment,C),a=!0)},o(C){_(e.$$.fragment,C),_(r.$$.fragment,C),_(u.$$.fragment,C),a=!1},d(C){C&&(p(t),p(s)),v(e,C),v(r,C),v(u,C)}}}function V$(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=O("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&z(t,n)},d(r){r&&p(e)}}}function X$(l){let e,n;return e=new fe({props:{$$slots:{default:[V$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Y$(l){let e,n;const t=[H(jt),{sourceLayer:jt},{paint:{"fill-color":ht(["get","type"],{school:Z.education.schools,college:Z.education.colleges,university:Z.education.universities},"grey"),"fill-opacity":x(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Vr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[X$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ge({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(jt)),s&0&&{sourceLayer:jt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Vr(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Q$(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[H$],default:[B$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Wr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${jt}.pmtiles`,$$slots:{default:[Y$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&128&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Wr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&131&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let jt="education";function Vr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function J$(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class K$ extends J{constructor(e){super(),K(this,e,J$,Q$,Y,{})}}function Z$(l){let e,n,t,r;return e=new Oe({props:{color:l[4]}}),{c(){h(e.$$.fragment),n=L(),t=y(l[2])},m(o,s){b(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&z(t,o[2])},i(o){r||(m(e.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function x$(l){let e;const n=l[5].default,t=Wt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&Vt(t,n,r,r[7],e?Yt(n,r[7],o,null):Xt(r[7]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function ep(l){let e,n,t;return n=new me({props:{$$slots:{default:[x$]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function tp(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=O("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&z(t,n)},d(r){r&&p(e)}}}function np(l){let e,n;return e=new fe({props:{$$slots:{default:[tp,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rp(l){let e,n;const t=[H(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":x(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[np]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ge({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&25?te(t,[s&1&&ae(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":x(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function lp(l){let e,n,t,r,o;function s(i){l[6](i)}let u={$$slots:{right:[ep],default:[Z$]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${l[0]}.pmtiles`,$$slots:{default:[rp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],V(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${he()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function op(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=Z[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class Rl extends J{constructor(e){super(),K(this,e,op,lp,Y,{name:0,singularNoun:1,pluralNoun:2})}}function sp(l){let e;return{c(){e=y("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ip(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[sp]},$$scope:{ctx:l}}}),s=new Ye({}),{c(){e=O("p"),n=y("This shows "),h(t.$$.fragment),r=y(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function ap(l){let e,n;return e=new Rl({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[ip]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class fp extends J{constructor(e){super(),K(this,e,null,ap,Y,{})}}function up(l){let e,n,t;return{c(){e=O("img"),t=y(`
  Railway Stations`),tn(e.src,n=Ul)||G(e,"src",n),G(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function cp(l){let e;return{c(){e=y("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $p(l){let e;return{c(){e=y(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pp(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[cp]},$$scope:{ctx:l}}}),i=new Q({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[$p]},$$scope:{ctx:l}}}),c=new Ye({}),{c(){e=O("p"),n=y("This shows "),h(t.$$.fragment),r=y(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),s=O("p"),u=y("Icon from "),h(i.$$.fragment),a=y(". (Note that not all stations shown are National Rail.)"),f=L(),h(c.$$.fragment)},m(d,k){$(d,e,k),w(e,n),b(t,e,null),w(e,r),$(d,o,k),$(d,s,k),w(s,u),b(i,s,null),w(s,a),$(d,f,k),b(c,d,k),g=!0},p(d,k){const T={};k&8&&(T.$$scope={dirty:k,ctx:d}),t.$set(T);const C={};k&8&&(C.$$scope={dirty:k,ctx:d}),i.$set(C)},i(d){g||(m(t.$$.fragment,d),m(i.$$.fragment,d),m(c.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(i.$$.fragment,d),_(c.$$.fragment,d),g=!1},d(d){d&&(p(e),p(o),p(s),p(f)),v(t),v(i),v(c,d)}}}function mp(l){let e,n,t;return n=new me({props:{$$slots:{default:[pp]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function _p(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=O("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&z(t,n)},d(r){r&&p(e)}}}function gp(l){let e,n;return e=new fe({props:{$$slots:{default:[_p,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dp(l){let e,n;const t=[H(Sn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[gp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new on({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(Sn)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function hp(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[mp],default:[up]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new bt({props:{data:`${he()}/v1/${Sn}.geojson`,$$slots:{default:[dp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Sn="railway_stations";function bp(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class vp extends J{constructor(e){super(),K(this,e,bp,hp,Y,{})}}function wp(l){let e;return{c(){e=y("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kp(l){let e;return{c(){e=y("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yp(l){let e,n,t,r,o,s,u,i,a;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[wp]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[kp]},$$scope:{ctx:l}}}),i=new Ye({}),{c(){e=O("p"),n=y("This shows "),h(t.$$.fragment),r=y(" and "),h(o.$$.fragment),s=y(" data from OpenStreetMap (as of 9 August 2023)."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function Sp(l){let e,n;return e=new Rl({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[yp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Cp extends J{constructor(e){super(),K(this,e,null,Sp,Y,{})}}function Tp(l){let e;return{c(){e=y("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Op(l){let e;return{c(){e=y("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lp(l){let e;return{c(){e=y("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ap(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k,T,C,M,j,I,P,A,F,E;return t=new Q({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Op]},$$scope:{ctx:l}}}),M=new Q({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Lp]},$$scope:{ctx:l}}}),F=new Ae({}),{c(){e=O("p"),n=y("This layer shows collisions recorded in the "),h(t.$$.fragment),r=y(" dataset. Please note these limitations:"),o=L(),s=O("ul"),u=O("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=L(),a=O("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=L(),c=O("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=L(),d=O("li"),d.textContent='The "pedestrians" category also include mobility scooters',k=L(),T=O("li"),C=y("All limitations "),h(M.$$.fragment),j=y(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),I=L(),P=O("p"),P.textContent="You can click a point to open the full report, thanks to CycleStreets.",A=L(),h(F.$$.fragment)},m(S,N){$(S,e,N),w(e,n),b(t,e,null),w(e,r),$(S,o,N),$(S,s,N),w(s,u),w(s,i),w(s,a),w(s,f),w(s,c),w(s,g),w(s,d),w(s,k),w(s,T),w(T,C),b(M,T,null),w(T,j),$(S,I,N),$(S,P,N),$(S,A,N),b(F,S,N),E=!0},p(S,N){const q={};N&16777216&&(q.$$scope={dirty:N,ctx:S}),t.$set(q);const R={};N&16777216&&(R.$$scope={dirty:N,ctx:S}),M.$set(R)},i(S){E||(m(t.$$.fragment,S),m(M.$$.fragment,S),m(F.$$.fragment,S),E=!0)},o(S){_(t.$$.fragment,S),_(M.$$.fragment,S),_(F.$$.fragment,S),E=!1},d(S){S&&(p(e),p(o),p(s),p(I),p(P),p(A)),v(t),v(M),v(F,S)}}}function Ip(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ap]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Xr(l){let e,n,t,r,o,s,u,i,a,f,c,g,d;return n=new Xe({props:{small:!0,$$slots:{default:[Ep]},$$scope:{ctx:l}}}),f=new Ln({props:{rows:l[14]}}),{c(){e=O("div"),h(n.$$.fragment),t=L(),r=O("div"),o=y(`Filter years:
      `),s=O("input"),u=y(`
      -
      `),i=O("input"),a=L(),h(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(k,T){$(k,e,T),b(n,e,null),w(e,t),w(e,r),w(r,o),w(r,s),We(s,l[4]),w(r,u),w(r,i),We(i,l[5]),w(e,a),b(f,e,null),c=!0,g||(d=[it(s,"input",l[20]),it(i,"input",l[21])],g=!0)},p(k,T){const C={};T&16777231&&(C.$$scope={dirty:T,ctx:k}),n.$set(C),T&16&&qt(s.value)!==k[4]&&We(s,k[4]),T&32&&qt(i.value)!==k[5]&&We(i,k[5])},i(k){c||(m(n.$$.fragment,k),m(f.$$.fragment,k),c=!0)},o(k){_(n.$$.fragment,k),_(f.$$.fragment,k),c=!1},d(k){k&&p(e),v(n),v(f),g=!1,gl(d)}}}function Mp(l){let e;return{c(){e=y("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pp(l){let e;return{c(){e=y("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Np(l){let e;return{c(){e=y("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fp(l){let e;return{c(){e=y("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ep(l){let e,n,t,r,o,s,u,i,a,f,c,g;function d(A){l[16](A)}let k={$$slots:{default:[Mp]},$$scope:{ctx:l}};l[0]!==void 0&&(k.checked=l[0]),e=new le({props:k}),U.push(()=>W(e,"checked",d));function T(A){l[17](A)}let C={$$slots:{default:[Pp]},$$scope:{ctx:l}};l[1]!==void 0&&(C.checked=l[1]),r=new le({props:C}),U.push(()=>W(r,"checked",T));function M(A){l[18](A)}let j={$$slots:{default:[Np]},$$scope:{ctx:l}};l[2]!==void 0&&(j.checked=l[2]),u=new le({props:j}),U.push(()=>W(u,"checked",M));function I(A){l[19](A)}let P={$$slots:{default:[Fp]},$$scope:{ctx:l}};return l[3]!==void 0&&(P.checked=l[3]),f=new le({props:P}),U.push(()=>W(f,"checked",I)),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment),s=L(),h(u.$$.fragment),a=L(),h(f.$$.fragment)},m(A,F){b(e,A,F),$(A,t,F),b(r,A,F),$(A,s,F),b(u,A,F),$(A,a,F),b(f,A,F),g=!0},p(A,F){const E={};F&16777216&&(E.$$scope={dirty:F,ctx:A}),!n&&F&1&&(n=!0,E.checked=A[0],V(()=>n=!1)),e.$set(E);const S={};F&16777216&&(S.$$scope={dirty:F,ctx:A}),!o&&F&2&&(o=!0,S.checked=A[1],V(()=>o=!1)),r.$set(S);const N={};F&16777216&&(N.$$scope={dirty:F,ctx:A}),!i&&F&4&&(i=!0,N.checked=A[2],V(()=>i=!1)),u.$set(N);const q={};F&16777216&&(q.$$scope={dirty:F,ctx:A}),!c&&F&8&&(c=!0,q.checked=A[3],V(()=>c=!1)),f.$set(q)},i(A){g||(m(e.$$.fragment,A),m(r.$$.fragment,A),m(u.$$.fragment,A),m(f.$$.fragment,A),g=!0)},o(A){_(e.$$.fragment,A),_(r.$$.fragment,A),_(u.$$.fragment,A),_(f.$$.fragment,A),g=!1},d(A){A&&(p(t),p(s),p(a)),v(e,A),v(r,A),v(u,A),v(f,A)}}}function Yr(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=O("p"),n=y("Pedestrian location: "),t=O("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&z(o,r)},d(s){s&&p(e)}}}function Qr(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=O("p"),n=y("Pedestrian movement: "),t=O("b"),o=y(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&z(o,r)},d(s){s&&p(e)}}}function Dp(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,g,d,k,T,C=Jr(l[23])+"",M,j,I,P,A,F=l[23].pedestrian_location&&Yr(l),E=l[23].pedestrian_movement&&Qr(l);return{c(){e=O("p"),n=y("Year: "),t=O("b"),o=y(r),s=L(),u=O("p"),i=y("Severity: "),a=O("b"),c=y(f),g=L(),d=O("p"),k=y("Casualties: "),T=O("b"),M=y(C),j=L(),F&&F.c(),I=L(),E&&E.c(),P=L(),A=O("p"),A.textContent="Click to open full report in CycleStreets"},m(S,N){$(S,e,N),w(e,n),w(e,t),w(t,o),$(S,s,N),$(S,u,N),w(u,i),w(u,a),w(a,c),$(S,g,N),$(S,d,N),w(d,k),w(d,T),w(T,M),$(S,j,N),F&&F.m(S,N),$(S,I,N),E&&E.m(S,N),$(S,P,N),$(S,A,N)},p(S,N){N&8388608&&r!==(r=S[23].year+"")&&z(o,r),N&8388608&&f!==(f=S[10][S[23].severity]+"")&&z(c,f),N&8388608&&C!==(C=Jr(S[23])+"")&&z(M,C),S[23].pedestrian_location?F?F.p(S,N):(F=Yr(S),F.c(),F.m(I.parentNode,I)):F&&(F.d(1),F=null),S[23].pedestrian_movement?E?E.p(S,N):(E=Qr(S),E.c(),E.m(P.parentNode,P)):E&&(E.d(1),E=null)},d(S){S&&(p(e),p(s),p(u),p(g),p(d),p(j),p(I),p(P),p(A)),F&&F.d(S),E&&E.d(S)}}}function jp(l){let e,n;return e=new fe({props:{$$slots:{default:[Dp,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rp(l){let e,n;const t=[H(Rt),{sourceLayer:Rt},{paint:{"circle-color":we(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[jp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new at({props:r}),e.$on("click",zp),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&14528?te(t,[s&0&&ae(H(Rt)),s&0&&{sourceLayer:Rt},s&14336&&{paint:{"circle-color":we(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Bp(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={$$slots:{right:[Ip],default:[Tp]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[6]&&Xr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Rt}.pmtiles`,$$slots:{default:[Rp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,g.checked=f[6],V(()=>n=!1)),e.$set(g),f[6]?a?(a.p(f,c),c&64&&m(a,1)):(a=Xr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&16777408&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Rt="stats19";function Jr(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function zp(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function Hp(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(q,R,D,B,X,re){let oe=["any"];return o&&oe.push(["get","pedestrian"]),s&&oe.push(["get","cyclist"]),u&&oe.push(["get","horse_rider"]),i&&oe.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],oe]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},d={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},k={1:"Fatal",2:"Serious",3:"Slight"},T=Z.sequential_low_to_high[4],C=Z.sequential_low_to_high[2],M=Z.sequential_low_to_high[0],j=[["Fatal",T],["Serious",C],["Slight",M]];function I(q){r=q,n(6,r)}function P(q){o=q,n(0,o)}function A(q){s=q,n(1,s)}function F(q){u=q,n(2,u)}function E(q){i=q,n(3,i)}function S(){a=qt(this.value),n(4,a)}function N(){f=qt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,g,d,k,T,C,M,j,I,P,A,F,E,S,N]}class qp extends J{constructor(e){super(),K(this,e,Hp,Bp,Y,{})}}function Gp(l){let e;return{c(){e=y("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Up(l){let e;return{c(){e=y(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wp(l){let e;return{c(){e=y("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vp(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new Q({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Up]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Wp]},$$scope:{ctx:l}}}),f=new Ae({}),{c(){e=O("p"),n=y("AADF (annual average daily flow) data from "),h(t.$$.fragment),r=y(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),h(o.$$.fragment),s=y(" for details and caveats about the measurements."),u=L(),i=O("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=L(),h(f.$$.fragment)},m(g,d){$(g,e,d),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(g,u,d),$(g,i,d),$(g,a,d),b(f,g,d),c=!0},p(g,d){const k={};d&64&&(k.$$scope={dirty:d,ctx:g}),t.$set(k);const T={};d&64&&(T.$$scope={dirty:d,ctx:g}),o.$set(T)},i(g){c||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(u),p(i),p(a)),v(t),v(o),v(f,g)}}}function Xp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Vp]},$$scope:{ctx:l}}}),{c(){e=O("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Kr(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:l[3]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yp(l){let e,n=l[5].location+"",t,r,o,s,u=l[5].year+"",i,a,f,c=l[5].motor_vehicles.toLocaleString()+"",g,d,k,T,C=l[5].year+"",M,j,I,P=l[5].pedal_cycles.toLocaleString()+"",A,F,E,S,N,q=l[5].method+"",R;return{c(){e=O("h2"),t=y(n),r=L(),o=O("p"),s=y("Total motor vehicles ("),i=y(u),a=y(` AADF):
        `),f=O("b"),g=y(c),d=L(),k=O("p"),T=y("Total pedal cycles ("),M=y(C),j=y(` AADF):
        `),I=O("b"),A=y(P),F=L(),E=O("p"),S=y("Count method: "),N=O("b"),R=y(q)},m(D,B){$(D,e,B),w(e,t),$(D,r,B),$(D,o,B),w(o,s),w(o,i),w(o,a),w(o,f),w(f,g),$(D,d,B),$(D,k,B),w(k,T),w(k,M),w(k,j),w(k,I),w(I,A),$(D,F,B),$(D,E,B),w(E,S),w(E,N),w(N,R)},p(D,B){B&32&&n!==(n=D[5].location+"")&&z(t,n),B&32&&u!==(u=D[5].year+"")&&z(i,u),B&32&&c!==(c=D[5].motor_vehicles.toLocaleString()+"")&&z(g,c),B&32&&C!==(C=D[5].year+"")&&z(M,C),B&32&&P!==(P=D[5].pedal_cycles.toLocaleString()+"")&&z(A,P),B&32&&q!==(q=D[5].method+"")&&z(R,q)},d(D){D&&(p(e),p(r),p(o),p(d),p(k),p(F),p(E))}}}function Qp(l){let e,n;return e=new fe({props:{$$slots:{default:[Yp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jp(l){let e,n;const t=[H(Bt),{sourceLayer:Bt},{paint:{"circle-color":we(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Qp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new at({props:r}),e.$on("click",Zp),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(H(Bt)),s&0&&{sourceLayer:Bt},s&6&&{paint:{"circle-color":we(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Kp(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={$$slots:{right:[Xp],default:[Gp]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Kr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Bt}.pmtiles`,$$slots:{default:[Jp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Kr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Bt="vehicle_counts";function Zp(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function xp(l,e,n){let t=Z.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class em extends J{constructor(e){super(),K(this,e,xp,Kp,Y,{})}}function tm(l){let e,n,t,r,o,s,u,i;return e=new K$({}),t=new fp({}),o=new Cp({}),u=new vp({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,r,f),b(o,a,f),$(a,s,f),b(u,a,f),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function nm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[tm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rm(l){let e,n,t,r,o,s,u,i,a,f;return e=new wu({}),t=new Hu({}),o=new Mu({}),u=new R$({}),a=new d$({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function lm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[rm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function om(l){let e,n,t,r,o,s;return e=new au({}),t=new zc({}),o=new Jc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function sm(l){let e,n,t,r,o,s,u,i,a,f;return e=new Cf({}),t=new Yf({}),o=new Ma({}),u=new xa({}),a=new mf({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function im(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[sm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function am(l){let e,n,t,r;return e=new va({}),t=new qa({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function fm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[am]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function um(l){let e,n,t,r,o,s;return e=new Pc({}),t=new Ku({}),o=new kc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function cm(l){let e,n,t,r,o,s,u,i,a=_n()=="Private (development)",f,c,g;e=new em({}),t=new qp({}),o=new cc({}),u=new O$({});let d=a&&um();return c=new jf({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),d&&d.c(),f=L(),h(c.$$.fragment)},m(k,T){b(e,k,T),$(k,n,T),b(t,k,T),$(k,r,T),b(o,k,T),$(k,s,T),b(u,k,T),$(k,i,T),d&&d.m(k,T),$(k,f,T),b(c,k,T),g=!0},p:ne,i(k){g||(m(e.$$.fragment,k),m(t.$$.fragment,k),m(o.$$.fragment,k),m(u.$$.fragment,k),m(d),m(c.$$.fragment,k),g=!0)},o(k){_(e.$$.fragment,k),_(t.$$.fragment,k),_(o.$$.fragment,k),_(u.$$.fragment,k),_(d),_(c.$$.fragment,k),g=!1},d(k){k&&(p(n),p(r),p(s),p(i),p(f)),v(e,k),v(t,k),v(o,k),v(u,k),d&&d.d(k),v(c,k)}}}function $m(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[cm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pm(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new Zl({props:u}),U.push(()=>W(e,"enabled",s)),r=new lo({}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],V(()=>n=!1)),e.$set(f)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function mm(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,k,T,C,M,j;return e=new s$({}),t=new De({props:{label:"Trip generators",$$slots:{default:[nm]},$$scope:{ctx:l}}}),o=new De({props:{label:"Existing infrastructure",$$slots:{default:[lm]},$$scope:{ctx:l}}}),u=new De({props:{label:"Public transit",$$slots:{default:[om]},$$scope:{ctx:l}}}),a=new De({props:{label:"Boundaries",$$slots:{default:[im]},$$scope:{ctx:l}}}),c=new De({props:{label:"Census",$$slots:{default:[fm]},$$scope:{ctx:l}}}),d=new De({props:{label:"Other",$$slots:{default:[$m]},$$scope:{ctx:l}}}),T=new De({props:{label:"Tools",$$slots:{default:[pm]},$$scope:{ctx:l}}}),M=new Kl({props:{disabled:!l[1]}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment),f=L(),h(c.$$.fragment),g=L(),h(d.$$.fragment),k=L(),h(T.$$.fragment),C=L(),h(M.$$.fragment)},m(I,P){b(e,I,P),$(I,n,P),b(t,I,P),$(I,r,P),b(o,I,P),$(I,s,P),b(u,I,P),$(I,i,P),b(a,I,P),$(I,f,P),b(c,I,P),$(I,g,P),b(d,I,P),$(I,k,P),b(T,I,P),$(I,C,P),b(M,I,P),j=!0},p(I,P){const A={};P&16&&(A.$$scope={dirty:P,ctx:I}),t.$set(A);const F={};P&16&&(F.$$scope={dirty:P,ctx:I}),o.$set(F);const E={};P&16&&(E.$$scope={dirty:P,ctx:I}),u.$set(E);const S={};P&16&&(S.$$scope={dirty:P,ctx:I}),a.$set(S);const N={};P&16&&(N.$$scope={dirty:P,ctx:I}),c.$set(N);const q={};P&16&&(q.$$scope={dirty:P,ctx:I}),d.$set(q);const R={};P&17&&(R.$$scope={dirty:P,ctx:I}),T.$set(R);const D={};P&2&&(D.disabled=!I[1]),M.$set(D)},i(I){j||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(o.$$.fragment,I),m(u.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(d.$$.fragment,I),m(T.$$.fragment,I),m(M.$$.fragment,I),j=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(o.$$.fragment,I),_(u.$$.fragment,I),_(a.$$.fragment,I),_(c.$$.fragment,I),_(d.$$.fragment,I),_(T.$$.fragment,I),_(M.$$.fragment,I),j=!1},d(I){I&&(p(n),p(r),p(s),p(i),p(f),p(g),p(k),p(C)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I),v(c,I),v(d,I),v(T,I),v(M,I)}}}function _m(l){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ge({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function gm(l){let e,n,t,r;return e=new De({props:{label:"Layers",open:!0,$$slots:{default:[mm]},$$scope:{ctx:l}}}),t=new bt({props:{data:l[2],$$slots:{default:[_m]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function dm(l,e,n){let t,r;ke(l,ur,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&ur.set(!t)},[t,r,o,s]}class hm extends J{constructor(e){super(),K(this,e,dm,gm,Y,{})}}function Zr(l){let e;return{c(){e=O("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bm(l){let e,n=l[0]&&Zr();return{c(){n&&n.c(),e=Fe()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=Zr(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(t){t&&p(e),n&&n.d(t)}}}function vm(l,e,n){let{loadFile:t}=e,r=!0;return On(async()=>{let s=await(await fetch(`${ln()}/v1/random_schemes.geojson`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class wm extends J{constructor(e){super(),K(this,e,vm,bm,Y,{loadFile:1})}}function xr(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=O("p"),n=y("Current milestone: "),r=y(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function km(l){let e;return{c(){e=y("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ym(l){let e;return{c(){e=y("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sm(l){let e,n,t,r;return e=new gt({props:{$$slots:{default:[km]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new gt({props:{$$slots:{default:[ym]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Cm(l){var N,q,R,D;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((N=l[0].browse)==null?void 0:N.authority_or_region)+"",a,f,c,g,d=((q=l[0].browse)==null?void 0:q.capital_scheme_id)+"",k,T,C,M,j=((R=l[0].browse)==null?void 0:R.funding_programme)+"",I,P,A,F,E,S=((D=l[0].browse)==null?void 0:D.current_milestone)&&xr(l);return F=new xl({props:{$$slots:{default:[Sm]},$$scope:{ctx:l}}}),{c(){e=O("p"),n=y("Scheme reference: "),r=y(t),o=L(),s=O("p"),u=y("Authority or region: "),a=y(i),f=L(),c=O("p"),g=y("Capital scheme ID: "),k=y(d),T=L(),C=O("p"),M=y("Funding programme: "),I=y(j),P=L(),S&&S.c(),A=L(),h(F.$$.fragment)},m(B,X){$(B,e,X),w(e,n),w(e,r),$(B,o,X),$(B,s,X),w(s,u),w(s,a),$(B,f,X),$(B,c,X),w(c,g),w(c,k),$(B,T,X),$(B,C,X),w(C,M),w(C,I),$(B,P,X),S&&S.m(B,X),$(B,A,X),b(F,B,X),E=!0},p(B,X){var oe,ce,Ie,Te;(!E||X&1)&&t!==(t=B[0].scheme_reference+"")&&z(r,t),(!E||X&1)&&i!==(i=((oe=B[0].browse)==null?void 0:oe.authority_or_region)+"")&&z(a,i),(!E||X&1)&&d!==(d=((ce=B[0].browse)==null?void 0:ce.capital_scheme_id)+"")&&z(k,d),(!E||X&1)&&j!==(j=((Ie=B[0].browse)==null?void 0:Ie.funding_programme)+"")&&z(I,j),(Te=B[0].browse)!=null&&Te.current_milestone?S?S.p(B,X):(S=xr(B),S.c(),S.m(A.parentNode,A)):S&&(S.d(1),S=null);const re={};X&32&&(re.$$scope={dirty:X,ctx:B}),F.$set(re)},i(B){E||(m(F.$$.fragment,B),E=!0)},o(B){_(F.$$.fragment,B),E=!1},d(B){B&&(p(e),p(o),p(s),p(f),p(c),p(T),p(C),p(P),p(A)),S&&S.d(B),v(F,B)}}}function Tm(l){let e,n;return e=new De({props:{label:`${l[0].scheme_name}`,$$slots:{default:[Cm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Om(l,e,n){let t,r;ke(l,dt,i=>n(3,t=i)),ke(l,Tn,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Wl(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";Vl(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class Lm extends J{constructor(e){super(),K(this,e,Om,Tm,Y,{scheme:0})}}function el(l){let e,n,t=Dn(l[0].length_meters)+"",r;return{c(){e=O("p"),n=y("Length: "),r=y(t)},m(o,s){$(o,e,s),w(e,n),w(e,r)},p(o,s){s&1&&t!==(t=Dn(o[0].length_meters)+"")&&z(r,t)},d(o){o&&p(e)}}}function tl(l){let e,n=ot(l[0].description,l[2])+"";return{c(){e=O("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=ot(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function nl(l){var o;let e,n,t=((o=l[1].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=O("p"),n=y("Current milestone: "),r=y(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function Am(l){var Be,Ee,Ce,Qe;let e,n,t,r=ot(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,g,d,k,T,C,M=ot(l[1].scheme_name??"",l[3])+"",j,I,P=ot(l[0].scheme_reference,l[3])+"",A,F,E,S,N=((Be=l[1].browse)==null?void 0:Be.authority_or_region)+"",q,R,D,B,X=((Ee=l[1].browse)==null?void 0:Ee.capital_scheme_id)+"",re,oe,ce,Ie,Te=((Ce=l[1].browse)==null?void 0:Ce.funding_programme)+"",ie,Le,ue=l[0].length_meters&&el(l),_e=l[0].description&&tl(l),ge=((Qe=l[1].browse)==null?void 0:Qe.current_milestone)&&nl(l);return{c(){e=O("div"),n=O("h2"),t=new zt(!1),o=y(" ("),u=y(s),i=y(")"),a=L(),ue&&ue.c(),f=L(),_e&&_e.c(),c=L(),g=O("hr"),d=L(),k=O("p"),T=y("Part of scheme: "),C=new zt(!1),j=y(" ("),I=new zt(!1),A=y(")"),F=L(),E=O("p"),S=y("Authority or region: "),q=y(N),R=L(),D=O("p"),B=y("Capital scheme ID: "),re=y(X),oe=L(),ce=O("p"),Ie=y("Funding programme: "),ie=y(Te),Le=L(),ge&&ge.c(),t.a=o,C.a=j,I.a=A,Se(e,"max-width","30vw")},m(se,be){$(se,e,be),w(e,n),t.m(r,n),w(n,o),w(n,u),w(n,i),w(e,a),ue&&ue.m(e,null),w(e,f),_e&&_e.m(e,null),w(e,c),w(e,g),w(e,d),w(e,k),w(k,T),C.m(M,k),w(k,j),I.m(P,k),w(k,A),w(e,F),w(e,E),w(E,S),w(E,q),w(e,R),w(e,D),w(D,B),w(D,re),w(e,oe),w(e,ce),w(ce,Ie),w(ce,ie),w(e,Le),ge&&ge.m(e,null)},p(se,[be]){var Mn,Pn,Nn,Fn;be&5&&r!==(r=ot(se[0].name,se[2])+"")&&t.p(r),be&1&&s!==(s=se[0].intervention_type+"")&&z(u,s),se[0].length_meters?ue?ue.p(se,be):(ue=el(se),ue.c(),ue.m(e,f)):ue&&(ue.d(1),ue=null),se[0].description?_e?_e.p(se,be):(_e=tl(se),_e.c(),_e.m(e,c)):_e&&(_e.d(1),_e=null),be&10&&M!==(M=ot(se[1].scheme_name??"",se[3])+"")&&C.p(M),be&9&&P!==(P=ot(se[0].scheme_reference,se[3])+"")&&I.p(P),be&2&&N!==(N=((Mn=se[1].browse)==null?void 0:Mn.authority_or_region)+"")&&z(q,N),be&2&&X!==(X=((Pn=se[1].browse)==null?void 0:Pn.capital_scheme_id)+"")&&z(re,X),be&2&&Te!==(Te=((Nn=se[1].browse)==null?void 0:Nn.funding_programme)+"")&&z(ie,Te),(Fn=se[1].browse)!=null&&Fn.current_milestone?ge?ge.p(se,be):(ge=nl(se),ge.c(),ge.m(e,null)):ge&&(ge.d(1),ge=null)},i:ne,o:ne,d(se){se&&p(e),ue&&ue.d(),_e&&_e.d(),ge&&ge.d()}}}function ot(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function Im(l,e,n){let t,r,o,s;ke(l,rn,i=>n(4,r=i)),ke(l,wt,i=>n(2,o=i)),ke(l,kt,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class In extends J{constructor(e){super(),K(this,e,Im,Am,Y,{props:0})}}function Mm(l){let e,n=l[6].name+"",t;return{c(){e=O("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Pm(l){let e,n;return e=new In({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nm(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Mm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Pm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Fm(l){let e,n=l[6].name+"",t;return{c(){e=O("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Em(l){let e,n;return e=new In({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Dm(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Fm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Em,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function jm(l){let e,n=l[6].name+"",t;return{c(){e=O("p"),t=y(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Rm(l){let e,n;return e=new In({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bm(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[jm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Rm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function zm(l){let e,n,t,r,o,s,u,i,a,f;const c=[H("interventions-points"),{filter:["all",jn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":zn,"circle-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[Nm]},$$scope:{ctx:l}};for(let A=0;A<c.length;A+=1)g=ee(g,c[A]);e=new at({props:g});const d=[H("interventions-lines"),{filter:["all",Rn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":vt,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[Dm]},$$scope:{ctx:l}};for(let A=0;A<d.length;A+=1)k=ee(k,d[A]);t=new ye({props:k});const T=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*vt,"circle-opacity":0,"circle-stroke-color":rt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let C={};for(let A=0;A<T.length;A+=1)C=ee(C,T[A]);o=new at({props:C});const M=[H("interventions-polygons"),{filter:["all",Zt,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":x(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let j={$$slots:{default:[Bm]},$$scope:{ctx:l}};for(let A=0;A<M.length;A+=1)j=ee(j,M[A]);u=new Ge({props:j});const I=[H("interventions-polygons-outlines"),{filter:["all",Zt,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*vt}},{layout:{visibility:l[0]?"visible":"none"}}];let P={};for(let A=0;A<I.length;A+=1)P=ee(P,I[A]);return a=new ye({props:P}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(A,F){b(e,A,F),$(A,n,F),b(t,A,F),$(A,r,F),b(o,A,F),$(A,s,F),b(u,A,F),$(A,i,F),b(a,A,F),f=!0},p(A,F){const E=F&29?te(c,[c[0],F&24&&{filter:["all",jn,A[3],A[4]]},c[2],c[3],F&4&&{paint:{"circle-color":A[2],"circle-radius":zn,"circle-opacity":x(1,.5)}},F&1&&{layout:{visibility:A[0]?"visible":"none"}},c[6]]):{};F&128&&(E.$$scope={dirty:F,ctx:A}),e.$set(E);const S=F&13?te(d,[d[0],F&8&&{filter:["all",Rn,A[3]]},d[2],d[3],F&4&&{paint:{"line-color":A[2],"line-width":vt,"line-opacity":x(1,.5)}},F&1&&{layout:{visibility:A[0]?"visible":"none"}},d[6]]):{};F&128&&(S.$$scope={dirty:F,ctx:A}),t.$set(S);const N=F&1?te(T,[T[0],T[1],T[2],{layout:{visibility:A[0]?"visible":"none"}}]):{};o.$set(N);const q=F&13?te(M,[M[0],F&8&&{filter:["all",Zt,A[3]]},M[2],M[3],F&4&&{paint:{"fill-color":A[2],"fill-opacity":x(.2,.5)}},F&1&&{layout:{visibility:A[0]?"visible":"none"}},M[6]]):{};F&128&&(q.$$scope={dirty:F,ctx:A}),u.$set(q);const R=F&13?te(I,[I[0],F&8&&{filter:["all",Zt,A[3]]},F&4&&{paint:{"line-color":A[2],"line-opacity":.5,"line-width":.7*vt}},F&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};a.$set(R)},i(A){f||(m(e.$$.fragment,A),m(t.$$.fragment,A),m(o.$$.fragment,A),m(u.$$.fragment,A),m(a.$$.fragment,A),f=!0)},o(A){_(e.$$.fragment,A),_(t.$$.fragment,A),_(o.$$.fragment,A),_(u.$$.fragment,A),_(a.$$.fragment,A),f=!1},d(A){A&&(p(n),p(r),p(s),p(i)),v(e,A),v(t,A),v(o,A),v(u,A),v(a,A)}}}function Hm(l){let e,n;return e=new bt({props:{data:l[1],$$slots:{default:[zm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qm(l,e,n){let t,r;ke(l,dt,a=>n(5,r=a));let{showSchemes:o}=e,[s]=yn();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=Xl(r))},[o,t,s,u,i,r]}class Gm extends J{constructor(e){super(),K(this,e,qm,Hm,Y,{showSchemes:0})}}function rl(l,e,n){const t=l.slice();return t[13]=e[n],t}function ll(l,e,n){const t=l.slice();return t[16]=e[n],t}function Um(l){let e,n;return e=new wm({props:{loadFile:l[7]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ol(l){let e,n,t,r,o;e=new gt({props:{$$slots:{default:[Wm]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[Vm]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new ul({props:u}),U.push(()=>W(t,"open",s)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],V(()=>r=!1)),t.$set(c)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function Wm(l){let e;return{c(){e=y("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sl(l){let e,n,t=l[16]+"",r;return{c(){e=O("li"),n=O("p"),r=y(t)},m(o,s){$(o,e,s),w(e,n),w(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&z(r,t)},d(o){o&&p(e)}}}function Vm(l){let e,n,t,r,o=je(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=sl(ll(l,o,u));return{c(){e=O("div"),n=O("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=L(),r=O("ul");for(let u=0;u<s.length;u+=1)s[u].c();G(e,"class","govuk-prose")},m(u,i){$(u,e,i),w(e,n),w(e,t),w(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=je(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=ll(u,o,a);s[a]?s[a].p(f,i):(s[a]=sl(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),_t(s,u)}}}function il(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new Gi({props:u}),U.push(()=>W(e,"schemesToBeShown",o)),U.push(()=>W(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],V(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],V(()=>t=!1)),e.$set(f)},i(i){r||(m(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){v(e,i)}}}function al(l){let e,n;return e=new Lm({props:{scheme:l[13]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&al(l);return{c(){r&&r.c(),n=Fe()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&m(r,1)):(r=al(o),r.c(),m(r,1),r.m(n.parentNode,n)):r&&($e(),_(r,1,1,()=>{r=null}),pe())},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function Xm(l){let e,n,t,r,o,s,u,i,a,f,c=_n()=="Private (development)",g,d,k,T,C,M,j,I,P;o=new ro({props:{boundaryGeojson:l[4]}}),a=new Yl({});let A=c&&Um(l),F=l[4].notes&&ol(l);k=new to({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),C=new hl({props:{errorMessage:l[0]}});let E=l[6].size>0&&il(l),S=je(l[6].values()),N=[];for(let R=0;R<S.length;R+=1)N[R]=fl(rl(l,S,R));const q=R=>_(N[R],1,1,()=>{N[R]=null});return{c(){e=O("div"),n=O("div"),t=O("h1"),t.textContent="Browse schemes",r=L(),h(o.$$.fragment),s=L(),u=O("p"),u.textContent=`App version: ${_n()}`,i=L(),h(a.$$.fragment),f=L(),A&&A.c(),g=L(),F&&F.c(),d=L(),h(k.$$.fragment),T=L(),h(C.$$.fragment),M=L(),E&&E.c(),j=L(),I=O("ul");for(let R=0;R<N.length;R+=1)N[R].c();Se(n,"display","flex"),Se(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(R,D){$(R,e,D),w(e,n),w(n,t),w(n,r),b(o,n,null),w(e,s),w(e,u),w(e,i),b(a,e,null),w(e,f),A&&A.m(e,null),w(e,g),F&&F.m(e,null),w(e,d),b(k,e,null),w(e,T),b(C,e,null),w(e,M),E&&E.m(e,null),w(e,j),w(e,I);for(let B=0;B<N.length;B+=1)N[B]&&N[B].m(I,null);P=!0},p(R,D){const B={};D&16&&(B.boundaryGeojson=R[4]),o.$set(B),c&&A.p(R,D),R[4].notes?F?(F.p(R,D),D&16&&m(F,1)):(F=ol(R),F.c(),m(F,1),F.m(e,d)):F&&($e(),_(F,1,1,()=>{F=null}),pe());const X={};if(D&1&&(X.errorMessage=R[0]),C.$set(X),R[6].size>0?E?(E.p(R,D),D&64&&m(E,1)):(E=il(R),E.c(),m(E,1),E.m(e,j)):E&&($e(),_(E,1,1,()=>{E=null}),pe()),D&66){S=je(R[6].values());let re;for(re=0;re<S.length;re+=1){const oe=rl(R,S,re);N[re]?(N[re].p(oe,D),m(N[re],1)):(N[re]=fl(oe),N[re].c(),m(N[re],1),N[re].m(I,null))}for($e(),re=S.length;re<N.length;re+=1)q(re);pe()}},i(R){if(!P){m(o.$$.fragment,R),m(a.$$.fragment,R),m(A),m(F),m(k.$$.fragment,R),m(C.$$.fragment,R),m(E);for(let D=0;D<S.length;D+=1)m(N[D]);P=!0}},o(R){_(o.$$.fragment,R),_(a.$$.fragment,R),_(A),_(F),_(k.$$.fragment,R),_(C.$$.fragment,R),_(E),N=N.filter(Boolean);for(let D=0;D<N.length;D+=1)_(N[D]);P=!1},d(R){R&&p(e),v(o),v(a),A&&A.d(),F&&F.d(),v(k),v(C),E&&E.d(),_t(N,R)}}}function Ym(l){let e,n,t,r,o,s,u;return e=new eo({}),t=new Gm({props:{showSchemes:l[2]}}),s=new hm({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),o=O("div"),h(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),$(i,o,a),b(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),v(s)}}}function Qm(l){let e,n,t;return n=new Ql({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Ym]},$$scope:{ctx:l}}}),{c(){e=O("div"),h(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Jm(l){let e,n;return e=new oo({props:{$$slots:{main:[Qm],sidebar:[Xm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Km(l,e,n){let t,r,o;ke(l,dt,C=>n(4,t=C)),ke(l,Bn,C=>n(5,r=C)),ke(l,rn,C=>n(6,o=C)),On(()=>{Jl()});const s=new URLSearchParams(window.location.search);Bn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(C){try{dt.set(JSON.parse(C)),rn.set(yi(t)),n(0,u="")}catch(M){n(0,u=`The file you loaded is broken: ${M}`)}}const g=()=>n(3,f=!0);function d(C){f=C,n(3,f)}function k(C){i=C,n(1,i)}function T(C){a=C,n(2,a)}return[u,i,a,f,t,r,o,c,g,d,k,T]}class Zm extends J{constructor(e){super(),K(this,e,Km,Jm,Y,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Zm({target:document.getElementById("app")});
