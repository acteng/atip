import{S as q,i as W,s as z,e as L,h as G,$ as Te,j as $,W as ee,o as p,aP as Jr,b as Z,c as Q,d as C,g as h,m as b,w as yt,l as x,t as m,n as g,p as v,X as It,Y as Pt,Z as Mt,_ as Et,a7 as Ge,J as ue,K as ce,aQ as St,u as w,k,D as B,I as Ae,N as fn,O as Sr,q as me,P as Or,Q as Tr,T as Ot,U as Cr,V as Ar,aX as Yr,aY as it,a4 as hn,aZ as Qr,f as un,aO as xr,ar as zt,aj as Xt,ae as cn,r as $n,F as Lr,a as tn,v as Gt,aW as X,a_ as ge,a$ as we,B as K,ah as J,C as he,ak as Y,b0 as ne,G as Nt,H as el,aS as tl,ab as bn,R as Ir,b1 as pn,b2 as mn,E as Pr,as as nl,ag as rl,aU as vn,al as ll,am as wn,an as kn,ao as Rt,aV as yn,L as ol,M as sl,y as il}from"./index-1b84cc06.js";import{C as Me,d as Ze,j as Tt,f as Ft,h as ie,l as R,c as qt,k as al,S as fl,B as ul,b as vt,G as cl}from"./StreetViewTool-2258e7ff.js";import{a as Ye,F as $l}from"./Popup-33b43b54.js";import{P as oe}from"./Popup-16be0497.js";import{R as pl,C as nt,Z as ml}from"./ZoomOutMap-a612949f.js";import{L as _l,a as gl}from"./LineMeasureController-38fd0f24.js";function dl(r){let e;return{c(){e=L("span"),G(e,"class","svelte-kzgqtg"),Te(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Te(e,"background",n[0])},i:ee,o:ee,d(n){n&&p(e)}}}function hl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class ke extends q{constructor(e){super(),W(this,e,hl,dl,z,{color:0})}}const bl="/atip/fix_popup/assets/help-d011708a.svg";function vl(r){let e,n;const t=r[1].default,l=It(t,r,r[4],null);return{c(){e=L("div"),l&&l.c(),G(e,"class","govuk-prose")},m(o,i){$(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Pt(l,t,o,o[4],n?Et(t,o[4],i,null):Mt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){g(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function wl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[vl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Jr({props:a}),Z.push(()=>Q(t,"open",s)),{c(){e=L("button"),e.innerHTML=`<img src="${bl}" title="Help" alt="Help"/>`,n=C(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,i||(u=yt(e,"click",r[2]),i=!0)},p(f,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,d.open=f[0],x(()=>l=!1)),t.$set(d)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){g(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),i=!1,u()}}}function kl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class ae extends q{constructor(e){super(),W(this,e,kl,wl,z,{})}}function Sn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function On(r){let e,n,t,l=r[1]+"",o,i,u;return n=new ke({props:{color:r[2]}}),{c(){e=L("li"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){$(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p(s,a){const f={};a&1&&(f.color=s[2]),n.$set(f),(!u||a&1)&&l!==(l=s[1]+"")&&B(o,l)},i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){g(n.$$.fragment,s),u=!1},d(s){s&&p(e),v(n)}}}function yl(r){let e,n,t=Ge(r[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=On(Sn(r,t,i));const o=i=>g(l[i],1,1,()=>{l[i]=null});return{c(){e=L("ul");for(let i=0;i<l.length;i+=1)l[i].c()},m(i,u){$(i,e,u);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);n=!0},p(i,u){if(u&1){t=Ge(i[0]);let s;for(s=0;s<t.length;s+=1){const a=Sn(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=On(a),l[s].c(),m(l[s],1),l[s].m(e,null))}for(ue(),s=t.length;s<l.length;s+=1)o(s);ce()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(i){i&&p(e),St(l,i)}}}function Sl(r){let e,n;return e=new Me({props:{label:"Legend",$$slots:{default:[yl]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ol(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class Tl extends q{constructor(e){super(),W(this,e,Ol,Sl,z,{rows:0})}}function Tn(r){let e=r[0],n,t,l=Cn(r);return{c(){l.c(),n=Ae()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&z(e,e=o[0])?(ue(),g(l,1,1,ee),ce(),l=Cn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Cn(r){let e;const n=r[10].default,t=It(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Pt(t,n,l,l[9],e?Et(n,l[9],o,null):Mt(l[9]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Cl(r){let e,n,t=r[0]&&Tn(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Tn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ue(),g(t,1,1,()=>{t=null}),ce())},i(l){n||(m(t),n=!0)},o(l){g(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Al(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=fn("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=Sr();me(r,f,y=>n(8,l=y)),me(r,c,y=>n(0,t=y));let d,_=!0;return Or(()=>{t&&d&&l&&(Tr(f,t,d),Ot(c,t=null,t),n(6,d=void 0))}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,s=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,i=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Ot(c,t=u,t),Cr(l,t,Ar({type:"raster",tiles:s,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,d=l==null?void 0:l.getSource(t)),n(7,_=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,d=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&d&&(_?n(7,_=!1):d.setTiles(s))},[t,f,c,u,s,a,d,_,l,i,o]}class Ll extends q{constructor(e){super(),W(this,e,Al,Cl,z,{id:3,tiles:4,tileSize:5})}}function Il(r){let e;const n=r[16].default,t=It(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Pt(t,n,l,l[24],e?Et(n,l[24],o,null):Mt(l[24]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Pl(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Il]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Yr({props:o}),Z.push(()=>Q(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ml(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=fn("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:d=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:O=!1}=e,{hovered:E=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:F=!0}=e;function I(j){E=j,n(0,E)}function N(j){it.call(this,r,j)}function M(j){it.call(this,r,j)}function A(j){it.call(this,r,j)}function P(j){it.call(this,r,j)}function H(j){it.call(this,r,j)}function V(j){it.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,i=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,s=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,d=j.filter),"applyToClusters"in j&&n(9,_=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,S=j.maxzoom),"hoverCursor"in j&&n(12,T=j.hoverCursor),"manageHoverState"in j&&n(13,O=j.manageHoverState),"hovered"in j&&n(0,E=j.hovered),"eventsIfTopMost"in j&&n(14,D=j.eventsIfTopMost),"interactive"in j&&n(15,F=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[E,o,i,u,s,a,f,c,d,_,y,S,T,O,D,F,t,I,N,M,A,P,H,V,l]}class El extends q{constructor(e){super(),W(this,e,Ml,Pl,z,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function An(r){let e=r[0],n,t,l=Ln(r);return{c(){l.c(),n=Ae()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&z(e,e=o[0])?(ue(),g(l,1,1,ee),ce(),l=Ln(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Ln(r){let e;const n=r[9].default,t=It(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Pt(t,n,l,l[8],e?Et(n,l[8],o,null):Mt(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Nl(r){let e,n,t=r[0]&&An(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=An(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ue(),g(t,1,1,()=>{t=null}),ce())},i(l){n||(m(t),n=!0)},o(l){g(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Fl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=fn("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!hn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Qr;hn.addProtocol("pmtiles",y.tile)}const{map:c,self:d}=Sr();me(r,c,y=>n(7,l=y)),me(r,d,y=>n(0,t=y));let _;return Or(()=>{t&&l&&(Tr(c,t,_),Ot(d,t=null,t),_=void 0)}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,s=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,i=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Ot(d,t=u,t),Cr(l,t,Ar({type:"vector",url:s,tiles:a,promoteId:f}),y=>l&&y===t,()=>{t&&(_=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{_=l==null?void 0:l.getSource(u)}))},[t,c,d,u,s,a,f,l,i,o]}class be extends q{constructor(e){super(),W(this,e,Fl,Nl,z,{id:3,url:4,tiles:5,promoteId:6})}}function Dl(r){let e;return{c(){e=L("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jl(r){let e,n,t=r[0]=="Private (development)"&&Dl();return{c(){t&&t.c(),e=C(),n=L("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),$(l,e,o),$(l,n,o)},p:ee,d(l){l&&(p(e),p(n)),t&&t.d(l)}}}function Rl(r){let e,n,t,l,o,i;return o=new ae({props:{$$slots:{default:[jl]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("App version: "),t=w(r[0]),l=C(),h(o.$$.fragment)},m(u,s){$(u,e,s),k(e,n),k(e,t),k(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(m(o.$$.fragment,u),i=!0)},o(u){g(o.$$.fragment,u),i=!1},d(u){u&&p(e),v(o)}}}function Bl(r){return[un()]}class Hl extends q{constructor(e){super(),W(this,e,Bl,Rl,z,{})}}const Ul={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Se=Uint8Array,ot=Uint16Array,Mr=Uint32Array,Er=new Se([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Nr=new Se([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),zl=new Se([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Fr=function(r,e){for(var n=new ot(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Mr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Dr=Fr(Er,2),jr=Dr[0],Gl=Dr[1];jr[28]=258,Gl[258]=28;var ql=Fr(Nr,0),Wl=ql[0],nn=new ot(32768);for(var se=0;se<32768;++se){var et=(se&43690)>>>1|(se&21845)<<1;et=(et&52428)>>>2|(et&13107)<<2,et=(et&61680)>>>4|(et&3855)<<4,nn[se]=((et&65280)>>>8|(et&255)<<8)>>>1}var kt=function(r,e,n){for(var t=r.length,l=0,o=new ot(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new ot(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new ot(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)u[nn[c]>>>s]=a}else for(u=new ot(t),l=0;l<t;++l)r[l]&&(u[l]=nn[i[r[l]-1]++]>>>15-r[l]);return u},Dt=new Se(288);for(var se=0;se<144;++se)Dt[se]=8;for(var se=144;se<256;++se)Dt[se]=9;for(var se=256;se<280;++se)Dt[se]=7;for(var se=280;se<288;++se)Dt[se]=8;var Rr=new Se(32);for(var se=0;se<32;++se)Rr[se]=5;var Vl=kt(Dt,9,1),Xl=kt(Rr,5,1),Kt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Ie=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Zt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Kl=function(r){return(r+7)/8|0},_n=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?ot:r.BYTES_PER_ELEMENT==4?Mr:Se)(n-e);return t.set(r.subarray(e,n)),t},Zl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pe=function(r,e,n){var t=new Error(e||Zl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Pe),!n)throw t;return t},Jl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Se(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Se(t*3));var i=function(_e){var De=e.length;if(_e>De){var Xe=new Se(Math.max(De*2,_e));Xe.set(e),e=Xe}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,d=n.m,_=n.n,y=t*8;do{if(!f){u=Ie(r,s,1);var S=Ie(r,s+1,3);if(s+=3,S)if(S==1)f=Vl,c=Xl,d=9,_=5;else if(S==2){var D=Ie(r,s,31)+257,F=Ie(r,s+10,15)+4,I=D+Ie(r,s+5,31)+1;s+=14;for(var N=new Se(I),M=new Se(19),A=0;A<F;++A)M[zl[A]]=Ie(r,s+A*3,7);s+=F*3;for(var P=Kt(M),H=(1<<P)-1,V=kt(M,P,1),A=0;A<I;){var j=V[Ie(r,s,H)];s+=j&15;var T=j>>>4;if(T<16)N[A++]=T;else{var U=0,$e=0;for(T==16?($e=3+Ie(r,s,3),s+=2,U=N[A-1]):T==17?($e=3+Ie(r,s,7),s+=3):T==18&&($e=11+Ie(r,s,127),s+=7);$e--;)N[A++]=U}}var Ne=N.subarray(0,D),de=N.subarray(D);d=Kt(Ne),_=Kt(de),f=kt(Ne,d,1),c=kt(de,_,1)}else Pe(1);else{var T=Kl(s)+4,O=r[T-4]|r[T-3]<<8,E=T+O;if(E>t){o&&Pe(0);break}l&&i(a+O),e.set(r.subarray(T,E),a),n.b=a+=O,n.p=s=E*8,n.f=u;continue}if(s>y){o&&Pe(0);break}}l&&i(a+131072);for(var Ve=(1<<d)-1,pe=(1<<_)-1,fe=s;;fe=s){var U=f[Zt(r,s)&Ve],re=U>>>4;if(s+=U&15,s>y){o&&Pe(0);break}if(U||Pe(2),re<256)e[a++]=re;else if(re==256){fe=s,f=null;break}else{var xe=re-254;if(re>264){var A=re-257,Ce=Er[A];xe=Ie(r,s,(1<<Ce)-1)+jr[A],s+=Ce}var Le=c[Zt(r,s)&pe],Fe=Le>>>4;Le||Pe(3),s+=Le&15;var de=Wl[Fe];if(Fe>3){var Ce=Nr[Fe];de+=Zt(r,s)&(1<<Ce)-1,s+=Ce}if(s>y){o&&Pe(0);break}l&&i(a+131072);for(var le=a+xe;a<le;a+=4)e[a]=e[a-de],e[a+1]=e[a+1-de],e[a+2]=e[a+2-de],e[a+3]=e[a+3-de];a=le}}n.l=f,n.p=fe,n.b=a,n.f=u,f&&(u=1,n.m=d,n.d=c,n.n=_)}while(!u);return a==e.length?e:_n(e,0,a)},Yl=new Se(0),ze=function(r,e){return r[e]|r[e+1]<<8},Ee=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Jt=function(r,e){return Ee(r,e)+Ee(r,e+4)*4294967296};function Ql(r,e){return Jl(r,e)}var rn=typeof TextDecoder<"u"&&new TextDecoder,xl=0;try{rn.decode(Yl,{stream:!0}),xl=1}catch{}var eo=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,_n(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Br(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(rn)return rn.decode(r);var l=eo(r),o=l[0],i=l[1];return i.length&&Pe(8),o}}var to=function(r,e){return e+30+ze(r,e+26)+ze(r,e+28)},no=function(r,e,n){var t=ze(r,e+28),l=Br(r.subarray(e+46,e+46+t),!(ze(r,e+8)&2048)),o=e+46+t,i=Ee(r,e+20),u=n&&i==4294967295?ro(r,o):[i,Ee(r,e+24),Ee(r,e+42)],s=u[0],a=u[1],f=u[2];return[ze(r,e+10),s,a,l,o+ze(r,e+30)+ze(r,e+32),f]},ro=function(r,e){for(;ze(r,e)!=1;e+=4+ze(r,e+2));return[Jt(r,e+12),Jt(r,e+4),Jt(r,e+20)]};function lo(r,e){for(var n={},t=r.length-22;Ee(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Pe(13);var l=ze(r,t+8);if(!l)return{};var o=Ee(r,t+16),i=o==4294967295||l==65535;if(i){var u=Ee(r,t-12);i=Ee(r,u)==101075792,i&&(l=Ee(r,u+32),o=Ee(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=no(r,o,i),c=f[0],d=f[1],_=f[2],y=f[3],S=f[4],T=f[5],O=to(r,T);o=S,(!s||s({name:y,size:d,originalSize:_,compression:c}))&&(c?c==8?n[y]=Ql(r.subarray(O,O+d),new Se(_)):Pe(14,"unknown compression type "+c):n[y]=_n(r,O,O+d))}return n}function oo(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Yt):Yt(r)}function Yt(r){var e=new Uint8Array(r),n=lo(e);return Promise.resolve(so(n))}function so(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Br(r[l])}return e}function qe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&st(t)===e)return t;n++}}function jt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&st(l)===e&&n.push(l),t++}return n}function Wt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&st(l)===e&&n(l,t):n(l,t),t++}}function io(r,e,n){var t=[];return Wt(r,e,function(l,o){t.push(n(l,o))}),t}var ao=/.+\:/;function st(r){return r.tagName.replace(ao,"")}function Hr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+st(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Hr(r.childNodes[t]),t++;return e+="</"+st(r)+">",e}function fo(r){var e=r.documentElement,n=qe(e,"sheetData"),t=[];return Wt(n,"row",function(l){Wt(l,"c",function(o){t.push(o)})}),t}function uo(r,e){return qe(e,"v")}function co(r,e){if(e.firstChild&&st(e.firstChild)==="is"&&e.firstChild.firstChild&&st(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function $o(r){var e=r.documentElement,n=qe(e,"dimension");if(n)return n.getAttribute("ref")}function po(r){var e=r.documentElement,n=qe(e,"cellStyleXfs");return n?jt(n,"xf"):[]}function mo(r){var e=r.documentElement,n=qe(e,"cellXfs");return n?jt(n,"xf"):[]}function _o(r){var e=r.documentElement,n=qe(e,"numFmts");return n?jt(n,"numFmt"):[]}function go(r){var e=r.documentElement;return io(e,"si",function(n){var t=qe(n,"t");if(t)return t.textContent;var l="";return Wt(n,"r",function(o){l+=qe(o,"t").textContent}),l})}function ho(r){var e=r.documentElement;return qe(e,"workbookPr")}function bo(r){var e=r.documentElement;return jt(e,"Relationship")}function vo(r){var e=r.documentElement,n=qe(e,"sheets");return jt(n,"sheet")}function wo(r,e){var n=e.createDocument(r),t={},l=ho(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return vo(n).forEach(o),t}function ko(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Qt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Qt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Qt(u);break}};return bo(n).forEach(l),t}function Qt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function In(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Pn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?In(Object(n),!0).forEach(function(t){yo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function yo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function So(r,e){if(!r)return{};var n=e.createDocument(r),t=po(n).map(xt),l=_o(n).map(Oo).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Pn(Pn({},t[u.xfId]),xt(u,l)):xt(u,l)};return mo(n).map(o)}function Oo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function xt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function To(r,e){return r?go(e.createDocument(r)):[]}function Ur(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Co(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ao(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ao(r,e){if(r){if(typeof r=="string")return Mn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mn(r,e)}}function Mn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Lo(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Io.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&Eo(l.numberFormat.template))return!0}}var Io=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Po=/^\[\$-414\]/,Mo=/;@$/;function Eo(r){r=r.toLowerCase(),r=r.replace(Po,""),r=r.replace(Mo,"");for(var e=r.split(/\W+/),n=Co(e),t;!(t=n()).done;){var l=t.value;if(No.indexOf(l)<0)return!1}return!0}var No=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Fo(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=en(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=en(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=en(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Do(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var d=Number(r);if(isNaN(d))throw new Error('Invalid "numeric" cell value: '.concat(r));r=d,Lo(r,o(),i,a)&&(r=Ur(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Do(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function en(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var jo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Ro(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function Bo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=jo.indexOf(r[n]),n++;return e}function zr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Bo(r[0].trim())]}function Ho(r,e,n,t,l,o,i){var u=zr(r.getAttribute("r")),s=uo(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:Fo(a,f,{getInlineStringValue:function(){return co(e,r)},getInlineStringXml:function(){return Hr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function Uo(r,e,n,t,l,o){var i=fo(r);return i.length===0?[]:i.map(function(u){return Ho(u,r,e,n,t,l,o)})}function zo(r,e){return Vo(r)||Wo(r,e)||qo(r,e)||Go()}function Go(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qo(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Wo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Vo(r){if(Array.isArray(r))return r}function Xo(r){var e=$o(r);if(e)return e=e.split(":").map(zr).map(function(n){var t=zo(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Ko(r,e,n,t,l,o){var i=e.createDocument(r),u=Uo(i,e,n,t,l,o),s=Xo(i)||Ro(u);return{cells:u,dimensions:s}}function Zo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Jo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jo(r,e){if(r){if(typeof r=="string")return Nn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(r,e)}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Yo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=Zo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Qo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=xo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xo(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function es(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Qo(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function ts(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Gr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ns(r,e){return os(r)||ls(r,e)||Gr(r,e)||rs()}function rs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gr(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ls(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function os(r){if(Array.isArray(r))return r}function ss(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=ns(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=ts(t),d;!(d=c()).done;){var _=d.value,y=_.row-1,S=_.column-1;S<i&&y<u&&(s[y][S]=_.value)}var T=e.rowMap;if(T)for(var O=0;O<s.length;)T[O]=O,O++;return s=Yo(es(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(s=e.transformData(s)),s}function is(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=as(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function as(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Rn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function fs(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Rn(Object(n),!0).forEach(function(t){us(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function us(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function cs(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=fs({sheet:1},n));var t=function(d){if(!r[d])throw new Error('"'.concat(d,'" file not found inside the *.xlsx file zip archive'));return r[d]},l=ko(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?To(t(l.sharedStrings),e):[],i=l.styles?So(t(l.styles),e):{},u=wo(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var d=c.name;return{name:d}});var s=$s(n.sheet,u.sheets);if(!s||!l.sheets[s])throw ps(n.sheet,u.sheets);var a=Ko(t(l.sheets[s]),e,o,i,u,n),f=ss(a,n);return n.properties?{data:f,properties:u}:f}function $s(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=is(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function ps(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function ln(r){"@babel/helpers - typeof";return ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(r)}function Bn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function ms(r,e,n){return e&&Bn(r.prototype,e),n&&Bn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function _s(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function gs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ct(r,e)}function ds(r){var e=qr();return function(){var t=At(r),l;if(e){var o=At(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return hs(this,l)}}function hs(r,e){if(e&&(ln(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bs(r)}function bs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function on(r){var e=typeof Map=="function"?new Map:void 0;return on=function(t){if(t===null||!vs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Ht(t,arguments,At(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ct(l,t)},on(r)}function Ht(r,e,n){return qr()?Ht=Reflect.construct:Ht=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Ct(a,i.prototype),a},Ht.apply(null,arguments)}function qr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function vs(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ct(r,e){return Ct=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Ct(r,e)}function At(r){return At=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},At(r)}var Oe=function(r){gs(n,r);var e=ds(n);function n(t){var l;return _s(this,n),l=e.call(this,"invalid"),l.reason=t,l}return ms(n)}(on(Error));function ws(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Oe("not_a_number")}if(typeof r!="number")throw new Oe("not_a_number");if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return r}function ks(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return String(r)}throw new Oe("not_a_string")}function ys(r){if(typeof r=="boolean")return r;throw new Oe("not_a_boolean")}function Ss(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Oe("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");var t=Ur(r,n);if(isNaN(t.valueOf()))throw new Oe("out_of_bounds");return t}throw new Oe("not_a_date")}function Os(r,e){return As(r)||Cs(r,e)||Wr(r,e)||Ts()}function Ts(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function As(r){if(Array.isArray(r))return r}function sn(r){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(r)}function Ls(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Wr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wr(r,e){if(r){if(typeof r=="string")return Hn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hn(r,e)}}function Hn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Un(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function zn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Un(Object(n),!0).forEach(function(t){Is(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Is(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Gn={isColumnOriented:!1};function Ps(r,e,n){n?n=zn(zn({},Gn),n):n=Gn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;Fs(e),l&&(r=Ns(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Vr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var d=Ls(a),_;!(_=d()).done;){var y=_.value;y.row=o[y.row-1]+1}return{rows:s,errors:a}}function Vr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var d=f[a],_=r[d],y=sn(_.type)==="object"&&!Array.isArray(_.type),S=e[t.indexOf(d)];S===void 0&&(S=null);var T=void 0,O=void 0,E=void 0;if(y)T=Vr(_.type,e,n,t,l,o);else if(S===null)T=null;else if(Array.isArray(_.type)){var D=!1,F=Es(S).map(function(N){var M=qn(N,_,o);return M.error&&(T=N,O=M.error,E=M.reason),M.value!==null&&(D=!0),M.value});O||(T=D?F:null)}else{var I=qn(S,_,o);O=I.error,E=I.reason,T=O?S:I.value}!O&&T===null&&_.required&&(O="required"),O?(O={error:O,row:n+1,column:d,value:T},E&&(O.reason=E),_.type&&(O.type=_.type),l.push(O)):(u&&T!==null&&(u=!1),(T!==null||o.includeNullValues)&&(i[_.prop]=T))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function qn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=at(r,e.parse):e.type?t=Ms(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function at(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Ms(r,e,n){switch(e){case String:return at(r,ks);case Number:return at(r,ws);case Date:return at(r,function(t){return Ss(t,{properties:n.properties})});case Boolean:return at(r,ys);default:if(typeof e=="function")return at(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Xr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Xr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function Es(r){for(var e=[],n=0;n<r.length;){var t=Xr(r,",",n),l=Os(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var Ns=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Fs(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function an(r){"@babel/helpers - typeof";return an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(r)}function Kr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;an(o)==="object"&&(o=Object.keys(r[l])[0],i=Kr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var Ds=["schema","map"];function Wn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Bt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wn(Object(n),!0).forEach(function(t){js(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function js(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Rs(r,e){if(r==null)return{};var n=Bs(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Bs(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Hs(r,e,n){var t=n.schema,l=n.map,o=Rs(n,Ds);!t&&l&&(t=Kr(l));var i=cs(r,e,Bt(Bt({},o),{},{properties:t||o.properties}));return t?Ps(i.data,t,Bt(Bt({},o),{},{properties:i.properties})):i}function Us(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return oo(r).then(function(n){return Hs(n,Ul,e)})}function zs(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>Gs(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(l.browse.num_features=l.browse.num_features!==void 0?l.browse.num_features+1:1,t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function Gs(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function qs(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Us(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=xr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function Zr(r){return zt(["get","intervention_type"],{area:Ze.area,route:Ze.route,crossing:Ze.crossing,other:Ze.other},"white")}function Vn(r){return[["Areas",Ze.area],["Routes",Ze.route],["Crossings",Ze.crossing],["Other",Ze.other]]}const te={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},Je=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20],bt=Xt({type:"FeatureCollection",features:[],schemes:{}}),Lt=Xt(new Map),Xn=Xt(!0),Ut=Xt("");function Ws(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Tt({props:u}),Z.push(()=>Q(e,"value",i)),e.$on("change",r[2]),l=new Tl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],x(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function Kn(r,e){let n=[],t={},l=0;for(let o of r){let i=e[l++%e.length];t[o]=i,n.push([o,i])}return[t,n]}function Vs(r,e,n){let t,l;me(r,Lt,c=>n(4,t=c)),me(r,cn,c=>n(5,l=c));let o="interventionType",i=Vn();function u(){let c;o=="interventionType"?(c=Zr(),n(1,i=Vn())):o=="fundingProgramme"?c=s():o=="currentMilestone"&&(c=a()),l.setPaintProperty("interventions-points","circle-color",c),l.setPaintProperty("interventions-lines","line-color",c),l.setPaintProperty("interventions-polygons","fill-color",c),l.setPaintProperty("interventions-polygons-outlines","line-color",c)}function s(){var T;let c=new Set;for(let O of t.values())(T=O.browse)!=null&&T.funding_programme&&c.add(O.browse.funding_programme);let d=Array.from(c);d.sort();let[_,y]=Kn(d,te.funding_programmes),S=zt(["get","funding_programme"],_,"grey");return n(1,i=y),S}function a(){let c=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[d,_]=Kn(c,te.current_milestone),y=zt(["get","current_milestone"],d,"grey");return n(1,i=_),y}function f(c){o=c,n(0,o)}return[o,i,u,f]}class Xs extends q{constructor(e){super(),W(this,e,Vs,Ws,z,{})}}function Ks(r){let e;return{c(){e=w("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zs(r){let e,n,t,l,o,i;return t=new tn({props:{$$slots:{default:[Ks]},$$scope:{ctx:r}}}),t.$on("click",r[11]),{c(){e=L("input"),n=C(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterText")},m(u,s){$(u,e,s),Gt(e,r[4]),$(u,n,s),b(t,u,s),l=!0,o||(i=yt(e,"input",r[10]),o=!0)},p(u,s){s&16&&e.value!==u[4]&&Gt(e,u[4]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){g(t.$$.fragment,u),l=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,i()}}}function Js(r){let e,n,t,l,o,i,u,s,a,f;function c(S){r[8](S)}let d={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(d.value=r[2]),e=new Tt({props:d}),Z.push(()=>Q(e,"value",c));function _(S){r[9](S)}let y={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(y.value=r[3]),l=new Tt({props:y}),Z.push(()=>Q(l,"value",_)),u=new Lr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Zs]},$$scope:{ctx:r}}}),a=new Xs({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(S,T){b(e,S,T),$(S,t,T),b(l,S,T),$(S,i,T),b(u,S,T),$(S,s,T),b(a,S,T),f=!0},p(S,T){const O={};T&32&&(O.choices=S[5]),!n&&T&4&&(n=!0,O.value=S[2],x(()=>n=!1)),e.$set(O);const E={};T&64&&(E.choices=S[6]),!o&&T&8&&(o=!0,E.value=S[3],x(()=>o=!1)),l.$set(E);const D={};T&65552&&(D.$$scope={dirty:T,ctx:S}),u.$set(D)},i(S){f||(m(e.$$.fragment,S),m(l.$$.fragment,S),m(u.$$.fragment,S),m(a.$$.fragment,S),f=!0)},o(S){g(e.$$.fragment,S),g(l.$$.fragment,S),g(u.$$.fragment,S),g(a.$$.fragment,S),f=!1},d(S){S&&(p(t),p(i),p(s)),v(e,S),v(l,S),v(u,S),v(a,S)}}}function Ys(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",d,_,y=r[7].other.toLocaleString()+"",S,T,O=Zn(r[7].totalLength).toFixed(1)+"",E,D;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),d=w(c),_=w(" crossings, "),S=w(y),T=w(`
    other, with total LineString length of `),E=w(O),D=w(" miles)")},m(F,I){$(F,e,I),$(F,t,I),$(F,l,I),$(F,i,I),$(F,u,I),$(F,a,I),$(F,f,I),$(F,d,I),$(F,_,I),$(F,S,I),$(F,T,I),$(F,E,I),$(F,D,I)},p(F,I){I&1&&n!==(n=F[0].size.toLocaleString()+"")&&B(t,n),I&128&&o!==(o=F[7].route.toLocaleString()+"")&&B(i,o),I&128&&s!==(s=F[7].area.toLocaleString()+"")&&B(a,s),I&128&&c!==(c=F[7].crossing.toLocaleString()+"")&&B(d,c),I&128&&y!==(y=F[7].other.toLocaleString()+"")&&B(S,y),I&128&&O!==(O=Zn(F[7].totalLength).toFixed(1)+"")&&B(E,O)},d(F){F&&(p(e),p(t),p(l),p(i),p(u),p(a),p(f),p(d),p(_),p(S),p(T),p(E),p(D))}}}function Qs(r){let e,n,t;function l(i){r[12](i)}let o={id:"show-schemes",$$slots:{default:[Ys]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ie({props:o}),Z.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65665&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function xs(r){let e,n,t,l;return e=new Me({props:{label:"Filters",$$slots:{default:[Js]},$$scope:{ctx:r}}}),t=new Ft({props:{small:!0,$$slots:{default:[Qs]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65660&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65667&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Zn(r){return r*621371e-9}function ei(r,e,n){let t,l,o;me(r,Ut,D=>n(4,t=D)),me(r,bt,D=>n(13,l=D)),me(r,Lt,D=>n(14,o=D));let{schemesToBeShown:i=new Set}=e,{show:u=!0}=e,s=[],a="",f=[],c="",d={area:0,route:0,crossing:0,other:0,totalLength:0};$n(()=>{var I,N;let D=new Set,F=new Set;for(let M of o.values())(I=M.browse)!=null&&I.authority_or_region&&D.add(M.browse.authority_or_region),(N=M.browse)!=null&&N.funding_programme&&F.add(M.browse.funding_programme);n(5,s=Array.from(D.entries())),s.sort(),n(6,f=Array.from(F.entries())),f.sort()});function _(D,F,I){let N=D.toLowerCase(),M=P=>{var H,V,j,U;if(N&&!((H=P.properties.name)!=null&&H.toLowerCase().includes(N))&&!((V=P.properties.description)!=null&&V.toLowerCase().includes(N)))return!1;if(F||I){let $e=o.get(P.properties.scheme_reference);if(F&&((j=$e.browse)==null?void 0:j.authority_or_region)!=F||I&&((U=$e.browse)==null?void 0:U.funding_programme)!=I)return!1}return!0};n(0,i=new Set(l.features.filter(M).map(P=>P.properties.scheme_reference))),n(7,d={area:0,route:0,crossing:0,other:0,totalLength:0});let A=P=>{var H,V;return!(!i.has(P.properties.scheme_reference)||N&&!((H=P.properties.name)!=null&&H.toLowerCase().includes(N))&&!((V=P.properties.description)!=null&&V.toLowerCase().includes(N)))};for(let P of l.features)A(P)?(delete P.properties.hide_while_editing,n(7,d[P.properties.intervention_type]++,d),P.geometry.type=="LineString"&&P.properties.length_meters&&n(7,d.totalLength+=P.properties.length_meters,d)):P.properties.hide_while_editing=!0;bt.set(l),n(7,d)}function y(D){a=D,n(2,a)}function S(D){c=D,n(3,c)}function T(){t=this.value,Ut.set(t)}const O=()=>Ot(Ut,t="",t);function E(D){u=D,n(1,u)}return r.$$set=D=>{"schemesToBeShown"in D&&n(0,i=D.schemesToBeShown),"show"in D&&n(1,u=D.show)},r.$$.update=()=>{r.$$.dirty&28&&_(t,a,c)},[i,u,a,c,t,s,f,d,y,S,T,O,E]}class ti extends q{constructor(e){super(),W(this,e,ei,xs,z,{schemesToBeShown:0,show:1})}}function ni(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ri(r){let e,n,t,l,o;return t=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ni]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data  Crown copyright and database right
  2023.`)},m(i,u){$(i,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(m(t.$$.fragment,i),o=!0)},o(i){g(t.$$.fragment,i),o=!1},d(i){i&&p(e),v(t)}}}class We extends q{constructor(e){super(),W(this,e,null,ri,z,{})}}function Jn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Yn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Qn(r){let e,n;return{c(){e=L("span"),n=w(`
    `),Te(e,"background",r[5]),Te(e,"width","100%"),Te(e,"border","1px solid black")},m(t,l){$(t,e,l),k(e,n)},p(t,l){l&1&&Te(e,"background",t[5])},d(t){t&&p(e)}}}function xn(r){let e,n=r[2]+"",t;return{c(){e=L("span"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&B(t,n)},d(l){l&&p(e)}}}function li(r){let e,n,t,l=Ge(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Qn(Yn(r,l,s));let i=Ge(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=xn(Jn(r,i,s));return{c(){e=L("div");for(let s=0;s<o.length;s+=1)o[s].c();n=C(),t=L("div");for(let s=0;s<u.length;s+=1)u[s].c();Te(e,"display","flex"),Te(t,"display","flex"),Te(t,"justify-content","space-between")},m(s,a){$(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(s,n,a),$(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=Ge(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Yn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Qn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=Ge(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Jn(s,i,f);u[f]?u[f].p(c,a):(u[f]=xn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:ee,o:ee,d(s){s&&(p(e),p(n),p(t)),St(o,s),St(u,s)}}}function oi(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Qe extends q{constructor(e){super(),W(this,e,oi,li,z,{colorScale:0,limits:1})}}function er(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function si(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ii(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ai(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fi(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ui(r){let e,n,t,l,o,i,u,s,a,f,c,d;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ii]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ai]},$$scope:{ctx:r}}}),f=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[fi]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),s=L("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(_,y){$(_,e,y),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(_,u,y),$(_,s,y),k(s,a),b(f,s,null),k(s,c),d=!0},p(_,y){const S={};y&65536&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const T={};y&65536&&(T.$$scope={dirty:y,ctx:_}),o.$set(T);const O={};y&65536&&(O.$$scope={dirty:y,ctx:_}),f.$set(O)},i(_){d||(m(t.$$.fragment,_),m(o.$$.fragment,_),m(f.$$.fragment,_),d=!0)},o(_){g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),d=!1},d(_){_&&(p(e),p(u),p(s)),v(t),v(o),v(f)}}}function ci(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ui]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function tr(r){let e,n;return e=new Qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $i(r){let e;return{c(){e=w("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _i(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gi(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y;return o=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[pi]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[mi]},$$scope:{ctx:r}}}),d=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[_i]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=C(),t=L("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=C(),f=L("p"),c=w("License: "),h(d.$$.fragment),_=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(S,T){$(S,e,T),$(S,n,T),$(S,t,T),k(t,l),b(o,t,null),k(t,i),b(u,t,null),k(t,s),$(S,a,T),$(S,f,T),k(f,c),b(d,f,null),k(f,_),y=!0},p(S,T){const O={};T&65536&&(O.$$scope={dirty:T,ctx:S}),o.$set(O);const E={};T&65536&&(E.$$scope={dirty:T,ctx:S}),u.$set(E);const D={};T&65536&&(D.$$scope={dirty:T,ctx:S}),d.$set(D)},i(S){y||(m(o.$$.fragment,S),m(u.$$.fragment,S),m(d.$$.fragment,S),y=!0)},o(S){g(o.$$.fragment,S),g(u.$$.fragment,S),g(d.$$.fragment,S),y=!1},d(S){S&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(d)}}}function di(r){let e,n,t;return n=new ae({props:{$$slots:{default:[gi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function nr(r){let e,n;return e=new Qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hi(r){let e;return{c(){e=w("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bi(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wi(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[bi]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[vi]},$$scope:{ctx:r}}}),s=new We({}),{c(){e=L("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function ki(r){let e,n,t;return n=new ae({props:{$$slots:{default:[wi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function rr(r){let e,n,t,l;return t=new Qe({props:{colorScale:r[4],limits:r[6]().map(Ii)}}),{c(){e=L("p"),e.textContent="(people per square kilometres)",n=C(),h(t.$$.fragment)},m(o,i){$(o,e,i),$(o,n,i),b(t,o,i),l=!0},p:ee,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function yi(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=L("p"),n=w("There are "),t=L("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){$(a,e,f),k(e,n),k(e,t),k(t,o),k(e,i),k(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&B(o,l),f&8192&&u!==(u=a[14]+"")&&B(s,u)},d(a){a&&p(e)}}}function Si(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=L("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=L("b"),s=w(u),a=w(`
          cars`)},m(f,c){$(f,e,c),k(e,n),k(e,l),k(e,o),k(e,i),k(i,s),k(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(l,t),c&8200&&u!==(u=f[15]+"")&&B(s,u)},d(f){f&&p(e)}}}function Oi(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=L("p"),n=L("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){$(f,e,c),k(e,n),k(n,l),k(n,o),k(e,i),k(e,s),k(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(l,t),c&8192&&u!==(u=f[14]+"")&&B(s,u)},d(f){f&&p(e)}}}function Ti(r){er(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?Oi:o[3]=="average_cars_per_household"?Si:yi}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){er(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Ci(r){let e,n;return e=new oe({props:{$$slots:{default:[Ti,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ai(r){let e,n,t,l;const o=[R(Ke),{sourceLayer:Ke},{paint:{"fill-color":we(["get",r[3]],r[6](),r[4]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ci]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ye({props:i}),e.$on("click",r[5]);const u=[R(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Y(o,[f&0&&ne(R(Ke)),f&0&&{sourceLayer:Ke},f&88&&{paint:{"fill-color":we(["get",a[3]],a[6](),a[4]),"fill-opacity":K(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&8?Y(u,[f&0&&ne(R(`${Ke}-outline`)),f&0&&{sourceLayer:Ke},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Li(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y;function S(A){r[7](A)}let T={id:"percent_households_with_car",$$slots:{right:[ci],default:[si]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new ie({props:T}),Z.push(()=>Q(e,"checked",S)),e.$on("change",r[8]);let O=r[3]=="percent_households_with_car"&&tr(r);function E(A){r[9](A)}let D={id:"average_cars_per_household",$$slots:{right:[di],default:[$i]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),o=new ie({props:D}),Z.push(()=>Q(o,"checked",E)),o.$on("change",r[10]);let F=r[3]=="average_cars_per_household"&&nr(r);function I(A){r[11](A)}let N={id:"population_density",$$slots:{right:[ki],default:[hi]},$$scope:{ctx:r}};r[2]!==void 0&&(N.checked=r[2]),a=new ie({props:N}),Z.push(()=>Q(a,"checked",I)),a.$on("change",r[12]);let M=r[3]=="population_density"&&rr(r);return _=new be({props:{url:`pmtiles://${ge()}/v1/${Ke}.pmtiles`,$$slots:{default:[Ai]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),O&&O.c(),l=C(),h(o.$$.fragment),u=C(),F&&F.c(),s=C(),h(a.$$.fragment),c=C(),M&&M.c(),d=C(),h(_.$$.fragment)},m(A,P){b(e,A,P),$(A,t,P),O&&O.m(A,P),$(A,l,P),b(o,A,P),$(A,u,P),F&&F.m(A,P),$(A,s,P),b(a,A,P),$(A,c,P),M&&M.m(A,P),$(A,d,P),b(_,A,P),y=!0},p(A,[P]){const H={};P&65536&&(H.$$scope={dirty:P,ctx:A}),!n&&P&1&&(n=!0,H.checked=A[0],x(()=>n=!1)),e.$set(H),A[3]=="percent_households_with_car"?O?(O.p(A,P),P&8&&m(O,1)):(O=tr(A),O.c(),m(O,1),O.m(l.parentNode,l)):O&&(ue(),g(O,1,1,()=>{O=null}),ce());const V={};P&65536&&(V.$$scope={dirty:P,ctx:A}),!i&&P&2&&(i=!0,V.checked=A[1],x(()=>i=!1)),o.$set(V),A[3]=="average_cars_per_household"?F?(F.p(A,P),P&8&&m(F,1)):(F=nr(A),F.c(),m(F,1),F.m(s.parentNode,s)):F&&(ue(),g(F,1,1,()=>{F=null}),ce());const j={};P&65536&&(j.$$scope={dirty:P,ctx:A}),!f&&P&4&&(f=!0,j.checked=A[2],x(()=>f=!1)),a.$set(j),A[3]=="population_density"?M?(M.p(A,P),P&8&&m(M,1)):(M=rr(A),M.c(),m(M,1),M.m(d.parentNode,d)):M&&(ue(),g(M,1,1,()=>{M=null}),ce());const U={};P&65544&&(U.$$scope={dirty:P,ctx:A}),_.$set(U)},i(A){y||(m(e.$$.fragment,A),m(O),m(o.$$.fragment,A),m(F),m(a.$$.fragment,A),m(M),m(_.$$.fragment,A),y=!0)},o(A){g(e.$$.fragment,A),g(O),g(o.$$.fragment,A),g(F),g(a.$$.fragment,A),g(M),g(_.$$.fragment,A),y=!1},d(A){A&&(p(t),p(l),p(u),p(s),p(c),p(d)),v(e,A),O&&O.d(A),v(o,A),F&&F.d(A),v(a,A),M&&M.d(A),v(_,A)}}}let Ke="census_output_areas";const Ii=r=>r.toLocaleString();function Pi(r,e,n){let t=te.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(T){let O=T.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${O}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${O}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function d(T){o=T,n(1,o)}const _=()=>{n(0,l=!1),n(2,i=!1)};function y(T){i=T,n(2,i)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,d,_,y,S]}class Mi extends q{constructor(e){super(),W(this,e,Pi,Li,z,{})}}function Ei(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ni(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fi(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Ni]},$$scope:{ctx:r}}}),i=new We({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Di(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Fi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ji(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Ri(r){let e,n;return e=new oe({props:{$$slots:{default:[ji,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bi(r){let e,n,t,l;const o=[R(ft),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ri]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ye({props:i}),e.$on("click",Ui);const u=[R(`${ft}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(R(ft)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(R(`${ft}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Hi(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ft,$$slots:{right:[Di],default:[Ei]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),Z.push(()=>Q(e,"checked",i)),l=new Nt({props:{data:`${ge()}/v1/${ft}.geojson`,$$slots:{default:[Bi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ft="combined_authorities";function Ui(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function zi(r,e,n){let t=te.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Gi extends q{constructor(e){super(),W(this,e,zi,Hi,z,{})}}function qi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(r){let e;return{c(){e=w(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xi(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Wi]},$$scope:{ctx:r}}}),o=new X({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Vi]},$$scope:{ctx:r}}}),s=new We({}),{c(){e=L("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Ki(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Xi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function lr(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zi(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,d=r[4].rank.toLocaleString()+"",_,y;return{c(){e=L("p"),t=w(n),l=w(` has an IMD score of
        `),o=L("b"),u=w(i),s=C(),a=L("p"),f=w("Rank: "),c=L("b"),_=w(d),y=w(`
        / 32,844 LSOAs`)},m(S,T){$(S,e,T),k(e,t),k(e,l),k(e,o),k(o,u),$(S,s,T),$(S,a,T),k(a,f),k(a,c),k(c,_),k(a,y)},p(S,T){T&16&&n!==(n=S[4].LSOA11CD+"")&&B(t,n),T&16&&i!==(i=S[4].score+"")&&B(u,i),T&16&&d!==(d=S[4].rank.toLocaleString()+"")&&B(_,d)},d(S){S&&(p(e),p(s),p(a))}}}function Ji(r){let e,n;return e=new oe({props:{$$slots:{default:[Zi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yi(r){let e,n,t,l;const o=[R(je),{sourceLayer:je},{paint:{"fill-color":we(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Ji]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ye({props:i});const u=[R(`${je}-outline`),{sourceLayer:je},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Y(o,[f&0&&ne(R(je)),f&0&&{sourceLayer:je},f&6&&{paint:{"fill-color":we(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":K(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&1?Y(u,[f&0&&ne(R(`${je}-outline`)),f&0&&{sourceLayer:je},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Qi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:je,$$slots:{right:[Ki],default:[qi]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&lr(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${je}.pmtiles`,$$slots:{default:[Yi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=lr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ue(),g(a,1,1,()=>{a=null}),ce());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let je="imd";function xi(r,e,n){let t=te.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class ea extends q{constructor(e){super(),W(this,e,xi,Qi,z,{})}}function ta(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function na(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ra(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[na]},$$scope:{ctx:r}}}),i=new We({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function la(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ra]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function oa(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function sa(r){let e,n;return e=new oe({props:{$$slots:{default:[oa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ia(r){let e,n,t,l;const o=[R(ut),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[sa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ye({props:i}),e.$on("click",fa);const u=[R(`${ut}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(R(ut)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(R(`${ut}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function aa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ut,$$slots:{right:[la],default:[ta]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),Z.push(()=>Q(e,"checked",i)),l=new Nt({props:{data:`${ge()}/v1/${ut}.geojson`,$$slots:{default:[ia]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ut="local_authority_districts";function fa(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function ua(r,e,n){let t=te.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ca extends q{constructor(e){super(),W(this,e,ua,aa,z,{})}}function $a(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function pa(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ma(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _a(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ga(r){let e;return{c(){e=w("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function da(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ha(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y,S,T,O,E,D,F,I,N;return t=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[pa]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ma]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[_a]},$$scope:{ctx:r}}}),_=new X({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ga]},$$scope:{ctx:r}}}),E=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[da]},$$scope:{ctx:r}}}),I=new We({}),{c(){e=L("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=C(),f=L("p"),c=L("strong"),d=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(_.$$.fragment),y=w(" to get more details."),S=C(),T=L("p"),O=w("Data from ONS Geography via "),h(E.$$.fragment),D=w(", as of November 2022."),F=C(),h(I.$$.fragment)},m(M,A){$(M,e,A),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),b(u,e,null),k(e,s),$(M,a,A),$(M,f,A),k(f,c),k(c,d),b(_,c,null),k(c,y),$(M,S,A),$(M,T,A),k(T,O),b(E,T,null),k(T,D),$(M,F,A),b(I,M,A),N=!0},p(M,A){const P={};A&16&&(P.$$scope={dirty:A,ctx:M}),t.$set(P);const H={};A&16&&(H.$$scope={dirty:A,ctx:M}),o.$set(H);const V={};A&16&&(V.$$scope={dirty:A,ctx:M}),u.$set(V);const j={};A&16&&(j.$$scope={dirty:A,ctx:M}),_.$set(j);const U={};A&16&&(U.$$scope={dirty:A,ctx:M}),E.$set(U)},i(M){N||(m(t.$$.fragment,M),m(o.$$.fragment,M),m(u.$$.fragment,M),m(_.$$.fragment,M),m(E.$$.fragment,M),m(I.$$.fragment,M),N=!0)},o(M){g(t.$$.fragment,M),g(o.$$.fragment,M),g(u.$$.fragment,M),g(_.$$.fragment,M),g(E.$$.fragment,M),g(I.$$.fragment,M),N=!1},d(M){M&&(p(e),p(a),p(f),p(S),p(T),p(F)),v(t),v(o),v(u),v(_),v(E),v(I,M)}}}function ba(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ha]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function va(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function wa(r){let e,n;return e=new oe({props:{$$slots:{default:[va,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ka(r){let e,n,t,l;const o=[R(Re),{sourceLayer:Re},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[wa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ye({props:i});const u=[R(`${Re}-outline`),{sourceLayer:Re},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(R(Re)),f&0&&{sourceLayer:Re},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(R(`${Re}-outline`)),f&0&&{sourceLayer:Re},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ya(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Re,$$slots:{right:[ba],default:[$a]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),Z.push(()=>Q(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${Re}.pmtiles`,$$slots:{default:[ka]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Re="local_planning_authorities";function Sa(r,e,n){let t=te.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Oa extends q{constructor(e){super(),W(this,e,Sa,ya,z,{})}}function Ta(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ca(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Aa(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Ca]},$$scope:{ctx:r}}}),i=new We({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function La(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Aa]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ia(r){let e,n=r[3].Name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&B(t,n)},d(l){l&&p(e)}}}function Pa(r){let e,n;return e=new oe({props:{$$slots:{default:[Ia,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ma(r){let e,n,t,l;const o=[R(Be),{sourceLayer:Be},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Pa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ye({props:i}),e.$on("click",Na);const u=[R(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(R(Be)),f&0&&{sourceLayer:Be},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(R(`${Be}-outline`)),f&0&&{sourceLayer:Be},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ea(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Be,$$slots:{right:[La],default:[Ta]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),Z.push(()=>Q(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${Be}.pmtiles`,$$slots:{default:[Ma]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Be="parliamentary_constituencies";function Na(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Fa(r,e,n){let t=te.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Da extends q{constructor(e){super(),W(this,e,Fa,Ea,z,{})}}function ja(r){let e;return{c(){e=w("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ra(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ba(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ha(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ua(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y,S,T;return t=new X({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ra]},$$scope:{ctx:r}}}),f=new X({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Ba]},$$scope:{ctx:r}}}),d=new X({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Ha]},$$scope:{ctx:r}}}),S=new We({}),{c(){e=L("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        gm
        `),o=L("sup"),o.textContent="3",i=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=C(),s=L("p"),a=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(d.$$.fragment),_=w("."),y=C(),h(S.$$.fragment)},m(O,E){$(O,e,E),k(e,n),b(t,e,null),k(e,l),k(e,o),k(e,i),$(O,u,E),$(O,s,E),k(s,a),b(f,s,null),k(s,c),b(d,s,null),k(s,_),$(O,y,E),b(S,O,E),T=!0},p(O,E){const D={};E&2048&&(D.$$scope={dirty:E,ctx:O}),t.$set(D);const F={};E&2048&&(F.$$scope={dirty:E,ctx:O}),f.$set(F);const I={};E&2048&&(I.$$scope={dirty:E,ctx:O}),d.$set(I)},i(O){T||(m(t.$$.fragment,O),m(f.$$.fragment,O),m(d.$$.fragment,O),m(S.$$.fragment,O),T=!0)},o(O){g(t.$$.fragment,O),g(f.$$.fragment,O),g(d.$$.fragment,O),g(S.$$.fragment,O),T=!1},d(O){O&&(p(e),p(u),p(s),p(y)),v(t),v(f),v(d),v(S,O)}}}function za(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ua]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function or(r){let e,n,t,l,o=r[3](r[0])+"",i,u,s,a,f,c,d,_,y,S,T,O,E;function D(A){r[7](A)}let F={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(F.value=r[0]),e=new Tt({props:F}),Z.push(()=>Q(e,"value",D));const I=[qa,Ga],N=[];function M(A,P){return A[0]=="Noise"?0:1}return _=M(r),y=N[_]=I[_](r),{c(){h(e.$$.fragment),t=C(),l=L("p"),i=w(o),u=C(),s=L("div"),a=L("label"),f=w(`Opacity
      `),c=L("input"),d=C(),y.c(),S=Ae(),G(c,"type","range"),G(c,"min","0"),G(c,"max","100")},m(A,P){b(e,A,P),$(A,t,P),$(A,l,P),k(l,i),$(A,u,P),$(A,s,P),k(s,a),k(a,f),k(a,c),Gt(c,r[2]),$(A,d,P),N[_].m(A,P),$(A,S,P),T=!0,O||(E=[yt(c,"change",r[8]),yt(c,"input",r[8])],O=!0)},p(A,P){const H={};!n&&P&1&&(n=!0,H.value=A[0],x(()=>n=!1)),e.$set(H),(!T||P&1)&&o!==(o=A[3](A[0])+"")&&B(i,o),P&4&&Gt(c,A[2]);let V=_;_=M(A),_===V?N[_].p(A,P):(ue(),g(N[V],1,1,()=>{N[V]=null}),ce(),y=N[_],y?y.p(A,P):(y=N[_]=I[_](A),y.c()),m(y,1),y.m(S.parentNode,S))},i(A){T||(m(e.$$.fragment,A),m(y),T=!0)},o(A){g(e.$$.fragment,A),g(y),T=!1},d(A){A&&(p(t),p(l),p(u),p(s),p(d),p(S)),v(e,A),N[_].d(A),O=!1,el(E)}}}function Ga(r){let e,n,t;return{c(){e=L("img"),bn(e.src,n=r[5](r[0]))||G(e,"src",n),G(e,"width",150),G(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!bn(e.src,n=l[5](l[0]))&&G(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&G(e,"alt",t)},i:ee,o:ee,d(l){l&&p(e)}}}function qa(r){let e,n;return e=new Qe({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wa(r){let e,n;const t=[R("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new pl({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&6?Y(t,[t[0],i&4&&{paint:{"raster-opacity":o[2]/100}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Va(r){let e,n,t,l,o,i;function u(f){r[6](f)}let s={id:"pollution",$$slots:{right:[za],default:[ja]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new ie({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[1]&&or(r);return o=new Ll({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Wa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],x(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=or(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ue(),g(a,1,1,()=>{a=null}),ce());const _={};c&1&&(_.tiles=[f[4](f[0])]),c&2054&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}function Xa(r,e,n){let t,l=!1,o=50,i="PM25_viridis";function u(){return i=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${i}/MapServer/WMSServer`}function s(y){return t[1]}function a(y){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${S}`}function f(y){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${S}`}function c(y){l=y,n(1,l)}function d(y){i=y,n(0,i)}function _(){o=tl(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[i])},[i,l,o,s,a,f,c,d,_]}class Ka extends q{constructor(e){super(),W(this,e,Xa,Va,z,{})}}function Za(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ja(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ya(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ja]},$$scope:{ctx:r}}}),i=new We({}),{c(){e=L("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Qa(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ya]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function xa(r){let e,n=r[3].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function ef(r){let e,n;return e=new oe({props:{$$slots:{default:[xa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tf(r){let e,n,t,l;const o=[R(He),{sourceLayer:He},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ef]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=J(i,o[a]);e=new Ye({props:i}),e.$on("click",rf);const u=[R(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=J(s,u[a]);return t=new he({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(R(He)),f&0&&{sourceLayer:He},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(R(`${He}-outline`)),f&0&&{sourceLayer:He},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function nf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:He,$$slots:{right:[Qa],default:[Za]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),Z.push(()=>Q(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${He}.pmtiles`,$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let He="wards";function rf(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function lf(r,e,n){let t=te.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class of extends q{constructor(e){super(),W(this,e,lf,nf,z,{})}}function sf(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function af(r){let e,n,t,l;return t=new X({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[sf]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){$(o,e,i),k(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&p(e),v(t)}}}class rt extends q{constructor(e){super(),W(this,e,null,af,z,{})}}function ff(r){let e,n,t;return e=new ke({props:{color:te.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function uf(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(r){let e,n,t,l,o,i,u,s,a;return o=new X({props:{href:"https://gtfs.org",$$slots:{default:[uf]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=L("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=C(),t=L("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),k(t,l),b(o,t,null),k(t,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&8&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(s,f)}}}function $f(r){let e,n,t;return n=new ae({props:{$$slots:{default:[cf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function pf(r){let e;return{c(){e=L("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mf(r){let e;return{c(){e=L("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _f(r){let e;function n(o,i){return o[2].has_bus_lane?mf:pf}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function gf(r){let e,n;return e=new oe({props:{$$slots:{default:[_f,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function df(r){let e,n;const t=[R(ct),{sourceLayer:ct},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],te.bus_route_with_lane,te.bus_route_without_lane],"line-width":5,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[gf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Y(t,[i&0&&ne(R(ct)),i&0&&{sourceLayer:ct},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function hf(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:ct,$$slots:{right:[$f],default:[ff]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),Z.push(()=>Q(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${ct}.pmtiles`,$$slots:{default:[df]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ct="bus_routes";function bf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class vf extends q{constructor(e){super(),W(this,e,bf,hf,z,{})}}function sr(r){const e=Af(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function ir(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function wf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kf(r){let e,n,t,l,o,i,u,s;return u=new rt({}),{c(){e=L("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=C(),t=L("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=C(),o=L("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=C(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,l,f),$(a,o,f),$(a,i,f),b(u,a,f),s=!0},p:ee,i(a){s||(m(u.$$.fragment,a),s=!0)},o(a){g(u.$$.fragment,a),s=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(i)),v(u,a)}}}function yf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[kf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ar(r){let e,n,t=Ge(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=fr(ir(r,t,i));const o=i=>g(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Ae()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);$(i,e,u),n=!0},p(i,u){if(u&2){t=Ge(i[1]);let s;for(s=0;s<t.length;s+=1){const a=ir(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=fr(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(ue(),s=t.length;s<l.length;s+=1)o(s);ce()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(i){i&&p(e),St(l,i)}}}function fr(r){let e,n,t,l=r[7]+"",o,i,u;return n=new ke({props:{color:r[8]}}),{c(){e=L("div"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){$(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p:ee,i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){g(n.$$.fragment,s),u=!1},d(s){s&&p(e),v(n)}}}function Sf(r){sr(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,d,_=r[6]+"",y;return{c(){e=L("h2"),t=w(n),l=C(),o=L("p"),i=w("Direction: "),u=L("b"),a=C(),f=L("p"),c=w("Width: "),d=L("b"),y=w(_)},m(S,T){$(S,e,T),k(e,t),$(S,l,T),$(S,o,T),k(o,i),k(o,u),u.innerHTML=s,$(S,a,T),$(S,f,T),k(f,c),k(f,d),k(d,y)},p(S,T){sr(S),T&8&&n!==(n=S[4]+"")&&B(t,n),T&8&&s!==(s=S[5]+"")&&(u.innerHTML=s),T&8&&_!==(_=S[6]+"")&&B(y,_)},d(S){S&&(p(e),p(l),p(o),p(a),p(f))}}}function Of(r){let e,n;return e=new oe({props:{$$slots:{default:[Sf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tf(r){let e,n;const t=[R($t),{sourceLayer:$t},{paint:{"line-color":zt(["get","kind"],{track:te.cycle_paths.track,lane:te.cycle_paths.lane,shared_use_segregated:te.cycle_paths.shared_use_segregated,shared_use_unsegregated:te.cycle_paths.shared_use_unsegregated},"red"),"line-width":Je,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Of]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new he({props:l}),e.$on("click",Lf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Y(t,[i&0&&ne(R($t)),i&0&&{sourceLayer:$t},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Cf(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:$t,$$slots:{right:[yf],default:[wf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&ar(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${$t}.pmtiles`,$$slots:{default:[Tf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=ar(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ue(),g(a,1,1,()=>{a=null}),ce());const _={};c&2049&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let $t="cycle_paths";function Af(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Lf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function If(r,e,n){let t=[["Separated tracks",te.cycle_paths.track],["Unprotected lanes",te.cycle_paths.lane],["Shared-use (segregated)",te.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",te.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Pf extends q{constructor(e){super(),W(this,e,If,Cf,z,{})}}function Mf(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ef(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nf(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Ef]},$$scope:{ctx:r}}}),i=new We({}),{c(){e=L("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ff(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Nf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Df(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&B(t,n)},d(l){l&&p(e)}}}function jf(r){let e,n;return e=new oe({props:{$$slots:{default:[Df,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rf(r){let e,n;const t=[R(pt),{sourceLayer:pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[jf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(R(pt)),i&0&&{sourceLayer:pt},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Bf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:pt,$$slots:{right:[Ff],default:[Mf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),Z.push(()=>Q(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${pt}.pmtiles`,$$slots:{default:[Rf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let pt="mrn";function Hf(r,e,n){let t=te.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Uf extends q{constructor(e){super(),W(this,e,Hf,Bf,z,{})}}function zf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gf(r){let e;return{c(){e=w("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new X({props:{href:"https://www.pct.bike",$$slots:{default:[Gf]},$$scope:{ctx:r}}}),a=new X({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[qf]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=C(),t=L("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=C(),o=L("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(d,_){$(d,e,_),$(d,n,_),$(d,t,_),$(d,l,_),$(d,o,_),k(o,i),b(u,o,null),k(o,s),b(a,o,null),k(o,f),c=!0},p(d,_){const y={};_&1024&&(y.$$scope={dirty:_,ctx:d}),u.$set(y);const S={};_&1024&&(S.$$scope={dirty:_,ctx:d}),a.$set(S)},i(d){c||(m(u.$$.fragment,d),m(a.$$.fragment,d),c=!0)},o(d){g(u.$$.fragment,d),g(a.$$.fragment,d),c=!1},d(d){d&&(p(e),p(n),p(t),p(l),p(o)),v(u),v(a)}}}function Vf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Wf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ur(r){let e,n,t,l,o,i,u,s;e=new Qe({props:{colorScale:r[3],limits:r[4]}});function a(_){r[7](_)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new Ir({props:f}),Z.push(()=>Q(t,"value",a));function c(_){r[8](_)}let d={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(d.value=r[1]),i=new Tt({props:d}),Z.push(()=>Q(i,"value",c)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),o=C(),h(i.$$.fragment)},m(_,y){b(e,_,y),$(_,n,y),b(t,_,y),$(_,o,y),b(i,_,y),s=!0},p(_,y){const S={};!l&&y&1&&(l=!0,S.value=_[0],x(()=>l=!1)),t.$set(S);const T={};!u&&y&2&&(u=!0,T.value=_[1],x(()=>u=!1)),i.$set(T)},i(_){s||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(i.$$.fragment,_),s=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(i.$$.fragment,_),s=!1},d(_){_&&(p(n),p(o)),v(e,_),v(t,_),v(i,_)}}}function Xf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new pn(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Kf(r){let e,n;return e=new oe({props:{$$slots:{default:[Xf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zf(r){let e,n;const t=[R(Ue),{sourceLayer:Ue},{paint:{"line-color":we(["get",r[1]],r[4],r[3]),"line-width":Je,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ue?"visible":"none"}}];let l={$$slots:{default:[Kf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Y(t,[i&0&&ne(R(Ue)),i&0&&{sourceLayer:Ue},i&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Je,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ue?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Jf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new pn(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Yf(r){let e,n;return e=new oe({props:{$$slots:{default:[Jf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qf(r){let e,n;const t=[R(lt),{sourceLayer:lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",r[1]],r[4],r[3]),"line-width":Je,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==lt?"visible":"none"}}];let l={$$slots:{default:[Yf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Y(t,[i&0&&ne(R(lt)),i&0&&{sourceLayer:lt},t[2],t[3],i&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Je,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==lt?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function xf(r){let e,n,t,l,o,i,u,s;function a(d){r[6](d)}let f={id:Ue,$$slots:{right:[Vf],default:[zf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new ie({props:f}),Z.push(()=>Q(e,"checked",a));let c=r[2]&&ur(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${Ue}.pmtiles`,$$slots:{default:[Zf]},$$scope:{ctx:r}}}),u=new be({props:{url:`pmtiles://${ge()}/v1/${lt}.pmtiles`,$$slots:{default:[Qf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),c&&c.c(),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(d,_){b(e,d,_),$(d,t,_),c&&c.m(d,_),$(d,l,_),b(o,d,_),$(d,i,_),b(u,d,_),s=!0},p(d,[_]){const y={};_&1024&&(y.$$scope={dirty:_,ctx:d}),!n&&_&4&&(n=!0,y.checked=d[2],x(()=>n=!1)),e.$set(y),d[2]?c?(c.p(d,_),_&4&&m(c,1)):(c=ur(d),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(ue(),g(c,1,1,()=>{c=null}),ce());const S={};_&1031&&(S.$$scope={dirty:_,ctx:d}),o.$set(S);const T={};_&1031&&(T.$$scope={dirty:_,ctx:d}),u.$set(T)},i(d){s||(m(e.$$.fragment,d),m(c),m(o.$$.fragment,d),m(u.$$.fragment,d),s=!0)},o(d){g(e.$$.fragment,d),g(c),g(o.$$.fragment,d),g(u.$$.fragment,d),s=!1},d(d){d&&(p(t),p(l),p(i)),v(e,d),c&&c.d(d),v(o,d),v(u,d)}}}let Ue="pct_commute",lt="pct_school";function eu(r,e,n){let t=te.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ue,i="baseline",u=!1;function s(d){let _=d.baseline,y=d.gov_target,S=d.go_dutch,T=`<h2>Trip purpose: ${o==Ue?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)T+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let O=(y/_).toFixed(1),E=(S/_).toFixed(1);T+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${O}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${E}x</b> of baseline)</p>`}return T}function a(d){u=d,n(2,u)}function f(d){o=d,n(0,o)}function c(d){i=d,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class tu extends q{constructor(e){super(),W(this,e,eu,xf,z,{})}}function nu(r){let e;return{c(){e=w("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ru(r){let e;return{c(){e=w("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ou(r){let e,n,t,l,o,i,u,s,a,f,c,d;return t=new X({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[ru]},$$scope:{ctx:r}}}),f=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=C(),i=L("p"),i.textContent="Data valid as of 1 September, 2023",u=C(),s=L("p"),a=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(_,y){$(_,e,y),k(e,n),b(t,e,null),k(e,l),$(_,o,y),$(_,i,y),$(_,u,y),$(_,s,y),k(s,a),b(f,s,null),k(s,c),d=!0},p(_,y){const S={};y&256&&(S.$$scope={dirty:y,ctx:_}),t.$set(S);const T={};y&256&&(T.$$scope={dirty:y,ctx:_}),f.$set(T)},i(_){d||(m(t.$$.fragment,_),m(f.$$.fragment,_),d=!0)},o(_){g(t.$$.fragment,_),g(f.$$.fragment,_),d=!1},d(_){_&&(p(e),p(o),p(i),p(u),p(s)),v(t),v(f)}}}function su(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ou]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function cr(r){let e,n,t,l,o;e=new Qe({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new Ir({props:u}),Z.push(()=>Q(t,"value",i)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],x(()=>l=!1)),t.$set(f)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),o=!1},d(s){s&&p(n),v(e,s),v(t,s)}}}function iu(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,d=r[4][r[7].highest_description]+"",_,y;return{c(){e=L("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=C(),u=L("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),_=w(d),y=w(")")},m(S,T){$(S,e,T),k(e,n),k(e,l),k(e,o),$(S,i,T),$(S,u,T),k(u,s),k(u,f),k(u,c),k(u,_),k(u,y)},p(S,T){T&128&&t!==(t=S[7].indicative_mph+"")&&B(l,t),T&128&&a!==(a=S[7].highest_mph+"")&&B(f,a),T&128&&d!==(d=S[4][S[7].highest_description]+"")&&B(_,d)},d(S){S&&(p(e),p(i),p(u))}}}function au(r){let e,n;return e=new oe({props:{$$slots:{default:[iu,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fu(r){let e,n;const t=[R(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",r[0]],r[3],r[2]),"line-width":Je,"line-opacity":K(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[au]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Y(t,[i&0&&ne(R(mt)),i&0&&{sourceLayer:mt},t[2],t[3],i&13&&{paint:{"line-color":we(["get",o[0]],o[3],o[2]),"line-width":Je,"line-opacity":K(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function uu(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:mt,$$slots:{right:[su],default:[nu]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new ie({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[1]&&cr(r);return o=new be({props:{url:`pmtiles://${mn()}/v1/${mt}.pmtiles`,$$slots:{default:[fu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&256&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],x(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=cr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ue(),g(a,1,1,()=>{a=null}),ce());const _={};c&259&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let mt="road_speeds";function cu(r,e,n){let t=te.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class $u extends q{constructor(e){super(),W(this,e,cu,uu,z,{})}}function pu(r){let e;return{c(){e=w("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _u(r){let e,n,t,l,o,i,u,s,a;return u=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[mu]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=C(),t=L("p"),t.textContent="Data valid as of 1 September, 2023",l=C(),o=L("p"),i=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),k(o,i),b(u,o,null),k(o,s),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),u.$set(d)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),v(u)}}}function gu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[_u]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function $r(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function du(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",d,_;return{c(){e=L("p"),n=w("Average width: "),t=L("b"),o=w(l),i=w(`
        meters`),u=C(),s=L("p"),a=w("Minimum width: "),f=L("b"),d=w(c),_=w(`
        meters`)},m(y,S){$(y,e,S),k(e,n),k(e,t),k(t,o),k(e,i),$(y,u,S),$(y,s,S),k(s,a),k(s,f),k(f,d),k(s,_)},p(y,S){S&16&&l!==(l=y[4].average+"")&&B(o,l),S&16&&c!==(c=y[4].minimum+"")&&B(d,c)},d(y){y&&(p(e),p(u),p(s))}}}function hu(r){let e,n;return e=new oe({props:{$$slots:{default:[du,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bu(r){let e,n;const t=[R(_t),{sourceLayer:_t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],r[2],r[1]),"line-width":Je,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[hu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new he({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Y(t,[i&0&&ne(R(_t)),i&0&&{sourceLayer:_t},t[2],t[3],i&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Je,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vu(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:_t,$$slots:{right:[gu],default:[pu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&$r(r);return o=new be({props:{url:`pmtiles://${mn()}/v1/${_t}.pmtiles`,$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=$r(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ue(),g(a,1,1,()=>{a=null}),ce());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let _t="road_widths";function wu(r,e,n){let t=te.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class ku extends q{constructor(e){super(),W(this,e,wu,vu,z,{})}}function yu(r){let e,n,t;return{c(){e=L("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=yt(e,"change",r[5]),n=!0)},p:ee,d(l){l&&p(e),r[7](null),n=!1,t()}}}function pr(r){let e,n;return e=new Ft({props:{small:!0,$$slots:{default:[Ou]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Su(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new ke({props:{color:wt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),$(u,n,s),$(u,l,s),$(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&B(l,t)},i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){g(e.$$.fragment,u),i=!1},d(u){u&&(p(n),p(l),p(o)),v(e,u)}}}function Ou(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[Su]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ie({props:o}),Z.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){g(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Tu(r){let e,n,t,l,o,i;e=new Lr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[yu]},$$scope:{ctx:r}}}),t=new Pr({props:{errorMessage:r[3]}});let u=r[2]>0&&pr(r);return{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),u&&u.c(),o=Ae()},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),u&&u.m(s,a),$(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&m(u,1)):(u=pr(s),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(ue(),g(u,1,1,()=>{u=null}),ce())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(u),i=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(u),i=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),u&&u.d(s)}}}function Cu(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,d,_,y,S=r[10].notes+"",T,O,E,D,F,I,N,M=r[10].id+"",A,P,H,V,j,U=(r[10].inspector??"???")+"",$e,Ne,de,Ve=r[10].submission_time+"",pe,fe,re,xe,Ce,Le=r[10].scheme_reference+"",Fe,le,_e,De=r[10].current_design_stage+"",Xe;return{c(){e=L("div"),n=L("h2"),l=w(t),o=C(),i=L("p"),u=L("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=C(),d=L("p"),_=L("u"),_.textContent="Notes",y=w(`
          : `),T=w(S),O=C(),E=L("hr"),D=C(),F=L("p"),I=w("Critical issue ID: "),N=L("b"),A=w(M),P=C(),H=L("p"),V=w("Submitted by "),j=L("b"),$e=w(U),Ne=w(`
          at
          `),de=L("b"),pe=w(Ve),fe=C(),re=L("p"),xe=w("For scheme "),Ce=L("b"),Fe=w(Le),le=w(`
          in stage
          `),_e=L("b"),Xe=w(De),Te(e,"max-width","30vw")},m(ve,ye){$(ve,e,ye),k(e,n),k(n,l),k(e,o),k(e,i),k(i,u),k(i,s),k(i,f),k(e,c),k(e,d),k(d,_),k(d,y),k(d,T),k(e,O),k(e,E),k(e,D),k(e,F),k(F,I),k(F,N),k(N,A),k(e,P),k(e,H),k(H,V),k(H,j),k(j,$e),k(H,Ne),k(H,de),k(de,pe),k(e,fe),k(e,re),k(re,xe),k(re,Ce),k(Ce,Fe),k(re,le),k(re,_e),k(_e,Xe)},p(ve,ye){ye&1024&&t!==(t=ve[10].critical_type+"")&&B(l,t),ye&1024&&a!==(a=ve[10].location_description+"")&&B(f,a),ye&1024&&S!==(S=ve[10].notes+"")&&B(T,S),ye&1024&&M!==(M=ve[10].id+"")&&B(A,M),ye&1024&&U!==(U=(ve[10].inspector??"???")+"")&&B($e,U),ye&1024&&Ve!==(Ve=ve[10].submission_time+"")&&B(pe,Ve),ye&1024&&Le!==(Le=ve[10].scheme_reference+"")&&B(Fe,Le),ye&1024&&De!==(De=ve[10].current_design_stage+"")&&B(Xe,De)},d(ve){ve&&p(e)}}}function Au(r){let e,n;return e=new oe({props:{$$slots:{default:[Cu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lu(r){let e,n,t,l,o,i;const u=[R(`${tt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let _=0;_<u.length;_+=1)s=J(s,u[_]);e=new nt({props:s}),e.$on("click",r[6]);const a=[R(`${tt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let _=0;_<a.length;_+=1)f=J(f,a[_]);t=new El({props:f});const c=[R(`${tt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":wt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let d={$$slots:{default:[Au]},$$scope:{ctx:r}};for(let _=0;_<c.length;_+=1)d=J(d,c[_]);return o=new nt({props:d}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment)},m(_,y){b(e,_,y),$(_,n,y),b(t,_,y),$(_,l,y),b(o,_,y),i=!0},p(_,y){const S=y&2?Y(u,[y&0&&ne(R(`${tt}-clusters`)),u[1],y&0&&{paint:{"circle-color":wt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:_[1]?"visible":"none"}},u[4]]):{};e.$set(S);const T=y&2?Y(a,[y&0&&ne(R(`${tt}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:_[1]?"visible":"none"}}]):{};t.$set(T);const O=y&2?Y(c,[y&0&&ne(R(`${tt}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":wt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:_[1]?"visible":"none"}}]):{};y&2048&&(O.$$scope={dirty:y,ctx:_}),o.$set(O)},i(_){i||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(o.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),i=!1},d(_){_&&(p(n),p(l)),v(e,_),v(t,_),v(o,_)}}}function Iu(r){let e,n,t,l;return e=new Me({props:{label:"Critical Issues",$$slots:{default:[Tu]},$$scope:{ctx:r}}}),t=new Nt({props:{id:tt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Lu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let tt="criticals",wt="red";function Pu(r,e,n){let t;me(r,cn,_=>n(9,t=_));let l,o=!0,i=0,u="",s=nl();async function a(_){try{n(4,s=await qs(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f(_){t.getSource(tt).getClusterExpansionZoom(_.detail.features[0].properties.cluster_id,(y,S)=>{y||t.easeTo({center:_.detail.features[0].geometry.coordinates,zoom:S})})}function c(_){Z[_?"unshift":"push"](()=>{l=_,n(0,l)})}function d(_){o=_,n(1,o)}return[l,o,i,u,s,a,f,c,d]}class Mu extends q{constructor(e){super(),W(this,e,Pu,Iu,z,{})}}function Eu(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Nu(r){let e;return{c(){e=w("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Nu]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Du(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ju(r){let e,n=mr(r[3])+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=mr(l[3])+"")&&B(t,n)},d(l){l&&p(e)}}}function Ru(r){let e,n;return e=new oe({props:{$$slots:{default:[ju,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bu(r){let e,n;const t=[R(gt),{sourceLayer:gt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Ru]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new nt({props:l}),e.$on("click",Uu),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(R(gt)),i&0&&{sourceLayer:gt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Hu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:gt,$$slots:{right:[Du],default:[Eu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),Z.push(()=>Q(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${gt}.pmtiles`,$$slots:{default:[Bu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let gt="crossings";function mr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Uu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function zu(r,e,n){let t=te.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Gu extends q{constructor(e){super(),W(this,e,zu,Hu,z,{})}}function qu(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Wu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vu(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Wu]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=L("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Xu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Vu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ku(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=L("p"),n=w("Capacity: "),t=L("b"),o=w(l)},m(i,u){$(i,e,u),k(e,n),k(e,t),k(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&B(o,l)},d(i){i&&p(e)}}}function Zu(r){let e,n;return e=new oe({props:{$$slots:{default:[Ku,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ju(r){let e,n;const t=[R(dt),{sourceLayer:dt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Zu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new nt({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(R(dt)),i&0&&{sourceLayer:dt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:dt,$$slots:{right:[Xu],default:[qu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),Z.push(()=>Q(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${dt}.pmtiles`,$$slots:{default:[Ju]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let dt="cycle_parking";function Qu(r,e,n){let t=te.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class xu extends q{constructor(e){super(),W(this,e,Qu,Yu,z,{})}}function ec(r){let e,n,t,l;return e=new ke({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=C(),t=w(r[2])},m(o,i){b(e,o,i),$(o,n,i),$(o,t,i),l=!0},p(o,i){(!l||i&4)&&B(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function tc(r){let e;const n=r[5].default,t=It(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Pt(t,n,l,l[7],e?Et(n,l[7],o,null):Mt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function nc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[tc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function rc(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&B(t,n)},d(l){l&&p(e)}}}function lc(r){let e,n;return e=new oe({props:{$$slots:{default:[rc,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oc(r){let e,n;const t=[R(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":K(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[lc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new Ye({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Y(t,[i&1&&ne(R(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":K(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function sc(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[nc],default:[ec]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new ie({props:u}),Z.push(()=>Q(e,"checked",i)),l=new be({props:{url:`pmtiles://${ge()}/v1/${r[0]}.pmtiles`,$$slots:{default:[oc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],x(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${ge()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function ic(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=te[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class gn extends q{constructor(e){super(),W(this,e,ic,sc,z,{name:0,singularNoun:1,pluralNoun:2})}}function ac(r){let e;return{c(){e=w("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fc(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[ac]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function uc(r){let e,n;return e=new gn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class cc extends q{constructor(e){super(),W(this,e,null,uc,z,{})}}function $c(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function pc(r){let e;return{c(){e=w("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mc(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[pc]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function _c(r){let e,n,t;return n=new ae({props:{$$slots:{default:[mc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function gc(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&B(t,n)},d(l){l&&p(e)}}}function dc(r){let e,n;return e=new oe({props:{$$slots:{default:[gc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hc(r){let e,n;const t=[R(Vt),{paint:{"circle-color":r[1],"circle-radius":qt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[dc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new nt({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(R(Vt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":qt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function bc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Vt,$$slots:{right:[_c],default:[$c]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),Z.push(()=>Q(e,"checked",i)),l=new Nt({props:{data:`${ge()}/v1/${Vt}.geojson`,$$slots:{default:[hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Vt="railway_stations";function vc(r,e,n){let t=te.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class wc extends q{constructor(e){super(),W(this,e,vc,bc,z,{})}}function kc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yc(r){let e,n,t,l,o,i,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[kc]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Sc(r){let e,n;return e=new gn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[yc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Oc extends q{constructor(e){super(),W(this,e,null,Sc,z,{})}}function Tc(r){let e;return{c(){e=w("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cc(r){let e;return{c(){e=w("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ac(r){let e,n,t,l,o,i,u,s,a;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Tc]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=L("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Lc(r){let e,n;return e=new gn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Ic extends q{constructor(e){super(),W(this,e,null,Lc,z,{})}}function Pc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ec(r){let e;return{c(){e=w("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nc(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new X({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Mc]},$$scope:{ctx:r}}}),o=new X({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Ec]},$$scope:{ctx:r}}}),f=new We({}),{c(){e=L("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=C(),s=L("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=C(),h(f.$$.fragment)},m(d,_){$(d,e,_),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(d,u,_),$(d,s,_),$(d,a,_),b(f,d,_),c=!0},p(d,_){const y={};_&64&&(y.$$scope={dirty:_,ctx:d}),t.$set(y);const S={};_&64&&(S.$$scope={dirty:_,ctx:d}),o.$set(S)},i(d){c||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),c=!0)},o(d){g(t.$$.fragment,d),g(o.$$.fragment,d),g(f.$$.fragment,d),c=!1},d(d){d&&(p(e),p(u),p(s),p(a)),v(t),v(o),v(f,d)}}}function Fc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Nc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function _r(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Dc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,d,_,y=r[5].pedal_cycles_2022.toLocaleString()+"",S,T,O,E,D,F=r[5].method+"",I;return{c(){e=L("h2"),t=w(n),l=C(),o=L("p"),i=w("Total motor vehicles (2022 AADF): "),u=L("b"),a=w(s),f=C(),c=L("p"),d=w("Total pedal cycles (2022 AADF): "),_=L("b"),S=w(y),T=C(),O=L("p"),E=w("Count method: "),D=L("b"),I=w(F)},m(N,M){$(N,e,M),k(e,t),$(N,l,M),$(N,o,M),k(o,i),k(o,u),k(u,a),$(N,f,M),$(N,c,M),k(c,d),k(c,_),k(_,S),$(N,T,M),$(N,O,M),k(O,E),k(O,D),k(D,I)},p(N,M){M&32&&n!==(n=N[5].location+"")&&B(t,n),M&32&&s!==(s=N[5].motor_vehicles_2022.toLocaleString()+"")&&B(a,s),M&32&&y!==(y=N[5].pedal_cycles_2022.toLocaleString()+"")&&B(S,y),M&32&&F!==(F=N[5].method+"")&&B(I,F)},d(N){N&&(p(e),p(l),p(o),p(f),p(c),p(T),p(O))}}}function jc(r){let e,n;return e=new oe({props:{$$slots:{default:[Dc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rc(r){let e,n;const t=[R(ht),{sourceLayer:ht},{paint:{"circle-color":we(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[jc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new nt({props:l}),e.$on("click",Hc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Y(t,[i&0&&ne(R(ht)),i&0&&{sourceLayer:ht},i&6&&{paint:{"circle-color":we(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Bc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:ht,$$slots:{right:[Fc],default:[Pc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),Z.push(()=>Q(e,"checked",u));let a=r[0]&&_r(r);return o=new be({props:{url:`pmtiles://${ge()}/v1/${ht}.pmtiles`,$$slots:{default:[Rc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&64&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=_r(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ue(),g(a,1,1,()=>{a=null}),ce());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ht="vehicle_counts";function Hc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Uc(r,e,n){let t=te.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class zc extends q{constructor(e){super(),W(this,e,Uc,Bc,z,{})}}function Gc(r){let e,n,t,l,o,i,u,s;return e=new Oc({}),t=new cc({}),o=new Ic({}),u=new wc({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,l,f),b(o,a,f),$(a,i,f),b(u,a,f),s=!0},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),s=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),s=!1},d(a){a&&(p(n),p(l),p(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function qc(r){let e,n;return e=new Ft({props:{small:!0,$$slots:{default:[Gc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Pf({}),t=new Uf({}),o=new vf({}),u=new xu({}),a=new Gu({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,d){b(e,c,d),$(c,n,d),b(t,c,d),$(c,l,d),b(o,c,d),$(c,i,d),b(u,c,d),$(c,s,d),b(a,c,d),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Vc(r){let e,n;return e=new Ft({props:{small:!0,$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Da({}),t=new of({}),o=new Gi({}),u=new ca({}),a=new Oa({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,d){b(e,c,d),$(c,n,d),b(t,c,d),$(c,l,d),b(o,c,d),$(c,i,d),b(u,c,d),$(c,s,d),b(a,c,d),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Kc(r){let e,n;return e=new Ft({props:{small:!0,$$slots:{default:[Xc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zc(r){let e,n,t,l;return e=new Mi({}),t=new ea({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Jc(r){let e,n,t,l;return e=new ku({}),t=new $u({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Yc(r){let e,n,t,l,o=un()=="Private (development)",i,u,s;e=new zc({}),t=new tu({});let a=o&&Jc();return u=new Ka({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),a&&a.c(),i=C(),h(u.$$.fragment)},m(f,c){b(e,f,c),$(f,n,c),b(t,f,c),$(f,l,c),a&&a.m(f,c),$(f,i,c),b(u,f,c),s=!0},p:ee,i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(a),m(u.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(a),g(u.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(i)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function Qc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new fl({props:u}),Z.push(()=>Q(e,"enabled",i)),l=new _l({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],x(()=>n=!1)),e.$set(f)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){g(e.$$.fragment,s),g(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function xc(r){let e,n,t,l,o,i,u,s,a,f,c,d,_,y,S,T;return e=new Mu({}),t=new Me({props:{label:"Trip generators",$$slots:{default:[qc]},$$scope:{ctx:r}}}),o=new Me({props:{label:"Existing infrastructure",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),u=new Me({props:{label:"Boundaries",$$slots:{default:[Kc]},$$scope:{ctx:r}}}),a=new Me({props:{label:"Census",$$slots:{default:[Zc]},$$scope:{ctx:r}}}),c=new Me({props:{label:"Other",$$slots:{default:[Yc]},$$scope:{ctx:r}}}),_=new Me({props:{label:"Tools",$$slots:{default:[Qc]},$$scope:{ctx:r}}}),S=new al({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),h(c.$$.fragment),d=C(),h(_.$$.fragment),y=C(),h(S.$$.fragment)},m(O,E){b(e,O,E),$(O,n,E),b(t,O,E),$(O,l,E),b(o,O,E),$(O,i,E),b(u,O,E),$(O,s,E),b(a,O,E),$(O,f,E),b(c,O,E),$(O,d,E),b(_,O,E),$(O,y,E),b(S,O,E),T=!0},p(O,E){const D={};E&8&&(D.$$scope={dirty:E,ctx:O}),t.$set(D);const F={};E&8&&(F.$$scope={dirty:E,ctx:O}),o.$set(F);const I={};E&8&&(I.$$scope={dirty:E,ctx:O}),u.$set(I);const N={};E&8&&(N.$$scope={dirty:E,ctx:O}),a.$set(N);const M={};E&8&&(M.$$scope={dirty:E,ctx:O}),c.$set(M);const A={};E&9&&(A.$$scope={dirty:E,ctx:O}),_.$set(A);const P={};E&2&&(P.disabled=!O[1]),S.$set(P)},i(O){T||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(o.$$.fragment,O),m(u.$$.fragment,O),m(a.$$.fragment,O),m(c.$$.fragment,O),m(_.$$.fragment,O),m(S.$$.fragment,O),T=!0)},o(O){g(e.$$.fragment,O),g(t.$$.fragment,O),g(o.$$.fragment,O),g(u.$$.fragment,O),g(a.$$.fragment,O),g(c.$$.fragment,O),g(_.$$.fragment,O),g(S.$$.fragment,O),T=!1},d(O){O&&(p(n),p(l),p(i),p(s),p(f),p(d),p(y)),v(e,O),v(t,O),v(o,O),v(u,O),v(a,O),v(c,O),v(_,O),v(S,O)}}}function e$(r){let e,n;return e=new Me({props:{label:"Layers",open:!0,$$slots:{default:[xc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function t$(r,e,n){let t,l;me(r,Xn,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&Xn.set(!t)},[t,l,o]}class n$ extends q{constructor(e){super(),W(this,e,t$,e$,z,{})}}function r$(r,e,n){let{loadFile:t}=e;return $n(async()=>{let o=await(await fetch(`${mn()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class l$ extends q{constructor(e){super(),W(this,e,r$,null,z,{loadFile:0})}}function gr(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=L("p"),n=w("Current milestone: "),l=w(t)},m(i,u){$(i,e,u),k(e,n),k(e,l)},p(i,u){var s;u&1&&t!==(t=((s=i[0].browse)==null?void 0:s.current_milestone)+"")&&B(l,t)},d(i){i&&p(e)}}}function o$(r){let e;return{c(){e=w("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function s$(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function i$(r){let e,n,t,l;return e=new tn({props:{$$slots:{default:[o$]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new tn({props:{$$slots:{default:[s$]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&32&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function a$(r){var F,I,N,M;let e,n,t=((F=r[0].browse)==null?void 0:F.authority_or_region)+"",l,o,i,u,s=((I=r[0].browse)==null?void 0:I.capital_scheme_id)+"",a,f,c,d,_=((N=r[0].browse)==null?void 0:N.funding_programme)+"",y,S,T,O,E,D=((M=r[0].browse)==null?void 0:M.current_milestone)&&gr(r);return O=new ul({props:{$$slots:{default:[i$]},$$scope:{ctx:r}}}),{c(){e=L("p"),n=w("Authority or region: "),l=w(t),o=C(),i=L("p"),u=w("Capital scheme ID: "),a=w(s),f=C(),c=L("p"),d=w("Funding programme: "),y=w(_),S=C(),D&&D.c(),T=C(),h(O.$$.fragment)},m(A,P){$(A,e,P),k(e,n),k(e,l),$(A,o,P),$(A,i,P),k(i,u),k(i,a),$(A,f,P),$(A,c,P),k(c,d),k(c,y),$(A,S,P),D&&D.m(A,P),$(A,T,P),b(O,A,P),E=!0},p(A,P){var V,j,U,$e;(!E||P&1)&&t!==(t=((V=A[0].browse)==null?void 0:V.authority_or_region)+"")&&B(l,t),(!E||P&1)&&s!==(s=((j=A[0].browse)==null?void 0:j.capital_scheme_id)+"")&&B(a,s),(!E||P&1)&&_!==(_=((U=A[0].browse)==null?void 0:U.funding_programme)+"")&&B(y,_),($e=A[0].browse)!=null&&$e.current_milestone?D?D.p(A,P):(D=gr(A),D.c(),D.m(T.parentNode,T)):D&&(D.d(1),D=null);const H={};P&32&&(H.$$scope={dirty:P,ctx:A}),O.$set(H)},i(A){E||(m(O.$$.fragment,A),E=!0)},o(A){g(O.$$.fragment,A),E=!1},d(A){A&&(p(e),p(o),p(i),p(f),p(c),p(S),p(T)),D&&D.d(A),v(O,A)}}}function f$(r){var t;let e,n;return e=new Me({props:{label:`${r[0].scheme_reference}: ${(t=r[0].browse)==null?void 0:t.num_features} features`,$$slots:{default:[a$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),n=!0},p(l,[o]){var u;const i={};o&1&&(i.label=`${l[0].scheme_reference}: ${(u=l[0].browse)==null?void 0:u.num_features} features`),o&33&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function u$(r,e,n){let t,l;me(r,bt,s=>n(3,t=s)),me(r,cn,s=>n(4,l=s));let{scheme:o}=e;function i(){let s={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(rl(s),{padding:20,animate:!1})}function u(){var f,c;let s={type:"FeatureCollection",features:t.features.filter(d=>d.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(s)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=s=>{"scheme"in s&&n(0,o=s.scheme)},[o,i,u]}class c$ extends q{constructor(e){super(),W(this,e,u$,f$,z,{scheme:0})}}function dr(r){let e,n,t=vn(r[0].length_meters)+"",l;return{c(){e=L("p"),n=w("Length: "),l=w(t)},m(o,i){$(o,e,i),k(e,n),k(e,l)},p(o,i){i&1&&t!==(t=vn(o[0].length_meters)+"")&&B(l,t)},d(o){o&&p(e)}}}function hr(r){let e,n=r[2](r[0].description)+"";return{c(){e=L("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[2](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function br(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=L("p"),n=w("Current milestone: "),l=w(t)},m(i,u){$(i,e,u),k(e,n),k(e,l)},p(i,u){var s;u&2&&t!==(t=((s=i[1].browse)==null?void 0:s.current_milestone)+"")&&B(l,t)},d(i){i&&p(e)}}}function $$(r){var xe,Ce,Le,Fe;let e,n,t,l=r[2](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,d,_,y,S,T=r[0].scheme_reference+"",O,E,D,F,I=((xe=r[1].browse)==null?void 0:xe.authority_or_region)+"",N,M,A,P,H=((Ce=r[1].browse)==null?void 0:Ce.capital_scheme_id)+"",V,j,U,$e,Ne=((Le=r[1].browse)==null?void 0:Le.funding_programme)+"",de,Ve,pe=r[0].length_meters&&dr(r),fe=r[0].description&&hr(r),re=((Fe=r[1].browse)==null?void 0:Fe.current_milestone)&&br(r);return{c(){e=L("div"),n=L("h2"),t=new pn(!1),o=w(" ("),u=w(i),s=w(")"),a=C(),pe&&pe.c(),f=C(),fe&&fe.c(),c=C(),d=L("hr"),_=C(),y=L("p"),S=w("Part of scheme: "),O=w(T),E=C(),D=L("p"),F=w("Authority or region: "),N=w(I),M=C(),A=L("p"),P=w("Capital scheme ID: "),V=w(H),j=C(),U=L("p"),$e=w("Funding programme: "),de=w(Ne),Ve=C(),re&&re.c(),t.a=o,Te(e,"max-width","30vw")},m(le,_e){$(le,e,_e),k(e,n),t.m(l,n),k(n,o),k(n,u),k(n,s),k(e,a),pe&&pe.m(e,null),k(e,f),fe&&fe.m(e,null),k(e,c),k(e,d),k(e,_),k(e,y),k(y,S),k(y,O),k(e,E),k(e,D),k(D,F),k(D,N),k(e,M),k(e,A),k(A,P),k(A,V),k(e,j),k(e,U),k(U,$e),k(U,de),k(e,Ve),re&&re.m(e,null)},p(le,[_e]){var De,Xe,ve,ye;_e&1&&l!==(l=le[2](le[0].name)+"")&&t.p(l),_e&1&&i!==(i=le[0].intervention_type+"")&&B(u,i),le[0].length_meters?pe?pe.p(le,_e):(pe=dr(le),pe.c(),pe.m(e,f)):pe&&(pe.d(1),pe=null),le[0].description?fe?fe.p(le,_e):(fe=hr(le),fe.c(),fe.m(e,c)):fe&&(fe.d(1),fe=null),_e&1&&T!==(T=le[0].scheme_reference+"")&&B(O,T),_e&2&&I!==(I=((De=le[1].browse)==null?void 0:De.authority_or_region)+"")&&B(N,I),_e&2&&H!==(H=((Xe=le[1].browse)==null?void 0:Xe.capital_scheme_id)+"")&&B(V,H),_e&2&&Ne!==(Ne=((ve=le[1].browse)==null?void 0:ve.funding_programme)+"")&&B(de,Ne),(ye=le[1].browse)!=null&&ye.current_milestone?re?re.p(le,_e):(re=br(le),re.c(),re.m(e,null)):re&&(re.d(1),re=null)},i:ee,o:ee,d(le){le&&p(e),pe&&pe.d(),fe&&fe.d(),re&&re.d()}}}function p$(r,e,n){let t,l,o;me(r,Ut,s=>n(4,l=s)),me(r,Lt,s=>n(3,o=s));let{props:i}=e;function u(s){return l?s.replace(new RegExp(l,"gi"),a=>`<mark>${a}</mark>`):s}return r.$$set=s=>{"props"in s&&n(0,i=s.props)},r.$$.update=()=>{r.$$.dirty&9&&n(1,t=o.get(i.scheme_reference))},[i,t,u,o]}class dn extends q{constructor(e){super(),W(this,e,p$,$$,z,{props:0})}}function m$(r){let e,n=r[6].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function _$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function g$(r){let e,n,t,l;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[m$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[_$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function d$(r){let e,n=r[6].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function h$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function b$(r){let e,n,t,l;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[d$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[h$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function v$(r){let e,n=r[6].name+"",t;return{c(){e=L("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function w$(r){let e,n;return e=new dn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function k$(r){let e,n,t,l;return e=new oe({props:{popupClass:"border-popup",$$slots:{default:[v$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new oe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[w$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function y$(r){let e,n,t,l,o,i,u,s,a,f;const c=[R("interventions-points"),{filter:["all",wn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":qt,"circle-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let d={$$slots:{default:[g$]},$$scope:{ctx:r}};for(let I=0;I<c.length;I+=1)d=J(d,c[I]);e=new nt({props:d});const _=[R("interventions-lines"),{filter:["all",kn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":vt,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[b$]},$$scope:{ctx:r}};for(let I=0;I<_.length;I+=1)y=J(y,_[I]);t=new he({props:y});const S=[R("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*vt,"circle-opacity":0,"circle-stroke-color":Ze.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let I=0;I<S.length;I+=1)T=J(T,S[I]);o=new nt({props:T});const O=[R("interventions-polygons"),{filter:["all",Rt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":K(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let E={$$slots:{default:[k$]},$$scope:{ctx:r}};for(let I=0;I<O.length;I+=1)E=J(E,O[I]);u=new Ye({props:E});const D=[R("interventions-polygons-outlines"),{filter:["all",Rt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*vt}},{layout:{visibility:r[0]?"visible":"none"}}];let F={};for(let I=0;I<D.length;I+=1)F=J(F,D[I]);return a=new he({props:F}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(I,N){b(e,I,N),$(I,n,N),b(t,I,N),$(I,l,N),b(o,I,N),$(I,i,N),b(u,I,N),$(I,s,N),b(a,I,N),f=!0},p(I,N){const M=N&29?Y(c,[c[0],N&24&&{filter:["all",wn,I[3],I[4]]},c[2],c[3],N&4&&{paint:{"circle-color":I[2],"circle-radius":qt,"circle-opacity":K(1,.5)}},N&1&&{layout:{visibility:I[0]?"visible":"none"}},c[6]]):{};N&128&&(M.$$scope={dirty:N,ctx:I}),e.$set(M);const A=N&13?Y(_,[_[0],N&8&&{filter:["all",kn,I[3]]},_[2],_[3],N&4&&{paint:{"line-color":I[2],"line-width":vt,"line-opacity":K(1,.5)}},N&1&&{layout:{visibility:I[0]?"visible":"none"}},_[6]]):{};N&128&&(A.$$scope={dirty:N,ctx:I}),t.$set(A);const P=N&1?Y(S,[S[0],S[1],S[2],{layout:{visibility:I[0]?"visible":"none"}}]):{};o.$set(P);const H=N&13?Y(O,[O[0],N&8&&{filter:["all",Rt,I[3]]},O[2],O[3],N&4&&{paint:{"fill-color":I[2],"fill-opacity":K(.2,.5)}},N&1&&{layout:{visibility:I[0]?"visible":"none"}},O[6]]):{};N&128&&(H.$$scope={dirty:N,ctx:I}),u.$set(H);const V=N&13?Y(D,[D[0],N&8&&{filter:["all",Rt,I[3]]},N&4&&{paint:{"line-color":I[2],"line-opacity":.5,"line-width":.7*vt}},N&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};a.$set(V)},i(I){f||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(o.$$.fragment,I),m(u.$$.fragment,I),m(a.$$.fragment,I),f=!0)},o(I){g(e.$$.fragment,I),g(t.$$.fragment,I),g(o.$$.fragment,I),g(u.$$.fragment,I),g(a.$$.fragment,I),f=!1},d(I){I&&(p(n),p(l),p(i),p(s)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I)}}}function S$(r){let e,n;return e=new Nt({props:{data:r[1],$$slots:{default:[y$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function O$(r,e,n){let t,l;me(r,bt,a=>n(5,l=a));let{showSchemes:o}=e,i=Zr();const u=["!=",["get","hide_while_editing"],!0],s=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=ll(l))},[o,t,i,u,s,l]}class T$ extends q{constructor(e){super(),W(this,e,O$,S$,z,{showSchemes:0})}}function vr(r,e,n){const t=r.slice();return t[10]=e[n],t}function C$(r){let e,n;return e=new l$({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wr(r){let e,n,t,l;function o(s){r[7](s)}function i(s){r[8](s)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new ti({props:u}),Z.push(()=>Q(e,"schemesToBeShown",o)),Z.push(()=>Q(e,"show",i)),{c(){h(e.$$.fragment)},m(s,a){b(e,s,a),l=!0},p(s,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=s[1],x(()=>n=!1)),!t&&a&4&&(t=!0,f.show=s[2],x(()=>t=!1)),e.$set(f)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){v(e,s)}}}function kr(r){let e,n;return e=new c$({props:{scheme:r[10]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.scheme=t[10]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yr(r){let e=r[1].has(r[10].scheme_reference),n,t,l=e&&kr(r);return{c(){l&&l.c(),n=Ae()},m(o,i){l&&l.m(o,i),$(o,n,i),t=!0},p(o,i){i&34&&(e=o[1].has(o[10].scheme_reference)),e?l?(l.p(o,i),i&34&&m(l,1)):(l=kr(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(ue(),g(l,1,1,()=>{l=null}),ce())},i(o){t||(m(l),t=!0)},o(o){g(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function A$(r){let e,n,t,l,o,i,u,s,a,f,c=un()=="Private (development)",d,_,y,S,T,O,E,D;o=new ml({props:{boundaryGeojson:r[3]}}),u=new Hl({}),a=new ol({});let F=c&&C$(r);_=new $l({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[6]}}),S=new Pr({props:{errorMessage:r[0]}});let I=r[5].size>0&&wr(r),N=Ge(r[5].values()),M=[];for(let P=0;P<N.length;P+=1)M[P]=yr(vr(r,N,P));const A=P=>g(M[P],1,1,()=>{M[P]=null});return{c(){e=L("div"),n=L("div"),t=L("h1"),t.textContent="Browse schemes",l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),F&&F.c(),d=C(),h(_.$$.fragment),y=C(),h(S.$$.fragment),T=C(),I&&I.c(),O=C(),E=L("ul");for(let P=0;P<M.length;P+=1)M[P].c();Te(n,"display","flex"),Te(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(P,H){$(P,e,H),k(e,n),k(n,t),k(n,l),b(o,n,null),k(e,i),b(u,e,null),k(e,s),b(a,e,null),k(e,f),F&&F.m(e,null),k(e,d),b(_,e,null),k(e,y),b(S,e,null),k(e,T),I&&I.m(e,null),k(e,O),k(e,E);for(let V=0;V<M.length;V+=1)M[V]&&M[V].m(E,null);D=!0},p(P,H){const V={};H&8&&(V.boundaryGeojson=P[3]),o.$set(V),c&&F.p(P,H);const j={};if(H&1&&(j.errorMessage=P[0]),S.$set(j),P[5].size>0?I?(I.p(P,H),H&32&&m(I,1)):(I=wr(P),I.c(),m(I,1),I.m(e,O)):I&&(ue(),g(I,1,1,()=>{I=null}),ce()),H&34){N=Ge(P[5].values());let U;for(U=0;U<N.length;U+=1){const $e=vr(P,N,U);M[U]?(M[U].p($e,H),m(M[U],1)):(M[U]=yr($e),M[U].c(),m(M[U],1),M[U].m(E,null))}for(ue(),U=N.length;U<M.length;U+=1)A(U);ce()}},i(P){if(!D){m(o.$$.fragment,P),m(u.$$.fragment,P),m(a.$$.fragment,P),m(F),m(_.$$.fragment,P),m(S.$$.fragment,P),m(I);for(let H=0;H<N.length;H+=1)m(M[H]);D=!0}},o(P){g(o.$$.fragment,P),g(u.$$.fragment,P),g(a.$$.fragment,P),g(F),g(_.$$.fragment,P),g(S.$$.fragment,P),g(I),M=M.filter(Boolean);for(let H=0;H<M.length;H+=1)g(M[H]);D=!1},d(P){P&&p(e),v(o),v(u),v(a),F&&F.d(),v(_),v(S),I&&I.d(),St(M,P)}}}function L$(r){let e,n,t,l,o,i,u;return e=new cl({}),t=new T$({props:{showSchemes:r[2]}}),i=new n$({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),o=L("div"),h(i.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),$(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&4&&(f.showSchemes=s[2]),t.$set(f)},i(s){u||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),g(i.$$.fragment,s),u=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),v(i)}}}function I$(r){let e,n,t;return n=new sl({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[L$]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(n.$$.fragment),G(e,"slot","main")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.style=l[4]),o&8196&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function P$(r){let e,n;return e=new gl({props:{$$slots:{main:[I$],sidebar:[A$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&8255&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function M$(r,e,n){let t,l,o;me(r,bt,_=>n(3,t=_)),me(r,yn,_=>n(4,l=_)),me(r,Lt,_=>n(5,o=_)),$n(()=>{il()});const i=new URLSearchParams(window.location.search);yn.set(i.get("style")||"dataviz");let u="",s=new Set,a=!0;function f(_){try{bt.set(JSON.parse(_)),Lt.set(zs(t)),n(0,u="")}catch(y){n(0,u=`The file you loaded is broken: ${y}`)}}function c(_){s=_,n(1,s)}function d(_){a=_,n(2,a)}return[u,s,a,t,l,o,f,c,d]}class E$ extends q{constructor(e){super(),W(this,e,M$,P$,z,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new E$({target:document.getElementById("app")});
