import{S as J,i as K,s as X,e as S,h as U,$ as Se,j as $,W as le,o as p,aP as tl,b as q,c as W,d as L,g as b,m as v,w as st,l as V,t as _,n as d,p as w,X as Bt,Y as Ht,Z as zt,_ as Gt,a7 as Ne,J as me,K as _e,aQ as Ot,u as k,k as h,D as R,I as Me,N as vn,O as nl,q as be,P as rl,Q as ll,T as At,U as ol,V as sl,aX as Ll,aY as ct,a4 as In,aZ as Il,aO as Pl,ar as Kt,ae as wn,aj as Ut,r as kn,F as cn,a as Et,v as Ye,aW as Q,a_ as ve,a$ as ke,B as x,ah as te,C as ye,ak as ne,b0 as ie,G as It,H as il,aS as Dt,ab as Pn,b1 as nn,R as al,b2 as Nt,E as fl,as as Ml,f as $n,ag as Nl,aU as Mn,al as Fl,am as Nn,an as Fn,ao as Vt,aV as En,L as El,M as Dl,y as jl}from"./index-59dd3915.js";import{d as et,j as Tt,C as Re,f as nt,h as ae,l as z,c as Zt,k as Rl,S as Bl,B as Hl,b as Pt,G as zl}from"./StreetViewTool-76fd1a9b.js";import{a as Je,F as Gl}from"./Popup-c21171c9.js";import{P as fe}from"./Popup-020b711a.js";import{R as Ul,C as tt,Z as ql}from"./ZoomOutMap-73188346.js";import{L as Wl,a as Vl}from"./LineMeasureController-7e694e56.js";function Xl(r){let e;return{c(){e=S("span"),U(e,"class","svelte-kzgqtg"),Se(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Se(e,"background",n[0])},i:le,o:le,d(n){n&&p(e)}}}function Yl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class Oe extends J{constructor(e){super(),K(this,e,Yl,Xl,X,{color:0})}}const Ql="/atip/funding-programme-browse-page-handling/assets/help-d011708a.svg";function Jl(r){let e,n;const t=r[1].default,l=Bt(t,r,r[4],null);return{c(){e=S("div"),l&&l.c(),U(e,"class","govuk-prose")},m(o,s){$(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&Ht(l,t,o,o[4],n?Gt(t,o[4],s,null):zt(o[4]),null)},i(o){n||(_(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function Kl(r){let e,n,t,l,o,s,u;function i(f){r[3](f)}let a={title:"Help",$$slots:{default:[Jl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new tl({props:a}),q.push(()=>W(t,"open",i)),{c(){e=S("button"),e.innerHTML=`<img src="${Ql}" title="Help" alt="Help"/>`,n=L(),b(t.$$.fragment),U(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),v(t,f,c),o=!0,s||(u=st(e,"click",r[2]),s=!0)},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,g.open=f[0],V(()=>l=!1)),t.$set(g)},i(f){o||(_(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),w(t,f),s=!1,u()}}}function Zl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,u,l]}class ge extends J{constructor(e){super(),K(this,e,Zl,Kl,X,{})}}function Dn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function jn(r){let e,n,t,l=r[1]+"",o,s,u;return n=new Oe({props:{color:r[2]}}),{c(){e=S("li"),b(n.$$.fragment),t=L(),o=k(l),s=L()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&l!==(l=i[1]+"")&&R(o,l)},i(i){u||(_(n.$$.fragment,i),u=!0)},o(i){d(n.$$.fragment,i),u=!1},d(i){i&&p(e),w(n)}}}function xl(r){let e,n,t=Ne(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=jn(Dn(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){e=S("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,u){$(s,e,u);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=Ne(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Dn(s,t,i);l[i]?(l[i].p(a,u),_(l[i],1)):(l[i]=jn(a),l[i].c(),_(l[i],1),l[i].m(e,null))}for(me(),i=t.length;i<l.length;i+=1)o(i);_e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)_(l[u]);n=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)d(l[u]);n=!1},d(s){s&&p(e),Ot(l,s)}}}function eo(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class ul extends J{constructor(e){super(),K(this,e,eo,xl,X,{rows:0})}}function Rn(r){let e=r[0],n,t,l=Bn(r);return{c(){l.c(),n=Me()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&X(e,e=o[0])?(me(),d(l,1,1,le),_e(),l=Bn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Bn(r){let e;const n=r[10].default,t=Bt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Ht(t,n,l,l[9],e?Gt(n,l[9],o,null):zt(l[9]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function to(r){let e,n,t=r[0]&&Rn(r);return{c(){t&&t.c(),e=Me()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=Rn(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(me(),d(t,1,1,()=>{t=null}),_e())},i(l){n||(_(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function no(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:u=vn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=nl();be(r,f,y=>n(8,l=y)),be(r,c,y=>n(0,t=y));let g,m=!0;return rl(()=>{t&&g&&l&&(ll(f,t,g),At(c,t=null,t),n(6,g=void 0))}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(At(c,t=u,t),ol(l,t,sl({type:"raster",tiles:i,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,g=l==null?void 0:l.getSource(t)),n(7,m=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,g=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&g&&(m?n(7,m=!1):g.setTiles(i))},[t,f,c,u,i,a,g,m,l,s,o]}class ro extends J{constructor(e){super(),K(this,e,no,to,X,{id:3,tiles:4,tileSize:5})}}function lo(r){let e;const n=r[16].default,t=Bt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Ht(t,n,l,l[24],e?Gt(n,l[24],o,null):zt(l[24]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function oo(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[lo]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Ll({props:o}),q.push(()=>W(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],V(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function so(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=vn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:O=void 0}=e,{manageHoverState:T=!1}=e,{hovered:N=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:E=!0}=e;function P(j){N=j,n(0,N)}function I(j){ct.call(this,r,j)}function M(j){ct.call(this,r,j)}function A(j){ct.call(this,r,j)}function F(j){ct.call(this,r,j)}function B(j){ct.call(this,r,j)}function H(j){ct.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,g=j.filter),"applyToClusters"in j&&n(9,m=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,C=j.maxzoom),"hoverCursor"in j&&n(12,O=j.hoverCursor),"manageHoverState"in j&&n(13,T=j.manageHoverState),"hovered"in j&&n(0,N=j.hovered),"eventsIfTopMost"in j&&n(14,D=j.eventsIfTopMost),"interactive"in j&&n(15,E=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[N,o,s,u,i,a,f,c,g,m,y,C,O,T,D,E,t,P,I,M,A,F,B,H,l]}class io extends J{constructor(e){super(),K(this,e,so,oo,X,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Hn(r){let e=r[0],n,t,l=zn(r);return{c(){l.c(),n=Me()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&X(e,e=o[0])?(me(),d(l,1,1,le),_e(),l=zn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function zn(r){let e;const n=r[9].default,t=Bt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Ht(t,n,l,l[8],e?Gt(n,l[8],o,null):zt(l[8]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function ao(r){let e,n,t=r[0]&&Hn(r);return{c(){t&&t.c(),e=Me()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=Hn(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(me(),d(t,1,1,()=>{t=null}),_e())},i(l){n||(_(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function fo(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:u=vn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!In.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Il;In.addProtocol("pmtiles",y.tile)}const{map:c,self:g}=nl();be(r,c,y=>n(7,l=y)),be(r,g,y=>n(0,t=y));let m;return rl(()=>{t&&l&&(ll(c,t,m),At(g,t=null,t),m=void 0)}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(At(g,t=u,t),ol(l,t,sl({type:"vector",url:i,tiles:a,promoteId:f}),y=>l&&y===t,()=>{t&&(m=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{m=l==null?void 0:l.getSource(u)}))},[t,c,g,u,i,a,f,l,s,o]}class we extends J{constructor(e){super(),K(this,e,fo,ao,X,{id:3,url:4,tiles:5,promoteId:6})}}const uo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ie=Uint8Array,ft=Uint16Array,cl=Uint32Array,$l=new Ie([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pl=new Ie([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),co=new Ie([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ml=function(r,e){for(var n=new ft(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new cl(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},_l=ml($l,2),gl=_l[0],$o=_l[1];gl[28]=258,$o[258]=28;var po=ml(pl,0),mo=po[0],pn=new ft(32768);for(var pe=0;pe<32768;++pe){var rt=(pe&43690)>>>1|(pe&21845)<<1;rt=(rt&52428)>>>2|(rt&13107)<<2,rt=(rt&61680)>>>4|(rt&3855)<<4,pn[pe]=((rt&65280)>>>8|(rt&255)<<8)>>>1}var Ft=function(r,e,n){for(var t=r.length,l=0,o=new ft(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new ft(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var u;if(n){u=new ft(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=s[r[l]-1]++<<f,g=c|(1<<f)-1;c<=g;++c)u[pn[c]>>>i]=a}else for(u=new ft(t),l=0;l<t;++l)r[l]&&(u[l]=pn[s[r[l]-1]++]>>>15-r[l]);return u},qt=new Ie(288);for(var pe=0;pe<144;++pe)qt[pe]=8;for(var pe=144;pe<256;++pe)qt[pe]=9;for(var pe=256;pe<280;++pe)qt[pe]=7;for(var pe=280;pe<288;++pe)qt[pe]=8;var dl=new Ie(32);for(var pe=0;pe<32;++pe)dl[pe]=5;var _o=Ft(qt,9,1),go=Ft(dl,5,1),rn=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},De=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},ln=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},ho=function(r){return(r+7)/8|0},yn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?ft:r.BYTES_PER_ELEMENT==4?cl:Ie)(n-e);return t.set(r.subarray(e,n)),t},bo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],je=function(r,e,n){var t=new Error(e||bo[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,je),!n)throw t;return t},vo=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Ie(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ie(t*3));var s=function(Te){var ze=e.length;if(Te>ze){var Ze=new Ie(Math.max(ze*2,Te));Ze.set(e),e=Ze}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,g=n.m,m=n.n,y=t*8;do{if(!f){u=De(r,i,1);var C=De(r,i+1,3);if(i+=3,C)if(C==1)f=_o,c=go,g=9,m=5;else if(C==2){var D=De(r,i,31)+257,E=De(r,i+10,15)+4,P=D+De(r,i+5,31)+1;i+=14;for(var I=new Ie(P),M=new Ie(19),A=0;A<E;++A)M[co[A]]=De(r,i+A*3,7);i+=E*3;for(var F=rn(M),B=(1<<F)-1,H=Ft(M,F,1),A=0;A<P;){var j=H[De(r,i,B)];i+=j&15;var O=j>>>4;if(O<16)I[A++]=O;else{var G=0,Y=0;for(O==16?(Y=3+De(r,i,3),i+=2,G=I[A-1]):O==17?(Y=3+De(r,i,7),i+=3):O==18&&(Y=11+De(r,i,127),i+=7);Y--;)I[A++]=G}}var ee=I.subarray(0,D),Z=I.subarray(D);g=rn(ee),m=rn(Z),f=Ft(ee,g,1),c=Ft(Z,m,1)}else je(1);else{var O=ho(i)+4,T=r[O-4]|r[O-3]<<8,N=O+T;if(N>t){o&&je(0);break}l&&s(a+T),e.set(r.subarray(O,N),a),n.b=a+=T,n.p=i=N*8,n.f=u;continue}if(i>y){o&&je(0);break}}l&&s(a+131072);for(var Ce=(1<<g)-1,Le=(1<<m)-1,se=i;;se=i){var G=f[ln(r,i)&Ce],de=G>>>4;if(i+=G&15,i>y){o&&je(0);break}if(G||je(2),de<256)e[a++]=de;else if(de==256){se=i,f=null;break}else{var Ae=de-254;if(de>264){var A=de-257,ue=$l[A];Ae=De(r,i,(1<<ue)-1)+gl[A],i+=ue}var ce=c[ln(r,i)&Le],$e=ce>>>4;ce||je(3),i+=ce&15;var Z=mo[$e];if($e>3){var ue=pl[$e];Z+=ln(r,i)&(1<<ue)-1,i+=ue}if(i>y){o&&je(0);break}l&&s(a+131072);for(var Ee=a+Ae;a<Ee;a+=4)e[a]=e[a-Z],e[a+1]=e[a+1-Z],e[a+2]=e[a+2-Z],e[a+3]=e[a+3-Z];a=Ee}}n.l=f,n.p=se,n.b=a,n.f=u,f&&(u=1,n.m=g,n.d=c,n.n=m)}while(!u);return a==e.length?e:yn(e,0,a)},wo=new Ie(0),Xe=function(r,e){return r[e]|r[e+1]<<8},Be=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},on=function(r,e){return Be(r,e)+Be(r,e+4)*4294967296};function ko(r,e){return vo(r,e)}var mn=typeof TextDecoder<"u"&&new TextDecoder,yo=0;try{mn.decode(wo,{stream:!0}),yo=1}catch{}var So=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,yn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function hl(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(mn)return mn.decode(r);var l=So(r),o=l[0],s=l[1];return s.length&&je(8),o}}var Co=function(r,e){return e+30+Xe(r,e+26)+Xe(r,e+28)},To=function(r,e,n){var t=Xe(r,e+28),l=hl(r.subarray(e+46,e+46+t),!(Xe(r,e+8)&2048)),o=e+46+t,s=Be(r,e+20),u=n&&s==4294967295?Oo(r,o):[s,Be(r,e+24),Be(r,e+42)],i=u[0],a=u[1],f=u[2];return[Xe(r,e+10),i,a,l,o+Xe(r,e+30)+Xe(r,e+32),f]},Oo=function(r,e){for(;Xe(r,e)!=1;e+=4+Xe(r,e+2));return[on(r,e+12),on(r,e+4),on(r,e+20)]};function Ao(r,e){for(var n={},t=r.length-22;Be(r,t)!=101010256;--t)(!t||r.length-t>65558)&&je(13);var l=Xe(r,t+8);if(!l)return{};var o=Be(r,t+16),s=o==4294967295||l==65535;if(s){var u=Be(r,t-12);s=Be(r,u)==101075792,s&&(l=Be(r,u+32),o=Be(r,u+48))}for(var i=e&&e.filter,a=0;a<l;++a){var f=To(r,o,s),c=f[0],g=f[1],m=f[2],y=f[3],C=f[4],O=f[5],T=Co(r,O);o=C,(!i||i({name:y,size:g,originalSize:m,compression:c}))&&(c?c==8?n[y]=ko(r.subarray(T,T+g),new Ie(m)):je(14,"unknown compression type "+c):n[y]=yn(r,T,T+g))}return n}function Lo(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(sn):sn(r)}function sn(r){var e=new Uint8Array(r),n=Ao(e);return Promise.resolve(Io(n))}function Io(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=hl(r[l])}return e}function Qe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&ut(t)===e)return t;n++}}function Wt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&ut(l)===e&&n.push(l),t++}return n}function xt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&ut(l)===e&&n(l,t):n(l,t),t++}}function Po(r,e,n){var t=[];return xt(r,e,function(l,o){t.push(n(l,o))}),t}var Mo=/.+\:/;function ut(r){return r.tagName.replace(Mo,"")}function bl(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+ut(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=bl(r.childNodes[t]),t++;return e+="</"+ut(r)+">",e}function No(r){var e=r.documentElement,n=Qe(e,"sheetData"),t=[];return xt(n,"row",function(l){xt(l,"c",function(o){t.push(o)})}),t}function Fo(r,e){return Qe(e,"v")}function Eo(r,e){if(e.firstChild&&ut(e.firstChild)==="is"&&e.firstChild.firstChild&&ut(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Do(r){var e=r.documentElement,n=Qe(e,"dimension");if(n)return n.getAttribute("ref")}function jo(r){var e=r.documentElement,n=Qe(e,"cellStyleXfs");return n?Wt(n,"xf"):[]}function Ro(r){var e=r.documentElement,n=Qe(e,"cellXfs");return n?Wt(n,"xf"):[]}function Bo(r){var e=r.documentElement,n=Qe(e,"numFmts");return n?Wt(n,"numFmt"):[]}function Ho(r){var e=r.documentElement;return Po(e,"si",function(n){var t=Qe(n,"t");if(t)return t.textContent;var l="";return xt(n,"r",function(o){l+=Qe(o,"t").textContent}),l})}function zo(r){var e=r.documentElement;return Qe(e,"workbookPr")}function Go(r){var e=r.documentElement;return Wt(e,"Relationship")}function Uo(r){var e=r.documentElement,n=Qe(e,"sheets");return Wt(n,"sheet")}function qo(r,e){var n=e.createDocument(r),t={},l=zo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return Uo(n).forEach(o),t}function Wo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=an(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=an(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=an(u);break}};return Go(n).forEach(l),t}function an(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Gn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Un(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gn(Object(n),!0).forEach(function(t){Vo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Vo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Xo(r,e){if(!r)return{};var n=e.createDocument(r),t=jo(n).map(fn),l=Bo(n).map(Yo).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?Un(Un({},t[u.xfId]),fn(u,l)):fn(u,l)};return Ro(n).map(o)}function Yo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function fn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Qo(r,e){return r?Ho(e.createDocument(r)):[]}function vl(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Jo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ko(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ko(r,e){if(r){if(typeof r=="string")return qn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(r,e)}}function qn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Zo(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(xo.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&ns(l.numberFormat.template))return!0}}var xo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],es=/^\[\$-414\]/,ts=/;@$/;function ns(r){r=r.toLowerCase(),r=r.replace(es,""),r=r.replace(ts,"");for(var e=r.split(/\W+/),n=Jo(e),t;!(t=n()).done;){var l=t.value;if(rs.indexOf(l)<0)return!1}return!0}var rs=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function ls(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=un(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=un(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=un(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=os(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var g=Number(r);if(isNaN(g))throw new Error('Invalid "numeric" cell value: '.concat(r));r=g,Zo(r,o(),s,a)&&(r=vl(r,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function os(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function un(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var ss=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function is(r){var e=function(a,f){return a-f},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:l,column:s},{row:o,column:u}]}function as(r){for(var e=0,n=0;n<r.length;)e*=26,e+=ss.indexOf(r[n]),n++;return e}function wl(r){return r=r.split(/(\d+)/),[parseInt(r[1]),as(r[0].trim())]}function fs(r,e,n,t,l,o,s){var u=wl(r.getAttribute("r")),i=Fo(e,r),a=i&&i.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:ls(a,f,{getInlineStringValue:function(){return Eo(e,r)},getInlineStringXml:function(){return bl(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function us(r,e,n,t,l,o){var s=No(r);return s.length===0?[]:s.map(function(u){return fs(u,r,e,n,t,l,o)})}function cs(r,e){return _s(r)||ms(r,e)||ps(r,e)||$s()}function $s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ps(r,e){if(r){if(typeof r=="string")return Wn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wn(r,e)}}function Wn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ms(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function _s(r){if(Array.isArray(r))return r}function gs(r){var e=Do(r);if(e)return e=e.split(":").map(wl).map(function(n){var t=cs(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function ds(r,e,n,t,l,o){var s=e.createDocument(r),u=us(s,e,n,t,l,o),i=gs(s)||is(u);return{cells:u,dimensions:i}}function hs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=bs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bs(r,e){if(r){if(typeof r=="string")return Vn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(r,e)}}function Vn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function vs(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var u=!0,i=hs(r[s]),a;!(a=i()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function ws(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ks(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ks(r,e){if(r){if(typeof r=="string")return Xn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xn(r,e)}}function Xn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ys(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,u=ws(r),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Ss(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=kl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cs(r,e){return As(r)||Os(r,e)||kl(r,e)||Ts()}function Ts(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kl(r,e){if(r){if(typeof r=="string")return Yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(r,e)}}function Yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Os(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function As(r){if(Array.isArray(r))return r}function Ls(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Cs(n,2);l[0];for(var o=l[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=Ss(t),g;!(g=c()).done;){var m=g.value,y=m.row-1,C=m.column-1;C<s&&y<u&&(i[y][C]=m.value)}var O=e.rowMap;if(O)for(var T=0;T<i.length;)O[T]=T,T++;return i=vs(ys(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:O}),e.transformData&&(i=e.transformData(i)),i}function Is(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ps(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ps(r,e){if(r){if(typeof r=="string")return Qn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qn(r,e)}}function Qn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Jn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Ms(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jn(Object(n),!0).forEach(function(t){Ns(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ns(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Fs(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Ms({sheet:1},n));var t=function(g){if(!r[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return r[g]},l=Wo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Qo(t(l.sharedStrings),e):[],s=l.styles?Xo(t(l.styles),e):{},u=qo(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var g=c.name;return{name:g}});var i=Es(n.sheet,u.sheets);if(!i||!l.sheets[i])throw Ds(n.sheet,u.sheets);var a=ds(t(l.sheets[i]),e,o,s,u,n),f=Ls(a,n);return n.properties?{data:f,properties:u}:f}function Es(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Is(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Ds(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function _n(r){"@babel/helpers - typeof";return _n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(r)}function Kn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function js(r,e,n){return e&&Kn(r.prototype,e),n&&Kn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Rs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Bs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&jt(r,e)}function Hs(r){var e=yl();return function(){var t=Rt(r),l;if(e){var o=Rt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return zs(this,l)}}function zs(r,e){if(e&&(_n(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gs(r)}function Gs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function gn(r){var e=typeof Map=="function"?new Map:void 0;return gn=function(t){if(t===null||!Us(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Yt(t,arguments,Rt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),jt(l,t)},gn(r)}function Yt(r,e,n){return yl()?Yt=Reflect.construct:Yt=function(l,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(l,u),a=new i;return s&&jt(a,s.prototype),a},Yt.apply(null,arguments)}function yl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Us(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function jt(r,e){return jt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},jt(r,e)}function Rt(r){return Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Rt(r)}var Pe=function(r){Bs(n,r);var e=Hs(n);function n(t){var l;return Rs(this,n),l=e.call(this,"invalid"),l.reason=t,l}return js(n)}(gn(Error));function qs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Pe("not_a_number")}if(typeof r!="number")throw new Pe("not_a_number");if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");return r}function Ws(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");return String(r)}throw new Pe("not_a_string")}function Vs(r){if(typeof r=="boolean")return r;throw new Pe("not_a_boolean")}function Xs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Pe("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");var t=vl(r,n);if(isNaN(t.valueOf()))throw new Pe("out_of_bounds");return t}throw new Pe("not_a_date")}function Ys(r,e){return Ks(r)||Js(r,e)||Sl(r,e)||Qs()}function Qs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Js(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ks(r){if(Array.isArray(r))return r}function dn(r){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(r)}function Zs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Sl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sl(r,e){if(r){if(typeof r=="string")return Zn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(r,e)}}function Zn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function xn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function er(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xn(Object(n),!0).forEach(function(t){xs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function xs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var tr={isColumnOriented:!1};function ei(r,e,n){n?n=er(er({},tr),n):n=tr;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;li(e),l&&(r=ri(r));for(var u=r[0],i=[],a=[],f=1;f<r.length;f++){var c=Cl(e,r[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=Zs(a),m;!(m=g()).done;){var y=m.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function Cl(r,e,n,t,l,o){for(var s={},u=!0,i=function(){var g=f[a],m=r[g],y=dn(m.type)==="object"&&!Array.isArray(m.type),C=e[t.indexOf(g)];C===void 0&&(C=null);var O=void 0,T=void 0,N=void 0;if(y)O=Cl(m.type,e,n,t,l,o);else if(C===null)O=null;else if(Array.isArray(m.type)){var D=!1,E=ni(C).map(function(I){var M=nr(I,m,o);return M.error&&(O=I,T=M.error,N=M.reason),M.value!==null&&(D=!0),M.value});T||(O=D?E:null)}else{var P=nr(C,m,o);T=P.error,N=P.reason,O=T?C:P.value}!T&&O===null&&m.required&&(T="required"),T?(T={error:T,row:n+1,column:g,value:O},N&&(T.reason=N),m.type&&(T.type=m.type),l.push(T)):(u&&O!==null&&(u=!1),(O!==null||o.includeNullValues)&&(s[m.prop]=O))},a=0,f=Object.keys(r);a<f.length;a++)i();return u?null:s}function nr(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=$t(r,e.parse):e.type?t=ti(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function $t(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ti(r,e,n){switch(e){case String:return $t(r,Ws);case Number:return $t(r,qs);case Date:return $t(r,function(t){return Xs(t,{properties:n.properties})});case Boolean:return $t(r,Vs);default:if(typeof e=="function")return $t(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Tl(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=Tl(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function ni(r){for(var e=[],n=0;n<r.length;){var t=Tl(r,",",n),l=Ys(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var ri=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function li(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function hn(r){"@babel/helpers - typeof";return hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(r)}function Ol(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;hn(o)==="object"&&(o=Object.keys(r[l])[0],s=Ol(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var oi=["schema","map"];function rr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Xt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rr(Object(n),!0).forEach(function(t){si(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function si(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ii(r,e){if(r==null)return{};var n=ai(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ai(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function fi(r,e,n){var t=n.schema,l=n.map,o=ii(n,oi);!t&&l&&(t=Ol(l));var s=Fs(r,e,Xt(Xt({},o),{},{properties:t||o.properties}));return t?ei(s.data,t,Xt(Xt({},o),{},{properties:s.properties})):s}function ui(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Lo(r).then(function(n){return fi(n,uo,e)})}function ci(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>$i(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function $i(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function pi(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await ui(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Pl(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const bn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function Al(r){return Kt(["get","intervention_type"],{area:et.area,route:et.route,crossing:et.crossing,other:et.other},"white")}function lr(r){return[["Areas",et.area],["Routes",et.route],["Crossings",et.crossing],["Other",et.other]]}const oe={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},He=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function mi(r){let e,n;return e=new ul({props:{rows:r[1]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function _i(r){let e,n,t,l,o;function s(i){r[3](i)}let u={label:"Color interventions",id:"colorInterventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Tt({props:u}),q.push(()=>W(e,"value",s)),e.$on("change",r[2]),l=new Re({props:{label:"Legend",$$slots:{default:[mi]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],V(()=>n=!1)),e.$set(f);const c={};a&130&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function or(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function gi(r,e,n){let t;be(r,wn,f=>n(4,t=f));let l="fundingProgramme";console.log("funding programme");let o=lr();s();function s(){let f;l=="interventionType"?(f=Al(),n(1,o=lr())):l=="fundingProgramme"?f=u():l=="currentMilestone"&&(f=i()),t.setPaintProperty("interventions-points","circle-color",f),t.setPaintProperty("interventions-lines","line-color",f),t.setPaintProperty("interventions-polygons","fill-color",f),t.setPaintProperty("interventions-polygons-outlines","line-color",f)}function u(){let f=bn,[c,g]=or(f,oe.funding_programmes),m=Kt(["get","funding_programme"],c,"grey");return n(1,o=g),m}function i(){let f=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[c,g]=or(f,oe.current_milestone),m=Kt(["get","current_milestone"],c,"grey");return n(1,o=g),m}function a(f){l=f,n(0,l)}return[l,o,s,a]}class di extends J{constructor(e){super(),K(this,e,gi,_i,X,{})}}const Lt=Ut({type:"FeatureCollection",features:[],schemes:{}}),en=Ut(new Map),sr=Ut(!0),Qt=Ut(""),Jt=Ut("");function hi(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bi(r){let e,n,t,l,o,s;return t=new Et({props:{$$slots:{default:[hi]},$$scope:{ctx:r}}}),t.$on("click",r[15]),{c(){e=S("input"),n=L(),b(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterInterventionText")},m(u,i){$(u,e,i),Ye(e,r[6]),$(u,n,i),v(t,u,i),l=!0,o||(s=st(e,"input",r[14]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&Ye(e,u[6]);const a={};i&8388608&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){l||(_(t.$$.fragment,u),l=!0)},o(u){d(t.$$.fragment,u),l=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function vi(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wi(r){let e,n,t,l,o,s;return t=new Et({props:{$$slots:{default:[vi]},$$scope:{ctx:r}}}),t.$on("click",r[17]),{c(){e=S("input"),n=L(),b(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterSchemeText")},m(u,i){$(u,e,i),Ye(e,r[5]),$(u,n,i),v(t,u,i),l=!0,o||(s=st(e,"input",r[16]),o=!0)},p(u,i){i&32&&e.value!==u[5]&&Ye(e,u[5]);const a={};i&8388608&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){l||(_(t.$$.fragment,u),l=!0)},o(u){d(t.$$.fragment,u),l=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function ki(r){let e,n,t,l,o,s,u,i,a,f,c,g,m,y,C;function O(I){r[11](I)}let T={label:"Authority or region",id:"filterAuthority",choices:r[7],emptyOption:!0};r[2]!==void 0&&(T.value=r[2]),e=new Tt({props:T}),q.push(()=>W(e,"value",O));function N(I){r[12](I)}let D={label:"Funding programme",id:"filterFundingProgramme",choices:r[8],emptyOption:!0};r[3]!==void 0&&(D.value=r[3]),l=new Tt({props:D}),q.push(()=>W(l,"value",N));function E(I){r[13](I)}let P={label:"Current milestone",id:"filterCurrentMilestone",choices:r[9],emptyOption:!0};return r[4]!==void 0&&(P.value=r[4]),u=new Tt({props:P}),q.push(()=>W(u,"value",E)),f=new cn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[bi]},$$scope:{ctx:r}}}),g=new cn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[wi]},$$scope:{ctx:r}}}),y=new di({}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment),s=L(),b(u.$$.fragment),a=L(),b(f.$$.fragment),c=L(),b(g.$$.fragment),m=L(),b(y.$$.fragment)},m(I,M){v(e,I,M),$(I,t,M),v(l,I,M),$(I,s,M),v(u,I,M),$(I,a,M),v(f,I,M),$(I,c,M),v(g,I,M),$(I,m,M),v(y,I,M),C=!0},p(I,M){const A={};M&128&&(A.choices=I[7]),!n&&M&4&&(n=!0,A.value=I[2],V(()=>n=!1)),e.$set(A);const F={};M&256&&(F.choices=I[8]),!o&&M&8&&(o=!0,F.value=I[3],V(()=>o=!1)),l.$set(F);const B={};M&512&&(B.choices=I[9]),!i&&M&16&&(i=!0,B.value=I[4],V(()=>i=!1)),u.$set(B);const H={};M&8388672&&(H.$$scope={dirty:M,ctx:I}),f.$set(H);const j={};M&8388640&&(j.$$scope={dirty:M,ctx:I}),g.$set(j)},i(I){C||(_(e.$$.fragment,I),_(l.$$.fragment,I),_(u.$$.fragment,I),_(f.$$.fragment,I),_(g.$$.fragment,I),_(y.$$.fragment,I),C=!0)},o(I){d(e.$$.fragment,I),d(l.$$.fragment,I),d(u.$$.fragment,I),d(f.$$.fragment,I),d(g.$$.fragment,I),d(y.$$.fragment,I),C=!1},d(I){I&&(p(t),p(s),p(a),p(c),p(m)),w(e,I),w(l,I),w(u,I),w(f,I),w(g,I),w(y,I)}}}function yi(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[10].route.toLocaleString()+"",s,u,i=r[10].area.toLocaleString()+"",a,f,c=r[10].crossing.toLocaleString()+"",g,m,y=r[10].other.toLocaleString()+"",C,O,T=ir(r[10].totalLength).toFixed(1)+"",N,D;return{c(){e=k("Showing "),t=k(n),l=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),g=k(c),m=k(" crossings, "),C=k(y),O=k(`
    other, with total LineString length of `),N=k(T),D=k(" miles)")},m(E,P){$(E,e,P),$(E,t,P),$(E,l,P),$(E,s,P),$(E,u,P),$(E,a,P),$(E,f,P),$(E,g,P),$(E,m,P),$(E,C,P),$(E,O,P),$(E,N,P),$(E,D,P)},p(E,P){P&1&&n!==(n=E[0].size.toLocaleString()+"")&&R(t,n),P&1024&&o!==(o=E[10].route.toLocaleString()+"")&&R(s,o),P&1024&&i!==(i=E[10].area.toLocaleString()+"")&&R(a,i),P&1024&&c!==(c=E[10].crossing.toLocaleString()+"")&&R(g,c),P&1024&&y!==(y=E[10].other.toLocaleString()+"")&&R(C,y),P&1024&&T!==(T=ir(E[10].totalLength).toFixed(1)+"")&&R(N,T)},d(E){E&&(p(e),p(t),p(l),p(s),p(u),p(a),p(f),p(g),p(m),p(C),p(O),p(N),p(D))}}}function Si(r){let e,n,t;function l(s){r[18](s)}let o={id:"show-schemes",$$slots:{default:[yi]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ae({props:o}),q.push(()=>W(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&8389633&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ci(r){let e,n,t,l;return e=new Re({props:{label:"Filters",$$slots:{default:[ki]},$$scope:{ctx:r}}}),t=new nt({props:{small:!0,$$slots:{default:[Si]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const u={};s&8389628&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&8389635&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function ir(r){return r*621371e-9}function Ti(r,e,n){let t,l,o,s;be(r,Jt,B=>n(5,t=B)),be(r,Qt,B=>n(6,l=B)),be(r,Lt,B=>n(19,o=B)),be(r,en,B=>n(20,s=B));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],g=bn.slice(0,-1),m="",y=[],C="",O={area:0,route:0,crossing:0,other:0,totalLength:0};kn(()=>{var G,Y,ee;let B=new Set,H=new Set,j=new Set;for(let Z of s.values())(G=Z.browse)!=null&&G.authority_or_region&&B.add(Z.browse.authority_or_region),(Y=Z.browse)!=null&&Y.funding_programme&&H.add(Z.browse.funding_programme),(ee=Z.browse)!=null&&ee.current_milestone&&j.add(Z.browse.current_milestone);n(7,a=Array.from(B.entries())),a.sort(),n(8,c=bn.map(Z=>[Z,Z])),n(9,y=Array.from(j.entries())),y.sort()});function T(B,H,j,G,Y){let ee=B.toLowerCase(),Z=H.toLowerCase(),Ce=se=>{var de,Ae,ue,ce,$e,Ee;if(ee&&!((de=se.properties.name)!=null&&de.toLowerCase().includes(ee))&&!((Ae=se.properties.description)!=null&&Ae.toLowerCase().includes(ee)))return!1;if(Z||j||G||Y){let Te=s.get(se.properties.scheme_reference);if(j&&((ue=Te.browse)==null?void 0:ue.authority_or_region)!=j||G&&G!=="Other"&&((ce=Te.browse)==null?void 0:ce.funding_programme)!=G||G==="Other"&&g.includes((($e=Te.browse)==null?void 0:$e.funding_programme)??"")||Y&&((Ee=Te.browse)==null?void 0:Ee.current_milestone)!=Y||Z&&!Te.scheme_reference.toLowerCase().includes(Z)&&!(Te.scheme_name??"").toLowerCase().includes(Z))return!1}return!0};n(0,u=new Set(o.features.filter(Ce).map(se=>se.properties.scheme_reference))),n(10,O={area:0,route:0,crossing:0,other:0,totalLength:0});let Le=se=>{var de,Ae;return!(!u.has(se.properties.scheme_reference)||ee&&!((de=se.properties.name)!=null&&de.toLowerCase().includes(ee))&&!((Ae=se.properties.description)!=null&&Ae.toLowerCase().includes(ee)))};for(let se of o.features)Le(se)?(delete se.properties.hide_while_editing,n(10,O[se.properties.intervention_type]++,O),se.geometry.type=="LineString"&&se.properties.length_meters&&n(10,O.totalLength+=se.properties.length_meters,O)):se.properties.hide_while_editing=!0;Lt.set(o),n(10,O)}function N(B){f=B,n(2,f)}function D(B){m=B,n(3,m)}function E(B){C=B,n(4,C)}function P(){l=this.value,Qt.set(l)}const I=()=>At(Qt,l="",l);function M(){t=this.value,Jt.set(t)}const A=()=>At(Jt,t="",t);function F(B){i=B,n(1,i)}return r.$$set=B=>{"schemesToBeShown"in B&&n(0,u=B.schemesToBeShown),"show"in B&&n(1,i=B.show)},r.$$.update=()=>{r.$$.dirty&124&&T(l,t,f,m,C)},[u,i,f,m,C,t,l,a,c,y,O,N,D,E,P,I,M,A,F]}class Oi extends J{constructor(e){super(),K(this,e,Ti,Ci,X,{schemesToBeShown:0,show:1})}}function Ai(r){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Li(r){let e,n,t,l,o;return t=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ai]},$$scope:{ctx:r}}}),{c(){e=S("p"),n=k("License: "),b(t.$$.fragment),l=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),h(e,n),v(t,e,null),h(e,l),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(_(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class Fe extends J{constructor(e){super(),K(this,e,null,Li,X,{})}}function ar(r,e,n){const t=r.slice();return t[2]=e[n],t}function fr(r,e,n){const t=r.slice();return t[5]=e[n],t}function ur(r){let e,n;return{c(){e=S("span"),n=k(`
    `),Se(e,"background",r[5]),Se(e,"width","100%"),Se(e,"border","1px solid black")},m(t,l){$(t,e,l),h(e,n)},p(t,l){l&1&&Se(e,"background",t[5])},d(t){t&&p(e)}}}function cr(r){let e,n=r[2]+"",t;return{c(){e=S("span"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&R(t,n)},d(l){l&&p(e)}}}function Ii(r){let e,n,t,l=Ne(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=ur(fr(r,l,i));let s=Ne(r[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=cr(ar(r,s,i));return{c(){e=S("div");for(let i=0;i<o.length;i+=1)o[i].c();n=L(),t=S("div");for(let i=0;i<u.length;i+=1)u[i].c();Se(e,"display","flex"),Se(t,"display","flex"),Se(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){l=Ne(i[0]);let f;for(f=0;f<l.length;f+=1){const c=fr(i,l,f);o[f]?o[f].p(c,a):(o[f]=ur(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){s=Ne(i[1]);let f;for(f=0;f<s.length;f+=1){const c=ar(i,s,f);u[f]?u[f].p(c,a):(u[f]=cr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:le,o:le,d(i){i&&(p(e),p(n),p(t)),Ot(o,i),Ot(u,i)}}}function Pi(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ke extends J{constructor(e){super(),K(this,e,Pi,Ii,X,{colorScale:0,limits:1})}}function $r(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Mi(r){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ni(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ei(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Di(r){let e,n,t,l,o,s,u,i,a,f,c,g;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ni]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Fi]},$$scope:{ctx:r}}}),f=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){e=S("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=L(),i=S("p"),a=k("License: "),b(f.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(m,u,y),$(m,i,y),h(i,a),v(f,i,null),h(i,c),g=!0},p(m,y){const C={};y&65536&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const O={};y&65536&&(O.$$scope={dirty:y,ctx:m}),o.$set(O);const T={};y&65536&&(T.$$scope={dirty:y,ctx:m}),f.$set(T)},i(m){g||(_(t.$$.fragment,m),_(o.$$.fragment,m),_(f.$$.fragment,m),g=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),g=!1},d(m){m&&(p(e),p(u),p(i)),w(t),w(o),w(f)}}}function ji(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Di]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function pr(r){let e,n;return e=new Ke({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ri(r){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bi(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zi(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gi(r){let e,n,t,l,o,s,u,i,a,f,c,g,m,y;return o=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Bi]},$$scope:{ctx:r}}}),u=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),g=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[zi]},$$scope:{ctx:r}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=S("p"),l=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(u.$$.fragment),i=k("."),a=L(),f=S("p"),c=k("License: "),b(g.$$.fragment),m=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(C,O){$(C,e,O),$(C,n,O),$(C,t,O),h(t,l),v(o,t,null),h(t,s),v(u,t,null),h(t,i),$(C,a,O),$(C,f,O),h(f,c),v(g,f,null),h(f,m),y=!0},p(C,O){const T={};O&65536&&(T.$$scope={dirty:O,ctx:C}),o.$set(T);const N={};O&65536&&(N.$$scope={dirty:O,ctx:C}),u.$set(N);const D={};O&65536&&(D.$$scope={dirty:O,ctx:C}),g.$set(D)},i(C){y||(_(o.$$.fragment,C),_(u.$$.fragment,C),_(g.$$.fragment,C),y=!0)},o(C){d(o.$$.fragment,C),d(u.$$.fragment,C),d(g.$$.fragment,C),y=!1},d(C){C&&(p(e),p(n),p(t),p(a),p(f)),w(o),w(u),w(g)}}}function Ui(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Gi]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function mr(r){let e,n;return e=new Ke({props:{colorScale:r[4],limits:r[6]()}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qi(r){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(r){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xi(r){let e,n,t,l,o,s,u,i,a;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Wi]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Vi]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=S("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),l=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=L(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const m={};c&65536&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function Yi(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Xi]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function _r(r){let e,n,t,l;return t=new Ke({props:{colorScale:r[4],limits:r[6]().map(na)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",n=L(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),l=!0},p:le,i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function Qi(r){let e,n,t,l=r[15].toLocaleString()+"",o,s,u=r[14]+"",i;return{c(){e=S("p"),n=k("There are "),t=S("b"),o=k(l),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){$(a,e,f),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&R(o,l),f&8192&&u!==(u=a[14]+"")&&R(i,u)},d(a){a&&p(e)}}}function Ji(r){let e,n,t=r[14]+"",l,o,s,u=r[15]+"",i,a;return{c(){e=S("p"),n=k("Households in "),l=k(t),o=k(` have an average of
          `),s=S("b"),i=k(u),a=k(`
          cars`)},m(f,c){$(f,e,c),h(e,n),h(e,l),h(e,o),h(e,s),h(s,i),h(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&R(l,t),c&8200&&u!==(u=f[15]+"")&&R(i,u)},d(f){f&&p(e)}}}function Ki(r){let e,n,t=r[15]+"",l,o,s,u=r[14]+"",i,a;return{c(){e=S("p"),n=S("b"),l=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){$(f,e,c),h(e,n),h(n,l),h(n,o),h(e,s),h(e,i),h(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&R(l,t),c&8192&&u!==(u=f[14]+"")&&R(i,u)},d(f){f&&p(e)}}}function Zi(r){$r(r);let e;function n(o,s){return o[3]=="percent_households_with_car"?Ki:o[3]=="average_cars_per_household"?Ji:Qi}let t=n(r),l=t(r);return{c(){l.c(),e=Me()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){$r(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function xi(r){let e,n;return e=new fe({props:{$$slots:{default:[Zi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ea(r){let e,n,t,l;const o=[z(xe),{sourceLayer:xe},{paint:{"fill-color":ke(["get",r[3]],r[6](),r[4]),"fill-opacity":x(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[xi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Je({props:s}),e.$on("click",r[5]);const u=[z(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&88?ne(o,[f&0&&ie(z(xe)),f&0&&{sourceLayer:xe},f&88&&{paint:{"fill-color":ke(["get",a[3]],a[6](),a[4]),"fill-opacity":x(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&8?ne(u,[f&0&&ie(z(`${xe}-outline`)),f&0&&{sourceLayer:xe},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function ta(r){let e,n,t,l,o,s,u,i,a,f,c,g,m,y;function C(A){r[7](A)}let O={id:"percent_households_with_car",$$slots:{right:[ji],default:[Mi]},$$scope:{ctx:r}};r[0]!==void 0&&(O.checked=r[0]),e=new ae({props:O}),q.push(()=>W(e,"checked",C)),e.$on("change",r[8]);let T=r[3]=="percent_households_with_car"&&pr(r);function N(A){r[9](A)}let D={id:"average_cars_per_household",$$slots:{right:[Ui],default:[Ri]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),o=new ae({props:D}),q.push(()=>W(o,"checked",N)),o.$on("change",r[10]);let E=r[3]=="average_cars_per_household"&&mr(r);function P(A){r[11](A)}let I={id:"population_density",$$slots:{right:[Yi],default:[qi]},$$scope:{ctx:r}};r[2]!==void 0&&(I.checked=r[2]),a=new ae({props:I}),q.push(()=>W(a,"checked",P)),a.$on("change",r[12]);let M=r[3]=="population_density"&&_r(r);return m=new we({props:{url:`pmtiles://${ve()}/v1/${xe}.pmtiles`,$$slots:{default:[ea]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),T&&T.c(),l=L(),b(o.$$.fragment),u=L(),E&&E.c(),i=L(),b(a.$$.fragment),c=L(),M&&M.c(),g=L(),b(m.$$.fragment)},m(A,F){v(e,A,F),$(A,t,F),T&&T.m(A,F),$(A,l,F),v(o,A,F),$(A,u,F),E&&E.m(A,F),$(A,i,F),v(a,A,F),$(A,c,F),M&&M.m(A,F),$(A,g,F),v(m,A,F),y=!0},p(A,[F]){const B={};F&65536&&(B.$$scope={dirty:F,ctx:A}),!n&&F&1&&(n=!0,B.checked=A[0],V(()=>n=!1)),e.$set(B),A[3]=="percent_households_with_car"?T?(T.p(A,F),F&8&&_(T,1)):(T=pr(A),T.c(),_(T,1),T.m(l.parentNode,l)):T&&(me(),d(T,1,1,()=>{T=null}),_e());const H={};F&65536&&(H.$$scope={dirty:F,ctx:A}),!s&&F&2&&(s=!0,H.checked=A[1],V(()=>s=!1)),o.$set(H),A[3]=="average_cars_per_household"?E?(E.p(A,F),F&8&&_(E,1)):(E=mr(A),E.c(),_(E,1),E.m(i.parentNode,i)):E&&(me(),d(E,1,1,()=>{E=null}),_e());const j={};F&65536&&(j.$$scope={dirty:F,ctx:A}),!f&&F&4&&(f=!0,j.checked=A[2],V(()=>f=!1)),a.$set(j),A[3]=="population_density"?M?(M.p(A,F),F&8&&_(M,1)):(M=_r(A),M.c(),_(M,1),M.m(g.parentNode,g)):M&&(me(),d(M,1,1,()=>{M=null}),_e());const G={};F&65544&&(G.$$scope={dirty:F,ctx:A}),m.$set(G)},i(A){y||(_(e.$$.fragment,A),_(T),_(o.$$.fragment,A),_(E),_(a.$$.fragment,A),_(M),_(m.$$.fragment,A),y=!0)},o(A){d(e.$$.fragment,A),d(T),d(o.$$.fragment,A),d(E),d(a.$$.fragment,A),d(M),d(m.$$.fragment,A),y=!1},d(A){A&&(p(t),p(l),p(u),p(i),p(c),p(g)),w(e,A),T&&T.d(A),w(o,A),E&&E.d(A),w(a,A),M&&M.d(A),w(m,A)}}}let xe="census_output_areas";const na=r=>r.toLocaleString();function ra(r,e,n){let t=oe.sequential_low_to_high,l=!1,o=!1,s=!1,u="";function i(O){let T=O.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${T}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${T}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(O){l=O,n(0,l)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(O){o=O,n(1,o)}const m=()=>{n(0,l=!1),n(2,s=!1)};function y(O){s=O,n(2,s)}const C=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[l,o,s,u,t,i,a,f,c,g,m,y,C]}class la extends J{constructor(e){super(),K(this,e,ra,ta,X,{})}}function oa(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function sa(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ia(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[sa]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=S("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of December 2022."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function aa(r){let e,n,t;return n=new ge({props:{$$slots:{default:[ia]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function fa(r){let e,n=r[3].name+"",t;return{c(){e=S("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function ua(r){let e,n;return e=new fe({props:{$$slots:{default:[fa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ca(r){let e,n,t,l;const o=[z(pt),{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ua]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Je({props:s}),e.$on("click",pa);const u=[z(`${pt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ne(o,[f&0&&ie(z(pt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ie(z(`${pt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function $a(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:pt,$$slots:{right:[aa],default:[oa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),q.push(()=>W(e,"checked",s)),l=new It({props:{data:`${ve()}/v1/${pt}.geojson`,$$slots:{default:[ca]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let pt="combined_authorities";function pa(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function ma(r,e,n){let t=oe.combined_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class _a extends J{constructor(e){super(),K(this,e,ma,$a,X,{})}}function ga(r){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function da(r){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ha(r){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ba(r){let e,n,t,l,o,s,u,i,a;return t=new Q({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[da]},$$scope:{ctx:r}}}),o=new Q({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ha]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=S("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),l=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),u=L(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function va(r){let e,n,t;return n=new ge({props:{$$slots:{default:[ba]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function gr(r){let e,n;return e=new Ke({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function wa(r){let e,n=r[4].LSOA11CD+"",t,l,o,s=r[4].score+"",u,i,a,f,c,g=r[4].rank.toLocaleString()+"",m,y;return{c(){e=S("p"),t=k(n),l=k(` has an IMD score of
        `),o=S("b"),u=k(s),i=L(),a=S("p"),f=k("Rank: "),c=S("b"),m=k(g),y=k(`
        / 32,844 LSOAs`)},m(C,O){$(C,e,O),h(e,t),h(e,l),h(e,o),h(o,u),$(C,i,O),$(C,a,O),h(a,f),h(a,c),h(c,m),h(a,y)},p(C,O){O&16&&n!==(n=C[4].LSOA11CD+"")&&R(t,n),O&16&&s!==(s=C[4].score+"")&&R(u,s),O&16&&g!==(g=C[4].rank.toLocaleString()+"")&&R(m,g)},d(C){C&&(p(e),p(i),p(a))}}}function ka(r){let e,n;return e=new fe({props:{$$slots:{default:[wa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ya(r){let e,n,t,l;const o=[z(Ge),{sourceLayer:Ge},{paint:{"fill-color":ke(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":x(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[ka]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Je({props:s});const u=[z(`${Ge}-outline`),{sourceLayer:Ge},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&7?ne(o,[f&0&&ie(z(Ge)),f&0&&{sourceLayer:Ge},f&6&&{paint:{"fill-color":ke(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":x(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?ne(u,[f&0&&ie(z(`${Ge}-outline`)),f&0&&{sourceLayer:Ge},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Sa(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:Ge,$$slots:{right:[va],default:[ga]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),q.push(()=>W(e,"checked",u));let a=r[0]&&gr(r);return o=new we({props:{url:`pmtiles://${ve()}/v1/${Ge}.pmtiles`,$$slots:{default:[ya]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=gr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let Ge="imd";function Ca(r,e,n){let t=oe.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class Ta extends J{constructor(e){super(),K(this,e,Ca,Sa,X,{})}}function Oa(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Aa(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function La(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Aa]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=S("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Ia(r){let e,n,t;return n=new ge({props:{$$slots:{default:[La]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Pa(r){let e,n=r[3].name+"",t;return{c(){e=S("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Ma(r){let e,n;return e=new fe({props:{$$slots:{default:[Pa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Na(r){let e,n,t,l;const o=[z(mt),{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ma]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Je({props:s}),e.$on("click",Ea);const u=[z(`${mt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ne(o,[f&0&&ie(z(mt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ie(z(`${mt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Fa(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:mt,$$slots:{right:[Ia],default:[Oa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),q.push(()=>W(e,"checked",s)),l=new It({props:{data:`${ve()}/v1/${mt}.geojson`,$$slots:{default:[Na]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let mt="local_authority_districts";function Ea(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Da(r,e,n){let t=oe.local_authority_districts,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ja extends J{constructor(e){super(),K(this,e,Da,Fa,X,{})}}function Ra(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Ba(r){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ha(r){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function za(r){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ga(r){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ua(r){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qa(r){let e,n,t,l,o,s,u,i,a,f,c,g,m,y,C,O,T,N,D,E,P,I;return t=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ba]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Ha]},$$scope:{ctx:r}}}),u=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[za]},$$scope:{ctx:r}}}),m=new Q({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Ga]},$$scope:{ctx:r}}}),N=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ua]},$$scope:{ctx:r}}}),P=new Fe({}),{c(){e=S("p"),n=k("LPAs may be a "),b(t.$$.fragment),l=k(", "),b(o.$$.fragment),s=k("y, or "),b(u.$$.fragment),i=k("."),a=L(),f=S("p"),c=S("strong"),g=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(m.$$.fragment),y=k(" to get more details."),C=L(),O=S("p"),T=k("Data from ONS Geography via "),b(N.$$.fragment),D=k(", as of November 2022."),E=L(),b(P.$$.fragment)},m(M,A){$(M,e,A),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),v(u,e,null),h(e,i),$(M,a,A),$(M,f,A),h(f,c),h(c,g),v(m,c,null),h(c,y),$(M,C,A),$(M,O,A),h(O,T),v(N,O,null),h(O,D),$(M,E,A),v(P,M,A),I=!0},p(M,A){const F={};A&16&&(F.$$scope={dirty:A,ctx:M}),t.$set(F);const B={};A&16&&(B.$$scope={dirty:A,ctx:M}),o.$set(B);const H={};A&16&&(H.$$scope={dirty:A,ctx:M}),u.$set(H);const j={};A&16&&(j.$$scope={dirty:A,ctx:M}),m.$set(j);const G={};A&16&&(G.$$scope={dirty:A,ctx:M}),N.$set(G)},i(M){I||(_(t.$$.fragment,M),_(o.$$.fragment,M),_(u.$$.fragment,M),_(m.$$.fragment,M),_(N.$$.fragment,M),_(P.$$.fragment,M),I=!0)},o(M){d(t.$$.fragment,M),d(o.$$.fragment,M),d(u.$$.fragment,M),d(m.$$.fragment,M),d(N.$$.fragment,M),d(P.$$.fragment,M),I=!1},d(M){M&&(p(e),p(a),p(f),p(C),p(O),p(E)),w(t),w(o),w(u),w(m),w(N),w(P,M)}}}function Wa(r){let e,n,t;return n=new ge({props:{$$slots:{default:[qa]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Va(r){let e,n=r[3].name+"",t;return{c(){e=S("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Xa(r){let e,n;return e=new fe({props:{$$slots:{default:[Va,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ya(r){let e,n,t,l;const o=[z(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Xa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Je({props:s});const u=[z(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ne(o,[f&0&&ie(z(Ue)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ie(z(`${Ue}-outline`)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Qa(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:Ue,$$slots:{right:[Wa],default:[Ra]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${Ue}.pmtiles`,$$slots:{default:[Ya]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let Ue="local_planning_authorities";function Ja(r,e,n){let t=oe.local_planning_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Ka extends J{constructor(e){super(),K(this,e,Ja,Qa,X,{})}}function Za(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function xa(r){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ef(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[xa]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=S("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function tf(r){let e,n,t;return n=new ge({props:{$$slots:{default:[ef]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function nf(r){let e,n=r[3].Name+"",t;return{c(){e=S("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&R(t,n)},d(l){l&&p(e)}}}function rf(r){let e,n;return e=new fe({props:{$$slots:{default:[nf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function lf(r){let e,n,t,l;const o=[z(qe),{sourceLayer:qe},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[rf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Je({props:s}),e.$on("click",sf);const u=[z(`${qe}-outline`),{sourceLayer:qe},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ne(o,[f&0&&ie(z(qe)),f&0&&{sourceLayer:qe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ie(z(`${qe}-outline`)),f&0&&{sourceLayer:qe},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function of(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:qe,$$slots:{right:[tf],default:[Za]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${qe}.pmtiles`,$$slots:{default:[lf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let qe="parliamentary_constituencies";function sf(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function af(r,e,n){let t=oe.parliamentary_constituencies,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ff extends J{constructor(e){super(),K(this,e,af,of,X,{})}}function uf(r){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(r){let e;return{c(){e=k(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pf(r){let e;return{c(){e=k(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mf(r){let e,n,t,l,o,s,u,i,a,f,c,g,m,y,C,O;return t=new Q({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[cf]},$$scope:{ctx:r}}}),f=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[$f]},$$scope:{ctx:r}}}),g=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[pf]},$$scope:{ctx:r}}}),C=new Fe({}),{c(){e=S("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),l=k(`. The measurements are annual means, in units of
        gm
        `),o=S("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=L(),i=S("p"),a=k("The noise layer is from "),b(f.$$.fragment),c=k(", using 2017 data. See their "),b(g.$$.fragment),m=k("."),y=L(),b(C.$$.fragment)},m(T,N){$(T,e,N),h(e,n),v(t,e,null),h(e,l),h(e,o),h(e,s),$(T,u,N),$(T,i,N),h(i,a),v(f,i,null),h(i,c),v(g,i,null),h(i,m),$(T,y,N),v(C,T,N),O=!0},p(T,N){const D={};N&2048&&(D.$$scope={dirty:N,ctx:T}),t.$set(D);const E={};N&2048&&(E.$$scope={dirty:N,ctx:T}),f.$set(E);const P={};N&2048&&(P.$$scope={dirty:N,ctx:T}),g.$set(P)},i(T){O||(_(t.$$.fragment,T),_(f.$$.fragment,T),_(g.$$.fragment,T),_(C.$$.fragment,T),O=!0)},o(T){d(t.$$.fragment,T),d(f.$$.fragment,T),d(g.$$.fragment,T),d(C.$$.fragment,T),O=!1},d(T){T&&(p(e),p(u),p(i),p(y)),w(t),w(f),w(g),w(C,T)}}}function _f(r){let e,n,t;return n=new ge({props:{$$slots:{default:[mf]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function dr(r){let e,n,t,l,o=r[3](r[0])+"",s,u,i,a,f,c,g,m,y,C,O,T,N;function D(A){r[7](A)}let E={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(E.value=r[0]),e=new Tt({props:E}),q.push(()=>W(e,"value",D));const P=[df,gf],I=[];function M(A,F){return A[0]=="Noise"?0:1}return m=M(r),y=I[m]=P[m](r),{c(){b(e.$$.fragment),t=L(),l=S("p"),s=k(o),u=L(),i=S("div"),a=S("label"),f=k(`Opacity
      `),c=S("input"),g=L(),y.c(),C=Me(),U(c,"type","range"),U(c,"min","0"),U(c,"max","100")},m(A,F){v(e,A,F),$(A,t,F),$(A,l,F),h(l,s),$(A,u,F),$(A,i,F),h(i,a),h(a,f),h(a,c),Ye(c,r[2]),$(A,g,F),I[m].m(A,F),$(A,C,F),O=!0,T||(N=[st(c,"change",r[8]),st(c,"input",r[8])],T=!0)},p(A,F){const B={};!n&&F&1&&(n=!0,B.value=A[0],V(()=>n=!1)),e.$set(B),(!O||F&1)&&o!==(o=A[3](A[0])+"")&&R(s,o),F&4&&Ye(c,A[2]);let H=m;m=M(A),m===H?I[m].p(A,F):(me(),d(I[H],1,1,()=>{I[H]=null}),_e(),y=I[m],y?y.p(A,F):(y=I[m]=P[m](A),y.c()),_(y,1),y.m(C.parentNode,C))},i(A){O||(_(e.$$.fragment,A),_(y),O=!0)},o(A){d(e.$$.fragment,A),d(y),O=!1},d(A){A&&(p(t),p(l),p(u),p(i),p(g),p(C)),w(e,A),I[m].d(A),T=!1,il(N)}}}function gf(r){let e,n,t;return{c(){e=S("img"),Pn(e.src,n=r[5](r[0]))||U(e,"src",n),U(e,"width",150),U(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!Pn(e.src,n=l[5](l[0]))&&U(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&U(e,"alt",t)},i:le,o:le,d(l){l&&p(e)}}}function df(r){let e,n;return e=new Ke({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function hf(r){let e,n;const t=[z("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new Ul({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&6?ne(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function bf(r){let e,n,t,l,o,s;function u(f){r[6](f)}let i={id:"pollution",$$slots:{right:[_f],default:[uf]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new ae({props:i}),q.push(()=>W(e,"checked",u));let a=r[1]&&dr(r);return o=new ro({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&_(a,1)):(a=dr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&1&&(m.tiles=[f[4](f[0])]),c&2054&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}function vf(r,e,n){let t,l=!1,o=50,s="PM25_viridis";function u(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${C}`}function f(y){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${C}`}function c(y){l=y,n(1,l)}function g(y){s=y,n(0,s)}function m(){o=Dt(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,l,o,i,a,f,c,g,m]}class wf extends J{constructor(e){super(),K(this,e,vf,bf,X,{})}}function kf(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function yf(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sf(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[yf]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=S("p"),n=k("Data from "),b(t.$$.fragment),l=k(", as of May 2023."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Cf(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Sf]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Tf(r){let e,n=r[3].name+"",t;return{c(){e=S("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Of(r){let e,n;return e=new fe({props:{$$slots:{default:[Tf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Af(r){let e,n,t,l;const o=[z(We),{sourceLayer:We},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Of]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Je({props:s}),e.$on("click",If);const u=[z(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),l=!0},p(a,f){const c=f&3?ne(o,[f&0&&ie(z(We)),f&0&&{sourceLayer:We},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ie(z(`${We}-outline`)),f&0&&{sourceLayer:We},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Lf(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:We,$$slots:{right:[Cf],default:[kf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${We}.pmtiles`,$$slots:{default:[Af]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let We="wards";function If(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Pf(r,e,n){let t=oe.wards,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Mf extends J{constructor(e){super(),K(this,e,Pf,Lf,X,{})}}function Nf(r){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ff(r){let e,n,t,l;return t=new Q({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Nf]},$$scope:{ctx:r}}}),{c(){e=S("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),l=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&p(e),w(t)}}}class it extends J{constructor(e){super(),K(this,e,null,Ff,X,{})}}function Ef(r){let e,n,t;return e=new Oe({props:{color:oe.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Df(r){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jf(r){let e,n,t,l,o,s,u,i,a;return o=new Q({props:{href:"https://gtfs.org",$$slots:{default:[Df]},$$scope:{ctx:r}}}),i=new it({}),{c(){e=S("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=S("p"),l=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=L(),b(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,l),v(o,t,null),h(t,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(_(o.$$.fragment,f),_(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(i,f)}}}function Rf(r){let e,n,t;return n=new ge({props:{$$slots:{default:[jf]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Bf(r){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hf(r){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zf(r){let e;function n(o,s){return o[2].has_bus_lane?Hf:Bf}let t=n(r),l=t(r);return{c(){l.c(),e=Me()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Gf(r){let e,n;return e=new fe({props:{$$slots:{default:[zf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Uf(r){let e,n;const t=[z(_t),{sourceLayer:_t},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],oe.bus_route_with_lane,oe.bus_route_without_lane],"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Gf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ie(z(_t)),s&0&&{sourceLayer:_t},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function qf(r){let e,n,t,l,o;function s(i){r[1](i)}let u={id:_t,$$slots:{right:[Rf],default:[Ef]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${_t}.pmtiles`,$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let _t="bus_routes";function Wf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Vf extends J{constructor(e){super(),K(this,e,Wf,qf,X,{})}}function hr(r){const e=nu(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function br(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function Xf(r){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yf(r){let e,n,t,l,o,s,u,i;return u=new it({}),{c(){e=S("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=S("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=L(),o=S("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=L(),b(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,l,f),$(a,o,f),$(a,s,f),v(u,a,f),i=!0},p:le,i(a){i||(_(u.$$.fragment,a),i=!0)},o(a){d(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(s)),w(u,a)}}}function Qf(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Yf]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function vr(r){let e,n,t;return n=new nt({props:{$$slots:{default:[Kf]},$$scope:{ctx:r}}}),{c(){e=S("div"),b(n.$$.fragment),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Jf(r){let e,n,t=r[9]+"",l,o,s;return e=new Oe({props:{color:r[10]}}),{c(){b(e.$$.fragment),n=L(),l=k(t),o=L()},m(u,i){v(e,u,i),$(u,n,i),$(u,l,i),$(u,o,i),s=!0},p:le,i(u){s||(_(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(l),p(o)),w(e,u)}}}function wr(r){let e,n,t;function l(s){r[4](s,r[6])}let o={id:r[6],$$slots:{default:[Jf]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new ae({props:o}),q.push(()=>W(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){r=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:r}),!n&&u&6&&(n=!0,i.checked=r[1][r[6]],V(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Kf(r){let e,n,t=Ne(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=wr(br(r,t,s));const o=s=>d(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Me()},m(s,u){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=Ne(s[2]);let i;for(i=0;i<t.length;i+=1){const a=br(s,t,i);l[i]?(l[i].p(a,u),_(l[i],1)):(l[i]=wr(a),l[i].c(),_(l[i],1),l[i].m(e.parentNode,e))}for(me(),i=t.length;i<l.length;i+=1)o(i);_e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)_(l[u]);n=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)d(l[u]);n=!1},d(s){s&&p(e),Ot(l,s)}}}function Zf(r){hr(r);let e,n=r[6]+"",t,l,o,s,u,i=r[7]+"",a,f,c,g,m=r[8]+"",y;return{c(){e=S("h2"),t=k(n),l=L(),o=S("p"),s=k("Direction: "),u=S("b"),a=L(),f=S("p"),c=k("Width: "),g=S("b"),y=k(m)},m(C,O){$(C,e,O),h(e,t),$(C,l,O),$(C,o,O),h(o,s),h(o,u),u.innerHTML=i,$(C,a,O),$(C,f,O),h(f,c),h(f,g),h(g,y)},p(C,O){hr(C),O&32&&n!==(n=C[6]+"")&&R(t,n),O&32&&i!==(i=C[7]+"")&&(u.innerHTML=i),O&32&&m!==(m=C[8]+"")&&R(y,m)},d(C){C&&(p(e),p(l),p(o),p(a),p(f))}}}function xf(r){let e,n;return e=new fe({props:{$$slots:{default:[Zf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function eu(r){let e,n;const t=[z(gt),{sourceLayer:gt},{paint:{"line-color":Kt(["get","kind"],{track:oe.cycle_paths.track,lane:oe.cycle_paths.lane,shared_use_segregated:oe.cycle_paths.shared_use_segregated,shared_use_unsegregated:oe.cycle_paths.shared_use_unsegregated},"red"),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:kr(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[xf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new ye({props:l}),e.$on("click",ru),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ie(z(gt)),s&0&&{sourceLayer:gt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:kr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function tu(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:gt,$$slots:{right:[Qf],default:[Xf]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),q.push(()=>W(e,"checked",u));let a=r[0]&&vr(r);return o=new we({props:{url:`pmtiles://${ve()}/v1/${gt}.pmtiles`,$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=vr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&8195&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let gt="cycle_paths";function nu(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function ru(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function kr(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function lu(r,e,n){let t=[["track","Separated tracks",oe.cycle_paths.track],["lane","Unprotected lanes",oe.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",oe.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",oe.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){l=i,n(0,l)}function u(i,a){r.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[l,o,t,s,u]}class ou extends J{constructor(e){super(),K(this,e,lu,tu,X,{})}}function su(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function iu(r){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function au(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[iu]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=S("p"),n=k("Data from the "),b(t.$$.fragment),l=k(", as of September 2021."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function fu(r){let e,n,t;return n=new ge({props:{$$slots:{default:[au]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function uu(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&R(t,n)},d(l){l&&p(e)}}}function cu(r){let e,n;return e=new fe({props:{$$slots:{default:[uu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $u(r){let e,n;const t=[z(dt),{sourceLayer:dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[cu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ie(z(dt)),s&0&&{sourceLayer:dt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function pu(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:dt,$$slots:{right:[fu],default:[su]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${dt}.pmtiles`,$$slots:{default:[$u]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let dt="mrn";function mu(r,e,n){let t=oe.mrn,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class _u extends J{constructor(e){super(),K(this,e,mu,pu,X,{})}}function gu(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function du(r){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hu(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[du]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=S("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),l=k(", downloaded on 22/01/2024."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function bu(r){let e,n,t;return n=new ge({props:{$$slots:{default:[hu]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function yr(r){let e,n,t,l=r[3].Desc_+"",o;return{c(){e=S("li"),n=k("Description: "),t=S("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].Desc_+"")&&R(o,l)},d(s){s&&p(e)}}}function Sr(r){let e,n,t,l=r[3].Greenway+"",o;return{c(){e=S("li"),n=k("Is greenway: "),t=S("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].Greenway+"")&&R(o,l)},d(s){s&&p(e)}}}function Cr(r){let e,n,t,l=r[3].RouteType+"",o;return{c(){e=S("li"),n=k("Route type: "),t=S("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].RouteType+"")&&R(o,l)},d(s){s&&p(e)}}}function Tr(r){let e,n,t,l=r[3].RouteNo+"",o;return{c(){e=S("li"),n=k("Route number: "),t=S("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].RouteNo+"")&&R(o,l)},d(s){s&&p(e)}}}function Or(r){let e,n,t,l=r[3].RouteCat+"",o;return{c(){e=S("li"),n=k("Route Category: "),t=S("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].RouteCat+"")&&R(o,l)},d(s){s&&p(e)}}}function Ar(r){let e,n,t,l=r[3].OpenStatus+"",o;return{c(){e=S("li"),n=k("Open Status: "),t=S("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].OpenStatus+"")&&R(o,l)},d(s){s&&p(e)}}}function Lr(r){let e,n,t,l=r[3].Surface+"",o;return{c(){e=S("li"),n=k("Surface: "),t=S("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].Surface+"")&&R(o,l)},d(s){s&&p(e)}}}function Ir(r){let e,n,t,l=r[3].Quality+"",o;return{c(){e=S("li"),n=k("Quality: "),t=S("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].Quality+"")&&R(o,l)},d(s){s&&p(e)}}}function Pr(r){let e,n,t,l=r[3].RoadClass+"",o;return{c(){e=S("li"),n=k("Road Class: "),t=S("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=s[3].RoadClass+"")&&R(o,l)},d(s){s&&p(e)}}}function vu(r){let e,n,t,l,o,s,u,i,a,f=r[3].Desc_&&yr(r),c=r[3].Greenway&&Sr(r),g=r[3].RouteType&&Cr(r),m=r[3].RouteNo&&Tr(r),y=r[3].RouteCat&&Or(r),C=r[3].OpenStatus&&Ar(r),O=r[3].Surface&&Lr(r),T=r[3].Quality&&Ir(r),N=r[3].RoadClass&&Pr(r);return{c(){e=S("ul"),f&&f.c(),n=L(),c&&c.c(),t=L(),g&&g.c(),l=L(),m&&m.c(),o=L(),y&&y.c(),s=L(),C&&C.c(),u=L(),O&&O.c(),i=L(),T&&T.c(),a=L(),N&&N.c()},m(D,E){$(D,e,E),f&&f.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),g&&g.m(e,null),h(e,l),m&&m.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),C&&C.m(e,null),h(e,u),O&&O.m(e,null),h(e,i),T&&T.m(e,null),h(e,a),N&&N.m(e,null)},p(D,E){D[3].Desc_?f?f.p(D,E):(f=yr(D),f.c(),f.m(e,n)):f&&(f.d(1),f=null),D[3].Greenway?c?c.p(D,E):(c=Sr(D),c.c(),c.m(e,t)):c&&(c.d(1),c=null),D[3].RouteType?g?g.p(D,E):(g=Cr(D),g.c(),g.m(e,l)):g&&(g.d(1),g=null),D[3].RouteNo?m?m.p(D,E):(m=Tr(D),m.c(),m.m(e,o)):m&&(m.d(1),m=null),D[3].RouteCat?y?y.p(D,E):(y=Or(D),y.c(),y.m(e,s)):y&&(y.d(1),y=null),D[3].OpenStatus?C?C.p(D,E):(C=Ar(D),C.c(),C.m(e,u)):C&&(C.d(1),C=null),D[3].Surface?O?O.p(D,E):(O=Lr(D),O.c(),O.m(e,i)):O&&(O.d(1),O=null),D[3].Quality?T?T.p(D,E):(T=Ir(D),T.c(),T.m(e,a)):T&&(T.d(1),T=null),D[3].RoadClass?N?N.p(D,E):(N=Pr(D),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},d(D){D&&p(e),f&&f.d(),c&&c.d(),g&&g.d(),m&&m.d(),y&&y.d(),C&&C.d(),O&&O.d(),T&&T.d(),N&&N.d()}}}function wu(r){let e,n;return e=new fe({props:{$$slots:{default:[vu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ku(r){let e,n;const t=[z(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[wu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ie(z(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function yu(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:ht,$$slots:{right:[bu],default:[gu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${ht}.pmtiles`,$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let ht="national_cycle_network";function Su(r,e,n){let t=oe.national_cycle_network,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Cu extends J{constructor(e){super(),K(this,e,Su,yu,X,{})}}function Tu(r){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ou(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Au(r){let e,n,t,l,o,s,u,i,a;return u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ou]},$$scope:{ctx:r}}}),{c(){e=S("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=L(),t=S("p"),t.textContent="Data valid as of 1 January, 2024",l=L(),o=S("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(_(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),w(u)}}}function Lu(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Au]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Mr(r){let e,n;return e=new Ke({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Iu(r){let e,n,t,l=r[4].side+"",o,s,u,i,a,f=r[4].average+"",c,g,m,y,C,O,T=r[4].minimum+"",N,D;return{c(){e=S("p"),n=k("Side of the road: "),t=S("b"),o=k(l),s=L(),u=S("p"),i=k("Average width: "),a=S("b"),c=k(f),g=k(`
        meters`),m=L(),y=S("p"),C=k("Minimum width: "),O=S("b"),N=k(T),D=k(`
        meters`)},m(E,P){$(E,e,P),h(e,n),h(e,t),h(t,o),$(E,s,P),$(E,u,P),h(u,i),h(u,a),h(a,c),h(u,g),$(E,m,P),$(E,y,P),h(y,C),h(y,O),h(O,N),h(y,D)},p(E,P){P&16&&l!==(l=E[4].side+"")&&R(o,l),P&16&&f!==(f=E[4].average+"")&&R(c,f),P&16&&T!==(T=E[4].minimum+"")&&R(N,T)},d(E){E&&(p(e),p(s),p(u),p(m),p(y))}}}function Pu(r){let e,n;return e=new fe({props:{$$slots:{default:[Iu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Mu(r){let e,n;const t=[z(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],r[2],r[1]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Pu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ie(z(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&6&&{paint:{"line-color":ke(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Nu(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:bt,$$slots:{right:[Lu],default:[Tu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),q.push(()=>W(e,"checked",u));let a=r[0]&&Mr(r);return o=new we({props:{url:`pmtiles://${nn()}/v1/${bt}.pmtiles`,$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=Mr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let bt="pavement_widths";function Fu(r,e,n){let t=oe.sequential_low_to_high,l=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class Eu extends J{constructor(e){super(),K(this,e,Fu,Nu,X,{})}}function Du(r){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ju(r){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ru(r){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bu(r){let e,n,t,l,o,s,u,i,a,f,c;return u=new Q({props:{href:"https://www.pct.bike",$$slots:{default:[ju]},$$scope:{ctx:r}}}),a=new Q({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Ru]},$$scope:{ctx:r}}}),{c(){e=S("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=S("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=L(),o=S("p"),s=k("See "),b(u.$$.fragment),i=k(" and "),b(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(g,m){$(g,e,m),$(g,n,m),$(g,t,m),$(g,l,m),$(g,o,m),h(o,s),v(u,o,null),h(o,i),v(a,o,null),h(o,f),c=!0},p(g,m){const y={};m&1024&&(y.$$scope={dirty:m,ctx:g}),u.$set(y);const C={};m&1024&&(C.$$scope={dirty:m,ctx:g}),a.$set(C)},i(g){c||(_(u.$$.fragment,g),_(a.$$.fragment,g),c=!0)},o(g){d(u.$$.fragment,g),d(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(l),p(o)),w(u),w(a)}}}function Hu(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Bu]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Nr(r){let e,n,t,l,o,s,u,i;e=new Ke({props:{colorScale:r[3],limits:r[4]}});function a(m){r[7](m)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new al({props:f}),q.push(()=>W(t,"value",a));function c(m){r[8](m)}let g={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(g.value=r[1]),s=new Tt({props:g}),q.push(()=>W(s,"value",c)),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),o=L(),b(s.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,o,y),v(s,m,y),i=!0},p(m,y){const C={};!l&&y&1&&(l=!0,C.value=m[0],V(()=>l=!1)),t.$set(C);const O={};!u&&y&2&&(u=!0,O.value=m[1],V(()=>u=!1)),s.$set(O)},i(m){i||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(s.$$.fragment,m),i=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(s.$$.fragment,m),i=!1},d(m){m&&(p(n),p(o)),w(e,m),w(t,m),w(s,m)}}}function zu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Nt(!1),t=Me(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Gu(r){let e,n;return e=new fe({props:{$$slots:{default:[zu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Uu(r){let e,n;const t=[z(Ve),{sourceLayer:Ve},{paint:{"line-color":ke(["get",r[1]],r[4],r[3]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ve?"visible":"none"}}];let l={$$slots:{default:[Gu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ie(z(Ve)),s&0&&{sourceLayer:Ve},s&26&&{paint:{"line-color":ke(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==Ve?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function qu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Nt(!1),t=Me(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Wu(r){let e,n;return e=new fe({props:{$$slots:{default:[qu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Vu(r){let e,n;const t=[z(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",r[1]],r[4],r[3]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:r[2]&&r[0]==at?"visible":"none"}}];let l={$$slots:{default:[Wu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ie(z(at)),s&0&&{sourceLayer:at},t[2],t[3],s&26&&{paint:{"line-color":ke(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==at?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Xu(r){let e,n,t,l,o,s,u,i;function a(g){r[6](g)}let f={id:Ve,$$slots:{right:[Hu],default:[Du]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new ae({props:f}),q.push(()=>W(e,"checked",a));let c=r[2]&&Nr(r);return o=new we({props:{url:`pmtiles://${ve()}/v1/${Ve}.pmtiles`,$$slots:{default:[Uu]},$$scope:{ctx:r}}}),u=new we({props:{url:`pmtiles://${ve()}/v1/${at}.pmtiles`,$$slots:{default:[Vu]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),c&&c.c(),l=L(),b(o.$$.fragment),s=L(),b(u.$$.fragment)},m(g,m){v(e,g,m),$(g,t,m),c&&c.m(g,m),$(g,l,m),v(o,g,m),$(g,s,m),v(u,g,m),i=!0},p(g,[m]){const y={};m&1024&&(y.$$scope={dirty:m,ctx:g}),!n&&m&4&&(n=!0,y.checked=g[2],V(()=>n=!1)),e.$set(y),g[2]?c?(c.p(g,m),m&4&&_(c,1)):(c=Nr(g),c.c(),_(c,1),c.m(l.parentNode,l)):c&&(me(),d(c,1,1,()=>{c=null}),_e());const C={};m&1031&&(C.$$scope={dirty:m,ctx:g}),o.$set(C);const O={};m&1031&&(O.$$scope={dirty:m,ctx:g}),u.$set(O)},i(g){i||(_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(u.$$.fragment,g),i=!0)},o(g){d(e.$$.fragment,g),d(c),d(o.$$.fragment,g),d(u.$$.fragment,g),i=!1},d(g){g&&(p(t),p(l),p(s)),w(e,g),c&&c.d(g),w(o,g),w(u,g)}}}let Ve="pct_commute",at="pct_school";function Yu(r,e,n){let t=oe.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ve,s="baseline",u=!1;function i(g){let m=g.baseline,y=g.gov_target,C=g.go_dutch,O=`<h2>Trip purpose: ${o==Ve?"commuting":"school"}</h2>`;if(O+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)O+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,O+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let T=(y/m).toFixed(1),N=(C/m).toFixed(1);O+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${T}x</b> of baseline)</p>`,O+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${N}x</b> of baseline)</p>`}return O}function a(g){u=g,n(2,u)}function f(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,u,t,l,i,a,f,c]}class Qu extends J{constructor(e){super(),K(this,e,Yu,Xu,X,{})}}function Ju(r){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ku(r){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zu(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xu(r){let e,n,t,l,o,s,u,i,a,f,c,g;return t=new Q({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Ku]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Zu]},$$scope:{ctx:r}}}),{c(){e=S("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),l=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),s=S("p"),s.textContent="Data valid as of 1 September, 2023",u=L(),i=S("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),c=k(".")},m(m,y){$(m,e,y),h(e,n),v(t,e,null),h(e,l),$(m,o,y),$(m,s,y),$(m,u,y),$(m,i,y),h(i,a),v(f,i,null),h(i,c),g=!0},p(m,y){const C={};y&256&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const O={};y&256&&(O.$$scope={dirty:y,ctx:m}),f.$set(O)},i(m){g||(_(t.$$.fragment,m),_(f.$$.fragment,m),g=!0)},o(m){d(t.$$.fragment,m),d(f.$$.fragment,m),g=!1},d(m){m&&(p(e),p(o),p(s),p(u),p(i)),w(t),w(f)}}}function ec(r){let e,n,t;return n=new ge({props:{$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Fr(r){let e,n,t,l,o;e=new Ke({props:{colorScale:r[2],limits:r[3]}});function s(i){r[6](i)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new al({props:u}),q.push(()=>W(t,"value",s)),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};!l&&a&1&&(l=!0,f.value=i[0],V(()=>l=!1)),t.$set(f)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function tc(r){let e,n,t=r[7].indicative_mph+"",l,o,s,u,i,a=r[7].highest_mph+"",f,c,g=r[4][r[7].highest_description]+"",m,y;return{c(){e=S("p"),n=k("Posted speed limit: "),l=k(t),o=k(" mph"),s=L(),u=S("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),m=k(g),y=k(")")},m(C,O){$(C,e,O),h(e,n),h(e,l),h(e,o),$(C,s,O),$(C,u,O),h(u,i),h(u,f),h(u,c),h(u,m),h(u,y)},p(C,O){O&128&&t!==(t=C[7].indicative_mph+"")&&R(l,t),O&128&&a!==(a=C[7].highest_mph+"")&&R(f,a),O&128&&g!==(g=C[4][C[7].highest_description]+"")&&R(m,g)},d(C){C&&(p(e),p(s),p(u))}}}function nc(r){let e,n;return e=new fe({props:{$$slots:{default:[tc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rc(r){let e,n;const t=[z(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",r[0]],r[3],r[2]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[nc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&15?ne(t,[s&0&&ie(z(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&13&&{paint:{"line-color":ke(["get",o[0]],o[3],o[2]),"line-width":He,"line-opacity":x(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function lc(r){let e,n,t,l,o,s;function u(f){r[5](f)}let i={id:vt,$$slots:{right:[ec],default:[Ju]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new ae({props:i}),q.push(()=>W(e,"checked",u));let a=r[1]&&Fr(r);return o=new we({props:{url:`pmtiles://${nn()}/v1/${vt}.pmtiles`,$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&_(a,1)):(a=Fr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&259&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let vt="road_speeds";function oc(r,e,n){let t=oe.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,l,u,i,a]}class sc extends J{constructor(e){super(),K(this,e,oc,lc,X,{})}}function ic(r){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ac(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fc(r){let e,n,t,l,o,s,u,i,a;return u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ac]},$$scope:{ctx:r}}}),{c(){e=S("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=S("p"),t.textContent="Data valid as of 1 September, 2023",l=L(),o=S("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(_(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),w(u)}}}function uc(r){let e,n,t;return n=new ge({props:{$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Er(r){let e,n;return e=new Ke({props:{colorScale:r[1],limits:r[2]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cc(r){let e,n,t,l=r[4].average+"",o,s,u,i,a,f,c=r[4].minimum+"",g,m;return{c(){e=S("p"),n=k("Average width: "),t=S("b"),o=k(l),s=k(`
        meters`),u=L(),i=S("p"),a=k("Minimum width: "),f=S("b"),g=k(c),m=k(`
        meters`)},m(y,C){$(y,e,C),h(e,n),h(e,t),h(t,o),h(e,s),$(y,u,C),$(y,i,C),h(i,a),h(i,f),h(f,g),h(i,m)},p(y,C){C&16&&l!==(l=y[4].average+"")&&R(o,l),C&16&&c!==(c=y[4].minimum+"")&&R(g,c)},d(y){y&&(p(e),p(u),p(i))}}}function $c(r){let e,n;return e=new fe({props:{$$slots:{default:[cc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function pc(r){let e,n;const t=[z(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],r[2],r[1]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[$c]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new ye({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ie(z(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&6&&{paint:{"line-color":ke(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function mc(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:wt,$$slots:{right:[uc],default:[ic]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),q.push(()=>W(e,"checked",u));let a=r[0]&&Er(r);return o=new we({props:{url:`pmtiles://${nn()}/v1/${wt}.pmtiles`,$$slots:{default:[pc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=Er(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let wt="road_widths";function _c(r,e,n){let t=oe.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class gc extends J{constructor(e){super(),K(this,e,_c,mc,X,{})}}function dc(r){let e,n,t;return{c(){e=S("input"),U(e,"class","govuk-file-upload"),U(e,"id","load-criticals"),U(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=st(e,"change",r[5]),n=!0)},p:le,d(l){l&&p(e),r[7](null),n=!1,t()}}}function Dr(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function hc(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new Oe({props:{color:Mt}}),{c(){b(e.$$.fragment),n=k(`
        Show `),l=k(t),o=k(" issues")},m(u,i){v(e,u,i),$(u,n,i),$(u,l,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&R(l,t)},i(u){s||(_(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(l),p(o)),w(e,u)}}}function bc(r){let e,n,t;function l(s){r[8](s)}let o={id:"show-criticals",$$slots:{default:[hc]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ae({props:o}),q.push(()=>W(e,"checked",l)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function vc(r){let e,n,t,l,o,s;e=new cn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[dc]},$$scope:{ctx:r}}}),t=new fl({props:{errorMessage:r[3]}});let u=r[2]>0&&Dr(r);return{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),u&&u.c(),o=Me()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&_(u,1)):(u=Dr(i),u.c(),_(u,1),u.m(o.parentNode,o)):u&&(me(),d(u,1,1,()=>{u=null}),_e())},i(i){s||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(u),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(u),s=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),u&&u.d(i)}}}function wc(r){let e,n,t=r[10].critical_type+"",l,o,s,u,i,a=r[10].location_description+"",f,c,g,m,y,C=r[10].notes+"",O,T,N,D,E,P,I,M=r[10].id+"",A,F,B,H,j,G=(r[10].inspector??"???")+"",Y,ee,Z,Ce=r[10].submission_time+"",Le,se,de,Ae,ue,ce=r[10].scheme_reference+"",$e,Ee,Te,ze=r[10].current_design_stage+"",Ze;return{c(){e=S("div"),n=S("h2"),l=k(t),o=L(),s=S("p"),u=S("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=L(),g=S("p"),m=S("u"),m.textContent="Notes",y=k(`
          : `),O=k(C),T=L(),N=S("hr"),D=L(),E=S("p"),P=k("Critical issue ID: "),I=S("b"),A=k(M),F=L(),B=S("p"),H=k("Submitted by "),j=S("b"),Y=k(G),ee=k(`
          at
          `),Z=S("b"),Le=k(Ce),se=L(),de=S("p"),Ae=k("For scheme "),ue=S("b"),$e=k(ce),Ee=k(`
          in stage
          `),Te=S("b"),Ze=k(ze),Se(e,"max-width","30vw")},m(re,he){$(re,e,he),h(e,n),h(n,l),h(e,o),h(e,s),h(s,u),h(s,i),h(s,f),h(e,c),h(e,g),h(g,m),h(g,y),h(g,O),h(e,T),h(e,N),h(e,D),h(e,E),h(E,P),h(E,I),h(I,A),h(e,F),h(e,B),h(B,H),h(B,j),h(j,Y),h(B,ee),h(B,Z),h(Z,Le),h(e,se),h(e,de),h(de,Ae),h(de,ue),h(ue,$e),h(de,Ee),h(de,Te),h(Te,Ze)},p(re,he){he&1024&&t!==(t=re[10].critical_type+"")&&R(l,t),he&1024&&a!==(a=re[10].location_description+"")&&R(f,a),he&1024&&C!==(C=re[10].notes+"")&&R(O,C),he&1024&&M!==(M=re[10].id+"")&&R(A,M),he&1024&&G!==(G=(re[10].inspector??"???")+"")&&R(Y,G),he&1024&&Ce!==(Ce=re[10].submission_time+"")&&R(Le,Ce),he&1024&&ce!==(ce=re[10].scheme_reference+"")&&R($e,ce),he&1024&&ze!==(ze=re[10].current_design_stage+"")&&R(Ze,ze)},d(re){re&&p(e)}}}function kc(r){let e,n;return e=new fe({props:{$$slots:{default:[wc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function yc(r){let e,n,t,l,o,s;const u=[z(`${lt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Mt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let m=0;m<u.length;m+=1)i=te(i,u[m]);e=new tt({props:i}),e.$on("click",r[6]);const a=[z(`${lt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let m=0;m<a.length;m+=1)f=te(f,a[m]);t=new io({props:f});const c=[z(`${lt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Mt,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let g={$$slots:{default:[kc]},$$scope:{ctx:r}};for(let m=0;m<c.length;m+=1)g=te(g,c[m]);return o=new tt({props:g}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,l,y),v(o,m,y),s=!0},p(m,y){const C=y&2?ne(u,[y&0&&ie(z(`${lt}-clusters`)),u[1],y&0&&{paint:{"circle-color":Mt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:m[1]?"visible":"none"}},u[4]]):{};e.$set(C);const O=y&2?ne(a,[y&0&&ie(z(`${lt}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:m[1]?"visible":"none"}}]):{};t.$set(O);const T=y&2?ne(c,[y&0&&ie(z(`${lt}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":Mt,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:m[1]?"visible":"none"}}]):{};y&2048&&(T.$$scope={dirty:y,ctx:m}),o.$set(T)},i(m){s||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(o.$$.fragment,m),s=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),s=!1},d(m){m&&(p(n),p(l)),w(e,m),w(t,m),w(o,m)}}}function Sc(r){let e,n,t,l;return e=new Re({props:{label:"Critical Issues",$$slots:{default:[vc]},$$scope:{ctx:r}}}),t=new It({props:{id:lt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[yc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let lt="criticals",Mt="red";function Cc(r,e,n){let t;be(r,wn,m=>n(9,t=m));let l,o=!0,s=0,u="",i=Ml();async function a(m){try{n(4,i=await pi(l.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f(m){t.getSource(lt).getClusterExpansionZoom(m.detail.features[0].properties.cluster_id,(y,C)=>{y||t.easeTo({center:m.detail.features[0].geometry.coordinates,zoom:C})})}function c(m){q[m?"unshift":"push"](()=>{l=m,n(0,l)})}function g(m){o=m,n(1,o)}return[l,o,s,u,i,a,f,c,g]}class Tc extends J{constructor(e){super(),K(this,e,Cc,Sc,X,{})}}function Oc(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Crossings`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Ac(r){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lc(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Ac]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=S("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Ic(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Pc(r){let e,n=jr(r[3])+"",t;return{c(){e=S("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=jr(l[3])+"")&&R(t,n)},d(l){l&&p(e)}}}function Mc(r){let e,n;return e=new fe({props:{$$slots:{default:[Pc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Nc(r){let e,n;const t=[z(kt),{sourceLayer:kt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Mc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new tt({props:l}),e.$on("click",Ec),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ie(z(kt)),s&0&&{sourceLayer:kt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Fc(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:kt,$$slots:{right:[Ic],default:[Oc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${kt}.pmtiles`,$$slots:{default:[Nc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let kt="crossings";function jr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Ec(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Dc(r,e,n){let t=oe.crossings,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class jc extends J{constructor(e){super(),K(this,e,Dc,Fc,X,{})}}function Rc(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Cycle parking`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function Bc(r){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hc(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Bc]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=S("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),l=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function zc(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Hc]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Gc(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=S("p"),n=k("Capacity: "),t=S("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&l!==(l=(s[3].capacity??"unknown")+"")&&R(o,l)},d(s){s&&p(e)}}}function Uc(r){let e,n;return e=new fe({props:{$$slots:{default:[Gc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qc(r){let e,n;const t=[z(yt),{sourceLayer:yt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Uc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new tt({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ie(z(yt)),s&0&&{sourceLayer:yt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Wc(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:yt,$$slots:{right:[zc],default:[Rc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${yt}.pmtiles`,$$slots:{default:[qc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let yt="cycle_parking";function Vc(r,e,n){let t=oe.cycle_parking,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Xc extends J{constructor(e){super(),K(this,e,Vc,Wc,X,{})}}function Yc(r){let e,n,t,l;return e=new Oe({props:{color:r[4]}}),{c(){b(e.$$.fragment),n=L(),t=k(r[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),l=!0},p(o,s){(!l||s&4)&&R(t,o[2])},i(o){l||(_(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function Qc(r){let e;const n=r[5].default,t=Bt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Ht(t,n,l,l[7],e?Gt(n,l[7],o,null):zt(l[7]),null)},i(l){e||(_(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Jc(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Qc]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Kc(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=S("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&R(t,n)},d(l){l&&p(e)}}}function Zc(r){let e,n;return e=new fe({props:{$$slots:{default:[Kc,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function xc(r){let e,n;const t=[z(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":x(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Zc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new Je({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&25?ne(t,[s&1&&ie(z(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":x(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function e$(r){let e,n,t,l,o;function s(i){r[6](i)}let u={id:r[0],$$slots:{right:[Jc],default:[Yc]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new ae({props:u}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${ve()}/v1/${r[0]}.pmtiles`,$$slots:{default:[xc]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&1&&(f.id=i[0]),a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],V(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${ve()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function t$(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=oe[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,s,u,a,i,t,f,l]}class Sn extends J{constructor(e){super(),K(this,e,t$,e$,X,{name:0,singularNoun:1,pluralNoun:2})}}function n$(r){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function r$(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[n$]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=S("p"),n=k("This shows "),b(t.$$.fragment),l=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function l$(r){let e,n;return e=new Sn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[r$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class o$ extends J{constructor(e){super(),K(this,e,null,l$,X,{})}}function s$(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){b(e.$$.fragment),n=k(`
  Railway Stations`)},m(l,o){v(e,l,o),$(l,n,o),t=!0},p:le,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),w(e,l)}}}function i$(r){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function a$(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[i$]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=S("p"),n=k("This shows "),b(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function f$(r){let e,n,t;return n=new ge({props:{$$slots:{default:[a$]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function u$(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&R(t,n)},d(l){l&&p(e)}}}function c$(r){let e,n;return e=new fe({props:{$$slots:{default:[u$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function $$(r){let e,n;const t=[z(tn),{paint:{"circle-color":r[1],"circle-radius":Zt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[c$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new tt({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ie(z(tn)),s&2&&{paint:{"circle-color":o[1],"circle-radius":Zt/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function p$(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:tn,$$slots:{right:[f$],default:[s$]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ae({props:u}),q.push(()=>W(e,"checked",s)),l=new It({props:{data:`${ve()}/v1/${tn}.geojson`,$$slots:{default:[$$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}let tn="railway_stations";function m$(r,e,n){let t=oe.railway_stations,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class _$ extends J{constructor(e){super(),K(this,e,m$,p$,X,{})}}function g$(r){let e;return{c(){e=k("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function d$(r){let e,n,t,l,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[g$]},$$scope:{ctx:r}}}),s=new it({}),{c(){e=S("p"),n=k("This shows "),b(t.$$.fragment),l=k(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=L(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,l),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function h$(r){let e,n;return e=new Sn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[d$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class b$ extends J{constructor(e){super(),K(this,e,null,h$,X,{})}}function v$(r){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function w$(r){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function k$(r){let e,n,t,l,o,s,u,i,a;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[v$]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[w$]},$$scope:{ctx:r}}}),i=new it({}),{c(){e=S("p"),n=k("This shows "),b(t.$$.fragment),l=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=L(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function y$(r){let e,n;return e=new Sn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[k$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class S$ extends J{constructor(e){super(),K(this,e,null,y$,X,{})}}function C$(r){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function T$(r){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function O$(r){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function A$(r){let e,n,t,l,o,s,u,i,a,f,c,g,m,y,C,O,T,N,D,E,P,I,M;return t=new Q({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[T$]},$$scope:{ctx:r}}}),T=new Q({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[O$]},$$scope:{ctx:r}}}),I=new Fe({}),{c(){e=S("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),l=k(" dataset. Please note these limitations:"),o=L(),s=S("ul"),u=S("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=L(),a=S("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=L(),c=S("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=L(),m=S("li"),m.textContent='The "pedestrians" category also include mobility scooters',y=L(),C=S("li"),O=k("All limitations "),b(T.$$.fragment),N=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),D=L(),E=S("p"),E.textContent="You can click a point to open the full report, thanks to CycleStreets.",P=L(),b(I.$$.fragment)},m(A,F){$(A,e,F),h(e,n),v(t,e,null),h(e,l),$(A,o,F),$(A,s,F),h(s,u),h(s,i),h(s,a),h(s,f),h(s,c),h(s,g),h(s,m),h(s,y),h(s,C),h(C,O),v(T,C,null),h(C,N),$(A,D,F),$(A,E,F),$(A,P,F),v(I,A,F),M=!0},p(A,F){const B={};F&16777216&&(B.$$scope={dirty:F,ctx:A}),t.$set(B);const H={};F&16777216&&(H.$$scope={dirty:F,ctx:A}),T.$set(H)},i(A){M||(_(t.$$.fragment,A),_(T.$$.fragment,A),_(I.$$.fragment,A),M=!0)},o(A){d(t.$$.fragment,A),d(T.$$.fragment,A),d(I.$$.fragment,A),M=!1},d(A){A&&(p(e),p(o),p(s),p(D),p(E),p(P)),w(t),w(T),w(I,A)}}}function L$(r){let e,n,t;return n=new ge({props:{$$slots:{default:[A$]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Rr(r){let e,n,t,l,o,s,u,i,a,f,c,g,m;return n=new nt({props:{small:!0,$$slots:{default:[F$]},$$scope:{ctx:r}}}),f=new ul({props:{rows:r[14]}}),{c(){e=S("div"),b(n.$$.fragment),t=L(),l=S("div"),o=k(`Filter years:
      `),s=S("input"),u=k(`
      -
      `),i=S("input"),a=L(),b(f.$$.fragment),U(s,"type","number"),U(s,"min",2017),U(s,"max",2022),U(s,"class","svelte-1ft65rw"),U(i,"type","number"),U(i,"min",2017),U(i,"max",2022),U(i,"class","svelte-1ft65rw"),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(y,C){$(y,e,C),v(n,e,null),h(e,t),h(e,l),h(l,o),h(l,s),Ye(s,r[4]),h(l,u),h(l,i),Ye(i,r[5]),h(e,a),v(f,e,null),c=!0,g||(m=[st(s,"input",r[20]),st(i,"input",r[21])],g=!0)},p(y,C){const O={};C&16777231&&(O.$$scope={dirty:C,ctx:y}),n.$set(O),C&16&&Dt(s.value)!==y[4]&&Ye(s,y[4]),C&32&&Dt(i.value)!==y[5]&&Ye(i,y[5])},i(y){c||(_(n.$$.fragment,y),_(f.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(f.$$.fragment,y),c=!1},d(y){y&&p(e),w(n),w(f),g=!1,il(m)}}}function I$(r){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function P$(r){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function M$(r){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function N$(r){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function F$(r){let e,n,t,l,o,s,u,i,a,f,c,g;function m(P){r[16](P)}let y={id:"stats19-pedestrians",$$slots:{default:[I$]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new ae({props:y}),q.push(()=>W(e,"checked",m));function C(P){r[17](P)}let O={id:"stats19-cyclists",$$slots:{default:[P$]},$$scope:{ctx:r}};r[1]!==void 0&&(O.checked=r[1]),l=new ae({props:O}),q.push(()=>W(l,"checked",C));function T(P){r[18](P)}let N={id:"stats19-horse-riders",$$slots:{default:[M$]},$$scope:{ctx:r}};r[2]!==void 0&&(N.checked=r[2]),u=new ae({props:N}),q.push(()=>W(u,"checked",T));function D(P){r[19](P)}let E={id:"stats19-other",$$slots:{default:[N$]},$$scope:{ctx:r}};return r[3]!==void 0&&(E.checked=r[3]),f=new ae({props:E}),q.push(()=>W(f,"checked",D)),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment),s=L(),b(u.$$.fragment),a=L(),b(f.$$.fragment)},m(P,I){v(e,P,I),$(P,t,I),v(l,P,I),$(P,s,I),v(u,P,I),$(P,a,I),v(f,P,I),g=!0},p(P,I){const M={};I&16777216&&(M.$$scope={dirty:I,ctx:P}),!n&&I&1&&(n=!0,M.checked=P[0],V(()=>n=!1)),e.$set(M);const A={};I&16777216&&(A.$$scope={dirty:I,ctx:P}),!o&&I&2&&(o=!0,A.checked=P[1],V(()=>o=!1)),l.$set(A);const F={};I&16777216&&(F.$$scope={dirty:I,ctx:P}),!i&&I&4&&(i=!0,F.checked=P[2],V(()=>i=!1)),u.$set(F);const B={};I&16777216&&(B.$$scope={dirty:I,ctx:P}),!c&&I&8&&(c=!0,B.checked=P[3],V(()=>c=!1)),f.$set(B)},i(P){g||(_(e.$$.fragment,P),_(l.$$.fragment,P),_(u.$$.fragment,P),_(f.$$.fragment,P),g=!0)},o(P){d(e.$$.fragment,P),d(l.$$.fragment,P),d(u.$$.fragment,P),d(f.$$.fragment,P),g=!1},d(P){P&&(p(t),p(s),p(a)),w(e,P),w(l,P),w(u,P),w(f,P)}}}function Br(r){let e,n,t,l=r[8][r[23].pedestrian_location]+"",o;return{c(){e=S("p"),n=k("Pedestrian location: "),t=S("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&l!==(l=s[8][s[23].pedestrian_location]+"")&&R(o,l)},d(s){s&&p(e)}}}function Hr(r){let e,n,t,l=r[9][r[23].pedestrian_movement]+"",o;return{c(){e=S("p"),n=k("Pedestrian movement: "),t=S("b"),o=k(l)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&l!==(l=s[9][s[23].pedestrian_movement]+"")&&R(o,l)},d(s){s&&p(e)}}}function E$(r){let e,n,t,l=r[23].year+"",o,s,u,i,a,f=r[10][r[23].severity]+"",c,g,m,y,C,O=zr(r[23])+"",T,N,D,E,P,I=r[23].pedestrian_location&&Br(r),M=r[23].pedestrian_movement&&Hr(r);return{c(){e=S("p"),n=k("Year: "),t=S("b"),o=k(l),s=L(),u=S("p"),i=k("Severity: "),a=S("b"),c=k(f),g=L(),m=S("p"),y=k("Casualties: "),C=S("b"),T=k(O),N=L(),I&&I.c(),D=L(),M&&M.c(),E=L(),P=S("p"),P.textContent="Click to open full report in CycleStreets"},m(A,F){$(A,e,F),h(e,n),h(e,t),h(t,o),$(A,s,F),$(A,u,F),h(u,i),h(u,a),h(a,c),$(A,g,F),$(A,m,F),h(m,y),h(m,C),h(C,T),$(A,N,F),I&&I.m(A,F),$(A,D,F),M&&M.m(A,F),$(A,E,F),$(A,P,F)},p(A,F){F&8388608&&l!==(l=A[23].year+"")&&R(o,l),F&8388608&&f!==(f=A[10][A[23].severity]+"")&&R(c,f),F&8388608&&O!==(O=zr(A[23])+"")&&R(T,O),A[23].pedestrian_location?I?I.p(A,F):(I=Br(A),I.c(),I.m(D.parentNode,D)):I&&(I.d(1),I=null),A[23].pedestrian_movement?M?M.p(A,F):(M=Hr(A),M.c(),M.m(E.parentNode,E)):M&&(M.d(1),M=null)},d(A){A&&(p(e),p(s),p(u),p(g),p(m),p(N),p(D),p(E),p(P)),I&&I.d(A),M&&M.d(A)}}}function D$(r){let e,n;return e=new fe({props:{$$slots:{default:[E$,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&25165824&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function j$(r){let e,n;const t=[z(St),{sourceLayer:St},{paint:{"circle-color":ke(["get","severity"],[1,2,3],[r[11],r[12],r[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[7]},{layout:{visibility:r[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[D$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new tt({props:l}),e.$on("click",B$),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&14528?ne(t,[s&0&&ie(z(St)),s&0&&{sourceLayer:St},s&14336&&{paint:{"circle-color":ke(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function R$(r){let e,n,t,l,o,s;function u(f){r[15](f)}let i={id:St,$$slots:{right:[L$],default:[C$]},$$scope:{ctx:r}};r[6]!==void 0&&(i.checked=r[6]),e=new ae({props:i}),q.push(()=>W(e,"checked",u));let a=r[6]&&Rr(r);return o=new we({props:{url:`pmtiles://${ve()}/v1/${St}.pmtiles`,$$slots:{default:[j$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,g.checked=f[6],V(()=>n=!1)),e.$set(g),f[6]?a?(a.p(f,c),c&64&&_(a,1)):(a=Rr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&16777408&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let St="stats19";function zr(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function B$(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function H$(r,e,n){let t,l=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(B,H,j,G,Y,ee){let Z=["any"];return o&&Z.push(["get","pedestrian"]),s&&Z.push(["get","cyclist"]),u&&Z.push(["get","horse_rider"]),i&&Z.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],Z]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},m={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},C=oe.sequential_low_to_high[4],O=oe.sequential_low_to_high[2],T=oe.sequential_low_to_high[0],N=[["Fatal",C],["Serious",O],["Slight",T]];function D(B){l=B,n(6,l)}function E(B){o=B,n(0,o)}function P(B){s=B,n(1,s)}function I(B){u=B,n(2,u)}function M(B){i=B,n(3,i)}function A(){a=Dt(this.value),n(4,a)}function F(){f=Dt(this.value),n(5,f)}return r.$$.update=()=>{r.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,l,t,g,m,y,C,O,T,N,D,E,P,I,M,A,F]}class z$ extends J{constructor(e){super(),K(this,e,H$,R$,X,{})}}function G$(r){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function U$(r){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function q$(r){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function W$(r){let e,n,t,l,o,s,u,i,a,f,c;return t=new Q({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[U$]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[q$]},$$scope:{ctx:r}}}),f=new Fe({}),{c(){e=S("p"),n=k("2022 AADF (annual average daily flow) data from "),b(t.$$.fragment),l=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=L(),i=S("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=L(),b(f.$$.fragment)},m(g,m){$(g,e,m),h(e,n),v(t,e,null),h(e,l),v(o,e,null),h(e,s),$(g,u,m),$(g,i,m),$(g,a,m),v(f,g,m),c=!0},p(g,m){const y={};m&64&&(y.$$scope={dirty:m,ctx:g}),t.$set(y);const C={};m&64&&(C.$$scope={dirty:m,ctx:g}),o.$set(C)},i(g){c||(_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),c=!0)},o(g){d(t.$$.fragment,g),d(o.$$.fragment,g),d(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(u),p(i),p(a)),w(t),w(o),w(f,g)}}}function V$(r){let e,n,t;return n=new ge({props:{$$slots:{default:[W$]},$$scope:{ctx:r}}}),{c(){e=S("span"),b(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Gr(r){let e,n;return e=new Ke({props:{colorScale:r[1],limits:r[3]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function X$(r){let e,n=r[5].location+"",t,l,o,s,u,i=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,g,m,y=r[5].pedal_cycles_2022.toLocaleString()+"",C,O,T,N,D,E=r[5].method+"",P;return{c(){e=S("h2"),t=k(n),l=L(),o=S("p"),s=k("Total motor vehicles (2022 AADF): "),u=S("b"),a=k(i),f=L(),c=S("p"),g=k("Total pedal cycles (2022 AADF): "),m=S("b"),C=k(y),O=L(),T=S("p"),N=k("Count method: "),D=S("b"),P=k(E)},m(I,M){$(I,e,M),h(e,t),$(I,l,M),$(I,o,M),h(o,s),h(o,u),h(u,a),$(I,f,M),$(I,c,M),h(c,g),h(c,m),h(m,C),$(I,O,M),$(I,T,M),h(T,N),h(T,D),h(D,P)},p(I,M){M&32&&n!==(n=I[5].location+"")&&R(t,n),M&32&&i!==(i=I[5].motor_vehicles_2022.toLocaleString()+"")&&R(a,i),M&32&&y!==(y=I[5].pedal_cycles_2022.toLocaleString()+"")&&R(C,y),M&32&&E!==(E=I[5].method+"")&&R(P,E)},d(I){I&&(p(e),p(l),p(o),p(f),p(c),p(O),p(T))}}}function Y$(r){let e,n;return e=new fe({props:{$$slots:{default:[X$,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Q$(r){let e,n;const t=[z(Ct),{sourceLayer:Ct},{paint:{"circle-color":ke(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Y$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new tt({props:l}),e.$on("click",K$),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ie(z(Ct)),s&0&&{sourceLayer:Ct},s&6&&{paint:{"circle-color":ke(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function J$(r){let e,n,t,l,o,s;function u(f){r[4](f)}let i={id:Ct,$$slots:{right:[V$],default:[G$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),q.push(()=>W(e,"checked",u));let a=r[0]&&Gr(r);return o=new we({props:{url:`pmtiles://${ve()}/v1/${Ct}.pmtiles`,$$slots:{default:[Q$]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),t=L(),a&&a.c(),l=L(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),v(o,f,c),s=!0},p(f,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=Gr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(me(),d(a,1,1,()=>{a=null}),_e());const m={};c&65&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(l)),w(e,f),a&&a.d(f),w(o,f)}}}let Ct="vehicle_counts";function K$(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Z$(r,e,n){let t=oe.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,l,o,u]}class x$ extends J{constructor(e){super(),K(this,e,Z$,J$,X,{})}}function ep(r){let e,n,t,l,o,s,u,i;return e=new b$({}),t=new o$({}),o=new S$({}),u=new _$({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(u.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),$(a,l,f),v(o,a,f),$(a,s,f),v(u,a,f),i=!0},i(a){i||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(l),p(s)),w(e,a),w(t,a),w(o,a),w(u,a)}}}function tp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[ep]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function np(r){let e,n,t,l,o,s,u,i,a,f,c,g;return e=new ou({}),t=new Cu({}),o=new _u({}),u=new Vf({}),a=new Xc({}),c=new jc({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(u.$$.fragment),i=L(),b(a.$$.fragment),f=L(),b(c.$$.fragment)},m(m,y){v(e,m,y),$(m,n,y),v(t,m,y),$(m,l,y),v(o,m,y),$(m,s,y),v(u,m,y),$(m,i,y),v(a,m,y),$(m,f,y),v(c,m,y),g=!0},i(m){g||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(o.$$.fragment,m),_(u.$$.fragment,m),_(a.$$.fragment,m),_(c.$$.fragment,m),g=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),d(a.$$.fragment,m),d(c.$$.fragment,m),g=!1},d(m){m&&(p(n),p(l),p(s),p(i),p(f)),w(e,m),w(t,m),w(o,m),w(u,m),w(a,m),w(c,m)}}}function rp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[np]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function lp(r){let e,n,t,l,o,s,u,i,a,f;return e=new ff({}),t=new Mf({}),o=new _a({}),u=new ja({}),a=new Ka({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(u.$$.fragment),i=L(),b(a.$$.fragment)},m(c,g){v(e,c,g),$(c,n,g),v(t,c,g),$(c,l,g),v(o,c,g),$(c,s,g),v(u,c,g),$(c,i,g),v(a,c,g),f=!0},i(c){f||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(u,c),w(a,c)}}}function op(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[lp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function sp(r){let e,n,t,l;return e=new la({}),t=new Ta({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function ip(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[sp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function ap(r){let e,n,t,l,o,s;return e=new gc({}),t=new Eu({}),o=new sc({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment)},m(u,i){v(e,u,i),$(u,n,i),v(t,u,i),$(u,l,i),v(o,u,i),s=!0},i(u){s||(_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(l)),w(e,u),w(t,u),w(o,u)}}}function fp(r){let e,n,t,l,o,s,u=$n()=="Private (development)",i,a,f;e=new x$({}),t=new z$({}),o=new Qu({});let c=u&&ap();return a=new wf({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),c&&c.c(),i=L(),b(a.$$.fragment)},m(g,m){v(e,g,m),$(g,n,m),v(t,g,m),$(g,l,m),v(o,g,m),$(g,s,m),c&&c.m(g,m),$(g,i,m),v(a,g,m),f=!0},p:le,i(g){f||(_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),_(c),_(a.$$.fragment,g),f=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),d(c),d(a.$$.fragment,g),f=!1},d(g){g&&(p(n),p(l),p(s),p(i)),w(e,g),w(t,g),w(o,g),c&&c.d(g),w(a,g)}}}function up(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[fp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function cp(r){let e,n,t,l,o;function s(i){r[3](i)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new Bl({props:u}),q.push(()=>W(e,"enabled",s)),l=new Wl({}),{c(){b(e.$$.fragment),t=L(),b(l.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(l,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],V(()=>n=!1)),e.$set(f)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(l.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(l,i)}}}function $p(r){let e,n,t,l,o,s,u,i,a,f,c,g,m,y,C,O;return e=new Tc({}),t=new Re({props:{label:"Trip generators",$$slots:{default:[tp]},$$scope:{ctx:r}}}),o=new Re({props:{label:"Existing infrastructure",$$slots:{default:[rp]},$$scope:{ctx:r}}}),u=new Re({props:{label:"Boundaries",$$slots:{default:[op]},$$scope:{ctx:r}}}),a=new Re({props:{label:"Census",$$slots:{default:[ip]},$$scope:{ctx:r}}}),c=new Re({props:{label:"Other",$$slots:{default:[up]},$$scope:{ctx:r}}}),m=new Re({props:{label:"Tools",$$slots:{default:[cp]},$$scope:{ctx:r}}}),C=new Rl({props:{disabled:!r[1]}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(u.$$.fragment),i=L(),b(a.$$.fragment),f=L(),b(c.$$.fragment),g=L(),b(m.$$.fragment),y=L(),b(C.$$.fragment)},m(T,N){v(e,T,N),$(T,n,N),v(t,T,N),$(T,l,N),v(o,T,N),$(T,s,N),v(u,T,N),$(T,i,N),v(a,T,N),$(T,f,N),v(c,T,N),$(T,g,N),v(m,T,N),$(T,y,N),v(C,T,N),O=!0},p(T,N){const D={};N&16&&(D.$$scope={dirty:N,ctx:T}),t.$set(D);const E={};N&16&&(E.$$scope={dirty:N,ctx:T}),o.$set(E);const P={};N&16&&(P.$$scope={dirty:N,ctx:T}),u.$set(P);const I={};N&16&&(I.$$scope={dirty:N,ctx:T}),a.$set(I);const M={};N&16&&(M.$$scope={dirty:N,ctx:T}),c.$set(M);const A={};N&17&&(A.$$scope={dirty:N,ctx:T}),m.$set(A);const F={};N&2&&(F.disabled=!T[1]),C.$set(F)},i(T){O||(_(e.$$.fragment,T),_(t.$$.fragment,T),_(o.$$.fragment,T),_(u.$$.fragment,T),_(a.$$.fragment,T),_(c.$$.fragment,T),_(m.$$.fragment,T),_(C.$$.fragment,T),O=!0)},o(T){d(e.$$.fragment,T),d(t.$$.fragment,T),d(o.$$.fragment,T),d(u.$$.fragment,T),d(a.$$.fragment,T),d(c.$$.fragment,T),d(m.$$.fragment,T),d(C.$$.fragment,T),O=!1},d(T){T&&(p(n),p(l),p(s),p(i),p(f),p(g),p(y)),w(e,T),w(t,T),w(o,T),w(u,T),w(a,T),w(c,T),w(m,T),w(C,T)}}}function pp(r){let e,n;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=te(l,t[o]);return e=new Je({props:l}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&2?ne(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function mp(r){let e,n,t,l;return e=new Re({props:{label:"Layers",open:!0,$$slots:{default:[$p]},$$scope:{ctx:r}}}),t=new It({props:{data:r[2],$$slots:{default:[pp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function _p(r,e,n){let t,l;be(r,sr,u=>n(1,l=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&sr.set(!t)},[t,l,o,s]}class gp extends J{constructor(e){super(),K(this,e,_p,mp,X,{})}}function Ur(r){let e;return{c(){e=S("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function dp(r){let e,n=r[0]&&Ur();return{c(){n&&n.c(),e=Me()},m(t,l){n&&n.m(t,l),$(t,e,l)},p(t,[l]){t[0]?n||(n=Ur(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:le,o:le,d(t){t&&p(e),n&&n.d(t)}}}function hp(r,e,n){let{loadFile:t}=e,l=!0;return kn(async()=>{let s=await(await fetch(`${nn()}/v1/random_schemes.geojson`)).text();t(s),n(0,l=!1)}),r.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[l,t]}class bp extends J{constructor(e){super(),K(this,e,hp,dp,X,{loadFile:1})}}function qr(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=S("p"),n=k("Current milestone: "),l=k(t)},m(s,u){$(s,e,u),h(e,n),h(e,l)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&R(l,t)},d(s){s&&p(e)}}}function vp(r){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wp(r){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kp(r){let e,n,t,l;return e=new Et({props:{$$slots:{default:[vp]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Et({props:{$$slots:{default:[wp]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function yp(r){var F,B,H,j;let e,n,t=r[0].scheme_reference+"",l,o,s,u,i=((F=r[0].browse)==null?void 0:F.authority_or_region)+"",a,f,c,g,m=((B=r[0].browse)==null?void 0:B.capital_scheme_id)+"",y,C,O,T,N=((H=r[0].browse)==null?void 0:H.funding_programme)+"",D,E,P,I,M,A=((j=r[0].browse)==null?void 0:j.current_milestone)&&qr(r);return I=new Hl({props:{$$slots:{default:[kp]},$$scope:{ctx:r}}}),{c(){e=S("p"),n=k("Scheme reference: "),l=k(t),o=L(),s=S("p"),u=k("Authority or region: "),a=k(i),f=L(),c=S("p"),g=k("Capital scheme ID: "),y=k(m),C=L(),O=S("p"),T=k("Funding programme: "),D=k(N),E=L(),A&&A.c(),P=L(),b(I.$$.fragment)},m(G,Y){$(G,e,Y),h(e,n),h(e,l),$(G,o,Y),$(G,s,Y),h(s,u),h(s,a),$(G,f,Y),$(G,c,Y),h(c,g),h(c,y),$(G,C,Y),$(G,O,Y),h(O,T),h(O,D),$(G,E,Y),A&&A.m(G,Y),$(G,P,Y),v(I,G,Y),M=!0},p(G,Y){var Z,Ce,Le,se;(!M||Y&1)&&t!==(t=G[0].scheme_reference+"")&&R(l,t),(!M||Y&1)&&i!==(i=((Z=G[0].browse)==null?void 0:Z.authority_or_region)+"")&&R(a,i),(!M||Y&1)&&m!==(m=((Ce=G[0].browse)==null?void 0:Ce.capital_scheme_id)+"")&&R(y,m),(!M||Y&1)&&N!==(N=((Le=G[0].browse)==null?void 0:Le.funding_programme)+"")&&R(D,N),(se=G[0].browse)!=null&&se.current_milestone?A?A.p(G,Y):(A=qr(G),A.c(),A.m(P.parentNode,P)):A&&(A.d(1),A=null);const ee={};Y&32&&(ee.$$scope={dirty:Y,ctx:G}),I.$set(ee)},i(G){M||(_(I.$$.fragment,G),M=!0)},o(G){d(I.$$.fragment,G),M=!1},d(G){G&&(p(e),p(o),p(s),p(f),p(c),p(C),p(O),p(E),p(P)),A&&A.d(G),w(I,G)}}}function Sp(r){let e,n;return e=new Re({props:{label:`${r[0].scheme_name}`,$$slots:{default:[yp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_name}`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Cp(r,e,n){let t,l;be(r,Lt,i=>n(3,t=i)),be(r,wn,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(Nl(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class Tp extends J{constructor(e){super(),K(this,e,Cp,Sp,X,{scheme:0})}}function Wr(r){let e,n,t=Mn(r[0].length_meters)+"",l;return{c(){e=S("p"),n=k("Length: "),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,l)},p(o,s){s&1&&t!==(t=Mn(o[0].length_meters)+"")&&R(l,t)},d(o){o&&p(e)}}}function Vr(r){let e,n=ot(r[0].description,r[2])+"";return{c(){e=S("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&5&&n!==(n=ot(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Xr(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=S("p"),n=k("Current milestone: "),l=k(t)},m(s,u){$(s,e,u),h(e,n),h(e,l)},p(s,u){var i;u&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&R(l,t)},d(s){s&&p(e)}}}function Op(r){var Ee,Te,ze,Ze;let e,n,t,l=ot(r[0].name,r[2])+"",o,s=r[0].intervention_type+"",u,i,a,f,c,g,m,y,C,O,T=ot(r[1].scheme_name??"",r[3])+"",N,D,E=ot(r[0].scheme_reference,r[3])+"",P,I,M,A,F=((Ee=r[1].browse)==null?void 0:Ee.authority_or_region)+"",B,H,j,G,Y=((Te=r[1].browse)==null?void 0:Te.capital_scheme_id)+"",ee,Z,Ce,Le,se=((ze=r[1].browse)==null?void 0:ze.funding_programme)+"",de,Ae,ue=r[0].length_meters&&Wr(r),ce=r[0].description&&Vr(r),$e=((Ze=r[1].browse)==null?void 0:Ze.current_milestone)&&Xr(r);return{c(){e=S("div"),n=S("h2"),t=new Nt(!1),o=k(" ("),u=k(s),i=k(")"),a=L(),ue&&ue.c(),f=L(),ce&&ce.c(),c=L(),g=S("hr"),m=L(),y=S("p"),C=k("Part of scheme: "),O=new Nt(!1),N=k(" ("),D=new Nt(!1),P=k(")"),I=L(),M=S("p"),A=k("Authority or region: "),B=k(F),H=L(),j=S("p"),G=k("Capital scheme ID: "),ee=k(Y),Z=L(),Ce=S("p"),Le=k("Funding programme: "),de=k(se),Ae=L(),$e&&$e.c(),t.a=o,O.a=N,D.a=P,Se(e,"max-width","30vw")},m(re,he){$(re,e,he),h(e,n),t.m(l,n),h(n,o),h(n,u),h(n,i),h(e,a),ue&&ue.m(e,null),h(e,f),ce&&ce.m(e,null),h(e,c),h(e,g),h(e,m),h(e,y),h(y,C),O.m(T,y),h(y,N),D.m(E,y),h(y,P),h(e,I),h(e,M),h(M,A),h(M,B),h(e,H),h(e,j),h(j,G),h(j,ee),h(e,Z),h(e,Ce),h(Ce,Le),h(Ce,de),h(e,Ae),$e&&$e.m(e,null)},p(re,[he]){var Tn,On,An,Ln;he&5&&l!==(l=ot(re[0].name,re[2])+"")&&t.p(l),he&1&&s!==(s=re[0].intervention_type+"")&&R(u,s),re[0].length_meters?ue?ue.p(re,he):(ue=Wr(re),ue.c(),ue.m(e,f)):ue&&(ue.d(1),ue=null),re[0].description?ce?ce.p(re,he):(ce=Vr(re),ce.c(),ce.m(e,c)):ce&&(ce.d(1),ce=null),he&10&&T!==(T=ot(re[1].scheme_name??"",re[3])+"")&&O.p(T),he&9&&E!==(E=ot(re[0].scheme_reference,re[3])+"")&&D.p(E),he&2&&F!==(F=((Tn=re[1].browse)==null?void 0:Tn.authority_or_region)+"")&&R(B,F),he&2&&Y!==(Y=((On=re[1].browse)==null?void 0:On.capital_scheme_id)+"")&&R(ee,Y),he&2&&se!==(se=((An=re[1].browse)==null?void 0:An.funding_programme)+"")&&R(de,se),(Ln=re[1].browse)!=null&&Ln.current_milestone?$e?$e.p(re,he):($e=Xr(re),$e.c(),$e.m(e,null)):$e&&($e.d(1),$e=null)},i:le,o:le,d(re){re&&p(e),ue&&ue.d(),ce&&ce.d(),$e&&$e.d()}}}function ot(r,e){return e?r.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):r}function Ap(r,e,n){let t,l,o,s;be(r,en,i=>n(4,l=i)),be(r,Qt,i=>n(2,o=i)),be(r,Jt,i=>n(3,s=i));let{props:u}=e;return r.$$set=i=>{"props"in i&&n(0,u=i.props)},r.$$.update=()=>{r.$$.dirty&17&&n(1,t=l.get(u.scheme_reference))},[u,t,o,s,l]}class Cn extends J{constructor(e){super(),K(this,e,Ap,Op,X,{props:0})}}function Lp(r){let e,n=r[6].name+"",t;return{c(){e=S("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Ip(r){let e,n;return e=new Cn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Pp(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Lp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Ip,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Mp(r){let e,n=r[6].name+"",t;return{c(){e=S("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Np(r){let e,n;return e=new Cn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Fp(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Mp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Np,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Ep(r){let e,n=r[6].name+"",t;return{c(){e=S("p"),t=k(n)},m(l,o){$(l,e,o),h(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Dp(r){let e,n;return e=new Cn({props:{props:r[6]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function jp(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Ep,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Dp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function Rp(r){let e,n,t,l,o,s,u,i,a,f;const c=[z("interventions-points"),{filter:["all",Nn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Zt,"circle-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[Pp]},$$scope:{ctx:r}};for(let P=0;P<c.length;P+=1)g=te(g,c[P]);e=new tt({props:g});const m=[z("interventions-lines"),{filter:["all",Fn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Pt,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[Fp]},$$scope:{ctx:r}};for(let P=0;P<m.length;P+=1)y=te(y,m[P]);t=new ye({props:y});const C=[z("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Pt,"circle-opacity":0,"circle-stroke-color":et.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let O={};for(let P=0;P<C.length;P+=1)O=te(O,C[P]);o=new tt({props:O});const T=[z("interventions-polygons"),{filter:["all",Vt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":x(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let N={$$slots:{default:[jp]},$$scope:{ctx:r}};for(let P=0;P<T.length;P+=1)N=te(N,T[P]);u=new Je({props:N});const D=[z("interventions-polygons-outlines"),{filter:["all",Vt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Pt}},{layout:{visibility:r[0]?"visible":"none"}}];let E={};for(let P=0;P<D.length;P+=1)E=te(E,D[P]);return a=new ye({props:E}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),b(o.$$.fragment),s=L(),b(u.$$.fragment),i=L(),b(a.$$.fragment)},m(P,I){v(e,P,I),$(P,n,I),v(t,P,I),$(P,l,I),v(o,P,I),$(P,s,I),v(u,P,I),$(P,i,I),v(a,P,I),f=!0},p(P,I){const M=I&29?ne(c,[c[0],I&24&&{filter:["all",Nn,P[3],P[4]]},c[2],c[3],I&4&&{paint:{"circle-color":P[2],"circle-radius":Zt,"circle-opacity":x(1,.5)}},I&1&&{layout:{visibility:P[0]?"visible":"none"}},c[6]]):{};I&128&&(M.$$scope={dirty:I,ctx:P}),e.$set(M);const A=I&13?ne(m,[m[0],I&8&&{filter:["all",Fn,P[3]]},m[2],m[3],I&4&&{paint:{"line-color":P[2],"line-width":Pt,"line-opacity":x(1,.5)}},I&1&&{layout:{visibility:P[0]?"visible":"none"}},m[6]]):{};I&128&&(A.$$scope={dirty:I,ctx:P}),t.$set(A);const F=I&1?ne(C,[C[0],C[1],C[2],{layout:{visibility:P[0]?"visible":"none"}}]):{};o.$set(F);const B=I&13?ne(T,[T[0],I&8&&{filter:["all",Vt,P[3]]},T[2],T[3],I&4&&{paint:{"fill-color":P[2],"fill-opacity":x(.2,.5)}},I&1&&{layout:{visibility:P[0]?"visible":"none"}},T[6]]):{};I&128&&(B.$$scope={dirty:I,ctx:P}),u.$set(B);const H=I&13?ne(D,[D[0],I&8&&{filter:["all",Vt,P[3]]},I&4&&{paint:{"line-color":P[2],"line-opacity":.5,"line-width":.7*Pt}},I&1&&{layout:{visibility:P[0]?"visible":"none"}}]):{};a.$set(H)},i(P){f||(_(e.$$.fragment,P),_(t.$$.fragment,P),_(o.$$.fragment,P),_(u.$$.fragment,P),_(a.$$.fragment,P),f=!0)},o(P){d(e.$$.fragment,P),d(t.$$.fragment,P),d(o.$$.fragment,P),d(u.$$.fragment,P),d(a.$$.fragment,P),f=!1},d(P){P&&(p(n),p(l),p(s),p(i)),w(e,P),w(t,P),w(o,P),w(u,P),w(a,P)}}}function Bp(r){let e,n;return e=new It({props:{data:r[1],$$slots:{default:[Rp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hp(r,e,n){let t,l;be(r,Lt,a=>n(5,l=a));let{showSchemes:o}=e,s=Al();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=Fl(l))},[o,t,s,u,i,l]}class zp extends J{constructor(e){super(),K(this,e,Hp,Bp,X,{showSchemes:0})}}function Yr(r,e,n){const t=r.slice();return t[13]=e[n],t}function Qr(r,e,n){const t=r.slice();return t[16]=e[n],t}function Gp(r){let e,n;return e=new bp({props:{loadFile:r[7]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p:le,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jr(r){let e,n,t,l,o;e=new Et({props:{$$slots:{default:[Up]},$$scope:{ctx:r}}}),e.$on("click",r[8]);function s(i){r[9](i)}let u={title:"About this scheme data",$$slots:{default:[qp]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.open=r[3]),t=new tl({props:u}),q.push(()=>W(t,"open",s)),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!l&&a&8&&(l=!0,c.open=i[3],V(()=>l=!1)),t.$set(c)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function Up(r){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Kr(r){let e,n,t=r[16]+"",l;return{c(){e=S("li"),n=S("p"),l=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,l)},p(o,s){s&16&&t!==(t=o[16]+"")&&R(l,t)},d(o){o&&p(e)}}}function qp(r){let e,n,t,l,o=Ne(r[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=Kr(Qr(r,o,u));return{c(){e=S("div"),n=S("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=L(),l=S("ul");for(let u=0;u<s.length;u+=1)s[u].c();U(e,"class","govuk-prose")},m(u,i){$(u,e,i),h(e,n),h(e,t),h(e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,null)},p(u,i){if(i&16){o=Ne(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=Qr(u,o,a);s[a]?s[a].p(f,i):(s[a]=Kr(f),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),Ot(s,u)}}}function Zr(r){let e,n,t,l;function o(i){r[10](i)}function s(i){r[11](i)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new Oi({props:u}),q.push(()=>W(e,"schemesToBeShown",o)),q.push(()=>W(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),l=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],V(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],V(()=>t=!1)),e.$set(f)},i(i){l||(_(e.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),l=!1},d(i){w(e,i)}}}function xr(r){let e,n;return e=new Tp({props:{scheme:r[13]}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function el(r){let e=r[1].has(r[13].scheme_reference),n,t,l=e&&xr(r);return{c(){l&&l.c(),n=Me()},m(o,s){l&&l.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?l?(l.p(o,s),s&66&&_(l,1)):(l=xr(o),l.c(),_(l,1),l.m(n.parentNode,n)):l&&(me(),d(l,1,1,()=>{l=null}),_e())},i(o){t||(_(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function Wp(r){let e,n,t,l,o,s,u,i,a,f,c=$n()=="Private (development)",g,m,y,C,O,T,N,D,E;o=new ql({props:{boundaryGeojson:r[4]}}),a=new El({});let P=c&&Gp(r),I=r[4].notes&&Jr(r);y=new Gl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),O=new fl({props:{errorMessage:r[0]}});let M=r[6].size>0&&Zr(r),A=Ne(r[6].values()),F=[];for(let H=0;H<A.length;H+=1)F[H]=el(Yr(r,A,H));const B=H=>d(F[H],1,1,()=>{F[H]=null});return{c(){e=S("div"),n=S("div"),t=S("h1"),t.textContent="Browse schemes",l=L(),b(o.$$.fragment),s=L(),u=S("p"),u.textContent=`App version: ${$n()}`,i=L(),b(a.$$.fragment),f=L(),P&&P.c(),g=L(),I&&I.c(),m=L(),b(y.$$.fragment),C=L(),b(O.$$.fragment),T=L(),M&&M.c(),N=L(),D=S("ul");for(let H=0;H<F.length;H+=1)F[H].c();Se(n,"display","flex"),Se(n,"justify-content","space-between"),U(e,"slot","sidebar"),U(e,"class","govuk-prose")},m(H,j){$(H,e,j),h(e,n),h(n,t),h(n,l),v(o,n,null),h(e,s),h(e,u),h(e,i),v(a,e,null),h(e,f),P&&P.m(e,null),h(e,g),I&&I.m(e,null),h(e,m),v(y,e,null),h(e,C),v(O,e,null),h(e,T),M&&M.m(e,null),h(e,N),h(e,D);for(let G=0;G<F.length;G+=1)F[G]&&F[G].m(D,null);E=!0},p(H,j){const G={};j&16&&(G.boundaryGeojson=H[4]),o.$set(G),c&&P.p(H,j),H[4].notes?I?(I.p(H,j),j&16&&_(I,1)):(I=Jr(H),I.c(),_(I,1),I.m(e,m)):I&&(me(),d(I,1,1,()=>{I=null}),_e());const Y={};if(j&1&&(Y.errorMessage=H[0]),O.$set(Y),H[6].size>0?M?(M.p(H,j),j&64&&_(M,1)):(M=Zr(H),M.c(),_(M,1),M.m(e,N)):M&&(me(),d(M,1,1,()=>{M=null}),_e()),j&66){A=Ne(H[6].values());let ee;for(ee=0;ee<A.length;ee+=1){const Z=Yr(H,A,ee);F[ee]?(F[ee].p(Z,j),_(F[ee],1)):(F[ee]=el(Z),F[ee].c(),_(F[ee],1),F[ee].m(D,null))}for(me(),ee=A.length;ee<F.length;ee+=1)B(ee);_e()}},i(H){if(!E){_(o.$$.fragment,H),_(a.$$.fragment,H),_(P),_(I),_(y.$$.fragment,H),_(O.$$.fragment,H),_(M);for(let j=0;j<A.length;j+=1)_(F[j]);E=!0}},o(H){d(o.$$.fragment,H),d(a.$$.fragment,H),d(P),d(I),d(y.$$.fragment,H),d(O.$$.fragment,H),d(M),F=F.filter(Boolean);for(let j=0;j<F.length;j+=1)d(F[j]);E=!1},d(H){H&&p(e),w(o),w(a),P&&P.d(),I&&I.d(),w(y),w(O),M&&M.d(),Ot(F,H)}}}function Vp(r){let e,n,t,l,o,s,u;return e=new zl({}),t=new zp({props:{showSchemes:r[2]}}),s=new gp({}),{c(){b(e.$$.fragment),n=L(),b(t.$$.fragment),l=L(),o=S("div"),b(s.$$.fragment),U(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,l,a),$(i,o,a),v(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(l),p(o)),w(e,i),w(t,i),w(s)}}}function Xp(r){let e,n,t;return n=new Dl({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Vp]},$$scope:{ctx:r}}}),{c(){e=S("div"),b(n.$$.fragment),U(e,"slot","main")},m(l,o){$(l,e,o),v(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.style=l[5]),o&524292&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),w(n)}}}function Yp(r){let e,n;return e=new Vl({props:{$$slots:{main:[Xp],sidebar:[Wp]},$$scope:{ctx:r}}}),{c(){b(e.$$.fragment)},m(t,l){v(e,t,l),n=!0},p(t,[l]){const o={};l&524415&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qp(r,e,n){let t,l,o;be(r,Lt,O=>n(4,t=O)),be(r,En,O=>n(5,l=O)),be(r,en,O=>n(6,o=O)),kn(()=>{jl()});const s=new URLSearchParams(window.location.search);En.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(O){try{Lt.set(JSON.parse(O)),en.set(ci(t)),n(0,u="")}catch(T){n(0,u=`The file you loaded is broken: ${T}`)}}const g=()=>n(3,f=!0);function m(O){f=O,n(3,f)}function y(O){i=O,n(1,i)}function C(O){a=O,n(2,a)}return[u,i,a,f,t,l,o,c,g,m,y,C]}class Jp extends J{constructor(e){super(),K(this,e,Qp,Yp,X,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Jp({target:document.getElementById("app")});
