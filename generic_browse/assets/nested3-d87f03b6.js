import{S as Z,i as X,s as J,e as y,d as G,b as le,f as d,q as K,j as h,G as pt,a as L,ao as Hn,g as $,a3 as mt,H as _t,I as gt,J as dt,t as m,h as g,A as be,v as we,y as qe,c as b,l as S,m as w,z as A,k as v,D as ge,x as Y,E as yn,F as $t,r as E,u as B,w as U,a5 as Jt,ap as En,aq as to,P as ee,ak as un,ag as Xt,N as Le,Q as ne,R as se,ac as xt,a2 as tt,a4 as Dr,ar as Ut,o as Gr,as as no,an as lo,aj as dn,n as ro}from"./stores-7d21e4f0.js";import{e as me,z as hn,S as Ee,G as $e,R as Sn,H as tn,F as Fr,I as oo,M as so,o as bn,j as Bn,f as io,s as ao,h as fo,J as Ar,E as uo}from"./files-29db54cd.js";import{c as q,d as nt,t as co,a as He,C as Ge,e as ve,S as Wt,p as Un,f as Wn,h as Kt,g as $o,m as Yn}from"./colors-e93b8332.js";import{e as Jn,h as ot,M as po,b as qr,H as mo,R as _o,f as Ze,C as ht,d as go,c as Vn,a as Qn,i as ln,W as Tn,B as ho,S as bo,G as wo}from"./WarningIcon-df98d438.js";import{g as Cn,u as zr,r as Hr,b as Er,c as Br,e as vo,G as wt,a as _e,d as ko,E as re,h as te,F as Ae,f as yo,i as So,j as To,A as Co,L as Lo,M as Io}from"./MapLibreMap-ffec9b0b.js";import{P as ie,A as Ur}from"./Popup-4482c3cd.js";import{D as Mo}from"./DefaultButton-e002d761.js";import{H as Oo}from"./Header-2e7ecb69.js";function jo(o){let e;return{c(){e=y("span"),G(e,"class","svelte-kzgqtg"),le(e,"background",o[0])},m(l,t){d(l,e,t)},p(l,[t]){t&1&&le(e,"background",l[0])},i:K,o:K,d(l){l&&h(e)}}}function No(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Se extends Z{constructor(e){super(),X(this,e,No,jo,J,{color:0})}}const Po=o=>({}),Kn=o=>({}),Ro=o=>({}),Zn=o=>({});function Do(o){let e,l,t,n,r,s,f,i,a,u,c;const p=o[4].sidebar,_=pt(p,o,o[3],Zn),k=o[4].main,T=pt(k,o,o[3],Kn);return{c(){e=y("div"),l=y("aside"),t=y("div"),_&&_.c(),n=L(),r=y("button"),r.textContent="â†’",f=L(),i=y("main"),T&&T.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(r,"type","button"),G(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(l,"class",s=Hn(o[1]?"":"collapsed")+" svelte-1n0etgd"),le(l,"--sidebarWidth",o[0]),G(i,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(C,I){d(C,e,I),$(e,l),$(l,t),_&&_.m(t,null),$(l,n),$(l,r),$(e,f),$(e,i),T&&T.m(i,null),a=!0,u||(c=mt(r,"click",o[2]),u=!0)},p(C,[I]){_&&_.p&&(!a||I&8)&&_t(_,p,C,C[3],a?dt(p,C[3],I,Ro):gt(C[3]),Zn),(!a||I&2&&s!==(s=Hn(C[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(l,"class",s),(!a||I&1)&&le(l,"--sidebarWidth",C[0]),T&&T.p&&(!a||I&8)&&_t(T,k,C,C[3],a?dt(k,C[3],I,Po):gt(C[3]),Kn)},i(C){a||(m(_,C),m(T,C),a=!0)},o(C){g(_,C),g(T,C),a=!1},d(C){C&&h(e),_&&_.d(C),T&&T.d(C),u=!1,c()}}}function Go(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){l(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,s,f,n,t]}class Fo extends Z{constructor(e){super(),X(this,e,Go,Do,J,{sidebarWidth:0})}}function Xn(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function xn(o){let e,l,t,n=o[1]+"",r,s,f;return l=new Se({props:{color:o[2]}}),{c(){e=y("li"),b(l.$$.fragment),t=L(),r=S(n),s=L()},m(i,a){d(i,e,a),w(l,e,null),$(e,t),$(e,r),$(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&A(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){g(l.$$.fragment,i),f=!1},d(i){i&&h(e),v(l)}}}function Ao(o){let e,l,t=me(o[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=xn(Xn(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){e=y("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,f){d(s,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[f]){if(f&1){t=me(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Xn(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=xn(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),qe(n,s)}}}function qo(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Qt extends Z{constructor(e){super(),X(this,e,qo,Ao,J,{rows:0})}}function el(o){let e=o[0],l,t,n=tl(o);return{c(){n.c(),l=ge()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&J(e,e=r[0])?(be(),g(n,1,1,K),we(),n=tl(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function tl(o){let e;const l=o[16].default,t=pt(l,o,o[15],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&32768)&&_t(t,l,n,n[15],e?dt(l,n[15],r,null):gt(n[15]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function zo(o){let e,l,t=o[0]&&el(o);return{c(){t&&t.c(),e=ge()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=el(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Ho(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Cn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:p=null}=e,{minzoom:_=null}=e,{maxzoom:k=null}=e,{volatile:T=null}=e;const{map:C,self:I}=zr();Y(o,C,P=>l(14,n=P)),Y(o,I,P=>l(0,t=P));let M,N=!0;return yn(()=>{t&&M&&n&&(Hr(C,t,M),$t(I,t=null,t),l(12,M=void 0))}),o.$$set=P=>{"id"in P&&l(3,f=P.id),"tiles"in P&&l(4,i=P.tiles),"tileSize"in P&&l(5,a=P.tileSize),"bounds"in P&&l(6,u=P.bounds),"scheme"in P&&l(7,c=P.scheme),"attribution"in P&&l(8,p=P.attribution),"minzoom"in P&&l(9,_=P.minzoom),"maxzoom"in P&&l(10,k=P.maxzoom),"volatile"in P&&l(11,T=P.volatile),"$$scope"in P&&l(15,s=P.$$scope)},o.$$.update=()=>{o.$$.dirty&24569&&n&&t!==f&&($t(I,t=f,t),Er(n,t,Br({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:p,minzoom:_,maxzoom:k,volatile:T}),P=>n&&P===t,()=>{t&&(l(12,M=n==null?void 0:n.getSource(t)),l(13,N=!0))})),o.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,M=n==null?void 0:n.getSource(f))})),o.$$.dirty&12304&&M&&(N?l(13,N=!1):M.setTiles(i))},[t,C,I,f,i,a,u,c,p,_,k,T,M,N,n,s,r]}class Eo extends Z{constructor(e){super(),X(this,e,Ho,zo,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function Bo(o){let e;const l=o[16].default,t=pt(l,o,o[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&_t(t,l,n,n[24],e?dt(l,n[24],r,null):gt(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Uo(o){let e,l,t;function n(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[Bo]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new vo({props:r}),E.push(()=>B(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!l&&f&1&&(l=!0,i.hovered=s[0],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Wo(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=Cn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:I=!1}=e,{hovered:M=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:P=!0}=e;function j(F){M=F,l(0,M)}function O(F){Jt.call(this,o,F)}function R(F){Jt.call(this,o,F)}function D(F){Jt.call(this,o,F)}function z(F){Jt.call(this,o,F)}function V(F){Jt.call(this,o,F)}function ae(F){Jt.call(this,o,F)}return o.$$set=F=>{"id"in F&&l(1,r=F.id),"source"in F&&l(2,s=F.source),"sourceLayer"in F&&l(3,f=F.sourceLayer),"beforeId"in F&&l(4,i=F.beforeId),"beforeLayerType"in F&&l(5,a=F.beforeLayerType),"paint"in F&&l(6,u=F.paint),"layout"in F&&l(7,c=F.layout),"filter"in F&&l(8,p=F.filter),"applyToClusters"in F&&l(9,_=F.applyToClusters),"minzoom"in F&&l(10,k=F.minzoom),"maxzoom"in F&&l(11,T=F.maxzoom),"hoverCursor"in F&&l(12,C=F.hoverCursor),"manageHoverState"in F&&l(13,I=F.manageHoverState),"hovered"in F&&l(0,M=F.hovered),"eventsIfTopMost"in F&&l(14,N=F.eventsIfTopMost),"interactive"in F&&l(15,P=F.interactive),"$$scope"in F&&l(24,n=F.$$scope)},[M,r,s,f,i,a,u,c,p,_,k,T,C,I,N,P,t,j,O,R,D,z,V,ae,n]}class Ln extends Z{constructor(e){super(),X(this,e,Wo,Uo,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function nl(o){let e=o[0],l,t,n=ll(o);return{c(){n.c(),l=ge()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&J(e,e=r[0])?(be(),g(n,1,1,K),we(),n=ll(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function ll(o){let e;const l=o[15].default,t=pt(l,o,o[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&_t(t,l,n,n[14],e?dt(l,n[14],r,null):gt(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Yo(o){let e,l,t=o[0]&&nl(o);return{c(){t&&t.c(),e=ge()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=nl(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Jo(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Cn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:p=null}=e,{attribution:_=null}=e,{minzoom:k=null}=e,{maxzoom:T=null}=e,{volatile:C=null}=e;if(i&&i.includes("pmtiles://")&&!En.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let P=new to;En.addProtocol("pmtiles",P.tile)}const{map:I,self:M}=zr();Y(o,I,P=>l(13,n=P)),Y(o,M,P=>l(0,t=P));let N;return yn(()=>{t&&n&&(Hr(I,t,N),$t(M,t=null,t),N=void 0)}),o.$$set=P=>{"id"in P&&l(3,f=P.id),"url"in P&&l(4,i=P.url),"tiles"in P&&l(5,a=P.tiles),"promoteId"in P&&l(6,u=P.promoteId),"bounds"in P&&l(7,c=P.bounds),"scheme"in P&&l(8,p=P.scheme),"attribution"in P&&l(9,_=P.attribution),"minzoom"in P&&l(10,k=P.minzoom),"maxzoom"in P&&l(11,T=P.maxzoom),"volatile"in P&&l(12,C=P.volatile),"$$scope"in P&&l(14,s=P.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==f&&($t(M,t=f,t),Er(n,t,Br({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:p,attribution:_,minzoom:k,maxzoom:T,volatile:C}),P=>n&&P===t,()=>{t&&(N=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{N=n==null?void 0:n.getSource(f)}))},[t,I,M,f,i,a,u,c,p,_,k,T,C,n,s,r]}class pe extends Z{constructor(e){super(),X(this,e,Jo,Yo,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function rl(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Vo(o){let e,l,t;return l=new Ee({props:{$$slots:{default:[Ko]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=y("div"),b(l.$$.fragment)},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Qo(o){let e,l,t,n,r,s,f,i,a,u;l=new Ee({props:{$$slots:{default:[Zo]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&ol(o);r=new ot({props:{label:"Help",$$slots:{default:[Xo]},$$scope:{ctx:o}}}),f=new ko({}),f.$on("click",o[3]);let p=me(o[0]),_=[];for(let T=0;T<p.length;T+=1)_[T]=sl(rl(o,p,T));const k=T=>g(_[T],1,1,()=>{_[T]=null});return{c(){e=y("div"),b(l.$$.fragment),t=L(),c&&c.c(),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L();for(let T=0;T<_.length;T+=1)_[T].c();a=ge()},m(T,C){d(T,e,C),w(l,e,null),d(T,t,C),c&&c.m(T,C),d(T,n,C),w(r,T,C),d(T,s,C),w(f,T,C),d(T,i,C);for(let I=0;I<_.length;I+=1)_[I]&&_[I].m(T,C);d(T,a,C),u=!0},p(T,C){const I={};C&16384&&(I.$$scope={dirty:C,ctx:T}),l.$set(I),T[2]?c?c.p(T,C):(c=ol(T),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const M={};if(C&16384&&(M.$$scope={dirty:C,ctx:T}),r.$set(M),C&65){p=me(T[0]);let N;for(N=0;N<p.length;N+=1){const P=rl(T,p,N);_[N]?(_[N].p(P,C),m(_[N],1)):(_[N]=sl(P),_[N].c(),m(_[N],1),_[N].m(a.parentNode,a))}for(be(),N=p.length;N<_.length;N+=1)k(N);we()}},i(T){if(!u){m(l.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T);for(let C=0;C<p.length;C+=1)m(_[C]);u=!0}},o(T){g(l.$$.fragment,T),g(r.$$.fragment,T),g(f.$$.fragment,T),_=_.filter(Boolean);for(let C=0;C<_.length;C+=1)g(_[C]);u=!1},d(T){T&&(h(e),h(t),h(n),h(s),h(i),h(a)),v(l),c&&c.d(T),v(r,T),v(f,T),qe(_,T)}}}function Ko(o){let e;return{c(){e=S("Measure lines")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Zo(o){let e;return{c(){e=S("Stop measuring")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ol(o){let e,l,t=o[2].toFixed(2)+"",n,r;return{c(){e=y("p"),l=S("Length: "),n=S(t),r=S(" meters")},m(s,f){d(s,e,f),$(e,l),$(e,n),$(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&A(n,t)},d(s){s&&h(e)}}}function Xo(o){let e;return{c(){e=y("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){d(l,e,t)},p:K,d(l){l&&h(e)}}}function xo(o){let e,l;return{c(){e=y("span"),l=L(),G(e,"class","dot svelte-1tzt432")},m(t,n){d(t,e,n),d(t,l,n)},p:K,d(t){t&&(h(e),h(l))}}}function sl(o){let e,l,t;function n(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[xo]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new po({props:s}),E.push(()=>B(e,"lngLat",n)),e.$on("click",r),{c(){b(e.$$.fragment)},m(f,i){w(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!l&&i&1&&(l=!0,a.lngLat=o[11],U(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){g(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function es(o){let e,l;const t=[q("measurement-line"),{paint:{"line-color":nt.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ts(o){let e,l,t,n,r,s,f;const i=[Qo,Vo],a=[];function u(c,p){return c[1]?0:1}return e=u(o),l=a[e]=i[e](o),n=new wt({props:{data:o[0].length<2?Jn():hn(o[0]),$$slots:{default:[es]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),b(n.$$.fragment)},m(c,p){a[e].m(c,p),d(c,t,p),w(n,c,p),r=!0,s||(f=mt(window,"keydown",o[5]),s=!0)},p(c,[p]){let _=e;e=u(c),e===_?a[e].p(c,p):(be(),g(a[_],1,1,()=>{a[_]=null}),we(),l=a[e],l?l.p(c,p):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const k={};p&1&&(k.data=c[0].length<2?Jn():hn(c[0])),p&16384&&(k.$$scope={dirty:p,ctx:c}),n.$set(k)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){g(l),g(n.$$.fragment,c),r=!1},d(c){c&&h(t),a[e].d(c),v(n,c),s=!1,f()}}}function ns(o,e,l){let t,n=!1,r=[];function s(k){return k.length<2?null:1e3*co(hn(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),l(0,r)}function c(k,T,C,I){C[I]=k,l(0,r)}const p=k=>u(k),_=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=s(r))},[r,n,t,f,i,a,u,c,p,_]}class ls extends Z{constructor(e){super(),X(this,e,ns,ts,J,{})}}const rs="/atip/generic_browse/assets/zoom_out_map-b2e1091a.svg";function os(o){let e,l;return{c(){e=y("img"),Xt(e.src,l=rs)||G(e,"src",l),G(e,"alt","Zoom to show entire boundary")},m(t,n){d(t,e,n)},p:K,d(t){t&&h(e)}}}function ss(o){let e,l;return e=new Ee({props:{title:"Zoom to show entire boundary",$$slots:{default:[os]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function is(o,e,l){let t;Y(o,un,s=>l(2,t=s));let{boundaryGeojson:n}=e;function r(){let s=qr(n);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&l(1,n=s.boundaryGeojson)},[r,n]}class as extends Z{constructor(e){super(),X(this,e,is,ss,J,{boundaryGeojson:1})}}const Q={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},rights_of_way:{footpath:"red",bridleway:"green",restricted_byway:"blue",boat:"orange"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Fe=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function fs(o){let e;return{c(){e=S(`Open Government License
  `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function us(o){let e,l,t,n,r;return t=new re({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[fs]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("License: "),b(t.$$.fragment),n=S(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,f){d(s,e,f),$(e,l),w(t,e,null),$(e,n),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){g(t.$$.fragment,s),r=!1},d(s){s&&h(e),v(t)}}}class Te extends Z{constructor(e){super(),X(this,e,null,us,J,{})}}function il(o,e,l){const t=o.slice();return t[2]=e[l],t}function al(o,e,l){const t=o.slice();return t[5]=e[l],t}function fl(o){let e,l;return{c(){e=y("span"),l=S(`Â 
    `),le(e,"background",o[5]),le(e,"width","100%"),le(e,"border","1px solid black")},m(t,n){d(t,e,n),$(e,l)},p(t,n){n&1&&le(e,"background",t[5])},d(t){t&&h(e)}}}function ul(o){let e,l=o[2]+"",t;return{c(){e=y("span"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&A(t,l)},d(n){n&&h(e)}}}function cs(o){let e,l,t,n=me(o[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=fl(al(o,n,i));let s=me(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=ul(il(o,s,i));return{c(){e=y("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=y("div");for(let i=0;i<f.length;i+=1)f[i].c();le(e,"display","flex"),le(t,"display","flex"),le(t,"justify-content","space-between")},m(i,a){d(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);d(i,l,a),d(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=me(i[0]);let u;for(u=0;u<n.length;u+=1){const c=al(i,n,u);r[u]?r[u].p(c,a):(r[u]=fl(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){s=me(i[1]);let u;for(u=0;u<s.length;u+=1){const c=il(i,s,u);f[u]?f[u].p(c,a):(f[u]=ul(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:K,o:K,d(i){i&&(h(e),h(l),h(t)),qe(r,i),qe(f,i)}}}function $s(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Be extends Z{constructor(e){super(),X(this,e,$s,cs,J,{colorScale:0,limits:1})}}function ce(o){let e=new URLSearchParams(window.location.search).has(o),l=Le(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),window.history.replaceState(null,"",n.toString())}),l}function vt(o,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Le(n);return s.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),window.history.replaceState(null,"",i.toString())}),s}let wn=Le(new Map),Zt=Le(new Set);const ps=o=>({}),cl=o=>({}),ms=o=>({}),$l=o=>({}),_s=o=>({}),pl=o=>({});function gs(o){let e;return{c(){e=S(o[2])},m(l,t){d(l,e,t)},p(l,t){t&4&&A(e,l[2])},d(l){l&&h(e)}}}function ds(o){let e,l,t;const n=o[7].icon,r=pt(n,o,o[10],pl);return{c(){r&&r.c(),e=L(),l=S(o[2])},m(s,f){r&&r.m(s,f),d(s,e,f),d(s,l,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&_t(r,n,s,s[10],t?dt(n,s[10],f,_s):gt(s[10]),pl),(!t||f&4)&&A(l,s[2])},i(s){t||(m(r,s),t=!0)},o(s){g(r,s),t=!1},d(s){s&&(h(e),h(l)),r&&r.d(s)}}}function hs(o){let e;const l=o[7].help,t=pt(l,o,o[10],$l);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&_t(t,l,n,n[10],e?dt(l,n[10],r,ms):gt(n[10]),$l)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function bs(o){let e;return{c(){e=S("X")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ws(o){let e,l,t,n,r,s,f,i,a;function u(p){o[8](p)}let c={$$slots:{default:[ds]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),l=new He({props:c}),E.push(()=>B(l,"checked",u)),s=new mo({props:{$$slots:{default:[hs]},$$scope:{ctx:o}}}),i=new Ee({props:{$$slots:{default:[bs]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=y("div"),b(l.$$.fragment),n=L(),r=y("span"),b(s.$$.fragment),f=L(),b(i.$$.fragment),le(e,"display","flex"),le(e,"justify-content","space-between")},m(p,_){d(p,e,_),w(l,e,null),$(e,n),$(e,r),w(s,r,null),$(r,f),w(i,r,null),a=!0},p(p,_){const k={};_&1028&&(k.$$scope={dirty:_,ctx:p}),!t&&_&1&&(t=!0,k.checked=p[0],U(()=>t=!1)),l.$set(k);const T={};_&1024&&(T.$$scope={dirty:_,ctx:p}),s.$set(T);const C={};_&1024&&(C.$$scope={dirty:_,ctx:p}),i.$set(C)},i(p){a||(m(l.$$.fragment,p),m(s.$$.fragment,p),m(i.$$.fragment,p),a=!0)},o(p){g(l.$$.fragment,p),g(s.$$.fragment,p),g(i.$$.fragment,p),a=!1},d(p){p&&h(e),v(l),v(s),v(i)}}}function ml(o){let e;const l=o[7].controls,t=pt(l,o,o[10],cl);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&_t(t,l,n,n[10],e?dt(l,n[10],r,ps):gt(n[10]),cl)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function vs(o){let e,l,t,n,r,s;e=new He({props:{checked:o[4].has(o[1]),$$slots:{default:[gs]},$$scope:{ctx:o}}}),e.$on("change",o[5]),n=new Ge({props:{small:!0,$$slots:{default:[ws]},$$scope:{ctx:o}}});let f=o[0]&&ml(o);return{c(){b(e.$$.fragment),l=L(),t=y("div"),b(n.$$.fragment),r=L(),f&&f.c()},m(i,a){w(e,i,a),d(i,l,a),d(i,t,a),w(n,t,null),$(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=ml(i),f.c(),m(f,1),f.m(t,null)):f&&(be(),g(f,1,1,()=>{f=null}),we())},i(i){s||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),s=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),g(f),s=!1},d(i){i&&(h(l),h(t)),v(e,i),v(n),f&&f.d(),o[9](null)}}}function ks(o,e,l){let t;Y(o,Zt,k=>l(4,t=k));let{$$slots:n={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),Zt.set(t));let a=null;yn(()=>{wn.update(k=>(k.delete(s),k))});function u(){Zt.update(k=>(k.has(s)?(k.delete(s),l(0,i=!1)):(k.add(s),l(0,i=!0)),k))}function c(){t.delete(s),Zt.set(t),l(0,i=!1)}function p(k){i=k,l(0,i)}function _(k){E[k?"unshift":"push"](()=>{a=k,l(3,a),l(1,s)})}return o.$$set=k=>{"name"in k&&l(1,s=k.name),"title"in k&&l(2,f=k.title),"show"in k&&l(0,i=k.show),"$$scope"in k&&l(10,r=k.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&wn.update(k=>(l(3,a.style.display="none",a),k.set(s,a),k))},[i,s,f,a,t,u,c,n,p,_,r]}class fe extends Z{constructor(e){super(),X(this,e,ks,vs,J,{name:1,title:2,show:0})}}function _l(o){const e=o[7].OA21CD;o[8]=e;const l=o[7][o[0].kind];o[9]=l}function ys(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Cs]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ls]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("Population density data is from the 2021 census, via "),b(t.$$.fragment),n=S(". Output area boundaries from "),b(r.$$.fragment),s=S(".")},m(i,a){d(i,e,a),$(e,l),w(t,e,null),$(e,n),w(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function Ss(o){let e,l,t,n,r,s,f,i,a;return r=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Is]},$$scope:{ctx:o}}}),f=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ms]},$$scope:{ctx:o}}}),{c(){e=y("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=y("p"),n=S("Car/van availability data is from the 2021 census, via "),b(r.$$.fragment),s=S(". Output area boundaries from "),b(f.$$.fragment),i=S(".")},m(u,c){d(u,e,c),d(u,l,c),d(u,t,c),$(t,n),w(r,t,null),$(t,s),w(f,t,null),$(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){g(r.$$.fragment,u),g(f.$$.fragment,u),a=!1},d(u){u&&(h(e),h(l),h(t)),v(r),v(f)}}}function Ts(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Os]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[js]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),n=S(". Output area boundaries from "),b(r.$$.fragment),s=S(".")},m(i,a){d(i,e,a),$(e,l),w(t,e,null),$(e,n),w(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function Cs(o){let e;return{c(){e=S(`NOMIS TS006
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ls(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Is(o){let e;return{c(){e=S(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ms(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Os(o){let e;return{c(){e=S(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function js(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ns(o){let e,l,t,n,r,s;const f=[Ts,Ss,ys],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(o),t=i[l]=f[l](o),r=new Te({}),{c(){e=y("span"),t.c(),n=L(),b(r.$$.fragment),G(e,"slot","help")},m(u,c){d(u,e,c),i[l].m(e,null),$(e,n),w(r,e,null),s=!0},p(u,c){let p=l;l=a(u),l!==p&&(be(),g(i[p],1,1,()=>{i[p]=null}),we(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){g(t),g(r.$$.fragment,u),s=!1},d(u){u&&h(e),i[l].d(),v(r)}}}function Ps(o){let e,l,t,n;return t=new Be({props:{colorScale:o[1],limits:bt(o[0].kind).map(gl)}}),{c(){e=y("p"),e.textContent="(people per square kilometres)",l=L(),b(t.$$.fragment)},m(r,s){d(r,e,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&1&&(f.limits=bt(r[0].kind).map(gl)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&(h(e),h(l)),v(t,r)}}}function Rs(o){let e,l;return e=new Be({props:{colorScale:o[1],limits:bt(o[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=bt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ds(o){let e,l;return e=new Be({props:{colorScale:o[1],limits:bt(o[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=bt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Gs(o){let e,l,t,n,r,s,f;function i(_){o[4](_)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),l=new Sn({props:a}),E.push(()=>B(l,"value",i));const u=[Ds,Rs,Ps],c=[];function p(_,k){return _[0].kind=="percent_households_with_car"?0:_[0].kind=="average_cars_per_household"?1:_[0].kind=="population_density"?2:-1}return~(r=p(o))&&(s=c[r]=u[r](o)),{c(){e=y("div"),b(l.$$.fragment),n=L(),s&&s.c(),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(_,k){d(_,e,k),w(l,e,null),$(e,n),~r&&c[r].m(e,null),f=!0},p(_,k){const T={};!t&&k&1&&(t=!0,T.value=_[0].kind,U(()=>t=!1)),l.$set(T);let C=r;r=p(_),r===C?~r&&c[r].p(_,k):(s&&(be(),g(c[C],1,1,()=>{c[C]=null}),we()),~r?(s=c[r],s?s.p(_,k):(s=c[r]=u[r](_),s.c()),m(s,1),s.m(e,null)):s=null)},i(_){f||(m(l.$$.fragment,_),m(s),f=!0)},o(_){g(l.$$.fragment,_),g(s),f=!1},d(_){_&&h(e),v(l),~r&&c[r].d()}}}function Fs(o){let e,l,t,n=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=y("p"),l=S("There are "),t=y("b"),r=S(n),s=S(`
          people per square kilometre in `),i=S(f)},m(a,u){d(a,e,u),$(e,l),$(e,t),$(t,r),$(e,s),$(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&A(r,n),u&128&&f!==(f=a[8]+"")&&A(i,f)},d(a){a&&h(e)}}}function As(o){let e,l,t=o[8]+"",n,r,s,f=o[9]+"",i,a;return{c(){e=y("p"),l=S("Households in "),n=S(t),r=S(` have an average of
          `),s=y("b"),i=S(f),a=S(`
          cars`)},m(u,c){d(u,e,c),$(e,l),$(e,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&A(n,t),c&129&&f!==(f=u[9]+"")&&A(i,f)},d(u){u&&h(e)}}}function qs(o){let e,l,t=o[9]+"",n,r,s,f=o[8]+"",i,a;return{c(){e=y("p"),l=y("b"),n=S(t),r=S("%"),s=S(`
          of households in `),i=S(f),a=S(" have 1 or more cars")},m(u,c){d(u,e,c),$(e,l),$(l,n),$(l,r),$(e,s),$(e,i),$(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&A(n,t),c&128&&f!==(f=u[8]+"")&&A(i,f)},d(u){u&&h(e)}}}function zs(o){_l(o);let e;function l(r,s){return r[0].kind=="percent_households_with_car"?qs:r[0].kind=="average_cars_per_household"?As:Fs}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){_l(r),t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Hs(o){let e,l;return e=new ie({props:{$$slots:{default:[zs,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Es(o){let e,l,t,n;const r=[q(We),{sourceLayer:We},{paint:{"fill-color":ve(["get",o[0].kind],bt(o[0].kind),o[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Hs]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s}),e.$on("click",o[3]);const f=[q(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(We)),u&0&&{sourceLayer:We},u&3&&{paint:{"fill-color":ve(["get",a[0].kind],bt(a[0].kind),a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?ne(f,[u&0&&se(q(`${We}-outline`)),u&0&&{sourceLayer:We},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Bs(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:We,title:"2021 census",$$slots:{controls:[Gs],help:[Ns]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${We}.pmtiles`,$$slots:{default:[Es]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let We="census_output_areas";function Us(o){return o.show?o.kind:null}function Ws(o){return{show:!0,kind:o}}function bt(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const gl=o=>o.toLocaleString();function Ys(o,e,l){let t,n=Q.sequential_low_to_high,s=vt(We,{show:!1,kind:"percent_households_with_car"},Us,Ws);Y(o,s,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,n,s,f,i,a]}class Js extends Z{constructor(e){super(),X(this,e,Ys,Bs,J,{})}}function Vs(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Qs(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ks(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[Qs]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(", as of May 2024."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Zs(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Xs(o){let e,l;return e=new ie({props:{$$slots:{default:[Zs,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function xs(o){let e,l,t,n;const r=[q(yt),{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Xs]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s}),e.$on("click",ni);const f=[q(`${yt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(yt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&se(q(`${yt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function ei(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:yt,title:ti,$$slots:{help:[Ks],icon:[Vs]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new wt({props:{data:`${$e()}/v1/${yt}.geojson`,$$slots:{default:[xs]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let yt="combined_authorities",ti="Combined authorities";function ni(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function li(o,e,l){let t,n=Q.combined_authorities,r=ce(yt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ri extends Z{constructor(e){super(),X(this,e,li,ei,J,{})}}function oi(o){let e;return{c(){e=S(`DLUCH GIS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function si(o){let e;return{c(){e=S(`here
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ii(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[oi]},$$scope:{ctx:o}}}),s=new re({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[si]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=y("span"),l=y("p"),t=S("The 2019 English IMD scores come from "),b(n.$$.fragment),r=S(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),b(s.$$.fragment),f=S("."),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),$(e,i),w(a,e,null),u=!0},p(c,p){const _={};p&64&&(_.$$scope={dirty:p,ctx:c}),n.$set(_);const k={};p&64&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(s),v(a)}}}function ai(o){let e,l,t;return l=new Be({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function fi(o){let e,l=o[5].LSOA11CD+"",t,n,r,s=o[5].score+"",f,i,a,u,c,p=o[5].rank.toLocaleString()+"",_,k;return{c(){e=y("p"),t=S(l),n=S(` has an IMD score of
        `),r=y("b"),f=S(s),i=L(),a=y("p"),u=S("Rank: "),c=y("b"),_=S(p),k=S(`
        / 32,844 LSOAs`)},m(T,C){d(T,e,C),$(e,t),$(e,n),$(e,r),$(r,f),d(T,i,C),d(T,a,C),$(a,u),$(a,c),$(c,_),$(a,k)},p(T,C){C&32&&l!==(l=T[5].LSOA11CD+"")&&A(t,l),C&32&&s!==(s=T[5].score+"")&&A(f,s),C&32&&p!==(p=T[5].rank.toLocaleString()+"")&&A(_,p)},d(T){T&&(h(e),h(i),h(a))}}}function ui(o){let e,l;return e=new ie({props:{$$slots:{default:[fi,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ci(o){let e,l,t,n;const r=[q(Ye),{sourceLayer:Ye},{paint:{"fill-color":ve(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[ui]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s});const f=[q(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?ne(r,[u&0&&se(q(Ye)),u&0&&{sourceLayer:Ye},u&6&&{paint:{"fill-color":ve(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?ne(f,[u&0&&se(q(`${Ye}-outline`)),u&0&&{sourceLayer:Ye},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function $i(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ye,title:pi,$$slots:{controls:[ai],help:[ii]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ye}.pmtiles`,$$slots:{default:[ci]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ye="imd",pi="Indices of Multiple Deprivation";function mi(o,e,l){let t,n=Q.sequential_low_to_high,r=[0,2,4,6,8,10],s=ce(Ye);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class _i extends Z{constructor(e){super(),X(this,e,mi,$i,J,{})}}function gi(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function di(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function hi(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[di]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(", as of May 2024."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function bi(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function wi(o){let e,l;return e=new ie({props:{$$slots:{default:[bi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function vi(o){let e,l,t,n;const r=[q(St),{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[wi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s}),e.$on("click",Si);const f=[q(`${St}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(St)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&se(q(`${St}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function ki(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:St,title:yi,$$slots:{help:[hi],icon:[gi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new wt({props:{data:`${$e()}/v1/${St}.geojson`,$$slots:{default:[vi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let St="local_authority_districts",yi="Local Authority Districts";function Si(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function Ti(o,e,l){let t,n=Q.local_authority_districts,r=ce(St);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ci extends Z{constructor(e){super(),X(this,e,Ti,ki,J,{})}}function Li(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ii(o){let e;return{c(){e=S(`local authority
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Mi(o){let e;return{c(){e=S(`national park authorit
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Oi(o){let e;return{c(){e=S(`development corporation
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ji(o){let e;return{c(){e=S("this map")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ni(o){let e;return{c(){e=S(`planning.data.gov.uk
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Pi(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,k,T,C,I,M,N,P,j,O,R;return n=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ii]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Mi]},$$scope:{ctx:o}}}),i=new re({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Oi]},$$scope:{ctx:o}}}),k=new re({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ji]},$$scope:{ctx:o}}}),N=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ni]},$$scope:{ctx:o}}}),O=new Te({}),{c(){e=y("span"),l=y("p"),t=S("LPAs may be a "),b(n.$$.fragment),r=S(", "),b(s.$$.fragment),f=S("y, or "),b(i.$$.fragment),a=S("."),u=L(),c=y("p"),p=y("strong"),_=S(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),b(k.$$.fragment),T=S(" to get more details."),C=L(),I=y("p"),M=S("Data from ONS Geography via "),b(N.$$.fragment),P=S(", as of November 2022."),j=L(),b(O.$$.fragment),G(e,"slot","help")},m(D,z){d(D,e,z),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),w(i,l,null),$(l,a),$(e,u),$(e,c),$(c,p),$(p,_),w(k,p,null),$(p,T),$(e,C),$(e,I),$(I,M),w(N,I,null),$(I,P),$(e,j),w(O,e,null),R=!0},p(D,z){const V={};z&32&&(V.$$scope={dirty:z,ctx:D}),n.$set(V);const ae={};z&32&&(ae.$$scope={dirty:z,ctx:D}),s.$set(ae);const F={};z&32&&(F.$$scope={dirty:z,ctx:D}),i.$set(F);const x={};z&32&&(x.$$scope={dirty:z,ctx:D}),k.$set(x);const H={};z&32&&(H.$$scope={dirty:z,ctx:D}),N.$set(H)},i(D){R||(m(n.$$.fragment,D),m(s.$$.fragment,D),m(i.$$.fragment,D),m(k.$$.fragment,D),m(N.$$.fragment,D),m(O.$$.fragment,D),R=!0)},o(D){g(n.$$.fragment,D),g(s.$$.fragment,D),g(i.$$.fragment,D),g(k.$$.fragment,D),g(N.$$.fragment,D),g(O.$$.fragment,D),R=!1},d(D){D&&h(e),v(n),v(s),v(i),v(k),v(N),v(O)}}}function Ri(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Di(o){let e,l;return e=new ie({props:{$$slots:{default:[Ri,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Gi(o){let e,l,t,n;const r=[q(Je),{sourceLayer:Je},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Di]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s});const f=[q(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(Je)),u&0&&{sourceLayer:Je},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&se(q(`${Je}-outline`)),u&0&&{sourceLayer:Je},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Fi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Je,title:Ai,$$slots:{help:[Pi],icon:[Li]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Je}.pmtiles`,$$slots:{default:[Gi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Je="local_planning_authorities",Ai="Local Planning Authorities";function qi(o,e,l){let t,n=Q.local_planning_authorities,r=ce(Je);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class zi extends Z{constructor(e){super(),X(this,e,qi,Fi,J,{})}}function Hi(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ei(o){let e;return{c(){e=S(`Ordnance Survey Boundary-Line
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bi(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Ei]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(", as of October 2024."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Ui(o){let e,l=o[4].Name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&A(t,l)},d(n){n&&h(e)}}}function Wi(o){let e,l;return e=new ie({props:{$$slots:{default:[Ui,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Yi(o){let e,l,t,n;const r=[q(Ve),{sourceLayer:Ve},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Wi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s}),e.$on("click",Qi);const f=[q(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(Ve)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&se(q(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ji(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ve,title:Vi,$$slots:{help:[Bi],icon:[Hi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ve}.pmtiles`,$$slots:{default:[Yi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ve="parliamentary_constituencies",Vi="Parliamentary constituencies";function Qi(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ki(o,e,l){let t,n=Q.parliamentary_constituencies,r=ce(Ve);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Zi extends Z{constructor(e){super(),X(this,e,Ki,Ji,J,{})}}function Xi(o){let e;return{c(){e=S(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xi(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Xi]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Most layers show air quality data from "),b(n.$$.fragment),r=S(`. The measurements are annual means, in units of Âµgm
      `),s=y("sup"),s.textContent="3",f=S(`
      . Note the particulate matter layers are not corrected for natural sources.`),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),$(l,s),$(l,f),$(e,i),w(a,e,null),u=!0},p(c,p){const _={};p&4096&&(_.$$scope={dirty:p,ctx:c}),n.$set(_)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function ea(o){let e,l,t,n,r,s=o[3](o[0].pollutant)+"",f,i,a,u,c,p,_,k,T,C,I,M,N;function P(O){o[5](O)}let j={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return o[0].pollutant!==void 0&&(j.value=o[0].pollutant),l=new Wt({props:j}),E.push(()=>B(l,"value",P)),{c(){e=y("div"),b(l.$$.fragment),n=L(),r=y("p"),f=S(s),i=L(),a=y("div"),u=y("label"),c=S(`Opacity
        `),p=y("input"),_=L(),k=y("img"),G(p,"type","range"),G(p,"min","0"),G(p,"max","100"),Xt(k.src,T=o[4](o[0].pollutant))||G(k,"src",T),G(k,"width",150),G(k,"alt",C=`Legend for ${o[0].pollutant} layer`),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(O,R){d(O,e,R),w(l,e,null),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,u),$(u,c),$(u,p),tt(p,o[0].opacity),$(e,_),$(e,k),I=!0,M||(N=[mt(p,"change",o[6]),mt(p,"input",o[6])],M=!0)},p(O,R){const D={};!t&&R&1&&(t=!0,D.value=O[0].pollutant,U(()=>t=!1)),l.$set(D),(!I||R&1)&&s!==(s=O[3](O[0].pollutant)+"")&&A(f,s),R&1&&tt(p,O[0].opacity),(!I||R&1&&!Xt(k.src,T=O[4](O[0].pollutant)))&&G(k,"src",T),(!I||R&1&&C!==(C=`Legend for ${O[0].pollutant} layer`))&&G(k,"alt",C)},i(O){I||(m(l.$$.fragment,O),I=!0)},o(O){g(l.$$.fragment,O),I=!1},d(O){O&&h(e),v(l),M=!1,Dr(N)}}}function ta(o){let e,l;const t=[q(on),{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _o({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(on)),s&1&&{paint:{"raster-opacity":r[0].opacity/100}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function na(o){let e,l,t,n,r;function s(i){o[7](i)}let f={name:on,title:la,$$slots:{controls:[ea],help:[xi]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new Eo({props:{tiles:[o[1]],tileSize:256,$$slots:{default:[ta]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&2&&(c.tiles=[i[1]]),a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let on="pollution",la="Pollution";function ra(o){return o.show?`${o.pollutant}/${o.opacity}`:null}function oa(o){let[e,l]=o.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function sa(o,e,l){let t,n,r,f=vt(on,{show:!1,pollutant:"PM25_viridis",opacity:50},ra,oa);Y(o,f,T=>l(0,r=T));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(T){return t[1]}function u(T){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${C}`}function c(T){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${C}`}function p(T){o.$$.not_equal(r.pollutant,T)&&(r.pollutant=T,f.set(r))}function _(){r.opacity=xt(this.value),f.set(r)}function k(T){o.$$.not_equal(r.show,T)&&(r.show=T,f.set(r))}return o.$$.update=()=>{o.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),o.$$.dirty&1&&l(1,n=u(r.pollutant))},[r,n,f,a,c,p,_,k]}class ia extends Z{constructor(e){super(),X(this,e,sa,na,J,{})}}function aa(o){let e;return{c(){e=S(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fa(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[aa]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=y("span"),l=y("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=y("p"),r=S("Data from June 2019, produced by "),b(s.$$.fragment),f=S(". See there for methodology details"),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),w(s,n,null),$(n,f),$(e,i),w(a,e,null),u=!0},p(c,p){const _={};p&32&&(_.$$scope={dirty:p,ctx:c}),s.$set(_)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(s),v(a)}}}function ua(o){let e,l,t;return l=new Be({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ca(o){let e,l=o[4].noiseclass+"",t,n,r=dl(o[4].noiseclass)+"",s,f;return{c(){e=y("p"),t=S(l),n=S(" dB ("),s=S(r),f=S(")")},m(i,a){d(i,e,a),$(e,t),$(e,n),$(e,s),$(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&A(t,l),a&16&&r!==(r=dl(i[4].noiseclass)+"")&&A(s,r)},d(i){i&&h(e)}}}function $a(o){let e,l;return e=new ie({props:{$$slots:{default:[ca,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function pa(o){let e,l;const t=[q(Tt),{sourceLayer:Tt},{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":te(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[$a]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&se(q(Tt)),s&0&&{sourceLayer:Tt},s&2&&{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":te(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ma(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Tt,title:_a,$$slots:{controls:[ua],help:[fa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Tt}.pmtiles`,$$slots:{default:[pa]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Tt="road_noise",_a="Road noise";function dl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function ga(o,e,l){let t,n=[Q.sequential_low_to_high[0],Q.sequential_low_to_high[2],Q.sequential_low_to_high[4]],r=ce(Tt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class da extends Z{constructor(e){super(),X(this,e,ga,ma,J,{})}}function hl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[11]=e[l][1],t[12]=e[l][2],t[13]=e,t[14]=l,t}function ha(o){let e;return{c(){e=S(`rowmaps.com
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ba(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://www.rowmaps.com",$$slots:{default:[ha]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=y("span"),l=y("p"),t=S("These public rights of way are aggregated from 137 authorities, thanks to "),b(n.$$.fragment),r=S(`. The licenses for each authority may vary, but most use
      the Open Government License v3 or Creative Commons.`),s=L(),f=y("p"),f.textContent="This data is current as of 15 November, 2024.",i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),w(a,e,null),u=!0},p(c,p){const _={};p&32768&&(_.$$scope={dirty:p,ctx:c}),n.$set(_)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function wa(o){let e,l,t=o[11]+"",n,r,s;return e=new Se({props:{color:o[12]}}),{c(){b(e.$$.fragment),l=L(),n=S(t),r=L()},m(f,i){w(e,f,i),d(f,l,i),d(f,n,i),d(f,r,i),s=!0},p:K,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n),h(r)),v(e,f)}}}function bl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[wa]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new He({props:r}),E.push(()=>B(e,"checked",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){o=s;const i={};f&32768&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function va(o){let e,l,t=me(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=bl(hl(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ge()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&5){t=me(s[2]);let i;for(i=0;i<t.length;i+=1){const a=hl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=bl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),qe(n,s)}}}function ka(o){let e,l,t;return l=new Ge({props:{small:!0,$$slots:{default:[va]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ya(o){let e,l=o[9].kind+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&512&&l!==(l=n[9].kind+"")&&A(t,l)},d(n){n&&h(e)}}}function Sa(o){let e,l;return e=new ie({props:{$$slots:{default:[ya,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&33280&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ta(o){let e,l;const t=[q(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ze(["get","kind"],{footpath:Q.rights_of_way.footpath,bridleway:Q.rights_of_way.bridleway,"restricted byway":Q.rights_of_way.restricted_byway,"byway open to all traffic":Q.rights_of_way.boat},"red"),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])}];let n={$$slots:{default:[Sa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&se(q(Ct)),s&0&&{sourceLayer:Ct},t[2],t[3],t[4],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])}]):{};s&32768&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ca(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ct,title:La,$$slots:{controls:[ka],help:[ba]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ct}.pmtiles`,$$slots:{default:[Ta]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32769&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&32769&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ct="rights_of_way",La="Rights of Way";function Ia(o){return{show:!0,footpath:o.includes("footpath"),bridleway:o.includes("bridleway"),restricted_byway:o.includes("restricted_byway"),boat:o.includes("boat")}}function Ma(o,e,l){let t,n=["footpath","bridleway","restricted_byway","boat"],r={show:!1,footpath:!0,bridleway:!0,restricted_byway:!0,boat:!0};function s(p){return p.show?n.filter(_=>p[_]).join(","):null}let f=vt(Ct,r,s,Ia);Y(o,f,p=>l(0,t=p));let i=[["footpath","Footpath",Q.rights_of_way.footpath],["bridleway","Bridleway",Q.rights_of_way.bridleway],["restricted_byway","Restricted byway",Q.rights_of_way.restricted_byway],["boat","Byway open to all traffic",Q.rights_of_way.boat]];function a(p){let _=n.filter(k=>p[k]).map(k=>({footpath:"footpath",bridleway:"bridleway",restricted_byway:"restricted byway",boat:"byway open to all traffic"})[k]);return["in",["get","kind"],["literal",_]]}function u(p,_){o.$$.not_equal(t[_],p)&&(t[_]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class Oa extends Z{constructor(e){super(),X(this,e,Ma,Ca,J,{})}}function ja(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Na(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Pa(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Na]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(", as of May 2023."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Ra(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Da(o){let e,l;return e=new ie({props:{$$slots:{default:[Ra,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ga(o){let e,l,t,n;const r=[q(Qe),{sourceLayer:Qe},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Da]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s}),e.$on("click",qa);const f=[q(`${Qe}-outline`),{sourceLayer:Qe},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(Qe)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&se(q(`${Qe}-outline`)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Fa(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Qe,title:Aa,$$slots:{help:[Pa],icon:[ja]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Qe}.pmtiles`,$$slots:{default:[Ga]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Qe="wards",Aa="Wards";function qa(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function za(o,e,l){let t,n=Q.wards,r=ce(Qe);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ha extends Z{constructor(e){super(),X(this,e,za,Fa,J,{})}}function Ea(o){let e;return{c(){e=S("Open Data Commons Open Database License")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ba(o){let e,l,t,n;return t=new re({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ea]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("License: "),b(t.$$.fragment)},m(r,s){d(r,e,s),$(e,l),w(t,e,null),n=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&h(e),v(t)}}}class lt extends Z{constructor(e){super(),X(this,e,null,Ba,J,{})}}function Ua(o){let e,l,t;return l=new Se({props:{color:Q.bus_route_with_lane}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Wa(o){let e;return{c(){e=S(`GTFS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ya(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://gtfs.org",$$slots:{default:[Wa]},$$scope:{ctx:o}}}),a=new lt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=y("p"),r=S("Note this data is from OpenStreetMap (as of 20 October 2024), not "),b(s.$$.fragment),f=S(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),w(s,n,null),$(n,f),$(e,i),w(a,e,null),u=!0},p(c,p){const _={};p&16&&(_.$$scope={dirty:p,ctx:c}),s.$set(_)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(s),v(a)}}}function Ja(o){let e;return{c(){e=y("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Va(o){let e;return{c(){e=y("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Qa(o){let e;function l(r,s){return r[3].has_bus_lane?Va:Ja}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Ka(o){let e,l;return e=new ie({props:{$$slots:{default:[Qa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Za(o){let e,l;const t=[q(Lt),{sourceLayer:Lt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Q.bus_route_with_lane,Q.bus_route_without_lane],"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ka]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(Lt)),s&0&&{sourceLayer:Lt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Xa(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Lt,title:xa,$$slots:{help:[Ya],icon:[Ua]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Lt}.pmtiles`,$$slots:{default:[Za]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Lt="bus_routes",xa="Bus routes";function ef(o,e,l){let t,n=ce(Lt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class tf extends Z{constructor(e){super(),X(this,e,ef,Xa,J,{})}}function wl(o){const e=pf(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function vl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function nf(o){let e,l,t,n,r,s,f,i,a;return i=new lt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=y("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),s=y("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),b(i.$$.fragment),G(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),w(i,e,null),a=!0},p:K,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){g(i.$$.fragment,u),a=!1},d(u){u&&h(e),v(i)}}}function lf(o){let e,l,t=o[13]+"",n,r,s;return e=new Se({props:{color:o[14]}}),{c(){b(e.$$.fragment),l=L(),n=S(t),r=L()},m(f,i){w(e,f,i),d(f,l,i),d(f,n,i),d(f,r,i),s=!0},p:K,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n),h(r)),v(e,f)}}}function kl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[lf]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new He({props:r}),E.push(()=>B(e,"checked",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function rf(o){let e,l,t=me(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=kl(vl(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ge()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&5){t=me(s[2]);let i;for(i=0;i<t.length;i+=1){const a=vl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=kl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),qe(n,s)}}}function of(o){let e,l,t;return l=new Ge({props:{small:!0,$$slots:{default:[rf]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function sf(o){wl(o);let e,l=o[10]+"",t,n,r,s,f,i=o[11]+"",a,u,c,p,_=o[12]+"",k;return{c(){e=y("h2"),t=S(l),n=L(),r=y("p"),s=S("Direction: "),f=y("b"),a=L(),u=y("p"),c=S("Width: "),p=y("b"),k=S(_)},m(T,C){d(T,e,C),$(e,t),d(T,n,C),d(T,r,C),$(r,s),$(r,f),f.innerHTML=i,d(T,a,C),d(T,u,C),$(u,c),$(u,p),$(p,k)},p(T,C){wl(T),C&512&&l!==(l=T[10]+"")&&A(t,l),C&512&&i!==(i=T[11]+"")&&(f.innerHTML=i),C&512&&_!==(_=T[12]+"")&&A(k,_)},d(T){T&&(h(e),h(n),h(r),h(a),h(u))}}}function af(o){let e,l;return e=new ie({props:{$$slots:{default:[sf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ff(o){let e,l;const t=[q(It),{sourceLayer:It},{paint:{"line-color":Ze(["get","kind"],{track:Q.cycle_paths.track,lane:Q.cycle_paths.lane,shared_use_segregated:Q.cycle_paths.shared_use_segregated,shared_use_unsegregated:Q.cycle_paths.shared_use_unsegregated},"red"),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[af]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),e.$on("click",mf),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&se(q(It)),s&0&&{sourceLayer:It},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function uf(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:It,title:cf,$$slots:{controls:[of],help:[nf]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${It}.pmtiles`,$$slots:{default:[ff]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let It="cycle_paths",cf="Cycle paths";function $f(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function pf(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function mf(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function _f(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(p){return p.show?n.filter(_=>p[_]).join(","):null}let f=vt(It,r,s,$f);Y(o,f,p=>l(0,t=p));let i=[["track","Separated tracks",Q.cycle_paths.track],["lane","Unprotected lanes",Q.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Q.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Q.cycle_paths.shared_use_unsegregated]];function a(p){let _=n.filter(k=>p[k]);return["in",["get","kind"],["literal",_]]}function u(p,_){o.$$.not_equal(t[_],p)&&(t[_]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class gf extends Z{constructor(e){super(),X(this,e,_f,uf,J,{})}}function df(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function hf(o){let e;return{c(){e=S(`Major Road Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function bf(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[hf]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from the "),b(n.$$.fragment),r=S(", as of September 2021."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function wf(o){let e,l=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&A(t,l)},d(n){n&&h(e)}}}function vf(o){let e,l;return e=new ie({props:{$$slots:{default:[wf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function kf(o){let e,l;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[vf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&se(q(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function yf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Mt,title:Sf,$$slots:{help:[bf],icon:[df]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Mt}.pmtiles`,$$slots:{default:[kf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Mt="mrn",Sf="Major Road Network";function Tf(o,e,l){let t,n=Q.mrn,r=ce(Mt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Cf extends Z{constructor(e){super(),X(this,e,Tf,yf,J,{})}}function Lf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function If(o){let e;return{c(){e=S(`OS Open Roads
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Mf(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[If]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Of(o){let e,l=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&A(t,l)},d(n){n&&h(e)}}}function jf(o){let e,l;return e=new ie({props:{$$slots:{default:[Of,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Nf(o){let e,l;const t=[q(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[jf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&se(q(Ot)),s&0&&{sourceLayer:Ot},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Pf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ot,title:Rf,$$slots:{help:[Mf],icon:[Lf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ot}.pmtiles`,$$slots:{default:[Nf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ot="srn",Rf="Strategic Road Network";function Df(o,e,l){let t,n=Q.srn,r=ce(Ot);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Gf extends Z{constructor(e){super(),X(this,e,Df,Pf,J,{})}}function Ff(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Af(o){let e;return{c(){e=S(`National Cycle Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function qf(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Af]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from Sustrans about the "),b(n.$$.fragment),r=S(", downloaded on 22/01/2024."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function yl(o){let e,l,t,n=o[4].Desc_+"",r;return{c(){e=y("li"),l=S("Description: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Desc_+"")&&A(r,n)},d(s){s&&h(e)}}}function Sl(o){let e,l,t,n=o[4].Greenway+"",r;return{c(){e=y("li"),l=S("Is greenway: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Greenway+"")&&A(r,n)},d(s){s&&h(e)}}}function Tl(o){let e,l,t,n=o[4].RouteType+"",r;return{c(){e=y("li"),l=S("Route type: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteType+"")&&A(r,n)},d(s){s&&h(e)}}}function Cl(o){let e,l,t,n=o[4].RouteNo+"",r;return{c(){e=y("li"),l=S("Route number: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteNo+"")&&A(r,n)},d(s){s&&h(e)}}}function Ll(o){let e,l,t,n=o[4].RouteCat+"",r;return{c(){e=y("li"),l=S("Route Category: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteCat+"")&&A(r,n)},d(s){s&&h(e)}}}function Il(o){let e,l,t,n=o[4].OpenStatus+"",r;return{c(){e=y("li"),l=S("Open Status: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].OpenStatus+"")&&A(r,n)},d(s){s&&h(e)}}}function Ml(o){let e,l,t,n=o[4].Surface+"",r;return{c(){e=y("li"),l=S("Surface: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Surface+"")&&A(r,n)},d(s){s&&h(e)}}}function Ol(o){let e,l,t,n=o[4].Quality+"",r;return{c(){e=y("li"),l=S("Quality: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Quality+"")&&A(r,n)},d(s){s&&h(e)}}}function jl(o){let e,l,t,n=o[4].RoadClass+"",r;return{c(){e=y("li"),l=S("Road Class: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RoadClass+"")&&A(r,n)},d(s){s&&h(e)}}}function zf(o){let e,l,t,n,r,s,f,i,a,u=o[4].Desc_&&yl(o),c=o[4].Greenway&&Sl(o),p=o[4].RouteType&&Tl(o),_=o[4].RouteNo&&Cl(o),k=o[4].RouteCat&&Ll(o),T=o[4].OpenStatus&&Il(o),C=o[4].Surface&&Ml(o),I=o[4].Quality&&Ol(o),M=o[4].RoadClass&&jl(o);return{c(){e=y("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),p&&p.c(),n=L(),_&&_.c(),r=L(),k&&k.c(),s=L(),T&&T.c(),f=L(),C&&C.c(),i=L(),I&&I.c(),a=L(),M&&M.c()},m(N,P){d(N,e,P),u&&u.m(e,null),$(e,l),c&&c.m(e,null),$(e,t),p&&p.m(e,null),$(e,n),_&&_.m(e,null),$(e,r),k&&k.m(e,null),$(e,s),T&&T.m(e,null),$(e,f),C&&C.m(e,null),$(e,i),I&&I.m(e,null),$(e,a),M&&M.m(e,null)},p(N,P){N[4].Desc_?u?u.p(N,P):(u=yl(N),u.c(),u.m(e,l)):u&&(u.d(1),u=null),N[4].Greenway?c?c.p(N,P):(c=Sl(N),c.c(),c.m(e,t)):c&&(c.d(1),c=null),N[4].RouteType?p?p.p(N,P):(p=Tl(N),p.c(),p.m(e,n)):p&&(p.d(1),p=null),N[4].RouteNo?_?_.p(N,P):(_=Cl(N),_.c(),_.m(e,r)):_&&(_.d(1),_=null),N[4].RouteCat?k?k.p(N,P):(k=Ll(N),k.c(),k.m(e,s)):k&&(k.d(1),k=null),N[4].OpenStatus?T?T.p(N,P):(T=Il(N),T.c(),T.m(e,f)):T&&(T.d(1),T=null),N[4].Surface?C?C.p(N,P):(C=Ml(N),C.c(),C.m(e,i)):C&&(C.d(1),C=null),N[4].Quality?I?I.p(N,P):(I=Ol(N),I.c(),I.m(e,a)):I&&(I.d(1),I=null),N[4].RoadClass?M?M.p(N,P):(M=jl(N),M.c(),M.m(e,null)):M&&(M.d(1),M=null)},d(N){N&&h(e),u&&u.d(),c&&c.d(),p&&p.d(),_&&_.d(),k&&k.d(),T&&T.d(),C&&C.d(),I&&I.d(),M&&M.d()}}}function Hf(o){let e,l;return e=new ie({props:{$$slots:{default:[zf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ef(o){let e,l;const t=[q(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Hf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&se(q(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Bf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:jt,title:Uf,$$slots:{help:[qf],icon:[Ff]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${jt}.pmtiles`,$$slots:{default:[Ef]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let jt="national_cycle_network",Uf="National Cycle Network";function Wf(o,e,l){let t,n=Q.national_cycle_network,r=ce(jt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Yf extends Z{constructor(e){super(),X(this,e,Wf,Bf,J,{})}}function Nl(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function Jf(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Vf(o){let e,l,t,n,r,s,f,i,a,u,c,p;return u=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Jf]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=y("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),s=y("p"),s.textContent="Data valid as of 1 January, 2024",f=L(),i=y("p"),a=S(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),b(u.$$.fragment),c=S("."),G(e,"slot","help")},m(_,k){d(_,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),$(e,i),$(i,a),w(u,i,null),$(i,c),p=!0},p(_,k){const T={};k&4096&&(T.$$scope={dirty:k,ctx:_}),u.$set(T)},i(_){p||(m(u.$$.fragment,_),p=!0)},o(_){g(u.$$.fragment,_),p=!1},d(_){_&&h(e),v(u)}}}function Qf(o){let e,l,t;return l=new Be({props:{colorScale:o[1],limits:o[3]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Kf(o){let e,l,t=sn(o[6].angle+o[9])+"",n;return{c(){e=y("p"),l=new Ut(!1),n=S(` side of the road: no pavement
          `),l.a=n},m(r,s){d(r,e,s),l.m(t,e),$(e,n)},p(r,s){s&64&&t!==(t=sn(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&h(e)}}}function Zf(o){let e,l,t=sn(o[6].angle+o[9])+"",n,r,s=o[7]+"",f,i,a,u=o[8]+"",c,p;return{c(){e=y("p"),l=new Ut(!1),n=S(` side of the road:
            `),r=y("b"),f=S(s),i=S(`
            m average,
            `),a=y("b"),c=S(u),p=S(`
            m minimum
          `),l.a=n},m(_,k){d(_,e,k),l.m(t,e),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,c),$(e,p)},p(_,k){k&64&&t!==(t=sn(_[6].angle+_[9])+"")&&l.p(t),k&64&&s!==(s=_[7]+"")&&A(f,s),k&64&&u!==(u=_[8]+"")&&A(c,u)},d(_){_&&h(e)}}}function Pl(o){let e;function l(r,s){return r[7]?Zf:Kf}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Xf(o){let e,l=me([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Pl(Nl(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ge()},m(n,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(n,r);d(n,e,r)},p(n,r){if(r&64){l=me([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=Nl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Pl(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(n){n&&h(e),qe(t,n)}}}function xf(o){let e,l;return e=new ie({props:{openOn:"hover",$$slots:{default:[Xf,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function eu(o){let e,l;const t=[q(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[xf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Nt)),s&0&&{sourceLayer:Nt},t[2],t[3],s&6&&{paint:{"line-color":ve(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Fe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function tu(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Nt,title:nu,$$slots:{controls:[Qf],help:[Vf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${tn()}/v1/${Nt}.pmtiles`,$$slots:{default:[eu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Nt="pavement_widths",nu="OS Pavement widths";function lu(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function sn(o){return`${lu(o)} <span style="display: inline-block; rotate: ${o}deg">â¬†</span>`}function ru(o,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=ce(Nt);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class ou extends Z{constructor(e){super(),X(this,e,ru,tu,J,{})}}function su(o){let e;return{c(){e=S("the PCT website")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function iu(o){let e;return{c(){e=S("2017 journal article")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function au(o){let e,l,t,n,r,s,f,i,a,u,c,p;return i=new re({props:{href:"https://www.pct.bike",$$slots:{default:[su]},$$scope:{ctx:o}}}),u=new re({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[iu]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=y("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),s=y("p"),f=S("See "),b(i.$$.fragment),a=S(" and "),b(u.$$.fragment),c=S(" for details on methodology and data sources."),G(e,"slot","help")},m(_,k){d(_,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),w(i,s,null),$(s,a),w(u,s,null),$(s,c),p=!0},p(_,k){const T={};k&1024&&(T.$$scope={dirty:k,ctx:_}),i.$set(T);const C={};k&1024&&(C.$$scope={dirty:k,ctx:_}),u.$set(C)},i(_){p||(m(i.$$.fragment,_),m(u.$$.fragment,_),p=!0)},o(_){g(i.$$.fragment,_),g(u.$$.fragment,_),p=!1},d(_){_&&h(e),v(i),v(u)}}}function fu(o){let e,l,t,n,r,s,f,i,a;l=new Be({props:{colorScale:o[1],limits:o[2]}});function u(k){o[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),n=new Sn({props:c}),E.push(()=>B(n,"value",u));function p(k){o[6](k)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(_.value=o[0].scenario),f=new Wt({props:_}),E.push(()=>B(f,"value",p)),{c(){e=y("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(k,T){d(k,e,T),w(l,e,null),$(e,t),w(n,e,null),$(e,s),w(f,e,null),a=!0},p(k,T){const C={};!r&&T&1&&(r=!0,C.value=k[0].tripPurpose,U(()=>r=!1)),n.$set(C);const I={};!i&&T&1&&(i=!0,I.value=k[0].scenario,U(()=>i=!1)),f.$set(I)},i(k){a||(m(l.$$.fragment,k),m(n.$$.fragment,k),m(f.$$.fragment,k),a=!0)},o(k){g(l.$$.fragment,k),g(n.$$.fragment,k),g(f.$$.fragment,k),a=!1},d(k){k&&h(e),v(l),v(n),v(f)}}}function uu(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Ut(!1),t=ge(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function cu(o){let e,l;return e=new ie({props:{$$slots:{default:[uu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function $u(o){let e,l;const t=[q(st),{sourceLayer:st},{paint:{"line-color":ve(["get",o[0].scenario],o[2],o[1]),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==st?"visible":"none"}}];let n={$$slots:{default:[cu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(st)),s&0&&{sourceLayer:st},s&7&&{paint:{"line-color":ve(["get",r[0].scenario],r[2],r[1]),"line-width":Fe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==st?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function pu(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Ut(!1),t=ge(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function mu(o){let e,l;return e=new ie({props:{$$slots:{default:[pu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function _u(o){let e,l;const t=[q(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get",o[0].scenario],o[2],o[1]),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==kt?"visible":"none"}}];let n={$$slots:{default:[mu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(kt)),s&0&&{sourceLayer:kt},t[2],t[3],s&7&&{paint:{"line-color":ve(["get",r[0].scenario],r[2],r[1]),"line-width":Fe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==kt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function gu(o){let e,l,t,n,r,s,f;function i(u){o[7](u)}let a={name:Wr,title:du,$$slots:{controls:[fu],help:[au]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new fe({props:a}),E.push(()=>B(e,"show",i)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${st}.pmtiles`,$$slots:{default:[$u]},$$scope:{ctx:o}}}),s=new pe({props:{url:`pmtiles://${$e()}/v1/${kt}.pmtiles`,$$slots:{default:[_u]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(u,c){w(e,u,c),d(u,t,c),w(n,u,c),d(u,r,c),w(s,u,c),f=!0},p(u,[c]){const p={};c&1025&&(p.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,p.show=u[0].show,U(()=>l=!1)),e.$set(p);const _={};c&1025&&(_.$$scope={dirty:c,ctx:u}),n.$set(_);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),s.$set(k)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),g(s.$$.fragment,u),f=!1},d(u){u&&(h(t),h(r)),v(e,u),v(n,u),v(s,u)}}}let Wr="pct",st="pct_commute",kt="pct_school",du="Propensity to Cycle Tool";function hu(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function bu(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function wu(o,e,l){let t,n=Q.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=vt(Wr,{show:!1,tripPurpose:st,scenario:"baseline"},hu,bu);Y(o,f,p=>l(0,t=p));function i(p){let _=p.baseline,k=p.gov_target,T=p.go_dutch,C=`<h2>Trip purpose: ${t.tripPurpose==st?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)C+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let I=(k/_).toFixed(1),M=(T/_).toFixed(1);C+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${M}x</b> of baseline)</p>`}return C}function a(p){o.$$.not_equal(t.tripPurpose,p)&&(t.tripPurpose=p,f.set(t))}function u(p){o.$$.not_equal(t.scenario,p)&&(t.scenario=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,n,r,f,i,a,u,c]}class vu extends Z{constructor(e){super(),X(this,e,wu,gu,J,{})}}function ku(o){let e;return{c(){e=S("Basemap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function yu(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Su(o){let e,l,t,n,r,s,f,i,a,u,c,p,_;return n=new re({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[ku]},$$scope:{ctx:o}}}),c=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[yu]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),t=S("The average speed data is collected over a six-month period by "),b(n.$$.fragment),r=S(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=L(),f=y("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=y("p"),u=S(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),b(c.$$.fragment),p=S("."),G(e,"slot","help")},m(k,T){d(k,e,T),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),$(e,a),$(a,u),w(c,a,null),$(a,p),_=!0},p(k,T){const C={};T&512&&(C.$$scope={dirty:T,ctx:k}),n.$set(C);const I={};T&512&&(I.$$scope={dirty:T,ctx:k}),c.$set(I)},i(k){_||(m(n.$$.fragment,k),m(c.$$.fragment,k),_=!0)},o(k){g(n.$$.fragment,k),g(c.$$.fragment,k),_=!1},d(k){k&&h(e),v(n),v(c)}}}function Tu(o){let e,l,t,n,r,s;l=new Be({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),n=new Sn({props:i}),E.push(()=>B(n,"value",f)),{c(){e=y("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(a,u){d(a,e,u),w(l,e,null),$(e,t),w(n,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,U(()=>r=!1)),n.$set(c)},i(a){s||(m(l.$$.fragment,a),m(n.$$.fragment,a),s=!0)},o(a){g(l.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&h(e),v(l),v(n)}}}function Cu(o){let e,l,t=o[8].indicative_mph+"",n,r,s,f,i,a=o[8].highest_mph+"",u,c,p=o[4][o[8].highest_description]+"",_,k;return{c(){e=y("p"),l=S("Posted speed limit: "),n=S(t),r=S(" mph"),s=L(),f=y("p"),i=S("Highest average speed: "),u=S(a),c=S(" mph (during "),_=S(p),k=S(")")},m(T,C){d(T,e,C),$(e,l),$(e,n),$(e,r),d(T,s,C),d(T,f,C),$(f,i),$(f,u),$(f,c),$(f,_),$(f,k)},p(T,C){C&256&&t!==(t=T[8].indicative_mph+"")&&A(n,t),C&256&&a!==(a=T[8].highest_mph+"")&&A(u,a),C&256&&p!==(p=T[4][T[8].highest_description]+"")&&A(_,p)},d(T){T&&(h(e),h(s),h(f))}}}function Lu(o){let e,l;return e=new ie({props:{$$slots:{default:[Cu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Iu(o){let e,l;const t=[q(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get",o[0].kind],o[2],o[1]),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[Lu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Pt)),s&0&&{sourceLayer:Pt},t[2],t[3],s&7&&{paint:{"line-color":ve(["get",r[0].kind],r[2],r[1]),"line-width":Fe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Mu(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Pt,title:Ou,$$slots:{controls:[Tu],help:[Su]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${tn()}/v1/${Pt}.pmtiles`,$$slots:{default:[Iu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Pt="road_speeds",Ou="OS Speeds";function ju(o){return o.show?o.kind:null}function Nu(o){return{show:!0,kind:o}}function Pu(o,e,l){let t,n=Q.sequential_low_to_high,r=[0,20,30,40,50,90],f=vt(Pt,{show:!1,kind:"indicative_mph"},ju,Nu);Y(o,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class Ru extends Z{constructor(e){super(),X(this,e,Pu,Mu,J,{})}}function Du(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Gu(o){let e,l,t,n,r,s,f,i,a,u;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Du]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=y("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),s=y("p"),f=S(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),b(i.$$.fragment),a=S("."),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),w(i,s,null),$(s,a),u=!0},p(c,p){const _={};p&64&&(_.$$scope={dirty:p,ctx:c}),i.$set(_)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){g(i.$$.fragment,c),u=!1},d(c){c&&h(e),v(i)}}}function Fu(o){let e,l,t;return l=new Be({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Au(o){let e,l,t,n=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",p,_;return{c(){e=y("p"),l=S("Average width: "),t=y("b"),r=S(n),s=S(`
        meters`),f=L(),i=y("p"),a=S("Minimum width: "),u=y("b"),p=S(c),_=S(`
        meters`)},m(k,T){d(k,e,T),$(e,l),$(e,t),$(t,r),$(e,s),d(k,f,T),d(k,i,T),$(i,a),$(i,u),$(u,p),$(i,_)},p(k,T){T&32&&n!==(n=k[5].average+"")&&A(r,n),T&32&&c!==(c=k[5].minimum+"")&&A(p,c)},d(k){k&&(h(e),h(f),h(i))}}}function qu(o){let e,l;return e=new ie({props:{$$slots:{default:[Au,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function zu(o){let e,l;const t=[q(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get","average"],o[2],o[1]),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[qu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Rt)),s&0&&{sourceLayer:Rt},t[2],t[3],s&6&&{paint:{"line-color":ve(["get","average"],r[2],r[1]),"line-width":Fe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Hu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Rt,title:Eu,$$slots:{controls:[Fu],help:[Gu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${tn()}/v1/${Rt}.pmtiles`,$$slots:{default:[zu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Rt="road_widths",Eu="OS Road widths";function Bu(o,e,l){let t,n=Q.sequential_low_to_high,r=[0,5,10,15,20,100],s=ce(Rt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Uu extends Z{constructor(e){super(),X(this,e,Bu,Hu,J,{})}}function Wu(o){let e,l,t;return l=new Se({props:{color:Q.trams}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Yu(o){let e,l,t,n,r;return n=new lt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),b(n.$$.fragment),G(e,"slot","help")},m(s,f){d(s,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:K,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function Ju(o){let e,l;const t=[q(Dt),{sourceLayer:Dt},{paint:{"line-color":Q.trams,"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),e.$on("click",Ku),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Vu(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Dt,title:Qu,$$slots:{help:[Yu],icon:[Wu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Dt}.pmtiles`,$$slots:{default:[Ju]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Dt="trams",Qu="Trams";function Ku(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Zu(o,e,l){let t,n=ce(Dt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Xu extends Z{constructor(e){super(),X(this,e,Zu,Vu,J,{})}}function xu(o){let e;return{c(){e=S(`Bus Open Data Service
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ec(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[xu]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from the "),b(n.$$.fragment),r=S(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=L(),f=y("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),w(a,e,null),u=!0},p(c,p){const _={};p&64&&(_.$$scope={dirty:p,ctx:c}),n.$set(_)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function tc(o){let e,l,t,n,r;return n=new Be({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("div"),l=y("p"),l.textContent="Peak hourly frequency:",t=L(),b(n.$$.fragment),G(e,"slot","controls")},m(s,f){d(s,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:K,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function nc(o){let e,l,t,n=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,p,_,k,T,C=o[5].peak_description+"",I,M,N,P,j,O=o[5].total+"",R,D,z=o[5].total_description+"",V,ae;return{c(){e=y("p"),l=S("Stop name: "),t=y("b"),r=S(n),s=L(),f=y("p"),i=S("Peak: "),a=y("b"),c=S(u),p=S(`
        buses during the busiest hour of any day`),_=L(),k=y("p"),T=S("The peak hour is "),I=S(C),M=L(),N=y("p"),P=S("Total buses per day: "),j=y("b"),R=S(O),D=S(`
        (for `),V=S(z),ae=S(", the busiest day of the week)")},m(F,x){d(F,e,x),$(e,l),$(e,t),$(t,r),d(F,s,x),d(F,f,x),$(f,i),$(f,a),$(a,c),$(f,p),d(F,_,x),d(F,k,x),$(k,T),$(k,I),d(F,M,x),d(F,N,x),$(N,P),$(N,j),$(j,R),$(N,D),$(N,V),$(N,ae)},p(F,x){x&32&&n!==(n=F[5].stop_name+"")&&A(r,n),x&32&&u!==(u=F[5].peak+"")&&A(c,u),x&32&&C!==(C=F[5].peak_description+"")&&A(I,C),x&32&&O!==(O=F[5].total+"")&&A(R,O),x&32&&z!==(z=F[5].total_description+"")&&A(V,z)},d(F){F&&(h(e),h(s),h(f),h(_),h(k),h(M),h(N))}}}function lc(o){let e,l;return e=new ie({props:{$$slots:{default:[nc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function rc(o){let e,l;const t=[q(Gt),{sourceLayer:Gt},{paint:{"circle-color":ve(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[lc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new ht({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Gt)),s&0&&{sourceLayer:Gt},s&6&&{paint:{"circle-color":ve(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function oc(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Gt,title:sc,$$slots:{controls:[tc],help:[ec]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Gt}.pmtiles`,$$slots:{default:[rc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Gt="bus_stops",sc="Bus stops";function ic(o,e,l){let t,n=Q.sequential_low_to_high,r=[0,3,10,20,30,100],s=ce(Gt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class ac extends Z{constructor(e){super(),X(this,e,ic,oc,J,{})}}function fc(o){let e;return{c(){e=S("crossing")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function uc(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[fc]},$$scope:{ctx:o}}}),f=new lt({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),b(n.$$.fragment),r=S(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function cc(o){let e,l,t;return l=new Qt({props:{rows:o[2]}}),{c(){e=y("div"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function $c(o){let e,l=Rl(o[4])+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=Rl(n[4])+"")&&A(t,l)},d(n){n&&h(e)}}}function pc(o){let e,l;return e=new ie({props:{$$slots:{default:[$c,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function mc(o){let e,l;const t=[q(Ft),{sourceLayer:Ft},{paint:{"circle-color":Ze(["get","crossing"],{traffic_signals:Q.signalized_crossing},Q.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[pc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new ht({props:n}),e.$on("click",dc),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(Ft)),s&0&&{sourceLayer:Ft},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function _c(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ft,title:gc,$$slots:{controls:[cc],help:[uc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ft}.pmtiles`,$$slots:{default:[mc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ft="crossings",gc="Crossings";function Rl(o){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[o.crossing]??`Unknown crossing type (${o.crossing})`}function dc(o){window.open(`http://openstreetmap.org/node/${o.detail.features[0].properties.osm_id}`,"_blank")}function hc(o,e,l){let t,n=ce(Ft);Y(o,n,f=>l(0,t=f));let r=[["Signalized",Q.signalized_crossing],["Other",Q.other_crossing]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class bc extends Z{constructor(e){super(),X(this,e,hc,_c,J,{})}}function wc(o){let e;return{c(){e=S("OS Terrain 50")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function vc(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,k;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[wc]},$$scope:{ctx:o}}}),c=new Te({}),_=new lt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=y("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),s=y("p"),f=S("This layer is built from "),b(i.$$.fragment),a=S(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),b(c.$$.fragment),p=L(),b(_.$$.fragment),G(e,"slot","help")},m(T,C){d(T,e,C),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),w(i,s,null),$(s,a),$(e,u),w(c,e,null),$(e,p),w(_,e,null),k=!0},p(T,C){const I={};C&64&&(I.$$scope={dirty:C,ctx:T}),i.$set(I)},i(T){k||(m(i.$$.fragment,T),m(c.$$.fragment,T),m(_.$$.fragment,T),k=!0)},o(T){g(i.$$.fragment,T),g(c.$$.fragment,T),g(_.$$.fragment,T),k=!1},d(T){T&&h(e),v(i),v(c),v(_)}}}function kc(o){let e,l,t,n,r;return l=new Be({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("span"),b(l.$$.fragment),t=L(),n=y("p"),n.innerHTML=`<img src="${yo}" alt="arrow"/>
      Arrows point uphill`,G(e,"slot","controls")},m(s,f){d(s,e,f),w(l,e,null),$(e,t),$(e,n),r=!0},p:K,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){g(l.$$.fragment,s),r=!1},d(s){s&&h(e),v(l)}}}function yc(o){let e,l,t,n=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=y("p"),l=S("Gradient: "),t=y("b"),r=S(n),s=S(`
        %`)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(t,r),$(e,s)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&A(r,n)},d(f){f&&h(e)}}}function Sc(o){let e,l;return e=new ie({props:{$$slots:{default:[yc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Tc(o){let e,l,t,n;const r=[q(Ke),{sourceLayer:Ke},{manageHoverState:!0},{paint:{"line-color":ve(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[Sc]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new _e({props:s});const f=[q(Ke+"_arrows"),{sourceLayer:Ke},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Ln({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?ne(r,[u&0&&se(q(Ke)),u&0&&{sourceLayer:Ke},r[2],u&6&&{paint:{"line-color":ve(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Fe,"line-opacity":te(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?ne(f,[u&0&&se(q(Ke+"_arrows")),u&0&&{sourceLayer:Ke},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Cc(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ke,title:Lc,$$slots:{controls:[kc],help:[vc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ke}.pmtiles`,$$slots:{default:[Tc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ke="gradient",Lc="Gradients";function Ic(o,e,l){let t,n=Q.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=ce(Ke);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Mc extends Z{constructor(e){super(),X(this,e,Ic,Cc,J,{})}}function Oc(o){let e,l;return{c(){e=y("img"),G(e,"slot","icon"),Xt(e.src,l=So)||G(e,"src",l),G(e,"alt","a logo representing cycle parking")},m(t,n){d(t,e,n)},p:K,d(t){t&&h(e)}}}function jc(o){let e;return{c(){e=S("OpenStreetMap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Nc(o){let e;return{c(){e=S("OpenStreetMap Carto")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Pc(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[jc]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Nc]},$$scope:{ctx:o}}}),c=new lt({}),{c(){e=y("span"),l=y("p"),t=S("Cycle parking, according to "),b(n.$$.fragment),r=S(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=L(),f=y("p"),i=S("Icon from "),b(a.$$.fragment),u=L(),b(c.$$.fragment),G(e,"slot","help")},m(_,k){d(_,e,k),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),w(a,f,null),$(e,u),w(c,e,null),p=!0},p(_,k){const T={};k&16&&(T.$$scope={dirty:k,ctx:_}),n.$set(T);const C={};k&16&&(C.$$scope={dirty:k,ctx:_}),a.$set(C)},i(_){p||(m(n.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),p=!0)},o(_){g(n.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),p=!1},d(_){_&&h(e),v(n),v(a),v(c)}}}function Rc(o){let e,l,t,n=(o[3].capacity??"unknown")+"",r;return{c(){e=y("p"),l=S("Capacity: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&8&&n!==(n=(s[3].capacity??"unknown")+"")&&A(r,n)},d(s){s&&h(e)}}}function Dc(o){let e,l;return e=new ie({props:{$$slots:{default:[Rc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Gc(o){let e,l;const t=[q(At),{sourceLayer:At},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Dc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new Ln({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(At)),s&0&&{sourceLayer:At},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Fc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:At,title:Ac,$$slots:{help:[Pc],icon:[Oc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${At}.pmtiles`,$$slots:{default:[Gc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let At="cycle_parking",Ac="Cycle parking";function qc(o,e,l){let t,n=ce(At);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class zc extends Z{constructor(e){super(),X(this,e,qc,Fc,J,{})}}function Hc(o){let e,l,t,n,r;return n=new lt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),b(n.$$.fragment),G(e,"slot","help")},m(s,f){d(s,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:K,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function Ec(o){let e,l,t;return e=new Se({props:{color:Q.education.schools}}),{c(){b(e.$$.fragment),l=S(`
        Schools`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:K,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function Bc(o){let e,l,t;return e=new Se({props:{color:Q.education.colleges}}),{c(){b(e.$$.fragment),l=S(`
        Colleges`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:K,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function Uc(o){let e,l,t;return e=new Se({props:{color:Q.education.universities}}),{c(){b(e.$$.fragment),l=S(`
        Universities`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:K,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function Wc(o){let e,l,t,n,r,s,f,i,a;function u(C){o[3](C)}let c={$$slots:{default:[Ec]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new He({props:c}),E.push(()=>B(e,"checked",u));function p(C){o[4](C)}let _={$$slots:{default:[Bc]},$$scope:{ctx:o}};o[0].college!==void 0&&(_.checked=o[0].college),n=new He({props:_}),E.push(()=>B(n,"checked",p));function k(C){o[5](C)}let T={$$slots:{default:[Uc]},$$scope:{ctx:o}};return o[0].university!==void 0&&(T.checked=o[0].university),f=new He({props:T}),E.push(()=>B(f,"checked",k)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment)},m(C,I){w(e,C,I),d(C,t,I),w(n,C,I),d(C,s,I),w(f,C,I),a=!0},p(C,I){const M={};I&2048&&(M.$$scope={dirty:I,ctx:C}),!l&&I&1&&(l=!0,M.checked=C[0].school,U(()=>l=!1)),e.$set(M);const N={};I&2048&&(N.$$scope={dirty:I,ctx:C}),!r&&I&1&&(r=!0,N.checked=C[0].college,U(()=>r=!1)),n.$set(N);const P={};I&2048&&(P.$$scope={dirty:I,ctx:C}),!i&&I&1&&(i=!0,P.checked=C[0].university,U(()=>i=!1)),f.$set(P)},i(C){a||(m(e.$$.fragment,C),m(n.$$.fragment,C),m(f.$$.fragment,C),a=!0)},o(C){g(e.$$.fragment,C),g(n.$$.fragment,C),g(f.$$.fragment,C),a=!1},d(C){C&&(h(t),h(s)),v(e,C),v(n,C),v(f,C)}}}function Yc(o){let e,l,t;return l=new Ge({props:{small:!0,$$slots:{default:[Wc]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Jc(o){let e,l=(o[10].name??"Unnamed institution")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&A(t,l)},d(n){n&&h(e)}}}function Vc(o){let e,l;return e=new ie({props:{$$slots:{default:[Jc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qc(o){let e,l;const t=[q(qt),{sourceLayer:qt},{paint:{"fill-color":Ze(["get","type"],{school:Q.education.schools,college:Q.education.colleges,university:Q.education.universities},"grey"),"fill-opacity":te(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Vc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&5?ne(t,[s&0&&se(q(qt)),s&0&&{sourceLayer:qt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Kc(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:qt,title:Zc,$$slots:{controls:[Yc],help:[Hc]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${qt}.pmtiles`,$$slots:{default:[Qc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let qt="education",Zc="Education";function Xc(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function xc(o,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(_){return _.show?n.filter(k=>_[k]).join(","):null}let f=vt(qt,r,s,Xc);Y(o,f,_=>l(0,t=_));function i(_){let k=n.filter(T=>_[T]);return["in",["get","type"],["literal",k]]}function a(_){o.$$.not_equal(t.school,_)&&(t.school=_,f.set(t))}function u(_){o.$$.not_equal(t.college,_)&&(t.college=_,f.set(t))}function c(_){o.$$.not_equal(t.university,_)&&(t.university=_,f.set(t))}function p(_){o.$$.not_equal(t.show,_)&&(t.show=_,f.set(t))}return[t,f,i,a,u,c,p]}class e$ extends Z{constructor(e){super(),X(this,e,xc,Kc,J,{})}}function t$(o){let e,l,t;return l=new Se({props:{color:Q.hospitals}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function n$(o){let e;return{c(){e=S("hospital")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function l$(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[n$]},$$scope:{ctx:o}}}),f=new lt({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),b(n.$$.fragment),r=S(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function r$(o){let e,l=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&A(t,l)},d(n){n&&h(e)}}}function o$(o){let e,l;return e=new ie({props:{$$slots:{default:[r$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function s$(o){let e,l;const t=[q(zt),{sourceLayer:zt},{paint:{"fill-color":Q.hospitals,"fill-opacity":te(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[o$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(zt)),s&0&&{sourceLayer:zt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function i$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:zt,title:a$,$$slots:{help:[l$],icon:[t$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${zt}.pmtiles`,$$slots:{default:[s$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let zt="hospitals",a$="Hospitals";function f$(o,e,l){let t,n=ce(zt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class u$ extends Z{constructor(e){super(),X(this,e,f$,i$,J,{})}}function c$(o){let e,l;return{c(){e=y("img"),G(e,"slot","icon"),Xt(e.src,l=To)||G(e,"src",l),G(e,"alt","A logo representing a train")},m(t,n){d(t,e,n)},p:K,d(t){t&&h(e)}}}function $$(o){let e;return{c(){e=S("railway station")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function p$(o){let e;return{c(){e=S(`National Rail
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function m$(o){let e,l,t,n,r,s,f,i,a,u,c,p,_;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[$$]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[p$]},$$scope:{ctx:o}}}),p=new lt({}),{c(){e=y("div"),l=y("p"),t=S("This shows "),b(n.$$.fragment),r=S(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),f=y("p"),i=S("Icon from "),b(a.$$.fragment),u=S(". (Note that not all stations shown are National Rail.)"),c=L(),b(p.$$.fragment),G(e,"slot","help")},m(k,T){d(k,e,T),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),w(a,f,null),$(f,u),$(e,c),w(p,e,null),_=!0},p(k,T){const C={};T&16&&(C.$$scope={dirty:T,ctx:k}),n.$set(C);const I={};T&16&&(I.$$scope={dirty:T,ctx:k}),a.$set(I)},i(k){_||(m(n.$$.fragment,k),m(a.$$.fragment,k),m(p.$$.fragment,k),_=!0)},o(k){g(n.$$.fragment,k),g(a.$$.fragment,k),g(p.$$.fragment,k),_=!1},d(k){k&&h(e),v(n),v(a),v(p)}}}function _$(o){let e,l=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&A(t,l)},d(n){n&&h(e)}}}function g$(o){let e,l;return e=new ie({props:{$$slots:{default:[_$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function d$(o){let e,l;const t=[q(en),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[g$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new Ln({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(en)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function h$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:en,title:b$,$$slots:{help:[m$],icon:[c$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new wt({props:{data:`${$e()}/v1/${en}.geojson`,$$slots:{default:[d$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let en="railway_stations",b$="Railway stations";function w$(o,e,l){let t,n=ce(en);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class v$ extends Z{constructor(e){super(),X(this,e,w$,h$,J,{})}}function k$(o){let e,l,t;return l=new Se({props:{color:Q.sports_spaces}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function y$(o){let e;return{c(){e=S("sports pitches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function S$(o){let e;return{c(){e=S("sports centres")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function T$(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[y$]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[S$]},$$scope:{ctx:o}}}),a=new lt({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),b(n.$$.fragment),r=S(" and "),b(s.$$.fragment),f=S(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),$(e,i),w(a,e,null),u=!0},p(c,p){const _={};p&16&&(_.$$scope={dirty:p,ctx:c}),n.$set(_);const k={};p&16&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(s),v(a)}}}function C$(o){let e,l=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&A(t,l)},d(n){n&&h(e)}}}function L$(o){let e,l;return e=new ie({props:{$$slots:{default:[C$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function I$(o){let e,l;const t=[q(Ht),{sourceLayer:Ht},{paint:{"fill-color":Q.sports_spaces,"fill-opacity":te(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[L$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(Ht)),s&0&&{sourceLayer:Ht},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function M$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Ht,title:O$,$$slots:{help:[T$],icon:[k$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ht}.pmtiles`,$$slots:{default:[I$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ht="sports_spaces",O$="Sports spaces";function j$(o,e,l){let t,n=ce(Ht);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class N$ extends Z{constructor(e){super(),X(this,e,j$,M$,J,{})}}function P$(o){let e;return{c(){e=S("DfT stats19")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function R$(o){let e;return{c(){e=S("documented by DfT")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function D$(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,k,T,C,I,M,N,P,j,O,R,D;return n=new re({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[P$]},$$scope:{ctx:o}}}),M=new re({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[R$]},$$scope:{ctx:o}}}),R=new Te({}),{c(){e=y("span"),l=y("p"),t=S("This layer shows collisions recorded in the "),b(n.$$.fragment),r=S(" dataset, as of 30 September 2024. Please note these limitations:"),s=L(),f=y("ul"),i=y("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=y("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),p=y("li"),p.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,_=L(),k=y("li"),k.textContent='The "pedestrians" category also include mobility scooters',T=L(),C=y("li"),I=S("All limitations "),b(M.$$.fragment),N=S(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),P=L(),j=y("p"),j.textContent="You can click a point to open the full report, thanks to CycleStreets.",O=L(),b(R.$$.fragment),G(e,"slot","help")},m(z,V){d(z,e,V),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),$(f,a),$(f,u),$(f,c),$(f,p),$(f,_),$(f,k),$(f,T),$(f,C),$(C,I),w(M,C,null),$(C,N),$(e,P),$(e,j),$(e,O),w(R,e,null),D=!0},p(z,V){const ae={};V&4194304&&(ae.$$scope={dirty:V,ctx:z}),n.$set(ae);const F={};V&4194304&&(F.$$scope={dirty:V,ctx:z}),M.$set(F)},i(z){D||(m(n.$$.fragment,z),m(M.$$.fragment,z),m(R.$$.fragment,z),D=!0)},o(z){g(n.$$.fragment,z),g(M.$$.fragment,z),g(R.$$.fragment,z),D=!1},d(z){z&&h(e),v(n),v(M),v(R)}}}function G$(o){let e;return{c(){e=S("Pedestrians")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function F$(o){let e;return{c(){e=S("Cyclists")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function A$(o){let e;return{c(){e=S("Horse riders")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function q$(o){let e;return{c(){e=S("Other")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function z$(o){let e,l,t,n,r,s,f,i,a,u,c,p;function _(j){o[10](j)}let k={$$slots:{default:[G$]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(k.checked=o[0].pedestrians),e=new He({props:k}),E.push(()=>B(e,"checked",_));function T(j){o[11](j)}let C={$$slots:{default:[F$]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(C.checked=o[0].cyclists),n=new He({props:C}),E.push(()=>B(n,"checked",T));function I(j){o[12](j)}let M={$$slots:{default:[A$]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(M.checked=o[0].horseRiders),f=new He({props:M}),E.push(()=>B(f,"checked",I));function N(j){o[13](j)}let P={$$slots:{default:[q$]},$$scope:{ctx:o}};return o[0].other!==void 0&&(P.checked=o[0].other),u=new He({props:P}),E.push(()=>B(u,"checked",N)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment)},m(j,O){w(e,j,O),d(j,t,O),w(n,j,O),d(j,s,O),w(f,j,O),d(j,a,O),w(u,j,O),p=!0},p(j,O){const R={};O&4194304&&(R.$$scope={dirty:O,ctx:j}),!l&&O&1&&(l=!0,R.checked=j[0].pedestrians,U(()=>l=!1)),e.$set(R);const D={};O&4194304&&(D.$$scope={dirty:O,ctx:j}),!r&&O&1&&(r=!0,D.checked=j[0].cyclists,U(()=>r=!1)),n.$set(D);const z={};O&4194304&&(z.$$scope={dirty:O,ctx:j}),!i&&O&1&&(i=!0,z.checked=j[0].horseRiders,U(()=>i=!1)),f.$set(z);const V={};O&4194304&&(V.$$scope={dirty:O,ctx:j}),!c&&O&1&&(c=!0,V.checked=j[0].other,U(()=>c=!1)),u.$set(V)},i(j){p||(m(e.$$.fragment,j),m(n.$$.fragment,j),m(f.$$.fragment,j),m(u.$$.fragment,j),p=!0)},o(j){g(e.$$.fragment,j),g(n.$$.fragment,j),g(f.$$.fragment,j),g(u.$$.fragment,j),p=!1},d(j){j&&(h(t),h(s),h(a)),v(e,j),v(n,j),v(f,j),v(u,j)}}}function H$(o){let e,l,t,n,r,s,f,i,a,u,c,p,_;return l=new Ge({props:{small:!0,$$slots:{default:[z$]},$$scope:{ctx:o}}}),u=new Qt({props:{rows:o[9]}}),{c(){e=y("div"),b(l.$$.fragment),t=L(),n=y("div"),r=S(`Filter years:
      `),s=y("input"),f=S(`
      -
      `),i=y("input"),a=L(),b(u.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2023),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2023),G(i,"class","svelte-1ft65rw"),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(k,T){d(k,e,T),w(l,e,null),$(e,t),$(e,n),$(n,r),$(n,s),tt(s,o[0].minYear),$(n,f),$(n,i),tt(i,o[0].maxYear),$(e,a),w(u,e,null),c=!0,p||(_=[mt(s,"input",o[14]),mt(i,"input",o[15])],p=!0)},p(k,T){const C={};T&4194305&&(C.$$scope={dirty:T,ctx:k}),l.$set(C),T&1&&xt(s.value)!==k[0].minYear&&tt(s,k[0].minYear),T&1&&xt(i.value)!==k[0].maxYear&&tt(i,k[0].maxYear)},i(k){c||(m(l.$$.fragment,k),m(u.$$.fragment,k),c=!0)},o(k){g(l.$$.fragment,k),g(u.$$.fragment,k),c=!1},d(k){k&&h(e),v(l),v(u),p=!1,Dr(_)}}}function Dl(o){let e,l,t,n=o[3][o[21].pedestrian_location]+"",r;return{c(){e=y("p"),l=S("Pedestrian location: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[3][s[21].pedestrian_location]+"")&&A(r,n)},d(s){s&&h(e)}}}function Gl(o){let e,l,t,n=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=y("p"),l=S("Pedestrian movement: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[4][s[21].pedestrian_movement]+"")&&A(r,n)},d(s){s&&h(e)}}}function E$(o){let e,l,t,n=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,p,_,k,T,C=Fl(o[21])+"",I,M,N,P,j,O=o[21].pedestrian_location&&Dl(o),R=o[21].pedestrian_movement&&Gl(o);return{c(){e=y("p"),l=S("Year: "),t=y("b"),r=S(n),s=L(),f=y("p"),i=S("Severity: "),a=y("b"),c=S(u),p=L(),_=y("p"),k=S("Casualties: "),T=y("b"),I=S(C),M=L(),O&&O.c(),N=L(),R&&R.c(),P=L(),j=y("p"),j.textContent="Click to open full report in CycleStreets"},m(D,z){d(D,e,z),$(e,l),$(e,t),$(t,r),d(D,s,z),d(D,f,z),$(f,i),$(f,a),$(a,c),d(D,p,z),d(D,_,z),$(_,k),$(_,T),$(T,I),d(D,M,z),O&&O.m(D,z),d(D,N,z),R&&R.m(D,z),d(D,P,z),d(D,j,z)},p(D,z){z&2097152&&n!==(n=D[21].year+"")&&A(r,n),z&2097152&&u!==(u=D[5][D[21].severity]+"")&&A(c,u),z&2097152&&C!==(C=Fl(D[21])+"")&&A(I,C),D[21].pedestrian_location?O?O.p(D,z):(O=Dl(D),O.c(),O.m(N.parentNode,N)):O&&(O.d(1),O=null),D[21].pedestrian_movement?R?R.p(D,z):(R=Gl(D),R.c(),R.m(P.parentNode,P)):R&&(R.d(1),R=null)},d(D){D&&(h(e),h(s),h(f),h(p),h(_),h(M),h(N),h(P),h(j)),O&&O.d(D),R&&R.d(D)}}}function B$(o){let e,l;return e=new ie({props:{$$slots:{default:[E$,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function U$(o){let e,l;const t=[q(Et),{sourceLayer:Et},{paint:{"circle-color":ve(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[B$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new ht({props:n}),e.$on("click",V$),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&451?ne(t,[s&0&&se(q(Et)),s&0&&{sourceLayer:Et},s&448&&{paint:{"circle-color":ve(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function W$(o){let e,l,t,n,r;function s(i){o[16](i)}let f={name:Et,title:Y$,$$slots:{controls:[H$],help:[D$]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Et}.pmtiles`,$$slots:{default:[U$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Et="stats19",Y$="Stats19";function J$(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Fl(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function V$(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function Q$(o,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(D){return D.show?`${r.filter(V=>D[V]).join(",")}/${D.minYear}/${D.maxYear}`:null}let i=vt(Et,s,f,J$);Y(o,i,D=>l(0,n=D));function a(D,z,V,ae,F,x){let H=["any"];return n.pedestrians&&H.push(["get","pedestrian"]),n.cyclists&&H.push(["get","cyclist"]),n.horseRiders&&H.push(["get","horse_rider"]),n.other&&H.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],H]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},p={1:"Fatal",2:"Serious",3:"Slight"},_=Q.sequential_low_to_high[4],k=Q.sequential_low_to_high[2],T=Q.sequential_low_to_high[0],C=[["Fatal",_],["Serious",k],["Slight",T]];function I(D){o.$$.not_equal(n.pedestrians,D)&&(n.pedestrians=D,i.set(n))}function M(D){o.$$.not_equal(n.cyclists,D)&&(n.cyclists=D,i.set(n))}function N(D){o.$$.not_equal(n.horseRiders,D)&&(n.horseRiders=D,i.set(n))}function P(D){o.$$.not_equal(n.other,D)&&(n.other=D,i.set(n))}function j(){n.minYear=xt(this.value),i.set(n)}function O(){n.maxYear=xt(this.value),i.set(n)}function R(D){o.$$.not_equal(n.show,D)&&(n.show=D,i.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,p,_,k,T,C,I,M,N,P,j,O,R]}class K$ extends Z{constructor(e){super(),X(this,e,Q$,W$,J,{})}}function Z$(o){let e;return{c(){e=S(`DfT road statistics
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function X$(o){let e;return{c(){e=S("methodology")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function x$(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Z$]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[X$]},$$scope:{ctx:o}}}),c=new Te({}),{c(){e=y("span"),l=y("p"),t=S("AADF (annual average daily flow) data from "),b(n.$$.fragment),r=S(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),b(s.$$.fragment),f=S(" for details and caveats about the measurements."),i=L(),a=y("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),b(c.$$.fragment),G(e,"slot","help")},m(_,k){d(_,e,k),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),$(e,i),$(e,a),$(e,u),w(c,e,null),p=!0},p(_,k){const T={};k&128&&(T.$$scope={dirty:k,ctx:_}),n.$set(T);const C={};k&128&&(C.$$scope={dirty:k,ctx:_}),s.$set(C)},i(_){p||(m(n.$$.fragment,_),m(s.$$.fragment,_),m(c.$$.fragment,_),p=!0)},o(_){g(n.$$.fragment,_),g(s.$$.fragment,_),g(c.$$.fragment,_),p=!1},d(_){_&&h(e),v(n),v(s),v(c)}}}function ep(o){let e,l,t;return l=new Be({props:{colorScale:o[1],limits:o[3]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function tp(o){let e,l=o[6].location+"",t,n,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",p,_,k,T,C=o[6].year+"",I,M,N,P=o[6].pedal_cycles.toLocaleString()+"",j,O,R,D,z,V=o[6].method+"",ae;return{c(){e=y("h2"),t=S(l),n=L(),r=y("p"),s=S("Total motor vehicles ("),i=S(f),a=S(` AADF):
        `),u=y("b"),p=S(c),_=L(),k=y("p"),T=S("Total pedal cycles ("),I=S(C),M=S(` AADF):
        `),N=y("b"),j=S(P),O=L(),R=y("p"),D=S("Count method: "),z=y("b"),ae=S(V)},m(F,x){d(F,e,x),$(e,t),d(F,n,x),d(F,r,x),$(r,s),$(r,i),$(r,a),$(r,u),$(u,p),d(F,_,x),d(F,k,x),$(k,T),$(k,I),$(k,M),$(k,N),$(N,j),d(F,O,x),d(F,R,x),$(R,D),$(R,z),$(z,ae)},p(F,x){x&64&&l!==(l=F[6].location+"")&&A(t,l),x&64&&f!==(f=F[6].year+"")&&A(i,f),x&64&&c!==(c=F[6].motor_vehicles.toLocaleString()+"")&&A(p,c),x&64&&C!==(C=F[6].year+"")&&A(I,C),x&64&&P!==(P=F[6].pedal_cycles.toLocaleString()+"")&&A(j,P),x&64&&V!==(V=F[6].method+"")&&A(ae,V)},d(F){F&&(h(e),h(n),h(r),h(_),h(k),h(O),h(R))}}}function np(o){let e,l;return e=new ie({props:{$$slots:{default:[tp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function lp(o){let e,l;const t=[q(Bt),{sourceLayer:Bt},{paint:{"circle-color":ve(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[np]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new ht({props:n}),e.$on("click",sp),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Bt)),s&0&&{sourceLayer:Bt},s&6&&{paint:{"circle-color":ve(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function rp(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Bt,title:op,$$slots:{controls:[ep],help:[x$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Bt}.pmtiles`,$$slots:{default:[lp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Bt="vehicle_counts",op="Vehicle counts";function sp(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function ip(o,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=ce(Bt);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class ap extends Z{constructor(e){super(),X(this,e,ip,rp,J,{})}}function Al(o,e,l){const t=o.slice();return t[6]=e[l],t}function fp(o){let e;return{c(){e=y("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,G(e,"slot","help")},m(l,t){d(l,e,t)},p:K,d(l){l&&h(e)}}}function up(o){let e,l,t;return l=new Qt({props:{rows:o[3]}}),{c(){e=y("div"),b(l.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:K,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function cp(o){let e,l=o[5]["Issue ID"]+"",t,n,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=y("h2"),t=S(l),n=S(" - "),s=S(r),f=L(),i=y("p"),u=S(a)},m(c,p){d(c,e,p),$(e,t),$(e,n),$(e,s),d(c,f,p),d(c,i,p),$(i,u)},p(c,p){p&32&&l!==(l=c[5]["Issue ID"]+"")&&A(t,l),p&32&&r!==(r=c[5].Code+"")&&A(s,r),p&32&&a!==(a=c[5]["Issue Stage"]+"")&&A(u,a)},d(c){c&&(h(e),h(f),h(i))}}}function ql(o){let e,l=o[6]+"",t,n,r,s=o[5][o[6]]+"",f,i;return{c(){e=y("p"),t=S(l),n=S(`:
            `),r=y("b"),f=S(s),i=L()},m(a,u){d(a,e,u),$(e,t),$(e,n),$(e,r),$(r,f),$(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&A(f,s)},d(a){a&&h(e)}}}function $p(o){let e,l=me(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=ql(Al(o,l,n));return{c(){e=y("div");for(let n=0;n<t.length;n+=1)t[n].c();le(e,"max-width","30vw"),le(e,"max-height","60vh"),le(e,"overflow","auto")},m(n,r){d(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&36){l=me(n[2]);let s;for(s=0;s<l.length;s+=1){const f=Al(n,l,s);t[s]?t[s].p(f,r):(t[s]=ql(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&h(e),qe(t,n)}}}function pp(o){let e,l,t,n;return e=new ie({props:{openOn:"hover",$$slots:{default:[cp,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[$p,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function mp(o){let e,l;const t=[q(an),{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[pp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new ht({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&se(q(an)),s&8&&{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function _p(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:an,title:gp,$$slots:{controls:[up],help:[fp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new wt({props:{data:`${tn()}/v1/problems.geojson.gz`,$$slots:{default:[mp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let an="problems",gp="Issues & Conflicts";function dp(o,e,l){let t,n=ce(an);Y(o,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,s,f]}class hp extends Z{constructor(e){super(),X(this,e,dp,_p,J,{})}}function zl(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Hl(o){let e,l,t=o[1]+"",n,r,s,f=o[2]+"",i,a;return{c(){e=y("tr"),l=y("td"),n=S(t),r=L(),s=y("td"),i=S(f),a=L()},m(u,c){d(u,e,c),$(e,l),$(l,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&1&&t!==(t=u[1]+"")&&A(n,t),c&1&&f!==(f=u[2]+"")&&A(i,f)},d(u){u&&h(e)}}}function bp(o){let e,l,t,n,r=me(Object.entries(o[0])),s=[];for(let f=0;f<r.length;f+=1)s[f]=Hl(zl(o,r,f));return{c(){e=y("table"),l=y("thead"),l.innerHTML="<tr><th>Key</th> <th>Value</th></tr>",t=L(),n=y("tbody");for(let f=0;f<s.length;f+=1)s[f].c()},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,n);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,null)},p(f,i){if(i&1){r=me(Object.entries(f[0]));let a;for(a=0;a<r.length;a+=1){const u=zl(f,r,a);s[a]?s[a].p(u,i):(s[a]=Hl(u),s[a].c(),s[a].m(n,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(f){f&&h(e),qe(s,f)}}}function wp(o){let e,l;return e=new ie({props:{openOn:"click",$$slots:{default:[bp,({props:t})=>({0:t}),({props:t})=>t?1:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&33&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}class In extends Z{constructor(e){super(),X(this,e,null,wp,J,{})}}function vp(o){let e;return{c(){e=y("span"),e.innerHTML="<p>This is your own GeoJSON file.</p>",G(e,"slot","help")},m(l,t){d(l,e,t)},p:K,d(l){l&&h(e)}}}function kp(o){let e,l,t,n,r,s,f,i=o[0].features.length.toLocaleString()+"",a,u,c;return l=new Fr({props:{label:"Load your own GeoJSON file",onLoad:o[3]}}),{c(){e=y("div"),b(l.$$.fragment),t=L(),n=y("p"),n.innerHTML="<i>Note this file doesn&#39;t leave your computer; it&#39;s not uploaded anywhere</i>",r=L(),s=y("p"),f=S("Currently showing "),a=S(i),u=S(" features"),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(p,_){d(p,e,_),w(l,e,null),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),$(s,a),$(s,u),c=!0},p(p,_){(!c||_&1)&&i!==(i=p[0].features.length.toLocaleString()+"")&&A(a,i)},i(p){c||(m(l.$$.fragment,p),c=!0)},o(p){g(l.$$.fragment,p),c=!1},d(p){p&&h(e),v(l)}}}function yp(o){let e,l;return e=new In({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Sp(o){let e,l;return e=new In({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Tp(o){let e,l;return e=new In({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Cp(o){let e,l,t,n,r,s,f,i;const a=[q("user_data_polygons"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Polygon"]},{paint:{"fill-color":"blue","fill-opacity":te(.5,1)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let u={$$slots:{default:[yp]},$$scope:{ctx:o}};for(let I=0;I<a.length;I+=1)u=ee(u,a[I]);e=new Ae({props:u});const c=[q("user_data_polygons-outline"),{paint:{"line-color":"black","line-width":2.5}},{layout:{visibility:o[1]?"visible":"none"}}];let p={};for(let I=0;I<c.length;I+=1)p=ee(p,c[I]);t=new _e({props:p});const _=[q("user_data_lines"),{manageHoverState:!0},{filter:["==",["geometry-type"],"LineString"]},{paint:{"line-color":"green","line-width":te(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let k={$$slots:{default:[Sp]},$$scope:{ctx:o}};for(let I=0;I<_.length;I+=1)k=ee(k,_[I]);r=new _e({props:k});const T=[q("user_data_points"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Point"]},{paint:{"circle-color":"red","circle-radius":te(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let C={$$slots:{default:[Tp]},$$scope:{ctx:o}};for(let I=0;I<T.length;I+=1)C=ee(C,T[I]);return f=new ht({props:C}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(I,M){w(e,I,M),d(I,l,M),w(t,I,M),d(I,n,M),w(r,I,M),d(I,s,M),w(f,I,M),i=!0},p(I,M){const N=M&2?ne(a,[a[0],a[1],a[2],a[3],{layout:{visibility:I[1]?"visible":"none"}},a[5],a[6]]):{};M&32&&(N.$$scope={dirty:M,ctx:I}),e.$set(N);const P=M&2?ne(c,[c[0],c[1],{layout:{visibility:I[1]?"visible":"none"}}]):{};t.$set(P);const j=M&2?ne(_,[_[0],_[1],_[2],_[3],{layout:{visibility:I[1]?"visible":"none"}},_[5],_[6]]):{};M&32&&(j.$$scope={dirty:M,ctx:I}),r.$set(j);const O=M&2?ne(T,[T[0],T[1],T[2],T[3],{layout:{visibility:I[1]?"visible":"none"}},T[5],T[6]]):{};M&32&&(O.$$scope={dirty:M,ctx:I}),f.$set(O)},i(I){i||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(r.$$.fragment,I),m(f.$$.fragment,I),i=!0)},o(I){g(e.$$.fragment,I),g(t.$$.fragment,I),g(r.$$.fragment,I),g(f.$$.fragment,I),i=!1},d(I){I&&(h(l),h(n),h(s)),v(e,I),v(t,I),v(r,I),v(f,I)}}}function Lp(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Yr,title:Ip,$$slots:{controls:[kp],help:[vp]},$$scope:{ctx:o}};return o[1]!==void 0&&(f.show=o[1]),e=new fe({props:f}),E.push(()=>B(e,"show",s)),n=new wt({props:{data:o[0],generateId:!0,$$slots:{default:[Cp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&33&&(u.$$scope={dirty:a,ctx:i}),!l&&a&2&&(l=!0,u.show=i[1],U(()=>l=!1)),e.$set(u);const c={};a&1&&(c.data=i[0]),a&34&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Yr="user_data",Ip="Your own GeoJSON file";function Mp(o,e,l){let t,n=ce(Yr);Y(o,n,i=>l(1,t=i));let r={type:"FeatureCollection",features:[]};function s(i,a){try{l(0,r=JSON.parse(a))}catch(u){window.alert(`Couldn't load ${i} -- is it GeoJSON? ${u}`)}}function f(i){t=i,n.set(t)}return[r,t,n,s,f]}class Op extends Z{constructor(e){super(),X(this,e,Mp,Lp,J,{})}}function jp(o){let e;function l(r,s){return r[2]<=100?Rp:Pp}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:K,o:K,d(r){r&&h(e),n.d(r)}}}function Np(o){let e,l;return e=new Ee({props:{$$slots:{default:[Dp]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Pp(o){let e;return{c(){e=y("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){d(l,e,t)},p:K,d(l){l&&h(e)}}}function Rp(o){let e,l,t;return{c(){e=y("label"),l=S(`Downloading scheme data
      `),t=y("progress"),t.value=o[2],G(t,"class","svelte-q3473n")},m(n,r){d(n,e,r),$(e,l),$(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&h(e)}}}function Dp(o){let e;return{c(){e=S("Load latest scheme data")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Gp(o){let e,l,t,n;const r=[Np,jp],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(l=s[e]=r[e](o)),{c(){l&&l.c(),t=ge()},m(i,a){~e&&s[e].m(i,a),d(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(l&&(be(),g(s[u],1,1,()=>{s[u]=null}),we()),~e?(l=s[e],l?l.p(i,a):(l=s[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){g(l),n=!1},d(i){i&&h(t),~e&&s[e].d(i)}}}function Fp(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await oo(`${tn()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,s=c)});l(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}Gr(async()=>{n&&await f()});async function i(){l(0,n=!0),await f()}return o.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,s,i,t]}class Ap extends Z{constructor(e){super(),X(this,e,Fp,Gp,J,{loadFile:4})}}function qp(o,e,l){let t={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},n={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};for(let[r,s]of Object.entries(o.schemes))s.pipeline?n.schemes[r]=s:t.schemes[r]=s;for(let r of o.features){if(!zp(r))continue;let s=r.properties.scheme_reference,f=Object.hasOwn(t.schemes,s),i=f?t.schemes[s]:n.schemes[s];i.browse&&(r.properties.funding_programme=i.browse.funding_programme,r.properties.current_milestone=i.browse.current_milestone);let a=f?t:n;r.id=a.features.length+1,a.features.push(r)}e.set(t),l.set(n)}function zp(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}function Hp(){let o={type:"FeatureCollection",features:[],schemes:{},notes:["These schemes are everything you've drawn in this browser using Scheme Sketcher. The data source and accuracy depend on whatever files you imported, created, or edited yourself."]};for(let l=0;l<window.localStorage.length;l++){let t=window.localStorage.key(l),n=t.split("/");if(!(n.length!=3||n[0]!="sketch"))try{let r=JSON.parse(window.localStorage.getItem(t));if(r.features.length==0)continue;for(let s of Object.values(r.schemes))s.browse={authority_or_region:n[1],local_filename:n[2]};o.schemes={...o.schemes,...r.schemes},o.features=[...o.features,...r.features]}catch{}}let e=1;for(let l of o.features)l.id=e++;return o}let Vt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},vn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function El(o,e,l){const t=o.slice();return t[27]=e[l],t[28]=e,t[29]=l,t}function Ep(o){let e;return{c(){e=S("Filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bp(o){let e;return{c(){e=S("Reset all filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Up(o){let e,l,t,n,r,s,f,i;e=new bn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Jp]},$$scope:{ctx:o}}});function a(_){o[22](_)}let u={label:"Scheme name or reference",options:fn(o[0])};o[1]!==void 0&&(u.value=o[1]),t=new Ur({props:u}),E.push(()=>B(t,"value",a));function c(_){o[23](_)}let p={label:"Authority or region",choices:o[10],emptyOption:!0};return o[4]!==void 0&&(p.value=o[4]),s=new Wt({props:p}),E.push(()=>B(s,"value",c)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),r=L(),b(s.$$.fragment)},m(_,k){w(e,_,k),d(_,l,k),w(t,_,k),d(_,r,k),w(s,_,k),i=!0},p(_,k){const T={};k&1073741828&&(T.$$scope={dirty:k,ctx:_}),e.$set(T);const C={};k&1&&(C.options=fn(_[0])),!n&&k&2&&(n=!0,C.value=_[1],U(()=>n=!1)),t.$set(C);const I={};k&1024&&(I.choices=_[10]),!f&&k&16&&(f=!0,I.value=_[4],U(()=>f=!1)),s.$set(I)},i(_){i||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(s.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(s.$$.fragment,_),i=!1},d(_){_&&(h(l),h(r)),v(e,_),v(t,_),v(s,_)}}}function Wp(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,k,T,C;t=new bn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Qp]},$$scope:{ctx:o}}});function I(R){o[16](R)}let M={label:"Scheme name or reference",options:fn(o[0])};o[1]!==void 0&&(M.value=o[1]),r=new Ur({props:M}),E.push(()=>B(r,"value",I));function N(R){o[17](R)}let P={label:"Authority or region",choices:o[10],emptyOption:!0};o[4]!==void 0&&(P.value=o[4]),i=new Wt({props:P}),E.push(()=>B(i,"value",N)),p=new bn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[Xp]},$$scope:{ctx:o}}});function j(R){o[19](R)}let O={label:"Current milestone",choices:o[11],emptyOption:!0};return o[6]!==void 0&&(O.value=o[6]),k=new Wt({props:O}),E.push(()=>B(k,"value",j)),{c(){e=y("div"),l=y("div"),b(t.$$.fragment),n=L(),b(r.$$.fragment),f=L(),b(i.$$.fragment),u=L(),c=y("div"),b(p.$$.fragment),_=L(),b(k.$$.fragment),G(l,"class","govuk-grid-column-one-half"),G(c,"class","govuk-grid-column-one-half"),G(e,"class","govuk-grid-row")},m(R,D){d(R,e,D),$(e,l),w(t,l,null),$(l,n),w(r,l,null),$(l,f),w(i,l,null),$(e,u),$(e,c),w(p,c,null),$(c,_),w(k,c,null),C=!0},p(R,D){const z={};D&1073741828&&(z.$$scope={dirty:D,ctx:R}),t.$set(z);const V={};D&1&&(V.options=fn(R[0])),!s&&D&2&&(s=!0,V.value=R[1],U(()=>s=!1)),r.$set(V);const ae={};D&1024&&(ae.choices=R[10]),!a&&D&16&&(a=!0,ae.value=R[4],U(()=>a=!1)),i.$set(ae);const F={};D&1073741856&&(F.$$scope={dirty:D,ctx:R}),p.$set(F);const x={};!T&&D&64&&(T=!0,x.value=R[6],U(()=>T=!1)),k.$set(x)},i(R){C||(m(t.$$.fragment,R),m(r.$$.fragment,R),m(i.$$.fragment,R),m(p.$$.fragment,R),m(k.$$.fragment,R),C=!0)},o(R){g(t.$$.fragment,R),g(r.$$.fragment,R),g(i.$$.fragment,R),g(p.$$.fragment,R),g(k.$$.fragment,R),C=!1},d(R){R&&h(e),v(t),v(r),v(i),v(p),v(k)}}}function Yp(o){let e;return{c(){e=S("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Jp(o){let e,l,t,n,r,s;return t=new Ee({props:{$$slots:{default:[Yp]},$$scope:{ctx:o}}}),t.$on("click",o[21]),{c(){e=y("input"),l=L(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){d(f,e,i),tt(e,o[2]),d(f,l,i),w(t,f,i),n=!0,r||(s=mt(e,"input",o[20]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&tt(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,s()}}}function Vp(o){let e;return{c(){e=S("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Qp(o){let e,l,t,n,r,s;return t=new Ee({props:{$$slots:{default:[Vp]},$$scope:{ctx:o}}}),t.$on("click",o[15]),{c(){e=y("input"),l=L(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){d(f,e,i),tt(e,o[2]),d(f,l,i),w(t,f,i),n=!0,r||(s=mt(e,"input",o[14]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&tt(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,s()}}}function Kp(o){let e=o[27]+"",l,t;return{c(){l=S(e),t=L()},m(n,r){d(n,l,r),d(n,t,r)},p:K,d(n){n&&(h(l),h(t))}}}function Bl(o){let e,l,t;function n(s){o[18](s,o[27])}let r={$$slots:{default:[Kp]},$$scope:{ctx:o}};return o[5][o[27]]!==void 0&&(r.checked=o[5][o[27]]),e=new He({props:r}),E.push(()=>B(e,"checked",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){o=s;const i={};f&1073741824&&(i.$$scope={dirty:f,ctx:o}),!l&&f&32&&(l=!0,i.checked=o[5][o[27]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Zp(o){let e,l,t=me(Object.keys(Vt)),n=[];for(let s=0;s<t.length;s+=1)n[s]=Bl(El(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ge()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&32){t=me(Object.keys(Vt));let i;for(i=0;i<t.length;i+=1){const a=El(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Bl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),qe(n,s)}}}function Xp(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[Zp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1073741856&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function xp(o){let e;return{c(){e=S("Done")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function em(o){let e,l,t,n,r=o[9].interventions.toLocaleString()+"",s,f,i,a,u=o[8].size.toLocaleString()+"",c,p,_,k,T,C=Ul(o[9].totalLength).toFixed(1)+"",I,M,N,P,j,O,R,D,z,V;P=new Ee({props:{$$slots:{default:[Bp]},$$scope:{ctx:o}}}),P.$on("click",o[12]);const ae=[Wp,Up],F=[];function x(H,ue){return H[3]=="ATF"?0:1}return O=x(o),R=F[O]=ae[O](o),z=new Mo({props:{$$slots:{default:[xp]},$$scope:{ctx:o}}}),z.$on("click",o[24]),{c(){e=y("p"),e.textContent="Showing:",l=L(),t=y("ul"),n=y("li"),s=S(r),f=S(" interventions"),i=L(),a=y("li"),c=S(u),p=S(" schemes"),_=L(),k=y("li"),T=S("total route length of "),I=S(C),M=S(" miles"),N=L(),b(P.$$.fragment),j=L(),R.c(),D=L(),b(z.$$.fragment)},m(H,ue){d(H,e,ue),d(H,l,ue),d(H,t,ue),$(t,n),$(n,s),$(n,f),$(t,i),$(t,a),$(a,c),$(a,p),$(t,_),$(t,k),$(k,T),$(k,I),$(k,M),d(H,N,ue),w(P,H,ue),d(H,j,ue),F[O].m(H,ue),d(H,D,ue),w(z,H,ue),V=!0},p(H,ue){(!V||ue&512)&&r!==(r=H[9].interventions.toLocaleString()+"")&&A(s,r),(!V||ue&256)&&u!==(u=H[8].size.toLocaleString()+"")&&A(c,u),(!V||ue&512)&&C!==(C=Ul(H[9].totalLength).toFixed(1)+"")&&A(I,C);const Ce={};ue&1073741824&&(Ce.$$scope={dirty:ue,ctx:H}),P.$set(Ce);let ze=O;O=x(H),O===ze?F[O].p(H,ue):(be(),g(F[ze],1,1,()=>{F[ze]=null}),we(),R=F[O],R?R.p(H,ue):(R=F[O]=ae[O](H),R.c()),m(R,1),R.m(D.parentNode,D));const Xe={};ue&1073741824&&(Xe.$$scope={dirty:ue,ctx:H}),z.$set(Xe)},i(H){V||(m(P.$$.fragment,H),m(R),m(z.$$.fragment,H),V=!0)},o(H){g(P.$$.fragment,H),g(R),g(z.$$.fragment,H),V=!1},d(H){H&&(h(e),h(l),h(t),h(N),h(j),h(D)),v(P,H),F[O].d(H),v(z,H)}}}function tm(o){let e,l,t,n,r;e=new Ee({props:{$$slots:{default:[Ep]},$$scope:{ctx:o}}}),e.$on("click",o[13]);function s(i){o[25](i)}let f={title:`Filter ${o[3]} schemes`,$$slots:{default:[em]},$$scope:{ctx:o}};return o[7]!==void 0&&(f.open=o[7]),t=new so({props:f}),E.push(()=>B(t,"open",s)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){w(e,i,a),d(i,l,a),w(t,i,a),r=!0},p(i,[a]){const u={};a&1073741824&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.title=`Filter ${i[3]} schemes`),a&1073743871&&(c.$$scope={dirty:a,ctx:i}),!n&&a&128&&(n=!0,c.open=i[7],U(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),r=!1},d(i){i&&h(l),v(e,i),v(t,i)}}}function nm(o){var t;let e=new Set;for(let n of Object.values(o.schemes))(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Ul(o){return o*621371e-9}function fn(o){let e=[];for(let l of Object.values(o.schemes))e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function lm(o,e,l){let t,{source:n}=e,{schemesGj:r}=e,{filterSchemeText:s}=e,{filterInterventionText:f}=e,i=!1,a=new Set,u={interventions:0,totalLength:0},c=Object.keys(vn).map(H=>[H,H]),p="",_=Object.fromEntries(Object.keys(Vt).map(H=>[H,!0])),k="";function T(H,ue,Ce,ze,Xe){let Ie=H.toLowerCase(),rt=ue.toLowerCase(),Yt=de=>{var Ue,at,ft,W;if(Ie&&!((Ue=de.properties.name)!=null&&Ue.toLowerCase().includes(Ie))&&!((at=de.properties.description)!=null&&at.toLowerCase().includes(Ie)))return!1;let Me=r.schemes[de.properties.scheme_reference];return!(Ce&&((ft=Me.browse)==null?void 0:ft.authority_or_region)!=Ce||n=="ATF"&&Me.browse.funding_programme&&!ze[Me.browse.funding_programme]||Xe&&((W=Me.browse)==null?void 0:W.current_milestone)!=Xe||rt&&!Me.scheme_reference.toLowerCase().includes(rt)&&!(Me.scheme_name??"").toLowerCase().includes(rt))};l(8,a=new Set(r.features.filter(Yt).map(de=>de.properties.scheme_reference))),l(9,u={interventions:0,totalLength:0});let it=de=>{var Me,Ue;return!(!a.has(de.properties.scheme_reference)||Ie&&!((Me=de.properties.name)!=null&&Me.toLowerCase().includes(Ie))&&!((Ue=de.properties.description)!=null&&Ue.toLowerCase().includes(Ie)))};for(let de of r.features)it(de)?(delete de.properties.hide_while_editing,l(9,u.interventions++,u),de.geometry.type=="LineString"&&de.properties.length_meters&&l(9,u.totalLength+=de.properties.length_meters,u)):de.properties.hide_while_editing=!0;l(0,r),l(9,u)}function C(){l(4,p=""),l(5,_=Object.fromEntries(Object.keys(Vt).map(H=>[H,!0]))),l(6,k=""),l(2,f=""),l(1,s="")}const I=()=>l(7,i=!0);function M(){f=this.value,l(2,f)}const N=()=>l(2,f="");function P(H){s=H,l(1,s)}function j(H){p=H,l(4,p)}function O(H,ue){o.$$.not_equal(_[ue],H)&&(_[ue]=H,l(5,_))}function R(H){k=H,l(6,k)}function D(){f=this.value,l(2,f)}const z=()=>l(2,f="");function V(H){s=H,l(1,s)}function ae(H){p=H,l(4,p)}const F=()=>l(7,i=!1);function x(H){i=H,l(7,i)}return o.$$set=H=>{"source"in H&&l(3,n=H.source),"schemesGj"in H&&l(0,r=H.schemesGj),"filterSchemeText"in H&&l(1,s=H.filterSchemeText),"filterInterventionText"in H&&l(2,f=H.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&1&&l(10,t=nm(r)),o.$$.dirty&118&&T(f,s,p,_,k)},[r,s,f,n,p,_,k,i,a,u,t,c,C,I,M,N,P,j,O,R,D,z,V,ae,F,x]}class Mn extends Z{constructor(e){super(),X(this,e,lm,tm,J,{source:3,schemesGj:0,filterSchemeText:1,filterInterventionText:2})}}const rn=Le({type:"FeatureCollection",features:[],schemes:{}}),Wl=Le(""),Yl=Le(""),cn=Le({type:"FeatureCollection",features:[],schemes:{}}),Jl=Le(""),Vl=Le(""),$n=Le({type:"FeatureCollection",features:[],schemes:{}}),Ql=Le(""),Kl=Le("");function Zl(o){let e,l,t,n=o[0].status+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Status",t=S(`
    : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].status+"")&&A(r,n)},d(s){s&&h(e)}}}function Xl(o){let e,l,t,n=o[0].timescale+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Timescale",t=S(`
    : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale+"")&&A(r,n)},d(s){s&&h(e)}}}function xl(o){let e,l,t,n=o[0].timescale_year+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Estimated completion year",t=S(`
    : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale_year+"")&&A(r,n)},d(s){s&&h(e)}}}function er(o){let e,l,t,n=o[0].year_published+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme most recently published",t=S(`
    : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_published+"")&&A(r,n)},d(s){s&&h(e)}}}function tr(o){let e,l,t,n=o[0].year_consulted+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme most recently consulted on",t=S(`
    : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_consulted+"")&&A(r,n)},d(s){s&&h(e)}}}function rm(o){let e,l,t,n,r,s=o[0].status&&Zl(o),f=o[0].timescale&&Xl(o),i=o[0].timescale_year&&xl(o),a=o[0].year_published&&er(o),u=o[0].year_consulted&&tr(o);return{c(){s&&s.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=ge()},m(c,p){s&&s.m(c,p),d(c,e,p),f&&f.m(c,p),d(c,l,p),i&&i.m(c,p),d(c,t,p),a&&a.m(c,p),d(c,n,p),u&&u.m(c,p),d(c,r,p)},p(c,[p]){c[0].status?s?s.p(c,p):(s=Zl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,p):(f=Xl(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,p):(i=xl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,p):(a=er(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,p):(u=tr(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:K,o:K,d(c){c&&(h(e),h(l),h(t),h(n),h(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function om(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Jr extends Z{constructor(e){super(),X(this,e,om,rm,J,{props:0})}}function nr(o){let e,l,t,n=o[0].budget.toLocaleString()+"",r,s;return{c(){e=y("p"),l=y("b"),l.textContent="Cost",t=S(`
    : `),r=S(n),s=S(`
    GBP`)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r),$(e,s)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&A(r,n)},d(f){f&&h(e)}}}function lr(o){let e;return{c(){e=y("p"),e.textContent="Development is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rr(o){let e;return{c(){e=y("p"),e.textContent="Construction is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function or(o){let e,l,t,n;return{c(){e=y("p"),l=y("b"),l.textContent="Funding sources",t=S(`
    : `),n=S(o[1])},m(r,s){d(r,e,s),$(e,l),$(e,t),$(e,n)},p(r,s){s&2&&A(n,r[1])},d(r){r&&h(e)}}}function sm(o){let e,l,t,n,r=o[0].budget&&nr(o),s=o[0].development_funded&&lr(),f=o[0].construction_funded&&rr(),i=o[1]&&or(o);return{c(){r&&r.c(),e=L(),s&&s.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=ge()},m(a,u){r&&r.m(a,u),d(a,e,u),s&&s.m(a,u),d(a,l,u),f&&f.m(a,u),d(a,t,u),i&&i.m(a,u),d(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=nr(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=lr(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=rr(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=or(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:K,o:K,d(a){a&&(h(e),h(l),h(t),h(n)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function im(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function am(o,e,l){let t,{props:n}=e;return o.$$set=r=>{"props"in r&&l(0,n=r.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=im(n))},[n,t]}class Vr extends Z{constructor(e){super(),X(this,e,am,sm,J,{props:0})}}function pn(o){const e=o.slice(),l=e[5].pipeline;return e[11]=l,e}function mn(o){const e=o.slice(),l=JSON.parse(e[1].v2);return e[11]=l,e}function _n(o){const e=o.slice(),l=JSON.parse(e[1].pipeline);return e[11]=l,e}function sr(o){let e,l,t,n=Un(o[1].length_meters)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Length",t=S(`
        : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=Un(s[1].length_meters)+"")&&A(r,n)},d(s){s&&h(e)}}}function ir(o){let e,l=ct(o[1].description,o[3])+"";return{c(){e=y("p")},m(t,n){d(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=ct(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&h(e)}}}function ar(o){let e,l,t,n,r,s,f,i=o[11].atf4_type&&fr(o),a=o[11].accuracy&&ur(o),u=o[11].is_alternative&&cr();return n=new Vr({props:{props:o[11]}}),s=new Jr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(c,p){i&&i.m(c,p),d(c,e,p),a&&a.m(c,p),d(c,l,p),u&&u.m(c,p),d(c,t,p),w(n,c,p),d(c,r,p),w(s,c,p),f=!0},p(c,p){c[11].atf4_type?i?i.p(c,p):(i=fr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].accuracy?a?a.p(c,p):(a=ur(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].is_alternative?u||(u=cr(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};p&2&&(_.props=c[11]),n.$set(_);const k={};p&2&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function fr(o){let e,l,t,n=o[11].atf4_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="ATF4 type",t=S(`
          : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].atf4_type+"")&&A(r,n)},d(s){s&&h(e)}}}function ur(o){let e,l,t,n=o[11].accuracy+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Accuracy",t=S(`
          : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].accuracy+"")&&A(r,n)},d(s){s&&h(e)}}}function cr(o){let e;return{c(){e=y("p"),e.textContent="Represents an alternative route"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $r(o){let e,l,t,n=o[11].intervention_type&&pr(o),r=o[11].work_type&&mr(o),s=o[11].intended_uses&&_r(o);return{c(){n&&n.c(),e=L(),r&&r.c(),l=L(),s&&s.c(),t=ge()},m(f,i){n&&n.m(f,i),d(f,e,i),r&&r.m(f,i),d(f,l,i),s&&s.m(f,i),d(f,t,i)},p(f,i){f[11].intervention_type?n?n.p(f,i):(n=pr(f),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),f[11].work_type?r?r.p(f,i):(r=mr(f),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null),f[11].intended_uses?s?s.p(f,i):(s=_r(f),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(f){f&&(h(e),h(l),h(t)),n&&n.d(f),r&&r.d(f),s&&s.d(f)}}}function pr(o){let e,l,t,n=o[11].intervention_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Type",t=S(`
          : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].intervention_type+"")&&A(r,n)},d(s){s&&h(e)}}}function mr(o){let e,l,t,n=o[11].work_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="What kind of infrastructure is mapped",t=S(`
          : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].work_type+"")&&A(r,n)},d(s){s&&h(e)}}}function _r(o){let e,l,t,n=o[11].intended_uses+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Intended uses",t=S(`
          : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].intended_uses+"")&&A(r,n)},d(s){s&&h(e)}}}function gr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Capital scheme ID",t=S(`
        : `),r=S(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&A(r,n)},d(f){f&&h(e)}}}function dr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.funding_programme)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Funding programme",t=S(`
        : `),r=S(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&A(r,n)},d(f){f&&h(e)}}}function hr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Current milestone",t=S(`
        : `),r=S(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&A(r,n)},d(f){f&&h(e)}}}function br(o){let e,l,t,n,r,s,f,i=o[11].scheme_type&&wr(o),a=o[11].atf4_lead_type&&vr(o),u=o[11].scheme_description&&kr(o);return n=new Vr({props:{props:o[11]}}),s=new Jr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(c,p){i&&i.m(c,p),d(c,e,p),a&&a.m(c,p),d(c,l,p),u&&u.m(c,p),d(c,t,p),w(n,c,p),d(c,r,p),w(s,c,p),f=!0},p(c,p){c[11].scheme_type?i?i.p(c,p):(i=wr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].atf4_lead_type?a?a.p(c,p):(a=vr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].scheme_description?u?u.p(c,p):(u=kr(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};p&32&&(_.props=c[11]),n.$set(_);const k={};p&32&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function wr(o){let e,l,t,n=o[11].scheme_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme type",t=S(`
          : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_type+"")&&A(r,n)},d(s){s&&h(e)}}}function vr(o){let e,l,t,n=o[11].atf4_lead_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="ATF4 lead type",t=S(`
          : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].atf4_lead_type+"")&&A(r,n)},d(s){s&&h(e)}}}function kr(o){let e,l,t,n=o[11].scheme_description+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Descripton",t=S(`
          : `),r=S(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_description+"")&&A(r,n)},d(s){s&&h(e)}}}function fm(o){let e;return{c(){e=S("Edit a copy of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function um(o){let e;return{c(){e=S("Edit your existing version of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function cm(o){let e;function l(r,s){var f;return(f=r[5].browse)!=null&&f.local_filename?um:fm}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function $m(o){let e;return{c(){e=S("Zoom to show entire scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function yr(o){var jn,Nn,Pn,Rn;let e,l,t,n,r,s,f,i=ct(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,p,_,k,T,C,I,M,N,P,j,O,R,D,z,V,ae=ct(o[5].scheme_name??"",o[2])+"",F,x,H,ue,Ce,ze=ct(o[1].scheme_reference,o[2])+"",Xe,Ie,rt,Yt,it=((jn=o[5].browse)==null?void 0:jn.authority_or_region)+"",de,Me,Ue,at,ft,W,xe,nn,ut,et,Oe=o[1].length_meters&&sr(o),je=o[1].description&&ir(o),ke=o[1].pipeline&&ar(_n(o)),Ne=o[1].v2&&$r(mn(o)),Pe=((Nn=o[5].browse)==null?void 0:Nn.capital_scheme_id)&&gr(o),Re=((Pn=o[5].browse)==null?void 0:Pn.funding_programme)&&dr(o),De=((Rn=o[5].browse)==null?void 0:Rn.current_milestone)&&hr(o),ye=o[5].pipeline&&br(pn(o));return xe=new Ee({props:{$$slots:{default:[cm]},$$scope:{ctx:o}}}),xe.$on("click",o[7]),ut=new Ee({props:{$$slots:{default:[$m]},$$scope:{ctx:o}}}),ut.$on("click",o[6]),{c(){e=y("div"),l=y("h2"),l.textContent="Intervention",t=L(),n=y("p"),r=y("b"),r.textContent="Name",s=S(`
      : `),f=new Ut(!1),a=S(" ("),c=S(u),p=S(")"),_=L(),Oe&&Oe.c(),k=L(),je&&je.c(),T=L(),ke&&ke.c(),C=L(),Ne&&Ne.c(),I=L(),M=y("hr"),N=L(),P=y("h2"),j=S(o[0]),O=L(),R=y("p"),D=y("b"),D.textContent="Scheme name",z=S(`
      : `),V=new Ut(!1),F=L(),x=y("p"),H=y("b"),H.textContent="Scheme reference",ue=S(`
      : `),Ce=new Ut(!1),Xe=L(),Ie=y("p"),rt=y("b"),rt.textContent="Authority or region",Yt=S(`
      : `),de=S(it),Me=L(),Pe&&Pe.c(),Ue=L(),Re&&Re.c(),at=L(),De&&De.c(),ft=L(),ye&&ye.c(),W=L(),b(xe.$$.fragment),nn=L(),b(ut.$$.fragment),f.a=a,V.a=null,Ce.a=null,le(e,"max-width","30vw"),le(e,"max-height","60vh"),le(e,"overflow","auto")},m(oe,he){d(oe,e,he),$(e,l),$(e,t),$(e,n),$(n,r),$(n,s),f.m(i,n),$(n,a),$(n,c),$(n,p),$(e,_),Oe&&Oe.m(e,null),$(e,k),je&&je.m(e,null),$(e,T),ke&&ke.m(e,null),$(e,C),Ne&&Ne.m(e,null),$(e,I),$(e,M),$(e,N),$(e,P),$(P,j),$(e,O),$(e,R),$(R,D),$(R,z),V.m(ae,R),$(e,F),$(e,x),$(x,H),$(x,ue),Ce.m(ze,x),$(e,Xe),$(e,Ie),$(Ie,rt),$(Ie,Yt),$(Ie,de),$(e,Me),Pe&&Pe.m(e,null),$(e,Ue),Re&&Re.m(e,null),$(e,at),De&&De.m(e,null),$(e,ft),ye&&ye.m(e,null),$(e,W),w(xe,e,null),$(e,nn),w(ut,e,null),o[9](e),et=!0},p(oe,he){var Fn,An,qn,zn;(!et||he&10)&&i!==(i=ct(oe[1].name,oe[3])+"")&&f.p(i),(!et||he&2)&&u!==(u=oe[1].intervention_type+"")&&A(c,u),oe[1].length_meters?Oe?Oe.p(oe,he):(Oe=sr(oe),Oe.c(),Oe.m(e,k)):Oe&&(Oe.d(1),Oe=null),oe[1].description?je?je.p(oe,he):(je=ir(oe),je.c(),je.m(e,T)):je&&(je.d(1),je=null),oe[1].pipeline?ke?(ke.p(_n(oe),he),he&2&&m(ke,1)):(ke=ar(_n(oe)),ke.c(),m(ke,1),ke.m(e,C)):ke&&(be(),g(ke,1,1,()=>{ke=null}),we()),oe[1].v2?Ne?Ne.p(mn(oe),he):(Ne=$r(mn(oe)),Ne.c(),Ne.m(e,I)):Ne&&(Ne.d(1),Ne=null),(!et||he&1)&&A(j,oe[0]),(!et||he&36)&&ae!==(ae=ct(oe[5].scheme_name??"",oe[2])+"")&&V.p(ae),(!et||he&6)&&ze!==(ze=ct(oe[1].scheme_reference,oe[2])+"")&&Ce.p(ze),(!et||he&32)&&it!==(it=((Fn=oe[5].browse)==null?void 0:Fn.authority_or_region)+"")&&A(de,it),(An=oe[5].browse)!=null&&An.capital_scheme_id?Pe?Pe.p(oe,he):(Pe=gr(oe),Pe.c(),Pe.m(e,Ue)):Pe&&(Pe.d(1),Pe=null),(qn=oe[5].browse)!=null&&qn.funding_programme?Re?Re.p(oe,he):(Re=dr(oe),Re.c(),Re.m(e,at)):Re&&(Re.d(1),Re=null),(zn=oe[5].browse)!=null&&zn.current_milestone?De?De.p(oe,he):(De=hr(oe),De.c(),De.m(e,ft)):De&&(De.d(1),De=null),oe[5].pipeline?ye?(ye.p(pn(oe),he),he&32&&m(ye,1)):(ye=br(pn(oe)),ye.c(),m(ye,1),ye.m(e,W)):ye&&(be(),g(ye,1,1,()=>{ye=null}),we());const Dn={};he&4128&&(Dn.$$scope={dirty:he,ctx:oe}),xe.$set(Dn);const Gn={};he&4096&&(Gn.$$scope={dirty:he,ctx:oe}),ut.$set(Gn)},i(oe){et||(m(ke),m(ye),m(xe.$$.fragment,oe),m(ut.$$.fragment,oe),et=!0)},o(oe){g(ke),g(ye),g(xe.$$.fragment,oe),g(ut.$$.fragment,oe),et=!1},d(oe){oe&&h(e),Oe&&Oe.d(),je&&je.d(),ke&&ke.d(),Ne&&Ne.d(),Pe&&Pe.d(),Re&&Re.d(),De&&De.d(),ye&&ye.d(),v(xe),v(ut),o[9](null)}}}function pm(o){let e=o[1],l,t,n=yr(o);return{c(){n.c(),l=ge()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,[s]){s&2&&J(e,e=r[1])?(be(),g(n,1,1,K),we(),n=yr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function ct(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function mm(o,e,l){let t,n;Y(o,un,k=>l(10,n=k));let{description:r}=e,{props:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,u;no(()=>{u&&l(4,u.scrollTop=0,u)});function c(){let k={type:"FeatureCollection",features:f.features.filter(T=>T.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(qr(k),{padding:20,animate:!1})}function p(){var I,M,N;let k={type:"FeatureCollection",features:f.features.filter(P=>P.properties.scheme_reference==t.scheme_reference),schemes:{}};k.schemes[t.scheme_reference]=t;let T=(I=t.browse)==null?void 0:I.authority_or_region;if(!T){window.alert("This scheme has no authority specified, you can't edit this");return}let C=t.pipeline?"pipeline":t.v2?"v2":"v1";if((M=t.browse)!=null&&M.local_filename)window.open(Bn(T,(N=t.browse)==null?void 0:N.local_filename,C),"_blank");else{let P=`browse_copy_${t.scheme_reference}`,j=io(T,k);for(let O of j.features)delete O.properties.funding_programme,delete O.properties.current_milestone;ao(fo(T,P),JSON.stringify(j)),window.open(Bn(T,P,C),"_blank")}}function _(k){E[k?"unshift":"push"](()=>{u=k,l(4,u)})}return o.$$set=k=>{"description"in k&&l(0,r=k.description),"props"in k&&l(1,s=k.props),"schemesGj"in k&&l(8,f=k.schemesGj),"filterSchemeText"in k&&l(2,i=k.filterSchemeText),"filterInterventionText"in k&&l(3,a=k.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=f.schemes[s.scheme_reference])},[r,s,i,a,u,t,c,p,f,_]}class On extends Z{constructor(e){super(),X(this,e,mm,pm,J,{description:0,props:1,schemesGj:8,filterSchemeText:2,filterInterventionText:3})}}function _m(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function gm(o){let e,l;return e=new On({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function dm(o){let e,l,t,n;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[_m,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[gm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function hm(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function bm(o){let e,l;return e=new On({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function wm(o){let e,l,t,n;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[hm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[bm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function vm(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function km(o){let e,l;return e=new On({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ym(o){let e,l,t,n;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[vm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[km,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Sm(o){let e,l,t,n,r,s,f,i,a,u;const c=[q(`${o[0]}-interventions-points`),{filter:["all",Vn,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":Wn,"circle-opacity":te(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let p={$$slots:{default:[dm]},$$scope:{ctx:o}};for(let j=0;j<c.length;j+=1)p=ee(p,c[j]);e=new ht({props:p});const _=[q(`${o[0]}-interventions-lines`),{filter:["all",Qn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":Kt,"line-opacity":te(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[wm]},$$scope:{ctx:o}};for(let j=0;j<_.length;j+=1)k=ee(k,_[j]);t=new _e({props:k});const T=[q(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Kt,"circle-opacity":0,"circle-stroke-color":nt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[2]?"visible":"none"}}];let C={};for(let j=0;j<T.length;j+=1)C=ee(C,T[j]);r=new ht({props:C});const I=[q(`${o[0]}-interventions-polygons`),{filter:["all",ln,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":te(.2,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let M={$$slots:{default:[ym]},$$scope:{ctx:o}};for(let j=0;j<I.length;j+=1)M=ee(M,I[j]);f=new Ae({props:M});const N=[q(`${o[0]}-interventions-polygons-outlines`),{filter:["all",ln,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*Kt}},{layout:{visibility:o[2]?"visible":"none"}}];let P={};for(let j=0;j<N.length;j+=1)P=ee(P,N[j]);return a=new _e({props:P}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(j,O){w(e,j,O),d(j,l,O),w(t,j,O),d(j,n,O),w(r,j,O),d(j,s,O),w(f,j,O),d(j,i,O),w(a,j,O),u=!0},p(j,O){const R=O&837?ne(c,[O&1&&se(q(`${j[0]}-interventions-points`)),O&768&&{filter:["all",Vn,j[8],j[9]]},c[2],c[3],O&64&&{paint:{"circle-color":j[6],"circle-radius":Wn,"circle-opacity":te(1,.5)}},O&4&&{layout:{visibility:j[2]?"visible":"none"}},c[6]]):{};O&2106&&(R.$$scope={dirty:O,ctx:j}),e.$set(R);const D=O&325?ne(_,[O&1&&se(q(`${j[0]}-interventions-lines`)),O&256&&{filter:["all",Qn,j[8]]},_[2],_[3],O&64&&{paint:{"line-color":j[6],"line-width":Kt,"line-opacity":te(1,.5)}},O&4&&{layout:{visibility:j[2]?"visible":"none"}},_[6]]):{};O&2106&&(D.$$scope={dirty:O,ctx:j}),t.$set(D);const z=O&5?ne(T,[O&1&&se(q(`${j[0]}-interventions-lines-endpoints`)),T[1],T[2],O&4&&{layout:{visibility:j[2]?"visible":"none"}}]):{};r.$set(z);const V=O&325?ne(I,[O&1&&se(q(`${j[0]}-interventions-polygons`)),O&256&&{filter:["all",ln,j[8]]},I[2],I[3],O&64&&{paint:{"fill-color":j[6],"fill-opacity":te(.2,.5)}},O&4&&{layout:{visibility:j[2]?"visible":"none"}},I[6]]):{};O&2106&&(V.$$scope={dirty:O,ctx:j}),f.$set(V);const ae=O&325?ne(N,[O&1&&se(q(`${j[0]}-interventions-polygons-outlines`)),O&256&&{filter:["all",ln,j[8]]},O&64&&{paint:{"line-color":j[6],"line-opacity":.5,"line-width":.7*Kt}},O&4&&{layout:{visibility:j[2]?"visible":"none"}}]):{};a.$set(ae)},i(j){u||(m(e.$$.fragment,j),m(t.$$.fragment,j),m(r.$$.fragment,j),m(f.$$.fragment,j),m(a.$$.fragment,j),u=!0)},o(j){g(e.$$.fragment,j),g(t.$$.fragment,j),g(r.$$.fragment,j),g(f.$$.fragment,j),g(a.$$.fragment,j),u=!1},d(j){j&&(h(l),h(n),h(s),h(i)),v(e,j),v(t,j),v(r,j),v(f,j),v(a,j)}}}function Tm(o){let e,l;return e=new wt({props:{data:o[7],$$slots:{default:[Sm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Cm(o,e,l){let t,{name:n}=e,{description:r}=e,{show:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],p=["!=",["get","endpoint"],!0];return o.$$set=_=>{"name"in _&&l(0,n=_.name),"description"in _&&l(1,r=_.description),"show"in _&&l(2,s=_.show),"schemesGj"in _&&l(3,f=_.schemesGj),"filterSchemeText"in _&&l(4,i=_.filterSchemeText),"filterInterventionText"in _&&l(5,a=_.filterInterventionText),"color"in _&&l(6,u=_.color)},o.$$.update=()=>{o.$$.dirty&8&&l(7,t=go(f))},[n,r,s,f,i,a,u,t,c,p]}class gn extends Z{constructor(e){super(),X(this,e,Cm,Tm,J,{name:0,description:1,show:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function Lm(o){return Ze(["get","intervention_type"],{area:nt.area,route:nt.route,crossing:nt.crossing,other:nt.other},"white")}function Im(o){return[["Areas",nt.area],["Routes",nt.route],["Crossings",nt.crossing],["Other",nt.other]]}function Sr(o,e,l){const t=o.slice();return t[41]=e[l],t}function Tr(o,e,l){const t=o.slice();return t[41]=e[l],t}function Cr(o,e,l){const t=o.slice();return t[41]=e[l],t}function Mm(o){let e,l;return e=new Ap({props:{loadFile:o[24]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p:K,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Lr(o){let e,l,t;function n(s){o[30](s)}let r={name:Qr,title:Kr,$$slots:{controls:[jm],help:[Om]},$$scope:{ctx:o}};return o[12]!==void 0&&(r.show=o[12]),e=new fe({props:r}),E.push(()=>B(e,"show",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){const i={};f[0]&57473|f[1]&131072&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&4096&&(l=!0,i.show=s[12],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ir(o){let e,l,t=o[41]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){d(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&8192&&t!==(t=r[41]+"")&&A(n,t)},d(r){r&&h(e)}}}function Om(o){let e,l,t,n,r,s,f;t=new Tn({props:{text:"Scheme data caveats"}});let i=me(o[13].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Ir(Cr(o,i,u));return{c(){e=y("span"),l=y("p"),b(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),w(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&8192){i=me(u[13].notes??[]);let p;for(p=0;p<i.length;p+=1){const _=Cr(u,i,p);a[p]?a[p].p(_,c):(a[p]=Ir(_),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),qe(a,u)}}}function jm(o){let e,l,t,n,r,s,f,i,a,u,c;function p(M){o[26](M)}function _(M){o[27](M)}function k(M){o[28](M)}let T={source:"ATF"};o[13]!==void 0&&(T.schemesGj=o[13]),o[14]!==void 0&&(T.filterSchemeText=o[14]),o[15]!==void 0&&(T.filterInterventionText=o[15]),l=new Mn({props:T}),E.push(()=>B(l,"schemesGj",p)),E.push(()=>B(l,"filterSchemeText",_)),E.push(()=>B(l,"filterInterventionText",k));function C(M){o[29](M)}let I={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(I.value=o[0]),f=new Wt({props:I}),E.push(()=>B(f,"value",C)),u=new Qt({props:{rows:o[7]}}),{c(){e=y("div"),b(l.$$.fragment),s=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(M,N){d(M,e,N),w(l,e,null),$(e,s),w(f,e,null),$(e,a),w(u,e,null),c=!0},p(M,N){const P={};!t&&N[0]&8192&&(t=!0,P.schemesGj=M[13],U(()=>t=!1)),!n&&N[0]&16384&&(n=!0,P.filterSchemeText=M[14],U(()=>n=!1)),!r&&N[0]&32768&&(r=!0,P.filterInterventionText=M[15],U(()=>r=!1)),l.$set(P);const j={};!i&&N[0]&1&&(i=!0,j.value=M[0],U(()=>i=!1)),f.$set(j);const O={};N[0]&128&&(O.rows=M[7]),u.$set(O)},i(M){c||(m(l.$$.fragment,M),m(f.$$.fragment,M),m(u.$$.fragment,M),c=!0)},o(M){g(l.$$.fragment,M),g(f.$$.fragment,M),g(u.$$.fragment,M),c=!1},d(M){M&&h(e),v(l),v(f),v(u)}}}function Mr(o){let e,l,t;function n(s){o[35](s)}let r={name:Zr,title:Xr,$$slots:{controls:[Pm],help:[Nm]},$$scope:{ctx:o}};return o[11]!==void 0&&(r.show=o[11]),e=new fe({props:r}),E.push(()=>B(e,"show",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){const i={};f[0]&458786|f[1]&131072&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&2048&&(l=!0,i.show=s[11],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Or(o){let e,l,t=o[41]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){d(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&65536&&t!==(t=r[41]+"")&&A(n,t)},d(r){r&&h(e)}}}function Nm(o){let e,l,t,n,r,s,f;t=new Tn({props:{text:"Scheme data caveats"}});let i=me(o[16].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Or(Tr(o,i,u));return{c(){e=y("span"),l=y("p"),b(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),w(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&65536){i=me(u[16].notes??[]);let p;for(p=0;p<i.length;p+=1){const _=Tr(u,i,p);a[p]?a[p].p(_,c):(a[p]=Or(_),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),qe(a,u)}}}function Pm(o){let e,l,t,n,r,s,f,i,a,u,c;function p(M){o[31](M)}function _(M){o[32](M)}function k(M){o[33](M)}let T={source:"LCWIP"};o[16]!==void 0&&(T.schemesGj=o[16]),o[17]!==void 0&&(T.filterSchemeText=o[17]),o[18]!==void 0&&(T.filterInterventionText=o[18]),l=new Mn({props:T}),E.push(()=>B(l,"schemesGj",p)),E.push(()=>B(l,"filterSchemeText",_)),E.push(()=>B(l,"filterInterventionText",k));function C(M){o[34](M)}let I={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(I.value=o[1]),f=new Wt({props:I}),E.push(()=>B(f,"value",C)),u=new Qt({props:{rows:o[5]}}),{c(){e=y("div"),b(l.$$.fragment),s=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(M,N){d(M,e,N),w(l,e,null),$(e,s),w(f,e,null),$(e,a),w(u,e,null),c=!0},p(M,N){const P={};!t&&N[0]&65536&&(t=!0,P.schemesGj=M[16],U(()=>t=!1)),!n&&N[0]&131072&&(n=!0,P.filterSchemeText=M[17],U(()=>n=!1)),!r&&N[0]&262144&&(r=!0,P.filterInterventionText=M[18],U(()=>r=!1)),l.$set(P);const j={};!i&&N[0]&2&&(i=!0,j.value=M[1],U(()=>i=!1)),f.$set(j);const O={};N[0]&32&&(O.rows=M[5]),u.$set(O)},i(M){c||(m(l.$$.fragment,M),m(f.$$.fragment,M),m(u.$$.fragment,M),c=!0)},o(M){g(l.$$.fragment,M),g(f.$$.fragment,M),g(u.$$.fragment,M),c=!1},d(M){M&&h(e),v(l),v(f),v(u)}}}function Rm(o){let e=Object.entries(o[13].schemes).length>0,l,t=Object.entries(o[16].schemes).length>0,n,r,s=e&&Lr(o),f=t&&Mr(o);return{c(){s&&s.c(),l=L(),f&&f.c(),n=ge()},m(i,a){s&&s.m(i,a),d(i,l,a),f&&f.m(i,a),d(i,n,a),r=!0},p(i,a){a[0]&8192&&(e=Object.entries(i[13].schemes).length>0),e?s?(s.p(i,a),a[0]&8192&&m(s,1)):(s=Lr(i),s.c(),m(s,1),s.m(l.parentNode,l)):s&&(be(),g(s,1,1,()=>{s=null}),we()),a[0]&65536&&(t=Object.entries(i[16].schemes).length>0),t?f?(f.p(i,a),a[0]&65536&&m(f,1)):(f=Mr(i),f.c(),m(f,1),f.m(n.parentNode,n)):f&&(be(),g(f,1,1,()=>{f=null}),we())},i(i){r||(m(s),m(f),r=!0)},o(i){g(s),g(f),r=!1},d(i){i&&(h(l),h(n)),s&&s.d(i),f&&f.d(i)}}}function Dm(o){let e;return{c(){e=S("Show your sketches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function jr(o){let e,l,t;function n(s){o[39](s)}let r={name:xr,title:eo,$$slots:{controls:[Fm],help:[Gm]},$$scope:{ctx:o}};return o[9]!==void 0&&(r.show=o[9]),e=new fe({props:r}),E.push(()=>B(e,"show",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){const i={};f[0]&1573896|f[1]&131072&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&512&&(l=!0,i.show=s[9],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Nr(o){let e,l,t=o[41]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){d(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&1024&&t!==(t=r[41]+"")&&A(n,t)},d(r){r&&h(e)}}}function Gm(o){let e,l,t,n,r,s,f;t=new Tn({props:{text:"Scheme data caveats"}});let i=me(o[10].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Nr(Sr(o,i,u));return{c(){e=y("span"),l=y("p"),b(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),w(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&1024){i=me(u[10].notes??[]);let p;for(p=0;p<i.length;p+=1){const _=Sr(u,i,p);a[p]?a[p].p(_,c):(a[p]=Nr(_),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),qe(a,u)}}}function Fm(o){let e,l,t,n,r,s,f,i;function a(_){o[36](_)}function u(_){o[37](_)}function c(_){o[38](_)}let p={source:"Local"};return o[10]!==void 0&&(p.schemesGj=o[10]),o[19]!==void 0&&(p.filterSchemeText=o[19]),o[20]!==void 0&&(p.filterInterventionText=o[20]),l=new Mn({props:p}),E.push(()=>B(l,"schemesGj",a)),E.push(()=>B(l,"filterSchemeText",u)),E.push(()=>B(l,"filterInterventionText",c)),f=new Qt({props:{rows:o[3]}}),{c(){e=y("div"),b(l.$$.fragment),s=L(),b(f.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(_,k){d(_,e,k),w(l,e,null),$(e,s),w(f,e,null),i=!0},p(_,k){const T={};!t&&k[0]&1024&&(t=!0,T.schemesGj=_[10],U(()=>t=!1)),!n&&k[0]&524288&&(n=!0,T.filterSchemeText=_[19],U(()=>n=!1)),!r&&k[0]&1048576&&(r=!0,T.filterInterventionText=_[20],U(()=>r=!1)),l.$set(T);const C={};k[0]&8&&(C.rows=_[3]),f.$set(C)},i(_){i||(m(l.$$.fragment,_),m(f.$$.fragment,_),i=!0)},o(_){g(l.$$.fragment,_),g(f.$$.fragment,_),i=!1},d(_){_&&h(e),v(l),v(f)}}}function Am(o){let e=Object.entries(o[10].schemes).length>0,l,t,n=e&&jr(o);return{c(){n&&n.c(),l=ge()},m(r,s){n&&n.m(r,s),d(r,l,s),t=!0},p(r,s){s[0]&1024&&(e=Object.entries(r[10].schemes).length>0),e?n?(n.p(r,s),s[0]&1024&&m(n,1)):(n=jr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n&&(be(),g(n,1,1,()=>{n=null}),we())},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n&&n.d(r)}}}function qm(o){let e=Ar()=="Private (development)",l,t,n,r,s,f,i,a,u,c,p,_,k,T=e&&Mm(o);return t=new Ge({props:{small:!0,$$slots:{default:[Rm]},$$scope:{ctx:o}}}),r=new Fr({props:{label:"Load schemes from GeoJSON",onLoad:o[24]}}),f=new uo({props:{errorMessage:o[2]}}),c=new Ee({props:{$$slots:{default:[Dm]},$$scope:{ctx:o}}}),c.$on("click",o[25]),_=new Ge({props:{small:!0,$$slots:{default:[Am]},$$scope:{ctx:o}}}),{c(){T&&T.c(),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),a=y("hr"),u=L(),b(c.$$.fragment),p=L(),b(_.$$.fragment)},m(C,I){T&&T.m(C,I),d(C,l,I),w(t,C,I),d(C,n,I),w(r,C,I),d(C,s,I),w(f,C,I),d(C,i,I),d(C,a,I),d(C,u,I),w(c,C,I),d(C,p,I),w(_,C,I),k=!0},p(C,I){e&&T.p(C,I);const M={};I[0]&522403|I[1]&131072&&(M.$$scope={dirty:I,ctx:C}),t.$set(M);const N={};I[0]&4&&(N.errorMessage=C[2]),f.$set(N);const P={};I[1]&131072&&(P.$$scope={dirty:I,ctx:C}),c.$set(P);const j={};I[0]&1574408|I[1]&131072&&(j.$$scope={dirty:I,ctx:C}),_.$set(j)},i(C){k||(m(T),m(t.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C),m(c.$$.fragment,C),m(_.$$.fragment,C),k=!0)},o(C){g(T),g(t.$$.fragment,C),g(r.$$.fragment,C),g(f.$$.fragment,C),g(c.$$.fragment,C),g(_.$$.fragment,C),k=!1},d(C){C&&(h(l),h(n),h(s),h(i),h(a),h(u),h(p)),T&&T.d(C),v(t,C),v(r,C),v(f,C),v(c,C),v(_,C)}}}function zm(o){let e,l,t,n,r,s,f,i;return e=new ot({props:{label:"Schemes",open:!0,$$slots:{default:[qm]},$$scope:{ctx:o}}}),t=new gn({props:{name:"atf",description:Kr,show:o[12],schemesGj:o[13],filterSchemeText:o[14],filterInterventionText:o[15],color:o[8]}}),r=new gn({props:{name:"lcwip",description:Xr,show:o[11],schemesGj:o[16],filterSchemeText:o[17],filterInterventionText:o[18],color:o[6]}}),f=new gn({props:{name:"local",description:eo,show:o[9],schemesGj:o[10],filterSchemeText:o[19],filterInterventionText:o[20],color:o[4]}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,s,u),w(f,a,u),i=!0},p(a,u){const c={};u[0]&2096815|u[1]&131072&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p={};u[0]&4096&&(p.show=a[12]),u[0]&8192&&(p.schemesGj=a[13]),u[0]&16384&&(p.filterSchemeText=a[14]),u[0]&32768&&(p.filterInterventionText=a[15]),u[0]&256&&(p.color=a[8]),t.$set(p);const _={};u[0]&2048&&(_.show=a[11]),u[0]&65536&&(_.schemesGj=a[16]),u[0]&131072&&(_.filterSchemeText=a[17]),u[0]&262144&&(_.filterInterventionText=a[18]),u[0]&64&&(_.color=a[6]),r.$set(_);const k={};u[0]&512&&(k.show=a[9]),u[0]&1024&&(k.schemesGj=a[10]),u[0]&524288&&(k.filterSchemeText=a[19]),u[0]&1048576&&(k.filterInterventionText=a[20]),u[0]&16&&(k.color=a[4]),f.$set(k)},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}let Qr="atf_schemes",Kr="ATF schemes",Zr="lcwip_schemes",Xr="LCWIP schemes",xr="local_schemes",eo="Your schemes";function Hm(o,e,l){let t,n,r,s,f,i,a,u,c,p,_,k,T,C,I,M,N,P;Y(o,$n,W=>l(10,u=W)),Y(o,rn,W=>l(13,_=W)),Y(o,Yl,W=>l(14,k=W)),Y(o,Wl,W=>l(15,T=W)),Y(o,cn,W=>l(16,C=W)),Y(o,Vl,W=>l(17,I=W)),Y(o,Jl,W=>l(18,M=W)),Y(o,Kl,W=>l(19,N=W)),Y(o,Ql,W=>l(20,P=W));let j="",O=ce(Qr);Y(o,O,W=>l(12,p=W));let R="fundingProgramme",D=ce(Zr);Y(o,D,W=>l(11,c=W));let z="interventionType",V=ce(xr);Y(o,V,W=>l(9,a=W));function ae(W,xe){try{qp(JSON.parse(xe),rn,cn),$t(O,p=!0,p),$t(D,c=!0,c),l(2,j="")}catch(nn){l(2,j=`The file you loaded is broken: ${nn}`)}}function F(){$t($n,u=Hp(),u),$t(V,a=!0,a)}function x(W){return W=="interventionType"?[Lm(),Im()]:W=="fundingProgramme"?[Ze(["get","funding_programme"],Vt,"grey"),Object.entries(Vt)]:W=="currentMilestone"?[Ze(["get","current_milestone"],vn,"grey"),Object.entries(vn)]:["red",[]]}function H(W){_=W,rn.set(_)}function ue(W){k=W,Yl.set(k)}function Ce(W){T=W,Wl.set(T)}function ze(W){R=W,l(0,R)}function Xe(W){p=W,O.set(p)}function Ie(W){C=W,cn.set(C)}function rt(W){I=W,Vl.set(I)}function Yt(W){M=W,Jl.set(M)}function it(W){z=W,l(1,z)}function de(W){c=W,D.set(c)}function Me(W){u=W,$n.set(u)}function Ue(W){N=W,Kl.set(N)}function at(W){P=W,Ql.set(P)}function ft(W){a=W,V.set(a)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(8,[t,n]=x(R),t,(l(7,n),l(0,R))),o.$$.dirty[0]&2&&l(6,[r,s]=x(z),r,(l(5,s),l(1,z)))},l(4,[f,i]=x("interventionType"),f,l(3,i)),[R,z,j,i,f,s,r,n,t,a,u,c,p,_,k,T,C,I,M,N,P,O,D,V,ae,F,H,ue,Ce,ze,Xe,Ie,rt,Yt,it,de,Me,Ue,at,ft]}class Em extends Z{constructor(e){super(),X(this,e,Hm,zm,J,{},null,[-1,-1])}}const Pr=Le(!0);let kn=Le(null);function Bm(o){let e,l,t,n,r,s,f,i;return e=new e$({}),t=new u$({}),r=new N$({}),f=new v$({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,s,u),w(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function Um(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[Bm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Wm(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,k;return e=new gf({}),t=new Yf({}),r=new Cf({}),f=new Gf({}),a=new zc({}),c=new bc({}),_=new Oa({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),u=L(),b(c.$$.fragment),p=L(),b(_.$$.fragment)},m(T,C){w(e,T,C),d(T,l,C),w(t,T,C),d(T,n,C),w(r,T,C),d(T,s,C),w(f,T,C),d(T,i,C),w(a,T,C),d(T,u,C),w(c,T,C),d(T,p,C),w(_,T,C),k=!0},i(T){k||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(a.$$.fragment,T),m(c.$$.fragment,T),m(_.$$.fragment,T),k=!0)},o(T){g(e.$$.fragment,T),g(t.$$.fragment,T),g(r.$$.fragment,T),g(f.$$.fragment,T),g(a.$$.fragment,T),g(c.$$.fragment,T),g(_.$$.fragment,T),k=!1},d(T){T&&(h(l),h(n),h(s),h(i),h(u),h(p)),v(e,T),v(t,T),v(r,T),v(f,T),v(a,T),v(c,T),v(_,T)}}}function Ym(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[Wm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Jm(o){let e,l,t,n,r,s;return e=new tf({}),t=new Xu({}),r=new ac({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,i){w(e,f,i),d(f,l,i),w(t,f,i),d(f,n,i),w(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}function Vm(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[Jm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qm(o){let e,l,t,n,r,s,f,i,a,u;return e=new Zi({}),t=new Ha({}),r=new ri({}),f=new Ci({}),a=new zi({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(c,p){w(e,c,p),d(c,l,p),w(t,c,p),d(c,n,p),w(r,c,p),d(c,s,p),w(f,c,p),d(c,i,p),w(a,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(r.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(s),h(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function Km(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[Qm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Zm(o){let e,l,t,n;return e=new Js({}),t=new _i({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Xm(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[Zm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function xm(o){let e,l,t,n,r,s,f,i;return e=new Uu({}),t=new ou({}),r=new Ru({}),f=new hp({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,s,u),w(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function e_(o){let e,l,t,n,r,s,f,i,a=Ar()=="Private (development)",u,c,p,_,k,T,C;e=new ap({}),t=new K$({}),r=new vu({}),f=new Mc({});let I=a&&xm();return c=new ia({}),_=new da({}),T=new Op({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),I&&I.c(),u=L(),b(c.$$.fragment),p=L(),b(_.$$.fragment),k=L(),b(T.$$.fragment)},m(M,N){w(e,M,N),d(M,l,N),w(t,M,N),d(M,n,N),w(r,M,N),d(M,s,N),w(f,M,N),d(M,i,N),I&&I.m(M,N),d(M,u,N),w(c,M,N),d(M,p,N),w(_,M,N),d(M,k,N),w(T,M,N),C=!0},p:K,i(M){C||(m(e.$$.fragment,M),m(t.$$.fragment,M),m(r.$$.fragment,M),m(f.$$.fragment,M),m(I),m(c.$$.fragment,M),m(_.$$.fragment,M),m(T.$$.fragment,M),C=!0)},o(M){g(e.$$.fragment,M),g(t.$$.fragment,M),g(r.$$.fragment,M),g(f.$$.fragment,M),g(I),g(c.$$.fragment,M),g(_.$$.fragment,M),g(T.$$.fragment,M),C=!1},d(M){M&&(h(l),h(n),h(s),h(i),h(u),h(p),h(k)),v(e,M),v(t,M),v(r,M),v(f,M),I&&I.d(M),v(c,M),v(_,M),v(T,M)}}}function t_(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[e_]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function n_(o){let e,l,t,n,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new bo({props:f}),E.push(()=>B(e,"enabled",s)),n=new ls({}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],U(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}function l_(o){let e,l;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&2?ne(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function r_(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,k,T,C,I,M,N,P,j;return l=new Em({}),n=new ot({props:{label:"Trip generators",$$slots:{default:[Um]},$$scope:{ctx:o}}}),s=new ot({props:{label:"Existing infrastructure",$$slots:{default:[Ym]},$$scope:{ctx:o}}}),i=new ot({props:{label:"Public transport",$$slots:{default:[Vm]},$$scope:{ctx:o}}}),u=new ot({props:{label:"Boundaries",$$slots:{default:[Km]},$$scope:{ctx:o}}}),p=new ot({props:{label:"Census",$$slots:{default:[Xm]},$$scope:{ctx:o}}}),k=new ot({props:{label:"Other",$$slots:{default:[t_]},$$scope:{ctx:o}}}),C=new ot({props:{label:"Tools",$$slots:{default:[n_]},$$scope:{ctx:o}}}),M=new ho({props:{disabled:!o[1]}}),P=new wt({props:{data:o[4],$$slots:{default:[l_]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment),f=L(),b(i.$$.fragment),a=L(),b(u.$$.fragment),c=L(),b(p.$$.fragment),_=L(),b(k.$$.fragment),T=L(),b(C.$$.fragment),I=L(),b(M.$$.fragment),N=L(),b(P.$$.fragment)},m(O,R){d(O,e,R),w(l,e,null),$(e,t),w(n,e,null),$(e,r),w(s,e,null),$(e,f),w(i,e,null),$(e,a),w(u,e,null),$(e,c),w(p,e,null),$(e,_),w(k,e,null),$(e,T),w(C,e,null),$(e,I),w(M,e,null),o[7](e),d(O,N,R),w(P,O,R),j=!0},p(O,[R]){const D={};R&256&&(D.$$scope={dirty:R,ctx:O}),n.$set(D);const z={};R&256&&(z.$$scope={dirty:R,ctx:O}),s.$set(z);const V={};R&256&&(V.$$scope={dirty:R,ctx:O}),i.$set(V);const ae={};R&256&&(ae.$$scope={dirty:R,ctx:O}),u.$set(ae);const F={};R&256&&(F.$$scope={dirty:R,ctx:O}),p.$set(F);const x={};R&256&&(x.$$scope={dirty:R,ctx:O}),k.$set(x);const H={};R&265&&(H.$$scope={dirty:R,ctx:O}),C.$set(H);const ue={};R&2&&(ue.disabled=!O[1]),M.$set(ue);const Ce={};R&258&&(Ce.$$scope={dirty:R,ctx:O}),P.$set(Ce)},i(O){j||(m(l.$$.fragment,O),m(n.$$.fragment,O),m(s.$$.fragment,O),m(i.$$.fragment,O),m(u.$$.fragment,O),m(p.$$.fragment,O),m(k.$$.fragment,O),m(C.$$.fragment,O),m(M.$$.fragment,O),m(P.$$.fragment,O),j=!0)},o(O){g(l.$$.fragment,O),g(n.$$.fragment,O),g(s.$$.fragment,O),g(i.$$.fragment,O),g(u.$$.fragment,O),g(p.$$.fragment,O),g(k.$$.fragment,O),g(C.$$.fragment,O),g(M.$$.fragment,O),g(P.$$.fragment,O),j=!1},d(O){O&&(h(e),h(N)),v(l),v(n),v(s),v(i),v(u),v(p),v(k),v(C),v(M),o[7](null),v(P,O)}}}function o_(o,e,l){let t,n,r,s;Y(o,Pr,c=>l(1,n=c)),Y(o,kn,c=>l(2,r=c)),Y(o,un,c=>l(3,s=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>$o(c,lo(dn))};function a(c){t=c,l(0,t),l(1,n)}function u(c){E[c?"unshift":"push"](()=>{r=c,kn.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&Pr.set(!t)},[t,n,r,s,f,i,a,u]}class s_ extends Z{constructor(e){super(),X(this,e,o_,r_,J,{})}}function i_(o){let e,l,t;return{c(){e=y("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=y("div")},m(n,r){d(n,e,r),d(n,l,r),d(n,t,r),o[3](t)},p:K,i:K,o:K,d(n){n&&(h(e),h(l),h(t)),o[3](null)}}}function a_(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function f_(o,e,l){let t,n;Y(o,wn,f=>l(1,t=f)),Y(o,Zt,f=>l(2,n=f));let r=null;function s(f){E[f?"unshift":"push"](()=>{r=f,l(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&a_(r,n,t)},[r,t,n,s]}class u_ extends Z{constructor(e){super(),X(this,e,f_,i_,J,{})}}function c_(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,k,T;return l=new Oo({}),n=new Co({}),f=new Lo({}),p=new as({props:{boundaryGeojson:o[3]}}),{c(){e=y("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),s=y("div"),b(f.$$.fragment),i=L(),a=y("div"),u=y("h1"),u.textContent="Scheme Browser",c=L(),b(p.$$.fragment),_=L(),k=y("div"),le(s,"border-bottom","1px solid #b1b4b6"),le(a,"display","flex"),le(a,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(C,I){d(C,e,I),w(l,e,null),$(e,t),w(n,e,null),$(e,r),$(e,s),w(f,s,null),$(e,i),$(e,a),$(a,u),$(a,c),w(p,a,null),$(e,_),$(e,k),o[6](k),T=!0},p(C,I){const M={};I&8&&(M.boundaryGeojson=C[3]),p.$set(M)},i(C){T||(m(l.$$.fragment,C),m(n.$$.fragment,C),m(f.$$.fragment,C),m(p.$$.fragment,C),T=!0)},o(C){g(l.$$.fragment,C),g(n.$$.fragment,C),g(f.$$.fragment,C),g(p.$$.fragment,C),T=!1},d(C){C&&h(e),v(l),v(n),v(f),v(p),o[6](null)}}}function Rr(o){let e,l;return e=new s_({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function $_(o){let e,l,t,n;e=new wo({});let r=o[2]&&Rr();return{c(){b(e.$$.fragment),l=L(),r&&r.c(),t=ge()},m(s,f){w(e,s,f),d(s,l,f),r&&r.m(s,f),d(s,t,f),n=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=Rr(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(be(),g(r,1,1,()=>{r=null}),we())},i(s){n||(m(e.$$.fragment,s),m(r),n=!0)},o(s){g(e.$$.fragment,s),g(r),n=!1},d(s){s&&(h(l),h(t)),v(e,s),r&&r.d(s)}}}function p_(o){let e,l,t;return l=new Io({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[$_]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),G(e,"slot","main")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&2&&(s.style=n[1]),r&260&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function m_(o){let e,l,t,n,r;return e=new Fo({props:{$$slots:{main:[p_],sidebar:[c_]},$$scope:{ctx:o}}}),n=new u_({}),{c(){b(e.$$.fragment),l=L(),t=y("div"),b(n.$$.fragment),G(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){w(e,s,f),d(s,l,f),d(s,t,f),w(n,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),r=!1},d(s){s&&(h(l),h(t)),v(e,s),v(n)}}}function __(o,e,l){let t,n,r,s,f;Y(o,kn,c=>l(4,t=c)),Y(o,un,c=>l(5,n=c)),Y(o,dn,c=>l(1,r=c)),Y(o,Yn,c=>l(2,s=c)),Y(o,rn,c=>l(3,f=c)),Gr(()=>{ro()});const i=new URLSearchParams(window.location.search);dn.set(i.get("style")||"dataviz");let a;function u(c){E[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&Yn.set(n),o.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,n,u]}class g_ extends Z{constructor(e){super(),X(this,e,__,m_,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new g_({target:document.getElementById("app")});
