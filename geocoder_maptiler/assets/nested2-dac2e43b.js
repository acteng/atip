import{S as K,i as X,s as V,aH as $t,h as D,j as m,k as w,D as q,o as _,e as A,d as O,u as y,aI as pt,w as $e,B as U,aD as un,aS as ft,C as Se,aJ as qt,g as h,aT as Gn,m as b,v as rn,aU as Wl,t as g,aq as ie,n as d,ar as ae,aK as Vt,aL as Kt,aM as Xt,p as v,aV as Gl,a1 as cn,b as Y,aA as Fe,aN as Yr,aO as Jr,_ as Ce,q as Qe,A as Ft,r as jt,aW as Ul,aX as Tn,ay as zl,c as ee,l as te,aY as Qr,aZ as ql,a_ as Un,a$ as Vl,b0 as Kl,b1 as Xl,f as Nn,am as Zl,ao as xr,F as el,a as Gt,b2 as Cn,K as G,N as ne,x as Ln,a9 as Yl,aR as J,an as We,aB as ln,b3 as de,b4 as Te,Z as re,b5 as oe,R as tl,b6 as Dn,b7 as Fn,E as nl,b8 as zn,J as Jl,aG as qn,Y as Ql,X as Vn,W as Kn,V as en,aQ as Xn,L as xl,M as eo,y as to}from"./index-17cced25.js";import{e as on,C as Re,b as Zt,d as ce,c as rl,a as sn,B as no,S as ro,l as Rt,L as lo}from"./StreetViewController-2f70ea3a.js";import{c as oo,e as Zn,i as ll,L as ve,l as so,j as Ie,C as mt,Z as io}from"./index-15e372ea.js";import{L as ao,G as Bt,h as x,a as rt,F as fo}from"./GeoJSON-353be2dc.js";import{P as fe}from"./Popup-10704c35.js";function uo(r){let e,n;return{c(){e=$t("svg"),n=$t("path"),D(n,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),D(e,"viewBox","0 0 60.006 21.412"),D(e,"width","14"),D(e,"height","20"),D(e,"class","svelte-en2qvf")},m(t,l){m(t,e,l),w(e,n)},p:q,i:q,o:q,d(t){t&&_(e)}}}class co extends K{constructor(e){super(),X(this,e,null,uo,V,{})}}function po(r){let e,n;return{c(){e=A("img"),Se(e.src,n=r[3]+"area.svg")||D(e,"src",n),D(e,"alt",r[6]),D(e,"class","svelte-ltkwvy")},m(t,l){m(t,e,l)},p(t,l){l&8&&!Se(e.src,n=t[3]+"area.svg")&&D(e,"src",n),l&64&&D(e,"alt",t[6])},d(t){t&&_(e)}}}function $o(r){let e,n;return{c(){e=A("img"),Se(e.src,n=r[3]+"poi.svg")||D(e,"src",n),D(e,"alt",r[6]),D(e,"class","svelte-ltkwvy")},m(t,l){m(t,e,l)},p(t,l){l&8&&!Se(e.src,n=t[3]+"poi.svg")&&D(e,"src",n),l&64&&D(e,"alt",t[6])},d(t){t&&_(e)}}}function mo(r){let e,n;return{c(){e=A("img"),Se(e.src,n=r[3]+"postal_code.svg")||D(e,"src",n),D(e,"alt",r[6]),D(e,"class","svelte-ltkwvy")},m(t,l){m(t,e,l)},p(t,l){l&8&&!Se(e.src,n=t[3]+"postal_code.svg")&&D(e,"src",n),l&64&&D(e,"alt",t[6])},d(t){t&&_(e)}}}function _o(r){let e,n;return{c(){e=A("img"),Se(e.src,n=r[3]+"street.svg")||D(e,"src",n),D(e,"alt",r[6]),D(e,"class","svelte-ltkwvy")},m(t,l){m(t,e,l)},p(t,l){l&8&&!Se(e.src,n=t[3]+"street.svg")&&D(e,"src",n),l&64&&D(e,"alt",t[6])},d(t){t&&_(e)}}}function go(r){let e,n;return{c(){e=A("img"),Se(e.src,n=r[3]+"road.svg")||D(e,"src",n),D(e,"alt",r[6]),D(e,"class","svelte-ltkwvy")},m(t,l){m(t,e,l)},p(t,l){l&8&&!Se(e.src,n=t[3]+"road.svg")&&D(e,"src",n),l&64&&D(e,"alt",t[6])},d(t){t&&_(e)}}}function ho(r){let e,n;return{c(){e=A("img"),Se(e.src,n=r[3]+"housenumber.svg")||D(e,"src",n),D(e,"alt",r[6]),D(e,"class","svelte-ltkwvy")},m(t,l){m(t,e,l)},p(t,l){l&8&&!Se(e.src,n=t[3]+"housenumber.svg")&&D(e,"src",n),l&64&&D(e,"alt",t[6])},d(t){t&&_(e)}}}function bo(r){let e,n,t,l;return{c(){e=A("img"),Se(e.src,n=r[5])||D(e,"src",n),D(e,"alt",r[4]),D(e,"class","svelte-ltkwvy")},m(o,i){m(o,e,i),t||(l=$e(e,"error",r[12]),t=!0)},p(o,i){i&32&&!Se(e.src,n=o[5])&&D(e,"src",n),i&16&&D(e,"alt",o[4])},d(o){o&&_(e),t=!1,l()}}}function Yn(r){let e,n;return{c(){e=A("span"),n=y(r[6]),D(e,"class","secondary svelte-ltkwvy")},m(t,l){m(t,e,l),w(e,n)},p(t,l){l&64&&U(n,t[6])},d(t){t&&_(e)}}}function vo(r){var N,I;let e,n,t,l,o,i,u,s,a=r[0].place_name.replace(/,.*/,"")+"",f,c,p=r[2]==="always"||r[2]&&!r[0].address&&((N=r[0].properties)==null?void 0:N.kind)!=="road"&&((I=r[0].properties)==null?void 0:I.kind)!=="road_relation"&&!r[0].id.startsWith("address.")&&!r[0].id.startsWith("postal_code.")&&(!r[0].id.startsWith("poi.")||!r[5]),$,T,k=r[0].place_name.replace(/[^,]*,?\s*/,"")+"",C,S,P;function j(E,W){var R,H;return W&1&&(n=null),W&1&&(t=null),W&1&&(l=null),E[5]?bo:E[0].address?ho:((R=E[0].properties)==null?void 0:R.kind)==="road"||((H=E[0].properties)==null?void 0:H.kind)==="road_relation"?go:(n==null&&(n=!!E[0].id.startsWith("address.")),n?_o:(t==null&&(t=!!E[0].id.startsWith("postal_code.")),t?mo:(l==null&&(l=!!E[0].id.startsWith("poi.")),l?$o:po)))}let B=j(r,-1),L=B(r),M=p&&Yn(r);return{c(){e=A("li"),L.c(),o=O(),i=A("span"),u=A("span"),s=A("span"),f=y(a),c=O(),M&&M.c(),$=O(),T=A("span"),C=y(k),D(s,"class","primary svelte-ltkwvy"),D(u,"class","svelte-ltkwvy"),D(T,"class","line2 svelte-ltkwvy"),D(i,"class","texts svelte-ltkwvy"),D(e,"tabindex","0"),D(e,"data-selected",r[1]),D(e,"class","svelte-ltkwvy"),pt(e,"selected",r[1])},m(E,W){m(E,e,W),L.m(e,null),w(e,o),w(e,i),w(i,u),w(u,s),w(s,f),w(u,c),M&&M.m(u,null),w(i,$),w(i,T),w(T,C),S||(P=[$e(e,"mouseenter",r[10]),$e(e,"focus",r[11])],S=!0)},p(E,[W]){var R,H;B===(B=j(E,W))&&L?L.p(E,W):(L.d(1),L=B(E),L&&(L.c(),L.m(e,o))),W&1&&a!==(a=E[0].place_name.replace(/,.*/,"")+"")&&U(f,a),W&37&&(p=E[2]==="always"||E[2]&&!E[0].address&&((R=E[0].properties)==null?void 0:R.kind)!=="road"&&((H=E[0].properties)==null?void 0:H.kind)!=="road_relation"&&!E[0].id.startsWith("address.")&&!E[0].id.startsWith("postal_code.")&&(!E[0].id.startsWith("poi.")||!E[5])),p?M?M.p(E,W):(M=Yn(E),M.c(),M.m(u,null)):M&&(M.d(1),M=null),W&1&&k!==(k=E[0].place_name.replace(/[^,]*,?\s*/,"")+"")&&U(C,k),W&2&&D(e,"data-selected",E[1]),W&2&&pt(e,"selected",E[1])},i:q,o:q,d(E){E&&_(e),L.d(),M&&M.d(),S=!1,un(P)}}}function wo(r,e,n){var S;let t,l,{feature:o}=e,{selected:i=!1}=e,{showPlaceType:u}=e,{missingIconsCache:s}=e,{iconsBaseUrl:a}=e;const f=(S=o.properties)==null?void 0:S.categories;let c,p;function $(P){p&&s.add(p),n(9,t--,t)}function T(P){ft.call(this,r,P)}function k(P){ft.call(this,r,P)}const C=P=>$(P.currentTarget);return r.$$set=P=>{"feature"in P&&n(0,o=P.feature),"selected"in P&&n(1,i=P.selected),"showPlaceType"in P&&n(2,u=P.showPlaceType),"missingIconsCache"in P&&n(8,s=P.missingIconsCache),"iconsBaseUrl"in P&&n(3,a=P.iconsBaseUrl)},r.$$.update=()=>{var P,j,B,L;if(r.$$.dirty&824)do n(9,t--,t),n(4,c=f==null?void 0:f[t]),n(5,p=c?a+c.replace(/ /g,"_")+".svg":void 0);while(t>-1&&(!p||s.has(p)));r.$$.dirty&1&&n(6,l=o.id.startsWith("poi.")?(j=(P=o.properties)==null?void 0:P.categories)==null?void 0:j.join(", "):((L=(B=o.properties)==null?void 0:B.place_type_name)==null?void 0:L[0])??o.place_type[0])},n(9,t=(f==null?void 0:f.length)??0),[o,i,u,a,c,p,l,$,s,t,T,k,C]}class yo extends K{constructor(e){super(),X(this,e,wo,vo,V,{feature:0,selected:1,showPlaceType:2,missingIconsCache:8,iconsBaseUrl:3})}}function ko(r){let e;return{c(){e=A("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',D(e,"class","svelte-7cmwmc")},m(n,t){m(n,e,t)},p:q,i:q,o:q,d(n){n&&_(e)}}}class So extends K{constructor(e){super(),X(this,e,null,ko,V,{})}}function To(r){let e,n;return{c(){e=$t("svg"),n=$t("path"),D(n,"d","M13.101 14.261 8.74 9.899a4.797 4.797 0 0 1-1.425.748 5.165 5.165 0 0 1-1.603.248c-1.446 0-2.677-.5-3.693-1.503S.495 7.164.495 5.717c0-1.446.508-2.678 1.524-3.693C3.035 1.008 4.266.5 5.712.5c1.448 0 2.672.508 3.675 1.524 1.002 1.015 1.503 2.247 1.503 3.693 0 .558-.08 1.092-.239 1.603-.159.512-.411.98-.757 1.405l4.382 4.4a.74.74 0 0 1 .229.568.81.81 0 0 1-.249.568.787.787 0 0 1-.577.239.787.787 0 0 1-.578-.239ZM5.712 9.223c.97 0 1.796-.342 2.48-1.026a3.378 3.378 0 0 0 1.026-2.48c0-.982-.34-1.818-1.016-2.509-.677-.69-1.507-1.035-2.49-1.035a3.42 3.42 0 0 0-2.509 1.035 3.42 3.42 0 0 0-1.035 2.51c0 .982.345 1.812 1.035 2.488.691.678 1.527 1.017 2.51 1.017Z"),D(e,"width","14"),D(e,"height","14"),D(e,"viewBox","0 0 15 15"),D(e,"class","svelte-en2qvf")},m(t,l){m(t,e,l),w(e,n)},p:q,i:q,o:q,d(t){t&&_(e)}}}class Co extends K{constructor(e){super(),X(this,e,null,To,V,{})}}function Lo(r){let e,n;return{c(){e=$t("svg"),n=$t("path"),D(n,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),D(e,"viewBox","0 0 14 14"),D(e,"width","13"),D(e,"height","13"),D(e,"class","svelte-en2qvf")},m(t,l){m(t,e,l),w(e,n)},p:q,i:q,o:q,d(t){t&&_(e)}}}class ol extends K{constructor(e){super(),X(this,e,null,Lo,V,{})}}function Ao(r){let e,n;return{c(){e=$t("svg"),n=$t("path"),D(n,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),D(e,"viewBox","0 0 30 30"),D(e,"fill","none"),D(e,"xmlns","http://www.w3.org/2000/svg"),D(e,"class","svelte-d2loi5")},m(t,l){m(t,e,l),w(e,n)},p:q,i:q,o:q,d(t){t&&_(e)}}}class sl extends K{constructor(e){super(),X(this,e,null,Ao,V,{})}}function Jn(r,e,n){const t=r.slice();return t[75]=e[n],t[77]=n,t}function Qn(r){let e,n;return e=new So({}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xn(r){let e,n,t,l,o;return n=new co({}),{c(){e=A("button"),h(n.$$.fragment),D(e,"type","button"),D(e,"title",r[9]),D(e,"class","svelte-1r7dvt7"),pt(e,"active",r[0])},m(i,u){m(i,e,u),b(n,e,null),t=!0,l||(o=$e(e,"click",r[61]),l=!0)},p(i,u){(!t||u[0]&512)&&D(e,"title",i[9]),(!t||u[0]&1)&&pt(e,"active",i[0])},i(i){t||(g(n.$$.fragment,i),t=!0)},o(i){d(n.$$.fragment,i),t=!1},d(i){i&&_(e),v(n),l=!1,o()}}}function Oo(r){let e,n=[],t=new Map,l,o,i,u=Fe(r[13]);const s=a=>a[75].id+(a[75].address?","+a[75].address:"");for(let a=0;a<u.length;a+=1){let f=Jn(r,u,a),c=s(f);t.set(c,n[a]=er(c,f))}return{c(){e=A("ul");for(let a=0;a<n.length;a+=1)n[a].c();D(e,"class","svelte-1r7dvt7")},m(a,f){m(a,e,f);for(let c=0;c<n.length;c+=1)n[c]&&n[c].m(e,null);l=!0,o||(i=[$e(e,"mouseleave",r[65]),$e(e,"blur",r[66])],o=!0)},p(a,f){f[0]&8940544&&(u=Fe(a[13]),ie(),n=Yr(n,f,s,1,a,u,t,e,Jr,er,null,Jn),ae())},i(a){if(!l){for(let f=0;f<u.length;f+=1)g(n[f]);l=!0}},o(a){for(let f=0;f<n.length;f+=1)d(n[f]);l=!1},d(a){a&&_(e);for(let f=0;f<n.length;f+=1)n[f].d();o=!1,un(i)}}}function Po(r){let e,n,t,l,o,i;return n=new sl({}),{c(){e=A("div"),h(n.$$.fragment),t=O(),l=A("div"),o=y(r[7]),D(l,"class","svelte-1r7dvt7"),D(e,"class","no-results svelte-1r7dvt7")},m(u,s){m(u,e,s),b(n,e,null),w(e,t),w(e,l),w(l,o),i=!0},p(u,s){(!i||s[0]&128)&&U(o,u[7])},i(u){i||(g(n.$$.fragment,u),i=!0)},o(u){d(n.$$.fragment,u),i=!1},d(u){u&&_(e),v(n)}}}function Mo(r){let e="",n;return{c(){n=y(e)},m(t,l){m(t,n,l)},p:q,i:q,o:q,d(t){t&&_(n)}}}function Eo(r){let e,n,t,l,o,i,u,s,a,f,c;return n=new sl({}),s=new ol({}),{c(){e=A("div"),h(n.$$.fragment),t=O(),l=A("div"),o=y(r[6]),i=O(),u=A("button"),h(s.$$.fragment),D(l,"class","svelte-1r7dvt7"),D(u,"class","svelte-1r7dvt7"),D(e,"class","error svelte-1r7dvt7")},m(p,$){m(p,e,$),b(n,e,null),w(e,t),w(e,l),w(l,o),w(e,i),w(e,u),b(s,u,null),a=!0,f||(c=$e(u,"click",r[62]),f=!0)},p(p,$){(!a||$[0]&64)&&U(o,p[6])},i(p){a||(g(n.$$.fragment,p),g(s.$$.fragment,p),a=!0)},o(p){d(n.$$.fragment,p),d(s.$$.fragment,p),a=!1},d(p){p&&_(e),v(n),v(s),f=!1,c()}}}function er(r,e){let n,t,l;function o(){return e[63](e[77])}function i(){return e[64](e[75])}return t=new yo({props:{feature:e[75],showPlaceType:e[10],selected:e[14]===e[77],missingIconsCache:e[19],iconsBaseUrl:e[11]}}),t.$on("mouseenter",o),t.$on("focus",i),{key:r,first:null,c(){n=Ce(),h(t.$$.fragment),this.first=n},m(u,s){m(u,n,s),b(t,u,s),l=!0},p(u,s){e=u;const a={};s[0]&8192&&(a.feature=e[75]),s[0]&1024&&(a.showPlaceType=e[10]),s[0]&24576&&(a.selected=e[14]===e[77]),s[0]&2048&&(a.iconsBaseUrl=e[11]),t.$set(a)},i(u){l||(g(t.$$.fragment,u),l=!0)},o(u){d(t.$$.fragment,u),l=!1},d(u){u&&_(n),v(t,u)}}}function Io(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,T,k,C,S,P,j,B;l=new Co({}),f=new ol({});let L=r[18]&&Qn(),M=r[5]===!0&&xn(r);const N=r[53].default,I=qt(N,r,r[52],null),E=[Eo,Mo,Po,Oo],W=[];function R(H,z){var pe,Le;return H[17]?0:H[15]?((pe=H[13])==null?void 0:pe.length)===0?2:H[15]&&((Le=H[13])!=null&&Le.length)?3:-1:1}return~(k=R(r))&&(C=W[k]=E[k](r)),{c(){e=A("form"),n=A("div"),t=A("button"),h(l.$$.fragment),o=O(),i=A("input"),u=O(),s=A("div"),a=A("button"),h(f.$$.fragment),c=O(),L&&L.c(),p=O(),M&&M.c(),$=O(),I&&I.c(),T=O(),C&&C.c(),D(t,"class","search-button svelte-1r7dvt7"),D(t,"type","button"),D(i,"placeholder",r[8]),D(i,"aria-label",r[8]),D(i,"class","svelte-1r7dvt7"),D(a,"type","button"),D(a,"title",r[3]),D(a,"class","svelte-1r7dvt7"),D(s,"class","clear-button-container svelte-1r7dvt7"),pt(s,"displayable",r[1]!==""),D(n,"class","input-group svelte-1r7dvt7"),D(e,"tabindex","0"),D(e,"class",S=Gn(r[2])+" svelte-1r7dvt7"),pt(e,"can-collapse",r[4]&&r[1]==="")},m(H,z){m(H,e,z),w(e,n),w(n,t),b(l,t,null),w(n,o),w(n,i),r[55](i),rn(i,r[1]),w(n,u),w(n,s),w(s,a),b(f,a,null),w(s,c),L&&L.m(s,null),w(n,p),M&&M.m(n,null),w(n,$),I&&I.m(n,null),w(e,T),~k&&W[k].m(e,null),P=!0,j||(B=[$e(t,"click",r[54]),$e(i,"input",r[56]),$e(i,"focus",r[57]),$e(i,"blur",r[58]),$e(i,"keydown",r[21]),$e(i,"input",r[59]),$e(a,"click",r[60]),$e(e,"submit",Wl(r[20]))],j=!0)},p(H,z){(!P||z[0]&256)&&D(i,"placeholder",H[8]),(!P||z[0]&256)&&D(i,"aria-label",H[8]),z[0]&2&&i.value!==H[1]&&rn(i,H[1]),(!P||z[0]&8)&&D(a,"title",H[3]),H[18]?L?z[0]&262144&&g(L,1):(L=Qn(),L.c(),g(L,1),L.m(s,null)):L&&(ie(),d(L,1,1,()=>{L=null}),ae()),(!P||z[0]&2)&&pt(s,"displayable",H[1]!==""),H[5]===!0?M?(M.p(H,z),z[0]&32&&g(M,1)):(M=xn(H),M.c(),g(M,1),M.m(n,$)):M&&(ie(),d(M,1,1,()=>{M=null}),ae()),I&&I.p&&(!P||z[1]&2097152)&&Vt(I,N,H,H[52],P?Xt(N,H[52],z,null):Kt(H[52]),null);let pe=k;k=R(H),k===pe?~k&&W[k].p(H,z):(C&&(ie(),d(W[pe],1,1,()=>{W[pe]=null}),ae()),~k?(C=W[k],C?C.p(H,z):(C=W[k]=E[k](H),C.c()),g(C,1),C.m(e,null)):C=null),(!P||z[0]&4&&S!==(S=Gn(H[2])+" svelte-1r7dvt7"))&&D(e,"class",S),(!P||z[0]&22)&&pt(e,"can-collapse",H[4]&&H[1]==="")},i(H){P||(g(l.$$.fragment,H),g(f.$$.fragment,H),g(L),g(M),g(I,H),g(C),P=!0)},o(H){d(l.$$.fragment,H),d(f.$$.fragment,H),d(L),d(M),d(I,H),d(C),P=!1},d(H){H&&_(e),v(l),r[55](null),v(f),L&&L.d(),M&&M.d(),I&&I.d(H),~k&&W[k].d(),j=!1,un(B)}}}function No(r,e,n){const t=e[1],l=e[0],o=t-l;return r===t&&n?r:((r-l)%o+o)%o+l}function tr(r){let e=[...r];return e[2]<e[0]&&(e[2]+=360),e}function Do(r,e,n){let t,{$$slots:l={},$$scope:o}=e,{class:i=void 0}=e,{apiKey:u}=e,{bbox:s=void 0}=e,{clearButtonTitle:a="clear"}=e,{clearOnBlur:f=!1}=e,{collapsed:c=!1}=e,{country:p=void 0}=e,{debounceSearch:$=200}=e,{enableReverse:T=!1}=e,{errorMessage:k="Something went wrong…"}=e,{filter:C=()=>!0}=e,{flyTo:S=!0}=e,{fuzzyMatch:P=!0}=e,{language:j=void 0}=e,{limit:B=void 0}=e,{mapController:L=void 0}=e,{minLength:M=2}=e,{noResultsMessage:N="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:I="Search"}=e,{proximity:E=void 0}=e,{reverseActive:W=T==="always"}=e,{reverseButtonTitle:R="toggle reverse geocoding"}=e,{searchValue:H=""}=e,{showFullGeometry:z=!0}=e,{showPlaceType:pe="ifNeeded"}=e,{showResultsWhileTyping:Le=!0}=e,{trackProximity:he=!0}=e,{types:ke=void 0}=e,{zoom:Ge=16}=e,{maxZoom:Ne=18}=e,{apiUrl:be="https://api.maptiler.com/geocoding"}=e,{fetchParameters:et={}}=e,{iconsBaseUrl:De="https://cdn.maptiler.com/maptiler-geocoding-control/v0.0.99/icons/"}=e;function Ue(){ze.focus()}function tt(){ze.blur()}function ot(F,ge=!0){n(1,H=F),ge?(n(14,_e=-1),Hn()):(mn(),setTimeout(()=>{ze.focus(),ze.select()}))}let Ae=!1,Q,ue,Z,Oe="",ze,_e=-1,qe,Qt=[],dt,kt,xt,pn;const Sl=new Set,st=Gl();cn(()=>{L&&(L.setEventHandler(void 0),L.indicateReverse(!1),L.setSelectedMarker(-1),L.setMarkers(void 0,void 0))});function Hn(F){if(kt&&(clearTimeout(kt),kt=void 0),_e>-1&&Q)n(49,Z=Q[_e]),n(1,H=Z.place_name.replace(/,.*/,"")),n(17,qe=void 0),n(48,ue=void 0),n(14,_e=-1);else if(H){const ge=F||!Wn();$n(H,{exact:!0}).then(()=>{n(48,ue=Q),n(49,Z=void 0),ge&&Tl()}).catch(Ve=>n(17,qe=Ve))}}function Wn(){return/^-?\d+(\.\d+)?,-?\d+(\.\d+)?$/.test(H)}async function $n(F,{byId:ge=!1,exact:Ve=!1}={}){n(17,qe=void 0);const St=Wn(),Pe=new URLSearchParams;j!=null&&Pe.set("language",Array.isArray(j)?j.join(","):j),ke&&Pe.set("types",ke.join(",")),St||(s&&Pe.set("bbox",s.map(it=>it.toFixed(6)).join(",")),p&&Pe.set("country",Array.isArray(p)?p.join(","):p)),ge||(E&&Pe.set("proximity",E.map(it=>it.toFixed(6)).join(",")),(Ve||!Le)&&Pe.set("autocomplete","false"),Pe.set("fuzzyMatch",String(P))),B!==void 0&&(!St||(ke==null?void 0:ke.length)===1)&&Pe.set("limit",String(B)),Pe.set("key",u);const ht=be+"/"+encodeURIComponent(F)+".json?"+Pe.toString();if(ht===Oe){ge?(n(13,Q=void 0),n(49,Z=Qt[0])):n(13,Q=Qt);return}Oe=ht,dt==null||dt.abort();const ye=new AbortController;n(18,dt=ye);let gn;try{gn=await fetch(ht,{signal:ye.signal,...et}).finally(()=>{ye===dt&&n(18,dt=void 0)})}catch(it){if(it&&typeof it=="object"&&"name"in it&&it.name==="AbortError")return;throw new Error}if(!gn.ok)throw new Error;const dn=await gn.json();st("response",{url:ht,featureCollection:dn}),ge?(n(13,Q=void 0),n(49,Z=dn.features[0]),Qt=[Z]):(n(13,Q=dn.features.filter(C)),Qt=Q,St&&ze.focus())}function Tl(){var Ve,St,Pe,ht;if(!(ue!=null&&ue.length)||!S)return;const F=[180,90,-180,-90],ge=!ue.some(ye=>!ye.matching_text);for(const ye of ue)(ge||!ye.matching_text)&&(F[0]=Math.min(F[0],((Ve=ye.bbox)==null?void 0:Ve[0])??ye.center[0]),F[1]=Math.min(F[1],((St=ye.bbox)==null?void 0:St[1])??ye.center[1]),F[2]=Math.max(F[2],((Pe=ye.bbox)==null?void 0:Pe[2])??ye.center[0]),F[3]=Math.max(F[3],((ht=ye.bbox)==null?void 0:ht[3])??ye.center[1]));L&&ue.length>0&&(Z&&F[0]===F[2]&&F[1]===F[3]?L.flyTo(Z.center,Ge):L.fitBounds(tr(F),50,Ne))}function Cl(F){n(0,W=T==="always"),ot(No(F[0],[-180,180],!0).toFixed(6)+","+F[1].toFixed(6))}function Ll(F){if(!Q)return;let ge=F.key==="ArrowDown"?1:F.key==="ArrowUp"?-1:0;ge?(_e===-1&&ge===-1&&n(14,_e=Q.length),n(14,_e+=ge),_e>=Q.length&&n(14,_e=-1),F.preventDefault()):["ArrowLeft","ArrowRight","Home","End"].includes(F.key)&&n(14,_e=-1)}function mn(F=!0){if(n(17,qe=void 0),Le){if(kt&&clearTimeout(kt),H.length<M)return;const ge=H;kt=window.setTimeout(()=>{$n(ge).catch(Ve=>n(17,qe=Ve))},F?$:0)}else n(13,Q=void 0),n(17,qe=void 0)}function _n(F){n(49,Z=F),n(1,H=F.place_name),n(14,_e=-1)}const Al=()=>ze.focus();function Ol(F){Y[F?"unshift":"push"](()=>{ze=F,n(16,ze)})}function Pl(){H=this.value,n(1,H),n(12,Ae),n(27,f)}const Ml=()=>n(12,Ae=!0),El=()=>n(12,Ae=!1),Il=()=>mn(),Nl=()=>{n(1,H=""),ze.focus()},Dl=()=>n(0,W=!W),Fl=()=>n(17,qe=void 0),jl=F=>n(14,_e=F),Bl=F=>_n(F),Rl=()=>n(14,_e=-1),Hl=()=>{};return r.$$set=F=>{"class"in F&&n(2,i=F.class),"apiKey"in F&&n(25,u=F.apiKey),"bbox"in F&&n(26,s=F.bbox),"clearButtonTitle"in F&&n(3,a=F.clearButtonTitle),"clearOnBlur"in F&&n(27,f=F.clearOnBlur),"collapsed"in F&&n(4,c=F.collapsed),"country"in F&&n(28,p=F.country),"debounceSearch"in F&&n(29,$=F.debounceSearch),"enableReverse"in F&&n(5,T=F.enableReverse),"errorMessage"in F&&n(6,k=F.errorMessage),"filter"in F&&n(30,C=F.filter),"flyTo"in F&&n(31,S=F.flyTo),"fuzzyMatch"in F&&n(32,P=F.fuzzyMatch),"language"in F&&n(33,j=F.language),"limit"in F&&n(34,B=F.limit),"mapController"in F&&n(35,L=F.mapController),"minLength"in F&&n(36,M=F.minLength),"noResultsMessage"in F&&n(7,N=F.noResultsMessage),"placeholder"in F&&n(8,I=F.placeholder),"proximity"in F&&n(24,E=F.proximity),"reverseActive"in F&&n(0,W=F.reverseActive),"reverseButtonTitle"in F&&n(9,R=F.reverseButtonTitle),"searchValue"in F&&n(1,H=F.searchValue),"showFullGeometry"in F&&n(37,z=F.showFullGeometry),"showPlaceType"in F&&n(10,pe=F.showPlaceType),"showResultsWhileTyping"in F&&n(38,Le=F.showResultsWhileTyping),"trackProximity"in F&&n(39,he=F.trackProximity),"types"in F&&n(40,ke=F.types),"zoom"in F&&n(41,Ge=F.zoom),"maxZoom"in F&&n(42,Ne=F.maxZoom),"apiUrl"in F&&n(43,be=F.apiUrl),"fetchParameters"in F&&n(44,et=F.fetchParameters),"iconsBaseUrl"in F&&n(11,De=F.iconsBaseUrl),"$$scope"in F&&n(52,o=F.$$scope)},r.$$.update=()=>{if(r.$$.dirty[1]&256&&(he||n(24,E=void 0)),r.$$.dirty[0]&134221824&&setTimeout(()=>{n(15,xt=Ae),f&&!Ae&&n(1,H="")}),r.$$.dirty[0]&8194|r.$$.dirty[1]&32&&H.length<M&&(n(49,Z=void 0),n(13,Q=void 0),n(17,qe=void 0),n(48,ue=Q)),r.$$.dirty[1]&262208&&z&&Z&&!Z.address&&Z.geometry.type==="Point"&&$n(Z.id,{byId:!0}).catch(F=>n(17,qe=F)),r.$$.dirty[1]&789521&&(L&&Z&&Z.id!==pn&&S&&(!Z.bbox||Z.bbox[0]===Z.bbox[2]&&Z.bbox[1]===Z.bbox[3]?L.flyTo(Z.center,Z.id.startsWith("poi.")||Z.id.startsWith("address.")?Ne:Ge):L.fitBounds(tr(Z.bbox),50,Ne),n(13,Q=void 0),n(48,ue=void 0),n(14,_e=-1)),n(50,pn=Z==null?void 0:Z.id)),r.$$.dirty[0]&8192|r.$$.dirty[1]&131072&&ue!==Q&&n(48,ue=void 0),r.$$.dirty[1]&393232&&L&&L.setMarkers(ue,Z),r.$$.dirty[0]&2&&n(14,_e=-1),r.$$.dirty[0]&40961|r.$$.dirty[1]&272&&L&&L.setEventHandler(F=>{switch(F.type){case"mapClick":W&&Cl(F.coordinates);break;case"proximityChange":n(24,E=he?F.proximity:void 0);break;case"markerClick":{const ge=Q==null?void 0:Q.find(Ve=>Ve.id===F.id);ge&&_n(ge)}break;case"markerMouseEnter":n(14,_e=xt?(Q==null?void 0:Q.findIndex(ge=>ge.id===F.id))??-1:-1);break;case"markerMouseLeave":n(14,_e=-1);break}}),r.$$.dirty[0]&16384|r.$$.dirty[1]&16&&(L==null||L.setSelectedMarker(_e)),r.$$.dirty[0]&24576&&n(51,t=Q==null?void 0:Q[_e]),r.$$.dirty[0]&2|r.$$.dirty[1]&16){const F=/^(-?\d+(?:\.\d*)?),(-?\d+(?:\.\d*)?)$/.exec(H);L==null||L.setReverseMarker(F?[Number(F[1]),Number(F[2])]:void 0)}r.$$.dirty[1]&1048576&&st("select",t),r.$$.dirty[1]&262144&&st("pick",Z),r.$$.dirty[0]&40960&&st("optionsVisibilityChange",xt&&!!Q),r.$$.dirty[0]&8192&&st("featuresListed",Q),r.$$.dirty[1]&131072&&st("featuresMarked",ue),r.$$.dirty[0]&1&&st("reverseToggle",W),r.$$.dirty[0]&2&&st("queryChange",H),r.$$.dirty[0]&1|r.$$.dirty[1]&16&&L&&L.indicateReverse(W)},[W,H,i,a,c,T,k,N,I,R,pe,De,Ae,Q,_e,xt,ze,qe,dt,Sl,Hn,Ll,mn,_n,E,u,s,f,p,$,C,S,P,j,B,L,M,z,Le,he,ke,Ge,Ne,be,et,Ue,tt,ot,ue,Z,pn,t,o,l,Al,Ol,Pl,Ml,El,Il,Nl,Dl,Fl,jl,Bl,Rl,Hl]}class Fo extends K{constructor(e){super(),X(this,e,Do,Io,V,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:24,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:37,showPlaceType:10,showResultsWhileTyping:38,trackProximity:39,types:40,zoom:41,maxZoom:42,apiUrl:43,fetchParameters:44,iconsBaseUrl:11,focus:45,blur:46,setQuery:47},null,[-1,-1,-1])}get focus(){return this.$$.ctx[45]}get blur(){return this.$$.ctx[46]}get setQuery(){return this.$$.ctx[47]}}function nr(r){let e,n,t;return n=new Fo({props:{mapController:r[0],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){e=A("div"),h(n.$$.fragment),D(e,"class","svelte-ixhnie")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1&&(i.mapController=l[0]),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function jo(r){let e,n,t=r[0]&&nr(r);return{c(){t&&t.c(),e=Ce()},m(l,o){t&&t.m(l,o),m(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&g(t,1)):(t=nr(l),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ie(),d(t,1,1,()=>{t=null}),ae())},i(l){n||(g(t),n=!0)},o(l){d(t),n=!1},d(l){l&&_(e),t&&t.d(l)}}}function Bo(r,e,n){let t;Qe(r,Ft,o=>n(1,t=o));let l;return jt(()=>{n(0,l=Ul(t,Tn))}),[l]}class Ro extends K{constructor(e){super(),X(this,e,Bo,jo,V,{})}}const Ho="/atip/geocoder_maptiler/assets/help-d011708a.svg";function Wo(r){let e,n;const t=r[1].default,l=qt(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),D(e,"class","govuk-prose")},m(o,i){m(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Vt(l,t,o,o[4],n?Xt(t,o[4],i,null):Kt(o[4]),null)},i(o){n||(g(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&_(e),l&&l.d(o)}}}function Go(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[Wo]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new zl({props:a}),Y.push(()=>ee(t,"open",s)),{c(){e=A("button"),e.innerHTML=`<img src="${Ho}" title="Help" alt="Help"/>`,n=O(),h(t.$$.fragment),D(e,"class","svelte-7d9d1l")},m(f,c){m(f,e,c),m(f,n,c),b(t,f,c),o=!0,i||(u=$e(e,"click",r[2]),i=!0)},p(f,[c]){const p={};c&16&&(p.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,p.open=f[0],te(()=>l=!1)),t.$set(p)},i(f){o||(g(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(_(e),_(n)),v(t,f),i=!1,u()}}}function Uo(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class me extends K{constructor(e){super(),X(this,e,Uo,Go,V,{})}}function rr(r){let e=r[0],n,t,l=lr(r);return{c(){l.c(),n=Ce()},m(o,i){l.m(o,i),m(o,n,i),t=!0},p(o,i){i&1&&V(e,e=o[0])?(ie(),d(l,1,1,q),ae(),l=lr(o),l.c(),g(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(g(l),t=!0)},o(o){d(l),t=!1},d(o){o&&_(n),l.d(o)}}}function lr(r){let e;const n=r[9].default,t=qt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Vt(t,n,l,l[8],e?Xt(n,l[8],o,null):Kt(l[8]),null)},i(l){e||(g(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function zo(r){let e,n,t=r[0]&&rr(r);return{c(){t&&t.c(),e=Ce()},m(l,o){t&&t.m(l,o),m(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&g(t,1)):(t=rr(l),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ie(),d(t,1,1,()=>{t=null}),ae())},i(l){n||(g(t),n=!0)},o(l){d(t),n=!1},d(l){l&&_(e),t&&t.d(l)}}}function qo(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=Qr("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!Tn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let $=new Xl;Tn.addProtocol("pmtiles",$.tile)}const{map:c,self:p}=ql();return Qe(r,c,$=>n(7,t=$)),Qe(r,p,$=>n(0,l=$)),cn(()=>{if(l){let $=l;Un(p,l=null,l),Vl().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource($))})}}),r.$$set=$=>{"id"in $&&n(3,u=$.id),"url"in $&&n(4,s=$.url),"tiles"in $&&n(5,a=$.tiles),"promoteId"in $&&n(6,f=$.promoteId),"$$scope"in $&&n(8,i=$.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&t&&l!==u&&(l&&t.removeSource(l),Un(p,l=u,l),t.addSource(l,Kl({type:"vector",url:s,tiles:a,promoteId:f})))},[l,c,p,u,s,a,f,t,i,o]}class we extends K{constructor(e){super(),X(this,e,qo,zo,V,{id:3,url:4,tiles:5,promoteId:6})}}function Vo(r){let e;const n=r[15].default,t=qt(n,r,r[23],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8388608)&&Vt(t,n,l,l[23],e?Xt(n,l[23],o,null):Kt(l[23]),null)},i(l){e||(g(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Ko(r){let e,n,t;function l(i){r[16](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[Vo]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new ao({props:o}),Y.push(()=>ee(e,"hovered",l)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&8388608&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],te(()=>n=!1)),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Xo(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=Qr("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:$=void 0}=e,{minzoom:T=void 0}=e,{maxzoom:k=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:S=!1}=e,{hovered:P=null}=e,{eventsIfTopMost:j=!1}=e;function B(R){P=R,n(0,P)}function L(R){ft.call(this,r,R)}function M(R){ft.call(this,r,R)}function N(R){ft.call(this,r,R)}function I(R){ft.call(this,r,R)}function E(R){ft.call(this,r,R)}function W(R){ft.call(this,r,R)}return r.$$set=R=>{"id"in R&&n(1,o=R.id),"source"in R&&n(2,i=R.source),"sourceLayer"in R&&n(3,u=R.sourceLayer),"beforeId"in R&&n(4,s=R.beforeId),"beforeLayerType"in R&&n(5,a=R.beforeLayerType),"paint"in R&&n(6,f=R.paint),"layout"in R&&n(7,c=R.layout),"filter"in R&&n(8,p=R.filter),"applyToClusters"in R&&n(9,$=R.applyToClusters),"minzoom"in R&&n(10,T=R.minzoom),"maxzoom"in R&&n(11,k=R.maxzoom),"hoverCursor"in R&&n(12,C=R.hoverCursor),"manageHoverState"in R&&n(13,S=R.manageHoverState),"hovered"in R&&n(0,P=R.hovered),"eventsIfTopMost"in R&&n(14,j=R.eventsIfTopMost),"$$scope"in R&&n(23,l=R.$$scope)},[P,o,i,u,s,a,f,c,p,$,T,k,C,S,j,t,B,L,M,N,I,E,W,l]}class Zo extends K{constructor(e){super(),X(this,e,Xo,Ko,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function Yo(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Jo(r){let e,n,t,l,o=r[0]=="Private (development)"&&Yo();return{c(){o&&o.c(),e=O(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated.",t=O(),l=A("p"),l.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,u){o&&o.m(i,u),m(i,e,u),m(i,n,u),m(i,t,u),m(i,l,u)},p:q,d(i){i&&(_(e),_(n),_(t),_(l)),o&&o.d(i)}}}function Qo(r){let e,n,t,l,o,i;return o=new me({props:{$$slots:{default:[Jo]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=y("App version: "),t=y(r[0]),l=O(),h(o.$$.fragment)},m(u,s){m(u,e,s),w(e,n),w(e,t),w(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(g(o.$$.fragment,u),i=!0)},o(u){d(o.$$.fragment,u),i=!1},d(u){u&&_(e),v(o)}}}function xo(r){return[Nn()]}class es extends K{constructor(e){super(),X(this,e,xo,Qo,V,{})}}const ts={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Me=Uint8Array,wt=Uint16Array,il=Uint32Array,al=new Me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fl=new Me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ns=new Me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ul=function(r,e){for(var n=new wt(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new il(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},cl=ul(al,2),pl=cl[0],rs=cl[1];pl[28]=258,rs[258]=28;var ls=ul(fl,0),os=ls[0],An=new wt(32768);for(var se=0;se<32768;++se){var at=(se&43690)>>>1|(se&21845)<<1;at=(at&52428)>>>2|(at&13107)<<2,at=(at&61680)>>>4|(at&3855)<<4,An[se]=((at&65280)>>>8|(at&255)<<8)>>>1}var Wt=function(r,e,n){for(var t=r.length,l=0,o=new wt(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new wt(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new wt(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,p=c|(1<<f)-1;c<=p;++c)u[An[c]>>>s]=a}else for(u=new wt(t),l=0;l<t;++l)r[l]&&(u[l]=An[i[r[l]-1]++]>>>15-r[l]);return u},Yt=new Me(288);for(var se=0;se<144;++se)Yt[se]=8;for(var se=144;se<256;++se)Yt[se]=9;for(var se=256;se<280;++se)Yt[se]=7;for(var se=280;se<288;++se)Yt[se]=8;var $l=new Me(32);for(var se=0;se<32;++se)$l[se]=5;var ss=Wt(Yt,9,1),is=Wt($l,5,1),hn=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},je=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},bn=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},as=function(r){return(r+7)/8|0},jn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?wt:r.BYTES_PER_ELEMENT==4?il:Me)(n-e);return t.set(r.subarray(e,n)),t},fs=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Be=function(r,e,n){var t=new Error(e||fs[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Be),!n)throw t;return t},us=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Me(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Me(t*3));var i=function(Ae){var Q=e.length;if(Ae>Q){var ue=new Me(Math.max(Q*2,Ae));ue.set(e),e=ue}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,p=n.m,$=n.n,T=t*8;do{if(!f){u=je(r,s,1);var k=je(r,s+1,3);if(s+=3,k)if(k==1)f=ss,c=is,p=9,$=5;else if(k==2){var j=je(r,s,31)+257,B=je(r,s+10,15)+4,L=j+je(r,s+5,31)+1;s+=14;for(var M=new Me(L),N=new Me(19),I=0;I<B;++I)N[ns[I]]=je(r,s+I*3,7);s+=B*3;for(var E=hn(N),W=(1<<E)-1,R=Wt(N,E,1),I=0;I<L;){var H=R[je(r,s,W)];s+=H&15;var C=H>>>4;if(C<16)M[I++]=C;else{var z=0,pe=0;for(C==16?(pe=3+je(r,s,3),s+=2,z=M[I-1]):C==17?(pe=3+je(r,s,7),s+=3):C==18&&(pe=11+je(r,s,127),s+=7);pe--;)M[I++]=z}}var Le=M.subarray(0,j),he=M.subarray(j);p=hn(Le),$=hn(he),f=Wt(Le,p,1),c=Wt(he,$,1)}else Be(1);else{var C=as(s)+4,S=r[C-4]|r[C-3]<<8,P=C+S;if(P>t){o&&Be(0);break}l&&i(a+S),e.set(r.subarray(C,P),a),n.b=a+=S,n.p=s=P*8,n.f=u;continue}if(s>T){o&&Be(0);break}}l&&i(a+131072);for(var ke=(1<<p)-1,Ge=(1<<$)-1,Ne=s;;Ne=s){var z=f[bn(r,s)&ke],be=z>>>4;if(s+=z&15,s>T){o&&Be(0);break}if(z||Be(2),be<256)e[a++]=be;else if(be==256){Ne=s,f=null;break}else{var et=be-254;if(be>264){var I=be-257,De=al[I];et=je(r,s,(1<<De)-1)+pl[I],s+=De}var Ue=c[bn(r,s)&Ge],tt=Ue>>>4;Ue||Be(3),s+=Ue&15;var he=os[tt];if(tt>3){var De=fl[tt];he+=bn(r,s)&(1<<De)-1,s+=De}if(s>T){o&&Be(0);break}l&&i(a+131072);for(var ot=a+et;a<ot;a+=4)e[a]=e[a-he],e[a+1]=e[a+1-he],e[a+2]=e[a+2-he],e[a+3]=e[a+3-he];a=ot}}n.l=f,n.p=Ne,n.b=a,n.f=u,f&&(u=1,n.m=p,n.d=c,n.n=$)}while(!u);return a==e.length?e:jn(e,0,a)},cs=new Me(0),Je=function(r,e){return r[e]|r[e+1]<<8},He=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},vn=function(r,e){return He(r,e)+He(r,e+4)*4294967296};function ps(r,e){return us(r,e)}var On=typeof TextDecoder<"u"&&new TextDecoder,$s=0;try{On.decode(cs,{stream:!0}),$s=1}catch{}var ms=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,jn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function ml(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(On)return On.decode(r);var l=ms(r),o=l[0],i=l[1];return i.length&&Be(8),o}}var _s=function(r,e){return e+30+Je(r,e+26)+Je(r,e+28)},gs=function(r,e,n){var t=Je(r,e+28),l=ml(r.subarray(e+46,e+46+t),!(Je(r,e+8)&2048)),o=e+46+t,i=He(r,e+20),u=n&&i==4294967295?ds(r,o):[i,He(r,e+24),He(r,e+42)],s=u[0],a=u[1],f=u[2];return[Je(r,e+10),s,a,l,o+Je(r,e+30)+Je(r,e+32),f]},ds=function(r,e){for(;Je(r,e)!=1;e+=4+Je(r,e+2));return[vn(r,e+12),vn(r,e+4),vn(r,e+20)]};function hs(r,e){for(var n={},t=r.length-22;He(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Be(13);var l=Je(r,t+8);if(!l)return{};var o=He(r,t+16),i=o==4294967295||l==65535;if(i){var u=He(r,t-12);i=He(r,u)==101075792,i&&(l=He(r,u+32),o=He(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=gs(r,o,i),c=f[0],p=f[1],$=f[2],T=f[3],k=f[4],C=f[5],S=_s(r,C);o=k,(!s||s({name:T,size:p,originalSize:$,compression:c}))&&(c?c==8?n[T]=ps(r.subarray(S,S+p),new Me($)):Be(14,"unknown compression type "+c):n[T]=jn(r,S,S+p))}return n}function bs(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(wn):wn(r)}function wn(r){var e=new Uint8Array(r),n=hs(e);return Promise.resolve(vs(n))}function vs(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=ml(r[l])}return e}function xe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&yt(t)===e)return t;n++}}function Jt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&yt(l)===e&&n.push(l),t++}return n}function an(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&yt(l)===e&&n(l,t):n(l,t),t++}}function ws(r,e,n){var t=[];return an(r,e,function(l,o){t.push(n(l,o))}),t}var ys=/.+\:/;function yt(r){return r.tagName.replace(ys,"")}function _l(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+yt(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=_l(r.childNodes[t]),t++;return e+="</"+yt(r)+">",e}function ks(r){var e=r.documentElement,n=xe(e,"sheetData"),t=[];return an(n,"row",function(l){an(l,"c",function(o){t.push(o)})}),t}function Ss(r,e){return xe(e,"v")}function Ts(r,e){if(e.firstChild&&yt(e.firstChild)==="is"&&e.firstChild.firstChild&&yt(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Cs(r){var e=r.documentElement,n=xe(e,"dimension");if(n)return n.getAttribute("ref")}function Ls(r){var e=r.documentElement,n=xe(e,"cellStyleXfs");return n?Jt(n,"xf"):[]}function As(r){var e=r.documentElement,n=xe(e,"cellXfs");return n?Jt(n,"xf"):[]}function Os(r){var e=r.documentElement,n=xe(e,"numFmts");return n?Jt(n,"numFmt"):[]}function Ps(r){var e=r.documentElement;return ws(e,"si",function(n){var t=xe(n,"t");if(t)return t.textContent;var l="";return an(n,"r",function(o){l+=xe(o,"t").textContent}),l})}function Ms(r){var e=r.documentElement;return xe(e,"workbookPr")}function Es(r){var e=r.documentElement;return Jt(e,"Relationship")}function Is(r){var e=r.documentElement,n=xe(e,"sheets");return Jt(n,"sheet")}function Ns(r,e){var n=e.createDocument(r),t={},l=Ms(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return Is(n).forEach(o),t}function Ds(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=yn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=yn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=yn(u);break}};return Es(n).forEach(l),t}function yn(r){return r[0]==="/"?r.slice(1):"xl/"+r}function or(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function sr(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?or(Object(n),!0).forEach(function(t){Fs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Fs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function js(r,e){if(!r)return{};var n=e.createDocument(r),t=Ls(n).map(kn),l=Os(n).map(Bs).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?sr(sr({},t[u.xfId]),kn(u,l)):kn(u,l)};return As(n).map(o)}function Bs(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function kn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Rs(r,e){return r?Ps(e.createDocument(r)):[]}function gl(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Hs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ws(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ws(r,e){if(r){if(typeof r=="string")return ir(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(r,e)}}function ir(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Gs(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Us.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&Vs(l.numberFormat.template))return!0}}var Us=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],zs=/^\[\$-414\]/,qs=/;@$/;function Vs(r){r=r.toLowerCase(),r=r.replace(zs,""),r=r.replace(qs,"");for(var e=r.split(/\W+/),n=Hs(e),t;!(t=n()).done;){var l=t.value;if(Ks.indexOf(l)<0)return!1}return!0}var Ks=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Xs(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Sn(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Sn(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Sn(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Zs(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var p=Number(r);if(isNaN(p))throw new Error('Invalid "numeric" cell value: '.concat(r));r=p,Gs(r,o(),i,a)&&(r=gl(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Zs(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Sn(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Ys=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Js(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function Qs(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Ys.indexOf(r[n]),n++;return e}function dl(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Qs(r[0].trim())]}function xs(r,e,n,t,l,o,i){var u=dl(r.getAttribute("r")),s=Ss(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:Xs(a,f,{getInlineStringValue:function(){return Ts(e,r)},getInlineStringXml:function(){return _l(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function ei(r,e,n,t,l,o){var i=ks(r);return i.length===0?[]:i.map(function(u){return xs(u,r,e,n,t,l,o)})}function ti(r,e){return oi(r)||li(r,e)||ri(r,e)||ni()}function ni(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ri(r,e){if(r){if(typeof r=="string")return ar(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ar(r,e)}}function ar(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function li(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function oi(r){if(Array.isArray(r))return r}function si(r){var e=Cs(r);if(e)return e=e.split(":").map(dl).map(function(n){var t=ti(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function ii(r,e,n,t,l,o){var i=e.createDocument(r),u=ei(i,e,n,t,l,o),s=si(i)||Js(u);return{cells:u,dimensions:s}}function ai(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=fi(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fi(r,e){if(r){if(typeof r=="string")return fr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fr(r,e)}}function fr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ui(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=ai(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function ci(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=pi(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pi(r,e){if(r){if(typeof r=="string")return ur(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ur(r,e)}}function ur(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function $i(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=ci(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function mi(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=hl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _i(r,e){return hi(r)||di(r,e)||hl(r,e)||gi()}function gi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hl(r,e){if(r){if(typeof r=="string")return cr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cr(r,e)}}function cr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function di(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function hi(r){if(Array.isArray(r))return r}function bi(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=_i(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=mi(t),p;!(p=c()).done;){var $=p.value,T=$.row-1,k=$.column-1;k<i&&T<u&&(s[T][k]=$.value)}var C=e.rowMap;if(C)for(var S=0;S<s.length;)C[S]=S,S++;return s=ui($i(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(s=e.transformData(s)),s}function vi(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=wi(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wi(r,e){if(r){if(typeof r=="string")return pr(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pr(r,e)}}function pr(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function $r(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function yi(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?$r(Object(n),!0).forEach(function(t){ki(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):$r(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ki(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Si(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=yi({sheet:1},n));var t=function(p){if(!r[p])throw new Error('"'.concat(p,'" file not found inside the *.xlsx file zip archive'));return r[p]},l=Ds(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Rs(t(l.sharedStrings),e):[],i=l.styles?js(t(l.styles),e):{},u=Ns(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var p=c.name;return{name:p}});var s=Ti(n.sheet,u.sheets);if(!s||!l.sheets[s])throw Ci(n.sheet,u.sheets);var a=ii(t(l.sheets[s]),e,o,i,u,n),f=bi(a,n);return n.properties?{data:f,properties:u}:f}function Ti(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=vi(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Ci(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Pn(r){"@babel/helpers - typeof";return Pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pn(r)}function mr(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Li(r,e,n){return e&&mr(r.prototype,e),n&&mr(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Ai(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Oi(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ut(r,e)}function Pi(r){var e=bl();return function(){var t=zt(r),l;if(e){var o=zt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return Mi(this,l)}}function Mi(r,e){if(e&&(Pn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ei(r)}function Ei(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Mn(r){var e=typeof Map=="function"?new Map:void 0;return Mn=function(t){if(t===null||!Ii(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return nn(t,arguments,zt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ut(l,t)},Mn(r)}function nn(r,e,n){return bl()?nn=Reflect.construct:nn=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Ut(a,i.prototype),a},nn.apply(null,arguments)}function bl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ii(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ut(r,e){return Ut=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Ut(r,e)}function zt(r){return zt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},zt(r)}var Ee=function(r){Oi(n,r);var e=Pi(n);function n(t){var l;return Ai(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Li(n)}(Mn(Error));function Ni(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Ee("not_a_number")}if(typeof r!="number")throw new Ee("not_a_number");if(isNaN(r))throw new Ee("invalid_number");if(!isFinite(r))throw new Ee("out_of_bounds");return r}function Di(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Ee("invalid_number");if(!isFinite(r))throw new Ee("out_of_bounds");return String(r)}throw new Ee("not_a_string")}function Fi(r){if(typeof r=="boolean")return r;throw new Ee("not_a_boolean")}function ji(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Ee("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Ee("invalid_number");if(!isFinite(r))throw new Ee("out_of_bounds");var t=gl(r,n);if(isNaN(t.valueOf()))throw new Ee("out_of_bounds");return t}throw new Ee("not_a_date")}function Bi(r,e){return Wi(r)||Hi(r,e)||vl(r,e)||Ri()}function Ri(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hi(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Wi(r){if(Array.isArray(r))return r}function En(r){"@babel/helpers - typeof";return En=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},En(r)}function Gi(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=vl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vl(r,e){if(r){if(typeof r=="string")return _r(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(r,e)}}function _r(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function gr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function dr(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gr(Object(n),!0).forEach(function(t){Ui(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):gr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ui(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var hr={isColumnOriented:!1};function zi(r,e,n){n?n=dr(dr({},hr),n):n=hr;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;Xi(e),l&&(r=Ki(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=wl(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var p=Gi(a),$;!($=p()).done;){var T=$.value;T.row=o[T.row-1]+1}return{rows:s,errors:a}}function wl(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var p=f[a],$=r[p],T=En($.type)==="object"&&!Array.isArray($.type),k=e[t.indexOf(p)];k===void 0&&(k=null);var C=void 0,S=void 0,P=void 0;if(T)C=wl($.type,e,n,t,l,o);else if(k===null)C=null;else if(Array.isArray($.type)){var j=!1,B=Vi(k).map(function(M){var N=br(M,$,o);return N.error&&(C=M,S=N.error,P=N.reason),N.value!==null&&(j=!0),N.value});S||(C=j?B:null)}else{var L=br(k,$,o);S=L.error,P=L.reason,C=S?k:L.value}!S&&C===null&&$.required&&(S="required"),S?(S={error:S,row:n+1,column:p,value:C},P&&(S.reason=P),$.type&&(S.type=$.type),l.push(S)):(u&&C!==null&&(u=!1),(C!==null||o.includeNullValues)&&(i[$.prop]=C))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function br(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=Tt(r,e.parse):e.type?t=qi(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function Tt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function qi(r,e,n){switch(e){case String:return Tt(r,Di);case Number:return Tt(r,Ni);case Date:return Tt(r,function(t){return ji(t,{properties:n.properties})});case Boolean:return Tt(r,Fi);default:if(typeof e=="function")return Tt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function yl(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=yl(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function Vi(r){for(var e=[],n=0;n<r.length;){var t=yl(r,",",n),l=Bi(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var Ki=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Xi(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function In(r){"@babel/helpers - typeof";return In=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},In(r)}function kl(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;In(o)==="object"&&(o=Object.keys(r[l])[0],i=kl(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var Zi=["schema","map"];function vr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function tn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vr(Object(n),!0).forEach(function(t){Yi(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Yi(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ji(r,e){if(r==null)return{};var n=Qi(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Qi(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function xi(r,e,n){var t=n.schema,l=n.map,o=Ji(n,Zi);!t&&l&&(t=kl(l));var i=Si(r,e,tn(tn({},o),{},{properties:t||o.properties}));return t?zi(i.data,t,tn(tn({},o),{},{properties:i.properties})):i}function ea(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return bs(r).then(function(n){return xi(n,ts,e)})}function ta(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:l.authority_or_region,capital_scheme_id:l.capital_scheme_id,funding_programme:l.funding_programme});r.features=r.features.filter(t=>na(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.num_features++,t.properties.funding_programme=l.funding_programme,t.id=n++}return e}function na(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function ra(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await ea(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Zl(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const le={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},nt=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function la(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new on({props:u}),Y.push(()=>ee(e,"value",i)),e.$on("change",r[2]),l=new oo({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],te(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}function oa(r,e,n){let t;Qe(r,Ft,s=>n(4,t=s));let l="interventionType",o=Zn("v1");function i(){let s;l=="interventionType"?(s=ll("v1"),n(1,o=Zn("v1"))):(s=xr(["get","funding_programme"],{ATF2:le.atf2,ATF3:le.atf3,ATF4:le.atf4},"grey"),n(1,o=[["ATF2",le.atf2],["ATF3",le.atf3],["ATF4",le.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class sa extends K{constructor(e){super(),X(this,e,oa,la,V,{})}}function ia(r){let e;return{c(){e=y("Clear")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function aa(r){let e,n,t,l,o,i;return t=new Gt({props:{$$slots:{default:[ia]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=A("input"),n=O(),h(t.$$.fragment),D(e,"type","text"),D(e,"class","govuk-input govuk-input--width-10"),D(e,"id","filterText")},m(u,s){m(u,e,s),rn(e,r[0]),m(u,n,s),b(t,u,s),l=!0,o||(i=$e(e,"input",r[12]),o=!0)},p(u,s){s&1&&e.value!==u[0]&&rn(e,u[0]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(g(t.$$.fragment,u),l=!0)},o(u){d(t.$$.fragment,u),l=!1},d(u){u&&(_(e),_(n)),v(t,u),o=!1,i()}}}function fa(r){let e,n,t,l,o,i,u,s,a,f;function c(k){r[10](k)}let p={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&(p.value=r[3]),e=new on({props:p}),Y.push(()=>ee(e,"value",c));function $(k){r[11](k)}let T={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(T.value=r[4]),l=new on({props:T}),Y.push(()=>ee(l,"value",$)),u=new el({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[aa]},$$scope:{ctx:r}}}),a=new sa({}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(k,C){b(e,k,C),m(k,t,C),b(l,k,C),m(k,i,C),b(u,k,C),m(k,s,C),b(a,k,C),f=!0},p(k,C){const S={};C&32&&(S.choices=k[5]),!n&&C&8&&(n=!0,S.value=k[3],te(()=>n=!1)),e.$set(S);const P={};C&64&&(P.choices=k[6]),!o&&C&16&&(o=!0,P.value=k[4],te(()=>o=!1)),l.$set(P);const j={};C&65537&&(j.$$scope={dirty:C,ctx:k}),u.$set(j)},i(k){f||(g(e.$$.fragment,k),g(l.$$.fragment,k),g(u.$$.fragment,k),g(a.$$.fragment,k),f=!0)},o(k){d(e.$$.fragment,k),d(l.$$.fragment,k),d(u.$$.fragment,k),d(a.$$.fragment,k),f=!1},d(k){k&&(_(t),_(i),_(s)),v(e,k),v(l,k),v(u,k),v(a,k)}}}function ua(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",p,$,T=r[7].other.toLocaleString()+"",k,C;return{c(){e=y("Showing "),t=y(n),l=y(" schemes ("),i=y(o),u=y(`
    routes, `),a=y(s),f=y(` areas,
    `),p=y(c),$=y(" crossings, "),k=y(T),C=y(`
    other)`)},m(S,P){m(S,e,P),m(S,t,P),m(S,l,P),m(S,i,P),m(S,u,P),m(S,a,P),m(S,f,P),m(S,p,P),m(S,$,P),m(S,k,P),m(S,C,P)},p(S,P){P&2&&n!==(n=S[1].size.toLocaleString()+"")&&U(t,n),P&128&&o!==(o=S[7].route.toLocaleString()+"")&&U(i,o),P&128&&s!==(s=S[7].area.toLocaleString()+"")&&U(a,s),P&128&&c!==(c=S[7].crossing.toLocaleString()+"")&&U(p,c),P&128&&T!==(T=S[7].other.toLocaleString()+"")&&U(k,T)},d(S){S&&(_(e),_(t),_(l),_(i),_(u),_(a),_(f),_(p),_($),_(k),_(C))}}}function ca(r){let e,n,t;function l(i){r[14](i)}let o={id:"show-schemes",$$slots:{default:[ua]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new ce({props:o}),Y.push(()=>ee(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65666&&(s.$$scope={dirty:u,ctx:i}),!n&&u&4&&(n=!0,s.checked=i[2],te(()=>n=!1)),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function pa(r){let e,n,t,l;return e=new Re({props:{label:"Filters",$$slots:{default:[fa]},$$scope:{ctx:r}}}),t=new Zt({props:{small:!0,$$slots:{default:[ca]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),m(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65657&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65670&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&_(n),v(e,o),v(t,o)}}}function $a(r,e,n){let{schemesGj:t}=e,{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,{show:u=!0}=e,s=[],a="",f=[],c="",p={area:0,route:0,crossing:0,other:0};jt(()=>{let j=new Set,B=new Set;for(let L of l.values())L.authority_or_region&&j.add(L.authority_or_region),L.funding_programme&&B.add(L.funding_programme);n(5,s=Array.from(j.entries())),s.sort(),n(6,f=Array.from(B.entries())),f.sort()});function $(j,B,L){let M=j.toLowerCase(),N=E=>{var W,R;if(M&&!((W=E.properties.name)!=null&&W.toLowerCase().includes(M))&&!((R=E.properties.description)!=null&&R.toLowerCase().includes(M)))return!1;if(B||L){let H=l.get(E.properties.scheme_reference);if(B&&H.authority_or_region!=B||L&&H.funding_programme!=L)return!1}return!0};n(1,o=new Set(t.features.filter(N).map(E=>E.properties.scheme_reference))),n(7,p={area:0,route:0,crossing:0,other:0});let I=E=>{var W,R;return!(!o.has(E.properties.scheme_reference)||M&&!((W=E.properties.name)!=null&&W.toLowerCase().includes(M))&&!((R=E.properties.description)!=null&&R.toLowerCase().includes(M)))};for(let E of t.features)I(E)?(delete E.properties.hide_while_editing,n(7,p[E.properties.intervention_type]++,p)):E.properties.hide_while_editing=!0;n(8,t),n(7,p)}function T(j){a=j,n(3,a)}function k(j){c=j,n(4,c)}function C(){i=this.value,n(0,i)}const S=()=>n(0,i="");function P(j){u=j,n(2,u)}return r.$$set=j=>{"schemesGj"in j&&n(8,t=j.schemesGj),"schemes"in j&&n(9,l=j.schemes),"schemesToBeShown"in j&&n(1,o=j.schemesToBeShown),"filterText"in j&&n(0,i=j.filterText),"show"in j&&n(2,u=j.show)},r.$$.update=()=>{r.$$.dirty&25&&$(i,a,c)},[i,o,u,a,c,s,f,p,t,l,T,k,C,S,P]}class ma extends K{constructor(e){super(),X(this,e,$a,pa,V,{schemesGj:8,schemes:9,schemesToBeShown:1,filterText:0,show:2})}}function _a(r,e,n){let t;Qe(r,Ft,u=>n(3,t=u));let l=null,{markerPosition:o}=e,{markerPositionUpdated:i}=e;return jt(()=>{l=new Cn.Marker({draggable:!0}).setLngLat(o).addTo(t),l.on("dragstart",()=>{t.getCanvas().style.cursor="grabbing"}),l.on("drag",()=>{n(0,o=l.getLngLat()),i()}),l.on("dragend",()=>{t.getCanvas().style.cursor="inherit"})}),cn(()=>{l&&l.remove()}),r.$$set=u=>{"markerPosition"in u&&n(0,o=u.markerPosition),"markerPositionUpdated"in u&&n(1,i=u.markerPositionUpdated)},[o,i]}class ga extends K{constructor(e){super(),X(this,e,_a,null,V,{markerPosition:0,markerPositionUpdated:1})}}function wr(r,e,n){const t=r.slice();return t[16]=e[n],t[17]=e,t[18]=n,t}function da(r){let e,n;return e=new Gt({props:{$$slots:{default:[ba]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&524288&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ha(r){let e,n;return e=new Gt({props:{$$slots:{default:[va]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&524288&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ba(r){let e;return{c(){e=y("Disable Line Measurement Tool")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function va(r){let e;return{c(){e=y("Enable Line Measurement Tool")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function yr(r){var c;let e,n,t,l=[],o=new Map,i,u,s=r[2]&&((c=r[2].properties)==null?void 0:c.length)&&kr(r);n=new Re({props:{label:"Help",$$slots:{default:[wa]},$$scope:{ctx:r}}});let a=Fe(r[1]);const f=p=>p[16].id;for(let p=0;p<a.length;p+=1){let $=wr(r,a,p),T=f($);o.set(T,l[p]=Sr(T,$))}return{c(){s&&s.c(),e=O(),h(n.$$.fragment),t=O();for(let p=0;p<l.length;p+=1)l[p].c();i=Ce()},m(p,$){s&&s.m(p,$),m(p,e,$),b(n,p,$),m(p,t,$);for(let T=0;T<l.length;T+=1)l[T]&&l[T].m(p,$);m(p,i,$),u=!0},p(p,$){var k;p[2]&&((k=p[2].properties)!=null&&k.length)?s?s.p(p,$):(s=kr(p),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null);const T={};$&524288&&(T.$$scope={dirty:$,ctx:p}),n.$set(T),$&258&&(a=Fe(p[1]),ie(),l=Yr(l,$,f,1,p,a,o,i.parentNode,Jr,Sr,i,wr),ae())},i(p){if(!u){g(n.$$.fragment,p);for(let $=0;$<a.length;$+=1)g(l[$]);u=!0}},o(p){d(n.$$.fragment,p);for(let $=0;$<l.length;$+=1)d(l[$]);u=!1},d(p){p&&(_(e),_(t),_(i)),s&&s.d(p),v(n,p);for(let $=0;$<l.length;$+=1)l[$].d(p)}}}function kr(r){var i;let e,n,t=((i=r[2].properties)==null?void 0:i.length)+"",l,o;return{c(){e=A("p"),n=y("Length: "),l=y(t),o=y("m")},m(u,s){m(u,e,s),w(e,n),w(e,l),w(e,o)},p(u,s){var a;s&4&&t!==(t=((a=u[2].properties)==null?void 0:a.length)+"")&&U(l,t)},d(u){u&&_(e)}}}function wa(r){let e;return{c(){e=A("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){m(n,e,t)},p:q,d(n){n&&_(e)}}}function Sr(r,e){let n,t,l,o;function i(s){e[9](s,e[16])}let u={markerPositionUpdated:e[8]};return e[16].lngLat!==void 0&&(u.markerPosition=e[16].lngLat),t=new ga({props:u}),Y.push(()=>ee(t,"markerPosition",i)),{key:r,first:null,c(){n=Ce(),h(t.$$.fragment),this.first=n},m(s,a){m(s,n,a),b(t,s,a),o=!0},p(s,a){e=s;const f={};!l&&a&2&&(l=!0,f.markerPosition=e[16].lngLat,te(()=>l=!1)),t.$set(f)},i(s){o||(g(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&_(n),v(t,s)}}}function ya(r){let e,n;const t=[G("measurement-line"),{paint:{"line-color":rl.measuringLine,"line-width":5}}];let l={};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u={};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ka(r){let e,n,t,l,o,i,u,s;const a=[ha,da],f=[];function c($,T){return $[0]?0:1}e=c(r),n=f[e]=a[e](r);let p=!r[0]&&yr(r);return o=new Bt({props:{data:r[3],$$slots:{default:[ya]},$$scope:{ctx:r}}}),{c(){n.c(),t=O(),p&&p.c(),l=O(),h(o.$$.fragment)},m($,T){f[e].m($,T),m($,t,T),p&&p.m($,T),m($,l,T),b(o,$,T),i=!0,u||(s=[$e(window,"keydown",r[6]),$e(window,"keyup",r[7])],u=!0)},p($,[T]){let k=e;e=c($),e===k?f[e].p($,T):(ie(),d(f[k],1,1,()=>{f[k]=null}),ae(),n=f[e],n?n.p($,T):(n=f[e]=a[e]($),n.c()),g(n,1),n.m(t.parentNode,t)),$[0]?p&&(ie(),d(p,1,1,()=>{p=null}),ae()):p?(p.p($,T),T&1&&g(p,1)):(p=yr($),p.c(),g(p,1),p.m(l.parentNode,l));const C={};T&8&&(C.data=$[3]),T&524288&&(C.$$scope={dirty:T,ctx:$}),o.$set(C)},i($){i||(g(n),g(p),g(o.$$.fragment,$),i=!0)},o($){d(n),d(p),d(o.$$.fragment,$),i=!1},d($){$&&(_(t),_(l)),f[e].d($),p&&p.d($),v(o,$),u=!1,un(s)}}}function Sa(r,e,n){let t;Qe(r,Ft,j=>n(12,t=j));let l=!0,o=[],i,u=!1,s=0,a=Ln();function f(j){l||(u||(o.push({id:s++,lngLat:j.lngLat}),n(1,o),C()),u&&o.length>0&&(c(j.lngLat),C()))}function c(j){let L=new Cn.LngLat(0,-90).distanceTo(new Cn.LngLat(0,90)),M;o.forEach(N=>{const I=N.lngLat;L>=j.distanceTo(I)&&(M=I,L=j.distanceTo(I))}),M&&n(1,o=o.filter(N=>{const I=N.lngLat;return I.lng!=(M==null?void 0:M.lng)||I.lat!=(M==null?void 0:M.lat)}))}function p(){n(0,l=!1)}function $(){n(0,l=!0),n(1,o=[]),S()}function T(j){j.key==="Shift"&&(u=!0),j.key==="Escape"&&$()}function k(j){j.key==="Shift"&&(u=!1)}function C(){if(o.length<2){S();return}const j=o.map(B=>[B.lngLat.lng,B.lngLat.lat]);n(2,i=Yl(j,{})),i.properties&&n(2,i.properties.length=(so(i)*1e3).toFixed(2),i),n(3,a=JSON.parse(JSON.stringify(i)))}function S(){n(2,i=void 0),n(3,a=Ln())}jt(()=>{t.on("click",f)}),cn(()=>{t.off("click",f)});function P(j,B){r.$$.not_equal(B.lngLat,j)&&(B.lngLat=j,n(1,o))}return[l,o,i,a,p,$,T,k,C,P]}class Ta extends K{constructor(e){super(),X(this,e,Sa,ka,V,{})}}function Ca(r){let e;return{c(){e=y(`Open Government License
  `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function La(r){let e,n,t,l,o;return t=new J({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ca]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=y("License: "),h(t.$$.fragment),l=y(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,u){m(i,e,u),w(e,n),b(t,e,null),w(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(g(t.$$.fragment,i),o=!0)},o(i){d(t.$$.fragment,i),o=!1},d(i){i&&_(e),v(t)}}}class lt extends K{constructor(e){super(),X(this,e,null,La,V,{})}}function Tr(r,e,n){const t=r.slice();return t[2]=e[n],t}function Cr(r,e,n){const t=r.slice();return t[5]=e[n],t}function Lr(r){let e,n;return{c(){e=A("span"),n=y(` 
    `),We(e,"background",r[5]),We(e,"width","100%"),We(e,"border","1px solid black")},m(t,l){m(t,e,l),w(e,n)},p(t,l){l&1&&We(e,"background",t[5])},d(t){t&&_(e)}}}function Ar(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=y(n)},m(l,o){m(l,e,o),w(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&U(t,n)},d(l){l&&_(e)}}}function Aa(r){let e,n,t,l=Fe(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Lr(Cr(r,l,s));let i=Fe(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Ar(Tr(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=O(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();We(e,"display","flex"),We(t,"display","flex"),We(t,"justify-content","space-between")},m(s,a){m(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);m(s,n,a),m(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=Fe(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Cr(s,l,f);o[f]?o[f].p(c,a):(o[f]=Lr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=Fe(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Tr(s,i,f);u[f]?u[f].p(c,a):(u[f]=Ar(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:q,o:q,d(s){s&&(_(e),_(n),_(t)),ln(o,s),ln(u,s)}}}function Oa(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class _t extends K{constructor(e){super(),X(this,e,Oa,Aa,V,{colorScale:0,limits:1})}}function Or(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Pa(r){let e;return{c(){e=y("Percent of households with a car")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Ma(r){let e;return{c(){e=y(`NOMIS TS045
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Ea(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Ia(r){let e;return{c(){e=y(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Na(r){let e,n,t,l,o,i,u,s,a,f,c,p;return t=new J({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ma]},$$scope:{ctx:r}}}),o=new J({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ea]},$$scope:{ctx:r}}}),f=new J({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=y("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=y(". Output area boundaries from "),h(o.$$.fragment),i=y("."),u=O(),s=A("p"),a=y("License: "),h(f.$$.fragment),c=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m($,T){m($,e,T),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,i),m($,u,T),m($,s,T),w(s,a),b(f,s,null),w(s,c),p=!0},p($,T){const k={};T&65536&&(k.$$scope={dirty:T,ctx:$}),t.$set(k);const C={};T&65536&&(C.$$scope={dirty:T,ctx:$}),o.$set(C);const S={};T&65536&&(S.$$scope={dirty:T,ctx:$}),f.$set(S)},i($){p||(g(t.$$.fragment,$),g(o.$$.fragment,$),g(f.$$.fragment,$),p=!0)},o($){d(t.$$.fragment,$),d(o.$$.fragment,$),d(f.$$.fragment,$),p=!1},d($){$&&(_(e),_(u),_(s)),v(t),v(o),v(f)}}}function Da(r){let e,n,t;return n=new me({props:{$$slots:{default:[Na]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Pr(r){let e,n;return e=new _t({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fa(r){let e;return{c(){e=y("Average cars per household")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function ja(r){let e;return{c(){e=y(`NOMIS TS045
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Ba(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Ra(r){let e;return{c(){e=y(`Open Government License
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Ha(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,T;return o=new J({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ja]},$$scope:{ctx:r}}}),u=new J({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ba]},$$scope:{ctx:r}}}),p=new J({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ra]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=A("p"),l=y("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=y(". Output area boundaries from "),h(u.$$.fragment),s=y("."),a=O(),f=A("p"),c=y("License: "),h(p.$$.fragment),$=y(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(k,C){m(k,e,C),m(k,n,C),m(k,t,C),w(t,l),b(o,t,null),w(t,i),b(u,t,null),w(t,s),m(k,a,C),m(k,f,C),w(f,c),b(p,f,null),w(f,$),T=!0},p(k,C){const S={};C&65536&&(S.$$scope={dirty:C,ctx:k}),o.$set(S);const P={};C&65536&&(P.$$scope={dirty:C,ctx:k}),u.$set(P);const j={};C&65536&&(j.$$scope={dirty:C,ctx:k}),p.$set(j)},i(k){T||(g(o.$$.fragment,k),g(u.$$.fragment,k),g(p.$$.fragment,k),T=!0)},o(k){d(o.$$.fragment,k),d(u.$$.fragment,k),d(p.$$.fragment,k),T=!1},d(k){k&&(_(e),_(n),_(t),_(a),_(f)),v(o),v(u),v(p)}}}function Wa(r){let e,n,t;return n=new me({props:{$$slots:{default:[Ha]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Mr(r){let e,n;return e=new _t({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ga(r){let e;return{c(){e=y("Population density")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Ua(r){let e;return{c(){e=y(`NOMIS TS006
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function za(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function qa(r){let e,n,t,l,o,i,u,s,a;return t=new J({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ua]},$$scope:{ctx:r}}}),o=new J({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[za]},$$scope:{ctx:r}}}),s=new lt({}),{c(){e=A("p"),n=y("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=y(". Output area boundaries from "),h(o.$$.fragment),i=y("."),u=O(),h(s.$$.fragment)},m(f,c){m(f,e,c),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,i),m(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&65536&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const $={};c&65536&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(_(e),_(u)),v(t),v(o),v(s,f)}}}function Va(r){let e,n,t;return n=new me({props:{$$slots:{default:[qa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Er(r){let e,n,t,l;return t=new _t({props:{colorScale:r[4],limits:r[6]().map(ef)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=O(),h(t.$$.fragment)},m(o,i){m(o,e,i),m(o,n,i),b(t,o,i),l=!0},p:q,i(o){l||(g(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(_(e),_(n)),v(t,o)}}}function Ka(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=y("There are "),t=A("b"),o=y(l),i=y(`
          people per square kilometre in `),s=y(u)},m(a,f){m(a,e,f),w(e,n),w(e,t),w(t,o),w(e,i),w(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&U(o,l),f&8192&&u!==(u=a[14]+"")&&U(s,u)},d(a){a&&_(e)}}}function Xa(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=y("Households in "),l=y(t),o=y(` have an average of
          `),i=A("b"),s=y(u),a=y(`
          cars`)},m(f,c){m(f,e,c),w(e,n),w(e,l),w(e,o),w(e,i),w(i,s),w(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&U(l,t),c&8200&&u!==(u=f[15]+"")&&U(s,u)},d(f){f&&_(e)}}}function Za(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=y(t),o=y("%"),i=y(`
          of households in `),s=y(u),a=y(" have 1 or more cars")},m(f,c){m(f,e,c),w(e,n),w(n,l),w(n,o),w(e,i),w(e,s),w(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&U(l,t),c&8192&&u!==(u=f[14]+"")&&U(s,u)},d(f){f&&_(e)}}}function Ya(r){Or(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?Za:o[3]=="average_cars_per_household"?Xa:Ka}let t=n(r),l=t(r);return{c(){l.c(),e=Ce()},m(o,i){l.m(o,i),m(o,e,i)},p(o,i){Or(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&_(e),l.d(o)}}}function Ja(r){let e,n;return e=new fe({props:{$$slots:{default:[Ya,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qa(r){let e,n,t,l;const o=[G(bt),{sourceLayer:bt},{paint:{"fill-color":Te(["get",r[3]],r[6](),r[4]),"fill-opacity":x(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ja]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=ne(i,o[a]);e=new rt({props:i}),e.$on("click",r[5]);const u=[G(`${bt}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=ne(s,u[a]);return t=new ve({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?re(o,[f&0&&oe(G(bt)),f&0&&{sourceLayer:bt},f&88&&{paint:{"fill-color":Te(["get",a[3]],a[6](),a[4]),"fill-opacity":x(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&8?re(u,[f&0&&oe(G(`${bt}-outline`)),u[1],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(p)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function xa(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,T;function k(I){r[7](I)}let C={id:"percent_households_with_car",$$slots:{right:[Da],default:[Pa]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new ce({props:C}),Y.push(()=>ee(e,"checked",k)),e.$on("change",r[8]);let S=r[3]=="percent_households_with_car"&&Pr(r);function P(I){r[9](I)}let j={id:"average_cars_per_household",$$slots:{right:[Wa],default:[Fa]},$$scope:{ctx:r}};r[1]!==void 0&&(j.checked=r[1]),o=new ce({props:j}),Y.push(()=>ee(o,"checked",P)),o.$on("change",r[10]);let B=r[3]=="average_cars_per_household"&&Mr(r);function L(I){r[11](I)}let M={id:"population_density",$$slots:{right:[Va],default:[Ga]},$$scope:{ctx:r}};r[2]!==void 0&&(M.checked=r[2]),a=new ce({props:M}),Y.push(()=>ee(a,"checked",L)),a.$on("change",r[12]);let N=r[3]=="population_density"&&Er(r);return $=new we({props:{url:`pmtiles://${de()}/v1/${bt}.pmtiles`,$$slots:{default:[Qa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),S&&S.c(),l=O(),h(o.$$.fragment),u=O(),B&&B.c(),s=O(),h(a.$$.fragment),c=O(),N&&N.c(),p=O(),h($.$$.fragment)},m(I,E){b(e,I,E),m(I,t,E),S&&S.m(I,E),m(I,l,E),b(o,I,E),m(I,u,E),B&&B.m(I,E),m(I,s,E),b(a,I,E),m(I,c,E),N&&N.m(I,E),m(I,p,E),b($,I,E),T=!0},p(I,[E]){const W={};E&65536&&(W.$$scope={dirty:E,ctx:I}),!n&&E&1&&(n=!0,W.checked=I[0],te(()=>n=!1)),e.$set(W),I[3]=="percent_households_with_car"?S?(S.p(I,E),E&8&&g(S,1)):(S=Pr(I),S.c(),g(S,1),S.m(l.parentNode,l)):S&&(ie(),d(S,1,1,()=>{S=null}),ae());const R={};E&65536&&(R.$$scope={dirty:E,ctx:I}),!i&&E&2&&(i=!0,R.checked=I[1],te(()=>i=!1)),o.$set(R),I[3]=="average_cars_per_household"?B?(B.p(I,E),E&8&&g(B,1)):(B=Mr(I),B.c(),g(B,1),B.m(s.parentNode,s)):B&&(ie(),d(B,1,1,()=>{B=null}),ae());const H={};E&65536&&(H.$$scope={dirty:E,ctx:I}),!f&&E&4&&(f=!0,H.checked=I[2],te(()=>f=!1)),a.$set(H),I[3]=="population_density"?N?(N.p(I,E),E&8&&g(N,1)):(N=Er(I),N.c(),g(N,1),N.m(p.parentNode,p)):N&&(ie(),d(N,1,1,()=>{N=null}),ae());const z={};E&65544&&(z.$$scope={dirty:E,ctx:I}),$.$set(z)},i(I){T||(g(e.$$.fragment,I),g(S),g(o.$$.fragment,I),g(B),g(a.$$.fragment,I),g(N),g($.$$.fragment,I),T=!0)},o(I){d(e.$$.fragment,I),d(S),d(o.$$.fragment,I),d(B),d(a.$$.fragment,I),d(N),d($.$$.fragment,I),T=!1},d(I){I&&(_(t),_(l),_(u),_(s),_(c),_(p)),v(e,I),S&&S.d(I),v(o,I),B&&B.d(I),v(a,I),N&&N.d(I),v($,I)}}}let bt="census_output_areas";const ef=r=>r.toLocaleString();function tf(r,e,n){let t=le.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(C){let S=C.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${S}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${S}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(C){l=C,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function p(C){o=C,n(1,o)}const $=()=>{n(0,l=!1),n(2,i=!1)};function T(C){i=C,n(2,i)}const k=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,p,$,T,k]}class nf extends K{constructor(e){super(),X(this,e,tf,xa,V,{})}}function rf(r){let e,n,t;return e=new Ie({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=y(`
  Combined authorities`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:q,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function lf(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function of(r){let e,n,t,l,o,i,u;return t=new J({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[lf]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=A("p"),n=y("Data from "),h(t.$$.fragment),l=y(", as of December 2022."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),w(e,n),b(t,e,null),w(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(g(t.$$.fragment,s),g(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function sf(r){let e,n,t;return n=new me({props:{$$slots:{default:[of]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function af(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=y(n)},m(l,o){m(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&U(t,n)},d(l){l&&_(e)}}}function ff(r){let e,n;return e=new fe({props:{$$slots:{default:[af,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uf(r){let e,n,t,l;const o=[G(Ct),{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ff]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=ne(i,o[a]);e=new rt({props:i}),e.$on("click",pf);const u=[G(`${Ct}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=ne(s,u[a]);return t=new ve({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?re(o,[f&0&&oe(G(Ct)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?re(u,[f&0&&oe(G(`${Ct}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function cf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ct,$$slots:{right:[sf],default:[rf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ce({props:u}),Y.push(()=>ee(e,"checked",i)),l=new Bt({props:{data:`${de()}/v1/${Ct}.geojson`,$$slots:{default:[uf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],te(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let Ct="combined_authorities";function pf(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function $f(r,e,n){let t=le.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class mf extends K{constructor(e){super(),X(this,e,$f,cf,V,{})}}function _f(r){let e;return{c(){e=y("Indices of Multiple Deprivation")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function gf(r){let e;return{c(){e=y(`DLUCH GIS
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function df(r){let e;return{c(){e=y(`here
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function hf(r){let e,n,t,l,o,i,u,s,a;return t=new J({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[gf]},$$scope:{ctx:r}}}),o=new J({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[df]},$$scope:{ctx:r}}}),s=new lt({}),{c(){e=A("p"),n=y("The 2019 English IMD scores come from "),h(t.$$.fragment),l=y(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=y("."),u=O(),h(s.$$.fragment)},m(f,c){m(f,e,c),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,i),m(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const $={};c&32&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(_(e),_(u)),v(t),v(o),v(s,f)}}}function bf(r){let e,n,t;return n=new me({props:{$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Ir(r){let e,n;return e=new _t({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vf(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,p=r[4].rank.toLocaleString()+"",$,T;return{c(){e=A("p"),t=y(n),l=y(` has an IMD score of
        `),o=A("b"),u=y(i),s=O(),a=A("p"),f=y("Rank: "),c=A("b"),$=y(p),T=y(`
        / 32,844 LSOAs`)},m(k,C){m(k,e,C),w(e,t),w(e,l),w(e,o),w(o,u),m(k,s,C),m(k,a,C),w(a,f),w(a,c),w(c,$),w(a,T)},p(k,C){C&16&&n!==(n=k[4].LSOA11CD+"")&&U(t,n),C&16&&i!==(i=k[4].score+"")&&U(u,i),C&16&&p!==(p=k[4].rank.toLocaleString()+"")&&U($,p)},d(k){k&&(_(e),_(s),_(a))}}}function wf(r){let e,n;return e=new fe({props:{$$slots:{default:[vf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yf(r){let e,n,t,l;const o=[G(ut),{sourceLayer:ut},{paint:{"fill-color":Te(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":x(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let i={$$slots:{default:[wf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=ne(i,o[a]);e=new rt({props:i});const u=[G(`${ut}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=ne(s,u[a]);return t=new ve({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?re(o,[f&0&&oe(G(ut)),f&0&&{sourceLayer:ut},f&6&&{paint:{"fill-color":Te(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":x(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&1?re(u,[f&0&&oe(G(`${ut}-outline`)),u[1],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function kf(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ut,$$slots:{right:[bf],default:[_f]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ce({props:s}),Y.push(()=>ee(e,"checked",u));let a=r[0]&&Ir(r);return o=new we({props:{url:`pmtiles://${de()}/v1/${ut}.pmtiles`,$$slots:{default:[yf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),m(f,t,c),a&&a.m(f,c),m(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],te(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=Ir(f),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(_(t),_(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="imd";function Sf(r,e,n){let t=le.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Tf extends K{constructor(e){super(),X(this,e,Sf,kf,V,{})}}function Cf(r){let e,n,t;return e=new Ie({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=y(`
  Local Authority Districts`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:q,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function Lf(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Af(r){let e,n,t,l,o,i,u;return t=new J({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Lf]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=A("p"),n=y("Data from "),h(t.$$.fragment),l=y(", as of May 2023."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),w(e,n),b(t,e,null),w(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(g(t.$$.fragment,s),g(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function Of(r){let e,n,t;return n=new me({props:{$$slots:{default:[Af]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Pf(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=y(n)},m(l,o){m(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&U(t,n)},d(l){l&&_(e)}}}function Mf(r){let e,n;return e=new fe({props:{$$slots:{default:[Pf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ef(r){let e,n,t,l;const o=[G(Lt),{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Mf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=ne(i,o[a]);e=new rt({props:i}),e.$on("click",Nf);const u=[G(`${Lt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=ne(s,u[a]);return t=new ve({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?re(o,[f&0&&oe(G(Lt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?re(u,[f&0&&oe(G(`${Lt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function If(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Lt,$$slots:{right:[Of],default:[Cf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ce({props:u}),Y.push(()=>ee(e,"checked",i)),l=new Bt({props:{data:`${de()}/v1/${Lt}.geojson`,$$slots:{default:[Ef]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],te(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let Lt="local_authority_districts";function Nf(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Df(r,e,n){let t=le.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ff extends K{constructor(e){super(),X(this,e,Df,If,V,{})}}function jf(r){let e,n,t;return e=new Ie({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=y(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:q,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function Bf(r){let e;return{c(){e=y(`local authority
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Rf(r){let e;return{c(){e=y(`national park authorit
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Hf(r){let e;return{c(){e=y(`development corporation
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Wf(r){let e;return{c(){e=y("this map")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Gf(r){let e;return{c(){e=y(`planning.data.gov.uk
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Uf(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,T,k,C,S,P,j,B,L,M;return t=new J({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),o=new J({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Rf]},$$scope:{ctx:r}}}),u=new J({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),$=new J({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Wf]},$$scope:{ctx:r}}}),P=new J({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Gf]},$$scope:{ctx:r}}}),L=new lt({}),{c(){e=A("p"),n=y("LPAs may be a "),h(t.$$.fragment),l=y(", "),h(o.$$.fragment),i=y("y, or "),h(u.$$.fragment),s=y("."),a=O(),f=A("p"),c=A("strong"),p=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h($.$$.fragment),T=y(" to get more details."),k=O(),C=A("p"),S=y("Data from ONS Geography via "),h(P.$$.fragment),j=y(", as of November 2022."),B=O(),h(L.$$.fragment)},m(N,I){m(N,e,I),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,i),b(u,e,null),w(e,s),m(N,a,I),m(N,f,I),w(f,c),w(c,p),b($,c,null),w(c,T),m(N,k,I),m(N,C,I),w(C,S),b(P,C,null),w(C,j),m(N,B,I),b(L,N,I),M=!0},p(N,I){const E={};I&16&&(E.$$scope={dirty:I,ctx:N}),t.$set(E);const W={};I&16&&(W.$$scope={dirty:I,ctx:N}),o.$set(W);const R={};I&16&&(R.$$scope={dirty:I,ctx:N}),u.$set(R);const H={};I&16&&(H.$$scope={dirty:I,ctx:N}),$.$set(H);const z={};I&16&&(z.$$scope={dirty:I,ctx:N}),P.$set(z)},i(N){M||(g(t.$$.fragment,N),g(o.$$.fragment,N),g(u.$$.fragment,N),g($.$$.fragment,N),g(P.$$.fragment,N),g(L.$$.fragment,N),M=!0)},o(N){d(t.$$.fragment,N),d(o.$$.fragment,N),d(u.$$.fragment,N),d($.$$.fragment,N),d(P.$$.fragment,N),d(L.$$.fragment,N),M=!1},d(N){N&&(_(e),_(a),_(f),_(k),_(C),_(B)),v(t),v(o),v(u),v($),v(P),v(L,N)}}}function zf(r){let e,n,t;return n=new me({props:{$$slots:{default:[Uf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function qf(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=y(n)},m(l,o){m(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&U(t,n)},d(l){l&&_(e)}}}function Vf(r){let e,n;return e=new fe({props:{$$slots:{default:[qf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kf(r){let e,n,t,l;const o=[G(Ke),{sourceLayer:Ke},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let i={$$slots:{default:[Vf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=ne(i,o[a]);e=new rt({props:i});const u=[G(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=ne(s,u[a]);return t=new ve({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?re(o,[f&0&&oe(G(Ke)),f&0&&{sourceLayer:Ke},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?re(u,[f&0&&oe(G(`${Ke}-outline`)),f&0&&{sourceLayer:Ke},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function Xf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ke,$$slots:{right:[zf],default:[jf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ce({props:u}),Y.push(()=>ee(e,"checked",i)),l=new we({props:{url:`pmtiles://${de()}/v1/${Ke}.pmtiles`,$$slots:{default:[Kf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],te(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let Ke="local_planning_authorities";function Zf(r,e,n){let t=le.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Yf extends K{constructor(e){super(),X(this,e,Zf,Xf,V,{})}}function Jf(r){let e,n,t;return e=new Ie({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=y(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:q,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function Qf(r){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function xf(r){let e,n,t,l,o,i,u;return t=new J({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Qf]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=A("p"),n=y("Data from "),h(t.$$.fragment),l=y(", as of May 2023."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),w(e,n),b(t,e,null),w(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(g(t.$$.fragment,s),g(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function eu(r){let e,n,t;return n=new me({props:{$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function tu(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=y(n)},m(l,o){m(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&U(t,n)},d(l){l&&_(e)}}}function nu(r){let e,n;return e=new fe({props:{$$slots:{default:[tu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ru(r){let e,n,t,l;const o=[G(Xe),{sourceLayer:Xe},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[nu]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=ne(i,o[a]);e=new rt({props:i}),e.$on("click",ou);const u=[G(`${Xe}-outline`),{sourceLayer:Xe},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=ne(s,u[a]);return t=new ve({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?re(o,[f&0&&oe(G(Xe)),f&0&&{sourceLayer:Xe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?re(u,[f&0&&oe(G(`${Xe}-outline`)),f&0&&{sourceLayer:Xe},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function lu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Xe,$$slots:{right:[eu],default:[Jf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ce({props:u}),Y.push(()=>ee(e,"checked",i)),l=new we({props:{url:`pmtiles://${de()}/v1/${Xe}.pmtiles`,$$slots:{default:[ru]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],te(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let Xe="parliamentary_constituencies";function ou(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function su(r,e,n){let t=le.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class iu extends K{constructor(e){super(),X(this,e,su,lu,V,{})}}function au(r){let e,n,t;return e=new Ie({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=y(`
  Wards`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:q,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function fu(r){let e;return{c(){e=y(`ONS Geography
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function uu(r){let e,n,t,l,o,i,u;return t=new J({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[fu]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=A("p"),n=y("Data from "),h(t.$$.fragment),l=y(", as of May 2023."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),w(e,n),b(t,e,null),w(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(g(t.$$.fragment,s),g(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function cu(r){let e,n,t;return n=new me({props:{$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function pu(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=y(n)},m(l,o){m(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&U(t,n)},d(l){l&&_(e)}}}function $u(r){let e,n;return e=new fe({props:{$$slots:{default:[pu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mu(r){let e,n,t,l;const o=[G(Ze),{sourceLayer:Ze},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[$u]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=ne(i,o[a]);e=new rt({props:i}),e.$on("click",gu);const u=[G(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=ne(s,u[a]);return t=new ve({props:s}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?re(o,[f&0&&oe(G(Ze)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const p=f&3?re(u,[f&0&&oe(G(`${Ze}-outline`)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){l||(g(e.$$.fragment,a),g(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&_(n),v(e,a),v(t,a)}}}function _u(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ze,$$slots:{right:[cu],default:[au]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ce({props:u}),Y.push(()=>ee(e,"checked",i)),l=new we({props:{url:`pmtiles://${de()}/v1/${Ze}.pmtiles`,$$slots:{default:[mu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],te(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let Ze="wards";function gu(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function du(r,e,n){let t=le.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class hu extends K{constructor(e){super(),X(this,e,du,_u,V,{})}}function bu(r){let e;return{c(){e=y("Open Data Commons Open Database License")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function vu(r){let e,n,t,l;return t=new J({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=y("License: "),h(t.$$.fragment)},m(o,i){m(o,e,i),w(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(g(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&_(e),v(t)}}}class gt extends K{constructor(e){super(),X(this,e,null,vu,V,{})}}function wu(r){let e,n,t;return e=new Ie({props:{color:le.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=y(`
  Bus routes`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:q,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function yu(r){let e;return{c(){e=y(`GTFS
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function ku(r){let e,n,t,l,o,i,u,s,a;return o=new J({props:{href:"https://gtfs.org",$$slots:{default:[yu]},$$scope:{ctx:r}}}),s=new gt({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=A("p"),l=y("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=y(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),h(s.$$.fragment)},m(f,c){m(f,e,c),m(f,n,c),m(f,t,c),w(t,l),b(o,t,null),w(t,i),m(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&8&&(p.$$scope={dirty:c,ctx:f}),o.$set(p)},i(f){a||(g(o.$$.fragment,f),g(s.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(_(e),_(n),_(t),_(u)),v(o),v(s,f)}}}function Su(r){let e,n,t;return n=new me({props:{$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Tu(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Cu(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Lu(r){let e;function n(o,i){return o[2].has_bus_lane?Cu:Tu}let t=n(r),l=t(r);return{c(){l.c(),e=Ce()},m(o,i){l.m(o,i),m(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&_(e),l.d(o)}}}function Au(r){let e,n;return e=new fe({props:{$$slots:{default:[Lu,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ou(r){let e,n;const t=[G(At),{sourceLayer:At},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],le.bus_route_with_lane,le.bus_route_without_lane],"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[Au]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?re(t,[i&0&&oe(G(At)),i&0&&{sourceLayer:At},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Pu(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:At,$$slots:{right:[Su],default:[wu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ce({props:u}),Y.push(()=>ee(e,"checked",i)),l=new we({props:{url:`pmtiles://${de()}/v1/${At}.pmtiles`,$$slots:{default:[Ou]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],te(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let At="bus_routes";function Mu(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Eu extends K{constructor(e){super(),X(this,e,Mu,Pu,V,{})}}function Nr(r){const e=Hu(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function Dr(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function Iu(r){let e;return{c(){e=y("Cycle paths")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Nu(r){let e,n,t,l,o,i,u,s;return u=new gt({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=O(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=O(),h(u.$$.fragment)},m(a,f){m(a,e,f),m(a,n,f),m(a,t,f),m(a,l,f),m(a,o,f),m(a,i,f),b(u,a,f),s=!0},p:q,i(a){s||(g(u.$$.fragment,a),s=!0)},o(a){d(u.$$.fragment,a),s=!1},d(a){a&&(_(e),_(n),_(t),_(l),_(o),_(i)),v(u,a)}}}function Du(r){let e,n,t;return n=new me({props:{$$slots:{default:[Nu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Fr(r){let e,n,t=Fe(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=jr(Dr(r,t,i));const o=i=>d(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Ce()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);m(i,e,u),n=!0},p(i,u){if(u&2){t=Fe(i[1]);let s;for(s=0;s<t.length;s+=1){const a=Dr(i,t,s);l[s]?(l[s].p(a,u),g(l[s],1)):(l[s]=jr(a),l[s].c(),g(l[s],1),l[s].m(e.parentNode,e))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)g(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)d(l[u]);n=!1},d(i){i&&_(e),ln(l,i)}}}function jr(r){let e,n,t,l=r[7]+"",o,i,u;return n=new Ie({props:{color:r[8]}}),{c(){e=A("div"),h(n.$$.fragment),t=O(),o=y(l),i=O()},m(s,a){m(s,e,a),b(n,e,null),w(e,t),w(e,o),w(e,i),u=!0},p:q,i(s){u||(g(n.$$.fragment,s),u=!0)},o(s){d(n.$$.fragment,s),u=!1},d(s){s&&_(e),v(n)}}}function Fu(r){Nr(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,p,$=r[6]+"",T;return{c(){e=A("h2"),t=y(n),l=O(),o=A("p"),i=y("Direction: "),u=A("b"),a=O(),f=A("p"),c=y("Width: "),p=A("b"),T=y($)},m(k,C){m(k,e,C),w(e,t),m(k,l,C),m(k,o,C),w(o,i),w(o,u),u.innerHTML=s,m(k,a,C),m(k,f,C),w(f,c),w(f,p),w(p,T)},p(k,C){Nr(k),C&8&&n!==(n=k[4]+"")&&U(t,n),C&8&&s!==(s=k[5]+"")&&(u.innerHTML=s),C&8&&$!==($=k[6]+"")&&U(T,$)},d(k){k&&(_(e),_(l),_(o),_(a),_(f))}}}function ju(r){let e,n;return e=new fe({props:{$$slots:{default:[Fu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bu(r){let e,n;const t=[G(Ot),{sourceLayer:Ot},{paint:{"line-color":xr(["get","kind"],{track:le.cycle_paths.track,lane:le.cycle_paths.lane,shared_use_segregated:le.cycle_paths.shared_use_segregated,shared_use_unsegregated:le.cycle_paths.shared_use_unsegregated},"red"),"line-width":nt,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[ju]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new ve({props:l}),e.$on("click",Wu),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?re(t,[i&0&&oe(G(Ot)),i&0&&{sourceLayer:Ot},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ru(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:Ot,$$slots:{right:[Du],default:[Iu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ce({props:s}),Y.push(()=>ee(e,"checked",u));let a=r[0]&&Fr(r);return o=new we({props:{url:`pmtiles://${de()}/v1/${Ot}.pmtiles`,$$slots:{default:[Bu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),m(f,t,c),a&&a.m(f,c),m(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&2048&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],te(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=Fr(f),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const $={};c&2049&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(_(t),_(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Ot="cycle_paths";function Hu(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Wu(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Gu(r,e,n){let t=[["Separated tracks",le.cycle_paths.track],["Unprotected lanes",le.cycle_paths.lane],["Shared-use (segregated)",le.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",le.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Uu extends K{constructor(e){super(),X(this,e,Gu,Ru,V,{})}}function zu(r){let e,n,t;return e=new Ie({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=y(`
  Major Road Network`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:q,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function qu(r){let e;return{c(){e=y(`Major Road Network
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Vu(r){let e,n,t,l,o,i,u;return t=new J({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[qu]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=A("p"),n=y("Data from the "),h(t.$$.fragment),l=y(", as of September 2021."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),w(e,n),b(t,e,null),w(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(g(t.$$.fragment,s),g(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function Ku(r){let e,n,t;return n=new me({props:{$$slots:{default:[Vu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Xu(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=y(n)},m(l,o){m(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&U(t,n)},d(l){l&&_(e)}}}function Zu(r){let e,n;return e=new fe({props:{$$slots:{default:[Xu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yu(r){let e,n;const t=[G(Pt),{sourceLayer:Pt},{manageHoverState:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Zu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?re(t,[i&0&&oe(G(Pt)),i&0&&{sourceLayer:Pt},t[2],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":x(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ju(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Pt,$$slots:{right:[Ku],default:[zu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ce({props:u}),Y.push(()=>ee(e,"checked",i)),l=new we({props:{url:`pmtiles://${de()}/v1/${Pt}.pmtiles`,$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],te(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let Pt="mrn";function Qu(r,e,n){let t=le.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class xu extends K{constructor(e){super(),X(this,e,Qu,Ju,V,{})}}function ec(r){let e;return{c(){e=y("Propensity to Cycle Tool")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function tc(r){let e;return{c(){e=y("the PCT website")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function nc(r){let e;return{c(){e=y("2017 journal article")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function rc(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new J({props:{href:"https://www.pct.bike",$$slots:{default:[tc]},$$scope:{ctx:r}}}),a=new J({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=O(),o=A("p"),i=y("See "),h(u.$$.fragment),s=y(" and "),h(a.$$.fragment),f=y(" for details on methodology and data sources.")},m(p,$){m(p,e,$),m(p,n,$),m(p,t,$),m(p,l,$),m(p,o,$),w(o,i),b(u,o,null),w(o,s),b(a,o,null),w(o,f),c=!0},p(p,$){const T={};$&1024&&(T.$$scope={dirty:$,ctx:p}),u.$set(T);const k={};$&1024&&(k.$$scope={dirty:$,ctx:p}),a.$set(k)},i(p){c||(g(u.$$.fragment,p),g(a.$$.fragment,p),c=!0)},o(p){d(u.$$.fragment,p),d(a.$$.fragment,p),c=!1},d(p){p&&(_(e),_(n),_(t),_(l),_(o)),v(u),v(a)}}}function lc(r){let e,n,t;return n=new me({props:{$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Br(r){let e,n,t,l,o,i,u,s;e=new _t({props:{colorScale:r[3],limits:r[4]}});function a($){r[7]($)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new tl({props:f}),Y.push(()=>ee(t,"value",a));function c($){r[8]($)}let p={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(p.value=r[1]),i=new on({props:p}),Y.push(()=>ee(i,"value",c)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(i.$$.fragment)},m($,T){b(e,$,T),m($,n,T),b(t,$,T),m($,o,T),b(i,$,T),s=!0},p($,T){const k={};!l&&T&1&&(l=!0,k.value=$[0],te(()=>l=!1)),t.$set(k);const C={};!u&&T&2&&(u=!0,C.value=$[1],te(()=>u=!1)),i.$set(C)},i($){s||(g(e.$$.fragment,$),g(t.$$.fragment,$),g(i.$$.fragment,$),s=!0)},o($){d(e.$$.fragment,$),d(t.$$.fragment,$),d(i.$$.fragment,$),s=!1},d($){$&&(_(n),_(o)),v(e,$),v(t,$),v(i,$)}}}function oc(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Dn(!1),t=Ce(),e.a=t},m(l,o){e.m(n,l,o),m(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(_(t),e.d())}}}function sc(r){let e,n;return e=new fe({props:{$$slots:{default:[oc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ic(r){let e,n;const t=[G(Ye),{sourceLayer:Ye},{paint:{"line-color":Te(["get",r[1]],r[4],r[3]),"line-width":nt,"line-opacity":x(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ye?"visible":"none"}}];let l={$$slots:{default:[sc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?re(t,[i&0&&oe(G(Ye)),i&0&&{sourceLayer:Ye},i&26&&{paint:{"line-color":Te(["get",o[1]],o[4],o[3]),"line-width":nt,"line-opacity":x(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ye?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ac(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Dn(!1),t=Ce(),e.a=t},m(l,o){e.m(n,l,o),m(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(_(t),e.d())}}}function fc(r){let e,n;return e=new fe({props:{$$slots:{default:[ac,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uc(r){let e,n;const t=[G(vt),{sourceLayer:vt},{manageHoverState:!0},{paint:{"line-color":Te(["get",r[1]],r[4],r[3]),"line-width":nt,"line-opacity":x(1,.5)}},{layout:{visibility:r[2]&&r[0]==vt?"visible":"none"}}];let l={$$slots:{default:[fc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?re(t,[i&0&&oe(G(vt)),i&0&&{sourceLayer:vt},t[2],i&26&&{paint:{"line-color":Te(["get",o[1]],o[4],o[3]),"line-width":nt,"line-opacity":x(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==vt?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function cc(r){let e,n,t,l,o,i,u,s;function a(p){r[6](p)}let f={id:Ye,$$slots:{right:[lc],default:[ec]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new ce({props:f}),Y.push(()=>ee(e,"checked",a));let c=r[2]&&Br(r);return o=new we({props:{url:`pmtiles://${de()}/v1/${Ye}.pmtiles`,$$slots:{default:[ic]},$$scope:{ctx:r}}}),u=new we({props:{url:`pmtiles://${de()}/v1/${vt}.pmtiles`,$$slots:{default:[uc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),c&&c.c(),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment)},m(p,$){b(e,p,$),m(p,t,$),c&&c.m(p,$),m(p,l,$),b(o,p,$),m(p,i,$),b(u,p,$),s=!0},p(p,[$]){const T={};$&1024&&(T.$$scope={dirty:$,ctx:p}),!n&&$&4&&(n=!0,T.checked=p[2],te(()=>n=!1)),e.$set(T),p[2]?c?(c.p(p,$),$&4&&g(c,1)):(c=Br(p),c.c(),g(c,1),c.m(l.parentNode,l)):c&&(ie(),d(c,1,1,()=>{c=null}),ae());const k={};$&1031&&(k.$$scope={dirty:$,ctx:p}),o.$set(k);const C={};$&1031&&(C.$$scope={dirty:$,ctx:p}),u.$set(C)},i(p){s||(g(e.$$.fragment,p),g(c),g(o.$$.fragment,p),g(u.$$.fragment,p),s=!0)},o(p){d(e.$$.fragment,p),d(c),d(o.$$.fragment,p),d(u.$$.fragment,p),s=!1},d(p){p&&(_(t),_(l),_(i)),v(e,p),c&&c.d(p),v(o,p),v(u,p)}}}let Ye="pct_commute",vt="pct_school";function pc(r,e,n){let t=le.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ye,i="baseline",u=!1;function s(p){let $=p.baseline,T=p.gov_target,k=p.go_dutch,C=`<h2>Trip purpose: ${o==Ye?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${$.toLocaleString()}</b></p>`,$==0)C+=`<p>Government target (2025): <b>${T.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${k.toLocaleString()}</b></p>`;else{let S=(T/$).toFixed(1),P=(k/$).toFixed(1);C+=`<p>Government target (2025): ${T.toLocaleString()} (<b>${S}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${k.toLocaleString()} (<b>${P}x</b> of baseline)</p>`}return C}function a(p){u=p,n(2,u)}function f(p){o=p,n(0,o)}function c(p){i=p,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class $c extends K{constructor(e){super(),X(this,e,pc,cc,V,{})}}function mc(r){let e;return{c(){e=y("OS Speeds")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function _c(r){let e;return{c(){e=y("Basemap")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function gc(r){let e;return{c(){e=y(`Public Sector Geospatial Agreement
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function dc(r){let e,n,t,l,o,i,u,s,a,f,c,p;return t=new J({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[_c]},$$scope:{ctx:r}}}),f=new J({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[gc]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=y("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=y(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=O(),s=A("p"),a=y(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=y(".")},m($,T){m($,e,T),w(e,n),b(t,e,null),w(e,l),m($,o,T),m($,i,T),m($,u,T),m($,s,T),w(s,a),b(f,s,null),w(s,c),p=!0},p($,T){const k={};T&256&&(k.$$scope={dirty:T,ctx:$}),t.$set(k);const C={};T&256&&(C.$$scope={dirty:T,ctx:$}),f.$set(C)},i($){p||(g(t.$$.fragment,$),g(f.$$.fragment,$),p=!0)},o($){d(t.$$.fragment,$),d(f.$$.fragment,$),p=!1},d($){$&&(_(e),_(o),_(i),_(u),_(s)),v(t),v(f)}}}function hc(r){let e,n,t;return n=new me({props:{$$slots:{default:[dc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Rr(r){let e,n,t,l,o;e=new _t({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new tl({props:u}),Y.push(()=>ee(t,"value",i)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(s,a){b(e,s,a),m(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],te(()=>l=!1)),t.$set(f)},i(s){o||(g(e.$$.fragment,s),g(t.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),o=!1},d(s){s&&_(n),v(e,s),v(t,s)}}}function bc(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,p=r[4][r[7].highest_description]+"",$,T;return{c(){e=A("p"),n=y("Posted speed limit: "),l=y(t),o=y(" mph"),i=O(),u=A("p"),s=y("Highest average speed: "),f=y(a),c=y(" mph (during "),$=y(p),T=y(")")},m(k,C){m(k,e,C),w(e,n),w(e,l),w(e,o),m(k,i,C),m(k,u,C),w(u,s),w(u,f),w(u,c),w(u,$),w(u,T)},p(k,C){C&128&&t!==(t=k[7].indicative_mph+"")&&U(l,t),C&128&&a!==(a=k[7].highest_mph+"")&&U(f,a),C&128&&p!==(p=k[4][k[7].highest_description]+"")&&U($,p)},d(k){k&&(_(e),_(i),_(u))}}}function vc(r){let e,n;return e=new fe({props:{$$slots:{default:[bc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wc(r){let e,n;const t=[G(Mt),{sourceLayer:Mt},{manageHoverState:!0},{paint:{"line-color":Te(["get",r[0]],r[3],r[2]),"line-width":nt,"line-opacity":x(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[vc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?re(t,[i&0&&oe(G(Mt)),i&0&&{sourceLayer:Mt},t[2],i&13&&{paint:{"line-color":Te(["get",o[0]],o[3],o[2]),"line-width":nt,"line-opacity":x(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function yc(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:Mt,$$slots:{right:[hc],default:[mc]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new ce({props:s}),Y.push(()=>ee(e,"checked",u));let a=r[1]&&Rr(r);return o=new we({props:{url:`pmtiles://${Fn()}/v1/${Mt}.pmtiles`,$$slots:{default:[wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),m(f,t,c),a&&a.m(f,c),m(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&256&&(p.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,p.checked=f[1],te(()=>n=!1)),e.$set(p),f[1]?a?(a.p(f,c),c&2&&g(a,1)):(a=Rr(f),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const $={};c&259&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(_(t),_(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Mt="road_speeds";function kc(r,e,n){let t=le.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class Sc extends K{constructor(e){super(),X(this,e,kc,yc,V,{})}}function Tc(r){let e;return{c(){e=y("OS Road widths")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Cc(r){let e;return{c(){e=y(`Public Sector Geospatial Agreement
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Lc(r){let e,n,t,l,o,i,u,s,a;return u=new J({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=O(),o=A("p"),i=y(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=y(".")},m(f,c){m(f,e,c),m(f,n,c),m(f,t,c),m(f,l,c),m(f,o,c),w(o,i),b(u,o,null),w(o,s),a=!0},p(f,c){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),u.$set(p)},i(f){a||(g(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(_(e),_(n),_(t),_(l),_(o)),v(u)}}}function Ac(r){let e,n,t;return n=new me({props:{$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Hr(r){let e,n;return e=new _t({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oc(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",p,$;return{c(){e=A("p"),n=y("Average width: "),t=A("b"),o=y(l),i=y(`
        meters`),u=O(),s=A("p"),a=y("Minimum width: "),f=A("b"),p=y(c),$=y(`
        meters`)},m(T,k){m(T,e,k),w(e,n),w(e,t),w(t,o),w(e,i),m(T,u,k),m(T,s,k),w(s,a),w(s,f),w(f,p),w(s,$)},p(T,k){k&16&&l!==(l=T[4].average+"")&&U(o,l),k&16&&c!==(c=T[4].minimum+"")&&U(p,c)},d(T){T&&(_(e),_(u),_(s))}}}function Pc(r){let e,n;return e=new fe({props:{$$slots:{default:[Oc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mc(r){let e,n;const t=[G(Et),{sourceLayer:Et},{manageHoverState:!0},{paint:{"line-color":Te(["get","average"],r[2],r[1]),"line-width":nt,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Pc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new ve({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?re(t,[i&0&&oe(G(Et)),i&0&&{sourceLayer:Et},t[2],i&6&&{paint:{"line-color":Te(["get","average"],o[2],o[1]),"line-width":nt,"line-opacity":x(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ec(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:Et,$$slots:{right:[Ac],default:[Tc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ce({props:s}),Y.push(()=>ee(e,"checked",u));let a=r[0]&&Hr(r);return o=new we({props:{url:`pmtiles://${Fn()}/v1/${Et}.pmtiles`,$$slots:{default:[Mc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),m(f,t,c),a&&a.m(f,c),m(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&32&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],te(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=Hr(f),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(_(t),_(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Et="road_widths";function Ic(r,e,n){let t=le.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Nc extends K{constructor(e){super(),X(this,e,Ic,Ec,V,{})}}function Dc(r){let e,n,t;return{c(){e=A("input"),D(e,"class","govuk-file-upload"),D(e,"id","load-criticals"),D(e,"type","file")},m(l,o){m(l,e,o),r[7](e),n||(t=$e(e,"change",r[5]),n=!0)},p:q,d(l){l&&_(e),r[7](null),n=!1,t()}}}function Wr(r){let e,n;return e=new Zt({props:{small:!0,$$slots:{default:[jc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fc(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new Ie({props:{color:Ht}}),{c(){h(e.$$.fragment),n=y(`
        Show `),l=y(t),o=y(" issues")},m(u,s){b(e,u,s),m(u,n,s),m(u,l,s),m(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&U(l,t)},i(u){i||(g(e.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),i=!1},d(u){u&&(_(n),_(l),_(o)),v(e,u)}}}function jc(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[Fc]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ce({props:o}),Y.push(()=>ee(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],te(()=>n=!1)),e.$set(s)},i(i){t||(g(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Bc(r){let e,n,t,l,o,i;e=new el({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Dc]},$$scope:{ctx:r}}}),t=new nl({props:{errorMessage:r[3]}});let u=r[2]>0&&Wr(r);return{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),u&&u.c(),o=Ce()},m(s,a){b(e,s,a),m(s,n,a),b(t,s,a),m(s,l,a),u&&u.m(s,a),m(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&g(u,1)):(u=Wr(s),u.c(),g(u,1),u.m(o.parentNode,o)):u&&(ie(),d(u,1,1,()=>{u=null}),ae())},i(s){i||(g(e.$$.fragment,s),g(t.$$.fragment,s),g(u),i=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(u),i=!1},d(s){s&&(_(n),_(l),_(o)),v(e,s),v(t,s),u&&u.d(s)}}}function Rc(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,p,$,T,k=r[10].notes+"",C,S,P,j,B,L,M,N=r[10].id+"",I,E,W,R,H,z=(r[10].inspector??"???")+"",pe,Le,he,ke=r[10].submission_time+"",Ge,Ne,be,et,De,Ue=r[10].scheme_reference+"",tt,ot,Ae,Q=r[10].current_design_stage+"",ue;return{c(){e=A("div"),n=A("h2"),l=y(t),o=O(),i=A("p"),u=A("u"),u.textContent="Location",s=y(`
          : `),f=y(a),c=O(),p=A("p"),$=A("u"),$.textContent="Notes",T=y(`
          : `),C=y(k),S=O(),P=A("hr"),j=O(),B=A("p"),L=y("Critical issue ID: "),M=A("b"),I=y(N),E=O(),W=A("p"),R=y("Submitted by "),H=A("b"),pe=y(z),Le=y(`
          at
          `),he=A("b"),Ge=y(ke),Ne=O(),be=A("p"),et=y("For scheme "),De=A("b"),tt=y(Ue),ot=y(`
          in stage
          `),Ae=A("b"),ue=y(Q),We(e,"max-width","30vw")},m(Z,Oe){m(Z,e,Oe),w(e,n),w(n,l),w(e,o),w(e,i),w(i,u),w(i,s),w(i,f),w(e,c),w(e,p),w(p,$),w(p,T),w(p,C),w(e,S),w(e,P),w(e,j),w(e,B),w(B,L),w(B,M),w(M,I),w(e,E),w(e,W),w(W,R),w(W,H),w(H,pe),w(W,Le),w(W,he),w(he,Ge),w(e,Ne),w(e,be),w(be,et),w(be,De),w(De,tt),w(be,ot),w(be,Ae),w(Ae,ue)},p(Z,Oe){Oe&1024&&t!==(t=Z[10].critical_type+"")&&U(l,t),Oe&1024&&a!==(a=Z[10].location_description+"")&&U(f,a),Oe&1024&&k!==(k=Z[10].notes+"")&&U(C,k),Oe&1024&&N!==(N=Z[10].id+"")&&U(I,N),Oe&1024&&z!==(z=(Z[10].inspector??"???")+"")&&U(pe,z),Oe&1024&&ke!==(ke=Z[10].submission_time+"")&&U(Ge,ke),Oe&1024&&Ue!==(Ue=Z[10].scheme_reference+"")&&U(tt,Ue),Oe&1024&&Q!==(Q=Z[10].current_design_stage+"")&&U(ue,Q)},d(Z){Z&&_(e)}}}function Hc(r){let e,n;return e=new fe({props:{$$slots:{default:[Rc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wc(r){let e,n,t,l,o,i;const u=[G(`${ct}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Ht,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let $=0;$<u.length;$+=1)s=ne(s,u[$]);e=new mt({props:s}),e.$on("click",r[6]);const a=[G(`${ct}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let $=0;$<a.length;$+=1)f=ne(f,a[$]);t=new Zo({props:f});const c=[G(`${ct}-points`),{applyToClusters:!1},{manageHoverState:!0},{paint:{"circle-color":Ht,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let p={$$slots:{default:[Hc]},$$scope:{ctx:r}};for(let $=0;$<c.length;$+=1)p=ne(p,c[$]);return o=new mt({props:p}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment)},m($,T){b(e,$,T),m($,n,T),b(t,$,T),m($,l,T),b(o,$,T),i=!0},p($,T){const k=T&2?re(u,[T&0&&oe(G(`${ct}-clusters`)),u[1],T&0&&{paint:{"circle-color":Ht,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},T&2&&{layout:{visibility:$[1]?"visible":"none"}},u[4]]):{};e.$set(k);const C=T&2?re(a,[T&0&&oe(G(`${ct}-counts`)),a[1],T&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:$[1]?"visible":"none"}}]):{};t.$set(C);const S=T&2?re(c,[T&0&&oe(G(`${ct}-points`)),c[1],c[2],T&0&&{paint:{"circle-color":Ht,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},T&2&&{layout:{visibility:$[1]?"visible":"none"}}]):{};T&2048&&(S.$$scope={dirty:T,ctx:$}),o.$set(S)},i($){i||(g(e.$$.fragment,$),g(t.$$.fragment,$),g(o.$$.fragment,$),i=!0)},o($){d(e.$$.fragment,$),d(t.$$.fragment,$),d(o.$$.fragment,$),i=!1},d($){$&&(_(n),_(l)),v(e,$),v(t,$),v(o,$)}}}function Gc(r){let e,n,t,l;return e=new Re({props:{label:"Critical Issues",$$slots:{default:[Bc]},$$scope:{ctx:r}}}),t=new Bt({props:{id:ct,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),m(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&_(n),v(e,o),v(t,o)}}}let ct="criticals",Ht="red";function Uc(r,e,n){let t;Qe(r,Ft,$=>n(9,t=$));let l,o=!0,i=0,u="",s=Ln();async function a($){try{n(4,s=await ra(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(T){n(3,u=`The file you loaded is broken: ${T}`)}}function f($){t.getSource(ct).getClusterExpansionZoom($.detail.features[0].properties.cluster_id,(T,k)=>{T||t.easeTo({center:$.detail.features[0].geometry.coordinates,zoom:k})})}function c($){Y[$?"unshift":"push"](()=>{l=$,n(0,l)})}function p($){o=$,n(1,o)}return[l,o,i,u,s,a,f,c,p]}class zc extends K{constructor(e){super(),X(this,e,Uc,Gc,V,{})}}function qc(r){let e,n,t;return e=new Ie({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=y(`
  Crossings`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:q,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function Vc(r){let e;return{c(){e=y("crossing")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Kc(r){let e,n,t,l,o,i,u;return t=new J({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),i=new gt({}),{c(){e=A("p"),n=y("This shows "),h(t.$$.fragment),l=y(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),w(e,n),b(t,e,null),w(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(g(t.$$.fragment,s),g(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function Xc(r){let e,n,t;return n=new me({props:{$$slots:{default:[Kc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Zc(r){let e,n=Gr(r[3])+"",t;return{c(){e=A("p"),t=y(n)},m(l,o){m(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=Gr(l[3])+"")&&U(t,n)},d(l){l&&_(e)}}}function Yc(r){let e,n;return e=new fe({props:{$$slots:{default:[Zc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jc(r){let e,n;const t=[G(It),{sourceLayer:It},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let l={$$slots:{default:[Yc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new mt({props:l}),e.$on("click",xc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?re(t,[i&0&&oe(G(It)),i&0&&{sourceLayer:It},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Qc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:It,$$slots:{right:[Xc],default:[qc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ce({props:u}),Y.push(()=>ee(e,"checked",i)),l=new we({props:{url:`pmtiles://${de()}/v1/${It}.pmtiles`,$$slots:{default:[Jc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],te(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let It="crossings";function Gr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function xc(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function ep(r,e,n){let t=le.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class tp extends K{constructor(e){super(),X(this,e,ep,Qc,V,{})}}function np(r){let e,n,t;return e=new Ie({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=y(`
  Cycle parking`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:q,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function rp(r){let e;return{c(){e=y("OpenStreetMap")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function lp(r){let e,n,t,l,o,i,u;return t=new J({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[rp]},$$scope:{ctx:r}}}),i=new gt({}),{c(){e=A("p"),n=y("Cycle parking, according to "),h(t.$$.fragment),l=y(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),w(e,n),b(t,e,null),w(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(g(t.$$.fragment,s),g(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function op(r){let e,n,t;return n=new me({props:{$$slots:{default:[lp]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function sp(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=y("Capacity: "),t=A("b"),o=y(l)},m(i,u){m(i,e,u),w(e,n),w(e,t),w(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&U(o,l)},d(i){i&&_(e)}}}function ip(r){let e,n;return e=new fe({props:{$$slots:{default:[sp,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ap(r){let e,n;const t=[G(Nt),{sourceLayer:Nt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[ip]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new mt({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?re(t,[i&0&&oe(G(Nt)),i&0&&{sourceLayer:Nt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function fp(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Nt,$$slots:{right:[op],default:[np]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ce({props:u}),Y.push(()=>ee(e,"checked",i)),l=new we({props:{url:`pmtiles://${de()}/v1/${Nt}.pmtiles`,$$slots:{default:[ap]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],te(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let Nt="cycle_parking";function up(r,e,n){let t=le.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class cp extends K{constructor(e){super(),X(this,e,up,fp,V,{})}}function pp(r){let e,n,t,l;return e=new Ie({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=O(),t=y(r[2])},m(o,i){b(e,o,i),m(o,n,i),m(o,t,i),l=!0},p(o,i){(!l||i&4)&&U(t,o[2])},i(o){l||(g(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(_(n),_(t)),v(e,o)}}}function $p(r){let e;const n=r[5].default,t=qt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Vt(t,n,l,l[7],e?Xt(n,l[7],o,null):Kt(l[7]),null)},i(l){e||(g(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function mp(r){let e,n,t;return n=new me({props:{$$slots:{default:[$p]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function _p(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=y(n)},m(l,o){m(l,e,o),w(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&U(t,n)},d(l){l&&_(e)}}}function gp(r){let e,n;return e=new fe({props:{$$slots:{default:[_p,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dp(r){let e,n;const t=[G(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":x(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0}];let l={$$slots:{default:[gp]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new rt({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?re(t,[i&1&&oe(G(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":x(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function hp(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[mp],default:[pp]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new ce({props:u}),Y.push(()=>ee(e,"checked",i)),l=new we({props:{url:`pmtiles://${de()}/v1/${r[0]}.pmtiles`,$$slots:{default:[dp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],te(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${de()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}function bp(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=le[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class Bn extends K{constructor(e){super(),X(this,e,bp,hp,V,{name:0,singularNoun:1,pluralNoun:2})}}function vp(r){let e;return{c(){e=y("hospital")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function wp(r){let e,n,t,l,o,i,u;return t=new J({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[vp]},$$scope:{ctx:r}}}),i=new gt({}),{c(){e=A("p"),n=y("This shows "),h(t.$$.fragment),l=y(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),w(e,n),b(t,e,null),w(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(g(t.$$.fragment,s),g(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function yp(r){let e,n;return e=new Bn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[wp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class kp extends K{constructor(e){super(),X(this,e,null,yp,V,{})}}function Sp(r){let e,n,t;return e=new Ie({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=y(`
  Railway Stations`)},m(l,o){b(e,l,o),m(l,n,o),t=!0},p:q,i(l){t||(g(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&_(n),v(e,l)}}}function Tp(r){let e;return{c(){e=y("railway station")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Cp(r){let e,n,t,l,o,i,u;return t=new J({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Tp]},$$scope:{ctx:r}}}),i=new gt({}),{c(){e=A("p"),n=y("This shows "),h(t.$$.fragment),l=y(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),w(e,n),b(t,e,null),w(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(g(t.$$.fragment,s),g(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function Lp(r){let e,n,t;return n=new me({props:{$$slots:{default:[Cp]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Ap(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=y(n)},m(l,o){m(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&U(t,n)},d(l){l&&_(e)}}}function Op(r){let e,n;return e=new fe({props:{$$slots:{default:[Ap,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pp(r){let e,n;const t=[G(fn),{paint:{"circle-color":r[1],"circle-radius":sn/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Op]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new mt({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?re(t,[i&0&&oe(G(fn)),i&2&&{paint:{"circle-color":o[1],"circle-radius":sn/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Mp(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:fn,$$slots:{right:[Lp],default:[Sp]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ce({props:u}),Y.push(()=>ee(e,"checked",i)),l=new Bt({props:{data:`${de()}/v1/${fn}.geojson`,$$slots:{default:[Pp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],te(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),v(e,s),v(l,s)}}}let fn="railway_stations";function Ep(r,e,n){let t=le.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ip extends K{constructor(e){super(),X(this,e,Ep,Mp,V,{})}}function Np(r){let e;return{c(){e=y("primary and secondary schools")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Dp(r){let e,n,t,l,o,i,u;return t=new J({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[Np]},$$scope:{ctx:r}}}),i=new gt({}),{c(){e=A("p"),n=y("This shows "),h(t.$$.fragment),l=y(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=O(),h(i.$$.fragment)},m(s,a){m(s,e,a),w(e,n),b(t,e,null),w(e,l),m(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(g(t.$$.fragment,s),g(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(e),_(o)),v(t),v(i,s)}}}function Fp(r){let e,n;return e=new Bn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[Dp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class jp extends K{constructor(e){super(),X(this,e,null,Fp,V,{})}}function Bp(r){let e;return{c(){e=y("sports pitches")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Rp(r){let e;return{c(){e=y("sports centres")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Hp(r){let e,n,t,l,o,i,u,s,a;return t=new J({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Bp]},$$scope:{ctx:r}}}),o=new J({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Rp]},$$scope:{ctx:r}}}),s=new gt({}),{c(){e=A("p"),n=y("This shows "),h(t.$$.fragment),l=y(" and "),h(o.$$.fragment),i=y(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),h(s.$$.fragment)},m(f,c){m(f,e,c),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,i),m(f,u,c),b(s,f,c),a=!0},p(f,c){const p={};c&1&&(p.$$scope={dirty:c,ctx:f}),t.$set(p);const $={};c&1&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(_(e),_(u)),v(t),v(o),v(s,f)}}}function Wp(r){let e,n;return e=new Bn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Hp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Gp extends K{constructor(e){super(),X(this,e,null,Wp,V,{})}}function Up(r){let e;return{c(){e=y("Vehicle counts")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function zp(r){let e;return{c(){e=y(`DfT road statistics
        `)},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function qp(r){let e;return{c(){e=y("methodology")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function Vp(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new J({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[zp]},$$scope:{ctx:r}}}),o=new J({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[qp]},$$scope:{ctx:r}}}),f=new lt({}),{c(){e=A("p"),n=y("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=y(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=y(" for details and caveats about the measurements."),u=O(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=O(),h(f.$$.fragment)},m(p,$){m(p,e,$),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,i),m(p,u,$),m(p,s,$),m(p,a,$),b(f,p,$),c=!0},p(p,$){const T={};$&64&&(T.$$scope={dirty:$,ctx:p}),t.$set(T);const k={};$&64&&(k.$$scope={dirty:$,ctx:p}),o.$set(k)},i(p){c||(g(t.$$.fragment,p),g(o.$$.fragment,p),g(f.$$.fragment,p),c=!0)},o(p){d(t.$$.fragment,p),d(o.$$.fragment,p),d(f.$$.fragment,p),c=!1},d(p){p&&(_(e),_(u),_(s),_(a)),v(t),v(o),v(f,p)}}}function Kp(r){let e,n,t;return n=new me({props:{$$slots:{default:[Vp]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),D(e,"slot","right")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function Ur(r){let e,n;return e=new _t({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xp(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,p,$,T=r[5].pedal_cycles_2022.toLocaleString()+"",k,C,S,P,j,B=r[5].method+"",L;return{c(){e=A("h2"),t=y(n),l=O(),o=A("p"),i=y("Total motor vehicles (2022 AADF): "),u=A("b"),a=y(s),f=O(),c=A("p"),p=y("Total pedal cycles (2022 AADF): "),$=A("b"),k=y(T),C=O(),S=A("p"),P=y("Count method: "),j=A("b"),L=y(B)},m(M,N){m(M,e,N),w(e,t),m(M,l,N),m(M,o,N),w(o,i),w(o,u),w(u,a),m(M,f,N),m(M,c,N),w(c,p),w(c,$),w($,k),m(M,C,N),m(M,S,N),w(S,P),w(S,j),w(j,L)},p(M,N){N&32&&n!==(n=M[5].location+"")&&U(t,n),N&32&&s!==(s=M[5].motor_vehicles_2022.toLocaleString()+"")&&U(a,s),N&32&&T!==(T=M[5].pedal_cycles_2022.toLocaleString()+"")&&U(k,T),N&32&&B!==(B=M[5].method+"")&&U(L,B)},d(M){M&&(_(e),_(l),_(o),_(f),_(c),_(C),_(S))}}}function Zp(r){let e,n;return e=new fe({props:{$$slots:{default:[Xp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yp(r){let e,n;const t=[G(Dt),{sourceLayer:Dt},{paint:{"circle-color":Te(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let l={$$slots:{default:[Zp]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ne(l,t[o]);return e=new mt({props:l}),e.$on("click",Qp),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?re(t,[i&0&&oe(G(Dt)),i&0&&{sourceLayer:Dt},i&6&&{paint:{"circle-color":Te(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Jp(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:Dt,$$slots:{right:[Kp],default:[Up]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ce({props:s}),Y.push(()=>ee(e,"checked",u));let a=r[0]&&Ur(r);return o=new we({props:{url:`pmtiles://${de()}/v1/${Dt}.pmtiles`,$$slots:{default:[Yp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),l=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),m(f,t,c),a&&a.m(f,c),m(f,l,c),b(o,f,c),i=!0},p(f,[c]){const p={};c&64&&(p.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,p.checked=f[0],te(()=>n=!1)),e.$set(p),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=Ur(f),a.c(),g(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const $={};c&65&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){i||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(_(t),_(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Dt="vehicle_counts";function Qp(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function xp(r,e,n){let t=le.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class e$ extends K{constructor(e){super(),X(this,e,xp,Jp,V,{})}}function t$(r){let e,n,t,l,o,i,u,s;return e=new jp({}),t=new kp({}),o=new Gp({}),u=new Ip({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment)},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),m(a,l,f),b(o,a,f),m(a,i,f),b(u,a,f),s=!0},i(a){s||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),s=!1},d(a){a&&(_(n),_(l),_(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function n$(r){let e,n;return e=new Zt({props:{small:!0,$$slots:{default:[t$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function r$(r){let e,n,t,l,o,i,u,s,a,f;return e=new Uu({}),t=new xu({}),o=new Eu({}),u=new cp({}),a=new tp({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(c,p){b(e,c,p),m(c,n,p),b(t,c,p),m(c,l,p),b(o,c,p),m(c,i,p),b(u,c,p),m(c,s,p),b(a,c,p),f=!0},i(c){f||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(_(n),_(l),_(i),_(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function l$(r){let e,n;return e=new Zt({props:{small:!0,$$slots:{default:[r$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function o$(r){let e,n,t,l,o,i,u,s,a,f;return e=new iu({}),t=new hu({}),o=new mf({}),u=new Ff({}),a=new Yf({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(c,p){b(e,c,p),m(c,n,p),b(t,c,p),m(c,l,p),b(o,c,p),m(c,i,p),b(u,c,p),m(c,s,p),b(a,c,p),f=!0},i(c){f||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(_(n),_(l),_(i),_(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function s$(r){let e,n;return e=new Zt({props:{small:!0,$$slots:{default:[o$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function i$(r){let e,n,t,l;return e=new nf({}),t=new Tf({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),m(o,n,i),b(t,o,i),l=!0},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&_(n),v(e,o),v(t,o)}}}function a$(r){let e,n,t,l;return e=new Nc({}),t=new Sc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,i){b(e,o,i),m(o,n,i),b(t,o,i),l=!0},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&_(n),v(e,o),v(t,o)}}}function f$(r){let e,n,t,l,o=Nn()=="Private (development)",i,u;e=new e$({}),t=new $c({});let s=o&&a$();return{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),s&&s.c(),i=Ce()},m(a,f){b(e,a,f),m(a,n,f),b(t,a,f),m(a,l,f),s&&s.m(a,f),m(a,i,f),u=!0},p:q,i(a){u||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(s),u=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(s),u=!1},d(a){a&&(_(n),_(l),_(i)),v(e,a),v(t,a),s&&s.d(a)}}}function u$(r){let e,n,t,l,o;function i(s){r[4](s)}let u={displayEnableButton:!0};return r[1]!==void 0&&(u.isInactive=r[1]),e=new ro({props:u}),r[3](e),Y.push(()=>ee(e,"isInactive",i)),l=new Ta({}),{c(){h(e.$$.fragment),t=O(),h(l.$$.fragment)},m(s,a){b(e,s,a),m(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&2&&(n=!0,f.isInactive=s[1],te(()=>n=!1)),e.$set(f)},i(s){o||(g(e.$$.fragment,s),g(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&_(t),r[3](null),v(e,s),v(l,s)}}}function c$(r){let e,n,t,l,o,i,u,s,a,f,c,p,$,T,k,C;return e=new zc({}),t=new Re({props:{label:"Trip generators",$$slots:{default:[n$]},$$scope:{ctx:r}}}),o=new Re({props:{label:"Existing infrastructure",$$slots:{default:[l$]},$$scope:{ctx:r}}}),u=new Re({props:{label:"Boundaries",$$slots:{default:[s$]},$$scope:{ctx:r}}}),a=new Re({props:{label:"Census",$$slots:{default:[i$]},$$scope:{ctx:r}}}),c=new Re({props:{label:"Other",$$slots:{default:[f$]},$$scope:{ctx:r}}}),$=new Re({props:{label:"Tools",$$slots:{default:[u$]},$$scope:{ctx:r}}}),k=new no({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment),f=O(),h(c.$$.fragment),p=O(),h($.$$.fragment),T=O(),h(k.$$.fragment)},m(S,P){b(e,S,P),m(S,n,P),b(t,S,P),m(S,l,P),b(o,S,P),m(S,i,P),b(u,S,P),m(S,s,P),b(a,S,P),m(S,f,P),b(c,S,P),m(S,p,P),b($,S,P),m(S,T,P),b(k,S,P),C=!0},p(S,P){const j={};P&32&&(j.$$scope={dirty:P,ctx:S}),t.$set(j);const B={};P&32&&(B.$$scope={dirty:P,ctx:S}),o.$set(B);const L={};P&32&&(L.$$scope={dirty:P,ctx:S}),u.$set(L);const M={};P&32&&(M.$$scope={dirty:P,ctx:S}),a.$set(M);const N={};P&32&&(N.$$scope={dirty:P,ctx:S}),c.$set(N);const I={};P&35&&(I.$$scope={dirty:P,ctx:S}),$.$set(I);const E={};P&2&&(E.disabled=!S[1]),k.$set(E)},i(S){C||(g(e.$$.fragment,S),g(t.$$.fragment,S),g(o.$$.fragment,S),g(u.$$.fragment,S),g(a.$$.fragment,S),g(c.$$.fragment,S),g($.$$.fragment,S),g(k.$$.fragment,S),C=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(o.$$.fragment,S),d(u.$$.fragment,S),d(a.$$.fragment,S),d(c.$$.fragment,S),d($.$$.fragment,S),d(k.$$.fragment,S),C=!1},d(S){S&&(_(n),_(l),_(i),_(s),_(f),_(p),_(T)),v(e,S),v(t,S),v(o,S),v(u,S),v(a,S),v(c,S),v($,S),v(k,S)}}}function p$(r){let e,n,t,l;return e=new Re({props:{label:"Layers",open:!0,$$slots:{default:[c$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0,t||(l=$e(window,"keydown",r[2]),t=!0)},p(o,[i]){const u={};i&35&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o),t=!1,l()}}}function $$(r,e,n){let t;Qe(r,zn,s=>n(1,t=s));let l;function o(s){!t&&s.key=="Escape"&&(l.disableStreetView(),s.preventDefault())}function i(s){Y[s?"unshift":"push"](()=>{l=s,n(0,l)})}function u(s){t=s,zn.set(t)}return[l,t,o,i,u]}class m$ extends K{constructor(e){super(),X(this,e,$$,p$,V,{})}}function _$(r,e,n){let{loadFile:t}=e;return jt(async()=>{let o=await(await fetch(`${Fn()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class g$ extends K{constructor(e){super(),X(this,e,_$,null,V,{loadFile:0})}}function d$(r){let e;return{c(){e=y("Show on map")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function h$(r){let e;return{c(){e=y("Edit scheme locally")},m(n,t){m(n,e,t)},d(n){n&&_(e)}}}function b$(r){let e,n,t=r[0].authority_or_region+"",l,o,i,u,s=r[0].capital_scheme_id+"",a,f,c,p,$=r[0].funding_programme+"",T,k,C,S,P,j,B;return S=new Gt({props:{$$slots:{default:[d$]},$$scope:{ctx:r}}}),S.$on("click",r[3]),j=new Gt({props:{disabled:r[1],title:r[2],$$slots:{default:[h$]},$$scope:{ctx:r}}}),j.$on("click",r[4]),{c(){e=A("p"),n=y("Authority or region: "),l=y(t),o=O(),i=A("p"),u=y("Capital scheme ID: "),a=y(s),f=O(),c=A("p"),p=y("Funding programme: "),T=y($),k=O(),C=A("div"),h(S.$$.fragment),P=O(),h(j.$$.fragment),D(C,"class","govuk-button-group")},m(L,M){m(L,e,M),w(e,n),w(e,l),m(L,o,M),m(L,i,M),w(i,u),w(i,a),m(L,f,M),m(L,c,M),w(c,p),w(c,T),m(L,k,M),m(L,C,M),b(S,C,null),w(C,P),b(j,C,null),B=!0},p(L,M){(!B||M&1)&&t!==(t=L[0].authority_or_region+"")&&U(l,t),(!B||M&1)&&s!==(s=L[0].capital_scheme_id+"")&&U(a,s),(!B||M&1)&&$!==($=L[0].funding_programme+"")&&U(T,$);const N={};M&256&&(N.$$scope={dirty:M,ctx:L}),S.$set(N);const I={};M&256&&(I.$$scope={dirty:M,ctx:L}),j.$set(I)},i(L){B||(g(S.$$.fragment,L),g(j.$$.fragment,L),B=!0)},o(L){d(S.$$.fragment,L),d(j.$$.fragment,L),B=!1},d(L){L&&(_(e),_(o),_(i),_(f),_(c),_(k),_(C)),v(S),v(j)}}}function v$(r){let e,n;return e=new Re({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[b$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),l&257&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function w$(r,e,n){let t;Qe(r,Ft,c=>n(7,t=c));let{schemesGj:l}=e,{scheme:o}=e,{authorityNames:i}=e,u=!i.has(o.authority_or_region),s=u?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function a(){let c={type:"FeatureCollection",features:l.features.filter(p=>p.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(Jl(c),{padding:20,animate:!1})}function f(){let c={type:"FeatureCollection",features:l.features.filter($=>$.properties.scheme_reference==o.scheme_reference)},p=o.authority_or_region;window.localStorage.setItem(p,JSON.stringify(c)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return r.$$set=c=>{"schemesGj"in c&&n(5,l=c.schemesGj),"scheme"in c&&n(0,o=c.scheme),"authorityNames"in c&&n(6,i=c.authorityNames)},[o,u,s,a,f,l,i]}class y$ extends K{constructor(e){super(),X(this,e,w$,v$,V,{schemesGj:5,scheme:0,authorityNames:6})}}const k$=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function zr(r){let e,n,t=qn(r[0].length_meters)+"",l;return{c(){e=A("p"),n=y("Length: "),l=y(t)},m(o,i){m(o,e,i),w(e,n),w(e,l)},p(o,i){i&1&&t!==(t=qn(o[0].length_meters)+"")&&U(l,t)},d(o){o&&_(e)}}}function qr(r){let e,n=r[1](r[0].description)+"";return{c(){e=A("p")},m(t,l){m(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&_(e)}}}function S$(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,p=r[0].scheme_reference+"",$,T,k,C=r[0].length_meters&&zr(r),S=r[0].description&&qr(r);return{c(){e=A("div"),n=A("h2"),t=new Dn(!1),o=y(" ("),u=y(i),s=y(")"),a=O(),f=A("p"),c=y("Scheme reference: "),$=y(p),T=O(),C&&C.c(),k=O(),S&&S.c(),t.a=o,We(e,"max-width","30vw")},m(P,j){m(P,e,j),w(e,n),t.m(l,n),w(n,o),w(n,u),w(n,s),w(e,a),w(e,f),w(f,c),w(f,$),w(e,T),C&&C.m(e,null),w(e,k),S&&S.m(e,null)},p(P,[j]){j&1&&l!==(l=P[1](P[0].name)+"")&&t.p(l),j&1&&i!==(i=P[0].intervention_type+"")&&U(u,i),j&1&&p!==(p=P[0].scheme_reference+"")&&U($,p),P[0].length_meters?C?C.p(P,j):(C=zr(P),C.c(),C.m(e,k)):C&&(C.d(1),C=null),P[0].description?S?S.p(P,j):(S=qr(P),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:q,o:q,d(P){P&&_(e),C&&C.d(),S&&S.d()}}}function T$(r,e,n){let{props:t}=e,{filterText:l}=e;function o(i){return l?i.replace(new RegExp(l,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,l=i.filterText)},[t,o,l]}class Rn extends K{constructor(e){super(),X(this,e,T$,S$,V,{props:0,filterText:2})}}function C$(r){let e,n;return e=new Rn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function L$(r){let e,n;return e=new fe({props:{$$slots:{default:[C$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function A$(r){let e,n;return e=new Rn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function O$(r){let e,n;return e=new fe({props:{$$slots:{default:[A$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function P$(r){let e,n;return e=new Rn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function M$(r){let e,n;return e=new fe({props:{$$slots:{default:[P$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function E$(r){let e,n,t,l,o,i,u,s,a,f;const c=[G("interventions-points"),{filter:["all",Vn,r[4],r[5]]},{manageHoverState:!0},{paint:{"circle-color":r[3],"circle-radius":sn,"circle-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let p={$$slots:{default:[L$]},$$scope:{ctx:r}};for(let L=0;L<c.length;L+=1)p=ne(p,c[L]);e=new mt({props:p});const $=[G("interventions-lines"),{filter:["all",Kn,r[4]]},{manageHoverState:!0},{paint:{"line-color":r[3],"line-width":Rt,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let T={$$slots:{default:[O$]},$$scope:{ctx:r}};for(let L=0;L<$.length;L+=1)T=ne(T,$[L]);t=new ve({props:T});const k=[G("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Rt,"circle-opacity":0,"circle-stroke-color":rl.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let C={};for(let L=0;L<k.length;L+=1)C=ne(C,k[L]);o=new mt({props:C});const S=[G("interventions-polygons"),{filter:["all",en,r[4]]},{manageHoverState:!0},{paint:{"fill-color":r[3],"fill-opacity":x(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let P={$$slots:{default:[M$]},$$scope:{ctx:r}};for(let L=0;L<S.length;L+=1)P=ne(P,S[L]);u=new rt({props:P});const j=[G("interventions-polygons-outlines"),{filter:["all",en,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*Rt}},{layout:{visibility:r[0]?"visible":"none"}}];let B={};for(let L=0;L<j.length;L+=1)B=ne(B,j[L]);return a=new ve({props:B}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment)},m(L,M){b(e,L,M),m(L,n,M),b(t,L,M),m(L,l,M),b(o,L,M),m(L,i,M),b(u,L,M),m(L,s,M),b(a,L,M),f=!0},p(L,M){const N=M&57?re(c,[c[0],M&48&&{filter:["all",Vn,L[4],L[5]]},c[2],M&8&&{paint:{"circle-color":L[3],"circle-radius":sn,"circle-opacity":x(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};M&258&&(N.$$scope={dirty:M,ctx:L}),e.$set(N);const I=M&25?re($,[$[0],M&16&&{filter:["all",Kn,L[4]]},$[2],M&8&&{paint:{"line-color":L[3],"line-width":Rt,"line-opacity":x(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};M&258&&(I.$$scope={dirty:M,ctx:L}),t.$set(I);const E=M&1?re(k,[k[0],k[1],k[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(E);const W=M&25?re(S,[S[0],M&16&&{filter:["all",en,L[4]]},S[2],M&8&&{paint:{"fill-color":L[3],"fill-opacity":x(.2,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};M&258&&(W.$$scope={dirty:M,ctx:L}),u.$set(W);const R=M&25?re(j,[j[0],M&16&&{filter:["all",en,L[4]]},M&8&&{paint:{"line-color":L[3],"line-opacity":.5,"line-width":.7*Rt}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(R)},i(L){f||(g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(u.$$.fragment,L),g(a.$$.fragment,L),f=!0)},o(L){d(e.$$.fragment,L),d(t.$$.fragment,L),d(o.$$.fragment,L),d(u.$$.fragment,L),d(a.$$.fragment,L),f=!1},d(L){L&&(_(n),_(l),_(i),_(s)),v(e,L),v(t,L),v(o,L),v(u,L),v(a,L)}}}function I$(r){let e,n;return e=new Bt({props:{data:r[2],$$slots:{default:[E$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function N$(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,{filterText:i}=e,u=ll("v1");const s=["!=","hide_while_editing",!0],a=["!=","endpoint",!0];return r.$$set=f=>{"schemesGj"in f&&n(6,l=f.schemesGj),"showSchemes"in f&&n(0,o=f.showSchemes),"filterText"in f&&n(1,i=f.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Ql(l))},[o,i,t,u,s,a,l]}class D$ extends K{constructor(e){super(),X(this,e,N$,I$,V,{schemesGj:6,showSchemes:0,filterText:1})}}function Vr(r,e,n){const t=r.slice();return t[14]=e[n],t}function F$(r){let e,n;return e=new g$({props:{loadFile:r[8]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:q,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kr(r){let e,n,t,l,o,i;function u(p){r[9](p)}function s(p){r[10](p)}function a(p){r[11](p)}function f(p){r[12](p)}let c={schemes:r[2]};return r[1]!==void 0&&(c.schemesGj=r[1]),r[3]!==void 0&&(c.schemesToBeShown=r[3]),r[4]!==void 0&&(c.filterText=r[4]),r[5]!==void 0&&(c.show=r[5]),e=new ma({props:c}),Y.push(()=>ee(e,"schemesGj",u)),Y.push(()=>ee(e,"schemesToBeShown",s)),Y.push(()=>ee(e,"filterText",a)),Y.push(()=>ee(e,"show",f)),{c(){h(e.$$.fragment)},m(p,$){b(e,p,$),i=!0},p(p,$){const T={};$&4&&(T.schemes=p[2]),!n&&$&2&&(n=!0,T.schemesGj=p[1],te(()=>n=!1)),!t&&$&8&&(t=!0,T.schemesToBeShown=p[3],te(()=>t=!1)),!l&&$&16&&(l=!0,T.filterText=p[4],te(()=>l=!1)),!o&&$&32&&(o=!0,T.show=p[5],te(()=>o=!1)),e.$set(T)},i(p){i||(g(e.$$.fragment,p),i=!0)},o(p){d(e.$$.fragment,p),i=!1},d(p){v(e,p)}}}function Xr(r){let e,n;return e=new y$({props:{schemesGj:r[1],scheme:r[14],authorityNames:r[7]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[14]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zr(r){let e=r[3].has(r[14].scheme_reference),n,t,l=e&&Xr(r);return{c(){l&&l.c(),n=Ce()},m(o,i){l&&l.m(o,i),m(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[14].scheme_reference)),e?l?(l.p(o,i),i&12&&g(l,1)):(l=Xr(o),l.c(),g(l,1),l.m(n.parentNode,n)):l&&(ie(),d(l,1,1,()=>{l=null}),ae())},i(o){t||(g(l),t=!0)},o(o){d(l),t=!1},d(o){o&&_(n),l&&l.d(o)}}}function j$(r){let e,n,t,l,o,i,u,s,a,f,c=Nn()=="Private (development)",p,$,T,k,C,S,P,j;o=new io({props:{boundaryGeojson:r[1]}}),u=new es({}),a=new xl({});let B=c&&F$(r);$=new fo({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[8]}}),k=new nl({props:{errorMessage:r[0]}});let L=r[2].size>0&&Kr(r),M=Fe(r[2].values()),N=[];for(let E=0;E<M.length;E+=1)N[E]=Zr(Vr(r,M,E));const I=E=>d(N[E],1,1,()=>{N[E]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=O(),h(o.$$.fragment),i=O(),h(u.$$.fragment),s=O(),h(a.$$.fragment),f=O(),B&&B.c(),p=O(),h($.$$.fragment),T=O(),h(k.$$.fragment),C=O(),L&&L.c(),S=O(),P=A("ul");for(let E=0;E<N.length;E+=1)N[E].c();We(n,"display","flex"),We(n,"justify-content","space-between"),D(e,"slot","sidebar"),D(e,"class","govuk-prose")},m(E,W){m(E,e,W),w(e,n),w(n,t),w(n,l),b(o,n,null),w(e,i),b(u,e,null),w(e,s),b(a,e,null),w(e,f),B&&B.m(e,null),w(e,p),b($,e,null),w(e,T),b(k,e,null),w(e,C),L&&L.m(e,null),w(e,S),w(e,P);for(let R=0;R<N.length;R+=1)N[R]&&N[R].m(P,null);j=!0},p(E,W){const R={};W&2&&(R.boundaryGeojson=E[1]),o.$set(R),c&&B.p(E,W);const H={};if(W&1&&(H.errorMessage=E[0]),k.$set(H),E[2].size>0?L?(L.p(E,W),W&4&&g(L,1)):(L=Kr(E),L.c(),g(L,1),L.m(e,S)):L&&(ie(),d(L,1,1,()=>{L=null}),ae()),W&142){M=Fe(E[2].values());let z;for(z=0;z<M.length;z+=1){const pe=Vr(E,M,z);N[z]?(N[z].p(pe,W),g(N[z],1)):(N[z]=Zr(pe),N[z].c(),g(N[z],1),N[z].m(P,null))}for(ie(),z=M.length;z<N.length;z+=1)I(z);ae()}},i(E){if(!j){g(o.$$.fragment,E),g(u.$$.fragment,E),g(a.$$.fragment,E),g(B),g($.$$.fragment,E),g(k.$$.fragment,E),g(L);for(let W=0;W<M.length;W+=1)g(N[W]);j=!0}},o(E){d(o.$$.fragment,E),d(u.$$.fragment,E),d(a.$$.fragment,E),d(B),d($.$$.fragment,E),d(k.$$.fragment,E),d(L),N=N.filter(Boolean);for(let W=0;W<N.length;W+=1)d(N[W]);j=!1},d(E){E&&_(e),v(o),v(u),v(a),B&&B.d(),v($),v(k),L&&L.d(),ln(N,E)}}}function B$(r){let e,n,t,l,o,i,u;return e=new Ro({}),t=new D$({props:{schemesGj:r[1],filterText:r[4],showSchemes:r[5]}}),i=new m$({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),l=O(),o=A("div"),h(i.$$.fragment),D(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),m(s,n,a),b(t,s,a),m(s,l,a),m(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&2&&(f.schemesGj=s[1]),a&16&&(f.filterText=s[4]),a&32&&(f.showSchemes=s[5]),t.$set(f)},i(s){u||(g(e.$$.fragment,s),g(t.$$.fragment,s),g(i.$$.fragment,s),u=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(_(n),_(l),_(o)),v(e,s),v(t,s),v(i)}}}function R$(r){let e,n,t;return n=new eo({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[B$]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),D(e,"slot","main")},m(l,o){m(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.style=l[6]),o&131122&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(g(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&_(e),v(n)}}}function H$(r){let e,n;return e=new lo({props:{$$slots:{main:[R$],sidebar:[j$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&131199&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function W$(r,e,n){let t;Qe(r,Xn,S=>n(6,t=S)),jt(()=>{to()});let l=new Set(k$);const o=new URLSearchParams(window.location.search);Xn.set(o.get("style")||"dataviz");let i="",u={type:"FeatureCollection",features:[],schemes:{}},s=new Map,a=new Set,f="",c=!0;function p(S){try{n(1,u=JSON.parse(S)),n(2,s=ta(u)),n(0,i="")}catch(P){n(0,i=`The file you loaded is broken: ${P}`)}}function $(S){u=S,n(1,u)}function T(S){a=S,n(3,a)}function k(S){f=S,n(4,f)}function C(S){c=S,n(5,c)}return[i,u,s,a,f,c,t,l,p,$,T,k,C]}class G$ extends K{constructor(e){super(),X(this,e,W$,H$,V,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new G$({target:document.getElementById("app")});
