import{S as J,i as K,s as Y,e as T,h as G,a0 as Se,j as $,X as Z,o as p,aQ as ul,b as U,c as W,d as L,g as h,m as b,w as at,l as V,t as m,n as _,p as v,Y as Vt,Z as Xt,_ as Yt,$ as Qt,a8 as je,K as $e,N as pe,aR as _t,u as k,k as w,D as H,J as Ne,O as Cn,P as cl,q as ke,Q as $l,T as pl,U as it,V as ml,W as _l,aY as Rl,aZ as $t,a5 as En,a_ as Bl,aP as Hl,as as ht,af as Tn,ak as Jt,r as On,a as gt,F as mn,v as We,aX as ee,a$ as he,b0 as we,B as x,ai as te,C as ye,al as ne,b1 as ie,G as bt,I as gl,aT as Gt,ac as Dn,b2 as on,R as dl,b3 as zt,E as hl,at as zl,f as _n,ah as ql,aV as jn,am as Gl,an as Rn,ao as Bn,ap as xt,aW as Hn,L as Ul,M as Wl,y as Vl}from"./index-ddb88c2c.js";import{d as nt,j as mt,C as De,f as Ye,h as le,l as z,c as nn,k as Xl,S as Yl,B as Ql,b as vt,G as Jl}from"./StreetViewTool-79695084.js";import{a as Ge,F as Kl}from"./Popup-9fba2bcc.js";import{P as fe}from"./Popup-3c1bf98e.js";import{R as Zl,C as Ve,Z as xl}from"./ZoomOutMap-a1d7f5b3.js";import{L as eo,a as to}from"./LineMeasureController-2078e225.js";function no(l){let e;return{c(){e=T("span"),G(e,"class","svelte-kzgqtg"),Se(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Se(e,"background",n[0])},i:Z,o:Z,d(n){n&&p(e)}}}function ro(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Ce extends J{constructor(e){super(),K(this,e,ro,no,Y,{color:0})}}const lo="/atip/gradient/assets/help-d011708a.svg";function oo(l){let e,n;const t=l[1].default,r=Vt(t,l,l[4],null);return{c(){e=T("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&Xt(r,t,o,o[4],n?Qt(t,o[4],s,null):Yt(o[4]),null)},i(o){n||(m(r,o),n=!0)},o(o){_(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function so(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[oo]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new ul({props:a}),U.push(()=>W(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${lo}" title="Help" alt="Help"/>`,n=L(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,s||(u=at(e,"click",l[2]),s=!0)},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,g.open=f[0],V(()=>r=!1)),t.$set(g)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),s=!1,u()}}}function io(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class me extends J{constructor(e){super(),K(this,e,io,so,Y,{})}}function zn(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function qn(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Ce({props:{color:l[2]}}),{c(){e=T("li"),h(n.$$.fragment),t=L(),o=k(r),s=L()},m(i,a){$(i,e,a),b(n,e,null),w(e,t),w(e,o),w(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&H(o,r)},i(i){u||(m(n.$$.fragment,i),u=!0)},o(i){_(n.$$.fragment,i),u=!1},d(i){i&&p(e),v(n)}}}function ao(l){let e,n,t=je(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=qn(zn(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){e=T("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=je(s[0]);let i;for(i=0;i<t.length;i+=1){const a=zn(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=qn(a),r[i].c(),m(r[i],1),r[i].m(e,null))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),_t(r,s)}}}function fo(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class Ln extends J{constructor(e){super(),K(this,e,fo,ao,Y,{rows:0})}}function Gn(l){let e=l[0],n,t,r=Un(l);return{c(){r.c(),n=Ne()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),_(r,1,1,Z),pe(),r=Un(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Un(l){let e;const n=l[10].default,t=Vt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&Xt(t,n,r,r[9],e?Qt(n,r[9],o,null):Yt(r[9]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function uo(l){let e,n,t=l[0]&&Gn(l);return{c(){t&&t.c(),e=Ne()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Gn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),_(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function co(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Cn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=cl();ke(l,f,y=>n(8,r=y)),ke(l,c,y=>n(0,t=y));let g,d=!0;return $l(()=>{t&&g&&r&&(pl(f,t,g),it(c,t=null,t),n(6,g=void 0))}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(it(c,t=u,t),ml(r,t,_l({type:"raster",tiles:i,tileSize:a}),y=>r&&y===t,()=>{t&&(n(6,g=r==null?void 0:r.getSource(t)),n(7,d=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,g=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&g&&(d?n(7,d=!1):g.setTiles(i))},[t,f,c,u,i,a,g,d,r,s,o]}class $o extends J{constructor(e){super(),K(this,e,co,uo,Y,{id:3,tiles:4,tileSize:5})}}function po(l){let e;const n=l[16].default,t=Vt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&Xt(t,n,r,r[24],e?Qt(n,r[24],o,null):Yt(r[24]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function mo(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[po]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Rl({props:o}),U.push(()=>W(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function _o(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Cn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:O=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:P=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:I=!1}=e,{interactive:N=!0}=e;function A(j){D=j,n(0,D)}function M(j){$t.call(this,l,j)}function E(j){$t.call(this,l,j)}function S(j){$t.call(this,l,j)}function F(j){$t.call(this,l,j)}function q(j){$t.call(this,l,j)}function R(j){$t.call(this,l,j)}return l.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,g=j.filter),"applyToClusters"in j&&n(9,d=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,O=j.maxzoom),"hoverCursor"in j&&n(12,C=j.hoverCursor),"manageHoverState"in j&&n(13,P=j.manageHoverState),"hovered"in j&&n(0,D=j.hovered),"eventsIfTopMost"in j&&n(14,I=j.eventsIfTopMost),"interactive"in j&&n(15,N=j.interactive),"$$scope"in j&&n(24,r=j.$$scope)},[D,o,s,u,i,a,f,c,g,d,y,O,C,P,I,N,t,A,M,E,S,F,q,R,r]}class go extends J{constructor(e){super(),K(this,e,_o,mo,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Wn(l){let e=l[0],n,t,r=Vn(l);return{c(){r.c(),n=Ne()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),_(r,1,1,Z),pe(),r=Vn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Vn(l){let e;const n=l[9].default,t=Vt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&Xt(t,n,r,r[8],e?Qt(n,r[8],o,null):Yt(r[8]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function ho(l){let e,n,t=l[0]&&Wn(l);return{c(){t&&t.c(),e=Ne()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Wn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),_(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function bo(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Cn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!En.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Bl;En.addProtocol("pmtiles",y.tile)}const{map:c,self:g}=cl();ke(l,c,y=>n(7,r=y)),ke(l,g,y=>n(0,t=y));let d;return $l(()=>{t&&r&&(pl(c,t,d),it(g,t=null,t),d=void 0)}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(it(g,t=u,t),ml(r,t,_l({type:"vector",url:i,tiles:a,promoteId:f}),y=>r&&y===t,()=>{t&&(d=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{d=r==null?void 0:r.getSource(u)}))},[t,c,g,u,i,a,f,r,s,o]}class ve extends J{constructor(e){super(),K(this,e,bo,ho,Y,{id:3,url:4,tiles:5,promoteId:6})}}const vo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ie=Uint8Array,ut=Uint16Array,bl=Uint32Array,vl=new Ie([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),wl=new Ie([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),wo=new Ie([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),kl=function(l,e){for(var n=new ut(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new bl(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},yl=kl(vl,2),Sl=yl[0],ko=yl[1];Sl[28]=258,ko[258]=28;var yo=kl(wl,0),So=yo[0],gn=new ut(32768);for(var de=0;de<32768;++de){var lt=(de&43690)>>>1|(de&21845)<<1;lt=(lt&52428)>>>2|(lt&13107)<<2,lt=(lt&61680)>>>4|(lt&3855)<<4,gn[de]=((lt&65280)>>>8|(lt&255)<<8)>>>1}var qt=function(l,e,n){for(var t=l.length,r=0,o=new ut(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new ut(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new ut(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,g=c|(1<<f)-1;c<=g;++c)u[gn[c]>>>i]=a}else for(u=new ut(t),r=0;r<t;++r)l[r]&&(u[r]=gn[s[l[r]-1]++]>>>15-l[r]);return u},Kt=new Ie(288);for(var de=0;de<144;++de)Kt[de]=8;for(var de=144;de<256;++de)Kt[de]=9;for(var de=256;de<280;++de)Kt[de]=7;for(var de=280;de<288;++de)Kt[de]=8;var Cl=new Ie(32);for(var de=0;de<32;++de)Cl[de]=5;var Co=qt(Kt,9,1),To=qt(Cl,5,1),sn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},He=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},an=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Oo=function(l){return(l+7)/8|0},An=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?ut:l.BYTES_PER_ELEMENT==4?bl:Ie)(n-e);return t.set(l.subarray(e,n)),t},Lo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ze=function(l,e,n){var t=new Error(e||Lo[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,ze),!n)throw t;return t},Ao=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Ie(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ie(t*3));var s=function(Ee){var Te=e.length;if(Ee>Te){var Qe=new Ie(Math.max(Te*2,Ee));Qe.set(e),e=Qe}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,g=n.m,d=n.n,y=t*8;do{if(!f){u=He(l,i,1);var O=He(l,i+1,3);if(i+=3,O)if(O==1)f=Co,c=To,g=9,d=5;else if(O==2){var I=He(l,i,31)+257,N=He(l,i+10,15)+4,A=I+He(l,i+5,31)+1;i+=14;for(var M=new Ie(A),E=new Ie(19),S=0;S<N;++S)E[wo[S]]=He(l,i+S*3,7);i+=N*3;for(var F=sn(E),q=(1<<F)-1,R=qt(E,F,1),S=0;S<A;){var j=R[He(l,i,q)];i+=j&15;var C=j>>>4;if(C<16)M[S++]=C;else{var B=0,X=0;for(C==16?(X=3+He(l,i,3),i+=2,B=M[S-1]):C==17?(X=3+He(l,i,7),i+=3):C==18&&(X=11+He(l,i,127),i+=7);X--;)M[S++]=B}}var re=M.subarray(0,I),oe=M.subarray(I);g=sn(re),d=sn(oe),f=qt(re,g,1),c=qt(oe,d,1)}else ze(1);else{var C=Oo(i)+4,P=l[C-4]|l[C-3]<<8,D=C+P;if(D>t){o&&ze(0);break}r&&s(a+P),e.set(l.subarray(C,D),a),n.b=a+=P,n.p=i=D*8,n.f=u;continue}if(i>y){o&&ze(0);break}}r&&s(a+131072);for(var ce=(1<<g)-1,Ae=(1<<d)-1,Oe=i;;Oe=i){var B=f[an(l,i)&ce],ae=B>>>4;if(i+=B&15,i>y){o&&ze(0);break}if(B||ze(2),ae<256)e[a++]=ae;else if(ae==256){Oe=i,f=null;break}else{var Le=ae-254;if(ae>264){var S=ae-257,ue=vl[S];Le=He(l,i,(1<<ue)-1)+Sl[S],i+=ue}var _e=c[an(l,i)&Ae],ge=_e>>>4;_e||ze(3),i+=_e&15;var oe=So[ge];if(ge>3){var ue=wl[ge];oe+=an(l,i)&(1<<ue)-1,i+=ue}if(i>y){o&&ze(0);break}r&&s(a+131072);for(var Be=a+Le;a<Be;a+=4)e[a]=e[a-oe],e[a+1]=e[a+1-oe],e[a+2]=e[a+2-oe],e[a+3]=e[a+3-oe];a=Be}}n.l=f,n.p=Oe,n.b=a,n.f=u,f&&(u=1,n.m=g,n.d=c,n.n=d)}while(!u);return a==e.length?e:An(e,0,a)},Io=new Ie(0),Ue=function(l,e){return l[e]|l[e+1]<<8},qe=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},fn=function(l,e){return qe(l,e)+qe(l,e+4)*4294967296};function Po(l,e){return Ao(l,e)}var dn=typeof TextDecoder<"u"&&new TextDecoder,Mo=0;try{dn.decode(Io,{stream:!0}),Mo=1}catch{}var No=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,An(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function Tl(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(dn)return dn.decode(l);var r=No(l),o=r[0],s=r[1];return s.length&&ze(8),o}}var Fo=function(l,e){return e+30+Ue(l,e+26)+Ue(l,e+28)},Eo=function(l,e,n){var t=Ue(l,e+28),r=Tl(l.subarray(e+46,e+46+t),!(Ue(l,e+8)&2048)),o=e+46+t,s=qe(l,e+20),u=n&&s==4294967295?Do(l,o):[s,qe(l,e+24),qe(l,e+42)],i=u[0],a=u[1],f=u[2];return[Ue(l,e+10),i,a,r,o+Ue(l,e+30)+Ue(l,e+32),f]},Do=function(l,e){for(;Ue(l,e)!=1;e+=4+Ue(l,e+2));return[fn(l,e+12),fn(l,e+4),fn(l,e+20)]};function jo(l,e){for(var n={},t=l.length-22;qe(l,t)!=101010256;--t)(!t||l.length-t>65558)&&ze(13);var r=Ue(l,t+8);if(!r)return{};var o=qe(l,t+16),s=o==4294967295||r==65535;if(s){var u=qe(l,t-12);s=qe(l,u)==101075792,s&&(r=qe(l,u+32),o=qe(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=Eo(l,o,s),c=f[0],g=f[1],d=f[2],y=f[3],O=f[4],C=f[5],P=Fo(l,C);o=O,(!i||i({name:y,size:g,originalSize:d,compression:c}))&&(c?c==8?n[y]=Po(l.subarray(P,P+g),new Ie(d)):ze(14,"unknown compression type "+c):n[y]=An(l,P,P+g))}return n}function Ro(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(un):un(l)}function un(l){var e=new Uint8Array(l),n=jo(e);return Promise.resolve(Bo(n))}function Bo(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=Tl(l[r])}return e}function Xe(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&ct(t)===e)return t;n++}}function Zt(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&ct(r)===e&&n.push(r),t++}return n}function rn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&ct(r)===e&&n(r,t):n(r,t),t++}}function Ho(l,e,n){var t=[];return rn(l,e,function(r,o){t.push(n(r,o))}),t}var zo=/.+\:/;function ct(l){return l.tagName.replace(zo,"")}function Ol(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+ct(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=Ol(l.childNodes[t]),t++;return e+="</"+ct(l)+">",e}function qo(l){var e=l.documentElement,n=Xe(e,"sheetData"),t=[];return rn(n,"row",function(r){rn(r,"c",function(o){t.push(o)})}),t}function Go(l,e){return Xe(e,"v")}function Uo(l,e){if(e.firstChild&&ct(e.firstChild)==="is"&&e.firstChild.firstChild&&ct(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Wo(l){var e=l.documentElement,n=Xe(e,"dimension");if(n)return n.getAttribute("ref")}function Vo(l){var e=l.documentElement,n=Xe(e,"cellStyleXfs");return n?Zt(n,"xf"):[]}function Xo(l){var e=l.documentElement,n=Xe(e,"cellXfs");return n?Zt(n,"xf"):[]}function Yo(l){var e=l.documentElement,n=Xe(e,"numFmts");return n?Zt(n,"numFmt"):[]}function Qo(l){var e=l.documentElement;return Ho(e,"si",function(n){var t=Xe(n,"t");if(t)return t.textContent;var r="";return rn(n,"r",function(o){r+=Xe(o,"t").textContent}),r})}function Jo(l){var e=l.documentElement;return Xe(e,"workbookPr")}function Ko(l){var e=l.documentElement;return Zt(e,"Relationship")}function Zo(l){var e=l.documentElement,n=Xe(e,"sheets");return Zt(n,"sheet")}function xo(l,e){var n=e.createDocument(l),t={},r=Jo(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return Zo(n).forEach(o),t}function es(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=cn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=cn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=cn(u);break}};return Ko(n).forEach(r),t}function cn(l){return l[0]==="/"?l.slice(1):"xl/"+l}function Xn(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Yn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xn(Object(n),!0).forEach(function(t){ts(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ts(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ns(l,e){if(!l)return{};var n=e.createDocument(l),t=Vo(n).map($n),r=Yo(n).map(rs).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?Yn(Yn({},t[u.xfId]),$n(u,r)):$n(u,r)};return Xo(n).map(o)}function rs(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function $n(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function ls(l,e){return l?Qo(e.createDocument(l)):[]}function Ll(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function os(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ss(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ss(l,e){if(l){if(typeof l=="string")return Qn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qn(l,e)}}function Qn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function is(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(as.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&cs(t.numberFormat.template))return!0}}var as=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],fs=/^\[\$-414\]/,us=/;@$/;function cs(l){l=l.toLowerCase(),l=l.replace(fs,""),l=l.replace(us,"");for(var e=l.split(/\W+/),n=os(e),t;!(t=n()).done;){var r=t.value;if($s.indexOf(r)<0)return!1}return!0}var $s=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function ps(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=pn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=pn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=pn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=ms(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var g=is(o(),s,a);g?(l=Jn(l),l=Ll(l,i)):l=(a.parseNumber||Jn)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function ms(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function pn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function Jn(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var _s=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function gs(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function ds(l){for(var e=0,n=0;n<l.length;)e*=26,e+=_s.indexOf(l[n]),n++;return e}function Al(l){return l=l.split(/(\d+)/),[parseInt(l[1]),ds(l[0].trim())]}function hs(l,e,n,t,r,o,s){var u=Al(l.getAttribute("r")),i=Go(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:ps(a,f,{getInlineStringValue:function(){return Uo(e,l)},getInlineStringXml:function(){return Ol(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function bs(l,e,n,t,r,o){var s=qo(l);return s.length===0?[]:s.map(function(u){return hs(u,l,e,n,t,r,o)})}function vs(l,e){return Ss(l)||ys(l,e)||ks(l,e)||ws()}function ws(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ks(l,e){if(l){if(typeof l=="string")return Kn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(l,e)}}function Kn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ys(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ss(l){if(Array.isArray(l))return l}function Cs(l){var e=Wo(l);if(e)return e=e.split(":").map(Al).map(function(n){var t=vs(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Ts(l,e,n,t,r,o){var s=e.createDocument(l),u=bs(s,e,n,t,r,o),i=Cs(s)||gs(u);return{cells:u,dimensions:i}}function Os(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Ls(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ls(l,e){if(l){if(typeof l=="string")return Zn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(l,e)}}function Zn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function As(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=Os(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Is(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Ps(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ps(l,e){if(l){if(typeof l=="string")return xn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(l,e)}}function xn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ms(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=Is(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function Ns(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Il(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fs(l,e){return js(l)||Ds(l,e)||Il(l,e)||Es()}function Es(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Il(l,e){if(l){if(typeof l=="string")return er(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(l,e)}}function er(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ds(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function js(l){if(Array.isArray(l))return l}function Rs(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=Fs(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=Ns(t),g;!(g=c()).done;){var d=g.value,y=d.row-1,O=d.column-1;O<s&&y<u&&(i[y][O]=d.value)}var C=e.rowMap;if(C)for(var P=0;P<i.length;)C[P]=P,P++;return i=As(Ms(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(i=e.transformData(i)),i}function Bs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Hs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hs(l,e){if(l){if(typeof l=="string")return tr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(l,e)}}function tr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function nr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function zs(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nr(Object(n),!0).forEach(function(t){qs(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function qs(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Gs(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=zs({sheet:1},n));var t=function(g){if(!l[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return l[g]},r=es(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?ls(t(r.sharedStrings),e):[],s=r.styles?ns(t(r.styles),e):{},u=xo(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var g=c.name;return{name:g}});var i=Us(n.sheet,u.sheets);if(!i||!r.sheets[i])throw Ws(n.sheet,u.sheets);var a=Ts(t(r.sheets[i]),e,o,s,u,n),f=Rs(a,n);return n.properties?{data:f,properties:u}:f}function Us(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=Bs(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Ws(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function hn(l){"@babel/helpers - typeof";return hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(l)}function rr(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Vs(l,e,n){return e&&rr(l.prototype,e),n&&rr(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function Xs(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function Ys(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&Ut(l,e)}function Qs(l){var e=Pl();return function(){var t=Wt(l),r;if(e){var o=Wt(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return Js(this,r)}}function Js(l,e){if(e&&(hn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ks(l)}function Ks(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function bn(l){var e=typeof Map=="function"?new Map:void 0;return bn=function(t){if(t===null||!Zs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return tn(t,arguments,Wt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Ut(r,t)},bn(l)}function tn(l,e,n){return Pl()?tn=Reflect.construct:tn=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&Ut(a,s.prototype),a},tn.apply(null,arguments)}function Pl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Zs(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function Ut(l,e){return Ut=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},Ut(l,e)}function Wt(l){return Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Wt(l)}var Pe=function(l){Ys(n,l);var e=Qs(n);function n(t){var r;return Xs(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Vs(n)}(bn(Error));function xs(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new Pe("not_a_number")}if(typeof l!="number")throw new Pe("not_a_number");if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");return l}function ei(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");return String(l)}throw new Pe("not_a_string")}function ti(l){if(typeof l=="boolean")return l;throw new Pe("not_a_boolean")}function ni(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new Pe("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");var t=Ll(l,n);if(isNaN(t.valueOf()))throw new Pe("out_of_bounds");return t}throw new Pe("not_a_date")}function ri(l,e){return si(l)||oi(l,e)||Ml(l,e)||li()}function li(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oi(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function si(l){if(Array.isArray(l))return l}function vn(l){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(l)}function ii(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Ml(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ml(l,e){if(l){if(typeof l=="string")return lr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lr(l,e)}}function lr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function or(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function sr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?or(Object(n),!0).forEach(function(t){ai(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ai(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var ir={isColumnOriented:!1};function fi(l,e,n){n?n=sr(sr({},ir),n):n=ir;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;pi(e),r&&(l=$i(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=Nl(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=ii(a),d;!(d=g()).done;){var y=d.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function Nl(l,e,n,t,r,o){for(var s={},u=!0,i=function(D){var I=D.column,N=D.value,A=D.error,M=D.reason,E={error:A,row:n+1,column:I,value:N};return M&&(E.reason=M),l[I].type&&(E.type=l[I].type),E},a=[],f=function(){var D=g[c],I=l[D],N=vn(I.type)==="object"&&!Array.isArray(I.type),A=e[t.indexOf(D)];A===void 0&&(A=null);var M=void 0,E=void 0,S=void 0;if(N)M=Nl(I.type,e,n,t,r,o);else if(A===null)M=null;else if(Array.isArray(I.type)){var F=!1,q=ci(A).map(function(j){var B=ar(j,I,o);return B.error&&(M=j,E=B.error,S=B.reason),B.value!==null&&(F=!0),B.value});E||(M=F?q:null)}else{var R=ar(A,I,o);E=R.error,S=R.reason,M=E?A:R.value}!E&&M===null&&(typeof I.required=="function"?a.push({column:D}):I.required===!0&&(E="required")),E?r.push(i({column:D,value:M,error:E,reason:S})):(u&&M!==null&&(u=!1),(M!==null||o.includeNullValues)&&(s[I.prop]=M))},c=0,g=Object.keys(l);c<g.length;c++)f();if(u)return null;for(var d=0,y=a;d<y.length;d++){var O=y[d].column,C=l[O].required(s);C&&r.push(i({column:O,value:null,error:"required"}))}return s}function ar(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=pt(l,e.parse):e.type?t=ui(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function pt(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ui(l,e,n){switch(e){case String:return pt(l,ei);case Number:return pt(l,xs);case Date:return pt(l,function(t){return ni(t,{properties:n.properties})});case Boolean:return pt(l,ti);default:if(typeof e=="function")return pt(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Fl(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=Fl(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function ci(l){for(var e=[],n=0;n<l.length;){var t=Fl(l,",",n),r=ri(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var $i=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function pi(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function wn(l){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(l)}function El(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;wn(o)==="object"&&(o=Object.keys(l[r])[0],s=El(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var mi=["schema","map"];function fr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function en(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?fr(Object(n),!0).forEach(function(t){_i(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):fr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function _i(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function gi(l,e){if(l==null)return{};var n=di(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function di(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function hi(l,e,n){var t=n.schema,r=n.map,o=gi(n,mi);!t&&r&&(t=El(r));var s=Gs(l,e,en(en({},o),{},{properties:t||o.properties}));return t?fi(s.data,t,en(en({},o),{},{properties:s.properties})):s}function bi(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ro(l).then(function(n){return hi(n,vo,e)})}function vi(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>wi(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function wi(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function ki(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await bi(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Hl(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const kn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function yi(l){return ht(["get","intervention_type"],{area:nt.area,route:nt.route,crossing:nt.crossing,other:nt.other},"white")}function Si(l){return[["Areas",nt.area],["Routes",nt.route],["Crossings",nt.crossing],["Other",nt.other]]}const Q={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},Me=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function yn(){let[l,e]=Dl(kn,Q.funding_programmes);return[ht(["get","funding_programme"],l,"grey"),e]}function Ci(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=Dl(l,Q.current_milestone);return[ht(["get","current_milestone"],e,"grey"),n]}function Dl(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Ti(l){let e,n;return e=new Ln({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oi(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new mt({props:u}),U.push(()=>W(e,"value",s)),e.$on("change",l[2]),r=new De({props:{label:"Legend",$$slots:{default:[Ti]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],V(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Li(l,e,n){let t;ke(l,Tn,a=>n(4,t=a));let r="fundingProgramme",[o,s]=yn();function u(){let a;r=="interventionType"?(a=yi(),n(1,s=Si())):r=="fundingProgramme"?n(1,[a,s]=yn(),s):r=="currentMilestone"&&n(1,[a,s]=Ci(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class Ai extends J{constructor(e){super(),K(this,e,Li,Oi,Y,{})}}const dt=Jt({type:"FeatureCollection",features:[],schemes:{}}),ln=Jt(new Map),ur=Jt(!0),wt=Jt(""),kt=Jt("");function Ii(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pi(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mi(l){let e,n,t,r,o,s;return t=new gt({props:{$$slots:{default:[Pi]},$$scope:{ctx:l}}}),t.$on("click",l[16]),{c(){e=T("input"),n=L(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,i){$(u,e,i),We(e,l[6]),$(u,n,i),b(t,u,i),r=!0,o||(s=at(e,"input",l[15]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&We(e,u[6]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function Ni(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fi(l){let e,n,t,r,o,s;return t=new gt({props:{$$slots:{default:[Ni]},$$scope:{ctx:l}}}),t.$on("click",l[18]),{c(){e=T("input"),n=L(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,i){$(u,e,i),We(e,l[5]),$(u,n,i),b(t,u,i),r=!0,o||(s=at(e,"input",l[17]),o=!0)},p(u,i){i&32&&e.value!==u[5]&&We(e,u[5]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function Ei(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,O,C,P;e=new gt({props:{$$slots:{default:[Ii]},$$scope:{ctx:l}}}),e.$on("click",l[11]);function D(S){l[12](S)}let I={label:"Authority or region",choices:l[7],emptyOption:!0};l[2]!==void 0&&(I.value=l[2]),t=new mt({props:I}),U.push(()=>W(t,"value",D));function N(S){l[13](S)}let A={label:"Funding programme",choices:l[8],emptyOption:!0};l[3]!==void 0&&(A.value=l[3]),s=new mt({props:A}),U.push(()=>W(s,"value",N));function M(S){l[14](S)}let E={label:"Current milestone",choices:l[9],emptyOption:!0};return l[4]!==void 0&&(E.value=l[4]),a=new mt({props:E}),U.push(()=>W(a,"value",M)),g=new mn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Mi]},$$scope:{ctx:l}}}),y=new mn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Fi]},$$scope:{ctx:l}}}),C=new Ai({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(s.$$.fragment),i=L(),h(a.$$.fragment),c=L(),h(g.$$.fragment),d=L(),h(y.$$.fragment),O=L(),h(C.$$.fragment)},m(S,F){b(e,S,F),$(S,n,F),b(t,S,F),$(S,o,F),b(s,S,F),$(S,i,F),b(a,S,F),$(S,c,F),b(g,S,F),$(S,d,F),b(y,S,F),$(S,O,F),b(C,S,F),P=!0},p(S,F){const q={};F&16777216&&(q.$$scope={dirty:F,ctx:S}),e.$set(q);const R={};F&128&&(R.choices=S[7]),!r&&F&4&&(r=!0,R.value=S[2],V(()=>r=!1)),t.$set(R);const j={};F&256&&(j.choices=S[8]),!u&&F&8&&(u=!0,j.value=S[3],V(()=>u=!1)),s.$set(j);const B={};F&512&&(B.choices=S[9]),!f&&F&16&&(f=!0,B.value=S[4],V(()=>f=!1)),a.$set(B);const X={};F&16777280&&(X.$$scope={dirty:F,ctx:S}),g.$set(X);const re={};F&16777248&&(re.$$scope={dirty:F,ctx:S}),y.$set(re)},i(S){P||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(s.$$.fragment,S),m(a.$$.fragment,S),m(g.$$.fragment,S),m(y.$$.fragment,S),m(C.$$.fragment,S),P=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(s.$$.fragment,S),_(a.$$.fragment,S),_(g.$$.fragment,S),_(y.$$.fragment,S),_(C.$$.fragment,S),P=!1},d(S){S&&(p(n),p(o),p(i),p(c),p(d),p(O)),v(e,S),v(t,S),v(s,S),v(a,S),v(g,S),v(y,S),v(C,S)}}}function Di(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[10].route.toLocaleString()+"",s,u,i=l[10].area.toLocaleString()+"",a,f,c=l[10].crossing.toLocaleString()+"",g,d,y=l[10].other.toLocaleString()+"",O,C,P=cr(l[10].totalLength).toFixed(1)+"",D,I;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),g=k(c),d=k(" crossings, "),O=k(y),C=k(`
    other, with total LineString length of `),D=k(P),I=k(" miles)")},m(N,A){$(N,e,A),$(N,t,A),$(N,r,A),$(N,s,A),$(N,u,A),$(N,a,A),$(N,f,A),$(N,g,A),$(N,d,A),$(N,O,A),$(N,C,A),$(N,D,A),$(N,I,A)},p(N,A){A&1&&n!==(n=N[0].size.toLocaleString()+"")&&H(t,n),A&1024&&o!==(o=N[10].route.toLocaleString()+"")&&H(s,o),A&1024&&i!==(i=N[10].area.toLocaleString()+"")&&H(a,i),A&1024&&c!==(c=N[10].crossing.toLocaleString()+"")&&H(g,c),A&1024&&y!==(y=N[10].other.toLocaleString()+"")&&H(O,y),A&1024&&P!==(P=cr(N[10].totalLength).toFixed(1)+"")&&H(D,P)},d(N){N&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(g),p(d),p(O),p(C),p(D),p(I))}}}function ji(l){let e,n,t;function r(s){l[19](s)}let o={$$slots:{default:[Di]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&16778241&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ri(l){let e,n,t,r;return e=new De({props:{label:"Filters",$$slots:{default:[Ei]},$$scope:{ctx:l}}}),t=new Ye({props:{small:!0,$$slots:{default:[ji]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&16778236&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16778243&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function cr(l){return l*621371e-9}function Bi(l,e,n){let t,r,o,s;ke(l,kt,R=>n(5,t=R)),ke(l,wt,R=>n(6,r=R)),ke(l,dt,R=>n(20,o=R)),ke(l,ln,R=>n(21,s=R));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],g=new Set(kn.slice(0,-1)),d="",y=[],O="",C={area:0,route:0,crossing:0,other:0,totalLength:0};On(()=>{var X,re,oe;let R=new Set,j=new Set,B=new Set;for(let ce of s.values())(X=ce.browse)!=null&&X.authority_or_region&&R.add(ce.browse.authority_or_region),(re=ce.browse)!=null&&re.funding_programme&&j.add(ce.browse.funding_programme),(oe=ce.browse)!=null&&oe.current_milestone&&B.add(ce.browse.current_milestone);n(7,a=Array.from(R.entries())),a.sort(),n(8,c=kn.map(ce=>[ce,ce])),n(9,y=Array.from(B.entries())),y.sort()});function P(R,j,B,X,re){let oe=R.toLowerCase(),ce=j.toLowerCase(),Ae=ae=>{var Le,ue,_e,ge,Be,Ee;if(oe&&!((Le=ae.properties.name)!=null&&Le.toLowerCase().includes(oe))&&!((ue=ae.properties.description)!=null&&ue.toLowerCase().includes(oe)))return!1;if(ce||B||X||re){let Te=s.get(ae.properties.scheme_reference);if(B&&((_e=Te.browse)==null?void 0:_e.authority_or_region)!=B||X&&X!=="Other"&&((ge=Te.browse)==null?void 0:ge.funding_programme)!=X||X==="Other"&&g.has(((Be=Te.browse)==null?void 0:Be.funding_programme)??"")||re&&((Ee=Te.browse)==null?void 0:Ee.current_milestone)!=re||ce&&!Te.scheme_reference.toLowerCase().includes(ce)&&!(Te.scheme_name??"").toLowerCase().includes(ce))return!1}return!0};n(0,u=new Set(o.features.filter(Ae).map(ae=>ae.properties.scheme_reference))),n(10,C={area:0,route:0,crossing:0,other:0,totalLength:0});let Oe=ae=>{var Le,ue;return!(!u.has(ae.properties.scheme_reference)||oe&&!((Le=ae.properties.name)!=null&&Le.toLowerCase().includes(oe))&&!((ue=ae.properties.description)!=null&&ue.toLowerCase().includes(oe)))};for(let ae of o.features)Oe(ae)?(delete ae.properties.hide_while_editing,n(10,C[ae.properties.intervention_type]++,C),ae.geometry.type=="LineString"&&ae.properties.length_meters&&n(10,C.totalLength+=ae.properties.length_meters,C)):ae.properties.hide_while_editing=!0;dt.set(o),n(10,C)}function D(){n(2,f=""),n(3,d=""),n(4,O=""),it(wt,r="",r),it(kt,t="",t)}function I(R){f=R,n(2,f)}function N(R){d=R,n(3,d)}function A(R){O=R,n(4,O)}function M(){r=this.value,wt.set(r)}const E=()=>it(wt,r="",r);function S(){t=this.value,kt.set(t)}const F=()=>it(kt,t="",t);function q(R){i=R,n(1,i)}return l.$$set=R=>{"schemesToBeShown"in R&&n(0,u=R.schemesToBeShown),"show"in R&&n(1,i=R.show)},l.$$.update=()=>{l.$$.dirty&124&&P(r,t,f,d,O)},[u,i,f,d,O,t,r,a,c,y,C,D,I,N,A,M,E,S,F,q]}class Hi extends J{constructor(e){super(),K(this,e,Bi,Ri,Y,{schemesToBeShown:0,show:1})}}function zi(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qi(l){let e,n,t,r,o;return t=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[zi]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),h(t.$$.fragment),r=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),w(e,n),b(t,e,null),w(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){_(t.$$.fragment,s),o=!1},d(s){s&&p(e),v(t)}}}class Fe extends J{constructor(e){super(),K(this,e,null,qi,Y,{})}}function $r(l,e,n){const t=l.slice();return t[2]=e[n],t}function pr(l,e,n){const t=l.slice();return t[5]=e[n],t}function mr(l){let e,n;return{c(){e=T("span"),n=k(`
    `),Se(e,"background",l[5]),Se(e,"width","100%"),Se(e,"border","1px solid black")},m(t,r){$(t,e,r),w(e,n)},p(t,r){r&1&&Se(e,"background",t[5])},d(t){t&&p(e)}}}function _r(l){let e,n=l[2]+"",t;return{c(){e=T("span"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&H(t,n)},d(r){r&&p(e)}}}function Gi(l){let e,n,t,r=je(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=mr(pr(l,r,i));let s=je(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=_r($r(l,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=L(),t=T("div");for(let i=0;i<u.length;i+=1)u[i].c();Se(e,"display","flex"),Se(t,"display","flex"),Se(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=je(i[0]);let f;for(f=0;f<r.length;f+=1){const c=pr(i,r,f);o[f]?o[f].p(c,a):(o[f]=mr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=je(i[1]);let f;for(f=0;f<s.length;f+=1){const c=$r(i,s,f);u[f]?u[f].p(c,a):(u[f]=_r(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:Z,o:Z,d(i){i&&(p(e),p(n),p(t)),_t(o,i),_t(u,i)}}}function Ui(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Re extends J{constructor(e){super(),K(this,e,Ui,Gi,Y,{colorScale:0,limits:1})}}function gr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Wi(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xi(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yi(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qi(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Vi]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Xi]},$$scope:{ctx:l}}}),f=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Yi]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),u=L(),i=T("p"),a=k("License: "),h(f.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(d,u,y),$(d,i,y),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,y){const O={};y&65536&&(O.$$scope={dirty:y,ctx:d}),t.$set(O);const C={};y&65536&&(C.$$scope={dirty:y,ctx:d}),o.$set(C);const P={};y&65536&&(P.$$scope={dirty:y,ctx:d}),f.$set(P)},i(d){g||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(u),p(i)),v(t),v(o),v(f)}}}function Ji(l){let e,n,t;return n=new me({props:{$$slots:{default:[Qi]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function dr(l){let e,n;return e=new Re({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:Z,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ki(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zi(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xi(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ea(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ta(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y;return o=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Zi]},$$scope:{ctx:l}}}),u=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[xi]},$$scope:{ctx:l}}}),g=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ea]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=T("p"),r=k("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=k(". Output area boundaries from "),h(u.$$.fragment),i=k("."),a=L(),f=T("p"),c=k("License: "),h(g.$$.fragment),d=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(O,C){$(O,e,C),$(O,n,C),$(O,t,C),w(t,r),b(o,t,null),w(t,s),b(u,t,null),w(t,i),$(O,a,C),$(O,f,C),w(f,c),b(g,f,null),w(f,d),y=!0},p(O,C){const P={};C&65536&&(P.$$scope={dirty:C,ctx:O}),o.$set(P);const D={};C&65536&&(D.$$scope={dirty:C,ctx:O}),u.$set(D);const I={};C&65536&&(I.$$scope={dirty:C,ctx:O}),g.$set(I)},i(O){y||(m(o.$$.fragment,O),m(u.$$.fragment,O),m(g.$$.fragment,O),y=!0)},o(O){_(o.$$.fragment,O),_(u.$$.fragment,O),_(g.$$.fragment,O),y=!1},d(O){O&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(g)}}}function na(l){let e,n,t;return n=new me({props:{$$slots:{default:[ta]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function hr(l){let e,n;return e=new Re({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:Z,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ra(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function la(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oa(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sa(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[la]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[oa]},$$scope:{ctx:l}}}),i=new Fe({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function ia(l){let e,n,t;return n=new me({props:{$$slots:{default:[sa]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function br(l){let e,n,t,r;return t=new Re({props:{colorScale:l[4],limits:l[6]().map(_a)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:Z,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function aa(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(r),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){$(a,e,f),w(e,n),w(e,t),w(t,o),w(e,s),w(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&H(o,r),f&8192&&u!==(u=a[14]+"")&&H(i,u)},d(a){a&&p(e)}}}function fa(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=T("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=T("b"),i=k(u),a=k(`
          cars`)},m(f,c){$(f,e,c),w(e,n),w(e,r),w(e,o),w(e,s),w(s,i),w(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&H(r,t),c&8200&&u!==(u=f[15]+"")&&H(i,u)},d(f){f&&p(e)}}}function ua(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=T("p"),n=T("b"),r=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){$(f,e,c),w(e,n),w(n,r),w(n,o),w(e,s),w(e,i),w(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&H(r,t),c&8192&&u!==(u=f[14]+"")&&H(i,u)},d(f){f&&p(e)}}}function ca(l){gr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?ua:o[3]=="average_cars_per_household"?fa:aa}let t=n(l),r=t(l);return{c(){r.c(),e=Ne()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){gr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function $a(l){let e,n;return e=new fe({props:{$$slots:{default:[ca,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pa(l){let e,n,t,r;const o=[z(Je),{sourceLayer:Je},{paint:{"fill-color":we(["get",l[3]],l[6](),l[4]),"fill-opacity":x(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[$a]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Ge({props:s}),e.$on("click",l[5]);const u=[z(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&88?ne(o,[f&0&&ie(z(Je)),f&0&&{sourceLayer:Je},f&88&&{paint:{"fill-color":we(["get",a[3]],a[6](),a[4]),"fill-opacity":x(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&8?ne(u,[f&0&&ie(z(`${Je}-outline`)),f&0&&{sourceLayer:Je},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ma(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y;function O(S){l[7](S)}let C={$$slots:{right:[Ji],default:[Wi]},$$scope:{ctx:l}};l[0]!==void 0&&(C.checked=l[0]),e=new le({props:C}),U.push(()=>W(e,"checked",O)),e.$on("change",l[8]);let P=l[3]=="percent_households_with_car"&&dr(l);function D(S){l[9](S)}let I={$$slots:{right:[na],default:[Ki]},$$scope:{ctx:l}};l[1]!==void 0&&(I.checked=l[1]),o=new le({props:I}),U.push(()=>W(o,"checked",D)),o.$on("change",l[10]);let N=l[3]=="average_cars_per_household"&&hr(l);function A(S){l[11](S)}let M={$$slots:{right:[ia],default:[ra]},$$scope:{ctx:l}};l[2]!==void 0&&(M.checked=l[2]),a=new le({props:M}),U.push(()=>W(a,"checked",A)),a.$on("change",l[12]);let E=l[3]=="population_density"&&br(l);return d=new ve({props:{url:`pmtiles://${he()}/v1/${Je}.pmtiles`,$$slots:{default:[pa]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),P&&P.c(),r=L(),h(o.$$.fragment),u=L(),N&&N.c(),i=L(),h(a.$$.fragment),c=L(),E&&E.c(),g=L(),h(d.$$.fragment)},m(S,F){b(e,S,F),$(S,t,F),P&&P.m(S,F),$(S,r,F),b(o,S,F),$(S,u,F),N&&N.m(S,F),$(S,i,F),b(a,S,F),$(S,c,F),E&&E.m(S,F),$(S,g,F),b(d,S,F),y=!0},p(S,[F]){const q={};F&65536&&(q.$$scope={dirty:F,ctx:S}),!n&&F&1&&(n=!0,q.checked=S[0],V(()=>n=!1)),e.$set(q),S[3]=="percent_households_with_car"?P?(P.p(S,F),F&8&&m(P,1)):(P=dr(S),P.c(),m(P,1),P.m(r.parentNode,r)):P&&($e(),_(P,1,1,()=>{P=null}),pe());const R={};F&65536&&(R.$$scope={dirty:F,ctx:S}),!s&&F&2&&(s=!0,R.checked=S[1],V(()=>s=!1)),o.$set(R),S[3]=="average_cars_per_household"?N?(N.p(S,F),F&8&&m(N,1)):(N=hr(S),N.c(),m(N,1),N.m(i.parentNode,i)):N&&($e(),_(N,1,1,()=>{N=null}),pe());const j={};F&65536&&(j.$$scope={dirty:F,ctx:S}),!f&&F&4&&(f=!0,j.checked=S[2],V(()=>f=!1)),a.$set(j),S[3]=="population_density"?E?(E.p(S,F),F&8&&m(E,1)):(E=br(S),E.c(),m(E,1),E.m(g.parentNode,g)):E&&($e(),_(E,1,1,()=>{E=null}),pe());const B={};F&65544&&(B.$$scope={dirty:F,ctx:S}),d.$set(B)},i(S){y||(m(e.$$.fragment,S),m(P),m(o.$$.fragment,S),m(N),m(a.$$.fragment,S),m(E),m(d.$$.fragment,S),y=!0)},o(S){_(e.$$.fragment,S),_(P),_(o.$$.fragment,S),_(N),_(a.$$.fragment,S),_(E),_(d.$$.fragment,S),y=!1},d(S){S&&(p(t),p(r),p(u),p(i),p(c),p(g)),v(e,S),P&&P.d(S),v(o,S),N&&N.d(S),v(a,S),E&&E.d(S),v(d,S)}}}let Je="census_output_areas";const _a=l=>l.toLocaleString();function ga(l,e,n){let t=Q.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(C){let P=C.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${P}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${P}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(C){r=C,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(C){o=C,n(1,o)}const d=()=>{n(0,r=!1),n(2,s=!1)};function y(C){s=C,n(2,s)}const O=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,g,d,y,O]}class da extends J{constructor(e){super(),K(this,e,ga,ma,Y,{})}}function ha(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function ba(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function va(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ba]},$$scope:{ctx:l}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of December 2022."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function wa(l){let e,n,t;return n=new me({props:{$$slots:{default:[va]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function ka(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&H(t,n)},d(r){r&&p(e)}}}function ya(l){let e,n;return e=new fe({props:{$$slots:{default:[ka,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sa(l){let e,n,t,r;const o=[z(yt),{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ya]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Ge({props:s}),e.$on("click",Ta);const u=[z(`${yt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ie(z(yt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ie(z(`${yt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ca(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[wa],default:[ha]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new bt({props:{data:`${he()}/v1/${yt}.geojson`,$$slots:{default:[Sa]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let yt="combined_authorities";function Ta(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Oa(l,e,n){let t=Q.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class La extends J{constructor(e){super(),K(this,e,Oa,Ca,Y,{})}}function Aa(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ia(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pa(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ma(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Ia]},$$scope:{ctx:l}}}),o=new ee({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Pa]},$$scope:{ctx:l}}}),i=new Fe({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),h(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=k("."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function Na(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ma]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function vr(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:Z,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fa(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,g=l[4].rank.toLocaleString()+"",d,y;return{c(){e=T("p"),t=k(n),r=k(` has an IMD score of
        `),o=T("b"),u=k(s),i=L(),a=T("p"),f=k("Rank: "),c=T("b"),d=k(g),y=k(`
        / 32,844 LSOAs`)},m(O,C){$(O,e,C),w(e,t),w(e,r),w(e,o),w(o,u),$(O,i,C),$(O,a,C),w(a,f),w(a,c),w(c,d),w(a,y)},p(O,C){C&16&&n!==(n=O[4].LSOA11CD+"")&&H(t,n),C&16&&s!==(s=O[4].score+"")&&H(u,s),C&16&&g!==(g=O[4].rank.toLocaleString()+"")&&H(d,g)},d(O){O&&(p(e),p(i),p(a))}}}function Ea(l){let e,n;return e=new fe({props:{$$slots:{default:[Fa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Da(l){let e,n,t,r;const o=[z(Ke),{sourceLayer:Ke},{paint:{"fill-color":we(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":x(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ea]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Ge({props:s});const u=[z(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?ne(o,[f&0&&ie(z(Ke)),f&0&&{sourceLayer:Ke},f&6&&{paint:{"fill-color":we(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":x(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?ne(u,[f&0&&ie(z(`${Ke}-outline`)),f&0&&{sourceLayer:Ke},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ja(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Na],default:[Aa]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&vr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Ke}.pmtiles`,$$slots:{default:[Da]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=vr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ke="imd";function Ra(l,e,n){let t=Q.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Ba extends J{constructor(e){super(),K(this,e,Ra,ja,Y,{})}}function Ha(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function za(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qa(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[za]},$$scope:{ctx:l}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Ga(l){let e,n,t;return n=new me({props:{$$slots:{default:[qa]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ua(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&H(t,n)},d(r){r&&p(e)}}}function Wa(l){let e,n;return e=new fe({props:{$$slots:{default:[Ua,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Va(l){let e,n,t,r;const o=[z(St),{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Wa]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Ge({props:s}),e.$on("click",Ya);const u=[z(`${St}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ie(z(St)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ie(z(`${St}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Xa(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Ga],default:[Ha]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new bt({props:{data:`${he()}/v1/${St}.geojson`,$$slots:{default:[Va]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let St="local_authority_districts";function Ya(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function Qa(l,e,n){let t=Q.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ja extends J{constructor(e){super(),K(this,e,Qa,Xa,Y,{})}}function Ka(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Za(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ef(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tf(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nf(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,O,C,P,D,I,N,A,M;return t=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Za]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[xa]},$$scope:{ctx:l}}}),u=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ef]},$$scope:{ctx:l}}}),d=new ee({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[tf]},$$scope:{ctx:l}}}),D=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[nf]},$$scope:{ctx:l}}}),A=new Fe({}),{c(){e=T("p"),n=k("LPAs may be a "),h(t.$$.fragment),r=k(", "),h(o.$$.fragment),s=k("y, or "),h(u.$$.fragment),i=k("."),a=L(),f=T("p"),c=T("strong"),g=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),y=k(" to get more details."),O=L(),C=T("p"),P=k("Data from ONS Geography via "),h(D.$$.fragment),I=k(", as of November 2022."),N=L(),h(A.$$.fragment)},m(E,S){$(E,e,S),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),b(u,e,null),w(e,i),$(E,a,S),$(E,f,S),w(f,c),w(c,g),b(d,c,null),w(c,y),$(E,O,S),$(E,C,S),w(C,P),b(D,C,null),w(C,I),$(E,N,S),b(A,E,S),M=!0},p(E,S){const F={};S&16&&(F.$$scope={dirty:S,ctx:E}),t.$set(F);const q={};S&16&&(q.$$scope={dirty:S,ctx:E}),o.$set(q);const R={};S&16&&(R.$$scope={dirty:S,ctx:E}),u.$set(R);const j={};S&16&&(j.$$scope={dirty:S,ctx:E}),d.$set(j);const B={};S&16&&(B.$$scope={dirty:S,ctx:E}),D.$set(B)},i(E){M||(m(t.$$.fragment,E),m(o.$$.fragment,E),m(u.$$.fragment,E),m(d.$$.fragment,E),m(D.$$.fragment,E),m(A.$$.fragment,E),M=!0)},o(E){_(t.$$.fragment,E),_(o.$$.fragment,E),_(u.$$.fragment,E),_(d.$$.fragment,E),_(D.$$.fragment,E),_(A.$$.fragment,E),M=!1},d(E){E&&(p(e),p(a),p(f),p(O),p(C),p(N)),v(t),v(o),v(u),v(d),v(D),v(A,E)}}}function lf(l){let e,n,t;return n=new me({props:{$$slots:{default:[rf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function of(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&H(t,n)},d(r){r&&p(e)}}}function sf(l){let e,n;return e=new fe({props:{$$slots:{default:[of,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function af(l){let e,n,t,r;const o=[z(Ze),{sourceLayer:Ze},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[sf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Ge({props:s});const u=[z(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ie(z(Ze)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ie(z(`${Ze}-outline`)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ff(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[lf],default:[Ka]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Ze}.pmtiles`,$$slots:{default:[af]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ze="local_planning_authorities";function uf(l,e,n){let t=Q.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class cf extends J{constructor(e){super(),K(this,e,uf,ff,Y,{})}}function $f(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function pf(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mf(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[pf]},$$scope:{ctx:l}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function _f(l){let e,n,t;return n=new me({props:{$$slots:{default:[mf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function gf(l){let e,n=l[3].Name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&H(t,n)},d(r){r&&p(e)}}}function df(l){let e,n;return e=new fe({props:{$$slots:{default:[gf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hf(l){let e,n,t,r;const o=[z(xe),{sourceLayer:xe},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[df]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Ge({props:s}),e.$on("click",vf);const u=[z(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ie(z(xe)),f&0&&{sourceLayer:xe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ie(z(`${xe}-outline`)),f&0&&{sourceLayer:xe},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function bf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[_f],default:[$f]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${xe}.pmtiles`,$$slots:{default:[hf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let xe="parliamentary_constituencies";function vf(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function wf(l,e,n){let t=Q.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class kf extends J{constructor(e){super(),K(this,e,wf,bf,Y,{})}}function yf(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sf(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cf(l){let e;return{c(){e=k(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tf(l){let e;return{c(){e=k(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Of(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,O,C;return t=new ee({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Sf]},$$scope:{ctx:l}}}),f=new ee({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Cf]},$$scope:{ctx:l}}}),g=new ee({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Tf]},$$scope:{ctx:l}}}),O=new Fe({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),h(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        gm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=L(),i=T("p"),a=k("The noise layer is from "),h(f.$$.fragment),c=k(", using 2017 data. See their "),h(g.$$.fragment),d=k("."),y=L(),h(O.$$.fragment)},m(P,D){$(P,e,D),w(e,n),b(t,e,null),w(e,r),w(e,o),w(e,s),$(P,u,D),$(P,i,D),w(i,a),b(f,i,null),w(i,c),b(g,i,null),w(i,d),$(P,y,D),b(O,P,D),C=!0},p(P,D){const I={};D&2048&&(I.$$scope={dirty:D,ctx:P}),t.$set(I);const N={};D&2048&&(N.$$scope={dirty:D,ctx:P}),f.$set(N);const A={};D&2048&&(A.$$scope={dirty:D,ctx:P}),g.$set(A)},i(P){C||(m(t.$$.fragment,P),m(f.$$.fragment,P),m(g.$$.fragment,P),m(O.$$.fragment,P),C=!0)},o(P){_(t.$$.fragment,P),_(f.$$.fragment,P),_(g.$$.fragment,P),_(O.$$.fragment,P),C=!1},d(P){P&&(p(e),p(u),p(i),p(y)),v(t),v(f),v(g),v(O,P)}}}function Lf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Of]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function wr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,g,d,y,O,C,P,D;function I(S){l[7](S)}let N={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};l[0]!==void 0&&(N.value=l[0]),e=new mt({props:N}),U.push(()=>W(e,"value",I));const A=[If,Af],M=[];function E(S,F){return S[0]=="Noise"?0:1}return d=E(l),y=M[d]=A[d](l),{c(){h(e.$$.fragment),t=L(),r=T("p"),s=k(o),u=L(),i=T("div"),a=T("label"),f=k(`Opacity
      `),c=T("input"),g=L(),y.c(),O=Ne(),G(c,"type","range"),G(c,"min","0"),G(c,"max","100")},m(S,F){b(e,S,F),$(S,t,F),$(S,r,F),w(r,s),$(S,u,F),$(S,i,F),w(i,a),w(a,f),w(a,c),We(c,l[2]),$(S,g,F),M[d].m(S,F),$(S,O,F),C=!0,P||(D=[at(c,"change",l[8]),at(c,"input",l[8])],P=!0)},p(S,F){const q={};!n&&F&1&&(n=!0,q.value=S[0],V(()=>n=!1)),e.$set(q),(!C||F&1)&&o!==(o=S[3](S[0])+"")&&H(s,o),F&4&&We(c,S[2]);let R=d;d=E(S),d===R?M[d].p(S,F):($e(),_(M[R],1,1,()=>{M[R]=null}),pe(),y=M[d],y?y.p(S,F):(y=M[d]=A[d](S),y.c()),m(y,1),y.m(O.parentNode,O))},i(S){C||(m(e.$$.fragment,S),m(y),C=!0)},o(S){_(e.$$.fragment,S),_(y),C=!1},d(S){S&&(p(t),p(r),p(u),p(i),p(g),p(O)),v(e,S),M[d].d(S),P=!1,gl(D)}}}function Af(l){let e,n,t;return{c(){e=T("img"),Dn(e.src,n=l[5](l[0]))||G(e,"src",n),G(e,"width",150),G(e,"alt",t=`Legend for ${l[0]} layer`)},m(r,o){$(r,e,o)},p(r,o){o&1&&!Dn(e.src,n=r[5](r[0]))&&G(e,"src",n),o&1&&t!==(t=`Legend for ${r[0]} layer`)&&G(e,"alt",t)},i:Z,o:Z,d(r){r&&p(e)}}}function If(l){let e,n;return e=new Re({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:Z,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pf(l){let e,n;const t=[z("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Zl({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&6?ne(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Mf(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={$$slots:{right:[Lf],default:[yf]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&wr(l);return o=new $o({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Pf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=wr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&1&&(d.tiles=[f[4](f[0])]),c&2054&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}function Nf(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let O=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${O}`}function f(y){let O=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${O}`}function c(y){r=y,n(1,r)}function g(y){s=y,n(0,s)}function d(){o=Gt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,r,o,i,a,f,c,g,d]}class Ff extends J{constructor(e){super(),K(this,e,Nf,Mf,Y,{})}}function Ef(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Wards`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Df(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jf(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Df]},$$scope:{ctx:l}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Rf(l){let e,n,t;return n=new me({props:{$$slots:{default:[jf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Bf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&H(t,n)},d(r){r&&p(e)}}}function Hf(l){let e,n;return e=new fe({props:{$$slots:{default:[Bf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zf(l){let e,n,t,r;const o=[z(et),{sourceLayer:et},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Hf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=te(s,o[a]);e=new Ge({props:s}),e.$on("click",Gf);const u=[z(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=te(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ie(z(et)),f&0&&{sourceLayer:et},f&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?ne(u,[f&0&&ie(z(`${et}-outline`)),f&0&&{sourceLayer:et},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function qf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Rf],default:[Ef]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${et}.pmtiles`,$$slots:{default:[zf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let et="wards";function Gf(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Uf(l,e,n){let t=Q.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Wf extends J{constructor(e){super(),K(this,e,Uf,qf,Y,{})}}function Vf(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xf(l){let e,n,t,r;return t=new ee({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Vf]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),h(t.$$.fragment)},m(o,s){$(o,e,s),w(e,n),b(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&p(e),v(t)}}}class rt extends J{constructor(e){super(),K(this,e,null,Xf,Y,{})}}function Yf(l){let e,n,t;return e=new Ce({props:{color:Q.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Qf(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jf(l){let e,n,t,r,o,s,u,i,a;return o=new ee({props:{href:"https://gtfs.org",$$slots:{default:[Qf]},$$scope:{ctx:l}}}),i=new rt({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=T("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),w(t,r),b(o,t,null),w(t,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(i,f)}}}function Kf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Jf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Zf(l){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xf(l){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function eu(l){let e;function n(o,s){return o[2].has_bus_lane?xf:Zf}let t=n(l),r=t(l);return{c(){r.c(),e=Ne()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function tu(l){let e,n;return e=new fe({props:{$$slots:{default:[eu,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nu(l){let e,n;const t=[z(Ct),{sourceLayer:Ct},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Q.bus_route_with_lane,Q.bus_route_without_lane],"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[tu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ie(z(Ct)),s&0&&{sourceLayer:Ct},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ru(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Kf],default:[Yf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Ct}.pmtiles`,$$slots:{default:[nu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ct="bus_routes";function lu(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class ou extends J{constructor(e){super(),K(this,e,lu,ru,Y,{})}}function kr(l){const e=_u(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function yr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function su(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(l){let e,n,t,r,o,s,u,i;return u=new rt({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=L(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=L(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),b(u,a,f),i=!0},p:Z,i(a){i||(m(u.$$.fragment,a),i=!0)},o(a){_(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),v(u,a)}}}function au(l){let e,n,t;return n=new me({props:{$$slots:{default:[iu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Sr(l){let e,n,t;return n=new Ye({props:{$$slots:{default:[uu]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function fu(l){let e,n,t=l[9]+"",r,o,s;return e=new Ce({props:{color:l[10]}}),{c(){h(e.$$.fragment),n=L(),r=k(t),o=L()},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:Z,i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function Cr(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[fu]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function uu(l){let e,n,t=je(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Cr(yr(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Ne()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=je(s[2]);let i;for(i=0;i<t.length;i+=1){const a=yr(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Cr(a),r[i].c(),m(r[i],1),r[i].m(e.parentNode,e))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),_t(r,s)}}}function cu(l){kr(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,g,d=l[8]+"",y;return{c(){e=T("h2"),t=k(n),r=L(),o=T("p"),s=k("Direction: "),u=T("b"),a=L(),f=T("p"),c=k("Width: "),g=T("b"),y=k(d)},m(O,C){$(O,e,C),w(e,t),$(O,r,C),$(O,o,C),w(o,s),w(o,u),u.innerHTML=i,$(O,a,C),$(O,f,C),w(f,c),w(f,g),w(g,y)},p(O,C){kr(O),C&32&&n!==(n=O[6]+"")&&H(t,n),C&32&&i!==(i=O[7]+"")&&(u.innerHTML=i),C&32&&d!==(d=O[8]+"")&&H(y,d)},d(O){O&&(p(e),p(r),p(o),p(a),p(f))}}}function $u(l){let e,n;return e=new fe({props:{$$slots:{default:[cu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pu(l){let e,n;const t=[z(Tt),{sourceLayer:Tt},{paint:{"line-color":ht(["get","kind"],{track:Q.cycle_paths.track,lane:Q.cycle_paths.lane,shared_use_segregated:Q.cycle_paths.shared_use_segregated,shared_use_unsegregated:Q.cycle_paths.shared_use_unsegregated},"red"),"line-width":Me,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Tr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[$u]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new ye({props:r}),e.$on("click",gu),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ie(z(Tt)),s&0&&{sourceLayer:Tt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Tr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function mu(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[au],default:[su]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Sr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Tt}.pmtiles`,$$slots:{default:[pu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Sr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&8195&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Tt="cycle_paths";function _u(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function gu(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Tr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function du(l,e,n){let t=[["track","Separated tracks",Q.cycle_paths.track],["lane","Unprotected lanes",Q.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Q.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Q.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class hu extends J{constructor(e){super(),K(this,e,du,mu,Y,{})}}function bu(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function vu(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wu(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[vu]},$$scope:{ctx:l}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from the "),h(t.$$.fragment),r=k(", as of September 2021."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function ku(l){let e,n,t;return n=new me({props:{$$slots:{default:[wu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function yu(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&H(t,n)},d(r){r&&p(e)}}}function Su(l){let e,n;return e=new fe({props:{$$slots:{default:[yu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cu(l){let e,n;const t=[z(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Su]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ie(z(Ot)),s&0&&{sourceLayer:Ot},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Tu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[ku],default:[bu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Ot}.pmtiles`,$$slots:{default:[Cu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ot="mrn";function Ou(l,e,n){let t=Q.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Lu extends J{constructor(e){super(),K(this,e,Ou,Tu,Y,{})}}function Au(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Iu(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pu(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Iu]},$$scope:{ctx:l}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),h(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Mu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Pu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Or(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&H(o,r)},d(s){s&&p(e)}}}function Lr(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&H(o,r)},d(s){s&&p(e)}}}function Ar(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&H(o,r)},d(s){s&&p(e)}}}function Ir(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&H(o,r)},d(s){s&&p(e)}}}function Pr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&H(o,r)},d(s){s&&p(e)}}}function Mr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&H(o,r)},d(s){s&&p(e)}}}function Nr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&H(o,r)},d(s){s&&p(e)}}}function Fr(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&H(o,r)},d(s){s&&p(e)}}}function Er(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&H(o,r)},d(s){s&&p(e)}}}function Nu(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&Or(l),c=l[3].Greenway&&Lr(l),g=l[3].RouteType&&Ar(l),d=l[3].RouteNo&&Ir(l),y=l[3].RouteCat&&Pr(l),O=l[3].OpenStatus&&Mr(l),C=l[3].Surface&&Nr(l),P=l[3].Quality&&Fr(l),D=l[3].RoadClass&&Er(l);return{c(){e=T("ul"),f&&f.c(),n=L(),c&&c.c(),t=L(),g&&g.c(),r=L(),d&&d.c(),o=L(),y&&y.c(),s=L(),O&&O.c(),u=L(),C&&C.c(),i=L(),P&&P.c(),a=L(),D&&D.c()},m(I,N){$(I,e,N),f&&f.m(e,null),w(e,n),c&&c.m(e,null),w(e,t),g&&g.m(e,null),w(e,r),d&&d.m(e,null),w(e,o),y&&y.m(e,null),w(e,s),O&&O.m(e,null),w(e,u),C&&C.m(e,null),w(e,i),P&&P.m(e,null),w(e,a),D&&D.m(e,null)},p(I,N){I[3].Desc_?f?f.p(I,N):(f=Or(I),f.c(),f.m(e,n)):f&&(f.d(1),f=null),I[3].Greenway?c?c.p(I,N):(c=Lr(I),c.c(),c.m(e,t)):c&&(c.d(1),c=null),I[3].RouteType?g?g.p(I,N):(g=Ar(I),g.c(),g.m(e,r)):g&&(g.d(1),g=null),I[3].RouteNo?d?d.p(I,N):(d=Ir(I),d.c(),d.m(e,o)):d&&(d.d(1),d=null),I[3].RouteCat?y?y.p(I,N):(y=Pr(I),y.c(),y.m(e,s)):y&&(y.d(1),y=null),I[3].OpenStatus?O?O.p(I,N):(O=Mr(I),O.c(),O.m(e,u)):O&&(O.d(1),O=null),I[3].Surface?C?C.p(I,N):(C=Nr(I),C.c(),C.m(e,i)):C&&(C.d(1),C=null),I[3].Quality?P?P.p(I,N):(P=Fr(I),P.c(),P.m(e,a)):P&&(P.d(1),P=null),I[3].RoadClass?D?D.p(I,N):(D=Er(I),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(I){I&&p(e),f&&f.d(),c&&c.d(),g&&g.d(),d&&d.d(),y&&y.d(),O&&O.d(),C&&C.d(),P&&P.d(),D&&D.d()}}}function Fu(l){let e,n;return e=new fe({props:{$$slots:{default:[Nu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Eu(l){let e,n;const t=[z(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Fu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ie(z(Lt)),s&0&&{sourceLayer:Lt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Du(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Mu],default:[Au]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Lt}.pmtiles`,$$slots:{default:[Eu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Lt="national_cycle_network";function ju(l,e,n){let t=Q.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ru extends J{constructor(e){super(),K(this,e,ju,Du,Y,{})}}function Bu(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hu(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zu(l){let e,n,t,r,o,s,u,i,a;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Hu]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=L(),t=T("p"),t.textContent="Data valid as of 1 January, 2024",r=L(),o=T("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function qu(l){let e,n,t;return n=new me({props:{$$slots:{default:[zu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Dr(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:Z,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gu(l){let e,n,t,r=l[4].side+"",o,s,u,i,a,f=l[4].average+"",c,g,d,y,O,C,P=l[4].minimum+"",D,I;return{c(){e=T("p"),n=k("Side of the road: "),t=T("b"),o=k(r),s=L(),u=T("p"),i=k("Average width: "),a=T("b"),c=k(f),g=k(`
        meters`),d=L(),y=T("p"),O=k("Minimum width: "),C=T("b"),D=k(P),I=k(`
        meters`)},m(N,A){$(N,e,A),w(e,n),w(e,t),w(t,o),$(N,s,A),$(N,u,A),w(u,i),w(u,a),w(a,c),w(u,g),$(N,d,A),$(N,y,A),w(y,O),w(y,C),w(C,D),w(y,I)},p(N,A){A&16&&r!==(r=N[4].side+"")&&H(o,r),A&16&&f!==(f=N[4].average+"")&&H(c,f),A&16&&P!==(P=N[4].minimum+"")&&H(D,P)},d(N){N&&(p(e),p(s),p(u),p(d),p(y))}}}function Uu(l){let e,n;return e=new fe({props:{$$slots:{default:[Gu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wu(l){let e,n;const t=[z(At),{sourceLayer:At},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],l[2],l[1]),"line-width":Me,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Uu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ie(z(At)),s&0&&{sourceLayer:At},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Me,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Vu(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[qu],default:[Bu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Dr(l);return o=new ve({props:{url:`pmtiles://${on()}/v1/${At}.pmtiles`,$$slots:{default:[Wu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Dr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let At="pavement_widths";function Xu(l,e,n){let t=Q.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Yu extends J{constructor(e){super(),K(this,e,Xu,Vu,Y,{})}}function Qu(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ju(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ku(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zu(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new ee({props:{href:"https://www.pct.bike",$$slots:{default:[Ju]},$$scope:{ctx:l}}}),a=new ee({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Ku]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=L(),o=T("p"),s=k("See "),h(u.$$.fragment),i=k(" and "),h(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(g,d){$(g,e,d),$(g,n,d),$(g,t,d),$(g,r,d),$(g,o,d),w(o,s),b(u,o,null),w(o,i),b(a,o,null),w(o,f),c=!0},p(g,d){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),u.$set(y);const O={};d&1024&&(O.$$scope={dirty:d,ctx:g}),a.$set(O)},i(g){c||(m(u.$$.fragment,g),m(a.$$.fragment,g),c=!0)},o(g){_(u.$$.fragment,g),_(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(r),p(o)),v(u),v(a)}}}function xu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Zu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function jr(l){let e,n,t,r,o,s,u,i;e=new Re({props:{colorScale:l[3],limits:l[4]}});function a(d){l[7](d)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new dl({props:f}),U.push(()=>W(t,"value",a));function c(d){l[8](d)}let g={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(g.value=l[1]),s=new mt({props:g}),U.push(()=>W(s,"value",c)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(s.$$.fragment)},m(d,y){b(e,d,y),$(d,n,y),b(t,d,y),$(d,o,y),b(s,d,y),i=!0},p(d,y){const O={};!r&&y&1&&(r=!0,O.value=d[0],V(()=>r=!1)),t.$set(O);const C={};!u&&y&2&&(u=!0,C.value=d[1],V(()=>u=!1)),s.$set(C)},i(d){i||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(s.$$.fragment,d),i=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(s.$$.fragment,d),i=!1},d(d){d&&(p(n),p(o)),v(e,d),v(t,d),v(s,d)}}}function ec(l){let e,n=l[5](l[9])+"",t;return{c(){e=new zt(!1),t=Ne(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function tc(l){let e,n;return e=new fe({props:{$$slots:{default:[ec,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nc(l){let e,n;const t=[z(tt),{sourceLayer:tt},{paint:{"line-color":we(["get",l[1]],l[4],l[3]),"line-width":Me,"line-opacity":x(1,.5)}},{layout:{visibility:l[2]&&l[0]==tt?"visible":"none"}}];let r={$$slots:{default:[tc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ie(z(tt)),s&0&&{sourceLayer:tt},s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Me,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==tt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function rc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new zt(!1),t=Ne(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function lc(l){let e,n;return e=new fe({props:{$$slots:{default:[rc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oc(l){let e,n;const t=[z(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",l[1]],l[4],l[3]),"line-width":Me,"line-opacity":x(1,.5)}},{layout:{visibility:l[2]&&l[0]==ft?"visible":"none"}}];let r={$$slots:{default:[lc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ie(z(ft)),s&0&&{sourceLayer:ft},t[2],t[3],s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Me,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ft?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function sc(l){let e,n,t,r,o,s,u,i;function a(g){l[6](g)}let f={$$slots:{right:[xu],default:[Qu]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),U.push(()=>W(e,"checked",a));let c=l[2]&&jr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${tt}.pmtiles`,$$slots:{default:[nc]},$$scope:{ctx:l}}}),u=new ve({props:{url:`pmtiles://${he()}/v1/${ft}.pmtiles`,$$slots:{default:[oc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),c&&c.c(),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment)},m(g,d){b(e,g,d),$(g,t,d),c&&c.m(g,d),$(g,r,d),b(o,g,d),$(g,s,d),b(u,g,d),i=!0},p(g,[d]){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),!n&&d&4&&(n=!0,y.checked=g[2],V(()=>n=!1)),e.$set(y),g[2]?c?(c.p(g,d),d&4&&m(c,1)):(c=jr(g),c.c(),m(c,1),c.m(r.parentNode,r)):c&&($e(),_(c,1,1,()=>{c=null}),pe());const O={};d&1031&&(O.$$scope={dirty:d,ctx:g}),o.$set(O);const C={};d&1031&&(C.$$scope={dirty:d,ctx:g}),u.$set(C)},i(g){i||(m(e.$$.fragment,g),m(c),m(o.$$.fragment,g),m(u.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(u.$$.fragment,g),i=!1},d(g){g&&(p(t),p(r),p(s)),v(e,g),c&&c.d(g),v(o,g),v(u,g)}}}let tt="pct_commute",ft="pct_school";function ic(l,e,n){let t=Q.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=tt,s="baseline",u=!1;function i(g){let d=g.baseline,y=g.gov_target,O=g.go_dutch,C=`<h2>Trip purpose: ${o==tt?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)C+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${O.toLocaleString()}</b></p>`;else{let P=(y/d).toFixed(1),D=(O/d).toFixed(1);C+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${P}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${O.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return C}function a(g){u=g,n(2,u)}function f(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class ac extends J{constructor(e){super(),K(this,e,ic,sc,Y,{})}}function fc(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uc(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $c(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new ee({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[uc]},$$scope:{ctx:l}}}),f=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[cc]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),h(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",u=L(),i=T("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=k(".")},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,r),$(d,o,y),$(d,s,y),$(d,u,y),$(d,i,y),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,y){const O={};y&256&&(O.$$scope={dirty:y,ctx:d}),t.$set(O);const C={};y&256&&(C.$$scope={dirty:y,ctx:d}),f.$set(C)},i(d){g||(m(t.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(o),p(s),p(u),p(i)),v(t),v(f)}}}function pc(l){let e,n,t;return n=new me({props:{$$slots:{default:[$c]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Rr(l){let e,n,t,r,o;e=new Re({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new dl({props:u}),U.push(()=>W(t,"value",s)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],V(()=>r=!1)),t.$set(f)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function mc(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,g=l[4][l[7].highest_description]+"",d,y;return{c(){e=T("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=L(),u=T("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),d=k(g),y=k(")")},m(O,C){$(O,e,C),w(e,n),w(e,r),w(e,o),$(O,s,C),$(O,u,C),w(u,i),w(u,f),w(u,c),w(u,d),w(u,y)},p(O,C){C&128&&t!==(t=O[7].indicative_mph+"")&&H(r,t),C&128&&a!==(a=O[7].highest_mph+"")&&H(f,a),C&128&&g!==(g=O[4][O[7].highest_description]+"")&&H(d,g)},d(O){O&&(p(e),p(s),p(u))}}}function _c(l){let e,n;return e=new fe({props:{$$slots:{default:[mc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gc(l){let e,n;const t=[z(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",l[0]],l[3],l[2]),"line-width":Me,"line-opacity":x(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[_c]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&15?ne(t,[s&0&&ie(z(It)),s&0&&{sourceLayer:It},t[2],t[3],s&13&&{paint:{"line-color":we(["get",o[0]],o[3],o[2]),"line-width":Me,"line-opacity":x(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function dc(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={$$slots:{right:[pc],default:[fc]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&Rr(l);return o=new ve({props:{url:`pmtiles://${on()}/v1/${It}.pmtiles`,$$slots:{default:[gc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=Rr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let It="road_speeds";function hc(l,e,n){let t=Q.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class bc extends J{constructor(e){super(),K(this,e,hc,dc,Y,{})}}function vc(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kc(l){let e,n,t,r,o,s,u,i,a;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[wc]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",r=L(),o=T("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function yc(l){let e,n,t;return n=new me({props:{$$slots:{default:[kc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Br(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:Z,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sc(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",g,d;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(r),s=k(`
        meters`),u=L(),i=T("p"),a=k("Minimum width: "),f=T("b"),g=k(c),d=k(`
        meters`)},m(y,O){$(y,e,O),w(e,n),w(e,t),w(t,o),w(e,s),$(y,u,O),$(y,i,O),w(i,a),w(i,f),w(f,g),w(i,d)},p(y,O){O&16&&r!==(r=y[4].average+"")&&H(o,r),O&16&&c!==(c=y[4].minimum+"")&&H(g,c)},d(y){y&&(p(e),p(u),p(i))}}}function Cc(l){let e,n;return e=new fe({props:{$$slots:{default:[Sc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tc(l){let e,n;const t=[z(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],l[2],l[1]),"line-width":Me,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Cc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ie(z(Pt)),s&0&&{sourceLayer:Pt},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Me,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Oc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[yc],default:[vc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Br(l);return o=new ve({props:{url:`pmtiles://${on()}/v1/${Pt}.pmtiles`,$$slots:{default:[Tc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Br(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Pt="road_widths";function Lc(l,e,n){let t=Q.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Ac extends J{constructor(e){super(),K(this,e,Lc,Oc,Y,{})}}function Ic(l){let e,n,t;return e=new Ce({props:{color:Q.trams}}),{c(){h(e.$$.fragment),n=k(`
  Trams`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Pc(l){let e,n,t,r;return t=new rt({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:Z,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Mc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Pc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Nc(l){let e,n;const t=[z(Mt),{sourceLayer:Mt},{paint:{"line-color":Q.trams,"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new ye({props:r}),e.$on("click",Ec),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ie(z(Mt)),s&0&&{sourceLayer:Mt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Fc(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Mc],default:[Ic]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${Mt}.pmtiles`,$$slots:{default:[Nc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Mt="trams";function Ec(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Dc(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class jc extends J{constructor(e){super(),K(this,e,Dc,Fc,Y,{})}}function Rc(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bc(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hc(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Bc]},$$scope:{ctx:l}}}),i=new Fe({}),{c(){e=T("p"),n=k("Data from the "),h(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=L(),s=T("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),$(f,o,c),$(f,s,c),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),v(t),v(i,f)}}}function zc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Hc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Hr(l){let e,n,t,r;return t=new Re({props:{colorScale:l[1],limits:l[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:Z,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function qc(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,g,d,y,O,C=l[4].peak_description+"",P,D,I,N,A,M=l[4].total+"",E,S,F=l[4].total_description+"",q,R;return{c(){e=T("p"),n=k("Stop name: "),t=T("b"),o=k(r),s=L(),u=T("p"),i=k("Peak: "),a=T("b"),c=k(f),g=k(`
        buses during the busiest hour of any day`),d=L(),y=T("p"),O=k("The peak hour is "),P=k(C),D=L(),I=T("p"),N=k("Total buses per day: "),A=T("b"),E=k(M),S=k(`
        (for `),q=k(F),R=k(", the busiest day of the week)")},m(j,B){$(j,e,B),w(e,n),w(e,t),w(t,o),$(j,s,B),$(j,u,B),w(u,i),w(u,a),w(a,c),w(u,g),$(j,d,B),$(j,y,B),w(y,O),w(y,P),$(j,D,B),$(j,I,B),w(I,N),w(I,A),w(A,E),w(I,S),w(I,q),w(I,R)},p(j,B){B&16&&r!==(r=j[4].stop_name+"")&&H(o,r),B&16&&f!==(f=j[4].peak+"")&&H(c,f),B&16&&C!==(C=j[4].peak_description+"")&&H(P,C),B&16&&M!==(M=j[4].total+"")&&H(E,M),B&16&&F!==(F=j[4].total_description+"")&&H(q,F)},d(j){j&&(p(e),p(s),p(u),p(d),p(y),p(D),p(I))}}}function Gc(l){let e,n;return e=new fe({props:{$$slots:{default:[qc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uc(l){let e,n;const t=[z(Nt),{sourceLayer:Nt},{paint:{"circle-color":we(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Gc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ve({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ie(z(Nt)),s&0&&{sourceLayer:Nt},s&6&&{paint:{"circle-color":we(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Wc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[zc],default:[Rc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Hr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Nt}.pmtiles`,$$slots:{default:[Uc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Hr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Nt="bus_stops";function Vc(l,e,n){let t=Q.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Xc extends J{constructor(e){super(),K(this,e,Vc,Wc,Y,{})}}function Yc(l){let e,n,t;return{c(){e=T("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=at(e,"change",l[5]),n=!0)},p:Z,d(r){r&&p(e),l[7](null),n=!1,t()}}}function zr(l){let e,n;return e=new Ye({props:{small:!0,$$slots:{default:[Jc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qc(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Ce({props:{color:Ft}}),{c(){h(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&H(r,t)},i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function Jc(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[Qc]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Kc(l){let e,n,t,r,o,s;e=new mn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Yc]},$$scope:{ctx:l}}}),t=new hl({props:{errorMessage:l[3]}});let u=l[2]>0&&zr(l);return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),u&&u.c(),o=Ne()},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&m(u,1)):(u=zr(i),u.c(),m(u,1),u.m(o.parentNode,o)):u&&($e(),_(u,1,1,()=>{u=null}),pe())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(u),s=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(u),s=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),u&&u.d(i)}}}function Zc(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,g,d,y,O=l[10].notes+"",C,P,D,I,N,A,M,E=l[10].id+"",S,F,q,R,j,B=(l[10].inspector??"???")+"",X,re,oe,ce=l[10].submission_time+"",Ae,Oe,ae,Le,ue,_e=l[10].scheme_reference+"",ge,Be,Ee,Te=l[10].current_design_stage+"",Qe;return{c(){e=T("div"),n=T("h2"),r=k(t),o=L(),s=T("p"),u=T("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=L(),g=T("p"),d=T("u"),d.textContent="Notes",y=k(`
          : `),C=k(O),P=L(),D=T("hr"),I=L(),N=T("p"),A=k("Critical issue ID: "),M=T("b"),S=k(E),F=L(),q=T("p"),R=k("Submitted by "),j=T("b"),X=k(B),re=k(`
          at
          `),oe=T("b"),Ae=k(ce),Oe=L(),ae=T("p"),Le=k("For scheme "),ue=T("b"),ge=k(_e),Be=k(`
          in stage
          `),Ee=T("b"),Qe=k(Te),Se(e,"max-width","30vw")},m(se,be){$(se,e,be),w(e,n),w(n,r),w(e,o),w(e,s),w(s,u),w(s,i),w(s,f),w(e,c),w(e,g),w(g,d),w(g,y),w(g,C),w(e,P),w(e,D),w(e,I),w(e,N),w(N,A),w(N,M),w(M,S),w(e,F),w(e,q),w(q,R),w(q,j),w(j,X),w(q,re),w(q,oe),w(oe,Ae),w(e,Oe),w(e,ae),w(ae,Le),w(ae,ue),w(ue,ge),w(ae,Be),w(ae,Ee),w(Ee,Qe)},p(se,be){be&1024&&t!==(t=se[10].critical_type+"")&&H(r,t),be&1024&&a!==(a=se[10].location_description+"")&&H(f,a),be&1024&&O!==(O=se[10].notes+"")&&H(C,O),be&1024&&E!==(E=se[10].id+"")&&H(S,E),be&1024&&B!==(B=(se[10].inspector??"???")+"")&&H(X,B),be&1024&&ce!==(ce=se[10].submission_time+"")&&H(Ae,ce),be&1024&&_e!==(_e=se[10].scheme_reference+"")&&H(ge,_e),be&1024&&Te!==(Te=se[10].current_design_stage+"")&&H(Qe,Te)},d(se){se&&p(e)}}}function xc(l){let e,n;return e=new fe({props:{$$slots:{default:[Zc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function e$(l){let e,n,t,r,o,s;const u=[z(`${ot}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Ft,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let d=0;d<u.length;d+=1)i=te(i,u[d]);e=new Ve({props:i}),e.$on("click",l[6]);const a=[z(`${ot}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=te(f,a[d]);t=new go({props:f});const c=[z(`${ot}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Ft,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let g={$$slots:{default:[xc]},$$scope:{ctx:l}};for(let d=0;d<c.length;d+=1)g=te(g,c[d]);return o=new Ve({props:g}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(d,y){b(e,d,y),$(d,n,y),b(t,d,y),$(d,r,y),b(o,d,y),s=!0},p(d,y){const O=y&2?ne(u,[y&0&&ie(z(`${ot}-clusters`)),u[1],y&0&&{paint:{"circle-color":Ft,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(O);const C=y&2?ne(a,[y&0&&ie(z(`${ot}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(C);const P=y&2?ne(c,[y&0&&ie(z(`${ot}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":Ft,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};y&2048&&(P.$$scope={dirty:y,ctx:d}),o.$set(P)},i(d){s||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(o.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),s=!1},d(d){d&&(p(n),p(r)),v(e,d),v(t,d),v(o,d)}}}function t$(l){let e,n,t,r;return e=new De({props:{label:"Critical Issues",$$slots:{default:[Kc]},$$scope:{ctx:l}}}),t=new bt({props:{id:ot,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[e$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let ot="criticals",Ft="red";function n$(l,e,n){let t;ke(l,Tn,d=>n(9,t=d));let r,o=!0,s=0,u="",i=zl();async function a(d){try{n(4,i=await ki(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f(d){t.getSource(ot).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id,(y,O)=>{y||t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:O})})}function c(d){U[d?"unshift":"push"](()=>{r=d,n(0,r)})}function g(d){o=d,n(1,o)}return[r,o,s,u,i,a,f,c,g]}class r$ extends J{constructor(e){super(),K(this,e,n$,t$,Y,{})}}function l$(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function o$(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function s$(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[o$]},$$scope:{ctx:l}}}),s=new rt({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function i$(l){let e,n,t;return n=new me({props:{$$slots:{default:[s$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function qr(l){let e,n;return e=new Ln({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:Z,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function a$(l){let e,n=Gr(l[3])+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=Gr(r[3])+"")&&H(t,n)},d(r){r&&p(e)}}}function f$(l){let e,n;return e=new fe({props:{$$slots:{default:[a$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function u$(l){let e,n;const t=[z(Et),{sourceLayer:Et},{paint:{"circle-color":ht(["get","crossing"],{traffic_signals:Q.signalized_crossing},Q.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[f$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ve({props:r}),e.$on("click",$$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ie(z(Et)),s&0&&{sourceLayer:Et},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function c$(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[i$],default:[l$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&qr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Et}.pmtiles`,$$slots:{default:[u$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=qr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&17&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Et="crossings";function Gr(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function $$(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function p$(l,e,n){let t=!1,r=[["Signalized",Q.signalized_crossing],["Other",Q.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class m$ extends J{constructor(e){super(),K(this,e,p$,c$,Y,{})}}function _$(l){let e;return{c(){e=k("Street gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function g$(l){let e,n,t,r,o;return{c(){e=T("p"),e.textContent="TODO",n=L(),t=T("p"),t.textContent="Data valid as of xyz",r=L(),o=T("p"),o.textContent="both osm and os licesnes?"},m(s,u){$(s,e,u),$(s,n,u),$(s,t,u),$(s,r,u),$(s,o,u)},p:Z,d(s){s&&(p(e),p(n),p(t),p(r),p(o))}}}function d$(l){let e,n,t;return n=new me({props:{$$slots:{default:[g$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ur(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:Z,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function h$(l){let e,n,t,r=l[4].gradient/100+"",o,s;return{c(){e=T("p"),n=k("Gradient: "),t=T("b"),o=k(r),s=k(`
        %`)},m(u,i){$(u,e,i),w(e,n),w(e,t),w(t,o),w(e,s)},p(u,i){i&16&&r!==(r=u[4].gradient/100+"")&&H(o,r)},d(u){u&&p(e)}}}function b$(l){let e,n;return e=new fe({props:{$$slots:{default:[h$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function v$(l){let e,n;const t=[z(Dt),{sourceLayer:Dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":Me,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[b$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ie(z(Dt)),s&0&&{sourceLayer:Dt},t[2],t[3],s&6&&{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":Me,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function w$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[d$],default:[_$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Ur(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Dt}.pmtiles`,$$slots:{default:[v$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Ur(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Dt="street_gradient";function k$(l,e,n){let t=["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"],r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class y$ extends J{constructor(e){super(),K(this,e,k$,w$,Y,{})}}function S$(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Cycle parking`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function C$(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function T$(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[C$]},$$scope:{ctx:l}}}),s=new rt({}),{c(){e=T("p"),n=k("Cycle parking, according to "),h(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function O$(l){let e,n,t;return n=new me({props:{$$slots:{default:[T$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function L$(l){let e,n,t,r=(l[3].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=(s[3].capacity??"unknown")+"")&&H(o,r)},d(s){s&&p(e)}}}function A$(l){let e,n;return e=new fe({props:{$$slots:{default:[L$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function I$(l){let e,n;const t=[z(jt),{sourceLayer:jt},{paint:{"circle-color":l[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[A$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ve({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ie(z(jt)),s&0&&{sourceLayer:jt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function P$(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[O$],default:[S$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${jt}.pmtiles`,$$slots:{default:[I$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let jt="cycle_parking";function M$(l,e,n){let t=Q.cycle_parking,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class N$ extends J{constructor(e){super(),K(this,e,M$,P$,Y,{})}}function F$(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function E$(l){let e,n,t,r;return t=new rt({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:Z,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function D$(l){let e,n,t;return n=new me({props:{$$slots:{default:[E$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Wr(l){let e,n,t;return n=new Ye({props:{$$slots:{default:[H$]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function j$(l){let e,n,t;return e=new Ce({props:{color:Q.education.schools}}),{c(){h(e.$$.fragment),n=k(`
        Schools`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function R$(l){let e,n,t;return e=new Ce({props:{color:Q.education.colleges}}),{c(){h(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function B$(l){let e,n,t;return e=new Ce({props:{color:Q.education.universities}}),{c(){h(e.$$.fragment),n=k(`
        Universities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function H$(l){let e,n,t,r,o,s,u,i,a;function f(C){l[3](C)}let c={$$slots:{default:[j$]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),U.push(()=>W(e,"checked",f));function g(C){l[4](C)}let d={$$slots:{default:[R$]},$$scope:{ctx:l}};l[1].college!==void 0&&(d.checked=l[1].college),r=new le({props:d}),U.push(()=>W(r,"checked",g));function y(C){l[5](C)}let O={$$slots:{default:[B$]},$$scope:{ctx:l}};return l[1].university!==void 0&&(O.checked=l[1].university),u=new le({props:O}),U.push(()=>W(u,"checked",y)),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment),s=L(),h(u.$$.fragment)},m(C,P){b(e,C,P),$(C,t,P),b(r,C,P),$(C,s,P),b(u,C,P),a=!0},p(C,P){const D={};P&128&&(D.$$scope={dirty:P,ctx:C}),!n&&P&2&&(n=!0,D.checked=C[1].school,V(()=>n=!1)),e.$set(D);const I={};P&128&&(I.$$scope={dirty:P,ctx:C}),!o&&P&2&&(o=!0,I.checked=C[1].college,V(()=>o=!1)),r.$set(I);const N={};P&128&&(N.$$scope={dirty:P,ctx:C}),!i&&P&2&&(i=!0,N.checked=C[1].university,V(()=>i=!1)),u.$set(N)},i(C){a||(m(e.$$.fragment,C),m(r.$$.fragment,C),m(u.$$.fragment,C),a=!0)},o(C){_(e.$$.fragment,C),_(r.$$.fragment,C),_(u.$$.fragment,C),a=!1},d(C){C&&(p(t),p(s)),v(e,C),v(r,C),v(u,C)}}}function z$(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&H(t,n)},d(r){r&&p(e)}}}function q$(l){let e,n;return e=new fe({props:{$$slots:{default:[z$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function G$(l){let e,n;const t=[z(Rt),{sourceLayer:Rt},{paint:{"fill-color":ht(["get","type"],{school:Q.education.schools,college:Q.education.colleges,university:Q.education.universities},"grey"),"fill-opacity":x(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Vr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[q$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ge({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ie(z(Rt)),s&0&&{sourceLayer:Rt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Vr(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function U$(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[D$],default:[F$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Wr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Rt}.pmtiles`,$$slots:{default:[G$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&128&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Wr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&131&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Rt="education";function Vr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function W$(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class V$ extends J{constructor(e){super(),K(this,e,W$,U$,Y,{})}}function X$(l){let e,n,t,r;return e=new Ce({props:{color:l[4]}}),{c(){h(e.$$.fragment),n=L(),t=k(l[2])},m(o,s){b(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&H(t,o[2])},i(o){r||(m(e.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function Y$(l){let e;const n=l[5].default,t=Vt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&Xt(t,n,r,r[7],e?Qt(n,r[7],o,null):Yt(r[7]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function Q$(l){let e,n,t;return n=new me({props:{$$slots:{default:[Y$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function J$(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&H(t,n)},d(r){r&&p(e)}}}function K$(l){let e,n;return e=new fe({props:{$$slots:{default:[J$,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Z$(l){let e,n;const t=[z(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":x(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[K$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ge({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&25?ne(t,[s&1&&ie(z(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":x(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function x$(l){let e,n,t,r,o;function s(i){l[6](i)}let u={$$slots:{right:[Q$],default:[X$]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ve({props:{url:`pmtiles://${he()}/v1/${l[0]}.pmtiles`,$$slots:{default:[Z$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],V(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${he()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function ep(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=Q[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class jl extends J{constructor(e){super(),K(this,e,ep,x$,Y,{name:0,singularNoun:1,pluralNoun:2})}}function tp(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function np(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[tp]},$$scope:{ctx:l}}}),s=new rt({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function rp(l){let e,n;return e=new jl({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[np]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class lp extends J{constructor(e){super(),K(this,e,null,rp,Y,{})}}function op(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Railway Stations`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:Z,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function sp(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ip(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[sp]},$$scope:{ctx:l}}}),s=new rt({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function ap(l){let e,n,t;return n=new me({props:{$$slots:{default:[ip]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function fp(l){let e,n=(l[3].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unnamed railway station")+"")&&H(t,n)},d(r){r&&p(e)}}}function up(l){let e,n;return e=new fe({props:{$$slots:{default:[fp,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cp(l){let e,n;const t=[z(Sn),{paint:{"circle-color":l[1],"circle-radius":nn/2}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[up]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ve({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ie(z(Sn)),s&2&&{paint:{"circle-color":o[1],"circle-radius":nn/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function $p(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[ap],default:[op]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new bt({props:{data:`${he()}/v1/${Sn}.geojson`,$$slots:{default:[cp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Sn="railway_stations";function pp(l,e,n){let t=Q.railway_stations,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class mp extends J{constructor(e){super(),K(this,e,pp,$p,Y,{})}}function _p(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gp(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function dp(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[_p]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[gp]},$$scope:{ctx:l}}}),i=new rt({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(" and "),h(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function hp(l){let e,n;return e=new jl({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[dp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class bp extends J{constructor(e){super(),K(this,e,null,hp,Y,{})}}function vp(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wp(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kp(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yp(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,O,C,P,D,I,N,A,M,E;return t=new ee({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[wp]},$$scope:{ctx:l}}}),P=new ee({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[kp]},$$scope:{ctx:l}}}),M=new Fe({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),h(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=L(),s=T("ul"),u=T("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=L(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=L(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=L(),d=T("li"),d.textContent='The "pedestrians" category also include mobility scooters',y=L(),O=T("li"),C=k("All limitations "),h(P.$$.fragment),D=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),I=L(),N=T("p"),N.textContent="You can click a point to open the full report, thanks to CycleStreets.",A=L(),h(M.$$.fragment)},m(S,F){$(S,e,F),w(e,n),b(t,e,null),w(e,r),$(S,o,F),$(S,s,F),w(s,u),w(s,i),w(s,a),w(s,f),w(s,c),w(s,g),w(s,d),w(s,y),w(s,O),w(O,C),b(P,O,null),w(O,D),$(S,I,F),$(S,N,F),$(S,A,F),b(M,S,F),E=!0},p(S,F){const q={};F&16777216&&(q.$$scope={dirty:F,ctx:S}),t.$set(q);const R={};F&16777216&&(R.$$scope={dirty:F,ctx:S}),P.$set(R)},i(S){E||(m(t.$$.fragment,S),m(P.$$.fragment,S),m(M.$$.fragment,S),E=!0)},o(S){_(t.$$.fragment,S),_(P.$$.fragment,S),_(M.$$.fragment,S),E=!1},d(S){S&&(p(e),p(o),p(s),p(I),p(N),p(A)),v(t),v(P),v(M,S)}}}function Sp(l){let e,n,t;return n=new me({props:{$$slots:{default:[yp]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Xr(l){let e,n,t,r,o,s,u,i,a,f,c,g,d;return n=new Ye({props:{small:!0,$$slots:{default:[Ap]},$$scope:{ctx:l}}}),f=new Ln({props:{rows:l[14]}}),{c(){e=T("div"),h(n.$$.fragment),t=L(),r=T("div"),o=k(`Filter years:
      `),s=T("input"),u=k(`
      -
      `),i=T("input"),a=L(),h(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(y,O){$(y,e,O),b(n,e,null),w(e,t),w(e,r),w(r,o),w(r,s),We(s,l[4]),w(r,u),w(r,i),We(i,l[5]),w(e,a),b(f,e,null),c=!0,g||(d=[at(s,"input",l[20]),at(i,"input",l[21])],g=!0)},p(y,O){const C={};O&16777231&&(C.$$scope={dirty:O,ctx:y}),n.$set(C),O&16&&Gt(s.value)!==y[4]&&We(s,y[4]),O&32&&Gt(i.value)!==y[5]&&We(i,y[5])},i(y){c||(m(n.$$.fragment,y),m(f.$$.fragment,y),c=!0)},o(y){_(n.$$.fragment,y),_(f.$$.fragment,y),c=!1},d(y){y&&p(e),v(n),v(f),g=!1,gl(d)}}}function Cp(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tp(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Op(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lp(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ap(l){let e,n,t,r,o,s,u,i,a,f,c,g;function d(A){l[16](A)}let y={$$slots:{default:[Cp]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new le({props:y}),U.push(()=>W(e,"checked",d));function O(A){l[17](A)}let C={$$slots:{default:[Tp]},$$scope:{ctx:l}};l[1]!==void 0&&(C.checked=l[1]),r=new le({props:C}),U.push(()=>W(r,"checked",O));function P(A){l[18](A)}let D={$$slots:{default:[Op]},$$scope:{ctx:l}};l[2]!==void 0&&(D.checked=l[2]),u=new le({props:D}),U.push(()=>W(u,"checked",P));function I(A){l[19](A)}let N={$$slots:{default:[Lp]},$$scope:{ctx:l}};return l[3]!==void 0&&(N.checked=l[3]),f=new le({props:N}),U.push(()=>W(f,"checked",I)),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment),s=L(),h(u.$$.fragment),a=L(),h(f.$$.fragment)},m(A,M){b(e,A,M),$(A,t,M),b(r,A,M),$(A,s,M),b(u,A,M),$(A,a,M),b(f,A,M),g=!0},p(A,M){const E={};M&16777216&&(E.$$scope={dirty:M,ctx:A}),!n&&M&1&&(n=!0,E.checked=A[0],V(()=>n=!1)),e.$set(E);const S={};M&16777216&&(S.$$scope={dirty:M,ctx:A}),!o&&M&2&&(o=!0,S.checked=A[1],V(()=>o=!1)),r.$set(S);const F={};M&16777216&&(F.$$scope={dirty:M,ctx:A}),!i&&M&4&&(i=!0,F.checked=A[2],V(()=>i=!1)),u.$set(F);const q={};M&16777216&&(q.$$scope={dirty:M,ctx:A}),!c&&M&8&&(c=!0,q.checked=A[3],V(()=>c=!1)),f.$set(q)},i(A){g||(m(e.$$.fragment,A),m(r.$$.fragment,A),m(u.$$.fragment,A),m(f.$$.fragment,A),g=!0)},o(A){_(e.$$.fragment,A),_(r.$$.fragment,A),_(u.$$.fragment,A),_(f.$$.fragment,A),g=!1},d(A){A&&(p(t),p(s),p(a)),v(e,A),v(r,A),v(u,A),v(f,A)}}}function Yr(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&H(o,r)},d(s){s&&p(e)}}}function Qr(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&H(o,r)},d(s){s&&p(e)}}}function Ip(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,g,d,y,O,C=Jr(l[23])+"",P,D,I,N,A,M=l[23].pedestrian_location&&Yr(l),E=l[23].pedestrian_movement&&Qr(l);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(r),s=L(),u=T("p"),i=k("Severity: "),a=T("b"),c=k(f),g=L(),d=T("p"),y=k("Casualties: "),O=T("b"),P=k(C),D=L(),M&&M.c(),I=L(),E&&E.c(),N=L(),A=T("p"),A.textContent="Click to open full report in CycleStreets"},m(S,F){$(S,e,F),w(e,n),w(e,t),w(t,o),$(S,s,F),$(S,u,F),w(u,i),w(u,a),w(a,c),$(S,g,F),$(S,d,F),w(d,y),w(d,O),w(O,P),$(S,D,F),M&&M.m(S,F),$(S,I,F),E&&E.m(S,F),$(S,N,F),$(S,A,F)},p(S,F){F&8388608&&r!==(r=S[23].year+"")&&H(o,r),F&8388608&&f!==(f=S[10][S[23].severity]+"")&&H(c,f),F&8388608&&C!==(C=Jr(S[23])+"")&&H(P,C),S[23].pedestrian_location?M?M.p(S,F):(M=Yr(S),M.c(),M.m(I.parentNode,I)):M&&(M.d(1),M=null),S[23].pedestrian_movement?E?E.p(S,F):(E=Qr(S),E.c(),E.m(N.parentNode,N)):E&&(E.d(1),E=null)},d(S){S&&(p(e),p(s),p(u),p(g),p(d),p(D),p(I),p(N),p(A)),M&&M.d(S),E&&E.d(S)}}}function Pp(l){let e,n;return e=new fe({props:{$$slots:{default:[Ip,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mp(l){let e,n;const t=[z(Bt),{sourceLayer:Bt},{paint:{"circle-color":we(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Pp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ve({props:r}),e.$on("click",Fp),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&14528?ne(t,[s&0&&ie(z(Bt)),s&0&&{sourceLayer:Bt},s&14336&&{paint:{"circle-color":we(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Np(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={$$slots:{right:[Sp],default:[vp]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[6]&&Xr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Bt}.pmtiles`,$$slots:{default:[Mp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,g.checked=f[6],V(()=>n=!1)),e.$set(g),f[6]?a?(a.p(f,c),c&64&&m(a,1)):(a=Xr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&16777408&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Bt="stats19";function Jr(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function Fp(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function Ep(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(q,R,j,B,X,re){let oe=["any"];return o&&oe.push(["get","pedestrian"]),s&&oe.push(["get","cyclist"]),u&&oe.push(["get","horse_rider"]),i&&oe.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],oe]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},d={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},O=Q.sequential_low_to_high[4],C=Q.sequential_low_to_high[2],P=Q.sequential_low_to_high[0],D=[["Fatal",O],["Serious",C],["Slight",P]];function I(q){r=q,n(6,r)}function N(q){o=q,n(0,o)}function A(q){s=q,n(1,s)}function M(q){u=q,n(2,u)}function E(q){i=q,n(3,i)}function S(){a=Gt(this.value),n(4,a)}function F(){f=Gt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,g,d,y,O,C,P,D,I,N,A,M,E,S,F]}class Dp extends J{constructor(e){super(),K(this,e,Ep,Np,Y,{})}}function jp(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rp(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bp(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hp(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new ee({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Rp]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Bp]},$$scope:{ctx:l}}}),f=new Fe({}),{c(){e=T("p"),n=k("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=L(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=L(),h(f.$$.fragment)},m(g,d){$(g,e,d),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(g,u,d),$(g,i,d),$(g,a,d),b(f,g,d),c=!0},p(g,d){const y={};d&64&&(y.$$scope={dirty:d,ctx:g}),t.$set(y);const O={};d&64&&(O.$$scope={dirty:d,ctx:g}),o.$set(O)},i(g){c||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(u),p(i),p(a)),v(t),v(o),v(f,g)}}}function zp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Hp]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Kr(l){let e,n;return e=new Re({props:{colorScale:l[1],limits:l[3]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:Z,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qp(l){let e,n=l[5].location+"",t,r,o,s,u,i=l[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,g,d,y=l[5].pedal_cycles_2022.toLocaleString()+"",O,C,P,D,I,N=l[5].method+"",A;return{c(){e=T("h2"),t=k(n),r=L(),o=T("p"),s=k("Total motor vehicles (2022 AADF): "),u=T("b"),a=k(i),f=L(),c=T("p"),g=k("Total pedal cycles (2022 AADF): "),d=T("b"),O=k(y),C=L(),P=T("p"),D=k("Count method: "),I=T("b"),A=k(N)},m(M,E){$(M,e,E),w(e,t),$(M,r,E),$(M,o,E),w(o,s),w(o,u),w(u,a),$(M,f,E),$(M,c,E),w(c,g),w(c,d),w(d,O),$(M,C,E),$(M,P,E),w(P,D),w(P,I),w(I,A)},p(M,E){E&32&&n!==(n=M[5].location+"")&&H(t,n),E&32&&i!==(i=M[5].motor_vehicles_2022.toLocaleString()+"")&&H(a,i),E&32&&y!==(y=M[5].pedal_cycles_2022.toLocaleString()+"")&&H(O,y),E&32&&N!==(N=M[5].method+"")&&H(A,N)},d(M){M&&(p(e),p(r),p(o),p(f),p(c),p(C),p(P))}}}function Gp(l){let e,n;return e=new fe({props:{$$slots:{default:[qp,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Up(l){let e,n;const t=[z(Ht),{sourceLayer:Ht},{paint:{"circle-color":we(["get","motor_vehicles_2022"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Gp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ve({props:r}),e.$on("click",Vp),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ie(z(Ht)),s&0&&{sourceLayer:Ht},s&6&&{paint:{"circle-color":we(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Wp(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={$$slots:{right:[zp],default:[jp]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Kr(l);return o=new ve({props:{url:`pmtiles://${he()}/v1/${Ht}.pmtiles`,$$slots:{default:[Up]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Kr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ht="vehicle_counts";function Vp(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function Xp(l,e,n){let t=Q.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class Yp extends J{constructor(e){super(),K(this,e,Xp,Wp,Y,{})}}function Qp(l){let e,n,t,r,o,s,u,i;return e=new V$({}),t=new lp({}),o=new bp({}),u=new mp({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,r,f),b(o,a,f),$(a,s,f),b(u,a,f),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Jp(l){let e,n;return e=new Ye({props:{small:!0,$$slots:{default:[Qp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kp(l){let e,n,t,r,o,s,u,i,a,f;return e=new hu({}),t=new Ru({}),o=new Lu({}),u=new N$({}),a=new m$({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Zp(l){let e,n;return e=new Ye({props:{small:!0,$$slots:{default:[Kp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xp(l){let e,n,t,r,o,s;return e=new ou({}),t=new jc({}),o=new Xc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function em(l){let e,n,t,r,o,s,u,i,a,f;return e=new kf({}),t=new Wf({}),o=new La({}),u=new Ja({}),a=new cf({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function tm(l){let e,n;return e=new Ye({props:{small:!0,$$slots:{default:[em]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nm(l){let e,n,t,r;return e=new da({}),t=new Ba({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function rm(l){let e,n;return e=new Ye({props:{small:!0,$$slots:{default:[nm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lm(l){let e,n,t,r,o,s;return e=new Ac({}),t=new Yu({}),o=new bc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function om(l){let e,n,t,r,o,s,u,i,a=_n()=="Private (development)",f,c,g;e=new Yp({}),t=new Dp({}),o=new ac({}),u=new y$({});let d=a&&lm();return c=new Ff({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),d&&d.c(),f=L(),h(c.$$.fragment)},m(y,O){b(e,y,O),$(y,n,O),b(t,y,O),$(y,r,O),b(o,y,O),$(y,s,O),b(u,y,O),$(y,i,O),d&&d.m(y,O),$(y,f,O),b(c,y,O),g=!0},p:Z,i(y){g||(m(e.$$.fragment,y),m(t.$$.fragment,y),m(o.$$.fragment,y),m(u.$$.fragment,y),m(d),m(c.$$.fragment,y),g=!0)},o(y){_(e.$$.fragment,y),_(t.$$.fragment,y),_(o.$$.fragment,y),_(u.$$.fragment,y),_(d),_(c.$$.fragment,y),g=!1},d(y){y&&(p(n),p(r),p(s),p(i),p(f)),v(e,y),v(t,y),v(o,y),v(u,y),d&&d.d(y),v(c,y)}}}function sm(l){let e,n;return e=new Ye({props:{small:!0,$$slots:{default:[om]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function im(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new Yl({props:u}),U.push(()=>W(e,"enabled",s)),r=new eo({}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],V(()=>n=!1)),e.$set(f)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function am(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,O,C,P,D;return e=new r$({}),t=new De({props:{label:"Trip generators",$$slots:{default:[Jp]},$$scope:{ctx:l}}}),o=new De({props:{label:"Existing infrastructure",$$slots:{default:[Zp]},$$scope:{ctx:l}}}),u=new De({props:{label:"Public transit",$$slots:{default:[xp]},$$scope:{ctx:l}}}),a=new De({props:{label:"Boundaries",$$slots:{default:[tm]},$$scope:{ctx:l}}}),c=new De({props:{label:"Census",$$slots:{default:[rm]},$$scope:{ctx:l}}}),d=new De({props:{label:"Other",$$slots:{default:[sm]},$$scope:{ctx:l}}}),O=new De({props:{label:"Tools",$$slots:{default:[im]},$$scope:{ctx:l}}}),P=new Xl({props:{disabled:!l[1]}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment),f=L(),h(c.$$.fragment),g=L(),h(d.$$.fragment),y=L(),h(O.$$.fragment),C=L(),h(P.$$.fragment)},m(I,N){b(e,I,N),$(I,n,N),b(t,I,N),$(I,r,N),b(o,I,N),$(I,s,N),b(u,I,N),$(I,i,N),b(a,I,N),$(I,f,N),b(c,I,N),$(I,g,N),b(d,I,N),$(I,y,N),b(O,I,N),$(I,C,N),b(P,I,N),D=!0},p(I,N){const A={};N&16&&(A.$$scope={dirty:N,ctx:I}),t.$set(A);const M={};N&16&&(M.$$scope={dirty:N,ctx:I}),o.$set(M);const E={};N&16&&(E.$$scope={dirty:N,ctx:I}),u.$set(E);const S={};N&16&&(S.$$scope={dirty:N,ctx:I}),a.$set(S);const F={};N&16&&(F.$$scope={dirty:N,ctx:I}),c.$set(F);const q={};N&16&&(q.$$scope={dirty:N,ctx:I}),d.$set(q);const R={};N&17&&(R.$$scope={dirty:N,ctx:I}),O.$set(R);const j={};N&2&&(j.disabled=!I[1]),P.$set(j)},i(I){D||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(o.$$.fragment,I),m(u.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(d.$$.fragment,I),m(O.$$.fragment,I),m(P.$$.fragment,I),D=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(o.$$.fragment,I),_(u.$$.fragment,I),_(a.$$.fragment,I),_(c.$$.fragment,I),_(d.$$.fragment,I),_(O.$$.fragment,I),_(P.$$.fragment,I),D=!1},d(I){I&&(p(n),p(r),p(s),p(i),p(f),p(g),p(y),p(C)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I),v(c,I),v(d,I),v(O,I),v(P,I)}}}function fm(l){let e,n;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=te(r,t[o]);return e=new Ge({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&2?ne(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function um(l){let e,n,t,r;return e=new De({props:{label:"Layers",open:!0,$$slots:{default:[am]},$$scope:{ctx:l}}}),t=new bt({props:{data:l[2],$$slots:{default:[fm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function cm(l,e,n){let t,r;ke(l,ur,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&ur.set(!t)},[t,r,o,s]}class $m extends J{constructor(e){super(),K(this,e,cm,um,Y,{})}}function Zr(l){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pm(l){let e,n=l[0]&&Zr();return{c(){n&&n.c(),e=Ne()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=Zr(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:Z,o:Z,d(t){t&&p(e),n&&n.d(t)}}}function mm(l,e,n){let{loadFile:t}=e,r=!0;return On(async()=>{let s=await(await fetch(`${on()}/v1/random_schemes.geojson`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class _m extends J{constructor(e){super(),K(this,e,mm,pm,Y,{loadFile:1})}}function xr(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&H(r,t)},d(s){s&&p(e)}}}function gm(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function dm(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hm(l){let e,n,t,r;return e=new gt({props:{$$slots:{default:[gm]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new gt({props:{$$slots:{default:[dm]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function bm(l){var F,q,R,j;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((F=l[0].browse)==null?void 0:F.authority_or_region)+"",a,f,c,g,d=((q=l[0].browse)==null?void 0:q.capital_scheme_id)+"",y,O,C,P,D=((R=l[0].browse)==null?void 0:R.funding_programme)+"",I,N,A,M,E,S=((j=l[0].browse)==null?void 0:j.current_milestone)&&xr(l);return M=new Ql({props:{$$slots:{default:[hm]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Scheme reference: "),r=k(t),o=L(),s=T("p"),u=k("Authority or region: "),a=k(i),f=L(),c=T("p"),g=k("Capital scheme ID: "),y=k(d),O=L(),C=T("p"),P=k("Funding programme: "),I=k(D),N=L(),S&&S.c(),A=L(),h(M.$$.fragment)},m(B,X){$(B,e,X),w(e,n),w(e,r),$(B,o,X),$(B,s,X),w(s,u),w(s,a),$(B,f,X),$(B,c,X),w(c,g),w(c,y),$(B,O,X),$(B,C,X),w(C,P),w(C,I),$(B,N,X),S&&S.m(B,X),$(B,A,X),b(M,B,X),E=!0},p(B,X){var oe,ce,Ae,Oe;(!E||X&1)&&t!==(t=B[0].scheme_reference+"")&&H(r,t),(!E||X&1)&&i!==(i=((oe=B[0].browse)==null?void 0:oe.authority_or_region)+"")&&H(a,i),(!E||X&1)&&d!==(d=((ce=B[0].browse)==null?void 0:ce.capital_scheme_id)+"")&&H(y,d),(!E||X&1)&&D!==(D=((Ae=B[0].browse)==null?void 0:Ae.funding_programme)+"")&&H(I,D),(Oe=B[0].browse)!=null&&Oe.current_milestone?S?S.p(B,X):(S=xr(B),S.c(),S.m(A.parentNode,A)):S&&(S.d(1),S=null);const re={};X&32&&(re.$$scope={dirty:X,ctx:B}),M.$set(re)},i(B){E||(m(M.$$.fragment,B),E=!0)},o(B){_(M.$$.fragment,B),E=!1},d(B){B&&(p(e),p(o),p(s),p(f),p(c),p(O),p(C),p(N),p(A)),S&&S.d(B),v(M,B)}}}function vm(l){let e,n;return e=new De({props:{label:`${l[0].scheme_name}`,$$slots:{default:[bm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wm(l,e,n){let t,r;ke(l,dt,i=>n(3,t=i)),ke(l,Tn,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(ql(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class km extends J{constructor(e){super(),K(this,e,wm,vm,Y,{scheme:0})}}function el(l){let e,n,t=jn(l[0].length_meters)+"",r;return{c(){e=T("p"),n=k("Length: "),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(e,r)},p(o,s){s&1&&t!==(t=jn(o[0].length_meters)+"")&&H(r,t)},d(o){o&&p(e)}}}function tl(l){let e,n=st(l[0].description,l[2])+"";return{c(){e=T("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=st(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function nl(l){var o;let e,n,t=((o=l[1].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&H(r,t)},d(s){s&&p(e)}}}function ym(l){var Be,Ee,Te,Qe;let e,n,t,r=st(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,g,d,y,O,C,P=st(l[1].scheme_name??"",l[3])+"",D,I,N=st(l[0].scheme_reference,l[3])+"",A,M,E,S,F=((Be=l[1].browse)==null?void 0:Be.authority_or_region)+"",q,R,j,B,X=((Ee=l[1].browse)==null?void 0:Ee.capital_scheme_id)+"",re,oe,ce,Ae,Oe=((Te=l[1].browse)==null?void 0:Te.funding_programme)+"",ae,Le,ue=l[0].length_meters&&el(l),_e=l[0].description&&tl(l),ge=((Qe=l[1].browse)==null?void 0:Qe.current_milestone)&&nl(l);return{c(){e=T("div"),n=T("h2"),t=new zt(!1),o=k(" ("),u=k(s),i=k(")"),a=L(),ue&&ue.c(),f=L(),_e&&_e.c(),c=L(),g=T("hr"),d=L(),y=T("p"),O=k("Part of scheme: "),C=new zt(!1),D=k(" ("),I=new zt(!1),A=k(")"),M=L(),E=T("p"),S=k("Authority or region: "),q=k(F),R=L(),j=T("p"),B=k("Capital scheme ID: "),re=k(X),oe=L(),ce=T("p"),Ae=k("Funding programme: "),ae=k(Oe),Le=L(),ge&&ge.c(),t.a=o,C.a=D,I.a=A,Se(e,"max-width","30vw")},m(se,be){$(se,e,be),w(e,n),t.m(r,n),w(n,o),w(n,u),w(n,i),w(e,a),ue&&ue.m(e,null),w(e,f),_e&&_e.m(e,null),w(e,c),w(e,g),w(e,d),w(e,y),w(y,O),C.m(P,y),w(y,D),I.m(N,y),w(y,A),w(e,M),w(e,E),w(E,S),w(E,q),w(e,R),w(e,j),w(j,B),w(j,re),w(e,oe),w(e,ce),w(ce,Ae),w(ce,ae),w(e,Le),ge&&ge.m(e,null)},p(se,[be]){var Pn,Mn,Nn,Fn;be&5&&r!==(r=st(se[0].name,se[2])+"")&&t.p(r),be&1&&s!==(s=se[0].intervention_type+"")&&H(u,s),se[0].length_meters?ue?ue.p(se,be):(ue=el(se),ue.c(),ue.m(e,f)):ue&&(ue.d(1),ue=null),se[0].description?_e?_e.p(se,be):(_e=tl(se),_e.c(),_e.m(e,c)):_e&&(_e.d(1),_e=null),be&10&&P!==(P=st(se[1].scheme_name??"",se[3])+"")&&C.p(P),be&9&&N!==(N=st(se[0].scheme_reference,se[3])+"")&&I.p(N),be&2&&F!==(F=((Pn=se[1].browse)==null?void 0:Pn.authority_or_region)+"")&&H(q,F),be&2&&X!==(X=((Mn=se[1].browse)==null?void 0:Mn.capital_scheme_id)+"")&&H(re,X),be&2&&Oe!==(Oe=((Nn=se[1].browse)==null?void 0:Nn.funding_programme)+"")&&H(ae,Oe),(Fn=se[1].browse)!=null&&Fn.current_milestone?ge?ge.p(se,be):(ge=nl(se),ge.c(),ge.m(e,null)):ge&&(ge.d(1),ge=null)},i:Z,o:Z,d(se){se&&p(e),ue&&ue.d(),_e&&_e.d(),ge&&ge.d()}}}function st(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function Sm(l,e,n){let t,r,o,s;ke(l,ln,i=>n(4,r=i)),ke(l,wt,i=>n(2,o=i)),ke(l,kt,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class In extends J{constructor(e){super(),K(this,e,Sm,ym,Y,{props:0})}}function Cm(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&H(t,n)},d(r){r&&p(e)}}}function Tm(l){let e,n;return e=new In({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Om(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Cm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Tm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Lm(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&H(t,n)},d(r){r&&p(e)}}}function Am(l){let e,n;return e=new In({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Im(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Lm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Am,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Pm(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&H(t,n)},d(r){r&&p(e)}}}function Mm(l){let e,n;return e=new In({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nm(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Pm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Mm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Fm(l){let e,n,t,r,o,s,u,i,a,f;const c=[z("interventions-points"),{filter:["all",Rn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":nn,"circle-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[Om]},$$scope:{ctx:l}};for(let A=0;A<c.length;A+=1)g=te(g,c[A]);e=new Ve({props:g});const d=[z("interventions-lines"),{filter:["all",Bn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":vt,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[Im]},$$scope:{ctx:l}};for(let A=0;A<d.length;A+=1)y=te(y,d[A]);t=new ye({props:y});const O=[z("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*vt,"circle-opacity":0,"circle-stroke-color":nt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let C={};for(let A=0;A<O.length;A+=1)C=te(C,O[A]);o=new Ve({props:C});const P=[z("interventions-polygons"),{filter:["all",xt,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":x(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[Nm]},$$scope:{ctx:l}};for(let A=0;A<P.length;A+=1)D=te(D,P[A]);u=new Ge({props:D});const I=[z("interventions-polygons-outlines"),{filter:["all",xt,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*vt}},{layout:{visibility:l[0]?"visible":"none"}}];let N={};for(let A=0;A<I.length;A+=1)N=te(N,I[A]);return a=new ye({props:N}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(A,M){b(e,A,M),$(A,n,M),b(t,A,M),$(A,r,M),b(o,A,M),$(A,s,M),b(u,A,M),$(A,i,M),b(a,A,M),f=!0},p(A,M){const E=M&29?ne(c,[c[0],M&24&&{filter:["all",Rn,A[3],A[4]]},c[2],c[3],M&4&&{paint:{"circle-color":A[2],"circle-radius":nn,"circle-opacity":x(1,.5)}},M&1&&{layout:{visibility:A[0]?"visible":"none"}},c[6]]):{};M&128&&(E.$$scope={dirty:M,ctx:A}),e.$set(E);const S=M&13?ne(d,[d[0],M&8&&{filter:["all",Bn,A[3]]},d[2],d[3],M&4&&{paint:{"line-color":A[2],"line-width":vt,"line-opacity":x(1,.5)}},M&1&&{layout:{visibility:A[0]?"visible":"none"}},d[6]]):{};M&128&&(S.$$scope={dirty:M,ctx:A}),t.$set(S);const F=M&1?ne(O,[O[0],O[1],O[2],{layout:{visibility:A[0]?"visible":"none"}}]):{};o.$set(F);const q=M&13?ne(P,[P[0],M&8&&{filter:["all",xt,A[3]]},P[2],P[3],M&4&&{paint:{"fill-color":A[2],"fill-opacity":x(.2,.5)}},M&1&&{layout:{visibility:A[0]?"visible":"none"}},P[6]]):{};M&128&&(q.$$scope={dirty:M,ctx:A}),u.$set(q);const R=M&13?ne(I,[I[0],M&8&&{filter:["all",xt,A[3]]},M&4&&{paint:{"line-color":A[2],"line-opacity":.5,"line-width":.7*vt}},M&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};a.$set(R)},i(A){f||(m(e.$$.fragment,A),m(t.$$.fragment,A),m(o.$$.fragment,A),m(u.$$.fragment,A),m(a.$$.fragment,A),f=!0)},o(A){_(e.$$.fragment,A),_(t.$$.fragment,A),_(o.$$.fragment,A),_(u.$$.fragment,A),_(a.$$.fragment,A),f=!1},d(A){A&&(p(n),p(r),p(s),p(i)),v(e,A),v(t,A),v(o,A),v(u,A),v(a,A)}}}function Em(l){let e,n;return e=new bt({props:{data:l[1],$$slots:{default:[Fm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Dm(l,e,n){let t,r;ke(l,dt,a=>n(5,r=a));let{showSchemes:o}=e,[s]=yn();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=Gl(r))},[o,t,s,u,i,r]}class jm extends J{constructor(e){super(),K(this,e,Dm,Em,Y,{showSchemes:0})}}function rl(l,e,n){const t=l.slice();return t[13]=e[n],t}function ll(l,e,n){const t=l.slice();return t[16]=e[n],t}function Rm(l){let e,n;return e=new _m({props:{loadFile:l[7]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:Z,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ol(l){let e,n,t,r,o;e=new gt({props:{$$slots:{default:[Bm]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[Hm]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new ul({props:u}),U.push(()=>W(t,"open",s)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],V(()=>r=!1)),t.$set(c)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function Bm(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sl(l){let e,n,t=l[16]+"",r;return{c(){e=T("li"),n=T("p"),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&H(r,t)},d(o){o&&p(e)}}}function Hm(l){let e,n,t,r,o=je(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=sl(ll(l,o,u));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=L(),r=T("ul");for(let u=0;u<s.length;u+=1)s[u].c();G(e,"class","govuk-prose")},m(u,i){$(u,e,i),w(e,n),w(e,t),w(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=je(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=ll(u,o,a);s[a]?s[a].p(f,i):(s[a]=sl(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),_t(s,u)}}}function il(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new Hi({props:u}),U.push(()=>W(e,"schemesToBeShown",o)),U.push(()=>W(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],V(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],V(()=>t=!1)),e.$set(f)},i(i){r||(m(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){v(e,i)}}}function al(l){let e,n;return e=new km({props:{scheme:l[13]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&al(l);return{c(){r&&r.c(),n=Ne()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&m(r,1)):(r=al(o),r.c(),m(r,1),r.m(n.parentNode,n)):r&&($e(),_(r,1,1,()=>{r=null}),pe())},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function zm(l){let e,n,t,r,o,s,u,i,a,f,c=_n()=="Private (development)",g,d,y,O,C,P,D,I,N;o=new xl({props:{boundaryGeojson:l[4]}}),a=new Ul({});let A=c&&Rm(l),M=l[4].notes&&ol(l);y=new Kl({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),C=new hl({props:{errorMessage:l[0]}});let E=l[6].size>0&&il(l),S=je(l[6].values()),F=[];for(let R=0;R<S.length;R+=1)F[R]=fl(rl(l,S,R));const q=R=>_(F[R],1,1,()=>{F[R]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",r=L(),h(o.$$.fragment),s=L(),u=T("p"),u.textContent=`App version: ${_n()}`,i=L(),h(a.$$.fragment),f=L(),A&&A.c(),g=L(),M&&M.c(),d=L(),h(y.$$.fragment),O=L(),h(C.$$.fragment),P=L(),E&&E.c(),D=L(),I=T("ul");for(let R=0;R<F.length;R+=1)F[R].c();Se(n,"display","flex"),Se(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(R,j){$(R,e,j),w(e,n),w(n,t),w(n,r),b(o,n,null),w(e,s),w(e,u),w(e,i),b(a,e,null),w(e,f),A&&A.m(e,null),w(e,g),M&&M.m(e,null),w(e,d),b(y,e,null),w(e,O),b(C,e,null),w(e,P),E&&E.m(e,null),w(e,D),w(e,I);for(let B=0;B<F.length;B+=1)F[B]&&F[B].m(I,null);N=!0},p(R,j){const B={};j&16&&(B.boundaryGeojson=R[4]),o.$set(B),c&&A.p(R,j),R[4].notes?M?(M.p(R,j),j&16&&m(M,1)):(M=ol(R),M.c(),m(M,1),M.m(e,d)):M&&($e(),_(M,1,1,()=>{M=null}),pe());const X={};if(j&1&&(X.errorMessage=R[0]),C.$set(X),R[6].size>0?E?(E.p(R,j),j&64&&m(E,1)):(E=il(R),E.c(),m(E,1),E.m(e,D)):E&&($e(),_(E,1,1,()=>{E=null}),pe()),j&66){S=je(R[6].values());let re;for(re=0;re<S.length;re+=1){const oe=rl(R,S,re);F[re]?(F[re].p(oe,j),m(F[re],1)):(F[re]=fl(oe),F[re].c(),m(F[re],1),F[re].m(I,null))}for($e(),re=S.length;re<F.length;re+=1)q(re);pe()}},i(R){if(!N){m(o.$$.fragment,R),m(a.$$.fragment,R),m(A),m(M),m(y.$$.fragment,R),m(C.$$.fragment,R),m(E);for(let j=0;j<S.length;j+=1)m(F[j]);N=!0}},o(R){_(o.$$.fragment,R),_(a.$$.fragment,R),_(A),_(M),_(y.$$.fragment,R),_(C.$$.fragment,R),_(E),F=F.filter(Boolean);for(let j=0;j<F.length;j+=1)_(F[j]);N=!1},d(R){R&&p(e),v(o),v(a),A&&A.d(),M&&M.d(),v(y),v(C),E&&E.d(),_t(F,R)}}}function qm(l){let e,n,t,r,o,s,u;return e=new Jl({}),t=new jm({props:{showSchemes:l[2]}}),s=new $m({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),o=T("div"),h(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),$(i,o,a),b(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),v(s)}}}function Gm(l){let e,n,t;return n=new Wl({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[qm]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Um(l){let e,n;return e=new to({props:{$$slots:{main:[Gm],sidebar:[zm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wm(l,e,n){let t,r,o;ke(l,dt,C=>n(4,t=C)),ke(l,Hn,C=>n(5,r=C)),ke(l,ln,C=>n(6,o=C)),On(()=>{Vl()});const s=new URLSearchParams(window.location.search);Hn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(C){try{dt.set(JSON.parse(C)),ln.set(vi(t)),n(0,u="")}catch(P){n(0,u=`The file you loaded is broken: ${P}`)}}const g=()=>n(3,f=!0);function d(C){f=C,n(3,f)}function y(C){i=C,n(1,i)}function O(C){a=C,n(2,a)}return[u,i,a,f,t,r,o,c,g,d,y,O]}class Vm extends J{constructor(e){super(),K(this,e,Wm,Um,Y,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Vm({target:document.getElementById("app")});
