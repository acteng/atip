import{S as V,i as K,s as Q,e as S,d as A,b as se,f as g,q as J,k as d,J as Bt,a as L,aB as Wn,g as $,aa as Kt,K as Ut,L as Et,M as Wt,h as m,j as _,C as ve,v as ke,y as He,c as w,t as y,m as b,A as G,l as v,r as z,u as B,w as U,N as Jt,G as he,aC as Yn,x as Y,H as Ar,I as Qt,aD as eo,at as bn,Y as X,az as pn,av as Ln,Z as Re,aE as me,aF as xt,aG as zt,ak as fn,a9 as at,ab as to,aH as no,o as Gr,aI as lo,aJ as qr,aA as ro,ay as vn,B as oo,n as so}from"./index-b819f2b8.js";import{g as te,a as oe}from"./spread-8a54911c.js";import{c as q,d as nt,t as io,a as Ee,C as Ne,e as be,S as Zt,M as ao,p as Jn,f as Qn,h as en,g as fo,m as Vn}from"./Modal-0cb6db93.js";import{e as Kn,h as lt,M as uo,b as Hr,H as co,f as Ie,C as ft,a as kn,c as yn,d as $o,i as on,W as In,B as po,S as mo,G as _o}from"./WarningIcon-5ce9c991.js";import{d as go,g as zr,u as ho,r as wo,b as bo,c as vo,G as ct,a as ge,e as ko,h as ee,F as Me,i as yo,j as So,k as To,L as Co,M as Lo}from"./MapLibreMap-71aab4d7.js";import{R as On,F as Br,a as sn,E as Io}from"./Radio-d8edde46.js";import{S as We,B as Oo}from"./SecondaryButton-3ccfd081.js";import{E as re,H as Mo}from"./Header-b100569f.js";import{e as _e,f as Zn,b as jo,s as No,g as Ro,d as Fo}from"./files-db41f417.js";import{P as ae,A as Ur}from"./Popup-34c8264d.js";import{D as Po}from"./DefaultButton-dc6b6dd9.js";function Do(o){let e;return{c(){e=S("span"),A(e,"class","svelte-kzgqtg"),se(e,"background",o[0])},m(l,t){g(l,e,t)},p(l,[t]){t&1&&se(e,"background",l[0])},i:J,o:J,d(l){l&&d(e)}}}function Ao(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class ye extends V{constructor(e){super(),K(this,e,Ao,Do,Q,{color:0})}}const Go=o=>({}),Xn=o=>({}),qo=o=>({}),xn=o=>({});function Ho(o){let e,l,t,n,r,s,f,i,a,u,c;const p=o[4].sidebar,h=Bt(p,o,o[3],xn),k=o[4].main,C=Bt(k,o,o[3],Xn);return{c(){e=S("div"),l=S("aside"),t=S("div"),h&&h.c(),n=L(),r=S("button"),r.textContent="→",f=L(),i=S("main"),C&&C.c(),A(t,"class","sidebar-content content-container svelte-1n0etgd"),A(r,"type","button"),A(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),A(l,"class",s=Wn(o[1]?"":"collapsed")+" svelte-1n0etgd"),se(l,"--sidebarWidth",o[0]),A(i,"class","svelte-1n0etgd"),A(e,"class","overall-layout svelte-1n0etgd")},m(T,I){g(T,e,I),$(e,l),$(l,t),h&&h.m(t,null),$(l,n),$(l,r),$(e,f),$(e,i),C&&C.m(i,null),a=!0,u||(c=Kt(r,"click",o[2]),u=!0)},p(T,[I]){h&&h.p&&(!a||I&8)&&Ut(h,p,T,T[3],a?Wt(p,T[3],I,qo):Et(T[3]),xn),(!a||I&2&&s!==(s=Wn(T[1]?"":"collapsed")+" svelte-1n0etgd"))&&A(l,"class",s),(!a||I&1)&&se(l,"--sidebarWidth",T[0]),C&&C.p&&(!a||I&8)&&Ut(C,k,T,T[3],a?Wt(k,T[3],I,Go):Et(T[3]),Xn)},i(T){a||(m(h,T),m(C,T),a=!0)},o(T){_(h,T),_(C,T),a=!1},d(T){T&&d(e),h&&h.d(T),C&&C.d(T),u=!1,c()}}}function zo(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){l(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,s,f,n,t]}class Bo extends V{constructor(e){super(),K(this,e,zo,Ho,Q,{sidebarWidth:0})}}function el(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function tl(o){let e,l,t,n=o[1]+"",r,s,f;return l=new ye({props:{color:o[2]}}),{c(){e=S("li"),w(l.$$.fragment),t=L(),r=y(n),s=L()},m(i,a){g(i,e,a),b(l,e,null),$(e,t),$(e,r),$(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&G(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){_(l.$$.fragment,i),f=!1},d(i){i&&d(e),v(l)}}}function Uo(o){let e,l,t=_e(o[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=tl(el(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){e=S("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,f){g(s,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[f]){if(f&1){t=_e(s[0]);let i;for(i=0;i<t.length;i+=1){const a=el(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=tl(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(ve(),i=t.length;i<n.length;i+=1)r(i);ke()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),He(n,s)}}}function Eo(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class $t extends V{constructor(e){super(),K(this,e,Eo,Uo,Q,{rows:0})}}function Wo(o){let e;const l=o[16].default,t=Bt(l,o,o[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&Ut(t,l,n,n[24],e?Wt(l,n[24],r,null):Et(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Yo(o){let e,l,t;function n(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[Wo]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new go({props:r}),z.push(()=>B(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!l&&f&1&&(l=!0,i.hovered=s[0],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Jo(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=zr("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:h=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:I=!1}=e,{hovered:O=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:R=!0}=e;function j(D){O=D,l(0,O)}function M(D){Jt.call(this,o,D)}function H(D){Jt.call(this,o,D)}function P(D){Jt.call(this,o,D)}function F(D){Jt.call(this,o,D)}function W(D){Jt.call(this,o,D)}function ue(D){Jt.call(this,o,D)}return o.$$set=D=>{"id"in D&&l(1,r=D.id),"source"in D&&l(2,s=D.source),"sourceLayer"in D&&l(3,f=D.sourceLayer),"beforeId"in D&&l(4,i=D.beforeId),"beforeLayerType"in D&&l(5,a=D.beforeLayerType),"paint"in D&&l(6,u=D.paint),"layout"in D&&l(7,c=D.layout),"filter"in D&&l(8,p=D.filter),"applyToClusters"in D&&l(9,h=D.applyToClusters),"minzoom"in D&&l(10,k=D.minzoom),"maxzoom"in D&&l(11,C=D.maxzoom),"hoverCursor"in D&&l(12,T=D.hoverCursor),"manageHoverState"in D&&l(13,I=D.manageHoverState),"hovered"in D&&l(0,O=D.hovered),"eventsIfTopMost"in D&&l(14,N=D.eventsIfTopMost),"interactive"in D&&l(15,R=D.interactive),"$$scope"in D&&l(24,n=D.$$scope)},[O,r,s,f,i,a,u,c,p,h,k,C,T,I,N,R,t,j,M,H,P,F,W,ue,n]}class Mn extends V{constructor(e){super(),K(this,e,Jo,Yo,Q,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function nl(o){let e=o[0],l,t,n=ll(o);return{c(){n.c(),l=he()},m(r,s){n.m(r,s),g(r,l,s),t=!0},p(r,s){s&1&&Q(e,e=r[0])?(ve(),_(n,1,1,J),ke(),n=ll(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n.d(r)}}}function ll(o){let e;const l=o[15].default,t=Bt(l,o,o[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&Ut(t,l,n,n[14],e?Wt(l,n[14],r,null):Et(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Qo(o){let e,l,t=o[0]&&nl(o);return{c(){t&&t.c(),e=he()},m(n,r){t&&t.m(n,r),g(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=nl(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ve(),_(t,1,1,()=>{t=null}),ke())},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&d(e),t&&t.d(n)}}}function Vo(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=zr("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:p=null}=e,{attribution:h=null}=e,{minzoom:k=null}=e,{maxzoom:C=null}=e,{volatile:T=null}=e;if(i&&i.includes("pmtiles://")&&!Yn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let R=new eo;Yn.addProtocol("pmtiles",R.tile)}const{map:I,self:O}=ho();Y(o,I,R=>l(13,n=R)),Y(o,O,R=>l(0,t=R));let N;return Ar(()=>{t&&n&&(wo(I,t,N),Qt(O,t=null,t),N=void 0)}),o.$$set=R=>{"id"in R&&l(3,f=R.id),"url"in R&&l(4,i=R.url),"tiles"in R&&l(5,a=R.tiles),"promoteId"in R&&l(6,u=R.promoteId),"bounds"in R&&l(7,c=R.bounds),"scheme"in R&&l(8,p=R.scheme),"attribution"in R&&l(9,h=R.attribution),"minzoom"in R&&l(10,k=R.minzoom),"maxzoom"in R&&l(11,C=R.maxzoom),"volatile"in R&&l(12,T=R.volatile),"$$scope"in R&&l(14,s=R.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==f&&(Qt(O,t=f,t),bo(n,t,vo({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:p,attribution:h,minzoom:k,maxzoom:C,volatile:T}),R=>n&&R===t,()=>{t&&(N=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{N=n==null?void 0:n.getSource(f)}))},[t,I,O,f,i,a,u,c,p,h,k,C,T,n,s,r]}class pe extends V{constructor(e){super(),K(this,e,Vo,Qo,Q,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function rl(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Ko(o){let e,l,t;return l=new We({props:{$$slots:{default:[Xo]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=S("div"),w(l.$$.fragment)},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Zo(o){let e,l,t,n,r,s,f,i,a,u;l=new We({props:{$$slots:{default:[xo]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&ol(o);r=new lt({props:{label:"Help",$$slots:{default:[es]},$$scope:{ctx:o}}}),f=new ko({}),f.$on("click",o[3]);let p=_e(o[0]),h=[];for(let C=0;C<p.length;C+=1)h[C]=sl(rl(o,p,C));const k=C=>_(h[C],1,1,()=>{h[C]=null});return{c(){e=S("div"),w(l.$$.fragment),t=L(),c&&c.c(),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L();for(let C=0;C<h.length;C+=1)h[C].c();a=he()},m(C,T){g(C,e,T),b(l,e,null),g(C,t,T),c&&c.m(C,T),g(C,n,T),b(r,C,T),g(C,s,T),b(f,C,T),g(C,i,T);for(let I=0;I<h.length;I+=1)h[I]&&h[I].m(C,T);g(C,a,T),u=!0},p(C,T){const I={};T&16384&&(I.$$scope={dirty:T,ctx:C}),l.$set(I),C[2]?c?c.p(C,T):(c=ol(C),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const O={};if(T&16384&&(O.$$scope={dirty:T,ctx:C}),r.$set(O),T&65){p=_e(C[0]);let N;for(N=0;N<p.length;N+=1){const R=rl(C,p,N);h[N]?(h[N].p(R,T),m(h[N],1)):(h[N]=sl(R),h[N].c(),m(h[N],1),h[N].m(a.parentNode,a))}for(ve(),N=p.length;N<h.length;N+=1)k(N);ke()}},i(C){if(!u){m(l.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C);for(let T=0;T<p.length;T+=1)m(h[T]);u=!0}},o(C){_(l.$$.fragment,C),_(r.$$.fragment,C),_(f.$$.fragment,C),h=h.filter(Boolean);for(let T=0;T<h.length;T+=1)_(h[T]);u=!1},d(C){C&&(d(e),d(t),d(n),d(s),d(i),d(a)),v(l),c&&c.d(C),v(r,C),v(f,C),He(h,C)}}}function Xo(o){let e;return{c(){e=y("Measure lines")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function xo(o){let e;return{c(){e=y("Stop measuring")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ol(o){let e,l,t=o[2].toFixed(2)+"",n,r;return{c(){e=S("p"),l=y("Length: "),n=y(t),r=y(" meters")},m(s,f){g(s,e,f),$(e,l),$(e,n),$(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&G(n,t)},d(s){s&&d(e)}}}function es(o){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){g(l,e,t)},p:J,d(l){l&&d(e)}}}function ts(o){let e,l;return{c(){e=S("span"),l=L(),A(e,"class","dot svelte-1tzt432")},m(t,n){g(t,e,n),g(t,l,n)},p:J,d(t){t&&(d(e),d(l))}}}function sl(o){let e,l,t;function n(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[ts]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new uo({props:s}),z.push(()=>B(e,"lngLat",n)),e.$on("click",r),{c(){w(e.$$.fragment)},m(f,i){b(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!l&&i&1&&(l=!0,a.lngLat=o[11],U(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){_(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function ns(o){let e,l;const t=[q("measurement-line"),{paint:{"line-color":nt.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ls(o){let e,l,t,n,r,s,f;const i=[Zo,Ko],a=[];function u(c,p){return c[1]?0:1}return e=u(o),l=a[e]=i[e](o),n=new ct({props:{data:o[0].length<2?Kn():bn(o[0]),$$slots:{default:[ns]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),w(n.$$.fragment)},m(c,p){a[e].m(c,p),g(c,t,p),b(n,c,p),r=!0,s||(f=Kt(window,"keydown",o[5]),s=!0)},p(c,[p]){let h=e;e=u(c),e===h?a[e].p(c,p):(ve(),_(a[h],1,1,()=>{a[h]=null}),ke(),l=a[e],l?l.p(c,p):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const k={};p&1&&(k.data=c[0].length<2?Kn():bn(c[0])),p&16384&&(k.$$scope={dirty:p,ctx:c}),n.$set(k)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){_(l),_(n.$$.fragment,c),r=!1},d(c){c&&d(t),a[e].d(c),v(n,c),s=!1,f()}}}function rs(o,e,l){let t,n=!1,r=[];function s(k){return k.length<2?null:1e3*io(bn(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),l(0,r)}function c(k,C,T,I){T[I]=k,l(0,r)}const p=k=>u(k),h=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=s(r))},[r,n,t,f,i,a,u,c,p,h]}class os extends V{constructor(e){super(),K(this,e,rs,ls,Q,{})}}const ss="/atip/handle-atf5/assets/zoom_out_map-b2e1091a.svg";function is(o){let e,l;return{c(){e=S("img"),Ln(e.src,l=ss)||A(e,"src",l),A(e,"alt","Zoom to show entire boundary")},m(t,n){g(t,e,n)},p:J,d(t){t&&d(e)}}}function as(o){let e,l;return e=new We({props:{title:"Zoom to show entire boundary",$$slots:{default:[is]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function fs(o,e,l){let t;Y(o,pn,s=>l(2,t=s));let{boundaryGeojson:n}=e;function r(){let s=Hr(n);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&l(1,n=s.boundaryGeojson)},[r,n]}class us extends V{constructor(e){super(),K(this,e,fs,as,Q,{boundaryGeojson:1})}}const ne={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",cycle_route:"green",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},rights_of_way:{footpath:"red",bridleway:"green",restricted_byway:"blue",boat:"orange"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},ze=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];let Sn=Re(new Map),tn=Re(new Set);const cs=o=>({}),il=o=>({}),$s=o=>({}),al=o=>({}),ps=o=>({}),fl=o=>({});function ms(o){let e;return{c(){e=y(o[2])},m(l,t){g(l,e,t)},p(l,t){t&4&&G(e,l[2])},d(l){l&&d(e)}}}function _s(o){let e,l,t;const n=o[7].icon,r=Bt(n,o,o[10],fl);return{c(){r&&r.c(),e=L(),l=y(o[2])},m(s,f){r&&r.m(s,f),g(s,e,f),g(s,l,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&Ut(r,n,s,s[10],t?Wt(n,s[10],f,ps):Et(s[10]),fl),(!t||f&4)&&G(l,s[2])},i(s){t||(m(r,s),t=!0)},o(s){_(r,s),t=!1},d(s){s&&(d(e),d(l)),r&&r.d(s)}}}function gs(o){let e;const l=o[7].help,t=Bt(l,o,o[10],al);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&Ut(t,l,n,n[10],e?Wt(l,n[10],r,$s):Et(n[10]),al)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function ds(o){let e;return{c(){e=y("X")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function hs(o){let e,l,t,n,r,s,f,i,a;function u(p){o[8](p)}let c={$$slots:{default:[_s]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),l=new Ee({props:c}),z.push(()=>B(l,"checked",u)),s=new co({props:{$$slots:{default:[gs]},$$scope:{ctx:o}}}),i=new We({props:{$$slots:{default:[ds]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=S("div"),w(l.$$.fragment),n=L(),r=S("span"),w(s.$$.fragment),f=L(),w(i.$$.fragment),se(e,"display","flex"),se(e,"justify-content","space-between")},m(p,h){g(p,e,h),b(l,e,null),$(e,n),$(e,r),b(s,r,null),$(r,f),b(i,r,null),a=!0},p(p,h){const k={};h&1028&&(k.$$scope={dirty:h,ctx:p}),!t&&h&1&&(t=!0,k.checked=p[0],U(()=>t=!1)),l.$set(k);const C={};h&1024&&(C.$$scope={dirty:h,ctx:p}),s.$set(C);const T={};h&1024&&(T.$$scope={dirty:h,ctx:p}),i.$set(T)},i(p){a||(m(l.$$.fragment,p),m(s.$$.fragment,p),m(i.$$.fragment,p),a=!0)},o(p){_(l.$$.fragment,p),_(s.$$.fragment,p),_(i.$$.fragment,p),a=!1},d(p){p&&d(e),v(l),v(s),v(i)}}}function ul(o){let e;const l=o[7].controls,t=Bt(l,o,o[10],il);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&Ut(t,l,n,n[10],e?Wt(l,n[10],r,cs):Et(n[10]),il)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function ws(o){let e,l,t,n,r,s;e=new Ee({props:{checked:o[4].has(o[1]),$$slots:{default:[ms]},$$scope:{ctx:o}}}),e.$on("change",o[5]),n=new Ne({props:{small:!0,$$slots:{default:[hs]},$$scope:{ctx:o}}});let f=o[0]&&ul(o);return{c(){w(e.$$.fragment),l=L(),t=S("div"),w(n.$$.fragment),r=L(),f&&f.c()},m(i,a){b(e,i,a),g(i,l,a),g(i,t,a),b(n,t,null),$(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=ul(i),f.c(),m(f,1),f.m(t,null)):f&&(ve(),_(f,1,1,()=>{f=null}),ke())},i(i){s||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),s=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),_(f),s=!1},d(i){i&&(d(l),d(t)),v(e,i),v(n),f&&f.d(),o[9](null)}}}function bs(o,e,l){let t;Y(o,tn,k=>l(4,t=k));let{$$slots:n={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),tn.set(t));let a=null;Ar(()=>{Sn.update(k=>(k.delete(s),k))});function u(){tn.update(k=>(k.has(s)?(k.delete(s),l(0,i=!1)):(k.add(s),l(0,i=!0)),k))}function c(){t.delete(s),tn.set(t),l(0,i=!1)}function p(k){i=k,l(0,i)}function h(k){z[k?"unshift":"push"](()=>{a=k,l(3,a),l(1,s)})}return o.$$set=k=>{"name"in k&&l(1,s=k.name),"title"in k&&l(2,f=k.title),"show"in k&&l(0,i=k.show),"$$scope"in k&&l(10,r=k.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&Sn.update(k=>(l(3,a.style.display="none",a),k.set(s,a),k))},[i,s,f,a,t,u,c,n,p,h,r]}class fe extends V{constructor(e){super(),K(this,e,bs,ws,Q,{name:1,title:2,show:0})}}function vs(o){let e;return{c(){e=y(`Open Government License
  `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ks(o){let e,l,t,n,r;return t=new re({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[vs]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("License: "),w(t.$$.fragment),n=y(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,f){g(s,e,f),$(e,l),b(t,e,null),$(e,n),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){_(t.$$.fragment,s),r=!1},d(s){s&&d(e),v(t)}}}class Ce extends V{constructor(e){super(),K(this,e,null,ks,Q,{})}}function cl(o,e,l){const t=o.slice();return t[2]=e[l],t}function $l(o,e,l){const t=o.slice();return t[5]=e[l],t}function pl(o){let e,l;return{c(){e=S("span"),l=y(` 
    `),se(e,"background",o[5]),se(e,"width","100%"),se(e,"border","1px solid black")},m(t,n){g(t,e,n),$(e,l)},p(t,n){n&1&&se(e,"background",t[5])},d(t){t&&d(e)}}}function ml(o){let e,l=o[2]+"",t;return{c(){e=S("span"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&G(t,l)},d(n){n&&d(e)}}}function ys(o){let e,l,t,n=_e(o[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=pl($l(o,n,i));let s=_e(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=ml(cl(o,s,i));return{c(){e=S("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=S("div");for(let i=0;i<f.length;i+=1)f[i].c();se(e,"display","flex"),se(t,"display","flex"),se(t,"justify-content","space-between")},m(i,a){g(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);g(i,l,a),g(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=_e(i[0]);let u;for(u=0;u<n.length;u+=1){const c=$l(i,n,u);r[u]?r[u].p(c,a):(r[u]=pl(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){s=_e(i[1]);let u;for(u=0;u<s.length;u+=1){const c=cl(i,s,u);f[u]?f[u].p(c,a):(f[u]=ml(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:J,o:J,d(i){i&&(d(e),d(l),d(t)),He(r,i),He(f,i)}}}function Ss(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Je extends V{constructor(e){super(),K(this,e,Ss,ys,Q,{colorScale:0,limits:1})}}const _l=Re(!0);let Tn=Re(null);function jn(o){window.history.replaceState(null,"",o.toString()),window.localStorage.setItem("browsepage-querystring",o.searchParams.toString())}function $e(o){let e=new URLSearchParams(window.location.search).has(o),l=Re(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),jn(n)}),l}function Yt(o,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Re(n);return s.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),jn(i)}),s}function gl(o){const e=o[7].OA21CD;o[8]=e;const l=o[7][o[0].kind];o[9]=l}function Ts(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Is]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Os]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("Population density data is from the 2021 census, via "),w(t.$$.fragment),n=y(". Output area boundaries from "),w(r.$$.fragment),s=y(".")},m(i,a){g(i,e,a),$(e,l),b(t,e,null),$(e,n),b(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&d(e),v(t),v(r)}}}function Cs(o){let e,l,t,n,r,s,f,i,a;return r=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ms]},$$scope:{ctx:o}}}),f=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[js]},$$scope:{ctx:o}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=S("p"),n=y("Car/van availability data is from the 2021 census, via "),w(r.$$.fragment),s=y(". Output area boundaries from "),w(f.$$.fragment),i=y(".")},m(u,c){g(u,e,c),g(u,l,c),g(u,t,c),$(t,n),b(r,t,null),$(t,s),b(f,t,null),$(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){_(r.$$.fragment,u),_(f.$$.fragment,u),a=!1},d(u){u&&(d(e),d(l),d(t)),v(r),v(f)}}}function Ls(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ns]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Rs]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("Car/van availability data is from the 2021 census, via "),w(t.$$.fragment),n=y(". Output area boundaries from "),w(r.$$.fragment),s=y(".")},m(i,a){g(i,e,a),$(e,l),b(t,e,null),$(e,n),b(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&d(e),v(t),v(r)}}}function Is(o){let e;return{c(){e=y(`NOMIS TS006
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Os(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ms(o){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function js(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ns(o){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Rs(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Fs(o){let e,l,t,n,r,s;const f=[Ls,Cs,Ts],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(o),t=i[l]=f[l](o),r=new Ce({}),{c(){e=S("span"),t.c(),n=L(),w(r.$$.fragment),A(e,"slot","help")},m(u,c){g(u,e,c),i[l].m(e,null),$(e,n),b(r,e,null),s=!0},p(u,c){let p=l;l=a(u),l!==p&&(ve(),_(i[p],1,1,()=>{i[p]=null}),ke(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){_(t),_(r.$$.fragment,u),s=!1},d(u){u&&d(e),i[l].d(),v(r)}}}function Ps(o){let e,l,t,n;return t=new Je({props:{colorScale:o[1],limits:ut(o[0].kind).map(dl)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",l=L(),w(t.$$.fragment)},m(r,s){g(r,e,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&1&&(f.limits=ut(r[0].kind).map(dl)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&(d(e),d(l)),v(t,r)}}}function Ds(o){let e,l;return e=new Je({props:{colorScale:o[1],limits:ut(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=ut(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function As(o){let e,l;return e=new Je({props:{colorScale:o[1],limits:ut(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=ut(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Gs(o){let e,l,t,n,r,s,f;function i(h){o[4](h)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),l=new On({props:a}),z.push(()=>B(l,"value",i));const u=[As,Ds,Ps],c=[];function p(h,k){return h[0].kind=="percent_households_with_car"?0:h[0].kind=="average_cars_per_household"?1:h[0].kind=="population_density"?2:-1}return~(r=p(o))&&(s=c[r]=u[r](o)),{c(){e=S("div"),w(l.$$.fragment),n=L(),s&&s.c(),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(h,k){g(h,e,k),b(l,e,null),$(e,n),~r&&c[r].m(e,null),f=!0},p(h,k){const C={};!t&&k&1&&(t=!0,C.value=h[0].kind,U(()=>t=!1)),l.$set(C);let T=r;r=p(h),r===T?~r&&c[r].p(h,k):(s&&(ve(),_(c[T],1,1,()=>{c[T]=null}),ke()),~r?(s=c[r],s?s.p(h,k):(s=c[r]=u[r](h),s.c()),m(s,1),s.m(e,null)):s=null)},i(h){f||(m(l.$$.fragment,h),m(s),f=!0)},o(h){_(l.$$.fragment,h),_(s),f=!1},d(h){h&&d(e),v(l),~r&&c[r].d()}}}function qs(o){let e,l,t,n=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=S("p"),l=y("There are "),t=S("b"),r=y(n),s=y(`
          people per square kilometre in `),i=y(f)},m(a,u){g(a,e,u),$(e,l),$(e,t),$(t,r),$(e,s),$(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&G(r,n),u&128&&f!==(f=a[8]+"")&&G(i,f)},d(a){a&&d(e)}}}function Hs(o){let e,l,t=o[8]+"",n,r,s,f=o[9]+"",i,a;return{c(){e=S("p"),l=y("Households in "),n=y(t),r=y(` have an average of
          `),s=S("b"),i=y(f),a=y(`
          cars`)},m(u,c){g(u,e,c),$(e,l),$(e,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&G(n,t),c&129&&f!==(f=u[9]+"")&&G(i,f)},d(u){u&&d(e)}}}function zs(o){let e,l,t=o[9]+"",n,r,s,f=o[8]+"",i,a;return{c(){e=S("p"),l=S("b"),n=y(t),r=y("%"),s=y(`
          of households in `),i=y(f),a=y(" have 1 or more cars")},m(u,c){g(u,e,c),$(e,l),$(l,n),$(l,r),$(e,s),$(e,i),$(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&G(n,t),c&128&&f!==(f=u[8]+"")&&G(i,f)},d(u){u&&d(e)}}}function Bs(o){gl(o);let e;function l(r,s){return r[0].kind=="percent_households_with_car"?zs:r[0].kind=="average_cars_per_household"?Hs:qs}let t=l(o),n=t(o);return{c(){n.c(),e=he()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){gl(r),t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function Us(o){let e,l;return e=new ae({props:{$$slots:{default:[Bs,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Es(o){let e,l,t,n;const r=[q(Qe),{sourceLayer:Qe},{paint:{"fill-color":be(["get",o[0].kind],ut(o[0].kind),o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Us]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Me({props:s}),e.$on("click",o[3]);const f=[q(`${Qe}-outline`),{sourceLayer:Qe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&oe(q(Qe)),u&0&&{sourceLayer:Qe},u&3&&{paint:{"fill-color":be(["get",a[0].kind],ut(a[0].kind),a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?te(f,[u&0&&oe(q(`${Qe}-outline`)),u&0&&{sourceLayer:Qe},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ws(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Qe,title:"2021 census",$$slots:{controls:[Gs],help:[Fs]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Qe}.pmtiles`,$$slots:{default:[Es]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Qe="census_output_areas";function Ys(o){return o.show?o.kind:null}function Js(o){return{show:!0,kind:o}}function ut(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const dl=o=>o.toLocaleString();function Qs(o,e,l){let t,n=ne.sequential_low_to_high,s=Yt(Qe,{show:!1,kind:"percent_households_with_car"},Ys,Js);Y(o,s,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,n,s,f,i,a]}class Vs extends V{constructor(e){super(),K(this,e,Qs,Ws,Q,{})}}function Ks(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Zs(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Xs(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[Zs]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(", as of May 2024."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function xs(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&d(e)}}}function ei(o){let e,l;return e=new ae({props:{$$slots:{default:[xs,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ti(o){let e,l,t,n;const r=[q(wt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ei]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Me({props:s}),e.$on("click",ri);const f=[q(`${wt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&oe(q(wt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?te(f,[u&0&&oe(q(`${wt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function ni(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:wt,title:li,$$slots:{help:[Xs],icon:[Ks]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new ct({props:{data:`${me()}/v1/${wt}.geojson`,$$slots:{default:[ti]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let wt="combined_authorities",li="Combined authorities";function ri(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function oi(o,e,l){let t,n=ne.combined_authorities,r=$e(wt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class si extends V{constructor(e){super(),K(this,e,oi,ni,Q,{})}}function ii(o){let e;return{c(){e=y(`DLUCH GIS
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ai(o){let e;return{c(){e=y(`here
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function fi(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[ii]},$$scope:{ctx:o}}}),s=new re({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ai]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("The 2019 English IMD scores come from "),w(n.$$.fragment),r=y(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),w(s.$$.fragment),f=y("."),i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),b(n,l,null),$(l,r),b(s,l,null),$(l,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&64&&(h.$$scope={dirty:p,ctx:c}),n.$set(h);const k={};p&64&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(s),v(a)}}}function ui(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ci(o){let e,l=o[5].LSOA11CD+"",t,n,r,s=o[5].score+"",f,i,a,u,c,p=o[5].rank.toLocaleString()+"",h,k;return{c(){e=S("p"),t=y(l),n=y(` has an IMD score of
        `),r=S("b"),f=y(s),i=L(),a=S("p"),u=y("Rank: "),c=S("b"),h=y(p),k=y(`
        / 32,844 LSOAs`)},m(C,T){g(C,e,T),$(e,t),$(e,n),$(e,r),$(r,f),g(C,i,T),g(C,a,T),$(a,u),$(a,c),$(c,h),$(a,k)},p(C,T){T&32&&l!==(l=C[5].LSOA11CD+"")&&G(t,l),T&32&&s!==(s=C[5].score+"")&&G(f,s),T&32&&p!==(p=C[5].rank.toLocaleString()+"")&&G(h,p)},d(C){C&&(d(e),d(i),d(a))}}}function $i(o){let e,l;return e=new ae({props:{$$slots:{default:[ci,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function pi(o){let e,l,t,n;const r=[q(Ve),{sourceLayer:Ve},{paint:{"fill-color":be(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[$i]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Me({props:s});const f=[q(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&7?te(r,[u&0&&oe(q(Ve)),u&0&&{sourceLayer:Ve},u&6&&{paint:{"fill-color":be(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?te(f,[u&0&&oe(q(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function mi(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ve,title:_i,$$slots:{controls:[ui],help:[fi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ve}.pmtiles`,$$slots:{default:[pi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ve="imd",_i="Indices of Multiple Deprivation";function gi(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,2,4,6,8,10],s=$e(Ve);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class di extends V{constructor(e){super(),K(this,e,gi,mi,Q,{})}}function hi(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function wi(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function bi(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[wi]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(", as of May 2024."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function vi(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&d(e)}}}function ki(o){let e,l;return e=new ae({props:{$$slots:{default:[vi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function yi(o){let e,l,t,n;const r=[q(bt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ki]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Me({props:s}),e.$on("click",Ci);const f=[q(`${bt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&oe(q(bt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?te(f,[u&0&&oe(q(`${bt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Si(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:bt,title:Ti,$$slots:{help:[bi],icon:[hi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new ct({props:{data:`${me()}/v1/${bt}.geojson`,$$slots:{default:[yi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let bt="local_authority_districts",Ti="Local Authority Districts";function Ci(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function Li(o,e,l){let t,n=ne.local_authority_districts,r=$e(bt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ii extends V{constructor(e){super(),K(this,e,Li,Si,Q,{})}}function Oi(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Mi(o){let e;return{c(){e=y(`local authority
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ji(o){let e;return{c(){e=y(`national park authorit
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ni(o){let e;return{c(){e=y(`development corporation
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ri(o){let e;return{c(){e=y("this map")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Fi(o){let e;return{c(){e=y(`planning.data.gov.uk
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Pi(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,O,N,R,j,M,H;return n=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Mi]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ji]},$$scope:{ctx:o}}}),i=new re({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ni]},$$scope:{ctx:o}}}),k=new re({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Ri]},$$scope:{ctx:o}}}),N=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Fi]},$$scope:{ctx:o}}}),M=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("LPAs may be a "),w(n.$$.fragment),r=y(", "),w(s.$$.fragment),f=y("y, or "),w(i.$$.fragment),a=y("."),u=L(),c=S("p"),p=S("strong"),h=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),w(k.$$.fragment),C=y(" to get more details."),T=L(),I=S("p"),O=y("Data from ONS Geography via "),w(N.$$.fragment),R=y(", as of November 2022."),j=L(),w(M.$$.fragment),A(e,"slot","help")},m(P,F){g(P,e,F),$(e,l),$(l,t),b(n,l,null),$(l,r),b(s,l,null),$(l,f),b(i,l,null),$(l,a),$(e,u),$(e,c),$(c,p),$(p,h),b(k,p,null),$(p,C),$(e,T),$(e,I),$(I,O),b(N,I,null),$(I,R),$(e,j),b(M,e,null),H=!0},p(P,F){const W={};F&32&&(W.$$scope={dirty:F,ctx:P}),n.$set(W);const ue={};F&32&&(ue.$$scope={dirty:F,ctx:P}),s.$set(ue);const D={};F&32&&(D.$$scope={dirty:F,ctx:P}),i.$set(D);const x={};F&32&&(x.$$scope={dirty:F,ctx:P}),k.$set(x);const Z={};F&32&&(Z.$$scope={dirty:F,ctx:P}),N.$set(Z)},i(P){H||(m(n.$$.fragment,P),m(s.$$.fragment,P),m(i.$$.fragment,P),m(k.$$.fragment,P),m(N.$$.fragment,P),m(M.$$.fragment,P),H=!0)},o(P){_(n.$$.fragment,P),_(s.$$.fragment,P),_(i.$$.fragment,P),_(k.$$.fragment,P),_(N.$$.fragment,P),_(M.$$.fragment,P),H=!1},d(P){P&&d(e),v(n),v(s),v(i),v(k),v(N),v(M)}}}function Di(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&d(e)}}}function Ai(o){let e,l;return e=new ae({props:{$$slots:{default:[Di,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Gi(o){let e,l,t,n;const r=[q(Ke),{sourceLayer:Ke},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ai]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Me({props:s});const f=[q(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&oe(q(Ke)),u&0&&{sourceLayer:Ke},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?te(f,[u&0&&oe(q(`${Ke}-outline`)),u&0&&{sourceLayer:Ke},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function qi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ke,title:Hi,$$slots:{help:[Pi],icon:[Oi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ke}.pmtiles`,$$slots:{default:[Gi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ke="local_planning_authorities",Hi="Local Planning Authorities";function zi(o,e,l){let t,n=ne.local_planning_authorities,r=$e(Ke);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Bi extends V{constructor(e){super(),K(this,e,zi,qi,Q,{})}}function Ui(o){let e;return{c(){e=y("Ordnance Survey MasterMap Topography layer")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ei(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-mastermap-topography-layer",$$slots:{default:[Ui]},$$scope:{ctx:o}}}),c=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("This shows all polygons from the "),w(n.$$.fragment),r=y(` related to roads. This is useful in conjunction with the OS
      road and pavement width layers, to see specifically where width varies.`),s=L(),f=S("p"),f.textContent="Data is from February 2025.",i=L(),a=S("p"),a.textContent=`The layer is only visible when you zoom in close to the map. Note there
      may be missing polygons near bridges.`,u=L(),w(c.$$.fragment),A(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),$(e,a),$(e,u),b(c,e,null),p=!0},p(h,k){const C={};k&16&&(C.$$scope={dirty:k,ctx:h}),n.$set(C)},i(h){p||(m(n.$$.fragment,h),m(c.$$.fragment,h),p=!0)},o(h){_(n.$$.fragment,h),_(c.$$.fragment,h),p=!1},d(h){h&&d(e),v(n),v(c)}}}function Wi(o){let e,l,t;return l=new $t({props:{rows:o[2]}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Yi(o){let e,l;const t=[q(ln),{sourceLayer:"topographic_area"},{paint:{"fill-color":Ie(["get","style_description"],{"Road Or Track Fill":"black","Traffic Calming Fill":"#3b3b3b","Roadside Manmade Fill":"grey","Roadside Natural Fill":"green","Path Fill":"brown","Track Fill":"brown"},"red"),"fill-opacity":ee(.8,.3)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0}];let n={};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Me({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(ln)),t[1],t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ji(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:ln,title:"OS MasterMap",$$slots:{controls:[Wi],help:[Ei]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${xt()}/v1/${ln}.pmtiles`,minzoom:16,maxzoom:16,promoteId:"toid",$$slots:{default:[Yi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let ln="osmm";function Qi(o,e,l){let t,n=$e(ln);Y(o,n,f=>l(0,t=f));let r=[["roads","black"],["traffic calming","#3b3b3b"],["pavement","grey"],["roadside natural","green"],["paths and tracks","brown"]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class Vi extends V{constructor(e){super(),K(this,e,Qi,Ji,Q,{})}}function Ki(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Zi(o){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Xi(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Zi]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(", as of October 2024."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function xi(o){let e,l=o[4].Name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&G(t,l)},d(n){n&&d(e)}}}function ea(o){let e,l;return e=new ae({props:{$$slots:{default:[xi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ta(o){let e,l,t,n;const r=[q(Ze),{sourceLayer:Ze},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ea]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Me({props:s}),e.$on("click",ra);const f=[q(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&oe(q(Ze)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?te(f,[u&0&&oe(q(`${Ze}-outline`)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function na(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ze,title:la,$$slots:{help:[Xi],icon:[Ki]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ze}.pmtiles`,$$slots:{default:[ta]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ze="parliamentary_constituencies",la="Parliamentary constituencies";function ra(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function oa(o,e,l){let t,n=ne.parliamentary_constituencies,r=$e(Ze);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class sa extends V{constructor(e){super(),K(this,e,oa,na,Q,{})}}function ia(o){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function aa(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[ia]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=S("span"),l=S("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=S("p"),r=y("Data from June 2019, produced by "),w(s.$$.fragment),f=y(". See there for methodology details"),i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),b(s,n,null),$(n,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&32&&(h.$$scope={dirty:p,ctx:c}),s.$set(h)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(s),v(a)}}}function fa(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ua(o){let e,l=o[4].noiseclass+"",t,n,r=hl(o[4].noiseclass)+"",s,f;return{c(){e=S("p"),t=y(l),n=y(" dB ("),s=y(r),f=y(")")},m(i,a){g(i,e,a),$(e,t),$(e,n),$(e,s),$(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&G(t,l),a&16&&r!==(r=hl(i[4].noiseclass)+"")&&G(s,r)},d(i){i&&d(e)}}}function ca(o){let e,l;return e=new ae({props:{$$slots:{default:[ua,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function $a(o){let e,l;const t=[q(vt),{sourceLayer:vt},{paint:{"fill-color":Ie(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":ee(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ca]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Me({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&oe(q(vt)),s&0&&{sourceLayer:vt},s&2&&{paint:{"fill-color":Ie(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":ee(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function pa(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:vt,title:ma,$$slots:{controls:[fa],help:[aa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${vt}.pmtiles`,$$slots:{default:[$a]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let vt="road_noise",ma="Road noise";function hl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function _a(o,e,l){let t,n=[ne.sequential_low_to_high[0],ne.sequential_low_to_high[2],ne.sequential_low_to_high[4]],r=$e(vt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ga extends V{constructor(e){super(),K(this,e,_a,pa,Q,{})}}function da(o){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ha(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://www.gov.uk/government/collections/rural-urban-classification",$$slots:{default:[da]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y(`The 2011 Rural Urban Classification distinguishes four urban and six rural
      categories. The data comes from `),w(n.$$.fragment),r=y(". Note this is data from 2011."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function wa(o){let e,l,t;return l=new $t({props:{rows:Object.entries(o[2])}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ba(o){let e,l=o[4].OA11CD+"",t,n,r=o[4].RUC11.startsWith("U")?"an":"a",s,f,i,a=o[4].RUC11+"",u;return{c(){e=S("p"),t=y(l),n=y(" is "),s=y(r),f=L(),i=S("b"),u=y(a)},m(c,p){g(c,e,p),$(e,t),$(e,n),$(e,s),$(e,f),$(e,i),$(i,u)},p(c,p){p&16&&l!==(l=c[4].OA11CD+"")&&G(t,l),p&16&&r!==(r=c[4].RUC11.startsWith("U")?"an":"a")&&G(s,r),p&16&&a!==(a=c[4].RUC11+"")&&G(u,a)},d(c){c&&d(e)}}}function va(o){let e,l;return e=new ae({props:{$$slots:{default:[ba,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ka(o){let e,l,t,n;const r=[q(Vt),{sourceLayer:nn},{paint:{"fill-color":Ie(["get","RUC11"],o[2],"cyan"),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[va]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Me({props:s});const f=[q(`${Vt}-outline`),{sourceLayer:nn},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&5?te(r,[u&0&&oe(q(Vt)),u&0&&{sourceLayer:nn},u&4&&{paint:{"fill-color":Ie(["get","RUC11"],a[2],"cyan"),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?te(f,[u&0&&oe(q(`${Vt}-outline`)),u&0&&{sourceLayer:nn},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function ya(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Vt,title:Sa,$$slots:{controls:[wa],help:[ha]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${nn}.pmtiles`,$$slots:{default:[ka]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Vt="ruc",nn="rural_urban_classification",Sa="Rural Urban Classification";function Ta(o,e,l){let t,n=$e(Vt);Y(o,n,f=>l(0,t=f));let r={"Urban major conurbation":"#fe2200","Urban minor conurbation":"#ff6f00","Urban city and town in a sparse setting":"#ffa602","Urban city and town":"#ffe400","Rural town and fringe in a sparse setting":"#006100","Rural town and fringe":"#4a8a02","Rural village in a sparse setting":"#8cb503","Rural village":"#d6e601","Rural hamlets and isolated dwellings in a sparse setting":"#a1d99b","Rural hamlets and isolated dwellings":"#e5f5e0"};function s(f){t=f,n.set(t)}return[t,n,r,s]}class Ca extends V{constructor(e){super(),K(this,e,Ta,ya,Q,{})}}function La(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ia(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Oa(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ia]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(", as of May 2023."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Ma(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&d(e)}}}function ja(o){let e,l;return e=new ae({props:{$$slots:{default:[Ma,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Na(o){let e,l,t,n;const r=[q(Xe),{sourceLayer:Xe},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ja]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Me({props:s}),e.$on("click",Pa);const f=[q(`${Xe}-outline`),{sourceLayer:Xe},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&oe(q(Xe)),u&0&&{sourceLayer:Xe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?te(f,[u&0&&oe(q(`${Xe}-outline`)),u&0&&{sourceLayer:Xe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ra(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Xe,title:Fa,$$slots:{help:[Oa],icon:[La]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Xe}.pmtiles`,$$slots:{default:[Na]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Xe="wards",Fa="Wards";function Pa(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Da(o,e,l){let t,n=ne.wards,r=$e(Xe);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Aa extends V{constructor(e){super(),K(this,e,Da,Ra,Q,{})}}function Ga(o){let e;return{c(){e=y("Open Data Commons Open Database License")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function qa(o){let e,l,t,n;return t=new re({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ga]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("License: "),w(t.$$.fragment)},m(r,s){g(r,e,s),$(e,l),b(t,e,null),n=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&d(e),v(t)}}}class et extends V{constructor(e){super(),K(this,e,null,qa,Q,{})}}function Ha(o){let e,l,t;return l=new ye({props:{color:ne.bus_route_with_lane}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function za(o){let e;return{c(){e=y(`GTFS
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ba(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://gtfs.org",$$slots:{default:[za]},$$scope:{ctx:o}}}),a=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=S("p"),r=y("Note this data is from OpenStreetMap (as of 20 October 2024), not "),w(s.$$.fragment),f=y(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),b(s,n,null),$(n,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&16&&(h.$$scope={dirty:p,ctx:c}),s.$set(h)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(s),v(a)}}}function Ua(o){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ea(o){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Wa(o){let e;function l(r,s){return r[3].has_bus_lane?Ea:Ua}let t=l(o),n=t(o);return{c(){n.c(),e=he()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function Ya(o){let e,l;return e=new ae({props:{$$slots:{default:[Wa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ja(o){let e,l;const t=[q(kt),{sourceLayer:kt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ne.bus_route_with_lane,ne.bus_route_without_lane],"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ya]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(kt)),s&0&&{sourceLayer:kt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Qa(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:kt,title:Va,$$slots:{help:[Ba],icon:[Ha]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${kt}.pmtiles`,$$slots:{default:[Ja]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let kt="bus_routes",Va="Bus routes";function Ka(o,e,l){let t,n=$e(kt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Za extends V{constructor(e){super(),K(this,e,Ka,Qa,Q,{})}}function wl(o){const e=ff(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function bl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function Xa(o){let e,l,t,n,r,s,f,i,a;return i=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=S("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),s=S("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),w(i.$$.fragment),A(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),b(i,e,null),a=!0},p:J,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){_(i.$$.fragment,u),a=!1},d(u){u&&d(e),v(i)}}}function xa(o){let e,l,t=o[13]+"",n,r,s;return e=new ye({props:{color:o[14]}}),{c(){w(e.$$.fragment),l=L(),n=y(t),r=L()},m(f,i){b(e,f,i),g(f,l,i),g(f,n,i),g(f,r,i),s=!0},p:J,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n),d(r)),v(e,f)}}}function vl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[xa]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Ee({props:r}),z.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function ef(o){let e,l,t=_e(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=vl(bl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=he()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f&5){t=_e(s[2]);let i;for(i=0;i<t.length;i+=1){const a=bl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=vl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(ve(),i=t.length;i<n.length;i+=1)r(i);ke()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),He(n,s)}}}function tf(o){let e,l,t;return l=new Ne({props:{small:!0,$$slots:{default:[ef]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function nf(o){wl(o);let e,l=o[10]+"",t,n,r,s,f,i=o[11]+"",a,u,c,p,h=o[12]+"",k;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),s=y("Direction: "),f=S("b"),a=L(),u=S("p"),c=y("Width: "),p=S("b"),k=y(h)},m(C,T){g(C,e,T),$(e,t),g(C,n,T),g(C,r,T),$(r,s),$(r,f),f.innerHTML=i,g(C,a,T),g(C,u,T),$(u,c),$(u,p),$(p,k)},p(C,T){wl(C),T&512&&l!==(l=C[10]+"")&&G(t,l),T&512&&i!==(i=C[11]+"")&&(f.innerHTML=i),T&512&&h!==(h=C[12]+"")&&G(k,h)},d(C){C&&(d(e),d(n),d(r),d(a),d(u))}}}function lf(o){let e,l;return e=new ae({props:{$$slots:{default:[nf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function rf(o){let e,l;const t=[q(yt),{sourceLayer:yt},{paint:{"line-color":Ie(["get","kind"],{track:ne.cycle_paths.track,lane:ne.cycle_paths.lane,shared_use_segregated:ne.cycle_paths.shared_use_segregated,shared_use_unsegregated:ne.cycle_paths.shared_use_unsegregated},"red"),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[lf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),e.$on("click",uf),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?te(t,[s&0&&oe(q(yt)),s&0&&{sourceLayer:yt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function of(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:yt,title:sf,$$slots:{controls:[tf],help:[Xa]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${yt}.pmtiles`,$$slots:{default:[rf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let yt="cycle_paths",sf="Cycle paths";function af(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function ff(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function uf(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function cf(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(p){return p.show?n.filter(h=>p[h]).join(","):null}let f=Yt(yt,r,s,af);Y(o,f,p=>l(0,t=p));let i=[["track","Separated tracks",ne.cycle_paths.track],["lane","Unprotected lanes",ne.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",ne.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",ne.cycle_paths.shared_use_unsegregated]];function a(p){let h=n.filter(k=>p[k]);return["in",["get","kind"],["literal",h]]}function u(p,h){o.$$.not_equal(t[h],p)&&(t[h]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class $f extends V{constructor(e){super(),K(this,e,cf,of,Q,{})}}function pf(o){let e,l,t;return l=new ye({props:{color:ne.cycle_route}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function mf(o){let e;return{c(){e=y("OpenStreetMap")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function _f(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:route%3Dbicycle",$$slots:{default:[mf]},$$scope:{ctx:o}}}),f=new et({}),{c(){e=S("span"),l=S("p"),t=y("This shows all cycle routes, according to "),w(n.$$.fragment),r=y(` (as of 20 October 2024). The quality of the route or infrastructure
      along it is not shown here. Not all routes are official, named routes -- click
      one to see more information.`),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function gf(o){let e=(o[3].name||"untitled route")+"",l;return{c(){l=y(e)},m(t,n){g(t,l,n)},p(t,n){n&8&&e!==(e=(t[3].name||"untitled route")+"")&&G(l,e)},d(t){t&&d(l)}}}function df(o){let e,l;return e=new ae({props:{$$slots:{default:[gf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function hf(o){let e,l;const t=[q(St),{sourceLayer:St},{paint:{"line-color":ee(ne.cycle_route,"red"),"line-width":8}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[df]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),e.$on("click",vf),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(St)),s&0&&{sourceLayer:St},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function wf(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:St,title:bf,$$slots:{help:[_f],icon:[pf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${St}.pmtiles`,$$slots:{default:[hf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let St="cycle_routes",bf="Cycle routes";function vf(o){window.open(`http://openstreetmap.org/relation/${o.detail.features[0].properties.osm_relation}`,"_blank")}function kf(o,e,l){let t,n=$e(St);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class yf extends V{constructor(e){super(),K(this,e,kf,wf,Q,{})}}function Sf(o){let e;return{c(){e=y("OS Terrain 50")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Tf(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Sf]},$$scope:{ctx:o}}}),c=new Ce({}),h=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=S("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),s=S("p"),f=y("This layer is built from "),w(i.$$.fragment),a=y(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),w(c.$$.fragment),p=L(),w(h.$$.fragment),A(e,"slot","help")},m(C,T){g(C,e,T),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),b(i,s,null),$(s,a),$(e,u),b(c,e,null),$(e,p),b(h,e,null),k=!0},p(C,T){const I={};T&64&&(I.$$scope={dirty:T,ctx:C}),i.$set(I)},i(C){k||(m(i.$$.fragment,C),m(c.$$.fragment,C),m(h.$$.fragment,C),k=!0)},o(C){_(i.$$.fragment,C),_(c.$$.fragment,C),_(h.$$.fragment,C),k=!1},d(C){C&&d(e),v(i),v(c),v(h)}}}function Cf(o){let e,l,t,n,r;return l=new Je({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),w(l.$$.fragment),t=L(),n=S("p"),n.innerHTML=`<img src="${yo}" alt="arrow"/>
      Arrows point uphill`,A(e,"slot","controls")},m(s,f){g(s,e,f),b(l,e,null),$(e,t),$(e,n),r=!0},p:J,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),r=!1},d(s){s&&d(e),v(l)}}}function Lf(o){let e,l,t,n=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=S("p"),l=y("Gradient: "),t=S("b"),r=y(n),s=y(`
        %`)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(t,r),$(e,s)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&G(r,n)},d(f){f&&d(e)}}}function If(o){let e,l;return e=new ae({props:{$$slots:{default:[Lf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Of(o){let e,l,t,n;const r=[q(xe),{sourceLayer:xe},{manageHoverState:!0},{paint:{"line-color":be(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[If]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new ge({props:s});const f=[q(xe+"_arrows"),{sourceLayer:xe},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new Mn({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&7?te(r,[u&0&&oe(q(xe)),u&0&&{sourceLayer:xe},r[2],u&6&&{paint:{"line-color":be(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":ze,"line-opacity":ee(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?te(f,[u&0&&oe(q(xe+"_arrows")),u&0&&{sourceLayer:xe},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Mf(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:xe,title:jf,$$slots:{controls:[Cf],help:[Tf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${xe}.pmtiles`,$$slots:{default:[Of]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let xe="gradient",jf="Gradients";function Nf(o,e,l){let t,n=ne.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=$e(xe);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Rf extends V{constructor(e){super(),K(this,e,Nf,Mf,Q,{})}}function Ff(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Pf(o){let e;return{c(){e=y(`Major Road Network
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Df(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Pf]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),w(n.$$.fragment),r=y(", as of September 2021."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Af(o){let e,l=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&G(t,l)},d(n){n&&d(e)}}}function Gf(o){let e,l;return e=new ae({props:{$$slots:{default:[Af,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function qf(o){let e,l;const t=[q(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Gf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&oe(q(Tt)),s&0&&{sourceLayer:Tt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Hf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Tt,title:zf,$$slots:{help:[Df],icon:[Ff]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Tt}.pmtiles`,$$slots:{default:[qf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Tt="mrn",zf="Major Road Network";function Bf(o,e,l){let t,n=ne.mrn,r=$e(Tt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Uf extends V{constructor(e){super(),K(this,e,Bf,Hf,Q,{})}}function Ef(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Wf(o){let e;return{c(){e=y(`National Cycle Network
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Yf(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Wf]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from Sustrans about the "),w(n.$$.fragment),r=y(", downloaded on 22/01/2024."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function kl(o){let e,l,t,n=o[4].Desc_+"",r;return{c(){e=S("li"),l=y("Description: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Desc_+"")&&G(r,n)},d(s){s&&d(e)}}}function yl(o){let e,l,t,n=o[4].Greenway+"",r;return{c(){e=S("li"),l=y("Is greenway: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Greenway+"")&&G(r,n)},d(s){s&&d(e)}}}function Sl(o){let e,l,t,n=o[4].RouteType+"",r;return{c(){e=S("li"),l=y("Route type: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteType+"")&&G(r,n)},d(s){s&&d(e)}}}function Tl(o){let e,l,t,n=o[4].RouteNo+"",r;return{c(){e=S("li"),l=y("Route number: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteNo+"")&&G(r,n)},d(s){s&&d(e)}}}function Cl(o){let e,l,t,n=o[4].RouteCat+"",r;return{c(){e=S("li"),l=y("Route Category: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteCat+"")&&G(r,n)},d(s){s&&d(e)}}}function Ll(o){let e,l,t,n=o[4].OpenStatus+"",r;return{c(){e=S("li"),l=y("Open Status: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].OpenStatus+"")&&G(r,n)},d(s){s&&d(e)}}}function Il(o){let e,l,t,n=o[4].Surface+"",r;return{c(){e=S("li"),l=y("Surface: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Surface+"")&&G(r,n)},d(s){s&&d(e)}}}function Ol(o){let e,l,t,n=o[4].Quality+"",r;return{c(){e=S("li"),l=y("Quality: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Quality+"")&&G(r,n)},d(s){s&&d(e)}}}function Ml(o){let e,l,t,n=o[4].RoadClass+"",r;return{c(){e=S("li"),l=y("Road Class: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RoadClass+"")&&G(r,n)},d(s){s&&d(e)}}}function Jf(o){let e,l,t,n,r,s,f,i,a,u=o[4].Desc_&&kl(o),c=o[4].Greenway&&yl(o),p=o[4].RouteType&&Sl(o),h=o[4].RouteNo&&Tl(o),k=o[4].RouteCat&&Cl(o),C=o[4].OpenStatus&&Ll(o),T=o[4].Surface&&Il(o),I=o[4].Quality&&Ol(o),O=o[4].RoadClass&&Ml(o);return{c(){e=S("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),p&&p.c(),n=L(),h&&h.c(),r=L(),k&&k.c(),s=L(),C&&C.c(),f=L(),T&&T.c(),i=L(),I&&I.c(),a=L(),O&&O.c()},m(N,R){g(N,e,R),u&&u.m(e,null),$(e,l),c&&c.m(e,null),$(e,t),p&&p.m(e,null),$(e,n),h&&h.m(e,null),$(e,r),k&&k.m(e,null),$(e,s),C&&C.m(e,null),$(e,f),T&&T.m(e,null),$(e,i),I&&I.m(e,null),$(e,a),O&&O.m(e,null)},p(N,R){N[4].Desc_?u?u.p(N,R):(u=kl(N),u.c(),u.m(e,l)):u&&(u.d(1),u=null),N[4].Greenway?c?c.p(N,R):(c=yl(N),c.c(),c.m(e,t)):c&&(c.d(1),c=null),N[4].RouteType?p?p.p(N,R):(p=Sl(N),p.c(),p.m(e,n)):p&&(p.d(1),p=null),N[4].RouteNo?h?h.p(N,R):(h=Tl(N),h.c(),h.m(e,r)):h&&(h.d(1),h=null),N[4].RouteCat?k?k.p(N,R):(k=Cl(N),k.c(),k.m(e,s)):k&&(k.d(1),k=null),N[4].OpenStatus?C?C.p(N,R):(C=Ll(N),C.c(),C.m(e,f)):C&&(C.d(1),C=null),N[4].Surface?T?T.p(N,R):(T=Il(N),T.c(),T.m(e,i)):T&&(T.d(1),T=null),N[4].Quality?I?I.p(N,R):(I=Ol(N),I.c(),I.m(e,a)):I&&(I.d(1),I=null),N[4].RoadClass?O?O.p(N,R):(O=Ml(N),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},d(N){N&&d(e),u&&u.d(),c&&c.d(),p&&p.d(),h&&h.d(),k&&k.d(),C&&C.d(),T&&T.d(),I&&I.d(),O&&O.d()}}}function Qf(o){let e,l;return e=new ae({props:{$$slots:{default:[Jf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Vf(o){let e,l;const t=[q(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Qf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&oe(q(Ct)),s&0&&{sourceLayer:Ct},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Kf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ct,title:Zf,$$slots:{help:[Yf],icon:[Ef]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ct}.pmtiles`,$$slots:{default:[Vf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ct="national_cycle_network",Zf="National Cycle Network";function Xf(o,e,l){let t,n=ne.national_cycle_network,r=$e(Ct);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class xf extends V{constructor(e){super(),K(this,e,Xf,Kf,Q,{})}}function jl(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function eu(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function tu(o){let e,l,t,n,r,s,f,i,a,u,c,p;return u=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[eu]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=S("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),s=S("p"),s.textContent="Data valid as of 1 January, 2024",f=L(),i=S("p"),a=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(u.$$.fragment),c=y("."),A(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),$(e,i),$(i,a),b(u,i,null),$(i,c),p=!0},p(h,k){const C={};k&4096&&(C.$$scope={dirty:k,ctx:h}),u.$set(C)},i(h){p||(m(u.$$.fragment,h),p=!0)},o(h){_(u.$$.fragment,h),p=!1},d(h){h&&d(e),v(u)}}}function nu(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function lu(o){let e,l,t=un(o[6].angle+o[9])+"",n;return{c(){e=S("p"),l=new zt(!1),n=y(` side of the road: no pavement
          `),l.a=n},m(r,s){g(r,e,s),l.m(t,e),$(e,n)},p(r,s){s&64&&t!==(t=un(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&d(e)}}}function ru(o){let e,l,t=un(o[6].angle+o[9])+"",n,r,s=o[7]+"",f,i,a,u=o[8]+"",c,p;return{c(){e=S("p"),l=new zt(!1),n=y(` side of the road:
            `),r=S("b"),f=y(s),i=y(`
            m average,
            `),a=S("b"),c=y(u),p=y(`
            m minimum
          `),l.a=n},m(h,k){g(h,e,k),l.m(t,e),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,c),$(e,p)},p(h,k){k&64&&t!==(t=un(h[6].angle+h[9])+"")&&l.p(t),k&64&&s!==(s=h[7]+"")&&G(f,s),k&64&&u!==(u=h[8]+"")&&G(c,u)},d(h){h&&d(e)}}}function Nl(o){let e;function l(r,s){return r[7]?ru:lu}let t=l(o),n=t(o);return{c(){n.c(),e=he()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function ou(o){let e,l=_e([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Nl(jl(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=he()},m(n,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(n,r);g(n,e,r)},p(n,r){if(r&64){l=_e([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=jl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Nl(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(n){n&&d(e),He(t,n)}}}function su(o){let e,l;return e=new ae({props:{openOn:"hover",$$slots:{default:[ou,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function iu(o){let e,l;const t=[q(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[su]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(Lt)),s&0&&{sourceLayer:Lt},t[2],t[3],s&6&&{paint:{"line-color":be(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":ze,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function au(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Lt,title:fu,$$slots:{controls:[nu],help:[tu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${xt()}/v1/${Lt}.pmtiles`,$$slots:{default:[iu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Lt="pavement_widths",fu="OS Pavement widths";function uu(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function un(o){return`${uu(o)} <span style="display: inline-block; rotate: ${o}deg">⬆</span>`}function cu(o,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=$e(Lt);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class $u extends V{constructor(e){super(),K(this,e,cu,au,Q,{})}}function pu(o){let e;return{c(){e=y("the PCT website")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function mu(o){let e;return{c(){e=y("2017 journal article")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function _u(o){let e,l,t,n,r,s,f,i,a,u,c,p;return i=new re({props:{href:"https://www.pct.bike",$$slots:{default:[pu]},$$scope:{ctx:o}}}),u=new re({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[mu]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=S("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),s=S("p"),f=y("See "),w(i.$$.fragment),a=y(" and "),w(u.$$.fragment),c=y(" for details on methodology and data sources."),A(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),b(i,s,null),$(s,a),b(u,s,null),$(s,c),p=!0},p(h,k){const C={};k&1024&&(C.$$scope={dirty:k,ctx:h}),i.$set(C);const T={};k&1024&&(T.$$scope={dirty:k,ctx:h}),u.$set(T)},i(h){p||(m(i.$$.fragment,h),m(u.$$.fragment,h),p=!0)},o(h){_(i.$$.fragment,h),_(u.$$.fragment,h),p=!1},d(h){h&&d(e),v(i),v(u)}}}function gu(o){let e,l,t,n,r,s,f,i,a;l=new Je({props:{colorScale:o[1],limits:o[2]}});function u(k){o[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),n=new On({props:c}),z.push(()=>B(n,"value",u));function p(k){o[6](k)}let h={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(h.value=o[0].scenario),f=new Zt({props:h}),z.push(()=>B(f,"value",p)),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(k,C){g(k,e,C),b(l,e,null),$(e,t),b(n,e,null),$(e,s),b(f,e,null),a=!0},p(k,C){const T={};!r&&C&1&&(r=!0,T.value=k[0].tripPurpose,U(()=>r=!1)),n.$set(T);const I={};!i&&C&1&&(i=!0,I.value=k[0].scenario,U(()=>i=!1)),f.$set(I)},i(k){a||(m(l.$$.fragment,k),m(n.$$.fragment,k),m(f.$$.fragment,k),a=!0)},o(k){_(l.$$.fragment,k),_(n.$$.fragment,k),_(f.$$.fragment,k),a=!1},d(k){k&&d(e),v(l),v(n),v(f)}}}function du(o){let e,l=o[4](o[9])+"",t;return{c(){e=new zt(!1),t=he(),e.a=t},m(n,r){e.m(l,n,r),g(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(d(t),e.d())}}}function hu(o){let e,l;return e=new ae({props:{$$slots:{default:[du,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function wu(o){let e,l;const t=[q(rt),{sourceLayer:rt},{paint:{"line-color":be(["get",o[0].scenario],o[2],o[1]),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==rt?"visible":"none"}}];let n={$$slots:{default:[hu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(rt)),s&0&&{sourceLayer:rt},s&7&&{paint:{"line-color":be(["get",r[0].scenario],r[2],r[1]),"line-width":ze,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==rt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function bu(o){let e,l=o[4](o[9])+"",t;return{c(){e=new zt(!1),t=he(),e.a=t},m(n,r){e.m(l,n,r),g(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(d(t),e.d())}}}function vu(o){let e,l;return e=new ae({props:{$$slots:{default:[bu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ku(o){let e,l;const t=[q(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get",o[0].scenario],o[2],o[1]),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==ht?"visible":"none"}}];let n={$$slots:{default:[vu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&7&&{paint:{"line-color":be(["get",r[0].scenario],r[2],r[1]),"line-width":ze,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==ht?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function yu(o){let e,l,t,n,r,s,f;function i(u){o[7](u)}let a={name:Er,title:Su,$$slots:{controls:[gu],help:[_u]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new fe({props:a}),z.push(()=>B(e,"show",i)),n=new pe({props:{url:`pmtiles://${me()}/v1/${rt}.pmtiles`,$$slots:{default:[wu]},$$scope:{ctx:o}}}),s=new pe({props:{url:`pmtiles://${me()}/v1/${ht}.pmtiles`,$$slots:{default:[ku]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(u,c){b(e,u,c),g(u,t,c),b(n,u,c),g(u,r,c),b(s,u,c),f=!0},p(u,[c]){const p={};c&1025&&(p.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,p.show=u[0].show,U(()=>l=!1)),e.$set(p);const h={};c&1025&&(h.$$scope={dirty:c,ctx:u}),n.$set(h);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),s.$set(k)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(e.$$.fragment,u),_(n.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(t),d(r)),v(e,u),v(n,u),v(s,u)}}}let Er="pct",rt="pct_commute",ht="pct_school",Su="Propensity to Cycle Tool";function Tu(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function Cu(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function Lu(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=Yt(Er,{show:!1,tripPurpose:rt,scenario:"baseline"},Tu,Cu);Y(o,f,p=>l(0,t=p));function i(p){let h=p.baseline,k=p.gov_target,C=p.go_dutch,T=`<h2>Trip purpose: ${t.tripPurpose==rt?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${h.toLocaleString()}</b></p>`,h==0)T+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let I=(k/h).toFixed(1),O=(C/h).toFixed(1);T+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${O}x</b> of baseline)</p>`}return T}function a(p){o.$$.not_equal(t.tripPurpose,p)&&(t.tripPurpose=p,f.set(t))}function u(p){o.$$.not_equal(t.scenario,p)&&(t.scenario=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,n,r,f,i,a,u,c]}class Iu extends V{constructor(e){super(),K(this,e,Lu,yu,Q,{})}}function Rl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[11]=e[l][1],t[12]=e[l][2],t[13]=e,t[14]=l,t}function Ou(o){let e;return{c(){e=y(`rowmaps.com
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Mu(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://www.rowmaps.com",$$slots:{default:[Ou]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("These public rights of way are aggregated from 137 authorities, thanks to "),w(n.$$.fragment),r=y(`. The licenses for each authority may vary, but most use
      the Open Government License v3 or Creative Commons.`),s=L(),f=S("p"),f.textContent="This data is current as of 15 November, 2024.",i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&32768&&(h.$$scope={dirty:p,ctx:c}),n.$set(h)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(a)}}}function ju(o){let e,l,t=o[11]+"",n,r,s;return e=new ye({props:{color:o[12]}}),{c(){w(e.$$.fragment),l=L(),n=y(t),r=L()},m(f,i){b(e,f,i),g(f,l,i),g(f,n,i),g(f,r,i),s=!0},p:J,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n),d(r)),v(e,f)}}}function Fl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[ju]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Ee({props:r}),z.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f&32768&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Nu(o){let e,l,t=_e(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Fl(Rl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=he()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f&5){t=_e(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Rl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Fl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(ve(),i=t.length;i<n.length;i+=1)r(i);ke()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),He(n,s)}}}function Ru(o){let e,l,t;return l=new Ne({props:{small:!0,$$slots:{default:[Nu]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Fu(o){let e,l=o[9].kind+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&512&&l!==(l=n[9].kind+"")&&G(t,l)},d(n){n&&d(e)}}}function Pu(o){let e,l;return e=new ae({props:{$$slots:{default:[Fu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&33280&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Du(o){let e,l;const t=[q(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ie(["get","kind"],{footpath:ne.rights_of_way.footpath,bridleway:ne.rights_of_way.bridleway,"restricted byway":ne.rights_of_way.restricted_byway,"byway open to all traffic":ne.rights_of_way.boat},"red"),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])}];let n={$$slots:{default:[Pu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?te(t,[s&0&&oe(q(It)),s&0&&{sourceLayer:It},t[2],t[3],t[4],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])}]):{};s&32768&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Au(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:It,title:Gu,$$slots:{controls:[Ru],help:[Mu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${It}.pmtiles`,$$slots:{default:[Du]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32769&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&32769&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let It="rights_of_way",Gu="Rights of Way";function qu(o){return{show:!0,footpath:o.includes("footpath"),bridleway:o.includes("bridleway"),restricted_byway:o.includes("restricted_byway"),boat:o.includes("boat")}}function Hu(o,e,l){let t,n=["footpath","bridleway","restricted_byway","boat"],r={show:!1,footpath:!0,bridleway:!0,restricted_byway:!0,boat:!0};function s(p){return p.show?n.filter(h=>p[h]).join(","):null}let f=Yt(It,r,s,qu);Y(o,f,p=>l(0,t=p));let i=[["footpath","Footpath",ne.rights_of_way.footpath],["bridleway","Bridleway",ne.rights_of_way.bridleway],["restricted_byway","Restricted byway",ne.rights_of_way.restricted_byway],["boat","Byway open to all traffic",ne.rights_of_way.boat]];function a(p){let h=n.filter(k=>p[k]).map(k=>({footpath:"footpath",bridleway:"bridleway",restricted_byway:"restricted byway",boat:"byway open to all traffic"})[k]);return["in",["get","kind"],["literal",h]]}function u(p,h){o.$$.not_equal(t[h],p)&&(t[h]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class zu extends V{constructor(e){super(),K(this,e,Hu,Au,Q,{})}}function Bu(o){let e;return{c(){e=y("Basemap")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Uu(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Eu(o){let e,l,t,n,r,s,f,i,a,u,c,p,h;return n=new re({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Bu]},$$scope:{ctx:o}}}),c=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Uu]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),t=y("The average speed data is collected over a six-month period by "),w(n.$$.fragment),r=y(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=L(),f=S("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=S("p"),u=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(c.$$.fragment),p=y("."),A(e,"slot","help")},m(k,C){g(k,e,C),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),$(e,a),$(a,u),b(c,a,null),$(a,p),h=!0},p(k,C){const T={};C&512&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const I={};C&512&&(I.$$scope={dirty:C,ctx:k}),c.$set(I)},i(k){h||(m(n.$$.fragment,k),m(c.$$.fragment,k),h=!0)},o(k){_(n.$$.fragment,k),_(c.$$.fragment,k),h=!1},d(k){k&&d(e),v(n),v(c)}}}function Wu(o){let e,l,t,n,r,s;l=new Je({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),n=new On({props:i}),z.push(()=>B(n,"value",f)),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(a,u){g(a,e,u),b(l,e,null),$(e,t),b(n,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,U(()=>r=!1)),n.$set(c)},i(a){s||(m(l.$$.fragment,a),m(n.$$.fragment,a),s=!0)},o(a){_(l.$$.fragment,a),_(n.$$.fragment,a),s=!1},d(a){a&&d(e),v(l),v(n)}}}function Yu(o){let e,l,t=o[8].indicative_mph+"",n,r,s,f,i,a=o[8].highest_mph+"",u,c,p=o[4][o[8].highest_description]+"",h,k;return{c(){e=S("p"),l=y("Posted speed limit: "),n=y(t),r=y(" mph"),s=L(),f=S("p"),i=y("Highest average speed: "),u=y(a),c=y(" mph (during "),h=y(p),k=y(")")},m(C,T){g(C,e,T),$(e,l),$(e,n),$(e,r),g(C,s,T),g(C,f,T),$(f,i),$(f,u),$(f,c),$(f,h),$(f,k)},p(C,T){T&256&&t!==(t=C[8].indicative_mph+"")&&G(n,t),T&256&&a!==(a=C[8].highest_mph+"")&&G(u,a),T&256&&p!==(p=C[4][C[8].highest_description]+"")&&G(h,p)},d(C){C&&(d(e),d(s),d(f))}}}function Ju(o){let e,l;return e=new ae({props:{$$slots:{default:[Yu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qu(o){let e,l;const t=[q(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get",o[0].kind],o[2],o[1]),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[Ju]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(Ot)),s&0&&{sourceLayer:Ot},t[2],t[3],s&7&&{paint:{"line-color":be(["get",r[0].kind],r[2],r[1]),"line-width":ze,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Vu(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Ot,title:Ku,$$slots:{controls:[Wu],help:[Eu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${xt()}/v1/${Ot}.pmtiles`,$$slots:{default:[Qu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ot="road_speeds",Ku="OS Speeds";function Zu(o){return o.show?o.kind:null}function Xu(o){return{show:!0,kind:o}}function xu(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,20,30,40,50,90],f=Yt(Ot,{show:!1,kind:"indicative_mph"},Zu,Xu);Y(o,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class ec extends V{constructor(e){super(),K(this,e,xu,Vu,Q,{})}}function tc(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function nc(o){let e,l,t,n,r,s,f,i,a,u;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[tc]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=S("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),s=S("p"),f=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(i.$$.fragment),a=y("."),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),b(i,s,null),$(s,a),u=!0},p(c,p){const h={};p&64&&(h.$$scope={dirty:p,ctx:c}),i.$set(h)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){_(i.$$.fragment,c),u=!1},d(c){c&&d(e),v(i)}}}function lc(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function rc(o){let e,l,t,n=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",p,h;return{c(){e=S("p"),l=y("Average width: "),t=S("b"),r=y(n),s=y(`
        meters`),f=L(),i=S("p"),a=y("Minimum width: "),u=S("b"),p=y(c),h=y(`
        meters`)},m(k,C){g(k,e,C),$(e,l),$(e,t),$(t,r),$(e,s),g(k,f,C),g(k,i,C),$(i,a),$(i,u),$(u,p),$(i,h)},p(k,C){C&32&&n!==(n=k[5].average+"")&&G(r,n),C&32&&c!==(c=k[5].minimum+"")&&G(p,c)},d(k){k&&(d(e),d(f),d(i))}}}function oc(o){let e,l;return e=new ae({props:{$$slots:{default:[rc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function sc(o){let e,l;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[oc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&6&&{paint:{"line-color":be(["get","average"],r[2],r[1]),"line-width":ze,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ic(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Mt,title:ac,$$slots:{controls:[lc],help:[nc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${xt()}/v1/${Mt}.pmtiles`,$$slots:{default:[sc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Mt="road_widths",ac="OS Road widths";function fc(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,5,10,15,20,100],s=$e(Mt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class uc extends V{constructor(e){super(),K(this,e,fc,ic,Q,{})}}function cc(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function $c(o){let e;return{c(){e=y(`OS Open Roads
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function pc(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[$c]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function mc(o){let e,l=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&G(t,l)},d(n){n&&d(e)}}}function _c(o){let e,l;return e=new ae({props:{$$slots:{default:[mc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function gc(o){let e,l;const t=[q(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[_c]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&oe(q(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function dc(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:jt,title:hc,$$slots:{help:[pc],icon:[cc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${jt}.pmtiles`,$$slots:{default:[gc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let jt="srn",hc="Strategic Road Network";function wc(o,e,l){let t,n=ne.srn,r=$e(jt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class bc extends V{constructor(e){super(),K(this,e,wc,dc,Q,{})}}function vc(o){let e,l,t;return l=new ye({props:{color:ne.trams}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function kc(o){let e,l,t,n,r;return n=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),w(n.$$.fragment),A(e,"slot","help")},m(s,f){g(s,e,f),$(e,l),$(e,t),b(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function yc(o){let e,l;const t=[q(Nt),{sourceLayer:Nt},{paint:{"line-color":ne.trams,"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ge({props:n}),e.$on("click",Cc),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Sc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Nt,title:Tc,$$slots:{help:[kc],icon:[vc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Nt}.pmtiles`,$$slots:{default:[yc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Nt="trams",Tc="Trams";function Cc(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Lc(o,e,l){let t,n=$e(Nt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Ic extends V{constructor(e){super(),K(this,e,Lc,Sc,Q,{})}}function Oc(o){let e;return{c(){e=y(`Bus Open Data Service
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Mc(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Oc]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),w(n.$$.fragment),r=y(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=L(),f=S("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&64&&(h.$$scope={dirty:p,ctx:c}),n.$set(h)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(a)}}}function jc(o){let e,l,t,n,r;return n=new Je({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("div"),l=S("p"),l.textContent="Peak hourly frequency:",t=L(),w(n.$$.fragment),A(e,"slot","controls")},m(s,f){g(s,e,f),$(e,l),$(e,t),b(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function Nc(o){let e,l,t,n=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,p,h,k,C,T=o[5].peak_description+"",I,O,N,R,j,M=o[5].total+"",H,P,F=o[5].total_description+"",W,ue;return{c(){e=S("p"),l=y("Stop name: "),t=S("b"),r=y(n),s=L(),f=S("p"),i=y("Peak: "),a=S("b"),c=y(u),p=y(`
        buses during the busiest hour of any day`),h=L(),k=S("p"),C=y("The peak hour is "),I=y(T),O=L(),N=S("p"),R=y("Total buses per day: "),j=S("b"),H=y(M),P=y(`
        (for `),W=y(F),ue=y(", the busiest day of the week)")},m(D,x){g(D,e,x),$(e,l),$(e,t),$(t,r),g(D,s,x),g(D,f,x),$(f,i),$(f,a),$(a,c),$(f,p),g(D,h,x),g(D,k,x),$(k,C),$(k,I),g(D,O,x),g(D,N,x),$(N,R),$(N,j),$(j,H),$(N,P),$(N,W),$(N,ue)},p(D,x){x&32&&n!==(n=D[5].stop_name+"")&&G(r,n),x&32&&u!==(u=D[5].peak+"")&&G(c,u),x&32&&T!==(T=D[5].peak_description+"")&&G(I,T),x&32&&M!==(M=D[5].total+"")&&G(H,M),x&32&&F!==(F=D[5].total_description+"")&&G(W,F)},d(D){D&&(d(e),d(s),d(f),d(h),d(k),d(O),d(N))}}}function Rc(o){let e,l;return e=new ae({props:{$$slots:{default:[Nc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Fc(o){let e,l;const t=[q(Rt),{sourceLayer:Rt},{paint:{"circle-color":be(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Rc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ft({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(Rt)),s&0&&{sourceLayer:Rt},s&6&&{paint:{"circle-color":be(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Pc(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Rt,title:Dc,$$slots:{controls:[jc],help:[Mc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Rt}.pmtiles`,$$slots:{default:[Fc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Rt="bus_stops",Dc="Bus stops";function Ac(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,3,10,20,30,100],s=$e(Rt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Gc extends V{constructor(e){super(),K(this,e,Ac,Pc,Q,{})}}function qc(o){let e;return{c(){e=y("crossing")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Hc(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[qc]},$$scope:{ctx:o}}}),f=new et({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),w(n.$$.fragment),r=y(" data from OpenStreetMap (as of 5 January 2025)."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function zc(o){let e,l,t;return l=new $t({props:{rows:o[2]}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Bc(o){let e,l=(o[4].class||"Unknown")+"",t,n;return{c(){e=S("p"),t=y(l),n=y(" crossing")},m(r,s){g(r,e,s),$(e,t),$(e,n)},p(r,s){s&16&&l!==(l=(r[4].class||"Unknown")+"")&&G(t,l)},d(r){r&&d(e)}}}function Uc(o){let e,l;return e=new ae({props:{$$slots:{default:[Bc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ec(o){let e,l=(o[4].class||"Unknown")+"",t,n;return{c(){e=S("p"),t=y(l),n=y(" crossing")},m(r,s){g(r,e,s),$(e,t),$(e,n)},p(r,s){s&16&&l!==(l=(r[4].class||"Unknown")+"")&&G(t,l)},d(r){r&&d(e)}}}function Wc(o){let e,l;return e=new ae({props:{$$slots:{default:[Ec,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Yc(o){let e,l,t,n;const r=[q("crossings-lines"),{sourceLayer:Ft},{filter:kn},{paint:{"line-color":Ie(["get","class"],Object.fromEntries(o[2]),"red"),"line-width":3}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let s={$$slots:{default:[Uc]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new ge({props:s}),e.$on("click",Pl);const f=[q("crossings-points"),{sourceLayer:Ft},{filter:yn},{paint:{"circle-color":Ie(["get","class"],Object.fromEntries(o[2]),"red"),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let i={$$slots:{default:[Wc]},$$scope:{ctx:o}};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new ft({props:i}),t.$on("click",Pl),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&5?te(r,[r[0],u&0&&{sourceLayer:Ft},r[2],u&4&&{paint:{"line-color":Ie(["get","class"],Object.fromEntries(a[2]),"red"),"line-width":3}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&5?te(f,[f[0],u&0&&{sourceLayer:Ft},f[2],u&4&&{paint:{"circle-color":Ie(["get","class"],Object.fromEntries(a[2]),"red"),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},f[5],f[6]]):{};u&32&&(p.$$scope={dirty:u,ctx:a}),t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Jc(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ft,title:Qc,$$slots:{controls:[zc],help:[Hc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ft}.pmtiles`,$$slots:{default:[Yc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ft="crossings",Qc="Crossings";function Pl(o){window.open(`https://www.openstreetmap.org/${o.detail.features[0].properties.osm}`,"_blank")}function Vc(o,e,l){let t,n=$e(Ft);Y(o,n,f=>l(0,t=f));let r=[["Zebra","#66C5CC"],["Parallel","#F6CF71"],["Pelican","#F89C74"],["Puffin","#DCB0F2"],["Toucan","#87C55F"],["Pegasus","#9EB9F3"],["Uncontrolled","#FE88B1"],["Signalised","#C9DB74"],["Unknown","red"]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class Kc extends V{constructor(e){super(),K(this,e,Vc,Jc,Q,{})}}function Zc(o){let e,l;return{c(){e=S("img"),A(e,"slot","icon"),Ln(e.src,l=So)||A(e,"src",l),A(e,"alt","a logo representing cycle parking")},m(t,n){g(t,e,n)},p:J,d(t){t&&d(e)}}}function Xc(o){let e;return{c(){e=y("OpenStreetMap")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function xc(o){let e;return{c(){e=y("OpenStreetMap Carto")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function e$(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Xc]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[xc]},$$scope:{ctx:o}}}),c=new et({}),{c(){e=S("span"),l=S("p"),t=y("Cycle parking, according to "),w(n.$$.fragment),r=y(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=L(),f=S("p"),i=y("Icon from "),w(a.$$.fragment),u=L(),w(c.$$.fragment),A(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),b(a,f,null),$(e,u),b(c,e,null),p=!0},p(h,k){const C={};k&16&&(C.$$scope={dirty:k,ctx:h}),n.$set(C);const T={};k&16&&(T.$$scope={dirty:k,ctx:h}),a.$set(T)},i(h){p||(m(n.$$.fragment,h),m(a.$$.fragment,h),m(c.$$.fragment,h),p=!0)},o(h){_(n.$$.fragment,h),_(a.$$.fragment,h),_(c.$$.fragment,h),p=!1},d(h){h&&d(e),v(n),v(a),v(c)}}}function t$(o){let e,l,t,n=(o[3].capacity??"unknown")+"",r;return{c(){e=S("p"),l=y("Capacity: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&8&&n!==(n=(s[3].capacity??"unknown")+"")&&G(r,n)},d(s){s&&d(e)}}}function n$(o){let e,l;return e=new ae({props:{$$slots:{default:[t$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function l$(o){let e,l;const t=[q(Pt),{sourceLayer:Pt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[n$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Mn({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(Pt)),s&0&&{sourceLayer:Pt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function r$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Pt,title:o$,$$slots:{help:[e$],icon:[Zc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Pt}.pmtiles`,$$slots:{default:[l$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Pt="cycle_parking",o$="Cycle parking";function s$(o,e,l){let t,n=$e(Pt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class i$ extends V{constructor(e){super(),K(this,e,s$,r$,Q,{})}}function a$(o){let e,l,t,n,r;return n=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),w(n.$$.fragment),A(e,"slot","help")},m(s,f){g(s,e,f),$(e,l),$(e,t),b(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function f$(o){let e,l,t;return e=new ye({props:{color:ne.education.schools}}),{c(){w(e.$$.fragment),l=y(`
        Schools`)},m(n,r){b(e,n,r),g(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function u$(o){let e,l,t;return e=new ye({props:{color:ne.education.colleges}}),{c(){w(e.$$.fragment),l=y(`
        Colleges`)},m(n,r){b(e,n,r),g(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function c$(o){let e,l,t;return e=new ye({props:{color:ne.education.universities}}),{c(){w(e.$$.fragment),l=y(`
        Universities`)},m(n,r){b(e,n,r),g(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function $$(o){let e,l,t,n,r,s,f,i,a;function u(T){o[3](T)}let c={$$slots:{default:[f$]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new Ee({props:c}),z.push(()=>B(e,"checked",u));function p(T){o[4](T)}let h={$$slots:{default:[u$]},$$scope:{ctx:o}};o[0].college!==void 0&&(h.checked=o[0].college),n=new Ee({props:h}),z.push(()=>B(n,"checked",p));function k(T){o[5](T)}let C={$$slots:{default:[c$]},$$scope:{ctx:o}};return o[0].university!==void 0&&(C.checked=o[0].university),f=new Ee({props:C}),z.push(()=>B(f,"checked",k)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment)},m(T,I){b(e,T,I),g(T,t,I),b(n,T,I),g(T,s,I),b(f,T,I),a=!0},p(T,I){const O={};I&2048&&(O.$$scope={dirty:I,ctx:T}),!l&&I&1&&(l=!0,O.checked=T[0].school,U(()=>l=!1)),e.$set(O);const N={};I&2048&&(N.$$scope={dirty:I,ctx:T}),!r&&I&1&&(r=!0,N.checked=T[0].college,U(()=>r=!1)),n.$set(N);const R={};I&2048&&(R.$$scope={dirty:I,ctx:T}),!i&&I&1&&(i=!0,R.checked=T[0].university,U(()=>i=!1)),f.$set(R)},i(T){a||(m(e.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),a=!0)},o(T){_(e.$$.fragment,T),_(n.$$.fragment,T),_(f.$$.fragment,T),a=!1},d(T){T&&(d(t),d(s)),v(e,T),v(n,T),v(f,T)}}}function p$(o){let e,l,t;return l=new Ne({props:{small:!0,$$slots:{default:[$$]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function m$(o){let e,l=(o[10].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&G(t,l)},d(n){n&&d(e)}}}function _$(o){let e,l;return e=new ae({props:{$$slots:{default:[m$,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function g$(o){let e,l;const t=[q(Dt),{sourceLayer:Dt},{paint:{"fill-color":Ie(["get","type"],{school:ne.education.schools,college:ne.education.colleges,university:ne.education.universities},"grey"),"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[_$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Me({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&5?te(t,[s&0&&oe(q(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function d$(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Dt,title:h$,$$slots:{controls:[p$],help:[a$]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Dt}.pmtiles`,$$slots:{default:[g$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Dt="education",h$="Education";function w$(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function b$(o,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(h){return h.show?n.filter(k=>h[k]).join(","):null}let f=Yt(Dt,r,s,w$);Y(o,f,h=>l(0,t=h));function i(h){let k=n.filter(C=>h[C]);return["in",["get","type"],["literal",k]]}function a(h){o.$$.not_equal(t.school,h)&&(t.school=h,f.set(t))}function u(h){o.$$.not_equal(t.college,h)&&(t.college=h,f.set(t))}function c(h){o.$$.not_equal(t.university,h)&&(t.university=h,f.set(t))}function p(h){o.$$.not_equal(t.show,h)&&(t.show=h,f.set(t))}return[t,f,i,a,u,c,p]}class v$ extends V{constructor(e){super(),K(this,e,b$,d$,Q,{})}}function k$(o){let e,l,t;return l=new ye({props:{color:ne.hospitals}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function y$(o){let e;return{c(){e=y("hospital")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function S$(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[y$]},$$scope:{ctx:o}}}),f=new et({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),w(n.$$.fragment),r=y(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function T$(o){let e,l=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&G(t,l)},d(n){n&&d(e)}}}function C$(o){let e,l;return e=new ae({props:{$$slots:{default:[T$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function L$(o){let e,l;const t=[q(At),{sourceLayer:At},{paint:{"fill-color":ne.hospitals,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[C$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Me({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(At)),s&0&&{sourceLayer:At},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function I$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:At,title:O$,$$slots:{help:[S$],icon:[k$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${At}.pmtiles`,$$slots:{default:[L$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let At="hospitals",O$="Hospitals";function M$(o,e,l){let t,n=$e(At);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class j$ extends V{constructor(e){super(),K(this,e,M$,I$,Q,{})}}function Dl(o,e,l){const t=o.slice();return t[6]=e[l],t}function N$(o){let e;return{c(){e=S("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,A(e,"slot","help")},m(l,t){g(l,e,t)},p:J,d(l){l&&d(e)}}}function R$(o){let e,l,t;return l=new $t({props:{rows:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function F$(o){let e,l=o[5]["Issue ID"]+"",t,n,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=S("h2"),t=y(l),n=y(" - "),s=y(r),f=L(),i=S("p"),u=y(a)},m(c,p){g(c,e,p),$(e,t),$(e,n),$(e,s),g(c,f,p),g(c,i,p),$(i,u)},p(c,p){p&32&&l!==(l=c[5]["Issue ID"]+"")&&G(t,l),p&32&&r!==(r=c[5].Code+"")&&G(s,r),p&32&&a!==(a=c[5]["Issue Stage"]+"")&&G(u,a)},d(c){c&&(d(e),d(f),d(i))}}}function Al(o){let e,l=o[6]+"",t,n,r,s=o[5][o[6]]+"",f,i;return{c(){e=S("p"),t=y(l),n=y(`:
            `),r=S("b"),f=y(s),i=L()},m(a,u){g(a,e,u),$(e,t),$(e,n),$(e,r),$(r,f),$(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&G(f,s)},d(a){a&&d(e)}}}function P$(o){let e,l=_e(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Al(Dl(o,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();se(e,"max-width","30vw"),se(e,"max-height","60vh"),se(e,"overflow","auto")},m(n,r){g(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&36){l=_e(n[2]);let s;for(s=0;s<l.length;s+=1){const f=Dl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Al(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&d(e),He(t,n)}}}function D$(o){let e,l,t,n;return e=new ae({props:{openOn:"hover",$$slots:{default:[F$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[P$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function A$(o){let e,l;const t=[q(cn),{paint:{"circle-color":Ie(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[D$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ft({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?te(t,[s&0&&oe(q(cn)),s&8&&{paint:{"circle-color":Ie(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function G$(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:cn,title:q$,$$slots:{controls:[R$],help:[N$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new ct({props:{data:`${xt()}/v1/problems.geojson.gz`,$$slots:{default:[A$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let cn="problems",q$="Issues & Conflicts";function H$(o,e,l){let t,n=$e(cn);Y(o,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,s,f]}class z$ extends V{constructor(e){super(),K(this,e,H$,G$,Q,{})}}function B$(o){let e,l;return{c(){e=S("img"),A(e,"slot","icon"),Ln(e.src,l=To)||A(e,"src",l),A(e,"alt","A logo representing a train")},m(t,n){g(t,e,n)},p:J,d(t){t&&d(e)}}}function U$(o){let e;return{c(){e=y("railway station")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function E$(o){let e;return{c(){e=y(`National Rail
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function W$(o){let e,l,t,n,r,s,f,i,a,u,c,p,h;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[U$]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[E$]},$$scope:{ctx:o}}}),p=new et({}),{c(){e=S("div"),l=S("p"),t=y("This shows "),w(n.$$.fragment),r=y(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),f=S("p"),i=y("Icon from "),w(a.$$.fragment),u=y(". (Note that not all stations shown are National Rail.)"),c=L(),w(p.$$.fragment),A(e,"slot","help")},m(k,C){g(k,e,C),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),b(a,f,null),$(f,u),$(e,c),b(p,e,null),h=!0},p(k,C){const T={};C&16&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const I={};C&16&&(I.$$scope={dirty:C,ctx:k}),a.$set(I)},i(k){h||(m(n.$$.fragment,k),m(a.$$.fragment,k),m(p.$$.fragment,k),h=!0)},o(k){_(n.$$.fragment,k),_(a.$$.fragment,k),_(p.$$.fragment,k),h=!1},d(k){k&&d(e),v(n),v(a),v(p)}}}function Y$(o){let e,l=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&G(t,l)},d(n){n&&d(e)}}}function J$(o){let e,l;return e=new ae({props:{$$slots:{default:[Y$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Q$(o){let e,l;const t=[q(rn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[J$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Mn({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(rn)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function V$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:rn,title:K$,$$slots:{help:[W$],icon:[B$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new ct({props:{data:`${me()}/v1/${rn}.geojson`,$$slots:{default:[Q$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let rn="railway_stations",K$="Railway stations";function Z$(o,e,l){let t,n=$e(rn);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class X$ extends V{constructor(e){super(),K(this,e,Z$,V$,Q,{})}}function x$(o){let e,l,t;return l=new ye({props:{color:ne.sports_spaces}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ep(o){let e;return{c(){e=y("sports pitches")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function tp(o){let e;return{c(){e=y("sports centres")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function np(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[ep]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[tp]},$$scope:{ctx:o}}}),a=new et({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),w(n.$$.fragment),r=y(" and "),w(s.$$.fragment),f=y(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),b(n,l,null),$(l,r),b(s,l,null),$(l,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&16&&(h.$$scope={dirty:p,ctx:c}),n.$set(h);const k={};p&16&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(s),v(a)}}}function lp(o){let e,l=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&G(t,l)},d(n){n&&d(e)}}}function rp(o){let e,l;return e=new ae({props:{$$slots:{default:[lp,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function op(o){let e,l;const t=[q(Gt),{sourceLayer:Gt},{paint:{"fill-color":ne.sports_spaces,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[rp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Me({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(Gt)),s&0&&{sourceLayer:Gt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function sp(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Gt,title:ip,$$slots:{help:[np],icon:[x$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Gt}.pmtiles`,$$slots:{default:[op]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Gt="sports_spaces",ip="Sports spaces";function ap(o,e,l){let t,n=$e(Gt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class fp extends V{constructor(e){super(),K(this,e,ap,sp,Q,{})}}function up(o){let e;return{c(){e=y("DfT stats19")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function cp(o){let e;return{c(){e=y("documented by DfT")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function $p(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,O,N,R,j,M,H,P;return n=new re({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[up]},$$scope:{ctx:o}}}),O=new re({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[cp]},$$scope:{ctx:o}}}),H=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("This layer shows collisions recorded in the "),w(n.$$.fragment),r=y(" dataset, as of 30 September 2024. Please note these limitations:"),s=L(),f=S("ul"),i=S("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=S("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),p=S("li"),p.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,h=L(),k=S("li"),k.textContent='The "pedestrians" category also include mobility scooters',C=L(),T=S("li"),I=y("All limitations "),w(O.$$.fragment),N=y(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),R=L(),j=S("p"),j.textContent="You can click a point to open the full report, thanks to CycleStreets.",M=L(),w(H.$$.fragment),A(e,"slot","help")},m(F,W){g(F,e,W),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),$(f,a),$(f,u),$(f,c),$(f,p),$(f,h),$(f,k),$(f,C),$(f,T),$(T,I),b(O,T,null),$(T,N),$(e,R),$(e,j),$(e,M),b(H,e,null),P=!0},p(F,W){const ue={};W&4194304&&(ue.$$scope={dirty:W,ctx:F}),n.$set(ue);const D={};W&4194304&&(D.$$scope={dirty:W,ctx:F}),O.$set(D)},i(F){P||(m(n.$$.fragment,F),m(O.$$.fragment,F),m(H.$$.fragment,F),P=!0)},o(F){_(n.$$.fragment,F),_(O.$$.fragment,F),_(H.$$.fragment,F),P=!1},d(F){F&&d(e),v(n),v(O),v(H)}}}function pp(o){let e;return{c(){e=y("Pedestrians")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function mp(o){let e;return{c(){e=y("Cyclists")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function _p(o){let e;return{c(){e=y("Horse riders")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function gp(o){let e;return{c(){e=y("Other")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function dp(o){let e,l,t,n,r,s,f,i,a,u,c,p;function h(j){o[10](j)}let k={$$slots:{default:[pp]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(k.checked=o[0].pedestrians),e=new Ee({props:k}),z.push(()=>B(e,"checked",h));function C(j){o[11](j)}let T={$$slots:{default:[mp]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(T.checked=o[0].cyclists),n=new Ee({props:T}),z.push(()=>B(n,"checked",C));function I(j){o[12](j)}let O={$$slots:{default:[_p]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(O.checked=o[0].horseRiders),f=new Ee({props:O}),z.push(()=>B(f,"checked",I));function N(j){o[13](j)}let R={$$slots:{default:[gp]},$$scope:{ctx:o}};return o[0].other!==void 0&&(R.checked=o[0].other),u=new Ee({props:R}),z.push(()=>B(u,"checked",N)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment)},m(j,M){b(e,j,M),g(j,t,M),b(n,j,M),g(j,s,M),b(f,j,M),g(j,a,M),b(u,j,M),p=!0},p(j,M){const H={};M&4194304&&(H.$$scope={dirty:M,ctx:j}),!l&&M&1&&(l=!0,H.checked=j[0].pedestrians,U(()=>l=!1)),e.$set(H);const P={};M&4194304&&(P.$$scope={dirty:M,ctx:j}),!r&&M&1&&(r=!0,P.checked=j[0].cyclists,U(()=>r=!1)),n.$set(P);const F={};M&4194304&&(F.$$scope={dirty:M,ctx:j}),!i&&M&1&&(i=!0,F.checked=j[0].horseRiders,U(()=>i=!1)),f.$set(F);const W={};M&4194304&&(W.$$scope={dirty:M,ctx:j}),!c&&M&1&&(c=!0,W.checked=j[0].other,U(()=>c=!1)),u.$set(W)},i(j){p||(m(e.$$.fragment,j),m(n.$$.fragment,j),m(f.$$.fragment,j),m(u.$$.fragment,j),p=!0)},o(j){_(e.$$.fragment,j),_(n.$$.fragment,j),_(f.$$.fragment,j),_(u.$$.fragment,j),p=!1},d(j){j&&(d(t),d(s),d(a)),v(e,j),v(n,j),v(f,j),v(u,j)}}}function hp(o){let e,l,t,n,r,s,f,i,a,u,c,p,h;return l=new Ne({props:{small:!0,$$slots:{default:[dp]},$$scope:{ctx:o}}}),u=new $t({props:{rows:o[9]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),n=S("div"),r=y(`Filter years:
      `),s=S("input"),f=y(`
      -
      `),i=S("input"),a=L(),w(u.$$.fragment),A(s,"type","number"),A(s,"min",2017),A(s,"max",2023),A(s,"class","svelte-1ft65rw"),A(i,"type","number"),A(i,"min",2017),A(i,"max",2023),A(i,"class","svelte-1ft65rw"),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(k,C){g(k,e,C),b(l,e,null),$(e,t),$(e,n),$(n,r),$(n,s),at(s,o[0].minYear),$(n,f),$(n,i),at(i,o[0].maxYear),$(e,a),b(u,e,null),c=!0,p||(h=[Kt(s,"input",o[14]),Kt(i,"input",o[15])],p=!0)},p(k,C){const T={};C&4194305&&(T.$$scope={dirty:C,ctx:k}),l.$set(T),C&1&&fn(s.value)!==k[0].minYear&&at(s,k[0].minYear),C&1&&fn(i.value)!==k[0].maxYear&&at(i,k[0].maxYear)},i(k){c||(m(l.$$.fragment,k),m(u.$$.fragment,k),c=!0)},o(k){_(l.$$.fragment,k),_(u.$$.fragment,k),c=!1},d(k){k&&d(e),v(l),v(u),p=!1,to(h)}}}function Gl(o){let e,l,t,n=o[3][o[21].pedestrian_location]+"",r;return{c(){e=S("p"),l=y("Pedestrian location: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[3][s[21].pedestrian_location]+"")&&G(r,n)},d(s){s&&d(e)}}}function ql(o){let e,l,t,n=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=S("p"),l=y("Pedestrian movement: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[4][s[21].pedestrian_movement]+"")&&G(r,n)},d(s){s&&d(e)}}}function wp(o){let e,l,t,n=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,p,h,k,C,T=Hl(o[21])+"",I,O,N,R,j,M=o[21].pedestrian_location&&Gl(o),H=o[21].pedestrian_movement&&ql(o);return{c(){e=S("p"),l=y("Year: "),t=S("b"),r=y(n),s=L(),f=S("p"),i=y("Severity: "),a=S("b"),c=y(u),p=L(),h=S("p"),k=y("Casualties: "),C=S("b"),I=y(T),O=L(),M&&M.c(),N=L(),H&&H.c(),R=L(),j=S("p"),j.textContent="Click to open full report in CycleStreets"},m(P,F){g(P,e,F),$(e,l),$(e,t),$(t,r),g(P,s,F),g(P,f,F),$(f,i),$(f,a),$(a,c),g(P,p,F),g(P,h,F),$(h,k),$(h,C),$(C,I),g(P,O,F),M&&M.m(P,F),g(P,N,F),H&&H.m(P,F),g(P,R,F),g(P,j,F)},p(P,F){F&2097152&&n!==(n=P[21].year+"")&&G(r,n),F&2097152&&u!==(u=P[5][P[21].severity]+"")&&G(c,u),F&2097152&&T!==(T=Hl(P[21])+"")&&G(I,T),P[21].pedestrian_location?M?M.p(P,F):(M=Gl(P),M.c(),M.m(N.parentNode,N)):M&&(M.d(1),M=null),P[21].pedestrian_movement?H?H.p(P,F):(H=ql(P),H.c(),H.m(R.parentNode,R)):H&&(H.d(1),H=null)},d(P){P&&(d(e),d(s),d(f),d(p),d(h),d(O),d(N),d(R),d(j)),M&&M.d(P),H&&H.d(P)}}}function bp(o){let e,l;return e=new ae({props:{$$slots:{default:[wp,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function vp(o){let e,l;const t=[q(qt),{sourceLayer:qt},{paint:{"circle-color":be(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[bp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ft({props:n}),e.$on("click",Tp),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&451?te(t,[s&0&&oe(q(qt)),s&0&&{sourceLayer:qt},s&448&&{paint:{"circle-color":be(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function kp(o){let e,l,t,n,r;function s(i){o[16](i)}let f={name:qt,title:yp,$$slots:{controls:[hp],help:[$p]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${qt}.pmtiles`,$$slots:{default:[vp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let qt="stats19",yp="Stats19";function Sp(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Hl(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function Tp(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function Cp(o,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(P){return P.show?`${r.filter(W=>P[W]).join(",")}/${P.minYear}/${P.maxYear}`:null}let i=Yt(qt,s,f,Sp);Y(o,i,P=>l(0,n=P));function a(P,F,W,ue,D,x){let Z=["any"];return n.pedestrians&&Z.push(["get","pedestrian"]),n.cyclists&&Z.push(["get","cyclist"]),n.horseRiders&&Z.push(["get","horse_rider"]),n.other&&Z.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],Z]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},p={1:"Fatal",2:"Serious",3:"Slight"},h=ne.sequential_low_to_high[4],k=ne.sequential_low_to_high[2],C=ne.sequential_low_to_high[0],T=[["Fatal",h],["Serious",k],["Slight",C]];function I(P){o.$$.not_equal(n.pedestrians,P)&&(n.pedestrians=P,i.set(n))}function O(P){o.$$.not_equal(n.cyclists,P)&&(n.cyclists=P,i.set(n))}function N(P){o.$$.not_equal(n.horseRiders,P)&&(n.horseRiders=P,i.set(n))}function R(P){o.$$.not_equal(n.other,P)&&(n.other=P,i.set(n))}function j(){n.minYear=fn(this.value),i.set(n)}function M(){n.maxYear=fn(this.value),i.set(n)}function H(P){o.$$.not_equal(n.show,P)&&(n.show=P,i.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,p,h,k,C,T,I,O,N,R,j,M,H]}class Lp extends V{constructor(e){super(),K(this,e,Cp,kp,Q,{})}}function zl(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Bl(o){let e,l,t=o[1]+"",n,r,s,f=o[2]+"",i,a;return{c(){e=S("tr"),l=S("td"),n=y(t),r=L(),s=S("td"),i=y(f),a=L()},m(u,c){g(u,e,c),$(e,l),$(l,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&1&&t!==(t=u[1]+"")&&G(n,t),c&1&&f!==(f=u[2]+"")&&G(i,f)},d(u){u&&d(e)}}}function Ip(o){let e,l,t,n,r=_e(Object.entries(o[0])),s=[];for(let f=0;f<r.length;f+=1)s[f]=Bl(zl(o,r,f));return{c(){e=S("table"),l=S("thead"),l.innerHTML="<tr><th>Key</th> <th>Value</th></tr>",t=L(),n=S("tbody");for(let f=0;f<s.length;f+=1)s[f].c()},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,n);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,null)},p(f,i){if(i&1){r=_e(Object.entries(f[0]));let a;for(a=0;a<r.length;a+=1){const u=zl(f,r,a);s[a]?s[a].p(u,i):(s[a]=Bl(u),s[a].c(),s[a].m(n,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(f){f&&d(e),He(s,f)}}}function Op(o){let e,l;return e=new ae({props:{openOn:"click",$$slots:{default:[Ip,({props:t})=>({0:t}),({props:t})=>t?1:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&33&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}class Nn extends V{constructor(e){super(),K(this,e,null,Op,Q,{})}}function Mp(o){let e;return{c(){e=S("span"),e.innerHTML="<p>This is your own GeoJSON file.</p>",A(e,"slot","help")},m(l,t){g(l,e,t)},p:J,d(l){l&&d(e)}}}function jp(o){let e,l,t,n,r,s,f,i=o[0].features.length.toLocaleString()+"",a,u,c;return l=new Br({props:{label:"Load your own GeoJSON file",onLoad:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),n=S("p"),n.innerHTML="<i>Note this file doesn&#39;t leave your computer; it&#39;s not uploaded anywhere</i>",r=L(),s=S("p"),f=y("Currently showing "),a=y(i),u=y(" features"),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(p,h){g(p,e,h),b(l,e,null),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),$(s,a),$(s,u),c=!0},p(p,h){(!c||h&1)&&i!==(i=p[0].features.length.toLocaleString()+"")&&G(a,i)},i(p){c||(m(l.$$.fragment,p),c=!0)},o(p){_(l.$$.fragment,p),c=!1},d(p){p&&d(e),v(l)}}}function Np(o){let e,l;return e=new Nn({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Rp(o){let e,l;return e=new Nn({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Fp(o){let e,l;return e=new Nn({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Pp(o){let e,l,t,n,r,s,f,i;const a=[q("user_data_polygons"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Polygon"]},{paint:{"fill-color":"blue","fill-opacity":ee(.5,1)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let u={$$slots:{default:[Np]},$$scope:{ctx:o}};for(let I=0;I<a.length;I+=1)u=X(u,a[I]);e=new Me({props:u});const c=[q("user_data_polygons-outline"),{paint:{"line-color":"black","line-width":2.5}},{layout:{visibility:o[1]?"visible":"none"}}];let p={};for(let I=0;I<c.length;I+=1)p=X(p,c[I]);t=new ge({props:p});const h=[q("user_data_lines"),{manageHoverState:!0},{filter:["==",["geometry-type"],"LineString"]},{paint:{"line-color":"green","line-width":ee(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let k={$$slots:{default:[Rp]},$$scope:{ctx:o}};for(let I=0;I<h.length;I+=1)k=X(k,h[I]);r=new ge({props:k});const C=[q("user_data_points"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Point"]},{paint:{"circle-color":"red","circle-radius":ee(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let T={$$slots:{default:[Fp]},$$scope:{ctx:o}};for(let I=0;I<C.length;I+=1)T=X(T,C[I]);return f=new ft({props:T}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(I,O){b(e,I,O),g(I,l,O),b(t,I,O),g(I,n,O),b(r,I,O),g(I,s,O),b(f,I,O),i=!0},p(I,O){const N=O&2?te(a,[a[0],a[1],a[2],a[3],{layout:{visibility:I[1]?"visible":"none"}},a[5],a[6]]):{};O&32&&(N.$$scope={dirty:O,ctx:I}),e.$set(N);const R=O&2?te(c,[c[0],c[1],{layout:{visibility:I[1]?"visible":"none"}}]):{};t.$set(R);const j=O&2?te(h,[h[0],h[1],h[2],h[3],{layout:{visibility:I[1]?"visible":"none"}},h[5],h[6]]):{};O&32&&(j.$$scope={dirty:O,ctx:I}),r.$set(j);const M=O&2?te(C,[C[0],C[1],C[2],C[3],{layout:{visibility:I[1]?"visible":"none"}},C[5],C[6]]):{};O&32&&(M.$$scope={dirty:O,ctx:I}),f.$set(M)},i(I){i||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(r.$$.fragment,I),m(f.$$.fragment,I),i=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(r.$$.fragment,I),_(f.$$.fragment,I),i=!1},d(I){I&&(d(l),d(n),d(s)),v(e,I),v(t,I),v(r,I),v(f,I)}}}function Dp(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Wr,title:Ap,$$slots:{controls:[jp],help:[Mp]},$$scope:{ctx:o}};return o[1]!==void 0&&(f.show=o[1]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new ct({props:{data:o[0],generateId:!0,$$slots:{default:[Pp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&33&&(u.$$scope={dirty:a,ctx:i}),!l&&a&2&&(l=!0,u.show=i[1],U(()=>l=!1)),e.$set(u);const c={};a&1&&(c.data=i[0]),a&34&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Wr="user_data",Ap="Your own GeoJSON file";function Gp(o,e,l){let t,n=$e(Wr);Y(o,n,i=>l(1,t=i));let r={type:"FeatureCollection",features:[]};function s(i,a){try{l(0,r=JSON.parse(a))}catch(u){window.alert(`Couldn't load ${i} -- is it GeoJSON? ${u}`)}}function f(i){t=i,n.set(t)}return[r,t,n,s,f]}class qp extends V{constructor(e){super(),K(this,e,Gp,Dp,Q,{})}}function Hp(o){let e;return{c(){e=y(`DfT road statistics
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function zp(o){let e;return{c(){e=y("methodology")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Bp(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Hp]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[zp]},$$scope:{ctx:o}}}),c=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("AADF (annual average daily flow) data from "),w(n.$$.fragment),r=y(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),w(s.$$.fragment),f=y(" for details and caveats about the measurements."),i=L(),a=S("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),w(c.$$.fragment),A(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(l,t),b(n,l,null),$(l,r),b(s,l,null),$(l,f),$(e,i),$(e,a),$(e,u),b(c,e,null),p=!0},p(h,k){const C={};k&128&&(C.$$scope={dirty:k,ctx:h}),n.$set(C);const T={};k&128&&(T.$$scope={dirty:k,ctx:h}),s.$set(T)},i(h){p||(m(n.$$.fragment,h),m(s.$$.fragment,h),m(c.$$.fragment,h),p=!0)},o(h){_(n.$$.fragment,h),_(s.$$.fragment,h),_(c.$$.fragment,h),p=!1},d(h){h&&d(e),v(n),v(s),v(c)}}}function Up(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ep(o){let e,l=o[6].location+"",t,n,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",p,h,k,C,T=o[6].year+"",I,O,N,R=o[6].pedal_cycles.toLocaleString()+"",j,M,H,P,F,W=o[6].method+"",ue;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),s=y("Total motor vehicles ("),i=y(f),a=y(` AADF):
        `),u=S("b"),p=y(c),h=L(),k=S("p"),C=y("Total pedal cycles ("),I=y(T),O=y(` AADF):
        `),N=S("b"),j=y(R),M=L(),H=S("p"),P=y("Count method: "),F=S("b"),ue=y(W)},m(D,x){g(D,e,x),$(e,t),g(D,n,x),g(D,r,x),$(r,s),$(r,i),$(r,a),$(r,u),$(u,p),g(D,h,x),g(D,k,x),$(k,C),$(k,I),$(k,O),$(k,N),$(N,j),g(D,M,x),g(D,H,x),$(H,P),$(H,F),$(F,ue)},p(D,x){x&64&&l!==(l=D[6].location+"")&&G(t,l),x&64&&f!==(f=D[6].year+"")&&G(i,f),x&64&&c!==(c=D[6].motor_vehicles.toLocaleString()+"")&&G(p,c),x&64&&T!==(T=D[6].year+"")&&G(I,T),x&64&&R!==(R=D[6].pedal_cycles.toLocaleString()+"")&&G(j,R),x&64&&W!==(W=D[6].method+"")&&G(ue,W)},d(D){D&&(d(e),d(n),d(r),d(h),d(k),d(M),d(H))}}}function Wp(o){let e,l;return e=new ae({props:{$$slots:{default:[Ep,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Yp(o){let e,l;const t=[q(Ht),{sourceLayer:Ht},{paint:{"circle-color":be(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Wp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ft({props:n}),e.$on("click",Vp),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(Ht)),s&0&&{sourceLayer:Ht},s&6&&{paint:{"circle-color":be(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Jp(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ht,title:Qp,$$slots:{controls:[Up],help:[Bp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ht}.pmtiles`,$$slots:{default:[Yp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ht="vehicle_counts",Qp="Vehicle counts";function Vp(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function Kp(o,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=$e(Ht);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class Zp extends V{constructor(e){super(),K(this,e,Kp,Jp,Q,{})}}function Xp(o){return Ie(["get","intervention_type"],{area:nt.area,route:nt.route,crossing:nt.crossing,other:nt.other},"white")}function xp(o){return[["Areas",nt.area],["Routes",nt.route],["Crossings",nt.crossing],["Other",nt.other]]}let Xt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854",ATF5:"purple"},Cn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function em(o,e,l){let t={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},n={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};for(let[r,s]of Object.entries(o.schemes))s.pipeline?n.schemes[r]=s:t.schemes[r]=s;for(let r of o.features){if(!tm(r))continue;let s=r.properties.scheme_reference,f=Object.hasOwn(t.schemes,s),i=f?t.schemes[s]:n.schemes[s];i.browse&&(r.properties.funding_programme=i.browse.funding_programme,r.properties.current_milestone=i.browse.current_milestone);let a=f?t:n;r.id=a.features.length+1,a.features.push(r)}e.set(t),l.set(n)}function tm(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}function nm(){let o={type:"FeatureCollection",features:[],schemes:{},notes:["These schemes are everything you've drawn in this browser using Scheme Sketcher. The data source and accuracy depend on whatever files you imported, created, or edited yourself."]};for(let l=0;l<window.localStorage.length;l++){let t=window.localStorage.key(l),n=t.split("/");if(!(n.length!=3||n[0]!="sketch"))try{let r=JSON.parse(window.localStorage.getItem(t));if(r.features.length==0)continue;for(let s of Object.values(r.schemes))s.browse={authority_or_region:n[1],local_filename:n[2]};o.schemes={...o.schemes,...r.schemes},o.features=[...o.features,...r.features]}catch{}}let e=1;for(let l of o.features)l.id=e++;return o}function Ul(o,e,l){const t=o.slice();return t[30]=e[l][0],t[31]=e[l][1],t[32]=e,t[33]=l,t}function El(o,e,l){const t=o.slice();return t[34]=e[l],t[35]=e,t[36]=l,t}function lm(o){let e;return{c(){e=y("Filters")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function rm(o){let e;return{c(){e=y("Reset all filters")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function om(o){let e,l,t,n,r,s,f,i;e=new sn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[am]},$$scope:{ctx:o}}});function a(h){o[25](h)}let u={label:"Scheme name or reference",options:$n(o[0])};o[1]!==void 0&&(u.value=o[1]),t=new Ur({props:u}),z.push(()=>B(t,"value",a));function c(h){o[26](h)}let p={label:"Authority or region",choices:o[11],emptyOption:!0};return o[4]!==void 0&&(p.value=o[4]),s=new Zt({props:p}),z.push(()=>B(s,"value",c)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),r=L(),w(s.$$.fragment)},m(h,k){b(e,h,k),g(h,l,k),b(t,h,k),g(h,r,k),b(s,h,k),i=!0},p(h,k){const C={};k[0]&4|k[1]&64&&(C.$$scope={dirty:k,ctx:h}),e.$set(C);const T={};k[0]&1&&(T.options=$n(h[0])),!n&&k[0]&2&&(n=!0,T.value=h[1],U(()=>n=!1)),t.$set(T);const I={};k[0]&2048&&(I.choices=h[11]),!f&&k[0]&16&&(f=!0,I.value=h[4],U(()=>f=!1)),s.$set(I)},i(h){i||(m(e.$$.fragment,h),m(t.$$.fragment,h),m(s.$$.fragment,h),i=!0)},o(h){_(e.$$.fragment,h),_(t.$$.fragment,h),_(s.$$.fragment,h),i=!1},d(h){h&&(d(l),d(r)),v(e,h),v(t,h),v(s,h)}}}function sm(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,O;t=new sn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[um]},$$scope:{ctx:o}}});function N(F){o[18](F)}let R={label:"Scheme name or reference",options:$n(o[0])};o[1]!==void 0&&(R.value=o[1]),r=new Ur({props:R}),z.push(()=>B(r,"value",N));function j(F){o[19](F)}let M={label:"Authority or region",choices:o[11],emptyOption:!0};o[4]!==void 0&&(M.value=o[4]),i=new Zt({props:M}),z.push(()=>B(i,"value",j));function H(F){o[20](F)}let P={label:"Current milestone",choices:o[12],emptyOption:!0};return o[6]!==void 0&&(P.value=o[6]),c=new Zt({props:P}),z.push(()=>B(c,"value",H)),C=new sn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[pm]},$$scope:{ctx:o}}}),I=new sn({props:{label:"Intervention types",id:"filterInterventionTypes",$$slots:{default:[gm]},$$scope:{ctx:o}}}),{c(){e=S("div"),l=S("div"),w(t.$$.fragment),n=L(),w(r.$$.fragment),f=L(),w(i.$$.fragment),u=L(),w(c.$$.fragment),h=L(),k=S("div"),w(C.$$.fragment),T=L(),w(I.$$.fragment),A(l,"class","govuk-grid-column-one-half"),A(k,"class","govuk-grid-column-one-half"),A(e,"class","govuk-grid-row")},m(F,W){g(F,e,W),$(e,l),b(t,l,null),$(l,n),b(r,l,null),$(l,f),b(i,l,null),$(l,u),b(c,l,null),$(e,h),$(e,k),b(C,k,null),$(k,T),b(I,k,null),O=!0},p(F,W){const ue={};W[0]&4|W[1]&64&&(ue.$$scope={dirty:W,ctx:F}),t.$set(ue);const D={};W[0]&1&&(D.options=$n(F[0])),!s&&W[0]&2&&(s=!0,D.value=F[1],U(()=>s=!1)),r.$set(D);const x={};W[0]&2048&&(x.choices=F[11]),!a&&W[0]&16&&(a=!0,x.value=F[4],U(()=>a=!1)),i.$set(x);const Z={};!p&&W[0]&64&&(p=!0,Z.value=F[6],U(()=>p=!1)),c.$set(Z);const ce={};W[0]&32|W[1]&64&&(ce.$$scope={dirty:W,ctx:F}),C.$set(ce);const Le={};W[0]&128|W[1]&64&&(Le.$$scope={dirty:W,ctx:F}),I.$set(Le)},i(F){O||(m(t.$$.fragment,F),m(r.$$.fragment,F),m(i.$$.fragment,F),m(c.$$.fragment,F),m(C.$$.fragment,F),m(I.$$.fragment,F),O=!0)},o(F){_(t.$$.fragment,F),_(r.$$.fragment,F),_(i.$$.fragment,F),_(c.$$.fragment,F),_(C.$$.fragment,F),_(I.$$.fragment,F),O=!1},d(F){F&&d(e),v(t),v(r),v(i),v(c),v(C),v(I)}}}function im(o){let e;return{c(){e=y("Clear")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function am(o){let e,l,t,n,r,s;return t=new We({props:{$$slots:{default:[im]},$$scope:{ctx:o}}}),t.$on("click",o[24]),{c(){e=S("input"),l=L(),w(t.$$.fragment),A(e,"type","text"),A(e,"class","govuk-input govuk-input--width-10"),A(e,"id","filterInterventionText")},m(f,i){g(f,e,i),at(e,o[2]),g(f,l,i),b(t,f,i),n=!0,r||(s=Kt(e,"input",o[23]),r=!0)},p(f,i){i[0]&4&&e.value!==f[2]&&at(e,f[2]);const a={};i[1]&64&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(d(e),d(l)),v(t,f),r=!1,s()}}}function fm(o){let e;return{c(){e=y("Clear")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function um(o){let e,l,t,n,r,s;return t=new We({props:{$$slots:{default:[fm]},$$scope:{ctx:o}}}),t.$on("click",o[17]),{c(){e=S("input"),l=L(),w(t.$$.fragment),A(e,"type","text"),A(e,"class","govuk-input govuk-input--width-10"),A(e,"id","filterInterventionText")},m(f,i){g(f,e,i),at(e,o[2]),g(f,l,i),b(t,f,i),n=!0,r||(s=Kt(e,"input",o[16]),r=!0)},p(f,i){i[0]&4&&e.value!==f[2]&&at(e,f[2]);const a={};i[1]&64&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(d(e),d(l)),v(t,f),r=!1,s()}}}function cm(o){let e=o[34]+"",l,t;return{c(){l=y(e),t=L()},m(n,r){g(n,l,r),g(n,t,r)},p:J,d(n){n&&(d(l),d(t))}}}function Wl(o){let e,l,t;function n(s){o[21](s,o[34])}let r={$$slots:{default:[cm]},$$scope:{ctx:o}};return o[5][o[34]]!==void 0&&(r.checked=o[5][o[34]]),e=new Ee({props:r}),z.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f[1]&64&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&32&&(l=!0,i.checked=o[5][o[34]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function $m(o){let e,l,t=_e(Object.keys(Xt)),n=[];for(let s=0;s<t.length;s+=1)n[s]=Wl(El(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=he()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f[0]&32){t=_e(Object.keys(Xt));let i;for(i=0;i<t.length;i+=1){const a=El(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Wl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(ve(),i=t.length;i<n.length;i+=1)r(i);ke()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),He(n,s)}}}function pm(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[$m]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function mm(o){let e=o[31]+"",l,t;return{c(){l=y(e),t=L()},m(n,r){g(n,l,r),g(n,t,r)},p:J,d(n){n&&(d(l),d(t))}}}function Yl(o){let e,l,t;function n(s){o[22](s,o[30])}let r={$$slots:{default:[mm]},$$scope:{ctx:o}};return o[7][o[30]]!==void 0&&(r.checked=o[7][o[30]]),e=new Ee({props:r}),z.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f[1]&64&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&8320&&(l=!0,i.checked=o[7][o[30]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function _m(o){let e,l,t=_e(o[13]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Yl(Ul(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=he()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f[0]&8320){t=_e(s[13]);let i;for(i=0;i<t.length;i+=1){const a=Ul(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Yl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(ve(),i=t.length;i<n.length;i+=1)r(i);ke()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),He(n,s)}}}function gm(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[_m]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n[0]&128|n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function dm(o){let e;return{c(){e=y("Done")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function hm(o){let e,l,t,n,r=o[10].interventions.toLocaleString()+"",s,f,i,a,u=o[9].size.toLocaleString()+"",c,p,h,k,C,T=Jl(o[10].totalLength).toFixed(1)+"",I,O,N,R,j,M,H,P,F,W;R=new We({props:{$$slots:{default:[rm]},$$scope:{ctx:o}}}),R.$on("click",o[14]);const ue=[sm,om],D=[];function x(Z,ce){return Z[3]=="ATF"?0:1}return M=x(o),H=D[M]=ue[M](o),F=new Po({props:{$$slots:{default:[dm]},$$scope:{ctx:o}}}),F.$on("click",o[27]),{c(){e=S("p"),e.textContent="Showing:",l=L(),t=S("ul"),n=S("li"),s=y(r),f=y(" interventions"),i=L(),a=S("li"),c=y(u),p=y(" schemes"),h=L(),k=S("li"),C=y("total route length of "),I=y(T),O=y(" miles"),N=L(),w(R.$$.fragment),j=L(),H.c(),P=L(),w(F.$$.fragment)},m(Z,ce){g(Z,e,ce),g(Z,l,ce),g(Z,t,ce),$(t,n),$(n,s),$(n,f),$(t,i),$(t,a),$(a,c),$(a,p),$(t,h),$(t,k),$(k,C),$(k,I),$(k,O),g(Z,N,ce),b(R,Z,ce),g(Z,j,ce),D[M].m(Z,ce),g(Z,P,ce),b(F,Z,ce),W=!0},p(Z,ce){(!W||ce[0]&1024)&&r!==(r=Z[10].interventions.toLocaleString()+"")&&G(s,r),(!W||ce[0]&512)&&u!==(u=Z[9].size.toLocaleString()+"")&&G(c,u),(!W||ce[0]&1024)&&T!==(T=Jl(Z[10].totalLength).toFixed(1)+"")&&G(I,T);const Le={};ce[1]&64&&(Le.$$scope={dirty:ce,ctx:Z}),R.$set(Le);let le=M;M=x(Z),M===le?D[M].p(Z,ce):(ve(),_(D[le],1,1,()=>{D[le]=null}),ke(),H=D[M],H?H.p(Z,ce):(H=D[M]=ue[M](Z),H.c()),m(H,1),H.m(P.parentNode,P));const Oe={};ce[1]&64&&(Oe.$$scope={dirty:ce,ctx:Z}),F.$set(Oe)},i(Z){W||(m(R.$$.fragment,Z),m(H),m(F.$$.fragment,Z),W=!0)},o(Z){_(R.$$.fragment,Z),_(H),_(F.$$.fragment,Z),W=!1},d(Z){Z&&(d(e),d(l),d(t),d(N),d(j),d(P)),v(R,Z),D[M].d(Z),v(F,Z)}}}function wm(o){let e,l,t,n,r;e=new We({props:{$$slots:{default:[lm]},$$scope:{ctx:o}}}),e.$on("click",o[15]);function s(i){o[28](i)}let f={title:`Filter ${o[3]} schemes`,$$slots:{default:[hm]},$$scope:{ctx:o}};return o[8]!==void 0&&(f.open=o[8]),t=new ao({props:f}),z.push(()=>B(t,"open",s)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(i,a){b(e,i,a),g(i,l,a),b(t,i,a),r=!0},p(i,a){const u={};a[1]&64&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a[0]&8&&(c.title=`Filter ${i[3]} schemes`),a[0]&4095|a[1]&64&&(c.$$scope={dirty:a,ctx:i}),!n&&a[0]&256&&(n=!0,c.open=i[8],U(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),r=!1},d(i){i&&d(l),v(e,i),v(t,i)}}}function bm(o){var t;let e=new Set;for(let n of Object.values(o.schemes))(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Jl(o){return o*621371e-9}function $n(o){let e=[];for(let l of Object.values(o.schemes))e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function vm(o,e,l){let t,{source:n}=e,{schemesGj:r}=e,{filterSchemeText:s}=e,{filterInterventionText:f}=e,i=!1,a=new Set,u={interventions:0,totalLength:0},c=Object.keys(Cn).map(le=>[le,le]),p="",h=Object.fromEntries(Object.keys(Xt).map(le=>[le,!0])),k="",C=[["route","Routes"],["area","Areas"],["crossing","Crossings"],["other","Other"]],T=Object.fromEntries(C.map(([le,Oe])=>[le,!0]));function I(le,Oe,tt,pt,mt,ot){let Ye=le.toLowerCase(),st=Oe.toLowerCase(),_t=de=>{var E,dt,Be,Ue;if(Ye&&!((E=de.properties.name)!=null&&E.toLowerCase().includes(Ye))&&!((dt=de.properties.description)!=null&&dt.toLowerCase().includes(Ye)))return!1;let je=r.schemes[de.properties.scheme_reference];return!(tt&&((Be=je.browse)==null?void 0:Be.authority_or_region)!=tt||n=="ATF"&&je.browse.funding_programme&&!pt[je.browse.funding_programme]||mt&&((Ue=je.browse)==null?void 0:Ue.current_milestone)!=mt||st&&!je.scheme_reference.toLowerCase().includes(st)&&!(je.scheme_name??"").toLowerCase().includes(st))};l(9,a=new Set(r.features.filter(_t).map(de=>de.properties.scheme_reference))),l(10,u={interventions:0,totalLength:0});let gt=de=>{var je,E;return!(!a.has(de.properties.scheme_reference)||Ye&&!((je=de.properties.name)!=null&&je.toLowerCase().includes(Ye))&&!((E=de.properties.description)!=null&&E.toLowerCase().includes(Ye))||n=="ATF"&&!ot[de.properties.intervention_type])};for(let de of r.features)gt(de)?(delete de.properties.hide_while_editing,l(10,u.interventions++,u),de.geometry.type=="LineString"&&de.properties.length_meters&&l(10,u.totalLength+=de.properties.length_meters,u)):de.properties.hide_while_editing=!0;l(0,r),l(10,u)}function O(){l(4,p=""),l(5,h=Object.fromEntries(Object.keys(Xt).map(le=>[le,!0]))),l(6,k=""),l(2,f=""),l(1,s="")}const N=()=>l(8,i=!0);function R(){f=this.value,l(2,f)}const j=()=>l(2,f="");function M(le){s=le,l(1,s)}function H(le){p=le,l(4,p)}function P(le){k=le,l(6,k)}function F(le,Oe){o.$$.not_equal(h[Oe],le)&&(h[Oe]=le,l(5,h))}function W(le,Oe){o.$$.not_equal(T[Oe],le)&&(T[Oe]=le,l(7,T))}function ue(){f=this.value,l(2,f)}const D=()=>l(2,f="");function x(le){s=le,l(1,s)}function Z(le){p=le,l(4,p)}const ce=()=>l(8,i=!1);function Le(le){i=le,l(8,i)}return o.$$set=le=>{"source"in le&&l(3,n=le.source),"schemesGj"in le&&l(0,r=le.schemesGj),"filterSchemeText"in le&&l(1,s=le.filterSchemeText),"filterInterventionText"in le&&l(2,f=le.filterInterventionText)},o.$$.update=()=>{o.$$.dirty[0]&1&&l(11,t=bm(r)),o.$$.dirty[0]&246&&I(f,s,p,h,k,T)},[r,s,f,n,p,h,k,T,i,a,u,t,c,C,O,N,R,j,M,H,P,F,W,ue,D,x,Z,ce,Le]}class Rn extends V{constructor(e){super(),K(this,e,vm,wm,Q,{source:3,schemesGj:0,filterSchemeText:1,filterInterventionText:2},null,[-1,-1])}}function Ql(o){let e,l,t,n=o[0].budget.toLocaleString()+"",r,s;return{c(){e=S("p"),l=S("b"),l.textContent="Cost",t=y(`
    : `),r=y(n),s=y(`
    GBP`)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r),$(e,s)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&G(r,n)},d(f){f&&d(e)}}}function Vl(o){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Kl(o){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Zl(o){let e,l,t,n;return{c(){e=S("p"),l=S("b"),l.textContent="Funding sources",t=y(`
    : `),n=y(o[1])},m(r,s){g(r,e,s),$(e,l),$(e,t),$(e,n)},p(r,s){s&2&&G(n,r[1])},d(r){r&&d(e)}}}function km(o){let e,l,t,n,r=o[0].budget&&Ql(o),s=o[0].development_funded&&Vl(),f=o[0].construction_funded&&Kl(),i=o[1]&&Zl(o);return{c(){r&&r.c(),e=L(),s&&s.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=he()},m(a,u){r&&r.m(a,u),g(a,e,u),s&&s.m(a,u),g(a,l,u),f&&f.m(a,u),g(a,t,u),i&&i.m(a,u),g(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=Ql(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=Vl(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=Kl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=Zl(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:J,o:J,d(a){a&&(d(e),d(l),d(t),d(n)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function ym(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function Sm(o,e,l){let t,{props:n}=e;return o.$$set=r=>{"props"in r&&l(0,n=r.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=ym(n))},[n,t]}class Yr extends V{constructor(e){super(),K(this,e,Sm,km,Q,{props:0})}}function Xl(o){let e,l,t,n=o[0].status+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Status",t=y(`
    : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].status+"")&&G(r,n)},d(s){s&&d(e)}}}function xl(o){let e,l,t,n=o[0].timescale+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Timescale",t=y(`
    : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale+"")&&G(r,n)},d(s){s&&d(e)}}}function er(o){let e,l,t,n=o[0].timescale_year+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Estimated completion year",t=y(`
    : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale_year+"")&&G(r,n)},d(s){s&&d(e)}}}function tr(o){let e,l,t,n=o[0].year_published+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently published",t=y(`
    : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_published+"")&&G(r,n)},d(s){s&&d(e)}}}function nr(o){let e,l,t,n=o[0].year_consulted+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently consulted on",t=y(`
    : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_consulted+"")&&G(r,n)},d(s){s&&d(e)}}}function Tm(o){let e,l,t,n,r,s=o[0].status&&Xl(o),f=o[0].timescale&&xl(o),i=o[0].timescale_year&&er(o),a=o[0].year_published&&tr(o),u=o[0].year_consulted&&nr(o);return{c(){s&&s.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=he()},m(c,p){s&&s.m(c,p),g(c,e,p),f&&f.m(c,p),g(c,l,p),i&&i.m(c,p),g(c,t,p),a&&a.m(c,p),g(c,n,p),u&&u.m(c,p),g(c,r,p)},p(c,[p]){c[0].status?s?s.p(c,p):(s=Xl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,p):(f=xl(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,p):(i=er(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,p):(a=tr(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,p):(u=nr(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:J,o:J,d(c){c&&(d(e),d(l),d(t),d(n),d(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function Cm(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Jr extends V{constructor(e){super(),K(this,e,Cm,Tm,Q,{props:0})}}function mn(o){const e=o.slice(),l=e[5].pipeline;return e[11]=l,e}function _n(o){const e=o.slice(),l=JSON.parse(e[1].v2);return e[11]=l,e}function gn(o){const e=o.slice(),l=JSON.parse(e[1].pipeline);return e[11]=l,e}function lr(o){let e,l,t,n=Jn(o[1].length_meters)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Length",t=y(`
        : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=Jn(s[1].length_meters)+"")&&G(r,n)},d(s){s&&d(e)}}}function rr(o){let e,l=it(o[1].description,o[3])+"";return{c(){e=S("p")},m(t,n){g(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=it(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&d(e)}}}function or(o){let e,l,t,n,r,s,f,i=o[11].atf4_type&&sr(o),a=o[11].accuracy&&ir(o),u=o[11].is_alternative&&ar();return n=new Yr({props:{props:o[11]}}),s=new Jr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,p){i&&i.m(c,p),g(c,e,p),a&&a.m(c,p),g(c,l,p),u&&u.m(c,p),g(c,t,p),b(n,c,p),g(c,r,p),b(s,c,p),f=!0},p(c,p){c[11].atf4_type?i?i.p(c,p):(i=sr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].accuracy?a?a.p(c,p):(a=ir(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].is_alternative?u||(u=ar(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const h={};p&2&&(h.props=c[11]),n.$set(h);const k={};p&2&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(d(e),d(l),d(t),d(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function sr(o){let e,l,t,n=o[11].atf4_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 type",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].atf4_type+"")&&G(r,n)},d(s){s&&d(e)}}}function ir(o){let e,l,t,n=o[11].accuracy+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Accuracy",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].accuracy+"")&&G(r,n)},d(s){s&&d(e)}}}function ar(o){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function fr(o){let e,l,t,n=o[11].intervention_type&&ur(o),r=o[11].work_type&&cr(o),s=o[11].intended_uses&&$r(o);return{c(){n&&n.c(),e=L(),r&&r.c(),l=L(),s&&s.c(),t=he()},m(f,i){n&&n.m(f,i),g(f,e,i),r&&r.m(f,i),g(f,l,i),s&&s.m(f,i),g(f,t,i)},p(f,i){f[11].intervention_type?n?n.p(f,i):(n=ur(f),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),f[11].work_type?r?r.p(f,i):(r=cr(f),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null),f[11].intended_uses?s?s.p(f,i):(s=$r(f),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(f){f&&(d(e),d(l),d(t)),n&&n.d(f),r&&r.d(f),s&&s.d(f)}}}function ur(o){let e,l,t,n=o[11].intervention_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Type",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].intervention_type+"")&&G(r,n)},d(s){s&&d(e)}}}function cr(o){let e,l,t,n=o[11].work_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="What kind of infrastructure is mapped",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].work_type+"")&&G(r,n)},d(s){s&&d(e)}}}function $r(o){let e,l,t,n=o[11].intended_uses+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Intended uses",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].intended_uses+"")&&G(r,n)},d(s){s&&d(e)}}}function pr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Capital scheme ID",t=y(`
        : `),r=y(n)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&G(r,n)},d(f){f&&d(e)}}}function mr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.funding_programme)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Funding programme",t=y(`
        : `),r=y(n)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&G(r,n)},d(f){f&&d(e)}}}function _r(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Current milestone",t=y(`
        : `),r=y(n)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&G(r,n)},d(f){f&&d(e)}}}function gr(o){let e,l,t,n,r,s,f,i=o[11].scheme_type&&dr(o),a=o[11].atf4_lead_type&&hr(o),u=o[11].scheme_description&&wr(o);return n=new Yr({props:{props:o[11]}}),s=new Jr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,p){i&&i.m(c,p),g(c,e,p),a&&a.m(c,p),g(c,l,p),u&&u.m(c,p),g(c,t,p),b(n,c,p),g(c,r,p),b(s,c,p),f=!0},p(c,p){c[11].scheme_type?i?i.p(c,p):(i=dr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].atf4_lead_type?a?a.p(c,p):(a=hr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].scheme_description?u?u.p(c,p):(u=wr(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const h={};p&32&&(h.props=c[11]),n.$set(h);const k={};p&32&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(d(e),d(l),d(t),d(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function dr(o){let e,l,t,n=o[11].scheme_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme type",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_type+"")&&G(r,n)},d(s){s&&d(e)}}}function hr(o){let e,l,t,n=o[11].atf4_lead_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 lead type",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].atf4_lead_type+"")&&G(r,n)},d(s){s&&d(e)}}}function wr(o){let e,l,t,n=o[11].scheme_description+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Descripton",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_description+"")&&G(r,n)},d(s){s&&d(e)}}}function Lm(o){let e;return{c(){e=y("Edit a copy of this scheme")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Im(o){let e;return{c(){e=y("Edit your existing version of this scheme")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Om(o){let e;function l(r,s){var f;return(f=r[5].browse)!=null&&f.local_filename?Im:Lm}let t=l(o),n=t(o);return{c(){n.c(),e=he()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function Mm(o){let e;return{c(){e=y("Zoom to show entire scheme")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function br(o){var Pn,Dn,An,Gn;let e,l,t,n,r,s,f,i=it(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,p,h,k,C,T,I,O,N,R,j,M,H,P,F,W,ue=it(o[5].scheme_name??"",o[2])+"",D,x,Z,ce,Le,le=it(o[1].scheme_reference,o[2])+"",Oe,tt,pt,mt,ot=((Pn=o[5].browse)==null?void 0:Pn.authority_or_region)+"",Ye,st,_t,gt,de,je,E,dt,Be,Ue,Fe=o[1].length_meters&&lr(o),Pe=o[1].description&&rr(o),Se=o[1].pipeline&&or(gn(o)),De=o[1].v2&&fr(_n(o)),Ae=((Dn=o[5].browse)==null?void 0:Dn.capital_scheme_id)&&pr(o),Ge=((An=o[5].browse)==null?void 0:An.funding_programme)&&mr(o),qe=((Gn=o[5].browse)==null?void 0:Gn.current_milestone)&&_r(o),Te=o[5].pipeline&&gr(mn(o));return E=new We({props:{$$slots:{default:[Om]},$$scope:{ctx:o}}}),E.$on("click",o[7]),Be=new We({props:{$$slots:{default:[Mm]},$$scope:{ctx:o}}}),Be.$on("click",o[6]),{c(){e=S("div"),l=S("h2"),l.textContent="Intervention",t=L(),n=S("p"),r=S("b"),r.textContent="Name",s=y(`
      : `),f=new zt(!1),a=y(" ("),c=y(u),p=y(")"),h=L(),Fe&&Fe.c(),k=L(),Pe&&Pe.c(),C=L(),Se&&Se.c(),T=L(),De&&De.c(),I=L(),O=S("hr"),N=L(),R=S("h2"),j=y(o[0]),M=L(),H=S("p"),P=S("b"),P.textContent="Scheme name",F=y(`
      : `),W=new zt(!1),D=L(),x=S("p"),Z=S("b"),Z.textContent="Scheme reference",ce=y(`
      : `),Le=new zt(!1),Oe=L(),tt=S("p"),pt=S("b"),pt.textContent="Authority or region",mt=y(`
      : `),Ye=y(ot),st=L(),Ae&&Ae.c(),_t=L(),Ge&&Ge.c(),gt=L(),qe&&qe.c(),de=L(),Te&&Te.c(),je=L(),w(E.$$.fragment),dt=L(),w(Be.$$.fragment),f.a=a,W.a=null,Le.a=null,se(e,"max-width","30vw"),se(e,"max-height","60vh"),se(e,"overflow","auto")},m(ie,we){g(ie,e,we),$(e,l),$(e,t),$(e,n),$(n,r),$(n,s),f.m(i,n),$(n,a),$(n,c),$(n,p),$(e,h),Fe&&Fe.m(e,null),$(e,k),Pe&&Pe.m(e,null),$(e,C),Se&&Se.m(e,null),$(e,T),De&&De.m(e,null),$(e,I),$(e,O),$(e,N),$(e,R),$(R,j),$(e,M),$(e,H),$(H,P),$(H,F),W.m(ue,H),$(e,D),$(e,x),$(x,Z),$(x,ce),Le.m(le,x),$(e,Oe),$(e,tt),$(tt,pt),$(tt,mt),$(tt,Ye),$(e,st),Ae&&Ae.m(e,null),$(e,_t),Ge&&Ge.m(e,null),$(e,gt),qe&&qe.m(e,null),$(e,de),Te&&Te.m(e,null),$(e,je),b(E,e,null),$(e,dt),b(Be,e,null),o[9](e),Ue=!0},p(ie,we){var zn,Bn,Un,En;(!Ue||we&10)&&i!==(i=it(ie[1].name,ie[3])+"")&&f.p(i),(!Ue||we&2)&&u!==(u=ie[1].intervention_type+"")&&G(c,u),ie[1].length_meters?Fe?Fe.p(ie,we):(Fe=lr(ie),Fe.c(),Fe.m(e,k)):Fe&&(Fe.d(1),Fe=null),ie[1].description?Pe?Pe.p(ie,we):(Pe=rr(ie),Pe.c(),Pe.m(e,C)):Pe&&(Pe.d(1),Pe=null),ie[1].pipeline?Se?(Se.p(gn(ie),we),we&2&&m(Se,1)):(Se=or(gn(ie)),Se.c(),m(Se,1),Se.m(e,T)):Se&&(ve(),_(Se,1,1,()=>{Se=null}),ke()),ie[1].v2?De?De.p(_n(ie),we):(De=fr(_n(ie)),De.c(),De.m(e,I)):De&&(De.d(1),De=null),(!Ue||we&1)&&G(j,ie[0]),(!Ue||we&36)&&ue!==(ue=it(ie[5].scheme_name??"",ie[2])+"")&&W.p(ue),(!Ue||we&6)&&le!==(le=it(ie[1].scheme_reference,ie[2])+"")&&Le.p(le),(!Ue||we&32)&&ot!==(ot=((zn=ie[5].browse)==null?void 0:zn.authority_or_region)+"")&&G(Ye,ot),(Bn=ie[5].browse)!=null&&Bn.capital_scheme_id?Ae?Ae.p(ie,we):(Ae=pr(ie),Ae.c(),Ae.m(e,_t)):Ae&&(Ae.d(1),Ae=null),(Un=ie[5].browse)!=null&&Un.funding_programme?Ge?Ge.p(ie,we):(Ge=mr(ie),Ge.c(),Ge.m(e,gt)):Ge&&(Ge.d(1),Ge=null),(En=ie[5].browse)!=null&&En.current_milestone?qe?qe.p(ie,we):(qe=_r(ie),qe.c(),qe.m(e,de)):qe&&(qe.d(1),qe=null),ie[5].pipeline?Te?(Te.p(mn(ie),we),we&32&&m(Te,1)):(Te=gr(mn(ie)),Te.c(),m(Te,1),Te.m(e,je)):Te&&(ve(),_(Te,1,1,()=>{Te=null}),ke());const qn={};we&4128&&(qn.$$scope={dirty:we,ctx:ie}),E.$set(qn);const Hn={};we&4096&&(Hn.$$scope={dirty:we,ctx:ie}),Be.$set(Hn)},i(ie){Ue||(m(Se),m(Te),m(E.$$.fragment,ie),m(Be.$$.fragment,ie),Ue=!0)},o(ie){_(Se),_(Te),_(E.$$.fragment,ie),_(Be.$$.fragment,ie),Ue=!1},d(ie){ie&&d(e),Fe&&Fe.d(),Pe&&Pe.d(),Se&&Se.d(),De&&De.d(),Ae&&Ae.d(),Ge&&Ge.d(),qe&&qe.d(),Te&&Te.d(),v(E),v(Be),o[9](null)}}}function jm(o){let e=o[1],l,t,n=br(o);return{c(){n.c(),l=he()},m(r,s){n.m(r,s),g(r,l,s),t=!0},p(r,[s]){s&2&&Q(e,e=r[1])?(ve(),_(n,1,1,J),ke(),n=br(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n.d(r)}}}function it(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function Nm(o,e,l){let t,n;Y(o,pn,k=>l(10,n=k));let{description:r}=e,{props:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,u;no(()=>{u&&l(4,u.scrollTop=0,u)});function c(){let k={type:"FeatureCollection",features:f.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(Hr(k),{padding:20,animate:!1})}function p(){var I,O,N;let k={type:"FeatureCollection",features:f.features.filter(R=>R.properties.scheme_reference==t.scheme_reference),schemes:{}};k.schemes[t.scheme_reference]=t;let C=(I=t.browse)==null?void 0:I.authority_or_region;if(!C){window.alert("This scheme has no authority specified, you can't edit this");return}let T=t.pipeline?"pipeline":t.v2?"v2":"v1";if((O=t.browse)!=null&&O.local_filename)window.open(Zn(C,(N=t.browse)==null?void 0:N.local_filename,T),"_blank");else{let R=`browse_copy_${t.scheme_reference}`,j=jo(C,k);for(let M of j.features)delete M.properties.funding_programme,delete M.properties.current_milestone;No(Ro(C,R),JSON.stringify(j)),window.open(Zn(C,R,T),"_blank")}}function h(k){z[k?"unshift":"push"](()=>{u=k,l(4,u)})}return o.$$set=k=>{"description"in k&&l(0,r=k.description),"props"in k&&l(1,s=k.props),"schemesGj"in k&&l(8,f=k.schemesGj),"filterSchemeText"in k&&l(2,i=k.filterSchemeText),"filterInterventionText"in k&&l(3,a=k.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=f.schemes[s.scheme_reference])},[r,s,i,a,u,t,c,p,f,h]}class Fn extends V{constructor(e){super(),K(this,e,Nm,jm,Q,{description:0,props:1,schemesGj:8,filterSchemeText:2,filterInterventionText:3})}}function Rm(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&d(e)}}}function Fm(o){let e,l;return e=new Fn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Pm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Rm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Fm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function Dm(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&d(e)}}}function Am(o){let e,l;return e=new Fn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Gm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Dm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Am,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function qm(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&d(e)}}}function Hm(o){let e,l;return e=new Fn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function zm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[qm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Hm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function Bm(o){let e,l,t,n,r,s,f,i,a,u;const c=[q(`${o[0]}-interventions-points`),{filter:["all",yn,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":Qn,"circle-opacity":ee(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let p={$$slots:{default:[Pm]},$$scope:{ctx:o}};for(let j=0;j<c.length;j+=1)p=X(p,c[j]);e=new ft({props:p});const h=[q(`${o[0]}-interventions-lines`),{filter:["all",kn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":en,"line-opacity":ee(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[Gm]},$$scope:{ctx:o}};for(let j=0;j<h.length;j+=1)k=X(k,h[j]);t=new ge({props:k});const C=[q(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*en,"circle-opacity":0,"circle-stroke-color":nt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[2]?"visible":"none"}}];let T={};for(let j=0;j<C.length;j+=1)T=X(T,C[j]);r=new ft({props:T});const I=[q(`${o[0]}-interventions-polygons`),{filter:["all",on,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":ee(.2,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let O={$$slots:{default:[zm]},$$scope:{ctx:o}};for(let j=0;j<I.length;j+=1)O=X(O,I[j]);f=new Me({props:O});const N=[q(`${o[0]}-interventions-polygons-outlines`),{filter:["all",on,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*en}},{layout:{visibility:o[2]?"visible":"none"}}];let R={};for(let j=0;j<N.length;j+=1)R=X(R,N[j]);return a=new ge({props:R}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(j,M){b(e,j,M),g(j,l,M),b(t,j,M),g(j,n,M),b(r,j,M),g(j,s,M),b(f,j,M),g(j,i,M),b(a,j,M),u=!0},p(j,M){const H=M&837?te(c,[M&1&&oe(q(`${j[0]}-interventions-points`)),M&768&&{filter:["all",yn,j[8],j[9]]},c[2],c[3],M&64&&{paint:{"circle-color":j[6],"circle-radius":Qn,"circle-opacity":ee(1,.5)}},M&4&&{layout:{visibility:j[2]?"visible":"none"}},c[6]]):{};M&2106&&(H.$$scope={dirty:M,ctx:j}),e.$set(H);const P=M&325?te(h,[M&1&&oe(q(`${j[0]}-interventions-lines`)),M&256&&{filter:["all",kn,j[8]]},h[2],h[3],M&64&&{paint:{"line-color":j[6],"line-width":en,"line-opacity":ee(1,.5)}},M&4&&{layout:{visibility:j[2]?"visible":"none"}},h[6]]):{};M&2106&&(P.$$scope={dirty:M,ctx:j}),t.$set(P);const F=M&5?te(C,[M&1&&oe(q(`${j[0]}-interventions-lines-endpoints`)),C[1],C[2],M&4&&{layout:{visibility:j[2]?"visible":"none"}}]):{};r.$set(F);const W=M&325?te(I,[M&1&&oe(q(`${j[0]}-interventions-polygons`)),M&256&&{filter:["all",on,j[8]]},I[2],I[3],M&64&&{paint:{"fill-color":j[6],"fill-opacity":ee(.2,.5)}},M&4&&{layout:{visibility:j[2]?"visible":"none"}},I[6]]):{};M&2106&&(W.$$scope={dirty:M,ctx:j}),f.$set(W);const ue=M&325?te(N,[M&1&&oe(q(`${j[0]}-interventions-polygons-outlines`)),M&256&&{filter:["all",on,j[8]]},M&64&&{paint:{"line-color":j[6],"line-opacity":.5,"line-width":.7*en}},M&4&&{layout:{visibility:j[2]?"visible":"none"}}]):{};a.$set(ue)},i(j){u||(m(e.$$.fragment,j),m(t.$$.fragment,j),m(r.$$.fragment,j),m(f.$$.fragment,j),m(a.$$.fragment,j),u=!0)},o(j){_(e.$$.fragment,j),_(t.$$.fragment,j),_(r.$$.fragment,j),_(f.$$.fragment,j),_(a.$$.fragment,j),u=!1},d(j){j&&(d(l),d(n),d(s),d(i)),v(e,j),v(t,j),v(r,j),v(f,j),v(a,j)}}}function Um(o){let e,l;return e=new ct({props:{data:o[7],$$slots:{default:[Bm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Em(o,e,l){let t,{name:n}=e,{description:r}=e,{show:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],p=["!=",["get","endpoint"],!0];return o.$$set=h=>{"name"in h&&l(0,n=h.name),"description"in h&&l(1,r=h.description),"show"in h&&l(2,s=h.show),"schemesGj"in h&&l(3,f=h.schemesGj),"filterSchemeText"in h&&l(4,i=h.filterSchemeText),"filterInterventionText"in h&&l(5,a=h.filterInterventionText),"color"in h&&l(6,u=h.color)},o.$$.update=()=>{o.$$.dirty&8&&l(7,t=$o(f))},[n,r,s,f,i,a,u,t,c,p]}class dn extends V{constructor(e){super(),K(this,e,Em,Um,Q,{name:0,description:1,show:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function Wm(o){let e;function l(r,s){return r[2]<=100?Qm:Jm}let t=l(o),n=t(o);return{c(){n.c(),e=he()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:J,o:J,d(r){r&&d(e),n.d(r)}}}function Ym(o){let e,l;return e=new We({props:{$$slots:{default:[Vm]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Jm(o){let e;return{c(){e=S("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){g(l,e,t)},p:J,d(l){l&&d(e)}}}function Qm(o){let e,l,t;return{c(){e=S("label"),l=y(`Downloading scheme data
      `),t=S("progress"),t.value=o[2],A(t,"class","svelte-q3473n")},m(n,r){g(n,e,r),$(e,l),$(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&d(e)}}}function Vm(o){let e;return{c(){e=y("Load latest scheme data")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Km(o){let e,l,t,n;const r=[Ym,Wm],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(l=s[e]=r[e](o)),{c(){l&&l.c(),t=he()},m(i,a){~e&&s[e].m(i,a),g(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(l&&(ve(),_(s[u],1,1,()=>{s[u]=null}),ke()),~e?(l=s[e],l?l.p(i,a):(l=s[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){_(l),n=!1},d(i){i&&d(t),~e&&s[e].d(i)}}}function Zm(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await lo(`${xt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,s=c)});l(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}Gr(async()=>{n&&await f()});async function i(){l(0,n=!0),await f();let a=new URL(window.location.href);a.searchParams.delete("disable_schemes"),jn(a)}return o.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,s,i,t]}class Xm extends V{constructor(e){super(),K(this,e,Zm,Km,Q,{loadFile:4})}}const an=Re({type:"FeatureCollection",features:[],schemes:{}}),vr=Re(""),kr=Re(""),hn=Re({type:"FeatureCollection",features:[],schemes:{}}),yr=Re(""),Sr=Re(""),wn=Re({type:"FeatureCollection",features:[],schemes:{}}),Tr=Re(""),Cr=Re("");function Lr(o,e,l){const t=o.slice();return t[42]=e[l],t}function Ir(o,e,l){const t=o.slice();return t[42]=e[l],t}function Or(o,e,l){const t=o.slice();return t[42]=e[l],t}function xm(o){let e,l;return e=new Xm({props:{loadFile:o[24]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:J,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Mr(o){let e,l,t;function n(s){o[31](s)}let r={name:Qr,title:Vr,$$slots:{controls:[t_],help:[e_]},$$scope:{ctx:o}};return o[12]!==void 0&&(r.show=o[12]),e=new fe({props:r}),z.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&57473|f[1]&262144&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&4096&&(l=!0,i.show=s[12],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function jr(o){let e,l,t=o[42]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,s){g(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&8192&&t!==(t=r[42]+"")&&G(n,t)},d(r){r&&d(e)}}}function e_(o){let e,l,t,n,r,s,f;t=new In({props:{text:"Scheme data caveats"}});let i=_e(o[13].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=jr(Or(o,i,u));return{c(){e=S("span"),l=S("p"),w(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();A(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),b(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&8192){i=_e(u[13].notes??[]);let p;for(p=0;p<i.length;p+=1){const h=Or(u,i,p);a[p]?a[p].p(h,c):(a[p]=jr(h),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),He(a,u)}}}function t_(o){let e,l,t,n,r,s,f,i,a,u,c;function p(O){o[27](O)}function h(O){o[28](O)}function k(O){o[29](O)}let C={source:"ATF"};o[13]!==void 0&&(C.schemesGj=o[13]),o[14]!==void 0&&(C.filterSchemeText=o[14]),o[15]!==void 0&&(C.filterInterventionText=o[15]),l=new Rn({props:C}),z.push(()=>B(l,"schemesGj",p)),z.push(()=>B(l,"filterSchemeText",h)),z.push(()=>B(l,"filterInterventionText",k));function T(O){o[30](O)}let I={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(I.value=o[0]),f=new Zt({props:I}),z.push(()=>B(f,"value",T)),u=new $t({props:{rows:o[7]}}),{c(){e=S("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(O,N){g(O,e,N),b(l,e,null),$(e,s),b(f,e,null),$(e,a),b(u,e,null),c=!0},p(O,N){const R={};!t&&N[0]&8192&&(t=!0,R.schemesGj=O[13],U(()=>t=!1)),!n&&N[0]&16384&&(n=!0,R.filterSchemeText=O[14],U(()=>n=!1)),!r&&N[0]&32768&&(r=!0,R.filterInterventionText=O[15],U(()=>r=!1)),l.$set(R);const j={};!i&&N[0]&1&&(i=!0,j.value=O[0],U(()=>i=!1)),f.$set(j);const M={};N[0]&128&&(M.rows=O[7]),u.$set(M)},i(O){c||(m(l.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),c=!0)},o(O){_(l.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),c=!1},d(O){O&&d(e),v(l),v(f),v(u)}}}function Nr(o){let e,l,t;function n(s){o[36](s)}let r={name:Kr,title:Zr,$$slots:{controls:[l_],help:[n_]},$$scope:{ctx:o}};return o[11]!==void 0&&(r.show=o[11]),e=new fe({props:r}),z.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&458786|f[1]&262144&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&2048&&(l=!0,i.show=s[11],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Rr(o){let e,l,t=o[42]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,s){g(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&65536&&t!==(t=r[42]+"")&&G(n,t)},d(r){r&&d(e)}}}function n_(o){let e,l,t,n,r,s,f;t=new In({props:{text:"Scheme data caveats"}});let i=_e(o[16].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Rr(Ir(o,i,u));return{c(){e=S("span"),l=S("p"),w(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();A(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),b(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&65536){i=_e(u[16].notes??[]);let p;for(p=0;p<i.length;p+=1){const h=Ir(u,i,p);a[p]?a[p].p(h,c):(a[p]=Rr(h),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),He(a,u)}}}function l_(o){let e,l,t,n,r,s,f,i,a,u,c;function p(O){o[32](O)}function h(O){o[33](O)}function k(O){o[34](O)}let C={source:"LCWIP"};o[16]!==void 0&&(C.schemesGj=o[16]),o[17]!==void 0&&(C.filterSchemeText=o[17]),o[18]!==void 0&&(C.filterInterventionText=o[18]),l=new Rn({props:C}),z.push(()=>B(l,"schemesGj",p)),z.push(()=>B(l,"filterSchemeText",h)),z.push(()=>B(l,"filterInterventionText",k));function T(O){o[35](O)}let I={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(I.value=o[1]),f=new Zt({props:I}),z.push(()=>B(f,"value",T)),u=new $t({props:{rows:o[5]}}),{c(){e=S("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(O,N){g(O,e,N),b(l,e,null),$(e,s),b(f,e,null),$(e,a),b(u,e,null),c=!0},p(O,N){const R={};!t&&N[0]&65536&&(t=!0,R.schemesGj=O[16],U(()=>t=!1)),!n&&N[0]&131072&&(n=!0,R.filterSchemeText=O[17],U(()=>n=!1)),!r&&N[0]&262144&&(r=!0,R.filterInterventionText=O[18],U(()=>r=!1)),l.$set(R);const j={};!i&&N[0]&2&&(i=!0,j.value=O[1],U(()=>i=!1)),f.$set(j);const M={};N[0]&32&&(M.rows=O[5]),u.$set(M)},i(O){c||(m(l.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),c=!0)},o(O){_(l.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),c=!1},d(O){O&&d(e),v(l),v(f),v(u)}}}function r_(o){let e=Object.entries(o[13].schemes).length>0,l,t=Object.entries(o[16].schemes).length>0,n,r,s=e&&Mr(o),f=t&&Nr(o);return{c(){s&&s.c(),l=L(),f&&f.c(),n=he()},m(i,a){s&&s.m(i,a),g(i,l,a),f&&f.m(i,a),g(i,n,a),r=!0},p(i,a){a[0]&8192&&(e=Object.entries(i[13].schemes).length>0),e?s?(s.p(i,a),a[0]&8192&&m(s,1)):(s=Mr(i),s.c(),m(s,1),s.m(l.parentNode,l)):s&&(ve(),_(s,1,1,()=>{s=null}),ke()),a[0]&65536&&(t=Object.entries(i[16].schemes).length>0),t?f?(f.p(i,a),a[0]&65536&&m(f,1)):(f=Nr(i),f.c(),m(f,1),f.m(n.parentNode,n)):f&&(ve(),_(f,1,1,()=>{f=null}),ke())},i(i){r||(m(s),m(f),r=!0)},o(i){_(s),_(f),r=!1},d(i){i&&(d(l),d(n)),s&&s.d(i),f&&f.d(i)}}}function o_(o){let e;return{c(){e=y("Show your sketches")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Fr(o){let e,l,t;function n(s){o[40](s)}let r={name:Xr,title:xr,$$slots:{controls:[f_],help:[s_]},$$scope:{ctx:o}};return o[10]!==void 0&&(r.show=o[10]),e=new fe({props:r}),z.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&1573384|f[1]&262144&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&1024&&(l=!0,i.show=s[10],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Pr(o){let e,l,t=o[42]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,s){g(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&512&&t!==(t=r[42]+"")&&G(n,t)},d(r){r&&d(e)}}}function s_(o){let e,l,t,n,r,s,f;t=new In({props:{text:"Scheme data caveats"}});let i=_e(o[9].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Pr(Lr(o,i,u));return{c(){e=S("span"),l=S("p"),w(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();A(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),b(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&512){i=_e(u[9].notes??[]);let p;for(p=0;p<i.length;p+=1){const h=Lr(u,i,p);a[p]?a[p].p(h,c):(a[p]=Pr(h),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),He(a,u)}}}function i_(o){let e;return{c(){e=y("Download all schemes")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function a_(o){let e,l,t,n,r,s,f;function i(p){o[37](p)}function a(p){o[38](p)}function u(p){o[39](p)}let c={source:"Local"};return o[9]!==void 0&&(c.schemesGj=o[9]),o[19]!==void 0&&(c.filterSchemeText=o[19]),o[20]!==void 0&&(c.filterInterventionText=o[20]),e=new Rn({props:c}),z.push(()=>B(e,"schemesGj",i)),z.push(()=>B(e,"filterSchemeText",a)),z.push(()=>B(e,"filterInterventionText",u)),s=new We({props:{$$slots:{default:[i_]},$$scope:{ctx:o}}}),s.$on("click",o[26]),{c(){w(e.$$.fragment),r=L(),w(s.$$.fragment)},m(p,h){b(e,p,h),g(p,r,h),b(s,p,h),f=!0},p(p,h){const k={};!l&&h[0]&512&&(l=!0,k.schemesGj=p[9],U(()=>l=!1)),!t&&h[0]&524288&&(t=!0,k.filterSchemeText=p[19],U(()=>t=!1)),!n&&h[0]&1048576&&(n=!0,k.filterInterventionText=p[20],U(()=>n=!1)),e.$set(k);const C={};h[1]&262144&&(C.$$scope={dirty:h,ctx:p}),s.$set(C)},i(p){f||(m(e.$$.fragment,p),m(s.$$.fragment,p),f=!0)},o(p){_(e.$$.fragment,p),_(s.$$.fragment,p),f=!1},d(p){p&&d(r),v(e,p),v(s,p)}}}function f_(o){let e,l,t,n,r;return l=new Oo({props:{$$slots:{default:[a_]},$$scope:{ctx:o}}}),n=new $t({props:{rows:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),A(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(s,f){g(s,e,f),b(l,e,null),$(e,t),b(n,e,null),r=!0},p(s,f){const i={};f[0]&1573376|f[1]&262144&&(i.$$scope={dirty:f,ctx:s}),l.$set(i);const a={};f[0]&8&&(a.rows=s[3]),n.$set(a)},i(s){r||(m(l.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(l),v(n)}}}function u_(o){let e=Object.entries(o[9].schemes).length>0,l,t,n=e&&Fr(o);return{c(){n&&n.c(),l=he()},m(r,s){n&&n.m(r,s),g(r,l,s),t=!0},p(r,s){s[0]&512&&(e=Object.entries(r[9].schemes).length>0),e?n?(n.p(r,s),s[0]&512&&m(n,1)):(n=Fr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n&&(ve(),_(n,1,1,()=>{n=null}),ke())},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n&&n.d(r)}}}function c_(o){let e=qr()=="Private (development)",l,t,n,r,s,f,i,a,u,c,p,h,k,C=e&&xm(o);return t=new Ne({props:{small:!0,$$slots:{default:[r_]},$$scope:{ctx:o}}}),r=new Br({props:{label:"Load schemes from GeoJSON",onLoad:o[24]}}),f=new Io({props:{errorMessage:o[2]}}),c=new We({props:{$$slots:{default:[o_]},$$scope:{ctx:o}}}),c.$on("click",o[25]),h=new Ne({props:{small:!0,$$slots:{default:[u_]},$$scope:{ctx:o}}}),{c(){C&&C.c(),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),a=S("hr"),u=L(),w(c.$$.fragment),p=L(),w(h.$$.fragment)},m(T,I){C&&C.m(T,I),g(T,l,I),b(t,T,I),g(T,n,I),b(r,T,I),g(T,s,I),b(f,T,I),g(T,i,I),g(T,a,I),g(T,u,I),b(c,T,I),g(T,p,I),b(h,T,I),k=!0},p(T,I){e&&C.p(T,I);const O={};I[0]&522403|I[1]&262144&&(O.$$scope={dirty:I,ctx:T}),t.$set(O);const N={};I[0]&4&&(N.errorMessage=T[2]),f.$set(N);const R={};I[1]&262144&&(R.$$scope={dirty:I,ctx:T}),c.$set(R);const j={};I[0]&1574408|I[1]&262144&&(j.$$scope={dirty:I,ctx:T}),h.$set(j)},i(T){k||(m(C),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(c.$$.fragment,T),m(h.$$.fragment,T),k=!0)},o(T){_(C),_(t.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),_(c.$$.fragment,T),_(h.$$.fragment,T),k=!1},d(T){T&&(d(l),d(n),d(s),d(i),d(a),d(u),d(p)),C&&C.d(T),v(t,T),v(r,T),v(f,T),v(c,T),v(h,T)}}}function $_(o){let e,l,t,n,r,s,f,i;return e=new lt({props:{label:"Schemes",open:!0,$$slots:{default:[c_]},$$scope:{ctx:o}}}),t=new dn({props:{name:"atf",description:Vr,show:o[12],schemesGj:o[13],filterSchemeText:o[14],filterInterventionText:o[15],color:o[8]}}),r=new dn({props:{name:"lcwip",description:Zr,show:o[11],schemesGj:o[16],filterSchemeText:o[17],filterInterventionText:o[18],color:o[6]}}),f=new dn({props:{name:"local",description:xr,show:o[10],schemesGj:o[9],filterSchemeText:o[19],filterInterventionText:o[20],color:o[4]}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),g(a,n,u),b(r,a,u),g(a,s,u),b(f,a,u),i=!0},p(a,u){const c={};u[0]&2096815|u[1]&262144&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p={};u[0]&4096&&(p.show=a[12]),u[0]&8192&&(p.schemesGj=a[13]),u[0]&16384&&(p.filterSchemeText=a[14]),u[0]&32768&&(p.filterInterventionText=a[15]),u[0]&256&&(p.color=a[8]),t.$set(p);const h={};u[0]&2048&&(h.show=a[11]),u[0]&65536&&(h.schemesGj=a[16]),u[0]&131072&&(h.filterSchemeText=a[17]),u[0]&262144&&(h.filterInterventionText=a[18]),u[0]&64&&(h.color=a[6]),r.$set(h);const k={};u[0]&1024&&(k.show=a[10]),u[0]&512&&(k.schemesGj=a[9]),u[0]&524288&&(k.filterSchemeText=a[19]),u[0]&1048576&&(k.filterInterventionText=a[20]),u[0]&16&&(k.color=a[4]),f.$set(k)},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(d(l),d(n),d(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}let Qr="atf_schemes",Vr="ATF schemes",Kr="lcwip_schemes",Zr="LCWIP schemes",Xr="local_schemes",xr="Your schemes";function p_(o,e,l){let t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,O,N,R;Y(o,wn,E=>l(9,a=E)),Y(o,an,E=>l(13,h=E)),Y(o,kr,E=>l(14,k=E)),Y(o,vr,E=>l(15,C=E)),Y(o,hn,E=>l(16,T=E)),Y(o,Sr,E=>l(17,I=E)),Y(o,yr,E=>l(18,O=E)),Y(o,Cr,E=>l(19,N=E)),Y(o,Tr,E=>l(20,R=E));let j="",M=$e(Qr);Y(o,M,E=>l(12,p=E));let H="fundingProgramme",P=$e(Kr);Y(o,P,E=>l(11,c=E));let F="interventionType",W=$e(Xr);Y(o,W,E=>l(10,u=E));function ue(E,dt){try{em(JSON.parse(dt),an,hn),Qt(M,p=!0,p),Qt(P,c=!0,c),l(2,j="")}catch(Be){l(2,j=`The file you loaded is broken: ${Be}`)}}function D(){Qt(wn,a=nm(),a),Qt(W,u=!0,u)}function x(E){return E=="interventionType"?[Xp(),xp()]:E=="fundingProgramme"?[Ie(["get","funding_programme"],Xt,"grey"),Object.entries(Xt)]:E=="currentMilestone"?[Ie(["get","current_milestone"],Cn,"grey"),Object.entries(Cn)]:["red",[]]}function Z(){Fo("all_your_schemes.geojson",JSON.stringify(a,null,"  "))}function ce(E){h=E,an.set(h)}function Le(E){k=E,kr.set(k)}function le(E){C=E,vr.set(C)}function Oe(E){H=E,l(0,H)}function tt(E){p=E,M.set(p)}function pt(E){T=E,hn.set(T)}function mt(E){I=E,Sr.set(I)}function ot(E){O=E,yr.set(O)}function Ye(E){F=E,l(1,F)}function st(E){c=E,P.set(c)}function _t(E){a=E,wn.set(a)}function gt(E){N=E,Cr.set(N)}function de(E){R=E,Tr.set(R)}function je(E){u=E,W.set(u)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(8,[t,n]=x(H),t,(l(7,n),l(0,H))),o.$$.dirty[0]&2&&l(6,[r,s]=x(F),r,(l(5,s),l(1,F)))},l(4,[f,i]=x("interventionType"),f,l(3,i)),[H,F,j,i,f,s,r,n,t,a,u,c,p,h,k,C,T,I,O,N,R,M,P,W,ue,D,Z,ce,Le,le,Oe,tt,pt,mt,ot,Ye,st,_t,gt,de,je]}class m_ extends V{constructor(e){super(),K(this,e,p_,$_,Q,{},null,[-1,-1])}}function __(o){let e,l,t,n,r,s,f,i;return e=new v$({}),t=new j$({}),r=new fp({}),f=new X$({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),g(a,n,u),b(r,a,u),g(a,s,u),b(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(d(l),d(n),d(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function g_(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[__]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function d_(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T;return e=new $f({}),t=new yf({}),r=new xf({}),f=new Uf({}),a=new bc({}),c=new i$({}),h=new Kc({}),C=new zu({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment),u=L(),w(c.$$.fragment),p=L(),w(h.$$.fragment),k=L(),w(C.$$.fragment)},m(I,O){b(e,I,O),g(I,l,O),b(t,I,O),g(I,n,O),b(r,I,O),g(I,s,O),b(f,I,O),g(I,i,O),b(a,I,O),g(I,u,O),b(c,I,O),g(I,p,O),b(h,I,O),g(I,k,O),b(C,I,O),T=!0},i(I){T||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(r.$$.fragment,I),m(f.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(h.$$.fragment,I),m(C.$$.fragment,I),T=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(r.$$.fragment,I),_(f.$$.fragment,I),_(a.$$.fragment,I),_(c.$$.fragment,I),_(h.$$.fragment,I),_(C.$$.fragment,I),T=!1},d(I){I&&(d(l),d(n),d(s),d(i),d(u),d(p),d(k)),v(e,I),v(t,I),v(r,I),v(f,I),v(a,I),v(c,I),v(h,I),v(C,I)}}}function h_(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[d_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function w_(o){let e,l,t,n,r,s;return e=new Za({}),t=new Ic({}),r=new Gc({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){b(e,f,i),g(f,l,i),b(t,f,i),g(f,n,i),b(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n)),v(e,f),v(t,f),v(r,f)}}}function b_(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[w_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function v_(o){let e,l,t,n,r,s,f,i,a,u;return e=new sa({}),t=new Aa({}),r=new si({}),f=new Ii({}),a=new Bi({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,p){b(e,c,p),g(c,l,p),b(t,c,p),g(c,n,p),b(r,c,p),g(c,s,p),b(f,c,p),g(c,i,p),b(a,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(d(l),d(n),d(s),d(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function k_(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[v_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function y_(o){let e,l,t,n,r,s;return e=new Vs({}),t=new di({}),r=new Ca({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){b(e,f,i),g(f,l,i),b(t,f,i),g(f,n,i),b(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n)),v(e,f),v(t,f),v(r,f)}}}function S_(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[y_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function T_(o){let e,l,t,n,r,s,f,i,a,u;return e=new Vi({}),t=new uc({}),r=new $u({}),f=new ec({}),a=new z$({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,p){b(e,c,p),g(c,l,p),b(t,c,p),g(c,n,p),b(r,c,p),g(c,s,p),b(f,c,p),g(c,i,p),b(a,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(d(l),d(n),d(s),d(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function C_(o){let e,l,t,n,r,s,f,i,a=qr()=="Private (development)",u,c,p,h,k;e=new Zp({}),t=new Lp({}),r=new Iu({}),f=new Rf({});let C=a&&T_();return c=new ga({}),h=new qp({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),C&&C.c(),u=L(),w(c.$$.fragment),p=L(),w(h.$$.fragment)},m(T,I){b(e,T,I),g(T,l,I),b(t,T,I),g(T,n,I),b(r,T,I),g(T,s,I),b(f,T,I),g(T,i,I),C&&C.m(T,I),g(T,u,I),b(c,T,I),g(T,p,I),b(h,T,I),k=!0},p:J,i(T){k||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(C),m(c.$$.fragment,T),m(h.$$.fragment,T),k=!0)},o(T){_(e.$$.fragment,T),_(t.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),_(C),_(c.$$.fragment,T),_(h.$$.fragment,T),k=!1},d(T){T&&(d(l),d(n),d(s),d(i),d(u),d(p)),v(e,T),v(t,T),v(r,T),v(f,T),C&&C.d(T),v(c,T),v(h,T)}}}function L_(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[C_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function I_(o){let e,l,t,n,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new mo({props:f}),z.push(()=>B(e,"enabled",s)),n=new os({}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],U(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}function O_(o){let e,l;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Me({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&2?te(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function M_(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,O,N,R,j;return l=new m_({}),n=new lt({props:{label:"Trip generators",$$slots:{default:[g_]},$$scope:{ctx:o}}}),s=new lt({props:{label:"Existing infrastructure",$$slots:{default:[h_]},$$scope:{ctx:o}}}),i=new lt({props:{label:"Public transport",$$slots:{default:[b_]},$$scope:{ctx:o}}}),u=new lt({props:{label:"Boundaries",$$slots:{default:[k_]},$$scope:{ctx:o}}}),p=new lt({props:{label:"Census",$$slots:{default:[S_]},$$scope:{ctx:o}}}),k=new lt({props:{label:"Other",$$slots:{default:[L_]},$$scope:{ctx:o}}}),T=new lt({props:{label:"Tools",$$slots:{default:[I_]},$$scope:{ctx:o}}}),O=new po({props:{disabled:!o[1]}}),R=new ct({props:{data:o[4],$$slots:{default:[O_]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment),f=L(),w(i.$$.fragment),a=L(),w(u.$$.fragment),c=L(),w(p.$$.fragment),h=L(),w(k.$$.fragment),C=L(),w(T.$$.fragment),I=L(),w(O.$$.fragment),N=L(),w(R.$$.fragment)},m(M,H){g(M,e,H),b(l,e,null),$(e,t),b(n,e,null),$(e,r),b(s,e,null),$(e,f),b(i,e,null),$(e,a),b(u,e,null),$(e,c),b(p,e,null),$(e,h),b(k,e,null),$(e,C),b(T,e,null),$(e,I),b(O,e,null),o[7](e),g(M,N,H),b(R,M,H),j=!0},p(M,[H]){const P={};H&512&&(P.$$scope={dirty:H,ctx:M}),n.$set(P);const F={};H&512&&(F.$$scope={dirty:H,ctx:M}),s.$set(F);const W={};H&512&&(W.$$scope={dirty:H,ctx:M}),i.$set(W);const ue={};H&512&&(ue.$$scope={dirty:H,ctx:M}),u.$set(ue);const D={};H&512&&(D.$$scope={dirty:H,ctx:M}),p.$set(D);const x={};H&512&&(x.$$scope={dirty:H,ctx:M}),k.$set(x);const Z={};H&521&&(Z.$$scope={dirty:H,ctx:M}),T.$set(Z);const ce={};H&2&&(ce.disabled=!M[1]),O.$set(ce);const Le={};H&514&&(Le.$$scope={dirty:H,ctx:M}),R.$set(Le)},i(M){j||(m(l.$$.fragment,M),m(n.$$.fragment,M),m(s.$$.fragment,M),m(i.$$.fragment,M),m(u.$$.fragment,M),m(p.$$.fragment,M),m(k.$$.fragment,M),m(T.$$.fragment,M),m(O.$$.fragment,M),m(R.$$.fragment,M),j=!0)},o(M){_(l.$$.fragment,M),_(n.$$.fragment,M),_(s.$$.fragment,M),_(i.$$.fragment,M),_(u.$$.fragment,M),_(p.$$.fragment,M),_(k.$$.fragment,M),_(T.$$.fragment,M),_(O.$$.fragment,M),_(R.$$.fragment,M),j=!1},d(M){M&&(d(e),d(N)),v(l),v(n),v(s),v(i),v(u),v(p),v(k),v(T),v(O),o[7](null),v(R,M)}}}const j_="browsepage-querystring";function N_(o,e,l){let t,n,r,s;Y(o,_l,p=>l(1,n=p)),Y(o,Tn,p=>l(2,r=p)),Y(o,pn,p=>l(3,s=p));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:p=>fo(p,ro(vn))};const a=new URLSearchParams(window.location.search);if(!a||a.size===1&&a.keys().next().value=="style"){let p=new URL(window.location.href);const h=window.localStorage.getItem(j_)||"",k=new URLSearchParams(h);for(const[C,T]of k)T==null?p.searchParams.delete(C):p.searchParams.set(C,T);window.history.replaceState(null,"",p.toString())}function u(p){t=p,l(0,t),l(1,n)}function c(p){z[p?"unshift":"push"](()=>{r=p,Tn.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&_l.set(!t)},[t,n,r,s,f,i,u,c]}class R_ extends V{constructor(e){super(),K(this,e,N_,M_,Q,{})}}function F_(o){let e,l,t;return{c(){e=S("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=S("div")},m(n,r){g(n,e,r),g(n,l,r),g(n,t,r),o[3](t)},p:J,i:J,o:J,d(n){n&&(d(e),d(l),d(t)),o[3](null)}}}function P_(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function D_(o,e,l){let t,n;Y(o,Sn,f=>l(1,t=f)),Y(o,tn,f=>l(2,n=f));let r=null;function s(f){z[f?"unshift":"push"](()=>{r=f,l(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&P_(r,n,t)},[r,t,n,s]}class A_ extends V{constructor(e){super(),K(this,e,D_,F_,Q,{})}}function G_(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C;return l=new Mo({}),n=new oo({}),f=new Co({}),p=new us({props:{boundaryGeojson:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),s=S("div"),w(f.$$.fragment),i=L(),a=S("div"),u=S("h1"),u.textContent="Scheme Browser",c=L(),w(p.$$.fragment),h=L(),k=S("div"),se(s,"border-bottom","1px solid #b1b4b6"),se(a,"display","flex"),se(a,"justify-content","space-between"),A(e,"slot","sidebar"),A(e,"class","govuk-prose")},m(T,I){g(T,e,I),b(l,e,null),$(e,t),b(n,e,null),$(e,r),$(e,s),b(f,s,null),$(e,i),$(e,a),$(a,u),$(a,c),b(p,a,null),$(e,h),$(e,k),o[6](k),C=!0},p(T,I){const O={};I&8&&(O.boundaryGeojson=T[3]),p.$set(O)},i(T){C||(m(l.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),m(p.$$.fragment,T),C=!0)},o(T){_(l.$$.fragment,T),_(n.$$.fragment,T),_(f.$$.fragment,T),_(p.$$.fragment,T),C=!1},d(T){T&&d(e),v(l),v(n),v(f),v(p),o[6](null)}}}function Dr(o){let e,l;return e=new R_({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function q_(o){let e,l,t,n;e=new _o({});let r=o[2]&&Dr();return{c(){w(e.$$.fragment),l=L(),r&&r.c(),t=he()},m(s,f){b(e,s,f),g(s,l,f),r&&r.m(s,f),g(s,t,f),n=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=Dr(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(ve(),_(r,1,1,()=>{r=null}),ke())},i(s){n||(m(e.$$.fragment,s),m(r),n=!0)},o(s){_(e.$$.fragment,s),_(r),n=!1},d(s){s&&(d(l),d(t)),v(e,s),r&&r.d(s)}}}function H_(o){let e,l,t;return l=new Lo({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[q_]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","main")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&2&&(s.style=n[1]),r&260&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function z_(o){let e,l,t,n,r;return e=new Bo({props:{$$slots:{main:[H_],sidebar:[G_]},$$scope:{ctx:o}}}),n=new A_({}),{c(){w(e.$$.fragment),l=L(),t=S("div"),w(n.$$.fragment),A(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){b(e,s,f),g(s,l,f),g(s,t,f),b(n,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(e.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&(d(l),d(t)),v(e,s),v(n)}}}function B_(o,e,l){let t,n,r,s,f;Y(o,Tn,c=>l(4,t=c)),Y(o,pn,c=>l(5,n=c)),Y(o,vn,c=>l(1,r=c)),Y(o,Vn,c=>l(2,s=c)),Y(o,an,c=>l(3,f=c)),Gr(()=>{so()});const i=new URLSearchParams(window.location.search);vn.set(i.get("style")||"dataviz");let a;function u(c){z[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&Vn.set(n),o.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,n,u]}class U_ extends V{constructor(e){super(),K(this,e,B_,z_,Q,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new U_({target:document.getElementById("app")});
