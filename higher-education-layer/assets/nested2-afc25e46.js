import{S as J,i as K,s as X,e as T,h as U,$ as ke,j as $,W as re,o as p,aP as nl,b as q,c as W,d as L,g as h,m as b,w as st,l as V,t as _,n as g,p as v,X as Ht,Y as zt,Z as Gt,_ as Ut,a7 as Ne,J as me,K as _e,aQ as Ot,u as k,k as w,D as R,I as Me,N as wn,O as rl,q as ve,P as ll,Q as ol,T as At,U as sl,V as il,aX as Ml,aY as ct,a4 as In,aZ as Nl,aO as Fl,ar as qt,ae as kn,aj as Wt,r as yn,F as $n,a as Dt,v as Qe,aW as Q,a_ as be,a$ as ye,B as x,ah as ee,C as Se,ak as te,b0 as ie,G as It,H as al,aS as jt,ab as Pn,b1 as rn,R as fl,b2 as Ft,E as ul,as as El,f as pn,ag as Dl,aU as Mn,al as jl,am as Nn,an as Fn,ao as Yt,aV as En,L as Rl,M as Bl,y as Hl}from"./index-1f55b32e.js";import{d as tt,j as Tt,C as Re,f as Ke,h as se,l as z,c as xt,k as zl,S as Gl,B as Ul,b as Pt,G as ql}from"./StreetViewTool-06005aa0.js";import{a as ze,F as Wl}from"./Popup-8c1a404e.js";import{P as fe}from"./Popup-be4138c6.js";import{R as Vl,C as nt,Z as Xl}from"./ZoomOutMap-a43cc266.js";import{L as Yl,a as Ql}from"./LineMeasureController-50f63dd4.js";function Jl(l){let e;return{c(){e=T("span"),U(e,"class","svelte-kzgqtg"),ke(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&ke(e,"background",n[0])},i:re,o:re,d(n){n&&p(e)}}}function Kl(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Ce extends J{constructor(e){super(),K(this,e,Kl,Jl,X,{color:0})}}const Zl="/atip/higher-education-layer/assets/help-d011708a.svg";function xl(l){let e,n;const t=l[1].default,r=Ht(t,l,l[4],null);return{c(){e=T("div"),r&&r.c(),U(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&zt(r,t,o,o[4],n?Ut(t,o[4],s,null):Gt(o[4]),null)},i(o){n||(_(r,o),n=!0)},o(o){g(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function eo(l){let e,n,t,r,o,s,f;function i(u){l[3](u)}let a={title:"Help",$$slots:{default:[xl]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new nl({props:a}),q.push(()=>W(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${Zl}" title="Help" alt="Help"/>`,n=L(),h(t.$$.fragment),U(e,"class","svelte-7d9d1l")},m(u,c){$(u,e,c),$(u,n,c),b(t,u,c),o=!0,s||(f=st(e,"click",l[2]),s=!0)},p(u,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:u}),!r&&c&1&&(r=!0,d.open=u[0],V(()=>r=!1)),t.$set(d)},i(u){o||(_(t.$$.fragment,u),o=!0)},o(u){g(t.$$.fragment,u),o=!1},d(u){u&&(p(e),p(n)),v(t,u),s=!1,f()}}}function to(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function f(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,f,r]}class ge extends J{constructor(e){super(),K(this,e,to,eo,X,{})}}function Dn(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function jn(l){let e,n,t,r=l[1]+"",o,s,f;return n=new Ce({props:{color:l[2]}}),{c(){e=T("li"),h(n.$$.fragment),t=L(),o=k(r),s=L()},m(i,a){$(i,e,a),b(n,e,null),w(e,t),w(e,o),w(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),n.$set(u),(!f||a&1)&&r!==(r=i[1]+"")&&R(o,r)},i(i){f||(_(n.$$.fragment,i),f=!0)},o(i){g(n.$$.fragment,i),f=!1},d(i){i&&p(e),v(n)}}}function no(l){let e,n,t=Ne(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=jn(Dn(l,t,s));const o=s=>g(r[s],1,1,()=>{r[s]=null});return{c(){e=T("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,f){$(s,e,f);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[f]){if(f&1){t=Ne(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Dn(s,t,i);r[i]?(r[i].p(a,f),_(r[i],1)):(r[i]=jn(a),r[i].c(),_(r[i],1),r[i].m(e,null))}for(me(),i=t.length;i<r.length;i+=1)o(i);_e()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)_(r[f]);n=!0}},o(s){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)g(r[f]);n=!1},d(s){s&&p(e),Ot(r,s)}}}function ro(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class cl extends J{constructor(e){super(),K(this,e,ro,no,X,{rows:0})}}function Rn(l){let e=l[0],n,t,r=Bn(l);return{c(){r.c(),n=Me()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&X(e,e=o[0])?(me(),g(r,1,1,re),_e(),r=Bn(o),r.c(),_(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(_(r),t=!0)},o(o){g(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Bn(l){let e;const n=l[10].default,t=Ht(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&zt(t,n,r,r[9],e?Ut(n,r[9],o,null):Gt(r[9]),null)},i(r){e||(_(t,r),e=!0)},o(r){g(t,r),e=!1},d(r){t&&t.d(r)}}}function lo(l){let e,n,t=l[0]&&Rn(l);return{c(){t&&t.c(),e=Me()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&_(t,1)):(t=Rn(r),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(me(),g(t,1,1,()=>{t=null}),_e())},i(r){n||(_(t),n=!0)},o(r){g(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function oo(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:f=wn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:u,self:c}=rl();ve(l,u,y=>n(8,r=y)),ve(l,c,y=>n(0,t=y));let d,m=!0;return ll(()=>{t&&d&&r&&(ol(u,t,d),At(c,t=null,t),n(6,d=void 0))}),l.$$set=y=>{"id"in y&&n(3,f=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==f&&(At(c,t=f,t),sl(r,t,il({type:"raster",tiles:i,tileSize:a}),y=>r&&y===t,()=>{t&&(n(6,d=r==null?void 0:r.getSource(t)),n(7,m=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,d=r==null?void 0:r.getSource(f))})),l.$$.dirty&208&&d&&(m?n(7,m=!1):d.setTiles(i))},[t,u,c,f,i,a,d,m,r,s,o]}class so extends J{constructor(e){super(),K(this,e,oo,lo,X,{id:3,tiles:4,tileSize:5})}}function io(l){let e;const n=l[16].default,t=Ht(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&zt(t,n,r,r[24],e?Ut(n,r[24],o,null):Gt(r[24]),null)},i(r){e||(_(t,r),e=!0)},o(r){g(t,r),e=!1},d(r){t&&t.d(r)}}}function ao(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[io]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Ml({props:o}),q.push(()=>W(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,i.hovered=s[0],V(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function fo(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=wn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:d=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:O=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:C=!1}=e,{hovered:N=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:F=!0}=e;function P(j){N=j,n(0,N)}function I(j){ct.call(this,l,j)}function M(j){ct.call(this,l,j)}function A(j){ct.call(this,l,j)}function E(j){ct.call(this,l,j)}function B(j){ct.call(this,l,j)}function H(j){ct.call(this,l,j)}return l.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,f=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,u=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,d=j.filter),"applyToClusters"in j&&n(9,m=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,O=j.maxzoom),"hoverCursor"in j&&n(12,S=j.hoverCursor),"manageHoverState"in j&&n(13,C=j.manageHoverState),"hovered"in j&&n(0,N=j.hovered),"eventsIfTopMost"in j&&n(14,D=j.eventsIfTopMost),"interactive"in j&&n(15,F=j.interactive),"$$scope"in j&&n(24,r=j.$$scope)},[N,o,s,f,i,a,u,c,d,m,y,O,S,C,D,F,t,P,I,M,A,E,B,H,r]}class uo extends J{constructor(e){super(),K(this,e,fo,ao,X,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Hn(l){let e=l[0],n,t,r=zn(l);return{c(){r.c(),n=Me()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&X(e,e=o[0])?(me(),g(r,1,1,re),_e(),r=zn(o),r.c(),_(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(_(r),t=!0)},o(o){g(r),t=!1},d(o){o&&p(n),r.d(o)}}}function zn(l){let e;const n=l[9].default,t=Ht(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&zt(t,n,r,r[8],e?Ut(n,r[8],o,null):Gt(r[8]),null)},i(r){e||(_(t,r),e=!0)},o(r){g(t,r),e=!1},d(r){t&&t.d(r)}}}function co(l){let e,n,t=l[0]&&Hn(l);return{c(){t&&t.c(),e=Me()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&_(t,1)):(t=Hn(r),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(me(),g(t,1,1,()=>{t=null}),_e())},i(r){n||(_(t),n=!0)},o(r){g(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function $o(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:f=wn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e;if(i&&i.includes("pmtiles://")&&!In.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Nl;In.addProtocol("pmtiles",y.tile)}const{map:c,self:d}=rl();ve(l,c,y=>n(7,r=y)),ve(l,d,y=>n(0,t=y));let m;return ll(()=>{t&&r&&(ol(c,t,m),At(d,t=null,t),m=void 0)}),l.$$set=y=>{"id"in y&&n(3,f=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,u=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==f&&(At(d,t=f,t),sl(r,t,il({type:"vector",url:i,tiles:a,promoteId:u}),y=>r&&y===t,()=>{t&&(m=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{m=r==null?void 0:r.getSource(f)}))},[t,c,d,f,i,a,u,r,s,o]}class we extends J{constructor(e){super(),K(this,e,$o,co,X,{id:3,url:4,tiles:5,promoteId:6})}}const po={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ie=Uint8Array,ft=Uint16Array,$l=Uint32Array,pl=new Ie([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ml=new Ie([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),mo=new Ie([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_l=function(l,e){for(var n=new ft(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new $l(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},gl=_l(pl,2),dl=gl[0],_o=gl[1];dl[28]=258,_o[258]=28;var go=_l(ml,0),ho=go[0],mn=new ft(32768);for(var pe=0;pe<32768;++pe){var rt=(pe&43690)>>>1|(pe&21845)<<1;rt=(rt&52428)>>>2|(rt&13107)<<2,rt=(rt&61680)>>>4|(rt&3855)<<4,mn[pe]=((rt&65280)>>>8|(rt&255)<<8)>>>1}var Et=function(l,e,n){for(var t=l.length,r=0,o=new ft(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new ft(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var f;if(n){f=new ft(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],u=e-l[r],c=s[l[r]-1]++<<u,d=c|(1<<u)-1;c<=d;++c)f[mn[c]>>>i]=a}else for(f=new ft(t),r=0;r<t;++r)l[r]&&(f[r]=mn[s[l[r]-1]++]>>>15-l[r]);return f},Vt=new Ie(288);for(var pe=0;pe<144;++pe)Vt[pe]=8;for(var pe=144;pe<256;++pe)Vt[pe]=9;for(var pe=256;pe<280;++pe)Vt[pe]=7;for(var pe=280;pe<288;++pe)Vt[pe]=8;var hl=new Ie(32);for(var pe=0;pe<32;++pe)hl[pe]=5;var bo=Et(Vt,9,1),vo=Et(hl,5,1),ln=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},De=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},on=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},wo=function(l){return(l+7)/8|0},Sn=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?ft:l.BYTES_PER_ELEMENT==4?$l:Ie)(n-e);return t.set(l.subarray(e,n)),t},ko=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],je=function(l,e,n){var t=new Error(e||ko[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,je),!n)throw t;return t},yo=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Ie(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ie(t*3));var s=function(Oe){var Ge=e.length;if(Oe>Ge){var xe=new Ie(Math.max(Ge*2,Oe));xe.set(e),e=xe}},f=n.f||0,i=n.p||0,a=n.b||0,u=n.l,c=n.d,d=n.m,m=n.n,y=t*8;do{if(!u){f=De(l,i,1);var O=De(l,i+1,3);if(i+=3,O)if(O==1)u=bo,c=vo,d=9,m=5;else if(O==2){var D=De(l,i,31)+257,F=De(l,i+10,15)+4,P=D+De(l,i+5,31)+1;i+=14;for(var I=new Ie(P),M=new Ie(19),A=0;A<F;++A)M[mo[A]]=De(l,i+A*3,7);i+=F*3;for(var E=ln(M),B=(1<<E)-1,H=Et(M,E,1),A=0;A<P;){var j=H[De(l,i,B)];i+=j&15;var S=j>>>4;if(S<16)I[A++]=S;else{var G=0,Y=0;for(S==16?(Y=3+De(l,i,3),i+=2,G=I[A-1]):S==17?(Y=3+De(l,i,7),i+=3):S==18&&(Y=11+De(l,i,127),i+=7);Y--;)I[A++]=G}}var le=I.subarray(0,D),Z=I.subarray(D);d=ln(le),m=ln(Z),u=Et(le,d,1),c=Et(Z,m,1)}else je(1);else{var S=wo(i)+4,C=l[S-4]|l[S-3]<<8,N=S+C;if(N>t){o&&je(0);break}r&&s(a+C),e.set(l.subarray(S,N),a),n.b=a+=C,n.p=i=N*8,n.f=f;continue}if(i>y){o&&je(0);break}}r&&s(a+131072);for(var Te=(1<<d)-1,Le=(1<<m)-1,ae=i;;ae=i){var G=u[on(l,i)&Te],de=G>>>4;if(i+=G&15,i>y){o&&je(0);break}if(G||je(2),de<256)e[a++]=de;else if(de==256){ae=i,u=null;break}else{var Ae=de-254;if(de>264){var A=de-257,ue=pl[A];Ae=De(l,i,(1<<ue)-1)+dl[A],i+=ue}var ce=c[on(l,i)&Le],$e=ce>>>4;ce||je(3),i+=ce&15;var Z=ho[$e];if($e>3){var ue=ml[$e];Z+=on(l,i)&(1<<ue)-1,i+=ue}if(i>y){o&&je(0);break}r&&s(a+131072);for(var Ee=a+Ae;a<Ee;a+=4)e[a]=e[a-Z],e[a+1]=e[a+1-Z],e[a+2]=e[a+2-Z],e[a+3]=e[a+3-Z];a=Ee}}n.l=u,n.p=ae,n.b=a,n.f=f,u&&(f=1,n.m=d,n.d=c,n.n=m)}while(!f);return a==e.length?e:Sn(e,0,a)},So=new Ie(0),Ye=function(l,e){return l[e]|l[e+1]<<8},Be=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},sn=function(l,e){return Be(l,e)+Be(l,e+4)*4294967296};function Co(l,e){return yo(l,e)}var _n=typeof TextDecoder<"u"&&new TextDecoder,To=0;try{_n.decode(So,{stream:!0}),To=1}catch{}var Oo=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,Sn(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function bl(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(_n)return _n.decode(l);var r=Oo(l),o=r[0],s=r[1];return s.length&&je(8),o}}var Ao=function(l,e){return e+30+Ye(l,e+26)+Ye(l,e+28)},Lo=function(l,e,n){var t=Ye(l,e+28),r=bl(l.subarray(e+46,e+46+t),!(Ye(l,e+8)&2048)),o=e+46+t,s=Be(l,e+20),f=n&&s==4294967295?Io(l,o):[s,Be(l,e+24),Be(l,e+42)],i=f[0],a=f[1],u=f[2];return[Ye(l,e+10),i,a,r,o+Ye(l,e+30)+Ye(l,e+32),u]},Io=function(l,e){for(;Ye(l,e)!=1;e+=4+Ye(l,e+2));return[sn(l,e+12),sn(l,e+4),sn(l,e+20)]};function Po(l,e){for(var n={},t=l.length-22;Be(l,t)!=101010256;--t)(!t||l.length-t>65558)&&je(13);var r=Ye(l,t+8);if(!r)return{};var o=Be(l,t+16),s=o==4294967295||r==65535;if(s){var f=Be(l,t-12);s=Be(l,f)==101075792,s&&(r=Be(l,f+32),o=Be(l,f+48))}for(var i=e&&e.filter,a=0;a<r;++a){var u=Lo(l,o,s),c=u[0],d=u[1],m=u[2],y=u[3],O=u[4],S=u[5],C=Ao(l,S);o=O,(!i||i({name:y,size:d,originalSize:m,compression:c}))&&(c?c==8?n[y]=Co(l.subarray(C,C+d),new Ie(m)):je(14,"unknown compression type "+c):n[y]=Sn(l,C,C+d))}return n}function Mo(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(an):an(l)}function an(l){var e=new Uint8Array(l),n=Po(e);return Promise.resolve(No(n))}function No(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=bl(l[r])}return e}function Je(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&ut(t)===e)return t;n++}}function Xt(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&ut(r)===e&&n.push(r),t++}return n}function en(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&ut(r)===e&&n(r,t):n(r,t),t++}}function Fo(l,e,n){var t=[];return en(l,e,function(r,o){t.push(n(r,o))}),t}var Eo=/.+\:/;function ut(l){return l.tagName.replace(Eo,"")}function vl(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+ut(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=vl(l.childNodes[t]),t++;return e+="</"+ut(l)+">",e}function Do(l){var e=l.documentElement,n=Je(e,"sheetData"),t=[];return en(n,"row",function(r){en(r,"c",function(o){t.push(o)})}),t}function jo(l,e){return Je(e,"v")}function Ro(l,e){if(e.firstChild&&ut(e.firstChild)==="is"&&e.firstChild.firstChild&&ut(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Bo(l){var e=l.documentElement,n=Je(e,"dimension");if(n)return n.getAttribute("ref")}function Ho(l){var e=l.documentElement,n=Je(e,"cellStyleXfs");return n?Xt(n,"xf"):[]}function zo(l){var e=l.documentElement,n=Je(e,"cellXfs");return n?Xt(n,"xf"):[]}function Go(l){var e=l.documentElement,n=Je(e,"numFmts");return n?Xt(n,"numFmt"):[]}function Uo(l){var e=l.documentElement;return Fo(e,"si",function(n){var t=Je(n,"t");if(t)return t.textContent;var r="";return en(n,"r",function(o){r+=Je(o,"t").textContent}),r})}function qo(l){var e=l.documentElement;return Je(e,"workbookPr")}function Wo(l){var e=l.documentElement;return Xt(e,"Relationship")}function Vo(l){var e=l.documentElement,n=Je(e,"sheets");return Xt(n,"sheet")}function Xo(l,e){var n=e.createDocument(l),t={},r=qo(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(f){f.getAttribute("name")&&t.sheets.push({id:f.getAttribute("sheetId"),name:f.getAttribute("name"),relationId:f.getAttribute("r:id")})};return Vo(n).forEach(o),t}function Yo(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var f=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=fn(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=fn(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=fn(f);break}};return Wo(n).forEach(r),t}function fn(l){return l[0]==="/"?l.slice(1):"xl/"+l}function Gn(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Un(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gn(Object(n),!0).forEach(function(t){Qo(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Qo(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Jo(l,e){if(!l)return{};var n=e.createDocument(l),t=Ho(n).map(un),r=Go(n).map(Ko).reduce(function(s,f){return s[f.id]=f,s},[]),o=function(f){return f.hasAttribute("xfId")?Un(Un({},t[f.xfId]),un(f,r)):un(f,r)};return zo(n).map(o)}function Ko(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function un(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Zo(l,e){return l?Uo(e.createDocument(l)):[]}function wl(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function xo(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=es(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function es(l,e){if(l){if(typeof l=="string")return qn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(l,e)}}function qn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ts(l,e,n,t){if(e){var r=n[e];if(!r)throw new Error("Cell style not found: ".concat(e));if(!r.numberFormat)return!1;if(ns.indexOf(Number(r.numberFormat.id))>=0||t.dateFormat&&r.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&r.numberFormat.template&&os(r.numberFormat.template))return!0}}var ns=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],rs=/^\[\$-414\]/,ls=/;@$/;function os(l){l=l.toLowerCase(),l=l.replace(rs,""),l=l.replace(ls,"");for(var e=l.split(/\W+/),n=xo(e),t;!(t=n()).done;){var r=t.value;if(ss.indexOf(r)<0)return!1}return!0}var ss=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function is(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,f=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=cn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=cn(l,a);break;case"s":var u=Number(l);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(l));if(u>=f.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=f[u],l=cn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=as(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var d=Number(l);if(isNaN(d))throw new Error('Invalid "numeric" cell value: '.concat(l));l=d,ts(l,o(),s,a)&&(l=wl(l,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function as(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function cn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}var fs=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function us(l){var e=function(a,u){return a-u},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],f=t[t.length-1];return[{row:r,column:s},{row:o,column:f}]}function cs(l){for(var e=0,n=0;n<l.length;)e*=26,e+=fs.indexOf(l[n]),n++;return e}function kl(l){return l=l.split(/(\d+)/),[parseInt(l[1]),cs(l[0].trim())]}function $s(l,e,n,t,r,o,s){var f=kl(l.getAttribute("r")),i=jo(e,l),a=i&&i.textContent,u;return l.hasAttribute("t")&&(u=l.getAttribute("t")),{row:f[0],column:f[1],value:is(a,u,{getInlineStringValue:function(){return Ro(e,l)},getInlineStringXml:function(){return vl(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function ps(l,e,n,t,r,o){var s=Do(l);return s.length===0?[]:s.map(function(f){return $s(f,l,e,n,t,r,o)})}function ms(l,e){return hs(l)||ds(l,e)||gs(l,e)||_s()}function _s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gs(l,e){if(l){if(typeof l=="string")return Wn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wn(l,e)}}function Wn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ds(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,f;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,f=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function hs(l){if(Array.isArray(l))return l}function bs(l){var e=Bo(l);if(e)return e=e.split(":").map(kl).map(function(n){var t=ms(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function vs(l,e,n,t,r,o){var s=e.createDocument(l),f=ps(s,e,n,t,r,o),i=bs(s)||us(f);return{cells:f,dimensions:i}}function ws(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ks(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ks(l,e){if(l){if(typeof l=="string")return Vn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(l,e)}}function Vn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ys(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var f=!0,i=ws(l[s]),a;!(a=i()).done;){var u=a.value;if(r(u)!==null){f=!1;break}}if(f)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Ss(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Cs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cs(l,e){if(l){if(typeof l=="string")return Xn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xn(l,e)}}function Xn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ts(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,f=Ss(l),i;!(i=f()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var u=0;u<l.length;)l[u].splice(o,1),u++;else if(r)break;o--}return l}function Os(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=yl(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function As(l,e){return Ps(l)||Is(l,e)||yl(l,e)||Ls()}function Ls(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yl(l,e){if(l){if(typeof l=="string")return Yn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(l,e)}}function Yn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Is(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,f;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,f=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Ps(l){if(Array.isArray(l))return l}function Ms(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=As(n,2);r[0];for(var o=r[1],s=o.column,f=o.row,i=new Array(f),a=0;a<f;){i[a]=new Array(s);for(var u=0;u<s;)i[a][u]=null,u++;a++}for(var c=Os(t),d;!(d=c()).done;){var m=d.value,y=m.row-1,O=m.column-1;O<s&&y<f&&(i[y][O]=m.value)}var S=e.rowMap;if(S)for(var C=0;C<i.length;)S[C]=C,C++;return i=ys(Ts(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(i=e.transformData(i)),i}function Ns(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Fs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fs(l,e){if(l){if(typeof l=="string")return Qn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qn(l,e)}}function Qn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Jn(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Es(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Jn(Object(n),!0).forEach(function(t){Ds(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Ds(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function js(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Es({sheet:1},n));var t=function(d){if(!l[d])throw new Error('"'.concat(d,'" file not found inside the *.xlsx file zip archive'));return l[d]},r=Yo(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?Zo(t(r.sharedStrings),e):[],s=r.styles?Jo(t(r.styles),e):{},f=Xo(t("xl/workbook.xml"),e);if(n.getSheets)return f.sheets.map(function(c){var d=c.name;return{name:d}});var i=Rs(n.sheet,f.sheets);if(!i||!r.sheets[i])throw Bs(n.sheet,f.sheets);var a=vs(t(r.sheets[i]),e,o,s,f,n),u=Ms(a,n);return n.properties?{data:u,properties:f}:u}function Rs(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=Ns(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Bs(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function gn(l){"@babel/helpers - typeof";return gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(l)}function Kn(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Hs(l,e,n){return e&&Kn(l.prototype,e),n&&Kn(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function zs(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function Gs(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&Rt(l,e)}function Us(l){var e=Sl();return function(){var t=Bt(l),r;if(e){var o=Bt(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return qs(this,r)}}function qs(l,e){if(e&&(gn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ws(l)}function Ws(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function dn(l){var e=typeof Map=="function"?new Map:void 0;return dn=function(t){if(t===null||!Vs(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return Jt(t,arguments,Bt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Rt(r,t)},dn(l)}function Jt(l,e,n){return Sl()?Jt=Reflect.construct:Jt=function(r,o,s){var f=[null];f.push.apply(f,o);var i=Function.bind.apply(r,f),a=new i;return s&&Rt(a,s.prototype),a},Jt.apply(null,arguments)}function Sl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vs(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function Rt(l,e){return Rt=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},Rt(l,e)}function Bt(l){return Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Bt(l)}var Pe=function(l){Gs(n,l);var e=Us(n);function n(t){var r;return zs(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Hs(n)}(dn(Error));function Xs(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new Pe("not_a_number")}if(typeof l!="number")throw new Pe("not_a_number");if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");return l}function Ys(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");return String(l)}throw new Pe("not_a_string")}function Qs(l){if(typeof l=="boolean")return l;throw new Pe("not_a_boolean")}function Js(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new Pe("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");var t=wl(l,n);if(isNaN(t.valueOf()))throw new Pe("out_of_bounds");return t}throw new Pe("not_a_date")}function Ks(l,e){return ei(l)||xs(l,e)||Cl(l,e)||Zs()}function Zs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xs(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,f;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,f=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function ei(l){if(Array.isArray(l))return l}function hn(l){"@babel/helpers - typeof";return hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(l)}function ti(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Cl(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cl(l,e){if(l){if(typeof l=="string")return Zn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(l,e)}}function Zn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function xn(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function er(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xn(Object(n),!0).forEach(function(t){ni(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ni(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var tr={isColumnOriented:!1};function ri(l,e,n){n?n=er(er({},tr),n):n=tr;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ii(e),r&&(l=si(l));for(var f=l[0],i=[],a=[],u=1;u<l.length;u++){var c=Tl(e,l[u],u,f,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var d=ti(a),m;!(m=d()).done;){var y=m.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function Tl(l,e,n,t,r,o){for(var s={},f=!0,i=function(){var d=u[a],m=l[d],y=hn(m.type)==="object"&&!Array.isArray(m.type),O=e[t.indexOf(d)];O===void 0&&(O=null);var S=void 0,C=void 0,N=void 0;if(y)S=Tl(m.type,e,n,t,r,o);else if(O===null)S=null;else if(Array.isArray(m.type)){var D=!1,F=oi(O).map(function(I){var M=nr(I,m,o);return M.error&&(S=I,C=M.error,N=M.reason),M.value!==null&&(D=!0),M.value});C||(S=D?F:null)}else{var P=nr(O,m,o);C=P.error,N=P.reason,S=C?O:P.value}!C&&S===null&&m.required&&(C="required"),C?(C={error:C,row:n+1,column:d,value:S},N&&(C.reason=N),m.type&&(C.type=m.type),r.push(C)):(f&&S!==null&&(f=!1),(S!==null||o.includeNullValues)&&(s[m.prop]=S))},a=0,u=Object.keys(l);a<u.length;a++)i();return f?null:s}function nr(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=$t(l,e.parse):e.type?t=li(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function $t(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function li(l,e,n){switch(e){case String:return $t(l,Ys);case Number:return $t(l,Xs);case Date:return $t(l,function(t){return Js(t,{properties:n.properties})});case Boolean:return $t(l,Qs);default:if(typeof e=="function")return $t(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Ol(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=Ol(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function oi(l){for(var e=[],n=0;n<l.length;){var t=Ol(l,",",n),r=Ks(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var si=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function ii(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function bn(l){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(l)}function Al(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;bn(o)==="object"&&(o=Object.keys(l[r])[0],s=Al(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var ai=["schema","map"];function rr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Qt(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rr(Object(n),!0).forEach(function(t){fi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function fi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ui(l,e){if(l==null)return{};var n=ci(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function ci(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function $i(l,e,n){var t=n.schema,r=n.map,o=ui(n,ai);!t&&r&&(t=Al(r));var s=js(l,e,Qt(Qt({},o),{},{properties:t||o.properties}));return t?ri(s.data,t,Qt(Qt({},o),{},{properties:s.properties})):s}function pi(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Mo(l).then(function(n){return $i(n,po,e)})}function mi(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>_i(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function _i(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function gi(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await pi(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Fl(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const vn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function di(l){return qt(["get","intervention_type"],{area:tt.area,route:tt.route,crossing:tt.crossing,other:tt.other},"white")}function lr(l){return[["Areas",tt.area],["Routes",tt.route],["Crossings",tt.crossing],["Other",tt.other]]}const ne={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},He=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Ll(){let[l,e]=Il(vn,ne.funding_programmes);return[qt(["get","funding_programme"],l,"grey"),e]}function hi(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=Il(l,ne.current_milestone);return[qt(["get","current_milestone"],e,"grey"),n]}function Il(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function bi(l){let e,n;return e=new cl({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vi(l){let e,n,t,r,o;function s(i){l[3](i)}let f={label:"Color interventions",id:"colorInterventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(f.value=l[0]),e=new Tt({props:f}),q.push(()=>W(e,"value",s)),e.$on("change",l[2]),r=new Re({props:{label:"Legend",$$slots:{default:[bi]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const u={};!n&&a&1&&(n=!0,u.value=i[0],V(()=>n=!1)),e.$set(u);const c={};a&34&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function wi(l,e,n){let t;ve(l,kn,i=>n(4,t=i));let r="fundingProgramme",o=lr();function s(){let i;r=="interventionType"?(i=di(),n(1,o=lr())):r=="fundingProgramme"?n(1,[i,o]=Ll(),o):r=="currentMilestone"&&n(1,[i,o]=hi(),o),t.setPaintProperty("interventions-points","circle-color",i),t.setPaintProperty("interventions-lines","line-color",i),t.setPaintProperty("interventions-polygons","fill-color",i),t.setPaintProperty("interventions-polygons-outlines","line-color",i)}function f(i){r=i,n(0,r)}return[r,o,s,f]}class ki extends J{constructor(e){super(),K(this,e,wi,vi,X,{})}}const Lt=Wt({type:"FeatureCollection",features:[],schemes:{}}),tn=Wt(new Map),or=Wt(!0),Kt=Wt(""),Zt=Wt("");function yi(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Si(l){let e,n,t,r,o,s;return t=new Dt({props:{$$slots:{default:[yi]},$$scope:{ctx:l}}}),t.$on("click",l[15]),{c(){e=T("input"),n=L(),h(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterInterventionText")},m(f,i){$(f,e,i),Qe(e,l[6]),$(f,n,i),b(t,f,i),r=!0,o||(s=st(e,"input",l[14]),o=!0)},p(f,i){i&64&&e.value!==f[6]&&Qe(e,f[6]);const a={};i&8388608&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){r||(_(t.$$.fragment,f),r=!0)},o(f){g(t.$$.fragment,f),r=!1},d(f){f&&(p(e),p(n)),v(t,f),o=!1,s()}}}function Ci(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ti(l){let e,n,t,r,o,s;return t=new Dt({props:{$$slots:{default:[Ci]},$$scope:{ctx:l}}}),t.$on("click",l[17]),{c(){e=T("input"),n=L(),h(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterSchemeText")},m(f,i){$(f,e,i),Qe(e,l[5]),$(f,n,i),b(t,f,i),r=!0,o||(s=st(e,"input",l[16]),o=!0)},p(f,i){i&32&&e.value!==f[5]&&Qe(e,f[5]);const a={};i&8388608&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){r||(_(t.$$.fragment,f),r=!0)},o(f){g(t.$$.fragment,f),r=!1},d(f){f&&(p(e),p(n)),v(t,f),o=!1,s()}}}function Oi(l){let e,n,t,r,o,s,f,i,a,u,c,d,m,y,O;function S(I){l[11](I)}let C={label:"Authority or region",id:"filterAuthority",choices:l[7],emptyOption:!0};l[2]!==void 0&&(C.value=l[2]),e=new Tt({props:C}),q.push(()=>W(e,"value",S));function N(I){l[12](I)}let D={label:"Funding programme",id:"filterFundingProgramme",choices:l[8],emptyOption:!0};l[3]!==void 0&&(D.value=l[3]),r=new Tt({props:D}),q.push(()=>W(r,"value",N));function F(I){l[13](I)}let P={label:"Current milestone",id:"filterCurrentMilestone",choices:l[9],emptyOption:!0};return l[4]!==void 0&&(P.value=l[4]),f=new Tt({props:P}),q.push(()=>W(f,"value",F)),u=new $n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Si]},$$scope:{ctx:l}}}),d=new $n({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Ti]},$$scope:{ctx:l}}}),y=new ki({}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment),s=L(),h(f.$$.fragment),a=L(),h(u.$$.fragment),c=L(),h(d.$$.fragment),m=L(),h(y.$$.fragment)},m(I,M){b(e,I,M),$(I,t,M),b(r,I,M),$(I,s,M),b(f,I,M),$(I,a,M),b(u,I,M),$(I,c,M),b(d,I,M),$(I,m,M),b(y,I,M),O=!0},p(I,M){const A={};M&128&&(A.choices=I[7]),!n&&M&4&&(n=!0,A.value=I[2],V(()=>n=!1)),e.$set(A);const E={};M&256&&(E.choices=I[8]),!o&&M&8&&(o=!0,E.value=I[3],V(()=>o=!1)),r.$set(E);const B={};M&512&&(B.choices=I[9]),!i&&M&16&&(i=!0,B.value=I[4],V(()=>i=!1)),f.$set(B);const H={};M&8388672&&(H.$$scope={dirty:M,ctx:I}),u.$set(H);const j={};M&8388640&&(j.$$scope={dirty:M,ctx:I}),d.$set(j)},i(I){O||(_(e.$$.fragment,I),_(r.$$.fragment,I),_(f.$$.fragment,I),_(u.$$.fragment,I),_(d.$$.fragment,I),_(y.$$.fragment,I),O=!0)},o(I){g(e.$$.fragment,I),g(r.$$.fragment,I),g(f.$$.fragment,I),g(u.$$.fragment,I),g(d.$$.fragment,I),g(y.$$.fragment,I),O=!1},d(I){I&&(p(t),p(s),p(a),p(c),p(m)),v(e,I),v(r,I),v(f,I),v(u,I),v(d,I),v(y,I)}}}function Ai(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[10].route.toLocaleString()+"",s,f,i=l[10].area.toLocaleString()+"",a,u,c=l[10].crossing.toLocaleString()+"",d,m,y=l[10].other.toLocaleString()+"",O,S,C=sr(l[10].totalLength).toFixed(1)+"",N,D;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),f=k(`
    routes, `),a=k(i),u=k(` areas,
    `),d=k(c),m=k(" crossings, "),O=k(y),S=k(`
    other, with total LineString length of `),N=k(C),D=k(" miles)")},m(F,P){$(F,e,P),$(F,t,P),$(F,r,P),$(F,s,P),$(F,f,P),$(F,a,P),$(F,u,P),$(F,d,P),$(F,m,P),$(F,O,P),$(F,S,P),$(F,N,P),$(F,D,P)},p(F,P){P&1&&n!==(n=F[0].size.toLocaleString()+"")&&R(t,n),P&1024&&o!==(o=F[10].route.toLocaleString()+"")&&R(s,o),P&1024&&i!==(i=F[10].area.toLocaleString()+"")&&R(a,i),P&1024&&c!==(c=F[10].crossing.toLocaleString()+"")&&R(d,c),P&1024&&y!==(y=F[10].other.toLocaleString()+"")&&R(O,y),P&1024&&C!==(C=sr(F[10].totalLength).toFixed(1)+"")&&R(N,C)},d(F){F&&(p(e),p(t),p(r),p(s),p(f),p(a),p(u),p(d),p(m),p(O),p(S),p(N),p(D))}}}function Li(l){let e,n,t;function r(s){l[18](s)}let o={id:"show-schemes",$$slots:{default:[Ai]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new se({props:o}),q.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f&8389633&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ii(l){let e,n,t,r;return e=new Re({props:{label:"Filters",$$slots:{default:[Oi]},$$scope:{ctx:l}}}),t=new Ke({props:{small:!0,$$slots:{default:[Li]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const f={};s&8389628&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&8389635&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(_(e.$$.fragment,o),_(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function sr(l){return l*621371e-9}function Pi(l,e,n){let t,r,o,s;ve(l,Zt,B=>n(5,t=B)),ve(l,Kt,B=>n(6,r=B)),ve(l,Lt,B=>n(19,o=B)),ve(l,tn,B=>n(20,s=B));let{schemesToBeShown:f=new Set}=e,{show:i=!0}=e,a=[],u="",c=[],d=new Set(vn.slice(0,-1)),m="",y=[],O="",S={area:0,route:0,crossing:0,other:0,totalLength:0};yn(()=>{var G,Y,le;let B=new Set,H=new Set,j=new Set;for(let Z of s.values())(G=Z.browse)!=null&&G.authority_or_region&&B.add(Z.browse.authority_or_region),(Y=Z.browse)!=null&&Y.funding_programme&&H.add(Z.browse.funding_programme),(le=Z.browse)!=null&&le.current_milestone&&j.add(Z.browse.current_milestone);n(7,a=Array.from(B.entries())),a.sort(),n(8,c=vn.map(Z=>[Z,Z])),n(9,y=Array.from(j.entries())),y.sort()});function C(B,H,j,G,Y){let le=B.toLowerCase(),Z=H.toLowerCase(),Te=ae=>{var de,Ae,ue,ce,$e,Ee;if(le&&!((de=ae.properties.name)!=null&&de.toLowerCase().includes(le))&&!((Ae=ae.properties.description)!=null&&Ae.toLowerCase().includes(le)))return!1;if(Z||j||G||Y){let Oe=s.get(ae.properties.scheme_reference);if(j&&((ue=Oe.browse)==null?void 0:ue.authority_or_region)!=j||G&&G!=="Other"&&((ce=Oe.browse)==null?void 0:ce.funding_programme)!=G||G==="Other"&&d.has((($e=Oe.browse)==null?void 0:$e.funding_programme)??"")||Y&&((Ee=Oe.browse)==null?void 0:Ee.current_milestone)!=Y||Z&&!Oe.scheme_reference.toLowerCase().includes(Z)&&!(Oe.scheme_name??"").toLowerCase().includes(Z))return!1}return!0};n(0,f=new Set(o.features.filter(Te).map(ae=>ae.properties.scheme_reference))),n(10,S={area:0,route:0,crossing:0,other:0,totalLength:0});let Le=ae=>{var de,Ae;return!(!f.has(ae.properties.scheme_reference)||le&&!((de=ae.properties.name)!=null&&de.toLowerCase().includes(le))&&!((Ae=ae.properties.description)!=null&&Ae.toLowerCase().includes(le)))};for(let ae of o.features)Le(ae)?(delete ae.properties.hide_while_editing,n(10,S[ae.properties.intervention_type]++,S),ae.geometry.type=="LineString"&&ae.properties.length_meters&&n(10,S.totalLength+=ae.properties.length_meters,S)):ae.properties.hide_while_editing=!0;Lt.set(o),n(10,S)}function N(B){u=B,n(2,u)}function D(B){m=B,n(3,m)}function F(B){O=B,n(4,O)}function P(){r=this.value,Kt.set(r)}const I=()=>At(Kt,r="",r);function M(){t=this.value,Zt.set(t)}const A=()=>At(Zt,t="",t);function E(B){i=B,n(1,i)}return l.$$set=B=>{"schemesToBeShown"in B&&n(0,f=B.schemesToBeShown),"show"in B&&n(1,i=B.show)},l.$$.update=()=>{l.$$.dirty&124&&C(r,t,u,m,O)},[f,i,u,m,O,t,r,a,c,y,S,N,D,F,P,I,M,A,E]}class Mi extends J{constructor(e){super(),K(this,e,Pi,Ii,X,{schemesToBeShown:0,show:1})}}function Ni(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fi(l){let e,n,t,r,o;return t=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ni]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),h(t.$$.fragment),r=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,f){$(s,e,f),w(e,n),b(t,e,null),w(e,r),o=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){o||(_(t.$$.fragment,s),o=!0)},o(s){g(t.$$.fragment,s),o=!1},d(s){s&&p(e),v(t)}}}class Fe extends J{constructor(e){super(),K(this,e,null,Fi,X,{})}}function ir(l,e,n){const t=l.slice();return t[2]=e[n],t}function ar(l,e,n){const t=l.slice();return t[5]=e[n],t}function fr(l){let e,n;return{c(){e=T("span"),n=k(`
    `),ke(e,"background",l[5]),ke(e,"width","100%"),ke(e,"border","1px solid black")},m(t,r){$(t,e,r),w(e,n)},p(t,r){r&1&&ke(e,"background",t[5])},d(t){t&&p(e)}}}function ur(l){let e,n=l[2]+"",t;return{c(){e=T("span"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&R(t,n)},d(r){r&&p(e)}}}function Ei(l){let e,n,t,r=Ne(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=fr(ar(l,r,i));let s=Ne(l[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=ur(ir(l,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=L(),t=T("div");for(let i=0;i<f.length;i+=1)f[i].c();ke(e,"display","flex"),ke(t,"display","flex"),ke(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);$(i,n,a),$(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){r=Ne(i[0]);let u;for(u=0;u<r.length;u+=1){const c=ar(i,r,u);o[u]?o[u].p(c,a):(o[u]=fr(c),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=r.length}if(a&2){s=Ne(i[1]);let u;for(u=0;u<s.length;u+=1){const c=ir(i,s,u);f[u]?f[u].p(c,a):(f[u]=ur(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:re,o:re,d(i){i&&(p(e),p(n),p(t)),Ot(o,i),Ot(f,i)}}}function Di(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ze extends J{constructor(e){super(),K(this,e,Di,Ei,X,{colorScale:0,limits:1})}}function cr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function ji(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ri(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bi(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hi(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zi(l){let e,n,t,r,o,s,f,i,a,u,c,d;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ri]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Bi]},$$scope:{ctx:l}}}),u=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Hi]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),f=L(),i=T("p"),a=k("License: "),h(u.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(m,f,y),$(m,i,y),w(i,a),b(u,i,null),w(i,c),d=!0},p(m,y){const O={};y&65536&&(O.$$scope={dirty:y,ctx:m}),t.$set(O);const S={};y&65536&&(S.$$scope={dirty:y,ctx:m}),o.$set(S);const C={};y&65536&&(C.$$scope={dirty:y,ctx:m}),u.$set(C)},i(m){d||(_(t.$$.fragment,m),_(o.$$.fragment,m),_(u.$$.fragment,m),d=!0)},o(m){g(t.$$.fragment,m),g(o.$$.fragment,m),g(u.$$.fragment,m),d=!1},d(m){m&&(p(e),p(f),p(i)),v(t),v(o),v(u)}}}function Gi(l){let e,n,t;return n=new ge({props:{$$slots:{default:[zi]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function $r(l){let e,n;return e=new Ze({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ui(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qi(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xi(l){let e,n,t,r,o,s,f,i,a,u,c,d,m,y;return o=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[qi]},$$scope:{ctx:l}}}),f=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Wi]},$$scope:{ctx:l}}}),d=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Vi]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=T("p"),r=k("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=k(". Output area boundaries from "),h(f.$$.fragment),i=k("."),a=L(),u=T("p"),c=k("License: "),h(d.$$.fragment),m=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(O,S){$(O,e,S),$(O,n,S),$(O,t,S),w(t,r),b(o,t,null),w(t,s),b(f,t,null),w(t,i),$(O,a,S),$(O,u,S),w(u,c),b(d,u,null),w(u,m),y=!0},p(O,S){const C={};S&65536&&(C.$$scope={dirty:S,ctx:O}),o.$set(C);const N={};S&65536&&(N.$$scope={dirty:S,ctx:O}),f.$set(N);const D={};S&65536&&(D.$$scope={dirty:S,ctx:O}),d.$set(D)},i(O){y||(_(o.$$.fragment,O),_(f.$$.fragment,O),_(d.$$.fragment,O),y=!0)},o(O){g(o.$$.fragment,O),g(f.$$.fragment,O),g(d.$$.fragment,O),y=!1},d(O){O&&(p(e),p(n),p(t),p(a),p(u)),v(o),v(f),v(d)}}}function Yi(l){let e,n,t;return n=new ge({props:{$$slots:{default:[Xi]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function pr(l){let e,n;return e=new Ze({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qi(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ji(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ki(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zi(l){let e,n,t,r,o,s,f,i,a;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ji]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ki]},$$scope:{ctx:l}}}),i=new Fe({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),f=L(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&65536&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const m={};c&65536&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),v(t),v(o),v(i,u)}}}function xi(l){let e,n,t;return n=new ge({props:{$$slots:{default:[Zi]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function mr(l){let e,n,t,r;return t=new Ze({props:{colorScale:l[4],limits:l[6]().map(ia)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:re,i(o){r||(_(t.$$.fragment,o),r=!0)},o(o){g(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function ea(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,f=l[14]+"",i;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(r),s=k(`
          people per square kilometre in `),i=k(f)},m(a,u){$(a,e,u),w(e,n),w(e,t),w(t,o),w(e,s),w(e,i)},p(a,u){u&8200&&r!==(r=a[15].toLocaleString()+"")&&R(o,r),u&8192&&f!==(f=a[14]+"")&&R(i,f)},d(a){a&&p(e)}}}function ta(l){let e,n,t=l[14]+"",r,o,s,f=l[15]+"",i,a;return{c(){e=T("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=T("b"),i=k(f),a=k(`
          cars`)},m(u,c){$(u,e,c),w(e,n),w(e,r),w(e,o),w(e,s),w(s,i),w(e,a)},p(u,c){c&8192&&t!==(t=u[14]+"")&&R(r,t),c&8200&&f!==(f=u[15]+"")&&R(i,f)},d(u){u&&p(e)}}}function na(l){let e,n,t=l[15]+"",r,o,s,f=l[14]+"",i,a;return{c(){e=T("p"),n=T("b"),r=k(t),o=k("%"),s=k(`
          of households in `),i=k(f),a=k(" have 1 or more cars")},m(u,c){$(u,e,c),w(e,n),w(n,r),w(n,o),w(e,s),w(e,i),w(e,a)},p(u,c){c&8200&&t!==(t=u[15]+"")&&R(r,t),c&8192&&f!==(f=u[14]+"")&&R(i,f)},d(u){u&&p(e)}}}function ra(l){cr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?na:o[3]=="average_cars_per_household"?ta:ea}let t=n(l),r=t(l);return{c(){r.c(),e=Me()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){cr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function la(l){let e,n;return e=new fe({props:{$$slots:{default:[ra,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oa(l){let e,n,t,r;const o=[z(et),{sourceLayer:et},{paint:{"fill-color":ye(["get",l[3]],l[6](),l[4]),"fill-opacity":x(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[la]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",l[5]);const f=[z(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),r=!0},p(a,u){const c=u&88?te(o,[u&0&&ie(z(et)),u&0&&{sourceLayer:et},u&88&&{paint:{"fill-color":ye(["get",a[3]],a[6](),a[4]),"fill-opacity":x(.5,.7)}},u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};u&65544&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&8?te(f,[u&0&&ie(z(`${et}-outline`)),u&0&&{sourceLayer:et},f[2],u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(d)},i(a){r||(_(e.$$.fragment,a),_(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function sa(l){let e,n,t,r,o,s,f,i,a,u,c,d,m,y;function O(A){l[7](A)}let S={id:"percent_households_with_car",$$slots:{right:[Gi],default:[ji]},$$scope:{ctx:l}};l[0]!==void 0&&(S.checked=l[0]),e=new se({props:S}),q.push(()=>W(e,"checked",O)),e.$on("change",l[8]);let C=l[3]=="percent_households_with_car"&&$r(l);function N(A){l[9](A)}let D={id:"average_cars_per_household",$$slots:{right:[Yi],default:[Ui]},$$scope:{ctx:l}};l[1]!==void 0&&(D.checked=l[1]),o=new se({props:D}),q.push(()=>W(o,"checked",N)),o.$on("change",l[10]);let F=l[3]=="average_cars_per_household"&&pr(l);function P(A){l[11](A)}let I={id:"population_density",$$slots:{right:[xi],default:[Qi]},$$scope:{ctx:l}};l[2]!==void 0&&(I.checked=l[2]),a=new se({props:I}),q.push(()=>W(a,"checked",P)),a.$on("change",l[12]);let M=l[3]=="population_density"&&mr(l);return m=new we({props:{url:`pmtiles://${be()}/v1/${et}.pmtiles`,$$slots:{default:[oa]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),C&&C.c(),r=L(),h(o.$$.fragment),f=L(),F&&F.c(),i=L(),h(a.$$.fragment),c=L(),M&&M.c(),d=L(),h(m.$$.fragment)},m(A,E){b(e,A,E),$(A,t,E),C&&C.m(A,E),$(A,r,E),b(o,A,E),$(A,f,E),F&&F.m(A,E),$(A,i,E),b(a,A,E),$(A,c,E),M&&M.m(A,E),$(A,d,E),b(m,A,E),y=!0},p(A,[E]){const B={};E&65536&&(B.$$scope={dirty:E,ctx:A}),!n&&E&1&&(n=!0,B.checked=A[0],V(()=>n=!1)),e.$set(B),A[3]=="percent_households_with_car"?C?(C.p(A,E),E&8&&_(C,1)):(C=$r(A),C.c(),_(C,1),C.m(r.parentNode,r)):C&&(me(),g(C,1,1,()=>{C=null}),_e());const H={};E&65536&&(H.$$scope={dirty:E,ctx:A}),!s&&E&2&&(s=!0,H.checked=A[1],V(()=>s=!1)),o.$set(H),A[3]=="average_cars_per_household"?F?(F.p(A,E),E&8&&_(F,1)):(F=pr(A),F.c(),_(F,1),F.m(i.parentNode,i)):F&&(me(),g(F,1,1,()=>{F=null}),_e());const j={};E&65536&&(j.$$scope={dirty:E,ctx:A}),!u&&E&4&&(u=!0,j.checked=A[2],V(()=>u=!1)),a.$set(j),A[3]=="population_density"?M?(M.p(A,E),E&8&&_(M,1)):(M=mr(A),M.c(),_(M,1),M.m(d.parentNode,d)):M&&(me(),g(M,1,1,()=>{M=null}),_e());const G={};E&65544&&(G.$$scope={dirty:E,ctx:A}),m.$set(G)},i(A){y||(_(e.$$.fragment,A),_(C),_(o.$$.fragment,A),_(F),_(a.$$.fragment,A),_(M),_(m.$$.fragment,A),y=!0)},o(A){g(e.$$.fragment,A),g(C),g(o.$$.fragment,A),g(F),g(a.$$.fragment,A),g(M),g(m.$$.fragment,A),y=!1},d(A){A&&(p(t),p(r),p(f),p(i),p(c),p(d)),v(e,A),C&&C.d(A),v(o,A),F&&F.d(A),v(a,A),M&&M.d(A),v(m,A)}}}let et="census_output_areas";const ia=l=>l.toLocaleString();function aa(l,e,n){let t=ne.sequential_low_to_high,r=!1,o=!1,s=!1,f="";function i(S){let C=S.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${C}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${C}`,"_blank")}function a(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function u(S){r=S,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function d(S){o=S,n(1,o)}const m=()=>{n(0,r=!1),n(2,s=!1)};function y(S){s=S,n(2,s)}const O=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,f="percent_households_with_car"):o?n(3,f="average_cars_per_household"):s?n(3,f="population_density"):n(3,f=""))},[r,o,s,f,t,i,a,u,c,d,m,y,O]}class fa extends J{constructor(e){super(),K(this,e,aa,sa,X,{})}}function ua(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function ca(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $a(l){let e,n,t,r,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ca]},$$scope:{ctx:l}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of December 2022."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function pa(l){let e,n,t;return n=new ge({props:{$$slots:{default:[$a]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function ma(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&R(t,n)},d(r){r&&p(e)}}}function _a(l){let e,n;return e=new fe({props:{$$slots:{default:[ma,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ga(l){let e,n,t,r;const o=[z(pt),{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[_a]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",ha);const f=[z(`${pt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),r=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(z(pt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?te(f,[u&0&&ie(z(`${pt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){r||(_(e.$$.fragment,a),_(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function da(l){let e,n,t,r,o;function s(i){l[2](i)}let f={id:pt,$$slots:{right:[pa],default:[ua]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),r=new It({props:{data:`${be()}/v1/${pt}.geojson`,$$slots:{default:[ga]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let pt="combined_authorities";function ha(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function ba(l,e,n){let t=ne.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class va extends J{constructor(e){super(),K(this,e,ba,da,X,{})}}function wa(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ka(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ya(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sa(l){let e,n,t,r,o,s,f,i,a;return t=new Q({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[ka]},$$scope:{ctx:l}}}),o=new Q({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ya]},$$scope:{ctx:l}}}),i=new Fe({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),h(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=k("."),f=L(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const m={};c&32&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),v(t),v(o),v(i,u)}}}function Ca(l){let e,n,t;return n=new ge({props:{$$slots:{default:[Sa]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function _r(l){let e,n;return e=new Ze({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ta(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",f,i,a,u,c,d=l[4].rank.toLocaleString()+"",m,y;return{c(){e=T("p"),t=k(n),r=k(` has an IMD score of
        `),o=T("b"),f=k(s),i=L(),a=T("p"),u=k("Rank: "),c=T("b"),m=k(d),y=k(`
        / 32,844 LSOAs`)},m(O,S){$(O,e,S),w(e,t),w(e,r),w(e,o),w(o,f),$(O,i,S),$(O,a,S),w(a,u),w(a,c),w(c,m),w(a,y)},p(O,S){S&16&&n!==(n=O[4].LSOA11CD+"")&&R(t,n),S&16&&s!==(s=O[4].score+"")&&R(f,s),S&16&&d!==(d=O[4].rank.toLocaleString()+"")&&R(m,d)},d(O){O&&(p(e),p(i),p(a))}}}function Oa(l){let e,n;return e=new fe({props:{$$slots:{default:[Ta,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Aa(l){let e,n,t,r;const o=[z(Ue),{sourceLayer:Ue},{paint:{"fill-color":ye(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":x(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Oa]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s});const f=[z(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),r=!0},p(a,u){const c=u&7?te(o,[u&0&&ie(z(Ue)),u&0&&{sourceLayer:Ue},u&6&&{paint:{"fill-color":ye(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":x(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&1?te(f,[u&0&&ie(z(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){r||(_(e.$$.fragment,a),_(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function La(l){let e,n,t,r,o,s;function f(u){l[3](u)}let i={id:Ue,$$slots:{right:[Ca],default:[wa]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=l[0]&&_r(l);return o=new we({props:{url:`pmtiles://${be()}/v1/${Ue}.pmtiles`,$$slots:{default:[Aa]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,d.checked=u[0],V(()=>n=!1)),e.$set(d),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=_r(u),a.c(),_(a,1),a.m(r.parentNode,r)):a&&(me(),g(a,1,1,()=>{a=null}),_e());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),v(e,u),a&&a.d(u),v(o,u)}}}let Ue="imd";function Ia(l,e,n){let t=ne.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(f){o=f,n(0,o)}return[o,t,r,s]}class Pa extends J{constructor(e){super(),K(this,e,Ia,La,X,{})}}function Ma(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Na(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fa(l){let e,n,t,r,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Na]},$$scope:{ctx:l}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Ea(l){let e,n,t;return n=new ge({props:{$$slots:{default:[Fa]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Da(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&R(t,n)},d(r){r&&p(e)}}}function ja(l){let e,n;return e=new fe({props:{$$slots:{default:[Da,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ra(l){let e,n,t,r;const o=[z(mt),{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ja]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",Ha);const f=[z(`${mt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),r=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(z(mt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?te(f,[u&0&&ie(z(`${mt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){r||(_(e.$$.fragment,a),_(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ba(l){let e,n,t,r,o;function s(i){l[2](i)}let f={id:mt,$$slots:{right:[Ea],default:[Ma]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),r=new It({props:{data:`${be()}/v1/${mt}.geojson`,$$slots:{default:[Ra]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let mt="local_authority_districts";function Ha(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function za(l,e,n){let t=ne.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ga extends J{constructor(e){super(),K(this,e,za,Ba,X,{})}}function Ua(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function qa(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wa(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Va(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xa(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ya(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qa(l){let e,n,t,r,o,s,f,i,a,u,c,d,m,y,O,S,C,N,D,F,P,I;return t=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[qa]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Wa]},$$scope:{ctx:l}}}),f=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Va]},$$scope:{ctx:l}}}),m=new Q({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Xa]},$$scope:{ctx:l}}}),N=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ya]},$$scope:{ctx:l}}}),P=new Fe({}),{c(){e=T("p"),n=k("LPAs may be a "),h(t.$$.fragment),r=k(", "),h(o.$$.fragment),s=k("y, or "),h(f.$$.fragment),i=k("."),a=L(),u=T("p"),c=T("strong"),d=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(m.$$.fragment),y=k(" to get more details."),O=L(),S=T("p"),C=k("Data from ONS Geography via "),h(N.$$.fragment),D=k(", as of November 2022."),F=L(),h(P.$$.fragment)},m(M,A){$(M,e,A),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),b(f,e,null),w(e,i),$(M,a,A),$(M,u,A),w(u,c),w(c,d),b(m,c,null),w(c,y),$(M,O,A),$(M,S,A),w(S,C),b(N,S,null),w(S,D),$(M,F,A),b(P,M,A),I=!0},p(M,A){const E={};A&16&&(E.$$scope={dirty:A,ctx:M}),t.$set(E);const B={};A&16&&(B.$$scope={dirty:A,ctx:M}),o.$set(B);const H={};A&16&&(H.$$scope={dirty:A,ctx:M}),f.$set(H);const j={};A&16&&(j.$$scope={dirty:A,ctx:M}),m.$set(j);const G={};A&16&&(G.$$scope={dirty:A,ctx:M}),N.$set(G)},i(M){I||(_(t.$$.fragment,M),_(o.$$.fragment,M),_(f.$$.fragment,M),_(m.$$.fragment,M),_(N.$$.fragment,M),_(P.$$.fragment,M),I=!0)},o(M){g(t.$$.fragment,M),g(o.$$.fragment,M),g(f.$$.fragment,M),g(m.$$.fragment,M),g(N.$$.fragment,M),g(P.$$.fragment,M),I=!1},d(M){M&&(p(e),p(a),p(u),p(O),p(S),p(F)),v(t),v(o),v(f),v(m),v(N),v(P,M)}}}function Ja(l){let e,n,t;return n=new ge({props:{$$slots:{default:[Qa]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ka(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&R(t,n)},d(r){r&&p(e)}}}function Za(l){let e,n;return e=new fe({props:{$$slots:{default:[Ka,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xa(l){let e,n,t,r;const o=[z(qe),{sourceLayer:qe},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Za]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s});const f=[z(`${qe}-outline`),{sourceLayer:qe},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),r=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(z(qe)),u&0&&{sourceLayer:qe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?te(f,[u&0&&ie(z(`${qe}-outline`)),u&0&&{sourceLayer:qe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){r||(_(e.$$.fragment,a),_(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ef(l){let e,n,t,r,o;function s(i){l[2](i)}let f={id:qe,$$slots:{right:[Ja],default:[Ua]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),r=new we({props:{url:`pmtiles://${be()}/v1/${qe}.pmtiles`,$$slots:{default:[xa]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let qe="local_planning_authorities";function tf(l,e,n){let t=ne.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class nf extends J{constructor(e){super(),K(this,e,tf,ef,X,{})}}function rf(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function lf(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(l){let e,n,t,r,o,s,f;return t=new Q({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[lf]},$$scope:{ctx:l}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function sf(l){let e,n,t;return n=new ge({props:{$$slots:{default:[of]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function af(l){let e,n=l[3].Name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&R(t,n)},d(r){r&&p(e)}}}function ff(l){let e,n;return e=new fe({props:{$$slots:{default:[af,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uf(l){let e,n,t,r;const o=[z(We),{sourceLayer:We},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ff]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",$f);const f=[z(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),r=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(z(We)),u&0&&{sourceLayer:We},u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?te(f,[u&0&&ie(z(`${We}-outline`)),u&0&&{sourceLayer:We},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){r||(_(e.$$.fragment,a),_(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function cf(l){let e,n,t,r,o;function s(i){l[2](i)}let f={id:We,$$slots:{right:[sf],default:[rf]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),r=new we({props:{url:`pmtiles://${be()}/v1/${We}.pmtiles`,$$slots:{default:[uf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let We="parliamentary_constituencies";function $f(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function pf(l,e,n){let t=ne.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class mf extends J{constructor(e){super(),K(this,e,pf,cf,X,{})}}function _f(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gf(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function df(l){let e;return{c(){e=k(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hf(l){let e;return{c(){e=k(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bf(l){let e,n,t,r,o,s,f,i,a,u,c,d,m,y,O,S;return t=new Q({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[gf]},$$scope:{ctx:l}}}),u=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[df]},$$scope:{ctx:l}}}),d=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[hf]},$$scope:{ctx:l}}}),O=new Fe({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),h(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        gm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),f=L(),i=T("p"),a=k("The noise layer is from "),h(u.$$.fragment),c=k(", using 2017 data. See their "),h(d.$$.fragment),m=k("."),y=L(),h(O.$$.fragment)},m(C,N){$(C,e,N),w(e,n),b(t,e,null),w(e,r),w(e,o),w(e,s),$(C,f,N),$(C,i,N),w(i,a),b(u,i,null),w(i,c),b(d,i,null),w(i,m),$(C,y,N),b(O,C,N),S=!0},p(C,N){const D={};N&2048&&(D.$$scope={dirty:N,ctx:C}),t.$set(D);const F={};N&2048&&(F.$$scope={dirty:N,ctx:C}),u.$set(F);const P={};N&2048&&(P.$$scope={dirty:N,ctx:C}),d.$set(P)},i(C){S||(_(t.$$.fragment,C),_(u.$$.fragment,C),_(d.$$.fragment,C),_(O.$$.fragment,C),S=!0)},o(C){g(t.$$.fragment,C),g(u.$$.fragment,C),g(d.$$.fragment,C),g(O.$$.fragment,C),S=!1},d(C){C&&(p(e),p(f),p(i),p(y)),v(t),v(u),v(d),v(O,C)}}}function vf(l){let e,n,t;return n=new ge({props:{$$slots:{default:[bf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function gr(l){let e,n,t,r,o=l[3](l[0])+"",s,f,i,a,u,c,d,m,y,O,S,C,N;function D(A){l[7](A)}let F={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};l[0]!==void 0&&(F.value=l[0]),e=new Tt({props:F}),q.push(()=>W(e,"value",D));const P=[kf,wf],I=[];function M(A,E){return A[0]=="Noise"?0:1}return m=M(l),y=I[m]=P[m](l),{c(){h(e.$$.fragment),t=L(),r=T("p"),s=k(o),f=L(),i=T("div"),a=T("label"),u=k(`Opacity
      `),c=T("input"),d=L(),y.c(),O=Me(),U(c,"type","range"),U(c,"min","0"),U(c,"max","100")},m(A,E){b(e,A,E),$(A,t,E),$(A,r,E),w(r,s),$(A,f,E),$(A,i,E),w(i,a),w(a,u),w(a,c),Qe(c,l[2]),$(A,d,E),I[m].m(A,E),$(A,O,E),S=!0,C||(N=[st(c,"change",l[8]),st(c,"input",l[8])],C=!0)},p(A,E){const B={};!n&&E&1&&(n=!0,B.value=A[0],V(()=>n=!1)),e.$set(B),(!S||E&1)&&o!==(o=A[3](A[0])+"")&&R(s,o),E&4&&Qe(c,A[2]);let H=m;m=M(A),m===H?I[m].p(A,E):(me(),g(I[H],1,1,()=>{I[H]=null}),_e(),y=I[m],y?y.p(A,E):(y=I[m]=P[m](A),y.c()),_(y,1),y.m(O.parentNode,O))},i(A){S||(_(e.$$.fragment,A),_(y),S=!0)},o(A){g(e.$$.fragment,A),g(y),S=!1},d(A){A&&(p(t),p(r),p(f),p(i),p(d),p(O)),v(e,A),I[m].d(A),C=!1,al(N)}}}function wf(l){let e,n,t;return{c(){e=T("img"),Pn(e.src,n=l[5](l[0]))||U(e,"src",n),U(e,"width",150),U(e,"alt",t=`Legend for ${l[0]} layer`)},m(r,o){$(r,e,o)},p(r,o){o&1&&!Pn(e.src,n=r[5](r[0]))&&U(e,"src",n),o&1&&t!==(t=`Legend for ${r[0]} layer`)&&U(e,"alt",t)},i:re,o:re,d(r){r&&p(e)}}}function kf(l){let e,n;return e=new Ze({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yf(l){let e,n;const t=[z("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Vl({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Sf(l){let e,n,t,r,o,s;function f(u){l[6](u)}let i={id:"pollution",$$slots:{right:[vf],default:[_f]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=l[1]&&gr(l);return o=new so({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[yf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,d.checked=u[1],V(()=>n=!1)),e.$set(d),u[1]?a?(a.p(u,c),c&2&&_(a,1)):(a=gr(u),a.c(),_(a,1),a.m(r.parentNode,r)):a&&(me(),g(a,1,1,()=>{a=null}),_e());const m={};c&1&&(m.tiles=[u[4](u[0])]),c&2054&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),v(e,u),a&&a.d(u),v(o,u)}}}function Cf(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function f(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let O=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${f()}?bbox={bbox-epsg-3857}&${O}`}function u(y){let O=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${f()}?${O}`}function c(y){r=y,n(1,r)}function d(y){s=y,n(0,s)}function m(){o=jt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,r,o,i,a,u,c,d,m]}class Tf extends J{constructor(e){super(),K(this,e,Cf,Sf,X,{})}}function Of(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Wards`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Af(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lf(l){let e,n,t,r,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Af]},$$scope:{ctx:l}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function If(l){let e,n,t;return n=new ge({props:{$$slots:{default:[Lf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Pf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&R(t,n)},d(r){r&&p(e)}}}function Mf(l){let e,n;return e=new fe({props:{$$slots:{default:[Pf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nf(l){let e,n,t,r;const o=[z(Ve),{sourceLayer:Ve},{paint:{"fill-color":l[1],"fill-opacity":x(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Mf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",Ef);const f=[z(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),r=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(z(Ve)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?te(f,[u&0&&ie(z(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){r||(_(e.$$.fragment,a),_(t.$$.fragment,a),r=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ff(l){let e,n,t,r,o;function s(i){l[2](i)}let f={id:Ve,$$slots:{right:[If],default:[Of]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),r=new we({props:{url:`pmtiles://${be()}/v1/${Ve}.pmtiles`,$$slots:{default:[Nf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ve="wards";function Ef(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Df(l,e,n){let t=ne.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class jf extends J{constructor(e){super(),K(this,e,Df,Ff,X,{})}}function Rf(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bf(l){let e,n,t,r;return t=new Q({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Rf]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),h(t.$$.fragment)},m(o,s){$(o,e,s),w(e,n),b(t,e,null),r=!0},p(o,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:o}),t.$set(f)},i(o){r||(_(t.$$.fragment,o),r=!0)},o(o){g(t.$$.fragment,o),r=!1},d(o){o&&p(e),v(t)}}}class it extends J{constructor(e){super(),K(this,e,null,Bf,X,{})}}function Hf(l){let e,n,t;return e=new Ce({props:{color:ne.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function zf(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gf(l){let e,n,t,r,o,s,f,i,a;return o=new Q({props:{href:"https://gtfs.org",$$slots:{default:[zf]},$$scope:{ctx:l}}}),i=new it({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=T("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),f=L(),h(i.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),w(t,r),b(o,t,null),w(t,s),$(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&8&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){a||(_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){g(o.$$.fragment,u),g(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(f)),v(o),v(i,u)}}}function Uf(l){let e,n,t;return n=new ge({props:{$$slots:{default:[Gf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function qf(l){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wf(l){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vf(l){let e;function n(o,s){return o[2].has_bus_lane?Wf:qf}let t=n(l),r=t(l);return{c(){r.c(),e=Me()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function Xf(l){let e,n;return e=new fe({props:{$$slots:{default:[Vf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yf(l){let e,n;const t=[z(_t),{sourceLayer:_t},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ne.bus_route_with_lane,ne.bus_route_without_lane],"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Xf]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&1?te(t,[s&0&&ie(z(_t)),s&0&&{sourceLayer:_t},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Qf(l){let e,n,t,r,o;function s(i){l[1](i)}let f={id:_t,$$slots:{right:[Uf],default:[Hf]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),r=new we({props:{url:`pmtiles://${be()}/v1/${_t}.pmtiles`,$$slots:{default:[Yf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let _t="bus_routes";function Jf(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Kf extends J{constructor(e){super(),K(this,e,Jf,Qf,X,{})}}function dr(l){const e=iu(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function hr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function Zf(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xf(l){let e,n,t,r,o,s,f,i;return f=new it({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=L(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=L(),h(f.$$.fragment)},m(a,u){$(a,e,u),$(a,n,u),$(a,t,u),$(a,r,u),$(a,o,u),$(a,s,u),b(f,a,u),i=!0},p:re,i(a){i||(_(f.$$.fragment,a),i=!0)},o(a){g(f.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),v(f,a)}}}function eu(l){let e,n,t;return n=new ge({props:{$$slots:{default:[xf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function br(l){let e,n,t;return n=new Ke({props:{$$slots:{default:[nu]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),ke(e,"border","1px solid black"),ke(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function tu(l){let e,n,t=l[9]+"",r,o,s;return e=new Ce({props:{color:l[10]}}),{c(){h(e.$$.fragment),n=L(),r=k(t),o=L()},m(f,i){b(e,f,i),$(f,n,i),$(f,r,i),$(f,o,i),s=!0},p:re,i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(r),p(o)),v(e,f)}}}function vr(l){let e,n,t;function r(s){l[4](s,l[6])}let o={id:l[6],$$slots:{default:[tu]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new se({props:o}),q.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){l=s;const i={};f&8192&&(i.$$scope={dirty:f,ctx:l}),!n&&f&6&&(n=!0,i.checked=l[1][l[6]],V(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function nu(l){let e,n,t=Ne(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=vr(hr(l,t,s));const o=s=>g(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Me()},m(s,f){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,f);$(s,e,f),n=!0},p(s,f){if(f&6){t=Ne(s[2]);let i;for(i=0;i<t.length;i+=1){const a=hr(s,t,i);r[i]?(r[i].p(a,f),_(r[i],1)):(r[i]=vr(a),r[i].c(),_(r[i],1),r[i].m(e.parentNode,e))}for(me(),i=t.length;i<r.length;i+=1)o(i);_e()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)_(r[f]);n=!0}},o(s){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)g(r[f]);n=!1},d(s){s&&p(e),Ot(r,s)}}}function ru(l){dr(l);let e,n=l[6]+"",t,r,o,s,f,i=l[7]+"",a,u,c,d,m=l[8]+"",y;return{c(){e=T("h2"),t=k(n),r=L(),o=T("p"),s=k("Direction: "),f=T("b"),a=L(),u=T("p"),c=k("Width: "),d=T("b"),y=k(m)},m(O,S){$(O,e,S),w(e,t),$(O,r,S),$(O,o,S),w(o,s),w(o,f),f.innerHTML=i,$(O,a,S),$(O,u,S),w(u,c),w(u,d),w(d,y)},p(O,S){dr(O),S&32&&n!==(n=O[6]+"")&&R(t,n),S&32&&i!==(i=O[7]+"")&&(f.innerHTML=i),S&32&&m!==(m=O[8]+"")&&R(y,m)},d(O){O&&(p(e),p(r),p(o),p(a),p(u))}}}function lu(l){let e,n;return e=new fe({props:{$$slots:{default:[ru,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ou(l){let e,n;const t=[z(gt),{sourceLayer:gt},{paint:{"line-color":qt(["get","kind"],{track:ne.cycle_paths.track,lane:ne.cycle_paths.lane,shared_use_segregated:ne.cycle_paths.shared_use_segregated,shared_use_unsegregated:ne.cycle_paths.shared_use_unsegregated},"red"),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:wr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[lu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),e.$on("click",au),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(z(gt)),s&0&&{sourceLayer:gt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:wr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function su(l){let e,n,t,r,o,s;function f(u){l[3](u)}let i={id:gt,$$slots:{right:[eu],default:[Zf]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=l[0]&&br(l);return o=new we({props:{url:`pmtiles://${be()}/v1/${gt}.pmtiles`,$$slots:{default:[ou]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&8192&&(d.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,d.checked=u[0],V(()=>n=!1)),e.$set(d),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=br(u),a.c(),_(a,1),a.m(r.parentNode,r)):a&&(me(),g(a,1,1,()=>{a=null}),_e());const m={};c&8195&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),v(e,u),a&&a.d(u),v(o,u)}}}let gt="cycle_paths";function iu(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function au(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function wr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function fu(l,e,n){let t=[["track","Separated tracks",ne.cycle_paths.track],["lane","Unprotected lanes",ne.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",ne.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",ne.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function f(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,f]}class uu extends J{constructor(e){super(),K(this,e,fu,su,X,{})}}function cu(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function $u(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pu(l){let e,n,t,r,o,s,f;return t=new Q({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[$u]},$$scope:{ctx:l}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from the "),h(t.$$.fragment),r=k(", as of September 2021."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function mu(l){let e,n,t;return n=new ge({props:{$$slots:{default:[pu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function _u(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&R(t,n)},d(r){r&&p(e)}}}function gu(l){let e,n;return e=new fe({props:{$$slots:{default:[_u,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function du(l){let e,n;const t=[z(dt),{sourceLayer:dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[gu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(z(dt)),s&0&&{sourceLayer:dt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function hu(l){let e,n,t,r,o;function s(i){l[2](i)}let f={id:dt,$$slots:{right:[mu],default:[cu]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),r=new we({props:{url:`pmtiles://${be()}/v1/${dt}.pmtiles`,$$slots:{default:[du]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let dt="mrn";function bu(l,e,n){let t=ne.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class vu extends J{constructor(e){super(),K(this,e,bu,hu,X,{})}}function wu(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function ku(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yu(l){let e,n,t,r,o,s,f;return t=new Q({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[ku]},$$scope:{ctx:l}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),h(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Su(l){let e,n,t;return n=new ge({props:{$$slots:{default:[yu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function kr(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&r!==(r=s[3].Desc_+"")&&R(o,r)},d(s){s&&p(e)}}}function yr(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&r!==(r=s[3].Greenway+"")&&R(o,r)},d(s){s&&p(e)}}}function Sr(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&r!==(r=s[3].RouteType+"")&&R(o,r)},d(s){s&&p(e)}}}function Cr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&r!==(r=s[3].RouteNo+"")&&R(o,r)},d(s){s&&p(e)}}}function Tr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&r!==(r=s[3].RouteCat+"")&&R(o,r)},d(s){s&&p(e)}}}function Or(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&r!==(r=s[3].OpenStatus+"")&&R(o,r)},d(s){s&&p(e)}}}function Ar(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&r!==(r=s[3].Surface+"")&&R(o,r)},d(s){s&&p(e)}}}function Lr(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&r!==(r=s[3].Quality+"")&&R(o,r)},d(s){s&&p(e)}}}function Ir(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&r!==(r=s[3].RoadClass+"")&&R(o,r)},d(s){s&&p(e)}}}function Cu(l){let e,n,t,r,o,s,f,i,a,u=l[3].Desc_&&kr(l),c=l[3].Greenway&&yr(l),d=l[3].RouteType&&Sr(l),m=l[3].RouteNo&&Cr(l),y=l[3].RouteCat&&Tr(l),O=l[3].OpenStatus&&Or(l),S=l[3].Surface&&Ar(l),C=l[3].Quality&&Lr(l),N=l[3].RoadClass&&Ir(l);return{c(){e=T("ul"),u&&u.c(),n=L(),c&&c.c(),t=L(),d&&d.c(),r=L(),m&&m.c(),o=L(),y&&y.c(),s=L(),O&&O.c(),f=L(),S&&S.c(),i=L(),C&&C.c(),a=L(),N&&N.c()},m(D,F){$(D,e,F),u&&u.m(e,null),w(e,n),c&&c.m(e,null),w(e,t),d&&d.m(e,null),w(e,r),m&&m.m(e,null),w(e,o),y&&y.m(e,null),w(e,s),O&&O.m(e,null),w(e,f),S&&S.m(e,null),w(e,i),C&&C.m(e,null),w(e,a),N&&N.m(e,null)},p(D,F){D[3].Desc_?u?u.p(D,F):(u=kr(D),u.c(),u.m(e,n)):u&&(u.d(1),u=null),D[3].Greenway?c?c.p(D,F):(c=yr(D),c.c(),c.m(e,t)):c&&(c.d(1),c=null),D[3].RouteType?d?d.p(D,F):(d=Sr(D),d.c(),d.m(e,r)):d&&(d.d(1),d=null),D[3].RouteNo?m?m.p(D,F):(m=Cr(D),m.c(),m.m(e,o)):m&&(m.d(1),m=null),D[3].RouteCat?y?y.p(D,F):(y=Tr(D),y.c(),y.m(e,s)):y&&(y.d(1),y=null),D[3].OpenStatus?O?O.p(D,F):(O=Or(D),O.c(),O.m(e,f)):O&&(O.d(1),O=null),D[3].Surface?S?S.p(D,F):(S=Ar(D),S.c(),S.m(e,i)):S&&(S.d(1),S=null),D[3].Quality?C?C.p(D,F):(C=Lr(D),C.c(),C.m(e,a)):C&&(C.d(1),C=null),D[3].RoadClass?N?N.p(D,F):(N=Ir(D),N.c(),N.m(e,null)):N&&(N.d(1),N=null)},d(D){D&&p(e),u&&u.d(),c&&c.d(),d&&d.d(),m&&m.d(),y&&y.d(),O&&O.d(),S&&S.d(),C&&C.d(),N&&N.d()}}}function Tu(l){let e,n;return e=new fe({props:{$$slots:{default:[Cu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ou(l){let e,n;const t=[z(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Tu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(z(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Au(l){let e,n,t,r,o;function s(i){l[2](i)}let f={id:ht,$$slots:{right:[Su],default:[wu]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),r=new we({props:{url:`pmtiles://${be()}/v1/${ht}.pmtiles`,$$slots:{default:[Ou]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let ht="national_cycle_network";function Lu(l,e,n){let t=ne.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Iu extends J{constructor(e){super(),K(this,e,Lu,Au,X,{})}}function Pu(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mu(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nu(l){let e,n,t,r,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Mu]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=L(),t=T("p"),t.textContent="Data valid as of 1 January, 2024",r=L(),o=T("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,r,c),$(u,o,c),w(o,s),b(f,o,null),w(o,i),a=!0},p(u,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),f.$set(d)},i(u){a||(_(f.$$.fragment,u),a=!0)},o(u){g(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(r),p(o)),v(f)}}}function Fu(l){let e,n,t;return n=new ge({props:{$$slots:{default:[Nu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Pr(l){let e,n;return e=new Ze({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Eu(l){let e,n,t,r=l[4].side+"",o,s,f,i,a,u=l[4].average+"",c,d,m,y,O,S,C=l[4].minimum+"",N,D;return{c(){e=T("p"),n=k("Side of the road: "),t=T("b"),o=k(r),s=L(),f=T("p"),i=k("Average width: "),a=T("b"),c=k(u),d=k(`
        meters`),m=L(),y=T("p"),O=k("Minimum width: "),S=T("b"),N=k(C),D=k(`
        meters`)},m(F,P){$(F,e,P),w(e,n),w(e,t),w(t,o),$(F,s,P),$(F,f,P),w(f,i),w(f,a),w(a,c),w(f,d),$(F,m,P),$(F,y,P),w(y,O),w(y,S),w(S,N),w(y,D)},p(F,P){P&16&&r!==(r=F[4].side+"")&&R(o,r),P&16&&u!==(u=F[4].average+"")&&R(c,u),P&16&&C!==(C=F[4].minimum+"")&&R(N,C)},d(F){F&&(p(e),p(s),p(f),p(m),p(y))}}}function Du(l){let e,n;return e=new fe({props:{$$slots:{default:[Eu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ju(l){let e,n;const t=[z(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get","average"],l[2],l[1]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Du]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&ie(z(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&6&&{paint:{"line-color":ye(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ru(l){let e,n,t,r,o,s;function f(u){l[3](u)}let i={id:bt,$$slots:{right:[Fu],default:[Pu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=l[0]&&Pr(l);return o=new we({props:{url:`pmtiles://${rn()}/v1/${bt}.pmtiles`,$$slots:{default:[ju]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,d.checked=u[0],V(()=>n=!1)),e.$set(d),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Pr(u),a.c(),_(a,1),a.m(r.parentNode,r)):a&&(me(),g(a,1,1,()=>{a=null}),_e());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),v(e,u),a&&a.d(u),v(o,u)}}}let bt="pavement_widths";function Bu(l,e,n){let t=ne.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(f){o=f,n(0,o)}return[o,t,r,s]}class Hu extends J{constructor(e){super(),K(this,e,Bu,Ru,X,{})}}function zu(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gu(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uu(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qu(l){let e,n,t,r,o,s,f,i,a,u,c;return f=new Q({props:{href:"https://www.pct.bike",$$slots:{default:[Gu]},$$scope:{ctx:l}}}),a=new Q({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Uu]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=L(),o=T("p"),s=k("See "),h(f.$$.fragment),i=k(" and "),h(a.$$.fragment),u=k(" for details on methodology and data sources.")},m(d,m){$(d,e,m),$(d,n,m),$(d,t,m),$(d,r,m),$(d,o,m),w(o,s),b(f,o,null),w(o,i),b(a,o,null),w(o,u),c=!0},p(d,m){const y={};m&1024&&(y.$$scope={dirty:m,ctx:d}),f.$set(y);const O={};m&1024&&(O.$$scope={dirty:m,ctx:d}),a.$set(O)},i(d){c||(_(f.$$.fragment,d),_(a.$$.fragment,d),c=!0)},o(d){g(f.$$.fragment,d),g(a.$$.fragment,d),c=!1},d(d){d&&(p(e),p(n),p(t),p(r),p(o)),v(f),v(a)}}}function Wu(l){let e,n,t;return n=new ge({props:{$$slots:{default:[qu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Mr(l){let e,n,t,r,o,s,f,i;e=new Ze({props:{colorScale:l[3],limits:l[4]}});function a(m){l[7](m)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(u.value=l[0]),t=new fl({props:u}),q.push(()=>W(t,"value",a));function c(m){l[8](m)}let d={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(d.value=l[1]),s=new Tt({props:d}),q.push(()=>W(s,"value",c)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(s.$$.fragment)},m(m,y){b(e,m,y),$(m,n,y),b(t,m,y),$(m,o,y),b(s,m,y),i=!0},p(m,y){const O={};!r&&y&1&&(r=!0,O.value=m[0],V(()=>r=!1)),t.$set(O);const S={};!f&&y&2&&(f=!0,S.value=m[1],V(()=>f=!1)),s.$set(S)},i(m){i||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(s.$$.fragment,m),i=!0)},o(m){g(e.$$.fragment,m),g(t.$$.fragment,m),g(s.$$.fragment,m),i=!1},d(m){m&&(p(n),p(o)),v(e,m),v(t,m),v(s,m)}}}function Vu(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Ft(!1),t=Me(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function Xu(l){let e,n;return e=new fe({props:{$$slots:{default:[Vu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yu(l){let e,n;const t=[z(Xe),{sourceLayer:Xe},{paint:{"line-color":ye(["get",l[1]],l[4],l[3]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:l[2]&&l[0]==Xe?"visible":"none"}}];let r={$$slots:{default:[Xu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&31?te(t,[s&0&&ie(z(Xe)),s&0&&{sourceLayer:Xe},s&26&&{paint:{"line-color":ye(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==Xe?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Qu(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Ft(!1),t=Me(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function Ju(l){let e,n;return e=new fe({props:{$$slots:{default:[Qu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ku(l){let e,n;const t=[z(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get",l[1]],l[4],l[3]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:l[2]&&l[0]==at?"visible":"none"}}];let r={$$slots:{default:[Ju]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&31?te(t,[s&0&&ie(z(at)),s&0&&{sourceLayer:at},t[2],t[3],s&26&&{paint:{"line-color":ye(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==at?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Zu(l){let e,n,t,r,o,s,f,i;function a(d){l[6](d)}let u={id:Xe,$$slots:{right:[Wu],default:[zu]},$$scope:{ctx:l}};l[2]!==void 0&&(u.checked=l[2]),e=new se({props:u}),q.push(()=>W(e,"checked",a));let c=l[2]&&Mr(l);return o=new we({props:{url:`pmtiles://${be()}/v1/${Xe}.pmtiles`,$$slots:{default:[Yu]},$$scope:{ctx:l}}}),f=new we({props:{url:`pmtiles://${be()}/v1/${at}.pmtiles`,$$slots:{default:[Ku]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),c&&c.c(),r=L(),h(o.$$.fragment),s=L(),h(f.$$.fragment)},m(d,m){b(e,d,m),$(d,t,m),c&&c.m(d,m),$(d,r,m),b(o,d,m),$(d,s,m),b(f,d,m),i=!0},p(d,[m]){const y={};m&1024&&(y.$$scope={dirty:m,ctx:d}),!n&&m&4&&(n=!0,y.checked=d[2],V(()=>n=!1)),e.$set(y),d[2]?c?(c.p(d,m),m&4&&_(c,1)):(c=Mr(d),c.c(),_(c,1),c.m(r.parentNode,r)):c&&(me(),g(c,1,1,()=>{c=null}),_e());const O={};m&1031&&(O.$$scope={dirty:m,ctx:d}),o.$set(O);const S={};m&1031&&(S.$$scope={dirty:m,ctx:d}),f.$set(S)},i(d){i||(_(e.$$.fragment,d),_(c),_(o.$$.fragment,d),_(f.$$.fragment,d),i=!0)},o(d){g(e.$$.fragment,d),g(c),g(o.$$.fragment,d),g(f.$$.fragment,d),i=!1},d(d){d&&(p(t),p(r),p(s)),v(e,d),c&&c.d(d),v(o,d),v(f,d)}}}let Xe="pct_commute",at="pct_school";function xu(l,e,n){let t=ne.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=Xe,s="baseline",f=!1;function i(d){let m=d.baseline,y=d.gov_target,O=d.go_dutch,S=`<h2>Trip purpose: ${o==Xe?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${O.toLocaleString()}</b></p>`;else{let C=(y/m).toFixed(1),N=(O/m).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${C}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${O.toLocaleString()} (<b>${N}x</b> of baseline)</p>`}return S}function a(d){f=d,n(2,f)}function u(d){o=d,n(0,o)}function c(d){s=d,n(1,s)}return[o,s,f,t,r,i,a,u,c]}class ec extends J{constructor(e){super(),K(this,e,xu,Zu,X,{})}}function tc(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nc(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lc(l){let e,n,t,r,o,s,f,i,a,u,c,d;return t=new Q({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[nc]},$$scope:{ctx:l}}}),u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[rc]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),h(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",f=L(),i=T("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),c=k(".")},m(m,y){$(m,e,y),w(e,n),b(t,e,null),w(e,r),$(m,o,y),$(m,s,y),$(m,f,y),$(m,i,y),w(i,a),b(u,i,null),w(i,c),d=!0},p(m,y){const O={};y&256&&(O.$$scope={dirty:y,ctx:m}),t.$set(O);const S={};y&256&&(S.$$scope={dirty:y,ctx:m}),u.$set(S)},i(m){d||(_(t.$$.fragment,m),_(u.$$.fragment,m),d=!0)},o(m){g(t.$$.fragment,m),g(u.$$.fragment,m),d=!1},d(m){m&&(p(e),p(o),p(s),p(f),p(i)),v(t),v(u)}}}function oc(l){let e,n,t;return n=new ge({props:{$$slots:{default:[lc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Nr(l){let e,n,t,r,o;e=new Ze({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let f={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(f.value=l[0]),t=new fl({props:f}),q.push(()=>W(t,"value",s)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const u={};!r&&a&1&&(r=!0,u.value=i[0],V(()=>r=!1)),t.$set(u)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function sc(l){let e,n,t=l[7].indicative_mph+"",r,o,s,f,i,a=l[7].highest_mph+"",u,c,d=l[4][l[7].highest_description]+"",m,y;return{c(){e=T("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=L(),f=T("p"),i=k("Highest average speed: "),u=k(a),c=k(" mph (during "),m=k(d),y=k(")")},m(O,S){$(O,e,S),w(e,n),w(e,r),w(e,o),$(O,s,S),$(O,f,S),w(f,i),w(f,u),w(f,c),w(f,m),w(f,y)},p(O,S){S&128&&t!==(t=O[7].indicative_mph+"")&&R(r,t),S&128&&a!==(a=O[7].highest_mph+"")&&R(u,a),S&128&&d!==(d=O[4][O[7].highest_description]+"")&&R(m,d)},d(O){O&&(p(e),p(s),p(f))}}}function ic(l){let e,n;return e=new fe({props:{$$slots:{default:[sc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ac(l){let e,n;const t=[z(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get",l[0]],l[3],l[2]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[ic]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&15?te(t,[s&0&&ie(z(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&13&&{paint:{"line-color":ye(["get",o[0]],o[3],o[2]),"line-width":He,"line-opacity":x(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function fc(l){let e,n,t,r,o,s;function f(u){l[5](u)}let i={id:vt,$$slots:{right:[oc],default:[tc]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=l[1]&&Nr(l);return o=new we({props:{url:`pmtiles://${rn()}/v1/${vt}.pmtiles`,$$slots:{default:[ac]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&256&&(d.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,d.checked=u[1],V(()=>n=!1)),e.$set(d),u[1]?a?(a.p(u,c),c&2&&_(a,1)):(a=Nr(u),a.c(),_(a,1),a.m(r.parentNode,r)):a&&(me(),g(a,1,1,()=>{a=null}),_e());const m={};c&259&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),v(e,u),a&&a.d(u),v(o,u)}}}let vt="road_speeds";function uc(l,e,n){let t=ne.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,f={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(u){s=u,n(1,s)}function a(u){o=u,n(0,o)}return[o,s,t,r,f,i,a]}class cc extends J{constructor(e){super(),K(this,e,uc,fc,X,{})}}function $c(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mc(l){let e,n,t,r,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[pc]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",r=L(),o=T("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,r,c),$(u,o,c),w(o,s),b(f,o,null),w(o,i),a=!0},p(u,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),f.$set(d)},i(u){a||(_(f.$$.fragment,u),a=!0)},o(u){g(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(r),p(o)),v(f)}}}function _c(l){let e,n,t;return n=new ge({props:{$$slots:{default:[mc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Fr(l){let e,n;return e=new Ze({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gc(l){let e,n,t,r=l[4].average+"",o,s,f,i,a,u,c=l[4].minimum+"",d,m;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(r),s=k(`
        meters`),f=L(),i=T("p"),a=k("Minimum width: "),u=T("b"),d=k(c),m=k(`
        meters`)},m(y,O){$(y,e,O),w(e,n),w(e,t),w(t,o),w(e,s),$(y,f,O),$(y,i,O),w(i,a),w(i,u),w(u,d),w(i,m)},p(y,O){O&16&&r!==(r=y[4].average+"")&&R(o,r),O&16&&c!==(c=y[4].minimum+"")&&R(d,c)},d(y){y&&(p(e),p(f),p(i))}}}function dc(l){let e,n;return e=new fe({props:{$$slots:{default:[gc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hc(l){let e,n;const t=[z(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get","average"],l[2],l[1]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[dc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Se({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&ie(z(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&6&&{paint:{"line-color":ye(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function bc(l){let e,n,t,r,o,s;function f(u){l[3](u)}let i={id:wt,$$slots:{right:[_c],default:[$c]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=l[0]&&Fr(l);return o=new we({props:{url:`pmtiles://${rn()}/v1/${wt}.pmtiles`,$$slots:{default:[hc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,d.checked=u[0],V(()=>n=!1)),e.$set(d),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Fr(u),a.c(),_(a,1),a.m(r.parentNode,r)):a&&(me(),g(a,1,1,()=>{a=null}),_e());const m={};c&33&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),v(e,u),a&&a.d(u),v(o,u)}}}let wt="road_widths";function vc(l,e,n){let t=ne.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(f){o=f,n(0,o)}return[o,t,r,s]}class wc extends J{constructor(e){super(),K(this,e,vc,bc,X,{})}}function kc(l){let e,n,t;return{c(){e=T("input"),U(e,"class","govuk-file-upload"),U(e,"id","load-criticals"),U(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=st(e,"change",l[5]),n=!0)},p:re,d(r){r&&p(e),l[7](null),n=!1,t()}}}function Er(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[Sc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yc(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Ce({props:{color:Mt}}),{c(){h(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(f,i){b(e,f,i),$(f,n,i),$(f,r,i),$(f,o,i),s=!0},p(f,i){(!s||i&4)&&t!==(t=f[2].toLocaleString()+"")&&R(r,t)},i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(r),p(o)),v(e,f)}}}function Sc(l){let e,n,t;function r(s){l[8](s)}let o={id:"show-criticals",$$slots:{default:[yc]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new se({props:o}),q.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f&2052&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Cc(l){let e,n,t,r,o,s;e=new $n({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[kc]},$$scope:{ctx:l}}}),t=new ul({props:{errorMessage:l[3]}});let f=l[2]>0&&Er(l);return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),f&&f.c(),o=Me()},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),f&&f.m(i,a),$(i,o,a),s=!0},p(i,a){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?f?(f.p(i,a),a&4&&_(f,1)):(f=Er(i),f.c(),_(f,1),f.m(o.parentNode,o)):f&&(me(),g(f,1,1,()=>{f=null}),_e())},i(i){s||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(f),s=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(f),s=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),f&&f.d(i)}}}function Tc(l){let e,n,t=l[10].critical_type+"",r,o,s,f,i,a=l[10].location_description+"",u,c,d,m,y,O=l[10].notes+"",S,C,N,D,F,P,I,M=l[10].id+"",A,E,B,H,j,G=(l[10].inspector??"???")+"",Y,le,Z,Te=l[10].submission_time+"",Le,ae,de,Ae,ue,ce=l[10].scheme_reference+"",$e,Ee,Oe,Ge=l[10].current_design_stage+"",xe;return{c(){e=T("div"),n=T("h2"),r=k(t),o=L(),s=T("p"),f=T("u"),f.textContent="Location",i=k(`
          : `),u=k(a),c=L(),d=T("p"),m=T("u"),m.textContent="Notes",y=k(`
          : `),S=k(O),C=L(),N=T("hr"),D=L(),F=T("p"),P=k("Critical issue ID: "),I=T("b"),A=k(M),E=L(),B=T("p"),H=k("Submitted by "),j=T("b"),Y=k(G),le=k(`
          at
          `),Z=T("b"),Le=k(Te),ae=L(),de=T("p"),Ae=k("For scheme "),ue=T("b"),$e=k(ce),Ee=k(`
          in stage
          `),Oe=T("b"),xe=k(Ge),ke(e,"max-width","30vw")},m(oe,he){$(oe,e,he),w(e,n),w(n,r),w(e,o),w(e,s),w(s,f),w(s,i),w(s,u),w(e,c),w(e,d),w(d,m),w(d,y),w(d,S),w(e,C),w(e,N),w(e,D),w(e,F),w(F,P),w(F,I),w(I,A),w(e,E),w(e,B),w(B,H),w(B,j),w(j,Y),w(B,le),w(B,Z),w(Z,Le),w(e,ae),w(e,de),w(de,Ae),w(de,ue),w(ue,$e),w(de,Ee),w(de,Oe),w(Oe,xe)},p(oe,he){he&1024&&t!==(t=oe[10].critical_type+"")&&R(r,t),he&1024&&a!==(a=oe[10].location_description+"")&&R(u,a),he&1024&&O!==(O=oe[10].notes+"")&&R(S,O),he&1024&&M!==(M=oe[10].id+"")&&R(A,M),he&1024&&G!==(G=(oe[10].inspector??"???")+"")&&R(Y,G),he&1024&&Te!==(Te=oe[10].submission_time+"")&&R(Le,Te),he&1024&&ce!==(ce=oe[10].scheme_reference+"")&&R($e,ce),he&1024&&Ge!==(Ge=oe[10].current_design_stage+"")&&R(xe,Ge)},d(oe){oe&&p(e)}}}function Oc(l){let e,n;return e=new fe({props:{$$slots:{default:[Tc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ac(l){let e,n,t,r,o,s;const f=[z(`${lt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Mt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let m=0;m<f.length;m+=1)i=ee(i,f[m]);e=new nt({props:i}),e.$on("click",l[6]);const a=[z(`${lt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let u={};for(let m=0;m<a.length;m+=1)u=ee(u,a[m]);t=new uo({props:u});const c=[z(`${lt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Mt,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let d={$$slots:{default:[Oc]},$$scope:{ctx:l}};for(let m=0;m<c.length;m+=1)d=ee(d,c[m]);return o=new nt({props:d}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(m,y){b(e,m,y),$(m,n,y),b(t,m,y),$(m,r,y),b(o,m,y),s=!0},p(m,y){const O=y&2?te(f,[y&0&&ie(z(`${lt}-clusters`)),f[1],y&0&&{paint:{"circle-color":Mt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:m[1]?"visible":"none"}},f[4]]):{};e.$set(O);const S=y&2?te(a,[y&0&&ie(z(`${lt}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:m[1]?"visible":"none"}}]):{};t.$set(S);const C=y&2?te(c,[y&0&&ie(z(`${lt}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":Mt,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:m[1]?"visible":"none"}}]):{};y&2048&&(C.$$scope={dirty:y,ctx:m}),o.$set(C)},i(m){s||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(o.$$.fragment,m),s=!0)},o(m){g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),s=!1},d(m){m&&(p(n),p(r)),v(e,m),v(t,m),v(o,m)}}}function Lc(l){let e,n,t,r;return e=new Re({props:{label:"Critical Issues",$$slots:{default:[Cc]},$$scope:{ctx:l}}}),t=new It({props:{id:lt,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Ac]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const f={};s&2063&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(_(e.$$.fragment,o),_(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let lt="criticals",Mt="red";function Ic(l,e,n){let t;ve(l,kn,m=>n(9,t=m));let r,o=!0,s=0,f="",i=El();async function a(m){try{n(4,i=await gi(r.files[0])),n(2,s=i.features.length),n(3,f="")}catch(y){n(3,f=`The file you loaded is broken: ${y}`)}}function u(m){t.getSource(lt).getClusterExpansionZoom(m.detail.features[0].properties.cluster_id,(y,O)=>{y||t.easeTo({center:m.detail.features[0].geometry.coordinates,zoom:O})})}function c(m){q[m?"unshift":"push"](()=>{r=m,n(0,r)})}function d(m){o=m,n(1,o)}return[r,o,s,f,i,a,u,c,d]}class Pc extends J{constructor(e){super(),K(this,e,Ic,Lc,X,{})}}function Mc(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Crossings`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Nc(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fc(l){let e,n,t,r,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Nc]},$$scope:{ctx:l}}}),s=new it({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Ec(l){let e,n,t;return n=new ge({props:{$$slots:{default:[Fc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Dc(l){let e,n=Dr(l[3])+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=Dr(r[3])+"")&&R(t,n)},d(r){r&&p(e)}}}function jc(l){let e,n;return e=new fe({props:{$$slots:{default:[Dc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rc(l){let e,n;const t=[z(kt),{sourceLayer:kt},{paint:{"circle-color":l[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[jc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new nt({props:r}),e.$on("click",Hc),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(z(kt)),s&0&&{sourceLayer:kt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Bc(l){let e,n,t,r,o;function s(i){l[2](i)}let f={id:kt,$$slots:{right:[Ec],default:[Mc]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),r=new we({props:{url:`pmtiles://${be()}/v1/${kt}.pmtiles`,$$slots:{default:[Rc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let kt="crossings";function Dr(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function Hc(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function zc(l,e,n){let t=ne.crossings,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Gc extends J{constructor(e){super(),K(this,e,zc,Bc,X,{})}}function Uc(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Cycle parking`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function qc(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wc(l){let e,n,t,r,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[qc]},$$scope:{ctx:l}}}),s=new it({}),{c(){e=T("p"),n=k("Cycle parking, according to "),h(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Vc(l){let e,n,t;return n=new ge({props:{$$slots:{default:[Wc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Xc(l){let e,n,t,r=(l[3].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&r!==(r=(s[3].capacity??"unknown")+"")&&R(o,r)},d(s){s&&p(e)}}}function Yc(l){let e,n;return e=new fe({props:{$$slots:{default:[Xc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qc(l){let e,n;const t=[z(yt),{sourceLayer:yt},{paint:{"circle-color":l[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Yc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new nt({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(z(yt)),s&0&&{sourceLayer:yt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Jc(l){let e,n,t,r,o;function s(i){l[2](i)}let f={id:yt,$$slots:{right:[Vc],default:[Uc]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),r=new we({props:{url:`pmtiles://${be()}/v1/${yt}.pmtiles`,$$slots:{default:[Qc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let yt="cycle_parking";function Kc(l,e,n){let t=ne.cycle_parking,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Zc extends J{constructor(e){super(),K(this,e,Kc,Jc,X,{})}}function xc(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function e$(l){let e,n,t,r;return t=new it({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:re,i(o){r||(_(t.$$.fragment,o),r=!0)},o(o){g(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function t$(l){let e,n,t;return n=new ge({props:{$$slots:{default:[e$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function jr(l){let e,n,t;return n=new Ke({props:{$$slots:{default:[o$]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),ke(e,"border","1px solid black"),ke(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function n$(l){let e,n,t;return e=new Ce({props:{color:ne.education.schools}}),{c(){h(e.$$.fragment),n=k(`
        Schools`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function r$(l){let e,n,t;return e=new Ce({props:{color:ne.education.colleges}}),{c(){h(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function l$(l){let e,n,t;return e=new Ce({props:{color:ne.education.universities}}),{c(){h(e.$$.fragment),n=k(`
        Universities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function o$(l){let e,n,t,r,o,s,f,i,a;function u(S){l[3](S)}let c={id:"school",$$slots:{default:[n$]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new se({props:c}),q.push(()=>W(e,"checked",u));function d(S){l[4](S)}let m={id:"college",$$slots:{default:[r$]},$$scope:{ctx:l}};l[1].college!==void 0&&(m.checked=l[1].college),r=new se({props:m}),q.push(()=>W(r,"checked",d));function y(S){l[5](S)}let O={id:"university",$$slots:{default:[l$]},$$scope:{ctx:l}};return l[1].university!==void 0&&(O.checked=l[1].university),f=new se({props:O}),q.push(()=>W(f,"checked",y)),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment),s=L(),h(f.$$.fragment)},m(S,C){b(e,S,C),$(S,t,C),b(r,S,C),$(S,s,C),b(f,S,C),a=!0},p(S,C){const N={};C&128&&(N.$$scope={dirty:C,ctx:S}),!n&&C&2&&(n=!0,N.checked=S[1].school,V(()=>n=!1)),e.$set(N);const D={};C&128&&(D.$$scope={dirty:C,ctx:S}),!o&&C&2&&(o=!0,D.checked=S[1].college,V(()=>o=!1)),r.$set(D);const F={};C&128&&(F.$$scope={dirty:C,ctx:S}),!i&&C&2&&(i=!0,F.checked=S[1].university,V(()=>i=!1)),f.$set(F)},i(S){a||(_(e.$$.fragment,S),_(r.$$.fragment,S),_(f.$$.fragment,S),a=!0)},o(S){g(e.$$.fragment,S),g(r.$$.fragment,S),g(f.$$.fragment,S),a=!1},d(S){S&&(p(t),p(s)),v(e,S),v(r,S),v(f,S)}}}function s$(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&R(t,n)},d(r){r&&p(e)}}}function i$(l){let e,n;return e=new fe({props:{$$slots:{default:[s$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function a$(l){let e,n;const t=[z(Nt),{sourceLayer:Nt},{paint:{"fill-color":qt(["get","type"],{school:ne.education.schools,college:ne.education.colleges,university:ne.education.universities},"grey"),"fill-opacity":x(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Rr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[i$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ze({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(z(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Rr(o[1])},t[5],t[6]]):{};s&128&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function f$(l){let e,n,t,r,o,s;function f(u){l[2](u)}let i={id:"education",$$slots:{right:[t$],default:[xc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=l[0]&&jr(l);return o=new we({props:{url:`pmtiles://${be()}/v1/${Nt}.pmtiles`,$$slots:{default:[a$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&128&&(d.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,d.checked=u[0],V(()=>n=!1)),e.$set(d),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=jr(u),a.c(),_(a,1),a.m(r.parentNode,r)):a&&(me(),g(a,1,1,()=>{a=null}),_e());const m={};c&131&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),v(e,u),a&&a.d(u),v(o,u)}}}let Nt="education";function Rr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function u$(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function f(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,f,i]}class c$ extends J{constructor(e){super(),K(this,e,u$,f$,X,{})}}function $$(l){let e,n,t,r;return e=new Ce({props:{color:l[4]}}),{c(){h(e.$$.fragment),n=L(),t=k(l[2])},m(o,s){b(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&R(t,o[2])},i(o){r||(_(e.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function p$(l){let e;const n=l[5].default,t=Ht(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&zt(t,n,r,r[7],e?Ut(n,r[7],o,null):Gt(r[7]),null)},i(r){e||(_(t,r),e=!0)},o(r){g(t,r),e=!1},d(r){t&&t.d(r)}}}function m$(l){let e,n,t;return n=new ge({props:{$$slots:{default:[p$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function _$(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&R(t,n)},d(r){r&&p(e)}}}function g$(l){let e,n;return e=new fe({props:{$$slots:{default:[_$,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function d$(l){let e,n;const t=[z(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":x(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[g$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ze({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&25?te(t,[s&1&&ie(z(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":x(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function h$(l){let e,n,t,r,o;function s(i){l[6](i)}let f={id:l[0],$$slots:{right:[m$],default:[$$]},$$scope:{ctx:l}};return l[3]!==void 0&&(f.checked=l[3]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),r=new we({props:{url:`pmtiles://${be()}/v1/${l[0]}.pmtiles`,$$slots:{default:[d$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const u={};a&1&&(u.id=i[0]),a&132&&(u.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,u.checked=i[3],V(()=>n=!1)),e.$set(u);const c={};a&1&&(c.url=`pmtiles://${be()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function b$(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:f}=e,i=ne[o],a=!1;function u(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,f=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,f,a,i,t,u,r]}class Pl extends J{constructor(e){super(),K(this,e,b$,h$,X,{name:0,singularNoun:1,pluralNoun:2})}}function v$(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function w$(l){let e,n,t,r,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[v$]},$$scope:{ctx:l}}}),s=new it({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function k$(l){let e,n;return e=new Pl({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[w$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class y$ extends J{constructor(e){super(),K(this,e,null,k$,X,{})}}function S$(l){let e,n,t;return e=new Ce({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Railway Stations`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:re,i(r){t||(_(e.$$.fragment,r),t=!0)},o(r){g(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function C$(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function T$(l){let e,n,t,r,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[C$]},$$scope:{ctx:l}}}),s=new it({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function O$(l){let e,n,t;return n=new ge({props:{$$slots:{default:[T$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function A$(l){let e,n=(l[3].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unnamed railway station")+"")&&R(t,n)},d(r){r&&p(e)}}}function L$(l){let e,n;return e=new fe({props:{$$slots:{default:[A$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function I$(l){let e,n;const t=[z(nn),{paint:{"circle-color":l[1],"circle-radius":xt/2}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[L$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new nt({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(z(nn)),s&2&&{paint:{"circle-color":o[1],"circle-radius":xt/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function P$(l){let e,n,t,r,o;function s(i){l[2](i)}let f={id:nn,$$slots:{right:[O$],default:[S$]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.checked=l[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),r=new It({props:{data:`${be()}/v1/${nn}.geojson`,$$slots:{default:[I$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let nn="railway_stations";function M$(l,e,n){let t=ne.railway_stations,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class N$ extends J{constructor(e){super(),K(this,e,M$,P$,X,{})}}function F$(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function E$(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function D$(l){let e,n,t,r,o,s,f,i,a;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[F$]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[E$]},$$scope:{ctx:l}}}),i=new it({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(" and "),h(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),f=L(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&1&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const m={};c&1&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),v(t),v(o),v(i,u)}}}function j$(l){let e,n;return e=new Pl({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[D$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class R$ extends J{constructor(e){super(),K(this,e,null,j$,X,{})}}function B$(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function H$(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function z$(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function G$(l){let e,n,t,r,o,s,f,i,a,u,c,d,m,y,O,S,C,N,D,F,P,I,M;return t=new Q({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[H$]},$$scope:{ctx:l}}}),C=new Q({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[z$]},$$scope:{ctx:l}}}),I=new Fe({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),h(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=L(),s=T("ul"),f=T("li"),f.textContent="Only collisions between 2017 and 2022 are included",i=L(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,u=L(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,d=L(),m=T("li"),m.textContent='The "pedestrians" category also include mobility scooters',y=L(),O=T("li"),S=k("All limitations "),h(C.$$.fragment),N=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),D=L(),F=T("p"),F.textContent="You can click a point to open the full report, thanks to CycleStreets.",P=L(),h(I.$$.fragment)},m(A,E){$(A,e,E),w(e,n),b(t,e,null),w(e,r),$(A,o,E),$(A,s,E),w(s,f),w(s,i),w(s,a),w(s,u),w(s,c),w(s,d),w(s,m),w(s,y),w(s,O),w(O,S),b(C,O,null),w(O,N),$(A,D,E),$(A,F,E),$(A,P,E),b(I,A,E),M=!0},p(A,E){const B={};E&16777216&&(B.$$scope={dirty:E,ctx:A}),t.$set(B);const H={};E&16777216&&(H.$$scope={dirty:E,ctx:A}),C.$set(H)},i(A){M||(_(t.$$.fragment,A),_(C.$$.fragment,A),_(I.$$.fragment,A),M=!0)},o(A){g(t.$$.fragment,A),g(C.$$.fragment,A),g(I.$$.fragment,A),M=!1},d(A){A&&(p(e),p(o),p(s),p(D),p(F),p(P)),v(t),v(C),v(I,A)}}}function U$(l){let e,n,t;return n=new ge({props:{$$slots:{default:[G$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Br(l){let e,n,t,r,o,s,f,i,a,u,c,d,m;return n=new Ke({props:{small:!0,$$slots:{default:[Y$]},$$scope:{ctx:l}}}),u=new cl({props:{rows:l[14]}}),{c(){e=T("div"),h(n.$$.fragment),t=L(),r=T("div"),o=k(`Filter years:
      `),s=T("input"),f=k(`
      -
      `),i=T("input"),a=L(),h(u.$$.fragment),U(s,"type","number"),U(s,"min",2017),U(s,"max",2022),U(s,"class","svelte-1ft65rw"),U(i,"type","number"),U(i,"min",2017),U(i,"max",2022),U(i,"class","svelte-1ft65rw"),ke(e,"border","1px solid black"),ke(e,"padding","8px")},m(y,O){$(y,e,O),b(n,e,null),w(e,t),w(e,r),w(r,o),w(r,s),Qe(s,l[4]),w(r,f),w(r,i),Qe(i,l[5]),w(e,a),b(u,e,null),c=!0,d||(m=[st(s,"input",l[20]),st(i,"input",l[21])],d=!0)},p(y,O){const S={};O&16777231&&(S.$$scope={dirty:O,ctx:y}),n.$set(S),O&16&&jt(s.value)!==y[4]&&Qe(s,y[4]),O&32&&jt(i.value)!==y[5]&&Qe(i,y[5])},i(y){c||(_(n.$$.fragment,y),_(u.$$.fragment,y),c=!0)},o(y){g(n.$$.fragment,y),g(u.$$.fragment,y),c=!1},d(y){y&&p(e),v(n),v(u),d=!1,al(m)}}}function q$(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function W$(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function V$(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function X$(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Y$(l){let e,n,t,r,o,s,f,i,a,u,c,d;function m(P){l[16](P)}let y={id:"stats19-pedestrians",$$slots:{default:[q$]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new se({props:y}),q.push(()=>W(e,"checked",m));function O(P){l[17](P)}let S={id:"stats19-cyclists",$$slots:{default:[W$]},$$scope:{ctx:l}};l[1]!==void 0&&(S.checked=l[1]),r=new se({props:S}),q.push(()=>W(r,"checked",O));function C(P){l[18](P)}let N={id:"stats19-horse-riders",$$slots:{default:[V$]},$$scope:{ctx:l}};l[2]!==void 0&&(N.checked=l[2]),f=new se({props:N}),q.push(()=>W(f,"checked",C));function D(P){l[19](P)}let F={id:"stats19-other",$$slots:{default:[X$]},$$scope:{ctx:l}};return l[3]!==void 0&&(F.checked=l[3]),u=new se({props:F}),q.push(()=>W(u,"checked",D)),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment),s=L(),h(f.$$.fragment),a=L(),h(u.$$.fragment)},m(P,I){b(e,P,I),$(P,t,I),b(r,P,I),$(P,s,I),b(f,P,I),$(P,a,I),b(u,P,I),d=!0},p(P,I){const M={};I&16777216&&(M.$$scope={dirty:I,ctx:P}),!n&&I&1&&(n=!0,M.checked=P[0],V(()=>n=!1)),e.$set(M);const A={};I&16777216&&(A.$$scope={dirty:I,ctx:P}),!o&&I&2&&(o=!0,A.checked=P[1],V(()=>o=!1)),r.$set(A);const E={};I&16777216&&(E.$$scope={dirty:I,ctx:P}),!i&&I&4&&(i=!0,E.checked=P[2],V(()=>i=!1)),f.$set(E);const B={};I&16777216&&(B.$$scope={dirty:I,ctx:P}),!c&&I&8&&(c=!0,B.checked=P[3],V(()=>c=!1)),u.$set(B)},i(P){d||(_(e.$$.fragment,P),_(r.$$.fragment,P),_(f.$$.fragment,P),_(u.$$.fragment,P),d=!0)},o(P){g(e.$$.fragment,P),g(r.$$.fragment,P),g(f.$$.fragment,P),g(u.$$.fragment,P),d=!1},d(P){P&&(p(t),p(s),p(a)),v(e,P),v(r,P),v(f,P),v(u,P)}}}function Hr(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&R(o,r)},d(s){s&&p(e)}}}function zr(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(r)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&R(o,r)},d(s){s&&p(e)}}}function Q$(l){let e,n,t,r=l[23].year+"",o,s,f,i,a,u=l[10][l[23].severity]+"",c,d,m,y,O,S=Gr(l[23])+"",C,N,D,F,P,I=l[23].pedestrian_location&&Hr(l),M=l[23].pedestrian_movement&&zr(l);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(r),s=L(),f=T("p"),i=k("Severity: "),a=T("b"),c=k(u),d=L(),m=T("p"),y=k("Casualties: "),O=T("b"),C=k(S),N=L(),I&&I.c(),D=L(),M&&M.c(),F=L(),P=T("p"),P.textContent="Click to open full report in CycleStreets"},m(A,E){$(A,e,E),w(e,n),w(e,t),w(t,o),$(A,s,E),$(A,f,E),w(f,i),w(f,a),w(a,c),$(A,d,E),$(A,m,E),w(m,y),w(m,O),w(O,C),$(A,N,E),I&&I.m(A,E),$(A,D,E),M&&M.m(A,E),$(A,F,E),$(A,P,E)},p(A,E){E&8388608&&r!==(r=A[23].year+"")&&R(o,r),E&8388608&&u!==(u=A[10][A[23].severity]+"")&&R(c,u),E&8388608&&S!==(S=Gr(A[23])+"")&&R(C,S),A[23].pedestrian_location?I?I.p(A,E):(I=Hr(A),I.c(),I.m(D.parentNode,D)):I&&(I.d(1),I=null),A[23].pedestrian_movement?M?M.p(A,E):(M=zr(A),M.c(),M.m(F.parentNode,F)):M&&(M.d(1),M=null)},d(A){A&&(p(e),p(s),p(f),p(d),p(m),p(N),p(D),p(F),p(P)),I&&I.d(A),M&&M.d(A)}}}function J$(l){let e,n;return e=new fe({props:{$$slots:{default:[Q$,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function K$(l){let e,n;const t=[z(St),{sourceLayer:St},{paint:{"circle-color":ye(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[J$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new nt({props:r}),e.$on("click",x$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&14528?te(t,[s&0&&ie(z(St)),s&0&&{sourceLayer:St},s&14336&&{paint:{"circle-color":ye(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Z$(l){let e,n,t,r,o,s;function f(u){l[15](u)}let i={id:St,$$slots:{right:[U$],default:[B$]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=l[6]&&Br(l);return o=new we({props:{url:`pmtiles://${be()}/v1/${St}.pmtiles`,$$slots:{default:[K$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&16777216&&(d.$$scope={dirty:c,ctx:u}),!n&&c&64&&(n=!0,d.checked=u[6],V(()=>n=!1)),e.$set(d),u[6]?a?(a.p(u,c),c&64&&_(a,1)):(a=Br(u),a.c(),_(a,1),a.m(r.parentNode,r)):a&&(me(),g(a,1,1,()=>{a=null}),_e());const m={};c&16777408&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),v(e,u),a&&a.d(u),v(o,u)}}}let St="stats19";function Gr(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function x$(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function ep(l,e,n){let t,r=!1,o=!0,s=!0,f=!0,i=!1,a=2017,u=2022;function c(B,H,j,G,Y,le){let Z=["any"];return o&&Z.push(["get","pedestrian"]),s&&Z.push(["get","cyclist"]),f&&Z.push(["get","horse_rider"]),i&&Z.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],u],Z]}let d={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},m={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},O=ne.sequential_low_to_high[4],S=ne.sequential_low_to_high[2],C=ne.sequential_low_to_high[0],N=[["Fatal",O],["Serious",S],["Slight",C]];function D(B){r=B,n(6,r)}function F(B){o=B,n(0,o)}function P(B){s=B,n(1,s)}function I(B){f=B,n(2,f)}function M(B){i=B,n(3,i)}function A(){a=jt(this.value),n(4,a)}function E(){u=jt(this.value),n(5,u)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,f,i,a,u,r,t,d,m,y,O,S,C,N,D,F,P,I,M,A,E]}class tp extends J{constructor(e){super(),K(this,e,ep,Z$,X,{})}}function np(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rp(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lp(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function op(l){let e,n,t,r,o,s,f,i,a,u,c;return t=new Q({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[rp]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[lp]},$$scope:{ctx:l}}}),u=new Fe({}),{c(){e=T("p"),n=k("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),s=k(" for details and caveats about the measurements."),f=L(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=L(),h(u.$$.fragment)},m(d,m){$(d,e,m),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(d,f,m),$(d,i,m),$(d,a,m),b(u,d,m),c=!0},p(d,m){const y={};m&64&&(y.$$scope={dirty:m,ctx:d}),t.$set(y);const O={};m&64&&(O.$$scope={dirty:m,ctx:d}),o.$set(O)},i(d){c||(_(t.$$.fragment,d),_(o.$$.fragment,d),_(u.$$.fragment,d),c=!0)},o(d){g(t.$$.fragment,d),g(o.$$.fragment,d),g(u.$$.fragment,d),c=!1},d(d){d&&(p(e),p(f),p(i),p(a)),v(t),v(o),v(u,d)}}}function sp(l){let e,n,t;return n=new ge({props:{$$slots:{default:[op]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),U(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ur(l){let e,n;return e=new Ze({props:{colorScale:l[1],limits:l[3]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ip(l){let e,n=l[5].location+"",t,r,o,s,f,i=l[5].motor_vehicles_2022.toLocaleString()+"",a,u,c,d,m,y=l[5].pedal_cycles_2022.toLocaleString()+"",O,S,C,N,D,F=l[5].method+"",P;return{c(){e=T("h2"),t=k(n),r=L(),o=T("p"),s=k("Total motor vehicles (2022 AADF): "),f=T("b"),a=k(i),u=L(),c=T("p"),d=k("Total pedal cycles (2022 AADF): "),m=T("b"),O=k(y),S=L(),C=T("p"),N=k("Count method: "),D=T("b"),P=k(F)},m(I,M){$(I,e,M),w(e,t),$(I,r,M),$(I,o,M),w(o,s),w(o,f),w(f,a),$(I,u,M),$(I,c,M),w(c,d),w(c,m),w(m,O),$(I,S,M),$(I,C,M),w(C,N),w(C,D),w(D,P)},p(I,M){M&32&&n!==(n=I[5].location+"")&&R(t,n),M&32&&i!==(i=I[5].motor_vehicles_2022.toLocaleString()+"")&&R(a,i),M&32&&y!==(y=I[5].pedal_cycles_2022.toLocaleString()+"")&&R(O,y),M&32&&F!==(F=I[5].method+"")&&R(P,F)},d(I){I&&(p(e),p(r),p(o),p(u),p(c),p(S),p(C))}}}function ap(l){let e,n;return e=new fe({props:{$$slots:{default:[ip,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fp(l){let e,n;const t=[z(Ct),{sourceLayer:Ct},{paint:{"circle-color":ye(["get","motor_vehicles_2022"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[ap]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new nt({props:r}),e.$on("click",cp),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&ie(z(Ct)),s&0&&{sourceLayer:Ct},s&6&&{paint:{"circle-color":ye(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function up(l){let e,n,t,r,o,s;function f(u){l[4](u)}let i={id:Ct,$$slots:{right:[sp],default:[np]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=l[0]&&Ur(l);return o=new we({props:{url:`pmtiles://${be()}/v1/${Ct}.pmtiles`,$$slots:{default:[fp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,r,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&64&&(d.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,d.checked=u[0],V(()=>n=!1)),e.$set(d),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Ur(u),a.c(),_(a,1),a.m(r.parentNode,r)):a&&(me(),g(a,1,1,()=>{a=null}),_e());const m={};c&65&&(m.$$scope={dirty:c,ctx:u}),o.$set(m)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(r)),v(e,u),a&&a.d(u),v(o,u)}}}let Ct="vehicle_counts";function cp(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function $p(l,e,n){let t=ne.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function f(i){s=i,n(0,s)}return[s,t,r,o,f]}class pp extends J{constructor(e){super(),K(this,e,$p,up,X,{})}}function mp(l){let e,n,t,r,o,s,f,i;return e=new c$({}),t=new y$({}),o=new R$({}),f=new N$({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(f.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),$(a,r,u),b(o,a,u),$(a,s,u),b(f,a,u),i=!0},i(a){i||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),v(e,a),v(t,a),v(o,a),v(f,a)}}}function _p(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[mp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gp(l){let e,n,t,r,o,s,f,i,a,u,c,d;return e=new uu({}),t=new Iu({}),o=new vu({}),f=new Kf({}),a=new Zc({}),c=new Gc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(f.$$.fragment),i=L(),h(a.$$.fragment),u=L(),h(c.$$.fragment)},m(m,y){b(e,m,y),$(m,n,y),b(t,m,y),$(m,r,y),b(o,m,y),$(m,s,y),b(f,m,y),$(m,i,y),b(a,m,y),$(m,u,y),b(c,m,y),d=!0},i(m){d||(_(e.$$.fragment,m),_(t.$$.fragment,m),_(o.$$.fragment,m),_(f.$$.fragment,m),_(a.$$.fragment,m),_(c.$$.fragment,m),d=!0)},o(m){g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),g(f.$$.fragment,m),g(a.$$.fragment,m),g(c.$$.fragment,m),d=!1},d(m){m&&(p(n),p(r),p(s),p(i),p(u)),v(e,m),v(t,m),v(o,m),v(f,m),v(a,m),v(c,m)}}}function dp(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[gp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hp(l){let e,n,t,r,o,s,f,i,a,u;return e=new mf({}),t=new jf({}),o=new va({}),f=new Ga({}),a=new nf({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(f.$$.fragment),i=L(),h(a.$$.fragment)},m(c,d){b(e,c,d),$(c,n,d),b(t,c,d),$(c,r,d),b(o,c,d),$(c,s,d),b(f,c,d),$(c,i,d),b(a,c,d),u=!0},i(c){u||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(f,c),v(a,c)}}}function bp(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[hp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vp(l){let e,n,t,r;return e=new fa({}),t=new Pa({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},i(o){r||(_(e.$$.fragment,o),_(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function wp(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[vp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kp(l){let e,n,t,r,o,s;return e=new wc({}),t=new Hu({}),o=new cc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(f,i){b(e,f,i),$(f,n,i),b(t,f,i),$(f,r,i),b(o,f,i),s=!0},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(r)),v(e,f),v(t,f),v(o,f)}}}function yp(l){let e,n,t,r,o,s,f=pn()=="Private (development)",i,a,u;e=new pp({}),t=new tp({}),o=new ec({});let c=f&&kp();return a=new Tf({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),c&&c.c(),i=L(),h(a.$$.fragment)},m(d,m){b(e,d,m),$(d,n,m),b(t,d,m),$(d,r,m),b(o,d,m),$(d,s,m),c&&c.m(d,m),$(d,i,m),b(a,d,m),u=!0},p:re,i(d){u||(_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),_(c),_(a.$$.fragment,d),u=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(o.$$.fragment,d),g(c),g(a.$$.fragment,d),u=!1},d(d){d&&(p(n),p(r),p(s),p(i)),v(e,d),v(t,d),v(o,d),c&&c.d(d),v(a,d)}}}function Sp(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[yp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cp(l){let e,n,t,r,o;function s(i){l[3](i)}let f={};return l[0]!==void 0&&(f.enabled=l[0]),e=new Gl({props:f}),q.push(()=>W(e,"enabled",s)),r=new Yl({}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,a){const u={};!n&&a&1&&(n=!0,u.enabled=i[0],V(()=>n=!1)),e.$set(u)},i(i){o||(_(e.$$.fragment,i),_(r.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Tp(l){let e,n,t,r,o,s,f,i,a,u,c,d,m,y,O,S;return e=new Pc({}),t=new Re({props:{label:"Trip generators",$$slots:{default:[_p]},$$scope:{ctx:l}}}),o=new Re({props:{label:"Existing infrastructure",$$slots:{default:[dp]},$$scope:{ctx:l}}}),f=new Re({props:{label:"Boundaries",$$slots:{default:[bp]},$$scope:{ctx:l}}}),a=new Re({props:{label:"Census",$$slots:{default:[wp]},$$scope:{ctx:l}}}),c=new Re({props:{label:"Other",$$slots:{default:[Sp]},$$scope:{ctx:l}}}),m=new Re({props:{label:"Tools",$$slots:{default:[Cp]},$$scope:{ctx:l}}}),O=new zl({props:{disabled:!l[1]}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(f.$$.fragment),i=L(),h(a.$$.fragment),u=L(),h(c.$$.fragment),d=L(),h(m.$$.fragment),y=L(),h(O.$$.fragment)},m(C,N){b(e,C,N),$(C,n,N),b(t,C,N),$(C,r,N),b(o,C,N),$(C,s,N),b(f,C,N),$(C,i,N),b(a,C,N),$(C,u,N),b(c,C,N),$(C,d,N),b(m,C,N),$(C,y,N),b(O,C,N),S=!0},p(C,N){const D={};N&16&&(D.$$scope={dirty:N,ctx:C}),t.$set(D);const F={};N&16&&(F.$$scope={dirty:N,ctx:C}),o.$set(F);const P={};N&16&&(P.$$scope={dirty:N,ctx:C}),f.$set(P);const I={};N&16&&(I.$$scope={dirty:N,ctx:C}),a.$set(I);const M={};N&16&&(M.$$scope={dirty:N,ctx:C}),c.$set(M);const A={};N&17&&(A.$$scope={dirty:N,ctx:C}),m.$set(A);const E={};N&2&&(E.disabled=!C[1]),O.$set(E)},i(C){S||(_(e.$$.fragment,C),_(t.$$.fragment,C),_(o.$$.fragment,C),_(f.$$.fragment,C),_(a.$$.fragment,C),_(c.$$.fragment,C),_(m.$$.fragment,C),_(O.$$.fragment,C),S=!0)},o(C){g(e.$$.fragment,C),g(t.$$.fragment,C),g(o.$$.fragment,C),g(f.$$.fragment,C),g(a.$$.fragment,C),g(c.$$.fragment,C),g(m.$$.fragment,C),g(O.$$.fragment,C),S=!1},d(C){C&&(p(n),p(r),p(s),p(i),p(u),p(d),p(y)),v(e,C),v(t,C),v(o,C),v(f,C),v(a,C),v(c,C),v(m,C),v(O,C)}}}function Op(l){let e,n;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ze({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ap(l){let e,n,t,r;return e=new Re({props:{label:"Layers",open:!0,$$slots:{default:[Tp]},$$scope:{ctx:l}}}),t=new It({props:{data:l[2],$$slots:{default:[Op]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const f={};s&19&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(_(e.$$.fragment,o),_(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Lp(l,e,n){let t,r;ve(l,or,f=>n(1,r=f));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(f){t=f,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&or.set(!t)},[t,r,o,s]}class Ip extends J{constructor(e){super(),K(this,e,Lp,Ap,X,{})}}function qr(l){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pp(l){let e,n=l[0]&&qr();return{c(){n&&n.c(),e=Me()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=qr(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:re,o:re,d(t){t&&p(e),n&&n.d(t)}}}function Mp(l,e,n){let{loadFile:t}=e,r=!0;return yn(async()=>{let s=await(await fetch(`${rn()}/v1/random_schemes.geojson`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class Np extends J{constructor(e){super(),K(this,e,Mp,Pp,X,{loadFile:1})}}function Wr(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=k("Current milestone: "),r=k(t)},m(s,f){$(s,e,f),w(e,n),w(e,r)},p(s,f){var i;f&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&R(r,t)},d(s){s&&p(e)}}}function Fp(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ep(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Dp(l){let e,n,t,r;return e=new Dt({props:{$$slots:{default:[Fp]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new Dt({props:{$$slots:{default:[Ep]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const f={};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(_(e.$$.fragment,o),_(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function jp(l){var E,B,H,j;let e,n,t=l[0].scheme_reference+"",r,o,s,f,i=((E=l[0].browse)==null?void 0:E.authority_or_region)+"",a,u,c,d,m=((B=l[0].browse)==null?void 0:B.capital_scheme_id)+"",y,O,S,C,N=((H=l[0].browse)==null?void 0:H.funding_programme)+"",D,F,P,I,M,A=((j=l[0].browse)==null?void 0:j.current_milestone)&&Wr(l);return I=new Ul({props:{$$slots:{default:[Dp]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Scheme reference: "),r=k(t),o=L(),s=T("p"),f=k("Authority or region: "),a=k(i),u=L(),c=T("p"),d=k("Capital scheme ID: "),y=k(m),O=L(),S=T("p"),C=k("Funding programme: "),D=k(N),F=L(),A&&A.c(),P=L(),h(I.$$.fragment)},m(G,Y){$(G,e,Y),w(e,n),w(e,r),$(G,o,Y),$(G,s,Y),w(s,f),w(s,a),$(G,u,Y),$(G,c,Y),w(c,d),w(c,y),$(G,O,Y),$(G,S,Y),w(S,C),w(S,D),$(G,F,Y),A&&A.m(G,Y),$(G,P,Y),b(I,G,Y),M=!0},p(G,Y){var Z,Te,Le,ae;(!M||Y&1)&&t!==(t=G[0].scheme_reference+"")&&R(r,t),(!M||Y&1)&&i!==(i=((Z=G[0].browse)==null?void 0:Z.authority_or_region)+"")&&R(a,i),(!M||Y&1)&&m!==(m=((Te=G[0].browse)==null?void 0:Te.capital_scheme_id)+"")&&R(y,m),(!M||Y&1)&&N!==(N=((Le=G[0].browse)==null?void 0:Le.funding_programme)+"")&&R(D,N),(ae=G[0].browse)!=null&&ae.current_milestone?A?A.p(G,Y):(A=Wr(G),A.c(),A.m(P.parentNode,P)):A&&(A.d(1),A=null);const le={};Y&32&&(le.$$scope={dirty:Y,ctx:G}),I.$set(le)},i(G){M||(_(I.$$.fragment,G),M=!0)},o(G){g(I.$$.fragment,G),M=!1},d(G){G&&(p(e),p(o),p(s),p(u),p(c),p(O),p(S),p(F),p(P)),A&&A.d(G),v(I,G)}}}function Rp(l){let e,n;return e=new Re({props:{label:`${l[0].scheme_name}`,$$slots:{default:[jp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bp(l,e,n){let t,r;ve(l,Lt,i=>n(3,t=i)),ve(l,kn,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Dl(i),{padding:20,animate:!1})}function f(){var u,c;let i={type:"FeatureCollection",features:t.features.filter(d=>d.properties.scheme_reference==o.scheme_reference)},a=((u=o.browse)==null?void 0:u.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,f]}class Hp extends J{constructor(e){super(),K(this,e,Bp,Rp,X,{scheme:0})}}function Vr(l){let e,n,t=Mn(l[0].length_meters)+"",r;return{c(){e=T("p"),n=k("Length: "),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(e,r)},p(o,s){s&1&&t!==(t=Mn(o[0].length_meters)+"")&&R(r,t)},d(o){o&&p(e)}}}function Xr(l){let e,n=ot(l[0].description,l[2])+"";return{c(){e=T("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=ot(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Yr(l){var o;let e,n,t=((o=l[1].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=k("Current milestone: "),r=k(t)},m(s,f){$(s,e,f),w(e,n),w(e,r)},p(s,f){var i;f&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&R(r,t)},d(s){s&&p(e)}}}function zp(l){var Ee,Oe,Ge,xe;let e,n,t,r=ot(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",f,i,a,u,c,d,m,y,O,S,C=ot(l[1].scheme_name??"",l[3])+"",N,D,F=ot(l[0].scheme_reference,l[3])+"",P,I,M,A,E=((Ee=l[1].browse)==null?void 0:Ee.authority_or_region)+"",B,H,j,G,Y=((Oe=l[1].browse)==null?void 0:Oe.capital_scheme_id)+"",le,Z,Te,Le,ae=((Ge=l[1].browse)==null?void 0:Ge.funding_programme)+"",de,Ae,ue=l[0].length_meters&&Vr(l),ce=l[0].description&&Xr(l),$e=((xe=l[1].browse)==null?void 0:xe.current_milestone)&&Yr(l);return{c(){e=T("div"),n=T("h2"),t=new Ft(!1),o=k(" ("),f=k(s),i=k(")"),a=L(),ue&&ue.c(),u=L(),ce&&ce.c(),c=L(),d=T("hr"),m=L(),y=T("p"),O=k("Part of scheme: "),S=new Ft(!1),N=k(" ("),D=new Ft(!1),P=k(")"),I=L(),M=T("p"),A=k("Authority or region: "),B=k(E),H=L(),j=T("p"),G=k("Capital scheme ID: "),le=k(Y),Z=L(),Te=T("p"),Le=k("Funding programme: "),de=k(ae),Ae=L(),$e&&$e.c(),t.a=o,S.a=N,D.a=P,ke(e,"max-width","30vw")},m(oe,he){$(oe,e,he),w(e,n),t.m(r,n),w(n,o),w(n,f),w(n,i),w(e,a),ue&&ue.m(e,null),w(e,u),ce&&ce.m(e,null),w(e,c),w(e,d),w(e,m),w(e,y),w(y,O),S.m(C,y),w(y,N),D.m(F,y),w(y,P),w(e,I),w(e,M),w(M,A),w(M,B),w(e,H),w(e,j),w(j,G),w(j,le),w(e,Z),w(e,Te),w(Te,Le),w(Te,de),w(e,Ae),$e&&$e.m(e,null)},p(oe,[he]){var Tn,On,An,Ln;he&5&&r!==(r=ot(oe[0].name,oe[2])+"")&&t.p(r),he&1&&s!==(s=oe[0].intervention_type+"")&&R(f,s),oe[0].length_meters?ue?ue.p(oe,he):(ue=Vr(oe),ue.c(),ue.m(e,u)):ue&&(ue.d(1),ue=null),oe[0].description?ce?ce.p(oe,he):(ce=Xr(oe),ce.c(),ce.m(e,c)):ce&&(ce.d(1),ce=null),he&10&&C!==(C=ot(oe[1].scheme_name??"",oe[3])+"")&&S.p(C),he&9&&F!==(F=ot(oe[0].scheme_reference,oe[3])+"")&&D.p(F),he&2&&E!==(E=((Tn=oe[1].browse)==null?void 0:Tn.authority_or_region)+"")&&R(B,E),he&2&&Y!==(Y=((On=oe[1].browse)==null?void 0:On.capital_scheme_id)+"")&&R(le,Y),he&2&&ae!==(ae=((An=oe[1].browse)==null?void 0:An.funding_programme)+"")&&R(de,ae),(Ln=oe[1].browse)!=null&&Ln.current_milestone?$e?$e.p(oe,he):($e=Yr(oe),$e.c(),$e.m(e,null)):$e&&($e.d(1),$e=null)},i:re,o:re,d(oe){oe&&p(e),ue&&ue.d(),ce&&ce.d(),$e&&$e.d()}}}function ot(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function Gp(l,e,n){let t,r,o,s;ve(l,tn,i=>n(4,r=i)),ve(l,Kt,i=>n(2,o=i)),ve(l,Zt,i=>n(3,s=i));let{props:f}=e;return l.$$set=i=>{"props"in i&&n(0,f=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(f.scheme_reference))},[f,t,o,s,r]}class Cn extends J{constructor(e){super(),K(this,e,Gp,zp,X,{props:0})}}function Up(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&R(t,n)},d(r){r&&p(e)}}}function qp(l){let e,n;return e=new Cn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wp(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Up,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[qp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(_(e.$$.fragment,o),_(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Vp(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&R(t,n)},d(r){r&&p(e)}}}function Xp(l){let e,n;return e=new Cn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yp(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Vp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Xp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(_(e.$$.fragment,o),_(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Qp(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&R(t,n)},d(r){r&&p(e)}}}function Jp(l){let e,n;return e=new Cn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kp(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Qp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Jp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(_(e.$$.fragment,o),_(t.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Zp(l){let e,n,t,r,o,s,f,i,a,u;const c=[z("interventions-points"),{filter:["all",Nn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":xt,"circle-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let d={$$slots:{default:[Wp]},$$scope:{ctx:l}};for(let P=0;P<c.length;P+=1)d=ee(d,c[P]);e=new nt({props:d});const m=[z("interventions-lines"),{filter:["all",Fn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":Pt,"line-opacity":x(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[Yp]},$$scope:{ctx:l}};for(let P=0;P<m.length;P+=1)y=ee(y,m[P]);t=new Se({props:y});const O=[z("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Pt,"circle-opacity":0,"circle-stroke-color":tt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let S={};for(let P=0;P<O.length;P+=1)S=ee(S,O[P]);o=new nt({props:S});const C=[z("interventions-polygons"),{filter:["all",Yt,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":x(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let N={$$slots:{default:[Kp]},$$scope:{ctx:l}};for(let P=0;P<C.length;P+=1)N=ee(N,C[P]);f=new ze({props:N});const D=[z("interventions-polygons-outlines"),{filter:["all",Yt,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*Pt}},{layout:{visibility:l[0]?"visible":"none"}}];let F={};for(let P=0;P<D.length;P+=1)F=ee(F,D[P]);return a=new Se({props:F}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(f.$$.fragment),i=L(),h(a.$$.fragment)},m(P,I){b(e,P,I),$(P,n,I),b(t,P,I),$(P,r,I),b(o,P,I),$(P,s,I),b(f,P,I),$(P,i,I),b(a,P,I),u=!0},p(P,I){const M=I&29?te(c,[c[0],I&24&&{filter:["all",Nn,P[3],P[4]]},c[2],c[3],I&4&&{paint:{"circle-color":P[2],"circle-radius":xt,"circle-opacity":x(1,.5)}},I&1&&{layout:{visibility:P[0]?"visible":"none"}},c[6]]):{};I&128&&(M.$$scope={dirty:I,ctx:P}),e.$set(M);const A=I&13?te(m,[m[0],I&8&&{filter:["all",Fn,P[3]]},m[2],m[3],I&4&&{paint:{"line-color":P[2],"line-width":Pt,"line-opacity":x(1,.5)}},I&1&&{layout:{visibility:P[0]?"visible":"none"}},m[6]]):{};I&128&&(A.$$scope={dirty:I,ctx:P}),t.$set(A);const E=I&1?te(O,[O[0],O[1],O[2],{layout:{visibility:P[0]?"visible":"none"}}]):{};o.$set(E);const B=I&13?te(C,[C[0],I&8&&{filter:["all",Yt,P[3]]},C[2],C[3],I&4&&{paint:{"fill-color":P[2],"fill-opacity":x(.2,.5)}},I&1&&{layout:{visibility:P[0]?"visible":"none"}},C[6]]):{};I&128&&(B.$$scope={dirty:I,ctx:P}),f.$set(B);const H=I&13?te(D,[D[0],I&8&&{filter:["all",Yt,P[3]]},I&4&&{paint:{"line-color":P[2],"line-opacity":.5,"line-width":.7*Pt}},I&1&&{layout:{visibility:P[0]?"visible":"none"}}]):{};a.$set(H)},i(P){u||(_(e.$$.fragment,P),_(t.$$.fragment,P),_(o.$$.fragment,P),_(f.$$.fragment,P),_(a.$$.fragment,P),u=!0)},o(P){g(e.$$.fragment,P),g(t.$$.fragment,P),g(o.$$.fragment,P),g(f.$$.fragment,P),g(a.$$.fragment,P),u=!1},d(P){P&&(p(n),p(r),p(s),p(i)),v(e,P),v(t,P),v(o,P),v(f,P),v(a,P)}}}function xp(l){let e,n;return e=new It({props:{data:l[1],$$slots:{default:[Zp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function em(l,e,n){let t,r;ve(l,Lt,a=>n(5,r=a));let{showSchemes:o}=e,[s]=Ll();const f=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=jl(r))},[o,t,s,f,i,r]}class tm extends J{constructor(e){super(),K(this,e,em,xp,X,{showSchemes:0})}}function Qr(l,e,n){const t=l.slice();return t[13]=e[n],t}function Jr(l,e,n){const t=l.slice();return t[16]=e[n],t}function nm(l){let e,n;return e=new Np({props:{loadFile:l[7]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kr(l){let e,n,t,r,o;e=new Dt({props:{$$slots:{default:[rm]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let f={title:"About this scheme data",$$slots:{default:[lm]},$$scope:{ctx:l}};return l[3]!==void 0&&(f.open=l[3]),t=new nl({props:f}),q.push(()=>W(t,"open",s)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const u={};a&524288&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],V(()=>r=!1)),t.$set(c)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function rm(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zr(l){let e,n,t=l[16]+"",r;return{c(){e=T("li"),n=T("p"),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&R(r,t)},d(o){o&&p(e)}}}function lm(l){let e,n,t,r,o=Ne(l[4].notes),s=[];for(let f=0;f<o.length;f+=1)s[f]=Zr(Jr(l,o,f));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=L(),r=T("ul");for(let f=0;f<s.length;f+=1)s[f].c();U(e,"class","govuk-prose")},m(f,i){$(f,e,i),w(e,n),w(e,t),w(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(f,i){if(i&16){o=Ne(f[4].notes);let a;for(a=0;a<o.length;a+=1){const u=Jr(f,o,a);s[a]?s[a].p(u,i):(s[a]=Zr(u),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(f){f&&p(e),Ot(s,f)}}}function xr(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let f={};return l[1]!==void 0&&(f.schemesToBeShown=l[1]),l[2]!==void 0&&(f.show=l[2]),e=new Mi({props:f}),q.push(()=>W(e,"schemesToBeShown",o)),q.push(()=>W(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),r=!0},p(i,a){const u={};!n&&a&2&&(n=!0,u.schemesToBeShown=i[1],V(()=>n=!1)),!t&&a&4&&(t=!0,u.show=i[2],V(()=>t=!1)),e.$set(u)},i(i){r||(_(e.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),r=!1},d(i){v(e,i)}}}function el(l){let e,n;return e=new Hp({props:{scheme:l[13]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&el(l);return{c(){r&&r.c(),n=Me()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&_(r,1)):(r=el(o),r.c(),_(r,1),r.m(n.parentNode,n)):r&&(me(),g(r,1,1,()=>{r=null}),_e())},i(o){t||(_(r),t=!0)},o(o){g(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function om(l){let e,n,t,r,o,s,f,i,a,u,c=pn()=="Private (development)",d,m,y,O,S,C,N,D,F;o=new Xl({props:{boundaryGeojson:l[4]}}),a=new Rl({});let P=c&&nm(l),I=l[4].notes&&Kr(l);y=new Wl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:l[7]}}),S=new ul({props:{errorMessage:l[0]}});let M=l[6].size>0&&xr(l),A=Ne(l[6].values()),E=[];for(let H=0;H<A.length;H+=1)E[H]=tl(Qr(l,A,H));const B=H=>g(E[H],1,1,()=>{E[H]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",r=L(),h(o.$$.fragment),s=L(),f=T("p"),f.textContent=`App version: ${pn()}`,i=L(),h(a.$$.fragment),u=L(),P&&P.c(),d=L(),I&&I.c(),m=L(),h(y.$$.fragment),O=L(),h(S.$$.fragment),C=L(),M&&M.c(),N=L(),D=T("ul");for(let H=0;H<E.length;H+=1)E[H].c();ke(n,"display","flex"),ke(n,"justify-content","space-between"),U(e,"slot","sidebar"),U(e,"class","govuk-prose")},m(H,j){$(H,e,j),w(e,n),w(n,t),w(n,r),b(o,n,null),w(e,s),w(e,f),w(e,i),b(a,e,null),w(e,u),P&&P.m(e,null),w(e,d),I&&I.m(e,null),w(e,m),b(y,e,null),w(e,O),b(S,e,null),w(e,C),M&&M.m(e,null),w(e,N),w(e,D);for(let G=0;G<E.length;G+=1)E[G]&&E[G].m(D,null);F=!0},p(H,j){const G={};j&16&&(G.boundaryGeojson=H[4]),o.$set(G),c&&P.p(H,j),H[4].notes?I?(I.p(H,j),j&16&&_(I,1)):(I=Kr(H),I.c(),_(I,1),I.m(e,m)):I&&(me(),g(I,1,1,()=>{I=null}),_e());const Y={};if(j&1&&(Y.errorMessage=H[0]),S.$set(Y),H[6].size>0?M?(M.p(H,j),j&64&&_(M,1)):(M=xr(H),M.c(),_(M,1),M.m(e,N)):M&&(me(),g(M,1,1,()=>{M=null}),_e()),j&66){A=Ne(H[6].values());let le;for(le=0;le<A.length;le+=1){const Z=Qr(H,A,le);E[le]?(E[le].p(Z,j),_(E[le],1)):(E[le]=tl(Z),E[le].c(),_(E[le],1),E[le].m(D,null))}for(me(),le=A.length;le<E.length;le+=1)B(le);_e()}},i(H){if(!F){_(o.$$.fragment,H),_(a.$$.fragment,H),_(P),_(I),_(y.$$.fragment,H),_(S.$$.fragment,H),_(M);for(let j=0;j<A.length;j+=1)_(E[j]);F=!0}},o(H){g(o.$$.fragment,H),g(a.$$.fragment,H),g(P),g(I),g(y.$$.fragment,H),g(S.$$.fragment,H),g(M),E=E.filter(Boolean);for(let j=0;j<E.length;j+=1)g(E[j]);F=!1},d(H){H&&p(e),v(o),v(a),P&&P.d(),I&&I.d(),v(y),v(S),M&&M.d(),Ot(E,H)}}}function sm(l){let e,n,t,r,o,s,f;return e=new ql({}),t=new tm({props:{showSchemes:l[2]}}),s=new Ip({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),o=T("div"),h(s.$$.fragment),U(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),$(i,o,a),b(s,o,null),f=!0},p(i,a){const u={};a&4&&(u.showSchemes=i[2]),t.$set(u)},i(i){f||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),v(s)}}}function im(l){let e,n,t;return n=new Bl({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[sm]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),U(e,"slot","main")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(_(n.$$.fragment,r),t=!0)},o(r){g(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function am(l){let e,n;return e=new Ql({props:{$$slots:{main:[im],sidebar:[om]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fm(l,e,n){let t,r,o;ve(l,Lt,S=>n(4,t=S)),ve(l,En,S=>n(5,r=S)),ve(l,tn,S=>n(6,o=S)),yn(()=>{Hl()});const s=new URLSearchParams(window.location.search);En.set(s.get("style")||"dataviz");let f="",i=new Set,a=!0,u=!1;function c(S){try{Lt.set(JSON.parse(S)),tn.set(mi(t)),n(0,f="")}catch(C){n(0,f=`The file you loaded is broken: ${C}`)}}const d=()=>n(3,u=!0);function m(S){u=S,n(3,u)}function y(S){i=S,n(1,i)}function O(S){a=S,n(2,a)}return[f,i,a,u,t,r,o,c,d,m,y,O]}class um extends J{constructor(e){super(),K(this,e,fm,am,X,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new um({target:document.getElementById("app")});
