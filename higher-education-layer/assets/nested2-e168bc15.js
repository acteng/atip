import{S as J,i as K,s as X,e as T,h as G,$ as ke,j as p,W as re,o as m,aP as ll,b as q,c as W,d as A,g as h,m as b,w as st,l as V,t as _,n as g,p as v,X as Bt,Y as Ht,Z as zt,_ as Ut,a7 as Oe,J as ce,K as $e,aQ as it,u as k,k as w,D as R,I as Le,N as vn,O as ol,q as ve,P as sl,Q as il,T as At,U as al,V as fl,aX as Fl,aY as $t,a4 as Ln,aZ as El,aO as Dl,ar as tn,ae as wn,aj as Gt,r as kn,F as cn,a as Et,v as Qe,aW as Q,a_ as be,a$ as ye,B as x,ah as ee,C as Se,ak as te,b0 as ie,G as It,H as ul,aS as Dt,ab as In,b1 as nn,R as cl,b2 as Mt,E as $l,as as jl,f as $n,ag as Rl,aU as Pn,al as Bl,am as Nn,an as Mn,ao as Vt,aV as Fn,L as Hl,M as zl,y as Ul}from"./index-1f55b32e.js";import{d as tt,j as Ot,C as Re,f as Ke,h as se,l as z,c as Kt,k as Gl,S as ql,B as Wl,b as Pt,G as Vl}from"./StreetViewTool-79ff0855.js";import{a as ze,F as Xl}from"./Popup-8c1a404e.js";import{P as fe}from"./Popup-be4138c6.js";import{R as Yl,C as nt,Z as Ql}from"./ZoomOutMap-a43cc266.js";import{L as Jl,a as Kl}from"./LineMeasureController-41566c17.js";function Zl(r){let e;return{c(){e=T("span"),G(e,"class","svelte-kzgqtg"),ke(e,"background",r[0])},m(n,t){p(n,e,t)},p(n,[t]){t&1&&ke(e,"background",n[0])},i:re,o:re,d(n){n&&m(e)}}}function xl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class Ae extends J{constructor(e){super(),K(this,e,xl,Zl,X,{color:0})}}const eo="/atip/higher-education-layer/assets/help-d011708a.svg";function to(r){let e,n;const t=r[1].default,l=Bt(t,r,r[4],null);return{c(){e=T("div"),l&&l.c(),G(e,"class","govuk-prose")},m(o,s){p(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&Ht(l,t,o,o[4],n?Ut(t,o[4],s,null):zt(o[4]),null)},i(o){n||(_(l,o),n=!0)},o(o){g(l,o),n=!1},d(o){o&&m(e),l&&l.d(o)}}}function no(r){let e,n,t,l,o,s,f;function i(u){r[3](u)}let a={title:"Help",$$slots:{default:[to]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new ll({props:a}),q.push(()=>W(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${eo}" title="Help" alt="Help"/>`,n=A(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(u,c){p(u,e,c),p(u,n,c),b(t,u,c),o=!0,s||(f=st(e,"click",r[2]),s=!0)},p(u,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,d.open=u[0],V(()=>l=!1)),t.$set(d)},i(u){o||(_(t.$$.fragment,u),o=!0)},o(u){g(t.$$.fragment,u),o=!1},d(u){u&&(m(e),m(n)),v(t,u),s=!1,f()}}}function ro(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function f(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,f,l]}class ge extends J{constructor(e){super(),K(this,e,ro,no,X,{})}}function En(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Dn(r){let e,n,t,l=r[1]+"",o,s,f;return n=new Ae({props:{color:r[2]}}),{c(){e=T("li"),h(n.$$.fragment),t=A(),o=k(l),s=A()},m(i,a){p(i,e,a),b(n,e,null),w(e,t),w(e,o),w(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),n.$set(u),(!f||a&1)&&l!==(l=i[1]+"")&&R(o,l)},i(i){f||(_(n.$$.fragment,i),f=!0)},o(i){g(n.$$.fragment,i),f=!1},d(i){i&&m(e),v(n)}}}function lo(r){let e,n,t=Oe(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Dn(En(r,t,s));const o=s=>g(l[s],1,1,()=>{l[s]=null});return{c(){e=T("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,f){p(s,e,f);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[f]){if(f&1){t=Oe(s[0]);let i;for(i=0;i<t.length;i+=1){const a=En(s,t,i);l[i]?(l[i].p(a,f),_(l[i],1)):(l[i]=Dn(a),l[i].c(),_(l[i],1),l[i].m(e,null))}for(ce(),i=t.length;i<l.length;i+=1)o(i);$e()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)_(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)g(l[f]);n=!1},d(s){s&&m(e),it(l,s)}}}function oo(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class pl extends J{constructor(e){super(),K(this,e,oo,lo,X,{rows:0})}}function jn(r){let e=r[0],n,t,l=Rn(r);return{c(){l.c(),n=Le()},m(o,s){l.m(o,s),p(o,n,s),t=!0},p(o,s){s&1&&X(e,e=o[0])?(ce(),g(l,1,1,re),$e(),l=Rn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l.d(o)}}}function Rn(r){let e;const n=r[10].default,t=Bt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Ht(t,n,l,l[9],e?Ut(n,l[9],o,null):zt(l[9]),null)},i(l){e||(_(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function so(r){let e,n,t=r[0]&&jn(r);return{c(){t&&t.c(),e=Le()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=jn(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(ce(),g(t,1,1,()=>{t=null}),$e())},i(l){n||(_(t),n=!0)},o(l){g(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function io(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=vn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:u,self:c}=ol();ve(r,u,y=>n(8,l=y)),ve(r,c,y=>n(0,t=y));let d,$=!0;return sl(()=>{t&&d&&l&&(il(u,t,d),At(c,t=null,t),n(6,d=void 0))}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==f&&(At(c,t=f,t),al(l,t,fl({type:"raster",tiles:i,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,d=l==null?void 0:l.getSource(t)),n(7,$=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,d=l==null?void 0:l.getSource(f))})),r.$$.dirty&208&&d&&($?n(7,$=!1):d.setTiles(i))},[t,u,c,f,i,a,d,$,l,s,o]}class ao extends J{constructor(e){super(),K(this,e,io,so,X,{id:3,tiles:4,tileSize:5})}}function fo(r){let e;const n=r[16].default,t=Bt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Ht(t,n,l,l[24],e?Ut(n,l[24],o,null):zt(l[24]),null)},i(l){e||(_(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function uo(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[fo]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Fl({props:o}),q.push(()=>W(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,i.hovered=s[0],V(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function co(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=vn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:d=void 0}=e,{applyToClusters:$=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:O=!1}=e,{hovered:M=null}=e,{eventsIfTopMost:D=!1}=e,{interactive:E=!0}=e;function P(j){M=j,n(0,M)}function I(j){$t.call(this,r,j)}function N(j){$t.call(this,r,j)}function L(j){$t.call(this,r,j)}function F(j){$t.call(this,r,j)}function B(j){$t.call(this,r,j)}function H(j){$t.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,f=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,u=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,d=j.filter),"applyToClusters"in j&&n(9,$=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,C=j.maxzoom),"hoverCursor"in j&&n(12,S=j.hoverCursor),"manageHoverState"in j&&n(13,O=j.manageHoverState),"hovered"in j&&n(0,M=j.hovered),"eventsIfTopMost"in j&&n(14,D=j.eventsIfTopMost),"interactive"in j&&n(15,E=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[M,o,s,f,i,a,u,c,d,$,y,C,S,O,D,E,t,P,I,N,L,F,B,H,l]}class $o extends J{constructor(e){super(),K(this,e,co,uo,X,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Bn(r){let e=r[0],n,t,l=Hn(r);return{c(){l.c(),n=Le()},m(o,s){l.m(o,s),p(o,n,s),t=!0},p(o,s){s&1&&X(e,e=o[0])?(ce(),g(l,1,1,re),$e(),l=Hn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l.d(o)}}}function Hn(r){let e;const n=r[9].default,t=Bt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Ht(t,n,l,l[8],e?Ut(n,l[8],o,null):zt(l[8]),null)},i(l){e||(_(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function po(r){let e,n,t=r[0]&&Bn(r);return{c(){t&&t.c(),e=Le()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=Bn(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(ce(),g(t,1,1,()=>{t=null}),$e())},i(l){n||(_(t),n=!0)},o(l){g(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function mo(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=vn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e;if(i&&i.includes("pmtiles://")&&!Ln.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new El;Ln.addProtocol("pmtiles",y.tile)}const{map:c,self:d}=ol();ve(r,c,y=>n(7,l=y)),ve(r,d,y=>n(0,t=y));let $;return sl(()=>{t&&l&&(il(c,t,$),At(d,t=null,t),$=void 0)}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,u=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==f&&(At(d,t=f,t),al(l,t,fl({type:"vector",url:i,tiles:a,promoteId:u}),y=>l&&y===t,()=>{t&&($=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{$=l==null?void 0:l.getSource(f)}))},[t,c,d,f,i,a,u,l,s,o]}class we extends J{constructor(e){super(),K(this,e,mo,po,X,{id:3,url:4,tiles:5,promoteId:6})}}const _o={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ne=Uint8Array,ut=Uint16Array,ml=Uint32Array,_l=new Ne([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),gl=new Ne([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),go=new Ne([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),dl=function(r,e){for(var n=new ut(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new ml(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},hl=dl(_l,2),bl=hl[0],ho=hl[1];bl[28]=258,ho[258]=28;var bo=dl(gl,0),vo=bo[0],pn=new ut(32768);for(var _e=0;_e<32768;++_e){var rt=(_e&43690)>>>1|(_e&21845)<<1;rt=(rt&52428)>>>2|(rt&13107)<<2,rt=(rt&61680)>>>4|(rt&3855)<<4,pn[_e]=((rt&65280)>>>8|(rt&255)<<8)>>>1}var Ft=function(r,e,n){for(var t=r.length,l=0,o=new ut(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new ut(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var f;if(n){f=new ut(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],u=e-r[l],c=s[r[l]-1]++<<u,d=c|(1<<u)-1;c<=d;++c)f[pn[c]>>>i]=a}else for(f=new ut(t),l=0;l<t;++l)r[l]&&(f[l]=pn[s[r[l]-1]++]>>>15-r[l]);return f},qt=new Ne(288);for(var _e=0;_e<144;++_e)qt[_e]=8;for(var _e=144;_e<256;++_e)qt[_e]=9;for(var _e=256;_e<280;++_e)qt[_e]=7;for(var _e=280;_e<288;++_e)qt[_e]=8;var vl=new Ne(32);for(var _e=0;_e<32;++_e)vl[_e]=5;var wo=Ft(qt,9,1),ko=Ft(vl,5,1),rn=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},De=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},ln=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},yo=function(r){return(r+7)/8|0},yn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?ut:r.BYTES_PER_ELEMENT==4?ml:Ne)(n-e);return t.set(r.subarray(e,n)),t},So=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],je=function(r,e,n){var t=new Error(e||So[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,je),!n)throw t;return t},Co=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Ne(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ne(t*3));var s=function(Te){var Ue=e.length;if(Te>Ue){var xe=new Ne(Math.max(Ue*2,Te));xe.set(e),e=xe}},f=n.f||0,i=n.p||0,a=n.b||0,u=n.l,c=n.d,d=n.m,$=n.n,y=t*8;do{if(!u){f=De(r,i,1);var C=De(r,i+1,3);if(i+=3,C)if(C==1)u=wo,c=ko,d=9,$=5;else if(C==2){var D=De(r,i,31)+257,E=De(r,i+10,15)+4,P=D+De(r,i+5,31)+1;i+=14;for(var I=new Ne(P),N=new Ne(19),L=0;L<E;++L)N[go[L]]=De(r,i+L*3,7);i+=E*3;for(var F=rn(N),B=(1<<F)-1,H=Ft(N,F,1),L=0;L<P;){var j=H[De(r,i,B)];i+=j&15;var S=j>>>4;if(S<16)I[L++]=S;else{var U=0,Y=0;for(S==16?(Y=3+De(r,i,3),i+=2,U=I[L-1]):S==17?(Y=3+De(r,i,7),i+=3):S==18&&(Y=11+De(r,i,127),i+=7);Y--;)I[L++]=U}}var ne=I.subarray(0,D),Z=I.subarray(D);d=rn(ne),$=rn(Z),u=Ft(ne,d,1),c=Ft(Z,$,1)}else je(1);else{var S=yo(i)+4,O=r[S-4]|r[S-3]<<8,M=S+O;if(M>t){o&&je(0);break}l&&s(a+O),e.set(r.subarray(S,M),a),n.b=a+=O,n.p=i=M*8,n.f=f;continue}if(i>y){o&&je(0);break}}l&&s(a+131072);for(var Ce=(1<<d)-1,Pe=(1<<$)-1,ae=i;;ae=i){var U=u[ln(r,i)&Ce],de=U>>>4;if(i+=U&15,i>y){o&&je(0);break}if(U||je(2),de<256)e[a++]=de;else if(de==256){ae=i,u=null;break}else{var Ie=de-254;if(de>264){var L=de-257,ue=_l[L];Ie=De(r,i,(1<<ue)-1)+bl[L],i+=ue}var pe=c[ln(r,i)&Pe],me=pe>>>4;pe||je(3),i+=pe&15;var Z=vo[me];if(me>3){var ue=gl[me];Z+=ln(r,i)&(1<<ue)-1,i+=ue}if(i>y){o&&je(0);break}l&&s(a+131072);for(var Ee=a+Ie;a<Ee;a+=4)e[a]=e[a-Z],e[a+1]=e[a+1-Z],e[a+2]=e[a+2-Z],e[a+3]=e[a+3-Z];a=Ee}}n.l=u,n.p=ae,n.b=a,n.f=f,u&&(f=1,n.m=d,n.d=c,n.n=$)}while(!f);return a==e.length?e:yn(e,0,a)},To=new Ne(0),Ye=function(r,e){return r[e]|r[e+1]<<8},Be=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},on=function(r,e){return Be(r,e)+Be(r,e+4)*4294967296};function Oo(r,e){return Co(r,e)}var mn=typeof TextDecoder<"u"&&new TextDecoder,Ao=0;try{mn.decode(To,{stream:!0}),Ao=1}catch{}var Lo=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,yn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function wl(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(mn)return mn.decode(r);var l=Lo(r),o=l[0],s=l[1];return s.length&&je(8),o}}var Io=function(r,e){return e+30+Ye(r,e+26)+Ye(r,e+28)},Po=function(r,e,n){var t=Ye(r,e+28),l=wl(r.subarray(e+46,e+46+t),!(Ye(r,e+8)&2048)),o=e+46+t,s=Be(r,e+20),f=n&&s==4294967295?No(r,o):[s,Be(r,e+24),Be(r,e+42)],i=f[0],a=f[1],u=f[2];return[Ye(r,e+10),i,a,l,o+Ye(r,e+30)+Ye(r,e+32),u]},No=function(r,e){for(;Ye(r,e)!=1;e+=4+Ye(r,e+2));return[on(r,e+12),on(r,e+4),on(r,e+20)]};function Mo(r,e){for(var n={},t=r.length-22;Be(r,t)!=101010256;--t)(!t||r.length-t>65558)&&je(13);var l=Ye(r,t+8);if(!l)return{};var o=Be(r,t+16),s=o==4294967295||l==65535;if(s){var f=Be(r,t-12);s=Be(r,f)==101075792,s&&(l=Be(r,f+32),o=Be(r,f+48))}for(var i=e&&e.filter,a=0;a<l;++a){var u=Po(r,o,s),c=u[0],d=u[1],$=u[2],y=u[3],C=u[4],S=u[5],O=Io(r,S);o=C,(!i||i({name:y,size:d,originalSize:$,compression:c}))&&(c?c==8?n[y]=Oo(r.subarray(O,O+d),new Ne($)):je(14,"unknown compression type "+c):n[y]=yn(r,O,O+d))}return n}function Fo(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(sn):sn(r)}function sn(r){var e=new Uint8Array(r),n=Mo(e);return Promise.resolve(Eo(n))}function Eo(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=wl(r[l])}return e}function Je(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&ct(t)===e)return t;n++}}function Wt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&ct(l)===e&&n.push(l),t++}return n}function Zt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&ct(l)===e&&n(l,t):n(l,t),t++}}function Do(r,e,n){var t=[];return Zt(r,e,function(l,o){t.push(n(l,o))}),t}var jo=/.+\:/;function ct(r){return r.tagName.replace(jo,"")}function kl(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+ct(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=kl(r.childNodes[t]),t++;return e+="</"+ct(r)+">",e}function Ro(r){var e=r.documentElement,n=Je(e,"sheetData"),t=[];return Zt(n,"row",function(l){Zt(l,"c",function(o){t.push(o)})}),t}function Bo(r,e){return Je(e,"v")}function Ho(r,e){if(e.firstChild&&ct(e.firstChild)==="is"&&e.firstChild.firstChild&&ct(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function zo(r){var e=r.documentElement,n=Je(e,"dimension");if(n)return n.getAttribute("ref")}function Uo(r){var e=r.documentElement,n=Je(e,"cellStyleXfs");return n?Wt(n,"xf"):[]}function Go(r){var e=r.documentElement,n=Je(e,"cellXfs");return n?Wt(n,"xf"):[]}function qo(r){var e=r.documentElement,n=Je(e,"numFmts");return n?Wt(n,"numFmt"):[]}function Wo(r){var e=r.documentElement;return Do(e,"si",function(n){var t=Je(n,"t");if(t)return t.textContent;var l="";return Zt(n,"r",function(o){l+=Je(o,"t").textContent}),l})}function Vo(r){var e=r.documentElement;return Je(e,"workbookPr")}function Xo(r){var e=r.documentElement;return Wt(e,"Relationship")}function Yo(r){var e=r.documentElement,n=Je(e,"sheets");return Wt(n,"sheet")}function Qo(r,e){var n=e.createDocument(r),t={},l=Vo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(f){f.getAttribute("name")&&t.sheets.push({id:f.getAttribute("sheetId"),name:f.getAttribute("name"),relationId:f.getAttribute("r:id")})};return Yo(n).forEach(o),t}function Jo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var f=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=an(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=an(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=an(f);break}};return Xo(n).forEach(l),t}function an(r){return r[0]==="/"?r.slice(1):"xl/"+r}function zn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Un(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zn(Object(n),!0).forEach(function(t){Ko(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ko(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Zo(r,e){if(!r)return{};var n=e.createDocument(r),t=Uo(n).map(fn),l=qo(n).map(xo).reduce(function(s,f){return s[f.id]=f,s},[]),o=function(f){return f.hasAttribute("xfId")?Un(Un({},t[f.xfId]),fn(f,l)):fn(f,l)};return Go(n).map(o)}function xo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function fn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function es(r,e){return r?Wo(e.createDocument(r)):[]}function yl(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function ts(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ns(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ns(r,e){if(r){if(typeof r=="string")return Gn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gn(r,e)}}function Gn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function rs(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(ls.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&is(l.numberFormat.template))return!0}}var ls=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],os=/^\[\$-414\]/,ss=/;@$/;function is(r){r=r.toLowerCase(),r=r.replace(os,""),r=r.replace(ss,"");for(var e=r.split(/\W+/),n=ts(e),t;!(t=n()).done;){var l=t.value;if(as.indexOf(l)<0)return!1}return!0}var as=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function fs(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,f=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=un(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=un(r,a);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=f.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=f[u],r=un(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=us(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var d=Number(r);if(isNaN(d))throw new Error('Invalid "numeric" cell value: '.concat(r));r=d,rs(r,o(),s,a)&&(r=yl(r,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function us(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function un(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var cs=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function $s(r){var e=function(a,u){return a-u},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],f=t[t.length-1];return[{row:l,column:s},{row:o,column:f}]}function ps(r){for(var e=0,n=0;n<r.length;)e*=26,e+=cs.indexOf(r[n]),n++;return e}function Sl(r){return r=r.split(/(\d+)/),[parseInt(r[1]),ps(r[0].trim())]}function ms(r,e,n,t,l,o,s){var f=Sl(r.getAttribute("r")),i=Bo(e,r),a=i&&i.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:f[0],column:f[1],value:fs(a,u,{getInlineStringValue:function(){return Ho(e,r)},getInlineStringXml:function(){return kl(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function _s(r,e,n,t,l,o){var s=Ro(r);return s.length===0?[]:s.map(function(f){return ms(f,r,e,n,t,l,o)})}function gs(r,e){return vs(r)||bs(r,e)||hs(r,e)||ds()}function ds(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hs(r,e){if(r){if(typeof r=="string")return qn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qn(r,e)}}function qn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function bs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function vs(r){if(Array.isArray(r))return r}function ws(r){var e=zo(r);if(e)return e=e.split(":").map(Sl).map(function(n){var t=gs(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function ks(r,e,n,t,l,o){var s=e.createDocument(r),f=_s(s,e,n,t,l,o),i=ws(s)||$s(f);return{cells:f,dimensions:i}}function ys(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ss(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ss(r,e){if(r){if(typeof r=="string")return Wn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wn(r,e)}}function Wn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Cs(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var f=!0,i=ys(r[s]),a;!(a=i()).done;){var u=a.value;if(l(u)!==null){f=!1;break}}if(f)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function Ts(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Os(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Os(r,e){if(r){if(typeof r=="string")return Vn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(r,e)}}function Vn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function As(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,f=Ts(r),i;!(i=f()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var u=0;u<r.length;)r[u].splice(o,1),u++;else if(l)break;o--}return r}function Ls(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Cl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Is(r,e){return Ms(r)||Ns(r,e)||Cl(r,e)||Ps()}function Ps(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cl(r,e){if(r){if(typeof r=="string")return Xn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xn(r,e)}}function Xn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ns(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Ms(r){if(Array.isArray(r))return r}function Fs(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Is(n,2);l[0];for(var o=l[1],s=o.column,f=o.row,i=new Array(f),a=0;a<f;){i[a]=new Array(s);for(var u=0;u<s;)i[a][u]=null,u++;a++}for(var c=Ls(t),d;!(d=c()).done;){var $=d.value,y=$.row-1,C=$.column-1;C<s&&y<f&&(i[y][C]=$.value)}var S=e.rowMap;if(S)for(var O=0;O<i.length;)S[O]=O,O++;return i=Cs(As(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(i=e.transformData(i)),i}function Es(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ds(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ds(r,e){if(r){if(typeof r=="string")return Yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(r,e)}}function Yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Qn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function js(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Qn(Object(n),!0).forEach(function(t){Rs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Qn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Rs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Bs(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=js({sheet:1},n));var t=function(d){if(!r[d])throw new Error('"'.concat(d,'" file not found inside the *.xlsx file zip archive'));return r[d]},l=Jo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?es(t(l.sharedStrings),e):[],s=l.styles?Zo(t(l.styles),e):{},f=Qo(t("xl/workbook.xml"),e);if(n.getSheets)return f.sheets.map(function(c){var d=c.name;return{name:d}});var i=Hs(n.sheet,f.sheets);if(!i||!l.sheets[i])throw zs(n.sheet,f.sheets);var a=ks(t(l.sheets[i]),e,o,s,f,n),u=Fs(a,n);return n.properties?{data:u,properties:f}:u}function Hs(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Es(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function zs(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function _n(r){"@babel/helpers - typeof";return _n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(r)}function Jn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Us(r,e,n){return e&&Jn(r.prototype,e),n&&Jn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Gs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function qs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&jt(r,e)}function Ws(r){var e=Tl();return function(){var t=Rt(r),l;if(e){var o=Rt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return Vs(this,l)}}function Vs(r,e){if(e&&(_n(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xs(r)}function Xs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function gn(r){var e=typeof Map=="function"?new Map:void 0;return gn=function(t){if(t===null||!Ys(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Yt(t,arguments,Rt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),jt(l,t)},gn(r)}function Yt(r,e,n){return Tl()?Yt=Reflect.construct:Yt=function(l,o,s){var f=[null];f.push.apply(f,o);var i=Function.bind.apply(l,f),a=new i;return s&&jt(a,s.prototype),a},Yt.apply(null,arguments)}function Tl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ys(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function jt(r,e){return jt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},jt(r,e)}function Rt(r){return Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Rt(r)}var Me=function(r){qs(n,r);var e=Ws(n);function n(t){var l;return Gs(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Us(n)}(gn(Error));function Qs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Me("not_a_number")}if(typeof r!="number")throw new Me("not_a_number");if(isNaN(r))throw new Me("invalid_number");if(!isFinite(r))throw new Me("out_of_bounds");return r}function Js(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Me("invalid_number");if(!isFinite(r))throw new Me("out_of_bounds");return String(r)}throw new Me("not_a_string")}function Ks(r){if(typeof r=="boolean")return r;throw new Me("not_a_boolean")}function Zs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Me("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Me("invalid_number");if(!isFinite(r))throw new Me("out_of_bounds");var t=yl(r,n);if(isNaN(t.valueOf()))throw new Me("out_of_bounds");return t}throw new Me("not_a_date")}function xs(r,e){return ni(r)||ti(r,e)||Ol(r,e)||ei()}function ei(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ti(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function ni(r){if(Array.isArray(r))return r}function dn(r){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(r)}function ri(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ol(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ol(r,e){if(r){if(typeof r=="string")return Kn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(r,e)}}function Kn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Zn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function xn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zn(Object(n),!0).forEach(function(t){li(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function li(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var er={isColumnOriented:!1};function oi(r,e,n){n?n=xn(xn({},er),n):n=er;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;fi(e),l&&(r=ai(r));for(var f=r[0],i=[],a=[],u=1;u<r.length;u++){var c=Al(e,r[u],u,f,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var d=ri(a),$;!($=d()).done;){var y=$.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function Al(r,e,n,t,l,o){for(var s={},f=!0,i=function(){var d=u[a],$=r[d],y=dn($.type)==="object"&&!Array.isArray($.type),C=e[t.indexOf(d)];C===void 0&&(C=null);var S=void 0,O=void 0,M=void 0;if(y)S=Al($.type,e,n,t,l,o);else if(C===null)S=null;else if(Array.isArray($.type)){var D=!1,E=ii(C).map(function(I){var N=tr(I,$,o);return N.error&&(S=I,O=N.error,M=N.reason),N.value!==null&&(D=!0),N.value});O||(S=D?E:null)}else{var P=tr(C,$,o);O=P.error,M=P.reason,S=O?C:P.value}!O&&S===null&&$.required&&(O="required"),O?(O={error:O,row:n+1,column:d,value:S},M&&(O.reason=M),$.type&&(O.type=$.type),l.push(O)):(f&&S!==null&&(f=!1),(S!==null||o.includeNullValues)&&(s[$.prop]=S))},a=0,u=Object.keys(r);a<u.length;a++)i();return f?null:s}function tr(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=pt(r,e.parse):e.type?t=si(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function pt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function si(r,e,n){switch(e){case String:return pt(r,Js);case Number:return pt(r,Qs);case Date:return pt(r,function(t){return Zs(t,{properties:n.properties})});case Boolean:return pt(r,Ks);default:if(typeof e=="function")return pt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Ll(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=Ll(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function ii(r){for(var e=[],n=0;n<r.length;){var t=Ll(r,",",n),l=xs(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var ai=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function fi(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function hn(r){"@babel/helpers - typeof";return hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(r)}function Il(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;hn(o)==="object"&&(o=Object.keys(r[l])[0],s=Il(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var ui=["schema","map"];function nr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Xt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nr(Object(n),!0).forEach(function(t){ci(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ci(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function $i(r,e){if(r==null)return{};var n=pi(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function pi(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function mi(r,e,n){var t=n.schema,l=n.map,o=$i(n,ui);!t&&l&&(t=Il(l));var s=Bs(r,e,Xt(Xt({},o),{},{properties:t||o.properties}));return t?oi(s.data,t,Xt(Xt({},o),{},{properties:s.properties})):s}function _i(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Fo(r).then(function(n){return mi(n,_o,e)})}function gi(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>di(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function di(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function hi(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await _i(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Dl(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const bn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function bi(r){return tn(["get","intervention_type"],{area:tt.area,route:tt.route,crossing:tt.crossing,other:tt.other},"white")}function rr(r){return[["Areas",tt.area],["Routes",tt.route],["Crossings",tt.crossing],["Other",tt.other]]}const oe={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},He=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Pl(){let[r,e]=Nl(bn,oe.funding_programmes);return[tn(["get","funding_programme"],r,"grey"),e]}function vi(){let r=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=Nl(r,oe.current_milestone);return[tn(["get","current_milestone"],e,"grey"),n]}function Nl(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function wi(r){let e,n;return e=new pl({props:{rows:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ki(r){let e,n,t,l,o;function s(i){r[3](i)}let f={label:"Color interventions",id:"colorInterventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(f.value=r[0]),e=new Ot({props:f}),q.push(()=>W(e,"value",s)),e.$on("change",r[2]),l=new Re({props:{label:"Legend",$$slots:{default:[wi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};!n&&a&1&&(n=!0,u.value=i[0],V(()=>n=!1)),e.$set(u);const c={};a&34&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}function yi(r,e,n){let t;ve(r,wn,i=>n(4,t=i));let l="fundingProgramme",o=rr();function s(){let i;l=="interventionType"?(i=bi(),n(1,o=rr())):l=="fundingProgramme"?n(1,[i,o]=Pl(),o):l=="currentMilestone"&&n(1,[i,o]=vi(),o),t.setPaintProperty("interventions-points","circle-color",i),t.setPaintProperty("interventions-lines","line-color",i),t.setPaintProperty("interventions-polygons","fill-color",i),t.setPaintProperty("interventions-polygons-outlines","line-color",i)}function f(i){l=i,n(0,l)}return[l,o,s,f]}class Si extends J{constructor(e){super(),K(this,e,yi,ki,X,{})}}const Lt=Gt({type:"FeatureCollection",features:[],schemes:{}}),xt=Gt(new Map),lr=Gt(!0),Qt=Gt(""),Jt=Gt("");function Ci(r){let e;return{c(){e=k("Clear")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ti(r){let e,n,t,l,o,s;return t=new Et({props:{$$slots:{default:[Ci]},$$scope:{ctx:r}}}),t.$on("click",r[15]),{c(){e=T("input"),n=A(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){p(f,e,i),Qe(e,r[6]),p(f,n,i),b(t,f,i),l=!0,o||(s=st(e,"input",r[14]),o=!0)},p(f,i){i&64&&e.value!==f[6]&&Qe(e,f[6]);const a={};i&8388608&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(_(t.$$.fragment,f),l=!0)},o(f){g(t.$$.fragment,f),l=!1},d(f){f&&(m(e),m(n)),v(t,f),o=!1,s()}}}function Oi(r){let e;return{c(){e=k("Clear")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ai(r){let e,n,t,l,o,s;return t=new Et({props:{$$slots:{default:[Oi]},$$scope:{ctx:r}}}),t.$on("click",r[17]),{c(){e=T("input"),n=A(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(f,i){p(f,e,i),Qe(e,r[5]),p(f,n,i),b(t,f,i),l=!0,o||(s=st(e,"input",r[16]),o=!0)},p(f,i){i&32&&e.value!==f[5]&&Qe(e,f[5]);const a={};i&8388608&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(_(t.$$.fragment,f),l=!0)},o(f){g(t.$$.fragment,f),l=!1},d(f){f&&(m(e),m(n)),v(t,f),o=!1,s()}}}function Li(r){let e,n,t,l,o,s,f,i,a,u,c,d,$,y,C;function S(I){r[11](I)}let O={label:"Authority or region",id:"filterAuthority",choices:r[7],emptyOption:!0};r[2]!==void 0&&(O.value=r[2]),e=new Ot({props:O}),q.push(()=>W(e,"value",S));function M(I){r[12](I)}let D={label:"Funding programme",id:"filterFundingProgramme",choices:r[8],emptyOption:!0};r[3]!==void 0&&(D.value=r[3]),l=new Ot({props:D}),q.push(()=>W(l,"value",M));function E(I){r[13](I)}let P={label:"Current milestone",id:"filterCurrentMilestone",choices:r[9],emptyOption:!0};return r[4]!==void 0&&(P.value=r[4]),f=new Ot({props:P}),q.push(()=>W(f,"value",E)),u=new cn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Ti]},$$scope:{ctx:r}}}),d=new cn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Ai]},$$scope:{ctx:r}}}),y=new Si({}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment),s=A(),h(f.$$.fragment),a=A(),h(u.$$.fragment),c=A(),h(d.$$.fragment),$=A(),h(y.$$.fragment)},m(I,N){b(e,I,N),p(I,t,N),b(l,I,N),p(I,s,N),b(f,I,N),p(I,a,N),b(u,I,N),p(I,c,N),b(d,I,N),p(I,$,N),b(y,I,N),C=!0},p(I,N){const L={};N&128&&(L.choices=I[7]),!n&&N&4&&(n=!0,L.value=I[2],V(()=>n=!1)),e.$set(L);const F={};N&256&&(F.choices=I[8]),!o&&N&8&&(o=!0,F.value=I[3],V(()=>o=!1)),l.$set(F);const B={};N&512&&(B.choices=I[9]),!i&&N&16&&(i=!0,B.value=I[4],V(()=>i=!1)),f.$set(B);const H={};N&8388672&&(H.$$scope={dirty:N,ctx:I}),u.$set(H);const j={};N&8388640&&(j.$$scope={dirty:N,ctx:I}),d.$set(j)},i(I){C||(_(e.$$.fragment,I),_(l.$$.fragment,I),_(f.$$.fragment,I),_(u.$$.fragment,I),_(d.$$.fragment,I),_(y.$$.fragment,I),C=!0)},o(I){g(e.$$.fragment,I),g(l.$$.fragment,I),g(f.$$.fragment,I),g(u.$$.fragment,I),g(d.$$.fragment,I),g(y.$$.fragment,I),C=!1},d(I){I&&(m(t),m(s),m(a),m(c),m($)),v(e,I),v(l,I),v(f,I),v(u,I),v(d,I),v(y,I)}}}function Ii(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[10].route.toLocaleString()+"",s,f,i=r[10].area.toLocaleString()+"",a,u,c=r[10].crossing.toLocaleString()+"",d,$,y=r[10].other.toLocaleString()+"",C,S,O=or(r[10].totalLength).toFixed(1)+"",M,D;return{c(){e=k("Showing "),t=k(n),l=k(" schemes ("),s=k(o),f=k(`
    routes, `),a=k(i),u=k(` areas,
    `),d=k(c),$=k(" crossings, "),C=k(y),S=k(`
    other, with total LineString length of `),M=k(O),D=k(" miles)")},m(E,P){p(E,e,P),p(E,t,P),p(E,l,P),p(E,s,P),p(E,f,P),p(E,a,P),p(E,u,P),p(E,d,P),p(E,$,P),p(E,C,P),p(E,S,P),p(E,M,P),p(E,D,P)},p(E,P){P&1&&n!==(n=E[0].size.toLocaleString()+"")&&R(t,n),P&1024&&o!==(o=E[10].route.toLocaleString()+"")&&R(s,o),P&1024&&i!==(i=E[10].area.toLocaleString()+"")&&R(a,i),P&1024&&c!==(c=E[10].crossing.toLocaleString()+"")&&R(d,c),P&1024&&y!==(y=E[10].other.toLocaleString()+"")&&R(C,y),P&1024&&O!==(O=or(E[10].totalLength).toFixed(1)+"")&&R(M,O)},d(E){E&&(m(e),m(t),m(l),m(s),m(f),m(a),m(u),m(d),m($),m(C),m(S),m(M),m(D))}}}function Pi(r){let e,n,t;function l(s){r[18](s)}let o={id:"show-schemes",$$slots:{default:[Ii]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),q.push(()=>W(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f&8389633&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ni(r){let e,n,t,l;return e=new Re({props:{label:"Filters",$$slots:{default:[Li]},$$scope:{ctx:r}}}),t=new Ke({props:{small:!0,$$slots:{default:[Pi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,[s]){const f={};s&8389628&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&8389635&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function or(r){return r*621371e-9}function Mi(r,e,n){let t,l,o,s;ve(r,Jt,B=>n(5,t=B)),ve(r,Qt,B=>n(6,l=B)),ve(r,Lt,B=>n(19,o=B)),ve(r,xt,B=>n(20,s=B));let{schemesToBeShown:f=new Set}=e,{show:i=!0}=e,a=[],u="",c=[],d=new Set(bn.slice(0,-1)),$="",y=[],C="",S={area:0,route:0,crossing:0,other:0,totalLength:0};kn(()=>{var U,Y,ne;let B=new Set,H=new Set,j=new Set;for(let Z of s.values())(U=Z.browse)!=null&&U.authority_or_region&&B.add(Z.browse.authority_or_region),(Y=Z.browse)!=null&&Y.funding_programme&&H.add(Z.browse.funding_programme),(ne=Z.browse)!=null&&ne.current_milestone&&j.add(Z.browse.current_milestone);n(7,a=Array.from(B.entries())),a.sort(),n(8,c=bn.map(Z=>[Z,Z])),n(9,y=Array.from(j.entries())),y.sort()});function O(B,H,j,U,Y){let ne=B.toLowerCase(),Z=H.toLowerCase(),Ce=ae=>{var de,Ie,ue,pe,me,Ee;if(ne&&!((de=ae.properties.name)!=null&&de.toLowerCase().includes(ne))&&!((Ie=ae.properties.description)!=null&&Ie.toLowerCase().includes(ne)))return!1;if(Z||j||U||Y){let Te=s.get(ae.properties.scheme_reference);if(j&&((ue=Te.browse)==null?void 0:ue.authority_or_region)!=j||U&&U!=="Other"&&((pe=Te.browse)==null?void 0:pe.funding_programme)!=U||U==="Other"&&d.has(((me=Te.browse)==null?void 0:me.funding_programme)??"")||Y&&((Ee=Te.browse)==null?void 0:Ee.current_milestone)!=Y||Z&&!Te.scheme_reference.toLowerCase().includes(Z)&&!(Te.scheme_name??"").toLowerCase().includes(Z))return!1}return!0};n(0,f=new Set(o.features.filter(Ce).map(ae=>ae.properties.scheme_reference))),n(10,S={area:0,route:0,crossing:0,other:0,totalLength:0});let Pe=ae=>{var de,Ie;return!(!f.has(ae.properties.scheme_reference)||ne&&!((de=ae.properties.name)!=null&&de.toLowerCase().includes(ne))&&!((Ie=ae.properties.description)!=null&&Ie.toLowerCase().includes(ne)))};for(let ae of o.features)Pe(ae)?(delete ae.properties.hide_while_editing,n(10,S[ae.properties.intervention_type]++,S),ae.geometry.type=="LineString"&&ae.properties.length_meters&&n(10,S.totalLength+=ae.properties.length_meters,S)):ae.properties.hide_while_editing=!0;Lt.set(o),n(10,S)}function M(B){u=B,n(2,u)}function D(B){$=B,n(3,$)}function E(B){C=B,n(4,C)}function P(){l=this.value,Qt.set(l)}const I=()=>At(Qt,l="",l);function N(){t=this.value,Jt.set(t)}const L=()=>At(Jt,t="",t);function F(B){i=B,n(1,i)}return r.$$set=B=>{"schemesToBeShown"in B&&n(0,f=B.schemesToBeShown),"show"in B&&n(1,i=B.show)},r.$$.update=()=>{r.$$.dirty&124&&O(l,t,u,$,C)},[f,i,u,$,C,t,l,a,c,y,S,M,D,E,P,I,N,L,F]}class Fi extends J{constructor(e){super(),K(this,e,Mi,Ni,X,{schemesToBeShown:0,show:1})}}function Ei(r){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Di(r){let e,n,t,l,o;return t=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("License: "),h(t.$$.fragment),l=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,f){p(s,e,f),w(e,n),b(t,e,null),w(e,l),o=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){o||(_(t.$$.fragment,s),o=!0)},o(s){g(t.$$.fragment,s),o=!1},d(s){s&&m(e),v(t)}}}class Fe extends J{constructor(e){super(),K(this,e,null,Di,X,{})}}function sr(r,e,n){const t=r.slice();return t[2]=e[n],t}function ir(r,e,n){const t=r.slice();return t[5]=e[n],t}function ar(r){let e,n;return{c(){e=T("span"),n=k(`
    `),ke(e,"background",r[5]),ke(e,"width","100%"),ke(e,"border","1px solid black")},m(t,l){p(t,e,l),w(e,n)},p(t,l){l&1&&ke(e,"background",t[5])},d(t){t&&m(e)}}}function fr(r){let e,n=r[2]+"",t;return{c(){e=T("span"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&R(t,n)},d(l){l&&m(e)}}}function ji(r){let e,n,t,l=Oe(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=ar(ir(r,l,i));let s=Oe(r[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=fr(sr(r,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=A(),t=T("div");for(let i=0;i<f.length;i+=1)f[i].c();ke(e,"display","flex"),ke(t,"display","flex"),ke(t,"justify-content","space-between")},m(i,a){p(i,e,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);p(i,n,a),p(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){l=Oe(i[0]);let u;for(u=0;u<l.length;u+=1){const c=ir(i,l,u);o[u]?o[u].p(c,a):(o[u]=ar(c),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}if(a&2){s=Oe(i[1]);let u;for(u=0;u<s.length;u+=1){const c=sr(i,s,u);f[u]?f[u].p(c,a):(f[u]=fr(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:re,o:re,d(i){i&&(m(e),m(n),m(t)),it(o,i),it(f,i)}}}function Ri(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ze extends J{constructor(e){super(),K(this,e,Ri,ji,X,{colorScale:0,limits:1})}}function ur(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Bi(r){let e;return{c(){e=k("Percent of households with a car")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hi(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function zi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ui(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Gi(r){let e,n,t,l,o,s,f,i,a,u,c,d;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[zi]},$$scope:{ctx:r}}}),u=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),f=A(),i=T("p"),a=k("License: "),h(u.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m($,y){p($,e,y),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),p($,f,y),p($,i,y),w(i,a),b(u,i,null),w(i,c),d=!0},p($,y){const C={};y&65536&&(C.$$scope={dirty:y,ctx:$}),t.$set(C);const S={};y&65536&&(S.$$scope={dirty:y,ctx:$}),o.$set(S);const O={};y&65536&&(O.$$scope={dirty:y,ctx:$}),u.$set(O)},i($){d||(_(t.$$.fragment,$),_(o.$$.fragment,$),_(u.$$.fragment,$),d=!0)},o($){g(t.$$.fragment,$),g(o.$$.fragment,$),g(u.$$.fragment,$),d=!1},d($){$&&(m(e),m(f),m(i)),v(t),v(o),v(u)}}}function qi(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Gi]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function cr(r){let e,n;return e=new Ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wi(r){let e;return{c(){e=k("Average cars per household")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Vi(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Xi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Yi(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qi(r){let e,n,t,l,o,s,f,i,a,u,c,d,$,y;return o=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Vi]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Xi]},$$scope:{ctx:r}}}),d=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Yi]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=A(),t=T("p"),l=k("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=k(". Output area boundaries from "),h(f.$$.fragment),i=k("."),a=A(),u=T("p"),c=k("License: "),h(d.$$.fragment),$=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(C,S){p(C,e,S),p(C,n,S),p(C,t,S),w(t,l),b(o,t,null),w(t,s),b(f,t,null),w(t,i),p(C,a,S),p(C,u,S),w(u,c),b(d,u,null),w(u,$),y=!0},p(C,S){const O={};S&65536&&(O.$$scope={dirty:S,ctx:C}),o.$set(O);const M={};S&65536&&(M.$$scope={dirty:S,ctx:C}),f.$set(M);const D={};S&65536&&(D.$$scope={dirty:S,ctx:C}),d.$set(D)},i(C){y||(_(o.$$.fragment,C),_(f.$$.fragment,C),_(d.$$.fragment,C),y=!0)},o(C){g(o.$$.fragment,C),g(f.$$.fragment,C),g(d.$$.fragment,C),y=!1},d(C){C&&(m(e),m(n),m(t),m(a),m(u)),v(o),v(f),v(d)}}}function Ji(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Qi]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function $r(r){let e,n;return e=new Ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ki(r){let e;return{c(){e=k("Population density")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Zi(r){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ea(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Zi]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[xi]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),f=A(),h(i.$$.fragment)},m(u,c){p(u,e,c),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),p(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&65536&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const $={};c&65536&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!1},d(u){u&&(m(e),m(f)),v(t),v(o),v(i,u)}}}function ta(r){let e,n,t;return n=new ge({props:{$$slots:{default:[ea]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function pr(r){let e,n,t,l;return t=new Ze({props:{colorScale:r[4],limits:r[6]().map(fa)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=A(),h(t.$$.fragment)},m(o,s){p(o,e,s),p(o,n,s),b(t,o,s),l=!0},p:re,i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),v(t,o)}}}function na(r){let e,n,t,l=r[15].toLocaleString()+"",o,s,f=r[14]+"",i;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(l),s=k(`
          people per square kilometre in `),i=k(f)},m(a,u){p(a,e,u),w(e,n),w(e,t),w(t,o),w(e,s),w(e,i)},p(a,u){u&8200&&l!==(l=a[15].toLocaleString()+"")&&R(o,l),u&8192&&f!==(f=a[14]+"")&&R(i,f)},d(a){a&&m(e)}}}function ra(r){let e,n,t=r[14]+"",l,o,s,f=r[15]+"",i,a;return{c(){e=T("p"),n=k("Households in "),l=k(t),o=k(` have an average of
          `),s=T("b"),i=k(f),a=k(`
          cars`)},m(u,c){p(u,e,c),w(e,n),w(e,l),w(e,o),w(e,s),w(s,i),w(e,a)},p(u,c){c&8192&&t!==(t=u[14]+"")&&R(l,t),c&8200&&f!==(f=u[15]+"")&&R(i,f)},d(u){u&&m(e)}}}function la(r){let e,n,t=r[15]+"",l,o,s,f=r[14]+"",i,a;return{c(){e=T("p"),n=T("b"),l=k(t),o=k("%"),s=k(`
          of households in `),i=k(f),a=k(" have 1 or more cars")},m(u,c){p(u,e,c),w(e,n),w(n,l),w(n,o),w(e,s),w(e,i),w(e,a)},p(u,c){c&8200&&t!==(t=u[15]+"")&&R(l,t),c&8192&&f!==(f=u[14]+"")&&R(i,f)},d(u){u&&m(e)}}}function oa(r){ur(r);let e;function n(o,s){return o[3]=="percent_households_with_car"?la:o[3]=="average_cars_per_household"?ra:na}let t=n(r),l=t(r);return{c(){l.c(),e=Le()},m(o,s){l.m(o,s),p(o,e,s)},p(o,s){ur(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function sa(r){let e,n;return e=new fe({props:{$$slots:{default:[oa,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ia(r){let e,n,t,l;const o=[z(et),{sourceLayer:et},{paint:{"fill-color":ye(["get",r[3]],r[6](),r[4]),"fill-opacity":x(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[sa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",r[5]);const f=[z(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),p(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&88?te(o,[u&0&&ie(z(et)),u&0&&{sourceLayer:et},u&88&&{paint:{"fill-color":ye(["get",a[3]],a[6](),a[4]),"fill-opacity":x(.5,.7)}},u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};u&65544&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&8?te(f,[u&0&&ie(z(`${et}-outline`)),u&0&&{sourceLayer:et},f[2],u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function aa(r){let e,n,t,l,o,s,f,i,a,u,c,d,$,y;function C(L){r[7](L)}let S={id:"percent_households_with_car",$$slots:{right:[qi],default:[Bi]},$$scope:{ctx:r}};r[0]!==void 0&&(S.checked=r[0]),e=new se({props:S}),q.push(()=>W(e,"checked",C)),e.$on("change",r[8]);let O=r[3]=="percent_households_with_car"&&cr(r);function M(L){r[9](L)}let D={id:"average_cars_per_household",$$slots:{right:[Ji],default:[Wi]},$$scope:{ctx:r}};r[1]!==void 0&&(D.checked=r[1]),o=new se({props:D}),q.push(()=>W(o,"checked",M)),o.$on("change",r[10]);let E=r[3]=="average_cars_per_household"&&$r(r);function P(L){r[11](L)}let I={id:"population_density",$$slots:{right:[ta],default:[Ki]},$$scope:{ctx:r}};r[2]!==void 0&&(I.checked=r[2]),a=new se({props:I}),q.push(()=>W(a,"checked",P)),a.$on("change",r[12]);let N=r[3]=="population_density"&&pr(r);return $=new we({props:{url:`pmtiles://${be()}/v1/${et}.pmtiles`,$$slots:{default:[ia]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),O&&O.c(),l=A(),h(o.$$.fragment),f=A(),E&&E.c(),i=A(),h(a.$$.fragment),c=A(),N&&N.c(),d=A(),h($.$$.fragment)},m(L,F){b(e,L,F),p(L,t,F),O&&O.m(L,F),p(L,l,F),b(o,L,F),p(L,f,F),E&&E.m(L,F),p(L,i,F),b(a,L,F),p(L,c,F),N&&N.m(L,F),p(L,d,F),b($,L,F),y=!0},p(L,[F]){const B={};F&65536&&(B.$$scope={dirty:F,ctx:L}),!n&&F&1&&(n=!0,B.checked=L[0],V(()=>n=!1)),e.$set(B),L[3]=="percent_households_with_car"?O?(O.p(L,F),F&8&&_(O,1)):(O=cr(L),O.c(),_(O,1),O.m(l.parentNode,l)):O&&(ce(),g(O,1,1,()=>{O=null}),$e());const H={};F&65536&&(H.$$scope={dirty:F,ctx:L}),!s&&F&2&&(s=!0,H.checked=L[1],V(()=>s=!1)),o.$set(H),L[3]=="average_cars_per_household"?E?(E.p(L,F),F&8&&_(E,1)):(E=$r(L),E.c(),_(E,1),E.m(i.parentNode,i)):E&&(ce(),g(E,1,1,()=>{E=null}),$e());const j={};F&65536&&(j.$$scope={dirty:F,ctx:L}),!u&&F&4&&(u=!0,j.checked=L[2],V(()=>u=!1)),a.$set(j),L[3]=="population_density"?N?(N.p(L,F),F&8&&_(N,1)):(N=pr(L),N.c(),_(N,1),N.m(d.parentNode,d)):N&&(ce(),g(N,1,1,()=>{N=null}),$e());const U={};F&65544&&(U.$$scope={dirty:F,ctx:L}),$.$set(U)},i(L){y||(_(e.$$.fragment,L),_(O),_(o.$$.fragment,L),_(E),_(a.$$.fragment,L),_(N),_($.$$.fragment,L),y=!0)},o(L){g(e.$$.fragment,L),g(O),g(o.$$.fragment,L),g(E),g(a.$$.fragment,L),g(N),g($.$$.fragment,L),y=!1},d(L){L&&(m(t),m(l),m(f),m(i),m(c),m(d)),v(e,L),O&&O.d(L),v(o,L),E&&E.d(L),v(a,L),N&&N.d(L),v($,L)}}}let et="census_output_areas";const fa=r=>r.toLocaleString();function ua(r,e,n){let t=oe.sequential_low_to_high,l=!1,o=!1,s=!1,f="";function i(S){let O=S.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${O}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${O}`,"_blank")}function a(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function u(S){l=S,n(0,l)}const c=()=>{n(1,o=!1),n(2,s=!1)};function d(S){o=S,n(1,o)}const $=()=>{n(0,l=!1),n(2,s=!1)};function y(S){s=S,n(2,s)}const C=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,f="percent_households_with_car"):o?n(3,f="average_cars_per_household"):s?n(3,f="population_density"):n(3,f=""))},[l,o,s,f,t,i,a,u,c,d,$,y,C]}class ca extends J{constructor(e){super(),K(this,e,ua,aa,X,{})}}function $a(r){let e,n,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Combined authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function pa(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ma(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[pa]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),l=k(", as of December 2022."),o=A(),h(s.$$.fragment)},m(i,a){p(i,e,a),w(e,n),b(t,e,null),w(e,l),p(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function _a(r){let e,n,t;return n=new ge({props:{$$slots:{default:[ma]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ga(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&m(e)}}}function da(r){let e,n;return e=new fe({props:{$$slots:{default:[ga,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ha(r){let e,n,t,l;const o=[z(mt),{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[da]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",va);const f=[z(`${mt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),p(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(z(mt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?te(f,[u&0&&ie(z(`${mt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function ba(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:mt,$$slots:{right:[_a],default:[$a]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),l=new It({props:{data:`${be()}/v1/${mt}.geojson`,$$slots:{default:[ha]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let mt="combined_authorities";function va(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function wa(r,e,n){let t=oe.combined_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ka extends J{constructor(e){super(),K(this,e,wa,ba,X,{})}}function ya(r){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Sa(r){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ca(r){let e;return{c(){e=k(`here
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ta(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Sa]},$$scope:{ctx:r}}}),o=new Q({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Ca]},$$scope:{ctx:r}}}),i=new Fe({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),h(t.$$.fragment),l=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=k("."),f=A(),h(i.$$.fragment)},m(u,c){p(u,e,c),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),p(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const $={};c&32&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!1},d(u){u&&(m(e),m(f)),v(t),v(o),v(i,u)}}}function Oa(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Ta]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function mr(r){let e,n;return e=new Ze({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Aa(r){let e,n=r[4].LSOA11CD+"",t,l,o,s=r[4].score+"",f,i,a,u,c,d=r[4].rank.toLocaleString()+"",$,y;return{c(){e=T("p"),t=k(n),l=k(` has an IMD score of
        `),o=T("b"),f=k(s),i=A(),a=T("p"),u=k("Rank: "),c=T("b"),$=k(d),y=k(`
        / 32,844 LSOAs`)},m(C,S){p(C,e,S),w(e,t),w(e,l),w(e,o),w(o,f),p(C,i,S),p(C,a,S),w(a,u),w(a,c),w(c,$),w(a,y)},p(C,S){S&16&&n!==(n=C[4].LSOA11CD+"")&&R(t,n),S&16&&s!==(s=C[4].score+"")&&R(f,s),S&16&&d!==(d=C[4].rank.toLocaleString()+"")&&R($,d)},d(C){C&&(m(e),m(i),m(a))}}}function La(r){let e,n;return e=new fe({props:{$$slots:{default:[Aa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ia(r){let e,n,t,l;const o=[z(Ge),{sourceLayer:Ge},{paint:{"fill-color":ye(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":x(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[La]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s});const f=[z(`${Ge}-outline`),{sourceLayer:Ge},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),p(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&7?te(o,[u&0&&ie(z(Ge)),u&0&&{sourceLayer:Ge},u&6&&{paint:{"fill-color":ye(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":x(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&1?te(f,[u&0&&ie(z(`${Ge}-outline`)),u&0&&{sourceLayer:Ge},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Pa(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:Ge,$$slots:{right:[Oa],default:[ya]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=r[0]&&mr(r);return o=new we({props:{url:`pmtiles://${be()}/v1/${Ge}.pmtiles`,$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),p(u,t,c),a&&a.m(u,c),p(u,l,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,d.checked=u[0],V(()=>n=!1)),e.$set(d),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=mr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(ce(),g(a,1,1,()=>{a=null}),$e());const $={};c&33&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(m(t),m(l)),v(e,u),a&&a.d(u),v(o,u)}}}let Ge="imd";function Na(r,e,n){let t=oe.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class Ma extends J{constructor(e){super(),K(this,e,Na,Pa,X,{})}}function Fa(r){let e,n,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ea(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Da(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Ea]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),l=k(", as of May 2023."),o=A(),h(s.$$.fragment)},m(i,a){p(i,e,a),w(e,n),b(t,e,null),w(e,l),p(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function ja(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Da]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Ra(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&m(e)}}}function Ba(r){let e,n;return e=new fe({props:{$$slots:{default:[Ra,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ha(r){let e,n,t,l;const o=[z(_t),{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ba]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",Ua);const f=[z(`${_t}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),p(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(z(_t)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?te(f,[u&0&&ie(z(`${_t}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function za(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:_t,$$slots:{right:[ja],default:[Fa]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),l=new It({props:{data:`${be()}/v1/${_t}.geojson`,$$slots:{default:[Ha]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let _t="local_authority_districts";function Ua(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Ga(r,e,n){let t=oe.local_authority_districts,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class qa extends J{constructor(e){super(),K(this,e,Ga,za,X,{})}}function Wa(r){let e,n,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Va(r){let e;return{c(){e=k(`local authority
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Xa(r){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ya(r){let e;return{c(){e=k(`development corporation
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qa(r){let e;return{c(){e=k("this map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ja(r){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ka(r){let e,n,t,l,o,s,f,i,a,u,c,d,$,y,C,S,O,M,D,E,P,I;return t=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Va]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ya]},$$scope:{ctx:r}}}),$=new Q({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Qa]},$$scope:{ctx:r}}}),M=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ja]},$$scope:{ctx:r}}}),P=new Fe({}),{c(){e=T("p"),n=k("LPAs may be a "),h(t.$$.fragment),l=k(", "),h(o.$$.fragment),s=k("y, or "),h(f.$$.fragment),i=k("."),a=A(),u=T("p"),c=T("strong"),d=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h($.$$.fragment),y=k(" to get more details."),C=A(),S=T("p"),O=k("Data from ONS Geography via "),h(M.$$.fragment),D=k(", as of November 2022."),E=A(),h(P.$$.fragment)},m(N,L){p(N,e,L),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),b(f,e,null),w(e,i),p(N,a,L),p(N,u,L),w(u,c),w(c,d),b($,c,null),w(c,y),p(N,C,L),p(N,S,L),w(S,O),b(M,S,null),w(S,D),p(N,E,L),b(P,N,L),I=!0},p(N,L){const F={};L&16&&(F.$$scope={dirty:L,ctx:N}),t.$set(F);const B={};L&16&&(B.$$scope={dirty:L,ctx:N}),o.$set(B);const H={};L&16&&(H.$$scope={dirty:L,ctx:N}),f.$set(H);const j={};L&16&&(j.$$scope={dirty:L,ctx:N}),$.$set(j);const U={};L&16&&(U.$$scope={dirty:L,ctx:N}),M.$set(U)},i(N){I||(_(t.$$.fragment,N),_(o.$$.fragment,N),_(f.$$.fragment,N),_($.$$.fragment,N),_(M.$$.fragment,N),_(P.$$.fragment,N),I=!0)},o(N){g(t.$$.fragment,N),g(o.$$.fragment,N),g(f.$$.fragment,N),g($.$$.fragment,N),g(M.$$.fragment,N),g(P.$$.fragment,N),I=!1},d(N){N&&(m(e),m(a),m(u),m(C),m(S),m(E)),v(t),v(o),v(f),v($),v(M),v(P,N)}}}function Za(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Ka]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function xa(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&m(e)}}}function ef(r){let e,n;return e=new fe({props:{$$slots:{default:[xa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tf(r){let e,n,t,l;const o=[z(qe),{sourceLayer:qe},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[ef]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s});const f=[z(`${qe}-outline`),{sourceLayer:qe},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),p(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(z(qe)),u&0&&{sourceLayer:qe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?te(f,[u&0&&ie(z(`${qe}-outline`)),u&0&&{sourceLayer:qe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function nf(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:qe,$$slots:{right:[Za],default:[Wa]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${qe}.pmtiles`,$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let qe="local_planning_authorities";function rf(r,e,n){let t=oe.local_planning_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class lf extends J{constructor(e){super(),K(this,e,rf,nf,X,{})}}function of(r){let e,n,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function sf(r){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function af(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[sf]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),l=k(", as of May 2023."),o=A(),h(s.$$.fragment)},m(i,a){p(i,e,a),w(e,n),b(t,e,null),w(e,l),p(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function ff(r){let e,n,t;return n=new ge({props:{$$slots:{default:[af]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function uf(r){let e,n=r[3].Name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&R(t,n)},d(l){l&&m(e)}}}function cf(r){let e,n;return e=new fe({props:{$$slots:{default:[uf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $f(r){let e,n,t,l;const o=[z(We),{sourceLayer:We},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[cf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",mf);const f=[z(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),p(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(z(We)),u&0&&{sourceLayer:We},u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?te(f,[u&0&&ie(z(`${We}-outline`)),u&0&&{sourceLayer:We},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function pf(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:We,$$slots:{right:[ff],default:[of]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${We}.pmtiles`,$$slots:{default:[$f]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let We="parliamentary_constituencies";function mf(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function _f(r,e,n){let t=oe.parliamentary_constituencies,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class gf extends J{constructor(e){super(),K(this,e,_f,pf,X,{})}}function df(r){let e;return{c(){e=k("Pollution")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function hf(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function bf(r){let e;return{c(){e=k(`Extrium
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function vf(r){let e;return{c(){e=k(`FAQ
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function wf(r){let e,n,t,l,o,s,f,i,a,u,c,d,$,y,C,S;return t=new Q({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[hf]},$$scope:{ctx:r}}}),u=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[bf]},$$scope:{ctx:r}}}),d=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[vf]},$$scope:{ctx:r}}}),C=new Fe({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),h(t.$$.fragment),l=k(`. The measurements are annual means, in units of
        gm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),f=A(),i=T("p"),a=k("The noise layer is from "),h(u.$$.fragment),c=k(", using 2017 data. See their "),h(d.$$.fragment),$=k("."),y=A(),h(C.$$.fragment)},m(O,M){p(O,e,M),w(e,n),b(t,e,null),w(e,l),w(e,o),w(e,s),p(O,f,M),p(O,i,M),w(i,a),b(u,i,null),w(i,c),b(d,i,null),w(i,$),p(O,y,M),b(C,O,M),S=!0},p(O,M){const D={};M&2048&&(D.$$scope={dirty:M,ctx:O}),t.$set(D);const E={};M&2048&&(E.$$scope={dirty:M,ctx:O}),u.$set(E);const P={};M&2048&&(P.$$scope={dirty:M,ctx:O}),d.$set(P)},i(O){S||(_(t.$$.fragment,O),_(u.$$.fragment,O),_(d.$$.fragment,O),_(C.$$.fragment,O),S=!0)},o(O){g(t.$$.fragment,O),g(u.$$.fragment,O),g(d.$$.fragment,O),g(C.$$.fragment,O),S=!1},d(O){O&&(m(e),m(f),m(i),m(y)),v(t),v(u),v(d),v(C,O)}}}function kf(r){let e,n,t;return n=new ge({props:{$$slots:{default:[wf]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function _r(r){let e,n,t,l,o=r[3](r[0])+"",s,f,i,a,u,c,d,$,y,C,S,O,M;function D(L){r[7](L)}let E={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(E.value=r[0]),e=new Ot({props:E}),q.push(()=>W(e,"value",D));const P=[Sf,yf],I=[];function N(L,F){return L[0]=="Noise"?0:1}return $=N(r),y=I[$]=P[$](r),{c(){h(e.$$.fragment),t=A(),l=T("p"),s=k(o),f=A(),i=T("div"),a=T("label"),u=k(`Opacity
      `),c=T("input"),d=A(),y.c(),C=Le(),G(c,"type","range"),G(c,"min","0"),G(c,"max","100")},m(L,F){b(e,L,F),p(L,t,F),p(L,l,F),w(l,s),p(L,f,F),p(L,i,F),w(i,a),w(a,u),w(a,c),Qe(c,r[2]),p(L,d,F),I[$].m(L,F),p(L,C,F),S=!0,O||(M=[st(c,"change",r[8]),st(c,"input",r[8])],O=!0)},p(L,F){const B={};!n&&F&1&&(n=!0,B.value=L[0],V(()=>n=!1)),e.$set(B),(!S||F&1)&&o!==(o=L[3](L[0])+"")&&R(s,o),F&4&&Qe(c,L[2]);let H=$;$=N(L),$===H?I[$].p(L,F):(ce(),g(I[H],1,1,()=>{I[H]=null}),$e(),y=I[$],y?y.p(L,F):(y=I[$]=P[$](L),y.c()),_(y,1),y.m(C.parentNode,C))},i(L){S||(_(e.$$.fragment,L),_(y),S=!0)},o(L){g(e.$$.fragment,L),g(y),S=!1},d(L){L&&(m(t),m(l),m(f),m(i),m(d),m(C)),v(e,L),I[$].d(L),O=!1,ul(M)}}}function yf(r){let e,n,t;return{c(){e=T("img"),In(e.src,n=r[5](r[0]))||G(e,"src",n),G(e,"width",150),G(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){p(l,e,o)},p(l,o){o&1&&!In(e.src,n=l[5](l[0]))&&G(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&G(e,"alt",t)},i:re,o:re,d(l){l&&m(e)}}}function Sf(r){let e,n;return e=new Ze({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cf(r){let e,n;const t=[z("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Yl({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Tf(r){let e,n,t,l,o,s;function f(u){r[6](u)}let i={id:"pollution",$$slots:{right:[kf],default:[df]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=r[1]&&_r(r);return o=new ao({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Cf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),p(u,t,c),a&&a.m(u,c),p(u,l,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,d.checked=u[1],V(()=>n=!1)),e.$set(d),u[1]?a?(a.p(u,c),c&2&&_(a,1)):(a=_r(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(ce(),g(a,1,1,()=>{a=null}),$e());const $={};c&1&&($.tiles=[u[4](u[0])]),c&2054&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(m(t),m(l)),v(e,u),a&&a.d(u),v(o,u)}}}function Of(r,e,n){let t,l=!1,o=50,s="PM25_viridis";function f(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${f()}?bbox={bbox-epsg-3857}&${C}`}function u(y){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${f()}?${C}`}function c(y){l=y,n(1,l)}function d(y){s=y,n(0,s)}function $(){o=Dt(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,l,o,i,a,u,c,d,$]}class Af extends J{constructor(e){super(),K(this,e,Of,Tf,X,{})}}function Lf(r){let e,n,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Wards`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function If(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pf(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[If]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),l=k(", as of May 2023."),o=A(),h(s.$$.fragment)},m(i,a){p(i,e,a),w(e,n),b(t,e,null),w(e,l),p(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function Nf(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Pf]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Mf(r){let e,n=r[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&m(e)}}}function Ff(r){let e,n;return e=new fe({props:{$$slots:{default:[Mf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ef(r){let e,n,t,l;const o=[z(Ve),{sourceLayer:Ve},{paint:{"fill-color":r[1],"fill-opacity":x(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ff]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ze({props:s}),e.$on("click",jf);const f=[z(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new Se({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),p(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?te(o,[u&0&&ie(z(Ve)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"fill-color":a[1],"fill-opacity":x(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const d=u&3?te(f,[u&0&&ie(z(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Df(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Ve,$$slots:{right:[Nf],default:[Lf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${Ve}.pmtiles`,$$slots:{default:[Ef]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let Ve="wards";function jf(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Rf(r,e,n){let t=oe.wards,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Bf extends J{constructor(e){super(),K(this,e,Rf,Df,X,{})}}function Hf(r){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function zf(r){let e,n,t,l;return t=new Q({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("License: "),h(t.$$.fragment)},m(o,s){p(o,e,s),w(e,n),b(t,e,null),l=!0},p(o,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:o}),t.$set(f)},i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&m(e),v(t)}}}class at extends J{constructor(e){super(),K(this,e,null,zf,X,{})}}function Uf(r){let e,n,t;return e=new Ae({props:{color:oe.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=k(`
  Bus routes`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Gf(r){let e;return{c(){e=k(`GTFS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function qf(r){let e,n,t,l,o,s,f,i,a;return o=new Q({props:{href:"https://gtfs.org",$$slots:{default:[Gf]},$$scope:{ctx:r}}}),i=new at({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=A(),t=T("p"),l=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),f=A(),h(i.$$.fragment)},m(u,c){p(u,e,c),p(u,n,c),p(u,t,c),w(t,l),b(o,t,null),w(t,s),p(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&8&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){a||(_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){g(o.$$.fragment,u),g(i.$$.fragment,u),a=!1},d(u){u&&(m(e),m(n),m(t),m(f)),v(o),v(i,u)}}}function Wf(r){let e,n,t;return n=new ge({props:{$$slots:{default:[qf]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Vf(r){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Xf(r){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Yf(r){let e;function n(o,s){return o[2].has_bus_lane?Xf:Vf}let t=n(r),l=t(r);return{c(){l.c(),e=Le()},m(o,s){l.m(o,s),p(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function Qf(r){let e,n;return e=new fe({props:{$$slots:{default:[Yf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jf(r){let e,n;const t=[z(gt),{sourceLayer:gt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],oe.bus_route_with_lane,oe.bus_route_without_lane],"line-width":5,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Qf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&1?te(t,[s&0&&ie(z(gt)),s&0&&{sourceLayer:gt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Kf(r){let e,n,t,l,o;function s(i){r[1](i)}let f={id:gt,$$slots:{right:[Wf],default:[Uf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${gt}.pmtiles`,$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let gt="bus_routes";function Zf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class xf extends J{constructor(e){super(),K(this,e,Zf,Kf,X,{})}}function gr(r){const e=fu(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function dr(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function eu(r){let e;return{c(){e=k("Cycle paths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function tu(r){let e,n,t,l,o,s,f,i;return f=new at({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=A(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=A(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=A(),h(f.$$.fragment)},m(a,u){p(a,e,u),p(a,n,u),p(a,t,u),p(a,l,u),p(a,o,u),p(a,s,u),b(f,a,u),i=!0},p:re,i(a){i||(_(f.$$.fragment,a),i=!0)},o(a){g(f.$$.fragment,a),i=!1},d(a){a&&(m(e),m(n),m(t),m(l),m(o),m(s)),v(f,a)}}}function nu(r){let e,n,t;return n=new ge({props:{$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function hr(r){let e,n,t;return n=new Ke({props:{$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){e=T("div"),h(n.$$.fragment),ke(e,"border","1px solid black"),ke(e,"padding","8px")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ru(r){let e,n,t=r[9]+"",l,o,s;return e=new Ae({props:{color:r[10]}}),{c(){h(e.$$.fragment),n=A(),l=k(t),o=A()},m(f,i){b(e,f,i),p(f,n,i),p(f,l,i),p(f,o,i),s=!0},p:re,i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),s=!1},d(f){f&&(m(n),m(l),m(o)),v(e,f)}}}function br(r){let e,n,t;function l(s){r[4](s,r[6])}let o={id:r[6],$$slots:{default:[ru]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new se({props:o}),q.push(()=>W(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){r=s;const i={};f&8192&&(i.$$scope={dirty:f,ctx:r}),!n&&f&6&&(n=!0,i.checked=r[1][r[6]],V(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function lu(r){let e,n,t=Oe(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=br(dr(r,t,s));const o=s=>g(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Le()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);p(s,e,f),n=!0},p(s,f){if(f&6){t=Oe(s[2]);let i;for(i=0;i<t.length;i+=1){const a=dr(s,t,i);l[i]?(l[i].p(a,f),_(l[i],1)):(l[i]=br(a),l[i].c(),_(l[i],1),l[i].m(e.parentNode,e))}for(ce(),i=t.length;i<l.length;i+=1)o(i);$e()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)_(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)g(l[f]);n=!1},d(s){s&&m(e),it(l,s)}}}function ou(r){gr(r);let e,n=r[6]+"",t,l,o,s,f,i=r[7]+"",a,u,c,d,$=r[8]+"",y;return{c(){e=T("h2"),t=k(n),l=A(),o=T("p"),s=k("Direction: "),f=T("b"),a=A(),u=T("p"),c=k("Width: "),d=T("b"),y=k($)},m(C,S){p(C,e,S),w(e,t),p(C,l,S),p(C,o,S),w(o,s),w(o,f),f.innerHTML=i,p(C,a,S),p(C,u,S),w(u,c),w(u,d),w(d,y)},p(C,S){gr(C),S&32&&n!==(n=C[6]+"")&&R(t,n),S&32&&i!==(i=C[7]+"")&&(f.innerHTML=i),S&32&&$!==($=C[8]+"")&&R(y,$)},d(C){C&&(m(e),m(l),m(o),m(a),m(u))}}}function su(r){let e,n;return e=new fe({props:{$$slots:{default:[ou,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function iu(r){let e,n;const t=[z(dt),{sourceLayer:dt},{paint:{"line-color":tn(["get","kind"],{track:oe.cycle_paths.track,lane:oe.cycle_paths.lane,shared_use_segregated:oe.cycle_paths.shared_use_segregated,shared_use_unsegregated:oe.cycle_paths.shared_use_unsegregated},"red"),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:vr(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[su]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),e.$on("click",uu),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(z(dt)),s&0&&{sourceLayer:dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:vr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function au(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:dt,$$slots:{right:[nu],default:[eu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=r[0]&&hr(r);return o=new we({props:{url:`pmtiles://${be()}/v1/${dt}.pmtiles`,$$slots:{default:[iu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),p(u,t,c),a&&a.m(u,c),p(u,l,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&8192&&(d.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,d.checked=u[0],V(()=>n=!1)),e.$set(d),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=hr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(ce(),g(a,1,1,()=>{a=null}),$e());const $={};c&8195&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(m(t),m(l)),v(e,u),a&&a.d(u),v(o,u)}}}let dt="cycle_paths";function fu(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function uu(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function vr(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function cu(r,e,n){let t=[["track","Separated tracks",oe.cycle_paths.track],["lane","Unprotected lanes",oe.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",oe.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",oe.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){l=i,n(0,l)}function f(i,a){r.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[l,o,t,s,f]}class $u extends J{constructor(e){super(),K(this,e,cu,au,X,{})}}function pu(r){let e,n,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Major Road Network`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function mu(r){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function _u(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[mu]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from the "),h(t.$$.fragment),l=k(", as of September 2021."),o=A(),h(s.$$.fragment)},m(i,a){p(i,e,a),w(e,n),b(t,e,null),w(e,l),p(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function gu(r){let e,n,t;return n=new ge({props:{$$slots:{default:[_u]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function du(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&R(t,n)},d(l){l&&m(e)}}}function hu(r){let e,n;return e=new fe({props:{$$slots:{default:[du,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bu(r){let e,n;const t=[z(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[hu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(z(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vu(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:ht,$$slots:{right:[gu],default:[pu]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${ht}.pmtiles`,$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let ht="mrn";function wu(r,e,n){let t=oe.mrn,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ku extends J{constructor(e){super(),K(this,e,wu,vu,X,{})}}function yu(r){let e,n,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  National Cycle Network`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Su(r){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Cu(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Su]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),h(t.$$.fragment),l=k(", downloaded on 22/01/2024."),o=A(),h(s.$$.fragment)},m(i,a){p(i,e,a),w(e,n),b(t,e,null),w(e,l),p(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function Tu(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Cu]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function wr(r){let e,n,t,l=r[3].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(l)},m(s,f){p(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].Desc_+"")&&R(o,l)},d(s){s&&m(e)}}}function kr(r){let e,n,t,l=r[3].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(l)},m(s,f){p(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].Greenway+"")&&R(o,l)},d(s){s&&m(e)}}}function yr(r){let e,n,t,l=r[3].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(l)},m(s,f){p(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteType+"")&&R(o,l)},d(s){s&&m(e)}}}function Sr(r){let e,n,t,l=r[3].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(l)},m(s,f){p(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteNo+"")&&R(o,l)},d(s){s&&m(e)}}}function Cr(r){let e,n,t,l=r[3].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(l)},m(s,f){p(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteCat+"")&&R(o,l)},d(s){s&&m(e)}}}function Tr(r){let e,n,t,l=r[3].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(l)},m(s,f){p(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].OpenStatus+"")&&R(o,l)},d(s){s&&m(e)}}}function Or(r){let e,n,t,l=r[3].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(l)},m(s,f){p(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].Surface+"")&&R(o,l)},d(s){s&&m(e)}}}function Ar(r){let e,n,t,l=r[3].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(l)},m(s,f){p(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].Quality+"")&&R(o,l)},d(s){s&&m(e)}}}function Lr(r){let e,n,t,l=r[3].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(l)},m(s,f){p(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].RoadClass+"")&&R(o,l)},d(s){s&&m(e)}}}function Ou(r){let e,n,t,l,o,s,f,i,a,u=r[3].Desc_&&wr(r),c=r[3].Greenway&&kr(r),d=r[3].RouteType&&yr(r),$=r[3].RouteNo&&Sr(r),y=r[3].RouteCat&&Cr(r),C=r[3].OpenStatus&&Tr(r),S=r[3].Surface&&Or(r),O=r[3].Quality&&Ar(r),M=r[3].RoadClass&&Lr(r);return{c(){e=T("ul"),u&&u.c(),n=A(),c&&c.c(),t=A(),d&&d.c(),l=A(),$&&$.c(),o=A(),y&&y.c(),s=A(),C&&C.c(),f=A(),S&&S.c(),i=A(),O&&O.c(),a=A(),M&&M.c()},m(D,E){p(D,e,E),u&&u.m(e,null),w(e,n),c&&c.m(e,null),w(e,t),d&&d.m(e,null),w(e,l),$&&$.m(e,null),w(e,o),y&&y.m(e,null),w(e,s),C&&C.m(e,null),w(e,f),S&&S.m(e,null),w(e,i),O&&O.m(e,null),w(e,a),M&&M.m(e,null)},p(D,E){D[3].Desc_?u?u.p(D,E):(u=wr(D),u.c(),u.m(e,n)):u&&(u.d(1),u=null),D[3].Greenway?c?c.p(D,E):(c=kr(D),c.c(),c.m(e,t)):c&&(c.d(1),c=null),D[3].RouteType?d?d.p(D,E):(d=yr(D),d.c(),d.m(e,l)):d&&(d.d(1),d=null),D[3].RouteNo?$?$.p(D,E):($=Sr(D),$.c(),$.m(e,o)):$&&($.d(1),$=null),D[3].RouteCat?y?y.p(D,E):(y=Cr(D),y.c(),y.m(e,s)):y&&(y.d(1),y=null),D[3].OpenStatus?C?C.p(D,E):(C=Tr(D),C.c(),C.m(e,f)):C&&(C.d(1),C=null),D[3].Surface?S?S.p(D,E):(S=Or(D),S.c(),S.m(e,i)):S&&(S.d(1),S=null),D[3].Quality?O?O.p(D,E):(O=Ar(D),O.c(),O.m(e,a)):O&&(O.d(1),O=null),D[3].RoadClass?M?M.p(D,E):(M=Lr(D),M.c(),M.m(e,null)):M&&(M.d(1),M=null)},d(D){D&&m(e),u&&u.d(),c&&c.d(),d&&d.d(),$&&$.d(),y&&y.d(),C&&C.d(),S&&S.d(),O&&O.d(),M&&M.d()}}}function Au(r){let e,n;return e=new fe({props:{$$slots:{default:[Ou,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lu(r){let e,n;const t=[z(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Au]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(z(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Iu(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:bt,$$slots:{right:[Tu],default:[yu]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${bt}.pmtiles`,$$slots:{default:[Lu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let bt="national_cycle_network";function Pu(r,e,n){let t=oe.national_cycle_network,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Nu extends J{constructor(e){super(),K(this,e,Pu,Iu,X,{})}}function Mu(r){let e;return{c(){e=k("OS Pavement widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Fu(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Eu(r){let e,n,t,l,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Fu]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=A(),t=T("p"),t.textContent="Data valid as of 1 January, 2024",l=A(),o=T("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),i=k(".")},m(u,c){p(u,e,c),p(u,n,c),p(u,t,c),p(u,l,c),p(u,o,c),w(o,s),b(f,o,null),w(o,i),a=!0},p(u,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),f.$set(d)},i(u){a||(_(f.$$.fragment,u),a=!0)},o(u){g(f.$$.fragment,u),a=!1},d(u){u&&(m(e),m(n),m(t),m(l),m(o)),v(f)}}}function Du(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Eu]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Ir(r){let e,n;return e=new Ze({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ju(r){let e,n,t,l=r[4].side+"",o,s,f,i,a,u=r[4].average+"",c,d,$,y,C,S,O=r[4].minimum+"",M,D;return{c(){e=T("p"),n=k("Side of the road: "),t=T("b"),o=k(l),s=A(),f=T("p"),i=k("Average width: "),a=T("b"),c=k(u),d=k(`
        meters`),$=A(),y=T("p"),C=k("Minimum width: "),S=T("b"),M=k(O),D=k(`
        meters`)},m(E,P){p(E,e,P),w(e,n),w(e,t),w(t,o),p(E,s,P),p(E,f,P),w(f,i),w(f,a),w(a,c),w(f,d),p(E,$,P),p(E,y,P),w(y,C),w(y,S),w(S,M),w(y,D)},p(E,P){P&16&&l!==(l=E[4].side+"")&&R(o,l),P&16&&u!==(u=E[4].average+"")&&R(c,u),P&16&&O!==(O=E[4].minimum+"")&&R(M,O)},d(E){E&&(m(e),m(s),m(f),m($),m(y))}}}function Ru(r){let e,n;return e=new fe({props:{$$slots:{default:[ju,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bu(r){let e,n;const t=[z(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get","average"],r[2],r[1]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Ru]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&ie(z(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&6&&{paint:{"line-color":ye(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Hu(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:vt,$$slots:{right:[Du],default:[Mu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=r[0]&&Ir(r);return o=new we({props:{url:`pmtiles://${nn()}/v1/${vt}.pmtiles`,$$slots:{default:[Bu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),p(u,t,c),a&&a.m(u,c),p(u,l,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,d.checked=u[0],V(()=>n=!1)),e.$set(d),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Ir(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(ce(),g(a,1,1,()=>{a=null}),$e());const $={};c&33&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(m(t),m(l)),v(e,u),a&&a.d(u),v(o,u)}}}let vt="pavement_widths";function zu(r,e,n){let t=oe.sequential_low_to_high,l=[0,2,4,6,8,13],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class Uu extends J{constructor(e){super(),K(this,e,zu,Hu,X,{})}}function Gu(r){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function qu(r){let e;return{c(){e=k("the PCT website")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Wu(r){let e;return{c(){e=k("2017 journal article")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Vu(r){let e,n,t,l,o,s,f,i,a,u,c;return f=new Q({props:{href:"https://www.pct.bike",$$slots:{default:[qu]},$$scope:{ctx:r}}}),a=new Q({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Wu]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=A(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=A(),o=T("p"),s=k("See "),h(f.$$.fragment),i=k(" and "),h(a.$$.fragment),u=k(" for details on methodology and data sources.")},m(d,$){p(d,e,$),p(d,n,$),p(d,t,$),p(d,l,$),p(d,o,$),w(o,s),b(f,o,null),w(o,i),b(a,o,null),w(o,u),c=!0},p(d,$){const y={};$&1024&&(y.$$scope={dirty:$,ctx:d}),f.$set(y);const C={};$&1024&&(C.$$scope={dirty:$,ctx:d}),a.$set(C)},i(d){c||(_(f.$$.fragment,d),_(a.$$.fragment,d),c=!0)},o(d){g(f.$$.fragment,d),g(a.$$.fragment,d),c=!1},d(d){d&&(m(e),m(n),m(t),m(l),m(o)),v(f),v(a)}}}function Xu(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Vu]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Pr(r){let e,n,t,l,o,s,f,i;e=new Ze({props:{colorScale:r[3],limits:r[4]}});function a($){r[7]($)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(u.value=r[0]),t=new cl({props:u}),q.push(()=>W(t,"value",a));function c($){r[8]($)}let d={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(d.value=r[1]),s=new Ot({props:d}),q.push(()=>W(s,"value",c)),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),o=A(),h(s.$$.fragment)},m($,y){b(e,$,y),p($,n,y),b(t,$,y),p($,o,y),b(s,$,y),i=!0},p($,y){const C={};!l&&y&1&&(l=!0,C.value=$[0],V(()=>l=!1)),t.$set(C);const S={};!f&&y&2&&(f=!0,S.value=$[1],V(()=>f=!1)),s.$set(S)},i($){i||(_(e.$$.fragment,$),_(t.$$.fragment,$),_(s.$$.fragment,$),i=!0)},o($){g(e.$$.fragment,$),g(t.$$.fragment,$),g(s.$$.fragment,$),i=!1},d($){$&&(m(n),m(o)),v(e,$),v(t,$),v(s,$)}}}function Yu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Mt(!1),t=Le(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Qu(r){let e,n;return e=new fe({props:{$$slots:{default:[Yu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ju(r){let e,n;const t=[z(Xe),{sourceLayer:Xe},{paint:{"line-color":ye(["get",r[1]],r[4],r[3]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:r[2]&&r[0]==Xe?"visible":"none"}}];let l={$$slots:{default:[Qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&31?te(t,[s&0&&ie(z(Xe)),s&0&&{sourceLayer:Xe},s&26&&{paint:{"line-color":ye(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==Xe?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ku(r){let e,n=r[5](r[9])+"",t;return{c(){e=new Mt(!1),t=Le(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Zu(r){let e,n;return e=new fe({props:{$$slots:{default:[Ku,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xu(r){let e,n;const t=[z(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get",r[1]],r[4],r[3]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:r[2]&&r[0]==ft?"visible":"none"}}];let l={$$slots:{default:[Zu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&31?te(t,[s&0&&ie(z(ft)),s&0&&{sourceLayer:ft},t[2],t[3],s&26&&{paint:{"line-color":ye(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":x(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ft?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ec(r){let e,n,t,l,o,s,f,i;function a(d){r[6](d)}let u={id:Xe,$$slots:{right:[Xu],default:[Gu]},$$scope:{ctx:r}};r[2]!==void 0&&(u.checked=r[2]),e=new se({props:u}),q.push(()=>W(e,"checked",a));let c=r[2]&&Pr(r);return o=new we({props:{url:`pmtiles://${be()}/v1/${Xe}.pmtiles`,$$slots:{default:[Ju]},$$scope:{ctx:r}}}),f=new we({props:{url:`pmtiles://${be()}/v1/${ft}.pmtiles`,$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),c&&c.c(),l=A(),h(o.$$.fragment),s=A(),h(f.$$.fragment)},m(d,$){b(e,d,$),p(d,t,$),c&&c.m(d,$),p(d,l,$),b(o,d,$),p(d,s,$),b(f,d,$),i=!0},p(d,[$]){const y={};$&1024&&(y.$$scope={dirty:$,ctx:d}),!n&&$&4&&(n=!0,y.checked=d[2],V(()=>n=!1)),e.$set(y),d[2]?c?(c.p(d,$),$&4&&_(c,1)):(c=Pr(d),c.c(),_(c,1),c.m(l.parentNode,l)):c&&(ce(),g(c,1,1,()=>{c=null}),$e());const C={};$&1031&&(C.$$scope={dirty:$,ctx:d}),o.$set(C);const S={};$&1031&&(S.$$scope={dirty:$,ctx:d}),f.$set(S)},i(d){i||(_(e.$$.fragment,d),_(c),_(o.$$.fragment,d),_(f.$$.fragment,d),i=!0)},o(d){g(e.$$.fragment,d),g(c),g(o.$$.fragment,d),g(f.$$.fragment,d),i=!1},d(d){d&&(m(t),m(l),m(s)),v(e,d),c&&c.d(d),v(o,d),v(f,d)}}}let Xe="pct_commute",ft="pct_school";function tc(r,e,n){let t=oe.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Xe,s="baseline",f=!1;function i(d){let $=d.baseline,y=d.gov_target,C=d.go_dutch,S=`<h2>Trip purpose: ${o==Xe?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${$.toLocaleString()}</b></p>`,$==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let O=(y/$).toFixed(1),M=(C/$).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${O}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${M}x</b> of baseline)</p>`}return S}function a(d){f=d,n(2,f)}function u(d){o=d,n(0,o)}function c(d){s=d,n(1,s)}return[o,s,f,t,l,i,a,u,c]}class nc extends J{constructor(e){super(),K(this,e,tc,ec,X,{})}}function rc(r){let e;return{c(){e=k("OS Speeds")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function lc(r){let e;return{c(){e=k("Basemap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function oc(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function sc(r){let e,n,t,l,o,s,f,i,a,u,c,d;return t=new Q({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[lc]},$$scope:{ctx:r}}}),u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[oc]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=A(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",f=A(),i=T("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),c=k(".")},m($,y){p($,e,y),w(e,n),b(t,e,null),w(e,l),p($,o,y),p($,s,y),p($,f,y),p($,i,y),w(i,a),b(u,i,null),w(i,c),d=!0},p($,y){const C={};y&256&&(C.$$scope={dirty:y,ctx:$}),t.$set(C);const S={};y&256&&(S.$$scope={dirty:y,ctx:$}),u.$set(S)},i($){d||(_(t.$$.fragment,$),_(u.$$.fragment,$),d=!0)},o($){g(t.$$.fragment,$),g(u.$$.fragment,$),d=!1},d($){$&&(m(e),m(o),m(s),m(f),m(i)),v(t),v(u)}}}function ic(r){let e,n,t;return n=new ge({props:{$$slots:{default:[sc]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Nr(r){let e,n,t,l,o;e=new Ze({props:{colorScale:r[2],limits:r[3]}});function s(i){r[6](i)}let f={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(f.value=r[0]),t=new cl({props:f}),q.push(()=>W(t,"value",s)),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(i,a){b(e,i,a),p(i,n,a),b(t,i,a),o=!0},p(i,a){const u={};!l&&a&1&&(l=!0,u.value=i[0],V(()=>l=!1)),t.$set(u)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&m(n),v(e,i),v(t,i)}}}function ac(r){let e,n,t=r[7].indicative_mph+"",l,o,s,f,i,a=r[7].highest_mph+"",u,c,d=r[4][r[7].highest_description]+"",$,y;return{c(){e=T("p"),n=k("Posted speed limit: "),l=k(t),o=k(" mph"),s=A(),f=T("p"),i=k("Highest average speed: "),u=k(a),c=k(" mph (during "),$=k(d),y=k(")")},m(C,S){p(C,e,S),w(e,n),w(e,l),w(e,o),p(C,s,S),p(C,f,S),w(f,i),w(f,u),w(f,c),w(f,$),w(f,y)},p(C,S){S&128&&t!==(t=C[7].indicative_mph+"")&&R(l,t),S&128&&a!==(a=C[7].highest_mph+"")&&R(u,a),S&128&&d!==(d=C[4][C[7].highest_description]+"")&&R($,d)},d(C){C&&(m(e),m(s),m(f))}}}function fc(r){let e,n;return e=new fe({props:{$$slots:{default:[ac,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uc(r){let e,n;const t=[z(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get",r[0]],r[3],r[2]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[fc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&15?te(t,[s&0&&ie(z(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&13&&{paint:{"line-color":ye(["get",o[0]],o[3],o[2]),"line-width":He,"line-opacity":x(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function cc(r){let e,n,t,l,o,s;function f(u){r[5](u)}let i={id:wt,$$slots:{right:[ic],default:[rc]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=r[1]&&Nr(r);return o=new we({props:{url:`pmtiles://${nn()}/v1/${wt}.pmtiles`,$$slots:{default:[uc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),p(u,t,c),a&&a.m(u,c),p(u,l,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&256&&(d.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,d.checked=u[1],V(()=>n=!1)),e.$set(d),u[1]?a?(a.p(u,c),c&2&&_(a,1)):(a=Nr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(ce(),g(a,1,1,()=>{a=null}),$e());const $={};c&259&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(m(t),m(l)),v(e,u),a&&a.d(u),v(o,u)}}}let wt="road_speeds";function $c(r,e,n){let t=oe.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",s=!1,f={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(u){s=u,n(1,s)}function a(u){o=u,n(0,o)}return[o,s,t,l,f,i,a]}class pc extends J{constructor(e){super(),K(this,e,$c,cc,X,{})}}function mc(r){let e;return{c(){e=k("OS Road widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function _c(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function gc(r){let e,n,t,l,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=A(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",l=A(),o=T("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),i=k(".")},m(u,c){p(u,e,c),p(u,n,c),p(u,t,c),p(u,l,c),p(u,o,c),w(o,s),b(f,o,null),w(o,i),a=!0},p(u,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),f.$set(d)},i(u){a||(_(f.$$.fragment,u),a=!0)},o(u){g(f.$$.fragment,u),a=!1},d(u){u&&(m(e),m(n),m(t),m(l),m(o)),v(f)}}}function dc(r){let e,n,t;return n=new ge({props:{$$slots:{default:[gc]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Mr(r){let e,n;return e=new Ze({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hc(r){let e,n,t,l=r[4].average+"",o,s,f,i,a,u,c=r[4].minimum+"",d,$;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(l),s=k(`
        meters`),f=A(),i=T("p"),a=k("Minimum width: "),u=T("b"),d=k(c),$=k(`
        meters`)},m(y,C){p(y,e,C),w(e,n),w(e,t),w(t,o),w(e,s),p(y,f,C),p(y,i,C),w(i,a),w(i,u),w(u,d),w(i,$)},p(y,C){C&16&&l!==(l=y[4].average+"")&&R(o,l),C&16&&c!==(c=y[4].minimum+"")&&R(d,c)},d(y){y&&(m(e),m(f),m(i))}}}function bc(r){let e,n;return e=new fe({props:{$$slots:{default:[hc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vc(r){let e,n;const t=[z(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get","average"],r[2],r[1]),"line-width":He,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[bc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new Se({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&ie(z(kt)),s&0&&{sourceLayer:kt},t[2],t[3],s&6&&{paint:{"line-color":ye(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":x(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function wc(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:kt,$$slots:{right:[dc],default:[mc]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=r[0]&&Mr(r);return o=new we({props:{url:`pmtiles://${nn()}/v1/${kt}.pmtiles`,$$slots:{default:[vc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),p(u,t,c),a&&a.m(u,c),p(u,l,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,d.checked=u[0],V(()=>n=!1)),e.$set(d),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Mr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(ce(),g(a,1,1,()=>{a=null}),$e());const $={};c&33&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(m(t),m(l)),v(e,u),a&&a.d(u),v(o,u)}}}let kt="road_widths";function kc(r,e,n){let t=oe.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class yc extends J{constructor(e){super(),K(this,e,kc,wc,X,{})}}function Sc(r){let e,n,t;return{c(){e=T("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(l,o){p(l,e,o),r[7](e),n||(t=st(e,"change",r[5]),n=!0)},p:re,d(l){l&&m(e),r[7](null),n=!1,t()}}}function Fr(r){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cc(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new Ae({props:{color:Nt}}),{c(){h(e.$$.fragment),n=k(`
        Show `),l=k(t),o=k(" issues")},m(f,i){b(e,f,i),p(f,n,i),p(f,l,i),p(f,o,i),s=!0},p(f,i){(!s||i&4)&&t!==(t=f[2].toLocaleString()+"")&&R(l,t)},i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),s=!1},d(f){f&&(m(n),m(l),m(o)),v(e,f)}}}function Tc(r){let e,n,t;function l(s){r[8](s)}let o={id:"show-criticals",$$slots:{default:[Cc]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),q.push(()=>W(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f&2052&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Oc(r){let e,n,t,l,o,s;e=new cn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Sc]},$$scope:{ctx:r}}}),t=new $l({props:{errorMessage:r[3]}});let f=r[2]>0&&Fr(r);return{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),f&&f.c(),o=Le()},m(i,a){b(e,i,a),p(i,n,a),b(t,i,a),p(i,l,a),f&&f.m(i,a),p(i,o,a),s=!0},p(i,a){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?f?(f.p(i,a),a&4&&_(f,1)):(f=Fr(i),f.c(),_(f,1),f.m(o.parentNode,o)):f&&(ce(),g(f,1,1,()=>{f=null}),$e())},i(i){s||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(f),s=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(f),s=!1},d(i){i&&(m(n),m(l),m(o)),v(e,i),v(t,i),f&&f.d(i)}}}function Ac(r){let e,n,t=r[10].critical_type+"",l,o,s,f,i,a=r[10].location_description+"",u,c,d,$,y,C=r[10].notes+"",S,O,M,D,E,P,I,N=r[10].id+"",L,F,B,H,j,U=(r[10].inspector??"???")+"",Y,ne,Z,Ce=r[10].submission_time+"",Pe,ae,de,Ie,ue,pe=r[10].scheme_reference+"",me,Ee,Te,Ue=r[10].current_design_stage+"",xe;return{c(){e=T("div"),n=T("h2"),l=k(t),o=A(),s=T("p"),f=T("u"),f.textContent="Location",i=k(`
          : `),u=k(a),c=A(),d=T("p"),$=T("u"),$.textContent="Notes",y=k(`
          : `),S=k(C),O=A(),M=T("hr"),D=A(),E=T("p"),P=k("Critical issue ID: "),I=T("b"),L=k(N),F=A(),B=T("p"),H=k("Submitted by "),j=T("b"),Y=k(U),ne=k(`
          at
          `),Z=T("b"),Pe=k(Ce),ae=A(),de=T("p"),Ie=k("For scheme "),ue=T("b"),me=k(pe),Ee=k(`
          in stage
          `),Te=T("b"),xe=k(Ue),ke(e,"max-width","30vw")},m(le,he){p(le,e,he),w(e,n),w(n,l),w(e,o),w(e,s),w(s,f),w(s,i),w(s,u),w(e,c),w(e,d),w(d,$),w(d,y),w(d,S),w(e,O),w(e,M),w(e,D),w(e,E),w(E,P),w(E,I),w(I,L),w(e,F),w(e,B),w(B,H),w(B,j),w(j,Y),w(B,ne),w(B,Z),w(Z,Pe),w(e,ae),w(e,de),w(de,Ie),w(de,ue),w(ue,me),w(de,Ee),w(de,Te),w(Te,xe)},p(le,he){he&1024&&t!==(t=le[10].critical_type+"")&&R(l,t),he&1024&&a!==(a=le[10].location_description+"")&&R(u,a),he&1024&&C!==(C=le[10].notes+"")&&R(S,C),he&1024&&N!==(N=le[10].id+"")&&R(L,N),he&1024&&U!==(U=(le[10].inspector??"???")+"")&&R(Y,U),he&1024&&Ce!==(Ce=le[10].submission_time+"")&&R(Pe,Ce),he&1024&&pe!==(pe=le[10].scheme_reference+"")&&R(me,pe),he&1024&&Ue!==(Ue=le[10].current_design_stage+"")&&R(xe,Ue)},d(le){le&&m(e)}}}function Lc(r){let e,n;return e=new fe({props:{$$slots:{default:[Ac,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ic(r){let e,n,t,l,o,s;const f=[z(`${lt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Nt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let $=0;$<f.length;$+=1)i=ee(i,f[$]);e=new nt({props:i}),e.$on("click",r[6]);const a=[z(`${lt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let u={};for(let $=0;$<a.length;$+=1)u=ee(u,a[$]);t=new $o({props:u});const c=[z(`${lt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Nt,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let d={$$slots:{default:[Lc]},$$scope:{ctx:r}};for(let $=0;$<c.length;$+=1)d=ee(d,c[$]);return o=new nt({props:d}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment)},m($,y){b(e,$,y),p($,n,y),b(t,$,y),p($,l,y),b(o,$,y),s=!0},p($,y){const C=y&2?te(f,[y&0&&ie(z(`${lt}-clusters`)),f[1],y&0&&{paint:{"circle-color":Nt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:$[1]?"visible":"none"}},f[4]]):{};e.$set(C);const S=y&2?te(a,[y&0&&ie(z(`${lt}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:$[1]?"visible":"none"}}]):{};t.$set(S);const O=y&2?te(c,[y&0&&ie(z(`${lt}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":Nt,"circle-opacity":x(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:$[1]?"visible":"none"}}]):{};y&2048&&(O.$$scope={dirty:y,ctx:$}),o.$set(O)},i($){s||(_(e.$$.fragment,$),_(t.$$.fragment,$),_(o.$$.fragment,$),s=!0)},o($){g(e.$$.fragment,$),g(t.$$.fragment,$),g(o.$$.fragment,$),s=!1},d($){$&&(m(n),m(l)),v(e,$),v(t,$),v(o,$)}}}function Pc(r){let e,n,t,l;return e=new Re({props:{label:"Critical Issues",$$slots:{default:[Oc]},$$scope:{ctx:r}}}),t=new It({props:{id:lt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Ic]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,[s]){const f={};s&2063&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}let lt="criticals",Nt="red";function Nc(r,e,n){let t;ve(r,wn,$=>n(9,t=$));let l,o=!0,s=0,f="",i=jl();async function a($){try{n(4,i=await hi(l.files[0])),n(2,s=i.features.length),n(3,f="")}catch(y){n(3,f=`The file you loaded is broken: ${y}`)}}function u($){t.getSource(lt).getClusterExpansionZoom($.detail.features[0].properties.cluster_id,(y,C)=>{y||t.easeTo({center:$.detail.features[0].geometry.coordinates,zoom:C})})}function c($){q[$?"unshift":"push"](()=>{l=$,n(0,l)})}function d($){o=$,n(1,o)}return[l,o,s,f,i,a,u,c,d]}class Mc extends J{constructor(e){super(),K(this,e,Nc,Pc,X,{})}}function Fc(r){let e,n,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Crossings`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ec(r){let e;return{c(){e=k("crossing")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Dc(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Ec]},$$scope:{ctx:r}}}),s=new at({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=A(),h(s.$$.fragment)},m(i,a){p(i,e,a),w(e,n),b(t,e,null),w(e,l),p(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function jc(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Dc]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Rc(r){let e,n=Er(r[3])+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=Er(l[3])+"")&&R(t,n)},d(l){l&&m(e)}}}function Bc(r){let e,n;return e=new fe({props:{$$slots:{default:[Rc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hc(r){let e,n;const t=[z(yt),{sourceLayer:yt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Bc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new nt({props:l}),e.$on("click",Uc),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(z(yt)),s&0&&{sourceLayer:yt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function zc(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:yt,$$slots:{right:[jc],default:[Fc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${yt}.pmtiles`,$$slots:{default:[Hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let yt="crossings";function Er(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Uc(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Gc(r,e,n){let t=oe.crossings,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class qc extends J{constructor(e){super(),K(this,e,Gc,zc,X,{})}}function Wc(r){let e,n,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Cycle parking`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Vc(r){let e;return{c(){e=k("OpenStreetMap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Xc(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),s=new at({}),{c(){e=T("p"),n=k("Cycle parking, according to "),h(t.$$.fragment),l=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=A(),h(s.$$.fragment)},m(i,a){p(i,e,a),w(e,n),b(t,e,null),w(e,l),p(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function Yc(r){let e,n,t;return n=new ge({props:{$$slots:{default:[Xc]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Qc(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(l)},m(s,f){p(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=(s[3].capacity??"unknown")+"")&&R(o,l)},d(s){s&&m(e)}}}function Jc(r){let e,n;return e=new fe({props:{$$slots:{default:[Qc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kc(r){let e,n;const t=[z(St),{sourceLayer:St},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Jc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new nt({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(z(St)),s&0&&{sourceLayer:St},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Zc(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:St,$$slots:{right:[Yc],default:[Wc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${St}.pmtiles`,$$slots:{default:[Kc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let St="cycle_parking";function xc(r,e,n){let t=oe.cycle_parking,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class e$ extends J{constructor(e){super(),K(this,e,xc,Zc,X,{})}}function Dr(r,e,n){const t=r.slice();return t[4]=e[n],t}function jr(r,e,n){const t=r.slice();return t[4]=e[n],t[8]=e,t[9]=n,t}function t$(r){let e;return{c(){e=k("Education")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function n$(r){let e,n,t,l;return t=new at({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=A(),h(t.$$.fragment)},m(o,s){p(o,e,s),p(o,n,s),b(t,o,s),l=!0},p:re,i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),v(t,o)}}}function r$(r){let e,n,t;return n=new ge({props:{$$slots:{default:[n$]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Rr(r){let e,n,t;return n=new Ke({props:{$$slots:{default:[o$]},$$scope:{ctx:r}}}),{c(){e=T("div"),h(n.$$.fragment),ke(e,"border","1px solid black"),ke(e,"padding","8px")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&1026&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function l$(r){let e,n,t=r[4].capitalisedName+"",l,o,s;return e=new Ae({props:{color:r[4].color}}),{c(){h(e.$$.fragment),n=A(),l=k(t),o=A()},m(f,i){b(e,f,i),p(f,n,i),p(f,l,i),p(f,o,i),s=!0},p(f,i){const a={};i&2&&(a.color=f[4].color),e.$set(a),(!s||i&2)&&t!==(t=f[4].capitalisedName+"")&&R(l,t)},i(f){s||(_(e.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),s=!1},d(f){f&&(m(n),m(l),m(o)),v(e,f)}}}function Br(r){let e,n,t;function l(s){r[3](s,r[4])}let o={id:r[4].name,$$slots:{default:[l$]},$$scope:{ctx:r}};return r[4].show!==void 0&&(o.checked=r[4].show),e=new se({props:o}),q.push(()=>W(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){r=s;const i={};f&2&&(i.id=r[4].name),f&1026&&(i.$$scope={dirty:f,ctx:r}),!n&&f&2&&(n=!0,i.checked=r[4].show,V(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function o$(r){let e,n,t=Oe(r[1]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Br(jr(r,t,s));const o=s=>g(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Le()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);p(s,e,f),n=!0},p(s,f){if(f&2){t=Oe(s[1]);let i;for(i=0;i<t.length;i+=1){const a=jr(s,t,i);l[i]?(l[i].p(a,f),_(l[i],1)):(l[i]=Br(a),l[i].c(),_(l[i],1),l[i].m(e.parentNode,e))}for(ce(),i=t.length;i<l.length;i+=1)o(i);$e()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)_(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)g(l[f]);n=!1},d(s){s&&m(e),it(l,s)}}}function s$(r){let e,n=(r[7].name??`Unnamed ${r[4].singularNoun}`)+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&130&&n!==(n=(l[7].name??`Unnamed ${l[4].singularNoun}`)+"")&&R(t,n)},d(l){l&&m(e)}}}function i$(r){let e,n;return e=new fe({props:{$$slots:{default:[s$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1154&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function a$(r){let e,n,t;const l=[z(r[4].name),{sourceLayer:r[4].name},{paint:{"fill-color":r[4].color,"fill-opacity":x(.7,1)}},{layout:{visibility:r[0]&&r[4].show?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[i$]},$$scope:{ctx:r}};for(let s=0;s<l.length;s+=1)o=ee(o,l[s]);return e=new ze({props:o}),{c(){h(e.$$.fragment),n=A()},m(s,f){b(e,s,f),p(s,n,f),t=!0},p(s,f){const i=f&3?te(l,[f&2&&ie(z(s[4].name)),f&2&&{sourceLayer:s[4].name},f&2&&{paint:{"fill-color":s[4].color,"fill-opacity":x(.7,1)}},{layout:{visibility:s[0]&&s[4].show?"visible":"none"}},l[4],l[5]]):{};f&1026&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){s&&m(n),v(e,s)}}}function Hr(r){let e,n;return e=new we({props:{url:`pmtiles://${be()}/v1/${r[4].name}.pmtiles`,$$slots:{default:[a$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.url=`pmtiles://${be()}/v1/${t[4].name}.pmtiles`),l&1027&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function f$(r){let e,n,t,l,o,s;function f($){r[2]($)}let i={id:"education",$$slots:{right:[r$],default:[t$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=r[0]&&Rr(r),u=Oe(r[1]),c=[];for(let $=0;$<u.length;$+=1)c[$]=Hr(Dr(r,u,$));const d=$=>g(c[$],1,1,()=>{c[$]=null});return{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A();for(let $=0;$<c.length;$+=1)c[$].c();o=Le()},m($,y){b(e,$,y),p($,t,y),a&&a.m($,y),p($,l,y);for(let C=0;C<c.length;C+=1)c[C]&&c[C].m($,y);p($,o,y),s=!0},p($,[y]){const C={};if(y&1024&&(C.$$scope={dirty:y,ctx:$}),!n&&y&1&&(n=!0,C.checked=$[0],V(()=>n=!1)),e.$set(C),$[0]?a?(a.p($,y),y&1&&_(a,1)):(a=Rr($),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(ce(),g(a,1,1,()=>{a=null}),$e()),y&131){u=Oe($[1]);let S;for(S=0;S<u.length;S+=1){const O=Dr($,u,S);c[S]?(c[S].p(O,y),_(c[S],1)):(c[S]=Hr(O),c[S].c(),_(c[S],1),c[S].m(o.parentNode,o))}for(ce(),S=u.length;S<c.length;S+=1)d(S);$e()}},i($){if(!s){_(e.$$.fragment,$),_(a);for(let y=0;y<u.length;y+=1)_(c[y]);s=!0}},o($){g(e.$$.fragment,$),g(a),c=c.filter(Boolean);for(let y=0;y<c.length;y+=1)g(c[y]);s=!1},d($){$&&(m(t),m(l),m(o)),v(e,$),a&&a.d($),it(c,$)}}}function u$(r,e,n){let t=!1,l=[{name:"schools",capitalisedName:"Schools",color:oe.schools,show:!0,singularNoun:"school"},{name:"colleges",capitalisedName:"Colleges",color:"maroon",show:!0,singularNoun:"college"},{name:"universities",capitalisedName:"Universities",color:"navy",show:!0,singularNoun:"University"}];function o(f){t=f,n(0,t)}function s(f,i){r.$$.not_equal(i.show,f)&&(i.show=f,n(1,l))}return[t,l,o,s]}class c$ extends J{constructor(e){super(),K(this,e,u$,f$,X,{})}}function $$(r){let e,n,t,l;return e=new Ae({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=A(),t=k(r[2])},m(o,s){b(e,o,s),p(o,n,s),p(o,t,s),l=!0},p(o,s){(!l||s&4)&&R(t,o[2])},i(o){l||(_(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){o&&(m(n),m(t)),v(e,o)}}}function p$(r){let e;const n=r[5].default,t=Bt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Ht(t,n,l,l[7],e?Ut(n,l[7],o,null):zt(l[7]),null)},i(l){e||(_(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function m$(r){let e,n,t;return n=new ge({props:{$$slots:{default:[p$]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function _$(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&R(t,n)},d(l){l&&m(e)}}}function g$(r){let e,n;return e=new fe({props:{$$slots:{default:[_$,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function d$(r){let e,n;const t=[z(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":x(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[g$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new ze({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&25?te(t,[s&1&&ie(z(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":x(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function h$(r){let e,n,t,l,o;function s(i){r[6](i)}let f={id:r[0],$$slots:{right:[m$],default:[$$]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.checked=r[3]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${r[0]}.pmtiles`,$$slots:{default:[d$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&1&&(u.id=i[0]),a&132&&(u.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,u.checked=i[3],V(()=>n=!1)),e.$set(u);const c={};a&1&&(c.url=`pmtiles://${be()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}function b$(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:f}=e,i=oe[o],a=!1;function u(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,f=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,s,f,a,i,t,u,l]}class Ml extends J{constructor(e){super(),K(this,e,b$,h$,X,{name:0,singularNoun:1,pluralNoun:2})}}function v$(r){let e;return{c(){e=k("hospital")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function w$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[v$]},$$scope:{ctx:r}}}),s=new at({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),l=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=A(),h(s.$$.fragment)},m(i,a){p(i,e,a),w(e,n),b(t,e,null),w(e,l),p(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function k$(r){let e,n;return e=new Ml({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[w$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class y$ extends J{constructor(e){super(),K(this,e,null,k$,X,{})}}function S$(r){let e,n,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Railway Stations`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:re,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function C$(r){let e;return{c(){e=k("railway station")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function T$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[C$]},$$scope:{ctx:r}}}),s=new at({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=A(),h(s.$$.fragment)},m(i,a){p(i,e,a),w(e,n),b(t,e,null),w(e,l),p(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function O$(r){let e,n,t;return n=new ge({props:{$$slots:{default:[T$]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function A$(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&R(t,n)},d(l){l&&m(e)}}}function L$(r){let e,n;return e=new fe({props:{$$slots:{default:[A$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function I$(r){let e,n;const t=[z(en),{paint:{"circle-color":r[1],"circle-radius":Kt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[L$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new nt({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?te(t,[s&0&&ie(z(en)),s&2&&{paint:{"circle-color":o[1],"circle-radius":Kt/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function P$(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:en,$$slots:{right:[O$],default:[S$]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new se({props:f}),q.push(()=>W(e,"checked",s)),l=new It({props:{data:`${be()}/v1/${en}.geojson`,$$slots:{default:[I$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],V(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let en="railway_stations";function N$(r,e,n){let t=oe.railway_stations,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class M$ extends J{constructor(e){super(),K(this,e,N$,P$,X,{})}}function F$(r){let e;return{c(){e=k("sports pitches")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function E$(r){let e;return{c(){e=k("sports centres")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function D$(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[F$]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[E$]},$$scope:{ctx:r}}}),i=new at({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),l=k(" and "),h(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),f=A(),h(i.$$.fragment)},m(u,c){p(u,e,c),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),p(u,f,c),b(i,u,c),a=!0},p(u,c){const d={};c&1&&(d.$$scope={dirty:c,ctx:u}),t.$set(d);const $={};c&1&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){a||(_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!0)},o(u){g(t.$$.fragment,u),g(o.$$.fragment,u),g(i.$$.fragment,u),a=!1},d(u){u&&(m(e),m(f)),v(t),v(o),v(i,u)}}}function j$(r){let e,n;return e=new Ml({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[D$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class R$ extends J{constructor(e){super(),K(this,e,null,j$,X,{})}}function B$(r){let e;return{c(){e=k("Stats19")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function H$(r){let e;return{c(){e=k("DfT stats19")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function z$(r){let e;return{c(){e=k("documented by DfT")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function U$(r){let e,n,t,l,o,s,f,i,a,u,c,d,$,y,C,S,O,M,D,E,P,I,N;return t=new Q({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[H$]},$$scope:{ctx:r}}}),O=new Q({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[z$]},$$scope:{ctx:r}}}),I=new Fe({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),h(t.$$.fragment),l=k(" dataset. Please note these limitations:"),o=A(),s=T("ul"),f=T("li"),f.textContent="Only collisions between 2017 and 2022 are included",i=A(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,u=A(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,d=A(),$=T("li"),$.textContent='The "pedestrians" category also include mobility scooters',y=A(),C=T("li"),S=k("All limitations "),h(O.$$.fragment),M=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),D=A(),E=T("p"),E.textContent="You can click a point to open the full report, thanks to CycleStreets.",P=A(),h(I.$$.fragment)},m(L,F){p(L,e,F),w(e,n),b(t,e,null),w(e,l),p(L,o,F),p(L,s,F),w(s,f),w(s,i),w(s,a),w(s,u),w(s,c),w(s,d),w(s,$),w(s,y),w(s,C),w(C,S),b(O,C,null),w(C,M),p(L,D,F),p(L,E,F),p(L,P,F),b(I,L,F),N=!0},p(L,F){const B={};F&16777216&&(B.$$scope={dirty:F,ctx:L}),t.$set(B);const H={};F&16777216&&(H.$$scope={dirty:F,ctx:L}),O.$set(H)},i(L){N||(_(t.$$.fragment,L),_(O.$$.fragment,L),_(I.$$.fragment,L),N=!0)},o(L){g(t.$$.fragment,L),g(O.$$.fragment,L),g(I.$$.fragment,L),N=!1},d(L){L&&(m(e),m(o),m(s),m(D),m(E),m(P)),v(t),v(O),v(I,L)}}}function G$(r){let e,n,t;return n=new ge({props:{$$slots:{default:[U$]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function zr(r){let e,n,t,l,o,s,f,i,a,u,c,d,$;return n=new Ke({props:{small:!0,$$slots:{default:[Y$]},$$scope:{ctx:r}}}),u=new pl({props:{rows:r[14]}}),{c(){e=T("div"),h(n.$$.fragment),t=A(),l=T("div"),o=k(`Filter years:
      `),s=T("input"),f=k(`
      -
      `),i=T("input"),a=A(),h(u.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),ke(e,"border","1px solid black"),ke(e,"padding","8px")},m(y,C){p(y,e,C),b(n,e,null),w(e,t),w(e,l),w(l,o),w(l,s),Qe(s,r[4]),w(l,f),w(l,i),Qe(i,r[5]),w(e,a),b(u,e,null),c=!0,d||($=[st(s,"input",r[20]),st(i,"input",r[21])],d=!0)},p(y,C){const S={};C&16777231&&(S.$$scope={dirty:C,ctx:y}),n.$set(S),C&16&&Dt(s.value)!==y[4]&&Qe(s,y[4]),C&32&&Dt(i.value)!==y[5]&&Qe(i,y[5])},i(y){c||(_(n.$$.fragment,y),_(u.$$.fragment,y),c=!0)},o(y){g(n.$$.fragment,y),g(u.$$.fragment,y),c=!1},d(y){y&&m(e),v(n),v(u),d=!1,ul($)}}}function q$(r){let e;return{c(){e=k("Pedestrians")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function W$(r){let e;return{c(){e=k("Cyclists")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function V$(r){let e;return{c(){e=k("Horse riders")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function X$(r){let e;return{c(){e=k("Other")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Y$(r){let e,n,t,l,o,s,f,i,a,u,c,d;function $(P){r[16](P)}let y={id:"stats19-pedestrians",$$slots:{default:[q$]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new se({props:y}),q.push(()=>W(e,"checked",$));function C(P){r[17](P)}let S={id:"stats19-cyclists",$$slots:{default:[W$]},$$scope:{ctx:r}};r[1]!==void 0&&(S.checked=r[1]),l=new se({props:S}),q.push(()=>W(l,"checked",C));function O(P){r[18](P)}let M={id:"stats19-horse-riders",$$slots:{default:[V$]},$$scope:{ctx:r}};r[2]!==void 0&&(M.checked=r[2]),f=new se({props:M}),q.push(()=>W(f,"checked",O));function D(P){r[19](P)}let E={id:"stats19-other",$$slots:{default:[X$]},$$scope:{ctx:r}};return r[3]!==void 0&&(E.checked=r[3]),u=new se({props:E}),q.push(()=>W(u,"checked",D)),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment),s=A(),h(f.$$.fragment),a=A(),h(u.$$.fragment)},m(P,I){b(e,P,I),p(P,t,I),b(l,P,I),p(P,s,I),b(f,P,I),p(P,a,I),b(u,P,I),d=!0},p(P,I){const N={};I&16777216&&(N.$$scope={dirty:I,ctx:P}),!n&&I&1&&(n=!0,N.checked=P[0],V(()=>n=!1)),e.$set(N);const L={};I&16777216&&(L.$$scope={dirty:I,ctx:P}),!o&&I&2&&(o=!0,L.checked=P[1],V(()=>o=!1)),l.$set(L);const F={};I&16777216&&(F.$$scope={dirty:I,ctx:P}),!i&&I&4&&(i=!0,F.checked=P[2],V(()=>i=!1)),f.$set(F);const B={};I&16777216&&(B.$$scope={dirty:I,ctx:P}),!c&&I&8&&(c=!0,B.checked=P[3],V(()=>c=!1)),u.$set(B)},i(P){d||(_(e.$$.fragment,P),_(l.$$.fragment,P),_(f.$$.fragment,P),_(u.$$.fragment,P),d=!0)},o(P){g(e.$$.fragment,P),g(l.$$.fragment,P),g(f.$$.fragment,P),g(u.$$.fragment,P),d=!1},d(P){P&&(m(t),m(s),m(a)),v(e,P),v(l,P),v(f,P),v(u,P)}}}function Ur(r){let e,n,t,l=r[8][r[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(l)},m(s,f){p(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8388608&&l!==(l=s[8][s[23].pedestrian_location]+"")&&R(o,l)},d(s){s&&m(e)}}}function Gr(r){let e,n,t,l=r[9][r[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(l)},m(s,f){p(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8388608&&l!==(l=s[9][s[23].pedestrian_movement]+"")&&R(o,l)},d(s){s&&m(e)}}}function Q$(r){let e,n,t,l=r[23].year+"",o,s,f,i,a,u=r[10][r[23].severity]+"",c,d,$,y,C,S=qr(r[23])+"",O,M,D,E,P,I=r[23].pedestrian_location&&Ur(r),N=r[23].pedestrian_movement&&Gr(r);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(l),s=A(),f=T("p"),i=k("Severity: "),a=T("b"),c=k(u),d=A(),$=T("p"),y=k("Casualties: "),C=T("b"),O=k(S),M=A(),I&&I.c(),D=A(),N&&N.c(),E=A(),P=T("p"),P.textContent="Click to open full report in CycleStreets"},m(L,F){p(L,e,F),w(e,n),w(e,t),w(t,o),p(L,s,F),p(L,f,F),w(f,i),w(f,a),w(a,c),p(L,d,F),p(L,$,F),w($,y),w($,C),w(C,O),p(L,M,F),I&&I.m(L,F),p(L,D,F),N&&N.m(L,F),p(L,E,F),p(L,P,F)},p(L,F){F&8388608&&l!==(l=L[23].year+"")&&R(o,l),F&8388608&&u!==(u=L[10][L[23].severity]+"")&&R(c,u),F&8388608&&S!==(S=qr(L[23])+"")&&R(O,S),L[23].pedestrian_location?I?I.p(L,F):(I=Ur(L),I.c(),I.m(D.parentNode,D)):I&&(I.d(1),I=null),L[23].pedestrian_movement?N?N.p(L,F):(N=Gr(L),N.c(),N.m(E.parentNode,E)):N&&(N.d(1),N=null)},d(L){L&&(m(e),m(s),m(f),m(d),m($),m(M),m(D),m(E),m(P)),I&&I.d(L),N&&N.d(L)}}}function J$(r){let e,n;return e=new fe({props:{$$slots:{default:[Q$,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&25165824&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function K$(r){let e,n;const t=[z(Ct),{sourceLayer:Ct},{paint:{"circle-color":ye(["get","severity"],[1,2,3],[r[11],r[12],r[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[7]},{layout:{visibility:r[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[J$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new nt({props:l}),e.$on("click",x$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&14528?te(t,[s&0&&ie(z(Ct)),s&0&&{sourceLayer:Ct},s&14336&&{paint:{"circle-color":ye(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Z$(r){let e,n,t,l,o,s;function f(u){r[15](u)}let i={id:Ct,$$slots:{right:[G$],default:[B$]},$$scope:{ctx:r}};r[6]!==void 0&&(i.checked=r[6]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=r[6]&&zr(r);return o=new we({props:{url:`pmtiles://${be()}/v1/${Ct}.pmtiles`,$$slots:{default:[K$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),p(u,t,c),a&&a.m(u,c),p(u,l,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&16777216&&(d.$$scope={dirty:c,ctx:u}),!n&&c&64&&(n=!0,d.checked=u[6],V(()=>n=!1)),e.$set(d),u[6]?a?(a.p(u,c),c&64&&_(a,1)):(a=zr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(ce(),g(a,1,1,()=>{a=null}),$e());const $={};c&16777408&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(m(t),m(l)),v(e,u),a&&a.d(u),v(o,u)}}}let Ct="stats19";function qr(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function x$(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function ep(r,e,n){let t,l=!1,o=!0,s=!0,f=!0,i=!1,a=2017,u=2022;function c(B,H,j,U,Y,ne){let Z=["any"];return o&&Z.push(["get","pedestrian"]),s&&Z.push(["get","cyclist"]),f&&Z.push(["get","horse_rider"]),i&&Z.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],u],Z]}let d={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},$={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},C=oe.sequential_low_to_high[4],S=oe.sequential_low_to_high[2],O=oe.sequential_low_to_high[0],M=[["Fatal",C],["Serious",S],["Slight",O]];function D(B){l=B,n(6,l)}function E(B){o=B,n(0,o)}function P(B){s=B,n(1,s)}function I(B){f=B,n(2,f)}function N(B){i=B,n(3,i)}function L(){a=Dt(this.value),n(4,a)}function F(){u=Dt(this.value),n(5,u)}return r.$$.update=()=>{r.$$.dirty&63&&n(7,t=c())},[o,s,f,i,a,u,l,t,d,$,y,C,S,O,M,D,E,P,I,N,L,F]}class tp extends J{constructor(e){super(),K(this,e,ep,Z$,X,{})}}function np(r){let e;return{c(){e=k("Vehicle counts")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function rp(r){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function lp(r){let e;return{c(){e=k("methodology")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function op(r){let e,n,t,l,o,s,f,i,a,u,c;return t=new Q({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[rp]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[lp]},$$scope:{ctx:r}}}),u=new Fe({}),{c(){e=T("p"),n=k("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),s=k(" for details and caveats about the measurements."),f=A(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=A(),h(u.$$.fragment)},m(d,$){p(d,e,$),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),p(d,f,$),p(d,i,$),p(d,a,$),b(u,d,$),c=!0},p(d,$){const y={};$&64&&(y.$$scope={dirty:$,ctx:d}),t.$set(y);const C={};$&64&&(C.$$scope={dirty:$,ctx:d}),o.$set(C)},i(d){c||(_(t.$$.fragment,d),_(o.$$.fragment,d),_(u.$$.fragment,d),c=!0)},o(d){g(t.$$.fragment,d),g(o.$$.fragment,d),g(u.$$.fragment,d),c=!1},d(d){d&&(m(e),m(f),m(i),m(a)),v(t),v(o),v(u,d)}}}function sp(r){let e,n,t;return n=new ge({props:{$$slots:{default:[op]},$$scope:{ctx:r}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Wr(r){let e,n;return e=new Ze({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ip(r){let e,n=r[5].location+"",t,l,o,s,f,i=r[5].motor_vehicles_2022.toLocaleString()+"",a,u,c,d,$,y=r[5].pedal_cycles_2022.toLocaleString()+"",C,S,O,M,D,E=r[5].method+"",P;return{c(){e=T("h2"),t=k(n),l=A(),o=T("p"),s=k("Total motor vehicles (2022 AADF): "),f=T("b"),a=k(i),u=A(),c=T("p"),d=k("Total pedal cycles (2022 AADF): "),$=T("b"),C=k(y),S=A(),O=T("p"),M=k("Count method: "),D=T("b"),P=k(E)},m(I,N){p(I,e,N),w(e,t),p(I,l,N),p(I,o,N),w(o,s),w(o,f),w(f,a),p(I,u,N),p(I,c,N),w(c,d),w(c,$),w($,C),p(I,S,N),p(I,O,N),w(O,M),w(O,D),w(D,P)},p(I,N){N&32&&n!==(n=I[5].location+"")&&R(t,n),N&32&&i!==(i=I[5].motor_vehicles_2022.toLocaleString()+"")&&R(a,i),N&32&&y!==(y=I[5].pedal_cycles_2022.toLocaleString()+"")&&R(C,y),N&32&&E!==(E=I[5].method+"")&&R(P,E)},d(I){I&&(m(e),m(l),m(o),m(u),m(c),m(S),m(O))}}}function ap(r){let e,n;return e=new fe({props:{$$slots:{default:[ip,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fp(r){let e,n;const t=[z(Tt),{sourceLayer:Tt},{paint:{"circle-color":ye(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[ap]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new nt({props:l}),e.$on("click",cp),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&7?te(t,[s&0&&ie(z(Tt)),s&0&&{sourceLayer:Tt},s&6&&{paint:{"circle-color":ye(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function up(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={id:Tt,$$slots:{right:[sp],default:[np]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),q.push(()=>W(e,"checked",f));let a=r[0]&&Wr(r);return o=new we({props:{url:`pmtiles://${be()}/v1/${Tt}.pmtiles`,$$slots:{default:[fp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),p(u,t,c),a&&a.m(u,c),p(u,l,c),b(o,u,c),s=!0},p(u,[c]){const d={};c&64&&(d.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,d.checked=u[0],V(()=>n=!1)),e.$set(d),u[0]?a?(a.p(u,c),c&1&&_(a,1)):(a=Wr(u),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(ce(),g(a,1,1,()=>{a=null}),$e());const $={};c&65&&($.$$scope={dirty:c,ctx:u}),o.$set($)},i(u){s||(_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(a),g(o.$$.fragment,u),s=!1},d(u){u&&(m(t),m(l)),v(e,u),a&&a.d(u),v(o,u)}}}let Tt="vehicle_counts";function cp(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function $p(r,e,n){let t=oe.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function f(i){s=i,n(0,s)}return[s,t,l,o,f]}class pp extends J{constructor(e){super(),K(this,e,$p,up,X,{})}}function mp(r){let e,n,t,l,o,s,f,i;return e=new c$({}),t=new y$({}),o=new R$({}),f=new M$({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),s=A(),h(f.$$.fragment)},m(a,u){b(e,a,u),p(a,n,u),b(t,a,u),p(a,l,u),b(o,a,u),p(a,s,u),b(f,a,u),i=!0},i(a){i||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(m(n),m(l),m(s)),v(e,a),v(t,a),v(o,a),v(f,a)}}}function _p(r){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[mp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gp(r){let e,n,t,l,o,s,f,i,a,u,c,d;return e=new $u({}),t=new Nu({}),o=new ku({}),f=new xf({}),a=new e$({}),c=new qc({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),s=A(),h(f.$$.fragment),i=A(),h(a.$$.fragment),u=A(),h(c.$$.fragment)},m($,y){b(e,$,y),p($,n,y),b(t,$,y),p($,l,y),b(o,$,y),p($,s,y),b(f,$,y),p($,i,y),b(a,$,y),p($,u,y),b(c,$,y),d=!0},i($){d||(_(e.$$.fragment,$),_(t.$$.fragment,$),_(o.$$.fragment,$),_(f.$$.fragment,$),_(a.$$.fragment,$),_(c.$$.fragment,$),d=!0)},o($){g(e.$$.fragment,$),g(t.$$.fragment,$),g(o.$$.fragment,$),g(f.$$.fragment,$),g(a.$$.fragment,$),g(c.$$.fragment,$),d=!1},d($){$&&(m(n),m(l),m(s),m(i),m(u)),v(e,$),v(t,$),v(o,$),v(f,$),v(a,$),v(c,$)}}}function dp(r){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[gp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hp(r){let e,n,t,l,o,s,f,i,a,u;return e=new gf({}),t=new Bf({}),o=new ka({}),f=new qa({}),a=new lf({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),s=A(),h(f.$$.fragment),i=A(),h(a.$$.fragment)},m(c,d){b(e,c,d),p(c,n,d),b(t,c,d),p(c,l,d),b(o,c,d),p(c,s,d),b(f,c,d),p(c,i,d),b(a,c,d),u=!0},i(c){u||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&(m(n),m(l),m(s),m(i)),v(e,c),v(t,c),v(o,c),v(f,c),v(a,c)}}}function bp(r){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[hp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vp(r){let e,n,t,l;return e=new ca({}),t=new Ma({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function wp(r){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[vp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kp(r){let e,n,t,l,o,s;return e=new yc({}),t=new Uu({}),o=new pc({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment)},m(f,i){b(e,f,i),p(f,n,i),b(t,f,i),p(f,l,i),b(o,f,i),s=!0},i(f){s||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(o.$$.fragment,f),s=!1},d(f){f&&(m(n),m(l)),v(e,f),v(t,f),v(o,f)}}}function yp(r){let e,n,t,l,o,s,f=$n()=="Private (development)",i,a,u;e=new pp({}),t=new tp({}),o=new nc({});let c=f&&kp();return a=new Af({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),s=A(),c&&c.c(),i=A(),h(a.$$.fragment)},m(d,$){b(e,d,$),p(d,n,$),b(t,d,$),p(d,l,$),b(o,d,$),p(d,s,$),c&&c.m(d,$),p(d,i,$),b(a,d,$),u=!0},p:re,i(d){u||(_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),_(c),_(a.$$.fragment,d),u=!0)},o(d){g(e.$$.fragment,d),g(t.$$.fragment,d),g(o.$$.fragment,d),g(c),g(a.$$.fragment,d),u=!1},d(d){d&&(m(n),m(l),m(s),m(i)),v(e,d),v(t,d),v(o,d),c&&c.d(d),v(a,d)}}}function Sp(r){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[yp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cp(r){let e,n,t,l,o;function s(i){r[3](i)}let f={};return r[0]!==void 0&&(f.enabled=r[0]),e=new ql({props:f}),q.push(()=>W(e,"enabled",s)),l=new Jl({}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,a){const u={};!n&&a&1&&(n=!0,u.enabled=i[0],V(()=>n=!1)),e.$set(u)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}function Tp(r){let e,n,t,l,o,s,f,i,a,u,c,d,$,y,C,S;return e=new Mc({}),t=new Re({props:{label:"Trip generators",$$slots:{default:[_p]},$$scope:{ctx:r}}}),o=new Re({props:{label:"Existing infrastructure",$$slots:{default:[dp]},$$scope:{ctx:r}}}),f=new Re({props:{label:"Boundaries",$$slots:{default:[bp]},$$scope:{ctx:r}}}),a=new Re({props:{label:"Census",$$slots:{default:[wp]},$$scope:{ctx:r}}}),c=new Re({props:{label:"Other",$$slots:{default:[Sp]},$$scope:{ctx:r}}}),$=new Re({props:{label:"Tools",$$slots:{default:[Cp]},$$scope:{ctx:r}}}),C=new Gl({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),s=A(),h(f.$$.fragment),i=A(),h(a.$$.fragment),u=A(),h(c.$$.fragment),d=A(),h($.$$.fragment),y=A(),h(C.$$.fragment)},m(O,M){b(e,O,M),p(O,n,M),b(t,O,M),p(O,l,M),b(o,O,M),p(O,s,M),b(f,O,M),p(O,i,M),b(a,O,M),p(O,u,M),b(c,O,M),p(O,d,M),b($,O,M),p(O,y,M),b(C,O,M),S=!0},p(O,M){const D={};M&16&&(D.$$scope={dirty:M,ctx:O}),t.$set(D);const E={};M&16&&(E.$$scope={dirty:M,ctx:O}),o.$set(E);const P={};M&16&&(P.$$scope={dirty:M,ctx:O}),f.$set(P);const I={};M&16&&(I.$$scope={dirty:M,ctx:O}),a.$set(I);const N={};M&16&&(N.$$scope={dirty:M,ctx:O}),c.$set(N);const L={};M&17&&(L.$$scope={dirty:M,ctx:O}),$.$set(L);const F={};M&2&&(F.disabled=!O[1]),C.$set(F)},i(O){S||(_(e.$$.fragment,O),_(t.$$.fragment,O),_(o.$$.fragment,O),_(f.$$.fragment,O),_(a.$$.fragment,O),_(c.$$.fragment,O),_($.$$.fragment,O),_(C.$$.fragment,O),S=!0)},o(O){g(e.$$.fragment,O),g(t.$$.fragment,O),g(o.$$.fragment,O),g(f.$$.fragment,O),g(a.$$.fragment,O),g(c.$$.fragment,O),g($.$$.fragment,O),g(C.$$.fragment,O),S=!1},d(O){O&&(m(n),m(l),m(s),m(i),m(u),m(d),m(y)),v(e,O),v(t,O),v(o,O),v(f,O),v(a,O),v(c,O),v($,O),v(C,O)}}}function Op(r){let e,n;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=ee(l,t[o]);return e=new ze({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(f)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ap(r){let e,n,t,l;return e=new Re({props:{label:"Layers",open:!0,$$slots:{default:[Tp]},$$scope:{ctx:r}}}),t=new It({props:{data:r[2],$$slots:{default:[Op]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,[s]){const f={};s&19&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Lp(r,e,n){let t,l;ve(r,lr,f=>n(1,l=f));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(f){t=f,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&lr.set(!t)},[t,l,o,s]}class Ip extends J{constructor(e){super(),K(this,e,Lp,Ap,X,{})}}function Vr(r){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pp(r){let e,n=r[0]&&Vr();return{c(){n&&n.c(),e=Le()},m(t,l){n&&n.m(t,l),p(t,e,l)},p(t,[l]){t[0]?n||(n=Vr(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:re,o:re,d(t){t&&m(e),n&&n.d(t)}}}function Np(r,e,n){let{loadFile:t}=e,l=!0;return kn(async()=>{let s=await(await fetch(`${nn()}/v1/random_schemes.geojson`)).text();t(s),n(0,l=!1)}),r.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[l,t]}class Mp extends J{constructor(e){super(),K(this,e,Np,Pp,X,{loadFile:1})}}function Xr(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=T("p"),n=k("Current milestone: "),l=k(t)},m(s,f){p(s,e,f),w(e,n),w(e,l)},p(s,f){var i;f&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&R(l,t)},d(s){s&&m(e)}}}function Fp(r){let e;return{c(){e=k("Show on map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ep(r){let e;return{c(){e=k("Edit scheme locally")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Dp(r){let e,n,t,l;return e=new Et({props:{$$slots:{default:[Fp]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Et({props:{$$slots:{default:[Ep]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,s){const f={};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function jp(r){var F,B,H,j;let e,n,t=r[0].scheme_reference+"",l,o,s,f,i=((F=r[0].browse)==null?void 0:F.authority_or_region)+"",a,u,c,d,$=((B=r[0].browse)==null?void 0:B.capital_scheme_id)+"",y,C,S,O,M=((H=r[0].browse)==null?void 0:H.funding_programme)+"",D,E,P,I,N,L=((j=r[0].browse)==null?void 0:j.current_milestone)&&Xr(r);return I=new Wl({props:{$$slots:{default:[Dp]},$$scope:{ctx:r}}}),{c(){e=T("p"),n=k("Scheme reference: "),l=k(t),o=A(),s=T("p"),f=k("Authority or region: "),a=k(i),u=A(),c=T("p"),d=k("Capital scheme ID: "),y=k($),C=A(),S=T("p"),O=k("Funding programme: "),D=k(M),E=A(),L&&L.c(),P=A(),h(I.$$.fragment)},m(U,Y){p(U,e,Y),w(e,n),w(e,l),p(U,o,Y),p(U,s,Y),w(s,f),w(s,a),p(U,u,Y),p(U,c,Y),w(c,d),w(c,y),p(U,C,Y),p(U,S,Y),w(S,O),w(S,D),p(U,E,Y),L&&L.m(U,Y),p(U,P,Y),b(I,U,Y),N=!0},p(U,Y){var Z,Ce,Pe,ae;(!N||Y&1)&&t!==(t=U[0].scheme_reference+"")&&R(l,t),(!N||Y&1)&&i!==(i=((Z=U[0].browse)==null?void 0:Z.authority_or_region)+"")&&R(a,i),(!N||Y&1)&&$!==($=((Ce=U[0].browse)==null?void 0:Ce.capital_scheme_id)+"")&&R(y,$),(!N||Y&1)&&M!==(M=((Pe=U[0].browse)==null?void 0:Pe.funding_programme)+"")&&R(D,M),(ae=U[0].browse)!=null&&ae.current_milestone?L?L.p(U,Y):(L=Xr(U),L.c(),L.m(P.parentNode,P)):L&&(L.d(1),L=null);const ne={};Y&32&&(ne.$$scope={dirty:Y,ctx:U}),I.$set(ne)},i(U){N||(_(I.$$.fragment,U),N=!0)},o(U){g(I.$$.fragment,U),N=!1},d(U){U&&(m(e),m(o),m(s),m(u),m(c),m(C),m(S),m(E),m(P)),L&&L.d(U),v(I,U)}}}function Rp(r){let e,n;return e=new Re({props:{label:`${r[0].scheme_name}`,$$slots:{default:[jp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_name}`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bp(r,e,n){let t,l;ve(r,Lt,i=>n(3,t=i)),ve(r,wn,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(Rl(i),{padding:20,animate:!1})}function f(){var u,c;let i={type:"FeatureCollection",features:t.features.filter(d=>d.properties.scheme_reference==o.scheme_reference)},a=((u=o.browse)==null?void 0:u.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,f]}class Hp extends J{constructor(e){super(),K(this,e,Bp,Rp,X,{scheme:0})}}function Yr(r){let e,n,t=Pn(r[0].length_meters)+"",l;return{c(){e=T("p"),n=k("Length: "),l=k(t)},m(o,s){p(o,e,s),w(e,n),w(e,l)},p(o,s){s&1&&t!==(t=Pn(o[0].length_meters)+"")&&R(l,t)},d(o){o&&m(e)}}}function Qr(r){let e,n=ot(r[0].description,r[2])+"";return{c(){e=T("p")},m(t,l){p(t,e,l),e.innerHTML=n},p(t,l){l&5&&n!==(n=ot(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&m(e)}}}function Jr(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=T("p"),n=k("Current milestone: "),l=k(t)},m(s,f){p(s,e,f),w(e,n),w(e,l)},p(s,f){var i;f&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&R(l,t)},d(s){s&&m(e)}}}function zp(r){var Ee,Te,Ue,xe;let e,n,t,l=ot(r[0].name,r[2])+"",o,s=r[0].intervention_type+"",f,i,a,u,c,d,$,y,C,S,O=ot(r[1].scheme_name??"",r[3])+"",M,D,E=ot(r[0].scheme_reference,r[3])+"",P,I,N,L,F=((Ee=r[1].browse)==null?void 0:Ee.authority_or_region)+"",B,H,j,U,Y=((Te=r[1].browse)==null?void 0:Te.capital_scheme_id)+"",ne,Z,Ce,Pe,ae=((Ue=r[1].browse)==null?void 0:Ue.funding_programme)+"",de,Ie,ue=r[0].length_meters&&Yr(r),pe=r[0].description&&Qr(r),me=((xe=r[1].browse)==null?void 0:xe.current_milestone)&&Jr(r);return{c(){e=T("div"),n=T("h2"),t=new Mt(!1),o=k(" ("),f=k(s),i=k(")"),a=A(),ue&&ue.c(),u=A(),pe&&pe.c(),c=A(),d=T("hr"),$=A(),y=T("p"),C=k("Part of scheme: "),S=new Mt(!1),M=k(" ("),D=new Mt(!1),P=k(")"),I=A(),N=T("p"),L=k("Authority or region: "),B=k(F),H=A(),j=T("p"),U=k("Capital scheme ID: "),ne=k(Y),Z=A(),Ce=T("p"),Pe=k("Funding programme: "),de=k(ae),Ie=A(),me&&me.c(),t.a=o,S.a=M,D.a=P,ke(e,"max-width","30vw")},m(le,he){p(le,e,he),w(e,n),t.m(l,n),w(n,o),w(n,f),w(n,i),w(e,a),ue&&ue.m(e,null),w(e,u),pe&&pe.m(e,null),w(e,c),w(e,d),w(e,$),w(e,y),w(y,C),S.m(O,y),w(y,M),D.m(E,y),w(y,P),w(e,I),w(e,N),w(N,L),w(N,B),w(e,H),w(e,j),w(j,U),w(j,ne),w(e,Z),w(e,Ce),w(Ce,Pe),w(Ce,de),w(e,Ie),me&&me.m(e,null)},p(le,[he]){var Cn,Tn,On,An;he&5&&l!==(l=ot(le[0].name,le[2])+"")&&t.p(l),he&1&&s!==(s=le[0].intervention_type+"")&&R(f,s),le[0].length_meters?ue?ue.p(le,he):(ue=Yr(le),ue.c(),ue.m(e,u)):ue&&(ue.d(1),ue=null),le[0].description?pe?pe.p(le,he):(pe=Qr(le),pe.c(),pe.m(e,c)):pe&&(pe.d(1),pe=null),he&10&&O!==(O=ot(le[1].scheme_name??"",le[3])+"")&&S.p(O),he&9&&E!==(E=ot(le[0].scheme_reference,le[3])+"")&&D.p(E),he&2&&F!==(F=((Cn=le[1].browse)==null?void 0:Cn.authority_or_region)+"")&&R(B,F),he&2&&Y!==(Y=((Tn=le[1].browse)==null?void 0:Tn.capital_scheme_id)+"")&&R(ne,Y),he&2&&ae!==(ae=((On=le[1].browse)==null?void 0:On.funding_programme)+"")&&R(de,ae),(An=le[1].browse)!=null&&An.current_milestone?me?me.p(le,he):(me=Jr(le),me.c(),me.m(e,null)):me&&(me.d(1),me=null)},i:re,o:re,d(le){le&&m(e),ue&&ue.d(),pe&&pe.d(),me&&me.d()}}}function ot(r,e){return e?r.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):r}function Up(r,e,n){let t,l,o,s;ve(r,xt,i=>n(4,l=i)),ve(r,Qt,i=>n(2,o=i)),ve(r,Jt,i=>n(3,s=i));let{props:f}=e;return r.$$set=i=>{"props"in i&&n(0,f=i.props)},r.$$.update=()=>{r.$$.dirty&17&&n(1,t=l.get(f.scheme_reference))},[f,t,o,s,l]}class Sn extends J{constructor(e){super(),K(this,e,Up,zp,X,{props:0})}}function Gp(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&m(e)}}}function qp(r){let e,n;return e=new Sn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wp(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Gp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[qp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Vp(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&m(e)}}}function Xp(r){let e,n;return e=new Sn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yp(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Vp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Xp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Qp(r){let e,n=r[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(l,o){p(l,e,o),w(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&m(e)}}}function Jp(r){let e,n;return e=new Sn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kp(r){let e,n,t,l;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Qp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Jp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Zp(r){let e,n,t,l,o,s,f,i,a,u;const c=[z("interventions-points"),{filter:["all",Nn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Kt,"circle-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let d={$$slots:{default:[Wp]},$$scope:{ctx:r}};for(let P=0;P<c.length;P+=1)d=ee(d,c[P]);e=new nt({props:d});const $=[z("interventions-lines"),{filter:["all",Mn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Pt,"line-opacity":x(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[Yp]},$$scope:{ctx:r}};for(let P=0;P<$.length;P+=1)y=ee(y,$[P]);t=new Se({props:y});const C=[z("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Pt,"circle-opacity":0,"circle-stroke-color":tt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let S={};for(let P=0;P<C.length;P+=1)S=ee(S,C[P]);o=new nt({props:S});const O=[z("interventions-polygons"),{filter:["all",Vt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":x(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let M={$$slots:{default:[Kp]},$$scope:{ctx:r}};for(let P=0;P<O.length;P+=1)M=ee(M,O[P]);f=new ze({props:M});const D=[z("interventions-polygons-outlines"),{filter:["all",Vt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Pt}},{layout:{visibility:r[0]?"visible":"none"}}];let E={};for(let P=0;P<D.length;P+=1)E=ee(E,D[P]);return a=new Se({props:E}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),s=A(),h(f.$$.fragment),i=A(),h(a.$$.fragment)},m(P,I){b(e,P,I),p(P,n,I),b(t,P,I),p(P,l,I),b(o,P,I),p(P,s,I),b(f,P,I),p(P,i,I),b(a,P,I),u=!0},p(P,I){const N=I&29?te(c,[c[0],I&24&&{filter:["all",Nn,P[3],P[4]]},c[2],c[3],I&4&&{paint:{"circle-color":P[2],"circle-radius":Kt,"circle-opacity":x(1,.5)}},I&1&&{layout:{visibility:P[0]?"visible":"none"}},c[6]]):{};I&128&&(N.$$scope={dirty:I,ctx:P}),e.$set(N);const L=I&13?te($,[$[0],I&8&&{filter:["all",Mn,P[3]]},$[2],$[3],I&4&&{paint:{"line-color":P[2],"line-width":Pt,"line-opacity":x(1,.5)}},I&1&&{layout:{visibility:P[0]?"visible":"none"}},$[6]]):{};I&128&&(L.$$scope={dirty:I,ctx:P}),t.$set(L);const F=I&1?te(C,[C[0],C[1],C[2],{layout:{visibility:P[0]?"visible":"none"}}]):{};o.$set(F);const B=I&13?te(O,[O[0],I&8&&{filter:["all",Vt,P[3]]},O[2],O[3],I&4&&{paint:{"fill-color":P[2],"fill-opacity":x(.2,.5)}},I&1&&{layout:{visibility:P[0]?"visible":"none"}},O[6]]):{};I&128&&(B.$$scope={dirty:I,ctx:P}),f.$set(B);const H=I&13?te(D,[D[0],I&8&&{filter:["all",Vt,P[3]]},I&4&&{paint:{"line-color":P[2],"line-opacity":.5,"line-width":.7*Pt}},I&1&&{layout:{visibility:P[0]?"visible":"none"}}]):{};a.$set(H)},i(P){u||(_(e.$$.fragment,P),_(t.$$.fragment,P),_(o.$$.fragment,P),_(f.$$.fragment,P),_(a.$$.fragment,P),u=!0)},o(P){g(e.$$.fragment,P),g(t.$$.fragment,P),g(o.$$.fragment,P),g(f.$$.fragment,P),g(a.$$.fragment,P),u=!1},d(P){P&&(m(n),m(l),m(s),m(i)),v(e,P),v(t,P),v(o,P),v(f,P),v(a,P)}}}function xp(r){let e,n;return e=new It({props:{data:r[1],$$slots:{default:[Zp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function em(r,e,n){let t,l;ve(r,Lt,a=>n(5,l=a));let{showSchemes:o}=e,[s]=Pl();const f=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=Bl(l))},[o,t,s,f,i,l]}class tm extends J{constructor(e){super(),K(this,e,em,xp,X,{showSchemes:0})}}function Kr(r,e,n){const t=r.slice();return t[13]=e[n],t}function Zr(r,e,n){const t=r.slice();return t[16]=e[n],t}function nm(r){let e,n;return e=new Mp({props:{loadFile:r[7]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:re,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xr(r){let e,n,t,l,o;e=new Et({props:{$$slots:{default:[rm]},$$scope:{ctx:r}}}),e.$on("click",r[8]);function s(i){r[9](i)}let f={title:"About this scheme data",$$slots:{default:[lm]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.open=r[3]),t=new ll({props:f}),q.push(()=>W(t,"open",s)),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(i,a){b(e,i,a),p(i,n,a),b(t,i,a),o=!0},p(i,a){const u={};a&524288&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!l&&a&8&&(l=!0,c.open=i[3],V(()=>l=!1)),t.$set(c)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&m(n),v(e,i),v(t,i)}}}function rm(r){let e;return{c(){e=k("About the scheme data")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function el(r){let e,n,t=r[16]+"",l;return{c(){e=T("li"),n=T("p"),l=k(t)},m(o,s){p(o,e,s),w(e,n),w(n,l)},p(o,s){s&16&&t!==(t=o[16]+"")&&R(l,t)},d(o){o&&m(e)}}}function lm(r){let e,n,t,l,o=Oe(r[4].notes),s=[];for(let f=0;f<o.length;f+=1)s[f]=el(Zr(r,o,f));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=A(),l=T("ul");for(let f=0;f<s.length;f+=1)s[f].c();G(e,"class","govuk-prose")},m(f,i){p(f,e,i),w(e,n),w(e,t),w(e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,null)},p(f,i){if(i&16){o=Oe(f[4].notes);let a;for(a=0;a<o.length;a+=1){const u=Zr(f,o,a);s[a]?s[a].p(u,i):(s[a]=el(u),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(f){f&&m(e),it(s,f)}}}function tl(r){let e,n,t,l;function o(i){r[10](i)}function s(i){r[11](i)}let f={};return r[1]!==void 0&&(f.schemesToBeShown=r[1]),r[2]!==void 0&&(f.show=r[2]),e=new Fi({props:f}),q.push(()=>W(e,"schemesToBeShown",o)),q.push(()=>W(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),l=!0},p(i,a){const u={};!n&&a&2&&(n=!0,u.schemesToBeShown=i[1],V(()=>n=!1)),!t&&a&4&&(t=!0,u.show=i[2],V(()=>t=!1)),e.$set(u)},i(i){l||(_(e.$$.fragment,i),l=!0)},o(i){g(e.$$.fragment,i),l=!1},d(i){v(e,i)}}}function nl(r){let e,n;return e=new Hp({props:{scheme:r[13]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rl(r){let e=r[1].has(r[13].scheme_reference),n,t,l=e&&nl(r);return{c(){l&&l.c(),n=Le()},m(o,s){l&&l.m(o,s),p(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?l?(l.p(o,s),s&66&&_(l,1)):(l=nl(o),l.c(),_(l,1),l.m(n.parentNode,n)):l&&(ce(),g(l,1,1,()=>{l=null}),$e())},i(o){t||(_(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l&&l.d(o)}}}function om(r){let e,n,t,l,o,s,f,i,a,u,c=$n()=="Private (development)",d,$,y,C,S,O,M,D,E;o=new Ql({props:{boundaryGeojson:r[4]}}),a=new Hl({});let P=c&&nm(r),I=r[4].notes&&xr(r);y=new Xl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),S=new $l({props:{errorMessage:r[0]}});let N=r[6].size>0&&tl(r),L=Oe(r[6].values()),F=[];for(let H=0;H<L.length;H+=1)F[H]=rl(Kr(r,L,H));const B=H=>g(F[H],1,1,()=>{F[H]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",l=A(),h(o.$$.fragment),s=A(),f=T("p"),f.textContent=`App version: ${$n()}`,i=A(),h(a.$$.fragment),u=A(),P&&P.c(),d=A(),I&&I.c(),$=A(),h(y.$$.fragment),C=A(),h(S.$$.fragment),O=A(),N&&N.c(),M=A(),D=T("ul");for(let H=0;H<F.length;H+=1)F[H].c();ke(n,"display","flex"),ke(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(H,j){p(H,e,j),w(e,n),w(n,t),w(n,l),b(o,n,null),w(e,s),w(e,f),w(e,i),b(a,e,null),w(e,u),P&&P.m(e,null),w(e,d),I&&I.m(e,null),w(e,$),b(y,e,null),w(e,C),b(S,e,null),w(e,O),N&&N.m(e,null),w(e,M),w(e,D);for(let U=0;U<F.length;U+=1)F[U]&&F[U].m(D,null);E=!0},p(H,j){const U={};j&16&&(U.boundaryGeojson=H[4]),o.$set(U),c&&P.p(H,j),H[4].notes?I?(I.p(H,j),j&16&&_(I,1)):(I=xr(H),I.c(),_(I,1),I.m(e,$)):I&&(ce(),g(I,1,1,()=>{I=null}),$e());const Y={};if(j&1&&(Y.errorMessage=H[0]),S.$set(Y),H[6].size>0?N?(N.p(H,j),j&64&&_(N,1)):(N=tl(H),N.c(),_(N,1),N.m(e,M)):N&&(ce(),g(N,1,1,()=>{N=null}),$e()),j&66){L=Oe(H[6].values());let ne;for(ne=0;ne<L.length;ne+=1){const Z=Kr(H,L,ne);F[ne]?(F[ne].p(Z,j),_(F[ne],1)):(F[ne]=rl(Z),F[ne].c(),_(F[ne],1),F[ne].m(D,null))}for(ce(),ne=L.length;ne<F.length;ne+=1)B(ne);$e()}},i(H){if(!E){_(o.$$.fragment,H),_(a.$$.fragment,H),_(P),_(I),_(y.$$.fragment,H),_(S.$$.fragment,H),_(N);for(let j=0;j<L.length;j+=1)_(F[j]);E=!0}},o(H){g(o.$$.fragment,H),g(a.$$.fragment,H),g(P),g(I),g(y.$$.fragment,H),g(S.$$.fragment,H),g(N),F=F.filter(Boolean);for(let j=0;j<F.length;j+=1)g(F[j]);E=!1},d(H){H&&m(e),v(o),v(a),P&&P.d(),I&&I.d(),v(y),v(S),N&&N.d(),it(F,H)}}}function sm(r){let e,n,t,l,o,s,f;return e=new Vl({}),t=new tm({props:{showSchemes:r[2]}}),s=new Ip({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),o=T("div"),h(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),p(i,n,a),b(t,i,a),p(i,l,a),p(i,o,a),b(s,o,null),f=!0},p(i,a){const u={};a&4&&(u.showSchemes=i[2]),t.$set(u)},i(i){f||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),f=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),f=!1},d(i){i&&(m(n),m(l),m(o)),v(e,i),v(t,i),v(s)}}}function im(r){let e,n,t;return n=new zl({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[sm]},$$scope:{ctx:r}}}),{c(){e=T("div"),h(n.$$.fragment),G(e,"slot","main")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.style=l[5]),o&524292&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function am(r){let e,n;return e=new Kl({props:{$$slots:{main:[im],sidebar:[om]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&524415&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fm(r,e,n){let t,l,o;ve(r,Lt,S=>n(4,t=S)),ve(r,Fn,S=>n(5,l=S)),ve(r,xt,S=>n(6,o=S)),kn(()=>{Ul()});const s=new URLSearchParams(window.location.search);Fn.set(s.get("style")||"dataviz");let f="",i=new Set,a=!0,u=!1;function c(S){try{Lt.set(JSON.parse(S)),xt.set(gi(t)),n(0,f="")}catch(O){n(0,f=`The file you loaded is broken: ${O}`)}}const d=()=>n(3,u=!0);function $(S){u=S,n(3,u)}function y(S){i=S,n(1,i)}function C(S){a=S,n(2,a)}return[f,i,a,u,t,l,o,c,d,$,y,C]}class um extends J{constructor(e){super(),K(this,e,fm,am,X,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new um({target:document.getElementById("app")});
