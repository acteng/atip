import{S as q,i as Y,s as V,C as ve,e as Z,l as Ze,a as te,d as g,f as E,g as D,x as Xe,D as Le,E as Ce,F as Se,t as L,h as T,j as P,r as W,K as Re,an as ln,Q as Ue,R as We,c as X,z as Be,m as p,T as Ve,k as x,q as ne,aj as Mt,at as De,af as je,a3 as re,a4 as tt,a5 as le,ag as he,b as Je,ao as pe,a2 as zt,au as Bn,u as ye,p as be,av as xe,A as Fe,aw as On,ak as bt,o as vt,ax as En,ap as Ie,ay as Lt,az as _t,L as Pn,B as He,aA as Rn,aB as kt,aC as yt,a8 as Hn,aD as Un,aE as Fn,ar as Gn,a6 as It}from"./stores-dc1f9b6e.js";import{_ as rn,W as jn,$ as Zn,I as Dn,j as Bt,G as Nn,H as Wn,E as Vn,M as Qn,S as fn,R as Kn}from"./files-0dda6c35.js";const sn=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function qn(o){let e,t,n,i,l,r,f;const s=o[3].default,a=ve(s,o,o[2],null);return{c(){e=Z("details"),t=Z("summary"),n=Z("span"),i=Ze(o[0]),l=te(),r=Z("div"),a&&a.c(),g(n,"class","govuk-details__summary-text"),g(t,"class","govuk-details__summary"),g(r,"class","govuk-details__text"),e.open=o[1],g(e,"class","govuk-details"),g(e,"data-module","govuk-details")},m(u,m){E(u,e,m),D(e,t),D(t,n),D(n,i),D(e,l),D(e,r),a&&a.m(r,null),f=!0},p(u,[m]){(!f||m&1)&&Xe(i,u[0]),a&&a.p&&(!f||m&4)&&Le(a,s,u,u[2],f?Se(s,u[2],m,null):Ce(u[2]),null),(!f||m&2)&&(e.open=u[1])},i(u){f||(L(a,u),f=!0)},o(u){T(a,u),f=!1},d(u){u&&P(e),a&&a.d(u)}}}function Yn(o,e,t){let{$$slots:n={},$$scope:i}=e,{label:l}=e,{open:r=!1}=e;return o.$$set=f=>{"label"in f&&t(0,l=f.label),"open"in f&&t(1,r=f.open),"$$scope"in f&&t(2,i=f.$$scope)},[l,r,i,n]}class Jn extends q{constructor(e){super(),Y(this,e,Yn,qn,V,{label:0,open:1})}}function Xn(o){let e;return{c(){e=Z("div"),e.innerHTML=`<p class="govuk-phase-banner__content"><strong class="govuk-tag govuk-phase-banner__content__tag">Alpha</strong> <span class="govuk-phase-banner__text">This is a new service. Contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      with any feedback.</span></p>`,g(e,"class","govuk-phase-banner")},m(t,n){E(t,e,n)},p:W,i:W,o:W,d(t){t&&P(e)}}}class hl extends q{constructor(e){super(),Y(this,e,null,Xn,V,{})}}const rt=Re(""),wt=Re(null);async function pn(o){let e=ln(wt);if(!o||!e)return"Google (attributions loading)";let[t,n]=e,i=o.getBounds(),l=`https://tile.googleapis.com/tile/v1/viewport?session=${n}&key=${t}&zoom=${Math.floor(o.getZoom())}&north=${i.getNorth()}&south=${i.getSouth()}&east=${i.getEast()}&west=${i.getWest()}`;return(await(await fetch(l)).json()).copyright}function xn(){let o=[];return rn()=="Private (development)"&&(o=o.concat([["google","Google satellite"],["Road","OS Road"],["Light","OS Light"],["Outdoor","OS Outdoor"],["bluesky","Bluesky Satellite (12.5cm)"]])),o.concat([["streets","MapTiler Streets"],["hybrid","MapTiler Satellite"],["dataviz","MapTiler Dataviz"],["uk-openzoomstack-light","OS Open Zoomstack"]])}async function Ot(o){if(wt.set(null),o=="streets"||o=="hybrid"||o=="dataviz"||o=="uk-openzoomstack-light")return rt.set("&copy; MapTiler &copy; OpenStreetMap contributors"),`https://api.maptiler.com/maps/${o}/style.json?key=MZEJTanw3WpxRvt7qDfo`;let t=await(await fetch(`${jn()}/api_keys.json`)).json(),n,i;if(o=="google"){let l=t.google,r=await $n(l);n=`https://tile.googleapis.com/v1/2dtiles/{z}/{x}/{y}?session=${r}&key=${l}`,i="Google (attributions loading)",wt.set([l,r])}else o=="bluesky"?(n=`https://ogc.apps.midgard.airbusds-cint.com/apgb/wmts/rest/apgb:AP-12CM5-GB-LATEST/default/EPSG-3857/EPSG:3857:{z}/{y}/{x}?GUID=${t.bluesky}&format=image/png&TRANSPARENT=FALSE,`,i="Bluesky"):(n=`https://api.os.uk/maps/raster/v1/zxy/${o}_3857/{z}/{x}/{y}.png?key=${t.ordnance_survey}`,i="Contains OS data &copy; Crown copyright and database rights 2023");return rt.set(i),{version:8,sources:{"raster-tiles":{type:"raster",tiles:[n],tileSize:256,attribution:i}},layers:[{id:"raster-basemap",type:"raster",source:"raster-tiles"}],glyphs:"https://api.maptiler.com/fonts/{fontstack}/{range}.pbf?key=MZEJTanw3WpxRvt7qDfo"}}async function $n(o){try{let t=await(await fetch(`https://tile.googleapis.com/v1/createSession?key=${o}`,{method:"POST",body:JSON.stringify({mapType:"satellite",language:"en-GB",region:"GB"})})).json();return"session"in t?t.session:(console.error(`Couldn't get Google tile session key: ${JSON.stringify(t)}`),"")}catch(e){return console.error(`Couldn't get Google tile session key: ${e}`),""}}const _l=["==",["geometry-type"],"Polygon"],yl=["==",["geometry-type"],"LineString"],bl=["==",["geometry-type"],"Point"];function kl(){return{type:"FeatureCollection",features:[]}}function wl(o,e,t){let n=["match",o];for(let[i,l]of Object.entries(e))n.push(i),n.push(l);return n.push(t),n}function vl(o){return Zn(o)}function Ll(o){var t,n;let e={type:"FeatureCollection",features:[]};for(let i of o.features)if(e.features.push(i),i.geometry.type=="LineString"&&!((t=i.properties)!=null&&t.hide_while_editing))for(let l of[i.geometry.coordinates[0],i.geometry.coordinates[i.geometry.coordinates.length-1]])e.features.push({type:"Feature",properties:{endpoint:!0,scheme_reference:(n=i.properties)==null?void 0:n.scheme_reference},geometry:{type:"Point",coordinates:l}});return e}function Et(o){let e;return{c(){e=Z("p"),e.innerHTML=`Google <a href="https://cloud.google.com/maps-platform/terms/" target="_blank">Terms of Use</a>
    and
    <a href="https://www.google.com/policies/privacy/" target="_blank">Privacy Policy</a>`},m(t,n){E(t,e,n)},d(t){t&&P(e)}}}function eo(o){let e,t,n,i,l;function r(a){o[2](a)}let f={label:"Basemap",choices:xn(),disabled:o[0]};o[1]!==void 0&&(f.value=o[1]),e=new Dn({props:f}),Ue.push(()=>We(e,"value",r));let s=o[1]=="google"&&Et();return{c(){X(e.$$.fragment),n=te(),s&&s.c(),i=Be()},m(a,u){p(e,a,u),E(a,n,u),s&&s.m(a,u),E(a,i,u),l=!0},p(a,[u]){const m={};u&1&&(m.disabled=a[0]),!t&&u&2&&(t=!0,m.value=a[1],Ve(()=>t=!1)),e.$set(m),a[1]=="google"?s||(s=Et(),s.c(),s.m(i.parentNode,i)):s&&(s.d(1),s=null)},i(a){l||(L(e.$$.fragment,a),l=!0)},o(a){T(e.$$.fragment,a),l=!1},d(a){a&&(P(n),P(i)),x(e,a),s&&s.d(a)}}}function to(o,e,t){let n;ne(o,Mt,r=>t(1,n=r));let{disabled:i=!1}=e;function l(r){n=r,Mt.set(n)}return o.$$set=r=>{"disabled"in r&&t(0,i=r.disabled)},[i,n,l]}class Cl extends q{constructor(e){super(),Y(this,e,to,eo,V,{disabled:0})}}function no(o){let e,t;const n=o[2].default,i=ve(n,o,o[1],null);return{c(){e=Z("a"),i&&i.c(),g(e,"href",o[0]),g(e,"target","_blank"),g(e,"rel","noreferrer")},m(l,r){E(l,e,r),i&&i.m(e,null),t=!0},p(l,[r]){i&&i.p&&(!t||r&2)&&Le(i,n,l,l[1],t?Se(n,l[1],r,null):Ce(l[1]),null),(!t||r&1)&&g(e,"href",l[0])},i(l){t||(L(i,l),t=!0)},o(l){T(i,l),t=!1},d(l){l&&P(e),i&&i.d(l)}}}function oo(o,e,t){let{$$slots:n={},$$scope:i}=e,{href:l}=e;return o.$$set=r=>{"href"in r&&t(0,l=r.href),"$$scope"in r&&t(1,i=r.$$scope)},[l,i,n]}class Sl extends q{constructor(e){super(),Y(this,e,oo,no,V,{href:0})}}function io(o){let e,t;return{c(){e=De("svg"),t=De("path"),g(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),g(e,"viewBox","0 0 14 14"),g(e,"width","13"),g(e,"height","13"),g(e,"class","svelte-en2qvf")},m(n,i){E(n,e,i),D(e,t)},p:W,i:W,o:W,d(n){n&&P(e)}}}class un extends q{constructor(e){super(),Y(this,e,null,io,V,{})}}function lo(o){let e,t;return{c(){e=De("svg"),t=De("path"),g(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),g(e,"viewBox","0 0 30 30"),g(e,"fill","none"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"class","svelte-d2loi5")},m(n,i){E(n,e,i),D(e,t)},p:W,i:W,o:W,d(n){n&&P(e)}}}class an extends q{constructor(e){super(),Y(this,e,null,lo,V,{})}}function ro(o){let e,t;return{c(){e=Z("img"),he(e.src,t=o[3]+"area.svg")||g(e,"src",t),g(e,"alt",o[6]),g(e,"class","svelte-ltkwvy")},m(n,i){E(n,e,i)},p(n,i){i&8&&!he(e.src,t=n[3]+"area.svg")&&g(e,"src",t),i&64&&g(e,"alt",n[6])},d(n){n&&P(e)}}}function fo(o){let e,t;return{c(){e=Z("img"),he(e.src,t=o[3]+"reverse.svg")||g(e,"src",t),g(e,"alt",o[6]),g(e,"class","svelte-ltkwvy")},m(n,i){E(n,e,i)},p(n,i){i&8&&!he(e.src,t=n[3]+"reverse.svg")&&g(e,"src",t),i&64&&g(e,"alt",n[6])},d(n){n&&P(e)}}}function so(o){let e,t;return{c(){e=Z("img"),he(e.src,t=o[3]+"poi.svg")||g(e,"src",t),g(e,"alt",o[6]),g(e,"class","svelte-ltkwvy")},m(n,i){E(n,e,i)},p(n,i){i&8&&!he(e.src,t=n[3]+"poi.svg")&&g(e,"src",t),i&64&&g(e,"alt",n[6])},d(n){n&&P(e)}}}function uo(o){let e,t;return{c(){e=Z("img"),he(e.src,t=o[3]+"postal_code.svg")||g(e,"src",t),g(e,"alt",o[6]),g(e,"class","svelte-ltkwvy")},m(n,i){E(n,e,i)},p(n,i){i&8&&!he(e.src,t=n[3]+"postal_code.svg")&&g(e,"src",t),i&64&&g(e,"alt",n[6])},d(n){n&&P(e)}}}function ao(o){let e,t;return{c(){e=Z("img"),he(e.src,t=o[3]+"street.svg")||g(e,"src",t),g(e,"alt",o[6]),g(e,"class","svelte-ltkwvy")},m(n,i){E(n,e,i)},p(n,i){i&8&&!he(e.src,t=n[3]+"street.svg")&&g(e,"src",t),i&64&&g(e,"alt",n[6])},d(n){n&&P(e)}}}function co(o){let e,t;return{c(){e=Z("img"),he(e.src,t=o[3]+"road.svg")||g(e,"src",t),g(e,"alt",o[6]),g(e,"class","svelte-ltkwvy")},m(n,i){E(n,e,i)},p(n,i){i&8&&!he(e.src,t=n[3]+"road.svg")&&g(e,"src",t),i&64&&g(e,"alt",n[6])},d(n){n&&P(e)}}}function mo(o){let e,t;return{c(){e=Z("img"),he(e.src,t=o[3]+"housenumber.svg")||g(e,"src",t),g(e,"alt",o[6]),g(e,"class","svelte-ltkwvy")},m(n,i){E(n,e,i)},p(n,i){i&8&&!he(e.src,t=n[3]+"housenumber.svg")&&g(e,"src",t),i&64&&g(e,"alt",n[6])},d(n){n&&P(e)}}}function go(o){let e,t,n,i;return{c(){e=Z("img"),he(e.src,t=o[5])||g(e,"src",t),g(e,"alt",o[4]),g(e,"class","svelte-ltkwvy")},m(l,r){E(l,e,r),n||(i=re(e,"error",o[14]),n=!0)},p(l,r){r&32&&!he(e.src,t=l[5])&&g(e,"src",t),r&16&&g(e,"alt",l[4])},d(l){l&&P(e),n=!1,i()}}}function Pt(o){let e,t;return{c(){e=Z("span"),t=Ze(o[6]),g(e,"class","secondary svelte-ltkwvy")},m(n,i){E(n,e,i),D(e,t)},p(n,i){i&64&&Xe(t,n[6])},d(n){n&&P(e)}}}function ho(o){var U,A;let e,t,n,i,l,r,f,s,a=(o[7]?o[0].place_name:o[0].place_name.replace(/,.*/,""))+"",u,m,k=o[2]==="always"||o[2]&&!o[0].address&&((U=o[0].properties)==null?void 0:U.kind)!=="road"&&((A=o[0].properties)==null?void 0:A.kind)!=="road_relation"&&!o[0].id.startsWith("address.")&&!o[0].id.startsWith("postal_code.")&&(!o[0].id.startsWith("poi.")||!o[5])&&!o[7],I,_,O=(o[7]?"":o[0].place_name.replace(/[^,]*,?\s*/,""))+"",b,M,j;function C(z,R){var y,v;return R&1&&(t=null),R&1&&(n=null),R&1&&(i=null),z[5]?go:z[0].address?mo:((y=z[0].properties)==null?void 0:y.kind)==="road"||((v=z[0].properties)==null?void 0:v.kind)==="road_relation"?co:(t==null&&(t=!!z[0].id.startsWith("address.")),t?ao:(n==null&&(n=!!z[0].id.startsWith("postal_code.")),n?uo:(i==null&&(i=!!z[0].id.startsWith("poi.")),i?so:z[7]?fo:ro)))}let H=C(o,-1),S=H(o),G=k&&Pt(o);return{c(){e=Z("li"),S.c(),l=te(),r=Z("span"),f=Z("span"),s=Z("span"),u=Ze(a),m=te(),G&&G.c(),I=te(),_=Z("span"),b=Ze(O),g(s,"class","primary svelte-ltkwvy"),g(f,"class","svelte-ltkwvy"),g(_,"class","line2 svelte-ltkwvy"),g(r,"class","texts svelte-ltkwvy"),g(e,"tabindex","0"),g(e,"data-selected",o[1]),g(e,"class","svelte-ltkwvy"),je(e,"selected",o[1])},m(z,R){E(z,e,R),S.m(e,null),D(e,l),D(e,r),D(r,f),D(f,s),D(s,u),D(f,m),G&&G.m(f,null),D(r,I),D(r,_),D(_,b),M||(j=[re(e,"mouseenter",o[12]),re(e,"focus",o[13])],M=!0)},p(z,[R]){var y,v;H===(H=C(z,R))&&S?S.p(z,R):(S.d(1),S=H(z),S&&(S.c(),S.m(e,l))),R&1&&a!==(a=(z[7]?z[0].place_name:z[0].place_name.replace(/,.*/,""))+"")&&Xe(u,a),R&37&&(k=z[2]==="always"||z[2]&&!z[0].address&&((y=z[0].properties)==null?void 0:y.kind)!=="road"&&((v=z[0].properties)==null?void 0:v.kind)!=="road_relation"&&!z[0].id.startsWith("address.")&&!z[0].id.startsWith("postal_code.")&&(!z[0].id.startsWith("poi.")||!z[5])&&!z[7]),k?G?G.p(z,R):(G=Pt(z),G.c(),G.m(f,null)):G&&(G.d(1),G=null),R&1&&O!==(O=(z[7]?"":z[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&Xe(b,O),R&2&&g(e,"data-selected",z[1]),R&2&&je(e,"selected",z[1])},i:W,o:W,d(z){z&&P(e),S.d(),G&&G.d(),M=!1,tt(j)}}}function _o(o,e,t){var C;let n,i,{feature:l}=e,{selected:r=!1}=e,{showPlaceType:f}=e,{missingIconsCache:s}=e,{iconsBaseUrl:a}=e;const u=(C=l.properties)==null?void 0:C.categories;let m,k,I=0,_=l.place_type[0]==="reverse";function O(H){k&&s.add(k),t(10,I++,I)}function b(H){le.call(this,o,H)}function M(H){le.call(this,o,H)}const j=H=>O(H.currentTarget);return o.$$set=H=>{"feature"in H&&t(0,l=H.feature),"selected"in H&&t(1,r=H.selected),"showPlaceType"in H&&t(2,f=H.showPlaceType),"missingIconsCache"in H&&t(9,s=H.missingIconsCache),"iconsBaseUrl"in H&&t(3,a=H.iconsBaseUrl)},o.$$.update=()=>{var H,S,G,U;if(o.$$.dirty&3640)do t(11,n--,n),t(4,m=u==null?void 0:u[n]),t(5,k=m?a+m.replace(/ /g,"_")+".svg":void 0);while(n>-1&&(!k||s.has(k)));o.$$.dirty&1&&t(6,i=l.id.startsWith("poi.")?(S=(H=l.properties)==null?void 0:H.categories)==null?void 0:S.join(", "):((U=(G=l.properties)==null?void 0:G.place_type_name)==null?void 0:U[0])??l.place_type[0])},t(11,n=(u==null?void 0:u.length)??0),[l,r,f,a,m,k,i,_,O,s,I,n,b,M,j]}class yo extends q{constructor(e){super(),Y(this,e,_o,ho,V,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function bo(o){let e;return{c(){e=Z("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',g(e,"class","svelte-7cmwmc")},m(t,n){E(t,e,n)},p:W,i:W,o:W,d(t){t&&P(e)}}}class ko extends q{constructor(e){super(),Y(this,e,null,bo,V,{})}}function wo(o){let e,t;return{c(){e=De("svg"),t=De("path"),g(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),g(e,"viewBox","0 0 60.006 21.412"),g(e,"width","14"),g(e,"height","20"),g(e,"class","svelte-en2qvf")},m(n,i){E(n,e,i),D(e,t)},p:W,i:W,o:W,d(n){n&&P(e)}}}class vo extends q{constructor(e){super(),Y(this,e,null,wo,V,{})}}function Lo(o){let e,t,n;return{c(){e=De("svg"),t=De("circle"),n=De("path"),g(t,"cx","4.789"),g(t,"cy","4.787"),g(t,"r","3.85"),Je(t,"stroke-width","1.875"),Je(t,"fill","none"),g(n,"d","M12.063 12.063 7.635 7.635"),Je(n,"stroke-width","1.875"),Je(n,"stroke-linecap","round"),g(e,"xmlns","http://www.w3.org/2000/svg"),g(e,"width","13"),g(e,"height","13"),g(e,"viewBox","0 0 13 13"),g(e,"class","svelte-1bpbt60")},m(i,l){E(i,e,l),D(e,t),D(e,n)},p:W,i:W,o:W,d(i){i&&P(e)}}}class Co extends q{constructor(e){super(),Y(this,e,null,Lo,V,{})}}function So(o,e,t){const n=e[1],i=e[0],l=n-i;return o===n&&t?o:((o-i)%l+l)%l+i}function Rt(o){const e=[...o];return e[2]<e[0]&&(e[2]+=360),e}let et;async function Ao(o,e,t){const n=o==null?void 0:o.getCenterAndZoom();for(const i of e??[])if(!(n&&(i.minZoom!=null&&i.minZoom>n[0]||i.maxZoom!=null&&i.maxZoom<n[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(et&&i.cachedLocationExpiry&&et.time+i.cachedLocationExpiry>Date.now()){if(!et.coords)break e;return et.coords}let l;try{return l=await new Promise((r,f)=>{t.signal.addEventListener("abort",()=>{f(Error("aborted"))}),navigator.geolocation.getCurrentPosition(s=>{r([s.coords.longitude,s.coords.latitude].map(a=>a.toFixed(6)).join(","))},s=>{f(s)},i)}),l}catch{}finally{i.cachedLocationExpiry&&(et={time:Date.now(),coords:l})}if(t.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(n&&i.type==="map-center")return n[1].toFixed(6)+","+n[2].toFixed(6)}}function Ht(o,e,t){const n=o.slice();return n[81]=e[t],n[83]=t,n}function Ut(o){let e,t;return e=new ko({}),{c(){X(e.$$.fragment)},m(n,i){p(e,n,i),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){x(e,n)}}}function Ft(o){let e,t,n,i,l;return t=new vo({}),{c(){e=Z("button"),X(t.$$.fragment),g(e,"type","button"),g(e,"title",o[9]),g(e,"class","svelte-zh3kmv"),je(e,"active",o[0])},m(r,f){E(r,e,f),p(t,e,null),n=!0,i||(l=re(e,"click",o[67]),i=!0)},p(r,f){(!n||f[0]&512)&&g(e,"title",r[9]),(!n||f[0]&1)&&je(e,"active",r[0])},i(r){n||(L(t.$$.fragment,r),n=!0)},o(r){T(t.$$.fragment,r),n=!1},d(r){r&&P(e),x(t),i=!1,l()}}}function To(o){let e,t=[],n=new Map,i,l,r,f=Bt(o[14]);const s=a=>a[81].id+(a[81].address?","+a[81].address:"");for(let a=0;a<f.length;a+=1){let u=Ht(o,f,a),m=s(u);n.set(m,t[a]=Gt(m,u))}return{c(){e=Z("ul");for(let a=0;a<t.length;a+=1)t[a].c();g(e,"class","svelte-zh3kmv")},m(a,u){E(a,e,u);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);i=!0,l||(r=[re(e,"mouseleave",o[71]),re(e,"blur",o[72])],l=!0)},p(a,u){u[0]&17880064&&(f=Bt(a[14]),ye(),t=Nn(t,u,s,1,a,f,n,e,Wn,Gt,null,Ht),be())},i(a){if(!i){for(let u=0;u<f.length;u+=1)L(t[u]);i=!0}},o(a){for(let u=0;u<t.length;u+=1)T(t[u]);i=!1},d(a){a&&P(e);for(let u=0;u<t.length;u+=1)t[u].d();l=!1,tt(r)}}}function Mo(o){let e,t,n,i,l,r;return t=new an({}),{c(){e=Z("div"),X(t.$$.fragment),n=te(),i=Z("div"),l=Ze(o[7]),g(i,"class","svelte-zh3kmv"),g(e,"class","no-results svelte-zh3kmv")},m(f,s){E(f,e,s),p(t,e,null),D(e,n),D(e,i),D(i,l),r=!0},p(f,s){(!r||s[0]&128)&&Xe(l,f[7])},i(f){r||(L(t.$$.fragment,f),r=!0)},o(f){T(t.$$.fragment,f),r=!1},d(f){f&&P(e),x(t)}}}function zo(o){let e="",t;return{c(){t=Ze(e)},m(n,i){E(n,t,i)},p:W,i:W,o:W,d(n){n&&P(t)}}}function Io(o){let e,t,n,i,l,r,f,s,a,u,m;return t=new an({}),s=new un({}),{c(){e=Z("div"),X(t.$$.fragment),n=te(),i=Z("div"),l=Ze(o[6]),r=te(),f=Z("button"),X(s.$$.fragment),g(i,"class","svelte-zh3kmv"),g(f,"class","svelte-zh3kmv"),g(e,"class","error svelte-zh3kmv")},m(k,I){E(k,e,I),p(t,e,null),D(e,n),D(e,i),D(i,l),D(e,r),D(e,f),p(s,f,null),a=!0,u||(m=re(f,"click",o[68]),u=!0)},p(k,I){(!a||I[0]&64)&&Xe(l,k[6])},i(k){a||(L(t.$$.fragment,k),L(s.$$.fragment,k),a=!0)},o(k){T(t.$$.fragment,k),T(s.$$.fragment,k),a=!1},d(k){k&&P(e),x(t),x(s),u=!1,m()}}}function Gt(o,e){let t,n,i;function l(){return e[69](e[83])}function r(){return e[70](e[81])}return n=new yo({props:{feature:e[81],showPlaceType:e[10],selected:e[15]===e[83],missingIconsCache:e[20],iconsBaseUrl:e[12]}}),n.$on("mouseenter",l),n.$on("focus",r),{key:o,first:null,c(){t=Be(),X(n.$$.fragment),this.first=t},m(f,s){E(f,t,s),p(n,f,s),i=!0},p(f,s){e=f;const a={};s[0]&16384&&(a.feature=e[81]),s[0]&1024&&(a.showPlaceType=e[10]),s[0]&49152&&(a.selected=e[15]===e[83]),s[0]&4096&&(a.iconsBaseUrl=e[12]),n.$set(a)},i(f){i||(L(n.$$.fragment,f),i=!0)},o(f){T(n.$$.fragment,f),i=!1},d(f){f&&P(t),x(n,f)}}}function Bo(o){let e,t,n,i,l,r,f,s,a,u,m,k,I,_,O,b,M,j,C,H,S,G=!1;l=new Co({}),m=new un({});let U=o[19]&&Ut(),A=o[5]===!0&&Ft(o);const z=o[59].default,R=ve(z,o,o[58],null),y=[Io,zo,Mo,To],v=[];function fe(F,N){var J,w;return F[18]?0:F[16]?((J=F[14])==null?void 0:J.length)===0?2:F[16]&&((w=F[14])!=null&&w.length)?3:-1:1}return~(b=fe(o))&&(M=v[b]=y[b](o)),{c(){e=te(),t=Z("form"),n=Z("div"),i=Z("button"),X(l.$$.fragment),r=te(),f=Z("input"),s=te(),a=Z("div"),u=Z("button"),X(m.$$.fragment),k=te(),U&&U.c(),I=te(),A&&A.c(),_=te(),R&&R.c(),O=te(),M&&M.c(),g(i,"class","search-button svelte-zh3kmv"),g(i,"type","button"),g(f,"placeholder",o[8]),g(f,"aria-label",o[8]),g(f,"class","svelte-zh3kmv"),g(u,"type","button"),g(u,"title",o[3]),g(u,"class","svelte-zh3kmv"),g(a,"class","clear-button-container svelte-zh3kmv"),je(a,"displayable",o[1]!==""),g(n,"class","input-group svelte-zh3kmv"),g(t,"tabindex","0"),g(t,"class",j=pe(o[2])+" svelte-zh3kmv"),je(t,"can-collapse",o[4]&&o[1]==="")},m(F,N){E(F,e,N),E(F,t,N),D(t,n),D(n,i),p(l,i,null),D(n,r),D(n,f),o[61](f),zt(f,o[1]),D(n,s),D(n,a),D(a,u),p(m,u,null),D(a,k),U&&U.m(a,null),D(n,I),A&&A.m(n,null),D(n,_),R&&R.m(n,null),D(t,O),~b&&v[b].m(t,null),C=!0,H||(S=[re(i,"click",o[60]),re(f,"input",o[62]),re(f,"focus",o[63]),re(f,"blur",o[64]),re(f,"keydown",o[22]),re(f,"input",o[65]),re(u,"click",o[66]),re(t,"submit",Bn(o[21]))],H=!0)},p(F,N){(!C||N[0]&256)&&g(f,"placeholder",F[8]),(!C||N[0]&256)&&g(f,"aria-label",F[8]),N[0]&2&&f.value!==F[1]&&zt(f,F[1]),(!C||N[0]&8)&&g(u,"title",F[3]),F[19]?U?N[0]&524288&&L(U,1):(U=Ut(),U.c(),L(U,1),U.m(a,null)):U&&(ye(),T(U,1,1,()=>{U=null}),be()),(!C||N[0]&2)&&je(a,"displayable",F[1]!==""),F[5]===!0?A?(A.p(F,N),N[0]&32&&L(A,1)):(A=Ft(F),A.c(),L(A,1),A.m(n,_)):A&&(ye(),T(A,1,1,()=>{A=null}),be()),R&&R.p&&(!C||N[1]&134217728)&&Le(R,z,F,F[58],C?Se(z,F[58],N,null):Ce(F[58]),null);let J=b;b=fe(F),b===J?~b&&v[b].p(F,N):(M&&(ye(),T(v[J],1,1,()=>{v[J]=null}),be()),~b?(M=v[b],M?M.p(F,N):(M=v[b]=y[b](F),M.c()),L(M,1),M.m(t,null)):M=null),(!C||N[0]&4&&j!==(j=pe(F[2])+" svelte-zh3kmv"))&&g(t,"class",j),(!C||N[0]&22)&&je(t,"can-collapse",F[4]&&F[1]==="")},i(F){C||(L(G),L(l.$$.fragment,F),L(m.$$.fragment,F),L(U),L(A),L(R,F),L(M),C=!0)},o(F){T(G),T(l.$$.fragment,F),T(m.$$.fragment,F),T(U),T(A),T(R,F),T(M),C=!1},d(F){F&&(P(e),P(t)),x(l),o[61](null),x(m),U&&U.d(),A&&A.d(),R&&R.d(F),~b&&v[b].d(),H=!1,tt(S)}}}function Oo(o,e,t){let n,{$$slots:i={},$$scope:l}=e,{class:r=void 0}=e,{apiKey:f}=e,{bbox:s=void 0}=e,{clearButtonTitle:a="clear"}=e,{clearOnBlur:u=!1}=e,{collapsed:m=!1}=e,{country:k=void 0}=e,{debounceSearch:I=200}=e,{enableReverse:_=!1}=e,{errorMessage:O="Something went wrongâ€¦"}=e,{filter:b=()=>!0}=e,{flyTo:M=!0}=e,{fuzzyMatch:j=!0}=e,{language:C=void 0}=e,{limit:H=void 0}=e,{mapController:S=void 0}=e,{minLength:G=2}=e,{noResultsMessage:U="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:A="Search"}=e,{proximity:z=[{type:"server-geolocation"}]}=e,{reverseActive:R=_==="always"}=e,{reverseButtonTitle:y="toggle reverse geocoding"}=e,{searchValue:v=""}=e,{showFullGeometry:fe=!0}=e,{showPlaceType:F="ifNeeded"}=e,{showResultsWhileTyping:N=!0}=e,{selectFirst:J=!0}=e,{flyToSelected:w=!1}=e,{markerOnSelected:oe=!0}=e,{types:$=void 0}=e,{excludeTypes:ee=!1}=e,{zoom:_e=16}=e,{maxZoom:ie=18}=e,{apiUrl:se="https://api.maptiler.com/geocoding"}=e,{fetchParameters:de={}}=e,{iconsBaseUrl:ge="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.3/icons/"}=e,{adjustUrlQuery:ue=h=>{}}=e;function ke(){ce.focus()}function Oe(){ce.blur()}function Ge(h,me=!0,ze=!1){t(1,v=h),me?(t(15,Q=-1),Tt()):(mt(!ze,ze),setTimeout(()=>{ce.focus(),ce.select()}))}function Ae(){t(14,c=void 0),t(55,B=void 0),t(15,Q=-1)}function we(){t(54,d=[]),t(55,B=void 0)}let Te=!1,c,d,B,ae="",ce,Q=-1,Me,nt=[],Qe,qe,ot,ut;const dn=new Set,Ne=xe();Fe(()=>{S&&(S.setEventHandler(void 0),S.indicateReverse(!1),S.setSelectedMarker(-1),S.setMarkers(void 0,void 0))});function Tt(h){if(qe&&(clearTimeout(qe),qe=void 0),Q>-1&&c)t(55,B=c[Q]),t(1,v=B.place_type[0]==="reverse"?B.place_name:B.place_name.replace(/,.*/,"")),t(18,Me=void 0),t(54,d=void 0),t(15,Q=-1);else if(v){const me=h||!at(v);ct(v,{exact:!0}).then(()=>{t(54,d=c),t(55,B=void 0),me&&gn()}).catch(ze=>t(18,Me=ze))}}function at(h){try{return On(h,6)}catch{return!1}}async function ct(h,{byId:me=!1,exact:ze=!1}={}){t(18,Me=void 0),Qe==null||Qe.abort();const Ee=new AbortController;t(19,Qe=Ee);try{const K=at(h),Pe=new URLSearchParams;if(C!==void 0&&Pe.set("language",Array.isArray(C)?C.join(","):C??""),$&&Pe.set("types",$.join(",")),ee&&Pe.set("excludeTypes",String(ee)),s&&Pe.set("bbox",s.map(lt=>lt.toFixed(6)).join(",")),k&&Pe.set("country",Array.isArray(k)?k.join(","):k),!me&&!K){const lt=await Ao(S,z,Ee);lt&&Pe.set("proximity",lt),(ze||!N)&&Pe.set("autocomplete","false"),Pe.set("fuzzyMatch",String(j))}H!==void 0&&(!K||($==null?void 0:$.length)===1)&&Pe.set("limit",String(H)),Pe.set("key",f),ue(Pe);const it=se+"/"+encodeURIComponent(K?K.decimalLongitude+","+K.decimalLatitude:h)+".json?"+Pe.toString();if(it===ae){me?(t(14,c=void 0),t(55,B=nt[0])):t(14,c=nt);return}ae=it;const gt=await fetch(it,{signal:Ee.signal,...de});if(!gt.ok)throw new Error(await gt.text());const ht=await gt.json();Ne("response",{url:it,featureCollection:ht}),me?(t(14,c=void 0),t(55,B=ht.features[0]),nt=[B]):(t(14,c=ht.features.filter(b)),K&&c.unshift({type:"Feature",properties:{},id:"reverse_"+K.decimalLongitude+"_"+K.decimalLatitude,text:K.decimalLatitude+", "+K.decimalLongitude,place_name:K.decimalLatitude+", "+K.decimalLongitude,place_type:["reverse"],center:[K.decimalLongitude,K.decimalLatitude],bbox:[K.decimalLongitude,K.decimalLatitude,K.decimalLongitude,K.decimalLatitude],geometry:{type:"Point",coordinates:[K.decimalLongitude,K.decimalLatitude]}}),nt=c,K&&ce.focus())}catch(K){if(K&&typeof K=="object"&&"name"in K&&K.name==="AbortError")return;throw K}finally{Ee===Qe&&t(19,Qe=void 0)}}function gn(){var ze;if(!(d!=null&&d.length)||!M)return;const h=[180,90,-180,-90],me=!d.some(Ee=>!Ee.matching_text);for(const Ee of d)if(me||!Ee.matching_text)for(const K of[0,1,2,3])h[K]=Math[K<2?"min":"max"](h[K],((ze=Ee.bbox)==null?void 0:ze[K])??Ee.center[K%2]);S&&d.length>0&&(B&&h[0]===h[2]&&h[1]===h[3]?S.flyTo(B.center,_e):S.fitBounds(Rt(h),50,ie))}function hn(h){t(0,R=_==="always"),t(14,c=void 0),t(55,B=void 0),t(15,Q=-1),Ge(h[1].toFixed(6)+", "+So(h[0],[-180,180],!0).toFixed(6),!1,!0)}function _n(h){if(!c)return;let me=h.key==="ArrowDown"?1:h.key==="ArrowUp"?-1:0;me&&(Q===(J?0:-1)&&me===-1&&t(15,Q=c.length),t(15,Q+=me),Q>=c.length&&t(15,Q=-1),Q<0&&J&&t(15,Q=0),h.preventDefault())}function mt(h=!0,me=!1){if(t(18,Me=void 0),N||me){if(qe&&clearTimeout(qe),v.length<G)return;const ze=v;qe=window.setTimeout(()=>{ct(ze).catch(Ee=>t(18,Me=Ee))},h?I:0)}else t(14,c=void 0),t(18,Me=void 0)}function dt(h){t(55,B=h),t(1,v=h.place_name),t(15,Q=-1)}const yn=()=>ce.focus();function bn(h){Ue[h?"unshift":"push"](()=>{ce=h,t(17,ce)})}function kn(){v=this.value,t(1,v),t(13,Te),t(27,u)}const wn=()=>t(13,Te=!0),vn=()=>t(13,Te=!1),Ln=()=>mt(),Cn=()=>{t(1,v=""),ce.focus()},Sn=()=>t(0,R=!R),An=()=>t(18,Me=void 0),Tn=h=>t(15,Q=h),Mn=h=>dt(h),zn=()=>{J||t(15,Q=-1)},In=()=>{};return o.$$set=h=>{"class"in h&&t(2,r=h.class),"apiKey"in h&&t(25,f=h.apiKey),"bbox"in h&&t(26,s=h.bbox),"clearButtonTitle"in h&&t(3,a=h.clearButtonTitle),"clearOnBlur"in h&&t(27,u=h.clearOnBlur),"collapsed"in h&&t(4,m=h.collapsed),"country"in h&&t(28,k=h.country),"debounceSearch"in h&&t(29,I=h.debounceSearch),"enableReverse"in h&&t(5,_=h.enableReverse),"errorMessage"in h&&t(6,O=h.errorMessage),"filter"in h&&t(30,b=h.filter),"flyTo"in h&&t(31,M=h.flyTo),"fuzzyMatch"in h&&t(32,j=h.fuzzyMatch),"language"in h&&t(33,C=h.language),"limit"in h&&t(34,H=h.limit),"mapController"in h&&t(35,S=h.mapController),"minLength"in h&&t(36,G=h.minLength),"noResultsMessage"in h&&t(7,U=h.noResultsMessage),"placeholder"in h&&t(8,A=h.placeholder),"proximity"in h&&t(37,z=h.proximity),"reverseActive"in h&&t(0,R=h.reverseActive),"reverseButtonTitle"in h&&t(9,y=h.reverseButtonTitle),"searchValue"in h&&t(1,v=h.searchValue),"showFullGeometry"in h&&t(38,fe=h.showFullGeometry),"showPlaceType"in h&&t(10,F=h.showPlaceType),"showResultsWhileTyping"in h&&t(39,N=h.showResultsWhileTyping),"selectFirst"in h&&t(11,J=h.selectFirst),"flyToSelected"in h&&t(40,w=h.flyToSelected),"markerOnSelected"in h&&t(41,oe=h.markerOnSelected),"types"in h&&t(42,$=h.types),"excludeTypes"in h&&t(43,ee=h.excludeTypes),"zoom"in h&&t(44,_e=h.zoom),"maxZoom"in h&&t(45,ie=h.maxZoom),"apiUrl"in h&&t(46,se=h.apiUrl),"fetchParameters"in h&&t(47,de=h.fetchParameters),"iconsBaseUrl"in h&&t(12,ge=h.iconsBaseUrl),"adjustUrlQuery"in h&&t(48,ue=h.adjustUrlQuery),"$$scope"in h&&t(58,l=h.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&134225920&&setTimeout(()=>{t(16,ot=Te),u&&!Te&&t(1,v="")}),o.$$.dirty[0]&16386|o.$$.dirty[1]&32&&v.length<G&&(t(55,B=void 0),t(14,c=void 0),t(18,Me=void 0),t(54,d=c)),o.$$.dirty[1]&16777344&&fe&&B&&!B.address&&B.geometry.type==="Point"&&B.place_type[0]!=="reverse"&&ct(B.id,{byId:!0}).catch(h=>t(18,Me=h)),o.$$.dirty[1]&50356241&&(S&&B&&B.id!==ut&&M&&(!B.bbox||B.bbox[0]===B.bbox[2]&&B.bbox[1]===B.bbox[3]?S.flyTo(B.center,B.id.startsWith("poi.")||B.id.startsWith("address.")?ie:_e):S.fitBounds(Rt(B.bbox),50,ie),t(14,c=void 0),t(54,d=void 0),t(15,Q=-1)),t(56,ut=B==null?void 0:B.id)),o.$$.dirty[0]&18432&&J&&c!=null&&c.length&&t(15,Q=0),o.$$.dirty[0]&2050&&(J||t(15,Q=-1)),o.$$.dirty[0]&16384|o.$$.dirty[1]&8388608&&d!==c&&t(54,d=void 0),o.$$.dirty[0]&81921|o.$$.dirty[1]&8388624&&S&&S.setEventHandler(h=>{switch(h.type){case"mapClick":R&&hn(h.coordinates);break;case"markerClick":{const me=c==null?void 0:c.find(ze=>ze.id===h.id);me&&dt(me)}break;case"markerMouseEnter":d&&t(15,Q=ot?(c==null?void 0:c.findIndex(me=>me.id===h.id))??-1:-1);break;case"markerMouseLeave":d&&t(15,Q=-1);break}}),o.$$.dirty[0]&49152&&t(57,n=c==null?void 0:c[Q]),o.$$.dirty[1]&67133969&&S&&n&&M&&w&&S.flyTo(n.center,n.id.startsWith("poi.")||n.id.startsWith("address.")?ie:_e),o.$$.dirty[1]&1040&&(oe||S==null||S.setMarkers(void 0,void 0)),o.$$.dirty[1]&75498512&&S&&oe&&!d&&(S.setMarkers(n?[n]:void 0,void 0),S.setSelectedMarker(n?0:-1)),o.$$.dirty[1]&25165840&&S&&S.setMarkers(d,B),o.$$.dirty[0]&32768|o.$$.dirty[1]&8388624&&d&&S&&S.setSelectedMarker(Q),o.$$.dirty[0]&2|o.$$.dirty[1]&16&&S){const h=at(v);S.setReverseMarker(h?[h.decimalLongitude,h.decimalLatitude]:void 0)}o.$$.dirty[1]&67108864&&Ne("select",n),o.$$.dirty[1]&16777216&&Ne("pick",B),o.$$.dirty[0]&81920&&Ne("optionsVisibilityChange",ot&&!!c),o.$$.dirty[0]&16384&&Ne("featuresListed",c),o.$$.dirty[1]&8388608&&Ne("featuresMarked",d),o.$$.dirty[0]&1&&Ne("reverseToggle",R),o.$$.dirty[0]&2&&Ne("queryChange",v),o.$$.dirty[0]&1|o.$$.dirty[1]&16&&S&&S.indicateReverse(R)},[R,v,r,a,m,_,O,U,A,y,F,J,ge,Te,c,Q,ot,ce,Me,Qe,dn,Tt,_n,mt,dt,f,s,u,k,I,b,M,j,C,H,S,G,z,fe,N,w,oe,$,ee,_e,ie,se,de,ue,ke,Oe,Ge,Ae,we,d,B,ut,n,l,i,yn,bn,kn,wn,vn,Ln,Cn,Sn,An,Tn,Mn,zn,In]}class Eo extends q{constructor(e){super(),Y(this,e,Oo,Bo,V,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}}function jt(o){let e,t,n,i;return t=new Eo({props:{mapController:o[1],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){e=Z("div"),X(t.$$.fragment),g(e,"class",n=pe(o[0])+" svelte-189syb7")},m(l,r){E(l,e,r),p(t,e,null),i=!0},p(l,r){const f={};r&2&&(f.mapController=l[1]),t.$set(f),(!i||r&1&&n!==(n=pe(l[0])+" svelte-189syb7"))&&g(e,"class",n)},i(l){i||(L(t.$$.fragment,l),i=!0)},o(l){T(t.$$.fragment,l),i=!1},d(l){l&&P(e),x(t)}}}function Po(o){let e,t,n=o[1]&&jt(o);return{c(){n&&n.c(),e=Be()},m(i,l){n&&n.m(i,l),E(i,e,l),t=!0},p(i,[l]){i[1]?n?(n.p(i,l),l&2&&L(n,1)):(n=jt(i),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(ye(),T(n,1,1,()=>{n=null}),be())},i(i){t||(L(n),t=!0)},o(i){T(n),t=!1},d(i){i&&P(e),n&&n.d(i)}}}function Ro(o,e,t){let n;ne(o,bt,r=>t(2,n=r));let{position:i="top-left"}=e,l;return vt(()=>{t(1,l=En(n,Ie))}),o.$$set=r=>{"position"in r&&t(0,i=r.position)},[i,l]}class Al extends q{constructor(e){super(),Y(this,e,Ro,Po,V,{position:0})}}let Ho=Date.now();function $e(o){return`${o}-${Ho++}`}const Ct=Symbol.for("svelte-maplibre");function Ke(){return Pn(Ct)}function Uo(o){let e=new WeakMap;return t=>{var r;let n=e.get(t.originalEvent);if(n!==void 0)return n;let l=(r=t.target.queryRenderedFeatures(t.point).find(f=>{var s;return(s=o.get(f.layer.id))==null?void 0:s.interactive}))==null?void 0:r.layer.id;return e.set(t.originalEvent,l),l}}function Fo(){let o=new Map;return Lt(Ct,{map:Re(null),source:_t(null),layer:_t(null),popupTarget:_t(null),cluster:Re(),loadedImages:Re(new Set),minzoom:Re(0),maxzoom:Re(24),layerEvent:Re(null),layerInfo:o,eventTopMost:Uo(o)})}function Zt(o){return{subscribe:o.subscribe}}function St({key:o,setPopupTarget:e=!1,setCluster:t=!1,setMouseEvent:n=!1}){let i=Ke(),l=Re(null),r=Zt(l),f={...i,[o]:Zt(l)};if(e&&(f.popupTarget=r),n){let s=Re(null);f.layerEvent=s,i.layerEvent=s}return t&&(f.cluster=Re()),Lt(Ct,f),{...i,self:l}}function Go(){return St({key:"source",setCluster:!0})}function jo(o=!0){return St({key:"layer",setPopupTarget:o,setMouseEvent:o})}function Zo(){return St({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function Do(o){return"layerType"in o&&o.layerType==="deckgl"}function Dt(o){let e;return t=>{if(t)for(let n in t){let i=e==null?void 0:e[n],l=t[n];i!==l&&o(n,l,i)}else if(e)for(let n in e)o(n,void 0,e[n]);e=t}}function No(o,...e){let t=[o];for(let n of e)if(n)Array.isArray(n)&&n[0]===o?t.push(...n.slice(1)):t.push(n);else continue;if(t.length!==1)return t.length===2?t[1]:t}function Wo(o){return o===!0?["has","point_count"]:o===!1?["!",["has","point_count"]]:void 0}function Tl(o,e){return["case",["boolean",["feature-state","hover"],!1],e,o]}var ft=Vo;function Vo(o){var e,t,n;if(o){if(Array.isArray(o)){for(e=[],t=o.length,n=0;n<t;n++){var i=o[n];i!=null&&e.push(i)}return e}if(typeof o=="object"){e={};var l=Object.keys(o);for(t=l.length,n=0;n<t;n++){var r=l[n],f=o[r];f!=null&&(e[r]=f)}return e}}}function Nt(o){let e=o[0],t,n,i=Wt(o);return{c(){i.c(),t=Be()},m(l,r){i.m(l,r),E(l,t,r),n=!0},p(l,r){r[0]&1&&V(e,e=l[0])?(ye(),T(i,1,1,W),be(),i=Wt(l),i.c(),L(i,1),i.m(t.parentNode,t)):i.p(l,r)},i(l){n||(L(i),n=!0)},o(l){T(i),n=!1},d(l){l&&P(t),i.d(l)}}}function Wt(o){let e;const t=o[36].default,n=ve(t,o,o[35],null);return{c(){n&&n.c()},m(i,l){n&&n.m(i,l),e=!0},p(i,l){n&&n.p&&(!e||l[1]&16)&&Le(n,t,i,i[35],e?Se(t,i[35],l,null):Ce(i[35]),null)},i(i){e||(L(n,i),e=!0)},o(i){T(n,i),e=!1},d(i){n&&n.d(i)}}}function Qo(o){let e,t,n=o[0]&&Nt(o);return{c(){n&&n.c(),e=Be()},m(i,l){n&&n.m(i,l),E(i,e,l),t=!0},p(i,l){i[0]?n?(n.p(i,l),l[0]&1&&L(n,1)):(n=Nt(i),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(ye(),T(n,1,1,()=>{n=null}),be())},i(i){t||(L(n),t=!0)},o(i){T(n),t=!1},d(i){i&&P(e),n&&n.d(i)}}}function Ko(o,e,t){let n,i,l,r,f,s,a,u,m,k,I,_,{$$slots:O={},$$scope:b}=e,{id:M=$e("layer")}=e,{source:j=void 0}=e,{sourceLayer:C=void 0}=e,{beforeId:H=void 0}=e,{beforeLayerType:S=void 0}=e,{type:G}=e,{paint:U=void 0}=e,{layout:A=void 0}=e,{filter:z=void 0}=e,{applyToClusters:R=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:v=void 0}=e,{manageHoverState:fe=!1}=e,{hovered:F=null}=e,{interactive:N=!0}=e,{hoverCursor:J=void 0}=e,{eventsIfTopMost:w=!1}=e;const oe=xe(),{map:$,source:ee,self:_e,minzoom:ie,maxzoom:se,eventTopMost:de,layerInfo:ge}=jo();ne(o,$,c=>t(31,m=c)),ne(o,ee,c=>t(32,k=c)),ne(o,_e,c=>t(0,u=c)),ne(o,ie,c=>t(34,_=c)),ne(o,se,c=>t(33,I=c)),Fe(()=>{u&&m&&(ge.delete(u),m==null||m.removeLayer(u))});let ue;function ke(c){var ce,Q;if(!N||!u||!m||w&&de(c)!==u)return;let d=c.features??[],B=(Q=(ce=d[0])==null?void 0:ce.properties)==null?void 0:Q.cluster_id,ae={event:c,map:m,clusterId:B,layer:u,source:f,features:d};oe(c.type,ae)}function Oe(c){var ce,Q;if(!N||!u||!m||w&&de(c)!==u)return;J&&(m.getCanvas().style.cursor=J);let d=c.features??[];t(6,F=d[0]??null);let B=(Q=(ce=d[0])==null?void 0:ce.properties)==null?void 0:Q.cluster_id;oe("mouseenter",{event:c,map:m,clusterId:B,layer:u,source:f,features:d})}function Ge(c){var ce,Q,Me;if(!N||!m)return;if(w&&de(c)!==u){t(6,F=null),fe&&ue!==void 0&&(m==null||m.setFeatureState({source:f,sourceLayer:C,id:ue},{hover:!1}),ue=void 0);return}m.getCanvas().style.cursor=J;let d=c.features??[],B=(Q=(ce=d[0])==null?void 0:ce.properties)==null?void 0:Q.cluster_id,ae=(Me=d[0])==null?void 0:Me.id;ae!==ue&&(fe&&(ue!==void 0&&(m==null||m.setFeatureState({source:f,id:ue,sourceLayer:C},{hover:!1})),m==null||m.setFeatureState({source:f,id:ae,sourceLayer:C},{hover:!0})),ue=ae,t(6,F=d[0]??null)),oe("mousemove",{event:c,map:m,clusterId:B,layer:u,source:f,features:d})}function Ae(c){if(!(!N||!u||!m)){if(J&&(m.getCanvas().style.cursor=""),t(6,F=null),fe&&ue!==void 0){const d={source:f,id:ue,sourceLayer:C};m==null||m.setFeatureState(d,{hover:!1}),ue=void 0}oe("mouseleave",{map:m,layer:u,source:f})}}let we=!0;function Te(c){m&&(m.off("click",c,ke),m.off("dblclick",c,ke),m.off("contextmenu",c,ke),m.off("mouseenter",c,Oe),m.off("mousemove",c,Ge),m.off("mouseleave",c,Ae))}return Fe(()=>{m&&u&&Te(u)}),o.$$set=c=>{"id"in c&&t(7,M=c.id),"source"in c&&t(8,j=c.source),"sourceLayer"in c&&t(9,C=c.sourceLayer),"beforeId"in c&&t(10,H=c.beforeId),"beforeLayerType"in c&&t(11,S=c.beforeLayerType),"type"in c&&t(12,G=c.type),"paint"in c&&t(13,U=c.paint),"layout"in c&&t(14,A=c.layout),"filter"in c&&t(15,z=c.filter),"applyToClusters"in c&&t(16,R=c.applyToClusters),"minzoom"in c&&t(17,y=c.minzoom),"maxzoom"in c&&t(18,v=c.maxzoom),"manageHoverState"in c&&t(19,fe=c.manageHoverState),"hovered"in c&&t(6,F=c.hovered),"interactive"in c&&t(20,N=c.interactive),"hoverCursor"in c&&t(21,J=c.hoverCursor),"eventsIfTopMost"in c&&t(22,w=c.eventsIfTopMost),"$$scope"in c&&t(35,b=c.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&65536&&t(30,n=Wo(R)),o.$$.dirty[0]&1073774592&&t(24,i=No("all",n,z)),o.$$.dirty[0]&131072|o.$$.dirty[1]&8&&t(26,l=y??_),o.$$.dirty[0]&262144|o.$$.dirty[1]&4&&t(25,r=v??I),o.$$.dirty[0]&256|o.$$.dirty[1]&2&&t(29,f=j||k),o.$$.dirty[0]&654343809|o.$$.dirty[1]&1&&m&&u!==M&&f){u&&(Te(u),ge.delete(u));let c=H;if(!H&&S){let d=m.getStyle().layers,B=typeof S=="function"?S:ce=>ce.type===S,ae=d==null?void 0:d.find(B);ae&&(c=ae.id)}He(_e,u=M,u),m.addLayer(ft({id:u,type:G,source:f,"source-layer":C,filter:i,paint:U,layout:A,minzoom:l,maxzoom:r}),c),t(23,we=!0),m.on("click",u,ke),m.on("dblclick",u,ke),m.on("contextmenu",u,ke),m.on("mouseenter",u,Oe),m.on("mousemove",u,Ge),m.on("mouseleave",u,Ae)}o.$$.dirty[0]&1048577&&u&&ge.set(u,{interactive:N}),o.$$.dirty[0]&1|o.$$.dirty[1]&1&&t(28,s=u?Dt((c,d)=>m==null?void 0:m.setPaintProperty(u,c,d)):void 0),o.$$.dirty[0]&1|o.$$.dirty[1]&1&&t(27,a=u?Dt((c,d)=>m==null?void 0:m.setLayoutProperty(u,c,d)):void 0),o.$$.dirty[0]&268443648&&(s==null||s(U)),o.$$.dirty[0]&134234112&&(a==null||a(A)),o.$$.dirty[0]&100663297|o.$$.dirty[1]&1&&u&&(m==null||m.setLayerZoomRange(u,l,r)),o.$$.dirty[0]&25165825|o.$$.dirty[1]&1&&u&&(we?t(23,we=!1):m==null||m.setFilter(u,i))},[u,$,ee,_e,ie,se,F,M,j,C,H,S,G,U,A,z,R,y,v,fe,N,J,w,we,i,r,l,a,s,f,n,m,k,I,_,b,O]}class st extends q{constructor(e){super(),Y(this,e,Ko,Qo,V,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,interactive:20,hoverCursor:21,eventsIfTopMost:22},null,[-1,-1])}}function qo(o){let e;const t=o[16].default,n=ve(t,o,o[24],null);return{c(){n&&n.c()},m(i,l){n&&n.m(i,l),e=!0},p(i,l){n&&n.p&&(!e||l&16777216)&&Le(n,t,i,i[24],e?Se(t,i[24],l,null):Ce(i[24]),null)},i(i){e||(L(n,i),e=!0)},o(i){T(n,i),e=!1},d(i){n&&n.d(i)}}}function Yo(o){let e,t,n;function i(r){o[17](r)}let l={id:o[1],type:"circle",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[qo]},$$scope:{ctx:o}};return o[0]!==void 0&&(l.hovered=o[0]),e=new st({props:l}),Ue.push(()=>We(e,"hovered",i)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){X(e.$$.fragment)},m(r,f){p(e,r,f),n=!0},p(r,[f]){const s={};f&2&&(s.id=r[1]),f&4&&(s.source=r[2]),f&8&&(s.sourceLayer=r[3]),f&16&&(s.beforeId=r[4]),f&32&&(s.beforeLayerType=r[5]),f&64&&(s.paint=r[6]),f&128&&(s.layout=r[7]),f&256&&(s.filter=r[8]),f&512&&(s.applyToClusters=r[9]),f&1024&&(s.minzoom=r[10]),f&2048&&(s.maxzoom=r[11]),f&4096&&(s.hoverCursor=r[12]),f&8192&&(s.manageHoverState=r[13]),f&16384&&(s.eventsIfTopMost=r[14]),f&32768&&(s.interactive=r[15]),f&16777216&&(s.$$scope={dirty:f,ctx:r}),!t&&f&1&&(t=!0,s.hovered=r[0],Ve(()=>t=!1)),e.$set(s)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function Jo(o,e,t){let{$$slots:n={},$$scope:i}=e,{id:l=$e("circle")}=e,{source:r=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u}=e,{layout:m=void 0}=e,{filter:k=void 0}=e,{applyToClusters:I=void 0}=e,{minzoom:_=void 0}=e,{maxzoom:O=void 0}=e,{hoverCursor:b=void 0}=e,{manageHoverState:M=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:C=!1}=e,{interactive:H=!0}=e;function S(v){j=v,t(0,j)}function G(v){le.call(this,o,v)}function U(v){le.call(this,o,v)}function A(v){le.call(this,o,v)}function z(v){le.call(this,o,v)}function R(v){le.call(this,o,v)}function y(v){le.call(this,o,v)}return o.$$set=v=>{"id"in v&&t(1,l=v.id),"source"in v&&t(2,r=v.source),"sourceLayer"in v&&t(3,f=v.sourceLayer),"beforeId"in v&&t(4,s=v.beforeId),"beforeLayerType"in v&&t(5,a=v.beforeLayerType),"paint"in v&&t(6,u=v.paint),"layout"in v&&t(7,m=v.layout),"filter"in v&&t(8,k=v.filter),"applyToClusters"in v&&t(9,I=v.applyToClusters),"minzoom"in v&&t(10,_=v.minzoom),"maxzoom"in v&&t(11,O=v.maxzoom),"hoverCursor"in v&&t(12,b=v.hoverCursor),"manageHoverState"in v&&t(13,M=v.manageHoverState),"hovered"in v&&t(0,j=v.hovered),"eventsIfTopMost"in v&&t(14,C=v.eventsIfTopMost),"interactive"in v&&t(15,H=v.interactive),"$$scope"in v&&t(24,i=v.$$scope)},[j,l,r,f,s,a,u,m,k,I,_,O,b,M,C,H,n,S,G,U,A,z,R,y,i]}class Ml extends q{constructor(e){super(),Y(this,e,Jo,Yo,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Xo(o){let e;const t=o[15].default,n=ve(t,o,o[23],null);return{c(){n&&n.c()},m(i,l){n&&n.m(i,l),e=!0},p(i,l){n&&n.p&&(!e||l&8388608)&&Le(n,t,i,i[23],e?Se(t,i[23],l,null):Ce(i[23]),null)},i(i){e||(L(n,i),e=!0)},o(i){T(n,i),e=!1},d(i){n&&n.d(i)}}}function po(o){let e,t,n;function i(r){o[16](r)}let l={id:o[1],type:"fill",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],minzoom:o[9],maxzoom:o[10],hoverCursor:o[11],manageHoverState:o[12],eventsIfTopMost:o[13],interactive:o[14],$$slots:{default:[Xo]},$$scope:{ctx:o}};return o[0]!==void 0&&(l.hovered=o[0]),e=new st({props:l}),Ue.push(()=>We(e,"hovered",i)),e.$on("click",o[17]),e.$on("dblclick",o[18]),e.$on("contextmenu",o[19]),e.$on("mouseenter",o[20]),e.$on("mousemove",o[21]),e.$on("mouseleave",o[22]),{c(){X(e.$$.fragment)},m(r,f){p(e,r,f),n=!0},p(r,[f]){const s={};f&2&&(s.id=r[1]),f&4&&(s.source=r[2]),f&8&&(s.sourceLayer=r[3]),f&16&&(s.beforeId=r[4]),f&32&&(s.beforeLayerType=r[5]),f&64&&(s.paint=r[6]),f&128&&(s.layout=r[7]),f&256&&(s.filter=r[8]),f&512&&(s.minzoom=r[9]),f&1024&&(s.maxzoom=r[10]),f&2048&&(s.hoverCursor=r[11]),f&4096&&(s.manageHoverState=r[12]),f&8192&&(s.eventsIfTopMost=r[13]),f&16384&&(s.interactive=r[14]),f&8388608&&(s.$$scope={dirty:f,ctx:r}),!t&&f&1&&(t=!0,s.hovered=r[0],Ve(()=>t=!1)),e.$set(s)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function xo(o,e,t){let{$$slots:n={},$$scope:i}=e,{id:l=$e("fill")}=e,{source:r=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u}=e,{layout:m=void 0}=e,{filter:k=void 0}=e,{minzoom:I=void 0}=e,{maxzoom:_=void 0}=e,{hoverCursor:O=void 0}=e,{manageHoverState:b=!1}=e,{hovered:M=null}=e,{eventsIfTopMost:j=!1}=e,{interactive:C=!0}=e;function H(y){M=y,t(0,M)}function S(y){le.call(this,o,y)}function G(y){le.call(this,o,y)}function U(y){le.call(this,o,y)}function A(y){le.call(this,o,y)}function z(y){le.call(this,o,y)}function R(y){le.call(this,o,y)}return o.$$set=y=>{"id"in y&&t(1,l=y.id),"source"in y&&t(2,r=y.source),"sourceLayer"in y&&t(3,f=y.sourceLayer),"beforeId"in y&&t(4,s=y.beforeId),"beforeLayerType"in y&&t(5,a=y.beforeLayerType),"paint"in y&&t(6,u=y.paint),"layout"in y&&t(7,m=y.layout),"filter"in y&&t(8,k=y.filter),"minzoom"in y&&t(9,I=y.minzoom),"maxzoom"in y&&t(10,_=y.maxzoom),"hoverCursor"in y&&t(11,O=y.hoverCursor),"manageHoverState"in y&&t(12,b=y.manageHoverState),"hovered"in y&&t(0,M=y.hovered),"eventsIfTopMost"in y&&t(13,j=y.eventsIfTopMost),"interactive"in y&&t(14,C=y.interactive),"$$scope"in y&&t(23,i=y.$$scope)},[M,l,r,f,s,a,u,m,k,I,_,O,b,j,C,n,H,S,G,U,A,z,R,i]}class zl extends q{constructor(e){super(),Y(this,e,xo,po,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function $o(o,e,t){let n;const{map:i}=Ke();ne(o,i,s=>t(4,n=s));let{position:l="top-left"}=e,{container:r=void 0}=e,f=null;return Fe(()=>{n!=null&&n.loaded()&&f&&n.removeControl(f)}),o.$$set=s=>{"position"in s&&t(1,l=s.position),"container"in s&&t(2,r=s.container)},o.$$.update=()=>{if(o.$$.dirty&30&&n&&!f){let s;typeof r=="string"?s=document.querySelector(r)??void 0:s=r,t(3,f=new Ie.FullscreenControl({container:s})),n.addControl(f,l)}},[i,l,r,f,n]}class ei extends q{constructor(e){super(),Y(this,e,$o,null,V,{position:1,container:2})}}function ti(o,e,t,n,i){let l=!1;o.getSource(e)&&(l=!0,o.removeSource(e));const r=()=>{n(e)&&(o.addSource(e,t),i())};if(l){const f=()=>{e&&(o.getSource(e)?setTimeout(f,1):r())};f()}else r()}function ni(o,e,t){Rn().then(()=>{let n=ln(o);if(!n)return;n.getSource(e)===t&&n.removeSource(e)})}function Vt(o){let e=o[0],t,n,i=Qt(o);return{c(){i.c(),t=Be()},m(l,r){i.m(l,r),E(l,t,r),n=!0},p(l,r){r&1&&V(e,e=l[0])?(ye(),T(i,1,1,W),be(),i=Qt(l),i.c(),L(i,1),i.m(t.parentNode,t)):i.p(l,r)},i(l){n||(L(i),n=!0)},o(l){T(i),n=!1},d(l){l&&P(t),i.d(l)}}}function Qt(o){let e;const t=o[19].default,n=ve(t,o,o[18],null);return{c(){n&&n.c()},m(i,l){n&&n.m(i,l),e=!0},p(i,l){n&&n.p&&(!e||l&262144)&&Le(n,t,i,i[18],e?Se(t,i[18],l,null):Ce(i[18]),null)},i(i){e||(L(n,i),e=!0)},o(i){T(n,i),e=!1},d(i){n&&n.d(i)}}}function oi(o){let e,t,n=o[0]&&Vt(o);return{c(){n&&n.c(),e=Be()},m(i,l){n&&n.m(i,l),E(i,e,l),t=!0},p(i,[l]){i[0]?n?(n.p(i,l),l&1&&L(n,1)):(n=Vt(i),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(ye(),T(n,1,1,()=>{n=null}),be())},i(i){t||(L(n),t=!0)},o(i){T(n),t=!1},d(i){i&&P(e),n&&n.d(i)}}}function ii(o,e,t){let n,i,l,{$$slots:r={},$$scope:f}=e,{id:s=$e("geojson")}=e,{data:a}=e,{generateId:u=!1}=e,{promoteId:m=void 0}=e,{filter:k=void 0}=e,{lineMetrics:I=void 0}=e,{cluster:_=void 0}=e,{maxzoom:O=void 0}=e,{attribution:b=void 0}=e,{buffer:M=void 0}=e,{tolerance:j=void 0}=e;const{map:C,cluster:H,self:S}=Go();ne(o,C,A=>t(17,i=A)),ne(o,H,A=>t(20,l=A)),ne(o,S,A=>t(0,n=A));let G,U=!0;return Fe(()=>{n&&G&&i&&(ni(C,n,G),He(S,n=null,n),t(15,G=void 0))}),o.$$set=A=>{"id"in A&&t(4,s=A.id),"data"in A&&t(5,a=A.data),"generateId"in A&&t(6,u=A.generateId),"promoteId"in A&&t(7,m=A.promoteId),"filter"in A&&t(8,k=A.filter),"lineMetrics"in A&&t(9,I=A.lineMetrics),"cluster"in A&&t(10,_=A.cluster),"maxzoom"in A&&t(11,O=A.maxzoom),"attribution"in A&&t(12,b=A.attribution),"buffer"in A&&t(13,M=A.buffer),"tolerance"in A&&t(14,j=A.tolerance),"$$scope"in A&&t(18,f=A.$$scope)},o.$$.update=()=>{o.$$.dirty&1024&&He(H,l=_,l),o.$$.dirty&196593&&i&&n!==s&&(He(S,n=s,n),ti(i,n,ft({type:"geojson",data:a,filter:k,lineMetrics:I,generateId:u,promoteId:m,cluster:!!_,clusterMinPoints:_==null?void 0:_.minPoints,clusterMaxZoom:_==null?void 0:_.maxZoom,clusterRadius:_==null?void 0:_.radius,clusterProperties:_==null?void 0:_.properties,maxzoom:O,attribution:b,buffer:M,tolerance:j}),A=>i&&A===n,()=>{n&&(t(15,G=i==null?void 0:i.getSource(n)),t(16,U=!0))})),o.$$.dirty&131088&&(i==null||i.on("style.load",()=>{t(15,G=i==null?void 0:i.getSource(s))})),o.$$.dirty&98336&&G&&(U?t(16,U=!1):G.setData(a)),o.$$.dirty&33792&&(G==null||G.setClusterOptions(ft({cluster:!!_,clusterMaxZoom:_==null?void 0:_.maxZoom,clusterRadius:_==null?void 0:_.radius})))},[n,C,H,S,s,a,u,m,k,I,_,O,b,M,j,G,U,i,f,r]}class Il extends q{constructor(e){super(),Y(this,e,ii,oi,V,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10,maxzoom:11,attribution:12,buffer:13,tolerance:14})}}function li(o,e,t){let n;const{map:i}=Ke();ne(o,i,k=>t(8,n=k));let{position:l="top-left"}=e,{positionOptions:r=void 0}=e,{fitBoundsOptions:f=void 0}=e,{trackUserLocation:s=!1}=e,{showAccuracyCircle:a=!0}=e,{showUserLocation:u=!0}=e,{control:m=null}=e;return Fe(()=>{n!=null&&n.loaded()&&m&&n.removeControl(m)}),o.$$set=k=>{"position"in k&&t(2,l=k.position),"positionOptions"in k&&t(3,r=k.positionOptions),"fitBoundsOptions"in k&&t(4,f=k.fitBoundsOptions),"trackUserLocation"in k&&t(5,s=k.trackUserLocation),"showAccuracyCircle"in k&&t(6,a=k.showAccuracyCircle),"showUserLocation"in k&&t(7,u=k.showUserLocation),"control"in k&&t(1,m=k.control)},o.$$.update=()=>{o.$$.dirty&510&&n&&!m&&(t(1,m=new Ie.GeolocateControl({positionOptions:r,fitBoundsOptions:f,trackUserLocation:s,showAccuracyCircle:a,showUserLocation:u})),n.addControl(m,l))},[i,m,l,r,f,s,a,u,n]}class ri extends q{constructor(e){super(),Y(this,e,li,null,V,{position:2,positionOptions:3,fitBoundsOptions:4,trackUserLocation:5,showAccuracyCircle:6,showUserLocation:7,control:1})}}function fi(o){let e;const t=o[15].default,n=ve(t,o,o[23],null);return{c(){n&&n.c()},m(i,l){n&&n.m(i,l),e=!0},p(i,l){n&&n.p&&(!e||l&8388608)&&Le(n,t,i,i[23],e?Se(t,i[23],l,null):Ce(i[23]),null)},i(i){e||(L(n,i),e=!0)},o(i){T(n,i),e=!1},d(i){n&&n.d(i)}}}function si(o){let e,t,n;function i(r){o[16](r)}let l={id:o[1],type:"line",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],minzoom:o[9],maxzoom:o[10],hoverCursor:o[11],manageHoverState:o[12],eventsIfTopMost:o[13],interactive:o[14],$$slots:{default:[fi]},$$scope:{ctx:o}};return o[0]!==void 0&&(l.hovered=o[0]),e=new st({props:l}),Ue.push(()=>We(e,"hovered",i)),e.$on("click",o[17]),e.$on("dblclick",o[18]),e.$on("contextmenu",o[19]),e.$on("mouseenter",o[20]),e.$on("mousemove",o[21]),e.$on("mouseleave",o[22]),{c(){X(e.$$.fragment)},m(r,f){p(e,r,f),n=!0},p(r,[f]){const s={};f&2&&(s.id=r[1]),f&4&&(s.source=r[2]),f&8&&(s.sourceLayer=r[3]),f&16&&(s.beforeId=r[4]),f&32&&(s.beforeLayerType=r[5]),f&64&&(s.paint=r[6]),f&128&&(s.layout=r[7]),f&256&&(s.filter=r[8]),f&512&&(s.minzoom=r[9]),f&1024&&(s.maxzoom=r[10]),f&2048&&(s.hoverCursor=r[11]),f&4096&&(s.manageHoverState=r[12]),f&8192&&(s.eventsIfTopMost=r[13]),f&16384&&(s.interactive=r[14]),f&8388608&&(s.$$scope={dirty:f,ctx:r}),!t&&f&1&&(t=!0,s.hovered=r[0],Ve(()=>t=!1)),e.$set(s)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){T(e.$$.fragment,r),n=!1},d(r){x(e,r)}}}function ui(o,e,t){let{$$slots:n={},$$scope:i}=e,{id:l=$e("line")}=e,{source:r=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u}=e,{layout:m=void 0}=e,{filter:k=void 0}=e,{minzoom:I=void 0}=e,{maxzoom:_=void 0}=e,{hoverCursor:O=void 0}=e,{manageHoverState:b=!1}=e,{hovered:M=null}=e,{eventsIfTopMost:j=!1}=e,{interactive:C=!0}=e;function H(y){M=y,t(0,M)}function S(y){le.call(this,o,y)}function G(y){le.call(this,o,y)}function U(y){le.call(this,o,y)}function A(y){le.call(this,o,y)}function z(y){le.call(this,o,y)}function R(y){le.call(this,o,y)}return o.$$set=y=>{"id"in y&&t(1,l=y.id),"source"in y&&t(2,r=y.source),"sourceLayer"in y&&t(3,f=y.sourceLayer),"beforeId"in y&&t(4,s=y.beforeId),"beforeLayerType"in y&&t(5,a=y.beforeLayerType),"paint"in y&&t(6,u=y.paint),"layout"in y&&t(7,m=y.layout),"filter"in y&&t(8,k=y.filter),"minzoom"in y&&t(9,I=y.minzoom),"maxzoom"in y&&t(10,_=y.maxzoom),"hoverCursor"in y&&t(11,O=y.hoverCursor),"manageHoverState"in y&&t(12,b=y.manageHoverState),"hovered"in y&&t(0,M=y.hovered),"eventsIfTopMost"in y&&t(13,j=y.eventsIfTopMost),"interactive"in y&&t(14,C=y.interactive),"$$scope"in y&&t(23,i=y.$$scope)},[M,l,r,f,s,a,u,m,k,I,_,O,b,j,C,n,H,S,G,U,A,z,R,i]}class Bl extends q{constructor(e){super(),Y(this,e,ui,si,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function ai(o,e,t){let n;const i=xe();let{layer:l=void 0}=e;const{map:r}=Ke();ne(o,r,u=>t(2,n=u));function f(u){i(u.type,{...u,map:r})}const s=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],a=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return Fe(()=>{if(n)if(l)for(const u of s)n.off(u,l,f);else for(const u of a)n.off(u,f)}),o.$$set=u=>{"layer"in u&&t(1,l=u.layer)},o.$$.update=()=>{if(o.$$.dirty&6&&n)if(l)for(const u of s)n.on(u,l,f);else for(const u of a)n.on(u,f)},[r,l,n]}class ci extends q{constructor(e){super(),Y(this,e,ai,null,V,{layer:1})}}function mi(o){let e=o.getCenter(),t=Math.round(o.getZoom()*100)/100,n=Math.ceil((t*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,n),l=Math.round(e.lat*i)/i,r=Math.round(e.lng*i)/i,f=`${t}/${l}/${r}`,s=o.getBearing(),a=o.getPitch();return(s||a)&&(f+=`/${Math.round(s*10)/10}`),a&&(f+=`/${Math.round(a)}`),`#${f}`}function di(o){return o.replace("#","").split("/").map(parseFloat)}var Ye=At;function At(o,e){return o===e||o!==o&&e!==e?!0:typeof o!=typeof e||{}.toString.call(o)!={}.toString.call(e)||o!==Object(o)||!o?!1:Array.isArray(o)?Kt(o,e):{}.toString.call(o)=="[object Set]"?Kt(Array.from(o),Array.from(e)):{}.toString.call(o)=="[object Object]"?hi(o,e):gi(o,e)}function gi(o,e){return o.toString()===e.toString()}function Kt(o,e){var t=o.length;if(t!=e.length)return!1;for(var n=0;n<t;n++)if(!At(o[n],e[n]))return!1;return!0}function hi(o,e){var t=Object.keys(o),n=t.length;if(n!=Object.keys(e).length)return!1;for(var i=0;i<n;i++){var l=t[i];if(!(e.hasOwnProperty(l)&&At(o[l],e[l])))return!1}return!0}function _i(o,e,t){let n;const{map:i}=Ke();ne(o,i,u=>t(6,n=u));let{position:l="top-left"}=e,{showCompass:r=!0}=e,{showZoom:f=!0}=e,{visualizePitch:s=!1}=e,a=null;return Fe(()=>{n!=null&&n.loaded()&&a&&n.removeControl(a)}),o.$$set=u=>{"position"in u&&t(1,l=u.position),"showCompass"in u&&t(2,r=u.showCompass),"showZoom"in u&&t(3,f=u.showZoom),"visualizePitch"in u&&t(4,s=u.visualizePitch)},o.$$.update=()=>{o.$$.dirty&126&&n&&!a&&(t(5,a=new Ie.NavigationControl({showCompass:r,showZoom:f,visualizePitch:s})),n.addControl(a,l))},[i,l,r,f,s,a,n]}class cn extends q{constructor(e){super(),Y(this,e,_i,null,V,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function yi(o,e,t){let n;const{map:i}=Ke();ne(o,i,a=>t(5,n=a));let{position:l="bottom-left"}=e,{maxWidth:r=void 0}=e,{unit:f="metric"}=e,s=null;return Fe(()=>{n!=null&&n.loaded()&&s&&n.removeControl(s)}),o.$$set=a=>{"position"in a&&t(1,l=a.position),"maxWidth"in a&&t(2,r=a.maxWidth),"unit"in a&&t(3,f=a.unit)},o.$$.update=()=>{o.$$.dirty&62&&n&&!s&&(t(4,s=new Ie.ScaleControl({maxWidth:r,unit:f})),n.addControl(s,l))},[i,l,r,f,s,n]}class mn extends q{constructor(e){super(),Y(this,e,yi,null,V,{position:1,maxWidth:2,unit:3})}}const{window:bi}=sn,ki=o=>({map:o[0]&16,loadedImages:o[0]&32,allImagesLoaded:o[0]&64}),qt=o=>({map:o[4],loadedImages:o[5],allImagesLoaded:o[6]});function Yt(o){let e,t,n=o[3]&&Jt(o);const i=o[40].default,l=ve(i,o,o[39],qt);return{c(){n&&n.c(),e=te(),l&&l.c()},m(r,f){n&&n.m(r,f),E(r,e,f),l&&l.m(r,f),t=!0},p(r,f){r[3]?n?(n.p(r,f),f[0]&8&&L(n,1)):(n=Jt(r),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(ye(),T(n,1,1,()=>{n=null}),be()),l&&l.p&&(!t||f[0]&112|f[1]&256)&&Le(l,i,r,r[39],t?Se(i,r[39],f,ki):Ce(r[39]),qt)},i(r){t||(L(n),L(l,r),t=!0)},o(r){T(n),T(l,r),t=!1},d(r){r&&P(e),n&&n.d(r),l&&l.d(r)}}}function Jt(o){let e,t,n,i,l,r,f,s;return e=new cn({props:{position:o[7]}}),n=new ri({props:{position:o[7],fitBoundsOptions:{maxZoom:12}}}),l=new ei({props:{position:o[7]}}),f=new mn({props:{position:o[7]}}),{c(){X(e.$$.fragment),t=te(),X(n.$$.fragment),i=te(),X(l.$$.fragment),r=te(),X(f.$$.fragment)},m(a,u){p(e,a,u),E(a,t,u),p(n,a,u),E(a,i,u),p(l,a,u),E(a,r,u),p(f,a,u),s=!0},p(a,u){const m={};u[0]&128&&(m.position=a[7]),e.$set(m);const k={};u[0]&128&&(k.position=a[7]),n.$set(k);const I={};u[0]&128&&(I.position=a[7]),l.$set(I);const _={};u[0]&128&&(_.position=a[7]),f.$set(_)},i(a){s||(L(e.$$.fragment,a),L(n.$$.fragment,a),L(l.$$.fragment,a),L(f.$$.fragment,a),s=!0)},o(a){T(e.$$.fragment,a),T(n.$$.fragment,a),T(l.$$.fragment,a),T(f.$$.fragment,a),s=!1},d(a){a&&(P(t),P(i),P(r)),x(e,a),x(n,a),x(l,a),x(f,a)}}}function wi(o){let e,t,n,i,l,r=o[4]&&o[0]&&Yt(o);return{c(){e=Z("div"),r&&r.c(),g(e,"class",t=pe(o[2])+" svelte-p00lfq"),g(e,"data-testid","map-container"),je(e,"expand-map",!o[2])},m(f,s){E(f,e,s),r&&r.m(e,null),o[41](e),n=!0,i||(l=[re(bi,"hashchange",o[11]),kt(o[10].call(null,e))],i=!0)},p(f,s){f[4]&&f[0]?r?(r.p(f,s),s[0]&17&&L(r,1)):(r=Yt(f),r.c(),L(r,1),r.m(e,null)):r&&(ye(),T(r,1,1,()=>{r=null}),be()),(!n||s[0]&4&&t!==(t=pe(f[2])+" svelte-p00lfq"))&&g(e,"class",t),(!n||s[0]&4)&&je(e,"expand-map",!f[2])},i(f){n||(L(r),n=!0)},o(f){T(r),n=!1},d(f){f&&P(e),r&&r.d(),o[41](null),i=!1,tt(l)}}}function vi(o,e,t){let n,i,l,r,{$$slots:f={},$$scope:s}=e,{map:a=null}=e,{mapContainer:u=void 0}=e,{class:m=void 0}=e,{style:k}=e,{diffStyleUpdates:I=!1}=e,{center:_=void 0}=e,{zoom:O=void 0}=e,{pitch:b=0}=e,{bearing:M=0}=e,{bounds:j=void 0}=e,{hash:C=!1}=e,{updateHash:H=c=>{window.history.replaceState(window.history.state,"",c)}}=e,{loaded:S=!1}=e,{minZoom:G=0}=e,{maxZoom:U=22}=e,{antialias:A=void 0}=e,{zoomOnDoubleClick:z=!0}=e,{locale:R=void 0}=e,{interactive:y=!0}=e,{attributionControl:v=!0}=e,{cooperativeGestures:fe=!1}=e,{preserveDrawingBuffer:F=!1}=e,{maxBounds:N=void 0}=e,{images:J=[]}=e,{standardControls:w=!1}=e,{filterLayers:oe=void 0}=e,{transformRequest:$=void 0}=e;const ee=xe(),{map:_e,loadedImages:ie}=Fo();ne(o,_e,c=>t(4,l=c)),ne(o,ie,c=>t(5,r=c));let se=new Set;async function de(c,d=!1){if(l&&!(!l.loaded()&&!d))if("url"in c){se.add(c.id);try{let B=await l.loadImage(c.url);l==null||l.addImage(c.id,B.data,c.options),r.add(c.id),ie.set(r)}catch(B){ee("error",B)}finally{se.delete(c.id)}}else l.addImage(c.id,c.data,c.options),r.add(c.id),ie.set(r)}let ge,ue,ke,Oe;function Ge(c){return we(),He(_e,l=new Ie.Map(ft({container:c,style:k,locale:R,center:_,zoom:O,pitch:b,bearing:M,minZoom:G,maxZoom:U,antialias:A,interactive:y,preserveDrawingBuffer:F,maxBounds:N,bounds:j,attributionControl:v,transformRequest:$,cooperativeGestures:fe})),l),l.on("load",d=>{d.target.getContainer().setAttribute("data-testid","map"),d.target.getCanvas().setAttribute("data-testid","map-canvas"),t(0,S=!0),ee("load",l)}),l.on("error",d=>ee("error",{...d,map:l})),l.on("movestart",d=>ee("movestart",{...d,map:l})),l.on("moveend",d=>{if(t(12,_=d.target.getCenter()),t(13,O=d.target.getZoom()),t(14,b=d.target.getPitch()),t(15,M=d.target.getBearing()),t(16,j=d.target.getBounds()),ee("moveend",{...d,map:l}),C){let B=new URL(window.location.href.replace(/(#.+)?$/,mi(l)));H(B)}}),l.on("click",d=>ee("click",{...d,map:l})),l.on("dblclick",d=>ee("dblclick",{...d,map:l})),l.on("contextmenu",d=>ee("contextmenu",{...d,map:l})),l.on("zoomstart",d=>ee("zoomstart",{...d,map:l})),l.on("zoom",d=>{ee("zoom",{...d,map:l})}),l.on("zoomend",d=>{ee("zoomend",{...d,map:l})}),l.on("style.load",()=>{if(l){const d=l.getStyle();if(t(36,ge=d.layers.map(B=>B.id)),t(37,ue=Object.keys(d.sources)),Oe)for(const[B,ae]of Object.entries(Oe))l.addSource(B,ae);if(ke)for(const B of ke)l.addLayer(B);for(const B of J)de(B,!0)}}),l.on("styledata",d=>{if(l&&oe){const B=l.getStyle().layers;if(B)for(let ae of B)oe(ae)||l.setLayoutProperty(ae.id,"visibility","none")}ee("styledata",{...d,map:l})}),{destroy(){t(0,S=!1),l==null||l.remove(),He(_e,l=null,l)}}}let Ae=k;function we(){if(C){let c=di(window.location.hash);c.length>=3&&(t(13,O=c[0]),t(12,_=[c[2],c[1]])),c.length==5&&(t(15,M=c[3]),t(14,b=c[4]))}}function Te(c){Ue[c?"unshift":"push"](()=>{u=c,t(1,u)})}return o.$$set=c=>{"map"in c&&t(17,a=c.map),"mapContainer"in c&&t(1,u=c.mapContainer),"class"in c&&t(2,m=c.class),"style"in c&&t(18,k=c.style),"diffStyleUpdates"in c&&t(19,I=c.diffStyleUpdates),"center"in c&&t(12,_=c.center),"zoom"in c&&t(13,O=c.zoom),"pitch"in c&&t(14,b=c.pitch),"bearing"in c&&t(15,M=c.bearing),"bounds"in c&&t(16,j=c.bounds),"hash"in c&&t(20,C=c.hash),"updateHash"in c&&t(21,H=c.updateHash),"loaded"in c&&t(0,S=c.loaded),"minZoom"in c&&t(22,G=c.minZoom),"maxZoom"in c&&t(23,U=c.maxZoom),"antialias"in c&&t(24,A=c.antialias),"zoomOnDoubleClick"in c&&t(25,z=c.zoomOnDoubleClick),"locale"in c&&t(26,R=c.locale),"interactive"in c&&t(27,y=c.interactive),"attributionControl"in c&&t(28,v=c.attributionControl),"cooperativeGestures"in c&&t(29,fe=c.cooperativeGestures),"preserveDrawingBuffer"in c&&t(30,F=c.preserveDrawingBuffer),"maxBounds"in c&&t(31,N=c.maxBounds),"images"in c&&t(32,J=c.images),"standardControls"in c&&t(3,w=c.standardControls),"filterLayers"in c&&t(33,oe=c.filterLayers),"transformRequest"in c&&t(34,$=c.transformRequest),"$$scope"in c&&t(39,s=c.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&8&&t(7,n=typeof w=="boolean"?void 0:w),o.$$.dirty[0]&16&&t(17,a=l),o.$$.dirty[0]&786448|o.$$.dirty[1]&224&&l&&!Ye(k,Ae)){const c=l.getStyle();if(ge&&(ke=c.layers.filter(d=>!ge.includes(d.id))),ue){const d=Object.keys(c.sources).filter(B=>!ue.includes(B));Oe={};for(const B of d)Oe[B]=c.sources[B]}t(38,Ae=k),l.setStyle(k,{diff:I}),He(ie,r=new Set,r),t(35,se=new Set)}if(o.$$.dirty[0]&49|o.$$.dirty[1]&18&&S&&l!=null&&l.loaded())for(let c of J)!r.has(c.id)&&!se.has(c.id)&&!l.hasImage(c.id)&&de(c);if(o.$$.dirty[0]&32|o.$$.dirty[1]&2&&t(6,i=J.every(c=>r.has(c.id))),o.$$.dirty[0]&61456&&l){let c={};_!=null&&!Ye(_,l==null?void 0:l.getCenter())&&(c.center=_),O!=null&&!Ye(O,l==null?void 0:l.getZoom())&&(c.zoom=O),M!=null&&!Ye(M,l==null?void 0:l.getBearing())&&(c.bearing=M),b!=null&&!Ye(b,l==null?void 0:l.getPitch())&&(c.pitch=b),Object.keys(c).length&&l.easeTo(c)}o.$$.dirty[0]&65552&&j&&!Ye(j,l==null?void 0:l.getBounds())&&(l==null||l.fitBounds(j)),o.$$.dirty[0]&33554448&&(z?l==null||l.doubleClickZoom.enable():l==null||l.doubleClickZoom.disable())},[S,u,m,w,l,r,i,n,_e,ie,Ge,we,_,O,b,M,j,a,k,I,C,H,G,U,A,z,R,y,v,fe,F,N,J,oe,$,se,ge,ue,Ae,s,f,Te]}class Li extends q{constructor(e){super(),Y(this,e,vi,wi,V,{map:17,mapContainer:1,class:2,style:18,diffStyleUpdates:19,center:12,zoom:13,pitch:14,bearing:15,bounds:16,hash:20,updateHash:21,loaded:0,minZoom:22,maxZoom:23,antialias:24,zoomOnDoubleClick:25,locale:26,interactive:27,attributionControl:28,cooperativeGestures:29,preserveDrawingBuffer:30,maxBounds:31,images:32,standardControls:3,filterLayers:33,transformRequest:34},null,[-1,-1])}}const Ci=o=>({marker:o&8}),Xt=o=>({marker:o[3]});function Si(o){let e,t,n,i,l,r,f;const s=o[19].default,a=ve(s,o,o[18],Xt);return{c(){e=Z("div"),a&&a.c(),g(e,"tabindex",t=o[1]?0:void 0),g(e,"role",n=o[1]?"button":void 0),Je(e,"z-index",o[2])},m(u,m){E(u,e,m),a&&a.m(e,null),l=!0,r||(f=[kt(o[7].call(null,e)),kt(i=Ai.call(null,e,o[0])),re(e,"click",yt(o[20])),re(e,"dblclick",yt(o[21])),re(e,"contextmenu",yt(o[22])),re(e,"mouseenter",o[23]),re(e,"mouseleave",o[24]),re(e,"mousemove",o[25]),re(e,"keydown",o[8])],r=!0)},p(u,[m]){a&&a.p&&(!l||m&262152)&&Le(a,s,u,u[18],l?Se(s,u[18],m,Ci):Ce(u[18]),Xt),(!l||m&2&&t!==(t=u[1]?0:void 0))&&g(e,"tabindex",t),(!l||m&2&&n!==(n=u[1]?"button":void 0))&&g(e,"role",n),i&&Hn(i.update)&&m&1&&i.update.call(null,u[0]),m&4&&Je(e,"z-index",u[2])},i(u){l||(L(a,u),l=!0)},o(u){T(a,u),l=!1},d(u){u&&P(e),a&&a.d(u),r=!1,tt(f)}}}function Ai(o,e){const t=o.className;function n(i){i?o.className=`${t} ${i}`:o.className=t}return n(e),{update:n}}function Ti(o,e,t){let n,i,l,{$$slots:r={},$$scope:f}=e,{marker:s=void 0}=e,{lngLat:a}=e,{class:u=void 0}=e,{interactive:m=!0}=e,{asButton:k=!1}=e,{draggable:I=!1}=e,{feature:_=null}=e,{offset:O=void 0}=e,{zIndex:b=void 0}=e,{rotation:M=0}=e,{opacity:j=1}=e;const C=xe(),{map:H,layerEvent:S,self:G}=Zo();ne(o,H,w=>t(27,l=w)),ne(o,S,w=>t(26,n=w)),ne(o,G,w=>t(3,i=w));function U(w){He(G,i=new Ie.Marker({element:w,rotation:M,draggable:I,offset:O,opacity:j.toString()}).setLngLat(a).addTo(l),i),t(11,s=i);const oe=()=>R("dragstart"),$=()=>{A(),R("drag")},ee=()=>{A(),R("dragend")};return I&&(i.on("dragstart",oe),i.on("drag",$),i.on("dragend",ee)),{destroy(){I&&(i==null||i.off("dragstart",oe),i==null||i.off("drag",$),i==null||i.off("dragend",ee)),t(11,s=void 0),i==null||i.remove()}}}function A(){let w=i==null?void 0:i.getLngLat();w&&(Array.isArray(a)?t(10,a=[w.lng,w.lat]):a&&"lon"in a?t(10,a={lon:w.lng,lat:w.lat}):t(10,a=w))}function z(w){w.key===" "&&(w.preventDefault(),w.stopPropagation(),R("click"))}function R(w){if(!m)return;let oe=i==null?void 0:i.getLngLat();if(!oe)return;const $=[oe.lng,oe.lat];let ee={map:l,marker:i,lngLat:$,features:[{type:"Feature",properties:(_==null?void 0:_.properties)??{},geometry:{type:"Point",coordinates:$}}]};He(S,n={...ee,layerType:"marker",type:w},n),C(w,ee)}const y=()=>R("click"),v=()=>R("dblclick"),fe=()=>R("contextmenu"),F=w=>{R("mouseenter")},N=()=>{R("mouseleave")},J=()=>R("mousemove");return o.$$set=w=>{"marker"in w&&t(11,s=w.marker),"lngLat"in w&&t(10,a=w.lngLat),"class"in w&&t(0,u=w.class),"interactive"in w&&t(12,m=w.interactive),"asButton"in w&&t(1,k=w.asButton),"draggable"in w&&t(13,I=w.draggable),"feature"in w&&t(14,_=w.feature),"offset"in w&&t(15,O=w.offset),"zIndex"in w&&t(2,b=w.zIndex),"rotation"in w&&t(16,M=w.rotation),"opacity"in w&&t(17,j=w.opacity),"$$scope"in w&&t(18,f=w.$$scope)},o.$$.update=()=>{o.$$.dirty&1032&&(i==null||i.setLngLat(a)),o.$$.dirty&32776&&(i==null||i.setOffset(O??[0,0])),o.$$.dirty&65544&&(i==null||i.setRotation(M)),o.$$.dirty&131080&&(i==null||i.setOpacity(j.toString()))},[u,k,b,i,H,S,G,U,z,R,a,s,m,I,_,O,M,j,f,r,y,v,fe,F,N,J]}class Ol extends q{constructor(e){super(),Y(this,e,Ti,Si,V,{marker:11,lngLat:10,class:0,interactive:12,asButton:1,draggable:13,feature:14,offset:15,zIndex:2,rotation:16,opacity:17})}}const Mi=o=>({features:o[0]&16,data:o[0]&16,map:o[0]&4,close:o[0]&1}),pt=o=>{var e;return{features:o[4],data:(e=o[4])==null?void 0:e[0],map:o[2],close:o[31]}};function xt(o){let e,t,n=(o[4]||o[3]instanceof Ie.Marker)&&$t(o);return{c(){e=Z("div"),n&&n.c()},m(i,l){E(i,e,l),n&&n.m(e,null),o[32](e),t=!0},p(i,l){i[4]||i[3]instanceof Ie.Marker?n?(n.p(i,l),l[0]&24&&L(n,1)):(n=$t(i),n.c(),L(n,1),n.m(e,null)):n&&(ye(),T(n,1,1,()=>{n=null}),be())},i(i){t||(L(n),t=!0)},o(i){T(n),t=!1},d(i){i&&P(e),n&&n.d(),o[32](null)}}}function $t(o){let e;const t=o[30].default,n=ve(t,o,o[29],pt);return{c(){n&&n.c()},m(i,l){n&&n.m(i,l),e=!0},p(i,l){n&&n.p&&(!e||l[0]&536870933)&&Le(n,t,i,i[29],e?Se(t,i[29],l,Mi):Ce(i[29]),pt)},i(i){e||(L(n,i),e=!0)},o(i){T(n,i),e=!1},d(i){n&&n.d(i)}}}function zi(o){let e,t,n=o[9].default&&xt(o);return{c(){n&&n.c(),e=Be()},m(i,l){n&&n.m(i,l),E(i,e,l),t=!0},p(i,l){i[9].default?n?(n.p(i,l),l[0]&512&&L(n,1)):(n=xt(i),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(ye(),T(n,1,1,()=>{n=null}),be())},i(i){t||(L(n),t=!0)},o(i){T(n),t=!1},d(i){i&&P(e),n&&n.d(i)}}}function Ii(o,e,t){let n,i,l,r,f,s,{$$slots:a={},$$scope:u}=e;const m=Un(a);let{closeButton:k=void 0}=e,{closeOnClickOutside:I=!0}=e,{closeOnClickInside:_=!1}=e,{closeOnMove:O=!1}=e,{openOn:b="click"}=e,{openIfTopMost:M=!0}=e,{focusAfterOpen:j=!0}=e,{anchor:C=void 0}=e,{offset:H=void 0}=e,{popupClass:S=void 0}=e,{maxWidth:G=void 0}=e,{lngLat:U=void 0}=e,{html:A=void 0}=e,{open:z=!1}=e;const R=xe(),{map:y,popupTarget:v,layerEvent:fe,layer:F,eventTopMost:N}=Ke();ne(o,y,d=>t(2,l=d)),ne(o,v,d=>t(3,f=d)),ne(o,fe,d=>t(28,r=d)),ne(o,F,d=>t(35,s=d));const J=["click","dblclick","contextmenu"];let w,oe=!1,$;function ee(){if(!w)return;let d=w.getElement();!d||d===$||($=d,b==="hover"&&($.style.pointerEvents="none"),$.addEventListener("mouseenter",()=>{t(24,oe=!0)},{passive:!0}),$.addEventListener("mouseleave",()=>{t(24,oe=!1)},{passive:!0}),$.addEventListener("click",()=>{_&&t(0,z=!1)},{passive:!0}))}vt(()=>{if(l)return l.on("click",Ae),l.on("contextmenu",Ae),typeof f=="string"&&(l.on("click",f,de),l.on("dblclick",f,de),l.on("contextmenu",f,de),l.on("mousemove",f,Ge),l.on("mouseleave",f,Oe),l.on("touchstart",f,ue),l.on("touchend",f,ke)),()=>{l!=null&&l.loaded()&&(w==null||w.remove(),l.off("click",Ae),l.off("contextmenu",Ae),f instanceof Ie.Marker?f.getPopup()===w&&f.setPopup(void 0):typeof f=="string"&&(l.off("click",f,de),l.off("dblclick",f,de),l.off("contextmenu",f,de),l.off("mousemove",f,Ge),l.off("mouseleave",f,Oe),l.off("touchstart",f,ue),l.off("touchend",f,ke)))}});function _e(d){return M?!("marker"in d)&&!Do(d)&&N(d)!==s:!1}let ie=null,se="normal";function de(d){d.type===b&&(_e(d)||("layerType"in d?d.layerType==="deckgl"?(t(10,U=d.coordinate),t(4,ie=d.object?[d.object]:null)):(t(10,U=d.lngLat),t(4,ie=d.features??[])):(t(10,U=d.lngLat),t(4,ie=d.features??[])),setTimeout(()=>t(0,z=!0))))}let ge=null;function ue(d){ge=d.point}function ke(d){if(!ge||b!=="hover")return;let B=ge.dist(d.point);ge=null,B<3&&(t(10,U=d.lngLat),t(4,ie=d.features??[]),w.isOpen()?t(25,se="justOpened"):(t(25,se="opening"),t(0,z=!0)))}function Oe(d){b!=="hover"||ge||se!=="normal"||(t(0,z=!1),t(4,ie=null))}function Ge(d){if(!(b!=="hover"||ge||se!=="normal")){if(_e(d)){t(0,z=!1),t(4,ie=null);return}t(0,z=!0),t(4,ie=d.features??[]),t(10,U=d.lngLat)}}function Ae(d){if(se==="justOpened"){t(25,se="normal");return}if(!I)return;let B=[$,f instanceof Ie.Marker?f==null?void 0:f.getElement():null];z&&w.isOpen()&&!B.some(ae=>ae==null?void 0:ae.contains(d.originalEvent.target))&&(d.type==="contextmenu"&&b==="contextmenu"||d.type!=="contextmenu")&&t(0,z=!1)}Fe(()=>{l&&(w!=null&&w.isOpen())&&w.remove()});let we;const Te=()=>t(0,z=!1);function c(d){Ue[d?"unshift":"push"](()=>{we=d,t(1,we)})}return o.$$set=d=>{"closeButton"in d&&t(11,k=d.closeButton),"closeOnClickOutside"in d&&t(12,I=d.closeOnClickOutside),"closeOnClickInside"in d&&t(13,_=d.closeOnClickInside),"closeOnMove"in d&&t(14,O=d.closeOnMove),"openOn"in d&&t(15,b=d.openOn),"openIfTopMost"in d&&t(16,M=d.openIfTopMost),"focusAfterOpen"in d&&t(17,j=d.focusAfterOpen),"anchor"in d&&t(18,C=d.anchor),"offset"in d&&t(19,H=d.offset),"popupClass"in d&&t(20,S=d.popupClass),"maxWidth"in d&&t(21,G=d.maxWidth),"lngLat"in d&&t(10,U=d.lngLat),"html"in d&&t(22,A=d.html),"open"in d&&t(0,z=d.open),"$$scope"in d&&t(29,u=d.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&14336&&t(27,n=k??(!I&&!_)),o.$$.dirty[0]&146685952&&(w||(t(23,w=new Ie.Popup({closeButton:n,closeOnClick:!1,closeOnMove:O,focusAfterOpen:j,maxWidth:G,className:S,anchor:C,offset:H})),$=w.getElement(),w.on("open",()=>{t(0,z=!0),ee(),R("open",w)}),w.on("close",()=>{t(0,z=!1),R("close",w)}),w.on("hover",()=>{R("hover",w)}))),o.$$.dirty[0]&8421384&&w&&f instanceof Ie.Marker&&(b==="click"?f.setPopup(w):f.getPopup()===w&&f.setPopup(void 0)),o.$$.dirty[0]&268468224&&J.includes(b)&&(r==null?void 0:r.type)===b&&(de(r),He(fe,r=null,r)),o.$$.dirty[0]&268468224&&t(26,i=b==="hover"&&((r==null?void 0:r.type)==="mousemove"||(r==null?void 0:r.type)==="mouseenter")),o.$$.dirty[0]&352354304&&b==="hover"&&fe&&(i&&r&&(r.layerType==="deckgl"?(t(10,U=r.coordinate),t(4,ie=r.object?[r.object]:null)):(t(10,U=r.lngLat),t(4,ie=r.features??[]))),t(0,z=(i||oe)??!1)),o.$$.dirty[0]&12582914&&(we?w.setDOMContent(we):A&&w.setHTML(A)),o.$$.dirty[0]&8389632&&U&&w.setLngLat(U),o.$$.dirty[0]&41943045&&l){let d=w.isOpen();z&&!d?(w.addTo(l),se==="opening"&&t(25,se="justOpened")):!z&&d&&w.remove()}},[z,we,l,f,ie,y,v,fe,F,m,U,k,I,_,O,b,M,j,C,H,S,G,A,w,oe,se,i,n,r,u,a,Te,c]}class El extends q{constructor(e){super(),Y(this,e,Ii,zi,V,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}function Bi(o){let e;const t=o[8].default,n=ve(t,o,o[15],null);return{c(){n&&n.c()},m(i,l){n&&n.m(i,l),e=!0},p(i,l){n&&n.p&&(!e||l&32768)&&Le(n,t,i,i[15],e?Se(t,i[15],l,null):Ce(i[15]),null)},i(i){e||(L(n,i),e=!0)},o(i){T(n,i),e=!1},d(i){n&&n.d(i)}}}function Oi(o){let e,t;return e=new st({props:{id:o[0],type:"raster",source:o[1],beforeId:o[2],beforeLayerType:o[3],paint:o[4],layout:o[5],minzoom:o[6],maxzoom:o[7],$$slots:{default:[Bi]},$$scope:{ctx:o}}}),e.$on("click",o[9]),e.$on("dblclick",o[10]),e.$on("contextmenu",o[11]),e.$on("mouseenter",o[12]),e.$on("mousemove",o[13]),e.$on("mouseleave",o[14]),{c(){X(e.$$.fragment)},m(n,i){p(e,n,i),t=!0},p(n,[i]){const l={};i&1&&(l.id=n[0]),i&2&&(l.source=n[1]),i&4&&(l.beforeId=n[2]),i&8&&(l.beforeLayerType=n[3]),i&16&&(l.paint=n[4]),i&32&&(l.layout=n[5]),i&64&&(l.minzoom=n[6]),i&128&&(l.maxzoom=n[7]),i&32768&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){x(e,n)}}}function Ei(o,e,t){let{$$slots:n={},$$scope:i}=e,{id:l=$e("raster-layer")}=e,{source:r=void 0}=e,{beforeId:f=void 0}=e,{beforeLayerType:s=void 0}=e,{paint:a}=e,{layout:u=void 0}=e,{minzoom:m=void 0}=e,{maxzoom:k=void 0}=e;function I(C){le.call(this,o,C)}function _(C){le.call(this,o,C)}function O(C){le.call(this,o,C)}function b(C){le.call(this,o,C)}function M(C){le.call(this,o,C)}function j(C){le.call(this,o,C)}return o.$$set=C=>{"id"in C&&t(0,l=C.id),"source"in C&&t(1,r=C.source),"beforeId"in C&&t(2,f=C.beforeId),"beforeLayerType"in C&&t(3,s=C.beforeLayerType),"paint"in C&&t(4,a=C.paint),"layout"in C&&t(5,u=C.layout),"minzoom"in C&&t(6,m=C.minzoom),"maxzoom"in C&&t(7,k=C.maxzoom),"$$scope"in C&&t(15,i=C.$$scope)},[l,r,f,s,a,u,m,k,n,I,_,O,b,M,j,i]}class Pl extends q{constructor(e){super(),Y(this,e,Ei,Oi,V,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}function Pi(o){let e,t,n,i;const l=[Hi,Ri],r=[];function f(s,a){return s[0]?0:1}return e=f(o),t=r[e]=l[e](o),{c(){t.c(),n=Be()},m(s,a){r[e].m(s,a),E(s,n,a),i=!0},p(s,a){t.p(s,a)},i(s){i||(L(t),i=!0)},o(s){T(t),i=!1},d(s){s&&P(n),r[e].d(s)}}}function Ri(o){let e,t;return e=new Vn({props:{errorMessage:"You shouldn't be able to view this app without being logged in!"}}),{c(){X(e.$$.fragment)},m(n,i){p(e,n,i),t=!0},p:W,i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){x(e,n)}}}function Hi(o){let e;return{c(){e=Z("p"),e.textContent=`Logged in as ${o[0]}`},m(t,n){E(t,e,n)},p:W,i:W,o:W,d(t){t&&P(e)}}}function Ui(o){let e=rn()=="Private (development)",t,n,i=e&&Pi(o);return{c(){i&&i.c(),t=Be()},m(l,r){i&&i.m(l,r),E(l,t,r),n=!0},p(l,[r]){e&&i.p(l,r)},i(l){n||(L(i),n=!0)},o(l){T(i),n=!1},d(l){l&&P(t),i&&i.d(l)}}}function Fi(o){return[Fn.get("email")]}class Rl extends q{constructor(e){super(),Y(this,e,Fi,Ui,V,{})}}const Gi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAQAAAC1QeVaAAAAAmJLR0QA/4ePzL8AAACgSURBVBjTY2D4D4cvGHoY2BlQwH8U2I4pCQKsDHFg3VglGRjEgazvmJLlQNjIcAnIOobbztcM5piSHUBYzxDNwMfAgMtOGKjHJpnJ8IwhhcGFYREDM6ZkCMMqoPHXGC4zBKEa5cPwBKioAAiXMIQz/GZ4yuCFkHzC4MjgxPCNoZaBjeE+kOXEcB0h+RjIdWG4AGU7w9lg4A0UesBgj8oGAP6nSFElh0b7AAAAAElFTkSuQmCC",ji="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAm0lEQVRIS+2U0Q2AIAxEYQM30Q3UDXQy3UhHkE0cweuHHxKTXpuQaALJ/cE9eoXGUHjFwv6hAtSEPxFRh2su0Ayd6pWzDUwFO8700AGNVggDaGAqkNYDYQBStBvCAtwQC8AF8QA2kORlJWjQmm4BSB9M5lIyC3CZswC3OQu4PxqVef7TmYikoSs0aQ19GyMMwDp+HvsrQI3v/xFduXoiGbi1DtQAAAAASUVORK5CYII=",Zi="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAJCAYAAAACTR1pAAAACXBIWXMAAANVAAADaAEorMqLAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAPtJREFUKJF9kT1LwwAURc+NAQsdtFYHa8HBSAcHJ0HBUVz0n7i4ObkoKAV/gYObm5ubu7OKFMQPECFuoQgWRJtch9aSYvSO770D53Flm58kM401BdkesAJcYw4m4scz8kf9qGBGe3ZuNcuCHcEmcGv7qBo/nWKnAzCpR8+/yMGWUWAcU0L6wn4DOgAhcFHEGEoBLGAqoK7te6Eb406h6vv0/NRnyBawDYyATzKFzcmXu9chmaQeHfesVDZeFGqAU0QrMy3BR5FRCKz31FxGGrMdIrpATVD98/0hVSlo16INB9oFLyEuldKsxA/n/4O59DvdB5YNVzKH+U6/AaiZavkY71DDAAAAAElFTkSuQmCC",Di="/atip/landing-page/assets/google_on_non_white_hdpi-368415f0.png";function Ni(o){let e,t,n,i;return{c(){e=Z("div"),t=new Gn(!1),n=Ze(` |
  `),i=Z("a"),i.textContent="MapLibre",t.a=n,g(i,"href","https://maplibre.org/"),g(i,"target","_blank"),g(e,"class","svelte-1yeu1m4")},m(l,r){E(l,e,r),t.m(o[0],e),D(e,n),D(e,i)},p(l,[r]){r&1&&t.p(l[0])},i:W,o:W,d(l){l&&P(e)}}}function Wi(o,e,t){let{attribution:n}=e;return o.$$set=i=>{"attribution"in i&&t(0,n=i.attribution)},[n]}class Vi extends q{constructor(e){super(),Y(this,e,Wi,Ni,V,{attribution:0})}}function en(o){let e,t,n,i;function l(s){o[9](s)}function r(s){o[10](s)}let f={style:o[4],bounds:o[0],hash:!0,images:[{id:"chevron",url:ji},{id:"cycle_parking",url:Gi},{id:"railway_station",url:Zi}],attributionControl:!1,$$slots:{default:[Qi]},$$scope:{ctx:o}};return o[3]!==void 0&&(f.loaded=o[3]),o[2]!==void 0&&(f.map=o[2]),e=new Li({props:f}),Ue.push(()=>We(e,"loaded",l)),Ue.push(()=>We(e,"map",r)),e.$on("error",qi),{c(){X(e.$$.fragment)},m(s,a){p(e,s,a),i=!0},p(s,a){const u={};a&16&&(u.style=s[4]),a&1&&(u.bounds=s[0]),a&2146&&(u.$$scope={dirty:a,ctx:s}),!t&&a&8&&(t=!0,u.loaded=s[3],Ve(()=>t=!1)),!n&&a&4&&(n=!0,u.map=s[2],Ve(()=>n=!1)),e.$set(u)},i(s){i||(L(e.$$.fragment,s),i=!0)},o(s){T(e.$$.fragment,s),i=!1},d(s){x(e,s)}}}function tn(o){let e,t,n,i,l,r,f,s,a,u;e=new ci({}),e.$on("zoomend",o[7]),e.$on("moveend",o[7]),n=new Vi({props:{attribution:o[6]}}),l=new mn({}),f=new cn({props:{position:"bottom-left",visualizePitch:!0}});let m=o[1]=="google"&&nn();const k=o[8].default,I=ve(k,o,o[11],null);return{c(){X(e.$$.fragment),t=te(),X(n.$$.fragment),i=te(),X(l.$$.fragment),r=te(),X(f.$$.fragment),s=te(),m&&m.c(),a=te(),I&&I.c()},m(_,O){p(e,_,O),E(_,t,O),p(n,_,O),E(_,i,O),p(l,_,O),E(_,r,O),p(f,_,O),E(_,s,O),m&&m.m(_,O),E(_,a,O),I&&I.m(_,O),u=!0},p(_,O){const b={};O&64&&(b.attribution=_[6]),n.$set(b),_[1]=="google"?m||(m=nn(),m.c(),m.m(a.parentNode,a)):m&&(m.d(1),m=null),I&&I.p&&(!u||O&2048)&&Le(I,k,_,_[11],u?Se(k,_[11],O,null):Ce(_[11]),null)},i(_){u||(L(e.$$.fragment,_),L(n.$$.fragment,_),L(l.$$.fragment,_),L(f.$$.fragment,_),L(I,_),u=!0)},o(_){T(e.$$.fragment,_),T(n.$$.fragment,_),T(l.$$.fragment,_),T(f.$$.fragment,_),T(I,_),u=!1},d(_){_&&(P(t),P(i),P(r),P(s),P(a)),x(e,_),x(n,_),x(l,_),x(f,_),m&&m.d(_),I&&I.d(_)}}}function nn(o){let e,t;return{c(){e=Z("img"),he(e.src,t=Di)||g(e,"src",t),g(e,"alt","Google logo"),g(e,"class","svelte-81xaz8")},m(n,i){E(n,e,i)},d(n){n&&P(e)}}}function Qi(o){let e,t,n=o[5]&&tn(o);return{c(){n&&n.c(),e=Be()},m(i,l){n&&n.m(i,l),E(i,e,l),t=!0},p(i,l){i[5]?n?(n.p(i,l),l&32&&L(n,1)):(n=tn(i),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(ye(),T(n,1,1,()=>{n=null}),be())},i(i){t||(L(n),t=!0)},o(i){T(n),t=!1},d(i){i&&P(e),n&&n.d(i)}}}function Ki(o){let e,t,n=o[4]&&en(o);return{c(){e=Z("div"),n&&n.c(),g(e,"class","map svelte-81xaz8")},m(i,l){E(i,e,l),n&&n.m(e,null),t=!0},p(i,[l]){i[4]?n?(n.p(i,l),l&16&&L(n,1)):(n=en(i),n.c(),L(n,1),n.m(e,null)):n&&(ye(),T(n,1,1,()=>{n=null}),be())},i(i){t||(L(n),t=!0)},o(i){T(n),t=!1},d(i){i&&P(e),n&&n.d()}}}function qi(o){console.error(`MapLibre error: ${o.detail.error}`)}function Yi(o,e,t){let n,i;ne(o,bt,b=>t(5,n=b)),ne(o,rt,b=>t(6,i=b));let{$$slots:l={},$$scope:r}=e,{style:f}=e,{startBounds:s=void 0}=e,a=null,u,m=!1;Lt("setCamera",!window.location.hash),window.location.hash&&(s=void 0),vt(async()=>{t(4,a=await Ot(f))});async function k(b){t(4,a=await Ot(f));let M=new URL(window.location.href);M.searchParams.set("style",b),window.history.replaceState(null,"",M.toString())}async function I(){f=="google"&&n&&He(rt,i=await pn(n),i)}function _(b){m=b,t(3,m)}function O(b){u=b,t(2,u)}return o.$$set=b=>{"style"in b&&t(1,f=b.style),"startBounds"in b&&t(0,s=b.startBounds),"$$scope"in b&&t(11,r=b.$$scope)},o.$$.update=()=>{o.$$.dirty&12&&m&&bt.set(u),o.$$.dirty&2&&k(f)},[s,f,u,m,a,n,i,I,l,_,O,r]}class Hl extends q{constructor(e){super(),Y(this,e,Yi,Ki,V,{style:1,startBounds:0})}}const Ji="/atip/landing-page/assets/help-d011708a.svg";function Xi(o){let e,t;const n=o[1].default,i=ve(n,o,o[4],null);return{c(){e=Z("div"),i&&i.c(),g(e,"class","govuk-prose")},m(l,r){E(l,e,r),i&&i.m(e,null),t=!0},p(l,r){i&&i.p&&(!t||r&16)&&Le(i,n,l,l[4],t?Se(n,l[4],r,null):Ce(l[4]),null)},i(l){t||(L(i,l),t=!0)},o(l){T(i,l),t=!1},d(l){l&&P(e),i&&i.d(l)}}}function pi(o){let e,t,n,i,l,r,f;function s(u){o[3](u)}let a={title:"Help",$$slots:{default:[Xi]},$$scope:{ctx:o}};return o[0]!==void 0&&(a.open=o[0]),n=new Qn({props:a}),Ue.push(()=>We(n,"open",s)),{c(){e=Z("button"),e.innerHTML=`<img src="${Ji}" title="Help" alt="Help"/>`,t=te(),X(n.$$.fragment),g(e,"class","svelte-gb6dzm")},m(u,m){E(u,e,m),E(u,t,m),p(n,u,m),l=!0,r||(f=re(e,"click",o[2]),r=!0)},p(u,[m]){const k={};m&16&&(k.$$scope={dirty:m,ctx:u}),!i&&m&1&&(i=!0,k.open=u[0],Ve(()=>i=!1)),n.$set(k)},i(u){l||(L(n.$$.fragment,u),l=!0)},o(u){T(n.$$.fragment,u),l=!1},d(u){u&&(P(e),P(t)),x(n,u),r=!1,f()}}}function xi(o,e,t){let{$$slots:n={},$$scope:i}=e,l=!1;const r=()=>t(0,l=!0);function f(s){l=s,t(0,l)}return o.$$set=s=>{"$$scope"in s&&t(4,i=s.$$scope)},[l,n,r,f,i]}class Ul extends q{constructor(e){super(),Y(this,e,xi,pi,V,{})}}function $i(o){let e;return{c(){e=Z("ul"),e.innerHTML=`<li><b>Click</b>
    on the map to open a new tab with a 3rd-party imagery provider</li> <li>Press <b>Escape</b>
    to exit this mode</li> <li>Cursor by <a href="https://icon-icons.com/icon/screenshot-cursor-camera/100181" target="_blank" rel="noreferrer">Luc Chaissac</a></li>`},m(t,n){E(t,e,n)},p:W,i:W,o:W,d(t){t&&P(e)}}}class el extends q{constructor(e){super(),Y(this,e,null,$i,V,{})}}const tl="/atip/landing-page/assets/camera_cursor-824d29b6.svg",{window:nl}=sn;function on(o){let e,t,n,i;const l=[il,ol],r=[];function f(s,a){return s[0]?0:1}return e=f(o),t=r[e]=l[e](o),{c(){t.c(),n=Be()},m(s,a){r[e].m(s,a),E(s,n,a),i=!0},p(s,a){let u=e;e=f(s),e===u?r[e].p(s,a):(ye(),T(r[u],1,1,()=>{r[u]=null}),be(),t=r[e],t?t.p(s,a):(t=r[e]=l[e](s),t.c()),L(t,1),t.m(n.parentNode,n))},i(s){i||(L(t),i=!0)},o(s){T(t),i=!1},d(s){s&&P(n),r[e].d(s)}}}function ol(o){let e,t;return e=new fn({props:{$$slots:{default:[ll]},$$scope:{ctx:o}}}),e.$on("click",o[8]),{c(){X(e.$$.fragment)},m(n,i){p(e,n,i),t=!0},p(n,i){const l={};i&8192&&(l.$$scope={dirty:i,ctx:n}),e.$set(l)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){x(e,n)}}}function il(o){let e,t,n,i,l,r,f;e=new fn({props:{$$slots:{default:[rl]},$$scope:{ctx:o}}}),e.$on("click",o[6]);function s(u){o[7](u)}let a={label:"Source",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return o[2].streetViewImagery!==void 0&&(a.value=o[2].streetViewImagery),n=new Kn({props:a}),Ue.push(()=>We(n,"value",s)),r=new Jn({props:{label:"Help",$$slots:{default:[fl]},$$scope:{ctx:o}}}),{c(){X(e.$$.fragment),t=te(),X(n.$$.fragment),l=te(),X(r.$$.fragment)},m(u,m){p(e,u,m),E(u,t,m),p(n,u,m),E(u,l,m),p(r,u,m),f=!0},p(u,m){const k={};m&8192&&(k.$$scope={dirty:m,ctx:u}),e.$set(k);const I={};!i&&m&4&&(i=!0,I.value=u[2].streetViewImagery,Ve(()=>i=!1)),n.$set(I);const _={};m&8192&&(_.$$scope={dirty:m,ctx:u}),r.$set(_)},i(u){f||(L(e.$$.fragment,u),L(n.$$.fragment,u),L(r.$$.fragment,u),f=!0)},o(u){T(e.$$.fragment,u),T(n.$$.fragment,u),T(r.$$.fragment,u),f=!1},d(u){u&&(P(t),P(l)),x(e,u),x(n,u),x(r,u)}}}function ll(o){let e;return{c(){e=Ze("Enable Street View")},m(t,n){E(t,e,n)},d(t){t&&P(e)}}}function rl(o){let e;return{c(){e=Ze("Disable Street View")},m(t,n){E(t,e,n)},d(t){t&&P(e)}}}function fl(o){let e,t;return e=new el({}),{c(){X(e.$$.fragment)},m(n,i){p(e,n,i),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){T(e.$$.fragment,n),t=!1},d(n){x(e,n)}}}function sl(o){let e,t,n,i,l=o[1]&&on(o);return{c(){l&&l.c(),e=Be()},m(r,f){l&&l.m(r,f),E(r,e,f),t=!0,n||(i=re(nl,"keydown",o[3]),n=!0)},p(r,[f]){r[1]?l?(l.p(r,f),f&2&&L(l,1)):(l=on(r),l.c(),L(l,1),l.m(e.parentNode,e)):l&&(ye(),T(l,1,1,()=>{l=null}),be())},i(r){t||(L(l),t=!0)},o(r){T(l),t=!1},d(r){r&&P(e),l&&l.d(r),n=!1,i()}}}function ul(o,e,t){let n;ne(o,It,b=>t(2,n=b));let{cfg:i}=e,{map:l}=e,{enabled:r}=e,{showControls:f=!0}=e,s=[];function a(){if(l){l.on("click",m),l.getCanvas().style.cursor=`url(${tl}), auto`;for(let b of i.getStreetViewRoadLayerNames(l))s.push([b,l.getPaintProperty(b,"line-color")]),l.setPaintProperty(b,"line-color","cyan")}}function u(){if(l){l.off("click",m),l.getCanvas().style.cursor="inherit";for(let[b,M]of s)l.setPaintProperty(b,"line-color",M);s=[]}}Fe(u);function m(b){if(!r)return;let M=b.lngLat.lng,j=b.lngLat.lat;n.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${j},${M}&cbp=11,0,0,0,0`,"_blank"):n.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${j}~${M}&style=x`,"_blank")}function k(b){r&&b.key=="Escape"&&(b.stopPropagation(),t(0,r=!1))}const I=()=>t(0,r=!1);function _(b){o.$$.not_equal(n.streetViewImagery,b)&&(n.streetViewImagery=b,It.set(n))}const O=()=>t(0,r=!0);return o.$$set=b=>{"cfg"in b&&t(4,i=b.cfg),"map"in b&&t(5,l=b.map),"enabled"in b&&t(0,r=b.enabled),"showControls"in b&&t(1,f=b.showControls)},o.$$.update=()=>{o.$$.dirty&1&&(r?a():u())},[r,f,n,k,i,l,I,_,O]}class Fl extends q{constructor(e){super(),Y(this,e,ul,sl,V,{cfg:4,map:5,enabled:0,showControls:1})}}const al="/atip/landing-page/assets/warning-81bba3f6.svg";function cl(o){let e,t;return{c(){e=Z("img"),he(e.src,t=al)||g(e,"src",t),g(e,"title",o[0]),g(e,"alt",o[0])},m(n,i){E(n,e,i)},p(n,[i]){i&1&&g(e,"title",n[0]),i&1&&g(e,"alt",n[0])},i:W,o:W,d(n){n&&P(e)}}}function ml(o,e,t){let{text:n}=e;return o.$$set=i=>{"text"in i&&t(0,n=i.text)},[n]}class Gl extends q{constructor(e){super(),Y(this,e,ml,cl,V,{text:0})}}export{hl as A,Cl as B,Ml as C,Sl as E,zl as F,Il as G,Ul as H,Bl as L,Ol as M,El as P,Pl as R,Fl as S,Gl as W,ti as a,vl as b,ft as c,yl as d,kl as e,bl as f,$e as g,Ll as h,_l as i,wl as j,el as k,ci as l,Hl as m,Rl as n,Al as o,st as p,Jn as q,ni as r,Tl as s,ji as t,Go as u,Gi as v,Zi as w};
