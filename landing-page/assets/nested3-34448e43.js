import{S as K,i as Z,s as J,c as b,m as w,t as m,h as g,k as v,a as L,e as y,d as D,f as d,a2 as je,a3 as Ze,j as h,w as Ve,a4 as yn,a5 as mt,l as S,g as p,x as G,b as se,r as Q,C as rt,ao as Hn,D as ot,E as st,F as it,u as be,p as we,z as ve,q as Y,A as Sn,B as Ut,Q as H,R as E,T as B,ap as En,aq as zr,M as ne,ak as fn,ag as Qt,K as Ne,N as le,O as oe,ac as Kt,ar as Ft,o as Cr,as as Hr,an as Er,aj as _n,H as Br,n as Ur}from"./stores-dc1f9b6e.js";import{q as nn,J as Wr,j as me,A as gn,Q as q,T as Ke,O as Yr,S as Qe,D as Je,C as Fe,U as ce,V as _e,R as Cn,I as At,W as Xt,X as Jr,M as Vr,s as Qr,b as Kr,c as Zr,e as Xr,K as Bn,Y as Un,Z as Jt,_ as Tr,F as xr,E as eo,L as to,n as Wn}from"./files-0dda6c35.js";import{g as Tn,u as Lr,r as Mr,a as Ir,c as Or,p as no,G as qt,e as Yn,L as ge,q as nt,l as lo,M as ro,P as oo,b as jr,E as re,H as so,s as te,F as De,R as io,j as Xe,C as Gt,t as ao,v as fo,w as uo,h as co,f as Jn,d as Vn,i as tn,W as Nr,B as po,S as $o,A as mo,n as _o,m as go,o as ho}from"./WarningIcon-2683bf0a.js";import{D as bo}from"./DefaultButton-0a46ccad.js";function Qn(o,e,l){const t=o.slice();return t[0]=e[l][0],t[3]=e[l][1],t}function Kn(o){let e,l;return{c(){e=y("div"),l=S(o[2]),D(e,"class","govuk-hint")},m(t,n){d(t,e,n),p(e,l)},p(t,n){n&4&&G(l,t[2])},d(t){t&&h(e)}}}function Zn(o){let e,l,t;return{c(){e=y("option"),e.__value=l=o[0],je(e,e.__value),D(e,"label",t=o[3])},m(n,r){d(n,e,r)},p(n,r){r&2&&l!==(l=n[0])&&(e.__value=l,je(e,e.__value)),r&2&&t!==(t=n[3])&&D(e,"label",t)},d(n){n&&h(e)}}}function wo(o){let e,l,t,n,r,s,f=o[2]&&Kn(o),i=me(o[1]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Zn(Qn(o,i,u));return{c(){f&&f.c(),e=L(),l=y("input"),t=L(),n=y("datalist");for(let u=0;u<a.length;u+=1)a[u].c();D(l,"class","govuk-input govuk-input--width-20"),D(l,"id",o[4]),D(l,"list",`${o[4]}-list`),D(n,"id",`${o[4]}-list`)},m(u,c){f&&f.m(u,c),d(u,e,c),d(u,l,c),je(l,o[0]),d(u,t,c),d(u,n,c);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(n,null);r||(s=[Ze(l,"input",o[6]),Ze(l,"change",o[5])],r=!0)},p(u,c){if(u[2]?f?f.p(u,c):(f=Kn(u),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null),c&1&&l.value!==u[0]&&je(l,u[0]),c&2){i=me(u[1]);let $;for($=0;$<i.length;$+=1){const _=Qn(u,i,$);a[$]?a[$].p(_,c):(a[$]=Zn(_),a[$].c(),a[$].m(n,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},d(u){u&&(h(e),h(l),h(t),h(n)),f&&f.d(u),Ve(a,u),r=!1,yn(s)}}}function vo(o){let e,l;return e=new nn({props:{label:o[3],id:o[4],$$slots:{default:[wo]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.label=t[3]),n&519&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ko(o,e,l){let{label:t}=e,{value:n}=e,{options:r}=e,{hint:s=""}=e,f=Wr();function i(u){mt.call(this,o,u)}function a(){n=this.value,l(0,n)}return o.$$set=u=>{"label"in u&&l(3,t=u.label),"value"in u&&l(0,n=u.value),"options"in u&&l(1,r=u.options),"hint"in u&&l(2,s=u.hint)},[n,r,s,t,f,i,a]}class Pr extends K{constructor(e){super(),Z(this,e,ko,vo,J,{label:3,value:0,options:1,hint:2})}}function yo(o){let e;return{c(){e=y("span"),D(e,"class","svelte-kzgqtg"),se(e,"background",o[0])},m(l,t){d(l,e,t)},p(l,[t]){t&1&&se(e,"background",l[0])},i:Q,o:Q,d(l){l&&h(e)}}}function So(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Se extends K{constructor(e){super(),Z(this,e,So,yo,J,{color:0})}}const Co=o=>({}),Xn=o=>({}),To=o=>({}),xn=o=>({});function Lo(o){let e,l,t,n,r,s,f,i,a,u,c;const $=o[4].sidebar,_=rt($,o,o[3],xn),k=o[4].main,T=rt(k,o,o[3],Xn);return{c(){e=y("div"),l=y("aside"),t=y("div"),_&&_.c(),n=L(),r=y("button"),r.textContent="→",f=L(),i=y("main"),T&&T.c(),D(t,"class","sidebar-content content-container svelte-1n0etgd"),D(r,"type","button"),D(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),D(l,"class",s=Hn(o[1]?"":"collapsed")+" svelte-1n0etgd"),se(l,"--sidebarWidth",o[0]),D(i,"class","svelte-1n0etgd"),D(e,"class","overall-layout svelte-1n0etgd")},m(C,j){d(C,e,j),p(e,l),p(l,t),_&&_.m(t,null),p(l,n),p(l,r),p(e,f),p(e,i),T&&T.m(i,null),a=!0,u||(c=Ze(r,"click",o[2]),u=!0)},p(C,[j]){_&&_.p&&(!a||j&8)&&ot(_,$,C,C[3],a?it($,C[3],j,To):st(C[3]),xn),(!a||j&2&&s!==(s=Hn(C[1]?"":"collapsed")+" svelte-1n0etgd"))&&D(l,"class",s),(!a||j&1)&&se(l,"--sidebarWidth",C[0]),T&&T.p&&(!a||j&8)&&ot(T,k,C,C[3],a?it(k,C[3],j,Co):st(C[3]),Xn)},i(C){a||(m(_,C),m(T,C),a=!0)},o(C){g(_,C),g(T,C),a=!1},d(C){C&&h(e),_&&_.d(C),T&&T.d(C),u=!1,c()}}}function Mo(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){l(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,s,f,n,t]}class Io extends K{constructor(e){super(),Z(this,e,Mo,Lo,J,{sidebarWidth:0})}}function el(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function tl(o){let e,l,t,n=o[1]+"",r,s,f;return l=new Se({props:{color:o[2]}}),{c(){e=y("li"),b(l.$$.fragment),t=L(),r=S(n),s=L()},m(i,a){d(i,e,a),w(l,e,null),p(e,t),p(e,r),p(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&G(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){g(l.$$.fragment,i),f=!1},d(i){i&&h(e),v(l)}}}function Oo(o){let e,l,t=me(o[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=tl(el(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){e=y("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,f){d(s,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[f]){if(f&1){t=me(s[0]);let i;for(i=0;i<t.length;i+=1){const a=el(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=tl(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),Ve(n,s)}}}function jo(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class xt extends K{constructor(e){super(),Z(this,e,jo,Oo,J,{rows:0})}}function nl(o){let e=o[0],l,t,n=ll(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&J(e,e=r[0])?(be(),g(n,1,1,Q),we(),n=ll(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function ll(o){let e;const l=o[16].default,t=rt(l,o,o[15],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&32768)&&ot(t,l,n,n[15],e?it(l,n[15],r,null):st(n[15]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function No(o){let e,l,t=o[0]&&nl(o);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=nl(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Po(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Tn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:$=null}=e,{minzoom:_=null}=e,{maxzoom:k=null}=e,{volatile:T=null}=e;const{map:C,self:j}=Lr();Y(o,C,M=>l(14,n=M)),Y(o,j,M=>l(0,t=M));let A,N=!0;return Sn(()=>{t&&A&&n&&(Mr(C,t,A),Ut(j,t=null,t),l(12,A=void 0))}),o.$$set=M=>{"id"in M&&l(3,f=M.id),"tiles"in M&&l(4,i=M.tiles),"tileSize"in M&&l(5,a=M.tileSize),"bounds"in M&&l(6,u=M.bounds),"scheme"in M&&l(7,c=M.scheme),"attribution"in M&&l(8,$=M.attribution),"minzoom"in M&&l(9,_=M.minzoom),"maxzoom"in M&&l(10,k=M.maxzoom),"volatile"in M&&l(11,T=M.volatile),"$$scope"in M&&l(15,s=M.$$scope)},o.$$.update=()=>{o.$$.dirty&24569&&n&&t!==f&&(Ut(j,t=f,t),Ir(n,t,Or({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:$,minzoom:_,maxzoom:k,volatile:T}),M=>n&&M===t,()=>{t&&(l(12,A=n==null?void 0:n.getSource(t)),l(13,N=!0))})),o.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,A=n==null?void 0:n.getSource(f))})),o.$$.dirty&12304&&A&&(N?l(13,N=!1):A.setTiles(i))},[t,C,j,f,i,a,u,c,$,_,k,T,A,N,n,s,r]}class Ro extends K{constructor(e){super(),Z(this,e,Po,No,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function Do(o){let e;const l=o[16].default,t=rt(l,o,o[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&ot(t,l,n,n[24],e?it(l,n[24],r,null):st(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Fo(o){let e,l,t;function n(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[Do]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new no({props:r}),H.push(()=>E(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!l&&f&1&&(l=!0,i.hovered=s[0],B(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ao(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=Tn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:$=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:j=!1}=e,{hovered:A=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:M=!0}=e;function O(F){A=F,l(0,A)}function I(F){mt.call(this,o,F)}function R(F){mt.call(this,o,F)}function P(F){mt.call(this,o,F)}function z(F){mt.call(this,o,F)}function X(F){mt.call(this,o,F)}function ae(F){mt.call(this,o,F)}return o.$$set=F=>{"id"in F&&l(1,r=F.id),"source"in F&&l(2,s=F.source),"sourceLayer"in F&&l(3,f=F.sourceLayer),"beforeId"in F&&l(4,i=F.beforeId),"beforeLayerType"in F&&l(5,a=F.beforeLayerType),"paint"in F&&l(6,u=F.paint),"layout"in F&&l(7,c=F.layout),"filter"in F&&l(8,$=F.filter),"applyToClusters"in F&&l(9,_=F.applyToClusters),"minzoom"in F&&l(10,k=F.minzoom),"maxzoom"in F&&l(11,T=F.maxzoom),"hoverCursor"in F&&l(12,C=F.hoverCursor),"manageHoverState"in F&&l(13,j=F.manageHoverState),"hovered"in F&&l(0,A=F.hovered),"eventsIfTopMost"in F&&l(14,N=F.eventsIfTopMost),"interactive"in F&&l(15,M=F.interactive),"$$scope"in F&&l(24,n=F.$$scope)},[A,r,s,f,i,a,u,c,$,_,k,T,C,j,N,M,t,O,I,R,P,z,X,ae,n]}class Ln extends K{constructor(e){super(),Z(this,e,Ao,Fo,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function rl(o){let e=o[0],l,t,n=ol(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&J(e,e=r[0])?(be(),g(n,1,1,Q),we(),n=ol(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function ol(o){let e;const l=o[15].default,t=rt(l,o,o[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&ot(t,l,n,n[14],e?it(l,n[14],r,null):st(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Go(o){let e,l,t=o[0]&&rl(o);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=rl(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function qo(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Tn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:$=null}=e,{attribution:_=null}=e,{minzoom:k=null}=e,{maxzoom:T=null}=e,{volatile:C=null}=e;if(i&&i.includes("pmtiles://")&&!En.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let M=new zr;En.addProtocol("pmtiles",M.tile)}const{map:j,self:A}=Lr();Y(o,j,M=>l(13,n=M)),Y(o,A,M=>l(0,t=M));let N;return Sn(()=>{t&&n&&(Mr(j,t,N),Ut(A,t=null,t),N=void 0)}),o.$$set=M=>{"id"in M&&l(3,f=M.id),"url"in M&&l(4,i=M.url),"tiles"in M&&l(5,a=M.tiles),"promoteId"in M&&l(6,u=M.promoteId),"bounds"in M&&l(7,c=M.bounds),"scheme"in M&&l(8,$=M.scheme),"attribution"in M&&l(9,_=M.attribution),"minzoom"in M&&l(10,k=M.minzoom),"maxzoom"in M&&l(11,T=M.maxzoom),"volatile"in M&&l(12,C=M.volatile),"$$scope"in M&&l(14,s=M.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==f&&(Ut(A,t=f,t),Ir(n,t,Or({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:$,attribution:_,minzoom:k,maxzoom:T,volatile:C}),M=>n&&M===t,()=>{t&&(N=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{N=n==null?void 0:n.getSource(f)}))},[t,j,A,f,i,a,u,c,$,_,k,T,C,n,s,r]}class pe extends K{constructor(e){super(),Z(this,e,qo,Go,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function sl(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function zo(o){let e,l,t;return l=new Qe({props:{$$slots:{default:[Eo]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=y("div"),b(l.$$.fragment)},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ho(o){let e,l,t,n,r,s,f,i,a,u;l=new Qe({props:{$$slots:{default:[Bo]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&il(o);r=new nt({props:{label:"Help",$$slots:{default:[Uo]},$$scope:{ctx:o}}}),f=new lo({}),f.$on("click",o[3]);let $=me(o[0]),_=[];for(let T=0;T<$.length;T+=1)_[T]=al(sl(o,$,T));const k=T=>g(_[T],1,1,()=>{_[T]=null});return{c(){e=y("div"),b(l.$$.fragment),t=L(),c&&c.c(),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L();for(let T=0;T<_.length;T+=1)_[T].c();a=ve()},m(T,C){d(T,e,C),w(l,e,null),d(T,t,C),c&&c.m(T,C),d(T,n,C),w(r,T,C),d(T,s,C),w(f,T,C),d(T,i,C);for(let j=0;j<_.length;j+=1)_[j]&&_[j].m(T,C);d(T,a,C),u=!0},p(T,C){const j={};C&16384&&(j.$$scope={dirty:C,ctx:T}),l.$set(j),T[2]?c?c.p(T,C):(c=il(T),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const A={};if(C&16384&&(A.$$scope={dirty:C,ctx:T}),r.$set(A),C&65){$=me(T[0]);let N;for(N=0;N<$.length;N+=1){const M=sl(T,$,N);_[N]?(_[N].p(M,C),m(_[N],1)):(_[N]=al(M),_[N].c(),m(_[N],1),_[N].m(a.parentNode,a))}for(be(),N=$.length;N<_.length;N+=1)k(N);we()}},i(T){if(!u){m(l.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T);for(let C=0;C<$.length;C+=1)m(_[C]);u=!0}},o(T){g(l.$$.fragment,T),g(r.$$.fragment,T),g(f.$$.fragment,T),_=_.filter(Boolean);for(let C=0;C<_.length;C+=1)g(_[C]);u=!1},d(T){T&&(h(e),h(t),h(n),h(s),h(i),h(a)),v(l),c&&c.d(T),v(r,T),v(f,T),Ve(_,T)}}}function Eo(o){let e;return{c(){e=S("Measure lines")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bo(o){let e;return{c(){e=S("Stop measuring")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function il(o){let e,l,t=o[2].toFixed(2)+"",n,r;return{c(){e=y("p"),l=S("Length: "),n=S(t),r=S(" meters")},m(s,f){d(s,e,f),p(e,l),p(e,n),p(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&G(n,t)},d(s){s&&h(e)}}}function Uo(o){let e;return{c(){e=y("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function Wo(o){let e,l;return{c(){e=y("span"),l=L(),D(e,"class","dot svelte-1tzt432")},m(t,n){d(t,e,n),d(t,l,n)},p:Q,d(t){t&&(h(e),h(l))}}}function al(o){let e,l,t;function n(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[Wo]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new ro({props:s}),H.push(()=>E(e,"lngLat",n)),e.$on("click",r),{c(){b(e.$$.fragment)},m(f,i){w(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!l&&i&1&&(l=!0,a.lngLat=o[11],B(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){g(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function Yo(o){let e,l;const t=[q("measurement-line"),{paint:{"line-color":Ke.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Jo(o){let e,l,t,n,r,s,f;const i=[Ho,zo],a=[];function u(c,$){return c[1]?0:1}return e=u(o),l=a[e]=i[e](o),n=new qt({props:{data:o[0].length<2?Yn():gn(o[0]),$$slots:{default:[Yo]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),b(n.$$.fragment)},m(c,$){a[e].m(c,$),d(c,t,$),w(n,c,$),r=!0,s||(f=Ze(window,"keydown",o[5]),s=!0)},p(c,[$]){let _=e;e=u(c),e===_?a[e].p(c,$):(be(),g(a[_],1,1,()=>{a[_]=null}),we(),l=a[e],l?l.p(c,$):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const k={};$&1&&(k.data=c[0].length<2?Yn():gn(c[0])),$&16384&&(k.$$scope={dirty:$,ctx:c}),n.$set(k)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){g(l),g(n.$$.fragment,c),r=!1},d(c){c&&h(t),a[e].d(c),v(n,c),s=!1,f()}}}function Vo(o,e,l){let t,n=!1,r=[];function s(k){return k.length<2?null:1e3*Yr(gn(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),l(0,r)}function c(k,T,C,j){C[j]=k,l(0,r)}const $=k=>u(k),_=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=s(r))},[r,n,t,f,i,a,u,c,$,_]}class Qo extends K{constructor(e){super(),Z(this,e,Vo,Jo,J,{})}}const Ko=o=>({props:o&16}),fl=o=>({props:xo(o[4])});function Zo(o){let e,l;const t=o[2].default,n=rt(t,o,o[3],fl);return{c(){e=y("div"),n&&n.c(),D(e,"class","govuk-prose")},m(r,s){d(r,e,s),n&&n.m(e,null),l=!0},p(r,s){n&&n.p&&(!l||s&24)&&ot(n,t,r,r[3],l?it(t,r[3],s,Ko):st(r[3]),fl)},i(r){l||(m(n,r),l=!0)},o(r){g(n,r),l=!1},d(r){r&&h(e),n&&n.d(r)}}}function Xo(o){let e,l;return e=new oo({props:{openOn:o[0],popupClass:o[1],openIfTopMost:!0,$$slots:{default:[Zo,({features:t})=>({4:t}),({features:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&1&&(r.openOn=t[0]),n&2&&(r.popupClass=t[1]),n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function xo(o){return o?o[0].properties??{}:{}}function es(o,e,l){let{$$slots:t={},$$scope:n}=e,{openOn:r="hover"}=e,{popupClass:s=void 0}=e;return o.$$set=f=>{"openOn"in f&&l(0,r=f.openOn),"popupClass"in f&&l(1,s=f.popupClass),"$$scope"in f&&l(3,n=f.$$scope)},[r,s,t,n]}class fe extends K{constructor(e){super(),Z(this,e,es,Xo,J,{openOn:0,popupClass:1})}}const ts="/atip/landing-page/assets/zoom_out_map-b2e1091a.svg";function ns(o){let e,l;return{c(){e=y("img"),Qt(e.src,l=ts)||D(e,"src",l),D(e,"alt","Zoom to show entire boundary")},m(t,n){d(t,e,n)},p:Q,d(t){t&&h(e)}}}function ls(o){let e,l;return e=new Qe({props:{title:"Zoom to show entire boundary",$$slots:{default:[ns]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function rs(o,e,l){let t;Y(o,fn,s=>l(2,t=s));let{boundaryGeojson:n}=e;function r(){let s=jr(n);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&l(1,n=s.boundaryGeojson)},[r,n]}class os extends K{constructor(e){super(),Z(this,e,rs,ls,J,{boundaryGeojson:1})}}const ee={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Re=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function ss(o){let e;return{c(){e=S(`Open Government License
  `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function is(o){let e,l,t,n,r;return t=new re({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ss]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("License: "),b(t.$$.fragment),n=S(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,f){d(s,e,f),p(e,l),w(t,e,null),p(e,n),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){g(t.$$.fragment,s),r=!1},d(s){s&&h(e),v(t)}}}class Ce extends K{constructor(e){super(),Z(this,e,null,is,J,{})}}function ul(o,e,l){const t=o.slice();return t[2]=e[l],t}function cl(o,e,l){const t=o.slice();return t[5]=e[l],t}function pl(o){let e,l;return{c(){e=y("span"),l=S(` 
    `),se(e,"background",o[5]),se(e,"width","100%"),se(e,"border","1px solid black")},m(t,n){d(t,e,n),p(e,l)},p(t,n){n&1&&se(e,"background",t[5])},d(t){t&&h(e)}}}function $l(o){let e,l=o[2]+"",t;return{c(){e=y("span"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&G(t,l)},d(n){n&&h(e)}}}function as(o){let e,l,t,n=me(o[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=pl(cl(o,n,i));let s=me(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=$l(ul(o,s,i));return{c(){e=y("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=y("div");for(let i=0;i<f.length;i+=1)f[i].c();se(e,"display","flex"),se(t,"display","flex"),se(t,"justify-content","space-between")},m(i,a){d(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);d(i,l,a),d(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=me(i[0]);let u;for(u=0;u<n.length;u+=1){const c=cl(i,n,u);r[u]?r[u].p(c,a):(r[u]=pl(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){s=me(i[1]);let u;for(u=0;u<s.length;u+=1){const c=ul(i,s,u);f[u]?f[u].p(c,a):(f[u]=$l(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:Q,o:Q,d(i){i&&(h(e),h(l),h(t)),Ve(r,i),Ve(f,i)}}}function fs(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Ae extends K{constructor(e){super(),Z(this,e,fs,as,J,{colorScale:0,limits:1})}}function $e(o){let e=new URLSearchParams(window.location.search).has(o),l=Ne(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),window.history.replaceState(null,"",n.toString())}),l}function zt(o,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Ne(n);return s.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),window.history.replaceState(null,"",i.toString())}),s}let dn=Ne(new Map),Vt=Ne(new Set);const us=o=>({}),ml=o=>({}),cs=o=>({}),_l=o=>({}),ps=o=>({}),gl=o=>({});function $s(o){let e;return{c(){e=S(o[2])},m(l,t){d(l,e,t)},p(l,t){t&4&&G(e,l[2])},d(l){l&&h(e)}}}function ms(o){let e,l,t;const n=o[7].icon,r=rt(n,o,o[10],gl);return{c(){r&&r.c(),e=L(),l=S(o[2])},m(s,f){r&&r.m(s,f),d(s,e,f),d(s,l,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&ot(r,n,s,s[10],t?it(n,s[10],f,ps):st(s[10]),gl),(!t||f&4)&&G(l,s[2])},i(s){t||(m(r,s),t=!0)},o(s){g(r,s),t=!1},d(s){s&&(h(e),h(l)),r&&r.d(s)}}}function _s(o){let e;const l=o[7].help,t=rt(l,o,o[10],_l);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&ot(t,l,n,n[10],e?it(l,n[10],r,cs):st(n[10]),_l)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function gs(o){let e;return{c(){e=S("X")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ds(o){let e,l,t,n,r,s,f,i,a;function u($){o[8]($)}let c={$$slots:{default:[ms]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),l=new Je({props:c}),H.push(()=>E(l,"checked",u)),s=new so({props:{$$slots:{default:[_s]},$$scope:{ctx:o}}}),i=new Qe({props:{$$slots:{default:[gs]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=y("div"),b(l.$$.fragment),n=L(),r=y("span"),b(s.$$.fragment),f=L(),b(i.$$.fragment),se(e,"display","flex"),se(e,"justify-content","space-between")},m($,_){d($,e,_),w(l,e,null),p(e,n),p(e,r),w(s,r,null),p(r,f),w(i,r,null),a=!0},p($,_){const k={};_&1028&&(k.$$scope={dirty:_,ctx:$}),!t&&_&1&&(t=!0,k.checked=$[0],B(()=>t=!1)),l.$set(k);const T={};_&1024&&(T.$$scope={dirty:_,ctx:$}),s.$set(T);const C={};_&1024&&(C.$$scope={dirty:_,ctx:$}),i.$set(C)},i($){a||(m(l.$$.fragment,$),m(s.$$.fragment,$),m(i.$$.fragment,$),a=!0)},o($){g(l.$$.fragment,$),g(s.$$.fragment,$),g(i.$$.fragment,$),a=!1},d($){$&&h(e),v(l),v(s),v(i)}}}function dl(o){let e;const l=o[7].controls,t=rt(l,o,o[10],ml);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&ot(t,l,n,n[10],e?it(l,n[10],r,us):st(n[10]),ml)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function hs(o){let e,l,t,n,r,s;e=new Je({props:{checked:o[4].has(o[1]),$$slots:{default:[$s]},$$scope:{ctx:o}}}),e.$on("change",o[5]),n=new Fe({props:{small:!0,$$slots:{default:[ds]},$$scope:{ctx:o}}});let f=o[0]&&dl(o);return{c(){b(e.$$.fragment),l=L(),t=y("div"),b(n.$$.fragment),r=L(),f&&f.c()},m(i,a){w(e,i,a),d(i,l,a),d(i,t,a),w(n,t,null),p(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=dl(i),f.c(),m(f,1),f.m(t,null)):f&&(be(),g(f,1,1,()=>{f=null}),we())},i(i){s||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),s=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),g(f),s=!1},d(i){i&&(h(l),h(t)),v(e,i),v(n),f&&f.d(),o[9](null)}}}function bs(o,e,l){let t;Y(o,Vt,k=>l(4,t=k));let{$$slots:n={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),Vt.set(t));let a=null;Sn(()=>{dn.update(k=>(k.delete(s),k))});function u(){Vt.update(k=>(k.has(s)?(k.delete(s),l(0,i=!1)):(k.add(s),l(0,i=!0)),k))}function c(){t.delete(s),Vt.set(t),l(0,i=!1)}function $(k){i=k,l(0,i)}function _(k){H[k?"unshift":"push"](()=>{a=k,l(3,a),l(1,s)})}return o.$$set=k=>{"name"in k&&l(1,s=k.name),"title"in k&&l(2,f=k.title),"show"in k&&l(0,i=k.show),"$$scope"in k&&l(10,r=k.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&dn.update(k=>(l(3,a.style.display="none",a),k.set(s,a),k))},[i,s,f,a,t,u,c,n,$,_,r]}class ue extends K{constructor(e){super(),Z(this,e,bs,hs,J,{name:1,title:2,show:0})}}function hl(o){const e=o[7].OA21CD;o[8]=e;const l=o[7][o[0].kind];o[9]=l}function ws(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ys]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ss]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("Population density data is from the 2021 census, via "),b(t.$$.fragment),n=S(". Output area boundaries from "),b(r.$$.fragment),s=S(".")},m(i,a){d(i,e,a),p(e,l),w(t,e,null),p(e,n),w(r,e,null),p(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function vs(o){let e,l,t,n,r,s,f,i,a;return r=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Cs]},$$scope:{ctx:o}}}),f=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ts]},$$scope:{ctx:o}}}),{c(){e=y("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=y("p"),n=S("Car/van availability data is from the 2021 census, via "),b(r.$$.fragment),s=S(". Output area boundaries from "),b(f.$$.fragment),i=S(".")},m(u,c){d(u,e,c),d(u,l,c),d(u,t,c),p(t,n),w(r,t,null),p(t,s),w(f,t,null),p(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){g(r.$$.fragment,u),g(f.$$.fragment,u),a=!1},d(u){u&&(h(e),h(l),h(t)),v(r),v(f)}}}function ks(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ls]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ms]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),n=S(". Output area boundaries from "),b(r.$$.fragment),s=S(".")},m(i,a){d(i,e,a),p(e,l),w(t,e,null),p(e,n),w(r,e,null),p(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function ys(o){let e;return{c(){e=S(`NOMIS TS006
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ss(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Cs(o){let e;return{c(){e=S(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ts(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ls(o){let e;return{c(){e=S(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ms(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Is(o){let e,l,t,n,r,s;const f=[ks,vs,ws],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(o),t=i[l]=f[l](o),r=new Ce({}),{c(){e=y("span"),t.c(),n=L(),b(r.$$.fragment),D(e,"slot","help")},m(u,c){d(u,e,c),i[l].m(e,null),p(e,n),w(r,e,null),s=!0},p(u,c){let $=l;l=a(u),l!==$&&(be(),g(i[$],1,1,()=>{i[$]=null}),we(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){g(t),g(r.$$.fragment,u),s=!1},d(u){u&&h(e),i[l].d(),v(r)}}}function Os(o){let e,l,t,n;return t=new Ae({props:{colorScale:o[1],limits:pt(o[0].kind).map(bl)}}),{c(){e=y("p"),e.textContent="(people per square kilometres)",l=L(),b(t.$$.fragment)},m(r,s){d(r,e,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&1&&(f.limits=pt(r[0].kind).map(bl)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&(h(e),h(l)),v(t,r)}}}function js(o){let e,l;return e=new Ae({props:{colorScale:o[1],limits:pt(o[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=pt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ns(o){let e,l;return e=new Ae({props:{colorScale:o[1],limits:pt(o[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=pt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ps(o){let e,l,t,n,r,s,f;function i(_){o[4](_)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),l=new Cn({props:a}),H.push(()=>E(l,"value",i));const u=[Ns,js,Os],c=[];function $(_,k){return _[0].kind=="percent_households_with_car"?0:_[0].kind=="average_cars_per_household"?1:_[0].kind=="population_density"?2:-1}return~(r=$(o))&&(s=c[r]=u[r](o)),{c(){e=y("div"),b(l.$$.fragment),n=L(),s&&s.c(),D(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(_,k){d(_,e,k),w(l,e,null),p(e,n),~r&&c[r].m(e,null),f=!0},p(_,k){const T={};!t&&k&1&&(t=!0,T.value=_[0].kind,B(()=>t=!1)),l.$set(T);let C=r;r=$(_),r===C?~r&&c[r].p(_,k):(s&&(be(),g(c[C],1,1,()=>{c[C]=null}),we()),~r?(s=c[r],s?s.p(_,k):(s=c[r]=u[r](_),s.c()),m(s,1),s.m(e,null)):s=null)},i(_){f||(m(l.$$.fragment,_),m(s),f=!0)},o(_){g(l.$$.fragment,_),g(s),f=!1},d(_){_&&h(e),v(l),~r&&c[r].d()}}}function Rs(o){let e,l,t,n=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=y("p"),l=S("There are "),t=y("b"),r=S(n),s=S(`
          people per square kilometre in `),i=S(f)},m(a,u){d(a,e,u),p(e,l),p(e,t),p(t,r),p(e,s),p(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&G(r,n),u&128&&f!==(f=a[8]+"")&&G(i,f)},d(a){a&&h(e)}}}function Ds(o){let e,l,t=o[8]+"",n,r,s,f=o[9]+"",i,a;return{c(){e=y("p"),l=S("Households in "),n=S(t),r=S(` have an average of
          `),s=y("b"),i=S(f),a=S(`
          cars`)},m(u,c){d(u,e,c),p(e,l),p(e,n),p(e,r),p(e,s),p(s,i),p(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&G(n,t),c&129&&f!==(f=u[9]+"")&&G(i,f)},d(u){u&&h(e)}}}function Fs(o){let e,l,t=o[9]+"",n,r,s,f=o[8]+"",i,a;return{c(){e=y("p"),l=y("b"),n=S(t),r=S("%"),s=S(`
          of households in `),i=S(f),a=S(" have 1 or more cars")},m(u,c){d(u,e,c),p(e,l),p(l,n),p(l,r),p(e,s),p(e,i),p(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&G(n,t),c&128&&f!==(f=u[8]+"")&&G(i,f)},d(u){u&&h(e)}}}function As(o){hl(o);let e;function l(r,s){return r[0].kind=="percent_households_with_car"?Fs:r[0].kind=="average_cars_per_household"?Ds:Rs}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){hl(r),t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Gs(o){let e,l;return e=new fe({props:{$$slots:{default:[As,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function qs(o){let e,l,t,n;const r=[q(He),{sourceLayer:He},{paint:{"fill-color":_e(["get",o[0].kind],pt(o[0].kind),o[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Gs]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new De({props:s}),e.$on("click",o[3]);const f=[q(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new ge({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(q(He)),u&0&&{sourceLayer:He},u&3&&{paint:{"fill-color":_e(["get",a[0].kind],pt(a[0].kind),a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?le(f,[u&0&&oe(q(`${He}-outline`)),u&0&&{sourceLayer:He},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function zs(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:He,title:"2021 census",$$slots:{controls:[Ps],help:[Is]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${He}.pmtiles`,$$slots:{default:[qs]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let He="census_output_areas";function Hs(o){return o.show?o.kind:null}function Es(o){return{show:!0,kind:o}}function pt(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const bl=o=>o.toLocaleString();function Bs(o,e,l){let t,n=ee.sequential_low_to_high,s=zt(He,{show:!1,kind:"percent_households_with_car"},Hs,Es);Y(o,s,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,n,s,f,i,a]}class Us extends K{constructor(e){super(),Z(this,e,Bs,zs,J,{})}}function Ws(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ys(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Js(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[Ys]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(", as of May 2024."),s=L(),b(f.$$.fragment),D(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Vs(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function Qs(o){let e,l;return e=new fe({props:{$$slots:{default:[Vs,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ks(o){let e,l,t,n;const r=[q(gt),{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Qs]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new De({props:s}),e.$on("click",xs);const f=[q(`${gt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new ge({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(q(gt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(q(`${gt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Zs(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:gt,title:Xs,$$slots:{help:[Js],icon:[Ws]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new qt({props:{data:`${ce()}/v1/${gt}.geojson`,$$slots:{default:[Ks]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let gt="combined_authorities",Xs="Combined authorities";function xs(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function ei(o,e,l){let t,n=ee.combined_authorities,r=$e(gt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ti extends K{constructor(e){super(),Z(this,e,ei,Zs,J,{})}}function ni(o){let e;return{c(){e=S(`DLUCH GIS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function li(o){let e;return{c(){e=S(`here
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ri(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[ni]},$$scope:{ctx:o}}}),s=new re({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[li]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("The 2019 English IMD scores come from "),b(n.$$.fragment),r=S(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),b(s.$$.fragment),f=S("."),i=L(),b(a.$$.fragment),D(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),w(n,l,null),p(l,r),w(s,l,null),p(l,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&64&&(_.$$scope={dirty:$,ctx:c}),n.$set(_);const k={};$&64&&(k.$$scope={dirty:$,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(s),v(a)}}}function oi(o){let e,l,t;return l=new Ae({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function si(o){let e,l=o[5].LSOA11CD+"",t,n,r,s=o[5].score+"",f,i,a,u,c,$=o[5].rank.toLocaleString()+"",_,k;return{c(){e=y("p"),t=S(l),n=S(` has an IMD score of
        `),r=y("b"),f=S(s),i=L(),a=y("p"),u=S("Rank: "),c=y("b"),_=S($),k=S(`
        / 32,844 LSOAs`)},m(T,C){d(T,e,C),p(e,t),p(e,n),p(e,r),p(r,f),d(T,i,C),d(T,a,C),p(a,u),p(a,c),p(c,_),p(a,k)},p(T,C){C&32&&l!==(l=T[5].LSOA11CD+"")&&G(t,l),C&32&&s!==(s=T[5].score+"")&&G(f,s),C&32&&$!==($=T[5].rank.toLocaleString()+"")&&G(_,$)},d(T){T&&(h(e),h(i),h(a))}}}function ii(o){let e,l;return e=new fe({props:{$$slots:{default:[si,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ai(o){let e,l,t,n;const r=[q(Ee),{sourceLayer:Ee},{paint:{"fill-color":_e(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[ii]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new De({props:s});const f=[q(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new ge({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?le(r,[u&0&&oe(q(Ee)),u&0&&{sourceLayer:Ee},u&6&&{paint:{"fill-color":_e(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?le(f,[u&0&&oe(q(`${Ee}-outline`)),u&0&&{sourceLayer:Ee},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function fi(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ee,title:ui,$$slots:{controls:[oi],help:[ri]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ee}.pmtiles`,$$slots:{default:[ai]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ee="imd",ui="Indices of Multiple Deprivation";function ci(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,2,4,6,8,10],s=$e(Ee);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class pi extends K{constructor(e){super(),Z(this,e,ci,fi,J,{})}}function $i(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function mi(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _i(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[mi]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(", as of May 2024."),s=L(),b(f.$$.fragment),D(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function gi(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function di(o){let e,l;return e=new fe({props:{$$slots:{default:[gi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function hi(o){let e,l,t,n;const r=[q(dt),{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[di]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new De({props:s}),e.$on("click",vi);const f=[q(`${dt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new ge({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(q(dt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(q(`${dt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function bi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:dt,title:wi,$$slots:{help:[_i],icon:[$i]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new qt({props:{data:`${ce()}/v1/${dt}.geojson`,$$slots:{default:[hi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let dt="local_authority_districts",wi="Local Authority Districts";function vi(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function ki(o,e,l){let t,n=ee.local_authority_districts,r=$e(dt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class yi extends K{constructor(e){super(),Z(this,e,ki,bi,J,{})}}function Si(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ci(o){let e;return{c(){e=S(`local authority
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ti(o){let e;return{c(){e=S(`national park authorit
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Li(o){let e;return{c(){e=S(`development corporation
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Mi(o){let e;return{c(){e=S("this map")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ii(o){let e;return{c(){e=S(`planning.data.gov.uk
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Oi(o){let e,l,t,n,r,s,f,i,a,u,c,$,_,k,T,C,j,A,N,M,O,I,R;return n=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ci]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Ti]},$$scope:{ctx:o}}}),i=new re({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Li]},$$scope:{ctx:o}}}),k=new re({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Mi]},$$scope:{ctx:o}}}),N=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ii]},$$scope:{ctx:o}}}),I=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("LPAs may be a "),b(n.$$.fragment),r=S(", "),b(s.$$.fragment),f=S("y, or "),b(i.$$.fragment),a=S("."),u=L(),c=y("p"),$=y("strong"),_=S(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),b(k.$$.fragment),T=S(" to get more details."),C=L(),j=y("p"),A=S("Data from ONS Geography via "),b(N.$$.fragment),M=S(", as of November 2022."),O=L(),b(I.$$.fragment),D(e,"slot","help")},m(P,z){d(P,e,z),p(e,l),p(l,t),w(n,l,null),p(l,r),w(s,l,null),p(l,f),w(i,l,null),p(l,a),p(e,u),p(e,c),p(c,$),p($,_),w(k,$,null),p($,T),p(e,C),p(e,j),p(j,A),w(N,j,null),p(j,M),p(e,O),w(I,e,null),R=!0},p(P,z){const X={};z&32&&(X.$$scope={dirty:z,ctx:P}),n.$set(X);const ae={};z&32&&(ae.$$scope={dirty:z,ctx:P}),s.$set(ae);const F={};z&32&&(F.$$scope={dirty:z,ctx:P}),i.$set(F);const x={};z&32&&(x.$$scope={dirty:z,ctx:P}),k.$set(x);const V={};z&32&&(V.$$scope={dirty:z,ctx:P}),N.$set(V)},i(P){R||(m(n.$$.fragment,P),m(s.$$.fragment,P),m(i.$$.fragment,P),m(k.$$.fragment,P),m(N.$$.fragment,P),m(I.$$.fragment,P),R=!0)},o(P){g(n.$$.fragment,P),g(s.$$.fragment,P),g(i.$$.fragment,P),g(k.$$.fragment,P),g(N.$$.fragment,P),g(I.$$.fragment,P),R=!1},d(P){P&&h(e),v(n),v(s),v(i),v(k),v(N),v(I)}}}function ji(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function Ni(o){let e,l;return e=new fe({props:{$$slots:{default:[ji,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Pi(o){let e,l,t,n;const r=[q(Be),{sourceLayer:Be},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ni]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new De({props:s});const f=[q(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new ge({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(q(Be)),u&0&&{sourceLayer:Be},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(q(`${Be}-outline`)),u&0&&{sourceLayer:Be},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ri(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Be,title:Di,$$slots:{help:[Oi],icon:[Si]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Be}.pmtiles`,$$slots:{default:[Pi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Be="local_planning_authorities",Di="Local Planning Authorities";function Fi(o,e,l){let t,n=ee.local_planning_authorities,r=$e(Be);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ai extends K{constructor(e){super(),Z(this,e,Fi,Ri,J,{})}}function Gi(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function qi(o){let e;return{c(){e=S(`Ordnance Survey Boundary-Line
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function zi(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[qi]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(", as of October 2024."),s=L(),b(f.$$.fragment),D(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Hi(o){let e,l=o[4].Name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&G(t,l)},d(n){n&&h(e)}}}function Ei(o){let e,l;return e=new fe({props:{$$slots:{default:[Hi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Bi(o){let e,l,t,n;const r=[q(Ue),{sourceLayer:Ue},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ei]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new De({props:s}),e.$on("click",Yi);const f=[q(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new ge({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(q(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(q(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ui(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ue,title:Wi,$$slots:{help:[zi],icon:[Gi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ue}.pmtiles`,$$slots:{default:[Bi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ue="parliamentary_constituencies",Wi="Parliamentary constituencies";function Yi(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ji(o,e,l){let t,n=ee.parliamentary_constituencies,r=$e(Ue);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Vi extends K{constructor(e){super(),Z(this,e,Ji,Ui,J,{})}}function Qi(o){let e;return{c(){e=S(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ki(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Qi]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Most layers show air quality data from "),b(n.$$.fragment),r=S(`. The measurements are annual means, in units of µgm
      `),s=y("sup"),s.textContent="3",f=S(`
      . Note the particulate matter layers are not corrected for natural sources.`),i=L(),b(a.$$.fragment),D(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),w(n,l,null),p(l,r),p(l,s),p(l,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&4096&&(_.$$scope={dirty:$,ctx:c}),n.$set(_)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function Zi(o){let e,l,t,n,r,s=o[3](o[0].pollutant)+"",f,i,a,u,c,$,_,k,T,C,j,A,N;function M(I){o[5](I)}let O={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return o[0].pollutant!==void 0&&(O.value=o[0].pollutant),l=new At({props:O}),H.push(()=>E(l,"value",M)),{c(){e=y("div"),b(l.$$.fragment),n=L(),r=y("p"),f=S(s),i=L(),a=y("div"),u=y("label"),c=S(`Opacity
        `),$=y("input"),_=L(),k=y("img"),D($,"type","range"),D($,"min","0"),D($,"max","100"),Qt(k.src,T=o[4](o[0].pollutant))||D(k,"src",T),D(k,"width",150),D(k,"alt",C=`Legend for ${o[0].pollutant} layer`),D(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(I,R){d(I,e,R),w(l,e,null),p(e,n),p(e,r),p(r,f),p(e,i),p(e,a),p(a,u),p(u,c),p(u,$),je($,o[0].opacity),p(e,_),p(e,k),j=!0,A||(N=[Ze($,"change",o[6]),Ze($,"input",o[6])],A=!0)},p(I,R){const P={};!t&&R&1&&(t=!0,P.value=I[0].pollutant,B(()=>t=!1)),l.$set(P),(!j||R&1)&&s!==(s=I[3](I[0].pollutant)+"")&&G(f,s),R&1&&je($,I[0].opacity),(!j||R&1&&!Qt(k.src,T=I[4](I[0].pollutant)))&&D(k,"src",T),(!j||R&1&&C!==(C=`Legend for ${I[0].pollutant} layer`))&&D(k,"alt",C)},i(I){j||(m(l.$$.fragment,I),j=!0)},o(I){g(l.$$.fragment,I),j=!1},d(I){I&&h(e),v(l),A=!1,yn(N)}}}function Xi(o){let e,l;const t=[q(ln),{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new io({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(q(ln)),s&1&&{paint:{"raster-opacity":r[0].opacity/100}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function xi(o){let e,l,t,n,r;function s(i){o[7](i)}let f={name:ln,title:ea,$$slots:{controls:[Zi],help:[Ki]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new Ro({props:{tiles:[o[1]],tileSize:256,$$slots:{default:[Xi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2&&(c.tiles=[i[1]]),a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let ln="pollution",ea="Pollution";function ta(o){return o.show?`${o.pollutant}/${o.opacity}`:null}function na(o){let[e,l]=o.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function la(o,e,l){let t,n,r,f=zt(ln,{show:!1,pollutant:"PM25_viridis",opacity:50},ta,na);Y(o,f,T=>l(0,r=T));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(T){return t[1]}function u(T){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${C}`}function c(T){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${C}`}function $(T){o.$$.not_equal(r.pollutant,T)&&(r.pollutant=T,f.set(r))}function _(){r.opacity=Kt(this.value),f.set(r)}function k(T){o.$$.not_equal(r.show,T)&&(r.show=T,f.set(r))}return o.$$.update=()=>{o.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),o.$$.dirty&1&&l(1,n=u(r.pollutant))},[r,n,f,a,c,$,_,k]}class ra extends K{constructor(e){super(),Z(this,e,la,xi,J,{})}}function oa(o){let e;return{c(){e=S(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function sa(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[oa]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=y("span"),l=y("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=y("p"),r=S("Data from June 2019, produced by "),b(s.$$.fragment),f=S(". See there for methodology details"),i=L(),b(a.$$.fragment),D(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(e,t),p(e,n),p(n,r),w(s,n,null),p(n,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&32&&(_.$$scope={dirty:$,ctx:c}),s.$set(_)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(s),v(a)}}}function ia(o){let e,l,t;return l=new Ae({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function aa(o){let e,l=o[4].noiseclass+"",t,n,r=wl(o[4].noiseclass)+"",s,f;return{c(){e=y("p"),t=S(l),n=S(" dB ("),s=S(r),f=S(")")},m(i,a){d(i,e,a),p(e,t),p(e,n),p(e,s),p(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&G(t,l),a&16&&r!==(r=wl(i[4].noiseclass)+"")&&G(s,r)},d(i){i&&h(e)}}}function fa(o){let e,l;return e=new fe({props:{$$slots:{default:[aa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ua(o){let e,l;const t=[q(ht),{sourceLayer:ht},{paint:{"fill-color":Xe(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":te(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[fa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new De({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(q(ht)),s&0&&{sourceLayer:ht},s&2&&{paint:{"fill-color":Xe(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":te(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ca(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:ht,title:pa,$$slots:{controls:[ia],help:[sa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${ht}.pmtiles`,$$slots:{default:[ua]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let ht="road_noise",pa="Road noise";function wl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function $a(o,e,l){let t,n=[ee.sequential_low_to_high[0],ee.sequential_low_to_high[2],ee.sequential_low_to_high[4]],r=$e(ht);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ma extends K{constructor(e){super(),Z(this,e,$a,ca,J,{})}}function _a(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ga(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function da(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[ga]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(", as of May 2023."),s=L(),b(f.$$.fragment),D(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function ha(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function ba(o){let e,l;return e=new fe({props:{$$slots:{default:[ha,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function wa(o){let e,l,t,n;const r=[q(We),{sourceLayer:We},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ba]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new De({props:s}),e.$on("click",ya);const f=[q(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new ge({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(q(We)),u&0&&{sourceLayer:We},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(q(`${We}-outline`)),u&0&&{sourceLayer:We},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function va(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:We,title:ka,$$slots:{help:[da],icon:[_a]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${We}.pmtiles`,$$slots:{default:[wa]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let We="wards",ka="Wards";function ya(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Sa(o,e,l){let t,n=ee.wards,r=$e(We);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ca extends K{constructor(e){super(),Z(this,e,Sa,va,J,{})}}function Ta(o){let e;return{c(){e=S("Open Data Commons Open Database License")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function La(o){let e,l,t,n;return t=new re({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ta]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("License: "),b(t.$$.fragment)},m(r,s){d(r,e,s),p(e,l),w(t,e,null),n=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&h(e),v(t)}}}class xe extends K{constructor(e){super(),Z(this,e,null,La,J,{})}}function Ma(o){let e,l,t;return l=new Se({props:{color:ee.bus_route_with_lane}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ia(o){let e;return{c(){e=S(`GTFS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Oa(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://gtfs.org",$$slots:{default:[Ia]},$$scope:{ctx:o}}}),a=new xe({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=y("p"),r=S("Note this data is from OpenStreetMap (as of 20 October 2024), not "),b(s.$$.fragment),f=S(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),b(a.$$.fragment),D(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(e,t),p(e,n),p(n,r),w(s,n,null),p(n,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&16&&(_.$$scope={dirty:$,ctx:c}),s.$set(_)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(s),v(a)}}}function ja(o){let e;return{c(){e=y("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Na(o){let e;return{c(){e=y("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Pa(o){let e;function l(r,s){return r[3].has_bus_lane?Na:ja}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Ra(o){let e,l;return e=new fe({props:{$$slots:{default:[Pa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Da(o){let e,l;const t=[q(bt),{sourceLayer:bt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ee.bus_route_with_lane,ee.bus_route_without_lane],"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ra]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(q(bt)),s&0&&{sourceLayer:bt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Fa(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:bt,title:Aa,$$slots:{help:[Oa],icon:[Ma]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${bt}.pmtiles`,$$slots:{default:[Da]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let bt="bus_routes",Aa="Bus routes";function Ga(o,e,l){let t,n=$e(bt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class qa extends K{constructor(e){super(),Z(this,e,Ga,Fa,J,{})}}function vl(o){const e=Ka(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function kl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function za(o){let e,l,t,n,r,s,f,i,a;return i=new xe({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=y("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),s=y("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),b(i.$$.fragment),D(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(e,f),w(i,e,null),a=!0},p:Q,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){g(i.$$.fragment,u),a=!1},d(u){u&&h(e),v(i)}}}function Ha(o){let e,l,t=o[13]+"",n,r,s;return e=new Se({props:{color:o[14]}}),{c(){b(e.$$.fragment),l=L(),n=S(t),r=L()},m(f,i){w(e,f,i),d(f,l,i),d(f,n,i),d(f,r,i),s=!0},p:Q,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n),h(r)),v(e,f)}}}function yl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[Ha]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Je({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],B(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ea(o){let e,l,t=me(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=yl(kl(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&5){t=me(s[2]);let i;for(i=0;i<t.length;i+=1){const a=kl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=yl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),Ve(n,s)}}}function Ba(o){let e,l,t;return l=new Fe({props:{small:!0,$$slots:{default:[Ea]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),D(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ua(o){vl(o);let e,l=o[10]+"",t,n,r,s,f,i=o[11]+"",a,u,c,$,_=o[12]+"",k;return{c(){e=y("h2"),t=S(l),n=L(),r=y("p"),s=S("Direction: "),f=y("b"),a=L(),u=y("p"),c=S("Width: "),$=y("b"),k=S(_)},m(T,C){d(T,e,C),p(e,t),d(T,n,C),d(T,r,C),p(r,s),p(r,f),f.innerHTML=i,d(T,a,C),d(T,u,C),p(u,c),p(u,$),p($,k)},p(T,C){vl(T),C&512&&l!==(l=T[10]+"")&&G(t,l),C&512&&i!==(i=T[11]+"")&&(f.innerHTML=i),C&512&&_!==(_=T[12]+"")&&G(k,_)},d(T){T&&(h(e),h(n),h(r),h(a),h(u))}}}function Wa(o){let e,l;return e=new fe({props:{$$slots:{default:[Ua,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ya(o){let e,l;const t=[q(wt),{sourceLayer:wt},{paint:{"line-color":Xe(["get","kind"],{track:ee.cycle_paths.track,lane:ee.cycle_paths.lane,shared_use_segregated:ee.cycle_paths.shared_use_segregated,shared_use_unsegregated:ee.cycle_paths.shared_use_unsegregated},"red"),"line-width":Re,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[Wa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new ge({props:n}),e.$on("click",Za),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&9?le(t,[s&0&&oe(q(wt)),s&0&&{sourceLayer:wt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ja(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:wt,title:Va,$$slots:{controls:[Ba],help:[za]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${wt}.pmtiles`,$$slots:{default:[Ya]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let wt="cycle_paths",Va="Cycle paths";function Qa(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function Ka(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function Za(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Xa(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s($){return $.show?n.filter(_=>$[_]).join(","):null}let f=zt(wt,r,s,Qa);Y(o,f,$=>l(0,t=$));let i=[["track","Separated tracks",ee.cycle_paths.track],["lane","Unprotected lanes",ee.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",ee.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",ee.cycle_paths.shared_use_unsegregated]];function a($){let _=n.filter(k=>$[k]);return["in",["get","kind"],["literal",_]]}function u($,_){o.$$.not_equal(t[_],$)&&(t[_]=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,f,i,a,u,c]}class xa extends K{constructor(e){super(),Z(this,e,Xa,Ja,J,{})}}function ef(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function tf(o){let e;return{c(){e=S(`Major Road Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function nf(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[tf]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from the "),b(n.$$.fragment),r=S(", as of September 2021."),s=L(),b(f.$$.fragment),D(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function lf(o){let e,l=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&G(t,l)},d(n){n&&h(e)}}}function rf(o){let e,l;return e=new fe({props:{$$slots:{default:[lf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function of(o){let e,l;const t=[q(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[rf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(q(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function sf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:vt,title:af,$$slots:{help:[nf],icon:[ef]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${vt}.pmtiles`,$$slots:{default:[of]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let vt="mrn",af="Major Road Network";function ff(o,e,l){let t,n=ee.mrn,r=$e(vt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class uf extends K{constructor(e){super(),Z(this,e,ff,sf,J,{})}}function cf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function pf(o){let e;return{c(){e=S(`OS Open Roads
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $f(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[pf]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=L(),b(f.$$.fragment),D(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function mf(o){let e,l=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&G(t,l)},d(n){n&&h(e)}}}function _f(o){let e,l;return e=new fe({props:{$$slots:{default:[mf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function gf(o){let e,l;const t=[q(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[_f]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(q(kt)),s&0&&{sourceLayer:kt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function df(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:kt,title:hf,$$slots:{help:[$f],icon:[cf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${kt}.pmtiles`,$$slots:{default:[gf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let kt="srn",hf="Strategic Road Network";function bf(o,e,l){let t,n=ee.srn,r=$e(kt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class wf extends K{constructor(e){super(),Z(this,e,bf,df,J,{})}}function vf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function kf(o){let e;return{c(){e=S(`National Cycle Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function yf(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[kf]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from Sustrans about the "),b(n.$$.fragment),r=S(", downloaded on 22/01/2024."),s=L(),b(f.$$.fragment),D(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Sl(o){let e,l,t,n=o[4].Desc_+"",r;return{c(){e=y("li"),l=S("Description: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Desc_+"")&&G(r,n)},d(s){s&&h(e)}}}function Cl(o){let e,l,t,n=o[4].Greenway+"",r;return{c(){e=y("li"),l=S("Is greenway: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Greenway+"")&&G(r,n)},d(s){s&&h(e)}}}function Tl(o){let e,l,t,n=o[4].RouteType+"",r;return{c(){e=y("li"),l=S("Route type: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteType+"")&&G(r,n)},d(s){s&&h(e)}}}function Ll(o){let e,l,t,n=o[4].RouteNo+"",r;return{c(){e=y("li"),l=S("Route number: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteNo+"")&&G(r,n)},d(s){s&&h(e)}}}function Ml(o){let e,l,t,n=o[4].RouteCat+"",r;return{c(){e=y("li"),l=S("Route Category: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteCat+"")&&G(r,n)},d(s){s&&h(e)}}}function Il(o){let e,l,t,n=o[4].OpenStatus+"",r;return{c(){e=y("li"),l=S("Open Status: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].OpenStatus+"")&&G(r,n)},d(s){s&&h(e)}}}function Ol(o){let e,l,t,n=o[4].Surface+"",r;return{c(){e=y("li"),l=S("Surface: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Surface+"")&&G(r,n)},d(s){s&&h(e)}}}function jl(o){let e,l,t,n=o[4].Quality+"",r;return{c(){e=y("li"),l=S("Quality: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Quality+"")&&G(r,n)},d(s){s&&h(e)}}}function Nl(o){let e,l,t,n=o[4].RoadClass+"",r;return{c(){e=y("li"),l=S("Road Class: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RoadClass+"")&&G(r,n)},d(s){s&&h(e)}}}function Sf(o){let e,l,t,n,r,s,f,i,a,u=o[4].Desc_&&Sl(o),c=o[4].Greenway&&Cl(o),$=o[4].RouteType&&Tl(o),_=o[4].RouteNo&&Ll(o),k=o[4].RouteCat&&Ml(o),T=o[4].OpenStatus&&Il(o),C=o[4].Surface&&Ol(o),j=o[4].Quality&&jl(o),A=o[4].RoadClass&&Nl(o);return{c(){e=y("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),$&&$.c(),n=L(),_&&_.c(),r=L(),k&&k.c(),s=L(),T&&T.c(),f=L(),C&&C.c(),i=L(),j&&j.c(),a=L(),A&&A.c()},m(N,M){d(N,e,M),u&&u.m(e,null),p(e,l),c&&c.m(e,null),p(e,t),$&&$.m(e,null),p(e,n),_&&_.m(e,null),p(e,r),k&&k.m(e,null),p(e,s),T&&T.m(e,null),p(e,f),C&&C.m(e,null),p(e,i),j&&j.m(e,null),p(e,a),A&&A.m(e,null)},p(N,M){N[4].Desc_?u?u.p(N,M):(u=Sl(N),u.c(),u.m(e,l)):u&&(u.d(1),u=null),N[4].Greenway?c?c.p(N,M):(c=Cl(N),c.c(),c.m(e,t)):c&&(c.d(1),c=null),N[4].RouteType?$?$.p(N,M):($=Tl(N),$.c(),$.m(e,n)):$&&($.d(1),$=null),N[4].RouteNo?_?_.p(N,M):(_=Ll(N),_.c(),_.m(e,r)):_&&(_.d(1),_=null),N[4].RouteCat?k?k.p(N,M):(k=Ml(N),k.c(),k.m(e,s)):k&&(k.d(1),k=null),N[4].OpenStatus?T?T.p(N,M):(T=Il(N),T.c(),T.m(e,f)):T&&(T.d(1),T=null),N[4].Surface?C?C.p(N,M):(C=Ol(N),C.c(),C.m(e,i)):C&&(C.d(1),C=null),N[4].Quality?j?j.p(N,M):(j=jl(N),j.c(),j.m(e,a)):j&&(j.d(1),j=null),N[4].RoadClass?A?A.p(N,M):(A=Nl(N),A.c(),A.m(e,null)):A&&(A.d(1),A=null)},d(N){N&&h(e),u&&u.d(),c&&c.d(),$&&$.d(),_&&_.d(),k&&k.d(),T&&T.d(),C&&C.d(),j&&j.d(),A&&A.d()}}}function Cf(o){let e,l;return e=new fe({props:{$$slots:{default:[Sf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Tf(o){let e,l;const t=[q(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Cf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(q(yt)),s&0&&{sourceLayer:yt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Lf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:yt,title:Mf,$$slots:{help:[yf],icon:[vf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${yt}.pmtiles`,$$slots:{default:[Tf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let yt="national_cycle_network",Mf="National Cycle Network";function If(o,e,l){let t,n=ee.national_cycle_network,r=$e(yt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Of extends K{constructor(e){super(),Z(this,e,If,Lf,J,{})}}function Pl(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function jf(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Nf(o){let e,l,t,n,r,s,f,i,a,u,c,$;return u=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[jf]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=y("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),s=y("p"),s.textContent="Data valid as of 1 January, 2024",f=L(),i=y("p"),a=S(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(u.$$.fragment),c=S("."),D(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(e,f),p(e,i),p(i,a),w(u,i,null),p(i,c),$=!0},p(_,k){const T={};k&4096&&(T.$$scope={dirty:k,ctx:_}),u.$set(T)},i(_){$||(m(u.$$.fragment,_),$=!0)},o(_){g(u.$$.fragment,_),$=!1},d(_){_&&h(e),v(u)}}}function Pf(o){let e,l,t;return l=new Ae({props:{colorScale:o[1],limits:o[3]}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Rf(o){let e,l,t=rn(o[6].angle+o[9])+"",n;return{c(){e=y("p"),l=new Ft(!1),n=S(` side of the road: no pavement
          `),l.a=n},m(r,s){d(r,e,s),l.m(t,e),p(e,n)},p(r,s){s&64&&t!==(t=rn(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&h(e)}}}function Df(o){let e,l,t=rn(o[6].angle+o[9])+"",n,r,s=o[7]+"",f,i,a,u=o[8]+"",c,$;return{c(){e=y("p"),l=new Ft(!1),n=S(` side of the road:
            `),r=y("b"),f=S(s),i=S(`
            m average,
            `),a=y("b"),c=S(u),$=S(`
            m minimum
          `),l.a=n},m(_,k){d(_,e,k),l.m(t,e),p(e,n),p(e,r),p(r,f),p(e,i),p(e,a),p(a,c),p(e,$)},p(_,k){k&64&&t!==(t=rn(_[6].angle+_[9])+"")&&l.p(t),k&64&&s!==(s=_[7]+"")&&G(f,s),k&64&&u!==(u=_[8]+"")&&G(c,u)},d(_){_&&h(e)}}}function Rl(o){let e;function l(r,s){return r[7]?Df:Rf}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Ff(o){let e,l=me([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Rl(Pl(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ve()},m(n,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(n,r);d(n,e,r)},p(n,r){if(r&64){l=me([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=Pl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Rl(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(n){n&&h(e),Ve(t,n)}}}function Af(o){let e,l;return e=new fe({props:{openOn:"hover",$$slots:{default:[Ff,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Gf(o){let e,l;const t=[q(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":_e(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":Re,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Af]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(q(St)),s&0&&{sourceLayer:St},t[2],t[3],s&6&&{paint:{"line-color":_e(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Re,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function qf(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:St,title:zf,$$slots:{controls:[Pf],help:[Nf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${Xt()}/v1/${St}.pmtiles`,$$slots:{default:[Gf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let St="pavement_widths",zf="OS Pavement widths";function Hf(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function rn(o){return`${Hf(o)} <span style="display: inline-block; rotate: ${o}deg">⬆</span>`}function Ef(o,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=$e(St);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class Bf extends K{constructor(e){super(),Z(this,e,Ef,qf,J,{})}}function Uf(o){let e;return{c(){e=S("the PCT website")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Wf(o){let e;return{c(){e=S("2017 journal article")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Yf(o){let e,l,t,n,r,s,f,i,a,u,c,$;return i=new re({props:{href:"https://www.pct.bike",$$slots:{default:[Uf]},$$scope:{ctx:o}}}),u=new re({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Wf]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=y("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),s=y("p"),f=S("See "),b(i.$$.fragment),a=S(" and "),b(u.$$.fragment),c=S(" for details on methodology and data sources."),D(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),w(i,s,null),p(s,a),w(u,s,null),p(s,c),$=!0},p(_,k){const T={};k&1024&&(T.$$scope={dirty:k,ctx:_}),i.$set(T);const C={};k&1024&&(C.$$scope={dirty:k,ctx:_}),u.$set(C)},i(_){$||(m(i.$$.fragment,_),m(u.$$.fragment,_),$=!0)},o(_){g(i.$$.fragment,_),g(u.$$.fragment,_),$=!1},d(_){_&&h(e),v(i),v(u)}}}function Jf(o){let e,l,t,n,r,s,f,i,a;l=new Ae({props:{colorScale:o[1],limits:o[2]}});function u(k){o[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),n=new Cn({props:c}),H.push(()=>E(n,"value",u));function $(k){o[6](k)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(_.value=o[0].scenario),f=new At({props:_}),H.push(()=>E(f,"value",$)),{c(){e=y("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment),D(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(k,T){d(k,e,T),w(l,e,null),p(e,t),w(n,e,null),p(e,s),w(f,e,null),a=!0},p(k,T){const C={};!r&&T&1&&(r=!0,C.value=k[0].tripPurpose,B(()=>r=!1)),n.$set(C);const j={};!i&&T&1&&(i=!0,j.value=k[0].scenario,B(()=>i=!1)),f.$set(j)},i(k){a||(m(l.$$.fragment,k),m(n.$$.fragment,k),m(f.$$.fragment,k),a=!0)},o(k){g(l.$$.fragment,k),g(n.$$.fragment,k),g(f.$$.fragment,k),a=!1},d(k){k&&h(e),v(l),v(n),v(f)}}}function Vf(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Ft(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Qf(o){let e,l;return e=new fe({props:{$$slots:{default:[Vf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Kf(o){let e,l;const t=[q(lt),{sourceLayer:lt},{paint:{"line-color":_e(["get",o[0].scenario],o[2],o[1]),"line-width":Re,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==lt?"visible":"none"}}];let n={$$slots:{default:[Qf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(q(lt)),s&0&&{sourceLayer:lt},s&7&&{paint:{"line-color":_e(["get",r[0].scenario],r[2],r[1]),"line-width":Re,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==lt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Zf(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Ft(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Xf(o){let e,l;return e=new fe({props:{$$slots:{default:[Zf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function xf(o){let e,l;const t=[q(_t),{sourceLayer:_t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":_e(["get",o[0].scenario],o[2],o[1]),"line-width":Re,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==_t?"visible":"none"}}];let n={$$slots:{default:[Xf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(q(_t)),s&0&&{sourceLayer:_t},t[2],t[3],s&7&&{paint:{"line-color":_e(["get",r[0].scenario],r[2],r[1]),"line-width":Re,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==_t?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function eu(o){let e,l,t,n,r,s,f;function i(u){o[7](u)}let a={name:Rr,title:tu,$$slots:{controls:[Jf],help:[Yf]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new ue({props:a}),H.push(()=>E(e,"show",i)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${lt}.pmtiles`,$$slots:{default:[Kf]},$$scope:{ctx:o}}}),s=new pe({props:{url:`pmtiles://${ce()}/v1/${_t}.pmtiles`,$$slots:{default:[xf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(u,c){w(e,u,c),d(u,t,c),w(n,u,c),d(u,r,c),w(s,u,c),f=!0},p(u,[c]){const $={};c&1025&&($.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,$.show=u[0].show,B(()=>l=!1)),e.$set($);const _={};c&1025&&(_.$$scope={dirty:c,ctx:u}),n.$set(_);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),s.$set(k)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),g(s.$$.fragment,u),f=!1},d(u){u&&(h(t),h(r)),v(e,u),v(n,u),v(s,u)}}}let Rr="pct",lt="pct_commute",_t="pct_school",tu="Propensity to Cycle Tool";function nu(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function lu(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function ru(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=zt(Rr,{show:!1,tripPurpose:lt,scenario:"baseline"},nu,lu);Y(o,f,$=>l(0,t=$));function i($){let _=$.baseline,k=$.gov_target,T=$.go_dutch,C=`<h2>Trip purpose: ${t.tripPurpose==lt?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)C+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let j=(k/_).toFixed(1),A=(T/_).toFixed(1);C+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${j}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${A}x</b> of baseline)</p>`}return C}function a($){o.$$.not_equal(t.tripPurpose,$)&&(t.tripPurpose=$,f.set(t))}function u($){o.$$.not_equal(t.scenario,$)&&(t.scenario=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,n,r,f,i,a,u,c]}class ou extends K{constructor(e){super(),Z(this,e,ru,eu,J,{})}}function su(o){let e;return{c(){e=S("Basemap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function iu(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function au(o){let e,l,t,n,r,s,f,i,a,u,c,$,_;return n=new re({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[su]},$$scope:{ctx:o}}}),c=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[iu]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),t=S("The average speed data is collected over a six-month period by "),b(n.$$.fragment),r=S(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=L(),f=y("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=y("p"),u=S(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(c.$$.fragment),$=S("."),D(e,"slot","help")},m(k,T){d(k,e,T),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),p(e,f),p(e,i),p(e,a),p(a,u),w(c,a,null),p(a,$),_=!0},p(k,T){const C={};T&512&&(C.$$scope={dirty:T,ctx:k}),n.$set(C);const j={};T&512&&(j.$$scope={dirty:T,ctx:k}),c.$set(j)},i(k){_||(m(n.$$.fragment,k),m(c.$$.fragment,k),_=!0)},o(k){g(n.$$.fragment,k),g(c.$$.fragment,k),_=!1},d(k){k&&h(e),v(n),v(c)}}}function fu(o){let e,l,t,n,r,s;l=new Ae({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),n=new Cn({props:i}),H.push(()=>E(n,"value",f)),{c(){e=y("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),D(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(a,u){d(a,e,u),w(l,e,null),p(e,t),w(n,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,B(()=>r=!1)),n.$set(c)},i(a){s||(m(l.$$.fragment,a),m(n.$$.fragment,a),s=!0)},o(a){g(l.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&h(e),v(l),v(n)}}}function uu(o){let e,l,t=o[8].indicative_mph+"",n,r,s,f,i,a=o[8].highest_mph+"",u,c,$=o[4][o[8].highest_description]+"",_,k;return{c(){e=y("p"),l=S("Posted speed limit: "),n=S(t),r=S(" mph"),s=L(),f=y("p"),i=S("Highest average speed: "),u=S(a),c=S(" mph (during "),_=S($),k=S(")")},m(T,C){d(T,e,C),p(e,l),p(e,n),p(e,r),d(T,s,C),d(T,f,C),p(f,i),p(f,u),p(f,c),p(f,_),p(f,k)},p(T,C){C&256&&t!==(t=T[8].indicative_mph+"")&&G(n,t),C&256&&a!==(a=T[8].highest_mph+"")&&G(u,a),C&256&&$!==($=T[4][T[8].highest_description]+"")&&G(_,$)},d(T){T&&(h(e),h(s),h(f))}}}function cu(o){let e,l;return e=new fe({props:{$$slots:{default:[uu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function pu(o){let e,l;const t=[q(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":_e(["get",o[0].kind],o[2],o[1]),"line-width":Re,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[cu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(q(Ct)),s&0&&{sourceLayer:Ct},t[2],t[3],s&7&&{paint:{"line-color":_e(["get",r[0].kind],r[2],r[1]),"line-width":Re,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function $u(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Ct,title:mu,$$slots:{controls:[fu],help:[au]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${Xt()}/v1/${Ct}.pmtiles`,$$slots:{default:[pu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ct="road_speeds",mu="OS Speeds";function _u(o){return o.show?o.kind:null}function gu(o){return{show:!0,kind:o}}function du(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,20,30,40,50,90],f=zt(Ct,{show:!1,kind:"indicative_mph"},_u,gu);Y(o,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class hu extends K{constructor(e){super(),Z(this,e,du,$u,J,{})}}function bu(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function wu(o){let e,l,t,n,r,s,f,i,a,u;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[bu]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=y("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),s=y("p"),f=S(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(i.$$.fragment),a=S("."),D(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),w(i,s,null),p(s,a),u=!0},p(c,$){const _={};$&64&&(_.$$scope={dirty:$,ctx:c}),i.$set(_)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){g(i.$$.fragment,c),u=!1},d(c){c&&h(e),v(i)}}}function vu(o){let e,l,t;return l=new Ae({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ku(o){let e,l,t,n=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",$,_;return{c(){e=y("p"),l=S("Average width: "),t=y("b"),r=S(n),s=S(`
        meters`),f=L(),i=y("p"),a=S("Minimum width: "),u=y("b"),$=S(c),_=S(`
        meters`)},m(k,T){d(k,e,T),p(e,l),p(e,t),p(t,r),p(e,s),d(k,f,T),d(k,i,T),p(i,a),p(i,u),p(u,$),p(i,_)},p(k,T){T&32&&n!==(n=k[5].average+"")&&G(r,n),T&32&&c!==(c=k[5].minimum+"")&&G($,c)},d(k){k&&(h(e),h(f),h(i))}}}function yu(o){let e,l;return e=new fe({props:{$$slots:{default:[ku,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Su(o){let e,l;const t=[q(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":_e(["get","average"],o[2],o[1]),"line-width":Re,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[yu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new ge({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(q(Tt)),s&0&&{sourceLayer:Tt},t[2],t[3],s&6&&{paint:{"line-color":_e(["get","average"],r[2],r[1]),"line-width":Re,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Cu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Tt,title:Tu,$$slots:{controls:[vu],help:[wu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${Xt()}/v1/${Tt}.pmtiles`,$$slots:{default:[Su]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Tt="road_widths",Tu="OS Road widths";function Lu(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,5,10,15,20,100],s=$e(Tt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Mu extends K{constructor(e){super(),Z(this,e,Lu,Cu,J,{})}}function Iu(o){let e,l,t;return l=new Se({props:{color:ee.trams}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ou(o){let e,l,t,n,r;return n=new xe({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),b(n.$$.fragment),D(e,"slot","help")},m(s,f){d(s,e,f),p(e,l),p(e,t),w(n,e,null),r=!0},p:Q,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function ju(o){let e,l;const t=[q(Lt),{sourceLayer:Lt},{paint:{"line-color":ee.trams,"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new ge({props:n}),e.$on("click",Ru),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(q(Lt)),s&0&&{sourceLayer:Lt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Nu(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Lt,title:Pu,$$slots:{help:[Ou],icon:[Iu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Lt}.pmtiles`,$$slots:{default:[ju]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Lt="trams",Pu="Trams";function Ru(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Du(o,e,l){let t,n=$e(Lt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Fu extends K{constructor(e){super(),Z(this,e,Du,Nu,J,{})}}function Au(o){let e;return{c(){e=S(`Bus Open Data Service
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Gu(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Au]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from the "),b(n.$$.fragment),r=S(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=L(),f=y("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),b(a.$$.fragment),D(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),p(e,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&64&&(_.$$scope={dirty:$,ctx:c}),n.$set(_)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function qu(o){let e,l,t,n,r;return n=new Ae({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("div"),l=y("p"),l.textContent="Peak hourly frequency:",t=L(),b(n.$$.fragment),D(e,"slot","controls")},m(s,f){d(s,e,f),p(e,l),p(e,t),w(n,e,null),r=!0},p:Q,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function zu(o){let e,l,t,n=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,$,_,k,T,C=o[5].peak_description+"",j,A,N,M,O,I=o[5].total+"",R,P,z=o[5].total_description+"",X,ae;return{c(){e=y("p"),l=S("Stop name: "),t=y("b"),r=S(n),s=L(),f=y("p"),i=S("Peak: "),a=y("b"),c=S(u),$=S(`
        buses during the busiest hour of any day`),_=L(),k=y("p"),T=S("The peak hour is "),j=S(C),A=L(),N=y("p"),M=S("Total buses per day: "),O=y("b"),R=S(I),P=S(`
        (for `),X=S(z),ae=S(", the busiest day of the week)")},m(F,x){d(F,e,x),p(e,l),p(e,t),p(t,r),d(F,s,x),d(F,f,x),p(f,i),p(f,a),p(a,c),p(f,$),d(F,_,x),d(F,k,x),p(k,T),p(k,j),d(F,A,x),d(F,N,x),p(N,M),p(N,O),p(O,R),p(N,P),p(N,X),p(N,ae)},p(F,x){x&32&&n!==(n=F[5].stop_name+"")&&G(r,n),x&32&&u!==(u=F[5].peak+"")&&G(c,u),x&32&&C!==(C=F[5].peak_description+"")&&G(j,C),x&32&&I!==(I=F[5].total+"")&&G(R,I),x&32&&z!==(z=F[5].total_description+"")&&G(X,z)},d(F){F&&(h(e),h(s),h(f),h(_),h(k),h(A),h(N))}}}function Hu(o){let e,l;return e=new fe({props:{$$slots:{default:[zu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Eu(o){let e,l;const t=[q(Mt),{sourceLayer:Mt},{paint:{"circle-color":_e(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Hu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Gt({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(q(Mt)),s&0&&{sourceLayer:Mt},s&6&&{paint:{"circle-color":_e(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Bu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Mt,title:Uu,$$slots:{controls:[qu],help:[Gu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Mt}.pmtiles`,$$slots:{default:[Eu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Mt="bus_stops",Uu="Bus stops";function Wu(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,3,10,20,30,100],s=$e(Mt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Yu extends K{constructor(e){super(),Z(this,e,Wu,Bu,J,{})}}function Ju(o){let e;return{c(){e=S("crossing")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Vu(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Ju]},$$scope:{ctx:o}}}),f=new xe({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),b(n.$$.fragment),r=S(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),b(f.$$.fragment),D(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Qu(o){let e,l,t;return l=new xt({props:{rows:o[2]}}),{c(){e=y("div"),b(l.$$.fragment),D(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ku(o){let e,l=Dl(o[4])+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=Dl(n[4])+"")&&G(t,l)},d(n){n&&h(e)}}}function Zu(o){let e,l;return e=new fe({props:{$$slots:{default:[Ku,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Xu(o){let e,l;const t=[q(It),{sourceLayer:It},{paint:{"circle-color":Xe(["get","crossing"],{traffic_signals:ee.signalized_crossing},ee.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Zu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Gt({props:n}),e.$on("click",tc),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(q(It)),s&0&&{sourceLayer:It},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function xu(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:It,title:ec,$$slots:{controls:[Qu],help:[Vu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${It}.pmtiles`,$$slots:{default:[Xu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let It="crossings",ec="Crossings";function Dl(o){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[o.crossing]??`Unknown crossing type (${o.crossing})`}function tc(o){window.open(`http://openstreetmap.org/node/${o.detail.features[0].properties.osm_id}`,"_blank")}function nc(o,e,l){let t,n=$e(It);Y(o,n,f=>l(0,t=f));let r=[["Signalized",ee.signalized_crossing],["Other",ee.other_crossing]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class lc extends K{constructor(e){super(),Z(this,e,nc,xu,J,{})}}function rc(o){let e;return{c(){e=S("OS Terrain 50")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function oc(o){let e,l,t,n,r,s,f,i,a,u,c,$,_,k;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[rc]},$$scope:{ctx:o}}}),c=new Ce({}),_=new xe({}),{c(){e=y("span"),l=y("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=y("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),s=y("p"),f=S("This layer is built from "),b(i.$$.fragment),a=S(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),b(c.$$.fragment),$=L(),b(_.$$.fragment),D(e,"slot","help")},m(T,C){d(T,e,C),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),w(i,s,null),p(s,a),p(e,u),w(c,e,null),p(e,$),w(_,e,null),k=!0},p(T,C){const j={};C&64&&(j.$$scope={dirty:C,ctx:T}),i.$set(j)},i(T){k||(m(i.$$.fragment,T),m(c.$$.fragment,T),m(_.$$.fragment,T),k=!0)},o(T){g(i.$$.fragment,T),g(c.$$.fragment,T),g(_.$$.fragment,T),k=!1},d(T){T&&h(e),v(i),v(c),v(_)}}}function sc(o){let e,l,t,n,r;return l=new Ae({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("span"),b(l.$$.fragment),t=L(),n=y("p"),n.innerHTML=`<img src="${ao}" alt="arrow"/>
      Arrows point uphill`,D(e,"slot","controls")},m(s,f){d(s,e,f),w(l,e,null),p(e,t),p(e,n),r=!0},p:Q,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){g(l.$$.fragment,s),r=!1},d(s){s&&h(e),v(l)}}}function ic(o){let e,l,t,n=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=y("p"),l=S("Gradient: "),t=y("b"),r=S(n),s=S(`
        %`)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(t,r),p(e,s)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&G(r,n)},d(f){f&&h(e)}}}function ac(o){let e,l;return e=new fe({props:{$$slots:{default:[ic,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function fc(o){let e,l,t,n;const r=[q(Ye),{sourceLayer:Ye},{manageHoverState:!0},{paint:{"line-color":_e(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":Re,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[ac]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new ge({props:s});const f=[q(Ye+"_arrows"),{sourceLayer:Ye},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new Ln({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?le(r,[u&0&&oe(q(Ye)),u&0&&{sourceLayer:Ye},r[2],u&6&&{paint:{"line-color":_e(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Re,"line-opacity":te(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?le(f,[u&0&&oe(q(Ye+"_arrows")),u&0&&{sourceLayer:Ye},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function uc(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ye,title:cc,$$slots:{controls:[sc],help:[oc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ye}.pmtiles`,$$slots:{default:[fc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ye="gradient",cc="Gradients";function pc(o,e,l){let t,n=ee.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=$e(Ye);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class $c extends K{constructor(e){super(),Z(this,e,pc,uc,J,{})}}function mc(o){let e,l;return{c(){e=y("img"),D(e,"slot","icon"),Qt(e.src,l=fo)||D(e,"src",l),D(e,"alt","a logo representing cycle parking")},m(t,n){d(t,e,n)},p:Q,d(t){t&&h(e)}}}function _c(o){let e;return{c(){e=S("OpenStreetMap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function gc(o){let e;return{c(){e=S("OpenStreetMap Carto")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function dc(o){let e,l,t,n,r,s,f,i,a,u,c,$;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[_c]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[gc]},$$scope:{ctx:o}}}),c=new xe({}),{c(){e=y("span"),l=y("p"),t=S("Cycle parking, according to "),b(n.$$.fragment),r=S(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=L(),f=y("p"),i=S("Icon from "),b(a.$$.fragment),u=L(),b(c.$$.fragment),D(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),p(e,f),p(f,i),w(a,f,null),p(e,u),w(c,e,null),$=!0},p(_,k){const T={};k&16&&(T.$$scope={dirty:k,ctx:_}),n.$set(T);const C={};k&16&&(C.$$scope={dirty:k,ctx:_}),a.$set(C)},i(_){$||(m(n.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),$=!0)},o(_){g(n.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),$=!1},d(_){_&&h(e),v(n),v(a),v(c)}}}function hc(o){let e,l,t,n=(o[3].capacity??"unknown")+"",r;return{c(){e=y("p"),l=S("Capacity: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&8&&n!==(n=(s[3].capacity??"unknown")+"")&&G(r,n)},d(s){s&&h(e)}}}function bc(o){let e,l;return e=new fe({props:{$$slots:{default:[hc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function wc(o){let e,l;const t=[q(Ot),{sourceLayer:Ot},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[bc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ln({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(q(Ot)),s&0&&{sourceLayer:Ot},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function vc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Ot,title:kc,$$slots:{help:[dc],icon:[mc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ot}.pmtiles`,$$slots:{default:[wc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ot="cycle_parking",kc="Cycle parking";function yc(o,e,l){let t,n=$e(Ot);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Sc extends K{constructor(e){super(),Z(this,e,yc,vc,J,{})}}function Cc(o){let e,l,t,n,r;return n=new xe({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),b(n.$$.fragment),D(e,"slot","help")},m(s,f){d(s,e,f),p(e,l),p(e,t),w(n,e,null),r=!0},p:Q,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function Tc(o){let e,l,t;return e=new Se({props:{color:ee.education.schools}}),{c(){b(e.$$.fragment),l=S(`
        Schools`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function Lc(o){let e,l,t;return e=new Se({props:{color:ee.education.colleges}}),{c(){b(e.$$.fragment),l=S(`
        Colleges`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function Mc(o){let e,l,t;return e=new Se({props:{color:ee.education.universities}}),{c(){b(e.$$.fragment),l=S(`
        Universities`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function Ic(o){let e,l,t,n,r,s,f,i,a;function u(C){o[3](C)}let c={$$slots:{default:[Tc]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new Je({props:c}),H.push(()=>E(e,"checked",u));function $(C){o[4](C)}let _={$$slots:{default:[Lc]},$$scope:{ctx:o}};o[0].college!==void 0&&(_.checked=o[0].college),n=new Je({props:_}),H.push(()=>E(n,"checked",$));function k(C){o[5](C)}let T={$$slots:{default:[Mc]},$$scope:{ctx:o}};return o[0].university!==void 0&&(T.checked=o[0].university),f=new Je({props:T}),H.push(()=>E(f,"checked",k)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment)},m(C,j){w(e,C,j),d(C,t,j),w(n,C,j),d(C,s,j),w(f,C,j),a=!0},p(C,j){const A={};j&2048&&(A.$$scope={dirty:j,ctx:C}),!l&&j&1&&(l=!0,A.checked=C[0].school,B(()=>l=!1)),e.$set(A);const N={};j&2048&&(N.$$scope={dirty:j,ctx:C}),!r&&j&1&&(r=!0,N.checked=C[0].college,B(()=>r=!1)),n.$set(N);const M={};j&2048&&(M.$$scope={dirty:j,ctx:C}),!i&&j&1&&(i=!0,M.checked=C[0].university,B(()=>i=!1)),f.$set(M)},i(C){a||(m(e.$$.fragment,C),m(n.$$.fragment,C),m(f.$$.fragment,C),a=!0)},o(C){g(e.$$.fragment,C),g(n.$$.fragment,C),g(f.$$.fragment,C),a=!1},d(C){C&&(h(t),h(s)),v(e,C),v(n,C),v(f,C)}}}function Oc(o){let e,l,t;return l=new Fe({props:{small:!0,$$slots:{default:[Ic]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),D(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function jc(o){let e,l=(o[10].name??"Unnamed institution")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&G(t,l)},d(n){n&&h(e)}}}function Nc(o){let e,l;return e=new fe({props:{$$slots:{default:[jc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Pc(o){let e,l;const t=[q(jt),{sourceLayer:jt},{paint:{"fill-color":Xe(["get","type"],{school:ee.education.schools,college:ee.education.colleges,university:ee.education.universities},"grey"),"fill-opacity":te(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Nc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new De({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&5?le(t,[s&0&&oe(q(jt)),s&0&&{sourceLayer:jt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Rc(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:jt,title:Dc,$$slots:{controls:[Oc],help:[Cc]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${jt}.pmtiles`,$$slots:{default:[Pc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let jt="education",Dc="Education";function Fc(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function Ac(o,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(_){return _.show?n.filter(k=>_[k]).join(","):null}let f=zt(jt,r,s,Fc);Y(o,f,_=>l(0,t=_));function i(_){let k=n.filter(T=>_[T]);return["in",["get","type"],["literal",k]]}function a(_){o.$$.not_equal(t.school,_)&&(t.school=_,f.set(t))}function u(_){o.$$.not_equal(t.college,_)&&(t.college=_,f.set(t))}function c(_){o.$$.not_equal(t.university,_)&&(t.university=_,f.set(t))}function $(_){o.$$.not_equal(t.show,_)&&(t.show=_,f.set(t))}return[t,f,i,a,u,c,$]}class Gc extends K{constructor(e){super(),Z(this,e,Ac,Rc,J,{})}}function qc(o){let e,l,t;return l=new Se({props:{color:ee.hospitals}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function zc(o){let e;return{c(){e=S("hospital")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Hc(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[zc]},$$scope:{ctx:o}}}),f=new xe({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),b(n.$$.fragment),r=S(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=L(),b(f.$$.fragment),D(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Ec(o){let e,l=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&G(t,l)},d(n){n&&h(e)}}}function Bc(o){let e,l;return e=new fe({props:{$$slots:{default:[Ec,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Uc(o){let e,l;const t=[q(Nt),{sourceLayer:Nt},{paint:{"fill-color":ee.hospitals,"fill-opacity":te(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Bc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new De({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(q(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Wc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Nt,title:Yc,$$slots:{help:[Hc],icon:[qc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Nt}.pmtiles`,$$slots:{default:[Uc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Nt="hospitals",Yc="Hospitals";function Jc(o,e,l){let t,n=$e(Nt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Vc extends K{constructor(e){super(),Z(this,e,Jc,Wc,J,{})}}function Qc(o){let e,l;return{c(){e=y("img"),D(e,"slot","icon"),Qt(e.src,l=uo)||D(e,"src",l),D(e,"alt","A logo representing a train")},m(t,n){d(t,e,n)},p:Q,d(t){t&&h(e)}}}function Kc(o){let e;return{c(){e=S("railway station")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Zc(o){let e;return{c(){e=S(`National Rail
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Xc(o){let e,l,t,n,r,s,f,i,a,u,c,$,_;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Kc]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Zc]},$$scope:{ctx:o}}}),$=new xe({}),{c(){e=y("div"),l=y("p"),t=S("This shows "),b(n.$$.fragment),r=S(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),f=y("p"),i=S("Icon from "),b(a.$$.fragment),u=S(". (Note that not all stations shown are National Rail.)"),c=L(),b($.$$.fragment),D(e,"slot","help")},m(k,T){d(k,e,T),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),p(e,f),p(f,i),w(a,f,null),p(f,u),p(e,c),w($,e,null),_=!0},p(k,T){const C={};T&16&&(C.$$scope={dirty:T,ctx:k}),n.$set(C);const j={};T&16&&(j.$$scope={dirty:T,ctx:k}),a.$set(j)},i(k){_||(m(n.$$.fragment,k),m(a.$$.fragment,k),m($.$$.fragment,k),_=!0)},o(k){g(n.$$.fragment,k),g(a.$$.fragment,k),g($.$$.fragment,k),_=!1},d(k){k&&h(e),v(n),v(a),v($)}}}function xc(o){let e,l=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&G(t,l)},d(n){n&&h(e)}}}function ep(o){let e,l;return e=new fe({props:{$$slots:{default:[xc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function tp(o){let e,l;const t=[q(Zt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[ep]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ln({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(q(Zt)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function np(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Zt,title:lp,$$slots:{help:[Xc],icon:[Qc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new qt({props:{data:`${ce()}/v1/${Zt}.geojson`,$$slots:{default:[tp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Zt="railway_stations",lp="Railway stations";function rp(o,e,l){let t,n=$e(Zt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class op extends K{constructor(e){super(),Z(this,e,rp,np,J,{})}}function sp(o){let e,l,t;return l=new Se({props:{color:ee.sports_spaces}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ip(o){let e;return{c(){e=S("sports pitches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ap(o){let e;return{c(){e=S("sports centres")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fp(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[ip]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[ap]},$$scope:{ctx:o}}}),a=new xe({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),b(n.$$.fragment),r=S(" and "),b(s.$$.fragment),f=S(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),b(a.$$.fragment),D(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),w(n,l,null),p(l,r),w(s,l,null),p(l,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&16&&(_.$$scope={dirty:$,ctx:c}),n.$set(_);const k={};$&16&&(k.$$scope={dirty:$,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(s),v(a)}}}function up(o){let e,l=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&G(t,l)},d(n){n&&h(e)}}}function cp(o){let e,l;return e=new fe({props:{$$slots:{default:[up,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function pp(o){let e,l;const t=[q(Pt),{sourceLayer:Pt},{paint:{"fill-color":ee.sports_spaces,"fill-opacity":te(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[cp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new De({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(q(Pt)),s&0&&{sourceLayer:Pt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function $p(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Pt,title:mp,$$slots:{help:[fp],icon:[sp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Pt}.pmtiles`,$$slots:{default:[pp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Pt="sports_spaces",mp="Sports spaces";function _p(o,e,l){let t,n=$e(Pt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class gp extends K{constructor(e){super(),Z(this,e,_p,$p,J,{})}}function dp(o){let e;return{c(){e=S("DfT stats19")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function hp(o){let e;return{c(){e=S("documented by DfT")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function bp(o){let e,l,t,n,r,s,f,i,a,u,c,$,_,k,T,C,j,A,N,M,O,I,R,P;return n=new re({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[dp]},$$scope:{ctx:o}}}),A=new re({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[hp]},$$scope:{ctx:o}}}),R=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("This layer shows collisions recorded in the "),b(n.$$.fragment),r=S(" dataset, as of 30 September 2024. Please note these limitations:"),s=L(),f=y("ul"),i=y("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=y("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),$=y("li"),$.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,_=L(),k=y("li"),k.textContent='The "pedestrians" category also include mobility scooters',T=L(),C=y("li"),j=S("All limitations "),b(A.$$.fragment),N=S(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),M=L(),O=y("p"),O.textContent="You can click a point to open the full report, thanks to CycleStreets.",I=L(),b(R.$$.fragment),D(e,"slot","help")},m(z,X){d(z,e,X),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,s),p(e,f),p(f,i),p(f,a),p(f,u),p(f,c),p(f,$),p(f,_),p(f,k),p(f,T),p(f,C),p(C,j),w(A,C,null),p(C,N),p(e,M),p(e,O),p(e,I),w(R,e,null),P=!0},p(z,X){const ae={};X&4194304&&(ae.$$scope={dirty:X,ctx:z}),n.$set(ae);const F={};X&4194304&&(F.$$scope={dirty:X,ctx:z}),A.$set(F)},i(z){P||(m(n.$$.fragment,z),m(A.$$.fragment,z),m(R.$$.fragment,z),P=!0)},o(z){g(n.$$.fragment,z),g(A.$$.fragment,z),g(R.$$.fragment,z),P=!1},d(z){z&&h(e),v(n),v(A),v(R)}}}function wp(o){let e;return{c(){e=S("Pedestrians")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function vp(o){let e;return{c(){e=S("Cyclists")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function kp(o){let e;return{c(){e=S("Horse riders")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function yp(o){let e;return{c(){e=S("Other")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Sp(o){let e,l,t,n,r,s,f,i,a,u,c,$;function _(O){o[10](O)}let k={$$slots:{default:[wp]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(k.checked=o[0].pedestrians),e=new Je({props:k}),H.push(()=>E(e,"checked",_));function T(O){o[11](O)}let C={$$slots:{default:[vp]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(C.checked=o[0].cyclists),n=new Je({props:C}),H.push(()=>E(n,"checked",T));function j(O){o[12](O)}let A={$$slots:{default:[kp]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(A.checked=o[0].horseRiders),f=new Je({props:A}),H.push(()=>E(f,"checked",j));function N(O){o[13](O)}let M={$$slots:{default:[yp]},$$scope:{ctx:o}};return o[0].other!==void 0&&(M.checked=o[0].other),u=new Je({props:M}),H.push(()=>E(u,"checked",N)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment)},m(O,I){w(e,O,I),d(O,t,I),w(n,O,I),d(O,s,I),w(f,O,I),d(O,a,I),w(u,O,I),$=!0},p(O,I){const R={};I&4194304&&(R.$$scope={dirty:I,ctx:O}),!l&&I&1&&(l=!0,R.checked=O[0].pedestrians,B(()=>l=!1)),e.$set(R);const P={};I&4194304&&(P.$$scope={dirty:I,ctx:O}),!r&&I&1&&(r=!0,P.checked=O[0].cyclists,B(()=>r=!1)),n.$set(P);const z={};I&4194304&&(z.$$scope={dirty:I,ctx:O}),!i&&I&1&&(i=!0,z.checked=O[0].horseRiders,B(()=>i=!1)),f.$set(z);const X={};I&4194304&&(X.$$scope={dirty:I,ctx:O}),!c&&I&1&&(c=!0,X.checked=O[0].other,B(()=>c=!1)),u.$set(X)},i(O){$||(m(e.$$.fragment,O),m(n.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),$=!0)},o(O){g(e.$$.fragment,O),g(n.$$.fragment,O),g(f.$$.fragment,O),g(u.$$.fragment,O),$=!1},d(O){O&&(h(t),h(s),h(a)),v(e,O),v(n,O),v(f,O),v(u,O)}}}function Cp(o){let e,l,t,n,r,s,f,i,a,u,c,$,_;return l=new Fe({props:{small:!0,$$slots:{default:[Sp]},$$scope:{ctx:o}}}),u=new xt({props:{rows:o[9]}}),{c(){e=y("div"),b(l.$$.fragment),t=L(),n=y("div"),r=S(`Filter years:
      `),s=y("input"),f=S(`
      -
      `),i=y("input"),a=L(),b(u.$$.fragment),D(s,"type","number"),D(s,"min",2017),D(s,"max",2023),D(s,"class","svelte-1ft65rw"),D(i,"type","number"),D(i,"min",2017),D(i,"max",2023),D(i,"class","svelte-1ft65rw"),D(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(k,T){d(k,e,T),w(l,e,null),p(e,t),p(e,n),p(n,r),p(n,s),je(s,o[0].minYear),p(n,f),p(n,i),je(i,o[0].maxYear),p(e,a),w(u,e,null),c=!0,$||(_=[Ze(s,"input",o[14]),Ze(i,"input",o[15])],$=!0)},p(k,T){const C={};T&4194305&&(C.$$scope={dirty:T,ctx:k}),l.$set(C),T&1&&Kt(s.value)!==k[0].minYear&&je(s,k[0].minYear),T&1&&Kt(i.value)!==k[0].maxYear&&je(i,k[0].maxYear)},i(k){c||(m(l.$$.fragment,k),m(u.$$.fragment,k),c=!0)},o(k){g(l.$$.fragment,k),g(u.$$.fragment,k),c=!1},d(k){k&&h(e),v(l),v(u),$=!1,yn(_)}}}function Fl(o){let e,l,t,n=o[3][o[21].pedestrian_location]+"",r;return{c(){e=y("p"),l=S("Pedestrian location: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&2097152&&n!==(n=s[3][s[21].pedestrian_location]+"")&&G(r,n)},d(s){s&&h(e)}}}function Al(o){let e,l,t,n=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=y("p"),l=S("Pedestrian movement: "),t=y("b"),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&2097152&&n!==(n=s[4][s[21].pedestrian_movement]+"")&&G(r,n)},d(s){s&&h(e)}}}function Tp(o){let e,l,t,n=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,$,_,k,T,C=Gl(o[21])+"",j,A,N,M,O,I=o[21].pedestrian_location&&Fl(o),R=o[21].pedestrian_movement&&Al(o);return{c(){e=y("p"),l=S("Year: "),t=y("b"),r=S(n),s=L(),f=y("p"),i=S("Severity: "),a=y("b"),c=S(u),$=L(),_=y("p"),k=S("Casualties: "),T=y("b"),j=S(C),A=L(),I&&I.c(),N=L(),R&&R.c(),M=L(),O=y("p"),O.textContent="Click to open full report in CycleStreets"},m(P,z){d(P,e,z),p(e,l),p(e,t),p(t,r),d(P,s,z),d(P,f,z),p(f,i),p(f,a),p(a,c),d(P,$,z),d(P,_,z),p(_,k),p(_,T),p(T,j),d(P,A,z),I&&I.m(P,z),d(P,N,z),R&&R.m(P,z),d(P,M,z),d(P,O,z)},p(P,z){z&2097152&&n!==(n=P[21].year+"")&&G(r,n),z&2097152&&u!==(u=P[5][P[21].severity]+"")&&G(c,u),z&2097152&&C!==(C=Gl(P[21])+"")&&G(j,C),P[21].pedestrian_location?I?I.p(P,z):(I=Fl(P),I.c(),I.m(N.parentNode,N)):I&&(I.d(1),I=null),P[21].pedestrian_movement?R?R.p(P,z):(R=Al(P),R.c(),R.m(M.parentNode,M)):R&&(R.d(1),R=null)},d(P){P&&(h(e),h(s),h(f),h($),h(_),h(A),h(N),h(M),h(O)),I&&I.d(P),R&&R.d(P)}}}function Lp(o){let e,l;return e=new fe({props:{$$slots:{default:[Tp,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Mp(o){let e,l;const t=[q(Rt),{sourceLayer:Rt},{paint:{"circle-color":_e(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Lp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Gt({props:n}),e.$on("click",Np),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&451?le(t,[s&0&&oe(q(Rt)),s&0&&{sourceLayer:Rt},s&448&&{paint:{"circle-color":_e(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ip(o){let e,l,t,n,r;function s(i){o[16](i)}let f={name:Rt,title:Op,$$slots:{controls:[Cp],help:[bp]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Rt}.pmtiles`,$$slots:{default:[Mp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Rt="stats19",Op="Stats19";function jp(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Gl(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function Np(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function Pp(o,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(P){return P.show?`${r.filter(X=>P[X]).join(",")}/${P.minYear}/${P.maxYear}`:null}let i=zt(Rt,s,f,jp);Y(o,i,P=>l(0,n=P));function a(P,z,X,ae,F,x){let V=["any"];return n.pedestrians&&V.push(["get","pedestrian"]),n.cyclists&&V.push(["get","cyclist"]),n.horseRiders&&V.push(["get","horse_rider"]),n.other&&V.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],V]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},$={1:"Fatal",2:"Serious",3:"Slight"},_=ee.sequential_low_to_high[4],k=ee.sequential_low_to_high[2],T=ee.sequential_low_to_high[0],C=[["Fatal",_],["Serious",k],["Slight",T]];function j(P){o.$$.not_equal(n.pedestrians,P)&&(n.pedestrians=P,i.set(n))}function A(P){o.$$.not_equal(n.cyclists,P)&&(n.cyclists=P,i.set(n))}function N(P){o.$$.not_equal(n.horseRiders,P)&&(n.horseRiders=P,i.set(n))}function M(P){o.$$.not_equal(n.other,P)&&(n.other=P,i.set(n))}function O(){n.minYear=Kt(this.value),i.set(n)}function I(){n.maxYear=Kt(this.value),i.set(n)}function R(P){o.$$.not_equal(n.show,P)&&(n.show=P,i.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,$,_,k,T,C,j,A,N,M,O,I,R]}class Rp extends K{constructor(e){super(),Z(this,e,Pp,Ip,J,{})}}function Dp(o){let e;return{c(){e=S(`DfT road statistics
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Fp(o){let e;return{c(){e=S("methodology")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ap(o){let e,l,t,n,r,s,f,i,a,u,c,$;return n=new re({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Dp]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Fp]},$$scope:{ctx:o}}}),c=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("AADF (annual average daily flow) data from "),b(n.$$.fragment),r=S(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),b(s.$$.fragment),f=S(" for details and caveats about the measurements."),i=L(),a=y("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),b(c.$$.fragment),D(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(l,t),w(n,l,null),p(l,r),w(s,l,null),p(l,f),p(e,i),p(e,a),p(e,u),w(c,e,null),$=!0},p(_,k){const T={};k&128&&(T.$$scope={dirty:k,ctx:_}),n.$set(T);const C={};k&128&&(C.$$scope={dirty:k,ctx:_}),s.$set(C)},i(_){$||(m(n.$$.fragment,_),m(s.$$.fragment,_),m(c.$$.fragment,_),$=!0)},o(_){g(n.$$.fragment,_),g(s.$$.fragment,_),g(c.$$.fragment,_),$=!1},d(_){_&&h(e),v(n),v(s),v(c)}}}function Gp(o){let e,l,t;return l=new Ae({props:{colorScale:o[1],limits:o[3]}}),{c(){e=y("span"),b(l.$$.fragment),D(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function qp(o){let e,l=o[6].location+"",t,n,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",$,_,k,T,C=o[6].year+"",j,A,N,M=o[6].pedal_cycles.toLocaleString()+"",O,I,R,P,z,X=o[6].method+"",ae;return{c(){e=y("h2"),t=S(l),n=L(),r=y("p"),s=S("Total motor vehicles ("),i=S(f),a=S(` AADF):
        `),u=y("b"),$=S(c),_=L(),k=y("p"),T=S("Total pedal cycles ("),j=S(C),A=S(` AADF):
        `),N=y("b"),O=S(M),I=L(),R=y("p"),P=S("Count method: "),z=y("b"),ae=S(X)},m(F,x){d(F,e,x),p(e,t),d(F,n,x),d(F,r,x),p(r,s),p(r,i),p(r,a),p(r,u),p(u,$),d(F,_,x),d(F,k,x),p(k,T),p(k,j),p(k,A),p(k,N),p(N,O),d(F,I,x),d(F,R,x),p(R,P),p(R,z),p(z,ae)},p(F,x){x&64&&l!==(l=F[6].location+"")&&G(t,l),x&64&&f!==(f=F[6].year+"")&&G(i,f),x&64&&c!==(c=F[6].motor_vehicles.toLocaleString()+"")&&G($,c),x&64&&C!==(C=F[6].year+"")&&G(j,C),x&64&&M!==(M=F[6].pedal_cycles.toLocaleString()+"")&&G(O,M),x&64&&X!==(X=F[6].method+"")&&G(ae,X)},d(F){F&&(h(e),h(n),h(r),h(_),h(k),h(I),h(R))}}}function zp(o){let e,l;return e=new fe({props:{$$slots:{default:[qp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Hp(o){let e,l;const t=[q(Dt),{sourceLayer:Dt},{paint:{"circle-color":_e(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[zp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Gt({props:n}),e.$on("click",Up),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(q(Dt)),s&0&&{sourceLayer:Dt},s&6&&{paint:{"circle-color":_e(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ep(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Dt,title:Bp,$$slots:{controls:[Gp],help:[Ap]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Dt}.pmtiles`,$$slots:{default:[Hp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Dt="vehicle_counts",Bp="Vehicle counts";function Up(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function Wp(o,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=$e(Dt);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class Yp extends K{constructor(e){super(),Z(this,e,Wp,Ep,J,{})}}function ql(o,e,l){const t=o.slice();return t[6]=e[l],t}function Jp(o){let e;return{c(){e=y("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,D(e,"slot","help")},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function Vp(o){let e,l,t;return l=new xt({props:{rows:o[3]}}),{c(){e=y("div"),b(l.$$.fragment),D(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Qp(o){let e,l=o[5]["Issue ID"]+"",t,n,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=y("h2"),t=S(l),n=S(" - "),s=S(r),f=L(),i=y("p"),u=S(a)},m(c,$){d(c,e,$),p(e,t),p(e,n),p(e,s),d(c,f,$),d(c,i,$),p(i,u)},p(c,$){$&32&&l!==(l=c[5]["Issue ID"]+"")&&G(t,l),$&32&&r!==(r=c[5].Code+"")&&G(s,r),$&32&&a!==(a=c[5]["Issue Stage"]+"")&&G(u,a)},d(c){c&&(h(e),h(f),h(i))}}}function zl(o){let e,l=o[6]+"",t,n,r,s=o[5][o[6]]+"",f,i;return{c(){e=y("p"),t=S(l),n=S(`:
            `),r=y("b"),f=S(s),i=L()},m(a,u){d(a,e,u),p(e,t),p(e,n),p(e,r),p(r,f),p(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&G(f,s)},d(a){a&&h(e)}}}function Kp(o){let e,l=me(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=zl(ql(o,l,n));return{c(){e=y("div");for(let n=0;n<t.length;n+=1)t[n].c();se(e,"max-width","30vw"),se(e,"max-height","60vh"),se(e,"overflow","auto")},m(n,r){d(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&36){l=me(n[2]);let s;for(s=0;s<l.length;s+=1){const f=ql(n,l,s);t[s]?t[s].p(f,r):(t[s]=zl(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&h(e),Ve(t,n)}}}function Zp(o){let e,l,t,n;return e=new fe({props:{openOn:"hover",$$slots:{default:[Qp,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Kp,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Xp(o){let e,l;const t=[q(on),{paint:{"circle-color":Xe(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Zp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Gt({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&9?le(t,[s&0&&oe(q(on)),s&8&&{paint:{"circle-color":Xe(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function xp(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:on,title:e$,$$slots:{controls:[Vp],help:[Jp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new qt({props:{data:`${Xt()}/v1/problems.geojson.gz`,$$slots:{default:[Xp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let on="problems",e$="Issues & Conflicts";function t$(o,e,l){let t,n=$e(on);Y(o,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,s,f]}class n$ extends K{constructor(e){super(),Z(this,e,t$,xp,J,{})}}function l$(o){let e;function l(r,s){return r[2]<=100?s$:o$}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:Q,o:Q,d(r){r&&h(e),n.d(r)}}}function r$(o){let e,l;return e=new Qe({props:{$$slots:{default:[i$]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function o$(o){let e;return{c(){e=y("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function s$(o){let e,l,t;return{c(){e=y("label"),l=S(`Downloading scheme data
      `),t=y("progress"),t.value=o[2],D(t,"class","svelte-q3473n")},m(n,r){d(n,e,r),p(e,l),p(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&h(e)}}}function i$(o){let e;return{c(){e=S("Load latest scheme data")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function a$(o){let e,l,t,n;const r=[r$,l$],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(l=s[e]=r[e](o)),{c(){l&&l.c(),t=ve()},m(i,a){~e&&s[e].m(i,a),d(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(l&&(be(),g(s[u],1,1,()=>{s[u]=null}),we()),~e?(l=s[e],l?l.p(i,a):(l=s[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){g(l),n=!1},d(i){i&&h(t),~e&&s[e].d(i)}}}function f$(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await Jr(`${Xt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,s=c)});l(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}Cr(async()=>{n&&await f()});async function i(){l(0,n=!0),await f()}return o.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,s,i,t]}class u$ extends K{constructor(e){super(),Z(this,e,f$,a$,J,{loadFile:4})}}const sn=Ne({type:"FeatureCollection",features:[],schemes:{}}),hn=Ne(new Map),Hl=Ne(""),El=Ne(""),bn=Ne({type:"FeatureCollection",features:[],schemes:{}}),wn=Ne(new Map),Bl=Ne(""),Ul=Ne("");function c$(o){let e={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},l=new Map,t={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},n=new Map;for(let[r,s]of Object.entries(o.schemes))s.pipeline?(n.set(r,s),t.schemes[r]=s):(l.set(r,s),e.schemes[r]=s);for(let r of o.features){if(!p$(r))continue;let s=r.properties.scheme_reference,f=l.has(s),a=(f?l:n).get(s);a.browse&&(r.properties.funding_programme=a.browse.funding_programme,r.properties.current_milestone=a.browse.current_milestone);let u=f?e:t;r.id=u.features.length+1,u.features.push(r)}sn.set(e),hn.set(l),bn.set(t),wn.set(n)}function p$(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}let Wt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},vn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function Wl(o,e,l){const t=o.slice();return t[28]=e[l],t[29]=e,t[30]=l,t}function $$(o){let e;return{c(){e=S("Filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function m$(o){let e;return{c(){e=S("Reset all filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _$(o){let e,l,t,n,r,s,f,i;e=new nn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[h$]},$$scope:{ctx:o}}});function a(_){o[23](_)}let u={label:"Scheme name or reference",options:an(o[3])};o[0]!==void 0&&(u.value=o[0]),t=new Pr({props:u}),H.push(()=>E(t,"value",a));function c(_){o[24](_)}let $={label:"Authority or region",choices:o[10],emptyOption:!0};return o[4]!==void 0&&($.value=o[4]),s=new At({props:$}),H.push(()=>E(s,"value",c)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),r=L(),b(s.$$.fragment)},m(_,k){w(e,_,k),d(_,l,k),w(t,_,k),d(_,r,k),w(s,_,k),i=!0},p(_,k){const T={};k[0]&2|k[1]&1&&(T.$$scope={dirty:k,ctx:_}),e.$set(T);const C={};k[0]&8&&(C.options=an(_[3])),!n&&k[0]&1&&(n=!0,C.value=_[0],B(()=>n=!1)),t.$set(C);const j={};k[0]&1024&&(j.choices=_[10]),!f&&k[0]&16&&(f=!0,j.value=_[4],B(()=>f=!1)),s.$set(j)},i(_){i||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(s.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(s.$$.fragment,_),i=!1},d(_){_&&(h(l),h(r)),v(e,_),v(t,_),v(s,_)}}}function g$(o){let e,l,t,n,r,s,f,i,a,u,c,$,_,k,T,C;t=new nn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[w$]},$$scope:{ctx:o}}});function j(R){o[17](R)}let A={label:"Scheme name or reference",options:an(o[3])};o[0]!==void 0&&(A.value=o[0]),r=new Pr({props:A}),H.push(()=>E(r,"value",j));function N(R){o[18](R)}let M={label:"Authority or region",choices:o[10],emptyOption:!0};o[4]!==void 0&&(M.value=o[4]),i=new At({props:M}),H.push(()=>E(i,"value",N)),$=new nn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[y$]},$$scope:{ctx:o}}});function O(R){o[20](R)}let I={label:"Current milestone",choices:o[11],emptyOption:!0};return o[6]!==void 0&&(I.value=o[6]),k=new At({props:I}),H.push(()=>E(k,"value",O)),{c(){e=y("div"),l=y("div"),b(t.$$.fragment),n=L(),b(r.$$.fragment),f=L(),b(i.$$.fragment),u=L(),c=y("div"),b($.$$.fragment),_=L(),b(k.$$.fragment),D(l,"class","govuk-grid-column-one-half"),D(c,"class","govuk-grid-column-one-half"),D(e,"class","govuk-grid-row")},m(R,P){d(R,e,P),p(e,l),w(t,l,null),p(l,n),w(r,l,null),p(l,f),w(i,l,null),p(e,u),p(e,c),w($,c,null),p(c,_),w(k,c,null),C=!0},p(R,P){const z={};P[0]&2|P[1]&1&&(z.$$scope={dirty:P,ctx:R}),t.$set(z);const X={};P[0]&8&&(X.options=an(R[3])),!s&&P[0]&1&&(s=!0,X.value=R[0],B(()=>s=!1)),r.$set(X);const ae={};P[0]&1024&&(ae.choices=R[10]),!a&&P[0]&16&&(a=!0,ae.value=R[4],B(()=>a=!1)),i.$set(ae);const F={};P[0]&32|P[1]&1&&(F.$$scope={dirty:P,ctx:R}),$.$set(F);const x={};!T&&P[0]&64&&(T=!0,x.value=R[6],B(()=>T=!1)),k.$set(x)},i(R){C||(m(t.$$.fragment,R),m(r.$$.fragment,R),m(i.$$.fragment,R),m($.$$.fragment,R),m(k.$$.fragment,R),C=!0)},o(R){g(t.$$.fragment,R),g(r.$$.fragment,R),g(i.$$.fragment,R),g($.$$.fragment,R),g(k.$$.fragment,R),C=!1},d(R){R&&h(e),v(t),v(r),v(i),v($),v(k)}}}function d$(o){let e;return{c(){e=S("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function h$(o){let e,l,t,n,r,s;return t=new Qe({props:{$$slots:{default:[d$]},$$scope:{ctx:o}}}),t.$on("click",o[22]),{c(){e=y("input"),l=L(),b(t.$$.fragment),D(e,"type","text"),D(e,"class","govuk-input govuk-input--width-10"),D(e,"id","filterInterventionText")},m(f,i){d(f,e,i),je(e,o[1]),d(f,l,i),w(t,f,i),n=!0,r||(s=Ze(e,"input",o[21]),r=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&je(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,s()}}}function b$(o){let e;return{c(){e=S("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function w$(o){let e,l,t,n,r,s;return t=new Qe({props:{$$slots:{default:[b$]},$$scope:{ctx:o}}}),t.$on("click",o[16]),{c(){e=y("input"),l=L(),b(t.$$.fragment),D(e,"type","text"),D(e,"class","govuk-input govuk-input--width-10"),D(e,"id","filterInterventionText")},m(f,i){d(f,e,i),je(e,o[1]),d(f,l,i),w(t,f,i),n=!0,r||(s=Ze(e,"input",o[15]),r=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&je(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,s()}}}function v$(o){let e=o[28]+"",l,t;return{c(){l=S(e),t=L()},m(n,r){d(n,l,r),d(n,t,r)},p:Q,d(n){n&&(h(l),h(t))}}}function Yl(o){let e,l,t;function n(s){o[19](s,o[28])}let r={$$slots:{default:[v$]},$$scope:{ctx:o}};return o[5][o[28]]!==void 0&&(r.checked=o[5][o[28]]),e=new Je({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){o=s;const i={};f[1]&1&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&32&&(l=!0,i.checked=o[5][o[28]],B(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function k$(o){let e,l,t=me(Object.keys(Wt)),n=[];for(let s=0;s<t.length;s+=1)n[s]=Yl(Wl(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f[0]&32){t=me(Object.keys(Wt));let i;for(i=0;i<t.length;i+=1){const a=Wl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Yl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),Ve(n,s)}}}function y$(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[k$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&1&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function S$(o){let e;return{c(){e=S("Done")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function C$(o){let e,l,t,n,r=o[9].interventions.toLocaleString()+"",s,f,i,a,u=o[8].size.toLocaleString()+"",c,$,_,k,T,C=Jl(o[9].totalLength).toFixed(1)+"",j,A,N,M,O,I,R,P,z,X;M=new Qe({props:{$$slots:{default:[m$]},$$scope:{ctx:o}}}),M.$on("click",o[12]);const ae=[g$,_$],F=[];function x(V,U){return V[2]=="ATF"?0:1}return I=x(o),R=F[I]=ae[I](o),z=new bo({props:{$$slots:{default:[S$]},$$scope:{ctx:o}}}),z.$on("click",o[25]),{c(){e=y("p"),e.textContent="Showing:",l=L(),t=y("ul"),n=y("li"),s=S(r),f=S(" interventions"),i=L(),a=y("li"),c=S(u),$=S(" schemes"),_=L(),k=y("li"),T=S("total route length of "),j=S(C),A=S(" miles"),N=L(),b(M.$$.fragment),O=L(),R.c(),P=L(),b(z.$$.fragment)},m(V,U){d(V,e,U),d(V,l,U),d(V,t,U),p(t,n),p(n,s),p(n,f),p(t,i),p(t,a),p(a,c),p(a,$),p(t,_),p(t,k),p(k,T),p(k,j),p(k,A),d(V,N,U),w(M,V,U),d(V,O,U),F[I].m(V,U),d(V,P,U),w(z,V,U),X=!0},p(V,U){(!X||U[0]&512)&&r!==(r=V[9].interventions.toLocaleString()+"")&&G(s,r),(!X||U[0]&256)&&u!==(u=V[8].size.toLocaleString()+"")&&G(c,u),(!X||U[0]&512)&&C!==(C=Jl(V[9].totalLength).toFixed(1)+"")&&G(j,C);const Te={};U[1]&1&&(Te.$$scope={dirty:U,ctx:V}),M.$set(Te);let Pe=I;I=x(V),I===Pe?F[I].p(V,U):(be(),g(F[Pe],1,1,()=>{F[Pe]=null}),we(),R=F[I],R?R.p(V,U):(R=F[I]=ae[I](V),R.c()),m(R,1),R.m(P.parentNode,P));const Ge={};U[1]&1&&(Ge.$$scope={dirty:U,ctx:V}),z.$set(Ge)},i(V){X||(m(M.$$.fragment,V),m(R),m(z.$$.fragment,V),X=!0)},o(V){g(M.$$.fragment,V),g(R),g(z.$$.fragment,V),X=!1},d(V){V&&(h(e),h(l),h(t),h(N),h(O),h(P)),v(M,V),F[I].d(V),v(z,V)}}}function T$(o){let e,l,t,n,r;e=new Qe({props:{$$slots:{default:[$$]},$$scope:{ctx:o}}}),e.$on("click",o[14]);function s(i){o[26](i)}let f={title:`Filter ${o[2]} schemes`,$$slots:{default:[C$]},$$scope:{ctx:o}};return o[7]!==void 0&&(f.open=o[7]),t=new Vr({props:f}),H.push(()=>E(t,"open",s)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){w(e,i,a),d(i,l,a),w(t,i,a),r=!0},p(i,a){const u={};a[1]&1&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a[0]&4&&(c.title=`Filter ${i[2]} schemes`),a[0]&2047|a[1]&1&&(c.$$scope={dirty:a,ctx:i}),!n&&a[0]&128&&(n=!0,c.open=i[7],B(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),r=!1},d(i){i&&h(l),v(e,i),v(t,i)}}}function L$(o){var t;let e=new Set;for(let n of o.values())(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Jl(o){return o*621371e-9}function an(o){let e=[];for(let l of o.values())e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function M$(o,e,l){let t,{source:n}=e,{schemes:r}=e,{schemesGj:s}=e,{filterSchemeText:f}=e,{filterInterventionText:i}=e,a=!1,u=new Set,c={interventions:0,totalLength:0},$=Object.keys(vn).map(U=>[U,U]),_="",k=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0])),T="";function C(U,Te,Pe,Ge,$t){let W=U.toLowerCase(),et=Te.toLowerCase(),Ht=he=>{var tt,at,Bt,Yt;if(W&&!((tt=he.properties.name)!=null&&tt.toLowerCase().includes(W))&&!((at=he.properties.description)!=null&&at.toLowerCase().includes(W)))return!1;let qe=r.get(he.properties.scheme_reference);return!(Pe&&((Bt=qe.browse)==null?void 0:Bt.authority_or_region)!=Pe||n=="ATF"&&!Ge[qe.browse.funding_programme]||$t&&((Yt=qe.browse)==null?void 0:Yt.current_milestone)!=$t||et&&!qe.scheme_reference.toLowerCase().includes(et)&&!(qe.scheme_name??"").toLowerCase().includes(et))};l(8,u=new Set(s.features.filter(Ht).map(he=>he.properties.scheme_reference))),l(9,c={interventions:0,totalLength:0});let Et=he=>{var qe,tt;return!(!u.has(he.properties.scheme_reference)||W&&!((qe=he.properties.name)!=null&&qe.toLowerCase().includes(W))&&!((tt=he.properties.description)!=null&&tt.toLowerCase().includes(W)))};for(let he of s.features)Et(he)?(delete he.properties.hide_while_editing,l(9,c.interventions++,c),he.geometry.type=="LineString"&&he.properties.length_meters&&l(9,c.totalLength+=he.properties.length_meters,c)):he.properties.hide_while_editing=!0;l(13,s),l(9,c)}function j(){l(4,_=""),l(5,k=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0]))),l(6,T=""),l(1,i=""),l(0,f="")}const A=()=>l(7,a=!0);function N(){i=this.value,l(1,i)}const M=()=>l(1,i="");function O(U){f=U,l(0,f)}function I(U){_=U,l(4,_)}function R(U,Te){o.$$.not_equal(k[Te],U)&&(k[Te]=U,l(5,k))}function P(U){T=U,l(6,T)}function z(){i=this.value,l(1,i)}const X=()=>l(1,i="");function ae(U){f=U,l(0,f)}function F(U){_=U,l(4,_)}const x=()=>l(7,a=!1);function V(U){a=U,l(7,a)}return o.$$set=U=>{"source"in U&&l(2,n=U.source),"schemes"in U&&l(3,r=U.schemes),"schemesGj"in U&&l(13,s=U.schemesGj),"filterSchemeText"in U&&l(0,f=U.filterSchemeText),"filterInterventionText"in U&&l(1,i=U.filterInterventionText)},o.$$.update=()=>{o.$$.dirty[0]&8&&l(10,t=L$(r)),o.$$.dirty[0]&115&&C(i,f,_,k,T)},[f,i,n,r,_,k,T,a,u,c,t,$,j,s,A,N,M,O,I,R,P,z,X,ae,F,x,V]}class Dr extends K{constructor(e){super(),Z(this,e,M$,T$,J,{source:2,schemes:3,schemesGj:13,filterSchemeText:0,filterInterventionText:1},null,[-1,-1])}}function Vl(o){let e,l,t,n=o[0].status+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Status",t=S(`
    : `),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].status+"")&&G(r,n)},d(s){s&&h(e)}}}function Ql(o){let e,l,t,n=o[0].timescale+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Timescale",t=S(`
    : `),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale+"")&&G(r,n)},d(s){s&&h(e)}}}function Kl(o){let e,l,t,n=o[0].timescale_year+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Estimated completion year",t=S(`
    : `),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale_year+"")&&G(r,n)},d(s){s&&h(e)}}}function Zl(o){let e,l,t,n=o[0].year_published+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme most recently published",t=S(`
    : `),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].year_published+"")&&G(r,n)},d(s){s&&h(e)}}}function Xl(o){let e,l,t,n=o[0].year_consulted+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme most recently consulted on",t=S(`
    : `),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].year_consulted+"")&&G(r,n)},d(s){s&&h(e)}}}function I$(o){let e,l,t,n,r,s=o[0].status&&Vl(o),f=o[0].timescale&&Ql(o),i=o[0].timescale_year&&Kl(o),a=o[0].year_published&&Zl(o),u=o[0].year_consulted&&Xl(o);return{c(){s&&s.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=ve()},m(c,$){s&&s.m(c,$),d(c,e,$),f&&f.m(c,$),d(c,l,$),i&&i.m(c,$),d(c,t,$),a&&a.m(c,$),d(c,n,$),u&&u.m(c,$),d(c,r,$)},p(c,[$]){c[0].status?s?s.p(c,$):(s=Vl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,$):(f=Ql(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,$):(i=Kl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,$):(a=Zl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,$):(u=Xl(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:Q,o:Q,d(c){c&&(h(e),h(l),h(t),h(n),h(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function O$(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Fr extends K{constructor(e){super(),Z(this,e,O$,I$,J,{props:0})}}function xl(o){let e,l,t,n=o[0].budget.toLocaleString()+"",r,s;return{c(){e=y("p"),l=y("b"),l.textContent="Cost",t=S(`
    : `),r=S(n),s=S(`
    GBP`)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r),p(e,s)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&G(r,n)},d(f){f&&h(e)}}}function er(o){let e;return{c(){e=y("p"),e.textContent="Development is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function tr(o){let e;return{c(){e=y("p"),e.textContent="Construction is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function nr(o){let e,l,t,n;return{c(){e=y("p"),l=y("b"),l.textContent="Funding sources",t=S(`
    : `),n=S(o[1])},m(r,s){d(r,e,s),p(e,l),p(e,t),p(e,n)},p(r,s){s&2&&G(n,r[1])},d(r){r&&h(e)}}}function j$(o){let e,l,t,n,r=o[0].budget&&xl(o),s=o[0].development_funded&&er(),f=o[0].construction_funded&&tr(),i=o[1]&&nr(o);return{c(){r&&r.c(),e=L(),s&&s.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=ve()},m(a,u){r&&r.m(a,u),d(a,e,u),s&&s.m(a,u),d(a,l,u),f&&f.m(a,u),d(a,t,u),i&&i.m(a,u),d(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=xl(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=er(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=tr(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=nr(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:Q,o:Q,d(a){a&&(h(e),h(l),h(t),h(n)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function N$(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function P$(o,e,l){let t,{props:n}=e;return o.$$set=r=>{"props"in r&&l(0,n=r.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=N$(n))},[n,t]}class Ar extends K{constructor(e){super(),Z(this,e,P$,j$,J,{props:0})}}function $n(o){const e=o.slice(),l=e[5].pipeline;return e[12]=l,e}function mn(o){const e=o.slice(),l=e[1].pipeline;return e[12]=l,e}function lr(o){let e,l,t,n=Bn(o[1].length_meters)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Length",t=S(`
        : `),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=Bn(s[1].length_meters)+"")&&G(r,n)},d(s){s&&h(e)}}}function rr(o){let e,l=ct(o[1].description,o[3])+"";return{c(){e=y("p")},m(t,n){d(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=ct(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&h(e)}}}function or(o){let e,l,t,n,r,s,f,i=o[12].atf4_type&&sr(o),a=o[12].accuracy&&ir(o),u=o[12].is_alternative&&ar();return n=new Ar({props:{props:o[12]}}),s=new Fr({props:{props:o[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(c,$){i&&i.m(c,$),d(c,e,$),a&&a.m(c,$),d(c,l,$),u&&u.m(c,$),d(c,t,$),w(n,c,$),d(c,r,$),w(s,c,$),f=!0},p(c,$){c[12].atf4_type?i?i.p(c,$):(i=sr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].accuracy?a?a.p(c,$):(a=ir(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].is_alternative?u||(u=ar(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};$&2&&(_.props=c[12]),n.$set(_);const k={};$&2&&(k.props=c[12]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function sr(o){let e,l,t,n=o[12].atf4_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="ATF4 type",t=S(`
          : `),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[12].atf4_type+"")&&G(r,n)},d(s){s&&h(e)}}}function ir(o){let e,l,t,n=o[12].accuracy+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Accuracy",t=S(`
          : `),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[12].accuracy+"")&&G(r,n)},d(s){s&&h(e)}}}function ar(o){let e;return{c(){e=y("p"),e.textContent="Represents an alternative route"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Capital scheme ID",t=S(`
        : `),r=S(n)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&G(r,n)},d(f){f&&h(e)}}}function ur(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Current milestone",t=S(`
        : `),r=S(n)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&G(r,n)},d(f){f&&h(e)}}}function cr(o){let e,l,t,n,r,s,f,i=o[12].scheme_type&&pr(o),a=o[12].atf4_lead_type&&$r(o),u=o[12].scheme_description&&mr(o);return n=new Ar({props:{props:o[12]}}),s=new Fr({props:{props:o[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(c,$){i&&i.m(c,$),d(c,e,$),a&&a.m(c,$),d(c,l,$),u&&u.m(c,$),d(c,t,$),w(n,c,$),d(c,r,$),w(s,c,$),f=!0},p(c,$){c[12].scheme_type?i?i.p(c,$):(i=pr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].atf4_lead_type?a?a.p(c,$):(a=$r(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].scheme_description?u?u.p(c,$):(u=mr(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};$&32&&(_.props=c[12]),n.$set(_);const k={};$&32&&(k.props=c[12]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function pr(o){let e,l,t,n=o[12].scheme_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme type",t=S(`
          : `),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&32&&n!==(n=s[12].scheme_type+"")&&G(r,n)},d(s){s&&h(e)}}}function $r(o){let e,l,t,n=o[12].atf4_lead_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="ATF4 lead type",t=S(`
          : `),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&32&&n!==(n=s[12].atf4_lead_type+"")&&G(r,n)},d(s){s&&h(e)}}}function mr(o){let e,l,t,n=o[12].scheme_description+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Descripton",t=S(`
          : `),r=S(n)},m(s,f){d(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&32&&n!==(n=s[12].scheme_description+"")&&G(r,n)},d(s){s&&h(e)}}}function R$(o){let e;return{c(){e=S("Zoom to show entire scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function D$(o){let e;return{c(){e=S("Edit a copy of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _r(o){var jn,Nn,Pn,Rn;let e,l,t,n,r,s,f,i=ct(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,$,_,k,T,C,j,A,N,M=o[0].toUpperCase()+"",O,I,R,P,z,X,ae,F=ct(o[5].scheme_name??"",o[2])+"",x,V,U,Te,Pe,Ge=ct(o[1].scheme_reference,o[2])+"",$t,W,et,Ht,Et=((jn=o[5].browse)==null?void 0:jn.authority_or_region)+"",he,qe,tt,at,Bt,Yt,en=((Nn=o[5].browse)==null?void 0:Nn.funding_programme)+"",un,In,cn,pn,ft,On,ut,ze,Le=o[1].length_meters&&lr(o),Me=o[1].description&&rr(o),ke=o[1].pipeline&&or(mn(o)),Ie=((Pn=o[5].browse)==null?void 0:Pn.capital_scheme_id)&&fr(o),Oe=((Rn=o[5].browse)==null?void 0:Rn.current_milestone)&&ur(o),ye=o[5].pipeline&&cr($n(o));return ft=new Qe({props:{$$slots:{default:[R$]},$$scope:{ctx:o}}}),ft.$on("click",o[6]),ut=new Qe({props:{$$slots:{default:[D$]},$$scope:{ctx:o}}}),ut.$on("click",o[7]),{c(){e=y("div"),l=y("h2"),l.textContent="Intervention",t=L(),n=y("p"),r=y("b"),r.textContent="Name",s=S(`
      : `),f=new Ft(!1),a=S(" ("),c=S(u),$=S(")"),_=L(),Le&&Le.c(),k=L(),Me&&Me.c(),T=L(),ke&&ke.c(),C=L(),j=y("hr"),A=L(),N=y("h2"),O=S(M),I=S(" Scheme"),R=L(),P=y("p"),z=y("b"),z.textContent="Scheme name",X=S(`
      : `),ae=new Ft(!1),x=L(),V=y("p"),U=y("b"),U.textContent="Scheme reference",Te=S(`
      : `),Pe=new Ft(!1),$t=L(),W=y("p"),et=y("b"),et.textContent="Authority or region",Ht=S(`
      : `),he=S(Et),qe=L(),Ie&&Ie.c(),tt=L(),at=y("p"),Bt=y("b"),Bt.textContent="Funding programme",Yt=S(`
      : `),un=S(en),In=L(),Oe&&Oe.c(),cn=L(),ye&&ye.c(),pn=L(),b(ft.$$.fragment),On=L(),b(ut.$$.fragment),f.a=a,ae.a=null,Pe.a=null,se(e,"max-width","30vw"),se(e,"max-height","60vh"),se(e,"overflow","auto")},m(ie,de){d(ie,e,de),p(e,l),p(e,t),p(e,n),p(n,r),p(n,s),f.m(i,n),p(n,a),p(n,c),p(n,$),p(e,_),Le&&Le.m(e,null),p(e,k),Me&&Me.m(e,null),p(e,T),ke&&ke.m(e,null),p(e,C),p(e,j),p(e,A),p(e,N),p(N,O),p(N,I),p(e,R),p(e,P),p(P,z),p(P,X),ae.m(F,P),p(e,x),p(e,V),p(V,U),p(V,Te),Pe.m(Ge,V),p(e,$t),p(e,W),p(W,et),p(W,Ht),p(W,he),p(e,qe),Ie&&Ie.m(e,null),p(e,tt),p(e,at),p(at,Bt),p(at,Yt),p(at,un),p(e,In),Oe&&Oe.m(e,null),p(e,cn),ye&&ye.m(e,null),p(e,pn),w(ft,e,null),p(e,On),w(ut,e,null),o[10](e),ze=!0},p(ie,de){var An,Gn,qn,zn;(!ze||de&10)&&i!==(i=ct(ie[1].name,ie[3])+"")&&f.p(i),(!ze||de&2)&&u!==(u=ie[1].intervention_type+"")&&G(c,u),ie[1].length_meters?Le?Le.p(ie,de):(Le=lr(ie),Le.c(),Le.m(e,k)):Le&&(Le.d(1),Le=null),ie[1].description?Me?Me.p(ie,de):(Me=rr(ie),Me.c(),Me.m(e,T)):Me&&(Me.d(1),Me=null),ie[1].pipeline?ke?(ke.p(mn(ie),de),de&2&&m(ke,1)):(ke=or(mn(ie)),ke.c(),m(ke,1),ke.m(e,C)):ke&&(be(),g(ke,1,1,()=>{ke=null}),we()),(!ze||de&1)&&M!==(M=ie[0].toUpperCase()+"")&&G(O,M),(!ze||de&36)&&F!==(F=ct(ie[5].scheme_name??"",ie[2])+"")&&ae.p(F),(!ze||de&6)&&Ge!==(Ge=ct(ie[1].scheme_reference,ie[2])+"")&&Pe.p(Ge),(!ze||de&32)&&Et!==(Et=((An=ie[5].browse)==null?void 0:An.authority_or_region)+"")&&G(he,Et),(Gn=ie[5].browse)!=null&&Gn.capital_scheme_id?Ie?Ie.p(ie,de):(Ie=fr(ie),Ie.c(),Ie.m(e,tt)):Ie&&(Ie.d(1),Ie=null),(!ze||de&32)&&en!==(en=((qn=ie[5].browse)==null?void 0:qn.funding_programme)+"")&&G(un,en),(zn=ie[5].browse)!=null&&zn.current_milestone?Oe?Oe.p(ie,de):(Oe=ur(ie),Oe.c(),Oe.m(e,cn)):Oe&&(Oe.d(1),Oe=null),ie[5].pipeline?ye?(ye.p($n(ie),de),de&32&&m(ye,1)):(ye=cr($n(ie)),ye.c(),m(ye,1),ye.m(e,pn)):ye&&(be(),g(ye,1,1,()=>{ye=null}),we());const Dn={};de&8192&&(Dn.$$scope={dirty:de,ctx:ie}),ft.$set(Dn);const Fn={};de&8192&&(Fn.$$scope={dirty:de,ctx:ie}),ut.$set(Fn)},i(ie){ze||(m(ke),m(ye),m(ft.$$.fragment,ie),m(ut.$$.fragment,ie),ze=!0)},o(ie){g(ke),g(ye),g(ft.$$.fragment,ie),g(ut.$$.fragment,ie),ze=!1},d(ie){ie&&h(e),Le&&Le.d(),Me&&Me.d(),ke&&ke.d(),Ie&&Ie.d(),Oe&&Oe.d(),ye&&ye.d(),v(ft),v(ut),o[10](null)}}}function F$(o){let e=o[1],l,t,n=_r(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,[s]){s&2&&J(e,e=r[1])?(be(),g(n,1,1,Q),we(),n=_r(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function ct(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function A$(o,e,l){let t,n;Y(o,fn,T=>l(11,n=T));let{source:r}=e,{props:s}=e,{schemes:f}=e,{schemesGj:i}=e,{filterSchemeText:a}=e,{filterInterventionText:u}=e,c;Hr(()=>{c&&l(4,c.scrollTop=0,c)});function $(){let T={type:"FeatureCollection",features:i.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(jr(T),{padding:20,animate:!1})}function _(){var N;let T={type:"FeatureCollection",features:i.features.filter(M=>M.properties.scheme_reference==t.scheme_reference),schemes:{}};T.schemes[t.scheme_reference]=t;let C=(N=t.browse)==null?void 0:N.authority_or_region;if(!C){window.alert("This scheme has no authority specified, you can't edit this");return}let j=t.pipeline?"pipeline":"v1",A=`browse_copy_${t.scheme_reference}`;Qr(Zr(C,A),JSON.stringify(Kr(C,T))),window.open(Xr(C,A,j),"_blank")}function k(T){H[T?"unshift":"push"](()=>{c=T,l(4,c)})}return o.$$set=T=>{"source"in T&&l(0,r=T.source),"props"in T&&l(1,s=T.props),"schemes"in T&&l(8,f=T.schemes),"schemesGj"in T&&l(9,i=T.schemesGj),"filterSchemeText"in T&&l(2,a=T.filterSchemeText),"filterInterventionText"in T&&l(3,u=T.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=f.get(s.scheme_reference))},[r,s,a,u,c,t,$,_,f,i,k]}class Mn extends K{constructor(e){super(),Z(this,e,A$,F$,J,{source:0,props:1,schemes:8,schemesGj:9,filterSchemeText:2,filterInterventionText:3})}}function G$(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&h(e)}}}function q$(o){let e,l;return e=new Mn({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function z$(o){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[G$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[q$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3133&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function H$(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&h(e)}}}function E$(o){let e,l;return e=new Mn({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function B$(o){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[H$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[E$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3133&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function U$(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&h(e)}}}function W$(o){let e,l;return e=new Mn({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Y$(o){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[U$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[W$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3133&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function J$(o){let e,l,t,n,r,s,f,i,a,u;const c=[q(`${o[0]}-interventions-points`),{filter:["all",Jn,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":Un,"circle-opacity":te(1,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let $={$$slots:{default:[z$]},$$scope:{ctx:o}};for(let O=0;O<c.length;O+=1)$=ne($,c[O]);e=new Gt({props:$});const _=[q(`${o[0]}-interventions-lines`),{filter:["all",Vn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":Jt,"line-opacity":te(1,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[B$]},$$scope:{ctx:o}};for(let O=0;O<_.length;O+=1)k=ne(k,_[O]);t=new ge({props:k});const T=[q(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Jt,"circle-opacity":0,"circle-stroke-color":Ke.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[1]?"visible":"none"}}];let C={};for(let O=0;O<T.length;O+=1)C=ne(C,T[O]);r=new Gt({props:C});const j=[q(`${o[0]}-interventions-polygons`),{filter:["all",tn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":te(.2,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let A={$$slots:{default:[Y$]},$$scope:{ctx:o}};for(let O=0;O<j.length;O+=1)A=ne(A,j[O]);f=new De({props:A});const N=[q(`${o[0]}-interventions-polygons-outlines`),{filter:["all",tn,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*Jt}},{layout:{visibility:o[1]?"visible":"none"}}];let M={};for(let O=0;O<N.length;O+=1)M=ne(M,N[O]);return a=new ge({props:M}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(O,I){w(e,O,I),d(O,l,I),w(t,O,I),d(O,n,I),w(r,O,I),d(O,s,I),w(f,O,I),d(O,i,I),w(a,O,I),u=!0},p(O,I){const R=I&835?le(c,[I&1&&oe(q(`${O[0]}-interventions-points`)),I&768&&{filter:["all",Jn,O[8],O[9]]},c[2],c[3],I&64&&{paint:{"circle-color":O[6],"circle-radius":Un,"circle-opacity":te(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},c[6]]):{};I&2109&&(R.$$scope={dirty:I,ctx:O}),e.$set(R);const P=I&323?le(_,[I&1&&oe(q(`${O[0]}-interventions-lines`)),I&256&&{filter:["all",Vn,O[8]]},_[2],_[3],I&64&&{paint:{"line-color":O[6],"line-width":Jt,"line-opacity":te(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},_[6]]):{};I&2109&&(P.$$scope={dirty:I,ctx:O}),t.$set(P);const z=I&3?le(T,[I&1&&oe(q(`${O[0]}-interventions-lines-endpoints`)),T[1],T[2],I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};r.$set(z);const X=I&323?le(j,[I&1&&oe(q(`${O[0]}-interventions-polygons`)),I&256&&{filter:["all",tn,O[8]]},j[2],j[3],I&64&&{paint:{"fill-color":O[6],"fill-opacity":te(.2,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},j[6]]):{};I&2109&&(X.$$scope={dirty:I,ctx:O}),f.$set(X);const ae=I&323?le(N,[I&1&&oe(q(`${O[0]}-interventions-polygons-outlines`)),I&256&&{filter:["all",tn,O[8]]},I&64&&{paint:{"line-color":O[6],"line-opacity":.5,"line-width":.7*Jt}},I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};a.$set(ae)},i(O){u||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(r.$$.fragment,O),m(f.$$.fragment,O),m(a.$$.fragment,O),u=!0)},o(O){g(e.$$.fragment,O),g(t.$$.fragment,O),g(r.$$.fragment,O),g(f.$$.fragment,O),g(a.$$.fragment,O),u=!1},d(O){O&&(h(l),h(n),h(s),h(i)),v(e,O),v(t,O),v(r,O),v(f,O),v(a,O)}}}function V$(o){let e,l;return e=new qt({props:{data:o[7],$$slots:{default:[J$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Q$(o,e,l){let t,{source:n}=e,{show:r}=e,{schemes:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],$=["!=",["get","endpoint"],!0];return o.$$set=_=>{"source"in _&&l(0,n=_.source),"show"in _&&l(1,r=_.show),"schemes"in _&&l(2,s=_.schemes),"schemesGj"in _&&l(3,f=_.schemesGj),"filterSchemeText"in _&&l(4,i=_.filterSchemeText),"filterInterventionText"in _&&l(5,a=_.filterInterventionText),"color"in _&&l(6,u=_.color)},o.$$.update=()=>{o.$$.dirty&8&&l(7,t=co(f))},[n,r,s,f,i,a,u,t,c,$]}class gr extends K{constructor(e){super(),Z(this,e,Q$,V$,J,{source:0,show:1,schemes:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function K$(o){return Xe(["get","intervention_type"],{area:Ke.area,route:Ke.route,crossing:Ke.crossing,other:Ke.other},"white")}function Z$(o){return[["Areas",Ke.area],["Routes",Ke.route],["Crossings",Ke.crossing],["Other",Ke.other]]}function dr(o,e,l){const t=o.slice();return t[33]=e[l],t}function hr(o,e,l){const t=o.slice();return t[33]=e[l],t}function X$(o){let e,l;return e=new u$({props:{loadFile:o[19]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p:Q,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function br(o){let e,l,t;function n(s){o[25](s)}let r={name:Gr,title:sm,$$slots:{controls:[em],help:[x$]},$$scope:{ctx:o}};return o[8]!==void 0&&(r.show=o[8]),e=new ue({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){const i={};f[0]&7713|f[1]&128&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&256&&(l=!0,i.show=s[8],B(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function wr(o){let e,l,t=o[33]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){d(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&1024&&t!==(t=r[33]+"")&&G(n,t)},d(r){r&&h(e)}}}function x$(o){let e,l,t,n,r,s,f;t=new Nr({props:{text:"Scheme data caveats"}});let i=me(o[10].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=wr(hr(o,i,u));return{c(){e=y("span"),l=y("p"),b(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();D(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),w(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&1024){i=me(u[10].notes??[]);let $;for($=0;$<i.length;$+=1){const _=hr(u,i,$);a[$]?a[$].p(_,c):(a[$]=wr(_),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),Ve(a,u)}}}function em(o){let e,l,t,n,r,s,f,i,a,u,c,$;function _(M){o[20](M)}function k(M){o[21](M)}function T(M){o[22](M)}function C(M){o[23](M)}let j={source:"ATF"};o[10]!==void 0&&(j.schemesGj=o[10]),o[9]!==void 0&&(j.schemes=o[9]),o[11]!==void 0&&(j.filterSchemeText=o[11]),o[12]!==void 0&&(j.filterInterventionText=o[12]),l=new Dr({props:j}),H.push(()=>E(l,"schemesGj",_)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",T)),H.push(()=>E(l,"filterInterventionText",C));function A(M){o[24](M)}let N={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(N.value=o[0]),i=new At({props:N}),H.push(()=>E(i,"value",A)),c=new xt({props:{rows:o[5]}}),{c(){e=y("div"),b(l.$$.fragment),f=L(),b(i.$$.fragment),u=L(),b(c.$$.fragment),D(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(M,O){d(M,e,O),w(l,e,null),p(e,f),w(i,e,null),p(e,u),w(c,e,null),$=!0},p(M,O){const I={};!t&&O[0]&1024&&(t=!0,I.schemesGj=M[10],B(()=>t=!1)),!n&&O[0]&512&&(n=!0,I.schemes=M[9],B(()=>n=!1)),!r&&O[0]&2048&&(r=!0,I.filterSchemeText=M[11],B(()=>r=!1)),!s&&O[0]&4096&&(s=!0,I.filterInterventionText=M[12],B(()=>s=!1)),l.$set(I);const R={};!a&&O[0]&1&&(a=!0,R.value=M[0],B(()=>a=!1)),i.$set(R);const P={};O[0]&32&&(P.rows=M[5]),c.$set(P)},i(M){$||(m(l.$$.fragment,M),m(i.$$.fragment,M),m(c.$$.fragment,M),$=!0)},o(M){g(l.$$.fragment,M),g(i.$$.fragment,M),g(c.$$.fragment,M),$=!1},d(M){M&&h(e),v(l),v(i),v(c)}}}function vr(o){let e,l,t;function n(s){o[31](s)}let r={name:qr,title:im,$$slots:{controls:[nm],help:[tm]},$$scope:{ctx:o}};return o[7]!==void 0&&(r.show=o[7]),e=new ue({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){const i={};f[0]&122890|f[1]&128&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&128&&(l=!0,i.show=s[7],B(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function kr(o){let e,l,t=o[33]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){d(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&16384&&t!==(t=r[33]+"")&&G(n,t)},d(r){r&&h(e)}}}function tm(o){let e,l,t,n,r,s,f;t=new Nr({props:{text:"Scheme data caveats"}});let i=me(o[14].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=kr(dr(o,i,u));return{c(){e=y("span"),l=y("p"),b(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();D(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),w(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&16384){i=me(u[14].notes??[]);let $;for($=0;$<i.length;$+=1){const _=dr(u,i,$);a[$]?a[$].p(_,c):(a[$]=kr(_),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),Ve(a,u)}}}function nm(o){let e,l,t,n,r,s,f,i,a,u,c,$;function _(M){o[26](M)}function k(M){o[27](M)}function T(M){o[28](M)}function C(M){o[29](M)}let j={source:"LCWIP"};o[14]!==void 0&&(j.schemesGj=o[14]),o[13]!==void 0&&(j.schemes=o[13]),o[15]!==void 0&&(j.filterSchemeText=o[15]),o[16]!==void 0&&(j.filterInterventionText=o[16]),l=new Dr({props:j}),H.push(()=>E(l,"schemesGj",_)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",T)),H.push(()=>E(l,"filterInterventionText",C));function A(M){o[30](M)}let N={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(N.value=o[1]),i=new At({props:N}),H.push(()=>E(i,"value",A)),c=new xt({props:{rows:o[3]}}),{c(){e=y("div"),b(l.$$.fragment),f=L(),b(i.$$.fragment),u=L(),b(c.$$.fragment),D(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(M,O){d(M,e,O),w(l,e,null),p(e,f),w(i,e,null),p(e,u),w(c,e,null),$=!0},p(M,O){const I={};!t&&O[0]&16384&&(t=!0,I.schemesGj=M[14],B(()=>t=!1)),!n&&O[0]&8192&&(n=!0,I.schemes=M[13],B(()=>n=!1)),!r&&O[0]&32768&&(r=!0,I.filterSchemeText=M[15],B(()=>r=!1)),!s&&O[0]&65536&&(s=!0,I.filterInterventionText=M[16],B(()=>s=!1)),l.$set(I);const R={};!a&&O[0]&2&&(a=!0,R.value=M[1],B(()=>a=!1)),i.$set(R);const P={};O[0]&8&&(P.rows=M[3]),c.$set(P)},i(M){$||(m(l.$$.fragment,M),m(i.$$.fragment,M),m(c.$$.fragment,M),$=!0)},o(M){g(l.$$.fragment,M),g(i.$$.fragment,M),g(c.$$.fragment,M),$=!1},d(M){M&&h(e),v(l),v(i),v(c)}}}function lm(o){let e,l,t,n=o[9].size>0&&br(o),r=o[13].size>0&&vr(o);return{c(){n&&n.c(),e=L(),r&&r.c(),l=ve()},m(s,f){n&&n.m(s,f),d(s,e,f),r&&r.m(s,f),d(s,l,f),t=!0},p(s,f){s[9].size>0?n?(n.p(s,f),f[0]&512&&m(n,1)):(n=br(s),n.c(),m(n,1),n.m(e.parentNode,e)):n&&(be(),g(n,1,1,()=>{n=null}),we()),s[13].size>0?r?(r.p(s,f),f[0]&8192&&m(r,1)):(r=vr(s),r.c(),m(r,1),r.m(l.parentNode,l)):r&&(be(),g(r,1,1,()=>{r=null}),we())},i(s){t||(m(n),m(r),t=!0)},o(s){g(n),g(r),t=!1},d(s){s&&(h(e),h(l)),n&&n.d(s),r&&r.d(s)}}}function rm(o){let e=Tr()=="Private (development)",l,t,n,r,s,f,i,a=e&&X$(o);return t=new Fe({props:{small:!0,$$slots:{default:[lm]},$$scope:{ctx:o}}}),r=new xr({props:{label:"Load schemes from GeoJSON",onLoad:o[19]}}),f=new eo({props:{errorMessage:o[2]}}),{c(){a&&a.c(),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(u,c){a&&a.m(u,c),d(u,l,c),w(t,u,c),d(u,n,c),w(r,u,c),d(u,s,c),w(f,u,c),i=!0},p(u,c){e&&a.p(u,c);const $={};c[0]&130987|c[1]&128&&($.$$scope={dirty:c,ctx:u}),t.$set($);const _={};c[0]&4&&(_.errorMessage=u[2]),f.$set(_)},i(u){i||(m(a),m(t.$$.fragment,u),m(r.$$.fragment,u),m(f.$$.fragment,u),i=!0)},o(u){g(a),g(t.$$.fragment,u),g(r.$$.fragment,u),g(f.$$.fragment,u),i=!1},d(u){u&&(h(l),h(n),h(s)),a&&a.d(u),v(t,u),v(r,u),v(f,u)}}}function om(o){let e,l,t,n,r,s;return e=new nt({props:{label:"Schemes",open:!0,$$slots:{default:[rm]},$$scope:{ctx:o}}}),t=new gr({props:{source:"atf",show:o[8],schemesGj:o[10],schemes:o[9],filterSchemeText:o[11],filterInterventionText:o[12],color:o[6]}}),r=new gr({props:{source:"lcwip",show:o[7],schemesGj:o[14],schemes:o[13],filterSchemeText:o[15],filterInterventionText:o[16],color:o[4]}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,i){w(e,f,i),d(f,l,i),w(t,f,i),d(f,n,i),w(r,f,i),s=!0},p(f,i){const a={};i[0]&130991|i[1]&128&&(a.$$scope={dirty:i,ctx:f}),e.$set(a);const u={};i[0]&256&&(u.show=f[8]),i[0]&1024&&(u.schemesGj=f[10]),i[0]&512&&(u.schemes=f[9]),i[0]&2048&&(u.filterSchemeText=f[11]),i[0]&4096&&(u.filterInterventionText=f[12]),i[0]&64&&(u.color=f[6]),t.$set(u);const c={};i[0]&128&&(c.show=f[7]),i[0]&16384&&(c.schemesGj=f[14]),i[0]&8192&&(c.schemes=f[13]),i[0]&32768&&(c.filterSchemeText=f[15]),i[0]&65536&&(c.filterInterventionText=f[16]),i[0]&16&&(c.color=f[4]),r.$set(c)},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}let Gr="atf_schemes",sm="ATF schemes",qr="lcwip_schemes",im="LCWIP schemes";function am(o,e,l){let t,n,r,s,f,i,a,u,c,$,_,k,T,C;Y(o,hn,W=>l(9,a=W)),Y(o,sn,W=>l(10,u=W)),Y(o,El,W=>l(11,c=W)),Y(o,Hl,W=>l(12,$=W)),Y(o,wn,W=>l(13,_=W)),Y(o,bn,W=>l(14,k=W)),Y(o,Ul,W=>l(15,T=W)),Y(o,Bl,W=>l(16,C=W));let j="",A=$e(Gr);Y(o,A,W=>l(8,i=W));let N="fundingProgramme",M=$e(qr);Y(o,M,W=>l(7,f=W));let O="interventionType";function I(W,et){try{c$(JSON.parse(et)),Ut(A,i=!0,i),Ut(M,f=!0,f),l(2,j="")}catch(Ht){l(2,j=`The file you loaded is broken: ${Ht}`)}}function R(W){return W=="interventionType"?[K$(),Z$()]:W=="fundingProgramme"?[Xe(["get","funding_programme"],Wt,"grey"),Object.entries(Wt)]:W=="currentMilestone"?[Xe(["get","current_milestone"],vn,"grey"),Object.entries(vn)]:["red",[]]}function P(W){u=W,sn.set(u)}function z(W){a=W,hn.set(a)}function X(W){c=W,El.set(c)}function ae(W){$=W,Hl.set($)}function F(W){N=W,l(0,N)}function x(W){i=W,A.set(i)}function V(W){k=W,bn.set(k)}function U(W){_=W,wn.set(_)}function Te(W){T=W,Ul.set(T)}function Pe(W){C=W,Bl.set(C)}function Ge(W){O=W,l(1,O)}function $t(W){f=W,M.set(f)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(6,[t,n]=R(N),t,(l(5,n),l(0,N))),o.$$.dirty[0]&2&&l(4,[r,s]=R(O),r,(l(3,s),l(1,O)))},[N,O,j,s,r,n,t,f,i,a,u,c,$,_,k,T,C,A,M,I,P,z,X,ae,F,x,V,U,Te,Pe,Ge,$t]}class fm extends K{constructor(e){super(),Z(this,e,am,om,J,{},null,[-1,-1])}}const yr=Ne(!0);let kn=Ne(null);function um(o){let e,l,t,n,r,s,f,i;return e=new Gc({}),t=new Vc({}),r=new gp({}),f=new op({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,s,u),w(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function cm(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[um]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function pm(o){let e,l,t,n,r,s,f,i,a,u,c,$;return e=new xa({}),t=new Of({}),r=new uf({}),f=new wf({}),a=new Sc({}),c=new lc({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),u=L(),b(c.$$.fragment)},m(_,k){w(e,_,k),d(_,l,k),w(t,_,k),d(_,n,k),w(r,_,k),d(_,s,k),w(f,_,k),d(_,i,k),w(a,_,k),d(_,u,k),w(c,_,k),$=!0},i(_){$||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(r.$$.fragment,_),m(f.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),$=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(r.$$.fragment,_),g(f.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),$=!1},d(_){_&&(h(l),h(n),h(s),h(i),h(u)),v(e,_),v(t,_),v(r,_),v(f,_),v(a,_),v(c,_)}}}function $m(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[pm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function mm(o){let e,l,t,n,r,s;return e=new qa({}),t=new Fu({}),r=new Yu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,i){w(e,f,i),d(f,l,i),w(t,f,i),d(f,n,i),w(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}function _m(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[mm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function gm(o){let e,l,t,n,r,s,f,i,a,u;return e=new Vi({}),t=new Ca({}),r=new ti({}),f=new yi({}),a=new Ai({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(c,$){w(e,c,$),d(c,l,$),w(t,c,$),d(c,n,$),w(r,c,$),d(c,s,$),w(f,c,$),d(c,i,$),w(a,c,$),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(r.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(s),h(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function dm(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[gm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function hm(o){let e,l,t,n;return e=new Us({}),t=new pi({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function bm(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[hm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function wm(o){let e,l,t,n,r,s,f,i;return e=new Mu({}),t=new Bf({}),r=new hu({}),f=new n$({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,s,u),w(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function vm(o){let e,l,t,n,r,s,f,i,a=Tr()=="Private (development)",u,c,$,_,k;e=new Yp({}),t=new Rp({}),r=new ou({}),f=new $c({});let T=a&&wm();return c=new ra({}),_=new ma({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),T&&T.c(),u=L(),b(c.$$.fragment),$=L(),b(_.$$.fragment)},m(C,j){w(e,C,j),d(C,l,j),w(t,C,j),d(C,n,j),w(r,C,j),d(C,s,j),w(f,C,j),d(C,i,j),T&&T.m(C,j),d(C,u,j),w(c,C,j),d(C,$,j),w(_,C,j),k=!0},p:Q,i(C){k||(m(e.$$.fragment,C),m(t.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C),m(T),m(c.$$.fragment,C),m(_.$$.fragment,C),k=!0)},o(C){g(e.$$.fragment,C),g(t.$$.fragment,C),g(r.$$.fragment,C),g(f.$$.fragment,C),g(T),g(c.$$.fragment,C),g(_.$$.fragment,C),k=!1},d(C){C&&(h(l),h(n),h(s),h(i),h(u),h($)),v(e,C),v(t,C),v(r,C),v(f,C),T&&T.d(C),v(c,C),v(_,C)}}}function km(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[vm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ym(o){let e,l,t,n,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new $o({props:f}),H.push(()=>E(e,"enabled",s)),n=new Qo({}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],B(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}function Sm(o){let e,l;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new De({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&2?le(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Cm(o){let e,l,t,n,r,s,f,i,a,u,c,$,_,k,T,C,j,A,N,M,O;return l=new fm({}),n=new nt({props:{label:"Trip generators",$$slots:{default:[cm]},$$scope:{ctx:o}}}),s=new nt({props:{label:"Existing infrastructure",$$slots:{default:[$m]},$$scope:{ctx:o}}}),i=new nt({props:{label:"Public transport",$$slots:{default:[_m]},$$scope:{ctx:o}}}),u=new nt({props:{label:"Boundaries",$$slots:{default:[dm]},$$scope:{ctx:o}}}),$=new nt({props:{label:"Census",$$slots:{default:[bm]},$$scope:{ctx:o}}}),k=new nt({props:{label:"Other",$$slots:{default:[km]},$$scope:{ctx:o}}}),C=new nt({props:{label:"Tools",$$slots:{default:[ym]},$$scope:{ctx:o}}}),A=new po({props:{disabled:!o[1]}}),M=new qt({props:{data:o[4],$$slots:{default:[Sm]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment),f=L(),b(i.$$.fragment),a=L(),b(u.$$.fragment),c=L(),b($.$$.fragment),_=L(),b(k.$$.fragment),T=L(),b(C.$$.fragment),j=L(),b(A.$$.fragment),N=L(),b(M.$$.fragment)},m(I,R){d(I,e,R),w(l,e,null),p(e,t),w(n,e,null),p(e,r),w(s,e,null),p(e,f),w(i,e,null),p(e,a),w(u,e,null),p(e,c),w($,e,null),p(e,_),w(k,e,null),p(e,T),w(C,e,null),p(e,j),w(A,e,null),o[7](e),d(I,N,R),w(M,I,R),O=!0},p(I,[R]){const P={};R&256&&(P.$$scope={dirty:R,ctx:I}),n.$set(P);const z={};R&256&&(z.$$scope={dirty:R,ctx:I}),s.$set(z);const X={};R&256&&(X.$$scope={dirty:R,ctx:I}),i.$set(X);const ae={};R&256&&(ae.$$scope={dirty:R,ctx:I}),u.$set(ae);const F={};R&256&&(F.$$scope={dirty:R,ctx:I}),$.$set(F);const x={};R&256&&(x.$$scope={dirty:R,ctx:I}),k.$set(x);const V={};R&265&&(V.$$scope={dirty:R,ctx:I}),C.$set(V);const U={};R&2&&(U.disabled=!I[1]),A.$set(U);const Te={};R&258&&(Te.$$scope={dirty:R,ctx:I}),M.$set(Te)},i(I){O||(m(l.$$.fragment,I),m(n.$$.fragment,I),m(s.$$.fragment,I),m(i.$$.fragment,I),m(u.$$.fragment,I),m($.$$.fragment,I),m(k.$$.fragment,I),m(C.$$.fragment,I),m(A.$$.fragment,I),m(M.$$.fragment,I),O=!0)},o(I){g(l.$$.fragment,I),g(n.$$.fragment,I),g(s.$$.fragment,I),g(i.$$.fragment,I),g(u.$$.fragment,I),g($.$$.fragment,I),g(k.$$.fragment,I),g(C.$$.fragment,I),g(A.$$.fragment,I),g(M.$$.fragment,I),O=!1},d(I){I&&(h(e),h(N)),v(l),v(n),v(s),v(i),v(u),v($),v(k),v(C),v(A),o[7](null),v(M,I)}}}function Tm(o,e,l){let t,n,r,s;Y(o,yr,c=>l(1,n=c)),Y(o,kn,c=>l(2,r=c)),Y(o,fn,c=>l(3,s=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>to(c,Er(_n))};function a(c){t=c,l(0,t),l(1,n)}function u(c){H[c?"unshift":"push"](()=>{r=c,kn.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&yr.set(!t)},[t,n,r,s,f,i,a,u]}class Lm extends K{constructor(e){super(),Z(this,e,Tm,Cm,J,{})}}function Mm(o){let e,l,t;return{c(){e=y("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=y("div")},m(n,r){d(n,e,r),d(n,l,r),d(n,t,r),o[3](t)},p:Q,i:Q,o:Q,d(n){n&&(h(e),h(l),h(t)),o[3](null)}}}function Im(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function Om(o,e,l){let t,n;Y(o,dn,f=>l(1,t=f)),Y(o,Vt,f=>l(2,n=f));let r=null;function s(f){H[f?"unshift":"push"](()=>{r=f,l(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&Im(r,n,t)},[r,t,n,s]}class jm extends K{constructor(e){super(),Z(this,e,Om,Mm,J,{})}}function Nm(o){let e,l,t,n,r,s,f,i,a,u,c,$,_,k,T;return l=new Br({}),n=new mo({}),f=new _o({}),$=new os({props:{boundaryGeojson:o[3]}}),{c(){e=y("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),s=y("div"),b(f.$$.fragment),i=L(),a=y("div"),u=y("h1"),u.textContent="Scheme Browser",c=L(),b($.$$.fragment),_=L(),k=y("div"),se(s,"border-bottom","1px solid #b1b4b6"),se(a,"display","flex"),se(a,"justify-content","space-between"),D(e,"slot","sidebar"),D(e,"class","govuk-prose")},m(C,j){d(C,e,j),w(l,e,null),p(e,t),w(n,e,null),p(e,r),p(e,s),w(f,s,null),p(e,i),p(e,a),p(a,u),p(a,c),w($,a,null),p(e,_),p(e,k),o[6](k),T=!0},p(C,j){const A={};j&8&&(A.boundaryGeojson=C[3]),$.$set(A)},i(C){T||(m(l.$$.fragment,C),m(n.$$.fragment,C),m(f.$$.fragment,C),m($.$$.fragment,C),T=!0)},o(C){g(l.$$.fragment,C),g(n.$$.fragment,C),g(f.$$.fragment,C),g($.$$.fragment,C),T=!1},d(C){C&&h(e),v(l),v(n),v(f),v($),o[6](null)}}}function Sr(o){let e,l;return e=new Lm({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Pm(o){let e,l,t,n;e=new ho({});let r=o[2]&&Sr();return{c(){b(e.$$.fragment),l=L(),r&&r.c(),t=ve()},m(s,f){w(e,s,f),d(s,l,f),r&&r.m(s,f),d(s,t,f),n=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=Sr(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(be(),g(r,1,1,()=>{r=null}),we())},i(s){n||(m(e.$$.fragment,s),m(r),n=!0)},o(s){g(e.$$.fragment,s),g(r),n=!1},d(s){s&&(h(l),h(t)),v(e,s),r&&r.d(s)}}}function Rm(o){let e,l,t;return l=new go({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Pm]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),D(e,"slot","main")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&2&&(s.style=n[1]),r&260&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Dm(o){let e,l,t,n,r;return e=new Io({props:{$$slots:{main:[Rm],sidebar:[Nm]},$$scope:{ctx:o}}}),n=new jm({}),{c(){b(e.$$.fragment),l=L(),t=y("div"),b(n.$$.fragment),D(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){w(e,s,f),d(s,l,f),d(s,t,f),w(n,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),r=!1},d(s){s&&(h(l),h(t)),v(e,s),v(n)}}}function Fm(o,e,l){let t,n,r,s,f;Y(o,kn,c=>l(4,t=c)),Y(o,fn,c=>l(5,n=c)),Y(o,_n,c=>l(1,r=c)),Y(o,Wn,c=>l(2,s=c)),Y(o,sn,c=>l(3,f=c)),Cr(()=>{Ur()});const i=new URLSearchParams(window.location.search);_n.set(i.get("style")||"dataviz");let a;function u(c){H[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&Wn.set(n),o.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,n,u]}class Am extends K{constructor(e){super(),Z(this,e,Fm,Dm,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Am({target:document.getElementById("app")});
