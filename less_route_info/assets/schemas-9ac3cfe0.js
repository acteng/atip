import{S as m,i as h,s as _,aW as W,b as z,c as A,g as v,m as y,l as T,t as d,n as g,q as $,e as b,h as C,ao as x,j as w,x as I,p as S,az as j,y as F,o as J,aA as M,d as B,u as Q,k,I as U,a as Y,N as P,C as G,ax as H,D as K,T as V,P as X,Z as E,Y as D,Q as ee,a1 as te,a0 as ne,$ as N,ap as O}from"./index-16feadf9.js";import{e as oe,C as re,a as se,l as L,c}from"./StreetViewController-73e22430.js";function ae(s){let e,r,t;function n(o){s[2](o)}let i={label:"Basemap",id:"basemap",choices:W()};return s[0]!==void 0&&(i.value=s[0]),e=new oe({props:i}),z.push(()=>A(e,"value",n)),e.$on("change",s[1]),{c(){v(e.$$.fragment)},m(o,l){y(e,o,l),t=!0},p(o,[l]){const a={};!r&&l&1&&(r=!0,a.value=o[0],T(()=>r=!1)),e.$set(a)},i(o){t||(d(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){$(e,o)}}}function ie(s,e,r){let{style:t}=e;function n(){let o=new URLSearchParams(window.location.search);o.set("style",t);let l=`${window.location.pathname}?${o.toString()}${window.location.hash}`;window.location.href=l}function i(o){t=o,r(0,t)}return s.$$set=o=>{"style"in o&&r(0,t=o.style)},[t,n,i]}class be extends m{constructor(e){super(),h(this,e,ie,ae,_,{style:0})}}function le(s){let e;return{c(){e=b("span"),C(e,"class","svelte-kzgqtg"),x(e,"background",s[0])},m(r,t){w(r,e,t)},p(r,[t]){t&1&&x(e,"background",r[0])},i:I,o:I,d(r){r&&S(e)}}}function ce(s,e,r){let{color:t}=e;return s.$$set=n=>{"color"in n&&r(0,t=n.color)},[t]}class ue extends m{constructor(e){super(),h(this,e,ce,le,_,{color:0})}}function Z(s,e,r){const t=s.slice();return t[1]=e[r][0],t[2]=e[r][1],t}function q(s){let e,r,t,n=s[1]+"",i,o,l;return r=new ue({props:{color:s[2]}}),{c(){e=b("li"),v(r.$$.fragment),t=B(),i=Q(n),o=B()},m(a,u){w(a,e,u),y(r,e,null),k(e,t),k(e,i),k(e,o),l=!0},p(a,u){const f={};u&1&&(f.color=a[2]),r.$set(f),(!l||u&1)&&n!==(n=a[1]+"")&&U(i,n)},i(a){l||(d(r.$$.fragment,a),l=!0)},o(a){g(r.$$.fragment,a),l=!1},d(a){a&&S(e),$(r)}}}function fe(s){let e,r,t=j(s[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=q(Z(s,t,o));const i=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){e=b("ul");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,l){w(o,e,l);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);r=!0},p(o,l){if(l&1){t=j(o[0]);let a;for(a=0;a<t.length;a+=1){const u=Z(o,t,a);n[a]?(n[a].p(u,l),d(n[a],1)):(n[a]=q(u),n[a].c(),d(n[a],1),n[a].m(e,null))}for(F(),a=t.length;a<n.length;a+=1)i(a);J()}},i(o){if(!r){for(let l=0;l<t.length;l+=1)d(n[l]);r=!0}},o(o){n=n.filter(Boolean);for(let l=0;l<n.length;l+=1)g(n[l]);r=!1},d(o){o&&S(e),M(n,o)}}}function pe(s){let e,r;return e=new re({props:{label:"Legend",$$slots:{default:[fe]},$$scope:{ctx:s}}}),{c(){v(e.$$.fragment)},m(t,n){y(e,t,n),r=!0},p(t,[n]){const i={};n&33&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){$(e,t)}}}function de(s,e,r){let{rows:t}=e;return s.$$set=n=>{"rows"in n&&r(0,t=n.rows)},[t]}class we extends m{constructor(e){super(),h(this,e,de,pe,_,{rows:0})}}const ge="/atip/less_route_info/assets/zoom_out_map-b2e1091a.svg";function me(s){let e,r;return{c(){e=b("img"),H(e.src,r=ge)||C(e,"src",r),C(e,"alt","Zoom to show entire boundary")},m(t,n){w(t,e,n)},p:I,d(t){t&&S(e)}}}function he(s){let e,r;return e=new Y({props:{title:"Zoom to show entire boundary",$$slots:{default:[me]},$$scope:{ctx:s}}}),e.$on("click",s[0]),{c(){v(e.$$.fragment)},m(t,n){y(e,t,n),r=!0},p(t,[n]){const i={};n&8&&(i.$$scope={dirty:n,ctx:t}),e.$set(i)},i(t){r||(d(e.$$.fragment,t),r=!0)},o(t){g(e.$$.fragment,t),r=!1},d(t){$(e,t)}}}function _e(s,e,r){let t;P(s,G,o=>r(2,t=o));let{boundaryGeojson:n}=e;function i(){t.fitBounds(K(n),{padding:20,animate:!0,duration:500})}return s.$$set=o=>{"boundaryGeojson"in o&&r(1,n=o.boundaryGeojson)},[i,n]}class Se extends m{constructor(e){super(),h(this,e,_e,he,_,{boundaryGeojson:1})}}let p="interventions";function ve(s,e,r){let t,n;P(s,G,a=>r(1,t=a)),P(s,V,a=>r(2,n=a));let{colorInterventions:i}=e;X(t,p,n);const o=["!=","hide_while_editing",!0];return E(t,{id:"interventions-points",source:p,filter:["all",te,o,["!=","endpoint",!0]],color:i,radius:se}),D(t,{id:"interventions-lines",source:p,filter:["all",ne,o],color:i,width:L}),E(t,{id:"interventions-lines-endpoints",source:p,filter:["==","endpoint",!0],radius:.5*L,opacity:0,strokeColor:c.lineEndpointColor,strokeWidth:2}),ee(t,{id:"interventions-polygons",source:p,filter:["all",N,o],color:i,opacity:.2}),D(t,{id:"interventions-polygon-outlines",source:p,filter:["all",N,o],color:i,opacity:.5,width:.7*L}),s.$$set=a=>{"colorInterventions"in a&&r(0,i=a.colorInterventions)},s.$$.update=()=>{if(s.$$.dirty&6){let a=JSON.parse(JSON.stringify(n)),u=[];for(let f of a.features)if(f.geometry.type=="LineString"&&!f.properties.hide_while_editing)for(let R of[f.geometry.coordinates[0],f.geometry.coordinates[f.geometry.coordinates.length-1]])u.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:R}});a.features=a.features.concat(u),t.getSource(p).setData(a)}},[i,t,n]}class ke extends m{constructor(e){super(),h(this,e,ve,null,_,{colorInterventions:0})}}function Le(s){return{v1:"Scheme Design",v2:"Experimental Scheme Design",planning:"Development Planning",criticals:"Critical Issues",atf4:"ATF4 Scheme"}[s]}function Ce(s){return{v1:"an intervention",v2:"an intervention",planning:"a development",criticals:"a critical issue",atf4:"an intervention"}[s]}function Ie(s){return{v1:"interventions",v2:"interventions",planning:"developments",criticals:"critical issues",atf4:"interventions"}[s]}function Pe(s){return s=="planning"?O(["get","reference_type",["get","planning"]],{preapp:c.preapp,outline:c.outline,"reserved matters":c["reserved matters"],"local plan":c["local plan"]},"black"):O(["get","intervention_type"],{area:c.area,route:c.route,crossing:c.crossing,other:c.other},"white")}function xe(s){return s=="planning"?[["Preapp",c.preapp],["Outline",c.outline],["Reserved matters",c["reserved matters"]],["Local plan",c["local plan"]]]:[["Areas",c.area],["Routes",c.route],["Crossings",c.crossing],["Other",c.other]]}export{be as B,ue as C,ke as I,we as L,Se as Z,Ie as a,Le as b,Pe as c,xe as d,Ce as s};
