import{S as N,i as Q,s as D,Y as Ae,a8 as Ze,e as ge,aU as Ve,c as B,an as gt,Z as Ce,_ as ve,$ as Se,a9 as Ct,t as _,p as A,d as I,aV as We,ap as oe,b as Y,n as ae,a4 as ue,aW as ht,b3 as yt,a$ as vt,bc as Ue,a7 as St,bd as De,V as Me,C as he,q as ye,b7 as Pe,v as H,W as ke,X as _e,g as Be,h as Ie,j as ne,o as ie,r as Ee,u as le,aY as se,be as wt,aX as Ye,aK as qe,ba as Mt,ao as Lt,a as be,bf as zt,w as bt,bg as Ot,E as Tt,x as Bt,m as Je,b0 as It,aS as Xe,aL as Et}from"./files-a20c2919.js";const Gt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function Ht(o){let e,t,n,l;const i=o[2].default,r=Ae(i,o,o[1],null);let f=[{type:"button"},{class:"govuk-button"},{"data-module":"govuk-button"},o[0]],s={};for(let m=0;m<f.length;m+=1)s=Ze(s,f[m]);return{c(){e=ge("button"),r&&r.c(),Ve(e,s)},m(m,c){B(m,e,c),r&&r.m(e,null),e.autofocus&&e.focus(),t=!0,n||(l=gt(e,"click",o[3]),n=!0)},p(m,[c]){r&&r.p&&(!t||c&2)&&Ce(r,i,m,m[1],t?Se(i,m[1],c,null):ve(m[1]),null),Ve(e,s=Ct(f,[{type:"button"},{class:"govuk-button"},{"data-module":"govuk-button"},c&1&&m[0]]))},i(m){t||(_(r,m),t=!0)},o(m){A(r,m),t=!1},d(m){m&&I(e),r&&r.d(m),n=!1,l()}}}function Pt(o,e,t){let{$$slots:n={},$$scope:l}=e;function i(r){oe.call(this,o,r)}return o.$$set=r=>{t(0,e=Ze(Ze({},e),We(r))),"$$scope"in r&&t(1,l=r.$$scope)},e=We(e),[e,l,n,i]}class Wo extends N{constructor(e){super(),Q(this,e,Pt,Ht,D,{})}}function Ft(o){let e;return{c(){e=ge("div"),e.innerHTML=`<p class="govuk-phase-banner__content"><strong class="govuk-tag govuk-phase-banner__content__tag">Alpha</strong> <span class="govuk-phase-banner__text">This is a new service. Contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      with any feedback.</span></p>`,Y(e,"class","govuk-phase-banner")},m(t,n){B(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&I(e)}}}class Yo extends N{constructor(e){super(),Q(this,e,null,Ft,D,{})}}const Ge=ue(""),Re=ue(null);async function Dt(o){let e=ht(Re);if(!o||!e)return"Google (attributions loading)";let[t,n]=e,l=o.getBounds(),i=`https://tile.googleapis.com/tile/v1/viewport?session=${n}&key=${t}&zoom=${Math.floor(o.getZoom())}&north=${l.getNorth()}&south=${l.getSouth()}&east=${l.getEast()}&west=${l.getWest()}`;return(await(await fetch(i)).json()).copyright}function qo(){let o=[];return yt()=="Private (development)"&&(o=o.concat([["google","Google satellite"],["Road","OS Road"],["Light","OS Light"],["Outdoor","OS Outdoor"],["bluesky","Bluesky Satellite (12.5cm)"]])),o.concat([["streets","MapTiler Streets"],["hybrid","MapTiler Satellite"],["dataviz","MapTiler Dataviz"],["uk-openzoomstack-light","OS Open Zoomstack"]])}async function xe(o){if(Re.set(null),o=="streets"||o=="hybrid"||o=="dataviz"||o=="uk-openzoomstack-light")return Ge.set("&copy; MapTiler &copy; OpenStreetMap contributors"),`https://api.maptiler.com/maps/${o}/style.json?key=MZEJTanw3WpxRvt7qDfo`;let t=await(await fetch(`${vt()}/api_keys.json`)).json(),n,l;if(o=="google"){let i=t.google,r=await Zt(i);n=`https://tile.googleapis.com/v1/2dtiles/{z}/{x}/{y}?session=${r}&key=${i}`,l="Google (attributions loading)",Re.set([i,r])}else o=="bluesky"?(n=`https://ogc.apps.midgard.airbusds-cint.com/apgb/wmts/rest/apgb:AP-12CM5-GB-LATEST/default/EPSG-3857/EPSG:3857:{z}/{y}/{x}?GUID=${t.bluesky}&format=image/png&TRANSPARENT=FALSE,`,l="Bluesky"):(n=`https://api.os.uk/maps/raster/v1/zxy/${o}_3857/{z}/{x}/{y}.png?key=${t.ordnance_survey}`,l="Contains OS data &copy; Crown copyright and database rights 2023");return Ge.set(l),{version:8,sources:{"raster-tiles":{type:"raster",tiles:[n],tileSize:256,attribution:l}},layers:[{id:"raster-basemap",type:"raster",source:"raster-tiles"}],glyphs:"https://api.maptiler.com/fonts/{fontstack}/{range}.pbf?key=MZEJTanw3WpxRvt7qDfo"}}async function Zt(o){try{let t=await(await fetch(`https://tile.googleapis.com/v1/createSession?key=${o}`,{method:"POST",body:JSON.stringify({mapType:"satellite",language:"en-GB",region:"GB"})})).json();return"session"in t?t.session:(console.error(`Couldn't get Google tile session key: ${JSON.stringify(t)}`),"")}catch(e){return console.error(`Couldn't get Google tile session key: ${e}`),""}}function Rt(o){let e,t;const n=o[2].default,l=Ae(n,o,o[1],null);return{c(){e=ge("a"),l&&l.c(),Y(e,"href",o[0]),Y(e,"target","_blank"),Y(e,"rel","noreferrer")},m(i,r){B(i,e,r),l&&l.m(e,null),t=!0},p(i,[r]){l&&l.p&&(!t||r&2)&&Ce(l,n,i,i[1],t?Se(n,i[1],r,null):ve(i[1]),null),(!t||r&1)&&Y(e,"href",i[0])},i(i){t||(_(l,i),t=!0)},o(i){A(l,i),t=!1},d(i){i&&I(e),l&&l.d(i)}}}function Ut(o,e,t){let{$$slots:n={},$$scope:l}=e,{href:i}=e;return o.$$set=r=>{"href"in r&&t(0,i=r.href),"$$scope"in r&&t(1,l=r.$$scope)},[i,l,n]}class Jo extends N{constructor(e){super(),Q(this,e,Ut,Rt,D,{href:0})}}let jt=Date.now();function Fe(o){return`${o}-${jt++}`}const je=Symbol.for("svelte-maplibre");function ze(){return St(je)}function Nt(o){let e=new WeakMap;return t=>{var r;let n=e.get(t.originalEvent);if(n!==void 0)return n;let i=(r=t.target.queryRenderedFeatures(t.point).find(f=>{var s;return(s=o.get(f.layer.id))==null?void 0:s.interactive}))==null?void 0:r.layer.id;return e.set(t.originalEvent,i),i}}function Qt(){let o=new Map;return Ue(je,{map:ue(null),source:De(null),layer:De(null),popupTarget:De(null),cluster:ue(),loadedImages:ue(new Set),minzoom:ue(0),maxzoom:ue(24),layerEvent:ue(null),layerInfo:o,eventTopMost:Nt(o)})}function pe(o){return{subscribe:o.subscribe}}function Ne({key:o,setPopupTarget:e=!1,setCluster:t=!1,setMouseEvent:n=!1}){let l=ze(),i=ue(null),r=pe(i),f={...l,[o]:pe(i)};if(e&&(f.popupTarget=r),n){let s=ue(null);f.layerEvent=s,l.layerEvent=s}return t&&(f.cluster=ue()),Ue(je,f),{...l,self:i}}function Kt(){return Ne({key:"source",setCluster:!0})}function Vt(o=!0){return Ne({key:"layer",setPopupTarget:o,setMouseEvent:o})}function Xo(){return Ne({key:"popupTarget",setPopupTarget:!0,setMouseEvent:!0})}function Wt(o){return"layerType"in o&&o.layerType==="deckgl"}function $e(o){let e;return t=>{if(t)for(let n in t){let l=e==null?void 0:e[n],i=t[n];l!==i&&o(n,i,l)}else if(e)for(let n in e)o(n,void 0,e[n]);e=t}}function Yt(o,...e){let t=[o];for(let n of e)if(n)Array.isArray(n)&&n[0]===o?t.push(...n.slice(1)):t.push(n);else continue;if(t.length!==1)return t.length===2?t[1]:t}function qt(o){return o===!0?["has","point_count"]:o===!1?["!",["has","point_count"]]:void 0}function xo(o,e){return["case",["boolean",["feature-state","hover"],!1],e,o]}var He=Jt;function Jt(o){var e,t,n;if(o){if(Array.isArray(o)){for(e=[],t=o.length,n=0;n<t;n++){var l=o[n];l!=null&&e.push(l)}return e}if(typeof o=="object"){e={};var i=Object.keys(o);for(t=i.length,n=0;n<t;n++){var r=i[n],f=o[r];f!=null&&(e[r]=f)}return e}}}function et(o){let e=o[0],t,n,l=tt(o);return{c(){l.c(),t=Me()},m(i,r){l.m(i,r),B(i,t,r),n=!0},p(i,r){r[0]&1&&D(e,e=i[0])?(he(),A(l,1,1,ae),ye(),l=tt(i),l.c(),_(l,1),l.m(t.parentNode,t)):l.p(i,r)},i(i){n||(_(l),n=!0)},o(i){A(l),n=!1},d(i){i&&I(t),l.d(i)}}}function tt(o){let e;const t=o[36].default,n=Ae(t,o,o[35],null);return{c(){n&&n.c()},m(l,i){n&&n.m(l,i),e=!0},p(l,i){n&&n.p&&(!e||i[1]&16)&&Ce(n,t,l,l[35],e?Se(t,l[35],i,null):ve(l[35]),null)},i(l){e||(_(n,l),e=!0)},o(l){A(n,l),e=!1},d(l){n&&n.d(l)}}}function Xt(o){let e,t,n=o[0]&&et(o);return{c(){n&&n.c(),e=Me()},m(l,i){n&&n.m(l,i),B(l,e,i),t=!0},p(l,i){l[0]?n?(n.p(l,i),i[0]&1&&_(n,1)):(n=et(l),n.c(),_(n,1),n.m(e.parentNode,e)):n&&(he(),A(n,1,1,()=>{n=null}),ye())},i(l){t||(_(n),t=!0)},o(l){A(n),t=!1},d(l){l&&I(e),n&&n.d(l)}}}function xt(o,e,t){let n,l,i,r,f,s,m,c,g,b,S,h,{$$slots:C={},$$scope:y}=e,{id:w=Fe("layer")}=e,{source:E=void 0}=e,{sourceLayer:T=void 0}=e,{beforeId:P=void 0}=e,{beforeLayerType:G=void 0}=e,{type:O}=e,{paint:L=void 0}=e,{layout:k=void 0}=e,{filter:z=void 0}=e,{applyToClusters:K=void 0}=e,{minzoom:d=void 0}=e,{maxzoom:ce=void 0}=e,{manageHoverState:q=!1}=e,{hovered:p=null}=e,{interactive:$=!0}=e,{hoverCursor:J=void 0}=e,{eventsIfTopMost:v=!1}=e;const X=Pe(),{map:V,source:j,self:re,minzoom:F,maxzoom:Z,eventTopMost:x,layerInfo:W}=Vt();H(o,V,u=>t(31,g=u)),H(o,j,u=>t(32,b=u)),H(o,re,u=>t(0,c=u)),H(o,F,u=>t(34,h=u)),H(o,Z,u=>t(33,S=u)),ke(()=>{c&&g&&(W.delete(c),g==null||g.removeLayer(c))});let R;function ee(u){var de,we;if(!$||!c||!g||v&&x(u)!==c)return;let a=u.features??[],M=(we=(de=a[0])==null?void 0:de.properties)==null?void 0:we.cluster_id,U={event:u,map:g,clusterId:M,layer:c,source:f,features:a};X(u.type,U)}function me(u){var de,we;if(!$||!c||!g||v&&x(u)!==c)return;J&&(g.getCanvas().style.cursor=J);let a=u.features??[];t(6,p=a[0]??null);let M=(we=(de=a[0])==null?void 0:de.properties)==null?void 0:we.cluster_id;X("mouseenter",{event:u,map:g,clusterId:M,layer:c,source:f,features:a})}function Le(u){var de,we,Ke;if(!$||!g)return;if(v&&x(u)!==c){t(6,p=null),q&&R!==void 0&&(g==null||g.setFeatureState({source:f,sourceLayer:T,id:R},{hover:!1}),R=void 0);return}g.getCanvas().style.cursor=J;let a=u.features??[],M=(we=(de=a[0])==null?void 0:de.properties)==null?void 0:we.cluster_id,U=(Ke=a[0])==null?void 0:Ke.id;U!==R&&(q&&(R!==void 0&&(g==null||g.setFeatureState({source:f,id:R,sourceLayer:T},{hover:!1})),g==null||g.setFeatureState({source:f,id:U,sourceLayer:T},{hover:!0})),R=U,t(6,p=a[0]??null)),X("mousemove",{event:u,map:g,clusterId:M,layer:c,source:f,features:a})}function fe(u){if(!(!$||!c||!g)){if(J&&(g.getCanvas().style.cursor=""),t(6,p=null),q&&R!==void 0){const a={source:f,id:R,sourceLayer:T};g==null||g.setFeatureState(a,{hover:!1}),R=void 0}X("mouseleave",{map:g,layer:c,source:f})}}let te=!0;function Oe(u){g&&(g.off("click",u,ee),g.off("dblclick",u,ee),g.off("contextmenu",u,ee),g.off("mouseenter",u,me),g.off("mousemove",u,Le),g.off("mouseleave",u,fe))}return ke(()=>{g&&c&&Oe(c)}),o.$$set=u=>{"id"in u&&t(7,w=u.id),"source"in u&&t(8,E=u.source),"sourceLayer"in u&&t(9,T=u.sourceLayer),"beforeId"in u&&t(10,P=u.beforeId),"beforeLayerType"in u&&t(11,G=u.beforeLayerType),"type"in u&&t(12,O=u.type),"paint"in u&&t(13,L=u.paint),"layout"in u&&t(14,k=u.layout),"filter"in u&&t(15,z=u.filter),"applyToClusters"in u&&t(16,K=u.applyToClusters),"minzoom"in u&&t(17,d=u.minzoom),"maxzoom"in u&&t(18,ce=u.maxzoom),"manageHoverState"in u&&t(19,q=u.manageHoverState),"hovered"in u&&t(6,p=u.hovered),"interactive"in u&&t(20,$=u.interactive),"hoverCursor"in u&&t(21,J=u.hoverCursor),"eventsIfTopMost"in u&&t(22,v=u.eventsIfTopMost),"$$scope"in u&&t(35,y=u.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&65536&&t(30,n=qt(K)),o.$$.dirty[0]&1073774592&&t(24,l=Yt("all",n,z)),o.$$.dirty[0]&131072|o.$$.dirty[1]&8&&t(26,i=d??h),o.$$.dirty[0]&262144|o.$$.dirty[1]&4&&t(25,r=ce??S),o.$$.dirty[0]&256|o.$$.dirty[1]&2&&t(29,f=E||b),o.$$.dirty[0]&654343809|o.$$.dirty[1]&1&&g&&c!==w&&f){c&&(Oe(c),W.delete(c));let u=P;if(!P&&G){let a=g.getStyle().layers,M=typeof G=="function"?G:de=>de.type===G,U=a==null?void 0:a.find(M);U&&(u=U.id)}_e(re,c=w,c),g.addLayer(He({id:c,type:O,source:f,"source-layer":T,filter:l,paint:L,layout:k,minzoom:i,maxzoom:r}),u),t(23,te=!0),g.on("click",c,ee),g.on("dblclick",c,ee),g.on("contextmenu",c,ee),g.on("mouseenter",c,me),g.on("mousemove",c,Le),g.on("mouseleave",c,fe)}o.$$.dirty[0]&1048577&&c&&W.set(c,{interactive:$}),o.$$.dirty[0]&1|o.$$.dirty[1]&1&&t(28,s=c?$e((u,a)=>g==null?void 0:g.setPaintProperty(c,u,a)):void 0),o.$$.dirty[0]&1|o.$$.dirty[1]&1&&t(27,m=c?$e((u,a)=>g==null?void 0:g.setLayoutProperty(c,u,a)):void 0),o.$$.dirty[0]&268443648&&(s==null||s(L)),o.$$.dirty[0]&134234112&&(m==null||m(k)),o.$$.dirty[0]&100663297|o.$$.dirty[1]&1&&c&&(g==null||g.setLayerZoomRange(c,i,r)),o.$$.dirty[0]&25165825|o.$$.dirty[1]&1&&c&&(te?t(23,te=!1):g==null||g.setFilter(c,l))},[c,V,j,re,F,Z,p,w,E,T,P,G,O,L,k,z,K,d,ce,q,$,J,v,te,l,r,i,m,s,f,n,g,b,S,h,y,C]}class _t extends N{constructor(e){super(),Q(this,e,xt,Xt,D,{id:7,source:8,sourceLayer:9,beforeId:10,beforeLayerType:11,type:12,paint:13,layout:14,filter:15,applyToClusters:16,minzoom:17,maxzoom:18,manageHoverState:19,hovered:6,interactive:20,hoverCursor:21,eventsIfTopMost:22},null,[-1,-1])}}function pt(o){let e;const t=o[15].default,n=Ae(t,o,o[23],null);return{c(){n&&n.c()},m(l,i){n&&n.m(l,i),e=!0},p(l,i){n&&n.p&&(!e||i&8388608)&&Ce(n,t,l,l[23],e?Se(t,l[23],i,null):ve(l[23]),null)},i(l){e||(_(n,l),e=!0)},o(l){A(n,l),e=!1},d(l){n&&n.d(l)}}}function $t(o){let e,t,n;function l(r){o[16](r)}let i={id:o[1],type:"fill",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],minzoom:o[9],maxzoom:o[10],hoverCursor:o[11],manageHoverState:o[12],eventsIfTopMost:o[13],interactive:o[14],$$slots:{default:[pt]},$$scope:{ctx:o}};return o[0]!==void 0&&(i.hovered=o[0]),e=new _t({props:i}),Be.push(()=>Ie(e,"hovered",l)),e.$on("click",o[17]),e.$on("dblclick",o[18]),e.$on("contextmenu",o[19]),e.$on("mouseenter",o[20]),e.$on("mousemove",o[21]),e.$on("mouseleave",o[22]),{c(){ne(e.$$.fragment)},m(r,f){ie(e,r,f),n=!0},p(r,[f]){const s={};f&2&&(s.id=r[1]),f&4&&(s.source=r[2]),f&8&&(s.sourceLayer=r[3]),f&16&&(s.beforeId=r[4]),f&32&&(s.beforeLayerType=r[5]),f&64&&(s.paint=r[6]),f&128&&(s.layout=r[7]),f&256&&(s.filter=r[8]),f&512&&(s.minzoom=r[9]),f&1024&&(s.maxzoom=r[10]),f&2048&&(s.hoverCursor=r[11]),f&4096&&(s.manageHoverState=r[12]),f&8192&&(s.eventsIfTopMost=r[13]),f&16384&&(s.interactive=r[14]),f&8388608&&(s.$$scope={dirty:f,ctx:r}),!t&&f&1&&(t=!0,s.hovered=r[0],Ee(()=>t=!1)),e.$set(s)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){le(e,r)}}}function eo(o,e,t){let{$$slots:n={},$$scope:l}=e,{id:i=Fe("fill")}=e,{source:r=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:m=void 0}=e,{paint:c}=e,{layout:g=void 0}=e,{filter:b=void 0}=e,{minzoom:S=void 0}=e,{maxzoom:h=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:y=!1}=e,{hovered:w=null}=e,{eventsIfTopMost:E=!1}=e,{interactive:T=!0}=e;function P(d){w=d,t(0,w)}function G(d){oe.call(this,o,d)}function O(d){oe.call(this,o,d)}function L(d){oe.call(this,o,d)}function k(d){oe.call(this,o,d)}function z(d){oe.call(this,o,d)}function K(d){oe.call(this,o,d)}return o.$$set=d=>{"id"in d&&t(1,i=d.id),"source"in d&&t(2,r=d.source),"sourceLayer"in d&&t(3,f=d.sourceLayer),"beforeId"in d&&t(4,s=d.beforeId),"beforeLayerType"in d&&t(5,m=d.beforeLayerType),"paint"in d&&t(6,c=d.paint),"layout"in d&&t(7,g=d.layout),"filter"in d&&t(8,b=d.filter),"minzoom"in d&&t(9,S=d.minzoom),"maxzoom"in d&&t(10,h=d.maxzoom),"hoverCursor"in d&&t(11,C=d.hoverCursor),"manageHoverState"in d&&t(12,y=d.manageHoverState),"hovered"in d&&t(0,w=d.hovered),"eventsIfTopMost"in d&&t(13,E=d.eventsIfTopMost),"interactive"in d&&t(14,T=d.interactive),"$$scope"in d&&t(23,l=d.$$scope)},[w,i,r,f,s,m,c,g,b,S,h,C,y,E,T,n,P,G,O,L,k,z,K,l]}class po extends N{constructor(e){super(),Q(this,e,eo,$t,D,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function to(o,e,t){let n;const{map:l}=ze();H(o,l,s=>t(4,n=s));let{position:i="top-left"}=e,{container:r=void 0}=e,f=null;return ke(()=>{n!=null&&n.loaded()&&f&&n.removeControl(f)}),o.$$set=s=>{"position"in s&&t(1,i=s.position),"container"in s&&t(2,r=s.container)},o.$$.update=()=>{if(o.$$.dirty&30&&n&&!f){let s;typeof r=="string"?s=document.querySelector(r)??void 0:s=r,t(3,f=new se.FullscreenControl({container:s})),n.addControl(f,i)}},[l,i,r,f,n]}class oo extends N{constructor(e){super(),Q(this,e,to,null,D,{position:1,container:2})}}function no(o,e,t,n,l){let i=!1;o.getSource(e)&&(i=!0,o.removeSource(e));const r=()=>{n(e)&&(o.addSource(e,t),l())};if(i){const f=()=>{e&&(o.getSource(e)?setTimeout(f,1):r())};f()}else r()}function io(o,e,t){wt().then(()=>{let n=ht(o);if(!n)return;n.getSource(e)===t&&n.removeSource(e)})}function ot(o){let e=o[0],t,n,l=nt(o);return{c(){l.c(),t=Me()},m(i,r){l.m(i,r),B(i,t,r),n=!0},p(i,r){r&1&&D(e,e=i[0])?(he(),A(l,1,1,ae),ye(),l=nt(i),l.c(),_(l,1),l.m(t.parentNode,t)):l.p(i,r)},i(i){n||(_(l),n=!0)},o(i){A(l),n=!1},d(i){i&&I(t),l.d(i)}}}function nt(o){let e;const t=o[19].default,n=Ae(t,o,o[18],null);return{c(){n&&n.c()},m(l,i){n&&n.m(l,i),e=!0},p(l,i){n&&n.p&&(!e||i&262144)&&Ce(n,t,l,l[18],e?Se(t,l[18],i,null):ve(l[18]),null)},i(l){e||(_(n,l),e=!0)},o(l){A(n,l),e=!1},d(l){n&&n.d(l)}}}function lo(o){let e,t,n=o[0]&&ot(o);return{c(){n&&n.c(),e=Me()},m(l,i){n&&n.m(l,i),B(l,e,i),t=!0},p(l,[i]){l[0]?n?(n.p(l,i),i&1&&_(n,1)):(n=ot(l),n.c(),_(n,1),n.m(e.parentNode,e)):n&&(he(),A(n,1,1,()=>{n=null}),ye())},i(l){t||(_(n),t=!0)},o(l){A(n),t=!1},d(l){l&&I(e),n&&n.d(l)}}}function ro(o,e,t){let n,l,i,{$$slots:r={},$$scope:f}=e,{id:s=Fe("geojson")}=e,{data:m}=e,{generateId:c=!1}=e,{promoteId:g=void 0}=e,{filter:b=void 0}=e,{lineMetrics:S=void 0}=e,{cluster:h=void 0}=e,{maxzoom:C=void 0}=e,{attribution:y=void 0}=e,{buffer:w=void 0}=e,{tolerance:E=void 0}=e;const{map:T,cluster:P,self:G}=Kt();H(o,T,k=>t(17,l=k)),H(o,P,k=>t(20,i=k)),H(o,G,k=>t(0,n=k));let O,L=!0;return ke(()=>{n&&O&&l&&(io(T,n,O),_e(G,n=null,n),t(15,O=void 0))}),o.$$set=k=>{"id"in k&&t(4,s=k.id),"data"in k&&t(5,m=k.data),"generateId"in k&&t(6,c=k.generateId),"promoteId"in k&&t(7,g=k.promoteId),"filter"in k&&t(8,b=k.filter),"lineMetrics"in k&&t(9,S=k.lineMetrics),"cluster"in k&&t(10,h=k.cluster),"maxzoom"in k&&t(11,C=k.maxzoom),"attribution"in k&&t(12,y=k.attribution),"buffer"in k&&t(13,w=k.buffer),"tolerance"in k&&t(14,E=k.tolerance),"$$scope"in k&&t(18,f=k.$$scope)},o.$$.update=()=>{o.$$.dirty&1024&&_e(P,i=h,i),o.$$.dirty&196593&&l&&n!==s&&(_e(G,n=s,n),no(l,n,He({type:"geojson",data:m,filter:b,lineMetrics:S,generateId:c,promoteId:g,cluster:!!h,clusterMinPoints:h==null?void 0:h.minPoints,clusterMaxZoom:h==null?void 0:h.maxZoom,clusterRadius:h==null?void 0:h.radius,clusterProperties:h==null?void 0:h.properties,maxzoom:C,attribution:y,buffer:w,tolerance:E}),k=>l&&k===n,()=>{n&&(t(15,O=l==null?void 0:l.getSource(n)),t(16,L=!0))})),o.$$.dirty&131088&&(l==null||l.on("style.load",()=>{t(15,O=l==null?void 0:l.getSource(s))})),o.$$.dirty&98336&&O&&(L?t(16,L=!1):O.setData(m)),o.$$.dirty&33792&&(O==null||O.setClusterOptions(He({cluster:!!h,clusterMaxZoom:h==null?void 0:h.maxZoom,clusterRadius:h==null?void 0:h.radius})))},[n,T,P,G,s,m,c,g,b,S,h,C,y,w,E,O,L,l,f,r]}class $o extends N{constructor(e){super(),Q(this,e,ro,lo,D,{id:4,data:5,generateId:6,promoteId:7,filter:8,lineMetrics:9,cluster:10,maxzoom:11,attribution:12,buffer:13,tolerance:14})}}function fo(o,e,t){let n;const{map:l}=ze();H(o,l,b=>t(8,n=b));let{position:i="top-left"}=e,{positionOptions:r=void 0}=e,{fitBoundsOptions:f=void 0}=e,{trackUserLocation:s=!1}=e,{showAccuracyCircle:m=!0}=e,{showUserLocation:c=!0}=e,{control:g=null}=e;return ke(()=>{n!=null&&n.loaded()&&g&&n.removeControl(g)}),o.$$set=b=>{"position"in b&&t(2,i=b.position),"positionOptions"in b&&t(3,r=b.positionOptions),"fitBoundsOptions"in b&&t(4,f=b.fitBoundsOptions),"trackUserLocation"in b&&t(5,s=b.trackUserLocation),"showAccuracyCircle"in b&&t(6,m=b.showAccuracyCircle),"showUserLocation"in b&&t(7,c=b.showUserLocation),"control"in b&&t(1,g=b.control)},o.$$.update=()=>{o.$$.dirty&510&&n&&!g&&(t(1,g=new se.GeolocateControl({positionOptions:r,fitBoundsOptions:f,trackUserLocation:s,showAccuracyCircle:m,showUserLocation:c})),n.addControl(g,i))},[l,g,i,r,f,s,m,c,n]}class uo extends N{constructor(e){super(),Q(this,e,fo,null,D,{position:2,positionOptions:3,fitBoundsOptions:4,trackUserLocation:5,showAccuracyCircle:6,showUserLocation:7,control:1})}}function so(o){let e;const t=o[15].default,n=Ae(t,o,o[23],null);return{c(){n&&n.c()},m(l,i){n&&n.m(l,i),e=!0},p(l,i){n&&n.p&&(!e||i&8388608)&&Ce(n,t,l,l[23],e?Se(t,l[23],i,null):ve(l[23]),null)},i(l){e||(_(n,l),e=!0)},o(l){A(n,l),e=!1},d(l){n&&n.d(l)}}}function ao(o){let e,t,n;function l(r){o[16](r)}let i={id:o[1],type:"line",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],minzoom:o[9],maxzoom:o[10],hoverCursor:o[11],manageHoverState:o[12],eventsIfTopMost:o[13],interactive:o[14],$$slots:{default:[so]},$$scope:{ctx:o}};return o[0]!==void 0&&(i.hovered=o[0]),e=new _t({props:i}),Be.push(()=>Ie(e,"hovered",l)),e.$on("click",o[17]),e.$on("dblclick",o[18]),e.$on("contextmenu",o[19]),e.$on("mouseenter",o[20]),e.$on("mousemove",o[21]),e.$on("mouseleave",o[22]),{c(){ne(e.$$.fragment)},m(r,f){ie(e,r,f),n=!0},p(r,[f]){const s={};f&2&&(s.id=r[1]),f&4&&(s.source=r[2]),f&8&&(s.sourceLayer=r[3]),f&16&&(s.beforeId=r[4]),f&32&&(s.beforeLayerType=r[5]),f&64&&(s.paint=r[6]),f&128&&(s.layout=r[7]),f&256&&(s.filter=r[8]),f&512&&(s.minzoom=r[9]),f&1024&&(s.maxzoom=r[10]),f&2048&&(s.hoverCursor=r[11]),f&4096&&(s.manageHoverState=r[12]),f&8192&&(s.eventsIfTopMost=r[13]),f&16384&&(s.interactive=r[14]),f&8388608&&(s.$$scope={dirty:f,ctx:r}),!t&&f&1&&(t=!0,s.hovered=r[0],Ee(()=>t=!1)),e.$set(s)},i(r){n||(_(e.$$.fragment,r),n=!0)},o(r){A(e.$$.fragment,r),n=!1},d(r){le(e,r)}}}function co(o,e,t){let{$$slots:n={},$$scope:l}=e,{id:i=Fe("line")}=e,{source:r=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:m=void 0}=e,{paint:c}=e,{layout:g=void 0}=e,{filter:b=void 0}=e,{minzoom:S=void 0}=e,{maxzoom:h=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:y=!1}=e,{hovered:w=null}=e,{eventsIfTopMost:E=!1}=e,{interactive:T=!0}=e;function P(d){w=d,t(0,w)}function G(d){oe.call(this,o,d)}function O(d){oe.call(this,o,d)}function L(d){oe.call(this,o,d)}function k(d){oe.call(this,o,d)}function z(d){oe.call(this,o,d)}function K(d){oe.call(this,o,d)}return o.$$set=d=>{"id"in d&&t(1,i=d.id),"source"in d&&t(2,r=d.source),"sourceLayer"in d&&t(3,f=d.sourceLayer),"beforeId"in d&&t(4,s=d.beforeId),"beforeLayerType"in d&&t(5,m=d.beforeLayerType),"paint"in d&&t(6,c=d.paint),"layout"in d&&t(7,g=d.layout),"filter"in d&&t(8,b=d.filter),"minzoom"in d&&t(9,S=d.minzoom),"maxzoom"in d&&t(10,h=d.maxzoom),"hoverCursor"in d&&t(11,C=d.hoverCursor),"manageHoverState"in d&&t(12,y=d.manageHoverState),"hovered"in d&&t(0,w=d.hovered),"eventsIfTopMost"in d&&t(13,E=d.eventsIfTopMost),"interactive"in d&&t(14,T=d.interactive),"$$scope"in d&&t(23,l=d.$$scope)},[w,i,r,f,s,m,c,g,b,S,h,C,y,E,T,n,P,G,O,L,k,z,K,l]}class en extends N{constructor(e){super(),Q(this,e,co,ao,D,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13,interactive:14})}}function mo(o,e,t){let n;const l=Pe();let{layer:i=void 0}=e;const{map:r}=ze();H(o,r,c=>t(2,n=c));function f(c){l(c.type,{...c,map:r})}const s=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],m=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return ke(()=>{if(n)if(i)for(const c of s)n.off(c,i,f);else for(const c of m)n.off(c,f)}),o.$$set=c=>{"layer"in c&&t(1,i=c.layer)},o.$$.update=()=>{if(o.$$.dirty&6&&n)if(i)for(const c of s)n.on(c,i,f);else for(const c of m)n.on(c,f)},[r,i,n]}class go extends N{constructor(e){super(),Q(this,e,mo,null,D,{layer:1})}}function ho(o){let e=o.getCenter(),t=Math.round(o.getZoom()*100)/100,n=Math.ceil((t*Math.LN2+Math.log(512/360/.5))/Math.LN10),l=Math.pow(10,n),i=Math.round(e.lat*l)/l,r=Math.round(e.lng*l)/l,f=`${t}/${i}/${r}`,s=o.getBearing(),m=o.getPitch();return(s||m)&&(f+=`/${Math.round(s*10)/10}`),m&&(f+=`/${Math.round(m)}`),`#${f}`}function yo(o){return o.replace("#","").split("/").map(parseFloat)}var Te=Qe;function Qe(o,e){return o===e||o!==o&&e!==e?!0:typeof o!=typeof e||{}.toString.call(o)!={}.toString.call(e)||o!==Object(o)||!o?!1:Array.isArray(o)?it(o,e):{}.toString.call(o)=="[object Set]"?it(Array.from(o),Array.from(e)):{}.toString.call(o)=="[object Object]"?_o(o,e):bo(o,e)}function bo(o,e){return o.toString()===e.toString()}function it(o,e){var t=o.length;if(t!=e.length)return!1;for(var n=0;n<t;n++)if(!Qe(o[n],e[n]))return!1;return!0}function _o(o,e){var t=Object.keys(o),n=t.length;if(n!=Object.keys(e).length)return!1;for(var l=0;l<n;l++){var i=t[l];if(!(e.hasOwnProperty(i)&&Qe(o[i],e[i])))return!1}return!0}function ko(o,e,t){let n;const{map:l}=ze();H(o,l,c=>t(6,n=c));let{position:i="top-left"}=e,{showCompass:r=!0}=e,{showZoom:f=!0}=e,{visualizePitch:s=!1}=e,m=null;return ke(()=>{n!=null&&n.loaded()&&m&&n.removeControl(m)}),o.$$set=c=>{"position"in c&&t(1,i=c.position),"showCompass"in c&&t(2,r=c.showCompass),"showZoom"in c&&t(3,f=c.showZoom),"visualizePitch"in c&&t(4,s=c.visualizePitch)},o.$$.update=()=>{o.$$.dirty&126&&n&&!m&&(t(5,m=new se.NavigationControl({showCompass:r,showZoom:f,visualizePitch:s})),n.addControl(m,i))},[l,i,r,f,s,m,n]}class kt extends N{constructor(e){super(),Q(this,e,ko,null,D,{position:1,showCompass:2,showZoom:3,visualizePitch:4})}}function Ao(o,e,t){let n;const{map:l}=ze();H(o,l,m=>t(5,n=m));let{position:i="bottom-left"}=e,{maxWidth:r=void 0}=e,{unit:f="metric"}=e,s=null;return ke(()=>{n!=null&&n.loaded()&&s&&n.removeControl(s)}),o.$$set=m=>{"position"in m&&t(1,i=m.position),"maxWidth"in m&&t(2,r=m.maxWidth),"unit"in m&&t(3,f=m.unit)},o.$$.update=()=>{o.$$.dirty&62&&n&&!s&&(t(4,s=new se.ScaleControl({maxWidth:r,unit:f})),n.addControl(s,i))},[l,i,r,f,s,n]}class At extends N{constructor(e){super(),Q(this,e,Ao,null,D,{position:1,maxWidth:2,unit:3})}}const{window:Co}=Gt,vo=o=>({map:o[0]&16,loadedImages:o[0]&32,allImagesLoaded:o[0]&64}),lt=o=>({map:o[4],loadedImages:o[5],allImagesLoaded:o[6]});function rt(o){let e,t,n=o[3]&&ft(o);const l=o[40].default,i=Ae(l,o,o[39],lt);return{c(){n&&n.c(),e=be(),i&&i.c()},m(r,f){n&&n.m(r,f),B(r,e,f),i&&i.m(r,f),t=!0},p(r,f){r[3]?n?(n.p(r,f),f[0]&8&&_(n,1)):(n=ft(r),n.c(),_(n,1),n.m(e.parentNode,e)):n&&(he(),A(n,1,1,()=>{n=null}),ye()),i&&i.p&&(!t||f[0]&112|f[1]&256)&&Ce(i,l,r,r[39],t?Se(l,r[39],f,vo):ve(r[39]),lt)},i(r){t||(_(n),_(i,r),t=!0)},o(r){A(n),A(i,r),t=!1},d(r){r&&I(e),n&&n.d(r),i&&i.d(r)}}}function ft(o){let e,t,n,l,i,r,f,s;return e=new kt({props:{position:o[7]}}),n=new uo({props:{position:o[7],fitBoundsOptions:{maxZoom:12}}}),i=new oo({props:{position:o[7]}}),f=new At({props:{position:o[7]}}),{c(){ne(e.$$.fragment),t=be(),ne(n.$$.fragment),l=be(),ne(i.$$.fragment),r=be(),ne(f.$$.fragment)},m(m,c){ie(e,m,c),B(m,t,c),ie(n,m,c),B(m,l,c),ie(i,m,c),B(m,r,c),ie(f,m,c),s=!0},p(m,c){const g={};c[0]&128&&(g.position=m[7]),e.$set(g);const b={};c[0]&128&&(b.position=m[7]),n.$set(b);const S={};c[0]&128&&(S.position=m[7]),i.$set(S);const h={};c[0]&128&&(h.position=m[7]),f.$set(h)},i(m){s||(_(e.$$.fragment,m),_(n.$$.fragment,m),_(i.$$.fragment,m),_(f.$$.fragment,m),s=!0)},o(m){A(e.$$.fragment,m),A(n.$$.fragment,m),A(i.$$.fragment,m),A(f.$$.fragment,m),s=!1},d(m){m&&(I(t),I(l),I(r)),le(e,m),le(n,m),le(i,m),le(f,m)}}}function So(o){let e,t,n,l,i,r=o[4]&&o[0]&&rt(o);return{c(){e=ge("div"),r&&r.c(),Y(e,"class",t=Ye(o[2])+" svelte-p00lfq"),Y(e,"data-testid","map-container"),qe(e,"expand-map",!o[2])},m(f,s){B(f,e,s),r&&r.m(e,null),o[41](e),n=!0,l||(i=[gt(Co,"hashchange",o[11]),Mt(o[10].call(null,e))],l=!0)},p(f,s){f[4]&&f[0]?r?(r.p(f,s),s[0]&17&&_(r,1)):(r=rt(f),r.c(),_(r,1),r.m(e,null)):r&&(he(),A(r,1,1,()=>{r=null}),ye()),(!n||s[0]&4&&t!==(t=Ye(f[2])+" svelte-p00lfq"))&&Y(e,"class",t),(!n||s[0]&4)&&qe(e,"expand-map",!f[2])},i(f){n||(_(r),n=!0)},o(f){A(r),n=!1},d(f){f&&I(e),r&&r.d(),o[41](null),l=!1,Lt(i)}}}function wo(o,e,t){let n,l,i,r,{$$slots:f={},$$scope:s}=e,{map:m=null}=e,{mapContainer:c=void 0}=e,{class:g=void 0}=e,{style:b}=e,{diffStyleUpdates:S=!1}=e,{center:h=void 0}=e,{zoom:C=void 0}=e,{pitch:y=0}=e,{bearing:w=0}=e,{bounds:E=void 0}=e,{hash:T=!1}=e,{updateHash:P=u=>{window.history.replaceState(window.history.state,"",u)}}=e,{loaded:G=!1}=e,{minZoom:O=0}=e,{maxZoom:L=22}=e,{antialias:k=void 0}=e,{zoomOnDoubleClick:z=!0}=e,{locale:K=void 0}=e,{interactive:d=!0}=e,{attributionControl:ce=!0}=e,{cooperativeGestures:q=!1}=e,{preserveDrawingBuffer:p=!1}=e,{maxBounds:$=void 0}=e,{images:J=[]}=e,{standardControls:v=!1}=e,{filterLayers:X=void 0}=e,{transformRequest:V=void 0}=e;const j=Pe(),{map:re,loadedImages:F}=Qt();H(o,re,u=>t(4,i=u)),H(o,F,u=>t(5,r=u));let Z=new Set;async function x(u,a=!1){if(i&&!(!i.loaded()&&!a))if("url"in u){Z.add(u.id);try{let M=await i.loadImage(u.url);i==null||i.addImage(u.id,M.data,u.options),r.add(u.id),F.set(r)}catch(M){j("error",M)}finally{Z.delete(u.id)}}else i.addImage(u.id,u.data,u.options),r.add(u.id),F.set(r)}let W,R,ee,me;function Le(u){return te(),_e(re,i=new se.Map(He({container:u,style:b,locale:K,center:h,zoom:C,pitch:y,bearing:w,minZoom:O,maxZoom:L,antialias:k,interactive:d,preserveDrawingBuffer:p,maxBounds:$,bounds:E,attributionControl:ce,transformRequest:V,cooperativeGestures:q})),i),i.on("load",a=>{a.target.getContainer().setAttribute("data-testid","map"),a.target.getCanvas().setAttribute("data-testid","map-canvas"),t(0,G=!0),j("load",i)}),i.on("error",a=>j("error",{...a,map:i})),i.on("movestart",a=>j("movestart",{...a,map:i})),i.on("moveend",a=>{if(t(12,h=a.target.getCenter()),t(13,C=a.target.getZoom()),t(14,y=a.target.getPitch()),t(15,w=a.target.getBearing()),t(16,E=a.target.getBounds()),j("moveend",{...a,map:i}),T){let M=new URL(window.location.href.replace(/(#.+)?$/,ho(i)));P(M)}}),i.on("click",a=>j("click",{...a,map:i})),i.on("dblclick",a=>j("dblclick",{...a,map:i})),i.on("contextmenu",a=>j("contextmenu",{...a,map:i})),i.on("zoomstart",a=>j("zoomstart",{...a,map:i})),i.on("zoom",a=>{j("zoom",{...a,map:i})}),i.on("zoomend",a=>{j("zoomend",{...a,map:i})}),i.on("style.load",()=>{if(i){const a=i.getStyle();if(t(36,W=a.layers.map(M=>M.id)),t(37,R=Object.keys(a.sources)),me)for(const[M,U]of Object.entries(me))i.addSource(M,U);if(ee)for(const M of ee)i.addLayer(M);for(const M of J)x(M,!0)}}),i.on("styledata",a=>{if(i&&X){const M=i.getStyle().layers;if(M)for(let U of M)X(U)||i.setLayoutProperty(U.id,"visibility","none")}j("styledata",{...a,map:i})}),{destroy(){t(0,G=!1),i==null||i.remove(),_e(re,i=null,i)}}}let fe=b;function te(){if(T){let u=yo(window.location.hash);u.length>=3&&(t(13,C=u[0]),t(12,h=[u[2],u[1]])),u.length==5&&(t(15,w=u[3]),t(14,y=u[4]))}}function Oe(u){Be[u?"unshift":"push"](()=>{c=u,t(1,c)})}return o.$$set=u=>{"map"in u&&t(17,m=u.map),"mapContainer"in u&&t(1,c=u.mapContainer),"class"in u&&t(2,g=u.class),"style"in u&&t(18,b=u.style),"diffStyleUpdates"in u&&t(19,S=u.diffStyleUpdates),"center"in u&&t(12,h=u.center),"zoom"in u&&t(13,C=u.zoom),"pitch"in u&&t(14,y=u.pitch),"bearing"in u&&t(15,w=u.bearing),"bounds"in u&&t(16,E=u.bounds),"hash"in u&&t(20,T=u.hash),"updateHash"in u&&t(21,P=u.updateHash),"loaded"in u&&t(0,G=u.loaded),"minZoom"in u&&t(22,O=u.minZoom),"maxZoom"in u&&t(23,L=u.maxZoom),"antialias"in u&&t(24,k=u.antialias),"zoomOnDoubleClick"in u&&t(25,z=u.zoomOnDoubleClick),"locale"in u&&t(26,K=u.locale),"interactive"in u&&t(27,d=u.interactive),"attributionControl"in u&&t(28,ce=u.attributionControl),"cooperativeGestures"in u&&t(29,q=u.cooperativeGestures),"preserveDrawingBuffer"in u&&t(30,p=u.preserveDrawingBuffer),"maxBounds"in u&&t(31,$=u.maxBounds),"images"in u&&t(32,J=u.images),"standardControls"in u&&t(3,v=u.standardControls),"filterLayers"in u&&t(33,X=u.filterLayers),"transformRequest"in u&&t(34,V=u.transformRequest),"$$scope"in u&&t(39,s=u.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&8&&t(7,n=typeof v=="boolean"?void 0:v),o.$$.dirty[0]&16&&t(17,m=i),o.$$.dirty[0]&786448|o.$$.dirty[1]&224&&i&&!Te(b,fe)){const u=i.getStyle();if(W&&(ee=u.layers.filter(a=>!W.includes(a.id))),R){const a=Object.keys(u.sources).filter(M=>!R.includes(M));me={};for(const M of a)me[M]=u.sources[M]}t(38,fe=b),i.setStyle(b,{diff:S}),_e(F,r=new Set,r),t(35,Z=new Set)}if(o.$$.dirty[0]&49|o.$$.dirty[1]&18&&G&&i!=null&&i.loaded())for(let u of J)!r.has(u.id)&&!Z.has(u.id)&&!i.hasImage(u.id)&&x(u);if(o.$$.dirty[0]&32|o.$$.dirty[1]&2&&t(6,l=J.every(u=>r.has(u.id))),o.$$.dirty[0]&61456&&i){let u={};h!=null&&!Te(h,i==null?void 0:i.getCenter())&&(u.center=h),C!=null&&!Te(C,i==null?void 0:i.getZoom())&&(u.zoom=C),w!=null&&!Te(w,i==null?void 0:i.getBearing())&&(u.bearing=w),y!=null&&!Te(y,i==null?void 0:i.getPitch())&&(u.pitch=y),Object.keys(u).length&&i.easeTo(u)}o.$$.dirty[0]&65552&&E&&!Te(E,i==null?void 0:i.getBounds())&&(i==null||i.fitBounds(E)),o.$$.dirty[0]&33554448&&(z?i==null||i.doubleClickZoom.enable():i==null||i.doubleClickZoom.disable())},[G,c,g,v,i,r,l,n,re,F,Le,te,h,C,y,w,E,m,b,S,T,P,O,L,k,z,K,d,ce,q,p,$,J,X,V,Z,W,R,fe,s,f,Oe]}class Mo extends N{constructor(e){super(),Q(this,e,wo,So,D,{map:17,mapContainer:1,class:2,style:18,diffStyleUpdates:19,center:12,zoom:13,pitch:14,bearing:15,bounds:16,hash:20,updateHash:21,loaded:0,minZoom:22,maxZoom:23,antialias:24,zoomOnDoubleClick:25,locale:26,interactive:27,attributionControl:28,cooperativeGestures:29,preserveDrawingBuffer:30,maxBounds:31,images:32,standardControls:3,filterLayers:33,transformRequest:34},null,[-1,-1])}}const Lo=o=>({features:o[0]&16,data:o[0]&16,map:o[0]&4,close:o[0]&1}),ut=o=>{var e;return{features:o[4],data:(e=o[4])==null?void 0:e[0],map:o[2],close:o[31]}};function st(o){let e,t,n=(o[4]||o[3]instanceof se.Marker)&&at(o);return{c(){e=ge("div"),n&&n.c()},m(l,i){B(l,e,i),n&&n.m(e,null),o[32](e),t=!0},p(l,i){l[4]||l[3]instanceof se.Marker?n?(n.p(l,i),i[0]&24&&_(n,1)):(n=at(l),n.c(),_(n,1),n.m(e,null)):n&&(he(),A(n,1,1,()=>{n=null}),ye())},i(l){t||(_(n),t=!0)},o(l){A(n),t=!1},d(l){l&&I(e),n&&n.d(),o[32](null)}}}function at(o){let e;const t=o[30].default,n=Ae(t,o,o[29],ut);return{c(){n&&n.c()},m(l,i){n&&n.m(l,i),e=!0},p(l,i){n&&n.p&&(!e||i[0]&536870933)&&Ce(n,t,l,l[29],e?Se(t,l[29],i,Lo):ve(l[29]),ut)},i(l){e||(_(n,l),e=!0)},o(l){A(n,l),e=!1},d(l){n&&n.d(l)}}}function zo(o){let e,t,n=o[9].default&&st(o);return{c(){n&&n.c(),e=Me()},m(l,i){n&&n.m(l,i),B(l,e,i),t=!0},p(l,i){l[9].default?n?(n.p(l,i),i[0]&512&&_(n,1)):(n=st(l),n.c(),_(n,1),n.m(e.parentNode,e)):n&&(he(),A(n,1,1,()=>{n=null}),ye())},i(l){t||(_(n),t=!0)},o(l){A(n),t=!1},d(l){l&&I(e),n&&n.d(l)}}}function Oo(o,e,t){let n,l,i,r,f,s,{$$slots:m={},$$scope:c}=e;const g=zt(m);let{closeButton:b=void 0}=e,{closeOnClickOutside:S=!0}=e,{closeOnClickInside:h=!1}=e,{closeOnMove:C=!1}=e,{openOn:y="click"}=e,{openIfTopMost:w=!0}=e,{focusAfterOpen:E=!0}=e,{anchor:T=void 0}=e,{offset:P=void 0}=e,{popupClass:G=void 0}=e,{maxWidth:O=void 0}=e,{lngLat:L=void 0}=e,{html:k=void 0}=e,{open:z=!1}=e;const K=Pe(),{map:d,popupTarget:ce,layerEvent:q,layer:p,eventTopMost:$}=ze();H(o,d,a=>t(2,i=a)),H(o,ce,a=>t(3,f=a)),H(o,q,a=>t(28,r=a)),H(o,p,a=>t(35,s=a));const J=["click","dblclick","contextmenu"];let v,X=!1,V;function j(){if(!v)return;let a=v.getElement();!a||a===V||(V=a,y==="hover"&&(V.style.pointerEvents="none"),V.addEventListener("mouseenter",()=>{t(24,X=!0)},{passive:!0}),V.addEventListener("mouseleave",()=>{t(24,X=!1)},{passive:!0}),V.addEventListener("click",()=>{h&&t(0,z=!1)},{passive:!0}))}bt(()=>{if(i)return i.on("click",fe),i.on("contextmenu",fe),typeof f=="string"&&(i.on("click",f,x),i.on("dblclick",f,x),i.on("contextmenu",f,x),i.on("mousemove",f,Le),i.on("mouseleave",f,me),i.on("touchstart",f,R),i.on("touchend",f,ee)),()=>{i!=null&&i.loaded()&&(v==null||v.remove(),i.off("click",fe),i.off("contextmenu",fe),f instanceof se.Marker?f.getPopup()===v&&f.setPopup(void 0):typeof f=="string"&&(i.off("click",f,x),i.off("dblclick",f,x),i.off("contextmenu",f,x),i.off("mousemove",f,Le),i.off("mouseleave",f,me),i.off("touchstart",f,R),i.off("touchend",f,ee)))}});function re(a){return w?!("marker"in a)&&!Wt(a)&&$(a)!==s:!1}let F=null,Z="normal";function x(a){a.type===y&&(re(a)||("layerType"in a?a.layerType==="deckgl"?(t(10,L=a.coordinate),t(4,F=a.object?[a.object]:null)):(t(10,L=a.lngLat),t(4,F=a.features??[])):(t(10,L=a.lngLat),t(4,F=a.features??[])),setTimeout(()=>t(0,z=!0))))}let W=null;function R(a){W=a.point}function ee(a){if(!W||y!=="hover")return;let M=W.dist(a.point);W=null,M<3&&(t(10,L=a.lngLat),t(4,F=a.features??[]),v.isOpen()?t(25,Z="justOpened"):(t(25,Z="opening"),t(0,z=!0)))}function me(a){y!=="hover"||W||Z!=="normal"||(t(0,z=!1),t(4,F=null))}function Le(a){if(!(y!=="hover"||W||Z!=="normal")){if(re(a)){t(0,z=!1),t(4,F=null);return}t(0,z=!0),t(4,F=a.features??[]),t(10,L=a.lngLat)}}function fe(a){if(Z==="justOpened"){t(25,Z="normal");return}if(!S)return;let M=[V,f instanceof se.Marker?f==null?void 0:f.getElement():null];z&&v.isOpen()&&!M.some(U=>U==null?void 0:U.contains(a.originalEvent.target))&&(a.type==="contextmenu"&&y==="contextmenu"||a.type!=="contextmenu")&&t(0,z=!1)}ke(()=>{i&&(v!=null&&v.isOpen())&&v.remove()});let te;const Oe=()=>t(0,z=!1);function u(a){Be[a?"unshift":"push"](()=>{te=a,t(1,te)})}return o.$$set=a=>{"closeButton"in a&&t(11,b=a.closeButton),"closeOnClickOutside"in a&&t(12,S=a.closeOnClickOutside),"closeOnClickInside"in a&&t(13,h=a.closeOnClickInside),"closeOnMove"in a&&t(14,C=a.closeOnMove),"openOn"in a&&t(15,y=a.openOn),"openIfTopMost"in a&&t(16,w=a.openIfTopMost),"focusAfterOpen"in a&&t(17,E=a.focusAfterOpen),"anchor"in a&&t(18,T=a.anchor),"offset"in a&&t(19,P=a.offset),"popupClass"in a&&t(20,G=a.popupClass),"maxWidth"in a&&t(21,O=a.maxWidth),"lngLat"in a&&t(10,L=a.lngLat),"html"in a&&t(22,k=a.html),"open"in a&&t(0,z=a.open),"$$scope"in a&&t(29,c=a.$$scope)},o.$$.update=()=>{if(o.$$.dirty[0]&14336&&t(27,n=b??(!S&&!h)),o.$$.dirty[0]&146685952&&(v||(t(23,v=new se.Popup({closeButton:n,closeOnClick:!1,closeOnMove:C,focusAfterOpen:E,maxWidth:O,className:G,anchor:T,offset:P})),V=v.getElement(),v.on("open",()=>{t(0,z=!0),j(),K("open",v)}),v.on("close",()=>{t(0,z=!1),K("close",v)}),v.on("hover",()=>{K("hover",v)}))),o.$$.dirty[0]&8421384&&v&&f instanceof se.Marker&&(y==="click"?f.setPopup(v):f.getPopup()===v&&f.setPopup(void 0)),o.$$.dirty[0]&268468224&&J.includes(y)&&(r==null?void 0:r.type)===y&&(x(r),_e(q,r=null,r)),o.$$.dirty[0]&268468224&&t(26,l=y==="hover"&&((r==null?void 0:r.type)==="mousemove"||(r==null?void 0:r.type)==="mouseenter")),o.$$.dirty[0]&352354304&&y==="hover"&&q&&(l&&r&&(r.layerType==="deckgl"?(t(10,L=r.coordinate),t(4,F=r.object?[r.object]:null)):(t(10,L=r.lngLat),t(4,F=r.features??[]))),t(0,z=(l||X)??!1)),o.$$.dirty[0]&12582914&&(te?v.setDOMContent(te):k&&v.setHTML(k)),o.$$.dirty[0]&8389632&&L&&v.setLngLat(L),o.$$.dirty[0]&41943045&&i){let a=v.isOpen();z&&!a?(v.addTo(i),Z==="opening"&&t(25,Z="justOpened")):!z&&a&&v.remove()}},[z,te,i,f,F,d,ce,q,p,g,L,b,S,h,C,y,w,E,T,P,G,O,k,v,X,Z,l,n,r,c,m,Oe,u]}class tn extends N{constructor(e){super(),Q(this,e,Oo,zo,D,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}function To(o){let e,t,n,l;const i=[Io,Bo],r=[];function f(s,m){return s[0]?0:1}return e=f(o),t=r[e]=i[e](o),{c(){t.c(),n=Me()},m(s,m){r[e].m(s,m),B(s,n,m),l=!0},p(s,m){t.p(s,m)},i(s){l||(_(t),l=!0)},o(s){A(t),l=!1},d(s){s&&I(n),r[e].d(s)}}}function Bo(o){let e,t;return e=new Tt({props:{errorMessage:"You shouldn't be able to view this app without being logged in!"}}),{c(){ne(e.$$.fragment)},m(n,l){ie(e,n,l),t=!0},p:ae,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){A(e.$$.fragment,n),t=!1},d(n){le(e,n)}}}function Io(o){let e;return{c(){e=ge("p"),e.textContent=`Logged in as ${o[0]}`},m(t,n){B(t,e,n)},p:ae,i:ae,o:ae,d(t){t&&I(e)}}}function Eo(o){let e=yt()=="Private (development)",t,n,l=e&&To(o);return{c(){l&&l.c(),t=Me()},m(i,r){l&&l.m(i,r),B(i,t,r),n=!0},p(i,[r]){e&&l.p(i,r)},i(i){n||(_(l),n=!0)},o(i){A(l),n=!1},d(i){i&&I(t),l&&l.d(i)}}}function Go(o){return[Ot.get("email")]}class on extends N{constructor(e){super(),Q(this,e,Go,Eo,D,{})}}const Ho="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAQAAAC1QeVaAAAAAmJLR0QA/4ePzL8AAACgSURBVBjTY2D4D4cvGHoY2BlQwH8U2I4pCQKsDHFg3VglGRjEgazvmJLlQNjIcAnIOobbztcM5piSHUBYzxDNwMfAgMtOGKjHJpnJ8IwhhcGFYREDM6ZkCMMqoPHXGC4zBKEa5cPwBKioAAiXMIQz/GZ4yuCFkHzC4MjgxPCNoZaBjeE+kOXEcB0h+RjIdWG4AGU7w9lg4A0UesBgj8oGAP6nSFElh0b7AAAAAElFTkSuQmCC",Po="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAm0lEQVRIS+2U0Q2AIAxEYQM30Q3UDXQy3UhHkE0cweuHHxKTXpuQaALJ/cE9eoXGUHjFwv6hAtSEPxFRh2su0Ayd6pWzDUwFO8700AGNVggDaGAqkNYDYQBStBvCAtwQC8AF8QA2kORlJWjQmm4BSB9M5lIyC3CZswC3OQu4PxqVef7TmYikoSs0aQ19GyMMwDp+HvsrQI3v/xFduXoiGbi1DtQAAAAASUVORK5CYII=",Fo="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAJCAYAAAACTR1pAAAACXBIWXMAAANVAAADaAEorMqLAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAPtJREFUKJF9kT1LwwAURc+NAQsdtFYHa8HBSAcHJ0HBUVz0n7i4ObkoKAV/gYObm5ubu7OKFMQPECFuoQgWRJtch9aSYvSO770D53Flm58kM401BdkesAJcYw4m4scz8kf9qGBGe3ZuNcuCHcEmcGv7qBo/nWKnAzCpR8+/yMGWUWAcU0L6wn4DOgAhcFHEGEoBLGAqoK7te6Eb406h6vv0/NRnyBawDYyATzKFzcmXu9chmaQeHfesVDZeFGqAU0QrMy3BR5FRCKz31FxGGrMdIrpATVD98/0hVSlo16INB9oFLyEuldKsxA/n/4O59DvdB5YNVzKH+U6/AaiZavkY71DDAAAAAElFTkSuQmCC",Do="/atip/manage_files/assets/google_on_non_white_hdpi-368415f0.png";function Zo(o){let e,t,n,l;return{c(){e=ge("div"),t=new It(!1),n=Bt(` |
  `),l=ge("a"),l.textContent="MapLibre",t.a=n,Y(l,"href","https://maplibre.org/"),Y(l,"target","_blank"),Y(e,"class","svelte-1yeu1m4")},m(i,r){B(i,e,r),t.m(o[0],e),Je(e,n),Je(e,l)},p(i,[r]){r&1&&t.p(i[0])},i:ae,o:ae,d(i){i&&I(e)}}}function Ro(o,e,t){let{attribution:n}=e;return o.$$set=l=>{"attribution"in l&&t(0,n=l.attribution)},[n]}class Uo extends N{constructor(e){super(),Q(this,e,Ro,Zo,D,{attribution:0})}}function ct(o){let e,t,n,l;function i(s){o[9](s)}function r(s){o[10](s)}let f={style:o[4],bounds:o[0],hash:!0,images:[{id:"chevron",url:Po},{id:"cycle_parking",url:Ho},{id:"railway_station",url:Fo}],attributionControl:!1,$$slots:{default:[jo]},$$scope:{ctx:o}};return o[3]!==void 0&&(f.loaded=o[3]),o[2]!==void 0&&(f.map=o[2]),e=new Mo({props:f}),Be.push(()=>Ie(e,"loaded",i)),Be.push(()=>Ie(e,"map",r)),e.$on("error",Qo),{c(){ne(e.$$.fragment)},m(s,m){ie(e,s,m),l=!0},p(s,m){const c={};m&16&&(c.style=s[4]),m&1&&(c.bounds=s[0]),m&2146&&(c.$$scope={dirty:m,ctx:s}),!t&&m&8&&(t=!0,c.loaded=s[3],Ee(()=>t=!1)),!n&&m&4&&(n=!0,c.map=s[2],Ee(()=>n=!1)),e.$set(c)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){A(e.$$.fragment,s),l=!1},d(s){le(e,s)}}}function mt(o){let e,t,n,l,i,r,f,s,m,c;e=new go({}),e.$on("zoomend",o[7]),e.$on("moveend",o[7]),n=new Uo({props:{attribution:o[6]}}),i=new At({}),f=new kt({props:{position:"bottom-left",visualizePitch:!0}});let g=o[1]=="google"&&dt();const b=o[8].default,S=Ae(b,o,o[11],null);return{c(){ne(e.$$.fragment),t=be(),ne(n.$$.fragment),l=be(),ne(i.$$.fragment),r=be(),ne(f.$$.fragment),s=be(),g&&g.c(),m=be(),S&&S.c()},m(h,C){ie(e,h,C),B(h,t,C),ie(n,h,C),B(h,l,C),ie(i,h,C),B(h,r,C),ie(f,h,C),B(h,s,C),g&&g.m(h,C),B(h,m,C),S&&S.m(h,C),c=!0},p(h,C){const y={};C&64&&(y.attribution=h[6]),n.$set(y),h[1]=="google"?g||(g=dt(),g.c(),g.m(m.parentNode,m)):g&&(g.d(1),g=null),S&&S.p&&(!c||C&2048)&&Ce(S,b,h,h[11],c?Se(b,h[11],C,null):ve(h[11]),null)},i(h){c||(_(e.$$.fragment,h),_(n.$$.fragment,h),_(i.$$.fragment,h),_(f.$$.fragment,h),_(S,h),c=!0)},o(h){A(e.$$.fragment,h),A(n.$$.fragment,h),A(i.$$.fragment,h),A(f.$$.fragment,h),A(S,h),c=!1},d(h){h&&(I(t),I(l),I(r),I(s),I(m)),le(e,h),le(n,h),le(i,h),le(f,h),g&&g.d(h),S&&S.d(h)}}}function dt(o){let e,t;return{c(){e=ge("img"),Et(e.src,t=Do)||Y(e,"src",t),Y(e,"alt","Google logo"),Y(e,"class","svelte-81xaz8")},m(n,l){B(n,e,l)},d(n){n&&I(e)}}}function jo(o){let e,t,n=o[5]&&mt(o);return{c(){n&&n.c(),e=Me()},m(l,i){n&&n.m(l,i),B(l,e,i),t=!0},p(l,i){l[5]?n?(n.p(l,i),i&32&&_(n,1)):(n=mt(l),n.c(),_(n,1),n.m(e.parentNode,e)):n&&(he(),A(n,1,1,()=>{n=null}),ye())},i(l){t||(_(n),t=!0)},o(l){A(n),t=!1},d(l){l&&I(e),n&&n.d(l)}}}function No(o){let e,t,n=o[4]&&ct(o);return{c(){e=ge("div"),n&&n.c(),Y(e,"class","map svelte-81xaz8")},m(l,i){B(l,e,i),n&&n.m(e,null),t=!0},p(l,[i]){l[4]?n?(n.p(l,i),i&16&&_(n,1)):(n=ct(l),n.c(),_(n,1),n.m(e,null)):n&&(he(),A(n,1,1,()=>{n=null}),ye())},i(l){t||(_(n),t=!0)},o(l){A(n),t=!1},d(l){l&&I(e),n&&n.d()}}}function Qo(o){console.error(`MapLibre error: ${o.detail.error}`)}function Ko(o,e,t){let n,l;H(o,Xe,y=>t(5,n=y)),H(o,Ge,y=>t(6,l=y));let{$$slots:i={},$$scope:r}=e,{style:f}=e,{startBounds:s=void 0}=e,m=null,c,g=!1;Ue("setCamera",!window.location.hash),window.location.hash&&(s=void 0),bt(async()=>{t(4,m=await xe(f))});async function b(y){t(4,m=await xe(f));let w=new URL(window.location.href);w.searchParams.set("style",y),window.history.replaceState(null,"",w.toString())}async function S(){f=="google"&&n&&_e(Ge,l=await Dt(n),l)}function h(y){g=y,t(3,g)}function C(y){c=y,t(2,c)}return o.$$set=y=>{"style"in y&&t(1,f=y.style),"startBounds"in y&&t(0,s=y.startBounds),"$$scope"in y&&t(11,r=y.$$scope)},o.$$.update=()=>{o.$$.dirty&12&&g&&Xe.set(c),o.$$.dirty&2&&b(f)},[s,f,c,g,m,n,l,S,i,h,C,r]}class nn extends N{constructor(e){super(),Q(this,e,Ko,No,D,{style:1,startBounds:0})}}export{Yo as A,Wo as D,Jo as E,po as F,$o as G,on as L,nn as M,tn as P,en as a,no as b,He as c,go as d,_t as e,Po as f,Fe as g,xo as h,Ho as i,Fo as j,qo as k,Xo as l,Gt as m,io as r,Kt as u};
