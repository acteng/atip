import{S as x,i as $,s as ee,L as Ie,e as p,x as de,a as X,b as c,c as M,m as S,G as Ce,M as pe,N as Pe,O as Be,t as z,p as B,d as I,aU as Jt,g as Ve,h as Xe,j as K,Y as Re,o as Q,r as xe,u as J,v as be,aF as it,aV as me,n as F,aW as he,aa as H,aA as Ae,P as le,av as Y,k as ze,aL as je,az as rt,aX as Yt,y as ke,q as we,$ as wt,Z as vt,aY as Xt,J as ot,a0 as xt,a1 as $t,aG as Lt,w as en,aZ as tn,aM as Tt,ab as st,f as $e,R as nn,a_ as at,a$ as Ye,b0 as ln,_ as ft}from"./index-31c14ddd.js";import{S as rn}from"./colors-c3c5a000.js";import{o as on,e as sn,j as zt,g as Ct,p as an}from"./MapLibreMap-374aa7f1.js";function fn(l){let e,t,n,i,r,o,s;const m=l[3].default,f=Ie(m,l,l[2],null);return{c(){e=p("details"),t=p("summary"),n=p("span"),i=de(l[0]),r=X(),o=p("div"),f&&f.c(),c(n,"class","govuk-details__summary-text"),c(t,"class","govuk-details__summary"),c(o,"class","govuk-details__text"),e.open=l[1],c(e,"class","govuk-details"),c(e,"data-module","govuk-details")},m(a,g){M(a,e,g),S(e,t),S(t,n),S(n,i),S(e,r),S(e,o),f&&f.m(o,null),s=!0},p(a,[g]){(!s||g&1)&&Ce(i,a[0]),f&&f.p&&(!s||g&4)&&pe(f,m,a,a[2],s?Be(m,a[2],g,null):Pe(a[2]),null),(!s||g&2)&&(e.open=a[1])},i(a){s||(z(f,a),s=!0)},o(a){B(f,a),s=!1},d(a){a&&I(e),f&&f.d(a)}}}function un(l,e,t){let{$$slots:n={},$$scope:i}=e,{label:r}=e,{open:o=!1}=e;return l.$$set=s=>{"label"in s&&t(0,r=s.label),"open"in s&&t(1,o=s.open),"$$scope"in s&&t(2,i=s.$$scope)},[r,o,i,n]}class cn extends x{constructor(e){super(),$(this,e,un,fn,ee,{label:0,open:1})}}const Ll=["==",["geometry-type"],"Polygon"],Tl=["==",["geometry-type"],"LineString"],zl=["==",["geometry-type"],"Point"];function Cl(){return{type:"FeatureCollection",features:[]}}function Sl(l,e,t){let n=["match",l];for(let[i,r]of Object.entries(e))n.push(i),n.push(r);return n.push(t),n}function mn(l){return Jt(l)}function Ml(l){var t,n;let e={type:"FeatureCollection",features:[]};for(let i of l.features)if(e.features.push(i),i.geometry.type=="LineString"&&!((t=i.properties)!=null&&t.hide_while_editing))for(let r of[i.geometry.coordinates[0],i.geometry.coordinates[i.geometry.coordinates.length-1]])e.features.push({type:"Feature",properties:{endpoint:!0,scheme_reference:(n=i.properties)==null?void 0:n.scheme_reference},geometry:{type:"Point",coordinates:r}});return e}function ut(l){let e;return{c(){e=p("p"),e.innerHTML=`Google <a href="https://cloud.google.com/maps-platform/terms/" target="_blank">Terms of Use</a>
    and
    <a href="https://www.google.com/policies/privacy/" target="_blank">Privacy Policy</a>`},m(t,n){M(t,e,n)},d(t){t&&I(e)}}}function dn(l){let e,t,n,i,r;function o(f){l[2](f)}let s={label:"Basemap",choices:on(),disabled:l[0]};l[1]!==void 0&&(s.value=l[1]),e=new rn({props:s}),Ve.push(()=>Xe(e,"value",o));let m=l[1]=="google"&&ut();return{c(){K(e.$$.fragment),n=X(),m&&m.c(),i=Re()},m(f,a){Q(e,f,a),M(f,n,a),m&&m.m(f,a),M(f,i,a),r=!0},p(f,[a]){const g={};a&1&&(g.disabled=f[0]),!t&&a&2&&(t=!0,g.value=f[1],xe(()=>t=!1)),e.$set(g),f[1]=="google"?m||(m=ut(),m.c(),m.m(i.parentNode,i)):m&&(m.d(1),m=null)},i(f){r||(z(e.$$.fragment,f),r=!0)},o(f){B(e.$$.fragment,f),r=!1},d(f){f&&(I(n),I(i)),J(e,f),m&&m.d(f)}}}function gn(l,e,t){let n;be(l,it,o=>t(1,n=o));let{disabled:i=!1}=e;function r(o){n=o,it.set(n)}return l.$$set=o=>{"disabled"in o&&t(0,i=o.disabled)},[i,n,r]}class Il extends x{constructor(e){super(),$(this,e,gn,dn,ee,{disabled:0})}}function _n(l){let e,t;return{c(){e=me("svg"),t=me("path"),c(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),c(e,"viewBox","0 0 14 14"),c(e,"width","13"),c(e,"height","13"),c(e,"class","svelte-en2qvf")},m(n,i){M(n,e,i),S(e,t)},p:F,i:F,o:F,d(n){n&&I(e)}}}class St extends x{constructor(e){super(),$(this,e,null,_n,ee,{})}}function hn(l){let e,t;return{c(){e=me("svg"),t=me("path"),c(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),c(e,"viewBox","0 0 30 30"),c(e,"fill","none"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"class","svelte-d2loi5")},m(n,i){M(n,e,i),S(e,t)},p:F,i:F,o:F,d(n){n&&I(e)}}}class Mt extends x{constructor(e){super(),$(this,e,null,hn,ee,{})}}function yn(l){let e,t;return{c(){e=p("img"),Y(e.src,t=l[3]+"area.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){M(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"area.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function bn(l){let e,t;return{c(){e=p("img"),Y(e.src,t=l[3]+"reverse.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){M(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"reverse.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function kn(l){let e,t;return{c(){e=p("img"),Y(e.src,t=l[3]+"poi.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){M(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"poi.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function wn(l){let e,t;return{c(){e=p("img"),Y(e.src,t=l[3]+"postal_code.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){M(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"postal_code.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function vn(l){let e,t;return{c(){e=p("img"),Y(e.src,t=l[3]+"street.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){M(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"street.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function Ln(l){let e,t;return{c(){e=p("img"),Y(e.src,t=l[3]+"road.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){M(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"road.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function Tn(l){let e,t;return{c(){e=p("img"),Y(e.src,t=l[3]+"housenumber.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,i){M(n,e,i)},p(n,i){i&8&&!Y(e.src,t=n[3]+"housenumber.svg")&&c(e,"src",t),i&64&&c(e,"alt",n[6])},d(n){n&&I(e)}}}function zn(l){let e,t,n,i;return{c(){e=p("img"),Y(e.src,t=l[5])||c(e,"src",t),c(e,"alt",l[4]),c(e,"class","svelte-ltkwvy")},m(r,o){M(r,e,o),n||(i=H(e,"error",l[14]),n=!0)},p(r,o){o&32&&!Y(e.src,t=r[5])&&c(e,"src",t),o&16&&c(e,"alt",r[4])},d(r){r&&I(e),n=!1,i()}}}function ct(l){let e,t;return{c(){e=p("span"),t=de(l[6]),c(e,"class","secondary svelte-ltkwvy")},m(n,i){M(n,e,i),S(e,t)},p(n,i){i&64&&Ce(t,n[6])},d(n){n&&I(e)}}}function Cn(l){var j,V;let e,t,n,i,r,o,s,m,f=(l[7]?l[0].place_name:l[0].place_name.replace(/,.*/,""))+"",a,g,v=l[2]==="always"||l[2]&&!l[0].address&&((j=l[0].properties)==null?void 0:j.kind)!=="road"&&((V=l[0].properties)==null?void 0:V.kind)!=="road_relation"&&!l[0].id.startsWith("address.")&&!l[0].id.startsWith("postal_code.")&&(!l[0].id.startsWith("poi.")||!l[5])&&!l[7],U,Z,G=(l[7]?"":l[0].place_name.replace(/[^,]*,?\s*/,""))+"",h,T,A;function _(w,k){var ne,d;return k&1&&(t=null),k&1&&(n=null),k&1&&(i=null),w[5]?zn:w[0].address?Tn:((ne=w[0].properties)==null?void 0:ne.kind)==="road"||((d=w[0].properties)==null?void 0:d.kind)==="road_relation"?Ln:(t==null&&(t=!!w[0].id.startsWith("address.")),t?vn:(n==null&&(n=!!w[0].id.startsWith("postal_code.")),n?wn:(i==null&&(i=!!w[0].id.startsWith("poi.")),i?kn:w[7]?bn:yn)))}let C=_(l,-1),y=C(l),E=v&&ct(l);return{c(){e=p("li"),y.c(),r=X(),o=p("span"),s=p("span"),m=p("span"),a=de(f),g=X(),E&&E.c(),U=X(),Z=p("span"),h=de(G),c(m,"class","primary svelte-ltkwvy"),c(s,"class","svelte-ltkwvy"),c(Z,"class","line2 svelte-ltkwvy"),c(o,"class","texts svelte-ltkwvy"),c(e,"tabindex","0"),c(e,"data-selected",l[1]),c(e,"class","svelte-ltkwvy"),he(e,"selected",l[1])},m(w,k){M(w,e,k),y.m(e,null),S(e,r),S(e,o),S(o,s),S(s,m),S(m,a),S(s,g),E&&E.m(s,null),S(o,U),S(o,Z),S(Z,h),T||(A=[H(e,"mouseenter",l[12]),H(e,"focus",l[13])],T=!0)},p(w,[k]){var ne,d;C===(C=_(w,k))&&y?y.p(w,k):(y.d(1),y=C(w),y&&(y.c(),y.m(e,r))),k&1&&f!==(f=(w[7]?w[0].place_name:w[0].place_name.replace(/,.*/,""))+"")&&Ce(a,f),k&37&&(v=w[2]==="always"||w[2]&&!w[0].address&&((ne=w[0].properties)==null?void 0:ne.kind)!=="road"&&((d=w[0].properties)==null?void 0:d.kind)!=="road_relation"&&!w[0].id.startsWith("address.")&&!w[0].id.startsWith("postal_code.")&&(!w[0].id.startsWith("poi.")||!w[5])&&!w[7]),v?E?E.p(w,k):(E=ct(w),E.c(),E.m(s,null)):E&&(E.d(1),E=null),k&1&&G!==(G=(w[7]?"":w[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&Ce(h,G),k&2&&c(e,"data-selected",w[1]),k&2&&he(e,"selected",w[1])},i:F,o:F,d(w){w&&I(e),y.d(),E&&E.d(),T=!1,Ae(A)}}}function Sn(l,e,t){var _;let n,i,{feature:r}=e,{selected:o=!1}=e,{showPlaceType:s}=e,{missingIconsCache:m}=e,{iconsBaseUrl:f}=e;const a=(_=r.properties)==null?void 0:_.categories;let g,v,U=0,Z=r.place_type[0]==="reverse";function G(C){v&&m.add(v),t(10,U++,U)}function h(C){le.call(this,l,C)}function T(C){le.call(this,l,C)}const A=C=>G(C.currentTarget);return l.$$set=C=>{"feature"in C&&t(0,r=C.feature),"selected"in C&&t(1,o=C.selected),"showPlaceType"in C&&t(2,s=C.showPlaceType),"missingIconsCache"in C&&t(9,m=C.missingIconsCache),"iconsBaseUrl"in C&&t(3,f=C.iconsBaseUrl)},l.$$.update=()=>{var C,y,E,j;if(l.$$.dirty&3640)do t(11,n--,n),t(4,g=a==null?void 0:a[n]),t(5,v=g?f+g.replace(/ /g,"_")+".svg":void 0);while(n>-1&&(!v||m.has(v)));l.$$.dirty&1&&t(6,i=r.id.startsWith("poi.")?(y=(C=r.properties)==null?void 0:C.categories)==null?void 0:y.join(", "):((j=(E=r.properties)==null?void 0:E.place_type_name)==null?void 0:j[0])??r.place_type[0])},t(11,n=(a==null?void 0:a.length)??0),[r,o,s,f,g,v,i,Z,G,m,U,n,h,T,A]}class Mn extends x{constructor(e){super(),$(this,e,Sn,Cn,ee,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function In(l){let e;return{c(){e=p("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',c(e,"class","svelte-7cmwmc")},m(t,n){M(t,e,n)},p:F,i:F,o:F,d(t){t&&I(e)}}}class pn extends x{constructor(e){super(),$(this,e,null,In,ee,{})}}function Pn(l){let e,t;return{c(){e=me("svg"),t=me("path"),c(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),c(e,"viewBox","0 0 60.006 21.412"),c(e,"width","14"),c(e,"height","20"),c(e,"class","svelte-en2qvf")},m(n,i){M(n,e,i),S(e,t)},p:F,i:F,o:F,d(n){n&&I(e)}}}class Bn extends x{constructor(e){super(),$(this,e,null,Pn,ee,{})}}function Rn(l){let e,t,n;return{c(){e=me("svg"),t=me("circle"),n=me("path"),c(t,"cx","4.789"),c(t,"cy","4.787"),c(t,"r","3.85"),ze(t,"stroke-width","1.875"),ze(t,"fill","none"),c(n,"d","M12.063 12.063 7.635 7.635"),ze(n,"stroke-width","1.875"),ze(n,"stroke-linecap","round"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","13"),c(e,"height","13"),c(e,"viewBox","0 0 13 13"),c(e,"class","svelte-1bpbt60")},m(i,r){M(i,e,r),S(e,t),S(e,n)},p:F,i:F,o:F,d(i){i&&I(e)}}}class Un extends x{constructor(e){super(),$(this,e,null,Rn,ee,{})}}function Wn(l,e,t){const n=e[1],i=e[0],r=n-i;return l===n&&t?l:((l-i)%r+r)%r+i}function mt(l){const e=[...l];return e[2]<e[0]&&(e[2]+=360),e}let Me;async function Zn(l,e,t){const n=l==null?void 0:l.getCenterAndZoom();for(const i of e??[])if(!(n&&(i.minZoom!=null&&i.minZoom>n[0]||i.maxZoom!=null&&i.maxZoom<n[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(Me&&i.cachedLocationExpiry&&Me.time+i.cachedLocationExpiry>Date.now()){if(!Me.coords)break e;return Me.coords}let r;try{return r=await new Promise((o,s)=>{t.signal.addEventListener("abort",()=>{s(Error("aborted"))}),navigator.geolocation.getCurrentPosition(m=>{o([m.coords.longitude,m.coords.latitude].map(f=>f.toFixed(6)).join(","))},m=>{s(m)},i)}),r}catch{}finally{i.cachedLocationExpiry&&(Me={time:Date.now(),coords:r})}if(t.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(n&&i.type==="map-center")return n[1].toFixed(6)+","+n[2].toFixed(6)}}function dt(l,e,t){const n=l.slice();return n[81]=e[t],n[83]=t,n}function gt(l){let e,t;return e=new pn({}),{c(){K(e.$$.fragment)},m(n,i){Q(e,n,i),t=!0},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function _t(l){let e,t,n,i,r;return t=new Bn({}),{c(){e=p("button"),K(t.$$.fragment),c(e,"type","button"),c(e,"title",l[9]),c(e,"class","svelte-zh3kmv"),he(e,"active",l[0])},m(o,s){M(o,e,s),Q(t,e,null),n=!0,i||(r=H(e,"click",l[67]),i=!0)},p(o,s){(!n||s[0]&512)&&c(e,"title",o[9]),(!n||s[0]&1)&&he(e,"active",o[0])},i(o){n||(z(t.$$.fragment,o),n=!0)},o(o){B(t.$$.fragment,o),n=!1},d(o){o&&I(e),J(t),i=!1,r()}}}function En(l){let e,t=[],n=new Map,i,r,o,s=ot(l[14]);const m=f=>f[81].id+(f[81].address?","+f[81].address:"");for(let f=0;f<s.length;f+=1){let a=dt(l,s,f),g=m(a);n.set(g,t[f]=ht(g,a))}return{c(){e=p("ul");for(let f=0;f<t.length;f+=1)t[f].c();c(e,"class","svelte-zh3kmv")},m(f,a){M(f,e,a);for(let g=0;g<t.length;g+=1)t[g]&&t[g].m(e,null);i=!0,r||(o=[H(e,"mouseleave",l[71]),H(e,"blur",l[72])],r=!0)},p(f,a){a[0]&17880064&&(s=ot(f[14]),ke(),t=xt(t,a,m,1,f,s,n,e,$t,ht,null,dt),we())},i(f){if(!i){for(let a=0;a<s.length;a+=1)z(t[a]);i=!0}},o(f){for(let a=0;a<t.length;a+=1)B(t[a]);i=!1},d(f){f&&I(e);for(let a=0;a<t.length;a+=1)t[a].d();r=!1,Ae(o)}}}function jn(l){let e,t,n,i,r,o;return t=new Mt({}),{c(){e=p("div"),K(t.$$.fragment),n=X(),i=p("div"),r=de(l[7]),c(i,"class","svelte-zh3kmv"),c(e,"class","no-results svelte-zh3kmv")},m(s,m){M(s,e,m),Q(t,e,null),S(e,n),S(e,i),S(i,r),o=!0},p(s,m){(!o||m[0]&128)&&Ce(r,s[7])},i(s){o||(z(t.$$.fragment,s),o=!0)},o(s){B(t.$$.fragment,s),o=!1},d(s){s&&I(e),J(t)}}}function Vn(l){let e="",t;return{c(){t=de(e)},m(n,i){M(n,t,i)},p:F,i:F,o:F,d(n){n&&I(t)}}}function An(l){let e,t,n,i,r,o,s,m,f,a,g;return t=new Mt({}),m=new St({}),{c(){e=p("div"),K(t.$$.fragment),n=X(),i=p("div"),r=de(l[6]),o=X(),s=p("button"),K(m.$$.fragment),c(i,"class","svelte-zh3kmv"),c(s,"class","svelte-zh3kmv"),c(e,"class","error svelte-zh3kmv")},m(v,U){M(v,e,U),Q(t,e,null),S(e,n),S(e,i),S(i,r),S(e,o),S(e,s),Q(m,s,null),f=!0,a||(g=H(s,"click",l[68]),a=!0)},p(v,U){(!f||U[0]&64)&&Ce(r,v[6])},i(v){f||(z(t.$$.fragment,v),z(m.$$.fragment,v),f=!0)},o(v){B(t.$$.fragment,v),B(m.$$.fragment,v),f=!1},d(v){v&&I(e),J(t),J(m),a=!1,g()}}}function ht(l,e){let t,n,i;function r(){return e[69](e[83])}function o(){return e[70](e[81])}return n=new Mn({props:{feature:e[81],showPlaceType:e[10],selected:e[15]===e[83],missingIconsCache:e[20],iconsBaseUrl:e[12]}}),n.$on("mouseenter",r),n.$on("focus",o),{key:l,first:null,c(){t=Re(),K(n.$$.fragment),this.first=t},m(s,m){M(s,t,m),Q(n,s,m),i=!0},p(s,m){e=s;const f={};m[0]&16384&&(f.feature=e[81]),m[0]&1024&&(f.showPlaceType=e[10]),m[0]&49152&&(f.selected=e[15]===e[83]),m[0]&4096&&(f.iconsBaseUrl=e[12]),n.$set(f)},i(s){i||(z(n.$$.fragment,s),i=!0)},o(s){B(n.$$.fragment,s),i=!1},d(s){s&&I(t),J(n,s)}}}function Fn(l){let e,t,n,i,r,o,s,m,f,a,g,v,U,Z,G,h,T,A,_,C,y,E=!1;r=new Un({}),g=new St({});let j=l[19]&&gt(),V=l[5]===!0&&_t(l);const w=l[59].default,k=Ie(w,l,l[58],null),ne=[An,Vn,jn,En],d=[];function ge(L,O){var te,b;return L[18]?0:L[16]?((te=L[14])==null?void 0:te.length)===0?2:L[16]&&((b=L[14])!=null&&b.length)?3:-1:1}return~(h=ge(l))&&(T=d[h]=ne[h](l)),{c(){e=X(),t=p("form"),n=p("div"),i=p("button"),K(r.$$.fragment),o=X(),s=p("input"),m=X(),f=p("div"),a=p("button"),K(g.$$.fragment),v=X(),j&&j.c(),U=X(),V&&V.c(),Z=X(),k&&k.c(),G=X(),T&&T.c(),c(i,"class","search-button svelte-zh3kmv"),c(i,"type","button"),c(s,"placeholder",l[8]),c(s,"aria-label",l[8]),c(s,"class","svelte-zh3kmv"),c(a,"type","button"),c(a,"title",l[3]),c(a,"class","svelte-zh3kmv"),c(f,"class","clear-button-container svelte-zh3kmv"),he(f,"displayable",l[1]!==""),c(n,"class","input-group svelte-zh3kmv"),c(t,"tabindex","0"),c(t,"class",A=je(l[2])+" svelte-zh3kmv"),he(t,"can-collapse",l[4]&&l[1]==="")},m(L,O){M(L,e,O),M(L,t,O),S(t,n),S(n,i),Q(r,i,null),S(n,o),S(n,s),l[61](s),rt(s,l[1]),S(n,m),S(n,f),S(f,a),Q(g,a,null),S(f,v),j&&j.m(f,null),S(n,U),V&&V.m(n,null),S(n,Z),k&&k.m(n,null),S(t,G),~h&&d[h].m(t,null),_=!0,C||(y=[H(i,"click",l[60]),H(s,"input",l[62]),H(s,"focus",l[63]),H(s,"blur",l[64]),H(s,"keydown",l[22]),H(s,"input",l[65]),H(a,"click",l[66]),H(t,"submit",Yt(l[21]))],C=!0)},p(L,O){(!_||O[0]&256)&&c(s,"placeholder",L[8]),(!_||O[0]&256)&&c(s,"aria-label",L[8]),O[0]&2&&s.value!==L[1]&&rt(s,L[1]),(!_||O[0]&8)&&c(a,"title",L[3]),L[19]?j?O[0]&524288&&z(j,1):(j=gt(),j.c(),z(j,1),j.m(f,null)):j&&(ke(),B(j,1,1,()=>{j=null}),we()),(!_||O[0]&2)&&he(f,"displayable",L[1]!==""),L[5]===!0?V?(V.p(L,O),O[0]&32&&z(V,1)):(V=_t(L),V.c(),z(V,1),V.m(n,Z)):V&&(ke(),B(V,1,1,()=>{V=null}),we()),k&&k.p&&(!_||O[1]&134217728)&&pe(k,w,L,L[58],_?Be(w,L[58],O,null):Pe(L[58]),null);let te=h;h=ge(L),h===te?~h&&d[h].p(L,O):(T&&(ke(),B(d[te],1,1,()=>{d[te]=null}),we()),~h?(T=d[h],T?T.p(L,O):(T=d[h]=ne[h](L),T.c()),z(T,1),T.m(t,null)):T=null),(!_||O[0]&4&&A!==(A=je(L[2])+" svelte-zh3kmv"))&&c(t,"class",A),(!_||O[0]&22)&&he(t,"can-collapse",L[4]&&L[1]==="")},i(L){_||(z(E),z(r.$$.fragment,L),z(g.$$.fragment,L),z(j),z(V),z(k,L),z(T),_=!0)},o(L){B(E),B(r.$$.fragment,L),B(g.$$.fragment,L),B(j),B(V),B(k,L),B(T),_=!1},d(L){L&&(I(e),I(t)),J(r),l[61](null),J(g),j&&j.d(),V&&V.d(),k&&k.d(L),~h&&d[h].d(),C=!1,Ae(y)}}}function Gn(l,e,t){let n,{$$slots:i={},$$scope:r}=e,{class:o=void 0}=e,{apiKey:s}=e,{bbox:m=void 0}=e,{clearButtonTitle:f="clear"}=e,{clearOnBlur:a=!1}=e,{collapsed:g=!1}=e,{country:v=void 0}=e,{debounceSearch:U=200}=e,{enableReverse:Z=!1}=e,{errorMessage:G="Something went wrong…"}=e,{filter:h=()=>!0}=e,{flyTo:T=!0}=e,{fuzzyMatch:A=!0}=e,{language:_=void 0}=e,{limit:C=void 0}=e,{mapController:y=void 0}=e,{minLength:E=2}=e,{noResultsMessage:j="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:V="Search"}=e,{proximity:w=[{type:"server-geolocation"}]}=e,{reverseActive:k=Z==="always"}=e,{reverseButtonTitle:ne="toggle reverse geocoding"}=e,{searchValue:d=""}=e,{showFullGeometry:ge=!0}=e,{showPlaceType:L="ifNeeded"}=e,{showResultsWhileTyping:O=!0}=e,{selectFirst:te=!0}=e,{flyToSelected:b=!1}=e,{markerOnSelected:ae=!0}=e,{types:ie=void 0}=e,{excludeTypes:fe=!1}=e,{zoom:Se=16}=e,{maxZoom:ve=18}=e,{apiUrl:Fe="https://api.maptiler.com/geocoding"}=e,{fetchParameters:Ge={}}=e,{iconsBaseUrl:et="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.3/icons/"}=e,{adjustUrlQuery:Oe=u=>{}}=e;function It(){ue.focus()}function pt(){ue.blur()}function tt(u,q=!0,re=!1){t(1,d=u),q?(t(15,D=-1),lt()):(qe(!re,re),setTimeout(()=>{ue.focus(),ue.select()}))}function Pt(){t(14,R=void 0),t(55,P=void 0),t(15,D=-1)}function Bt(){t(54,N=[]),t(55,P=void 0)}let Le=!1,R,N,P,nt="",ue,D=-1,ce,Ue=[],ye,Te,We,De;const Rt=new Set,_e=wt();vt(()=>{y&&(y.setEventHandler(void 0),y.indicateReverse(!1),y.setSelectedMarker(-1),y.setMarkers(void 0,void 0))});function lt(u){if(Te&&(clearTimeout(Te),Te=void 0),D>-1&&R)t(55,P=R[D]),t(1,d=P.place_type[0]==="reverse"?P.place_name:P.place_name.replace(/,.*/,"")),t(18,ce=void 0),t(54,N=void 0),t(15,D=-1);else if(d){const q=u||!He(d);Ne(d,{exact:!0}).then(()=>{t(54,N=R),t(55,P=void 0),q&&Ut()}).catch(re=>t(18,ce=re))}}function He(u){try{return Xt(u,6)}catch{return!1}}async function Ne(u,{byId:q=!1,exact:re=!1}={}){t(18,ce=void 0),ye==null||ye.abort();const oe=new AbortController;t(19,ye=oe);try{const W=He(u),se=new URLSearchParams;if(_!==void 0&&se.set("language",Array.isArray(_)?_.join(","):_??""),ie&&se.set("types",ie.join(",")),fe&&se.set("excludeTypes",String(fe)),m&&se.set("bbox",m.map(Ee=>Ee.toFixed(6)).join(",")),v&&se.set("country",Array.isArray(v)?v.join(","):v),!q&&!W){const Ee=await Zn(y,w,oe);Ee&&se.set("proximity",Ee),(re||!O)&&se.set("autocomplete","false"),se.set("fuzzyMatch",String(A))}C!==void 0&&(!W||(ie==null?void 0:ie.length)===1)&&se.set("limit",String(C)),se.set("key",s),Oe(se);const Ze=Fe+"/"+encodeURIComponent(W?W.decimalLongitude+","+W.decimalLatitude:u)+".json?"+se.toString();if(Ze===nt){q?(t(14,R=void 0),t(55,P=Ue[0])):t(14,R=Ue);return}nt=Ze;const Qe=await fetch(Ze,{signal:oe.signal,...Ge});if(!Qe.ok)throw new Error(await Qe.text());const Je=await Qe.json();_e("response",{url:Ze,featureCollection:Je}),q?(t(14,R=void 0),t(55,P=Je.features[0]),Ue=[P]):(t(14,R=Je.features.filter(h)),W&&R.unshift({type:"Feature",properties:{},id:"reverse_"+W.decimalLongitude+"_"+W.decimalLatitude,text:W.decimalLatitude+", "+W.decimalLongitude,place_name:W.decimalLatitude+", "+W.decimalLongitude,place_type:["reverse"],center:[W.decimalLongitude,W.decimalLatitude],bbox:[W.decimalLongitude,W.decimalLatitude,W.decimalLongitude,W.decimalLatitude],geometry:{type:"Point",coordinates:[W.decimalLongitude,W.decimalLatitude]}}),Ue=R,W&&ue.focus())}catch(W){if(W&&typeof W=="object"&&"name"in W&&W.name==="AbortError")return;throw W}finally{oe===ye&&t(19,ye=void 0)}}function Ut(){var re;if(!(N!=null&&N.length)||!T)return;const u=[180,90,-180,-90],q=!N.some(oe=>!oe.matching_text);for(const oe of N)if(q||!oe.matching_text)for(const W of[0,1,2,3])u[W]=Math[W<2?"min":"max"](u[W],((re=oe.bbox)==null?void 0:re[W])??oe.center[W%2]);y&&N.length>0&&(P&&u[0]===u[2]&&u[1]===u[3]?y.flyTo(P.center,Se):y.fitBounds(mt(u),50,ve))}function Wt(u){t(0,k=Z==="always"),t(14,R=void 0),t(55,P=void 0),t(15,D=-1),tt(u[1].toFixed(6)+", "+Wn(u[0],[-180,180],!0).toFixed(6),!1,!0)}function Zt(u){if(!R)return;let q=u.key==="ArrowDown"?1:u.key==="ArrowUp"?-1:0;q&&(D===(te?0:-1)&&q===-1&&t(15,D=R.length),t(15,D+=q),D>=R.length&&t(15,D=-1),D<0&&te&&t(15,D=0),u.preventDefault())}function qe(u=!0,q=!1){if(t(18,ce=void 0),O||q){if(Te&&clearTimeout(Te),d.length<E)return;const re=d;Te=window.setTimeout(()=>{Ne(re).catch(oe=>t(18,ce=oe))},u?U:0)}else t(14,R=void 0),t(18,ce=void 0)}function Ke(u){t(55,P=u),t(1,d=u.place_name),t(15,D=-1)}const Et=()=>ue.focus();function jt(u){Ve[u?"unshift":"push"](()=>{ue=u,t(17,ue)})}function Vt(){d=this.value,t(1,d),t(13,Le),t(27,a)}const At=()=>t(13,Le=!0),Ft=()=>t(13,Le=!1),Gt=()=>qe(),Ot=()=>{t(1,d=""),ue.focus()},Dt=()=>t(0,k=!k),Ht=()=>t(18,ce=void 0),Nt=u=>t(15,D=u),qt=u=>Ke(u),Kt=()=>{te||t(15,D=-1)},Qt=()=>{};return l.$$set=u=>{"class"in u&&t(2,o=u.class),"apiKey"in u&&t(25,s=u.apiKey),"bbox"in u&&t(26,m=u.bbox),"clearButtonTitle"in u&&t(3,f=u.clearButtonTitle),"clearOnBlur"in u&&t(27,a=u.clearOnBlur),"collapsed"in u&&t(4,g=u.collapsed),"country"in u&&t(28,v=u.country),"debounceSearch"in u&&t(29,U=u.debounceSearch),"enableReverse"in u&&t(5,Z=u.enableReverse),"errorMessage"in u&&t(6,G=u.errorMessage),"filter"in u&&t(30,h=u.filter),"flyTo"in u&&t(31,T=u.flyTo),"fuzzyMatch"in u&&t(32,A=u.fuzzyMatch),"language"in u&&t(33,_=u.language),"limit"in u&&t(34,C=u.limit),"mapController"in u&&t(35,y=u.mapController),"minLength"in u&&t(36,E=u.minLength),"noResultsMessage"in u&&t(7,j=u.noResultsMessage),"placeholder"in u&&t(8,V=u.placeholder),"proximity"in u&&t(37,w=u.proximity),"reverseActive"in u&&t(0,k=u.reverseActive),"reverseButtonTitle"in u&&t(9,ne=u.reverseButtonTitle),"searchValue"in u&&t(1,d=u.searchValue),"showFullGeometry"in u&&t(38,ge=u.showFullGeometry),"showPlaceType"in u&&t(10,L=u.showPlaceType),"showResultsWhileTyping"in u&&t(39,O=u.showResultsWhileTyping),"selectFirst"in u&&t(11,te=u.selectFirst),"flyToSelected"in u&&t(40,b=u.flyToSelected),"markerOnSelected"in u&&t(41,ae=u.markerOnSelected),"types"in u&&t(42,ie=u.types),"excludeTypes"in u&&t(43,fe=u.excludeTypes),"zoom"in u&&t(44,Se=u.zoom),"maxZoom"in u&&t(45,ve=u.maxZoom),"apiUrl"in u&&t(46,Fe=u.apiUrl),"fetchParameters"in u&&t(47,Ge=u.fetchParameters),"iconsBaseUrl"in u&&t(12,et=u.iconsBaseUrl),"adjustUrlQuery"in u&&t(48,Oe=u.adjustUrlQuery),"$$scope"in u&&t(58,r=u.$$scope)},l.$$.update=()=>{if(l.$$.dirty[0]&134225920&&setTimeout(()=>{t(16,We=Le),a&&!Le&&t(1,d="")}),l.$$.dirty[0]&16386|l.$$.dirty[1]&32&&d.length<E&&(t(55,P=void 0),t(14,R=void 0),t(18,ce=void 0),t(54,N=R)),l.$$.dirty[1]&16777344&&ge&&P&&!P.address&&P.geometry.type==="Point"&&P.place_type[0]!=="reverse"&&Ne(P.id,{byId:!0}).catch(u=>t(18,ce=u)),l.$$.dirty[1]&50356241&&(y&&P&&P.id!==De&&T&&(!P.bbox||P.bbox[0]===P.bbox[2]&&P.bbox[1]===P.bbox[3]?y.flyTo(P.center,P.id.startsWith("poi.")||P.id.startsWith("address.")?ve:Se):y.fitBounds(mt(P.bbox),50,ve),t(14,R=void 0),t(54,N=void 0),t(15,D=-1)),t(56,De=P==null?void 0:P.id)),l.$$.dirty[0]&18432&&te&&R!=null&&R.length&&t(15,D=0),l.$$.dirty[0]&2050&&(te||t(15,D=-1)),l.$$.dirty[0]&16384|l.$$.dirty[1]&8388608&&N!==R&&t(54,N=void 0),l.$$.dirty[0]&81921|l.$$.dirty[1]&8388624&&y&&y.setEventHandler(u=>{switch(u.type){case"mapClick":k&&Wt(u.coordinates);break;case"markerClick":{const q=R==null?void 0:R.find(re=>re.id===u.id);q&&Ke(q)}break;case"markerMouseEnter":N&&t(15,D=We?(R==null?void 0:R.findIndex(q=>q.id===u.id))??-1:-1);break;case"markerMouseLeave":N&&t(15,D=-1);break}}),l.$$.dirty[0]&49152&&t(57,n=R==null?void 0:R[D]),l.$$.dirty[1]&67133969&&y&&n&&T&&b&&y.flyTo(n.center,n.id.startsWith("poi.")||n.id.startsWith("address.")?ve:Se),l.$$.dirty[1]&1040&&(ae||y==null||y.setMarkers(void 0,void 0)),l.$$.dirty[1]&75498512&&y&&ae&&!N&&(y.setMarkers(n?[n]:void 0,void 0),y.setSelectedMarker(n?0:-1)),l.$$.dirty[1]&25165840&&y&&y.setMarkers(N,P),l.$$.dirty[0]&32768|l.$$.dirty[1]&8388624&&N&&y&&y.setSelectedMarker(D),l.$$.dirty[0]&2|l.$$.dirty[1]&16&&y){const u=He(d);y.setReverseMarker(u?[u.decimalLongitude,u.decimalLatitude]:void 0)}l.$$.dirty[1]&67108864&&_e("select",n),l.$$.dirty[1]&16777216&&_e("pick",P),l.$$.dirty[0]&81920&&_e("optionsVisibilityChange",We&&!!R),l.$$.dirty[0]&16384&&_e("featuresListed",R),l.$$.dirty[1]&8388608&&_e("featuresMarked",N),l.$$.dirty[0]&1&&_e("reverseToggle",k),l.$$.dirty[0]&2&&_e("queryChange",d),l.$$.dirty[0]&1|l.$$.dirty[1]&16&&y&&y.indicateReverse(k)},[k,d,o,f,g,Z,G,j,V,ne,L,te,et,Le,R,D,We,ue,ce,ye,Rt,lt,Zt,qe,Ke,s,m,a,v,U,h,T,A,_,C,y,E,w,ge,O,b,ae,ie,fe,Se,ve,Fe,Ge,Oe,It,pt,tt,Pt,Bt,N,P,De,n,r,i,Et,jt,Vt,At,Ft,Gt,Ot,Dt,Ht,Nt,qt,Kt,Qt]}class On extends x{constructor(e){super(),$(this,e,Gn,Fn,ee,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}}function yt(l){let e,t,n,i;return t=new On({props:{mapController:l[1],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){e=p("div"),K(t.$$.fragment),c(e,"class",n=je(l[0])+" svelte-189syb7")},m(r,o){M(r,e,o),Q(t,e,null),i=!0},p(r,o){const s={};o&2&&(s.mapController=r[1]),t.$set(s),(!i||o&1&&n!==(n=je(r[0])+" svelte-189syb7"))&&c(e,"class",n)},i(r){i||(z(t.$$.fragment,r),i=!0)},o(r){B(t.$$.fragment,r),i=!1},d(r){r&&I(e),J(t)}}}function Dn(l){let e,t,n=l[1]&&yt(l);return{c(){n&&n.c(),e=Re()},m(i,r){n&&n.m(i,r),M(i,e,r),t=!0},p(i,[r]){i[1]?n?(n.p(i,r),r&2&&z(n,1)):(n=yt(i),n.c(),z(n,1),n.m(e.parentNode,e)):n&&(ke(),B(n,1,1,()=>{n=null}),we())},i(i){t||(z(n),t=!0)},o(i){B(n),t=!1},d(i){i&&I(e),n&&n.d(i)}}}function Hn(l,e,t){let n;be(l,Lt,o=>t(2,n=o));let{position:i="top-left"}=e,r;return en(()=>{t(1,r=tn(n,Tt))}),l.$$set=o=>{"position"in o&&t(0,i=o.position)},[i,r]}class pl extends x{constructor(e){super(),$(this,e,Hn,Dn,ee,{position:0})}}function Nn(l){let e;return{c(){e=p("ul"),e.innerHTML=`<li><b>Click</b>
    on the map to open a new tab with a 3rd-party imagery provider</li> <li>Press <b>Escape</b>
    to exit this mode</li> <li>Cursor by <a href="https://icon-icons.com/icon/screenshot-cursor-camera/100181" target="_blank" rel="noreferrer">Luc Chaissac</a></li>`},m(t,n){M(t,e,n)},p:F,i:F,o:F,d(t){t&&I(e)}}}class qn extends x{constructor(e){super(),$(this,e,null,Nn,ee,{})}}const Kn="/atip/manage_files/assets/camera_cursor-824d29b6.svg",{window:Qn}=sn;function bt(l){let e,t,n,i;const r=[Yn,Jn],o=[];function s(m,f){return m[0]?0:1}return e=s(l),t=o[e]=r[e](l),{c(){t.c(),n=Re()},m(m,f){o[e].m(m,f),M(m,n,f),i=!0},p(m,f){let a=e;e=s(m),e===a?o[e].p(m,f):(ke(),B(o[a],1,1,()=>{o[a]=null}),we(),t=o[e],t?t.p(m,f):(t=o[e]=r[e](m),t.c()),z(t,1),t.m(n.parentNode,n))},i(m){i||(z(t),i=!0)},o(m){B(t),i=!1},d(m){m&&I(n),o[e].d(m)}}}function Jn(l){let e,t;return e=new $e({props:{$$slots:{default:[Xn]},$$scope:{ctx:l}}}),e.$on("click",l[8]),{c(){K(e.$$.fragment)},m(n,i){Q(e,n,i),t=!0},p(n,i){const r={};i&8192&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function Yn(l){let e,t,n,i,r,o,s;e=new $e({props:{$$slots:{default:[xn]},$$scope:{ctx:l}}}),e.$on("click",l[6]);function m(a){l[7](a)}let f={label:"Source",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return l[2].streetViewImagery!==void 0&&(f.value=l[2].streetViewImagery),n=new nn({props:f}),Ve.push(()=>Xe(n,"value",m)),o=new cn({props:{label:"Help",$$slots:{default:[$n]},$$scope:{ctx:l}}}),{c(){K(e.$$.fragment),t=X(),K(n.$$.fragment),r=X(),K(o.$$.fragment)},m(a,g){Q(e,a,g),M(a,t,g),Q(n,a,g),M(a,r,g),Q(o,a,g),s=!0},p(a,g){const v={};g&8192&&(v.$$scope={dirty:g,ctx:a}),e.$set(v);const U={};!i&&g&4&&(i=!0,U.value=a[2].streetViewImagery,xe(()=>i=!1)),n.$set(U);const Z={};g&8192&&(Z.$$scope={dirty:g,ctx:a}),o.$set(Z)},i(a){s||(z(e.$$.fragment,a),z(n.$$.fragment,a),z(o.$$.fragment,a),s=!0)},o(a){B(e.$$.fragment,a),B(n.$$.fragment,a),B(o.$$.fragment,a),s=!1},d(a){a&&(I(t),I(r)),J(e,a),J(n,a),J(o,a)}}}function Xn(l){let e;return{c(){e=de("Enable Street View")},m(t,n){M(t,e,n)},d(t){t&&I(e)}}}function xn(l){let e;return{c(){e=de("Disable Street View")},m(t,n){M(t,e,n)},d(t){t&&I(e)}}}function $n(l){let e,t;return e=new qn({}),{c(){K(e.$$.fragment)},m(n,i){Q(e,n,i),t=!0},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function el(l){let e,t,n,i,r=l[1]&&bt(l);return{c(){r&&r.c(),e=Re()},m(o,s){r&&r.m(o,s),M(o,e,s),t=!0,n||(i=H(Qn,"keydown",l[3]),n=!0)},p(o,[s]){o[1]?r?(r.p(o,s),s&2&&z(r,1)):(r=bt(o),r.c(),z(r,1),r.m(e.parentNode,e)):r&&(ke(),B(r,1,1,()=>{r=null}),we())},i(o){t||(z(r),t=!0)},o(o){B(r),t=!1},d(o){o&&I(e),r&&r.d(o),n=!1,i()}}}function tl(l,e,t){let n;be(l,st,h=>t(2,n=h));let{cfg:i}=e,{map:r}=e,{enabled:o}=e,{showControls:s=!0}=e,m=[];function f(){if(r){r.on("click",g),r.getCanvas().style.cursor=`url(${Kn}), auto`;for(let h of i.getStreetViewRoadLayerNames(r))m.push([h,r.getPaintProperty(h,"line-color")]),r.setPaintProperty(h,"line-color","cyan")}}function a(){if(r){r.off("click",g),r.getCanvas().style.cursor="inherit";for(let[h,T]of m)r.setPaintProperty(h,"line-color",T);m=[]}}vt(a);function g(h){if(!o)return;let T=h.lngLat.lng,A=h.lngLat.lat;n.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${A},${T}&cbp=11,0,0,0,0`,"_blank"):n.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${A}~${T}&style=x`,"_blank")}function v(h){o&&h.key=="Escape"&&(h.stopPropagation(),t(0,o=!1))}const U=()=>t(0,o=!1);function Z(h){l.$$.not_equal(n.streetViewImagery,h)&&(n.streetViewImagery=h,st.set(n))}const G=()=>t(0,o=!0);return l.$$set=h=>{"cfg"in h&&t(4,i=h.cfg),"map"in h&&t(5,r=h.map),"enabled"in h&&t(0,o=h.enabled),"showControls"in h&&t(1,s=h.showControls)},l.$$.update=()=>{l.$$.dirty&1&&(o?f():a())},[o,s,n,v,i,r,U,Z,G]}class Pl extends x{constructor(e){super(),$(this,e,tl,el,ee,{cfg:4,map:5,enabled:0,showControls:1})}}const nl="/atip/manage_files/assets/warning-81bba3f6.svg";function ll(l){let e,t;return{c(){e=p("img"),Y(e.src,t=nl)||c(e,"src",t),c(e,"title",l[0]),c(e,"alt",l[0])},m(n,i){M(n,e,i)},p(n,[i]){i&1&&c(e,"title",n[0]),i&1&&c(e,"alt",n[0])},i:F,o:F,d(n){n&&I(e)}}}function il(l,e,t){let{text:n}=e;return l.$$set=i=>{"text"in i&&t(0,n=i.text)},[n]}class Bl extends x{constructor(e){super(),$(this,e,il,ll,ee,{text:0})}}function rl(l){let e;const t=l[16].default,n=Ie(t,l,l[24],null);return{c(){n&&n.c()},m(i,r){n&&n.m(i,r),e=!0},p(i,r){n&&n.p&&(!e||r&16777216)&&pe(n,t,i,i[24],e?Be(t,i[24],r,null):Pe(i[24]),null)},i(i){e||(z(n,i),e=!0)},o(i){B(n,i),e=!1},d(i){n&&n.d(i)}}}function ol(l){let e,t,n;function i(o){l[17](o)}let r={id:l[1],type:"circle",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[rl]},$$scope:{ctx:l}};return l[0]!==void 0&&(r.hovered=l[0]),e=new zt({props:r}),Ve.push(()=>Xe(e,"hovered",i)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){K(e.$$.fragment)},m(o,s){Q(e,o,s),n=!0},p(o,[s]){const m={};s&2&&(m.id=o[1]),s&4&&(m.source=o[2]),s&8&&(m.sourceLayer=o[3]),s&16&&(m.beforeId=o[4]),s&32&&(m.beforeLayerType=o[5]),s&64&&(m.paint=o[6]),s&128&&(m.layout=o[7]),s&256&&(m.filter=o[8]),s&512&&(m.applyToClusters=o[9]),s&1024&&(m.minzoom=o[10]),s&2048&&(m.maxzoom=o[11]),s&4096&&(m.hoverCursor=o[12]),s&8192&&(m.manageHoverState=o[13]),s&16384&&(m.eventsIfTopMost=o[14]),s&32768&&(m.interactive=o[15]),s&16777216&&(m.$$scope={dirty:s,ctx:o}),!t&&s&1&&(t=!0,m.hovered=o[0],xe(()=>t=!1)),e.$set(m)},i(o){n||(z(e.$$.fragment,o),n=!0)},o(o){B(e.$$.fragment,o),n=!1},d(o){J(e,o)}}}function sl(l,e,t){let{$$slots:n={},$$scope:i}=e,{id:r=Ct("circle")}=e,{source:o=void 0}=e,{sourceLayer:s=void 0}=e,{beforeId:m=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:a}=e,{layout:g=void 0}=e,{filter:v=void 0}=e,{applyToClusters:U=void 0}=e,{minzoom:Z=void 0}=e,{maxzoom:G=void 0}=e,{hoverCursor:h=void 0}=e,{manageHoverState:T=!1}=e,{hovered:A=null}=e,{eventsIfTopMost:_=!1}=e,{interactive:C=!0}=e;function y(d){A=d,t(0,A)}function E(d){le.call(this,l,d)}function j(d){le.call(this,l,d)}function V(d){le.call(this,l,d)}function w(d){le.call(this,l,d)}function k(d){le.call(this,l,d)}function ne(d){le.call(this,l,d)}return l.$$set=d=>{"id"in d&&t(1,r=d.id),"source"in d&&t(2,o=d.source),"sourceLayer"in d&&t(3,s=d.sourceLayer),"beforeId"in d&&t(4,m=d.beforeId),"beforeLayerType"in d&&t(5,f=d.beforeLayerType),"paint"in d&&t(6,a=d.paint),"layout"in d&&t(7,g=d.layout),"filter"in d&&t(8,v=d.filter),"applyToClusters"in d&&t(9,U=d.applyToClusters),"minzoom"in d&&t(10,Z=d.minzoom),"maxzoom"in d&&t(11,G=d.maxzoom),"hoverCursor"in d&&t(12,h=d.hoverCursor),"manageHoverState"in d&&t(13,T=d.manageHoverState),"hovered"in d&&t(0,A=d.hovered),"eventsIfTopMost"in d&&t(14,_=d.eventsIfTopMost),"interactive"in d&&t(15,C=d.interactive),"$$scope"in d&&t(24,i=d.$$scope)},[A,r,o,s,m,f,a,g,v,U,Z,G,h,T,_,C,n,y,E,j,V,w,k,ne,i]}class Rl extends x{constructor(e){super(),$(this,e,sl,ol,ee,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}const al=l=>({marker:l&8}),kt=l=>({marker:l[3]});function fl(l){let e,t,n,i,r,o,s;const m=l[19].default,f=Ie(m,l,l[18],kt);return{c(){e=p("div"),f&&f.c(),c(e,"tabindex",t=l[1]?0:void 0),c(e,"role",n=l[1]?"button":void 0),ze(e,"z-index",l[2])},m(a,g){M(a,e,g),f&&f.m(e,null),r=!0,o||(s=[at(l[7].call(null,e)),at(i=ul.call(null,e,l[0])),H(e,"click",Ye(l[20])),H(e,"dblclick",Ye(l[21])),H(e,"contextmenu",Ye(l[22])),H(e,"mouseenter",l[23]),H(e,"mouseleave",l[24]),H(e,"mousemove",l[25]),H(e,"keydown",l[8])],o=!0)},p(a,[g]){f&&f.p&&(!r||g&262152)&&pe(f,m,a,a[18],r?Be(m,a[18],g,al):Pe(a[18]),kt),(!r||g&2&&t!==(t=a[1]?0:void 0))&&c(e,"tabindex",t),(!r||g&2&&n!==(n=a[1]?"button":void 0))&&c(e,"role",n),i&&ln(i.update)&&g&1&&i.update.call(null,a[0]),g&4&&ze(e,"z-index",a[2])},i(a){r||(z(f,a),r=!0)},o(a){B(f,a),r=!1},d(a){a&&I(e),f&&f.d(a),o=!1,Ae(s)}}}function ul(l,e){const t=l.className;function n(i){i?l.className=`${t} ${i}`:l.className=t}return n(e),{update:n}}function cl(l,e,t){let n,i,r,{$$slots:o={},$$scope:s}=e,{marker:m=void 0}=e,{lngLat:f}=e,{class:a=void 0}=e,{interactive:g=!0}=e,{asButton:v=!1}=e,{draggable:U=!1}=e,{feature:Z=null}=e,{offset:G=void 0}=e,{zIndex:h=void 0}=e,{rotation:T=0}=e,{opacity:A=1}=e;const _=wt(),{map:C,layerEvent:y,self:E}=an();be(l,C,b=>t(27,r=b)),be(l,y,b=>t(26,n=b)),be(l,E,b=>t(3,i=b));function j(b){ft(E,i=new Tt.Marker({element:b,rotation:T,draggable:U,offset:G,opacity:A.toString()}).setLngLat(f).addTo(r),i),t(11,m=i);const ae=()=>k("dragstart"),ie=()=>{V(),k("drag")},fe=()=>{V(),k("dragend")};return U&&(i.on("dragstart",ae),i.on("drag",ie),i.on("dragend",fe)),{destroy(){U&&(i==null||i.off("dragstart",ae),i==null||i.off("drag",ie),i==null||i.off("dragend",fe)),t(11,m=void 0),i==null||i.remove()}}}function V(){let b=i==null?void 0:i.getLngLat();b&&(Array.isArray(f)?t(10,f=[b.lng,b.lat]):f&&"lon"in f?t(10,f={lon:b.lng,lat:b.lat}):t(10,f=b))}function w(b){b.key===" "&&(b.preventDefault(),b.stopPropagation(),k("click"))}function k(b){if(!g)return;let ae=i==null?void 0:i.getLngLat();if(!ae)return;const ie=[ae.lng,ae.lat];let fe={map:r,marker:i,lngLat:ie,features:[{type:"Feature",properties:(Z==null?void 0:Z.properties)??{},geometry:{type:"Point",coordinates:ie}}]};ft(y,n={...fe,layerType:"marker",type:b},n),_(b,fe)}const ne=()=>k("click"),d=()=>k("dblclick"),ge=()=>k("contextmenu"),L=b=>{k("mouseenter")},O=()=>{k("mouseleave")},te=()=>k("mousemove");return l.$$set=b=>{"marker"in b&&t(11,m=b.marker),"lngLat"in b&&t(10,f=b.lngLat),"class"in b&&t(0,a=b.class),"interactive"in b&&t(12,g=b.interactive),"asButton"in b&&t(1,v=b.asButton),"draggable"in b&&t(13,U=b.draggable),"feature"in b&&t(14,Z=b.feature),"offset"in b&&t(15,G=b.offset),"zIndex"in b&&t(2,h=b.zIndex),"rotation"in b&&t(16,T=b.rotation),"opacity"in b&&t(17,A=b.opacity),"$$scope"in b&&t(18,s=b.$$scope)},l.$$.update=()=>{l.$$.dirty&1032&&(i==null||i.setLngLat(f)),l.$$.dirty&32776&&(i==null||i.setOffset(G??[0,0])),l.$$.dirty&65544&&(i==null||i.setRotation(T)),l.$$.dirty&131080&&(i==null||i.setOpacity(A.toString()))},[a,v,h,i,C,y,E,j,w,k,f,m,g,U,Z,G,T,A,s,o,ne,d,ge,L,O,te]}class Ul extends x{constructor(e){super(),$(this,e,cl,fl,ee,{marker:11,lngLat:10,class:0,interactive:12,asButton:1,draggable:13,feature:14,offset:15,zIndex:2,rotation:16,opacity:17})}}function ml(l){let e;const t=l[8].default,n=Ie(t,l,l[15],null);return{c(){n&&n.c()},m(i,r){n&&n.m(i,r),e=!0},p(i,r){n&&n.p&&(!e||r&32768)&&pe(n,t,i,i[15],e?Be(t,i[15],r,null):Pe(i[15]),null)},i(i){e||(z(n,i),e=!0)},o(i){B(n,i),e=!1},d(i){n&&n.d(i)}}}function dl(l){let e,t;return e=new zt({props:{id:l[0],type:"raster",source:l[1],beforeId:l[2],beforeLayerType:l[3],paint:l[4],layout:l[5],minzoom:l[6],maxzoom:l[7],$$slots:{default:[ml]},$$scope:{ctx:l}}}),e.$on("click",l[9]),e.$on("dblclick",l[10]),e.$on("contextmenu",l[11]),e.$on("mouseenter",l[12]),e.$on("mousemove",l[13]),e.$on("mouseleave",l[14]),{c(){K(e.$$.fragment)},m(n,i){Q(e,n,i),t=!0},p(n,[i]){const r={};i&1&&(r.id=n[0]),i&2&&(r.source=n[1]),i&4&&(r.beforeId=n[2]),i&8&&(r.beforeLayerType=n[3]),i&16&&(r.paint=n[4]),i&32&&(r.layout=n[5]),i&64&&(r.minzoom=n[6]),i&128&&(r.maxzoom=n[7]),i&32768&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function gl(l,e,t){let{$$slots:n={},$$scope:i}=e,{id:r=Ct("raster-layer")}=e,{source:o=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:m=void 0}=e,{paint:f}=e,{layout:a=void 0}=e,{minzoom:g=void 0}=e,{maxzoom:v=void 0}=e;function U(_){le.call(this,l,_)}function Z(_){le.call(this,l,_)}function G(_){le.call(this,l,_)}function h(_){le.call(this,l,_)}function T(_){le.call(this,l,_)}function A(_){le.call(this,l,_)}return l.$$set=_=>{"id"in _&&t(0,r=_.id),"source"in _&&t(1,o=_.source),"beforeId"in _&&t(2,s=_.beforeId),"beforeLayerType"in _&&t(3,m=_.beforeLayerType),"paint"in _&&t(4,f=_.paint),"layout"in _&&t(5,a=_.layout),"minzoom"in _&&t(6,g=_.minzoom),"maxzoom"in _&&t(7,v=_.maxzoom),"$$scope"in _&&t(15,i=_.$$scope)},[r,o,s,m,f,a,g,v,n,U,Z,G,h,T,A,i]}class Wl extends x{constructor(e){super(),$(this,e,gl,dl,ee,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}const _l="/atip/manage_files/assets/zoom_out_map-b2e1091a.svg";function hl(l){let e,t;return{c(){e=p("img"),Y(e.src,t=_l)||c(e,"src",t),c(e,"alt","Zoom to show entire boundary")},m(n,i){M(n,e,i)},p:F,d(n){n&&I(e)}}}function yl(l){let e,t;return e=new $e({props:{title:"Zoom to show entire boundary",$$slots:{default:[hl]},$$scope:{ctx:l}}}),e.$on("click",l[0]),{c(){K(e.$$.fragment)},m(n,i){Q(e,n,i),t=!0},p(n,[i]){const r={};i&8&&(r.$$scope={dirty:i,ctx:n}),e.$set(r)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){B(e.$$.fragment,n),t=!1},d(n){J(e,n)}}}function bl(l,e,t){let n;be(l,Lt,o=>t(2,n=o));let{boundaryGeojson:i}=e;function r(){let o=mn(i);Number.isFinite(o[0])&&n.fitBounds(o,{padding:20,animate:!0,duration:500})}return l.$$set=o=>{"boundaryGeojson"in o&&t(1,i=o.boundaryGeojson)},[r,i]}class Zl extends x{constructor(e){super(),$(this,e,bl,yl,ee,{boundaryGeojson:1})}}export{Il as B,Rl as C,pl as G,Ul as M,Wl as R,Pl as S,Bl as W,Zl as Z,Tl as a,mn as b,zl as c,Ml as d,Cl as e,Sl as f,qn as g,cn as h,Ll as i};
