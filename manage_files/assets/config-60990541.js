import{S as G,i as D,s as H,K as Qe,e as W,b as I,c as $,L as Ve,M as Ze,N as Xe,t as d,p as g,d as v,aB as fe,j as q,o as j,u as N,aG as ue,E as _e,f as me,a as F,ay as V,a9 as te,x as J,m as A,D as oe,az as Ye,O as xe,a4 as qe,aH as Pe,a5 as ot,aI as Ce,g as B,h as E,R as ce,X as ie,r as R,v as ve,a8 as et,y as re,q as se,n as de,ah as ke,I as ge,J as tt,ax as ft,C as ne,Y as at,aJ as le,aE as ct}from"./index-533b7074.js";import{S as je,p as he,a as pe,C as pt,g as _t,b as mt,t as dt,r as Ue}from"./colors-2a43b8c2.js";function gt(t){let e,i;const n=t[1].default,r=Qe(n,t,t[0],null);return{c(){e=W("div"),r&&r.c(),I(e,"class","govuk-button-group")},m(u,s){$(u,e,s),r&&r.m(e,null),i=!0},p(u,[s]){r&&r.p&&(!i||s&1)&&Ve(r,n,u,u[0],i?Xe(n,u[0],s,null):Ze(u[0]),null)},i(u){i||(d(r,u),i=!0)},o(u){g(r,u),i=!1},d(u){u&&v(e),r&&r.d(u)}}}function ht(t,e,i){let{$$slots:n={},$$scope:r}=e;return t.$$set=u=>{"$$scope"in u&&i(0,r=u.$$scope)},[r,n]}class bt extends G{constructor(e){super(),D(this,e,ht,gt,H,{})}}function Te(t){let e,i,n=be(t[0])+"",r;return{c(){e=W("div"),i=J("Â£"),r=J(n),I(e,"class","govuk-hint")},m(u,s){$(u,e,s),A(e,i),A(e,r)},p(u,s){s&1&&n!==(n=be(u[0])+"")&&oe(r,n)},d(u){u&&v(e)}}}function $t(t){let e;return{c(){e=J("multiply by 1 million")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function vt(t){let e,i,n,r,u,s,f,l,o;e=new _e({props:{errorMessage:Ie(t[2])}});let a=t[0]!=null&&Te(t);return s=new me({props:{disabled:t[0]==null||t[0]>1e3,$$slots:{default:[$t]},$$scope:{ctx:t}}}),s.$on("click",t[4]),{c(){q(e.$$.fragment),i=F(),a&&a.c(),n=F(),r=W("input"),u=F(),q(s.$$.fragment),I(r,"type","text"),I(r,"inputmode","numeric"),I(r,"class","govuk-input govuk-input--width-10"),I(r,"id",t[3])},m(p,c){j(e,p,c),$(p,i,c),a&&a.m(p,c),$(p,n,c),$(p,r,c),V(r,t[2]),$(p,u,c),j(s,p,c),f=!0,l||(o=te(r,"input",t[5]),l=!0)},p(p,c){const h={};c&4&&(h.errorMessage=Ie(p[2])),e.$set(h),p[0]!=null?a?a.p(p,c):(a=Te(p),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c&4&&r.value!==p[2]&&V(r,p[2]);const M={};c&1&&(M.disabled=p[0]==null||p[0]>1e3),c&128&&(M.$$scope={dirty:c,ctx:p}),s.$set(M)},i(p){f||(d(e.$$.fragment,p),d(s.$$.fragment,p),f=!0)},o(p){g(e.$$.fragment,p),g(s.$$.fragment,p),f=!1},d(p){p&&(v(i),v(n),v(r),v(u)),N(e,p),a&&a.d(p),N(s,p),l=!1,o()}}}function kt(t){let e,i;return e=new fe({props:{label:t[1],id:t[3],$$slots:{default:[vt]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(n,r){j(e,n,r),i=!0},p(n,[r]){const u={};r&2&&(u.label=n[1]),r&133&&(u.$$scope={dirty:r,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){N(e,n)}}}function nt(t){if(t!="")return parseFloat(t.replaceAll(",",""))}function Ie(t){let e=nt(t);return e==null?"":isNaN(e)?"Please enter a valid number":e<0?"Please enter a positive number":""}function be(t){return t.toLocaleString()}function yt(t,e,i){let{label:n}=e,{value:r}=e,u=ue(),s=r==null?"":be(r);function f(a){i(0,r=nt(a))}function l(){i(2,s=be(r*1e6))}function o(){s=this.value,i(2,s)}return t.$$set=a=>{"label"in a&&i(1,n=a.label),"value"in a&&i(0,r=a.value)},t.$$.update=()=>{t.$$.dirty&4&&f(s)},[r,n,s,u,l,o]}class wt extends G{constructor(e){super(),D(this,e,yt,kt,H,{label:1,value:0})}}function St(t){let e,i,n,r,u,s,f;return e=new _e({props:{errorMessage:t[5](t[2])}}),{c(){q(e.$$.fragment),i=F(),n=W("input"),I(n,"type","text"),I(n,"inputmode","numeric"),I(n,"class",r=`govuk-input govuk-input--width-${t[1]}`),I(n,"id",t[3])},m(l,o){j(e,l,o),$(l,i,o),$(l,n,o),V(n,t[2]),u=!0,s||(f=[te(n,"input",t[9]),te(n,"change",t[4])],s=!0)},p(l,o){const a={};o&4&&(a.errorMessage=l[5](l[2])),e.$set(a),(!u||o&2&&r!==(r=`govuk-input govuk-input--width-${l[1]}`))&&I(n,"class",r),o&4&&n.value!==l[2]&&V(n,l[2])},i(l){u||(d(e.$$.fragment,l),u=!0)},o(l){g(e.$$.fragment,l),u=!1},d(l){l&&(v(i),v(n)),N(e,l),s=!1,Ye(f)}}}function qt(t){let e,i;return e=new fe({props:{label:t[0],id:t[3],$$slots:{default:[St]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(n,r){j(e,n,r),i=!0},p(n,[r]){const u={};r&1&&(u.label=n[0]),r&1030&&(u.$$scope={dirty:r,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){N(e,n)}}}function jt(t,e,i){let{label:n}=e,{value:r}=e,{width:u}=e,{min:s=void 0}=e,{max:f=void 0}=e,l=r==null?void 0:r.toString(),o=ue();function a(){i(6,r=l==null?void 0:parseInt(l,10))}function p(h){if(h==""||h==null)return"";if(h.includes("."))return"Please enter a number without decimals";let M=Number(h);return isNaN(M)?"Please enter a valid number":s!=null&&M<s?`Please enter a number that's at least ${s};`:f!=null&&M>f?`Please enter a number that's at most ${f};`:""}function c(){l=this.value,i(2,l)}return t.$$set=h=>{"label"in h&&i(0,n=h.label),"value"in h&&i(6,r=h.value),"width"in h&&i(1,u=h.width),"min"in h&&i(7,s=h.min),"max"in h&&i(8,f=h.max)},[n,u,l,o,a,p,r,s,f,c]}class Se extends G{constructor(e){super(),D(this,e,jt,qt,H,{label:0,value:6,width:1,min:7,max:8})}}function Le(t){let e,i;return{c(){e=W("div"),i=J(t[2]),I(e,"class","govuk-hint")},m(n,r){$(n,e,r),A(e,i)},p(n,r){r&4&&oe(i,n[2])},d(n){n&&v(e)}}}function Nt(t){let e,i,n,r,u,s,f;e=new _e({props:{errorMessage:t[4]}});let l=t[2]&&Le(t);return{c(){q(e.$$.fragment),i=F(),l&&l.c(),n=F(),r=W("textarea"),I(r,"class","govuk-textarea"),I(r,"id",t[5]),I(r,"rows",t[3])},m(o,a){j(e,o,a),$(o,i,a),l&&l.m(o,a),$(o,n,a),$(o,r,a),V(r,t[0]),u=!0,s||(f=te(r,"input",t[6]),s=!0)},p(o,a){const p={};a&16&&(p.errorMessage=o[4]),e.$set(p),o[2]?l?l.p(o,a):(l=Le(o),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),(!u||a&8)&&I(r,"rows",o[3]),a&1&&V(r,o[0])},i(o){u||(d(e.$$.fragment,o),u=!0)},o(o){g(e.$$.fragment,o),u=!1},d(o){o&&(v(i),v(n),v(r)),N(e,o),l&&l.d(o),s=!1,f()}}}function Ft(t){let e,i;return e=new fe({props:{label:t[1],id:t[5],$$slots:{default:[Nt]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(n,r){j(e,n,r),i=!0},p(n,[r]){const u={};r&2&&(u.label=n[1]),r&157&&(u.$$scope={dirty:r,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){N(e,n)}}}function Ot(t,e,i){let{label:n}=e,{hint:r=""}=e,{value:u}=e,{rows:s=5}=e,{errorMessage:f=""}=e,l=ue();function o(){u=this.value,i(0,u)}return t.$$set=a=>{"label"in a&&i(1,n=a.label),"hint"in a&&i(2,r=a.hint),"value"in a&&i(0,u=a.value),"rows"in a&&i(3,s=a.rows),"errorMessage"in a&&i(4,f=a.errorMessage)},[u,n,r,s,f,l,o]}class Ne extends G{constructor(e){super(),D(this,e,Ot,Ft,H,{label:1,hint:2,value:0,rows:3,errorMessage:4})}}function Mt(t){let e,i,n,r,u,s;return e=new _e({props:{errorMessage:t[2]}}),{c(){q(e.$$.fragment),i=F(),n=W("input"),I(n,"type","text"),I(n,"class","govuk-input"),I(n,"id",t[3])},m(f,l){j(e,f,l),$(f,i,l),$(f,n,l),V(n,t[0]),r=!0,u||(s=[te(n,"input",t[6]),te(n,"change",t[5])],u=!0)},p(f,l){const o={};l&4&&(o.errorMessage=f[2]),e.$set(o),l&1&&n.value!==f[0]&&V(n,f[0])},i(f){r||(d(e.$$.fragment,f),r=!0)},o(f){g(e.$$.fragment,f),r=!1},d(f){f&&(v(i),v(n)),N(e,f),u=!1,Ye(s)}}}function Pt(t){let e,i;return e=new fe({props:{label:t[1],id:t[3],$$slots:{default:[Mt]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(n,r){j(e,n,r),i=!0},p(n,[r]){const u={};r&2&&(u.label=n[1]),r&133&&(u.$$scope={dirty:r,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){N(e,n)}}}function Ct(t,e,i){let n,{label:r}=e,{value:u}=e,{required:s=!1}=e,f=ue();function l(a){xe.call(this,t,a)}function o(){u=this.value,i(0,u)}return t.$$set=a=>{"label"in a&&i(1,r=a.label),"value"in a&&i(0,u=a.value),"required"in a&&i(4,s=a.required)},t.$$.update=()=>{t.$$.dirty&17&&i(2,n=s&&(u==null||u=="")?"Required":"")},[u,r,n,f,s,l,o]}class Fe extends G{constructor(e){super(),D(this,e,Ct,Pt,H,{label:1,value:0,required:4})}}function Ut(t){let e,i,n,r;const u=t[2].default,s=Qe(u,t,t[1],null);let f=[{type:"button"},{class:"govuk-button govuk-button--warning"},{"data-module":"govuk-button"},t[0]],l={};for(let o=0;o<f.length;o+=1)l=qe(l,f[o]);return{c(){e=W("button"),s&&s.c(),Pe(e,l)},m(o,a){$(o,e,a),s&&s.m(e,null),e.autofocus&&e.focus(),i=!0,n||(r=te(e,"click",t[3]),n=!0)},p(o,[a]){s&&s.p&&(!i||a&2)&&Ve(s,u,o,o[1],i?Xe(u,o[1],a,null):Ze(o[1]),null),Pe(e,l=ot(f,[{type:"button"},{class:"govuk-button govuk-button--warning"},{"data-module":"govuk-button"},a&1&&o[0]]))},i(o){i||(d(s,o),i=!0)},o(o){g(s,o),i=!1},d(o){o&&v(e),s&&s.d(o),n=!1,r()}}}function Tt(t,e,i){let{$$slots:n={},$$scope:r}=e;function u(s){xe.call(this,t,s)}return t.$$set=s=>{i(0,e=qe(qe({},e),Ce(s))),"$$scope"in s&&i(1,r=s.$$scope)},e=Ce(e),[e,r,n,u]}class It extends G{constructor(e){super(),D(this,e,Tt,Ut,H,{})}}function Ae(t){let e,i;return e=new me({props:{disabled:!t[2],$$slots:{default:[Lt]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){q(e.$$.fragment)},m(n,r){j(e,n,r),i=!0},p(n,r){const u={};r&4&&(u.disabled=!n[2]),r&4096&&(u.$$scope={dirty:r,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){N(e,n)}}}function Lt(t){let e;return{c(){e=J("Auto-fill")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function At(t){let e,i,n,r,u,s,f=t[0].length_meters&&Ae(t);return{c(){e=W("input"),i=F(),f&&f.c(),n=ie(),I(e,"type","text"),I(e,"class","govuk-input"),I(e,"id",t[5])},m(l,o){$(l,e,o),V(e,t[0].name),$(l,i,o),f&&f.m(l,o),$(l,n,o),r=!0,u||(s=te(e,"input",t[6]),u=!0)},p(l,o){o&1&&e.value!==l[0].name&&V(e,l[0].name),l[0].length_meters?f?(f.p(l,o),o&1&&d(f,1)):(f=Ae(l),f.c(),d(f,1),f.m(n.parentNode,n)):f&&(re(),g(f,1,1,()=>{f=null}),se())},i(l){r||(d(f),r=!0)},o(l){g(f),r=!1},d(l){l&&(v(e),v(i),v(n)),f&&f.d(l),u=!1,s()}}}function Be(t){let e,i,n=he(t[0].length_meters)+"",r;return{c(){e=W("p"),i=J("Length: "),r=J(n)},m(u,s){$(u,e,s),A(e,i),A(e,r)},p(u,s){s&1&&n!==(n=he(u[0].length_meters)+"")&&oe(r,n)},d(u){u&&v(e)}}}function Bt(t){let e,i,n,r,u,s,f,l,o,a,p,c,h;e=new fe({props:{label:"Name",id:t[5],$$slots:{default:[At]},$$scope:{ctx:t}}});function M(S){t[9](S)}let C={label:"Scheme",choices:Object.values(t[3].schemes).map(t[8])};t[0].scheme_reference!==void 0&&(C.value=t[0].scheme_reference),n=new je({props:C}),B.push(()=>E(n,"value",M));function O(S){t[10](S)}let y={label:"Type",choices:[["area","Area"],["route","Route"],["crossing","Crossing"],["other","Other"]],inlineSmall:!0,required:!0};t[0].intervention_type!==void 0&&(y.value=t[0].intervention_type),s=new ce({props:y}),B.push(()=>E(s,"value",O));function _(S){t[11](S)}let P={label:"Description"};t[0].description!==void 0&&(P.value=t[0].description),o=new Ne({props:P}),B.push(()=>E(o,"value",_));let U=t[0].length_meters&&Be(t);return{c(){q(e.$$.fragment),i=F(),q(n.$$.fragment),u=F(),q(s.$$.fragment),l=F(),q(o.$$.fragment),p=F(),U&&U.c(),c=ie()},m(S,T){j(e,S,T),$(S,i,T),j(n,S,T),$(S,u,T),j(s,S,T),$(S,l,T),j(o,S,T),$(S,p,T),U&&U.m(S,T),$(S,c,T),h=!0},p(S,[T]){const k={};T&4101&&(k.$$scope={dirty:T,ctx:S}),e.$set(k);const Q={};T&8&&(Q.choices=Object.values(S[3].schemes).map(S[8])),!r&&T&1&&(r=!0,Q.value=S[0].scheme_reference,R(()=>r=!1)),n.$set(Q);const K={};!f&&T&1&&(f=!0,K.value=S[0].intervention_type,R(()=>f=!1)),s.$set(K);const Z={};!a&&T&1&&(a=!0,Z.value=S[0].description,R(()=>a=!1)),o.$set(Z),S[0].length_meters?U?U.p(S,T):(U=Be(S),U.c(),U.m(c.parentNode,c)):U&&(U.d(1),U=null)},i(S){h||(d(e.$$.fragment,S),d(n.$$.fragment,S),d(s.$$.fragment,S),d(o.$$.fragment,S),h=!0)},o(S){g(e.$$.fragment,S),g(n.$$.fragment,S),g(s.$$.fragment,S),g(o.$$.fragment,S),h=!1},d(S){S&&(v(i),v(u),v(l),v(p),v(c)),N(e,S),N(n,S),N(s,S),N(o,S),U&&U.d(S)}}}function Et(t,e,i){let n,r,u=de,s=()=>(u(),u=ke(f,y=>i(3,r=y)),f);ve(t,et,y=>i(2,n=y)),t.$$.on_destroy.push(()=>u());let{gjSchemes:f}=e;s();let{props:l}=e;function o(){try{i(0,l.name=n.inner.routeNameForWaypoints(l.waypoints),l)}catch(y){window.alert(`Couldn't auto-name route: ${y}`)}}let a=ue();function p(){l.name=this.value,i(0,l)}const c=()=>o(),h=y=>[y.scheme_reference,Oe(y)];function M(y){t.$$.not_equal(l.scheme_reference,y)&&(l.scheme_reference=y,i(0,l))}function C(y){t.$$.not_equal(l.intervention_type,y)&&(l.intervention_type=y,i(0,l))}function O(y){t.$$.not_equal(l.description,y)&&(l.description=y,i(0,l))}return t.$$set=y=>{"gjSchemes"in y&&s(i(1,f=y.gjSchemes)),"props"in y&&i(0,l=y.props)},[l,f,n,r,o,a,p,c,h,M,C,O]}class Rt extends G{constructor(e){super(),D(this,e,Et,Bt,H,{gjSchemes:1,props:0})}}function Wt(t){let e,i,n;function r(s){t[2](s)}let u={label:t[1],choices:[ee("New segregated cycling facility"),ee("New junction treatment"),ee("New permanent footway"),["New shared use facilities","New shared use (walking and cycling) facilities"],["Improvements to existing route","Improvements to make an existing walking/cycle route safer"],["Area-wide traffic management","Area-wide traffic management (including by TROs - both permanent and experimental)"],["Bus priority measures","Bus priority measures that also enable active travel (for example, bus gates)"],["Secure cycle parking","Provision of secure cycle parking facilities"],ee("New road crossings"),ee("Restriction or reduction of car parking availability"),ee("School streets"),ee("Quiet mixed traffic streets"),ee("Traffic free routes"),ee("Not specified in LCWIP")],emptyOption:!0};return t[0]!==void 0&&(u.value=t[0]),e=new je({props:u}),B.push(()=>E(e,"value",r)),{c(){q(e.$$.fragment)},m(s,f){j(e,s,f),n=!0},p(s,[f]){const l={};f&2&&(l.label=s[1]),!i&&f&1&&(i=!0,l.value=s[0],R(()=>i=!1)),e.$set(l)},i(s){n||(d(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function ee(t){return[t,t]}function Jt(t,e,i){let{label:n}=e,{value:r}=e;function u(s){r=s,i(0,r)}return t.$$set=s=>{"label"in s&&i(1,n=s.label),"value"in s&&i(0,r=s.value)},[r,n,u]}class it extends G{constructor(e){super(),D(this,e,Jt,Wt,H,{label:1,value:0})}}function Gt(t){let e,i,n,r,u,s,f,l,o,a,p,c,h,M,C,O,y,_;function P(b){t[3](b)}let U={label:"Status",choices:[["","Unknown"],["aspiration","Aspiration"],["planned","Planned"],["in development","In development"],["in construction","In construction"],["completed","Completed"]],inlineSmall:!0,required:t[1]};t[0].status!==void 0&&(U.value=t[0].status),r=new ce({props:U}),B.push(()=>E(r,"value",P));function S(b){t[4](b)}let T={label:"Timescale",choices:[["","Unknown"],["short","Short (1-3 years)"],["medium","Medium (3-6 years)"],["long","Long (6-10 years)"]],inlineSmall:!0,required:t[1]};t[0].timescale!==void 0&&(T.value=t[0].timescale),f=new ce({props:T}),B.push(()=>E(f,"value",S));function k(b){t[5](b)}let Q={label:"Estimated completion year (if known)",width:4,min:2010,max:2100};t[0].timescale_year!==void 0&&(Q.value=t[0].timescale_year),a=new Se({props:Q}),B.push(()=>E(a,"value",k));function K(b){t[6](b)}let Z={label:"What year was this scheme most recently published?",width:4,min:2010,max:2100};t[0].year_published!==void 0&&(Z.value=t[0].year_published),h=new Se({props:Z}),B.push(()=>E(h,"value",K));function x(b){t[7](b)}let m={label:"What year was this scheme most recently consulted on?",width:4,min:2010,max:2100};return t[0].year_consulted!==void 0&&(m.value=t[0].year_consulted),O=new Se({props:m}),B.push(()=>E(O,"value",x)),{c(){e=W("fieldset"),i=W("legend"),i.textContent="Timing and status",n=F(),q(r.$$.fragment),s=F(),q(f.$$.fragment),o=F(),q(a.$$.fragment),c=F(),q(h.$$.fragment),C=F(),q(O.$$.fragment),I(i,"class","govuk-fieldset__legend"),I(e,"class","govuk-fieldset svelte-1bxyfcq")},m(b,w){$(b,e,w),A(e,i),A(e,n),j(r,e,null),A(e,s),j(f,e,null),A(e,o),j(a,e,null),A(e,c),j(h,e,null),A(e,C),j(O,e,null),_=!0},p(b,[w]){const L={};w&2&&(L.required=b[1]),!u&&w&1&&(u=!0,L.value=b[0].status,R(()=>u=!1)),r.$set(L);const z={};w&2&&(z.required=b[1]),!l&&w&1&&(l=!0,z.value=b[0].timescale,R(()=>l=!1)),f.$set(z);const X={};!p&&w&1&&(p=!0,X.value=b[0].timescale_year,R(()=>p=!1)),a.$set(X);const Y={};!M&&w&1&&(M=!0,Y.value=b[0].year_published,R(()=>M=!1)),h.$set(Y);const ae={};!y&&w&1&&(y=!0,ae.value=b[0].year_consulted,R(()=>y=!1)),O.$set(ae)},i(b){_||(d(r.$$.fragment,b),d(f.$$.fragment,b),d(a.$$.fragment,b),d(h.$$.fragment,b),d(O.$$.fragment,b),_=!0)},o(b){g(r.$$.fragment,b),g(f.$$.fragment,b),g(a.$$.fragment,b),g(h.$$.fragment,b),g(O.$$.fragment,b),_=!1},d(b){b&&v(e),N(r),N(f),N(a),N(h),N(O)}}}function Dt(t,e,i){let{data:n}=e,{required:r}=e,{onUpdate:u}=e;function s(c){u()}function f(c){t.$$.not_equal(n.status,c)&&(n.status=c,i(0,n))}function l(c){t.$$.not_equal(n.timescale,c)&&(n.timescale=c,i(0,n))}function o(c){t.$$.not_equal(n.timescale_year,c)&&(n.timescale_year=c,i(0,n))}function a(c){t.$$.not_equal(n.year_published,c)&&(n.year_published=c,i(0,n))}function p(c){t.$$.not_equal(n.year_consulted,c)&&(n.year_consulted=c,i(0,n))}return t.$$set=c=>{"data"in c&&i(0,n=c.data),"required"in c&&i(1,r=c.required),"onUpdate"in c&&i(2,u=c.onUpdate)},t.$$.update=()=>{t.$$.dirty&1&&s()},[n,r,u,f,l,o,a,p]}class rt extends G{constructor(e){super(),D(this,e,Dt,Gt,H,{data:0,required:1,onUpdate:2})}}function Ee(t,e,i){const n=t.slice();return n[9]=e[i],n[10]=e,n[11]=i,n}function Ht(t){let e;return{c(){e=J("Is the development fully funded?")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function zt(t){let e;return{c(){e=J("Is the construction fully funded?")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function Kt(t){let e,i,n;function r(s){t[6](s,t[9])}let u={$$slots:{default:[Qt]},$$scope:{ctx:t}};return t[0].funding_sources[t[9]]!==void 0&&(u.checked=t[0].funding_sources[t[9]]),e=new pe({props:u}),B.push(()=>E(e,"checked",r)),{c(){q(e.$$.fragment)},m(s,f){j(e,s,f),n=!0},p(s,f){t=s;const l={};f&4096&&(l.$$scope={dirty:f,ctx:t}),!i&&f&3&&(i=!0,l.checked=t[0].funding_sources[t[9]],R(()=>i=!1)),e.$set(l)},i(s){n||(d(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function Qt(t){let e=t[9].toUpperCase()+"",i,n;return{c(){i=J(e),n=F()},m(r,u){$(r,i,u),$(r,n,u)},p:de,d(r){r&&(v(i),v(n))}}}function Re(t){let e,i,n=t[9]!="other"&&Kt(t);return{c(){n&&n.c(),e=ie()},m(r,u){n&&n.m(r,u),$(r,e,u),i=!0},p(r,u){r[9]!="other"&&n.p(r,u)},i(r){i||(d(n),i=!0)},o(r){g(n),i=!1},d(r){r&&v(e),n&&n.d(r)}}}function Vt(t){let e,i,n=ge(t[1]),r=[];for(let s=0;s<n.length;s+=1)r[s]=Re(Ee(t,n,s));const u=s=>g(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=ie()},m(s,f){for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(s,f);$(s,e,f),i=!0},p(s,f){if(f&3){n=ge(s[1]);let l;for(l=0;l<n.length;l+=1){const o=Ee(s,n,l);r[l]?(r[l].p(o,f),d(r[l],1)):(r[l]=Re(o),r[l].c(),d(r[l],1),r[l].m(e.parentNode,e))}for(re(),l=n.length;l<r.length;l+=1)u(l);se()}},i(s){if(!i){for(let f=0;f<n.length;f+=1)d(r[f]);i=!0}},o(s){r=r.filter(Boolean);for(let f=0;f<r.length;f+=1)g(r[f]);i=!1},d(s){s&&v(e),tt(r,s)}}}function Zt(t){let e,i,n,r,u,s,f,l,o,a,p,c,h,M,C,O,y,_,P;function U(m){t[3](m)}let S={label:"Cost (GBP)"};t[0].budget!==void 0&&(S.value=t[0].budget),r=new wt({props:S}),B.push(()=>E(r,"value",U));function T(m){t[4](m)}let k={$$slots:{default:[Ht]},$$scope:{ctx:t}};t[0].development_funded!==void 0&&(k.checked=t[0].development_funded),f=new pe({props:k}),B.push(()=>E(f,"checked",T));function Q(m){t[5](m)}let K={$$slots:{default:[zt]},$$scope:{ctx:t}};t[0].construction_funded!==void 0&&(K.checked=t[0].construction_funded),a=new pe({props:K}),B.push(()=>E(a,"checked",Q)),C=new pt({props:{$$slots:{default:[Vt]},$$scope:{ctx:t}}});function Z(m){t[7](m)}let x={label:"Other funding sources"};return t[0].funding_sources.other!==void 0&&(x.value=t[0].funding_sources.other),y=new Fe({props:x}),B.push(()=>E(y,"value",Z)),{c(){e=W("fieldset"),i=W("legend"),i.textContent="Budget",n=F(),q(r.$$.fragment),s=F(),q(f.$$.fragment),o=F(),q(a.$$.fragment),c=F(),h=W("p"),h.textContent="Funding sources",M=F(),q(C.$$.fragment),O=F(),q(y.$$.fragment),I(i,"class","govuk-fieldset__legend"),I(e,"class","govuk-fieldset svelte-1bxyfcq")},m(m,b){$(m,e,b),A(e,i),A(e,n),j(r,e,null),A(e,s),j(f,e,null),A(e,o),j(a,e,null),A(e,c),A(e,h),A(e,M),j(C,e,null),A(e,O),j(y,e,null),P=!0},p(m,[b]){const w={};!u&&b&1&&(u=!0,w.value=m[0].budget,R(()=>u=!1)),r.$set(w);const L={};b&4096&&(L.$$scope={dirty:b,ctx:m}),!l&&b&1&&(l=!0,L.checked=m[0].development_funded,R(()=>l=!1)),f.$set(L);const z={};b&4096&&(z.$$scope={dirty:b,ctx:m}),!p&&b&1&&(p=!0,z.checked=m[0].construction_funded,R(()=>p=!1)),a.$set(z);const X={};b&4097&&(X.$$scope={dirty:b,ctx:m}),C.$set(X);const Y={};!_&&b&1&&(_=!0,Y.value=m[0].funding_sources.other,R(()=>_=!1)),y.$set(Y)},i(m){P||(d(r.$$.fragment,m),d(f.$$.fragment,m),d(a.$$.fragment,m),d(C.$$.fragment,m),d(y.$$.fragment,m),P=!0)},o(m){g(r.$$.fragment,m),g(f.$$.fragment,m),g(a.$$.fragment,m),g(C.$$.fragment,m),g(y.$$.fragment,m),P=!1},d(m){m&&v(e),N(r),N(f),N(a),N(C),N(y)}}}function Xt(t,e,i){let{data:n}=e,{onUpdate:r}=e;function u(c){r()}let s=["atf2","atf3","atf4","atf4e","crsts","luf"];function f(c){t.$$.not_equal(n.budget,c)&&(n.budget=c,i(0,n))}function l(c){t.$$.not_equal(n.development_funded,c)&&(n.development_funded=c,i(0,n))}function o(c){t.$$.not_equal(n.construction_funded,c)&&(n.construction_funded=c,i(0,n))}function a(c,h){t.$$.not_equal(n.funding_sources[h],c)&&(n.funding_sources[h]=c,i(0,n))}function p(c){t.$$.not_equal(n.funding_sources.other,c)&&(n.funding_sources.other=c,i(0,n))}return t.$$set=c=>{"data"in c&&i(0,n=c.data),"onUpdate"in c&&i(2,r=c.onUpdate)},t.$$.update=()=>{t.$$.dirty&1&&u()},[n,s,r,f,l,o,a,p]}class st extends G{constructor(e){super(),D(this,e,Xt,Zt,H,{data:0,onUpdate:2})}}function We(t){let e,i;return e=new me({props:{disabled:!t[2],$$slots:{default:[Yt]},$$scope:{ctx:t}}}),e.$on("click",t[8]),{c(){q(e.$$.fragment)},m(n,r){j(e,n,r),i=!0},p(n,r){const u={};r&4&&(u.disabled=!n[2]),r&262144&&(u.$$scope={dirty:r,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){N(e,n)}}}function Yt(t){let e;return{c(){e=J("Auto-fill with street names")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function xt(t){let e,i,n,r,u,s,f,l,o=t[0].length_meters&&We(t);return{c(){e=W("div"),e.textContent="Use the name from the LCWIP if possible",i=F(),n=W("input"),r=F(),o&&o.c(),u=ie(),I(e,"class","govuk-hint"),I(n,"type","text"),I(n,"class","govuk-input"),I(n,"id",t[6])},m(a,p){$(a,e,p),$(a,i,p),$(a,n,p),V(n,t[0].name),$(a,r,p),o&&o.m(a,p),$(a,u,p),s=!0,f||(l=te(n,"input",t[7]),f=!0)},p(a,p){p&1&&n.value!==a[0].name&&V(n,a[0].name),a[0].length_meters?o?(o.p(a,p),p&1&&d(o,1)):(o=We(a),o.c(),d(o,1),o.m(u.parentNode,u)):o&&(re(),g(o,1,1,()=>{o=null}),se())},i(a){s||(d(o),s=!0)},o(a){g(o),s=!1},d(a){a&&(v(e),v(i),v(n),v(r),v(u)),o&&o.d(a),f=!1,l()}}}function Je(t){let e,i,n=he(t[0].length_meters)+"",r;return{c(){e=W("p"),i=J("Length: "),r=J(n)},m(u,s){$(u,e,s),A(e,i),A(e,r)},p(u,s){s&1&&n!==(n=he(u[0].length_meters)+"")&&oe(r,n)},d(u){u&&v(e)}}}function Ge(t){let e,i,n,r,u,s,f,l,o,a,p,c,h,M,C,O;function y(m){t[12](m)}let _={label:"Type"};t[0].pipeline.atf4_type!==void 0&&(_.value=t[0].pipeline.atf4_type),e=new it({props:_}),B.push(()=>E(e,"value",y));function P(m){t[13](m)}let U={label:"Accuracy of mapped data",choices:[["high","High"],["medium","Medium"],["low","Low"]],required:!0,inlineSmall:!0};t[0].pipeline.accuracy!==void 0&&(U.value=t[0].pipeline.accuracy),r=new ce({props:U}),B.push(()=>E(r,"value",P));function S(m){t[14](m)}let T={$$slots:{default:[en]},$$scope:{ctx:t}};t[0].pipeline.is_alternative!==void 0&&(T.checked=t[0].pipeline.is_alternative),f=new pe({props:T}),B.push(()=>E(f,"checked",S));let k=t[4]&&t[0].is_coverage_polygon!==void 0&&De(t);function Q(m){t[16](m)}let K={required:!1,onUpdate:rn};t[0].pipeline!==void 0&&(K.data=t[0].pipeline),p=new rt({props:K}),B.push(()=>E(p,"data",Q));function Z(m){t[17](m)}let x={onUpdate:sn};return t[0].pipeline!==void 0&&(x.data=t[0].pipeline),M=new st({props:x}),B.push(()=>E(M,"data",Z)),{c(){q(e.$$.fragment),n=F(),q(r.$$.fragment),s=F(),q(f.$$.fragment),o=F(),k&&k.c(),a=F(),q(p.$$.fragment),h=F(),q(M.$$.fragment)},m(m,b){j(e,m,b),$(m,n,b),j(r,m,b),$(m,s,b),j(f,m,b),$(m,o,b),k&&k.m(m,b),$(m,a,b),j(p,m,b),$(m,h,b),j(M,m,b),O=!0},p(m,b){const w={};!i&&b&1&&(i=!0,w.value=m[0].pipeline.atf4_type,R(()=>i=!1)),e.$set(w);const L={};!u&&b&1&&(u=!0,L.value=m[0].pipeline.accuracy,R(()=>u=!1)),r.$set(L);const z={};b&262144&&(z.$$scope={dirty:b,ctx:m}),!l&&b&1&&(l=!0,z.checked=m[0].pipeline.is_alternative,R(()=>l=!1)),f.$set(z),m[4]&&m[0].is_coverage_polygon!==void 0?k?(k.p(m,b),b&1&&d(k,1)):(k=De(m),k.c(),d(k,1),k.m(a.parentNode,a)):k&&(re(),g(k,1,1,()=>{k=null}),se());const X={};!c&&b&1&&(c=!0,X.data=m[0].pipeline,R(()=>c=!1)),p.$set(X);const Y={};!C&&b&1&&(C=!0,Y.data=m[0].pipeline,R(()=>C=!1)),M.$set(Y)},i(m){O||(d(e.$$.fragment,m),d(r.$$.fragment,m),d(f.$$.fragment,m),d(k),d(p.$$.fragment,m),d(M.$$.fragment,m),O=!0)},o(m){g(e.$$.fragment,m),g(r.$$.fragment,m),g(f.$$.fragment,m),g(k),g(p.$$.fragment,m),g(M.$$.fragment,m),O=!1},d(m){m&&(v(n),v(s),v(o),v(a),v(h)),N(e,m),N(r,m),N(f,m),k&&k.d(m),N(p,m),N(M,m)}}}function en(t){let e;return{c(){e=J("Is this an alternative route and not the default option?")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function De(t){let e,i,n;function r(s){t[15](s)}let u={$$slots:{default:[tn]},$$scope:{ctx:t}};return t[0].is_coverage_polygon!==void 0&&(u.checked=t[0].is_coverage_polygon),e=new pe({props:u}),B.push(()=>E(e,"checked",r)),{c(){q(e.$$.fragment)},m(s,f){j(e,s,f),n=!0},p(s,f){const l={};f&262144&&(l.$$scope={dirty:f,ctx:s}),!i&&f&1&&(i=!0,l.checked=s[0].is_coverage_polygon,R(()=>i=!1)),e.$set(l)},i(s){n||(d(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function tn(t){let e;return{c(){e=J(`Does this polygon show the coverage of the scheme? (All area considered
      while making the scheme)`)},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function nn(t){let e,i,n,r,u,s,f,l,o,a,p;e=new fe({props:{label:"Name",id:t[6],$$slots:{default:[xt]},$$scope:{ctx:t}}});function c(_){t[10](_)}let h={label:"Scheme",choices:Object.values(t[3].schemes).map(t[9])};t[0].scheme_reference!==void 0&&(h.value=t[0].scheme_reference),n=new je({props:h}),B.push(()=>E(n,"value",c));function M(_){t[11](_)}let C={label:"Description"};t[0].description!==void 0&&(C.value=t[0].description),s=new Ne({props:C}),B.push(()=>E(s,"value",M));let O=t[0].length_meters&&Je(t),y=t[0].pipeline&&Ge(t);return{c(){q(e.$$.fragment),i=F(),q(n.$$.fragment),u=F(),q(s.$$.fragment),l=F(),O&&O.c(),o=F(),y&&y.c(),a=ie()},m(_,P){j(e,_,P),$(_,i,P),j(n,_,P),$(_,u,P),j(s,_,P),$(_,l,P),O&&O.m(_,P),$(_,o,P),y&&y.m(_,P),$(_,a,P),p=!0},p(_,[P]){const U={};P&262149&&(U.$$scope={dirty:P,ctx:_}),e.$set(U);const S={};P&8&&(S.choices=Object.values(_[3].schemes).map(_[9])),!r&&P&1&&(r=!0,S.value=_[0].scheme_reference,R(()=>r=!1)),n.$set(S);const T={};!f&&P&1&&(f=!0,T.value=_[0].description,R(()=>f=!1)),s.$set(T),_[0].length_meters?O?O.p(_,P):(O=Je(_),O.c(),O.m(o.parentNode,o)):O&&(O.d(1),O=null),_[0].pipeline?y?(y.p(_,P),P&1&&d(y,1)):(y=Ge(_),y.c(),d(y,1),y.m(a.parentNode,a)):y&&(re(),g(y,1,1,()=>{y=null}),se())},i(_){p||(d(e.$$.fragment,_),d(n.$$.fragment,_),d(s.$$.fragment,_),d(y),p=!0)},o(_){g(e.$$.fragment,_),g(n.$$.fragment,_),g(s.$$.fragment,_),g(y),p=!1},d(_){_&&(v(i),v(u),v(l),v(o),v(a)),N(e,_),N(n,_),N(s,_),O&&O.d(_),y&&y.d(_)}}}const rn=()=>{},sn=()=>{};function ln(t,e,i){let n,r,u=de,s=()=>(u(),u=ke(f,k=>i(3,r=k)),f);ve(t,et,k=>i(2,n=k)),t.$$.on_destroy.push(()=>u());let{gjSchemes:f}=e;s();let{props:l}=e;l.pipeline||(l.pipeline={atf4_type:"",accuracy:"",is_alternative:!1,development_funded:!1,construction_funded:!1,funding_sources:$e(),status:"",timescale:""}),l.is_coverage_polygon||(l.is_coverage_polygon=!1);const o=(r.features.filter(k=>k.properties.is_coverage_polygon).length==0||l.is_coverage_polygon===!0)&&l.intervention_type==="area";function a(){try{i(0,l.name=n.inner.routeNameForWaypoints(l.waypoints),l)}catch(k){window.alert(`Couldn't auto-name route: ${k}`)}}let p=ue();function c(){l.name=this.value,i(0,l)}const h=()=>a(),M=k=>[k.scheme_reference,Oe(k)];function C(k){t.$$.not_equal(l.scheme_reference,k)&&(l.scheme_reference=k,i(0,l))}function O(k){t.$$.not_equal(l.description,k)&&(l.description=k,i(0,l))}function y(k){t.$$.not_equal(l.pipeline.atf4_type,k)&&(l.pipeline.atf4_type=k,i(0,l))}function _(k){t.$$.not_equal(l.pipeline.accuracy,k)&&(l.pipeline.accuracy=k,i(0,l))}function P(k){t.$$.not_equal(l.pipeline.is_alternative,k)&&(l.pipeline.is_alternative=k,i(0,l))}function U(k){t.$$.not_equal(l.is_coverage_polygon,k)&&(l.is_coverage_polygon=k,i(0,l))}function S(k){t.$$.not_equal(l.pipeline,k)&&(l.pipeline=k,i(0,l))}function T(k){t.$$.not_equal(l.pipeline,k)&&(l.pipeline=k,i(0,l))}return t.$$set=k=>{"gjSchemes"in k&&s(i(1,f=k.gjSchemes)),"props"in k&&i(0,l=k.props)},[l,f,n,r,o,a,p,c,h,M,C,O,y,_,P,U,S,T]}class un extends G{constructor(e){super(),D(this,e,ln,nn,H,{gjSchemes:1,props:0})}}function He(t,e,i){const n=t.slice();return n[9]=e[i][0],n[10]=e[i][1],n}function ze(t){let e,i;return e=new me({props:{$$slots:{default:[on]},$$scope:{ctx:t}}}),e.$on("click",t[6]),{c(){q(e.$$.fragment)},m(n,r){j(e,n,r),i=!0},p(n,r){const u={};r&8192&&(u.$$scope={dirty:r,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){N(e,n)}}}function on(t){let e;return{c(){e=J("Handle extra GeoJSON properties")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function Ke(t){let e,i,n=t[9]+"",r,u,s=JSON.stringify(t[10])+"",f,l;return{c(){e=W("li"),i=W("b"),r=J(n),u=J(`
        = `),f=J(s),l=F()},m(o,a){$(o,e,a),A(e,i),A(i,r),A(e,u),A(e,f),A(e,l)},p(o,a){a&2&&n!==(n=o[9]+"")&&oe(r,n),a&2&&s!==(s=JSON.stringify(o[10])+"")&&oe(f,s)},d(o){o&&v(e)}}}function fn(t){let e;return{c(){e=J("Remove these properties")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function an(t){let e;return{c(){e=J("Cancel")},m(i,n){$(i,e,n)},d(i){i&&v(e)}}}function cn(t){let e,i,n,r;return e=new It({props:{$$slots:{default:[fn]},$$scope:{ctx:t}}}),e.$on("click",t[2]),n=new me({props:{$$slots:{default:[an]},$$scope:{ctx:t}}}),n.$on("click",t[7]),{c(){q(e.$$.fragment),i=F(),q(n.$$.fragment)},m(u,s){j(e,u,s),$(u,i,s),j(n,u,s),r=!0},p(u,s){const f={};s&8192&&(f.$$scope={dirty:s,ctx:u}),e.$set(f);const l={};s&8192&&(l.$$scope={dirty:s,ctx:u}),n.$set(l)},i(u){r||(d(e.$$.fragment,u),d(n.$$.fragment,u),r=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),r=!1},d(u){u&&v(i),N(e,u),N(n,u)}}}function pn(t){let e,i,n,r,u,s,f=ge(Object.entries(t[1])),l=[];for(let o=0;o<f.length;o+=1)l[o]=Ke(He(t,f,o));return u=new bt({props:{$$slots:{default:[cn]},$$scope:{ctx:t}}}),{c(){e=W("p"),e.textContent="The unexpected properties:",i=F(),n=W("ul");for(let o=0;o<l.length;o+=1)l[o].c();r=F(),q(u.$$.fragment)},m(o,a){$(o,e,a),$(o,i,a),$(o,n,a);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(n,null);$(o,r,a),j(u,o,a),s=!0},p(o,a){if(a&2){f=ge(Object.entries(o[1]));let c;for(c=0;c<f.length;c+=1){const h=He(o,f,c);l[c]?l[c].p(h,a):(l[c]=Ke(h),l[c].c(),l[c].m(n,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=f.length}const p={};a&8193&&(p.$$scope={dirty:a,ctx:o}),u.$set(p)},i(o){s||(d(u.$$.fragment,o),s=!0)},o(o){g(u.$$.fragment,o),s=!1},d(o){o&&(v(e),v(i),v(n),v(r)),tt(l,o),N(u,o)}}}function _n(t){let e=Object.entries(t[1]).length>0,i,n,r,u,s=e&&ze(t);function f(o){t[8](o)}let l={title:"This imported GeoJSON feature has unexpected properties",$$slots:{default:[pn]},$$scope:{ctx:t}};return t[0]!==void 0&&(l.open=t[0]),n=new ft({props:l}),B.push(()=>E(n,"open",f)),{c(){s&&s.c(),i=F(),q(n.$$.fragment)},m(o,a){s&&s.m(o,a),$(o,i,a),j(n,o,a),u=!0},p(o,[a]){a&2&&(e=Object.entries(o[1]).length>0),e?s?(s.p(o,a),a&2&&d(s,1)):(s=ze(o),s.c(),d(s,1),s.m(i.parentNode,i)):s&&(re(),g(s,1,1,()=>{s=null}),se());const p={};a&8195&&(p.$$scope={dirty:a,ctx:o}),!r&&a&1&&(r=!0,p.open=o[0],R(()=>r=!1)),n.$set(p)},i(o){u||(d(s),d(n.$$.fragment,o),u=!0)},o(o){g(s),g(n.$$.fragment,o),u=!1},d(o){o&&v(i),s&&s.d(o),N(n,o)}}}function mn(t,e,i){let n,{gjSchemes:r}=e,{id:u}=e,{props:s}=e,f=!1;function l(){i(0,f=!1),r.update(c=>{let h=c.features.find(M=>M.id==u);for(let M of Object.keys(n))delete h.properties[M];return c})}const o=()=>i(0,f=!0),a=()=>i(0,f=!1);function p(c){f=c,i(0,f)}return t.$$set=c=>{"gjSchemes"in c&&i(3,r=c.gjSchemes),"id"in c&&i(4,u=c.id),"props"in c&&i(5,s=c.props)},t.$$.update=()=>{t.$$.dirty&32&&i(1,n=ut(s))},[f,n,l,r,u,s,o,a,p]}class dn extends G{constructor(e){super(),D(this,e,mn,_n,H,{gjSchemes:3,id:4,props:5})}}function gn(t){let e,i,n;function r(s){t[6](s)}let u={gjSchemes:t[1]};return t[0]!==void 0&&(u.props=t[0]),e=new un({props:u}),B.push(()=>E(e,"props",r)),{c(){q(e.$$.fragment)},m(s,f){j(e,s,f),n=!0},p(s,f){const l={};f&2&&(l.gjSchemes=s[1]),!i&&f&1&&(i=!0,l.props=s[0],R(()=>i=!1)),e.$set(l)},i(s){n||(d(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function hn(t){let e,i,n;function r(s){t[5](s)}let u={gjSchemes:t[1]};return t[0]!==void 0&&(u.props=t[0]),e=new Rt({props:u}),B.push(()=>E(e,"props",r)),{c(){q(e.$$.fragment)},m(s,f){j(e,s,f),n=!0},p(s,f){const l={};f&2&&(l.gjSchemes=s[1]),!i&&f&1&&(i=!0,l.props=s[0],R(()=>i=!1)),e.$set(l)},i(s){n||(d(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function bn(t){let e,i,n,r,u,s;e=new dn({props:{gjSchemes:t[1],id:t[2],props:t[0]}});const f=[hn,gn],l=[];function o(a,p){return a[3]=="v1"?0:a[3]=="pipeline"?1:-1}return~(n=o(t))&&(r=l[n]=f[n](t)),{c(){q(e.$$.fragment),i=F(),r&&r.c(),u=ie()},m(a,p){j(e,a,p),$(a,i,p),~n&&l[n].m(a,p),$(a,u,p),s=!0},p(a,[p]){const c={};p&2&&(c.gjSchemes=a[1]),p&4&&(c.id=a[2]),p&1&&(c.props=a[0]),e.$set(c);let h=n;n=o(a),n===h?~n&&l[n].p(a,p):(r&&(re(),g(l[h],1,1,()=>{l[h]=null}),se()),~n?(r=l[n],r?r.p(a,p):(r=l[n]=f[n](a),r.c()),d(r,1),r.m(u.parentNode,u)):r=null)},i(a){s||(d(e.$$.fragment,a),d(r),s=!0)},o(a){g(e.$$.fragment,a),g(r),s=!1},d(a){a&&(v(i),v(u)),N(e,a),~n&&l[n].d(a)}}}function $n(t,e,i){let n;ve(t,ne,a=>i(3,n=a));let{cfg:r}=e,{gjSchemes:u}=e,{id:s}=e,{props:f}=e;function l(a){f=a,i(0,f)}function o(a){f=a,i(0,f)}return t.$$set=a=>{"cfg"in a&&i(4,r=a.cfg),"gjSchemes"in a&&i(1,u=a.gjSchemes),"id"in a&&i(2,s=a.id),"props"in a&&i(0,f=a.props)},[f,u,s,n,r,l,o]}class vn extends G{constructor(e){super(),D(this,e,$n,bn,H,{cfg:4,gjSchemes:1,id:2,props:0})}}function kn(t){let e,i,n;function r(s){t[3](s)}let u={label:"Scheme name",required:!0};return t[2].schemes[t[1]].scheme_name!==void 0&&(u.value=t[2].schemes[t[1]].scheme_name),e=new Fe({props:u}),B.push(()=>E(e,"value",r)),{c(){q(e.$$.fragment)},m(s,f){j(e,s,f),n=!0},p(s,[f]){const l={};!i&&f&6&&(i=!0,l.value=s[2].schemes[s[1]].scheme_name,R(()=>i=!1)),e.$set(l)},i(s){n||(d(e.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),n=!1},d(s){N(e,s)}}}function yn(t,e,i){let n,r=de,u=()=>(r(),r=ke(s,o=>i(2,n=o)),s);t.$$.on_destroy.push(()=>r());let{gjSchemes:s}=e;u();let{scheme_reference:f}=e;function l(o){t.$$.not_equal(n.schemes[f].scheme_name,o)&&(n.schemes[f].scheme_name=o,s.set(n))}return t.$$set=o=>{"gjSchemes"in o&&u(i(0,s=o.gjSchemes)),"scheme_reference"in o&&i(1,f=o.scheme_reference)},[s,f,n,l]}class wn extends G{constructor(e){super(),D(this,e,yn,kn,H,{gjSchemes:0,scheme_reference:1})}}function Sn(t){let e,i,n,r,u,s,f,l,o,a,p,c,h,M,C,O,y,_,P,U,S;e=new _e({props:{errorMessage:t[4]}});function T(w){t[6](w)}let k={label:"Scheme name",required:!0};t[5].schemes[t[1]].scheme_name!==void 0&&(k.value=t[5].schemes[t[1]].scheme_name),n=new Fe({props:k}),B.push(()=>E(n,"value",T));function Q(w){t[7](w)}let K={label:"Scheme type",choices:[["cycling route","Cycling route"],["walking route","Walking route"],["shared-use route","Shared-use route"],["cycling and walking route","Cycling and walking route, not shared use"],["area-based scheme","Area-based scheme"],["intersection","Intersection/junction scheme"]],inlineSmall:!0,required:!0};t[2].scheme_type!==void 0&&(K.value=t[2].scheme_type),o=new ce({props:K}),B.push(()=>E(o,"value",Q));function Z(w){t[8](w)}let x={label:"Type of the main intervention"};t[2].atf4_lead_type!==void 0&&(x.value=t[2].atf4_lead_type),c=new it({props:x}),B.push(()=>E(c,"value",Z));function m(w){t[9](w)}let b={label:"Scheme description (150 words max)"};return t[2].scheme_description!==void 0&&(b.value=t[2].scheme_description),C=new Ne({props:b}),B.push(()=>E(C,"value",m)),_=new rt({props:{data:t[2],required:!0,onUpdate:t[10]}}),U=new st({props:{data:t[2],onUpdate:t[11]}}),{c(){q(e.$$.fragment),i=F(),q(n.$$.fragment),u=F(),s=W("fieldset"),f=W("legend"),f.textContent="Basic information",l=F(),q(o.$$.fragment),p=F(),q(c.$$.fragment),M=F(),q(C.$$.fragment),y=F(),q(_.$$.fragment),P=F(),q(U.$$.fragment),I(f,"class","govuk-fieldset__legend"),I(s,"class","govuk-fieldset svelte-1bxyfcq")},m(w,L){j(e,w,L),$(w,i,L),j(n,w,L),$(w,u,L),$(w,s,L),A(s,f),A(s,l),j(o,s,null),A(s,p),j(c,s,null),A(s,M),j(C,s,null),$(w,y,L),j(_,w,L),$(w,P,L),j(U,w,L),S=!0},p(w,[L]){const z={};L&16&&(z.errorMessage=w[4]),e.$set(z);const X={};!r&&L&34&&(r=!0,X.value=w[5].schemes[w[1]].scheme_name,R(()=>r=!1)),n.$set(X);const Y={};!a&&L&4&&(a=!0,Y.value=w[2].scheme_type,R(()=>a=!1)),o.$set(Y);const ae={};!h&&L&4&&(h=!0,ae.value=w[2].atf4_lead_type,R(()=>h=!1)),c.$set(ae);const Me={};!O&&L&4&&(O=!0,Me.value=w[2].scheme_description,R(()=>O=!1)),C.$set(Me);const ye={};L&4&&(ye.data=w[2]),L&8&&(ye.onUpdate=w[10]),_.$set(ye);const we={};L&4&&(we.data=w[2]),L&8&&(we.onUpdate=w[11]),U.$set(we)},i(w){S||(d(e.$$.fragment,w),d(n.$$.fragment,w),d(o.$$.fragment,w),d(c.$$.fragment,w),d(C.$$.fragment,w),d(_.$$.fragment,w),d(U.$$.fragment,w),S=!0)},o(w){g(e.$$.fragment,w),g(n.$$.fragment,w),g(o.$$.fragment,w),g(c.$$.fragment,w),g(C.$$.fragment,w),g(_.$$.fragment,w),g(U.$$.fragment,w),S=!1},d(w){w&&(v(i),v(u),v(s),v(y),v(P)),N(e,w),N(n,w),N(o),N(c),N(C),N(_,w),N(U,w)}}}function qn(t,e,i){let n,r,u=de,s=()=>(u(),u=ke(f,_=>i(5,r=_)),f);t.$$.on_destroy.push(()=>u());let{gjSchemes:f}=e;s();let{scheme_reference:l}=e,o=r.schemes[l].pipeline,a=0;at(()=>{f.update(_=>(Object.hasOwn(_.schemes,l)&&(_.schemes[l].pipeline=o),_))});function p(_,P){return o.scheme_type&&o.status&&o.timescale?"":"Missing some required data"}function c(_){t.$$.not_equal(r.schemes[l].scheme_name,_)&&(r.schemes[l].scheme_name=_,f.set(r))}function h(_){t.$$.not_equal(o.scheme_type,_)&&(o.scheme_type=_,i(2,o))}function M(_){t.$$.not_equal(o.atf4_lead_type,_)&&(o.atf4_lead_type=_,i(2,o))}function C(_){t.$$.not_equal(o.scheme_description,_)&&(o.scheme_description=_,i(2,o))}const O=()=>i(3,a++,a),y=()=>i(3,a++,a);return t.$$set=_=>{"gjSchemes"in _&&s(i(0,f=_.gjSchemes)),"scheme_reference"in _&&i(1,l=_.scheme_reference)},t.$$.update=()=>{t.$$.dirty&12&&i(4,n=p())},[f,l,o,a,n,r,c,h,M,C,O,y]}class jn extends G{constructor(e){super(),D(this,e,qn,Sn,H,{gjSchemes:0,scheme_reference:1})}}function Nn(t){let e,i;return e=new wn({props:{gjSchemes:t[0],scheme_reference:t[1]}}),{c(){q(e.$$.fragment)},m(n,r){j(e,n,r),i=!0},p(n,r){const u={};r&1&&(u.gjSchemes=n[0]),r&2&&(u.scheme_reference=n[1]),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){N(e,n)}}}function Fn(t){let e,i;return e=new jn({props:{gjSchemes:t[0],scheme_reference:t[1]}}),{c(){q(e.$$.fragment)},m(n,r){j(e,n,r),i=!0},p(n,r){const u={};r&1&&(u.gjSchemes=n[0]),r&2&&(u.scheme_reference=n[1]),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){N(e,n)}}}function On(t){let e,i,n,r;const u=[Fn,Nn],s=[];function f(l,o){return l[2]=="pipeline"?0:1}return e=f(t),i=s[e]=u[e](t),{c(){i.c(),n=ie()},m(l,o){s[e].m(l,o),$(l,n,o),r=!0},p(l,[o]){let a=e;e=f(l),e===a?s[e].p(l,o):(re(),g(s[a],1,1,()=>{s[a]=null}),se(),i=s[e],i?i.p(l,o):(i=s[e]=u[e](l),i.c()),d(i,1),i.m(n.parentNode,n))},i(l){r||(d(i),r=!0)},o(l){g(i),r=!1},d(l){l&&v(n),s[e].d(l)}}}function Mn(t,e,i){let n;ve(t,ne,s=>i(2,n=s));let{gjSchemes:r}=e,{scheme_reference:u}=e;return t.$$set=s=>{"gjSchemes"in s&&i(0,r=s.gjSchemes),"scheme_reference"in s&&i(1,u=s.scheme_reference)},[r,u,n]}class Pn extends G{constructor(e){super(),D(this,e,Mn,On,H,{gjSchemes:0,scheme_reference:1})}}let Bn={interventionName:Tn,schemeName:Oe,backfill:Cn,initializeEmptyScheme:Un,interventionWarning:In,editFeatureForm:vn,editSchemeForm:Pn,newPointFeature:t=>{t.properties.intervention_type="other"},newPolygonFeature:t=>{t.properties.intervention_type="area",t.properties.is_coverage_polygon=!1},newLineStringFeature:t=>{t.properties.intervention_type="route",t.properties.route_name&&(le(ne)!="pipeline"&&(t.properties.name=t.properties.route_name),delete t.properties.route_name)},updateFeature:(t,e)=>{e.properties.route_name&&!t.properties.name&&le(ne)!="pipeline"&&(t.properties.name=e.properties.route_name)},maptilerApiKey:"MZEJTanw3WpxRvt7qDfo",getStreetViewRoadLayerNames:t=>_t(t,le(ct)),layerZorder:mt};function Cn(t){var n,r,u,s,f,l,o,a;let e=le(ne),i=1;for(let p of t.features)p.properties||(p.properties={name:"",scheme_reference:"",description:"",intervention_type:"other",is_coverage_polygon:!1}),e=="pipeline"&&!p.properties.intervention_type&&(p.properties.intervention_type=new Map([["LineString","route"],["Polygon","area"]]).get(p.geometry.type)??"other"),p.geometry.type=="LineString"&&!p.properties.length_meters&&(p.properties.length_meters=dt(p,{units:"kilometers"})*1e3),p.id=i++;if(!t.schemes){let p=ue();t.schemes={},t.schemes[p]={scheme_reference:p,color:Ue()},t.scheme_name&&(t.schemes[p].scheme_name=t.scheme_name,delete t.scheme_name),t.pipeline&&(t.schemes[p].pipeline=t.pipeline,delete t.pipeline);for(let c of t.features)c.properties.scheme_reference=p}for(let p of Object.values(t.schemes)){let c=p;if(c.color??(c.color=Ue()),e=="pipeline"){c.pipeline??(c.pipeline=lt()),(n=c.pipeline).development_funded??(n.development_funded=!1),(r=c.pipeline).construction_funded??(r.construction_funded=!1),(u=c.pipeline).funding_sources??(u.funding_sources=$e()),delete c.pipeline.budget_funded,delete c.pipeline.budget_unfunded,delete c.pipeline.funding_source,delete c.pipeline.funded;for(let h of t.features)h.properties.pipeline&&((s=h.properties.pipeline).development_funded??(s.development_funded=!1),(f=h.properties.pipeline).construction_funded??(f.construction_funded=!1),(l=h.properties.pipeline).funding_sources??(l.funding_sources=$e()),(o=h.properties.pipeline).status??(o.status=""),(a=h.properties.pipeline).timescale??(a.timescale=""))}}return t}function Un(t){let e=t;return le(ne)=="pipeline"&&(e.pipeline=lt()),e}function lt(){return{scheme_type:"",atf4_lead_type:"",scheme_description:"",status:"",timescale:"",development_funded:!1,construction_funded:!1,funding_sources:$e()}}function $e(){return{atf2:!1,atf3:!1,atf4:!1,atf4e:!1,crsts:!1,luf:!1,other:""}}function Tn(t){if(t.properties.name)return t.properties.name;var e=t.properties.intervention_type;return e=="other"&&(t.geometry.type=="Point"?e="point":t.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function Oe(t){return t.scheme_name??"Untitled scheme"}function In(t){var n;let e=le(ne);if(!t.properties.name)return"No name";if(!new Set(["route","area","crossing","other"]).has(t.properties.intervention_type))return"No intervention type";if(e=="pipeline"&&!((n=t.properties.pipeline)!=null&&n.accuracy))return"Accuracy not specified";let i=ut(t.properties);return Object.entries(i).length>0?`Extra GeoJSON properties: ${Object.keys(i).join(", ")}`:null}function ut(t){let e=le(ne),i=JSON.parse(JSON.stringify(t));for(let n of["name","description","intervention_type","length_meters","waypoints","hide_while_editing","is_coverage_polygon","scheme_reference"])delete i[n];if(e=="pipeline"&&i.pipeline){for(let n of["atf4_type","accuracy","is_alternative","budget","development_funded","construction_funded","funding_sources","status","timescale","timescale_year","year_published","year_consulted"])delete i.pipeline[n];Object.entries(i.pipeline).length==0&&delete i.pipeline}return i}export{bt as B,Fe as T,It as W,Cn as b,Bn as c};
