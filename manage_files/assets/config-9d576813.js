import{S as G,i as K,s as H,L as Ve,e as D,b as I,c as $,M as Ze,N as Ye,O as Xe,t as d,p as h,d as b,aC as ae,j as y,o as S,u as q,aH as ue,E as me,f as oe,a as N,az as V,aa as Z,x as J,m as E,G as fe,aA as xe,P as et,a5 as qe,aI as Oe,a6 as at,aJ as Ue,g as L,h as B,R as pe,Y as ie,r as R,v as ve,a9 as tt,y as se,q as re,n as de,ai as ke,J as ge,K as nt,ay as je,C as ne,D as it,_ as ct,aK as le,aF as pt}from"./index-31c14ddd.js";import{S as Ne,p as he,a as _e,C as _t,g as mt,b as dt,t as gt,r as Te}from"./colors-c3c5a000.js";function ht(t){let e,i;const n=t[1].default,s=Ve(n,t,t[0],null);return{c(){e=D("div"),s&&s.c(),I(e,"class","govuk-button-group")},m(u,r){$(u,e,r),s&&s.m(e,null),i=!0},p(u,[r]){s&&s.p&&(!i||r&1)&&Ze(s,n,u,u[0],i?Xe(n,u[0],r,null):Ye(u[0]),null)},i(u){i||(d(s,u),i=!0)},o(u){h(s,u),i=!1},d(u){u&&b(e),s&&s.d(u)}}}function $t(t,e,i){let{$$slots:n={},$$scope:s}=e;return t.$$set=u=>{"$$scope"in u&&i(0,s=u.$$scope)},[s,n]}class bt extends G{constructor(e){super(),K(this,e,$t,ht,H,{})}}function Ie(t){let e,i,n=$e(t[0])+"",s;return{c(){e=D("div"),i=J("Â£"),s=J(n),I(e,"class","govuk-hint")},m(u,r){$(u,e,r),E(e,i),E(e,s)},p(u,r){r&1&&n!==(n=$e(u[0])+"")&&fe(s,n)},d(u){u&&b(e)}}}function vt(t){let e;return{c(){e=J("multiply by 1 million")},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function kt(t){let e,i,n,s,u,r,f,l,a;e=new me({props:{errorMessage:Ae(t[2])}});let o=t[0]!=null&&Ie(t);return r=new oe({props:{disabled:t[0]==null||t[0]>1e3,$$slots:{default:[vt]},$$scope:{ctx:t}}}),r.$on("click",t[4]),{c(){y(e.$$.fragment),i=N(),o&&o.c(),n=N(),s=D("input"),u=N(),y(r.$$.fragment),I(s,"type","text"),I(s,"inputmode","numeric"),I(s,"class","govuk-input govuk-input--width-10"),I(s,"id",t[3])},m(p,c){S(e,p,c),$(p,i,c),o&&o.m(p,c),$(p,n,c),$(p,s,c),V(s,t[2]),$(p,u,c),S(r,p,c),f=!0,l||(a=Z(s,"input",t[5]),l=!0)},p(p,c){const m={};c&4&&(m.errorMessage=Ae(p[2])),e.$set(m),p[0]!=null?o?o.p(p,c):(o=Ie(p),o.c(),o.m(n.parentNode,n)):o&&(o.d(1),o=null),c&4&&s.value!==p[2]&&V(s,p[2]);const j={};c&1&&(j.disabled=p[0]==null||p[0]>1e3),c&128&&(j.$$scope={dirty:c,ctx:p}),r.$set(j)},i(p){f||(d(e.$$.fragment,p),d(r.$$.fragment,p),f=!0)},o(p){h(e.$$.fragment,p),h(r.$$.fragment,p),f=!1},d(p){p&&(b(i),b(n),b(s),b(u)),q(e,p),o&&o.d(p),q(r,p),l=!1,a()}}}function wt(t){let e,i;return e=new ae({props:{label:t[1],id:t[3],$$slots:{default:[kt]},$$scope:{ctx:t}}}),{c(){y(e.$$.fragment)},m(n,s){S(e,n,s),i=!0},p(n,[s]){const u={};s&2&&(u.label=n[1]),s&133&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){h(e.$$.fragment,n),i=!1},d(n){q(e,n)}}}function st(t){if(t!="")return parseFloat(t.replaceAll(",",""))}function Ae(t){let e=st(t);return e==null?"":isNaN(e)?"Please enter a valid number":e<0?"Please enter a positive number":""}function $e(t){return t.toLocaleString()}function yt(t,e,i){let{label:n}=e,{value:s}=e,u=ue(),r=s==null?"":$e(s);function f(o){i(0,s=st(o))}function l(){i(2,r=$e(s*1e6))}function a(){r=this.value,i(2,r)}return t.$$set=o=>{"label"in o&&i(1,n=o.label),"value"in o&&i(0,s=o.value)},t.$$.update=()=>{t.$$.dirty&4&&f(r)},[s,n,r,u,l,a]}class St extends G{constructor(e){super(),K(this,e,yt,wt,H,{label:1,value:0})}}function qt(t){let e,i,n,s,u,r,f;return e=new me({props:{errorMessage:t[5](t[2])}}),{c(){y(e.$$.fragment),i=N(),n=D("input"),I(n,"type","text"),I(n,"inputmode","numeric"),I(n,"class",s=`govuk-input govuk-input--width-${t[1]}`),I(n,"id",t[3])},m(l,a){S(e,l,a),$(l,i,a),$(l,n,a),V(n,t[2]),u=!0,r||(f=[Z(n,"input",t[9]),Z(n,"change",t[4])],r=!0)},p(l,a){const o={};a&4&&(o.errorMessage=l[5](l[2])),e.$set(o),(!u||a&2&&s!==(s=`govuk-input govuk-input--width-${l[1]}`))&&I(n,"class",s),a&4&&n.value!==l[2]&&V(n,l[2])},i(l){u||(d(e.$$.fragment,l),u=!0)},o(l){h(e.$$.fragment,l),u=!1},d(l){l&&(b(i),b(n)),q(e,l),r=!1,xe(f)}}}function jt(t){let e,i;return e=new ae({props:{label:t[0],id:t[3],$$slots:{default:[qt]},$$scope:{ctx:t}}}),{c(){y(e.$$.fragment)},m(n,s){S(e,n,s),i=!0},p(n,[s]){const u={};s&1&&(u.label=n[0]),s&1030&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){h(e.$$.fragment,n),i=!1},d(n){q(e,n)}}}function Nt(t,e,i){let{label:n}=e,{value:s}=e,{width:u}=e,{min:r=void 0}=e,{max:f=void 0}=e,l=s==null?void 0:s.toString(),a=ue();function o(){i(6,s=l==null?void 0:parseInt(l,10))}function p(m){if(m==""||m==null)return"";if(m.includes("."))return"Please enter a number without decimals";let j=Number(m);return isNaN(j)?"Please enter a valid number":r!=null&&j<r?`Please enter a number that's at least ${r};`:f!=null&&j>f?`Please enter a number that's at most ${f};`:""}function c(){l=this.value,i(2,l)}return t.$$set=m=>{"label"in m&&i(0,n=m.label),"value"in m&&i(6,s=m.value),"width"in m&&i(1,u=m.width),"min"in m&&i(7,r=m.min),"max"in m&&i(8,f=m.max)},[n,u,l,a,o,p,s,r,f,c]}class Se extends G{constructor(e){super(),K(this,e,Nt,jt,H,{label:0,value:6,width:1,min:7,max:8})}}function Ee(t){let e,i;return{c(){e=D("div"),i=J(t[2]),I(e,"class","govuk-hint")},m(n,s){$(n,e,s),E(e,i)},p(n,s){s&4&&fe(i,n[2])},d(n){n&&b(e)}}}function Pt(t){let e,i,n,s,u,r,f;e=new me({props:{errorMessage:t[4]}});let l=t[2]&&Ee(t);return{c(){y(e.$$.fragment),i=N(),l&&l.c(),n=N(),s=D("textarea"),I(s,"class","govuk-textarea"),I(s,"id",t[5]),I(s,"rows",t[3])},m(a,o){S(e,a,o),$(a,i,o),l&&l.m(a,o),$(a,n,o),$(a,s,o),V(s,t[0]),u=!0,r||(f=Z(s,"input",t[6]),r=!0)},p(a,o){const p={};o&16&&(p.errorMessage=a[4]),e.$set(p),a[2]?l?l.p(a,o):(l=Ee(a),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),(!u||o&8)&&I(s,"rows",a[3]),o&1&&V(s,a[0])},i(a){u||(d(e.$$.fragment,a),u=!0)},o(a){h(e.$$.fragment,a),u=!1},d(a){a&&(b(i),b(n),b(s)),q(e,a),l&&l.d(a),r=!1,f()}}}function Ft(t){let e,i;return e=new ae({props:{label:t[1],id:t[5],$$slots:{default:[Pt]},$$scope:{ctx:t}}}),{c(){y(e.$$.fragment)},m(n,s){S(e,n,s),i=!0},p(n,[s]){const u={};s&2&&(u.label=n[1]),s&157&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){h(e.$$.fragment,n),i=!1},d(n){q(e,n)}}}function Mt(t,e,i){let{label:n}=e,{hint:s=""}=e,{value:u}=e,{rows:r=5}=e,{errorMessage:f=""}=e,l=ue();function a(){u=this.value,i(0,u)}return t.$$set=o=>{"label"in o&&i(1,n=o.label),"hint"in o&&i(2,s=o.hint),"value"in o&&i(0,u=o.value),"rows"in o&&i(3,r=o.rows),"errorMessage"in o&&i(4,f=o.errorMessage)},[u,n,s,r,f,l,a]}class Pe extends G{constructor(e){super(),K(this,e,Mt,Ft,H,{label:1,hint:2,value:0,rows:3,errorMessage:4})}}function Ct(t){let e,i,n,s,u,r;return e=new me({props:{errorMessage:t[2]}}),{c(){y(e.$$.fragment),i=N(),n=D("input"),I(n,"type","text"),I(n,"class","govuk-input"),I(n,"id",t[3])},m(f,l){S(e,f,l),$(f,i,l),$(f,n,l),V(n,t[0]),s=!0,u||(r=[Z(n,"input",t[6]),Z(n,"change",t[5])],u=!0)},p(f,l){const a={};l&4&&(a.errorMessage=f[2]),e.$set(a),l&1&&n.value!==f[0]&&V(n,f[0])},i(f){s||(d(e.$$.fragment,f),s=!0)},o(f){h(e.$$.fragment,f),s=!1},d(f){f&&(b(i),b(n)),q(e,f),u=!1,xe(r)}}}function Ot(t){let e,i;return e=new ae({props:{label:t[1],id:t[3],$$slots:{default:[Ct]},$$scope:{ctx:t}}}),{c(){y(e.$$.fragment)},m(n,s){S(e,n,s),i=!0},p(n,[s]){const u={};s&2&&(u.label=n[1]),s&133&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){h(e.$$.fragment,n),i=!1},d(n){q(e,n)}}}function Ut(t,e,i){let n,{label:s}=e,{value:u}=e,{required:r=!1}=e,f=ue();function l(o){et.call(this,t,o)}function a(){u=this.value,i(0,u)}return t.$$set=o=>{"label"in o&&i(1,s=o.label),"value"in o&&i(0,u=o.value),"required"in o&&i(4,r=o.required)},t.$$.update=()=>{t.$$.dirty&17&&i(2,n=r&&(u==null||u=="")?"Required":"")},[u,s,n,f,r,l,a]}class Fe extends G{constructor(e){super(),K(this,e,Ut,Ot,H,{label:1,value:0,required:4})}}function Tt(t){let e,i,n,s;const u=t[2].default,r=Ve(u,t,t[1],null);let f=[{type:"button"},{class:"govuk-button govuk-button--warning"},{"data-module":"govuk-button"},t[0]],l={};for(let a=0;a<f.length;a+=1)l=qe(l,f[a]);return{c(){e=D("button"),r&&r.c(),Oe(e,l)},m(a,o){$(a,e,o),r&&r.m(e,null),e.autofocus&&e.focus(),i=!0,n||(s=Z(e,"click",t[3]),n=!0)},p(a,[o]){r&&r.p&&(!i||o&2)&&Ze(r,u,a,a[1],i?Xe(u,a[1],o,null):Ye(a[1]),null),Oe(e,l=at(f,[{type:"button"},{class:"govuk-button govuk-button--warning"},{"data-module":"govuk-button"},o&1&&a[0]]))},i(a){i||(d(r,a),i=!0)},o(a){h(r,a),i=!1},d(a){a&&b(e),r&&r.d(a),n=!1,s()}}}function It(t,e,i){let{$$slots:n={},$$scope:s}=e;function u(r){et.call(this,t,r)}return t.$$set=r=>{i(0,e=qe(qe({},e),Ue(r))),"$$scope"in r&&i(1,s=r.$$scope)},e=Ue(e),[e,s,n,u]}class At extends G{constructor(e){super(),K(this,e,It,Tt,H,{})}}function Le(t){let e,i;return e=new oe({props:{disabled:!t[2],$$slots:{default:[Et]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){y(e.$$.fragment)},m(n,s){S(e,n,s),i=!0},p(n,s){const u={};s&4&&(u.disabled=!n[2]),s&4096&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){h(e.$$.fragment,n),i=!1},d(n){q(e,n)}}}function Et(t){let e;return{c(){e=J("Auto-fill")},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function Lt(t){let e,i,n,s,u,r,f=t[0].length_meters&&Le(t);return{c(){e=D("input"),i=N(),f&&f.c(),n=ie(),I(e,"type","text"),I(e,"class","govuk-input"),I(e,"id",t[5])},m(l,a){$(l,e,a),V(e,t[0].name),$(l,i,a),f&&f.m(l,a),$(l,n,a),s=!0,u||(r=Z(e,"input",t[6]),u=!0)},p(l,a){a&1&&e.value!==l[0].name&&V(e,l[0].name),l[0].length_meters?f?(f.p(l,a),a&1&&d(f,1)):(f=Le(l),f.c(),d(f,1),f.m(n.parentNode,n)):f&&(se(),h(f,1,1,()=>{f=null}),re())},i(l){s||(d(f),s=!0)},o(l){h(f),s=!1},d(l){l&&(b(e),b(i),b(n)),f&&f.d(l),u=!1,r()}}}function Be(t){let e,i,n=he(t[0].length_meters)+"",s;return{c(){e=D("p"),i=J("Length: "),s=J(n)},m(u,r){$(u,e,r),E(e,i),E(e,s)},p(u,r){r&1&&n!==(n=he(u[0].length_meters)+"")&&fe(s,n)},d(u){u&&b(e)}}}function Bt(t){let e,i,n,s,u,r,f,l,a,o,p,c,m;e=new ae({props:{label:"Name",id:t[5],$$slots:{default:[Lt]},$$scope:{ctx:t}}});function j(_){t[9](_)}let A={label:"Scheme",choices:Object.values(t[3].schemes).map(t[8])};t[0].scheme_reference!==void 0&&(A.value=t[0].scheme_reference),n=new Ne({props:A}),L.push(()=>B(n,"value",j));function P(_){t[10](_)}let v={label:"Type",choices:[["area","Area"],["route","Route"],["crossing","Crossing"],["other","Other"]],inlineSmall:!0,required:!0};t[0].intervention_type!==void 0&&(v.value=t[0].intervention_type),r=new pe({props:v}),L.push(()=>B(r,"value",P));function k(_){t[11](_)}let M={label:"Description"};t[0].description!==void 0&&(M.value=t[0].description),a=new Pe({props:M}),L.push(()=>B(a,"value",k));let O=t[0].length_meters&&Be(t);return{c(){y(e.$$.fragment),i=N(),y(n.$$.fragment),u=N(),y(r.$$.fragment),l=N(),y(a.$$.fragment),p=N(),O&&O.c(),c=ie()},m(_,g){S(e,_,g),$(_,i,g),S(n,_,g),$(_,u,g),S(r,_,g),$(_,l,g),S(a,_,g),$(_,p,g),O&&O.m(_,g),$(_,c,g),m=!0},p(_,[g]){const T={};g&4101&&(T.$$scope={dirty:g,ctx:_}),e.$set(T);const U={};g&8&&(U.choices=Object.values(_[3].schemes).map(_[8])),!s&&g&1&&(s=!0,U.value=_[0].scheme_reference,R(()=>s=!1)),n.$set(U);const z={};!f&&g&1&&(f=!0,z.value=_[0].intervention_type,R(()=>f=!1)),r.$set(z);const Q={};!o&&g&1&&(o=!0,Q.value=_[0].description,R(()=>o=!1)),a.$set(Q),_[0].length_meters?O?O.p(_,g):(O=Be(_),O.c(),O.m(c.parentNode,c)):O&&(O.d(1),O=null)},i(_){m||(d(e.$$.fragment,_),d(n.$$.fragment,_),d(r.$$.fragment,_),d(a.$$.fragment,_),m=!0)},o(_){h(e.$$.fragment,_),h(n.$$.fragment,_),h(r.$$.fragment,_),h(a.$$.fragment,_),m=!1},d(_){_&&(b(i),b(u),b(l),b(p),b(c)),q(e,_),q(n,_),q(r,_),q(a,_),O&&O.d(_)}}}function Rt(t,e,i){let n,s,u=de,r=()=>(u(),u=ke(f,v=>i(3,s=v)),f);ve(t,tt,v=>i(2,n=v)),t.$$.on_destroy.push(()=>u());let{gjSchemes:f}=e;r();let{props:l}=e;function a(){try{i(0,l.name=n.inner.routeNameForWaypoints(l.waypoints),l)}catch(v){window.alert(`Couldn't auto-name route: ${v}`)}}let o=ue();function p(){l.name=this.value,i(0,l)}const c=()=>a(),m=v=>[v.scheme_reference,Me(v)];function j(v){t.$$.not_equal(l.scheme_reference,v)&&(l.scheme_reference=v,i(0,l))}function A(v){t.$$.not_equal(l.intervention_type,v)&&(l.intervention_type=v,i(0,l))}function P(v){t.$$.not_equal(l.description,v)&&(l.description=v,i(0,l))}return t.$$set=v=>{"gjSchemes"in v&&r(i(1,f=v.gjSchemes)),"props"in v&&i(0,l=v.props)},[l,f,n,s,a,o,p,c,m,j,A,P]}class Wt extends G{constructor(e){super(),K(this,e,Rt,Bt,H,{gjSchemes:1,props:0})}}function Jt(t){let e,i,n;function s(r){t[2](r)}let u={label:t[1],choices:[x("New segregated cycling facility"),x("New junction treatment"),x("New permanent footway"),["New shared use facilities","New shared use (walking and cycling) facilities"],["Improvements to existing route","Improvements to make an existing walking/cycle route safer"],["Area-wide traffic management","Area-wide traffic management (including by TROs - both permanent and experimental)"],["Bus priority measures","Bus priority measures that also enable active travel (for example, bus gates)"],["Secure cycle parking","Provision of secure cycle parking facilities"],x("New road crossings"),x("Restriction or reduction of car parking availability"),x("School streets"),x("Quiet mixed traffic streets"),x("Traffic free routes"),x("Not specified in LCWIP")],emptyOption:!0};return t[0]!==void 0&&(u.value=t[0]),e=new Ne({props:u}),L.push(()=>B(e,"value",s)),{c(){y(e.$$.fragment)},m(r,f){S(e,r,f),n=!0},p(r,[f]){const l={};f&2&&(l.label=r[1]),!i&&f&1&&(i=!0,l.value=r[0],R(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function x(t){return[t,t]}function Dt(t,e,i){let{label:n}=e,{value:s}=e;function u(r){s=r,i(0,s)}return t.$$set=r=>{"label"in r&&i(1,n=r.label),"value"in r&&i(0,s=r.value)},[s,n,u]}class rt extends G{constructor(e){super(),K(this,e,Dt,Jt,H,{label:1,value:0})}}function Gt(t){let e,i,n,s,u,r,f,l,a,o,p,c,m,j,A,P,v,k;function M(F){t[3](F)}let O={label:"Status",choices:[["","Unknown"],["aspiration","Aspiration"],["planned","Planned"],["in development","In development"],["in construction","In construction"],["completed","Completed"]],inlineSmall:!0,required:t[1]};t[0].status!==void 0&&(O.value=t[0].status),s=new pe({props:O}),L.push(()=>B(s,"value",M));function _(F){t[4](F)}let g={label:"Timescale",choices:[["","Unknown"],["short","Short (1-3 years)"],["medium","Medium (3-6 years)"],["long","Long (6-10 years)"]],inlineSmall:!0,required:t[1]};t[0].timescale!==void 0&&(g.value=t[0].timescale),f=new pe({props:g}),L.push(()=>B(f,"value",_));function T(F){t[5](F)}let U={label:"Estimated completion year (if known)",width:4,min:2010,max:2100};t[0].timescale_year!==void 0&&(U.value=t[0].timescale_year),o=new Se({props:U}),L.push(()=>B(o,"value",T));function z(F){t[6](F)}let Q={label:"What year was this scheme most recently published?",width:4,min:2010,max:2100};t[0].year_published!==void 0&&(Q.value=t[0].year_published),m=new Se({props:Q}),L.push(()=>B(m,"value",z));function Y(F){t[7](F)}let C={label:"What year was this scheme most recently consulted on?",width:4,min:2010,max:2100};return t[0].year_consulted!==void 0&&(C.value=t[0].year_consulted),P=new Se({props:C}),L.push(()=>B(P,"value",Y)),{c(){e=D("fieldset"),i=D("legend"),i.textContent="Timing and status",n=N(),y(s.$$.fragment),r=N(),y(f.$$.fragment),a=N(),y(o.$$.fragment),c=N(),y(m.$$.fragment),A=N(),y(P.$$.fragment),I(i,"class","govuk-fieldset__legend"),I(e,"class","govuk-fieldset svelte-1bxyfcq")},m(F,w){$(F,e,w),E(e,i),E(e,n),S(s,e,null),E(e,r),S(f,e,null),E(e,a),S(o,e,null),E(e,c),S(m,e,null),E(e,A),S(P,e,null),k=!0},p(F,[w]){const W={};w&2&&(W.required=F[1]),!u&&w&1&&(u=!0,W.value=F[0].status,R(()=>u=!1)),s.$set(W);const X={};w&2&&(X.required=F[1]),!l&&w&1&&(l=!0,X.value=F[0].timescale,R(()=>l=!1)),f.$set(X);const ee={};!p&&w&1&&(p=!0,ee.value=F[0].timescale_year,R(()=>p=!1)),o.$set(ee);const te={};!j&&w&1&&(j=!0,te.value=F[0].year_published,R(()=>j=!1)),m.$set(te);const ce={};!v&&w&1&&(v=!0,ce.value=F[0].year_consulted,R(()=>v=!1)),P.$set(ce)},i(F){k||(d(s.$$.fragment,F),d(f.$$.fragment,F),d(o.$$.fragment,F),d(m.$$.fragment,F),d(P.$$.fragment,F),k=!0)},o(F){h(s.$$.fragment,F),h(f.$$.fragment,F),h(o.$$.fragment,F),h(m.$$.fragment,F),h(P.$$.fragment,F),k=!1},d(F){F&&b(e),q(s),q(f),q(o),q(m),q(P)}}}function Kt(t,e,i){let{data:n}=e,{required:s}=e,{onUpdate:u}=e;function r(c){u()}function f(c){t.$$.not_equal(n.status,c)&&(n.status=c,i(0,n))}function l(c){t.$$.not_equal(n.timescale,c)&&(n.timescale=c,i(0,n))}function a(c){t.$$.not_equal(n.timescale_year,c)&&(n.timescale_year=c,i(0,n))}function o(c){t.$$.not_equal(n.year_published,c)&&(n.year_published=c,i(0,n))}function p(c){t.$$.not_equal(n.year_consulted,c)&&(n.year_consulted=c,i(0,n))}return t.$$set=c=>{"data"in c&&i(0,n=c.data),"required"in c&&i(1,s=c.required),"onUpdate"in c&&i(2,u=c.onUpdate)},t.$$.update=()=>{t.$$.dirty&1&&r()},[n,s,u,f,l,a,o,p]}class lt extends G{constructor(e){super(),K(this,e,Kt,Gt,H,{data:0,required:1,onUpdate:2})}}function Re(t,e,i){const n=t.slice();return n[9]=e[i],n[10]=e,n[11]=i,n}function Ht(t){let e;return{c(){e=J("Is the development fully funded?")},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function zt(t){let e;return{c(){e=J("Is the construction fully funded?")},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function Qt(t){let e,i,n;function s(r){t[6](r,t[9])}let u={$$slots:{default:[Vt]},$$scope:{ctx:t}};return t[0].funding_sources[t[9]]!==void 0&&(u.checked=t[0].funding_sources[t[9]]),e=new _e({props:u}),L.push(()=>B(e,"checked",s)),{c(){y(e.$$.fragment)},m(r,f){S(e,r,f),n=!0},p(r,f){t=r;const l={};f&4096&&(l.$$scope={dirty:f,ctx:t}),!i&&f&3&&(i=!0,l.checked=t[0].funding_sources[t[9]],R(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function Vt(t){let e=t[9].toUpperCase()+"",i,n;return{c(){i=J(e),n=N()},m(s,u){$(s,i,u),$(s,n,u)},p:de,d(s){s&&(b(i),b(n))}}}function We(t){let e,i,n=t[9]!="other"&&Qt(t);return{c(){n&&n.c(),e=ie()},m(s,u){n&&n.m(s,u),$(s,e,u),i=!0},p(s,u){s[9]!="other"&&n.p(s,u)},i(s){i||(d(n),i=!0)},o(s){h(n),i=!1},d(s){s&&b(e),n&&n.d(s)}}}function Zt(t){let e,i,n=ge(t[1]),s=[];for(let r=0;r<n.length;r+=1)s[r]=We(Re(t,n,r));const u=r=>h(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=ie()},m(r,f){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(r,f);$(r,e,f),i=!0},p(r,f){if(f&3){n=ge(r[1]);let l;for(l=0;l<n.length;l+=1){const a=Re(r,n,l);s[l]?(s[l].p(a,f),d(s[l],1)):(s[l]=We(a),s[l].c(),d(s[l],1),s[l].m(e.parentNode,e))}for(se(),l=n.length;l<s.length;l+=1)u(l);re()}},i(r){if(!i){for(let f=0;f<n.length;f+=1)d(s[f]);i=!0}},o(r){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)h(s[f]);i=!1},d(r){r&&b(e),nt(s,r)}}}function Yt(t){let e,i,n,s,u,r,f,l,a,o,p,c,m,j,A,P,v,k,M;function O(C){t[3](C)}let _={label:"Cost (GBP)"};t[0].budget!==void 0&&(_.value=t[0].budget),s=new St({props:_}),L.push(()=>B(s,"value",O));function g(C){t[4](C)}let T={$$slots:{default:[Ht]},$$scope:{ctx:t}};t[0].development_funded!==void 0&&(T.checked=t[0].development_funded),f=new _e({props:T}),L.push(()=>B(f,"checked",g));function U(C){t[5](C)}let z={$$slots:{default:[zt]},$$scope:{ctx:t}};t[0].construction_funded!==void 0&&(z.checked=t[0].construction_funded),o=new _e({props:z}),L.push(()=>B(o,"checked",U)),A=new _t({props:{$$slots:{default:[Zt]},$$scope:{ctx:t}}});function Q(C){t[7](C)}let Y={label:"Other funding sources"};return t[0].funding_sources.other!==void 0&&(Y.value=t[0].funding_sources.other),v=new Fe({props:Y}),L.push(()=>B(v,"value",Q)),{c(){e=D("fieldset"),i=D("legend"),i.textContent="Budget",n=N(),y(s.$$.fragment),r=N(),y(f.$$.fragment),a=N(),y(o.$$.fragment),c=N(),m=D("p"),m.textContent="Funding sources",j=N(),y(A.$$.fragment),P=N(),y(v.$$.fragment),I(i,"class","govuk-fieldset__legend"),I(e,"class","govuk-fieldset svelte-1bxyfcq")},m(C,F){$(C,e,F),E(e,i),E(e,n),S(s,e,null),E(e,r),S(f,e,null),E(e,a),S(o,e,null),E(e,c),E(e,m),E(e,j),S(A,e,null),E(e,P),S(v,e,null),M=!0},p(C,[F]){const w={};!u&&F&1&&(u=!0,w.value=C[0].budget,R(()=>u=!1)),s.$set(w);const W={};F&4096&&(W.$$scope={dirty:F,ctx:C}),!l&&F&1&&(l=!0,W.checked=C[0].development_funded,R(()=>l=!1)),f.$set(W);const X={};F&4096&&(X.$$scope={dirty:F,ctx:C}),!p&&F&1&&(p=!0,X.checked=C[0].construction_funded,R(()=>p=!1)),o.$set(X);const ee={};F&4097&&(ee.$$scope={dirty:F,ctx:C}),A.$set(ee);const te={};!k&&F&1&&(k=!0,te.value=C[0].funding_sources.other,R(()=>k=!1)),v.$set(te)},i(C){M||(d(s.$$.fragment,C),d(f.$$.fragment,C),d(o.$$.fragment,C),d(A.$$.fragment,C),d(v.$$.fragment,C),M=!0)},o(C){h(s.$$.fragment,C),h(f.$$.fragment,C),h(o.$$.fragment,C),h(A.$$.fragment,C),h(v.$$.fragment,C),M=!1},d(C){C&&b(e),q(s),q(f),q(o),q(A),q(v)}}}function Xt(t,e,i){let{data:n}=e,{onUpdate:s}=e;function u(c){s()}let r=["atf2","atf3","atf4","atf4e","crsts","luf"];function f(c){t.$$.not_equal(n.budget,c)&&(n.budget=c,i(0,n))}function l(c){t.$$.not_equal(n.development_funded,c)&&(n.development_funded=c,i(0,n))}function a(c){t.$$.not_equal(n.construction_funded,c)&&(n.construction_funded=c,i(0,n))}function o(c,m){t.$$.not_equal(n.funding_sources[m],c)&&(n.funding_sources[m]=c,i(0,n))}function p(c){t.$$.not_equal(n.funding_sources.other,c)&&(n.funding_sources.other=c,i(0,n))}return t.$$set=c=>{"data"in c&&i(0,n=c.data),"onUpdate"in c&&i(2,s=c.onUpdate)},t.$$.update=()=>{t.$$.dirty&1&&u()},[n,r,s,f,l,a,o,p]}class ut extends G{constructor(e){super(),K(this,e,Xt,Yt,H,{data:0,onUpdate:2})}}function Je(t){let e,i;return e=new oe({props:{disabled:!t[2],$$slots:{default:[xt]},$$scope:{ctx:t}}}),e.$on("click",t[8]),{c(){y(e.$$.fragment)},m(n,s){S(e,n,s),i=!0},p(n,s){const u={};s&4&&(u.disabled=!n[2]),s&65536&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){h(e.$$.fragment,n),i=!1},d(n){q(e,n)}}}function xt(t){let e;return{c(){e=J("Auto-fill with street names")},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function en(t){let e,i,n,s,u,r,f,l,a=t[0].length_meters&&Je(t);return{c(){e=D("div"),e.textContent="Use the name from the LCWIP if possible",i=N(),n=D("input"),s=N(),a&&a.c(),u=ie(),I(e,"class","govuk-hint"),I(n,"type","text"),I(n,"class","govuk-input"),I(n,"id",t[6])},m(o,p){$(o,e,p),$(o,i,p),$(o,n,p),V(n,t[0].name),$(o,s,p),a&&a.m(o,p),$(o,u,p),r=!0,f||(l=Z(n,"input",t[7]),f=!0)},p(o,p){p&1&&n.value!==o[0].name&&V(n,o[0].name),o[0].length_meters?a?(a.p(o,p),p&1&&d(a,1)):(a=Je(o),a.c(),d(a,1),a.m(u.parentNode,u)):a&&(se(),h(a,1,1,()=>{a=null}),re())},i(o){r||(d(a),r=!0)},o(o){h(a),r=!1},d(o){o&&(b(e),b(i),b(n),b(s),b(u)),a&&a.d(o),f=!1,l()}}}function De(t){let e,i,n=he(t[0].length_meters)+"",s;return{c(){e=D("p"),i=J("Length: "),s=J(n)},m(u,r){$(u,e,r),E(e,i),E(e,s)},p(u,r){r&1&&n!==(n=he(u[0].length_meters)+"")&&fe(s,n)},d(u){u&&b(e)}}}function Ge(t){let e,i,n,s,u,r,f,l,a,o,p,c,m,j;function A(g){t[12](g)}let P={label:"Type"};t[0].pipeline.atf4_type!==void 0&&(P.value=t[0].pipeline.atf4_type),e=new rt({props:P}),L.push(()=>B(e,"value",A));function v(g){t[13](g)}let k={label:"Accuracy of mapped data",choices:[["high","High"],["medium","Medium"],["low","Low"]],required:!0,inlineSmall:!0};t[0].pipeline.accuracy!==void 0&&(k.value=t[0].pipeline.accuracy),s=new pe({props:k}),L.push(()=>B(s,"value",v));function M(g){t[14](g)}let O={$$slots:{default:[tn]},$$scope:{ctx:t}};t[0].pipeline.is_alternative!==void 0&&(O.checked=t[0].pipeline.is_alternative),f=new _e({props:O}),L.push(()=>B(f,"checked",M));let _=t[4]&&t[0].is_coverage_polygon!==void 0&&Ke(t);return p=new lt({props:{data:t[0].pipeline,required:!1,onUpdate:rn}}),m=new ut({props:{data:t[0].pipeline,onUpdate:ln}}),{c(){y(e.$$.fragment),n=N(),y(s.$$.fragment),r=N(),y(f.$$.fragment),a=N(),_&&_.c(),o=N(),y(p.$$.fragment),c=N(),y(m.$$.fragment)},m(g,T){S(e,g,T),$(g,n,T),S(s,g,T),$(g,r,T),S(f,g,T),$(g,a,T),_&&_.m(g,T),$(g,o,T),S(p,g,T),$(g,c,T),S(m,g,T),j=!0},p(g,T){const U={};!i&&T&1&&(i=!0,U.value=g[0].pipeline.atf4_type,R(()=>i=!1)),e.$set(U);const z={};!u&&T&1&&(u=!0,z.value=g[0].pipeline.accuracy,R(()=>u=!1)),s.$set(z);const Q={};T&65536&&(Q.$$scope={dirty:T,ctx:g}),!l&&T&1&&(l=!0,Q.checked=g[0].pipeline.is_alternative,R(()=>l=!1)),f.$set(Q),g[4]&&g[0].is_coverage_polygon!==void 0?_?(_.p(g,T),T&1&&d(_,1)):(_=Ke(g),_.c(),d(_,1),_.m(o.parentNode,o)):_&&(se(),h(_,1,1,()=>{_=null}),re());const Y={};T&1&&(Y.data=g[0].pipeline),p.$set(Y);const C={};T&1&&(C.data=g[0].pipeline),m.$set(C)},i(g){j||(d(e.$$.fragment,g),d(s.$$.fragment,g),d(f.$$.fragment,g),d(_),d(p.$$.fragment,g),d(m.$$.fragment,g),j=!0)},o(g){h(e.$$.fragment,g),h(s.$$.fragment,g),h(f.$$.fragment,g),h(_),h(p.$$.fragment,g),h(m.$$.fragment,g),j=!1},d(g){g&&(b(n),b(r),b(a),b(o),b(c)),q(e,g),q(s,g),q(f,g),_&&_.d(g),q(p,g),q(m,g)}}}function tn(t){let e;return{c(){e=J("Is this an alternative route and not the default option?")},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function Ke(t){let e,i,n;function s(r){t[15](r)}let u={$$slots:{default:[nn]},$$scope:{ctx:t}};return t[0].is_coverage_polygon!==void 0&&(u.checked=t[0].is_coverage_polygon),e=new _e({props:u}),L.push(()=>B(e,"checked",s)),{c(){y(e.$$.fragment)},m(r,f){S(e,r,f),n=!0},p(r,f){const l={};f&65536&&(l.$$scope={dirty:f,ctx:r}),!i&&f&1&&(i=!0,l.checked=r[0].is_coverage_polygon,R(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function nn(t){let e;return{c(){e=J(`Does this polygon show the coverage of the scheme? (All area considered
      while making the scheme)`)},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function sn(t){let e,i,n,s,u,r,f,l,a,o,p;e=new ae({props:{label:"Name",id:t[6],$$slots:{default:[en]},$$scope:{ctx:t}}});function c(k){t[10](k)}let m={label:"Scheme",choices:Object.values(t[3].schemes).map(t[9])};t[0].scheme_reference!==void 0&&(m.value=t[0].scheme_reference),n=new Ne({props:m}),L.push(()=>B(n,"value",c));function j(k){t[11](k)}let A={label:"Description"};t[0].description!==void 0&&(A.value=t[0].description),r=new Pe({props:A}),L.push(()=>B(r,"value",j));let P=t[0].length_meters&&De(t),v=t[0].pipeline&&Ge(t);return{c(){y(e.$$.fragment),i=N(),y(n.$$.fragment),u=N(),y(r.$$.fragment),l=N(),P&&P.c(),a=N(),v&&v.c(),o=ie()},m(k,M){S(e,k,M),$(k,i,M),S(n,k,M),$(k,u,M),S(r,k,M),$(k,l,M),P&&P.m(k,M),$(k,a,M),v&&v.m(k,M),$(k,o,M),p=!0},p(k,[M]){const O={};M&65541&&(O.$$scope={dirty:M,ctx:k}),e.$set(O);const _={};M&8&&(_.choices=Object.values(k[3].schemes).map(k[9])),!s&&M&1&&(s=!0,_.value=k[0].scheme_reference,R(()=>s=!1)),n.$set(_);const g={};!f&&M&1&&(f=!0,g.value=k[0].description,R(()=>f=!1)),r.$set(g),k[0].length_meters?P?P.p(k,M):(P=De(k),P.c(),P.m(a.parentNode,a)):P&&(P.d(1),P=null),k[0].pipeline?v?(v.p(k,M),M&1&&d(v,1)):(v=Ge(k),v.c(),d(v,1),v.m(o.parentNode,o)):v&&(se(),h(v,1,1,()=>{v=null}),re())},i(k){p||(d(e.$$.fragment,k),d(n.$$.fragment,k),d(r.$$.fragment,k),d(v),p=!0)},o(k){h(e.$$.fragment,k),h(n.$$.fragment,k),h(r.$$.fragment,k),h(v),p=!1},d(k){k&&(b(i),b(u),b(l),b(a),b(o)),q(e,k),q(n,k),q(r,k),P&&P.d(k),v&&v.d(k)}}}const rn=()=>{},ln=()=>{};function un(t,e,i){let n,s,u=de,r=()=>(u(),u=ke(f,_=>i(3,s=_)),f);ve(t,tt,_=>i(2,n=_)),t.$$.on_destroy.push(()=>u());let{gjSchemes:f}=e;r();let{props:l}=e;l.pipeline||(l.pipeline={atf4_type:"",accuracy:"",is_alternative:!1,development_funded:!1,construction_funded:!1,funding_sources:be(),status:"",timescale:""}),l.is_coverage_polygon||(l.is_coverage_polygon=!1);const a=(s.features.filter(_=>_.properties.is_coverage_polygon).length==0||l.is_coverage_polygon===!0)&&l.intervention_type==="area";function o(){try{i(0,l.name=n.inner.routeNameForWaypoints(l.waypoints),l)}catch(_){window.alert(`Couldn't auto-name route: ${_}`)}}let p=ue();function c(){l.name=this.value,i(0,l)}const m=()=>o(),j=_=>[_.scheme_reference,Me(_)];function A(_){t.$$.not_equal(l.scheme_reference,_)&&(l.scheme_reference=_,i(0,l))}function P(_){t.$$.not_equal(l.description,_)&&(l.description=_,i(0,l))}function v(_){t.$$.not_equal(l.pipeline.atf4_type,_)&&(l.pipeline.atf4_type=_,i(0,l))}function k(_){t.$$.not_equal(l.pipeline.accuracy,_)&&(l.pipeline.accuracy=_,i(0,l))}function M(_){t.$$.not_equal(l.pipeline.is_alternative,_)&&(l.pipeline.is_alternative=_,i(0,l))}function O(_){t.$$.not_equal(l.is_coverage_polygon,_)&&(l.is_coverage_polygon=_,i(0,l))}return t.$$set=_=>{"gjSchemes"in _&&r(i(1,f=_.gjSchemes)),"props"in _&&i(0,l=_.props)},[l,f,n,s,a,o,p,c,m,j,A,P,v,k,M,O]}class on extends G{constructor(e){super(),K(this,e,un,sn,H,{gjSchemes:1,props:0})}}function He(t,e,i){const n=t.slice();return n[9]=e[i][0],n[10]=e[i][1],n}function ze(t){let e,i;return e=new oe({props:{$$slots:{default:[fn]},$$scope:{ctx:t}}}),e.$on("click",t[6]),{c(){y(e.$$.fragment)},m(n,s){S(e,n,s),i=!0},p(n,s){const u={};s&8192&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){h(e.$$.fragment,n),i=!1},d(n){q(e,n)}}}function fn(t){let e;return{c(){e=J("Handle extra GeoJSON properties")},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function Qe(t){let e,i,n=t[9]+"",s,u,r=JSON.stringify(t[10])+"",f,l;return{c(){e=D("li"),i=D("b"),s=J(n),u=J(`
        = `),f=J(r),l=N()},m(a,o){$(a,e,o),E(e,i),E(i,s),E(e,u),E(e,f),E(e,l)},p(a,o){o&2&&n!==(n=a[9]+"")&&fe(s,n),o&2&&r!==(r=JSON.stringify(a[10])+"")&&fe(f,r)},d(a){a&&b(e)}}}function an(t){let e;return{c(){e=J("Remove these properties")},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function cn(t){let e;return{c(){e=J("Cancel")},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function pn(t){let e,i,n,s;return e=new At({props:{$$slots:{default:[an]},$$scope:{ctx:t}}}),e.$on("click",t[2]),n=new oe({props:{$$slots:{default:[cn]},$$scope:{ctx:t}}}),n.$on("click",t[7]),{c(){y(e.$$.fragment),i=N(),y(n.$$.fragment)},m(u,r){S(e,u,r),$(u,i,r),S(n,u,r),s=!0},p(u,r){const f={};r&8192&&(f.$$scope={dirty:r,ctx:u}),e.$set(f);const l={};r&8192&&(l.$$scope={dirty:r,ctx:u}),n.$set(l)},i(u){s||(d(e.$$.fragment,u),d(n.$$.fragment,u),s=!0)},o(u){h(e.$$.fragment,u),h(n.$$.fragment,u),s=!1},d(u){u&&b(i),q(e,u),q(n,u)}}}function _n(t){let e,i,n,s,u,r,f=ge(Object.entries(t[1])),l=[];for(let a=0;a<f.length;a+=1)l[a]=Qe(He(t,f,a));return u=new bt({props:{$$slots:{default:[pn]},$$scope:{ctx:t}}}),{c(){e=D("p"),e.textContent="The unexpected properties:",i=N(),n=D("ul");for(let a=0;a<l.length;a+=1)l[a].c();s=N(),y(u.$$.fragment)},m(a,o){$(a,e,o),$(a,i,o),$(a,n,o);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(n,null);$(a,s,o),S(u,a,o),r=!0},p(a,o){if(o&2){f=ge(Object.entries(a[1]));let c;for(c=0;c<f.length;c+=1){const m=He(a,f,c);l[c]?l[c].p(m,o):(l[c]=Qe(m),l[c].c(),l[c].m(n,null))}for(;c<l.length;c+=1)l[c].d(1);l.length=f.length}const p={};o&8193&&(p.$$scope={dirty:o,ctx:a}),u.$set(p)},i(a){r||(d(u.$$.fragment,a),r=!0)},o(a){h(u.$$.fragment,a),r=!1},d(a){a&&(b(e),b(i),b(n),b(s)),nt(l,a),q(u,a)}}}function mn(t){let e=Object.entries(t[1]).length>0,i,n,s,u,r=e&&ze(t);function f(a){t[8](a)}let l={title:"This imported GeoJSON feature has unexpected properties",$$slots:{default:[_n]},$$scope:{ctx:t}};return t[0]!==void 0&&(l.open=t[0]),n=new je({props:l}),L.push(()=>B(n,"open",f)),{c(){r&&r.c(),i=N(),y(n.$$.fragment)},m(a,o){r&&r.m(a,o),$(a,i,o),S(n,a,o),u=!0},p(a,[o]){o&2&&(e=Object.entries(a[1]).length>0),e?r?(r.p(a,o),o&2&&d(r,1)):(r=ze(a),r.c(),d(r,1),r.m(i.parentNode,i)):r&&(se(),h(r,1,1,()=>{r=null}),re());const p={};o&8195&&(p.$$scope={dirty:o,ctx:a}),!s&&o&1&&(s=!0,p.open=a[0],R(()=>s=!1)),n.$set(p)},i(a){u||(d(r),d(n.$$.fragment,a),u=!0)},o(a){h(r),h(n.$$.fragment,a),u=!1},d(a){a&&b(i),r&&r.d(a),q(n,a)}}}function dn(t,e,i){let n,{gjSchemes:s}=e,{id:u}=e,{props:r}=e,f=!1;function l(){i(0,f=!1),s.update(c=>{let m=c.features.find(j=>j.id==u);for(let j of Object.keys(n))delete m.properties[j];return c})}const a=()=>i(0,f=!0),o=()=>i(0,f=!1);function p(c){f=c,i(0,f)}return t.$$set=c=>{"gjSchemes"in c&&i(3,s=c.gjSchemes),"id"in c&&i(4,u=c.id),"props"in c&&i(5,r=c.props)},t.$$.update=()=>{t.$$.dirty&32&&i(1,n=ft(r))},[f,n,l,s,u,r,a,o,p]}class gn extends G{constructor(e){super(),K(this,e,dn,mn,H,{gjSchemes:3,id:4,props:5})}}function hn(t){let e,i,n;function s(r){t[6](r)}let u={gjSchemes:t[1]};return t[0]!==void 0&&(u.props=t[0]),e=new on({props:u}),L.push(()=>B(e,"props",s)),{c(){y(e.$$.fragment)},m(r,f){S(e,r,f),n=!0},p(r,f){const l={};f&2&&(l.gjSchemes=r[1]),!i&&f&1&&(i=!0,l.props=r[0],R(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function $n(t){let e,i,n;function s(r){t[5](r)}let u={gjSchemes:t[1]};return t[0]!==void 0&&(u.props=t[0]),e=new Wt({props:u}),L.push(()=>B(e,"props",s)),{c(){y(e.$$.fragment)},m(r,f){S(e,r,f),n=!0},p(r,f){const l={};f&2&&(l.gjSchemes=r[1]),!i&&f&1&&(i=!0,l.props=r[0],R(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){h(e.$$.fragment,r),n=!1},d(r){q(e,r)}}}function bn(t){let e,i,n,s,u,r;e=new gn({props:{gjSchemes:t[1],id:t[2],props:t[0]}});const f=[$n,hn],l=[];function a(o,p){return o[3]=="v1"?0:o[3]=="pipeline"?1:-1}return~(n=a(t))&&(s=l[n]=f[n](t)),{c(){y(e.$$.fragment),i=N(),s&&s.c(),u=ie()},m(o,p){S(e,o,p),$(o,i,p),~n&&l[n].m(o,p),$(o,u,p),r=!0},p(o,[p]){const c={};p&2&&(c.gjSchemes=o[1]),p&4&&(c.id=o[2]),p&1&&(c.props=o[0]),e.$set(c);let m=n;n=a(o),n===m?~n&&l[n].p(o,p):(s&&(se(),h(l[m],1,1,()=>{l[m]=null}),re()),~n?(s=l[n],s?s.p(o,p):(s=l[n]=f[n](o),s.c()),d(s,1),s.m(u.parentNode,u)):s=null)},i(o){r||(d(e.$$.fragment,o),d(s),r=!0)},o(o){h(e.$$.fragment,o),h(s),r=!1},d(o){o&&(b(i),b(u)),q(e,o),~n&&l[n].d(o)}}}function vn(t,e,i){let n;ve(t,ne,o=>i(3,n=o));let{cfg:s}=e,{gjSchemes:u}=e,{id:r}=e,{props:f}=e;function l(o){f=o,i(0,f)}function a(o){f=o,i(0,f)}return t.$$set=o=>{"cfg"in o&&i(4,s=o.cfg),"gjSchemes"in o&&i(1,u=o.gjSchemes),"id"in o&&i(2,r=o.id),"props"in o&&i(0,f=o.props)},[f,u,r,n,s,l,a]}class kn extends G{constructor(e){super(),K(this,e,vn,bn,H,{cfg:4,gjSchemes:1,id:2,props:0})}}function wn(t){let e;return{c(){e=J("Scheme details")},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function yn(t){let e;return{c(){e=J("Save")},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function Sn(t){let e,i,n,s,u;function r(l){t[6](l)}let f={label:"Scheme name",required:!0};return t[3].schemes[t[1]].scheme_name!==void 0&&(f.value=t[3].schemes[t[1]].scheme_name),e=new Fe({props:f}),L.push(()=>B(e,"value",r)),s=new it({props:{$$slots:{default:[yn]},$$scope:{ctx:t}}}),s.$on("click",t[7]),{c(){y(e.$$.fragment),n=N(),y(s.$$.fragment)},m(l,a){S(e,l,a),$(l,n,a),S(s,l,a),u=!0},p(l,a){const o={};!i&&a&10&&(i=!0,o.value=l[3].schemes[l[1]].scheme_name,R(()=>i=!1)),e.$set(o);const p={};a&512&&(p.$$scope={dirty:a,ctx:l}),s.$set(p)},i(l){u||(d(e.$$.fragment,l),d(s.$$.fragment,l),u=!0)},o(l){h(e.$$.fragment,l),h(s.$$.fragment,l),u=!1},d(l){l&&b(n),q(e,l),q(s,l)}}}function qn(t){let e,i,n,s,u,r,f;e=new oe({props:{$$slots:{default:[wn]},$$scope:{ctx:t}}}),e.$on("click",t[5]);function l(o){t[8](o)}let a={title:"Scheme details",$$slots:{default:[Sn]},$$scope:{ctx:t}};return t[2]!==void 0&&(a.open=t[2]),n=new je({props:a}),L.push(()=>B(n,"open",l)),{c(){y(e.$$.fragment),i=N(),y(n.$$.fragment)},m(o,p){S(e,o,p),$(o,i,p),S(n,o,p),u=!0,r||(f=Z(window,"keydown",t[4]),r=!0)},p(o,[p]){const c={};p&512&&(c.$$scope={dirty:p,ctx:o}),e.$set(c);const m={};p&526&&(m.$$scope={dirty:p,ctx:o}),!s&&p&4&&(s=!0,m.open=o[2],R(()=>s=!1)),n.$set(m)},i(o){u||(d(e.$$.fragment,o),d(n.$$.fragment,o),u=!0)},o(o){h(e.$$.fragment,o),h(n.$$.fragment,o),u=!1},d(o){o&&b(i),q(e,o),q(n,o),r=!1,f()}}}function jn(t,e,i){let n,s=de,u=()=>(s(),s=ke(r,j=>i(3,n=j)),r);t.$$.on_destroy.push(()=>s());let{gjSchemes:r}=e;u();let{scheme_reference:f}=e,l=!1;function a(j){l&&j.key=="Escape"&&(j.stopPropagation(),i(2,l=!1))}const o=()=>i(2,l=!0);function p(j){t.$$.not_equal(n.schemes[f].scheme_name,j)&&(n.schemes[f].scheme_name=j,r.set(n))}const c=()=>i(2,l=!1);function m(j){l=j,i(2,l)}return t.$$set=j=>{"gjSchemes"in j&&u(i(0,r=j.gjSchemes)),"scheme_reference"in j&&i(1,f=j.scheme_reference)},[r,f,l,n,a,o,p,c,m]}class Nn extends G{constructor(e){super(),K(this,e,jn,qn,H,{gjSchemes:0,scheme_reference:1})}}function Pn(t){let e;return{c(){e=J("Scheme details")},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function Fn(t){let e;return{c(){e=J("Save")},m(i,n){$(i,e,n)},d(i){i&&b(e)}}}function Mn(t){let e,i,n,s,u,r,f,l,a,o,p,c,m,j,A,P,v,k,M,O,_;function g(w){t[9](w)}let T={label:"Scheme name",required:!0};t[6].schemes[t[1]].scheme_name!==void 0&&(T.value=t[6].schemes[t[1]].scheme_name),e=new Fe({props:T}),L.push(()=>B(e,"value",g));function U(w){t[10](w)}let z={label:"Scheme type",choices:[["cycling route","Cycling route"],["walking route","Walking route"],["shared-use route","Shared-use route"],["cycling and walking route","Cycling and walking route, not shared use"],["area-based scheme","Area-based scheme"],["intersection","Intersection/junction scheme"]],inlineSmall:!0,required:!0};t[3].scheme_type!==void 0&&(z.value=t[3].scheme_type),f=new pe({props:z}),L.push(()=>B(f,"value",U));function Q(w){t[11](w)}let Y={label:"Type of the main intervention"};t[3].atf4_lead_type!==void 0&&(Y.value=t[3].atf4_lead_type),o=new rt({props:Y}),L.push(()=>B(o,"value",Q));function C(w){t[12](w)}let F={label:"Scheme description (150 words max)"};return t[3].scheme_description!==void 0&&(F.value=t[3].scheme_description),m=new Pe({props:F}),L.push(()=>B(m,"value",C)),P=new lt({props:{data:t[3],required:!0,onUpdate:t[13]}}),k=new ut({props:{data:t[3],onUpdate:t[14]}}),O=new it({props:{$$slots:{default:[Fn]},$$scope:{ctx:t}}}),O.$on("click",t[15]),{c(){y(e.$$.fragment),n=N(),s=D("fieldset"),u=D("legend"),u.textContent="Basic information",r=N(),y(f.$$.fragment),a=N(),y(o.$$.fragment),c=N(),y(m.$$.fragment),A=N(),y(P.$$.fragment),v=N(),y(k.$$.fragment),M=N(),y(O.$$.fragment),I(u,"class","govuk-fieldset__legend"),I(s,"class","govuk-fieldset svelte-1bxyfcq")},m(w,W){S(e,w,W),$(w,n,W),$(w,s,W),E(s,u),E(s,r),S(f,s,null),E(s,a),S(o,s,null),E(s,c),S(m,s,null),$(w,A,W),S(P,w,W),$(w,v,W),S(k,w,W),$(w,M,W),S(O,w,W),_=!0},p(w,W){const X={};!i&&W&66&&(i=!0,X.value=w[6].schemes[w[1]].scheme_name,R(()=>i=!1)),e.$set(X);const ee={};!l&&W&8&&(l=!0,ee.value=w[3].scheme_type,R(()=>l=!1)),f.$set(ee);const te={};!p&&W&8&&(p=!0,te.value=w[3].atf4_lead_type,R(()=>p=!1)),o.$set(te);const ce={};!j&&W&8&&(j=!0,ce.value=w[3].scheme_description,R(()=>j=!1)),m.$set(ce);const we={};W&8&&(we.data=w[3]),W&16&&(we.onUpdate=w[13]),P.$set(we);const ye={};W&8&&(ye.data=w[3]),W&16&&(ye.onUpdate=w[14]),k.$set(ye);const Ce={};W&524288&&(Ce.$$scope={dirty:W,ctx:w}),O.$set(Ce)},i(w){_||(d(e.$$.fragment,w),d(f.$$.fragment,w),d(o.$$.fragment,w),d(m.$$.fragment,w),d(P.$$.fragment,w),d(k.$$.fragment,w),d(O.$$.fragment,w),_=!0)},o(w){h(e.$$.fragment,w),h(f.$$.fragment,w),h(o.$$.fragment,w),h(m.$$.fragment,w),h(P.$$.fragment,w),h(k.$$.fragment,w),h(O.$$.fragment,w),_=!1},d(w){w&&(b(n),b(s),b(A),b(v),b(M)),q(e,w),q(f),q(o),q(m),q(P,w),q(k,w),q(O,w)}}}function Cn(t){let e,i,n,s,u,r,f,l,a;e=new me({props:{errorMessage:t[5]}}),n=new oe({props:{$$slots:{default:[Pn]},$$scope:{ctx:t}}}),n.$on("click",t[8]);function o(c){t[16](c)}let p={title:"Scheme details",$$slots:{default:[Mn]},$$scope:{ctx:t}};return t[2]!==void 0&&(p.open=t[2]),u=new je({props:p}),L.push(()=>B(u,"open",o)),{c(){y(e.$$.fragment),i=N(),y(n.$$.fragment),s=N(),y(u.$$.fragment)},m(c,m){S(e,c,m),$(c,i,m),S(n,c,m),$(c,s,m),S(u,c,m),f=!0,l||(a=Z(window,"keydown",t[7]),l=!0)},p(c,[m]){const j={};m&32&&(j.errorMessage=c[5]),e.$set(j);const A={};m&524288&&(A.$$scope={dirty:m,ctx:c}),n.$set(A);const P={};m&524382&&(P.$$scope={dirty:m,ctx:c}),!r&&m&4&&(r=!0,P.open=c[2],R(()=>r=!1)),u.$set(P)},i(c){f||(d(e.$$.fragment,c),d(n.$$.fragment,c),d(u.$$.fragment,c),f=!0)},o(c){h(e.$$.fragment,c),h(n.$$.fragment,c),h(u.$$.fragment,c),f=!1},d(c){c&&(b(i),b(s)),q(e,c),q(n,c),q(u,c),l=!1,a()}}}function On(t,e,i){let n,s,u=de,r=()=>(u(),u=ke(f,U=>i(6,s=U)),f);t.$$.on_destroy.push(()=>u());let{gjSchemes:f}=e;r();let{scheme_reference:l}=e,a=!1,o=s.schemes[l].pipeline,p=0;function c(U,z){return o.scheme_type&&o.status&&o.timescale?"":"Missing some required data"}function m(U){a&&U.key=="Escape"&&(U.stopPropagation(),i(2,a=!1))}function j(){ct(f,s.schemes[l].pipeline=o,s),f.set(s)}const A=()=>i(2,a=!0);function P(U){t.$$.not_equal(s.schemes[l].scheme_name,U)&&(s.schemes[l].scheme_name=U,f.set(s))}function v(U){t.$$.not_equal(o.scheme_type,U)&&(o.scheme_type=U,i(3,o))}function k(U){t.$$.not_equal(o.atf4_lead_type,U)&&(o.atf4_lead_type=U,i(3,o))}function M(U){t.$$.not_equal(o.scheme_description,U)&&(o.scheme_description=U,i(3,o))}const O=()=>i(4,p++,p),_=()=>i(4,p++,p),g=()=>i(2,a=!1);function T(U){a=U,i(2,a)}return t.$$set=U=>{"gjSchemes"in U&&r(i(0,f=U.gjSchemes)),"scheme_reference"in U&&i(1,l=U.scheme_reference)},t.$$.update=()=>{t.$$.dirty&24&&i(5,n=c()),t.$$.dirty&4&&(a||j())},[f,l,a,o,p,n,s,m,A,P,v,k,M,O,_,g,T]}class Un extends G{constructor(e){super(),K(this,e,On,Cn,H,{gjSchemes:0,scheme_reference:1})}}function Tn(t){let e,i;return e=new Nn({props:{gjSchemes:t[0],scheme_reference:t[1]}}),{c(){y(e.$$.fragment)},m(n,s){S(e,n,s),i=!0},p(n,s){const u={};s&1&&(u.gjSchemes=n[0]),s&2&&(u.scheme_reference=n[1]),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){h(e.$$.fragment,n),i=!1},d(n){q(e,n)}}}function In(t){let e,i;return e=new Un({props:{gjSchemes:t[0],scheme_reference:t[1]}}),{c(){y(e.$$.fragment)},m(n,s){S(e,n,s),i=!0},p(n,s){const u={};s&1&&(u.gjSchemes=n[0]),s&2&&(u.scheme_reference=n[1]),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){h(e.$$.fragment,n),i=!1},d(n){q(e,n)}}}function An(t){let e,i,n,s;const u=[In,Tn],r=[];function f(l,a){return l[2]=="pipeline"?0:1}return e=f(t),i=r[e]=u[e](t),{c(){i.c(),n=ie()},m(l,a){r[e].m(l,a),$(l,n,a),s=!0},p(l,[a]){let o=e;e=f(l),e===o?r[e].p(l,a):(se(),h(r[o],1,1,()=>{r[o]=null}),re(),i=r[e],i?i.p(l,a):(i=r[e]=u[e](l),i.c()),d(i,1),i.m(n.parentNode,n))},i(l){s||(d(i),s=!0)},o(l){h(i),s=!1},d(l){l&&b(n),r[e].d(l)}}}function En(t,e,i){let n;ve(t,ne,r=>i(2,n=r));let{gjSchemes:s}=e,{scheme_reference:u}=e;return t.$$set=r=>{"gjSchemes"in r&&i(0,s=r.gjSchemes),"scheme_reference"in r&&i(1,u=r.scheme_reference)},[s,u,n]}class Ln extends G{constructor(e){super(),K(this,e,En,An,H,{gjSchemes:0,scheme_reference:1})}}let Kn={interventionName:Wn,schemeName:Me,backfill:Bn,initializeEmptyScheme:Rn,interventionWarning:Jn,editFeatureForm:kn,editSchemeForm:Ln,newPointFeature:t=>{t.properties.intervention_type="other"},newPolygonFeature:t=>{t.properties.intervention_type="area",t.properties.is_coverage_polygon=!1},newLineStringFeature:t=>{t.properties.intervention_type="route",t.properties.route_name&&(le(ne)!="pipeline"&&(t.properties.name=t.properties.route_name),delete t.properties.route_name)},updateFeature:(t,e)=>{e.properties.route_name&&!t.properties.name&&le(ne)!="pipeline"&&(t.properties.name=e.properties.route_name)},maptilerApiKey:"MZEJTanw3WpxRvt7qDfo",getStreetViewRoadLayerNames:t=>mt(t,le(pt)),layerZorder:dt};function Bn(t){var n,s,u,r,f,l,a,o;let e=le(ne),i=1;for(let p of t.features)p.properties||(p.properties={name:"",scheme_reference:"",description:"",intervention_type:"other",is_coverage_polygon:!1}),e=="pipeline"&&!p.properties.intervention_type&&(p.properties.intervention_type=new Map([["LineString","route"],["Polygon","area"]]).get(p.geometry.type)??"other"),p.geometry.type=="LineString"&&!p.properties.length_meters&&(p.properties.length_meters=gt(p,{units:"kilometers"})*1e3),p.id=i++;if(!t.schemes){let p=ue();t.schemes={},t.schemes[p]={scheme_reference:p,color:Te()},t.scheme_name&&(t.schemes[p].scheme_name=t.scheme_name,delete t.scheme_name),t.pipeline&&(t.schemes[p].pipeline=t.pipeline,delete t.pipeline);for(let c of t.features)c.properties.scheme_reference=p}for(let p of Object.values(t.schemes)){let c=p;if(c.color??(c.color=Te()),e=="pipeline"){c.pipeline??(c.pipeline=ot()),(n=c.pipeline).development_funded??(n.development_funded=!1),(s=c.pipeline).construction_funded??(s.construction_funded=!1),(u=c.pipeline).funding_sources??(u.funding_sources=be()),delete c.pipeline.budget_funded,delete c.pipeline.budget_unfunded,delete c.pipeline.funding_source,delete c.pipeline.funded;for(let m of t.features)m.properties.pipeline&&((r=m.properties.pipeline).development_funded??(r.development_funded=!1),(f=m.properties.pipeline).construction_funded??(f.construction_funded=!1),(l=m.properties.pipeline).funding_sources??(l.funding_sources=be()),(a=m.properties.pipeline).status??(a.status=""),(o=m.properties.pipeline).timescale??(o.timescale=""))}}return t}function Rn(t){let e=t;return le(ne)=="pipeline"&&(e.pipeline=ot()),e}function ot(){return{scheme_type:"",atf4_lead_type:"",scheme_description:"",status:"",timescale:"",development_funded:!1,construction_funded:!1,funding_sources:be()}}function be(){return{atf2:!1,atf3:!1,atf4:!1,atf4e:!1,crsts:!1,luf:!1,other:""}}function Wn(t){if(t.properties.name)return t.properties.name;var e=t.properties.intervention_type;return e=="other"&&(t.geometry.type=="Point"?e="point":t.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function Me(t){return t.scheme_name??"Untitled scheme"}function Jn(t){var n;let e=le(ne);if(!t.properties.name)return"No name";if(!new Set(["route","area","crossing","other"]).has(t.properties.intervention_type))return"No intervention type";if(e=="pipeline"&&!((n=t.properties.pipeline)!=null&&n.accuracy))return"Accuracy not specified";let i=ft(t.properties);return Object.entries(i).length>0?`Extra GeoJSON properties: ${Object.keys(i).join(", ")}`:null}function ft(t){let e=le(ne),i=JSON.parse(JSON.stringify(t));for(let n of["name","description","intervention_type","length_meters","waypoints","hide_while_editing","is_coverage_polygon","scheme_reference"])delete i[n];if(e=="pipeline"&&i.pipeline){for(let n of["atf4_type","accuracy","is_alternative","budget","development_funded","construction_funded","funding_sources","status","timescale","timescale_year","year_published","year_consulted"])delete i.pipeline[n];Object.entries(i.pipeline).length==0&&delete i.pipeline}return i}export{bt as B,Fe as T,At as W,Bn as b,Kn as c};
