import{S as J,i as D,s as V,X as Ze,e as W,b as I,c as b,Y as Ke,Z as Xe,_ as Ye,t as d,p as g,d as $,av as fe,j as q,o as N,u as j,aT as ue,E as _e,f as me,a as F,al as Z,am as te,x as G,m as R,B as oe,an as xe,ao as et,a7 as qe,aU as Ce,a8 as ft,aV as Me,g as B,h as L,R as ce,U as se,r as A,v as ve,at as tt,C as ne,q as ie,n as de,af as ke,y as ge,z as nt,aN as at,K as re,V as ct,aW as le,aR as pt}from"./files-e80a12c6.js";import{S as Ne,p as he,a as pe,C as _t,g as mt,b as dt,t as gt,r as Ue}from"./colors-2522ae21.js";function ht(t){let e,i;const n=t[1].default,s=Ze(n,t,t[0],null);return{c(){e=W("div"),s&&s.c(),I(e,"class","govuk-button-group")},m(u,r){b(u,e,r),s&&s.m(e,null),i=!0},p(u,[r]){s&&s.p&&(!i||r&1)&&Ke(s,n,u,u[0],i?Ye(n,u[0],r,null):Xe(u[0]),null)},i(u){i||(d(s,u),i=!0)},o(u){g(s,u),i=!1},d(u){u&&$(e),s&&s.d(u)}}}function bt(t,e,i){let{$$slots:n={},$$scope:s}=e;return t.$$set=u=>{"$$scope"in u&&i(0,s=u.$$scope)},[s,n]}class $t extends J{constructor(e){super(),D(this,e,bt,ht,V,{})}}function Te(t){let e,i,n=be(t[0])+"",s;return{c(){e=W("div"),i=G("Â£"),s=G(n),I(e,"class","govuk-hint")},m(u,r){b(u,e,r),R(e,i),R(e,s)},p(u,r){r&1&&n!==(n=be(u[0])+"")&&oe(s,n)},d(u){u&&$(e)}}}function vt(t){let e;return{c(){e=G("multiply by 1 million")},m(i,n){b(i,e,n)},d(i){i&&$(e)}}}function kt(t){let e,i,n,s,u,r,f,l,o;e=new _e({props:{errorMessage:Ie(t[2])}});let a=t[0]!=null&&Te(t);return r=new me({props:{disabled:t[0]==null||t[0]>1e3,$$slots:{default:[vt]},$$scope:{ctx:t}}}),r.$on("click",t[4]),{c(){q(e.$$.fragment),i=F(),a&&a.c(),n=F(),s=W("input"),u=F(),q(r.$$.fragment),I(s,"type","text"),I(s,"inputmode","numeric"),I(s,"class","govuk-input govuk-input--width-10"),I(s,"id",t[3])},m(c,p){N(e,c,p),b(c,i,p),a&&a.m(c,p),b(c,n,p),b(c,s,p),Z(s,t[2]),b(c,u,p),N(r,c,p),f=!0,l||(o=te(s,"input",t[5]),l=!0)},p(c,p){const y={};p&4&&(y.errorMessage=Ie(c[2])),e.$set(y),c[0]!=null?a?a.p(c,p):(a=Te(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),p&4&&s.value!==c[2]&&Z(s,c[2]);const C={};p&1&&(C.disabled=c[0]==null||c[0]>1e3),p&128&&(C.$$scope={dirty:p,ctx:c}),r.$set(C)},i(c){f||(d(e.$$.fragment,c),d(r.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(r.$$.fragment,c),f=!1},d(c){c&&($(i),$(n),$(s),$(u)),j(e,c),a&&a.d(c),j(r,c),l=!1,o()}}}function yt(t){let e,i;return e=new fe({props:{label:t[1],id:t[3],$$slots:{default:[kt]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,[s]){const u={};s&2&&(u.label=n[1]),s&133&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){j(e,n)}}}function it(t){if(t!="")return parseFloat(t.replaceAll(",",""))}function Ie(t){let e=it(t);return e==null?"":isNaN(e)?"Please enter a valid number":e<0?"Please enter a positive number":""}function be(t){return t.toLocaleString()}function wt(t,e,i){let{label:n}=e,{value:s}=e,u=ue(),r=s==null?"":be(s);function f(a){i(0,s=it(a))}function l(){i(2,r=be(s*1e6))}function o(){r=this.value,i(2,r)}return t.$$set=a=>{"label"in a&&i(1,n=a.label),"value"in a&&i(0,s=a.value)},t.$$.update=()=>{t.$$.dirty&4&&f(r)},[s,n,r,u,l,o]}class St extends J{constructor(e){super(),D(this,e,wt,yt,V,{label:1,value:0})}}function qt(t){let e,i,n,s,u,r,f;return e=new _e({props:{errorMessage:t[5](t[2])}}),{c(){q(e.$$.fragment),i=F(),n=W("input"),I(n,"type","text"),I(n,"inputmode","numeric"),I(n,"class",s=`govuk-input govuk-input--width-${t[1]}`),I(n,"id",t[3])},m(l,o){N(e,l,o),b(l,i,o),b(l,n,o),Z(n,t[2]),u=!0,r||(f=[te(n,"input",t[9]),te(n,"change",t[4])],r=!0)},p(l,o){const a={};o&4&&(a.errorMessage=l[5](l[2])),e.$set(a),(!u||o&2&&s!==(s=`govuk-input govuk-input--width-${l[1]}`))&&I(n,"class",s),o&4&&n.value!==l[2]&&Z(n,l[2])},i(l){u||(d(e.$$.fragment,l),u=!0)},o(l){g(e.$$.fragment,l),u=!1},d(l){l&&($(i),$(n)),j(e,l),r=!1,xe(f)}}}function Nt(t){let e,i;return e=new fe({props:{label:t[0],id:t[3],$$slots:{default:[qt]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,[s]){const u={};s&1&&(u.label=n[0]),s&1030&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){j(e,n)}}}function jt(t,e,i){let{label:n}=e,{value:s}=e,{width:u}=e,{min:r=void 0}=e,{max:f=void 0}=e,l=s==null?void 0:s.toString(),o=ue();function a(){i(6,s=l==null?void 0:parseInt(l,10))}function c(y){if(y==""||y==null)return"";if(y.includes("."))return"Please enter a number without decimals";let C=Number(y);return isNaN(C)?"Please enter a valid number":r!=null&&C<r?`Please enter a number that's at least ${r};`:f!=null&&C>f?`Please enter a number that's at most ${f};`:""}function p(){l=this.value,i(2,l)}return t.$$set=y=>{"label"in y&&i(0,n=y.label),"value"in y&&i(6,s=y.value),"width"in y&&i(1,u=y.width),"min"in y&&i(7,r=y.min),"max"in y&&i(8,f=y.max)},[n,u,l,o,a,c,s,r,f,p]}class Se extends J{constructor(e){super(),D(this,e,jt,Nt,V,{label:0,value:6,width:1,min:7,max:8})}}function Be(t){let e,i;return{c(){e=W("div"),i=G(t[2]),I(e,"class","govuk-hint")},m(n,s){b(n,e,s),R(e,i)},p(n,s){s&4&&oe(i,n[2])},d(n){n&&$(e)}}}function Ft(t){let e,i,n,s,u,r,f;e=new _e({props:{errorMessage:t[4]}});let l=t[2]&&Be(t);return{c(){q(e.$$.fragment),i=F(),l&&l.c(),n=F(),s=W("textarea"),I(s,"class","govuk-textarea"),I(s,"id",t[5]),I(s,"rows",t[3])},m(o,a){N(e,o,a),b(o,i,a),l&&l.m(o,a),b(o,n,a),b(o,s,a),Z(s,t[0]),u=!0,r||(f=te(s,"input",t[6]),r=!0)},p(o,a){const c={};a&16&&(c.errorMessage=o[4]),e.$set(c),o[2]?l?l.p(o,a):(l=Be(o),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null),(!u||a&8)&&I(s,"rows",o[3]),a&1&&Z(s,o[0])},i(o){u||(d(e.$$.fragment,o),u=!0)},o(o){g(e.$$.fragment,o),u=!1},d(o){o&&($(i),$(n),$(s)),j(e,o),l&&l.d(o),r=!1,f()}}}function Ot(t){let e,i;return e=new fe({props:{label:t[1],id:t[5],$$slots:{default:[Ft]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,[s]){const u={};s&2&&(u.label=n[1]),s&157&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){j(e,n)}}}function Pt(t,e,i){let{label:n}=e,{hint:s=""}=e,{value:u}=e,{rows:r=5}=e,{errorMessage:f=""}=e,l=ue();function o(){u=this.value,i(0,u)}return t.$$set=a=>{"label"in a&&i(1,n=a.label),"hint"in a&&i(2,s=a.hint),"value"in a&&i(0,u=a.value),"rows"in a&&i(3,r=a.rows),"errorMessage"in a&&i(4,f=a.errorMessage)},[u,n,s,r,f,l,o]}class je extends J{constructor(e){super(),D(this,e,Pt,Ot,V,{label:1,hint:2,value:0,rows:3,errorMessage:4})}}function Ct(t){let e,i,n,s,u,r;return e=new _e({props:{errorMessage:t[2]}}),{c(){q(e.$$.fragment),i=F(),n=W("input"),I(n,"type","text"),I(n,"class","govuk-input"),I(n,"id",t[3])},m(f,l){N(e,f,l),b(f,i,l),b(f,n,l),Z(n,t[0]),s=!0,u||(r=[te(n,"input",t[6]),te(n,"change",t[5])],u=!0)},p(f,l){const o={};l&4&&(o.errorMessage=f[2]),e.$set(o),l&1&&n.value!==f[0]&&Z(n,f[0])},i(f){s||(d(e.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),s=!1},d(f){f&&($(i),$(n)),j(e,f),u=!1,xe(r)}}}function Mt(t){let e,i;return e=new fe({props:{label:t[1],id:t[3],$$slots:{default:[Ct]},$$scope:{ctx:t}}}),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,[s]){const u={};s&2&&(u.label=n[1]),s&133&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){j(e,n)}}}function Ut(t,e,i){let n,{label:s}=e,{value:u}=e,{required:r=!1}=e,f=ue();function l(a){et.call(this,t,a)}function o(){u=this.value,i(0,u)}return t.$$set=a=>{"label"in a&&i(1,s=a.label),"value"in a&&i(0,u=a.value),"required"in a&&i(4,r=a.required)},t.$$.update=()=>{t.$$.dirty&17&&i(2,n=r&&(u==null||u=="")?"Required":"")},[u,s,n,f,r,l,o]}class Fe extends J{constructor(e){super(),D(this,e,Ut,Mt,V,{label:1,value:0,required:4})}}function Tt(t){let e,i,n,s;const u=t[2].default,r=Ze(u,t,t[1],null);let f=[{type:"button"},{class:"govuk-button govuk-button--warning"},{"data-module":"govuk-button"},t[0]],l={};for(let o=0;o<f.length;o+=1)l=qe(l,f[o]);return{c(){e=W("button"),r&&r.c(),Ce(e,l)},m(o,a){b(o,e,a),r&&r.m(e,null),e.autofocus&&e.focus(),i=!0,n||(s=te(e,"click",t[3]),n=!0)},p(o,[a]){r&&r.p&&(!i||a&2)&&Ke(r,u,o,o[1],i?Ye(u,o[1],a,null):Xe(o[1]),null),Ce(e,l=ft(f,[{type:"button"},{class:"govuk-button govuk-button--warning"},{"data-module":"govuk-button"},a&1&&o[0]]))},i(o){i||(d(r,o),i=!0)},o(o){g(r,o),i=!1},d(o){o&&$(e),r&&r.d(o),n=!1,s()}}}function It(t,e,i){let{$$slots:n={},$$scope:s}=e;function u(r){et.call(this,t,r)}return t.$$set=r=>{i(0,e=qe(qe({},e),Me(r))),"$$scope"in r&&i(1,s=r.$$scope)},e=Me(e),[e,s,n,u]}class Bt extends J{constructor(e){super(),D(this,e,It,Tt,V,{})}}function Le(t){let e,i;return e=new me({props:{disabled:!t[2],$$slots:{default:[Lt]},$$scope:{ctx:t}}}),e.$on("click",t[7]),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,s){const u={};s&4&&(u.disabled=!n[2]),s&4096&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){j(e,n)}}}function Lt(t){let e;return{c(){e=G("Auto-fill")},m(i,n){b(i,e,n)},d(i){i&&$(e)}}}function At(t){let e,i,n,s,u,r,f=t[0].length_meters&&Le(t);return{c(){e=W("input"),i=F(),f&&f.c(),n=se(),I(e,"type","text"),I(e,"class","govuk-input"),I(e,"id",t[5])},m(l,o){b(l,e,o),Z(e,t[0].name),b(l,i,o),f&&f.m(l,o),b(l,n,o),s=!0,u||(r=te(e,"input",t[6]),u=!0)},p(l,o){o&1&&e.value!==l[0].name&&Z(e,l[0].name),l[0].length_meters?f?(f.p(l,o),o&1&&d(f,1)):(f=Le(l),f.c(),d(f,1),f.m(n.parentNode,n)):f&&(ne(),g(f,1,1,()=>{f=null}),ie())},i(l){s||(d(f),s=!0)},o(l){g(f),s=!1},d(l){l&&($(e),$(i),$(n)),f&&f.d(l),u=!1,r()}}}function Ae(t){let e,i,n=he(t[0].length_meters)+"",s;return{c(){e=W("p"),i=G("Length: "),s=G(n)},m(u,r){b(u,e,r),R(e,i),R(e,s)},p(u,r){r&1&&n!==(n=he(u[0].length_meters)+"")&&oe(s,n)},d(u){u&&$(e)}}}function Et(t){let e,i,n,s,u,r,f,l,o,a,c,p,y;e=new fe({props:{label:"Name",id:t[5],$$slots:{default:[At]},$$scope:{ctx:t}}});function C(S){t[9](S)}let M={label:"Scheme",choices:Object.values(t[3].schemes).map(t[8])};t[0].scheme_reference!==void 0&&(M.value=t[0].scheme_reference),n=new Ne({props:M}),B.push(()=>L(n,"value",C));function O(S){t[10](S)}let k={label:"Type",choices:[["area","Area"],["route","Route"],["crossing","Crossing"],["other","Other"]],inlineSmall:!0,required:!0};t[0].intervention_type!==void 0&&(k.value=t[0].intervention_type),r=new ce({props:k}),B.push(()=>L(r,"value",O));function _(S){t[11](S)}let P={label:"Description"};t[0].description!==void 0&&(P.value=t[0].description),o=new je({props:P}),B.push(()=>L(o,"value",_));let U=t[0].length_meters&&Ae(t);return{c(){q(e.$$.fragment),i=F(),q(n.$$.fragment),u=F(),q(r.$$.fragment),l=F(),q(o.$$.fragment),c=F(),U&&U.c(),p=se()},m(S,T){N(e,S,T),b(S,i,T),N(n,S,T),b(S,u,T),N(r,S,T),b(S,l,T),N(o,S,T),b(S,c,T),U&&U.m(S,T),b(S,p,T),y=!0},p(S,[T]){const v={};T&4101&&(v.$$scope={dirty:T,ctx:S}),e.$set(v);const Q={};T&8&&(Q.choices=Object.values(S[3].schemes).map(S[8])),!s&&T&1&&(s=!0,Q.value=S[0].scheme_reference,A(()=>s=!1)),n.$set(Q);const H={};!f&&T&1&&(f=!0,H.value=S[0].intervention_type,A(()=>f=!1)),r.$set(H);const K={};!a&&T&1&&(a=!0,K.value=S[0].description,A(()=>a=!1)),o.$set(K),S[0].length_meters?U?U.p(S,T):(U=Ae(S),U.c(),U.m(p.parentNode,p)):U&&(U.d(1),U=null)},i(S){y||(d(e.$$.fragment,S),d(n.$$.fragment,S),d(r.$$.fragment,S),d(o.$$.fragment,S),y=!0)},o(S){g(e.$$.fragment,S),g(n.$$.fragment,S),g(r.$$.fragment,S),g(o.$$.fragment,S),y=!1},d(S){S&&($(i),$(u),$(l),$(c),$(p)),j(e,S),j(n,S),j(r,S),j(o,S),U&&U.d(S)}}}function Rt(t,e,i){let n,s,u=de,r=()=>(u(),u=ke(f,k=>i(3,s=k)),f);ve(t,tt,k=>i(2,n=k)),t.$$.on_destroy.push(()=>u());let{gjSchemes:f}=e;r();let{props:l}=e;function o(){try{i(0,l.name=n.inner.routeNameForWaypoints(l.waypoints),l)}catch(k){window.alert(`Couldn't auto-name route: ${k}`)}}let a=ue();function c(){l.name=this.value,i(0,l)}const p=()=>o(),y=k=>[k.scheme_reference,Oe(k)];function C(k){t.$$.not_equal(l.scheme_reference,k)&&(l.scheme_reference=k,i(0,l))}function M(k){t.$$.not_equal(l.intervention_type,k)&&(l.intervention_type=k,i(0,l))}function O(k){t.$$.not_equal(l.description,k)&&(l.description=k,i(0,l))}return t.$$set=k=>{"gjSchemes"in k&&r(i(1,f=k.gjSchemes)),"props"in k&&i(0,l=k.props)},[l,f,n,s,o,a,c,p,y,C,M,O]}class Wt extends J{constructor(e){super(),D(this,e,Rt,Et,V,{gjSchemes:1,props:0})}}function Gt(t){let e,i,n;function s(r){t[2](r)}let u={label:t[1],choices:[ee("New segregated cycling facility"),ee("New junction treatment"),ee("New permanent footway"),["New shared use facilities","New shared use (walking and cycling) facilities"],["Improvements to existing route","Improvements to make an existing walking/cycle route safer"],["Area-wide traffic management","Area-wide traffic management (including by TROs - both permanent and experimental)"],["Bus priority measures","Bus priority measures that also enable active travel (for example, bus gates)"],["Secure cycle parking","Provision of secure cycle parking facilities"],ee("New road crossings"),ee("Restriction or reduction of car parking availability"),ee("School streets"),ee("Quiet mixed traffic streets"),ee("Traffic free routes"),ee("Not specified in LCWIP")],emptyOption:!0};return t[0]!==void 0&&(u.value=t[0]),e=new Ne({props:u}),B.push(()=>L(e,"value",s)),{c(){q(e.$$.fragment)},m(r,f){N(e,r,f),n=!0},p(r,[f]){const l={};f&2&&(l.label=r[1]),!i&&f&1&&(i=!0,l.value=r[0],A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function ee(t){return[t,t]}function Jt(t,e,i){let{label:n}=e,{value:s}=e;function u(r){s=r,i(0,s)}return t.$$set=r=>{"label"in r&&i(1,n=r.label),"value"in r&&i(0,s=r.value)},[s,n,u]}class rt extends J{constructor(e){super(),D(this,e,Jt,Gt,V,{label:1,value:0})}}function Dt(t){let e,i,n,s,u,r,f,l,o,a,c,p,y,C,M,O,k,_;function P(h){t[3](h)}let U={label:"Status",choices:[["","Unknown"],["aspiration","Aspiration"],["planned","Planned"],["in development","In development"],["in construction","In construction"],["completed","Completed"]],inlineSmall:!0,required:t[1]};t[0].status!==void 0&&(U.value=t[0].status),s=new ce({props:U}),B.push(()=>L(s,"value",P));function S(h){t[4](h)}let T={label:"Timescale",choices:[["","Unknown"],["short","Short (1-3 years)"],["medium","Medium (3-6 years)"],["long","Long (6-10 years)"]],inlineSmall:!0,required:t[1]};t[0].timescale!==void 0&&(T.value=t[0].timescale),f=new ce({props:T}),B.push(()=>L(f,"value",S));function v(h){t[5](h)}let Q={label:"Estimated completion year (if known)",width:4,min:2010,max:2100};t[0].timescale_year!==void 0&&(Q.value=t[0].timescale_year),a=new Se({props:Q}),B.push(()=>L(a,"value",v));function H(h){t[6](h)}let K={label:"What year was this scheme most recently published?",width:4,min:2010,max:2100};t[0].year_published!==void 0&&(K.value=t[0].year_published),y=new Se({props:K}),B.push(()=>L(y,"value",H));function x(h){t[7](h)}let m={label:"What year was this scheme most recently consulted on?",width:4,min:2010,max:2100};return t[0].year_consulted!==void 0&&(m.value=t[0].year_consulted),O=new Se({props:m}),B.push(()=>L(O,"value",x)),{c(){e=W("fieldset"),i=W("legend"),i.textContent="Timing and status",n=F(),q(s.$$.fragment),r=F(),q(f.$$.fragment),o=F(),q(a.$$.fragment),p=F(),q(y.$$.fragment),M=F(),q(O.$$.fragment),I(i,"class","govuk-fieldset__legend"),I(e,"class","govuk-fieldset svelte-1bxyfcq")},m(h,w){b(h,e,w),R(e,i),R(e,n),N(s,e,null),R(e,r),N(f,e,null),R(e,o),N(a,e,null),R(e,p),N(y,e,null),R(e,M),N(O,e,null),_=!0},p(h,[w]){const E={};w&2&&(E.required=h[1]),!u&&w&1&&(u=!0,E.value=h[0].status,A(()=>u=!1)),s.$set(E);const z={};w&2&&(z.required=h[1]),!l&&w&1&&(l=!0,z.value=h[0].timescale,A(()=>l=!1)),f.$set(z);const X={};!c&&w&1&&(c=!0,X.value=h[0].timescale_year,A(()=>c=!1)),a.$set(X);const Y={};!C&&w&1&&(C=!0,Y.value=h[0].year_published,A(()=>C=!1)),y.$set(Y);const ae={};!k&&w&1&&(k=!0,ae.value=h[0].year_consulted,A(()=>k=!1)),O.$set(ae)},i(h){_||(d(s.$$.fragment,h),d(f.$$.fragment,h),d(a.$$.fragment,h),d(y.$$.fragment,h),d(O.$$.fragment,h),_=!0)},o(h){g(s.$$.fragment,h),g(f.$$.fragment,h),g(a.$$.fragment,h),g(y.$$.fragment,h),g(O.$$.fragment,h),_=!1},d(h){h&&$(e),j(s),j(f),j(a),j(y),j(O)}}}function Vt(t,e,i){let{data:n}=e,{required:s}=e,{onUpdate:u}=e;function r(p){u()}function f(p){t.$$.not_equal(n.status,p)&&(n.status=p,i(0,n))}function l(p){t.$$.not_equal(n.timescale,p)&&(n.timescale=p,i(0,n))}function o(p){t.$$.not_equal(n.timescale_year,p)&&(n.timescale_year=p,i(0,n))}function a(p){t.$$.not_equal(n.year_published,p)&&(n.year_published=p,i(0,n))}function c(p){t.$$.not_equal(n.year_consulted,p)&&(n.year_consulted=p,i(0,n))}return t.$$set=p=>{"data"in p&&i(0,n=p.data),"required"in p&&i(1,s=p.required),"onUpdate"in p&&i(2,u=p.onUpdate)},t.$$.update=()=>{t.$$.dirty&1&&r()},[n,s,u,f,l,o,a,c]}class st extends J{constructor(e){super(),D(this,e,Vt,Dt,V,{data:0,required:1,onUpdate:2})}}function Ee(t,e,i){const n=t.slice();return n[9]=e[i],n[10]=e,n[11]=i,n}function zt(t){let e;return{c(){e=G("Is the development fully funded?")},m(i,n){b(i,e,n)},d(i){i&&$(e)}}}function Ht(t){let e;return{c(){e=G("Is the construction fully funded?")},m(i,n){b(i,e,n)},d(i){i&&$(e)}}}function Qt(t){let e,i,n;function s(r){t[6](r,t[9])}let u={$$slots:{default:[Zt]},$$scope:{ctx:t}};return t[0].funding_sources[t[9]]!==void 0&&(u.checked=t[0].funding_sources[t[9]]),e=new pe({props:u}),B.push(()=>L(e,"checked",s)),{c(){q(e.$$.fragment)},m(r,f){N(e,r,f),n=!0},p(r,f){t=r;const l={};f&4096&&(l.$$scope={dirty:f,ctx:t}),!i&&f&3&&(i=!0,l.checked=t[0].funding_sources[t[9]],A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function Zt(t){let e=t[9].toUpperCase()+"",i,n;return{c(){i=G(e),n=F()},m(s,u){b(s,i,u),b(s,n,u)},p:de,d(s){s&&($(i),$(n))}}}function Re(t){let e,i,n=t[9]!="other"&&Qt(t);return{c(){n&&n.c(),e=se()},m(s,u){n&&n.m(s,u),b(s,e,u),i=!0},p(s,u){s[9]!="other"&&n.p(s,u)},i(s){i||(d(n),i=!0)},o(s){g(n),i=!1},d(s){s&&$(e),n&&n.d(s)}}}function Kt(t){let e,i,n=ge(t[1]),s=[];for(let r=0;r<n.length;r+=1)s[r]=Re(Ee(t,n,r));const u=r=>g(s[r],1,1,()=>{s[r]=null});return{c(){for(let r=0;r<s.length;r+=1)s[r].c();e=se()},m(r,f){for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(r,f);b(r,e,f),i=!0},p(r,f){if(f&3){n=ge(r[1]);let l;for(l=0;l<n.length;l+=1){const o=Ee(r,n,l);s[l]?(s[l].p(o,f),d(s[l],1)):(s[l]=Re(o),s[l].c(),d(s[l],1),s[l].m(e.parentNode,e))}for(ne(),l=n.length;l<s.length;l+=1)u(l);ie()}},i(r){if(!i){for(let f=0;f<n.length;f+=1)d(s[f]);i=!0}},o(r){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)g(s[f]);i=!1},d(r){r&&$(e),nt(s,r)}}}function Xt(t){let e,i,n,s,u,r,f,l,o,a,c,p,y,C,M,O,k,_,P;function U(m){t[3](m)}let S={label:"Cost (GBP)"};t[0].budget!==void 0&&(S.value=t[0].budget),s=new St({props:S}),B.push(()=>L(s,"value",U));function T(m){t[4](m)}let v={$$slots:{default:[zt]},$$scope:{ctx:t}};t[0].development_funded!==void 0&&(v.checked=t[0].development_funded),f=new pe({props:v}),B.push(()=>L(f,"checked",T));function Q(m){t[5](m)}let H={$$slots:{default:[Ht]},$$scope:{ctx:t}};t[0].construction_funded!==void 0&&(H.checked=t[0].construction_funded),a=new pe({props:H}),B.push(()=>L(a,"checked",Q)),M=new _t({props:{$$slots:{default:[Kt]},$$scope:{ctx:t}}});function K(m){t[7](m)}let x={label:"Other funding sources"};return t[0].funding_sources.other!==void 0&&(x.value=t[0].funding_sources.other),k=new Fe({props:x}),B.push(()=>L(k,"value",K)),{c(){e=W("fieldset"),i=W("legend"),i.textContent="Budget",n=F(),q(s.$$.fragment),r=F(),q(f.$$.fragment),o=F(),q(a.$$.fragment),p=F(),y=W("p"),y.textContent="Funding sources",C=F(),q(M.$$.fragment),O=F(),q(k.$$.fragment),I(i,"class","govuk-fieldset__legend"),I(e,"class","govuk-fieldset svelte-1bxyfcq")},m(m,h){b(m,e,h),R(e,i),R(e,n),N(s,e,null),R(e,r),N(f,e,null),R(e,o),N(a,e,null),R(e,p),R(e,y),R(e,C),N(M,e,null),R(e,O),N(k,e,null),P=!0},p(m,[h]){const w={};!u&&h&1&&(u=!0,w.value=m[0].budget,A(()=>u=!1)),s.$set(w);const E={};h&4096&&(E.$$scope={dirty:h,ctx:m}),!l&&h&1&&(l=!0,E.checked=m[0].development_funded,A(()=>l=!1)),f.$set(E);const z={};h&4096&&(z.$$scope={dirty:h,ctx:m}),!c&&h&1&&(c=!0,z.checked=m[0].construction_funded,A(()=>c=!1)),a.$set(z);const X={};h&4097&&(X.$$scope={dirty:h,ctx:m}),M.$set(X);const Y={};!_&&h&1&&(_=!0,Y.value=m[0].funding_sources.other,A(()=>_=!1)),k.$set(Y)},i(m){P||(d(s.$$.fragment,m),d(f.$$.fragment,m),d(a.$$.fragment,m),d(M.$$.fragment,m),d(k.$$.fragment,m),P=!0)},o(m){g(s.$$.fragment,m),g(f.$$.fragment,m),g(a.$$.fragment,m),g(M.$$.fragment,m),g(k.$$.fragment,m),P=!1},d(m){m&&$(e),j(s),j(f),j(a),j(M),j(k)}}}function Yt(t,e,i){let{data:n}=e,{onUpdate:s}=e;function u(p){s()}let r=["atf2","atf3","atf4","atf4e","crsts","luf"];function f(p){t.$$.not_equal(n.budget,p)&&(n.budget=p,i(0,n))}function l(p){t.$$.not_equal(n.development_funded,p)&&(n.development_funded=p,i(0,n))}function o(p){t.$$.not_equal(n.construction_funded,p)&&(n.construction_funded=p,i(0,n))}function a(p,y){t.$$.not_equal(n.funding_sources[y],p)&&(n.funding_sources[y]=p,i(0,n))}function c(p){t.$$.not_equal(n.funding_sources.other,p)&&(n.funding_sources.other=p,i(0,n))}return t.$$set=p=>{"data"in p&&i(0,n=p.data),"onUpdate"in p&&i(2,s=p.onUpdate)},t.$$.update=()=>{t.$$.dirty&1&&u()},[n,r,s,f,l,o,a,c]}class lt extends J{constructor(e){super(),D(this,e,Yt,Xt,V,{data:0,onUpdate:2})}}function We(t){let e,i;return e=new me({props:{disabled:!t[2],$$slots:{default:[xt]},$$scope:{ctx:t}}}),e.$on("click",t[8]),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,s){const u={};s&4&&(u.disabled=!n[2]),s&262144&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){j(e,n)}}}function xt(t){let e;return{c(){e=G("Auto-fill with street names")},m(i,n){b(i,e,n)},d(i){i&&$(e)}}}function en(t){let e,i,n,s,u,r,f,l,o=t[0].length_meters&&We(t);return{c(){e=W("div"),e.textContent="Use the name from the LCWIP if possible",i=F(),n=W("input"),s=F(),o&&o.c(),u=se(),I(e,"class","govuk-hint"),I(n,"type","text"),I(n,"class","govuk-input"),I(n,"id",t[6])},m(a,c){b(a,e,c),b(a,i,c),b(a,n,c),Z(n,t[0].name),b(a,s,c),o&&o.m(a,c),b(a,u,c),r=!0,f||(l=te(n,"input",t[7]),f=!0)},p(a,c){c&1&&n.value!==a[0].name&&Z(n,a[0].name),a[0].length_meters?o?(o.p(a,c),c&1&&d(o,1)):(o=We(a),o.c(),d(o,1),o.m(u.parentNode,u)):o&&(ne(),g(o,1,1,()=>{o=null}),ie())},i(a){r||(d(o),r=!0)},o(a){g(o),r=!1},d(a){a&&($(e),$(i),$(n),$(s),$(u)),o&&o.d(a),f=!1,l()}}}function Ge(t){let e,i,n=he(t[0].length_meters)+"",s;return{c(){e=W("p"),i=G("Length: "),s=G(n)},m(u,r){b(u,e,r),R(e,i),R(e,s)},p(u,r){r&1&&n!==(n=he(u[0].length_meters)+"")&&oe(s,n)},d(u){u&&$(e)}}}function Je(t){let e,i,n,s,u,r,f,l,o,a,c,p,y,C,M,O;function k(m){t[12](m)}let _={label:"Type"};t[0].pipeline.atf4_type!==void 0&&(_.value=t[0].pipeline.atf4_type),e=new rt({props:_}),B.push(()=>L(e,"value",k));function P(m){t[13](m)}let U={label:"Accuracy of mapped data",choices:[["high","High"],["medium","Medium"],["low","Low"]],required:!0,inlineSmall:!0};t[0].pipeline.accuracy!==void 0&&(U.value=t[0].pipeline.accuracy),s=new ce({props:U}),B.push(()=>L(s,"value",P));function S(m){t[14](m)}let T={$$slots:{default:[tn]},$$scope:{ctx:t}};t[0].pipeline.is_alternative!==void 0&&(T.checked=t[0].pipeline.is_alternative),f=new pe({props:T}),B.push(()=>L(f,"checked",S));let v=t[4]&&t[0].is_coverage_polygon!==void 0&&De(t);function Q(m){t[16](m)}let H={required:!1,onUpdate:sn};t[0].pipeline!==void 0&&(H.data=t[0].pipeline),c=new st({props:H}),B.push(()=>L(c,"data",Q));function K(m){t[17](m)}let x={onUpdate:ln};return t[0].pipeline!==void 0&&(x.data=t[0].pipeline),C=new lt({props:x}),B.push(()=>L(C,"data",K)),{c(){q(e.$$.fragment),n=F(),q(s.$$.fragment),r=F(),q(f.$$.fragment),o=F(),v&&v.c(),a=F(),q(c.$$.fragment),y=F(),q(C.$$.fragment)},m(m,h){N(e,m,h),b(m,n,h),N(s,m,h),b(m,r,h),N(f,m,h),b(m,o,h),v&&v.m(m,h),b(m,a,h),N(c,m,h),b(m,y,h),N(C,m,h),O=!0},p(m,h){const w={};!i&&h&1&&(i=!0,w.value=m[0].pipeline.atf4_type,A(()=>i=!1)),e.$set(w);const E={};!u&&h&1&&(u=!0,E.value=m[0].pipeline.accuracy,A(()=>u=!1)),s.$set(E);const z={};h&262144&&(z.$$scope={dirty:h,ctx:m}),!l&&h&1&&(l=!0,z.checked=m[0].pipeline.is_alternative,A(()=>l=!1)),f.$set(z),m[4]&&m[0].is_coverage_polygon!==void 0?v?(v.p(m,h),h&1&&d(v,1)):(v=De(m),v.c(),d(v,1),v.m(a.parentNode,a)):v&&(ne(),g(v,1,1,()=>{v=null}),ie());const X={};!p&&h&1&&(p=!0,X.data=m[0].pipeline,A(()=>p=!1)),c.$set(X);const Y={};!M&&h&1&&(M=!0,Y.data=m[0].pipeline,A(()=>M=!1)),C.$set(Y)},i(m){O||(d(e.$$.fragment,m),d(s.$$.fragment,m),d(f.$$.fragment,m),d(v),d(c.$$.fragment,m),d(C.$$.fragment,m),O=!0)},o(m){g(e.$$.fragment,m),g(s.$$.fragment,m),g(f.$$.fragment,m),g(v),g(c.$$.fragment,m),g(C.$$.fragment,m),O=!1},d(m){m&&($(n),$(r),$(o),$(a),$(y)),j(e,m),j(s,m),j(f,m),v&&v.d(m),j(c,m),j(C,m)}}}function tn(t){let e;return{c(){e=G("Is this an alternative route and not the default option?")},m(i,n){b(i,e,n)},d(i){i&&$(e)}}}function De(t){let e,i,n;function s(r){t[15](r)}let u={$$slots:{default:[nn]},$$scope:{ctx:t}};return t[0].is_coverage_polygon!==void 0&&(u.checked=t[0].is_coverage_polygon),e=new pe({props:u}),B.push(()=>L(e,"checked",s)),{c(){q(e.$$.fragment)},m(r,f){N(e,r,f),n=!0},p(r,f){const l={};f&262144&&(l.$$scope={dirty:f,ctx:r}),!i&&f&1&&(i=!0,l.checked=r[0].is_coverage_polygon,A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function nn(t){let e;return{c(){e=G(`Does this polygon show the coverage of the scheme? (All area considered
      while making the scheme)`)},m(i,n){b(i,e,n)},d(i){i&&$(e)}}}function rn(t){let e,i,n,s,u,r,f,l,o,a,c;e=new fe({props:{label:"Name",id:t[6],$$slots:{default:[en]},$$scope:{ctx:t}}});function p(_){t[10](_)}let y={label:"Scheme",choices:Object.values(t[3].schemes).map(t[9])};t[0].scheme_reference!==void 0&&(y.value=t[0].scheme_reference),n=new Ne({props:y}),B.push(()=>L(n,"value",p));function C(_){t[11](_)}let M={label:"Description"};t[0].description!==void 0&&(M.value=t[0].description),r=new je({props:M}),B.push(()=>L(r,"value",C));let O=t[0].length_meters&&Ge(t),k=t[0].pipeline&&Je(t);return{c(){q(e.$$.fragment),i=F(),q(n.$$.fragment),u=F(),q(r.$$.fragment),l=F(),O&&O.c(),o=F(),k&&k.c(),a=se()},m(_,P){N(e,_,P),b(_,i,P),N(n,_,P),b(_,u,P),N(r,_,P),b(_,l,P),O&&O.m(_,P),b(_,o,P),k&&k.m(_,P),b(_,a,P),c=!0},p(_,[P]){const U={};P&262149&&(U.$$scope={dirty:P,ctx:_}),e.$set(U);const S={};P&8&&(S.choices=Object.values(_[3].schemes).map(_[9])),!s&&P&1&&(s=!0,S.value=_[0].scheme_reference,A(()=>s=!1)),n.$set(S);const T={};!f&&P&1&&(f=!0,T.value=_[0].description,A(()=>f=!1)),r.$set(T),_[0].length_meters?O?O.p(_,P):(O=Ge(_),O.c(),O.m(o.parentNode,o)):O&&(O.d(1),O=null),_[0].pipeline?k?(k.p(_,P),P&1&&d(k,1)):(k=Je(_),k.c(),d(k,1),k.m(a.parentNode,a)):k&&(ne(),g(k,1,1,()=>{k=null}),ie())},i(_){c||(d(e.$$.fragment,_),d(n.$$.fragment,_),d(r.$$.fragment,_),d(k),c=!0)},o(_){g(e.$$.fragment,_),g(n.$$.fragment,_),g(r.$$.fragment,_),g(k),c=!1},d(_){_&&($(i),$(u),$(l),$(o),$(a)),j(e,_),j(n,_),j(r,_),O&&O.d(_),k&&k.d(_)}}}const sn=()=>{},ln=()=>{};function un(t,e,i){let n,s,u=de,r=()=>(u(),u=ke(f,v=>i(3,s=v)),f);ve(t,tt,v=>i(2,n=v)),t.$$.on_destroy.push(()=>u());let{gjSchemes:f}=e;r();let{props:l}=e;l.pipeline||(l.pipeline={atf4_type:"",accuracy:"",is_alternative:!1,development_funded:!1,construction_funded:!1,funding_sources:$e(),status:"",timescale:""}),l.is_coverage_polygon||(l.is_coverage_polygon=!1);const o=(s.features.filter(v=>v.properties.is_coverage_polygon).length==0||l.is_coverage_polygon===!0)&&l.intervention_type==="area";function a(){try{i(0,l.name=n.inner.routeNameForWaypoints(l.waypoints),l)}catch(v){window.alert(`Couldn't auto-name route: ${v}`)}}let c=ue();function p(){l.name=this.value,i(0,l)}const y=()=>a(),C=v=>[v.scheme_reference,Oe(v)];function M(v){t.$$.not_equal(l.scheme_reference,v)&&(l.scheme_reference=v,i(0,l))}function O(v){t.$$.not_equal(l.description,v)&&(l.description=v,i(0,l))}function k(v){t.$$.not_equal(l.pipeline.atf4_type,v)&&(l.pipeline.atf4_type=v,i(0,l))}function _(v){t.$$.not_equal(l.pipeline.accuracy,v)&&(l.pipeline.accuracy=v,i(0,l))}function P(v){t.$$.not_equal(l.pipeline.is_alternative,v)&&(l.pipeline.is_alternative=v,i(0,l))}function U(v){t.$$.not_equal(l.is_coverage_polygon,v)&&(l.is_coverage_polygon=v,i(0,l))}function S(v){t.$$.not_equal(l.pipeline,v)&&(l.pipeline=v,i(0,l))}function T(v){t.$$.not_equal(l.pipeline,v)&&(l.pipeline=v,i(0,l))}return t.$$set=v=>{"gjSchemes"in v&&r(i(1,f=v.gjSchemes)),"props"in v&&i(0,l=v.props)},[l,f,n,s,o,a,c,p,y,C,M,O,k,_,P,U,S,T]}class on extends J{constructor(e){super(),D(this,e,un,rn,V,{gjSchemes:1,props:0})}}function Ve(t,e,i){const n=t.slice();return n[7]=e[i][0],n[8]=e[i][1],n}function ze(t){let e,i;return e=new me({props:{$$slots:{default:[fn]},$$scope:{ctx:t}}}),e.$on("click",t[4]),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,s){const u={};s&2048&&(u.$$scope={dirty:s,ctx:n}),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){j(e,n)}}}function fn(t){let e;return{c(){e=G("Handle extra GeoJSON properties")},m(i,n){b(i,e,n)},d(i){i&&$(e)}}}function He(t){let e,i,n=t[7]+"",s,u,r=JSON.stringify(t[8])+"",f,l;return{c(){e=W("li"),i=W("b"),s=G(n),u=G(`
        = `),f=G(r),l=F()},m(o,a){b(o,e,a),R(e,i),R(i,s),R(e,u),R(e,f),R(e,l)},p(o,a){a&2&&n!==(n=o[7]+"")&&oe(s,n),a&2&&r!==(r=JSON.stringify(o[8])+"")&&oe(f,r)},d(o){o&&$(e)}}}function an(t){let e;return{c(){e=G("Remove these properties")},m(i,n){b(i,e,n)},d(i){i&&$(e)}}}function cn(t){let e;return{c(){e=G("Cancel")},m(i,n){b(i,e,n)},d(i){i&&$(e)}}}function pn(t){let e,i,n,s;return e=new Bt({props:{$$slots:{default:[an]},$$scope:{ctx:t}}}),e.$on("click",t[2]),n=new me({props:{$$slots:{default:[cn]},$$scope:{ctx:t}}}),n.$on("click",t[5]),{c(){q(e.$$.fragment),i=F(),q(n.$$.fragment)},m(u,r){N(e,u,r),b(u,i,r),N(n,u,r),s=!0},p(u,r){const f={};r&2048&&(f.$$scope={dirty:r,ctx:u}),e.$set(f);const l={};r&2048&&(l.$$scope={dirty:r,ctx:u}),n.$set(l)},i(u){s||(d(e.$$.fragment,u),d(n.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),s=!1},d(u){u&&$(i),j(e,u),j(n,u)}}}function _n(t){let e,i,n,s,u,r,f=ge(Object.entries(t[1])),l=[];for(let o=0;o<f.length;o+=1)l[o]=He(Ve(t,f,o));return u=new $t({props:{$$slots:{default:[pn]},$$scope:{ctx:t}}}),{c(){e=W("p"),e.textContent="The unexpected properties:",i=F(),n=W("ul");for(let o=0;o<l.length;o+=1)l[o].c();s=F(),q(u.$$.fragment)},m(o,a){b(o,e,a),b(o,i,a),b(o,n,a);for(let c=0;c<l.length;c+=1)l[c]&&l[c].m(n,null);b(o,s,a),N(u,o,a),r=!0},p(o,a){if(a&2){f=ge(Object.entries(o[1]));let p;for(p=0;p<f.length;p+=1){const y=Ve(o,f,p);l[p]?l[p].p(y,a):(l[p]=He(y),l[p].c(),l[p].m(n,null))}for(;p<l.length;p+=1)l[p].d(1);l.length=f.length}const c={};a&2049&&(c.$$scope={dirty:a,ctx:o}),u.$set(c)},i(o){r||(d(u.$$.fragment,o),r=!0)},o(o){g(u.$$.fragment,o),r=!1},d(o){o&&($(e),$(i),$(n),$(s)),nt(l,o),j(u,o)}}}function mn(t){let e=Object.entries(t[1]).length>0,i,n,s,u,r=e&&ze(t);function f(o){t[6](o)}let l={title:"This imported GeoJSON feature has unexpected properties",$$slots:{default:[_n]},$$scope:{ctx:t}};return t[0]!==void 0&&(l.open=t[0]),n=new at({props:l}),B.push(()=>L(n,"open",f)),{c(){r&&r.c(),i=F(),q(n.$$.fragment)},m(o,a){r&&r.m(o,a),b(o,i,a),N(n,o,a),u=!0},p(o,[a]){a&2&&(e=Object.entries(o[1]).length>0),e?r?(r.p(o,a),a&2&&d(r,1)):(r=ze(o),r.c(),d(r,1),r.m(i.parentNode,i)):r&&(ne(),g(r,1,1,()=>{r=null}),ie());const c={};a&2051&&(c.$$scope={dirty:a,ctx:o}),!s&&a&1&&(s=!0,c.open=o[0],A(()=>s=!1)),n.$set(c)},i(o){u||(d(r),d(n.$$.fragment,o),u=!0)},o(o){g(r),g(n.$$.fragment,o),u=!1},d(o){o&&$(i),r&&r.d(o),j(n,o)}}}function dn(t,e,i){let n,{props:s}=e,u=!1;function r(){i(0,u=!1);for(let a of Object.keys(n))delete s[a];i(3,s)}const f=()=>i(0,u=!0),l=()=>i(0,u=!1);function o(a){u=a,i(0,u)}return t.$$set=a=>{"props"in a&&i(3,s=a.props)},t.$$.update=()=>{t.$$.dirty&8&&i(1,n=ot(s))},[u,n,r,s,f,l,o]}class gn extends J{constructor(e){super(),D(this,e,dn,mn,V,{props:3})}}function Qe(t){let e,i,n;function s(r){t[5](r)}let u={};return t[0]!==void 0&&(u.props=t[0]),e=new gn({props:u}),B.push(()=>L(e,"props",s)),{c(){q(e.$$.fragment)},m(r,f){N(e,r,f),n=!0},p(r,f){const l={};!i&&f&1&&(i=!0,l.props=r[0],A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function hn(t){let e,i,n;function s(r){t[7](r)}let u={gjSchemes:t[1]};return t[0]!==void 0&&(u.props=t[0]),e=new on({props:u}),B.push(()=>L(e,"props",s)),{c(){q(e.$$.fragment)},m(r,f){N(e,r,f),n=!0},p(r,f){const l={};f&2&&(l.gjSchemes=r[1]),!i&&f&1&&(i=!0,l.props=r[0],A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function bn(t){let e,i,n;function s(r){t[6](r)}let u={gjSchemes:t[1]};return t[0]!==void 0&&(u.props=t[0]),e=new Wt({props:u}),B.push(()=>L(e,"props",s)),{c(){q(e.$$.fragment)},m(r,f){N(e,r,f),n=!0},p(r,f){const l={};f&2&&(l.gjSchemes=r[1]),!i&&f&1&&(i=!0,l.props=r[0],A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function $n(t){let e,i,n,s,u,r=t[2]!=null&&Qe(t);const f=[bn,hn],l=[];function o(a,c){return a[3]=="v1"?0:a[3]=="pipeline"?1:-1}return~(i=o(t))&&(n=l[i]=f[i](t)),{c(){r&&r.c(),e=F(),n&&n.c(),s=se()},m(a,c){r&&r.m(a,c),b(a,e,c),~i&&l[i].m(a,c),b(a,s,c),u=!0},p(a,[c]){a[2]!=null?r?(r.p(a,c),c&4&&d(r,1)):(r=Qe(a),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(ne(),g(r,1,1,()=>{r=null}),ie());let p=i;i=o(a),i===p?~i&&l[i].p(a,c):(n&&(ne(),g(l[p],1,1,()=>{l[p]=null}),ie()),~i?(n=l[i],n?n.p(a,c):(n=l[i]=f[i](a),n.c()),d(n,1),n.m(s.parentNode,s)):n=null)},i(a){u||(d(r),d(n),u=!0)},o(a){g(r),g(n),u=!1},d(a){a&&($(e),$(s)),r&&r.d(a),~i&&l[i].d(a)}}}function vn(t,e,i){let n;ve(t,re,c=>i(3,n=c));let{cfg:s}=e,{gjSchemes:u}=e,{id:r}=e,{props:f}=e;function l(c){f=c,i(0,f)}function o(c){f=c,i(0,f)}function a(c){f=c,i(0,f)}return t.$$set=c=>{"cfg"in c&&i(4,s=c.cfg),"gjSchemes"in c&&i(1,u=c.gjSchemes),"id"in c&&i(2,r=c.id),"props"in c&&i(0,f=c.props)},[f,u,r,n,s,l,o,a]}class kn extends J{constructor(e){super(),D(this,e,vn,$n,V,{cfg:4,gjSchemes:1,id:2,props:0})}}function yn(t){let e,i,n;function s(r){t[3](r)}let u={label:"Scheme name",required:!0};return t[2].schemes[t[1]].scheme_name!==void 0&&(u.value=t[2].schemes[t[1]].scheme_name),e=new Fe({props:u}),B.push(()=>L(e,"value",s)),{c(){q(e.$$.fragment)},m(r,f){N(e,r,f),n=!0},p(r,[f]){const l={};!i&&f&6&&(i=!0,l.value=r[2].schemes[r[1]].scheme_name,A(()=>i=!1)),e.$set(l)},i(r){n||(d(e.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),n=!1},d(r){j(e,r)}}}function wn(t,e,i){let n,s=de,u=()=>(s(),s=ke(r,o=>i(2,n=o)),r);t.$$.on_destroy.push(()=>s());let{gjSchemes:r}=e;u();let{scheme_reference:f}=e;function l(o){t.$$.not_equal(n.schemes[f].scheme_name,o)&&(n.schemes[f].scheme_name=o,r.set(n))}return t.$$set=o=>{"gjSchemes"in o&&u(i(0,r=o.gjSchemes)),"scheme_reference"in o&&i(1,f=o.scheme_reference)},[r,f,n,l]}class Sn extends J{constructor(e){super(),D(this,e,wn,yn,V,{gjSchemes:0,scheme_reference:1})}}function qn(t){let e,i,n,s,u,r,f,l,o,a,c,p,y,C,M,O,k,_,P,U,S;e=new _e({props:{errorMessage:t[4]}});function T(w){t[6](w)}let v={label:"Scheme name",required:!0};t[5].schemes[t[1]].scheme_name!==void 0&&(v.value=t[5].schemes[t[1]].scheme_name),n=new Fe({props:v}),B.push(()=>L(n,"value",T));function Q(w){t[7](w)}let H={label:"Scheme type",choices:[["cycling route","Cycling route"],["walking route","Walking route"],["shared-use route","Shared-use route"],["cycling and walking route","Cycling and walking route, not shared use"],["area-based scheme","Area-based scheme"],["intersection","Intersection/junction scheme"]],inlineSmall:!0,required:!0};t[2].scheme_type!==void 0&&(H.value=t[2].scheme_type),o=new ce({props:H}),B.push(()=>L(o,"value",Q));function K(w){t[8](w)}let x={label:"Type of the main intervention"};t[2].atf4_lead_type!==void 0&&(x.value=t[2].atf4_lead_type),p=new rt({props:x}),B.push(()=>L(p,"value",K));function m(w){t[9](w)}let h={label:"Scheme description (150 words max)"};return t[2].scheme_description!==void 0&&(h.value=t[2].scheme_description),M=new je({props:h}),B.push(()=>L(M,"value",m)),_=new st({props:{data:t[2],required:!0,onUpdate:t[10]}}),U=new lt({props:{data:t[2],onUpdate:t[11]}}),{c(){q(e.$$.fragment),i=F(),q(n.$$.fragment),u=F(),r=W("fieldset"),f=W("legend"),f.textContent="Basic information",l=F(),q(o.$$.fragment),c=F(),q(p.$$.fragment),C=F(),q(M.$$.fragment),k=F(),q(_.$$.fragment),P=F(),q(U.$$.fragment),I(f,"class","govuk-fieldset__legend"),I(r,"class","govuk-fieldset svelte-1bxyfcq")},m(w,E){N(e,w,E),b(w,i,E),N(n,w,E),b(w,u,E),b(w,r,E),R(r,f),R(r,l),N(o,r,null),R(r,c),N(p,r,null),R(r,C),N(M,r,null),b(w,k,E),N(_,w,E),b(w,P,E),N(U,w,E),S=!0},p(w,[E]){const z={};E&16&&(z.errorMessage=w[4]),e.$set(z);const X={};!s&&E&34&&(s=!0,X.value=w[5].schemes[w[1]].scheme_name,A(()=>s=!1)),n.$set(X);const Y={};!a&&E&4&&(a=!0,Y.value=w[2].scheme_type,A(()=>a=!1)),o.$set(Y);const ae={};!y&&E&4&&(y=!0,ae.value=w[2].atf4_lead_type,A(()=>y=!1)),p.$set(ae);const Pe={};!O&&E&4&&(O=!0,Pe.value=w[2].scheme_description,A(()=>O=!1)),M.$set(Pe);const ye={};E&4&&(ye.data=w[2]),E&8&&(ye.onUpdate=w[10]),_.$set(ye);const we={};E&4&&(we.data=w[2]),E&8&&(we.onUpdate=w[11]),U.$set(we)},i(w){S||(d(e.$$.fragment,w),d(n.$$.fragment,w),d(o.$$.fragment,w),d(p.$$.fragment,w),d(M.$$.fragment,w),d(_.$$.fragment,w),d(U.$$.fragment,w),S=!0)},o(w){g(e.$$.fragment,w),g(n.$$.fragment,w),g(o.$$.fragment,w),g(p.$$.fragment,w),g(M.$$.fragment,w),g(_.$$.fragment,w),g(U.$$.fragment,w),S=!1},d(w){w&&($(i),$(u),$(r),$(k),$(P)),j(e,w),j(n,w),j(o),j(p),j(M),j(_,w),j(U,w)}}}function Nn(t,e,i){let n,s,u=de,r=()=>(u(),u=ke(f,_=>i(5,s=_)),f);t.$$.on_destroy.push(()=>u());let{gjSchemes:f}=e;r();let{scheme_reference:l}=e,o=s.schemes[l].pipeline,a=0;ct(()=>{f.update(_=>(Object.hasOwn(_.schemes,l)&&(_.schemes[l].pipeline=o),_))});function c(_,P){return o.scheme_type&&o.status&&o.timescale?"":"Missing some required data"}function p(_){t.$$.not_equal(s.schemes[l].scheme_name,_)&&(s.schemes[l].scheme_name=_,f.set(s))}function y(_){t.$$.not_equal(o.scheme_type,_)&&(o.scheme_type=_,i(2,o))}function C(_){t.$$.not_equal(o.atf4_lead_type,_)&&(o.atf4_lead_type=_,i(2,o))}function M(_){t.$$.not_equal(o.scheme_description,_)&&(o.scheme_description=_,i(2,o))}const O=()=>i(3,a++,a),k=()=>i(3,a++,a);return t.$$set=_=>{"gjSchemes"in _&&r(i(0,f=_.gjSchemes)),"scheme_reference"in _&&i(1,l=_.scheme_reference)},t.$$.update=()=>{t.$$.dirty&12&&i(4,n=c())},[f,l,o,a,n,s,p,y,C,M,O,k]}class jn extends J{constructor(e){super(),D(this,e,Nn,qn,V,{gjSchemes:0,scheme_reference:1})}}function Fn(t){let e,i;return e=new Sn({props:{gjSchemes:t[0],scheme_reference:t[1]}}),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,s){const u={};s&1&&(u.gjSchemes=n[0]),s&2&&(u.scheme_reference=n[1]),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){j(e,n)}}}function On(t){let e,i;return e=new jn({props:{gjSchemes:t[0],scheme_reference:t[1]}}),{c(){q(e.$$.fragment)},m(n,s){N(e,n,s),i=!0},p(n,s){const u={};s&1&&(u.gjSchemes=n[0]),s&2&&(u.scheme_reference=n[1]),e.$set(u)},i(n){i||(d(e.$$.fragment,n),i=!0)},o(n){g(e.$$.fragment,n),i=!1},d(n){j(e,n)}}}function Pn(t){let e,i,n,s;const u=[On,Fn],r=[];function f(l,o){return l[2]=="pipeline"?0:1}return e=f(t),i=r[e]=u[e](t),{c(){i.c(),n=se()},m(l,o){r[e].m(l,o),b(l,n,o),s=!0},p(l,[o]){let a=e;e=f(l),e===a?r[e].p(l,o):(ne(),g(r[a],1,1,()=>{r[a]=null}),ie(),i=r[e],i?i.p(l,o):(i=r[e]=u[e](l),i.c()),d(i,1),i.m(n.parentNode,n))},i(l){s||(d(i),s=!0)},o(l){g(i),s=!1},d(l){l&&$(n),r[e].d(l)}}}function Cn(t,e,i){let n;ve(t,re,r=>i(2,n=r));let{gjSchemes:s}=e,{scheme_reference:u}=e;return t.$$set=r=>{"gjSchemes"in r&&i(0,s=r.gjSchemes),"scheme_reference"in r&&i(1,u=r.scheme_reference)},[s,u,n]}class Mn extends J{constructor(e){super(),D(this,e,Cn,Pn,V,{gjSchemes:0,scheme_reference:1})}}let En={interventionName:In,schemeName:Oe,backfill:Un,initializeEmptyScheme:Tn,interventionWarning:Bn,editFeatureForm:kn,editSchemeForm:Mn,newPointFeature:t=>{t.properties.intervention_type="other"},newPolygonFeature:t=>{t.properties.intervention_type="area",t.properties.is_coverage_polygon=!1},newLineStringFeature:t=>{t.properties.intervention_type="route",t.properties.route_name&&!t.properties.name&&le(re)!="pipeline"&&(t.properties.name=t.properties.route_name),delete t.properties.route_name,delete t.properties.full_path},updateFeature:(t,e)=>{e.properties.route_name&&!t.properties.name&&le(re)!="pipeline"&&(t.properties.name=e.properties.route_name)},getStreetViewRoadLayerNames:t=>mt(t,le(pt)),layerZorder:dt};function Un(t){var n,s,u,r,f,l,o,a;let e=le(re),i=1;for(let c of t.features)c.properties||(c.properties={name:"",scheme_reference:"",description:"",intervention_type:"other",is_coverage_polygon:!1}),e=="pipeline"&&!c.properties.intervention_type&&(c.properties.intervention_type=new Map([["LineString","route"],["Polygon","area"]]).get(c.geometry.type)??"other"),c.geometry.type=="LineString"&&!c.properties.length_meters&&(c.properties.length_meters=gt(c,{units:"kilometers"})*1e3),c.id=i++;if(!t.schemes){let c=ue();t.schemes={},t.schemes[c]={scheme_reference:c,color:Ue()},t.scheme_name&&(t.schemes[c].scheme_name=t.scheme_name,delete t.scheme_name),t.pipeline&&(t.schemes[c].pipeline=t.pipeline,delete t.pipeline);for(let p of t.features)p.properties.scheme_reference=c}for(let c of Object.values(t.schemes)){let p=c;if(p.color??(p.color=Ue()),e=="pipeline"){p.pipeline??(p.pipeline=ut()),(n=p.pipeline).development_funded??(n.development_funded=!1),(s=p.pipeline).construction_funded??(s.construction_funded=!1),(u=p.pipeline).funding_sources??(u.funding_sources=$e()),delete p.pipeline.budget_funded,delete p.pipeline.budget_unfunded,delete p.pipeline.funding_source,delete p.pipeline.funded;for(let y of t.features)y.properties.pipeline&&((r=y.properties.pipeline).development_funded??(r.development_funded=!1),(f=y.properties.pipeline).construction_funded??(f.construction_funded=!1),(l=y.properties.pipeline).funding_sources??(l.funding_sources=$e()),(o=y.properties.pipeline).status??(o.status=""),(a=y.properties.pipeline).timescale??(a.timescale=""))}}return t}function Tn(t){let e=t;return le(re)=="pipeline"&&(e.pipeline=ut()),e}function ut(){return{scheme_type:"",atf4_lead_type:"",scheme_description:"",status:"",timescale:"",development_funded:!1,construction_funded:!1,funding_sources:$e()}}function $e(){return{atf2:!1,atf3:!1,atf4:!1,atf4e:!1,crsts:!1,luf:!1,other:""}}function In(t){if(t.properties.name)return t.properties.name;var e=t.properties.intervention_type;return e=="other"&&(t.geometry.type=="Point"?e="point":t.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function Oe(t){return t.scheme_name??"Untitled scheme"}function Bn(t){var n;let e=le(re);if(!t.name)return"No name";if(!new Set(["route","area","crossing","other"]).has(t.intervention_type))return"No intervention type";if(e=="pipeline"&&!((n=t.pipeline)!=null&&n.accuracy))return"Accuracy not specified";let i=ot(t);return Object.entries(i).length>0?`Extra GeoJSON properties: ${Object.keys(i).join(", ")}`:null}function ot(t){let e=le(re),i=JSON.parse(JSON.stringify(t));for(let n of["name","description","intervention_type","length_meters","waypoints","hide_while_editing","is_coverage_polygon","scheme_reference"])delete i[n];if(e=="pipeline"&&i.pipeline){for(let n of["atf4_type","accuracy","is_alternative","budget","development_funded","construction_funded","funding_sources","status","timescale","timescale_year","year_published","year_consulted"])delete i.pipeline[n];Object.entries(i.pipeline).length==0&&delete i.pipeline}return i}export{$t as B,Bt as W,Un as b,En as c};
