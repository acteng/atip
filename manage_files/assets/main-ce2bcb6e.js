import{S as ce,i as de,s as _e,e as w,l as be,a as c,b as F,c as y,n as W,d as L,f as we,E as pe,R as Ae,g as X,h as Y,F as ke,j as d,k as Se,m as i,o as _,t as f,p as $,q as ye,r as Z,u as h,v as Le,w as Me,x as G,y as Ce,z as Ee,A as Fe,B as Te,C as Be,D as $e}from"./files-b25757c5.js";import{A as De,P as He}from"./Popup-fdabe20f.js";import{A as je,L as Ge,D as Ie,M as Oe,G as Je,F as Ne,h as Pe,a as Re}from"./MapLibreMap-68d53381.js";import{A as qe}from"./About-361fdd20.js";function Ue(a){let t,r,n;return{c(){t=w("div"),t.innerHTML=`<img src="${be}" alt="Active Travel England logo" class="svelte-13flgp1"/>`,r=c(),n=w("div"),F(t,"class","black-bar svelte-13flgp1"),F(n,"class","green-bar svelte-13flgp1")},m(l,e){y(l,t,e),y(l,r,e),y(l,n,e)},p:W,i:W,o:W,d(l){l&&(L(t),L(r),L(n))}}}class ze extends ce{constructor(t){super(),de(this,t,null,Ue,_e,{})}}function Ve(a){let t;return{c(){t=G("About")},m(r,n){y(r,t,n)},d(r){r&&L(t)}}}function me(a){let t,r,n;function l(o){a[11](o)}let e={label:"Select Transport Authority or Local Authority District",options:a[1].features.map(ge)};return a[0]!==void 0&&(e.value=a[0]),t=new De({props:e}),X.push(()=>Y(t,"value",l)),{c(){d(t.$$.fragment)},m(o,v){_(t,o,v),n=!0},p(o,v){const u={};v&2&&(u.options=o[1].features.map(ge)),!r&&v&1&&(r=!0,u.value=o[0],Z(()=>r=!1)),t.$set(u)},i(o){n||(f(t.$$.fragment,o),n=!0)},o(o){$(t.$$.fragment,o),n=!1},d(o){h(t,o)}}}function Ke(a){let t;return{c(){t=G("Start")},m(r,n){y(r,t,n)},d(r){r&&L(t)}}}function Qe(a){let t,r=a[17].name+"",n,l,e=a[17].level+"",o,v;return{c(){t=w("p"),n=G(r),l=G(" ("),o=G(e),v=G(")")},m(u,b){y(u,t,b),i(t,n),i(t,l),i(t,o),i(t,v)},p(u,b){b&131072&&r!==(r=u[17].name+"")&&$e(n,r),b&131072&&e!==(e=u[17].level+"")&&$e(o,e)},d(u){u&&L(t)}}}function We(a){let t,r;return t=new He({props:{$$slots:{default:[Qe,({props:n})=>({17:n}),({props:n})=>n?131072:0]},$$scope:{ctx:a}}}),{c(){d(t.$$.fragment)},m(n,l){_(t,n,l),r=!0},p(n,l){const e={};l&393216&&(e.$$scope={dirty:l,ctx:n}),t.$set(e)},i(n){r||(f(t.$$.fragment,n),r=!0)},o(n){$(t.$$.fragment,n),r=!1},d(n){h(t,n)}}}function Xe(a){let t,r,n,l;return t=new Ne({props:{id:"boundaries",filter:["==",["get","level"],a[4]],paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":Pe(0,.5)},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[We]},$$scope:{ctx:a}}}),t.$on("click",a[7]),n=new Re({props:{id:"boundaries-outline",filter:["==",["get","level"],a[4]],paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},manageHoverState:!0}}),{c(){d(t.$$.fragment),r=c(),d(n.$$.fragment)},m(e,o){_(t,e,o),y(e,r,o),_(n,e,o),l=!0},p(e,o){const v={};o&16&&(v.filter=["==",["get","level"],e[4]]),o&262144&&(v.$$scope={dirty:o,ctx:e}),t.$set(v);const u={};o&16&&(u.filter=["==",["get","level"],e[4]]),n.$set(u)},i(e){l||(f(t.$$.fragment,e),f(n.$$.fragment,e),l=!0)},o(e){$(t.$$.fragment,e),$(n.$$.fragment,e),l=!1},d(e){e&&L(r),h(t,e),h(n,e)}}}function Ye(a){let t,r;return t=new Je({props:{data:a[1],generateId:!0,$$slots:{default:[Xe]},$$scope:{ctx:a}}}),{c(){d(t.$$.fragment)},m(n,l){_(t,n,l),r=!0},p(n,l){const e={};l&2&&(e.data=n[1]),l&262160&&(e.$$scope={dirty:l,ctx:n}),t.$set(e)},i(n){r||(f(t.$$.fragment,n),r=!0)},o(n){$(t.$$.fragment,n),r=!1},d(n){h(t,n)}}}function Ze(a){let t,r,n,l,e,o,v,u,b,M,D,H,A,J,C,N,I,k,P,m,R,S,z,x,ee,te,T,ne,j,re,q,O,B,V,E,K,U;n=new ze({}),o=new je({}),b=new Ge({}),A=new we({props:{$$slots:{default:[Ve]},$$scope:{ctx:a}}}),A.$on("click",a[10]),C=new pe({props:{errorMessage:a[6]}});let p=a[1].features.length>0&&me(a);k=new Ie({props:{disabled:!a[5],$$slots:{default:[Ke]},$$scope:{ctx:a}}}),k.$on("click",a[8]);function he(s){a[12](s)}let ae={label:"Or pick from the map",choices:[["TA","Transport Authorities"],["LAD","Local Authority Districts"]],inlineSmall:!0};a[4]!==void 0&&(ae.value=a[4]),S=new Ae({props:ae}),X.push(()=>Y(S,"value",he)),T=new pe({props:{errorMessage:a[3]}}),j=new ke({props:{label:"Or import a GeoJSON file",onLoad:a[9]}}),B=new Oe({props:{style:"streets",startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Ye]},$$scope:{ctx:a}}});function ve(s){a[13](s)}let se={};return a[2]!==void 0&&(se.open=a[2]),E=new qe({props:se}),X.push(()=>Y(E,"open",ve)),{c(){t=w("div"),r=w("div"),d(n.$$.fragment),l=c(),e=w("div"),d(o.$$.fragment),v=c(),u=w("div"),d(b.$$.fragment),M=c(),D=w("h1"),D.textContent="Scheme Sketcher",H=c(),d(A.$$.fragment),J=c(),d(C.$$.fragment),N=c(),p&&p.c(),I=c(),d(k.$$.fragment),P=c(),m=w("hr"),R=c(),d(S.$$.fragment),x=c(),ee=w("hr"),te=c(),d(T.$$.fragment),ne=c(),d(j.$$.fragment),re=c(),q=w("div"),O=w("div"),d(B.$$.fragment),V=c(),d(E.$$.fragment),Se(u,"border-bottom","1px solid #b1b4b6"),F(e,"class","left svelte-lyn11h"),F(r,"class","govuk-grid-column-one-half govuk-prose"),F(O,"id","map"),F(O,"class","svelte-lyn11h"),F(q,"class","govuk-grid-column-one-half"),F(t,"class","govuk-grid-row")},m(s,g){y(s,t,g),i(t,r),_(n,r,null),i(r,l),i(r,e),_(o,e,null),i(e,v),i(e,u),_(b,u,null),i(e,M),i(e,D),i(e,H),_(A,e,null),i(e,J),_(C,e,null),i(e,N),p&&p.m(e,null),i(e,I),_(k,e,null),i(e,P),i(e,m),i(e,R),_(S,e,null),i(e,x),i(e,ee),i(e,te),_(T,e,null),i(e,ne),_(j,e,null),i(t,re),i(t,q),i(q,O),_(B,O,null),y(s,V,g),_(E,s,g),U=!0},p(s,[g]){const oe={};g&262144&&(oe.$$scope={dirty:g,ctx:s}),A.$set(oe),s[1].features.length>0?p?(p.p(s,g),g&2&&f(p,1)):(p=me(s),p.c(),f(p,1),p.m(e,I)):p&&(Ce(),$(p,1,1,()=>{p=null}),ye());const Q={};g&32&&(Q.disabled=!s[5]),g&262144&&(Q.$$scope={dirty:g,ctx:s}),k.$set(Q);const le={};!z&&g&16&&(z=!0,le.value=s[4],Z(()=>z=!1)),S.$set(le);const ie={};g&8&&(ie.errorMessage=s[3]),T.$set(ie);const ue={};g&262162&&(ue.$$scope={dirty:g,ctx:s}),B.$set(ue);const fe={};!K&&g&4&&(K=!0,fe.open=s[2],Z(()=>K=!1)),E.$set(fe)},i(s){U||(f(n.$$.fragment,s),f(o.$$.fragment,s),f(b.$$.fragment,s),f(A.$$.fragment,s),f(C.$$.fragment,s),f(p),f(k.$$.fragment,s),f(S.$$.fragment,s),f(T.$$.fragment,s),f(j.$$.fragment,s),f(B.$$.fragment,s),f(E.$$.fragment,s),U=!0)},o(s){$(n.$$.fragment,s),$(o.$$.fragment,s),$(b.$$.fragment,s),$(A.$$.fragment,s),$(C.$$.fragment,s),$(p),$(k.$$.fragment,s),$(S.$$.fragment,s),$(T.$$.fragment,s),$(j.$$.fragment,s),$(B.$$.fragment,s),$(E.$$.fragment,s),U=!1},d(s){s&&(L(t),L(V)),h(n),h(o),h(b),h(A),h(C),p&&p.d(),h(k),h(S),h(T),h(j),h(B),h(E,s)}}}const ge=a=>[a.properties.full_name,`${a.properties.name} (${a.properties.level})`];function xe(a,t,r){let n,l;Le(a,Be,m=>r(14,l=m));let e={type:"FeatureCollection",features:[]},o=!1,u=new URLSearchParams(window.location.search).get("error")||"",b="",M,D=new Set,H="TA";Me(async()=>{Ee(),r(1,e=await Fe());for(let m of e.features)D.add(m.properties.full_name)});function A(m){window.location.href=`files.html?authority=${m.detail.features[0].properties.full_name}&schema=${l}`}function J(){window.location.href=`files.html?authority=${M}&schema=${l}`}function C(m,R){try{window.location.href=Te(m,R,e)}catch(S){r(3,b=`Couldn't import file: ${S}`)}}const N=()=>r(2,o=!o);function I(m){M=m,r(0,M)}function k(m){H=m,r(4,H)}function P(m){o=m,r(2,o)}return a.$$.update=()=>{a.$$.dirty&1&&r(5,n=D.has(M))},[M,e,o,b,H,n,u,A,J,C,N,I,k,P]}class et extends ce{constructor(t){super(),de(this,t,xe,Ze,_e,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new et({target:document.getElementById("app")});
