import{S as ve,i as we,s as Ae,e as d,l as Se,a as c,b as T,c as L,n as X,d as M,f as Le,E as me,R as Me,g as Y,h as Z,F as Ce,j as A,k as Fe,m as i,o as k,t as _,p as b,q as Te,r as x,u as y,v as Ee,w as He,x as Be,y as j,z as ce,A as De,B as Ge,C as Ie,D as je,G as Oe,H as Pe,I as ge}from"./files-e2a11b57.js";import{A as Ne,P as Je}from"./Popup-bfb02a9a.js";import{A as Re,L as qe,D as Ue,M as ze,G as Ve,F as Ke,h as Qe,a as We}from"./MapLibreMap-2a70a298.js";import{A as Xe}from"./About-4e836d04.js";function Ye(r){let e,l,n;return{c(){e=d("div"),e.innerHTML=`<img src="${Se}" alt="Active Travel England logo" class="svelte-13flgp1"/>`,l=c(),n=d("div"),T(e,"class","black-bar svelte-13flgp1"),T(n,"class","green-bar svelte-13flgp1")},m(o,t){L(o,e,t),L(o,l,t),L(o,n,t)},p:X,i:X,o:X,d(o){o&&(M(e),M(l),M(n))}}}class Ze extends ve{constructor(e){super(),we(this,e,null,Ye,Ae,{})}}function de(r,e,l){const n=r.slice();return n[19]=e[l][0],n[20]=e[l][1],n}function xe(r){let e;return{c(){e=j("About")},m(l,n){L(l,e,n)},d(l){l&&M(e)}}}function _e(r){let e,l,n;function o(a){r[13](a)}let t={label:"Select Transport Authority or Local Authority District",options:r[1].features.map(be)};return r[0]!==void 0&&(t.value=r[0]),e=new Ne({props:t}),Y.push(()=>Z(e,"value",o)),{c(){A(e.$$.fragment)},m(a,g){k(e,a,g),n=!0},p(a,g){const p={};g&2&&(p.options=a[1].features.map(be)),!l&&g&1&&(l=!0,p.value=a[0],x(()=>l=!1)),e.$set(p)},i(a){n||(_(e.$$.fragment,a),n=!0)},o(a){b(e.$$.fragment,a),n=!1},d(a){y(e,a)}}}function et(r){let e;return{c(){e=j("Start")},m(l,n){L(l,e,n)},d(l){l&&M(e)}}}function tt(r){let e,l,n,o,t,a,g,p,m=ce(r[8]),u=[];for(let f=0;f<m.length;f+=1)u[f]=he(de(r,m,f));return{c(){e=d("hr"),l=c(),n=d("p"),n.textContent="Or choose an area with existing files",o=c(),t=d("table"),a=d("thead"),a.innerHTML="<tr><th>Area</th> <th>Number of files</th></tr>",g=c(),p=d("tbody");for(let f=0;f<u.length;f+=1)u[f].c()},m(f,S){L(f,e,S),L(f,l,S),L(f,n,S),L(f,o,S),L(f,t,S),i(t,a),i(t,g),i(t,p);for(let $=0;$<u.length;$+=1)u[$]&&u[$].m(p,null)},p(f,S){if(S&320){m=ce(f[8]);let $;for($=0;$<m.length;$+=1){const B=de(f,m,$);u[$]?u[$].p(B,S):(u[$]=he(B),u[$].c(),u[$].m(p,null))}for(;$<u.length;$+=1)u[$].d(1);u.length=m.length}},d(f){f&&(M(e),M(l),M(n),M(o),M(t)),De(u,f)}}}function he(r){let e,l,n,o=r[19]+"",t,a,g,p,m;return{c(){e=d("tr"),l=d("td"),n=d("a"),t=j(o),g=c(),p=d("td"),p.textContent=`${r[20]}`,m=c(),T(n,"href",a=`files.html?authority=${r[19]}&schema=${r[6]}`)},m(u,f){L(u,e,f),i(e,l),i(l,n),i(n,t),i(e,g),i(e,p),i(e,m)},p(u,f){f&64&&a!==(a=`files.html?authority=${u[19]}&schema=${u[6]}`)&&T(n,"href",a)},d(u){u&&M(e)}}}function nt(r){let e,l=r[18].name+"",n,o,t=r[18].level+"",a,g;return{c(){e=d("p"),n=j(l),o=j(" ("),a=j(t),g=j(")")},m(p,m){L(p,e,m),i(e,n),i(e,o),i(e,a),i(e,g)},p(p,m){m&262144&&l!==(l=p[18].name+"")&&ge(n,l),m&262144&&t!==(t=p[18].level+"")&&ge(a,t)},d(p){p&&M(e)}}}function lt(r){let e,l;return e=new Je({props:{$$slots:{default:[nt,({props:n})=>({18:n}),({props:n})=>n?262144:0]},$$scope:{ctx:r}}}),{c(){A(e.$$.fragment)},m(n,o){k(e,n,o),l=!0},p(n,o){const t={};o&8650752&&(t.$$scope={dirty:o,ctx:n}),e.$set(t)},i(n){l||(_(e.$$.fragment,n),l=!0)},o(n){b(e.$$.fragment,n),l=!1},d(n){y(e,n)}}}function rt(r){let e,l,n,o;return e=new Ke({props:{id:"boundaries",filter:["==",["get","level"],r[4]],paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":Qe(0,.5)},manageHoverState:!0,hoverCursor:"pointer",$$slots:{default:[lt]},$$scope:{ctx:r}}}),e.$on("click",r[9]),n=new We({props:{id:"boundaries-outline",filter:["==",["get","level"],r[4]],paint:{"line-color":"rgb(200, 100, 240)","line-width":2.5},manageHoverState:!0}}),{c(){A(e.$$.fragment),l=c(),A(n.$$.fragment)},m(t,a){k(e,t,a),L(t,l,a),k(n,t,a),o=!0},p(t,a){const g={};a&16&&(g.filter=["==",["get","level"],t[4]]),a&8388608&&(g.$$scope={dirty:a,ctx:t}),e.$set(g);const p={};a&16&&(p.filter=["==",["get","level"],t[4]]),n.$set(p)},i(t){o||(_(e.$$.fragment,t),_(n.$$.fragment,t),o=!0)},o(t){b(e.$$.fragment,t),b(n.$$.fragment,t),o=!1},d(t){t&&M(l),y(e,t),y(n,t)}}}function at(r){let e,l;return e=new Ve({props:{data:r[1],generateId:!0,$$slots:{default:[rt]},$$scope:{ctx:r}}}),{c(){A(e.$$.fragment)},m(n,o){k(e,n,o),l=!0},p(n,o){const t={};o&2&&(t.data=n[1]),o&8388624&&(t.$$scope={dirty:o,ctx:n}),e.$set(t)},i(n){l||(_(e.$$.fragment,n),l=!0)},o(n){b(e.$$.fragment,n),l=!1},d(n){y(e,n)}}}function st(r){let e,l,n,o,t,a,g,p,m,u,f,S,$,B,E,R,P,C,q,U,w,F,N,ee,te,ne,D,le,O,re,ae,z,J,G,K,H,Q,V;n=new Ze({}),a=new Re({}),m=new qe({}),$=new Le({props:{$$slots:{default:[xe]},$$scope:{ctx:r}}}),$.$on("click",r[12]),E=new me({props:{errorMessage:r[7]}});let h=r[1].features.length>0&&_e(r);C=new Ue({props:{disabled:!r[5],$$slots:{default:[et]},$$scope:{ctx:r}}}),C.$on("click",r[10]);function ke(s){r[14](s)}let se={label:"Or pick from the map",choices:[["TA","Transport Authorities"],["LAD","Local Authority Districts"]],inlineSmall:!0};r[4]!==void 0&&(se.value=r[4]),F=new Me({props:se}),Y.push(()=>Z(F,"value",ke)),D=new me({props:{errorMessage:r[3]}}),O=new Ce({props:{label:"Or import a GeoJSON file",onLoad:r[11]}});let I=r[8].length>0&&tt(r);G=new ze({props:{style:"streets",startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[at]},$$scope:{ctx:r}}});function ye(s){r[15](s)}let oe={};return r[2]!==void 0&&(oe.open=r[2]),H=new Xe({props:oe}),Y.push(()=>Z(H,"open",ye)),{c(){e=d("div"),l=d("div"),A(n.$$.fragment),o=c(),t=d("div"),A(a.$$.fragment),g=c(),p=d("div"),A(m.$$.fragment),u=c(),f=d("h1"),f.textContent="Scheme Sketcher",S=c(),A($.$$.fragment),B=c(),A(E.$$.fragment),R=c(),h&&h.c(),P=c(),A(C.$$.fragment),q=c(),U=d("hr"),w=c(),A(F.$$.fragment),ee=c(),te=d("hr"),ne=c(),A(D.$$.fragment),le=c(),A(O.$$.fragment),re=c(),I&&I.c(),ae=c(),z=d("div"),J=d("div"),A(G.$$.fragment),K=c(),A(H.$$.fragment),Fe(p,"border-bottom","1px solid #b1b4b6"),T(t,"class","left svelte-lyn11h"),T(l,"class","govuk-grid-column-one-half govuk-prose"),T(J,"id","map"),T(J,"class","svelte-lyn11h"),T(z,"class","govuk-grid-column-one-half"),T(e,"class","govuk-grid-row")},m(s,v){L(s,e,v),i(e,l),k(n,l,null),i(l,o),i(l,t),k(a,t,null),i(t,g),i(t,p),k(m,p,null),i(t,u),i(t,f),i(t,S),k($,t,null),i(t,B),k(E,t,null),i(t,R),h&&h.m(t,null),i(t,P),k(C,t,null),i(t,q),i(t,U),i(t,w),k(F,t,null),i(t,ee),i(t,te),i(t,ne),k(D,t,null),i(t,le),k(O,t,null),i(t,re),I&&I.m(t,null),i(e,ae),i(e,z),i(z,J),k(G,J,null),L(s,K,v),k(H,s,v),V=!0},p(s,[v]){const ie={};v&8388608&&(ie.$$scope={dirty:v,ctx:s}),$.$set(ie),s[1].features.length>0?h?(h.p(s,v),v&2&&_(h,1)):(h=_e(s),h.c(),_(h,1),h.m(t,P)):h&&(Ge(),b(h,1,1,()=>{h=null}),Te());const W={};v&32&&(W.disabled=!s[5]),v&8388608&&(W.$$scope={dirty:v,ctx:s}),C.$set(W);const ue={};!N&&v&16&&(N=!0,ue.value=s[4],x(()=>N=!1)),F.$set(ue);const fe={};v&8&&(fe.errorMessage=s[3]),D.$set(fe),s[8].length>0&&I.p(s,v);const pe={};v&8388626&&(pe.$$scope={dirty:v,ctx:s}),G.$set(pe);const $e={};!Q&&v&4&&(Q=!0,$e.open=s[2],x(()=>Q=!1)),H.$set($e)},i(s){V||(_(n.$$.fragment,s),_(a.$$.fragment,s),_(m.$$.fragment,s),_($.$$.fragment,s),_(E.$$.fragment,s),_(h),_(C.$$.fragment,s),_(F.$$.fragment,s),_(D.$$.fragment,s),_(O.$$.fragment,s),_(G.$$.fragment,s),_(H.$$.fragment,s),V=!0)},o(s){b(n.$$.fragment,s),b(a.$$.fragment,s),b(m.$$.fragment,s),b($.$$.fragment,s),b(E.$$.fragment,s),b(h),b(C.$$.fragment,s),b(F.$$.fragment,s),b(D.$$.fragment,s),b(O.$$.fragment,s),b(G.$$.fragment,s),b(H.$$.fragment,s),V=!1},d(s){s&&(M(e),M(K)),y(n),y(a),y(m),y($),y(E),h&&h.d(),y(C),y(F),y(D),y(O),I&&I.d(),y(G),y(H,s)}}}const be=r=>[r.properties.full_name,`${r.properties.name} (${r.properties.level})`];function ot(r,e,l){let n,o;Ee(r,Pe,w=>l(6,o=w));let t={type:"FeatureCollection",features:[]},a=!1,p=new URLSearchParams(window.location.search).get("error")||"",m="",u,f=new Set,S="TA",$=He();Be(async()=>{Ie(),l(1,t=await je());for(let w of t.features)f.add(w.properties.full_name)});function B(w){window.location.href=`files.html?authority=${w.detail.features[0].properties.full_name}&schema=${o}`}function E(){window.location.href=`files.html?authority=${u}&schema=${o}`}function R(w,F){try{window.location.href=Oe(w,F,t)}catch(N){l(3,m=`Couldn't import file: ${N}`)}}const P=()=>l(2,a=!a);function C(w){u=w,l(0,u)}function q(w){S=w,l(4,S)}function U(w){a=w,l(2,a)}return r.$$.update=()=>{r.$$.dirty&1&&l(5,n=f.has(u))},[u,t,a,m,S,n,o,p,$,B,E,R,P,C,q,U]}class it extends ve{constructor(e){super(),we(this,e,ot,st,Ae,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new it({target:document.getElementById("app")});
