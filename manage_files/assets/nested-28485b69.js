import{S as ae,i as re,s as se,e as f,b as O,c as j,n as K,d as M,H as fe,f as V,F as de,j as D,a as $,x as H,k as ie,o as R,m as a,p as C,q as ce,t as I,u as W,w as me,y as ue,z as he,I as ge,J as ee,K as pe,G as te}from"./index-fdf52a33.js";import{i as _e,l as Q,g as z,d as $e,e as we,W as ke,c as be}from"./config-abfb8c9d.js";import{H as ve}from"./colors-2c55fe44.js";function ye(n){let e;return{c(){e=f("div"),e.innerHTML=`<p class="govuk-phase-banner__content" style="margin-bottom: 0px"><strong class="govuk-tag govuk-phase-banner__content__tag">Alpha</strong> <span class="govuk-phase-banner__text">This is a new service. Contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      with any feedback.</span></p>`,O(e,"class","govuk-phase-banner")},m(l,r){j(l,e,r)},p:K,i:K,o:K,d(l){l&&M(e)}}}class Se extends ae{constructor(e){super(),re(this,e,null,ye,se,{})}}function ne(n,e,l){const r=n.slice();return r[10]=e[l],r}function Fe(n){let e;return{c(){e=f("p"),e.textContent="No saved files"},m(l,r){j(l,e,r)},p:K,i:K,o:K,d(l){l&&M(e)}}}function Ie(n){let e,l,r,i,v,p,y,d=ee(n[0]),o=[];for(let s=0;s<d.length;s+=1)o[s]=le(ne(n,d,s));const w=s=>C(o[s],1,1,()=>{o[s]=null});return{c(){e=f("h2"),e.textContent="Manage existing files",l=$(),r=f("table"),i=f("thead"),i.innerHTML="<tr><th>File name</th> <th>Scheme name</th> <th>Action</th></tr>",v=$(),p=f("tbody");for(let s=0;s<o.length;s+=1)o[s].c()},m(s,g){j(s,e,g),j(s,l,g),j(s,r,g),a(r,i),a(r,v),a(r,p);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(p,null);y=!0},p(s,g){if(g&47){d=ee(s[0]);let t;for(t=0;t<d.length;t+=1){const c=ne(s,d,t);o[t]?(o[t].p(c,g),I(o[t],1)):(o[t]=le(c),o[t].c(),I(o[t],1),o[t].m(p,null))}for(ue(),t=d.length;t<o.length;t+=1)w(t);ce()}},i(s){if(!y){for(let g=0;g<d.length;g+=1)I(o[g]);y=!0}},o(s){o=o.filter(Boolean);for(let g=0;g<o.length;g+=1)C(o[g]);y=!1},d(s){s&&(M(e),M(l),M(r)),pe(o,s)}}}function Ce(n){let e;return{c(){e=H("Rename")},m(l,r){j(l,e,r)},d(l){l&&M(e)}}}function je(n){let e;return{c(){e=H("Download")},m(l,r){j(l,e,r)},d(l){l&&M(e)}}}function Me(n){let e;return{c(){e=H("Delete")},m(l,r){j(l,e,r)},d(l){l&&M(e)}}}function le(n){let e,l,r,i=n[10]+"",v,p,y,d,o,w=n[10]+"",s,g,t,c,_,N,S,P,m,k,A;function F(){return n[6](n[10])}_=new V({props:{$$slots:{default:[Ce]},$$scope:{ctx:n}}}),_.$on("click",F);function Y(){return n[7](n[10])}S=new V({props:{$$slots:{default:[je]},$$scope:{ctx:n}}}),S.$on("click",Y);function E(){return n[8](n[10])}return m=new ke({props:{$$slots:{default:[Me]},$$scope:{ctx:n}}}),m.$on("click",E),{c(){e=f("tr"),l=f("td"),r=f("a"),v=H(i),y=$(),d=f("td"),o=H("TODO describe "),s=H(w),g=$(),t=f("td"),c=f("div"),D(_.$$.fragment),N=$(),D(S.$$.fragment),P=$(),D(m.$$.fragment),k=$(),O(r,"href",p=`scheme.html?authority=${n[1]}&file=${n[10]}`),O(c,"class","govuk-button-group"),ie(c,"flex-wrap","nowrap")},m(u,b){j(u,e,b),a(e,l),a(l,r),a(r,v),a(e,y),a(e,d),a(d,o),a(d,s),a(e,g),a(e,t),a(t,c),R(_,c,null),a(c,N),R(S,c,null),a(c,P),R(m,c,null),a(e,k),A=!0},p(u,b){n=u,(!A||b&1)&&i!==(i=n[10]+"")&&te(v,i),(!A||b&1&&p!==(p=`scheme.html?authority=${n[1]}&file=${n[10]}`))&&O(r,"href",p),(!A||b&1)&&w!==(w=n[10]+"")&&te(s,w);const J={};b&8192&&(J.$$scope={dirty:b,ctx:n}),_.$set(J);const q={};b&8192&&(q.$$scope={dirty:b,ctx:n}),S.$set(q);const L={};b&8192&&(L.$$scope={dirty:b,ctx:n}),m.$set(L)},i(u){A||(I(_.$$.fragment,u),I(S.$$.fragment,u),I(m.$$.fragment,u),A=!0)},o(u){C(_.$$.fragment,u),C(S.$$.fragment,u),C(m.$$.fragment,u),A=!1},d(u){u&&M(e),W(_),W(S),W(m)}}}function Ae(n){let e;return{c(){e=H("Create new file")},m(l,r){j(l,e,r)},d(l){l&&M(e)}}}function Oe(n){let e,l,r,i,v,p,y,d,o,w,s,g=fe(n[1])+"",t,c,_,N,S,P,m,k,A,F,Y,E,u,b,J,q,L,G;l=new ve({}),i=new Se({});const X=[Ie,Fe],B=[];function Z(h,T){return h[0].length>0?0:1}return m=Z(n),k=B[m]=X[m](n),u=new V({props:{$$slots:{default:[Ae]},$$scope:{ctx:n}}}),u.$on("click",n[4]),L=new de({props:{label:"Select a .geojson file",onLoad:He}}),{c(){e=f("div"),D(l.$$.fragment),r=$(),D(i.$$.fragment),v=$(),p=f("h1"),p.textContent="Manage my sketches",y=$(),d=f("div"),o=f("div"),w=f("p"),s=H("You're working on sketches in "),t=H(g),c=H(`.
        `),_=f("a"),_.textContent="Select a different area",N=$(),S=f("p"),S.textContent=`On this page you can manage your sketch files. All files are auto-saved
        in your browser's local storage. You can close your browser and continue
        later.`,P=$(),k.c(),A=$(),F=f("div"),Y=f("h2"),Y.textContent="Create a new sketch",E=$(),D(u.$$.fragment),b=$(),J=f("h2"),J.textContent="Import a saved sketch",q=$(),D(L.$$.fragment),ie(p,"margin-top","30px"),O(_,"href","index.html"),O(o,"class","govuk-grid-column-two-thirds"),O(Y,"class","green-bar svelte-1z050ke"),O(F,"class","govuk-grid-column-one-third"),O(d,"class","govuk-grid-row"),O(e,"class","govuk-width-container")},m(h,T){j(h,e,T),R(l,e,null),a(e,r),R(i,e,null),a(e,v),a(e,p),a(e,y),a(e,d),a(d,o),a(o,w),a(w,s),a(w,t),a(w,c),a(w,_),a(o,N),a(o,S),a(o,P),B[m].m(o,null),a(d,A),a(d,F),a(F,Y),a(F,E),R(u,F,null),a(F,b),a(F,J),a(F,q),R(L,F,null),G=!0},p(h,[T]){let U=m;m=Z(h),m===U?B[m].p(h,T):(ue(),C(B[U],1,1,()=>{B[U]=null}),ce(),k=B[m],k?k.p(h,T):(k=B[m]=X[m](h),k.c()),I(k,1),k.m(o,null));const x={};T&8192&&(x.$$scope={dirty:T,ctx:h}),u.$set(x)},i(h){G||(I(l.$$.fragment,h),I(i.$$.fragment,h),I(k),I(u.$$.fragment,h),I(L.$$.fragment,h),G=!0)},o(h){C(l.$$.fragment,h),C(i.$$.fragment,h),C(k),C(u.$$.fragment,h),C(L.$$.fragment,h),G=!1},d(h){h&&M(e),W(l),W(i),B[m].d(),W(u),W(L)}}}function He(n,e){oe(oe(n,".json"),".geojson")}function oe(n,e){return n.endsWith(e)?n.slice(0,-e.length):n}function Le(n,e,l){let i=new URLSearchParams(window.location.search).get("authority");_e(i);let v=Q(i);me(()=>{he()});function p(t){let c=window.prompt(`Rename file ${t} to what?`,t);if(c){let _=z(i,t),N=window.localStorage.getItem(_);window.localStorage.setItem(z(i,c),N),window.localStorage.removeItem(_),l(0,v=Q(i))}}function y(t){if(!window.confirm(`Really delete file ${t}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`))return;let c=z(i,t);$e(`${i}_${t}.json`,window.localStorage.getItem(c)),window.localStorage.removeItem(c),l(0,v=Q(i))}function d(){let t=window.prompt("What do you want to name your new file?");if(!t)return;let c=ge(be);Object.values(c.schemes)[0].scheme_name=t,window.localStorage.setItem(z(i,t),JSON.stringify(c)),window.location.href=`scheme.html?authority=${i}&file=${t}`}function o(t){let c=JSON.parse(window.localStorage.getItem(z(i,t)));we(i,t,c)}return[v,i,p,y,d,o,t=>p(t),t=>o(t),t=>y(t)]}class Be extends ae{constructor(e){super(),re(this,e,Le,Oe,se,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Be({target:document.getElementById("app")});
