import{S as $e,i as we,s as ke,e as f,b,c as B,n as Y,d as E,f as x,E as ve,j as D,a as w,x as P,A as ye,k as be,o as G,m as a,p as F,q as ee,t as v,u as J,v as Se,H as Ce,L as Z,w as Fe,F as Me,C as te,D as Ae,G as Ie,M as me,N as Le,O as je,P as U,Q as ne,J as Be,T as Ee,y as ge,z as He,B as Ne,K as Oe}from"./files-e80a12c6.js";import{W as Te,c as De}from"./config-e3d46902.js";import{H as Ge}from"./colors-2522ae21.js";function Je(n){let e;return{c(){e=f("div"),e.innerHTML=`<p class="govuk-phase-banner__content" style="margin-bottom: 0px"><strong class="govuk-tag govuk-phase-banner__content__tag">Alpha</strong> <span class="govuk-phase-banner__text">This is a new service. Contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      with any feedback.</span></p>`,b(e,"class","govuk-phase-banner")},m(t,o){B(t,e,o)},p:Y,i:Y,o:Y,d(t){t&&E(e)}}}class Pe extends $e{constructor(e){super(),we(this,e,null,Je,ke,{})}}function _e(n,e,t){const o=n.slice();return o[14]=e[t][0],o[15]=e[t][1],o}function Re(n){let e;return{c(){e=f("p"),e.textContent="No saved files"},m(t,o){B(t,e,o)},p:Y,i:Y,o:Y,d(t){t&&E(e)}}}function Ye(n){let e,t,o,p,d,g,S,m=ge(n[1]),l=[];for(let r=0;r<m.length;r+=1)l[r]=pe(_e(n,m,r));const _=r=>F(l[r],1,1,()=>{l[r]=null});return{c(){e=f("h2"),e.textContent="Load existing files",t=w(),o=f("table"),p=f("thead"),p.innerHTML="<tr><th>File name</th> <th>Action</th></tr>",d=w(),g=f("tbody");for(let r=0;r<l.length;r+=1)l[r].c()},m(r,c){B(r,e,c),B(r,t,c),B(r,o,c),a(o,p),a(o,d),a(o,g);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(g,null);S=!0},p(r,c){if(c&626){m=ge(r[1]);let i;for(i=0;i<m.length;i+=1){const y=_e(r,m,i);l[i]?(l[i].p(y,c),v(l[i],1)):(l[i]=pe(y),l[i].c(),v(l[i],1),l[i].m(g,null))}for(te(),i=m.length;i<l.length;i+=1)_(i);ee()}},i(r){if(!S){for(let c=0;c<m.length;c+=1)v(l[c]);S=!0}},o(r){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)F(l[c]);S=!1},d(r){r&&(E(e),E(t),E(o)),He(l,r)}}}function Ke(n){let e;return{c(){e=P("Rename")},m(t,o){B(t,e,o)},d(t){t&&E(e)}}}function We(n){let e;return{c(){e=P("Download")},m(t,o){B(t,e,o)},d(t){t&&E(e)}}}function qe(n){let e;return{c(){e=P("Delete")},m(t,o){B(t,e,o)},d(t){t&&E(e)}}}function pe(n){let e,t,o,p=n[14]+"",d,g,S,m,l,_,r,c,i,y,N,H;function s(){return n[10](n[14])}_=new x({props:{$$slots:{default:[Ke]},$$scope:{ctx:n}}}),_.$on("click",s);function k(){return n[11](n[14])}c=new x({props:{$$slots:{default:[We]},$$scope:{ctx:n}}}),c.$on("click",k);function A(){return n[12](n[14])}return y=new Te({props:{$$slots:{default:[qe]},$$scope:{ctx:n}}}),y.$on("click",A),{c(){e=f("tr"),t=f("td"),o=f("a"),d=P(p),S=w(),m=f("td"),l=f("div"),D(_.$$.fragment),r=w(),D(c.$$.fragment),i=w(),D(y.$$.fragment),N=w(),b(o,"href",g=ne(n[4],n[14],n[15])),b(l,"class","govuk-button-group"),be(l,"flex-wrap","nowrap")},m(h,C){B(h,e,C),a(e,t),a(t,o),a(o,d),a(e,S),a(e,m),a(m,l),G(_,l,null),a(l,r),G(c,l,null),a(l,i),G(y,l,null),a(e,N),H=!0},p(h,C){n=h,(!H||C&2)&&p!==(p=n[14]+"")&&Ne(d,p),(!H||C&2&&g!==(g=ne(n[4],n[14],n[15])))&&b(o,"href",g);const W={};C&262144&&(W.$$scope={dirty:C,ctx:n}),_.$set(W);const q={};C&262144&&(q.$$scope={dirty:C,ctx:n}),c.$set(q);const K={};C&262144&&(K.$$scope={dirty:C,ctx:n}),y.$set(K)},i(h){H||(v(_.$$.fragment,h),v(c.$$.fragment,h),v(y.$$.fragment,h),H=!0)},o(h){F(_.$$.fragment,h),F(c.$$.fragment,h),F(y.$$.fragment,h),H=!1},d(h){h&&E(e),J(_),J(c),J(y)}}}function ze(n){let e;return{c(){e=P("Create new file")},m(t,o){B(t,e,o)},d(t){t&&E(e)}}}function he(n){let e,t;return e=new Me({props:{label:"Select a .geojson file",onLoad:n[8]}}),{c(){D(e.$$.fragment)},m(o,p){G(e,o,p),t=!0},p:Y,i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){F(e.$$.fragment,o),t=!1},d(o){J(e,o)}}}function Ue(n){let e,t,o,p,d,g,S,m,l,_,r,c,i,y,N,H,s,k,A,h,C,W,q,K,le,I,L,oe,M,Q,ae,O,re,V,se,R,ie,z;t=new Ge({}),p=new Pe({});const ce=[Ye,Re],T=[];function ue(u,j){return u[1].length>0?0:1}I=ue(n),L=T[I]=ce[I](n),O=new x({props:{$$slots:{default:[ze]},$$scope:{ctx:n}}}),O.$on("click",n[7]),R=new ve({props:{errorMessage:n[2]}});let $=n[0]&&he(n);return{c(){e=f("div"),D(t.$$.fragment),o=w(),D(p.$$.fragment),d=w(),g=f("h1"),g.textContent="Manage my sketches",S=w(),m=f("div"),l=f("div"),_=f("nav"),r=f("ol"),c=f("li"),i=f("a"),y=P("Change area"),H=w(),s=f("li"),s.textContent="Manage files",k=w(),A=f("p"),h=P("You're working on sketches in "),C=f("b"),C.textContent=`${ye(n[4])}`,W=P(`
        .`),q=w(),K=f("p"),K.textContent=`On this page you can manage your sketch files. All files are auto-saved
        in your browser's local storage. You can close your browser and continue
        later.`,le=w(),L.c(),oe=w(),M=f("div"),Q=f("h2"),Q.textContent="Create a new sketch",ae=w(),D(O.$$.fragment),re=w(),V=f("h2"),V.textContent="Import a saved sketch",se=w(),D(R.$$.fragment),ie=w(),$&&$.c(),be(g,"margin-top","30px"),b(i,"class","govuk-breadcrumbs__link"),b(i,"href",N=`index.html?scheme=${n[3]}`),b(c,"class","govuk-breadcrumbs__list-item"),b(s,"class","govuk-breadcrumbs__list-item"),b(r,"class","govuk-breadcrumbs__list"),b(_,"class","govuk-breadcrumbs"),b(_,"aria-label","Breadcrumb"),b(l,"class","govuk-grid-column-two-thirds"),b(Q,"class","green-bar svelte-1z050ke"),b(M,"class","govuk-grid-column-one-third"),b(m,"class","govuk-grid-row"),b(e,"class","govuk-width-container govuk-prose")},m(u,j){B(u,e,j),G(t,e,null),a(e,o),G(p,e,null),a(e,d),a(e,g),a(e,S),a(e,m),a(m,l),a(l,_),a(_,r),a(r,c),a(c,i),a(i,y),a(r,H),a(r,s),a(l,k),a(l,A),a(A,h),a(A,C),a(A,W),a(l,q),a(l,K),a(l,le),T[I].m(l,null),a(m,oe),a(m,M),a(M,Q),a(M,ae),G(O,M,null),a(M,re),a(M,V),a(M,se),G(R,M,null),a(M,ie),$&&$.m(M,null),z=!0},p(u,[j]){(!z||j&8&&N!==(N=`index.html?scheme=${u[3]}`))&&b(i,"href",N);let X=I;I=ue(u),I===X?T[I].p(u,j):(te(),F(T[X],1,1,()=>{T[X]=null}),ee(),L=T[I],L?L.p(u,j):(L=T[I]=ce[I](u),L.c()),v(L,1),L.m(l,null));const fe={};j&262144&&(fe.$$scope={dirty:j,ctx:u}),O.$set(fe);const de={};j&4&&(de.errorMessage=u[2]),R.$set(de),u[0]?$?($.p(u,j),j&1&&v($,1)):($=he(u),$.c(),v($,1),$.m(M,null)):$&&(te(),F($,1,1,()=>{$=null}),ee())},i(u){z||(v(t.$$.fragment,u),v(p.$$.fragment,u),v(L),v(O.$$.fragment,u),v(R.$$.fragment,u),v($),z=!0)},o(u){F(t.$$.fragment,u),F(p.$$.fragment,u),F(L),F(O.$$.fragment,u),F(R.$$.fragment,u),F($),z=!1},d(u){u&&E(e),J(t),J(p),T[I].d(),J(O),J(R),$&&$.d()}}}function Qe(n,e,t){let o;Se(n,Oe,s=>t(3,o=s));let d=new URLSearchParams(window.location.search).get("authority")||"missing",g=null;Ce(d);let S=Z(d),m="";Fe(async()=>{Ae(),t(0,g=await Ie()),g.features.some(s=>s.properties.full_name==d)||(window.location.href=`index.html?schema=${o}&error=Authority name not found: ${d}`)});function l(s){let k=window.prompt(`Rename file ${s} to what?`,s);if(k){let A=U(d,s),h=window.localStorage.getItem(A);me(U(d,k),h),window.localStorage.removeItem(A),t(1,S=Z(d))}}function _(s){if(!window.confirm(`Really delete file ${s}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`))return;let k=U(d,s);Le(`${d}_${s}.json`,window.localStorage.getItem(k)),window.localStorage.removeItem(k),t(1,S=Z(d))}function r(){let s=window.prompt("What do you want to name your new file?");if(!s)return;let k=je(De);Object.values(k.schemes)[0].scheme_name=s,me(U(d,s),JSON.stringify(k)),window.location.href=ne(d,s,o)}function c(s,k){try{window.location.href=Be(s,k,g)}catch(A){t(2,m=`Couldn't import file: ${A}`)}}function i(s){let k=JSON.parse(window.localStorage.getItem(U(d,s)));Ee(d,s,k)}return[g,S,m,o,d,l,_,r,c,i,s=>l(s),s=>i(s),s=>_(s)]}class Ve extends $e{constructor(e){super(),we(this,e,Qe,Ue,ke,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Ve({target:document.getElementById("app")});
