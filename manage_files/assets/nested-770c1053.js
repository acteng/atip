import{S as $e,i as we,s as ke,e as d,b,c as B,n as Y,d as E,f as x,E as ve,j as D,a as w,x as P,A as ye,k as be,o as G,m as a,p as F,q as ee,t as v,u as J,v as Se,H as Ce,L as Z,w as Fe,F as Me,C as te,D as Ae,G as Ie,M as me,N as Le,O as je,P as Be,Q as q,T as ne,J as Ee,U as He,y as ge,z as Ne,B as Oe,K as Te}from"./files-a20c2919.js";import{W as De,c as Ge}from"./config-1011c85d.js";import{H as Je}from"./colors-b0914877.js";function Pe(n){let e;return{c(){e=d("div"),e.innerHTML=`<p class="govuk-phase-banner__content" style="margin-bottom: 0px"><strong class="govuk-tag govuk-phase-banner__content__tag">Alpha</strong> <span class="govuk-phase-banner__text">This is a new service. Contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      with any feedback.</span></p>`,b(e,"class","govuk-phase-banner")},m(t,o){B(t,e,o)},p:Y,i:Y,o:Y,d(t){t&&E(e)}}}class Re extends $e{constructor(e){super(),we(this,e,null,Pe,ke,{})}}function _e(n,e,t){const o=n.slice();return o[14]=e[t][0],o[15]=e[t][1],o}function Ye(n){let e;return{c(){e=d("p"),e.textContent="No saved files"},m(t,o){B(t,e,o)},p:Y,i:Y,o:Y,d(t){t&&E(e)}}}function ze(n){let e,t,o,p,u,g,S,m=ge(n[1]),l=[];for(let r=0;r<m.length;r+=1)l[r]=pe(_e(n,m,r));const _=r=>F(l[r],1,1,()=>{l[r]=null});return{c(){e=d("h2"),e.textContent="Load existing files",t=w(),o=d("table"),p=d("thead"),p.innerHTML="<tr><th>File name</th> <th>Action</th></tr>",u=w(),g=d("tbody");for(let r=0;r<l.length;r+=1)l[r].c()},m(r,c){B(r,e,c),B(r,t,c),B(r,o,c),a(o,p),a(o,u),a(o,g);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(g,null);S=!0},p(r,c){if(c&626){m=ge(r[1]);let i;for(i=0;i<m.length;i+=1){const y=_e(r,m,i);l[i]?(l[i].p(y,c),v(l[i],1)):(l[i]=pe(y),l[i].c(),v(l[i],1),l[i].m(g,null))}for(te(),i=m.length;i<l.length;i+=1)_(i);ee()}},i(r){if(!S){for(let c=0;c<m.length;c+=1)v(l[c]);S=!0}},o(r){l=l.filter(Boolean);for(let c=0;c<l.length;c+=1)F(l[c]);S=!1},d(r){r&&(E(e),E(t),E(o)),Ne(l,r)}}}function Ke(n){let e;return{c(){e=P("Rename")},m(t,o){B(t,e,o)},d(t){t&&E(e)}}}function Ue(n){let e;return{c(){e=P("Download")},m(t,o){B(t,e,o)},d(t){t&&E(e)}}}function We(n){let e;return{c(){e=P("Delete")},m(t,o){B(t,e,o)},d(t){t&&E(e)}}}function pe(n){let e,t,o,p=n[14]+"",u,g,S,m,l,_,r,c,i,y,N,H;function s(){return n[10](n[14])}_=new x({props:{$$slots:{default:[Ke]},$$scope:{ctx:n}}}),_.$on("click",s);function k(){return n[11](n[14])}c=new x({props:{$$slots:{default:[Ue]},$$scope:{ctx:n}}}),c.$on("click",k);function A(){return n[12](n[14])}return y=new De({props:{$$slots:{default:[We]},$$scope:{ctx:n}}}),y.$on("click",A),{c(){e=d("tr"),t=d("td"),o=d("a"),u=P(p),S=w(),m=d("td"),l=d("div"),D(_.$$.fragment),r=w(),D(c.$$.fragment),i=w(),D(y.$$.fragment),N=w(),b(o,"href",g=ne(n[4],n[14],n[15])),b(l,"class","govuk-button-group"),be(l,"flex-wrap","nowrap")},m(h,C){B(h,e,C),a(e,t),a(t,o),a(o,u),a(e,S),a(e,m),a(m,l),G(_,l,null),a(l,r),G(c,l,null),a(l,i),G(y,l,null),a(e,N),H=!0},p(h,C){n=h,(!H||C&2)&&p!==(p=n[14]+"")&&Oe(u,p),(!H||C&2&&g!==(g=ne(n[4],n[14],n[15])))&&b(o,"href",g);const K={};C&262144&&(K.$$scope={dirty:C,ctx:n}),_.$set(K);const U={};C&262144&&(U.$$scope={dirty:C,ctx:n}),c.$set(U);const z={};C&262144&&(z.$$scope={dirty:C,ctx:n}),y.$set(z)},i(h){H||(v(_.$$.fragment,h),v(c.$$.fragment,h),v(y.$$.fragment,h),H=!0)},o(h){F(_.$$.fragment,h),F(c.$$.fragment,h),F(y.$$.fragment,h),H=!1},d(h){h&&E(e),J(_),J(c),J(y)}}}function qe(n){let e;return{c(){e=P("Create new file")},m(t,o){B(t,e,o)},d(t){t&&E(e)}}}function he(n){let e,t;return e=new Me({props:{label:"Select a .geojson file",onLoad:n[8]}}),{c(){D(e.$$.fragment)},m(o,p){G(e,o,p),t=!0},p:Y,i(o){t||(v(e.$$.fragment,o),t=!0)},o(o){F(e.$$.fragment,o),t=!1},d(o){J(e,o)}}}function Qe(n){let e,t,o,p,u,g,S,m,l,_,r,c,i,y,N,H,s,k,A,h,C,K,U,z,le,I,L,oe,M,Q,ae,O,re,V,se,R,ie,W;t=new Je({}),p=new Re({});const ce=[ze,Ye],T=[];function ue(f,j){return f[1].length>0?0:1}I=ue(n),L=T[I]=ce[I](n),O=new x({props:{$$slots:{default:[qe]},$$scope:{ctx:n}}}),O.$on("click",n[7]),R=new ve({props:{errorMessage:n[2]}});let $=n[0]&&he(n);return{c(){e=d("div"),D(t.$$.fragment),o=w(),D(p.$$.fragment),u=w(),g=d("h1"),g.textContent="Manage my sketches",S=w(),m=d("div"),l=d("div"),_=d("nav"),r=d("ol"),c=d("li"),i=d("a"),y=P("Change area"),H=w(),s=d("li"),s.textContent="Manage files",k=w(),A=d("p"),h=P("You're working on sketches in "),C=d("b"),C.textContent=`${ye(n[4])}`,K=P(`
        .`),U=w(),z=d("p"),z.textContent=`On this page you can manage your sketch files. All files are auto-saved
        in your browser's local storage. You can close your browser and continue
        later.`,le=w(),L.c(),oe=w(),M=d("div"),Q=d("h2"),Q.textContent="Create a new sketch",ae=w(),D(O.$$.fragment),re=w(),V=d("h2"),V.textContent="Import a saved sketch",se=w(),D(R.$$.fragment),ie=w(),$&&$.c(),be(g,"margin-top","30px"),b(i,"class","govuk-breadcrumbs__link"),b(i,"href",N=`index.html?scheme=${n[3]}`),b(c,"class","govuk-breadcrumbs__list-item"),b(s,"class","govuk-breadcrumbs__list-item"),b(r,"class","govuk-breadcrumbs__list"),b(_,"class","govuk-breadcrumbs"),b(_,"aria-label","Breadcrumb"),b(l,"class","govuk-grid-column-two-thirds"),b(Q,"class","green-bar svelte-1z050ke"),b(M,"class","govuk-grid-column-one-third"),b(m,"class","govuk-grid-row"),b(e,"class","govuk-width-container govuk-prose")},m(f,j){B(f,e,j),G(t,e,null),a(e,o),G(p,e,null),a(e,u),a(e,g),a(e,S),a(e,m),a(m,l),a(l,_),a(_,r),a(r,c),a(c,i),a(i,y),a(r,H),a(r,s),a(l,k),a(l,A),a(A,h),a(A,C),a(A,K),a(l,U),a(l,z),a(l,le),T[I].m(l,null),a(m,oe),a(m,M),a(M,Q),a(M,ae),G(O,M,null),a(M,re),a(M,V),a(M,se),G(R,M,null),a(M,ie),$&&$.m(M,null),W=!0},p(f,[j]){(!W||j&8&&N!==(N=`index.html?scheme=${f[3]}`))&&b(i,"href",N);let X=I;I=ue(f),I===X?T[I].p(f,j):(te(),F(T[X],1,1,()=>{T[X]=null}),ee(),L=T[I],L?L.p(f,j):(L=T[I]=ce[I](f),L.c()),v(L,1),L.m(l,null));const fe={};j&262144&&(fe.$$scope={dirty:j,ctx:f}),O.$set(fe);const de={};j&4&&(de.errorMessage=f[2]),R.$set(de),f[0]?$?($.p(f,j),j&1&&v($,1)):($=he(f),$.c(),v($,1),$.m(M,null)):$&&(te(),F($,1,1,()=>{$=null}),ee())},i(f){W||(v(t.$$.fragment,f),v(p.$$.fragment,f),v(L),v(O.$$.fragment,f),v(R.$$.fragment,f),v($),W=!0)},o(f){F(t.$$.fragment,f),F(p.$$.fragment,f),F(L),F(O.$$.fragment,f),F(R.$$.fragment,f),F($),W=!1},d(f){f&&E(e),J(t),J(p),T[I].d(),J(O),J(R),$&&$.d()}}}function Ve(n,e,t){let o;Se(n,Te,s=>t(3,o=s));let u=new URLSearchParams(window.location.search).get("authority")||"missing",g=null;Ce(u);let S=Z(u),m="";Fe(async()=>{Ae(),t(0,g=await Ie()),g.features.some(s=>s.properties.full_name==u)||(window.location.href=`index.html?schema=${o}&error=Authority name not found: ${u}`)});function l(s){let k=window.prompt(`Rename file ${s} to what?`,s);if(k){let A=q(u,s),h=window.localStorage.getItem(A);me(q(u,k),h),window.localStorage.removeItem(A),t(1,S=Z(u))}}function _(s){if(!window.confirm(`Really delete file ${s}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`))return;let k=q(u,s);Le(`${u}_${s}.json`,window.localStorage.getItem(k)),window.localStorage.removeItem(k),t(1,S=Z(u))}function r(){let s=window.prompt("What do you want to name your new file?");if(!s)return;let k=je(Ge);Object.values(k.schemes)[0].scheme_name=s,me(q(u,s),JSON.stringify(Be(u,k))),window.location.href=ne(u,s,o)}function c(s,k){try{window.location.href=Ee(s,k,g)}catch(A){t(2,m=`Couldn't import file: ${A}`)}}function i(s){let k=JSON.parse(window.localStorage.getItem(q(u,s)));He(u,s,k)}return[g,S,m,o,u,l,_,r,c,i,s=>l(s),s=>i(s),s=>_(s)]}class Xe extends $e{constructor(e){super(),we(this,e,Ve,Qe,ke,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Xe({target:document.getElementById("app")});
