import{S as de,i as me,s as ge,e as u,b as $,c as L,n as K,d as E,f as x,E as $e,F as we,j as D,a as h,x as J,G as ke,k as _e,o as T,m as l,p as j,q as he,t as I,u as G,v as be,H as ve,I as Z,w as ye,y as pe,z as Se,J as U,K as Ce,L as Me,M as ee,A as Fe,B as Ie,N as Ae,O as ie,P as je,D as ce,C as Oe}from"./files-0e5d83f7.js";import{W as Be,c as Le}from"./config-53d2c231.js";import{H as Ee}from"./colors-593d518e.js";function He(t){let e;return{c(){e=u("div"),e.innerHTML=`<p class="govuk-phase-banner__content" style="margin-bottom: 0px"><strong class="govuk-tag govuk-phase-banner__content__tag">Alpha</strong> <span class="govuk-phase-banner__text">This is a new service. Contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      with any feedback.</span></p>`,$(e,"class","govuk-phase-banner")},m(n,r){L(n,e,r)},p:K,i:K,o:K,d(n){n&&E(e)}}}class Ne extends de{constructor(e){super(),me(this,e,null,He,ge,{})}}function ue(t,e,n){const r=t.slice();return r[13]=e[n][0],r[14]=e[n][1],r}function De(t){let e;return{c(){e=u("p"),e.textContent="No saved files"},m(n,r){L(n,e,r)},p:K,i:K,o:K,d(n){n&&E(e)}}}function Te(t){let e,n,r,w,g,p,M,_=ie(t[0]),a=[];for(let o=0;o<_.length;o+=1)a[o]=fe(ue(t,_,o));const v=o=>j(a[o],1,1,()=>{a[o]=null});return{c(){e=u("h2"),e.textContent="Manage existing files",n=h(),r=u("table"),w=u("thead"),w.innerHTML="<tr><th>File name</th> <th>Scheme name</th> <th>Action</th></tr>",g=h(),p=u("tbody");for(let o=0;o<a.length;o+=1)a[o].c()},m(o,f){L(o,e,f),L(o,n,f),L(o,r,f),l(r,w),l(r,g),l(r,p);for(let s=0;s<a.length;s+=1)a[s]&&a[s].m(p,null);M=!0},p(o,f){if(f&313){_=ie(o[0]);let s;for(s=0;s<_.length;s+=1){const k=ue(o,_,s);a[s]?(a[s].p(k,f),I(a[s],1)):(a[s]=fe(k),a[s].c(),I(a[s],1),a[s].m(p,null))}for(pe(),s=_.length;s<a.length;s+=1)v(s);he()}},i(o){if(!M){for(let f=0;f<_.length;f+=1)I(a[f]);M=!0}},o(o){a=a.filter(Boolean);for(let f=0;f<a.length;f+=1)j(a[f]);M=!1},d(o){o&&(E(e),E(n),E(r)),je(a,o)}}}function Ge(t){let e;return{c(){e=J("Rename")},m(n,r){L(n,e,r)},d(n){n&&E(e)}}}function Je(t){let e;return{c(){e=J("Download")},m(n,r){L(n,e,r)},d(n){n&&E(e)}}}function Pe(t){let e;return{c(){e=J("Delete")},m(n,r){L(n,e,r)},d(n){n&&E(e)}}}function fe(t){let e,n,r,w=t[13]+"",g,p,M,_,a,v=t[13]+"",o,f,s,k,y,i,c,A,S,W,O;function Q(){return t[9](t[13])}y=new x({props:{$$slots:{default:[Ge]},$$scope:{ctx:t}}}),y.$on("click",Q);function C(){return t[10](t[13])}c=new x({props:{$$slots:{default:[Je]},$$scope:{ctx:t}}}),c.$on("click",C);function F(){return t[11](t[13])}return S=new Be({props:{$$slots:{default:[Pe]},$$scope:{ctx:t}}}),S.$on("click",F),{c(){e=u("tr"),n=u("td"),r=u("a"),g=J(w),M=h(),_=u("td"),a=J("TODO describe "),o=J(v),f=h(),s=u("td"),k=u("div"),D(y.$$.fragment),i=h(),D(c.$$.fragment),A=h(),D(S.$$.fragment),W=h(),$(r,"href",p=ee(t[3],t[13],t[14])),$(k,"class","govuk-button-group"),_e(k,"flex-wrap","nowrap")},m(b,m){L(b,e,m),l(e,n),l(n,r),l(r,g),l(e,M),l(e,_),l(_,a),l(_,o),l(e,f),l(e,s),l(s,k),T(y,k,null),l(k,i),T(c,k,null),l(k,A),T(S,k,null),l(e,W),O=!0},p(b,m){t=b,(!O||m&1)&&w!==(w=t[13]+"")&&ce(g,w),(!O||m&1&&p!==(p=ee(t[3],t[13],t[14])))&&$(r,"href",p),(!O||m&1)&&v!==(v=t[13]+"")&&ce(o,v);const P={};m&131072&&(P.$$scope={dirty:m,ctx:t}),y.$set(P);const q={};m&131072&&(q.$$scope={dirty:m,ctx:t}),c.$set(q);const B={};m&131072&&(B.$$scope={dirty:m,ctx:t}),S.$set(B)},i(b){O||(I(y.$$.fragment,b),I(c.$$.fragment,b),I(S.$$.fragment,b),O=!0)},o(b){j(y.$$.fragment,b),j(c.$$.fragment,b),j(S.$$.fragment,b),O=!1},d(b){b&&E(e),G(y),G(c),G(S)}}}function Re(t){let e;return{c(){e=J("Create new file")},m(n,r){L(n,e,r)},d(n){n&&E(e)}}}function Ye(t){let e,n,r,w,g,p,M,_,a,v,o,f,s,k,y,i,c,A,S,W,O,Q,C,F,b,m,P,q,B,te,V,ne,R,le,Y,z;n=new Ee({}),w=new Ne({});const ae=[Te,De],N=[];function oe(d,H){return d[0].length>0?0:1}return C=oe(t),F=N[C]=ae[C](t),B=new x({props:{$$slots:{default:[Re]},$$scope:{ctx:t}}}),B.$on("click",t[6]),R=new $e({props:{errorMessage:t[1]}}),Y=new we({props:{label:"Select a .geojson file",onLoad:t[7]}}),{c(){e=u("div"),D(n.$$.fragment),r=h(),D(w.$$.fragment),g=h(),p=u("h1"),p.textContent="Manage my sketches",M=h(),_=u("div"),a=u("div"),v=u("nav"),o=u("ol"),f=u("li"),s=u("a"),k=J("Change area"),i=h(),c=u("li"),c.textContent="Manage files",A=h(),S=u("p"),S.textContent=`You're working on sketches in ${ke(t[3])}.`,W=h(),O=u("p"),O.textContent=`On this page you can manage your sketch files. All files are auto-saved
        in your browser's local storage. You can close your browser and continue
        later.`,Q=h(),F.c(),b=h(),m=u("div"),P=u("h2"),P.textContent="Create a new sketch",q=h(),D(B.$$.fragment),te=h(),V=u("h2"),V.textContent="Import a saved sketch",ne=h(),D(R.$$.fragment),le=h(),D(Y.$$.fragment),_e(p,"margin-top","30px"),$(s,"class","govuk-breadcrumbs__link"),$(s,"href",y=`index.html?scheme=${t[2]}`),$(f,"class","govuk-breadcrumbs__list-item"),$(c,"class","govuk-breadcrumbs__list-item"),$(o,"class","govuk-breadcrumbs__list"),$(v,"class","govuk-breadcrumbs"),$(v,"aria-label","Breadcrumb"),$(a,"class","govuk-grid-column-two-thirds"),$(P,"class","green-bar svelte-1z050ke"),$(m,"class","govuk-grid-column-one-third"),$(_,"class","govuk-grid-row"),$(e,"class","govuk-width-container govuk-prose")},m(d,H){L(d,e,H),T(n,e,null),l(e,r),T(w,e,null),l(e,g),l(e,p),l(e,M),l(e,_),l(_,a),l(a,v),l(v,o),l(o,f),l(f,s),l(s,k),l(o,i),l(o,c),l(a,A),l(a,S),l(a,W),l(a,O),l(a,Q),N[C].m(a,null),l(_,b),l(_,m),l(m,P),l(m,q),T(B,m,null),l(m,te),l(m,V),l(m,ne),T(R,m,null),l(m,le),T(Y,m,null),z=!0},p(d,[H]){(!z||H&4&&y!==(y=`index.html?scheme=${d[2]}`))&&$(s,"href",y);let X=C;C=oe(d),C===X?N[C].p(d,H):(pe(),j(N[X],1,1,()=>{N[X]=null}),he(),F=N[C],F?F.p(d,H):(F=N[C]=ae[C](d),F.c()),I(F,1),F.m(a,null));const re={};H&131072&&(re.$$scope={dirty:H,ctx:d}),B.$set(re);const se={};H&2&&(se.errorMessage=d[1]),R.$set(se)},i(d){z||(I(n.$$.fragment,d),I(w.$$.fragment,d),I(F),I(B.$$.fragment,d),I(R.$$.fragment,d),I(Y.$$.fragment,d),z=!0)},o(d){j(n.$$.fragment,d),j(w.$$.fragment,d),j(F),j(B.$$.fragment,d),j(R.$$.fragment,d),j(Y.$$.fragment,d),z=!1},d(d){d&&E(e),G(n),G(w),N[C].d(),G(B),G(R),G(Y)}}}function Ke(t,e,n){let r;be(t,Oe,i=>n(2,r=i));let g=new URLSearchParams(window.location.search).get("authority");ve(g);let p=Z(g),M="";ye(()=>{Se()});function _(i){let c=window.prompt(`Rename file ${i} to what?`,i);if(c){let A=U(g,i),S=window.localStorage.getItem(A);window.localStorage.setItem(U(g,c),S),window.localStorage.removeItem(A),n(0,p=Z(g))}}function a(i){if(!window.confirm(`Really delete file ${i}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`))return;let c=U(g,i);Ce(`${g}_${i}.json`,window.localStorage.getItem(c)),window.localStorage.removeItem(c),n(0,p=Z(g))}function v(){let i=window.prompt("What do you want to name your new file?");if(!i)return;let c=Me(Le);Object.values(c.schemes)[0].scheme_name=i,window.localStorage.setItem(U(g,i),JSON.stringify(c)),window.location.href=ee(g,i,r)}async function o(i,c){try{let A=await Fe();window.location.href=Ie(i,c,A)}catch(A){n(1,M=`Couldn't import file: ${A}`)}}function f(i){let c=JSON.parse(window.localStorage.getItem(U(g,i)));Ae(g,i,c)}return[p,M,r,g,_,a,v,o,f,i=>_(i),i=>f(i),i=>a(i)]}class We extends de{constructor(e){super(),me(this,e,Ke,Ye,ge,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new We({target:document.getElementById("app")});
