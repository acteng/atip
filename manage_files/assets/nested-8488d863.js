import{S as ce,i as ue,s as fe,e as c,b as $,c as O,n as K,d as B,f as Z,F as ge,j as R,a as p,x as T,H as _e,k as de,o as W,m as l,p as A,q as me,t as I,u as Y,v as pe,w as $e,y as he,z as we,I as ke,J as oe,K as be,G as ae,C as ve}from"./index-31c14ddd.js";import{W as ye,c as Se}from"./config-9d576813.js";import{i as Ce,l as X,g as G,a as Fe,e as Ie}from"./files-f56e01eb.js";import{H as Me}from"./colors-c3c5a000.js";function je(t){let e;return{c(){e=c("div"),e.innerHTML=`<p class="govuk-phase-banner__content" style="margin-bottom: 0px"><strong class="govuk-tag govuk-phase-banner__content__tag">Alpha</strong> <span class="govuk-phase-banner__text">This is a new service. Contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      with any feedback.</span></p>`,$(e,"class","govuk-phase-banner")},m(n,s){O(n,e,s)},p:K,i:K,o:K,d(n){n&&B(e)}}}class Ae extends ce{constructor(e){super(),ue(this,e,null,je,fe,{})}}function se(t,e,n){const s=t.slice();return s[11]=e[n][0],s[12]=e[n][1],s}function Oe(t){let e;return{c(){e=c("p"),e.textContent="No saved files"},m(n,s){O(n,e,s)},p:K,i:K,o:K,d(n){n&&B(e)}}}function Be(t){let e,n,s,w,f,_,S,m=oe(t[0]),o=[];for(let r=0;r<m.length;r+=1)o[r]=re(se(t,m,r));const b=r=>A(o[r],1,1,()=>{o[r]=null});return{c(){e=c("h2"),e.textContent="Manage existing files",n=p(),s=c("table"),w=c("thead"),w.innerHTML="<tr><th>File name</th> <th>Scheme name</th> <th>Action</th></tr>",f=p(),_=c("tbody");for(let r=0;r<o.length;r+=1)o[r].c()},m(r,d){O(r,e,d),O(r,n,d),O(r,s,d),l(s,w),l(s,f),l(s,_);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(_,null);S=!0},p(r,d){if(d&93){m=oe(r[0]);let i;for(i=0;i<m.length;i+=1){const a=se(r,m,i);o[i]?(o[i].p(a,d),I(o[i],1)):(o[i]=re(a),o[i].c(),I(o[i],1),o[i].m(_,null))}for(he(),i=m.length;i<o.length;i+=1)b(i);me()}},i(r){if(!S){for(let d=0;d<m.length;d+=1)I(o[d]);S=!0}},o(r){o=o.filter(Boolean);for(let d=0;d<o.length;d+=1)A(o[d]);S=!1},d(r){r&&(B(e),B(n),B(s)),be(o,r)}}}function He(t){let e;return{c(){e=T("Rename")},m(n,s){O(n,e,s)},d(n){n&&B(e)}}}function Le(t){let e;return{c(){e=T("Download")},m(n,s){O(n,e,s)},d(n){n&&B(e)}}}function Ne(t){let e;return{c(){e=T("Delete")},m(n,s){O(n,e,s)},d(n){n&&B(e)}}}function re(t){let e,n,s,w=t[11]+"",f,_,S,m,o,b=t[11]+"",r,d,i,a,u,H,v,P,F,q,M;function U(){return t[7](t[11])}u=new Z({props:{$$slots:{default:[He]},$$scope:{ctx:t}}}),u.$on("click",U);function y(){return t[8](t[11])}v=new Z({props:{$$slots:{default:[Le]},$$scope:{ctx:t}}}),v.$on("click",y);function C(){return t[9](t[11])}return F=new ye({props:{$$slots:{default:[Ne]},$$scope:{ctx:t}}}),F.$on("click",C),{c(){e=c("tr"),n=c("td"),s=c("a"),f=T(w),S=p(),m=c("td"),o=T("TODO describe "),r=T(b),d=p(),i=c("td"),a=c("div"),R(u.$$.fragment),H=p(),R(v.$$.fragment),P=p(),R(F.$$.fragment),q=p(),$(s,"href",_=`scheme.html?authority=${t[2]}&file=${t[11]}&schema=${t[12]}`),$(a,"class","govuk-button-group"),de(a,"flex-wrap","nowrap")},m(k,h){O(k,e,h),l(e,n),l(n,s),l(s,f),l(e,S),l(e,m),l(m,o),l(m,r),l(e,d),l(e,i),l(i,a),W(u,a,null),l(a,H),W(v,a,null),l(a,P),W(F,a,null),l(e,q),M=!0},p(k,h){t=k,(!M||h&1)&&w!==(w=t[11]+"")&&ae(f,w),(!M||h&1&&_!==(_=`scheme.html?authority=${t[2]}&file=${t[11]}&schema=${t[12]}`))&&$(s,"href",_),(!M||h&1)&&b!==(b=t[11]+"")&&ae(r,b);const D={};h&32768&&(D.$$scope={dirty:h,ctx:t}),u.$set(D);const z={};h&32768&&(z.$$scope={dirty:h,ctx:t}),v.$set(z);const j={};h&32768&&(j.$$scope={dirty:h,ctx:t}),F.$set(j)},i(k){M||(I(u.$$.fragment,k),I(v.$$.fragment,k),I(F.$$.fragment,k),M=!0)},o(k){A(u.$$.fragment,k),A(v.$$.fragment,k),A(F.$$.fragment,k),M=!1},d(k){k&&B(e),Y(u),Y(v),Y(F)}}}function Te(t){let e;return{c(){e=T("Create new file")},m(n,s){O(n,e,s)},d(n){n&&B(e)}}}function De(t){let e,n,s,w,f,_,S,m,o,b,r,d,i,a,u,H,v,P,F,q,M,U,y,C,k,h,D,z,j,x,Q,ee,J,E;n=new Me({}),w=new Ae({});const te=[Be,Oe],L=[];function ne(g,N){return g[0].length>0?0:1}return y=ne(t),C=L[y]=te[y](t),j=new Z({props:{$$slots:{default:[Te]},$$scope:{ctx:t}}}),j.$on("click",t[5]),J=new ge({props:{label:"Select a .geojson file",onLoad:Re}}),{c(){e=c("div"),R(n.$$.fragment),s=p(),R(w.$$.fragment),f=p(),_=c("h1"),_.textContent="Manage my sketches",S=p(),m=c("div"),o=c("div"),b=c("nav"),r=c("ol"),d=c("li"),i=c("a"),a=T("Change area"),H=p(),v=c("li"),v.textContent="Manage files",P=p(),F=c("p"),F.textContent=`You're working on sketches in ${_e(t[2])}.`,q=p(),M=c("p"),M.textContent=`On this page you can manage your sketch files. All files are auto-saved
        in your browser's local storage. You can close your browser and continue
        later.`,U=p(),C.c(),k=p(),h=c("div"),D=c("h2"),D.textContent="Create a new sketch",z=p(),R(j.$$.fragment),x=p(),Q=c("h2"),Q.textContent="Import a saved sketch",ee=p(),R(J.$$.fragment),de(_,"margin-top","30px"),$(i,"class","govuk-breadcrumbs__link"),$(i,"href",u=`index.html?scheme=${t[1]}`),$(d,"class","govuk-breadcrumbs__list-item"),$(v,"class","govuk-breadcrumbs__list-item"),$(r,"class","govuk-breadcrumbs__list"),$(b,"class","govuk-breadcrumbs"),$(b,"aria-label","Breadcrumb"),$(o,"class","govuk-grid-column-two-thirds"),$(D,"class","green-bar svelte-1z050ke"),$(h,"class","govuk-grid-column-one-third"),$(m,"class","govuk-grid-row"),$(e,"class","govuk-width-container")},m(g,N){O(g,e,N),W(n,e,null),l(e,s),W(w,e,null),l(e,f),l(e,_),l(e,S),l(e,m),l(m,o),l(o,b),l(b,r),l(r,d),l(d,i),l(i,a),l(r,H),l(r,v),l(o,P),l(o,F),l(o,q),l(o,M),l(o,U),L[y].m(o,null),l(m,k),l(m,h),l(h,D),l(h,z),W(j,h,null),l(h,x),l(h,Q),l(h,ee),W(J,h,null),E=!0},p(g,[N]){(!E||N&2&&u!==(u=`index.html?scheme=${g[1]}`))&&$(i,"href",u);let V=y;y=ne(g),y===V?L[y].p(g,N):(he(),A(L[V],1,1,()=>{L[V]=null}),me(),C=L[y],C?C.p(g,N):(C=L[y]=te[y](g),C.c()),I(C,1),C.m(o,null));const le={};N&32768&&(le.$$scope={dirty:N,ctx:g}),j.$set(le)},i(g){E||(I(n.$$.fragment,g),I(w.$$.fragment,g),I(C),I(j.$$.fragment,g),I(J.$$.fragment,g),E=!0)},o(g){A(n.$$.fragment,g),A(w.$$.fragment,g),A(C),A(j.$$.fragment,g),A(J.$$.fragment,g),E=!1},d(g){g&&B(e),Y(n),Y(w),L[y].d(),Y(j),Y(J)}}}function Re(t,e){ie(ie(t,".json"),".geojson")}function ie(t,e){return t.endsWith(e)?t.slice(0,-e.length):t}function We(t,e,n){let s;pe(t,ve,a=>n(1,s=a));let f=new URLSearchParams(window.location.search).get("authority");Ce(f);let _=X(f);$e(()=>{we()});function S(a){let u=window.prompt(`Rename file ${a} to what?`,a);if(u){let H=G(f,a),v=window.localStorage.getItem(H);window.localStorage.setItem(G(f,u),v),window.localStorage.removeItem(H),n(0,_=X(f))}}function m(a){if(!window.confirm(`Really delete file ${a}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`))return;let u=G(f,a);Fe(`${f}_${a}.json`,window.localStorage.getItem(u)),window.localStorage.removeItem(u),n(0,_=X(f))}function o(){let a=window.prompt("What do you want to name your new file?");if(!a)return;let u=ke(Se);Object.values(u.schemes)[0].scheme_name=a,window.localStorage.setItem(G(f,a),JSON.stringify(u)),window.location.href=`scheme.html?authority=${f}&file=${a}&schema=${s}`}function b(a){let u=JSON.parse(window.localStorage.getItem(G(f,a)));Ie(f,a,u)}return[_,s,f,S,m,o,b,a=>S(a),a=>b(a),a=>m(a)]}class Ye extends ce{constructor(e){super(),ue(this,e,We,De,fe,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Ye({target:document.getElementById("app")});
