import{S as ae,i as re,s as se,e as m,b as O,c as j,n as K,d as M,H as fe,f as V,F as de,j as D,a as k,x as H,k as ie,o as R,m as a,p as C,q as ce,t as I,u as W,v as me,w as he,y as ue,z as pe,I as ge,J as ee,K as _e,G as te,C as $e}from"./index-31c14ddd.js";import{W as we,c as ke}from"./config-9d576813.js";import{i as be,l as Q,g as z,a as ve,e as ye}from"./files-f56e01eb.js";import{H as Se}from"./colors-c3c5a000.js";function Fe(t){let e;return{c(){e=m("div"),e.innerHTML=`<p class="govuk-phase-banner__content" style="margin-bottom: 0px"><strong class="govuk-tag govuk-phase-banner__content__tag">Alpha</strong> <span class="govuk-phase-banner__text">This is a new service. Contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      with any feedback.</span></p>`,O(e,"class","govuk-phase-banner")},m(n,r){j(n,e,r)},p:K,i:K,o:K,d(n){n&&M(e)}}}class Ie extends ae{constructor(e){super(),re(this,e,null,Fe,se,{})}}function ne(t,e,n){const r=t.slice();return r[11]=e[n][0],r[12]=e[n][1],r}function Ce(t){let e;return{c(){e=m("p"),e.textContent="No saved files"},m(n,r){j(n,e,r)},p:K,i:K,o:K,d(n){n&&M(e)}}}function je(t){let e,n,r,$,u,_,S,f=ee(t[0]),o=[];for(let s=0;s<f.length;s+=1)o[s]=le(ne(t,f,s));const w=s=>C(o[s],1,1,()=>{o[s]=null});return{c(){e=m("h2"),e.textContent="Manage existing files",n=k(),r=m("table"),$=m("thead"),$.innerHTML="<tr><th>File name</th> <th>Scheme name</th> <th>Action</th></tr>",u=k(),_=m("tbody");for(let s=0;s<o.length;s+=1)o[s].c()},m(s,g){j(s,e,g),j(s,n,g),j(s,r,g),a(r,$),a(r,u),a(r,_);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(_,null);S=!0},p(s,g){if(g&47){f=ee(s[0]);let i;for(i=0;i<f.length;i+=1){const l=ne(s,f,i);o[i]?(o[i].p(l,g),I(o[i],1)):(o[i]=le(l),o[i].c(),I(o[i],1),o[i].m(_,null))}for(ue(),i=f.length;i<o.length;i+=1)w(i);ce()}},i(s){if(!S){for(let g=0;g<f.length;g+=1)I(o[g]);S=!0}},o(s){o=o.filter(Boolean);for(let g=0;g<o.length;g+=1)C(o[g]);S=!1},d(s){s&&(M(e),M(n),M(r)),_e(o,s)}}}function Me(t){let e;return{c(){e=H("Rename")},m(n,r){j(n,e,r)},d(n){n&&M(e)}}}function Ae(t){let e;return{c(){e=H("Download")},m(n,r){j(n,e,r)},d(n){n&&M(e)}}}function Oe(t){let e;return{c(){e=H("Delete")},m(n,r){j(n,e,r)},d(n){n&&M(e)}}}function le(t){let e,n,r,$=t[11]+"",u,_,S,f,o,w=t[11]+"",s,g,i,l,c,B,b,P,h,v,A;function F(){return t[6](t[11])}c=new V({props:{$$slots:{default:[Me]},$$scope:{ctx:t}}}),c.$on("click",F);function Y(){return t[7](t[11])}b=new V({props:{$$slots:{default:[Ae]},$$scope:{ctx:t}}}),b.$on("click",Y);function E(){return t[8](t[11])}return h=new we({props:{$$slots:{default:[Oe]},$$scope:{ctx:t}}}),h.$on("click",E),{c(){e=m("tr"),n=m("td"),r=m("a"),u=H($),S=k(),f=m("td"),o=H("TODO describe "),s=H(w),g=k(),i=m("td"),l=m("div"),D(c.$$.fragment),B=k(),D(b.$$.fragment),P=k(),D(h.$$.fragment),v=k(),O(r,"href",_=`scheme.html?authority=${t[1]}&file=${t[11]}&schema=${t[12]}`),O(l,"class","govuk-button-group"),ie(l,"flex-wrap","nowrap")},m(d,y){j(d,e,y),a(e,n),a(n,r),a(r,u),a(e,S),a(e,f),a(f,o),a(f,s),a(e,g),a(e,i),a(i,l),R(c,l,null),a(l,B),R(b,l,null),a(l,P),R(h,l,null),a(e,v),A=!0},p(d,y){t=d,(!A||y&1)&&$!==($=t[11]+"")&&te(u,$),(!A||y&1&&_!==(_=`scheme.html?authority=${t[1]}&file=${t[11]}&schema=${t[12]}`))&&O(r,"href",_),(!A||y&1)&&w!==(w=t[11]+"")&&te(s,w);const J={};y&32768&&(J.$$scope={dirty:y,ctx:t}),c.$set(J);const q={};y&32768&&(q.$$scope={dirty:y,ctx:t}),b.$set(q);const L={};y&32768&&(L.$$scope={dirty:y,ctx:t}),h.$set(L)},i(d){A||(I(c.$$.fragment,d),I(b.$$.fragment,d),I(h.$$.fragment,d),A=!0)},o(d){C(c.$$.fragment,d),C(b.$$.fragment,d),C(h.$$.fragment,d),A=!1},d(d){d&&M(e),W(c),W(b),W(h)}}}function He(t){let e;return{c(){e=H("Create new file")},m(n,r){j(n,e,r)},d(n){n&&M(e)}}}function Le(t){let e,n,r,$,u,_,S,f,o,w,s,g=fe(t[1])+"",i,l,c,B,b,P,h,v,A,F,Y,E,d,y,J,q,L,G;n=new Se({}),$=new Ie({});const X=[je,Ce],N=[];function Z(p,T){return p[0].length>0?0:1}return h=Z(t),v=N[h]=X[h](t),d=new V({props:{$$slots:{default:[He]},$$scope:{ctx:t}}}),d.$on("click",t[4]),L=new de({props:{label:"Select a .geojson file",onLoad:Be}}),{c(){e=m("div"),D(n.$$.fragment),r=k(),D($.$$.fragment),u=k(),_=m("h1"),_.textContent="Manage my sketches",S=k(),f=m("div"),o=m("div"),w=m("p"),s=H("You're working on sketches in "),i=H(g),l=H(`.
        `),c=m("a"),c.textContent="Select a different area",B=k(),b=m("p"),b.textContent=`On this page you can manage your sketch files. All files are auto-saved
        in your browser's local storage. You can close your browser and continue
        later.`,P=k(),v.c(),A=k(),F=m("div"),Y=m("h2"),Y.textContent="Create a new sketch",E=k(),D(d.$$.fragment),y=k(),J=m("h2"),J.textContent="Import a saved sketch",q=k(),D(L.$$.fragment),ie(_,"margin-top","30px"),O(c,"href","index.html"),O(o,"class","govuk-grid-column-two-thirds"),O(Y,"class","green-bar svelte-1z050ke"),O(F,"class","govuk-grid-column-one-third"),O(f,"class","govuk-grid-row"),O(e,"class","govuk-width-container")},m(p,T){j(p,e,T),R(n,e,null),a(e,r),R($,e,null),a(e,u),a(e,_),a(e,S),a(e,f),a(f,o),a(o,w),a(w,s),a(w,i),a(w,l),a(w,c),a(o,B),a(o,b),a(o,P),N[h].m(o,null),a(f,A),a(f,F),a(F,Y),a(F,E),R(d,F,null),a(F,y),a(F,J),a(F,q),R(L,F,null),G=!0},p(p,[T]){let U=h;h=Z(p),h===U?N[h].p(p,T):(ue(),C(N[U],1,1,()=>{N[U]=null}),ce(),v=N[h],v?v.p(p,T):(v=N[h]=X[h](p),v.c()),I(v,1),v.m(o,null));const x={};T&32768&&(x.$$scope={dirty:T,ctx:p}),d.$set(x)},i(p){G||(I(n.$$.fragment,p),I($.$$.fragment,p),I(v),I(d.$$.fragment,p),I(L.$$.fragment,p),G=!0)},o(p){C(n.$$.fragment,p),C($.$$.fragment,p),C(v),C(d.$$.fragment,p),C(L.$$.fragment,p),G=!1},d(p){p&&M(e),W(n),W($),N[h].d(),W(d),W(L)}}}function Be(t,e){oe(oe(t,".json"),".geojson")}function oe(t,e){return t.endsWith(e)?t.slice(0,-e.length):t}function Ne(t,e,n){let r;me(t,$e,l=>n(9,r=l));let u=new URLSearchParams(window.location.search).get("authority");be(u);let _=Q(u);he(()=>{pe()});function S(l){let c=window.prompt(`Rename file ${l} to what?`,l);if(c){let B=z(u,l),b=window.localStorage.getItem(B);window.localStorage.setItem(z(u,c),b),window.localStorage.removeItem(B),n(0,_=Q(u))}}function f(l){if(!window.confirm(`Really delete file ${l}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`))return;let c=z(u,l);ve(`${u}_${l}.json`,window.localStorage.getItem(c)),window.localStorage.removeItem(c),n(0,_=Q(u))}function o(){let l=window.prompt("What do you want to name your new file?");if(!l)return;let c=ge(ke);Object.values(c.schemes)[0].scheme_name=l,window.localStorage.setItem(z(u,l),JSON.stringify(c)),window.location.href=`scheme.html?authority=${u}&file=${l}&schema=${r}`}function w(l){let c=JSON.parse(window.localStorage.getItem(z(u,l)));ye(u,l,c)}return[_,u,S,f,o,w,l=>S(l),l=>w(l),l=>f(l)]}class Te extends ae{constructor(e){super(),re(this,e,Ne,Le,se,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Te({target:document.getElementById("app")});
