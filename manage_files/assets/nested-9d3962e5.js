import{S as de,i as ge,s as me,e as f,b as $,c as j,n as R,d as L,f as X,E as $e,F as we,j as O,a as h,x as Y,A as ke,k as pe,o as T,m as l,p as I,q as _e,t as M,u as D,v as be,H as ve,L as V,w as ye,C as he,D as Se,M as ie,N as Ce,O as Me,P as q,Q as Z,G as Fe,J as Ie,T as Ae,y as ce,z as je,B as Le,K as Be}from"./files-d83d80c1.js";import{W as Ee,c as He}from"./config-7de4c40d.js";import{H as Ne}from"./colors-250679b4.js";function Oe(a){let e;return{c(){e=f("div"),e.innerHTML=`<p class="govuk-phase-banner__content" style="margin-bottom: 0px"><strong class="govuk-tag govuk-phase-banner__content__tag">Alpha</strong> <span class="govuk-phase-banner__text">This is a new service. Contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      with any feedback.</span></p>`,$(e,"class","govuk-phase-banner")},m(n,o){j(n,e,o)},p:R,i:R,o:R,d(n){n&&L(e)}}}class Te extends de{constructor(e){super(),ge(this,e,null,Oe,me,{})}}function ue(a,e,n){const o=a.slice();return o[13]=e[n][0],o[14]=e[n][1],o}function De(a){let e;return{c(){e=f("p"),e.textContent="No saved files"},m(n,o){j(n,e,o)},p:R,i:R,o:R,d(n){n&&L(e)}}}function Ge(a){let e,n,o,w,d,p,C,g=ce(a[0]),t=[];for(let r=0;r<g.length;r+=1)t[r]=fe(ue(a,g,r));const _=r=>I(t[r],1,1,()=>{t[r]=null});return{c(){e=f("h2"),e.textContent="Manage existing files",n=h(),o=f("table"),w=f("thead"),w.innerHTML="<tr><th>File name</th> <th>Action</th></tr>",d=h(),p=f("tbody");for(let r=0;r<t.length;r+=1)t[r].c()},m(r,i){j(r,e,i),j(r,n,i),j(r,o,i),l(o,w),l(o,d),l(o,p);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(p,null);C=!0},p(r,i){if(i&313){g=ce(r[0]);let c;for(c=0;c<g.length;c+=1){const b=ue(r,g,c);t[c]?(t[c].p(b,i),M(t[c],1)):(t[c]=fe(b),t[c].c(),M(t[c],1),t[c].m(p,null))}for(he(),c=g.length;c<t.length;c+=1)_(c);_e()}},i(r){if(!C){for(let i=0;i<g.length;i+=1)M(t[i]);C=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)I(t[i]);C=!1},d(r){r&&(L(e),L(n),L(o)),je(t,r)}}}function Je(a){let e;return{c(){e=Y("Rename")},m(n,o){j(n,e,o)},d(n){n&&L(e)}}}function Pe(a){let e;return{c(){e=Y("Download")},m(n,o){j(n,e,o)},d(n){n&&L(e)}}}function Re(a){let e;return{c(){e=Y("Delete")},m(n,o){j(n,e,o)},d(n){n&&L(e)}}}function fe(a){let e,n,o,w=a[13]+"",d,p,C,g,t,_,r,i,c,b,E,s;function m(){return a[9](a[13])}_=new X({props:{$$slots:{default:[Je]},$$scope:{ctx:a}}}),_.$on("click",m);function A(){return a[10](a[13])}i=new X({props:{$$slots:{default:[Pe]},$$scope:{ctx:a}}}),i.$on("click",A);function G(){return a[11](a[13])}return b=new Ee({props:{$$slots:{default:[Re]},$$scope:{ctx:a}}}),b.$on("click",G),{c(){e=f("tr"),n=f("td"),o=f("a"),d=Y(w),C=h(),g=f("td"),t=f("div"),O(_.$$.fragment),r=h(),O(i.$$.fragment),c=h(),O(b.$$.fragment),E=h(),$(o,"href",p=Z(a[3],a[13],a[14])),$(t,"class","govuk-button-group"),pe(t,"flex-wrap","nowrap")},m(k,y){j(k,e,y),l(e,n),l(n,o),l(o,d),l(e,C),l(e,g),l(g,t),T(_,t,null),l(t,r),T(i,t,null),l(t,c),T(b,t,null),l(e,E),s=!0},p(k,y){a=k,(!s||y&1)&&w!==(w=a[13]+"")&&Le(d,w),(!s||y&1&&p!==(p=Z(a[3],a[13],a[14])))&&$(o,"href",p);const K={};y&131072&&(K.$$scope={dirty:y,ctx:a}),_.$set(K);const v={};y&131072&&(v.$$scope={dirty:y,ctx:a}),i.$set(v);const S={};y&131072&&(S.$$scope={dirty:y,ctx:a}),b.$set(S)},i(k){s||(M(_.$$.fragment,k),M(i.$$.fragment,k),M(b.$$.fragment,k),s=!0)},o(k){I(_.$$.fragment,k),I(i.$$.fragment,k),I(b.$$.fragment,k),s=!1},d(k){k&&L(e),D(_),D(i),D(b)}}}function Ye(a){let e;return{c(){e=Y("Create new file")},m(n,o){j(n,e,o)},d(n){n&&L(e)}}}function Ke(a){let e,n,o,w,d,p,C,g,t,_,r,i,c,b,E,s,m,A,G,k,y,K,v,S,x,F,z,ee,H,te,U,ne,J,ae,P,W;n=new Ne({}),w=new Te({});const le=[Ge,De],N=[];function oe(u,B){return u[0].length>0?0:1}return v=oe(a),S=N[v]=le[v](a),H=new X({props:{$$slots:{default:[Ye]},$$scope:{ctx:a}}}),H.$on("click",a[6]),J=new $e({props:{errorMessage:a[1]}}),P=new we({props:{label:"Select a .geojson file",onLoad:a[7]}}),{c(){e=f("div"),O(n.$$.fragment),o=h(),O(w.$$.fragment),d=h(),p=f("h1"),p.textContent="Manage my sketches",C=h(),g=f("div"),t=f("div"),_=f("nav"),r=f("ol"),i=f("li"),c=f("a"),b=Y("Change area"),s=h(),m=f("li"),m.textContent="Manage files",A=h(),G=f("p"),G.textContent=`You're working on sketches in ${ke(a[3])}.`,k=h(),y=f("p"),y.textContent=`On this page you can manage your sketch files. All files are auto-saved
        in your browser's local storage. You can close your browser and continue
        later.`,K=h(),S.c(),x=h(),F=f("div"),z=f("h2"),z.textContent="Create a new sketch",ee=h(),O(H.$$.fragment),te=h(),U=f("h2"),U.textContent="Import a saved sketch",ne=h(),O(J.$$.fragment),ae=h(),O(P.$$.fragment),pe(p,"margin-top","30px"),$(c,"class","govuk-breadcrumbs__link"),$(c,"href",E=`index.html?scheme=${a[2]}`),$(i,"class","govuk-breadcrumbs__list-item"),$(m,"class","govuk-breadcrumbs__list-item"),$(r,"class","govuk-breadcrumbs__list"),$(_,"class","govuk-breadcrumbs"),$(_,"aria-label","Breadcrumb"),$(t,"class","govuk-grid-column-two-thirds"),$(z,"class","green-bar svelte-1z050ke"),$(F,"class","govuk-grid-column-one-third"),$(g,"class","govuk-grid-row"),$(e,"class","govuk-width-container govuk-prose")},m(u,B){j(u,e,B),T(n,e,null),l(e,o),T(w,e,null),l(e,d),l(e,p),l(e,C),l(e,g),l(g,t),l(t,_),l(_,r),l(r,i),l(i,c),l(c,b),l(r,s),l(r,m),l(t,A),l(t,G),l(t,k),l(t,y),l(t,K),N[v].m(t,null),l(g,x),l(g,F),l(F,z),l(F,ee),T(H,F,null),l(F,te),l(F,U),l(F,ne),T(J,F,null),l(F,ae),T(P,F,null),W=!0},p(u,[B]){(!W||B&4&&E!==(E=`index.html?scheme=${u[2]}`))&&$(c,"href",E);let Q=v;v=oe(u),v===Q?N[v].p(u,B):(he(),I(N[Q],1,1,()=>{N[Q]=null}),_e(),S=N[v],S?S.p(u,B):(S=N[v]=le[v](u),S.c()),M(S,1),S.m(t,null));const re={};B&131072&&(re.$$scope={dirty:B,ctx:u}),H.$set(re);const se={};B&2&&(se.errorMessage=u[1]),J.$set(se)},i(u){W||(M(n.$$.fragment,u),M(w.$$.fragment,u),M(S),M(H.$$.fragment,u),M(J.$$.fragment,u),M(P.$$.fragment,u),W=!0)},o(u){I(n.$$.fragment,u),I(w.$$.fragment,u),I(S),I(H.$$.fragment,u),I(J.$$.fragment,u),I(P.$$.fragment,u),W=!1},d(u){u&&L(e),D(n),D(w),N[v].d(),D(H),D(J),D(P)}}}function We(a,e,n){let o;be(a,Be,s=>n(2,o=s));let d=new URLSearchParams(window.location.search).get("authority");ve(d);let p=V(d),C="";ye(()=>{Se()});function g(s){let m=window.prompt(`Rename file ${s} to what?`,s);if(m){let A=q(d,s),G=window.localStorage.getItem(A);ie(q(d,m),G),window.localStorage.removeItem(A),n(0,p=V(d))}}function t(s){if(!window.confirm(`Really delete file ${s}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`))return;let m=q(d,s);Ce(`${d}_${s}.json`,window.localStorage.getItem(m)),window.localStorage.removeItem(m),n(0,p=V(d))}function _(){let s=window.prompt("What do you want to name your new file?");if(!s)return;let m=Me(He);Object.values(m.schemes)[0].scheme_name=s,ie(q(d,s),JSON.stringify(m)),window.location.href=Z(d,s,o)}async function r(s,m){try{let A=await Fe();window.location.href=Ie(s,m,A)}catch(A){n(1,C=`Couldn't import file: ${A}`)}}function i(s){let m=JSON.parse(window.localStorage.getItem(q(d,s)));Ae(d,s,m)}return[p,C,o,d,g,t,_,r,i,s=>g(s),s=>i(s),s=>t(s)]}class qe extends de{constructor(e){super(),ge(this,e,We,Ke,me,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new qe({target:document.getElementById("app")});
