import{S as oe,i as ae,s as re,e as f,b as F,c as j,n as W,d as A,I as fe,f as se,F as de,j as T,a as _,y as L,m as ie,p as N,o as a,q as M,r as ce,t as C,v as R,x as me,z as ue,A as he,J as ge,K as Z,L as pe,H as ee}from"./index-db5d9753.js";import{l as x,g as z,d as _e,W as $e,c as we}from"./config-36d0bdcd.js";import{H as ke}from"./colors-f4b84deb.js";function ve(n){let e;return{c(){e=f("div"),e.innerHTML=`<p class="govuk-phase-banner__content" style="margin-bottom: 0px"><strong class="govuk-tag govuk-phase-banner__content__tag">Alpha</strong> <span class="govuk-phase-banner__text">This is a new service. Contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      with any feedback.</span></p>`,F(e,"class","govuk-phase-banner")},m(l,s){j(l,e,s)},p:W,i:W,o:W,d(l){l&&A(e)}}}class be extends oe{constructor(e){super(),ae(this,e,null,ve,re,{})}}function te(n,e,l){const s=n.slice();return s[8]=e[l],s}function ye(n){let e;return{c(){e=f("p"),e.textContent="No saved files"},m(l,s){j(l,e,s)},p:W,i:W,o:W,d(l){l&&A(e)}}}function Se(n){let e,l,s,c,k,g,v,d=Z(n[0]),o=[];for(let t=0;t<d.length;t+=1)o[t]=ne(te(n,d,t));const $=t=>M(o[t],1,1,()=>{o[t]=null});return{c(){e=f("h2"),e.textContent="Manage existing files",l=_(),s=f("table"),c=f("thead"),c.innerHTML="<tr><th>File name</th> <th>Scheme name</th> <th>Action</th></tr>",k=_(),g=f("tbody");for(let t=0;t<o.length;t+=1)o[t].c()},m(t,i){j(t,e,i),j(t,l,i),j(t,s,i),a(s,c),a(s,k),a(s,g);for(let r=0;r<o.length;r+=1)o[r]&&o[r].m(g,null);v=!0},p(t,i){if(i&15){d=Z(t[0]);let r;for(r=0;r<d.length;r+=1){const p=te(t,d,r);o[r]?(o[r].p(p,i),C(o[r],1)):(o[r]=ne(p),o[r].c(),C(o[r],1),o[r].m(g,null))}for(ue(),r=d.length;r<o.length;r+=1)$(r);ce()}},i(t){if(!v){for(let i=0;i<d.length;i+=1)C(o[i]);v=!0}},o(t){o=o.filter(Boolean);for(let i=0;i<o.length;i+=1)M(o[i]);v=!1},d(t){t&&(A(e),A(l),A(s)),pe(o,t)}}}function Ie(n){let e;return{c(){e=L("Rename")},m(l,s){j(l,e,s)},d(l){l&&A(e)}}}function Ce(n){let e;return{c(){e=L("Delete")},m(l,s){j(l,e,s)},d(l){l&&A(e)}}}function ne(n){let e,l,s,c=n[8]+"",k,g,v,d,o,$=n[8]+"",t,i,r,p,b,Y,S,D,h;function y(){return n[5](n[8])}b=new se({props:{$$slots:{default:[Ie]},$$scope:{ctx:n}}}),b.$on("click",y);function P(){return n[6](n[8])}return S=new $e({props:{$$slots:{default:[Ce]},$$scope:{ctx:n}}}),S.$on("click",P),{c(){e=f("tr"),l=f("td"),s=f("a"),k=L(c),v=_(),d=f("td"),o=L("TODO describe "),t=L($),i=_(),r=f("td"),p=f("div"),T(b.$$.fragment),Y=_(),T(S.$$.fragment),D=_(),F(s,"href",g=`scheme.html?authority=${n[1]}&file=${n[8]}`),F(p,"class","govuk-button-group"),ie(p,"flex-wrap","nowrap")},m(u,w){j(u,e,w),a(e,l),a(l,s),a(s,k),a(e,v),a(e,d),a(d,o),a(d,t),a(e,i),a(e,r),a(r,p),N(b,p,null),a(p,Y),N(S,p,null),a(e,D),h=!0},p(u,w){n=u,(!h||w&1)&&c!==(c=n[8]+"")&&ee(k,c),(!h||w&1&&g!==(g=`scheme.html?authority=${n[1]}&file=${n[8]}`))&&F(s,"href",g),(!h||w&1)&&$!==($=n[8]+"")&&ee(t,$);const K={};w&2048&&(K.$$scope={dirty:w,ctx:n}),b.$set(K);const I={};w&2048&&(I.$$scope={dirty:w,ctx:n}),S.$set(I)},i(u){h||(C(b.$$.fragment,u),C(S.$$.fragment,u),h=!0)},o(u){M(b.$$.fragment,u),M(S.$$.fragment,u),h=!1},d(u){u&&A(e),R(b),R(S)}}}function Fe(n){let e;return{c(){e=L("Create new file")},m(l,s){j(l,e,s)},d(l){l&&A(e)}}}function Me(n){let e,l,s,c,k,g,v,d,o,$,t,i=fe(n[1])+"",r,p,b,Y,S,D,h,y,P,u,w,K,I,G,E,U,O,q;l=new ke({}),c=new be({});const Q=[Se,ye],H=[];function V(m,B){return m[0].length>0?0:1}return h=V(n),y=H[h]=Q[h](n),I=new se({props:{$$slots:{default:[Fe]},$$scope:{ctx:n}}}),I.$on("click",n[4]),O=new de({props:{label:"Select a .geojson file",onLoad:je}}),{c(){e=f("div"),T(l.$$.fragment),s=_(),T(c.$$.fragment),k=_(),g=f("h1"),g.textContent="Manage my sketches",v=_(),d=f("div"),o=f("div"),$=f("p"),t=L("You're worked on sketches in "),r=L(i),p=L(`.
        `),b=f("a"),b.textContent="Select a different area",Y=_(),S=f("p"),S.textContent=`On this page you can manage your sketch files. All files are auto-saved
        in your browser's local storage. You can close your browser and continue
        later.`,D=_(),y.c(),P=_(),u=f("div"),w=f("h2"),w.textContent="Create a new sketch",K=_(),T(I.$$.fragment),G=_(),E=f("h2"),E.textContent="Import a saved sketch",U=_(),T(O.$$.fragment),ie(g,"margin-top","30px"),F(b,"href","index.html"),F(o,"class","govuk-grid-column-two-thirds"),F(w,"class","green-bar svelte-1z050ke"),F(u,"class","govuk-grid-column-one-third"),F(d,"class","govuk-grid-row"),F(e,"class","govuk-width-container")},m(m,B){j(m,e,B),N(l,e,null),a(e,s),N(c,e,null),a(e,k),a(e,g),a(e,v),a(e,d),a(d,o),a(o,$),a($,t),a($,r),a($,p),a($,b),a(o,Y),a(o,S),a(o,D),H[h].m(o,null),a(d,P),a(d,u),a(u,w),a(u,K),N(I,u,null),a(u,G),a(u,E),a(u,U),N(O,u,null),q=!0},p(m,[B]){let J=h;h=V(m),h===J?H[h].p(m,B):(ue(),M(H[J],1,1,()=>{H[J]=null}),ce(),y=H[h],y?y.p(m,B):(y=H[h]=Q[h](m),y.c()),C(y,1),y.m(o,null));const X={};B&2048&&(X.$$scope={dirty:B,ctx:m}),I.$set(X)},i(m){q||(C(l.$$.fragment,m),C(c.$$.fragment,m),C(y),C(I.$$.fragment,m),C(O.$$.fragment,m),q=!0)},o(m){M(l.$$.fragment,m),M(c.$$.fragment,m),M(y),M(I.$$.fragment,m),M(O.$$.fragment,m),q=!1},d(m){m&&A(e),R(l),R(c),H[h].d(),R(I),R(O)}}}function je(n,e){le(le(n,".json"),".geojson")}function le(n,e){return n.endsWith(e)?n.slice(0,-e.length):n}function Ae(n,e,l){let c=new URLSearchParams(window.location.search).get("authority"),k=x(c);me(()=>{he()});function g(t){let i=window.prompt(`Rename file ${t} to what?`,t);if(i){let r=z(c,t),p=window.localStorage.getItem(r);window.localStorage.setItem(z(c,i),p),window.localStorage.removeItem(r),l(0,k=x(c))}}function v(t){if(!window.confirm(`Really delete file ${t}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`))return;let i=z(c,t);_e(`${c}_${t}.json`,window.localStorage.getItem(i)),window.localStorage.removeItem(i),l(0,k=x(c))}function d(){let t=window.prompt("What do you want to name your new file?");if(!t)return;let i=ge(we);Object.values(i.schemes)[0].scheme_name=t,window.localStorage.setItem(z(c,t),JSON.stringify(i)),window.location.href=`scheme.html?authority=${c}&file=${t}`}return[k,c,g,v,d,t=>g(t),t=>v(t)]}class Le extends oe{constructor(e){super(),ae(this,e,Ae,Me,re,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Le({target:document.getElementById("app")});
