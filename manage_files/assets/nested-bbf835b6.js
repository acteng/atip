import{S as fe,i as de,s as ge,e as f,b as $,c as j,n as T,d as B,f as X,E as he,F as $e,j as O,a as h,x as Y,G as we,k as me,o as D,m as o,p as I,q as pe,t as M,u as G,v as ke,H as be,I as V,w as ve,y as _e,z as ye,J as q,K as Se,L as Ce,M as Z,A as Me,B as Fe,N as Ie,O as ie,P as Ae,D as je,C as Be}from"./files-b25757c5.js";import{W as Le,c as Ee}from"./config-734628ff.js";import{H as He}from"./colors-54f01f8d.js";function Ne(l){let e;return{c(){e=f("div"),e.innerHTML=`<p class="govuk-phase-banner__content" style="margin-bottom: 0px"><strong class="govuk-tag govuk-phase-banner__content__tag">Alpha</strong> <span class="govuk-phase-banner__text">This is a new service. Contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      with any feedback.</span></p>`,$(e,"class","govuk-phase-banner")},m(n,a){j(n,e,a)},p:T,i:T,o:T,d(n){n&&B(e)}}}class Oe extends fe{constructor(e){super(),de(this,e,null,Ne,ge,{})}}function ce(l,e,n){const a=l.slice();return a[13]=e[n][0],a[14]=e[n][1],a}function De(l){let e;return{c(){e=f("p"),e.textContent="No saved files"},m(n,a){j(n,e,a)},p:T,i:T,o:T,d(n){n&&B(e)}}}function Ge(l){let e,n,a,w,d,p,C,g=ie(l[0]),t=[];for(let r=0;r<g.length;r+=1)t[r]=ue(ce(l,g,r));const _=r=>I(t[r],1,1,()=>{t[r]=null});return{c(){e=f("h2"),e.textContent="Manage existing files",n=h(),a=f("table"),w=f("thead"),w.innerHTML="<tr><th>File name</th> <th>Action</th></tr>",d=h(),p=f("tbody");for(let r=0;r<t.length;r+=1)t[r].c()},m(r,i){j(r,e,i),j(r,n,i),j(r,a,i),o(a,w),o(a,d),o(a,p);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(p,null);C=!0},p(r,i){if(i&313){g=ie(r[0]);let c;for(c=0;c<g.length;c+=1){const b=ce(r,g,c);t[c]?(t[c].p(b,i),M(t[c],1)):(t[c]=ue(b),t[c].c(),M(t[c],1),t[c].m(p,null))}for(_e(),c=g.length;c<t.length;c+=1)_(c);pe()}},i(r){if(!C){for(let i=0;i<g.length;i+=1)M(t[i]);C=!0}},o(r){t=t.filter(Boolean);for(let i=0;i<t.length;i+=1)I(t[i]);C=!1},d(r){r&&(B(e),B(n),B(a)),Ae(t,r)}}}function Je(l){let e;return{c(){e=Y("Rename")},m(n,a){j(n,e,a)},d(n){n&&B(e)}}}function Pe(l){let e;return{c(){e=Y("Download")},m(n,a){j(n,e,a)},d(n){n&&B(e)}}}function Re(l){let e;return{c(){e=Y("Delete")},m(n,a){j(n,e,a)},d(n){n&&B(e)}}}function ue(l){let e,n,a,w=l[13]+"",d,p,C,g,t,_,r,i,c,b,E,s;function m(){return l[9](l[13])}_=new X({props:{$$slots:{default:[Je]},$$scope:{ctx:l}}}),_.$on("click",m);function A(){return l[10](l[13])}i=new X({props:{$$slots:{default:[Pe]},$$scope:{ctx:l}}}),i.$on("click",A);function J(){return l[11](l[13])}return b=new Le({props:{$$slots:{default:[Re]},$$scope:{ctx:l}}}),b.$on("click",J),{c(){e=f("tr"),n=f("td"),a=f("a"),d=Y(w),C=h(),g=f("td"),t=f("div"),O(_.$$.fragment),r=h(),O(i.$$.fragment),c=h(),O(b.$$.fragment),E=h(),$(a,"href",p=Z(l[3],l[13],l[14])),$(t,"class","govuk-button-group"),me(t,"flex-wrap","nowrap")},m(k,y){j(k,e,y),o(e,n),o(n,a),o(a,d),o(e,C),o(e,g),o(g,t),D(_,t,null),o(t,r),D(i,t,null),o(t,c),D(b,t,null),o(e,E),s=!0},p(k,y){l=k,(!s||y&1)&&w!==(w=l[13]+"")&&je(d,w),(!s||y&1&&p!==(p=Z(l[3],l[13],l[14])))&&$(a,"href",p);const K={};y&131072&&(K.$$scope={dirty:y,ctx:l}),_.$set(K);const v={};y&131072&&(v.$$scope={dirty:y,ctx:l}),i.$set(v);const S={};y&131072&&(S.$$scope={dirty:y,ctx:l}),b.$set(S)},i(k){s||(M(_.$$.fragment,k),M(i.$$.fragment,k),M(b.$$.fragment,k),s=!0)},o(k){I(_.$$.fragment,k),I(i.$$.fragment,k),I(b.$$.fragment,k),s=!1},d(k){k&&B(e),G(_),G(i),G(b)}}}function Te(l){let e;return{c(){e=Y("Create new file")},m(n,a){j(n,e,a)},d(n){n&&B(e)}}}function Ye(l){let e,n,a,w,d,p,C,g,t,_,r,i,c,b,E,s,m,A,J,k,y,K,v,S,x,F,z,ee,H,te,U,ne,P,le,R,W;n=new He({}),w=new Oe({});const oe=[Ge,De],N=[];function ae(u,L){return u[0].length>0?0:1}return v=ae(l),S=N[v]=oe[v](l),H=new X({props:{$$slots:{default:[Te]},$$scope:{ctx:l}}}),H.$on("click",l[6]),P=new he({props:{errorMessage:l[1]}}),R=new $e({props:{label:"Select a .geojson file",onLoad:l[7]}}),{c(){e=f("div"),O(n.$$.fragment),a=h(),O(w.$$.fragment),d=h(),p=f("h1"),p.textContent="Manage my sketches",C=h(),g=f("div"),t=f("div"),_=f("nav"),r=f("ol"),i=f("li"),c=f("a"),b=Y("Change area"),s=h(),m=f("li"),m.textContent="Manage files",A=h(),J=f("p"),J.textContent=`You're working on sketches in ${we(l[3])}.`,k=h(),y=f("p"),y.textContent=`On this page you can manage your sketch files. All files are auto-saved
        in your browser's local storage. You can close your browser and continue
        later.`,K=h(),S.c(),x=h(),F=f("div"),z=f("h2"),z.textContent="Create a new sketch",ee=h(),O(H.$$.fragment),te=h(),U=f("h2"),U.textContent="Import a saved sketch",ne=h(),O(P.$$.fragment),le=h(),O(R.$$.fragment),me(p,"margin-top","30px"),$(c,"class","govuk-breadcrumbs__link"),$(c,"href",E=`index.html?scheme=${l[2]}`),$(i,"class","govuk-breadcrumbs__list-item"),$(m,"class","govuk-breadcrumbs__list-item"),$(r,"class","govuk-breadcrumbs__list"),$(_,"class","govuk-breadcrumbs"),$(_,"aria-label","Breadcrumb"),$(t,"class","govuk-grid-column-two-thirds"),$(z,"class","green-bar svelte-1z050ke"),$(F,"class","govuk-grid-column-one-third"),$(g,"class","govuk-grid-row"),$(e,"class","govuk-width-container govuk-prose")},m(u,L){j(u,e,L),D(n,e,null),o(e,a),D(w,e,null),o(e,d),o(e,p),o(e,C),o(e,g),o(g,t),o(t,_),o(_,r),o(r,i),o(i,c),o(c,b),o(r,s),o(r,m),o(t,A),o(t,J),o(t,k),o(t,y),o(t,K),N[v].m(t,null),o(g,x),o(g,F),o(F,z),o(F,ee),D(H,F,null),o(F,te),o(F,U),o(F,ne),D(P,F,null),o(F,le),D(R,F,null),W=!0},p(u,[L]){(!W||L&4&&E!==(E=`index.html?scheme=${u[2]}`))&&$(c,"href",E);let Q=v;v=ae(u),v===Q?N[v].p(u,L):(_e(),I(N[Q],1,1,()=>{N[Q]=null}),pe(),S=N[v],S?S.p(u,L):(S=N[v]=oe[v](u),S.c()),M(S,1),S.m(t,null));const re={};L&131072&&(re.$$scope={dirty:L,ctx:u}),H.$set(re);const se={};L&2&&(se.errorMessage=u[1]),P.$set(se)},i(u){W||(M(n.$$.fragment,u),M(w.$$.fragment,u),M(S),M(H.$$.fragment,u),M(P.$$.fragment,u),M(R.$$.fragment,u),W=!0)},o(u){I(n.$$.fragment,u),I(w.$$.fragment,u),I(S),I(H.$$.fragment,u),I(P.$$.fragment,u),I(R.$$.fragment,u),W=!1},d(u){u&&B(e),G(n),G(w),N[v].d(),G(H),G(P),G(R)}}}function Ke(l,e,n){let a;ke(l,Be,s=>n(2,a=s));let d=new URLSearchParams(window.location.search).get("authority");be(d);let p=V(d),C="";ve(()=>{ye()});function g(s){let m=window.prompt(`Rename file ${s} to what?`,s);if(m){let A=q(d,s),J=window.localStorage.getItem(A);window.localStorage.setItem(q(d,m),J),window.localStorage.removeItem(A),n(0,p=V(d))}}function t(s){if(!window.confirm(`Really delete file ${s}? You can't undo this. (If you delete, a copy will still be downloaded to your browser's download folder, in case you make a mistake.)`))return;let m=q(d,s);Se(`${d}_${s}.json`,window.localStorage.getItem(m)),window.localStorage.removeItem(m),n(0,p=V(d))}function _(){let s=window.prompt("What do you want to name your new file?");if(!s)return;let m=Ce(Ee);Object.values(m.schemes)[0].scheme_name=s,window.localStorage.setItem(q(d,s),JSON.stringify(m)),window.location.href=Z(d,s,a)}async function r(s,m){try{let A=await Me();window.location.href=Fe(s,m,A)}catch(A){n(1,C=`Couldn't import file: ${A}`)}}function i(s){let m=JSON.parse(window.localStorage.getItem(q(d,s)));Ie(d,s,m)}return[p,C,a,d,g,t,_,r,i,s=>g(s),s=>i(s),s=>t(s)]}class We extends fe{constructor(e){super(),de(this,e,Ke,Ye,ge,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new We({target:document.getElementById("app")});
