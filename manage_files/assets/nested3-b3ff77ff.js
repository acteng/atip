import{S as Z,i as X,s as J,e as S,b as A,k as oe,c as d,n as Q,d as h,ay as wr,g as H,h as E,a as L,j as b,o as w,aa as lt,r as B,t as m,p as g,u as v,L as rt,M as st,N as ot,O as it,aL as qn,m as p,J as he,y as be,q as we,K as Qe,x as y,G,Y as ve,v as Y,Z as kn,_ as Ut,P as Bt,aM as Hn,aN as Fr,as as $n,a5 as ne,f as Ke,X as Ne,aO as ce,a6 as le,a7 as se,R as yn,aD as Qt,av as tn,az as Je,aA as vr,aP as Zt,aQ as Dt,w as kr,aR as Ar,D as Gr,aC as mn,aG as Sn,aS as zr,aT as yr,F as qr,E as Hr,aK as Er,aF as _n,z as Br}from"./index-31c14ddd.js";import{c as z,d as Ve,t as Ur,a as Ye,C as De,e as me,S as Ft,p as En,f as Bn,h as Jt,g as Wr,H as Yr,m as Un}from"./colors-c3c5a000.js";import{e as Wn,h as tt,M as Jr,R as Vr,f as Ze,C as At,b as Qr,d as Kr,c as Yn,a as Jn,i as en,W as Sr,B as Zr,S as Xr,Z as xr,G as es}from"./ZoomOutMap-b3e0d748.js";import{g as Tn,u as Tr,r as Cr,b as Lr,c as Mr,j as ts,G as Gt,a as _e,f as ns,E as re,h as te,F as Re,k as ls,l as rs,n as ss,A as os,L as is,M as as}from"./MapLibreMap-374aa7f1.js";import{P as fe,A as Ir,s as fs}from"./storage-a13daf64.js";function us(s){let e;return{c(){e=S("span"),A(e,"class","svelte-kzgqtg"),oe(e,"background",s[0])},m(l,t){d(l,e,t)},p(l,[t]){t&1&&oe(e,"background",l[0])},i:Q,o:Q,d(l){l&&h(e)}}}function cs(s,e,l){let{color:t}=e;return s.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Se extends Z{constructor(e){super(),X(this,e,cs,us,J,{color:0})}}const ps="/atip/manage_files/assets/help-d011708a.svg";function $s(s){let e,l;const t=s[1].default,n=rt(t,s,s[4],null);return{c(){e=S("div"),n&&n.c(),A(e,"class","govuk-prose")},m(r,o){d(r,e,o),n&&n.m(e,null),l=!0},p(r,o){n&&n.p&&(!l||o&16)&&st(n,t,r,r[4],l?it(t,r[4],o,null):ot(r[4]),null)},i(r){l||(m(n,r),l=!0)},o(r){g(n,r),l=!1},d(r){r&&h(e),n&&n.d(r)}}}function ms(s){let e,l,t,n,r,o,f;function i(u){s[3](u)}let a={title:"Help",$$slots:{default:[$s]},$$scope:{ctx:s}};return s[0]!==void 0&&(a.open=s[0]),t=new wr({props:a}),H.push(()=>E(t,"open",i)),{c(){e=S("button"),e.innerHTML=`<img src="${ps}" title="Help" alt="Help"/>`,l=L(),b(t.$$.fragment),A(e,"class","svelte-7d9d1l")},m(u,c){d(u,e,c),d(u,l,c),w(t,u,c),r=!0,o||(f=lt(e,"click",s[2]),o=!0)},p(u,[c]){const $={};c&16&&($.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,$.open=u[0],B(()=>n=!1)),t.$set($)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){g(t.$$.fragment,u),r=!1},d(u){u&&(h(e),h(l)),v(t,u),o=!1,f()}}}function _s(s,e,l){let{$$slots:t={},$$scope:n}=e,r=!1;const o=()=>l(0,r=!0);function f(i){r=i,l(0,r)}return s.$$set=i=>{"$$scope"in i&&l(4,n=i.$$scope)},[r,t,o,f,n]}class gs extends Z{constructor(e){super(),X(this,e,_s,ms,J,{})}}const ds=s=>({}),Vn=s=>({}),hs=s=>({}),Qn=s=>({});function bs(s){let e,l,t,n,r,o,f,i,a,u,c;const $=s[4].sidebar,_=rt($,s,s[3],Qn),k=s[4].main,C=rt(k,s,s[3],Vn);return{c(){e=S("div"),l=S("aside"),t=S("div"),_&&_.c(),n=L(),r=S("button"),r.textContent="→",f=L(),i=S("main"),C&&C.c(),A(t,"class","sidebar-content content-container svelte-1n0etgd"),A(r,"type","button"),A(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),A(l,"class",o=qn(s[1]?"":"collapsed")+" svelte-1n0etgd"),oe(l,"--sidebarWidth",s[0]),A(i,"class","svelte-1n0etgd"),A(e,"class","overall-layout svelte-1n0etgd")},m(T,N){d(T,e,N),p(e,l),p(l,t),_&&_.m(t,null),p(l,n),p(l,r),p(e,f),p(e,i),C&&C.m(i,null),a=!0,u||(c=lt(r,"click",s[2]),u=!0)},p(T,[N]){_&&_.p&&(!a||N&8)&&st(_,$,T,T[3],a?it($,T[3],N,hs):ot(T[3]),Qn),(!a||N&2&&o!==(o=qn(T[1]?"":"collapsed")+" svelte-1n0etgd"))&&A(l,"class",o),(!a||N&1)&&oe(l,"--sidebarWidth",T[0]),C&&C.p&&(!a||N&8)&&st(C,k,T,T[3],a?it(k,T[3],N,ds):ot(T[3]),Vn)},i(T){a||(m(_,T),m(C,T),a=!0)},o(T){g(_,T),g(C,T),a=!1},d(T){T&&h(e),_&&_.d(T),C&&C.d(T),u=!1,c()}}}function ws(s,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,o=!0;function f(){l(1,o=!o)}return s.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,o,f,n,t]}class vs extends Z{constructor(e){super(),X(this,e,ws,bs,J,{sidebarWidth:0})}}function Kn(s,e,l){const t=s.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Zn(s){let e,l,t,n=s[1]+"",r,o,f;return l=new Se({props:{color:s[2]}}),{c(){e=S("li"),b(l.$$.fragment),t=L(),r=y(n),o=L()},m(i,a){d(i,e,a),w(l,e,null),p(e,t),p(e,r),p(e,o),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&G(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){g(l.$$.fragment,i),f=!1},d(i){i&&h(e),v(l)}}}function ks(s){let e,l,t=he(s[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Zn(Kn(s,t,o));const r=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){e=S("ul");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,f){d(o,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(o,[f]){if(f&1){t=he(o[0]);let i;for(i=0;i<t.length;i+=1){const a=Kn(o,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Zn(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(o){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(o){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(o){o&&h(e),Qe(n,o)}}}function ys(s,e,l){let{rows:t}=e;return s.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Xt extends Z{constructor(e){super(),X(this,e,ys,ks,J,{rows:0})}}function Xn(s){let e=s[0],l,t,n=xn(s);return{c(){n.c(),l=ve()},m(r,o){n.m(r,o),d(r,l,o),t=!0},p(r,o){o&1&&J(e,e=r[0])?(be(),g(n,1,1,Q),we(),n=xn(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,o)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function xn(s){let e;const l=s[16].default,t=rt(l,s,s[15],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&32768)&&st(t,l,n,n[15],e?it(l,n[15],r,null):ot(n[15]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Ss(s){let e,l,t=s[0]&&Xn(s);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=Xn(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Ts(s,e,l){let t,n,{$$slots:r={},$$scope:o}=e,{id:f=Tn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:$=null}=e,{minzoom:_=null}=e,{maxzoom:k=null}=e,{volatile:C=null}=e;const{map:T,self:N}=Tr();Y(s,T,M=>l(14,n=M)),Y(s,N,M=>l(0,t=M));let F,j=!0;return kn(()=>{t&&F&&n&&(Cr(T,t,F),Ut(N,t=null,t),l(12,F=void 0))}),s.$$set=M=>{"id"in M&&l(3,f=M.id),"tiles"in M&&l(4,i=M.tiles),"tileSize"in M&&l(5,a=M.tileSize),"bounds"in M&&l(6,u=M.bounds),"scheme"in M&&l(7,c=M.scheme),"attribution"in M&&l(8,$=M.attribution),"minzoom"in M&&l(9,_=M.minzoom),"maxzoom"in M&&l(10,k=M.maxzoom),"volatile"in M&&l(11,C=M.volatile),"$$scope"in M&&l(15,o=M.$$scope)},s.$$.update=()=>{s.$$.dirty&24569&&n&&t!==f&&(Ut(N,t=f,t),Lr(n,t,Mr({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:$,minzoom:_,maxzoom:k,volatile:C}),M=>n&&M===t,()=>{t&&(l(12,F=n==null?void 0:n.getSource(t)),l(13,j=!0))})),s.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,F=n==null?void 0:n.getSource(f))})),s.$$.dirty&12304&&F&&(j?l(13,j=!1):F.setTiles(i))},[t,T,N,f,i,a,u,c,$,_,k,C,F,j,n,o,r]}class Cs extends Z{constructor(e){super(),X(this,e,Ts,Ss,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function Ls(s){let e;const l=s[16].default,t=rt(l,s,s[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&st(t,l,n,n[24],e?it(l,n[24],r,null):ot(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Ms(s){let e,l,t;function n(o){s[17](o)}let r={id:s[1],type:"symbol",source:s[2],sourceLayer:s[3],beforeId:s[4],beforeLayerType:s[5],paint:s[6],layout:s[7],filter:s[8],applyToClusters:s[9],minzoom:s[10],maxzoom:s[11],hoverCursor:s[12],manageHoverState:s[13],eventsIfTopMost:s[14],interactive:s[15],$$slots:{default:[Ls]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.hovered=s[0]),e=new ts({props:r}),H.push(()=>E(e,"hovered",n)),e.$on("click",s[18]),e.$on("dblclick",s[19]),e.$on("contextmenu",s[20]),e.$on("mouseenter",s[21]),e.$on("mousemove",s[22]),e.$on("mouseleave",s[23]),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,[f]){const i={};f&2&&(i.id=o[1]),f&4&&(i.source=o[2]),f&8&&(i.sourceLayer=o[3]),f&16&&(i.beforeId=o[4]),f&32&&(i.beforeLayerType=o[5]),f&64&&(i.paint=o[6]),f&128&&(i.layout=o[7]),f&256&&(i.filter=o[8]),f&512&&(i.applyToClusters=o[9]),f&1024&&(i.minzoom=o[10]),f&2048&&(i.maxzoom=o[11]),f&4096&&(i.hoverCursor=o[12]),f&8192&&(i.manageHoverState=o[13]),f&16384&&(i.eventsIfTopMost=o[14]),f&32768&&(i.interactive=o[15]),f&16777216&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.hovered=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function Is(s,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=Tn("symbol")}=e,{source:o=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:$=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:N=!1}=e,{hovered:F=null}=e,{eventsIfTopMost:j=!1}=e,{interactive:M=!0}=e;function O(D){F=D,l(0,F)}function I(D){Bt.call(this,s,D)}function R(D){Bt.call(this,s,D)}function P(D){Bt.call(this,s,D)}function q(D){Bt.call(this,s,D)}function K(D){Bt.call(this,s,D)}function ae(D){Bt.call(this,s,D)}return s.$$set=D=>{"id"in D&&l(1,r=D.id),"source"in D&&l(2,o=D.source),"sourceLayer"in D&&l(3,f=D.sourceLayer),"beforeId"in D&&l(4,i=D.beforeId),"beforeLayerType"in D&&l(5,a=D.beforeLayerType),"paint"in D&&l(6,u=D.paint),"layout"in D&&l(7,c=D.layout),"filter"in D&&l(8,$=D.filter),"applyToClusters"in D&&l(9,_=D.applyToClusters),"minzoom"in D&&l(10,k=D.minzoom),"maxzoom"in D&&l(11,C=D.maxzoom),"hoverCursor"in D&&l(12,T=D.hoverCursor),"manageHoverState"in D&&l(13,N=D.manageHoverState),"hovered"in D&&l(0,F=D.hovered),"eventsIfTopMost"in D&&l(14,j=D.eventsIfTopMost),"interactive"in D&&l(15,M=D.interactive),"$$scope"in D&&l(24,n=D.$$scope)},[F,r,o,f,i,a,u,c,$,_,k,C,T,N,j,M,t,O,I,R,P,q,K,ae,n]}class Cn extends Z{constructor(e){super(),X(this,e,Is,Ms,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function el(s){let e=s[0],l,t,n=tl(s);return{c(){n.c(),l=ve()},m(r,o){n.m(r,o),d(r,l,o),t=!0},p(r,o){o&1&&J(e,e=r[0])?(be(),g(n,1,1,Q),we(),n=tl(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,o)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function tl(s){let e;const l=s[15].default,t=rt(l,s,s[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&st(t,l,n,n[14],e?it(l,n[14],r,null):ot(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Os(s){let e,l,t=s[0]&&el(s);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=el(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Ns(s,e,l){let t,n,{$$slots:r={},$$scope:o}=e,{id:f=Tn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:$=null}=e,{attribution:_=null}=e,{minzoom:k=null}=e,{maxzoom:C=null}=e,{volatile:T=null}=e;if(i&&i.includes("pmtiles://")&&!Hn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let M=new Fr;Hn.addProtocol("pmtiles",M.tile)}const{map:N,self:F}=Tr();Y(s,N,M=>l(13,n=M)),Y(s,F,M=>l(0,t=M));let j;return kn(()=>{t&&n&&(Cr(N,t,j),Ut(F,t=null,t),j=void 0)}),s.$$set=M=>{"id"in M&&l(3,f=M.id),"url"in M&&l(4,i=M.url),"tiles"in M&&l(5,a=M.tiles),"promoteId"in M&&l(6,u=M.promoteId),"bounds"in M&&l(7,c=M.bounds),"scheme"in M&&l(8,$=M.scheme),"attribution"in M&&l(9,_=M.attribution),"minzoom"in M&&l(10,k=M.minzoom),"maxzoom"in M&&l(11,C=M.maxzoom),"volatile"in M&&l(12,T=M.volatile),"$$scope"in M&&l(14,o=M.$$scope)},s.$$.update=()=>{s.$$.dirty&16377&&n&&t!==f&&(Ut(F,t=f,t),Lr(n,t,Mr({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:$,attribution:_,minzoom:k,maxzoom:C,volatile:T}),M=>n&&M===t,()=>{t&&(j=n==null?void 0:n.getSource(t))})),s.$$.dirty&8200&&(n==null||n.on("style.load",()=>{j=n==null?void 0:n.getSource(f)}))},[t,N,F,f,i,a,u,c,$,_,k,C,T,n,o,r]}class pe extends Z{constructor(e){super(),X(this,e,Ns,Os,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function nl(s,e,l){const t=s.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function js(s){let e,l,t;return l=new Ke({props:{$$slots:{default:[Rs]},$$scope:{ctx:s}}}),l.$on("click",s[9]),{c(){e=S("div"),b(l.$$.fragment)},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const o={};r&16384&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ps(s){let e,l,t,n,r,o,f,i,a,u;l=new Ke({props:{$$slots:{default:[Ds]},$$scope:{ctx:s}}}),l.$on("click",s[4]);let c=s[2]&&ll(s);r=new tt({props:{label:"Help",$$slots:{default:[Fs]},$$scope:{ctx:s}}}),f=new ns({}),f.$on("click",s[3]);let $=he(s[0]),_=[];for(let C=0;C<$.length;C+=1)_[C]=rl(nl(s,$,C));const k=C=>g(_[C],1,1,()=>{_[C]=null});return{c(){e=S("div"),b(l.$$.fragment),t=L(),c&&c.c(),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L();for(let C=0;C<_.length;C+=1)_[C].c();a=ve()},m(C,T){d(C,e,T),w(l,e,null),d(C,t,T),c&&c.m(C,T),d(C,n,T),w(r,C,T),d(C,o,T),w(f,C,T),d(C,i,T);for(let N=0;N<_.length;N+=1)_[N]&&_[N].m(C,T);d(C,a,T),u=!0},p(C,T){const N={};T&16384&&(N.$$scope={dirty:T,ctx:C}),l.$set(N),C[2]?c?c.p(C,T):(c=ll(C),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const F={};if(T&16384&&(F.$$scope={dirty:T,ctx:C}),r.$set(F),T&65){$=he(C[0]);let j;for(j=0;j<$.length;j+=1){const M=nl(C,$,j);_[j]?(_[j].p(M,T),m(_[j],1)):(_[j]=rl(M),_[j].c(),m(_[j],1),_[j].m(a.parentNode,a))}for(be(),j=$.length;j<_.length;j+=1)k(j);we()}},i(C){if(!u){m(l.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C);for(let T=0;T<$.length;T+=1)m(_[T]);u=!0}},o(C){g(l.$$.fragment,C),g(r.$$.fragment,C),g(f.$$.fragment,C),_=_.filter(Boolean);for(let T=0;T<_.length;T+=1)g(_[T]);u=!1},d(C){C&&(h(e),h(t),h(n),h(o),h(i),h(a)),v(l),c&&c.d(C),v(r,C),v(f,C),Qe(_,C)}}}function Rs(s){let e;return{c(){e=y("Measure lines")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ds(s){let e;return{c(){e=y("Stop measuring")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ll(s){let e,l,t=s[2].toFixed(2)+"",n,r;return{c(){e=S("p"),l=y("Length: "),n=y(t),r=y(" meters")},m(o,f){d(o,e,f),p(e,l),p(e,n),p(e,r)},p(o,f){f&4&&t!==(t=o[2].toFixed(2)+"")&&G(n,t)},d(o){o&&h(e)}}}function Fs(s){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function As(s){let e,l;return{c(){e=S("span"),l=L(),A(e,"class","dot svelte-1tzt432")},m(t,n){d(t,e,n),d(t,l,n)},p:Q,d(t){t&&(h(e),h(l))}}}function rl(s){let e,l,t;function n(f){s[7](f,s[11],s[12],s[13])}function r(){return s[8](s[13])}let o={draggable:!0,$$slots:{default:[As]},$$scope:{ctx:s}};return s[11]!==void 0&&(o.lngLat=s[11]),e=new Jr({props:o}),H.push(()=>E(e,"lngLat",n)),e.$on("click",r),{c(){b(e.$$.fragment)},m(f,i){w(e,f,i),t=!0},p(f,i){s=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:s}),!l&&i&1&&(l=!0,a.lngLat=s[11],B(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){g(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function Gs(s){let e,l;const t=[z("measurement-line"),{paint:{"line-color":Ve.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function zs(s){let e,l,t,n,r,o,f;const i=[Ps,js],a=[];function u(c,$){return c[1]?0:1}return e=u(s),l=a[e]=i[e](s),n=new Gt({props:{data:s[0].length<2?Wn():$n(s[0]),$$slots:{default:[Gs]},$$scope:{ctx:s}}}),{c(){l.c(),t=L(),b(n.$$.fragment)},m(c,$){a[e].m(c,$),d(c,t,$),w(n,c,$),r=!0,o||(f=lt(window,"keydown",s[5]),o=!0)},p(c,[$]){let _=e;e=u(c),e===_?a[e].p(c,$):(be(),g(a[_],1,1,()=>{a[_]=null}),we(),l=a[e],l?l.p(c,$):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const k={};$&1&&(k.data=c[0].length<2?Wn():$n(c[0])),$&16384&&(k.$$scope={dirty:$,ctx:c}),n.$set(k)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){g(l),g(n.$$.fragment,c),r=!1},d(c){c&&h(t),a[e].d(c),v(n,c),o=!1,f()}}}function qs(s,e,l){let t,n=!1,r=[];function o(k){return k.length<2?null:1e3*Ur($n(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),l(0,r)}function c(k,C,T,N){T[N]=k,l(0,r)}const $=k=>u(k),_=()=>l(1,n=!0);return s.$$.update=()=>{s.$$.dirty&1&&l(2,t=o(r))},[r,n,t,f,i,a,u,c,$,_]}class Hs extends Z{constructor(e){super(),X(this,e,qs,zs,J,{})}}const ee={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Pe=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Es(s){let e;return{c(){e=y(`Open Government License
  `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bs(s){let e,l,t,n,r;return t=new re({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Es]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("License: "),b(t.$$.fragment),n=y(`. Contains OS data © Crown copyright and database right
  2023.`)},m(o,f){d(o,e,f),p(e,l),w(t,e,null),p(e,n),r=!0},p(o,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:o}),t.$set(i)},i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){g(t.$$.fragment,o),r=!1},d(o){o&&h(e),v(t)}}}class Te extends Z{constructor(e){super(),X(this,e,null,Bs,J,{})}}function sl(s,e,l){const t=s.slice();return t[2]=e[l],t}function ol(s,e,l){const t=s.slice();return t[5]=e[l],t}function il(s){let e,l;return{c(){e=S("span"),l=y(` 
    `),oe(e,"background",s[5]),oe(e,"width","100%"),oe(e,"border","1px solid black")},m(t,n){d(t,e,n),p(e,l)},p(t,n){n&1&&oe(e,"background",t[5])},d(t){t&&h(e)}}}function al(s){let e,l=s[2]+"",t;return{c(){e=S("span"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&G(t,l)},d(n){n&&h(e)}}}function Us(s){let e,l,t,n=he(s[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=il(ol(s,n,i));let o=he(s[1]),f=[];for(let i=0;i<o.length;i+=1)f[i]=al(sl(s,o,i));return{c(){e=S("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=S("div");for(let i=0;i<f.length;i+=1)f[i].c();oe(e,"display","flex"),oe(t,"display","flex"),oe(t,"justify-content","space-between")},m(i,a){d(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);d(i,l,a),d(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=he(i[0]);let u;for(u=0;u<n.length;u+=1){const c=ol(i,n,u);r[u]?r[u].p(c,a):(r[u]=il(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){o=he(i[1]);let u;for(u=0;u<o.length;u+=1){const c=sl(i,o,u);f[u]?f[u].p(c,a):(f[u]=al(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=o.length}},i:Q,o:Q,d(i){i&&(h(e),h(l),h(t)),Qe(r,i),Qe(f,i)}}}function Ws(s,e,l){let{colorScale:t}=e,{limits:n}=e;return s.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Fe extends Z{constructor(e){super(),X(this,e,Ws,Us,J,{colorScale:0,limits:1})}}function $e(s){let e=new URLSearchParams(window.location.search).has(s),l=Ne(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(s,"1"):n.searchParams.delete(s),window.history.replaceState(null,"",n.toString())}),l}function zt(s,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(s);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${s}=${r} failed, using default value: ${f}`)}let o=Ne(n);return o.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(s):i.searchParams.set(s,a),window.history.replaceState(null,"",i.toString())}),o}let gn=Ne(new Map),Vt=Ne(new Set);const Ys=s=>({}),fl=s=>({}),Js=s=>({}),ul=s=>({}),Vs=s=>({}),cl=s=>({});function Qs(s){let e;return{c(){e=y(s[2])},m(l,t){d(l,e,t)},p(l,t){t&4&&G(e,l[2])},d(l){l&&h(e)}}}function Ks(s){let e,l,t;const n=s[7].icon,r=rt(n,s,s[10],cl);return{c(){r&&r.c(),e=L(),l=y(s[2])},m(o,f){r&&r.m(o,f),d(o,e,f),d(o,l,f),t=!0},p(o,f){r&&r.p&&(!t||f&1024)&&st(r,n,o,o[10],t?it(n,o[10],f,Vs):ot(o[10]),cl),(!t||f&4)&&G(l,o[2])},i(o){t||(m(r,o),t=!0)},o(o){g(r,o),t=!1},d(o){o&&(h(e),h(l)),r&&r.d(o)}}}function Zs(s){let e;const l=s[7].help,t=rt(l,s,s[10],ul);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&st(t,l,n,n[10],e?it(l,n[10],r,Js):ot(n[10]),ul)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Xs(s){let e;return{c(){e=y("X")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xs(s){let e,l,t,n,r,o,f,i,a;function u($){s[8]($)}let c={$$slots:{default:[Ks]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.checked=s[0]),l=new Ye({props:c}),H.push(()=>E(l,"checked",u)),o=new gs({props:{$$slots:{default:[Zs]},$$scope:{ctx:s}}}),i=new Ke({props:{$$slots:{default:[Xs]},$$scope:{ctx:s}}}),i.$on("click",s[6]),{c(){e=S("div"),b(l.$$.fragment),n=L(),r=S("span"),b(o.$$.fragment),f=L(),b(i.$$.fragment),oe(e,"display","flex"),oe(e,"justify-content","space-between")},m($,_){d($,e,_),w(l,e,null),p(e,n),p(e,r),w(o,r,null),p(r,f),w(i,r,null),a=!0},p($,_){const k={};_&1028&&(k.$$scope={dirty:_,ctx:$}),!t&&_&1&&(t=!0,k.checked=$[0],B(()=>t=!1)),l.$set(k);const C={};_&1024&&(C.$$scope={dirty:_,ctx:$}),o.$set(C);const T={};_&1024&&(T.$$scope={dirty:_,ctx:$}),i.$set(T)},i($){a||(m(l.$$.fragment,$),m(o.$$.fragment,$),m(i.$$.fragment,$),a=!0)},o($){g(l.$$.fragment,$),g(o.$$.fragment,$),g(i.$$.fragment,$),a=!1},d($){$&&h(e),v(l),v(o),v(i)}}}function pl(s){let e;const l=s[7].controls,t=rt(l,s,s[10],fl);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&st(t,l,n,n[10],e?it(l,n[10],r,Ys):ot(n[10]),fl)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function eo(s){let e,l,t,n,r,o;e=new Ye({props:{checked:s[4].has(s[1]),$$slots:{default:[Qs]},$$scope:{ctx:s}}}),e.$on("change",s[5]),n=new De({props:{small:!0,$$slots:{default:[xs]},$$scope:{ctx:s}}});let f=s[0]&&pl(s);return{c(){b(e.$$.fragment),l=L(),t=S("div"),b(n.$$.fragment),r=L(),f&&f.c()},m(i,a){w(e,i,a),d(i,l,a),d(i,t,a),w(n,t,null),p(t,r),f&&f.m(t,null),s[9](t),o=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=pl(i),f.c(),m(f,1),f.m(t,null)):f&&(be(),g(f,1,1,()=>{f=null}),we())},i(i){o||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),o=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),g(f),o=!1},d(i){i&&(h(l),h(t)),v(e,i),v(n),f&&f.d(),s[9](null)}}}function to(s,e,l){let t;Y(s,Vt,k=>l(4,t=k));let{$$slots:n={},$$scope:r}=e,{name:o}=e,{title:f}=e,{show:i}=e;i&&(t.add(o),Vt.set(t));let a=null;kn(()=>{gn.update(k=>(k.delete(o),k))});function u(){Vt.update(k=>(k.has(o)?(k.delete(o),l(0,i=!1)):(k.add(o),l(0,i=!0)),k))}function c(){t.delete(o),Vt.set(t),l(0,i=!1)}function $(k){i=k,l(0,i)}function _(k){H[k?"unshift":"push"](()=>{a=k,l(3,a),l(1,o)})}return s.$$set=k=>{"name"in k&&l(1,o=k.name),"title"in k&&l(2,f=k.title),"show"in k&&l(0,i=k.show),"$$scope"in k&&l(10,r=k.$$scope)},s.$$.update=()=>{s.$$.dirty&10&&a&&gn.update(k=>(l(3,a.style.display="none",a),k.set(o,a),k))},[i,o,f,a,t,u,c,n,$,_,r]}class ue extends Z{constructor(e){super(),X(this,e,to,eo,J,{name:1,title:2,show:0})}}function $l(s){const e=s[7].OA21CD;s[8]=e;const l=s[7][s[0].kind];s[9]=l}function no(s){let e,l,t,n,r,o,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[so]},$$scope:{ctx:s}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[oo]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("Population density data is from the 2021 census, via "),b(t.$$.fragment),n=y(". Output area boundaries from "),b(r.$$.fragment),o=y(".")},m(i,a){d(i,e,a),p(e,l),w(t,e,null),p(e,n),w(r,e,null),p(e,o),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function lo(s){let e,l,t,n,r,o,f,i,a;return r=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[io]},$$scope:{ctx:s}}}),f=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ao]},$$scope:{ctx:s}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=S("p"),n=y("Car/van availability data is from the 2021 census, via "),b(r.$$.fragment),o=y(". Output area boundaries from "),b(f.$$.fragment),i=y(".")},m(u,c){d(u,e,c),d(u,l,c),d(u,t,c),p(t,n),w(r,t,null),p(t,o),w(f,t,null),p(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){g(r.$$.fragment,u),g(f.$$.fragment,u),a=!1},d(u){u&&(h(e),h(l),h(t)),v(r),v(f)}}}function ro(s){let e,l,t,n,r,o,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[fo]},$$scope:{ctx:s}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[uo]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),n=y(". Output area boundaries from "),b(r.$$.fragment),o=y(".")},m(i,a){d(i,e,a),p(e,l),w(t,e,null),p(e,n),w(r,e,null),p(e,o),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function so(s){let e;return{c(){e=y(`NOMIS TS006
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function oo(s){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function io(s){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ao(s){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fo(s){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function uo(s){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function co(s){let e,l,t,n,r,o;const f=[ro,lo,no],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(s),t=i[l]=f[l](s),r=new Te({}),{c(){e=S("span"),t.c(),n=L(),b(r.$$.fragment),A(e,"slot","help")},m(u,c){d(u,e,c),i[l].m(e,null),p(e,n),w(r,e,null),o=!0},p(u,c){let $=l;l=a(u),l!==$&&(be(),g(i[$],1,1,()=>{i[$]=null}),we(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){o||(m(t),m(r.$$.fragment,u),o=!0)},o(u){g(t),g(r.$$.fragment,u),o=!1},d(u){u&&h(e),i[l].d(),v(r)}}}function po(s){let e,l,t,n;return t=new Fe({props:{colorScale:s[1],limits:pt(s[0].kind).map(ml)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",l=L(),b(t.$$.fragment)},m(r,o){d(r,e,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&1&&(f.limits=pt(r[0].kind).map(ml)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&(h(e),h(l)),v(t,r)}}}function $o(s){let e,l;return e=new Fe({props:{colorScale:s[1],limits:pt(s[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=pt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function mo(s){let e,l;return e=new Fe({props:{colorScale:s[1],limits:pt(s[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=pt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function _o(s){let e,l,t,n,r,o,f;function i(_){s[4](_)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};s[0].kind!==void 0&&(a.value=s[0].kind),l=new yn({props:a}),H.push(()=>E(l,"value",i));const u=[mo,$o,po],c=[];function $(_,k){return _[0].kind=="percent_households_with_car"?0:_[0].kind=="average_cars_per_household"?1:_[0].kind=="population_density"?2:-1}return~(r=$(s))&&(o=c[r]=u[r](s)),{c(){e=S("div"),b(l.$$.fragment),n=L(),o&&o.c(),A(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(_,k){d(_,e,k),w(l,e,null),p(e,n),~r&&c[r].m(e,null),f=!0},p(_,k){const C={};!t&&k&1&&(t=!0,C.value=_[0].kind,B(()=>t=!1)),l.$set(C);let T=r;r=$(_),r===T?~r&&c[r].p(_,k):(o&&(be(),g(c[T],1,1,()=>{c[T]=null}),we()),~r?(o=c[r],o?o.p(_,k):(o=c[r]=u[r](_),o.c()),m(o,1),o.m(e,null)):o=null)},i(_){f||(m(l.$$.fragment,_),m(o),f=!0)},o(_){g(l.$$.fragment,_),g(o),f=!1},d(_){_&&h(e),v(l),~r&&c[r].d()}}}function go(s){let e,l,t,n=s[9].toLocaleString()+"",r,o,f=s[8]+"",i;return{c(){e=S("p"),l=y("There are "),t=S("b"),r=y(n),o=y(`
          people per square kilometre in `),i=y(f)},m(a,u){d(a,e,u),p(e,l),p(e,t),p(t,r),p(e,o),p(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&G(r,n),u&128&&f!==(f=a[8]+"")&&G(i,f)},d(a){a&&h(e)}}}function ho(s){let e,l,t=s[8]+"",n,r,o,f=s[9]+"",i,a;return{c(){e=S("p"),l=y("Households in "),n=y(t),r=y(` have an average of
          `),o=S("b"),i=y(f),a=y(`
          cars`)},m(u,c){d(u,e,c),p(e,l),p(e,n),p(e,r),p(e,o),p(o,i),p(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&G(n,t),c&129&&f!==(f=u[9]+"")&&G(i,f)},d(u){u&&h(e)}}}function bo(s){let e,l,t=s[9]+"",n,r,o,f=s[8]+"",i,a;return{c(){e=S("p"),l=S("b"),n=y(t),r=y("%"),o=y(`
          of households in `),i=y(f),a=y(" have 1 or more cars")},m(u,c){d(u,e,c),p(e,l),p(l,n),p(l,r),p(e,o),p(e,i),p(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&G(n,t),c&128&&f!==(f=u[8]+"")&&G(i,f)},d(u){u&&h(e)}}}function wo(s){$l(s);let e;function l(r,o){return r[0].kind=="percent_households_with_car"?bo:r[0].kind=="average_cars_per_household"?ho:go}let t=l(s),n=t(s);return{c(){n.c(),e=ve()},m(r,o){n.m(r,o),d(r,e,o)},p(r,o){$l(r),t===(t=l(r))&&n?n.p(r,o):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function vo(s){let e,l;return e=new fe({props:{$$slots:{default:[wo,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ko(s){let e,l,t,n;const r=[z(qe),{sourceLayer:qe},{paint:{"fill-color":me(["get",s[0].kind],pt(s[0].kind),s[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:s[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[vo]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o}),e.$on("click",s[3]);const f=[z(`${qe}-outline`),{sourceLayer:qe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:s[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&se(z(qe)),u&0&&{sourceLayer:qe},u&3&&{paint:{"fill-color":me(["get",a[0].kind],pt(a[0].kind),a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?le(f,[u&0&&se(z(`${qe}-outline`)),u&0&&{sourceLayer:qe},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function yo(s){let e,l,t,n,r;function o(i){s[5](i)}let f={name:qe,title:"2021 census",$$slots:{controls:[_o],help:[co]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${qe}.pmtiles`,$$slots:{default:[ko]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let qe="census_output_areas";function So(s){return s.show?s.kind:null}function To(s){return{show:!0,kind:s}}function pt(s){return s=="percent_households_with_car"?[0,20,40,60,80,100]:s=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const ml=s=>s.toLocaleString();function Co(s,e,l){let t,n=ee.sequential_low_to_high,o=zt(qe,{show:!1,kind:"percent_households_with_car"},So,To);Y(s,o,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){s.$$.not_equal(t.kind,u)&&(t.kind=u,o.set(t))}function a(u){s.$$.not_equal(t.show,u)&&(t.show=u,o.set(t))}return[t,n,o,f,i,a]}class Lo extends Z{constructor(e){super(),X(this,e,Co,yo,J,{})}}function Mo(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Io(s){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Oo(s){let e,l,t,n,r,o,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[Io]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2024."),o=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function No(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function jo(s){let e,l;return e=new fe({props:{$$slots:{default:[No,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Po(s){let e,l,t,n;const r=[z(_t),{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[jo]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o}),e.$on("click",Fo);const f=[z(`${_t}-outline`),{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&se(z(_t)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&se(z(`${_t}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ro(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:_t,title:Do,$$slots:{help:[Oo],icon:[Mo]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new Gt({props:{data:`${ce()}/v1/${_t}.geojson`,$$slots:{default:[Po]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let _t="combined_authorities",Do="Combined authorities";function Fo(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.features[0].properties.CAUTH24CD}`,"_blank")}function Ao(s,e,l){let t,n=ee.combined_authorities,r=$e(_t);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class Go extends Z{constructor(e){super(),X(this,e,Ao,Ro,J,{})}}function zo(s){let e;return{c(){e=y(`DLUCH GIS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function qo(s){let e;return{c(){e=y(`here
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ho(s){let e,l,t,n,r,o,f,i,a,u;return n=new re({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[zo]},$$scope:{ctx:s}}}),o=new re({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[qo]},$$scope:{ctx:s}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("The 2019 English IMD scores come from "),b(n.$$.fragment),r=y(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),f=y("."),i=L(),b(a.$$.fragment),A(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),w(n,l,null),p(l,r),w(o,l,null),p(l,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&64&&(_.$$scope={dirty:$,ctx:c}),n.$set(_);const k={};$&64&&(k.$$scope={dirty:$,ctx:c}),o.$set(k)},i(c){u||(m(n.$$.fragment,c),m(o.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(o),v(a)}}}function Eo(s){let e,l,t;return l=new Fe({props:{colorScale:s[1],limits:["Least deprived","Most deprived"]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Bo(s){let e,l=s[5].LSOA11CD+"",t,n,r,o=s[5].score+"",f,i,a,u,c,$=s[5].rank.toLocaleString()+"",_,k;return{c(){e=S("p"),t=y(l),n=y(` has an IMD score of
        `),r=S("b"),f=y(o),i=L(),a=S("p"),u=y("Rank: "),c=S("b"),_=y($),k=y(`
        / 32,844 LSOAs`)},m(C,T){d(C,e,T),p(e,t),p(e,n),p(e,r),p(r,f),d(C,i,T),d(C,a,T),p(a,u),p(a,c),p(c,_),p(a,k)},p(C,T){T&32&&l!==(l=C[5].LSOA11CD+"")&&G(t,l),T&32&&o!==(o=C[5].score+"")&&G(f,o),T&32&&$!==($=C[5].rank.toLocaleString()+"")&&G(_,$)},d(C){C&&(h(e),h(i),h(a))}}}function Uo(s){let e,l;return e=new fe({props:{$$slots:{default:[Bo,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Wo(s){let e,l,t,n;const r=[z(He),{sourceLayer:He},{paint:{"fill-color":me(["-",10,["get","decile"]],s[2],s[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[Uo]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o});const f=[z(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?le(r,[u&0&&se(z(He)),u&0&&{sourceLayer:He},u&6&&{paint:{"fill-color":me(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?le(f,[u&0&&se(z(`${He}-outline`)),u&0&&{sourceLayer:He},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Yo(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:He,title:Jo,$$slots:{controls:[Eo],help:[Ho]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${He}.pmtiles`,$$slots:{default:[Wo]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let He="imd",Jo="Indices of Multiple Deprivation";function Vo(s,e,l){let t,n=ee.sequential_low_to_high,r=[0,2,4,6,8,10],o=$e(He);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class Qo extends Z{constructor(e){super(),X(this,e,Vo,Yo,J,{})}}function Ko(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Zo(s){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Xo(s){let e,l,t,n,r,o,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[Zo]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2024."),o=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function xo(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function ei(s){let e,l;return e=new fe({props:{$$slots:{default:[xo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ti(s){let e,l,t,n;const r=[z(gt),{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[ei]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o}),e.$on("click",ri);const f=[z(`${gt}-outline`),{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&se(z(gt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&se(z(`${gt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function ni(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:gt,title:li,$$slots:{help:[Xo],icon:[Ko]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new Gt({props:{data:`${ce()}/v1/${gt}.geojson`,$$slots:{default:[ti]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let gt="local_authority_districts",li="Local Authority Districts";function ri(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.features[0].properties.LAD24CD}`,"_blank")}function si(s,e,l){let t,n=ee.local_authority_districts,r=$e(gt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class oi extends Z{constructor(e){super(),X(this,e,si,ni,J,{})}}function ii(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ai(s){let e;return{c(){e=y(`local authority
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fi(s){let e;return{c(){e=y(`national park authorit
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ui(s){let e;return{c(){e=y(`development corporation
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ci(s){let e;return{c(){e=y("this map")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function pi(s){let e;return{c(){e=y(`planning.data.gov.uk
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $i(s){let e,l,t,n,r,o,f,i,a,u,c,$,_,k,C,T,N,F,j,M,O,I,R;return n=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ai]},$$scope:{ctx:s}}}),o=new re({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[fi]},$$scope:{ctx:s}}}),i=new re({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ui]},$$scope:{ctx:s}}}),k=new re({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ci]},$$scope:{ctx:s}}}),j=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[pi]},$$scope:{ctx:s}}}),I=new Te({}),{c(){e=S("span"),l=S("p"),t=y("LPAs may be a "),b(n.$$.fragment),r=y(", "),b(o.$$.fragment),f=y("y, or "),b(i.$$.fragment),a=y("."),u=L(),c=S("p"),$=S("strong"),_=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),b(k.$$.fragment),C=y(" to get more details."),T=L(),N=S("p"),F=y("Data from ONS Geography via "),b(j.$$.fragment),M=y(", as of November 2022."),O=L(),b(I.$$.fragment),A(e,"slot","help")},m(P,q){d(P,e,q),p(e,l),p(l,t),w(n,l,null),p(l,r),w(o,l,null),p(l,f),w(i,l,null),p(l,a),p(e,u),p(e,c),p(c,$),p($,_),w(k,$,null),p($,C),p(e,T),p(e,N),p(N,F),w(j,N,null),p(N,M),p(e,O),w(I,e,null),R=!0},p(P,q){const K={};q&32&&(K.$$scope={dirty:q,ctx:P}),n.$set(K);const ae={};q&32&&(ae.$$scope={dirty:q,ctx:P}),o.$set(ae);const D={};q&32&&(D.$$scope={dirty:q,ctx:P}),i.$set(D);const x={};q&32&&(x.$$scope={dirty:q,ctx:P}),k.$set(x);const V={};q&32&&(V.$$scope={dirty:q,ctx:P}),j.$set(V)},i(P){R||(m(n.$$.fragment,P),m(o.$$.fragment,P),m(i.$$.fragment,P),m(k.$$.fragment,P),m(j.$$.fragment,P),m(I.$$.fragment,P),R=!0)},o(P){g(n.$$.fragment,P),g(o.$$.fragment,P),g(i.$$.fragment,P),g(k.$$.fragment,P),g(j.$$.fragment,P),g(I.$$.fragment,P),R=!1},d(P){P&&h(e),v(n),v(o),v(i),v(k),v(j),v(I)}}}function mi(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function _i(s){let e,l;return e=new fe({props:{$$slots:{default:[mi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function gi(s){let e,l,t,n;const r=[z(Ee),{sourceLayer:Ee},{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[_i]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o});const f=[z(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&se(z(Ee)),u&0&&{sourceLayer:Ee},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&se(z(`${Ee}-outline`)),u&0&&{sourceLayer:Ee},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function di(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:Ee,title:hi,$$slots:{help:[$i],icon:[ii]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ee}.pmtiles`,$$slots:{default:[gi]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ee="local_planning_authorities",hi="Local Planning Authorities";function bi(s,e,l){let t,n=ee.local_planning_authorities,r=$e(Ee);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class wi extends Z{constructor(e){super(),X(this,e,bi,di,J,{})}}function vi(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ki(s){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function yi(s){let e,l,t,n,r,o,f,i;return n=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ki]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2023."),o=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Si(s){let e,l=s[4].Name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&G(t,l)},d(n){n&&h(e)}}}function Ti(s){let e,l;return e=new fe({props:{$$slots:{default:[Si,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ci(s){let e,l,t,n;const r=[z(Be),{sourceLayer:Be},{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Ti]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o}),e.$on("click",Ii);const f=[z(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":s[1],"line-width":5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&se(z(Be)),u&0&&{sourceLayer:Be},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&se(z(`${Be}-outline`)),u&0&&{sourceLayer:Be},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Li(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:Be,title:Mi,$$slots:{help:[yi],icon:[vi]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Be}.pmtiles`,$$slots:{default:[Ci]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Be="parliamentary_constituencies",Mi="Parliamentary constituencies";function Ii(s){let e=s.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Oi(s,e,l){let t,n=ee.parliamentary_constituencies,r=$e(Be);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class Ni extends Z{constructor(e){super(),X(this,e,Oi,Li,J,{})}}function ji(s){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Pi(s){let e,l,t,n,r,o,f,i,a,u;return n=new re({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[ji]},$$scope:{ctx:s}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Most layers show air quality data from "),b(n.$$.fragment),r=y(`. The measurements are annual means, in units of µgm
      `),o=S("sup"),o.textContent="3",f=y(`
      . Note the particulate matter layers are not corrected for natural sources.`),i=L(),b(a.$$.fragment),A(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),w(n,l,null),p(l,r),p(l,o),p(l,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&4096&&(_.$$scope={dirty:$,ctx:c}),n.$set(_)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function Ri(s){let e,l,t,n,r,o=s[3](s[0].pollutant)+"",f,i,a,u,c,$,_,k,C,T,N,F,j;function M(I){s[5](I)}let O={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return s[0].pollutant!==void 0&&(O.value=s[0].pollutant),l=new Ft({props:O}),H.push(()=>E(l,"value",M)),{c(){e=S("div"),b(l.$$.fragment),n=L(),r=S("p"),f=y(o),i=L(),a=S("div"),u=S("label"),c=y(`Opacity
        `),$=S("input"),_=L(),k=S("img"),A($,"type","range"),A($,"min","0"),A($,"max","100"),tn(k.src,C=s[4](s[0].pollutant))||A(k,"src",C),A(k,"width",150),A(k,"alt",T=`Legend for ${s[0].pollutant} layer`),A(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(I,R){d(I,e,R),w(l,e,null),p(e,n),p(e,r),p(r,f),p(e,i),p(e,a),p(a,u),p(u,c),p(u,$),Je($,s[0].opacity),p(e,_),p(e,k),N=!0,F||(j=[lt($,"change",s[6]),lt($,"input",s[6])],F=!0)},p(I,R){const P={};!t&&R&1&&(t=!0,P.value=I[0].pollutant,B(()=>t=!1)),l.$set(P),(!N||R&1)&&o!==(o=I[3](I[0].pollutant)+"")&&G(f,o),R&1&&Je($,I[0].opacity),(!N||R&1&&!tn(k.src,C=I[4](I[0].pollutant)))&&A(k,"src",C),(!N||R&1&&T!==(T=`Legend for ${I[0].pollutant} layer`))&&A(k,"alt",T)},i(I){N||(m(l.$$.fragment,I),N=!0)},o(I){g(l.$$.fragment,I),N=!1},d(I){I&&h(e),v(l),F=!1,vr(j)}}}function Di(s){let e,l;const t=[z(nn),{paint:{"raster-opacity":s[0].opacity/100}},{layout:{visibility:s[0].show?"visible":"none"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Vr({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?le(t,[o&0&&se(z(nn)),o&1&&{paint:{"raster-opacity":r[0].opacity/100}},o&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Fi(s){let e,l,t,n,r;function o(i){s[7](i)}let f={name:nn,title:Ai,$$slots:{controls:[Ri],help:[Pi]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new Cs({props:{tiles:[s[1]],tileSize:256,$$slots:{default:[Di]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2&&(c.tiles=[i[1]]),a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let nn="pollution",Ai="Pollution";function Gi(s){return s.show?`${s.pollutant}/${s.opacity}`:null}function zi(s){let[e,l]=s.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function qi(s,e,l){let t,n,r,f=zt(nn,{show:!1,pollutant:"PM25_viridis",opacity:50},Gi,zi);Y(s,f,C=>l(0,r=C));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(C){return t[1]}function u(C){let T=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${T}`}function c(C){let T=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${T}`}function $(C){s.$$.not_equal(r.pollutant,C)&&(r.pollutant=C,f.set(r))}function _(){r.opacity=Qt(this.value),f.set(r)}function k(C){s.$$.not_equal(r.show,C)&&(r.show=C,f.set(r))}return s.$$.update=()=>{s.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),s.$$.dirty&1&&l(1,n=u(r.pollutant))},[r,n,f,a,c,$,_,k]}class Hi extends Z{constructor(e){super(),X(this,e,qi,Fi,J,{})}}function Ei(s){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bi(s){let e,l,t,n,r,o,f,i,a,u;return o=new re({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Ei]},$$scope:{ctx:s}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=S("p"),r=y("Data from June 2019, produced by "),b(o.$$.fragment),f=y(". See there for methodology details"),i=L(),b(a.$$.fragment),A(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(e,t),p(e,n),p(n,r),w(o,n,null),p(n,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&32&&(_.$$scope={dirty:$,ctx:c}),o.$set(_)},i(c){u||(m(o.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(o.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(o),v(a)}}}function Ui(s){let e,l,t;return l=new Fe({props:{colorScale:s[1],limits:["55","65","75",">"]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Wi(s){let e,l=s[4].noiseclass+"",t,n,r=_l(s[4].noiseclass)+"",o,f;return{c(){e=S("p"),t=y(l),n=y(" dB ("),o=y(r),f=y(")")},m(i,a){d(i,e,a),p(e,t),p(e,n),p(e,o),p(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&G(t,l),a&16&&r!==(r=_l(i[4].noiseclass)+"")&&G(o,r)},d(i){i&&h(e)}}}function Yi(s){let e,l;return e=new fe({props:{$$slots:{default:[Wi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ji(s){let e,l;const t=[z(dt),{sourceLayer:dt},{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":s[1][0],"60.0-64.9":s[1][0],"65.0-69.9":s[1][1],"70.0-74.9":s[1][1],">=75.0":s[1][2]},"red"),"fill-opacity":te(.5,.8)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Yi]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&3?le(t,[o&0&&se(z(dt)),o&0&&{sourceLayer:dt},o&2&&{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":te(.5,.8)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Vi(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:dt,title:Qi,$$slots:{controls:[Ui],help:[Bi]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${dt}.pmtiles`,$$slots:{default:[Ji]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let dt="road_noise",Qi="Road noise";function _l(s){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[s]}function Ki(s,e,l){let t,n=[ee.sequential_low_to_high[0],ee.sequential_low_to_high[2],ee.sequential_low_to_high[4]],r=$e(dt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class Zi extends Z{constructor(e){super(),X(this,e,Ki,Vi,J,{})}}function Xi(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function xi(s){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ea(s){let e,l,t,n,r,o,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[xi]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2023."),o=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function ta(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function na(s){let e,l;return e=new fe({props:{$$slots:{default:[ta,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function la(s){let e,l,t,n;const r=[z(Ue),{sourceLayer:Ue},{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[na]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Re({props:o}),e.$on("click",oa);const f=[z(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&se(z(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&se(z(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function ra(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:Ue,title:sa,$$slots:{help:[ea],icon:[Xi]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ue}.pmtiles`,$$slots:{default:[la]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ue="wards",sa="Wards";function oa(s){let e=encodeURIComponent(s.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function ia(s,e,l){let t,n=ee.wards,r=$e(Ue);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class aa extends Z{constructor(e){super(),X(this,e,ia,ra,J,{})}}function fa(s){let e;return{c(){e=y("Open Data Commons Open Database License")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ua(s){let e,l,t,n;return t=new re({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[fa]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("License: "),b(t.$$.fragment)},m(r,o){d(r,e,o),p(e,l),w(t,e,null),n=!0},p(r,[o]){const f={};o&1&&(f.$$scope={dirty:o,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&h(e),v(t)}}}class Xe extends Z{constructor(e){super(),X(this,e,null,ua,J,{})}}function ca(s){let e,l,t;return l=new Se({props:{color:ee.bus_route_with_lane}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function pa(s){let e;return{c(){e=y(`GTFS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $a(s){let e,l,t,n,r,o,f,i,a,u;return o=new re({props:{href:"https://gtfs.org",$$slots:{default:[pa]},$$scope:{ctx:s}}}),a=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=S("p"),r=y("Note this data is from OpenStreetMap (as of 20 October 2024), not "),b(o.$$.fragment),f=y(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),b(a.$$.fragment),A(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(e,t),p(e,n),p(n,r),w(o,n,null),p(n,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&16&&(_.$$scope={dirty:$,ctx:c}),o.$set(_)},i(c){u||(m(o.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(o.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(o),v(a)}}}function ma(s){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _a(s){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ga(s){let e;function l(r,o){return r[3].has_bus_lane?_a:ma}let t=l(s),n=t(s);return{c(){n.c(),e=ve()},m(r,o){n.m(r,o),d(r,e,o)},p(r,o){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function da(s){let e,l;return e=new fe({props:{$$slots:{default:[ga,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ha(s){let e,l;const t=[z(ht),{sourceLayer:ht},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ee.bus_route_with_lane,ee.bus_route_without_lane],"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[da]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?le(t,[o&0&&se(z(ht)),o&0&&{sourceLayer:ht},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ba(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:ht,title:wa,$$slots:{help:[$a],icon:[ca]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${ht}.pmtiles`,$$slots:{default:[ha]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let ht="bus_routes",wa="Bus routes";function va(s,e,l){let t,n=$e(ht);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class ka extends Z{constructor(e){super(),X(this,e,va,ba,J,{})}}function gl(s){const e=Pa(s[9]);s[10]=e[0],s[11]=e[1],s[12]=e[2]}function dl(s,e,l){const t=s.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function ya(s){let e,l,t,n,r,o,f,i,a;return i=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=S("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),o=S("p"),o.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),b(i.$$.fragment),A(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(e,f),w(i,e,null),a=!0},p:Q,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){g(i.$$.fragment,u),a=!1},d(u){u&&h(e),v(i)}}}function Sa(s){let e,l,t=s[13]+"",n,r,o;return e=new Se({props:{color:s[14]}}),{c(){b(e.$$.fragment),l=L(),n=y(t),r=L()},m(f,i){w(e,f,i),d(f,l,i),d(f,n,i),d(f,r,i),o=!0},p:Q,i(f){o||(m(e.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),o=!1},d(f){f&&(h(l),h(n),h(r)),v(e,f)}}}function hl(s){let e,l,t;function n(o){s[4](o,s[10])}let r={$$slots:{default:[Sa]},$$scope:{ctx:s}};return s[0][s[10]]!==void 0&&(r.checked=s[0][s[10]]),e=new Ye({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,f){s=o;const i={};f&131072&&(i.$$scope={dirty:f,ctx:s}),!l&&f&5&&(l=!0,i.checked=s[0][s[10]],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function Ta(s){let e,l,t=he(s[2]),n=[];for(let o=0;o<t.length;o+=1)n[o]=hl(dl(s,t,o));const r=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ve()},m(o,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(o,f);d(o,e,f),l=!0},p(o,f){if(f&5){t=he(o[2]);let i;for(i=0;i<t.length;i+=1){const a=dl(o,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=hl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(o){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(o){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(o){o&&h(e),Qe(n,o)}}}function Ca(s){let e,l,t;return l=new De({props:{small:!0,$$slots:{default:[Ta]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),A(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const o={};r&131073&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function La(s){gl(s);let e,l=s[10]+"",t,n,r,o,f,i=s[11]+"",a,u,c,$,_=s[12]+"",k;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),o=y("Direction: "),f=S("b"),a=L(),u=S("p"),c=y("Width: "),$=S("b"),k=y(_)},m(C,T){d(C,e,T),p(e,t),d(C,n,T),d(C,r,T),p(r,o),p(r,f),f.innerHTML=i,d(C,a,T),d(C,u,T),p(u,c),p(u,$),p($,k)},p(C,T){gl(C),T&512&&l!==(l=C[10]+"")&&G(t,l),T&512&&i!==(i=C[11]+"")&&(f.innerHTML=i),T&512&&_!==(_=C[12]+"")&&G(k,_)},d(C){C&&(h(e),h(n),h(r),h(a),h(u))}}}function Ma(s){let e,l;return e=new fe({props:{$$slots:{default:[La,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ia(s){let e,l;const t=[z(bt),{sourceLayer:bt},{paint:{"line-color":Ze(["get","kind"],{track:ee.cycle_paths.track,lane:ee.cycle_paths.lane,shared_use_segregated:ee.cycle_paths.shared_use_segregated,shared_use_unsegregated:ee.cycle_paths.shared_use_unsegregated},"red"),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show?"visible":"none"}},{filter:s[3](s[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[Ma]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),e.$on("click",Ra),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&9?le(t,[o&0&&se(z(bt)),o&0&&{sourceLayer:bt},t[2],o&1&&{layout:{visibility:r[0].show?"visible":"none"}},o&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};o&131072&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Oa(s){let e,l,t,n,r;function o(i){s[5](i)}let f={name:bt,title:Na,$$slots:{controls:[Ca],help:[ya]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${bt}.pmtiles`,$$slots:{default:[Ia]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let bt="cycle_paths",Na="Cycle paths";function ja(s){return{show:!0,track:s.includes("track"),lane:s.includes("lane"),shared_use_segregated:s.includes("shared_use_segregated"),shared_use_unsegregated:s.includes("shared_use_unsegregated")}}function Pa(s){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[s.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[s.direction],t=s.width=="unknown"?"unknown":`${s.width} meters`;return[e,`${l} ${s.direction}`,t]}function Ra(s){window.open(`http://openstreetmap.org/way/${s.detail.features[0].properties.osm_id}`,"_blank")}function Da(s,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function o($){return $.show?n.filter(_=>$[_]).join(","):null}let f=zt(bt,r,o,ja);Y(s,f,$=>l(0,t=$));let i=[["track","Separated tracks",ee.cycle_paths.track],["lane","Unprotected lanes",ee.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",ee.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",ee.cycle_paths.shared_use_unsegregated]];function a($){let _=n.filter(k=>$[k]);return["in",["get","kind"],["literal",_]]}function u($,_){s.$$.not_equal(t[_],$)&&(t[_]=$,f.set(t))}function c($){s.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,f,i,a,u,c]}class Fa extends Z{constructor(e){super(),X(this,e,Da,Oa,J,{})}}function Aa(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ga(s){let e;return{c(){e=y(`Major Road Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function za(s){let e,l,t,n,r,o,f,i;return n=new re({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Ga]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),b(n.$$.fragment),r=y(", as of September 2021."),o=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function qa(s){let e,l=(s[4].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&G(t,l)},d(n){n&&h(e)}}}function Ha(s){let e,l;return e=new fe({props:{$$slots:{default:[qa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ea(s){let e,l;const t=[z(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[Ha]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&3?le(t,[o&0&&se(z(wt)),o&0&&{sourceLayer:wt},t[2],t[3],o&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ba(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:wt,title:Ua,$$slots:{help:[za],icon:[Aa]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${wt}.pmtiles`,$$slots:{default:[Ea]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let wt="mrn",Ua="Major Road Network";function Wa(s,e,l){let t,n=ee.mrn,r=$e(wt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class Ya extends Z{constructor(e){super(),X(this,e,Wa,Ba,J,{})}}function Ja(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Va(s){let e;return{c(){e=y(`OS Open Roads
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Qa(s){let e,l,t,n,r,o,f,i;return n=new re({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Va]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),o=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Ka(s){let e,l=(s[4].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&G(t,l)},d(n){n&&h(e)}}}function Za(s){let e,l;return e=new fe({props:{$$slots:{default:[Ka,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Xa(s){let e,l;const t=[z(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[Za]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&3?le(t,[o&0&&se(z(vt)),o&0&&{sourceLayer:vt},t[2],t[3],o&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function xa(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:vt,title:ef,$$slots:{help:[Qa],icon:[Ja]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${vt}.pmtiles`,$$slots:{default:[Xa]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let vt="srn",ef="Strategic Road Network";function tf(s,e,l){let t,n=ee.srn,r=$e(vt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class nf extends Z{constructor(e){super(),X(this,e,tf,xa,J,{})}}function lf(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function rf(s){let e;return{c(){e=y(`National Cycle Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function sf(s){let e,l,t,n,r,o,f,i;return n=new re({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[rf]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from Sustrans about the "),b(n.$$.fragment),r=y(", downloaded on 22/01/2024."),o=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function bl(s){let e,l,t,n=s[4].Desc_+"",r;return{c(){e=S("li"),l=y("Description: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].Desc_+"")&&G(r,n)},d(o){o&&h(e)}}}function wl(s){let e,l,t,n=s[4].Greenway+"",r;return{c(){e=S("li"),l=y("Is greenway: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].Greenway+"")&&G(r,n)},d(o){o&&h(e)}}}function vl(s){let e,l,t,n=s[4].RouteType+"",r;return{c(){e=S("li"),l=y("Route type: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].RouteType+"")&&G(r,n)},d(o){o&&h(e)}}}function kl(s){let e,l,t,n=s[4].RouteNo+"",r;return{c(){e=S("li"),l=y("Route number: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].RouteNo+"")&&G(r,n)},d(o){o&&h(e)}}}function yl(s){let e,l,t,n=s[4].RouteCat+"",r;return{c(){e=S("li"),l=y("Route Category: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].RouteCat+"")&&G(r,n)},d(o){o&&h(e)}}}function Sl(s){let e,l,t,n=s[4].OpenStatus+"",r;return{c(){e=S("li"),l=y("Open Status: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].OpenStatus+"")&&G(r,n)},d(o){o&&h(e)}}}function Tl(s){let e,l,t,n=s[4].Surface+"",r;return{c(){e=S("li"),l=y("Surface: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].Surface+"")&&G(r,n)},d(o){o&&h(e)}}}function Cl(s){let e,l,t,n=s[4].Quality+"",r;return{c(){e=S("li"),l=y("Quality: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].Quality+"")&&G(r,n)},d(o){o&&h(e)}}}function Ll(s){let e,l,t,n=s[4].RoadClass+"",r;return{c(){e=S("li"),l=y("Road Class: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].RoadClass+"")&&G(r,n)},d(o){o&&h(e)}}}function of(s){let e,l,t,n,r,o,f,i,a,u=s[4].Desc_&&bl(s),c=s[4].Greenway&&wl(s),$=s[4].RouteType&&vl(s),_=s[4].RouteNo&&kl(s),k=s[4].RouteCat&&yl(s),C=s[4].OpenStatus&&Sl(s),T=s[4].Surface&&Tl(s),N=s[4].Quality&&Cl(s),F=s[4].RoadClass&&Ll(s);return{c(){e=S("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),$&&$.c(),n=L(),_&&_.c(),r=L(),k&&k.c(),o=L(),C&&C.c(),f=L(),T&&T.c(),i=L(),N&&N.c(),a=L(),F&&F.c()},m(j,M){d(j,e,M),u&&u.m(e,null),p(e,l),c&&c.m(e,null),p(e,t),$&&$.m(e,null),p(e,n),_&&_.m(e,null),p(e,r),k&&k.m(e,null),p(e,o),C&&C.m(e,null),p(e,f),T&&T.m(e,null),p(e,i),N&&N.m(e,null),p(e,a),F&&F.m(e,null)},p(j,M){j[4].Desc_?u?u.p(j,M):(u=bl(j),u.c(),u.m(e,l)):u&&(u.d(1),u=null),j[4].Greenway?c?c.p(j,M):(c=wl(j),c.c(),c.m(e,t)):c&&(c.d(1),c=null),j[4].RouteType?$?$.p(j,M):($=vl(j),$.c(),$.m(e,n)):$&&($.d(1),$=null),j[4].RouteNo?_?_.p(j,M):(_=kl(j),_.c(),_.m(e,r)):_&&(_.d(1),_=null),j[4].RouteCat?k?k.p(j,M):(k=yl(j),k.c(),k.m(e,o)):k&&(k.d(1),k=null),j[4].OpenStatus?C?C.p(j,M):(C=Sl(j),C.c(),C.m(e,f)):C&&(C.d(1),C=null),j[4].Surface?T?T.p(j,M):(T=Tl(j),T.c(),T.m(e,i)):T&&(T.d(1),T=null),j[4].Quality?N?N.p(j,M):(N=Cl(j),N.c(),N.m(e,a)):N&&(N.d(1),N=null),j[4].RoadClass?F?F.p(j,M):(F=Ll(j),F.c(),F.m(e,null)):F&&(F.d(1),F=null)},d(j){j&&h(e),u&&u.d(),c&&c.d(),$&&$.d(),_&&_.d(),k&&k.d(),C&&C.d(),T&&T.d(),N&&N.d(),F&&F.d()}}}function af(s){let e,l;return e=new fe({props:{$$slots:{default:[of,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ff(s){let e,l;const t=[z(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[1],"line-width":4,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[af]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&3?le(t,[o&0&&se(z(kt)),o&0&&{sourceLayer:kt},t[2],t[3],o&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function uf(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:kt,title:cf,$$slots:{help:[sf],icon:[lf]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${kt}.pmtiles`,$$slots:{default:[ff]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let kt="national_cycle_network",cf="National Cycle Network";function pf(s,e,l){let t,n=ee.national_cycle_network,r=$e(kt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class $f extends Z{constructor(e){super(),X(this,e,pf,uf,J,{})}}function Ml(s,e,l){const t=s.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function mf(s){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _f(s){let e,l,t,n,r,o,f,i,a,u,c,$;return u=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[mf]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=S("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),o=S("p"),o.textContent="Data valid as of 1 January, 2024",f=L(),i=S("p"),a=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(u.$$.fragment),c=y("."),A(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(e,f),p(e,i),p(i,a),w(u,i,null),p(i,c),$=!0},p(_,k){const C={};k&4096&&(C.$$scope={dirty:k,ctx:_}),u.$set(C)},i(_){$||(m(u.$$.fragment,_),$=!0)},o(_){g(u.$$.fragment,_),$=!1},d(_){_&&h(e),v(u)}}}function gf(s){let e,l,t;return l=new Fe({props:{colorScale:s[1],limits:s[3]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function df(s){let e,l,t=ln(s[6].angle+s[9])+"",n;return{c(){e=S("p"),l=new Dt(!1),n=y(` side of the road: no pavement
          `),l.a=n},m(r,o){d(r,e,o),l.m(t,e),p(e,n)},p(r,o){o&64&&t!==(t=ln(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&h(e)}}}function hf(s){let e,l,t=ln(s[6].angle+s[9])+"",n,r,o=s[7]+"",f,i,a,u=s[8]+"",c,$;return{c(){e=S("p"),l=new Dt(!1),n=y(` side of the road:
            `),r=S("b"),f=y(o),i=y(`
            m average,
            `),a=S("b"),c=y(u),$=y(`
            m minimum
          `),l.a=n},m(_,k){d(_,e,k),l.m(t,e),p(e,n),p(e,r),p(r,f),p(e,i),p(e,a),p(a,c),p(e,$)},p(_,k){k&64&&t!==(t=ln(_[6].angle+_[9])+"")&&l.p(t),k&64&&o!==(o=_[7]+"")&&G(f,o),k&64&&u!==(u=_[8]+"")&&G(c,u)},d(_){_&&h(e)}}}function Il(s){let e;function l(r,o){return r[7]?hf:df}let t=l(s),n=t(s);return{c(){n.c(),e=ve()},m(r,o){n.m(r,o),d(r,e,o)},p(r,o){t===(t=l(r))&&n?n.p(r,o):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function bf(s){let e,l=he([[s[6].left_average,s[6].left_minimum,-90],[s[6].right_average,s[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Il(Ml(s,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ve()},m(n,r){for(let o=0;o<2;o+=1)t[o]&&t[o].m(n,r);d(n,e,r)},p(n,r){if(r&64){l=he([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let o;for(o=0;o<2;o+=1){const f=Ml(n,l,o);t[o]?t[o].p(f,r):(t[o]=Il(f),t[o].c(),t[o].m(e.parentNode,e))}for(;o<2;o+=1)t[o].d(1)}},d(n){n&&h(e),Qe(t,n)}}}function wf(s){let e,l;return e=new fe({props:{openOn:"hover",$$slots:{default:[bf,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function vf(s){let e,l;const t=[z(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],s[2],s[1]),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[wf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?le(t,[o&0&&se(z(yt)),o&0&&{sourceLayer:yt},t[2],t[3],o&6&&{paint:{"line-color":me(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Pe,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&4096&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function kf(s){let e,l,t,n,r;function o(i){s[5](i)}let f={name:yt,title:yf,$$slots:{controls:[gf],help:[_f]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${Zt()}/v1/${yt}.pmtiles`,$$slots:{default:[vf]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let yt="pavement_widths",yf="OS Pavement widths";function Sf(s){let e=Math.floor((s+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function ln(s){return`${Sf(s)} <span style="display: inline-block; rotate: ${s}deg">⬆</span>`}function Tf(s,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],o=["0-1.5m","1.5-2m","2-3m",">3m"],f=$e(yt);Y(s,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,o,f,i]}class Cf extends Z{constructor(e){super(),X(this,e,Tf,kf,J,{})}}function Lf(s){let e;return{c(){e=y("the PCT website")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Mf(s){let e;return{c(){e=y("2017 journal article")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function If(s){let e,l,t,n,r,o,f,i,a,u,c,$;return i=new re({props:{href:"https://www.pct.bike",$$slots:{default:[Lf]},$$scope:{ctx:s}}}),u=new re({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Mf]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=S("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),o=S("p"),f=y("See "),b(i.$$.fragment),a=y(" and "),b(u.$$.fragment),c=y(" for details on methodology and data sources."),A(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(o,f),w(i,o,null),p(o,a),w(u,o,null),p(o,c),$=!0},p(_,k){const C={};k&1024&&(C.$$scope={dirty:k,ctx:_}),i.$set(C);const T={};k&1024&&(T.$$scope={dirty:k,ctx:_}),u.$set(T)},i(_){$||(m(i.$$.fragment,_),m(u.$$.fragment,_),$=!0)},o(_){g(i.$$.fragment,_),g(u.$$.fragment,_),$=!1},d(_){_&&h(e),v(i),v(u)}}}function Of(s){let e,l,t,n,r,o,f,i,a;l=new Fe({props:{colorScale:s[1],limits:s[2]}});function u(k){s[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};s[0].tripPurpose!==void 0&&(c.value=s[0].tripPurpose),n=new yn({props:c}),H.push(()=>E(n,"value",u));function $(k){s[6](k)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return s[0].scenario!==void 0&&(_.value=s[0].scenario),f=new Ft({props:_}),H.push(()=>E(f,"value",$)),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),o=L(),b(f.$$.fragment),A(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(k,C){d(k,e,C),w(l,e,null),p(e,t),w(n,e,null),p(e,o),w(f,e,null),a=!0},p(k,C){const T={};!r&&C&1&&(r=!0,T.value=k[0].tripPurpose,B(()=>r=!1)),n.$set(T);const N={};!i&&C&1&&(i=!0,N.value=k[0].scenario,B(()=>i=!1)),f.$set(N)},i(k){a||(m(l.$$.fragment,k),m(n.$$.fragment,k),m(f.$$.fragment,k),a=!0)},o(k){g(l.$$.fragment,k),g(n.$$.fragment,k),g(f.$$.fragment,k),a=!1},d(k){k&&h(e),v(l),v(n),v(f)}}}function Nf(s){let e,l=s[4](s[9])+"",t;return{c(){e=new Dt(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function jf(s){let e,l;return e=new fe({props:{$$slots:{default:[Nf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Pf(s){let e,l;const t=[z(nt),{sourceLayer:nt},{paint:{"line-color":me(["get",s[0].scenario],s[2],s[1]),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show&&s[0].tripPurpose==nt?"visible":"none"}}];let n={$$slots:{default:[jf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?le(t,[o&0&&se(z(nt)),o&0&&{sourceLayer:nt},o&7&&{paint:{"line-color":me(["get",r[0].scenario],r[2],r[1]),"line-width":Pe,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==nt?"visible":"none"}}]):{};o&1024&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Rf(s){let e,l=s[4](s[9])+"",t;return{c(){e=new Dt(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Df(s){let e,l;return e=new fe({props:{$$slots:{default:[Rf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ff(s){let e,l;const t=[z(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",s[0].scenario],s[2],s[1]),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show&&s[0].tripPurpose==mt?"visible":"none"}}];let n={$$slots:{default:[Df]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?le(t,[o&0&&se(z(mt)),o&0&&{sourceLayer:mt},t[2],t[3],o&7&&{paint:{"line-color":me(["get",r[0].scenario],r[2],r[1]),"line-width":Pe,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==mt?"visible":"none"}}]):{};o&1024&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Af(s){let e,l,t,n,r,o,f;function i(u){s[7](u)}let a={name:Or,title:Gf,$$slots:{controls:[Of],help:[If]},$$scope:{ctx:s}};return s[0].show!==void 0&&(a.show=s[0].show),e=new ue({props:a}),H.push(()=>E(e,"show",i)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${nt}.pmtiles`,$$slots:{default:[Pf]},$$scope:{ctx:s}}}),o=new pe({props:{url:`pmtiles://${ce()}/v1/${mt}.pmtiles`,$$slots:{default:[Ff]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(o.$$.fragment)},m(u,c){w(e,u,c),d(u,t,c),w(n,u,c),d(u,r,c),w(o,u,c),f=!0},p(u,[c]){const $={};c&1025&&($.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,$.show=u[0].show,B(()=>l=!1)),e.$set($);const _={};c&1025&&(_.$$scope={dirty:c,ctx:u}),n.$set(_);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),o.$set(k)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(o.$$.fragment,u),f=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),g(o.$$.fragment,u),f=!1},d(u){u&&(h(t),h(r)),v(e,u),v(n,u),v(o,u)}}}let Or="pct",nt="pct_commute",mt="pct_school",Gf="Propensity to Cycle Tool";function zf(s){return s.show?`${s.tripPurpose}/${s.scenario}`:null}function qf(s){let[e,l]=s.split("/");return{show:!0,tripPurpose:e,scenario:l}}function Hf(s,e,l){let t,n=ee.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=zt(Or,{show:!1,tripPurpose:nt,scenario:"baseline"},zf,qf);Y(s,f,$=>l(0,t=$));function i($){let _=$.baseline,k=$.gov_target,C=$.go_dutch,T=`<h2>Trip purpose: ${t.tripPurpose==nt?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)T+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let N=(k/_).toFixed(1),F=(C/_).toFixed(1);T+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${N}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${F}x</b> of baseline)</p>`}return T}function a($){s.$$.not_equal(t.tripPurpose,$)&&(t.tripPurpose=$,f.set(t))}function u($){s.$$.not_equal(t.scenario,$)&&(t.scenario=$,f.set(t))}function c($){s.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,n,r,f,i,a,u,c]}class Ef extends Z{constructor(e){super(),X(this,e,Hf,Af,J,{})}}function Bf(s){let e;return{c(){e=y("Basemap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Uf(s){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Wf(s){let e,l,t,n,r,o,f,i,a,u,c,$,_;return n=new re({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Bf]},$$scope:{ctx:s}}}),c=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Uf]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),t=y("The average speed data is collected over a six-month period by "),b(n.$$.fragment),r=y(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),o=L(),f=S("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=S("p"),u=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(c.$$.fragment),$=y("."),A(e,"slot","help")},m(k,C){d(k,e,C),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(e,i),p(e,a),p(a,u),w(c,a,null),p(a,$),_=!0},p(k,C){const T={};C&512&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const N={};C&512&&(N.$$scope={dirty:C,ctx:k}),c.$set(N)},i(k){_||(m(n.$$.fragment,k),m(c.$$.fragment,k),_=!0)},o(k){g(n.$$.fragment,k),g(c.$$.fragment,k),_=!1},d(k){k&&h(e),v(n),v(c)}}}function Yf(s){let e,l,t,n,r,o;l=new Fe({props:{colorScale:s[1],limits:s[2]}});function f(a){s[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return s[0].kind!==void 0&&(i.value=s[0].kind),n=new yn({props:i}),H.push(()=>E(n,"value",f)),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),A(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(a,u){d(a,e,u),w(l,e,null),p(e,t),w(n,e,null),o=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,B(()=>r=!1)),n.$set(c)},i(a){o||(m(l.$$.fragment,a),m(n.$$.fragment,a),o=!0)},o(a){g(l.$$.fragment,a),g(n.$$.fragment,a),o=!1},d(a){a&&h(e),v(l),v(n)}}}function Jf(s){let e,l,t=s[8].indicative_mph+"",n,r,o,f,i,a=s[8].highest_mph+"",u,c,$=s[4][s[8].highest_description]+"",_,k;return{c(){e=S("p"),l=y("Posted speed limit: "),n=y(t),r=y(" mph"),o=L(),f=S("p"),i=y("Highest average speed: "),u=y(a),c=y(" mph (during "),_=y($),k=y(")")},m(C,T){d(C,e,T),p(e,l),p(e,n),p(e,r),d(C,o,T),d(C,f,T),p(f,i),p(f,u),p(f,c),p(f,_),p(f,k)},p(C,T){T&256&&t!==(t=C[8].indicative_mph+"")&&G(n,t),T&256&&a!==(a=C[8].highest_mph+"")&&G(u,a),T&256&&$!==($=C[4][C[8].highest_description]+"")&&G(_,$)},d(C){C&&(h(e),h(o),h(f))}}}function Vf(s){let e,l;return e=new fe({props:{$$slots:{default:[Jf,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qf(s){let e,l;const t=[z(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",s[0].kind],s[2],s[1]),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show?"visible":"none"}}];let n={$$slots:{default:[Vf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?le(t,[o&0&&se(z(St)),o&0&&{sourceLayer:St},t[2],t[3],o&7&&{paint:{"line-color":me(["get",r[0].kind],r[2],r[1]),"line-width":Pe,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};o&512&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Kf(s){let e,l,t,n,r;function o(i){s[6](i)}let f={name:St,title:Zf,$$slots:{controls:[Yf],help:[Wf]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${Zt()}/v1/${St}.pmtiles`,$$slots:{default:[Qf]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let St="road_speeds",Zf="OS Speeds";function Xf(s){return s.show?s.kind:null}function xf(s){return{show:!0,kind:s}}function eu(s,e,l){let t,n=ee.sequential_low_to_high,r=[0,20,30,40,50,90],f=zt(St,{show:!1,kind:"indicative_mph"},Xf,xf);Y(s,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){s.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){s.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class tu extends Z{constructor(e){super(),X(this,e,eu,Kf,J,{})}}function nu(s){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function lu(s){let e,l,t,n,r,o,f,i,a,u;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[nu]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=S("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),o=S("p"),f=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(i.$$.fragment),a=y("."),A(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(o,f),w(i,o,null),p(o,a),u=!0},p(c,$){const _={};$&64&&(_.$$scope={dirty:$,ctx:c}),i.$set(_)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){g(i.$$.fragment,c),u=!1},d(c){c&&h(e),v(i)}}}function ru(s){let e,l,t;return l=new Fe({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function su(s){let e,l,t,n=s[5].average+"",r,o,f,i,a,u,c=s[5].minimum+"",$,_;return{c(){e=S("p"),l=y("Average width: "),t=S("b"),r=y(n),o=y(`
        meters`),f=L(),i=S("p"),a=y("Minimum width: "),u=S("b"),$=y(c),_=y(`
        meters`)},m(k,C){d(k,e,C),p(e,l),p(e,t),p(t,r),p(e,o),d(k,f,C),d(k,i,C),p(i,a),p(i,u),p(u,$),p(i,_)},p(k,C){C&32&&n!==(n=k[5].average+"")&&G(r,n),C&32&&c!==(c=k[5].minimum+"")&&G($,c)},d(k){k&&(h(e),h(f),h(i))}}}function ou(s){let e,l;return e=new fe({props:{$$slots:{default:[su,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function iu(s){let e,l;const t=[z(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get","average"],s[2],s[1]),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[ou]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?le(t,[o&0&&se(z(Tt)),o&0&&{sourceLayer:Tt},t[2],t[3],o&6&&{paint:{"line-color":me(["get","average"],r[2],r[1]),"line-width":Pe,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&64&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function au(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:Tt,title:fu,$$slots:{controls:[ru],help:[lu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${Zt()}/v1/${Tt}.pmtiles`,$$slots:{default:[iu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Tt="road_widths",fu="OS Road widths";function uu(s,e,l){let t,n=ee.sequential_low_to_high,r=[0,5,10,15,20,100],o=$e(Tt);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class cu extends Z{constructor(e){super(),X(this,e,uu,au,J,{})}}function pu(s){let e,l,t;return l=new Se({props:{color:ee.trams}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function $u(s){let e,l,t,n,r;return n=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),b(n.$$.fragment),A(e,"slot","help")},m(o,f){d(o,e,f),p(e,l),p(e,t),w(n,e,null),r=!0},p:Q,i(o){r||(m(n.$$.fragment,o),r=!0)},o(o){g(n.$$.fragment,o),r=!1},d(o){o&&h(e),v(n)}}}function mu(s){let e,l;const t=[z(Ct),{sourceLayer:Ct},{paint:{"line-color":ee.trams,"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),e.$on("click",du),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?le(t,[o&0&&se(z(Ct)),o&0&&{sourceLayer:Ct},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function _u(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:Ct,title:gu,$$slots:{help:[$u],icon:[pu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ct}.pmtiles`,$$slots:{default:[mu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ct="trams",gu="Trams";function du(s){window.open(`http://openstreetmap.org/way/${s.detail.features[0].properties.osm_id}`,"_blank")}function hu(s,e,l){let t,n=$e(Ct);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class bu extends Z{constructor(e){super(),X(this,e,hu,_u,J,{})}}function wu(s){let e;return{c(){e=y(`Bus Open Data Service
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function vu(s){let e,l,t,n,r,o,f,i,a,u;return n=new re({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[wu]},$$scope:{ctx:s}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),b(n.$$.fragment),r=y(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),o=L(),f=S("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),b(a.$$.fragment),A(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&64&&(_.$$scope={dirty:$,ctx:c}),n.$set(_)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function ku(s){let e,l,t,n,r;return n=new Fe({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("div"),l=S("p"),l.textContent="Peak hourly frequency:",t=L(),b(n.$$.fragment),A(e,"slot","controls")},m(o,f){d(o,e,f),p(e,l),p(e,t),w(n,e,null),r=!0},p:Q,i(o){r||(m(n.$$.fragment,o),r=!0)},o(o){g(n.$$.fragment,o),r=!1},d(o){o&&h(e),v(n)}}}function yu(s){let e,l,t,n=s[5].stop_name+"",r,o,f,i,a,u=s[5].peak+"",c,$,_,k,C,T=s[5].peak_description+"",N,F,j,M,O,I=s[5].total+"",R,P,q=s[5].total_description+"",K,ae;return{c(){e=S("p"),l=y("Stop name: "),t=S("b"),r=y(n),o=L(),f=S("p"),i=y("Peak: "),a=S("b"),c=y(u),$=y(`
        buses during the busiest hour of any day`),_=L(),k=S("p"),C=y("The peak hour is "),N=y(T),F=L(),j=S("p"),M=y("Total buses per day: "),O=S("b"),R=y(I),P=y(`
        (for `),K=y(q),ae=y(", the busiest day of the week)")},m(D,x){d(D,e,x),p(e,l),p(e,t),p(t,r),d(D,o,x),d(D,f,x),p(f,i),p(f,a),p(a,c),p(f,$),d(D,_,x),d(D,k,x),p(k,C),p(k,N),d(D,F,x),d(D,j,x),p(j,M),p(j,O),p(O,R),p(j,P),p(j,K),p(j,ae)},p(D,x){x&32&&n!==(n=D[5].stop_name+"")&&G(r,n),x&32&&u!==(u=D[5].peak+"")&&G(c,u),x&32&&T!==(T=D[5].peak_description+"")&&G(N,T),x&32&&I!==(I=D[5].total+"")&&G(R,I),x&32&&q!==(q=D[5].total_description+"")&&G(K,q)},d(D){D&&(h(e),h(o),h(f),h(_),h(k),h(F),h(j))}}}function Su(s){let e,l;return e=new fe({props:{$$slots:{default:[yu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Tu(s){let e,l;const t=[z(Lt),{sourceLayer:Lt},{paint:{"circle-color":me(["get","peak"],s[2],s[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Su]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new At({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?le(t,[o&0&&se(z(Lt)),o&0&&{sourceLayer:Lt},o&6&&{paint:{"circle-color":me(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&64&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Cu(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:Lt,title:Lu,$$slots:{controls:[ku],help:[vu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Lt}.pmtiles`,$$slots:{default:[Tu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Lt="bus_stops",Lu="Bus stops";function Mu(s,e,l){let t,n=ee.sequential_low_to_high,r=[0,3,10,20,30,100],o=$e(Lt);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class Iu extends Z{constructor(e){super(),X(this,e,Mu,Cu,J,{})}}function Ou(s){let e;return{c(){e=y("crossing")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Nu(s){let e,l,t,n,r,o,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Ou]},$$scope:{ctx:s}}}),f=new Xe({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" data from OpenStreetMap (as of 20 October 2024)."),o=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function ju(s){let e,l,t;return l=new Xt({props:{rows:s[2]}}),{c(){e=S("div"),b(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Pu(s){let e,l=Ol(s[4])+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=Ol(n[4])+"")&&G(t,l)},d(n){n&&h(e)}}}function Ru(s){let e,l;return e=new fe({props:{$$slots:{default:[Pu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Du(s){let e,l;const t=[z(Mt),{sourceLayer:Mt},{paint:{"circle-color":Ze(["get","crossing"],{traffic_signals:ee.signalized_crossing},ee.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:s[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ru]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new At({props:n}),e.$on("click",Gu),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?le(t,[o&0&&se(z(Mt)),o&0&&{sourceLayer:Mt},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Fu(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:Mt,title:Au,$$slots:{controls:[ju],help:[Nu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Mt}.pmtiles`,$$slots:{default:[Du]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Mt="crossings",Au="Crossings";function Ol(s){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[s.crossing]??`Unknown crossing type (${s.crossing})`}function Gu(s){window.open(`http://openstreetmap.org/node/${s.detail.features[0].properties.osm_id}`,"_blank")}function zu(s,e,l){let t,n=$e(Mt);Y(s,n,f=>l(0,t=f));let r=[["Signalized",ee.signalized_crossing],["Other",ee.other_crossing]];function o(f){t=f,n.set(t)}return[t,n,r,o]}class qu extends Z{constructor(e){super(),X(this,e,zu,Fu,J,{})}}function Hu(s){let e;return{c(){e=y("OS Terrain 50")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Eu(s){let e,l,t,n,r,o,f,i,a,u,c,$,_,k;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Hu]},$$scope:{ctx:s}}}),c=new Te({}),_=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=S("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),o=S("p"),f=y("This layer is built from "),b(i.$$.fragment),a=y(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),b(c.$$.fragment),$=L(),b(_.$$.fragment),A(e,"slot","help")},m(C,T){d(C,e,T),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(o,f),w(i,o,null),p(o,a),p(e,u),w(c,e,null),p(e,$),w(_,e,null),k=!0},p(C,T){const N={};T&64&&(N.$$scope={dirty:T,ctx:C}),i.$set(N)},i(C){k||(m(i.$$.fragment,C),m(c.$$.fragment,C),m(_.$$.fragment,C),k=!0)},o(C){g(i.$$.fragment,C),g(c.$$.fragment,C),g(_.$$.fragment,C),k=!1},d(C){C&&h(e),v(i),v(c),v(_)}}}function Bu(s){let e,l,t,n,r;return l=new Fe({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("span"),b(l.$$.fragment),t=L(),n=S("p"),n.innerHTML=`<img src="${ls}" alt="arrow"/>
      Arrows point uphill`,A(e,"slot","controls")},m(o,f){d(o,e,f),w(l,e,null),p(e,t),p(e,n),r=!0},p:Q,i(o){r||(m(l.$$.fragment,o),r=!0)},o(o){g(l.$$.fragment,o),r=!1},d(o){o&&h(e),v(l)}}}function Uu(s){let e,l,t,n=Math.abs(s[5].gradient)/100+"",r,o;return{c(){e=S("p"),l=y("Gradient: "),t=S("b"),r=y(n),o=y(`
        %`)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(t,r),p(e,o)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&G(r,n)},d(f){f&&h(e)}}}function Wu(s){let e,l;return e=new fe({props:{$$slots:{default:[Uu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Yu(s){let e,l,t,n;const r=[z(We),{sourceLayer:We},{manageHoverState:!0},{paint:{"line-color":me(["/",["abs",["get","gradient"]],100],s[2],s[1]),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let o={$$slots:{default:[Wu]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new _e({props:o});const f=[z(We+"_arrows"),{sourceLayer:We},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new Cn({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?le(r,[u&0&&se(z(We)),u&0&&{sourceLayer:We},r[2],u&6&&{paint:{"line-color":me(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Pe,"line-opacity":te(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?le(f,[u&0&&se(z(We+"_arrows")),u&0&&{sourceLayer:We},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ju(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:We,title:Vu,$$slots:{controls:[Bu],help:[Eu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${We}.pmtiles`,$$slots:{default:[Yu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let We="gradient",Vu="Gradients";function Qu(s,e,l){let t,n=ee.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=$e(We);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class Ku extends Z{constructor(e){super(),X(this,e,Qu,Ju,J,{})}}function Zu(s){let e,l;return{c(){e=S("img"),A(e,"slot","icon"),tn(e.src,l=rs)||A(e,"src",l),A(e,"alt","a logo representing cycle parking")},m(t,n){d(t,e,n)},p:Q,d(t){t&&h(e)}}}function Xu(s){let e;return{c(){e=y("OpenStreetMap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xu(s){let e;return{c(){e=y("OpenStreetMap Carto")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ec(s){let e,l,t,n,r,o,f,i,a,u,c,$;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Xu]},$$scope:{ctx:s}}}),a=new re({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[xu]},$$scope:{ctx:s}}}),c=new Xe({}),{c(){e=S("span"),l=S("p"),t=y("Cycle parking, according to "),b(n.$$.fragment),r=y(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),o=L(),f=S("p"),i=y("Icon from "),b(a.$$.fragment),u=L(),b(c.$$.fragment),A(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(f,i),w(a,f,null),p(e,u),w(c,e,null),$=!0},p(_,k){const C={};k&16&&(C.$$scope={dirty:k,ctx:_}),n.$set(C);const T={};k&16&&(T.$$scope={dirty:k,ctx:_}),a.$set(T)},i(_){$||(m(n.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),$=!0)},o(_){g(n.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),$=!1},d(_){_&&h(e),v(n),v(a),v(c)}}}function tc(s){let e,l,t,n=(s[3].capacity??"unknown")+"",r;return{c(){e=S("p"),l=y("Capacity: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&8&&n!==(n=(o[3].capacity??"unknown")+"")&&G(r,n)},d(o){o&&h(e)}}}function nc(s){let e,l;return e=new fe({props:{$$slots:{default:[tc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function lc(s){let e,l;const t=[z(It),{sourceLayer:It},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[nc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Cn({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?le(t,[o&0&&se(z(It)),o&0&&{sourceLayer:It},o&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function rc(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:It,title:sc,$$slots:{help:[ec],icon:[Zu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${It}.pmtiles`,$$slots:{default:[lc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let It="cycle_parking",sc="Cycle parking";function oc(s,e,l){let t,n=$e(It);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class ic extends Z{constructor(e){super(),X(this,e,oc,rc,J,{})}}function ac(s){let e,l,t,n,r;return n=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),b(n.$$.fragment),A(e,"slot","help")},m(o,f){d(o,e,f),p(e,l),p(e,t),w(n,e,null),r=!0},p:Q,i(o){r||(m(n.$$.fragment,o),r=!0)},o(o){g(n.$$.fragment,o),r=!1},d(o){o&&h(e),v(n)}}}function fc(s){let e,l,t;return e=new Se({props:{color:ee.education.schools}}),{c(){b(e.$$.fragment),l=y(`
        Schools`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function uc(s){let e,l,t;return e=new Se({props:{color:ee.education.colleges}}),{c(){b(e.$$.fragment),l=y(`
        Colleges`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function cc(s){let e,l,t;return e=new Se({props:{color:ee.education.universities}}),{c(){b(e.$$.fragment),l=y(`
        Universities`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function pc(s){let e,l,t,n,r,o,f,i,a;function u(T){s[3](T)}let c={$$slots:{default:[fc]},$$scope:{ctx:s}};s[0].school!==void 0&&(c.checked=s[0].school),e=new Ye({props:c}),H.push(()=>E(e,"checked",u));function $(T){s[4](T)}let _={$$slots:{default:[uc]},$$scope:{ctx:s}};s[0].college!==void 0&&(_.checked=s[0].college),n=new Ye({props:_}),H.push(()=>E(n,"checked",$));function k(T){s[5](T)}let C={$$slots:{default:[cc]},$$scope:{ctx:s}};return s[0].university!==void 0&&(C.checked=s[0].university),f=new Ye({props:C}),H.push(()=>E(f,"checked",k)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),o=L(),b(f.$$.fragment)},m(T,N){w(e,T,N),d(T,t,N),w(n,T,N),d(T,o,N),w(f,T,N),a=!0},p(T,N){const F={};N&2048&&(F.$$scope={dirty:N,ctx:T}),!l&&N&1&&(l=!0,F.checked=T[0].school,B(()=>l=!1)),e.$set(F);const j={};N&2048&&(j.$$scope={dirty:N,ctx:T}),!r&&N&1&&(r=!0,j.checked=T[0].college,B(()=>r=!1)),n.$set(j);const M={};N&2048&&(M.$$scope={dirty:N,ctx:T}),!i&&N&1&&(i=!0,M.checked=T[0].university,B(()=>i=!1)),f.$set(M)},i(T){a||(m(e.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),a=!0)},o(T){g(e.$$.fragment,T),g(n.$$.fragment,T),g(f.$$.fragment,T),a=!1},d(T){T&&(h(t),h(o)),v(e,T),v(n,T),v(f,T)}}}function $c(s){let e,l,t;return l=new De({props:{small:!0,$$slots:{default:[pc]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),A(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const o={};r&2049&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function mc(s){let e,l=(s[10].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&G(t,l)},d(n){n&&h(e)}}}function _c(s){let e,l;return e=new fe({props:{$$slots:{default:[mc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function gc(s){let e,l;const t=[z(Ot),{sourceLayer:Ot},{paint:{"fill-color":Ze(["get","type"],{school:ee.education.schools,college:ee.education.colleges,university:ee.education.universities},"grey"),"fill-opacity":te(.7,1)}},{layout:{visibility:s[0].show?"visible":"none"}},{filter:s[2](s[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[_c]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&5?le(t,[o&0&&se(z(Ot)),o&0&&{sourceLayer:Ot},t[2],o&1&&{layout:{visibility:r[0].show?"visible":"none"}},o&5&&{filter:r[2](r[0])},t[5],t[6]]):{};o&2048&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function dc(s){let e,l,t,n,r;function o(i){s[6](i)}let f={name:Ot,title:hc,$$slots:{controls:[$c],help:[ac]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Ot}.pmtiles`,$$slots:{default:[gc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ot="education",hc="Education";function bc(s){return{show:!0,school:s.includes("school"),college:s.includes("college"),university:s.includes("university")}}function wc(s,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function o(_){return _.show?n.filter(k=>_[k]).join(","):null}let f=zt(Ot,r,o,bc);Y(s,f,_=>l(0,t=_));function i(_){let k=n.filter(C=>_[C]);return["in",["get","type"],["literal",k]]}function a(_){s.$$.not_equal(t.school,_)&&(t.school=_,f.set(t))}function u(_){s.$$.not_equal(t.college,_)&&(t.college=_,f.set(t))}function c(_){s.$$.not_equal(t.university,_)&&(t.university=_,f.set(t))}function $(_){s.$$.not_equal(t.show,_)&&(t.show=_,f.set(t))}return[t,f,i,a,u,c,$]}class vc extends Z{constructor(e){super(),X(this,e,wc,dc,J,{})}}function kc(s){let e,l,t;return l=new Se({props:{color:ee.hospitals}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function yc(s){let e;return{c(){e=y("hospital")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Sc(s){let e,l,t,n,r,o,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[yc]},$$scope:{ctx:s}}}),f=new Xe({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),o=L(),b(f.$$.fragment),A(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Tc(s){let e,l=(s[3].name??"Unnamed hospital")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&G(t,l)},d(n){n&&h(e)}}}function Cc(s){let e,l;return e=new fe({props:{$$slots:{default:[Tc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Lc(s){let e,l;const t=[z(Nt),{sourceLayer:Nt},{paint:{"fill-color":ee.hospitals,"fill-opacity":te(.7,1)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Cc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?le(t,[o&0&&se(z(Nt)),o&0&&{sourceLayer:Nt},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Mc(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:Nt,title:Ic,$$slots:{help:[Sc],icon:[kc]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Nt}.pmtiles`,$$slots:{default:[Lc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Nt="hospitals",Ic="Hospitals";function Oc(s,e,l){let t,n=$e(Nt);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class Nc extends Z{constructor(e){super(),X(this,e,Oc,Mc,J,{})}}function jc(s){let e,l;return{c(){e=S("img"),A(e,"slot","icon"),tn(e.src,l=ss)||A(e,"src",l),A(e,"alt","A logo representing a train")},m(t,n){d(t,e,n)},p:Q,d(t){t&&h(e)}}}function Pc(s){let e;return{c(){e=y("railway station")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Rc(s){let e;return{c(){e=y(`National Rail
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Dc(s){let e,l,t,n,r,o,f,i,a,u,c,$,_;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Pc]},$$scope:{ctx:s}}}),a=new re({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Rc]},$$scope:{ctx:s}}}),$=new Xe({}),{c(){e=S("div"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" data from OpenStreetMap (as of 20 October 2024)."),o=L(),f=S("p"),i=y("Icon from "),b(a.$$.fragment),u=y(". (Note that not all stations shown are National Rail.)"),c=L(),b($.$$.fragment),A(e,"slot","help")},m(k,C){d(k,e,C),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(f,i),w(a,f,null),p(f,u),p(e,c),w($,e,null),_=!0},p(k,C){const T={};C&16&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const N={};C&16&&(N.$$scope={dirty:C,ctx:k}),a.$set(N)},i(k){_||(m(n.$$.fragment,k),m(a.$$.fragment,k),m($.$$.fragment,k),_=!0)},o(k){g(n.$$.fragment,k),g(a.$$.fragment,k),g($.$$.fragment,k),_=!1},d(k){k&&h(e),v(n),v(a),v($)}}}function Fc(s){let e,l=(s[3].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&G(t,l)},d(n){n&&h(e)}}}function Ac(s){let e,l;return e=new fe({props:{$$slots:{default:[Fc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Gc(s){let e,l;const t=[z(Kt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[Ac]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Cn({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?le(t,[o&0&&se(z(Kt)),o&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function zc(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:Kt,title:qc,$$slots:{help:[Dc],icon:[jc]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new Gt({props:{data:`${ce()}/v1/${Kt}.geojson`,$$slots:{default:[Gc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Kt="railway_stations",qc="Railway stations";function Hc(s,e,l){let t,n=$e(Kt);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class Ec extends Z{constructor(e){super(),X(this,e,Hc,zc,J,{})}}function Bc(s){let e,l,t;return l=new Se({props:{color:ee.sports_spaces}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Uc(s){let e;return{c(){e=y("sports pitches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Wc(s){let e;return{c(){e=y("sports centres")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Yc(s){let e,l,t,n,r,o,f,i,a,u;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Uc]},$$scope:{ctx:s}}}),o=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Wc]},$$scope:{ctx:s}}}),a=new Xe({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" and "),b(o.$$.fragment),f=y(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),b(a.$$.fragment),A(e,"slot","help")},m(c,$){d(c,e,$),p(e,l),p(l,t),w(n,l,null),p(l,r),w(o,l,null),p(l,f),p(e,i),w(a,e,null),u=!0},p(c,$){const _={};$&16&&(_.$$scope={dirty:$,ctx:c}),n.$set(_);const k={};$&16&&(k.$$scope={dirty:$,ctx:c}),o.$set(k)},i(c){u||(m(n.$$.fragment,c),m(o.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(o),v(a)}}}function Jc(s){let e,l=(s[3].name??"Unnamed sports space")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&G(t,l)},d(n){n&&h(e)}}}function Vc(s){let e,l;return e=new fe({props:{$$slots:{default:[Jc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qc(s){let e,l;const t=[z(jt),{sourceLayer:jt},{paint:{"fill-color":ee.sports_spaces,"fill-opacity":te(.7,1)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Vc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?le(t,[o&0&&se(z(jt)),o&0&&{sourceLayer:jt},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Kc(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:jt,title:Zc,$$slots:{help:[Yc],icon:[Bc]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${jt}.pmtiles`,$$slots:{default:[Qc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let jt="sports_spaces",Zc="Sports spaces";function Xc(s,e,l){let t,n=$e(jt);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class xc extends Z{constructor(e){super(),X(this,e,Xc,Kc,J,{})}}function ep(s){let e;return{c(){e=y("DfT stats19")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function tp(s){let e;return{c(){e=y("documented by DfT")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function np(s){let e,l,t,n,r,o,f,i,a,u,c,$,_,k,C,T,N,F,j,M,O,I,R,P;return n=new re({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[ep]},$$scope:{ctx:s}}}),F=new re({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[tp]},$$scope:{ctx:s}}}),R=new Te({}),{c(){e=S("span"),l=S("p"),t=y("This layer shows collisions recorded in the "),b(n.$$.fragment),r=y(" dataset, as of 30 September 2024. Please note these limitations:"),o=L(),f=S("ul"),i=S("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=S("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),$=S("li"),$.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,_=L(),k=S("li"),k.textContent='The "pedestrians" category also include mobility scooters',C=L(),T=S("li"),N=y("All limitations "),b(F.$$.fragment),j=y(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),M=L(),O=S("p"),O.textContent="You can click a point to open the full report, thanks to CycleStreets.",I=L(),b(R.$$.fragment),A(e,"slot","help")},m(q,K){d(q,e,K),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(f,i),p(f,a),p(f,u),p(f,c),p(f,$),p(f,_),p(f,k),p(f,C),p(f,T),p(T,N),w(F,T,null),p(T,j),p(e,M),p(e,O),p(e,I),w(R,e,null),P=!0},p(q,K){const ae={};K&4194304&&(ae.$$scope={dirty:K,ctx:q}),n.$set(ae);const D={};K&4194304&&(D.$$scope={dirty:K,ctx:q}),F.$set(D)},i(q){P||(m(n.$$.fragment,q),m(F.$$.fragment,q),m(R.$$.fragment,q),P=!0)},o(q){g(n.$$.fragment,q),g(F.$$.fragment,q),g(R.$$.fragment,q),P=!1},d(q){q&&h(e),v(n),v(F),v(R)}}}function lp(s){let e;return{c(){e=y("Pedestrians")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rp(s){let e;return{c(){e=y("Cyclists")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function sp(s){let e;return{c(){e=y("Horse riders")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function op(s){let e;return{c(){e=y("Other")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ip(s){let e,l,t,n,r,o,f,i,a,u,c,$;function _(O){s[10](O)}let k={$$slots:{default:[lp]},$$scope:{ctx:s}};s[0].pedestrians!==void 0&&(k.checked=s[0].pedestrians),e=new Ye({props:k}),H.push(()=>E(e,"checked",_));function C(O){s[11](O)}let T={$$slots:{default:[rp]},$$scope:{ctx:s}};s[0].cyclists!==void 0&&(T.checked=s[0].cyclists),n=new Ye({props:T}),H.push(()=>E(n,"checked",C));function N(O){s[12](O)}let F={$$slots:{default:[sp]},$$scope:{ctx:s}};s[0].horseRiders!==void 0&&(F.checked=s[0].horseRiders),f=new Ye({props:F}),H.push(()=>E(f,"checked",N));function j(O){s[13](O)}let M={$$slots:{default:[op]},$$scope:{ctx:s}};return s[0].other!==void 0&&(M.checked=s[0].other),u=new Ye({props:M}),H.push(()=>E(u,"checked",j)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),o=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment)},m(O,I){w(e,O,I),d(O,t,I),w(n,O,I),d(O,o,I),w(f,O,I),d(O,a,I),w(u,O,I),$=!0},p(O,I){const R={};I&4194304&&(R.$$scope={dirty:I,ctx:O}),!l&&I&1&&(l=!0,R.checked=O[0].pedestrians,B(()=>l=!1)),e.$set(R);const P={};I&4194304&&(P.$$scope={dirty:I,ctx:O}),!r&&I&1&&(r=!0,P.checked=O[0].cyclists,B(()=>r=!1)),n.$set(P);const q={};I&4194304&&(q.$$scope={dirty:I,ctx:O}),!i&&I&1&&(i=!0,q.checked=O[0].horseRiders,B(()=>i=!1)),f.$set(q);const K={};I&4194304&&(K.$$scope={dirty:I,ctx:O}),!c&&I&1&&(c=!0,K.checked=O[0].other,B(()=>c=!1)),u.$set(K)},i(O){$||(m(e.$$.fragment,O),m(n.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),$=!0)},o(O){g(e.$$.fragment,O),g(n.$$.fragment,O),g(f.$$.fragment,O),g(u.$$.fragment,O),$=!1},d(O){O&&(h(t),h(o),h(a)),v(e,O),v(n,O),v(f,O),v(u,O)}}}function ap(s){let e,l,t,n,r,o,f,i,a,u,c,$,_;return l=new De({props:{small:!0,$$slots:{default:[ip]},$$scope:{ctx:s}}}),u=new Xt({props:{rows:s[9]}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),n=S("div"),r=y(`Filter years:
      `),o=S("input"),f=y(`
      -
      `),i=S("input"),a=L(),b(u.$$.fragment),A(o,"type","number"),A(o,"min",2017),A(o,"max",2023),A(o,"class","svelte-1ft65rw"),A(i,"type","number"),A(i,"min",2017),A(i,"max",2023),A(i,"class","svelte-1ft65rw"),A(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(k,C){d(k,e,C),w(l,e,null),p(e,t),p(e,n),p(n,r),p(n,o),Je(o,s[0].minYear),p(n,f),p(n,i),Je(i,s[0].maxYear),p(e,a),w(u,e,null),c=!0,$||(_=[lt(o,"input",s[14]),lt(i,"input",s[15])],$=!0)},p(k,C){const T={};C&4194305&&(T.$$scope={dirty:C,ctx:k}),l.$set(T),C&1&&Qt(o.value)!==k[0].minYear&&Je(o,k[0].minYear),C&1&&Qt(i.value)!==k[0].maxYear&&Je(i,k[0].maxYear)},i(k){c||(m(l.$$.fragment,k),m(u.$$.fragment,k),c=!0)},o(k){g(l.$$.fragment,k),g(u.$$.fragment,k),c=!1},d(k){k&&h(e),v(l),v(u),$=!1,vr(_)}}}function Nl(s){let e,l,t,n=s[3][s[21].pedestrian_location]+"",r;return{c(){e=S("p"),l=y("Pedestrian location: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&2097152&&n!==(n=o[3][o[21].pedestrian_location]+"")&&G(r,n)},d(o){o&&h(e)}}}function jl(s){let e,l,t,n=s[4][s[21].pedestrian_movement]+"",r;return{c(){e=S("p"),l=y("Pedestrian movement: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&2097152&&n!==(n=o[4][o[21].pedestrian_movement]+"")&&G(r,n)},d(o){o&&h(e)}}}function fp(s){let e,l,t,n=s[21].year+"",r,o,f,i,a,u=s[5][s[21].severity]+"",c,$,_,k,C,T=Pl(s[21])+"",N,F,j,M,O,I=s[21].pedestrian_location&&Nl(s),R=s[21].pedestrian_movement&&jl(s);return{c(){e=S("p"),l=y("Year: "),t=S("b"),r=y(n),o=L(),f=S("p"),i=y("Severity: "),a=S("b"),c=y(u),$=L(),_=S("p"),k=y("Casualties: "),C=S("b"),N=y(T),F=L(),I&&I.c(),j=L(),R&&R.c(),M=L(),O=S("p"),O.textContent="Click to open full report in CycleStreets"},m(P,q){d(P,e,q),p(e,l),p(e,t),p(t,r),d(P,o,q),d(P,f,q),p(f,i),p(f,a),p(a,c),d(P,$,q),d(P,_,q),p(_,k),p(_,C),p(C,N),d(P,F,q),I&&I.m(P,q),d(P,j,q),R&&R.m(P,q),d(P,M,q),d(P,O,q)},p(P,q){q&2097152&&n!==(n=P[21].year+"")&&G(r,n),q&2097152&&u!==(u=P[5][P[21].severity]+"")&&G(c,u),q&2097152&&T!==(T=Pl(P[21])+"")&&G(N,T),P[21].pedestrian_location?I?I.p(P,q):(I=Nl(P),I.c(),I.m(j.parentNode,j)):I&&(I.d(1),I=null),P[21].pedestrian_movement?R?R.p(P,q):(R=jl(P),R.c(),R.m(M.parentNode,M)):R&&(R.d(1),R=null)},d(P){P&&(h(e),h(o),h(f),h($),h(_),h(F),h(j),h(M),h(O)),I&&I.d(P),R&&R.d(P)}}}function up(s){let e,l;return e=new fe({props:{$$slots:{default:[fp,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function cp(s){let e,l;const t=[z(Pt),{sourceLayer:Pt},{paint:{"circle-color":me(["get","severity"],[1,2,3],[s[6],s[7],s[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:s[1]},{layout:{visibility:s[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[up]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new At({props:n}),e.$on("click",_p),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&451?le(t,[o&0&&se(z(Pt)),o&0&&{sourceLayer:Pt},o&448&&{paint:{"circle-color":me(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&2&&{filter:r[1]},o&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};o&4194304&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function pp(s){let e,l,t,n,r;function o(i){s[16](i)}let f={name:Pt,title:$p,$$slots:{controls:[ap],help:[np]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Pt}.pmtiles`,$$slots:{default:[cp]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Pt="stats19",$p="Stats19";function mp(s){let[e,l,t]=s.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Pl(s){let e=[];return s.pedestrian&&e.push("pedestrian"),s.cyclist&&e.push("cyclist"),s.horse_rider&&e.push("horse rider"),s.other&&e.push("other"),e.join(", ")}function _p(s){window.open(`https://www.cyclestreets.net/collisions/reports/${s.detail.features[0].properties.accident_index}`,"_blank")}function gp(s,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],o={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(P){return P.show?`${r.filter(K=>P[K]).join(",")}/${P.minYear}/${P.maxYear}`:null}let i=zt(Pt,o,f,mp);Y(s,i,P=>l(0,n=P));function a(P,q,K,ae,D,x){let V=["any"];return n.pedestrians&&V.push(["get","pedestrian"]),n.cyclists&&V.push(["get","cyclist"]),n.horseRiders&&V.push(["get","horse_rider"]),n.other&&V.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],V]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},$={1:"Fatal",2:"Serious",3:"Slight"},_=ee.sequential_low_to_high[4],k=ee.sequential_low_to_high[2],C=ee.sequential_low_to_high[0],T=[["Fatal",_],["Serious",k],["Slight",C]];function N(P){s.$$.not_equal(n.pedestrians,P)&&(n.pedestrians=P,i.set(n))}function F(P){s.$$.not_equal(n.cyclists,P)&&(n.cyclists=P,i.set(n))}function j(P){s.$$.not_equal(n.horseRiders,P)&&(n.horseRiders=P,i.set(n))}function M(P){s.$$.not_equal(n.other,P)&&(n.other=P,i.set(n))}function O(){n.minYear=Qt(this.value),i.set(n)}function I(){n.maxYear=Qt(this.value),i.set(n)}function R(P){s.$$.not_equal(n.show,P)&&(n.show=P,i.set(n))}return s.$$.update=()=>{s.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,$,_,k,C,T,N,F,j,M,O,I,R]}class dp extends Z{constructor(e){super(),X(this,e,gp,pp,J,{})}}function hp(s){let e;return{c(){e=y(`DfT road statistics
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function bp(s){let e;return{c(){e=y("methodology")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function wp(s){let e,l,t,n,r,o,f,i,a,u,c,$;return n=new re({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[hp]},$$scope:{ctx:s}}}),o=new re({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[bp]},$$scope:{ctx:s}}}),c=new Te({}),{c(){e=S("span"),l=S("p"),t=y("AADF (annual average daily flow) data from "),b(n.$$.fragment),r=y(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),b(o.$$.fragment),f=y(" for details and caveats about the measurements."),i=L(),a=S("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),b(c.$$.fragment),A(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(l,t),w(n,l,null),p(l,r),w(o,l,null),p(l,f),p(e,i),p(e,a),p(e,u),w(c,e,null),$=!0},p(_,k){const C={};k&128&&(C.$$scope={dirty:k,ctx:_}),n.$set(C);const T={};k&128&&(T.$$scope={dirty:k,ctx:_}),o.$set(T)},i(_){$||(m(n.$$.fragment,_),m(o.$$.fragment,_),m(c.$$.fragment,_),$=!0)},o(_){g(n.$$.fragment,_),g(o.$$.fragment,_),g(c.$$.fragment,_),$=!1},d(_){_&&h(e),v(n),v(o),v(c)}}}function vp(s){let e,l,t;return l=new Fe({props:{colorScale:s[1],limits:s[3]}}),{c(){e=S("span"),b(l.$$.fragment),A(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function kp(s){let e,l=s[6].location+"",t,n,r,o,f=s[6].year+"",i,a,u,c=s[6].motor_vehicles.toLocaleString()+"",$,_,k,C,T=s[6].year+"",N,F,j,M=s[6].pedal_cycles.toLocaleString()+"",O,I,R,P,q,K=s[6].method+"",ae;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),o=y("Total motor vehicles ("),i=y(f),a=y(` AADF):
        `),u=S("b"),$=y(c),_=L(),k=S("p"),C=y("Total pedal cycles ("),N=y(T),F=y(` AADF):
        `),j=S("b"),O=y(M),I=L(),R=S("p"),P=y("Count method: "),q=S("b"),ae=y(K)},m(D,x){d(D,e,x),p(e,t),d(D,n,x),d(D,r,x),p(r,o),p(r,i),p(r,a),p(r,u),p(u,$),d(D,_,x),d(D,k,x),p(k,C),p(k,N),p(k,F),p(k,j),p(j,O),d(D,I,x),d(D,R,x),p(R,P),p(R,q),p(q,ae)},p(D,x){x&64&&l!==(l=D[6].location+"")&&G(t,l),x&64&&f!==(f=D[6].year+"")&&G(i,f),x&64&&c!==(c=D[6].motor_vehicles.toLocaleString()+"")&&G($,c),x&64&&T!==(T=D[6].year+"")&&G(N,T),x&64&&M!==(M=D[6].pedal_cycles.toLocaleString()+"")&&G(O,M),x&64&&K!==(K=D[6].method+"")&&G(ae,K)},d(D){D&&(h(e),h(n),h(r),h(_),h(k),h(I),h(R))}}}function yp(s){let e,l;return e=new fe({props:{$$slots:{default:[kp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Sp(s){let e,l;const t=[z(Rt),{sourceLayer:Rt},{paint:{"circle-color":me(["get","motor_vehicles"],s[2],s[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:s[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[yp]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new At({props:n}),e.$on("click",Lp),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?le(t,[o&0&&se(z(Rt)),o&0&&{sourceLayer:Rt},o&6&&{paint:{"circle-color":me(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&128&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Tp(s){let e,l,t,n,r;function o(i){s[5](i)}let f={name:Rt,title:Cp,$$slots:{controls:[vp],help:[wp]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new pe({props:{url:`pmtiles://${ce()}/v1/${Rt}.pmtiles`,$$slots:{default:[Sp]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Rt="vehicle_counts",Cp="Vehicle counts";function Lp(s){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${s.detail.features[0].properties.count_point}`,"_blank")}function Mp(s,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],o=["0-2.5k","2.5-8k","8-15k",">15k"],f=$e(Rt);Y(s,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,o,f,i]}class Ip extends Z{constructor(e){super(),X(this,e,Mp,Tp,J,{})}}function Rl(s,e,l){const t=s.slice();return t[6]=e[l],t}function Op(s){let e;return{c(){e=S("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,A(e,"slot","help")},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function Np(s){let e,l,t;return l=new Xt({props:{rows:s[3]}}),{c(){e=S("div"),b(l.$$.fragment),A(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function jp(s){let e,l=s[5]["Issue ID"]+"",t,n,r=s[5].Code+"",o,f,i,a=s[5]["Issue Stage"]+"",u;return{c(){e=S("h2"),t=y(l),n=y(" - "),o=y(r),f=L(),i=S("p"),u=y(a)},m(c,$){d(c,e,$),p(e,t),p(e,n),p(e,o),d(c,f,$),d(c,i,$),p(i,u)},p(c,$){$&32&&l!==(l=c[5]["Issue ID"]+"")&&G(t,l),$&32&&r!==(r=c[5].Code+"")&&G(o,r),$&32&&a!==(a=c[5]["Issue Stage"]+"")&&G(u,a)},d(c){c&&(h(e),h(f),h(i))}}}function Dl(s){let e,l=s[6]+"",t,n,r,o=s[5][s[6]]+"",f,i;return{c(){e=S("p"),t=y(l),n=y(`:
            `),r=S("b"),f=y(o),i=L()},m(a,u){d(a,e,u),p(e,t),p(e,n),p(e,r),p(r,f),p(e,i)},p(a,u){u&32&&o!==(o=a[5][a[6]]+"")&&G(f,o)},d(a){a&&h(e)}}}function Pp(s){let e,l=he(s[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Dl(Rl(s,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();oe(e,"max-width","30vw"),oe(e,"max-height","60vh"),oe(e,"overflow","auto")},m(n,r){d(n,e,r);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,r){if(r&36){l=he(n[2]);let o;for(o=0;o<l.length;o+=1){const f=Rl(n,l,o);t[o]?t[o].p(f,r):(t[o]=Dl(f),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&h(e),Qe(t,n)}}}function Rp(s){let e,l,t,n;return e=new fe({props:{openOn:"hover",$$slots:{default:[jp,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:s}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Pp,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&544&&(f.$$scope={dirty:o,ctx:r}),e.$set(f);const i={};o&544&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Dp(s){let e,l;const t=[z(rn),{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(s[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:s[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Rp]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new At({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&9?le(t,[o&0&&se(z(rn)),o&8&&{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};o&512&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Fp(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:rn,title:Ap,$$slots:{controls:[Np],help:[Op]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new Gt({props:{data:`${Zt()}/v1/problems.geojson.gz`,$$slots:{default:[Dp]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let rn="problems",Ap="Issues & Conflicts";function Gp(s,e,l){let t,n=$e(rn);Y(s,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],o=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,o,f]}class zp extends Z{constructor(e){super(),X(this,e,Gp,Fp,J,{})}}function qp(s){let e;function l(r,o){return r[2]<=100?Bp:Ep}let t=l(s),n=t(s);return{c(){n.c(),e=ve()},m(r,o){n.m(r,o),d(r,e,o)},p(r,o){t===(t=l(r))&&n?n.p(r,o):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:Q,o:Q,d(r){r&&h(e),n.d(r)}}}function Hp(s){let e,l;return e=new Ke({props:{$$slots:{default:[Up]},$$scope:{ctx:s}}}),e.$on("click",s[3]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ep(s){let e;return{c(){e=S("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function Bp(s){let e,l,t;return{c(){e=S("label"),l=y(`Downloading scheme data
      `),t=S("progress"),t.value=s[2],A(t,"class","svelte-q3473n")},m(n,r){d(n,e,r),p(e,l),p(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&h(e)}}}function Up(s){let e;return{c(){e=y("Load latest scheme data")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Wp(s){let e,l,t,n;const r=[Hp,qp],o=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(s))&&(l=o[e]=r[e](s)),{c(){l&&l.c(),t=ve()},m(i,a){~e&&o[e].m(i,a),d(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&o[e].p(i,a):(l&&(be(),g(o[u],1,1,()=>{o[u]=null}),we()),~e?(l=o[e],l?l.p(i,a):(l=o[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){g(l),n=!1},d(i){i&&h(t),~e&&o[e].d(i)}}}function Yp(s,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,o=0;async function f(){let a=await Ar(`${Zt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,o=c)});l(2,o=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}kr(async()=>{n&&await f()});async function i(){l(0,n=!0),await f()}return s.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,o,i,t]}class Jp extends Z{constructor(e){super(),X(this,e,Yp,Wp,J,{loadFile:4})}}const sn=Ne({type:"FeatureCollection",features:[],schemes:{}}),dn=Ne(new Map),Fl=Ne(""),Al=Ne(""),hn=Ne({type:"FeatureCollection",features:[],schemes:{}}),bn=Ne(new Map),Gl=Ne(""),zl=Ne("");function Vp(s){let e={type:"FeatureCollection",features:[],schemes:{},notes:s.notes},l=new Map,t={type:"FeatureCollection",features:[],schemes:{},notes:s.notes},n=new Map;for(let[r,o]of Object.entries(s.schemes))o.pipeline?(n.set(r,o),t.schemes[r]=o):(l.set(r,o),e.schemes[r]=o);for(let r of s.features){if(!Qp(r))continue;let o=r.properties.scheme_reference,f=l.has(o),a=(f?l:n).get(o);a.browse&&(r.properties.funding_programme=a.browse.funding_programme,r.properties.current_milestone=a.browse.current_milestone);let u=f?e:t;r.id=u.features.length+1,u.features.push(r)}sn.set(e),dn.set(l),hn.set(t),bn.set(n)}function Qp(s){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(s.properties.id)}let Wt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},wn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function ql(s,e,l){const t=s.slice();return t[28]=e[l],t[29]=e,t[30]=l,t}function Kp(s){let e;return{c(){e=y("Filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Zp(s){let e;return{c(){e=y("Reset all filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Xp(s){let e,l,t,n,r,o,f,i;e=new mn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[t$]},$$scope:{ctx:s}}});function a(_){s[23](_)}let u={label:"Scheme name or reference",options:on(s[3])};s[0]!==void 0&&(u.value=s[0]),t=new Ir({props:u}),H.push(()=>E(t,"value",a));function c(_){s[24](_)}let $={label:"Authority or region",choices:s[10],emptyOption:!0};return s[4]!==void 0&&($.value=s[4]),o=new Ft({props:$}),H.push(()=>E(o,"value",c)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),r=L(),b(o.$$.fragment)},m(_,k){w(e,_,k),d(_,l,k),w(t,_,k),d(_,r,k),w(o,_,k),i=!0},p(_,k){const C={};k[0]&2|k[1]&1&&(C.$$scope={dirty:k,ctx:_}),e.$set(C);const T={};k[0]&8&&(T.options=on(_[3])),!n&&k[0]&1&&(n=!0,T.value=_[0],B(()=>n=!1)),t.$set(T);const N={};k[0]&1024&&(N.choices=_[10]),!f&&k[0]&16&&(f=!0,N.value=_[4],B(()=>f=!1)),o.$set(N)},i(_){i||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(o.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),i=!1},d(_){_&&(h(l),h(r)),v(e,_),v(t,_),v(o,_)}}}function xp(s){let e,l,t,n,r,o,f,i,a,u,c,$,_,k,C,T;t=new mn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[l$]},$$scope:{ctx:s}}});function N(R){s[17](R)}let F={label:"Scheme name or reference",options:on(s[3])};s[0]!==void 0&&(F.value=s[0]),r=new Ir({props:F}),H.push(()=>E(r,"value",N));function j(R){s[18](R)}let M={label:"Authority or region",choices:s[10],emptyOption:!0};s[4]!==void 0&&(M.value=s[4]),i=new Ft({props:M}),H.push(()=>E(i,"value",j)),$=new mn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[o$]},$$scope:{ctx:s}}});function O(R){s[20](R)}let I={label:"Current milestone",choices:s[11],emptyOption:!0};return s[6]!==void 0&&(I.value=s[6]),k=new Ft({props:I}),H.push(()=>E(k,"value",O)),{c(){e=S("div"),l=S("div"),b(t.$$.fragment),n=L(),b(r.$$.fragment),f=L(),b(i.$$.fragment),u=L(),c=S("div"),b($.$$.fragment),_=L(),b(k.$$.fragment),A(l,"class","govuk-grid-column-one-half"),A(c,"class","govuk-grid-column-one-half"),A(e,"class","govuk-grid-row")},m(R,P){d(R,e,P),p(e,l),w(t,l,null),p(l,n),w(r,l,null),p(l,f),w(i,l,null),p(e,u),p(e,c),w($,c,null),p(c,_),w(k,c,null),T=!0},p(R,P){const q={};P[0]&2|P[1]&1&&(q.$$scope={dirty:P,ctx:R}),t.$set(q);const K={};P[0]&8&&(K.options=on(R[3])),!o&&P[0]&1&&(o=!0,K.value=R[0],B(()=>o=!1)),r.$set(K);const ae={};P[0]&1024&&(ae.choices=R[10]),!a&&P[0]&16&&(a=!0,ae.value=R[4],B(()=>a=!1)),i.$set(ae);const D={};P[0]&32|P[1]&1&&(D.$$scope={dirty:P,ctx:R}),$.$set(D);const x={};!C&&P[0]&64&&(C=!0,x.value=R[6],B(()=>C=!1)),k.$set(x)},i(R){T||(m(t.$$.fragment,R),m(r.$$.fragment,R),m(i.$$.fragment,R),m($.$$.fragment,R),m(k.$$.fragment,R),T=!0)},o(R){g(t.$$.fragment,R),g(r.$$.fragment,R),g(i.$$.fragment,R),g($.$$.fragment,R),g(k.$$.fragment,R),T=!1},d(R){R&&h(e),v(t),v(r),v(i),v($),v(k)}}}function e$(s){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function t$(s){let e,l,t,n,r,o;return t=new Ke({props:{$$slots:{default:[e$]},$$scope:{ctx:s}}}),t.$on("click",s[22]),{c(){e=S("input"),l=L(),b(t.$$.fragment),A(e,"type","text"),A(e,"class","govuk-input govuk-input--width-10"),A(e,"id","filterInterventionText")},m(f,i){d(f,e,i),Je(e,s[1]),d(f,l,i),w(t,f,i),n=!0,r||(o=lt(e,"input",s[21]),r=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&Je(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,o()}}}function n$(s){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function l$(s){let e,l,t,n,r,o;return t=new Ke({props:{$$slots:{default:[n$]},$$scope:{ctx:s}}}),t.$on("click",s[16]),{c(){e=S("input"),l=L(),b(t.$$.fragment),A(e,"type","text"),A(e,"class","govuk-input govuk-input--width-10"),A(e,"id","filterInterventionText")},m(f,i){d(f,e,i),Je(e,s[1]),d(f,l,i),w(t,f,i),n=!0,r||(o=lt(e,"input",s[15]),r=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&Je(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,o()}}}function r$(s){let e=s[28]+"",l,t;return{c(){l=y(e),t=L()},m(n,r){d(n,l,r),d(n,t,r)},p:Q,d(n){n&&(h(l),h(t))}}}function Hl(s){let e,l,t;function n(o){s[19](o,s[28])}let r={$$slots:{default:[r$]},$$scope:{ctx:s}};return s[5][s[28]]!==void 0&&(r.checked=s[5][s[28]]),e=new Ye({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,f){s=o;const i={};f[1]&1&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&32&&(l=!0,i.checked=s[5][s[28]],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function s$(s){let e,l,t=he(Object.keys(Wt)),n=[];for(let o=0;o<t.length;o+=1)n[o]=Hl(ql(s,t,o));const r=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=ve()},m(o,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(o,f);d(o,e,f),l=!0},p(o,f){if(f[0]&32){t=he(Object.keys(Wt));let i;for(i=0;i<t.length;i+=1){const a=ql(o,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Hl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(o){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(o){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(o){o&&h(e),Qe(n,o)}}}function o$(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[s$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&1&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function i$(s){let e;return{c(){e=y("Done")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function a$(s){let e,l,t,n,r=s[9].interventions.toLocaleString()+"",o,f,i,a,u=s[8].size.toLocaleString()+"",c,$,_,k,C,T=El(s[9].totalLength).toFixed(1)+"",N,F,j,M,O,I,R,P,q,K;M=new Ke({props:{$$slots:{default:[Zp]},$$scope:{ctx:s}}}),M.$on("click",s[12]);const ae=[xp,Xp],D=[];function x(V,U){return V[2]=="ATF"?0:1}return I=x(s),R=D[I]=ae[I](s),q=new Gr({props:{$$slots:{default:[i$]},$$scope:{ctx:s}}}),q.$on("click",s[25]),{c(){e=S("p"),e.textContent="Showing:",l=L(),t=S("ul"),n=S("li"),o=y(r),f=y(" interventions"),i=L(),a=S("li"),c=y(u),$=y(" schemes"),_=L(),k=S("li"),C=y("total route length of "),N=y(T),F=y(" miles"),j=L(),b(M.$$.fragment),O=L(),R.c(),P=L(),b(q.$$.fragment)},m(V,U){d(V,e,U),d(V,l,U),d(V,t,U),p(t,n),p(n,o),p(n,f),p(t,i),p(t,a),p(a,c),p(a,$),p(t,_),p(t,k),p(k,C),p(k,N),p(k,F),d(V,j,U),w(M,V,U),d(V,O,U),D[I].m(V,U),d(V,P,U),w(q,V,U),K=!0},p(V,U){(!K||U[0]&512)&&r!==(r=V[9].interventions.toLocaleString()+"")&&G(o,r),(!K||U[0]&256)&&u!==(u=V[8].size.toLocaleString()+"")&&G(c,u),(!K||U[0]&512)&&T!==(T=El(V[9].totalLength).toFixed(1)+"")&&G(N,T);const Ce={};U[1]&1&&(Ce.$$scope={dirty:U,ctx:V}),M.$set(Ce);let je=I;I=x(V),I===je?D[I].p(V,U):(be(),g(D[je],1,1,()=>{D[je]=null}),we(),R=D[I],R?R.p(V,U):(R=D[I]=ae[I](V),R.c()),m(R,1),R.m(P.parentNode,P));const Ae={};U[1]&1&&(Ae.$$scope={dirty:U,ctx:V}),q.$set(Ae)},i(V){K||(m(M.$$.fragment,V),m(R),m(q.$$.fragment,V),K=!0)},o(V){g(M.$$.fragment,V),g(R),g(q.$$.fragment,V),K=!1},d(V){V&&(h(e),h(l),h(t),h(j),h(O),h(P)),v(M,V),D[I].d(V),v(q,V)}}}function f$(s){let e,l,t,n,r;e=new Ke({props:{$$slots:{default:[Kp]},$$scope:{ctx:s}}}),e.$on("click",s[14]);function o(i){s[26](i)}let f={title:`Filter ${s[2]} schemes`,$$slots:{default:[a$]},$$scope:{ctx:s}};return s[7]!==void 0&&(f.open=s[7]),t=new wr({props:f}),H.push(()=>E(t,"open",o)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){w(e,i,a),d(i,l,a),w(t,i,a),r=!0},p(i,a){const u={};a[1]&1&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a[0]&4&&(c.title=`Filter ${i[2]} schemes`),a[0]&2047|a[1]&1&&(c.$$scope={dirty:a,ctx:i}),!n&&a[0]&128&&(n=!0,c.open=i[7],B(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),r=!1},d(i){i&&h(l),v(e,i),v(t,i)}}}function u$(s){var t;let e=new Set;for(let n of s.values())(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function El(s){return s*621371e-9}function on(s){let e=[];for(let l of s.values())e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function c$(s,e,l){let t,{source:n}=e,{schemes:r}=e,{schemesGj:o}=e,{filterSchemeText:f}=e,{filterInterventionText:i}=e,a=!1,u=new Set,c={interventions:0,totalLength:0},$=Object.keys(wn).map(U=>[U,U]),_="",k=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0])),C="";function T(U,Ce,je,Ae,$t){let W=U.toLowerCase(),xe=Ce.toLowerCase(),qt=de=>{var et,at,Et,Yt;if(W&&!((et=de.properties.name)!=null&&et.toLowerCase().includes(W))&&!((at=de.properties.description)!=null&&at.toLowerCase().includes(W)))return!1;let Ge=r.get(de.properties.scheme_reference);return!(je&&((Et=Ge.browse)==null?void 0:Et.authority_or_region)!=je||n=="ATF"&&!Ae[Ge.browse.funding_programme]||$t&&((Yt=Ge.browse)==null?void 0:Yt.current_milestone)!=$t||xe&&!Ge.scheme_reference.toLowerCase().includes(xe)&&!(Ge.scheme_name??"").toLowerCase().includes(xe))};l(8,u=new Set(o.features.filter(qt).map(de=>de.properties.scheme_reference))),l(9,c={interventions:0,totalLength:0});let Ht=de=>{var Ge,et;return!(!u.has(de.properties.scheme_reference)||W&&!((Ge=de.properties.name)!=null&&Ge.toLowerCase().includes(W))&&!((et=de.properties.description)!=null&&et.toLowerCase().includes(W)))};for(let de of o.features)Ht(de)?(delete de.properties.hide_while_editing,l(9,c.interventions++,c),de.geometry.type=="LineString"&&de.properties.length_meters&&l(9,c.totalLength+=de.properties.length_meters,c)):de.properties.hide_while_editing=!0;l(13,o),l(9,c)}function N(){l(4,_=""),l(5,k=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0]))),l(6,C=""),l(1,i=""),l(0,f="")}const F=()=>l(7,a=!0);function j(){i=this.value,l(1,i)}const M=()=>l(1,i="");function O(U){f=U,l(0,f)}function I(U){_=U,l(4,_)}function R(U,Ce){s.$$.not_equal(k[Ce],U)&&(k[Ce]=U,l(5,k))}function P(U){C=U,l(6,C)}function q(){i=this.value,l(1,i)}const K=()=>l(1,i="");function ae(U){f=U,l(0,f)}function D(U){_=U,l(4,_)}const x=()=>l(7,a=!1);function V(U){a=U,l(7,a)}return s.$$set=U=>{"source"in U&&l(2,n=U.source),"schemes"in U&&l(3,r=U.schemes),"schemesGj"in U&&l(13,o=U.schemesGj),"filterSchemeText"in U&&l(0,f=U.filterSchemeText),"filterInterventionText"in U&&l(1,i=U.filterInterventionText)},s.$$.update=()=>{s.$$.dirty[0]&8&&l(10,t=u$(r)),s.$$.dirty[0]&115&&T(i,f,_,k,C)},[f,i,n,r,_,k,C,a,u,c,t,$,N,o,F,j,M,O,I,R,P,q,K,ae,D,x,V]}class Nr extends Z{constructor(e){super(),X(this,e,c$,f$,J,{source:2,schemes:3,schemesGj:13,filterSchemeText:0,filterInterventionText:1},null,[-1,-1])}}function Bl(s){let e,l,t,n=s[0].status+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Status",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].status+"")&&G(r,n)},d(o){o&&h(e)}}}function Ul(s){let e,l,t,n=s[0].timescale+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Timescale",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].timescale+"")&&G(r,n)},d(o){o&&h(e)}}}function Wl(s){let e,l,t,n=s[0].timescale_year+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Estimated completion year",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].timescale_year+"")&&G(r,n)},d(o){o&&h(e)}}}function Yl(s){let e,l,t,n=s[0].year_published+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently published",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].year_published+"")&&G(r,n)},d(o){o&&h(e)}}}function Jl(s){let e,l,t,n=s[0].year_consulted+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently consulted on",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].year_consulted+"")&&G(r,n)},d(o){o&&h(e)}}}function p$(s){let e,l,t,n,r,o=s[0].status&&Bl(s),f=s[0].timescale&&Ul(s),i=s[0].timescale_year&&Wl(s),a=s[0].year_published&&Yl(s),u=s[0].year_consulted&&Jl(s);return{c(){o&&o.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=ve()},m(c,$){o&&o.m(c,$),d(c,e,$),f&&f.m(c,$),d(c,l,$),i&&i.m(c,$),d(c,t,$),a&&a.m(c,$),d(c,n,$),u&&u.m(c,$),d(c,r,$)},p(c,[$]){c[0].status?o?o.p(c,$):(o=Bl(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[0].timescale?f?f.p(c,$):(f=Ul(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,$):(i=Wl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,$):(a=Yl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,$):(u=Jl(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:Q,o:Q,d(c){c&&(h(e),h(l),h(t),h(n),h(r)),o&&o.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function $$(s,e,l){let{props:t}=e;return s.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class jr extends Z{constructor(e){super(),X(this,e,$$,p$,J,{props:0})}}function Vl(s){let e,l,t,n=s[0].budget.toLocaleString()+"",r,o;return{c(){e=S("p"),l=S("b"),l.textContent="Cost",t=y(`
    : `),r=y(n),o=y(`
    GBP`)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r),p(e,o)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&G(r,n)},d(f){f&&h(e)}}}function Ql(s){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Kl(s){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Zl(s){let e,l,t,n;return{c(){e=S("p"),l=S("b"),l.textContent="Funding sources",t=y(`
    : `),n=y(s[1])},m(r,o){d(r,e,o),p(e,l),p(e,t),p(e,n)},p(r,o){o&2&&G(n,r[1])},d(r){r&&h(e)}}}function m$(s){let e,l,t,n,r=s[0].budget&&Vl(s),o=s[0].development_funded&&Ql(),f=s[0].construction_funded&&Kl(),i=s[1]&&Zl(s);return{c(){r&&r.c(),e=L(),o&&o.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=ve()},m(a,u){r&&r.m(a,u),d(a,e,u),o&&o.m(a,u),d(a,l,u),f&&f.m(a,u),d(a,t,u),i&&i.m(a,u),d(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=Vl(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?o||(o=Ql(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),a[0].construction_funded?f||(f=Kl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=Zl(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:Q,o:Q,d(a){a&&(h(e),h(l),h(t),h(n)),r&&r.d(a),o&&o.d(a),f&&f.d(a),i&&i.d(a)}}}function _$(s){if(!s.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])s.funding_sources[l]&&e.push(l.toUpperCase());return s.funding_sources.other&&e.push(s.funding_sources.other),e.join(", ")}function g$(s,e,l){let t,{props:n}=e;return s.$$set=r=>{"props"in r&&l(0,n=r.props)},s.$$.update=()=>{s.$$.dirty&1&&l(1,t=_$(n))},[n,t]}class Pr extends Z{constructor(e){super(),X(this,e,g$,m$,J,{props:0})}}function cn(s){const e=s.slice(),l=e[5].pipeline;return e[12]=l,e}function pn(s){const e=s.slice(),l=e[1].pipeline;return e[12]=l,e}function Xl(s){let e,l,t,n=En(s[1].length_meters)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Length",t=y(`
        : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&2&&n!==(n=En(o[1].length_meters)+"")&&G(r,n)},d(o){o&&h(e)}}}function xl(s){let e,l=ct(s[1].description,s[3])+"";return{c(){e=S("p")},m(t,n){d(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=ct(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&h(e)}}}function er(s){let e,l,t,n,r,o,f,i=s[12].atf4_type&&tr(s),a=s[12].accuracy&&nr(s),u=s[12].is_alternative&&lr();return n=new Pr({props:{props:s[12]}}),o=new jr({props:{props:s[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(o.$$.fragment)},m(c,$){i&&i.m(c,$),d(c,e,$),a&&a.m(c,$),d(c,l,$),u&&u.m(c,$),d(c,t,$),w(n,c,$),d(c,r,$),w(o,c,$),f=!0},p(c,$){c[12].atf4_type?i?i.p(c,$):(i=tr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].accuracy?a?a.p(c,$):(a=nr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].is_alternative?u||(u=lr(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};$&2&&(_.props=c[12]),n.$set(_);const k={};$&2&&(k.props=c[12]),o.$set(k)},i(c){f||(m(n.$$.fragment,c),m(o.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(o,c)}}}function tr(s){let e,l,t,n=s[12].atf4_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 type",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&2&&n!==(n=o[12].atf4_type+"")&&G(r,n)},d(o){o&&h(e)}}}function nr(s){let e,l,t,n=s[12].accuracy+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Accuracy",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&2&&n!==(n=o[12].accuracy+"")&&G(r,n)},d(o){o&&h(e)}}}function lr(s){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rr(s){var o;let e,l,t,n=((o=s[5].browse)==null?void 0:o.capital_scheme_id)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Capital scheme ID",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&G(r,n)},d(f){f&&h(e)}}}function sr(s){var o;let e,l,t,n=((o=s[5].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Current milestone",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&G(r,n)},d(f){f&&h(e)}}}function or(s){let e,l,t,n,r,o,f,i=s[12].scheme_type&&ir(s),a=s[12].atf4_lead_type&&ar(s),u=s[12].scheme_description&&fr(s);return n=new Pr({props:{props:s[12]}}),o=new jr({props:{props:s[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(o.$$.fragment)},m(c,$){i&&i.m(c,$),d(c,e,$),a&&a.m(c,$),d(c,l,$),u&&u.m(c,$),d(c,t,$),w(n,c,$),d(c,r,$),w(o,c,$),f=!0},p(c,$){c[12].scheme_type?i?i.p(c,$):(i=ir(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].atf4_lead_type?a?a.p(c,$):(a=ar(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].scheme_description?u?u.p(c,$):(u=fr(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};$&32&&(_.props=c[12]),n.$set(_);const k={};$&32&&(k.props=c[12]),o.$set(k)},i(c){f||(m(n.$$.fragment,c),m(o.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(o,c)}}}function ir(s){let e,l,t,n=s[12].scheme_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme type",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&32&&n!==(n=o[12].scheme_type+"")&&G(r,n)},d(o){o&&h(e)}}}function ar(s){let e,l,t,n=s[12].atf4_lead_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 lead type",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&32&&n!==(n=o[12].atf4_lead_type+"")&&G(r,n)},d(o){o&&h(e)}}}function fr(s){let e,l,t,n=s[12].scheme_description+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Descripton",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&32&&n!==(n=o[12].scheme_description+"")&&G(r,n)},d(o){o&&h(e)}}}function d$(s){let e;return{c(){e=y("Zoom to show entire scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function h$(s){let e;return{c(){e=y("Edit a copy of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ur(s){var On,Nn,jn,Pn;let e,l,t,n,r,o,f,i=ct(s[1].name,s[3])+"",a,u=s[1].intervention_type+"",c,$,_,k,C,T,N,F,j,M=s[0].toUpperCase()+"",O,I,R,P,q,K,ae,D=ct(s[5].scheme_name??"",s[2])+"",x,V,U,Ce,je,Ae=ct(s[1].scheme_reference,s[2])+"",$t,W,xe,qt,Ht=((On=s[5].browse)==null?void 0:On.authority_or_region)+"",de,Ge,et,at,Et,Yt,xt=((Nn=s[5].browse)==null?void 0:Nn.funding_programme)+"",an,Mn,fn,un,ft,In,ut,ze,Le=s[1].length_meters&&Xl(s),Me=s[1].description&&xl(s),ke=s[1].pipeline&&er(pn(s)),Ie=((jn=s[5].browse)==null?void 0:jn.capital_scheme_id)&&rr(s),Oe=((Pn=s[5].browse)==null?void 0:Pn.current_milestone)&&sr(s),ye=s[5].pipeline&&or(cn(s));return ft=new Ke({props:{$$slots:{default:[d$]},$$scope:{ctx:s}}}),ft.$on("click",s[6]),ut=new Ke({props:{$$slots:{default:[h$]},$$scope:{ctx:s}}}),ut.$on("click",s[7]),{c(){e=S("div"),l=S("h2"),l.textContent="Intervention",t=L(),n=S("p"),r=S("b"),r.textContent="Name",o=y(`
      : `),f=new Dt(!1),a=y(" ("),c=y(u),$=y(")"),_=L(),Le&&Le.c(),k=L(),Me&&Me.c(),C=L(),ke&&ke.c(),T=L(),N=S("hr"),F=L(),j=S("h2"),O=y(M),I=y(" Scheme"),R=L(),P=S("p"),q=S("b"),q.textContent="Scheme name",K=y(`
      : `),ae=new Dt(!1),x=L(),V=S("p"),U=S("b"),U.textContent="Scheme reference",Ce=y(`
      : `),je=new Dt(!1),$t=L(),W=S("p"),xe=S("b"),xe.textContent="Authority or region",qt=y(`
      : `),de=y(Ht),Ge=L(),Ie&&Ie.c(),et=L(),at=S("p"),Et=S("b"),Et.textContent="Funding programme",Yt=y(`
      : `),an=y(xt),Mn=L(),Oe&&Oe.c(),fn=L(),ye&&ye.c(),un=L(),b(ft.$$.fragment),In=L(),b(ut.$$.fragment),f.a=a,ae.a=null,je.a=null,oe(e,"max-width","30vw"),oe(e,"max-height","60vh"),oe(e,"overflow","auto")},m(ie,ge){d(ie,e,ge),p(e,l),p(e,t),p(e,n),p(n,r),p(n,o),f.m(i,n),p(n,a),p(n,c),p(n,$),p(e,_),Le&&Le.m(e,null),p(e,k),Me&&Me.m(e,null),p(e,C),ke&&ke.m(e,null),p(e,T),p(e,N),p(e,F),p(e,j),p(j,O),p(j,I),p(e,R),p(e,P),p(P,q),p(P,K),ae.m(D,P),p(e,x),p(e,V),p(V,U),p(V,Ce),je.m(Ae,V),p(e,$t),p(e,W),p(W,xe),p(W,qt),p(W,de),p(e,Ge),Ie&&Ie.m(e,null),p(e,et),p(e,at),p(at,Et),p(at,Yt),p(at,an),p(e,Mn),Oe&&Oe.m(e,null),p(e,fn),ye&&ye.m(e,null),p(e,un),w(ft,e,null),p(e,In),w(ut,e,null),s[10](e),ze=!0},p(ie,ge){var Fn,An,Gn,zn;(!ze||ge&10)&&i!==(i=ct(ie[1].name,ie[3])+"")&&f.p(i),(!ze||ge&2)&&u!==(u=ie[1].intervention_type+"")&&G(c,u),ie[1].length_meters?Le?Le.p(ie,ge):(Le=Xl(ie),Le.c(),Le.m(e,k)):Le&&(Le.d(1),Le=null),ie[1].description?Me?Me.p(ie,ge):(Me=xl(ie),Me.c(),Me.m(e,C)):Me&&(Me.d(1),Me=null),ie[1].pipeline?ke?(ke.p(pn(ie),ge),ge&2&&m(ke,1)):(ke=er(pn(ie)),ke.c(),m(ke,1),ke.m(e,T)):ke&&(be(),g(ke,1,1,()=>{ke=null}),we()),(!ze||ge&1)&&M!==(M=ie[0].toUpperCase()+"")&&G(O,M),(!ze||ge&36)&&D!==(D=ct(ie[5].scheme_name??"",ie[2])+"")&&ae.p(D),(!ze||ge&6)&&Ae!==(Ae=ct(ie[1].scheme_reference,ie[2])+"")&&je.p(Ae),(!ze||ge&32)&&Ht!==(Ht=((Fn=ie[5].browse)==null?void 0:Fn.authority_or_region)+"")&&G(de,Ht),(An=ie[5].browse)!=null&&An.capital_scheme_id?Ie?Ie.p(ie,ge):(Ie=rr(ie),Ie.c(),Ie.m(e,et)):Ie&&(Ie.d(1),Ie=null),(!ze||ge&32)&&xt!==(xt=((Gn=ie[5].browse)==null?void 0:Gn.funding_programme)+"")&&G(an,xt),(zn=ie[5].browse)!=null&&zn.current_milestone?Oe?Oe.p(ie,ge):(Oe=sr(ie),Oe.c(),Oe.m(e,fn)):Oe&&(Oe.d(1),Oe=null),ie[5].pipeline?ye?(ye.p(cn(ie),ge),ge&32&&m(ye,1)):(ye=or(cn(ie)),ye.c(),m(ye,1),ye.m(e,un)):ye&&(be(),g(ye,1,1,()=>{ye=null}),we());const Rn={};ge&8192&&(Rn.$$scope={dirty:ge,ctx:ie}),ft.$set(Rn);const Dn={};ge&8192&&(Dn.$$scope={dirty:ge,ctx:ie}),ut.$set(Dn)},i(ie){ze||(m(ke),m(ye),m(ft.$$.fragment,ie),m(ut.$$.fragment,ie),ze=!0)},o(ie){g(ke),g(ye),g(ft.$$.fragment,ie),g(ut.$$.fragment,ie),ze=!1},d(ie){ie&&h(e),Le&&Le.d(),Me&&Me.d(),ke&&ke.d(),Ie&&Ie.d(),Oe&&Oe.d(),ye&&ye.d(),v(ft),v(ut),s[10](null)}}}function b$(s){let e=s[1],l,t,n=ur(s);return{c(){n.c(),l=ve()},m(r,o){n.m(r,o),d(r,l,o),t=!0},p(r,[o]){o&2&&J(e,e=r[1])?(be(),g(n,1,1,Q),we(),n=ur(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,o)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function ct(s,e){return e?s.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):s}function w$(s,e,l){let t,n;Y(s,Sn,C=>l(11,n=C));let{source:r}=e,{props:o}=e,{schemes:f}=e,{schemesGj:i}=e,{filterSchemeText:a}=e,{filterInterventionText:u}=e,c;zr(()=>{c&&l(4,c.scrollTop=0,c)});function $(){let C={type:"FeatureCollection",features:i.features.filter(T=>T.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(Qr(C),{padding:20,animate:!1})}function _(){var F,j;let C={type:"FeatureCollection",features:i.features.filter(M=>M.properties.scheme_reference==t.scheme_reference),schemes:{}};C.schemes[t.scheme_reference]=t;let T=((F=t.browse)==null?void 0:F.authority_or_region)||"unknown authority",N=t.pipeline?"pipeline":"v1";N=="pipeline"&&(T+="_pipeline"),fs(T,JSON.stringify(C)),window.open(`scheme.html?authority=${(j=t.browse)==null?void 0:j.authority_or_region}&schema=${N}`,"_blank")}function k(C){H[C?"unshift":"push"](()=>{c=C,l(4,c)})}return s.$$set=C=>{"source"in C&&l(0,r=C.source),"props"in C&&l(1,o=C.props),"schemes"in C&&l(8,f=C.schemes),"schemesGj"in C&&l(9,i=C.schemesGj),"filterSchemeText"in C&&l(2,a=C.filterSchemeText),"filterInterventionText"in C&&l(3,u=C.filterInterventionText)},s.$$.update=()=>{s.$$.dirty&258&&l(5,t=f.get(o.scheme_reference))},[r,o,a,u,c,t,$,_,f,i,k]}class Ln extends Z{constructor(e){super(),X(this,e,w$,b$,J,{source:0,props:1,schemes:8,schemesGj:9,filterSchemeText:2,filterInterventionText:3})}}function v$(s){let e,l=s[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&h(e)}}}function k$(s){let e,l;return e=new Ln({props:{source:s[0],props:s[10],schemesGj:s[3],schemes:s[2],filterSchemeText:s[4],filterInterventionText:s[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function y$(s){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[v$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[k$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&3072&&(f.$$scope={dirty:o,ctx:r}),e.$set(f);const i={};o&3133&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function S$(s){let e,l=s[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&h(e)}}}function T$(s){let e,l;return e=new Ln({props:{source:s[0],props:s[10],schemesGj:s[3],schemes:s[2],filterSchemeText:s[4],filterInterventionText:s[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function C$(s){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[S$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[T$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&3072&&(f.$$scope={dirty:o,ctx:r}),e.$set(f);const i={};o&3133&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function L$(s){let e,l=s[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&h(e)}}}function M$(s){let e,l;return e=new Ln({props:{source:s[0],props:s[10],schemesGj:s[3],schemes:s[2],filterSchemeText:s[4],filterInterventionText:s[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function I$(s){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[L$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[M$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&3072&&(f.$$scope={dirty:o,ctx:r}),e.$set(f);const i={};o&3133&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function O$(s){let e,l,t,n,r,o,f,i,a,u;const c=[z(`${s[0]}-interventions-points`),{filter:["all",Yn,s[8],s[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":s[6],"circle-radius":Bn,"circle-opacity":te(1,.5)}},{layout:{visibility:s[1]?"visible":"none"}},{hoverCursor:"pointer"}];let $={$$slots:{default:[y$]},$$scope:{ctx:s}};for(let O=0;O<c.length;O+=1)$=ne($,c[O]);e=new At({props:$});const _=[z(`${s[0]}-interventions-lines`),{filter:["all",Jn,s[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[6],"line-width":Jt,"line-opacity":te(1,.5)}},{layout:{visibility:s[1]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[C$]},$$scope:{ctx:s}};for(let O=0;O<_.length;O+=1)k=ne(k,_[O]);t=new _e({props:k});const C=[z(`${s[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Jt,"circle-opacity":0,"circle-stroke-color":Ve.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:s[1]?"visible":"none"}}];let T={};for(let O=0;O<C.length;O+=1)T=ne(T,C[O]);r=new At({props:T});const N=[z(`${s[0]}-interventions-polygons`),{filter:["all",en,s[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":s[6],"fill-opacity":te(.2,.5)}},{layout:{visibility:s[1]?"visible":"none"}},{hoverCursor:"pointer"}];let F={$$slots:{default:[I$]},$$scope:{ctx:s}};for(let O=0;O<N.length;O+=1)F=ne(F,N[O]);f=new Re({props:F});const j=[z(`${s[0]}-interventions-polygons-outlines`),{filter:["all",en,s[8]]},{paint:{"line-color":s[6],"line-opacity":.5,"line-width":.7*Jt}},{layout:{visibility:s[1]?"visible":"none"}}];let M={};for(let O=0;O<j.length;O+=1)M=ne(M,j[O]);return a=new _e({props:M}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(O,I){w(e,O,I),d(O,l,I),w(t,O,I),d(O,n,I),w(r,O,I),d(O,o,I),w(f,O,I),d(O,i,I),w(a,O,I),u=!0},p(O,I){const R=I&835?le(c,[I&1&&se(z(`${O[0]}-interventions-points`)),I&768&&{filter:["all",Yn,O[8],O[9]]},c[2],c[3],I&64&&{paint:{"circle-color":O[6],"circle-radius":Bn,"circle-opacity":te(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},c[6]]):{};I&2109&&(R.$$scope={dirty:I,ctx:O}),e.$set(R);const P=I&323?le(_,[I&1&&se(z(`${O[0]}-interventions-lines`)),I&256&&{filter:["all",Jn,O[8]]},_[2],_[3],I&64&&{paint:{"line-color":O[6],"line-width":Jt,"line-opacity":te(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},_[6]]):{};I&2109&&(P.$$scope={dirty:I,ctx:O}),t.$set(P);const q=I&3?le(C,[I&1&&se(z(`${O[0]}-interventions-lines-endpoints`)),C[1],C[2],I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};r.$set(q);const K=I&323?le(N,[I&1&&se(z(`${O[0]}-interventions-polygons`)),I&256&&{filter:["all",en,O[8]]},N[2],N[3],I&64&&{paint:{"fill-color":O[6],"fill-opacity":te(.2,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},N[6]]):{};I&2109&&(K.$$scope={dirty:I,ctx:O}),f.$set(K);const ae=I&323?le(j,[I&1&&se(z(`${O[0]}-interventions-polygons-outlines`)),I&256&&{filter:["all",en,O[8]]},I&64&&{paint:{"line-color":O[6],"line-opacity":.5,"line-width":.7*Jt}},I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};a.$set(ae)},i(O){u||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(r.$$.fragment,O),m(f.$$.fragment,O),m(a.$$.fragment,O),u=!0)},o(O){g(e.$$.fragment,O),g(t.$$.fragment,O),g(r.$$.fragment,O),g(f.$$.fragment,O),g(a.$$.fragment,O),u=!1},d(O){O&&(h(l),h(n),h(o),h(i)),v(e,O),v(t,O),v(r,O),v(f,O),v(a,O)}}}function N$(s){let e,l;return e=new Gt({props:{data:s[7],$$slots:{default:[O$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function j$(s,e,l){let t,{source:n}=e,{show:r}=e,{schemes:o}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],$=["!=",["get","endpoint"],!0];return s.$$set=_=>{"source"in _&&l(0,n=_.source),"show"in _&&l(1,r=_.show),"schemes"in _&&l(2,o=_.schemes),"schemesGj"in _&&l(3,f=_.schemesGj),"filterSchemeText"in _&&l(4,i=_.filterSchemeText),"filterInterventionText"in _&&l(5,a=_.filterInterventionText),"color"in _&&l(6,u=_.color)},s.$$.update=()=>{s.$$.dirty&8&&l(7,t=Kr(f))},[n,r,o,f,i,a,u,t,c,$]}class cr extends Z{constructor(e){super(),X(this,e,j$,N$,J,{source:0,show:1,schemes:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function P$(s){return Ze(["get","intervention_type"],{area:Ve.area,route:Ve.route,crossing:Ve.crossing,other:Ve.other},"white")}function R$(s){return[["Areas",Ve.area],["Routes",Ve.route],["Crossings",Ve.crossing],["Other",Ve.other]]}function pr(s,e,l){const t=s.slice();return t[33]=e[l],t}function $r(s,e,l){const t=s.slice();return t[33]=e[l],t}function D$(s){let e,l;return e=new Jp({props:{loadFile:s[19]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p:Q,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function mr(s){let e,l,t;function n(o){s[25](o)}let r={name:Rr,title:B$,$$slots:{controls:[A$],help:[F$]},$$scope:{ctx:s}};return s[8]!==void 0&&(r.show=s[8]),e=new ue({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,f){const i={};f[0]&7713|f[1]&128&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&256&&(l=!0,i.show=o[8],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function _r(s){let e,l,t=s[33]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,o){d(r,e,o),p(e,l),p(l,n)},p(r,o){o[0]&1024&&t!==(t=r[33]+"")&&G(n,t)},d(r){r&&h(e)}}}function F$(s){let e,l,t,n,r,o,f;t=new Sr({props:{text:"Scheme data caveats"}});let i=he(s[10].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=_r($r(s,i,u));return{c(){e=S("span"),l=S("p"),b(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),o=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();A(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),w(t,l,null),p(l,n),p(e,r),p(e,o);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(o,null);f=!0},p(u,c){if(c[0]&1024){i=he(u[10].notes??[]);let $;for($=0;$<i.length;$+=1){const _=$r(u,i,$);a[$]?a[$].p(_,c):(a[$]=_r(_),a[$].c(),a[$].m(o,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),Qe(a,u)}}}function A$(s){let e,l,t,n,r,o,f,i,a,u,c,$;function _(M){s[20](M)}function k(M){s[21](M)}function C(M){s[22](M)}function T(M){s[23](M)}let N={source:"ATF"};s[10]!==void 0&&(N.schemesGj=s[10]),s[9]!==void 0&&(N.schemes=s[9]),s[11]!==void 0&&(N.filterSchemeText=s[11]),s[12]!==void 0&&(N.filterInterventionText=s[12]),l=new Nr({props:N}),H.push(()=>E(l,"schemesGj",_)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",C)),H.push(()=>E(l,"filterInterventionText",T));function F(M){s[24](M)}let j={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return s[0]!==void 0&&(j.value=s[0]),i=new Ft({props:j}),H.push(()=>E(i,"value",F)),c=new Xt({props:{rows:s[5]}}),{c(){e=S("div"),b(l.$$.fragment),f=L(),b(i.$$.fragment),u=L(),b(c.$$.fragment),A(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(M,O){d(M,e,O),w(l,e,null),p(e,f),w(i,e,null),p(e,u),w(c,e,null),$=!0},p(M,O){const I={};!t&&O[0]&1024&&(t=!0,I.schemesGj=M[10],B(()=>t=!1)),!n&&O[0]&512&&(n=!0,I.schemes=M[9],B(()=>n=!1)),!r&&O[0]&2048&&(r=!0,I.filterSchemeText=M[11],B(()=>r=!1)),!o&&O[0]&4096&&(o=!0,I.filterInterventionText=M[12],B(()=>o=!1)),l.$set(I);const R={};!a&&O[0]&1&&(a=!0,R.value=M[0],B(()=>a=!1)),i.$set(R);const P={};O[0]&32&&(P.rows=M[5]),c.$set(P)},i(M){$||(m(l.$$.fragment,M),m(i.$$.fragment,M),m(c.$$.fragment,M),$=!0)},o(M){g(l.$$.fragment,M),g(i.$$.fragment,M),g(c.$$.fragment,M),$=!1},d(M){M&&h(e),v(l),v(i),v(c)}}}function gr(s){let e,l,t;function n(o){s[31](o)}let r={name:Dr,title:U$,$$slots:{controls:[z$],help:[G$]},$$scope:{ctx:s}};return s[7]!==void 0&&(r.show=s[7]),e=new ue({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,f){const i={};f[0]&122890|f[1]&128&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&128&&(l=!0,i.show=o[7],B(()=>l=!1)),e.$set(i)},i(o){t||(m(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function dr(s){let e,l,t=s[33]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,o){d(r,e,o),p(e,l),p(l,n)},p(r,o){o[0]&16384&&t!==(t=r[33]+"")&&G(n,t)},d(r){r&&h(e)}}}function G$(s){let e,l,t,n,r,o,f;t=new Sr({props:{text:"Scheme data caveats"}});let i=he(s[14].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=dr(pr(s,i,u));return{c(){e=S("span"),l=S("p"),b(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),o=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();A(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),w(t,l,null),p(l,n),p(e,r),p(e,o);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(o,null);f=!0},p(u,c){if(c[0]&16384){i=he(u[14].notes??[]);let $;for($=0;$<i.length;$+=1){const _=pr(u,i,$);a[$]?a[$].p(_,c):(a[$]=dr(_),a[$].c(),a[$].m(o,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),Qe(a,u)}}}function z$(s){let e,l,t,n,r,o,f,i,a,u,c,$;function _(M){s[26](M)}function k(M){s[27](M)}function C(M){s[28](M)}function T(M){s[29](M)}let N={source:"LCWIP"};s[14]!==void 0&&(N.schemesGj=s[14]),s[13]!==void 0&&(N.schemes=s[13]),s[15]!==void 0&&(N.filterSchemeText=s[15]),s[16]!==void 0&&(N.filterInterventionText=s[16]),l=new Nr({props:N}),H.push(()=>E(l,"schemesGj",_)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",C)),H.push(()=>E(l,"filterInterventionText",T));function F(M){s[30](M)}let j={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return s[1]!==void 0&&(j.value=s[1]),i=new Ft({props:j}),H.push(()=>E(i,"value",F)),c=new Xt({props:{rows:s[3]}}),{c(){e=S("div"),b(l.$$.fragment),f=L(),b(i.$$.fragment),u=L(),b(c.$$.fragment),A(e,"slot","controls"),oe(e,"border","1px solid black"),oe(e,"padding","8px")},m(M,O){d(M,e,O),w(l,e,null),p(e,f),w(i,e,null),p(e,u),w(c,e,null),$=!0},p(M,O){const I={};!t&&O[0]&16384&&(t=!0,I.schemesGj=M[14],B(()=>t=!1)),!n&&O[0]&8192&&(n=!0,I.schemes=M[13],B(()=>n=!1)),!r&&O[0]&32768&&(r=!0,I.filterSchemeText=M[15],B(()=>r=!1)),!o&&O[0]&65536&&(o=!0,I.filterInterventionText=M[16],B(()=>o=!1)),l.$set(I);const R={};!a&&O[0]&2&&(a=!0,R.value=M[1],B(()=>a=!1)),i.$set(R);const P={};O[0]&8&&(P.rows=M[3]),c.$set(P)},i(M){$||(m(l.$$.fragment,M),m(i.$$.fragment,M),m(c.$$.fragment,M),$=!0)},o(M){g(l.$$.fragment,M),g(i.$$.fragment,M),g(c.$$.fragment,M),$=!1},d(M){M&&h(e),v(l),v(i),v(c)}}}function q$(s){let e,l,t,n=s[9].size>0&&mr(s),r=s[13].size>0&&gr(s);return{c(){n&&n.c(),e=L(),r&&r.c(),l=ve()},m(o,f){n&&n.m(o,f),d(o,e,f),r&&r.m(o,f),d(o,l,f),t=!0},p(o,f){o[9].size>0?n?(n.p(o,f),f[0]&512&&m(n,1)):(n=mr(o),n.c(),m(n,1),n.m(e.parentNode,e)):n&&(be(),g(n,1,1,()=>{n=null}),we()),o[13].size>0?r?(r.p(o,f),f[0]&8192&&m(r,1)):(r=gr(o),r.c(),m(r,1),r.m(l.parentNode,l)):r&&(be(),g(r,1,1,()=>{r=null}),we())},i(o){t||(m(n),m(r),t=!0)},o(o){g(n),g(r),t=!1},d(o){o&&(h(e),h(l)),n&&n.d(o),r&&r.d(o)}}}function H$(s){let e=yr()=="Private (development)",l,t,n,r,o,f,i,a=e&&D$(s);return t=new De({props:{small:!0,$$slots:{default:[q$]},$$scope:{ctx:s}}}),r=new qr({props:{label:"Load schemes from GeoJSON",onLoad:s[19]}}),f=new Hr({props:{errorMessage:s[2]}}),{c(){a&&a.c(),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment)},m(u,c){a&&a.m(u,c),d(u,l,c),w(t,u,c),d(u,n,c),w(r,u,c),d(u,o,c),w(f,u,c),i=!0},p(u,c){e&&a.p(u,c);const $={};c[0]&130987|c[1]&128&&($.$$scope={dirty:c,ctx:u}),t.$set($);const _={};c[0]&4&&(_.errorMessage=u[2]),f.$set(_)},i(u){i||(m(a),m(t.$$.fragment,u),m(r.$$.fragment,u),m(f.$$.fragment,u),i=!0)},o(u){g(a),g(t.$$.fragment,u),g(r.$$.fragment,u),g(f.$$.fragment,u),i=!1},d(u){u&&(h(l),h(n),h(o)),a&&a.d(u),v(t,u),v(r,u),v(f,u)}}}function E$(s){let e,l,t,n,r,o;return e=new tt({props:{label:"Schemes",open:!0,$$slots:{default:[H$]},$$scope:{ctx:s}}}),t=new cr({props:{source:"atf",show:s[8],schemesGj:s[10],schemes:s[9],filterSchemeText:s[11],filterInterventionText:s[12],color:s[6]}}),r=new cr({props:{source:"lcwip",show:s[7],schemesGj:s[14],schemes:s[13],filterSchemeText:s[15],filterInterventionText:s[16],color:s[4]}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,i){w(e,f,i),d(f,l,i),w(t,f,i),d(f,n,i),w(r,f,i),o=!0},p(f,i){const a={};i[0]&130991|i[1]&128&&(a.$$scope={dirty:i,ctx:f}),e.$set(a);const u={};i[0]&256&&(u.show=f[8]),i[0]&1024&&(u.schemesGj=f[10]),i[0]&512&&(u.schemes=f[9]),i[0]&2048&&(u.filterSchemeText=f[11]),i[0]&4096&&(u.filterInterventionText=f[12]),i[0]&64&&(u.color=f[6]),t.$set(u);const c={};i[0]&128&&(c.show=f[7]),i[0]&16384&&(c.schemesGj=f[14]),i[0]&8192&&(c.schemes=f[13]),i[0]&32768&&(c.filterSchemeText=f[15]),i[0]&65536&&(c.filterInterventionText=f[16]),i[0]&16&&(c.color=f[4]),r.$set(c)},i(f){o||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),o=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}let Rr="atf_schemes",B$="ATF schemes",Dr="lcwip_schemes",U$="LCWIP schemes";function W$(s,e,l){let t,n,r,o,f,i,a,u,c,$,_,k,C,T;Y(s,dn,W=>l(9,a=W)),Y(s,sn,W=>l(10,u=W)),Y(s,Al,W=>l(11,c=W)),Y(s,Fl,W=>l(12,$=W)),Y(s,bn,W=>l(13,_=W)),Y(s,hn,W=>l(14,k=W)),Y(s,zl,W=>l(15,C=W)),Y(s,Gl,W=>l(16,T=W));let N="",F=$e(Rr);Y(s,F,W=>l(8,i=W));let j="fundingProgramme",M=$e(Dr);Y(s,M,W=>l(7,f=W));let O="interventionType";function I(W,xe){try{Vp(JSON.parse(xe)),Ut(F,i=!0,i),Ut(M,f=!0,f),l(2,N="")}catch(qt){l(2,N=`The file you loaded is broken: ${qt}`)}}function R(W){return W=="interventionType"?[P$(),R$()]:W=="fundingProgramme"?[Ze(["get","funding_programme"],Wt,"grey"),Object.entries(Wt)]:W=="currentMilestone"?[Ze(["get","current_milestone"],wn,"grey"),Object.entries(wn)]:["red",[]]}function P(W){u=W,sn.set(u)}function q(W){a=W,dn.set(a)}function K(W){c=W,Al.set(c)}function ae(W){$=W,Fl.set($)}function D(W){j=W,l(0,j)}function x(W){i=W,F.set(i)}function V(W){k=W,hn.set(k)}function U(W){_=W,bn.set(_)}function Ce(W){C=W,zl.set(C)}function je(W){T=W,Gl.set(T)}function Ae(W){O=W,l(1,O)}function $t(W){f=W,M.set(f)}return s.$$.update=()=>{s.$$.dirty[0]&1&&l(6,[t,n]=R(j),t,(l(5,n),l(0,j))),s.$$.dirty[0]&2&&l(4,[r,o]=R(O),r,(l(3,o),l(1,O)))},[j,O,N,o,r,n,t,f,i,a,u,c,$,_,k,C,T,F,M,I,P,q,K,ae,D,x,V,U,Ce,je,Ae,$t]}class Y$ extends Z{constructor(e){super(),X(this,e,W$,E$,J,{},null,[-1,-1])}}const hr=Ne(!0);let vn=Ne(null);function J$(s){let e,l,t,n,r,o,f,i;return e=new vc({}),t=new Nc({}),r=new xc({}),f=new Ec({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,o,u),w(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(o)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function V$(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[J$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Q$(s){let e,l,t,n,r,o,f,i,a,u,c,$;return e=new Fa({}),t=new $f({}),r=new Ya({}),f=new nf({}),a=new ic({}),c=new qu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),u=L(),b(c.$$.fragment)},m(_,k){w(e,_,k),d(_,l,k),w(t,_,k),d(_,n,k),w(r,_,k),d(_,o,k),w(f,_,k),d(_,i,k),w(a,_,k),d(_,u,k),w(c,_,k),$=!0},i(_){$||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(r.$$.fragment,_),m(f.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),$=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(r.$$.fragment,_),g(f.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),$=!1},d(_){_&&(h(l),h(n),h(o),h(i),h(u)),v(e,_),v(t,_),v(r,_),v(f,_),v(a,_),v(c,_)}}}function K$(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[Q$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Z$(s){let e,l,t,n,r,o;return e=new ka({}),t=new bu({}),r=new Iu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,i){w(e,f,i),d(f,l,i),w(t,f,i),d(f,n,i),w(r,f,i),o=!0},i(f){o||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),o=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}function X$(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[Z$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function x$(s){let e,l,t,n,r,o,f,i,a,u;return e=new Ni({}),t=new aa({}),r=new Go({}),f=new oi({}),a=new wi({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(c,$){w(e,c,$),d(c,l,$),w(t,c,$),d(c,n,$),w(r,c,$),d(c,o,$),w(f,c,$),d(c,i,$),w(a,c,$),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(r.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(o),h(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function em(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[x$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function tm(s){let e,l,t,n;return e=new Lo({}),t=new Qo({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function nm(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[tm]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function lm(s){let e,l,t,n,r,o,f,i;return e=new cu({}),t=new Cf({}),r=new tu({}),f=new zp({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,o,u),w(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(o)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function rm(s){let e,l,t,n,r,o,f,i,a=yr()=="Private (development)",u,c,$,_,k;e=new Ip({}),t=new dp({}),r=new Ef({}),f=new Ku({});let C=a&&lm();return c=new Hi({}),_=new Zi({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L(),C&&C.c(),u=L(),b(c.$$.fragment),$=L(),b(_.$$.fragment)},m(T,N){w(e,T,N),d(T,l,N),w(t,T,N),d(T,n,N),w(r,T,N),d(T,o,N),w(f,T,N),d(T,i,N),C&&C.m(T,N),d(T,u,N),w(c,T,N),d(T,$,N),w(_,T,N),k=!0},p:Q,i(T){k||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(C),m(c.$$.fragment,T),m(_.$$.fragment,T),k=!0)},o(T){g(e.$$.fragment,T),g(t.$$.fragment,T),g(r.$$.fragment,T),g(f.$$.fragment,T),g(C),g(c.$$.fragment,T),g(_.$$.fragment,T),k=!1},d(T){T&&(h(l),h(n),h(o),h(i),h(u),h($)),v(e,T),v(t,T),v(r,T),v(f,T),C&&C.d(T),v(c,T),v(_,T)}}}function sm(s){let e,l;return e=new De({props:{small:!0,$$slots:{default:[rm]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function om(s){let e,l,t,n,r;function o(i){s[6](i)}let f={cfg:s[5],map:s[3]};return s[0]!==void 0&&(f.enabled=s[0]),e=new Xr({props:f}),H.push(()=>E(e,"enabled",o)),n=new Hs({}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],B(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}function im(s){let e,l;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:s[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&2?le(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function am(s){let e,l,t,n,r,o,f,i,a,u,c,$,_,k,C,T,N,F,j,M,O;return l=new Y$({}),n=new tt({props:{label:"Trip generators",$$slots:{default:[V$]},$$scope:{ctx:s}}}),o=new tt({props:{label:"Existing infrastructure",$$slots:{default:[K$]},$$scope:{ctx:s}}}),i=new tt({props:{label:"Public transport",$$slots:{default:[X$]},$$scope:{ctx:s}}}),u=new tt({props:{label:"Boundaries",$$slots:{default:[em]},$$scope:{ctx:s}}}),$=new tt({props:{label:"Census",$$slots:{default:[nm]},$$scope:{ctx:s}}}),k=new tt({props:{label:"Other",$$slots:{default:[sm]},$$scope:{ctx:s}}}),T=new tt({props:{label:"Tools",$$slots:{default:[om]},$$scope:{ctx:s}}}),F=new Zr({props:{disabled:!s[1]}}),M=new Gt({props:{data:s[4],$$slots:{default:[im]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(o.$$.fragment),f=L(),b(i.$$.fragment),a=L(),b(u.$$.fragment),c=L(),b($.$$.fragment),_=L(),b(k.$$.fragment),C=L(),b(T.$$.fragment),N=L(),b(F.$$.fragment),j=L(),b(M.$$.fragment)},m(I,R){d(I,e,R),w(l,e,null),p(e,t),w(n,e,null),p(e,r),w(o,e,null),p(e,f),w(i,e,null),p(e,a),w(u,e,null),p(e,c),w($,e,null),p(e,_),w(k,e,null),p(e,C),w(T,e,null),p(e,N),w(F,e,null),s[7](e),d(I,j,R),w(M,I,R),O=!0},p(I,[R]){const P={};R&256&&(P.$$scope={dirty:R,ctx:I}),n.$set(P);const q={};R&256&&(q.$$scope={dirty:R,ctx:I}),o.$set(q);const K={};R&256&&(K.$$scope={dirty:R,ctx:I}),i.$set(K);const ae={};R&256&&(ae.$$scope={dirty:R,ctx:I}),u.$set(ae);const D={};R&256&&(D.$$scope={dirty:R,ctx:I}),$.$set(D);const x={};R&256&&(x.$$scope={dirty:R,ctx:I}),k.$set(x);const V={};R&265&&(V.$$scope={dirty:R,ctx:I}),T.$set(V);const U={};R&2&&(U.disabled=!I[1]),F.$set(U);const Ce={};R&258&&(Ce.$$scope={dirty:R,ctx:I}),M.$set(Ce)},i(I){O||(m(l.$$.fragment,I),m(n.$$.fragment,I),m(o.$$.fragment,I),m(i.$$.fragment,I),m(u.$$.fragment,I),m($.$$.fragment,I),m(k.$$.fragment,I),m(T.$$.fragment,I),m(F.$$.fragment,I),m(M.$$.fragment,I),O=!0)},o(I){g(l.$$.fragment,I),g(n.$$.fragment,I),g(o.$$.fragment,I),g(i.$$.fragment,I),g(u.$$.fragment,I),g($.$$.fragment,I),g(k.$$.fragment,I),g(T.$$.fragment,I),g(F.$$.fragment,I),g(M.$$.fragment,I),O=!1},d(I){I&&(h(e),h(j)),v(l),v(n),v(o),v(i),v(u),v($),v(k),v(T),v(F),s[7](null),v(M,I)}}}function fm(s,e,l){let t,n,r,o;Y(s,hr,c=>l(1,n=c)),Y(s,vn,c=>l(2,r=c)),Y(s,Sn,c=>l(3,o=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>Wr(c,Er(_n))};function a(c){t=c,l(0,t),l(1,n)}function u(c){H[c?"unshift":"push"](()=>{r=c,vn.set(r)})}return s.$$.update=()=>{s.$$.dirty&2&&l(0,t=!n),s.$$.dirty&1&&hr.set(!t)},[t,n,r,o,f,i,a,u]}class um extends Z{constructor(e){super(),X(this,e,fm,am,J,{})}}function cm(s){let e,l,t;return{c(){e=S("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=S("div")},m(n,r){d(n,e,r),d(n,l,r),d(n,t,r),s[3](t)},p:Q,i:Q,o:Q,d(n){n&&(h(e),h(l),h(t)),s[3](null)}}}function pm(s,e,l){if(s){s.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",s.appendChild(n))}}}function $m(s,e,l){let t,n;Y(s,gn,f=>l(1,t=f)),Y(s,Vt,f=>l(2,n=f));let r=null;function o(f){H[f?"unshift":"push"](()=>{r=f,l(0,r)})}return s.$$.update=()=>{s.$$.dirty&7&&pm(r,n,t)},[r,t,n,o]}class mm extends Z{constructor(e){super(),X(this,e,$m,cm,J,{})}}function _m(s){let e,l,t,n,r,o,f,i,a,u,c,$,_,k,C;return l=new Yr({}),n=new os({}),f=new is({}),$=new xr({props:{boundaryGeojson:s[3]}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),o=S("div"),b(f.$$.fragment),i=L(),a=S("div"),u=S("h1"),u.textContent="Scheme Browser",c=L(),b($.$$.fragment),_=L(),k=S("div"),oe(o,"border-bottom","1px solid #b1b4b6"),oe(a,"display","flex"),oe(a,"justify-content","space-between"),A(e,"slot","sidebar"),A(e,"class","govuk-prose")},m(T,N){d(T,e,N),w(l,e,null),p(e,t),w(n,e,null),p(e,r),p(e,o),w(f,o,null),p(e,i),p(e,a),p(a,u),p(a,c),w($,a,null),p(e,_),p(e,k),s[6](k),C=!0},p(T,N){const F={};N&8&&(F.boundaryGeojson=T[3]),$.$set(F)},i(T){C||(m(l.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),m($.$$.fragment,T),C=!0)},o(T){g(l.$$.fragment,T),g(n.$$.fragment,T),g(f.$$.fragment,T),g($.$$.fragment,T),C=!1},d(T){T&&h(e),v(l),v(n),v(f),v($),s[6](null)}}}function br(s){let e,l;return e=new um({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function gm(s){let e,l,t,n;e=new es({});let r=s[2]&&br();return{c(){b(e.$$.fragment),l=L(),r&&r.c(),t=ve()},m(o,f){w(e,o,f),d(o,l,f),r&&r.m(o,f),d(o,t,f),n=!0},p(o,f){o[2]?r?f&4&&m(r,1):(r=br(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(be(),g(r,1,1,()=>{r=null}),we())},i(o){n||(m(e.$$.fragment,o),m(r),n=!0)},o(o){g(e.$$.fragment,o),g(r),n=!1},d(o){o&&(h(l),h(t)),v(e,o),r&&r.d(o)}}}function dm(s){let e,l,t;return l=new as({props:{style:s[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[gm]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),A(e,"slot","main")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const o={};r&2&&(o.style=n[1]),r&260&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function hm(s){let e,l,t,n,r;return e=new vs({props:{$$slots:{main:[dm],sidebar:[_m]},$$scope:{ctx:s}}}),n=new mm({}),{c(){b(e.$$.fragment),l=L(),t=S("div"),b(n.$$.fragment),A(t,"class","top-right govuk-prose svelte-u44ed2")},m(o,f){w(e,o,f),d(o,l,f),d(o,t,f),w(n,t,null),r=!0},p(o,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:o}),e.$set(i)},i(o){r||(m(e.$$.fragment,o),m(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&(h(l),h(t)),v(e,o),v(n)}}}function bm(s,e,l){let t,n,r,o,f;Y(s,vn,c=>l(4,t=c)),Y(s,Sn,c=>l(5,n=c)),Y(s,_n,c=>l(1,r=c)),Y(s,Un,c=>l(2,o=c)),Y(s,sn,c=>l(3,f=c)),kr(()=>{Br()});const i=new URLSearchParams(window.location.search);_n.set(i.get("style")||"dataviz");let a;function u(c){H[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return s.$$.update=()=>{s.$$.dirty&32&&n&&Un.set(n),s.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,o,f,t,n,u]}class wm extends Z{constructor(e){super(),X(this,e,bm,hm,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new wm({target:document.getElementById("app")});
