import{S as K,i as X,s as J,e as S,b as G,k as se,c as d,n as Z,d as h,X as it,a as L,aX as qn,m as $,am as at,Y as ft,Z as ut,_ as ct,t as m,p as g,y as he,C as be,q as we,z as Qe,j as b,x as y,o as w,B as A,u as v,U as ve,v as Y,V as yn,W as Ut,g as H,h as E,r as B,ao as Bt,aY as Hn,aZ as Fr,aH as mn,a7 as ne,f as Je,aS as an,aK as Zt,a3 as je,a_ as ce,a8 as le,a9 as oe,R as Sn,aw as Qt,al as Ve,an as wr,a$ as Xt,b0 as Dt,w as vr,b1 as Gr,aN as Ar,av as _n,b2 as zr,M as qr,aL as Hr,P as Er,Q as Br,b3 as kr,F as Ur,E as Wr,aW as Yr,aR as gn,D as Jr}from"./files-d83d80c1.js";import{c as z,d as Ze,t as Vr,a as Ye,C as De,e as me,S as Ft,p as En,f as Bn,h as Jt,g as Zr,H as Qr,m as Un}from"./colors-250679b4.js";import{e as Wn,h as tt,M as Kr,b as yr,H as Xr,R as xr,f as Ke,C as Gt,d as eo,c as Yn,a as Jn,i as tn,W as Sr,B as to,S as no,G as lo}from"./WarningIcon-05919824.js";import{g as Cn,u as Cr,r as Tr,b as Lr,c as Mr,e as ro,G as At,a as _e,d as oo,E as re,h as te,F as Re,f as so,i as io,j as ao,D as fo,A as uo,L as co,M as $o}from"./MapLibreMap-7b6d9200.js";import{P as fe,A as Ir}from"./Popup-8b01803a.js";function po(o){let e;return{c(){e=S("span"),G(e,"class","svelte-kzgqtg"),se(e,"background",o[0])},m(l,t){d(l,e,t)},p(l,[t]){t&1&&se(e,"background",l[0])},i:Z,o:Z,d(l){l&&h(e)}}}function mo(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Se extends K{constructor(e){super(),X(this,e,mo,po,J,{color:0})}}const _o=o=>({}),Vn=o=>({}),go=o=>({}),Zn=o=>({});function ho(o){let e,l,t,n,r,s,f,i,a,u,c;const p=o[4].sidebar,_=it(p,o,o[3],Zn),k=o[4].main,T=it(k,o,o[3],Vn);return{c(){e=S("div"),l=S("aside"),t=S("div"),_&&_.c(),n=L(),r=S("button"),r.textContent="→",f=L(),i=S("main"),T&&T.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(r,"type","button"),G(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(l,"class",s=qn(o[1]?"":"collapsed")+" svelte-1n0etgd"),se(l,"--sidebarWidth",o[0]),G(i,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(C,j){d(C,e,j),$(e,l),$(l,t),_&&_.m(t,null),$(l,n),$(l,r),$(e,f),$(e,i),T&&T.m(i,null),a=!0,u||(c=at(r,"click",o[2]),u=!0)},p(C,[j]){_&&_.p&&(!a||j&8)&&ft(_,p,C,C[3],a?ct(p,C[3],j,go):ut(C[3]),Zn),(!a||j&2&&s!==(s=qn(C[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(l,"class",s),(!a||j&1)&&se(l,"--sidebarWidth",C[0]),T&&T.p&&(!a||j&8)&&ft(T,k,C,C[3],a?ct(k,C[3],j,_o):ut(C[3]),Vn)},i(C){a||(m(_,C),m(T,C),a=!0)},o(C){g(_,C),g(T,C),a=!1},d(C){C&&h(e),_&&_.d(C),T&&T.d(C),u=!1,c()}}}function bo(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){l(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,s,f,n,t]}class wo extends K{constructor(e){super(),X(this,e,bo,ho,J,{sidebarWidth:0})}}function Qn(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Kn(o){let e,l,t,n=o[1]+"",r,s,f;return l=new Se({props:{color:o[2]}}),{c(){e=S("li"),b(l.$$.fragment),t=L(),r=y(n),s=L()},m(i,a){d(i,e,a),w(l,e,null),$(e,t),$(e,r),$(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&A(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){g(l.$$.fragment,i),f=!1},d(i){i&&h(e),v(l)}}}function vo(o){let e,l,t=he(o[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Kn(Qn(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){e=S("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,f){d(s,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[f]){if(f&1){t=he(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Qn(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Kn(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),Qe(n,s)}}}function ko(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class xt extends K{constructor(e){super(),X(this,e,ko,vo,J,{rows:0})}}function Xn(o){let e=o[0],l,t,n=xn(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&J(e,e=r[0])?(be(),g(n,1,1,Z),we(),n=xn(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function xn(o){let e;const l=o[16].default,t=it(l,o,o[15],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&32768)&&ft(t,l,n,n[15],e?ct(l,n[15],r,null):ut(n[15]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function yo(o){let e,l,t=o[0]&&Xn(o);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=Xn(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function So(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Cn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:p=null}=e,{minzoom:_=null}=e,{maxzoom:k=null}=e,{volatile:T=null}=e;const{map:C,self:j}=Cr();Y(o,C,M=>l(14,n=M)),Y(o,j,M=>l(0,t=M));let F,N=!0;return yn(()=>{t&&F&&n&&(Tr(C,t,F),Ut(j,t=null,t),l(12,F=void 0))}),o.$$set=M=>{"id"in M&&l(3,f=M.id),"tiles"in M&&l(4,i=M.tiles),"tileSize"in M&&l(5,a=M.tileSize),"bounds"in M&&l(6,u=M.bounds),"scheme"in M&&l(7,c=M.scheme),"attribution"in M&&l(8,p=M.attribution),"minzoom"in M&&l(9,_=M.minzoom),"maxzoom"in M&&l(10,k=M.maxzoom),"volatile"in M&&l(11,T=M.volatile),"$$scope"in M&&l(15,s=M.$$scope)},o.$$.update=()=>{o.$$.dirty&24569&&n&&t!==f&&(Ut(j,t=f,t),Lr(n,t,Mr({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:p,minzoom:_,maxzoom:k,volatile:T}),M=>n&&M===t,()=>{t&&(l(12,F=n==null?void 0:n.getSource(t)),l(13,N=!0))})),o.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,F=n==null?void 0:n.getSource(f))})),o.$$.dirty&12304&&F&&(N?l(13,N=!1):F.setTiles(i))},[t,C,j,f,i,a,u,c,p,_,k,T,F,N,n,s,r]}class Co extends K{constructor(e){super(),X(this,e,So,yo,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function To(o){let e;const l=o[16].default,t=it(l,o,o[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&ft(t,l,n,n[24],e?ct(l,n[24],r,null):ut(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Lo(o){let e,l,t;function n(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[To]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new ro({props:r}),H.push(()=>E(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!l&&f&1&&(l=!0,i.hovered=s[0],B(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Mo(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=Cn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:j=!1}=e,{hovered:F=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:M=!0}=e;function O(D){F=D,l(0,F)}function I(D){Bt.call(this,o,D)}function R(D){Bt.call(this,o,D)}function P(D){Bt.call(this,o,D)}function q(D){Bt.call(this,o,D)}function Q(D){Bt.call(this,o,D)}function ae(D){Bt.call(this,o,D)}return o.$$set=D=>{"id"in D&&l(1,r=D.id),"source"in D&&l(2,s=D.source),"sourceLayer"in D&&l(3,f=D.sourceLayer),"beforeId"in D&&l(4,i=D.beforeId),"beforeLayerType"in D&&l(5,a=D.beforeLayerType),"paint"in D&&l(6,u=D.paint),"layout"in D&&l(7,c=D.layout),"filter"in D&&l(8,p=D.filter),"applyToClusters"in D&&l(9,_=D.applyToClusters),"minzoom"in D&&l(10,k=D.minzoom),"maxzoom"in D&&l(11,T=D.maxzoom),"hoverCursor"in D&&l(12,C=D.hoverCursor),"manageHoverState"in D&&l(13,j=D.manageHoverState),"hovered"in D&&l(0,F=D.hovered),"eventsIfTopMost"in D&&l(14,N=D.eventsIfTopMost),"interactive"in D&&l(15,M=D.interactive),"$$scope"in D&&l(24,n=D.$$scope)},[F,r,s,f,i,a,u,c,p,_,k,T,C,j,N,M,t,O,I,R,P,q,Q,ae,n]}class Tn extends K{constructor(e){super(),X(this,e,Mo,Lo,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function el(o){let e=o[0],l,t,n=tl(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,s){s&1&&J(e,e=r[0])?(be(),g(n,1,1,Z),we(),n=tl(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function tl(o){let e;const l=o[15].default,t=it(l,o,o[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&ft(t,l,n,n[14],e?ct(l,n[14],r,null):ut(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Io(o){let e,l,t=o[0]&&el(o);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=el(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),g(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Oo(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Cn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:p=null}=e,{attribution:_=null}=e,{minzoom:k=null}=e,{maxzoom:T=null}=e,{volatile:C=null}=e;if(i&&i.includes("pmtiles://")&&!Hn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let M=new Fr;Hn.addProtocol("pmtiles",M.tile)}const{map:j,self:F}=Cr();Y(o,j,M=>l(13,n=M)),Y(o,F,M=>l(0,t=M));let N;return yn(()=>{t&&n&&(Tr(j,t,N),Ut(F,t=null,t),N=void 0)}),o.$$set=M=>{"id"in M&&l(3,f=M.id),"url"in M&&l(4,i=M.url),"tiles"in M&&l(5,a=M.tiles),"promoteId"in M&&l(6,u=M.promoteId),"bounds"in M&&l(7,c=M.bounds),"scheme"in M&&l(8,p=M.scheme),"attribution"in M&&l(9,_=M.attribution),"minzoom"in M&&l(10,k=M.minzoom),"maxzoom"in M&&l(11,T=M.maxzoom),"volatile"in M&&l(12,C=M.volatile),"$$scope"in M&&l(14,s=M.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==f&&(Ut(F,t=f,t),Lr(n,t,Mr({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:p,attribution:_,minzoom:k,maxzoom:T,volatile:C}),M=>n&&M===t,()=>{t&&(N=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{N=n==null?void 0:n.getSource(f)}))},[t,j,F,f,i,a,u,c,p,_,k,T,C,n,s,r]}class $e extends K{constructor(e){super(),X(this,e,Oo,Io,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function nl(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function jo(o){let e,l,t;return l=new Je({props:{$$slots:{default:[Po]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=S("div"),b(l.$$.fragment)},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function No(o){let e,l,t,n,r,s,f,i,a,u;l=new Je({props:{$$slots:{default:[Ro]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&ll(o);r=new tt({props:{label:"Help",$$slots:{default:[Do]},$$scope:{ctx:o}}}),f=new oo({}),f.$on("click",o[3]);let p=he(o[0]),_=[];for(let T=0;T<p.length;T+=1)_[T]=rl(nl(o,p,T));const k=T=>g(_[T],1,1,()=>{_[T]=null});return{c(){e=S("div"),b(l.$$.fragment),t=L(),c&&c.c(),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L();for(let T=0;T<_.length;T+=1)_[T].c();a=ve()},m(T,C){d(T,e,C),w(l,e,null),d(T,t,C),c&&c.m(T,C),d(T,n,C),w(r,T,C),d(T,s,C),w(f,T,C),d(T,i,C);for(let j=0;j<_.length;j+=1)_[j]&&_[j].m(T,C);d(T,a,C),u=!0},p(T,C){const j={};C&16384&&(j.$$scope={dirty:C,ctx:T}),l.$set(j),T[2]?c?c.p(T,C):(c=ll(T),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const F={};if(C&16384&&(F.$$scope={dirty:C,ctx:T}),r.$set(F),C&65){p=he(T[0]);let N;for(N=0;N<p.length;N+=1){const M=nl(T,p,N);_[N]?(_[N].p(M,C),m(_[N],1)):(_[N]=rl(M),_[N].c(),m(_[N],1),_[N].m(a.parentNode,a))}for(be(),N=p.length;N<_.length;N+=1)k(N);we()}},i(T){if(!u){m(l.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T);for(let C=0;C<p.length;C+=1)m(_[C]);u=!0}},o(T){g(l.$$.fragment,T),g(r.$$.fragment,T),g(f.$$.fragment,T),_=_.filter(Boolean);for(let C=0;C<_.length;C+=1)g(_[C]);u=!1},d(T){T&&(h(e),h(t),h(n),h(s),h(i),h(a)),v(l),c&&c.d(T),v(r,T),v(f,T),Qe(_,T)}}}function Po(o){let e;return{c(){e=y("Measure lines")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ro(o){let e;return{c(){e=y("Stop measuring")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ll(o){let e,l,t=o[2].toFixed(2)+"",n,r;return{c(){e=S("p"),l=y("Length: "),n=y(t),r=y(" meters")},m(s,f){d(s,e,f),$(e,l),$(e,n),$(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&A(n,t)},d(s){s&&h(e)}}}function Do(o){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){d(l,e,t)},p:Z,d(l){l&&h(e)}}}function Fo(o){let e,l;return{c(){e=S("span"),l=L(),G(e,"class","dot svelte-1tzt432")},m(t,n){d(t,e,n),d(t,l,n)},p:Z,d(t){t&&(h(e),h(l))}}}function rl(o){let e,l,t;function n(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[Fo]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new Kr({props:s}),H.push(()=>E(e,"lngLat",n)),e.$on("click",r),{c(){b(e.$$.fragment)},m(f,i){w(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!l&&i&1&&(l=!0,a.lngLat=o[11],B(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){g(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function Go(o){let e,l;const t=[z("measurement-line"),{paint:{"line-color":Ze.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ao(o){let e,l,t,n,r,s,f;const i=[No,jo],a=[];function u(c,p){return c[1]?0:1}return e=u(o),l=a[e]=i[e](o),n=new At({props:{data:o[0].length<2?Wn():mn(o[0]),$$slots:{default:[Go]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),b(n.$$.fragment)},m(c,p){a[e].m(c,p),d(c,t,p),w(n,c,p),r=!0,s||(f=at(window,"keydown",o[5]),s=!0)},p(c,[p]){let _=e;e=u(c),e===_?a[e].p(c,p):(be(),g(a[_],1,1,()=>{a[_]=null}),we(),l=a[e],l?l.p(c,p):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const k={};p&1&&(k.data=c[0].length<2?Wn():mn(c[0])),p&16384&&(k.$$scope={dirty:p,ctx:c}),n.$set(k)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){g(l),g(n.$$.fragment,c),r=!1},d(c){c&&h(t),a[e].d(c),v(n,c),s=!1,f()}}}function zo(o,e,l){let t,n=!1,r=[];function s(k){return k.length<2?null:1e3*Vr(mn(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),l(0,r)}function c(k,T,C,j){C[j]=k,l(0,r)}const p=k=>u(k),_=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=s(r))},[r,n,t,f,i,a,u,c,p,_]}class qo extends K{constructor(e){super(),X(this,e,zo,Ao,J,{})}}const Ho="/atip/manage_files/assets/zoom_out_map-b2e1091a.svg";function Eo(o){let e,l;return{c(){e=S("img"),Zt(e.src,l=Ho)||G(e,"src",l),G(e,"alt","Zoom to show entire boundary")},m(t,n){d(t,e,n)},p:Z,d(t){t&&h(e)}}}function Bo(o){let e,l;return e=new Je({props:{title:"Zoom to show entire boundary",$$slots:{default:[Eo]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Uo(o,e,l){let t;Y(o,an,s=>l(2,t=s));let{boundaryGeojson:n}=e;function r(){let s=yr(n);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&l(1,n=s.boundaryGeojson)},[r,n]}class Wo extends K{constructor(e){super(),X(this,e,Uo,Bo,J,{boundaryGeojson:1})}}const ee={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Pe=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Yo(o){let e;return{c(){e=y(`Open Government License
  `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Jo(o){let e,l,t,n,r;return t=new re({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Yo]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("License: "),b(t.$$.fragment),n=y(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,f){d(s,e,f),$(e,l),w(t,e,null),$(e,n),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){g(t.$$.fragment,s),r=!1},d(s){s&&h(e),v(t)}}}class Ce extends K{constructor(e){super(),X(this,e,null,Jo,J,{})}}function ol(o,e,l){const t=o.slice();return t[2]=e[l],t}function sl(o,e,l){const t=o.slice();return t[5]=e[l],t}function il(o){let e,l;return{c(){e=S("span"),l=y(` 
    `),se(e,"background",o[5]),se(e,"width","100%"),se(e,"border","1px solid black")},m(t,n){d(t,e,n),$(e,l)},p(t,n){n&1&&se(e,"background",t[5])},d(t){t&&h(e)}}}function al(o){let e,l=o[2]+"",t;return{c(){e=S("span"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&A(t,l)},d(n){n&&h(e)}}}function Vo(o){let e,l,t,n=he(o[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=il(sl(o,n,i));let s=he(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=al(ol(o,s,i));return{c(){e=S("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=S("div");for(let i=0;i<f.length;i+=1)f[i].c();se(e,"display","flex"),se(t,"display","flex"),se(t,"justify-content","space-between")},m(i,a){d(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);d(i,l,a),d(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=he(i[0]);let u;for(u=0;u<n.length;u+=1){const c=sl(i,n,u);r[u]?r[u].p(c,a):(r[u]=il(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){s=he(i[1]);let u;for(u=0;u<s.length;u+=1){const c=ol(i,s,u);f[u]?f[u].p(c,a):(f[u]=al(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:Z,o:Z,d(i){i&&(h(e),h(l),h(t)),Qe(r,i),Qe(f,i)}}}function Zo(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Fe extends K{constructor(e){super(),X(this,e,Zo,Vo,J,{colorScale:0,limits:1})}}function pe(o){let e=new URLSearchParams(window.location.search).has(o),l=je(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),window.history.replaceState(null,"",n.toString())}),l}function zt(o,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=je(n);return s.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),window.history.replaceState(null,"",i.toString())}),s}let dn=je(new Map),Vt=je(new Set);const Qo=o=>({}),fl=o=>({}),Ko=o=>({}),ul=o=>({}),Xo=o=>({}),cl=o=>({});function xo(o){let e;return{c(){e=y(o[2])},m(l,t){d(l,e,t)},p(l,t){t&4&&A(e,l[2])},d(l){l&&h(e)}}}function es(o){let e,l,t;const n=o[7].icon,r=it(n,o,o[10],cl);return{c(){r&&r.c(),e=L(),l=y(o[2])},m(s,f){r&&r.m(s,f),d(s,e,f),d(s,l,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&ft(r,n,s,s[10],t?ct(n,s[10],f,Xo):ut(s[10]),cl),(!t||f&4)&&A(l,s[2])},i(s){t||(m(r,s),t=!0)},o(s){g(r,s),t=!1},d(s){s&&(h(e),h(l)),r&&r.d(s)}}}function ts(o){let e;const l=o[7].help,t=it(l,o,o[10],ul);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&ft(t,l,n,n[10],e?ct(l,n[10],r,Ko):ut(n[10]),ul)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function ns(o){let e;return{c(){e=y("X")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ls(o){let e,l,t,n,r,s,f,i,a;function u(p){o[8](p)}let c={$$slots:{default:[es]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),l=new Ye({props:c}),H.push(()=>E(l,"checked",u)),s=new Xr({props:{$$slots:{default:[ts]},$$scope:{ctx:o}}}),i=new Je({props:{$$slots:{default:[ns]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=S("div"),b(l.$$.fragment),n=L(),r=S("span"),b(s.$$.fragment),f=L(),b(i.$$.fragment),se(e,"display","flex"),se(e,"justify-content","space-between")},m(p,_){d(p,e,_),w(l,e,null),$(e,n),$(e,r),w(s,r,null),$(r,f),w(i,r,null),a=!0},p(p,_){const k={};_&1028&&(k.$$scope={dirty:_,ctx:p}),!t&&_&1&&(t=!0,k.checked=p[0],B(()=>t=!1)),l.$set(k);const T={};_&1024&&(T.$$scope={dirty:_,ctx:p}),s.$set(T);const C={};_&1024&&(C.$$scope={dirty:_,ctx:p}),i.$set(C)},i(p){a||(m(l.$$.fragment,p),m(s.$$.fragment,p),m(i.$$.fragment,p),a=!0)},o(p){g(l.$$.fragment,p),g(s.$$.fragment,p),g(i.$$.fragment,p),a=!1},d(p){p&&h(e),v(l),v(s),v(i)}}}function $l(o){let e;const l=o[7].controls,t=it(l,o,o[10],fl);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&ft(t,l,n,n[10],e?ct(l,n[10],r,Qo):ut(n[10]),fl)},i(n){e||(m(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function rs(o){let e,l,t,n,r,s;e=new Ye({props:{checked:o[4].has(o[1]),$$slots:{default:[xo]},$$scope:{ctx:o}}}),e.$on("change",o[5]),n=new De({props:{small:!0,$$slots:{default:[ls]},$$scope:{ctx:o}}});let f=o[0]&&$l(o);return{c(){b(e.$$.fragment),l=L(),t=S("div"),b(n.$$.fragment),r=L(),f&&f.c()},m(i,a){w(e,i,a),d(i,l,a),d(i,t,a),w(n,t,null),$(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=$l(i),f.c(),m(f,1),f.m(t,null)):f&&(be(),g(f,1,1,()=>{f=null}),we())},i(i){s||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),s=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),g(f),s=!1},d(i){i&&(h(l),h(t)),v(e,i),v(n),f&&f.d(),o[9](null)}}}function os(o,e,l){let t;Y(o,Vt,k=>l(4,t=k));let{$$slots:n={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),Vt.set(t));let a=null;yn(()=>{dn.update(k=>(k.delete(s),k))});function u(){Vt.update(k=>(k.has(s)?(k.delete(s),l(0,i=!1)):(k.add(s),l(0,i=!0)),k))}function c(){t.delete(s),Vt.set(t),l(0,i=!1)}function p(k){i=k,l(0,i)}function _(k){H[k?"unshift":"push"](()=>{a=k,l(3,a),l(1,s)})}return o.$$set=k=>{"name"in k&&l(1,s=k.name),"title"in k&&l(2,f=k.title),"show"in k&&l(0,i=k.show),"$$scope"in k&&l(10,r=k.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&dn.update(k=>(l(3,a.style.display="none",a),k.set(s,a),k))},[i,s,f,a,t,u,c,n,p,_,r]}class ue extends K{constructor(e){super(),X(this,e,os,rs,J,{name:1,title:2,show:0})}}function pl(o){const e=o[7].OA21CD;o[8]=e;const l=o[7][o[0].kind];o[9]=l}function ss(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[fs]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[us]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("Population density data is from the 2021 census, via "),b(t.$$.fragment),n=y(". Output area boundaries from "),b(r.$$.fragment),s=y(".")},m(i,a){d(i,e,a),$(e,l),w(t,e,null),$(e,n),w(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function is(o){let e,l,t,n,r,s,f,i,a;return r=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[cs]},$$scope:{ctx:o}}}),f=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[$s]},$$scope:{ctx:o}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=S("p"),n=y("Car/van availability data is from the 2021 census, via "),b(r.$$.fragment),s=y(". Output area boundaries from "),b(f.$$.fragment),i=y(".")},m(u,c){d(u,e,c),d(u,l,c),d(u,t,c),$(t,n),w(r,t,null),$(t,s),w(f,t,null),$(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){g(r.$$.fragment,u),g(f.$$.fragment,u),a=!1},d(u){u&&(h(e),h(l),h(t)),v(r),v(f)}}}function as(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ps]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ms]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),n=y(". Output area boundaries from "),b(r.$$.fragment),s=y(".")},m(i,a){d(i,e,a),$(e,l),w(t,e,null),$(e,n),w(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function fs(o){let e;return{c(){e=y(`NOMIS TS006
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function us(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function cs(o){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $s(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ps(o){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ms(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _s(o){let e,l,t,n,r,s;const f=[as,is,ss],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(o),t=i[l]=f[l](o),r=new Ce({}),{c(){e=S("span"),t.c(),n=L(),b(r.$$.fragment),G(e,"slot","help")},m(u,c){d(u,e,c),i[l].m(e,null),$(e,n),w(r,e,null),s=!0},p(u,c){let p=l;l=a(u),l!==p&&(be(),g(i[p],1,1,()=>{i[p]=null}),we(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){g(t),g(r.$$.fragment,u),s=!1},d(u){u&&h(e),i[l].d(),v(r)}}}function gs(o){let e,l,t,n;return t=new Fe({props:{colorScale:o[1],limits:$t(o[0].kind).map(ml)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",l=L(),b(t.$$.fragment)},m(r,s){d(r,e,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&1&&(f.limits=$t(r[0].kind).map(ml)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&(h(e),h(l)),v(t,r)}}}function ds(o){let e,l;return e=new Fe({props:{colorScale:o[1],limits:$t(o[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=$t(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function hs(o){let e,l;return e=new Fe({props:{colorScale:o[1],limits:$t(o[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=$t(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function bs(o){let e,l,t,n,r,s,f;function i(_){o[4](_)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),l=new Sn({props:a}),H.push(()=>E(l,"value",i));const u=[hs,ds,gs],c=[];function p(_,k){return _[0].kind=="percent_households_with_car"?0:_[0].kind=="average_cars_per_household"?1:_[0].kind=="population_density"?2:-1}return~(r=p(o))&&(s=c[r]=u[r](o)),{c(){e=S("div"),b(l.$$.fragment),n=L(),s&&s.c(),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(_,k){d(_,e,k),w(l,e,null),$(e,n),~r&&c[r].m(e,null),f=!0},p(_,k){const T={};!t&&k&1&&(t=!0,T.value=_[0].kind,B(()=>t=!1)),l.$set(T);let C=r;r=p(_),r===C?~r&&c[r].p(_,k):(s&&(be(),g(c[C],1,1,()=>{c[C]=null}),we()),~r?(s=c[r],s?s.p(_,k):(s=c[r]=u[r](_),s.c()),m(s,1),s.m(e,null)):s=null)},i(_){f||(m(l.$$.fragment,_),m(s),f=!0)},o(_){g(l.$$.fragment,_),g(s),f=!1},d(_){_&&h(e),v(l),~r&&c[r].d()}}}function ws(o){let e,l,t,n=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=S("p"),l=y("There are "),t=S("b"),r=y(n),s=y(`
          people per square kilometre in `),i=y(f)},m(a,u){d(a,e,u),$(e,l),$(e,t),$(t,r),$(e,s),$(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&A(r,n),u&128&&f!==(f=a[8]+"")&&A(i,f)},d(a){a&&h(e)}}}function vs(o){let e,l,t=o[8]+"",n,r,s,f=o[9]+"",i,a;return{c(){e=S("p"),l=y("Households in "),n=y(t),r=y(` have an average of
          `),s=S("b"),i=y(f),a=y(`
          cars`)},m(u,c){d(u,e,c),$(e,l),$(e,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&A(n,t),c&129&&f!==(f=u[9]+"")&&A(i,f)},d(u){u&&h(e)}}}function ks(o){let e,l,t=o[9]+"",n,r,s,f=o[8]+"",i,a;return{c(){e=S("p"),l=S("b"),n=y(t),r=y("%"),s=y(`
          of households in `),i=y(f),a=y(" have 1 or more cars")},m(u,c){d(u,e,c),$(e,l),$(l,n),$(l,r),$(e,s),$(e,i),$(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&A(n,t),c&128&&f!==(f=u[8]+"")&&A(i,f)},d(u){u&&h(e)}}}function ys(o){pl(o);let e;function l(r,s){return r[0].kind=="percent_households_with_car"?ks:r[0].kind=="average_cars_per_household"?vs:ws}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){pl(r),t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function Ss(o){let e,l;return e=new fe({props:{$$slots:{default:[ys,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Cs(o){let e,l,t,n;const r=[z(qe),{sourceLayer:qe},{paint:{"fill-color":me(["get",o[0].kind],$t(o[0].kind),o[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ss]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Re({props:s}),e.$on("click",o[3]);const f=[z(`${qe}-outline`),{sourceLayer:qe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(qe)),u&0&&{sourceLayer:qe},u&3&&{paint:{"fill-color":me(["get",a[0].kind],$t(a[0].kind),a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?le(f,[u&0&&oe(z(`${qe}-outline`)),u&0&&{sourceLayer:qe},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ts(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:qe,title:"2021 census",$$slots:{controls:[bs],help:[_s]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${qe}.pmtiles`,$$slots:{default:[Cs]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let qe="census_output_areas";function Ls(o){return o.show?o.kind:null}function Ms(o){return{show:!0,kind:o}}function $t(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const ml=o=>o.toLocaleString();function Is(o,e,l){let t,n=ee.sequential_low_to_high,s=zt(qe,{show:!1,kind:"percent_households_with_car"},Ls,Ms);Y(o,s,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,n,s,f,i,a]}class Os extends K{constructor(e){super(),X(this,e,Is,Ts,J,{})}}function js(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ns(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ps(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[Ns]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2024."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Rs(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Ds(o){let e,l;return e=new fe({props:{$$slots:{default:[Rs,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Fs(o){let e,l,t,n;const r=[z(_t),{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ds]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Re({props:s}),e.$on("click",zs);const f=[z(`${_t}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(_t)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?le(f,[u&0&&oe(z(`${_t}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Gs(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:_t,title:As,$$slots:{help:[Ps],icon:[js]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new At({props:{data:`${ce()}/v1/${_t}.geojson`,$$slots:{default:[Fs]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let _t="combined_authorities",As="Combined authorities";function zs(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function qs(o,e,l){let t,n=ee.combined_authorities,r=pe(_t);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Hs extends K{constructor(e){super(),X(this,e,qs,Gs,J,{})}}function Es(o){let e;return{c(){e=y(`DLUCH GIS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bs(o){let e;return{c(){e=y(`here
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Us(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Es]},$$scope:{ctx:o}}}),s=new re({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Bs]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("The 2019 English IMD scores come from "),b(n.$$.fragment),r=y(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),b(s.$$.fragment),f=y("."),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),$(e,i),w(a,e,null),u=!0},p(c,p){const _={};p&64&&(_.$$scope={dirty:p,ctx:c}),n.$set(_);const k={};p&64&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(s),v(a)}}}function Ws(o){let e,l,t;return l=new Fe({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ys(o){let e,l=o[5].LSOA11CD+"",t,n,r,s=o[5].score+"",f,i,a,u,c,p=o[5].rank.toLocaleString()+"",_,k;return{c(){e=S("p"),t=y(l),n=y(` has an IMD score of
        `),r=S("b"),f=y(s),i=L(),a=S("p"),u=y("Rank: "),c=S("b"),_=y(p),k=y(`
        / 32,844 LSOAs`)},m(T,C){d(T,e,C),$(e,t),$(e,n),$(e,r),$(r,f),d(T,i,C),d(T,a,C),$(a,u),$(a,c),$(c,_),$(a,k)},p(T,C){C&32&&l!==(l=T[5].LSOA11CD+"")&&A(t,l),C&32&&s!==(s=T[5].score+"")&&A(f,s),C&32&&p!==(p=T[5].rank.toLocaleString()+"")&&A(_,p)},d(T){T&&(h(e),h(i),h(a))}}}function Js(o){let e,l;return e=new fe({props:{$$slots:{default:[Ys,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Vs(o){let e,l,t,n;const r=[z(He),{sourceLayer:He},{paint:{"fill-color":me(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Js]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Re({props:s});const f=[z(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?le(r,[u&0&&oe(z(He)),u&0&&{sourceLayer:He},u&6&&{paint:{"fill-color":me(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?le(f,[u&0&&oe(z(`${He}-outline`)),u&0&&{sourceLayer:He},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Zs(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:He,title:Qs,$$slots:{controls:[Ws],help:[Us]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${He}.pmtiles`,$$slots:{default:[Vs]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let He="imd",Qs="Indices of Multiple Deprivation";function Ks(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,2,4,6,8,10],s=pe(He);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Xs extends K{constructor(e){super(),X(this,e,Ks,Zs,J,{})}}function xs(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ei(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ti(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[ei]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2024."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function ni(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function li(o){let e,l;return e=new fe({props:{$$slots:{default:[ni,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ri(o){let e,l,t,n;const r=[z(gt),{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[li]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Re({props:s}),e.$on("click",ii);const f=[z(`${gt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(gt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?le(f,[u&0&&oe(z(`${gt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function oi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:gt,title:si,$$slots:{help:[ti],icon:[xs]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new At({props:{data:`${ce()}/v1/${gt}.geojson`,$$slots:{default:[ri]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let gt="local_authority_districts",si="Local Authority Districts";function ii(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function ai(o,e,l){let t,n=ee.local_authority_districts,r=pe(gt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class fi extends K{constructor(e){super(),X(this,e,ai,oi,J,{})}}function ui(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ci(o){let e;return{c(){e=y(`local authority
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $i(o){let e;return{c(){e=y(`national park authorit
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function pi(o){let e;return{c(){e=y(`development corporation
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function mi(o){let e;return{c(){e=y("this map")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _i(o){let e;return{c(){e=y(`planning.data.gov.uk
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function gi(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,k,T,C,j,F,N,M,O,I,R;return n=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ci]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[$i]},$$scope:{ctx:o}}}),i=new re({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[pi]},$$scope:{ctx:o}}}),k=new re({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[mi]},$$scope:{ctx:o}}}),N=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[_i]},$$scope:{ctx:o}}}),I=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("LPAs may be a "),b(n.$$.fragment),r=y(", "),b(s.$$.fragment),f=y("y, or "),b(i.$$.fragment),a=y("."),u=L(),c=S("p"),p=S("strong"),_=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),b(k.$$.fragment),T=y(" to get more details."),C=L(),j=S("p"),F=y("Data from ONS Geography via "),b(N.$$.fragment),M=y(", as of November 2022."),O=L(),b(I.$$.fragment),G(e,"slot","help")},m(P,q){d(P,e,q),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),w(i,l,null),$(l,a),$(e,u),$(e,c),$(c,p),$(p,_),w(k,p,null),$(p,T),$(e,C),$(e,j),$(j,F),w(N,j,null),$(j,M),$(e,O),w(I,e,null),R=!0},p(P,q){const Q={};q&32&&(Q.$$scope={dirty:q,ctx:P}),n.$set(Q);const ae={};q&32&&(ae.$$scope={dirty:q,ctx:P}),s.$set(ae);const D={};q&32&&(D.$$scope={dirty:q,ctx:P}),i.$set(D);const x={};q&32&&(x.$$scope={dirty:q,ctx:P}),k.$set(x);const V={};q&32&&(V.$$scope={dirty:q,ctx:P}),N.$set(V)},i(P){R||(m(n.$$.fragment,P),m(s.$$.fragment,P),m(i.$$.fragment,P),m(k.$$.fragment,P),m(N.$$.fragment,P),m(I.$$.fragment,P),R=!0)},o(P){g(n.$$.fragment,P),g(s.$$.fragment,P),g(i.$$.fragment,P),g(k.$$.fragment,P),g(N.$$.fragment,P),g(I.$$.fragment,P),R=!1},d(P){P&&h(e),v(n),v(s),v(i),v(k),v(N),v(I)}}}function di(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function hi(o){let e,l;return e=new fe({props:{$$slots:{default:[di,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function bi(o){let e,l,t,n;const r=[z(Ee),{sourceLayer:Ee},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[hi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Re({props:s});const f=[z(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(Ee)),u&0&&{sourceLayer:Ee},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?le(f,[u&0&&oe(z(`${Ee}-outline`)),u&0&&{sourceLayer:Ee},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function wi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ee,title:vi,$$slots:{help:[gi],icon:[ui]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ee}.pmtiles`,$$slots:{default:[bi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ee="local_planning_authorities",vi="Local Planning Authorities";function ki(o,e,l){let t,n=ee.local_planning_authorities,r=pe(Ee);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class yi extends K{constructor(e){super(),X(this,e,ki,wi,J,{})}}function Si(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ci(o){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ti(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Ci]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of October 2024."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Li(o){let e,l=o[4].Name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&A(t,l)},d(n){n&&h(e)}}}function Mi(o){let e,l;return e=new fe({props:{$$slots:{default:[Li,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ii(o){let e,l,t,n;const r=[z(Be),{sourceLayer:Be},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Mi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Re({props:s}),e.$on("click",Ni);const f=[z(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(Be)),u&0&&{sourceLayer:Be},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?le(f,[u&0&&oe(z(`${Be}-outline`)),u&0&&{sourceLayer:Be},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Oi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Be,title:ji,$$slots:{help:[Ti],icon:[Si]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Be}.pmtiles`,$$slots:{default:[Ii]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Be="parliamentary_constituencies",ji="Parliamentary constituencies";function Ni(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Pi(o,e,l){let t,n=ee.parliamentary_constituencies,r=pe(Be);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ri extends K{constructor(e){super(),X(this,e,Pi,Oi,J,{})}}function Di(o){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Fi(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Di]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Most layers show air quality data from "),b(n.$$.fragment),r=y(`. The measurements are annual means, in units of µgm
      `),s=S("sup"),s.textContent="3",f=y(`
      . Note the particulate matter layers are not corrected for natural sources.`),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),$(l,s),$(l,f),$(e,i),w(a,e,null),u=!0},p(c,p){const _={};p&4096&&(_.$$scope={dirty:p,ctx:c}),n.$set(_)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function Gi(o){let e,l,t,n,r,s=o[3](o[0].pollutant)+"",f,i,a,u,c,p,_,k,T,C,j,F,N;function M(I){o[5](I)}let O={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return o[0].pollutant!==void 0&&(O.value=o[0].pollutant),l=new Ft({props:O}),H.push(()=>E(l,"value",M)),{c(){e=S("div"),b(l.$$.fragment),n=L(),r=S("p"),f=y(s),i=L(),a=S("div"),u=S("label"),c=y(`Opacity
        `),p=S("input"),_=L(),k=S("img"),G(p,"type","range"),G(p,"min","0"),G(p,"max","100"),Zt(k.src,T=o[4](o[0].pollutant))||G(k,"src",T),G(k,"width",150),G(k,"alt",C=`Legend for ${o[0].pollutant} layer`),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(I,R){d(I,e,R),w(l,e,null),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,u),$(u,c),$(u,p),Ve(p,o[0].opacity),$(e,_),$(e,k),j=!0,F||(N=[at(p,"change",o[6]),at(p,"input",o[6])],F=!0)},p(I,R){const P={};!t&&R&1&&(t=!0,P.value=I[0].pollutant,B(()=>t=!1)),l.$set(P),(!j||R&1)&&s!==(s=I[3](I[0].pollutant)+"")&&A(f,s),R&1&&Ve(p,I[0].opacity),(!j||R&1&&!Zt(k.src,T=I[4](I[0].pollutant)))&&G(k,"src",T),(!j||R&1&&C!==(C=`Legend for ${I[0].pollutant} layer`))&&G(k,"alt",C)},i(I){j||(m(l.$$.fragment,I),j=!0)},o(I){g(l.$$.fragment,I),j=!1},d(I){I&&h(e),v(l),F=!1,wr(N)}}}function Ai(o){let e,l;const t=[z(nn),{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new xr({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(nn)),s&1&&{paint:{"raster-opacity":r[0].opacity/100}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function zi(o){let e,l,t,n,r;function s(i){o[7](i)}let f={name:nn,title:qi,$$slots:{controls:[Gi],help:[Fi]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new Co({props:{tiles:[o[1]],tileSize:256,$$slots:{default:[Ai]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2&&(c.tiles=[i[1]]),a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let nn="pollution",qi="Pollution";function Hi(o){return o.show?`${o.pollutant}/${o.opacity}`:null}function Ei(o){let[e,l]=o.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function Bi(o,e,l){let t,n,r,f=zt(nn,{show:!1,pollutant:"PM25_viridis",opacity:50},Hi,Ei);Y(o,f,T=>l(0,r=T));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(T){return t[1]}function u(T){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${C}`}function c(T){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${C}`}function p(T){o.$$.not_equal(r.pollutant,T)&&(r.pollutant=T,f.set(r))}function _(){r.opacity=Qt(this.value),f.set(r)}function k(T){o.$$.not_equal(r.show,T)&&(r.show=T,f.set(r))}return o.$$.update=()=>{o.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),o.$$.dirty&1&&l(1,n=u(r.pollutant))},[r,n,f,a,c,p,_,k]}class Ui extends K{constructor(e){super(),X(this,e,Bi,zi,J,{})}}function Wi(o){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Yi(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Wi]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=S("span"),l=S("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=S("p"),r=y("Data from June 2019, produced by "),b(s.$$.fragment),f=y(". See there for methodology details"),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),w(s,n,null),$(n,f),$(e,i),w(a,e,null),u=!0},p(c,p){const _={};p&32&&(_.$$scope={dirty:p,ctx:c}),s.$set(_)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(s),v(a)}}}function Ji(o){let e,l,t;return l=new Fe({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Vi(o){let e,l=o[4].noiseclass+"",t,n,r=_l(o[4].noiseclass)+"",s,f;return{c(){e=S("p"),t=y(l),n=y(" dB ("),s=y(r),f=y(")")},m(i,a){d(i,e,a),$(e,t),$(e,n),$(e,s),$(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&A(t,l),a&16&&r!==(r=_l(i[4].noiseclass)+"")&&A(s,r)},d(i){i&&h(e)}}}function Zi(o){let e,l;return e=new fe({props:{$$slots:{default:[Vi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qi(o){let e,l;const t=[z(dt),{sourceLayer:dt},{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":te(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Zi]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(z(dt)),s&0&&{sourceLayer:dt},s&2&&{paint:{"fill-color":Ke(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":te(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ki(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:dt,title:Xi,$$slots:{controls:[Ji],help:[Yi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${dt}.pmtiles`,$$slots:{default:[Qi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let dt="road_noise",Xi="Road noise";function _l(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function xi(o,e,l){let t,n=[ee.sequential_low_to_high[0],ee.sequential_low_to_high[2],ee.sequential_low_to_high[4]],r=pe(dt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ea extends K{constructor(e){super(),X(this,e,xi,Ki,J,{})}}function ta(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function na(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function la(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[na]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2023."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function ra(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&h(e)}}}function oa(o){let e,l;return e=new fe({props:{$$slots:{default:[ra,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function sa(o){let e,l,t,n;const r=[z(Ue),{sourceLayer:Ue},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[oa]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new Re({props:s}),e.$on("click",fa);const f=[z(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?le(f,[u&0&&oe(z(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function ia(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ue,title:aa,$$slots:{help:[la],icon:[ta]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ue}.pmtiles`,$$slots:{default:[sa]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ue="wards",aa="Wards";function fa(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function ua(o,e,l){let t,n=ee.wards,r=pe(Ue);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ca extends K{constructor(e){super(),X(this,e,ua,ia,J,{})}}function $a(o){let e;return{c(){e=y("Open Data Commons Open Database License")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function pa(o){let e,l,t,n;return t=new re({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[$a]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("License: "),b(t.$$.fragment)},m(r,s){d(r,e,s),$(e,l),w(t,e,null),n=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&h(e),v(t)}}}class Xe extends K{constructor(e){super(),X(this,e,null,pa,J,{})}}function ma(o){let e,l,t;return l=new Se({props:{color:ee.bus_route_with_lane}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function _a(o){let e;return{c(){e=y(`GTFS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ga(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://gtfs.org",$$slots:{default:[_a]},$$scope:{ctx:o}}}),a=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=S("p"),r=y("Note this data is from OpenStreetMap (as of 20 October 2024), not "),b(s.$$.fragment),f=y(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),w(s,n,null),$(n,f),$(e,i),w(a,e,null),u=!0},p(c,p){const _={};p&16&&(_.$$scope={dirty:p,ctx:c}),s.$set(_)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(s),v(a)}}}function da(o){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ha(o){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ba(o){let e;function l(r,s){return r[3].has_bus_lane?ha:da}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function wa(o){let e,l;return e=new fe({props:{$$slots:{default:[ba,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function va(o){let e,l;const t=[z(ht),{sourceLayer:ht},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ee.bus_route_with_lane,ee.bus_route_without_lane],"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[wa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(ht)),s&0&&{sourceLayer:ht},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ka(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:ht,title:ya,$$slots:{help:[ga],icon:[ma]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${ht}.pmtiles`,$$slots:{default:[va]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let ht="bus_routes",ya="Bus routes";function Sa(o,e,l){let t,n=pe(ht);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Ca extends K{constructor(e){super(),X(this,e,Sa,ka,J,{})}}function gl(o){const e=Fa(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function dl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function Ta(o){let e,l,t,n,r,s,f,i,a;return i=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=S("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),s=S("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),b(i.$$.fragment),G(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),w(i,e,null),a=!0},p:Z,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){g(i.$$.fragment,u),a=!1},d(u){u&&h(e),v(i)}}}function La(o){let e,l,t=o[13]+"",n,r,s;return e=new Se({props:{color:o[14]}}),{c(){b(e.$$.fragment),l=L(),n=y(t),r=L()},m(f,i){w(e,f,i),d(f,l,i),d(f,n,i),d(f,r,i),s=!0},p:Z,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n),h(r)),v(e,f)}}}function hl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[La]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Ye({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],B(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ma(o){let e,l,t=he(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=hl(dl(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f&5){t=he(s[2]);let i;for(i=0;i<t.length;i+=1){const a=dl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=hl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),Qe(n,s)}}}function Ia(o){let e,l,t;return l=new De({props:{small:!0,$$slots:{default:[Ma]},$$scope:{ctx:o}}}),{c(){e=S("div"),b(l.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Oa(o){gl(o);let e,l=o[10]+"",t,n,r,s,f,i=o[11]+"",a,u,c,p,_=o[12]+"",k;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),s=y("Direction: "),f=S("b"),a=L(),u=S("p"),c=y("Width: "),p=S("b"),k=y(_)},m(T,C){d(T,e,C),$(e,t),d(T,n,C),d(T,r,C),$(r,s),$(r,f),f.innerHTML=i,d(T,a,C),d(T,u,C),$(u,c),$(u,p),$(p,k)},p(T,C){gl(T),C&512&&l!==(l=T[10]+"")&&A(t,l),C&512&&i!==(i=T[11]+"")&&(f.innerHTML=i),C&512&&_!==(_=T[12]+"")&&A(k,_)},d(T){T&&(h(e),h(n),h(r),h(a),h(u))}}}function ja(o){let e,l;return e=new fe({props:{$$slots:{default:[Oa,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Na(o){let e,l;const t=[z(bt),{sourceLayer:bt},{paint:{"line-color":Ke(["get","kind"],{track:ee.cycle_paths.track,lane:ee.cycle_paths.lane,shared_use_segregated:ee.cycle_paths.shared_use_segregated,shared_use_unsegregated:ee.cycle_paths.shared_use_unsegregated},"red"),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[ja]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),e.$on("click",Ga),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&9?le(t,[s&0&&oe(z(bt)),s&0&&{sourceLayer:bt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Pa(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:bt,title:Ra,$$slots:{controls:[Ia],help:[Ta]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${bt}.pmtiles`,$$slots:{default:[Na]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let bt="cycle_paths",Ra="Cycle paths";function Da(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function Fa(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function Ga(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Aa(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(p){return p.show?n.filter(_=>p[_]).join(","):null}let f=zt(bt,r,s,Da);Y(o,f,p=>l(0,t=p));let i=[["track","Separated tracks",ee.cycle_paths.track],["lane","Unprotected lanes",ee.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",ee.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",ee.cycle_paths.shared_use_unsegregated]];function a(p){let _=n.filter(k=>p[k]);return["in",["get","kind"],["literal",_]]}function u(p,_){o.$$.not_equal(t[_],p)&&(t[_]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class za extends K{constructor(e){super(),X(this,e,Aa,Pa,J,{})}}function qa(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ha(o){let e;return{c(){e=y(`Major Road Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ea(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Ha]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),b(n.$$.fragment),r=y(", as of September 2021."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Ba(o){let e,l=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&A(t,l)},d(n){n&&h(e)}}}function Ua(o){let e,l;return e=new fe({props:{$$slots:{default:[Ba,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Wa(o){let e,l;const t=[z(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Ua]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(z(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ya(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:wt,title:Ja,$$slots:{help:[Ea],icon:[qa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${wt}.pmtiles`,$$slots:{default:[Wa]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let wt="mrn",Ja="Major Road Network";function Va(o,e,l){let t,n=ee.mrn,r=pe(wt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Za extends K{constructor(e){super(),X(this,e,Va,Ya,J,{})}}function Qa(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ka(o){let e;return{c(){e=y(`OS Open Roads
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Xa(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Ka]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function xa(o){let e,l=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&A(t,l)},d(n){n&&h(e)}}}function ef(o){let e,l;return e=new fe({props:{$$slots:{default:[xa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function tf(o){let e,l;const t=[z(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[ef]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(z(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function nf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:vt,title:lf,$$slots:{help:[Xa],icon:[Qa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${vt}.pmtiles`,$$slots:{default:[tf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let vt="srn",lf="Strategic Road Network";function rf(o,e,l){let t,n=ee.srn,r=pe(vt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class of extends K{constructor(e){super(),X(this,e,rf,nf,J,{})}}function sf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function af(o){let e;return{c(){e=y(`National Cycle Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ff(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[af]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from Sustrans about the "),b(n.$$.fragment),r=y(", downloaded on 22/01/2024."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function bl(o){let e,l,t,n=o[4].Desc_+"",r;return{c(){e=S("li"),l=y("Description: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Desc_+"")&&A(r,n)},d(s){s&&h(e)}}}function wl(o){let e,l,t,n=o[4].Greenway+"",r;return{c(){e=S("li"),l=y("Is greenway: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Greenway+"")&&A(r,n)},d(s){s&&h(e)}}}function vl(o){let e,l,t,n=o[4].RouteType+"",r;return{c(){e=S("li"),l=y("Route type: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteType+"")&&A(r,n)},d(s){s&&h(e)}}}function kl(o){let e,l,t,n=o[4].RouteNo+"",r;return{c(){e=S("li"),l=y("Route number: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteNo+"")&&A(r,n)},d(s){s&&h(e)}}}function yl(o){let e,l,t,n=o[4].RouteCat+"",r;return{c(){e=S("li"),l=y("Route Category: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteCat+"")&&A(r,n)},d(s){s&&h(e)}}}function Sl(o){let e,l,t,n=o[4].OpenStatus+"",r;return{c(){e=S("li"),l=y("Open Status: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].OpenStatus+"")&&A(r,n)},d(s){s&&h(e)}}}function Cl(o){let e,l,t,n=o[4].Surface+"",r;return{c(){e=S("li"),l=y("Surface: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Surface+"")&&A(r,n)},d(s){s&&h(e)}}}function Tl(o){let e,l,t,n=o[4].Quality+"",r;return{c(){e=S("li"),l=y("Quality: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Quality+"")&&A(r,n)},d(s){s&&h(e)}}}function Ll(o){let e,l,t,n=o[4].RoadClass+"",r;return{c(){e=S("li"),l=y("Road Class: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RoadClass+"")&&A(r,n)},d(s){s&&h(e)}}}function uf(o){let e,l,t,n,r,s,f,i,a,u=o[4].Desc_&&bl(o),c=o[4].Greenway&&wl(o),p=o[4].RouteType&&vl(o),_=o[4].RouteNo&&kl(o),k=o[4].RouteCat&&yl(o),T=o[4].OpenStatus&&Sl(o),C=o[4].Surface&&Cl(o),j=o[4].Quality&&Tl(o),F=o[4].RoadClass&&Ll(o);return{c(){e=S("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),p&&p.c(),n=L(),_&&_.c(),r=L(),k&&k.c(),s=L(),T&&T.c(),f=L(),C&&C.c(),i=L(),j&&j.c(),a=L(),F&&F.c()},m(N,M){d(N,e,M),u&&u.m(e,null),$(e,l),c&&c.m(e,null),$(e,t),p&&p.m(e,null),$(e,n),_&&_.m(e,null),$(e,r),k&&k.m(e,null),$(e,s),T&&T.m(e,null),$(e,f),C&&C.m(e,null),$(e,i),j&&j.m(e,null),$(e,a),F&&F.m(e,null)},p(N,M){N[4].Desc_?u?u.p(N,M):(u=bl(N),u.c(),u.m(e,l)):u&&(u.d(1),u=null),N[4].Greenway?c?c.p(N,M):(c=wl(N),c.c(),c.m(e,t)):c&&(c.d(1),c=null),N[4].RouteType?p?p.p(N,M):(p=vl(N),p.c(),p.m(e,n)):p&&(p.d(1),p=null),N[4].RouteNo?_?_.p(N,M):(_=kl(N),_.c(),_.m(e,r)):_&&(_.d(1),_=null),N[4].RouteCat?k?k.p(N,M):(k=yl(N),k.c(),k.m(e,s)):k&&(k.d(1),k=null),N[4].OpenStatus?T?T.p(N,M):(T=Sl(N),T.c(),T.m(e,f)):T&&(T.d(1),T=null),N[4].Surface?C?C.p(N,M):(C=Cl(N),C.c(),C.m(e,i)):C&&(C.d(1),C=null),N[4].Quality?j?j.p(N,M):(j=Tl(N),j.c(),j.m(e,a)):j&&(j.d(1),j=null),N[4].RoadClass?F?F.p(N,M):(F=Ll(N),F.c(),F.m(e,null)):F&&(F.d(1),F=null)},d(N){N&&h(e),u&&u.d(),c&&c.d(),p&&p.d(),_&&_.d(),k&&k.d(),T&&T.d(),C&&C.d(),j&&j.d(),F&&F.d()}}}function cf(o){let e,l;return e=new fe({props:{$$slots:{default:[uf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function $f(o){let e,l;const t=[z(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[cf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(z(kt)),s&0&&{sourceLayer:kt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function pf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:kt,title:mf,$$slots:{help:[ff],icon:[sf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${kt}.pmtiles`,$$slots:{default:[$f]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let kt="national_cycle_network",mf="National Cycle Network";function _f(o,e,l){let t,n=ee.national_cycle_network,r=pe(kt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class gf extends K{constructor(e){super(),X(this,e,_f,pf,J,{})}}function Ml(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function df(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function hf(o){let e,l,t,n,r,s,f,i,a,u,c,p;return u=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[df]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=S("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),s=S("p"),s.textContent="Data valid as of 1 January, 2024",f=L(),i=S("p"),a=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(u.$$.fragment),c=y("."),G(e,"slot","help")},m(_,k){d(_,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),$(e,i),$(i,a),w(u,i,null),$(i,c),p=!0},p(_,k){const T={};k&4096&&(T.$$scope={dirty:k,ctx:_}),u.$set(T)},i(_){p||(m(u.$$.fragment,_),p=!0)},o(_){g(u.$$.fragment,_),p=!1},d(_){_&&h(e),v(u)}}}function bf(o){let e,l,t;return l=new Fe({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function wf(o){let e,l,t=ln(o[6].angle+o[9])+"",n;return{c(){e=S("p"),l=new Dt(!1),n=y(` side of the road: no pavement
          `),l.a=n},m(r,s){d(r,e,s),l.m(t,e),$(e,n)},p(r,s){s&64&&t!==(t=ln(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&h(e)}}}function vf(o){let e,l,t=ln(o[6].angle+o[9])+"",n,r,s=o[7]+"",f,i,a,u=o[8]+"",c,p;return{c(){e=S("p"),l=new Dt(!1),n=y(` side of the road:
            `),r=S("b"),f=y(s),i=y(`
            m average,
            `),a=S("b"),c=y(u),p=y(`
            m minimum
          `),l.a=n},m(_,k){d(_,e,k),l.m(t,e),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,c),$(e,p)},p(_,k){k&64&&t!==(t=ln(_[6].angle+_[9])+"")&&l.p(t),k&64&&s!==(s=_[7]+"")&&A(f,s),k&64&&u!==(u=_[8]+"")&&A(c,u)},d(_){_&&h(e)}}}function Il(o){let e;function l(r,s){return r[7]?vf:wf}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function kf(o){let e,l=he([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Il(Ml(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ve()},m(n,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(n,r);d(n,e,r)},p(n,r){if(r&64){l=he([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=Ml(n,l,s);t[s]?t[s].p(f,r):(t[s]=Il(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(n){n&&h(e),Qe(t,n)}}}function yf(o){let e,l;return e=new fe({props:{openOn:"hover",$$slots:{default:[kf,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Sf(o){let e,l;const t=[z(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[yf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(yt)),s&0&&{sourceLayer:yt},t[2],t[3],s&6&&{paint:{"line-color":me(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Pe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Cf(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:yt,title:Tf,$$slots:{controls:[bf],help:[hf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${Xt()}/v1/${yt}.pmtiles`,$$slots:{default:[Sf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let yt="pavement_widths",Tf="OS Pavement widths";function Lf(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function ln(o){return`${Lf(o)} <span style="display: inline-block; rotate: ${o}deg">⬆</span>`}function Mf(o,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=pe(yt);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class If extends K{constructor(e){super(),X(this,e,Mf,Cf,J,{})}}function Of(o){let e;return{c(){e=y("the PCT website")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function jf(o){let e;return{c(){e=y("2017 journal article")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Nf(o){let e,l,t,n,r,s,f,i,a,u,c,p;return i=new re({props:{href:"https://www.pct.bike",$$slots:{default:[Of]},$$scope:{ctx:o}}}),u=new re({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[jf]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=S("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),s=S("p"),f=y("See "),b(i.$$.fragment),a=y(" and "),b(u.$$.fragment),c=y(" for details on methodology and data sources."),G(e,"slot","help")},m(_,k){d(_,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),w(i,s,null),$(s,a),w(u,s,null),$(s,c),p=!0},p(_,k){const T={};k&1024&&(T.$$scope={dirty:k,ctx:_}),i.$set(T);const C={};k&1024&&(C.$$scope={dirty:k,ctx:_}),u.$set(C)},i(_){p||(m(i.$$.fragment,_),m(u.$$.fragment,_),p=!0)},o(_){g(i.$$.fragment,_),g(u.$$.fragment,_),p=!1},d(_){_&&h(e),v(i),v(u)}}}function Pf(o){let e,l,t,n,r,s,f,i,a;l=new Fe({props:{colorScale:o[1],limits:o[2]}});function u(k){o[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),n=new Sn({props:c}),H.push(()=>E(n,"value",u));function p(k){o[6](k)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(_.value=o[0].scenario),f=new Ft({props:_}),H.push(()=>E(f,"value",p)),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(k,T){d(k,e,T),w(l,e,null),$(e,t),w(n,e,null),$(e,s),w(f,e,null),a=!0},p(k,T){const C={};!r&&T&1&&(r=!0,C.value=k[0].tripPurpose,B(()=>r=!1)),n.$set(C);const j={};!i&&T&1&&(i=!0,j.value=k[0].scenario,B(()=>i=!1)),f.$set(j)},i(k){a||(m(l.$$.fragment,k),m(n.$$.fragment,k),m(f.$$.fragment,k),a=!0)},o(k){g(l.$$.fragment,k),g(n.$$.fragment,k),g(f.$$.fragment,k),a=!1},d(k){k&&h(e),v(l),v(n),v(f)}}}function Rf(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Dt(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Df(o){let e,l;return e=new fe({props:{$$slots:{default:[Rf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ff(o){let e,l;const t=[z(nt),{sourceLayer:nt},{paint:{"line-color":me(["get",o[0].scenario],o[2],o[1]),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==nt?"visible":"none"}}];let n={$$slots:{default:[Df]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(nt)),s&0&&{sourceLayer:nt},s&7&&{paint:{"line-color":me(["get",r[0].scenario],r[2],r[1]),"line-width":Pe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==nt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Gf(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Dt(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Af(o){let e,l;return e=new fe({props:{$$slots:{default:[Gf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function zf(o){let e,l;const t=[z(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",o[0].scenario],o[2],o[1]),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==mt?"visible":"none"}}];let n={$$slots:{default:[Af]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(mt)),s&0&&{sourceLayer:mt},t[2],t[3],s&7&&{paint:{"line-color":me(["get",r[0].scenario],r[2],r[1]),"line-width":Pe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==mt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function qf(o){let e,l,t,n,r,s,f;function i(u){o[7](u)}let a={name:Or,title:Hf,$$slots:{controls:[Pf],help:[Nf]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new ue({props:a}),H.push(()=>E(e,"show",i)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${nt}.pmtiles`,$$slots:{default:[Ff]},$$scope:{ctx:o}}}),s=new $e({props:{url:`pmtiles://${ce()}/v1/${mt}.pmtiles`,$$slots:{default:[zf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(u,c){w(e,u,c),d(u,t,c),w(n,u,c),d(u,r,c),w(s,u,c),f=!0},p(u,[c]){const p={};c&1025&&(p.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,p.show=u[0].show,B(()=>l=!1)),e.$set(p);const _={};c&1025&&(_.$$scope={dirty:c,ctx:u}),n.$set(_);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),s.$set(k)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),g(s.$$.fragment,u),f=!1},d(u){u&&(h(t),h(r)),v(e,u),v(n,u),v(s,u)}}}let Or="pct",nt="pct_commute",mt="pct_school",Hf="Propensity to Cycle Tool";function Ef(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function Bf(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function Uf(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=zt(Or,{show:!1,tripPurpose:nt,scenario:"baseline"},Ef,Bf);Y(o,f,p=>l(0,t=p));function i(p){let _=p.baseline,k=p.gov_target,T=p.go_dutch,C=`<h2>Trip purpose: ${t.tripPurpose==nt?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)C+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let j=(k/_).toFixed(1),F=(T/_).toFixed(1);C+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${j}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${F}x</b> of baseline)</p>`}return C}function a(p){o.$$.not_equal(t.tripPurpose,p)&&(t.tripPurpose=p,f.set(t))}function u(p){o.$$.not_equal(t.scenario,p)&&(t.scenario=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,n,r,f,i,a,u,c]}class Wf extends K{constructor(e){super(),X(this,e,Uf,qf,J,{})}}function Yf(o){let e;return{c(){e=y("Basemap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Jf(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Vf(o){let e,l,t,n,r,s,f,i,a,u,c,p,_;return n=new re({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Yf]},$$scope:{ctx:o}}}),c=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Jf]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),t=y("The average speed data is collected over a six-month period by "),b(n.$$.fragment),r=y(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=L(),f=S("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=S("p"),u=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(c.$$.fragment),p=y("."),G(e,"slot","help")},m(k,T){d(k,e,T),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),$(e,a),$(a,u),w(c,a,null),$(a,p),_=!0},p(k,T){const C={};T&512&&(C.$$scope={dirty:T,ctx:k}),n.$set(C);const j={};T&512&&(j.$$scope={dirty:T,ctx:k}),c.$set(j)},i(k){_||(m(n.$$.fragment,k),m(c.$$.fragment,k),_=!0)},o(k){g(n.$$.fragment,k),g(c.$$.fragment,k),_=!1},d(k){k&&h(e),v(n),v(c)}}}function Zf(o){let e,l,t,n,r,s;l=new Fe({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),n=new Sn({props:i}),H.push(()=>E(n,"value",f)),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(a,u){d(a,e,u),w(l,e,null),$(e,t),w(n,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,B(()=>r=!1)),n.$set(c)},i(a){s||(m(l.$$.fragment,a),m(n.$$.fragment,a),s=!0)},o(a){g(l.$$.fragment,a),g(n.$$.fragment,a),s=!1},d(a){a&&h(e),v(l),v(n)}}}function Qf(o){let e,l,t=o[8].indicative_mph+"",n,r,s,f,i,a=o[8].highest_mph+"",u,c,p=o[4][o[8].highest_description]+"",_,k;return{c(){e=S("p"),l=y("Posted speed limit: "),n=y(t),r=y(" mph"),s=L(),f=S("p"),i=y("Highest average speed: "),u=y(a),c=y(" mph (during "),_=y(p),k=y(")")},m(T,C){d(T,e,C),$(e,l),$(e,n),$(e,r),d(T,s,C),d(T,f,C),$(f,i),$(f,u),$(f,c),$(f,_),$(f,k)},p(T,C){C&256&&t!==(t=T[8].indicative_mph+"")&&A(n,t),C&256&&a!==(a=T[8].highest_mph+"")&&A(u,a),C&256&&p!==(p=T[4][T[8].highest_description]+"")&&A(_,p)},d(T){T&&(h(e),h(s),h(f))}}}function Kf(o){let e,l;return e=new fe({props:{$$slots:{default:[Qf,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Xf(o){let e,l;const t=[z(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get",o[0].kind],o[2],o[1]),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[Kf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(St)),s&0&&{sourceLayer:St},t[2],t[3],s&7&&{paint:{"line-color":me(["get",r[0].kind],r[2],r[1]),"line-width":Pe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function xf(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:St,title:eu,$$slots:{controls:[Zf],help:[Vf]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${Xt()}/v1/${St}.pmtiles`,$$slots:{default:[Xf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let St="road_speeds",eu="OS Speeds";function tu(o){return o.show?o.kind:null}function nu(o){return{show:!0,kind:o}}function lu(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,20,30,40,50,90],f=zt(St,{show:!1,kind:"indicative_mph"},tu,nu);Y(o,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class ru extends K{constructor(e){super(),X(this,e,lu,xf,J,{})}}function ou(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function su(o){let e,l,t,n,r,s,f,i,a,u;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ou]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=S("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),s=S("p"),f=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(i.$$.fragment),a=y("."),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),w(i,s,null),$(s,a),u=!0},p(c,p){const _={};p&64&&(_.$$scope={dirty:p,ctx:c}),i.$set(_)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){g(i.$$.fragment,c),u=!1},d(c){c&&h(e),v(i)}}}function iu(o){let e,l,t;return l=new Fe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function au(o){let e,l,t,n=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",p,_;return{c(){e=S("p"),l=y("Average width: "),t=S("b"),r=y(n),s=y(`
        meters`),f=L(),i=S("p"),a=y("Minimum width: "),u=S("b"),p=y(c),_=y(`
        meters`)},m(k,T){d(k,e,T),$(e,l),$(e,t),$(t,r),$(e,s),d(k,f,T),d(k,i,T),$(i,a),$(i,u),$(u,p),$(i,_)},p(k,T){T&32&&n!==(n=k[5].average+"")&&A(r,n),T&32&&c!==(c=k[5].minimum+"")&&A(p,c)},d(k){k&&(h(e),h(f),h(i))}}}function fu(o){let e,l;return e=new fe({props:{$$slots:{default:[au,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function uu(o){let e,l;const t=[z(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":me(["get","average"],o[2],o[1]),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[fu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(Ct)),s&0&&{sourceLayer:Ct},t[2],t[3],s&6&&{paint:{"line-color":me(["get","average"],r[2],r[1]),"line-width":Pe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function cu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ct,title:$u,$$slots:{controls:[iu],help:[su]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${Xt()}/v1/${Ct}.pmtiles`,$$slots:{default:[uu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ct="road_widths",$u="OS Road widths";function pu(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,5,10,15,20,100],s=pe(Ct);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class mu extends K{constructor(e){super(),X(this,e,pu,cu,J,{})}}function _u(o){let e,l,t;return l=new Se({props:{color:ee.trams}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function gu(o){let e,l,t,n,r;return n=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),b(n.$$.fragment),G(e,"slot","help")},m(s,f){d(s,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:Z,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function du(o){let e,l;const t=[z(Tt),{sourceLayer:Tt},{paint:{"line-color":ee.trams,"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new _e({props:n}),e.$on("click",wu),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Tt)),s&0&&{sourceLayer:Tt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function hu(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Tt,title:bu,$$slots:{help:[gu],icon:[_u]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Tt}.pmtiles`,$$slots:{default:[du]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Tt="trams",bu="Trams";function wu(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function vu(o,e,l){let t,n=pe(Tt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class ku extends K{constructor(e){super(),X(this,e,vu,hu,J,{})}}function yu(o){let e;return{c(){e=y(`Bus Open Data Service
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Su(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[yu]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),b(n.$$.fragment),r=y(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=L(),f=S("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),w(a,e,null),u=!0},p(c,p){const _={};p&64&&(_.$$scope={dirty:p,ctx:c}),n.$set(_)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function Cu(o){let e,l,t,n,r;return n=new Fe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("div"),l=S("p"),l.textContent="Peak hourly frequency:",t=L(),b(n.$$.fragment),G(e,"slot","controls")},m(s,f){d(s,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:Z,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function Tu(o){let e,l,t,n=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,p,_,k,T,C=o[5].peak_description+"",j,F,N,M,O,I=o[5].total+"",R,P,q=o[5].total_description+"",Q,ae;return{c(){e=S("p"),l=y("Stop name: "),t=S("b"),r=y(n),s=L(),f=S("p"),i=y("Peak: "),a=S("b"),c=y(u),p=y(`
        buses during the busiest hour of any day`),_=L(),k=S("p"),T=y("The peak hour is "),j=y(C),F=L(),N=S("p"),M=y("Total buses per day: "),O=S("b"),R=y(I),P=y(`
        (for `),Q=y(q),ae=y(", the busiest day of the week)")},m(D,x){d(D,e,x),$(e,l),$(e,t),$(t,r),d(D,s,x),d(D,f,x),$(f,i),$(f,a),$(a,c),$(f,p),d(D,_,x),d(D,k,x),$(k,T),$(k,j),d(D,F,x),d(D,N,x),$(N,M),$(N,O),$(O,R),$(N,P),$(N,Q),$(N,ae)},p(D,x){x&32&&n!==(n=D[5].stop_name+"")&&A(r,n),x&32&&u!==(u=D[5].peak+"")&&A(c,u),x&32&&C!==(C=D[5].peak_description+"")&&A(j,C),x&32&&I!==(I=D[5].total+"")&&A(R,I),x&32&&q!==(q=D[5].total_description+"")&&A(Q,q)},d(D){D&&(h(e),h(s),h(f),h(_),h(k),h(F),h(N))}}}function Lu(o){let e,l;return e=new fe({props:{$$slots:{default:[Tu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Mu(o){let e,l;const t=[z(Lt),{sourceLayer:Lt},{paint:{"circle-color":me(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Lu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Gt({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(Lt)),s&0&&{sourceLayer:Lt},s&6&&{paint:{"circle-color":me(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Iu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Lt,title:Ou,$$slots:{controls:[Cu],help:[Su]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Lt}.pmtiles`,$$slots:{default:[Mu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Lt="bus_stops",Ou="Bus stops";function ju(o,e,l){let t,n=ee.sequential_low_to_high,r=[0,3,10,20,30,100],s=pe(Lt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Nu extends K{constructor(e){super(),X(this,e,ju,Iu,J,{})}}function Pu(o){let e;return{c(){e=y("crossing")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ru(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Pu]},$$scope:{ctx:o}}}),f=new Xe({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Du(o){let e,l,t;return l=new xt({props:{rows:o[2]}}),{c(){e=S("div"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Fu(o){let e,l=Ol(o[4])+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=Ol(n[4])+"")&&A(t,l)},d(n){n&&h(e)}}}function Gu(o){let e,l;return e=new fe({props:{$$slots:{default:[Fu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Au(o){let e,l;const t=[z(Mt),{sourceLayer:Mt},{paint:{"circle-color":Ke(["get","crossing"],{traffic_signals:ee.signalized_crossing},ee.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Gu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Gt({props:n}),e.$on("click",Hu),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Mt)),s&0&&{sourceLayer:Mt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function zu(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Mt,title:qu,$$slots:{controls:[Du],help:[Ru]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Mt}.pmtiles`,$$slots:{default:[Au]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Mt="crossings",qu="Crossings";function Ol(o){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[o.crossing]??`Unknown crossing type (${o.crossing})`}function Hu(o){window.open(`http://openstreetmap.org/node/${o.detail.features[0].properties.osm_id}`,"_blank")}function Eu(o,e,l){let t,n=pe(Mt);Y(o,n,f=>l(0,t=f));let r=[["Signalized",ee.signalized_crossing],["Other",ee.other_crossing]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class Bu extends K{constructor(e){super(),X(this,e,Eu,zu,J,{})}}function Uu(o){let e;return{c(){e=y("OS Terrain 50")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Wu(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,k;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Uu]},$$scope:{ctx:o}}}),c=new Ce({}),_=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=S("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),s=S("p"),f=y("This layer is built from "),b(i.$$.fragment),a=y(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),b(c.$$.fragment),p=L(),b(_.$$.fragment),G(e,"slot","help")},m(T,C){d(T,e,C),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),w(i,s,null),$(s,a),$(e,u),w(c,e,null),$(e,p),w(_,e,null),k=!0},p(T,C){const j={};C&64&&(j.$$scope={dirty:C,ctx:T}),i.$set(j)},i(T){k||(m(i.$$.fragment,T),m(c.$$.fragment,T),m(_.$$.fragment,T),k=!0)},o(T){g(i.$$.fragment,T),g(c.$$.fragment,T),g(_.$$.fragment,T),k=!1},d(T){T&&h(e),v(i),v(c),v(_)}}}function Yu(o){let e,l,t,n,r;return l=new Fe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),b(l.$$.fragment),t=L(),n=S("p"),n.innerHTML=`<img src="${so}" alt="arrow"/>
      Arrows point uphill`,G(e,"slot","controls")},m(s,f){d(s,e,f),w(l,e,null),$(e,t),$(e,n),r=!0},p:Z,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){g(l.$$.fragment,s),r=!1},d(s){s&&h(e),v(l)}}}function Ju(o){let e,l,t,n=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=S("p"),l=y("Gradient: "),t=S("b"),r=y(n),s=y(`
        %`)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(t,r),$(e,s)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&A(r,n)},d(f){f&&h(e)}}}function Vu(o){let e,l;return e=new fe({props:{$$slots:{default:[Ju,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Zu(o){let e,l,t,n;const r=[z(We),{sourceLayer:We},{manageHoverState:!0},{paint:{"line-color":me(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":Pe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[Vu]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new _e({props:s});const f=[z(We+"_arrows"),{sourceLayer:We},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new Tn({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?le(r,[u&0&&oe(z(We)),u&0&&{sourceLayer:We},r[2],u&6&&{paint:{"line-color":me(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Pe,"line-opacity":te(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?le(f,[u&0&&oe(z(We+"_arrows")),u&0&&{sourceLayer:We},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Qu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:We,title:Ku,$$slots:{controls:[Yu],help:[Wu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${We}.pmtiles`,$$slots:{default:[Zu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let We="gradient",Ku="Gradients";function Xu(o,e,l){let t,n=ee.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=pe(We);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class xu extends K{constructor(e){super(),X(this,e,Xu,Qu,J,{})}}function ec(o){let e,l;return{c(){e=S("img"),G(e,"slot","icon"),Zt(e.src,l=io)||G(e,"src",l),G(e,"alt","a logo representing cycle parking")},m(t,n){d(t,e,n)},p:Z,d(t){t&&h(e)}}}function tc(o){let e;return{c(){e=y("OpenStreetMap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function nc(o){let e;return{c(){e=y("OpenStreetMap Carto")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function lc(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[tc]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[nc]},$$scope:{ctx:o}}}),c=new Xe({}),{c(){e=S("span"),l=S("p"),t=y("Cycle parking, according to "),b(n.$$.fragment),r=y(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=L(),f=S("p"),i=y("Icon from "),b(a.$$.fragment),u=L(),b(c.$$.fragment),G(e,"slot","help")},m(_,k){d(_,e,k),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),w(a,f,null),$(e,u),w(c,e,null),p=!0},p(_,k){const T={};k&16&&(T.$$scope={dirty:k,ctx:_}),n.$set(T);const C={};k&16&&(C.$$scope={dirty:k,ctx:_}),a.$set(C)},i(_){p||(m(n.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),p=!0)},o(_){g(n.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),p=!1},d(_){_&&h(e),v(n),v(a),v(c)}}}function rc(o){let e,l,t,n=(o[3].capacity??"unknown")+"",r;return{c(){e=S("p"),l=y("Capacity: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&8&&n!==(n=(s[3].capacity??"unknown")+"")&&A(r,n)},d(s){s&&h(e)}}}function oc(o){let e,l;return e=new fe({props:{$$slots:{default:[rc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function sc(o){let e,l;const t=[z(It),{sourceLayer:It},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[oc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Tn({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(It)),s&0&&{sourceLayer:It},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ic(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:It,title:ac,$$slots:{help:[lc],icon:[ec]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${It}.pmtiles`,$$slots:{default:[sc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let It="cycle_parking",ac="Cycle parking";function fc(o,e,l){let t,n=pe(It);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class uc extends K{constructor(e){super(),X(this,e,fc,ic,J,{})}}function cc(o){let e,l,t,n,r;return n=new Xe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),b(n.$$.fragment),G(e,"slot","help")},m(s,f){d(s,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:Z,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){g(n.$$.fragment,s),r=!1},d(s){s&&h(e),v(n)}}}function $c(o){let e,l,t;return e=new Se({props:{color:ee.education.schools}}),{c(){b(e.$$.fragment),l=y(`
        Schools`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Z,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function pc(o){let e,l,t;return e=new Se({props:{color:ee.education.colleges}}),{c(){b(e.$$.fragment),l=y(`
        Colleges`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Z,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function mc(o){let e,l,t;return e=new Se({props:{color:ee.education.universities}}),{c(){b(e.$$.fragment),l=y(`
        Universities`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Z,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function _c(o){let e,l,t,n,r,s,f,i,a;function u(C){o[3](C)}let c={$$slots:{default:[$c]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new Ye({props:c}),H.push(()=>E(e,"checked",u));function p(C){o[4](C)}let _={$$slots:{default:[pc]},$$scope:{ctx:o}};o[0].college!==void 0&&(_.checked=o[0].college),n=new Ye({props:_}),H.push(()=>E(n,"checked",p));function k(C){o[5](C)}let T={$$slots:{default:[mc]},$$scope:{ctx:o}};return o[0].university!==void 0&&(T.checked=o[0].university),f=new Ye({props:T}),H.push(()=>E(f,"checked",k)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment)},m(C,j){w(e,C,j),d(C,t,j),w(n,C,j),d(C,s,j),w(f,C,j),a=!0},p(C,j){const F={};j&2048&&(F.$$scope={dirty:j,ctx:C}),!l&&j&1&&(l=!0,F.checked=C[0].school,B(()=>l=!1)),e.$set(F);const N={};j&2048&&(N.$$scope={dirty:j,ctx:C}),!r&&j&1&&(r=!0,N.checked=C[0].college,B(()=>r=!1)),n.$set(N);const M={};j&2048&&(M.$$scope={dirty:j,ctx:C}),!i&&j&1&&(i=!0,M.checked=C[0].university,B(()=>i=!1)),f.$set(M)},i(C){a||(m(e.$$.fragment,C),m(n.$$.fragment,C),m(f.$$.fragment,C),a=!0)},o(C){g(e.$$.fragment,C),g(n.$$.fragment,C),g(f.$$.fragment,C),a=!1},d(C){C&&(h(t),h(s)),v(e,C),v(n,C),v(f,C)}}}function gc(o){let e,l,t;return l=new De({props:{small:!0,$$slots:{default:[_c]},$$scope:{ctx:o}}}),{c(){e=S("div"),b(l.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function dc(o){let e,l=(o[10].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&A(t,l)},d(n){n&&h(e)}}}function hc(o){let e,l;return e=new fe({props:{$$slots:{default:[dc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function bc(o){let e,l;const t=[z(Ot),{sourceLayer:Ot},{paint:{"fill-color":Ke(["get","type"],{school:ee.education.schools,college:ee.education.colleges,university:ee.education.universities},"grey"),"fill-opacity":te(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[hc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&5?le(t,[s&0&&oe(z(Ot)),s&0&&{sourceLayer:Ot},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function wc(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Ot,title:vc,$$slots:{controls:[gc],help:[cc]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Ot}.pmtiles`,$$slots:{default:[bc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ot="education",vc="Education";function kc(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function yc(o,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(_){return _.show?n.filter(k=>_[k]).join(","):null}let f=zt(Ot,r,s,kc);Y(o,f,_=>l(0,t=_));function i(_){let k=n.filter(T=>_[T]);return["in",["get","type"],["literal",k]]}function a(_){o.$$.not_equal(t.school,_)&&(t.school=_,f.set(t))}function u(_){o.$$.not_equal(t.college,_)&&(t.college=_,f.set(t))}function c(_){o.$$.not_equal(t.university,_)&&(t.university=_,f.set(t))}function p(_){o.$$.not_equal(t.show,_)&&(t.show=_,f.set(t))}return[t,f,i,a,u,c,p]}class Sc extends K{constructor(e){super(),X(this,e,yc,wc,J,{})}}function Cc(o){let e,l,t;return l=new Se({props:{color:ee.hospitals}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Tc(o){let e;return{c(){e=y("hospital")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Lc(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Tc]},$$scope:{ctx:o}}}),f=new Xe({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){d(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Mc(o){let e,l=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&A(t,l)},d(n){n&&h(e)}}}function Ic(o){let e,l;return e=new fe({props:{$$slots:{default:[Mc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Oc(o){let e,l;const t=[z(jt),{sourceLayer:jt},{paint:{"fill-color":ee.hospitals,"fill-opacity":te(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ic]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(jt)),s&0&&{sourceLayer:jt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function jc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:jt,title:Nc,$$slots:{help:[Lc],icon:[Cc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${jt}.pmtiles`,$$slots:{default:[Oc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let jt="hospitals",Nc="Hospitals";function Pc(o,e,l){let t,n=pe(jt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Rc extends K{constructor(e){super(),X(this,e,Pc,jc,J,{})}}function Dc(o){let e,l;return{c(){e=S("img"),G(e,"slot","icon"),Zt(e.src,l=ao)||G(e,"src",l),G(e,"alt","A logo representing a train")},m(t,n){d(t,e,n)},p:Z,d(t){t&&h(e)}}}function Fc(o){let e;return{c(){e=y("railway station")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Gc(o){let e;return{c(){e=y(`National Rail
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ac(o){let e,l,t,n,r,s,f,i,a,u,c,p,_;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Fc]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Gc]},$$scope:{ctx:o}}}),p=new Xe({}),{c(){e=S("div"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),f=S("p"),i=y("Icon from "),b(a.$$.fragment),u=y(". (Note that not all stations shown are National Rail.)"),c=L(),b(p.$$.fragment),G(e,"slot","help")},m(k,T){d(k,e,T),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),w(a,f,null),$(f,u),$(e,c),w(p,e,null),_=!0},p(k,T){const C={};T&16&&(C.$$scope={dirty:T,ctx:k}),n.$set(C);const j={};T&16&&(j.$$scope={dirty:T,ctx:k}),a.$set(j)},i(k){_||(m(n.$$.fragment,k),m(a.$$.fragment,k),m(p.$$.fragment,k),_=!0)},o(k){g(n.$$.fragment,k),g(a.$$.fragment,k),g(p.$$.fragment,k),_=!1},d(k){k&&h(e),v(n),v(a),v(p)}}}function zc(o){let e,l=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&A(t,l)},d(n){n&&h(e)}}}function qc(o){let e,l;return e=new fe({props:{$$slots:{default:[zc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Hc(o){let e,l;const t=[z(Kt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[qc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Tn({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Kt)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ec(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Kt,title:Bc,$$slots:{help:[Ac],icon:[Dc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new At({props:{data:`${ce()}/v1/${Kt}.geojson`,$$slots:{default:[Hc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Kt="railway_stations",Bc="Railway stations";function Uc(o,e,l){let t,n=pe(Kt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Wc extends K{constructor(e){super(),X(this,e,Uc,Ec,J,{})}}function Yc(o){let e,l,t;return l=new Se({props:{color:ee.sports_spaces}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Jc(o){let e;return{c(){e=y("sports pitches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Vc(o){let e;return{c(){e=y("sports centres")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Zc(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Jc]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Vc]},$$scope:{ctx:o}}}),a=new Xe({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" and "),b(s.$$.fragment),f=y(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){d(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),$(e,i),w(a,e,null),u=!0},p(c,p){const _={};p&16&&(_.$$scope={dirty:p,ctx:c}),n.$set(_);const k={};p&16&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(s),v(a)}}}function Qc(o){let e,l=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&A(t,l)},d(n){n&&h(e)}}}function Kc(o){let e,l;return e=new fe({props:{$$slots:{default:[Qc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Xc(o){let e,l;const t=[z(Nt),{sourceLayer:Nt},{paint:{"fill-color":ee.sports_spaces,"fill-opacity":te(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Kc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function xc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Nt,title:e$,$$slots:{help:[Zc],icon:[Yc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Nt}.pmtiles`,$$slots:{default:[Xc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Nt="sports_spaces",e$="Sports spaces";function t$(o,e,l){let t,n=pe(Nt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class n$ extends K{constructor(e){super(),X(this,e,t$,xc,J,{})}}function l$(o){let e;return{c(){e=y("DfT stats19")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function r$(o){let e;return{c(){e=y("documented by DfT")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function o$(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,k,T,C,j,F,N,M,O,I,R,P;return n=new re({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[l$]},$$scope:{ctx:o}}}),F=new re({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[r$]},$$scope:{ctx:o}}}),R=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("This layer shows collisions recorded in the "),b(n.$$.fragment),r=y(" dataset, as of 30 September 2024. Please note these limitations:"),s=L(),f=S("ul"),i=S("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=S("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),p=S("li"),p.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,_=L(),k=S("li"),k.textContent='The "pedestrians" category also include mobility scooters',T=L(),C=S("li"),j=y("All limitations "),b(F.$$.fragment),N=y(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),M=L(),O=S("p"),O.textContent="You can click a point to open the full report, thanks to CycleStreets.",I=L(),b(R.$$.fragment),G(e,"slot","help")},m(q,Q){d(q,e,Q),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),$(f,a),$(f,u),$(f,c),$(f,p),$(f,_),$(f,k),$(f,T),$(f,C),$(C,j),w(F,C,null),$(C,N),$(e,M),$(e,O),$(e,I),w(R,e,null),P=!0},p(q,Q){const ae={};Q&4194304&&(ae.$$scope={dirty:Q,ctx:q}),n.$set(ae);const D={};Q&4194304&&(D.$$scope={dirty:Q,ctx:q}),F.$set(D)},i(q){P||(m(n.$$.fragment,q),m(F.$$.fragment,q),m(R.$$.fragment,q),P=!0)},o(q){g(n.$$.fragment,q),g(F.$$.fragment,q),g(R.$$.fragment,q),P=!1},d(q){q&&h(e),v(n),v(F),v(R)}}}function s$(o){let e;return{c(){e=y("Pedestrians")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function i$(o){let e;return{c(){e=y("Cyclists")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function a$(o){let e;return{c(){e=y("Horse riders")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function f$(o){let e;return{c(){e=y("Other")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function u$(o){let e,l,t,n,r,s,f,i,a,u,c,p;function _(O){o[10](O)}let k={$$slots:{default:[s$]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(k.checked=o[0].pedestrians),e=new Ye({props:k}),H.push(()=>E(e,"checked",_));function T(O){o[11](O)}let C={$$slots:{default:[i$]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(C.checked=o[0].cyclists),n=new Ye({props:C}),H.push(()=>E(n,"checked",T));function j(O){o[12](O)}let F={$$slots:{default:[a$]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(F.checked=o[0].horseRiders),f=new Ye({props:F}),H.push(()=>E(f,"checked",j));function N(O){o[13](O)}let M={$$slots:{default:[f$]},$$scope:{ctx:o}};return o[0].other!==void 0&&(M.checked=o[0].other),u=new Ye({props:M}),H.push(()=>E(u,"checked",N)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment)},m(O,I){w(e,O,I),d(O,t,I),w(n,O,I),d(O,s,I),w(f,O,I),d(O,a,I),w(u,O,I),p=!0},p(O,I){const R={};I&4194304&&(R.$$scope={dirty:I,ctx:O}),!l&&I&1&&(l=!0,R.checked=O[0].pedestrians,B(()=>l=!1)),e.$set(R);const P={};I&4194304&&(P.$$scope={dirty:I,ctx:O}),!r&&I&1&&(r=!0,P.checked=O[0].cyclists,B(()=>r=!1)),n.$set(P);const q={};I&4194304&&(q.$$scope={dirty:I,ctx:O}),!i&&I&1&&(i=!0,q.checked=O[0].horseRiders,B(()=>i=!1)),f.$set(q);const Q={};I&4194304&&(Q.$$scope={dirty:I,ctx:O}),!c&&I&1&&(c=!0,Q.checked=O[0].other,B(()=>c=!1)),u.$set(Q)},i(O){p||(m(e.$$.fragment,O),m(n.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),p=!0)},o(O){g(e.$$.fragment,O),g(n.$$.fragment,O),g(f.$$.fragment,O),g(u.$$.fragment,O),p=!1},d(O){O&&(h(t),h(s),h(a)),v(e,O),v(n,O),v(f,O),v(u,O)}}}function c$(o){let e,l,t,n,r,s,f,i,a,u,c,p,_;return l=new De({props:{small:!0,$$slots:{default:[u$]},$$scope:{ctx:o}}}),u=new xt({props:{rows:o[9]}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),n=S("div"),r=y(`Filter years:
      `),s=S("input"),f=y(`
      -
      `),i=S("input"),a=L(),b(u.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2023),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2023),G(i,"class","svelte-1ft65rw"),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(k,T){d(k,e,T),w(l,e,null),$(e,t),$(e,n),$(n,r),$(n,s),Ve(s,o[0].minYear),$(n,f),$(n,i),Ve(i,o[0].maxYear),$(e,a),w(u,e,null),c=!0,p||(_=[at(s,"input",o[14]),at(i,"input",o[15])],p=!0)},p(k,T){const C={};T&4194305&&(C.$$scope={dirty:T,ctx:k}),l.$set(C),T&1&&Qt(s.value)!==k[0].minYear&&Ve(s,k[0].minYear),T&1&&Qt(i.value)!==k[0].maxYear&&Ve(i,k[0].maxYear)},i(k){c||(m(l.$$.fragment,k),m(u.$$.fragment,k),c=!0)},o(k){g(l.$$.fragment,k),g(u.$$.fragment,k),c=!1},d(k){k&&h(e),v(l),v(u),p=!1,wr(_)}}}function jl(o){let e,l,t,n=o[3][o[21].pedestrian_location]+"",r;return{c(){e=S("p"),l=y("Pedestrian location: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[3][s[21].pedestrian_location]+"")&&A(r,n)},d(s){s&&h(e)}}}function Nl(o){let e,l,t,n=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=S("p"),l=y("Pedestrian movement: "),t=S("b"),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[4][s[21].pedestrian_movement]+"")&&A(r,n)},d(s){s&&h(e)}}}function $$(o){let e,l,t,n=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,p,_,k,T,C=Pl(o[21])+"",j,F,N,M,O,I=o[21].pedestrian_location&&jl(o),R=o[21].pedestrian_movement&&Nl(o);return{c(){e=S("p"),l=y("Year: "),t=S("b"),r=y(n),s=L(),f=S("p"),i=y("Severity: "),a=S("b"),c=y(u),p=L(),_=S("p"),k=y("Casualties: "),T=S("b"),j=y(C),F=L(),I&&I.c(),N=L(),R&&R.c(),M=L(),O=S("p"),O.textContent="Click to open full report in CycleStreets"},m(P,q){d(P,e,q),$(e,l),$(e,t),$(t,r),d(P,s,q),d(P,f,q),$(f,i),$(f,a),$(a,c),d(P,p,q),d(P,_,q),$(_,k),$(_,T),$(T,j),d(P,F,q),I&&I.m(P,q),d(P,N,q),R&&R.m(P,q),d(P,M,q),d(P,O,q)},p(P,q){q&2097152&&n!==(n=P[21].year+"")&&A(r,n),q&2097152&&u!==(u=P[5][P[21].severity]+"")&&A(c,u),q&2097152&&C!==(C=Pl(P[21])+"")&&A(j,C),P[21].pedestrian_location?I?I.p(P,q):(I=jl(P),I.c(),I.m(N.parentNode,N)):I&&(I.d(1),I=null),P[21].pedestrian_movement?R?R.p(P,q):(R=Nl(P),R.c(),R.m(M.parentNode,M)):R&&(R.d(1),R=null)},d(P){P&&(h(e),h(s),h(f),h(p),h(_),h(F),h(N),h(M),h(O)),I&&I.d(P),R&&R.d(P)}}}function p$(o){let e,l;return e=new fe({props:{$$slots:{default:[$$,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function m$(o){let e,l;const t=[z(Pt),{sourceLayer:Pt},{paint:{"circle-color":me(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[p$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Gt({props:n}),e.$on("click",h$),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&451?le(t,[s&0&&oe(z(Pt)),s&0&&{sourceLayer:Pt},s&448&&{paint:{"circle-color":me(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function _$(o){let e,l,t,n,r;function s(i){o[16](i)}let f={name:Pt,title:g$,$$slots:{controls:[c$],help:[o$]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Pt}.pmtiles`,$$slots:{default:[m$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Pt="stats19",g$="Stats19";function d$(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Pl(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function h$(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function b$(o,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(P){return P.show?`${r.filter(Q=>P[Q]).join(",")}/${P.minYear}/${P.maxYear}`:null}let i=zt(Pt,s,f,d$);Y(o,i,P=>l(0,n=P));function a(P,q,Q,ae,D,x){let V=["any"];return n.pedestrians&&V.push(["get","pedestrian"]),n.cyclists&&V.push(["get","cyclist"]),n.horseRiders&&V.push(["get","horse_rider"]),n.other&&V.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],V]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},p={1:"Fatal",2:"Serious",3:"Slight"},_=ee.sequential_low_to_high[4],k=ee.sequential_low_to_high[2],T=ee.sequential_low_to_high[0],C=[["Fatal",_],["Serious",k],["Slight",T]];function j(P){o.$$.not_equal(n.pedestrians,P)&&(n.pedestrians=P,i.set(n))}function F(P){o.$$.not_equal(n.cyclists,P)&&(n.cyclists=P,i.set(n))}function N(P){o.$$.not_equal(n.horseRiders,P)&&(n.horseRiders=P,i.set(n))}function M(P){o.$$.not_equal(n.other,P)&&(n.other=P,i.set(n))}function O(){n.minYear=Qt(this.value),i.set(n)}function I(){n.maxYear=Qt(this.value),i.set(n)}function R(P){o.$$.not_equal(n.show,P)&&(n.show=P,i.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,p,_,k,T,C,j,F,N,M,O,I,R]}class w$ extends K{constructor(e){super(),X(this,e,b$,_$,J,{})}}function v$(o){let e;return{c(){e=y(`DfT road statistics
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function k$(o){let e;return{c(){e=y("methodology")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function y$(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[v$]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[k$]},$$scope:{ctx:o}}}),c=new Ce({}),{c(){e=S("span"),l=S("p"),t=y("AADF (annual average daily flow) data from "),b(n.$$.fragment),r=y(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),b(s.$$.fragment),f=y(" for details and caveats about the measurements."),i=L(),a=S("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),b(c.$$.fragment),G(e,"slot","help")},m(_,k){d(_,e,k),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),$(e,i),$(e,a),$(e,u),w(c,e,null),p=!0},p(_,k){const T={};k&128&&(T.$$scope={dirty:k,ctx:_}),n.$set(T);const C={};k&128&&(C.$$scope={dirty:k,ctx:_}),s.$set(C)},i(_){p||(m(n.$$.fragment,_),m(s.$$.fragment,_),m(c.$$.fragment,_),p=!0)},o(_){g(n.$$.fragment,_),g(s.$$.fragment,_),g(c.$$.fragment,_),p=!1},d(_){_&&h(e),v(n),v(s),v(c)}}}function S$(o){let e,l,t;return l=new Fe({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function C$(o){let e,l=o[6].location+"",t,n,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",p,_,k,T,C=o[6].year+"",j,F,N,M=o[6].pedal_cycles.toLocaleString()+"",O,I,R,P,q,Q=o[6].method+"",ae;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),s=y("Total motor vehicles ("),i=y(f),a=y(` AADF):
        `),u=S("b"),p=y(c),_=L(),k=S("p"),T=y("Total pedal cycles ("),j=y(C),F=y(` AADF):
        `),N=S("b"),O=y(M),I=L(),R=S("p"),P=y("Count method: "),q=S("b"),ae=y(Q)},m(D,x){d(D,e,x),$(e,t),d(D,n,x),d(D,r,x),$(r,s),$(r,i),$(r,a),$(r,u),$(u,p),d(D,_,x),d(D,k,x),$(k,T),$(k,j),$(k,F),$(k,N),$(N,O),d(D,I,x),d(D,R,x),$(R,P),$(R,q),$(q,ae)},p(D,x){x&64&&l!==(l=D[6].location+"")&&A(t,l),x&64&&f!==(f=D[6].year+"")&&A(i,f),x&64&&c!==(c=D[6].motor_vehicles.toLocaleString()+"")&&A(p,c),x&64&&C!==(C=D[6].year+"")&&A(j,C),x&64&&M!==(M=D[6].pedal_cycles.toLocaleString()+"")&&A(O,M),x&64&&Q!==(Q=D[6].method+"")&&A(ae,Q)},d(D){D&&(h(e),h(n),h(r),h(_),h(k),h(I),h(R))}}}function T$(o){let e,l;return e=new fe({props:{$$slots:{default:[C$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function L$(o){let e,l;const t=[z(Rt),{sourceLayer:Rt},{paint:{"circle-color":me(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[T$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Gt({props:n}),e.$on("click",O$),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(Rt)),s&0&&{sourceLayer:Rt},s&6&&{paint:{"circle-color":me(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function M$(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Rt,title:I$,$$slots:{controls:[S$],help:[y$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new $e({props:{url:`pmtiles://${ce()}/v1/${Rt}.pmtiles`,$$slots:{default:[L$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Rt="vehicle_counts",I$="Vehicle counts";function O$(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function j$(o,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=pe(Rt);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class N$ extends K{constructor(e){super(),X(this,e,j$,M$,J,{})}}function Rl(o,e,l){const t=o.slice();return t[6]=e[l],t}function P$(o){let e;return{c(){e=S("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,G(e,"slot","help")},m(l,t){d(l,e,t)},p:Z,d(l){l&&h(e)}}}function R$(o){let e,l,t;return l=new xt({props:{rows:o[3]}}),{c(){e=S("div"),b(l.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Z,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function D$(o){let e,l=o[5]["Issue ID"]+"",t,n,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=S("h2"),t=y(l),n=y(" - "),s=y(r),f=L(),i=S("p"),u=y(a)},m(c,p){d(c,e,p),$(e,t),$(e,n),$(e,s),d(c,f,p),d(c,i,p),$(i,u)},p(c,p){p&32&&l!==(l=c[5]["Issue ID"]+"")&&A(t,l),p&32&&r!==(r=c[5].Code+"")&&A(s,r),p&32&&a!==(a=c[5]["Issue Stage"]+"")&&A(u,a)},d(c){c&&(h(e),h(f),h(i))}}}function Dl(o){let e,l=o[6]+"",t,n,r,s=o[5][o[6]]+"",f,i;return{c(){e=S("p"),t=y(l),n=y(`:
            `),r=S("b"),f=y(s),i=L()},m(a,u){d(a,e,u),$(e,t),$(e,n),$(e,r),$(r,f),$(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&A(f,s)},d(a){a&&h(e)}}}function F$(o){let e,l=he(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Dl(Rl(o,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();se(e,"max-width","30vw"),se(e,"max-height","60vh"),se(e,"overflow","auto")},m(n,r){d(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&36){l=he(n[2]);let s;for(s=0;s<l.length;s+=1){const f=Rl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Dl(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&h(e),Qe(t,n)}}}function G$(o){let e,l,t,n;return e=new fe({props:{openOn:"hover",$$slots:{default:[D$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[F$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function A$(o){let e,l;const t=[z(rn),{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[G$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Gt({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&9?le(t,[s&0&&oe(z(rn)),s&8&&{paint:{"circle-color":Ke(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function z$(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:rn,title:q$,$$slots:{controls:[R$],help:[P$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),H.push(()=>E(e,"show",s)),n=new At({props:{data:`${Xt()}/v1/problems.geojson.gz`,$$slots:{default:[A$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let rn="problems",q$="Issues & Conflicts";function H$(o,e,l){let t,n=pe(rn);Y(o,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,s,f]}class E$ extends K{constructor(e){super(),X(this,e,H$,z$,J,{})}}function B$(o){let e;function l(r,s){return r[2]<=100?Y$:W$}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),d(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:Z,o:Z,d(r){r&&h(e),n.d(r)}}}function U$(o){let e,l;return e=new Je({props:{$$slots:{default:[J$]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function W$(o){let e;return{c(){e=S("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){d(l,e,t)},p:Z,d(l){l&&h(e)}}}function Y$(o){let e,l,t;return{c(){e=S("label"),l=y(`Downloading scheme data
      `),t=S("progress"),t.value=o[2],G(t,"class","svelte-q3473n")},m(n,r){d(n,e,r),$(e,l),$(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&h(e)}}}function J$(o){let e;return{c(){e=y("Load latest scheme data")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function V$(o){let e,l,t,n;const r=[U$,B$],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(l=s[e]=r[e](o)),{c(){l&&l.c(),t=ve()},m(i,a){~e&&s[e].m(i,a),d(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(l&&(be(),g(s[u],1,1,()=>{s[u]=null}),we()),~e?(l=s[e],l?l.p(i,a):(l=s[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){g(l),n=!1},d(i){i&&h(t),~e&&s[e].d(i)}}}function Z$(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await Gr(`${Xt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,s=c)});l(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}vr(async()=>{n&&await f()});async function i(){l(0,n=!0),await f()}return o.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,s,i,t]}class Q$ extends K{constructor(e){super(),X(this,e,Z$,V$,J,{loadFile:4})}}const on=je({type:"FeatureCollection",features:[],schemes:{}}),hn=je(new Map),Fl=je(""),Gl=je(""),bn=je({type:"FeatureCollection",features:[],schemes:{}}),wn=je(new Map),Al=je(""),zl=je("");function K$(o){let e={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},l=new Map,t={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},n=new Map;for(let[r,s]of Object.entries(o.schemes))s.pipeline?(n.set(r,s),t.schemes[r]=s):(l.set(r,s),e.schemes[r]=s);for(let r of o.features){if(!X$(r))continue;let s=r.properties.scheme_reference,f=l.has(s),a=(f?l:n).get(s);a.browse&&(r.properties.funding_programme=a.browse.funding_programme,r.properties.current_milestone=a.browse.current_milestone);let u=f?e:t;r.id=u.features.length+1,u.features.push(r)}on.set(e),hn.set(l),bn.set(t),wn.set(n)}function X$(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}let Wt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},vn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function ql(o,e,l){const t=o.slice();return t[28]=e[l],t[29]=e,t[30]=l,t}function x$(o){let e;return{c(){e=y("Filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ep(o){let e;return{c(){e=y("Reset all filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function tp(o){let e,l,t,n,r,s,f,i;e=new _n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[rp]},$$scope:{ctx:o}}});function a(_){o[23](_)}let u={label:"Scheme name or reference",options:sn(o[3])};o[0]!==void 0&&(u.value=o[0]),t=new Ir({props:u}),H.push(()=>E(t,"value",a));function c(_){o[24](_)}let p={label:"Authority or region",choices:o[10],emptyOption:!0};return o[4]!==void 0&&(p.value=o[4]),s=new Ft({props:p}),H.push(()=>E(s,"value",c)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),r=L(),b(s.$$.fragment)},m(_,k){w(e,_,k),d(_,l,k),w(t,_,k),d(_,r,k),w(s,_,k),i=!0},p(_,k){const T={};k[0]&2|k[1]&1&&(T.$$scope={dirty:k,ctx:_}),e.$set(T);const C={};k[0]&8&&(C.options=sn(_[3])),!n&&k[0]&1&&(n=!0,C.value=_[0],B(()=>n=!1)),t.$set(C);const j={};k[0]&1024&&(j.choices=_[10]),!f&&k[0]&16&&(f=!0,j.value=_[4],B(()=>f=!1)),s.$set(j)},i(_){i||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(s.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(s.$$.fragment,_),i=!1},d(_){_&&(h(l),h(r)),v(e,_),v(t,_),v(s,_)}}}function np(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,k,T,C;t=new _n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[sp]},$$scope:{ctx:o}}});function j(R){o[17](R)}let F={label:"Scheme name or reference",options:sn(o[3])};o[0]!==void 0&&(F.value=o[0]),r=new Ir({props:F}),H.push(()=>E(r,"value",j));function N(R){o[18](R)}let M={label:"Authority or region",choices:o[10],emptyOption:!0};o[4]!==void 0&&(M.value=o[4]),i=new Ft({props:M}),H.push(()=>E(i,"value",N)),p=new _n({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[fp]},$$scope:{ctx:o}}});function O(R){o[20](R)}let I={label:"Current milestone",choices:o[11],emptyOption:!0};return o[6]!==void 0&&(I.value=o[6]),k=new Ft({props:I}),H.push(()=>E(k,"value",O)),{c(){e=S("div"),l=S("div"),b(t.$$.fragment),n=L(),b(r.$$.fragment),f=L(),b(i.$$.fragment),u=L(),c=S("div"),b(p.$$.fragment),_=L(),b(k.$$.fragment),G(l,"class","govuk-grid-column-one-half"),G(c,"class","govuk-grid-column-one-half"),G(e,"class","govuk-grid-row")},m(R,P){d(R,e,P),$(e,l),w(t,l,null),$(l,n),w(r,l,null),$(l,f),w(i,l,null),$(e,u),$(e,c),w(p,c,null),$(c,_),w(k,c,null),C=!0},p(R,P){const q={};P[0]&2|P[1]&1&&(q.$$scope={dirty:P,ctx:R}),t.$set(q);const Q={};P[0]&8&&(Q.options=sn(R[3])),!s&&P[0]&1&&(s=!0,Q.value=R[0],B(()=>s=!1)),r.$set(Q);const ae={};P[0]&1024&&(ae.choices=R[10]),!a&&P[0]&16&&(a=!0,ae.value=R[4],B(()=>a=!1)),i.$set(ae);const D={};P[0]&32|P[1]&1&&(D.$$scope={dirty:P,ctx:R}),p.$set(D);const x={};!T&&P[0]&64&&(T=!0,x.value=R[6],B(()=>T=!1)),k.$set(x)},i(R){C||(m(t.$$.fragment,R),m(r.$$.fragment,R),m(i.$$.fragment,R),m(p.$$.fragment,R),m(k.$$.fragment,R),C=!0)},o(R){g(t.$$.fragment,R),g(r.$$.fragment,R),g(i.$$.fragment,R),g(p.$$.fragment,R),g(k.$$.fragment,R),C=!1},d(R){R&&h(e),v(t),v(r),v(i),v(p),v(k)}}}function lp(o){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rp(o){let e,l,t,n,r,s;return t=new Je({props:{$$slots:{default:[lp]},$$scope:{ctx:o}}}),t.$on("click",o[22]),{c(){e=S("input"),l=L(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){d(f,e,i),Ve(e,o[1]),d(f,l,i),w(t,f,i),n=!0,r||(s=at(e,"input",o[21]),r=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&Ve(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,s()}}}function op(o){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function sp(o){let e,l,t,n,r,s;return t=new Je({props:{$$slots:{default:[op]},$$scope:{ctx:o}}}),t.$on("click",o[16]),{c(){e=S("input"),l=L(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){d(f,e,i),Ve(e,o[1]),d(f,l,i),w(t,f,i),n=!0,r||(s=at(e,"input",o[15]),r=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&Ve(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,s()}}}function ip(o){let e=o[28]+"",l,t;return{c(){l=y(e),t=L()},m(n,r){d(n,l,r),d(n,t,r)},p:Z,d(n){n&&(h(l),h(t))}}}function Hl(o){let e,l,t;function n(s){o[19](s,o[28])}let r={$$slots:{default:[ip]},$$scope:{ctx:o}};return o[5][o[28]]!==void 0&&(r.checked=o[5][o[28]]),e=new Ye({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){o=s;const i={};f[1]&1&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&32&&(l=!0,i.checked=o[5][o[28]],B(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function ap(o){let e,l,t=he(Object.keys(Wt)),n=[];for(let s=0;s<t.length;s+=1)n[s]=Hl(ql(o,t,s));const r=s=>g(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);d(s,e,f),l=!0},p(s,f){if(f[0]&32){t=he(Object.keys(Wt));let i;for(i=0;i<t.length;i+=1){const a=ql(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Hl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(s){s&&h(e),Qe(n,s)}}}function fp(o){let e,l;return e=new De({props:{small:!0,$$slots:{default:[ap]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&1&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function up(o){let e;return{c(){e=y("Done")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function cp(o){let e,l,t,n,r=o[9].interventions.toLocaleString()+"",s,f,i,a,u=o[8].size.toLocaleString()+"",c,p,_,k,T,C=El(o[9].totalLength).toFixed(1)+"",j,F,N,M,O,I,R,P,q,Q;M=new Je({props:{$$slots:{default:[ep]},$$scope:{ctx:o}}}),M.$on("click",o[12]);const ae=[np,tp],D=[];function x(V,U){return V[2]=="ATF"?0:1}return I=x(o),R=D[I]=ae[I](o),q=new fo({props:{$$slots:{default:[up]},$$scope:{ctx:o}}}),q.$on("click",o[25]),{c(){e=S("p"),e.textContent="Showing:",l=L(),t=S("ul"),n=S("li"),s=y(r),f=y(" interventions"),i=L(),a=S("li"),c=y(u),p=y(" schemes"),_=L(),k=S("li"),T=y("total route length of "),j=y(C),F=y(" miles"),N=L(),b(M.$$.fragment),O=L(),R.c(),P=L(),b(q.$$.fragment)},m(V,U){d(V,e,U),d(V,l,U),d(V,t,U),$(t,n),$(n,s),$(n,f),$(t,i),$(t,a),$(a,c),$(a,p),$(t,_),$(t,k),$(k,T),$(k,j),$(k,F),d(V,N,U),w(M,V,U),d(V,O,U),D[I].m(V,U),d(V,P,U),w(q,V,U),Q=!0},p(V,U){(!Q||U[0]&512)&&r!==(r=V[9].interventions.toLocaleString()+"")&&A(s,r),(!Q||U[0]&256)&&u!==(u=V[8].size.toLocaleString()+"")&&A(c,u),(!Q||U[0]&512)&&C!==(C=El(V[9].totalLength).toFixed(1)+"")&&A(j,C);const Te={};U[1]&1&&(Te.$$scope={dirty:U,ctx:V}),M.$set(Te);let Ne=I;I=x(V),I===Ne?D[I].p(V,U):(be(),g(D[Ne],1,1,()=>{D[Ne]=null}),we(),R=D[I],R?R.p(V,U):(R=D[I]=ae[I](V),R.c()),m(R,1),R.m(P.parentNode,P));const Ge={};U[1]&1&&(Ge.$$scope={dirty:U,ctx:V}),q.$set(Ge)},i(V){Q||(m(M.$$.fragment,V),m(R),m(q.$$.fragment,V),Q=!0)},o(V){g(M.$$.fragment,V),g(R),g(q.$$.fragment,V),Q=!1},d(V){V&&(h(e),h(l),h(t),h(N),h(O),h(P)),v(M,V),D[I].d(V),v(q,V)}}}function $p(o){let e,l,t,n,r;e=new Je({props:{$$slots:{default:[x$]},$$scope:{ctx:o}}}),e.$on("click",o[14]);function s(i){o[26](i)}let f={title:`Filter ${o[2]} schemes`,$$slots:{default:[cp]},$$scope:{ctx:o}};return o[7]!==void 0&&(f.open=o[7]),t=new Ar({props:f}),H.push(()=>E(t,"open",s)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){w(e,i,a),d(i,l,a),w(t,i,a),r=!0},p(i,a){const u={};a[1]&1&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a[0]&4&&(c.title=`Filter ${i[2]} schemes`),a[0]&2047|a[1]&1&&(c.$$scope={dirty:a,ctx:i}),!n&&a[0]&128&&(n=!0,c.open=i[7],B(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),r=!1},d(i){i&&h(l),v(e,i),v(t,i)}}}function pp(o){var t;let e=new Set;for(let n of o.values())(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function El(o){return o*621371e-9}function sn(o){let e=[];for(let l of o.values())e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function mp(o,e,l){let t,{source:n}=e,{schemes:r}=e,{schemesGj:s}=e,{filterSchemeText:f}=e,{filterInterventionText:i}=e,a=!1,u=new Set,c={interventions:0,totalLength:0},p=Object.keys(vn).map(U=>[U,U]),_="",k=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0])),T="";function C(U,Te,Ne,Ge,pt){let W=U.toLowerCase(),xe=Te.toLowerCase(),qt=de=>{var et,lt,Et,Yt;if(W&&!((et=de.properties.name)!=null&&et.toLowerCase().includes(W))&&!((lt=de.properties.description)!=null&&lt.toLowerCase().includes(W)))return!1;let Ae=r.get(de.properties.scheme_reference);return!(Ne&&((Et=Ae.browse)==null?void 0:Et.authority_or_region)!=Ne||n=="ATF"&&!Ge[Ae.browse.funding_programme]||pt&&((Yt=Ae.browse)==null?void 0:Yt.current_milestone)!=pt||xe&&!Ae.scheme_reference.toLowerCase().includes(xe)&&!(Ae.scheme_name??"").toLowerCase().includes(xe))};l(8,u=new Set(s.features.filter(qt).map(de=>de.properties.scheme_reference))),l(9,c={interventions:0,totalLength:0});let Ht=de=>{var Ae,et;return!(!u.has(de.properties.scheme_reference)||W&&!((Ae=de.properties.name)!=null&&Ae.toLowerCase().includes(W))&&!((et=de.properties.description)!=null&&et.toLowerCase().includes(W)))};for(let de of s.features)Ht(de)?(delete de.properties.hide_while_editing,l(9,c.interventions++,c),de.geometry.type=="LineString"&&de.properties.length_meters&&l(9,c.totalLength+=de.properties.length_meters,c)):de.properties.hide_while_editing=!0;l(13,s),l(9,c)}function j(){l(4,_=""),l(5,k=Object.fromEntries(Object.keys(Wt).map(U=>[U,!0]))),l(6,T=""),l(1,i=""),l(0,f="")}const F=()=>l(7,a=!0);function N(){i=this.value,l(1,i)}const M=()=>l(1,i="");function O(U){f=U,l(0,f)}function I(U){_=U,l(4,_)}function R(U,Te){o.$$.not_equal(k[Te],U)&&(k[Te]=U,l(5,k))}function P(U){T=U,l(6,T)}function q(){i=this.value,l(1,i)}const Q=()=>l(1,i="");function ae(U){f=U,l(0,f)}function D(U){_=U,l(4,_)}const x=()=>l(7,a=!1);function V(U){a=U,l(7,a)}return o.$$set=U=>{"source"in U&&l(2,n=U.source),"schemes"in U&&l(3,r=U.schemes),"schemesGj"in U&&l(13,s=U.schemesGj),"filterSchemeText"in U&&l(0,f=U.filterSchemeText),"filterInterventionText"in U&&l(1,i=U.filterInterventionText)},o.$$.update=()=>{o.$$.dirty[0]&8&&l(10,t=pp(r)),o.$$.dirty[0]&115&&C(i,f,_,k,T)},[f,i,n,r,_,k,T,a,u,c,t,p,j,s,F,N,M,O,I,R,P,q,Q,ae,D,x,V]}class jr extends K{constructor(e){super(),X(this,e,mp,$p,J,{source:2,schemes:3,schemesGj:13,filterSchemeText:0,filterInterventionText:1},null,[-1,-1])}}function Bl(o){let e,l,t,n=o[0].status+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Status",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].status+"")&&A(r,n)},d(s){s&&h(e)}}}function Ul(o){let e,l,t,n=o[0].timescale+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Timescale",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale+"")&&A(r,n)},d(s){s&&h(e)}}}function Wl(o){let e,l,t,n=o[0].timescale_year+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Estimated completion year",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale_year+"")&&A(r,n)},d(s){s&&h(e)}}}function Yl(o){let e,l,t,n=o[0].year_published+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently published",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_published+"")&&A(r,n)},d(s){s&&h(e)}}}function Jl(o){let e,l,t,n=o[0].year_consulted+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently consulted on",t=y(`
    : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_consulted+"")&&A(r,n)},d(s){s&&h(e)}}}function _p(o){let e,l,t,n,r,s=o[0].status&&Bl(o),f=o[0].timescale&&Ul(o),i=o[0].timescale_year&&Wl(o),a=o[0].year_published&&Yl(o),u=o[0].year_consulted&&Jl(o);return{c(){s&&s.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=ve()},m(c,p){s&&s.m(c,p),d(c,e,p),f&&f.m(c,p),d(c,l,p),i&&i.m(c,p),d(c,t,p),a&&a.m(c,p),d(c,n,p),u&&u.m(c,p),d(c,r,p)},p(c,[p]){c[0].status?s?s.p(c,p):(s=Bl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,p):(f=Ul(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,p):(i=Wl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,p):(a=Yl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,p):(u=Jl(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:Z,o:Z,d(c){c&&(h(e),h(l),h(t),h(n),h(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function gp(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Nr extends K{constructor(e){super(),X(this,e,gp,_p,J,{props:0})}}function Vl(o){let e,l,t,n=o[0].budget.toLocaleString()+"",r,s;return{c(){e=S("p"),l=S("b"),l.textContent="Cost",t=y(`
    : `),r=y(n),s=y(`
    GBP`)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r),$(e,s)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&A(r,n)},d(f){f&&h(e)}}}function Zl(o){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ql(o){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Kl(o){let e,l,t,n;return{c(){e=S("p"),l=S("b"),l.textContent="Funding sources",t=y(`
    : `),n=y(o[1])},m(r,s){d(r,e,s),$(e,l),$(e,t),$(e,n)},p(r,s){s&2&&A(n,r[1])},d(r){r&&h(e)}}}function dp(o){let e,l,t,n,r=o[0].budget&&Vl(o),s=o[0].development_funded&&Zl(),f=o[0].construction_funded&&Ql(),i=o[1]&&Kl(o);return{c(){r&&r.c(),e=L(),s&&s.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=ve()},m(a,u){r&&r.m(a,u),d(a,e,u),s&&s.m(a,u),d(a,l,u),f&&f.m(a,u),d(a,t,u),i&&i.m(a,u),d(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=Vl(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=Zl(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=Ql(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=Kl(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:Z,o:Z,d(a){a&&(h(e),h(l),h(t),h(n)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function hp(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function bp(o,e,l){let t,{props:n}=e;return o.$$set=r=>{"props"in r&&l(0,n=r.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=hp(n))},[n,t]}class Pr extends K{constructor(e){super(),X(this,e,bp,dp,J,{props:0})}}function $n(o){const e=o.slice(),l=e[5].pipeline;return e[12]=l,e}function pn(o){const e=o.slice(),l=e[1].pipeline;return e[12]=l,e}function Xl(o){let e,l,t,n=En(o[1].length_meters)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Length",t=y(`
        : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=En(s[1].length_meters)+"")&&A(r,n)},d(s){s&&h(e)}}}function xl(o){let e,l=st(o[1].description,o[3])+"";return{c(){e=S("p")},m(t,n){d(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=st(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&h(e)}}}function er(o){let e,l,t,n,r,s,f,i=o[12].atf4_type&&tr(o),a=o[12].accuracy&&nr(o),u=o[12].is_alternative&&lr();return n=new Pr({props:{props:o[12]}}),s=new Nr({props:{props:o[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(c,p){i&&i.m(c,p),d(c,e,p),a&&a.m(c,p),d(c,l,p),u&&u.m(c,p),d(c,t,p),w(n,c,p),d(c,r,p),w(s,c,p),f=!0},p(c,p){c[12].atf4_type?i?i.p(c,p):(i=tr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].accuracy?a?a.p(c,p):(a=nr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].is_alternative?u||(u=lr(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};p&2&&(_.props=c[12]),n.$set(_);const k={};p&2&&(k.props=c[12]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function tr(o){let e,l,t,n=o[12].atf4_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 type",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[12].atf4_type+"")&&A(r,n)},d(s){s&&h(e)}}}function nr(o){let e,l,t,n=o[12].accuracy+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Accuracy",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[12].accuracy+"")&&A(r,n)},d(s){s&&h(e)}}}function lr(o){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Capital scheme ID",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&A(r,n)},d(f){f&&h(e)}}}function or(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Current milestone",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&A(r,n)},d(f){f&&h(e)}}}function sr(o){let e,l,t,n,r,s,f,i=o[12].scheme_type&&ir(o),a=o[12].atf4_lead_type&&ar(o),u=o[12].scheme_description&&fr(o);return n=new Pr({props:{props:o[12]}}),s=new Nr({props:{props:o[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(c,p){i&&i.m(c,p),d(c,e,p),a&&a.m(c,p),d(c,l,p),u&&u.m(c,p),d(c,t,p),w(n,c,p),d(c,r,p),w(s,c,p),f=!0},p(c,p){c[12].scheme_type?i?i.p(c,p):(i=ir(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].atf4_lead_type?a?a.p(c,p):(a=ar(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].scheme_description?u?u.p(c,p):(u=fr(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};p&32&&(_.props=c[12]),n.$set(_);const k={};p&32&&(k.props=c[12]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(s.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function ir(o){let e,l,t,n=o[12].scheme_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme type",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[12].scheme_type+"")&&A(r,n)},d(s){s&&h(e)}}}function ar(o){let e,l,t,n=o[12].atf4_lead_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 lead type",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[12].atf4_lead_type+"")&&A(r,n)},d(s){s&&h(e)}}}function fr(o){let e,l,t,n=o[12].scheme_description+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Descripton",t=y(`
          : `),r=y(n)},m(s,f){d(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[12].scheme_description+"")&&A(r,n)},d(s){s&&h(e)}}}function wp(o){let e;return{c(){e=y("Zoom to show entire scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function vp(o){let e;return{c(){e=y("Edit a copy of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ur(o){var On,jn,Nn,Pn;let e,l,t,n,r,s,f,i=st(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,p,_,k,T,C,j,F,N,M=o[0].toUpperCase()+"",O,I,R,P,q,Q,ae,D=st(o[5].scheme_name??"",o[2])+"",x,V,U,Te,Ne,Ge=st(o[1].scheme_reference,o[2])+"",pt,W,xe,qt,Ht=((On=o[5].browse)==null?void 0:On.authority_or_region)+"",de,Ae,et,lt,Et,Yt,en=((jn=o[5].browse)==null?void 0:jn.funding_programme)+"",fn,Mn,un,cn,rt,In,ot,ze,Le=o[1].length_meters&&Xl(o),Me=o[1].description&&xl(o),ke=o[1].pipeline&&er(pn(o)),Ie=((Nn=o[5].browse)==null?void 0:Nn.capital_scheme_id)&&rr(o),Oe=((Pn=o[5].browse)==null?void 0:Pn.current_milestone)&&or(o),ye=o[5].pipeline&&sr($n(o));return rt=new Je({props:{$$slots:{default:[wp]},$$scope:{ctx:o}}}),rt.$on("click",o[6]),ot=new Je({props:{$$slots:{default:[vp]},$$scope:{ctx:o}}}),ot.$on("click",o[7]),{c(){e=S("div"),l=S("h2"),l.textContent="Intervention",t=L(),n=S("p"),r=S("b"),r.textContent="Name",s=y(`
      : `),f=new Dt(!1),a=y(" ("),c=y(u),p=y(")"),_=L(),Le&&Le.c(),k=L(),Me&&Me.c(),T=L(),ke&&ke.c(),C=L(),j=S("hr"),F=L(),N=S("h2"),O=y(M),I=y(" Scheme"),R=L(),P=S("p"),q=S("b"),q.textContent="Scheme name",Q=y(`
      : `),ae=new Dt(!1),x=L(),V=S("p"),U=S("b"),U.textContent="Scheme reference",Te=y(`
      : `),Ne=new Dt(!1),pt=L(),W=S("p"),xe=S("b"),xe.textContent="Authority or region",qt=y(`
      : `),de=y(Ht),Ae=L(),Ie&&Ie.c(),et=L(),lt=S("p"),Et=S("b"),Et.textContent="Funding programme",Yt=y(`
      : `),fn=y(en),Mn=L(),Oe&&Oe.c(),un=L(),ye&&ye.c(),cn=L(),b(rt.$$.fragment),In=L(),b(ot.$$.fragment),f.a=a,ae.a=null,Ne.a=null,se(e,"max-width","30vw"),se(e,"max-height","60vh"),se(e,"overflow","auto")},m(ie,ge){d(ie,e,ge),$(e,l),$(e,t),$(e,n),$(n,r),$(n,s),f.m(i,n),$(n,a),$(n,c),$(n,p),$(e,_),Le&&Le.m(e,null),$(e,k),Me&&Me.m(e,null),$(e,T),ke&&ke.m(e,null),$(e,C),$(e,j),$(e,F),$(e,N),$(N,O),$(N,I),$(e,R),$(e,P),$(P,q),$(P,Q),ae.m(D,P),$(e,x),$(e,V),$(V,U),$(V,Te),Ne.m(Ge,V),$(e,pt),$(e,W),$(W,xe),$(W,qt),$(W,de),$(e,Ae),Ie&&Ie.m(e,null),$(e,et),$(e,lt),$(lt,Et),$(lt,Yt),$(lt,fn),$(e,Mn),Oe&&Oe.m(e,null),$(e,un),ye&&ye.m(e,null),$(e,cn),w(rt,e,null),$(e,In),w(ot,e,null),o[10](e),ze=!0},p(ie,ge){var Fn,Gn,An,zn;(!ze||ge&10)&&i!==(i=st(ie[1].name,ie[3])+"")&&f.p(i),(!ze||ge&2)&&u!==(u=ie[1].intervention_type+"")&&A(c,u),ie[1].length_meters?Le?Le.p(ie,ge):(Le=Xl(ie),Le.c(),Le.m(e,k)):Le&&(Le.d(1),Le=null),ie[1].description?Me?Me.p(ie,ge):(Me=xl(ie),Me.c(),Me.m(e,T)):Me&&(Me.d(1),Me=null),ie[1].pipeline?ke?(ke.p(pn(ie),ge),ge&2&&m(ke,1)):(ke=er(pn(ie)),ke.c(),m(ke,1),ke.m(e,C)):ke&&(be(),g(ke,1,1,()=>{ke=null}),we()),(!ze||ge&1)&&M!==(M=ie[0].toUpperCase()+"")&&A(O,M),(!ze||ge&36)&&D!==(D=st(ie[5].scheme_name??"",ie[2])+"")&&ae.p(D),(!ze||ge&6)&&Ge!==(Ge=st(ie[1].scheme_reference,ie[2])+"")&&Ne.p(Ge),(!ze||ge&32)&&Ht!==(Ht=((Fn=ie[5].browse)==null?void 0:Fn.authority_or_region)+"")&&A(de,Ht),(Gn=ie[5].browse)!=null&&Gn.capital_scheme_id?Ie?Ie.p(ie,ge):(Ie=rr(ie),Ie.c(),Ie.m(e,et)):Ie&&(Ie.d(1),Ie=null),(!ze||ge&32)&&en!==(en=((An=ie[5].browse)==null?void 0:An.funding_programme)+"")&&A(fn,en),(zn=ie[5].browse)!=null&&zn.current_milestone?Oe?Oe.p(ie,ge):(Oe=or(ie),Oe.c(),Oe.m(e,un)):Oe&&(Oe.d(1),Oe=null),ie[5].pipeline?ye?(ye.p($n(ie),ge),ge&32&&m(ye,1)):(ye=sr($n(ie)),ye.c(),m(ye,1),ye.m(e,cn)):ye&&(be(),g(ye,1,1,()=>{ye=null}),we());const Rn={};ge&8192&&(Rn.$$scope={dirty:ge,ctx:ie}),rt.$set(Rn);const Dn={};ge&8192&&(Dn.$$scope={dirty:ge,ctx:ie}),ot.$set(Dn)},i(ie){ze||(m(ke),m(ye),m(rt.$$.fragment,ie),m(ot.$$.fragment,ie),ze=!0)},o(ie){g(ke),g(ye),g(rt.$$.fragment,ie),g(ot.$$.fragment,ie),ze=!1},d(ie){ie&&h(e),Le&&Le.d(),Me&&Me.d(),ke&&ke.d(),Ie&&Ie.d(),Oe&&Oe.d(),ye&&ye.d(),v(rt),v(ot),o[10](null)}}}function kp(o){let e=o[1],l,t,n=ur(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),d(r,l,s),t=!0},p(r,[s]){s&2&&J(e,e=r[1])?(be(),g(n,1,1,Z),we(),n=ur(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function st(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function yp(o,e,l){let t,n;Y(o,an,T=>l(11,n=T));let{source:r}=e,{props:s}=e,{schemes:f}=e,{schemesGj:i}=e,{filterSchemeText:a}=e,{filterInterventionText:u}=e,c;zr(()=>{c&&l(4,c.scrollTop=0,c)});function p(){let T={type:"FeatureCollection",features:i.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(yr(T),{padding:20,animate:!1})}function _(){var N;let T={type:"FeatureCollection",features:i.features.filter(M=>M.properties.scheme_reference==t.scheme_reference),schemes:{}};T.schemes[t.scheme_reference]=t;let C=(N=t.browse)==null?void 0:N.authority_or_region;if(!C){window.alert("This scheme has no authority specified, you can't edit this");return}let j=t.pipeline?"pipeline":"v1",F=`browse_copy_${t.scheme_reference}`;qr(Er(C,F),JSON.stringify(Hr(C,T))),window.open(Br(C,F,j),"_blank")}function k(T){H[T?"unshift":"push"](()=>{c=T,l(4,c)})}return o.$$set=T=>{"source"in T&&l(0,r=T.source),"props"in T&&l(1,s=T.props),"schemes"in T&&l(8,f=T.schemes),"schemesGj"in T&&l(9,i=T.schemesGj),"filterSchemeText"in T&&l(2,a=T.filterSchemeText),"filterInterventionText"in T&&l(3,u=T.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=f.get(s.scheme_reference))},[r,s,a,u,c,t,p,_,f,i,k]}class Ln extends K{constructor(e){super(),X(this,e,yp,kp,J,{source:0,props:1,schemes:8,schemesGj:9,filterSchemeText:2,filterInterventionText:3})}}function Sp(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Cp(o){let e,l;return e=new Ln({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Tp(o){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Sp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Cp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3133&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Lp(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function Mp(o){let e,l;return e=new Ln({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ip(o){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Lp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Mp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3133&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Op(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&h(e)}}}function jp(o){let e,l;return e=new Ln({props:{source:o[0],props:o[10],schemesGj:o[3],schemes:o[2],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Np(o){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Op,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[jp,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3133&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Pp(o){let e,l,t,n,r,s,f,i,a,u;const c=[z(`${o[0]}-interventions-points`),{filter:["all",Yn,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":Bn,"circle-opacity":te(1,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let p={$$slots:{default:[Tp]},$$scope:{ctx:o}};for(let O=0;O<c.length;O+=1)p=ne(p,c[O]);e=new Gt({props:p});const _=[z(`${o[0]}-interventions-lines`),{filter:["all",Jn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":Jt,"line-opacity":te(1,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[Ip]},$$scope:{ctx:o}};for(let O=0;O<_.length;O+=1)k=ne(k,_[O]);t=new _e({props:k});const T=[z(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Jt,"circle-opacity":0,"circle-stroke-color":Ze.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[1]?"visible":"none"}}];let C={};for(let O=0;O<T.length;O+=1)C=ne(C,T[O]);r=new Gt({props:C});const j=[z(`${o[0]}-interventions-polygons`),{filter:["all",tn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":te(.2,.5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"}];let F={$$slots:{default:[Np]},$$scope:{ctx:o}};for(let O=0;O<j.length;O+=1)F=ne(F,j[O]);f=new Re({props:F});const N=[z(`${o[0]}-interventions-polygons-outlines`),{filter:["all",tn,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*Jt}},{layout:{visibility:o[1]?"visible":"none"}}];let M={};for(let O=0;O<N.length;O+=1)M=ne(M,N[O]);return a=new _e({props:M}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(O,I){w(e,O,I),d(O,l,I),w(t,O,I),d(O,n,I),w(r,O,I),d(O,s,I),w(f,O,I),d(O,i,I),w(a,O,I),u=!0},p(O,I){const R=I&835?le(c,[I&1&&oe(z(`${O[0]}-interventions-points`)),I&768&&{filter:["all",Yn,O[8],O[9]]},c[2],c[3],I&64&&{paint:{"circle-color":O[6],"circle-radius":Bn,"circle-opacity":te(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},c[6]]):{};I&2109&&(R.$$scope={dirty:I,ctx:O}),e.$set(R);const P=I&323?le(_,[I&1&&oe(z(`${O[0]}-interventions-lines`)),I&256&&{filter:["all",Jn,O[8]]},_[2],_[3],I&64&&{paint:{"line-color":O[6],"line-width":Jt,"line-opacity":te(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},_[6]]):{};I&2109&&(P.$$scope={dirty:I,ctx:O}),t.$set(P);const q=I&3?le(T,[I&1&&oe(z(`${O[0]}-interventions-lines-endpoints`)),T[1],T[2],I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};r.$set(q);const Q=I&323?le(j,[I&1&&oe(z(`${O[0]}-interventions-polygons`)),I&256&&{filter:["all",tn,O[8]]},j[2],j[3],I&64&&{paint:{"fill-color":O[6],"fill-opacity":te(.2,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},j[6]]):{};I&2109&&(Q.$$scope={dirty:I,ctx:O}),f.$set(Q);const ae=I&323?le(N,[I&1&&oe(z(`${O[0]}-interventions-polygons-outlines`)),I&256&&{filter:["all",tn,O[8]]},I&64&&{paint:{"line-color":O[6],"line-opacity":.5,"line-width":.7*Jt}},I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};a.$set(ae)},i(O){u||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(r.$$.fragment,O),m(f.$$.fragment,O),m(a.$$.fragment,O),u=!0)},o(O){g(e.$$.fragment,O),g(t.$$.fragment,O),g(r.$$.fragment,O),g(f.$$.fragment,O),g(a.$$.fragment,O),u=!1},d(O){O&&(h(l),h(n),h(s),h(i)),v(e,O),v(t,O),v(r,O),v(f,O),v(a,O)}}}function Rp(o){let e,l;return e=new At({props:{data:o[7],$$slots:{default:[Pp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Dp(o,e,l){let t,{source:n}=e,{show:r}=e,{schemes:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],p=["!=",["get","endpoint"],!0];return o.$$set=_=>{"source"in _&&l(0,n=_.source),"show"in _&&l(1,r=_.show),"schemes"in _&&l(2,s=_.schemes),"schemesGj"in _&&l(3,f=_.schemesGj),"filterSchemeText"in _&&l(4,i=_.filterSchemeText),"filterInterventionText"in _&&l(5,a=_.filterInterventionText),"color"in _&&l(6,u=_.color)},o.$$.update=()=>{o.$$.dirty&8&&l(7,t=eo(f))},[n,r,s,f,i,a,u,t,c,p]}class cr extends K{constructor(e){super(),X(this,e,Dp,Rp,J,{source:0,show:1,schemes:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function Fp(o){return Ke(["get","intervention_type"],{area:Ze.area,route:Ze.route,crossing:Ze.crossing,other:Ze.other},"white")}function Gp(o){return[["Areas",Ze.area],["Routes",Ze.route],["Crossings",Ze.crossing],["Other",Ze.other]]}function $r(o,e,l){const t=o.slice();return t[33]=e[l],t}function pr(o,e,l){const t=o.slice();return t[33]=e[l],t}function Ap(o){let e,l;return e=new Q$({props:{loadFile:o[19]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p:Z,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function mr(o){let e,l,t;function n(s){o[25](s)}let r={name:Rr,title:Yp,$$slots:{controls:[qp],help:[zp]},$$scope:{ctx:o}};return o[8]!==void 0&&(r.show=o[8]),e=new ue({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){const i={};f[0]&7713|f[1]&128&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&256&&(l=!0,i.show=s[8],B(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function _r(o){let e,l,t=o[33]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,s){d(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&1024&&t!==(t=r[33]+"")&&A(n,t)},d(r){r&&h(e)}}}function zp(o){let e,l,t,n,r,s,f;t=new Sr({props:{text:"Scheme data caveats"}});let i=he(o[10].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=_r(pr(o,i,u));return{c(){e=S("span"),l=S("p"),b(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),w(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&1024){i=he(u[10].notes??[]);let p;for(p=0;p<i.length;p+=1){const _=pr(u,i,p);a[p]?a[p].p(_,c):(a[p]=_r(_),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),Qe(a,u)}}}function qp(o){let e,l,t,n,r,s,f,i,a,u,c,p;function _(M){o[20](M)}function k(M){o[21](M)}function T(M){o[22](M)}function C(M){o[23](M)}let j={source:"ATF"};o[10]!==void 0&&(j.schemesGj=o[10]),o[9]!==void 0&&(j.schemes=o[9]),o[11]!==void 0&&(j.filterSchemeText=o[11]),o[12]!==void 0&&(j.filterInterventionText=o[12]),l=new jr({props:j}),H.push(()=>E(l,"schemesGj",_)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",T)),H.push(()=>E(l,"filterInterventionText",C));function F(M){o[24](M)}let N={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(N.value=o[0]),i=new Ft({props:N}),H.push(()=>E(i,"value",F)),c=new xt({props:{rows:o[5]}}),{c(){e=S("div"),b(l.$$.fragment),f=L(),b(i.$$.fragment),u=L(),b(c.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(M,O){d(M,e,O),w(l,e,null),$(e,f),w(i,e,null),$(e,u),w(c,e,null),p=!0},p(M,O){const I={};!t&&O[0]&1024&&(t=!0,I.schemesGj=M[10],B(()=>t=!1)),!n&&O[0]&512&&(n=!0,I.schemes=M[9],B(()=>n=!1)),!r&&O[0]&2048&&(r=!0,I.filterSchemeText=M[11],B(()=>r=!1)),!s&&O[0]&4096&&(s=!0,I.filterInterventionText=M[12],B(()=>s=!1)),l.$set(I);const R={};!a&&O[0]&1&&(a=!0,R.value=M[0],B(()=>a=!1)),i.$set(R);const P={};O[0]&32&&(P.rows=M[5]),c.$set(P)},i(M){p||(m(l.$$.fragment,M),m(i.$$.fragment,M),m(c.$$.fragment,M),p=!0)},o(M){g(l.$$.fragment,M),g(i.$$.fragment,M),g(c.$$.fragment,M),p=!1},d(M){M&&h(e),v(l),v(i),v(c)}}}function gr(o){let e,l,t;function n(s){o[31](s)}let r={name:Dr,title:Jp,$$slots:{controls:[Ep],help:[Hp]},$$scope:{ctx:o}};return o[7]!==void 0&&(r.show=o[7]),e=new ue({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){const i={};f[0]&122890|f[1]&128&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&128&&(l=!0,i.show=s[7],B(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function dr(o){let e,l,t=o[33]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,s){d(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&16384&&t!==(t=r[33]+"")&&A(n,t)},d(r){r&&h(e)}}}function Hp(o){let e,l,t,n,r,s,f;t=new Sr({props:{text:"Scheme data caveats"}});let i=he(o[14].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=dr($r(o,i,u));return{c(){e=S("span"),l=S("p"),b(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){d(u,e,c),$(e,l),w(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&16384){i=he(u[14].notes??[]);let p;for(p=0;p<i.length;p+=1){const _=$r(u,i,p);a[p]?a[p].p(_,c):(a[p]=dr(_),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),Qe(a,u)}}}function Ep(o){let e,l,t,n,r,s,f,i,a,u,c,p;function _(M){o[26](M)}function k(M){o[27](M)}function T(M){o[28](M)}function C(M){o[29](M)}let j={source:"LCWIP"};o[14]!==void 0&&(j.schemesGj=o[14]),o[13]!==void 0&&(j.schemes=o[13]),o[15]!==void 0&&(j.filterSchemeText=o[15]),o[16]!==void 0&&(j.filterInterventionText=o[16]),l=new jr({props:j}),H.push(()=>E(l,"schemesGj",_)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",T)),H.push(()=>E(l,"filterInterventionText",C));function F(M){o[30](M)}let N={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(N.value=o[1]),i=new Ft({props:N}),H.push(()=>E(i,"value",F)),c=new xt({props:{rows:o[3]}}),{c(){e=S("div"),b(l.$$.fragment),f=L(),b(i.$$.fragment),u=L(),b(c.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(M,O){d(M,e,O),w(l,e,null),$(e,f),w(i,e,null),$(e,u),w(c,e,null),p=!0},p(M,O){const I={};!t&&O[0]&16384&&(t=!0,I.schemesGj=M[14],B(()=>t=!1)),!n&&O[0]&8192&&(n=!0,I.schemes=M[13],B(()=>n=!1)),!r&&O[0]&32768&&(r=!0,I.filterSchemeText=M[15],B(()=>r=!1)),!s&&O[0]&65536&&(s=!0,I.filterInterventionText=M[16],B(()=>s=!1)),l.$set(I);const R={};!a&&O[0]&2&&(a=!0,R.value=M[1],B(()=>a=!1)),i.$set(R);const P={};O[0]&8&&(P.rows=M[3]),c.$set(P)},i(M){p||(m(l.$$.fragment,M),m(i.$$.fragment,M),m(c.$$.fragment,M),p=!0)},o(M){g(l.$$.fragment,M),g(i.$$.fragment,M),g(c.$$.fragment,M),p=!1},d(M){M&&h(e),v(l),v(i),v(c)}}}function Bp(o){let e,l,t,n=o[9].size>0&&mr(o),r=o[13].size>0&&gr(o);return{c(){n&&n.c(),e=L(),r&&r.c(),l=ve()},m(s,f){n&&n.m(s,f),d(s,e,f),r&&r.m(s,f),d(s,l,f),t=!0},p(s,f){s[9].size>0?n?(n.p(s,f),f[0]&512&&m(n,1)):(n=mr(s),n.c(),m(n,1),n.m(e.parentNode,e)):n&&(be(),g(n,1,1,()=>{n=null}),we()),s[13].size>0?r?(r.p(s,f),f[0]&8192&&m(r,1)):(r=gr(s),r.c(),m(r,1),r.m(l.parentNode,l)):r&&(be(),g(r,1,1,()=>{r=null}),we())},i(s){t||(m(n),m(r),t=!0)},o(s){g(n),g(r),t=!1},d(s){s&&(h(e),h(l)),n&&n.d(s),r&&r.d(s)}}}function Up(o){let e=kr()=="Private (development)",l,t,n,r,s,f,i,a=e&&Ap(o);return t=new De({props:{small:!0,$$slots:{default:[Bp]},$$scope:{ctx:o}}}),r=new Ur({props:{label:"Load schemes from GeoJSON",onLoad:o[19]}}),f=new Wr({props:{errorMessage:o[2]}}),{c(){a&&a.c(),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(u,c){a&&a.m(u,c),d(u,l,c),w(t,u,c),d(u,n,c),w(r,u,c),d(u,s,c),w(f,u,c),i=!0},p(u,c){e&&a.p(u,c);const p={};c[0]&130987|c[1]&128&&(p.$$scope={dirty:c,ctx:u}),t.$set(p);const _={};c[0]&4&&(_.errorMessage=u[2]),f.$set(_)},i(u){i||(m(a),m(t.$$.fragment,u),m(r.$$.fragment,u),m(f.$$.fragment,u),i=!0)},o(u){g(a),g(t.$$.fragment,u),g(r.$$.fragment,u),g(f.$$.fragment,u),i=!1},d(u){u&&(h(l),h(n),h(s)),a&&a.d(u),v(t,u),v(r,u),v(f,u)}}}function Wp(o){let e,l,t,n,r,s;return e=new tt({props:{label:"Schemes",open:!0,$$slots:{default:[Up]},$$scope:{ctx:o}}}),t=new cr({props:{source:"atf",show:o[8],schemesGj:o[10],schemes:o[9],filterSchemeText:o[11],filterInterventionText:o[12],color:o[6]}}),r=new cr({props:{source:"lcwip",show:o[7],schemesGj:o[14],schemes:o[13],filterSchemeText:o[15],filterInterventionText:o[16],color:o[4]}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,i){w(e,f,i),d(f,l,i),w(t,f,i),d(f,n,i),w(r,f,i),s=!0},p(f,i){const a={};i[0]&130991|i[1]&128&&(a.$$scope={dirty:i,ctx:f}),e.$set(a);const u={};i[0]&256&&(u.show=f[8]),i[0]&1024&&(u.schemesGj=f[10]),i[0]&512&&(u.schemes=f[9]),i[0]&2048&&(u.filterSchemeText=f[11]),i[0]&4096&&(u.filterInterventionText=f[12]),i[0]&64&&(u.color=f[6]),t.$set(u);const c={};i[0]&128&&(c.show=f[7]),i[0]&16384&&(c.schemesGj=f[14]),i[0]&8192&&(c.schemes=f[13]),i[0]&32768&&(c.filterSchemeText=f[15]),i[0]&65536&&(c.filterInterventionText=f[16]),i[0]&16&&(c.color=f[4]),r.$set(c)},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}let Rr="atf_schemes",Yp="ATF schemes",Dr="lcwip_schemes",Jp="LCWIP schemes";function Vp(o,e,l){let t,n,r,s,f,i,a,u,c,p,_,k,T,C;Y(o,hn,W=>l(9,a=W)),Y(o,on,W=>l(10,u=W)),Y(o,Gl,W=>l(11,c=W)),Y(o,Fl,W=>l(12,p=W)),Y(o,wn,W=>l(13,_=W)),Y(o,bn,W=>l(14,k=W)),Y(o,zl,W=>l(15,T=W)),Y(o,Al,W=>l(16,C=W));let j="",F=pe(Rr);Y(o,F,W=>l(8,i=W));let N="fundingProgramme",M=pe(Dr);Y(o,M,W=>l(7,f=W));let O="interventionType";function I(W,xe){try{K$(JSON.parse(xe)),Ut(F,i=!0,i),Ut(M,f=!0,f),l(2,j="")}catch(qt){l(2,j=`The file you loaded is broken: ${qt}`)}}function R(W){return W=="interventionType"?[Fp(),Gp()]:W=="fundingProgramme"?[Ke(["get","funding_programme"],Wt,"grey"),Object.entries(Wt)]:W=="currentMilestone"?[Ke(["get","current_milestone"],vn,"grey"),Object.entries(vn)]:["red",[]]}function P(W){u=W,on.set(u)}function q(W){a=W,hn.set(a)}function Q(W){c=W,Gl.set(c)}function ae(W){p=W,Fl.set(p)}function D(W){N=W,l(0,N)}function x(W){i=W,F.set(i)}function V(W){k=W,bn.set(k)}function U(W){_=W,wn.set(_)}function Te(W){T=W,zl.set(T)}function Ne(W){C=W,Al.set(C)}function Ge(W){O=W,l(1,O)}function pt(W){f=W,M.set(f)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(6,[t,n]=R(N),t,(l(5,n),l(0,N))),o.$$.dirty[0]&2&&l(4,[r,s]=R(O),r,(l(3,s),l(1,O)))},[N,O,j,s,r,n,t,f,i,a,u,c,p,_,k,T,C,F,M,I,P,q,Q,ae,D,x,V,U,Te,Ne,Ge,pt]}class Zp extends K{constructor(e){super(),X(this,e,Vp,Wp,J,{},null,[-1,-1])}}const hr=je(!0);let kn=je(null);function Qp(o){let e,l,t,n,r,s,f,i;return e=new Sc({}),t=new Rc({}),r=new n$({}),f=new Wc({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,s,u),w(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function Kp(o){let e,l;return e=new De({props:{small:!0,$$slots:{default:[Qp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Xp(o){let e,l,t,n,r,s,f,i,a,u,c,p;return e=new za({}),t=new gf({}),r=new Za({}),f=new of({}),a=new uc({}),c=new Bu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),u=L(),b(c.$$.fragment)},m(_,k){w(e,_,k),d(_,l,k),w(t,_,k),d(_,n,k),w(r,_,k),d(_,s,k),w(f,_,k),d(_,i,k),w(a,_,k),d(_,u,k),w(c,_,k),p=!0},i(_){p||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(r.$$.fragment,_),m(f.$$.fragment,_),m(a.$$.fragment,_),m(c.$$.fragment,_),p=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(r.$$.fragment,_),g(f.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),p=!1},d(_){_&&(h(l),h(n),h(s),h(i),h(u)),v(e,_),v(t,_),v(r,_),v(f,_),v(a,_),v(c,_)}}}function xp(o){let e,l;return e=new De({props:{small:!0,$$slots:{default:[Xp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function em(o){let e,l,t,n,r,s;return e=new Ca({}),t=new ku({}),r=new Nu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,i){w(e,f,i),d(f,l,i),w(t,f,i),d(f,n,i),w(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),s=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}function tm(o){let e,l;return e=new De({props:{small:!0,$$slots:{default:[em]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function nm(o){let e,l,t,n,r,s,f,i,a,u;return e=new Ri({}),t=new ca({}),r=new Hs({}),f=new fi({}),a=new yi({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(c,p){w(e,c,p),d(c,l,p),w(t,c,p),d(c,n,p),w(r,c,p),d(c,s,p),w(f,c,p),d(c,i,p),w(a,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(r.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(s),h(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function lm(o){let e,l;return e=new De({props:{small:!0,$$slots:{default:[nm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function rm(o){let e,l,t,n;return e=new Os({}),t=new Xs({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),d(r,l,s),w(t,r,s),n=!0},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function om(o){let e,l;return e=new De({props:{small:!0,$$slots:{default:[rm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function sm(o){let e,l,t,n,r,s,f,i;return e=new mu({}),t=new If({}),r=new ru({}),f=new E$({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,s,u),w(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function im(o){let e,l,t,n,r,s,f,i,a=kr()=="Private (development)",u,c,p,_,k;e=new N$({}),t=new w$({}),r=new Wf({}),f=new xu({});let T=a&&sm();return c=new Ui({}),_=new ea({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),T&&T.c(),u=L(),b(c.$$.fragment),p=L(),b(_.$$.fragment)},m(C,j){w(e,C,j),d(C,l,j),w(t,C,j),d(C,n,j),w(r,C,j),d(C,s,j),w(f,C,j),d(C,i,j),T&&T.m(C,j),d(C,u,j),w(c,C,j),d(C,p,j),w(_,C,j),k=!0},p:Z,i(C){k||(m(e.$$.fragment,C),m(t.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C),m(T),m(c.$$.fragment,C),m(_.$$.fragment,C),k=!0)},o(C){g(e.$$.fragment,C),g(t.$$.fragment,C),g(r.$$.fragment,C),g(f.$$.fragment,C),g(T),g(c.$$.fragment,C),g(_.$$.fragment,C),k=!1},d(C){C&&(h(l),h(n),h(s),h(i),h(u),h(p)),v(e,C),v(t,C),v(r,C),v(f,C),T&&T.d(C),v(c,C),v(_,C)}}}function am(o){let e,l;return e=new De({props:{small:!0,$$slots:{default:[im]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function fm(o){let e,l,t,n,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new no({props:f}),H.push(()=>E(e,"enabled",s)),n=new qo({}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],B(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}function um(o){let e,l;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Re({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&2?le(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function cm(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,k,T,C,j,F,N,M,O;return l=new Zp({}),n=new tt({props:{label:"Trip generators",$$slots:{default:[Kp]},$$scope:{ctx:o}}}),s=new tt({props:{label:"Existing infrastructure",$$slots:{default:[xp]},$$scope:{ctx:o}}}),i=new tt({props:{label:"Public transport",$$slots:{default:[tm]},$$scope:{ctx:o}}}),u=new tt({props:{label:"Boundaries",$$slots:{default:[lm]},$$scope:{ctx:o}}}),p=new tt({props:{label:"Census",$$slots:{default:[om]},$$scope:{ctx:o}}}),k=new tt({props:{label:"Other",$$slots:{default:[am]},$$scope:{ctx:o}}}),C=new tt({props:{label:"Tools",$$slots:{default:[fm]},$$scope:{ctx:o}}}),F=new to({props:{disabled:!o[1]}}),M=new At({props:{data:o[4],$$slots:{default:[um]},$$scope:{ctx:o}}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment),f=L(),b(i.$$.fragment),a=L(),b(u.$$.fragment),c=L(),b(p.$$.fragment),_=L(),b(k.$$.fragment),T=L(),b(C.$$.fragment),j=L(),b(F.$$.fragment),N=L(),b(M.$$.fragment)},m(I,R){d(I,e,R),w(l,e,null),$(e,t),w(n,e,null),$(e,r),w(s,e,null),$(e,f),w(i,e,null),$(e,a),w(u,e,null),$(e,c),w(p,e,null),$(e,_),w(k,e,null),$(e,T),w(C,e,null),$(e,j),w(F,e,null),o[7](e),d(I,N,R),w(M,I,R),O=!0},p(I,[R]){const P={};R&256&&(P.$$scope={dirty:R,ctx:I}),n.$set(P);const q={};R&256&&(q.$$scope={dirty:R,ctx:I}),s.$set(q);const Q={};R&256&&(Q.$$scope={dirty:R,ctx:I}),i.$set(Q);const ae={};R&256&&(ae.$$scope={dirty:R,ctx:I}),u.$set(ae);const D={};R&256&&(D.$$scope={dirty:R,ctx:I}),p.$set(D);const x={};R&256&&(x.$$scope={dirty:R,ctx:I}),k.$set(x);const V={};R&265&&(V.$$scope={dirty:R,ctx:I}),C.$set(V);const U={};R&2&&(U.disabled=!I[1]),F.$set(U);const Te={};R&258&&(Te.$$scope={dirty:R,ctx:I}),M.$set(Te)},i(I){O||(m(l.$$.fragment,I),m(n.$$.fragment,I),m(s.$$.fragment,I),m(i.$$.fragment,I),m(u.$$.fragment,I),m(p.$$.fragment,I),m(k.$$.fragment,I),m(C.$$.fragment,I),m(F.$$.fragment,I),m(M.$$.fragment,I),O=!0)},o(I){g(l.$$.fragment,I),g(n.$$.fragment,I),g(s.$$.fragment,I),g(i.$$.fragment,I),g(u.$$.fragment,I),g(p.$$.fragment,I),g(k.$$.fragment,I),g(C.$$.fragment,I),g(F.$$.fragment,I),g(M.$$.fragment,I),O=!1},d(I){I&&(h(e),h(N)),v(l),v(n),v(s),v(i),v(u),v(p),v(k),v(C),v(F),o[7](null),v(M,I)}}}function $m(o,e,l){let t,n,r,s;Y(o,hr,c=>l(1,n=c)),Y(o,kn,c=>l(2,r=c)),Y(o,an,c=>l(3,s=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>Zr(c,Yr(gn))};function a(c){t=c,l(0,t),l(1,n)}function u(c){H[c?"unshift":"push"](()=>{r=c,kn.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&hr.set(!t)},[t,n,r,s,f,i,a,u]}class pm extends K{constructor(e){super(),X(this,e,$m,cm,J,{})}}function mm(o){let e,l,t;return{c(){e=S("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=S("div")},m(n,r){d(n,e,r),d(n,l,r),d(n,t,r),o[3](t)},p:Z,i:Z,o:Z,d(n){n&&(h(e),h(l),h(t)),o[3](null)}}}function _m(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function gm(o,e,l){let t,n;Y(o,dn,f=>l(1,t=f)),Y(o,Vt,f=>l(2,n=f));let r=null;function s(f){H[f?"unshift":"push"](()=>{r=f,l(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&_m(r,n,t)},[r,t,n,s]}class dm extends K{constructor(e){super(),X(this,e,gm,mm,J,{})}}function hm(o){let e,l,t,n,r,s,f,i,a,u,c,p,_,k,T;return l=new Qr({}),n=new uo({}),f=new co({}),p=new Wo({props:{boundaryGeojson:o[3]}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),s=S("div"),b(f.$$.fragment),i=L(),a=S("div"),u=S("h1"),u.textContent="Scheme Browser",c=L(),b(p.$$.fragment),_=L(),k=S("div"),se(s,"border-bottom","1px solid #b1b4b6"),se(a,"display","flex"),se(a,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(C,j){d(C,e,j),w(l,e,null),$(e,t),w(n,e,null),$(e,r),$(e,s),w(f,s,null),$(e,i),$(e,a),$(a,u),$(a,c),w(p,a,null),$(e,_),$(e,k),o[6](k),T=!0},p(C,j){const F={};j&8&&(F.boundaryGeojson=C[3]),p.$set(F)},i(C){T||(m(l.$$.fragment,C),m(n.$$.fragment,C),m(f.$$.fragment,C),m(p.$$.fragment,C),T=!0)},o(C){g(l.$$.fragment,C),g(n.$$.fragment,C),g(f.$$.fragment,C),g(p.$$.fragment,C),T=!1},d(C){C&&h(e),v(l),v(n),v(f),v(p),o[6](null)}}}function br(o){let e,l;return e=new pm({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function bm(o){let e,l,t,n;e=new lo({});let r=o[2]&&br();return{c(){b(e.$$.fragment),l=L(),r&&r.c(),t=ve()},m(s,f){w(e,s,f),d(s,l,f),r&&r.m(s,f),d(s,t,f),n=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=br(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(be(),g(r,1,1,()=>{r=null}),we())},i(s){n||(m(e.$$.fragment,s),m(r),n=!0)},o(s){g(e.$$.fragment,s),g(r),n=!1},d(s){s&&(h(l),h(t)),v(e,s),r&&r.d(s)}}}function wm(o){let e,l,t;return l=new $o({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[bm]},$$scope:{ctx:o}}}),{c(){e=S("div"),b(l.$$.fragment),G(e,"slot","main")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&2&&(s.style=n[1]),r&260&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function vm(o){let e,l,t,n,r;return e=new wo({props:{$$slots:{main:[wm],sidebar:[hm]},$$scope:{ctx:o}}}),n=new dm({}),{c(){b(e.$$.fragment),l=L(),t=S("div"),b(n.$$.fragment),G(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){w(e,s,f),d(s,l,f),d(s,t,f),w(n,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){g(e.$$.fragment,s),g(n.$$.fragment,s),r=!1},d(s){s&&(h(l),h(t)),v(e,s),v(n)}}}function km(o,e,l){let t,n,r,s,f;Y(o,kn,c=>l(4,t=c)),Y(o,an,c=>l(5,n=c)),Y(o,gn,c=>l(1,r=c)),Y(o,Un,c=>l(2,s=c)),Y(o,on,c=>l(3,f=c)),vr(()=>{Jr()});const i=new URLSearchParams(window.location.search);gn.set(i.get("style")||"dataviz");let a;function u(c){H[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&Un.set(n),o.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,n,u]}class ym extends K{constructor(e){super(),X(this,e,km,vm,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new ym({target:document.getElementById("app")});
