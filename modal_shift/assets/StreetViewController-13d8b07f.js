import{S as B,i as G,s as T,aJ as K,e as E,d as I,h as v,b6 as Y,az as Z,j as h,k as L,w as O,aK as Q,aL as X,aM as R,t as m,n as k,o as w,q as W,B as F,r as ie,b3 as A,$ as ce,G as pe,g as P,m as C,Z as U,_ as H,p as M,aq as _e,aA as x,Y as j,aG as de,u as V,C as ge,H as me,b as be,c as ke,l as $e,O as he,P as we,x as ee,ag as ye,a as q,aH as Le,av as Se,aw as Pe}from"./index-b11d0a2d.js";import{C as Ce,b as fe,L as Me,l as ve,h as Ee}from"./camera_cursor-b14f9578.js";const Ve=r=>({}),te=r=>({}),De=r=>({}),ne=r=>({});function Ne(r){let e,t,n,s,l,c,f,o,u,d,g;const i=r[4].sidebar,a=K(i,r,r[3],ne),p=r[4].main,b=K(p,r,r[3],te);return{c(){e=E("div"),t=E("aside"),n=E("div"),a&&a.c(),s=I(),l=E("button"),l.textContent="â†’",f=I(),o=E("main"),b&&b.c(),v(n,"class","sidebar-content content-container svelte-1n0etgd"),v(l,"type","button"),v(l,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),v(t,"class",c=Y(r[1]?"":"collapsed")+" svelte-1n0etgd"),Z(t,"--sidebarWidth",r[0]),v(o,"class","svelte-1n0etgd"),v(e,"class","overall-layout svelte-1n0etgd")},m(_,y){h(_,e,y),L(e,t),L(t,n),a&&a.m(n,null),L(t,s),L(t,l),L(e,f),L(e,o),b&&b.m(o,null),u=!0,d||(g=O(l,"click",r[2]),d=!0)},p(_,[y]){a&&a.p&&(!u||y&8)&&Q(a,i,_,_[3],u?R(i,_[3],y,De):X(_[3]),ne),(!u||y&2&&c!==(c=Y(_[1]?"":"collapsed")+" svelte-1n0etgd"))&&v(t,"class",c),(!u||y&1)&&Z(t,"--sidebarWidth",_[0]),b&&b.p&&(!u||y&8)&&Q(b,p,_,_[3],u?R(p,_[3],y,Ve):X(_[3]),te)},i(_){u||(m(a,_),m(b,_),u=!0)},o(_){k(a,_),k(b,_),u=!1},d(_){_&&w(e),a&&a.d(_),b&&b.d(_),d=!1,g()}}}function Ie(r,e,t){let{$$slots:n={},$$scope:s}=e,{sidebarWidth:l="25rem"}=e,c=!0;function f(){t(1,c=!c)}return r.$$set=o=>{"sidebarWidth"in o&&t(0,l=o.sidebarWidth),"$$scope"in o&&t(3,s=o.$$scope)},[l,c,f,s,n]}class Re extends B{constructor(e){super(),G(this,e,Ie,Ne,T,{sidebarWidth:0})}}function Ue(r,e,t){let n;W(r,F,f=>t(3,n=f));let s=null,{markerPosition:l}=e,{markerPositionUpdated:c}=e;return ie(()=>{s=new A.Marker({draggable:!0}).setLngLat(l).addTo(n),s.on("dragstart",()=>{n.getCanvas().style.cursor="grabbing"}),s.on("drag",()=>{t(0,l=s.getLngLat()),c()}),s.on("dragend",()=>{n.getCanvas().style.cursor="inherit"})}),ce(()=>{s&&s.remove()}),r.$$set=f=>{"markerPosition"in f&&t(0,l=f.markerPosition),"markerPositionUpdated"in f&&t(1,c=f.markerPositionUpdated)},[l,c]}class He extends B{constructor(e){super(),G(this,e,Ue,null,T,{markerPosition:0,markerPositionUpdated:1})}}function se(r,e,t){const n=r.slice();return n[16]=e[t],n[17]=e,n[18]=t,n}function We(r){let e,t;return e=new q({props:{$$slots:{default:[Ge]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){P(e.$$.fragment)},m(n,s){C(e,n,s),t=!0},p(n,s){const l={};s&524288&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Be(r){let e,t;return e=new q({props:{$$slots:{default:[Te]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){P(e.$$.fragment)},m(n,s){C(e,n,s),t=!0},p(n,s){const l={};s&524288&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Ge(r){let e;return{c(){e=V("Disable Line Measurement Tool")},m(t,n){h(t,e,n)},d(t){t&&w(e)}}}function Te(r){let e;return{c(){e=V("Enable Line Measurement Tool")},m(t,n){h(t,e,n)},d(t){t&&w(e)}}}function le(r){var g;let e,t,n,s=[],l=new Map,c,f,o=r[2]&&((g=r[2].properties)==null?void 0:g.length)&&re(r);t=new Ce({props:{label:"Help",$$slots:{default:[je]},$$scope:{ctx:r}}});let u=x(r[1]);const d=i=>i[16].id;for(let i=0;i<u.length;i+=1){let a=se(r,u,i),p=d(a);l.set(p,s[i]=ae(p,a))}return{c(){o&&o.c(),e=I(),P(t.$$.fragment),n=I();for(let i=0;i<s.length;i+=1)s[i].c();c=j()},m(i,a){o&&o.m(i,a),h(i,e,a),C(t,i,a),h(i,n,a);for(let p=0;p<s.length;p+=1)s[p]&&s[p].m(i,a);h(i,c,a),f=!0},p(i,a){var b;i[2]&&((b=i[2].properties)!=null&&b.length)?o?o.p(i,a):(o=re(i),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null);const p={};a&524288&&(p.$$scope={dirty:a,ctx:i}),t.$set(p),a&258&&(u=x(i[1]),U(),s=de(s,a,d,1,i,u,l,c.parentNode,Le,ae,c,se),H())},i(i){if(!f){m(t.$$.fragment,i);for(let a=0;a<u.length;a+=1)m(s[a]);f=!0}},o(i){k(t.$$.fragment,i);for(let a=0;a<s.length;a+=1)k(s[a]);f=!1},d(i){i&&(w(e),w(n),w(c)),o&&o.d(i),M(t,i);for(let a=0;a<s.length;a+=1)s[a].d(i)}}}function re(r){var c;let e,t,n=((c=r[2].properties)==null?void 0:c.length)+"",s,l;return{c(){e=E("p"),t=V("Length: "),s=V(n),l=V("m")},m(f,o){h(f,e,o),L(e,t),L(e,s),L(e,l)},p(f,o){var u;o&4&&n!==(n=((u=f[2].properties)==null?void 0:u.length)+"")&&ge(s,n)},d(f){f&&w(e)}}}function je(r){let e;return{c(){e=E("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(t,n){h(t,e,n)},p:me,d(t){t&&w(e)}}}function ae(r,e){let t,n,s,l;function c(o){e[9](o,e[16])}let f={markerPositionUpdated:e[8]};return e[16].lngLat!==void 0&&(f.markerPosition=e[16].lngLat),n=new He({props:f}),be.push(()=>ke(n,"markerPosition",c)),{key:r,first:null,c(){t=j(),P(n.$$.fragment),this.first=t},m(o,u){h(o,t,u),C(n,o,u),l=!0},p(o,u){e=o;const d={};!s&&u&2&&(s=!0,d.markerPosition=e[16].lngLat,$e(()=>s=!1)),n.$set(d)},i(o){l||(m(n.$$.fragment,o),l=!0)},o(o){k(n.$$.fragment,o),l=!1},d(o){o&&w(t),M(n,o)}}}function qe(r){let e,t;const n=[he("measurement-line"),{paint:{"line-color":fe.measuringLine,"line-width":5}}];let s={};for(let l=0;l<n.length;l+=1)s=we(s,n[l]);return e=new Me({props:s}),{c(){P(e.$$.fragment)},m(l,c){C(e,l,c),t=!0},p(l,c){const f={};e.$set(f)},i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){k(e.$$.fragment,l),t=!1},d(l){M(e,l)}}}function Je(r){let e,t,n,s,l,c,f,o;const u=[Be,We],d=[];function g(a,p){return a[0]?0:1}e=g(r),t=d[e]=u[e](r);let i=!r[0]&&le(r);return l=new pe({props:{data:r[3],$$slots:{default:[qe]},$$scope:{ctx:r}}}),{c(){t.c(),n=I(),i&&i.c(),s=I(),P(l.$$.fragment)},m(a,p){d[e].m(a,p),h(a,n,p),i&&i.m(a,p),h(a,s,p),C(l,a,p),c=!0,f||(o=[O(window,"keydown",r[6]),O(window,"keyup",r[7])],f=!0)},p(a,[p]){let b=e;e=g(a),e===b?d[e].p(a,p):(U(),k(d[b],1,1,()=>{d[b]=null}),H(),t=d[e],t?t.p(a,p):(t=d[e]=u[e](a),t.c()),m(t,1),t.m(n.parentNode,n)),a[0]?i&&(U(),k(i,1,1,()=>{i=null}),H()):i?(i.p(a,p),p&1&&m(i,1)):(i=le(a),i.c(),m(i,1),i.m(s.parentNode,s));const _={};p&8&&(_.data=a[3]),p&524288&&(_.$$scope={dirty:p,ctx:a}),l.$set(_)},i(a){c||(m(t),m(i),m(l.$$.fragment,a),c=!0)},o(a){k(t),k(i),k(l.$$.fragment,a),c=!1},d(a){a&&(w(n),w(s)),d[e].d(a),i&&i.d(a),M(l,a),f=!1,_e(o)}}}function Oe(r,e,t){let n;W(r,F,$=>t(12,n=$));let s=!0,l=[],c,f=!1,o=0,u=ee();function d($){s||(f||(l.push({id:o++,lngLat:$.lngLat}),t(1,l),_()),f&&l.length>0&&(g($.lngLat),_()))}function g($){let z=new A.LngLat(0,-90).distanceTo(new A.LngLat(0,90)),S;l.forEach(J=>{const N=J.lngLat;z>=$.distanceTo(N)&&(S=N,z=$.distanceTo(N))}),S&&t(1,l=l.filter(J=>{const N=J.lngLat;return N.lng!=(S==null?void 0:S.lng)||N.lat!=(S==null?void 0:S.lat)}))}function i(){t(0,s=!1)}function a(){t(0,s=!0),t(1,l=[]),y()}function p($){$.key==="Shift"&&(f=!0),$.key==="Escape"&&a()}function b($){$.key==="Shift"&&(f=!1)}function _(){if(l.length<2){y();return}const $=l.map(D=>[D.lngLat.lng,D.lngLat.lat]);t(2,c=ye($,{})),c.properties&&t(2,c.properties.length=(ve(c)*1e3).toFixed(2),c),t(3,u=JSON.parse(JSON.stringify(c)))}function y(){t(2,c=void 0),t(3,u=ee())}ie(()=>{n.on("click",d)}),ce(()=>{n.off("click",d)});function ue($,D){r.$$.not_equal(D.lngLat,$)&&(D.lngLat=$,t(1,l))}return[s,l,c,u,i,a,p,b,_,ue]}class xe extends B{constructor(e){super(),G(this,e,Oe,Je,T,{})}}function oe(r){let e,t,n,s;const l=[Fe,Ae],c=[];function f(o,u){return o[0]?0:1}return e=f(r),t=c[e]=l[e](r),{c(){t.c(),n=j()},m(o,u){c[e].m(o,u),h(o,n,u),s=!0},p(o,u){let d=e;e=f(o),e===d?c[e].p(o,u):(U(),k(c[d],1,1,()=>{c[d]=null}),H(),t=c[e],t?t.p(o,u):(t=c[e]=l[e](o),t.c()),m(t,1),t.m(n.parentNode,n))},i(o){s||(m(t),s=!0)},o(o){k(t),s=!1},d(o){o&&w(n),c[e].d(o)}}}function Ae(r){let e,t;return e=new q({props:{$$slots:{default:[ze]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){P(e.$$.fragment)},m(n,s){C(e,n,s),t=!0},p(n,s){const l={};s&256&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Fe(r){let e,t;return e=new q({props:{$$slots:{default:[Ke]},$$scope:{ctx:r}}}),e.$on("click",r[2]),{c(){P(e.$$.fragment)},m(n,s){C(e,n,s),t=!0},p(n,s){const l={};s&256&&(l.$$scope={dirty:s,ctx:n}),e.$set(l)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function ze(r){let e;return{c(){e=V("Disable Street View")},m(t,n){h(t,e,n)},d(t){t&&w(e)}}}function Ke(r){let e;return{c(){e=V("Enable Street View")},m(t,n){h(t,e,n)},d(t){t&&w(e)}}}function Ye(r){let e,t,n=r[1]&&oe(r);return{c(){n&&n.c(),e=j()},m(s,l){n&&n.m(s,l),h(s,e,l),t=!0},p(s,[l]){s[1]?n?(n.p(s,l),l&2&&m(n,1)):(n=oe(s),n.c(),m(n,1),n.m(e.parentNode,e)):n&&(U(),k(n,1,1,()=>{n=null}),H())},i(s){t||(m(n),t=!0)},o(s){k(n),t=!1},d(s){s&&w(e),n&&n.d(s)}}}function Ze(r,e,t){let n,s;W(r,F,g=>t(6,n=g)),W(r,Se,g=>t(7,s=g));let{displayEnableButton:l}=e,{isInactive:c}=e,f=[];function o(g){if(c)return;let i=g.lngLat.lng,a=g.lngLat.lat;s.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${a},${i}&cbp=11,0,0,0,0`,"_blank"):s.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${a}~${i}&style=x`,"_blank")}function u(){t(0,c=!1),n.on("click",o),n.getCanvas().style.cursor=`url(${Ee}), auto`,f=Pe();for(let g of f)g.setProperty(n,"line-color",fe.streetview)}function d(){t(0,c=!0),n.off("click",o),n.getCanvas().style.cursor="inherit";for(let g of f)g.returnToDefaultPaintValues(n)}return r.$$set=g=>{"displayEnableButton"in g&&t(1,l=g.displayEnableButton),"isInactive"in g&&t(0,c=g.isInactive)},[c,l,u,d,o]}class et extends B{constructor(e){super(),G(this,e,Ze,Ye,T,{displayEnableButton:1,isInactive:0,handleMapClickEvent:4,enableStreetView:2,disableStreetView:3})}get handleMapClickEvent(){return this.$$.ctx[4]}get enableStreetView(){return this.$$.ctx[2]}get disableStreetView(){return this.$$.ctx[3]}}export{xe as L,et as S,Re as a};
