import{S as G,i as T,s as j,aJ as Y,e as E,d as N,h as v,b6 as Z,az as Q,j as h,k as L,w as A,aK as X,aL as R,aM as x,t as g,n as k,o as w,q as B,B as z,r as fe,b3 as F,$ as ue,G as de,g as P,m as C,Z as U,_ as H,p as M,aq as me,aA as ee,Y as q,aG as ge,u as V,C as be,H as W,b as ke,c as $e,l as he,O as we,P as ye,x as te,ag as Le,a as J,aH as Se,av as Pe,aw as Ce}from"./index-b11d0a2d.js";import{C as Me,b as _e,L as ve,l as Ee,h as Ve}from"./camera_cursor-b14f9578.js";const Ne=r=>({}),ne=r=>({}),De=r=>({}),le=r=>({});function Ie(r){let e,t,n,l,s,a,f,i,u,d,m;const c=r[4].sidebar,o=Y(c,r,r[3],le),_=r[4].main,b=Y(_,r,r[3],ne);return{c(){e=E("div"),t=E("aside"),n=E("div"),o&&o.c(),l=N(),s=E("button"),s.textContent="â†’",f=N(),i=E("main"),b&&b.c(),v(n,"class","sidebar-content content-container svelte-1n0etgd"),v(s,"type","button"),v(s,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),v(t,"class",a=Z(r[1]?"":"collapsed")+" svelte-1n0etgd"),Q(t,"--sidebarWidth",r[0]),v(i,"class","svelte-1n0etgd"),v(e,"class","overall-layout svelte-1n0etgd")},m(p,y){h(p,e,y),L(e,t),L(t,n),o&&o.m(n,null),L(t,l),L(t,s),L(e,f),L(e,i),b&&b.m(i,null),u=!0,d||(m=A(s,"click",r[2]),d=!0)},p(p,[y]){o&&o.p&&(!u||y&8)&&X(o,c,p,p[3],u?x(c,p[3],y,De):R(p[3]),le),(!u||y&2&&a!==(a=Z(p[1]?"":"collapsed")+" svelte-1n0etgd"))&&v(t,"class",a),(!u||y&1)&&Q(t,"--sidebarWidth",p[0]),b&&b.p&&(!u||y&8)&&X(b,_,p,p[3],u?x(_,p[3],y,Ne):R(p[3]),ne)},i(p){u||(g(o,p),g(b,p),u=!0)},o(p){k(o,p),k(b,p),u=!1},d(p){p&&w(e),o&&o.d(p),b&&b.d(p),d=!1,m()}}}function Ue(r,e,t){let{$$slots:n={},$$scope:l}=e,{sidebarWidth:s="25rem"}=e,a=!0;function f(){t(1,a=!a)}return r.$$set=i=>{"sidebarWidth"in i&&t(0,s=i.sidebarWidth),"$$scope"in i&&t(3,l=i.$$scope)},[s,a,f,l,n]}class xe extends G{constructor(e){super(),T(this,e,Ue,Ie,j,{sidebarWidth:0})}}function He(r,e,t){let n;B(r,z,f=>t(3,n=f));let l=null,{markerPosition:s}=e,{markerPositionUpdated:a}=e;return fe(()=>{l=new F.Marker({draggable:!0}).setLngLat(s).addTo(n),l.on("dragstart",()=>{n.getCanvas().style.cursor="grabbing"}),l.on("drag",()=>{t(0,s=l.getLngLat()),a()}),l.on("dragend",()=>{n.getCanvas().style.cursor="inherit"})}),ue(()=>{l&&l.remove()}),r.$$set=f=>{"markerPosition"in f&&t(0,s=f.markerPosition),"markerPositionUpdated"in f&&t(1,a=f.markerPositionUpdated)},[s,a]}class We extends G{constructor(e){super(),T(this,e,He,null,j,{markerPosition:0,markerPositionUpdated:1})}}function se(r,e,t){const n=r.slice();return n[16]=e[t],n[17]=e,n[18]=t,n}function Be(r){let e,t;return e=new J({props:{$$slots:{default:[Te]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){P(e.$$.fragment)},m(n,l){C(e,n,l),t=!0},p(n,l){const s={};l&524288&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Ge(r){let e,t;return e=new J({props:{$$slots:{default:[je]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){P(e.$$.fragment)},m(n,l){C(e,n,l),t=!0},p(n,l){const s={};l&524288&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Te(r){let e;return{c(){e=V("Disable Line Measurement Tool")},m(t,n){h(t,e,n)},d(t){t&&w(e)}}}function je(r){let e;return{c(){e=V("Enable Line Measurement Tool")},m(t,n){h(t,e,n)},d(t){t&&w(e)}}}function re(r){var m;let e,t,n,l=[],s=new Map,a,f,i=r[2]&&((m=r[2].properties)==null?void 0:m.length)&&oe(r);t=new Me({props:{label:"Help",$$slots:{default:[qe]},$$scope:{ctx:r}}});let u=ee(r[1]);const d=c=>c[16].id;for(let c=0;c<u.length;c+=1){let o=se(r,u,c),_=d(o);s.set(_,l[c]=ae(_,o))}return{c(){i&&i.c(),e=N(),P(t.$$.fragment),n=N();for(let c=0;c<l.length;c+=1)l[c].c();a=q()},m(c,o){i&&i.m(c,o),h(c,e,o),C(t,c,o),h(c,n,o);for(let _=0;_<l.length;_+=1)l[_]&&l[_].m(c,o);h(c,a,o),f=!0},p(c,o){var b;c[2]&&((b=c[2].properties)!=null&&b.length)?i?i.p(c,o):(i=oe(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null);const _={};o&524288&&(_.$$scope={dirty:o,ctx:c}),t.$set(_),o&258&&(u=ee(c[1]),U(),l=ge(l,o,d,1,c,u,s,a.parentNode,Se,ae,a,se),H())},i(c){if(!f){g(t.$$.fragment,c);for(let o=0;o<u.length;o+=1)g(l[o]);f=!0}},o(c){k(t.$$.fragment,c);for(let o=0;o<l.length;o+=1)k(l[o]);f=!1},d(c){c&&(w(e),w(n),w(a)),i&&i.d(c),M(t,c);for(let o=0;o<l.length;o+=1)l[o].d(c)}}}function oe(r){var a;let e,t,n=((a=r[2].properties)==null?void 0:a.length)+"",l,s;return{c(){e=E("p"),t=V("Length: "),l=V(n),s=V("m")},m(f,i){h(f,e,i),L(e,t),L(e,l),L(e,s)},p(f,i){var u;i&4&&n!==(n=((u=f[2].properties)==null?void 0:u.length)+"")&&be(l,n)},d(f){f&&w(e)}}}function qe(r){let e;return{c(){e=E("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(t,n){h(t,e,n)},p:W,d(t){t&&w(e)}}}function ae(r,e){let t,n,l,s;function a(i){e[9](i,e[16])}let f={markerPositionUpdated:e[8]};return e[16].lngLat!==void 0&&(f.markerPosition=e[16].lngLat),n=new We({props:f}),ke.push(()=>$e(n,"markerPosition",a)),{key:r,first:null,c(){t=q(),P(n.$$.fragment),this.first=t},m(i,u){h(i,t,u),C(n,i,u),s=!0},p(i,u){e=i;const d={};!l&&u&2&&(l=!0,d.markerPosition=e[16].lngLat,he(()=>l=!1)),n.$set(d)},i(i){s||(g(n.$$.fragment,i),s=!0)},o(i){k(n.$$.fragment,i),s=!1},d(i){i&&w(t),M(n,i)}}}function Je(r){let e,t;const n=[we("measurement-line"),{paint:{"line-color":_e.measuringLine,"line-width":5}}];let l={};for(let s=0;s<n.length;s+=1)l=ye(l,n[s]);return e=new ve({props:l}),{c(){P(e.$$.fragment)},m(s,a){C(e,s,a),t=!0},p(s,a){const f={};e.$set(f)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){k(e.$$.fragment,s),t=!1},d(s){M(e,s)}}}function Oe(r){let e,t,n,l,s,a,f,i;const u=[Ge,Be],d=[];function m(o,_){return o[0]?0:1}e=m(r),t=d[e]=u[e](r);let c=!r[0]&&re(r);return s=new de({props:{data:r[3],$$slots:{default:[Je]},$$scope:{ctx:r}}}),{c(){t.c(),n=N(),c&&c.c(),l=N(),P(s.$$.fragment)},m(o,_){d[e].m(o,_),h(o,n,_),c&&c.m(o,_),h(o,l,_),C(s,o,_),a=!0,f||(i=[A(window,"keydown",r[6]),A(window,"keyup",r[7])],f=!0)},p(o,[_]){let b=e;e=m(o),e===b?d[e].p(o,_):(U(),k(d[b],1,1,()=>{d[b]=null}),H(),t=d[e],t?t.p(o,_):(t=d[e]=u[e](o),t.c()),g(t,1),t.m(n.parentNode,n)),o[0]?c&&(U(),k(c,1,1,()=>{c=null}),H()):c?(c.p(o,_),_&1&&g(c,1)):(c=re(o),c.c(),g(c,1),c.m(l.parentNode,l));const p={};_&8&&(p.data=o[3]),_&524288&&(p.$$scope={dirty:_,ctx:o}),s.$set(p)},i(o){a||(g(t),g(c),g(s.$$.fragment,o),a=!0)},o(o){k(t),k(c),k(s.$$.fragment,o),a=!1},d(o){o&&(w(n),w(l)),d[e].d(o),c&&c.d(o),M(s,o),f=!1,me(i)}}}function Ae(r,e,t){let n;B(r,z,$=>t(12,n=$));let l=!0,s=[],a,f=!1,i=0,u=te();function d($){l||(f||(s.push({id:i++,lngLat:$.lngLat}),t(1,s),p()),f&&s.length>0&&(m($.lngLat),p()))}function m($){let K=new F.LngLat(0,-90).distanceTo(new F.LngLat(0,90)),S;s.forEach(O=>{const I=O.lngLat;K>=$.distanceTo(I)&&(S=I,K=$.distanceTo(I))}),S&&t(1,s=s.filter(O=>{const I=O.lngLat;return I.lng!=(S==null?void 0:S.lng)||I.lat!=(S==null?void 0:S.lat)}))}function c(){t(0,l=!1)}function o(){t(0,l=!0),t(1,s=[]),y()}function _($){$.key==="Shift"&&(f=!0),$.key==="Escape"&&o()}function b($){$.key==="Shift"&&(f=!1)}function p(){if(s.length<2){y();return}const $=s.map(D=>[D.lngLat.lng,D.lngLat.lat]);t(2,a=Le($,{})),a.properties&&t(2,a.properties.length=(Ee(a)*1e3).toFixed(2),a),t(3,u=JSON.parse(JSON.stringify(a)))}function y(){t(2,a=void 0),t(3,u=te())}fe(()=>{n.on("click",d)}),ue(()=>{n.off("click",d)});function pe($,D){r.$$.not_equal(D.lngLat,$)&&(D.lngLat=$,t(1,s))}return[l,s,a,u,c,o,_,b,p,pe]}class et extends G{constructor(e){super(),T(this,e,Ae,Oe,j,{})}}function ie(r){let e,t,n,l;const s=[ze,Fe],a=[];function f(i,u){return i[0]?0:1}return e=f(r),t=a[e]=s[e](r),{c(){t.c(),n=q()},m(i,u){a[e].m(i,u),h(i,n,u),l=!0},p(i,u){let d=e;e=f(i),e===d?a[e].p(i,u):(U(),k(a[d],1,1,()=>{a[d]=null}),H(),t=a[e],t?t.p(i,u):(t=a[e]=s[e](i),t.c()),g(t,1),t.m(n.parentNode,n))},i(i){l||(g(t),l=!0)},o(i){k(t),l=!1},d(i){i&&w(n),a[e].d(i)}}}function Fe(r){let e,t;return e=new J({props:{$$slots:{default:[Ke]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){P(e.$$.fragment)},m(n,l){C(e,n,l),t=!0},p(n,l){const s={};l&256&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function ze(r){let e,t;return e=new J({props:{$$slots:{default:[Ye]},$$scope:{ctx:r}}}),e.$on("click",r[2]),{c(){P(e.$$.fragment)},m(n,l){C(e,n,l),t=!0},p(n,l){const s={};l&256&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){k(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Ke(r){let e;return{c(){e=V("Disable Street View")},m(t,n){h(t,e,n)},d(t){t&&w(e)}}}function Ye(r){let e;return{c(){e=V("Enable Street View")},m(t,n){h(t,e,n)},d(t){t&&w(e)}}}function ce(r){return{c:W,m:W,d:W}}function Ze(r){let e,t,n,l=r[1]&&ie(r),s=!r[0]&&ce();return{c(){l&&l.c(),e=N(),s&&s.c(),t=q()},m(a,f){l&&l.m(a,f),h(a,e,f),s&&s.m(a,f),h(a,t,f),n=!0},p(a,[f]){a[1]?l?(l.p(a,f),f&2&&g(l,1)):(l=ie(a),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(U(),k(l,1,1,()=>{l=null}),H()),a[0]?s&&(s.d(1),s=null):s||(s=ce(),s.c(),s.m(t.parentNode,t))},i(a){n||(g(l),n=!0)},o(a){k(l),n=!1},d(a){a&&(w(e),w(t)),l&&l.d(a),s&&s.d(a)}}}function Qe(r,e,t){let n,l;B(r,z,m=>t(6,n=m)),B(r,Pe,m=>t(7,l=m));let{displayEnableButton:s}=e,{isInactive:a}=e,f=[];function i(m){if(a)return;let c=m.lngLat.lng,o=m.lngLat.lat;l.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${o},${c}&cbp=11,0,0,0,0`,"_blank"):l.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${o}~${c}&style=x`,"_blank")}function u(){t(0,a=!1),n.on("click",i),n.getCanvas().style.cursor=`url(${Ve}), auto`,f=Ce();for(let m of f)m.setProperty(n,"line-color",_e.streetview)}function d(){t(0,a=!0),n.off("click",i),n.getCanvas().style.cursor="inherit";for(let m of f)m.returnToDefaultPaintValues(n)}return r.$$set=m=>{"displayEnableButton"in m&&t(1,s=m.displayEnableButton),"isInactive"in m&&t(0,a=m.isInactive)},[a,s,u,d,i]}class tt extends G{constructor(e){super(),T(this,e,Qe,Ze,j,{displayEnableButton:1,isInactive:0,handleMapClickEvent:4,enableStreetView:2,disableStreetView:3})}get handleMapClickEvent(){return this.$$.ctx[4]}get enableStreetView(){return this.$$.ctx[2]}get disableStreetView(){return this.$$.ctx[3]}}export{et as L,tt as S,xe as a};
