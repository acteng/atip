import{S as q,i as v,s as O,q as U,B as A,r as ee,b3 as j,a0 as te,G as oe,d as V,g as y,j as k,m as L,w as W,_ as N,n as b,$ as D,t as d,o as $,p as S,aq as se,aA as Z,Z as H,aG as ie,e as ne,u as C,k as T,C as ae,H as I,b as ce,c as fe,l as ue,O as pe,P as _e,x as z,ab as me,a as B,aH as de,av as ge,aw as be}from"./index-55aa5037.js";import{k as ke,c as le,L as $e,b as we,h as he}from"./camera_cursor-11f9237b.js";function ye(s,e,t){let n;U(s,A,f=>t(3,n=f));let l=null,{markerPosition:r}=e,{markerPositionUpdated:o}=e;return ee(()=>{l=new j.Marker({draggable:!0}).setLngLat(r).addTo(n),l.on("dragstart",()=>{n.getCanvas().style.cursor="grabbing"}),l.on("drag",()=>{t(0,r=l.getLngLat()),o()}),l.on("dragend",()=>{n.getCanvas().style.cursor="inherit"})}),te(()=>{l&&l.remove()}),s.$$set=f=>{"markerPosition"in f&&t(0,r=f.markerPosition),"markerPositionUpdated"in f&&t(1,o=f.markerPositionUpdated)},[r,o]}class Le extends q{constructor(e){super(),v(this,e,ye,null,O,{markerPosition:0,markerPositionUpdated:1})}}function K(s,e,t){const n=s.slice();return n[16]=e[t],n[17]=e,n[18]=t,n}function Se(s){let e,t;return e=new B({props:{$$slots:{default:[Ce]},$$scope:{ctx:s}}}),e.$on("click",s[5]),{c(){y(e.$$.fragment)},m(n,l){L(e,n,l),t=!0},p(n,l){const r={};l&524288&&(r.$$scope={dirty:l,ctx:n}),e.$set(r)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Pe(s){let e,t;return e=new B({props:{$$slots:{default:[Me]},$$scope:{ctx:s}}}),e.$on("click",s[4]),{c(){y(e.$$.fragment)},m(n,l){L(e,n,l),t=!0},p(n,l){const r={};l&524288&&(r.$$scope={dirty:l,ctx:n}),e.$set(r)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Ce(s){let e;return{c(){e=C("Disable Line Measurement Tool")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Me(s){let e;return{c(){e=C("Enable Line Measurement Tool")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Q(s){var m;let e,t,n,l=[],r=new Map,o,f,c=s[2]&&((m=s[2].properties)==null?void 0:m.length)&&X(s);t=new ke({props:{label:"Help",$$slots:{default:[Ee]},$$scope:{ctx:s}}});let u=Z(s[1]);const _=a=>a[16].id;for(let a=0;a<u.length;a+=1){let i=K(s,u,a),p=_(i);r.set(p,l[a]=Y(p,i))}return{c(){c&&c.c(),e=V(),y(t.$$.fragment),n=V();for(let a=0;a<l.length;a+=1)l[a].c();o=H()},m(a,i){c&&c.m(a,i),k(a,e,i),L(t,a,i),k(a,n,i);for(let p=0;p<l.length;p+=1)l[p]&&l[p].m(a,i);k(a,o,i),f=!0},p(a,i){var w;a[2]&&((w=a[2].properties)!=null&&w.length)?c?c.p(a,i):(c=X(a),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null);const p={};i&524288&&(p.$$scope={dirty:i,ctx:a}),t.$set(p),i&258&&(u=Z(a[1]),N(),l=ie(l,i,_,1,a,u,r,o.parentNode,de,Y,o,K),D())},i(a){if(!f){d(t.$$.fragment,a);for(let i=0;i<u.length;i+=1)d(l[i]);f=!0}},o(a){b(t.$$.fragment,a);for(let i=0;i<l.length;i+=1)b(l[i]);f=!1},d(a){a&&($(e),$(n),$(o)),c&&c.d(a),S(t,a);for(let i=0;i<l.length;i+=1)l[i].d(a)}}}function X(s){var o;let e,t,n=((o=s[2].properties)==null?void 0:o.length)+"",l,r;return{c(){e=ne("p"),t=C("Length: "),l=C(n),r=C("m")},m(f,c){k(f,e,c),T(e,t),T(e,l),T(e,r)},p(f,c){var u;c&4&&n!==(n=((u=f[2].properties)==null?void 0:u.length)+"")&&ae(l,n)},d(f){f&&$(e)}}}function Ee(s){let e;return{c(){e=ne("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(t,n){k(t,e,n)},p:I,d(t){t&&$(e)}}}function Y(s,e){let t,n,l,r;function o(c){e[9](c,e[16])}let f={markerPositionUpdated:e[8]};return e[16].lngLat!==void 0&&(f.markerPosition=e[16].lngLat),n=new Le({props:f}),ce.push(()=>fe(n,"markerPosition",o)),{key:s,first:null,c(){t=H(),y(n.$$.fragment),this.first=t},m(c,u){k(c,t,u),L(n,c,u),r=!0},p(c,u){e=c;const _={};!l&&u&2&&(l=!0,_.markerPosition=e[16].lngLat,ue(()=>l=!1)),n.$set(_)},i(c){r||(d(n.$$.fragment,c),r=!0)},o(c){b(n.$$.fragment,c),r=!1},d(c){c&&$(t),S(n,c)}}}function Ve(s){let e,t;const n=[pe("measurement-line"),{paint:{"line-color":le.measuringLine,"line-width":5}}];let l={};for(let r=0;r<n.length;r+=1)l=_e(l,n[r]);return e=new $e({props:l}),{c(){y(e.$$.fragment)},m(r,o){L(e,r,o),t=!0},p(r,o){const f={};e.$set(f)},i(r){t||(d(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){S(e,r)}}}function Ne(s){let e,t,n,l,r,o,f,c;const u=[Pe,Se],_=[];function m(i,p){return i[0]?0:1}e=m(s),t=_[e]=u[e](s);let a=!s[0]&&Q(s);return r=new oe({props:{data:s[3],$$slots:{default:[Ve]},$$scope:{ctx:s}}}),{c(){t.c(),n=V(),a&&a.c(),l=V(),y(r.$$.fragment)},m(i,p){_[e].m(i,p),k(i,n,p),a&&a.m(i,p),k(i,l,p),L(r,i,p),o=!0,f||(c=[W(window,"keydown",s[6]),W(window,"keyup",s[7])],f=!0)},p(i,[p]){let w=e;e=m(i),e===w?_[e].p(i,p):(N(),b(_[w],1,1,()=>{_[w]=null}),D(),t=_[e],t?t.p(i,p):(t=_[e]=u[e](i),t.c()),d(t,1),t.m(n.parentNode,n)),i[0]?a&&(N(),b(a,1,1,()=>{a=null}),D()):a?(a.p(i,p),p&1&&d(a,1)):(a=Q(i),a.c(),d(a,1),a.m(l.parentNode,l));const P={};p&8&&(P.data=i[3]),p&524288&&(P.$$scope={dirty:p,ctx:i}),r.$set(P)},i(i){o||(d(t),d(a),d(r.$$.fragment,i),o=!0)},o(i){b(t),b(a),b(r.$$.fragment,i),o=!1},d(i){i&&($(n),$(l)),_[e].d(i),a&&a.d(i),S(r,i),f=!1,se(c)}}}function De(s,e,t){let n;U(s,A,g=>t(12,n=g));let l=!0,r=[],o,f=!1,c=0,u=z();function _(g){l||(f||(r.push({id:c++,lngLat:g.lngLat}),t(1,r),P()),f&&r.length>0&&(m(g.lngLat),P()))}function m(g){let F=new j.LngLat(0,-90).distanceTo(new j.LngLat(0,90)),h;r.forEach(G=>{const E=G.lngLat;F>=g.distanceTo(E)&&(h=E,F=g.distanceTo(E))}),h&&t(1,r=r.filter(G=>{const E=G.lngLat;return E.lng!=(h==null?void 0:h.lng)||E.lat!=(h==null?void 0:h.lat)}))}function a(){t(0,l=!1)}function i(){t(0,l=!0),t(1,r=[]),J()}function p(g){g.key==="Shift"&&(f=!0),g.key==="Escape"&&i()}function w(g){g.key==="Shift"&&(f=!1)}function P(){if(r.length<2){J();return}const g=r.map(M=>[M.lngLat.lng,M.lngLat.lat]);t(2,o=me(g,{})),o.properties&&t(2,o.properties.length=(we(o)*1e3).toFixed(2),o),t(3,u=JSON.parse(JSON.stringify(o)))}function J(){t(2,o=void 0),t(3,u=z())}ee(()=>{n.on("click",_)}),te(()=>{n.off("click",_)});function re(g,M){s.$$.not_equal(M.lngLat,g)&&(M.lngLat=g,t(1,r))}return[l,r,o,u,a,i,p,w,P,re]}class ve extends q{constructor(e){super(),v(this,e,De,Ne,O,{})}}function R(s){let e,t,n,l;const r=[Ue,Ie],o=[];function f(c,u){return c[0]?0:1}return e=f(s),t=o[e]=r[e](s),{c(){t.c(),n=H()},m(c,u){o[e].m(c,u),k(c,n,u),l=!0},p(c,u){let _=e;e=f(c),e===_?o[e].p(c,u):(N(),b(o[_],1,1,()=>{o[_]=null}),D(),t=o[e],t?t.p(c,u):(t=o[e]=r[e](c),t.c()),d(t,1),t.m(n.parentNode,n))},i(c){l||(d(t),l=!0)},o(c){b(t),l=!1},d(c){c&&$(n),o[e].d(c)}}}function Ie(s){let e,t;return e=new B({props:{$$slots:{default:[He]},$$scope:{ctx:s}}}),e.$on("click",s[3]),{c(){y(e.$$.fragment)},m(n,l){L(e,n,l),t=!0},p(n,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:n}),e.$set(r)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Ue(s){let e,t;return e=new B({props:{$$slots:{default:[Be]},$$scope:{ctx:s}}}),e.$on("click",s[2]),{c(){y(e.$$.fragment)},m(n,l){L(e,n,l),t=!0},p(n,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:n}),e.$set(r)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function He(s){let e;return{c(){e=C("Disable Street View")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Be(s){let e;return{c(){e=C("Enable Street View")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function x(s){return{c:I,m:I,d:I}}function Ge(s){let e,t,n,l=s[1]&&R(s),r=!s[0]&&x();return{c(){l&&l.c(),e=V(),r&&r.c(),t=H()},m(o,f){l&&l.m(o,f),k(o,e,f),r&&r.m(o,f),k(o,t,f),n=!0},p(o,[f]){o[1]?l?(l.p(o,f),f&2&&d(l,1)):(l=R(o),l.c(),d(l,1),l.m(e.parentNode,e)):l&&(N(),b(l,1,1,()=>{l=null}),D()),o[0]?r&&(r.d(1),r=null):r||(r=x(),r.c(),r.m(t.parentNode,t))},i(o){n||(d(l),n=!0)},o(o){b(l),n=!1},d(o){o&&($(e),$(t)),l&&l.d(o),r&&r.d(o)}}}function Te(s,e,t){let n,l;U(s,A,m=>t(6,n=m)),U(s,ge,m=>t(7,l=m));let{displayEnableButton:r}=e,{isInactive:o}=e,f=[];function c(m){if(o)return;let a=m.lngLat.lng,i=m.lngLat.lat;l.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${i},${a}&cbp=11,0,0,0,0`,"_blank"):l.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${i}~${a}&style=x`,"_blank")}function u(){t(0,o=!1),n.on("click",c),n.getCanvas().style.cursor=`url(${he}), auto`,f=be();for(let m of f)m.setProperty(n,"line-color",le.streetview)}function _(){t(0,o=!0),n.off("click",c),n.getCanvas().style.cursor="inherit";for(let m of f)m.returnToDefaultPaintValues(n)}return s.$$set=m=>{"displayEnableButton"in m&&t(1,r=m.displayEnableButton),"isInactive"in m&&t(0,o=m.isInactive)},[o,r,u,_,c]}class Oe extends q{constructor(e){super(),v(this,e,Te,Ge,O,{displayEnableButton:1,isInactive:0,handleMapClickEvent:4,enableStreetView:2,disableStreetView:3})}get handleMapClickEvent(){return this.$$.ctx[4]}get enableStreetView(){return this.$$.ctx[2]}get disableStreetView(){return this.$$.ctx[3]}}export{ve as L,Oe as S};
