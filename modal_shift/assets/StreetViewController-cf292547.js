import{S as U,i as T,s as B,aI as F,e as y,h as L,j as b,k as w,aJ as R,aK as A,aL as z,t as g,n as d,o as k,d as P,at as de,w as G,az as oe,b0 as be,aU as ke,q as j,B as W,r as ae,b2 as K,a5 as fe,G as he,g as S,m as C,a2 as D,a3 as H,p as v,aw as Y,a1 as q,aE as $e,u as V,C as we,H as Le,b as ce,c as ue,l as _e,O as ye,P as Se,x as Z,ad as Ce,a as J,aF as ve,b5 as x,R as Pe,aH as Ve,b6 as Me}from"./index-61eb1eda.js";import{C as pe,c as me,L as Ee,b as Ie}from"./LineLayer-f8323e05.js";function Ne(r){let e,t,n;const l=r[3].default,s=F(l,r,r[2],null);return{c(){e=y("fieldset"),t=y("div"),s&&s.c(),L(t,"class",r[0]),L(t,"data-module","govuk-checkboxes"),L(e,"class","govuk-fieldset")},m(i,c){b(i,e,c),w(e,t),s&&s.m(t,null),n=!0},p(i,[c]){s&&s.p&&(!n||c&4)&&R(s,l,i,i[2],n?z(l,i[2],c,null):A(i[2]),null)},i(i){n||(g(s,i),n=!0)},o(i){d(s,i),n=!1},d(i){i&&k(e),s&&s.d(i)}}}function De(r,e,t){let{$$slots:n={},$$scope:l}=e,{small:s=!1}=e,i=s?"govuk-checkboxes--small":"govuk-checkboxes";return r.$$set=c=>{"small"in c&&t(1,s=c.small),"$$scope"in c&&t(2,l=c.$$scope)},[i,s,l,n]}class st extends U{constructor(e){super(),T(this,e,De,Ne,B,{small:1})}}const He=r=>({}),ee=r=>({});function Ue(r){let e,t,n,l,s,i,c,o,_;const p=r[5].default,m=F(p,r,r[4],null),a=r[5].right,f=F(a,r,r[4],ee);return{c(){e=y("div"),t=y("input"),n=P(),l=y("label"),m&&m.c(),s=P(),i=y("span"),f&&f.c(),L(t,"type","checkbox"),L(t,"class","govuk-checkboxes__input"),L(t,"id",r[1]),L(l,"class","govuk-label govuk-checkboxes__label"),L(l,"for",r[1]),L(l,"title",r[2]),de(i,"float","right"),L(e,"class","govuk-checkboxes__item"),L(e,"style",r[3])},m(u,h){b(u,e,h),w(e,t),t.checked=r[0],w(e,n),w(e,l),m&&m.m(l,null),w(e,s),w(e,i),f&&f.m(i,null),c=!0,o||(_=[G(t,"change",r[7]),G(t,"change",r[6])],o=!0)},p(u,[h]){(!c||h&2)&&L(t,"id",u[1]),h&1&&(t.checked=u[0]),m&&m.p&&(!c||h&16)&&R(m,p,u,u[4],c?z(p,u[4],h,null):A(u[4]),null),(!c||h&2)&&L(l,"for",u[1]),(!c||h&4)&&L(l,"title",u[2]),f&&f.p&&(!c||h&16)&&R(f,a,u,u[4],c?z(a,u[4],h,He):A(u[4]),ee)},i(u){c||(g(m,u),g(f,u),c=!0)},o(u){d(m,u),d(f,u),c=!1},d(u){u&&k(e),m&&m.d(u),f&&f.d(u),o=!1,oe(_)}}}function Te(r,e,t){let{$$slots:n={},$$scope:l}=e;const s=be(n);let{id:i}=e,{checked:c}=e,{hint:o=null}=e,p=s.right!==void 0?"float: none":"";function m(f){ke.call(this,r,f)}function a(){c=this.checked,t(0,c)}return r.$$set=f=>{"id"in f&&t(1,i=f.id),"checked"in f&&t(0,c=f.checked),"hint"in f&&t(2,o=f.hint),"$$scope"in f&&t(4,l=f.$$scope)},[c,i,o,p,l,n,m,a]}class rt extends U{constructor(e){super(),T(this,e,Te,Ue,B,{id:1,checked:0,hint:2})}}function Be(r,e,t){let n;j(r,W,c=>t(3,n=c));let l=null,{markerPosition:s}=e,{markerPositionUpdated:i}=e;return ae(()=>{l=new K.Marker({draggable:!0}).setLngLat(s).addTo(n),l.on("dragstart",()=>{n.getCanvas().style.cursor="grabbing"}),l.on("drag",()=>{t(0,s=l.getLngLat()),i()}),l.on("dragend",()=>{n.getCanvas().style.cursor="inherit"})}),fe(()=>{l&&l.remove()}),r.$$set=c=>{"markerPosition"in c&&t(0,s=c.markerPosition),"markerPositionUpdated"in c&&t(1,i=c.markerPositionUpdated)},[s,i]}class Ge extends U{constructor(e){super(),T(this,e,Be,null,B,{markerPosition:0,markerPositionUpdated:1})}}function te(r,e,t){const n=r.slice();return n[16]=e[t],n[17]=e,n[18]=t,n}function je(r){let e,t;return e=new J({props:{$$slots:{default:[Je]},$$scope:{ctx:r}}}),e.$on("click",r[5]),{c(){S(e.$$.fragment)},m(n,l){C(e,n,l),t=!0},p(n,l){const s={};l&524288&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){v(e,n)}}}function qe(r){let e,t;return e=new J({props:{$$slots:{default:[Oe]},$$scope:{ctx:r}}}),e.$on("click",r[4]),{c(){S(e.$$.fragment)},m(n,l){C(e,n,l),t=!0},p(n,l){const s={};l&524288&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){v(e,n)}}}function Je(r){let e;return{c(){e=V("Disable Line Measurement Tool")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function Oe(r){let e;return{c(){e=V("Enable Line Measurement Tool")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function ne(r){var m;let e,t,n,l=[],s=new Map,i,c,o=r[2]&&((m=r[2].properties)==null?void 0:m.length)&&le(r);t=new pe({props:{label:"Help",$$slots:{default:[Fe]},$$scope:{ctx:r}}});let _=Y(r[1]);const p=a=>a[16].id;for(let a=0;a<_.length;a+=1){let f=te(r,_,a),u=p(f);s.set(u,l[a]=se(u,f))}return{c(){o&&o.c(),e=P(),S(t.$$.fragment),n=P();for(let a=0;a<l.length;a+=1)l[a].c();i=q()},m(a,f){o&&o.m(a,f),b(a,e,f),C(t,a,f),b(a,n,f);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(a,f);b(a,i,f),c=!0},p(a,f){var h;a[2]&&((h=a[2].properties)!=null&&h.length)?o?o.p(a,f):(o=le(a),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null);const u={};f&524288&&(u.$$scope={dirty:f,ctx:a}),t.$set(u),f&258&&(_=Y(a[1]),D(),l=$e(l,f,p,1,a,_,s,i.parentNode,ve,se,i,te),H())},i(a){if(!c){g(t.$$.fragment,a);for(let f=0;f<_.length;f+=1)g(l[f]);c=!0}},o(a){d(t.$$.fragment,a);for(let f=0;f<l.length;f+=1)d(l[f]);c=!1},d(a){a&&(k(e),k(n),k(i)),o&&o.d(a),v(t,a);for(let f=0;f<l.length;f+=1)l[f].d(a)}}}function le(r){var i;let e,t,n=((i=r[2].properties)==null?void 0:i.length)+"",l,s;return{c(){e=y("p"),t=V("Length: "),l=V(n),s=V("m")},m(c,o){b(c,e,o),w(e,t),w(e,l),w(e,s)},p(c,o){var _;o&4&&n!==(n=((_=c[2].properties)==null?void 0:_.length)+"")&&we(l,n)},d(c){c&&k(e)}}}function Fe(r){let e;return{c(){e=y("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(t,n){b(t,e,n)},p:Le,d(t){t&&k(e)}}}function se(r,e){let t,n,l,s;function i(o){e[9](o,e[16])}let c={markerPositionUpdated:e[8]};return e[16].lngLat!==void 0&&(c.markerPosition=e[16].lngLat),n=new Ge({props:c}),ce.push(()=>ue(n,"markerPosition",i)),{key:r,first:null,c(){t=q(),S(n.$$.fragment),this.first=t},m(o,_){b(o,t,_),C(n,o,_),s=!0},p(o,_){e=o;const p={};!l&&_&2&&(l=!0,p.markerPosition=e[16].lngLat,_e(()=>l=!1)),n.$set(p)},i(o){s||(g(n.$$.fragment,o),s=!0)},o(o){d(n.$$.fragment,o),s=!1},d(o){o&&k(t),v(n,o)}}}function Re(r){let e,t;const n=[ye("measurement-line"),{paint:{"line-color":me.measuringLine,"line-width":5}}];let l={};for(let s=0;s<n.length;s+=1)l=Se(l,n[s]);return e=new Ee({props:l}),{c(){S(e.$$.fragment)},m(s,i){C(e,s,i),t=!0},p(s,i){const c={};e.$set(c)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ae(r){let e,t,n,l,s,i,c,o;const _=[qe,je],p=[];function m(f,u){return f[0]?0:1}e=m(r),t=p[e]=_[e](r);let a=!r[0]&&ne(r);return s=new he({props:{data:r[3],$$slots:{default:[Re]},$$scope:{ctx:r}}}),{c(){t.c(),n=P(),a&&a.c(),l=P(),S(s.$$.fragment)},m(f,u){p[e].m(f,u),b(f,n,u),a&&a.m(f,u),b(f,l,u),C(s,f,u),i=!0,c||(o=[G(window,"keydown",r[6]),G(window,"keyup",r[7])],c=!0)},p(f,[u]){let h=e;e=m(f),e===h?p[e].p(f,u):(D(),d(p[h],1,1,()=>{p[h]=null}),H(),t=p[e],t?t.p(f,u):(t=p[e]=_[e](f),t.c()),g(t,1),t.m(n.parentNode,n)),f[0]?a&&(D(),d(a,1,1,()=>{a=null}),H()):a?(a.p(f,u),u&1&&g(a,1)):(a=ne(f),a.c(),g(a,1),a.m(l.parentNode,l));const E={};u&8&&(E.data=f[3]),u&524288&&(E.$$scope={dirty:u,ctx:f}),s.$set(E)},i(f){i||(g(t),g(a),g(s.$$.fragment,f),i=!0)},o(f){d(t),d(a),d(s.$$.fragment,f),i=!1},d(f){f&&(k(n),k(l)),p[e].d(f),a&&a.d(f),v(s,f),c=!1,oe(o)}}}function ze(r,e,t){let n;j(r,W,$=>t(12,n=$));let l=!0,s=[],i,c=!1,o=0,_=Z();function p($){l||(c||(s.push({id:o++,lngLat:$.lngLat}),t(1,s),E()),c&&s.length>0&&(m($.lngLat),E()))}function m($){let X=new K.LngLat(0,-90).distanceTo(new K.LngLat(0,90)),M;s.forEach(O=>{const N=O.lngLat;X>=$.distanceTo(N)&&(M=N,X=$.distanceTo(N))}),M&&t(1,s=s.filter(O=>{const N=O.lngLat;return N.lng!=(M==null?void 0:M.lng)||N.lat!=(M==null?void 0:M.lat)}))}function a(){t(0,l=!1)}function f(){t(0,l=!0),t(1,s=[]),Q()}function u($){$.key==="Shift"&&(c=!0),$.key==="Escape"&&f()}function h($){$.key==="Shift"&&(c=!1)}function E(){if(s.length<2){Q();return}const $=s.map(I=>[I.lngLat.lng,I.lngLat.lat]);t(2,i=Ce($,{})),i.properties&&t(2,i.properties.length=(Ie(i)*1e3).toFixed(2),i),t(3,_=JSON.parse(JSON.stringify(i)))}function Q(){t(2,i=void 0),t(3,_=Z())}ae(()=>{n.on("click",p)}),fe(()=>{n.off("click",p)});function ge($,I){r.$$.not_equal(I.lngLat,$)&&(I.lngLat=$,t(1,s))}return[l,s,i,_,a,f,u,h,E,ge]}class it extends U{constructor(e){super(),T(this,e,ze,Ae,B,{})}}const Ke="/atip/modal_shift/assets/camera_cursor-824d29b6.svg";function re(r){let e,t,n,l;const s=[Qe,We],i=[];function c(o,_){return o[0]?0:1}return e=c(r),t=i[e]=s[e](r),{c(){t.c(),n=q()},m(o,_){i[e].m(o,_),b(o,n,_),l=!0},p(o,_){let p=e;e=c(o),e===p?i[e].p(o,_):(D(),d(i[p],1,1,()=>{i[p]=null}),H(),t=i[e],t?t.p(o,_):(t=i[e]=s[e](o),t.c()),g(t,1),t.m(n.parentNode,n))},i(o){l||(g(t),l=!0)},o(o){d(t),l=!1},d(o){o&&k(n),i[e].d(o)}}}function We(r){let e,t;return e=new J({props:{$$slots:{default:[Xe]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){S(e.$$.fragment)},m(n,l){C(e,n,l),t=!0},p(n,l){const s={};l&512&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){v(e,n)}}}function Qe(r){let e,t;return e=new J({props:{$$slots:{default:[Ye]},$$scope:{ctx:r}}}),e.$on("click",r[2]),{c(){S(e.$$.fragment)},m(n,l){C(e,n,l),t=!0},p(n,l){const s={};l&512&&(s.$$scope={dirty:l,ctx:n}),e.$set(s)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){v(e,n)}}}function Xe(r){let e;return{c(){e=V("Disable Street View")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function Ye(r){let e;return{c(){e=V("Enable Street View")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function ie(r){let e,t,n,l,s;function i(o){r[6](o)}let c={legend:"Source",id:"streetViewImagery",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return r[4].streetViewImagery!==void 0&&(c.value=r[4].streetViewImagery),e=new Pe({props:c}),ce.push(()=>ue(e,"value",i)),l=new pe({props:{label:"Help",$$slots:{default:[xe]},$$scope:{ctx:r}}}),{c(){S(e.$$.fragment),n=P(),S(l.$$.fragment)},m(o,_){C(e,o,_),b(o,n,_),C(l,o,_),s=!0},p(o,_){const p={};!t&&_&16&&(t=!0,p.value=o[4].streetViewImagery,_e(()=>t=!1)),e.$set(p);const m={};_&512&&(m.$$scope={dirty:_,ctx:o}),l.$set(m)},i(o){s||(g(e.$$.fragment,o),g(l.$$.fragment,o),s=!0)},o(o){d(e.$$.fragment,o),d(l.$$.fragment,o),s=!1},d(o){o&&k(n),v(e,o),v(l,o)}}}function Ze(r){let e;return{c(){e=V("Luc Chaissac")},m(t,n){b(t,e,n)},d(t){t&&k(e)}}}function xe(r){let e,t,n,l,s,i,c,o,_;return o=new Ve({props:{href:"https://icon-icons.com/icon/screenshot-cursor-camera/100181",$$slots:{default:[Ze]},$$scope:{ctx:r}}}),{c(){e=y("ul"),t=y("li"),t.innerHTML=`<b>Click</b>
        on the map to open a new tab with a 3rd-party imagery provider`,n=P(),l=y("li"),l.innerHTML=`Press <b>Escape</b>
        to exit this mode`,s=P(),i=y("li"),c=V("Cursor by "),S(o.$$.fragment)},m(p,m){b(p,e,m),w(e,t),w(e,n),w(e,l),w(e,s),w(e,i),w(i,c),C(o,i,null),_=!0},p(p,m){const a={};m&512&&(a.$$scope={dirty:m,ctx:p}),o.$set(a)},i(p){_||(g(o.$$.fragment,p),_=!0)},o(p){d(o.$$.fragment,p),_=!1},d(p){p&&k(e),v(o)}}}function et(r){let e,t,n,l=r[1]&&re(r),s=!r[0]&&ie(r);return{c(){l&&l.c(),e=P(),s&&s.c(),t=q()},m(i,c){l&&l.m(i,c),b(i,e,c),s&&s.m(i,c),b(i,t,c),n=!0},p(i,[c]){i[1]?l?(l.p(i,c),c&2&&g(l,1)):(l=re(i),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(D(),d(l,1,1,()=>{l=null}),H()),i[0]?s&&(D(),d(s,1,1,()=>{s=null}),H()):s?(s.p(i,c),c&1&&g(s,1)):(s=ie(i),s.c(),g(s,1),s.m(t.parentNode,t))},i(i){n||(g(l),g(s),n=!0)},o(i){d(l),d(s),n=!1},d(i){i&&(k(e),k(t)),l&&l.d(i),s&&s.d(i)}}}function tt(r,e,t){let n,l;j(r,W,a=>t(8,n=a)),j(r,x,a=>t(4,l=a));let{displayEnableButton:s}=e,{isInactive:i}=e,c=[];function o(a){if(i)return;let f=a.lngLat.lng,u=a.lngLat.lat;l.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${u},${f}&cbp=11,0,0,0,0`,"_blank"):l.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${u}~${f}&style=x`,"_blank")}function _(){t(0,i=!1),n.on("click",o),n.getCanvas().style.cursor=`url(${Ke}), auto`,c=Me();for(let a of c)a.setProperty(n,"line-color",me.streetview)}function p(){t(0,i=!0),n.off("click",o),n.getCanvas().style.cursor="inherit";for(let a of c)a.returnToDefaultPaintValues(n)}function m(a){r.$$.not_equal(l.streetViewImagery,a)&&(l.streetViewImagery=a,x.set(l))}return r.$$set=a=>{"displayEnableButton"in a&&t(1,s=a.displayEnableButton),"isInactive"in a&&t(0,i=a.isInactive)},[i,s,_,p,l,o,m]}class ot extends U{constructor(e){super(),T(this,e,tt,et,B,{displayEnableButton:1,isInactive:0,handleMapClickEvent:5,enableStreetView:2,disableStreetView:3})}get handleMapClickEvent(){return this.$$.ctx[5]}get enableStreetView(){return this.$$.ctx[2]}get disableStreetView(){return this.$$.ctx[3]}}export{st as C,it as L,ot as S,rt as a};
