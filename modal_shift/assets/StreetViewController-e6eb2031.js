import{S as q,i as v,s as O,q as U,B as J,r as ee,b4 as G,a1 as te,G as oe,d as V,g as y,j as k,m as L,w as W,$ as N,n as b,a0 as D,t as d,o as $,p as S,ar as se,aB as z,_ as B,aH as ie,e as ne,u as C,k as j,C as ae,H as I,b as ce,c as fe,l as ue,O as pe,P as _e,x as K,ac as me,a as H,aI as de,aw as ge,ax as be}from"./index-12e1f166.js";import{k as ke,c as re,L as $e,b as we,h as he}from"./camera_cursor-9fb77751.js";function ye(s,e,t){let n;U(s,J,f=>t(3,n=f));let r=null,{markerPosition:l}=e,{markerPositionUpdated:o}=e;return ee(()=>{r=new G.Marker({draggable:!0}).setLngLat(l).addTo(n),r.on("dragstart",()=>{n.getCanvas().style.cursor="grabbing"}),r.on("drag",()=>{t(0,l=r.getLngLat()),o()}),r.on("dragend",()=>{n.getCanvas().style.cursor="inherit"})}),te(()=>{r&&r.remove()}),s.$$set=f=>{"markerPosition"in f&&t(0,l=f.markerPosition),"markerPositionUpdated"in f&&t(1,o=f.markerPositionUpdated)},[l,o]}class Le extends q{constructor(e){super(),v(this,e,ye,null,O,{markerPosition:0,markerPositionUpdated:1})}}function Q(s,e,t){const n=s.slice();return n[16]=e[t],n[17]=e,n[18]=t,n}function Se(s){let e,t;return e=new H({props:{$$slots:{default:[Ce]},$$scope:{ctx:s}}}),e.$on("click",s[5]),{c(){y(e.$$.fragment)},m(n,r){L(e,n,r),t=!0},p(n,r){const l={};r&524288&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Pe(s){let e,t;return e=new H({props:{$$slots:{default:[Me]},$$scope:{ctx:s}}}),e.$on("click",s[4]),{c(){y(e.$$.fragment)},m(n,r){L(e,n,r),t=!0},p(n,r){const l={};r&524288&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Ce(s){let e;return{c(){e=C("Disable Line Measurement Tool")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function Me(s){let e;return{c(){e=C("Enable Line Measurement Tool")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function X(s){var m;let e,t,n,r=[],l=new Map,o,f,c=s[2]&&((m=s[2].properties)==null?void 0:m.length)&&Y(s);t=new ke({props:{label:"Help",$$slots:{default:[Ee]},$$scope:{ctx:s}}});let u=z(s[1]);const _=a=>a[16].id;for(let a=0;a<u.length;a+=1){let i=Q(s,u,a),p=_(i);l.set(p,r[a]=Z(p,i))}return{c(){c&&c.c(),e=V(),y(t.$$.fragment),n=V();for(let a=0;a<r.length;a+=1)r[a].c();o=B()},m(a,i){c&&c.m(a,i),k(a,e,i),L(t,a,i),k(a,n,i);for(let p=0;p<r.length;p+=1)r[p]&&r[p].m(a,i);k(a,o,i),f=!0},p(a,i){var w;a[2]&&((w=a[2].properties)!=null&&w.length)?c?c.p(a,i):(c=Y(a),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null);const p={};i&524288&&(p.$$scope={dirty:i,ctx:a}),t.$set(p),i&258&&(u=z(a[1]),N(),r=ie(r,i,_,1,a,u,l,o.parentNode,de,Z,o,Q),D())},i(a){if(!f){d(t.$$.fragment,a);for(let i=0;i<u.length;i+=1)d(r[i]);f=!0}},o(a){b(t.$$.fragment,a);for(let i=0;i<r.length;i+=1)b(r[i]);f=!1},d(a){a&&($(e),$(n),$(o)),c&&c.d(a),S(t,a);for(let i=0;i<r.length;i+=1)r[i].d(a)}}}function Y(s){var o;let e,t,n=((o=s[2].properties)==null?void 0:o.length)+"",r,l;return{c(){e=ne("p"),t=C("Length: "),r=C(n),l=C("m")},m(f,c){k(f,e,c),j(e,t),j(e,r),j(e,l)},p(f,c){var u;c&4&&n!==(n=((u=f[2].properties)==null?void 0:u.length)+"")&&ae(r,n)},d(f){f&&$(e)}}}function Ee(s){let e;return{c(){e=ne("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and Drag</b>
        an existing waypoint to move it</li> <li><b>Hold shift and click on</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(t,n){k(t,e,n)},p:I,d(t){t&&$(e)}}}function Z(s,e){let t,n,r,l;function o(c){e[9](c,e[16])}let f={markerPositionUpdated:e[8]};return e[16].lngLat!==void 0&&(f.markerPosition=e[16].lngLat),n=new Le({props:f}),ce.push(()=>fe(n,"markerPosition",o)),{key:s,first:null,c(){t=B(),y(n.$$.fragment),this.first=t},m(c,u){k(c,t,u),L(n,c,u),l=!0},p(c,u){e=c;const _={};!r&&u&2&&(r=!0,_.markerPosition=e[16].lngLat,ue(()=>r=!1)),n.$set(_)},i(c){l||(d(n.$$.fragment,c),l=!0)},o(c){b(n.$$.fragment,c),l=!1},d(c){c&&$(t),S(n,c)}}}function Ve(s){let e,t;const n=[pe("measurement-line"),{paint:{"line-color":re.measuringLine,"line-width":5}}];let r={};for(let l=0;l<n.length;l+=1)r=_e(r,n[l]);return e=new $e({props:r}),{c(){y(e.$$.fragment)},m(l,o){L(e,l,o),t=!0},p(l,o){const f={};e.$set(f)},i(l){t||(d(e.$$.fragment,l),t=!0)},o(l){b(e.$$.fragment,l),t=!1},d(l){S(e,l)}}}function Ne(s){let e,t,n,r,l,o,f,c;const u=[Pe,Se],_=[];function m(i,p){return i[0]?0:1}e=m(s),t=_[e]=u[e](s);let a=!s[0]&&X(s);return l=new oe({props:{data:s[3],$$slots:{default:[Ve]},$$scope:{ctx:s}}}),{c(){t.c(),n=V(),a&&a.c(),r=V(),y(l.$$.fragment)},m(i,p){_[e].m(i,p),k(i,n,p),a&&a.m(i,p),k(i,r,p),L(l,i,p),o=!0,f||(c=[W(window,"keydown",s[6]),W(window,"keyup",s[7])],f=!0)},p(i,[p]){let w=e;e=m(i),e===w?_[e].p(i,p):(N(),b(_[w],1,1,()=>{_[w]=null}),D(),t=_[e],t?t.p(i,p):(t=_[e]=u[e](i),t.c()),d(t,1),t.m(n.parentNode,n)),i[0]?a&&(N(),b(a,1,1,()=>{a=null}),D()):a?(a.p(i,p),p&1&&d(a,1)):(a=X(i),a.c(),d(a,1),a.m(r.parentNode,r));const P={};p&8&&(P.data=i[3]),p&524288&&(P.$$scope={dirty:p,ctx:i}),l.$set(P)},i(i){o||(d(t),d(a),d(l.$$.fragment,i),o=!0)},o(i){b(t),b(a),b(l.$$.fragment,i),o=!1},d(i){i&&($(n),$(r)),_[e].d(i),a&&a.d(i),S(l,i),f=!1,se(c)}}}function De(s,e,t){let n;U(s,J,g=>t(12,n=g));let r=!0,l=[],o,f=!1,c=0,u=K();function _(g){r||(f||(l.push({id:c++,lngLat:g.lngLat}),t(1,l),P()),f&&l.length>0&&(m(g.lngLat),P()))}function m(g){let F=new G.LngLat(0,-90).distanceTo(new G.LngLat(0,90)),h;l.forEach(T=>{const E=T.lngLat;F>=g.distanceTo(E)&&(h=E,F=g.distanceTo(E))}),h&&t(1,l=l.filter(T=>{const E=T.lngLat;return E.lng!=(h==null?void 0:h.lng)||E.lat!=(h==null?void 0:h.lat)}))}function a(){t(0,r=!1)}function i(){t(0,r=!0),t(1,l=[]),A()}function p(g){g.key==="Shift"&&(f=!0),g.key==="Escape"&&i()}function w(g){g.key==="Shift"&&(f=!1)}function P(){if(l.length<2){A();return}const g=l.map(M=>[M.lngLat.lng,M.lngLat.lat]);t(2,o=me(g,{})),o.properties&&t(2,o.properties.length=(we(o)*1e3).toFixed(2),o),t(3,u=JSON.parse(JSON.stringify(o)))}function A(){t(2,o=void 0),t(3,u=K())}ee(()=>{n.on("click",_)}),te(()=>{n.off("click",_)});function le(g,M){s.$$.not_equal(M.lngLat,g)&&(M.lngLat=g,t(1,l))}return[r,l,o,u,a,i,p,w,P,le]}class ve extends q{constructor(e){super(),v(this,e,De,Ne,O,{})}}function R(s){let e,t,n,r;const l=[Ue,Ie],o=[];function f(c,u){return c[0]?0:1}return e=f(s),t=o[e]=l[e](s),{c(){t.c(),n=B()},m(c,u){o[e].m(c,u),k(c,n,u),r=!0},p(c,u){let _=e;e=f(c),e===_?o[e].p(c,u):(N(),b(o[_],1,1,()=>{o[_]=null}),D(),t=o[e],t?t.p(c,u):(t=o[e]=l[e](c),t.c()),d(t,1),t.m(n.parentNode,n))},i(c){r||(d(t),r=!0)},o(c){b(t),r=!1},d(c){c&&$(n),o[e].d(c)}}}function Ie(s){let e,t;return e=new H({props:{$$slots:{default:[Be]},$$scope:{ctx:s}}}),e.$on("click",s[3]),{c(){y(e.$$.fragment)},m(n,r){L(e,n,r),t=!0},p(n,r){const l={};r&256&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Ue(s){let e,t;return e=new H({props:{$$slots:{default:[He]},$$scope:{ctx:s}}}),e.$on("click",s[2]),{c(){y(e.$$.fragment)},m(n,r){L(e,n,r),t=!0},p(n,r){const l={};r&256&&(l.$$scope={dirty:r,ctx:n}),e.$set(l)},i(n){t||(d(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){S(e,n)}}}function Be(s){let e;return{c(){e=C("Disable Street View")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function He(s){let e;return{c(){e=C("Enable Street View")},m(t,n){k(t,e,n)},d(t){t&&$(e)}}}function x(s){return{c:I,m:I,d:I}}function Te(s){let e,t,n,r=s[1]&&R(s),l=!s[0]&&x();return{c(){r&&r.c(),e=V(),l&&l.c(),t=B()},m(o,f){r&&r.m(o,f),k(o,e,f),l&&l.m(o,f),k(o,t,f),n=!0},p(o,[f]){o[1]?r?(r.p(o,f),f&2&&d(r,1)):(r=R(o),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(N(),b(r,1,1,()=>{r=null}),D()),o[0]?l&&(l.d(1),l=null):l||(l=x(),l.c(),l.m(t.parentNode,t))},i(o){n||(d(r),n=!0)},o(o){b(r),n=!1},d(o){o&&($(e),$(t)),r&&r.d(o),l&&l.d(o)}}}function je(s,e,t){let n,r;U(s,J,m=>t(6,n=m)),U(s,ge,m=>t(7,r=m));let{displayEnableButton:l}=e,{isInactive:o}=e,f=[];function c(m){if(o)return;let a=m.lngLat.lng,i=m.lngLat.lat;r.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${i},${a}&cbp=11,0,0,0,0`,"_blank"):r.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${i}~${a}&style=x`,"_blank")}function u(){t(0,o=!1),n.on("click",c),n.getCanvas().style.cursor=`url(${he}), auto`,f=be();for(let m of f)m.setProperty(n,"line-color",re.streetview)}function _(){t(0,o=!0),n.off("click",c),n.getCanvas().style.cursor="inherit";for(let m of f)m.returnToDefaultPaintValues(n)}return s.$$set=m=>{"displayEnableButton"in m&&t(1,l=m.displayEnableButton),"isInactive"in m&&t(0,o=m.isInactive)},[o,l,u,_,c]}class Oe extends q{constructor(e){super(),v(this,e,je,Te,O,{displayEnableButton:1,isInactive:0,handleMapClickEvent:4,enableStreetView:2,disableStreetView:3})}get handleMapClickEvent(){return this.$$.ctx[4]}get enableStreetView(){return this.$$.ctx[2]}get disableStreetView(){return this.$$.ctx[3]}}export{ve as L,Oe as S};
