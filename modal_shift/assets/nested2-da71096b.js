import{S as z,i as V,s as W,ax as Ir,b as U,c as X,e as A,d as O,g as d,h as x,j as $,m as b,w as Ft,l as K,t as m,n as h,o as p,p as v,aJ as Dt,aK as jt,aL as Bt,aM as Ht,Z as Ne,_ as ae,$ as fe,aN as ir,aO as fn,aP as Er,q as Je,a0 as Nr,aQ as un,aR as Mr,aS as Pr,H as te,aT as Fr,aU as Dr,aV as nt,u as w,k as y,f as en,ao as jr,B as tn,ap as ar,r as nn,F as fr,a as Xt,v as cn,C as H,aA as We,ay as ke,aB as It,aW as ie,O as B,aX as $e,A as q,P as Y,Y as J,aY as ee,G as kt,aZ as rn,a_ as ln,E as ur,x as Br,a$ as $n,N as Hr,aF as pn,X as Rr,W as mn,V as _n,U as Ot,aI as gn,L as Wr,M as Gr,y as Ur}from"./index-994b2b8e.js";import{S as Et,j as Ae,C as St,i as le,L as ue,a as Nt,B as zr,l as dt,c as Vr,G as qr}from"./camera_cursor-a3007737.js";import{L as Xr,a as hn,c as cr,d as ge,C as Ge,Z as Kr}from"./schemas-6bd75098.js";import{E as G,a as Fe,P as re,R as $r,F as Yr}from"./Popup-7e2936f8.js";import{S as Jr,L as Zr,a as Qr}from"./StreetViewController-5fb48774.js";const xr="/atip/modal_shift/assets/help-d011708a.svg";function el(r){let e,n;const t=r[1].default,l=Dt(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),x(e,"class","govuk-prose")},m(o,i){$(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&jt(l,t,o,o[4],n?Ht(t,o[4],i,null):Bt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){h(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function tl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[el]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Ir({props:a}),U.push(()=>X(t,"open",s)),{c(){e=A("button"),e.innerHTML=`<img src="${xr}" title="Help" alt="Help"/>`,n=O(),d(t.$$.fragment),x(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,i||(u=Ft(e,"click",r[2]),i=!0)},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,g.open=f[0],K(()=>l=!1)),t.$set(g)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){h(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),i=!1,u()}}}function nl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class oe extends z{constructor(e){super(),V(this,e,nl,tl,W,{})}}function dn(r){let e=r[0],n,t,l=bn(r);return{c(){l.c(),n=Ne()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&W(e,e=o[0])?(ae(),h(l,1,1,te),fe(),l=bn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){h(l),t=!1},d(o){o&&p(n),l.d(o)}}}function bn(r){let e;const n=r[9].default,t=Dt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&jt(t,n,l,l[8],e?Ht(n,l[8],o,null):Bt(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){h(t,l),e=!1},d(l){t&&t.d(l)}}}function rl(r){let e,n,t=r[0]&&dn(r);return{c(){t&&t.c(),e=Ne()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=dn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ae(),h(t,1,1,()=>{t=null}),fe())},i(l){n||(m(t),n=!0)},o(l){h(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function ll(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=ir("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!fn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let _=new Fr;fn.addProtocol("pmtiles",_.tile)}const{map:c,self:g}=Er();return Je(r,c,_=>n(7,t=_)),Je(r,g,_=>n(0,l=_)),Nr(()=>{if(l){let _=l;un(g,l=null,l),Mr().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource(_))})}}),r.$$set=_=>{"id"in _&&n(3,u=_.id),"url"in _&&n(4,s=_.url),"tiles"in _&&n(5,a=_.tiles),"promoteId"in _&&n(6,f=_.promoteId),"$$scope"in _&&n(8,i=_.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&t&&l!==u&&(l&&t.removeSource(l),un(g,l=u,l),t.addSource(l,Pr({type:"vector",url:s,tiles:a,promoteId:f})))},[l,c,g,u,s,a,f,t,i,o]}class ce extends z{constructor(e){super(),V(this,e,ll,rl,W,{id:3,url:4,tiles:5,promoteId:6})}}function ol(r){let e;const n=r[15].default,t=Dt(n,r,r[23],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8388608)&&jt(t,n,l,l[23],e?Ht(n,l[23],o,null):Bt(l[23]),null)},i(l){e||(m(t,l),e=!0)},o(l){h(t,l),e=!1},d(l){t&&t.d(l)}}}function sl(r){let e,n,t;function l(i){r[16](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[ol]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Dr({props:o}),U.push(()=>X(e,"hovered",l)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){d(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&8388608&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],K(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function il(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=ir("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:C=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:k=!1}=e,{hovered:I=null}=e,{eventsIfTopMost:F=!1}=e;function j(D){I=D,n(0,I)}function L(D){nt.call(this,r,D)}function M(D){nt.call(this,r,D)}function E(D){nt.call(this,r,D)}function N(D){nt.call(this,r,D)}function P(D){nt.call(this,r,D)}function R(D){nt.call(this,r,D)}return r.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,i=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,s=D.beforeId),"beforeLayerType"in D&&n(5,a=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,g=D.filter),"applyToClusters"in D&&n(9,_=D.applyToClusters),"minzoom"in D&&n(10,C=D.minzoom),"maxzoom"in D&&n(11,S=D.maxzoom),"hoverCursor"in D&&n(12,T=D.hoverCursor),"manageHoverState"in D&&n(13,k=D.manageHoverState),"hovered"in D&&n(0,I=D.hovered),"eventsIfTopMost"in D&&n(14,F=D.eventsIfTopMost),"$$scope"in D&&n(23,l=D.$$scope)},[I,o,i,u,s,a,f,c,g,_,C,S,T,k,F,t,j,L,M,E,N,P,R,l]}class al extends z{constructor(e){super(),V(this,e,il,sl,W,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function fl(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ul(r){let e,n,t,l,o=r[0]=="Private (development)"&&fl();return{c(){o&&o.c(),e=O(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated.",t=O(),l=A("p"),l.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,u){o&&o.m(i,u),$(i,e,u),$(i,n,u),$(i,t,u),$(i,l,u)},p:te,d(i){i&&(p(e),p(n),p(t),p(l)),o&&o.d(i)}}}function cl(r){let e,n,t,l,o,i;return o=new oe({props:{$$slots:{default:[ul]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=O(),d(o.$$.fragment)},m(u,s){$(u,e,s),y(e,n),y(e,t),y(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(m(o.$$.fragment,u),i=!0)},o(u){h(o.$$.fragment,u),i=!1},d(u){u&&p(e),v(o)}}}function $l(r){return[en()]}class pl extends z{constructor(e){super(),V(this,e,$l,cl,W,{})}}const ml={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var me=Uint8Array,Ye=Uint16Array,pr=Uint32Array,mr=new me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_r=new me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_l=new me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gr=function(r,e){for(var n=new Ye(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new pr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},hr=gr(mr,2),dr=hr[0],gl=hr[1];dr[28]=258,gl[258]=28;var hl=gr(_r,0),dl=hl[0],Kt=new Ye(32768);for(var ne=0;ne<32768;++ne){var Be=(ne&43690)>>>1|(ne&21845)<<1;Be=(Be&52428)>>>2|(Be&13107)<<2,Be=(Be&61680)>>>4|(Be&3855)<<4,Kt[ne]=((Be&65280)>>>8|(Be&255)<<8)>>>1}var vt=function(r,e,n){for(var t=r.length,l=0,o=new Ye(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Ye(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Ye(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,g=c|(1<<f)-1;c<=g;++c)u[Kt[c]>>>s]=a}else for(u=new Ye(t),l=0;l<t;++l)r[l]&&(u[l]=Kt[i[r[l]-1]++]>>>15-r[l]);return u},Tt=new me(288);for(var ne=0;ne<144;++ne)Tt[ne]=8;for(var ne=144;ne<256;++ne)Tt[ne]=9;for(var ne=256;ne<280;++ne)Tt[ne]=7;for(var ne=280;ne<288;++ne)Tt[ne]=8;var br=new me(32);for(var ne=0;ne<32;++ne)br[ne]=5;var bl=vt(Tt,9,1),vl=vt(br,5,1),Rt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},ve=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Wt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},wl=function(r){return(r+7)/8|0},on=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Ye:r.BYTES_PER_ELEMENT==4?pr:me)(n-e);return t.set(r.subarray(e,n)),t},yl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],we=function(r,e,n){var t=new Error(e||yl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,we),!n)throw t;return t},kl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new me(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new me(t*3));var i=function(et){var qe=e.length;if(et>qe){var tt=new me(Math.max(qe*2,et));tt.set(e),e=tt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,g=n.m,_=n.n,C=t*8;do{if(!f){u=ve(r,s,1);var S=ve(r,s+1,3);if(s+=3,S)if(S==1)f=bl,c=vl,g=9,_=5;else if(S==2){var F=ve(r,s,31)+257,j=ve(r,s+10,15)+4,L=F+ve(r,s+5,31)+1;s+=14;for(var M=new me(L),E=new me(19),N=0;N<j;++N)E[_l[N]]=ve(r,s+N*3,7);s+=j*3;for(var P=Rt(E),R=(1<<P)-1,D=vt(E,P,1),N=0;N<L;){var se=D[ve(r,s,R)];s+=se&15;var T=se>>>4;if(T<16)M[N++]=T;else{var Z=0,be=0;for(T==16?(be=3+ve(r,s,3),s+=2,Z=M[N-1]):T==17?(be=3+ve(r,s,7),s+=3):T==18&&(be=11+ve(r,s,127),s+=7);be--;)M[N++]=Z}}var mt=M.subarray(0,F),he=M.subarray(F);g=Rt(mt),_=Rt(he),f=vt(mt,g,1),c=vt(he,_,1)}else we(1);else{var T=wl(s)+4,k=r[T-4]|r[T-3]<<8,I=T+k;if(I>t){o&&we(0);break}l&&i(a+k),e.set(r.subarray(T,I),a),n.b=a+=k,n.p=s=I*8,n.f=u;continue}if(s>C){o&&we(0);break}}l&&i(a+131072);for(var Qe=(1<<g)-1,_t=(1<<_)-1,xe=s;;xe=s){var Z=f[Wt(r,s)&Qe],pe=Z>>>4;if(s+=Z&15,s>C){o&&we(0);break}if(Z||we(2),pe<256)e[a++]=pe;else if(pe==256){xe=s,f=null;break}else{var gt=pe-254;if(pe>264){var N=pe-257,Me=mr[N];gt=ve(r,s,(1<<Me)-1)+dr[N],s+=Me}var je=c[Wt(r,s)&_t],Ve=je>>>4;je||we(3),s+=je&15;var he=dl[Ve];if(Ve>3){var Me=_r[Ve];he+=Wt(r,s)&(1<<Me)-1,s+=Me}if(s>C){o&&we(0);break}l&&i(a+131072);for(var ht=a+gt;a<ht;a+=4)e[a]=e[a-he],e[a+1]=e[a+1-he],e[a+2]=e[a+2-he],e[a+3]=e[a+3-he];a=ht}}n.l=f,n.p=xe,n.b=a,n.f=u,f&&(u=1,n.m=g,n.d=c,n.n=_)}while(!u);return a==e.length?e:on(e,0,a)},Sl=new me(0),Ie=function(r,e){return r[e]|r[e+1]<<8},ye=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Gt=function(r,e){return ye(r,e)+ye(r,e+4)*4294967296};function Tl(r,e){return kl(r,e)}var Yt=typeof TextDecoder<"u"&&new TextDecoder,Cl=0;try{Yt.decode(Sl,{stream:!0}),Cl=1}catch{}var Ol=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,on(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function vr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(Yt)return Yt.decode(r);var l=Ol(r),o=l[0],i=l[1];return i.length&&we(8),o}}var Al=function(r,e){return e+30+Ie(r,e+26)+Ie(r,e+28)},Ll=function(r,e,n){var t=Ie(r,e+28),l=vr(r.subarray(e+46,e+46+t),!(Ie(r,e+8)&2048)),o=e+46+t,i=ye(r,e+20),u=n&&i==4294967295?Il(r,o):[i,ye(r,e+24),ye(r,e+42)],s=u[0],a=u[1],f=u[2];return[Ie(r,e+10),s,a,l,o+Ie(r,e+30)+Ie(r,e+32),f]},Il=function(r,e){for(;Ie(r,e)!=1;e+=4+Ie(r,e+2));return[Gt(r,e+12),Gt(r,e+4),Gt(r,e+20)]};function El(r,e){for(var n={},t=r.length-22;ye(r,t)!=101010256;--t)(!t||r.length-t>65558)&&we(13);var l=Ie(r,t+8);if(!l)return{};var o=ye(r,t+16),i=o==4294967295||l==65535;if(i){var u=ye(r,t-12);i=ye(r,u)==101075792,i&&(l=ye(r,u+32),o=ye(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=Ll(r,o,i),c=f[0],g=f[1],_=f[2],C=f[3],S=f[4],T=f[5],k=Al(r,T);o=S,(!s||s({name:C,size:g,originalSize:_,compression:c}))&&(c?c==8?n[C]=Tl(r.subarray(k,k+g),new me(_)):we(14,"unknown compression type "+c):n[C]=on(r,k,k+g))}return n}function Nl(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Ut):Ut(r)}function Ut(r){var e=new Uint8Array(r),n=El(e);return Promise.resolve(Ml(n))}function Ml(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=vr(r[l])}return e}function Ee(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Ze(t)===e)return t;n++}}function Ct(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Ze(l)===e&&n.push(l),t++}return n}function Mt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Ze(l)===e&&n(l,t):n(l,t),t++}}function Pl(r,e,n){var t=[];return Mt(r,e,function(l,o){t.push(n(l,o))}),t}var Fl=/.+\:/;function Ze(r){return r.tagName.replace(Fl,"")}function wr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Ze(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=wr(r.childNodes[t]),t++;return e+="</"+Ze(r)+">",e}function Dl(r){var e=r.documentElement,n=Ee(e,"sheetData"),t=[];return Mt(n,"row",function(l){Mt(l,"c",function(o){t.push(o)})}),t}function jl(r,e){return Ee(e,"v")}function Bl(r,e){if(e.firstChild&&Ze(e.firstChild)==="is"&&e.firstChild.firstChild&&Ze(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Hl(r){var e=r.documentElement,n=Ee(e,"dimension");if(n)return n.getAttribute("ref")}function Rl(r){var e=r.documentElement,n=Ee(e,"cellStyleXfs");return n?Ct(n,"xf"):[]}function Wl(r){var e=r.documentElement,n=Ee(e,"cellXfs");return n?Ct(n,"xf"):[]}function Gl(r){var e=r.documentElement,n=Ee(e,"numFmts");return n?Ct(n,"numFmt"):[]}function Ul(r){var e=r.documentElement;return Pl(e,"si",function(n){var t=Ee(n,"t");if(t)return t.textContent;var l="";return Mt(n,"r",function(o){l+=Ee(o,"t").textContent}),l})}function zl(r){var e=r.documentElement;return Ee(e,"workbookPr")}function Vl(r){var e=r.documentElement;return Ct(e,"Relationship")}function ql(r){var e=r.documentElement,n=Ee(e,"sheets");return Ct(n,"sheet")}function Xl(r,e){var n=e.createDocument(r),t={},l=zl(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return ql(n).forEach(o),t}function Kl(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=zt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=zt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=zt(u);break}};return Vl(n).forEach(l),t}function zt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function vn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function wn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vn(Object(n),!0).forEach(function(t){Yl(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Yl(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Jl(r,e){if(!r)return{};var n=e.createDocument(r),t=Rl(n).map(Vt),l=Gl(n).map(Zl).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?wn(wn({},t[u.xfId]),Vt(u,l)):Vt(u,l)};return Wl(n).map(o)}function Zl(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Vt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Ql(r,e){return r?Ul(e.createDocument(r)):[]}function yr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function xl(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=eo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eo(r,e){if(r){if(typeof r=="string")return yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yn(r,e)}}function yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function to(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(no.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&oo(l.numberFormat.template))return!0}}var no=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],ro=/^\[\$-414\]/,lo=/;@$/;function oo(r){r=r.toLowerCase(),r=r.replace(ro,""),r=r.replace(lo,"");for(var e=r.split(/\W+/),n=xl(e),t;!(t=n()).done;){var l=t.value;if(so.indexOf(l)<0)return!1}return!0}var so=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function io(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=qt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=qt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=qt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=ao(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var g=Number(r);if(isNaN(g))throw new Error('Invalid "numeric" cell value: '.concat(r));r=g,to(r,o(),i,a)&&(r=yr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function ao(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function qt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var fo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function uo(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function co(r){for(var e=0,n=0;n<r.length;)e*=26,e+=fo.indexOf(r[n]),n++;return e}function kr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),co(r[0].trim())]}function $o(r,e,n,t,l,o,i){var u=kr(r.getAttribute("r")),s=jl(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:io(a,f,{getInlineStringValue:function(){return Bl(e,r)},getInlineStringXml:function(){return wr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function po(r,e,n,t,l,o){var i=Dl(r);return i.length===0?[]:i.map(function(u){return $o(u,r,e,n,t,l,o)})}function mo(r,e){return bo(r)||ho(r,e)||go(r,e)||_o()}function _o(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function go(r,e){if(r){if(typeof r=="string")return kn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(r,e)}}function kn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ho(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function bo(r){if(Array.isArray(r))return r}function vo(r){var e=Hl(r);if(e)return e=e.split(":").map(kr).map(function(n){var t=mo(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function wo(r,e,n,t,l,o){var i=e.createDocument(r),u=po(i,e,n,t,l,o),s=vo(i)||uo(u);return{cells:u,dimensions:s}}function yo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ko(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ko(r,e){if(r){if(typeof r=="string")return Sn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sn(r,e)}}function Sn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function So(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=yo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function To(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Co(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Co(r,e){if(r){if(typeof r=="string")return Tn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tn(r,e)}}function Tn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Oo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=To(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Ao(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Sr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lo(r,e){return No(r)||Eo(r,e)||Sr(r,e)||Io()}function Io(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sr(r,e){if(r){if(typeof r=="string")return Cn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(r,e)}}function Cn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Eo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function No(r){if(Array.isArray(r))return r}function Mo(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Lo(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=Ao(t),g;!(g=c()).done;){var _=g.value,C=_.row-1,S=_.column-1;S<i&&C<u&&(s[C][S]=_.value)}var T=e.rowMap;if(T)for(var k=0;k<s.length;)T[k]=k,k++;return s=So(Oo(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(s=e.transformData(s)),s}function Po(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Fo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fo(r,e){if(r){if(typeof r=="string")return On(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(r,e)}}function On(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function An(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Do(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?An(Object(n),!0).forEach(function(t){jo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function jo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Bo(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Do({sheet:1},n));var t=function(g){if(!r[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return r[g]},l=Kl(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Ql(t(l.sharedStrings),e):[],i=l.styles?Jl(t(l.styles),e):{},u=Xl(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var g=c.name;return{name:g}});var s=Ho(n.sheet,u.sheets);if(!s||!l.sheets[s])throw Ro(n.sheet,u.sheets);var a=wo(t(l.sheets[s]),e,o,i,u,n),f=Mo(a,n);return n.properties?{data:f,properties:u}:f}function Ho(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Po(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Ro(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Jt(r){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(r)}function Ln(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Wo(r,e,n){return e&&Ln(r.prototype,e),n&&Ln(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Go(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Uo(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&wt(r,e)}function zo(r){var e=Tr();return function(){var t=yt(r),l;if(e){var o=yt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return Vo(this,l)}}function Vo(r,e){if(e&&(Jt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qo(r)}function qo(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Zt(r){var e=typeof Map=="function"?new Map:void 0;return Zt=function(t){if(t===null||!Xo(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Lt(t,arguments,yt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),wt(l,t)},Zt(r)}function Lt(r,e,n){return Tr()?Lt=Reflect.construct:Lt=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&wt(a,i.prototype),a},Lt.apply(null,arguments)}function Tr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Xo(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function wt(r,e){return wt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},wt(r,e)}function yt(r){return yt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},yt(r)}var _e=function(r){Uo(n,r);var e=zo(n);function n(t){var l;return Go(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Wo(n)}(Zt(Error));function Ko(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new _e("not_a_number")}if(typeof r!="number")throw new _e("not_a_number");if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return r}function Yo(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return String(r)}throw new _e("not_a_string")}function Jo(r){if(typeof r=="boolean")return r;throw new _e("not_a_boolean")}function Zo(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new _e("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");var t=yr(r,n);if(isNaN(t.valueOf()))throw new _e("out_of_bounds");return t}throw new _e("not_a_date")}function Qo(r,e){return ts(r)||es(r,e)||Cr(r,e)||xo()}function xo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function es(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ts(r){if(Array.isArray(r))return r}function Qt(r){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(r)}function ns(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Cr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cr(r,e){if(r){if(typeof r=="string")return In(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(r,e)}}function In(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function En(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Nn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?En(Object(n),!0).forEach(function(t){rs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function rs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Mn={isColumnOriented:!1};function ls(r,e,n){n?n=Nn(Nn({},Mn),n):n=Mn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;as(e),l&&(r=is(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Or(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var g=ns(a),_;!(_=g()).done;){var C=_.value;C.row=o[C.row-1]+1}return{rows:s,errors:a}}function Or(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var g=f[a],_=r[g],C=Qt(_.type)==="object"&&!Array.isArray(_.type),S=e[t.indexOf(g)];S===void 0&&(S=null);var T=void 0,k=void 0,I=void 0;if(C)T=Or(_.type,e,n,t,l,o);else if(S===null)T=null;else if(Array.isArray(_.type)){var F=!1,j=ss(S).map(function(M){var E=Pn(M,_,o);return E.error&&(T=M,k=E.error,I=E.reason),E.value!==null&&(F=!0),E.value});k||(T=F?j:null)}else{var L=Pn(S,_,o);k=L.error,I=L.reason,T=k?S:L.value}!k&&T===null&&_.required&&(k="required"),k?(k={error:k,row:n+1,column:g,value:T},I&&(k.reason=I),_.type&&(k.type=_.type),l.push(k)):(u&&T!==null&&(u=!1),(T!==null||o.includeNullValues)&&(i[_.prop]=T))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function Pn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=rt(r,e.parse):e.type?t=os(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function rt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function os(r,e,n){switch(e){case String:return rt(r,Yo);case Number:return rt(r,Ko);case Date:return rt(r,function(t){return Zo(t,{properties:n.properties})});case Boolean:return rt(r,Jo);default:if(typeof e=="function")return rt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Ar(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Ar(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function ss(r){for(var e=[],n=0;n<r.length;){var t=Ar(r,",",n),l=Qo(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var is=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function as(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function xt(r){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(r)}function Lr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;xt(o)==="object"&&(o=Object.keys(r[l])[0],i=Lr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var fs=["schema","map"];function Fn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function At(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Fn(Object(n),!0).forEach(function(t){us(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function us(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function cs(r,e){if(r==null)return{};var n=$s(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function $s(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function ps(r,e,n){var t=n.schema,l=n.map,o=cs(n,fs);!t&&l&&(t=Lr(l));var i=Bo(r,e,At(At({},o),{},{properties:t||o.properties}));return t?ls(i.data,t,At(At({},o),{},{properties:i.properties})):i}function ms(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Nl(r).then(function(n){return ps(n,ml,e)})}function _s(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:l.authority_or_region,capital_scheme_id:l.capital_scheme_id,funding_programme:l.funding_programme});r.features=r.features.filter(t=>gs(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.num_features++,t.properties.funding_programme=l.funding_programme,t.id=n++}return e}function gs(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function hs(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await ms(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=jr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Q={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Pe=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function ds(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Et({props:u}),U.push(()=>X(e,"value",i)),e.$on("change",r[2]),l=new Xr({props:{rows:r[1]}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],K(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function bs(r,e,n){let t;Je(r,tn,s=>n(4,t=s));let l="interventionType",o=hn("v1");function i(){let s;l=="interventionType"?(s=cr("v1"),n(1,o=hn("v1"))):(s=ar(["get","funding_programme"],{ATF2:Q.atf2,ATF3:Q.atf3,ATF4:Q.atf4},"grey"),n(1,o=[["ATF2",Q.atf2],["ATF3",Q.atf3],["ATF4",Q.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class vs extends z{constructor(e){super(),V(this,e,bs,ds,W,{})}}function ws(r){let e;return{c(){e=w("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ys(r){let e,n,t,l,o,i;return t=new Xt({props:{$$slots:{default:[ws]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=A("input"),n=O(),d(t.$$.fragment),x(e,"type","text"),x(e,"class","govuk-input govuk-input--width-10"),x(e,"id","filterText")},m(u,s){$(u,e,s),cn(e,r[0]),$(u,n,s),b(t,u,s),l=!0,o||(i=Ft(e,"input",r[12]),o=!0)},p(u,s){s&1&&e.value!==u[0]&&cn(e,u[0]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){h(t.$$.fragment,u),l=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,i()}}}function ks(r){let e,n,t,l,o,i,u,s,a,f;function c(S){r[10](S)}let g={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&(g.value=r[3]),e=new Et({props:g}),U.push(()=>X(e,"value",c));function _(S){r[11](S)}let C={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(C.value=r[4]),l=new Et({props:C}),U.push(()=>X(l,"value",_)),u=new fr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[ys]},$$scope:{ctx:r}}}),a=new vs({}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment),i=O(),d(u.$$.fragment),s=O(),d(a.$$.fragment)},m(S,T){b(e,S,T),$(S,t,T),b(l,S,T),$(S,i,T),b(u,S,T),$(S,s,T),b(a,S,T),f=!0},p(S,T){const k={};T&32&&(k.choices=S[5]),!n&&T&8&&(n=!0,k.value=S[3],K(()=>n=!1)),e.$set(k);const I={};T&64&&(I.choices=S[6]),!o&&T&16&&(o=!0,I.value=S[4],K(()=>o=!1)),l.$set(I);const F={};T&65537&&(F.$$scope={dirty:T,ctx:S}),u.$set(F)},i(S){f||(m(e.$$.fragment,S),m(l.$$.fragment,S),m(u.$$.fragment,S),m(a.$$.fragment,S),f=!0)},o(S){h(e.$$.fragment,S),h(l.$$.fragment,S),h(u.$$.fragment,S),h(a.$$.fragment,S),f=!1},d(S){S&&(p(t),p(i),p(s)),v(e,S),v(l,S),v(u,S),v(a,S)}}}function Ss(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",g,_,C=r[7].other.toLocaleString()+"",S,T;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),g=w(c),_=w(" crossings, "),S=w(C),T=w(`
    other)`)},m(k,I){$(k,e,I),$(k,t,I),$(k,l,I),$(k,i,I),$(k,u,I),$(k,a,I),$(k,f,I),$(k,g,I),$(k,_,I),$(k,S,I),$(k,T,I)},p(k,I){I&2&&n!==(n=k[1].size.toLocaleString()+"")&&H(t,n),I&128&&o!==(o=k[7].route.toLocaleString()+"")&&H(i,o),I&128&&s!==(s=k[7].area.toLocaleString()+"")&&H(a,s),I&128&&c!==(c=k[7].crossing.toLocaleString()+"")&&H(g,c),I&128&&C!==(C=k[7].other.toLocaleString()+"")&&H(S,C)},d(k){k&&(p(e),p(t),p(l),p(i),p(u),p(a),p(f),p(g),p(_),p(S),p(T))}}}function Ts(r){let e,n,t;function l(i){r[14](i)}let o={id:"show-schemes",$$slots:{default:[Ss]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new le({props:o}),U.push(()=>X(e,"checked",l)),{c(){d(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65666&&(s.$$scope={dirty:u,ctx:i}),!n&&u&4&&(n=!0,s.checked=i[2],K(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Cs(r){let e,n,t,l;return e=new Ae({props:{label:"Filters",$$slots:{default:[ks]},$$scope:{ctx:r}}}),t=new St({props:{small:!0,$$slots:{default:[Ts]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65657&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65670&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),h(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Os(r,e,n){let{schemesGj:t}=e,{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,{show:u=!0}=e,s=[],a="",f=[],c="",g={area:0,route:0,crossing:0,other:0};nn(()=>{let F=new Set,j=new Set;for(let L of l.values())L.authority_or_region&&F.add(L.authority_or_region),L.funding_programme&&j.add(L.funding_programme);n(5,s=Array.from(F.entries())),s.sort(),n(6,f=Array.from(j.entries())),f.sort()});function _(F,j,L){let M=F.toLowerCase(),E=P=>{var R,D;if(M&&!((R=P.properties.name)!=null&&R.toLowerCase().includes(M))&&!((D=P.properties.description)!=null&&D.toLowerCase().includes(M)))return!1;if(j||L){let se=l.get(P.properties.scheme_reference);if(j&&se.authority_or_region!=j||L&&se.funding_programme!=L)return!1}return!0};n(1,o=new Set(t.features.filter(E).map(P=>P.properties.scheme_reference))),n(7,g={area:0,route:0,crossing:0,other:0});let N=P=>{var R,D;return!(!o.has(P.properties.scheme_reference)||M&&!((R=P.properties.name)!=null&&R.toLowerCase().includes(M))&&!((D=P.properties.description)!=null&&D.toLowerCase().includes(M)))};for(let P of t.features)N(P)?(delete P.properties.hide_while_editing,n(7,g[P.properties.intervention_type]++,g)):P.properties.hide_while_editing=!0;n(8,t),n(7,g)}function C(F){a=F,n(3,a)}function S(F){c=F,n(4,c)}function T(){i=this.value,n(0,i)}const k=()=>n(0,i="");function I(F){u=F,n(2,u)}return r.$$set=F=>{"schemesGj"in F&&n(8,t=F.schemesGj),"schemes"in F&&n(9,l=F.schemes),"schemesToBeShown"in F&&n(1,o=F.schemesToBeShown),"filterText"in F&&n(0,i=F.filterText),"show"in F&&n(2,u=F.show)},r.$$.update=()=>{r.$$.dirty&25&&_(i,a,c)},[i,o,u,a,c,s,f,g,t,l,C,S,T,k,I]}class As extends z{constructor(e){super(),V(this,e,Os,Cs,W,{schemesGj:8,schemes:9,schemesToBeShown:1,filterText:0,show:2})}}function Ls(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Is(r){let e,n,t,l,o;return t=new G({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ls]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),d(t.$$.fragment),l=w(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,u){$(i,e,u),y(e,n),b(t,e,null),y(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(m(t.$$.fragment,i),o=!0)},o(i){h(t.$$.fragment,i),o=!1},d(i){i&&p(e),v(t)}}}class De extends z{constructor(e){super(),V(this,e,null,Is,W,{})}}function Dn(r,e,n){const t=r.slice();return t[2]=e[n],t}function jn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Bn(r){let e,n;return{c(){e=A("span"),n=w(` 
    `),ke(e,"background",r[5]),ke(e,"width","100%"),ke(e,"border","1px solid black")},m(t,l){$(t,e,l),y(e,n)},p(t,l){l&1&&ke(e,"background",t[5])},d(t){t&&p(e)}}}function Hn(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){$(l,e,o),y(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&H(t,n)},d(l){l&&p(e)}}}function Es(r){let e,n,t,l=We(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Bn(jn(r,l,s));let i=We(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Hn(Dn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=O(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();ke(e,"display","flex"),ke(t,"display","flex"),ke(t,"justify-content","space-between")},m(s,a){$(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(s,n,a),$(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=We(s[0]);let f;for(f=0;f<l.length;f+=1){const c=jn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Bn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=We(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Dn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Hn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:te,o:te,d(s){s&&(p(e),p(n),p(t)),It(o,s),It(u,s)}}}function Ns(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ue extends z{constructor(e){super(),V(this,e,Ns,Es,W,{colorScale:0,limits:1})}}function Rn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Ms(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ps(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fs(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ds(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function js(r){let e,n,t,l,o,i,u,s,a,f,c,g;return t=new G({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ps]},$$scope:{ctx:r}}}),o=new G({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Fs]},$$scope:{ctx:r}}}),f=new G({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ds]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),d(t.$$.fragment),l=w(". Output area boundaries from "),d(o.$$.fragment),i=w("."),u=O(),s=A("p"),a=w("License: "),d(f.$$.fragment),c=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(_,C){$(_,e,C),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),$(_,u,C),$(_,s,C),y(s,a),b(f,s,null),y(s,c),g=!0},p(_,C){const S={};C&65536&&(S.$$scope={dirty:C,ctx:_}),t.$set(S);const T={};C&65536&&(T.$$scope={dirty:C,ctx:_}),o.$set(T);const k={};C&65536&&(k.$$scope={dirty:C,ctx:_}),f.$set(k)},i(_){g||(m(t.$$.fragment,_),m(o.$$.fragment,_),m(f.$$.fragment,_),g=!0)},o(_){h(t.$$.fragment,_),h(o.$$.fragment,_),h(f.$$.fragment,_),g=!1},d(_){_&&(p(e),p(u),p(s)),v(t),v(o),v(f)}}}function Bs(r){let e,n,t;return n=new oe({props:{$$slots:{default:[js]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Wn(r){let e,n;return e=new Ue({props:{colorScale:r[4],limits:r[6]()}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hs(r){let e;return{c(){e=w("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rs(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ws(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gs(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Us(r){let e,n,t,l,o,i,u,s,a,f,c,g,_,C;return o=new G({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Rs]},$$scope:{ctx:r}}}),u=new G({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ws]},$$scope:{ctx:r}}}),g=new G({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Gs]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),d(o.$$.fragment),i=w(". Output area boundaries from "),d(u.$$.fragment),s=w("."),a=O(),f=A("p"),c=w("License: "),d(g.$$.fragment),_=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(S,T){$(S,e,T),$(S,n,T),$(S,t,T),y(t,l),b(o,t,null),y(t,i),b(u,t,null),y(t,s),$(S,a,T),$(S,f,T),y(f,c),b(g,f,null),y(f,_),C=!0},p(S,T){const k={};T&65536&&(k.$$scope={dirty:T,ctx:S}),o.$set(k);const I={};T&65536&&(I.$$scope={dirty:T,ctx:S}),u.$set(I);const F={};T&65536&&(F.$$scope={dirty:T,ctx:S}),g.$set(F)},i(S){C||(m(o.$$.fragment,S),m(u.$$.fragment,S),m(g.$$.fragment,S),C=!0)},o(S){h(o.$$.fragment,S),h(u.$$.fragment,S),h(g.$$.fragment,S),C=!1},d(S){S&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(g)}}}function zs(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Us]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Gn(r){let e,n;return e=new Ue({props:{colorScale:r[4],limits:r[6]()}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vs(r){let e;return{c(){e=w("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qs(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xs(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ks(r){let e,n,t,l,o,i,u,s,a;return t=new G({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[qs]},$$scope:{ctx:r}}}),o=new G({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Xs]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),d(t.$$.fragment),l=w(". Output area boundaries from "),d(o.$$.fragment),i=w("."),u=O(),d(s.$$.fragment)},m(f,c){$(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){h(t.$$.fragment,f),h(o.$$.fragment,f),h(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Ys(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ks]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Un(r){let e,n,t,l;return t=new Ue({props:{colorScale:r[4],limits:r[6]().map(ri)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=O(),d(t.$$.fragment)},m(o,i){$(o,e,i),$(o,n,i),b(t,o,i),l=!0},p:te,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){h(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Js(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){$(a,e,f),y(e,n),y(e,t),y(t,o),y(e,i),y(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&H(o,l),f&8192&&u!==(u=a[14]+"")&&H(s,u)},d(a){a&&p(e)}}}function Zs(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=A("b"),s=w(u),a=w(`
          cars`)},m(f,c){$(f,e,c),y(e,n),y(e,l),y(e,o),y(e,i),y(i,s),y(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&H(l,t),c&8200&&u!==(u=f[15]+"")&&H(s,u)},d(f){f&&p(e)}}}function Qs(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){$(f,e,c),y(e,n),y(n,l),y(n,o),y(e,i),y(e,s),y(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&H(l,t),c&8192&&u!==(u=f[14]+"")&&H(s,u)},d(f){f&&p(e)}}}function xs(r){Rn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?Qs:o[3]=="average_cars_per_household"?Zs:Js}let t=n(r),l=t(r);return{c(){l.c(),e=Ne()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){Rn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function ei(r){let e,n;return e=new re({props:{$$slots:{default:[xs,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ti(r){let e,n,t,l;const o=[B(Xe),{sourceLayer:Xe},{paint:{"fill-color":$e(["get",r[3]],r[6](),r[4]),"fill-opacity":q(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ei]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Fe({props:i}),e.$on("click",r[5]);const u=[B(`${Xe}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?J(o,[f&0&&ee(B(Xe)),f&0&&{sourceLayer:Xe},f&88&&{paint:{"fill-color":$e(["get",a[3]],a[6](),a[4]),"fill-opacity":q(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&8?J(u,[f&0&&ee(B(`${Xe}-outline`)),u[1],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ni(r){let e,n,t,l,o,i,u,s,a,f,c,g,_,C;function S(N){r[7](N)}let T={id:"percent_households_with_car",$$slots:{right:[Bs],default:[Ms]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new le({props:T}),U.push(()=>X(e,"checked",S)),e.$on("change",r[8]);let k=r[3]=="percent_households_with_car"&&Wn(r);function I(N){r[9](N)}let F={id:"average_cars_per_household",$$slots:{right:[zs],default:[Hs]},$$scope:{ctx:r}};r[1]!==void 0&&(F.checked=r[1]),o=new le({props:F}),U.push(()=>X(o,"checked",I)),o.$on("change",r[10]);let j=r[3]=="average_cars_per_household"&&Gn(r);function L(N){r[11](N)}let M={id:"population_density",$$slots:{right:[Ys],default:[Vs]},$$scope:{ctx:r}};r[2]!==void 0&&(M.checked=r[2]),a=new le({props:M}),U.push(()=>X(a,"checked",L)),a.$on("change",r[12]);let E=r[3]=="population_density"&&Un(r);return _=new ce({props:{url:`pmtiles://${ie()}/v1/${Xe}.pmtiles`,$$slots:{default:[ti]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),k&&k.c(),l=O(),d(o.$$.fragment),u=O(),j&&j.c(),s=O(),d(a.$$.fragment),c=O(),E&&E.c(),g=O(),d(_.$$.fragment)},m(N,P){b(e,N,P),$(N,t,P),k&&k.m(N,P),$(N,l,P),b(o,N,P),$(N,u,P),j&&j.m(N,P),$(N,s,P),b(a,N,P),$(N,c,P),E&&E.m(N,P),$(N,g,P),b(_,N,P),C=!0},p(N,[P]){const R={};P&65536&&(R.$$scope={dirty:P,ctx:N}),!n&&P&1&&(n=!0,R.checked=N[0],K(()=>n=!1)),e.$set(R),N[3]=="percent_households_with_car"?k?(k.p(N,P),P&8&&m(k,1)):(k=Wn(N),k.c(),m(k,1),k.m(l.parentNode,l)):k&&(ae(),h(k,1,1,()=>{k=null}),fe());const D={};P&65536&&(D.$$scope={dirty:P,ctx:N}),!i&&P&2&&(i=!0,D.checked=N[1],K(()=>i=!1)),o.$set(D),N[3]=="average_cars_per_household"?j?(j.p(N,P),P&8&&m(j,1)):(j=Gn(N),j.c(),m(j,1),j.m(s.parentNode,s)):j&&(ae(),h(j,1,1,()=>{j=null}),fe());const se={};P&65536&&(se.$$scope={dirty:P,ctx:N}),!f&&P&4&&(f=!0,se.checked=N[2],K(()=>f=!1)),a.$set(se),N[3]=="population_density"?E?(E.p(N,P),P&8&&m(E,1)):(E=Un(N),E.c(),m(E,1),E.m(g.parentNode,g)):E&&(ae(),h(E,1,1,()=>{E=null}),fe());const Z={};P&65544&&(Z.$$scope={dirty:P,ctx:N}),_.$set(Z)},i(N){C||(m(e.$$.fragment,N),m(k),m(o.$$.fragment,N),m(j),m(a.$$.fragment,N),m(E),m(_.$$.fragment,N),C=!0)},o(N){h(e.$$.fragment,N),h(k),h(o.$$.fragment,N),h(j),h(a.$$.fragment,N),h(E),h(_.$$.fragment,N),C=!1},d(N){N&&(p(t),p(l),p(u),p(s),p(c),p(g)),v(e,N),k&&k.d(N),v(o,N),j&&j.d(N),v(a,N),E&&E.d(N),v(_,N)}}}let Xe="census_output_areas";const ri=r=>r.toLocaleString();function li(r,e,n){let t=Q.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(T){let k=T.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${k}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${k}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function g(T){o=T,n(1,o)}const _=()=>{n(0,l=!1),n(2,i=!1)};function C(T){i=T,n(2,i)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,g,_,C,S]}class oi extends z{constructor(e){super(),V(this,e,li,ni,W,{})}}function si(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ii(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ai(r){let e,n,t,l,o,i,u;return t=new G({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ii]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from "),d(t.$$.fragment),l=w(", as of December 2022."),o=O(),d(i.$$.fragment)},m(s,a){$(s,e,a),y(e,n),b(t,e,null),y(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function fi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ai]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ui(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&p(e)}}}function ci(r){let e,n;return e=new re({props:{$$slots:{default:[ui,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $i(r){let e,n,t,l;const o=[B(lt),{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ci]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Fe({props:i}),e.$on("click",mi);const u=[B(`${lt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&ee(B(lt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?J(u,[f&0&&ee(B(`${lt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function pi(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:lt,$$slots:{right:[fi],default:[si]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>X(e,"checked",i)),l=new kt({props:{data:`${ie()}/v1/${lt}.geojson`,$$slots:{default:[$i]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let lt="combined_authorities";function mi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function _i(r,e,n){let t=Q.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class gi extends z{constructor(e){super(),V(this,e,_i,pi,W,{})}}function hi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function di(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bi(r){let e;return{c(){e=w(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vi(r){let e,n,t,l,o,i,u,s,a;return t=new G({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[di]},$$scope:{ctx:r}}}),o=new G({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[bi]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),d(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),d(o.$$.fragment),i=w("."),u=O(),d(s.$$.fragment)},m(f,c){$(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){h(t.$$.fragment,f),h(o.$$.fragment,f),h(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function wi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[vi]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function zn(r){let e,n;return e=new Ue({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yi(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,g=r[4].rank.toLocaleString()+"",_,C;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(i),s=O(),a=A("p"),f=w("Rank: "),c=A("b"),_=w(g),C=w(`
        / 32,844 LSOAs`)},m(S,T){$(S,e,T),y(e,t),y(e,l),y(e,o),y(o,u),$(S,s,T),$(S,a,T),y(a,f),y(a,c),y(c,_),y(a,C)},p(S,T){T&16&&n!==(n=S[4].LSOA11CD+"")&&H(t,n),T&16&&i!==(i=S[4].score+"")&&H(u,i),T&16&&g!==(g=S[4].rank.toLocaleString()+"")&&H(_,g)},d(S){S&&(p(e),p(s),p(a))}}}function ki(r){let e,n;return e=new re({props:{$$slots:{default:[yi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Si(r){let e,n,t,l;const o=[B(He),{sourceLayer:He},{paint:{"fill-color":$e(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":q(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[ki]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Fe({props:i});const u=[B(`${He}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?J(o,[f&0&&ee(B(He)),f&0&&{sourceLayer:He},f&6&&{paint:{"fill-color":$e(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":q(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?J(u,[f&0&&ee(B(`${He}-outline`)),u[1],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ti(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:He,$$slots:{right:[wi],default:[hi]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),U.push(()=>X(e,"checked",u));let a=r[0]&&zn(r);return o=new ce({props:{url:`pmtiles://${ie()}/v1/${He}.pmtiles`,$$slots:{default:[Si]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),a&&a.c(),l=O(),d(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],K(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=zn(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),h(a,1,1,()=>{a=null}),fe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let He="imd";function Ci(r,e,n){let t=Q.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Oi extends z{constructor(e){super(),V(this,e,Ci,Ti,W,{})}}function Ai(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Li(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ii(r){let e,n,t,l,o,i,u;return t=new G({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Li]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from "),d(t.$$.fragment),l=w(", as of May 2023."),o=O(),d(i.$$.fragment)},m(s,a){$(s,e,a),y(e,n),b(t,e,null),y(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ei(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ii]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ni(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&p(e)}}}function Mi(r){let e,n;return e=new re({props:{$$slots:{default:[Ni,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pi(r){let e,n,t,l;const o=[B(ot),{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Mi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Fe({props:i}),e.$on("click",Di);const u=[B(`${ot}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&ee(B(ot)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?J(u,[f&0&&ee(B(`${ot}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Fi(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ot,$$slots:{right:[Ei],default:[Ai]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>X(e,"checked",i)),l=new kt({props:{data:`${ie()}/v1/${ot}.geojson`,$$slots:{default:[Pi]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ot="local_authority_districts";function Di(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function ji(r,e,n){let t=Q.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Bi extends z{constructor(e){super(),V(this,e,ji,Fi,W,{})}}function Hi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ri(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gi(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ui(r){let e;return{c(){e=w("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zi(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(r){let e,n,t,l,o,i,u,s,a,f,c,g,_,C,S,T,k,I,F,j,L,M;return t=new G({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ri]},$$scope:{ctx:r}}}),o=new G({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Wi]},$$scope:{ctx:r}}}),u=new G({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Gi]},$$scope:{ctx:r}}}),_=new G({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),I=new G({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[zi]},$$scope:{ctx:r}}}),L=new De({}),{c(){e=A("p"),n=w("LPAs may be a "),d(t.$$.fragment),l=w(", "),d(o.$$.fragment),i=w("y, or "),d(u.$$.fragment),s=w("."),a=O(),f=A("p"),c=A("strong"),g=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),d(_.$$.fragment),C=w(" to get more details."),S=O(),T=A("p"),k=w("Data from ONS Geography via "),d(I.$$.fragment),F=w(", as of November 2022."),j=O(),d(L.$$.fragment)},m(E,N){$(E,e,N),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),b(u,e,null),y(e,s),$(E,a,N),$(E,f,N),y(f,c),y(c,g),b(_,c,null),y(c,C),$(E,S,N),$(E,T,N),y(T,k),b(I,T,null),y(T,F),$(E,j,N),b(L,E,N),M=!0},p(E,N){const P={};N&16&&(P.$$scope={dirty:N,ctx:E}),t.$set(P);const R={};N&16&&(R.$$scope={dirty:N,ctx:E}),o.$set(R);const D={};N&16&&(D.$$scope={dirty:N,ctx:E}),u.$set(D);const se={};N&16&&(se.$$scope={dirty:N,ctx:E}),_.$set(se);const Z={};N&16&&(Z.$$scope={dirty:N,ctx:E}),I.$set(Z)},i(E){M||(m(t.$$.fragment,E),m(o.$$.fragment,E),m(u.$$.fragment,E),m(_.$$.fragment,E),m(I.$$.fragment,E),m(L.$$.fragment,E),M=!0)},o(E){h(t.$$.fragment,E),h(o.$$.fragment,E),h(u.$$.fragment,E),h(_.$$.fragment,E),h(I.$$.fragment,E),h(L.$$.fragment,E),M=!1},d(E){E&&(p(e),p(a),p(f),p(S),p(T),p(j)),v(t),v(o),v(u),v(_),v(I),v(L,E)}}}function qi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Vi]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Xi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&p(e)}}}function Ki(r){let e,n;return e=new re({props:{$$slots:{default:[Xi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yi(r){let e,n,t,l;const o=[B(Te),{sourceLayer:Te},{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Ki]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Fe({props:i});const u=[B(`${Te}-outline`),{sourceLayer:Te},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&ee(B(Te)),f&0&&{sourceLayer:Te},f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?J(u,[f&0&&ee(B(`${Te}-outline`)),f&0&&{sourceLayer:Te},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ji(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Te,$$slots:{right:[qi],default:[Hi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${Te}.pmtiles`,$$slots:{default:[Yi]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Te="local_planning_authorities";function Zi(r,e,n){let t=Q.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Qi extends z{constructor(e){super(),V(this,e,Zi,Ji,W,{})}}function xi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ea(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ta(r){let e,n,t,l,o,i,u;return t=new G({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ea]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from "),d(t.$$.fragment),l=w(", as of May 2023."),o=O(),d(i.$$.fragment)},m(s,a){$(s,e,a),y(e,n),b(t,e,null),y(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function na(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ta]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ra(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&H(t,n)},d(l){l&&p(e)}}}function la(r){let e,n;return e=new re({props:{$$slots:{default:[ra,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oa(r){let e,n,t,l;const o=[B(Ce),{sourceLayer:Ce},{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[la]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Fe({props:i}),e.$on("click",ia);const u=[B(`${Ce}-outline`),{sourceLayer:Ce},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&ee(B(Ce)),f&0&&{sourceLayer:Ce},f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?J(u,[f&0&&ee(B(`${Ce}-outline`)),f&0&&{sourceLayer:Ce},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function sa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ce,$$slots:{right:[na],default:[xi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${Ce}.pmtiles`,$$slots:{default:[oa]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Ce="parliamentary_constituencies";function ia(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function aa(r,e,n){let t=Q.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class fa extends z{constructor(e){super(),V(this,e,aa,sa,W,{})}}function ua(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ca(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $a(r){let e,n,t,l,o,i,u;return t=new G({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[ca]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from "),d(t.$$.fragment),l=w(", as of May 2023."),o=O(),d(i.$$.fragment)},m(s,a){$(s,e,a),y(e,n),b(t,e,null),y(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function pa(r){let e,n,t;return n=new oe({props:{$$slots:{default:[$a]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ma(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&H(t,n)},d(l){l&&p(e)}}}function _a(r){let e,n;return e=new re({props:{$$slots:{default:[ma,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ga(r){let e,n,t,l;const o=[B(Oe),{sourceLayer:Oe},{paint:{"fill-color":r[1],"fill-opacity":q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[_a]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Fe({props:i}),e.$on("click",da);const u=[B(`${Oe}-outline`),{sourceLayer:Oe},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&ee(B(Oe)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?J(u,[f&0&&ee(B(`${Oe}-outline`)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ha(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Oe,$$slots:{right:[pa],default:[ua]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${Oe}.pmtiles`,$$slots:{default:[ga]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Oe="wards";function da(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function ba(r,e,n){let t=Q.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class va extends z{constructor(e){super(),V(this,e,ba,ha,W,{})}}function wa(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ya(r){let e,n,t,l;return t=new G({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[wa]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),d(t.$$.fragment)},m(o,i){$(o,e,i),y(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){h(t.$$.fragment,o),l=!1},d(o){o&&p(e),v(t)}}}class ze extends z{constructor(e){super(),V(this,e,null,ya,W,{})}}function ka(r){let e,n,t;return e=new ge({props:{color:Q.bus_route_with_lane}}),{c(){d(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Sa(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ta(r){let e,n,t,l,o,i,u,s,a;return o=new G({props:{href:"https://gtfs.org",$$slots:{default:[Sa]},$$scope:{ctx:r}}}),s=new ze({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),d(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),d(s.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),y(t,l),b(o,t,null),y(t,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){h(o.$$.fragment,f),h(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(s,f)}}}function Ca(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ta]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Oa(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Aa(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function La(r){let e;function n(o,i){return o[2].has_bus_lane?Aa:Oa}let t=n(r),l=t(r);return{c(){l.c(),e=Ne()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Ia(r){let e,n;return e=new re({props:{$$slots:{default:[La,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ea(r){let e,n;const t=[B(st),{sourceLayer:st},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Q.bus_route_with_lane,Q.bus_route_without_lane],"line-width":5,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Ia]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?J(t,[i&0&&ee(B(st)),i&0&&{sourceLayer:st},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Na(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:st,$$slots:{right:[Ca],default:[ka]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${st}.pmtiles`,$$slots:{default:[Ea]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let st="bus_routes";function Ma(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Pa extends z{constructor(e){super(),V(this,e,Ma,Na,W,{})}}function Vn(r){const e=Ga(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function qn(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function Fa(r){let e;return{c(){e=w("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Da(r){let e,n,t,l,o,i,u,s;return u=new ze({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=O(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=O(),d(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,l,f),$(a,o,f),$(a,i,f),b(u,a,f),s=!0},p:te,i(a){s||(m(u.$$.fragment,a),s=!0)},o(a){h(u.$$.fragment,a),s=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(i)),v(u,a)}}}function ja(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Da]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Xn(r){let e,n,t=We(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=Kn(qn(r,t,i));const o=i=>h(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Ne()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);$(i,e,u),n=!0},p(i,u){if(u&2){t=We(i[1]);let s;for(s=0;s<t.length;s+=1){const a=qn(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=Kn(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(ae(),s=t.length;s<l.length;s+=1)o(s);fe()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)h(l[u]);n=!1},d(i){i&&p(e),It(l,i)}}}function Kn(r){let e,n,t,l=r[7]+"",o,i,u;return n=new ge({props:{color:r[8]}}),{c(){e=A("div"),d(n.$$.fragment),t=O(),o=w(l),i=O()},m(s,a){$(s,e,a),b(n,e,null),y(e,t),y(e,o),y(e,i),u=!0},p:te,i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){h(n.$$.fragment,s),u=!1},d(s){s&&p(e),v(n)}}}function Ba(r){Vn(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,g,_=r[6]+"",C;return{c(){e=A("h2"),t=w(n),l=O(),o=A("p"),i=w("Direction: "),u=A("b"),a=O(),f=A("p"),c=w("Width: "),g=A("b"),C=w(_)},m(S,T){$(S,e,T),y(e,t),$(S,l,T),$(S,o,T),y(o,i),y(o,u),u.innerHTML=s,$(S,a,T),$(S,f,T),y(f,c),y(f,g),y(g,C)},p(S,T){Vn(S),T&8&&n!==(n=S[4]+"")&&H(t,n),T&8&&s!==(s=S[5]+"")&&(u.innerHTML=s),T&8&&_!==(_=S[6]+"")&&H(C,_)},d(S){S&&(p(e),p(l),p(o),p(a),p(f))}}}function Ha(r){let e,n;return e=new re({props:{$$slots:{default:[Ba,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ra(r){let e,n;const t=[B(it),{sourceLayer:it},{paint:{"line-color":ar(["get","kind"],{track:Q.cycle_paths.track,lane:Q.cycle_paths.lane,shared_use_segregated:Q.cycle_paths.shared_use_segregated,shared_use_unsegregated:Q.cycle_paths.shared_use_unsegregated},"red"),"line-width":Pe,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Ha]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),e.$on("click",Ua),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?J(t,[i&0&&ee(B(it)),i&0&&{sourceLayer:it},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Wa(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:it,$$slots:{right:[ja],default:[Fa]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),U.push(()=>X(e,"checked",u));let a=r[0]&&Xn(r);return o=new ce({props:{url:`pmtiles://${ie()}/v1/${it}.pmtiles`,$$slots:{default:[Ra]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),a&&a.c(),l=O(),d(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],K(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Xn(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),h(a,1,1,()=>{a=null}),fe());const _={};c&2049&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let it="cycle_paths";function Ga(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Ua(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function za(r,e,n){let t=[["Separated tracks",Q.cycle_paths.track],["Unprotected lanes",Q.cycle_paths.lane],["Shared-use (segregated)",Q.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",Q.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Va extends z{constructor(e){super(),V(this,e,za,Wa,W,{})}}function qa(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Xa(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ka(r){let e,n,t,l,o,i,u;return t=new G({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from the "),d(t.$$.fragment),l=w(", as of September 2021."),o=O(),d(i.$$.fragment)},m(s,a){$(s,e,a),y(e,n),b(t,e,null),y(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ya(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ka]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ja(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&H(t,n)},d(l){l&&p(e)}}}function Za(r){let e,n;return e=new re({props:{$$slots:{default:[Ja,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qa(r){let e,n;const t=[B(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Za]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&ee(B(at)),i&0&&{sourceLayer:at},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function xa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:at,$$slots:{right:[Ya],default:[qa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${at}.pmtiles`,$$slots:{default:[Qa]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let at="mrn";function ef(r,e,n){let t=Q.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class tf extends z{constructor(e){super(),V(this,e,ef,xa,W,{})}}function nf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(r){let e;return{c(){e=w("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new G({props:{href:"https://www.pct.bike",$$slots:{default:[rf]},$$scope:{ctx:r}}}),a=new G({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[lf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=O(),o=A("p"),i=w("See "),d(u.$$.fragment),s=w(" and "),d(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(g,_){$(g,e,_),$(g,n,_),$(g,t,_),$(g,l,_),$(g,o,_),y(o,i),b(u,o,null),y(o,s),b(a,o,null),y(o,f),c=!0},p(g,_){const C={};_&1024&&(C.$$scope={dirty:_,ctx:g}),u.$set(C);const S={};_&1024&&(S.$$scope={dirty:_,ctx:g}),a.$set(S)},i(g){c||(m(u.$$.fragment,g),m(a.$$.fragment,g),c=!0)},o(g){h(u.$$.fragment,g),h(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(l),p(o)),v(u),v(a)}}}function sf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[of]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Yn(r){let e,n,t,l,o,i,u,s;e=new Ue({props:{colorScale:r[3],limits:r[4]}});function a(_){r[7](_)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new $r({props:f}),U.push(()=>X(t,"value",a));function c(_){r[8](_)}let g={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(g.value=r[1]),i=new Et({props:g}),U.push(()=>X(i,"value",c)),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),o=O(),d(i.$$.fragment)},m(_,C){b(e,_,C),$(_,n,C),b(t,_,C),$(_,o,C),b(i,_,C),s=!0},p(_,C){const S={};!l&&C&1&&(l=!0,S.value=_[0],K(()=>l=!1)),t.$set(S);const T={};!u&&C&2&&(u=!0,T.value=_[1],K(()=>u=!1)),i.$set(T)},i(_){s||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(i.$$.fragment,_),s=!0)},o(_){h(e.$$.fragment,_),h(t.$$.fragment,_),h(i.$$.fragment,_),s=!1},d(_){_&&(p(n),p(o)),v(e,_),v(t,_),v(i,_)}}}function af(r){let e,n=r[5](r[9])+"",t;return{c(){e=new rn(!1),t=Ne(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function ff(r){let e,n;return e=new re({props:{$$slots:{default:[af,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uf(r){let e,n;const t=[B(Le),{sourceLayer:Le},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":Pe,"line-opacity":q(1,.5)}},{layout:{visibility:r[2]&&r[0]==Le?"visible":"none"}}];let l={$$slots:{default:[ff]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?J(t,[i&0&&ee(B(Le)),i&0&&{sourceLayer:Le},i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":Pe,"line-opacity":q(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Le?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function cf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new rn(!1),t=Ne(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function $f(r){let e,n;return e=new re({props:{$$slots:{default:[cf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pf(r){let e,n;const t=[B(Ke),{sourceLayer:Ke},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":Pe,"line-opacity":q(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ke?"visible":"none"}}];let l={$$slots:{default:[$f]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?J(t,[i&0&&ee(B(Ke)),i&0&&{sourceLayer:Ke},t[2],t[3],i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":Pe,"line-opacity":q(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ke?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function mf(r){let e,n,t,l,o,i,u,s;function a(g){r[6](g)}let f={id:Le,$$slots:{right:[sf],default:[nf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new le({props:f}),U.push(()=>X(e,"checked",a));let c=r[2]&&Yn(r);return o=new ce({props:{url:`pmtiles://${ie()}/v1/${Le}.pmtiles`,$$slots:{default:[uf]},$$scope:{ctx:r}}}),u=new ce({props:{url:`pmtiles://${ie()}/v1/${Ke}.pmtiles`,$$slots:{default:[pf]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),c&&c.c(),l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment)},m(g,_){b(e,g,_),$(g,t,_),c&&c.m(g,_),$(g,l,_),b(o,g,_),$(g,i,_),b(u,g,_),s=!0},p(g,[_]){const C={};_&1024&&(C.$$scope={dirty:_,ctx:g}),!n&&_&4&&(n=!0,C.checked=g[2],K(()=>n=!1)),e.$set(C),g[2]?c?(c.p(g,_),_&4&&m(c,1)):(c=Yn(g),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(ae(),h(c,1,1,()=>{c=null}),fe());const S={};_&1031&&(S.$$scope={dirty:_,ctx:g}),o.$set(S);const T={};_&1031&&(T.$$scope={dirty:_,ctx:g}),u.$set(T)},i(g){s||(m(e.$$.fragment,g),m(c),m(o.$$.fragment,g),m(u.$$.fragment,g),s=!0)},o(g){h(e.$$.fragment,g),h(c),h(o.$$.fragment,g),h(u.$$.fragment,g),s=!1},d(g){g&&(p(t),p(l),p(i)),v(e,g),c&&c.d(g),v(o,g),v(u,g)}}}let Le="pct_commute",Ke="pct_school";function _f(r,e,n){let t=Q.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Le,i="baseline",u=!1;function s(g){let _=g.baseline,C=g.gov_target,S=g.go_dutch,T=`<h2>Trip purpose: ${o==Le?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)T+=`<p>Government target (2025): <b>${C.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let k=(C/_).toFixed(1),I=(S/_).toFixed(1);T+=`<p>Government target (2025): ${C.toLocaleString()} (<b>${k}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${I}x</b> of baseline)</p>`}return T}function a(g){u=g,n(2,u)}function f(g){o=g,n(0,o)}function c(g){i=g,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class gf extends z{constructor(e){super(),V(this,e,_f,mf,W,{})}}function hf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function df(r){let e;return{c(){e=w("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vf(r){let e,n,t,l,o,i,u,s,a,f,c,g;return t=new G({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[df]},$$scope:{ctx:r}}}),f=new G({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),d(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=O(),s=A("p"),a=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),d(f.$$.fragment),c=w(".")},m(_,C){$(_,e,C),y(e,n),b(t,e,null),y(e,l),$(_,o,C),$(_,i,C),$(_,u,C),$(_,s,C),y(s,a),b(f,s,null),y(s,c),g=!0},p(_,C){const S={};C&256&&(S.$$scope={dirty:C,ctx:_}),t.$set(S);const T={};C&256&&(T.$$scope={dirty:C,ctx:_}),f.$set(T)},i(_){g||(m(t.$$.fragment,_),m(f.$$.fragment,_),g=!0)},o(_){h(t.$$.fragment,_),h(f.$$.fragment,_),g=!1},d(_){_&&(p(e),p(o),p(i),p(u),p(s)),v(t),v(f)}}}function wf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[vf]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Jn(r){let e,n,t,l,o;e=new Ue({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new $r({props:u}),U.push(()=>X(t,"value",i)),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],K(()=>l=!1)),t.$set(f)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(t.$$.fragment,s),o=!1},d(s){s&&p(n),v(e,s),v(t,s)}}}function yf(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,g=r[4][r[7].highest_description]+"",_,C;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=O(),u=A("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),_=w(g),C=w(")")},m(S,T){$(S,e,T),y(e,n),y(e,l),y(e,o),$(S,i,T),$(S,u,T),y(u,s),y(u,f),y(u,c),y(u,_),y(u,C)},p(S,T){T&128&&t!==(t=S[7].indicative_mph+"")&&H(l,t),T&128&&a!==(a=S[7].highest_mph+"")&&H(f,a),T&128&&g!==(g=S[4][S[7].highest_description]+"")&&H(_,g)},d(S){S&&(p(e),p(i),p(u))}}}function kf(r){let e,n;return e=new re({props:{$$slots:{default:[yf,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sf(r){let e,n;const t=[B(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[0]],r[3],r[2]),"line-width":Pe,"line-opacity":q(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[kf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?J(t,[i&0&&ee(B(ft)),i&0&&{sourceLayer:ft},t[2],t[3],i&13&&{paint:{"line-color":$e(["get",o[0]],o[3],o[2]),"line-width":Pe,"line-opacity":q(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Tf(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ft,$$slots:{right:[wf],default:[hf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),U.push(()=>X(e,"checked",u));let a=r[1]&&Jn(r);return o=new ce({props:{url:`pmtiles://${ln()}/v1/${ft}.pmtiles`,$$slots:{default:[Sf]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),a&&a.c(),l=O(),d(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],K(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=Jn(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),h(a,1,1,()=>{a=null}),fe());const _={};c&259&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ft="road_speeds";function Cf(r,e,n){let t=Q.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class Of extends z{constructor(e){super(),V(this,e,Cf,Tf,W,{})}}function Af(r){let e;return{c(){e=w("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function If(r){let e,n,t,l,o,i,u,s,a;return u=new G({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Lf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=O(),o=A("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),d(u.$$.fragment),s=w(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),y(o,i),b(u,o,null),y(o,s),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){h(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),v(u)}}}function Ef(r){let e,n,t;return n=new oe({props:{$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Zn(r){let e,n;return e=new Ue({props:{colorScale:r[1],limits:r[2]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nf(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",g,_;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),i=w(`
        meters`),u=O(),s=A("p"),a=w("Minimum width: "),f=A("b"),g=w(c),_=w(`
        meters`)},m(C,S){$(C,e,S),y(e,n),y(e,t),y(t,o),y(e,i),$(C,u,S),$(C,s,S),y(s,a),y(s,f),y(f,g),y(s,_)},p(C,S){S&16&&l!==(l=C[4].average+"")&&H(o,l),S&16&&c!==(c=C[4].minimum+"")&&H(g,c)},d(C){C&&(p(e),p(u),p(s))}}}function Mf(r){let e,n;return e=new re({props:{$$slots:{default:[Nf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pf(r){let e,n;const t=[B(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get","average"],r[2],r[1]),"line-width":Pe,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Mf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?J(t,[i&0&&ee(B(ut)),i&0&&{sourceLayer:ut},t[2],t[3],i&6&&{paint:{"line-color":$e(["get","average"],o[2],o[1]),"line-width":Pe,"line-opacity":q(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ff(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ut,$$slots:{right:[Ef],default:[Af]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),U.push(()=>X(e,"checked",u));let a=r[0]&&Zn(r);return o=new ce({props:{url:`pmtiles://${ln()}/v1/${ut}.pmtiles`,$$slots:{default:[Pf]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),a&&a.c(),l=O(),d(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],K(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Zn(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),h(a,1,1,()=>{a=null}),fe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="road_widths";function Df(r,e,n){let t=Q.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class jf extends z{constructor(e){super(),V(this,e,Df,Ff,W,{})}}function Bf(r){let e,n,t;return{c(){e=A("input"),x(e,"class","govuk-file-upload"),x(e,"id","load-criticals"),x(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=Ft(e,"change",r[5]),n=!0)},p:te,d(l){l&&p(e),r[7](null),n=!1,t()}}}function Qn(r){let e,n;return e=new St({props:{small:!0,$$slots:{default:[Rf]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hf(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new ge({props:{color:bt}}),{c(){d(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),$(u,n,s),$(u,l,s),$(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&H(l,t)},i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){h(e.$$.fragment,u),i=!1},d(u){u&&(p(n),p(l),p(o)),v(e,u)}}}function Rf(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[Hf]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),U.push(()=>X(e,"checked",l)),{c(){d(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],K(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){h(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Wf(r){let e,n,t,l,o,i;e=new fr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),t=new ur({props:{errorMessage:r[3]}});let u=r[2]>0&&Qn(r);return{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),u&&u.c(),o=Ne()},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),u&&u.m(s,a),$(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&m(u,1)):(u=Qn(s),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(ae(),h(u,1,1,()=>{u=null}),fe())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(u),i=!0)},o(s){h(e.$$.fragment,s),h(t.$$.fragment,s),h(u),i=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),u&&u.d(s)}}}function Gf(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,g,_,C,S=r[10].notes+"",T,k,I,F,j,L,M,E=r[10].id+"",N,P,R,D,se,Z=(r[10].inspector??"???")+"",be,mt,he,Qe=r[10].submission_time+"",_t,xe,pe,gt,Me,je=r[10].scheme_reference+"",Ve,ht,et,qe=r[10].current_design_stage+"",tt;return{c(){e=A("div"),n=A("h2"),l=w(t),o=O(),i=A("p"),u=A("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=O(),g=A("p"),_=A("u"),_.textContent="Notes",C=w(`
          : `),T=w(S),k=O(),I=A("hr"),F=O(),j=A("p"),L=w("Critical issue ID: "),M=A("b"),N=w(E),P=O(),R=A("p"),D=w("Submitted by "),se=A("b"),be=w(Z),mt=w(`
          at
          `),he=A("b"),_t=w(Qe),xe=O(),pe=A("p"),gt=w("For scheme "),Me=A("b"),Ve=w(je),ht=w(`
          in stage
          `),et=A("b"),tt=w(qe),ke(e,"max-width","30vw")},m(de,Se){$(de,e,Se),y(e,n),y(n,l),y(e,o),y(e,i),y(i,u),y(i,s),y(i,f),y(e,c),y(e,g),y(g,_),y(g,C),y(g,T),y(e,k),y(e,I),y(e,F),y(e,j),y(j,L),y(j,M),y(M,N),y(e,P),y(e,R),y(R,D),y(R,se),y(se,be),y(R,mt),y(R,he),y(he,_t),y(e,xe),y(e,pe),y(pe,gt),y(pe,Me),y(Me,Ve),y(pe,ht),y(pe,et),y(et,tt)},p(de,Se){Se&1024&&t!==(t=de[10].critical_type+"")&&H(l,t),Se&1024&&a!==(a=de[10].location_description+"")&&H(f,a),Se&1024&&S!==(S=de[10].notes+"")&&H(T,S),Se&1024&&E!==(E=de[10].id+"")&&H(N,E),Se&1024&&Z!==(Z=(de[10].inspector??"???")+"")&&H(be,Z),Se&1024&&Qe!==(Qe=de[10].submission_time+"")&&H(_t,Qe),Se&1024&&je!==(je=de[10].scheme_reference+"")&&H(Ve,je),Se&1024&&qe!==(qe=de[10].current_design_stage+"")&&H(tt,qe)},d(de){de&&p(e)}}}function Uf(r){let e,n;return e=new re({props:{$$slots:{default:[Gf,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zf(r){let e,n,t,l,o,i;const u=[B(`${Re}-clusters`),{applyToClusters:!0},{paint:{"circle-color":bt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let _=0;_<u.length;_+=1)s=Y(s,u[_]);e=new Ge({props:s}),e.$on("click",r[6]);const a=[B(`${Re}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let _=0;_<a.length;_+=1)f=Y(f,a[_]);t=new al({props:f});const c=[B(`${Re}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":bt,"circle-opacity":q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let g={$$slots:{default:[Uf]},$$scope:{ctx:r}};for(let _=0;_<c.length;_+=1)g=Y(g,c[_]);return o=new Ge({props:g}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),d(o.$$.fragment)},m(_,C){b(e,_,C),$(_,n,C),b(t,_,C),$(_,l,C),b(o,_,C),i=!0},p(_,C){const S=C&2?J(u,[C&0&&ee(B(`${Re}-clusters`)),u[1],C&0&&{paint:{"circle-color":bt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},C&2&&{layout:{visibility:_[1]?"visible":"none"}},u[4]]):{};e.$set(S);const T=C&2?J(a,[C&0&&ee(B(`${Re}-counts`)),a[1],C&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:_[1]?"visible":"none"}}]):{};t.$set(T);const k=C&2?J(c,[C&0&&ee(B(`${Re}-points`)),c[1],c[2],c[3],C&0&&{paint:{"circle-color":bt,"circle-opacity":q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},C&2&&{layout:{visibility:_[1]?"visible":"none"}}]):{};C&2048&&(k.$$scope={dirty:C,ctx:_}),o.$set(k)},i(_){i||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(o.$$.fragment,_),i=!0)},o(_){h(e.$$.fragment,_),h(t.$$.fragment,_),h(o.$$.fragment,_),i=!1},d(_){_&&(p(n),p(l)),v(e,_),v(t,_),v(o,_)}}}function Vf(r){let e,n,t,l;return e=new Ae({props:{label:"Critical Issues",$$slots:{default:[Wf]},$$scope:{ctx:r}}}),t=new kt({props:{id:Re,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),h(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let Re="criticals",bt="red";function qf(r,e,n){let t;Je(r,tn,_=>n(9,t=_));let l,o=!0,i=0,u="",s=Br();async function a(_){try{n(4,s=await hs(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(C){n(3,u=`The file you loaded is broken: ${C}`)}}function f(_){t.getSource(Re).getClusterExpansionZoom(_.detail.features[0].properties.cluster_id,(C,S)=>{C||t.easeTo({center:_.detail.features[0].geometry.coordinates,zoom:S})})}function c(_){U[_?"unshift":"push"](()=>{l=_,n(0,l)})}function g(_){o=_,n(1,o)}return[l,o,i,u,s,a,f,c,g]}class Xf extends z{constructor(e){super(),V(this,e,qf,Vf,W,{})}}function Kf(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Yf(r){let e;return{c(){e=w("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jf(r){let e,n,t,l,o,i,u;return t=new G({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Yf]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=A("p"),n=w("This shows "),d(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),d(i.$$.fragment)},m(s,a){$(s,e,a),y(e,n),b(t,e,null),y(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Zf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Qf(r){let e,n=xn(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=xn(l[3])+"")&&H(t,n)},d(l){l&&p(e)}}}function xf(r){let e,n;return e=new re({props:{$$slots:{default:[Qf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function eu(r){let e,n;const t=[B(ct),{sourceLayer:ct},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[xf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ge({props:l}),e.$on("click",nu),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&ee(B(ct)),i&0&&{sourceLayer:ct},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function tu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ct,$$slots:{right:[Zf],default:[Kf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${ct}.pmtiles`,$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ct="crossings";function xn(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function nu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function ru(r,e,n){let t=Q.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class lu extends z{constructor(e){super(),V(this,e,ru,tu,W,{})}}function ou(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function su(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(r){let e,n,t,l,o,i,u;return t=new G({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[su]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=A("p"),n=w("Cycle parking, according to "),d(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),d(i.$$.fragment)},m(s,a){$(s,e,a),y(e,n),b(t,e,null),y(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function au(r){let e,n,t;return n=new oe({props:{$$slots:{default:[iu]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function fu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(i,u){$(i,e,u),y(e,n),y(e,t),y(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&H(o,l)},d(i){i&&p(e)}}}function uu(r){let e,n;return e=new re({props:{$$slots:{default:[fu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cu(r){let e,n;const t=[B($t),{sourceLayer:$t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[uu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ge({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&ee(B($t)),i&0&&{sourceLayer:$t},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function $u(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:$t,$$slots:{right:[au],default:[ou]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${$t}.pmtiles`,$$slots:{default:[cu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let $t="cycle_parking";function pu(r,e,n){let t=Q.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class mu extends z{constructor(e){super(),V(this,e,pu,$u,W,{})}}function _u(r){let e,n,t,l;return e=new ge({props:{color:r[4]}}),{c(){d(e.$$.fragment),n=O(),t=w(r[2])},m(o,i){b(e,o,i),$(o,n,i),$(o,t,i),l=!0},p(o,i){(!l||i&4)&&H(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function gu(r){let e;const n=r[5].default,t=Dt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&jt(t,n,l,l[7],e?Ht(n,l[7],o,null):Bt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){h(t,l),e=!1},d(l){t&&t.d(l)}}}function hu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function du(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),y(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&H(t,n)},d(l){l&&p(e)}}}function bu(r){let e,n;return e=new re({props:{$$slots:{default:[du,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vu(r){let e,n;const t=[B(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":q(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[bu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Fe({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?J(t,[i&1&&ee(B(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":q(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function wu(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[hu],default:[_u]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),U.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${r[0]}.pmtiles`,$$slots:{default:[vu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],K(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${ie()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function yu(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=Q[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class sn extends z{constructor(e){super(),V(this,e,yu,wu,W,{name:0,singularNoun:1,pluralNoun:2})}}function ku(r){let e;return{c(){e=w("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Su(r){let e,n,t,l,o,i,u;return t=new G({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[ku]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=A("p"),n=w("This shows "),d(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),d(i.$$.fragment)},m(s,a){$(s,e,a),y(e,n),b(t,e,null),y(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Tu(r){let e,n;return e=new sn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Su]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Cu extends z{constructor(e){super(),V(this,e,null,Tu,W,{})}}function Ou(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){d(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){h(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Au(r){let e;return{c(){e=w("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lu(r){let e,n,t,l,o,i,u;return t=new G({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Au]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=A("p"),n=w("This shows "),d(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),d(i.$$.fragment)},m(s,a){$(s,e,a),y(e,n),b(t,e,null),y(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Iu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Lu]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Eu(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&H(t,n)},d(l){l&&p(e)}}}function Nu(r){let e,n;return e=new re({props:{$$slots:{default:[Eu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mu(r){let e,n;const t=[B(Pt),{paint:{"circle-color":r[1],"circle-radius":Nt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Nu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ge({props:l}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&ee(B(Pt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Nt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Pu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Pt,$$slots:{right:[Iu],default:[Ou]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),U.push(()=>X(e,"checked",i)),l=new kt({props:{data:`${ie()}/v1/${Pt}.geojson`,$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Pt="railway_stations";function Fu(r,e,n){let t=Q.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Du extends z{constructor(e){super(),V(this,e,Fu,Pu,W,{})}}function ju(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bu(r){let e,n,t,l,o,i,u;return t=new G({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[ju]},$$scope:{ctx:r}}}),i=new ze({}),{c(){e=A("p"),n=w("This shows "),d(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=O(),d(i.$$.fragment)},m(s,a){$(s,e,a),y(e,n),b(t,e,null),y(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Hu(r){let e,n;return e=new sn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[Bu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Ru extends z{constructor(e){super(),V(this,e,null,Hu,W,{})}}function Wu(r){let e;return{c(){e=w("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gu(r){let e;return{c(){e=w("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uu(r){let e,n,t,l,o,i,u,s,a;return t=new G({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Wu]},$$scope:{ctx:r}}}),o=new G({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Gu]},$$scope:{ctx:r}}}),s=new ze({}),{c(){e=A("p"),n=w("This shows "),d(t.$$.fragment),l=w(" and "),d(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),d(s.$$.fragment)},m(f,c){$(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){h(t.$$.fragment,f),h(o.$$.fragment,f),h(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function zu(r){let e,n;return e=new sn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Vu extends z{constructor(e){super(),V(this,e,null,zu,W,{})}}function qu(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xu(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ku(r){let e;return{c(){e=w("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yu(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new G({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Xu]},$$scope:{ctx:r}}}),o=new G({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Ku]},$$scope:{ctx:r}}}),f=new De({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),d(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),d(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=O(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=O(),d(f.$$.fragment)},m(g,_){$(g,e,_),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,i),$(g,u,_),$(g,s,_),$(g,a,_),b(f,g,_),c=!0},p(g,_){const C={};_&64&&(C.$$scope={dirty:_,ctx:g}),t.$set(C);const S={};_&64&&(S.$$scope={dirty:_,ctx:g}),o.$set(S)},i(g){c||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),c=!0)},o(g){h(t.$$.fragment,g),h(o.$$.fragment,g),h(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(u),p(s),p(a)),v(t),v(o),v(f,g)}}}function Ju(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){e=A("span"),d(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function er(r){let e,n;return e=new Ue({props:{colorScale:r[1],limits:r[3]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zu(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,g,_,C=r[5].pedal_cycles_2022.toLocaleString()+"",S,T,k,I,F,j=r[5].method+"",L;return{c(){e=A("h2"),t=w(n),l=O(),o=A("p"),i=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(s),f=O(),c=A("p"),g=w("Total pedal cycles (2022 AADF): "),_=A("b"),S=w(C),T=O(),k=A("p"),I=w("Count method: "),F=A("b"),L=w(j)},m(M,E){$(M,e,E),y(e,t),$(M,l,E),$(M,o,E),y(o,i),y(o,u),y(u,a),$(M,f,E),$(M,c,E),y(c,g),y(c,_),y(_,S),$(M,T,E),$(M,k,E),y(k,I),y(k,F),y(F,L)},p(M,E){E&32&&n!==(n=M[5].location+"")&&H(t,n),E&32&&s!==(s=M[5].motor_vehicles_2022.toLocaleString()+"")&&H(a,s),E&32&&C!==(C=M[5].pedal_cycles_2022.toLocaleString()+"")&&H(S,C),E&32&&j!==(j=M[5].method+"")&&H(L,j)},d(M){M&&(p(e),p(l),p(o),p(f),p(c),p(T),p(k))}}}function Qu(r){let e,n;return e=new re({props:{$$slots:{default:[Zu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xu(r){let e,n;const t=[B(pt),{sourceLayer:pt},{paint:{"circle-color":$e(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ge({props:l}),e.$on("click",tc),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?J(t,[i&0&&ee(B(pt)),i&0&&{sourceLayer:pt},i&6&&{paint:{"circle-color":$e(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ec(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:pt,$$slots:{right:[Ju],default:[qu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),U.push(()=>X(e,"checked",u));let a=r[0]&&er(r);return o=new ce({props:{url:`pmtiles://${ie()}/v1/${pt}.pmtiles`,$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment),t=O(),a&&a.c(),l=O(),d(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],K(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=er(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),h(a,1,1,()=>{a=null}),fe());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){h(e.$$.fragment,f),h(a),h(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let pt="vehicle_counts";function tc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function nc(r,e,n){let t=Q.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class rc extends z{constructor(e){super(),V(this,e,nc,ec,W,{})}}function lc(r){let e,n,t,l,o,i,u,s;return e=new Ru({}),t=new Cu({}),o=new Vu({}),u=new Du({}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,l,f),b(o,a,f),$(a,i,f),b(u,a,f),s=!0},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),s=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),h(o.$$.fragment,a),h(u.$$.fragment,a),s=!1},d(a){a&&(p(n),p(l),p(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function oc(r){let e,n;return e=new St({props:{small:!0,$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sc(r){let e,n,t,l,o,i,u,s,a,f;return e=new Va({}),t=new tf({}),o=new Pa({}),u=new mu({}),a=new lu({}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment),s=O(),d(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,l,g),b(o,c,g),$(c,i,g),b(u,c,g),$(c,s,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){h(e.$$.fragment,c),h(t.$$.fragment,c),h(o.$$.fragment,c),h(u.$$.fragment,c),h(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function ic(r){let e,n;return e=new St({props:{small:!0,$$slots:{default:[sc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ac(r){let e,n,t,l,o,i,u,s,a,f;return e=new fa({}),t=new va({}),o=new gi({}),u=new Bi({}),a=new Qi({}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment),s=O(),d(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,l,g),b(o,c,g),$(c,i,g),b(u,c,g),$(c,s,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){h(e.$$.fragment,c),h(t.$$.fragment,c),h(o.$$.fragment,c),h(u.$$.fragment,c),h(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function fc(r){let e,n;return e=new St({props:{small:!0,$$slots:{default:[ac]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uc(r){let e,n,t,l;return e=new oi({}),t=new Oi({}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),h(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function cc(r){let e,n,t,l;return e=new jf({}),t=new Of({}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){h(e.$$.fragment,o),h(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function $c(r){let e,n,t,l,o=en()=="Private (development)",i,u;e=new rc({}),t=new gf({});let s=o&&cc();return{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),s&&s.c(),i=Ne()},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,l,f),s&&s.m(a,f),$(a,i,f),u=!0},p:te,i(a){u||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(s),u=!0)},o(a){h(e.$$.fragment,a),h(t.$$.fragment,a),h(s),u=!1},d(a){a&&(p(n),p(l),p(i)),v(e,a),v(t,a),s&&s.d(a)}}}function pc(r){let e,n,t,l,o;function i(s){r[4](s)}let u={displayEnableButton:!0};return r[1]!==void 0&&(u.isInactive=r[1]),e=new Jr({props:u}),r[3](e),U.push(()=>X(e,"isInactive",i)),l=new Zr({}),{c(){d(e.$$.fragment),t=O(),d(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&2&&(n=!0,f.isInactive=s[1],K(()=>n=!1)),e.$set(f)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){h(e.$$.fragment,s),h(l.$$.fragment,s),o=!1},d(s){s&&p(t),r[3](null),v(e,s),v(l,s)}}}function mc(r){let e,n,t,l,o,i,u,s,a,f,c,g,_,C,S,T;return e=new Xf({}),t=new Ae({props:{label:"Trip generators",$$slots:{default:[oc]},$$scope:{ctx:r}}}),o=new Ae({props:{label:"Existing infrastructure",$$slots:{default:[ic]},$$scope:{ctx:r}}}),u=new Ae({props:{label:"Boundaries",$$slots:{default:[fc]},$$scope:{ctx:r}}}),a=new Ae({props:{label:"Census",$$slots:{default:[uc]},$$scope:{ctx:r}}}),c=new Ae({props:{label:"Other",$$slots:{default:[$c]},$$scope:{ctx:r}}}),_=new Ae({props:{label:"Tools",$$slots:{default:[pc]},$$scope:{ctx:r}}}),S=new zr({props:{disabled:!r[1]}}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment),s=O(),d(a.$$.fragment),f=O(),d(c.$$.fragment),g=O(),d(_.$$.fragment),C=O(),d(S.$$.fragment)},m(k,I){b(e,k,I),$(k,n,I),b(t,k,I),$(k,l,I),b(o,k,I),$(k,i,I),b(u,k,I),$(k,s,I),b(a,k,I),$(k,f,I),b(c,k,I),$(k,g,I),b(_,k,I),$(k,C,I),b(S,k,I),T=!0},p(k,I){const F={};I&32&&(F.$$scope={dirty:I,ctx:k}),t.$set(F);const j={};I&32&&(j.$$scope={dirty:I,ctx:k}),o.$set(j);const L={};I&32&&(L.$$scope={dirty:I,ctx:k}),u.$set(L);const M={};I&32&&(M.$$scope={dirty:I,ctx:k}),a.$set(M);const E={};I&32&&(E.$$scope={dirty:I,ctx:k}),c.$set(E);const N={};I&35&&(N.$$scope={dirty:I,ctx:k}),_.$set(N);const P={};I&2&&(P.disabled=!k[1]),S.$set(P)},i(k){T||(m(e.$$.fragment,k),m(t.$$.fragment,k),m(o.$$.fragment,k),m(u.$$.fragment,k),m(a.$$.fragment,k),m(c.$$.fragment,k),m(_.$$.fragment,k),m(S.$$.fragment,k),T=!0)},o(k){h(e.$$.fragment,k),h(t.$$.fragment,k),h(o.$$.fragment,k),h(u.$$.fragment,k),h(a.$$.fragment,k),h(c.$$.fragment,k),h(_.$$.fragment,k),h(S.$$.fragment,k),T=!1},d(k){k&&(p(n),p(l),p(i),p(s),p(f),p(g),p(C)),v(e,k),v(t,k),v(o,k),v(u,k),v(a,k),v(c,k),v(_,k),v(S,k)}}}function _c(r){let e,n,t,l;return e=new Ae({props:{label:"Layers",open:!0,$$slots:{default:[mc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(o,i){b(e,o,i),n=!0,t||(l=Ft(window,"keydown",r[2]),t=!0)},p(o,[i]){const u={};i&35&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){h(e.$$.fragment,o),n=!1},d(o){v(e,o),t=!1,l()}}}function gc(r,e,n){let t;Je(r,$n,s=>n(1,t=s));let l;function o(s){!t&&s.key=="Escape"&&(l.disableStreetView(),s.preventDefault())}function i(s){U[s?"unshift":"push"](()=>{l=s,n(0,l)})}function u(s){t=s,$n.set(t)}return[l,t,o,i,u]}class hc extends z{constructor(e){super(),V(this,e,gc,_c,W,{})}}function dc(r,e,n){let{loadFile:t}=e;return nn(async()=>{let o=await(await fetch(`${ln()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class bc extends z{constructor(e){super(),V(this,e,dc,null,W,{loadFile:0})}}function vc(r){let e;return{c(){e=w("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wc(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yc(r){let e,n,t=r[0].authority_or_region+"",l,o,i,u,s=r[0].capital_scheme_id+"",a,f,c,g,_=r[0].funding_programme+"",C,S,T,k,I,F,j;return k=new Xt({props:{$$slots:{default:[vc]},$$scope:{ctx:r}}}),k.$on("click",r[3]),F=new Xt({props:{disabled:r[1],title:r[2],$$slots:{default:[wc]},$$scope:{ctx:r}}}),F.$on("click",r[4]),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=O(),i=A("p"),u=w("Capital scheme ID: "),a=w(s),f=O(),c=A("p"),g=w("Funding programme: "),C=w(_),S=O(),T=A("div"),d(k.$$.fragment),I=O(),d(F.$$.fragment),x(T,"class","govuk-button-group")},m(L,M){$(L,e,M),y(e,n),y(e,l),$(L,o,M),$(L,i,M),y(i,u),y(i,a),$(L,f,M),$(L,c,M),y(c,g),y(c,C),$(L,S,M),$(L,T,M),b(k,T,null),y(T,I),b(F,T,null),j=!0},p(L,M){(!j||M&1)&&t!==(t=L[0].authority_or_region+"")&&H(l,t),(!j||M&1)&&s!==(s=L[0].capital_scheme_id+"")&&H(a,s),(!j||M&1)&&_!==(_=L[0].funding_programme+"")&&H(C,_);const E={};M&256&&(E.$$scope={dirty:M,ctx:L}),k.$set(E);const N={};M&256&&(N.$$scope={dirty:M,ctx:L}),F.$set(N)},i(L){j||(m(k.$$.fragment,L),m(F.$$.fragment,L),j=!0)},o(L){h(k.$$.fragment,L),h(F.$$.fragment,L),j=!1},d(L){L&&(p(e),p(o),p(i),p(f),p(c),p(S),p(T)),v(k),v(F)}}}function kc(r){let e,n;return e=new Ae({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[yc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),l&257&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sc(r,e,n){let t;Je(r,tn,c=>n(7,t=c));let{schemesGj:l}=e,{scheme:o}=e,{authorityNames:i}=e,u=!i.has(o.authority_or_region),s=u?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function a(){let c={type:"FeatureCollection",features:l.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(Hr(c),{padding:20,animate:!1})}function f(){let c={type:"FeatureCollection",features:l.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},g=o.authority_or_region;window.localStorage.setItem(g,JSON.stringify(c)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return r.$$set=c=>{"schemesGj"in c&&n(5,l=c.schemesGj),"scheme"in c&&n(0,o=c.scheme),"authorityNames"in c&&n(6,i=c.authorityNames)},[o,u,s,a,f,l,i]}class Tc extends z{constructor(e){super(),V(this,e,Sc,kc,W,{schemesGj:5,scheme:0,authorityNames:6})}}const Cc=["Adur","Allerdale","Amber Valley","Arun","Ashfield","Ashford","Babergh","Barking and Dagenham","Barnet","Barnsley","Barrow-in-Furness","Basildon","Basingstoke and Deane","Bassetlaw","Bath and North East Somerset","Bedford","Bexley","Birmingham","Blaby","Blackburn with Darwen","Blackpool","Bolsover","Bolton","Boston","Bournemouth, Christchurch and Poole","Bracknell Forest","Bradford","Braintree","Breckland","Brent","Brentwood","Brighton and Hove","Bristol, City of","Broadland","Bromley","Bromsgrove","Broxbourne","Broxtowe","Buckinghamshire","Burnley","Bury","Calderdale","Cambridge","Cambridgeshire and Peterborough Combined Authority","Camden","Cannock Chase","Canterbury","Carlisle","Castle Point","Central Bedfordshire","Charnwood","Chelmsford","Cheltenham","Cherwell","Cheshire East","Cheshire West and Chester","Chesterfield","Chichester","Chorley","City of London","Colchester","Copeland","Cornwall","Cotswold","County Durham","Coventry","Craven","Crawley","Croydon","Cumbria","Dacorum","Darlington","Dartford","Derby","Derbyshire","Derbyshire Dales","Devon","Doncaster","Dorset","Dover","Dudley","Ealing","Eastbourne","East Cambridgeshire","East Devon","East Hampshire","East Hertfordshire","Eastleigh","East Lindsey","East Riding of Yorkshire","East Staffordshire","East Suffolk","East Sussex","Eden","Elmbridge","Enfield","Epping Forest","Epsom and Ewell","Erewash","Essex","Exeter","Fareham","Fenland","Folkestone and Hythe","Forest of Dean","Fylde","Gateshead","Gedling","Gloucester","Gloucestershire","Gosport","Gravesham","Greater London","Greater Manchester Combined Authority","Great Yarmouth","Greenwich","Guildford","Hackney","Halton","Hambleton","Hammersmith and Fulham","Hampshire","Harborough","Haringey","Harlow","Harrogate","Harrow","Hart","Hartlepool","Hastings","Havant","Havering","Herefordshire","Herefordshire, County of","Hertfordshire","Hertsmere","High Peak","Hillingdon","Hinckley and Bosworth","Horsham","Hounslow","Huntingdonshire","Hyndburn","Ipswich","Isle of Wight","Isles of Scilly","Islington","Kensington and Chelsea","Kent","King's Lynn and West Norfolk","Kingston upon Hull","Kingston upon Hull, City of","Kingston upon Thames","Kirklees","Knowsley","Lambeth","Lancashire","Lancaster","Leeds","Leicester","Leicestershire","Lewes","Lewisham","Lichfield","Lincoln","Lincolnshire","Liverpool","Liverpool City Region Combined Authority","Luton","Maidstone","Maldon","Malvern Hills","Manchester","Mansfield","Medway","Melton","Mendip","Merton","Mid Devon","Middlesbrough","Mid Suffolk","Mid Sussex","Milton Keynes","Mole Valley","Newark and Sherwood","Newcastle-under-Lyme","Newcastle upon Tyne","New Forest","Newham","Norfolk","North Devon","North East Derbyshire","North East Joint Transport Committee","North East Lincolnshire","North Hertfordshire","North Kesteven","North Lincolnshire","North Norfolk","North Northamptonshire","North Somerset","North Tyneside","Northumberland","North Warwickshire","North West Leicestershire","North Yorkshire","Norwich","Nottingham","Nottinghamshire","Nuneaton and Bedworth","Oadby and Wigston","Oldham","Oxford","Oxfordshire","Pendle","Peterborough","Plymouth","Portsmouth","Preston","Reading","Redbridge","Redcar and Cleveland","Redditch","Reigate and Banstead","Ribble Valley","Richmondshire","Richmond upon Thames","Rochdale","Rochford","Rossendale","Rother","Rotherham","Rugby","Runnymede","Rushcliffe","Rushmoor","Rutland","Ryedale","Salford","Sandwell","Scarborough","Sedgemoor","Sefton","Selby","Sevenoaks","Sheffield","Sheffield City Region Combined Authority","Shropshire","Slough","Solihull","Somerset","Somerset West and Taunton","Southampton","South Cambridgeshire","South Derbyshire","Southend-on-Sea","South Gloucestershire","South Hams","South Holland","South Kesteven","South Lakeland","South Norfolk","South Oxfordshire","South Ribble","South Somerset","South Staffordshire","South Tyneside","Southwark","Spelthorne","Stafford","Staffordshire","Staffordshire Moorlands","St Albans","Stevenage","St. Helens","Stockport","Stockton-on-Tees","Stoke-on-Trent","Stratford-on-Avon","Stroud","Suffolk","Sunderland","Surrey","Surrey Heath","Sutton","Swale","Swindon","Tameside","Tamworth","Tandridge","Tees Valley Combined Authority","Teignbridge","Telford and Wrekin","Tendring","Test Valley","Tewkesbury","Thanet","Three Rivers","Thurrock","Tonbridge and Malling","Torbay","Torridge","Tower Hamlets","Trafford","Tunbridge Wells","Uttlesford","Vale of White Horse","Wakefield","Walsall","Waltham Forest","Wandsworth","Warrington","Warwick","Warwickshire","Watford","Waverley","Wealden","Welwyn Hatfield","West Berkshire","West Devon","West Lancashire","West Lindsey","West Midlands ITA","Westminster","West Northamptonshire","West of England Combined Authority","West Oxfordshire","West Suffolk","West Sussex","West Yorkshire Combined Authority","Wigan","Wiltshire","Winchester","Windsor and Maidenhead","Wirral","Woking","Wokingham","Wolverhampton","Worcester","Worcestershire","Worthing","Wychavon","Wyre","Wyre Forest","York"];function tr(r){let e,n,t=pn(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,i){$(o,e,i),y(e,n),y(e,l)},p(o,i){i&1&&t!==(t=pn(o[0].length_meters)+"")&&H(l,t)},d(o){o&&p(e)}}}function nr(r){let e,n=r[1](r[0].description)+"";return{c(){e=A("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Oc(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,g=r[0].scheme_reference+"",_,C,S,T=r[0].length_meters&&tr(r),k=r[0].description&&nr(r);return{c(){e=A("div"),n=A("h2"),t=new rn(!1),o=w(" ("),u=w(i),s=w(")"),a=O(),f=A("p"),c=w("Scheme reference: "),_=w(g),C=O(),T&&T.c(),S=O(),k&&k.c(),t.a=o,ke(e,"max-width","30vw")},m(I,F){$(I,e,F),y(e,n),t.m(l,n),y(n,o),y(n,u),y(n,s),y(e,a),y(e,f),y(f,c),y(f,_),y(e,C),T&&T.m(e,null),y(e,S),k&&k.m(e,null)},p(I,[F]){F&1&&l!==(l=I[1](I[0].name)+"")&&t.p(l),F&1&&i!==(i=I[0].intervention_type+"")&&H(u,i),F&1&&g!==(g=I[0].scheme_reference+"")&&H(_,g),I[0].length_meters?T?T.p(I,F):(T=tr(I),T.c(),T.m(e,S)):T&&(T.d(1),T=null),I[0].description?k?k.p(I,F):(k=nr(I),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},i:te,o:te,d(I){I&&p(e),T&&T.d(),k&&k.d()}}}function Ac(r,e,n){let{props:t}=e,{filterText:l}=e;function o(i){return l?i.replace(new RegExp(l,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,l=i.filterText)},[t,o,l]}class an extends z{constructor(e){super(),V(this,e,Ac,Oc,W,{props:0,filterText:2})}}function Lc(r){let e,n;return e=new an({props:{props:r[7],filterText:r[1]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ic(r){let e,n;return e=new re({props:{$$slots:{default:[Lc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ec(r){let e,n;return e=new an({props:{props:r[7],filterText:r[1]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nc(r){let e,n;return e=new re({props:{$$slots:{default:[Ec,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mc(r){let e,n;return e=new an({props:{props:r[7],filterText:r[1]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pc(r){let e,n;return e=new re({props:{$$slots:{default:[Mc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fc(r){let e,n,t,l,o,i,u,s,a,f;const c=[B("interventions-points"),{filter:["all",mn,r[4],r[5]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[3],"circle-radius":Nt,"circle-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let g={$$slots:{default:[Ic]},$$scope:{ctx:r}};for(let L=0;L<c.length;L+=1)g=Y(g,c[L]);e=new Ge({props:g});const _=[B("interventions-lines"),{filter:["all",_n,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[3],"line-width":dt,"line-opacity":q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let C={$$slots:{default:[Nc]},$$scope:{ctx:r}};for(let L=0;L<_.length;L+=1)C=Y(C,_[L]);t=new ue({props:C});const S=[B("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*dt,"circle-opacity":0,"circle-stroke-color":Vr.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let L=0;L<S.length;L+=1)T=Y(T,S[L]);o=new Ge({props:T});const k=[B("interventions-polygons"),{filter:["all",Ot,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[3],"fill-opacity":q(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let I={$$slots:{default:[Pc]},$$scope:{ctx:r}};for(let L=0;L<k.length;L+=1)I=Y(I,k[L]);u=new Fe({props:I});const F=[B("interventions-polygons-outlines"),{filter:["all",Ot,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*dt}},{layout:{visibility:r[0]?"visible":"none"}}];let j={};for(let L=0;L<F.length;L+=1)j=Y(j,F[L]);return a=new ue({props:j}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment),s=O(),d(a.$$.fragment)},m(L,M){b(e,L,M),$(L,n,M),b(t,L,M),$(L,l,M),b(o,L,M),$(L,i,M),b(u,L,M),$(L,s,M),b(a,L,M),f=!0},p(L,M){const E=M&57?J(c,[c[0],M&48&&{filter:["all",mn,L[4],L[5]]},c[2],c[3],M&8&&{paint:{"circle-color":L[3],"circle-radius":Nt,"circle-opacity":q(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};M&258&&(E.$$scope={dirty:M,ctx:L}),e.$set(E);const N=M&25?J(_,[_[0],M&16&&{filter:["all",_n,L[4]]},_[2],_[3],M&8&&{paint:{"line-color":L[3],"line-width":dt,"line-opacity":q(1,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};M&258&&(N.$$scope={dirty:M,ctx:L}),t.$set(N);const P=M&1?J(S,[S[0],S[1],S[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(P);const R=M&25?J(k,[k[0],M&16&&{filter:["all",Ot,L[4]]},k[2],k[3],M&8&&{paint:{"fill-color":L[3],"fill-opacity":q(.2,.5)}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};M&258&&(R.$$scope={dirty:M,ctx:L}),u.$set(R);const D=M&25?J(F,[F[0],M&16&&{filter:["all",Ot,L[4]]},M&8&&{paint:{"line-color":L[3],"line-opacity":.5,"line-width":.7*dt}},M&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(D)},i(L){f||(m(e.$$.fragment,L),m(t.$$.fragment,L),m(o.$$.fragment,L),m(u.$$.fragment,L),m(a.$$.fragment,L),f=!0)},o(L){h(e.$$.fragment,L),h(t.$$.fragment,L),h(o.$$.fragment,L),h(u.$$.fragment,L),h(a.$$.fragment,L),f=!1},d(L){L&&(p(n),p(l),p(i),p(s)),v(e,L),v(t,L),v(o,L),v(u,L),v(a,L)}}}function Dc(r){let e,n;return e=new kt({props:{data:r[2],$$slots:{default:[Fc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jc(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,{filterText:i}=e,u=cr("v1");const s=["!=","hide_while_editing",!0],a=["!=","endpoint",!0];return r.$$set=f=>{"schemesGj"in f&&n(6,l=f.schemesGj),"showSchemes"in f&&n(0,o=f.showSchemes),"filterText"in f&&n(1,i=f.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Rr(l))},[o,i,t,u,s,a,l]}class Bc extends z{constructor(e){super(),V(this,e,jc,Dc,W,{schemesGj:6,showSchemes:0,filterText:1})}}function rr(r,e,n){const t=r.slice();return t[14]=e[n],t}function Hc(r){let e,n;return e=new bc({props:{loadFile:r[8]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lr(r){let e,n,t,l,o,i;function u(g){r[9](g)}function s(g){r[10](g)}function a(g){r[11](g)}function f(g){r[12](g)}let c={schemes:r[2]};return r[1]!==void 0&&(c.schemesGj=r[1]),r[3]!==void 0&&(c.schemesToBeShown=r[3]),r[4]!==void 0&&(c.filterText=r[4]),r[5]!==void 0&&(c.show=r[5]),e=new As({props:c}),U.push(()=>X(e,"schemesGj",u)),U.push(()=>X(e,"schemesToBeShown",s)),U.push(()=>X(e,"filterText",a)),U.push(()=>X(e,"show",f)),{c(){d(e.$$.fragment)},m(g,_){b(e,g,_),i=!0},p(g,_){const C={};_&4&&(C.schemes=g[2]),!n&&_&2&&(n=!0,C.schemesGj=g[1],K(()=>n=!1)),!t&&_&8&&(t=!0,C.schemesToBeShown=g[3],K(()=>t=!1)),!l&&_&16&&(l=!0,C.filterText=g[4],K(()=>l=!1)),!o&&_&32&&(o=!0,C.show=g[5],K(()=>o=!1)),e.$set(C)},i(g){i||(m(e.$$.fragment,g),i=!0)},o(g){h(e.$$.fragment,g),i=!1},d(g){v(e,g)}}}function or(r){let e,n;return e=new Tc({props:{schemesGj:r[1],scheme:r[14],authorityNames:r[7]}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[14]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sr(r){let e=r[3].has(r[14].scheme_reference),n,t,l=e&&or(r);return{c(){l&&l.c(),n=Ne()},m(o,i){l&&l.m(o,i),$(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[14].scheme_reference)),e?l?(l.p(o,i),i&12&&m(l,1)):(l=or(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(ae(),h(l,1,1,()=>{l=null}),fe())},i(o){t||(m(l),t=!0)},o(o){h(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function Rc(r){let e,n,t,l,o,i,u,s,a,f,c=en()=="Private (development)",g,_,C,S,T,k,I,F;o=new Kr({props:{boundaryGeojson:r[1]}}),u=new pl({}),a=new Wr({});let j=c&&Hc(r);_=new Yr({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[8]}}),S=new ur({props:{errorMessage:r[0]}});let L=r[2].size>0&&lr(r),M=We(r[2].values()),E=[];for(let P=0;P<M.length;P+=1)E[P]=sr(rr(r,M,P));const N=P=>h(E[P],1,1,()=>{E[P]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=O(),d(o.$$.fragment),i=O(),d(u.$$.fragment),s=O(),d(a.$$.fragment),f=O(),j&&j.c(),g=O(),d(_.$$.fragment),C=O(),d(S.$$.fragment),T=O(),L&&L.c(),k=O(),I=A("ul");for(let P=0;P<E.length;P+=1)E[P].c();ke(n,"display","flex"),ke(n,"justify-content","space-between"),x(e,"slot","sidebar"),x(e,"class","govuk-prose")},m(P,R){$(P,e,R),y(e,n),y(n,t),y(n,l),b(o,n,null),y(e,i),b(u,e,null),y(e,s),b(a,e,null),y(e,f),j&&j.m(e,null),y(e,g),b(_,e,null),y(e,C),b(S,e,null),y(e,T),L&&L.m(e,null),y(e,k),y(e,I);for(let D=0;D<E.length;D+=1)E[D]&&E[D].m(I,null);F=!0},p(P,R){const D={};R&2&&(D.boundaryGeojson=P[1]),o.$set(D),c&&j.p(P,R);const se={};if(R&1&&(se.errorMessage=P[0]),S.$set(se),P[2].size>0?L?(L.p(P,R),R&4&&m(L,1)):(L=lr(P),L.c(),m(L,1),L.m(e,k)):L&&(ae(),h(L,1,1,()=>{L=null}),fe()),R&142){M=We(P[2].values());let Z;for(Z=0;Z<M.length;Z+=1){const be=rr(P,M,Z);E[Z]?(E[Z].p(be,R),m(E[Z],1)):(E[Z]=sr(be),E[Z].c(),m(E[Z],1),E[Z].m(I,null))}for(ae(),Z=M.length;Z<E.length;Z+=1)N(Z);fe()}},i(P){if(!F){m(o.$$.fragment,P),m(u.$$.fragment,P),m(a.$$.fragment,P),m(j),m(_.$$.fragment,P),m(S.$$.fragment,P),m(L);for(let R=0;R<M.length;R+=1)m(E[R]);F=!0}},o(P){h(o.$$.fragment,P),h(u.$$.fragment,P),h(a.$$.fragment,P),h(j),h(_.$$.fragment,P),h(S.$$.fragment,P),h(L),E=E.filter(Boolean);for(let R=0;R<E.length;R+=1)h(E[R]);F=!1},d(P){P&&p(e),v(o),v(u),v(a),j&&j.d(),v(_),v(S),L&&L.d(),It(E,P)}}}function Wc(r){let e,n,t,l,o,i,u;return e=new qr({}),t=new Bc({props:{schemesGj:r[1],filterText:r[4],showSchemes:r[5]}}),i=new hc({}),{c(){d(e.$$.fragment),n=O(),d(t.$$.fragment),l=O(),o=A("div"),d(i.$$.fragment),x(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),$(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&2&&(f.schemesGj=s[1]),a&16&&(f.filterText=s[4]),a&32&&(f.showSchemes=s[5]),t.$set(f)},i(s){u||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){h(e.$$.fragment,s),h(t.$$.fragment,s),h(i.$$.fragment,s),u=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),v(i)}}}function Gc(r){let e,n,t;return n=new Gr({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){e=A("div"),d(n.$$.fragment),x(e,"slot","main")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.style=l[6]),o&131122&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){h(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Uc(r){let e,n;return e=new Qr({props:{$$slots:{main:[Gc],sidebar:[Rc]},$$scope:{ctx:r}}}),{c(){d(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&131199&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){h(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zc(r,e,n){let t;Je(r,gn,k=>n(6,t=k)),nn(()=>{Ur()});let l=new Set(Cc);const o=new URLSearchParams(window.location.search);gn.set(o.get("style")||"dataviz");let i="",u={type:"FeatureCollection",features:[],schemes:{}},s=new Map,a=new Set,f="",c=!0;function g(k){try{n(1,u=JSON.parse(k)),n(2,s=_s(u)),n(0,i="")}catch(I){n(0,i=`The file you loaded is broken: ${I}`)}}function _(k){u=k,n(1,u)}function C(k){a=k,n(3,a)}function S(k){f=k,n(4,f)}function T(k){c=k,n(5,c)}return[i,u,s,a,f,c,t,l,g,_,C,S,T]}class Vc extends z{constructor(e){super(),V(this,e,zc,Uc,W,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Vc({target:document.getElementById("app")});
