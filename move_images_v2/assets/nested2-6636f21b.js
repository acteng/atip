import{S as z,i as q,s as U,ax as Br,b as W,c as X,e as C,d as A,g as h,h as G,j as p,m as b,x as wt,l as K,t as $,n as d,o as m,p as v,aU as Tt,aV as Ot,aW as At,aX as Ct,aY as Gr,aZ as nn,a_ as nt,W as be,X as se,Y as ie,a$ as $r,q as Ee,ap as pr,b0 as mr,ay as Nt,b1 as _r,b2 as gr,K as ee,b3 as $n,b4 as Ur,v as w,k as y,f as rn,aq as Hr,D as ln,aI as dr,u as on,F as hr,a as Jt,w as Dt,H as R,aT as H,aJ as ze,aB as Se,aK as Rt,b5 as fe,T as D,b6 as $e,B as V,U as J,C as ue,a3 as Y,b7 as te,G as Lt,I as zr,aC as qr,J as pn,R as br,b8 as sn,b9 as an,E as vr,as as Wr,ba as mn,Q as Vr,aO as _n,$ as Xr,a0 as gn,a1 as dn,a2 as Ft,aS as hn,L as Kr,M as Jr,y as Yr}from"./index-e60d0df6.js";import{S as kt,e as Le,f as It,C as re,c as Bt,i as Zr,g as Qr,B as xr,a as ht,b as el,G as tl}from"./StreetViewTool-1fa6901c.js";import{L as nl,s as bn,c as wr,a as ge,C as qe,S as rl,Z as ll}from"./schemas-b1187ee5.js";import{a as De,F as ol}from"./Popup-bc2b8044.js";import{P as le}from"./Popup-aa12ed96.js";import{L as sl,a as il}from"./LineMeasureController-81028e43.js";const al="/atip/move_images_v2/assets/help-d011708a.svg";function fl(r){let e,n;const t=r[1].default,l=Tt(t,r,r[4],null);return{c(){e=C("div"),l&&l.c(),G(e,"class","govuk-prose")},m(o,a){p(o,e,a),l&&l.m(e,null),n=!0},p(o,a){l&&l.p&&(!n||a&16)&&Ot(l,t,o,o[4],n?Ct(t,o[4],a,null):At(o[4]),null)},i(o){n||($(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&m(e),l&&l.d(o)}}}function ul(r){let e,n,t,l,o,a,u;function s(f){r[3](f)}let i={title:"Help",$$slots:{default:[fl]},$$scope:{ctx:r}};return r[0]!==void 0&&(i.open=r[0]),t=new Br({props:i}),W.push(()=>X(t,"open",s)),{c(){e=C("button"),e.innerHTML=`<img src="${al}" title="Help" alt="Help"/>`,n=A(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){p(f,e,c),p(f,n,c),b(t,f,c),o=!0,a||(u=wt(e,"click",r[2]),a=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,_.open=f[0],K(()=>l=!1)),t.$set(_)},i(f){o||($(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(m(e),m(n)),v(t,f),a=!1,u()}}}function cl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const a=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,a,u,l]}class oe extends z{constructor(e){super(),q(this,e,cl,ul,U,{})}}function $l(r){let e;const n=r[8].default,t=Tt(n,r,r[15],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&32768)&&Ot(t,n,l,l[15],e?Ct(n,l[15],o,null):At(l[15]),null)},i(l){e||($(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function pl(r){let e,n;return e=new Gr({props:{id:r[0],type:"raster",source:r[1],beforeId:r[2],beforeLayerType:r[3],paint:r[4],layout:r[5],minzoom:r[6],maxzoom:r[7],$$slots:{default:[$l]},$$scope:{ctx:r}}}),e.$on("click",r[9]),e.$on("dblclick",r[10]),e.$on("contextmenu",r[11]),e.$on("mouseenter",r[12]),e.$on("mousemove",r[13]),e.$on("mouseleave",r[14]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.id=t[0]),l&2&&(o.source=t[1]),l&4&&(o.beforeId=t[2]),l&8&&(o.beforeLayerType=t[3]),l&16&&(o.paint=t[4]),l&32&&(o.layout=t[5]),l&64&&(o.minzoom=t[6]),l&128&&(o.maxzoom=t[7]),l&32768&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ml(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=nn("raster-layer")}=e,{source:a=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:s=void 0}=e,{paint:i}=e,{layout:f=void 0}=e,{minzoom:c=void 0}=e,{maxzoom:_=void 0}=e;function g(M){nt.call(this,r,M)}function k(M){nt.call(this,r,M)}function T(M){nt.call(this,r,M)}function O(M){nt.call(this,r,M)}function S(M){nt.call(this,r,M)}function L(M){nt.call(this,r,M)}return r.$$set=M=>{"id"in M&&n(0,o=M.id),"source"in M&&n(1,a=M.source),"beforeId"in M&&n(2,u=M.beforeId),"beforeLayerType"in M&&n(3,s=M.beforeLayerType),"paint"in M&&n(4,i=M.paint),"layout"in M&&n(5,f=M.layout),"minzoom"in M&&n(6,c=M.minzoom),"maxzoom"in M&&n(7,_=M.maxzoom),"$$scope"in M&&n(15,l=M.$$scope)},[o,a,u,s,i,f,c,_,t,g,k,T,O,S,L,l]}class _l extends z{constructor(e){super(),q(this,e,ml,pl,U,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}function vn(r){let e=r[0],n,t,l=wn(r);return{c(){l.c(),n=be()},m(o,a){l.m(o,a),p(o,n,a),t=!0},p(o,a){a&1&&U(e,e=o[0])?(se(),d(l,1,1,ee),ie(),l=wn(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,a)},i(o){t||($(l),t=!0)},o(o){d(l),t=!1},d(o){o&&m(n),l.d(o)}}}function wn(r){let e;const n=r[10].default,t=Tt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Ot(t,n,l,l[9],e?Ct(n,l[9],o,null):At(l[9]),null)},i(l){e||($(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function gl(r){let e,n,t=r[0]&&vn(r);return{c(){t&&t.c(),e=be()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=vn(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(se(),d(t,1,1,()=>{t=null}),ie())},i(l){n||($(t),n=!0)},o(l){d(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function dl(r,e,n){let t,l,{$$slots:o={},$$scope:a}=e,{id:u=nn("raster-source")}=e,{tiles:s}=e,{tileSize:i=void 0}=e;const{map:f,self:c}=$r();Ee(r,f,k=>n(8,l=k)),Ee(r,c,k=>n(0,t=k));let _,g=!0;return pr(()=>{t&&_&&l&&(mr(f,t,_),Nt(c,t=null,t),n(6,_=void 0))}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"tiles"in k&&n(4,s=k.tiles),"tileSize"in k&&n(5,i=k.tileSize),"$$scope"in k&&n(9,a=k.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Nt(c,t=u,t),_r(l,t,gr({type:"raster",tiles:s,tileSize:i}),k=>l&&k===t,()=>{t&&(n(6,_=l==null?void 0:l.getSource(t)),n(7,g=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,_=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&_&&(g?n(7,g=!1):_.setTiles(s))},[t,f,c,u,s,i,_,g,l,a,o]}class hl extends z{constructor(e){super(),q(this,e,dl,gl,U,{id:3,tiles:4,tileSize:5})}}function kn(r){let e=r[0],n,t,l=yn(r);return{c(){l.c(),n=be()},m(o,a){l.m(o,a),p(o,n,a),t=!0},p(o,a){a&1&&U(e,e=o[0])?(se(),d(l,1,1,ee),ie(),l=yn(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,a)},i(o){t||($(l),t=!0)},o(o){d(l),t=!1},d(o){o&&m(n),l.d(o)}}}function yn(r){let e;const n=r[9].default,t=Tt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Ot(t,n,l,l[8],e?Ct(n,l[8],o,null):At(l[8]),null)},i(l){e||($(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function bl(r){let e,n,t=r[0]&&kn(r);return{c(){t&&t.c(),e=be()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=kn(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(se(),d(t,1,1,()=>{t=null}),ie())},i(l){n||($(t),n=!0)},o(l){d(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function vl(r,e,n){let t,l,{$$slots:o={},$$scope:a}=e,{id:u=nn("vector")}=e,{url:s=null}=e,{tiles:i=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!$n.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let k=new Ur;$n.addProtocol("pmtiles",k.tile)}const{map:c,self:_}=$r();Ee(r,c,k=>n(7,l=k)),Ee(r,_,k=>n(0,t=k));let g;return pr(()=>{t&&l&&(mr(c,t,g),Nt(_,t=null,t),g=void 0)}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"url"in k&&n(4,s=k.url),"tiles"in k&&n(5,i=k.tiles),"promoteId"in k&&n(6,f=k.promoteId),"$$scope"in k&&n(8,a=k.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Nt(_,t=u,t),_r(l,t,gr({type:"vector",url:s,tiles:i,promoteId:f}),k=>l&&k===t,()=>{t&&(g=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{g=l==null?void 0:l.getSource(u)}))},[t,c,_,u,s,i,f,l,a,o]}class ce extends z{constructor(e){super(),q(this,e,vl,bl,U,{id:3,url:4,tiles:5,promoteId:6})}}function wl(r){let e;return{c(){e=C("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function kl(r){let e,n,t=r[0]=="Private (development)"&&wl();return{c(){t&&t.c(),e=A(),n=C("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),p(l,e,o),p(l,n,o)},p:ee,d(l){l&&(m(e),m(n)),t&&t.d(l)}}}function yl(r){let e,n,t,l,o,a;return o=new oe({props:{$$slots:{default:[kl]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=w("App version: "),t=w(r[0]),l=A(),h(o.$$.fragment)},m(u,s){p(u,e,s),y(e,n),y(e,t),y(e,l),b(o,e,null),a=!0},p(u,[s]){const i={};s&2&&(i.$$scope={dirty:s,ctx:u}),o.$set(i)},i(u){a||($(o.$$.fragment,u),a=!0)},o(u){d(o.$$.fragment,u),a=!1},d(u){u&&m(e),v(o)}}}function Sl(r){return[rn()]}class Tl extends z{constructor(e){super(),q(this,e,Sl,yl,U,{})}}const Ol={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var me=Uint8Array,Ye=Uint16Array,kr=Uint32Array,yr=new me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Sr=new me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Al=new me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Tr=function(r,e){for(var n=new Ye(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new kr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Or=Tr(yr,2),Ar=Or[0],Cl=Or[1];Ar[28]=258,Cl[258]=28;var Ll=Tr(Sr,0),Il=Ll[0],Yt=new Ye(32768);for(var ne=0;ne<32768;++ne){var Ge=(ne&43690)>>>1|(ne&21845)<<1;Ge=(Ge&52428)>>>2|(Ge&13107)<<2,Ge=(Ge&61680)>>>4|(Ge&3855)<<4,Yt[ne]=((Ge&65280)>>>8|(Ge&255)<<8)>>>1}var vt=function(r,e,n){for(var t=r.length,l=0,o=new Ye(e);l<t;++l)r[l]&&++o[r[l]-1];var a=new Ye(e);for(l=0;l<e;++l)a[l]=a[l-1]+o[l-1]<<1;var u;if(n){u=new Ye(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var i=l<<4|r[l],f=e-r[l],c=a[r[l]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[Yt[c]>>>s]=i}else for(u=new Ye(t),l=0;l<t;++l)r[l]&&(u[l]=Yt[a[r[l]-1]++]>>>15-r[l]);return u},Pt=new me(288);for(var ne=0;ne<144;++ne)Pt[ne]=8;for(var ne=144;ne<256;++ne)Pt[ne]=9;for(var ne=256;ne<280;++ne)Pt[ne]=7;for(var ne=280;ne<288;++ne)Pt[ne]=8;var Cr=new me(32);for(var ne=0;ne<32;++ne)Cr[ne]=5;var Pl=vt(Pt,9,1),Ml=vt(Cr,5,1),Ht=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},we=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},zt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Fl=function(r){return(r+7)/8|0},fn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Ye:r.BYTES_PER_ELEMENT==4?kr:me)(n-e);return t.set(r.subarray(e,n)),t},jl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ke=function(r,e,n){var t=new Error(e||jl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,ke),!n)throw t;return t},El=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new me(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new me(t*3));var a=function(et){var Xe=e.length;if(et>Xe){var tt=new me(Math.max(Xe*2,et));tt.set(e),e=tt}},u=n.f||0,s=n.p||0,i=n.b||0,f=n.l,c=n.d,_=n.m,g=n.n,k=t*8;do{if(!f){u=we(r,s,1);var T=we(r,s+1,3);if(s+=3,T)if(T==1)f=Pl,c=Ml,_=9,g=5;else if(T==2){var M=we(r,s,31)+257,N=we(r,s+10,15)+4,P=M+we(r,s+5,31)+1;s+=14;for(var E=new me(P),j=new me(19),I=0;I<N;++I)j[Al[I]]=we(r,s+I*3,7);s+=N*3;for(var F=Ht(j),B=(1<<F)-1,x=vt(j,F,1),I=0;I<P;){var ae=x[we(r,s,B)];s+=ae&15;var O=ae>>>4;if(O<16)E[I++]=O;else{var Z=0,ve=0;for(O==16?(ve=3+we(r,s,3),s+=2,Z=E[I-1]):O==17?(ve=3+we(r,s,7),s+=3):O==18&&(ve=11+we(r,s,127),s+=7);ve--;)E[I++]=Z}}var mt=E.subarray(0,M),de=E.subarray(M);_=Ht(mt),g=Ht(de),f=vt(mt,_,1),c=vt(de,g,1)}else ke(1);else{var O=Fl(s)+4,S=r[O-4]|r[O-3]<<8,L=O+S;if(L>t){o&&ke(0);break}l&&a(i+S),e.set(r.subarray(O,L),i),n.b=i+=S,n.p=s=L*8,n.f=u;continue}if(s>k){o&&ke(0);break}}l&&a(i+131072);for(var Qe=(1<<_)-1,_t=(1<<g)-1,xe=s;;xe=s){var Z=f[zt(r,s)&Qe],pe=Z>>>4;if(s+=Z&15,s>k){o&&ke(0);break}if(Z||ke(2),pe<256)e[i++]=pe;else if(pe==256){xe=s,f=null;break}else{var gt=pe-254;if(pe>264){var I=pe-257,je=yr[I];gt=we(r,s,(1<<je)-1)+Ar[I],s+=je}var Be=c[zt(r,s)&_t],Ve=Be>>>4;Be||ke(3),s+=Be&15;var de=Il[Ve];if(Ve>3){var je=Sr[Ve];de+=zt(r,s)&(1<<je)-1,s+=je}if(s>k){o&&ke(0);break}l&&a(i+131072);for(var dt=i+gt;i<dt;i+=4)e[i]=e[i-de],e[i+1]=e[i+1-de],e[i+2]=e[i+2-de],e[i+3]=e[i+3-de];i=dt}}n.l=f,n.p=xe,n.b=i,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=g)}while(!u);return i==e.length?e:fn(e,0,i)},Nl=new me(0),Pe=function(r,e){return r[e]|r[e+1]<<8},ye=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},qt=function(r,e){return ye(r,e)+ye(r,e+4)*4294967296};function Dl(r,e){return El(r,e)}var Zt=typeof TextDecoder<"u"&&new TextDecoder,Rl=0;try{Zt.decode(Nl,{stream:!0}),Rl=1}catch{}var Bl=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,fn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Lr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(Zt)return Zt.decode(r);var l=Bl(r),o=l[0],a=l[1];return a.length&&ke(8),o}}var Gl=function(r,e){return e+30+Pe(r,e+26)+Pe(r,e+28)},Ul=function(r,e,n){var t=Pe(r,e+28),l=Lr(r.subarray(e+46,e+46+t),!(Pe(r,e+8)&2048)),o=e+46+t,a=ye(r,e+20),u=n&&a==4294967295?Hl(r,o):[a,ye(r,e+24),ye(r,e+42)],s=u[0],i=u[1],f=u[2];return[Pe(r,e+10),s,i,l,o+Pe(r,e+30)+Pe(r,e+32),f]},Hl=function(r,e){for(;Pe(r,e)!=1;e+=4+Pe(r,e+2));return[qt(r,e+12),qt(r,e+4),qt(r,e+20)]};function zl(r,e){for(var n={},t=r.length-22;ye(r,t)!=101010256;--t)(!t||r.length-t>65558)&&ke(13);var l=Pe(r,t+8);if(!l)return{};var o=ye(r,t+16),a=o==4294967295||l==65535;if(a){var u=ye(r,t-12);a=ye(r,u)==101075792,a&&(l=ye(r,u+32),o=ye(r,u+48))}for(var s=e&&e.filter,i=0;i<l;++i){var f=Ul(r,o,a),c=f[0],_=f[1],g=f[2],k=f[3],T=f[4],O=f[5],S=Gl(r,O);o=T,(!s||s({name:k,size:_,originalSize:g,compression:c}))&&(c?c==8?n[k]=Dl(r.subarray(S,S+_),new me(g)):ke(14,"unknown compression type "+c):n[k]=fn(r,S,S+_))}return n}function ql(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Wt):Wt(r)}function Wt(r){var e=new Uint8Array(r),n=zl(e);return Promise.resolve(Wl(n))}function Wl(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Lr(r[l])}return e}function Me(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Ze(t)===e)return t;n++}}function Mt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Ze(l)===e&&n.push(l),t++}return n}function Gt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Ze(l)===e&&n(l,t):n(l,t),t++}}function Vl(r,e,n){var t=[];return Gt(r,e,function(l,o){t.push(n(l,o))}),t}var Xl=/.+\:/;function Ze(r){return r.tagName.replace(Xl,"")}function Ir(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Ze(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Ir(r.childNodes[t]),t++;return e+="</"+Ze(r)+">",e}function Kl(r){var e=r.documentElement,n=Me(e,"sheetData"),t=[];return Gt(n,"row",function(l){Gt(l,"c",function(o){t.push(o)})}),t}function Jl(r,e){return Me(e,"v")}function Yl(r,e){if(e.firstChild&&Ze(e.firstChild)==="is"&&e.firstChild.firstChild&&Ze(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Zl(r){var e=r.documentElement,n=Me(e,"dimension");if(n)return n.getAttribute("ref")}function Ql(r){var e=r.documentElement,n=Me(e,"cellStyleXfs");return n?Mt(n,"xf"):[]}function xl(r){var e=r.documentElement,n=Me(e,"cellXfs");return n?Mt(n,"xf"):[]}function eo(r){var e=r.documentElement,n=Me(e,"numFmts");return n?Mt(n,"numFmt"):[]}function to(r){var e=r.documentElement;return Vl(e,"si",function(n){var t=Me(n,"t");if(t)return t.textContent;var l="";return Gt(n,"r",function(o){l+=Me(o,"t").textContent}),l})}function no(r){var e=r.documentElement;return Me(e,"workbookPr")}function ro(r){var e=r.documentElement;return Mt(e,"Relationship")}function lo(r){var e=r.documentElement,n=Me(e,"sheets");return Mt(n,"sheet")}function oo(r,e){var n=e.createDocument(r),t={},l=no(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return lo(n).forEach(o),t}function so(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(a){var u=a.getAttribute("Target"),s=a.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Vt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Vt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[a.getAttribute("Id")]=Vt(u);break}};return ro(n).forEach(l),t}function Vt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Sn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Tn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sn(Object(n),!0).forEach(function(t){io(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function io(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ao(r,e){if(!r)return{};var n=e.createDocument(r),t=Ql(n).map(Xt),l=eo(n).map(fo).reduce(function(a,u){return a[u.id]=u,a},[]),o=function(u){return u.hasAttribute("xfId")?Tn(Tn({},t[u.xfId]),Xt(u,l)):Xt(u,l)};return xl(n).map(o)}function fo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Xt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function uo(r,e){return r?to(e.createDocument(r)):[]}function Pr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function co(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=$o(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $o(r,e){if(r){if(typeof r=="string")return On(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(r,e)}}function On(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function po(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(mo.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&ho(l.numberFormat.template))return!0}}var mo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],_o=/^\[\$-414\]/,go=/;@$/;function ho(r){r=r.toLowerCase(),r=r.replace(_o,""),r=r.replace(go,"");for(var e=r.split(/\W+/),n=co(e),t;!(t=n()).done;){var l=t.value;if(bo.indexOf(l)<0)return!1}return!0}var bo=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function vo(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,a=n.styles,u=n.values,s=n.properties,i=n.options;switch(e||(e="n"),e){case"str":r=Kt(r,i);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Kt(r,i);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Kt(r,i);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=wo(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var _=Number(r);if(isNaN(_))throw new Error('Invalid "numeric" cell value: '.concat(r));r=_,po(r,o(),a,i)&&(r=Pr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function wo(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Kt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var ko=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function yo(r){var e=function(i,f){return i-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],a=t[0],u=t[t.length-1];return[{row:l,column:a},{row:o,column:u}]}function So(r){for(var e=0,n=0;n<r.length;)e*=26,e+=ko.indexOf(r[n]),n++;return e}function Mr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),So(r[0].trim())]}function To(r,e,n,t,l,o,a){var u=Mr(r.getAttribute("r")),s=Jl(e,r),i=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:vo(i,f,{getInlineStringValue:function(){return Yl(e,r)},getInlineStringXml:function(){return Ir(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:a})}}function Oo(r,e,n,t,l,o){var a=Kl(r);return a.length===0?[]:a.map(function(u){return To(u,r,e,n,t,l,o)})}function Ao(r,e){return Po(r)||Io(r,e)||Lo(r,e)||Co()}function Co(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lo(r,e){if(r){if(typeof r=="string")return An(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(r,e)}}function An(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Io(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,a,u;try{for(n=n.call(r);!(l=(a=n.next()).done)&&(t.push(a.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Po(r){if(Array.isArray(r))return r}function Mo(r){var e=Zl(r);if(e)return e=e.split(":").map(Mr).map(function(n){var t=Ao(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Fo(r,e,n,t,l,o){var a=e.createDocument(r),u=Oo(a,e,n,t,l,o),s=Mo(a)||yo(u);return{cells:u,dimensions:s}}function jo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Eo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Eo(r,e){if(r){if(typeof r=="string")return Cn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(r,e)}}function Cn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function No(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,a=r.length-1;a>=0;){for(var u=!0,s=jo(r[a]),i;!(i=s()).done;){var f=i.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(a,1),n&&n.splice(a,1);else if(o)break;a--}return r}function Do(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ro(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ro(r,e){if(r){if(typeof r=="string")return Ln(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(r,e)}}function Ln(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Bo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var a=!0,u=Do(r),s;!(s=u()).done;){var i=s.value;if(t(i[o])!==null){a=!1;break}}if(a)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Go(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Fr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uo(r,e){return qo(r)||zo(r,e)||Fr(r,e)||Ho()}function Ho(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fr(r,e){if(r){if(typeof r=="string")return In(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(r,e)}}function In(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function zo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,a,u;try{for(n=n.call(r);!(l=(a=n.next()).done)&&(t.push(a.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function qo(r){if(Array.isArray(r))return r}function Wo(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Uo(n,2);l[0];for(var o=l[1],a=o.column,u=o.row,s=new Array(u),i=0;i<u;){s[i]=new Array(a);for(var f=0;f<a;)s[i][f]=null,f++;i++}for(var c=Go(t),_;!(_=c()).done;){var g=_.value,k=g.row-1,T=g.column-1;T<a&&k<u&&(s[k][T]=g.value)}var O=e.rowMap;if(O)for(var S=0;S<s.length;)O[S]=S,S++;return s=No(Bo(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:O}),e.transformData&&(s=e.transformData(s)),s}function Vo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Xo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xo(r,e){if(r){if(typeof r=="string")return Pn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(r,e)}}function Pn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Mn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Ko(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mn(Object(n),!0).forEach(function(t){Jo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Jo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Yo(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Ko({sheet:1},n));var t=function(_){if(!r[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return r[_]},l=so(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?uo(t(l.sharedStrings),e):[],a=l.styles?ao(t(l.styles),e):{},u=oo(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var s=Zo(n.sheet,u.sheets);if(!s||!l.sheets[s])throw Qo(n.sheet,u.sheets);var i=Fo(t(l.sheets[s]),e,o,a,u,n),f=Wo(i,n);return n.properties?{data:f,properties:u}:f}function Zo(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Vo(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Qo(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Qt(r){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(r)}function Fn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function xo(r,e,n){return e&&Fn(r.prototype,e),n&&Fn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function es(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ts(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&yt(r,e)}function ns(r){var e=jr();return function(){var t=St(r),l;if(e){var o=St(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return rs(this,l)}}function rs(r,e){if(e&&(Qt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ls(r)}function ls(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function xt(r){var e=typeof Map=="function"?new Map:void 0;return xt=function(t){if(t===null||!os(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Et(t,arguments,St(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),yt(l,t)},xt(r)}function Et(r,e,n){return jr()?Et=Reflect.construct:Et=function(l,o,a){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),i=new s;return a&&yt(i,a.prototype),i},Et.apply(null,arguments)}function jr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function os(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function yt(r,e){return yt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},yt(r,e)}function St(r){return St=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},St(r)}var _e=function(r){ts(n,r);var e=ns(n);function n(t){var l;return es(this,n),l=e.call(this,"invalid"),l.reason=t,l}return xo(n)}(xt(Error));function ss(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new _e("not_a_number")}if(typeof r!="number")throw new _e("not_a_number");if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return r}function is(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return String(r)}throw new _e("not_a_string")}function as(r){if(typeof r=="boolean")return r;throw new _e("not_a_boolean")}function fs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new _e("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");var t=Pr(r,n);if(isNaN(t.valueOf()))throw new _e("out_of_bounds");return t}throw new _e("not_a_date")}function us(r,e){return ps(r)||$s(r,e)||Er(r,e)||cs()}function cs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $s(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,a,u;try{for(n=n.call(r);!(l=(a=n.next()).done)&&(t.push(a.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ps(r){if(Array.isArray(r))return r}function en(r){"@babel/helpers - typeof";return en=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(r)}function ms(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Er(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Er(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function En(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Nn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?En(Object(n),!0).forEach(function(t){_s(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function _s(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Dn={isColumnOriented:!1};function gs(r,e,n){n?n=Nn(Nn({},Dn),n):n=Dn;var t=n,l=t.isColumnOriented,o=t.rowMap,a=t.ignoreEmptyRows;vs(e),l&&(r=bs(r));for(var u=r[0],s=[],i=[],f=1;f<r.length;f++){var c=Nr(e,r[f],f,u,i,n);(c!==null||a===!1)&&s.push(c)}if(o)for(var _=ms(i),g;!(g=_()).done;){var k=g.value;k.row=o[k.row-1]+1}return{rows:s,errors:i}}function Nr(r,e,n,t,l,o){for(var a={},u=!0,s=function(){var _=f[i],g=r[_],k=en(g.type)==="object"&&!Array.isArray(g.type),T=e[t.indexOf(_)];T===void 0&&(T=null);var O=void 0,S=void 0,L=void 0;if(k)O=Nr(g.type,e,n,t,l,o);else if(T===null)O=null;else if(Array.isArray(g.type)){var M=!1,N=hs(T).map(function(E){var j=Rn(E,g,o);return j.error&&(O=E,S=j.error,L=j.reason),j.value!==null&&(M=!0),j.value});S||(O=M?N:null)}else{var P=Rn(T,g,o);S=P.error,L=P.reason,O=S?T:P.value}!S&&O===null&&g.required&&(S="required"),S?(S={error:S,row:n+1,column:_,value:O},L&&(S.reason=L),g.type&&(S.type=g.type),l.push(S)):(u&&O!==null&&(u=!1),(O!==null||o.includeNullValues)&&(a[g.prop]=O))},i=0,f=Object.keys(r);i<f.length;i++)s();return u?null:a}function Rn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=rt(r,e.parse):e.type?t=ds(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function rt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ds(r,e,n){switch(e){case String:return rt(r,is);case Number:return rt(r,ss);case Date:return rt(r,function(t){return fs(t,{properties:n.properties})});case Boolean:return rt(r,as);default:if(typeof e=="function")return rt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Dr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var a=Dr(r,'"',n+t+1);l+=a[0],t+=1+a[1]+1}else l+=o,t++}return[l,t]}function hs(r){for(var e=[],n=0;n<r.length;){var t=Dr(r,",",n),l=us(t,2),o=l[0],a=l[1];n+=a+1,e.push(o.trim())}return e}var bs=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function vs(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function tn(r){"@babel/helpers - typeof";return tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(r)}function Rr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],a=void 0;tn(o)==="object"&&(o=Object.keys(r[l])[0],a=Rr(r[l][o])),e[l]={prop:o},a&&(e[l].type=a)}return e}var ws=["schema","map"];function Bn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function jt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bn(Object(n),!0).forEach(function(t){ks(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ks(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ys(r,e){if(r==null)return{};var n=Ss(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Ss(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Ts(r,e,n){var t=n.schema,l=n.map,o=ys(n,ws);!t&&l&&(t=Rr(l));var a=Yo(r,e,jt(jt({},o),{},{properties:t||o.properties}));return t?gs(a.data,t,jt(jt({},o),{},{properties:a.properties})):a}function Os(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ql(r).then(function(n){return Ts(n,Ol,e)})}function As(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:l.authority_or_region,capital_scheme_id:l.capital_scheme_id,funding_programme:l.funding_programme});r.features=r.features.filter(t=>Cs(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.num_features++,t.properties.funding_programme=l.funding_programme,t.id=n++}return e}function Cs(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Ls(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Os(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Hr(l.lat_lon.split(",").map(parseFloat).reverse()),a=l;a.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:a,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Q={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Ne=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Is(r){let e,n,t,l,o;function a(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new kt({props:u}),W.push(()=>X(e,"value",a)),e.$on("change",r[2]),l=new nl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,i){b(e,s,i),p(s,t,i),b(l,s,i),o=!0},p(s,[i]){const f={};!n&&i&1&&(n=!0,f.value=s[0],K(()=>n=!1)),e.$set(f);const c={};i&2&&(c.rows=s[1]),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Ps(r,e,n){let t;Ee(r,ln,s=>n(4,t=s));let l="interventionType",o=bn("v1");function a(){let s;l=="interventionType"?(s=wr("v1"),n(1,o=bn("v1"))):(s=dr(["get","funding_programme"],{ATF2:Q.atf2,ATF3:Q.atf3,ATF4:Q.atf4},"grey"),n(1,o=[["ATF2",Q.atf2],["ATF3",Q.atf3],["ATF4",Q.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,a,u]}class Ms extends z{constructor(e){super(),q(this,e,Ps,Is,U,{})}}function Fs(r){let e;return{c(){e=w("Clear")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function js(r){let e,n,t,l,o,a;return t=new Jt({props:{$$slots:{default:[Fs]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=C("input"),n=A(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterText")},m(u,s){p(u,e,s),Dt(e,r[0]),p(u,n,s),b(t,u,s),l=!0,o||(a=wt(e,"input",r[12]),o=!0)},p(u,s){s&1&&e.value!==u[0]&&Dt(e,u[0]);const i={};s&65536&&(i.$$scope={dirty:s,ctx:u}),t.$set(i)},i(u){l||($(t.$$.fragment,u),l=!0)},o(u){d(t.$$.fragment,u),l=!1},d(u){u&&(m(e),m(n)),v(t,u),o=!1,a()}}}function Es(r){let e,n,t,l,o,a,u,s,i,f;function c(T){r[10](T)}let _={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&(_.value=r[3]),e=new kt({props:_}),W.push(()=>X(e,"value",c));function g(T){r[11](T)}let k={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(k.value=r[4]),l=new kt({props:k}),W.push(()=>X(l,"value",g)),u=new hr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[js]},$$scope:{ctx:r}}}),i=new Ms({}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment),a=A(),h(u.$$.fragment),s=A(),h(i.$$.fragment)},m(T,O){b(e,T,O),p(T,t,O),b(l,T,O),p(T,a,O),b(u,T,O),p(T,s,O),b(i,T,O),f=!0},p(T,O){const S={};O&32&&(S.choices=T[5]),!n&&O&8&&(n=!0,S.value=T[3],K(()=>n=!1)),e.$set(S);const L={};O&64&&(L.choices=T[6]),!o&&O&16&&(o=!0,L.value=T[4],K(()=>o=!1)),l.$set(L);const M={};O&65537&&(M.$$scope={dirty:O,ctx:T}),u.$set(M)},i(T){f||($(e.$$.fragment,T),$(l.$$.fragment,T),$(u.$$.fragment,T),$(i.$$.fragment,T),f=!0)},o(T){d(e.$$.fragment,T),d(l.$$.fragment,T),d(u.$$.fragment,T),d(i.$$.fragment,T),f=!1},d(T){T&&(m(t),m(a),m(s)),v(e,T),v(l,T),v(u,T),v(i,T)}}}function Ns(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",a,u,s=r[7].area.toLocaleString()+"",i,f,c=r[7].crossing.toLocaleString()+"",_,g,k=r[7].other.toLocaleString()+"",T,O;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),a=w(o),u=w(`
    routes, `),i=w(s),f=w(` areas,
    `),_=w(c),g=w(" crossings, "),T=w(k),O=w(`
    other)`)},m(S,L){p(S,e,L),p(S,t,L),p(S,l,L),p(S,a,L),p(S,u,L),p(S,i,L),p(S,f,L),p(S,_,L),p(S,g,L),p(S,T,L),p(S,O,L)},p(S,L){L&2&&n!==(n=S[1].size.toLocaleString()+"")&&R(t,n),L&128&&o!==(o=S[7].route.toLocaleString()+"")&&R(a,o),L&128&&s!==(s=S[7].area.toLocaleString()+"")&&R(i,s),L&128&&c!==(c=S[7].crossing.toLocaleString()+"")&&R(_,c),L&128&&k!==(k=S[7].other.toLocaleString()+"")&&R(T,k)},d(S){S&&(m(e),m(t),m(l),m(a),m(u),m(i),m(f),m(_),m(g),m(T),m(O))}}}function Ds(r){let e,n,t;function l(a){r[14](a)}let o={id:"show-schemes",$$slots:{default:[Ns]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new re({props:o}),W.push(()=>X(e,"checked",l)),{c(){h(e.$$.fragment)},m(a,u){b(e,a,u),t=!0},p(a,u){const s={};u&65666&&(s.$$scope={dirty:u,ctx:a}),!n&&u&4&&(n=!0,s.checked=a[2],K(()=>n=!1)),e.$set(s)},i(a){t||($(e.$$.fragment,a),t=!0)},o(a){d(e.$$.fragment,a),t=!1},d(a){v(e,a)}}}function Rs(r){let e,n,t,l;return e=new Le({props:{label:"Filters",$$slots:{default:[Es]},$$scope:{ctx:r}}}),t=new It({props:{small:!0,$$slots:{default:[Ds]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,a){b(e,o,a),p(o,n,a),b(t,o,a),l=!0},p(o,[a]){const u={};a&65657&&(u.$$scope={dirty:a,ctx:o}),e.$set(u);const s={};a&65670&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Bs(r,e,n){let{schemesGj:t}=e,{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:a=""}=e,{show:u=!0}=e,s=[],i="",f=[],c="",_={area:0,route:0,crossing:0,other:0};on(()=>{let M=new Set,N=new Set;for(let P of l.values())P.authority_or_region&&M.add(P.authority_or_region),P.funding_programme&&N.add(P.funding_programme);n(5,s=Array.from(M.entries())),s.sort(),n(6,f=Array.from(N.entries())),f.sort()});function g(M,N,P){let E=M.toLowerCase(),j=F=>{var B,x;if(E&&!((B=F.properties.name)!=null&&B.toLowerCase().includes(E))&&!((x=F.properties.description)!=null&&x.toLowerCase().includes(E)))return!1;if(N||P){let ae=l.get(F.properties.scheme_reference);if(N&&ae.authority_or_region!=N||P&&ae.funding_programme!=P)return!1}return!0};n(1,o=new Set(t.features.filter(j).map(F=>F.properties.scheme_reference))),n(7,_={area:0,route:0,crossing:0,other:0});let I=F=>{var B,x;return!(!o.has(F.properties.scheme_reference)||E&&!((B=F.properties.name)!=null&&B.toLowerCase().includes(E))&&!((x=F.properties.description)!=null&&x.toLowerCase().includes(E)))};for(let F of t.features)I(F)?(delete F.properties.hide_while_editing,n(7,_[F.properties.intervention_type]++,_)):F.properties.hide_while_editing=!0;n(8,t),n(7,_)}function k(M){i=M,n(3,i)}function T(M){c=M,n(4,c)}function O(){a=this.value,n(0,a)}const S=()=>n(0,a="");function L(M){u=M,n(2,u)}return r.$$set=M=>{"schemesGj"in M&&n(8,t=M.schemesGj),"schemes"in M&&n(9,l=M.schemes),"schemesToBeShown"in M&&n(1,o=M.schemesToBeShown),"filterText"in M&&n(0,a=M.filterText),"show"in M&&n(2,u=M.show)},r.$$.update=()=>{r.$$.dirty&25&&g(a,i,c)},[a,o,u,i,c,s,f,_,t,l,k,T,O,S,L]}class Gs extends z{constructor(e){super(),q(this,e,Bs,Rs,U,{schemesGj:8,schemes:9,schemesToBeShown:1,filterText:0,show:2})}}function Us(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hs(r){let e,n,t,l,o;return t=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Us]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(a,u){p(a,e,u),y(e,n),b(t,e,null),y(e,l),o=!0},p(a,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:a}),t.$set(s)},i(a){o||($(t.$$.fragment,a),o=!0)},o(a){d(t.$$.fragment,a),o=!1},d(a){a&&m(e),v(t)}}}class Fe extends z{constructor(e){super(),q(this,e,null,Hs,U,{})}}function Gn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Un(r,e,n){const t=r.slice();return t[5]=e[n],t}function Hn(r){let e,n;return{c(){e=C("span"),n=w(`Â 
    `),Se(e,"background",r[5]),Se(e,"width","100%"),Se(e,"border","1px solid black")},m(t,l){p(t,e,l),y(e,n)},p(t,l){l&1&&Se(e,"background",t[5])},d(t){t&&m(e)}}}function zn(r){let e,n=r[2]+"",t;return{c(){e=C("span"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&R(t,n)},d(l){l&&m(e)}}}function zs(r){let e,n,t,l=ze(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Hn(Un(r,l,s));let a=ze(r[1]),u=[];for(let s=0;s<a.length;s+=1)u[s]=zn(Gn(r,a,s));return{c(){e=C("div");for(let s=0;s<o.length;s+=1)o[s].c();n=A(),t=C("div");for(let s=0;s<u.length;s+=1)u[s].c();Se(e,"display","flex"),Se(t,"display","flex"),Se(t,"justify-content","space-between")},m(s,i){p(s,e,i);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);p(s,n,i),p(s,t,i);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[i]){if(i&1){l=ze(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Un(s,l,f);o[f]?o[f].p(c,i):(o[f]=Hn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(i&2){a=ze(s[1]);let f;for(f=0;f<a.length;f+=1){const c=Gn(s,a,f);u[f]?u[f].p(c,i):(u[f]=zn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=a.length}},i:ee,o:ee,d(s){s&&(m(e),m(n),m(t)),Rt(o,s),Rt(u,s)}}}function qs(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Re extends z{constructor(e){super(),q(this,e,qs,zs,U,{colorScale:0,limits:1})}}function qn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Ws(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Vs(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Xs(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ks(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Js(r){let e,n,t,l,o,a,u,s,i,f,c,_;return t=new H({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Vs]},$$scope:{ctx:r}}}),o=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Xs]},$$scope:{ctx:r}}}),f=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ks]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),a=w("."),u=A(),s=C("p"),i=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(g,k){p(g,e,k),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,a),p(g,u,k),p(g,s,k),y(s,i),b(f,s,null),y(s,c),_=!0},p(g,k){const T={};k&65536&&(T.$$scope={dirty:k,ctx:g}),t.$set(T);const O={};k&65536&&(O.$$scope={dirty:k,ctx:g}),o.$set(O);const S={};k&65536&&(S.$$scope={dirty:k,ctx:g}),f.$set(S)},i(g){_||($(t.$$.fragment,g),$(o.$$.fragment,g),$(f.$$.fragment,g),_=!0)},o(g){d(t.$$.fragment,g),d(o.$$.fragment,g),d(f.$$.fragment,g),_=!1},d(g){g&&(m(e),m(u),m(s)),v(t),v(o),v(f)}}}function Ys(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Js]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&65536&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Wn(r){let e,n;return e=new Re({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zs(r){let e;return{c(){e=w("Average cars per household")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qs(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xs(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ei(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ti(r){let e,n,t,l,o,a,u,s,i,f,c,_,g,k;return o=new H({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Qs]},$$scope:{ctx:r}}}),u=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[xs]},$$scope:{ctx:r}}}),_=new H({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ei]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=A(),t=C("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),a=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),i=A(),f=C("p"),c=w("License: "),h(_.$$.fragment),g=w(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(T,O){p(T,e,O),p(T,n,O),p(T,t,O),y(t,l),b(o,t,null),y(t,a),b(u,t,null),y(t,s),p(T,i,O),p(T,f,O),y(f,c),b(_,f,null),y(f,g),k=!0},p(T,O){const S={};O&65536&&(S.$$scope={dirty:O,ctx:T}),o.$set(S);const L={};O&65536&&(L.$$scope={dirty:O,ctx:T}),u.$set(L);const M={};O&65536&&(M.$$scope={dirty:O,ctx:T}),_.$set(M)},i(T){k||($(o.$$.fragment,T),$(u.$$.fragment,T),$(_.$$.fragment,T),k=!0)},o(T){d(o.$$.fragment,T),d(u.$$.fragment,T),d(_.$$.fragment,T),k=!1},d(T){T&&(m(e),m(n),m(t),m(i),m(f)),v(o),v(u),v(_)}}}function ni(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ti]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&65536&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Vn(r){let e,n;return e=new Re({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ri(r){let e;return{c(){e=w("Population density")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function li(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function oi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function si(r){let e,n,t,l,o,a,u,s,i;return t=new H({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[li]},$$scope:{ctx:r}}}),o=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[oi]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=C("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),a=w("."),u=A(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,a),p(f,u,c),b(s,f,c),i=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),i=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function ii(r){let e,n,t;return n=new oe({props:{$$slots:{default:[si]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&65536&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Xn(r){let e,n,t,l;return t=new Re({props:{colorScale:r[4],limits:r[6]().map(_i)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",n=A(),h(t.$$.fragment)},m(o,a){p(o,e,a),p(o,n,a),b(t,o,a),l=!0},p:ee,i(o){l||($(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),v(t,o)}}}function ai(r){let e,n,t,l=r[15].toLocaleString()+"",o,a,u=r[14]+"",s;return{c(){e=C("p"),n=w("There are "),t=C("b"),o=w(l),a=w(`
          people per square kilometre in `),s=w(u)},m(i,f){p(i,e,f),y(e,n),y(e,t),y(t,o),y(e,a),y(e,s)},p(i,f){f&8200&&l!==(l=i[15].toLocaleString()+"")&&R(o,l),f&8192&&u!==(u=i[14]+"")&&R(s,u)},d(i){i&&m(e)}}}function fi(r){let e,n,t=r[14]+"",l,o,a,u=r[15]+"",s,i;return{c(){e=C("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),a=C("b"),s=w(u),i=w(`
          cars`)},m(f,c){p(f,e,c),y(e,n),y(e,l),y(e,o),y(e,a),y(a,s),y(e,i)},p(f,c){c&8192&&t!==(t=f[14]+"")&&R(l,t),c&8200&&u!==(u=f[15]+"")&&R(s,u)},d(f){f&&m(e)}}}function ui(r){let e,n,t=r[15]+"",l,o,a,u=r[14]+"",s,i;return{c(){e=C("p"),n=C("b"),l=w(t),o=w("%"),a=w(`
          of households in `),s=w(u),i=w(" have 1 or more cars")},m(f,c){p(f,e,c),y(e,n),y(n,l),y(n,o),y(e,a),y(e,s),y(e,i)},p(f,c){c&8200&&t!==(t=f[15]+"")&&R(l,t),c&8192&&u!==(u=f[14]+"")&&R(s,u)},d(f){f&&m(e)}}}function ci(r){qn(r);let e;function n(o,a){return o[3]=="percent_households_with_car"?ui:o[3]=="average_cars_per_household"?fi:ai}let t=n(r),l=t(r);return{c(){l.c(),e=be()},m(o,a){l.m(o,a),p(o,e,a)},p(o,a){qn(o),t===(t=n(o))&&l?l.p(o,a):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function $i(r){let e,n;return e=new le({props:{$$slots:{default:[ci,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pi(r){let e,n,t,l;const o=[D(Ke),{sourceLayer:Ke},{paint:{"fill-color":$e(["get",r[3]],r[6](),r[4]),"fill-opacity":V(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let a={$$slots:{default:[$i]},$$scope:{ctx:r}};for(let i=0;i<o.length;i+=1)a=J(a,o[i]);e=new De({props:a}),e.$on("click",r[5]);const u=[D(`${Ke}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let i=0;i<u.length;i+=1)s=J(s,u[i]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(i,f){b(e,i,f),p(i,n,f),b(t,i,f),l=!0},p(i,f){const c=f&88?Y(o,[f&0&&te(D(Ke)),f&0&&{sourceLayer:Ke},f&88&&{paint:{"fill-color":$e(["get",i[3]],i[6](),i[4]),"fill-opacity":V(.5,.7)}},f&8&&{layout:{visibility:i[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&8?Y(u,[f&0&&te(D(`${Ke}-outline`)),u[1],f&8&&{layout:{visibility:i[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(i){l||($(e.$$.fragment,i),$(t.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),l=!1},d(i){i&&m(n),v(e,i),v(t,i)}}}function mi(r){let e,n,t,l,o,a,u,s,i,f,c,_,g,k;function T(I){r[7](I)}let O={id:"percent_households_with_car",$$slots:{right:[Ys],default:[Ws]},$$scope:{ctx:r}};r[0]!==void 0&&(O.checked=r[0]),e=new re({props:O}),W.push(()=>X(e,"checked",T)),e.$on("change",r[8]);let S=r[3]=="percent_households_with_car"&&Wn(r);function L(I){r[9](I)}let M={id:"average_cars_per_household",$$slots:{right:[ni],default:[Zs]},$$scope:{ctx:r}};r[1]!==void 0&&(M.checked=r[1]),o=new re({props:M}),W.push(()=>X(o,"checked",L)),o.$on("change",r[10]);let N=r[3]=="average_cars_per_household"&&Vn(r);function P(I){r[11](I)}let E={id:"population_density",$$slots:{right:[ii],default:[ri]},$$scope:{ctx:r}};r[2]!==void 0&&(E.checked=r[2]),i=new re({props:E}),W.push(()=>X(i,"checked",P)),i.$on("change",r[12]);let j=r[3]=="population_density"&&Xn(r);return g=new ce({props:{url:`pmtiles://${fe()}/v1/${Ke}.pmtiles`,$$slots:{default:[pi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),S&&S.c(),l=A(),h(o.$$.fragment),u=A(),N&&N.c(),s=A(),h(i.$$.fragment),c=A(),j&&j.c(),_=A(),h(g.$$.fragment)},m(I,F){b(e,I,F),p(I,t,F),S&&S.m(I,F),p(I,l,F),b(o,I,F),p(I,u,F),N&&N.m(I,F),p(I,s,F),b(i,I,F),p(I,c,F),j&&j.m(I,F),p(I,_,F),b(g,I,F),k=!0},p(I,[F]){const B={};F&65536&&(B.$$scope={dirty:F,ctx:I}),!n&&F&1&&(n=!0,B.checked=I[0],K(()=>n=!1)),e.$set(B),I[3]=="percent_households_with_car"?S?(S.p(I,F),F&8&&$(S,1)):(S=Wn(I),S.c(),$(S,1),S.m(l.parentNode,l)):S&&(se(),d(S,1,1,()=>{S=null}),ie());const x={};F&65536&&(x.$$scope={dirty:F,ctx:I}),!a&&F&2&&(a=!0,x.checked=I[1],K(()=>a=!1)),o.$set(x),I[3]=="average_cars_per_household"?N?(N.p(I,F),F&8&&$(N,1)):(N=Vn(I),N.c(),$(N,1),N.m(s.parentNode,s)):N&&(se(),d(N,1,1,()=>{N=null}),ie());const ae={};F&65536&&(ae.$$scope={dirty:F,ctx:I}),!f&&F&4&&(f=!0,ae.checked=I[2],K(()=>f=!1)),i.$set(ae),I[3]=="population_density"?j?(j.p(I,F),F&8&&$(j,1)):(j=Xn(I),j.c(),$(j,1),j.m(_.parentNode,_)):j&&(se(),d(j,1,1,()=>{j=null}),ie());const Z={};F&65544&&(Z.$$scope={dirty:F,ctx:I}),g.$set(Z)},i(I){k||($(e.$$.fragment,I),$(S),$(o.$$.fragment,I),$(N),$(i.$$.fragment,I),$(j),$(g.$$.fragment,I),k=!0)},o(I){d(e.$$.fragment,I),d(S),d(o.$$.fragment,I),d(N),d(i.$$.fragment,I),d(j),d(g.$$.fragment,I),k=!1},d(I){I&&(m(t),m(l),m(u),m(s),m(c),m(_)),v(e,I),S&&S.d(I),v(o,I),N&&N.d(I),v(i,I),j&&j.d(I),v(g,I)}}}let Ke="census_output_areas";const _i=r=>r.toLocaleString();function gi(r,e,n){let t=Q.sequential_low_to_high,l=!1,o=!1,a=!1,u="";function s(O){let S=O.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${S}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${S}`,"_blank")}function i(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(O){l=O,n(0,l)}const c=()=>{n(1,o=!1),n(2,a=!1)};function _(O){o=O,n(1,o)}const g=()=>{n(0,l=!1),n(2,a=!1)};function k(O){a=O,n(2,a)}const T=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):a?n(3,u="population_density"):n(3,u=""))},[l,o,a,u,t,s,i,f,c,_,g,k,T]}class di extends z{constructor(e){super(),q(this,e,gi,mi,U,{})}}function hi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function bi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function vi(r){let e,n,t,l,o,a,u;return t=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[bi]},$$scope:{ctx:r}}}),a=new Fe({}),{c(){e=C("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=A(),h(a.$$.fragment)},m(s,i){p(s,e,i),y(e,n),b(t,e,null),y(e,l),p(s,o,i),b(a,s,i),u=!0},p(s,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(a.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(a.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(a,s)}}}function wi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[vi]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&16&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ki(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&m(e)}}}function yi(r){let e,n;return e=new le({props:{$$slots:{default:[ki,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Si(r){let e,n,t,l;const o=[D(lt),{paint:{"fill-color":r[1],"fill-opacity":V(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let a={$$slots:{default:[yi]},$$scope:{ctx:r}};for(let i=0;i<o.length;i+=1)a=J(a,o[i]);e=new De({props:a}),e.$on("click",Oi);const u=[D(`${lt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let i=0;i<u.length;i+=1)s=J(s,u[i]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(i,f){b(e,i,f),p(i,n,f),b(t,i,f),l=!0},p(i,f){const c=f&3?Y(o,[f&0&&te(D(lt)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":V(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?Y(u,[f&0&&te(D(`${lt}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){l||($(e.$$.fragment,i),$(t.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),l=!1},d(i){i&&m(n),v(e,i),v(t,i)}}}function Ti(r){let e,n,t,l,o;function a(s){r[2](s)}let u={id:lt,$$slots:{right:[wi],default:[hi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),W.push(()=>X(e,"checked",a)),l=new Lt({props:{data:`${fe()}/v1/${lt}.geojson`,$$slots:{default:[Si]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,i){b(e,s,i),p(s,t,i),b(l,s,i),o=!0},p(s,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),!n&&i&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let lt="combined_authorities";function Oi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ai(r,e,n){let t=Q.combined_authorities,l=!1;function o(a){l=a,n(0,l)}return[l,t,o]}class Ci extends z{constructor(e){super(),q(this,e,Ai,Ti,U,{})}}function Li(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ii(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pi(r){let e;return{c(){e=w(`here
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Mi(r){let e,n,t,l,o,a,u,s,i;return t=new H({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Ii]},$$scope:{ctx:r}}}),o=new H({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Pi]},$$scope:{ctx:r}}}),s=new Fe({}),{c(){e=C("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),a=w("."),u=A(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,a),p(f,u,c),b(s,f,c),i=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),i=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function Fi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Mi]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&32&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Kn(r){let e,n;return e=new Re({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ji(r){let e,n=r[4].LSOA11CD+"",t,l,o,a=r[4].score+"",u,s,i,f,c,_=r[4].rank.toLocaleString()+"",g,k;return{c(){e=C("p"),t=w(n),l=w(` has an IMD score of
        `),o=C("b"),u=w(a),s=A(),i=C("p"),f=w("Rank: "),c=C("b"),g=w(_),k=w(`
        / 32,844 LSOAs`)},m(T,O){p(T,e,O),y(e,t),y(e,l),y(e,o),y(o,u),p(T,s,O),p(T,i,O),y(i,f),y(i,c),y(c,g),y(i,k)},p(T,O){O&16&&n!==(n=T[4].LSOA11CD+"")&&R(t,n),O&16&&a!==(a=T[4].score+"")&&R(u,a),O&16&&_!==(_=T[4].rank.toLocaleString()+"")&&R(g,_)},d(T){T&&(m(e),m(s),m(i))}}}function Ei(r){let e,n;return e=new le({props:{$$slots:{default:[ji,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ni(r){let e,n,t,l;const o=[D(Ue),{sourceLayer:Ue},{paint:{"fill-color":$e(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":V(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let a={$$slots:{default:[Ei]},$$scope:{ctx:r}};for(let i=0;i<o.length;i+=1)a=J(a,o[i]);e=new De({props:a});const u=[D(`${Ue}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let i=0;i<u.length;i+=1)s=J(s,u[i]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(i,f){b(e,i,f),p(i,n,f),b(t,i,f),l=!0},p(i,f){const c=f&7?Y(o,[f&0&&te(D(Ue)),f&0&&{sourceLayer:Ue},f&6&&{paint:{"fill-color":$e(["-",10,["get","decile"]],i[2],i[1]),"fill-opacity":V(.5,.7)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&1?Y(u,[f&0&&te(D(`${Ue}-outline`)),u[1],f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){l||($(e.$$.fragment,i),$(t.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),l=!1},d(i){i&&m(n),v(e,i),v(t,i)}}}function Di(r){let e,n,t,l,o,a;function u(f){r[3](f)}let s={id:Ue,$$slots:{right:[Fi],default:[Li]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new re({props:s}),W.push(()=>X(e,"checked",u));let i=r[0]&&Kn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Ue}.pmtiles`,$$slots:{default:[Ni]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),i&&i.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),i&&i.m(f,c),p(f,l,c),b(o,f,c),a=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&$(i,1)):(i=Kn(f),i.c(),$(i,1),i.m(l.parentNode,l)):i&&(se(),d(i,1,1,()=>{i=null}),ie());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(e.$$.fragment,f),$(i),$(o.$$.fragment,f),a=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),a=!1},d(f){f&&(m(t),m(l)),v(e,f),i&&i.d(f),v(o,f)}}}let Ue="imd";function Ri(r,e,n){let t=Q.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function a(u){o=u,n(0,o)}return[o,t,l,a]}class Bi extends z{constructor(e){super(),q(this,e,Ri,Di,U,{})}}function Gi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ui(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hi(r){let e,n,t,l,o,a,u;return t=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),a=new Fe({}),{c(){e=C("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=A(),h(a.$$.fragment)},m(s,i){p(s,e,i),y(e,n),b(t,e,null),y(e,l),p(s,o,i),b(a,s,i),u=!0},p(s,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(a.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(a.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(a,s)}}}function zi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Hi]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&16&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function qi(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&m(e)}}}function Wi(r){let e,n;return e=new le({props:{$$slots:{default:[qi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vi(r){let e,n,t,l;const o=[D(ot),{paint:{"fill-color":r[1],"fill-opacity":V(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let a={$$slots:{default:[Wi]},$$scope:{ctx:r}};for(let i=0;i<o.length;i+=1)a=J(a,o[i]);e=new De({props:a}),e.$on("click",Ki);const u=[D(`${ot}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let i=0;i<u.length;i+=1)s=J(s,u[i]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(i,f){b(e,i,f),p(i,n,f),b(t,i,f),l=!0},p(i,f){const c=f&3?Y(o,[f&0&&te(D(ot)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":V(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?Y(u,[f&0&&te(D(`${ot}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){l||($(e.$$.fragment,i),$(t.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),l=!1},d(i){i&&m(n),v(e,i),v(t,i)}}}function Xi(r){let e,n,t,l,o;function a(s){r[2](s)}let u={id:ot,$$slots:{right:[zi],default:[Gi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),W.push(()=>X(e,"checked",a)),l=new Lt({props:{data:`${fe()}/v1/${ot}.geojson`,$$slots:{default:[Vi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,i){b(e,s,i),p(s,t,i),b(l,s,i),o=!0},p(s,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),!n&&i&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ot="local_authority_districts";function Ki(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Ji(r,e,n){let t=Q.local_authority_districts,l=!1;function o(a){l=a,n(0,l)}return[l,t,o]}class Yi extends z{constructor(e){super(),q(this,e,Ji,Xi,U,{})}}function Zi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Qi(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xi(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ea(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ta(r){let e;return{c(){e=w("this map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function na(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ra(r){let e,n,t,l,o,a,u,s,i,f,c,_,g,k,T,O,S,L,M,N,P,E;return t=new H({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Qi]},$$scope:{ctx:r}}}),o=new H({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[xi]},$$scope:{ctx:r}}}),u=new H({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ea]},$$scope:{ctx:r}}}),g=new H({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ta]},$$scope:{ctx:r}}}),L=new H({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[na]},$$scope:{ctx:r}}}),P=new Fe({}),{c(){e=C("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),a=w("y, or "),h(u.$$.fragment),s=w("."),i=A(),f=C("p"),c=C("strong"),_=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(g.$$.fragment),k=w(" to get more details."),T=A(),O=C("p"),S=w("Data from ONS Geography via "),h(L.$$.fragment),M=w(", as of November 2022."),N=A(),h(P.$$.fragment)},m(j,I){p(j,e,I),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,a),b(u,e,null),y(e,s),p(j,i,I),p(j,f,I),y(f,c),y(c,_),b(g,c,null),y(c,k),p(j,T,I),p(j,O,I),y(O,S),b(L,O,null),y(O,M),p(j,N,I),b(P,j,I),E=!0},p(j,I){const F={};I&16&&(F.$$scope={dirty:I,ctx:j}),t.$set(F);const B={};I&16&&(B.$$scope={dirty:I,ctx:j}),o.$set(B);const x={};I&16&&(x.$$scope={dirty:I,ctx:j}),u.$set(x);const ae={};I&16&&(ae.$$scope={dirty:I,ctx:j}),g.$set(ae);const Z={};I&16&&(Z.$$scope={dirty:I,ctx:j}),L.$set(Z)},i(j){E||($(t.$$.fragment,j),$(o.$$.fragment,j),$(u.$$.fragment,j),$(g.$$.fragment,j),$(L.$$.fragment,j),$(P.$$.fragment,j),E=!0)},o(j){d(t.$$.fragment,j),d(o.$$.fragment,j),d(u.$$.fragment,j),d(g.$$.fragment,j),d(L.$$.fragment,j),d(P.$$.fragment,j),E=!1},d(j){j&&(m(e),m(i),m(f),m(T),m(O),m(N)),v(t),v(o),v(u),v(g),v(L),v(P,j)}}}function la(r){let e,n,t;return n=new oe({props:{$$slots:{default:[ra]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&16&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function oa(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&m(e)}}}function sa(r){let e,n;return e=new le({props:{$$slots:{default:[oa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ia(r){let e,n,t,l;const o=[D(Oe),{sourceLayer:Oe},{paint:{"fill-color":r[1],"fill-opacity":V(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let a={$$slots:{default:[sa]},$$scope:{ctx:r}};for(let i=0;i<o.length;i+=1)a=J(a,o[i]);e=new De({props:a});const u=[D(`${Oe}-outline`),{sourceLayer:Oe},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let i=0;i<u.length;i+=1)s=J(s,u[i]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(i,f){b(e,i,f),p(i,n,f),b(t,i,f),l=!0},p(i,f){const c=f&3?Y(o,[f&0&&te(D(Oe)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"fill-color":i[1],"fill-opacity":V(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?Y(u,[f&0&&te(D(`${Oe}-outline`)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){l||($(e.$$.fragment,i),$(t.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),l=!1},d(i){i&&m(n),v(e,i),v(t,i)}}}function aa(r){let e,n,t,l,o;function a(s){r[2](s)}let u={id:Oe,$$slots:{right:[la],default:[Zi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),W.push(()=>X(e,"checked",a)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Oe}.pmtiles`,$$slots:{default:[ia]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,i){b(e,s,i),p(s,t,i),b(l,s,i),o=!0},p(s,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),!n&&i&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Oe="local_planning_authorities";function fa(r,e,n){let t=Q.local_planning_authorities,l=!1;function o(a){l=a,n(0,l)}return[l,t,o]}class ua extends z{constructor(e){super(),q(this,e,fa,aa,U,{})}}function ca(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function $a(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function pa(r){let e,n,t,l,o,a,u;return t=new H({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[$a]},$$scope:{ctx:r}}}),a=new Fe({}),{c(){e=C("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=A(),h(a.$$.fragment)},m(s,i){p(s,e,i),y(e,n),b(t,e,null),y(e,l),p(s,o,i),b(a,s,i),u=!0},p(s,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(a.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(a.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(a,s)}}}function ma(r){let e,n,t;return n=new oe({props:{$$slots:{default:[pa]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&16&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function _a(r){let e,n=r[3].Name+"",t;return{c(){e=C("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&R(t,n)},d(l){l&&m(e)}}}function ga(r){let e,n;return e=new le({props:{$$slots:{default:[_a,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function da(r){let e,n,t,l;const o=[D(Ae),{sourceLayer:Ae},{paint:{"fill-color":r[1],"fill-opacity":V(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let a={$$slots:{default:[ga]},$$scope:{ctx:r}};for(let i=0;i<o.length;i+=1)a=J(a,o[i]);e=new De({props:a}),e.$on("click",ba);const u=[D(`${Ae}-outline`),{sourceLayer:Ae},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let i=0;i<u.length;i+=1)s=J(s,u[i]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(i,f){b(e,i,f),p(i,n,f),b(t,i,f),l=!0},p(i,f){const c=f&3?Y(o,[f&0&&te(D(Ae)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"fill-color":i[1],"fill-opacity":V(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?Y(u,[f&0&&te(D(`${Ae}-outline`)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"line-color":i[1],"line-width":5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){l||($(e.$$.fragment,i),$(t.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),l=!1},d(i){i&&m(n),v(e,i),v(t,i)}}}function ha(r){let e,n,t,l,o;function a(s){r[2](s)}let u={id:Ae,$$slots:{right:[ma],default:[ca]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),W.push(()=>X(e,"checked",a)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ae}.pmtiles`,$$slots:{default:[da]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,i){b(e,s,i),p(s,t,i),b(l,s,i),o=!0},p(s,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),!n&&i&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ae="parliamentary_constituencies";function ba(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function va(r,e,n){let t=Q.parliamentary_constituencies,l=!1;function o(a){l=a,n(0,l)}return[l,t,o]}class wa extends z{constructor(e){super(),q(this,e,va,ha,U,{})}}function ka(r){let e;return{c(){e=w("Pollution")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ya(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Sa(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ta(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Oa(r){let e,n,t,l,o,a,u,s,i,f,c,_,g,k,T,O;return t=new H({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[ya]},$$scope:{ctx:r}}}),f=new H({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Sa]},$$scope:{ctx:r}}}),_=new H({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Ta]},$$scope:{ctx:r}}}),T=new Fe({}),{c(){e=C("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        Âµgm
        `),o=C("sup"),o.textContent="3",a=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=A(),s=C("p"),i=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(_.$$.fragment),g=w("."),k=A(),h(T.$$.fragment)},m(S,L){p(S,e,L),y(e,n),b(t,e,null),y(e,l),y(e,o),y(e,a),p(S,u,L),p(S,s,L),y(s,i),b(f,s,null),y(s,c),b(_,s,null),y(s,g),p(S,k,L),b(T,S,L),O=!0},p(S,L){const M={};L&2048&&(M.$$scope={dirty:L,ctx:S}),t.$set(M);const N={};L&2048&&(N.$$scope={dirty:L,ctx:S}),f.$set(N);const P={};L&2048&&(P.$$scope={dirty:L,ctx:S}),_.$set(P)},i(S){O||($(t.$$.fragment,S),$(f.$$.fragment,S),$(_.$$.fragment,S),$(T.$$.fragment,S),O=!0)},o(S){d(t.$$.fragment,S),d(f.$$.fragment,S),d(_.$$.fragment,S),d(T.$$.fragment,S),O=!1},d(S){S&&(m(e),m(u),m(s),m(k)),v(t),v(f),v(_),v(T,S)}}}function Aa(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Oa]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&2048&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Jn(r){let e,n,t,l,o=r[3](r[0])+"",a,u,s,i,f,c,_,g,k,T,O,S,L;function M(I){r[7](I)}let N={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(N.value=r[0]),e=new kt({props:N}),W.push(()=>X(e,"value",M));const P=[La,Ca],E=[];function j(I,F){return I[0]=="Noise"?0:1}return g=j(r),k=E[g]=P[g](r),{c(){h(e.$$.fragment),t=A(),l=C("p"),a=w(o),u=A(),s=C("div"),i=C("label"),f=w(`Opacity
      `),c=C("input"),_=A(),k.c(),T=be(),G(c,"type","range"),G(c,"min","0"),G(c,"max","100")},m(I,F){b(e,I,F),p(I,t,F),p(I,l,F),y(l,a),p(I,u,F),p(I,s,F),y(s,i),y(i,f),y(i,c),Dt(c,r[2]),p(I,_,F),E[g].m(I,F),p(I,T,F),O=!0,S||(L=[wt(c,"change",r[8]),wt(c,"input",r[8])],S=!0)},p(I,F){const B={};!n&&F&1&&(n=!0,B.value=I[0],K(()=>n=!1)),e.$set(B),(!O||F&1)&&o!==(o=I[3](I[0])+"")&&R(a,o),F&4&&Dt(c,I[2]);let x=g;g=j(I),g===x?E[g].p(I,F):(se(),d(E[x],1,1,()=>{E[x]=null}),ie(),k=E[g],k?k.p(I,F):(k=E[g]=P[g](I),k.c()),$(k,1),k.m(T.parentNode,T))},i(I){O||($(e.$$.fragment,I),$(k),O=!0)},o(I){d(e.$$.fragment,I),d(k),O=!1},d(I){I&&(m(t),m(l),m(u),m(s),m(_),m(T)),v(e,I),E[g].d(I),S=!1,zr(L)}}}function Ca(r){let e,n,t;return{c(){e=C("img"),pn(e.src,n=r[5](r[0]))||G(e,"src",n),G(e,"width",150),G(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){p(l,e,o)},p(l,o){o&1&&!pn(e.src,n=l[5](l[0]))&&G(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&G(e,"alt",t)},i:ee,o:ee,d(l){l&&m(e)}}}function La(r){let e,n;return e=new Re({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ia(r){let e,n;const t=[D("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new _l({props:l}),{c(){h(e.$$.fragment)},m(o,a){b(e,o,a),n=!0},p(o,a){const u=a&6?Y(t,[t[0],a&4&&{paint:{"raster-opacity":o[2]/100}},a&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Pa(r){let e,n,t,l,o,a;function u(f){r[6](f)}let s={id:"pollution",$$slots:{right:[Aa],default:[ka]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new re({props:s}),W.push(()=>X(e,"checked",u));let i=r[1]&&Jn(r);return o=new hl({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),i&&i.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),i&&i.m(f,c),p(f,l,c),b(o,f,c),a=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],K(()=>n=!1)),e.$set(_),f[1]?i?(i.p(f,c),c&2&&$(i,1)):(i=Jn(f),i.c(),$(i,1),i.m(l.parentNode,l)):i&&(se(),d(i,1,1,()=>{i=null}),ie());const g={};c&1&&(g.tiles=[f[4](f[0])]),c&2054&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(e.$$.fragment,f),$(i),$(o.$$.fragment,f),a=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),a=!1},d(f){f&&(m(t),m(l)),v(e,f),i&&i.d(f),v(o,f)}}}function Ma(r,e,n){let t,l=!1,o=50,a="PM25_viridis";function u(){return a=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${a}/MapServer/WMSServer`}function s(k){return t[1]}function i(k){let T=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${T}`}function f(k){let T=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${T}`}function c(k){l=k,n(1,l)}function _(k){a=k,n(0,a)}function g(){o=qr(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[a])},[a,l,o,s,i,f,c,_,g]}class Fa extends z{constructor(e){super(),q(this,e,Ma,Pa,U,{})}}function ja(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ea(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Na(r){let e,n,t,l,o,a,u;return t=new H({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ea]},$$scope:{ctx:r}}}),a=new Fe({}),{c(){e=C("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=A(),h(a.$$.fragment)},m(s,i){p(s,e,i),y(e,n),b(t,e,null),y(e,l),p(s,o,i),b(a,s,i),u=!0},p(s,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(a.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(a.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(a,s)}}}function Da(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Na]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&16&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Ra(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&m(e)}}}function Ba(r){let e,n;return e=new le({props:{$$slots:{default:[Ra,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ga(r){let e,n,t,l;const o=[D(Ce),{sourceLayer:Ce},{paint:{"fill-color":r[1],"fill-opacity":V(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let a={$$slots:{default:[Ba]},$$scope:{ctx:r}};for(let i=0;i<o.length;i+=1)a=J(a,o[i]);e=new De({props:a}),e.$on("click",Ha);const u=[D(`${Ce}-outline`),{sourceLayer:Ce},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let i=0;i<u.length;i+=1)s=J(s,u[i]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(i,f){b(e,i,f),p(i,n,f),b(t,i,f),l=!0},p(i,f){const c=f&3?Y(o,[f&0&&te(D(Ce)),f&0&&{sourceLayer:Ce},f&2&&{paint:{"fill-color":i[1],"fill-opacity":V(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const _=f&3?Y(u,[f&0&&te(D(`${Ce}-outline`)),f&0&&{sourceLayer:Ce},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(_)},i(i){l||($(e.$$.fragment,i),$(t.$$.fragment,i),l=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),l=!1},d(i){i&&m(n),v(e,i),v(t,i)}}}function Ua(r){let e,n,t,l,o;function a(s){r[2](s)}let u={id:Ce,$$slots:{right:[Da],default:[ja]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),W.push(()=>X(e,"checked",a)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ce}.pmtiles`,$$slots:{default:[Ga]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,i){b(e,s,i),p(s,t,i),b(l,s,i),o=!0},p(s,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),!n&&i&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ce="wards";function Ha(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function za(r,e,n){let t=Q.wards,l=!1;function o(a){l=a,n(0,l)}return[l,t,o]}class qa extends z{constructor(e){super(),q(this,e,za,Ua,U,{})}}function Wa(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Va(r){let e,n,t,l;return t=new H({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Wa]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=w("License: "),h(t.$$.fragment)},m(o,a){p(o,e,a),y(e,n),b(t,e,null),l=!0},p(o,[a]){const u={};a&1&&(u.$$scope={dirty:a,ctx:o}),t.$set(u)},i(o){l||($(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&m(e),v(t)}}}class We extends z{constructor(e){super(),q(this,e,null,Va,U,{})}}function Xa(r){let e,n,t;return e=new ge({props:{color:Q.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ka(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ja(r){let e,n,t,l,o,a,u,s,i;return o=new H({props:{href:"https://gtfs.org",$$slots:{default:[Ka]},$$scope:{ctx:r}}}),s=new We({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=A(),t=C("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),a=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=A(),h(s.$$.fragment)},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),y(t,l),b(o,t,null),y(t,a),p(f,u,c),b(s,f,c),i=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||($(o.$$.fragment,f),$(s.$$.fragment,f),i=!0)},o(f){d(o.$$.fragment,f),d(s.$$.fragment,f),i=!1},d(f){f&&(m(e),m(n),m(t),m(u)),v(o),v(s,f)}}}function Ya(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ja]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&8&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Za(r){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qa(r){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xa(r){let e;function n(o,a){return o[2].has_bus_lane?Qa:Za}let t=n(r),l=t(r);return{c(){l.c(),e=be()},m(o,a){l.m(o,a),p(o,e,a)},p(o,a){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function ef(r){let e,n;return e=new le({props:{$$slots:{default:[xa,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tf(r){let e,n;const t=[D(st),{sourceLayer:st},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Q.bus_route_with_lane,Q.bus_route_without_lane],"line-width":5,"line-opacity":V(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[ef]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,a){b(e,o,a),n=!0},p(o,a){const u=a&1?Y(t,[a&0&&te(D(st)),a&0&&{sourceLayer:st},t[2],a&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};a&8&&(u.$$scope={dirty:a,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function nf(r){let e,n,t,l,o;function a(s){r[1](s)}let u={id:st,$$slots:{right:[Ya],default:[Xa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),W.push(()=>X(e,"checked",a)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${st}.pmtiles`,$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,i){b(e,s,i),p(s,t,i),b(l,s,i),o=!0},p(s,[i]){const f={};i&8&&(f.$$scope={dirty:i,ctx:s}),!n&&i&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};i&9&&(c.$$scope={dirty:i,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let st="bus_routes";function rf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class lf extends z{constructor(e){super(),q(this,e,rf,nf,U,{})}}function Yn(r){const e=pf(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function Zn(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function of(r){let e;return{c(){e=w("Cycle paths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function sf(r){let e,n,t,l,o,a,u,s;return u=new We({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=A(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=A(),o=C("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,a=A(),h(u.$$.fragment)},m(i,f){p(i,e,f),p(i,n,f),p(i,t,f),p(i,l,f),p(i,o,f),p(i,a,f),b(u,i,f),s=!0},p:ee,i(i){s||($(u.$$.fragment,i),s=!0)},o(i){d(u.$$.fragment,i),s=!1},d(i){i&&(m(e),m(n),m(t),m(l),m(o),m(a)),v(u,i)}}}function af(r){let e,n,t;return n=new oe({props:{$$slots:{default:[sf]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&2048&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Qn(r){let e,n,t=ze(r[1]),l=[];for(let a=0;a<t.length;a+=1)l[a]=xn(Zn(r,t,a));const o=a=>d(l[a],1,1,()=>{l[a]=null});return{c(){for(let a=0;a<l.length;a+=1)l[a].c();e=be()},m(a,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(a,u);p(a,e,u),n=!0},p(a,u){if(u&2){t=ze(a[1]);let s;for(s=0;s<t.length;s+=1){const i=Zn(a,t,s);l[s]?(l[s].p(i,u),$(l[s],1)):(l[s]=xn(i),l[s].c(),$(l[s],1),l[s].m(e.parentNode,e))}for(se(),s=t.length;s<l.length;s+=1)o(s);ie()}},i(a){if(!n){for(let u=0;u<t.length;u+=1)$(l[u]);n=!0}},o(a){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)d(l[u]);n=!1},d(a){a&&m(e),Rt(l,a)}}}function xn(r){let e,n,t,l=r[7]+"",o,a,u;return n=new ge({props:{color:r[8]}}),{c(){e=C("div"),h(n.$$.fragment),t=A(),o=w(l),a=A()},m(s,i){p(s,e,i),b(n,e,null),y(e,t),y(e,o),y(e,a),u=!0},p:ee,i(s){u||($(n.$$.fragment,s),u=!0)},o(s){d(n.$$.fragment,s),u=!1},d(s){s&&m(e),v(n)}}}function ff(r){Yn(r);let e,n=r[4]+"",t,l,o,a,u,s=r[5]+"",i,f,c,_,g=r[6]+"",k;return{c(){e=C("h2"),t=w(n),l=A(),o=C("p"),a=w("Direction: "),u=C("b"),i=A(),f=C("p"),c=w("Width: "),_=C("b"),k=w(g)},m(T,O){p(T,e,O),y(e,t),p(T,l,O),p(T,o,O),y(o,a),y(o,u),u.innerHTML=s,p(T,i,O),p(T,f,O),y(f,c),y(f,_),y(_,k)},p(T,O){Yn(T),O&8&&n!==(n=T[4]+"")&&R(t,n),O&8&&s!==(s=T[5]+"")&&(u.innerHTML=s),O&8&&g!==(g=T[6]+"")&&R(k,g)},d(T){T&&(m(e),m(l),m(o),m(i),m(f))}}}function uf(r){let e,n;return e=new le({props:{$$slots:{default:[ff,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cf(r){let e,n;const t=[D(it),{sourceLayer:it},{paint:{"line-color":dr(["get","kind"],{track:Q.cycle_paths.track,lane:Q.cycle_paths.lane,shared_use_segregated:Q.cycle_paths.shared_use_segregated,shared_use_unsegregated:Q.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ne,"line-opacity":V(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[uf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),e.$on("click",mf),{c(){h(e.$$.fragment)},m(o,a){b(e,o,a),n=!0},p(o,a){const u=a&1?Y(t,[a&0&&te(D(it)),a&0&&{sourceLayer:it},t[2],a&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};a&2048&&(u.$$scope={dirty:a,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function $f(r){let e,n,t,l,o,a;function u(f){r[2](f)}let s={id:it,$$slots:{right:[af],default:[of]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new re({props:s}),W.push(()=>X(e,"checked",u));let i=r[0]&&Qn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${it}.pmtiles`,$$slots:{default:[cf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),i&&i.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),i&&i.m(f,c),p(f,l,c),b(o,f,c),a=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&$(i,1)):(i=Qn(f),i.c(),$(i,1),i.m(l.parentNode,l)):i&&(se(),d(i,1,1,()=>{i=null}),ie());const g={};c&2049&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(e.$$.fragment,f),$(i),$(o.$$.fragment,f),a=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),a=!1},d(f){f&&(m(t),m(l)),v(e,f),i&&i.d(f),v(o,f)}}}let it="cycle_paths";function pf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function mf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function _f(r,e,n){let t=[["Separated tracks",Q.cycle_paths.track],["Unprotected lanes",Q.cycle_paths.lane],["Shared-use (segregated)",Q.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",Q.cycle_paths.shared_use_unsegregated]],l=!1;function o(a){l=a,n(0,l)}return[l,t,o]}class gf extends z{constructor(e){super(),q(this,e,_f,$f,U,{})}}function df(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function hf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function bf(r){let e,n,t,l,o,a,u;return t=new H({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[hf]},$$scope:{ctx:r}}}),a=new Fe({}),{c(){e=C("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=A(),h(a.$$.fragment)},m(s,i){p(s,e,i),y(e,n),b(t,e,null),y(e,l),p(s,o,i),b(a,s,i),u=!0},p(s,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(a.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(a.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(a,s)}}}function vf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&16&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function wf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&R(t,n)},d(l){l&&m(e)}}}function kf(r){let e,n;return e=new le({props:{$$slots:{default:[wf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yf(r){let e,n;const t=[D(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":V(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[kf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,a){b(e,o,a),n=!0},p(o,a){const u=a&3?Y(t,[a&0&&te(D(at)),a&0&&{sourceLayer:at},t[2],t[3],a&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":V(1,.5)}},a&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};a&16&&(u.$$scope={dirty:a,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Sf(r){let e,n,t,l,o;function a(s){r[2](s)}let u={id:at,$$slots:{right:[vf],default:[df]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),W.push(()=>X(e,"checked",a)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${at}.pmtiles`,$$slots:{default:[yf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,i){b(e,s,i),p(s,t,i),b(l,s,i),o=!0},p(s,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),!n&&i&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let at="mrn";function Tf(r,e,n){let t=Q.mrn,l=!1;function o(a){l=a,n(0,l)}return[l,t,o]}class Of extends z{constructor(e){super(),q(this,e,Tf,Sf,U,{})}}function Af(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Cf(r){let e;return{c(){e=w("the PCT website")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Lf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function If(r){let e,n,t,l,o,a,u,s,i,f,c;return u=new H({props:{href:"https://www.pct.bike",$$slots:{default:[Cf]},$$scope:{ctx:r}}}),i=new H({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Lf]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=A(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=A(),o=C("p"),a=w("See "),h(u.$$.fragment),s=w(" and "),h(i.$$.fragment),f=w(" for details on methodology and data sources.")},m(_,g){p(_,e,g),p(_,n,g),p(_,t,g),p(_,l,g),p(_,o,g),y(o,a),b(u,o,null),y(o,s),b(i,o,null),y(o,f),c=!0},p(_,g){const k={};g&1024&&(k.$$scope={dirty:g,ctx:_}),u.$set(k);const T={};g&1024&&(T.$$scope={dirty:g,ctx:_}),i.$set(T)},i(_){c||($(u.$$.fragment,_),$(i.$$.fragment,_),c=!0)},o(_){d(u.$$.fragment,_),d(i.$$.fragment,_),c=!1},d(_){_&&(m(e),m(n),m(t),m(l),m(o)),v(u),v(i)}}}function Pf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&1024&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function er(r){let e,n,t,l,o,a,u,s;e=new Re({props:{colorScale:r[3],limits:r[4]}});function i(g){r[7](g)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new br({props:f}),W.push(()=>X(t,"value",i));function c(g){r[8](g)}let _={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(_.value=r[1]),a=new kt({props:_}),W.push(()=>X(a,"value",c)),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),o=A(),h(a.$$.fragment)},m(g,k){b(e,g,k),p(g,n,k),b(t,g,k),p(g,o,k),b(a,g,k),s=!0},p(g,k){const T={};!l&&k&1&&(l=!0,T.value=g[0],K(()=>l=!1)),t.$set(T);const O={};!u&&k&2&&(u=!0,O.value=g[1],K(()=>u=!1)),a.$set(O)},i(g){s||($(e.$$.fragment,g),$(t.$$.fragment,g),$(a.$$.fragment,g),s=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(a.$$.fragment,g),s=!1},d(g){g&&(m(n),m(o)),v(e,g),v(t,g),v(a,g)}}}function Mf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new sn(!1),t=be(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Ff(r){let e,n;return e=new le({props:{$$slots:{default:[Mf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jf(r){let e,n;const t=[D(Ie),{sourceLayer:Ie},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":Ne,"line-opacity":V(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ie?"visible":"none"}}];let l={$$slots:{default:[Ff]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,a){b(e,o,a),n=!0},p(o,a){const u=a&31?Y(t,[a&0&&te(D(Ie)),a&0&&{sourceLayer:Ie},a&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":Ne,"line-opacity":V(1,.5)}},a&5&&{layout:{visibility:o[2]&&o[0]==Ie?"visible":"none"}}]):{};a&1024&&(u.$$scope={dirty:a,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ef(r){let e,n=r[5](r[9])+"",t;return{c(){e=new sn(!1),t=be(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Nf(r){let e,n;return e=new le({props:{$$slots:{default:[Ef,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Df(r){let e,n;const t=[D(Je),{sourceLayer:Je},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":Ne,"line-opacity":V(1,.5)}},{layout:{visibility:r[2]&&r[0]==Je?"visible":"none"}}];let l={$$slots:{default:[Nf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,a){b(e,o,a),n=!0},p(o,a){const u=a&31?Y(t,[a&0&&te(D(Je)),a&0&&{sourceLayer:Je},t[2],t[3],a&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":Ne,"line-opacity":V(1,.5)}},a&5&&{layout:{visibility:o[2]&&o[0]==Je?"visible":"none"}}]):{};a&1024&&(u.$$scope={dirty:a,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Rf(r){let e,n,t,l,o,a,u,s;function i(_){r[6](_)}let f={id:Ie,$$slots:{right:[Pf],default:[Af]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new re({props:f}),W.push(()=>X(e,"checked",i));let c=r[2]&&er(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Ie}.pmtiles`,$$slots:{default:[jf]},$$scope:{ctx:r}}}),u=new ce({props:{url:`pmtiles://${fe()}/v1/${Je}.pmtiles`,$$slots:{default:[Df]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),c&&c.c(),l=A(),h(o.$$.fragment),a=A(),h(u.$$.fragment)},m(_,g){b(e,_,g),p(_,t,g),c&&c.m(_,g),p(_,l,g),b(o,_,g),p(_,a,g),b(u,_,g),s=!0},p(_,[g]){const k={};g&1024&&(k.$$scope={dirty:g,ctx:_}),!n&&g&4&&(n=!0,k.checked=_[2],K(()=>n=!1)),e.$set(k),_[2]?c?(c.p(_,g),g&4&&$(c,1)):(c=er(_),c.c(),$(c,1),c.m(l.parentNode,l)):c&&(se(),d(c,1,1,()=>{c=null}),ie());const T={};g&1031&&(T.$$scope={dirty:g,ctx:_}),o.$set(T);const O={};g&1031&&(O.$$scope={dirty:g,ctx:_}),u.$set(O)},i(_){s||($(e.$$.fragment,_),$(c),$(o.$$.fragment,_),$(u.$$.fragment,_),s=!0)},o(_){d(e.$$.fragment,_),d(c),d(o.$$.fragment,_),d(u.$$.fragment,_),s=!1},d(_){_&&(m(t),m(l),m(a)),v(e,_),c&&c.d(_),v(o,_),v(u,_)}}}let Ie="pct_commute",Je="pct_school";function Bf(r,e,n){let t=Q.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ie,a="baseline",u=!1;function s(_){let g=_.baseline,k=_.gov_target,T=_.go_dutch,O=`<h2>Trip purpose: ${o==Ie?"commuting":"school"}</h2>`;if(O+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)O+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,O+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let S=(k/g).toFixed(1),L=(T/g).toFixed(1);O+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${S}x</b> of baseline)</p>`,O+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${L}x</b> of baseline)</p>`}return O}function i(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){a=_,n(1,a)}return[o,a,u,t,l,s,i,f,c]}class Gf extends z{constructor(e){super(),q(this,e,Bf,Rf,U,{})}}function Uf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hf(r){let e;return{c(){e=w("Basemap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function zf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function qf(r){let e,n,t,l,o,a,u,s,i,f,c,_;return t=new H({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),f=new H({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=A(),a=C("p"),a.textContent="Data valid as of 1 September, 2023",u=A(),s=C("p"),i=w(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(g,k){p(g,e,k),y(e,n),b(t,e,null),y(e,l),p(g,o,k),p(g,a,k),p(g,u,k),p(g,s,k),y(s,i),b(f,s,null),y(s,c),_=!0},p(g,k){const T={};k&256&&(T.$$scope={dirty:k,ctx:g}),t.$set(T);const O={};k&256&&(O.$$scope={dirty:k,ctx:g}),f.$set(O)},i(g){_||($(t.$$.fragment,g),$(f.$$.fragment,g),_=!0)},o(g){d(t.$$.fragment,g),d(f.$$.fragment,g),_=!1},d(g){g&&(m(e),m(o),m(a),m(u),m(s)),v(t),v(f)}}}function Wf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[qf]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&256&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function tr(r){let e,n,t,l,o;e=new Re({props:{colorScale:r[2],limits:r[3]}});function a(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new br({props:u}),W.push(()=>X(t,"value",a)),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(s,i){b(e,s,i),p(s,n,i),b(t,s,i),o=!0},p(s,i){const f={};!l&&i&1&&(l=!0,f.value=s[0],K(()=>l=!1)),t.$set(f)},i(s){o||($(e.$$.fragment,s),$(t.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),o=!1},d(s){s&&m(n),v(e,s),v(t,s)}}}function Vf(r){let e,n,t=r[7].indicative_mph+"",l,o,a,u,s,i=r[7].highest_mph+"",f,c,_=r[4][r[7].highest_description]+"",g,k;return{c(){e=C("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),a=A(),u=C("p"),s=w("Highest average speed: "),f=w(i),c=w(" mph (during "),g=w(_),k=w(")")},m(T,O){p(T,e,O),y(e,n),y(e,l),y(e,o),p(T,a,O),p(T,u,O),y(u,s),y(u,f),y(u,c),y(u,g),y(u,k)},p(T,O){O&128&&t!==(t=T[7].indicative_mph+"")&&R(l,t),O&128&&i!==(i=T[7].highest_mph+"")&&R(f,i),O&128&&_!==(_=T[4][T[7].highest_description]+"")&&R(g,_)},d(T){T&&(m(e),m(a),m(u))}}}function Xf(r){let e,n;return e=new le({props:{$$slots:{default:[Vf,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Kf(r){let e,n;const t=[D(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[0]],r[3],r[2]),"line-width":Ne,"line-opacity":V(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[Xf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,a){b(e,o,a),n=!0},p(o,a){const u=a&15?Y(t,[a&0&&te(D(ft)),a&0&&{sourceLayer:ft},t[2],t[3],a&13&&{paint:{"line-color":$e(["get",o[0]],o[3],o[2]),"line-width":Ne,"line-opacity":V(1,.5)}},a&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};a&256&&(u.$$scope={dirty:a,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Jf(r){let e,n,t,l,o,a;function u(f){r[5](f)}let s={id:ft,$$slots:{right:[Wf],default:[Uf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new re({props:s}),W.push(()=>X(e,"checked",u));let i=r[1]&&tr(r);return o=new ce({props:{url:`pmtiles://${an()}/v1/${ft}.pmtiles`,$$slots:{default:[Kf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),i&&i.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),i&&i.m(f,c),p(f,l,c),b(o,f,c),a=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],K(()=>n=!1)),e.$set(_),f[1]?i?(i.p(f,c),c&2&&$(i,1)):(i=tr(f),i.c(),$(i,1),i.m(l.parentNode,l)):i&&(se(),d(i,1,1,()=>{i=null}),ie());const g={};c&259&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(e.$$.fragment,f),$(i),$(o.$$.fragment,f),a=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),a=!1},d(f){f&&(m(t),m(l)),v(e,f),i&&i.d(f),v(o,f)}}}let ft="road_speeds";function Yf(r,e,n){let t=Q.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",a=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){a=f,n(1,a)}function i(f){o=f,n(0,o)}return[o,a,t,l,u,s,i]}class Zf extends z{constructor(e){super(),q(this,e,Yf,Jf,U,{})}}function Qf(r){let e;return{c(){e=w("OS Road widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function eu(r){let e,n,t,l,o,a,u,s,i;return u=new H({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=A(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",l=A(),o=C("p"),a=w(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),p(f,l,c),p(f,o,c),y(o,a),b(u,o,null),y(o,s),i=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){i||($(u.$$.fragment,f),i=!0)},o(f){d(u.$$.fragment,f),i=!1},d(f){f&&(m(e),m(n),m(t),m(l),m(o)),v(u)}}}function tu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[eu]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&32&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function nr(r){let e,n;return e=new Re({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nu(r){let e,n,t,l=r[4].average+"",o,a,u,s,i,f,c=r[4].minimum+"",_,g;return{c(){e=C("p"),n=w("Average width: "),t=C("b"),o=w(l),a=w(`
        meters`),u=A(),s=C("p"),i=w("Minimum width: "),f=C("b"),_=w(c),g=w(`
        meters`)},m(k,T){p(k,e,T),y(e,n),y(e,t),y(t,o),y(e,a),p(k,u,T),p(k,s,T),y(s,i),y(s,f),y(f,_),y(s,g)},p(k,T){T&16&&l!==(l=k[4].average+"")&&R(o,l),T&16&&c!==(c=k[4].minimum+"")&&R(_,c)},d(k){k&&(m(e),m(u),m(s))}}}function ru(r){let e,n;return e=new le({props:{$$slots:{default:[nu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lu(r){let e,n;const t=[D(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get","average"],r[2],r[1]),"line-width":Ne,"line-opacity":V(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[ru]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,a){b(e,o,a),n=!0},p(o,a){const u=a&7?Y(t,[a&0&&te(D(ut)),a&0&&{sourceLayer:ut},t[2],t[3],a&6&&{paint:{"line-color":$e(["get","average"],o[2],o[1]),"line-width":Ne,"line-opacity":V(1,.5)}},a&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};a&32&&(u.$$scope={dirty:a,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ou(r){let e,n,t,l,o,a;function u(f){r[3](f)}let s={id:ut,$$slots:{right:[tu],default:[Qf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new re({props:s}),W.push(()=>X(e,"checked",u));let i=r[0]&&nr(r);return o=new ce({props:{url:`pmtiles://${an()}/v1/${ut}.pmtiles`,$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),i&&i.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),i&&i.m(f,c),p(f,l,c),b(o,f,c),a=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&$(i,1)):(i=nr(f),i.c(),$(i,1),i.m(l.parentNode,l)):i&&(se(),d(i,1,1,()=>{i=null}),ie());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(e.$$.fragment,f),$(i),$(o.$$.fragment,f),a=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),a=!1},d(f){f&&(m(t),m(l)),v(e,f),i&&i.d(f),v(o,f)}}}let ut="road_widths";function su(r,e,n){let t=Q.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function a(u){o=u,n(0,o)}return[o,t,l,a]}class iu extends z{constructor(e){super(),q(this,e,su,ou,U,{})}}function au(r){let e,n,t;return{c(){e=C("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(l,o){p(l,e,o),r[7](e),n||(t=wt(e,"change",r[5]),n=!0)},p:ee,d(l){l&&m(e),r[7](null),n=!1,t()}}}function rr(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fu(r){let e,n,t=r[2].toLocaleString()+"",l,o,a;return e=new ge({props:{color:bt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),p(u,n,s),p(u,l,s),p(u,o,s),a=!0},p(u,s){(!a||s&4)&&t!==(t=u[2].toLocaleString()+"")&&R(l,t)},i(u){a||($(e.$$.fragment,u),a=!0)},o(u){d(e.$$.fragment,u),a=!1},d(u){u&&(m(n),m(l),m(o)),v(e,u)}}}function uu(r){let e,n,t;function l(a){r[8](a)}let o={id:"show-criticals",$$slots:{default:[fu]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new re({props:o}),W.push(()=>X(e,"checked",l)),{c(){h(e.$$.fragment)},m(a,u){b(e,a,u),t=!0},p(a,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:a}),!n&&u&2&&(n=!0,s.checked=a[1],K(()=>n=!1)),e.$set(s)},i(a){t||($(e.$$.fragment,a),t=!0)},o(a){d(e.$$.fragment,a),t=!1},d(a){v(e,a)}}}function cu(r){let e,n,t,l,o,a;e=new hr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[au]},$$scope:{ctx:r}}}),t=new vr({props:{errorMessage:r[3]}});let u=r[2]>0&&rr(r);return{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),u&&u.c(),o=be()},m(s,i){b(e,s,i),p(s,n,i),b(t,s,i),p(s,l,i),u&&u.m(s,i),p(s,o,i),a=!0},p(s,i){const f={};i&2049&&(f.$$scope={dirty:i,ctx:s}),e.$set(f);const c={};i&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,i),i&4&&$(u,1)):(u=rr(s),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(se(),d(u,1,1,()=>{u=null}),ie())},i(s){a||($(e.$$.fragment,s),$(t.$$.fragment,s),$(u),a=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(u),a=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),u&&u.d(s)}}}function $u(r){let e,n,t=r[10].critical_type+"",l,o,a,u,s,i=r[10].location_description+"",f,c,_,g,k,T=r[10].notes+"",O,S,L,M,N,P,E,j=r[10].id+"",I,F,B,x,ae,Z=(r[10].inspector??"???")+"",ve,mt,de,Qe=r[10].submission_time+"",_t,xe,pe,gt,je,Be=r[10].scheme_reference+"",Ve,dt,et,Xe=r[10].current_design_stage+"",tt;return{c(){e=C("div"),n=C("h2"),l=w(t),o=A(),a=C("p"),u=C("u"),u.textContent="Location",s=w(`
          : `),f=w(i),c=A(),_=C("p"),g=C("u"),g.textContent="Notes",k=w(`
          : `),O=w(T),S=A(),L=C("hr"),M=A(),N=C("p"),P=w("Critical issue ID: "),E=C("b"),I=w(j),F=A(),B=C("p"),x=w("Submitted by "),ae=C("b"),ve=w(Z),mt=w(`
          at
          `),de=C("b"),_t=w(Qe),xe=A(),pe=C("p"),gt=w("For scheme "),je=C("b"),Ve=w(Be),dt=w(`
          in stage
          `),et=C("b"),tt=w(Xe),Se(e,"max-width","30vw")},m(he,Te){p(he,e,Te),y(e,n),y(n,l),y(e,o),y(e,a),y(a,u),y(a,s),y(a,f),y(e,c),y(e,_),y(_,g),y(_,k),y(_,O),y(e,S),y(e,L),y(e,M),y(e,N),y(N,P),y(N,E),y(E,I),y(e,F),y(e,B),y(B,x),y(B,ae),y(ae,ve),y(B,mt),y(B,de),y(de,_t),y(e,xe),y(e,pe),y(pe,gt),y(pe,je),y(je,Ve),y(pe,dt),y(pe,et),y(et,tt)},p(he,Te){Te&1024&&t!==(t=he[10].critical_type+"")&&R(l,t),Te&1024&&i!==(i=he[10].location_description+"")&&R(f,i),Te&1024&&T!==(T=he[10].notes+"")&&R(O,T),Te&1024&&j!==(j=he[10].id+"")&&R(I,j),Te&1024&&Z!==(Z=(he[10].inspector??"???")+"")&&R(ve,Z),Te&1024&&Qe!==(Qe=he[10].submission_time+"")&&R(_t,Qe),Te&1024&&Be!==(Be=he[10].scheme_reference+"")&&R(Ve,Be),Te&1024&&Xe!==(Xe=he[10].current_design_stage+"")&&R(tt,Xe)},d(he){he&&m(e)}}}function pu(r){let e,n;return e=new le({props:{$$slots:{default:[$u,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mu(r){let e,n,t,l,o,a;const u=[D(`${He}-clusters`),{applyToClusters:!0},{paint:{"circle-color":bt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let g=0;g<u.length;g+=1)s=J(s,u[g]);e=new qe({props:s}),e.$on("click",r[6]);const i=[D(`${He}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let g=0;g<i.length;g+=1)f=J(f,i[g]);t=new rl({props:f});const c=[D(`${He}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":bt,"circle-opacity":V(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let _={$$slots:{default:[pu]},$$scope:{ctx:r}};for(let g=0;g<c.length;g+=1)_=J(_,c[g]);return o=new qe({props:_}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment)},m(g,k){b(e,g,k),p(g,n,k),b(t,g,k),p(g,l,k),b(o,g,k),a=!0},p(g,k){const T=k&2?Y(u,[k&0&&te(D(`${He}-clusters`)),u[1],k&0&&{paint:{"circle-color":bt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},k&2&&{layout:{visibility:g[1]?"visible":"none"}},u[4]]):{};e.$set(T);const O=k&2?Y(i,[k&0&&te(D(`${He}-counts`)),i[1],k&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:g[1]?"visible":"none"}}]):{};t.$set(O);const S=k&2?Y(c,[k&0&&te(D(`${He}-points`)),c[1],c[2],c[3],k&0&&{paint:{"circle-color":bt,"circle-opacity":V(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},k&2&&{layout:{visibility:g[1]?"visible":"none"}}]):{};k&2048&&(S.$$scope={dirty:k,ctx:g}),o.$set(S)},i(g){a||($(e.$$.fragment,g),$(t.$$.fragment,g),$(o.$$.fragment,g),a=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),a=!1},d(g){g&&(m(n),m(l)),v(e,g),v(t,g),v(o,g)}}}function _u(r){let e,n,t,l;return e=new Le({props:{label:"Critical Issues",$$slots:{default:[cu]},$$scope:{ctx:r}}}),t=new Lt({props:{id:He,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[mu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,a){b(e,o,a),p(o,n,a),b(t,o,a),l=!0},p(o,[a]){const u={};a&2063&&(u.$$scope={dirty:a,ctx:o}),e.$set(u);const s={};a&16&&(s.data=o[4]),a&2050&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}let He="criticals",bt="red";function gu(r,e,n){let t;Ee(r,ln,g=>n(9,t=g));let l,o=!0,a=0,u="",s=Wr();async function i(g){try{n(4,s=await Ls(l.files[0])),n(2,a=s.features.length),n(3,u="")}catch(k){n(3,u=`The file you loaded is broken: ${k}`)}}function f(g){t.getSource(He).getClusterExpansionZoom(g.detail.features[0].properties.cluster_id,(k,T)=>{k||t.easeTo({center:g.detail.features[0].geometry.coordinates,zoom:T})})}function c(g){W[g?"unshift":"push"](()=>{l=g,n(0,l)})}function _(g){o=g,n(1,o)}return[l,o,a,u,s,i,f,c,_]}class du extends z{constructor(e){super(),q(this,e,gu,_u,U,{})}}function hu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function bu(r){let e;return{c(){e=w("crossing")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function vu(r){let e,n,t,l,o,a,u;return t=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[bu]},$$scope:{ctx:r}}}),a=new We({}),{c(){e=C("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=A(),h(a.$$.fragment)},m(s,i){p(s,e,i),y(e,n),b(t,e,null),y(e,l),p(s,o,i),b(a,s,i),u=!0},p(s,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(a.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(a.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(a,s)}}}function wu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[vu]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&16&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ku(r){let e,n=lr(r[3])+"",t;return{c(){e=C("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=lr(l[3])+"")&&R(t,n)},d(l){l&&m(e)}}}function yu(r){let e,n;return e=new le({props:{$$slots:{default:[ku,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Su(r){let e,n;const t=[D(ct),{sourceLayer:ct},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[yu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new qe({props:l}),e.$on("click",Ou),{c(){h(e.$$.fragment)},m(o,a){b(e,o,a),n=!0},p(o,a){const u=a&3?Y(t,[a&0&&te(D(ct)),a&0&&{sourceLayer:ct},a&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},a&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};a&16&&(u.$$scope={dirty:a,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Tu(r){let e,n,t,l,o;function a(s){r[2](s)}let u={id:ct,$$slots:{right:[wu],default:[hu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),W.push(()=>X(e,"checked",a)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${ct}.pmtiles`,$$slots:{default:[Su]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,i){b(e,s,i),p(s,t,i),b(l,s,i),o=!0},p(s,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),!n&&i&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ct="crossings";function lr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Ou(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Au(r,e,n){let t=Q.crossings,l=!1;function o(a){l=a,n(0,l)}return[l,t,o]}class Cu extends z{constructor(e){super(),q(this,e,Au,Tu,U,{})}}function Lu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Iu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pu(r){let e,n,t,l,o,a,u;return t=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Iu]},$$scope:{ctx:r}}}),a=new We({}),{c(){e=C("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=A(),h(a.$$.fragment)},m(s,i){p(s,e,i),y(e,n),b(t,e,null),y(e,l),p(s,o,i),b(a,s,i),u=!0},p(s,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(a.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(a.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(a,s)}}}function Mu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Pu]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&16&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Fu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=C("p"),n=w("Capacity: "),t=C("b"),o=w(l)},m(a,u){p(a,e,u),y(e,n),y(e,t),y(t,o)},p(a,u){u&8&&l!==(l=(a[3].capacity??"unknown")+"")&&R(o,l)},d(a){a&&m(e)}}}function ju(r){let e,n;return e=new le({props:{$$slots:{default:[Fu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Eu(r){let e,n;const t=[D($t),{sourceLayer:$t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[ju]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new qe({props:l}),{c(){h(e.$$.fragment)},m(o,a){b(e,o,a),n=!0},p(o,a){const u=a&3?Y(t,[a&0&&te(D($t)),a&0&&{sourceLayer:$t},a&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},a&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};a&16&&(u.$$scope={dirty:a,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Nu(r){let e,n,t,l,o;function a(s){r[2](s)}let u={id:$t,$$slots:{right:[Mu],default:[Lu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),W.push(()=>X(e,"checked",a)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${$t}.pmtiles`,$$slots:{default:[Eu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,i){b(e,s,i),p(s,t,i),b(l,s,i),o=!0},p(s,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),!n&&i&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let $t="cycle_parking";function Du(r,e,n){let t=Q.cycle_parking,l=!1;function o(a){l=a,n(0,l)}return[l,t,o]}class Ru extends z{constructor(e){super(),q(this,e,Du,Nu,U,{})}}function Bu(r){let e,n,t,l;return e=new ge({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=A(),t=w(r[2])},m(o,a){b(e,o,a),p(o,n,a),p(o,t,a),l=!0},p(o,a){(!l||a&4)&&R(t,o[2])},i(o){l||($(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(m(n),m(t)),v(e,o)}}}function Gu(r){let e;const n=r[5].default,t=Tt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Ot(t,n,l,l[7],e?Ct(n,l[7],o,null):At(l[7]),null)},i(l){e||($(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function Uu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&128&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Hu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=C("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&R(t,n)},d(l){l&&m(e)}}}function zu(r){let e,n;return e=new le({props:{$$slots:{default:[Hu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qu(r){let e,n;const t=[D(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":V(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[zu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new De({props:l}),{c(){h(e.$$.fragment)},m(o,a){b(e,o,a),n=!0},p(o,a){const u=a&25?Y(t,[a&1&&te(D(o[0])),a&1&&{sourceLayer:o[0]},a&16&&{paint:{"fill-color":o[4],"fill-opacity":V(.7,1)}},a&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};a&130&&(u.$$scope={dirty:a,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Wu(r){let e,n,t,l,o;function a(s){r[6](s)}let u={id:r[0],$$slots:{right:[Uu],default:[Bu]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new re({props:u}),W.push(()=>X(e,"checked",a)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[qu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,i){b(e,s,i),p(s,t,i),b(l,s,i),o=!0},p(s,[i]){const f={};i&1&&(f.id=s[0]),i&132&&(f.$$scope={dirty:i,ctx:s}),!n&&i&8&&(n=!0,f.checked=s[3],K(()=>n=!1)),e.$set(f);const c={};i&1&&(c.url=`pmtiles://${fe()}/v1/${s[0]}.pmtiles`),i&139&&(c.$$scope={dirty:i,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Vu(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:a}=e,{pluralNoun:u}=e,s=Q[o],i=!1;function f(c){i=c,n(3,i)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,a=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,a,u,i,s,t,f,l]}class un extends z{constructor(e){super(),q(this,e,Vu,Wu,U,{name:0,singularNoun:1,pluralNoun:2})}}function Xu(r){let e;return{c(){e=w("hospital")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ku(r){let e,n,t,l,o,a,u;return t=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Xu]},$$scope:{ctx:r}}}),a=new We({}),{c(){e=C("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=A(),h(a.$$.fragment)},m(s,i){p(s,e,i),y(e,n),b(t,e,null),y(e,l),p(s,o,i),b(a,s,i),u=!0},p(s,i){const f={};i&1&&(f.$$scope={dirty:i,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(a.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(a.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(a,s)}}}function Ju(r){let e,n;return e=new un({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Ku]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Yu extends z{constructor(e){super(),q(this,e,null,Ju,U,{})}}function Zu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Qu(r){let e;return{c(){e=w("railway station")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xu(r){let e,n,t,l,o,a,u;return t=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Qu]},$$scope:{ctx:r}}}),a=new We({}),{c(){e=C("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=A(),h(a.$$.fragment)},m(s,i){p(s,e,i),y(e,n),b(t,e,null),y(e,l),p(s,o,i),b(a,s,i),u=!0},p(s,i){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(a.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(a.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(a,s)}}}function ec(r){let e,n,t;return n=new oe({props:{$$slots:{default:[xu]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&16&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function tc(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=w(n)},m(l,o){p(l,e,o),y(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&R(t,n)},d(l){l&&m(e)}}}function nc(r){let e,n;return e=new le({props:{$$slots:{default:[tc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rc(r){let e,n;const t=[D(Ut),{paint:{"circle-color":r[1],"circle-radius":Bt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[nc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new qe({props:l}),{c(){h(e.$$.fragment)},m(o,a){b(e,o,a),n=!0},p(o,a){const u=a&3?Y(t,[a&0&&te(D(Ut)),a&2&&{paint:{"circle-color":o[1],"circle-radius":Bt/2}},a&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};a&16&&(u.$$scope={dirty:a,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function lc(r){let e,n,t,l,o;function a(s){r[2](s)}let u={id:Ut,$$slots:{right:[ec],default:[Zu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),W.push(()=>X(e,"checked",a)),l=new Lt({props:{data:`${fe()}/v1/${Ut}.geojson`,$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,i){b(e,s,i),p(s,t,i),b(l,s,i),o=!0},p(s,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:s}),!n&&i&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ut="railway_stations";function oc(r,e,n){let t=Q.railway_stations,l=!1;function o(a){l=a,n(0,l)}return[l,t,o]}class sc extends z{constructor(e){super(),q(this,e,oc,lc,U,{})}}function ic(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ac(r){let e,n,t,l,o,a,u;return t=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[ic]},$$scope:{ctx:r}}}),a=new We({}),{c(){e=C("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=A(),h(a.$$.fragment)},m(s,i){p(s,e,i),y(e,n),b(t,e,null),y(e,l),p(s,o,i),b(a,s,i),u=!0},p(s,i){const f={};i&1&&(f.$$scope={dirty:i,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(a.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(a.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(a,s)}}}function fc(r){let e,n;return e=new un({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[ac]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class uc extends z{constructor(e){super(),q(this,e,null,fc,U,{})}}function cc(r){let e;return{c(){e=w("sports pitches")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function $c(r){let e;return{c(){e=w("sports centres")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function pc(r){let e,n,t,l,o,a,u,s,i;return t=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[cc]},$$scope:{ctx:r}}}),o=new H({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[$c]},$$scope:{ctx:r}}}),s=new We({}),{c(){e=C("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),a=w(" data from OpenStreetMap (as of 9 August 2023)."),u=A(),h(s.$$.fragment)},m(f,c){p(f,e,c),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,a),p(f,u,c),b(s,f,c),i=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),i=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function mc(r){let e,n;return e=new un({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[pc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class _c extends z{constructor(e){super(),q(this,e,null,mc,U,{})}}function gc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function dc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function hc(r){let e;return{c(){e=w("methodology")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function bc(r){let e,n,t,l,o,a,u,s,i,f,c;return t=new H({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[dc]},$$scope:{ctx:r}}}),o=new H({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[hc]},$$scope:{ctx:r}}}),f=new Fe({}),{c(){e=C("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),a=w(" for details and caveats about the measurements."),u=A(),s=C("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,i=A(),h(f.$$.fragment)},m(_,g){p(_,e,g),y(e,n),b(t,e,null),y(e,l),b(o,e,null),y(e,a),p(_,u,g),p(_,s,g),p(_,i,g),b(f,_,g),c=!0},p(_,g){const k={};g&64&&(k.$$scope={dirty:g,ctx:_}),t.$set(k);const T={};g&64&&(T.$$scope={dirty:g,ctx:_}),o.$set(T)},i(_){c||($(t.$$.fragment,_),$(o.$$.fragment,_),$(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(m(e),m(u),m(s),m(i)),v(t),v(o),v(f,_)}}}function vc(r){let e,n,t;return n=new oe({props:{$$slots:{default:[bc]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&64&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function or(r){let e,n;return e=new Re({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wc(r){let e,n=r[5].location+"",t,l,o,a,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",i,f,c,_,g,k=r[5].pedal_cycles_2022.toLocaleString()+"",T,O,S,L,M,N=r[5].method+"",P;return{c(){e=C("h2"),t=w(n),l=A(),o=C("p"),a=w("Total motor vehicles (2022 AADF): "),u=C("b"),i=w(s),f=A(),c=C("p"),_=w("Total pedal cycles (2022 AADF): "),g=C("b"),T=w(k),O=A(),S=C("p"),L=w("Count method: "),M=C("b"),P=w(N)},m(E,j){p(E,e,j),y(e,t),p(E,l,j),p(E,o,j),y(o,a),y(o,u),y(u,i),p(E,f,j),p(E,c,j),y(c,_),y(c,g),y(g,T),p(E,O,j),p(E,S,j),y(S,L),y(S,M),y(M,P)},p(E,j){j&32&&n!==(n=E[5].location+"")&&R(t,n),j&32&&s!==(s=E[5].motor_vehicles_2022.toLocaleString()+"")&&R(i,s),j&32&&k!==(k=E[5].pedal_cycles_2022.toLocaleString()+"")&&R(T,k),j&32&&N!==(N=E[5].method+"")&&R(P,N)},d(E){E&&(m(e),m(l),m(o),m(f),m(c),m(O),m(S))}}}function kc(r){let e,n;return e=new le({props:{$$slots:{default:[wc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yc(r){let e,n;const t=[D(pt),{sourceLayer:pt},{paint:{"circle-color":$e(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[kc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=J(l,t[o]);return e=new qe({props:l}),e.$on("click",Tc),{c(){h(e.$$.fragment)},m(o,a){b(e,o,a),n=!0},p(o,a){const u=a&7?Y(t,[a&0&&te(D(pt)),a&0&&{sourceLayer:pt},a&6&&{paint:{"circle-color":$e(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},a&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};a&64&&(u.$$scope={dirty:a,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Sc(r){let e,n,t,l,o,a;function u(f){r[4](f)}let s={id:pt,$$slots:{right:[vc],default:[gc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new re({props:s}),W.push(()=>X(e,"checked",u));let i=r[0]&&or(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${pt}.pmtiles`,$$slots:{default:[yc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),i&&i.c(),l=A(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),i&&i.m(f,c),p(f,l,c),b(o,f,c),a=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],K(()=>n=!1)),e.$set(_),f[0]?i?(i.p(f,c),c&1&&$(i,1)):(i=or(f),i.c(),$(i,1),i.m(l.parentNode,l)):i&&(se(),d(i,1,1,()=>{i=null}),ie());const g={};c&65&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(e.$$.fragment,f),$(i),$(o.$$.fragment,f),a=!0)},o(f){d(e.$$.fragment,f),d(i),d(o.$$.fragment,f),a=!1},d(f){f&&(m(t),m(l)),v(e,f),i&&i.d(f),v(o,f)}}}let pt="vehicle_counts";function Tc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Oc(r,e,n){let t=Q.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],a=!1;function u(s){a=s,n(0,a)}return[a,t,l,o,u]}class Ac extends z{constructor(e){super(),q(this,e,Oc,Sc,U,{})}}function Cc(r){let e,n,t,l,o,a,u,s;return e=new uc({}),t=new Yu({}),o=new _c({}),u=new sc({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),a=A(),h(u.$$.fragment)},m(i,f){b(e,i,f),p(i,n,f),b(t,i,f),p(i,l,f),b(o,i,f),p(i,a,f),b(u,i,f),s=!0},i(i){s||($(e.$$.fragment,i),$(t.$$.fragment,i),$(o.$$.fragment,i),$(u.$$.fragment,i),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(o.$$.fragment,i),d(u.$$.fragment,i),s=!1},d(i){i&&(m(n),m(l),m(a)),v(e,i),v(t,i),v(o,i),v(u,i)}}}function Lc(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ic(r){let e,n,t,l,o,a,u,s,i,f;return e=new gf({}),t=new Of({}),o=new lf({}),u=new Ru({}),i=new Cu({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),a=A(),h(u.$$.fragment),s=A(),h(i.$$.fragment)},m(c,_){b(e,c,_),p(c,n,_),b(t,c,_),p(c,l,_),b(o,c,_),p(c,a,_),b(u,c,_),p(c,s,_),b(i,c,_),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(i.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(i.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(a),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(i,c)}}}function Pc(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[Ic]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mc(r){let e,n,t,l,o,a,u,s,i,f;return e=new wa({}),t=new qa({}),o=new Ci({}),u=new Yi({}),i=new ua({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),a=A(),h(u.$$.fragment),s=A(),h(i.$$.fragment)},m(c,_){b(e,c,_),p(c,n,_),b(t,c,_),p(c,l,_),b(o,c,_),p(c,a,_),b(u,c,_),p(c,s,_),b(i,c,_),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(i.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(i.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(a),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(i,c)}}}function Fc(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[Mc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jc(r){let e,n,t,l;return e=new di({}),t=new Bi({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,a){b(e,o,a),p(o,n,a),b(t,o,a),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Ec(r){let e,n,t,l;return e=new iu({}),t=new Zf({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,a){b(e,o,a),p(o,n,a),b(t,o,a),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Nc(r){let e,n,t,l,o=rn()=="Private (development)",a,u,s;e=new Ac({}),t=new Gf({});let i=o&&Ec();return u=new Fa({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),i&&i.c(),a=A(),h(u.$$.fragment)},m(f,c){b(e,f,c),p(f,n,c),b(t,f,c),p(f,l,c),i&&i.m(f,c),p(f,a,c),b(u,f,c),s=!0},p:ee,i(f){s||($(e.$$.fragment,f),$(t.$$.fragment,f),$(i),$(u.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(i),d(u.$$.fragment,f),s=!1},d(f){f&&(m(n),m(l),m(a)),v(e,f),v(t,f),i&&i.d(f),v(u,f)}}}function Dc(r){let e,n,t,l,o;function a(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new Qr({props:u}),W.push(()=>X(e,"enabled",a)),l=new sl({}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(s,i){b(e,s,i),p(s,t,i),b(l,s,i),o=!0},p(s,i){const f={};!n&&i&1&&(n=!0,f.enabled=s[0],K(()=>n=!1)),e.$set(f)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Rc(r){let e,n,t,l,o,a,u,s,i,f,c,_,g,k,T,O;return e=new du({}),t=new Le({props:{label:"Trip generators",$$slots:{default:[Lc]},$$scope:{ctx:r}}}),o=new Le({props:{label:"Existing infrastructure",$$slots:{default:[Pc]},$$scope:{ctx:r}}}),u=new Le({props:{label:"Boundaries",$$slots:{default:[Fc]},$$scope:{ctx:r}}}),i=new Le({props:{label:"Census",$$slots:{default:[jc]},$$scope:{ctx:r}}}),c=new Le({props:{label:"Other",$$slots:{default:[Nc]},$$scope:{ctx:r}}}),g=new Le({props:{label:"Tools",$$slots:{default:[Dc]},$$scope:{ctx:r}}}),T=new Zr({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),a=A(),h(u.$$.fragment),s=A(),h(i.$$.fragment),f=A(),h(c.$$.fragment),_=A(),h(g.$$.fragment),k=A(),h(T.$$.fragment)},m(S,L){b(e,S,L),p(S,n,L),b(t,S,L),p(S,l,L),b(o,S,L),p(S,a,L),b(u,S,L),p(S,s,L),b(i,S,L),p(S,f,L),b(c,S,L),p(S,_,L),b(g,S,L),p(S,k,L),b(T,S,L),O=!0},p(S,L){const M={};L&8&&(M.$$scope={dirty:L,ctx:S}),t.$set(M);const N={};L&8&&(N.$$scope={dirty:L,ctx:S}),o.$set(N);const P={};L&8&&(P.$$scope={dirty:L,ctx:S}),u.$set(P);const E={};L&8&&(E.$$scope={dirty:L,ctx:S}),i.$set(E);const j={};L&8&&(j.$$scope={dirty:L,ctx:S}),c.$set(j);const I={};L&9&&(I.$$scope={dirty:L,ctx:S}),g.$set(I);const F={};L&2&&(F.disabled=!S[1]),T.$set(F)},i(S){O||($(e.$$.fragment,S),$(t.$$.fragment,S),$(o.$$.fragment,S),$(u.$$.fragment,S),$(i.$$.fragment,S),$(c.$$.fragment,S),$(g.$$.fragment,S),$(T.$$.fragment,S),O=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(o.$$.fragment,S),d(u.$$.fragment,S),d(i.$$.fragment,S),d(c.$$.fragment,S),d(g.$$.fragment,S),d(T.$$.fragment,S),O=!1},d(S){S&&(m(n),m(l),m(a),m(s),m(f),m(_),m(k)),v(e,S),v(t,S),v(o,S),v(u,S),v(i,S),v(c,S),v(g,S),v(T,S)}}}function Bc(r){let e,n;return e=new Le({props:{label:"Layers",open:!0,$$slots:{default:[Rc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gc(r,e,n){let t,l;Ee(r,mn,a=>n(1,l=a));function o(a){t=a,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&mn.set(!t)},[t,l,o]}class Uc extends z{constructor(e){super(),q(this,e,Gc,Bc,U,{})}}function Hc(r,e,n){let{loadFile:t}=e;return on(async()=>{let o=await(await fetch(`${an()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class zc extends z{constructor(e){super(),q(this,e,Hc,null,U,{loadFile:0})}}function qc(r){let e;return{c(){e=w("Show on map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Wc(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Vc(r){let e,n,t,l;return e=new Jt({props:{$$slots:{default:[qc]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Jt({props:{$$slots:{default:[Wc]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,a){b(e,o,a),p(o,n,a),b(t,o,a),l=!0},p(o,a){const u={};a&32&&(u.$$scope={dirty:a,ctx:o}),e.$set(u);const s={};a&32&&(s.$$scope={dirty:a,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Xc(r){let e,n,t=r[0].authority_or_region+"",l,o,a,u,s=r[0].capital_scheme_id+"",i,f,c,_,g=r[0].funding_programme+"",k,T,O,S;return O=new xr({props:{$$slots:{default:[Vc]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=w("Authority or region: "),l=w(t),o=A(),a=C("p"),u=w("Capital scheme ID: "),i=w(s),f=A(),c=C("p"),_=w("Funding programme: "),k=w(g),T=A(),h(O.$$.fragment)},m(L,M){p(L,e,M),y(e,n),y(e,l),p(L,o,M),p(L,a,M),y(a,u),y(a,i),p(L,f,M),p(L,c,M),y(c,_),y(c,k),p(L,T,M),b(O,L,M),S=!0},p(L,M){(!S||M&1)&&t!==(t=L[0].authority_or_region+"")&&R(l,t),(!S||M&1)&&s!==(s=L[0].capital_scheme_id+"")&&R(i,s),(!S||M&1)&&g!==(g=L[0].funding_programme+"")&&R(k,g);const N={};M&32&&(N.$$scope={dirty:M,ctx:L}),O.$set(N)},i(L){S||($(O.$$.fragment,L),S=!0)},o(L){d(O.$$.fragment,L),S=!1},d(L){L&&(m(e),m(o),m(a),m(f),m(c),m(T)),v(O,L)}}}function Kc(r){let e,n;return e=new Le({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[Xc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jc(r,e,n){let t;Ee(r,ln,s=>n(4,t=s));let{schemesGj:l}=e,{scheme:o}=e;function a(){let s={type:"FeatureCollection",features:l.features.filter(i=>i.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(Vr(s),{padding:20,animate:!1})}function u(){let s={type:"FeatureCollection",features:l.features.filter(f=>f.properties.scheme_reference==o.scheme_reference)},i=o.authority_or_region;window.localStorage.setItem(i,JSON.stringify(s)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return r.$$set=s=>{"schemesGj"in s&&n(3,l=s.schemesGj),"scheme"in s&&n(0,o=s.scheme)},[o,a,u,l]}class Yc extends z{constructor(e){super(),q(this,e,Jc,Kc,U,{schemesGj:3,scheme:0})}}function sr(r){let e,n,t=_n(r[0].length_meters)+"",l;return{c(){e=C("p"),n=w("Length: "),l=w(t)},m(o,a){p(o,e,a),y(e,n),y(e,l)},p(o,a){a&1&&t!==(t=_n(o[0].length_meters)+"")&&R(l,t)},d(o){o&&m(e)}}}function ir(r){let e,n=r[1](r[0].description)+"";return{c(){e=C("p")},m(t,l){p(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&m(e)}}}function Zc(r){let e,n,t,l=r[1](r[0].name)+"",o,a=r[0].intervention_type+"",u,s,i,f,c,_=r[0].scheme_reference+"",g,k,T,O=r[0].length_meters&&sr(r),S=r[0].description&&ir(r);return{c(){e=C("div"),n=C("h2"),t=new sn(!1),o=w(" ("),u=w(a),s=w(")"),i=A(),f=C("p"),c=w("Scheme reference: "),g=w(_),k=A(),O&&O.c(),T=A(),S&&S.c(),t.a=o,Se(e,"max-width","30vw")},m(L,M){p(L,e,M),y(e,n),t.m(l,n),y(n,o),y(n,u),y(n,s),y(e,i),y(e,f),y(f,c),y(f,g),y(e,k),O&&O.m(e,null),y(e,T),S&&S.m(e,null)},p(L,[M]){M&1&&l!==(l=L[1](L[0].name)+"")&&t.p(l),M&1&&a!==(a=L[0].intervention_type+"")&&R(u,a),M&1&&_!==(_=L[0].scheme_reference+"")&&R(g,_),L[0].length_meters?O?O.p(L,M):(O=sr(L),O.c(),O.m(e,T)):O&&(O.d(1),O=null),L[0].description?S?S.p(L,M):(S=ir(L),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:ee,o:ee,d(L){L&&m(e),O&&O.d(),S&&S.d()}}}function Qc(r,e,n){let{props:t}=e,{filterText:l}=e;function o(a){return l?a.replace(new RegExp(l,"gi"),u=>`<mark>${u}</mark>`):a}return r.$$set=a=>{"props"in a&&n(0,t=a.props),"filterText"in a&&n(2,l=a.filterText)},[t,o,l]}class cn extends z{constructor(e){super(),q(this,e,Qc,Zc,U,{props:0,filterText:2})}}function xc(r){let e,n;return e=new cn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function e$(r){let e,n;return e=new le({props:{$$slots:{default:[xc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function t$(r){let e,n;return e=new cn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function n$(r){let e,n;return e=new le({props:{$$slots:{default:[t$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function r$(r){let e,n;return e=new cn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function l$(r){let e,n;return e=new le({props:{$$slots:{default:[r$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function o$(r){let e,n,t,l,o,a,u,s,i,f;const c=[D("interventions-points"),{filter:["all",gn,r[4],r[5]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[3],"circle-radius":Bt,"circle-opacity":V(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let _={$$slots:{default:[e$]},$$scope:{ctx:r}};for(let P=0;P<c.length;P+=1)_=J(_,c[P]);e=new qe({props:_});const g=[D("interventions-lines"),{filter:["all",dn,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[3],"line-width":ht,"line-opacity":V(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let k={$$slots:{default:[n$]},$$scope:{ctx:r}};for(let P=0;P<g.length;P+=1)k=J(k,g[P]);t=new ue({props:k});const T=[D("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*ht,"circle-opacity":0,"circle-stroke-color":el.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let O={};for(let P=0;P<T.length;P+=1)O=J(O,T[P]);o=new qe({props:O});const S=[D("interventions-polygons"),{filter:["all",Ft,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[3],"fill-opacity":V(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let L={$$slots:{default:[l$]},$$scope:{ctx:r}};for(let P=0;P<S.length;P+=1)L=J(L,S[P]);u=new De({props:L});const M=[D("interventions-polygons-outlines"),{filter:["all",Ft,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*ht}},{layout:{visibility:r[0]?"visible":"none"}}];let N={};for(let P=0;P<M.length;P+=1)N=J(N,M[P]);return i=new ue({props:N}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),a=A(),h(u.$$.fragment),s=A(),h(i.$$.fragment)},m(P,E){b(e,P,E),p(P,n,E),b(t,P,E),p(P,l,E),b(o,P,E),p(P,a,E),b(u,P,E),p(P,s,E),b(i,P,E),f=!0},p(P,E){const j=E&57?Y(c,[c[0],E&48&&{filter:["all",gn,P[4],P[5]]},c[2],c[3],E&8&&{paint:{"circle-color":P[3],"circle-radius":Bt,"circle-opacity":V(1,.5)}},E&1&&{layout:{visibility:P[0]?"visible":"none"}}]):{};E&258&&(j.$$scope={dirty:E,ctx:P}),e.$set(j);const I=E&25?Y(g,[g[0],E&16&&{filter:["all",dn,P[4]]},g[2],g[3],E&8&&{paint:{"line-color":P[3],"line-width":ht,"line-opacity":V(1,.5)}},E&1&&{layout:{visibility:P[0]?"visible":"none"}}]):{};E&258&&(I.$$scope={dirty:E,ctx:P}),t.$set(I);const F=E&1?Y(T,[T[0],T[1],T[2],{layout:{visibility:P[0]?"visible":"none"}}]):{};o.$set(F);const B=E&25?Y(S,[S[0],E&16&&{filter:["all",Ft,P[4]]},S[2],S[3],E&8&&{paint:{"fill-color":P[3],"fill-opacity":V(.2,.5)}},E&1&&{layout:{visibility:P[0]?"visible":"none"}}]):{};E&258&&(B.$$scope={dirty:E,ctx:P}),u.$set(B);const x=E&25?Y(M,[M[0],E&16&&{filter:["all",Ft,P[4]]},E&8&&{paint:{"line-color":P[3],"line-opacity":.5,"line-width":.7*ht}},E&1&&{layout:{visibility:P[0]?"visible":"none"}}]):{};i.$set(x)},i(P){f||($(e.$$.fragment,P),$(t.$$.fragment,P),$(o.$$.fragment,P),$(u.$$.fragment,P),$(i.$$.fragment,P),f=!0)},o(P){d(e.$$.fragment,P),d(t.$$.fragment,P),d(o.$$.fragment,P),d(u.$$.fragment,P),d(i.$$.fragment,P),f=!1},d(P){P&&(m(n),m(l),m(a),m(s)),v(e,P),v(t,P),v(o,P),v(u,P),v(i,P)}}}function s$(r){let e,n;return e=new Lt({props:{data:r[2],$$slots:{default:[o$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function i$(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,{filterText:a}=e,u=wr("v1");const s=["!=","hide_while_editing",!0],i=["!=","endpoint",!0];return r.$$set=f=>{"schemesGj"in f&&n(6,l=f.schemesGj),"showSchemes"in f&&n(0,o=f.showSchemes),"filterText"in f&&n(1,a=f.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Xr(l))},[o,a,t,u,s,i,l]}class a$ extends z{constructor(e){super(),q(this,e,i$,s$,U,{schemesGj:6,showSchemes:0,filterText:1})}}function ar(r,e,n){const t=r.slice();return t[13]=e[n],t}function f$(r){let e,n;return e=new zc({props:{loadFile:r[7]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fr(r){let e,n,t,l,o,a;function u(_){r[8](_)}function s(_){r[9](_)}function i(_){r[10](_)}function f(_){r[11](_)}let c={schemes:r[2]};return r[1]!==void 0&&(c.schemesGj=r[1]),r[3]!==void 0&&(c.schemesToBeShown=r[3]),r[4]!==void 0&&(c.filterText=r[4]),r[5]!==void 0&&(c.show=r[5]),e=new Gs({props:c}),W.push(()=>X(e,"schemesGj",u)),W.push(()=>X(e,"schemesToBeShown",s)),W.push(()=>X(e,"filterText",i)),W.push(()=>X(e,"show",f)),{c(){h(e.$$.fragment)},m(_,g){b(e,_,g),a=!0},p(_,g){const k={};g&4&&(k.schemes=_[2]),!n&&g&2&&(n=!0,k.schemesGj=_[1],K(()=>n=!1)),!t&&g&8&&(t=!0,k.schemesToBeShown=_[3],K(()=>t=!1)),!l&&g&16&&(l=!0,k.filterText=_[4],K(()=>l=!1)),!o&&g&32&&(o=!0,k.show=_[5],K(()=>o=!1)),e.$set(k)},i(_){a||($(e.$$.fragment,_),a=!0)},o(_){d(e.$$.fragment,_),a=!1},d(_){v(e,_)}}}function ur(r){let e,n;return e=new Yc({props:{schemesGj:r[1],scheme:r[13]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[13]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cr(r){let e=r[3].has(r[13].scheme_reference),n,t,l=e&&ur(r);return{c(){l&&l.c(),n=be()},m(o,a){l&&l.m(o,a),p(o,n,a),t=!0},p(o,a){a&12&&(e=o[3].has(o[13].scheme_reference)),e?l?(l.p(o,a),a&12&&$(l,1)):(l=ur(o),l.c(),$(l,1),l.m(n.parentNode,n)):l&&(se(),d(l,1,1,()=>{l=null}),ie())},i(o){t||($(l),t=!0)},o(o){d(l),t=!1},d(o){o&&m(n),l&&l.d(o)}}}function u$(r){let e,n,t,l,o,a,u,s,i,f,c=rn()=="Private (development)",_,g,k,T,O,S,L,M;o=new ll({props:{boundaryGeojson:r[1]}}),u=new Tl({}),i=new Kr({});let N=c&&f$(r);g=new ol({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),T=new vr({props:{errorMessage:r[0]}});let P=r[2].size>0&&fr(r),E=ze(r[2].values()),j=[];for(let F=0;F<E.length;F+=1)j[F]=cr(ar(r,E,F));const I=F=>d(j[F],1,1,()=>{j[F]=null});return{c(){e=C("div"),n=C("div"),t=C("h1"),t.textContent="Browse schemes",l=A(),h(o.$$.fragment),a=A(),h(u.$$.fragment),s=A(),h(i.$$.fragment),f=A(),N&&N.c(),_=A(),h(g.$$.fragment),k=A(),h(T.$$.fragment),O=A(),P&&P.c(),S=A(),L=C("ul");for(let F=0;F<j.length;F+=1)j[F].c();Se(n,"display","flex"),Se(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(F,B){p(F,e,B),y(e,n),y(n,t),y(n,l),b(o,n,null),y(e,a),b(u,e,null),y(e,s),b(i,e,null),y(e,f),N&&N.m(e,null),y(e,_),b(g,e,null),y(e,k),b(T,e,null),y(e,O),P&&P.m(e,null),y(e,S),y(e,L);for(let x=0;x<j.length;x+=1)j[x]&&j[x].m(L,null);M=!0},p(F,B){const x={};B&2&&(x.boundaryGeojson=F[1]),o.$set(x),c&&N.p(F,B);const ae={};if(B&1&&(ae.errorMessage=F[0]),T.$set(ae),F[2].size>0?P?(P.p(F,B),B&4&&$(P,1)):(P=fr(F),P.c(),$(P,1),P.m(e,S)):P&&(se(),d(P,1,1,()=>{P=null}),ie()),B&14){E=ze(F[2].values());let Z;for(Z=0;Z<E.length;Z+=1){const ve=ar(F,E,Z);j[Z]?(j[Z].p(ve,B),$(j[Z],1)):(j[Z]=cr(ve),j[Z].c(),$(j[Z],1),j[Z].m(L,null))}for(se(),Z=E.length;Z<j.length;Z+=1)I(Z);ie()}},i(F){if(!M){$(o.$$.fragment,F),$(u.$$.fragment,F),$(i.$$.fragment,F),$(N),$(g.$$.fragment,F),$(T.$$.fragment,F),$(P);for(let B=0;B<E.length;B+=1)$(j[B]);M=!0}},o(F){d(o.$$.fragment,F),d(u.$$.fragment,F),d(i.$$.fragment,F),d(N),d(g.$$.fragment,F),d(T.$$.fragment,F),d(P),j=j.filter(Boolean);for(let B=0;B<j.length;B+=1)d(j[B]);M=!1},d(F){F&&m(e),v(o),v(u),v(i),N&&N.d(),v(g),v(T),P&&P.d(),Rt(j,F)}}}function c$(r){let e,n,t,l,o,a,u;return e=new tl({}),t=new a$({props:{schemesGj:r[1],filterText:r[4],showSchemes:r[5]}}),a=new Uc({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),o=C("div"),h(a.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(s,i){b(e,s,i),p(s,n,i),b(t,s,i),p(s,l,i),p(s,o,i),b(a,o,null),u=!0},p(s,i){const f={};i&2&&(f.schemesGj=s[1]),i&16&&(f.filterText=s[4]),i&32&&(f.showSchemes=s[5]),t.$set(f)},i(s){u||($(e.$$.fragment,s),$(t.$$.fragment,s),$(a.$$.fragment,s),u=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(a.$$.fragment,s),u=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),v(a)}}}function $$(r){let e,n,t;return n=new Jr({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[c$]},$$scope:{ctx:r}}}),{c(){e=C("div"),h(n.$$.fragment),G(e,"slot","main")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const a={};o&64&&(a.style=l[6]),o&65586&&(a.$$scope={dirty:o,ctx:l}),n.$set(a)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function p$(r){let e,n;return e=new il({props:{$$slots:{main:[$$],sidebar:[u$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&65663&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function m$(r,e,n){let t;Ee(r,hn,O=>n(6,t=O)),on(()=>{Yr()});const l=new URLSearchParams(window.location.search);hn.set(l.get("style")||"dataviz");let o="",a={type:"FeatureCollection",features:[],schemes:{}},u=new Map,s=new Set,i="",f=!0;function c(O){try{n(1,a=JSON.parse(O)),n(2,u=As(a)),n(0,o="")}catch(S){n(0,o=`The file you loaded is broken: ${S}`)}}function _(O){a=O,n(1,a)}function g(O){s=O,n(3,s)}function k(O){i=O,n(4,i)}function T(O){f=O,n(5,f)}return[o,a,u,s,i,f,t,c,_,g,k,T]}class _$ extends z{constructor(e){super(),q(this,e,m$,p$,U,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new _$({target:document.getElementById("app")});
