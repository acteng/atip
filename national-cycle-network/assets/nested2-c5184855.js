import{S as q,i as W,s as G,e as A,h as z,$ as Oe,j as p,W as ee,o as m,aP as fl,b as J,c as Z,d as T,g as h,m as b,w as Tt,l as x,t as _,n as g,p as v,X as Et,Y as Dt,Z as Ft,_ as jt,a7 as qe,J as fe,K as ue,aQ as At,u as w,k,D as j,I as Ae,N as $n,O as jr,q as me,P as Rr,Q as Br,T as Lt,U as Hr,V as Gr,aX as ul,aY as at,a4 as vn,aZ as cl,f as pn,aO as $l,ar as qt,aj as Jt,ae as mn,r as _n,F as Ur,a as ln,v as Wt,aW as V,a_ as _e,a$ as ve,B as Q,ah as K,C as de,ak as Y,b0 as ne,G as yt,H as pl,aS as ml,ab as wn,b1 as Kt,R as zr,b2 as gn,E as qr,as as _l,ag as gl,aU as kn,al as dl,am as yn,an as Sn,ao as Ht,aV as Cn,L as hl,M as bl,y as vl}from"./index-eb18c555.js";import{C as Me,d as Ze,j as It,f as rt,h as se,l as B,c as Vt,k as wl,S as kl,B as yl,b as St,G as Sl}from"./StreetViewTool-da3925e0.js";import{a as Ve,F as Cl}from"./Popup-6c77b007.js";import{P as le}from"./Popup-81201e3b.js";import{R as Ol,C as nt,Z as Tl}from"./ZoomOutMap-798b91fe.js";import{L as Al,a as Ll}from"./LineMeasureController-3d4c259f.js";function Il(r){let e;return{c(){e=A("span"),z(e,"class","svelte-kzgqtg"),Oe(e,"background",r[0])},m(n,t){p(n,e,t)},p(n,[t]){t&1&&Oe(e,"background",n[0])},i:ee,o:ee,d(n){n&&m(e)}}}function Pl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class ke extends q{constructor(e){super(),W(this,e,Pl,Il,G,{color:0})}}const Ml="/atip/national-cycle-network/assets/help-d011708a.svg";function Nl(r){let e,n;const t=r[1].default,l=Et(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),z(e,"class","govuk-prose")},m(o,s){p(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&Dt(l,t,o,o[4],n?jt(t,o[4],s,null):Ft(o[4]),null)},i(o){n||(_(l,o),n=!0)},o(o){g(l,o),n=!1},d(o){o&&m(e),l&&l.d(o)}}}function El(r){let e,n,t,l,o,s,u;function i(f){r[3](f)}let a={title:"Help",$$slots:{default:[Nl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new fl({props:a}),J.push(()=>Z(t,"open",i)),{c(){e=A("button"),e.innerHTML=`<img src="${Ml}" title="Help" alt="Help"/>`,n=T(),h(t.$$.fragment),z(e,"class","svelte-7d9d1l")},m(f,c){p(f,e,c),p(f,n,c),b(t,f,c),o=!0,s||(u=Tt(e,"click",r[2]),s=!0)},p(f,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,d.open=f[0],x(()=>l=!1)),t.$set(d)},i(f){o||(_(t.$$.fragment,f),o=!0)},o(f){g(t.$$.fragment,f),o=!1},d(f){f&&(m(e),m(n)),v(t,f),s=!1,u()}}}function Dl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,u,l]}class ae extends q{constructor(e){super(),W(this,e,Dl,El,G,{})}}function On(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Tn(r){let e,n,t,l=r[1]+"",o,s,u;return n=new ke({props:{color:r[2]}}),{c(){e=A("li"),h(n.$$.fragment),t=T(),o=w(l),s=T()},m(i,a){p(i,e,a),b(n,e,null),k(e,t),k(e,o),k(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&l!==(l=i[1]+"")&&j(o,l)},i(i){u||(_(n.$$.fragment,i),u=!0)},o(i){g(n.$$.fragment,i),u=!1},d(i){i&&m(e),v(n)}}}function Fl(r){let e,n,t=qe(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Tn(On(r,t,s));const o=s=>g(l[s],1,1,()=>{l[s]=null});return{c(){e=A("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,u){p(s,e,u);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,u){if(u&1){t=qe(s[0]);let i;for(i=0;i<t.length;i+=1){const a=On(s,t,i);l[i]?(l[i].p(a,u),_(l[i],1)):(l[i]=Tn(a),l[i].c(),_(l[i],1),l[i].m(e,null))}for(fe(),i=t.length;i<l.length;i+=1)o(i);ue()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)_(l[u]);n=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(s){s&&m(e),At(l,s)}}}function jl(r){let e,n;return e=new Me({props:{label:"Legend",$$slots:{default:[Fl]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class Bl extends q{constructor(e){super(),W(this,e,Rl,jl,G,{rows:0})}}function An(r){let e=r[0],n,t,l=Ln(r);return{c(){l.c(),n=Ae()},m(o,s){l.m(o,s),p(o,n,s),t=!0},p(o,s){s&1&&G(e,e=o[0])?(fe(),g(l,1,1,ee),ue(),l=Ln(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l.d(o)}}}function Ln(r){let e;const n=r[10].default,t=Et(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Dt(t,n,l,l[9],e?jt(n,l[9],o,null):Ft(l[9]),null)},i(l){e||(_(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Hl(r){let e,n,t=r[0]&&An(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=An(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(fe(),g(t,1,1,()=>{t=null}),ue())},i(l){n||(_(t),n=!0)},o(l){g(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function Gl(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:u=$n("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=jr();me(r,f,y=>n(8,l=y)),me(r,c,y=>n(0,t=y));let d,$=!0;return Rr(()=>{t&&d&&l&&(Br(f,t,d),Lt(c,t=null,t),n(6,d=void 0))}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Lt(c,t=u,t),Hr(l,t,Gr({type:"raster",tiles:i,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,d=l==null?void 0:l.getSource(t)),n(7,$=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,d=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&d&&($?n(7,$=!1):d.setTiles(i))},[t,f,c,u,i,a,d,$,l,s,o]}class Ul extends q{constructor(e){super(),W(this,e,Gl,Hl,G,{id:3,tiles:4,tileSize:5})}}function zl(r){let e;const n=r[16].default,t=Et(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Dt(t,n,l,l[24],e?jt(n,l[24],o,null):Ft(l[24]),null)},i(l){e||(_(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function ql(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[zl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new ul({props:o}),J.push(()=>Z(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],x(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Wl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=$n("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:d=void 0}=e,{applyToClusters:$=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:O=void 0}=e,{manageHoverState:C=!1}=e,{hovered:M=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:D=!0}=e;function L(R){M=R,n(0,M)}function F(R){at.call(this,r,R)}function E(R){at.call(this,r,R)}function I(R){at.call(this,r,R)}function P(R){at.call(this,r,R)}function H(R){at.call(this,r,R)}function X(R){at.call(this,r,R)}return r.$$set=R=>{"id"in R&&n(1,o=R.id),"source"in R&&n(2,s=R.source),"sourceLayer"in R&&n(3,u=R.sourceLayer),"beforeId"in R&&n(4,i=R.beforeId),"beforeLayerType"in R&&n(5,a=R.beforeLayerType),"paint"in R&&n(6,f=R.paint),"layout"in R&&n(7,c=R.layout),"filter"in R&&n(8,d=R.filter),"applyToClusters"in R&&n(9,$=R.applyToClusters),"minzoom"in R&&n(10,y=R.minzoom),"maxzoom"in R&&n(11,S=R.maxzoom),"hoverCursor"in R&&n(12,O=R.hoverCursor),"manageHoverState"in R&&n(13,C=R.manageHoverState),"hovered"in R&&n(0,M=R.hovered),"eventsIfTopMost"in R&&n(14,N=R.eventsIfTopMost),"interactive"in R&&n(15,D=R.interactive),"$$scope"in R&&n(24,l=R.$$scope)},[M,o,s,u,i,a,f,c,d,$,y,S,O,C,N,D,t,L,F,E,I,P,H,X,l]}class Vl extends q{constructor(e){super(),W(this,e,Wl,ql,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function In(r){let e=r[0],n,t,l=Pn(r);return{c(){l.c(),n=Ae()},m(o,s){l.m(o,s),p(o,n,s),t=!0},p(o,s){s&1&&G(e,e=o[0])?(fe(),g(l,1,1,ee),ue(),l=Pn(o),l.c(),_(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(_(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l.d(o)}}}function Pn(r){let e;const n=r[9].default,t=Et(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Dt(t,n,l,l[8],e?jt(n,l[8],o,null):Ft(l[8]),null)},i(l){e||(_(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function Xl(r){let e,n,t=r[0]&&In(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&_(t,1)):(t=In(l),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(fe(),g(t,1,1,()=>{t=null}),ue())},i(l){n||(_(t),n=!0)},o(l){g(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function Ql(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:u=$n("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!vn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new cl;vn.addProtocol("pmtiles",y.tile)}const{map:c,self:d}=jr();me(r,c,y=>n(7,l=y)),me(r,d,y=>n(0,t=y));let $;return Rr(()=>{t&&l&&(Br(c,t,$),Lt(d,t=null,t),$=void 0)}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Lt(d,t=u,t),Hr(l,t,Gr({type:"vector",url:i,tiles:a,promoteId:f}),y=>l&&y===t,()=>{t&&($=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{$=l==null?void 0:l.getSource(u)}))},[t,c,d,u,i,a,f,l,s,o]}class he extends q{constructor(e){super(),W(this,e,Ql,Xl,G,{id:3,url:4,tiles:5,promoteId:6})}}function Jl(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Kl(r){let e,n,t=r[0]=="Private (development)"&&Jl();return{c(){t&&t.c(),e=T(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),p(l,e,o),p(l,n,o)},p:ee,d(l){l&&(m(e),m(n)),t&&t.d(l)}}}function Yl(r){let e,n,t,l,o,s;return o=new ae({props:{$$slots:{default:[Kl]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=T(),h(o.$$.fragment)},m(u,i){p(u,e,i),k(e,n),k(e,t),k(e,l),b(o,e,null),s=!0},p(u,[i]){const a={};i&2&&(a.$$scope={dirty:i,ctx:u}),o.$set(a)},i(u){s||(_(o.$$.fragment,u),s=!0)},o(u){g(o.$$.fragment,u),s=!1},d(u){u&&m(e),v(o)}}}function Zl(r){return[pn()]}class xl extends q{constructor(e){super(),W(this,e,Zl,Yl,G,{})}}const eo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Se=Uint8Array,st=Uint16Array,Wr=Uint32Array,Vr=new Se([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Xr=new Se([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),to=new Se([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Qr=function(r,e){for(var n=new st(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Wr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Jr=Qr(Vr,2),Kr=Jr[0],no=Jr[1];Kr[28]=258,no[258]=28;var ro=Qr(Xr,0),lo=ro[0],on=new st(32768);for(var ie=0;ie<32768;++ie){var et=(ie&43690)>>>1|(ie&21845)<<1;et=(et&52428)>>>2|(et&13107)<<2,et=(et&61680)>>>4|(et&3855)<<4,on[ie]=((et&65280)>>>8|(et&255)<<8)>>>1}var Ot=function(r,e,n){for(var t=r.length,l=0,o=new st(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new st(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var u;if(n){u=new st(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=s[r[l]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)u[on[c]>>>i]=a}else for(u=new st(t),l=0;l<t;++l)r[l]&&(u[l]=on[s[r[l]-1]++]>>>15-r[l]);return u},Rt=new Se(288);for(var ie=0;ie<144;++ie)Rt[ie]=8;for(var ie=144;ie<256;++ie)Rt[ie]=9;for(var ie=256;ie<280;++ie)Rt[ie]=7;for(var ie=280;ie<288;++ie)Rt[ie]=8;var Yr=new Se(32);for(var ie=0;ie<32;++ie)Yr[ie]=5;var oo=Ot(Rt,9,1),so=Ot(Yr,5,1),Yt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Ie=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Zt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},io=function(r){return(r+7)/8|0},dn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?st:r.BYTES_PER_ELEMENT==4?Wr:Se)(n-e);return t.set(r.subarray(e,n)),t},ao=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pe=function(r,e,n){var t=new Error(e||ao[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Pe),!n)throw t;return t},fo=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Se(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Se(t*3));var s=function(ge){var je=e.length;if(ge>je){var Ke=new Se(Math.max(je*2,ge));Ke.set(e),e=Ke}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,d=n.m,$=n.n,y=t*8;do{if(!f){u=Ie(r,i,1);var S=Ie(r,i+1,3);if(i+=3,S)if(S==1)f=oo,c=so,d=9,$=5;else if(S==2){var N=Ie(r,i,31)+257,D=Ie(r,i+10,15)+4,L=N+Ie(r,i+5,31)+1;i+=14;for(var F=new Se(L),E=new Se(19),I=0;I<D;++I)E[to[I]]=Ie(r,i+I*3,7);i+=D*3;for(var P=Yt(E),H=(1<<P)-1,X=Ot(E,P,1),I=0;I<L;){var R=X[Ie(r,i,H)];i+=R&15;var O=R>>>4;if(O<16)F[I++]=O;else{var U=0,$e=0;for(O==16?($e=3+Ie(r,i,3),i+=2,U=F[I-1]):O==17?($e=3+Ie(r,i,7),i+=3):O==18&&($e=11+Ie(r,i,127),i+=7);$e--;)F[I++]=U}}var De=F.subarray(0,N),be=F.subarray(N);d=Yt(De),$=Yt(be),f=Ot(De,d,1),c=Ot(be,$,1)}else Pe(1);else{var O=io(i)+4,C=r[O-4]|r[O-3]<<8,M=O+C;if(M>t){o&&Pe(0);break}l&&s(a+C),e.set(r.subarray(O,M),a),n.b=a+=C,n.p=i=M*8,n.f=u;continue}if(i>y){o&&Pe(0);break}}l&&s(a+131072);for(var Je=(1<<d)-1,pe=(1<<$)-1,ce=i;;ce=i){var U=f[Zt(r,i)&Je],re=U>>>4;if(i+=U&15,i>y){o&&Pe(0);break}if(U||Pe(2),re<256)e[a++]=re;else if(re==256){ce=i,f=null;break}else{var xe=re-254;if(re>264){var I=re-257,Te=Vr[I];xe=Ie(r,i,(1<<Te)-1)+Kr[I],i+=Te}var Le=c[Zt(r,i)&pe],Fe=Le>>>4;Le||Pe(3),i+=Le&15;var be=lo[Fe];if(Fe>3){var Te=Xr[Fe];be+=Zt(r,i)&(1<<Te)-1,i+=Te}if(i>y){o&&Pe(0);break}l&&s(a+131072);for(var oe=a+xe;a<oe;a+=4)e[a]=e[a-be],e[a+1]=e[a+1-be],e[a+2]=e[a+2-be],e[a+3]=e[a+3-be];a=oe}}n.l=f,n.p=ce,n.b=a,n.f=u,f&&(u=1,n.m=d,n.d=c,n.n=$)}while(!u);return a==e.length?e:dn(e,0,a)},uo=new Se(0),ze=function(r,e){return r[e]|r[e+1]<<8},Ne=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},xt=function(r,e){return Ne(r,e)+Ne(r,e+4)*4294967296};function co(r,e){return fo(r,e)}var sn=typeof TextDecoder<"u"&&new TextDecoder,$o=0;try{sn.decode(uo,{stream:!0}),$o=1}catch{}var po=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,dn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Zr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(sn)return sn.decode(r);var l=po(r),o=l[0],s=l[1];return s.length&&Pe(8),o}}var mo=function(r,e){return e+30+ze(r,e+26)+ze(r,e+28)},_o=function(r,e,n){var t=ze(r,e+28),l=Zr(r.subarray(e+46,e+46+t),!(ze(r,e+8)&2048)),o=e+46+t,s=Ne(r,e+20),u=n&&s==4294967295?go(r,o):[s,Ne(r,e+24),Ne(r,e+42)],i=u[0],a=u[1],f=u[2];return[ze(r,e+10),i,a,l,o+ze(r,e+30)+ze(r,e+32),f]},go=function(r,e){for(;ze(r,e)!=1;e+=4+ze(r,e+2));return[xt(r,e+12),xt(r,e+4),xt(r,e+20)]};function ho(r,e){for(var n={},t=r.length-22;Ne(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Pe(13);var l=ze(r,t+8);if(!l)return{};var o=Ne(r,t+16),s=o==4294967295||l==65535;if(s){var u=Ne(r,t-12);s=Ne(r,u)==101075792,s&&(l=Ne(r,u+32),o=Ne(r,u+48))}for(var i=e&&e.filter,a=0;a<l;++a){var f=_o(r,o,s),c=f[0],d=f[1],$=f[2],y=f[3],S=f[4],O=f[5],C=mo(r,O);o=S,(!i||i({name:y,size:d,originalSize:$,compression:c}))&&(c?c==8?n[y]=co(r.subarray(C,C+d),new Se($)):Pe(14,"unknown compression type "+c):n[y]=dn(r,C,C+d))}return n}function bo(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(en):en(r)}function en(r){var e=new Uint8Array(r),n=ho(e);return Promise.resolve(vo(n))}function vo(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Zr(r[l])}return e}function We(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&it(t)===e)return t;n++}}function Bt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&it(l)===e&&n.push(l),t++}return n}function Xt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&it(l)===e&&n(l,t):n(l,t),t++}}function wo(r,e,n){var t=[];return Xt(r,e,function(l,o){t.push(n(l,o))}),t}var ko=/.+\:/;function it(r){return r.tagName.replace(ko,"")}function xr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+it(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=xr(r.childNodes[t]),t++;return e+="</"+it(r)+">",e}function yo(r){var e=r.documentElement,n=We(e,"sheetData"),t=[];return Xt(n,"row",function(l){Xt(l,"c",function(o){t.push(o)})}),t}function So(r,e){return We(e,"v")}function Co(r,e){if(e.firstChild&&it(e.firstChild)==="is"&&e.firstChild.firstChild&&it(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Oo(r){var e=r.documentElement,n=We(e,"dimension");if(n)return n.getAttribute("ref")}function To(r){var e=r.documentElement,n=We(e,"cellStyleXfs");return n?Bt(n,"xf"):[]}function Ao(r){var e=r.documentElement,n=We(e,"cellXfs");return n?Bt(n,"xf"):[]}function Lo(r){var e=r.documentElement,n=We(e,"numFmts");return n?Bt(n,"numFmt"):[]}function Io(r){var e=r.documentElement;return wo(e,"si",function(n){var t=We(n,"t");if(t)return t.textContent;var l="";return Xt(n,"r",function(o){l+=We(o,"t").textContent}),l})}function Po(r){var e=r.documentElement;return We(e,"workbookPr")}function Mo(r){var e=r.documentElement;return Bt(e,"Relationship")}function No(r){var e=r.documentElement,n=We(e,"sheets");return Bt(n,"sheet")}function Eo(r,e){var n=e.createDocument(r),t={},l=Po(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return No(n).forEach(o),t}function Do(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=tn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=tn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=tn(u);break}};return Mo(n).forEach(l),t}function tn(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Mn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Nn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mn(Object(n),!0).forEach(function(t){Fo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Fo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function jo(r,e){if(!r)return{};var n=e.createDocument(r),t=To(n).map(nn),l=Lo(n).map(Ro).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?Nn(Nn({},t[u.xfId]),nn(u,l)):nn(u,l)};return Ao(n).map(o)}function Ro(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function nn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Bo(r,e){return r?Io(e.createDocument(r)):[]}function el(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Ho(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Go(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Go(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Uo(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(zo.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&Vo(l.numberFormat.template))return!0}}var zo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],qo=/^\[\$-414\]/,Wo=/;@$/;function Vo(r){r=r.toLowerCase(),r=r.replace(qo,""),r=r.replace(Wo,"");for(var e=r.split(/\W+/),n=Ho(e),t;!(t=n()).done;){var l=t.value;if(Xo.indexOf(l)<0)return!1}return!0}var Xo=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Qo(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=rn(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=rn(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=rn(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Jo(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var d=Number(r);if(isNaN(d))throw new Error('Invalid "numeric" cell value: '.concat(r));r=d,Uo(r,o(),s,a)&&(r=el(r,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Jo(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function rn(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Ko=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Yo(r){var e=function(a,f){return a-f},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:l,column:s},{row:o,column:u}]}function Zo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Ko.indexOf(r[n]),n++;return e}function tl(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Zo(r[0].trim())]}function xo(r,e,n,t,l,o,s){var u=tl(r.getAttribute("r")),i=So(e,r),a=i&&i.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:Qo(a,f,{getInlineStringValue:function(){return Co(e,r)},getInlineStringXml:function(){return xr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function es(r,e,n,t,l,o){var s=yo(r);return s.length===0?[]:s.map(function(u){return xo(u,r,e,n,t,l,o)})}function ts(r,e){return os(r)||ls(r,e)||rs(r,e)||ns()}function ns(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rs(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ls(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function os(r){if(Array.isArray(r))return r}function ss(r){var e=Oo(r);if(e)return e=e.split(":").map(tl).map(function(n){var t=ts(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function is(r,e,n,t,l,o){var s=e.createDocument(r),u=es(s,e,n,t,l,o),i=ss(s)||Yo(u);return{cells:u,dimensions:i}}function as(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=fs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fs(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function us(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var u=!0,i=as(r[s]),a;!(a=i()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function cs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=$s(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $s(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ps(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,u=cs(r),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function ms(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=nl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _s(r,e){return hs(r)||ds(r,e)||nl(r,e)||gs()}function gs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nl(r,e){if(r){if(typeof r=="string")return Rn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rn(r,e)}}function Rn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ds(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function hs(r){if(Array.isArray(r))return r}function bs(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=_s(n,2);l[0];for(var o=l[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=ms(t),d;!(d=c()).done;){var $=d.value,y=$.row-1,S=$.column-1;S<s&&y<u&&(i[y][S]=$.value)}var O=e.rowMap;if(O)for(var C=0;C<i.length;)O[C]=C,C++;return i=us(ps(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:O}),e.transformData&&(i=e.transformData(i)),i}function vs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ws(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ws(r,e){if(r){if(typeof r=="string")return Bn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bn(r,e)}}function Bn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Hn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function ks(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Hn(Object(n),!0).forEach(function(t){ys(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ys(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ss(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=ks({sheet:1},n));var t=function(d){if(!r[d])throw new Error('"'.concat(d,'" file not found inside the *.xlsx file zip archive'));return r[d]},l=Do(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Bo(t(l.sharedStrings),e):[],s=l.styles?jo(t(l.styles),e):{},u=Eo(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var d=c.name;return{name:d}});var i=Cs(n.sheet,u.sheets);if(!i||!l.sheets[i])throw Os(n.sheet,u.sheets);var a=is(t(l.sheets[i]),e,o,s,u,n),f=bs(a,n);return n.properties?{data:f,properties:u}:f}function Cs(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=vs(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Os(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function an(r){"@babel/helpers - typeof";return an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(r)}function Gn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Ts(r,e,n){return e&&Gn(r.prototype,e),n&&Gn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function As(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Ls(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Pt(r,e)}function Is(r){var e=rl();return function(){var t=Mt(r),l;if(e){var o=Mt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return Ps(this,l)}}function Ps(r,e){if(e&&(an(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ms(r)}function Ms(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function fn(r){var e=typeof Map=="function"?new Map:void 0;return fn=function(t){if(t===null||!Ns(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Ut(t,arguments,Mt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Pt(l,t)},fn(r)}function Ut(r,e,n){return rl()?Ut=Reflect.construct:Ut=function(l,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(l,u),a=new i;return s&&Pt(a,s.prototype),a},Ut.apply(null,arguments)}function rl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ns(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Pt(r,e){return Pt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Pt(r,e)}function Mt(r){return Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Mt(r)}var Ce=function(r){Ls(n,r);var e=Is(n);function n(t){var l;return As(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Ts(n)}(fn(Error));function Es(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Ce("not_a_number")}if(typeof r!="number")throw new Ce("not_a_number");if(isNaN(r))throw new Ce("invalid_number");if(!isFinite(r))throw new Ce("out_of_bounds");return r}function Ds(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Ce("invalid_number");if(!isFinite(r))throw new Ce("out_of_bounds");return String(r)}throw new Ce("not_a_string")}function Fs(r){if(typeof r=="boolean")return r;throw new Ce("not_a_boolean")}function js(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Ce("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Ce("invalid_number");if(!isFinite(r))throw new Ce("out_of_bounds");var t=el(r,n);if(isNaN(t.valueOf()))throw new Ce("out_of_bounds");return t}throw new Ce("not_a_date")}function Rs(r,e){return Gs(r)||Hs(r,e)||ll(r,e)||Bs()}function Bs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hs(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,u;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,u=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Gs(r){if(Array.isArray(r))return r}function un(r){"@babel/helpers - typeof";return un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(r)}function Us(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ll(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ll(r,e){if(r){if(typeof r=="string")return Un(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(r,e)}}function Un(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function zn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function qn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zn(Object(n),!0).forEach(function(t){zs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):zn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function zs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Wn={isColumnOriented:!1};function qs(r,e,n){n?n=qn(qn({},Wn),n):n=Wn;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;Qs(e),l&&(r=Xs(r));for(var u=r[0],i=[],a=[],f=1;f<r.length;f++){var c=ol(e,r[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var d=Us(a),$;!($=d()).done;){var y=$.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function ol(r,e,n,t,l,o){for(var s={},u=!0,i=function(){var d=f[a],$=r[d],y=un($.type)==="object"&&!Array.isArray($.type),S=e[t.indexOf(d)];S===void 0&&(S=null);var O=void 0,C=void 0,M=void 0;if(y)O=ol($.type,e,n,t,l,o);else if(S===null)O=null;else if(Array.isArray($.type)){var N=!1,D=Vs(S).map(function(F){var E=Vn(F,$,o);return E.error&&(O=F,C=E.error,M=E.reason),E.value!==null&&(N=!0),E.value});C||(O=N?D:null)}else{var L=Vn(S,$,o);C=L.error,M=L.reason,O=C?S:L.value}!C&&O===null&&$.required&&(C="required"),C?(C={error:C,row:n+1,column:d,value:O},M&&(C.reason=M),$.type&&(C.type=$.type),l.push(C)):(u&&O!==null&&(u=!1),(O!==null||o.includeNullValues)&&(s[$.prop]=O))},a=0,f=Object.keys(r);a<f.length;a++)i();return u?null:s}function Vn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=ft(r,e.parse):e.type?t=Ws(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function ft(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Ws(r,e,n){switch(e){case String:return ft(r,Ds);case Number:return ft(r,Es);case Date:return ft(r,function(t){return js(t,{properties:n.properties})});case Boolean:return ft(r,Fs);default:if(typeof e=="function")return ft(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function sl(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=sl(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function Vs(r){for(var e=[],n=0;n<r.length;){var t=sl(r,",",n),l=Rs(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var Xs=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function Qs(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function cn(r){"@babel/helpers - typeof";return cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(r)}function il(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;cn(o)==="object"&&(o=Object.keys(r[l])[0],s=il(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var Js=["schema","map"];function Xn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Gt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xn(Object(n),!0).forEach(function(t){Ks(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ks(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Ys(r,e){if(r==null)return{};var n=Zs(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Zs(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function xs(r,e,n){var t=n.schema,l=n.map,o=Ys(n,Js);!t&&l&&(t=il(l));var s=Ss(r,e,Gt(Gt({},o),{},{properties:t||o.properties}));return t?qs(s.data,t,Gt(Gt({},o),{},{properties:s.properties})):s}function ei(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return bo(r).then(function(n){return xs(n,eo,e)})}function ti(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>ni(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(l.browse.num_features=l.browse.num_features!==void 0?l.browse.num_features+1:1,t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function ni(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function ri(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await ei(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=$l(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function al(r){return qt(["get","intervention_type"],{area:Ze.area,route:Ze.route,crossing:Ze.crossing,other:Ze.other},"white")}function Qn(r){return[["Areas",Ze.area],["Routes",Ze.route],["Crossings",Ze.crossing],["Other",Ze.other]]}const te={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},Ee=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20],kt=Jt({type:"FeatureCollection",features:[],schemes:{}}),Nt=Jt(new Map),Jn=Jt(!0),zt=Jt("");function li(r){let e,n,t,l,o;function s(i){r[3](i)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new It({props:u}),J.push(()=>Z(e,"value",s)),e.$on("change",r[2]),l=new Bl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],x(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=i[1]),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}function Kn(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function oi(r,e,n){let t,l;me(r,Nt,c=>n(4,t=c)),me(r,mn,c=>n(5,l=c));let o="interventionType",s=Qn();function u(){let c;o=="interventionType"?(c=al(),n(1,s=Qn())):o=="fundingProgramme"?c=i():o=="currentMilestone"&&(c=a()),l.setPaintProperty("interventions-points","circle-color",c),l.setPaintProperty("interventions-lines","line-color",c),l.setPaintProperty("interventions-polygons","fill-color",c),l.setPaintProperty("interventions-polygons-outlines","line-color",c)}function i(){var O;let c=new Set;for(let C of t.values())(O=C.browse)!=null&&O.funding_programme&&c.add(C.browse.funding_programme);let d=Array.from(c);d.sort();let[$,y]=Kn(d,te.funding_programmes),S=qt(["get","funding_programme"],$,"grey");return n(1,s=y),S}function a(){let c=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[d,$]=Kn(c,te.current_milestone),y=qt(["get","current_milestone"],d,"grey");return n(1,s=$),y}function f(c){o=c,n(0,o)}return[o,s,u,f]}class si extends q{constructor(e){super(),W(this,e,oi,li,G,{})}}function ii(r){let e;return{c(){e=w("Clear")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ai(r){let e,n,t,l,o,s;return t=new ln({props:{$$slots:{default:[ii]},$$scope:{ctx:r}}}),t.$on("click",r[11]),{c(){e=A("input"),n=T(),h(t.$$.fragment),z(e,"type","text"),z(e,"class","govuk-input govuk-input--width-10"),z(e,"id","filterText")},m(u,i){p(u,e,i),Wt(e,r[4]),p(u,n,i),b(t,u,i),l=!0,o||(s=Tt(e,"input",r[10]),o=!0)},p(u,i){i&16&&e.value!==u[4]&&Wt(e,u[4]);const a={};i&65536&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){l||(_(t.$$.fragment,u),l=!0)},o(u){g(t.$$.fragment,u),l=!1},d(u){u&&(m(e),m(n)),v(t,u),o=!1,s()}}}function fi(r){let e,n,t,l,o,s,u,i,a,f;function c(S){r[8](S)}let d={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(d.value=r[2]),e=new It({props:d}),J.push(()=>Z(e,"value",c));function $(S){r[9](S)}let y={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(y.value=r[3]),l=new It({props:y}),J.push(()=>Z(l,"value",$)),u=new Ur({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[ai]},$$scope:{ctx:r}}}),a=new si({}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment),s=T(),h(u.$$.fragment),i=T(),h(a.$$.fragment)},m(S,O){b(e,S,O),p(S,t,O),b(l,S,O),p(S,s,O),b(u,S,O),p(S,i,O),b(a,S,O),f=!0},p(S,O){const C={};O&32&&(C.choices=S[5]),!n&&O&4&&(n=!0,C.value=S[2],x(()=>n=!1)),e.$set(C);const M={};O&64&&(M.choices=S[6]),!o&&O&8&&(o=!0,M.value=S[3],x(()=>o=!1)),l.$set(M);const N={};O&65552&&(N.$$scope={dirty:O,ctx:S}),u.$set(N)},i(S){f||(_(e.$$.fragment,S),_(l.$$.fragment,S),_(u.$$.fragment,S),_(a.$$.fragment,S),f=!0)},o(S){g(e.$$.fragment,S),g(l.$$.fragment,S),g(u.$$.fragment,S),g(a.$$.fragment,S),f=!1},d(S){S&&(m(t),m(s),m(i)),v(e,S),v(l,S),v(u,S),v(a,S)}}}function ui(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",s,u,i=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",d,$,y=r[7].other.toLocaleString()+"",S,O,C=Yn(r[7].totalLength).toFixed(1)+"",M,N;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),s=w(o),u=w(`
    routes, `),a=w(i),f=w(` areas,
    `),d=w(c),$=w(" crossings, "),S=w(y),O=w(`
    other, with total LineString length of `),M=w(C),N=w(" miles)")},m(D,L){p(D,e,L),p(D,t,L),p(D,l,L),p(D,s,L),p(D,u,L),p(D,a,L),p(D,f,L),p(D,d,L),p(D,$,L),p(D,S,L),p(D,O,L),p(D,M,L),p(D,N,L)},p(D,L){L&1&&n!==(n=D[0].size.toLocaleString()+"")&&j(t,n),L&128&&o!==(o=D[7].route.toLocaleString()+"")&&j(s,o),L&128&&i!==(i=D[7].area.toLocaleString()+"")&&j(a,i),L&128&&c!==(c=D[7].crossing.toLocaleString()+"")&&j(d,c),L&128&&y!==(y=D[7].other.toLocaleString()+"")&&j(S,y),L&128&&C!==(C=Yn(D[7].totalLength).toFixed(1)+"")&&j(M,C)},d(D){D&&(m(e),m(t),m(l),m(s),m(u),m(a),m(f),m(d),m($),m(S),m(O),m(M),m(N))}}}function ci(r){let e,n,t;function l(s){r[12](s)}let o={id:"show-schemes",$$slots:{default:[ui]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),J.push(()=>Z(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&65665&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],x(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function $i(r){let e,n,t,l;return e=new Me({props:{label:"Filters",$$slots:{default:[fi]},$$scope:{ctx:r}}}),t=new rt({props:{small:!0,$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,[s]){const u={};s&65660&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&65667&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Yn(r){return r*621371e-9}function pi(r,e,n){let t,l,o;me(r,zt,N=>n(4,t=N)),me(r,kt,N=>n(13,l=N)),me(r,Nt,N=>n(14,o=N));let{schemesToBeShown:s=new Set}=e,{show:u=!0}=e,i=[],a="",f=[],c="",d={area:0,route:0,crossing:0,other:0,totalLength:0};_n(()=>{var L,F;let N=new Set,D=new Set;for(let E of o.values())(L=E.browse)!=null&&L.authority_or_region&&N.add(E.browse.authority_or_region),(F=E.browse)!=null&&F.funding_programme&&D.add(E.browse.funding_programme);n(5,i=Array.from(N.entries())),i.sort(),n(6,f=Array.from(D.entries())),f.sort()});function $(N,D,L){let F=N.toLowerCase(),E=P=>{var H,X,R,U;if(F&&!((H=P.properties.name)!=null&&H.toLowerCase().includes(F))&&!((X=P.properties.description)!=null&&X.toLowerCase().includes(F)))return!1;if(D||L){let $e=o.get(P.properties.scheme_reference);if(D&&((R=$e.browse)==null?void 0:R.authority_or_region)!=D||L&&((U=$e.browse)==null?void 0:U.funding_programme)!=L)return!1}return!0};n(0,s=new Set(l.features.filter(E).map(P=>P.properties.scheme_reference))),n(7,d={area:0,route:0,crossing:0,other:0,totalLength:0});let I=P=>{var H,X;return!(!s.has(P.properties.scheme_reference)||F&&!((H=P.properties.name)!=null&&H.toLowerCase().includes(F))&&!((X=P.properties.description)!=null&&X.toLowerCase().includes(F)))};for(let P of l.features)I(P)?(delete P.properties.hide_while_editing,n(7,d[P.properties.intervention_type]++,d),P.geometry.type=="LineString"&&P.properties.length_meters&&n(7,d.totalLength+=P.properties.length_meters,d)):P.properties.hide_while_editing=!0;kt.set(l),n(7,d)}function y(N){a=N,n(2,a)}function S(N){c=N,n(3,c)}function O(){t=this.value,zt.set(t)}const C=()=>Lt(zt,t="",t);function M(N){u=N,n(1,u)}return r.$$set=N=>{"schemesToBeShown"in N&&n(0,s=N.schemesToBeShown),"show"in N&&n(1,u=N.show)},r.$$.update=()=>{r.$$.dirty&28&&$(t,a,c)},[s,u,a,c,t,i,f,d,y,S,O,C,M]}class mi extends q{constructor(e){super(),W(this,e,pi,$i,G,{schemesToBeShown:0,show:1})}}function _i(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function gi(r){let e,n,t,l,o;return t=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[_i]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,u){p(s,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(_(t.$$.fragment,s),o=!0)},o(s){g(t.$$.fragment,s),o=!1},d(s){s&&m(e),v(t)}}}class Xe extends q{constructor(e){super(),W(this,e,null,gi,G,{})}}function Zn(r,e,n){const t=r.slice();return t[2]=e[n],t}function xn(r,e,n){const t=r.slice();return t[5]=e[n],t}function er(r){let e,n;return{c(){e=A("span"),n=w(`
    `),Oe(e,"background",r[5]),Oe(e,"width","100%"),Oe(e,"border","1px solid black")},m(t,l){p(t,e,l),k(e,n)},p(t,l){l&1&&Oe(e,"background",t[5])},d(t){t&&m(e)}}}function tr(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&j(t,n)},d(l){l&&m(e)}}}function di(r){let e,n,t,l=qe(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=er(xn(r,l,i));let s=qe(r[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=tr(Zn(r,s,i));return{c(){e=A("div");for(let i=0;i<o.length;i+=1)o[i].c();n=T(),t=A("div");for(let i=0;i<u.length;i+=1)u[i].c();Oe(e,"display","flex"),Oe(t,"display","flex"),Oe(t,"justify-content","space-between")},m(i,a){p(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);p(i,n,a),p(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){l=qe(i[0]);let f;for(f=0;f<l.length;f+=1){const c=xn(i,l,f);o[f]?o[f].p(c,a):(o[f]=er(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){s=qe(i[1]);let f;for(f=0;f<s.length;f+=1){const c=Zn(i,s,f);u[f]?u[f].p(c,a):(u[f]=tr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:ee,o:ee,d(i){i&&(m(e),m(n),m(t)),At(o,i),At(u,i)}}}function hi(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Qe extends q{constructor(e){super(),W(this,e,hi,di,G,{colorScale:0,limits:1})}}function nr(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function bi(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function vi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function wi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ki(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function yi(r){let e,n,t,l,o,s,u,i,a,f,c,d;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[vi]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[wi]},$$scope:{ctx:r}}}),f=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ki]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),s=w("."),u=T(),i=A("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m($,y){p($,e,y),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,s),p($,u,y),p($,i,y),k(i,a),b(f,i,null),k(i,c),d=!0},p($,y){const S={};y&65536&&(S.$$scope={dirty:y,ctx:$}),t.$set(S);const O={};y&65536&&(O.$$scope={dirty:y,ctx:$}),o.$set(O);const C={};y&65536&&(C.$$scope={dirty:y,ctx:$}),f.$set(C)},i($){d||(_(t.$$.fragment,$),_(o.$$.fragment,$),_(f.$$.fragment,$),d=!0)},o($){g(t.$$.fragment,$),g(o.$$.fragment,$),g(f.$$.fragment,$),d=!1},d($){$&&(m(e),m(u),m(i)),v(t),v(o),v(f)}}}function Si(r){let e,n,t;return n=new ae({props:{$$slots:{default:[yi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function rr(r){let e,n;return e=new Qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ci(r){let e;return{c(){e=w("Average cars per household")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Oi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ti(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ai(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Li(r){let e,n,t,l,o,s,u,i,a,f,c,d,$,y;return o=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Oi]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ti]},$$scope:{ctx:r}}}),d=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ai]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=T(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=w(". Output area boundaries from "),h(u.$$.fragment),i=w("."),a=T(),f=A("p"),c=w("License: "),h(d.$$.fragment),$=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(S,O){p(S,e,O),p(S,n,O),p(S,t,O),k(t,l),b(o,t,null),k(t,s),b(u,t,null),k(t,i),p(S,a,O),p(S,f,O),k(f,c),b(d,f,null),k(f,$),y=!0},p(S,O){const C={};O&65536&&(C.$$scope={dirty:O,ctx:S}),o.$set(C);const M={};O&65536&&(M.$$scope={dirty:O,ctx:S}),u.$set(M);const N={};O&65536&&(N.$$scope={dirty:O,ctx:S}),d.$set(N)},i(S){y||(_(o.$$.fragment,S),_(u.$$.fragment,S),_(d.$$.fragment,S),y=!0)},o(S){g(o.$$.fragment,S),g(u.$$.fragment,S),g(d.$$.fragment,S),y=!1},d(S){S&&(m(e),m(n),m(t),m(a),m(f)),v(o),v(u),v(d)}}}function Ii(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Li]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function lr(r){let e,n;return e=new Qe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pi(r){let e;return{c(){e=w("Population density")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Mi(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ni(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ei(r){let e,n,t,l,o,s,u,i,a;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Mi]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ni]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),s=w("."),u=T(),h(i.$$.fragment)},m(f,c){p(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,s),p(f,u,c),b(i,f,c),a=!0},p(f,c){const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const $={};c&65536&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(i,f)}}}function Di(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function or(r){let e,n,t,l;return t=new Qe({props:{colorScale:r[4],limits:r[6]().map(zi)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=T(),h(t.$$.fragment)},m(o,s){p(o,e,s),p(o,n,s),b(t,o,s),l=!0},p:ee,i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),v(t,o)}}}function Fi(r){let e,n,t,l=r[15].toLocaleString()+"",o,s,u=r[14]+"",i;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),s=w(`
          people per square kilometre in `),i=w(u)},m(a,f){p(a,e,f),k(e,n),k(e,t),k(t,o),k(e,s),k(e,i)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&j(o,l),f&8192&&u!==(u=a[14]+"")&&j(i,u)},d(a){a&&m(e)}}}function ji(r){let e,n,t=r[14]+"",l,o,s,u=r[15]+"",i,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),s=A("b"),i=w(u),a=w(`
          cars`)},m(f,c){p(f,e,c),k(e,n),k(e,l),k(e,o),k(e,s),k(s,i),k(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&j(l,t),c&8200&&u!==(u=f[15]+"")&&j(i,u)},d(f){f&&m(e)}}}function Ri(r){let e,n,t=r[15]+"",l,o,s,u=r[14]+"",i,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),s=w(`
          of households in `),i=w(u),a=w(" have 1 or more cars")},m(f,c){p(f,e,c),k(e,n),k(n,l),k(n,o),k(e,s),k(e,i),k(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&j(l,t),c&8192&&u!==(u=f[14]+"")&&j(i,u)},d(f){f&&m(e)}}}function Bi(r){nr(r);let e;function n(o,s){return o[3]=="percent_households_with_car"?Ri:o[3]=="average_cars_per_household"?ji:Fi}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,s){l.m(o,s),p(o,e,s)},p(o,s){nr(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function Hi(r){let e,n;return e=new le({props:{$$slots:{default:[Bi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gi(r){let e,n,t,l;const o=[B(Ye),{sourceLayer:Ye},{paint:{"fill-color":ve(["get",r[3]],r[6](),r[4]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Hi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=K(s,o[a]);e=new Ve({props:s}),e.$on("click",r[5]);const u=[B(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=K(i,u[a]);return t=new de({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Y(o,[f&0&&ne(B(Ye)),f&0&&{sourceLayer:Ye},f&88&&{paint:{"fill-color":ve(["get",a[3]],a[6](),a[4]),"fill-opacity":Q(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&8?Y(u,[f&0&&ne(B(`${Ye}-outline`)),f&0&&{sourceLayer:Ye},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Ui(r){let e,n,t,l,o,s,u,i,a,f,c,d,$,y;function S(I){r[7](I)}let O={id:"percent_households_with_car",$$slots:{right:[Si],default:[bi]},$$scope:{ctx:r}};r[0]!==void 0&&(O.checked=r[0]),e=new se({props:O}),J.push(()=>Z(e,"checked",S)),e.$on("change",r[8]);let C=r[3]=="percent_households_with_car"&&rr(r);function M(I){r[9](I)}let N={id:"average_cars_per_household",$$slots:{right:[Ii],default:[Ci]},$$scope:{ctx:r}};r[1]!==void 0&&(N.checked=r[1]),o=new se({props:N}),J.push(()=>Z(o,"checked",M)),o.$on("change",r[10]);let D=r[3]=="average_cars_per_household"&&lr(r);function L(I){r[11](I)}let F={id:"population_density",$$slots:{right:[Di],default:[Pi]},$$scope:{ctx:r}};r[2]!==void 0&&(F.checked=r[2]),a=new se({props:F}),J.push(()=>Z(a,"checked",L)),a.$on("change",r[12]);let E=r[3]=="population_density"&&or(r);return $=new he({props:{url:`pmtiles://${_e()}/v1/${Ye}.pmtiles`,$$slots:{default:[Gi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),C&&C.c(),l=T(),h(o.$$.fragment),u=T(),D&&D.c(),i=T(),h(a.$$.fragment),c=T(),E&&E.c(),d=T(),h($.$$.fragment)},m(I,P){b(e,I,P),p(I,t,P),C&&C.m(I,P),p(I,l,P),b(o,I,P),p(I,u,P),D&&D.m(I,P),p(I,i,P),b(a,I,P),p(I,c,P),E&&E.m(I,P),p(I,d,P),b($,I,P),y=!0},p(I,[P]){const H={};P&65536&&(H.$$scope={dirty:P,ctx:I}),!n&&P&1&&(n=!0,H.checked=I[0],x(()=>n=!1)),e.$set(H),I[3]=="percent_households_with_car"?C?(C.p(I,P),P&8&&_(C,1)):(C=rr(I),C.c(),_(C,1),C.m(l.parentNode,l)):C&&(fe(),g(C,1,1,()=>{C=null}),ue());const X={};P&65536&&(X.$$scope={dirty:P,ctx:I}),!s&&P&2&&(s=!0,X.checked=I[1],x(()=>s=!1)),o.$set(X),I[3]=="average_cars_per_household"?D?(D.p(I,P),P&8&&_(D,1)):(D=lr(I),D.c(),_(D,1),D.m(i.parentNode,i)):D&&(fe(),g(D,1,1,()=>{D=null}),ue());const R={};P&65536&&(R.$$scope={dirty:P,ctx:I}),!f&&P&4&&(f=!0,R.checked=I[2],x(()=>f=!1)),a.$set(R),I[3]=="population_density"?E?(E.p(I,P),P&8&&_(E,1)):(E=or(I),E.c(),_(E,1),E.m(d.parentNode,d)):E&&(fe(),g(E,1,1,()=>{E=null}),ue());const U={};P&65544&&(U.$$scope={dirty:P,ctx:I}),$.$set(U)},i(I){y||(_(e.$$.fragment,I),_(C),_(o.$$.fragment,I),_(D),_(a.$$.fragment,I),_(E),_($.$$.fragment,I),y=!0)},o(I){g(e.$$.fragment,I),g(C),g(o.$$.fragment,I),g(D),g(a.$$.fragment,I),g(E),g($.$$.fragment,I),y=!1},d(I){I&&(m(t),m(l),m(u),m(i),m(c),m(d)),v(e,I),C&&C.d(I),v(o,I),D&&D.d(I),v(a,I),E&&E.d(I),v($,I)}}}let Ye="census_output_areas";const zi=r=>r.toLocaleString();function qi(r,e,n){let t=te.sequential_low_to_high,l=!1,o=!1,s=!1,u="";function i(O){let C=O.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${C}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${C}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(O){l=O,n(0,l)}const c=()=>{n(1,o=!1),n(2,s=!1)};function d(O){o=O,n(1,o)}const $=()=>{n(0,l=!1),n(2,s=!1)};function y(O){s=O,n(2,s)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[l,o,s,u,t,i,a,f,c,d,$,y,S]}class Wi extends q{constructor(e){super(),W(this,e,qi,Ui,G,{})}}function Vi(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Xi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qi(r){let e,n,t,l,o,s,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Xi]},$$scope:{ctx:r}}}),s=new Xe({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=T(),h(s.$$.fragment)},m(i,a){p(i,e,a),k(e,n),b(t,e,null),k(e,l),p(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function Ji(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Qi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Ki(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&j(t,n)},d(l){l&&m(e)}}}function Yi(r){let e,n;return e=new le({props:{$$slots:{default:[Ki,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zi(r){let e,n,t,l;const o=[B(ut),{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Yi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=K(s,o[a]);e=new Ve({props:s}),e.$on("click",ea);const u=[B(`${ut}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=K(i,u[a]);return t=new de({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(ut)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${ut}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function xi(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:ut,$$slots:{right:[Ji],default:[Vi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),J.push(()=>Z(e,"checked",s)),l=new yt({props:{data:`${_e()}/v1/${ut}.geojson`,$$slots:{default:[Zi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let ut="combined_authorities";function ea(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function ta(r,e,n){let t=te.combined_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class na extends q{constructor(e){super(),W(this,e,ta,xi,G,{})}}function ra(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function la(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function oa(r){let e;return{c(){e=w(`here
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function sa(r){let e,n,t,l,o,s,u,i,a;return t=new V({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[la]},$$scope:{ctx:r}}}),o=new V({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[oa]},$$scope:{ctx:r}}}),i=new Xe({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=w("."),u=T(),h(i.$$.fragment)},m(f,c){p(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,s),p(f,u,c),b(i,f,c),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const $={};c&32&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(i,f)}}}function ia(r){let e,n,t;return n=new ae({props:{$$slots:{default:[sa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function sr(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function aa(r){let e,n=r[4].LSOA11CD+"",t,l,o,s=r[4].score+"",u,i,a,f,c,d=r[4].rank.toLocaleString()+"",$,y;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(s),i=T(),a=A("p"),f=w("Rank: "),c=A("b"),$=w(d),y=w(`
        / 32,844 LSOAs`)},m(S,O){p(S,e,O),k(e,t),k(e,l),k(e,o),k(o,u),p(S,i,O),p(S,a,O),k(a,f),k(a,c),k(c,$),k(a,y)},p(S,O){O&16&&n!==(n=S[4].LSOA11CD+"")&&j(t,n),O&16&&s!==(s=S[4].score+"")&&j(u,s),O&16&&d!==(d=S[4].rank.toLocaleString()+"")&&j($,d)},d(S){S&&(m(e),m(i),m(a))}}}function fa(r){let e,n;return e=new le({props:{$$slots:{default:[aa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ua(r){let e,n,t,l;const o=[B(Re),{sourceLayer:Re},{paint:{"fill-color":ve(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[fa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=K(s,o[a]);e=new Ve({props:s});const u=[B(`${Re}-outline`),{sourceLayer:Re},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=K(i,u[a]);return t=new de({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Y(o,[f&0&&ne(B(Re)),f&0&&{sourceLayer:Re},f&6&&{paint:{"fill-color":ve(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Q(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&1?Y(u,[f&0&&ne(B(`${Re}-outline`)),f&0&&{sourceLayer:Re},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function ca(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:Re,$$slots:{right:[ia],default:[ra]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),J.push(()=>Z(e,"checked",u));let a=r[0]&&sr(r);return o=new he({props:{url:`pmtiles://${_e()}/v1/${Re}.pmtiles`,$$slots:{default:[ua]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=sr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Re="imd";function $a(r,e,n){let t=te.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class pa extends q{constructor(e){super(),W(this,e,$a,ca,G,{})}}function ma(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function _a(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ga(r){let e,n,t,l,o,s,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[_a]},$$scope:{ctx:r}}}),s=new Xe({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=T(),h(s.$$.fragment)},m(i,a){p(i,e,a),k(e,n),b(t,e,null),k(e,l),p(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function da(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ga]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ha(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&j(t,n)},d(l){l&&m(e)}}}function ba(r){let e,n;return e=new le({props:{$$slots:{default:[ha,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function va(r){let e,n,t,l;const o=[B(ct),{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ba]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=K(s,o[a]);e=new Ve({props:s}),e.$on("click",ka);const u=[B(`${ct}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=K(i,u[a]);return t=new de({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(ct)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${ct}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function wa(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:ct,$$slots:{right:[da],default:[ma]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),J.push(()=>Z(e,"checked",s)),l=new yt({props:{data:`${_e()}/v1/${ct}.geojson`,$$slots:{default:[va]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let ct="local_authority_districts";function ka(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function ya(r,e,n){let t=te.local_authority_districts,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Sa extends q{constructor(e){super(),W(this,e,ya,wa,G,{})}}function Ca(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Oa(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ta(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Aa(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function La(r){let e;return{c(){e=w("this map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ia(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pa(r){let e,n,t,l,o,s,u,i,a,f,c,d,$,y,S,O,C,M,N,D,L,F;return t=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Oa]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Ta]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Aa]},$$scope:{ctx:r}}}),$=new V({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[La]},$$scope:{ctx:r}}}),M=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ia]},$$scope:{ctx:r}}}),L=new Xe({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),s=w("y, or "),h(u.$$.fragment),i=w("."),a=T(),f=A("p"),c=A("strong"),d=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h($.$$.fragment),y=w(" to get more details."),S=T(),O=A("p"),C=w("Data from ONS Geography via "),h(M.$$.fragment),N=w(", as of November 2022."),D=T(),h(L.$$.fragment)},m(E,I){p(E,e,I),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,s),b(u,e,null),k(e,i),p(E,a,I),p(E,f,I),k(f,c),k(c,d),b($,c,null),k(c,y),p(E,S,I),p(E,O,I),k(O,C),b(M,O,null),k(O,N),p(E,D,I),b(L,E,I),F=!0},p(E,I){const P={};I&16&&(P.$$scope={dirty:I,ctx:E}),t.$set(P);const H={};I&16&&(H.$$scope={dirty:I,ctx:E}),o.$set(H);const X={};I&16&&(X.$$scope={dirty:I,ctx:E}),u.$set(X);const R={};I&16&&(R.$$scope={dirty:I,ctx:E}),$.$set(R);const U={};I&16&&(U.$$scope={dirty:I,ctx:E}),M.$set(U)},i(E){F||(_(t.$$.fragment,E),_(o.$$.fragment,E),_(u.$$.fragment,E),_($.$$.fragment,E),_(M.$$.fragment,E),_(L.$$.fragment,E),F=!0)},o(E){g(t.$$.fragment,E),g(o.$$.fragment,E),g(u.$$.fragment,E),g($.$$.fragment,E),g(M.$$.fragment,E),g(L.$$.fragment,E),F=!1},d(E){E&&(m(e),m(a),m(f),m(S),m(O),m(D)),v(t),v(o),v(u),v($),v(M),v(L,E)}}}function Ma(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Pa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Na(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&j(t,n)},d(l){l&&m(e)}}}function Ea(r){let e,n;return e=new le({props:{$$slots:{default:[Na,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Da(r){let e,n,t,l;const o=[B(Be),{sourceLayer:Be},{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ea]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=K(s,o[a]);e=new Ve({props:s});const u=[B(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=K(i,u[a]);return t=new de({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(Be)),f&0&&{sourceLayer:Be},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${Be}-outline`)),f&0&&{sourceLayer:Be},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Fa(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:Be,$$slots:{right:[Ma],default:[Ca]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),J.push(()=>Z(e,"checked",s)),l=new he({props:{url:`pmtiles://${_e()}/v1/${Be}.pmtiles`,$$slots:{default:[Da]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let Be="local_planning_authorities";function ja(r,e,n){let t=te.local_planning_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Ra extends q{constructor(e){super(),W(this,e,ja,Fa,G,{})}}function Ba(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ha(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ga(r){let e,n,t,l,o,s,u;return t=new V({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Ha]},$$scope:{ctx:r}}}),s=new Xe({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=T(),h(s.$$.fragment)},m(i,a){p(i,e,a),k(e,n),b(t,e,null),k(e,l),p(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function Ua(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ga]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function za(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&j(t,n)},d(l){l&&m(e)}}}function qa(r){let e,n;return e=new le({props:{$$slots:{default:[za,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wa(r){let e,n,t,l;const o=[B(He),{sourceLayer:He},{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[qa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=K(s,o[a]);e=new Ve({props:s}),e.$on("click",Xa);const u=[B(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=K(i,u[a]);return t=new de({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(He)),f&0&&{sourceLayer:He},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${He}-outline`)),f&0&&{sourceLayer:He},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Va(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:He,$$slots:{right:[Ua],default:[Ba]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),J.push(()=>Z(e,"checked",s)),l=new he({props:{url:`pmtiles://${_e()}/v1/${He}.pmtiles`,$$slots:{default:[Wa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let He="parliamentary_constituencies";function Xa(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Qa(r,e,n){let t=te.parliamentary_constituencies,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Ja extends q{constructor(e){super(),W(this,e,Qa,Va,G,{})}}function Ka(r){let e;return{c(){e=w("Pollution")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ya(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Za(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function xa(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ef(r){let e,n,t,l,o,s,u,i,a,f,c,d,$,y,S,O;return t=new V({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ya]},$$scope:{ctx:r}}}),f=new V({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Za]},$$scope:{ctx:r}}}),d=new V({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[xa]},$$scope:{ctx:r}}}),S=new Xe({}),{c(){e=A("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        gm
        `),o=A("sup"),o.textContent="3",s=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=T(),i=A("p"),a=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(d.$$.fragment),$=w("."),y=T(),h(S.$$.fragment)},m(C,M){p(C,e,M),k(e,n),b(t,e,null),k(e,l),k(e,o),k(e,s),p(C,u,M),p(C,i,M),k(i,a),b(f,i,null),k(i,c),b(d,i,null),k(i,$),p(C,y,M),b(S,C,M),O=!0},p(C,M){const N={};M&2048&&(N.$$scope={dirty:M,ctx:C}),t.$set(N);const D={};M&2048&&(D.$$scope={dirty:M,ctx:C}),f.$set(D);const L={};M&2048&&(L.$$scope={dirty:M,ctx:C}),d.$set(L)},i(C){O||(_(t.$$.fragment,C),_(f.$$.fragment,C),_(d.$$.fragment,C),_(S.$$.fragment,C),O=!0)},o(C){g(t.$$.fragment,C),g(f.$$.fragment,C),g(d.$$.fragment,C),g(S.$$.fragment,C),O=!1},d(C){C&&(m(e),m(u),m(i),m(y)),v(t),v(f),v(d),v(S,C)}}}function tf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ef]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ir(r){let e,n,t,l,o=r[3](r[0])+"",s,u,i,a,f,c,d,$,y,S,O,C,M;function N(I){r[7](I)}let D={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(D.value=r[0]),e=new It({props:D}),J.push(()=>Z(e,"value",N));const L=[rf,nf],F=[];function E(I,P){return I[0]=="Noise"?0:1}return $=E(r),y=F[$]=L[$](r),{c(){h(e.$$.fragment),t=T(),l=A("p"),s=w(o),u=T(),i=A("div"),a=A("label"),f=w(`Opacity
      `),c=A("input"),d=T(),y.c(),S=Ae(),z(c,"type","range"),z(c,"min","0"),z(c,"max","100")},m(I,P){b(e,I,P),p(I,t,P),p(I,l,P),k(l,s),p(I,u,P),p(I,i,P),k(i,a),k(a,f),k(a,c),Wt(c,r[2]),p(I,d,P),F[$].m(I,P),p(I,S,P),O=!0,C||(M=[Tt(c,"change",r[8]),Tt(c,"input",r[8])],C=!0)},p(I,P){const H={};!n&&P&1&&(n=!0,H.value=I[0],x(()=>n=!1)),e.$set(H),(!O||P&1)&&o!==(o=I[3](I[0])+"")&&j(s,o),P&4&&Wt(c,I[2]);let X=$;$=E(I),$===X?F[$].p(I,P):(fe(),g(F[X],1,1,()=>{F[X]=null}),ue(),y=F[$],y?y.p(I,P):(y=F[$]=L[$](I),y.c()),_(y,1),y.m(S.parentNode,S))},i(I){O||(_(e.$$.fragment,I),_(y),O=!0)},o(I){g(e.$$.fragment,I),g(y),O=!1},d(I){I&&(m(t),m(l),m(u),m(i),m(d),m(S)),v(e,I),F[$].d(I),C=!1,pl(M)}}}function nf(r){let e,n,t;return{c(){e=A("img"),wn(e.src,n=r[5](r[0]))||z(e,"src",n),z(e,"width",150),z(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){p(l,e,o)},p(l,o){o&1&&!wn(e.src,n=l[5](l[0]))&&z(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&z(e,"alt",t)},i:ee,o:ee,d(l){l&&m(e)}}}function rf(r){let e,n;return e=new Qe({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lf(r){let e,n;const t=[B("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new Ol({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&6?Y(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function of(r){let e,n,t,l,o,s;function u(f){r[6](f)}let i={id:"pollution",$$slots:{right:[tf],default:[Ka]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new se({props:i}),J.push(()=>Z(e,"checked",u));let a=r[1]&&ir(r);return o=new Ul({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[lf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],x(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&_(a,1)):(a=ir(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const $={};c&1&&($.tiles=[f[4](f[0])]),c&2054&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}function sf(r,e,n){let t,l=!1,o=50,s="PM25_viridis";function u(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${S}`}function f(y){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${S}`}function c(y){l=y,n(1,l)}function d(y){s=y,n(0,s)}function $(){o=ml(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,l,o,i,a,f,c,d,$]}class af extends q{constructor(e){super(),W(this,e,sf,of,G,{})}}function ff(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function uf(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function cf(r){let e,n,t,l,o,s,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[uf]},$$scope:{ctx:r}}}),s=new Xe({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=T(),h(s.$$.fragment)},m(i,a){p(i,e,a),k(e,n),b(t,e,null),k(e,l),p(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function $f(r){let e,n,t;return n=new ae({props:{$$slots:{default:[cf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function pf(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&j(t,n)},d(l){l&&m(e)}}}function mf(r){let e,n;return e=new le({props:{$$slots:{default:[pf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _f(r){let e,n,t,l;const o=[B(Ge),{sourceLayer:Ge},{paint:{"fill-color":r[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[mf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=K(s,o[a]);e=new Ve({props:s}),e.$on("click",df);const u=[B(`${Ge}-outline`),{sourceLayer:Ge},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=K(i,u[a]);return t=new de({props:i}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(Ge)),f&0&&{sourceLayer:Ge},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${Ge}-outline`)),f&0&&{sourceLayer:Ge},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(_(e.$$.fragment,a),_(t.$$.fragment,a),l=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function gf(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:Ge,$$slots:{right:[$f],default:[ff]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),J.push(()=>Z(e,"checked",s)),l=new he({props:{url:`pmtiles://${_e()}/v1/${Ge}.pmtiles`,$$slots:{default:[_f]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let Ge="wards";function df(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function hf(r,e,n){let t=te.wards,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class bf extends q{constructor(e){super(),W(this,e,hf,gf,G,{})}}function vf(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function wf(r){let e,n,t,l;return t=new V({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[vf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,s){p(o,e,s),k(e,n),b(t,e,null),l=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){l||(_(t.$$.fragment,o),l=!0)},o(o){g(t.$$.fragment,o),l=!1},d(o){o&&m(e),v(t)}}}class lt extends q{constructor(e){super(),W(this,e,null,wf,G,{})}}function kf(r){let e,n,t;return e=new ke({props:{color:te.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function yf(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Sf(r){let e,n,t,l,o,s,u,i,a;return o=new V({props:{href:"https://gtfs.org",$$slots:{default:[yf]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=T(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=T(),h(i.$$.fragment)},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),k(t,l),b(o,t,null),k(t,s),p(f,u,c),b(i,f,c),a=!0},p(f,c){const d={};c&8&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(_(o.$$.fragment,f),_(i.$$.fragment,f),a=!0)},o(f){g(o.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(u)),v(o),v(i,f)}}}function Cf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Sf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Of(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Tf(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Af(r){let e;function n(o,s){return o[2].has_bus_lane?Tf:Of}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,s){l.m(o,s),p(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function Lf(r){let e,n;return e=new le({props:{$$slots:{default:[Af,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function If(r){let e,n;const t=[B($t),{sourceLayer:$t},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],te.bus_route_with_lane,te.bus_route_without_lane],"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Lf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?Y(t,[s&0&&ne(B($t)),s&0&&{sourceLayer:$t},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Pf(r){let e,n,t,l,o;function s(i){r[1](i)}let u={id:$t,$$slots:{right:[Cf],default:[kf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),J.push(()=>Z(e,"checked",s)),l=new he({props:{url:`pmtiles://${_e()}/v1/${$t}.pmtiles`,$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],x(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let $t="bus_routes";function Mf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Nf extends q{constructor(e){super(),W(this,e,Mf,Pf,G,{})}}function ar(r){const e=zf(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function fr(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function Ef(r){let e;return{c(){e=w("Cycle paths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Df(r){let e,n,t,l,o,s,u,i;return u=new lt({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=T(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=T(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=T(),h(u.$$.fragment)},m(a,f){p(a,e,f),p(a,n,f),p(a,t,f),p(a,l,f),p(a,o,f),p(a,s,f),b(u,a,f),i=!0},p:ee,i(a){i||(_(u.$$.fragment,a),i=!0)},o(a){g(u.$$.fragment,a),i=!1},d(a){a&&(m(e),m(n),m(t),m(l),m(o),m(s)),v(u,a)}}}function Ff(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Df]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ur(r){let e,n,t,l;return e=new rt({props:{$$slots:{default:[Rf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),t=A("hr")},m(o,s){b(e,o,s),p(o,n,s),p(o,t,s),l=!0},p(o,s){const u={};s&8194&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){l||(_(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){o&&(m(n),m(t)),v(e,o)}}}function jf(r){let e,n,t=r[9]+"",l,o,s;return e=new ke({props:{color:r[10]}}),{c(){h(e.$$.fragment),n=T(),l=w(t),o=T()},m(u,i){b(e,u,i),p(u,n,i),p(u,l,i),p(u,o,i),s=!0},p:ee,i(u){s||(_(e.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),s=!1},d(u){u&&(m(n),m(l),m(o)),v(e,u)}}}function cr(r){let e,n,t;function l(s){r[4](s,r[6])}let o={id:r[6],$$slots:{default:[jf]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new se({props:o}),J.push(()=>Z(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){r=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:r}),!n&&u&6&&(n=!0,i.checked=r[1][r[6]],x(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Rf(r){let e,n,t=qe(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=cr(fr(r,t,s));const o=s=>g(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Ae()},m(s,u){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,u);p(s,e,u),n=!0},p(s,u){if(u&6){t=qe(s[2]);let i;for(i=0;i<t.length;i+=1){const a=fr(s,t,i);l[i]?(l[i].p(a,u),_(l[i],1)):(l[i]=cr(a),l[i].c(),_(l[i],1),l[i].m(e.parentNode,e))}for(fe(),i=t.length;i<l.length;i+=1)o(i);ue()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)_(l[u]);n=!0}},o(s){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)g(l[u]);n=!1},d(s){s&&m(e),At(l,s)}}}function Bf(r){ar(r);let e,n=r[6]+"",t,l,o,s,u,i=r[7]+"",a,f,c,d,$=r[8]+"",y;return{c(){e=A("h2"),t=w(n),l=T(),o=A("p"),s=w("Direction: "),u=A("b"),a=T(),f=A("p"),c=w("Width: "),d=A("b"),y=w($)},m(S,O){p(S,e,O),k(e,t),p(S,l,O),p(S,o,O),k(o,s),k(o,u),u.innerHTML=i,p(S,a,O),p(S,f,O),k(f,c),k(f,d),k(d,y)},p(S,O){ar(S),O&32&&n!==(n=S[6]+"")&&j(t,n),O&32&&i!==(i=S[7]+"")&&(u.innerHTML=i),O&32&&$!==($=S[8]+"")&&j(y,$)},d(S){S&&(m(e),m(l),m(o),m(a),m(f))}}}function Hf(r){let e,n;return e=new le({props:{$$slots:{default:[Bf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gf(r){let e,n;const t=[B(pt),{sourceLayer:pt},{paint:{"line-color":qt(["get","kind"],{track:te.cycle_paths.track,lane:te.cycle_paths.lane,shared_use_segregated:te.cycle_paths.shared_use_segregated,shared_use_unsegregated:te.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ee,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:$r(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Hf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new de({props:l}),e.$on("click",qf),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?Y(t,[s&0&&ne(B(pt)),s&0&&{sourceLayer:pt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:$r(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Uf(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:pt,$$slots:{right:[Ff],default:[Ef]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),J.push(()=>Z(e,"checked",u));let a=r[0]&&ur(r);return o=new he({props:{url:`pmtiles://${_e()}/v1/${pt}.pmtiles`,$$slots:{default:[Gf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&8192&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=ur(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const $={};c&8195&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let pt="cycle_paths";function zf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function qf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function $r(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function Wf(r,e,n){let t=[["track","Separated tracks",te.cycle_paths.track],["lane","Unprotected lanes",te.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",te.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",te.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){l=i,n(0,l)}function u(i,a){r.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[l,o,t,s,u]}class Vf extends q{constructor(e){super(),W(this,e,Wf,Uf,G,{})}}function Xf(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Qf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Jf(r){let e,n,t,l,o,s,u;return t=new V({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Qf]},$$scope:{ctx:r}}}),s=new Xe({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=T(),h(s.$$.fragment)},m(i,a){p(i,e,a),k(e,n),b(t,e,null),k(e,l),p(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function Kf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Yf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&j(t,n)},d(l){l&&m(e)}}}function Zf(r){let e,n;return e=new le({props:{$$slots:{default:[Yf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xf(r){let e,n;const t=[B(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Zf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?Y(t,[s&0&&ne(B(mt)),s&0&&{sourceLayer:mt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function eu(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:mt,$$slots:{right:[Kf],default:[Xf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),J.push(()=>Z(e,"checked",s)),l=new he({props:{url:`pmtiles://${_e()}/v1/${mt}.pmtiles`,$$slots:{default:[xf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let mt="mrn";function tu(r,e,n){let t=te.mrn,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class nu extends q{constructor(e){super(),W(this,e,tu,eu,G,{})}}function ru(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  National Cycle Network`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function lu(r){let e;return{c(){e=w(`National Cycle Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ou(r){let e,n,t,l,o;return t=new V({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Data from Sustrans about the "),h(t.$$.fragment),l=w(", downloaded on 22/01/2024.")},m(s,u){p(s,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(s,u){const i={};u&16&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(_(t.$$.fragment,s),o=!0)},o(s){g(t.$$.fragment,s),o=!1},d(s){s&&m(e),v(t)}}}function su(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ou]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function pr(r){let e,n,t=r[3].Desc_+"",l;return{c(){e=A("li"),n=w("Description: "),l=w(t)},m(o,s){p(o,e,s),k(e,n),k(e,l)},p(o,s){s&8&&t!==(t=o[3].Desc_+"")&&j(l,t)},d(o){o&&m(e)}}}function mr(r){let e,n,t=r[3].Greenway+"",l;return{c(){e=A("li"),n=w("Is greenway: "),l=w(t)},m(o,s){p(o,e,s),k(e,n),k(e,l)},p(o,s){s&8&&t!==(t=o[3].Greenway+"")&&j(l,t)},d(o){o&&m(e)}}}function _r(r){let e,n,t=r[3].RouteType+"",l;return{c(){e=A("li"),n=w("Route type: "),l=w(t)},m(o,s){p(o,e,s),k(e,n),k(e,l)},p(o,s){s&8&&t!==(t=o[3].RouteType+"")&&j(l,t)},d(o){o&&m(e)}}}function gr(r){let e,n,t=r[3].RouteNo+"",l;return{c(){e=A("li"),n=w("Route number: "),l=w(t)},m(o,s){p(o,e,s),k(e,n),k(e,l)},p(o,s){s&8&&t!==(t=o[3].RouteNo+"")&&j(l,t)},d(o){o&&m(e)}}}function dr(r){let e,n,t=r[3].RouteCat+"",l;return{c(){e=A("li"),n=w("Route Category: "),l=w(t)},m(o,s){p(o,e,s),k(e,n),k(e,l)},p(o,s){s&8&&t!==(t=o[3].RouteCat+"")&&j(l,t)},d(o){o&&m(e)}}}function hr(r){let e,n,t=r[3].OpenStatus+"",l;return{c(){e=A("li"),n=w("Open Status: "),l=w(t)},m(o,s){p(o,e,s),k(e,n),k(e,l)},p(o,s){s&8&&t!==(t=o[3].OpenStatus+"")&&j(l,t)},d(o){o&&m(e)}}}function br(r){let e,n,t=r[3].Surface+"",l;return{c(){e=A("li"),n=w("Surface: "),l=w(t)},m(o,s){p(o,e,s),k(e,n),k(e,l)},p(o,s){s&8&&t!==(t=o[3].Surface+"")&&j(l,t)},d(o){o&&m(e)}}}function vr(r){let e,n,t=r[3].Quality+"",l;return{c(){e=A("li"),n=w("Quality: "),l=w(t)},m(o,s){p(o,e,s),k(e,n),k(e,l)},p(o,s){s&8&&t!==(t=o[3].Quality+"")&&j(l,t)},d(o){o&&m(e)}}}function wr(r){let e,n,t=r[3].RoadClass+"",l;return{c(){e=A("li"),n=w("Road Class: "),l=w(t)},m(o,s){p(o,e,s),k(e,n),k(e,l)},p(o,s){s&8&&t!==(t=o[3].RoadClass+"")&&j(l,t)},d(o){o&&m(e)}}}function iu(r){let e,n,t,l,o,s,u,i,a,f=r[3].Desc_&&pr(r),c=r[3].Greenway&&mr(r),d=r[3].RouteType&&_r(r),$=r[3].RouteNo&&gr(r),y=r[3].RouteCat&&dr(r),S=r[3].OpenStatus&&hr(r),O=r[3].Surface&&br(r),C=r[3].Quality&&vr(r),M=r[3].RoadClass&&wr(r);return{c(){e=A("ul"),f&&f.c(),n=T(),c&&c.c(),t=T(),d&&d.c(),l=T(),$&&$.c(),o=T(),y&&y.c(),s=T(),S&&S.c(),u=T(),O&&O.c(),i=T(),C&&C.c(),a=T(),M&&M.c()},m(N,D){p(N,e,D),f&&f.m(e,null),k(e,n),c&&c.m(e,null),k(e,t),d&&d.m(e,null),k(e,l),$&&$.m(e,null),k(e,o),y&&y.m(e,null),k(e,s),S&&S.m(e,null),k(e,u),O&&O.m(e,null),k(e,i),C&&C.m(e,null),k(e,a),M&&M.m(e,null)},p(N,D){N[3].Desc_?f?f.p(N,D):(f=pr(N),f.c(),f.m(e,n)):f&&(f.d(1),f=null),N[3].Greenway?c?c.p(N,D):(c=mr(N),c.c(),c.m(e,t)):c&&(c.d(1),c=null),N[3].RouteType?d?d.p(N,D):(d=_r(N),d.c(),d.m(e,l)):d&&(d.d(1),d=null),N[3].RouteNo?$?$.p(N,D):($=gr(N),$.c(),$.m(e,o)):$&&($.d(1),$=null),N[3].RouteCat?y?y.p(N,D):(y=dr(N),y.c(),y.m(e,s)):y&&(y.d(1),y=null),N[3].OpenStatus?S?S.p(N,D):(S=hr(N),S.c(),S.m(e,u)):S&&(S.d(1),S=null),N[3].Surface?O?O.p(N,D):(O=br(N),O.c(),O.m(e,i)):O&&(O.d(1),O=null),N[3].Quality?C?C.p(N,D):(C=vr(N),C.c(),C.m(e,a)):C&&(C.d(1),C=null),N[3].RoadClass?M?M.p(N,D):(M=wr(N),M.c(),M.m(e,null)):M&&(M.d(1),M=null)},d(N){N&&m(e),f&&f.d(),c&&c.d(),d&&d.d(),$&&$.d(),y&&y.d(),S&&S.d(),O&&O.d(),C&&C.d(),M&&M.d()}}}function au(r){let e,n;return e=new le({props:{$$slots:{default:[iu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fu(r){let e,n;const t=[B(_t),{sourceLayer:_t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[au]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?Y(t,[s&0&&ne(B(_t)),s&0&&{sourceLayer:_t},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function uu(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:_t,$$slots:{right:[su],default:[ru]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),J.push(()=>Z(e,"checked",s)),l=new he({props:{url:`pmtiles://${_e()}/v1/${_t}.pmtiles`,$$slots:{default:[fu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let _t="national_cycle_network";function cu(r,e,n){let t=te.national_cycle_network,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class $u extends q{constructor(e){super(),W(this,e,cu,uu,G,{})}}function pu(r){let e;return{c(){e=w("OS Pavement widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function mu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function _u(r){let e,n,t,l,o,s,u,i,a;return u=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[mu]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=T(),t=A("p"),t.textContent="Data valid as of 1 January, 2024",l=T(),o=A("p"),s=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=w(".")},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),p(f,l,c),p(f,o,c),k(o,s),b(u,o,null),k(o,i),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),u.$set(d)},i(f){a||(_(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(l),m(o)),v(u)}}}function gu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[_u]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function kr(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function du(r){let e,n,t,l=r[4].side+"",o,s,u,i,a,f=r[4].average+"",c,d,$,y,S,O,C=r[4].minimum+"",M,N;return{c(){e=A("p"),n=w("Side of the road: "),t=A("b"),o=w(l),s=T(),u=A("p"),i=w("Average width: "),a=A("b"),c=w(f),d=w(`
        meters`),$=T(),y=A("p"),S=w("Minimum width: "),O=A("b"),M=w(C),N=w(`
        meters`)},m(D,L){p(D,e,L),k(e,n),k(e,t),k(t,o),p(D,s,L),p(D,u,L),k(u,i),k(u,a),k(a,c),k(u,d),p(D,$,L),p(D,y,L),k(y,S),k(y,O),k(O,M),k(y,N)},p(D,L){L&16&&l!==(l=D[4].side+"")&&j(o,l),L&16&&f!==(f=D[4].average+"")&&j(c,f),L&16&&C!==(C=D[4].minimum+"")&&j(M,C)},d(D){D&&(m(e),m(s),m(u),m($),m(y))}}}function hu(r){let e,n;return e=new le({props:{$$slots:{default:[du,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bu(r){let e,n;const t=[B(gt),{sourceLayer:gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get","average"],r[2],r[1]),"line-width":Ee,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[hu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?Y(t,[s&0&&ne(B(gt)),s&0&&{sourceLayer:gt},t[2],t[3],s&6&&{paint:{"line-color":ve(["get","average"],o[2],o[1]),"line-width":Ee,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vu(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:gt,$$slots:{right:[gu],default:[pu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),J.push(()=>Z(e,"checked",u));let a=r[0]&&kr(r);return o=new he({props:{url:`pmtiles://${Kt()}/v1/${gt}.pmtiles`,$$slots:{default:[bu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=kr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let gt="pavement_widths";function wu(r,e,n){let t=te.sequential_low_to_high,l=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class ku extends q{constructor(e){super(),W(this,e,wu,vu,G,{})}}function yu(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Su(r){let e;return{c(){e=w("the PCT website")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Cu(r){let e;return{c(){e=w("2017 journal article")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ou(r){let e,n,t,l,o,s,u,i,a,f,c;return u=new V({props:{href:"https://www.pct.bike",$$slots:{default:[Su]},$$scope:{ctx:r}}}),a=new V({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Cu]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=T(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=T(),o=A("p"),s=w("See "),h(u.$$.fragment),i=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(d,$){p(d,e,$),p(d,n,$),p(d,t,$),p(d,l,$),p(d,o,$),k(o,s),b(u,o,null),k(o,i),b(a,o,null),k(o,f),c=!0},p(d,$){const y={};$&1024&&(y.$$scope={dirty:$,ctx:d}),u.$set(y);const S={};$&1024&&(S.$$scope={dirty:$,ctx:d}),a.$set(S)},i(d){c||(_(u.$$.fragment,d),_(a.$$.fragment,d),c=!0)},o(d){g(u.$$.fragment,d),g(a.$$.fragment,d),c=!1},d(d){d&&(m(e),m(n),m(t),m(l),m(o)),v(u),v(a)}}}function Tu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ou]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function yr(r){let e,n,t,l,o,s,u,i;e=new Qe({props:{colorScale:r[3],limits:r[4]}});function a($){r[7]($)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new zr({props:f}),J.push(()=>Z(t,"value",a));function c($){r[8]($)}let d={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(d.value=r[1]),s=new It({props:d}),J.push(()=>Z(s,"value",c)),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(s.$$.fragment)},m($,y){b(e,$,y),p($,n,y),b(t,$,y),p($,o,y),b(s,$,y),i=!0},p($,y){const S={};!l&&y&1&&(l=!0,S.value=$[0],x(()=>l=!1)),t.$set(S);const O={};!u&&y&2&&(u=!0,O.value=$[1],x(()=>u=!1)),s.$set(O)},i($){i||(_(e.$$.fragment,$),_(t.$$.fragment,$),_(s.$$.fragment,$),i=!0)},o($){g(e.$$.fragment,$),g(t.$$.fragment,$),g(s.$$.fragment,$),i=!1},d($){$&&(m(n),m(o)),v(e,$),v(t,$),v(s,$)}}}function Au(r){let e,n=r[5](r[9])+"",t;return{c(){e=new gn(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Lu(r){let e,n;return e=new le({props:{$$slots:{default:[Au,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Iu(r){let e,n;const t=[B(Ue),{sourceLayer:Ue},{paint:{"line-color":ve(["get",r[1]],r[4],r[3]),"line-width":Ee,"line-opacity":Q(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ue?"visible":"none"}}];let l={$$slots:{default:[Lu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?Y(t,[s&0&&ne(B(Ue)),s&0&&{sourceLayer:Ue},s&26&&{paint:{"line-color":ve(["get",o[1]],o[4],o[3]),"line-width":Ee,"line-opacity":Q(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==Ue?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Pu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new gn(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Mu(r){let e,n;return e=new le({props:{$$slots:{default:[Pu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nu(r){let e,n;const t=[B(ot),{sourceLayer:ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get",r[1]],r[4],r[3]),"line-width":Ee,"line-opacity":Q(1,.5)}},{layout:{visibility:r[2]&&r[0]==ot?"visible":"none"}}];let l={$$slots:{default:[Mu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?Y(t,[s&0&&ne(B(ot)),s&0&&{sourceLayer:ot},t[2],t[3],s&26&&{paint:{"line-color":ve(["get",o[1]],o[4],o[3]),"line-width":Ee,"line-opacity":Q(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ot?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Eu(r){let e,n,t,l,o,s,u,i;function a(d){r[6](d)}let f={id:Ue,$$slots:{right:[Tu],default:[yu]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new se({props:f}),J.push(()=>Z(e,"checked",a));let c=r[2]&&yr(r);return o=new he({props:{url:`pmtiles://${_e()}/v1/${Ue}.pmtiles`,$$slots:{default:[Iu]},$$scope:{ctx:r}}}),u=new he({props:{url:`pmtiles://${_e()}/v1/${ot}.pmtiles`,$$slots:{default:[Nu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),c&&c.c(),l=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment)},m(d,$){b(e,d,$),p(d,t,$),c&&c.m(d,$),p(d,l,$),b(o,d,$),p(d,s,$),b(u,d,$),i=!0},p(d,[$]){const y={};$&1024&&(y.$$scope={dirty:$,ctx:d}),!n&&$&4&&(n=!0,y.checked=d[2],x(()=>n=!1)),e.$set(y),d[2]?c?(c.p(d,$),$&4&&_(c,1)):(c=yr(d),c.c(),_(c,1),c.m(l.parentNode,l)):c&&(fe(),g(c,1,1,()=>{c=null}),ue());const S={};$&1031&&(S.$$scope={dirty:$,ctx:d}),o.$set(S);const O={};$&1031&&(O.$$scope={dirty:$,ctx:d}),u.$set(O)},i(d){i||(_(e.$$.fragment,d),_(c),_(o.$$.fragment,d),_(u.$$.fragment,d),i=!0)},o(d){g(e.$$.fragment,d),g(c),g(o.$$.fragment,d),g(u.$$.fragment,d),i=!1},d(d){d&&(m(t),m(l),m(s)),v(e,d),c&&c.d(d),v(o,d),v(u,d)}}}let Ue="pct_commute",ot="pct_school";function Du(r,e,n){let t=te.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ue,s="baseline",u=!1;function i(d){let $=d.baseline,y=d.gov_target,S=d.go_dutch,O=`<h2>Trip purpose: ${o==Ue?"commuting":"school"}</h2>`;if(O+=`<p>Baseline (2011): <b>${$.toLocaleString()}</b></p>`,$==0)O+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,O+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let C=(y/$).toFixed(1),M=(S/$).toFixed(1);O+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${C}x</b> of baseline)</p>`,O+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${M}x</b> of baseline)</p>`}return O}function a(d){u=d,n(2,u)}function f(d){o=d,n(0,o)}function c(d){s=d,n(1,s)}return[o,s,u,t,l,i,a,f,c]}class Fu extends q{constructor(e){super(),W(this,e,Du,Eu,G,{})}}function ju(r){let e;return{c(){e=w("OS Speeds")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ru(r){let e;return{c(){e=w("Basemap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Bu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hu(r){let e,n,t,l,o,s,u,i,a,f,c,d;return t=new V({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Ru]},$$scope:{ctx:r}}}),f=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Bu]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=T(),s=A("p"),s.textContent="Data valid as of 1 September, 2023",u=T(),i=A("p"),a=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m($,y){p($,e,y),k(e,n),b(t,e,null),k(e,l),p($,o,y),p($,s,y),p($,u,y),p($,i,y),k(i,a),b(f,i,null),k(i,c),d=!0},p($,y){const S={};y&256&&(S.$$scope={dirty:y,ctx:$}),t.$set(S);const O={};y&256&&(O.$$scope={dirty:y,ctx:$}),f.$set(O)},i($){d||(_(t.$$.fragment,$),_(f.$$.fragment,$),d=!0)},o($){g(t.$$.fragment,$),g(f.$$.fragment,$),d=!1},d($){$&&(m(e),m(o),m(s),m(u),m(i)),v(t),v(f)}}}function Gu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Hu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Sr(r){let e,n,t,l,o;e=new Qe({props:{colorScale:r[2],limits:r[3]}});function s(i){r[6](i)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new zr({props:u}),J.push(()=>Z(t,"value",s)),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(i,a){b(e,i,a),p(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};!l&&a&1&&(l=!0,f.value=i[0],x(()=>l=!1)),t.$set(f)},i(i){o||(_(e.$$.fragment,i),_(t.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),o=!1},d(i){i&&m(n),v(e,i),v(t,i)}}}function Uu(r){let e,n,t=r[7].indicative_mph+"",l,o,s,u,i,a=r[7].highest_mph+"",f,c,d=r[4][r[7].highest_description]+"",$,y;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),s=T(),u=A("p"),i=w("Highest average speed: "),f=w(a),c=w(" mph (during "),$=w(d),y=w(")")},m(S,O){p(S,e,O),k(e,n),k(e,l),k(e,o),p(S,s,O),p(S,u,O),k(u,i),k(u,f),k(u,c),k(u,$),k(u,y)},p(S,O){O&128&&t!==(t=S[7].indicative_mph+"")&&j(l,t),O&128&&a!==(a=S[7].highest_mph+"")&&j(f,a),O&128&&d!==(d=S[4][S[7].highest_description]+"")&&j($,d)},d(S){S&&(m(e),m(s),m(u))}}}function zu(r){let e,n;return e=new le({props:{$$slots:{default:[Uu,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qu(r){let e,n;const t=[B(dt),{sourceLayer:dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get",r[0]],r[3],r[2]),"line-width":Ee,"line-opacity":Q(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[zu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&15?Y(t,[s&0&&ne(B(dt)),s&0&&{sourceLayer:dt},t[2],t[3],s&13&&{paint:{"line-color":ve(["get",o[0]],o[3],o[2]),"line-width":Ee,"line-opacity":Q(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Wu(r){let e,n,t,l,o,s;function u(f){r[5](f)}let i={id:dt,$$slots:{right:[Gu],default:[ju]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new se({props:i}),J.push(()=>Z(e,"checked",u));let a=r[1]&&Sr(r);return o=new he({props:{url:`pmtiles://${Kt()}/v1/${dt}.pmtiles`,$$slots:{default:[qu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&256&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],x(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&_(a,1)):(a=Sr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const $={};c&259&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let dt="road_speeds";function Vu(r,e,n){let t=te.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,l,u,i,a]}class Xu extends q{constructor(e){super(),W(this,e,Vu,Wu,G,{})}}function Qu(r){let e;return{c(){e=w("OS Road widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ju(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ku(r){let e,n,t,l,o,s,u,i,a;return u=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ju]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=T(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=T(),o=A("p"),s=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=w(".")},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),p(f,l,c),p(f,o,c),k(o,s),b(u,o,null),k(o,i),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),u.$set(d)},i(f){a||(_(u.$$.fragment,f),a=!0)},o(f){g(u.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(l),m(o)),v(u)}}}function Yu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ku]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Cr(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zu(r){let e,n,t,l=r[4].average+"",o,s,u,i,a,f,c=r[4].minimum+"",d,$;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),s=w(`
        meters`),u=T(),i=A("p"),a=w("Minimum width: "),f=A("b"),d=w(c),$=w(`
        meters`)},m(y,S){p(y,e,S),k(e,n),k(e,t),k(t,o),k(e,s),p(y,u,S),p(y,i,S),k(i,a),k(i,f),k(f,d),k(i,$)},p(y,S){S&16&&l!==(l=y[4].average+"")&&j(o,l),S&16&&c!==(c=y[4].minimum+"")&&j(d,c)},d(y){y&&(m(e),m(u),m(i))}}}function xu(r){let e,n;return e=new le({props:{$$slots:{default:[Zu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ec(r){let e,n;const t=[B(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get","average"],r[2],r[1]),"line-width":Ee,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[xu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?Y(t,[s&0&&ne(B(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&6&&{paint:{"line-color":ve(["get","average"],o[2],o[1]),"line-width":Ee,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function tc(r){let e,n,t,l,o,s;function u(f){r[3](f)}let i={id:ht,$$slots:{right:[Yu],default:[Qu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),J.push(()=>Z(e,"checked",u));let a=r[0]&&Cr(r);return o=new he({props:{url:`pmtiles://${Kt()}/v1/${ht}.pmtiles`,$$slots:{default:[ec]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=Cr(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const $={};c&33&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ht="road_widths";function nc(r,e,n){let t=te.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,l,s]}class rc extends q{constructor(e){super(),W(this,e,nc,tc,G,{})}}function lc(r){let e,n,t;return{c(){e=A("input"),z(e,"class","govuk-file-upload"),z(e,"id","load-criticals"),z(e,"type","file")},m(l,o){p(l,e,o),r[7](e),n||(t=Tt(e,"change",r[5]),n=!0)},p:ee,d(l){l&&m(e),r[7](null),n=!1,t()}}}function Or(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[sc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oc(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new ke({props:{color:Ct}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,i){b(e,u,i),p(u,n,i),p(u,l,i),p(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&j(l,t)},i(u){s||(_(e.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),s=!1},d(u){u&&(m(n),m(l),m(o)),v(e,u)}}}function sc(r){let e,n,t;function l(s){r[8](s)}let o={id:"show-criticals",$$slots:{default:[oc]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new se({props:o}),J.push(()=>Z(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],x(()=>n=!1)),e.$set(i)},i(s){t||(_(e.$$.fragment,s),t=!0)},o(s){g(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function ic(r){let e,n,t,l,o,s;e=new Ur({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[lc]},$$scope:{ctx:r}}}),t=new qr({props:{errorMessage:r[3]}});let u=r[2]>0&&Or(r);return{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),u&&u.c(),o=Ae()},m(i,a){b(e,i,a),p(i,n,a),b(t,i,a),p(i,l,a),u&&u.m(i,a),p(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&_(u,1)):(u=Or(i),u.c(),_(u,1),u.m(o.parentNode,o)):u&&(fe(),g(u,1,1,()=>{u=null}),ue())},i(i){s||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(u),s=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(u),s=!1},d(i){i&&(m(n),m(l),m(o)),v(e,i),v(t,i),u&&u.d(i)}}}function ac(r){let e,n,t=r[10].critical_type+"",l,o,s,u,i,a=r[10].location_description+"",f,c,d,$,y,S=r[10].notes+"",O,C,M,N,D,L,F,E=r[10].id+"",I,P,H,X,R,U=(r[10].inspector??"???")+"",$e,De,be,Je=r[10].submission_time+"",pe,ce,re,xe,Te,Le=r[10].scheme_reference+"",Fe,oe,ge,je=r[10].current_design_stage+"",Ke;return{c(){e=A("div"),n=A("h2"),l=w(t),o=T(),s=A("p"),u=A("u"),u.textContent="Location",i=w(`
          : `),f=w(a),c=T(),d=A("p"),$=A("u"),$.textContent="Notes",y=w(`
          : `),O=w(S),C=T(),M=A("hr"),N=T(),D=A("p"),L=w("Critical issue ID: "),F=A("b"),I=w(E),P=T(),H=A("p"),X=w("Submitted by "),R=A("b"),$e=w(U),De=w(`
          at
          `),be=A("b"),pe=w(Je),ce=T(),re=A("p"),xe=w("For scheme "),Te=A("b"),Fe=w(Le),oe=w(`
          in stage
          `),ge=A("b"),Ke=w(je),Oe(e,"max-width","30vw")},m(we,ye){p(we,e,ye),k(e,n),k(n,l),k(e,o),k(e,s),k(s,u),k(s,i),k(s,f),k(e,c),k(e,d),k(d,$),k(d,y),k(d,O),k(e,C),k(e,M),k(e,N),k(e,D),k(D,L),k(D,F),k(F,I),k(e,P),k(e,H),k(H,X),k(H,R),k(R,$e),k(H,De),k(H,be),k(be,pe),k(e,ce),k(e,re),k(re,xe),k(re,Te),k(Te,Fe),k(re,oe),k(re,ge),k(ge,Ke)},p(we,ye){ye&1024&&t!==(t=we[10].critical_type+"")&&j(l,t),ye&1024&&a!==(a=we[10].location_description+"")&&j(f,a),ye&1024&&S!==(S=we[10].notes+"")&&j(O,S),ye&1024&&E!==(E=we[10].id+"")&&j(I,E),ye&1024&&U!==(U=(we[10].inspector??"???")+"")&&j($e,U),ye&1024&&Je!==(Je=we[10].submission_time+"")&&j(pe,Je),ye&1024&&Le!==(Le=we[10].scheme_reference+"")&&j(Fe,Le),ye&1024&&je!==(je=we[10].current_design_stage+"")&&j(Ke,je)},d(we){we&&m(e)}}}function fc(r){let e,n;return e=new le({props:{$$slots:{default:[ac,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uc(r){let e,n,t,l,o,s;const u=[B(`${tt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Ct,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let $=0;$<u.length;$+=1)i=K(i,u[$]);e=new nt({props:i}),e.$on("click",r[6]);const a=[B(`${tt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let $=0;$<a.length;$+=1)f=K(f,a[$]);t=new Vl({props:f});const c=[B(`${tt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Ct,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let d={$$slots:{default:[fc]},$$scope:{ctx:r}};for(let $=0;$<c.length;$+=1)d=K(d,c[$]);return o=new nt({props:d}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment)},m($,y){b(e,$,y),p($,n,y),b(t,$,y),p($,l,y),b(o,$,y),s=!0},p($,y){const S=y&2?Y(u,[y&0&&ne(B(`${tt}-clusters`)),u[1],y&0&&{paint:{"circle-color":Ct,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:$[1]?"visible":"none"}},u[4]]):{};e.$set(S);const O=y&2?Y(a,[y&0&&ne(B(`${tt}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:$[1]?"visible":"none"}}]):{};t.$set(O);const C=y&2?Y(c,[y&0&&ne(B(`${tt}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":Ct,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:$[1]?"visible":"none"}}]):{};y&2048&&(C.$$scope={dirty:y,ctx:$}),o.$set(C)},i($){s||(_(e.$$.fragment,$),_(t.$$.fragment,$),_(o.$$.fragment,$),s=!0)},o($){g(e.$$.fragment,$),g(t.$$.fragment,$),g(o.$$.fragment,$),s=!1},d($){$&&(m(n),m(l)),v(e,$),v(t,$),v(o,$)}}}function cc(r){let e,n,t,l;return e=new Me({props:{label:"Critical Issues",$$slots:{default:[ic]},$$scope:{ctx:r}}}),t=new yt({props:{id:tt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[uc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}let tt="criticals",Ct="red";function $c(r,e,n){let t;me(r,mn,$=>n(9,t=$));let l,o=!0,s=0,u="",i=_l();async function a($){try{n(4,i=await ri(l.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f($){t.getSource(tt).getClusterExpansionZoom($.detail.features[0].properties.cluster_id,(y,S)=>{y||t.easeTo({center:$.detail.features[0].geometry.coordinates,zoom:S})})}function c($){J[$?"unshift":"push"](()=>{l=$,n(0,l)})}function d($){o=$,n(1,o)}return[l,o,s,u,i,a,f,c,d]}class pc extends q{constructor(e){super(),W(this,e,$c,cc,G,{})}}function mc(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function _c(r){let e;return{c(){e=w("crossing")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function gc(r){let e,n,t,l,o,s,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[_c]},$$scope:{ctx:r}}}),s=new lt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=T(),h(s.$$.fragment)},m(i,a){p(i,e,a),k(e,n),b(t,e,null),k(e,l),p(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function dc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[gc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function hc(r){let e,n=Tr(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=Tr(l[3])+"")&&j(t,n)},d(l){l&&m(e)}}}function bc(r){let e,n;return e=new le({props:{$$slots:{default:[hc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vc(r){let e,n;const t=[B(bt),{sourceLayer:bt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[bc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new nt({props:l}),e.$on("click",kc),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?Y(t,[s&0&&ne(B(bt)),s&0&&{sourceLayer:bt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function wc(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:bt,$$slots:{right:[dc],default:[mc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),J.push(()=>Z(e,"checked",s)),l=new he({props:{url:`pmtiles://${_e()}/v1/${bt}.pmtiles`,$$slots:{default:[vc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let bt="crossings";function Tr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function kc(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function yc(r,e,n){let t=te.crossings,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Sc extends q{constructor(e){super(),W(this,e,yc,wc,G,{})}}function Cc(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Oc(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Tc(r){let e,n,t,l,o,s,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Oc]},$$scope:{ctx:r}}}),s=new lt({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=T(),h(s.$$.fragment)},m(i,a){p(i,e,a),k(e,n),b(t,e,null),k(e,l),p(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function Ac(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Tc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Lc(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(s,u){p(s,e,u),k(e,n),k(e,t),k(t,o)},p(s,u){u&8&&l!==(l=(s[3].capacity??"unknown")+"")&&j(o,l)},d(s){s&&m(e)}}}function Ic(r){let e,n;return e=new le({props:{$$slots:{default:[Lc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pc(r){let e,n;const t=[B(vt),{sourceLayer:vt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Ic]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new nt({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?Y(t,[s&0&&ne(B(vt)),s&0&&{sourceLayer:vt},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Mc(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:vt,$$slots:{right:[Ac],default:[Cc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),J.push(()=>Z(e,"checked",s)),l=new he({props:{url:`pmtiles://${_e()}/v1/${vt}.pmtiles`,$$slots:{default:[Pc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let vt="cycle_parking";function Nc(r,e,n){let t=te.cycle_parking,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Ec extends q{constructor(e){super(),W(this,e,Nc,Mc,G,{})}}function Dc(r){let e,n,t,l;return e=new ke({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=T(),t=w(r[2])},m(o,s){b(e,o,s),p(o,n,s),p(o,t,s),l=!0},p(o,s){(!l||s&4)&&j(t,o[2])},i(o){l||(_(e.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),l=!1},d(o){o&&(m(n),m(t)),v(e,o)}}}function Fc(r){let e;const n=r[5].default,t=Et(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Dt(t,n,l,l[7],e?jt(n,l[7],o,null):Ft(l[7]),null)},i(l){e||(_(t,l),e=!0)},o(l){g(t,l),e=!1},d(l){t&&t.d(l)}}}function jc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Fc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Rc(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&j(t,n)},d(l){l&&m(e)}}}function Bc(r){let e,n;return e=new le({props:{$$slots:{default:[Rc,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hc(r){let e,n;const t=[B(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Q(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Bc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new Ve({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&25?Y(t,[s&1&&ne(B(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Q(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Gc(r){let e,n,t,l,o;function s(i){r[6](i)}let u={id:r[0],$$slots:{right:[jc],default:[Dc]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new se({props:u}),J.push(()=>Z(e,"checked",s)),l=new he({props:{url:`pmtiles://${_e()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&1&&(f.id=i[0]),a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],x(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${_e()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}function Uc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=te[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,s,u,a,i,t,f,l]}class hn extends q{constructor(e){super(),W(this,e,Uc,Gc,G,{name:0,singularNoun:1,pluralNoun:2})}}function zc(r){let e;return{c(){e=w("hospital")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function qc(r){let e,n,t,l,o,s,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[zc]},$$scope:{ctx:r}}}),s=new lt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=T(),h(s.$$.fragment)},m(i,a){p(i,e,a),k(e,n),b(t,e,null),k(e,l),p(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function Wc(r){let e,n;return e=new hn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[qc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Vc extends q{constructor(e){super(),W(this,e,null,Wc,G,{})}}function Xc(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:ee,i(l){t||(_(e.$$.fragment,l),t=!0)},o(l){g(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Qc(r){let e;return{c(){e=w("railway station")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Jc(r){let e,n,t,l,o,s,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Qc]},$$scope:{ctx:r}}}),s=new lt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=T(),h(s.$$.fragment)},m(i,a){p(i,e,a),k(e,n),b(t,e,null),k(e,l),p(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function Kc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Jc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Yc(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&j(t,n)},d(l){l&&m(e)}}}function Zc(r){let e,n;return e=new le({props:{$$slots:{default:[Yc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xc(r){let e,n;const t=[B(Qt),{paint:{"circle-color":r[1],"circle-radius":Vt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Zc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new nt({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?Y(t,[s&0&&ne(B(Qt)),s&2&&{paint:{"circle-color":o[1],"circle-radius":Vt/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function e$(r){let e,n,t,l,o;function s(i){r[2](i)}let u={id:Qt,$$slots:{right:[Kc],default:[Xc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new se({props:u}),J.push(()=>Z(e,"checked",s)),l=new yt({props:{data:`${_e()}/v1/${Qt}.geojson`,$$slots:{default:[xc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}let Qt="railway_stations";function t$(r,e,n){let t=te.railway_stations,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class n$ extends q{constructor(e){super(),W(this,e,t$,e$,G,{})}}function r$(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function l$(r){let e,n,t,l,o,s,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[r$]},$$scope:{ctx:r}}}),s=new lt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=T(),h(s.$$.fragment)},m(i,a){p(i,e,a),k(e,n),b(t,e,null),k(e,l),p(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(m(e),m(o)),v(t),v(s,i)}}}function o$(r){let e,n;return e=new hn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[l$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class s$ extends q{constructor(e){super(),W(this,e,null,o$,G,{})}}function i$(r){let e;return{c(){e=w("sports pitches")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function a$(r){let e;return{c(){e=w("sports centres")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function f$(r){let e,n,t,l,o,s,u,i,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[i$]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[a$]},$$scope:{ctx:r}}}),i=new lt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),s=w(" data from OpenStreetMap (as of 9 August 2023)."),u=T(),h(i.$$.fragment)},m(f,c){p(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,s),p(f,u,c),b(i,f,c),a=!0},p(f,c){const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const $={};c&1&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){a||(_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!0)},o(f){g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(i,f)}}}function u$(r){let e,n;return e=new hn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[f$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class c$ extends q{constructor(e){super(),W(this,e,null,u$,G,{})}}function $$(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function p$(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function m$(r){let e;return{c(){e=w("methodology")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function _$(r){let e,n,t,l,o,s,u,i,a,f,c;return t=new V({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[p$]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[m$]},$$scope:{ctx:r}}}),f=new Xe({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),s=w(" for details and caveats about the measurements."),u=T(),i=A("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=T(),h(f.$$.fragment)},m(d,$){p(d,e,$),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,s),p(d,u,$),p(d,i,$),p(d,a,$),b(f,d,$),c=!0},p(d,$){const y={};$&64&&(y.$$scope={dirty:$,ctx:d}),t.$set(y);const S={};$&64&&(S.$$scope={dirty:$,ctx:d}),o.$set(S)},i(d){c||(_(t.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),c=!0)},o(d){g(t.$$.fragment,d),g(o.$$.fragment,d),g(f.$$.fragment,d),c=!1},d(d){d&&(m(e),m(u),m(i),m(a)),v(t),v(o),v(f,d)}}}function g$(r){let e,n,t;return n=new ae({props:{$$slots:{default:[_$]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Ar(r){let e,n;return e=new Qe({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function d$(r){let e,n=r[5].location+"",t,l,o,s,u,i=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,d,$,y=r[5].pedal_cycles_2022.toLocaleString()+"",S,O,C,M,N,D=r[5].method+"",L;return{c(){e=A("h2"),t=w(n),l=T(),o=A("p"),s=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(i),f=T(),c=A("p"),d=w("Total pedal cycles (2022 AADF): "),$=A("b"),S=w(y),O=T(),C=A("p"),M=w("Count method: "),N=A("b"),L=w(D)},m(F,E){p(F,e,E),k(e,t),p(F,l,E),p(F,o,E),k(o,s),k(o,u),k(u,a),p(F,f,E),p(F,c,E),k(c,d),k(c,$),k($,S),p(F,O,E),p(F,C,E),k(C,M),k(C,N),k(N,L)},p(F,E){E&32&&n!==(n=F[5].location+"")&&j(t,n),E&32&&i!==(i=F[5].motor_vehicles_2022.toLocaleString()+"")&&j(a,i),E&32&&y!==(y=F[5].pedal_cycles_2022.toLocaleString()+"")&&j(S,y),E&32&&D!==(D=F[5].method+"")&&j(L,D)},d(F){F&&(m(e),m(l),m(o),m(f),m(c),m(O),m(C))}}}function h$(r){let e,n;return e=new le({props:{$$slots:{default:[d$,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function b$(r){let e,n;const t=[B(wt),{sourceLayer:wt},{paint:{"circle-color":ve(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[h$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new nt({props:l}),e.$on("click",w$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?Y(t,[s&0&&ne(B(wt)),s&0&&{sourceLayer:wt},s&6&&{paint:{"circle-color":ve(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function v$(r){let e,n,t,l,o,s;function u(f){r[4](f)}let i={id:wt,$$slots:{right:[g$],default:[$$]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new se({props:i}),J.push(()=>Z(e,"checked",u));let a=r[0]&&Ar(r);return o=new he({props:{url:`pmtiles://${_e()}/v1/${wt}.pmtiles`,$$slots:{default:[b$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),s=!0},p(f,[c]){const d={};c&64&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&_(a,1)):(a=Ar(f),a.c(),_(a,1),a.m(l.parentNode,l)):a&&(fe(),g(a,1,1,()=>{a=null}),ue());const $={};c&65&&($.$$scope={dirty:c,ctx:f}),o.$set($)},i(f){s||(_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!0)},o(f){g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let wt="vehicle_counts";function w$(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function k$(r,e,n){let t=te.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,l,o,u]}class y$ extends q{constructor(e){super(),W(this,e,k$,v$,G,{})}}function S$(r){let e,n,t,l,o,s,u,i;return e=new s$({}),t=new Vc({}),o=new c$({}),u=new n$({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),p(a,l,f),b(o,a,f),p(a,s,f),b(u,a,f),i=!0},i(a){i||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),i=!1},d(a){a&&(m(n),m(l),m(s)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function C$(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[S$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function O$(r){let e,n,t,l,o,s,u,i,a,f,c,d;return e=new Vf({}),t=new $u({}),o=new nu({}),u=new Nf({}),a=new Ec({}),c=new Sc({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment),i=T(),h(a.$$.fragment),f=T(),h(c.$$.fragment)},m($,y){b(e,$,y),p($,n,y),b(t,$,y),p($,l,y),b(o,$,y),p($,s,y),b(u,$,y),p($,i,y),b(a,$,y),p($,f,y),b(c,$,y),d=!0},i($){d||(_(e.$$.fragment,$),_(t.$$.fragment,$),_(o.$$.fragment,$),_(u.$$.fragment,$),_(a.$$.fragment,$),_(c.$$.fragment,$),d=!0)},o($){g(e.$$.fragment,$),g(t.$$.fragment,$),g(o.$$.fragment,$),g(u.$$.fragment,$),g(a.$$.fragment,$),g(c.$$.fragment,$),d=!1},d($){$&&(m(n),m(l),m(s),m(i),m(f)),v(e,$),v(t,$),v(o,$),v(u,$),v(a,$),v(c,$)}}}function T$(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[O$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function A$(r){let e,n,t,l,o,s,u,i,a,f;return e=new Ja({}),t=new bf({}),o=new na({}),u=new Sa({}),a=new Ra({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment),i=T(),h(a.$$.fragment)},m(c,d){b(e,c,d),p(c,n,d),b(t,c,d),p(c,l,d),b(o,c,d),p(c,s,d),b(u,c,d),p(c,i,d),b(a,c,d),f=!0},i(c){f||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(s),m(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function L$(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[A$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function I$(r){let e,n,t,l;return e=new Wi({}),t=new pa({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function P$(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[I$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function M$(r){let e,n,t,l,o,s;return e=new rc({}),t=new ku({}),o=new Xu({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment)},m(u,i){b(e,u,i),p(u,n,i),b(t,u,i),p(u,l,i),b(o,u,i),s=!0},i(u){s||(_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!0)},o(u){g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!1},d(u){u&&(m(n),m(l)),v(e,u),v(t,u),v(o,u)}}}function N$(r){let e,n,t,l,o=pn()=="Private (development)",s,u,i;e=new y$({}),t=new Fu({});let a=o&&M$();return u=new af({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),a&&a.c(),s=T(),h(u.$$.fragment)},m(f,c){b(e,f,c),p(f,n,c),b(t,f,c),p(f,l,c),a&&a.m(f,c),p(f,s,c),b(u,f,c),i=!0},p:ee,i(f){i||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(a),_(u.$$.fragment,f),i=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(a),g(u.$$.fragment,f),i=!1},d(f){f&&(m(n),m(l),m(s)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function E$(r){let e,n;return e=new rt({props:{small:!0,$$slots:{default:[N$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function D$(r){let e,n,t,l,o;function s(i){r[3](i)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new kl({props:u}),J.push(()=>Z(e,"enabled",s)),l=new Al({}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(i,a){b(e,i,a),p(i,t,a),b(l,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],x(()=>n=!1)),e.$set(f)},i(i){o||(_(e.$$.fragment,i),_(l.$$.fragment,i),o=!0)},o(i){g(e.$$.fragment,i),g(l.$$.fragment,i),o=!1},d(i){i&&m(t),v(e,i),v(l,i)}}}function F$(r){let e,n,t,l,o,s,u,i,a,f,c,d,$,y,S,O;return e=new pc({}),t=new Me({props:{label:"Trip generators",$$slots:{default:[C$]},$$scope:{ctx:r}}}),o=new Me({props:{label:"Existing infrastructure",$$slots:{default:[T$]},$$scope:{ctx:r}}}),u=new Me({props:{label:"Boundaries",$$slots:{default:[L$]},$$scope:{ctx:r}}}),a=new Me({props:{label:"Census",$$slots:{default:[P$]},$$scope:{ctx:r}}}),c=new Me({props:{label:"Other",$$slots:{default:[E$]},$$scope:{ctx:r}}}),$=new Me({props:{label:"Tools",$$slots:{default:[D$]},$$scope:{ctx:r}}}),S=new wl({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment),i=T(),h(a.$$.fragment),f=T(),h(c.$$.fragment),d=T(),h($.$$.fragment),y=T(),h(S.$$.fragment)},m(C,M){b(e,C,M),p(C,n,M),b(t,C,M),p(C,l,M),b(o,C,M),p(C,s,M),b(u,C,M),p(C,i,M),b(a,C,M),p(C,f,M),b(c,C,M),p(C,d,M),b($,C,M),p(C,y,M),b(S,C,M),O=!0},p(C,M){const N={};M&16&&(N.$$scope={dirty:M,ctx:C}),t.$set(N);const D={};M&16&&(D.$$scope={dirty:M,ctx:C}),o.$set(D);const L={};M&16&&(L.$$scope={dirty:M,ctx:C}),u.$set(L);const F={};M&16&&(F.$$scope={dirty:M,ctx:C}),a.$set(F);const E={};M&16&&(E.$$scope={dirty:M,ctx:C}),c.$set(E);const I={};M&17&&(I.$$scope={dirty:M,ctx:C}),$.$set(I);const P={};M&2&&(P.disabled=!C[1]),S.$set(P)},i(C){O||(_(e.$$.fragment,C),_(t.$$.fragment,C),_(o.$$.fragment,C),_(u.$$.fragment,C),_(a.$$.fragment,C),_(c.$$.fragment,C),_($.$$.fragment,C),_(S.$$.fragment,C),O=!0)},o(C){g(e.$$.fragment,C),g(t.$$.fragment,C),g(o.$$.fragment,C),g(u.$$.fragment,C),g(a.$$.fragment,C),g(c.$$.fragment,C),g($.$$.fragment,C),g(S.$$.fragment,C),O=!1},d(C){C&&(m(n),m(l),m(s),m(i),m(f),m(d),m(y)),v(e,C),v(t,C),v(o,C),v(u,C),v(a,C),v(c,C),v($,C),v(S,C)}}}function j$(r){let e,n;const t=[B("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=K(l,t[o]);return e=new Ve({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&2?Y(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(_(e.$$.fragment,o),n=!0)},o(o){g(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function R$(r){let e,n,t,l;return e=new Me({props:{label:"Layers",open:!0,$$slots:{default:[F$]},$$scope:{ctx:r}}}),t=new yt({props:{data:r[2],$$slots:{default:[j$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function B$(r,e,n){let t,l;me(r,Jn,u=>n(1,l=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&Jn.set(!t)},[t,l,o,s]}class H$ extends q{constructor(e){super(),W(this,e,B$,R$,G,{})}}function G$(r,e,n){let{loadFile:t}=e;return _n(async()=>{let o=await(await fetch(`${Kt()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class U$ extends q{constructor(e){super(),W(this,e,G$,null,G,{loadFile:0})}}function Lr(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=A("p"),n=w("Current milestone: "),l=w(t)},m(s,u){p(s,e,u),k(e,n),k(e,l)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&j(l,t)},d(s){s&&m(e)}}}function z$(r){let e;return{c(){e=w("Show on map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function q$(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function W$(r){let e,n,t,l;return e=new ln({props:{$$slots:{default:[z$]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new ln({props:{$$slots:{default:[q$]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function V$(r){var D,L,F,E;let e,n,t=((D=r[0].browse)==null?void 0:D.authority_or_region)+"",l,o,s,u,i=((L=r[0].browse)==null?void 0:L.capital_scheme_id)+"",a,f,c,d,$=((F=r[0].browse)==null?void 0:F.funding_programme)+"",y,S,O,C,M,N=((E=r[0].browse)==null?void 0:E.current_milestone)&&Lr(r);return C=new yl({props:{$$slots:{default:[W$]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=T(),s=A("p"),u=w("Capital scheme ID: "),a=w(i),f=T(),c=A("p"),d=w("Funding programme: "),y=w($),S=T(),N&&N.c(),O=T(),h(C.$$.fragment)},m(I,P){p(I,e,P),k(e,n),k(e,l),p(I,o,P),p(I,s,P),k(s,u),k(s,a),p(I,f,P),p(I,c,P),k(c,d),k(c,y),p(I,S,P),N&&N.m(I,P),p(I,O,P),b(C,I,P),M=!0},p(I,P){var X,R,U,$e;(!M||P&1)&&t!==(t=((X=I[0].browse)==null?void 0:X.authority_or_region)+"")&&j(l,t),(!M||P&1)&&i!==(i=((R=I[0].browse)==null?void 0:R.capital_scheme_id)+"")&&j(a,i),(!M||P&1)&&$!==($=((U=I[0].browse)==null?void 0:U.funding_programme)+"")&&j(y,$),($e=I[0].browse)!=null&&$e.current_milestone?N?N.p(I,P):(N=Lr(I),N.c(),N.m(O.parentNode,O)):N&&(N.d(1),N=null);const H={};P&32&&(H.$$scope={dirty:P,ctx:I}),C.$set(H)},i(I){M||(_(C.$$.fragment,I),M=!0)},o(I){g(C.$$.fragment,I),M=!1},d(I){I&&(m(e),m(o),m(s),m(f),m(c),m(S),m(O)),N&&N.d(I),v(C,I)}}}function X$(r){var t;let e,n;return e=new Me({props:{label:`${r[0].scheme_reference}: ${(t=r[0].browse)==null?void 0:t.num_features} features`,$$slots:{default:[V$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),n=!0},p(l,[o]){var u;const s={};o&1&&(s.label=`${l[0].scheme_reference}: ${(u=l[0].browse)==null?void 0:u.num_features} features`),o&33&&(s.$$scope={dirty:o,ctx:l}),e.$set(s)},i(l){n||(_(e.$$.fragment,l),n=!0)},o(l){g(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function Q$(r,e,n){let t,l;me(r,kt,i=>n(3,t=i)),me(r,mn,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(gl(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(d=>d.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class J$ extends q{constructor(e){super(),W(this,e,Q$,X$,G,{scheme:0})}}function Ir(r){let e,n,t=kn(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,s){p(o,e,s),k(e,n),k(e,l)},p(o,s){s&1&&t!==(t=kn(o[0].length_meters)+"")&&j(l,t)},d(o){o&&m(e)}}}function Pr(r){let e,n=r[2](r[0].description)+"";return{c(){e=A("p")},m(t,l){p(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[2](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&m(e)}}}function Mr(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=A("p"),n=w("Current milestone: "),l=w(t)},m(s,u){p(s,e,u),k(e,n),k(e,l)},p(s,u){var i;u&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&j(l,t)},d(s){s&&m(e)}}}function K$(r){var xe,Te,Le,Fe;let e,n,t,l=r[2](r[0].name)+"",o,s=r[0].intervention_type+"",u,i,a,f,c,d,$,y,S,O=r[0].scheme_reference+"",C,M,N,D,L=((xe=r[1].browse)==null?void 0:xe.authority_or_region)+"",F,E,I,P,H=((Te=r[1].browse)==null?void 0:Te.capital_scheme_id)+"",X,R,U,$e,De=((Le=r[1].browse)==null?void 0:Le.funding_programme)+"",be,Je,pe=r[0].length_meters&&Ir(r),ce=r[0].description&&Pr(r),re=((Fe=r[1].browse)==null?void 0:Fe.current_milestone)&&Mr(r);return{c(){e=A("div"),n=A("h2"),t=new gn(!1),o=w(" ("),u=w(s),i=w(")"),a=T(),pe&&pe.c(),f=T(),ce&&ce.c(),c=T(),d=A("hr"),$=T(),y=A("p"),S=w("Part of scheme: "),C=w(O),M=T(),N=A("p"),D=w("Authority or region: "),F=w(L),E=T(),I=A("p"),P=w("Capital scheme ID: "),X=w(H),R=T(),U=A("p"),$e=w("Funding programme: "),be=w(De),Je=T(),re&&re.c(),t.a=o,Oe(e,"max-width","30vw")},m(oe,ge){p(oe,e,ge),k(e,n),t.m(l,n),k(n,o),k(n,u),k(n,i),k(e,a),pe&&pe.m(e,null),k(e,f),ce&&ce.m(e,null),k(e,c),k(e,d),k(e,$),k(e,y),k(y,S),k(y,C),k(e,M),k(e,N),k(N,D),k(N,F),k(e,E),k(e,I),k(I,P),k(I,X),k(e,R),k(e,U),k(U,$e),k(U,be),k(e,Je),re&&re.m(e,null)},p(oe,[ge]){var je,Ke,we,ye;ge&1&&l!==(l=oe[2](oe[0].name)+"")&&t.p(l),ge&1&&s!==(s=oe[0].intervention_type+"")&&j(u,s),oe[0].length_meters?pe?pe.p(oe,ge):(pe=Ir(oe),pe.c(),pe.m(e,f)):pe&&(pe.d(1),pe=null),oe[0].description?ce?ce.p(oe,ge):(ce=Pr(oe),ce.c(),ce.m(e,c)):ce&&(ce.d(1),ce=null),ge&1&&O!==(O=oe[0].scheme_reference+"")&&j(C,O),ge&2&&L!==(L=((je=oe[1].browse)==null?void 0:je.authority_or_region)+"")&&j(F,L),ge&2&&H!==(H=((Ke=oe[1].browse)==null?void 0:Ke.capital_scheme_id)+"")&&j(X,H),ge&2&&De!==(De=((we=oe[1].browse)==null?void 0:we.funding_programme)+"")&&j(be,De),(ye=oe[1].browse)!=null&&ye.current_milestone?re?re.p(oe,ge):(re=Mr(oe),re.c(),re.m(e,null)):re&&(re.d(1),re=null)},i:ee,o:ee,d(oe){oe&&m(e),pe&&pe.d(),ce&&ce.d(),re&&re.d()}}}function Y$(r,e,n){let t,l,o;me(r,zt,i=>n(4,l=i)),me(r,Nt,i=>n(3,o=i));let{props:s}=e;function u(i){return l?i.replace(new RegExp(l,"gi"),a=>`<mark>${a}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,s=i.props)},r.$$.update=()=>{r.$$.dirty&9&&n(1,t=o.get(s.scheme_reference))},[s,t,u,o]}class bn extends q{constructor(e){super(),W(this,e,Y$,K$,G,{props:0})}}function Z$(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&j(t,n)},d(l){l&&m(e)}}}function x$(r){let e,n;return e=new bn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ep(r){let e,n,t,l;return e=new le({props:{popupClass:"border-popup",$$slots:{default:[Z$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[x$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function tp(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&j(t,n)},d(l){l&&m(e)}}}function np(r){let e,n;return e=new bn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rp(r){let e,n,t,l;return e=new le({props:{popupClass:"border-popup",$$slots:{default:[tp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[np,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function lp(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&j(t,n)},d(l){l&&m(e)}}}function op(r){let e,n;return e=new bn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sp(r){let e,n,t,l;return e=new le({props:{popupClass:"border-popup",$$slots:{default:[lp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[op,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,s){b(e,o,s),p(o,n,s),b(t,o,s),l=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(_(e.$$.fragment,o),_(t.$$.fragment,o),l=!0)},o(o){g(e.$$.fragment,o),g(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function ip(r){let e,n,t,l,o,s,u,i,a,f;const c=[B("interventions-points"),{filter:["all",yn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Vt,"circle-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let d={$$slots:{default:[ep]},$$scope:{ctx:r}};for(let L=0;L<c.length;L+=1)d=K(d,c[L]);e=new nt({props:d});const $=[B("interventions-lines"),{filter:["all",Sn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":St,"line-opacity":Q(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[rp]},$$scope:{ctx:r}};for(let L=0;L<$.length;L+=1)y=K(y,$[L]);t=new de({props:y});const S=[B("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*St,"circle-opacity":0,"circle-stroke-color":Ze.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let O={};for(let L=0;L<S.length;L+=1)O=K(O,S[L]);o=new nt({props:O});const C=[B("interventions-polygons"),{filter:["all",Ht,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":Q(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let M={$$slots:{default:[sp]},$$scope:{ctx:r}};for(let L=0;L<C.length;L+=1)M=K(M,C[L]);u=new Ve({props:M});const N=[B("interventions-polygons-outlines"),{filter:["all",Ht,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*St}},{layout:{visibility:r[0]?"visible":"none"}}];let D={};for(let L=0;L<N.length;L+=1)D=K(D,N[L]);return a=new de({props:D}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment),i=T(),h(a.$$.fragment)},m(L,F){b(e,L,F),p(L,n,F),b(t,L,F),p(L,l,F),b(o,L,F),p(L,s,F),b(u,L,F),p(L,i,F),b(a,L,F),f=!0},p(L,F){const E=F&29?Y(c,[c[0],F&24&&{filter:["all",yn,L[3],L[4]]},c[2],c[3],F&4&&{paint:{"circle-color":L[2],"circle-radius":Vt,"circle-opacity":Q(1,.5)}},F&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};F&128&&(E.$$scope={dirty:F,ctx:L}),e.$set(E);const I=F&13?Y($,[$[0],F&8&&{filter:["all",Sn,L[3]]},$[2],$[3],F&4&&{paint:{"line-color":L[2],"line-width":St,"line-opacity":Q(1,.5)}},F&1&&{layout:{visibility:L[0]?"visible":"none"}},$[6]]):{};F&128&&(I.$$scope={dirty:F,ctx:L}),t.$set(I);const P=F&1?Y(S,[S[0],S[1],S[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(P);const H=F&13?Y(C,[C[0],F&8&&{filter:["all",Ht,L[3]]},C[2],C[3],F&4&&{paint:{"fill-color":L[2],"fill-opacity":Q(.2,.5)}},F&1&&{layout:{visibility:L[0]?"visible":"none"}},C[6]]):{};F&128&&(H.$$scope={dirty:F,ctx:L}),u.$set(H);const X=F&13?Y(N,[N[0],F&8&&{filter:["all",Ht,L[3]]},F&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*St}},F&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(X)},i(L){f||(_(e.$$.fragment,L),_(t.$$.fragment,L),_(o.$$.fragment,L),_(u.$$.fragment,L),_(a.$$.fragment,L),f=!0)},o(L){g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(u.$$.fragment,L),g(a.$$.fragment,L),f=!1},d(L){L&&(m(n),m(l),m(s),m(i)),v(e,L),v(t,L),v(o,L),v(u,L),v(a,L)}}}function ap(r){let e,n;return e=new yt({props:{data:r[1],$$slots:{default:[ip]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fp(r,e,n){let t,l;me(r,kt,a=>n(5,l=a));let{showSchemes:o}=e,s=al();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=dl(l))},[o,t,s,u,i,l]}class up extends q{constructor(e){super(),W(this,e,fp,ap,G,{showSchemes:0})}}function Nr(r,e,n){const t=r.slice();return t[10]=e[n],t}function cp(r){let e,n;return e=new U$({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Er(r){let e,n,t,l;function o(i){r[7](i)}function s(i){r[8](i)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new mi({props:u}),J.push(()=>Z(e,"schemesToBeShown",o)),J.push(()=>Z(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),l=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],x(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],x(()=>t=!1)),e.$set(f)},i(i){l||(_(e.$$.fragment,i),l=!0)},o(i){g(e.$$.fragment,i),l=!1},d(i){v(e,i)}}}function Dr(r){let e,n;return e=new J$({props:{scheme:r[10]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.scheme=t[10]),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fr(r){let e=r[1].has(r[10].scheme_reference),n,t,l=e&&Dr(r);return{c(){l&&l.c(),n=Ae()},m(o,s){l&&l.m(o,s),p(o,n,s),t=!0},p(o,s){s&34&&(e=o[1].has(o[10].scheme_reference)),e?l?(l.p(o,s),s&34&&_(l,1)):(l=Dr(o),l.c(),_(l,1),l.m(n.parentNode,n)):l&&(fe(),g(l,1,1,()=>{l=null}),ue())},i(o){t||(_(l),t=!0)},o(o){g(l),t=!1},d(o){o&&m(n),l&&l.d(o)}}}function $p(r){let e,n,t,l,o,s,u,i,a,f,c=pn()=="Private (development)",d,$,y,S,O,C,M,N;o=new Tl({props:{boundaryGeojson:r[3]}}),u=new xl({}),a=new hl({});let D=c&&cp(r);$=new Cl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[6]}}),S=new qr({props:{errorMessage:r[0]}});let L=r[5].size>0&&Er(r),F=qe(r[5].values()),E=[];for(let P=0;P<F.length;P+=1)E[P]=Fr(Nr(r,F,P));const I=P=>g(E[P],1,1,()=>{E[P]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=T(),h(o.$$.fragment),s=T(),h(u.$$.fragment),i=T(),h(a.$$.fragment),f=T(),D&&D.c(),d=T(),h($.$$.fragment),y=T(),h(S.$$.fragment),O=T(),L&&L.c(),C=T(),M=A("ul");for(let P=0;P<E.length;P+=1)E[P].c();Oe(n,"display","flex"),Oe(n,"justify-content","space-between"),z(e,"slot","sidebar"),z(e,"class","govuk-prose")},m(P,H){p(P,e,H),k(e,n),k(n,t),k(n,l),b(o,n,null),k(e,s),b(u,e,null),k(e,i),b(a,e,null),k(e,f),D&&D.m(e,null),k(e,d),b($,e,null),k(e,y),b(S,e,null),k(e,O),L&&L.m(e,null),k(e,C),k(e,M);for(let X=0;X<E.length;X+=1)E[X]&&E[X].m(M,null);N=!0},p(P,H){const X={};H&8&&(X.boundaryGeojson=P[3]),o.$set(X),c&&D.p(P,H);const R={};if(H&1&&(R.errorMessage=P[0]),S.$set(R),P[5].size>0?L?(L.p(P,H),H&32&&_(L,1)):(L=Er(P),L.c(),_(L,1),L.m(e,C)):L&&(fe(),g(L,1,1,()=>{L=null}),ue()),H&34){F=qe(P[5].values());let U;for(U=0;U<F.length;U+=1){const $e=Nr(P,F,U);E[U]?(E[U].p($e,H),_(E[U],1)):(E[U]=Fr($e),E[U].c(),_(E[U],1),E[U].m(M,null))}for(fe(),U=F.length;U<E.length;U+=1)I(U);ue()}},i(P){if(!N){_(o.$$.fragment,P),_(u.$$.fragment,P),_(a.$$.fragment,P),_(D),_($.$$.fragment,P),_(S.$$.fragment,P),_(L);for(let H=0;H<F.length;H+=1)_(E[H]);N=!0}},o(P){g(o.$$.fragment,P),g(u.$$.fragment,P),g(a.$$.fragment,P),g(D),g($.$$.fragment,P),g(S.$$.fragment,P),g(L),E=E.filter(Boolean);for(let H=0;H<E.length;H+=1)g(E[H]);N=!1},d(P){P&&m(e),v(o),v(u),v(a),D&&D.d(),v($),v(S),L&&L.d(),At(E,P)}}}function pp(r){let e,n,t,l,o,s,u;return e=new Sl({}),t=new up({props:{showSchemes:r[2]}}),s=new H$({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),o=A("div"),h(s.$$.fragment),z(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),p(i,n,a),b(t,i,a),p(i,l,a),p(i,o,a),b(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),u=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),u=!1},d(i){i&&(m(n),m(l),m(o)),v(e,i),v(t,i),v(s)}}}function mp(r){let e,n,t;return n=new bl({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[pp]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),z(e,"slot","main")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.style=l[4]),o&8196&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(_(n.$$.fragment,l),t=!0)},o(l){g(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function _p(r){let e,n;return e=new Ll({props:{$$slots:{main:[mp],sidebar:[$p]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&8255&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(_(e.$$.fragment,t),n=!0)},o(t){g(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gp(r,e,n){let t,l,o;me(r,kt,$=>n(3,t=$)),me(r,Cn,$=>n(4,l=$)),me(r,Nt,$=>n(5,o=$)),_n(()=>{vl()});const s=new URLSearchParams(window.location.search);Cn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0;function f($){try{kt.set(JSON.parse($)),Nt.set(ti(t)),n(0,u="")}catch(y){n(0,u=`The file you loaded is broken: ${y}`)}}function c($){i=$,n(1,i)}function d($){a=$,n(2,a)}return[u,i,a,t,l,o,f,c,d]}class dp extends q{constructor(e){super(),W(this,e,gp,_p,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new dp({target:document.getElementById("app")});
