import{S as D,i as H,s as V,c as q,m as N,t as g,e as b,f as O,j as M,g as G,k as W,l as $,a6 as J,a7 as se,o as v,h as R,n as B,A as fe,a8 as xe,a9 as on,b as U,a as I,G as Y,d as A,x as _e,ad as je,C as Z,w as K,v as ce,a0 as de,y as en,E as te,H as fn,ay as re,aw as an}from"./index-68149896.js";import{a as pe,v as oe,E as be,R as ue}from"./Radio-416db9bd.js";import{S as me}from"./SecondaryButton-17e3dcc7.js";import{S as $e,p as ae,a as he,C as pn,g as cn,b as mn,t as _n,r as Me}from"./colors-b3c9665b.js";import{e as we}from"./files-25ae18d7.js";import{B as dn}from"./ButtonGroup-5b6b11da.js";import{W as gn}from"./WarningButton-56611957.js";import{M as hn}from"./Modal-24c661ad.js";function Pe(n){let e,i,t=ye(n[0])+"",l;return{c(){e=G("div"),i=R("Â£"),l=R(t),W(e,"class","govuk-hint")},m(o,r){$(o,e,r),B(e,i),B(e,l)},p(o,r){r&1&&t!==(t=ye(o[0])+"")&&fe(l,t)},d(o){o&&v(e)}}}function bn(n){let e;return{c(){e=R("multiply by 1 million")},m(i,t){$(i,e,t)},d(i){i&&v(e)}}}function $n(n){let e,i,t,l,o,r,u,s,f;e=new be({props:{errorMessage:Te(n[2])}});let a=n[0]!=null&&Pe(n);return r=new me({props:{disabled:n[0]==null||n[0]>1e3,$$slots:{default:[bn]},$$scope:{ctx:n}}}),r.$on("click",n[4]),{c(){q(e.$$.fragment),i=M(),a&&a.c(),t=M(),l=G("input"),o=M(),q(r.$$.fragment),W(l,"type","text"),W(l,"inputmode","numeric"),W(l,"class","govuk-input govuk-input--width-10"),W(l,"id",n[3])},m(m,c){N(e,m,c),$(m,i,c),a&&a.m(m,c),$(m,t,c),$(m,l,c),J(l,n[2]),$(m,o,c),N(r,m,c),u=!0,s||(f=se(l,"input",n[5]),s=!0)},p(m,c){const h={};c&4&&(h.errorMessage=Te(m[2])),e.$set(h),m[0]!=null?a?a.p(m,c):(a=Pe(m),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),c&4&&l.value!==m[2]&&J(l,m[2]);const C={};c&1&&(C.disabled=m[0]==null||m[0]>1e3),c&128&&(C.$$scope={dirty:c,ctx:m}),r.$set(C)},i(m){u||(g(e.$$.fragment,m),g(r.$$.fragment,m),u=!0)},o(m){b(e.$$.fragment,m),b(r.$$.fragment,m),u=!1},d(m){m&&(v(i),v(t),v(l),v(o)),O(e,m),a&&a.d(m),O(r,m),s=!1,f()}}}function vn(n){let e,i;return e=new pe({props:{label:n[1],id:n[3],$$slots:{default:[$n]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,l){N(e,t,l),i=!0},p(t,[l]){const o={};l&2&&(o.label=t[1]),l&133&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){i||(g(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){O(e,t)}}}function nn(n){if(n!="")return parseFloat(n.replaceAll(",",""))}function Te(n){let e=nn(n);return e==null?"":isNaN(e)?"Please enter a valid number":e<0?"Please enter a positive number":""}function ye(n){return n.toLocaleString()}function kn(n,e,i){let{label:t}=e,{value:l}=e,o=oe(),r=l==null?"":ye(l);function u(a){i(0,l=nn(a))}function s(){i(2,r=ye(l*1e6))}function f(){r=this.value,i(2,r)}return n.$$set=a=>{"label"in a&&i(1,t=a.label),"value"in a&&i(0,l=a.value)},n.$$.update=()=>{n.$$.dirty&4&&u(r)},[l,t,r,o,s,f]}class wn extends D{constructor(e){super(),H(this,e,kn,vn,V,{label:1,value:0})}}function yn(n){let e,i,t,l,o,r,u;return e=new be({props:{errorMessage:n[5](n[2])}}),{c(){q(e.$$.fragment),i=M(),t=G("input"),W(t,"type","text"),W(t,"inputmode","numeric"),W(t,"class",l=`govuk-input govuk-input--width-${n[1]}`),W(t,"id",n[3])},m(s,f){N(e,s,f),$(s,i,f),$(s,t,f),J(t,n[2]),o=!0,r||(u=[se(t,"input",n[9]),se(t,"change",n[4])],r=!0)},p(s,f){const a={};f&4&&(a.errorMessage=s[5](s[2])),e.$set(a),(!o||f&2&&l!==(l=`govuk-input govuk-input--width-${s[1]}`))&&W(t,"class",l),f&4&&t.value!==s[2]&&J(t,s[2])},i(s){o||(g(e.$$.fragment,s),o=!0)},o(s){b(e.$$.fragment,s),o=!1},d(s){s&&(v(i),v(t)),O(e,s),r=!1,xe(u)}}}function Sn(n){let e,i;return e=new pe({props:{label:n[0],id:n[3],$$slots:{default:[yn]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,l){N(e,t,l),i=!0},p(t,[l]){const o={};l&1&&(o.label=t[0]),l&1030&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){i||(g(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){O(e,t)}}}function jn(n,e,i){let{label:t}=e,{value:l}=e,{width:o}=e,{min:r=void 0}=e,{max:u=void 0}=e,s=l==null?void 0:l.toString(),f=oe();function a(){i(6,l=s==null?void 0:parseInt(s,10))}function m(h){if(h==""||h==null)return"";if(h.includes("."))return"Please enter a number without decimals";let C=Number(h);return isNaN(C)?"Please enter a valid number":r!=null&&C<r?`Please enter a number that's at least ${r};`:u!=null&&C>u?`Please enter a number that's at most ${u};`:""}function c(){s=this.value,i(2,s)}return n.$$set=h=>{"label"in h&&i(0,t=h.label),"value"in h&&i(6,l=h.value),"width"in h&&i(1,o=h.width),"min"in h&&i(7,r=h.min),"max"in h&&i(8,u=h.max)},[t,o,s,f,a,m,l,r,u,c]}class Oe extends D{constructor(e){super(),H(this,e,jn,Sn,V,{label:0,value:6,width:1,min:7,max:8})}}function Ue(n){let e,i;return{c(){e=G("div"),i=R(n[2]),W(e,"class","govuk-hint")},m(t,l){$(t,e,l),B(e,i)},p(t,l){l&4&&fe(i,t[2])},d(t){t&&v(e)}}}function qn(n){let e,i,t,l,o,r,u;e=new be({props:{errorMessage:n[4]}});let s=n[2]&&Ue(n);return{c(){q(e.$$.fragment),i=M(),s&&s.c(),t=M(),l=G("textarea"),W(l,"class","govuk-textarea"),W(l,"id",n[5]),W(l,"rows",n[3])},m(f,a){N(e,f,a),$(f,i,a),s&&s.m(f,a),$(f,t,a),$(f,l,a),J(l,n[0]),o=!0,r||(u=se(l,"input",n[6]),r=!0)},p(f,a){const m={};a&16&&(m.errorMessage=f[4]),e.$set(m),f[2]?s?s.p(f,a):(s=Ue(f),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null),(!o||a&8)&&W(l,"rows",f[3]),a&1&&J(l,f[0])},i(f){o||(g(e.$$.fragment,f),o=!0)},o(f){b(e.$$.fragment,f),o=!1},d(f){f&&(v(i),v(t),v(l)),O(e,f),s&&s.d(f),r=!1,u()}}}function Nn(n){let e,i;return e=new pe({props:{label:n[1],id:n[5],$$slots:{default:[qn]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,l){N(e,t,l),i=!0},p(t,[l]){const o={};l&2&&(o.label=t[1]),l&157&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){i||(g(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){O(e,t)}}}function On(n,e,i){let{label:t}=e,{hint:l=""}=e,{value:o}=e,{rows:r=5}=e,{errorMessage:u=""}=e,s=oe();function f(){o=this.value,i(0,o)}return n.$$set=a=>{"label"in a&&i(1,t=a.label),"hint"in a&&i(2,l=a.hint),"value"in a&&i(0,o=a.value),"rows"in a&&i(3,r=a.rows),"errorMessage"in a&&i(4,u=a.errorMessage)},[o,t,l,r,u,s,f]}class ve extends D{constructor(e){super(),H(this,e,On,Nn,V,{label:1,hint:2,value:0,rows:3,errorMessage:4})}}function Fn(n){let e,i,t,l,o,r;return e=new be({props:{errorMessage:n[2]}}),{c(){q(e.$$.fragment),i=M(),t=G("input"),W(t,"type","text"),W(t,"class","govuk-input"),W(t,"id",n[3])},m(u,s){N(e,u,s),$(u,i,s),$(u,t,s),J(t,n[0]),l=!0,o||(r=[se(t,"input",n[6]),se(t,"change",n[5])],o=!0)},p(u,s){const f={};s&4&&(f.errorMessage=u[2]),e.$set(f),s&1&&t.value!==u[0]&&J(t,u[0])},i(u){l||(g(e.$$.fragment,u),l=!0)},o(u){b(e.$$.fragment,u),l=!1},d(u){u&&(v(i),v(t)),O(e,u),o=!1,xe(r)}}}function Cn(n){let e,i;return e=new pe({props:{label:n[1],id:n[3],$$slots:{default:[Fn]},$$scope:{ctx:n}}}),{c(){q(e.$$.fragment)},m(t,l){N(e,t,l),i=!0},p(t,[l]){const o={};l&2&&(o.label=t[1]),l&133&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){i||(g(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){O(e,t)}}}function Mn(n,e,i){let t,{label:l}=e,{value:o}=e,{required:r=!1}=e,u=oe();function s(a){on.call(this,n,a)}function f(){o=this.value,i(0,o)}return n.$$set=a=>{"label"in a&&i(1,l=a.label),"value"in a&&i(0,o=a.value),"required"in a&&i(4,r=a.required)},n.$$.update=()=>{n.$$.dirty&17&&i(2,t=r&&(o==null||o=="")?"Required":"")},[o,l,t,u,r,s,f]}class Fe extends D{constructor(e){super(),H(this,e,Mn,Cn,V,{label:1,value:0,required:4})}}function Ie(n){let e,i;return e=new me({props:{disabled:!n[2],$$slots:{default:[Pn]},$$scope:{ctx:n}}}),e.$on("click",n[7]),{c(){q(e.$$.fragment)},m(t,l){N(e,t,l),i=!0},p(t,l){const o={};l&4&&(o.disabled=!t[2]),l&4096&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){i||(g(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){O(e,t)}}}function Pn(n){let e;return{c(){e=R("Auto-fill")},m(i,t){$(i,e,t)},d(i){i&&v(e)}}}function Tn(n){let e,i,t,l,o,r,u=n[0].length_meters&&Ie(n);return{c(){e=G("input"),i=M(),u&&u.c(),t=Y(),W(e,"type","text"),W(e,"class","govuk-input"),W(e,"id",n[5])},m(s,f){$(s,e,f),J(e,n[0].name),$(s,i,f),u&&u.m(s,f),$(s,t,f),l=!0,o||(r=se(e,"input",n[6]),o=!0)},p(s,f){f&1&&e.value!==s[0].name&&J(e,s[0].name),s[0].length_meters?u?(u.p(s,f),f&1&&g(u,1)):(u=Ie(s),u.c(),g(u,1),u.m(t.parentNode,t)):u&&(Z(),b(u,1,1,()=>{u=null}),K())},i(s){l||(g(u),l=!0)},o(s){b(u),l=!1},d(s){s&&(v(e),v(i),v(t)),u&&u.d(s),o=!1,r()}}}function Ae(n){let e,i,t=ae(n[0].length_meters)+"",l;return{c(){e=G("p"),i=R("Length: "),l=R(t)},m(o,r){$(o,e,r),B(e,i),B(e,l)},p(o,r){r&1&&t!==(t=ae(o[0].length_meters)+"")&&fe(l,t)},d(o){o&&v(e)}}}function Un(n){let e,i,t,l,o,r,u,s,f,a,m,c,h;e=new pe({props:{label:"Name",id:n[5],$$slots:{default:[Tn]},$$scope:{ctx:n}}});function C(S){n[9](S)}let P={label:"Scheme",choices:Object.values(n[3].schemes).map(n[8])};n[0].scheme_reference!==void 0&&(P.value=n[0].scheme_reference),t=new $e({props:P}),U.push(()=>I(t,"value",C));function w(S){n[10](S)}let _={label:"Type",choices:[["area","Area"],["route","Route"],["crossing","Crossing"],["other","Other"]],inlineSmall:!0,required:!0};n[0].intervention_type!==void 0&&(_.value=n[0].intervention_type),r=new ue({props:_}),U.push(()=>I(r,"value",w));function p(S){n[11](S)}let d={label:"Description"};n[0].description!==void 0&&(d.value=n[0].description),f=new ve({props:d}),U.push(()=>I(f,"value",p));let T=n[0].length_meters&&Ae(n);return{c(){q(e.$$.fragment),i=M(),q(t.$$.fragment),o=M(),q(r.$$.fragment),s=M(),q(f.$$.fragment),m=M(),T&&T.c(),c=Y()},m(S,L){N(e,S,L),$(S,i,L),N(t,S,L),$(S,o,L),N(r,S,L),$(S,s,L),N(f,S,L),$(S,m,L),T&&T.m(S,L),$(S,c,L),h=!0},p(S,[L]){const j={};L&4101&&(j.$$scope={dirty:L,ctx:S}),e.$set(j);const X={};L&8&&(X.choices=Object.values(S[3].schemes).map(S[8])),!l&&L&1&&(l=!0,X.value=S[0].scheme_reference,A(()=>l=!1)),t.$set(X);const z={};!u&&L&1&&(u=!0,z.value=S[0].intervention_type,A(()=>u=!1)),r.$set(z);const x={};!a&&L&1&&(a=!0,x.value=S[0].description,A(()=>a=!1)),f.$set(x),S[0].length_meters?T?T.p(S,L):(T=Ae(S),T.c(),T.m(c.parentNode,c)):T&&(T.d(1),T=null)},i(S){h||(g(e.$$.fragment,S),g(t.$$.fragment,S),g(r.$$.fragment,S),g(f.$$.fragment,S),h=!0)},o(S){b(e.$$.fragment,S),b(t.$$.fragment,S),b(r.$$.fragment,S),b(f.$$.fragment,S),h=!1},d(S){S&&(v(i),v(o),v(s),v(m),v(c)),O(e,S),O(t,S),O(r,S),O(f,S),T&&T.d(S)}}}function In(n,e,i){let t,l,o=ce,r=()=>(o(),o=de(u,_=>i(3,l=_)),u);_e(n,je,_=>i(2,t=_)),n.$$.on_destroy.push(()=>o());let{gjSchemes:u}=e;r();let{props:s}=e;function f(){try{i(0,s.name=t.inner.routeNameForWaypoints(s.waypoints),s)}catch(_){window.alert(`Couldn't auto-name route: ${_}`)}}let a=oe();function m(){s.name=this.value,i(0,s)}const c=()=>f(),h=_=>[_.scheme_reference,ke(_)];function C(_){n.$$.not_equal(s.scheme_reference,_)&&(s.scheme_reference=_,i(0,s))}function P(_){n.$$.not_equal(s.intervention_type,_)&&(s.intervention_type=_,i(0,s))}function w(_){n.$$.not_equal(s.description,_)&&(s.description=_,i(0,s))}return n.$$set=_=>{"gjSchemes"in _&&r(i(1,u=_.gjSchemes)),"props"in _&&i(0,s=_.props)},[s,u,t,l,f,a,m,c,h,C,P,w]}class An extends D{constructor(e){super(),H(this,e,In,Un,V,{gjSchemes:1,props:0})}}function Le(n){let e,i;return e=new me({props:{disabled:!n[2],$$slots:{default:[Ln]},$$scope:{ctx:n}}}),e.$on("click",n[7]),{c(){q(e.$$.fragment)},m(t,l){N(e,t,l),i=!0},p(t,l){const o={};l&4&&(o.disabled=!t[2]),l&16384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){i||(g(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){O(e,t)}}}function Ln(n){let e;return{c(){e=R("Auto-fill")},m(i,t){$(i,e,t)},d(i){i&&v(e)}}}function Wn(n){let e,i,t,l,o,r,u=n[0].length_meters&&Le(n);return{c(){e=G("input"),i=M(),u&&u.c(),t=Y(),W(e,"type","text"),W(e,"class","govuk-input"),W(e,"id",n[5])},m(s,f){$(s,e,f),J(e,n[0].name),$(s,i,f),u&&u.m(s,f),$(s,t,f),l=!0,o||(r=se(e,"input",n[6]),o=!0)},p(s,f){f&1&&e.value!==s[0].name&&J(e,s[0].name),s[0].length_meters?u?(u.p(s,f),f&1&&g(u,1)):(u=Le(s),u.c(),g(u,1),u.m(t.parentNode,t)):u&&(Z(),b(u,1,1,()=>{u=null}),K())},i(s){l||(g(u),l=!0)},o(s){b(u),l=!1},d(s){s&&(v(e),v(i),v(t)),u&&u.d(s),o=!1,r()}}}function We(n){let e,i,t,l,o,r,u,s,f;function a(w){n[10](w)}let m={label:"Type",choices:[["area","Area"],["route","Route"],["crossing","Crossing"],["modal filter","Modal Filter"],["junction treatment","Junction Treatment"],["other","Other"]]};n[0].v2.intervention_type!==void 0&&(m.value=n[0].v2.intervention_type),e=new ue({props:m}),U.push(()=>I(e,"value",a));function c(w){n[11](w)}let h={label:"Intended uses",choices:[["cycling","Only cycling"],["walking_wheeling","Only walking and wheeling"],["all","Cyclists, walking, and wheeling"]]};n[0].v2.intended_uses!==void 0&&(h.value=n[0].v2.intended_uses),l=new ue({props:h}),U.push(()=>I(l,"value",c));function C(w){n[12](w)}let P={label:"What infrastructure are you mapping?",choices:[["new","Something completely new"],["improvement","Improvements to something already existing"],["existing","Something existing with no changes planned"]],inlineSmall:!0};return n[0].v2.work_type!==void 0&&(P.value=n[0].v2.work_type),u=new ue({props:P}),U.push(()=>I(u,"value",C)),{c(){q(e.$$.fragment),t=M(),q(l.$$.fragment),r=M(),q(u.$$.fragment)},m(w,_){N(e,w,_),$(w,t,_),N(l,w,_),$(w,r,_),N(u,w,_),f=!0},p(w,_){const p={};!i&&_&1&&(i=!0,p.value=w[0].v2.intervention_type,A(()=>i=!1)),e.$set(p);const d={};!o&&_&1&&(o=!0,d.value=w[0].v2.intended_uses,A(()=>o=!1)),l.$set(d);const T={};!s&&_&1&&(s=!0,T.value=w[0].v2.work_type,A(()=>s=!1)),u.$set(T)},i(w){f||(g(e.$$.fragment,w),g(l.$$.fragment,w),g(u.$$.fragment,w),f=!0)},o(w){b(e.$$.fragment,w),b(l.$$.fragment,w),b(u.$$.fragment,w),f=!1},d(w){w&&(v(t),v(r)),O(e,w),O(l,w),O(u,w)}}}function Be(n){let e,i,t=ae(n[0].length_meters)+"",l;return{c(){e=G("p"),i=R("Length: "),l=R(t)},m(o,r){$(o,e,r),B(e,i),B(e,l)},p(o,r){r&1&&t!==(t=ae(o[0].length_meters)+"")&&fe(l,t)},d(o){o&&v(e)}}}function Bn(n){let e,i,t,l,o,r,u,s,f,a,m;e=new pe({props:{label:"Name",id:n[5],$$slots:{default:[Wn]},$$scope:{ctx:n}}});function c(p){n[9](p)}let h={label:"Scheme",choices:Object.values(n[3].schemes).map(n[8])};n[0].scheme_reference!==void 0&&(h.value=n[0].scheme_reference),t=new $e({props:h}),U.push(()=>I(t,"value",c));let C=n[0].v2&&We(n);function P(p){n[13](p)}let w={label:"Description"};n[0].description!==void 0&&(w.value=n[0].description),u=new ve({props:w}),U.push(()=>I(u,"value",P));let _=n[0].length_meters&&Be(n);return{c(){q(e.$$.fragment),i=M(),q(t.$$.fragment),o=M(),C&&C.c(),r=M(),q(u.$$.fragment),f=M(),_&&_.c(),a=Y()},m(p,d){N(e,p,d),$(p,i,d),N(t,p,d),$(p,o,d),C&&C.m(p,d),$(p,r,d),N(u,p,d),$(p,f,d),_&&_.m(p,d),$(p,a,d),m=!0},p(p,[d]){const T={};d&16389&&(T.$$scope={dirty:d,ctx:p}),e.$set(T);const S={};d&8&&(S.choices=Object.values(p[3].schemes).map(p[8])),!l&&d&1&&(l=!0,S.value=p[0].scheme_reference,A(()=>l=!1)),t.$set(S),p[0].v2?C?(C.p(p,d),d&1&&g(C,1)):(C=We(p),C.c(),g(C,1),C.m(r.parentNode,r)):C&&(Z(),b(C,1,1,()=>{C=null}),K());const L={};!s&&d&1&&(s=!0,L.value=p[0].description,A(()=>s=!1)),u.$set(L),p[0].length_meters?_?_.p(p,d):(_=Be(p),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null)},i(p){m||(g(e.$$.fragment,p),g(t.$$.fragment,p),g(C),g(u.$$.fragment,p),m=!0)},o(p){b(e.$$.fragment,p),b(t.$$.fragment,p),b(C),b(u.$$.fragment,p),m=!1},d(p){p&&(v(i),v(o),v(r),v(f),v(a)),O(e,p),O(t,p),C&&C.d(p),O(u,p),_&&_.d(p)}}}function En(n,e,i){let t,l,o=ce,r=()=>(o(),o=de(u,d=>i(3,l=d)),u);_e(n,je,d=>i(2,t=d)),n.$$.on_destroy.push(()=>o());let{gjSchemes:u}=e;r();let{props:s}=e;s.v2||(s.v2={intervention_type:"",intended_uses:"",work_type:""});function f(){try{i(0,s.name=t.inner.routeNameForWaypoints(s.waypoints),s)}catch(d){window.alert(`Couldn't auto-name route: ${d}`)}}let a=oe();function m(){s.name=this.value,i(0,s)}const c=()=>f(),h=d=>[d.scheme_reference,ke(d)];function C(d){n.$$.not_equal(s.scheme_reference,d)&&(s.scheme_reference=d,i(0,s))}function P(d){n.$$.not_equal(s.v2.intervention_type,d)&&(s.v2.intervention_type=d,i(0,s))}function w(d){n.$$.not_equal(s.v2.intended_uses,d)&&(s.v2.intended_uses=d,i(0,s))}function _(d){n.$$.not_equal(s.v2.work_type,d)&&(s.v2.work_type=d,i(0,s))}function p(d){n.$$.not_equal(s.description,d)&&(s.description=d,i(0,s))}return n.$$set=d=>{"gjSchemes"in d&&r(i(1,u=d.gjSchemes)),"props"in d&&i(0,s=d.props)},[s,u,t,l,f,a,m,c,h,C,P,w,_,p]}class Rn extends D{constructor(e){super(),H(this,e,En,Bn,V,{gjSchemes:1,props:0})}}function Ee(n){let e,i,t;function l(r){n[6](r)}let o={label:"Type",choices:Hn(["urban corridor","urban area","urban crossing","urban local route","city centre footway","rural path","rural crossing","quiet lane","local placemaking","standalone junction"])};return n[0].natn.element!==void 0&&(o.value=n[0].natn.element),e=new ue({props:o}),U.push(()=>I(e,"value",l)),{c(){q(e.$$.fragment)},m(r,u){N(e,r,u),t=!0},p(r,u){const s={};!i&&u&1&&(i=!0,s.value=r[0].natn.element,A(()=>i=!1)),e.$set(s)},i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function Re(n){let e,i;return e=new me({props:{disabled:!n[2],$$slots:{default:[Gn]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){q(e.$$.fragment)},m(t,l){N(e,t,l),i=!0},p(t,l){const o={};l&4&&(o.disabled=!t[2]),l&4096&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){i||(g(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){O(e,t)}}}function Gn(n){let e;return{c(){e=R("Auto-fill")},m(i,t){$(i,e,t)},d(i){i&&v(e)}}}function Jn(n){let e,i,t,l,o,r,u=n[0].length_meters&&Re(n);return{c(){e=G("input"),i=M(),u&&u.c(),t=Y(),W(e,"type","text"),W(e,"class","govuk-input"),W(e,"id",n[5])},m(s,f){$(s,e,f),J(e,n[0].name),$(s,i,f),u&&u.m(s,f),$(s,t,f),l=!0,o||(r=se(e,"input",n[7]),o=!0)},p(s,f){f&1&&e.value!==s[0].name&&J(e,s[0].name),s[0].length_meters?u?(u.p(s,f),f&1&&g(u,1)):(u=Re(s),u.c(),g(u,1),u.m(t.parentNode,t)):u&&(Z(),b(u,1,1,()=>{u=null}),K())},i(s){l||(g(u),l=!0)},o(s){b(u),l=!1},d(s){s&&(v(e),v(i),v(t)),u&&u.d(s),o=!1,r()}}}function Ge(n){let e,i,t=ae(n[0].length_meters)+"",l;return{c(){e=G("p"),i=R("Length: "),l=R(t)},m(o,r){$(o,e,r),B(e,i),B(e,l)},p(o,r){r&1&&t!==(t=ae(o[0].length_meters)+"")&&fe(l,t)},d(o){o&&v(e)}}}function Dn(n){let e,i,t,l,o,r,u,s,f,a,m,c=n[0].natn&&Ee(n);i=new pe({props:{label:"Name",id:n[5],$$slots:{default:[Jn]},$$scope:{ctx:n}}});function h(p){n[10](p)}let C={label:"Scheme",choices:Object.values(n[3].schemes).map(n[9])};n[0].scheme_reference!==void 0&&(C.value=n[0].scheme_reference),l=new $e({props:C}),U.push(()=>I(l,"value",h));function P(p){n[11](p)}let w={label:"Description"};n[0].description!==void 0&&(w.value=n[0].description),u=new ve({props:w}),U.push(()=>I(u,"value",P));let _=n[0].length_meters&&Ge(n);return{c(){c&&c.c(),e=M(),q(i.$$.fragment),t=M(),q(l.$$.fragment),r=M(),q(u.$$.fragment),f=M(),_&&_.c(),a=Y()},m(p,d){c&&c.m(p,d),$(p,e,d),N(i,p,d),$(p,t,d),N(l,p,d),$(p,r,d),N(u,p,d),$(p,f,d),_&&_.m(p,d),$(p,a,d),m=!0},p(p,[d]){p[0].natn?c?(c.p(p,d),d&1&&g(c,1)):(c=Ee(p),c.c(),g(c,1),c.m(e.parentNode,e)):c&&(Z(),b(c,1,1,()=>{c=null}),K());const T={};d&4101&&(T.$$scope={dirty:d,ctx:p}),i.$set(T);const S={};d&8&&(S.choices=Object.values(p[3].schemes).map(p[9])),!o&&d&1&&(o=!0,S.value=p[0].scheme_reference,A(()=>o=!1)),l.$set(S);const L={};!s&&d&1&&(s=!0,L.value=p[0].description,A(()=>s=!1)),u.$set(L),p[0].length_meters?_?_.p(p,d):(_=Ge(p),_.c(),_.m(a.parentNode,a)):_&&(_.d(1),_=null)},i(p){m||(g(c),g(i.$$.fragment,p),g(l.$$.fragment,p),g(u.$$.fragment,p),m=!0)},o(p){b(c),b(i.$$.fragment,p),b(l.$$.fragment,p),b(u.$$.fragment,p),m=!1},d(p){p&&(v(e),v(t),v(r),v(f),v(a)),c&&c.d(p),O(i,p),O(l,p),O(u,p),_&&_.d(p)}}}function Hn(n){return n.map(e=>[e,e])}function Vn(n,e,i){let t,l,o=ce,r=()=>(o(),o=de(u,_=>i(3,l=_)),u);_e(n,je,_=>i(2,t=_)),n.$$.on_destroy.push(()=>o());let{gjSchemes:u}=e;r();let{props:s}=e;s.natn||(s.natn={element:""});function f(){try{i(0,s.name=t.inner.routeNameForWaypoints(s.waypoints),s)}catch(_){window.alert(`Couldn't auto-name route: ${_}`)}}let a=oe();function m(_){n.$$.not_equal(s.natn.element,_)&&(s.natn.element=_,i(0,s))}function c(){s.name=this.value,i(0,s)}const h=()=>f(),C=_=>[_.scheme_reference,ke(_)];function P(_){n.$$.not_equal(s.scheme_reference,_)&&(s.scheme_reference=_,i(0,s))}function w(_){n.$$.not_equal(s.description,_)&&(s.description=_,i(0,s))}return n.$$set=_=>{"gjSchemes"in _&&r(i(1,u=_.gjSchemes)),"props"in _&&i(0,s=_.props)},[s,u,t,l,f,a,m,c,h,C,P,w]}class Qn extends D{constructor(e){super(),H(this,e,Vn,Dn,V,{gjSchemes:1,props:0})}}function zn(n){let e,i,t;function l(r){n[2](r)}let o={label:n[1],choices:[le("New segregated cycling facility"),le("New junction treatment"),le("New permanent footway"),["New shared use facilities","New shared use (walking and cycling) facilities"],["Improvements to existing route","Improvements to make an existing walking/cycle route safer"],["Area-wide traffic management","Area-wide traffic management (including by TROs - both permanent and experimental)"],["Bus priority measures","Bus priority measures that also enable active travel (for example, bus gates)"],["Secure cycle parking","Provision of secure cycle parking facilities"],le("New road crossings"),le("Restriction or reduction of car parking availability"),le("School streets"),le("Quiet mixed traffic streets"),le("Traffic free routes"),le("Not specified in LCWIP")],emptyOption:!0};return n[0]!==void 0&&(o.value=n[0]),e=new $e({props:o}),U.push(()=>I(e,"value",l)),{c(){q(e.$$.fragment)},m(r,u){N(e,r,u),t=!0},p(r,[u]){const s={};u&2&&(s.label=r[1]),!i&&u&1&&(i=!0,s.value=r[0],A(()=>i=!1)),e.$set(s)},i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function le(n){return[n,n]}function Zn(n,e,i){let{label:t}=e,{value:l}=e;function o(r){l=r,i(0,l)}return n.$$set=r=>{"label"in r&&i(1,t=r.label),"value"in r&&i(0,l=r.value)},[l,t,o]}class tn extends D{constructor(e){super(),H(this,e,Zn,zn,V,{label:1,value:0})}}function Kn(n){let e,i,t,l,o,r,u,s,f,a,m,c,h,C,P,w,_,p;function d(y){n[3](y)}let T={label:"Status",choices:[["","Unknown"],["aspiration","Aspiration"],["planned","Planned"],["in development","In development"],["in construction","In construction"],["completed","Completed"]],inlineSmall:!0,required:n[1]};n[0].status!==void 0&&(T.value=n[0].status),l=new ue({props:T}),U.push(()=>I(l,"value",d));function S(y){n[4](y)}let L={label:"Timescale",choices:[["","Unknown"],["short","Short (1-3 years)"],["medium","Medium (3-6 years)"],["long","Long (6-10 years)"]],inlineSmall:!0,required:n[1]};n[0].timescale!==void 0&&(L.value=n[0].timescale),u=new ue({props:L}),U.push(()=>I(u,"value",S));function j(y){n[5](y)}let X={label:"Estimated completion year (if known)",width:4,min:2010,max:2100};n[0].timescale_year!==void 0&&(X.value=n[0].timescale_year),a=new Oe({props:X}),U.push(()=>I(a,"value",j));function z(y){n[6](y)}let x={label:"What year was this scheme most recently published?",width:4,min:2010,max:2100};n[0].year_published!==void 0&&(x.value=n[0].year_published),h=new Oe({props:x}),U.push(()=>I(h,"value",z));function ie(y){n[7](y)}let k={label:"What year was this scheme most recently consulted on?",width:4,min:2010,max:2100};return n[0].year_consulted!==void 0&&(k.value=n[0].year_consulted),w=new Oe({props:k}),U.push(()=>I(w,"value",ie)),{c(){e=G("fieldset"),i=G("legend"),i.textContent="Timing and status",t=M(),q(l.$$.fragment),r=M(),q(u.$$.fragment),f=M(),q(a.$$.fragment),c=M(),q(h.$$.fragment),P=M(),q(w.$$.fragment),W(i,"class","govuk-fieldset__legend"),W(e,"class","govuk-fieldset svelte-1bxyfcq")},m(y,F){$(y,e,F),B(e,i),B(e,t),N(l,e,null),B(e,r),N(u,e,null),B(e,f),N(a,e,null),B(e,c),N(h,e,null),B(e,P),N(w,e,null),p=!0},p(y,[F]){const E={};F&2&&(E.required=y[1]),!o&&F&1&&(o=!0,E.value=y[0].status,A(()=>o=!1)),l.$set(E);const Q={};F&2&&(Q.required=y[1]),!s&&F&1&&(s=!0,Q.value=y[0].timescale,A(()=>s=!1)),u.$set(Q);const ee={};!m&&F&1&&(m=!0,ee.value=y[0].timescale_year,A(()=>m=!1)),a.$set(ee);const ne={};!C&&F&1&&(C=!0,ne.value=y[0].year_published,A(()=>C=!1)),h.$set(ne);const ge={};!_&&F&1&&(_=!0,ge.value=y[0].year_consulted,A(()=>_=!1)),w.$set(ge)},i(y){p||(g(l.$$.fragment,y),g(u.$$.fragment,y),g(a.$$.fragment,y),g(h.$$.fragment,y),g(w.$$.fragment,y),p=!0)},o(y){b(l.$$.fragment,y),b(u.$$.fragment,y),b(a.$$.fragment,y),b(h.$$.fragment,y),b(w.$$.fragment,y),p=!1},d(y){y&&v(e),O(l),O(u),O(a),O(h),O(w)}}}function Xn(n,e,i){let{data:t}=e,{required:l}=e,{onUpdate:o}=e;function r(c){o()}function u(c){n.$$.not_equal(t.status,c)&&(t.status=c,i(0,t))}function s(c){n.$$.not_equal(t.timescale,c)&&(t.timescale=c,i(0,t))}function f(c){n.$$.not_equal(t.timescale_year,c)&&(t.timescale_year=c,i(0,t))}function a(c){n.$$.not_equal(t.year_published,c)&&(t.year_published=c,i(0,t))}function m(c){n.$$.not_equal(t.year_consulted,c)&&(t.year_consulted=c,i(0,t))}return n.$$set=c=>{"data"in c&&i(0,t=c.data),"required"in c&&i(1,l=c.required),"onUpdate"in c&&i(2,o=c.onUpdate)},n.$$.update=()=>{n.$$.dirty&1&&r()},[t,l,o,u,s,f,a,m]}class rn extends D{constructor(e){super(),H(this,e,Xn,Kn,V,{data:0,required:1,onUpdate:2})}}function Je(n,e,i){const t=n.slice();return t[9]=e[i],t[10]=e,t[11]=i,t}function Yn(n){let e;return{c(){e=R("Is the development fully funded?")},m(i,t){$(i,e,t)},d(i){i&&v(e)}}}function xn(n){let e;return{c(){e=R("Is the construction fully funded?")},m(i,t){$(i,e,t)},d(i){i&&v(e)}}}function et(n){let e,i,t;function l(r){n[6](r,n[9])}let o={$$slots:{default:[nt]},$$scope:{ctx:n}};return n[0].funding_sources[n[9]]!==void 0&&(o.checked=n[0].funding_sources[n[9]]),e=new he({props:o}),U.push(()=>I(e,"checked",l)),{c(){q(e.$$.fragment)},m(r,u){N(e,r,u),t=!0},p(r,u){n=r;const s={};u&4096&&(s.$$scope={dirty:u,ctx:n}),!i&&u&3&&(i=!0,s.checked=n[0].funding_sources[n[9]],A(()=>i=!1)),e.$set(s)},i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function nt(n){let e=n[9].toUpperCase()+"",i,t;return{c(){i=R(e),t=M()},m(l,o){$(l,i,o),$(l,t,o)},p:ce,d(l){l&&(v(i),v(t))}}}function De(n){let e,i,t=n[9]!="other"&&et(n);return{c(){t&&t.c(),e=Y()},m(l,o){t&&t.m(l,o),$(l,e,o),i=!0},p(l,o){l[9]!="other"&&t.p(l,o)},i(l){i||(g(t),i=!0)},o(l){b(t),i=!1},d(l){l&&v(e),t&&t.d(l)}}}function tt(n){let e,i,t=we(n[1]),l=[];for(let r=0;r<t.length;r+=1)l[r]=De(Je(n,t,r));const o=r=>b(l[r],1,1,()=>{l[r]=null});return{c(){for(let r=0;r<l.length;r+=1)l[r].c();e=Y()},m(r,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(r,u);$(r,e,u),i=!0},p(r,u){if(u&3){t=we(r[1]);let s;for(s=0;s<t.length;s+=1){const f=Je(r,t,s);l[s]?(l[s].p(f,u),g(l[s],1)):(l[s]=De(f),l[s].c(),g(l[s],1),l[s].m(e.parentNode,e))}for(Z(),s=t.length;s<l.length;s+=1)o(s);K()}},i(r){if(!i){for(let u=0;u<t.length;u+=1)g(l[u]);i=!0}},o(r){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)b(l[u]);i=!1},d(r){r&&v(e),en(l,r)}}}function it(n){let e,i,t,l,o,r,u,s,f,a,m,c,h,C,P,w,_,p,d;function T(k){n[3](k)}let S={label:"Cost (GBP)"};n[0].budget!==void 0&&(S.value=n[0].budget),l=new wn({props:S}),U.push(()=>I(l,"value",T));function L(k){n[4](k)}let j={$$slots:{default:[Yn]},$$scope:{ctx:n}};n[0].development_funded!==void 0&&(j.checked=n[0].development_funded),u=new he({props:j}),U.push(()=>I(u,"checked",L));function X(k){n[5](k)}let z={$$slots:{default:[xn]},$$scope:{ctx:n}};n[0].construction_funded!==void 0&&(z.checked=n[0].construction_funded),a=new he({props:z}),U.push(()=>I(a,"checked",X)),P=new pn({props:{$$slots:{default:[tt]},$$scope:{ctx:n}}});function x(k){n[7](k)}let ie={label:"Other funding sources"};return n[0].funding_sources.other!==void 0&&(ie.value=n[0].funding_sources.other),_=new Fe({props:ie}),U.push(()=>I(_,"value",x)),{c(){e=G("fieldset"),i=G("legend"),i.textContent="Budget",t=M(),q(l.$$.fragment),r=M(),q(u.$$.fragment),f=M(),q(a.$$.fragment),c=M(),h=G("p"),h.textContent="Funding sources",C=M(),q(P.$$.fragment),w=M(),q(_.$$.fragment),W(i,"class","govuk-fieldset__legend"),W(e,"class","govuk-fieldset svelte-1bxyfcq")},m(k,y){$(k,e,y),B(e,i),B(e,t),N(l,e,null),B(e,r),N(u,e,null),B(e,f),N(a,e,null),B(e,c),B(e,h),B(e,C),N(P,e,null),B(e,w),N(_,e,null),d=!0},p(k,[y]){const F={};!o&&y&1&&(o=!0,F.value=k[0].budget,A(()=>o=!1)),l.$set(F);const E={};y&4096&&(E.$$scope={dirty:y,ctx:k}),!s&&y&1&&(s=!0,E.checked=k[0].development_funded,A(()=>s=!1)),u.$set(E);const Q={};y&4096&&(Q.$$scope={dirty:y,ctx:k}),!m&&y&1&&(m=!0,Q.checked=k[0].construction_funded,A(()=>m=!1)),a.$set(Q);const ee={};y&4097&&(ee.$$scope={dirty:y,ctx:k}),P.$set(ee);const ne={};!p&&y&1&&(p=!0,ne.value=k[0].funding_sources.other,A(()=>p=!1)),_.$set(ne)},i(k){d||(g(l.$$.fragment,k),g(u.$$.fragment,k),g(a.$$.fragment,k),g(P.$$.fragment,k),g(_.$$.fragment,k),d=!0)},o(k){b(l.$$.fragment,k),b(u.$$.fragment,k),b(a.$$.fragment,k),b(P.$$.fragment,k),b(_.$$.fragment,k),d=!1},d(k){k&&v(e),O(l),O(u),O(a),O(P),O(_)}}}function rt(n,e,i){let{data:t}=e,{onUpdate:l}=e;function o(c){l()}let r=["atf2","atf3","atf4","atf4e","crsts","luf"];function u(c){n.$$.not_equal(t.budget,c)&&(t.budget=c,i(0,t))}function s(c){n.$$.not_equal(t.development_funded,c)&&(t.development_funded=c,i(0,t))}function f(c){n.$$.not_equal(t.construction_funded,c)&&(t.construction_funded=c,i(0,t))}function a(c,h){n.$$.not_equal(t.funding_sources[h],c)&&(t.funding_sources[h]=c,i(0,t))}function m(c){n.$$.not_equal(t.funding_sources.other,c)&&(t.funding_sources.other=c,i(0,t))}return n.$$set=c=>{"data"in c&&i(0,t=c.data),"onUpdate"in c&&i(2,l=c.onUpdate)},n.$$.update=()=>{n.$$.dirty&1&&o()},[t,r,l,u,s,f,a,m]}class sn extends D{constructor(e){super(),H(this,e,rt,it,V,{data:0,onUpdate:2})}}function He(n){let e,i;return e=new me({props:{disabled:!n[2],$$slots:{default:[st]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){q(e.$$.fragment)},m(t,l){N(e,t,l),i=!0},p(t,l){const o={};l&4&&(o.disabled=!t[2]),l&262144&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){i||(g(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){O(e,t)}}}function st(n){let e;return{c(){e=R("Auto-fill with street names")},m(i,t){$(i,e,t)},d(i){i&&v(e)}}}function lt(n){let e,i,t,l,o,r,u,s,f=n[0].length_meters&&He(n);return{c(){e=G("div"),e.textContent="Use the name from the LCWIP if possible",i=M(),t=G("input"),l=M(),f&&f.c(),o=Y(),W(e,"class","govuk-hint"),W(t,"type","text"),W(t,"class","govuk-input"),W(t,"id",n[6])},m(a,m){$(a,e,m),$(a,i,m),$(a,t,m),J(t,n[0].name),$(a,l,m),f&&f.m(a,m),$(a,o,m),r=!0,u||(s=se(t,"input",n[7]),u=!0)},p(a,m){m&1&&t.value!==a[0].name&&J(t,a[0].name),a[0].length_meters?f?(f.p(a,m),m&1&&g(f,1)):(f=He(a),f.c(),g(f,1),f.m(o.parentNode,o)):f&&(Z(),b(f,1,1,()=>{f=null}),K())},i(a){r||(g(f),r=!0)},o(a){b(f),r=!1},d(a){a&&(v(e),v(i),v(t),v(l),v(o)),f&&f.d(a),u=!1,s()}}}function Ve(n){let e,i,t=ae(n[0].length_meters)+"",l;return{c(){e=G("p"),i=R("Length: "),l=R(t)},m(o,r){$(o,e,r),B(e,i),B(e,l)},p(o,r){r&1&&t!==(t=ae(o[0].length_meters)+"")&&fe(l,t)},d(o){o&&v(e)}}}function Qe(n){let e,i,t,l,o,r,u,s,f,a,m,c,h,C,P,w;function _(k){n[12](k)}let p={label:"Type"};n[0].pipeline.atf4_type!==void 0&&(p.value=n[0].pipeline.atf4_type),e=new tn({props:p}),U.push(()=>I(e,"value",_));function d(k){n[13](k)}let T={label:"Accuracy of mapped data",choices:[["high","High"],["medium","Medium"],["low","Low"]],required:!0,inlineSmall:!0};n[0].pipeline.accuracy!==void 0&&(T.value=n[0].pipeline.accuracy),l=new ue({props:T}),U.push(()=>I(l,"value",d));function S(k){n[14](k)}let L={$$slots:{default:[ut]},$$scope:{ctx:n}};n[0].pipeline.is_alternative!==void 0&&(L.checked=n[0].pipeline.is_alternative),u=new he({props:L}),U.push(()=>I(u,"checked",S));let j=n[4]&&n[0].is_coverage_polygon!==void 0&&ze(n);function X(k){n[16](k)}let z={required:!1,onUpdate:at};n[0].pipeline!==void 0&&(z.data=n[0].pipeline),m=new rn({props:z}),U.push(()=>I(m,"data",X));function x(k){n[17](k)}let ie={onUpdate:pt};return n[0].pipeline!==void 0&&(ie.data=n[0].pipeline),C=new sn({props:ie}),U.push(()=>I(C,"data",x)),{c(){q(e.$$.fragment),t=M(),q(l.$$.fragment),r=M(),q(u.$$.fragment),f=M(),j&&j.c(),a=M(),q(m.$$.fragment),h=M(),q(C.$$.fragment)},m(k,y){N(e,k,y),$(k,t,y),N(l,k,y),$(k,r,y),N(u,k,y),$(k,f,y),j&&j.m(k,y),$(k,a,y),N(m,k,y),$(k,h,y),N(C,k,y),w=!0},p(k,y){const F={};!i&&y&1&&(i=!0,F.value=k[0].pipeline.atf4_type,A(()=>i=!1)),e.$set(F);const E={};!o&&y&1&&(o=!0,E.value=k[0].pipeline.accuracy,A(()=>o=!1)),l.$set(E);const Q={};y&262144&&(Q.$$scope={dirty:y,ctx:k}),!s&&y&1&&(s=!0,Q.checked=k[0].pipeline.is_alternative,A(()=>s=!1)),u.$set(Q),k[4]&&k[0].is_coverage_polygon!==void 0?j?(j.p(k,y),y&1&&g(j,1)):(j=ze(k),j.c(),g(j,1),j.m(a.parentNode,a)):j&&(Z(),b(j,1,1,()=>{j=null}),K());const ee={};!c&&y&1&&(c=!0,ee.data=k[0].pipeline,A(()=>c=!1)),m.$set(ee);const ne={};!P&&y&1&&(P=!0,ne.data=k[0].pipeline,A(()=>P=!1)),C.$set(ne)},i(k){w||(g(e.$$.fragment,k),g(l.$$.fragment,k),g(u.$$.fragment,k),g(j),g(m.$$.fragment,k),g(C.$$.fragment,k),w=!0)},o(k){b(e.$$.fragment,k),b(l.$$.fragment,k),b(u.$$.fragment,k),b(j),b(m.$$.fragment,k),b(C.$$.fragment,k),w=!1},d(k){k&&(v(t),v(r),v(f),v(a),v(h)),O(e,k),O(l,k),O(u,k),j&&j.d(k),O(m,k),O(C,k)}}}function ut(n){let e;return{c(){e=R("Is this an alternative route and not the default option?")},m(i,t){$(i,e,t)},d(i){i&&v(e)}}}function ze(n){let e,i,t;function l(r){n[15](r)}let o={$$slots:{default:[ot]},$$scope:{ctx:n}};return n[0].is_coverage_polygon!==void 0&&(o.checked=n[0].is_coverage_polygon),e=new he({props:o}),U.push(()=>I(e,"checked",l)),{c(){q(e.$$.fragment)},m(r,u){N(e,r,u),t=!0},p(r,u){const s={};u&262144&&(s.$$scope={dirty:u,ctx:r}),!i&&u&1&&(i=!0,s.checked=r[0].is_coverage_polygon,A(()=>i=!1)),e.$set(s)},i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function ot(n){let e;return{c(){e=R(`Does this polygon show the coverage of the scheme? (All area considered
      while making the scheme)`)},m(i,t){$(i,e,t)},d(i){i&&v(e)}}}function ft(n){let e,i,t,l,o,r,u,s,f,a,m;e=new pe({props:{label:"Name",id:n[6],$$slots:{default:[lt]},$$scope:{ctx:n}}});function c(p){n[10](p)}let h={label:"Scheme",choices:Object.values(n[3].schemes).map(n[9])};n[0].scheme_reference!==void 0&&(h.value=n[0].scheme_reference),t=new $e({props:h}),U.push(()=>I(t,"value",c));function C(p){n[11](p)}let P={label:"Description"};n[0].description!==void 0&&(P.value=n[0].description),r=new ve({props:P}),U.push(()=>I(r,"value",C));let w=n[0].length_meters&&Ve(n),_=n[0].pipeline&&Qe(n);return{c(){q(e.$$.fragment),i=M(),q(t.$$.fragment),o=M(),q(r.$$.fragment),s=M(),w&&w.c(),f=M(),_&&_.c(),a=Y()},m(p,d){N(e,p,d),$(p,i,d),N(t,p,d),$(p,o,d),N(r,p,d),$(p,s,d),w&&w.m(p,d),$(p,f,d),_&&_.m(p,d),$(p,a,d),m=!0},p(p,[d]){const T={};d&262149&&(T.$$scope={dirty:d,ctx:p}),e.$set(T);const S={};d&8&&(S.choices=Object.values(p[3].schemes).map(p[9])),!l&&d&1&&(l=!0,S.value=p[0].scheme_reference,A(()=>l=!1)),t.$set(S);const L={};!u&&d&1&&(u=!0,L.value=p[0].description,A(()=>u=!1)),r.$set(L),p[0].length_meters?w?w.p(p,d):(w=Ve(p),w.c(),w.m(f.parentNode,f)):w&&(w.d(1),w=null),p[0].pipeline?_?(_.p(p,d),d&1&&g(_,1)):(_=Qe(p),_.c(),g(_,1),_.m(a.parentNode,a)):_&&(Z(),b(_,1,1,()=>{_=null}),K())},i(p){m||(g(e.$$.fragment,p),g(t.$$.fragment,p),g(r.$$.fragment,p),g(_),m=!0)},o(p){b(e.$$.fragment,p),b(t.$$.fragment,p),b(r.$$.fragment,p),b(_),m=!1},d(p){p&&(v(i),v(o),v(s),v(f),v(a)),O(e,p),O(t,p),O(r,p),w&&w.d(p),_&&_.d(p)}}}const at=()=>{},pt=()=>{};function ct(n,e,i){let t,l,o=ce,r=()=>(o(),o=de(u,j=>i(3,l=j)),u);_e(n,je,j=>i(2,t=j)),n.$$.on_destroy.push(()=>o());let{gjSchemes:u}=e;r();let{props:s}=e;s.pipeline||(s.pipeline={atf4_type:"",accuracy:"",is_alternative:!1,development_funded:!1,construction_funded:!1,funding_sources:Se(),status:"",timescale:""}),s.is_coverage_polygon||(s.is_coverage_polygon=!1);const f=(l.features.filter(j=>j.properties.is_coverage_polygon).length==0||s.is_coverage_polygon===!0)&&s.intervention_type==="area";function a(){try{i(0,s.name=t.inner.routeNameForWaypoints(s.waypoints),s)}catch(j){window.alert(`Couldn't auto-name route: ${j}`)}}let m=oe();function c(){s.name=this.value,i(0,s)}const h=()=>a(),C=j=>[j.scheme_reference,ke(j)];function P(j){n.$$.not_equal(s.scheme_reference,j)&&(s.scheme_reference=j,i(0,s))}function w(j){n.$$.not_equal(s.description,j)&&(s.description=j,i(0,s))}function _(j){n.$$.not_equal(s.pipeline.atf4_type,j)&&(s.pipeline.atf4_type=j,i(0,s))}function p(j){n.$$.not_equal(s.pipeline.accuracy,j)&&(s.pipeline.accuracy=j,i(0,s))}function d(j){n.$$.not_equal(s.pipeline.is_alternative,j)&&(s.pipeline.is_alternative=j,i(0,s))}function T(j){n.$$.not_equal(s.is_coverage_polygon,j)&&(s.is_coverage_polygon=j,i(0,s))}function S(j){n.$$.not_equal(s.pipeline,j)&&(s.pipeline=j,i(0,s))}function L(j){n.$$.not_equal(s.pipeline,j)&&(s.pipeline=j,i(0,s))}return n.$$set=j=>{"gjSchemes"in j&&r(i(1,u=j.gjSchemes)),"props"in j&&i(0,s=j.props)},[s,u,t,l,f,a,m,c,h,C,P,w,_,p,d,T,S,L]}class mt extends D{constructor(e){super(),H(this,e,ct,ft,V,{gjSchemes:1,props:0})}}function Ze(n,e,i){const t=n.slice();return t[7]=e[i][0],t[8]=e[i][1],t}function Ke(n){let e,i;return e=new me({props:{$$slots:{default:[_t]},$$scope:{ctx:n}}}),e.$on("click",n[4]),{c(){q(e.$$.fragment)},m(t,l){N(e,t,l),i=!0},p(t,l){const o={};l&2048&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){i||(g(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){O(e,t)}}}function _t(n){let e;return{c(){e=R("Handle extra GeoJSON properties")},m(i,t){$(i,e,t)},d(i){i&&v(e)}}}function Xe(n){let e,i,t=n[7]+"",l,o,r=JSON.stringify(n[8])+"",u,s;return{c(){e=G("li"),i=G("b"),l=R(t),o=R(`
        = `),u=R(r),s=M()},m(f,a){$(f,e,a),B(e,i),B(i,l),B(e,o),B(e,u),B(e,s)},p(f,a){a&2&&t!==(t=f[7]+"")&&fe(l,t),a&2&&r!==(r=JSON.stringify(f[8])+"")&&fe(u,r)},d(f){f&&v(e)}}}function dt(n){let e;return{c(){e=R("Remove these properties")},m(i,t){$(i,e,t)},d(i){i&&v(e)}}}function gt(n){let e;return{c(){e=R("Cancel")},m(i,t){$(i,e,t)},d(i){i&&v(e)}}}function ht(n){let e,i,t,l;return e=new gn({props:{$$slots:{default:[dt]},$$scope:{ctx:n}}}),e.$on("click",n[2]),t=new me({props:{$$slots:{default:[gt]},$$scope:{ctx:n}}}),t.$on("click",n[5]),{c(){q(e.$$.fragment),i=M(),q(t.$$.fragment)},m(o,r){N(e,o,r),$(o,i,r),N(t,o,r),l=!0},p(o,r){const u={};r&2048&&(u.$$scope={dirty:r,ctx:o}),e.$set(u);const s={};r&2048&&(s.$$scope={dirty:r,ctx:o}),t.$set(s)},i(o){l||(g(e.$$.fragment,o),g(t.$$.fragment,o),l=!0)},o(o){b(e.$$.fragment,o),b(t.$$.fragment,o),l=!1},d(o){o&&v(i),O(e,o),O(t,o)}}}function bt(n){let e,i,t,l,o,r,u=we(Object.entries(n[1])),s=[];for(let f=0;f<u.length;f+=1)s[f]=Xe(Ze(n,u,f));return o=new dn({props:{$$slots:{default:[ht]},$$scope:{ctx:n}}}),{c(){e=G("p"),e.textContent="The unexpected properties:",i=M(),t=G("ul");for(let f=0;f<s.length;f+=1)s[f].c();l=M(),q(o.$$.fragment)},m(f,a){$(f,e,a),$(f,i,a),$(f,t,a);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(t,null);$(f,l,a),N(o,f,a),r=!0},p(f,a){if(a&2){u=we(Object.entries(f[1]));let c;for(c=0;c<u.length;c+=1){const h=Ze(f,u,c);s[c]?s[c].p(h,a):(s[c]=Xe(h),s[c].c(),s[c].m(t,null))}for(;c<s.length;c+=1)s[c].d(1);s.length=u.length}const m={};a&2049&&(m.$$scope={dirty:a,ctx:f}),o.$set(m)},i(f){r||(g(o.$$.fragment,f),r=!0)},o(f){b(o.$$.fragment,f),r=!1},d(f){f&&(v(e),v(i),v(t),v(l)),en(s,f),O(o,f)}}}function $t(n){let e=Object.entries(n[1]).length>0,i,t,l,o,r=e&&Ke(n);function u(f){n[6](f)}let s={title:"This imported GeoJSON feature has unexpected properties",$$slots:{default:[bt]},$$scope:{ctx:n}};return n[0]!==void 0&&(s.open=n[0]),t=new hn({props:s}),U.push(()=>I(t,"open",u)),{c(){r&&r.c(),i=M(),q(t.$$.fragment)},m(f,a){r&&r.m(f,a),$(f,i,a),N(t,f,a),o=!0},p(f,[a]){a&2&&(e=Object.entries(f[1]).length>0),e?r?(r.p(f,a),a&2&&g(r,1)):(r=Ke(f),r.c(),g(r,1),r.m(i.parentNode,i)):r&&(Z(),b(r,1,1,()=>{r=null}),K());const m={};a&2051&&(m.$$scope={dirty:a,ctx:f}),!l&&a&1&&(l=!0,m.open=f[0],A(()=>l=!1)),t.$set(m)},i(f){o||(g(r),g(t.$$.fragment,f),o=!0)},o(f){b(r),b(t.$$.fragment,f),o=!1},d(f){f&&v(i),r&&r.d(f),O(t,f)}}}function vt(n,e,i){let t,{props:l}=e,o=!1;function r(){i(0,o=!1);for(let a of Object.keys(t))delete l[a];i(3,l)}const u=()=>i(0,o=!0),s=()=>i(0,o=!1);function f(a){o=a,i(0,o)}return n.$$set=a=>{"props"in a&&i(3,l=a.props)},n.$$.update=()=>{n.$$.dirty&8&&i(1,t=un(l))},[o,t,r,l,u,s,f]}class kt extends D{constructor(e){super(),H(this,e,vt,$t,V,{props:3})}}function Ye(n){let e,i,t;function l(r){n[5](r)}let o={};return n[0]!==void 0&&(o.props=n[0]),e=new kt({props:o}),U.push(()=>I(e,"props",l)),{c(){q(e.$$.fragment)},m(r,u){N(e,r,u),t=!0},p(r,u){const s={};!i&&u&1&&(i=!0,s.props=r[0],A(()=>i=!1)),e.$set(s)},i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function wt(n){let e,i,t;function l(r){n[9](r)}let o={gjSchemes:n[1]};return n[0]!==void 0&&(o.props=n[0]),e=new Qn({props:o}),U.push(()=>I(e,"props",l)),{c(){q(e.$$.fragment)},m(r,u){N(e,r,u),t=!0},p(r,u){const s={};u&2&&(s.gjSchemes=r[1]),!i&&u&1&&(i=!0,s.props=r[0],A(()=>i=!1)),e.$set(s)},i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function yt(n){let e,i,t;function l(r){n[8](r)}let o={gjSchemes:n[1]};return n[0]!==void 0&&(o.props=n[0]),e=new Rn({props:o}),U.push(()=>I(e,"props",l)),{c(){q(e.$$.fragment)},m(r,u){N(e,r,u),t=!0},p(r,u){const s={};u&2&&(s.gjSchemes=r[1]),!i&&u&1&&(i=!0,s.props=r[0],A(()=>i=!1)),e.$set(s)},i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function St(n){let e,i,t;function l(r){n[7](r)}let o={gjSchemes:n[1]};return n[0]!==void 0&&(o.props=n[0]),e=new mt({props:o}),U.push(()=>I(e,"props",l)),{c(){q(e.$$.fragment)},m(r,u){N(e,r,u),t=!0},p(r,u){const s={};u&2&&(s.gjSchemes=r[1]),!i&&u&1&&(i=!0,s.props=r[0],A(()=>i=!1)),e.$set(s)},i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function jt(n){let e,i,t;function l(r){n[6](r)}let o={gjSchemes:n[1]};return n[0]!==void 0&&(o.props=n[0]),e=new An({props:o}),U.push(()=>I(e,"props",l)),{c(){q(e.$$.fragment)},m(r,u){N(e,r,u),t=!0},p(r,u){const s={};u&2&&(s.gjSchemes=r[1]),!i&&u&1&&(i=!0,s.props=r[0],A(()=>i=!1)),e.$set(s)},i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function qt(n){let e,i,t,l,o,r=n[2]!=null&&Ye(n);const u=[jt,St,yt,wt],s=[];function f(a,m){return a[3]=="v1"?0:a[3]=="pipeline"?1:a[3]=="v2"?2:a[3]=="natn"?3:-1}return~(i=f(n))&&(t=s[i]=u[i](n)),{c(){r&&r.c(),e=M(),t&&t.c(),l=Y()},m(a,m){r&&r.m(a,m),$(a,e,m),~i&&s[i].m(a,m),$(a,l,m),o=!0},p(a,[m]){a[2]!=null?r?(r.p(a,m),m&4&&g(r,1)):(r=Ye(a),r.c(),g(r,1),r.m(e.parentNode,e)):r&&(Z(),b(r,1,1,()=>{r=null}),K());let c=i;i=f(a),i===c?~i&&s[i].p(a,m):(t&&(Z(),b(s[c],1,1,()=>{s[c]=null}),K()),~i?(t=s[i],t?t.p(a,m):(t=s[i]=u[i](a),t.c()),g(t,1),t.m(l.parentNode,l)):t=null)},i(a){o||(g(r),g(t),o=!0)},o(a){b(r),b(t),o=!1},d(a){a&&(v(e),v(l)),r&&r.d(a),~i&&s[i].d(a)}}}function Nt(n,e,i){let t;_e(n,te,h=>i(3,t=h));let{cfg:l}=e,{gjSchemes:o}=e,{id:r}=e,{props:u}=e;u.name||(u.name=""),u.description||(u.description="");function s(h){u=h,i(0,u)}function f(h){u=h,i(0,u)}function a(h){u=h,i(0,u)}function m(h){u=h,i(0,u)}function c(h){u=h,i(0,u)}return n.$$set=h=>{"cfg"in h&&i(4,l=h.cfg),"gjSchemes"in h&&i(1,o=h.gjSchemes),"id"in h&&i(2,r=h.id),"props"in h&&i(0,u=h.props)},[u,o,r,t,l,s,f,a,m,c]}class Ot extends D{constructor(e){super(),H(this,e,Nt,qt,V,{cfg:4,gjSchemes:1,id:2,props:0})}}function Ft(n){let e,i,t;function l(r){n[3](r)}let o={label:"Scheme name",required:!0};return n[2].schemes[n[1]].scheme_name!==void 0&&(o.value=n[2].schemes[n[1]].scheme_name),e=new Fe({props:o}),U.push(()=>I(e,"value",l)),{c(){q(e.$$.fragment)},m(r,u){N(e,r,u),t=!0},p(r,[u]){const s={};!i&&u&6&&(i=!0,s.value=r[2].schemes[r[1]].scheme_name,A(()=>i=!1)),e.$set(s)},i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){b(e.$$.fragment,r),t=!1},d(r){O(e,r)}}}function Ct(n,e,i){let t,l=ce,o=()=>(l(),l=de(r,f=>i(2,t=f)),r);n.$$.on_destroy.push(()=>l());let{gjSchemes:r}=e;o();let{scheme_reference:u}=e;function s(f){n.$$.not_equal(t.schemes[u].scheme_name,f)&&(t.schemes[u].scheme_name=f,r.set(t))}return n.$$set=f=>{"gjSchemes"in f&&o(i(0,r=f.gjSchemes)),"scheme_reference"in f&&i(1,u=f.scheme_reference)},[r,u,t,s]}class Mt extends D{constructor(e){super(),H(this,e,Ct,Ft,V,{gjSchemes:0,scheme_reference:1})}}function Pt(n){let e,i,t,l,o,r,u,s,f,a,m,c,h,C,P,w,_,p,d,T,S;e=new be({props:{errorMessage:n[4]}});function L(F){n[6](F)}let j={label:"Scheme name",required:!0};n[5].schemes[n[1]].scheme_name!==void 0&&(j.value=n[5].schemes[n[1]].scheme_name),t=new Fe({props:j}),U.push(()=>I(t,"value",L));function X(F){n[7](F)}let z={label:"Scheme type",choices:[["cycling route","Cycling route"],["walking route","Walking route"],["shared-use route","Shared-use route"],["cycling and walking route","Cycling and walking route, not shared use"],["area-based scheme","Area-based scheme"],["intersection","Intersection/junction scheme"]],inlineSmall:!0,required:!0};n[2].scheme_type!==void 0&&(z.value=n[2].scheme_type),f=new ue({props:z}),U.push(()=>I(f,"value",X));function x(F){n[8](F)}let ie={label:"Type of the main intervention"};n[2].atf4_lead_type!==void 0&&(ie.value=n[2].atf4_lead_type),c=new tn({props:ie}),U.push(()=>I(c,"value",x));function k(F){n[9](F)}let y={label:"Scheme description (150 words max)"};return n[2].scheme_description!==void 0&&(y.value=n[2].scheme_description),P=new ve({props:y}),U.push(()=>I(P,"value",k)),p=new rn({props:{data:n[2],required:!0,onUpdate:n[10]}}),T=new sn({props:{data:n[2],onUpdate:n[11]}}),{c(){q(e.$$.fragment),i=M(),q(t.$$.fragment),o=M(),r=G("fieldset"),u=G("legend"),u.textContent="Basic information",s=M(),q(f.$$.fragment),m=M(),q(c.$$.fragment),C=M(),q(P.$$.fragment),_=M(),q(p.$$.fragment),d=M(),q(T.$$.fragment),W(u,"class","govuk-fieldset__legend"),W(r,"class","govuk-fieldset svelte-1bxyfcq")},m(F,E){N(e,F,E),$(F,i,E),N(t,F,E),$(F,o,E),$(F,r,E),B(r,u),B(r,s),N(f,r,null),B(r,m),N(c,r,null),B(r,C),N(P,r,null),$(F,_,E),N(p,F,E),$(F,d,E),N(T,F,E),S=!0},p(F,[E]){const Q={};E&16&&(Q.errorMessage=F[4]),e.$set(Q);const ee={};!l&&E&34&&(l=!0,ee.value=F[5].schemes[F[1]].scheme_name,A(()=>l=!1)),t.$set(ee);const ne={};!a&&E&4&&(a=!0,ne.value=F[2].scheme_type,A(()=>a=!1)),f.$set(ne);const ge={};!h&&E&4&&(h=!0,ge.value=F[2].atf4_lead_type,A(()=>h=!1)),c.$set(ge);const Ce={};!w&&E&4&&(w=!0,Ce.value=F[2].scheme_description,A(()=>w=!1)),P.$set(Ce);const qe={};E&4&&(qe.data=F[2]),E&8&&(qe.onUpdate=F[10]),p.$set(qe);const Ne={};E&4&&(Ne.data=F[2]),E&8&&(Ne.onUpdate=F[11]),T.$set(Ne)},i(F){S||(g(e.$$.fragment,F),g(t.$$.fragment,F),g(f.$$.fragment,F),g(c.$$.fragment,F),g(P.$$.fragment,F),g(p.$$.fragment,F),g(T.$$.fragment,F),S=!0)},o(F){b(e.$$.fragment,F),b(t.$$.fragment,F),b(f.$$.fragment,F),b(c.$$.fragment,F),b(P.$$.fragment,F),b(p.$$.fragment,F),b(T.$$.fragment,F),S=!1},d(F){F&&(v(i),v(o),v(r),v(_),v(d)),O(e,F),O(t,F),O(f),O(c),O(P),O(p,F),O(T,F)}}}function Tt(n,e,i){let t,l,o=ce,r=()=>(o(),o=de(u,p=>i(5,l=p)),u);n.$$.on_destroy.push(()=>o());let{gjSchemes:u}=e;r();let{scheme_reference:s}=e,f=l.schemes[s].pipeline,a=0;fn(()=>{u.update(p=>(Object.hasOwn(p.schemes,s)&&(p.schemes[s].pipeline=f),p))});function m(p,d){return f.scheme_type&&f.status&&f.timescale?"":"Missing some required data"}function c(p){n.$$.not_equal(l.schemes[s].scheme_name,p)&&(l.schemes[s].scheme_name=p,u.set(l))}function h(p){n.$$.not_equal(f.scheme_type,p)&&(f.scheme_type=p,i(2,f))}function C(p){n.$$.not_equal(f.atf4_lead_type,p)&&(f.atf4_lead_type=p,i(2,f))}function P(p){n.$$.not_equal(f.scheme_description,p)&&(f.scheme_description=p,i(2,f))}const w=()=>i(3,a++,a),_=()=>i(3,a++,a);return n.$$set=p=>{"gjSchemes"in p&&r(i(0,u=p.gjSchemes)),"scheme_reference"in p&&i(1,s=p.scheme_reference)},n.$$.update=()=>{n.$$.dirty&12&&i(4,t=m())},[u,s,f,a,t,l,c,h,C,P,w,_]}class Ut extends D{constructor(e){super(),H(this,e,Tt,Pt,V,{gjSchemes:0,scheme_reference:1})}}function It(n){let e,i;return e=new Mt({props:{gjSchemes:n[0],scheme_reference:n[1]}}),{c(){q(e.$$.fragment)},m(t,l){N(e,t,l),i=!0},p(t,l){const o={};l&1&&(o.gjSchemes=t[0]),l&2&&(o.scheme_reference=t[1]),e.$set(o)},i(t){i||(g(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){O(e,t)}}}function At(n){let e,i;return e=new Ut({props:{gjSchemes:n[0],scheme_reference:n[1]}}),{c(){q(e.$$.fragment)},m(t,l){N(e,t,l),i=!0},p(t,l){const o={};l&1&&(o.gjSchemes=t[0]),l&2&&(o.scheme_reference=t[1]),e.$set(o)},i(t){i||(g(e.$$.fragment,t),i=!0)},o(t){b(e.$$.fragment,t),i=!1},d(t){O(e,t)}}}function Lt(n){let e,i,t,l;const o=[At,It],r=[];function u(s,f){return s[2]=="pipeline"?0:1}return e=u(n),i=r[e]=o[e](n),{c(){i.c(),t=Y()},m(s,f){r[e].m(s,f),$(s,t,f),l=!0},p(s,[f]){let a=e;e=u(s),e===a?r[e].p(s,f):(Z(),b(r[a],1,1,()=>{r[a]=null}),K(),i=r[e],i?i.p(s,f):(i=r[e]=o[e](s),i.c()),g(i,1),i.m(t.parentNode,t))},i(s){l||(g(i),l=!0)},o(s){b(i),l=!1},d(s){s&&v(t),r[e].d(s)}}}function Wt(n,e,i){let t;_e(n,te,r=>i(2,t=r));let{gjSchemes:l}=e,{scheme_reference:o}=e;return n.$$set=r=>{"gjSchemes"in r&&i(0,l=r.gjSchemes),"scheme_reference"in r&&i(1,o=r.scheme_reference)},[l,o,t]}class Bt extends D{constructor(e){super(),H(this,e,Wt,Lt,V,{gjSchemes:0,scheme_reference:1})}}let Yt={interventionName:Gt,schemeName:ke,backfill:Et,initializeEmptyScheme:Rt,interventionWarning:Jt,editFeatureForm:Ot,editSchemeForm:Bt,newPointFeature:n=>{n.properties.intervention_type="other",re(te)=="natn"&&!n.properties.name&&(n.properties.name=n.properties.natn.element)},newPolygonFeature:n=>{n.properties.intervention_type="area",n.properties.is_coverage_polygon=!1,re(te)=="natn"&&!n.properties.name&&(n.properties.name=n.properties.natn.element)},newLineStringFeature:n=>{n.properties.intervention_type="route",n.properties.route_name&&!n.properties.name&&(re(te)=="natn"?n.properties.name=n.properties.natn.element:re(te)!="pipeline"&&(n.properties.name=n.properties.route_name)),delete n.properties.route_name,delete n.properties.full_path},updateFeature:(n,e)=>{e.properties.route_name&&!n.properties.name&&re(te)!="pipeline"&&(n.properties.name=e.properties.route_name)},getStreetViewRoadLayerNames:n=>cn(n,re(an)),layerZorder:mn};function Et(n){var t,l,o,r,u,s,f,a;let e=re(te),i=1;for(let m of n.features)m.properties||(m.properties={name:"",scheme_reference:"",description:"",intervention_type:"other",is_coverage_polygon:!1}),(e=="pipeline"||e=="v2"||e=="natn")&&!m.properties.intervention_type&&(m.properties.intervention_type=new Map([["LineString","route"],["Polygon","area"]]).get(m.geometry.type)??"other"),m.geometry.type=="LineString"&&!m.properties.length_meters&&(m.properties.length_meters=_n(m,{units:"kilometers"})*1e3),m.id=i++;if(!n.schemes){let m=oe();n.schemes={},n.schemes[m]={scheme_reference:m,color:Me()},n.scheme_name&&(n.schemes[m].scheme_name=n.scheme_name,delete n.scheme_name),n.pipeline&&(n.schemes[m].pipeline=n.pipeline,delete n.pipeline);for(let c of n.features)c.properties.scheme_reference=m}for(let m of Object.values(n.schemes)){let c=m;if(c.color??(c.color=Me()),e=="pipeline"){c.pipeline??(c.pipeline=ln()),(t=c.pipeline).development_funded??(t.development_funded=!1),(l=c.pipeline).construction_funded??(l.construction_funded=!1),(o=c.pipeline).funding_sources??(o.funding_sources=Se()),delete c.pipeline.budget_funded,delete c.pipeline.budget_unfunded,delete c.pipeline.funding_source,delete c.pipeline.funded;for(let h of n.features)h.properties.pipeline&&((r=h.properties.pipeline).development_funded??(r.development_funded=!1),(u=h.properties.pipeline).construction_funded??(u.construction_funded=!1),(s=h.properties.pipeline).funding_sources??(s.funding_sources=Se()),(f=h.properties.pipeline).status??(f.status=""),(a=h.properties.pipeline).timescale??(a.timescale=""))}else e=="v2"?c.v2={}:e=="natn"&&(c.natn={})}return n}function Rt(n){let e=n,i=re(te);return i=="pipeline"?e.pipeline=ln():i=="v2"?e.v2={}:i=="natn"&&(e.natn={}),e}function ln(){return{scheme_type:"",atf4_lead_type:"",scheme_description:"",status:"",timescale:"",development_funded:!1,construction_funded:!1,funding_sources:Se()}}function Se(){return{atf2:!1,atf3:!1,atf4:!1,atf4e:!1,crsts:!1,luf:!1,other:""}}function Gt(n){if(n.properties.name)return n.properties.name;var e=n.properties.intervention_type;return e=="other"&&(n.geometry.type=="Point"?e="point":n.geometry.type=="LineString"?e="line":e="polygon"),`Untitled ${e}`}function ke(n){return n.scheme_name??"Untitled scheme"}function Jt(n){var t;let e=re(te);if(!n.name)return"No name";if(!new Set(["route","area","crossing","other"]).has(n.intervention_type))return"No intervention type";if(e=="pipeline"&&!((t=n.pipeline)!=null&&t.accuracy))return"Accuracy not specified";let i=un(n);return Object.entries(i).length>0?`Extra GeoJSON properties: ${Object.keys(i).join(", ")}`:null}function un(n){let e=re(te),i=JSON.parse(JSON.stringify(n));for(let t of["name","description","intervention_type","length_meters","waypoints","hide_while_editing","is_coverage_polygon","scheme_reference"])delete i[t];if(e=="pipeline"&&i.pipeline){for(let t of["atf4_type","accuracy","is_alternative","budget","development_funded","construction_funded","funding_sources","status","timescale","timescale_year","year_published","year_consulted"])delete i.pipeline[t];Object.entries(i.pipeline).length==0&&delete i.pipeline}if(e=="v2"&&i.v2){for(let t of["intervention_type","intended_uses","work_type"])delete i.v2[t];Object.entries(i.v2).length==0&&delete i.v2}if(e=="natn"&&i.natn){for(let t of["element"])delete i.natn[t];Object.entries(i.natn).length==0&&delete i.natn}return i}export{Et as b,Yt as c};
