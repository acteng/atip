import{S as X,i as G,s as J,F as Ce,g as se,m as re,t as b,n as T,p as ce,e as ae,h as D,j as K,w as Te,o as Y,b as Z,a$ as Me,c as Ie,l as ze,aQ as me,aR as de,aS as he,aT as _e,aU as Se,b0 as H,$ as Ee,a0 as ge,a1 as be,b7 as Fe,b8 as Pe,q as Q,r as ve,aV as j,aX as He}from"./index-e33ce926.js";function je(t){let n,e,o;return{c(){n=ae("input"),n.disabled=t[2],D(n,"class","govuk-file-upload"),D(n,"id",t[1]),D(n,"type","file")},m(l,u){K(l,n,u),t[6](n),e||(o=Te(n,"change",t[4]),e=!0)},p(l,u){u&4&&(n.disabled=l[2]),u&2&&D(n,"id",l[1])},d(l){l&&Y(n),t[6](null),e=!1,o()}}}function Be(t){let n,e;return n=new Ce({props:{label:t[0],id:t[1],$$slots:{default:[je]},$$scope:{ctx:t}}}),{c(){se(n.$$.fragment)},m(o,l){re(n,o,l),e=!0},p(o,[l]){const u={};l&1&&(u.label=o[0]),l&2&&(u.id=o[1]),l&142&&(u.$$scope={dirty:l,ctx:o}),n.$set(u)},i(o){e||(b(n.$$.fragment,o),e=!0)},o(o){T(n.$$.fragment,o),e=!1},d(o){ce(n,o)}}}function we(t,n,e){let{label:o}=n,{id:l}=n,{loadFile:u}=n,{disabled:s=!1}=n,i;function c(m){let I=new FileReader;I.onload=k=>{u(k.target.result)};let O=i.files;I.readAsText(O[0])}function M(m){Z[m?"unshift":"push"](()=>{i=m,e(3,i)})}return t.$$set=m=>{"label"in m&&e(0,o=m.label),"id"in m&&e(1,l=m.id),"loadFile"in m&&e(5,u=m.loadFile),"disabled"in m&&e(2,s=m.disabled)},[o,l,s,i,c,u,M]}class Ue extends X{constructor(n){super(),G(this,n,we,Be,J,{label:0,id:1,loadFile:5,disabled:2})}}function Ae(t){let n;const e=t[14].default,o=me(e,t,t[22],null);return{c(){o&&o.c()},m(l,u){o&&o.m(l,u),n=!0},p(l,u){o&&o.p&&(!n||u&4194304)&&de(o,e,l,l[22],n?_e(e,l[22],u,null):he(l[22]),null)},i(l){n||(b(o,l),n=!0)},o(l){T(o,l),n=!1},d(l){o&&o.d(l)}}}function We(t){let n,e,o;function l(s){t[15](s)}let u={id:t[1],type:"fill",source:t[2],sourceLayer:t[3],beforeId:t[4],beforeLayerType:t[5],paint:t[6],layout:t[7],filter:t[8],minzoom:t[9],maxzoom:t[10],hoverCursor:t[11],manageHoverState:t[12],eventsIfTopMost:t[13],$$slots:{default:[Ae]},$$scope:{ctx:t}};return t[0]!==void 0&&(u.hovered=t[0]),n=new Me({props:u}),Z.push(()=>Ie(n,"hovered",l)),n.$on("click",t[16]),n.$on("dblclick",t[17]),n.$on("contextmenu",t[18]),n.$on("mouseenter",t[19]),n.$on("mousemove",t[20]),n.$on("mouseleave",t[21]),{c(){se(n.$$.fragment)},m(s,i){re(n,s,i),o=!0},p(s,[i]){const c={};i&2&&(c.id=s[1]),i&4&&(c.source=s[2]),i&8&&(c.sourceLayer=s[3]),i&16&&(c.beforeId=s[4]),i&32&&(c.beforeLayerType=s[5]),i&64&&(c.paint=s[6]),i&128&&(c.layout=s[7]),i&256&&(c.filter=s[8]),i&512&&(c.minzoom=s[9]),i&1024&&(c.maxzoom=s[10]),i&2048&&(c.hoverCursor=s[11]),i&4096&&(c.manageHoverState=s[12]),i&8192&&(c.eventsIfTopMost=s[13]),i&4194304&&(c.$$scope={dirty:i,ctx:s}),!e&&i&1&&(e=!0,c.hovered=s[0],ze(()=>e=!1)),n.$set(c)},i(s){o||(b(n.$$.fragment,s),o=!0)},o(s){T(n.$$.fragment,s),o=!1},d(s){ce(n,s)}}}function qe(t,n,e){let{$$slots:o={},$$scope:l}=n,{id:u=Se("fill")}=n,{source:s=void 0}=n,{sourceLayer:i=void 0}=n,{beforeId:c=void 0}=n,{beforeLayerType:M=void 0}=n,{paint:m}=n,{layout:I=void 0}=n,{filter:O=void 0}=n,{minzoom:k=void 0}=n,{maxzoom:z=void 0}=n,{hoverCursor:E=void 0}=n,{manageHoverState:h=!1}=n,{hovered:y=null}=n,{eventsIfTopMost:F=!1}=n;function B(r){y=r,e(0,y)}function w(r){H.call(this,t,r)}function A(r){H.call(this,t,r)}function W(r){H.call(this,t,r)}function _(r){H.call(this,t,r)}function P(r){H.call(this,t,r)}function d(r){H.call(this,t,r)}return t.$$set=r=>{"id"in r&&e(1,u=r.id),"source"in r&&e(2,s=r.source),"sourceLayer"in r&&e(3,i=r.sourceLayer),"beforeId"in r&&e(4,c=r.beforeId),"beforeLayerType"in r&&e(5,M=r.beforeLayerType),"paint"in r&&e(6,m=r.paint),"layout"in r&&e(7,I=r.layout),"filter"in r&&e(8,O=r.filter),"minzoom"in r&&e(9,k=r.minzoom),"maxzoom"in r&&e(10,z=r.maxzoom),"hoverCursor"in r&&e(11,E=r.hoverCursor),"manageHoverState"in r&&e(12,h=r.manageHoverState),"hovered"in r&&e(0,y=r.hovered),"eventsIfTopMost"in r&&e(13,F=r.eventsIfTopMost),"$$scope"in r&&e(22,l=r.$$scope)},[y,u,s,i,c,M,m,I,O,k,z,E,h,F,o,B,w,A,W,_,P,d,l]}class Ve extends X{constructor(n){super(),G(this,n,qe,We,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,minzoom:9,maxzoom:10,hoverCursor:11,manageHoverState:12,hovered:0,eventsIfTopMost:13})}}const Ne=t=>({features:t[0]&16,data:t[0]&16,map:t[0]&4,close:t[0]&1}),fe=t=>{var n;return{features:t[4],data:(n=t[4])==null?void 0:n[0],map:t[2],close:t[31]}};function ue(t){let n,e,o=(t[4]||t[3]instanceof j.Marker)&&ie(t);return{c(){n=ae("div"),o&&o.c()},m(l,u){K(l,n,u),o&&o.m(n,null),t[32](n),e=!0},p(l,u){l[4]||l[3]instanceof j.Marker?o?(o.p(l,u),u[0]&24&&b(o,1)):(o=ie(l),o.c(),b(o,1),o.m(n,null)):o&&(ge(),T(o,1,1,()=>{o=null}),be())},i(l){e||(b(o),e=!0)},o(l){T(o),e=!1},d(l){l&&Y(n),o&&o.d(),t[32](null)}}}function ie(t){let n;const e=t[30].default,o=me(e,t,t[29],fe);return{c(){o&&o.c()},m(l,u){o&&o.m(l,u),n=!0},p(l,u){o&&o.p&&(!n||u[0]&536870933)&&de(o,e,l,l[29],n?_e(e,l[29],u,Ne):he(l[29]),fe)},i(l){n||(b(o,l),n=!0)},o(l){T(o,l),n=!1},d(l){o&&o.d(l)}}}function Re(t){let n,e,o=t[9].default&&ue(t);return{c(){o&&o.c(),n=Ee()},m(l,u){o&&o.m(l,u),K(l,n,u),e=!0},p(l,u){l[9].default?o?(o.p(l,u),u[0]&512&&b(o,1)):(o=ue(l),o.c(),b(o,1),o.m(n.parentNode,n)):o&&(ge(),T(o,1,1,()=>{o=null}),be())},i(l){e||(b(o),e=!0)},o(l){T(o),e=!1},d(l){l&&Y(n),o&&o.d(l)}}}function De(t,n,e){let o,l,u,s,i,c,{$$slots:M={},$$scope:m}=n;const I=Fe(M);let{closeButton:O=void 0}=n,{closeOnClickOutside:k=!0}=n,{closeOnClickInside:z=!1}=n,{closeOnMove:E=!1}=n,{openOn:h="click"}=n,{openIfTopMost:y=!0}=n,{focusAfterOpen:F=!0}=n,{anchor:B=void 0}=n,{offset:w=void 0}=n,{popupClass:A=void 0}=n,{maxWidth:W=void 0}=n,{lngLat:_=void 0}=n,{html:P=void 0}=n,{open:d=!1}=n;const{map:r,popupTarget:p,layerEvent:N,layer:x,eventTopMost:$}=Pe();Q(t,r,f=>e(2,u=f)),Q(t,p,f=>e(3,i=f)),Q(t,N,f=>e(28,s=f)),Q(t,x,f=>e(35,c=f));const ke=["click","dblclick","contextmenu"];let a,R=!1,C;function ye(){if(!a)return;let f=a.getElement();!f||f===C||(C=f,h==="hover"&&(C.style.pointerEvents="none"),C.addEventListener("mouseenter",()=>{e(24,R=!0)},{passive:!0}),C.addEventListener("mouseleave",()=>{e(24,R=!1)},{passive:!0}),C.addEventListener("click",()=>{z&&e(0,d=!1)},{passive:!0}))}ve(()=>{if(u)return u.on("click",le),typeof i=="string"&&(u.on("click",i,S),u.on("dblclick",i,S),u.on("contextmenu",i,S),u.on("mousemove",i,te),u.on("mouseleave",i,oe),u.on("touchstart",i,ee),u.on("touchend",i,ne)),()=>{u!=null&&u.loaded()&&(a==null||a.remove(),u.off("click",le),i instanceof j.Marker?i.getPopup()===a&&i.setPopup(void 0):typeof i=="string"&&(u.off("click",i,S),u.off("dblclick",i,S),u.off("contextmenu",i,S),u.off("mousemove",i,te),u.off("mouseleave",i,oe),u.off("touchstart",i,ee),u.off("touchend",i,ne)))}});let g=null,L="normal";function S(f){f.type===h&&(y&&$(f)!==c||("layerType"in f?f.layerType==="deckgl"?(e(10,_=f.coordinate),e(4,g=f.object?[f.object]:null)):(e(10,_=f.lngLat),e(4,g=f.features??[])):(e(10,_=f.lngLat),e(4,g=f.features??[])),setTimeout(()=>e(0,d=!0))))}let v=null;function ee(f){v=f.point}function ne(f){if(!v||h!=="hover")return;let U=v.dist(f.point);v=null,U<3&&(e(10,_=f.lngLat),e(4,g=f.features??[]),a.isOpen()?e(25,L="justOpened"):(e(25,L="opening"),e(0,d=!0)))}function oe(f){h!=="hover"||v||L!=="normal"||(e(0,d=!1),e(4,g=null))}function te(f){if(!(h!=="hover"||v||L!=="normal")){if(y&&$(f)!==c){e(0,d=!1),e(4,g=null);return}e(0,d=!0),e(4,g=f.features??[]),e(10,_=f.lngLat)}}function le(f){if(L==="justOpened"){e(25,L="normal");return}if(!k)return;let U=[C,i instanceof j.Marker?i==null?void 0:i.getElement():null];d&&a.isOpen()&&!U.some(V=>V==null?void 0:V.contains(f.originalEvent.target))&&e(0,d=!1)}let q;const Le=()=>e(0,d=!1);function Oe(f){Z[f?"unshift":"push"](()=>{q=f,e(1,q)})}return t.$$set=f=>{"closeButton"in f&&e(11,O=f.closeButton),"closeOnClickOutside"in f&&e(12,k=f.closeOnClickOutside),"closeOnClickInside"in f&&e(13,z=f.closeOnClickInside),"closeOnMove"in f&&e(14,E=f.closeOnMove),"openOn"in f&&e(15,h=f.openOn),"openIfTopMost"in f&&e(16,y=f.openIfTopMost),"focusAfterOpen"in f&&e(17,F=f.focusAfterOpen),"anchor"in f&&e(18,B=f.anchor),"offset"in f&&e(19,w=f.offset),"popupClass"in f&&e(20,A=f.popupClass),"maxWidth"in f&&e(21,W=f.maxWidth),"lngLat"in f&&e(10,_=f.lngLat),"html"in f&&e(22,P=f.html),"open"in f&&e(0,d=f.open),"$$scope"in f&&e(29,m=f.$$scope)},t.$$.update=()=>{if(t.$$.dirty[0]&14336&&e(27,o=O??(!k&&!z)),t.$$.dirty[0]&146685952&&(a||(e(23,a=new j.Popup({closeButton:o,closeOnClick:!1,closeOnMove:E,focusAfterOpen:F,maxWidth:W,className:A,anchor:B,offset:w})),C=a.getElement(),a.on("open",()=>{e(0,d=!0),ye()}),a.on("close",f=>{e(0,d=!1)}))),t.$$.dirty[0]&8421384&&a&&i instanceof j.Marker&&(h==="click"?i.setPopup(a):i.getPopup()===a&&i.setPopup(void 0)),t.$$.dirty[0]&268468224&&ke.includes(h)&&(s==null?void 0:s.type)===h&&(S(s),He(N,s=null,s)),t.$$.dirty[0]&268468224&&e(26,l=h==="hover"&&((s==null?void 0:s.type)==="mousemove"||(s==null?void 0:s.type)==="mouseenter")),t.$$.dirty[0]&352354304&&h==="hover"&&N&&(l&&s&&(s.layerType==="deckgl"?(e(10,_=s.coordinate),e(4,g=s.object?[s.object]:null)):(e(10,_=s.lngLat),e(4,g=s.features??[]))),e(0,d=(l||R)??!1)),t.$$.dirty[0]&12582914&&(q?a.setDOMContent(q):P&&a.setHTML(P)),t.$$.dirty[0]&8389632&&_&&a.setLngLat(_),t.$$.dirty[0]&41943045&&u){let f=a.isOpen();d&&!f?(a.addTo(u),L==="opening"&&e(25,L="justOpened")):!d&&f&&a.remove()}},[d,q,u,i,g,r,p,N,x,I,_,O,k,z,E,h,y,F,B,w,A,W,P,a,R,L,l,o,s,m,M,Le,Oe]}class Xe extends X{constructor(n){super(),G(this,n,De,Re,J,{closeButton:11,closeOnClickOutside:12,closeOnClickInside:13,closeOnMove:14,openOn:15,openIfTopMost:16,focusAfterOpen:17,anchor:18,offset:19,popupClass:20,maxWidth:21,lngLat:10,html:22,open:0},null,[-1,-1])}}export{Ue as F,Xe as P,Ve as a};
