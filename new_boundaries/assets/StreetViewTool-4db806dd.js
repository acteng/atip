import{S as N,i as j,s as K,aM as we,e as v,h as u,j as T,aN as ve,aO as pe,aP as Me,t as p,n as B,o as L,k as w,d as W,aA as Ft,w as V,ar as Le,b3 as Ot,aY as Ee,F as qt,g as O,m as q,p as Z,E as Zt,aB as ze,_ as Se,aE as Dt,b9 as Xe,aC as Ht,ba as Nt,v as Te,u as $,D as he,bb as jt,b as Ne,c as mt,l as _t,q as Ue,aK as xe,bc as fe,I as G,bd as ae,H as X,b8 as Ve,be as Kt,$ as _e,a0 as ge,bf as Jt,aj as gt,aI as Qt,aJ as Yt,C as ht,r as Xt,bg as xt,aR as $t,a1 as Ae,bh as el,bi as tl,aL as ll,as as $e,bj as nl,a as bt,R as sl}from"./index-c522f19c.js";const rl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function il(n){let e,t;const l=n[1].default,s=we(l,n,n[0],null);return{c(){e=v("div"),s&&s.c(),u(e,"class","govuk-button-group")},m(r,i){T(r,e,i),s&&s.m(e,null),t=!0},p(r,[i]){s&&s.p&&(!t||i&1)&&ve(s,l,r,r[0],t?Me(l,r[0],i,null):pe(r[0]),null)},i(r){t||(p(s,r),t=!0)},o(r){B(s,r),t=!1},d(r){r&&L(e),s&&s.d(r)}}}function ol(n,e,t){let{$$slots:l={},$$scope:s}=e;return n.$$set=r=>{"$$scope"in r&&t(0,s=r.$$scope)},[s,l]}class dn extends N{constructor(e){super(),j(this,e,ol,il,K,{})}}function al(n){let e,t,l;const s=n[3].default,r=we(s,n,n[2],null);return{c(){e=v("fieldset"),t=v("div"),r&&r.c(),u(t,"class",n[0]),u(t,"data-module","govuk-checkboxes"),u(e,"class","govuk-fieldset")},m(i,o){T(i,e,o),w(e,t),r&&r.m(t,null),l=!0},p(i,[o]){r&&r.p&&(!l||o&4)&&ve(r,s,i,i[2],l?Me(s,i[2],o,null):pe(i[2]),null)},i(i){l||(p(r,i),l=!0)},o(i){B(r,i),l=!1},d(i){i&&L(e),r&&r.d(i)}}}function fl(n,e,t){let{$$slots:l={},$$scope:s}=e,{small:r=!1}=e,i=r?"govuk-checkboxes--small":"govuk-checkboxes";return n.$$set=o=>{"small"in o&&t(1,r=o.small),"$$scope"in o&&t(2,s=o.$$scope)},[i,r,s,l]}class mn extends N{constructor(e){super(),j(this,e,fl,al,K,{small:1})}}const ul=n=>({}),et=n=>({});function cl(n){let e,t,l,s,r,i,o,c,d;const a=n[5].default,m=we(a,n,n[4],null),_=n[5].right,k=we(_,n,n[4],et);return{c(){e=v("div"),t=v("input"),l=W(),s=v("label"),m&&m.c(),r=W(),i=v("span"),k&&k.c(),u(t,"type","checkbox"),u(t,"class","govuk-checkboxes__input"),u(t,"id",n[1]),u(s,"class","govuk-label govuk-checkboxes__label"),u(s,"for",n[1]),u(s,"title",n[2]),Ft(i,"float","right"),u(e,"class","govuk-checkboxes__item"),u(e,"style",n[3])},m(b,h){T(b,e,h),w(e,t),t.checked=n[0],w(e,l),w(e,s),m&&m.m(s,null),w(e,r),w(e,i),k&&k.m(i,null),o=!0,c||(d=[V(t,"change",n[7]),V(t,"change",n[6])],c=!0)},p(b,[h]){(!o||h&2)&&u(t,"id",b[1]),h&1&&(t.checked=b[0]),m&&m.p&&(!o||h&16)&&ve(m,a,b,b[4],o?Me(a,b[4],h,null):pe(b[4]),null),(!o||h&2)&&u(s,"for",b[1]),(!o||h&4)&&u(s,"title",b[2]),k&&k.p&&(!o||h&16)&&ve(k,_,b,b[4],o?Me(_,b[4],h,ul):pe(b[4]),et)},i(b){o||(p(m,b),p(k,b),o=!0)},o(b){B(m,b),B(k,b),o=!1},d(b){b&&L(e),m&&m.d(b),k&&k.d(b),c=!1,Le(d)}}}function dl(n,e,t){let{$$slots:l={},$$scope:s}=e;const r=Ot(l);let{id:i}=e,{checked:o}=e,{hint:c=null}=e,a=r.right!==void 0?"float: none":"";function m(k){Ee.call(this,n,k)}function _(){o=this.checked,t(0,o)}return n.$$set=k=>{"id"in k&&t(1,i=k.id),"checked"in k&&t(0,o=k.checked),"hint"in k&&t(2,c=k.hint),"$$scope"in k&&t(4,s=k.$$scope)},[o,i,c,a,s,l,m,_]}class _n extends N{constructor(e){super(),j(this,e,dl,cl,K,{id:1,checked:0,hint:2})}}function tt(n,e,t){const l=n.slice();return l[9]=e[t][0],l[10]=e[t][1],l}function lt(n){let e;return{c(){e=v("option"),e.__value="",Te(e,e.__value)},m(t,l){T(t,e,l)},d(t){t&&L(e)}}}function nt(n){let e,t=n[10]+"",l,s;return{c(){e=v("option"),l=$(t),e.__value=s=n[9],Te(e,e.__value)},m(r,i){T(r,e,i),w(e,l)},p(r,i){i&8&&t!==(t=r[10]+"")&&he(l,t),i&8&&s!==(s=r[9])&&(e.__value=s,Te(e,e.__value))},d(r){r&&L(e)}}}function ml(n){let e,t,l,s,r,i,o;e=new Zt({props:{errorMessage:n[6]}});let c=n[4]&&lt(),d=ze(n[3]),a=[];for(let m=0;m<d.length;m+=1)a[m]=nt(tt(n,d,m));return{c(){O(e.$$.fragment),t=W(),l=v("select"),c&&c.c(),s=Se();for(let m=0;m<a.length;m+=1)a[m].c();u(l,"class","govuk-select"),u(l,"id",n[2]),l.disabled=n[5],n[0]===void 0&&Dt(()=>n[8].call(l))},m(m,_){q(e,m,_),T(m,t,_),T(m,l,_),c&&c.m(l,null),w(l,s);for(let k=0;k<a.length;k+=1)a[k]&&a[k].m(l,null);Xe(l,n[0],!0),r=!0,i||(o=[V(l,"change",n[8]),V(l,"change",n[7])],i=!0)},p(m,_){const k={};if(_&64&&(k.errorMessage=m[6]),e.$set(k),m[4]?c||(c=lt(),c.c(),c.m(l,s)):c&&(c.d(1),c=null),_&8){d=ze(m[3]);let b;for(b=0;b<d.length;b+=1){const h=tt(m,d,b);a[b]?a[b].p(h,_):(a[b]=nt(h),a[b].c(),a[b].m(l,null))}for(;b<a.length;b+=1)a[b].d(1);a.length=d.length}(!r||_&4)&&u(l,"id",m[2]),(!r||_&32)&&(l.disabled=m[5]),_&9&&Xe(l,m[0])},i(m){r||(p(e.$$.fragment,m),r=!0)},o(m){B(e.$$.fragment,m),r=!1},d(m){m&&(L(t),L(l)),Z(e,m),c&&c.d(),Ht(a,m),i=!1,Le(o)}}}function _l(n){let e,t;return e=new qt({props:{label:n[1],id:n[2],$$slots:{default:[ml]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment)},m(l,s){q(e,l,s),t=!0},p(l,[s]){const r={};s&2&&(r.label=l[1]),s&4&&(r.id=l[2]),s&8317&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function gl(n,e,t){let{label:l}=e,{id:s}=e,{choices:r}=e,{emptyOption:i=!1}=e,{disabled:o=!1}=e,{errorMessage:c=""}=e,{value:d}=e;function a(_){Ee.call(this,n,_)}function m(){d=Nt(this),t(0,d),t(3,r)}return n.$$set=_=>{"label"in _&&t(1,l=_.label),"id"in _&&t(2,s=_.id),"choices"in _&&t(3,r=_.choices),"emptyOption"in _&&t(4,i=_.emptyOption),"disabled"in _&&t(5,o=_.disabled),"errorMessage"in _&&t(6,c=_.errorMessage),"value"in _&&t(0,d=_.value)},[d,l,s,r,i,o,c,a,m]}class hl extends N{constructor(e){super(),j(this,e,gl,_l,K,{label:1,id:2,choices:3,emptyOption:4,disabled:5,errorMessage:6,value:0})}}function bl(n){let e,t,l;function s(i){n[2](i)}let r={label:"Basemap",id:"basemap",choices:jt(),disabled:n[0]};return n[1]!==void 0&&(r.value=n[1]),e=new hl({props:r}),Ne.push(()=>mt(e,"value",s)),{c(){O(e.$$.fragment)},m(i,o){q(e,i,o),l=!0},p(i,[o]){const c={};o&1&&(c.disabled=i[0]),!t&&o&2&&(t=!0,c.value=i[1],_t(()=>t=!1)),e.$set(c)},i(i){l||(p(e.$$.fragment,i),l=!0)},o(i){B(e.$$.fragment,i),l=!1},d(i){Z(e,i)}}}function yl(n,e,t){let l;Ue(n,xe,i=>t(1,l=i));let{disabled:s=!1}=e;function r(i){l=i,xe.set(l)}return n.$$set=i=>{"disabled"in i&&t(0,s=i.disabled)},[s,l,r]}class gn extends N{constructor(e){super(),j(this,e,yl,bl,K,{disabled:0})}}function kl(n){let e,t,l,s,r,i,o;const c=n[3].default,d=we(c,n,n[2],null);return{c(){e=v("details"),t=v("summary"),l=v("span"),s=$(n[0]),r=W(),i=v("div"),d&&d.c(),u(l,"class","govuk-details__summary-text"),u(t,"class","govuk-details__summary"),u(i,"class","govuk-details__text"),e.open=n[1],u(e,"class","govuk-details"),u(e,"data-module","govuk-details")},m(a,m){T(a,e,m),w(e,t),w(t,l),w(l,s),w(e,r),w(e,i),d&&d.m(i,null),o=!0},p(a,[m]){(!o||m&1)&&he(s,a[0]),d&&d.p&&(!o||m&4)&&ve(d,c,a,a[2],o?Me(c,a[2],m,null):pe(a[2]),null),(!o||m&2)&&(e.open=a[1])},i(a){o||(p(d,a),o=!0)},o(a){B(d,a),o=!1},d(a){a&&L(e),d&&d.d(a)}}}function wl(n,e,t){let{$$slots:l={},$$scope:s}=e,{label:r}=e,{open:i=!1}=e;return n.$$set=o=>{"label"in o&&t(0,r=o.label),"open"in o&&t(1,i=o.open),"$$scope"in o&&t(2,s=o.$$scope)},[r,i,s,l]}class vl extends N{constructor(e){super(),j(this,e,wl,kl,K,{label:0,open:1})}}function pl(n){let e,t;return{c(){e=fe("svg"),t=fe("path"),u(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),u(e,"viewBox","0 0 60.006 21.412"),u(e,"width","14"),u(e,"height","20"),u(e,"class","svelte-en2qvf")},m(l,s){T(l,e,s),w(e,t)},p:G,i:G,o:G,d(l){l&&L(e)}}}class Ml extends N{constructor(e){super(),j(this,e,null,pl,K,{})}}function Cl(n){let e,t;return{c(){e=v("img"),X(e.src,t=n[3]+"area.svg")||u(e,"src",t),u(e,"alt",n[6]),u(e,"class","svelte-ltkwvy")},m(l,s){T(l,e,s)},p(l,s){s&8&&!X(e.src,t=l[3]+"area.svg")&&u(e,"src",t),s&64&&u(e,"alt",l[6])},d(l){l&&L(e)}}}function Tl(n){let e,t;return{c(){e=v("img"),X(e.src,t=n[3]+"poi.svg")||u(e,"src",t),u(e,"alt",n[6]),u(e,"class","svelte-ltkwvy")},m(l,s){T(l,e,s)},p(l,s){s&8&&!X(e.src,t=l[3]+"poi.svg")&&u(e,"src",t),s&64&&u(e,"alt",l[6])},d(l){l&&L(e)}}}function Ll(n){let e,t;return{c(){e=v("img"),X(e.src,t=n[3]+"postal_code.svg")||u(e,"src",t),u(e,"alt",n[6]),u(e,"class","svelte-ltkwvy")},m(l,s){T(l,e,s)},p(l,s){s&8&&!X(e.src,t=l[3]+"postal_code.svg")&&u(e,"src",t),s&64&&u(e,"alt",l[6])},d(l){l&&L(e)}}}function Sl(n){let e,t;return{c(){e=v("img"),X(e.src,t=n[3]+"street.svg")||u(e,"src",t),u(e,"alt",n[6]),u(e,"class","svelte-ltkwvy")},m(l,s){T(l,e,s)},p(l,s){s&8&&!X(e.src,t=l[3]+"street.svg")&&u(e,"src",t),s&64&&u(e,"alt",l[6])},d(l){l&&L(e)}}}function Bl(n){let e,t;return{c(){e=v("img"),X(e.src,t=n[3]+"road.svg")||u(e,"src",t),u(e,"alt",n[6]),u(e,"class","svelte-ltkwvy")},m(l,s){T(l,e,s)},p(l,s){s&8&&!X(e.src,t=l[3]+"road.svg")&&u(e,"src",t),s&64&&u(e,"alt",l[6])},d(l){l&&L(e)}}}function Rl(n){let e,t;return{c(){e=v("img"),X(e.src,t=n[3]+"housenumber.svg")||u(e,"src",t),u(e,"alt",n[6]),u(e,"class","svelte-ltkwvy")},m(l,s){T(l,e,s)},p(l,s){s&8&&!X(e.src,t=l[3]+"housenumber.svg")&&u(e,"src",t),s&64&&u(e,"alt",l[6])},d(l){l&&L(e)}}}function Il(n){let e,t,l,s;return{c(){e=v("img"),X(e.src,t=n[5])||u(e,"src",t),u(e,"alt",n[4]),u(e,"class","svelte-ltkwvy")},m(r,i){T(r,e,i),l||(s=V(e,"error",n[12]),l=!0)},p(r,i){i&32&&!X(e.src,t=r[5])&&u(e,"src",t),i&16&&u(e,"alt",r[4])},d(r){r&&L(e),l=!1,s()}}}function st(n){let e,t;return{c(){e=v("span"),t=$(n[6]),u(e,"class","secondary svelte-ltkwvy")},m(l,s){T(l,e,s),w(e,t)},p(l,s){s&64&&he(t,l[6])},d(l){l&&L(e)}}}function Pl(n){var se,D;let e,t,l,s,r,i,o,c,d=n[0].place_name.replace(/,.*/,"")+"",a,m,_=n[2]==="always"||n[2]&&!n[0].address&&((se=n[0].properties)==null?void 0:se.kind)!=="road"&&((D=n[0].properties)==null?void 0:D.kind)!=="road_relation"&&!n[0].id.startsWith("address.")&&!n[0].id.startsWith("postal_code.")&&(!n[0].id.startsWith("poi.")||!n[5]),k,b,h=n[0].place_name.replace(/[^,]*,?\s*/,"")+"",A,F,M;function H(C,R){var ee,g;return R&1&&(t=null),R&1&&(l=null),R&1&&(s=null),C[5]?Il:C[0].address?Rl:((ee=C[0].properties)==null?void 0:ee.kind)==="road"||((g=C[0].properties)==null?void 0:g.kind)==="road_relation"?Bl:(t==null&&(t=!!C[0].id.startsWith("address.")),t?Sl:(l==null&&(l=!!C[0].id.startsWith("postal_code.")),l?Ll:(s==null&&(s=!!C[0].id.startsWith("poi.")),s?Tl:Cl)))}let J=H(n,-1),y=J(n),S=_&&st(n);return{c(){e=v("li"),y.c(),r=W(),i=v("span"),o=v("span"),c=v("span"),a=$(d),m=W(),S&&S.c(),k=W(),b=v("span"),A=$(h),u(c,"class","primary svelte-ltkwvy"),u(o,"class","svelte-ltkwvy"),u(b,"class","line2 svelte-ltkwvy"),u(i,"class","texts svelte-ltkwvy"),u(e,"tabindex","0"),u(e,"data-selected",n[1]),u(e,"class","svelte-ltkwvy"),ae(e,"selected",n[1])},m(C,R){T(C,e,R),y.m(e,null),w(e,r),w(e,i),w(i,o),w(o,c),w(c,a),w(o,m),S&&S.m(o,null),w(i,k),w(i,b),w(b,A),F||(M=[V(e,"mouseenter",n[10]),V(e,"focus",n[11])],F=!0)},p(C,[R]){var ee,g;J===(J=H(C,R))&&y?y.p(C,R):(y.d(1),y=J(C),y&&(y.c(),y.m(e,r))),R&1&&d!==(d=C[0].place_name.replace(/,.*/,"")+"")&&he(a,d),R&37&&(_=C[2]==="always"||C[2]&&!C[0].address&&((ee=C[0].properties)==null?void 0:ee.kind)!=="road"&&((g=C[0].properties)==null?void 0:g.kind)!=="road_relation"&&!C[0].id.startsWith("address.")&&!C[0].id.startsWith("postal_code.")&&(!C[0].id.startsWith("poi.")||!C[5])),_?S?S.p(C,R):(S=st(C),S.c(),S.m(o,null)):S&&(S.d(1),S=null),R&1&&h!==(h=C[0].place_name.replace(/[^,]*,?\s*/,"")+"")&&he(A,h),R&2&&u(e,"data-selected",C[1]),R&2&&ae(e,"selected",C[1])},i:G,o:G,d(C){C&&L(e),y.d(),S&&S.d(),F=!1,Le(M)}}}function Al(n,e,t){var F;let l,s,{feature:r}=e,{selected:i=!1}=e,{showPlaceType:o}=e,{missingIconsCache:c}=e,{iconsBaseUrl:d}=e;const a=(F=r.properties)==null?void 0:F.categories;let m,_;function k(M){_&&c.add(_),t(9,l--,l)}function b(M){Ee.call(this,n,M)}function h(M){Ee.call(this,n,M)}const A=M=>k(M.currentTarget);return n.$$set=M=>{"feature"in M&&t(0,r=M.feature),"selected"in M&&t(1,i=M.selected),"showPlaceType"in M&&t(2,o=M.showPlaceType),"missingIconsCache"in M&&t(8,c=M.missingIconsCache),"iconsBaseUrl"in M&&t(3,d=M.iconsBaseUrl)},n.$$.update=()=>{var M,H,J,y;if(n.$$.dirty&824)do t(9,l--,l),t(4,m=a==null?void 0:a[l]),t(5,_=m?d+m.replace(/ /g,"_")+".svg":void 0);while(l>-1&&(!_||c.has(_)));n.$$.dirty&1&&t(6,s=r.id.startsWith("poi.")?(H=(M=r.properties)==null?void 0:M.categories)==null?void 0:H.join(", "):((y=(J=r.properties)==null?void 0:J.place_type_name)==null?void 0:y[0])??r.place_type[0])},t(9,l=(a==null?void 0:a.length)??0),[r,i,o,d,m,_,s,k,c,l,b,h,A]}class El extends N{constructor(e){super(),j(this,e,Al,Pl,K,{feature:0,selected:1,showPlaceType:2,missingIconsCache:8,iconsBaseUrl:3})}}function zl(n){let e;return{c(){e=v("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',u(e,"class","svelte-7cmwmc")},m(t,l){T(t,e,l)},p:G,i:G,o:G,d(t){t&&L(e)}}}class Ul extends N{constructor(e){super(),j(this,e,null,zl,K,{})}}function Vl(n){let e,t;return{c(){e=fe("svg"),t=fe("path"),u(t,"d","M13.101 14.261 8.74 9.899a4.797 4.797 0 0 1-1.425.748 5.165 5.165 0 0 1-1.603.248c-1.446 0-2.677-.5-3.693-1.503S.495 7.164.495 5.717c0-1.446.508-2.678 1.524-3.693C3.035 1.008 4.266.5 5.712.5c1.448 0 2.672.508 3.675 1.524 1.002 1.015 1.503 2.247 1.503 3.693 0 .558-.08 1.092-.239 1.603-.159.512-.411.98-.757 1.405l4.382 4.4a.74.74 0 0 1 .229.568.81.81 0 0 1-.249.568.787.787 0 0 1-.577.239.787.787 0 0 1-.578-.239ZM5.712 9.223c.97 0 1.796-.342 2.48-1.026a3.378 3.378 0 0 0 1.026-2.48c0-.982-.34-1.818-1.016-2.509-.677-.69-1.507-1.035-2.49-1.035a3.42 3.42 0 0 0-2.509 1.035 3.42 3.42 0 0 0-1.035 2.51c0 .982.345 1.812 1.035 2.488.691.678 1.527 1.017 2.51 1.017Z"),u(e,"width","14"),u(e,"height","14"),u(e,"viewBox","0 0 15 15"),u(e,"class","svelte-en2qvf")},m(l,s){T(l,e,s),w(e,t)},p:G,i:G,o:G,d(l){l&&L(e)}}}class Wl extends N{constructor(e){super(),j(this,e,null,Vl,K,{})}}function Gl(n){let e,t;return{c(){e=fe("svg"),t=fe("path"),u(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),u(e,"viewBox","0 0 14 14"),u(e,"width","13"),u(e,"height","13"),u(e,"class","svelte-en2qvf")},m(l,s){T(l,e,s),w(e,t)},p:G,i:G,o:G,d(l){l&&L(e)}}}class yt extends N{constructor(e){super(),j(this,e,null,Gl,K,{})}}function Fl(n){let e,t;return{c(){e=fe("svg"),t=fe("path"),u(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),u(e,"viewBox","0 0 30 30"),u(e,"fill","none"),u(e,"xmlns","http://www.w3.org/2000/svg"),u(e,"class","svelte-d2loi5")},m(l,s){T(l,e,s),w(e,t)},p:G,i:G,o:G,d(l){l&&L(e)}}}class kt extends N{constructor(e){super(),j(this,e,null,Fl,K,{})}}function rt(n,e,t){const l=n.slice();return l[75]=e[t],l[77]=t,l}function it(n){let e,t;return e=new Ul({}),{c(){O(e.$$.fragment)},m(l,s){q(e,l,s),t=!0},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function ot(n){let e,t,l,s,r;return t=new Ml({}),{c(){e=v("button"),O(t.$$.fragment),u(e,"type","button"),u(e,"title",n[9]),u(e,"class","svelte-1r7dvt7"),ae(e,"active",n[0])},m(i,o){T(i,e,o),q(t,e,null),l=!0,s||(r=V(e,"click",n[61]),s=!0)},p(i,o){(!l||o[0]&512)&&u(e,"title",i[9]),(!l||o[0]&1)&&ae(e,"active",i[0])},i(i){l||(p(t.$$.fragment,i),l=!0)},o(i){B(t.$$.fragment,i),l=!1},d(i){i&&L(e),Z(t),s=!1,r()}}}function Ol(n){let e,t=[],l=new Map,s,r,i,o=ze(n[13]);const c=d=>d[75].id+(d[75].address?","+d[75].address:"");for(let d=0;d<o.length;d+=1){let a=rt(n,o,d),m=c(a);l.set(m,t[d]=at(m,a))}return{c(){e=v("ul");for(let d=0;d<t.length;d+=1)t[d].c();u(e,"class","svelte-1r7dvt7")},m(d,a){T(d,e,a);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);s=!0,r||(i=[V(e,"mouseleave",n[65]),V(e,"blur",n[66])],r=!0)},p(d,a){a[0]&8940544&&(o=ze(d[13]),_e(),t=Qt(t,a,c,1,d,o,l,e,Yt,at,null,rt),ge())},i(d){if(!s){for(let a=0;a<o.length;a+=1)p(t[a]);s=!0}},o(d){for(let a=0;a<t.length;a+=1)B(t[a]);s=!1},d(d){d&&L(e);for(let a=0;a<t.length;a+=1)t[a].d();r=!1,Le(i)}}}function ql(n){let e,t,l,s,r,i;return t=new kt({}),{c(){e=v("div"),O(t.$$.fragment),l=W(),s=v("div"),r=$(n[7]),u(s,"class","svelte-1r7dvt7"),u(e,"class","no-results svelte-1r7dvt7")},m(o,c){T(o,e,c),q(t,e,null),w(e,l),w(e,s),w(s,r),i=!0},p(o,c){(!i||c[0]&128)&&he(r,o[7])},i(o){i||(p(t.$$.fragment,o),i=!0)},o(o){B(t.$$.fragment,o),i=!1},d(o){o&&L(e),Z(t)}}}function Zl(n){let e="",t;return{c(){t=$(e)},m(l,s){T(l,t,s)},p:G,i:G,o:G,d(l){l&&L(t)}}}function Dl(n){let e,t,l,s,r,i,o,c,d,a,m;return t=new kt({}),c=new yt({}),{c(){e=v("div"),O(t.$$.fragment),l=W(),s=v("div"),r=$(n[6]),i=W(),o=v("button"),O(c.$$.fragment),u(s,"class","svelte-1r7dvt7"),u(o,"class","svelte-1r7dvt7"),u(e,"class","error svelte-1r7dvt7")},m(_,k){T(_,e,k),q(t,e,null),w(e,l),w(e,s),w(s,r),w(e,i),w(e,o),q(c,o,null),d=!0,a||(m=V(o,"click",n[62]),a=!0)},p(_,k){(!d||k[0]&64)&&he(r,_[6])},i(_){d||(p(t.$$.fragment,_),p(c.$$.fragment,_),d=!0)},o(_){B(t.$$.fragment,_),B(c.$$.fragment,_),d=!1},d(_){_&&L(e),Z(t),Z(c),a=!1,m()}}}function at(n,e){let t,l,s;function r(){return e[63](e[77])}function i(){return e[64](e[75])}return l=new El({props:{feature:e[75],showPlaceType:e[10],selected:e[14]===e[77],missingIconsCache:e[19],iconsBaseUrl:e[11]}}),l.$on("mouseenter",r),l.$on("focus",i),{key:n,first:null,c(){t=Se(),O(l.$$.fragment),this.first=t},m(o,c){T(o,t,c),q(l,o,c),s=!0},p(o,c){e=o;const d={};c[0]&8192&&(d.feature=e[75]),c[0]&1024&&(d.showPlaceType=e[10]),c[0]&24576&&(d.selected=e[14]===e[77]),c[0]&2048&&(d.iconsBaseUrl=e[11]),l.$set(d)},i(o){s||(p(l.$$.fragment,o),s=!0)},o(o){B(l.$$.fragment,o),s=!1},d(o){o&&L(t),Z(l,o)}}}function Hl(n){let e,t,l,s,r,i,o,c,d,a,m,_,k,b,h,A,F,M,H,J;s=new Wl({}),a=new yt({});let y=n[18]&&it(),S=n[5]===!0&&ot(n);const se=n[53].default,D=we(se,n,n[52],null),C=[Dl,Zl,ql,Ol],R=[];function ee(g,E){var re,ue;return g[17]?0:g[15]?((re=g[13])==null?void 0:re.length)===0?2:g[15]&&((ue=g[13])!=null&&ue.length)?3:-1:1}return~(h=ee(n))&&(A=R[h]=C[h](n)),{c(){e=v("form"),t=v("div"),l=v("button"),O(s.$$.fragment),r=W(),i=v("input"),o=W(),c=v("div"),d=v("button"),O(a.$$.fragment),m=W(),y&&y.c(),_=W(),S&&S.c(),k=W(),D&&D.c(),b=W(),A&&A.c(),u(l,"class","search-button svelte-1r7dvt7"),u(l,"type","button"),u(i,"placeholder",n[8]),u(i,"aria-label",n[8]),u(i,"class","svelte-1r7dvt7"),u(d,"type","button"),u(d,"title",n[3]),u(d,"class","svelte-1r7dvt7"),u(c,"class","clear-button-container svelte-1r7dvt7"),ae(c,"displayable",n[1]!==""),u(t,"class","input-group svelte-1r7dvt7"),u(e,"tabindex","0"),u(e,"class",F=Ve(n[2])+" svelte-1r7dvt7"),ae(e,"can-collapse",n[4]&&n[1]==="")},m(g,E){T(g,e,E),w(e,t),w(t,l),q(s,l,null),w(t,r),w(t,i),n[55](i),Te(i,n[1]),w(t,o),w(t,c),w(c,d),q(a,d,null),w(c,m),y&&y.m(c,null),w(t,_),S&&S.m(t,null),w(t,k),D&&D.m(t,null),w(e,b),~h&&R[h].m(e,null),M=!0,H||(J=[V(l,"click",n[54]),V(i,"input",n[56]),V(i,"focus",n[57]),V(i,"blur",n[58]),V(i,"keydown",n[21]),V(i,"input",n[59]),V(d,"click",n[60]),V(e,"submit",Kt(n[20]))],H=!0)},p(g,E){(!M||E[0]&256)&&u(i,"placeholder",g[8]),(!M||E[0]&256)&&u(i,"aria-label",g[8]),E[0]&2&&i.value!==g[1]&&Te(i,g[1]),(!M||E[0]&8)&&u(d,"title",g[3]),g[18]?y?E[0]&262144&&p(y,1):(y=it(),y.c(),p(y,1),y.m(c,null)):y&&(_e(),B(y,1,1,()=>{y=null}),ge()),(!M||E[0]&2)&&ae(c,"displayable",g[1]!==""),g[5]===!0?S?(S.p(g,E),E[0]&32&&p(S,1)):(S=ot(g),S.c(),p(S,1),S.m(t,k)):S&&(_e(),B(S,1,1,()=>{S=null}),ge()),D&&D.p&&(!M||E[1]&2097152)&&ve(D,se,g,g[52],M?Me(se,g[52],E,null):pe(g[52]),null);let re=h;h=ee(g),h===re?~h&&R[h].p(g,E):(A&&(_e(),B(R[re],1,1,()=>{R[re]=null}),ge()),~h?(A=R[h],A?A.p(g,E):(A=R[h]=C[h](g),A.c()),p(A,1),A.m(e,null)):A=null),(!M||E[0]&4&&F!==(F=Ve(g[2])+" svelte-1r7dvt7"))&&u(e,"class",F),(!M||E[0]&22)&&ae(e,"can-collapse",g[4]&&g[1]==="")},i(g){M||(p(s.$$.fragment,g),p(a.$$.fragment,g),p(y),p(S),p(D,g),p(A),M=!0)},o(g){B(s.$$.fragment,g),B(a.$$.fragment,g),B(y),B(S),B(D,g),B(A),M=!1},d(g){g&&L(e),Z(s),n[55](null),Z(a),y&&y.d(),S&&S.d(),D&&D.d(g),~h&&R[h].d(),H=!1,Le(J)}}}function Nl(n,e,t){const l=e[1],s=e[0],r=l-s;return n===l&&t?n:((n-s)%r+r)%r+s}function ft(n){let e=[...n];return e[2]<e[0]&&(e[2]+=360),e}function jl(n,e,t){let l,{$$slots:s={},$$scope:r}=e,{class:i=void 0}=e,{apiKey:o}=e,{bbox:c=void 0}=e,{clearButtonTitle:d="clear"}=e,{clearOnBlur:a=!1}=e,{collapsed:m=!1}=e,{country:_=void 0}=e,{debounceSearch:k=200}=e,{enableReverse:b=!1}=e,{errorMessage:h="Something went wrongâ€¦"}=e,{filter:A=()=>!0}=e,{flyTo:F=!0}=e,{fuzzyMatch:M=!0}=e,{language:H=void 0}=e,{limit:J=void 0}=e,{mapController:y=void 0}=e,{minLength:S=2}=e,{noResultsMessage:se="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:D="Search"}=e,{proximity:C=void 0}=e,{reverseActive:R=b==="always"}=e,{reverseButtonTitle:ee="toggle reverse geocoding"}=e,{searchValue:g=""}=e,{showFullGeometry:E=!0}=e,{showPlaceType:re="ifNeeded"}=e,{showResultsWhileTyping:ue=!0}=e,{trackProximity:Be=!0}=e,{types:ce=void 0}=e,{zoom:Re=16}=e,{maxZoom:Ce=18}=e,{apiUrl:We="https://api.maptiler.com/geocoding"}=e,{fetchParameters:Ge={}}=e,{iconsBaseUrl:je="https://cdn.maptiler.com/maptiler-geocoding-control/v0.0.99/icons/"}=e;function wt(){te.focus()}function vt(){te.blur()}function Ke(f,U=!0){t(1,g=f),U?(t(14,z=-1),Qe()):(qe(),setTimeout(()=>{te.focus(),te.select()}))}let be=!1,P,Q,I,Je="",te,z=-1,le,Ie=[],de,ye,Pe,Fe;const pt=new Set,ie=Jt();gt(()=>{y&&(y.setEventHandler(void 0),y.indicateReverse(!1),y.setSelectedMarker(-1),y.setMarkers(void 0,void 0))});function Qe(f){if(ye&&(clearTimeout(ye),ye=void 0),z>-1&&P)t(49,I=P[z]),t(1,g=I.place_name.replace(/,.*/,"")),t(17,le=void 0),t(48,Q=void 0),t(14,z=-1);else if(g){const U=f||!Ye();Oe(g,{exact:!0}).then(()=>{t(48,Q=P),t(49,I=void 0),U&&Mt()}).catch(ne=>t(17,le=ne))}}function Ye(){return/^-?\d+(\.\d+)?,-?\d+(\.\d+)?$/.test(g)}async function Oe(f,{byId:U=!1,exact:ne=!1}={}){t(17,le=void 0);const ke=Ye(),x=new URLSearchParams;H!=null&&x.set("language",Array.isArray(H)?H.join(","):H),ce&&x.set("types",ce.join(",")),ke||(c&&x.set("bbox",c.map(oe=>oe.toFixed(6)).join(",")),_&&x.set("country",Array.isArray(_)?_.join(","):_)),U||(C&&x.set("proximity",C.map(oe=>oe.toFixed(6)).join(",")),(ne||!ue)&&x.set("autocomplete","false"),x.set("fuzzyMatch",String(M))),J!==void 0&&(!ke||(ce==null?void 0:ce.length)===1)&&x.set("limit",String(J)),x.set("key",o);const me=We+"/"+encodeURIComponent(f)+".json?"+x.toString();if(me===Je){U?(t(13,P=void 0),t(49,I=Ie[0])):t(13,P=Ie);return}Je=me,de==null||de.abort();const Y=new AbortController;t(18,de=Y);let De;try{De=await fetch(me,{signal:Y.signal,...Ge}).finally(()=>{Y===de&&t(18,de=void 0)})}catch(oe){if(oe&&typeof oe=="object"&&"name"in oe&&oe.name==="AbortError")return;throw new Error}if(!De.ok)throw new Error;const He=await De.json();ie("response",{url:me,featureCollection:He}),U?(t(13,P=void 0),t(49,I=He.features[0]),Ie=[I]):(t(13,P=He.features.filter(A)),Ie=P,ke&&te.focus())}function Mt(){var ne,ke,x,me;if(!(Q!=null&&Q.length)||!F)return;const f=[180,90,-180,-90],U=!Q.some(Y=>!Y.matching_text);for(const Y of Q)(U||!Y.matching_text)&&(f[0]=Math.min(f[0],((ne=Y.bbox)==null?void 0:ne[0])??Y.center[0]),f[1]=Math.min(f[1],((ke=Y.bbox)==null?void 0:ke[1])??Y.center[1]),f[2]=Math.max(f[2],((x=Y.bbox)==null?void 0:x[2])??Y.center[0]),f[3]=Math.max(f[3],((me=Y.bbox)==null?void 0:me[3])??Y.center[1]));y&&Q.length>0&&(I&&f[0]===f[2]&&f[1]===f[3]?y.flyTo(I.center,Re):y.fitBounds(ft(f),50,Ce))}function Ct(f){t(0,R=b==="always"),Ke(Nl(f[0],[-180,180],!0).toFixed(6)+","+f[1].toFixed(6))}function Tt(f){if(!P)return;let U=f.key==="ArrowDown"?1:f.key==="ArrowUp"?-1:0;U?(z===-1&&U===-1&&t(14,z=P.length),t(14,z+=U),z>=P.length&&t(14,z=-1),f.preventDefault()):["ArrowLeft","ArrowRight","Home","End"].includes(f.key)&&t(14,z=-1)}function qe(f=!0){if(t(17,le=void 0),ue){if(ye&&clearTimeout(ye),g.length<S)return;const U=g;ye=window.setTimeout(()=>{Oe(U).catch(ne=>t(17,le=ne))},f?k:0)}else t(13,P=void 0),t(17,le=void 0)}function Ze(f){t(49,I=f),t(1,g=f.place_name),t(14,z=-1)}const Lt=()=>te.focus();function St(f){Ne[f?"unshift":"push"](()=>{te=f,t(16,te)})}function Bt(){g=this.value,t(1,g),t(12,be),t(27,a)}const Rt=()=>t(12,be=!0),It=()=>t(12,be=!1),Pt=()=>qe(),At=()=>{t(1,g=""),te.focus()},Et=()=>t(0,R=!R),zt=()=>t(17,le=void 0),Ut=f=>t(14,z=f),Vt=f=>Ze(f),Wt=()=>t(14,z=-1),Gt=()=>{};return n.$$set=f=>{"class"in f&&t(2,i=f.class),"apiKey"in f&&t(25,o=f.apiKey),"bbox"in f&&t(26,c=f.bbox),"clearButtonTitle"in f&&t(3,d=f.clearButtonTitle),"clearOnBlur"in f&&t(27,a=f.clearOnBlur),"collapsed"in f&&t(4,m=f.collapsed),"country"in f&&t(28,_=f.country),"debounceSearch"in f&&t(29,k=f.debounceSearch),"enableReverse"in f&&t(5,b=f.enableReverse),"errorMessage"in f&&t(6,h=f.errorMessage),"filter"in f&&t(30,A=f.filter),"flyTo"in f&&t(31,F=f.flyTo),"fuzzyMatch"in f&&t(32,M=f.fuzzyMatch),"language"in f&&t(33,H=f.language),"limit"in f&&t(34,J=f.limit),"mapController"in f&&t(35,y=f.mapController),"minLength"in f&&t(36,S=f.minLength),"noResultsMessage"in f&&t(7,se=f.noResultsMessage),"placeholder"in f&&t(8,D=f.placeholder),"proximity"in f&&t(24,C=f.proximity),"reverseActive"in f&&t(0,R=f.reverseActive),"reverseButtonTitle"in f&&t(9,ee=f.reverseButtonTitle),"searchValue"in f&&t(1,g=f.searchValue),"showFullGeometry"in f&&t(37,E=f.showFullGeometry),"showPlaceType"in f&&t(10,re=f.showPlaceType),"showResultsWhileTyping"in f&&t(38,ue=f.showResultsWhileTyping),"trackProximity"in f&&t(39,Be=f.trackProximity),"types"in f&&t(40,ce=f.types),"zoom"in f&&t(41,Re=f.zoom),"maxZoom"in f&&t(42,Ce=f.maxZoom),"apiUrl"in f&&t(43,We=f.apiUrl),"fetchParameters"in f&&t(44,Ge=f.fetchParameters),"iconsBaseUrl"in f&&t(11,je=f.iconsBaseUrl),"$$scope"in f&&t(52,r=f.$$scope)},n.$$.update=()=>{if(n.$$.dirty[1]&256&&(Be||t(24,C=void 0)),n.$$.dirty[0]&134221824&&setTimeout(()=>{t(15,Pe=be),a&&!be&&t(1,g="")}),n.$$.dirty[0]&8194|n.$$.dirty[1]&32&&g.length<S&&(t(49,I=void 0),t(13,P=void 0),t(17,le=void 0),t(48,Q=P)),n.$$.dirty[1]&262208&&E&&I&&!I.address&&I.geometry.type==="Point"&&Oe(I.id,{byId:!0}).catch(f=>t(17,le=f)),n.$$.dirty[1]&789521&&(y&&I&&I.id!==Fe&&F&&(!I.bbox||I.bbox[0]===I.bbox[2]&&I.bbox[1]===I.bbox[3]?y.flyTo(I.center,I.id.startsWith("poi.")||I.id.startsWith("address.")?Ce:Re):y.fitBounds(ft(I.bbox),50,Ce),t(13,P=void 0),t(48,Q=void 0),t(14,z=-1)),t(50,Fe=I==null?void 0:I.id)),n.$$.dirty[0]&8192|n.$$.dirty[1]&131072&&Q!==P&&t(48,Q=void 0),n.$$.dirty[1]&393232&&y&&y.setMarkers(Q,I),n.$$.dirty[0]&2&&t(14,z=-1),n.$$.dirty[0]&40961|n.$$.dirty[1]&272&&y&&y.setEventHandler(f=>{switch(f.type){case"mapClick":R&&Ct(f.coordinates);break;case"proximityChange":t(24,C=Be?f.proximity:void 0);break;case"markerClick":{const U=P==null?void 0:P.find(ne=>ne.id===f.id);U&&Ze(U)}break;case"markerMouseEnter":t(14,z=Pe?(P==null?void 0:P.findIndex(U=>U.id===f.id))??-1:-1);break;case"markerMouseLeave":t(14,z=-1);break}}),n.$$.dirty[0]&16384|n.$$.dirty[1]&16&&(y==null||y.setSelectedMarker(z)),n.$$.dirty[0]&24576&&t(51,l=P==null?void 0:P[z]),n.$$.dirty[0]&2|n.$$.dirty[1]&16){const f=/^(-?\d+(?:\.\d*)?),(-?\d+(?:\.\d*)?)$/.exec(g);y==null||y.setReverseMarker(f?[Number(f[1]),Number(f[2])]:void 0)}n.$$.dirty[1]&1048576&&ie("select",l),n.$$.dirty[1]&262144&&ie("pick",I),n.$$.dirty[0]&40960&&ie("optionsVisibilityChange",Pe&&!!P),n.$$.dirty[0]&8192&&ie("featuresListed",P),n.$$.dirty[1]&131072&&ie("featuresMarked",Q),n.$$.dirty[0]&1&&ie("reverseToggle",R),n.$$.dirty[0]&2&&ie("queryChange",g),n.$$.dirty[0]&1|n.$$.dirty[1]&16&&y&&y.indicateReverse(R)},[R,g,i,d,m,b,h,se,D,ee,re,je,be,P,z,Pe,te,le,de,pt,Qe,Tt,qe,Ze,C,o,c,a,_,k,A,F,M,H,J,y,S,E,ue,Be,ce,Re,Ce,We,Ge,wt,vt,Ke,Q,I,Fe,l,r,s,Lt,St,Bt,Rt,It,Pt,At,Et,zt,Ut,Vt,Wt,Gt]}class Kl extends N{constructor(e){super(),j(this,e,jl,Hl,K,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:24,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:37,showPlaceType:10,showResultsWhileTyping:38,trackProximity:39,types:40,zoom:41,maxZoom:42,apiUrl:43,fetchParameters:44,iconsBaseUrl:11,focus:45,blur:46,setQuery:47},null,[-1,-1,-1])}get focus(){return this.$$.ctx[45]}get blur(){return this.$$.ctx[46]}get setQuery(){return this.$$.ctx[47]}}function ut(n){let e,t,l,s;return t=new Kl({props:{mapController:n[1],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){e=v("div"),O(t.$$.fragment),u(e,"class",l=Ve(n[0])+" svelte-13xba41")},m(r,i){T(r,e,i),q(t,e,null),s=!0},p(r,i){const o={};i&2&&(o.mapController=r[1]),t.$set(o),(!s||i&1&&l!==(l=Ve(r[0])+" svelte-13xba41"))&&u(e,"class",l)},i(r){s||(p(t.$$.fragment,r),s=!0)},o(r){B(t.$$.fragment,r),s=!1},d(r){r&&L(e),Z(t)}}}function Jl(n){let e,t,l=n[1]&&ut(n);return{c(){l&&l.c(),e=Se()},m(s,r){l&&l.m(s,r),T(s,e,r),t=!0},p(s,[r]){s[1]?l?(l.p(s,r),r&2&&p(l,1)):(l=ut(s),l.c(),p(l,1),l.m(e.parentNode,e)):l&&(_e(),B(l,1,1,()=>{l=null}),ge())},i(s){t||(p(l),t=!0)},o(s){B(l),t=!1},d(s){s&&L(e),l&&l.d(s)}}}function Ql(n,e,t){let l;Ue(n,ht,i=>t(2,l=i));let{position:s="top-left"}=e,r;return Xt(()=>{t(1,r=xt(l,$t))}),n.$$set=i=>{"position"in i&&t(0,s=i.position)},[s,r]}class hn extends N{constructor(e){super(),j(this,e,Ql,Jl,K,{position:0})}}function ct(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return n.geometry.coordinates;if(n.type==="Point")return n.coordinates}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return n;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function bn(n){if(Array.isArray(n))return n;if(n.type==="Feature"){if(n.geometry!==null)return n.geometry.coordinates}else if(n.coordinates)return n.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function yn(n,e){return n.type==="FeatureCollection"?"FeatureCollection":n.type==="GeometryCollection"?"GeometryCollection":n.type==="Feature"&&n.geometry!==null?n.geometry.type:n.type}function Yl(n,e,t){t===void 0&&(t={});var l=ct(n),s=ct(e),r=Ae(s[1]-l[1]),i=Ae(s[0]-l[0]),o=Ae(l[1]),c=Ae(s[1]),d=Math.pow(Math.sin(r/2),2)+Math.pow(Math.sin(i/2),2)*Math.cos(o)*Math.cos(c);return el(2*Math.atan2(Math.sqrt(d),Math.sqrt(1-d)),t.units)}function kn(n,e){return e===void 0&&(e={}),tl(n,function(t,l){var s=l.geometry.coordinates;return t+Yl(s[0],s[1],e)},0)}const Xl={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black",streetview:"blue",measuringLine:"cyan"},wn=10,vn=10;function xl(n){let e;return{c(){e=$("Luc Chaissac")},m(t,l){T(t,e,l)},d(t){t&&L(e)}}}function $l(n){let e,t,l,s,r,i,o,c,d;return c=new ll({props:{href:"https://icon-icons.com/icon/screenshot-cursor-camera/100181",$$slots:{default:[xl]},$$scope:{ctx:n}}}),{c(){e=v("ul"),t=v("li"),t.innerHTML=`<b>Click</b>
    on the map to open a new tab with a 3rd-party imagery provider`,l=W(),s=v("li"),s.innerHTML=`Press <b>Escape</b>
    to exit this mode`,r=W(),i=v("li"),o=$("Cursor by "),O(c.$$.fragment)},m(a,m){T(a,e,m),w(e,t),w(e,l),w(e,s),w(e,r),w(e,i),w(i,o),q(c,i,null),d=!0},p(a,[m]){const _={};m&1&&(_.$$scope={dirty:m,ctx:a}),c.$set(_)},i(a){d||(p(c.$$.fragment,a),d=!0)},o(a){B(c.$$.fragment,a),d=!1},d(a){a&&L(e),Z(c)}}}class en extends N{constructor(e){super(),j(this,e,null,$l,K,{})}}const tn="/atip/new_boundaries/assets/camera_cursor-824d29b6.svg",{window:ln}=rl;function dt(n){let e,t,l,s;const r=[sn,nn],i=[];function o(c,d){return c[0]?0:1}return e=o(n),t=i[e]=r[e](n),{c(){t.c(),l=Se()},m(c,d){i[e].m(c,d),T(c,l,d),s=!0},p(c,d){let a=e;e=o(c),e===a?i[e].p(c,d):(_e(),B(i[a],1,1,()=>{i[a]=null}),ge(),t=i[e],t?t.p(c,d):(t=i[e]=r[e](c),t.c()),p(t,1),t.m(l.parentNode,l))},i(c){s||(p(t),s=!0)},o(c){B(t),s=!1},d(c){c&&L(l),i[e].d(c)}}}function nn(n){let e,t;return e=new bt({props:{$$slots:{default:[rn]},$$scope:{ctx:n}}}),e.$on("click",n[6]),{c(){O(e.$$.fragment)},m(l,s){q(e,l,s),t=!0},p(l,s){const r={};s&4096&&(r.$$scope={dirty:s,ctx:l}),e.$set(r)},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function sn(n){let e,t,l,s,r,i,o;e=new bt({props:{$$slots:{default:[on]},$$scope:{ctx:n}}}),e.$on("click",n[4]);function c(a){n[5](a)}let d={legend:"Source",id:"streetViewImagery",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return n[2].streetViewImagery!==void 0&&(d.value=n[2].streetViewImagery),l=new sl({props:d}),Ne.push(()=>mt(l,"value",c)),i=new vl({props:{label:"Help",$$slots:{default:[an]},$$scope:{ctx:n}}}),{c(){O(e.$$.fragment),t=W(),O(l.$$.fragment),r=W(),O(i.$$.fragment)},m(a,m){q(e,a,m),T(a,t,m),q(l,a,m),T(a,r,m),q(i,a,m),o=!0},p(a,m){const _={};m&4096&&(_.$$scope={dirty:m,ctx:a}),e.$set(_);const k={};!s&&m&4&&(s=!0,k.value=a[2].streetViewImagery,_t(()=>s=!1)),l.$set(k);const b={};m&4096&&(b.$$scope={dirty:m,ctx:a}),i.$set(b)},i(a){o||(p(e.$$.fragment,a),p(l.$$.fragment,a),p(i.$$.fragment,a),o=!0)},o(a){B(e.$$.fragment,a),B(l.$$.fragment,a),B(i.$$.fragment,a),o=!1},d(a){a&&(L(t),L(r)),Z(e,a),Z(l,a),Z(i,a)}}}function rn(n){let e;return{c(){e=$("Enable Street View")},m(t,l){T(t,e,l)},d(t){t&&L(e)}}}function on(n){let e;return{c(){e=$("Disable Street View")},m(t,l){T(t,e,l)},d(t){t&&L(e)}}}function an(n){let e,t;return e=new en({}),{c(){O(e.$$.fragment)},m(l,s){q(e,l,s),t=!0},i(l){t||(p(e.$$.fragment,l),t=!0)},o(l){B(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function fn(n){let e,t,l,s,r=n[1]&&dt(n);return{c(){r&&r.c(),e=Se()},m(i,o){r&&r.m(i,o),T(i,e,o),t=!0,l||(s=V(ln,"keydown",n[3]),l=!0)},p(i,[o]){i[1]?r?(r.p(i,o),o&2&&p(r,1)):(r=dt(i),r.c(),p(r,1),r.m(e.parentNode,e)):r&&(_e(),B(r,1,1,()=>{r=null}),ge())},i(i){t||(p(r),t=!0)},o(i){B(r),t=!1},d(i){i&&L(e),r&&r.d(i),l=!1,s()}}}function un(n,e,t){let l,s;Ue(n,$e,h=>t(2,l=h)),Ue(n,ht,h=>t(8,s=h));let{enabled:r}=e,{showControls:i=!0}=e,o=[];function c(){s.on("click",a),s.getCanvas().style.cursor=`url(${tn}), auto`,o=nl();for(let h of o)h.setProperty(s,"line-color",Xl.streetview)}function d(){s.off("click",a),s.getCanvas().style.cursor="inherit";for(let h of o)h.returnToDefaultPaintValues(s);o=[]}gt(d);function a(h){if(!r)return;let A=h.lngLat.lng,F=h.lngLat.lat;l.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${F},${A}&cbp=11,0,0,0,0`,"_blank"):l.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${F}~${A}&style=x`,"_blank")}function m(h){r&&h.key=="Escape"&&(h.stopPropagation(),t(0,r=!1))}const _=()=>t(0,r=!1);function k(h){n.$$.not_equal(l.streetViewImagery,h)&&(l.streetViewImagery=h,$e.set(l))}const b=()=>t(0,r=!0);return n.$$set=h=>{"enabled"in h&&t(0,r=h.enabled),"showControls"in h&&t(1,i=h.showControls)},n.$$.update=()=>{n.$$.dirty&1&&(r?c():d())},[r,i,l,m,_,k,b]}class pn extends N{constructor(e){super(),j(this,e,un,fn,K,{enabled:0,showControls:1})}}export{dn as B,vl as C,hn as G,pn as S,vn as a,Xl as b,wn as c,bn as d,Yl as e,yn as f,ct as g,mn as h,_n as i,en as j,gn as k,kn as l,hl as m};
