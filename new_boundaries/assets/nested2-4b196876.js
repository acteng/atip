import{S as z,i as q,s as H,au as Ir,b as V,c as X,e as A,d as C,g as h,h as x,j as $,m as b,w as xt,l as K,t as m,n as d,o as p,p as v,aQ as Mt,aR as Dt,aS as Nt,aT as Rt,_ as je,$ as ae,a0 as fe,aU as ir,aV as fn,aW as Pr,q as Ze,am as jr,aX as un,aY as Fr,aZ as Er,I as te,a_ as Mr,a$ as Dr,b0 as nt,u as w,k,f as en,an as Nr,C as tn,aC as ar,r as nn,F as fr,a as Vt,v as cn,D as B,aP as U,aF as He,aE as ye,aG as It,b1 as ie,P as R,b2 as $e,A as W,Q as Y,B as ue,Z,b3 as ee,G as yt,R as ur,b4 as rn,b5 as ln,E as cr,ap as Rr,b6 as $n,O as Br,aK as pn,V as Gr,W as mn,X as _n,Y as Ct,aO as gn,L as Hr,M as Ur,x as zr}from"./index-78115c78.js";import{i as Pt,C as Ae,e as St,f as le,c as jt,h as qr,S as Wr,B as Vr,a as ht,b as Xr,G as Kr}from"./StreetViewTool-90d1abb4.js";import{L as Yr,s as dn,c as $r,a as ge,C as Ue,Z as Zr}from"./schemas-256c31f0.js";import{a as Me,F as Jr}from"./Popup-da04d157.js";import{P as re}from"./Popup-81f06f67.js";import{L as Qr,a as xr}from"./LineMeasureController-b6c7c7d5.js";const el="/atip/new_boundaries/assets/help-d011708a.svg";function tl(r){let e,n;const t=r[1].default,l=Mt(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),x(e,"class","govuk-prose")},m(o,i){$(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Dt(l,t,o,o[4],n?Rt(t,o[4],i,null):Nt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function nl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[tl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Ir({props:a}),V.push(()=>X(t,"open",s)),{c(){e=A("button"),e.innerHTML=`<img src="${el}" title="Help" alt="Help"/>`,n=C(),h(t.$$.fragment),x(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,i||(u=xt(e,"click",r[2]),i=!0)},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,g.open=f[0],K(()=>l=!1)),t.$set(g)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),i=!1,u()}}}function rl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class oe extends z{constructor(e){super(),q(this,e,rl,nl,H,{})}}function hn(r){let e=r[0],n,t,l=bn(r);return{c(){l.c(),n=je()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&H(e,e=o[0])?(ae(),d(l,1,1,te),fe(),l=bn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l.d(o)}}}function bn(r){let e;const n=r[9].default,t=Mt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Dt(t,n,l,l[8],e?Rt(n,l[8],o,null):Nt(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function ll(r){let e,n,t=r[0]&&hn(r);return{c(){t&&t.c(),e=je()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=hn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ae(),d(t,1,1,()=>{t=null}),fe())},i(l){n||(m(t),n=!0)},o(l){d(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function ol(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=ir("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!fn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let _=new Mr;fn.addProtocol("pmtiles",_.tile)}const{map:c,self:g}=Pr();return Ze(r,c,_=>n(7,t=_)),Ze(r,g,_=>n(0,l=_)),jr(()=>{if(l){let _=l;un(g,l=null,l),Fr().then(()=>{t!=null&&t.loaded()&&(t==null||t.removeSource(_))})}}),r.$$set=_=>{"id"in _&&n(3,u=_.id),"url"in _&&n(4,s=_.url),"tiles"in _&&n(5,a=_.tiles),"promoteId"in _&&n(6,f=_.promoteId),"$$scope"in _&&n(8,i=_.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&t&&l!==u&&(l&&t.removeSource(l),un(g,l=u,l),t.addSource(l,Er({type:"vector",url:s,tiles:a,promoteId:f})))},[l,c,g,u,s,a,f,t,i,o]}class ce extends z{constructor(e){super(),q(this,e,ol,ll,H,{id:3,url:4,tiles:5,promoteId:6})}}function sl(r){let e;const n=r[15].default,t=Mt(n,r,r[23],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&8388608)&&Dt(t,n,l,l[23],e?Rt(n,l[23],o,null):Nt(l[23]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function il(r){let e,n,t;function l(i){r[16](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],$$slots:{default:[sl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Dr({props:o}),V.push(()=>X(e,"hovered",l)),e.$on("click",r[17]),e.$on("dblclick",r[18]),e.$on("contextmenu",r[19]),e.$on("mouseenter",r[20]),e.$on("mousemove",r[21]),e.$on("mouseleave",r[22]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&8388608&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],K(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function al(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=ir("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:O=void 0}=e,{maxzoom:y=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:S=!1}=e,{hovered:L=null}=e,{eventsIfTopMost:M=!1}=e;function N(D){L=D,n(0,L)}function I(D){nt.call(this,r,D)}function E(D){nt.call(this,r,D)}function P(D){nt.call(this,r,D)}function j(D){nt.call(this,r,D)}function F(D){nt.call(this,r,D)}function G(D){nt.call(this,r,D)}return r.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,i=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,s=D.beforeId),"beforeLayerType"in D&&n(5,a=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,g=D.filter),"applyToClusters"in D&&n(9,_=D.applyToClusters),"minzoom"in D&&n(10,O=D.minzoom),"maxzoom"in D&&n(11,y=D.maxzoom),"hoverCursor"in D&&n(12,T=D.hoverCursor),"manageHoverState"in D&&n(13,S=D.manageHoverState),"hovered"in D&&n(0,L=D.hovered),"eventsIfTopMost"in D&&n(14,M=D.eventsIfTopMost),"$$scope"in D&&n(23,l=D.$$scope)},[L,o,i,u,s,a,f,c,g,_,O,y,T,S,M,t,N,I,E,P,j,F,G,l]}class fl extends z{constructor(e){super(),q(this,e,al,il,H,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14})}}function ul(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cl(r){let e,n,t,l,o=r[0]=="Private (development)"&&ul();return{c(){o&&o.c(),e=C(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated.",t=C(),l=A("p"),l.innerHTML=`Please contact <a href="mailto:dcarlino@turing.ac.uk">Dustin</a>
      and
      <a href="mailto:Peter.York@activetravelengland.gov.uk">Pete</a>
      about any problems, ideas, or feedback for this site.`},m(i,u){o&&o.m(i,u),$(i,e,u),$(i,n,u),$(i,t,u),$(i,l,u)},p:te,d(i){i&&(p(e),p(n),p(t),p(l)),o&&o.d(i)}}}function $l(r){let e,n,t,l,o,i;return o=new oe({props:{$$slots:{default:[cl]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=C(),h(o.$$.fragment)},m(u,s){$(u,e,s),k(e,n),k(e,t),k(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(m(o.$$.fragment,u),i=!0)},o(u){d(o.$$.fragment,u),i=!1},d(u){u&&p(e),v(o)}}}function pl(r){return[en()]}class ml extends z{constructor(e){super(),q(this,e,pl,$l,H,{})}}const _l={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var me=Uint8Array,Ye=Uint16Array,pr=Uint32Array,mr=new me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_r=new me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),gl=new me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),gr=function(r,e){for(var n=new Ye(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new pr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},dr=gr(mr,2),hr=dr[0],dl=dr[1];hr[28]=258,dl[258]=28;var hl=gr(_r,0),bl=hl[0],Xt=new Ye(32768);for(var ne=0;ne<32768;++ne){var Re=(ne&43690)>>>1|(ne&21845)<<1;Re=(Re&52428)>>>2|(Re&13107)<<2,Re=(Re&61680)>>>4|(Re&3855)<<4,Xt[ne]=((Re&65280)>>>8|(Re&255)<<8)>>>1}var vt=function(r,e,n){for(var t=r.length,l=0,o=new Ye(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Ye(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Ye(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,g=c|(1<<f)-1;c<=g;++c)u[Xt[c]>>>s]=a}else for(u=new Ye(t),l=0;l<t;++l)r[l]&&(u[l]=Xt[i[r[l]-1]++]>>>15-r[l]);return u},Tt=new me(288);for(var ne=0;ne<144;++ne)Tt[ne]=8;for(var ne=144;ne<256;++ne)Tt[ne]=9;for(var ne=256;ne<280;++ne)Tt[ne]=7;for(var ne=280;ne<288;++ne)Tt[ne]=8;var br=new me(32);for(var ne=0;ne<32;++ne)br[ne]=5;var vl=vt(Tt,9,1),wl=vt(br,5,1),Bt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},ve=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Gt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},kl=function(r){return(r+7)/8|0},on=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Ye:r.BYTES_PER_ELEMENT==4?pr:me)(n-e);return t.set(r.subarray(e,n)),t},yl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],we=function(r,e,n){var t=new Error(e||yl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,we),!n)throw t;return t},Sl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new me(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new me(t*3));var i=function(et){var Ve=e.length;if(et>Ve){var tt=new me(Math.max(Ve*2,et));tt.set(e),e=tt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,g=n.m,_=n.n,O=t*8;do{if(!f){u=ve(r,s,1);var y=ve(r,s+1,3);if(s+=3,y)if(y==1)f=vl,c=wl,g=9,_=5;else if(y==2){var M=ve(r,s,31)+257,N=ve(r,s+10,15)+4,I=M+ve(r,s+5,31)+1;s+=14;for(var E=new me(I),P=new me(19),j=0;j<N;++j)P[gl[j]]=ve(r,s+j*3,7);s+=N*3;for(var F=Bt(P),G=(1<<F)-1,D=vt(P,F,1),j=0;j<I;){var se=D[ve(r,s,G)];s+=se&15;var T=se>>>4;if(T<16)E[j++]=T;else{var J=0,be=0;for(T==16?(be=3+ve(r,s,3),s+=2,J=E[j-1]):T==17?(be=3+ve(r,s,7),s+=3):T==18&&(be=11+ve(r,s,127),s+=7);be--;)E[j++]=J}}var mt=E.subarray(0,M),de=E.subarray(M);g=Bt(mt),_=Bt(de),f=vt(mt,g,1),c=vt(de,_,1)}else we(1);else{var T=kl(s)+4,S=r[T-4]|r[T-3]<<8,L=T+S;if(L>t){o&&we(0);break}l&&i(a+S),e.set(r.subarray(T,L),a),n.b=a+=S,n.p=s=L*8,n.f=u;continue}if(s>O){o&&we(0);break}}l&&i(a+131072);for(var Qe=(1<<g)-1,_t=(1<<_)-1,xe=s;;xe=s){var J=f[Gt(r,s)&Qe],pe=J>>>4;if(s+=J&15,s>O){o&&we(0);break}if(J||we(2),pe<256)e[a++]=pe;else if(pe==256){xe=s,f=null;break}else{var gt=pe-254;if(pe>264){var j=pe-257,Fe=mr[j];gt=ve(r,s,(1<<Fe)-1)+hr[j],s+=Fe}var Ne=c[Gt(r,s)&_t],We=Ne>>>4;Ne||we(3),s+=Ne&15;var de=bl[We];if(We>3){var Fe=_r[We];de+=Gt(r,s)&(1<<Fe)-1,s+=Fe}if(s>O){o&&we(0);break}l&&i(a+131072);for(var dt=a+gt;a<dt;a+=4)e[a]=e[a-de],e[a+1]=e[a+1-de],e[a+2]=e[a+2-de],e[a+3]=e[a+3-de];a=dt}}n.l=f,n.p=xe,n.b=a,n.f=u,f&&(u=1,n.m=g,n.d=c,n.n=_)}while(!u);return a==e.length?e:on(e,0,a)},Tl=new me(0),Ie=function(r,e){return r[e]|r[e+1]<<8},ke=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Ht=function(r,e){return ke(r,e)+ke(r,e+4)*4294967296};function Ol(r,e){return Sl(r,e)}var Kt=typeof TextDecoder<"u"&&new TextDecoder,Cl=0;try{Kt.decode(Tl,{stream:!0}),Cl=1}catch{}var Al=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,on(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function vr(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(Kt)return Kt.decode(r);var l=Al(r),o=l[0],i=l[1];return i.length&&we(8),o}}var Ll=function(r,e){return e+30+Ie(r,e+26)+Ie(r,e+28)},Il=function(r,e,n){var t=Ie(r,e+28),l=vr(r.subarray(e+46,e+46+t),!(Ie(r,e+8)&2048)),o=e+46+t,i=ke(r,e+20),u=n&&i==4294967295?Pl(r,o):[i,ke(r,e+24),ke(r,e+42)],s=u[0],a=u[1],f=u[2];return[Ie(r,e+10),s,a,l,o+Ie(r,e+30)+Ie(r,e+32),f]},Pl=function(r,e){for(;Ie(r,e)!=1;e+=4+Ie(r,e+2));return[Ht(r,e+12),Ht(r,e+4),Ht(r,e+20)]};function jl(r,e){for(var n={},t=r.length-22;ke(r,t)!=101010256;--t)(!t||r.length-t>65558)&&we(13);var l=Ie(r,t+8);if(!l)return{};var o=ke(r,t+16),i=o==4294967295||l==65535;if(i){var u=ke(r,t-12);i=ke(r,u)==101075792,i&&(l=ke(r,u+32),o=ke(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=Il(r,o,i),c=f[0],g=f[1],_=f[2],O=f[3],y=f[4],T=f[5],S=Ll(r,T);o=y,(!s||s({name:O,size:g,originalSize:_,compression:c}))&&(c?c==8?n[O]=Ol(r.subarray(S,S+g),new me(_)):we(14,"unknown compression type "+c):n[O]=on(r,S,S+g))}return n}function Fl(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Ut):Ut(r)}function Ut(r){var e=new Uint8Array(r),n=jl(e);return Promise.resolve(El(n))}function El(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=vr(r[l])}return e}function Pe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Je(t)===e)return t;n++}}function Ot(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Je(l)===e&&n.push(l),t++}return n}function Ft(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Je(l)===e&&n(l,t):n(l,t),t++}}function Ml(r,e,n){var t=[];return Ft(r,e,function(l,o){t.push(n(l,o))}),t}var Dl=/.+\:/;function Je(r){return r.tagName.replace(Dl,"")}function wr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Je(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=wr(r.childNodes[t]),t++;return e+="</"+Je(r)+">",e}function Nl(r){var e=r.documentElement,n=Pe(e,"sheetData"),t=[];return Ft(n,"row",function(l){Ft(l,"c",function(o){t.push(o)})}),t}function Rl(r,e){return Pe(e,"v")}function Bl(r,e){if(e.firstChild&&Je(e.firstChild)==="is"&&e.firstChild.firstChild&&Je(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Gl(r){var e=r.documentElement,n=Pe(e,"dimension");if(n)return n.getAttribute("ref")}function Hl(r){var e=r.documentElement,n=Pe(e,"cellStyleXfs");return n?Ot(n,"xf"):[]}function Ul(r){var e=r.documentElement,n=Pe(e,"cellXfs");return n?Ot(n,"xf"):[]}function zl(r){var e=r.documentElement,n=Pe(e,"numFmts");return n?Ot(n,"numFmt"):[]}function ql(r){var e=r.documentElement;return Ml(e,"si",function(n){var t=Pe(n,"t");if(t)return t.textContent;var l="";return Ft(n,"r",function(o){l+=Pe(o,"t").textContent}),l})}function Wl(r){var e=r.documentElement;return Pe(e,"workbookPr")}function Vl(r){var e=r.documentElement;return Ot(e,"Relationship")}function Xl(r){var e=r.documentElement,n=Pe(e,"sheets");return Ot(n,"sheet")}function Kl(r,e){var n=e.createDocument(r),t={},l=Wl(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return Xl(n).forEach(o),t}function Yl(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=zt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=zt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=zt(u);break}};return Vl(n).forEach(l),t}function zt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function vn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function wn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?vn(Object(n),!0).forEach(function(t){Zl(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Zl(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Jl(r,e){if(!r)return{};var n=e.createDocument(r),t=Hl(n).map(qt),l=zl(n).map(Ql).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?wn(wn({},t[u.xfId]),qt(u,l)):qt(u,l)};return Ul(n).map(o)}function Ql(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function qt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function xl(r,e){return r?ql(e.createDocument(r)):[]}function kr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function eo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=to(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function to(r,e){if(r){if(typeof r=="string")return kn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kn(r,e)}}function kn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function no(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(ro.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&so(l.numberFormat.template))return!0}}var ro=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],lo=/^\[\$-414\]/,oo=/;@$/;function so(r){r=r.toLowerCase(),r=r.replace(lo,""),r=r.replace(oo,"");for(var e=r.split(/\W+/),n=eo(e),t;!(t=n()).done;){var l=t.value;if(io.indexOf(l)<0)return!1}return!0}var io=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function ao(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Wt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Wt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Wt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=fo(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var g=Number(r);if(isNaN(g))throw new Error('Invalid "numeric" cell value: '.concat(r));r=g,no(r,o(),i,a)&&(r=kr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function fo(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Wt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var uo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function co(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function $o(r){for(var e=0,n=0;n<r.length;)e*=26,e+=uo.indexOf(r[n]),n++;return e}function yr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),$o(r[0].trim())]}function po(r,e,n,t,l,o,i){var u=yr(r.getAttribute("r")),s=Rl(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:ao(a,f,{getInlineStringValue:function(){return Bl(e,r)},getInlineStringXml:function(){return wr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function mo(r,e,n,t,l,o){var i=Nl(r);return i.length===0?[]:i.map(function(u){return po(u,r,e,n,t,l,o)})}function _o(r,e){return vo(r)||bo(r,e)||ho(r,e)||go()}function go(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ho(r,e){if(r){if(typeof r=="string")return yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yn(r,e)}}function yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function bo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function vo(r){if(Array.isArray(r))return r}function wo(r){var e=Gl(r);if(e)return e=e.split(":").map(yr).map(function(n){var t=_o(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function ko(r,e,n,t,l,o){var i=e.createDocument(r),u=mo(i,e,n,t,l,o),s=wo(i)||co(u);return{cells:u,dimensions:s}}function yo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=So(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function So(r,e){if(r){if(typeof r=="string")return Sn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sn(r,e)}}function Sn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function To(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=yo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Oo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Co(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Co(r,e){if(r){if(typeof r=="string")return Tn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tn(r,e)}}function Tn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ao(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Oo(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Lo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Sr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Io(r,e){return Fo(r)||jo(r,e)||Sr(r,e)||Po()}function Po(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sr(r,e){if(r){if(typeof r=="string")return On(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(r,e)}}function On(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function jo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Fo(r){if(Array.isArray(r))return r}function Eo(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Io(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=Lo(t),g;!(g=c()).done;){var _=g.value,O=_.row-1,y=_.column-1;y<i&&O<u&&(s[O][y]=_.value)}var T=e.rowMap;if(T)for(var S=0;S<s.length;)T[S]=S,S++;return s=To(Ao(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(s=e.transformData(s)),s}function Mo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Do(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Do(r,e){if(r){if(typeof r=="string")return Cn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(r,e)}}function Cn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function An(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function No(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?An(Object(n),!0).forEach(function(t){Ro(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ro(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Bo(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=No({sheet:1},n));var t=function(g){if(!r[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return r[g]},l=Yl(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?xl(t(l.sharedStrings),e):[],i=l.styles?Jl(t(l.styles),e):{},u=Kl(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var g=c.name;return{name:g}});var s=Go(n.sheet,u.sheets);if(!s||!l.sheets[s])throw Ho(n.sheet,u.sheets);var a=ko(t(l.sheets[s]),e,o,i,u,n),f=Eo(a,n);return n.properties?{data:f,properties:u}:f}function Go(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Mo(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Ho(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Yt(r){"@babel/helpers - typeof";return Yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(r)}function Ln(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function Uo(r,e,n){return e&&Ln(r.prototype,e),n&&Ln(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function zo(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function qo(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&wt(r,e)}function Wo(r){var e=Tr();return function(){var t=kt(r),l;if(e){var o=kt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return Vo(this,l)}}function Vo(r,e){if(e&&(Yt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xo(r)}function Xo(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function Zt(r){var e=typeof Map=="function"?new Map:void 0;return Zt=function(t){if(t===null||!Ko(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Lt(t,arguments,kt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),wt(l,t)},Zt(r)}function Lt(r,e,n){return Tr()?Lt=Reflect.construct:Lt=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&wt(a,i.prototype),a},Lt.apply(null,arguments)}function Tr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ko(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function wt(r,e){return wt=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},wt(r,e)}function kt(r){return kt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},kt(r)}var _e=function(r){qo(n,r);var e=Wo(n);function n(t){var l;return zo(this,n),l=e.call(this,"invalid"),l.reason=t,l}return Uo(n)}(Zt(Error));function Yo(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new _e("not_a_number")}if(typeof r!="number")throw new _e("not_a_number");if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return r}function Zo(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return String(r)}throw new _e("not_a_string")}function Jo(r){if(typeof r=="boolean")return r;throw new _e("not_a_boolean")}function Qo(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new _e("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");var t=kr(r,n);if(isNaN(t.valueOf()))throw new _e("out_of_bounds");return t}throw new _e("not_a_date")}function xo(r,e){return ns(r)||ts(r,e)||Or(r,e)||es()}function es(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ts(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ns(r){if(Array.isArray(r))return r}function Jt(r){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(r)}function rs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Or(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Or(r,e){if(r){if(typeof r=="string")return In(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(r,e)}}function In(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Pn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function jn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pn(Object(n),!0).forEach(function(t){ls(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function ls(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Fn={isColumnOriented:!1};function os(r,e,n){n?n=jn(jn({},Fn),n):n=Fn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;fs(e),l&&(r=as(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Cr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var g=rs(a),_;!(_=g()).done;){var O=_.value;O.row=o[O.row-1]+1}return{rows:s,errors:a}}function Cr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var g=f[a],_=r[g],O=Jt(_.type)==="object"&&!Array.isArray(_.type),y=e[t.indexOf(g)];y===void 0&&(y=null);var T=void 0,S=void 0,L=void 0;if(O)T=Cr(_.type,e,n,t,l,o);else if(y===null)T=null;else if(Array.isArray(_.type)){var M=!1,N=is(y).map(function(E){var P=En(E,_,o);return P.error&&(T=E,S=P.error,L=P.reason),P.value!==null&&(M=!0),P.value});S||(T=M?N:null)}else{var I=En(y,_,o);S=I.error,L=I.reason,T=S?y:I.value}!S&&T===null&&_.required&&(S="required"),S?(S={error:S,row:n+1,column:g,value:T},L&&(S.reason=L),_.type&&(S.type=_.type),l.push(S)):(u&&T!==null&&(u=!1),(T!==null||o.includeNullValues)&&(i[_.prop]=T))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function En(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=rt(r,e.parse):e.type?t=ss(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function rt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ss(r,e,n){switch(e){case String:return rt(r,Zo);case Number:return rt(r,Yo);case Date:return rt(r,function(t){return Qo(t,{properties:n.properties})});case Boolean:return rt(r,Jo);default:if(typeof e=="function")return rt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Ar(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Ar(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function is(r){for(var e=[],n=0;n<r.length;){var t=Ar(r,",",n),l=xo(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var as=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function fs(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function Qt(r){"@babel/helpers - typeof";return Qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qt(r)}function Lr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;Qt(o)==="object"&&(o=Object.keys(r[l])[0],i=Lr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var us=["schema","map"];function Mn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function At(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mn(Object(n),!0).forEach(function(t){cs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function cs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function $s(r,e){if(r==null)return{};var n=ps(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ps(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function ms(r,e,n){var t=n.schema,l=n.map,o=$s(n,us);!t&&l&&(t=Lr(l));var i=Bo(r,e,At(At({},o),{},{properties:t||o.properties}));return t?os(i.data,t,At(At({},o),{},{properties:i.properties})):i}function _s(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Fl(r).then(function(n){return ms(n,_l,e)})}function gs(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:l.authority_or_region,capital_scheme_id:l.capital_scheme_id,funding_programme:l.funding_programme});r.features=r.features.filter(t=>ds(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.num_features++,t.properties.funding_programme=l.funding_programme,t.id=n++}return e}function ds(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function hs(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await _s(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Nr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Q={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},Ee=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function bs(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Pt({props:u}),V.push(()=>X(e,"value",i)),e.$on("change",r[2]),l=new Yr({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],K(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function vs(r,e,n){let t;Ze(r,tn,s=>n(4,t=s));let l="interventionType",o=dn("v1");function i(){let s;l=="interventionType"?(s=$r("v1"),n(1,o=dn("v1"))):(s=ar(["get","funding_programme"],{ATF2:Q.atf2,ATF3:Q.atf3,ATF4:Q.atf4},"grey"),n(1,o=[["ATF2",Q.atf2],["ATF3",Q.atf3],["ATF4",Q.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class ws extends z{constructor(e){super(),q(this,e,vs,bs,H,{})}}function ks(r){let e;return{c(){e=w("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ys(r){let e,n,t,l,o,i;return t=new Vt({props:{$$slots:{default:[ks]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=A("input"),n=C(),h(t.$$.fragment),x(e,"type","text"),x(e,"class","govuk-input govuk-input--width-10"),x(e,"id","filterText")},m(u,s){$(u,e,s),cn(e,r[0]),$(u,n,s),b(t,u,s),l=!0,o||(i=xt(e,"input",r[12]),o=!0)},p(u,s){s&1&&e.value!==u[0]&&cn(e,u[0]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){d(t.$$.fragment,u),l=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,i()}}}function Ss(r){let e,n,t,l,o,i,u,s,a,f;function c(y){r[10](y)}let g={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&(g.value=r[3]),e=new Pt({props:g}),V.push(()=>X(e,"value",c));function _(y){r[11](y)}let O={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(O.value=r[4]),l=new Pt({props:O}),V.push(()=>X(l,"value",_)),u=new fr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[ys]},$$scope:{ctx:r}}}),a=new ws({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(y,T){b(e,y,T),$(y,t,T),b(l,y,T),$(y,i,T),b(u,y,T),$(y,s,T),b(a,y,T),f=!0},p(y,T){const S={};T&32&&(S.choices=y[5]),!n&&T&8&&(n=!0,S.value=y[3],K(()=>n=!1)),e.$set(S);const L={};T&64&&(L.choices=y[6]),!o&&T&16&&(o=!0,L.value=y[4],K(()=>o=!1)),l.$set(L);const M={};T&65537&&(M.$$scope={dirty:T,ctx:y}),u.$set(M)},i(y){f||(m(e.$$.fragment,y),m(l.$$.fragment,y),m(u.$$.fragment,y),m(a.$$.fragment,y),f=!0)},o(y){d(e.$$.fragment,y),d(l.$$.fragment,y),d(u.$$.fragment,y),d(a.$$.fragment,y),f=!1},d(y){y&&(p(t),p(i),p(s)),v(e,y),v(l,y),v(u,y),v(a,y)}}}function Ts(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",g,_,O=r[7].other.toLocaleString()+"",y,T;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),g=w(c),_=w(" crossings, "),y=w(O),T=w(`
    other)`)},m(S,L){$(S,e,L),$(S,t,L),$(S,l,L),$(S,i,L),$(S,u,L),$(S,a,L),$(S,f,L),$(S,g,L),$(S,_,L),$(S,y,L),$(S,T,L)},p(S,L){L&2&&n!==(n=S[1].size.toLocaleString()+"")&&B(t,n),L&128&&o!==(o=S[7].route.toLocaleString()+"")&&B(i,o),L&128&&s!==(s=S[7].area.toLocaleString()+"")&&B(a,s),L&128&&c!==(c=S[7].crossing.toLocaleString()+"")&&B(g,c),L&128&&O!==(O=S[7].other.toLocaleString()+"")&&B(y,O)},d(S){S&&(p(e),p(t),p(l),p(i),p(u),p(a),p(f),p(g),p(_),p(y),p(T))}}}function Os(r){let e,n,t;function l(i){r[14](i)}let o={id:"show-schemes",$$slots:{default:[Ts]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new le({props:o}),V.push(()=>X(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65666&&(s.$$scope={dirty:u,ctx:i}),!n&&u&4&&(n=!0,s.checked=i[2],K(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Cs(r){let e,n,t,l;return e=new Ae({props:{label:"Filters",$$slots:{default:[Ss]},$$scope:{ctx:r}}}),t=new St({props:{small:!0,$$slots:{default:[Os]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65657&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65670&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function As(r,e,n){let{schemesGj:t}=e,{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,{show:u=!0}=e,s=[],a="",f=[],c="",g={area:0,route:0,crossing:0,other:0};nn(()=>{let M=new Set,N=new Set;for(let I of l.values())I.authority_or_region&&M.add(I.authority_or_region),I.funding_programme&&N.add(I.funding_programme);n(5,s=Array.from(M.entries())),s.sort(),n(6,f=Array.from(N.entries())),f.sort()});function _(M,N,I){let E=M.toLowerCase(),P=F=>{var G,D;if(E&&!((G=F.properties.name)!=null&&G.toLowerCase().includes(E))&&!((D=F.properties.description)!=null&&D.toLowerCase().includes(E)))return!1;if(N||I){let se=l.get(F.properties.scheme_reference);if(N&&se.authority_or_region!=N||I&&se.funding_programme!=I)return!1}return!0};n(1,o=new Set(t.features.filter(P).map(F=>F.properties.scheme_reference))),n(7,g={area:0,route:0,crossing:0,other:0});let j=F=>{var G,D;return!(!o.has(F.properties.scheme_reference)||E&&!((G=F.properties.name)!=null&&G.toLowerCase().includes(E))&&!((D=F.properties.description)!=null&&D.toLowerCase().includes(E)))};for(let F of t.features)j(F)?(delete F.properties.hide_while_editing,n(7,g[F.properties.intervention_type]++,g)):F.properties.hide_while_editing=!0;n(8,t),n(7,g)}function O(M){a=M,n(3,a)}function y(M){c=M,n(4,c)}function T(){i=this.value,n(0,i)}const S=()=>n(0,i="");function L(M){u=M,n(2,u)}return r.$$set=M=>{"schemesGj"in M&&n(8,t=M.schemesGj),"schemes"in M&&n(9,l=M.schemes),"schemesToBeShown"in M&&n(1,o=M.schemesToBeShown),"filterText"in M&&n(0,i=M.filterText),"show"in M&&n(2,u=M.show)},r.$$.update=()=>{r.$$.dirty&25&&_(i,a,c)},[i,o,u,a,c,s,f,g,t,l,O,y,T,S,L]}class Ls extends z{constructor(e){super(),q(this,e,As,Cs,H,{schemesGj:8,schemes:9,schemesToBeShown:1,filterText:0,show:2})}}function Is(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ps(r){let e,n,t,l,o;return t=new U({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Is]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,u){$(i,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(m(t.$$.fragment,i),o=!0)},o(i){d(t.$$.fragment,i),o=!1},d(i){i&&p(e),v(t)}}}class De extends z{constructor(e){super(),q(this,e,null,Ps,H,{})}}function Dn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Nn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Rn(r){let e,n;return{c(){e=A("span"),n=w(` 
    `),ye(e,"background",r[5]),ye(e,"width","100%"),ye(e,"border","1px solid black")},m(t,l){$(t,e,l),k(e,n)},p(t,l){l&1&&ye(e,"background",t[5])},d(t){t&&p(e)}}}function Bn(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&B(t,n)},d(l){l&&p(e)}}}function js(r){let e,n,t,l=He(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Rn(Nn(r,l,s));let i=He(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Bn(Dn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=C(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();ye(e,"display","flex"),ye(t,"display","flex"),ye(t,"justify-content","space-between")},m(s,a){$(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(s,n,a),$(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=He(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Nn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Rn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=He(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Dn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Bn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:te,o:te,d(s){s&&(p(e),p(n),p(t)),It(o,s),It(u,s)}}}function Fs(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class ze extends z{constructor(e){super(),q(this,e,Fs,js,H,{colorScale:0,limits:1})}}function Gn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Es(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ms(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ds(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ns(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rs(r){let e,n,t,l,o,i,u,s,a,f,c,g;return t=new U({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ms]},$$scope:{ctx:r}}}),o=new U({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ds]},$$scope:{ctx:r}}}),f=new U({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ns]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),s=A("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(_,O){$(_,e,O),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(_,u,O),$(_,s,O),k(s,a),b(f,s,null),k(s,c),g=!0},p(_,O){const y={};O&65536&&(y.$$scope={dirty:O,ctx:_}),t.$set(y);const T={};O&65536&&(T.$$scope={dirty:O,ctx:_}),o.$set(T);const S={};O&65536&&(S.$$scope={dirty:O,ctx:_}),f.$set(S)},i(_){g||(m(t.$$.fragment,_),m(o.$$.fragment,_),m(f.$$.fragment,_),g=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(f.$$.fragment,_),g=!1},d(_){_&&(p(e),p(u),p(s)),v(t),v(o),v(f)}}}function Bs(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Rs]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Hn(r){let e,n;return e=new ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gs(r){let e;return{c(){e=w("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hs(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Us(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zs(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qs(r){let e,n,t,l,o,i,u,s,a,f,c,g,_,O;return o=new U({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Hs]},$$scope:{ctx:r}}}),u=new U({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Us]},$$scope:{ctx:r}}}),g=new U({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[zs]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=C(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=w("License: "),h(g.$$.fragment),_=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(y,T){$(y,e,T),$(y,n,T),$(y,t,T),k(t,l),b(o,t,null),k(t,i),b(u,t,null),k(t,s),$(y,a,T),$(y,f,T),k(f,c),b(g,f,null),k(f,_),O=!0},p(y,T){const S={};T&65536&&(S.$$scope={dirty:T,ctx:y}),o.$set(S);const L={};T&65536&&(L.$$scope={dirty:T,ctx:y}),u.$set(L);const M={};T&65536&&(M.$$scope={dirty:T,ctx:y}),g.$set(M)},i(y){O||(m(o.$$.fragment,y),m(u.$$.fragment,y),m(g.$$.fragment,y),O=!0)},o(y){d(o.$$.fragment,y),d(u.$$.fragment,y),d(g.$$.fragment,y),O=!1},d(y){y&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(g)}}}function Ws(r){let e,n,t;return n=new oe({props:{$$slots:{default:[qs]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Un(r){let e,n;return e=new ze({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vs(r){let e;return{c(){e=w("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xs(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ks(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ys(r){let e,n,t,l,o,i,u,s,a;return t=new U({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Xs]},$$scope:{ctx:r}}}),o=new U({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ks]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Zs(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ys]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function zn(r){let e,n,t,l;return t=new ze({props:{colorScale:r[4],limits:r[6]().map(li)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=C(),h(t.$$.fragment)},m(o,i){$(o,e,i),$(o,n,i),b(t,o,i),l=!0},p:te,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Js(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){$(a,e,f),k(e,n),k(e,t),k(t,o),k(e,i),k(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&B(o,l),f&8192&&u!==(u=a[14]+"")&&B(s,u)},d(a){a&&p(e)}}}function Qs(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=A("b"),s=w(u),a=w(`
          cars`)},m(f,c){$(f,e,c),k(e,n),k(e,l),k(e,o),k(e,i),k(i,s),k(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(l,t),c&8200&&u!==(u=f[15]+"")&&B(s,u)},d(f){f&&p(e)}}}function xs(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){$(f,e,c),k(e,n),k(n,l),k(n,o),k(e,i),k(e,s),k(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(l,t),c&8192&&u!==(u=f[14]+"")&&B(s,u)},d(f){f&&p(e)}}}function ei(r){Gn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?xs:o[3]=="average_cars_per_household"?Qs:Js}let t=n(r),l=t(r);return{c(){l.c(),e=je()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){Gn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function ti(r){let e,n;return e=new re({props:{$$slots:{default:[ei,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ni(r){let e,n,t,l;const o=[R(Xe),{sourceLayer:Xe},{paint:{"fill-color":$e(["get",r[3]],r[6](),r[4]),"fill-opacity":W(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ti]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Me({props:i}),e.$on("click",r[5]);const u=[R(`${Xe}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Z(o,[f&0&&ee(R(Xe)),f&0&&{sourceLayer:Xe},f&88&&{paint:{"fill-color":$e(["get",a[3]],a[6](),a[4]),"fill-opacity":W(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&8?Z(u,[f&0&&ee(R(`${Xe}-outline`)),u[1],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ri(r){let e,n,t,l,o,i,u,s,a,f,c,g,_,O;function y(j){r[7](j)}let T={id:"percent_households_with_car",$$slots:{right:[Bs],default:[Es]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new le({props:T}),V.push(()=>X(e,"checked",y)),e.$on("change",r[8]);let S=r[3]=="percent_households_with_car"&&Hn(r);function L(j){r[9](j)}let M={id:"average_cars_per_household",$$slots:{right:[Ws],default:[Gs]},$$scope:{ctx:r}};r[1]!==void 0&&(M.checked=r[1]),o=new le({props:M}),V.push(()=>X(o,"checked",L)),o.$on("change",r[10]);let N=r[3]=="average_cars_per_household"&&Un(r);function I(j){r[11](j)}let E={id:"population_density",$$slots:{right:[Zs],default:[Vs]},$$scope:{ctx:r}};r[2]!==void 0&&(E.checked=r[2]),a=new le({props:E}),V.push(()=>X(a,"checked",I)),a.$on("change",r[12]);let P=r[3]=="population_density"&&zn(r);return _=new ce({props:{url:`pmtiles://${ie()}/v1/${Xe}.pmtiles`,$$slots:{default:[ni]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),S&&S.c(),l=C(),h(o.$$.fragment),u=C(),N&&N.c(),s=C(),h(a.$$.fragment),c=C(),P&&P.c(),g=C(),h(_.$$.fragment)},m(j,F){b(e,j,F),$(j,t,F),S&&S.m(j,F),$(j,l,F),b(o,j,F),$(j,u,F),N&&N.m(j,F),$(j,s,F),b(a,j,F),$(j,c,F),P&&P.m(j,F),$(j,g,F),b(_,j,F),O=!0},p(j,[F]){const G={};F&65536&&(G.$$scope={dirty:F,ctx:j}),!n&&F&1&&(n=!0,G.checked=j[0],K(()=>n=!1)),e.$set(G),j[3]=="percent_households_with_car"?S?(S.p(j,F),F&8&&m(S,1)):(S=Hn(j),S.c(),m(S,1),S.m(l.parentNode,l)):S&&(ae(),d(S,1,1,()=>{S=null}),fe());const D={};F&65536&&(D.$$scope={dirty:F,ctx:j}),!i&&F&2&&(i=!0,D.checked=j[1],K(()=>i=!1)),o.$set(D),j[3]=="average_cars_per_household"?N?(N.p(j,F),F&8&&m(N,1)):(N=Un(j),N.c(),m(N,1),N.m(s.parentNode,s)):N&&(ae(),d(N,1,1,()=>{N=null}),fe());const se={};F&65536&&(se.$$scope={dirty:F,ctx:j}),!f&&F&4&&(f=!0,se.checked=j[2],K(()=>f=!1)),a.$set(se),j[3]=="population_density"?P?(P.p(j,F),F&8&&m(P,1)):(P=zn(j),P.c(),m(P,1),P.m(g.parentNode,g)):P&&(ae(),d(P,1,1,()=>{P=null}),fe());const J={};F&65544&&(J.$$scope={dirty:F,ctx:j}),_.$set(J)},i(j){O||(m(e.$$.fragment,j),m(S),m(o.$$.fragment,j),m(N),m(a.$$.fragment,j),m(P),m(_.$$.fragment,j),O=!0)},o(j){d(e.$$.fragment,j),d(S),d(o.$$.fragment,j),d(N),d(a.$$.fragment,j),d(P),d(_.$$.fragment,j),O=!1},d(j){j&&(p(t),p(l),p(u),p(s),p(c),p(g)),v(e,j),S&&S.d(j),v(o,j),N&&N.d(j),v(a,j),P&&P.d(j),v(_,j)}}}let Xe="census_output_areas";const li=r=>r.toLocaleString();function oi(r,e,n){let t=Q.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(T){let S=T.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${S}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${S}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function g(T){o=T,n(1,o)}const _=()=>{n(0,l=!1),n(2,i=!1)};function O(T){i=T,n(2,i)}const y=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,g,_,O,y]}class si extends z{constructor(e){super(),q(this,e,oi,ri,H,{})}}function ii(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ai(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fi(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ai]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function ui(r){let e,n,t;return n=new oe({props:{$$slots:{default:[fi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ci(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function $i(r){let e,n;return e=new re({props:{$$slots:{default:[ci,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pi(r){let e,n,t,l;const o=[R(lt),{paint:{"fill-color":r[1],"fill-opacity":W(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[$i]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Me({props:i}),e.$on("click",_i);const u=[R(`${lt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&ee(R(lt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":W(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Z(u,[f&0&&ee(R(`${lt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function mi(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:lt,$$slots:{right:[ui],default:[ii]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new yt({props:{data:`${ie()}/v1/${lt}.geojson`,$$slots:{default:[pi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let lt="combined_authorities";function _i(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function gi(r,e,n){let t=Q.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class di extends z{constructor(e){super(),q(this,e,gi,mi,H,{})}}function hi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vi(r){let e;return{c(){e=w(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wi(r){let e,n,t,l,o,i,u,s,a;return t=new U({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[bi]},$$scope:{ctx:r}}}),o=new U({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[vi]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function ki(r){let e,n,t;return n=new oe({props:{$$slots:{default:[wi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function qn(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yi(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,g=r[4].rank.toLocaleString()+"",_,O;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(i),s=C(),a=A("p"),f=w("Rank: "),c=A("b"),_=w(g),O=w(`
        / 32,844 LSOAs`)},m(y,T){$(y,e,T),k(e,t),k(e,l),k(e,o),k(o,u),$(y,s,T),$(y,a,T),k(a,f),k(a,c),k(c,_),k(a,O)},p(y,T){T&16&&n!==(n=y[4].LSOA11CD+"")&&B(t,n),T&16&&i!==(i=y[4].score+"")&&B(u,i),T&16&&g!==(g=y[4].rank.toLocaleString()+"")&&B(_,g)},d(y){y&&(p(e),p(s),p(a))}}}function Si(r){let e,n;return e=new re({props:{$$slots:{default:[yi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ti(r){let e,n,t,l;const o=[R(Be),{sourceLayer:Be},{paint:{"fill-color":$e(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":W(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Si]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Me({props:i});const u=[R(`${Be}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Z(o,[f&0&&ee(R(Be)),f&0&&{sourceLayer:Be},f&6&&{paint:{"fill-color":$e(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":W(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?Z(u,[f&0&&ee(R(`${Be}-outline`)),u[1],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Oi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:Be,$$slots:{right:[ki],default:[hi]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&qn(r);return o=new ce({props:{url:`pmtiles://${ie()}/v1/${Be}.pmtiles`,$$slots:{default:[Ti]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],K(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=qn(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Be="imd";function Ci(r,e,n){let t=Q.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Ai extends z{constructor(e){super(),q(this,e,Ci,Oi,H,{})}}function Li(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ii(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pi(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Ii]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function ji(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Pi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Fi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Ei(r){let e,n;return e=new re({props:{$$slots:{default:[Fi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mi(r){let e,n,t,l;const o=[R(ot),{paint:{"fill-color":r[1],"fill-opacity":W(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ei]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Me({props:i}),e.$on("click",Ni);const u=[R(`${ot}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&ee(R(ot)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":W(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Z(u,[f&0&&ee(R(`${ot}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Di(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ot,$$slots:{right:[ji],default:[Li]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new yt({props:{data:`${ie()}/v1/${ot}.geojson`,$$slots:{default:[Mi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ot="local_authority_districts";function Ni(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Ri(r,e,n){let t=Q.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Bi extends z{constructor(e){super(),q(this,e,Ri,Di,H,{})}}function Gi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Hi(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ui(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zi(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qi(r){let e;return{c(){e=w("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(r){let e,n,t,l,o,i,u,s,a,f,c,g,_,O,y,T,S,L,M,N,I,E;return t=new U({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Hi]},$$scope:{ctx:r}}}),o=new U({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),u=new U({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[zi]},$$scope:{ctx:r}}}),_=new U({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[qi]},$$scope:{ctx:r}}}),L=new U({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Wi]},$$scope:{ctx:r}}}),I=new De({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=A("strong"),g=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(_.$$.fragment),O=w(" to get more details."),y=C(),T=A("p"),S=w("Data from ONS Geography via "),h(L.$$.fragment),M=w(", as of November 2022."),N=C(),h(I.$$.fragment)},m(P,j){$(P,e,j),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),b(u,e,null),k(e,s),$(P,a,j),$(P,f,j),k(f,c),k(c,g),b(_,c,null),k(c,O),$(P,y,j),$(P,T,j),k(T,S),b(L,T,null),k(T,M),$(P,N,j),b(I,P,j),E=!0},p(P,j){const F={};j&16&&(F.$$scope={dirty:j,ctx:P}),t.$set(F);const G={};j&16&&(G.$$scope={dirty:j,ctx:P}),o.$set(G);const D={};j&16&&(D.$$scope={dirty:j,ctx:P}),u.$set(D);const se={};j&16&&(se.$$scope={dirty:j,ctx:P}),_.$set(se);const J={};j&16&&(J.$$scope={dirty:j,ctx:P}),L.$set(J)},i(P){E||(m(t.$$.fragment,P),m(o.$$.fragment,P),m(u.$$.fragment,P),m(_.$$.fragment,P),m(L.$$.fragment,P),m(I.$$.fragment,P),E=!0)},o(P){d(t.$$.fragment,P),d(o.$$.fragment,P),d(u.$$.fragment,P),d(_.$$.fragment,P),d(L.$$.fragment,P),d(I.$$.fragment,P),E=!1},d(P){P&&(p(e),p(a),p(f),p(y),p(T),p(N)),v(t),v(o),v(u),v(_),v(L),v(I,P)}}}function Xi(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Vi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ki(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Yi(r){let e,n;return e=new re({props:{$$slots:{default:[Ki,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zi(r){let e,n,t,l;const o=[R(Te),{sourceLayer:Te},{paint:{"fill-color":r[1],"fill-opacity":W(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Yi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Me({props:i});const u=[R(`${Te}-outline`),{sourceLayer:Te},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&ee(R(Te)),f&0&&{sourceLayer:Te},f&2&&{paint:{"fill-color":a[1],"fill-opacity":W(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Z(u,[f&0&&ee(R(`${Te}-outline`)),f&0&&{sourceLayer:Te},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ji(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Te,$$slots:{right:[Xi],default:[Gi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${Te}.pmtiles`,$$slots:{default:[Zi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Te="local_planning_authorities";function Qi(r,e,n){let t=Q.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class xi extends z{constructor(e){super(),q(this,e,Qi,Ji,H,{})}}function ea(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ta(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function na(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[ta]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function ra(r){let e,n,t;return n=new oe({props:{$$slots:{default:[na]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function la(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&B(t,n)},d(l){l&&p(e)}}}function oa(r){let e,n;return e=new re({props:{$$slots:{default:[la,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sa(r){let e,n,t,l;const o=[R(Oe),{sourceLayer:Oe},{paint:{"fill-color":r[1],"fill-opacity":W(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[oa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Me({props:i}),e.$on("click",aa);const u=[R(`${Oe}-outline`),{sourceLayer:Oe},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&ee(R(Oe)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":W(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Z(u,[f&0&&ee(R(`${Oe}-outline`)),f&0&&{sourceLayer:Oe},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ia(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Oe,$$slots:{right:[ra],default:[ea]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${Oe}.pmtiles`,$$slots:{default:[sa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Oe="parliamentary_constituencies";function aa(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function fa(r,e,n){let t=Q.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ua extends z{constructor(e){super(),q(this,e,fa,ia,H,{})}}function ca(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function $a(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pa(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[$a]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function ma(r){let e,n,t;return n=new oe({props:{$$slots:{default:[pa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function _a(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function ga(r){let e,n;return e=new re({props:{$$slots:{default:[_a,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function da(r){let e,n,t,l;const o=[R(Ce),{sourceLayer:Ce},{paint:{"fill-color":r[1],"fill-opacity":W(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ga]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Me({props:i}),e.$on("click",ba);const u=[R(`${Ce}-outline`),{sourceLayer:Ce},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Z(o,[f&0&&ee(R(Ce)),f&0&&{sourceLayer:Ce},f&2&&{paint:{"fill-color":a[1],"fill-opacity":W(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?Z(u,[f&0&&ee(R(`${Ce}-outline`)),f&0&&{sourceLayer:Ce},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ha(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ce,$$slots:{right:[ma],default:[ca]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${Ce}.pmtiles`,$$slots:{default:[da]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Ce="wards";function ba(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function va(r,e,n){let t=Q.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class wa extends z{constructor(e){super(),q(this,e,va,ha,H,{})}}function ka(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ya(r){let e,n,t,l;return t=new U({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[ka]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){$(o,e,i),k(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&p(e),v(t)}}}class qe extends z{constructor(e){super(),q(this,e,null,ya,H,{})}}function Sa(r){let e,n,t;return e=new ge({props:{color:Q.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ta(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Oa(r){let e,n,t,l,o,i,u,s,a;return o=new U({props:{href:"https://gtfs.org",$$slots:{default:[Ta]},$$scope:{ctx:r}}}),s=new qe({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=C(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),k(t,l),b(o,t,null),k(t,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(s,f)}}}function Ca(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Oa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Aa(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function La(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ia(r){let e;function n(o,i){return o[2].has_bus_lane?La:Aa}let t=n(r),l=t(r);return{c(){l.c(),e=je()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Pa(r){let e,n;return e=new re({props:{$$slots:{default:[Ia,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ja(r){let e,n;const t=[R(st),{sourceLayer:st},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Q.bus_route_with_lane,Q.bus_route_without_lane],"line-width":5,"line-opacity":W(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Pa]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Z(t,[i&0&&ee(R(st)),i&0&&{sourceLayer:st},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Fa(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:st,$$slots:{right:[Ca],default:[Sa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${st}.pmtiles`,$$slots:{default:[ja]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let st="bus_routes";function Ea(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Ma extends z{constructor(e){super(),q(this,e,Ea,Fa,H,{})}}function Wn(r){const e=za(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function Vn(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function Da(r){let e;return{c(){e=w("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Na(r){let e,n,t,l,o,i,u,s;return u=new qe({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=C(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=C(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=C(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,l,f),$(a,o,f),$(a,i,f),b(u,a,f),s=!0},p:te,i(a){s||(m(u.$$.fragment,a),s=!0)},o(a){d(u.$$.fragment,a),s=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(i)),v(u,a)}}}function Ra(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Na]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Xn(r){let e,n,t=He(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=Kn(Vn(r,t,i));const o=i=>d(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=je()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);$(i,e,u),n=!0},p(i,u){if(u&2){t=He(i[1]);let s;for(s=0;s<t.length;s+=1){const a=Vn(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=Kn(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(ae(),s=t.length;s<l.length;s+=1)o(s);fe()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)d(l[u]);n=!1},d(i){i&&p(e),It(l,i)}}}function Kn(r){let e,n,t,l=r[7]+"",o,i,u;return n=new ge({props:{color:r[8]}}),{c(){e=A("div"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){$(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p:te,i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){d(n.$$.fragment,s),u=!1},d(s){s&&p(e),v(n)}}}function Ba(r){Wn(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,g,_=r[6]+"",O;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Direction: "),u=A("b"),a=C(),f=A("p"),c=w("Width: "),g=A("b"),O=w(_)},m(y,T){$(y,e,T),k(e,t),$(y,l,T),$(y,o,T),k(o,i),k(o,u),u.innerHTML=s,$(y,a,T),$(y,f,T),k(f,c),k(f,g),k(g,O)},p(y,T){Wn(y),T&8&&n!==(n=y[4]+"")&&B(t,n),T&8&&s!==(s=y[5]+"")&&(u.innerHTML=s),T&8&&_!==(_=y[6]+"")&&B(O,_)},d(y){y&&(p(e),p(l),p(o),p(a),p(f))}}}function Ga(r){let e,n;return e=new re({props:{$$slots:{default:[Ba,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ha(r){let e,n;const t=[R(it),{sourceLayer:it},{paint:{"line-color":ar(["get","kind"],{track:Q.cycle_paths.track,lane:Q.cycle_paths.lane,shared_use_segregated:Q.cycle_paths.shared_use_segregated,shared_use_unsegregated:Q.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ee,"line-opacity":W(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Ga]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),e.$on("click",qa),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Z(t,[i&0&&ee(R(it)),i&0&&{sourceLayer:it},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ua(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:it,$$slots:{right:[Ra],default:[Da]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&Xn(r);return o=new ce({props:{url:`pmtiles://${ie()}/v1/${it}.pmtiles`,$$slots:{default:[Ha]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],K(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Xn(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const _={};c&2049&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let it="cycle_paths";function za(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function qa(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Wa(r,e,n){let t=[["Separated tracks",Q.cycle_paths.track],["Unprotected lanes",Q.cycle_paths.lane],["Shared-use (segregated)",Q.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",Q.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Va extends z{constructor(e){super(),q(this,e,Wa,Ua,H,{})}}function Xa(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ka(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ya(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Ka]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Za(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Ya]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ja(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&B(t,n)},d(l){l&&p(e)}}}function Qa(r){let e,n;return e=new re({props:{$$slots:{default:[Ja,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xa(r){let e,n;const t=[R(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":W(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Qa]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Z(t,[i&0&&ee(R(at)),i&0&&{sourceLayer:at},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":W(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ef(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:at,$$slots:{right:[Za],default:[Xa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${at}.pmtiles`,$$slots:{default:[xa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let at="mrn";function tf(r,e,n){let t=Q.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class nf extends z{constructor(e){super(),q(this,e,tf,ef,H,{})}}function rf(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(r){let e;return{c(){e=w("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(r){let e;return{c(){e=w("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sf(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new U({props:{href:"https://www.pct.bike",$$slots:{default:[lf]},$$scope:{ctx:r}}}),a=new U({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[of]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=C(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=C(),o=A("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(g,_){$(g,e,_),$(g,n,_),$(g,t,_),$(g,l,_),$(g,o,_),k(o,i),b(u,o,null),k(o,s),b(a,o,null),k(o,f),c=!0},p(g,_){const O={};_&1024&&(O.$$scope={dirty:_,ctx:g}),u.$set(O);const y={};_&1024&&(y.$$scope={dirty:_,ctx:g}),a.$set(y)},i(g){c||(m(u.$$.fragment,g),m(a.$$.fragment,g),c=!0)},o(g){d(u.$$.fragment,g),d(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(l),p(o)),v(u),v(a)}}}function af(r){let e,n,t;return n=new oe({props:{$$slots:{default:[sf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Yn(r){let e,n,t,l,o,i,u,s;e=new ze({props:{colorScale:r[3],limits:r[4]}});function a(_){r[7](_)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new ur({props:f}),V.push(()=>X(t,"value",a));function c(_){r[8](_)}let g={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(g.value=r[1]),i=new Pt({props:g}),V.push(()=>X(i,"value",c)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),o=C(),h(i.$$.fragment)},m(_,O){b(e,_,O),$(_,n,O),b(t,_,O),$(_,o,O),b(i,_,O),s=!0},p(_,O){const y={};!l&&O&1&&(l=!0,y.value=_[0],K(()=>l=!1)),t.$set(y);const T={};!u&&O&2&&(u=!0,T.value=_[1],K(()=>u=!1)),i.$set(T)},i(_){s||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(i.$$.fragment,_),s=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(i.$$.fragment,_),s=!1},d(_){_&&(p(n),p(o)),v(e,_),v(t,_),v(i,_)}}}function ff(r){let e,n=r[5](r[9])+"",t;return{c(){e=new rn(!1),t=je(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function uf(r){let e,n;return e=new re({props:{$$slots:{default:[ff,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cf(r){let e,n;const t=[R(Le),{sourceLayer:Le},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":Ee,"line-opacity":W(1,.5)}},{layout:{visibility:r[2]&&r[0]==Le?"visible":"none"}}];let l={$$slots:{default:[uf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Z(t,[i&0&&ee(R(Le)),i&0&&{sourceLayer:Le},i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":Ee,"line-opacity":W(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Le?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function $f(r){let e,n=r[5](r[9])+"",t;return{c(){e=new rn(!1),t=je(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function pf(r){let e,n;return e=new re({props:{$$slots:{default:[$f,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mf(r){let e,n;const t=[R(Ke),{sourceLayer:Ke},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":Ee,"line-opacity":W(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ke?"visible":"none"}}];let l={$$slots:{default:[pf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Z(t,[i&0&&ee(R(Ke)),i&0&&{sourceLayer:Ke},t[2],t[3],i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":Ee,"line-opacity":W(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ke?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _f(r){let e,n,t,l,o,i,u,s;function a(g){r[6](g)}let f={id:Le,$$slots:{right:[af],default:[rf]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new le({props:f}),V.push(()=>X(e,"checked",a));let c=r[2]&&Yn(r);return o=new ce({props:{url:`pmtiles://${ie()}/v1/${Le}.pmtiles`,$$slots:{default:[cf]},$$scope:{ctx:r}}}),u=new ce({props:{url:`pmtiles://${ie()}/v1/${Ke}.pmtiles`,$$slots:{default:[mf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),c&&c.c(),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(g,_){b(e,g,_),$(g,t,_),c&&c.m(g,_),$(g,l,_),b(o,g,_),$(g,i,_),b(u,g,_),s=!0},p(g,[_]){const O={};_&1024&&(O.$$scope={dirty:_,ctx:g}),!n&&_&4&&(n=!0,O.checked=g[2],K(()=>n=!1)),e.$set(O),g[2]?c?(c.p(g,_),_&4&&m(c,1)):(c=Yn(g),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(ae(),d(c,1,1,()=>{c=null}),fe());const y={};_&1031&&(y.$$scope={dirty:_,ctx:g}),o.$set(y);const T={};_&1031&&(T.$$scope={dirty:_,ctx:g}),u.$set(T)},i(g){s||(m(e.$$.fragment,g),m(c),m(o.$$.fragment,g),m(u.$$.fragment,g),s=!0)},o(g){d(e.$$.fragment,g),d(c),d(o.$$.fragment,g),d(u.$$.fragment,g),s=!1},d(g){g&&(p(t),p(l),p(i)),v(e,g),c&&c.d(g),v(o,g),v(u,g)}}}let Le="pct_commute",Ke="pct_school";function gf(r,e,n){let t=Q.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Le,i="baseline",u=!1;function s(g){let _=g.baseline,O=g.gov_target,y=g.go_dutch,T=`<h2>Trip purpose: ${o==Le?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)T+=`<p>Government target (2025): <b>${O.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${y.toLocaleString()}</b></p>`;else{let S=(O/_).toFixed(1),L=(y/_).toFixed(1);T+=`<p>Government target (2025): ${O.toLocaleString()} (<b>${S}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${y.toLocaleString()} (<b>${L}x</b> of baseline)</p>`}return T}function a(g){u=g,n(2,u)}function f(g){o=g,n(0,o)}function c(g){i=g,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class df extends z{constructor(e){super(),q(this,e,gf,_f,H,{})}}function hf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bf(r){let e;return{c(){e=w("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wf(r){let e,n,t,l,o,i,u,s,a,f,c,g;return t=new U({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[bf]},$$scope:{ctx:r}}}),f=new U({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[vf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=C(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=C(),s=A("p"),a=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(_,O){$(_,e,O),k(e,n),b(t,e,null),k(e,l),$(_,o,O),$(_,i,O),$(_,u,O),$(_,s,O),k(s,a),b(f,s,null),k(s,c),g=!0},p(_,O){const y={};O&256&&(y.$$scope={dirty:O,ctx:_}),t.$set(y);const T={};O&256&&(T.$$scope={dirty:O,ctx:_}),f.$set(T)},i(_){g||(m(t.$$.fragment,_),m(f.$$.fragment,_),g=!0)},o(_){d(t.$$.fragment,_),d(f.$$.fragment,_),g=!1},d(_){_&&(p(e),p(o),p(i),p(u),p(s)),v(t),v(f)}}}function kf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[wf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Zn(r){let e,n,t,l,o;e=new ze({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new ur({props:u}),V.push(()=>X(t,"value",i)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],K(()=>l=!1)),t.$set(f)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),o=!1},d(s){s&&p(n),v(e,s),v(t,s)}}}function yf(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,g=r[4][r[7].highest_description]+"",_,O;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=C(),u=A("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),_=w(g),O=w(")")},m(y,T){$(y,e,T),k(e,n),k(e,l),k(e,o),$(y,i,T),$(y,u,T),k(u,s),k(u,f),k(u,c),k(u,_),k(u,O)},p(y,T){T&128&&t!==(t=y[7].indicative_mph+"")&&B(l,t),T&128&&a!==(a=y[7].highest_mph+"")&&B(f,a),T&128&&g!==(g=y[4][y[7].highest_description]+"")&&B(_,g)},d(y){y&&(p(e),p(i),p(u))}}}function Sf(r){let e,n;return e=new re({props:{$$slots:{default:[yf,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tf(r){let e,n;const t=[R(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[0]],r[3],r[2]),"line-width":Ee,"line-opacity":W(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[Sf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Z(t,[i&0&&ee(R(ft)),i&0&&{sourceLayer:ft},t[2],t[3],i&13&&{paint:{"line-color":$e(["get",o[0]],o[3],o[2]),"line-width":Ee,"line-opacity":W(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Of(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ft,$$slots:{right:[kf],default:[hf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[1]&&Zn(r);return o=new ce({props:{url:`pmtiles://${ln()}/v1/${ft}.pmtiles`,$$slots:{default:[Tf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],K(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=Zn(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const _={};c&259&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ft="road_speeds";function Cf(r,e,n){let t=Q.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class Af extends z{constructor(e){super(),q(this,e,Cf,Of,H,{})}}function Lf(r){let e;return{c(){e=w("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function If(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pf(r){let e,n,t,l,o,i,u,s,a;return u=new U({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[If]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=C(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=C(),o=A("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),k(o,i),b(u,o,null),k(o,s),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),v(u)}}}function jf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Pf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Jn(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ff(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",g,_;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),i=w(`
        meters`),u=C(),s=A("p"),a=w("Minimum width: "),f=A("b"),g=w(c),_=w(`
        meters`)},m(O,y){$(O,e,y),k(e,n),k(e,t),k(t,o),k(e,i),$(O,u,y),$(O,s,y),k(s,a),k(s,f),k(f,g),k(s,_)},p(O,y){y&16&&l!==(l=O[4].average+"")&&B(o,l),y&16&&c!==(c=O[4].minimum+"")&&B(g,c)},d(O){O&&(p(e),p(u),p(s))}}}function Ef(r){let e,n;return e=new re({props:{$$slots:{default:[Ff,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mf(r){let e,n;const t=[R(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get","average"],r[2],r[1]),"line-width":Ee,"line-opacity":W(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Ef]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Z(t,[i&0&&ee(R(ut)),i&0&&{sourceLayer:ut},t[2],t[3],i&6&&{paint:{"line-color":$e(["get","average"],o[2],o[1]),"line-width":Ee,"line-opacity":W(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Df(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ut,$$slots:{right:[jf],default:[Lf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&Jn(r);return o=new ce({props:{url:`pmtiles://${ln()}/v1/${ut}.pmtiles`,$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],K(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Jn(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const _={};c&33&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="road_widths";function Nf(r,e,n){let t=Q.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Rf extends z{constructor(e){super(),q(this,e,Nf,Df,H,{})}}function Bf(r){let e,n,t;return{c(){e=A("input"),x(e,"class","govuk-file-upload"),x(e,"id","load-criticals"),x(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=xt(e,"change",r[5]),n=!0)},p:te,d(l){l&&p(e),r[7](null),n=!1,t()}}}function Qn(r){let e,n;return e=new St({props:{small:!0,$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gf(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new ge({props:{color:bt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),$(u,n,s),$(u,l,s),$(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&B(l,t)},i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),i=!1},d(u){u&&(p(n),p(l),p(o)),v(e,u)}}}function Hf(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[Gf]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),V.push(()=>X(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],K(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Uf(r){let e,n,t,l,o,i;e=new fr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Bf]},$$scope:{ctx:r}}}),t=new cr({props:{errorMessage:r[3]}});let u=r[2]>0&&Qn(r);return{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),u&&u.c(),o=je()},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),u&&u.m(s,a),$(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&m(u,1)):(u=Qn(s),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(ae(),d(u,1,1,()=>{u=null}),fe())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(u),i=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(u),i=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),u&&u.d(s)}}}function zf(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,g,_,O,y=r[10].notes+"",T,S,L,M,N,I,E,P=r[10].id+"",j,F,G,D,se,J=(r[10].inspector??"???")+"",be,mt,de,Qe=r[10].submission_time+"",_t,xe,pe,gt,Fe,Ne=r[10].scheme_reference+"",We,dt,et,Ve=r[10].current_design_stage+"",tt;return{c(){e=A("div"),n=A("h2"),l=w(t),o=C(),i=A("p"),u=A("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=C(),g=A("p"),_=A("u"),_.textContent="Notes",O=w(`
          : `),T=w(y),S=C(),L=A("hr"),M=C(),N=A("p"),I=w("Critical issue ID: "),E=A("b"),j=w(P),F=C(),G=A("p"),D=w("Submitted by "),se=A("b"),be=w(J),mt=w(`
          at
          `),de=A("b"),_t=w(Qe),xe=C(),pe=A("p"),gt=w("For scheme "),Fe=A("b"),We=w(Ne),dt=w(`
          in stage
          `),et=A("b"),tt=w(Ve),ye(e,"max-width","30vw")},m(he,Se){$(he,e,Se),k(e,n),k(n,l),k(e,o),k(e,i),k(i,u),k(i,s),k(i,f),k(e,c),k(e,g),k(g,_),k(g,O),k(g,T),k(e,S),k(e,L),k(e,M),k(e,N),k(N,I),k(N,E),k(E,j),k(e,F),k(e,G),k(G,D),k(G,se),k(se,be),k(G,mt),k(G,de),k(de,_t),k(e,xe),k(e,pe),k(pe,gt),k(pe,Fe),k(Fe,We),k(pe,dt),k(pe,et),k(et,tt)},p(he,Se){Se&1024&&t!==(t=he[10].critical_type+"")&&B(l,t),Se&1024&&a!==(a=he[10].location_description+"")&&B(f,a),Se&1024&&y!==(y=he[10].notes+"")&&B(T,y),Se&1024&&P!==(P=he[10].id+"")&&B(j,P),Se&1024&&J!==(J=(he[10].inspector??"???")+"")&&B(be,J),Se&1024&&Qe!==(Qe=he[10].submission_time+"")&&B(_t,Qe),Se&1024&&Ne!==(Ne=he[10].scheme_reference+"")&&B(We,Ne),Se&1024&&Ve!==(Ve=he[10].current_design_stage+"")&&B(tt,Ve)},d(he){he&&p(e)}}}function qf(r){let e,n;return e=new re({props:{$$slots:{default:[zf,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wf(r){let e,n,t,l,o,i;const u=[R(`${Ge}-clusters`),{applyToClusters:!0},{paint:{"circle-color":bt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let _=0;_<u.length;_+=1)s=Y(s,u[_]);e=new Ue({props:s}),e.$on("click",r[6]);const a=[R(`${Ge}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let _=0;_<a.length;_+=1)f=Y(f,a[_]);t=new fl({props:f});const c=[R(`${Ge}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":bt,"circle-opacity":W(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let g={$$slots:{default:[qf]},$$scope:{ctx:r}};for(let _=0;_<c.length;_+=1)g=Y(g,c[_]);return o=new Ue({props:g}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment)},m(_,O){b(e,_,O),$(_,n,O),b(t,_,O),$(_,l,O),b(o,_,O),i=!0},p(_,O){const y=O&2?Z(u,[O&0&&ee(R(`${Ge}-clusters`)),u[1],O&0&&{paint:{"circle-color":bt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},O&2&&{layout:{visibility:_[1]?"visible":"none"}},u[4]]):{};e.$set(y);const T=O&2?Z(a,[O&0&&ee(R(`${Ge}-counts`)),a[1],O&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:_[1]?"visible":"none"}}]):{};t.$set(T);const S=O&2?Z(c,[O&0&&ee(R(`${Ge}-points`)),c[1],c[2],c[3],O&0&&{paint:{"circle-color":bt,"circle-opacity":W(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},O&2&&{layout:{visibility:_[1]?"visible":"none"}}]):{};O&2048&&(S.$$scope={dirty:O,ctx:_}),o.$set(S)},i(_){i||(m(e.$$.fragment,_),m(t.$$.fragment,_),m(o.$$.fragment,_),i=!0)},o(_){d(e.$$.fragment,_),d(t.$$.fragment,_),d(o.$$.fragment,_),i=!1},d(_){_&&(p(n),p(l)),v(e,_),v(t,_),v(o,_)}}}function Vf(r){let e,n,t,l;return e=new Ae({props:{label:"Critical Issues",$$slots:{default:[Uf]},$$scope:{ctx:r}}}),t=new yt({props:{id:Ge,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Wf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let Ge="criticals",bt="red";function Xf(r,e,n){let t;Ze(r,tn,_=>n(9,t=_));let l,o=!0,i=0,u="",s=Rr();async function a(_){try{n(4,s=await hs(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(O){n(3,u=`The file you loaded is broken: ${O}`)}}function f(_){t.getSource(Ge).getClusterExpansionZoom(_.detail.features[0].properties.cluster_id,(O,y)=>{O||t.easeTo({center:_.detail.features[0].geometry.coordinates,zoom:y})})}function c(_){V[_?"unshift":"push"](()=>{l=_,n(0,l)})}function g(_){o=_,n(1,o)}return[l,o,i,u,s,a,f,c,g]}class Kf extends z{constructor(e){super(),q(this,e,Xf,Vf,H,{})}}function Yf(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Zf(r){let e;return{c(){e=w("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jf(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Zf]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Qf(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function xf(r){let e,n=xn(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=xn(l[3])+"")&&B(t,n)},d(l){l&&p(e)}}}function eu(r){let e,n;return e=new re({props:{$$slots:{default:[xf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tu(r){let e,n;const t=[R(ct),{sourceLayer:ct},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[eu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ue({props:l}),e.$on("click",ru),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Z(t,[i&0&&ee(R(ct)),i&0&&{sourceLayer:ct},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function nu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ct,$$slots:{right:[Qf],default:[Yf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${ct}.pmtiles`,$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ct="crossings";function xn(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function ru(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function lu(r,e,n){let t=Q.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class ou extends z{constructor(e){super(),q(this,e,lu,nu,H,{})}}function su(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function iu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function au(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[iu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function fu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[au]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function uu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(i,u){$(i,e,u),k(e,n),k(e,t),k(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&B(o,l)},d(i){i&&p(e)}}}function cu(r){let e,n;return e=new re({props:{$$slots:{default:[uu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $u(r){let e,n;const t=[R($t),{sourceLayer:$t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[cu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Z(t,[i&0&&ee(R($t)),i&0&&{sourceLayer:$t},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function pu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:$t,$$slots:{right:[fu],default:[su]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${$t}.pmtiles`,$$slots:{default:[$u]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let $t="cycle_parking";function mu(r,e,n){let t=Q.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class _u extends z{constructor(e){super(),q(this,e,mu,pu,H,{})}}function gu(r){let e,n,t,l;return e=new ge({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=C(),t=w(r[2])},m(o,i){b(e,o,i),$(o,n,i),$(o,t,i),l=!0},p(o,i){(!l||i&4)&&B(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function du(r){let e;const n=r[5].default,t=Mt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Dt(t,n,l,l[7],e?Rt(n,l[7],o,null):Nt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function hu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[du]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function bu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&B(t,n)},d(l){l&&p(e)}}}function vu(r){let e,n;return e=new re({props:{$$slots:{default:[bu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wu(r){let e,n;const t=[R(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":W(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[vu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Me({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Z(t,[i&1&&ee(R(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":W(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ku(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[hu],default:[gu]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${ie()}/v1/${r[0]}.pmtiles`,$$slots:{default:[wu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],K(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${ie()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function yu(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=Q[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class sn extends z{constructor(e){super(),q(this,e,yu,ku,H,{name:0,singularNoun:1,pluralNoun:2})}}function Su(r){let e;return{c(){e=w("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tu(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Su]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ou(r){let e,n;return e=new sn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Cu extends z{constructor(e){super(),q(this,e,null,Ou,H,{})}}function Au(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:te,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Lu(r){let e;return{c(){e=w("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Iu(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Lu]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Pu(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Iu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ju(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&B(t,n)},d(l){l&&p(e)}}}function Fu(r){let e,n;return e=new re({props:{$$slots:{default:[ju,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Eu(r){let e,n;const t=[R(Et),{paint:{"circle-color":r[1],"circle-radius":jt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Fu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Z(t,[i&0&&ee(R(Et)),i&2&&{paint:{"circle-color":o[1],"circle-radius":jt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Mu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Et,$$slots:{right:[Pu],default:[Au]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new yt({props:{data:`${ie()}/v1/${Et}.geojson`,$$slots:{default:[Eu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],K(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Et="railway_stations";function Du(r,e,n){let t=Q.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Nu extends z{constructor(e){super(),q(this,e,Du,Mu,H,{})}}function Ru(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bu(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[Ru]},$$scope:{ctx:r}}}),i=new qe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=C(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Gu(r){let e,n;return e=new sn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[Bu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Hu extends z{constructor(e){super(),q(this,e,null,Gu,H,{})}}function Uu(r){let e;return{c(){e=w("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zu(r){let e;return{c(){e=w("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qu(r){let e,n,t,l,o,i,u,s,a;return t=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Uu]},$$scope:{ctx:r}}}),o=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[zu]},$$scope:{ctx:r}}}),s=new qe({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=C(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Wu(r){let e,n;return e=new sn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[qu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Vu extends z{constructor(e){super(),q(this,e,null,Wu,H,{})}}function Xu(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ku(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yu(r){let e;return{c(){e=w("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zu(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new U({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Ku]},$$scope:{ctx:r}}}),o=new U({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Yu]},$$scope:{ctx:r}}}),f=new De({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=C(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=C(),h(f.$$.fragment)},m(g,_){$(g,e,_),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(g,u,_),$(g,s,_),$(g,a,_),b(f,g,_),c=!0},p(g,_){const O={};_&64&&(O.$$scope={dirty:_,ctx:g}),t.$set(O);const y={};_&64&&(y.$$scope={dirty:_,ctx:g}),o.$set(y)},i(g){c||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),c=!0)},o(g){d(t.$$.fragment,g),d(o.$$.fragment,g),d(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(u),p(s),p(a)),v(t),v(o),v(f,g)}}}function Ju(r){let e,n,t;return n=new oe({props:{$$slots:{default:[Zu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),x(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function er(r){let e,n;return e=new ze({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qu(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,g,_,O=r[5].pedal_cycles_2022.toLocaleString()+"",y,T,S,L,M,N=r[5].method+"",I;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(s),f=C(),c=A("p"),g=w("Total pedal cycles (2022 AADF): "),_=A("b"),y=w(O),T=C(),S=A("p"),L=w("Count method: "),M=A("b"),I=w(N)},m(E,P){$(E,e,P),k(e,t),$(E,l,P),$(E,o,P),k(o,i),k(o,u),k(u,a),$(E,f,P),$(E,c,P),k(c,g),k(c,_),k(_,y),$(E,T,P),$(E,S,P),k(S,L),k(S,M),k(M,I)},p(E,P){P&32&&n!==(n=E[5].location+"")&&B(t,n),P&32&&s!==(s=E[5].motor_vehicles_2022.toLocaleString()+"")&&B(a,s),P&32&&O!==(O=E[5].pedal_cycles_2022.toLocaleString()+"")&&B(y,O),P&32&&N!==(N=E[5].method+"")&&B(I,N)},d(E){E&&(p(e),p(l),p(o),p(f),p(c),p(T),p(S))}}}function xu(r){let e,n;return e=new re({props:{$$slots:{default:[Qu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ec(r){let e,n;const t=[R(pt),{sourceLayer:pt},{paint:{"circle-color":$e(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[xu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Ue({props:l}),e.$on("click",nc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Z(t,[i&0&&ee(R(pt)),i&0&&{sourceLayer:pt},i&6&&{paint:{"circle-color":$e(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function tc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:pt,$$slots:{right:[Ju],default:[Xu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&er(r);return o=new ce({props:{url:`pmtiles://${ie()}/v1/${pt}.pmtiles`,$$slots:{default:[ec]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],K(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=er(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ae(),d(a,1,1,()=>{a=null}),fe());const _={};c&65&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let pt="vehicle_counts";function nc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function rc(r,e,n){let t=Q.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class lc extends z{constructor(e){super(),q(this,e,rc,tc,H,{})}}function oc(r){let e,n,t,l,o,i,u,s;return e=new Hu({}),t=new Cu({}),o=new Vu({}),u=new Nu({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,l,f),b(o,a,f),$(a,i,f),b(u,a,f),s=!0},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),s=!1},d(a){a&&(p(n),p(l),p(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function sc(r){let e,n;return e=new St({props:{small:!0,$$slots:{default:[oc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ic(r){let e,n,t,l,o,i,u,s,a,f;return e=new Va({}),t=new nf({}),o=new Ma({}),u=new _u({}),a=new ou({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,l,g),b(o,c,g),$(c,i,g),b(u,c,g),$(c,s,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function ac(r){let e,n;return e=new St({props:{small:!0,$$slots:{default:[ic]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fc(r){let e,n,t,l,o,i,u,s,a,f;return e=new ua({}),t=new wa({}),o=new di({}),u=new Bi({}),a=new xi({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,l,g),b(o,c,g),$(c,i,g),b(u,c,g),$(c,s,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function uc(r){let e,n;return e=new St({props:{small:!0,$$slots:{default:[fc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cc(r){let e,n,t,l;return e=new si({}),t=new Ai({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function $c(r){let e,n,t,l;return e=new Rf({}),t=new Af({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function pc(r){let e,n,t,l,o=en()=="Private (development)",i,u;e=new lc({}),t=new df({});let s=o&&$c();return{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),s&&s.c(),i=je()},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,l,f),s&&s.m(a,f),$(a,i,f),u=!0},p:te,i(a){u||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(s),u=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(s),u=!1},d(a){a&&(p(n),p(l),p(i)),v(e,a),v(t,a),s&&s.d(a)}}}function mc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new Wr({props:u}),V.push(()=>X(e,"enabled",i)),l=new Qr({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],K(()=>n=!1)),e.$set(f)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function _c(r){let e,n,t,l,o,i,u,s,a,f,c,g,_,O,y,T;return e=new Kf({}),t=new Ae({props:{label:"Trip generators",$$slots:{default:[sc]},$$scope:{ctx:r}}}),o=new Ae({props:{label:"Existing infrastructure",$$slots:{default:[ac]},$$scope:{ctx:r}}}),u=new Ae({props:{label:"Boundaries",$$slots:{default:[uc]},$$scope:{ctx:r}}}),a=new Ae({props:{label:"Census",$$slots:{default:[cc]},$$scope:{ctx:r}}}),c=new Ae({props:{label:"Other",$$slots:{default:[pc]},$$scope:{ctx:r}}}),_=new Ae({props:{label:"Tools",$$slots:{default:[mc]},$$scope:{ctx:r}}}),y=new qr({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),h(c.$$.fragment),g=C(),h(_.$$.fragment),O=C(),h(y.$$.fragment)},m(S,L){b(e,S,L),$(S,n,L),b(t,S,L),$(S,l,L),b(o,S,L),$(S,i,L),b(u,S,L),$(S,s,L),b(a,S,L),$(S,f,L),b(c,S,L),$(S,g,L),b(_,S,L),$(S,O,L),b(y,S,L),T=!0},p(S,L){const M={};L&8&&(M.$$scope={dirty:L,ctx:S}),t.$set(M);const N={};L&8&&(N.$$scope={dirty:L,ctx:S}),o.$set(N);const I={};L&8&&(I.$$scope={dirty:L,ctx:S}),u.$set(I);const E={};L&8&&(E.$$scope={dirty:L,ctx:S}),a.$set(E);const P={};L&8&&(P.$$scope={dirty:L,ctx:S}),c.$set(P);const j={};L&9&&(j.$$scope={dirty:L,ctx:S}),_.$set(j);const F={};L&2&&(F.disabled=!S[1]),y.$set(F)},i(S){T||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(o.$$.fragment,S),m(u.$$.fragment,S),m(a.$$.fragment,S),m(c.$$.fragment,S),m(_.$$.fragment,S),m(y.$$.fragment,S),T=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(o.$$.fragment,S),d(u.$$.fragment,S),d(a.$$.fragment,S),d(c.$$.fragment,S),d(_.$$.fragment,S),d(y.$$.fragment,S),T=!1},d(S){S&&(p(n),p(l),p(i),p(s),p(f),p(g),p(O)),v(e,S),v(t,S),v(o,S),v(u,S),v(a,S),v(c,S),v(_,S),v(y,S)}}}function gc(r){let e,n;return e=new Ae({props:{label:"Layers",open:!0,$$slots:{default:[_c]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dc(r,e,n){let t,l;Ze(r,$n,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&$n.set(!t)},[t,l,o]}class hc extends z{constructor(e){super(),q(this,e,dc,gc,H,{})}}function bc(r,e,n){let{loadFile:t}=e;return nn(async()=>{let o=await(await fetch(`${ln()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class vc extends z{constructor(e){super(),q(this,e,bc,null,H,{loadFile:0})}}function wc(r){let e;return{c(){e=w("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kc(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yc(r){let e,n,t,l;return e=new Vt({props:{$$slots:{default:[wc]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Vt({props:{$$slots:{default:[kc]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&32&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Sc(r){let e,n,t=r[0].authority_or_region+"",l,o,i,u,s=r[0].capital_scheme_id+"",a,f,c,g,_=r[0].funding_programme+"",O,y,T,S;return T=new Vr({props:{$$slots:{default:[yc]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=C(),i=A("p"),u=w("Capital scheme ID: "),a=w(s),f=C(),c=A("p"),g=w("Funding programme: "),O=w(_),y=C(),h(T.$$.fragment)},m(L,M){$(L,e,M),k(e,n),k(e,l),$(L,o,M),$(L,i,M),k(i,u),k(i,a),$(L,f,M),$(L,c,M),k(c,g),k(c,O),$(L,y,M),b(T,L,M),S=!0},p(L,M){(!S||M&1)&&t!==(t=L[0].authority_or_region+"")&&B(l,t),(!S||M&1)&&s!==(s=L[0].capital_scheme_id+"")&&B(a,s),(!S||M&1)&&_!==(_=L[0].funding_programme+"")&&B(O,_);const N={};M&32&&(N.$$scope={dirty:M,ctx:L}),T.$set(N)},i(L){S||(m(T.$$.fragment,L),S=!0)},o(L){d(T.$$.fragment,L),S=!1},d(L){L&&(p(e),p(o),p(i),p(f),p(c),p(y)),v(T,L)}}}function Tc(r){let e,n;return e=new Ae({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[Sc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oc(r,e,n){let t;Ze(r,tn,s=>n(4,t=s));let{schemesGj:l}=e,{scheme:o}=e;function i(){let s={type:"FeatureCollection",features:l.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(Br(s),{padding:20,animate:!1})}function u(){let s={type:"FeatureCollection",features:l.features.filter(f=>f.properties.scheme_reference==o.scheme_reference)},a=o.authority_or_region;window.localStorage.setItem(a,JSON.stringify(s)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return r.$$set=s=>{"schemesGj"in s&&n(3,l=s.schemesGj),"scheme"in s&&n(0,o=s.scheme)},[o,i,u,l]}class Cc extends z{constructor(e){super(),q(this,e,Oc,Tc,H,{schemesGj:3,scheme:0})}}function tr(r){let e,n,t=pn(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,i){$(o,e,i),k(e,n),k(e,l)},p(o,i){i&1&&t!==(t=pn(o[0].length_meters)+"")&&B(l,t)},d(o){o&&p(e)}}}function nr(r){let e,n=r[1](r[0].description)+"";return{c(){e=A("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Ac(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,g=r[0].scheme_reference+"",_,O,y,T=r[0].length_meters&&tr(r),S=r[0].description&&nr(r);return{c(){e=A("div"),n=A("h2"),t=new rn(!1),o=w(" ("),u=w(i),s=w(")"),a=C(),f=A("p"),c=w("Scheme reference: "),_=w(g),O=C(),T&&T.c(),y=C(),S&&S.c(),t.a=o,ye(e,"max-width","30vw")},m(L,M){$(L,e,M),k(e,n),t.m(l,n),k(n,o),k(n,u),k(n,s),k(e,a),k(e,f),k(f,c),k(f,_),k(e,O),T&&T.m(e,null),k(e,y),S&&S.m(e,null)},p(L,[M]){M&1&&l!==(l=L[1](L[0].name)+"")&&t.p(l),M&1&&i!==(i=L[0].intervention_type+"")&&B(u,i),M&1&&g!==(g=L[0].scheme_reference+"")&&B(_,g),L[0].length_meters?T?T.p(L,M):(T=tr(L),T.c(),T.m(e,y)):T&&(T.d(1),T=null),L[0].description?S?S.p(L,M):(S=nr(L),S.c(),S.m(e,null)):S&&(S.d(1),S=null)},i:te,o:te,d(L){L&&p(e),T&&T.d(),S&&S.d()}}}function Lc(r,e,n){let{props:t}=e,{filterText:l}=e;function o(i){return l?i.replace(new RegExp(l,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,l=i.filterText)},[t,o,l]}class an extends z{constructor(e){super(),q(this,e,Lc,Ac,H,{props:0,filterText:2})}}function Ic(r){let e,n;return e=new an({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pc(r){let e,n;return e=new re({props:{$$slots:{default:[Ic,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function jc(r){let e,n;return e=new an({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fc(r){let e,n;return e=new re({props:{$$slots:{default:[jc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ec(r){let e,n;return e=new an({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mc(r){let e,n;return e=new re({props:{$$slots:{default:[Ec,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Dc(r){let e,n,t,l,o,i,u,s,a,f;const c=[R("interventions-points"),{filter:["all",mn,r[4],r[5]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[3],"circle-radius":jt,"circle-opacity":W(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let g={$$slots:{default:[Pc]},$$scope:{ctx:r}};for(let I=0;I<c.length;I+=1)g=Y(g,c[I]);e=new Ue({props:g});const _=[R("interventions-lines"),{filter:["all",_n,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[3],"line-width":ht,"line-opacity":W(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let O={$$slots:{default:[Fc]},$$scope:{ctx:r}};for(let I=0;I<_.length;I+=1)O=Y(O,_[I]);t=new ue({props:O});const y=[R("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*ht,"circle-opacity":0,"circle-stroke-color":Xr.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let I=0;I<y.length;I+=1)T=Y(T,y[I]);o=new Ue({props:T});const S=[R("interventions-polygons"),{filter:["all",Ct,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[3],"fill-opacity":W(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let L={$$slots:{default:[Mc]},$$scope:{ctx:r}};for(let I=0;I<S.length;I+=1)L=Y(L,S[I]);u=new Me({props:L});const M=[R("interventions-polygons-outlines"),{filter:["all",Ct,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*ht}},{layout:{visibility:r[0]?"visible":"none"}}];let N={};for(let I=0;I<M.length;I+=1)N=Y(N,M[I]);return a=new ue({props:N}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(I,E){b(e,I,E),$(I,n,E),b(t,I,E),$(I,l,E),b(o,I,E),$(I,i,E),b(u,I,E),$(I,s,E),b(a,I,E),f=!0},p(I,E){const P=E&57?Z(c,[c[0],E&48&&{filter:["all",mn,I[4],I[5]]},c[2],c[3],E&8&&{paint:{"circle-color":I[3],"circle-radius":jt,"circle-opacity":W(1,.5)}},E&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};E&258&&(P.$$scope={dirty:E,ctx:I}),e.$set(P);const j=E&25?Z(_,[_[0],E&16&&{filter:["all",_n,I[4]]},_[2],_[3],E&8&&{paint:{"line-color":I[3],"line-width":ht,"line-opacity":W(1,.5)}},E&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};E&258&&(j.$$scope={dirty:E,ctx:I}),t.$set(j);const F=E&1?Z(y,[y[0],y[1],y[2],{layout:{visibility:I[0]?"visible":"none"}}]):{};o.$set(F);const G=E&25?Z(S,[S[0],E&16&&{filter:["all",Ct,I[4]]},S[2],S[3],E&8&&{paint:{"fill-color":I[3],"fill-opacity":W(.2,.5)}},E&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};E&258&&(G.$$scope={dirty:E,ctx:I}),u.$set(G);const D=E&25?Z(M,[M[0],E&16&&{filter:["all",Ct,I[4]]},E&8&&{paint:{"line-color":I[3],"line-opacity":.5,"line-width":.7*ht}},E&1&&{layout:{visibility:I[0]?"visible":"none"}}]):{};a.$set(D)},i(I){f||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(o.$$.fragment,I),m(u.$$.fragment,I),m(a.$$.fragment,I),f=!0)},o(I){d(e.$$.fragment,I),d(t.$$.fragment,I),d(o.$$.fragment,I),d(u.$$.fragment,I),d(a.$$.fragment,I),f=!1},d(I){I&&(p(n),p(l),p(i),p(s)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I)}}}function Nc(r){let e,n;return e=new yt({props:{data:r[2],$$slots:{default:[Dc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rc(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,{filterText:i}=e,u=$r("v1");const s=["!=","hide_while_editing",!0],a=["!=","endpoint",!0];return r.$$set=f=>{"schemesGj"in f&&n(6,l=f.schemesGj),"showSchemes"in f&&n(0,o=f.showSchemes),"filterText"in f&&n(1,i=f.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Gr(l))},[o,i,t,u,s,a,l]}class Bc extends z{constructor(e){super(),q(this,e,Rc,Nc,H,{schemesGj:6,showSchemes:0,filterText:1})}}function rr(r,e,n){const t=r.slice();return t[13]=e[n],t}function Gc(r){let e,n;return e=new vc({props:{loadFile:r[7]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lr(r){let e,n,t,l,o,i;function u(g){r[8](g)}function s(g){r[9](g)}function a(g){r[10](g)}function f(g){r[11](g)}let c={schemes:r[2]};return r[1]!==void 0&&(c.schemesGj=r[1]),r[3]!==void 0&&(c.schemesToBeShown=r[3]),r[4]!==void 0&&(c.filterText=r[4]),r[5]!==void 0&&(c.show=r[5]),e=new Ls({props:c}),V.push(()=>X(e,"schemesGj",u)),V.push(()=>X(e,"schemesToBeShown",s)),V.push(()=>X(e,"filterText",a)),V.push(()=>X(e,"show",f)),{c(){h(e.$$.fragment)},m(g,_){b(e,g,_),i=!0},p(g,_){const O={};_&4&&(O.schemes=g[2]),!n&&_&2&&(n=!0,O.schemesGj=g[1],K(()=>n=!1)),!t&&_&8&&(t=!0,O.schemesToBeShown=g[3],K(()=>t=!1)),!l&&_&16&&(l=!0,O.filterText=g[4],K(()=>l=!1)),!o&&_&32&&(o=!0,O.show=g[5],K(()=>o=!1)),e.$set(O)},i(g){i||(m(e.$$.fragment,g),i=!0)},o(g){d(e.$$.fragment,g),i=!1},d(g){v(e,g)}}}function or(r){let e,n;return e=new Cc({props:{schemesGj:r[1],scheme:r[13]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sr(r){let e=r[3].has(r[13].scheme_reference),n,t,l=e&&or(r);return{c(){l&&l.c(),n=je()},m(o,i){l&&l.m(o,i),$(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[13].scheme_reference)),e?l?(l.p(o,i),i&12&&m(l,1)):(l=or(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(ae(),d(l,1,1,()=>{l=null}),fe())},i(o){t||(m(l),t=!0)},o(o){d(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function Hc(r){let e,n,t,l,o,i,u,s,a,f,c=en()=="Private (development)",g,_,O,y,T,S,L,M;o=new Zr({props:{boundaryGeojson:r[1]}}),u=new ml({}),a=new Hr({});let N=c&&Gc(r);_=new Jr({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),y=new cr({props:{errorMessage:r[0]}});let I=r[2].size>0&&lr(r),E=He(r[2].values()),P=[];for(let F=0;F<E.length;F+=1)P[F]=sr(rr(r,E,F));const j=F=>d(P[F],1,1,()=>{P[F]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),N&&N.c(),g=C(),h(_.$$.fragment),O=C(),h(y.$$.fragment),T=C(),I&&I.c(),S=C(),L=A("ul");for(let F=0;F<P.length;F+=1)P[F].c();ye(n,"display","flex"),ye(n,"justify-content","space-between"),x(e,"slot","sidebar"),x(e,"class","govuk-prose")},m(F,G){$(F,e,G),k(e,n),k(n,t),k(n,l),b(o,n,null),k(e,i),b(u,e,null),k(e,s),b(a,e,null),k(e,f),N&&N.m(e,null),k(e,g),b(_,e,null),k(e,O),b(y,e,null),k(e,T),I&&I.m(e,null),k(e,S),k(e,L);for(let D=0;D<P.length;D+=1)P[D]&&P[D].m(L,null);M=!0},p(F,G){const D={};G&2&&(D.boundaryGeojson=F[1]),o.$set(D),c&&N.p(F,G);const se={};if(G&1&&(se.errorMessage=F[0]),y.$set(se),F[2].size>0?I?(I.p(F,G),G&4&&m(I,1)):(I=lr(F),I.c(),m(I,1),I.m(e,S)):I&&(ae(),d(I,1,1,()=>{I=null}),fe()),G&14){E=He(F[2].values());let J;for(J=0;J<E.length;J+=1){const be=rr(F,E,J);P[J]?(P[J].p(be,G),m(P[J],1)):(P[J]=sr(be),P[J].c(),m(P[J],1),P[J].m(L,null))}for(ae(),J=E.length;J<P.length;J+=1)j(J);fe()}},i(F){if(!M){m(o.$$.fragment,F),m(u.$$.fragment,F),m(a.$$.fragment,F),m(N),m(_.$$.fragment,F),m(y.$$.fragment,F),m(I);for(let G=0;G<E.length;G+=1)m(P[G]);M=!0}},o(F){d(o.$$.fragment,F),d(u.$$.fragment,F),d(a.$$.fragment,F),d(N),d(_.$$.fragment,F),d(y.$$.fragment,F),d(I),P=P.filter(Boolean);for(let G=0;G<P.length;G+=1)d(P[G]);M=!1},d(F){F&&p(e),v(o),v(u),v(a),N&&N.d(),v(_),v(y),I&&I.d(),It(P,F)}}}function Uc(r){let e,n,t,l,o,i,u;return e=new Kr({}),t=new Bc({props:{schemesGj:r[1],filterText:r[4],showSchemes:r[5]}}),i=new hc({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),o=A("div"),h(i.$$.fragment),x(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),$(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&2&&(f.schemesGj=s[1]),a&16&&(f.filterText=s[4]),a&32&&(f.showSchemes=s[5]),t.$set(f)},i(s){u||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),v(i)}}}function zc(r){let e,n,t;return n=new Ur({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Uc]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),x(e,"slot","main")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.style=l[6]),o&65586&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function qc(r){let e,n;return e=new xr({props:{$$slots:{main:[zc],sidebar:[Hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&65663&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wc(r,e,n){let t;Ze(r,gn,T=>n(6,t=T)),nn(()=>{zr()});const l=new URLSearchParams(window.location.search);gn.set(l.get("style")||"dataviz");let o="",i={type:"FeatureCollection",features:[],schemes:{}},u=new Map,s=new Set,a="",f=!0;function c(T){try{n(1,i=JSON.parse(T)),n(2,u=gs(i)),n(0,o="")}catch(S){n(0,o=`The file you loaded is broken: ${S}`)}}function g(T){i=T,n(1,i)}function _(T){s=T,n(3,s)}function O(T){a=T,n(4,a)}function y(T){f=T,n(5,f)}return[o,i,u,s,a,f,t,c,g,_,O,y]}class Vc extends z{constructor(e){super(),q(this,e,Wc,qc,H,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new Vc({target:document.getElementById("app")});
