import{S as Y,i as X,s as x,O as be,e as T,j as c,k as B,T as ye,U as ke,V as ve,t as z,o as I,p as P,l as p,f as q,an as Me,x as N,N as Re,b1 as rn,K as Rt,Y as oe,v as ae,J as Se,F as sn,h as H,m as K,q as Q,E as an,ab as Ne,Z as je,b2 as un,b3 as mt,aN as fn,b4 as cn,w as Ze,aI as dn,al as mn,aj as Ge,b5 as _n,b as qe,c as ot,n as it,r as ge,aR as lt,b6 as he,a7 as J,b7 as Le,ag as ne,aT as De,b8 as gn,_ as ze,$ as Ce,a9 as rt,a2 as st,b9 as hn,ac as bn,ad as yn,u as kn,ba as vn,aV as Et,ap as _t,aq as Ae,bb as wn,bc as pn,aU as Ut,a0 as Zt,a8 as Ln,bd as gt,be as nt,bf as Tn,bg as Mn,a4 as ht,aS as zn,aO as bt,af as Cn,a as at,R as Sn}from"./index-c82dc96a.js";function In(l){let e,t;const n=l[1].default,o=be(n,l,l[0],null);return{c(){e=T("div"),o&&o.c(),c(e,"class","govuk-button-group")},m(i,r){B(i,e,r),o&&o.m(e,null),t=!0},p(i,[r]){o&&o.p&&(!t||r&1)&&ye(o,n,i,i[0],t?ve(n,i[0],r,null):ke(i[0]),null)},i(i){t||(z(o,i),t=!0)},o(i){I(o,i),t=!1},d(i){i&&P(e),o&&o.d(i)}}}function Bn(l,e,t){let{$$slots:n={},$$scope:o}=e;return l.$$set=i=>{"$$scope"in i&&t(0,o=i.$$scope)},[o,n]}class io extends Y{constructor(e){super(),X(this,e,Bn,In,x,{})}}function Pn(l){let e,t,n;const o=l[3].default,i=be(o,l,l[2],null);return{c(){e=T("fieldset"),t=T("div"),i&&i.c(),c(t,"class",l[0]),c(t,"data-module","govuk-checkboxes"),c(e,"class","govuk-fieldset")},m(r,s){B(r,e,s),p(e,t),i&&i.m(t,null),n=!0},p(r,[s]){i&&i.p&&(!n||s&4)&&ye(i,o,r,r[2],n?ve(o,r[2],s,null):ke(r[2]),null)},i(r){n||(z(i,r),n=!0)},o(r){I(i,r),n=!1},d(r){r&&P(e),i&&i.d(r)}}}function Rn(l,e,t){let{$$slots:n={},$$scope:o}=e,{small:i=!1}=e,r=i?"govuk-checkboxes--small":"govuk-checkboxes";return l.$$set=s=>{"small"in s&&t(1,i=s.small),"$$scope"in s&&t(2,o=s.$$scope)},[r,i,o,n]}class ro extends Y{constructor(e){super(),X(this,e,Rn,Pn,x,{small:1})}}const En=l=>({}),yt=l=>({});function Un(l){let e,t,n,o,i,r,s,u,f;const a=l[5].default,m=be(a,l,l[4],null),g=l[5].right,b=be(g,l,l[4],yt);return{c(){e=T("div"),t=T("input"),n=q(),o=T("label"),m&&m.c(),i=q(),r=T("span"),b&&b.c(),c(t,"type","checkbox"),c(t,"class","govuk-checkboxes__input"),c(t,"id",l[3]),c(o,"class","govuk-label govuk-checkboxes__label"),c(o,"for",l[3]),c(o,"title",l[1]),Me(r,"float","right"),c(e,"class","govuk-checkboxes__item"),c(e,"style",l[2])},m(h,U){B(h,e,U),p(e,t),t.checked=l[0],p(e,n),p(e,o),m&&m.m(o,null),p(e,i),p(e,r),b&&b.m(r,null),s=!0,u||(f=[N(t,"change",l[7]),N(t,"change",l[6])],u=!0)},p(h,[U]){U&1&&(t.checked=h[0]),m&&m.p&&(!s||U&16)&&ye(m,a,h,h[4],s?ve(a,h[4],U,null):ke(h[4]),null),(!s||U&2)&&c(o,"title",h[1]),b&&b.p&&(!s||U&16)&&ye(b,g,h,h[4],s?ve(g,h[4],U,En):ke(h[4]),yt)},i(h){s||(z(m,h),z(b,h),s=!0)},o(h){I(m,h),I(b,h),s=!1},d(h){h&&P(e),m&&m.d(h),b&&b.d(h),u=!1,Re(f)}}}function Zn(l,e,t){let{$$slots:n={},$$scope:o}=e;const i=rn(n);let{checked:r}=e,{hint:s=null}=e,f=i.right!==void 0?"float: none":"",a=Rt();function m(b){oe.call(this,l,b)}function g(){r=this.checked,t(0,r)}return l.$$set=b=>{"checked"in b&&t(0,r=b.checked),"hint"in b&&t(1,s=b.hint),"$$scope"in b&&t(4,o=b.$$scope)},[r,s,f,a,o,n,m,g]}class so extends Y{constructor(e){super(),X(this,e,Zn,Un,x,{checked:0,hint:1})}}function jn(l){let e,t,n,o,i,r,s;const u=l[3].default,f=be(u,l,l[2],null);return{c(){e=T("details"),t=T("summary"),n=T("span"),o=ae(l[0]),i=q(),r=T("div"),f&&f.c(),c(n,"class","govuk-details__summary-text"),c(t,"class","govuk-details__summary"),c(r,"class","govuk-details__text"),e.open=l[1],c(e,"class","govuk-details"),c(e,"data-module","govuk-details")},m(a,m){B(a,e,m),p(e,t),p(t,n),p(n,o),p(e,i),p(e,r),f&&f.m(r,null),s=!0},p(a,[m]){(!s||m&1)&&Se(o,a[0]),f&&f.p&&(!s||m&4)&&ye(f,u,a,a[2],s?ve(u,a[2],m,null):ke(a[2]),null),(!s||m&2)&&(e.open=a[1])},i(a){s||(z(f,a),s=!0)},o(a){I(f,a),s=!1},d(a){a&&P(e),f&&f.d(a)}}}function On(l,e,t){let{$$slots:n={},$$scope:o}=e,{label:i}=e,{open:r=!1}=e;return l.$$set=s=>{"label"in s&&t(0,i=s.label),"open"in s&&t(1,r=s.open),"$$scope"in s&&t(2,o=s.$$scope)},[i,r,o,n]}class Wn extends Y{constructor(e){super(),X(this,e,On,jn,x,{label:0,open:1})}}function kt(l,e,t){const n=l.slice();return n[9]=e[t][0],n[10]=e[t][1],n}function vt(l){let e;return{c(){e=T("option"),e.__value="",Ze(e,e.__value)},m(t,n){B(t,e,n)},d(t){t&&P(e)}}}function wt(l){let e,t=l[10]+"",n,o;return{c(){e=T("option"),n=ae(t),e.__value=o=l[9],Ze(e,e.__value)},m(i,r){B(i,e,r),p(e,n)},p(i,r){r&4&&t!==(t=i[10]+"")&&Se(n,t),r&4&&o!==(o=i[9])&&(e.__value=o,Ze(e,e.__value))},d(i){i&&P(e)}}}function Fn(l){let e,t,n,o,i,r,s;e=new an({props:{errorMessage:l[5]}});let u=l[3]&&vt(),f=Ne(l[2]),a=[];for(let m=0;m<f.length;m+=1)a[m]=wt(kt(l,f,m));return{c(){H(e.$$.fragment),t=q(),n=T("select"),u&&u.c(),o=je();for(let m=0;m<a.length;m+=1)a[m].c();c(n,"class","govuk-select"),c(n,"id",l[6]),n.disabled=l[4],l[0]===void 0&&un(()=>l[8].call(n))},m(m,g){K(e,m,g),B(m,t,g),B(m,n,g),u&&u.m(n,null),p(n,o);for(let b=0;b<a.length;b+=1)a[b]&&a[b].m(n,null);mt(n,l[0],!0),i=!0,r||(s=[N(n,"change",l[8]),N(n,"change",l[7])],r=!0)},p(m,g){const b={};if(g&32&&(b.errorMessage=m[5]),e.$set(b),m[3]?u||(u=vt(),u.c(),u.m(n,o)):u&&(u.d(1),u=null),g&4){f=Ne(m[2]);let h;for(h=0;h<f.length;h+=1){const U=kt(m,f,h);a[h]?a[h].p(U,g):(a[h]=wt(U),a[h].c(),a[h].m(n,null))}for(;h<a.length;h+=1)a[h].d(1);a.length=f.length}(!i||g&16)&&(n.disabled=m[4]),g&5&&mt(n,m[0])},i(m){i||(z(e.$$.fragment,m),i=!0)},o(m){I(e.$$.fragment,m),i=!1},d(m){m&&(P(t),P(n)),Q(e,m),u&&u.d(),fn(a,m),r=!1,Re(s)}}}function Vn(l){let e,t;return e=new sn({props:{label:l[1],id:l[6],$$slots:{default:[Fn]},$$scope:{ctx:l}}}),{c(){H(e.$$.fragment)},m(n,o){K(e,n,o),t=!0},p(n,[o]){const i={};o&2&&(i.label=n[1]),o&8253&&(i.$$scope={dirty:o,ctx:n}),e.$set(i)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function An(l,e,t){let{label:n}=e,{choices:o}=e,{emptyOption:i=!1}=e,{disabled:r=!1}=e,{errorMessage:s=""}=e,{value:u}=e,f=Rt();function a(g){oe.call(this,l,g)}function m(){u=cn(this),t(0,u),t(2,o)}return l.$$set=g=>{"label"in g&&t(1,n=g.label),"choices"in g&&t(2,o=g.choices),"emptyOption"in g&&t(3,i=g.emptyOption),"disabled"in g&&t(4,r=g.disabled),"errorMessage"in g&&t(5,s=g.errorMessage),"value"in g&&t(0,u=g.value)},[u,n,o,i,r,s,f,a,m]}class Nn extends Y{constructor(e){super(),X(this,e,An,Vn,x,{label:1,choices:2,emptyOption:3,disabled:4,errorMessage:5,value:0})}}function Dn(l,e){let t=new Set(l.getStyle().layers.filter(n=>n.type=="line").map(n=>n.id));if(e=="dataviz")return["Road network","Path"].filter(n=>t.has(n));if(e=="hybrid")return["Path","Road","Tunnel"].filter(n=>t.has(n));if(e=="streets"){let n=[];for(let o of["road","bridge","tunnel"])for(let i of["link","minor","minor_construction","motorway","motorway_construction","motorway_link","path_pedestrian","secondary_tertiary","secondary_tertiary_construction","service_track","service_track_construction","street","trunk_primary","trunk_primary_construction","trunk_primary_link"])n.push(`${o}_${i}`);return n.filter(o=>t.has(o))}return e=="uk-openzoomstack-light"?l.getStyle().layers.filter(n=>n["source-layer"]=="roads"&&n.type=="line").map(n=>n.id):[]}const ao=["==",["geometry-type"],"Polygon"],uo=["==",["geometry-type"],"LineString"],fo=["==",["geometry-type"],"Point"],co=["!=",["get","is_coverage_polygon"],!0],mo=["==",["get","is_coverage_polygon"],!0];function _o(){return{type:"FeatureCollection",features:[]}}function go(l,e,t){let n=["match",l];for(let[o,i]of Object.entries(e))n.push(o),n.push(i);return n.push(t),n}function ho(l,e,t){let n=["step",l];for(let o=1;o<e.length;o++)n.push(t[o-1]),n.push(e[o]);return n.push(t[t.length-1]),n}function Gn(l){return dn(l)}function bo(l){return l<1e3?Math.round(l)+" m":(l/1e3).toFixed(1)+"km"}function yo(l){var t,n;let e={type:"FeatureCollection",features:[]};for(let o of l.features)if(e.features.push(o),o.geometry.type=="LineString"&&!((t=o.properties)!=null&&t.hide_while_editing))for(let i of[o.geometry.coordinates[0],o.geometry.coordinates[o.geometry.coordinates.length-1]])e.features.push({type:"Feature",properties:{endpoint:!0,scheme_reference:(n=o.properties)==null?void 0:n.scheme_reference},geometry:{type:"Point",coordinates:i}});return e}function ko(l){return{id:l,beforeId:qn(l)}}function qn(l){let e=mn(Ge);if(!e){console.warn(`getBeforeId(${l}) called before map is ready. Z-ordering may be incorrect.`);return}let t,n=!1;for(let o=pt.length-1;o>=0;o--){let i=pt[o];if(i==l){n=!0;break}e.getLayer(i)&&(t=i)}if(!n)throw new Error(`Layer ID ${l} not defined in layerZorder`);return t}let M=l=>l,te=l=>l,Hn=l=>l,Kn=l=>l,Qn=l=>l,Jn=l=>l,Yn=l=>l;const pt=[Yn("raster-basemap"),M("parliamentary_constituencies"),M("parliamentary_constituencies-outline"),M("wards"),M("wards-outline"),M("combined_authorities"),M("combined_authorities-outline"),M("local_authority_districts"),M("local_authority_districts-outline"),M("local_planning_authorities"),M("local_planning_authorities-outline"),M("census_output_areas"),M("census_output_areas-outline"),M("imd"),M("imd-outline"),M("pollution"),M("road_noise"),M("osmm"),M("osmm-outline"),M("mrn"),M("srn"),M("bus_routes"),M("trams"),M("national_cycle_network"),M("cycle_paths"),M("pct_commute"),M("pct_school"),M("road_widths"),M("road_speeds"),M("pavement_widths"),M("gradient"),M("gradient_arrows"),M("education"),M("hospitals"),M("sports_spaces"),M("railway_stations"),M("cycle_parking"),M("crossings"),M("vehicle_counts"),M("stats19"),M("bus_stops"),te("interventions-coverage-polygons-outlines"),te(M("interventions-polygons")),te(M("interventions-polygons-outlines")),te("hover-polygons"),te("hover-lines"),te(M("interventions-lines")),te(M("interventions-lines-endpoints")),te("hover-points"),te(M("interventions-points")),M("problems"),te("edit-polygon-fill"),te("edit-polygon-lines"),te("edit-polygon-vertices"),te("draw-split-route"),te("route-points"),te("route-lines"),te("route-polygons"),Hn("road_label"),Jn(Kn(Qn("Road labels"))),te("boundary"),M("measurement-line"),te("georeferenced-image"),M("cover-interactive-layers")];function Xn(l){let e,t,n;function o(r){l[2](r)}let i={label:"Basemap",choices:_n(),disabled:l[0]};return l[1]!==void 0&&(i.value=l[1]),e=new Nn({props:i}),qe.push(()=>ot(e,"value",o)),{c(){H(e.$$.fragment)},m(r,s){K(e,r,s),n=!0},p(r,[s]){const u={};s&1&&(u.disabled=r[0]),!t&&s&2&&(t=!0,u.value=r[1],it(()=>t=!1)),e.$set(u)},i(r){n||(z(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){Q(e,r)}}}function xn(l,e,t){let n;ge(l,lt,r=>t(1,n=r));let{disabled:o=!1}=e;function i(r){n=r,lt.set(n)}return l.$$set=r=>{"disabled"in r&&t(0,o=r.disabled)},[o,n,i]}class vo extends Y{constructor(e){super(),X(this,e,xn,Xn,x,{disabled:0})}}function $n(l){let e,t;return{c(){e=he("svg"),t=he("path"),c(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),c(e,"viewBox","0 0 14 14"),c(e,"width","13"),c(e,"height","13"),c(e,"class","svelte-en2qvf")},m(n,o){B(n,e,o),p(e,t)},p:J,i:J,o:J,d(n){n&&P(e)}}}class jt extends Y{constructor(e){super(),X(this,e,null,$n,x,{})}}function el(l){let e,t;return{c(){e=he("svg"),t=he("path"),c(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),c(e,"viewBox","0 0 30 30"),c(e,"fill","none"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"class","svelte-d2loi5")},m(n,o){B(n,e,o),p(e,t)},p:J,i:J,o:J,d(n){n&&P(e)}}}class Ot extends Y{constructor(e){super(),X(this,e,null,el,x,{})}}function tl(l){let e,t;return{c(){e=T("img"),ne(e.src,t=l[3]+"area.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,o){B(n,e,o)},p(n,o){o&8&&!ne(e.src,t=n[3]+"area.svg")&&c(e,"src",t),o&64&&c(e,"alt",n[6])},d(n){n&&P(e)}}}function nl(l){let e,t;return{c(){e=T("img"),ne(e.src,t=l[3]+"reverse.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,o){B(n,e,o)},p(n,o){o&8&&!ne(e.src,t=n[3]+"reverse.svg")&&c(e,"src",t),o&64&&c(e,"alt",n[6])},d(n){n&&P(e)}}}function ll(l){let e,t;return{c(){e=T("img"),ne(e.src,t=l[3]+"poi.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,o){B(n,e,o)},p(n,o){o&8&&!ne(e.src,t=n[3]+"poi.svg")&&c(e,"src",t),o&64&&c(e,"alt",n[6])},d(n){n&&P(e)}}}function ol(l){let e,t;return{c(){e=T("img"),ne(e.src,t=l[3]+"postal_code.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,o){B(n,e,o)},p(n,o){o&8&&!ne(e.src,t=n[3]+"postal_code.svg")&&c(e,"src",t),o&64&&c(e,"alt",n[6])},d(n){n&&P(e)}}}function il(l){let e,t;return{c(){e=T("img"),ne(e.src,t=l[3]+"street.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,o){B(n,e,o)},p(n,o){o&8&&!ne(e.src,t=n[3]+"street.svg")&&c(e,"src",t),o&64&&c(e,"alt",n[6])},d(n){n&&P(e)}}}function rl(l){let e,t;return{c(){e=T("img"),ne(e.src,t=l[3]+"road.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,o){B(n,e,o)},p(n,o){o&8&&!ne(e.src,t=n[3]+"road.svg")&&c(e,"src",t),o&64&&c(e,"alt",n[6])},d(n){n&&P(e)}}}function sl(l){let e,t;return{c(){e=T("img"),ne(e.src,t=l[3]+"housenumber.svg")||c(e,"src",t),c(e,"alt",l[6]),c(e,"class","svelte-ltkwvy")},m(n,o){B(n,e,o)},p(n,o){o&8&&!ne(e.src,t=n[3]+"housenumber.svg")&&c(e,"src",t),o&64&&c(e,"alt",n[6])},d(n){n&&P(e)}}}function al(l){let e,t,n,o;return{c(){e=T("img"),ne(e.src,t=l[5])||c(e,"src",t),c(e,"alt",l[4]),c(e,"class","svelte-ltkwvy")},m(i,r){B(i,e,r),n||(o=N(e,"error",l[14]),n=!0)},p(i,r){r&32&&!ne(e.src,t=i[5])&&c(e,"src",t),r&16&&c(e,"alt",i[4])},d(i){i&&P(e),n=!1,o()}}}function Lt(l){let e,t;return{c(){e=T("span"),t=ae(l[6]),c(e,"class","secondary svelte-ltkwvy")},m(n,o){B(n,e,o),p(e,t)},p(n,o){o&64&&Se(t,n[6])},d(n){n&&P(e)}}}function ul(l){var F,V;let e,t,n,o,i,r,s,u,f=(l[7]?l[0].place_name:l[0].place_name.replace(/,.*/,""))+"",a,m,g=l[2]==="always"||l[2]&&!l[0].address&&((F=l[0].properties)==null?void 0:F.kind)!=="road"&&((V=l[0].properties)==null?void 0:V.kind)!=="road_relation"&&!l[0].id.startsWith("address.")&&!l[0].id.startsWith("postal_code.")&&(!l[0].id.startsWith("poi.")||!l[5])&&!l[7],b,h,U=(l[7]?"":l[0].place_name.replace(/[^,]*,?\s*/,""))+"",k,R,A;function y(C,L){var ie,_;return L&1&&(t=null),L&1&&(n=null),L&1&&(o=null),C[5]?al:C[0].address?sl:((ie=C[0].properties)==null?void 0:ie.kind)==="road"||((_=C[0].properties)==null?void 0:_.kind)==="road_relation"?rl:(t==null&&(t=!!C[0].id.startsWith("address.")),t?il:(n==null&&(n=!!C[0].id.startsWith("postal_code.")),n?ol:(o==null&&(o=!!C[0].id.startsWith("poi.")),o?ll:C[7]?nl:tl)))}let E=y(l,-1),v=E(l),W=g&&Lt(l);return{c(){e=T("li"),v.c(),i=q(),r=T("span"),s=T("span"),u=T("span"),a=ae(f),m=q(),W&&W.c(),b=q(),h=T("span"),k=ae(U),c(u,"class","primary svelte-ltkwvy"),c(s,"class","svelte-ltkwvy"),c(h,"class","line2 svelte-ltkwvy"),c(r,"class","texts svelte-ltkwvy"),c(e,"tabindex","0"),c(e,"data-selected",l[1]),c(e,"class","svelte-ltkwvy"),Le(e,"selected",l[1])},m(C,L){B(C,e,L),v.m(e,null),p(e,i),p(e,r),p(r,s),p(s,u),p(u,a),p(s,m),W&&W.m(s,null),p(r,b),p(r,h),p(h,k),R||(A=[N(e,"mouseenter",l[12]),N(e,"focus",l[13])],R=!0)},p(C,[L]){var ie,_;E===(E=y(C,L))&&v?v.p(C,L):(v.d(1),v=E(C),v&&(v.c(),v.m(e,i))),L&1&&f!==(f=(C[7]?C[0].place_name:C[0].place_name.replace(/,.*/,""))+"")&&Se(a,f),L&37&&(g=C[2]==="always"||C[2]&&!C[0].address&&((ie=C[0].properties)==null?void 0:ie.kind)!=="road"&&((_=C[0].properties)==null?void 0:_.kind)!=="road_relation"&&!C[0].id.startsWith("address.")&&!C[0].id.startsWith("postal_code.")&&(!C[0].id.startsWith("poi.")||!C[5])&&!C[7]),g?W?W.p(C,L):(W=Lt(C),W.c(),W.m(s,null)):W&&(W.d(1),W=null),L&1&&U!==(U=(C[7]?"":C[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&Se(k,U),L&2&&c(e,"data-selected",C[1]),L&2&&Le(e,"selected",C[1])},i:J,o:J,d(C){C&&P(e),v.d(),W&&W.d(),R=!1,Re(A)}}}function fl(l,e,t){var y;let n,o,{feature:i}=e,{selected:r=!1}=e,{showPlaceType:s}=e,{missingIconsCache:u}=e,{iconsBaseUrl:f}=e;const a=(y=i.properties)==null?void 0:y.categories;let m,g,b=0,h=i.place_type[0]==="reverse";function U(E){g&&u.add(g),t(10,b++,b)}function k(E){oe.call(this,l,E)}function R(E){oe.call(this,l,E)}const A=E=>U(E.currentTarget);return l.$$set=E=>{"feature"in E&&t(0,i=E.feature),"selected"in E&&t(1,r=E.selected),"showPlaceType"in E&&t(2,s=E.showPlaceType),"missingIconsCache"in E&&t(9,u=E.missingIconsCache),"iconsBaseUrl"in E&&t(3,f=E.iconsBaseUrl)},l.$$.update=()=>{var E,v,W,F;if(l.$$.dirty&3640)do t(11,n--,n),t(4,m=a==null?void 0:a[n]),t(5,g=m?f+m.replace(/ /g,"_")+".svg":void 0);while(n>-1&&(!g||u.has(g)));l.$$.dirty&1&&t(6,o=i.id.startsWith("poi.")?(v=(E=i.properties)==null?void 0:E.categories)==null?void 0:v.join(", "):((F=(W=i.properties)==null?void 0:W.place_type_name)==null?void 0:F[0])??i.place_type[0])},t(11,n=(a==null?void 0:a.length)??0),[i,r,s,f,m,g,o,h,U,u,b,n,k,R,A]}class cl extends Y{constructor(e){super(),X(this,e,fl,ul,x,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function dl(l){let e;return{c(){e=T("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',c(e,"class","svelte-7cmwmc")},m(t,n){B(t,e,n)},p:J,i:J,o:J,d(t){t&&P(e)}}}class ml extends Y{constructor(e){super(),X(this,e,null,dl,x,{})}}function _l(l){let e,t;return{c(){e=he("svg"),t=he("path"),c(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),c(e,"viewBox","0 0 60.006 21.412"),c(e,"width","14"),c(e,"height","20"),c(e,"class","svelte-en2qvf")},m(n,o){B(n,e,o),p(e,t)},p:J,i:J,o:J,d(n){n&&P(e)}}}class gl extends Y{constructor(e){super(),X(this,e,null,_l,x,{})}}function hl(l){let e,t,n;return{c(){e=he("svg"),t=he("circle"),n=he("path"),c(t,"cx","4.789"),c(t,"cy","4.787"),c(t,"r","3.85"),Me(t,"stroke-width","1.875"),Me(t,"fill","none"),c(n,"d","M12.063 12.063 7.635 7.635"),Me(n,"stroke-width","1.875"),Me(n,"stroke-linecap","round"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","13"),c(e,"height","13"),c(e,"viewBox","0 0 13 13"),c(e,"class","svelte-1bpbt60")},m(o,i){B(o,e,i),p(e,t),p(e,n)},p:J,i:J,o:J,d(o){o&&P(e)}}}class bl extends Y{constructor(e){super(),X(this,e,null,hl,x,{})}}function yl(l,e,t){const n=e[1],o=e[0],i=n-o;return l===n&&t?l:((l-o)%i+i)%i+o}function Tt(l){const e=[...l];return e[2]<e[0]&&(e[2]+=360),e}let Ue;async function kl(l,e,t){const n=l==null?void 0:l.getCenterAndZoom();for(const o of e??[])if(!(n&&(o.minZoom!=null&&o.minZoom>n[0]||o.maxZoom!=null&&o.maxZoom<n[0]))){if(o.type==="fixed")return o.coordinates.join(",");e:if(o.type==="client-geolocation"){if(Ue&&o.cachedLocationExpiry&&Ue.time+o.cachedLocationExpiry>Date.now()){if(!Ue.coords)break e;return Ue.coords}let i;try{return i=await new Promise((r,s)=>{t.signal.addEventListener("abort",()=>{s(Error("aborted"))}),navigator.geolocation.getCurrentPosition(u=>{r([u.coords.longitude,u.coords.latitude].map(f=>f.toFixed(6)).join(","))},u=>{s(u)},o)}),i}catch{}finally{o.cachedLocationExpiry&&(Ue={time:Date.now(),coords:i})}if(t.signal.aborted)return}if(o.type==="server-geolocation")return"ip";if(n&&o.type==="map-center")return n[1].toFixed(6)+","+n[2].toFixed(6)}}function Mt(l,e,t){const n=l.slice();return n[81]=e[t],n[83]=t,n}function zt(l){let e,t;return e=new ml({}),{c(){H(e.$$.fragment)},m(n,o){K(e,n,o),t=!0},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Ct(l){let e,t,n,o,i;return t=new gl({}),{c(){e=T("button"),H(t.$$.fragment),c(e,"type","button"),c(e,"title",l[9]),c(e,"class","svelte-zh3kmv"),Le(e,"active",l[0])},m(r,s){B(r,e,s),K(t,e,null),n=!0,o||(i=N(e,"click",l[67]),o=!0)},p(r,s){(!n||s[0]&512)&&c(e,"title",r[9]),(!n||s[0]&1)&&Le(e,"active",r[0])},i(r){n||(z(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){r&&P(e),Q(t),o=!1,i()}}}function vl(l){let e,t=[],n=new Map,o,i,r,s=Ne(l[14]);const u=f=>f[81].id+(f[81].address?","+f[81].address:"");for(let f=0;f<s.length;f+=1){let a=Mt(l,s,f),m=u(a);n.set(m,t[f]=St(m,a))}return{c(){e=T("ul");for(let f=0;f<t.length;f+=1)t[f].c();c(e,"class","svelte-zh3kmv")},m(f,a){B(f,e,a);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);o=!0,i||(r=[N(e,"mouseleave",l[71]),N(e,"blur",l[72])],i=!0)},p(f,a){a[0]&17880064&&(s=Ne(f[14]),ze(),t=bn(t,a,u,1,f,s,n,e,yn,St,null,Mt),Ce())},i(f){if(!o){for(let a=0;a<s.length;a+=1)z(t[a]);o=!0}},o(f){for(let a=0;a<t.length;a+=1)I(t[a]);o=!1},d(f){f&&P(e);for(let a=0;a<t.length;a+=1)t[a].d();i=!1,Re(r)}}}function wl(l){let e,t,n,o,i,r;return t=new Ot({}),{c(){e=T("div"),H(t.$$.fragment),n=q(),o=T("div"),i=ae(l[7]),c(o,"class","svelte-zh3kmv"),c(e,"class","no-results svelte-zh3kmv")},m(s,u){B(s,e,u),K(t,e,null),p(e,n),p(e,o),p(o,i),r=!0},p(s,u){(!r||u[0]&128)&&Se(i,s[7])},i(s){r||(z(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&P(e),Q(t)}}}function pl(l){let e="",t;return{c(){t=ae(e)},m(n,o){B(n,t,o)},p:J,i:J,o:J,d(n){n&&P(t)}}}function Ll(l){let e,t,n,o,i,r,s,u,f,a,m;return t=new Ot({}),u=new jt({}),{c(){e=T("div"),H(t.$$.fragment),n=q(),o=T("div"),i=ae(l[6]),r=q(),s=T("button"),H(u.$$.fragment),c(o,"class","svelte-zh3kmv"),c(s,"class","svelte-zh3kmv"),c(e,"class","error svelte-zh3kmv")},m(g,b){B(g,e,b),K(t,e,null),p(e,n),p(e,o),p(o,i),p(e,r),p(e,s),K(u,s,null),f=!0,a||(m=N(s,"click",l[68]),a=!0)},p(g,b){(!f||b[0]&64)&&Se(i,g[6])},i(g){f||(z(t.$$.fragment,g),z(u.$$.fragment,g),f=!0)},o(g){I(t.$$.fragment,g),I(u.$$.fragment,g),f=!1},d(g){g&&P(e),Q(t),Q(u),a=!1,m()}}}function St(l,e){let t,n,o;function i(){return e[69](e[83])}function r(){return e[70](e[81])}return n=new cl({props:{feature:e[81],showPlaceType:e[10],selected:e[15]===e[83],missingIconsCache:e[20],iconsBaseUrl:e[12]}}),n.$on("mouseenter",i),n.$on("focus",r),{key:l,first:null,c(){t=je(),H(n.$$.fragment),this.first=t},m(s,u){B(s,t,u),K(n,s,u),o=!0},p(s,u){e=s;const f={};u[0]&16384&&(f.feature=e[81]),u[0]&1024&&(f.showPlaceType=e[10]),u[0]&49152&&(f.selected=e[15]===e[83]),u[0]&4096&&(f.iconsBaseUrl=e[12]),n.$set(f)},i(s){o||(z(n.$$.fragment,s),o=!0)},o(s){I(n.$$.fragment,s),o=!1},d(s){s&&P(t),Q(n,s)}}}function Tl(l){let e,t,n,o,i,r,s,u,f,a,m,g,b,h,U,k,R,A,y,E,v,W=!1;i=new bl({}),m=new jt({});let F=l[19]&&zt(),V=l[5]===!0&&Ct(l);const C=l[59].default,L=be(C,l,l[58],null),ie=[Ll,pl,wl,vl],_=[];function we(S,D){var le,w;return S[18]?0:S[16]?((le=S[14])==null?void 0:le.length)===0?2:S[16]&&((w=S[14])!=null&&w.length)?3:-1:1}return~(k=we(l))&&(R=_[k]=ie[k](l)),{c(){e=q(),t=T("form"),n=T("div"),o=T("button"),H(i.$$.fragment),r=q(),s=T("input"),u=q(),f=T("div"),a=T("button"),H(m.$$.fragment),g=q(),F&&F.c(),b=q(),V&&V.c(),h=q(),L&&L.c(),U=q(),R&&R.c(),c(o,"class","search-button svelte-zh3kmv"),c(o,"type","button"),c(s,"placeholder",l[8]),c(s,"aria-label",l[8]),c(s,"class","svelte-zh3kmv"),c(a,"type","button"),c(a,"title",l[3]),c(a,"class","svelte-zh3kmv"),c(f,"class","clear-button-container svelte-zh3kmv"),Le(f,"displayable",l[1]!==""),c(n,"class","input-group svelte-zh3kmv"),c(t,"tabindex","0"),c(t,"class",A=De(l[2])+" svelte-zh3kmv"),Le(t,"can-collapse",l[4]&&l[1]==="")},m(S,D){B(S,e,D),B(S,t,D),p(t,n),p(n,o),K(i,o,null),p(n,r),p(n,s),l[61](s),Ze(s,l[1]),p(n,u),p(n,f),p(f,a),K(m,a,null),p(f,g),F&&F.m(f,null),p(n,b),V&&V.m(n,null),p(n,h),L&&L.m(n,null),p(t,U),~k&&_[k].m(t,null),y=!0,E||(v=[N(o,"click",l[60]),N(s,"input",l[62]),N(s,"focus",l[63]),N(s,"blur",l[64]),N(s,"keydown",l[22]),N(s,"input",l[65]),N(a,"click",l[66]),N(t,"submit",gn(l[21]))],E=!0)},p(S,D){(!y||D[0]&256)&&c(s,"placeholder",S[8]),(!y||D[0]&256)&&c(s,"aria-label",S[8]),D[0]&2&&s.value!==S[1]&&Ze(s,S[1]),(!y||D[0]&8)&&c(a,"title",S[3]),S[19]?F?D[0]&524288&&z(F,1):(F=zt(),F.c(),z(F,1),F.m(f,null)):F&&(ze(),I(F,1,1,()=>{F=null}),Ce()),(!y||D[0]&2)&&Le(f,"displayable",S[1]!==""),S[5]===!0?V?(V.p(S,D),D[0]&32&&z(V,1)):(V=Ct(S),V.c(),z(V,1),V.m(n,h)):V&&(ze(),I(V,1,1,()=>{V=null}),Ce()),L&&L.p&&(!y||D[1]&134217728)&&ye(L,C,S,S[58],y?ve(C,S[58],D,null):ke(S[58]),null);let le=k;k=we(S),k===le?~k&&_[k].p(S,D):(R&&(ze(),I(_[le],1,1,()=>{_[le]=null}),Ce()),~k?(R=_[k],R?R.p(S,D):(R=_[k]=ie[k](S),R.c()),z(R,1),R.m(t,null)):R=null),(!y||D[0]&4&&A!==(A=De(S[2])+" svelte-zh3kmv"))&&c(t,"class",A),(!y||D[0]&22)&&Le(t,"can-collapse",S[4]&&S[1]==="")},i(S){y||(z(W),z(i.$$.fragment,S),z(m.$$.fragment,S),z(F),z(V),z(L,S),z(R),y=!0)},o(S){I(W),I(i.$$.fragment,S),I(m.$$.fragment,S),I(F),I(V),I(L,S),I(R),y=!1},d(S){S&&(P(e),P(t)),Q(i),l[61](null),Q(m),F&&F.d(),V&&V.d(),L&&L.d(S),~k&&_[k].d(),E=!1,Re(v)}}}function Ml(l,e,t){let n,{$$slots:o={},$$scope:i}=e,{class:r=void 0}=e,{apiKey:s}=e,{bbox:u=void 0}=e,{clearButtonTitle:f="clear"}=e,{clearOnBlur:a=!1}=e,{collapsed:m=!1}=e,{country:g=void 0}=e,{debounceSearch:b=200}=e,{enableReverse:h=!1}=e,{errorMessage:U="Something went wrong…"}=e,{filter:k=()=>!0}=e,{flyTo:R=!0}=e,{fuzzyMatch:A=!0}=e,{language:y=void 0}=e,{limit:E=void 0}=e,{mapController:v=void 0}=e,{minLength:W=2}=e,{noResultsMessage:F="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:V="Search"}=e,{proximity:C=[{type:"server-geolocation"}]}=e,{reverseActive:L=h==="always"}=e,{reverseButtonTitle:ie="toggle reverse geocoding"}=e,{searchValue:_=""}=e,{showFullGeometry:we=!0}=e,{showPlaceType:S="ifNeeded"}=e,{showResultsWhileTyping:D=!0}=e,{selectFirst:le=!0}=e,{flyToSelected:w=!1}=e,{markerOnSelected:ue=!0}=e,{types:re=void 0}=e,{excludeTypes:fe=!1}=e,{zoom:Ee=16}=e,{maxZoom:Ie=18}=e,{apiUrl:He="https://api.maptiler.com/geocoding"}=e,{fetchParameters:Ke={}}=e,{iconsBaseUrl:ut="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.2/icons/"}=e,{adjustUrlQuery:Qe=d=>{}}=e;function Wt(){ce.focus()}function Ft(){ce.blur()}function ft(d,ee=!0){t(1,_=d),ee?(t(15,G=-1),dt()):(xe(),setTimeout(()=>{ce.focus(),ce.select()}))}function Vt(){t(14,j=void 0),t(55,Z=void 0),t(15,G=-1)}function At(){t(54,$=[]),t(55,Z=void 0)}let Be=!1,j,$,Z,ct="",ce,G=-1,de,Oe=[],Te,Pe,We,Je;const Nt=new Set,pe=rt();st(()=>{v&&(v.setEventHandler(void 0),v.indicateReverse(!1),v.setSelectedMarker(-1),v.setMarkers(void 0,void 0))});function dt(d){if(Pe&&(clearTimeout(Pe),Pe=void 0),G>-1&&j)t(55,Z=j[G]),t(1,_=Z.place_type[0]==="reverse"?Z.place_name:Z.place_name.replace(/,.*/,"")),t(18,de=void 0),t(54,$=void 0),t(15,G=-1);else if(_){const ee=d||!Ye(_);Xe(_,{exact:!0}).then(()=>{t(54,$=j),t(55,Z=void 0),ee&&Dt()}).catch(me=>t(18,de=me))}}function Ye(d){try{return hn(d,6)}catch{return!1}}async function Xe(d,{byId:ee=!1,exact:me=!1}={}){t(18,de=void 0),Te==null||Te.abort();const _e=new AbortController;t(19,Te=_e);try{const O=Ye(d),se=new URLSearchParams;if(y!==void 0&&se.set("language",Array.isArray(y)?y.join(","):y??""),re&&se.set("types",re.join(",")),fe&&se.set("excludeTypes",String(fe)),u&&se.set("bbox",u.map(Ve=>Ve.toFixed(6)).join(",")),g&&se.set("country",Array.isArray(g)?g.join(","):g),!ee&&!O){const Ve=await kl(v,C,_e);Ve&&se.set("proximity",Ve),(me||!D)&&se.set("autocomplete","false"),se.set("fuzzyMatch",String(A))}E!==void 0&&(!O||(re==null?void 0:re.length)===1)&&se.set("limit",String(E)),se.set("key",s),Qe(se);const Fe=He+"/"+encodeURIComponent(O?O.decimalLongitude+","+O.decimalLatitude:d)+".json?"+se.toString();if(Fe===ct){ee?(t(14,j=void 0),t(55,Z=Oe[0])):t(14,j=Oe);return}ct=Fe;const et=await fetch(Fe,{signal:_e.signal,...Ke});if(!et.ok)throw new Error(await et.text());const tt=await et.json();pe("response",{url:Fe,featureCollection:tt}),ee?(t(14,j=void 0),t(55,Z=tt.features[0]),Oe=[Z]):(t(14,j=tt.features.filter(k)),O&&j.unshift({type:"Feature",properties:{},id:"reverse_"+O.decimalLongitude+"_"+O.decimalLatitude,text:O.decimalLatitude+", "+O.decimalLongitude,place_name:O.decimalLatitude+", "+O.decimalLongitude,place_type:["reverse"],center:[O.decimalLongitude,O.decimalLatitude],bbox:[O.decimalLongitude,O.decimalLatitude,O.decimalLongitude,O.decimalLatitude],geometry:{type:"Point",coordinates:[O.decimalLongitude,O.decimalLatitude]}}),Oe=j,O&&ce.focus())}catch(O){if(O&&typeof O=="object"&&"name"in O&&O.name==="AbortError")return;throw O}finally{_e===Te&&t(19,Te=void 0)}}function Dt(){var me;if(!($!=null&&$.length)||!R)return;const d=[180,90,-180,-90],ee=!$.some(_e=>!_e.matching_text);for(const _e of $)if(ee||!_e.matching_text)for(const O of[0,1,2,3])d[O]=Math[O<2?"min":"max"](d[O],((me=_e.bbox)==null?void 0:me[O])??_e.center[O%2]);v&&$.length>0&&(Z&&d[0]===d[2]&&d[1]===d[3]?v.flyTo(Z.center,Ee):v.fitBounds(Tt(d),50,Ie))}function Gt(d){t(0,L=h==="always"),t(14,j=void 0),t(55,Z=void 0),t(15,G=-1),ft(d[1].toFixed(6)+", "+yl(d[0],[-180,180],!0).toFixed(6),!1)}function qt(d){if(!j)return;let ee=d.key==="ArrowDown"?1:d.key==="ArrowUp"?-1:0;ee&&(G===(le?0:-1)&&ee===-1&&t(15,G=j.length),t(15,G+=ee),G>=j.length&&t(15,G=-1),G<0&&le&&t(15,G=0),d.preventDefault())}function xe(d=!0){if(t(18,de=void 0),D){if(Pe&&clearTimeout(Pe),_.length<W)return;const ee=_;Pe=window.setTimeout(()=>{Xe(ee).catch(me=>t(18,de=me))},d?b:0)}else t(14,j=void 0),t(18,de=void 0)}function $e(d){t(55,Z=d),t(1,_=d.place_name),t(15,G=-1)}const Ht=()=>ce.focus();function Kt(d){qe[d?"unshift":"push"](()=>{ce=d,t(17,ce)})}function Qt(){_=this.value,t(1,_),t(13,Be),t(27,a)}const Jt=()=>t(13,Be=!0),Yt=()=>t(13,Be=!1),Xt=()=>xe(),xt=()=>{t(1,_=""),ce.focus()},$t=()=>t(0,L=!L),en=()=>t(18,de=void 0),tn=d=>t(15,G=d),nn=d=>$e(d),ln=()=>{le||t(15,G=-1)},on=()=>{};return l.$$set=d=>{"class"in d&&t(2,r=d.class),"apiKey"in d&&t(25,s=d.apiKey),"bbox"in d&&t(26,u=d.bbox),"clearButtonTitle"in d&&t(3,f=d.clearButtonTitle),"clearOnBlur"in d&&t(27,a=d.clearOnBlur),"collapsed"in d&&t(4,m=d.collapsed),"country"in d&&t(28,g=d.country),"debounceSearch"in d&&t(29,b=d.debounceSearch),"enableReverse"in d&&t(5,h=d.enableReverse),"errorMessage"in d&&t(6,U=d.errorMessage),"filter"in d&&t(30,k=d.filter),"flyTo"in d&&t(31,R=d.flyTo),"fuzzyMatch"in d&&t(32,A=d.fuzzyMatch),"language"in d&&t(33,y=d.language),"limit"in d&&t(34,E=d.limit),"mapController"in d&&t(35,v=d.mapController),"minLength"in d&&t(36,W=d.minLength),"noResultsMessage"in d&&t(7,F=d.noResultsMessage),"placeholder"in d&&t(8,V=d.placeholder),"proximity"in d&&t(37,C=d.proximity),"reverseActive"in d&&t(0,L=d.reverseActive),"reverseButtonTitle"in d&&t(9,ie=d.reverseButtonTitle),"searchValue"in d&&t(1,_=d.searchValue),"showFullGeometry"in d&&t(38,we=d.showFullGeometry),"showPlaceType"in d&&t(10,S=d.showPlaceType),"showResultsWhileTyping"in d&&t(39,D=d.showResultsWhileTyping),"selectFirst"in d&&t(11,le=d.selectFirst),"flyToSelected"in d&&t(40,w=d.flyToSelected),"markerOnSelected"in d&&t(41,ue=d.markerOnSelected),"types"in d&&t(42,re=d.types),"excludeTypes"in d&&t(43,fe=d.excludeTypes),"zoom"in d&&t(44,Ee=d.zoom),"maxZoom"in d&&t(45,Ie=d.maxZoom),"apiUrl"in d&&t(46,He=d.apiUrl),"fetchParameters"in d&&t(47,Ke=d.fetchParameters),"iconsBaseUrl"in d&&t(12,ut=d.iconsBaseUrl),"adjustUrlQuery"in d&&t(48,Qe=d.adjustUrlQuery),"$$scope"in d&&t(58,i=d.$$scope)},l.$$.update=()=>{if(l.$$.dirty[0]&134225920&&setTimeout(()=>{t(16,We=Be),a&&!Be&&t(1,_="")}),l.$$.dirty[0]&16386|l.$$.dirty[1]&32&&_.length<W&&(t(55,Z=void 0),t(14,j=void 0),t(18,de=void 0),t(54,$=j)),l.$$.dirty[1]&16777344&&we&&Z&&!Z.address&&Z.geometry.type==="Point"&&Z.place_type[0]!=="reverse"&&Xe(Z.id,{byId:!0}).catch(d=>t(18,de=d)),l.$$.dirty[1]&50356241&&(v&&Z&&Z.id!==Je&&R&&(!Z.bbox||Z.bbox[0]===Z.bbox[2]&&Z.bbox[1]===Z.bbox[3]?v.flyTo(Z.center,Z.id.startsWith("poi.")||Z.id.startsWith("address.")?Ie:Ee):v.fitBounds(Tt(Z.bbox),50,Ie),t(14,j=void 0),t(54,$=void 0),t(15,G=-1)),t(56,Je=Z==null?void 0:Z.id)),l.$$.dirty[0]&18432&&le&&j!=null&&j.length&&t(15,G=0),l.$$.dirty[0]&2050&&(le||t(15,G=-1)),l.$$.dirty[0]&16384|l.$$.dirty[1]&8388608&&$!==j&&t(54,$=void 0),l.$$.dirty[0]&81921|l.$$.dirty[1]&8388624&&v&&v.setEventHandler(d=>{switch(d.type){case"mapClick":L&&Gt(d.coordinates);break;case"markerClick":{const ee=j==null?void 0:j.find(me=>me.id===d.id);ee&&$e(ee)}break;case"markerMouseEnter":$&&t(15,G=We?(j==null?void 0:j.findIndex(ee=>ee.id===d.id))??-1:-1);break;case"markerMouseLeave":$&&t(15,G=-1);break}}),l.$$.dirty[0]&49152&&t(57,n=j==null?void 0:j[G]),l.$$.dirty[1]&67133969&&v&&n&&R&&w&&v.flyTo(n.center,n.id.startsWith("poi.")||n.id.startsWith("address.")?Ie:Ee),l.$$.dirty[1]&1040&&(ue||v==null||v.setMarkers(void 0,void 0)),l.$$.dirty[1]&75498512&&v&&ue&&!$&&(v.setMarkers(n?[n]:void 0,void 0),v.setSelectedMarker(n?0:-1)),l.$$.dirty[1]&25165840&&v&&v.setMarkers($,Z),l.$$.dirty[0]&32768|l.$$.dirty[1]&8388624&&$&&v&&v.setSelectedMarker(G),l.$$.dirty[0]&2|l.$$.dirty[1]&16&&v){const d=Ye(_);v.setReverseMarker(d?[d.decimalLongitude,d.decimalLatitude]:void 0)}l.$$.dirty[1]&67108864&&pe("select",n),l.$$.dirty[1]&16777216&&pe("pick",Z),l.$$.dirty[0]&81920&&pe("optionsVisibilityChange",We&&!!j),l.$$.dirty[0]&16384&&pe("featuresListed",j),l.$$.dirty[1]&8388608&&pe("featuresMarked",$),l.$$.dirty[0]&1&&pe("reverseToggle",L),l.$$.dirty[0]&2&&pe("queryChange",_),l.$$.dirty[0]&1|l.$$.dirty[1]&16&&v&&v.indicateReverse(L)},[L,_,r,f,m,h,U,F,V,ie,S,le,ut,Be,j,G,We,ce,de,Te,Nt,dt,qt,xe,$e,s,u,a,g,b,k,R,A,y,E,v,W,C,we,D,w,ue,re,fe,Ee,Ie,He,Ke,Qe,Wt,Ft,ft,Vt,At,$,Z,Je,n,i,o,Ht,Kt,Qt,Jt,Yt,Xt,xt,$t,en,tn,nn,ln,on]}class zl extends Y{constructor(e){super(),X(this,e,Ml,Tl,x,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}}function It(l){let e,t,n,o;return t=new zl({props:{mapController:l[1],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){e=T("div"),H(t.$$.fragment),c(e,"class",n=De(l[0])+" svelte-189syb7")},m(i,r){B(i,e,r),K(t,e,null),o=!0},p(i,r){const s={};r&2&&(s.mapController=i[1]),t.$set(s),(!o||r&1&&n!==(n=De(i[0])+" svelte-189syb7"))&&c(e,"class",n)},i(i){o||(z(t.$$.fragment,i),o=!0)},o(i){I(t.$$.fragment,i),o=!1},d(i){i&&P(e),Q(t)}}}function Cl(l){let e,t,n=l[1]&&It(l);return{c(){n&&n.c(),e=je()},m(o,i){n&&n.m(o,i),B(o,e,i),t=!0},p(o,[i]){o[1]?n?(n.p(o,i),i&2&&z(n,1)):(n=It(o),n.c(),z(n,1),n.m(e.parentNode,e)):n&&(ze(),I(n,1,1,()=>{n=null}),Ce())},i(o){t||(z(n),t=!0)},o(o){I(n),t=!1},d(o){o&&P(e),n&&n.d(o)}}}function Sl(l,e,t){let n;ge(l,Ge,r=>t(2,n=r));let{position:o="top-left"}=e,i;return kn(()=>{t(1,i=vn(n,Et))}),l.$$set=r=>{"position"in r&&t(0,o=r.position)},[o,i]}class wo extends Y{constructor(e){super(),X(this,e,Sl,Cl,x,{position:0})}}function Il(l,e,t){t===void 0&&(t={});var n=_t(l),o=_t(e),i=Ae(o[1]-n[1]),r=Ae(o[0]-n[0]),s=Ae(n[1]),u=Ae(o[1]),f=Math.pow(Math.sin(i/2),2)+Math.pow(Math.sin(r/2),2)*Math.cos(s)*Math.cos(u);return wn(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),t.units)}function po(l,e){return e===void 0&&(e={}),pn(l,function(t,n){var o=n.geometry.coordinates;return t+Il(o[0],o[1],e)},0)}const Lo={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",hovering:"black",lineEndpointColor:"black",streetview:"blue",measuringLine:"cyan"},To=10,Mo=10;function zo(){return Bl(["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"])}function Bl(l){return l[Math.floor(Math.random()*l.length)]}function Pl(l){let e;const t=l[16].default,n=be(t,l,l[24],null);return{c(){n&&n.c()},m(o,i){n&&n.m(o,i),e=!0},p(o,i){n&&n.p&&(!e||i&16777216)&&ye(n,t,o,o[24],e?ve(t,o[24],i,null):ke(o[24]),null)},i(o){e||(z(n,o),e=!0)},o(o){I(n,o),e=!1},d(o){n&&n.d(o)}}}function Rl(l){let e,t,n;function o(r){l[17](r)}let i={id:l[1],type:"circle",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[Pl]},$$scope:{ctx:l}};return l[0]!==void 0&&(i.hovered=l[0]),e=new Ut({props:i}),qe.push(()=>ot(e,"hovered",o)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){H(e.$$.fragment)},m(r,s){K(e,r,s),n=!0},p(r,[s]){const u={};s&2&&(u.id=r[1]),s&4&&(u.source=r[2]),s&8&&(u.sourceLayer=r[3]),s&16&&(u.beforeId=r[4]),s&32&&(u.beforeLayerType=r[5]),s&64&&(u.paint=r[6]),s&128&&(u.layout=r[7]),s&256&&(u.filter=r[8]),s&512&&(u.applyToClusters=r[9]),s&1024&&(u.minzoom=r[10]),s&2048&&(u.maxzoom=r[11]),s&4096&&(u.hoverCursor=r[12]),s&8192&&(u.manageHoverState=r[13]),s&16384&&(u.eventsIfTopMost=r[14]),s&32768&&(u.interactive=r[15]),s&16777216&&(u.$$scope={dirty:s,ctx:r}),!t&&s&1&&(t=!0,u.hovered=r[0],it(()=>t=!1)),e.$set(u)},i(r){n||(z(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){Q(e,r)}}}function El(l,e,t){let{$$slots:n={},$$scope:o}=e,{id:i=Zt("circle")}=e,{source:r=void 0}=e,{sourceLayer:s=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:a}=e,{layout:m=void 0}=e,{filter:g=void 0}=e,{applyToClusters:b=void 0}=e,{minzoom:h=void 0}=e,{maxzoom:U=void 0}=e,{hoverCursor:k=void 0}=e,{manageHoverState:R=!1}=e,{hovered:A=null}=e,{eventsIfTopMost:y=!1}=e,{interactive:E=!0}=e;function v(_){A=_,t(0,A)}function W(_){oe.call(this,l,_)}function F(_){oe.call(this,l,_)}function V(_){oe.call(this,l,_)}function C(_){oe.call(this,l,_)}function L(_){oe.call(this,l,_)}function ie(_){oe.call(this,l,_)}return l.$$set=_=>{"id"in _&&t(1,i=_.id),"source"in _&&t(2,r=_.source),"sourceLayer"in _&&t(3,s=_.sourceLayer),"beforeId"in _&&t(4,u=_.beforeId),"beforeLayerType"in _&&t(5,f=_.beforeLayerType),"paint"in _&&t(6,a=_.paint),"layout"in _&&t(7,m=_.layout),"filter"in _&&t(8,g=_.filter),"applyToClusters"in _&&t(9,b=_.applyToClusters),"minzoom"in _&&t(10,h=_.minzoom),"maxzoom"in _&&t(11,U=_.maxzoom),"hoverCursor"in _&&t(12,k=_.hoverCursor),"manageHoverState"in _&&t(13,R=_.manageHoverState),"hovered"in _&&t(0,A=_.hovered),"eventsIfTopMost"in _&&t(14,y=_.eventsIfTopMost),"interactive"in _&&t(15,E=_.interactive),"$$scope"in _&&t(24,o=_.$$scope)},[A,i,r,s,u,f,a,m,g,b,h,U,k,R,y,E,n,v,W,F,V,C,L,ie,o]}class Co extends Y{constructor(e){super(),X(this,e,El,Rl,x,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Ul(l,e,t){let n;const o=rt();let{layer:i=void 0}=e;const{map:r}=Ln();ge(l,r,a=>t(2,n=a));function s(a){o(a.type,{...a,map:r})}const u=["click","dblclick","mousedown","mouseup","mousemove","mouseenter","mouseleave","contextmenu","mouseover","mouseout"],f=["click","dblclick","contextmenu","mousemove","movestart","moveend","zoomstart","zoom","zoomend"];return st(()=>{if(n)if(i)for(const a of u)n.off(a,i,s);else for(const a of f)n.off(a,s)}),l.$$set=a=>{"layer"in a&&t(1,i=a.layer)},l.$$.update=()=>{if(l.$$.dirty&6&&n)if(i)for(const a of u)n.on(a,i,s);else for(const a of f)n.on(a,s)},[r,i,n]}class So extends Y{constructor(e){super(),X(this,e,Ul,null,x,{layer:1})}}const Zl=l=>({marker:l&8}),Bt=l=>({marker:l[3]});function jl(l){let e,t,n,o,i,r,s;const u=l[19].default,f=be(u,l,l[18],Bt);return{c(){e=T("div"),f&&f.c(),c(e,"tabindex",t=l[1]?0:void 0),c(e,"role",n=l[1]?"button":void 0),Me(e,"z-index",l[2])},m(a,m){B(a,e,m),f&&f.m(e,null),i=!0,r||(s=[gt(l[7].call(null,e)),gt(o=Ol.call(null,e,l[0])),N(e,"click",nt(l[20])),N(e,"dblclick",nt(l[21])),N(e,"contextmenu",nt(l[22])),N(e,"mouseenter",l[23]),N(e,"mouseleave",l[24]),N(e,"mousemove",l[25]),N(e,"keydown",l[8])],r=!0)},p(a,[m]){f&&f.p&&(!i||m&262152)&&ye(f,u,a,a[18],i?ve(u,a[18],m,Zl):ke(a[18]),Bt),(!i||m&2&&t!==(t=a[1]?0:void 0))&&c(e,"tabindex",t),(!i||m&2&&n!==(n=a[1]?"button":void 0))&&c(e,"role",n),o&&Tn(o.update)&&m&1&&o.update.call(null,a[0]),m&4&&Me(e,"z-index",a[2])},i(a){i||(z(f,a),i=!0)},o(a){I(f,a),i=!1},d(a){a&&P(e),f&&f.d(a),r=!1,Re(s)}}}function Ol(l,e){const t=l.className;function n(o){o?l.className=`${t} ${o}`:l.className=t}return n(e),{update:n}}function Wl(l,e,t){let n,o,i,{$$slots:r={},$$scope:s}=e,{marker:u=void 0}=e,{lngLat:f}=e,{class:a=void 0}=e,{interactive:m=!0}=e,{asButton:g=!1}=e,{draggable:b=!1}=e,{feature:h=null}=e,{offset:U=void 0}=e,{zIndex:k=void 0}=e,{rotation:R=0}=e,{opacity:A=1}=e;const y=rt(),{map:E,layerEvent:v,self:W}=Mn();ge(l,E,w=>t(27,i=w)),ge(l,v,w=>t(26,n=w)),ge(l,W,w=>t(3,o=w));function F(w){ht(W,o=new Et.Marker({element:w,rotation:R,draggable:b,offset:U,opacity:A.toString()}).setLngLat(f).addTo(i),o),t(11,u=o);const ue=()=>L("dragstart"),re=()=>{V(),L("drag")},fe=()=>{V(),L("dragend")};return b&&(o.on("dragstart",ue),o.on("drag",re),o.on("dragend",fe)),{destroy(){b&&(o==null||o.off("dragstart",ue),o==null||o.off("drag",re),o==null||o.off("dragend",fe)),t(11,u=void 0),o==null||o.remove()}}}function V(){let w=o==null?void 0:o.getLngLat();w&&(Array.isArray(f)?t(10,f=[w.lng,w.lat]):f&&"lon"in f?t(10,f={lon:w.lng,lat:w.lat}):t(10,f=w))}function C(w){w.key===" "&&(w.preventDefault(),w.stopPropagation(),L("click"))}function L(w){if(!m)return;let ue=o==null?void 0:o.getLngLat();if(!ue)return;const re=[ue.lng,ue.lat];let fe={map:i,marker:o,lngLat:re,features:[{type:"Feature",properties:(h==null?void 0:h.properties)??{},geometry:{type:"Point",coordinates:re}}]};ht(v,n={...fe,layerType:"marker",type:w},n),y(w,fe)}const ie=()=>L("click"),_=()=>L("dblclick"),we=()=>L("contextmenu"),S=w=>{L("mouseenter")},D=()=>{L("mouseleave")},le=()=>L("mousemove");return l.$$set=w=>{"marker"in w&&t(11,u=w.marker),"lngLat"in w&&t(10,f=w.lngLat),"class"in w&&t(0,a=w.class),"interactive"in w&&t(12,m=w.interactive),"asButton"in w&&t(1,g=w.asButton),"draggable"in w&&t(13,b=w.draggable),"feature"in w&&t(14,h=w.feature),"offset"in w&&t(15,U=w.offset),"zIndex"in w&&t(2,k=w.zIndex),"rotation"in w&&t(16,R=w.rotation),"opacity"in w&&t(17,A=w.opacity),"$$scope"in w&&t(18,s=w.$$scope)},l.$$.update=()=>{l.$$.dirty&1032&&(o==null||o.setLngLat(f)),l.$$.dirty&32776&&(o==null||o.setOffset(U??[0,0])),l.$$.dirty&65544&&(o==null||o.setRotation(R)),l.$$.dirty&131080&&(o==null||o.setOpacity(A.toString()))},[a,g,k,o,E,v,W,F,C,L,f,u,m,b,h,U,R,A,s,r,ie,_,we,S,D,le]}class Io extends Y{constructor(e){super(),X(this,e,Wl,jl,x,{marker:11,lngLat:10,class:0,interactive:12,asButton:1,draggable:13,feature:14,offset:15,zIndex:2,rotation:16,opacity:17})}}function Fl(l){let e;const t=l[8].default,n=be(t,l,l[15],null);return{c(){n&&n.c()},m(o,i){n&&n.m(o,i),e=!0},p(o,i){n&&n.p&&(!e||i&32768)&&ye(n,t,o,o[15],e?ve(t,o[15],i,null):ke(o[15]),null)},i(o){e||(z(n,o),e=!0)},o(o){I(n,o),e=!1},d(o){n&&n.d(o)}}}function Vl(l){let e,t;return e=new Ut({props:{id:l[0],type:"raster",source:l[1],beforeId:l[2],beforeLayerType:l[3],paint:l[4],layout:l[5],minzoom:l[6],maxzoom:l[7],$$slots:{default:[Fl]},$$scope:{ctx:l}}}),e.$on("click",l[9]),e.$on("dblclick",l[10]),e.$on("contextmenu",l[11]),e.$on("mouseenter",l[12]),e.$on("mousemove",l[13]),e.$on("mouseleave",l[14]),{c(){H(e.$$.fragment)},m(n,o){K(e,n,o),t=!0},p(n,[o]){const i={};o&1&&(i.id=n[0]),o&2&&(i.source=n[1]),o&4&&(i.beforeId=n[2]),o&8&&(i.beforeLayerType=n[3]),o&16&&(i.paint=n[4]),o&32&&(i.layout=n[5]),o&64&&(i.minzoom=n[6]),o&128&&(i.maxzoom=n[7]),o&32768&&(i.$$scope={dirty:o,ctx:n}),e.$set(i)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Al(l,e,t){let{$$slots:n={},$$scope:o}=e,{id:i=Zt("raster-layer")}=e,{source:r=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:u=void 0}=e,{paint:f}=e,{layout:a=void 0}=e,{minzoom:m=void 0}=e,{maxzoom:g=void 0}=e;function b(y){oe.call(this,l,y)}function h(y){oe.call(this,l,y)}function U(y){oe.call(this,l,y)}function k(y){oe.call(this,l,y)}function R(y){oe.call(this,l,y)}function A(y){oe.call(this,l,y)}return l.$$set=y=>{"id"in y&&t(0,i=y.id),"source"in y&&t(1,r=y.source),"beforeId"in y&&t(2,s=y.beforeId),"beforeLayerType"in y&&t(3,u=y.beforeLayerType),"paint"in y&&t(4,f=y.paint),"layout"in y&&t(5,a=y.layout),"minzoom"in y&&t(6,m=y.minzoom),"maxzoom"in y&&t(7,g=y.maxzoom),"$$scope"in y&&t(15,o=y.$$scope)},[i,r,s,u,f,a,m,g,n,b,h,U,k,R,A,o]}class Bo extends Y{constructor(e){super(),X(this,e,Al,Vl,x,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}function Nl(l){let e;return{c(){e=ae("Luc Chaissac")},m(t,n){B(t,e,n)},d(t){t&&P(e)}}}function Dl(l){let e,t,n,o,i,r,s,u,f;return u=new zn({props:{href:"https://icon-icons.com/icon/screenshot-cursor-camera/100181",$$slots:{default:[Nl]},$$scope:{ctx:l}}}),{c(){e=T("ul"),t=T("li"),t.innerHTML=`<b>Click</b>
    on the map to open a new tab with a 3rd-party imagery provider`,n=q(),o=T("li"),o.innerHTML=`Press <b>Escape</b>
    to exit this mode`,i=q(),r=T("li"),s=ae("Cursor by "),H(u.$$.fragment)},m(a,m){B(a,e,m),p(e,t),p(e,n),p(e,o),p(e,i),p(e,r),p(r,s),K(u,r,null),f=!0},p(a,[m]){const g={};m&1&&(g.$$scope={dirty:m,ctx:a}),u.$set(g)},i(a){f||(z(u.$$.fragment,a),f=!0)},o(a){I(u.$$.fragment,a),f=!1},d(a){a&&P(e),Q(u)}}}class Gl extends Y{constructor(e){super(),X(this,e,null,Dl,x,{})}}const ql="/atip/osmm_areas/assets/camera_cursor-824d29b6.svg",{window:Hl}=Cn;function Pt(l){let e,t,n,o;const i=[Ql,Kl],r=[];function s(u,f){return u[0]?0:1}return e=s(l),t=r[e]=i[e](l),{c(){t.c(),n=je()},m(u,f){r[e].m(u,f),B(u,n,f),o=!0},p(u,f){let a=e;e=s(u),e===a?r[e].p(u,f):(ze(),I(r[a],1,1,()=>{r[a]=null}),Ce(),t=r[e],t?t.p(u,f):(t=r[e]=i[e](u),t.c()),z(t,1),t.m(n.parentNode,n))},i(u){o||(z(t),o=!0)},o(u){I(t),o=!1},d(u){u&&P(n),r[e].d(u)}}}function Kl(l){let e,t;return e=new at({props:{$$slots:{default:[Jl]},$$scope:{ctx:l}}}),e.$on("click",l[6]),{c(){H(e.$$.fragment)},m(n,o){K(e,n,o),t=!0},p(n,o){const i={};o&8192&&(i.$$scope={dirty:o,ctx:n}),e.$set(i)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function Ql(l){let e,t,n,o,i,r,s;e=new at({props:{$$slots:{default:[Yl]},$$scope:{ctx:l}}}),e.$on("click",l[4]);function u(a){l[5](a)}let f={legend:"Source",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return l[2].streetViewImagery!==void 0&&(f.value=l[2].streetViewImagery),n=new Sn({props:f}),qe.push(()=>ot(n,"value",u)),r=new Wn({props:{label:"Help",$$slots:{default:[Xl]},$$scope:{ctx:l}}}),{c(){H(e.$$.fragment),t=q(),H(n.$$.fragment),i=q(),H(r.$$.fragment)},m(a,m){K(e,a,m),B(a,t,m),K(n,a,m),B(a,i,m),K(r,a,m),s=!0},p(a,m){const g={};m&8192&&(g.$$scope={dirty:m,ctx:a}),e.$set(g);const b={};!o&&m&4&&(o=!0,b.value=a[2].streetViewImagery,it(()=>o=!1)),n.$set(b);const h={};m&8192&&(h.$$scope={dirty:m,ctx:a}),r.$set(h)},i(a){s||(z(e.$$.fragment,a),z(n.$$.fragment,a),z(r.$$.fragment,a),s=!0)},o(a){I(e.$$.fragment,a),I(n.$$.fragment,a),I(r.$$.fragment,a),s=!1},d(a){a&&(P(t),P(i)),Q(e,a),Q(n,a),Q(r,a)}}}function Jl(l){let e;return{c(){e=ae("Enable Street View")},m(t,n){B(t,e,n)},d(t){t&&P(e)}}}function Yl(l){let e;return{c(){e=ae("Disable Street View")},m(t,n){B(t,e,n)},d(t){t&&P(e)}}}function Xl(l){let e,t;return e=new Gl({}),{c(){H(e.$$.fragment)},m(n,o){K(e,n,o),t=!0},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function xl(l){let e,t,n,o,i=l[1]&&Pt(l);return{c(){i&&i.c(),e=je()},m(r,s){i&&i.m(r,s),B(r,e,s),t=!0,n||(o=N(Hl,"keydown",l[3]),n=!0)},p(r,[s]){r[1]?i?(i.p(r,s),s&2&&z(i,1)):(i=Pt(r),i.c(),z(i,1),i.m(e.parentNode,e)):i&&(ze(),I(i,1,1,()=>{i=null}),Ce())},i(r){t||(z(i),t=!0)},o(r){I(i),t=!1},d(r){r&&P(e),i&&i.d(r),n=!1,o()}}}function $l(l,e,t){let n,o,i;ge(l,bt,k=>t(2,n=k)),ge(l,Ge,k=>t(8,o=k)),ge(l,lt,k=>t(9,i=k));let{enabled:r}=e,{showControls:s=!0}=e,u=[];function f(){o.on("click",m),o.getCanvas().style.cursor=`url(${ql}), auto`;for(let k of Dn(o,i))u.push([k,o.getPaintProperty(k,"line-color")]),o.setPaintProperty(k,"line-color","cyan")}function a(){if(o){o.off("click",m),o.getCanvas().style.cursor="inherit";for(let[k,R]of u)o.setPaintProperty(k,"line-color",R);u=[]}}st(a);function m(k){if(!r)return;let R=k.lngLat.lng,A=k.lngLat.lat;n.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${A},${R}&cbp=11,0,0,0,0`,"_blank"):n.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${A}~${R}&style=x`,"_blank")}function g(k){r&&k.key=="Escape"&&(k.stopPropagation(),t(0,r=!1))}const b=()=>t(0,r=!1);function h(k){l.$$.not_equal(n.streetViewImagery,k)&&(n.streetViewImagery=k,bt.set(n))}const U=()=>t(0,r=!0);return l.$$set=k=>{"enabled"in k&&t(0,r=k.enabled),"showControls"in k&&t(1,s=k.showControls)},l.$$.update=()=>{l.$$.dirty&1&&(r?f():a())},[r,s,n,g,b,h,U]}class Po extends Y{constructor(e){super(),X(this,e,$l,xl,x,{enabled:0,showControls:1})}}const eo="/atip/osmm_areas/assets/zoom_out_map-b2e1091a.svg";function to(l){let e,t;return{c(){e=T("img"),ne(e.src,t=eo)||c(e,"src",t),c(e,"alt","Zoom to show entire boundary")},m(n,o){B(n,e,o)},p:J,d(n){n&&P(e)}}}function no(l){let e,t;return e=new at({props:{title:"Zoom to show entire boundary",$$slots:{default:[to]},$$scope:{ctx:l}}}),e.$on("click",l[0]),{c(){H(e.$$.fragment)},m(n,o){K(e,n,o),t=!0},p(n,[o]){const i={};o&8&&(i.$$scope={dirty:o,ctx:n}),e.$set(i)},i(n){t||(z(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){Q(e,n)}}}function lo(l,e,t){let n;ge(l,Ge,r=>t(2,n=r));let{boundaryGeojson:o}=e;function i(){let r=Gn(o);Number.isFinite(r[0])&&n.fitBounds(r,{padding:20,animate:!0,duration:500})}return l.$$set=r=>{"boundaryGeojson"in r&&t(1,o=r.boundaryGeojson)},[i,o]}class Ro extends Y{constructor(e){super(),X(this,e,lo,no,x,{boundaryGeojson:1})}}export{io as B,Co as C,wo as G,Io as M,Bo as R,Po as S,Ro as Z,po as a,Gn as b,yo as c,To as d,uo as e,Mo as f,Lo as g,ao as h,fo as i,co as j,mo as k,ko as l,go as m,Il as n,_o as o,So as p,Wn as q,zo as r,ro as s,so as t,Gl as u,Nn as v,bo as w,vo as x,ho as y};
