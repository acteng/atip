import{S as K,i as Z,s as Q,e as y,d as G,b as se,f as g,q as J,k as d,J as Bt,a as L,aB as Yn,g as $,aa as Zt,K as Ut,L as Et,M as Wt,h as m,j as _,C as ve,v as ke,y as He,c as w,t as S,m as b,A,l as v,r as z,u as B,w as U,N as Qt,G as he,aC as Jn,x as Y,H as Ar,I as Vt,aD as to,at as bn,Y as V,az as pn,av as In,Z as Re,aE as me,aF as en,aG as zt,ak as fn,a9 as at,ab as no,aH as lo,o as qr,aI as ro,aJ as Hr,aA as oo,ay as vn,B as so,n as io}from"./index-8b618c94.js";import{g as x,a as re}from"./spread-8a54911c.js";import{c as q,d as nt,t as ao,a as Ee,C as Ne,e as be,S as Xt,M as fo,p as Qn,f as Vn,h as tn,g as uo,m as Kn}from"./Modal-86ecafe8.js";import{e as Zn,h as lt,M as co,b as zr,H as $o,f as Ie,C as ft,a as kn,c as yn,d as po,i as on,W as On,B as mo,S as _o,G as go}from"./WarningIcon-2fac2273.js";import{d as ho,g as Br,u as wo,r as bo,b as vo,c as ko,G as ct,a as _e,e as yo,h as ne,F as Me,i as So,j as To,k as Co,L as Lo,M as Io}from"./MapLibreMap-fef4a555.js";import{R as Mn,F as Ur,a as sn,E as Oo}from"./Radio-ef18e940.js";import{S as We,B as Mo}from"./SecondaryButton-483944a7.js";import{E as oe,H as jo}from"./Header-fcadea79.js";import{e as ge,f as Xn,b as No,s as Ro,g as Fo,d as Po}from"./files-b678ba4d.js";import{P as ae,A as Er}from"./Popup-34d10ffc.js";import{D as Do}from"./DefaultButton-b4f0acc0.js";function Go(o){let e;return{c(){e=y("span"),G(e,"class","svelte-kzgqtg"),se(e,"background",o[0])},m(l,t){g(l,e,t)},p(l,[t]){t&1&&se(e,"background",l[0])},i:J,o:J,d(l){l&&d(e)}}}function Ao(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class ye extends K{constructor(e){super(),Z(this,e,Ao,Go,Q,{color:0})}}const qo=o=>({}),xn=o=>({}),Ho=o=>({}),el=o=>({});function zo(o){let e,l,t,n,r,s,f,i,a,u,c;const p=o[4].sidebar,h=Bt(p,o,o[3],el),k=o[4].main,C=Bt(k,o,o[3],xn);return{c(){e=y("div"),l=y("aside"),t=y("div"),h&&h.c(),n=L(),r=y("button"),r.textContent="â†’",f=L(),i=y("main"),C&&C.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(r,"type","button"),G(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(l,"class",s=Yn(o[1]?"":"collapsed")+" svelte-1n0etgd"),se(l,"--sidebarWidth",o[0]),G(i,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(T,I){g(T,e,I),$(e,l),$(l,t),h&&h.m(t,null),$(l,n),$(l,r),$(e,f),$(e,i),C&&C.m(i,null),a=!0,u||(c=Zt(r,"click",o[2]),u=!0)},p(T,[I]){h&&h.p&&(!a||I&8)&&Ut(h,p,T,T[3],a?Wt(p,T[3],I,Ho):Et(T[3]),el),(!a||I&2&&s!==(s=Yn(T[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(l,"class",s),(!a||I&1)&&se(l,"--sidebarWidth",T[0]),C&&C.p&&(!a||I&8)&&Ut(C,k,T,T[3],a?Wt(k,T[3],I,qo):Et(T[3]),xn)},i(T){a||(m(h,T),m(C,T),a=!0)},o(T){_(h,T),_(C,T),a=!1},d(T){T&&d(e),h&&h.d(T),C&&C.d(T),u=!1,c()}}}function Bo(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){l(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,s,f,n,t]}class Uo extends K{constructor(e){super(),Z(this,e,Bo,zo,Q,{sidebarWidth:0})}}function tl(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function nl(o){let e,l,t,n=o[1]+"",r,s,f;return l=new ye({props:{color:o[2]}}),{c(){e=y("li"),w(l.$$.fragment),t=L(),r=S(n),s=L()},m(i,a){g(i,e,a),b(l,e,null),$(e,t),$(e,r),$(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&A(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){_(l.$$.fragment,i),f=!1},d(i){i&&d(e),v(l)}}}function Eo(o){let e,l,t=ge(o[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=nl(tl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){e=y("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,f){g(s,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[f]){if(f&1){t=ge(s[0]);let i;for(i=0;i<t.length;i+=1){const a=tl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=nl(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(ve(),i=t.length;i<n.length;i+=1)r(i);ke()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),He(n,s)}}}function Wo(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Yt extends K{constructor(e){super(),Z(this,e,Wo,Eo,Q,{rows:0})}}function Yo(o){let e;const l=o[16].default,t=Bt(l,o,o[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&Ut(t,l,n,n[24],e?Wt(l,n[24],r,null):Et(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Jo(o){let e,l,t;function n(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[Yo]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new ho({props:r}),z.push(()=>B(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!l&&f&1&&(l=!0,i.hovered=s[0],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Qo(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=Br("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:h=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:I=!1}=e,{hovered:O=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:R=!0}=e;function j(D){O=D,l(0,O)}function M(D){Qt.call(this,o,D)}function H(D){Qt.call(this,o,D)}function P(D){Qt.call(this,o,D)}function F(D){Qt.call(this,o,D)}function W(D){Qt.call(this,o,D)}function ue(D){Qt.call(this,o,D)}return o.$$set=D=>{"id"in D&&l(1,r=D.id),"source"in D&&l(2,s=D.source),"sourceLayer"in D&&l(3,f=D.sourceLayer),"beforeId"in D&&l(4,i=D.beforeId),"beforeLayerType"in D&&l(5,a=D.beforeLayerType),"paint"in D&&l(6,u=D.paint),"layout"in D&&l(7,c=D.layout),"filter"in D&&l(8,p=D.filter),"applyToClusters"in D&&l(9,h=D.applyToClusters),"minzoom"in D&&l(10,k=D.minzoom),"maxzoom"in D&&l(11,C=D.maxzoom),"hoverCursor"in D&&l(12,T=D.hoverCursor),"manageHoverState"in D&&l(13,I=D.manageHoverState),"hovered"in D&&l(0,O=D.hovered),"eventsIfTopMost"in D&&l(14,N=D.eventsIfTopMost),"interactive"in D&&l(15,R=D.interactive),"$$scope"in D&&l(24,n=D.$$scope)},[O,r,s,f,i,a,u,c,p,h,k,C,T,I,N,R,t,j,M,H,P,F,W,ue,n]}class jn extends K{constructor(e){super(),Z(this,e,Qo,Jo,Q,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function ll(o){let e=o[0],l,t,n=rl(o);return{c(){n.c(),l=he()},m(r,s){n.m(r,s),g(r,l,s),t=!0},p(r,s){s&1&&Q(e,e=r[0])?(ve(),_(n,1,1,J),ke(),n=rl(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n.d(r)}}}function rl(o){let e;const l=o[15].default,t=Bt(l,o,o[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&Ut(t,l,n,n[14],e?Wt(l,n[14],r,null):Et(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Vo(o){let e,l,t=o[0]&&ll(o);return{c(){t&&t.c(),e=he()},m(n,r){t&&t.m(n,r),g(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=ll(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ve(),_(t,1,1,()=>{t=null}),ke())},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&d(e),t&&t.d(n)}}}function Ko(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Br("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:p=null}=e,{attribution:h=null}=e,{minzoom:k=null}=e,{maxzoom:C=null}=e,{volatile:T=null}=e;if(i&&i.includes("pmtiles://")&&!Jn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let R=new to;Jn.addProtocol("pmtiles",R.tile)}const{map:I,self:O}=wo();Y(o,I,R=>l(13,n=R)),Y(o,O,R=>l(0,t=R));let N;return Ar(()=>{t&&n&&(bo(I,t,N),Vt(O,t=null,t),N=void 0)}),o.$$set=R=>{"id"in R&&l(3,f=R.id),"url"in R&&l(4,i=R.url),"tiles"in R&&l(5,a=R.tiles),"promoteId"in R&&l(6,u=R.promoteId),"bounds"in R&&l(7,c=R.bounds),"scheme"in R&&l(8,p=R.scheme),"attribution"in R&&l(9,h=R.attribution),"minzoom"in R&&l(10,k=R.minzoom),"maxzoom"in R&&l(11,C=R.maxzoom),"volatile"in R&&l(12,T=R.volatile),"$$scope"in R&&l(14,s=R.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==f&&(Vt(O,t=f,t),vo(n,t,ko({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:p,attribution:h,minzoom:k,maxzoom:C,volatile:T}),R=>n&&R===t,()=>{t&&(N=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{N=n==null?void 0:n.getSource(f)}))},[t,I,O,f,i,a,u,c,p,h,k,C,T,n,s,r]}class pe extends K{constructor(e){super(),Z(this,e,Ko,Vo,Q,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function ol(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Zo(o){let e,l,t;return l=new We({props:{$$slots:{default:[xo]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=y("div"),w(l.$$.fragment)},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Xo(o){let e,l,t,n,r,s,f,i,a,u;l=new We({props:{$$slots:{default:[es]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&sl(o);r=new lt({props:{label:"Help",$$slots:{default:[ts]},$$scope:{ctx:o}}}),f=new yo({}),f.$on("click",o[3]);let p=ge(o[0]),h=[];for(let C=0;C<p.length;C+=1)h[C]=il(ol(o,p,C));const k=C=>_(h[C],1,1,()=>{h[C]=null});return{c(){e=y("div"),w(l.$$.fragment),t=L(),c&&c.c(),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L();for(let C=0;C<h.length;C+=1)h[C].c();a=he()},m(C,T){g(C,e,T),b(l,e,null),g(C,t,T),c&&c.m(C,T),g(C,n,T),b(r,C,T),g(C,s,T),b(f,C,T),g(C,i,T);for(let I=0;I<h.length;I+=1)h[I]&&h[I].m(C,T);g(C,a,T),u=!0},p(C,T){const I={};T&16384&&(I.$$scope={dirty:T,ctx:C}),l.$set(I),C[2]?c?c.p(C,T):(c=sl(C),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const O={};if(T&16384&&(O.$$scope={dirty:T,ctx:C}),r.$set(O),T&65){p=ge(C[0]);let N;for(N=0;N<p.length;N+=1){const R=ol(C,p,N);h[N]?(h[N].p(R,T),m(h[N],1)):(h[N]=il(R),h[N].c(),m(h[N],1),h[N].m(a.parentNode,a))}for(ve(),N=p.length;N<h.length;N+=1)k(N);ke()}},i(C){if(!u){m(l.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C);for(let T=0;T<p.length;T+=1)m(h[T]);u=!0}},o(C){_(l.$$.fragment,C),_(r.$$.fragment,C),_(f.$$.fragment,C),h=h.filter(Boolean);for(let T=0;T<h.length;T+=1)_(h[T]);u=!1},d(C){C&&(d(e),d(t),d(n),d(s),d(i),d(a)),v(l),c&&c.d(C),v(r,C),v(f,C),He(h,C)}}}function xo(o){let e;return{c(){e=S("Measure lines")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function es(o){let e;return{c(){e=S("Stop measuring")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function sl(o){let e,l,t=o[2].toFixed(2)+"",n,r;return{c(){e=y("p"),l=S("Length: "),n=S(t),r=S(" meters")},m(s,f){g(s,e,f),$(e,l),$(e,n),$(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&A(n,t)},d(s){s&&d(e)}}}function ts(o){let e;return{c(){e=y("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){g(l,e,t)},p:J,d(l){l&&d(e)}}}function ns(o){let e,l;return{c(){e=y("span"),l=L(),G(e,"class","dot svelte-1tzt432")},m(t,n){g(t,e,n),g(t,l,n)},p:J,d(t){t&&(d(e),d(l))}}}function il(o){let e,l,t;function n(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[ns]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new co({props:s}),z.push(()=>B(e,"lngLat",n)),e.$on("click",r),{c(){w(e.$$.fragment)},m(f,i){b(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!l&&i&1&&(l=!0,a.lngLat=o[11],U(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){_(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function ls(o){let e,l;const t=[q("measurement-line"),{paint:{"line-color":nt.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function rs(o){let e,l,t,n,r,s,f;const i=[Xo,Zo],a=[];function u(c,p){return c[1]?0:1}return e=u(o),l=a[e]=i[e](o),n=new ct({props:{data:o[0].length<2?Zn():bn(o[0]),$$slots:{default:[ls]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),w(n.$$.fragment)},m(c,p){a[e].m(c,p),g(c,t,p),b(n,c,p),r=!0,s||(f=Zt(window,"keydown",o[5]),s=!0)},p(c,[p]){let h=e;e=u(c),e===h?a[e].p(c,p):(ve(),_(a[h],1,1,()=>{a[h]=null}),ke(),l=a[e],l?l.p(c,p):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const k={};p&1&&(k.data=c[0].length<2?Zn():bn(c[0])),p&16384&&(k.$$scope={dirty:p,ctx:c}),n.$set(k)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){_(l),_(n.$$.fragment,c),r=!1},d(c){c&&d(t),a[e].d(c),v(n,c),s=!1,f()}}}function os(o,e,l){let t,n=!1,r=[];function s(k){return k.length<2?null:1e3*ao(bn(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),l(0,r)}function c(k,C,T,I){T[I]=k,l(0,r)}const p=k=>u(k),h=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=s(r))},[r,n,t,f,i,a,u,c,p,h]}class ss extends K{constructor(e){super(),Z(this,e,os,rs,Q,{})}}const is="/atip/osmm_areas/assets/zoom_out_map-b2e1091a.svg";function as(o){let e,l;return{c(){e=y("img"),In(e.src,l=is)||G(e,"src",l),G(e,"alt","Zoom to show entire boundary")},m(t,n){g(t,e,n)},p:J,d(t){t&&d(e)}}}function fs(o){let e,l;return e=new We({props:{title:"Zoom to show entire boundary",$$slots:{default:[as]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function us(o,e,l){let t;Y(o,pn,s=>l(2,t=s));let{boundaryGeojson:n}=e;function r(){let s=zr(n);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&l(1,n=s.boundaryGeojson)},[r,n]}class cs extends K{constructor(e){super(),Z(this,e,us,fs,Q,{boundaryGeojson:1})}}const te={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",cycle_route:"green",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},rights_of_way:{footpath:"red",bridleway:"green",restricted_byway:"blue",boat:"orange"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},ze=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];let Sn=Re(new Map),nn=Re(new Set);const $s=o=>({}),al=o=>({}),ps=o=>({}),fl=o=>({}),ms=o=>({}),ul=o=>({});function _s(o){let e;return{c(){e=S(o[2])},m(l,t){g(l,e,t)},p(l,t){t&4&&A(e,l[2])},d(l){l&&d(e)}}}function gs(o){let e,l,t;const n=o[7].icon,r=Bt(n,o,o[10],ul);return{c(){r&&r.c(),e=L(),l=S(o[2])},m(s,f){r&&r.m(s,f),g(s,e,f),g(s,l,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&Ut(r,n,s,s[10],t?Wt(n,s[10],f,ms):Et(s[10]),ul),(!t||f&4)&&A(l,s[2])},i(s){t||(m(r,s),t=!0)},o(s){_(r,s),t=!1},d(s){s&&(d(e),d(l)),r&&r.d(s)}}}function ds(o){let e;const l=o[7].help,t=Bt(l,o,o[10],fl);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&Ut(t,l,n,n[10],e?Wt(l,n[10],r,ps):Et(n[10]),fl)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function hs(o){let e;return{c(){e=S("X")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ws(o){let e,l,t,n,r,s,f,i,a;function u(p){o[8](p)}let c={$$slots:{default:[gs]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),l=new Ee({props:c}),z.push(()=>B(l,"checked",u)),s=new $o({props:{$$slots:{default:[ds]},$$scope:{ctx:o}}}),i=new We({props:{$$slots:{default:[hs]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=y("div"),w(l.$$.fragment),n=L(),r=y("span"),w(s.$$.fragment),f=L(),w(i.$$.fragment),se(e,"display","flex"),se(e,"justify-content","space-between")},m(p,h){g(p,e,h),b(l,e,null),$(e,n),$(e,r),b(s,r,null),$(r,f),b(i,r,null),a=!0},p(p,h){const k={};h&1028&&(k.$$scope={dirty:h,ctx:p}),!t&&h&1&&(t=!0,k.checked=p[0],U(()=>t=!1)),l.$set(k);const C={};h&1024&&(C.$$scope={dirty:h,ctx:p}),s.$set(C);const T={};h&1024&&(T.$$scope={dirty:h,ctx:p}),i.$set(T)},i(p){a||(m(l.$$.fragment,p),m(s.$$.fragment,p),m(i.$$.fragment,p),a=!0)},o(p){_(l.$$.fragment,p),_(s.$$.fragment,p),_(i.$$.fragment,p),a=!1},d(p){p&&d(e),v(l),v(s),v(i)}}}function cl(o){let e;const l=o[7].controls,t=Bt(l,o,o[10],al);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&Ut(t,l,n,n[10],e?Wt(l,n[10],r,$s):Et(n[10]),al)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function bs(o){let e,l,t,n,r,s;e=new Ee({props:{checked:o[4].has(o[1]),$$slots:{default:[_s]},$$scope:{ctx:o}}}),e.$on("change",o[5]),n=new Ne({props:{small:!0,$$slots:{default:[ws]},$$scope:{ctx:o}}});let f=o[0]&&cl(o);return{c(){w(e.$$.fragment),l=L(),t=y("div"),w(n.$$.fragment),r=L(),f&&f.c()},m(i,a){b(e,i,a),g(i,l,a),g(i,t,a),b(n,t,null),$(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=cl(i),f.c(),m(f,1),f.m(t,null)):f&&(ve(),_(f,1,1,()=>{f=null}),ke())},i(i){s||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),s=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),_(f),s=!1},d(i){i&&(d(l),d(t)),v(e,i),v(n),f&&f.d(),o[9](null)}}}function vs(o,e,l){let t;Y(o,nn,k=>l(4,t=k));let{$$slots:n={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),nn.set(t));let a=null;Ar(()=>{Sn.update(k=>(k.delete(s),k))});function u(){nn.update(k=>(k.has(s)?(k.delete(s),l(0,i=!1)):(k.add(s),l(0,i=!0)),k))}function c(){t.delete(s),nn.set(t),l(0,i=!1)}function p(k){i=k,l(0,i)}function h(k){z[k?"unshift":"push"](()=>{a=k,l(3,a),l(1,s)})}return o.$$set=k=>{"name"in k&&l(1,s=k.name),"title"in k&&l(2,f=k.title),"show"in k&&l(0,i=k.show),"$$scope"in k&&l(10,r=k.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&Sn.update(k=>(l(3,a.style.display="none",a),k.set(s,a),k))},[i,s,f,a,t,u,c,n,p,h,r]}class fe extends K{constructor(e){super(),Z(this,e,vs,bs,Q,{name:1,title:2,show:0})}}function ks(o){let e;return{c(){e=S(`Open Government License
  `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ys(o){let e,l,t,n,r;return t=new oe({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ks]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("License: "),w(t.$$.fragment),n=S(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,f){g(s,e,f),$(e,l),b(t,e,null),$(e,n),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){_(t.$$.fragment,s),r=!1},d(s){s&&d(e),v(t)}}}class Ce extends K{constructor(e){super(),Z(this,e,null,ys,Q,{})}}function $l(o,e,l){const t=o.slice();return t[2]=e[l],t}function pl(o,e,l){const t=o.slice();return t[5]=e[l],t}function ml(o){let e,l;return{c(){e=y("span"),l=S(`Â 
    `),se(e,"background",o[5]),se(e,"width","100%"),se(e,"border","1px solid black")},m(t,n){g(t,e,n),$(e,l)},p(t,n){n&1&&se(e,"background",t[5])},d(t){t&&d(e)}}}function _l(o){let e,l=o[2]+"",t;return{c(){e=y("span"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&A(t,l)},d(n){n&&d(e)}}}function Ss(o){let e,l,t,n=ge(o[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=ml(pl(o,n,i));let s=ge(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=_l($l(o,s,i));return{c(){e=y("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=y("div");for(let i=0;i<f.length;i+=1)f[i].c();se(e,"display","flex"),se(t,"display","flex"),se(t,"justify-content","space-between")},m(i,a){g(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);g(i,l,a),g(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=ge(i[0]);let u;for(u=0;u<n.length;u+=1){const c=pl(i,n,u);r[u]?r[u].p(c,a):(r[u]=ml(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){s=ge(i[1]);let u;for(u=0;u<s.length;u+=1){const c=$l(i,s,u);f[u]?f[u].p(c,a):(f[u]=_l(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:J,o:J,d(i){i&&(d(e),d(l),d(t)),He(r,i),He(f,i)}}}function Ts(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Je extends K{constructor(e){super(),Z(this,e,Ts,Ss,Q,{colorScale:0,limits:1})}}const gl=Re(!0);let Tn=Re(null);function Nn(o){window.history.replaceState(null,"",o.toString()),window.localStorage.setItem("browsepage-querystring",o.searchParams.toString())}function $e(o){let e=new URLSearchParams(window.location.search).has(o),l=Re(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),Nn(n)}),l}function Jt(o,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Re(n);return s.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),Nn(i)}),s}function dl(o){const e=o[7].OA21CD;o[8]=e;const l=o[7][o[0].kind];o[9]=l}function Cs(o){let e,l,t,n,r,s,f;return t=new oe({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Os]},$$scope:{ctx:o}}}),r=new oe({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ms]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("Population density data is from the 2021 census, via "),w(t.$$.fragment),n=S(". Output area boundaries from "),w(r.$$.fragment),s=S(".")},m(i,a){g(i,e,a),$(e,l),b(t,e,null),$(e,n),b(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&d(e),v(t),v(r)}}}function Ls(o){let e,l,t,n,r,s,f,i,a;return r=new oe({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[js]},$$scope:{ctx:o}}}),f=new oe({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ns]},$$scope:{ctx:o}}}),{c(){e=y("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=y("p"),n=S("Car/van availability data is from the 2021 census, via "),w(r.$$.fragment),s=S(". Output area boundaries from "),w(f.$$.fragment),i=S(".")},m(u,c){g(u,e,c),g(u,l,c),g(u,t,c),$(t,n),b(r,t,null),$(t,s),b(f,t,null),$(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){_(r.$$.fragment,u),_(f.$$.fragment,u),a=!1},d(u){u&&(d(e),d(l),d(t)),v(r),v(f)}}}function Is(o){let e,l,t,n,r,s,f;return t=new oe({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Rs]},$$scope:{ctx:o}}}),r=new oe({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Fs]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("Car/van availability data is from the 2021 census, via "),w(t.$$.fragment),n=S(". Output area boundaries from "),w(r.$$.fragment),s=S(".")},m(i,a){g(i,e,a),$(e,l),b(t,e,null),$(e,n),b(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&d(e),v(t),v(r)}}}function Os(o){let e;return{c(){e=S(`NOMIS TS006
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ms(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function js(o){let e;return{c(){e=S(`NOMIS TS045
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ns(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Rs(o){let e;return{c(){e=S(`NOMIS TS045
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Fs(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ps(o){let e,l,t,n,r,s;const f=[Is,Ls,Cs],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(o),t=i[l]=f[l](o),r=new Ce({}),{c(){e=y("span"),t.c(),n=L(),w(r.$$.fragment),G(e,"slot","help")},m(u,c){g(u,e,c),i[l].m(e,null),$(e,n),b(r,e,null),s=!0},p(u,c){let p=l;l=a(u),l!==p&&(ve(),_(i[p],1,1,()=>{i[p]=null}),ke(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){_(t),_(r.$$.fragment,u),s=!1},d(u){u&&d(e),i[l].d(),v(r)}}}function Ds(o){let e,l,t,n;return t=new Je({props:{colorScale:o[1],limits:ut(o[0].kind).map(hl)}}),{c(){e=y("p"),e.textContent="(people per square kilometres)",l=L(),w(t.$$.fragment)},m(r,s){g(r,e,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&1&&(f.limits=ut(r[0].kind).map(hl)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&(d(e),d(l)),v(t,r)}}}function Gs(o){let e,l;return e=new Je({props:{colorScale:o[1],limits:ut(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=ut(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function As(o){let e,l;return e=new Je({props:{colorScale:o[1],limits:ut(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=ut(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function qs(o){let e,l,t,n,r,s,f;function i(h){o[4](h)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),l=new Mn({props:a}),z.push(()=>B(l,"value",i));const u=[As,Gs,Ds],c=[];function p(h,k){return h[0].kind=="percent_households_with_car"?0:h[0].kind=="average_cars_per_household"?1:h[0].kind=="population_density"?2:-1}return~(r=p(o))&&(s=c[r]=u[r](o)),{c(){e=y("div"),w(l.$$.fragment),n=L(),s&&s.c(),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(h,k){g(h,e,k),b(l,e,null),$(e,n),~r&&c[r].m(e,null),f=!0},p(h,k){const C={};!t&&k&1&&(t=!0,C.value=h[0].kind,U(()=>t=!1)),l.$set(C);let T=r;r=p(h),r===T?~r&&c[r].p(h,k):(s&&(ve(),_(c[T],1,1,()=>{c[T]=null}),ke()),~r?(s=c[r],s?s.p(h,k):(s=c[r]=u[r](h),s.c()),m(s,1),s.m(e,null)):s=null)},i(h){f||(m(l.$$.fragment,h),m(s),f=!0)},o(h){_(l.$$.fragment,h),_(s),f=!1},d(h){h&&d(e),v(l),~r&&c[r].d()}}}function Hs(o){let e,l,t,n=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=y("p"),l=S("There are "),t=y("b"),r=S(n),s=S(`
          people per square kilometre in `),i=S(f)},m(a,u){g(a,e,u),$(e,l),$(e,t),$(t,r),$(e,s),$(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&A(r,n),u&128&&f!==(f=a[8]+"")&&A(i,f)},d(a){a&&d(e)}}}function zs(o){let e,l,t=o[8]+"",n,r,s,f=o[9]+"",i,a;return{c(){e=y("p"),l=S("Households in "),n=S(t),r=S(` have an average of
          `),s=y("b"),i=S(f),a=S(`
          cars`)},m(u,c){g(u,e,c),$(e,l),$(e,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&A(n,t),c&129&&f!==(f=u[9]+"")&&A(i,f)},d(u){u&&d(e)}}}function Bs(o){let e,l,t=o[9]+"",n,r,s,f=o[8]+"",i,a;return{c(){e=y("p"),l=y("b"),n=S(t),r=S("%"),s=S(`
          of households in `),i=S(f),a=S(" have 1 or more cars")},m(u,c){g(u,e,c),$(e,l),$(l,n),$(l,r),$(e,s),$(e,i),$(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&A(n,t),c&128&&f!==(f=u[8]+"")&&A(i,f)},d(u){u&&d(e)}}}function Us(o){dl(o);let e;function l(r,s){return r[0].kind=="percent_households_with_car"?Bs:r[0].kind=="average_cars_per_household"?zs:Hs}let t=l(o),n=t(o);return{c(){n.c(),e=he()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){dl(r),t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function Es(o){let e,l;return e=new ae({props:{$$slots:{default:[Us,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ws(o){let e,l,t,n;const r=[q(Qe),{sourceLayer:Qe},{paint:{"fill-color":be(["get",o[0].kind],ut(o[0].kind),o[1]),"fill-opacity":ne(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Es]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=V(s,r[a]);e=new Me({props:s}),e.$on("click",o[3]);const f=[q(`${Qe}-outline`),{sourceLayer:Qe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=V(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?x(r,[u&0&&re(q(Qe)),u&0&&{sourceLayer:Qe},u&3&&{paint:{"fill-color":be(["get",a[0].kind],ut(a[0].kind),a[1]),"fill-opacity":ne(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?x(f,[u&0&&re(q(`${Qe}-outline`)),u&0&&{sourceLayer:Qe},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ys(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Qe,title:"2021 census",$$slots:{controls:[qs],help:[Ps]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Qe}.pmtiles`,$$slots:{default:[Ws]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Qe="census_output_areas";function Js(o){return o.show?o.kind:null}function Qs(o){return{show:!0,kind:o}}function ut(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const hl=o=>o.toLocaleString();function Vs(o,e,l){let t,n=te.sequential_low_to_high,s=Jt(Qe,{show:!1,kind:"percent_households_with_car"},Js,Qs);Y(o,s,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,n,s,f,i,a]}class Ks extends K{constructor(e){super(),Z(this,e,Vs,Ys,Q,{})}}function Zs(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Xs(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function xs(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[Xs]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(", as of May 2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function ei(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&d(e)}}}function ti(o){let e,l;return e=new ae({props:{$$slots:{default:[ei,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ni(o){let e,l,t,n;const r=[q(ht),{paint:{"fill-color":o[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ti]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=V(s,r[a]);e=new Me({props:s}),e.$on("click",oi);const f=[q(`${ht}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=V(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?x(r,[u&0&&re(q(ht)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?x(f,[u&0&&re(q(`${ht}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function li(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:ht,title:ri,$$slots:{help:[xs],icon:[Zs]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new ct({props:{data:`${me()}/v1/${ht}.geojson`,$$slots:{default:[ni]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let ht="combined_authorities",ri="Combined authorities";function oi(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function si(o,e,l){let t,n=te.combined_authorities,r=$e(ht);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ii extends K{constructor(e){super(),Z(this,e,si,li,Q,{})}}function ai(o){let e;return{c(){e=S(`DLUCH GIS
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function fi(o){let e;return{c(){e=S(`here
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ui(o){let e,l,t,n,r,s,f,i,a,u;return n=new oe({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[ai]},$$scope:{ctx:o}}}),s=new oe({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[fi]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("The 2019 English IMD scores come from "),w(n.$$.fragment),r=S(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),w(s.$$.fragment),f=S("."),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),b(n,l,null),$(l,r),b(s,l,null),$(l,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&64&&(h.$$scope={dirty:p,ctx:c}),n.$set(h);const k={};p&64&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(s),v(a)}}}function ci(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function $i(o){let e,l=o[5].LSOA11CD+"",t,n,r,s=o[5].score+"",f,i,a,u,c,p=o[5].rank.toLocaleString()+"",h,k;return{c(){e=y("p"),t=S(l),n=S(` has an IMD score of
        `),r=y("b"),f=S(s),i=L(),a=y("p"),u=S("Rank: "),c=y("b"),h=S(p),k=S(`
        / 32,844 LSOAs`)},m(C,T){g(C,e,T),$(e,t),$(e,n),$(e,r),$(r,f),g(C,i,T),g(C,a,T),$(a,u),$(a,c),$(c,h),$(a,k)},p(C,T){T&32&&l!==(l=C[5].LSOA11CD+"")&&A(t,l),T&32&&s!==(s=C[5].score+"")&&A(f,s),T&32&&p!==(p=C[5].rank.toLocaleString()+"")&&A(h,p)},d(C){C&&(d(e),d(i),d(a))}}}function pi(o){let e,l;return e=new ae({props:{$$slots:{default:[$i,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function mi(o){let e,l,t,n;const r=[q(Ve),{sourceLayer:Ve},{paint:{"fill-color":be(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":ne(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[pi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=V(s,r[a]);e=new Me({props:s});const f=[q(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=V(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&7?x(r,[u&0&&re(q(Ve)),u&0&&{sourceLayer:Ve},u&6&&{paint:{"fill-color":be(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":ne(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?x(f,[u&0&&re(q(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function _i(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ve,title:gi,$$slots:{controls:[ci],help:[ui]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ve}.pmtiles`,$$slots:{default:[mi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ve="imd",gi="Indices of Multiple Deprivation";function di(o,e,l){let t,n=te.sequential_low_to_high,r=[0,2,4,6,8,10],s=$e(Ve);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class hi extends K{constructor(e){super(),Z(this,e,di,_i,Q,{})}}function wi(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function bi(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function vi(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[bi]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(", as of May 2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function ki(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&d(e)}}}function yi(o){let e,l;return e=new ae({props:{$$slots:{default:[ki,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Si(o){let e,l,t,n;const r=[q(wt),{paint:{"fill-color":o[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[yi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=V(s,r[a]);e=new Me({props:s}),e.$on("click",Li);const f=[q(`${wt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=V(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?x(r,[u&0&&re(q(wt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?x(f,[u&0&&re(q(`${wt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ti(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:wt,title:Ci,$$slots:{help:[vi],icon:[wi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new ct({props:{data:`${me()}/v1/${wt}.geojson`,$$slots:{default:[Si]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let wt="local_authority_districts",Ci="Local Authority Districts";function Li(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function Ii(o,e,l){let t,n=te.local_authority_districts,r=$e(wt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Oi extends K{constructor(e){super(),Z(this,e,Ii,Ti,Q,{})}}function Mi(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ji(o){let e;return{c(){e=S(`local authority
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ni(o){let e;return{c(){e=S(`national park authorit
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ri(o){let e;return{c(){e=S(`development corporation
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Fi(o){let e;return{c(){e=S("this map")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Pi(o){let e;return{c(){e=S(`planning.data.gov.uk
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Di(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,O,N,R,j,M,H;return n=new oe({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ji]},$$scope:{ctx:o}}}),s=new oe({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Ni]},$$scope:{ctx:o}}}),i=new oe({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ri]},$$scope:{ctx:o}}}),k=new oe({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Fi]},$$scope:{ctx:o}}}),N=new oe({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Pi]},$$scope:{ctx:o}}}),M=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("LPAs may be a "),w(n.$$.fragment),r=S(", "),w(s.$$.fragment),f=S("y, or "),w(i.$$.fragment),a=S("."),u=L(),c=y("p"),p=y("strong"),h=S(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),w(k.$$.fragment),C=S(" to get more details."),T=L(),I=y("p"),O=S("Data from ONS Geography via "),w(N.$$.fragment),R=S(", as of November 2022."),j=L(),w(M.$$.fragment),G(e,"slot","help")},m(P,F){g(P,e,F),$(e,l),$(l,t),b(n,l,null),$(l,r),b(s,l,null),$(l,f),b(i,l,null),$(l,a),$(e,u),$(e,c),$(c,p),$(p,h),b(k,p,null),$(p,C),$(e,T),$(e,I),$(I,O),b(N,I,null),$(I,R),$(e,j),b(M,e,null),H=!0},p(P,F){const W={};F&32&&(W.$$scope={dirty:F,ctx:P}),n.$set(W);const ue={};F&32&&(ue.$$scope={dirty:F,ctx:P}),s.$set(ue);const D={};F&32&&(D.$$scope={dirty:F,ctx:P}),i.$set(D);const ee={};F&32&&(ee.$$scope={dirty:F,ctx:P}),k.$set(ee);const X={};F&32&&(X.$$scope={dirty:F,ctx:P}),N.$set(X)},i(P){H||(m(n.$$.fragment,P),m(s.$$.fragment,P),m(i.$$.fragment,P),m(k.$$.fragment,P),m(N.$$.fragment,P),m(M.$$.fragment,P),H=!0)},o(P){_(n.$$.fragment,P),_(s.$$.fragment,P),_(i.$$.fragment,P),_(k.$$.fragment,P),_(N.$$.fragment,P),_(M.$$.fragment,P),H=!1},d(P){P&&d(e),v(n),v(s),v(i),v(k),v(N),v(M)}}}function Gi(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&d(e)}}}function Ai(o){let e,l;return e=new ae({props:{$$slots:{default:[Gi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function qi(o){let e,l,t,n;const r=[q(Ke),{sourceLayer:Ke},{paint:{"fill-color":o[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ai]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=V(s,r[a]);e=new Me({props:s});const f=[q(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=V(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?x(r,[u&0&&re(q(Ke)),u&0&&{sourceLayer:Ke},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?x(f,[u&0&&re(q(`${Ke}-outline`)),u&0&&{sourceLayer:Ke},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Hi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ke,title:zi,$$slots:{help:[Di],icon:[Mi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ke}.pmtiles`,$$slots:{default:[qi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ke="local_planning_authorities",zi="Local Planning Authorities";function Bi(o,e,l){let t,n=te.local_planning_authorities,r=$e(Ke);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ui extends K{constructor(e){super(),Z(this,e,Bi,Hi,Q,{})}}function Ei(o){let e,l,t;return l=new ye({props:{color:Cn}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Wi(o){let e,l,t,n,r;return n=new Ce({}),{c(){e=y("span"),l=y("p"),l.textContent="TODO",t=L(),w(n.$$.fragment),G(e,"slot","help")},m(s,f){g(s,e,f),$(e,l),$(e,t),b(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function Yi(o){let e,l=JSON.stringify(o[3])+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=JSON.stringify(n[3])+"")&&A(t,l)},d(n){n&&d(e)}}}function Ji(o){let e,l;return e=new ae({props:{$$slots:{default:[Yi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qi(o){let e,l,t,n;const r=[q(bt),{sourceLayer:"topographic_area"},{paint:{"fill-color":Ie(["get","style_description"],{"Road Or Track Fill":"green","Roadside Manmade Fill":"blue","Path Fill":"grey","Traffic Calming Fill":"yellow"},"red"),"fill-opacity":ne(.8,.3)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0}];let s={$$slots:{default:[Ji]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=V(s,r[a]);e=new Me({props:s});const f=[q(`${bt}-outline`),{sourceLayer:"topographic_area"},{paint:{"line-color":Cn,"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=V(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&1?x(r,[u&0&&re(q(bt)),r[1],r[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?x(f,[u&0&&re(q(`${bt}-outline`)),f[1],u&0&&{paint:{"line-color":Cn,"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Vi(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:bt,title:"OS MasterMap",$$slots:{help:[Wi],icon:[Ei]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${en()}/v1/${bt}.pmtiles`,minzoom:16,maxzoom:16,promoteId:"toid",$$slots:{default:[Qi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let bt="osmm",Cn="grey";function Ki(o,e,l){let t,n=$e(bt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Zi extends K{constructor(e){super(),Z(this,e,Ki,Vi,Q,{})}}function Xi(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function xi(o){let e;return{c(){e=S(`Ordnance Survey Boundary-Line
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ea(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[xi]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(", as of October 2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function ta(o){let e,l=o[4].Name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&A(t,l)},d(n){n&&d(e)}}}function na(o){let e,l;return e=new ae({props:{$$slots:{default:[ta,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function la(o){let e,l,t,n;const r=[q(Ze),{sourceLayer:Ze},{paint:{"fill-color":o[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[na]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=V(s,r[a]);e=new Me({props:s}),e.$on("click",sa);const f=[q(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=V(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?x(r,[u&0&&re(q(Ze)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?x(f,[u&0&&re(q(`${Ze}-outline`)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function ra(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ze,title:oa,$$slots:{help:[ea],icon:[Xi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ze}.pmtiles`,$$slots:{default:[la]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ze="parliamentary_constituencies",oa="Parliamentary constituencies";function sa(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function ia(o,e,l){let t,n=te.parliamentary_constituencies,r=$e(Ze);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class aa extends K{constructor(e){super(),Z(this,e,ia,ra,Q,{})}}function fa(o){let e;return{c(){e=S(`DEFRA
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ua(o){let e,l,t,n,r,s,f,i,a,u;return s=new oe({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[fa]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=y("span"),l=y("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=y("p"),r=S("Data from June 2019, produced by "),w(s.$$.fragment),f=S(". See there for methodology details"),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),b(s,n,null),$(n,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&32&&(h.$$scope={dirty:p,ctx:c}),s.$set(h)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(s),v(a)}}}function ca(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function $a(o){let e,l=o[4].noiseclass+"",t,n,r=wl(o[4].noiseclass)+"",s,f;return{c(){e=y("p"),t=S(l),n=S(" dB ("),s=S(r),f=S(")")},m(i,a){g(i,e,a),$(e,t),$(e,n),$(e,s),$(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&A(t,l),a&16&&r!==(r=wl(i[4].noiseclass)+"")&&A(s,r)},d(i){i&&d(e)}}}function pa(o){let e,l;return e=new ae({props:{$$slots:{default:[$a,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ma(o){let e,l;const t=[q(vt),{sourceLayer:vt},{paint:{"fill-color":Ie(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":ne(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[pa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new Me({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?x(t,[s&0&&re(q(vt)),s&0&&{sourceLayer:vt},s&2&&{paint:{"fill-color":Ie(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":ne(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function _a(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:vt,title:ga,$$slots:{controls:[ca],help:[ua]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${vt}.pmtiles`,$$slots:{default:[ma]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let vt="road_noise",ga="Road noise";function wl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function da(o,e,l){let t,n=[te.sequential_low_to_high[0],te.sequential_low_to_high[2],te.sequential_low_to_high[4]],r=$e(vt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ha extends K{constructor(e){super(),Z(this,e,da,_a,Q,{})}}function wa(o){let e;return{c(){e=S(`DEFRA
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ba(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://www.gov.uk/government/collections/rural-urban-classification",$$slots:{default:[wa]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S(`The 2011 Rural Urban Classification distinguishes four urban and six rural
      categories. The data comes from `),w(n.$$.fragment),r=S(". Note this is data from 2011."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function va(o){let e,l,t;return l=new Yt({props:{rows:Object.entries(o[2])}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ka(o){let e,l=o[4].OA11CD+"",t,n,r=o[4].RUC11.startsWith("U")?"an":"a",s,f,i,a=o[4].RUC11+"",u;return{c(){e=y("p"),t=S(l),n=S(" is "),s=S(r),f=L(),i=y("b"),u=S(a)},m(c,p){g(c,e,p),$(e,t),$(e,n),$(e,s),$(e,f),$(e,i),$(i,u)},p(c,p){p&16&&l!==(l=c[4].OA11CD+"")&&A(t,l),p&16&&r!==(r=c[4].RUC11.startsWith("U")?"an":"a")&&A(s,r),p&16&&a!==(a=c[4].RUC11+"")&&A(u,a)},d(c){c&&d(e)}}}function ya(o){let e,l;return e=new ae({props:{$$slots:{default:[ka,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Sa(o){let e,l,t,n;const r=[q(Kt),{sourceLayer:ln},{paint:{"fill-color":Ie(["get","RUC11"],o[2],"cyan"),"fill-opacity":ne(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[ya]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=V(s,r[a]);e=new Me({props:s});const f=[q(`${Kt}-outline`),{sourceLayer:ln},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=V(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&5?x(r,[u&0&&re(q(Kt)),u&0&&{sourceLayer:ln},u&4&&{paint:{"fill-color":Ie(["get","RUC11"],a[2],"cyan"),"fill-opacity":ne(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?x(f,[u&0&&re(q(`${Kt}-outline`)),u&0&&{sourceLayer:ln},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ta(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Kt,title:Ca,$$slots:{controls:[va],help:[ba]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${ln}.pmtiles`,$$slots:{default:[Sa]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Kt="ruc",ln="rural_urban_classification",Ca="Rural Urban Classification";function La(o,e,l){let t,n=$e(Kt);Y(o,n,f=>l(0,t=f));let r={"Urban major conurbation":"#fe2200","Urban minor conurbation":"#ff6f00","Urban city and town in a sparse setting":"#ffa602","Urban city and town":"#ffe400","Rural town and fringe in a sparse setting":"#006100","Rural town and fringe":"#4a8a02","Rural village in a sparse setting":"#8cb503","Rural village":"#d6e601","Rural hamlets and isolated dwellings in a sparse setting":"#a1d99b","Rural hamlets and isolated dwellings":"#e5f5e0"};function s(f){t=f,n.set(t)}return[t,n,r,s]}class Ia extends K{constructor(e){super(),Z(this,e,La,Ta,Q,{})}}function Oa(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ma(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ja(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ma]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(", as of May 2023."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Na(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&d(e)}}}function Ra(o){let e,l;return e=new ae({props:{$$slots:{default:[Na,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Fa(o){let e,l,t,n;const r=[q(Xe),{sourceLayer:Xe},{paint:{"fill-color":o[1],"fill-opacity":ne(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ra]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=V(s,r[a]);e=new Me({props:s}),e.$on("click",Ga);const f=[q(`${Xe}-outline`),{sourceLayer:Xe},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=V(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?x(r,[u&0&&re(q(Xe)),u&0&&{sourceLayer:Xe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ne(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?x(f,[u&0&&re(q(`${Xe}-outline`)),u&0&&{sourceLayer:Xe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Pa(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Xe,title:Da,$$slots:{help:[ja],icon:[Oa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Xe}.pmtiles`,$$slots:{default:[Fa]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Xe="wards",Da="Wards";function Ga(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Aa(o,e,l){let t,n=te.wards,r=$e(Xe);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class qa extends K{constructor(e){super(),Z(this,e,Aa,Pa,Q,{})}}function Ha(o){let e;return{c(){e=S("Open Data Commons Open Database License")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function za(o){let e,l,t,n;return t=new oe({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ha]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("License: "),w(t.$$.fragment)},m(r,s){g(r,e,s),$(e,l),b(t,e,null),n=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&d(e),v(t)}}}class et extends K{constructor(e){super(),Z(this,e,null,za,Q,{})}}function Ba(o){let e,l,t;return l=new ye({props:{color:te.bus_route_with_lane}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ua(o){let e;return{c(){e=S(`GTFS
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ea(o){let e,l,t,n,r,s,f,i,a,u;return s=new oe({props:{href:"https://gtfs.org",$$slots:{default:[Ua]},$$scope:{ctx:o}}}),a=new et({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=y("p"),r=S("Note this data is from OpenStreetMap (as of 20 October 2024), not "),w(s.$$.fragment),f=S(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),b(s,n,null),$(n,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&16&&(h.$$scope={dirty:p,ctx:c}),s.$set(h)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(s),v(a)}}}function Wa(o){let e;return{c(){e=y("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ya(o){let e;return{c(){e=y("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ja(o){let e;function l(r,s){return r[3].has_bus_lane?Ya:Wa}let t=l(o),n=t(o);return{c(){n.c(),e=he()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function Qa(o){let e,l;return e=new ae({props:{$$slots:{default:[Ja,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Va(o){let e,l;const t=[q(kt),{sourceLayer:kt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],te.bus_route_with_lane,te.bus_route_without_lane],"line-width":5,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Qa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?x(t,[s&0&&re(q(kt)),s&0&&{sourceLayer:kt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ka(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:kt,title:Za,$$slots:{help:[Ea],icon:[Ba]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${kt}.pmtiles`,$$slots:{default:[Va]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let kt="bus_routes",Za="Bus routes";function Xa(o,e,l){let t,n=$e(kt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class xa extends K{constructor(e){super(),Z(this,e,Xa,Ka,Q,{})}}function bl(o){const e=cf(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function vl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function ef(o){let e,l,t,n,r,s,f,i,a;return i=new et({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=y("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),s=y("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),w(i.$$.fragment),G(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),b(i,e,null),a=!0},p:J,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){_(i.$$.fragment,u),a=!1},d(u){u&&d(e),v(i)}}}function tf(o){let e,l,t=o[13]+"",n,r,s;return e=new ye({props:{color:o[14]}}),{c(){w(e.$$.fragment),l=L(),n=S(t),r=L()},m(f,i){b(e,f,i),g(f,l,i),g(f,n,i),g(f,r,i),s=!0},p:J,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n),d(r)),v(e,f)}}}function kl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[tf]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Ee({props:r}),z.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function nf(o){let e,l,t=ge(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=kl(vl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=he()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f&5){t=ge(s[2]);let i;for(i=0;i<t.length;i+=1){const a=vl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=kl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(ve(),i=t.length;i<n.length;i+=1)r(i);ke()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),He(n,s)}}}function lf(o){let e,l,t;return l=new Ne({props:{small:!0,$$slots:{default:[nf]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function rf(o){bl(o);let e,l=o[10]+"",t,n,r,s,f,i=o[11]+"",a,u,c,p,h=o[12]+"",k;return{c(){e=y("h2"),t=S(l),n=L(),r=y("p"),s=S("Direction: "),f=y("b"),a=L(),u=y("p"),c=S("Width: "),p=y("b"),k=S(h)},m(C,T){g(C,e,T),$(e,t),g(C,n,T),g(C,r,T),$(r,s),$(r,f),f.innerHTML=i,g(C,a,T),g(C,u,T),$(u,c),$(u,p),$(p,k)},p(C,T){bl(C),T&512&&l!==(l=C[10]+"")&&A(t,l),T&512&&i!==(i=C[11]+"")&&(f.innerHTML=i),T&512&&h!==(h=C[12]+"")&&A(k,h)},d(C){C&&(d(e),d(n),d(r),d(a),d(u))}}}function of(o){let e,l;return e=new ae({props:{$$slots:{default:[rf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function sf(o){let e,l;const t=[q(yt),{sourceLayer:yt},{paint:{"line-color":Ie(["get","kind"],{track:te.cycle_paths.track,lane:te.cycle_paths.lane,shared_use_segregated:te.cycle_paths.shared_use_segregated,shared_use_unsegregated:te.cycle_paths.shared_use_unsegregated},"red"),"line-width":ze,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[of]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),e.$on("click",$f),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?x(t,[s&0&&re(q(yt)),s&0&&{sourceLayer:yt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function af(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:yt,title:ff,$$slots:{controls:[lf],help:[ef]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${yt}.pmtiles`,$$slots:{default:[sf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let yt="cycle_paths",ff="Cycle paths";function uf(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function cf(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function $f(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function pf(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(p){return p.show?n.filter(h=>p[h]).join(","):null}let f=Jt(yt,r,s,uf);Y(o,f,p=>l(0,t=p));let i=[["track","Separated tracks",te.cycle_paths.track],["lane","Unprotected lanes",te.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",te.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",te.cycle_paths.shared_use_unsegregated]];function a(p){let h=n.filter(k=>p[k]);return["in",["get","kind"],["literal",h]]}function u(p,h){o.$$.not_equal(t[h],p)&&(t[h]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class mf extends K{constructor(e){super(),Z(this,e,pf,af,Q,{})}}function _f(o){let e,l,t;return l=new ye({props:{color:te.cycle_route}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function gf(o){let e;return{c(){e=S("OpenStreetMap")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function df(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:route%3Dbicycle",$$slots:{default:[gf]},$$scope:{ctx:o}}}),f=new et({}),{c(){e=y("span"),l=y("p"),t=S(`This shows all roads with at least one cycle route crossing them,
      according to `),w(n.$$.fragment),r=S(` (as of 20 October 2024). The quality of the route or infrastructure
      along it is not shown here.`),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&8&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function hf(o){let e,l;const t=[q(St),{sourceLayer:St},{paint:{"line-color":te.cycle_route,"line-width":8}},{layout:{visibility:o[0]?"visible":"none"}}];let n={};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?x(t,[s&0&&re(q(St)),s&0&&{sourceLayer:St},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function wf(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:St,title:bf,$$slots:{help:[df],icon:[_f]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${St}.pmtiles`,$$slots:{default:[hf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let St="cycle_routes",bf="Cycle routes";function vf(o,e,l){let t,n=$e(St);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class kf extends K{constructor(e){super(),Z(this,e,vf,wf,Q,{})}}function yf(o){let e;return{c(){e=S("OS Terrain 50")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Sf(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k;return i=new oe({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[yf]},$$scope:{ctx:o}}}),c=new Ce({}),h=new et({}),{c(){e=y("span"),l=y("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=y("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),s=y("p"),f=S("This layer is built from "),w(i.$$.fragment),a=S(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),w(c.$$.fragment),p=L(),w(h.$$.fragment),G(e,"slot","help")},m(C,T){g(C,e,T),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),b(i,s,null),$(s,a),$(e,u),b(c,e,null),$(e,p),b(h,e,null),k=!0},p(C,T){const I={};T&64&&(I.$$scope={dirty:T,ctx:C}),i.$set(I)},i(C){k||(m(i.$$.fragment,C),m(c.$$.fragment,C),m(h.$$.fragment,C),k=!0)},o(C){_(i.$$.fragment,C),_(c.$$.fragment,C),_(h.$$.fragment,C),k=!1},d(C){C&&d(e),v(i),v(c),v(h)}}}function Tf(o){let e,l,t,n,r;return l=new Je({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("span"),w(l.$$.fragment),t=L(),n=y("p"),n.innerHTML=`<img src="${So}" alt="arrow"/>
      Arrows point uphill`,G(e,"slot","controls")},m(s,f){g(s,e,f),b(l,e,null),$(e,t),$(e,n),r=!0},p:J,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),r=!1},d(s){s&&d(e),v(l)}}}function Cf(o){let e,l,t,n=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=y("p"),l=S("Gradient: "),t=y("b"),r=S(n),s=S(`
        %`)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(t,r),$(e,s)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&A(r,n)},d(f){f&&d(e)}}}function Lf(o){let e,l;return e=new ae({props:{$$slots:{default:[Cf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function If(o){let e,l,t,n;const r=[q(xe),{sourceLayer:xe},{manageHoverState:!0},{paint:{"line-color":be(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":ze,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[Lf]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=V(s,r[a]);e=new _e({props:s});const f=[q(xe+"_arrows"),{sourceLayer:xe},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=V(i,f[a]);return t=new jn({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&7?x(r,[u&0&&re(q(xe)),u&0&&{sourceLayer:xe},r[2],u&6&&{paint:{"line-color":be(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":ze,"line-opacity":ne(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?x(f,[u&0&&re(q(xe+"_arrows")),u&0&&{sourceLayer:xe},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Of(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:xe,title:Mf,$$slots:{controls:[Tf],help:[Sf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${xe}.pmtiles`,$$slots:{default:[If]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let xe="gradient",Mf="Gradients";function jf(o,e,l){let t,n=te.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=$e(xe);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Nf extends K{constructor(e){super(),Z(this,e,jf,Of,Q,{})}}function Rf(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ff(o){let e;return{c(){e=S(`Major Road Network
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Pf(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Ff]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from the "),w(n.$$.fragment),r=S(", as of September 2021."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Df(o){let e,l=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&A(t,l)},d(n){n&&d(e)}}}function Gf(o){let e,l;return e=new ae({props:{$$slots:{default:[Df,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Af(o){let e,l;const t=[q(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Gf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?x(t,[s&0&&re(q(Tt)),s&0&&{sourceLayer:Tt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ne(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function qf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Tt,title:Hf,$$slots:{help:[Pf],icon:[Rf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Tt}.pmtiles`,$$slots:{default:[Af]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Tt="mrn",Hf="Major Road Network";function zf(o,e,l){let t,n=te.mrn,r=$e(Tt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Bf extends K{constructor(e){super(),Z(this,e,zf,qf,Q,{})}}function Uf(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ef(o){let e;return{c(){e=S(`National Cycle Network
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Wf(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Ef]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from Sustrans about the "),w(n.$$.fragment),r=S(", downloaded on 22/01/2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function yl(o){let e,l,t,n=o[4].Desc_+"",r;return{c(){e=y("li"),l=S("Description: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Desc_+"")&&A(r,n)},d(s){s&&d(e)}}}function Sl(o){let e,l,t,n=o[4].Greenway+"",r;return{c(){e=y("li"),l=S("Is greenway: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Greenway+"")&&A(r,n)},d(s){s&&d(e)}}}function Tl(o){let e,l,t,n=o[4].RouteType+"",r;return{c(){e=y("li"),l=S("Route type: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteType+"")&&A(r,n)},d(s){s&&d(e)}}}function Cl(o){let e,l,t,n=o[4].RouteNo+"",r;return{c(){e=y("li"),l=S("Route number: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteNo+"")&&A(r,n)},d(s){s&&d(e)}}}function Ll(o){let e,l,t,n=o[4].RouteCat+"",r;return{c(){e=y("li"),l=S("Route Category: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteCat+"")&&A(r,n)},d(s){s&&d(e)}}}function Il(o){let e,l,t,n=o[4].OpenStatus+"",r;return{c(){e=y("li"),l=S("Open Status: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].OpenStatus+"")&&A(r,n)},d(s){s&&d(e)}}}function Ol(o){let e,l,t,n=o[4].Surface+"",r;return{c(){e=y("li"),l=S("Surface: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Surface+"")&&A(r,n)},d(s){s&&d(e)}}}function Ml(o){let e,l,t,n=o[4].Quality+"",r;return{c(){e=y("li"),l=S("Quality: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Quality+"")&&A(r,n)},d(s){s&&d(e)}}}function jl(o){let e,l,t,n=o[4].RoadClass+"",r;return{c(){e=y("li"),l=S("Road Class: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RoadClass+"")&&A(r,n)},d(s){s&&d(e)}}}function Yf(o){let e,l,t,n,r,s,f,i,a,u=o[4].Desc_&&yl(o),c=o[4].Greenway&&Sl(o),p=o[4].RouteType&&Tl(o),h=o[4].RouteNo&&Cl(o),k=o[4].RouteCat&&Ll(o),C=o[4].OpenStatus&&Il(o),T=o[4].Surface&&Ol(o),I=o[4].Quality&&Ml(o),O=o[4].RoadClass&&jl(o);return{c(){e=y("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),p&&p.c(),n=L(),h&&h.c(),r=L(),k&&k.c(),s=L(),C&&C.c(),f=L(),T&&T.c(),i=L(),I&&I.c(),a=L(),O&&O.c()},m(N,R){g(N,e,R),u&&u.m(e,null),$(e,l),c&&c.m(e,null),$(e,t),p&&p.m(e,null),$(e,n),h&&h.m(e,null),$(e,r),k&&k.m(e,null),$(e,s),C&&C.m(e,null),$(e,f),T&&T.m(e,null),$(e,i),I&&I.m(e,null),$(e,a),O&&O.m(e,null)},p(N,R){N[4].Desc_?u?u.p(N,R):(u=yl(N),u.c(),u.m(e,l)):u&&(u.d(1),u=null),N[4].Greenway?c?c.p(N,R):(c=Sl(N),c.c(),c.m(e,t)):c&&(c.d(1),c=null),N[4].RouteType?p?p.p(N,R):(p=Tl(N),p.c(),p.m(e,n)):p&&(p.d(1),p=null),N[4].RouteNo?h?h.p(N,R):(h=Cl(N),h.c(),h.m(e,r)):h&&(h.d(1),h=null),N[4].RouteCat?k?k.p(N,R):(k=Ll(N),k.c(),k.m(e,s)):k&&(k.d(1),k=null),N[4].OpenStatus?C?C.p(N,R):(C=Il(N),C.c(),C.m(e,f)):C&&(C.d(1),C=null),N[4].Surface?T?T.p(N,R):(T=Ol(N),T.c(),T.m(e,i)):T&&(T.d(1),T=null),N[4].Quality?I?I.p(N,R):(I=Ml(N),I.c(),I.m(e,a)):I&&(I.d(1),I=null),N[4].RoadClass?O?O.p(N,R):(O=jl(N),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},d(N){N&&d(e),u&&u.d(),c&&c.d(),p&&p.d(),h&&h.d(),k&&k.d(),C&&C.d(),T&&T.d(),I&&I.d(),O&&O.d()}}}function Jf(o){let e,l;return e=new ae({props:{$$slots:{default:[Yf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qf(o){let e,l;const t=[q(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Jf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?x(t,[s&0&&re(q(Ct)),s&0&&{sourceLayer:Ct},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":ne(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Vf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ct,title:Kf,$$slots:{help:[Wf],icon:[Uf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ct}.pmtiles`,$$slots:{default:[Qf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ct="national_cycle_network",Kf="National Cycle Network";function Zf(o,e,l){let t,n=te.national_cycle_network,r=$e(Ct);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Xf extends K{constructor(e){super(),Z(this,e,Zf,Vf,Q,{})}}function Nl(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function xf(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function eu(o){let e,l,t,n,r,s,f,i,a,u,c,p;return u=new oe({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[xf]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=y("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),s=y("p"),s.textContent="Data valid as of 1 January, 2024",f=L(),i=y("p"),a=S(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),w(u.$$.fragment),c=S("."),G(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),$(e,i),$(i,a),b(u,i,null),$(i,c),p=!0},p(h,k){const C={};k&4096&&(C.$$scope={dirty:k,ctx:h}),u.$set(C)},i(h){p||(m(u.$$.fragment,h),p=!0)},o(h){_(u.$$.fragment,h),p=!1},d(h){h&&d(e),v(u)}}}function tu(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:o[3]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function nu(o){let e,l,t=un(o[6].angle+o[9])+"",n;return{c(){e=y("p"),l=new zt(!1),n=S(` side of the road: no pavement
          `),l.a=n},m(r,s){g(r,e,s),l.m(t,e),$(e,n)},p(r,s){s&64&&t!==(t=un(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&d(e)}}}function lu(o){let e,l,t=un(o[6].angle+o[9])+"",n,r,s=o[7]+"",f,i,a,u=o[8]+"",c,p;return{c(){e=y("p"),l=new zt(!1),n=S(` side of the road:
            `),r=y("b"),f=S(s),i=S(`
            m average,
            `),a=y("b"),c=S(u),p=S(`
            m minimum
          `),l.a=n},m(h,k){g(h,e,k),l.m(t,e),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,c),$(e,p)},p(h,k){k&64&&t!==(t=un(h[6].angle+h[9])+"")&&l.p(t),k&64&&s!==(s=h[7]+"")&&A(f,s),k&64&&u!==(u=h[8]+"")&&A(c,u)},d(h){h&&d(e)}}}function Rl(o){let e;function l(r,s){return r[7]?lu:nu}let t=l(o),n=t(o);return{c(){n.c(),e=he()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function ru(o){let e,l=ge([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Rl(Nl(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=he()},m(n,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(n,r);g(n,e,r)},p(n,r){if(r&64){l=ge([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=Nl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Rl(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(n){n&&d(e),He(t,n)}}}function ou(o){let e,l;return e=new ae({props:{openOn:"hover",$$slots:{default:[ru,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function su(o){let e,l;const t=[q(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":ze,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[ou]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?x(t,[s&0&&re(q(Lt)),s&0&&{sourceLayer:Lt},t[2],t[3],s&6&&{paint:{"line-color":be(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":ze,"line-opacity":ne(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function iu(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Lt,title:au,$$slots:{controls:[tu],help:[eu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${en()}/v1/${Lt}.pmtiles`,$$slots:{default:[su]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Lt="pavement_widths",au="OS Pavement widths";function fu(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function un(o){return`${fu(o)} <span style="display: inline-block; rotate: ${o}deg">â¬†</span>`}function uu(o,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=$e(Lt);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class cu extends K{constructor(e){super(),Z(this,e,uu,iu,Q,{})}}function $u(o){let e;return{c(){e=S("the PCT website")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function pu(o){let e;return{c(){e=S("2017 journal article")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function mu(o){let e,l,t,n,r,s,f,i,a,u,c,p;return i=new oe({props:{href:"https://www.pct.bike",$$slots:{default:[$u]},$$scope:{ctx:o}}}),u=new oe({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[pu]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=y("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),s=y("p"),f=S("See "),w(i.$$.fragment),a=S(" and "),w(u.$$.fragment),c=S(" for details on methodology and data sources."),G(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),b(i,s,null),$(s,a),b(u,s,null),$(s,c),p=!0},p(h,k){const C={};k&1024&&(C.$$scope={dirty:k,ctx:h}),i.$set(C);const T={};k&1024&&(T.$$scope={dirty:k,ctx:h}),u.$set(T)},i(h){p||(m(i.$$.fragment,h),m(u.$$.fragment,h),p=!0)},o(h){_(i.$$.fragment,h),_(u.$$.fragment,h),p=!1},d(h){h&&d(e),v(i),v(u)}}}function _u(o){let e,l,t,n,r,s,f,i,a;l=new Je({props:{colorScale:o[1],limits:o[2]}});function u(k){o[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),n=new Mn({props:c}),z.push(()=>B(n,"value",u));function p(k){o[6](k)}let h={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(h.value=o[0].scenario),f=new Xt({props:h}),z.push(()=>B(f,"value",p)),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(k,C){g(k,e,C),b(l,e,null),$(e,t),b(n,e,null),$(e,s),b(f,e,null),a=!0},p(k,C){const T={};!r&&C&1&&(r=!0,T.value=k[0].tripPurpose,U(()=>r=!1)),n.$set(T);const I={};!i&&C&1&&(i=!0,I.value=k[0].scenario,U(()=>i=!1)),f.$set(I)},i(k){a||(m(l.$$.fragment,k),m(n.$$.fragment,k),m(f.$$.fragment,k),a=!0)},o(k){_(l.$$.fragment,k),_(n.$$.fragment,k),_(f.$$.fragment,k),a=!1},d(k){k&&d(e),v(l),v(n),v(f)}}}function gu(o){let e,l=o[4](o[9])+"",t;return{c(){e=new zt(!1),t=he(),e.a=t},m(n,r){e.m(l,n,r),g(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(d(t),e.d())}}}function du(o){let e,l;return e=new ae({props:{$$slots:{default:[gu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function hu(o){let e,l;const t=[q(rt),{sourceLayer:rt},{paint:{"line-color":be(["get",o[0].scenario],o[2],o[1]),"line-width":ze,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==rt?"visible":"none"}}];let n={$$slots:{default:[du]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?x(t,[s&0&&re(q(rt)),s&0&&{sourceLayer:rt},s&7&&{paint:{"line-color":be(["get",r[0].scenario],r[2],r[1]),"line-width":ze,"line-opacity":ne(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==rt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function wu(o){let e,l=o[4](o[9])+"",t;return{c(){e=new zt(!1),t=he(),e.a=t},m(n,r){e.m(l,n,r),g(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(d(t),e.d())}}}function bu(o){let e,l;return e=new ae({props:{$$slots:{default:[wu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function vu(o){let e,l;const t=[q(dt),{sourceLayer:dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get",o[0].scenario],o[2],o[1]),"line-width":ze,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==dt?"visible":"none"}}];let n={$$slots:{default:[bu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?x(t,[s&0&&re(q(dt)),s&0&&{sourceLayer:dt},t[2],t[3],s&7&&{paint:{"line-color":be(["get",r[0].scenario],r[2],r[1]),"line-width":ze,"line-opacity":ne(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==dt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ku(o){let e,l,t,n,r,s,f;function i(u){o[7](u)}let a={name:Wr,title:yu,$$slots:{controls:[_u],help:[mu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new fe({props:a}),z.push(()=>B(e,"show",i)),n=new pe({props:{url:`pmtiles://${me()}/v1/${rt}.pmtiles`,$$slots:{default:[hu]},$$scope:{ctx:o}}}),s=new pe({props:{url:`pmtiles://${me()}/v1/${dt}.pmtiles`,$$slots:{default:[vu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(u,c){b(e,u,c),g(u,t,c),b(n,u,c),g(u,r,c),b(s,u,c),f=!0},p(u,[c]){const p={};c&1025&&(p.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,p.show=u[0].show,U(()=>l=!1)),e.$set(p);const h={};c&1025&&(h.$$scope={dirty:c,ctx:u}),n.$set(h);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),s.$set(k)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(e.$$.fragment,u),_(n.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(t),d(r)),v(e,u),v(n,u),v(s,u)}}}let Wr="pct",rt="pct_commute",dt="pct_school",yu="Propensity to Cycle Tool";function Su(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function Tu(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function Cu(o,e,l){let t,n=te.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=Jt(Wr,{show:!1,tripPurpose:rt,scenario:"baseline"},Su,Tu);Y(o,f,p=>l(0,t=p));function i(p){let h=p.baseline,k=p.gov_target,C=p.go_dutch,T=`<h2>Trip purpose: ${t.tripPurpose==rt?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${h.toLocaleString()}</b></p>`,h==0)T+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let I=(k/h).toFixed(1),O=(C/h).toFixed(1);T+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${O}x</b> of baseline)</p>`}return T}function a(p){o.$$.not_equal(t.tripPurpose,p)&&(t.tripPurpose=p,f.set(t))}function u(p){o.$$.not_equal(t.scenario,p)&&(t.scenario=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,n,r,f,i,a,u,c]}class Lu extends K{constructor(e){super(),Z(this,e,Cu,ku,Q,{})}}function Fl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[11]=e[l][1],t[12]=e[l][2],t[13]=e,t[14]=l,t}function Iu(o){let e;return{c(){e=S(`rowmaps.com
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ou(o){let e,l,t,n,r,s,f,i,a,u;return n=new oe({props:{href:"https://www.rowmaps.com",$$slots:{default:[Iu]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("These public rights of way are aggregated from 137 authorities, thanks to "),w(n.$$.fragment),r=S(`. The licenses for each authority may vary, but most use
      the Open Government License v3 or Creative Commons.`),s=L(),f=y("p"),f.textContent="This data is current as of 15 November, 2024.",i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&32768&&(h.$$scope={dirty:p,ctx:c}),n.$set(h)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(a)}}}function Mu(o){let e,l,t=o[11]+"",n,r,s;return e=new ye({props:{color:o[12]}}),{c(){w(e.$$.fragment),l=L(),n=S(t),r=L()},m(f,i){b(e,f,i),g(f,l,i),g(f,n,i),g(f,r,i),s=!0},p:J,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n),d(r)),v(e,f)}}}function Pl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[Mu]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Ee({props:r}),z.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f&32768&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function ju(o){let e,l,t=ge(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Pl(Fl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=he()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f&5){t=ge(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Fl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Pl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(ve(),i=t.length;i<n.length;i+=1)r(i);ke()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),He(n,s)}}}function Nu(o){let e,l,t;return l=new Ne({props:{small:!0,$$slots:{default:[ju]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ru(o){let e,l=o[9].kind+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&512&&l!==(l=n[9].kind+"")&&A(t,l)},d(n){n&&d(e)}}}function Fu(o){let e,l;return e=new ae({props:{$$slots:{default:[Ru,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&33280&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Pu(o){let e,l;const t=[q(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ie(["get","kind"],{footpath:te.rights_of_way.footpath,bridleway:te.rights_of_way.bridleway,"restricted byway":te.rights_of_way.restricted_byway,"byway open to all traffic":te.rights_of_way.boat},"red"),"line-width":ze,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])}];let n={$$slots:{default:[Fu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?x(t,[s&0&&re(q(It)),s&0&&{sourceLayer:It},t[2],t[3],t[4],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])}]):{};s&32768&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Du(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:It,title:Gu,$$slots:{controls:[Nu],help:[Ou]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${It}.pmtiles`,$$slots:{default:[Pu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32769&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&32769&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let It="rights_of_way",Gu="Rights of Way";function Au(o){return{show:!0,footpath:o.includes("footpath"),bridleway:o.includes("bridleway"),restricted_byway:o.includes("restricted_byway"),boat:o.includes("boat")}}function qu(o,e,l){let t,n=["footpath","bridleway","restricted_byway","boat"],r={show:!1,footpath:!0,bridleway:!0,restricted_byway:!0,boat:!0};function s(p){return p.show?n.filter(h=>p[h]).join(","):null}let f=Jt(It,r,s,Au);Y(o,f,p=>l(0,t=p));let i=[["footpath","Footpath",te.rights_of_way.footpath],["bridleway","Bridleway",te.rights_of_way.bridleway],["restricted_byway","Restricted byway",te.rights_of_way.restricted_byway],["boat","Byway open to all traffic",te.rights_of_way.boat]];function a(p){let h=n.filter(k=>p[k]).map(k=>({footpath:"footpath",bridleway:"bridleway",restricted_byway:"restricted byway",boat:"byway open to all traffic"})[k]);return["in",["get","kind"],["literal",h]]}function u(p,h){o.$$.not_equal(t[h],p)&&(t[h]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class Hu extends K{constructor(e){super(),Z(this,e,qu,Du,Q,{})}}function zu(o){let e;return{c(){e=S("Basemap")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Bu(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Uu(o){let e,l,t,n,r,s,f,i,a,u,c,p,h;return n=new oe({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[zu]},$$scope:{ctx:o}}}),c=new oe({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Bu]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),t=S("The average speed data is collected over a six-month period by "),w(n.$$.fragment),r=S(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=L(),f=y("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=y("p"),u=S(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),w(c.$$.fragment),p=S("."),G(e,"slot","help")},m(k,C){g(k,e,C),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),$(e,a),$(a,u),b(c,a,null),$(a,p),h=!0},p(k,C){const T={};C&512&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const I={};C&512&&(I.$$scope={dirty:C,ctx:k}),c.$set(I)},i(k){h||(m(n.$$.fragment,k),m(c.$$.fragment,k),h=!0)},o(k){_(n.$$.fragment,k),_(c.$$.fragment,k),h=!1},d(k){k&&d(e),v(n),v(c)}}}function Eu(o){let e,l,t,n,r,s;l=new Je({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),n=new Mn({props:i}),z.push(()=>B(n,"value",f)),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(a,u){g(a,e,u),b(l,e,null),$(e,t),b(n,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,U(()=>r=!1)),n.$set(c)},i(a){s||(m(l.$$.fragment,a),m(n.$$.fragment,a),s=!0)},o(a){_(l.$$.fragment,a),_(n.$$.fragment,a),s=!1},d(a){a&&d(e),v(l),v(n)}}}function Wu(o){let e,l,t=o[8].indicative_mph+"",n,r,s,f,i,a=o[8].highest_mph+"",u,c,p=o[4][o[8].highest_description]+"",h,k;return{c(){e=y("p"),l=S("Posted speed limit: "),n=S(t),r=S(" mph"),s=L(),f=y("p"),i=S("Highest average speed: "),u=S(a),c=S(" mph (during "),h=S(p),k=S(")")},m(C,T){g(C,e,T),$(e,l),$(e,n),$(e,r),g(C,s,T),g(C,f,T),$(f,i),$(f,u),$(f,c),$(f,h),$(f,k)},p(C,T){T&256&&t!==(t=C[8].indicative_mph+"")&&A(n,t),T&256&&a!==(a=C[8].highest_mph+"")&&A(u,a),T&256&&p!==(p=C[4][C[8].highest_description]+"")&&A(h,p)},d(C){C&&(d(e),d(s),d(f))}}}function Yu(o){let e,l;return e=new ae({props:{$$slots:{default:[Wu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ju(o){let e,l;const t=[q(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get",o[0].kind],o[2],o[1]),"line-width":ze,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[Yu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?x(t,[s&0&&re(q(Ot)),s&0&&{sourceLayer:Ot},t[2],t[3],s&7&&{paint:{"line-color":be(["get",r[0].kind],r[2],r[1]),"line-width":ze,"line-opacity":ne(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Qu(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Ot,title:Vu,$$slots:{controls:[Eu],help:[Uu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${en()}/v1/${Ot}.pmtiles`,$$slots:{default:[Ju]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ot="road_speeds",Vu="OS Speeds";function Ku(o){return o.show?o.kind:null}function Zu(o){return{show:!0,kind:o}}function Xu(o,e,l){let t,n=te.sequential_low_to_high,r=[0,20,30,40,50,90],f=Jt(Ot,{show:!1,kind:"indicative_mph"},Ku,Zu);Y(o,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class xu extends K{constructor(e){super(),Z(this,e,Xu,Qu,Q,{})}}function ec(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function tc(o){let e,l,t,n,r,s,f,i,a,u;return i=new oe({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ec]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=y("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),s=y("p"),f=S(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),w(i.$$.fragment),a=S("."),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),b(i,s,null),$(s,a),u=!0},p(c,p){const h={};p&64&&(h.$$scope={dirty:p,ctx:c}),i.$set(h)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){_(i.$$.fragment,c),u=!1},d(c){c&&d(e),v(i)}}}function nc(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function lc(o){let e,l,t,n=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",p,h;return{c(){e=y("p"),l=S("Average width: "),t=y("b"),r=S(n),s=S(`
        meters`),f=L(),i=y("p"),a=S("Minimum width: "),u=y("b"),p=S(c),h=S(`
        meters`)},m(k,C){g(k,e,C),$(e,l),$(e,t),$(t,r),$(e,s),g(k,f,C),g(k,i,C),$(i,a),$(i,u),$(u,p),$(i,h)},p(k,C){C&32&&n!==(n=k[5].average+"")&&A(r,n),C&32&&c!==(c=k[5].minimum+"")&&A(p,c)},d(k){k&&(d(e),d(f),d(i))}}}function rc(o){let e,l;return e=new ae({props:{$$slots:{default:[lc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function oc(o){let e,l;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[rc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?x(t,[s&0&&re(q(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&6&&{paint:{"line-color":be(["get","average"],r[2],r[1]),"line-width":ze,"line-opacity":ne(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function sc(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Mt,title:ic,$$slots:{controls:[nc],help:[tc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${en()}/v1/${Mt}.pmtiles`,$$slots:{default:[oc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Mt="road_widths",ic="OS Road widths";function ac(o,e,l){let t,n=te.sequential_low_to_high,r=[0,5,10,15,20,100],s=$e(Mt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class fc extends K{constructor(e){super(),Z(this,e,ac,sc,Q,{})}}function uc(o){let e,l,t;return l=new ye({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function cc(o){let e;return{c(){e=S(`OS Open Roads
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function $c(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[cc]},$$scope:{ctx:o}}}),f=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function pc(o){let e,l=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&A(t,l)},d(n){n&&d(e)}}}function mc(o){let e,l;return e=new ae({props:{$$slots:{default:[pc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function _c(o){let e,l;const t=[q(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[mc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?x(t,[s&0&&re(q(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ne(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function gc(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:jt,title:dc,$$slots:{help:[$c],icon:[uc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${jt}.pmtiles`,$$slots:{default:[_c]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let jt="srn",dc="Strategic Road Network";function hc(o,e,l){let t,n=te.srn,r=$e(jt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class wc extends K{constructor(e){super(),Z(this,e,hc,gc,Q,{})}}function bc(o){let e,l,t;return l=new ye({props:{color:te.trams}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function vc(o){let e,l,t,n,r;return n=new et({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),w(n.$$.fragment),G(e,"slot","help")},m(s,f){g(s,e,f),$(e,l),$(e,t),b(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function kc(o){let e,l;const t=[q(Nt),{sourceLayer:Nt},{paint:{"line-color":te.trams,"line-width":5,"line-opacity":ne(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new _e({props:n}),e.$on("click",Tc),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?x(t,[s&0&&re(q(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function yc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Nt,title:Sc,$$slots:{help:[vc],icon:[bc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Nt}.pmtiles`,$$slots:{default:[kc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Nt="trams",Sc="Trams";function Tc(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Cc(o,e,l){let t,n=$e(Nt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Lc extends K{constructor(e){super(),Z(this,e,Cc,yc,Q,{})}}function Ic(o){let e;return{c(){e=S(`Bus Open Data Service
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Oc(o){let e,l,t,n,r,s,f,i,a,u;return n=new oe({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Ic]},$$scope:{ctx:o}}}),a=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("Data from the "),w(n.$$.fragment),r=S(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=L(),f=y("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&64&&(h.$$scope={dirty:p,ctx:c}),n.$set(h)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(a)}}}function Mc(o){let e,l,t,n,r;return n=new Je({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("div"),l=y("p"),l.textContent="Peak hourly frequency:",t=L(),w(n.$$.fragment),G(e,"slot","controls")},m(s,f){g(s,e,f),$(e,l),$(e,t),b(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function jc(o){let e,l,t,n=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,p,h,k,C,T=o[5].peak_description+"",I,O,N,R,j,M=o[5].total+"",H,P,F=o[5].total_description+"",W,ue;return{c(){e=y("p"),l=S("Stop name: "),t=y("b"),r=S(n),s=L(),f=y("p"),i=S("Peak: "),a=y("b"),c=S(u),p=S(`
        buses during the busiest hour of any day`),h=L(),k=y("p"),C=S("The peak hour is "),I=S(T),O=L(),N=y("p"),R=S("Total buses per day: "),j=y("b"),H=S(M),P=S(`
        (for `),W=S(F),ue=S(", the busiest day of the week)")},m(D,ee){g(D,e,ee),$(e,l),$(e,t),$(t,r),g(D,s,ee),g(D,f,ee),$(f,i),$(f,a),$(a,c),$(f,p),g(D,h,ee),g(D,k,ee),$(k,C),$(k,I),g(D,O,ee),g(D,N,ee),$(N,R),$(N,j),$(j,H),$(N,P),$(N,W),$(N,ue)},p(D,ee){ee&32&&n!==(n=D[5].stop_name+"")&&A(r,n),ee&32&&u!==(u=D[5].peak+"")&&A(c,u),ee&32&&T!==(T=D[5].peak_description+"")&&A(I,T),ee&32&&M!==(M=D[5].total+"")&&A(H,M),ee&32&&F!==(F=D[5].total_description+"")&&A(W,F)},d(D){D&&(d(e),d(s),d(f),d(h),d(k),d(O),d(N))}}}function Nc(o){let e,l;return e=new ae({props:{$$slots:{default:[jc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Rc(o){let e,l;const t=[q(Rt),{sourceLayer:Rt},{paint:{"circle-color":be(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Nc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new ft({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?x(t,[s&0&&re(q(Rt)),s&0&&{sourceLayer:Rt},s&6&&{paint:{"circle-color":be(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Fc(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Rt,title:Pc,$$slots:{controls:[Mc],help:[Oc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Rt}.pmtiles`,$$slots:{default:[Rc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Rt="bus_stops",Pc="Bus stops";function Dc(o,e,l){let t,n=te.sequential_low_to_high,r=[0,3,10,20,30,100],s=$e(Rt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Gc extends K{constructor(e){super(),Z(this,e,Dc,Fc,Q,{})}}function Ac(o){let e;return{c(){e=S("crossing")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function qc(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Ac]},$$scope:{ctx:o}}}),f=new et({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),w(n.$$.fragment),r=S(" data from OpenStreetMap (as of 5 January 2025)."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Hc(o){let e,l,t;return l=new Yt({props:{rows:o[2]}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function zc(o){let e,l=(o[4].class||"Unknown")+"",t,n;return{c(){e=y("p"),t=S(l),n=S(" crossing")},m(r,s){g(r,e,s),$(e,t),$(e,n)},p(r,s){s&16&&l!==(l=(r[4].class||"Unknown")+"")&&A(t,l)},d(r){r&&d(e)}}}function Bc(o){let e,l;return e=new ae({props:{$$slots:{default:[zc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Uc(o){let e,l=(o[4].class||"Unknown")+"",t,n;return{c(){e=y("p"),t=S(l),n=S(" crossing")},m(r,s){g(r,e,s),$(e,t),$(e,n)},p(r,s){s&16&&l!==(l=(r[4].class||"Unknown")+"")&&A(t,l)},d(r){r&&d(e)}}}function Ec(o){let e,l;return e=new ae({props:{$$slots:{default:[Uc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Wc(o){let e,l,t,n;const r=[q("crossings-lines"),{sourceLayer:Ft},{filter:kn},{paint:{"line-color":Ie(["get","class"],Object.fromEntries(o[2]),"red"),"line-width":3}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let s={$$slots:{default:[Bc]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=V(s,r[a]);e=new _e({props:s}),e.$on("click",Dl);const f=[q("crossings-points"),{sourceLayer:Ft},{filter:yn},{paint:{"circle-color":Ie(["get","class"],Object.fromEntries(o[2]),"red"),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let i={$$slots:{default:[Ec]},$$scope:{ctx:o}};for(let a=0;a<f.length;a+=1)i=V(i,f[a]);return t=new ft({props:i}),t.$on("click",Dl),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&5?x(r,[r[0],u&0&&{sourceLayer:Ft},r[2],u&4&&{paint:{"line-color":Ie(["get","class"],Object.fromEntries(a[2]),"red"),"line-width":3}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&5?x(f,[f[0],u&0&&{sourceLayer:Ft},f[2],u&4&&{paint:{"circle-color":Ie(["get","class"],Object.fromEntries(a[2]),"red"),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},f[5],f[6]]):{};u&32&&(p.$$scope={dirty:u,ctx:a}),t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Yc(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ft,title:Jc,$$slots:{controls:[Hc],help:[qc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ft}.pmtiles`,$$slots:{default:[Wc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ft="crossings",Jc="Crossings";function Dl(o){window.open(`https://www.openstreetmap.org/${o.detail.features[0].properties.osm}`,"_blank")}function Qc(o,e,l){let t,n=$e(Ft);Y(o,n,f=>l(0,t=f));let r=[["Zebra","#66C5CC"],["Parallel","#F6CF71"],["Pelican","#F89C74"],["Puffin","#DCB0F2"],["Toucan","#87C55F"],["Pegasus","#9EB9F3"],["Uncontrolled","#FE88B1"],["Signalised","#C9DB74"],["Unknown","red"]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class Vc extends K{constructor(e){super(),Z(this,e,Qc,Yc,Q,{})}}function Kc(o){let e,l;return{c(){e=y("img"),G(e,"slot","icon"),In(e.src,l=To)||G(e,"src",l),G(e,"alt","a logo representing cycle parking")},m(t,n){g(t,e,n)},p:J,d(t){t&&d(e)}}}function Zc(o){let e;return{c(){e=S("OpenStreetMap")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Xc(o){let e;return{c(){e=S("OpenStreetMap Carto")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function xc(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Zc]},$$scope:{ctx:o}}}),a=new oe({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Xc]},$$scope:{ctx:o}}}),c=new et({}),{c(){e=y("span"),l=y("p"),t=S("Cycle parking, according to "),w(n.$$.fragment),r=S(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=L(),f=y("p"),i=S("Icon from "),w(a.$$.fragment),u=L(),w(c.$$.fragment),G(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),b(a,f,null),$(e,u),b(c,e,null),p=!0},p(h,k){const C={};k&16&&(C.$$scope={dirty:k,ctx:h}),n.$set(C);const T={};k&16&&(T.$$scope={dirty:k,ctx:h}),a.$set(T)},i(h){p||(m(n.$$.fragment,h),m(a.$$.fragment,h),m(c.$$.fragment,h),p=!0)},o(h){_(n.$$.fragment,h),_(a.$$.fragment,h),_(c.$$.fragment,h),p=!1},d(h){h&&d(e),v(n),v(a),v(c)}}}function e$(o){let e,l,t,n=(o[3].capacity??"unknown")+"",r;return{c(){e=y("p"),l=S("Capacity: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&8&&n!==(n=(s[3].capacity??"unknown")+"")&&A(r,n)},d(s){s&&d(e)}}}function t$(o){let e,l;return e=new ae({props:{$$slots:{default:[e$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function n$(o){let e,l;const t=[q(Pt),{sourceLayer:Pt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[t$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new jn({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?x(t,[s&0&&re(q(Pt)),s&0&&{sourceLayer:Pt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function l$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Pt,title:r$,$$slots:{help:[xc],icon:[Kc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Pt}.pmtiles`,$$slots:{default:[n$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Pt="cycle_parking",r$="Cycle parking";function o$(o,e,l){let t,n=$e(Pt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class s$ extends K{constructor(e){super(),Z(this,e,o$,l$,Q,{})}}function i$(o){let e,l,t,n,r;return n=new et({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),w(n.$$.fragment),G(e,"slot","help")},m(s,f){g(s,e,f),$(e,l),$(e,t),b(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function a$(o){let e,l,t;return e=new ye({props:{color:te.education.schools}}),{c(){w(e.$$.fragment),l=S(`
        Schools`)},m(n,r){b(e,n,r),g(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function f$(o){let e,l,t;return e=new ye({props:{color:te.education.colleges}}),{c(){w(e.$$.fragment),l=S(`
        Colleges`)},m(n,r){b(e,n,r),g(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function u$(o){let e,l,t;return e=new ye({props:{color:te.education.universities}}),{c(){w(e.$$.fragment),l=S(`
        Universities`)},m(n,r){b(e,n,r),g(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function c$(o){let e,l,t,n,r,s,f,i,a;function u(T){o[3](T)}let c={$$slots:{default:[a$]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new Ee({props:c}),z.push(()=>B(e,"checked",u));function p(T){o[4](T)}let h={$$slots:{default:[f$]},$$scope:{ctx:o}};o[0].college!==void 0&&(h.checked=o[0].college),n=new Ee({props:h}),z.push(()=>B(n,"checked",p));function k(T){o[5](T)}let C={$$slots:{default:[u$]},$$scope:{ctx:o}};return o[0].university!==void 0&&(C.checked=o[0].university),f=new Ee({props:C}),z.push(()=>B(f,"checked",k)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment)},m(T,I){b(e,T,I),g(T,t,I),b(n,T,I),g(T,s,I),b(f,T,I),a=!0},p(T,I){const O={};I&2048&&(O.$$scope={dirty:I,ctx:T}),!l&&I&1&&(l=!0,O.checked=T[0].school,U(()=>l=!1)),e.$set(O);const N={};I&2048&&(N.$$scope={dirty:I,ctx:T}),!r&&I&1&&(r=!0,N.checked=T[0].college,U(()=>r=!1)),n.$set(N);const R={};I&2048&&(R.$$scope={dirty:I,ctx:T}),!i&&I&1&&(i=!0,R.checked=T[0].university,U(()=>i=!1)),f.$set(R)},i(T){a||(m(e.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),a=!0)},o(T){_(e.$$.fragment,T),_(n.$$.fragment,T),_(f.$$.fragment,T),a=!1},d(T){T&&(d(t),d(s)),v(e,T),v(n,T),v(f,T)}}}function $$(o){let e,l,t;return l=new Ne({props:{small:!0,$$slots:{default:[c$]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function p$(o){let e,l=(o[10].name??"Unnamed institution")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&A(t,l)},d(n){n&&d(e)}}}function m$(o){let e,l;return e=new ae({props:{$$slots:{default:[p$,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function _$(o){let e,l;const t=[q(Dt),{sourceLayer:Dt},{paint:{"fill-color":Ie(["get","type"],{school:te.education.schools,college:te.education.colleges,university:te.education.universities},"grey"),"fill-opacity":ne(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[m$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new Me({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&5?x(t,[s&0&&re(q(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function g$(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Dt,title:d$,$$slots:{controls:[$$],help:[i$]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Dt}.pmtiles`,$$slots:{default:[_$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Dt="education",d$="Education";function h$(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function w$(o,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(h){return h.show?n.filter(k=>h[k]).join(","):null}let f=Jt(Dt,r,s,h$);Y(o,f,h=>l(0,t=h));function i(h){let k=n.filter(C=>h[C]);return["in",["get","type"],["literal",k]]}function a(h){o.$$.not_equal(t.school,h)&&(t.school=h,f.set(t))}function u(h){o.$$.not_equal(t.college,h)&&(t.college=h,f.set(t))}function c(h){o.$$.not_equal(t.university,h)&&(t.university=h,f.set(t))}function p(h){o.$$.not_equal(t.show,h)&&(t.show=h,f.set(t))}return[t,f,i,a,u,c,p]}class b$ extends K{constructor(e){super(),Z(this,e,w$,g$,Q,{})}}function v$(o){let e,l,t;return l=new ye({props:{color:te.hospitals}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function k$(o){let e;return{c(){e=S("hospital")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function y$(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[k$]},$$scope:{ctx:o}}}),f=new et({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),w(n.$$.fragment),r=S(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function S$(o){let e,l=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&A(t,l)},d(n){n&&d(e)}}}function T$(o){let e,l;return e=new ae({props:{$$slots:{default:[S$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function C$(o){let e,l;const t=[q(Gt),{sourceLayer:Gt},{paint:{"fill-color":te.hospitals,"fill-opacity":ne(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[T$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new Me({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?x(t,[s&0&&re(q(Gt)),s&0&&{sourceLayer:Gt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function L$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Gt,title:I$,$$slots:{help:[y$],icon:[v$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Gt}.pmtiles`,$$slots:{default:[C$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Gt="hospitals",I$="Hospitals";function O$(o,e,l){let t,n=$e(Gt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class M$ extends K{constructor(e){super(),Z(this,e,O$,L$,Q,{})}}function Gl(o,e,l){const t=o.slice();return t[6]=e[l],t}function j$(o){let e;return{c(){e=y("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,G(e,"slot","help")},m(l,t){g(l,e,t)},p:J,d(l){l&&d(e)}}}function N$(o){let e,l,t;return l=new Yt({props:{rows:o[3]}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function R$(o){let e,l=o[5]["Issue ID"]+"",t,n,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=y("h2"),t=S(l),n=S(" - "),s=S(r),f=L(),i=y("p"),u=S(a)},m(c,p){g(c,e,p),$(e,t),$(e,n),$(e,s),g(c,f,p),g(c,i,p),$(i,u)},p(c,p){p&32&&l!==(l=c[5]["Issue ID"]+"")&&A(t,l),p&32&&r!==(r=c[5].Code+"")&&A(s,r),p&32&&a!==(a=c[5]["Issue Stage"]+"")&&A(u,a)},d(c){c&&(d(e),d(f),d(i))}}}function Al(o){let e,l=o[6]+"",t,n,r,s=o[5][o[6]]+"",f,i;return{c(){e=y("p"),t=S(l),n=S(`:
            `),r=y("b"),f=S(s),i=L()},m(a,u){g(a,e,u),$(e,t),$(e,n),$(e,r),$(r,f),$(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&A(f,s)},d(a){a&&d(e)}}}function F$(o){let e,l=ge(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Al(Gl(o,l,n));return{c(){e=y("div");for(let n=0;n<t.length;n+=1)t[n].c();se(e,"max-width","30vw"),se(e,"max-height","60vh"),se(e,"overflow","auto")},m(n,r){g(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&36){l=ge(n[2]);let s;for(s=0;s<l.length;s+=1){const f=Gl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Al(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&d(e),He(t,n)}}}function P$(o){let e,l,t,n;return e=new ae({props:{openOn:"hover",$$slots:{default:[R$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[F$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function D$(o){let e,l;const t=[q(cn),{paint:{"circle-color":Ie(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[P$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new ft({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?x(t,[s&0&&re(q(cn)),s&8&&{paint:{"circle-color":Ie(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function G$(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:cn,title:A$,$$slots:{controls:[N$],help:[j$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new ct({props:{data:`${en()}/v1/problems.geojson.gz`,$$slots:{default:[D$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let cn="problems",A$="Issues & Conflicts";function q$(o,e,l){let t,n=$e(cn);Y(o,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,s,f]}class H$ extends K{constructor(e){super(),Z(this,e,q$,G$,Q,{})}}function z$(o){let e,l;return{c(){e=y("img"),G(e,"slot","icon"),In(e.src,l=Co)||G(e,"src",l),G(e,"alt","A logo representing a train")},m(t,n){g(t,e,n)},p:J,d(t){t&&d(e)}}}function B$(o){let e;return{c(){e=S("railway station")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function U$(o){let e;return{c(){e=S(`National Rail
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function E$(o){let e,l,t,n,r,s,f,i,a,u,c,p,h;return n=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[B$]},$$scope:{ctx:o}}}),a=new oe({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[U$]},$$scope:{ctx:o}}}),p=new et({}),{c(){e=y("div"),l=y("p"),t=S("This shows "),w(n.$$.fragment),r=S(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),f=y("p"),i=S("Icon from "),w(a.$$.fragment),u=S(". (Note that not all stations shown are National Rail.)"),c=L(),w(p.$$.fragment),G(e,"slot","help")},m(k,C){g(k,e,C),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),b(a,f,null),$(f,u),$(e,c),b(p,e,null),h=!0},p(k,C){const T={};C&16&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const I={};C&16&&(I.$$scope={dirty:C,ctx:k}),a.$set(I)},i(k){h||(m(n.$$.fragment,k),m(a.$$.fragment,k),m(p.$$.fragment,k),h=!0)},o(k){_(n.$$.fragment,k),_(a.$$.fragment,k),_(p.$$.fragment,k),h=!1},d(k){k&&d(e),v(n),v(a),v(p)}}}function W$(o){let e,l=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&A(t,l)},d(n){n&&d(e)}}}function Y$(o){let e,l;return e=new ae({props:{$$slots:{default:[W$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function J$(o){let e,l;const t=[q(rn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Y$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new jn({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?x(t,[s&0&&re(q(rn)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Q$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:rn,title:V$,$$slots:{help:[E$],icon:[z$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new ct({props:{data:`${me()}/v1/${rn}.geojson`,$$slots:{default:[J$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let rn="railway_stations",V$="Railway stations";function K$(o,e,l){let t,n=$e(rn);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Z$ extends K{constructor(e){super(),Z(this,e,K$,Q$,Q,{})}}function X$(o){let e,l,t;return l=new ye({props:{color:te.sports_spaces}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function x$(o){let e;return{c(){e=S("sports pitches")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ep(o){let e;return{c(){e=S("sports centres")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function tp(o){let e,l,t,n,r,s,f,i,a,u;return n=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[x$]},$$scope:{ctx:o}}}),s=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[ep]},$$scope:{ctx:o}}}),a=new et({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),w(n.$$.fragment),r=S(" and "),w(s.$$.fragment),f=S(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),b(n,l,null),$(l,r),b(s,l,null),$(l,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&16&&(h.$$scope={dirty:p,ctx:c}),n.$set(h);const k={};p&16&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(s),v(a)}}}function np(o){let e,l=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&A(t,l)},d(n){n&&d(e)}}}function lp(o){let e,l;return e=new ae({props:{$$slots:{default:[np,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function rp(o){let e,l;const t=[q(At),{sourceLayer:At},{paint:{"fill-color":te.sports_spaces,"fill-opacity":ne(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[lp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new Me({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?x(t,[s&0&&re(q(At)),s&0&&{sourceLayer:At},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function op(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:At,title:sp,$$slots:{help:[tp],icon:[X$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${At}.pmtiles`,$$slots:{default:[rp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let At="sports_spaces",sp="Sports spaces";function ip(o,e,l){let t,n=$e(At);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class ap extends K{constructor(e){super(),Z(this,e,ip,op,Q,{})}}function fp(o){let e;return{c(){e=S("DfT stats19")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function up(o){let e;return{c(){e=S("documented by DfT")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function cp(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,O,N,R,j,M,H,P;return n=new oe({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[fp]},$$scope:{ctx:o}}}),O=new oe({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[up]},$$scope:{ctx:o}}}),H=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("This layer shows collisions recorded in the "),w(n.$$.fragment),r=S(" dataset, as of 30 September 2024. Please note these limitations:"),s=L(),f=y("ul"),i=y("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=y("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),p=y("li"),p.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,h=L(),k=y("li"),k.textContent='The "pedestrians" category also include mobility scooters',C=L(),T=y("li"),I=S("All limitations "),w(O.$$.fragment),N=S(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),R=L(),j=y("p"),j.textContent="You can click a point to open the full report, thanks to CycleStreets.",M=L(),w(H.$$.fragment),G(e,"slot","help")},m(F,W){g(F,e,W),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),$(f,a),$(f,u),$(f,c),$(f,p),$(f,h),$(f,k),$(f,C),$(f,T),$(T,I),b(O,T,null),$(T,N),$(e,R),$(e,j),$(e,M),b(H,e,null),P=!0},p(F,W){const ue={};W&4194304&&(ue.$$scope={dirty:W,ctx:F}),n.$set(ue);const D={};W&4194304&&(D.$$scope={dirty:W,ctx:F}),O.$set(D)},i(F){P||(m(n.$$.fragment,F),m(O.$$.fragment,F),m(H.$$.fragment,F),P=!0)},o(F){_(n.$$.fragment,F),_(O.$$.fragment,F),_(H.$$.fragment,F),P=!1},d(F){F&&d(e),v(n),v(O),v(H)}}}function $p(o){let e;return{c(){e=S("Pedestrians")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function pp(o){let e;return{c(){e=S("Cyclists")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function mp(o){let e;return{c(){e=S("Horse riders")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function _p(o){let e;return{c(){e=S("Other")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function gp(o){let e,l,t,n,r,s,f,i,a,u,c,p;function h(j){o[10](j)}let k={$$slots:{default:[$p]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(k.checked=o[0].pedestrians),e=new Ee({props:k}),z.push(()=>B(e,"checked",h));function C(j){o[11](j)}let T={$$slots:{default:[pp]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(T.checked=o[0].cyclists),n=new Ee({props:T}),z.push(()=>B(n,"checked",C));function I(j){o[12](j)}let O={$$slots:{default:[mp]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(O.checked=o[0].horseRiders),f=new Ee({props:O}),z.push(()=>B(f,"checked",I));function N(j){o[13](j)}let R={$$slots:{default:[_p]},$$scope:{ctx:o}};return o[0].other!==void 0&&(R.checked=o[0].other),u=new Ee({props:R}),z.push(()=>B(u,"checked",N)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment)},m(j,M){b(e,j,M),g(j,t,M),b(n,j,M),g(j,s,M),b(f,j,M),g(j,a,M),b(u,j,M),p=!0},p(j,M){const H={};M&4194304&&(H.$$scope={dirty:M,ctx:j}),!l&&M&1&&(l=!0,H.checked=j[0].pedestrians,U(()=>l=!1)),e.$set(H);const P={};M&4194304&&(P.$$scope={dirty:M,ctx:j}),!r&&M&1&&(r=!0,P.checked=j[0].cyclists,U(()=>r=!1)),n.$set(P);const F={};M&4194304&&(F.$$scope={dirty:M,ctx:j}),!i&&M&1&&(i=!0,F.checked=j[0].horseRiders,U(()=>i=!1)),f.$set(F);const W={};M&4194304&&(W.$$scope={dirty:M,ctx:j}),!c&&M&1&&(c=!0,W.checked=j[0].other,U(()=>c=!1)),u.$set(W)},i(j){p||(m(e.$$.fragment,j),m(n.$$.fragment,j),m(f.$$.fragment,j),m(u.$$.fragment,j),p=!0)},o(j){_(e.$$.fragment,j),_(n.$$.fragment,j),_(f.$$.fragment,j),_(u.$$.fragment,j),p=!1},d(j){j&&(d(t),d(s),d(a)),v(e,j),v(n,j),v(f,j),v(u,j)}}}function dp(o){let e,l,t,n,r,s,f,i,a,u,c,p,h;return l=new Ne({props:{small:!0,$$slots:{default:[gp]},$$scope:{ctx:o}}}),u=new Yt({props:{rows:o[9]}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),n=y("div"),r=S(`Filter years:
      `),s=y("input"),f=S(`
      -
      `),i=y("input"),a=L(),w(u.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2023),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2023),G(i,"class","svelte-1ft65rw"),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(k,C){g(k,e,C),b(l,e,null),$(e,t),$(e,n),$(n,r),$(n,s),at(s,o[0].minYear),$(n,f),$(n,i),at(i,o[0].maxYear),$(e,a),b(u,e,null),c=!0,p||(h=[Zt(s,"input",o[14]),Zt(i,"input",o[15])],p=!0)},p(k,C){const T={};C&4194305&&(T.$$scope={dirty:C,ctx:k}),l.$set(T),C&1&&fn(s.value)!==k[0].minYear&&at(s,k[0].minYear),C&1&&fn(i.value)!==k[0].maxYear&&at(i,k[0].maxYear)},i(k){c||(m(l.$$.fragment,k),m(u.$$.fragment,k),c=!0)},o(k){_(l.$$.fragment,k),_(u.$$.fragment,k),c=!1},d(k){k&&d(e),v(l),v(u),p=!1,no(h)}}}function ql(o){let e,l,t,n=o[3][o[21].pedestrian_location]+"",r;return{c(){e=y("p"),l=S("Pedestrian location: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[3][s[21].pedestrian_location]+"")&&A(r,n)},d(s){s&&d(e)}}}function Hl(o){let e,l,t,n=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=y("p"),l=S("Pedestrian movement: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[4][s[21].pedestrian_movement]+"")&&A(r,n)},d(s){s&&d(e)}}}function hp(o){let e,l,t,n=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,p,h,k,C,T=zl(o[21])+"",I,O,N,R,j,M=o[21].pedestrian_location&&ql(o),H=o[21].pedestrian_movement&&Hl(o);return{c(){e=y("p"),l=S("Year: "),t=y("b"),r=S(n),s=L(),f=y("p"),i=S("Severity: "),a=y("b"),c=S(u),p=L(),h=y("p"),k=S("Casualties: "),C=y("b"),I=S(T),O=L(),M&&M.c(),N=L(),H&&H.c(),R=L(),j=y("p"),j.textContent="Click to open full report in CycleStreets"},m(P,F){g(P,e,F),$(e,l),$(e,t),$(t,r),g(P,s,F),g(P,f,F),$(f,i),$(f,a),$(a,c),g(P,p,F),g(P,h,F),$(h,k),$(h,C),$(C,I),g(P,O,F),M&&M.m(P,F),g(P,N,F),H&&H.m(P,F),g(P,R,F),g(P,j,F)},p(P,F){F&2097152&&n!==(n=P[21].year+"")&&A(r,n),F&2097152&&u!==(u=P[5][P[21].severity]+"")&&A(c,u),F&2097152&&T!==(T=zl(P[21])+"")&&A(I,T),P[21].pedestrian_location?M?M.p(P,F):(M=ql(P),M.c(),M.m(N.parentNode,N)):M&&(M.d(1),M=null),P[21].pedestrian_movement?H?H.p(P,F):(H=Hl(P),H.c(),H.m(R.parentNode,R)):H&&(H.d(1),H=null)},d(P){P&&(d(e),d(s),d(f),d(p),d(h),d(O),d(N),d(R),d(j)),M&&M.d(P),H&&H.d(P)}}}function wp(o){let e,l;return e=new ae({props:{$$slots:{default:[hp,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function bp(o){let e,l;const t=[q(qt),{sourceLayer:qt},{paint:{"circle-color":be(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[wp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new ft({props:n}),e.$on("click",Sp),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&451?x(t,[s&0&&re(q(qt)),s&0&&{sourceLayer:qt},s&448&&{paint:{"circle-color":be(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function vp(o){let e,l,t,n,r;function s(i){o[16](i)}let f={name:qt,title:kp,$$slots:{controls:[dp],help:[cp]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${qt}.pmtiles`,$$slots:{default:[bp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let qt="stats19",kp="Stats19";function yp(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function zl(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function Sp(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function Tp(o,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(P){return P.show?`${r.filter(W=>P[W]).join(",")}/${P.minYear}/${P.maxYear}`:null}let i=Jt(qt,s,f,yp);Y(o,i,P=>l(0,n=P));function a(P,F,W,ue,D,ee){let X=["any"];return n.pedestrians&&X.push(["get","pedestrian"]),n.cyclists&&X.push(["get","cyclist"]),n.horseRiders&&X.push(["get","horse_rider"]),n.other&&X.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],X]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},p={1:"Fatal",2:"Serious",3:"Slight"},h=te.sequential_low_to_high[4],k=te.sequential_low_to_high[2],C=te.sequential_low_to_high[0],T=[["Fatal",h],["Serious",k],["Slight",C]];function I(P){o.$$.not_equal(n.pedestrians,P)&&(n.pedestrians=P,i.set(n))}function O(P){o.$$.not_equal(n.cyclists,P)&&(n.cyclists=P,i.set(n))}function N(P){o.$$.not_equal(n.horseRiders,P)&&(n.horseRiders=P,i.set(n))}function R(P){o.$$.not_equal(n.other,P)&&(n.other=P,i.set(n))}function j(){n.minYear=fn(this.value),i.set(n)}function M(){n.maxYear=fn(this.value),i.set(n)}function H(P){o.$$.not_equal(n.show,P)&&(n.show=P,i.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,p,h,k,C,T,I,O,N,R,j,M,H]}class Cp extends K{constructor(e){super(),Z(this,e,Tp,vp,Q,{})}}function Bl(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Ul(o){let e,l,t=o[1]+"",n,r,s,f=o[2]+"",i,a;return{c(){e=y("tr"),l=y("td"),n=S(t),r=L(),s=y("td"),i=S(f),a=L()},m(u,c){g(u,e,c),$(e,l),$(l,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&1&&t!==(t=u[1]+"")&&A(n,t),c&1&&f!==(f=u[2]+"")&&A(i,f)},d(u){u&&d(e)}}}function Lp(o){let e,l,t,n,r=ge(Object.entries(o[0])),s=[];for(let f=0;f<r.length;f+=1)s[f]=Ul(Bl(o,r,f));return{c(){e=y("table"),l=y("thead"),l.innerHTML="<tr><th>Key</th> <th>Value</th></tr>",t=L(),n=y("tbody");for(let f=0;f<s.length;f+=1)s[f].c()},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,n);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,null)},p(f,i){if(i&1){r=ge(Object.entries(f[0]));let a;for(a=0;a<r.length;a+=1){const u=Bl(f,r,a);s[a]?s[a].p(u,i):(s[a]=Ul(u),s[a].c(),s[a].m(n,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(f){f&&d(e),He(s,f)}}}function Ip(o){let e,l;return e=new ae({props:{openOn:"click",$$slots:{default:[Lp,({props:t})=>({0:t}),({props:t})=>t?1:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&33&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}class Rn extends K{constructor(e){super(),Z(this,e,null,Ip,Q,{})}}function Op(o){let e;return{c(){e=y("span"),e.innerHTML="<p>This is your own GeoJSON file.</p>",G(e,"slot","help")},m(l,t){g(l,e,t)},p:J,d(l){l&&d(e)}}}function Mp(o){let e,l,t,n,r,s,f,i=o[0].features.length.toLocaleString()+"",a,u,c;return l=new Ur({props:{label:"Load your own GeoJSON file",onLoad:o[3]}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),n=y("p"),n.innerHTML="<i>Note this file doesn&#39;t leave your computer; it&#39;s not uploaded anywhere</i>",r=L(),s=y("p"),f=S("Currently showing "),a=S(i),u=S(" features"),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(p,h){g(p,e,h),b(l,e,null),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),$(s,a),$(s,u),c=!0},p(p,h){(!c||h&1)&&i!==(i=p[0].features.length.toLocaleString()+"")&&A(a,i)},i(p){c||(m(l.$$.fragment,p),c=!0)},o(p){_(l.$$.fragment,p),c=!1},d(p){p&&d(e),v(l)}}}function jp(o){let e,l;return e=new Rn({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Np(o){let e,l;return e=new Rn({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Rp(o){let e,l;return e=new Rn({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Fp(o){let e,l,t,n,r,s,f,i;const a=[q("user_data_polygons"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Polygon"]},{paint:{"fill-color":"blue","fill-opacity":ne(.5,1)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let u={$$slots:{default:[jp]},$$scope:{ctx:o}};for(let I=0;I<a.length;I+=1)u=V(u,a[I]);e=new Me({props:u});const c=[q("user_data_polygons-outline"),{paint:{"line-color":"black","line-width":2.5}},{layout:{visibility:o[1]?"visible":"none"}}];let p={};for(let I=0;I<c.length;I+=1)p=V(p,c[I]);t=new _e({props:p});const h=[q("user_data_lines"),{manageHoverState:!0},{filter:["==",["geometry-type"],"LineString"]},{paint:{"line-color":"green","line-width":ne(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let k={$$slots:{default:[Np]},$$scope:{ctx:o}};for(let I=0;I<h.length;I+=1)k=V(k,h[I]);r=new _e({props:k});const C=[q("user_data_points"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Point"]},{paint:{"circle-color":"red","circle-radius":ne(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let T={$$slots:{default:[Rp]},$$scope:{ctx:o}};for(let I=0;I<C.length;I+=1)T=V(T,C[I]);return f=new ft({props:T}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(I,O){b(e,I,O),g(I,l,O),b(t,I,O),g(I,n,O),b(r,I,O),g(I,s,O),b(f,I,O),i=!0},p(I,O){const N=O&2?x(a,[a[0],a[1],a[2],a[3],{layout:{visibility:I[1]?"visible":"none"}},a[5],a[6]]):{};O&32&&(N.$$scope={dirty:O,ctx:I}),e.$set(N);const R=O&2?x(c,[c[0],c[1],{layout:{visibility:I[1]?"visible":"none"}}]):{};t.$set(R);const j=O&2?x(h,[h[0],h[1],h[2],h[3],{layout:{visibility:I[1]?"visible":"none"}},h[5],h[6]]):{};O&32&&(j.$$scope={dirty:O,ctx:I}),r.$set(j);const M=O&2?x(C,[C[0],C[1],C[2],C[3],{layout:{visibility:I[1]?"visible":"none"}},C[5],C[6]]):{};O&32&&(M.$$scope={dirty:O,ctx:I}),f.$set(M)},i(I){i||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(r.$$.fragment,I),m(f.$$.fragment,I),i=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(r.$$.fragment,I),_(f.$$.fragment,I),i=!1},d(I){I&&(d(l),d(n),d(s)),v(e,I),v(t,I),v(r,I),v(f,I)}}}function Pp(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Yr,title:Dp,$$slots:{controls:[Mp],help:[Op]},$$scope:{ctx:o}};return o[1]!==void 0&&(f.show=o[1]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new ct({props:{data:o[0],generateId:!0,$$slots:{default:[Fp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&33&&(u.$$scope={dirty:a,ctx:i}),!l&&a&2&&(l=!0,u.show=i[1],U(()=>l=!1)),e.$set(u);const c={};a&1&&(c.data=i[0]),a&34&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Yr="user_data",Dp="Your own GeoJSON file";function Gp(o,e,l){let t,n=$e(Yr);Y(o,n,i=>l(1,t=i));let r={type:"FeatureCollection",features:[]};function s(i,a){try{l(0,r=JSON.parse(a))}catch(u){window.alert(`Couldn't load ${i} -- is it GeoJSON? ${u}`)}}function f(i){t=i,n.set(t)}return[r,t,n,s,f]}class Ap extends K{constructor(e){super(),Z(this,e,Gp,Pp,Q,{})}}function qp(o){let e;return{c(){e=S(`DfT road statistics
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Hp(o){let e;return{c(){e=S("methodology")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function zp(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new oe({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[qp]},$$scope:{ctx:o}}}),s=new oe({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Hp]},$$scope:{ctx:o}}}),c=new Ce({}),{c(){e=y("span"),l=y("p"),t=S("AADF (annual average daily flow) data from "),w(n.$$.fragment),r=S(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),w(s.$$.fragment),f=S(" for details and caveats about the measurements."),i=L(),a=y("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),w(c.$$.fragment),G(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(l,t),b(n,l,null),$(l,r),b(s,l,null),$(l,f),$(e,i),$(e,a),$(e,u),b(c,e,null),p=!0},p(h,k){const C={};k&128&&(C.$$scope={dirty:k,ctx:h}),n.$set(C);const T={};k&128&&(T.$$scope={dirty:k,ctx:h}),s.$set(T)},i(h){p||(m(n.$$.fragment,h),m(s.$$.fragment,h),m(c.$$.fragment,h),p=!0)},o(h){_(n.$$.fragment,h),_(s.$$.fragment,h),_(c.$$.fragment,h),p=!1},d(h){h&&d(e),v(n),v(s),v(c)}}}function Bp(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:o[3]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Up(o){let e,l=o[6].location+"",t,n,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",p,h,k,C,T=o[6].year+"",I,O,N,R=o[6].pedal_cycles.toLocaleString()+"",j,M,H,P,F,W=o[6].method+"",ue;return{c(){e=y("h2"),t=S(l),n=L(),r=y("p"),s=S("Total motor vehicles ("),i=S(f),a=S(` AADF):
        `),u=y("b"),p=S(c),h=L(),k=y("p"),C=S("Total pedal cycles ("),I=S(T),O=S(` AADF):
        `),N=y("b"),j=S(R),M=L(),H=y("p"),P=S("Count method: "),F=y("b"),ue=S(W)},m(D,ee){g(D,e,ee),$(e,t),g(D,n,ee),g(D,r,ee),$(r,s),$(r,i),$(r,a),$(r,u),$(u,p),g(D,h,ee),g(D,k,ee),$(k,C),$(k,I),$(k,O),$(k,N),$(N,j),g(D,M,ee),g(D,H,ee),$(H,P),$(H,F),$(F,ue)},p(D,ee){ee&64&&l!==(l=D[6].location+"")&&A(t,l),ee&64&&f!==(f=D[6].year+"")&&A(i,f),ee&64&&c!==(c=D[6].motor_vehicles.toLocaleString()+"")&&A(p,c),ee&64&&T!==(T=D[6].year+"")&&A(I,T),ee&64&&R!==(R=D[6].pedal_cycles.toLocaleString()+"")&&A(j,R),ee&64&&W!==(W=D[6].method+"")&&A(ue,W)},d(D){D&&(d(e),d(n),d(r),d(h),d(k),d(M),d(H))}}}function Ep(o){let e,l;return e=new ae({props:{$$slots:{default:[Up,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Wp(o){let e,l;const t=[q(Ht),{sourceLayer:Ht},{paint:{"circle-color":be(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ep]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new ft({props:n}),e.$on("click",Qp),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?x(t,[s&0&&re(q(Ht)),s&0&&{sourceLayer:Ht},s&6&&{paint:{"circle-color":be(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Yp(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ht,title:Jp,$$slots:{controls:[Bp],help:[zp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),z.push(()=>B(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ht}.pmtiles`,$$slots:{default:[Wp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ht="vehicle_counts",Jp="Vehicle counts";function Qp(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function Vp(o,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=$e(Ht);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class Kp extends K{constructor(e){super(),Z(this,e,Vp,Yp,Q,{})}}function Zp(o){return Ie(["get","intervention_type"],{area:nt.area,route:nt.route,crossing:nt.crossing,other:nt.other},"white")}function Xp(o){return[["Areas",nt.area],["Routes",nt.route],["Crossings",nt.crossing],["Other",nt.other]]}let xt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},Ln={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function xp(o,e,l){let t={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},n={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};for(let[r,s]of Object.entries(o.schemes))s.pipeline?n.schemes[r]=s:t.schemes[r]=s;for(let r of o.features){if(!em(r))continue;let s=r.properties.scheme_reference,f=Object.hasOwn(t.schemes,s),i=f?t.schemes[s]:n.schemes[s];i.browse&&(r.properties.funding_programme=i.browse.funding_programme,r.properties.current_milestone=i.browse.current_milestone);let a=f?t:n;r.id=a.features.length+1,a.features.push(r)}e.set(t),l.set(n)}function em(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}function tm(){let o={type:"FeatureCollection",features:[],schemes:{},notes:["These schemes are everything you've drawn in this browser using Scheme Sketcher. The data source and accuracy depend on whatever files you imported, created, or edited yourself."]};for(let l=0;l<window.localStorage.length;l++){let t=window.localStorage.key(l),n=t.split("/");if(!(n.length!=3||n[0]!="sketch"))try{let r=JSON.parse(window.localStorage.getItem(t));if(r.features.length==0)continue;for(let s of Object.values(r.schemes))s.browse={authority_or_region:n[1],local_filename:n[2]};o.schemes={...o.schemes,...r.schemes},o.features=[...o.features,...r.features]}catch{}}let e=1;for(let l of o.features)l.id=e++;return o}function El(o,e,l){const t=o.slice();return t[30]=e[l][0],t[31]=e[l][1],t[32]=e,t[33]=l,t}function Wl(o,e,l){const t=o.slice();return t[34]=e[l],t[35]=e,t[36]=l,t}function nm(o){let e;return{c(){e=S("Filters")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function lm(o){let e;return{c(){e=S("Reset all filters")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function rm(o){let e,l,t,n,r,s,f,i;e=new sn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[im]},$$scope:{ctx:o}}});function a(h){o[25](h)}let u={label:"Scheme name or reference",options:$n(o[0])};o[1]!==void 0&&(u.value=o[1]),t=new Er({props:u}),z.push(()=>B(t,"value",a));function c(h){o[26](h)}let p={label:"Authority or region",choices:o[11],emptyOption:!0};return o[4]!==void 0&&(p.value=o[4]),s=new Xt({props:p}),z.push(()=>B(s,"value",c)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),r=L(),w(s.$$.fragment)},m(h,k){b(e,h,k),g(h,l,k),b(t,h,k),g(h,r,k),b(s,h,k),i=!0},p(h,k){const C={};k[0]&4|k[1]&64&&(C.$$scope={dirty:k,ctx:h}),e.$set(C);const T={};k[0]&1&&(T.options=$n(h[0])),!n&&k[0]&2&&(n=!0,T.value=h[1],U(()=>n=!1)),t.$set(T);const I={};k[0]&2048&&(I.choices=h[11]),!f&&k[0]&16&&(f=!0,I.value=h[4],U(()=>f=!1)),s.$set(I)},i(h){i||(m(e.$$.fragment,h),m(t.$$.fragment,h),m(s.$$.fragment,h),i=!0)},o(h){_(e.$$.fragment,h),_(t.$$.fragment,h),_(s.$$.fragment,h),i=!1},d(h){h&&(d(l),d(r)),v(e,h),v(t,h),v(s,h)}}}function om(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,O;t=new sn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[fm]},$$scope:{ctx:o}}});function N(F){o[18](F)}let R={label:"Scheme name or reference",options:$n(o[0])};o[1]!==void 0&&(R.value=o[1]),r=new Er({props:R}),z.push(()=>B(r,"value",N));function j(F){o[19](F)}let M={label:"Authority or region",choices:o[11],emptyOption:!0};o[4]!==void 0&&(M.value=o[4]),i=new Xt({props:M}),z.push(()=>B(i,"value",j));function H(F){o[20](F)}let P={label:"Current milestone",choices:o[12],emptyOption:!0};return o[6]!==void 0&&(P.value=o[6]),c=new Xt({props:P}),z.push(()=>B(c,"value",H)),C=new sn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[$m]},$$scope:{ctx:o}}}),I=new sn({props:{label:"Intervention types",id:"filterInterventionTypes",$$slots:{default:[_m]},$$scope:{ctx:o}}}),{c(){e=y("div"),l=y("div"),w(t.$$.fragment),n=L(),w(r.$$.fragment),f=L(),w(i.$$.fragment),u=L(),w(c.$$.fragment),h=L(),k=y("div"),w(C.$$.fragment),T=L(),w(I.$$.fragment),G(l,"class","govuk-grid-column-one-half"),G(k,"class","govuk-grid-column-one-half"),G(e,"class","govuk-grid-row")},m(F,W){g(F,e,W),$(e,l),b(t,l,null),$(l,n),b(r,l,null),$(l,f),b(i,l,null),$(l,u),b(c,l,null),$(e,h),$(e,k),b(C,k,null),$(k,T),b(I,k,null),O=!0},p(F,W){const ue={};W[0]&4|W[1]&64&&(ue.$$scope={dirty:W,ctx:F}),t.$set(ue);const D={};W[0]&1&&(D.options=$n(F[0])),!s&&W[0]&2&&(s=!0,D.value=F[1],U(()=>s=!1)),r.$set(D);const ee={};W[0]&2048&&(ee.choices=F[11]),!a&&W[0]&16&&(a=!0,ee.value=F[4],U(()=>a=!1)),i.$set(ee);const X={};!p&&W[0]&64&&(p=!0,X.value=F[6],U(()=>p=!1)),c.$set(X);const ce={};W[0]&32|W[1]&64&&(ce.$$scope={dirty:W,ctx:F}),C.$set(ce);const Le={};W[0]&128|W[1]&64&&(Le.$$scope={dirty:W,ctx:F}),I.$set(Le)},i(F){O||(m(t.$$.fragment,F),m(r.$$.fragment,F),m(i.$$.fragment,F),m(c.$$.fragment,F),m(C.$$.fragment,F),m(I.$$.fragment,F),O=!0)},o(F){_(t.$$.fragment,F),_(r.$$.fragment,F),_(i.$$.fragment,F),_(c.$$.fragment,F),_(C.$$.fragment,F),_(I.$$.fragment,F),O=!1},d(F){F&&d(e),v(t),v(r),v(i),v(c),v(C),v(I)}}}function sm(o){let e;return{c(){e=S("Clear")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function im(o){let e,l,t,n,r,s;return t=new We({props:{$$slots:{default:[sm]},$$scope:{ctx:o}}}),t.$on("click",o[24]),{c(){e=y("input"),l=L(),w(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){g(f,e,i),at(e,o[2]),g(f,l,i),b(t,f,i),n=!0,r||(s=Zt(e,"input",o[23]),r=!0)},p(f,i){i[0]&4&&e.value!==f[2]&&at(e,f[2]);const a={};i[1]&64&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(d(e),d(l)),v(t,f),r=!1,s()}}}function am(o){let e;return{c(){e=S("Clear")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function fm(o){let e,l,t,n,r,s;return t=new We({props:{$$slots:{default:[am]},$$scope:{ctx:o}}}),t.$on("click",o[17]),{c(){e=y("input"),l=L(),w(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){g(f,e,i),at(e,o[2]),g(f,l,i),b(t,f,i),n=!0,r||(s=Zt(e,"input",o[16]),r=!0)},p(f,i){i[0]&4&&e.value!==f[2]&&at(e,f[2]);const a={};i[1]&64&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(d(e),d(l)),v(t,f),r=!1,s()}}}function um(o){let e=o[34]+"",l,t;return{c(){l=S(e),t=L()},m(n,r){g(n,l,r),g(n,t,r)},p:J,d(n){n&&(d(l),d(t))}}}function Yl(o){let e,l,t;function n(s){o[21](s,o[34])}let r={$$slots:{default:[um]},$$scope:{ctx:o}};return o[5][o[34]]!==void 0&&(r.checked=o[5][o[34]]),e=new Ee({props:r}),z.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f[1]&64&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&32&&(l=!0,i.checked=o[5][o[34]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function cm(o){let e,l,t=ge(Object.keys(xt)),n=[];for(let s=0;s<t.length;s+=1)n[s]=Yl(Wl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=he()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f[0]&32){t=ge(Object.keys(xt));let i;for(i=0;i<t.length;i+=1){const a=Wl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Yl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(ve(),i=t.length;i<n.length;i+=1)r(i);ke()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),He(n,s)}}}function $m(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[cm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function pm(o){let e=o[31]+"",l,t;return{c(){l=S(e),t=L()},m(n,r){g(n,l,r),g(n,t,r)},p:J,d(n){n&&(d(l),d(t))}}}function Jl(o){let e,l,t;function n(s){o[22](s,o[30])}let r={$$slots:{default:[pm]},$$scope:{ctx:o}};return o[7][o[30]]!==void 0&&(r.checked=o[7][o[30]]),e=new Ee({props:r}),z.push(()=>B(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f[1]&64&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&8320&&(l=!0,i.checked=o[7][o[30]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function mm(o){let e,l,t=ge(o[13]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Jl(El(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=he()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f[0]&8320){t=ge(s[13]);let i;for(i=0;i<t.length;i+=1){const a=El(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Jl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(ve(),i=t.length;i<n.length;i+=1)r(i);ke()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),He(n,s)}}}function _m(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[mm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n[0]&128|n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function gm(o){let e;return{c(){e=S("Done")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function dm(o){let e,l,t,n,r=o[10].interventions.toLocaleString()+"",s,f,i,a,u=o[9].size.toLocaleString()+"",c,p,h,k,C,T=Ql(o[10].totalLength).toFixed(1)+"",I,O,N,R,j,M,H,P,F,W;R=new We({props:{$$slots:{default:[lm]},$$scope:{ctx:o}}}),R.$on("click",o[14]);const ue=[om,rm],D=[];function ee(X,ce){return X[3]=="ATF"?0:1}return M=ee(o),H=D[M]=ue[M](o),F=new Do({props:{$$slots:{default:[gm]},$$scope:{ctx:o}}}),F.$on("click",o[27]),{c(){e=y("p"),e.textContent="Showing:",l=L(),t=y("ul"),n=y("li"),s=S(r),f=S(" interventions"),i=L(),a=y("li"),c=S(u),p=S(" schemes"),h=L(),k=y("li"),C=S("total route length of "),I=S(T),O=S(" miles"),N=L(),w(R.$$.fragment),j=L(),H.c(),P=L(),w(F.$$.fragment)},m(X,ce){g(X,e,ce),g(X,l,ce),g(X,t,ce),$(t,n),$(n,s),$(n,f),$(t,i),$(t,a),$(a,c),$(a,p),$(t,h),$(t,k),$(k,C),$(k,I),$(k,O),g(X,N,ce),b(R,X,ce),g(X,j,ce),D[M].m(X,ce),g(X,P,ce),b(F,X,ce),W=!0},p(X,ce){(!W||ce[0]&1024)&&r!==(r=X[10].interventions.toLocaleString()+"")&&A(s,r),(!W||ce[0]&512)&&u!==(u=X[9].size.toLocaleString()+"")&&A(c,u),(!W||ce[0]&1024)&&T!==(T=Ql(X[10].totalLength).toFixed(1)+"")&&A(I,T);const Le={};ce[1]&64&&(Le.$$scope={dirty:ce,ctx:X}),R.$set(Le);let le=M;M=ee(X),M===le?D[M].p(X,ce):(ve(),_(D[le],1,1,()=>{D[le]=null}),ke(),H=D[M],H?H.p(X,ce):(H=D[M]=ue[M](X),H.c()),m(H,1),H.m(P.parentNode,P));const Oe={};ce[1]&64&&(Oe.$$scope={dirty:ce,ctx:X}),F.$set(Oe)},i(X){W||(m(R.$$.fragment,X),m(H),m(F.$$.fragment,X),W=!0)},o(X){_(R.$$.fragment,X),_(H),_(F.$$.fragment,X),W=!1},d(X){X&&(d(e),d(l),d(t),d(N),d(j),d(P)),v(R,X),D[M].d(X),v(F,X)}}}function hm(o){let e,l,t,n,r;e=new We({props:{$$slots:{default:[nm]},$$scope:{ctx:o}}}),e.$on("click",o[15]);function s(i){o[28](i)}let f={title:`Filter ${o[3]} schemes`,$$slots:{default:[dm]},$$scope:{ctx:o}};return o[8]!==void 0&&(f.open=o[8]),t=new fo({props:f}),z.push(()=>B(t,"open",s)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(i,a){b(e,i,a),g(i,l,a),b(t,i,a),r=!0},p(i,a){const u={};a[1]&64&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a[0]&8&&(c.title=`Filter ${i[3]} schemes`),a[0]&4095|a[1]&64&&(c.$$scope={dirty:a,ctx:i}),!n&&a[0]&256&&(n=!0,c.open=i[8],U(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),r=!1},d(i){i&&d(l),v(e,i),v(t,i)}}}function wm(o){var t;let e=new Set;for(let n of Object.values(o.schemes))(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Ql(o){return o*621371e-9}function $n(o){let e=[];for(let l of Object.values(o.schemes))e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function bm(o,e,l){let t,{source:n}=e,{schemesGj:r}=e,{filterSchemeText:s}=e,{filterInterventionText:f}=e,i=!1,a=new Set,u={interventions:0,totalLength:0},c=Object.keys(Ln).map(le=>[le,le]),p="",h=Object.fromEntries(Object.keys(xt).map(le=>[le,!0])),k="",C=[["route","Routes"],["area","Areas"],["crossing","Crossings"],["other","Other"]],T=Object.fromEntries(C.map(([le,Oe])=>[le,!0]));function I(le,Oe,tt,$t,pt,ot){let Ye=le.toLowerCase(),st=Oe.toLowerCase(),mt=de=>{var E,gt,Be,Ue;if(Ye&&!((E=de.properties.name)!=null&&E.toLowerCase().includes(Ye))&&!((gt=de.properties.description)!=null&&gt.toLowerCase().includes(Ye)))return!1;let je=r.schemes[de.properties.scheme_reference];return!(tt&&((Be=je.browse)==null?void 0:Be.authority_or_region)!=tt||n=="ATF"&&je.browse.funding_programme&&!$t[je.browse.funding_programme]||pt&&((Ue=je.browse)==null?void 0:Ue.current_milestone)!=pt||st&&!je.scheme_reference.toLowerCase().includes(st)&&!(je.scheme_name??"").toLowerCase().includes(st))};l(9,a=new Set(r.features.filter(mt).map(de=>de.properties.scheme_reference))),l(10,u={interventions:0,totalLength:0});let _t=de=>{var je,E;return!(!a.has(de.properties.scheme_reference)||Ye&&!((je=de.properties.name)!=null&&je.toLowerCase().includes(Ye))&&!((E=de.properties.description)!=null&&E.toLowerCase().includes(Ye))||n=="ATF"&&!ot[de.properties.intervention_type])};for(let de of r.features)_t(de)?(delete de.properties.hide_while_editing,l(10,u.interventions++,u),de.geometry.type=="LineString"&&de.properties.length_meters&&l(10,u.totalLength+=de.properties.length_meters,u)):de.properties.hide_while_editing=!0;l(0,r),l(10,u)}function O(){l(4,p=""),l(5,h=Object.fromEntries(Object.keys(xt).map(le=>[le,!0]))),l(6,k=""),l(2,f=""),l(1,s="")}const N=()=>l(8,i=!0);function R(){f=this.value,l(2,f)}const j=()=>l(2,f="");function M(le){s=le,l(1,s)}function H(le){p=le,l(4,p)}function P(le){k=le,l(6,k)}function F(le,Oe){o.$$.not_equal(h[Oe],le)&&(h[Oe]=le,l(5,h))}function W(le,Oe){o.$$.not_equal(T[Oe],le)&&(T[Oe]=le,l(7,T))}function ue(){f=this.value,l(2,f)}const D=()=>l(2,f="");function ee(le){s=le,l(1,s)}function X(le){p=le,l(4,p)}const ce=()=>l(8,i=!1);function Le(le){i=le,l(8,i)}return o.$$set=le=>{"source"in le&&l(3,n=le.source),"schemesGj"in le&&l(0,r=le.schemesGj),"filterSchemeText"in le&&l(1,s=le.filterSchemeText),"filterInterventionText"in le&&l(2,f=le.filterInterventionText)},o.$$.update=()=>{o.$$.dirty[0]&1&&l(11,t=wm(r)),o.$$.dirty[0]&246&&I(f,s,p,h,k,T)},[r,s,f,n,p,h,k,T,i,a,u,t,c,C,O,N,R,j,M,H,P,F,W,ue,D,ee,X,ce,Le]}class Fn extends K{constructor(e){super(),Z(this,e,bm,hm,Q,{source:3,schemesGj:0,filterSchemeText:1,filterInterventionText:2},null,[-1,-1])}}function Vl(o){let e,l,t,n=o[0].budget.toLocaleString()+"",r,s;return{c(){e=y("p"),l=y("b"),l.textContent="Cost",t=S(`
    : `),r=S(n),s=S(`
    GBP`)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r),$(e,s)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&A(r,n)},d(f){f&&d(e)}}}function Kl(o){let e;return{c(){e=y("p"),e.textContent="Development is fully funded"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Zl(o){let e;return{c(){e=y("p"),e.textContent="Construction is fully funded"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Xl(o){let e,l,t,n;return{c(){e=y("p"),l=y("b"),l.textContent="Funding sources",t=S(`
    : `),n=S(o[1])},m(r,s){g(r,e,s),$(e,l),$(e,t),$(e,n)},p(r,s){s&2&&A(n,r[1])},d(r){r&&d(e)}}}function vm(o){let e,l,t,n,r=o[0].budget&&Vl(o),s=o[0].development_funded&&Kl(),f=o[0].construction_funded&&Zl(),i=o[1]&&Xl(o);return{c(){r&&r.c(),e=L(),s&&s.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=he()},m(a,u){r&&r.m(a,u),g(a,e,u),s&&s.m(a,u),g(a,l,u),f&&f.m(a,u),g(a,t,u),i&&i.m(a,u),g(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=Vl(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=Kl(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=Zl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=Xl(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:J,o:J,d(a){a&&(d(e),d(l),d(t),d(n)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function km(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function ym(o,e,l){let t,{props:n}=e;return o.$$set=r=>{"props"in r&&l(0,n=r.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=km(n))},[n,t]}class Jr extends K{constructor(e){super(),Z(this,e,ym,vm,Q,{props:0})}}function xl(o){let e,l,t,n=o[0].status+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Status",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].status+"")&&A(r,n)},d(s){s&&d(e)}}}function er(o){let e,l,t,n=o[0].timescale+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Timescale",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale+"")&&A(r,n)},d(s){s&&d(e)}}}function tr(o){let e,l,t,n=o[0].timescale_year+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Estimated completion year",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale_year+"")&&A(r,n)},d(s){s&&d(e)}}}function nr(o){let e,l,t,n=o[0].year_published+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme most recently published",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_published+"")&&A(r,n)},d(s){s&&d(e)}}}function lr(o){let e,l,t,n=o[0].year_consulted+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme most recently consulted on",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_consulted+"")&&A(r,n)},d(s){s&&d(e)}}}function Sm(o){let e,l,t,n,r,s=o[0].status&&xl(o),f=o[0].timescale&&er(o),i=o[0].timescale_year&&tr(o),a=o[0].year_published&&nr(o),u=o[0].year_consulted&&lr(o);return{c(){s&&s.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=he()},m(c,p){s&&s.m(c,p),g(c,e,p),f&&f.m(c,p),g(c,l,p),i&&i.m(c,p),g(c,t,p),a&&a.m(c,p),g(c,n,p),u&&u.m(c,p),g(c,r,p)},p(c,[p]){c[0].status?s?s.p(c,p):(s=xl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,p):(f=er(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,p):(i=tr(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,p):(a=nr(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,p):(u=lr(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:J,o:J,d(c){c&&(d(e),d(l),d(t),d(n),d(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function Tm(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Qr extends K{constructor(e){super(),Z(this,e,Tm,Sm,Q,{props:0})}}function mn(o){const e=o.slice(),l=e[5].pipeline;return e[11]=l,e}function _n(o){const e=o.slice(),l=JSON.parse(e[1].v2);return e[11]=l,e}function gn(o){const e=o.slice(),l=JSON.parse(e[1].pipeline);return e[11]=l,e}function rr(o){let e,l,t,n=Qn(o[1].length_meters)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Length",t=S(`
        : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=Qn(s[1].length_meters)+"")&&A(r,n)},d(s){s&&d(e)}}}function or(o){let e,l=it(o[1].description,o[3])+"";return{c(){e=y("p")},m(t,n){g(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=it(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&d(e)}}}function sr(o){let e,l,t,n,r,s,f,i=o[11].atf4_type&&ir(o),a=o[11].accuracy&&ar(o),u=o[11].is_alternative&&fr();return n=new Jr({props:{props:o[11]}}),s=new Qr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,p){i&&i.m(c,p),g(c,e,p),a&&a.m(c,p),g(c,l,p),u&&u.m(c,p),g(c,t,p),b(n,c,p),g(c,r,p),b(s,c,p),f=!0},p(c,p){c[11].atf4_type?i?i.p(c,p):(i=ir(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].accuracy?a?a.p(c,p):(a=ar(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].is_alternative?u||(u=fr(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const h={};p&2&&(h.props=c[11]),n.$set(h);const k={};p&2&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(d(e),d(l),d(t),d(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function ir(o){let e,l,t,n=o[11].atf4_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="ATF4 type",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].atf4_type+"")&&A(r,n)},d(s){s&&d(e)}}}function ar(o){let e,l,t,n=o[11].accuracy+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Accuracy",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].accuracy+"")&&A(r,n)},d(s){s&&d(e)}}}function fr(o){let e;return{c(){e=y("p"),e.textContent="Represents an alternative route"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ur(o){let e,l,t,n=o[11].intervention_type&&cr(o),r=o[11].work_type&&$r(o),s=o[11].intended_uses&&pr(o);return{c(){n&&n.c(),e=L(),r&&r.c(),l=L(),s&&s.c(),t=he()},m(f,i){n&&n.m(f,i),g(f,e,i),r&&r.m(f,i),g(f,l,i),s&&s.m(f,i),g(f,t,i)},p(f,i){f[11].intervention_type?n?n.p(f,i):(n=cr(f),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),f[11].work_type?r?r.p(f,i):(r=$r(f),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null),f[11].intended_uses?s?s.p(f,i):(s=pr(f),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(f){f&&(d(e),d(l),d(t)),n&&n.d(f),r&&r.d(f),s&&s.d(f)}}}function cr(o){let e,l,t,n=o[11].intervention_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Type",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].intervention_type+"")&&A(r,n)},d(s){s&&d(e)}}}function $r(o){let e,l,t,n=o[11].work_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="What kind of infrastructure is mapped",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].work_type+"")&&A(r,n)},d(s){s&&d(e)}}}function pr(o){let e,l,t,n=o[11].intended_uses+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Intended uses",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].intended_uses+"")&&A(r,n)},d(s){s&&d(e)}}}function mr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Capital scheme ID",t=S(`
        : `),r=S(n)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&A(r,n)},d(f){f&&d(e)}}}function _r(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.funding_programme)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Funding programme",t=S(`
        : `),r=S(n)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&A(r,n)},d(f){f&&d(e)}}}function gr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Current milestone",t=S(`
        : `),r=S(n)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&A(r,n)},d(f){f&&d(e)}}}function dr(o){let e,l,t,n,r,s,f,i=o[11].scheme_type&&hr(o),a=o[11].atf4_lead_type&&wr(o),u=o[11].scheme_description&&br(o);return n=new Jr({props:{props:o[11]}}),s=new Qr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,p){i&&i.m(c,p),g(c,e,p),a&&a.m(c,p),g(c,l,p),u&&u.m(c,p),g(c,t,p),b(n,c,p),g(c,r,p),b(s,c,p),f=!0},p(c,p){c[11].scheme_type?i?i.p(c,p):(i=hr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].atf4_lead_type?a?a.p(c,p):(a=wr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].scheme_description?u?u.p(c,p):(u=br(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const h={};p&32&&(h.props=c[11]),n.$set(h);const k={};p&32&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(d(e),d(l),d(t),d(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function hr(o){let e,l,t,n=o[11].scheme_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme type",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_type+"")&&A(r,n)},d(s){s&&d(e)}}}function wr(o){let e,l,t,n=o[11].atf4_lead_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="ATF4 lead type",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].atf4_lead_type+"")&&A(r,n)},d(s){s&&d(e)}}}function br(o){let e,l,t,n=o[11].scheme_description+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Descripton",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_description+"")&&A(r,n)},d(s){s&&d(e)}}}function Cm(o){let e;return{c(){e=S("Edit a copy of this scheme")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Lm(o){let e;return{c(){e=S("Edit your existing version of this scheme")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Im(o){let e;function l(r,s){var f;return(f=r[5].browse)!=null&&f.local_filename?Lm:Cm}let t=l(o),n=t(o);return{c(){n.c(),e=he()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function Om(o){let e;return{c(){e=S("Zoom to show entire scheme")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function vr(o){var Dn,Gn,An,qn;let e,l,t,n,r,s,f,i=it(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,p,h,k,C,T,I,O,N,R,j,M,H,P,F,W,ue=it(o[5].scheme_name??"",o[2])+"",D,ee,X,ce,Le,le=it(o[1].scheme_reference,o[2])+"",Oe,tt,$t,pt,ot=((Dn=o[5].browse)==null?void 0:Dn.authority_or_region)+"",Ye,st,mt,_t,de,je,E,gt,Be,Ue,Fe=o[1].length_meters&&rr(o),Pe=o[1].description&&or(o),Se=o[1].pipeline&&sr(gn(o)),De=o[1].v2&&ur(_n(o)),Ge=((Gn=o[5].browse)==null?void 0:Gn.capital_scheme_id)&&mr(o),Ae=((An=o[5].browse)==null?void 0:An.funding_programme)&&_r(o),qe=((qn=o[5].browse)==null?void 0:qn.current_milestone)&&gr(o),Te=o[5].pipeline&&dr(mn(o));return E=new We({props:{$$slots:{default:[Im]},$$scope:{ctx:o}}}),E.$on("click",o[7]),Be=new We({props:{$$slots:{default:[Om]},$$scope:{ctx:o}}}),Be.$on("click",o[6]),{c(){e=y("div"),l=y("h2"),l.textContent="Intervention",t=L(),n=y("p"),r=y("b"),r.textContent="Name",s=S(`
      : `),f=new zt(!1),a=S(" ("),c=S(u),p=S(")"),h=L(),Fe&&Fe.c(),k=L(),Pe&&Pe.c(),C=L(),Se&&Se.c(),T=L(),De&&De.c(),I=L(),O=y("hr"),N=L(),R=y("h2"),j=S(o[0]),M=L(),H=y("p"),P=y("b"),P.textContent="Scheme name",F=S(`
      : `),W=new zt(!1),D=L(),ee=y("p"),X=y("b"),X.textContent="Scheme reference",ce=S(`
      : `),Le=new zt(!1),Oe=L(),tt=y("p"),$t=y("b"),$t.textContent="Authority or region",pt=S(`
      : `),Ye=S(ot),st=L(),Ge&&Ge.c(),mt=L(),Ae&&Ae.c(),_t=L(),qe&&qe.c(),de=L(),Te&&Te.c(),je=L(),w(E.$$.fragment),gt=L(),w(Be.$$.fragment),f.a=a,W.a=null,Le.a=null,se(e,"max-width","30vw"),se(e,"max-height","60vh"),se(e,"overflow","auto")},m(ie,we){g(ie,e,we),$(e,l),$(e,t),$(e,n),$(n,r),$(n,s),f.m(i,n),$(n,a),$(n,c),$(n,p),$(e,h),Fe&&Fe.m(e,null),$(e,k),Pe&&Pe.m(e,null),$(e,C),Se&&Se.m(e,null),$(e,T),De&&De.m(e,null),$(e,I),$(e,O),$(e,N),$(e,R),$(R,j),$(e,M),$(e,H),$(H,P),$(H,F),W.m(ue,H),$(e,D),$(e,ee),$(ee,X),$(ee,ce),Le.m(le,ee),$(e,Oe),$(e,tt),$(tt,$t),$(tt,pt),$(tt,Ye),$(e,st),Ge&&Ge.m(e,null),$(e,mt),Ae&&Ae.m(e,null),$(e,_t),qe&&qe.m(e,null),$(e,de),Te&&Te.m(e,null),$(e,je),b(E,e,null),$(e,gt),b(Be,e,null),o[9](e),Ue=!0},p(ie,we){var Bn,Un,En,Wn;(!Ue||we&10)&&i!==(i=it(ie[1].name,ie[3])+"")&&f.p(i),(!Ue||we&2)&&u!==(u=ie[1].intervention_type+"")&&A(c,u),ie[1].length_meters?Fe?Fe.p(ie,we):(Fe=rr(ie),Fe.c(),Fe.m(e,k)):Fe&&(Fe.d(1),Fe=null),ie[1].description?Pe?Pe.p(ie,we):(Pe=or(ie),Pe.c(),Pe.m(e,C)):Pe&&(Pe.d(1),Pe=null),ie[1].pipeline?Se?(Se.p(gn(ie),we),we&2&&m(Se,1)):(Se=sr(gn(ie)),Se.c(),m(Se,1),Se.m(e,T)):Se&&(ve(),_(Se,1,1,()=>{Se=null}),ke()),ie[1].v2?De?De.p(_n(ie),we):(De=ur(_n(ie)),De.c(),De.m(e,I)):De&&(De.d(1),De=null),(!Ue||we&1)&&A(j,ie[0]),(!Ue||we&36)&&ue!==(ue=it(ie[5].scheme_name??"",ie[2])+"")&&W.p(ue),(!Ue||we&6)&&le!==(le=it(ie[1].scheme_reference,ie[2])+"")&&Le.p(le),(!Ue||we&32)&&ot!==(ot=((Bn=ie[5].browse)==null?void 0:Bn.authority_or_region)+"")&&A(Ye,ot),(Un=ie[5].browse)!=null&&Un.capital_scheme_id?Ge?Ge.p(ie,we):(Ge=mr(ie),Ge.c(),Ge.m(e,mt)):Ge&&(Ge.d(1),Ge=null),(En=ie[5].browse)!=null&&En.funding_programme?Ae?Ae.p(ie,we):(Ae=_r(ie),Ae.c(),Ae.m(e,_t)):Ae&&(Ae.d(1),Ae=null),(Wn=ie[5].browse)!=null&&Wn.current_milestone?qe?qe.p(ie,we):(qe=gr(ie),qe.c(),qe.m(e,de)):qe&&(qe.d(1),qe=null),ie[5].pipeline?Te?(Te.p(mn(ie),we),we&32&&m(Te,1)):(Te=dr(mn(ie)),Te.c(),m(Te,1),Te.m(e,je)):Te&&(ve(),_(Te,1,1,()=>{Te=null}),ke());const Hn={};we&4128&&(Hn.$$scope={dirty:we,ctx:ie}),E.$set(Hn);const zn={};we&4096&&(zn.$$scope={dirty:we,ctx:ie}),Be.$set(zn)},i(ie){Ue||(m(Se),m(Te),m(E.$$.fragment,ie),m(Be.$$.fragment,ie),Ue=!0)},o(ie){_(Se),_(Te),_(E.$$.fragment,ie),_(Be.$$.fragment,ie),Ue=!1},d(ie){ie&&d(e),Fe&&Fe.d(),Pe&&Pe.d(),Se&&Se.d(),De&&De.d(),Ge&&Ge.d(),Ae&&Ae.d(),qe&&qe.d(),Te&&Te.d(),v(E),v(Be),o[9](null)}}}function Mm(o){let e=o[1],l,t,n=vr(o);return{c(){n.c(),l=he()},m(r,s){n.m(r,s),g(r,l,s),t=!0},p(r,[s]){s&2&&Q(e,e=r[1])?(ve(),_(n,1,1,J),ke(),n=vr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n.d(r)}}}function it(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function jm(o,e,l){let t,n;Y(o,pn,k=>l(10,n=k));let{description:r}=e,{props:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,u;lo(()=>{u&&l(4,u.scrollTop=0,u)});function c(){let k={type:"FeatureCollection",features:f.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(zr(k),{padding:20,animate:!1})}function p(){var I,O,N;let k={type:"FeatureCollection",features:f.features.filter(R=>R.properties.scheme_reference==t.scheme_reference),schemes:{}};k.schemes[t.scheme_reference]=t;let C=(I=t.browse)==null?void 0:I.authority_or_region;if(!C){window.alert("This scheme has no authority specified, you can't edit this");return}let T=t.pipeline?"pipeline":t.v2?"v2":"v1";if((O=t.browse)!=null&&O.local_filename)window.open(Xn(C,(N=t.browse)==null?void 0:N.local_filename,T),"_blank");else{let R=`browse_copy_${t.scheme_reference}`,j=No(C,k);for(let M of j.features)delete M.properties.funding_programme,delete M.properties.current_milestone;Ro(Fo(C,R),JSON.stringify(j)),window.open(Xn(C,R,T),"_blank")}}function h(k){z[k?"unshift":"push"](()=>{u=k,l(4,u)})}return o.$$set=k=>{"description"in k&&l(0,r=k.description),"props"in k&&l(1,s=k.props),"schemesGj"in k&&l(8,f=k.schemesGj),"filterSchemeText"in k&&l(2,i=k.filterSchemeText),"filterInterventionText"in k&&l(3,a=k.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=f.schemes[s.scheme_reference])},[r,s,i,a,u,t,c,p,f,h]}class Pn extends K{constructor(e){super(),Z(this,e,jm,Mm,Q,{description:0,props:1,schemesGj:8,filterSchemeText:2,filterInterventionText:3})}}function Nm(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&d(e)}}}function Rm(o){let e,l;return e=new Pn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Fm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Nm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Rm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function Pm(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&d(e)}}}function Dm(o){let e,l;return e=new Pn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Gm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Pm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Dm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function Am(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&d(e)}}}function qm(o){let e,l;return e=new Pn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Hm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Am,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[qm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function zm(o){let e,l,t,n,r,s,f,i,a,u;const c=[q(`${o[0]}-interventions-points`),{filter:["all",yn,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":Vn,"circle-opacity":ne(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let p={$$slots:{default:[Fm]},$$scope:{ctx:o}};for(let j=0;j<c.length;j+=1)p=V(p,c[j]);e=new ft({props:p});const h=[q(`${o[0]}-interventions-lines`),{filter:["all",kn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":tn,"line-opacity":ne(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[Gm]},$$scope:{ctx:o}};for(let j=0;j<h.length;j+=1)k=V(k,h[j]);t=new _e({props:k});const C=[q(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*tn,"circle-opacity":0,"circle-stroke-color":nt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[2]?"visible":"none"}}];let T={};for(let j=0;j<C.length;j+=1)T=V(T,C[j]);r=new ft({props:T});const I=[q(`${o[0]}-interventions-polygons`),{filter:["all",on,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":ne(.2,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let O={$$slots:{default:[Hm]},$$scope:{ctx:o}};for(let j=0;j<I.length;j+=1)O=V(O,I[j]);f=new Me({props:O});const N=[q(`${o[0]}-interventions-polygons-outlines`),{filter:["all",on,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*tn}},{layout:{visibility:o[2]?"visible":"none"}}];let R={};for(let j=0;j<N.length;j+=1)R=V(R,N[j]);return a=new _e({props:R}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(j,M){b(e,j,M),g(j,l,M),b(t,j,M),g(j,n,M),b(r,j,M),g(j,s,M),b(f,j,M),g(j,i,M),b(a,j,M),u=!0},p(j,M){const H=M&837?x(c,[M&1&&re(q(`${j[0]}-interventions-points`)),M&768&&{filter:["all",yn,j[8],j[9]]},c[2],c[3],M&64&&{paint:{"circle-color":j[6],"circle-radius":Vn,"circle-opacity":ne(1,.5)}},M&4&&{layout:{visibility:j[2]?"visible":"none"}},c[6]]):{};M&2106&&(H.$$scope={dirty:M,ctx:j}),e.$set(H);const P=M&325?x(h,[M&1&&re(q(`${j[0]}-interventions-lines`)),M&256&&{filter:["all",kn,j[8]]},h[2],h[3],M&64&&{paint:{"line-color":j[6],"line-width":tn,"line-opacity":ne(1,.5)}},M&4&&{layout:{visibility:j[2]?"visible":"none"}},h[6]]):{};M&2106&&(P.$$scope={dirty:M,ctx:j}),t.$set(P);const F=M&5?x(C,[M&1&&re(q(`${j[0]}-interventions-lines-endpoints`)),C[1],C[2],M&4&&{layout:{visibility:j[2]?"visible":"none"}}]):{};r.$set(F);const W=M&325?x(I,[M&1&&re(q(`${j[0]}-interventions-polygons`)),M&256&&{filter:["all",on,j[8]]},I[2],I[3],M&64&&{paint:{"fill-color":j[6],"fill-opacity":ne(.2,.5)}},M&4&&{layout:{visibility:j[2]?"visible":"none"}},I[6]]):{};M&2106&&(W.$$scope={dirty:M,ctx:j}),f.$set(W);const ue=M&325?x(N,[M&1&&re(q(`${j[0]}-interventions-polygons-outlines`)),M&256&&{filter:["all",on,j[8]]},M&64&&{paint:{"line-color":j[6],"line-opacity":.5,"line-width":.7*tn}},M&4&&{layout:{visibility:j[2]?"visible":"none"}}]):{};a.$set(ue)},i(j){u||(m(e.$$.fragment,j),m(t.$$.fragment,j),m(r.$$.fragment,j),m(f.$$.fragment,j),m(a.$$.fragment,j),u=!0)},o(j){_(e.$$.fragment,j),_(t.$$.fragment,j),_(r.$$.fragment,j),_(f.$$.fragment,j),_(a.$$.fragment,j),u=!1},d(j){j&&(d(l),d(n),d(s),d(i)),v(e,j),v(t,j),v(r,j),v(f,j),v(a,j)}}}function Bm(o){let e,l;return e=new ct({props:{data:o[7],$$slots:{default:[zm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Um(o,e,l){let t,{name:n}=e,{description:r}=e,{show:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],p=["!=",["get","endpoint"],!0];return o.$$set=h=>{"name"in h&&l(0,n=h.name),"description"in h&&l(1,r=h.description),"show"in h&&l(2,s=h.show),"schemesGj"in h&&l(3,f=h.schemesGj),"filterSchemeText"in h&&l(4,i=h.filterSchemeText),"filterInterventionText"in h&&l(5,a=h.filterInterventionText),"color"in h&&l(6,u=h.color)},o.$$.update=()=>{o.$$.dirty&8&&l(7,t=po(f))},[n,r,s,f,i,a,u,t,c,p]}class dn extends K{constructor(e){super(),Z(this,e,Um,Bm,Q,{name:0,description:1,show:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function Em(o){let e;function l(r,s){return r[2]<=100?Jm:Ym}let t=l(o),n=t(o);return{c(){n.c(),e=he()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:J,o:J,d(r){r&&d(e),n.d(r)}}}function Wm(o){let e,l;return e=new We({props:{$$slots:{default:[Qm]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ym(o){let e;return{c(){e=y("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){g(l,e,t)},p:J,d(l){l&&d(e)}}}function Jm(o){let e,l,t;return{c(){e=y("label"),l=S(`Downloading scheme data
      `),t=y("progress"),t.value=o[2],G(t,"class","svelte-q3473n")},m(n,r){g(n,e,r),$(e,l),$(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&d(e)}}}function Qm(o){let e;return{c(){e=S("Load latest scheme data")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Vm(o){let e,l,t,n;const r=[Wm,Em],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(l=s[e]=r[e](o)),{c(){l&&l.c(),t=he()},m(i,a){~e&&s[e].m(i,a),g(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(l&&(ve(),_(s[u],1,1,()=>{s[u]=null}),ke()),~e?(l=s[e],l?l.p(i,a):(l=s[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){_(l),n=!1},d(i){i&&d(t),~e&&s[e].d(i)}}}function Km(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await ro(`${en()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,s=c)});l(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}qr(async()=>{n&&await f()});async function i(){l(0,n=!0),await f();let a=new URL(window.location.href);a.searchParams.delete("disable_schemes"),Nn(a)}return o.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,s,i,t]}class Zm extends K{constructor(e){super(),Z(this,e,Km,Vm,Q,{loadFile:4})}}const an=Re({type:"FeatureCollection",features:[],schemes:{}}),kr=Re(""),yr=Re(""),hn=Re({type:"FeatureCollection",features:[],schemes:{}}),Sr=Re(""),Tr=Re(""),wn=Re({type:"FeatureCollection",features:[],schemes:{}}),Cr=Re(""),Lr=Re("");function Ir(o,e,l){const t=o.slice();return t[42]=e[l],t}function Or(o,e,l){const t=o.slice();return t[42]=e[l],t}function Mr(o,e,l){const t=o.slice();return t[42]=e[l],t}function Xm(o){let e,l;return e=new Zm({props:{loadFile:o[24]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:J,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function jr(o){let e,l,t;function n(s){o[31](s)}let r={name:Vr,title:Kr,$$slots:{controls:[e_],help:[xm]},$$scope:{ctx:o}};return o[12]!==void 0&&(r.show=o[12]),e=new fe({props:r}),z.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&57473|f[1]&262144&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&4096&&(l=!0,i.show=s[12],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Nr(o){let e,l,t=o[42]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){g(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&8192&&t!==(t=r[42]+"")&&A(n,t)},d(r){r&&d(e)}}}function xm(o){let e,l,t,n,r,s,f;t=new On({props:{text:"Scheme data caveats"}});let i=ge(o[13].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Nr(Mr(o,i,u));return{c(){e=y("span"),l=y("p"),w(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),b(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&8192){i=ge(u[13].notes??[]);let p;for(p=0;p<i.length;p+=1){const h=Mr(u,i,p);a[p]?a[p].p(h,c):(a[p]=Nr(h),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),He(a,u)}}}function e_(o){let e,l,t,n,r,s,f,i,a,u,c;function p(O){o[27](O)}function h(O){o[28](O)}function k(O){o[29](O)}let C={source:"ATF"};o[13]!==void 0&&(C.schemesGj=o[13]),o[14]!==void 0&&(C.filterSchemeText=o[14]),o[15]!==void 0&&(C.filterInterventionText=o[15]),l=new Fn({props:C}),z.push(()=>B(l,"schemesGj",p)),z.push(()=>B(l,"filterSchemeText",h)),z.push(()=>B(l,"filterInterventionText",k));function T(O){o[30](O)}let I={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(I.value=o[0]),f=new Xt({props:I}),z.push(()=>B(f,"value",T)),u=new Yt({props:{rows:o[7]}}),{c(){e=y("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(O,N){g(O,e,N),b(l,e,null),$(e,s),b(f,e,null),$(e,a),b(u,e,null),c=!0},p(O,N){const R={};!t&&N[0]&8192&&(t=!0,R.schemesGj=O[13],U(()=>t=!1)),!n&&N[0]&16384&&(n=!0,R.filterSchemeText=O[14],U(()=>n=!1)),!r&&N[0]&32768&&(r=!0,R.filterInterventionText=O[15],U(()=>r=!1)),l.$set(R);const j={};!i&&N[0]&1&&(i=!0,j.value=O[0],U(()=>i=!1)),f.$set(j);const M={};N[0]&128&&(M.rows=O[7]),u.$set(M)},i(O){c||(m(l.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),c=!0)},o(O){_(l.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),c=!1},d(O){O&&d(e),v(l),v(f),v(u)}}}function Rr(o){let e,l,t;function n(s){o[36](s)}let r={name:Zr,title:Xr,$$slots:{controls:[n_],help:[t_]},$$scope:{ctx:o}};return o[11]!==void 0&&(r.show=o[11]),e=new fe({props:r}),z.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&458786|f[1]&262144&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&2048&&(l=!0,i.show=s[11],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Fr(o){let e,l,t=o[42]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){g(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&65536&&t!==(t=r[42]+"")&&A(n,t)},d(r){r&&d(e)}}}function t_(o){let e,l,t,n,r,s,f;t=new On({props:{text:"Scheme data caveats"}});let i=ge(o[16].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Fr(Or(o,i,u));return{c(){e=y("span"),l=y("p"),w(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),b(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&65536){i=ge(u[16].notes??[]);let p;for(p=0;p<i.length;p+=1){const h=Or(u,i,p);a[p]?a[p].p(h,c):(a[p]=Fr(h),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),He(a,u)}}}function n_(o){let e,l,t,n,r,s,f,i,a,u,c;function p(O){o[32](O)}function h(O){o[33](O)}function k(O){o[34](O)}let C={source:"LCWIP"};o[16]!==void 0&&(C.schemesGj=o[16]),o[17]!==void 0&&(C.filterSchemeText=o[17]),o[18]!==void 0&&(C.filterInterventionText=o[18]),l=new Fn({props:C}),z.push(()=>B(l,"schemesGj",p)),z.push(()=>B(l,"filterSchemeText",h)),z.push(()=>B(l,"filterInterventionText",k));function T(O){o[35](O)}let I={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(I.value=o[1]),f=new Xt({props:I}),z.push(()=>B(f,"value",T)),u=new Yt({props:{rows:o[5]}}),{c(){e=y("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(O,N){g(O,e,N),b(l,e,null),$(e,s),b(f,e,null),$(e,a),b(u,e,null),c=!0},p(O,N){const R={};!t&&N[0]&65536&&(t=!0,R.schemesGj=O[16],U(()=>t=!1)),!n&&N[0]&131072&&(n=!0,R.filterSchemeText=O[17],U(()=>n=!1)),!r&&N[0]&262144&&(r=!0,R.filterInterventionText=O[18],U(()=>r=!1)),l.$set(R);const j={};!i&&N[0]&2&&(i=!0,j.value=O[1],U(()=>i=!1)),f.$set(j);const M={};N[0]&32&&(M.rows=O[5]),u.$set(M)},i(O){c||(m(l.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),c=!0)},o(O){_(l.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),c=!1},d(O){O&&d(e),v(l),v(f),v(u)}}}function l_(o){let e=Object.entries(o[13].schemes).length>0,l,t=Object.entries(o[16].schemes).length>0,n,r,s=e&&jr(o),f=t&&Rr(o);return{c(){s&&s.c(),l=L(),f&&f.c(),n=he()},m(i,a){s&&s.m(i,a),g(i,l,a),f&&f.m(i,a),g(i,n,a),r=!0},p(i,a){a[0]&8192&&(e=Object.entries(i[13].schemes).length>0),e?s?(s.p(i,a),a[0]&8192&&m(s,1)):(s=jr(i),s.c(),m(s,1),s.m(l.parentNode,l)):s&&(ve(),_(s,1,1,()=>{s=null}),ke()),a[0]&65536&&(t=Object.entries(i[16].schemes).length>0),t?f?(f.p(i,a),a[0]&65536&&m(f,1)):(f=Rr(i),f.c(),m(f,1),f.m(n.parentNode,n)):f&&(ve(),_(f,1,1,()=>{f=null}),ke())},i(i){r||(m(s),m(f),r=!0)},o(i){_(s),_(f),r=!1},d(i){i&&(d(l),d(n)),s&&s.d(i),f&&f.d(i)}}}function r_(o){let e;return{c(){e=S("Show your sketches")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Pr(o){let e,l,t;function n(s){o[40](s)}let r={name:xr,title:eo,$$slots:{controls:[a_],help:[o_]},$$scope:{ctx:o}};return o[10]!==void 0&&(r.show=o[10]),e=new fe({props:r}),z.push(()=>B(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&1573384|f[1]&262144&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&1024&&(l=!0,i.show=s[10],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Dr(o){let e,l,t=o[42]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){g(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&512&&t!==(t=r[42]+"")&&A(n,t)},d(r){r&&d(e)}}}function o_(o){let e,l,t,n,r,s,f;t=new On({props:{text:"Scheme data caveats"}});let i=ge(o[9].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Dr(Ir(o,i,u));return{c(){e=y("span"),l=y("p"),w(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),b(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&512){i=ge(u[9].notes??[]);let p;for(p=0;p<i.length;p+=1){const h=Ir(u,i,p);a[p]?a[p].p(h,c):(a[p]=Dr(h),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),He(a,u)}}}function s_(o){let e;return{c(){e=S("Download all schemes")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function i_(o){let e,l,t,n,r,s,f;function i(p){o[37](p)}function a(p){o[38](p)}function u(p){o[39](p)}let c={source:"Local"};return o[9]!==void 0&&(c.schemesGj=o[9]),o[19]!==void 0&&(c.filterSchemeText=o[19]),o[20]!==void 0&&(c.filterInterventionText=o[20]),e=new Fn({props:c}),z.push(()=>B(e,"schemesGj",i)),z.push(()=>B(e,"filterSchemeText",a)),z.push(()=>B(e,"filterInterventionText",u)),s=new We({props:{$$slots:{default:[s_]},$$scope:{ctx:o}}}),s.$on("click",o[26]),{c(){w(e.$$.fragment),r=L(),w(s.$$.fragment)},m(p,h){b(e,p,h),g(p,r,h),b(s,p,h),f=!0},p(p,h){const k={};!l&&h[0]&512&&(l=!0,k.schemesGj=p[9],U(()=>l=!1)),!t&&h[0]&524288&&(t=!0,k.filterSchemeText=p[19],U(()=>t=!1)),!n&&h[0]&1048576&&(n=!0,k.filterInterventionText=p[20],U(()=>n=!1)),e.$set(k);const C={};h[1]&262144&&(C.$$scope={dirty:h,ctx:p}),s.$set(C)},i(p){f||(m(e.$$.fragment,p),m(s.$$.fragment,p),f=!0)},o(p){_(e.$$.fragment,p),_(s.$$.fragment,p),f=!1},d(p){p&&d(r),v(e,p),v(s,p)}}}function a_(o){let e,l,t,n,r;return l=new Mo({props:{$$slots:{default:[i_]},$$scope:{ctx:o}}}),n=new Yt({props:{rows:o[3]}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),G(e,"slot","controls"),se(e,"border","1px solid black"),se(e,"padding","8px")},m(s,f){g(s,e,f),b(l,e,null),$(e,t),b(n,e,null),r=!0},p(s,f){const i={};f[0]&1573376|f[1]&262144&&(i.$$scope={dirty:f,ctx:s}),l.$set(i);const a={};f[0]&8&&(a.rows=s[3]),n.$set(a)},i(s){r||(m(l.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(l),v(n)}}}function f_(o){let e=Object.entries(o[9].schemes).length>0,l,t,n=e&&Pr(o);return{c(){n&&n.c(),l=he()},m(r,s){n&&n.m(r,s),g(r,l,s),t=!0},p(r,s){s[0]&512&&(e=Object.entries(r[9].schemes).length>0),e?n?(n.p(r,s),s[0]&512&&m(n,1)):(n=Pr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n&&(ve(),_(n,1,1,()=>{n=null}),ke())},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n&&n.d(r)}}}function u_(o){let e=Hr()=="Private (development)",l,t,n,r,s,f,i,a,u,c,p,h,k,C=e&&Xm(o);return t=new Ne({props:{small:!0,$$slots:{default:[l_]},$$scope:{ctx:o}}}),r=new Ur({props:{label:"Load schemes from GeoJSON",onLoad:o[24]}}),f=new Oo({props:{errorMessage:o[2]}}),c=new We({props:{$$slots:{default:[r_]},$$scope:{ctx:o}}}),c.$on("click",o[25]),h=new Ne({props:{small:!0,$$slots:{default:[f_]},$$scope:{ctx:o}}}),{c(){C&&C.c(),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),a=y("hr"),u=L(),w(c.$$.fragment),p=L(),w(h.$$.fragment)},m(T,I){C&&C.m(T,I),g(T,l,I),b(t,T,I),g(T,n,I),b(r,T,I),g(T,s,I),b(f,T,I),g(T,i,I),g(T,a,I),g(T,u,I),b(c,T,I),g(T,p,I),b(h,T,I),k=!0},p(T,I){e&&C.p(T,I);const O={};I[0]&522403|I[1]&262144&&(O.$$scope={dirty:I,ctx:T}),t.$set(O);const N={};I[0]&4&&(N.errorMessage=T[2]),f.$set(N);const R={};I[1]&262144&&(R.$$scope={dirty:I,ctx:T}),c.$set(R);const j={};I[0]&1574408|I[1]&262144&&(j.$$scope={dirty:I,ctx:T}),h.$set(j)},i(T){k||(m(C),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(c.$$.fragment,T),m(h.$$.fragment,T),k=!0)},o(T){_(C),_(t.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),_(c.$$.fragment,T),_(h.$$.fragment,T),k=!1},d(T){T&&(d(l),d(n),d(s),d(i),d(a),d(u),d(p)),C&&C.d(T),v(t,T),v(r,T),v(f,T),v(c,T),v(h,T)}}}function c_(o){let e,l,t,n,r,s,f,i;return e=new lt({props:{label:"Schemes",open:!0,$$slots:{default:[u_]},$$scope:{ctx:o}}}),t=new dn({props:{name:"atf",description:Kr,show:o[12],schemesGj:o[13],filterSchemeText:o[14],filterInterventionText:o[15],color:o[8]}}),r=new dn({props:{name:"lcwip",description:Xr,show:o[11],schemesGj:o[16],filterSchemeText:o[17],filterInterventionText:o[18],color:o[6]}}),f=new dn({props:{name:"local",description:eo,show:o[10],schemesGj:o[9],filterSchemeText:o[19],filterInterventionText:o[20],color:o[4]}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),g(a,n,u),b(r,a,u),g(a,s,u),b(f,a,u),i=!0},p(a,u){const c={};u[0]&2096815|u[1]&262144&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p={};u[0]&4096&&(p.show=a[12]),u[0]&8192&&(p.schemesGj=a[13]),u[0]&16384&&(p.filterSchemeText=a[14]),u[0]&32768&&(p.filterInterventionText=a[15]),u[0]&256&&(p.color=a[8]),t.$set(p);const h={};u[0]&2048&&(h.show=a[11]),u[0]&65536&&(h.schemesGj=a[16]),u[0]&131072&&(h.filterSchemeText=a[17]),u[0]&262144&&(h.filterInterventionText=a[18]),u[0]&64&&(h.color=a[6]),r.$set(h);const k={};u[0]&1024&&(k.show=a[10]),u[0]&512&&(k.schemesGj=a[9]),u[0]&524288&&(k.filterSchemeText=a[19]),u[0]&1048576&&(k.filterInterventionText=a[20]),u[0]&16&&(k.color=a[4]),f.$set(k)},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(d(l),d(n),d(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}let Vr="atf_schemes",Kr="ATF schemes",Zr="lcwip_schemes",Xr="LCWIP schemes",xr="local_schemes",eo="Your schemes";function $_(o,e,l){let t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,O,N,R;Y(o,wn,E=>l(9,a=E)),Y(o,an,E=>l(13,h=E)),Y(o,yr,E=>l(14,k=E)),Y(o,kr,E=>l(15,C=E)),Y(o,hn,E=>l(16,T=E)),Y(o,Tr,E=>l(17,I=E)),Y(o,Sr,E=>l(18,O=E)),Y(o,Lr,E=>l(19,N=E)),Y(o,Cr,E=>l(20,R=E));let j="",M=$e(Vr);Y(o,M,E=>l(12,p=E));let H="fundingProgramme",P=$e(Zr);Y(o,P,E=>l(11,c=E));let F="interventionType",W=$e(xr);Y(o,W,E=>l(10,u=E));function ue(E,gt){try{xp(JSON.parse(gt),an,hn),Vt(M,p=!0,p),Vt(P,c=!0,c),l(2,j="")}catch(Be){l(2,j=`The file you loaded is broken: ${Be}`)}}function D(){Vt(wn,a=tm(),a),Vt(W,u=!0,u)}function ee(E){return E=="interventionType"?[Zp(),Xp()]:E=="fundingProgramme"?[Ie(["get","funding_programme"],xt,"grey"),Object.entries(xt)]:E=="currentMilestone"?[Ie(["get","current_milestone"],Ln,"grey"),Object.entries(Ln)]:["red",[]]}function X(){Po("all_your_schemes.geojson",JSON.stringify(a,null,"  "))}function ce(E){h=E,an.set(h)}function Le(E){k=E,yr.set(k)}function le(E){C=E,kr.set(C)}function Oe(E){H=E,l(0,H)}function tt(E){p=E,M.set(p)}function $t(E){T=E,hn.set(T)}function pt(E){I=E,Tr.set(I)}function ot(E){O=E,Sr.set(O)}function Ye(E){F=E,l(1,F)}function st(E){c=E,P.set(c)}function mt(E){a=E,wn.set(a)}function _t(E){N=E,Lr.set(N)}function de(E){R=E,Cr.set(R)}function je(E){u=E,W.set(u)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(8,[t,n]=ee(H),t,(l(7,n),l(0,H))),o.$$.dirty[0]&2&&l(6,[r,s]=ee(F),r,(l(5,s),l(1,F)))},l(4,[f,i]=ee("interventionType"),f,l(3,i)),[H,F,j,i,f,s,r,n,t,a,u,c,p,h,k,C,T,I,O,N,R,M,P,W,ue,D,X,ce,Le,le,Oe,tt,$t,pt,ot,Ye,st,mt,_t,de,je]}class p_ extends K{constructor(e){super(),Z(this,e,$_,c_,Q,{},null,[-1,-1])}}function m_(o){let e,l,t,n,r,s,f,i;return e=new b$({}),t=new M$({}),r=new ap({}),f=new Z$({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),g(a,n,u),b(r,a,u),g(a,s,u),b(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(d(l),d(n),d(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function __(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[m_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function g_(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T;return e=new mf({}),t=new kf({}),r=new Xf({}),f=new Bf({}),a=new wc({}),c=new s$({}),h=new Vc({}),C=new Hu({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment),u=L(),w(c.$$.fragment),p=L(),w(h.$$.fragment),k=L(),w(C.$$.fragment)},m(I,O){b(e,I,O),g(I,l,O),b(t,I,O),g(I,n,O),b(r,I,O),g(I,s,O),b(f,I,O),g(I,i,O),b(a,I,O),g(I,u,O),b(c,I,O),g(I,p,O),b(h,I,O),g(I,k,O),b(C,I,O),T=!0},i(I){T||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(r.$$.fragment,I),m(f.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(h.$$.fragment,I),m(C.$$.fragment,I),T=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(r.$$.fragment,I),_(f.$$.fragment,I),_(a.$$.fragment,I),_(c.$$.fragment,I),_(h.$$.fragment,I),_(C.$$.fragment,I),T=!1},d(I){I&&(d(l),d(n),d(s),d(i),d(u),d(p),d(k)),v(e,I),v(t,I),v(r,I),v(f,I),v(a,I),v(c,I),v(h,I),v(C,I)}}}function d_(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[g_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function h_(o){let e,l,t,n,r,s;return e=new xa({}),t=new Lc({}),r=new Gc({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){b(e,f,i),g(f,l,i),b(t,f,i),g(f,n,i),b(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n)),v(e,f),v(t,f),v(r,f)}}}function w_(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[h_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function b_(o){let e,l,t,n,r,s,f,i,a,u;return e=new aa({}),t=new qa({}),r=new ii({}),f=new Oi({}),a=new Ui({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,p){b(e,c,p),g(c,l,p),b(t,c,p),g(c,n,p),b(r,c,p),g(c,s,p),b(f,c,p),g(c,i,p),b(a,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(d(l),d(n),d(s),d(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function v_(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[b_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function k_(o){let e,l,t,n,r,s;return e=new Ks({}),t=new hi({}),r=new Ia({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){b(e,f,i),g(f,l,i),b(t,f,i),g(f,n,i),b(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n)),v(e,f),v(t,f),v(r,f)}}}function y_(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[k_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function S_(o){let e,l,t,n,r,s,f,i,a,u;return e=new Zi({}),t=new fc({}),r=new cu({}),f=new xu({}),a=new H$({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,p){b(e,c,p),g(c,l,p),b(t,c,p),g(c,n,p),b(r,c,p),g(c,s,p),b(f,c,p),g(c,i,p),b(a,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(d(l),d(n),d(s),d(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function T_(o){let e,l,t,n,r,s,f,i,a=Hr()=="Private (development)",u,c,p,h,k;e=new Kp({}),t=new Cp({}),r=new Lu({}),f=new Nf({});let C=a&&S_();return c=new ha({}),h=new Ap({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),C&&C.c(),u=L(),w(c.$$.fragment),p=L(),w(h.$$.fragment)},m(T,I){b(e,T,I),g(T,l,I),b(t,T,I),g(T,n,I),b(r,T,I),g(T,s,I),b(f,T,I),g(T,i,I),C&&C.m(T,I),g(T,u,I),b(c,T,I),g(T,p,I),b(h,T,I),k=!0},p:J,i(T){k||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(C),m(c.$$.fragment,T),m(h.$$.fragment,T),k=!0)},o(T){_(e.$$.fragment,T),_(t.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),_(C),_(c.$$.fragment,T),_(h.$$.fragment,T),k=!1},d(T){T&&(d(l),d(n),d(s),d(i),d(u),d(p)),v(e,T),v(t,T),v(r,T),v(f,T),C&&C.d(T),v(c,T),v(h,T)}}}function C_(o){let e,l;return e=new Ne({props:{small:!0,$$slots:{default:[T_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function L_(o){let e,l,t,n,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new _o({props:f}),z.push(()=>B(e,"enabled",s)),n=new ss({}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],U(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}function I_(o){let e,l;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=V(n,t[r]);return e=new Me({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&2?x(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function O_(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,O,N,R,j;return l=new p_({}),n=new lt({props:{label:"Trip generators",$$slots:{default:[__]},$$scope:{ctx:o}}}),s=new lt({props:{label:"Existing infrastructure",$$slots:{default:[d_]},$$scope:{ctx:o}}}),i=new lt({props:{label:"Public transport",$$slots:{default:[w_]},$$scope:{ctx:o}}}),u=new lt({props:{label:"Boundaries",$$slots:{default:[v_]},$$scope:{ctx:o}}}),p=new lt({props:{label:"Census",$$slots:{default:[y_]},$$scope:{ctx:o}}}),k=new lt({props:{label:"Other",$$slots:{default:[C_]},$$scope:{ctx:o}}}),T=new lt({props:{label:"Tools",$$slots:{default:[L_]},$$scope:{ctx:o}}}),O=new mo({props:{disabled:!o[1]}}),R=new ct({props:{data:o[4],$$slots:{default:[I_]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment),f=L(),w(i.$$.fragment),a=L(),w(u.$$.fragment),c=L(),w(p.$$.fragment),h=L(),w(k.$$.fragment),C=L(),w(T.$$.fragment),I=L(),w(O.$$.fragment),N=L(),w(R.$$.fragment)},m(M,H){g(M,e,H),b(l,e,null),$(e,t),b(n,e,null),$(e,r),b(s,e,null),$(e,f),b(i,e,null),$(e,a),b(u,e,null),$(e,c),b(p,e,null),$(e,h),b(k,e,null),$(e,C),b(T,e,null),$(e,I),b(O,e,null),o[7](e),g(M,N,H),b(R,M,H),j=!0},p(M,[H]){const P={};H&512&&(P.$$scope={dirty:H,ctx:M}),n.$set(P);const F={};H&512&&(F.$$scope={dirty:H,ctx:M}),s.$set(F);const W={};H&512&&(W.$$scope={dirty:H,ctx:M}),i.$set(W);const ue={};H&512&&(ue.$$scope={dirty:H,ctx:M}),u.$set(ue);const D={};H&512&&(D.$$scope={dirty:H,ctx:M}),p.$set(D);const ee={};H&512&&(ee.$$scope={dirty:H,ctx:M}),k.$set(ee);const X={};H&521&&(X.$$scope={dirty:H,ctx:M}),T.$set(X);const ce={};H&2&&(ce.disabled=!M[1]),O.$set(ce);const Le={};H&514&&(Le.$$scope={dirty:H,ctx:M}),R.$set(Le)},i(M){j||(m(l.$$.fragment,M),m(n.$$.fragment,M),m(s.$$.fragment,M),m(i.$$.fragment,M),m(u.$$.fragment,M),m(p.$$.fragment,M),m(k.$$.fragment,M),m(T.$$.fragment,M),m(O.$$.fragment,M),m(R.$$.fragment,M),j=!0)},o(M){_(l.$$.fragment,M),_(n.$$.fragment,M),_(s.$$.fragment,M),_(i.$$.fragment,M),_(u.$$.fragment,M),_(p.$$.fragment,M),_(k.$$.fragment,M),_(T.$$.fragment,M),_(O.$$.fragment,M),_(R.$$.fragment,M),j=!1},d(M){M&&(d(e),d(N)),v(l),v(n),v(s),v(i),v(u),v(p),v(k),v(T),v(O),o[7](null),v(R,M)}}}const M_="browsepage-querystring";function j_(o,e,l){let t,n,r,s;Y(o,gl,p=>l(1,n=p)),Y(o,Tn,p=>l(2,r=p)),Y(o,pn,p=>l(3,s=p));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:p=>uo(p,oo(vn))};const a=new URLSearchParams(window.location.search);if(!a||a.size===1&&a.keys().next().value=="style"){let p=new URL(window.location.href);const h=window.localStorage.getItem(M_)||"",k=new URLSearchParams(h);for(const[C,T]of k)T==null?p.searchParams.delete(C):p.searchParams.set(C,T);window.history.replaceState(null,"",p.toString())}function u(p){t=p,l(0,t),l(1,n)}function c(p){z[p?"unshift":"push"](()=>{r=p,Tn.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&gl.set(!t)},[t,n,r,s,f,i,u,c]}class N_ extends K{constructor(e){super(),Z(this,e,j_,O_,Q,{})}}function R_(o){let e,l,t;return{c(){e=y("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=y("div")},m(n,r){g(n,e,r),g(n,l,r),g(n,t,r),o[3](t)},p:J,i:J,o:J,d(n){n&&(d(e),d(l),d(t)),o[3](null)}}}function F_(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function P_(o,e,l){let t,n;Y(o,Sn,f=>l(1,t=f)),Y(o,nn,f=>l(2,n=f));let r=null;function s(f){z[f?"unshift":"push"](()=>{r=f,l(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&F_(r,n,t)},[r,t,n,s]}class D_ extends K{constructor(e){super(),Z(this,e,P_,R_,Q,{})}}function G_(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C;return l=new jo({}),n=new so({}),f=new Lo({}),p=new cs({props:{boundaryGeojson:o[3]}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),s=y("div"),w(f.$$.fragment),i=L(),a=y("div"),u=y("h1"),u.textContent="Scheme Browser",c=L(),w(p.$$.fragment),h=L(),k=y("div"),se(s,"border-bottom","1px solid #b1b4b6"),se(a,"display","flex"),se(a,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(T,I){g(T,e,I),b(l,e,null),$(e,t),b(n,e,null),$(e,r),$(e,s),b(f,s,null),$(e,i),$(e,a),$(a,u),$(a,c),b(p,a,null),$(e,h),$(e,k),o[6](k),C=!0},p(T,I){const O={};I&8&&(O.boundaryGeojson=T[3]),p.$set(O)},i(T){C||(m(l.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),m(p.$$.fragment,T),C=!0)},o(T){_(l.$$.fragment,T),_(n.$$.fragment,T),_(f.$$.fragment,T),_(p.$$.fragment,T),C=!1},d(T){T&&d(e),v(l),v(n),v(f),v(p),o[6](null)}}}function Gr(o){let e,l;return e=new N_({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function A_(o){let e,l,t,n;e=new go({});let r=o[2]&&Gr();return{c(){w(e.$$.fragment),l=L(),r&&r.c(),t=he()},m(s,f){b(e,s,f),g(s,l,f),r&&r.m(s,f),g(s,t,f),n=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=Gr(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(ve(),_(r,1,1,()=>{r=null}),ke())},i(s){n||(m(e.$$.fragment,s),m(r),n=!0)},o(s){_(e.$$.fragment,s),_(r),n=!1},d(s){s&&(d(l),d(t)),v(e,s),r&&r.d(s)}}}function q_(o){let e,l,t;return l=new Io({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[A_]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","main")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&2&&(s.style=n[1]),r&260&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function H_(o){let e,l,t,n,r;return e=new Uo({props:{$$slots:{main:[q_],sidebar:[G_]},$$scope:{ctx:o}}}),n=new D_({}),{c(){w(e.$$.fragment),l=L(),t=y("div"),w(n.$$.fragment),G(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){b(e,s,f),g(s,l,f),g(s,t,f),b(n,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(e.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&(d(l),d(t)),v(e,s),v(n)}}}function z_(o,e,l){let t,n,r,s,f;Y(o,Tn,c=>l(4,t=c)),Y(o,pn,c=>l(5,n=c)),Y(o,vn,c=>l(1,r=c)),Y(o,Kn,c=>l(2,s=c)),Y(o,an,c=>l(3,f=c)),qr(()=>{io()});const i=new URLSearchParams(window.location.search);vn.set(i.get("style")||"dataviz");let a;function u(c){z[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&Kn.set(n),o.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,n,u]}class B_ extends K{constructor(e){super(),Z(this,e,z_,H_,Q,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new B_({target:document.getElementById("app")});
