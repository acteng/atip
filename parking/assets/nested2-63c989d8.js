import{S as R,i as G,s as H,b as Z,c as q,I as X,g as d,f as A,m as w,j as p,o as K,t as g,l as _,p as m,q as k,_ as W,C as Y,aW as ve,a7 as ye,G as ge,u as b,x as ne,e as M,h as j,aV as z,k as S,V as Ue,X as he,W as Ye,U as ie,y as ke,n as be,a1 as Ae,a0 as nt,a8 as Mt,az as nn,a2 as xe,r as rt,F as rn,a as He,v as pt,w as sn,H as Ut,L as Pt,M as Bt,N as xt,D as Et,aX as mt,ag as zt,d as on,z as ln,A as an,a9 as cn,aP as fn,E as un,ad as $n}from"./data_getter-0b575e1d.js";import{d as te,j as $e,H as re,S as Qe,h as pn,i as ht,g as It,C as Oe,a as mn,L as hn,Z as gn,M as _n,I as dn,B as wn,b as st}from"./schemas-10c292d4.js";const V={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"};function kn(s){let e,n,t;return e=new $e({props:{color:V.bus_route_with_lane}}),{c(){d(e.$$.fragment),n=b(`
  Bus routes`)},m(r,o){w(e,r,o),p(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&m(n),k(e,r)}}}function bn(s){let e;return{c(){e=b(`GTFS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function vn(s){let e;return{c(){e=b("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function yn(s){let e,n,t,r,o,i,u,l,f,a,c;return o=new z({props:{href:"https://gtfs.org",$$slots:{default:[bn]},$$scope:{ctx:s}}}),a=new z({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[vn]},$$scope:{ctx:s}}}),{c(){e=M("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=A(),t=M("p"),r=b("Note this data is from OpenStreetMap, not "),d(o.$$.fragment),i=b(`, and doesn't include which routes are run or the
        frequency of service.`),u=A(),l=M("p"),f=b("License: "),d(a.$$.fragment)},m($,h){p($,e,h),p($,n,h),p($,t,h),S(t,r),w(o,t,null),S(t,i),p($,u,h),p($,l,h),S(l,f),w(a,l,null),c=!0},p($,h){const v={};h&8&&(v.$$scope={dirty:h,ctx:$}),o.$set(v);const y={};h&8&&(y.$$scope={dirty:h,ctx:$}),a.$set(y)},i($){c||(g(o.$$.fragment,$),g(a.$$.fragment,$),c=!0)},o($){_(o.$$.fragment,$),_(a.$$.fragment,$),c=!1},d($){$&&(m(e),m(n),m(t),m(u),m(l)),k(o),k(a)}}}function Ln(s){let e,n,t;return n=new re({props:{$$slots:{default:[yn]},$$scope:{ctx:s}}}),{c(){e=M("span"),d(n.$$.fragment),j(e,"slot","right")},m(r,o){p(r,e,o),w(n,e,null),t=!0},p(r,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&m(e),k(n)}}}function Cn(s){let e,n,t,r,o;function i(l){s[1](l)}let u={id:Se,$$slots:{right:[Ln],default:[kn]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new te({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:Se,tooltip:Sn,show:s[0],clickable:!1}}),{c(){d(e.$$.fragment),t=A(),d(r.$$.fragment)},m(l,f){w(e,l,f),p(l,t,f),w(r,l,f),o=!0},p(l,[f]){const a={};f&8&&(a.$$scope={dirty:f,ctx:l}),!n&&f&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const c={};f&1&&(c.show=l[0]),r.$set(c)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&m(t),k(e,l),k(r,l)}}}let Se="bus_routes";function Sn(s){return s.properties.has_bus_lane?"<p>At least one bus route crosses here, with a bus lane in one or more directions</p>":"<p>At least one bus route crosses here, without any bus lanes</p>"}function Tn(s,e,n){let t;W(s,Y,i=>n(2,t=i)),ve(t,Se,`https://atip.uk/layers/v1/${Se}.pmtiles`),ye(t,{id:Se,source:Se,sourceLayer:Se,color:["case",["boolean",["get","has_bus_lane"],!1],V.bus_route_with_lane,V.bus_route_without_lane],width:5,opacity:ge(.5,1)});let r=!1;function o(i){r=i,n(0,r)}return[r,o]}class Dn extends R{constructor(e){super(),G(this,e,Tn,Cn,H,{})}}function gt(s,e,n){const t=s.slice();return t[2]=e[n],t}function _t(s,e,n){const t=s.slice();return t[5]=e[n],t}function dt(s){let e,n;return{c(){e=M("span"),n=b(` 
    `),he(e,"background",s[5]),he(e,"width","100%"),he(e,"border","1px solid black")},m(t,r){p(t,e,r),S(e,n)},p(t,r){r&1&&he(e,"background",t[5])},d(t){t&&m(e)}}}function wt(s){let e,n=s[2].toLocaleString()+"",t;return{c(){e=M("span"),t=b(n)},m(r,o){p(r,e,o),S(e,t)},p(r,o){o&2&&n!==(n=r[2].toLocaleString()+"")&&ie(t,n)},d(r){r&&m(e)}}}function On(s){let e,n,t,r=Ue(s[0]),o=[];for(let l=0;l<r.length;l+=1)o[l]=dt(_t(s,r,l));let i=Ue(s[1]),u=[];for(let l=0;l<i.length;l+=1)u[l]=wt(gt(s,i,l));return{c(){e=M("div");for(let l=0;l<o.length;l+=1)o[l].c();n=A(),t=M("div");for(let l=0;l<u.length;l+=1)u[l].c();he(e,"display","flex"),he(t,"display","flex"),he(t,"justify-content","space-between")},m(l,f){p(l,e,f);for(let a=0;a<o.length;a+=1)o[a]&&o[a].m(e,null);p(l,n,f),p(l,t,f);for(let a=0;a<u.length;a+=1)u[a]&&u[a].m(t,null)},p(l,[f]){if(f&1){r=Ue(l[0]);let a;for(a=0;a<r.length;a+=1){const c=_t(l,r,a);o[a]?o[a].p(c,f):(o[a]=dt(c),o[a].c(),o[a].m(e,null))}for(;a<o.length;a+=1)o[a].d(1);o.length=r.length}if(f&2){i=Ue(l[1]);let a;for(a=0;a<i.length;a+=1){const c=gt(l,i,a);u[a]?u[a].p(c,f):(u[a]=wt(c),u[a].c(),u[a].m(t,null))}for(;a<u.length;a+=1)u[a].d(1);u.length=i.length}},i:ne,o:ne,d(l){l&&(m(e),m(n),m(t)),Ye(o,l),Ye(u,l)}}}function An(s,e,n){let{colorScale:t}=e,{limits:r}=e;return s.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class ot extends R{constructor(e){super(),G(this,e,An,On,H,{colorScale:0,limits:1})}}function Nn(s){let e;return{c(){e=b("Percent of households with a car")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Mn(s){let e;return{c(){e=b(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Un(s){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pn(s){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Bn(s){let e,n,t,r,o,i,u,l,f,a,c,$;return t=new z({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Mn]},$$scope:{ctx:s}}}),o=new z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Un]},$$scope:{ctx:s}}}),a=new z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Pn]},$$scope:{ctx:s}}}),{c(){e=M("p"),n=b("Car/van availability data is from the 2021 census, via "),d(t.$$.fragment),r=b(". Output area boundaries from "),d(o.$$.fragment),i=b("."),u=A(),l=M("p"),f=b("License: "),d(a.$$.fragment),c=b(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(h,v){p(h,e,v),S(e,n),w(t,e,null),S(e,r),w(o,e,null),S(e,i),p(h,u,v),p(h,l,v),S(l,f),w(a,l,null),S(l,c),$=!0},p(h,v){const y={};v&131072&&(y.$$scope={dirty:v,ctx:h}),t.$set(y);const C={};v&131072&&(C.$$scope={dirty:v,ctx:h}),o.$set(C);const L={};v&131072&&(L.$$scope={dirty:v,ctx:h}),a.$set(L)},i(h){$||(g(t.$$.fragment,h),g(o.$$.fragment,h),g(a.$$.fragment,h),$=!0)},o(h){_(t.$$.fragment,h),_(o.$$.fragment,h),_(a.$$.fragment,h),$=!1},d(h){h&&(m(e),m(u),m(l)),k(t),k(o),k(a)}}}function xn(s){let e,n,t;return n=new re({props:{$$slots:{default:[Bn]},$$scope:{ctx:s}}}),{c(){e=M("span"),d(n.$$.fragment),j(e,"slot","right")},m(r,o){p(r,e,o),w(n,e,null),t=!0},p(r,o){const i={};o&131072&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&m(e),k(n)}}}function kt(s){let e,n;return e=new ot({props:{colorScale:s[4],limits:s[7]()}}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function En(s){let e;return{c(){e=b("Average cars per household")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function zn(s){let e;return{c(){e=b(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function In(s){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Fn(s){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function jn(s){let e,n,t,r,o,i,u,l,f,a,c,$,h,v;return o=new z({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[zn]},$$scope:{ctx:s}}}),u=new z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[In]},$$scope:{ctx:s}}}),$=new z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Fn]},$$scope:{ctx:s}}}),{c(){e=M("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=A(),t=M("p"),r=b("Car/van availability data is from the 2021 census, via "),d(o.$$.fragment),i=b(". Output area boundaries from "),d(u.$$.fragment),l=b("."),f=A(),a=M("p"),c=b("License: "),d($.$$.fragment),h=b(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(y,C){p(y,e,C),p(y,n,C),p(y,t,C),S(t,r),w(o,t,null),S(t,i),w(u,t,null),S(t,l),p(y,f,C),p(y,a,C),S(a,c),w($,a,null),S(a,h),v=!0},p(y,C){const L={};C&131072&&(L.$$scope={dirty:C,ctx:y}),o.$set(L);const T={};C&131072&&(T.$$scope={dirty:C,ctx:y}),u.$set(T);const U={};C&131072&&(U.$$scope={dirty:C,ctx:y}),$.$set(U)},i(y){v||(g(o.$$.fragment,y),g(u.$$.fragment,y),g($.$$.fragment,y),v=!0)},o(y){_(o.$$.fragment,y),_(u.$$.fragment,y),_($.$$.fragment,y),v=!1},d(y){y&&(m(e),m(n),m(t),m(f),m(a)),k(o),k(u),k($)}}}function Rn(s){let e,n,t;return n=new re({props:{$$slots:{default:[jn]},$$scope:{ctx:s}}}),{c(){e=M("span"),d(n.$$.fragment),j(e,"slot","right")},m(r,o){p(r,e,o),w(n,e,null),t=!0},p(r,o){const i={};o&131072&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&m(e),k(n)}}}function bt(s){let e,n;return e=new ot({props:{colorScale:s[4],limits:s[7]()}}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p:ne,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Gn(s){let e;return{c(){e=b("Population density")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hn(s){let e;return{c(){e=b(`NOMIS TS006
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Vn(s){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Zn(s){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function qn(s){let e,n,t,r,o,i,u,l,f,a,c,$;return t=new z({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Hn]},$$scope:{ctx:s}}}),o=new z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Vn]},$$scope:{ctx:s}}}),a=new z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Zn]},$$scope:{ctx:s}}}),{c(){e=M("p"),n=b("Population density data is from the 2021 census, via "),d(t.$$.fragment),r=b(". Output area boundaries from "),d(o.$$.fragment),i=b("."),u=A(),l=M("p"),f=b("License: "),d(a.$$.fragment),c=b(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(h,v){p(h,e,v),S(e,n),w(t,e,null),S(e,r),w(o,e,null),S(e,i),p(h,u,v),p(h,l,v),S(l,f),w(a,l,null),S(l,c),$=!0},p(h,v){const y={};v&131072&&(y.$$scope={dirty:v,ctx:h}),t.$set(y);const C={};v&131072&&(C.$$scope={dirty:v,ctx:h}),o.$set(C);const L={};v&131072&&(L.$$scope={dirty:v,ctx:h}),a.$set(L)},i(h){$||(g(t.$$.fragment,h),g(o.$$.fragment,h),g(a.$$.fragment,h),$=!0)},o(h){_(t.$$.fragment,h),_(o.$$.fragment,h),_(a.$$.fragment,h),$=!1},d(h){h&&(m(e),m(u),m(l)),k(t),k(o),k(a)}}}function Kn(s){let e,n,t;return n=new re({props:{$$slots:{default:[qn]},$$scope:{ctx:s}}}),{c(){e=M("span"),d(n.$$.fragment),j(e,"slot","right")},m(r,o){p(r,e,o),w(n,e,null),t=!0},p(r,o){const i={};o&131072&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&m(e),k(n)}}}function vt(s){let e,n,t,r;return t=new ot({props:{colorScale:s[4],limits:s[7]()}}),{c(){e=M("p"),e.textContent="(people per square kilometres)",n=A(),d(t.$$.fragment)},m(o,i){p(o,e,i),p(o,n,i),w(t,o,i),r=!0},p:ne,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(m(e),m(n)),k(t,o)}}}function Wn(s){let e,n,t,r,o,i,u,l,f,a,c,$,h,v;function y(D){s[9](D)}let C={id:"percent_households_with_car",$$slots:{right:[xn],default:[Nn]},$$scope:{ctx:s}};s[0]!==void 0&&(C.checked=s[0]),e=new te({props:C}),Z.push(()=>q(e,"checked",y)),e.$on("change",s[10]);let L=s[3]=="percent_households_with_car"&&kt(s);function T(D){s[11](D)}let U={id:"average_cars_per_household",$$slots:{right:[Rn],default:[En]},$$scope:{ctx:s}};s[1]!==void 0&&(U.checked=s[1]),o=new te({props:U}),Z.push(()=>q(o,"checked",T)),o.$on("change",s[12]);let O=s[3]=="average_cars_per_household"&&bt(s);function N(D){s[13](D)}let x={id:"population_density",$$slots:{right:[Kn],default:[Gn]},$$scope:{ctx:s}};s[2]!==void 0&&(x.checked=s[2]),f=new te({props:x}),Z.push(()=>q(f,"checked",N)),f.$on("change",s[14]);let B=s[3]=="population_density"&&vt(s);return h=new X({props:{layer:ae,tooltip:s[5],show:s[3]!="",clickable:!0}}),h.$on("click",s[6]),{c(){d(e.$$.fragment),t=A(),L&&L.c(),r=A(),d(o.$$.fragment),u=A(),O&&O.c(),l=A(),d(f.$$.fragment),c=A(),B&&B.c(),$=A(),d(h.$$.fragment)},m(D,E){w(e,D,E),p(D,t,E),L&&L.m(D,E),p(D,r,E),w(o,D,E),p(D,u,E),O&&O.m(D,E),p(D,l,E),w(f,D,E),p(D,c,E),B&&B.m(D,E),p(D,$,E),w(h,D,E),v=!0},p(D,[E]){const P={};E&131072&&(P.$$scope={dirty:E,ctx:D}),!n&&E&1&&(n=!0,P.checked=D[0],K(()=>n=!1)),e.$set(P),D[3]=="percent_households_with_car"?L?(L.p(D,E),E&8&&g(L,1)):(L=kt(D),L.c(),g(L,1),L.m(r.parentNode,r)):L&&(ke(),_(L,1,1,()=>{L=null}),be());const F={};E&131072&&(F.$$scope={dirty:E,ctx:D}),!i&&E&2&&(i=!0,F.checked=D[1],K(()=>i=!1)),o.$set(F),D[3]=="average_cars_per_household"?O?(O.p(D,E),E&8&&g(O,1)):(O=bt(D),O.c(),g(O,1),O.m(l.parentNode,l)):O&&(ke(),_(O,1,1,()=>{O=null}),be());const _e={};E&131072&&(_e.$$scope={dirty:E,ctx:D}),!a&&E&4&&(a=!0,_e.checked=D[2],K(()=>a=!1)),f.$set(_e),D[3]=="population_density"?B?(B.p(D,E),E&8&&g(B,1)):(B=vt(D),B.c(),g(B,1),B.m($.parentNode,$)):B&&(ke(),_(B,1,1,()=>{B=null}),be());const Le={};E&8&&(Le.show=D[3]!=""),h.$set(Le)},i(D){v||(g(e.$$.fragment,D),g(L),g(o.$$.fragment,D),g(O),g(f.$$.fragment,D),g(B),g(h.$$.fragment,D),v=!0)},o(D){_(e.$$.fragment,D),_(L),_(o.$$.fragment,D),_(O),_(f.$$.fragment,D),_(B),_(h.$$.fragment,D),v=!1},d(D){D&&(m(t),m(r),m(u),m(l),m(c),m($)),k(e,D),L&&L.d(D),k(o,D),O&&O.d(D),k(f,D),B&&B.d(D),k(h,D)}}}let ae="census_output_areas";function Jn(s,e,n){let t;W(s,Y,O=>n(8,t=O));let r=`${ae}-outline`,o=V.sequential_low_to_high,i=!1,u=!1,l=!1,f="";ve(t,ae,`https://atip.uk/layers/v1/${ae}.pmtiles`),Ae(t,{id:ae,source:ae,sourceLayer:ae,color:"black",opacity:ge(.5,.7)}),ye(t,{id:r,source:ae,sourceLayer:ae,color:"black",width:.5});function a(O){let N=O.properties.OA21CD,x=O.properties[f];return f=="percent_households_with_car"?`<p>${x}% of households in ${N} have 1 or more cars</p>`:f=="average_cars_per_household"?`<p>Households in ${N} have an average of ${x} cars</p>`:`<p>There are ${x.toLocaleString()} people per square kilometre in ${N}</p>`}function c(O){let N=O.detail.properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${N}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${N}`,"_blank")}function $(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function h(){let O=$(),N=["step",["get",f]];for(let x=1;x<O.length;x++)N.push(o[x-1]),N.push(O[x]);return N.push(o[o.length-1]),N}function v(O){i=O,n(0,i)}const y=()=>{n(1,u=!1),n(2,l=!1)};function C(O){u=O,n(1,u)}const L=()=>{n(0,i=!1),n(2,l=!1)};function T(O){l=O,n(2,l)}const U=()=>{n(0,i=!1),n(1,u=!1)};return s.$$.update=()=>{s.$$.dirty&271&&(i?n(3,f="percent_households_with_car"):u?n(3,f="average_cars_per_household"):l?n(3,f="population_density"):n(3,f=""),f?(t.setPaintProperty(ae,"fill-color",h()),t.setLayoutProperty(r,"visibility","visible")):t.setLayoutProperty(r,"visibility","none"))},[i,u,l,f,o,a,c,$,t,v,y,C,L,T,U]}class Xn extends R{constructor(e){super(),G(this,e,Jn,Wn,H,{})}}function Yn(s){let e,n,t;return e=new $e({props:{color:s[1]}}),{c(){d(e.$$.fragment),n=b(`
  Combined authorities`)},m(r,o){w(e,r,o),p(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&m(n),k(e,r)}}}function Qn(s){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function er(s){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function tr(s){let e,n,t,r,o,i,u,l,f,a;return t=new z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Qn]},$$scope:{ctx:s}}}),l=new z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[er]},$$scope:{ctx:s}}}),{c(){e=M("p"),n=b("Data from "),d(t.$$.fragment),r=b(", as of December 2022."),o=A(),i=M("p"),u=b("License: "),d(l.$$.fragment),f=b(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(c,$){p(c,e,$),S(e,n),w(t,e,null),S(e,r),p(c,o,$),p(c,i,$),S(i,u),w(l,i,null),S(i,f),a=!0},p(c,$){const h={};$&32&&(h.$$scope={dirty:$,ctx:c}),t.$set(h);const v={};$&32&&(v.$$scope={dirty:$,ctx:c}),l.$set(v)},i(c){a||(g(t.$$.fragment,c),g(l.$$.fragment,c),a=!0)},o(c){_(t.$$.fragment,c),_(l.$$.fragment,c),a=!1},d(c){c&&(m(e),m(o),m(i)),k(t),k(l)}}}function nr(s){let e,n,t;return n=new re({props:{$$slots:{default:[tr]},$$scope:{ctx:s}}}),{c(){e=M("span"),d(n.$$.fragment),j(e,"slot","right")},m(r,o){p(r,e,o),w(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&m(e),k(n)}}}function rr(s){let e,n,t,r,o;function i(l){s[3](l)}let u={id:de,$$slots:{right:[nr],default:[Yn]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new te({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:de,tooltip:sr,show:s[0],clickable:!0}}),r.$on("click",or),{c(){d(e.$$.fragment),t=A(),d(r.$$.fragment)},m(l,f){w(e,l,f),p(l,t,f),w(r,l,f),o=!0},p(l,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:l}),!n&&f&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const c={};f&1&&(c.show=l[0]),r.$set(c)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&m(t),k(e,l),k(r,l)}}}let de="combined_authorities";function sr(s){return`<p>${s.properties.name}</p>`}function or(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.properties.CAUTH22CD}`,"_blank")}function lr(s,e,n){let t;W(s,Y,l=>n(2,t=l));let r=V.combined_authorities,o=`${de}-outline`;nt(t,de,`https://atip.uk/layers/v1/${de}.geojson`),Ae(t,{id:de,source:de,color:r,opacity:ge(.5,.1)}),ye(t,{id:o,source:de,color:r,width:2.5});let i=!1;function u(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,u]}class ir extends R{constructor(e){super(),G(this,e,lr,rr,H,{})}}function ar(s){let e,n,t;return e=new $e({props:{color:s[1]}}),{c(){d(e.$$.fragment),n=b(`
  Cycle parking`)},m(r,o){w(e,r,o),p(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&m(n),k(e,r)}}}function cr(s){let e;return{c(){e=b("OpenStreetMap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fr(s){let e;return{c(){e=b("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ur(s){let e,n,t,r,o,i,u,l,f;return t=new z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[cr]},$$scope:{ctx:s}}}),l=new z({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[fr]},$$scope:{ctx:s}}}),{c(){e=M("p"),n=b("Cycle parking, according to "),d(t.$$.fragment),r=b(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=A(),i=M("p"),u=b("License: "),d(l.$$.fragment)},m(a,c){p(a,e,c),S(e,n),w(t,e,null),S(e,r),p(a,o,c),p(a,i,c),S(i,u),w(l,i,null),f=!0},p(a,c){const $={};c&16&&($.$$scope={dirty:c,ctx:a}),t.$set($);const h={};c&16&&(h.$$scope={dirty:c,ctx:a}),l.$set(h)},i(a){f||(g(t.$$.fragment,a),g(l.$$.fragment,a),f=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),f=!1},d(a){a&&(m(e),m(o),m(i)),k(t),k(l)}}}function $r(s){let e,n,t;return n=new re({props:{$$slots:{default:[ur]},$$scope:{ctx:s}}}),{c(){e=M("span"),d(n.$$.fragment),j(e,"slot","right")},m(r,o){p(r,e,o),w(n,e,null),t=!0},p(r,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&m(e),k(n)}}}function pr(s){let e,n,t,r,o;function i(l){s[2](l)}let u={id:Te,$$slots:{right:[$r],default:[ar]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new te({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:Te,tooltip:mr,show:s[0],clickable:!1}}),{c(){d(e.$$.fragment),t=A(),d(r.$$.fragment)},m(l,f){w(e,l,f),p(l,t,f),w(r,l,f),o=!0},p(l,[f]){const a={};f&16&&(a.$$scope={dirty:f,ctx:l}),!n&&f&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const c={};f&1&&(c.show=l[0]),r.$set(c)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&m(t),k(e,l),k(r,l)}}}let Te="cycle_parking";function mr(s){return`<p>Capacity: ${s.properties.capacity??"unknown"}</p>`}function hr(s,e,n){let t;W(s,Y,u=>n(3,t=u));let r=V.cycle_parking;ve(t,Te,`https://atip.uk/layers/v1/${Te}.pmtiles`),Mt(t,{id:Te,source:Te,sourceLayer:Te,color:r,radius:5});let o=!1;function i(u){o=u,n(0,o)}return[o,r,i]}class gr extends R{constructor(e){super(),G(this,e,hr,pr,H,{})}}function _r(s){let e=new Map;for(let[t,r]of Object.entries(s.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:r.authority_or_region,capital_scheme_id:r.capital_scheme_id,funding_programme:r.funding_programme});let n=1;for(let t of s.features){let r=e.get(t.properties.scheme_reference);r.num_features++,t.properties.funding_programme=r.funding_programme,t.id=n++}return e}function dr(s){let e,n,t,r,o;function i(l){s[3](l)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return s[0]!==void 0&&(u.value=s[0]),e=new Qe({props:u}),Z.push(()=>q(e,"value",i)),e.$on("change",s[2]),r=new pn({props:{rows:s[1]}}),{c(){d(e.$$.fragment),t=A(),d(r.$$.fragment)},m(l,f){w(e,l,f),p(l,t,f),w(r,l,f),o=!0},p(l,[f]){const a={};!n&&f&1&&(n=!0,a.value=l[0],K(()=>n=!1)),e.$set(a);const c={};f&2&&(c.rows=l[1]),r.$set(c)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&m(t),k(e,l),k(r,l)}}}function wr(s,e,n){let t;W(s,Y,l=>n(4,t=l));let r="interventionType",o=ht("v1");function i(){let l;r=="interventionType"?(l=It("v1"),n(1,o=ht("v1"))):(l=nn(["get","funding_programme"],{ATF2:V.atf2,ATF3:V.atf3,ATF4:V.atf4},"grey"),n(1,o=[["ATF2",V.atf2],["ATF3",V.atf3],["ATF4",V.atf4]])),t.setPaintProperty("interventions-points","circle-color",l),t.setPaintProperty("interventions-lines","line-color",l),t.setPaintProperty("interventions-polygons","fill-color",l),t.setPaintProperty("interventions-polygon-outlines","line-color",l)}function u(l){r=l,n(0,r)}return[r,o,i,u]}class kr extends R{constructor(e){super(),G(this,e,wr,dr,H,{})}}function br(s){let e;return{c(){e=b("Clear")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function vr(s){let e,n,t,r,o,i;return t=new He({props:{$$slots:{default:[br]},$$scope:{ctx:s}}}),t.$on("click",s[11]),{c(){e=M("input"),n=A(),d(t.$$.fragment),j(e,"type","text"),j(e,"class","govuk-input govuk-input--width-10"),j(e,"id","filterText")},m(u,l){p(u,e,l),pt(e,s[0]),p(u,n,l),w(t,u,l),r=!0,o||(i=sn(e,"input",s[10]),o=!0)},p(u,l){l&1&&e.value!==u[0]&&pt(e,u[0]);const f={};l&16384&&(f.$$scope={dirty:l,ctx:u}),t.$set(f)},i(u){r||(g(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(m(e),m(n)),k(t,u),o=!1,i()}}}function yr(s){let e,n,t,r,o,i,u,l,f,a;function c(y){s[8](y)}let $={label:"Authority or region",id:"filterAuthority",choices:s[4],emptyOption:!0};s[2]!==void 0&&($.value=s[2]),e=new Qe({props:$}),Z.push(()=>q(e,"value",c));function h(y){s[9](y)}let v={label:"Funding programme",id:"filterFundingProgramme",choices:s[5],emptyOption:!0};return s[3]!==void 0&&(v.value=s[3]),r=new Qe({props:v}),Z.push(()=>q(r,"value",h)),u=new rn({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[vr]},$$scope:{ctx:s}}}),f=new kr({}),{c(){d(e.$$.fragment),t=A(),d(r.$$.fragment),i=A(),d(u.$$.fragment),l=A(),d(f.$$.fragment)},m(y,C){w(e,y,C),p(y,t,C),w(r,y,C),p(y,i,C),w(u,y,C),p(y,l,C),w(f,y,C),a=!0},p(y,C){const L={};C&16&&(L.choices=y[4]),!n&&C&4&&(n=!0,L.value=y[2],K(()=>n=!1)),e.$set(L);const T={};C&32&&(T.choices=y[5]),!o&&C&8&&(o=!0,T.value=y[3],K(()=>o=!1)),r.$set(T);const U={};C&16385&&(U.$$scope={dirty:C,ctx:y}),u.$set(U)},i(y){a||(g(e.$$.fragment,y),g(r.$$.fragment,y),g(u.$$.fragment,y),g(f.$$.fragment,y),a=!0)},o(y){_(e.$$.fragment,y),_(r.$$.fragment,y),_(u.$$.fragment,y),_(f.$$.fragment,y),a=!1},d(y){y&&(m(t),m(i),m(l)),k(e,y),k(r,y),k(u,y),k(f,y)}}}function Lr(s){let e,n,t,r,o=s[1].size+"",i,u,l=s[6].route+"",f,a,c=s[6].area+"",$,h,v=s[6].crossing+"",y,C,L=s[6].other+"",T,U,O;return e=new Oe({props:{label:"Filters",$$slots:{default:[yr]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment),n=A(),t=M("p"),r=b("Showing "),i=b(o),u=b(" schemes ("),f=b(l),a=b(" routes, "),$=b(c),h=b(` areas,
  `),y=b(v),C=b(" crossings, "),T=b(L),U=b(" other)")},m(N,x){w(e,N,x),p(N,n,x),p(N,t,x),S(t,r),S(t,i),S(t,u),S(t,f),S(t,a),S(t,$),S(t,h),S(t,y),S(t,C),S(t,T),S(t,U),O=!0},p(N,[x]){const B={};x&16445&&(B.$$scope={dirty:x,ctx:N}),e.$set(B),(!O||x&2)&&o!==(o=N[1].size+"")&&ie(i,o),(!O||x&64)&&l!==(l=N[6].route+"")&&ie(f,l),(!O||x&64)&&c!==(c=N[6].area+"")&&ie($,c),(!O||x&64)&&v!==(v=N[6].crossing+"")&&ie(y,v),(!O||x&64)&&L!==(L=N[6].other+"")&&ie(T,L)},i(N){O||(g(e.$$.fragment,N),O=!0)},o(N){_(e.$$.fragment,N),O=!1},d(N){N&&(m(n),m(t)),k(e,N)}}}function Cr(s,e,n){let t;W(s,xe,L=>n(12,t=L));let{schemes:r}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,u=[],l="",f=[],a="",c={area:0,route:0,crossing:0,other:0};rt(()=>{let L=new Set,T=new Set;for(let U of r.values())U.authority_or_region&&L.add(U.authority_or_region),U.funding_programme&&T.add(U.funding_programme);n(4,u=Array.from(L.entries())),u.sort(),n(5,f=Array.from(T.entries())),f.sort()});function $(L,T,U){let O=L.toLowerCase(),N=B=>{var D,E;if(O&&!((D=B.properties.name)!=null&&D.toLowerCase().includes(O))&&!((E=B.properties.description)!=null&&E.toLowerCase().includes(O)))return!1;if(T||U){let P=r.get(B.properties.scheme_reference);if(T&&P.authority_or_region!=T||U&&P.funding_programme!=U)return!1}return!0};n(1,o=new Set(t.features.filter(N).map(B=>B.properties.scheme_reference))),n(6,c={area:0,route:0,crossing:0,other:0});let x=B=>{var D,E;return!(!o.has(B.properties.scheme_reference)||O&&!((D=B.properties.name)!=null&&D.toLowerCase().includes(O))&&!((E=B.properties.description)!=null&&E.toLowerCase().includes(O)))};xe.update(B=>{for(let D of B.features)x(D)?(delete D.properties.hide_while_editing,n(6,c[D.properties.intervention_type]++,c)):D.properties.hide_while_editing=!0;return B}),n(6,c)}function h(L){l=L,n(2,l)}function v(L){a=L,n(3,a)}function y(){i=this.value,n(0,i)}const C=()=>n(0,i="");return s.$$set=L=>{"schemes"in L&&n(7,r=L.schemes),"schemesToBeShown"in L&&n(1,o=L.schemesToBeShown),"filterText"in L&&n(0,i=L.filterText)},s.$$.update=()=>{s.$$.dirty&13&&$(i,l,a)},[i,o,l,a,u,f,c,r,h,v,y,C]}class Sr extends R{constructor(e){super(),G(this,e,Cr,Lr,H,{schemes:7,schemesToBeShown:1,filterText:0})}}function Tr(s){let e,n,t,r;return e=new $e({props:{color:s[3]}}),{c(){d(e.$$.fragment),n=A(),t=b(s[1])},m(o,i){w(e,o,i),p(o,n,i),p(o,t,i),r=!0},p(o,i){(!r||i&2)&&ie(t,o[1])},i(o){r||(g(e.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),r=!1},d(o){o&&(m(n),m(t)),k(e,o)}}}function Dr(s){let e;const n=s[6].default,t=Ut(n,s,s[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&Pt(t,n,r,r[8],e?xt(n,r[8],o,null):Bt(r[8]),null)},i(r){e||(g(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function Or(s){let e,n,t;return n=new re({props:{$$slots:{default:[Dr]},$$scope:{ctx:s}}}),{c(){e=M("span"),d(n.$$.fragment),j(e,"slot","right")},m(r,o){p(r,e,o),w(n,e,null),t=!0},p(r,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&m(e),k(n)}}}function Ar(s){let e,n,t,r,o;function i(l){s[7](l)}let u={id:s[0],$$slots:{right:[Or],default:[Tr]},$$scope:{ctx:s}};return s[2]!==void 0&&(u.checked=s[2]),e=new te({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:s[0],tooltip:s[4],show:s[2],clickable:!1}}),{c(){d(e.$$.fragment),t=A(),d(r.$$.fragment)},m(l,f){w(e,l,f),p(l,t,f),w(r,l,f),o=!0},p(l,[f]){const a={};f&1&&(a.id=l[0]),f&258&&(a.$$scope={dirty:f,ctx:l}),!n&&f&4&&(n=!0,a.checked=l[2],K(()=>n=!1)),e.$set(a);const c={};f&1&&(c.layer=l[0]),f&4&&(c.show=l[2]),r.$set(c)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&m(t),k(e,l),k(r,l)}}}function Nr(s,e,n){let t;W(s,Y,h=>n(9,t=h));let{$$slots:r={},$$scope:o}=e,{name:i}=e,{singularNoun:u}=e,{pluralNoun:l}=e,f=V[i];ve(t,i,`https://atip.uk/layers/v1/${i}.pmtiles`),Ae(t,{id:i,source:i,sourceLayer:i,color:f,opacity:ge(1,.7)});let a=!1;function c(h){return`<p>${h.properties.name??`Unnamed ${u}`}</p>`}function $(h){a=h,n(2,a)}return s.$$set=h=>{"name"in h&&n(0,i=h.name),"singularNoun"in h&&n(5,u=h.singularNoun),"pluralNoun"in h&&n(1,l=h.pluralNoun),"$$scope"in h&&n(8,o=h.$$scope)},[i,l,a,f,c,u,r,$,o]}class lt extends R{constructor(e){super(),G(this,e,Nr,Ar,H,{name:0,singularNoun:5,pluralNoun:1})}}function Mr(s){let e;return{c(){e=b("hospital")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ur(s){let e;return{c(){e=b("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pr(s){let e,n,t,r,o,i,u,l,f;return t=new z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Mr]},$$scope:{ctx:s}}}),l=new z({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ur]},$$scope:{ctx:s}}}),{c(){e=M("p"),n=b("This shows "),d(t.$$.fragment),r=b(` data from OpenStreetMap. It doesn't include outpatient clinics
    or individual doctor's offices.`),o=A(),i=M("p"),u=b("License: "),d(l.$$.fragment)},m(a,c){p(a,e,c),S(e,n),w(t,e,null),S(e,r),p(a,o,c),p(a,i,c),S(i,u),w(l,i,null),f=!0},p(a,c){const $={};c&1&&($.$$scope={dirty:c,ctx:a}),t.$set($);const h={};c&1&&(h.$$scope={dirty:c,ctx:a}),l.$set(h)},i(a){f||(g(t.$$.fragment,a),g(l.$$.fragment,a),f=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),f=!1},d(a){a&&(m(e),m(o),m(i)),k(t),k(l)}}}function Br(s){let e,n;return e=new lt({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Pr]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}class xr extends R{constructor(e){super(),G(this,e,null,Br,H,{})}}function Er(s){let e,n,t;return e=new $e({props:{color:s[1]}}),{c(){d(e.$$.fragment),n=b(`
  Local Authority Districts`)},m(r,o){w(e,r,o),p(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&m(n),k(e,r)}}}function zr(s){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ir(s){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Fr(s){let e,n,t,r,o,i,u,l,f,a;return t=new z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[zr]},$$scope:{ctx:s}}}),l=new z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ir]},$$scope:{ctx:s}}}),{c(){e=M("p"),n=b("Data from "),d(t.$$.fragment),r=b(", as of May 2023."),o=A(),i=M("p"),u=b("License: "),d(l.$$.fragment),f=b(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(c,$){p(c,e,$),S(e,n),w(t,e,null),S(e,r),p(c,o,$),p(c,i,$),S(i,u),w(l,i,null),S(i,f),a=!0},p(c,$){const h={};$&32&&(h.$$scope={dirty:$,ctx:c}),t.$set(h);const v={};$&32&&(v.$$scope={dirty:$,ctx:c}),l.$set(v)},i(c){a||(g(t.$$.fragment,c),g(l.$$.fragment,c),a=!0)},o(c){_(t.$$.fragment,c),_(l.$$.fragment,c),a=!1},d(c){c&&(m(e),m(o),m(i)),k(t),k(l)}}}function jr(s){let e,n,t;return n=new re({props:{$$slots:{default:[Fr]},$$scope:{ctx:s}}}),{c(){e=M("span"),d(n.$$.fragment),j(e,"slot","right")},m(r,o){p(r,e,o),w(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&m(e),k(n)}}}function Rr(s){let e,n,t,r,o;function i(l){s[3](l)}let u={id:we,$$slots:{right:[jr],default:[Er]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new te({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:we,tooltip:Gr,show:s[0],clickable:!0}}),r.$on("click",Hr),{c(){d(e.$$.fragment),t=A(),d(r.$$.fragment)},m(l,f){w(e,l,f),p(l,t,f),w(r,l,f),o=!0},p(l,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:l}),!n&&f&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const c={};f&1&&(c.show=l[0]),r.$set(c)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&m(t),k(e,l),k(r,l)}}}let we="local_authority_districts";function Gr(s){return`<p>${s.properties.name}</p>`}function Hr(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.properties.LAD23CD}`,"_blank")}function Vr(s,e,n){let t;W(s,Y,l=>n(2,t=l));let r=V.local_authority_districts,o=`${we}-outline`;nt(t,we,`https://atip.uk/layers/v1/${we}.geojson`),Ae(t,{id:we,source:we,color:r,opacity:ge(.5,.1)}),ye(t,{id:o,source:we,color:r,width:2.5});let i=!1;function u(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,u]}class Zr extends R{constructor(e){super(),G(this,e,Vr,Rr,H,{})}}function qr(s){let e,n,t;return e=new $e({props:{color:s[1]}}),{c(){d(e.$$.fragment),n=b(`
  Local Planning Authorities`)},m(r,o){w(e,r,o),p(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&m(n),k(e,r)}}}function Kr(s){let e;return{c(){e=b(`local authority
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Wr(s){let e;return{c(){e=b(`national park authorit
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Jr(s){let e;return{c(){e=b(`development corporation
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Xr(s){let e;return{c(){e=b("this map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Yr(s){let e;return{c(){e=b(`planning.data.gov.uk
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qr(s){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function es(s){let e,n,t,r,o,i,u,l,f,a,c,$,h,v,y,C,L,T,U,O,N,x,B,D,E;return t=new z({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Kr]},$$scope:{ctx:s}}}),o=new z({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Wr]},$$scope:{ctx:s}}}),u=new z({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Jr]},$$scope:{ctx:s}}}),h=new z({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Xr]},$$scope:{ctx:s}}}),T=new z({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Yr]},$$scope:{ctx:s}}}),B=new z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Qr]},$$scope:{ctx:s}}}),{c(){e=M("p"),n=b("LPAs may be a "),d(t.$$.fragment),r=b(", "),d(o.$$.fragment),i=b("y, or "),d(u.$$.fragment),l=b("."),f=A(),a=M("p"),c=M("strong"),$=b(`Note there are overlapping LPAs near Northhamptonshire, shown in a
          darker shade. Only one authority name is shown when hovering. Use `),d(h.$$.fragment),v=b(" to get more details."),y=A(),C=M("p"),L=b("Data from ONS Geography via "),d(T.$$.fragment),U=b(", as of November 2022."),O=A(),N=M("p"),x=b("License: "),d(B.$$.fragment),D=b(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(P,F){p(P,e,F),S(e,n),w(t,e,null),S(e,r),w(o,e,null),S(e,i),w(u,e,null),S(e,l),p(P,f,F),p(P,a,F),S(a,c),S(c,$),w(h,c,null),S(c,v),p(P,y,F),p(P,C,F),S(C,L),w(T,C,null),S(C,U),p(P,O,F),p(P,N,F),S(N,x),w(B,N,null),S(N,D),E=!0},p(P,F){const _e={};F&32&&(_e.$$scope={dirty:F,ctx:P}),t.$set(_e);const Le={};F&32&&(Le.$$scope={dirty:F,ctx:P}),o.$set(Le);const Ee={};F&32&&(Ee.$$scope={dirty:F,ctx:P}),u.$set(Ee);const pe={};F&32&&(pe.$$scope={dirty:F,ctx:P}),h.$set(pe);const Ce={};F&32&&(Ce.$$scope={dirty:F,ctx:P}),T.$set(Ce);const ze={};F&32&&(ze.$$scope={dirty:F,ctx:P}),B.$set(ze)},i(P){E||(g(t.$$.fragment,P),g(o.$$.fragment,P),g(u.$$.fragment,P),g(h.$$.fragment,P),g(T.$$.fragment,P),g(B.$$.fragment,P),E=!0)},o(P){_(t.$$.fragment,P),_(o.$$.fragment,P),_(u.$$.fragment,P),_(h.$$.fragment,P),_(T.$$.fragment,P),_(B.$$.fragment,P),E=!1},d(P){P&&(m(e),m(f),m(a),m(y),m(C),m(O),m(N)),k(t),k(o),k(u),k(h),k(T),k(B)}}}function ts(s){let e,n,t;return n=new re({props:{$$slots:{default:[es]},$$scope:{ctx:s}}}),{c(){e=M("span"),d(n.$$.fragment),j(e,"slot","right")},m(r,o){p(r,e,o),w(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&m(e),k(n)}}}function ns(s){let e,n,t,r,o;function i(l){s[3](l)}let u={id:ce,$$slots:{right:[ts],default:[qr]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new te({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:ce,tooltip:rs,show:s[0],clickable:!1}}),{c(){d(e.$$.fragment),t=A(),d(r.$$.fragment)},m(l,f){w(e,l,f),p(l,t,f),w(r,l,f),o=!0},p(l,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:l}),!n&&f&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const c={};f&1&&(c.show=l[0]),r.$set(c)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&m(t),k(e,l),k(r,l)}}}let ce="local_planning_authorities";function rs(s){return`<p>${s.properties.name}</p>`}function ss(s,e,n){let t;W(s,Y,l=>n(2,t=l));let r=V.local_planning_authorities,o=`${ce}-outline`;ve(t,ce,`https://atip.uk/layers/v1/${ce}.pmtiles`),Ae(t,{id:ce,source:ce,sourceLayer:ce,color:r,opacity:ge(.5,.1)}),ye(t,{id:o,source:ce,sourceLayer:ce,color:r,width:2.5});let i=!1;function u(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,u]}class os extends R{constructor(e){super(),G(this,e,ss,ns,H,{})}}function ls(s){let e,n,t;return e=new $e({props:{color:s[1]}}),{c(){d(e.$$.fragment),n=b(`
  Major Road Network`)},m(r,o){w(e,r,o),p(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&m(n),k(e,r)}}}function is(s){let e;return{c(){e=b(`Major Road Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function as(s){let e;return{c(){e=b("Open Government License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function cs(s){let e,n,t,r,o,i,u,l,f;return t=new z({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[is]},$$scope:{ctx:s}}}),l=new z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[as]},$$scope:{ctx:s}}}),{c(){e=M("p"),n=b("Data from the "),d(t.$$.fragment),r=b("."),o=A(),i=M("p"),u=b("License: "),d(l.$$.fragment)},m(a,c){p(a,e,c),S(e,n),w(t,e,null),S(e,r),p(a,o,c),p(a,i,c),S(i,u),w(l,i,null),f=!0},p(a,c){const $={};c&16&&($.$$scope={dirty:c,ctx:a}),t.$set($);const h={};c&16&&(h.$$scope={dirty:c,ctx:a}),l.$set(h)},i(a){f||(g(t.$$.fragment,a),g(l.$$.fragment,a),f=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),f=!1},d(a){a&&(m(e),m(o),m(i)),k(t),k(l)}}}function fs(s){let e,n,t;return n=new re({props:{$$slots:{default:[cs]},$$scope:{ctx:s}}}),{c(){e=M("span"),d(n.$$.fragment),j(e,"slot","right")},m(r,o){p(r,e,o),w(n,e,null),t=!0},p(r,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&m(e),k(n)}}}function us(s){let e,n,t,r,o;function i(l){s[2](l)}let u={id:De,$$slots:{right:[fs],default:[ls]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new te({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:De,tooltip:$s,show:s[0],clickable:!1}}),{c(){d(e.$$.fragment),t=A(),d(r.$$.fragment)},m(l,f){w(e,l,f),p(l,t,f),w(r,l,f),o=!0},p(l,[f]){const a={};f&16&&(a.$$scope={dirty:f,ctx:l}),!n&&f&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const c={};f&1&&(c.show=l[0]),r.$set(c)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&m(t),k(e,l),k(r,l)}}}let De="mrn";function $s(s){return`<p>${s.properties.name??"Unknown MRN road"}</p>`}function ps(s,e,n){let t;W(s,Y,u=>n(3,t=u));let r=V.mrn;ve(t,De,`https://atip.uk/layers/v1/${De}.pmtiles`),ye(t,{id:De,source:De,sourceLayer:De,color:r,width:7,opacity:ge(.5,1)});let o=!1;function i(u){o=u,n(0,o)}return[o,r,i]}class ms extends R{constructor(e){super(),G(this,e,ps,us,H,{})}}function hs(s){let e,n,t;return e=new $e({props:{color:s[1]}}),{c(){d(e.$$.fragment),n=b(`
  Parliamentary constituencies`)},m(r,o){w(e,r,o),p(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&m(n),k(e,r)}}}function gs(s){let e;return{c(){e=b(`Ordnance Survey Boundary-Line
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function _s(s){let e;return{c(){e=b("Open Government License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ds(s){let e,n,t,r,o,i,u,l,f;return t=new z({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[gs]},$$scope:{ctx:s}}}),l=new z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[_s]},$$scope:{ctx:s}}}),{c(){e=M("p"),n=b("Data from "),d(t.$$.fragment),r=b("."),o=A(),i=M("p"),u=b("License: "),d(l.$$.fragment)},m(a,c){p(a,e,c),S(e,n),w(t,e,null),S(e,r),p(a,o,c),p(a,i,c),S(i,u),w(l,i,null),f=!0},p(a,c){const $={};c&32&&($.$$scope={dirty:c,ctx:a}),t.$set($);const h={};c&32&&(h.$$scope={dirty:c,ctx:a}),l.$set(h)},i(a){f||(g(t.$$.fragment,a),g(l.$$.fragment,a),f=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),f=!1},d(a){a&&(m(e),m(o),m(i)),k(t),k(l)}}}function ws(s){let e,n,t;return n=new re({props:{$$slots:{default:[ds]},$$scope:{ctx:s}}}),{c(){e=M("span"),d(n.$$.fragment),j(e,"slot","right")},m(r,o){p(r,e,o),w(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&m(e),k(n)}}}function ks(s){let e,n,t,r,o;function i(l){s[3](l)}let u={id:fe,$$slots:{right:[ws],default:[hs]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new te({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:fe,tooltip:bs,show:s[0],clickable:!0}}),r.$on("click",vs),{c(){d(e.$$.fragment),t=A(),d(r.$$.fragment)},m(l,f){w(e,l,f),p(l,t,f),w(r,l,f),o=!0},p(l,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:l}),!n&&f&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const c={};f&1&&(c.show=l[0]),r.$set(c)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&m(t),k(e,l),k(r,l)}}}let fe="parliamentary_constituencies";function bs(s){return`<p>${s.properties.Name}</p>`}function vs(s){let e=s.detail.properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function ys(s,e,n){let t;W(s,Y,l=>n(2,t=l));let r=V.parliamentary_constituencies,o=`${fe}-outline`;ve(t,fe,`https://atip.uk/layers/v1/${fe}.pmtiles`),Ae(t,{id:fe,source:fe,sourceLayer:fe,color:r,opacity:ge(.5,.1)}),ye(t,{id:o,source:fe,sourceLayer:fe,color:r,width:5});let i=!1;function u(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,u]}class Ls extends R{constructor(e){super(),G(this,e,ys,ks,H,{})}}function Cs(s){let e,n,t,r;return e=new $e({props:{color:s[3]}}),{c(){d(e.$$.fragment),n=A(),t=b(s[1])},m(o,i){w(e,o,i),p(o,n,i),p(o,t,i),r=!0},p(o,i){(!r||i&2)&&ie(t,o[1])},i(o){r||(g(e.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),r=!1},d(o){o&&(m(n),m(t)),k(e,o)}}}function Ss(s){let e;const n=s[7].default,t=Ut(n,s,s[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&Pt(t,n,r,r[9],e?xt(n,r[9],o,null):Bt(r[9]),null)},i(r){e||(g(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function Ts(s){let e,n,t;return n=new re({props:{$$slots:{default:[Ss]},$$scope:{ctx:s}}}),{c(){e=M("span"),d(n.$$.fragment),j(e,"slot","right")},m(r,o){p(r,e,o),w(n,e,null),t=!0},p(r,o){const i={};o&512&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&m(e),k(n)}}}function Ds(s){let e,n,t,r,o;function i(l){s[8](l)}let u={id:s[0],$$slots:{right:[Ts],default:[Cs]},$$scope:{ctx:s}};return s[2]!==void 0&&(u.checked=s[2]),e=new te({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:s[0],tooltip:s[4],show:s[2],clickable:!1}}),{c(){d(e.$$.fragment),t=A(),d(r.$$.fragment)},m(l,f){w(e,l,f),p(l,t,f),w(r,l,f),o=!0},p(l,[f]){const a={};f&1&&(a.id=l[0]),f&514&&(a.$$scope={dirty:f,ctx:l}),!n&&f&4&&(n=!0,a.checked=l[2],K(()=>n=!1)),e.$set(a);const c={};f&1&&(c.layer=l[0]),f&4&&(c.show=l[2]),r.$set(c)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&m(t),k(e,l),k(r,l)}}}function Os(s,e,n){let t;W(s,Y,v=>n(10,t=v));let{$$slots:r={},$$scope:o}=e,{name:i}=e,{singularNoun:u}=e,{pluralNoun:l}=e,{circleRadius:f}=e,a=V[i];nt(t,i,`https://atip.uk/layers/v1/${i}.geojson`),Mt(t,{id:i,source:i,color:a,radius:f/2});let c=!1;function $(v){return`<p>${v.properties.name??`Unnamed ${u}`}</p>`}function h(v){c=v,n(2,c)}return s.$$set=v=>{"name"in v&&n(0,i=v.name),"singularNoun"in v&&n(5,u=v.singularNoun),"pluralNoun"in v&&n(1,l=v.pluralNoun),"circleRadius"in v&&n(6,f=v.circleRadius),"$$scope"in v&&n(9,o=v.$$scope)},[i,l,c,a,$,u,f,r,h,o]}class As extends R{constructor(e){super(),G(this,e,Os,Ds,H,{name:0,singularNoun:5,pluralNoun:1,circleRadius:6})}}function Ns(s){let e;return{c(){e=b("railway station")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ms(s){let e;return{c(){e=b("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Us(s){let e,n,t,r,o,i,u,l,f;return t=new z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Ns]},$$scope:{ctx:s}}}),l=new z({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ms]},$$scope:{ctx:s}}}),{c(){e=M("p"),n=b("This shows "),d(t.$$.fragment),r=b(" data from OpenStreetMap."),o=A(),i=M("p"),u=b("License: "),d(l.$$.fragment)},m(a,c){p(a,e,c),S(e,n),w(t,e,null),S(e,r),p(a,o,c),p(a,i,c),S(i,u),w(l,i,null),f=!0},p(a,c){const $={};c&1&&($.$$scope={dirty:c,ctx:a}),t.$set($);const h={};c&1&&(h.$$scope={dirty:c,ctx:a}),l.$set(h)},i(a){f||(g(t.$$.fragment,a),g(l.$$.fragment,a),f=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),f=!1},d(a){a&&(m(e),m(o),m(i)),k(t),k(l)}}}function Ps(s){let e,n;return e=new As({props:{name:Bs,singularNoun:"railway station",pluralNoun:"Railway stations",circleRadius:mn,$$slots:{default:[Us]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}const Bs="railway_stations";class xs extends R{constructor(e){super(),G(this,e,null,Ps,H,{})}}function Es(s){let e;return{c(){e=b("Show on map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function zs(s){let e;return{c(){e=b("Edit scheme locally")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Is(s){let e,n,t=s[0].authority_or_region+"",r,o,i,u,l=s[0].capital_scheme_id+"",f,a,c,$,h=s[0].funding_programme+"",v,y,C,L,T,U,O;return L=new He({props:{$$slots:{default:[Es]},$$scope:{ctx:s}}}),L.$on("click",s[3]),U=new He({props:{disabled:s[1],title:s[2],$$slots:{default:[zs]},$$scope:{ctx:s}}}),U.$on("click",s[4]),{c(){e=M("p"),n=b("Authority or region: "),r=b(t),o=A(),i=M("p"),u=b("Capital scheme ID: "),f=b(l),a=A(),c=M("p"),$=b("Funding programme: "),v=b(h),y=A(),C=M("div"),d(L.$$.fragment),T=A(),d(U.$$.fragment),j(C,"class","govuk-button-group")},m(N,x){p(N,e,x),S(e,n),S(e,r),p(N,o,x),p(N,i,x),S(i,u),S(i,f),p(N,a,x),p(N,c,x),S(c,$),S(c,v),p(N,y,x),p(N,C,x),w(L,C,null),S(C,T),w(U,C,null),O=!0},p(N,x){(!O||x&1)&&t!==(t=N[0].authority_or_region+"")&&ie(r,t),(!O||x&1)&&l!==(l=N[0].capital_scheme_id+"")&&ie(f,l),(!O||x&1)&&h!==(h=N[0].funding_programme+"")&&ie(v,h);const B={};x&256&&(B.$$scope={dirty:x,ctx:N}),L.$set(B);const D={};x&256&&(D.$$scope={dirty:x,ctx:N}),U.$set(D)},i(N){O||(g(L.$$.fragment,N),g(U.$$.fragment,N),O=!0)},o(N){_(L.$$.fragment,N),_(U.$$.fragment,N),O=!1},d(N){N&&(m(e),m(o),m(i),m(a),m(c),m(y),m(C)),k(L),k(U)}}}function Fs(s){let e,n;return e=new Oe({props:{label:`${s[0].scheme_reference}: ${s[0].num_features} features`,$$slots:{default:[Is]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),r&257&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function js(s,e,n){let t,r;W(s,xe,c=>n(6,t=c)),W(s,Y,c=>n(7,r=c));let{scheme:o}=e,{authorityNames:i}=e,u=!i.has(o.authority_or_region),l=u?"This scheme doesn't have an authority specified correctly, so you can't edit this scheme. We're working to fix this problem.":void 0;function f(){let c={type:"FeatureCollection",features:t.features.filter($=>$.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Et(c),{padding:20,animate:!1})}function a(){let c={type:"FeatureCollection",features:t.features.filter(h=>h.properties.scheme_reference==o.scheme_reference)},$=o.authority_or_region;window.localStorage.setItem($,JSON.stringify(c)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return s.$$set=c=>{"scheme"in c&&n(0,o=c.scheme),"authorityNames"in c&&n(5,i=c.authorityNames)},[o,u,l,f,a,i]}class Rs extends R{constructor(e){super(),G(this,e,js,Fs,H,{scheme:0,authorityNames:5})}}function Gs(s){let e;return{c(){e=b("primary and secondary schools")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Hs(s){let e;return{c(){e=b("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Vs(s){let e,n,t,r,o,i,u,l,f;return t=new z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[Gs]},$$scope:{ctx:s}}}),l=new z({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Hs]},$$scope:{ctx:s}}}),{c(){e=M("p"),n=b("This shows "),d(t.$$.fragment),r=b(` from OpenStreetMap. It doesn't include kindergartens, colleges,
    universities, or other training schools.`),o=A(),i=M("p"),u=b("License: "),d(l.$$.fragment)},m(a,c){p(a,e,c),S(e,n),w(t,e,null),S(e,r),p(a,o,c),p(a,i,c),S(i,u),w(l,i,null),f=!0},p(a,c){const $={};c&1&&($.$$scope={dirty:c,ctx:a}),t.$set($);const h={};c&1&&(h.$$scope={dirty:c,ctx:a}),l.$set(h)},i(a){f||(g(t.$$.fragment,a),g(l.$$.fragment,a),f=!0)},o(a){_(t.$$.fragment,a),_(l.$$.fragment,a),f=!1},d(a){a&&(m(e),m(o),m(i)),k(t),k(l)}}}function Zs(s){let e,n;return e=new lt({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[Vs]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}class qs extends R{constructor(e){super(),G(this,e,null,Zs,H,{})}}function Ks(s){let e;return{c(){e=b("sports pitches")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ws(s){let e;return{c(){e=b("sports centres")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Js(s){let e;return{c(){e=b("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Xs(s){let e,n,t,r,o,i,u,l,f,a,c;return t=new z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Ks]},$$scope:{ctx:s}}}),o=new z({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Ws]},$$scope:{ctx:s}}}),a=new z({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Js]},$$scope:{ctx:s}}}),{c(){e=M("p"),n=b("This shows "),d(t.$$.fragment),r=b(" and "),d(o.$$.fragment),i=b(" data from OpenStreetMap."),u=A(),l=M("p"),f=b("License: "),d(a.$$.fragment)},m($,h){p($,e,h),S(e,n),w(t,e,null),S(e,r),w(o,e,null),S(e,i),p($,u,h),p($,l,h),S(l,f),w(a,l,null),c=!0},p($,h){const v={};h&1&&(v.$$scope={dirty:h,ctx:$}),t.$set(v);const y={};h&1&&(y.$$scope={dirty:h,ctx:$}),o.$set(y);const C={};h&1&&(C.$$scope={dirty:h,ctx:$}),a.$set(C)},i($){c||(g(t.$$.fragment,$),g(o.$$.fragment,$),g(a.$$.fragment,$),c=!0)},o($){_(t.$$.fragment,$),_(o.$$.fragment,$),_(a.$$.fragment,$),c=!1},d($){$&&(m(e),m(u),m(l)),k(t),k(o),k(a)}}}function Ys(s){let e,n;return e=new lt({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Xs]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}class Qs extends R{constructor(e){super(),G(this,e,null,Ys,H,{})}}function eo(s){let e,n,t;return e=new $e({props:{color:s[1]}}),{c(){d(e.$$.fragment),n=b(`
  Wards`)},m(r,o){w(e,r,o),p(r,n,o),t=!0},p:ne,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&m(n),k(e,r)}}}function to(s){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function no(s){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ro(s){let e,n,t,r,o,i,u,l,f,a;return t=new z({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[to]},$$scope:{ctx:s}}}),l=new z({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[no]},$$scope:{ctx:s}}}),{c(){e=M("p"),n=b("Data from "),d(t.$$.fragment),r=b(", as of May 2023."),o=A(),i=M("p"),u=b("License: "),d(l.$$.fragment),f=b(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(c,$){p(c,e,$),S(e,n),w(t,e,null),S(e,r),p(c,o,$),p(c,i,$),S(i,u),w(l,i,null),S(i,f),a=!0},p(c,$){const h={};$&32&&(h.$$scope={dirty:$,ctx:c}),t.$set(h);const v={};$&32&&(v.$$scope={dirty:$,ctx:c}),l.$set(v)},i(c){a||(g(t.$$.fragment,c),g(l.$$.fragment,c),a=!0)},o(c){_(t.$$.fragment,c),_(l.$$.fragment,c),a=!1},d(c){c&&(m(e),m(o),m(i)),k(t),k(l)}}}function so(s){let e,n,t;return n=new re({props:{$$slots:{default:[ro]},$$scope:{ctx:s}}}),{c(){e=M("span"),d(n.$$.fragment),j(e,"slot","right")},m(r,o){p(r,e,o),w(n,e,null),t=!0},p(r,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:r}),n.$set(i)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&m(e),k(n)}}}function oo(s){let e,n,t,r,o;function i(l){s[3](l)}let u={id:ue,$$slots:{right:[so],default:[eo]},$$scope:{ctx:s}};return s[0]!==void 0&&(u.checked=s[0]),e=new te({props:u}),Z.push(()=>q(e,"checked",i)),r=new X({props:{layer:ue,tooltip:lo,show:s[0],clickable:!0}}),r.$on("click",io),{c(){d(e.$$.fragment),t=A(),d(r.$$.fragment)},m(l,f){w(e,l,f),p(l,t,f),w(r,l,f),o=!0},p(l,[f]){const a={};f&32&&(a.$$scope={dirty:f,ctx:l}),!n&&f&1&&(n=!0,a.checked=l[0],K(()=>n=!1)),e.$set(a);const c={};f&1&&(c.show=l[0]),r.$set(c)},i(l){o||(g(e.$$.fragment,l),g(r.$$.fragment,l),o=!0)},o(l){_(e.$$.fragment,l),_(r.$$.fragment,l),o=!1},d(l){l&&m(t),k(e,l),k(r,l)}}}let ue="wards";function lo(s){return`<p>${s.properties.name}</p>`}function io(s){let e=encodeURIComponent(s.detail.properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function ao(s,e,n){let t;W(s,Y,l=>n(2,t=l));let r=V.wards,o=`${ue}-outline`;ve(t,ue,`https://atip.uk/layers/v1/${ue}.pmtiles`),Ae(t,{id:ue,source:ue,sourceLayer:ue,color:r,opacity:ge(.5,.1)}),ye(t,{id:o,source:ue,sourceLayer:ue,color:r,width:2.5});let i=!1;function u(l){i=l,n(0,i)}return s.$$.update=()=>{s.$$.dirty&5&&t.getLayer(o)&&t.setLayoutProperty(o,"visibility",i?"visible":"none")},[i,r,t,u]}class co extends R{constructor(e){super(),G(this,e,ao,oo,H,{})}}var J=(s,e,n)=>new Promise((t,r)=>{var o=l=>{try{u(n.next(l))}catch(f){r(f)}},i=l=>{try{u(n.throw(l))}catch(f){r(f)}},u=l=>l.done?t(l.value):Promise.resolve(l.value).then(o,i);u((n=n.apply(s,e)).next())}),ee=Uint8Array,Pe=Uint16Array,fo=Int32Array,Ft=new ee([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),jt=new ee([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),uo=new ee([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Rt=function(s,e){for(var n=new Pe(31),t=0;t<31;++t)n[t]=e+=1<<s[t-1];for(var r=new fo(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return{b:n,r}},Gt=Rt(Ft,2),Ht=Gt.b,$o=Gt.r;Ht[28]=258,$o[258]=28;var po=Rt(jt,0),mo=po.b,et=new Pe(32768);for(I=0;I<32768;++I)me=(I&43690)>>1|(I&21845)<<1,me=(me&52428)>>2|(me&13107)<<2,me=(me&61680)>>4|(me&3855)<<4,et[I]=((me&65280)>>8|(me&255)<<8)>>1;var me,I,Re=function(s,e,n){for(var t=s.length,r=0,o=new Pe(e);r<t;++r)s[r]&&++o[s[r]-1];var i=new Pe(e);for(r=1;r<e;++r)i[r]=i[r-1]+o[r-1]<<1;var u;if(n){u=new Pe(1<<e);var l=15-e;for(r=0;r<t;++r)if(s[r])for(var f=r<<4|s[r],a=e-s[r],c=i[s[r]-1]++<<a,$=c|(1<<a)-1;c<=$;++c)u[et[c]>>l]=f}else for(u=new Pe(t),r=0;r<t;++r)s[r]&&(u[r]=et[i[s[r]-1]++]>>15-s[r]);return u},Ge=new ee(288);for(I=0;I<144;++I)Ge[I]=8;var I;for(I=144;I<256;++I)Ge[I]=9;var I;for(I=256;I<280;++I)Ge[I]=7;var I;for(I=280;I<288;++I)Ge[I]=8;var I,Vt=new ee(32);for(I=0;I<32;++I)Vt[I]=5;var I,ho=Re(Ge,9,1),go=Re(Vt,5,1),Je=function(s){for(var e=s[0],n=1;n<s.length;++n)s[n]>e&&(e=s[n]);return e},oe=function(s,e,n){var t=e/8|0;return(s[t]|s[t+1]<<8)>>(e&7)&n},Xe=function(s,e){var n=e/8|0;return(s[n]|s[n+1]<<8|s[n+2]<<16)>>(e&7)},_o=function(s){return(s+7)/8|0},wo=function(s,e,n){(e==null||e<0)&&(e=0),(n==null||n>s.length)&&(n=s.length);var t=new ee(n-e);return t.set(s.subarray(e,n)),t},ko=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Q=function(s,e,n){var t=new Error(e||ko[s]);if(t.code=s,Error.captureStackTrace&&Error.captureStackTrace(t,Q),!n)throw t;return t},it=function(s,e,n,t){var r=s.length,o=t?t.length:0;if(!r||e.f&&!e.l)return n||new ee(0);var i=!n||e.i!=2,u=e.i;n||(n=new ee(r*3));var l=function(ft){var ut=n.length;if(ft>ut){var $t=new ee(Math.max(ut*2,ft));$t.set(n),n=$t}},f=e.f||0,a=e.p||0,c=e.b||0,$=e.l,h=e.d,v=e.m,y=e.n,C=r*8;do{if(!$){f=oe(s,a,1);var L=oe(s,a+1,3);if(a+=3,L)if(L==1)$=ho,h=go,v=9,y=5;else if(L==2){var N=oe(s,a,31)+257,x=oe(s,a+10,15)+4,B=N+oe(s,a+5,31)+1;a+=14;for(var D=new ee(B),E=new ee(19),P=0;P<x;++P)E[uo[P]]=oe(s,a+P*3,7);a+=x*3;for(var F=Je(E),_e=(1<<F)-1,Le=Re(E,F,1),P=0;P<B;){var Ee=Le[oe(s,a,_e)];a+=Ee&15;var T=Ee>>4;if(T<16)D[P++]=T;else{var pe=0,Ce=0;for(T==16?(Ce=3+oe(s,a,3),a+=2,pe=D[P-1]):T==17?(Ce=3+oe(s,a,7),a+=3):T==18&&(Ce=11+oe(s,a,127),a+=7);Ce--;)D[P++]=pe}}var ze=D.subarray(0,N),se=D.subarray(N);v=Je(ze),y=Je(se),$=Re(ze,v,1),h=Re(se,y,1)}else Q(1);else{var T=_o(a)+4,U=s[T-4]|s[T-3]<<8,O=T+U;if(O>r){u&&Q(0);break}i&&l(c+U),n.set(s.subarray(T,O),c),e.b=c+=U,e.p=a=O*8,e.f=f;continue}if(a>C){u&&Q(0);break}}i&&l(c+131072);for(var Qt=(1<<v)-1,en=(1<<y)-1,Ze=a;;Ze=a){var pe=$[Xe(s,a)&Qt],Ne=pe>>4;if(a+=pe&15,a>C){u&&Q(0);break}if(pe||Q(2),Ne<256)n[c++]=Ne;else if(Ne==256){Ze=a,$=null;break}else{var at=Ne-254;if(Ne>264){var P=Ne-257,Ie=Ft[P];at=oe(s,a,(1<<Ie)-1)+Ht[P],a+=Ie}var qe=h[Xe(s,a)&en],Ke=qe>>4;qe||Q(3),a+=qe&15;var se=mo[Ke];if(Ke>3){var Ie=jt[Ke];se+=Xe(s,a)&(1<<Ie)-1,a+=Ie}if(a>C){u&&Q(0);break}i&&l(c+131072);var We=c+at;if(c<se){var ct=o-se,tn=Math.min(se,We);for(ct+c<0&&Q(3);c<tn;++c)n[c]=t[ct+c]}for(;c<We;c+=4)n[c]=n[c-se],n[c+1]=n[c+1-se],n[c+2]=n[c+2-se],n[c+3]=n[c+3-se];c=We}}e.l=$,e.p=Ze,e.b=c,e.f=f,$&&(f=1,e.m=v,e.d=h,e.n=y)}while(!f);return c==n.length?n:wo(n,0,c)},bo=new ee(0),vo=function(s){(s[0]!=31||s[1]!=139||s[2]!=8)&&Q(6,"invalid gzip data");var e=s[3],n=10;e&4&&(n+=(s[10]|s[11]<<8)+2);for(var t=(e>>3&1)+(e>>4&1);t>0;t-=!s[n++]);return n+(e&2)},yo=function(s){var e=s.length;return(s[e-4]|s[e-3]<<8|s[e-2]<<16|s[e-1]<<24)>>>0},Lo=function(s,e){return((s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31)&&Q(6,"invalid zlib data"),(s[1]>>5&1)==+!e&&Q(6,"invalid zlib data: "+(s[1]&32?"need":"unexpected")+" dictionary"),(s[1]>>3&4)+2};function Co(s,e){return it(s,{i:2},e&&e.out,e&&e.dictionary)}function So(s,e){var n=vo(s);return n+8>s.length&&Q(6,"invalid gzip data"),it(s.subarray(n,-8),{i:2},e&&e.out||new ee(yo(s)),e&&e.dictionary)}function To(s,e){return it(s.subarray(Lo(s,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function tt(s,e){return s[0]==31&&s[1]==139&&s[2]==8?So(s,e):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?Co(s,e):To(s,e)}var Do=typeof TextDecoder<"u"&&new TextDecoder,Oo=0;try{Do.decode(bo,{stream:!0}),Oo=1}catch{}var Zt=(s,e)=>s*Math.pow(2,e),Fe=(s,e)=>Math.floor(s/Math.pow(2,e)),Ve=(s,e)=>Zt(s.getUint16(e+1,!0),8)+s.getUint8(e),qt=(s,e)=>Zt(s.getUint32(e+2,!0),16)+s.getUint16(e,!0),Ao=(s,e,n,t,r)=>{if(s!=t.getUint8(r))return s-t.getUint8(r);const o=Ve(t,r+1);if(e!=o)return e-o;const i=Ve(t,r+4);return n!=i?n-i:0},No=(s,e,n,t)=>{const r=Kt(s,e|128,n,t);return r?{z:e,x:n,y:t,offset:r[0],length:r[1],is_dir:!0}:null},yt=(s,e,n,t)=>{const r=Kt(s,e,n,t);return r?{z:e,x:n,y:t,offset:r[0],length:r[1],is_dir:!1}:null},Kt=(s,e,n,t)=>{let r=0,o=s.byteLength/17-1;for(;r<=o;){const i=o+r>>1,u=Ao(e,n,t,s,i*17);if(u>0)r=i+1;else if(u<0)o=i-1;else return[qt(s,i*17+7),s.getUint32(i*17+13,!0)]}return null},Mo=(s,e)=>s.is_dir&&!e.is_dir?1:!s.is_dir&&e.is_dir?-1:s.z!==e.z?s.z-e.z:s.x!==e.x?s.x-e.x:s.y-e.y,Wt=(s,e)=>{const n=s.getUint8(e*17);return{z:n&127,x:Ve(s,e*17+1),y:Ve(s,e*17+4),offset:qt(s,e*17+7),length:s.getUint32(e*17+13,!0),is_dir:n>>7===1}},Lt=s=>{const e=[],n=new DataView(s);for(let t=0;t<n.byteLength/17;t++)e.push(Wt(n,t));return Uo(e)},Uo=s=>{s.sort(Mo);const e=new ArrayBuffer(17*s.length),n=new Uint8Array(e);for(let t=0;t<s.length;t++){const r=s[t];let o=r.z;r.is_dir&&(o=o|128),n[t*17]=o,n[t*17+1]=r.x&255,n[t*17+2]=r.x>>8&255,n[t*17+3]=r.x>>16&255,n[t*17+4]=r.y&255,n[t*17+5]=r.y>>8&255,n[t*17+6]=r.y>>16&255,n[t*17+7]=r.offset&255,n[t*17+8]=Fe(r.offset,8)&255,n[t*17+9]=Fe(r.offset,16)&255,n[t*17+10]=Fe(r.offset,24)&255,n[t*17+11]=Fe(r.offset,32)&255,n[t*17+12]=Fe(r.offset,48)&255,n[t*17+13]=r.length&255,n[t*17+14]=r.length>>8&255,n[t*17+15]=r.length>>16&255,n[t*17+16]=r.length>>24&255}return e},Po=(s,e)=>{if(s.byteLength<17)return null;const n=s.byteLength/17,t=Wt(s,n-1);if(t.is_dir){const r=t.z,o=e.z-r,i=Math.trunc(e.x/(1<<o)),u=Math.trunc(e.y/(1<<o));return{z:r,x:i,y:u}}return null};function Bo(s){return J(this,null,function*(){const e=yield s.getBytes(0,512e3),n=new DataView(e.data),t=n.getUint32(4,!0),r=n.getUint16(8,!0),o=new TextDecoder("utf-8"),i=JSON.parse(o.decode(new DataView(e.data,10,t)));let u=0;i.compression==="gzip"&&(u=2);let l=0;"minzoom"in i&&(l=+i.minzoom);let f=0;"maxzoom"in i&&(f=+i.maxzoom);let a=0,c=0,$=0,h=-180,v=-85,y=180,C=85;if(i.bounds){const T=i.bounds.split(",");h=+T[0],v=+T[1],y=+T[2],C=+T[3]}if(i.center){const T=i.center.split(",");a=+T[0],c=+T[1],$=+T[2]}return{specVersion:n.getUint16(2,!0),rootDirectoryOffset:10+t,rootDirectoryLength:r*17,jsonMetadataOffset:10,jsonMetadataLength:t,leafDirectoryOffset:0,leafDirectoryLength:void 0,tileDataOffset:0,tileDataLength:void 0,numAddressedTiles:0,numTileEntries:0,numTileContents:0,clustered:!1,internalCompression:1,tileCompression:u,tileType:1,minZoom:l,maxZoom:f,minLon:h,minLat:v,maxLon:y,maxLat:C,centerZoom:$,centerLon:a,centerLat:c,etag:e.etag}})}function xo(s,e,n,t,r,o,i){return J(this,null,function*(){let u=yield n.getArrayBuffer(e,s.rootDirectoryOffset,s.rootDirectoryLength,s);s.specVersion===1&&(u=Lt(u));const l=yt(new DataView(u),t,r,o);if(l){let c=(yield e.getBytes(l.offset,l.length,i)).data;const $=new DataView(c);return $.getUint8(0)==31&&$.getUint8(1)==139&&(c=tt(new Uint8Array(c))),{data:c}}const f=Po(new DataView(u),{z:t,x:r,y:o});if(f){const a=No(new DataView(u),f.z,f.x,f.y);if(a){let c=yield n.getArrayBuffer(e,a.offset,a.length,s);s.specVersion===1&&(c=Lt(c));const $=yt(new DataView(c),t,r,o);if($){let v=(yield e.getBytes($.offset,$.length,i)).data;const y=new DataView(v);return y.getUint8(0)==31&&y.getUint8(1)==139&&(v=tt(new Uint8Array(v))),{data:v}}}}})}var Jt={getHeader:Bo,getZxy:xo},Eo=class{constructor(){this.tile=(s,e)=>{if(s.type=="json"){const n=s.url.substr(10);let t=this.tiles.get(n);return t||(t=new Ct(n),this.tiles.set(n,t)),t.getHeader().then(r=>{const o={tiles:[s.url+"/{z}/{x}/{y}"],minzoom:r.minZoom,maxzoom:r.maxZoom,bounds:[r.minLon,r.minLat,r.maxLon,r.maxLat]};e(null,o,null,null)}).catch(r=>{e(r,null,null,null)}),{cancel:()=>{}}}else{const n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),t=s.url.match(n);if(!t)throw new Error("Invalid PMTiles protocol URL");const r=t[1];let o=this.tiles.get(r);o||(o=new Ct(r),this.tiles.set(r,o));const i=t[2],u=t[3],l=t[4],f=new AbortController,a=f.signal;let c=()=>{f.abort()};return o.getHeader().then($=>{o.getZxy(+i,+u,+l,a).then(h=>{h?e(null,new Uint8Array(h.data),h.cacheControl,h.expires):$.tileType==1?e(null,new Uint8Array,null,null):e(null,null,null,null)}).catch(h=>{h.name!=="AbortError"&&e(h,null,null,null)})}),{cancel:c}}},this.tiles=new Map}add(s){this.tiles.set(s.source.getKey(),s)}get(s){return this.tiles.get(s)}};function Me(s,e){return(e>>>0)*4294967296+(s>>>0)}function zo(s,e){const n=e.buf;let t,r;if(r=n[e.pos++],t=(r&112)>>4,r<128||(r=n[e.pos++],t|=(r&127)<<3,r<128)||(r=n[e.pos++],t|=(r&127)<<10,r<128)||(r=n[e.pos++],t|=(r&127)<<17,r<128)||(r=n[e.pos++],t|=(r&127)<<24,r<128)||(r=n[e.pos++],t|=(r&1)<<31,r<128))return Me(s,t);throw new Error("Expected varint not more than 10 bytes")}function je(s){const e=s.buf;let n,t;return t=e[s.pos++],n=t&127,t<128||(t=e[s.pos++],n|=(t&127)<<7,t<128)||(t=e[s.pos++],n|=(t&127)<<14,t<128)||(t=e[s.pos++],n|=(t&127)<<21,t<128)?n:(t=e[s.pos],n|=(t&15)<<28,zo(n,s))}function Io(s,e,n,t){if(t==0){n==1&&(e[0]=s-1-e[0],e[1]=s-1-e[1]);const r=e[0];e[0]=e[1],e[1]=r}}var Fo=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function jo(s,e,n){if(s>26)throw Error("Tile zoom level exceeds max safe number limit (26)");if(e>Math.pow(2,s)-1||n>Math.pow(2,s)-1)throw Error("tile x/y outside zoom level bounds");const t=Fo[s],r=Math.pow(2,s);let o=0,i=0,u=0;const l=[e,n];let f=r/2;for(;f>0;)o=(l[0]&f)>0?1:0,i=(l[1]&f)>0?1:0,u+=f*f*(3*o^i),Io(f,l,o,i),f=f/2;return t+u}function Xt(s,e){return J(this,null,function*(){if(e===1||e===0)return s;if(e===2){if(typeof globalThis.DecompressionStream>"u")return tt(new Uint8Array(s));{let t=new Response(s).body.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(t).arrayBuffer()}}else throw Error("Compression method not supported")})}var Ro=127;function Go(s,e){let n=0,t=s.length-1;for(;n<=t;){const r=t+n>>1,o=e-s[r].tileId;if(o>0)n=r+1;else if(o<0)t=r-1;else return s[r]}return t>=0&&(s[t].runLength===0||e-s[t].tileId<s[t].runLength)?s[t]:null}var Ho=class{constructor(s){this.url=s}getKey(){return this.url}getBytes(s,e,n){return J(this,null,function*(){let t;n||(t=new AbortController,n=t.signal);let r=yield fetch(this.url,{signal:n,headers:{Range:"bytes="+s+"-"+(s+e-1)}});if(r.status===416&&s===0){const u=r.headers.get("Content-Range");if(!u||!u.startsWith("bytes */"))throw Error("Missing content-length on 416 response");const l=+u.substr(8);r=yield fetch(this.url,{signal:n,headers:{Range:"bytes=0-"+(l-1)}})}if(r.status>=300)throw Error("Bad response code: "+r.status);const o=r.headers.get("Content-Length");if(r.status===200&&(!o||+o>e))throw t&&t.abort(),Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield r.arrayBuffer(),etag:r.headers.get("ETag")||void 0,cacheControl:r.headers.get("Cache-Control")||void 0,expires:r.headers.get("Expires")||void 0}})}};function le(s,e){const n=s.getUint32(e+4,!0),t=s.getUint32(e+0,!0);return n*Math.pow(2,32)+t}function Vo(s,e){const n=new DataView(s),t=n.getUint8(7);if(t>3)throw Error(`Archive is spec version ${t} but this library supports up to spec version 3`);return{specVersion:t,rootDirectoryOffset:le(n,8),rootDirectoryLength:le(n,16),jsonMetadataOffset:le(n,24),jsonMetadataLength:le(n,32),leafDirectoryOffset:le(n,40),leafDirectoryLength:le(n,48),tileDataOffset:le(n,56),tileDataLength:le(n,64),numAddressedTiles:le(n,72),numTileEntries:le(n,80),numTileContents:le(n,88),clustered:n.getUint8(96)===1,internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:e}}function Yt(s){const e={buf:new Uint8Array(s),pos:0},n=je(e),t=[];let r=0;for(let o=0;o<n;o++){const i=je(e);t.push({tileId:r+i,offset:0,length:0,runLength:1}),r+=i}for(let o=0;o<n;o++)t[o].runLength=je(e);for(let o=0;o<n;o++)t[o].length=je(e);for(let o=0;o<n;o++){const i=je(e);i===0&&o>0?t[o].offset=t[o-1].offset+t[o-1].length:t[o].offset=i-1}return t}function Zo(s){const e=new DataView(s);return e.getUint16(2,!0)===2?(console.warn("PMTiles spec version 2 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),2):e.getUint16(2,!0)===1?(console.warn("PMTiles spec version 1 has been deprecated; please see github.com/protomaps/PMTiles for tools to upgrade"),1):3}var Be=class extends Error{};function qo(s,e,n,t){return J(this,null,function*(){const r=yield s.getBytes(0,16384);if(new DataView(r.data).getUint16(0,!0)!==19792)throw new Error("Wrong magic number for PMTiles archive");if(Zo(r.data)<3)return[yield Jt.getHeader(s)];const i=r.data.slice(0,Ro);let u=r.etag;t&&r.etag!=t&&(console.warn("ETag conflict detected; your HTTP server might not support content-based ETag headers. ETags disabled for "+s.getKey()),u=void 0);const l=Vo(i,u);if(n){const f=r.data.slice(l.rootDirectoryOffset,l.rootDirectoryOffset+l.rootDirectoryLength),a=s.getKey()+"|"+(l.etag||"")+"|"+l.rootDirectoryOffset+"|"+l.rootDirectoryLength,c=Yt(yield e(f,l.internalCompression));return[l,[a,c.length,c]]}return[l,void 0]})}function Ko(s,e,n,t,r){return J(this,null,function*(){const o=yield s.getBytes(n,t);if(r.etag&&r.etag!==o.etag)throw new Be(o.etag);const i=yield e(o.data,r.internalCompression),u=Yt(i);if(u.length===0)throw new Error("Empty directory is invalid");return u})}var Wo=class{constructor(s=100,e=!0,n=Xt){this.cache=new Map,this.maxCacheEntries=s,this.counter=1,this.prefetch=e,this.decompress=n}getHeader(s,e){return J(this,null,function*(){const n=s.getKey();if(this.cache.has(n))return this.cache.get(n).lastUsed=this.counter++,yield this.cache.get(n).data;const t=new Promise((r,o)=>{qo(s,this.decompress,this.prefetch,e).then(i=>{i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:Promise.resolve(i[1][2])}),r(i[0]),this.prune()}).catch(i=>{o(i)})});return this.cache.set(n,{lastUsed:this.counter++,data:t}),t})}getDirectory(s,e,n,t){return J(this,null,function*(){const r=s.getKey()+"|"+(t.etag||"")+"|"+e+"|"+n;if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const o=new Promise((i,u)=>{Ko(s,this.decompress,e,n,t).then(l=>{i(l),this.prune()}).catch(l=>{u(l)})});return this.cache.set(r,{lastUsed:this.counter++,data:o}),o})}getArrayBuffer(s,e,n,t){return J(this,null,function*(){const r=s.getKey()+"|"+(t.etag||"")+"|"+e+"|"+n;if(this.cache.has(r))return this.cache.get(r).lastUsed=this.counter++,yield this.cache.get(r).data;const o=new Promise((i,u)=>{s.getBytes(e,n).then(l=>{if(t.etag&&t.etag!==l.etag)throw new Be(l.etag);i(l.data),this.cache.has(r),this.prune()}).catch(l=>{u(l)})});return this.cache.set(r,{lastUsed:this.counter++,data:o}),o})}prune(){if(this.cache.size>=this.maxCacheEntries){let s=1/0,e;this.cache.forEach((n,t)=>{n.lastUsed<s&&(s=n.lastUsed,e=t)}),e&&this.cache.delete(e)}}invalidate(s,e){return J(this,null,function*(){this.cache.delete(s.getKey()),yield this.getHeader(s,e)})}},Ct=class{constructor(s,e,n){typeof s=="string"?this.source=new Ho(s):this.source=s,n?this.decompress=n:this.decompress=Xt,e?this.cache=e:this.cache=new Wo}getHeader(){return J(this,null,function*(){return yield this.cache.getHeader(this.source)})}getZxyAttempt(s,e,n,t){return J(this,null,function*(){const r=jo(s,e,n),o=yield this.cache.getHeader(this.source);if(o.specVersion<3)return Jt.getZxy(o,this.source,this.cache,s,e,n,t);if(s<o.minZoom||s>o.maxZoom)return;let i=o.rootDirectoryOffset,u=o.rootDirectoryLength;for(let l=0;l<=3;l++){const f=yield this.cache.getDirectory(this.source,i,u,o),a=Go(f,r);if(a)if(a.runLength>0){const c=yield this.source.getBytes(o.tileDataOffset+a.offset,a.length,t);if(o.etag&&o.etag!==c.etag)throw new Be(c.etag);return{data:yield this.decompress(c.data,o.tileCompression),cacheControl:c.cacheControl,expires:c.expires}}else i=o.leafDirectoryOffset+a.offset,u=a.length;else return}throw Error("Maximum directory depth exceeded")})}getZxy(s,e,n,t){return J(this,null,function*(){try{return yield this.getZxyAttempt(s,e,n,t)}catch(r){if(r instanceof Be)return this.cache.invalidate(this.source,r.message),yield this.getZxyAttempt(s,e,n,t);throw r}})}getMetadataAttempt(){return J(this,null,function*(){const s=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(s.jsonMetadataOffset,s.jsonMetadataLength);if(s.etag&&s.etag!==e.etag)throw new Be(e.etag);const n=yield this.decompress(e.data,s.internalCompression),t=new TextDecoder("utf-8");return JSON.parse(t.decode(n))})}getMetadata(){return J(this,null,function*(){try{return yield this.getMetadataAttempt()}catch(s){if(s instanceof Be)return this.cache.invalidate(this.source,s.message),yield this.getMetadataAttempt();throw s}})}};function Jo(s){return rt(()=>{let e=new Eo;mt.addProtocol("pmtiles",e.tile)}),zt(()=>{mt.removeProtocol("pmtiles")}),[]}class Xo extends R{constructor(e){super(),G(this,e,Jo,null,H,{})}}function St(s,e,n){const t=s.slice();return t[15]=e[n],t}function Yo(s){let e;return{c(){e=b("Home")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Tt(s){let e,n;return e=new un({props:{errorMessage:s[1]}}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.errorMessage=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Dt(s){let e,n,t,r;function o(l){s[10](l)}function i(l){s[11](l)}let u={schemes:s[2]};return s[3]!==void 0&&(u.schemesToBeShown=s[3]),s[4]!==void 0&&(u.filterText=s[4]),e=new Sr({props:u}),Z.push(()=>q(e,"schemesToBeShown",o)),Z.push(()=>q(e,"filterText",i)),{c(){d(e.$$.fragment)},m(l,f){w(e,l,f),r=!0},p(l,f){const a={};f&4&&(a.schemes=l[2]),!n&&f&8&&(n=!0,a.schemesToBeShown=l[3],K(()=>n=!1)),!t&&f&16&&(t=!0,a.filterText=l[4],K(()=>t=!1)),e.$set(a)},i(l){r||(g(e.$$.fragment,l),r=!0)},o(l){_(e.$$.fragment,l),r=!1},d(l){k(e,l)}}}function Ot(s){let e,n,t=Ue(s[2].values()),r=[];for(let i=0;i<t.length;i+=1)r[i]=Nt(St(s,t,i));const o=i=>_(r[i],1,1,()=>{r[i]=null});return{c(){e=M("ul");for(let i=0;i<r.length;i+=1)r[i].c()},m(i,u){p(i,e,u);for(let l=0;l<r.length;l+=1)r[l]&&r[l].m(e,null);n=!0},p(i,u){if(u&13){t=Ue(i[2].values());let l;for(l=0;l<t.length;l+=1){const f=St(i,t,l);r[l]?(r[l].p(f,u),g(r[l],1)):(r[l]=Nt(f),r[l].c(),g(r[l],1),r[l].m(e,null))}for(ke(),l=t.length;l<r.length;l+=1)o(l);be()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)g(r[u]);n=!0}},o(i){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(i){i&&m(e),Ye(r,i)}}}function At(s){let e,n;return e=new Rs({props:{scheme:s[15],authorityNames:s[0]}}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&4&&(o.scheme=t[15]),r&1&&(o.authorityNames=t[0]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Nt(s){let e=s[3].has(s[15].scheme_reference),n,t,r=e&&At(s);return{c(){r&&r.c(),n=$n()},m(o,i){r&&r.m(o,i),p(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[15].scheme_reference)),e?r?(r.p(o,i),i&12&&g(r,1)):(r=At(o),r.c(),g(r,1),r.m(n.parentNode,n)):r&&(ke(),_(r,1,1,()=>{r=null}),be())},i(o){t||(g(r),t=!0)},o(o){_(r),t=!1},d(o){o&&m(n),r&&r.d(o)}}}function Qo(s){let e,n,t,r,o,i,u,l,f,a,c,$,h;n=new He({props:{$$slots:{default:[Yo]},$$scope:{ctx:s}}}),n.$on("click",s[9]),u=new gn({props:{boundaryGeojson:s[5]}});let v=s[1]&&Tt(s);a=new on({props:{label:"Load from GeoJSON",id:"load-geojson",loadFile:s[7]}});let y=s[2].size>0&&Dt(s),C=s[0]&&Ot(s);return{c(){e=M("div"),d(n.$$.fragment),t=A(),r=M("div"),o=M("h1"),o.textContent="Browse schemes",i=A(),d(u.$$.fragment),l=A(),v&&v.c(),f=A(),d(a.$$.fragment),c=A(),y&&y.c(),$=A(),C&&C.c(),he(r,"display","flex"),he(r,"justify-content","space-between"),j(e,"slot","sidebar"),j(e,"class","govuk-prose")},m(L,T){p(L,e,T),w(n,e,null),S(e,t),S(e,r),S(r,o),S(r,i),w(u,r,null),S(e,l),v&&v.m(e,null),S(e,f),w(a,e,null),S(e,c),y&&y.m(e,null),S(e,$),C&&C.m(e,null),h=!0},p(L,T){const U={};T&262144&&(U.$$scope={dirty:T,ctx:L}),n.$set(U);const O={};T&32&&(O.boundaryGeojson=L[5]),u.$set(O),L[1]?v?(v.p(L,T),T&2&&g(v,1)):(v=Tt(L),v.c(),g(v,1),v.m(e,f)):v&&(ke(),_(v,1,1,()=>{v=null}),be()),L[2].size>0?y?(y.p(L,T),T&4&&g(y,1)):(y=Dt(L),y.c(),g(y,1),y.m(e,$)):y&&(ke(),_(y,1,1,()=>{y=null}),be()),L[0]?C?(C.p(L,T),T&1&&g(C,1)):(C=Ot(L),C.c(),g(C,1),C.m(e,null)):C&&(ke(),_(C,1,1,()=>{C=null}),be())},i(L){h||(g(n.$$.fragment,L),g(u.$$.fragment,L),g(v),g(a.$$.fragment,L),g(y),g(C),h=!0)},o(L){_(n.$$.fragment,L),_(u.$$.fragment,L),_(v),_(a.$$.fragment,L),_(y),_(C),h=!1},d(L){L&&m(e),k(n),k(u),v&&v.d(),k(a),y&&y.d(),C&&C.d()}}}function el(s){let e,n,t,r,o,i,u,l;return e=new qs({}),t=new xr({}),o=new Qs({}),u=new xs({}),{c(){d(e.$$.fragment),n=A(),d(t.$$.fragment),r=A(),d(o.$$.fragment),i=A(),d(u.$$.fragment)},m(f,a){w(e,f,a),p(f,n,a),w(t,f,a),p(f,r,a),w(o,f,a),p(f,i,a),w(u,f,a),l=!0},i(f){l||(g(e.$$.fragment,f),g(t.$$.fragment,f),g(o.$$.fragment,f),g(u.$$.fragment,f),l=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(o.$$.fragment,f),_(u.$$.fragment,f),l=!1},d(f){f&&(m(n),m(r),m(i)),k(e,f),k(t,f),k(o,f),k(u,f)}}}function tl(s){let e,n;return e=new st({props:{small:!0,$$slots:{default:[el]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&262144&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function nl(s){let e,n,t,r,o,i;return e=new ms({}),t=new Dn({}),o=new gr({}),{c(){d(e.$$.fragment),n=A(),d(t.$$.fragment),r=A(),d(o.$$.fragment)},m(u,l){w(e,u,l),p(u,n,l),w(t,u,l),p(u,r,l),w(o,u,l),i=!0},i(u){i||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),i=!1},d(u){u&&(m(n),m(r)),k(e,u),k(t,u),k(o,u)}}}function rl(s){let e,n;return e=new st({props:{small:!0,$$slots:{default:[nl]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&262144&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function sl(s){let e,n,t,r,o,i,u,l,f,a;return e=new Ls({}),t=new co({}),o=new ir({}),u=new Zr({}),f=new os({}),{c(){d(e.$$.fragment),n=A(),d(t.$$.fragment),r=A(),d(o.$$.fragment),i=A(),d(u.$$.fragment),l=A(),d(f.$$.fragment)},m(c,$){w(e,c,$),p(c,n,$),w(t,c,$),p(c,r,$),w(o,c,$),p(c,i,$),w(u,c,$),p(c,l,$),w(f,c,$),a=!0},i(c){a||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(f.$$.fragment,c),a=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(f.$$.fragment,c),a=!1},d(c){c&&(m(n),m(r),m(i),m(l)),k(e,c),k(t,c),k(o,c),k(u,c),k(f,c)}}}function ol(s){let e,n;return e=new st({props:{small:!0,$$slots:{default:[sl]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&262144&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ll(s){let e,n;return e=new Xn({}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function il(s){let e,n,t,r,o,i,u,l,f,a;return e=new Oe({props:{label:"Trip generators",$$slots:{default:[tl]},$$scope:{ctx:s}}}),t=new Oe({props:{label:"Existing infrastructure",$$slots:{default:[rl]},$$scope:{ctx:s}}}),o=new Oe({props:{label:"Boundaries",$$slots:{default:[ol]},$$scope:{ctx:s}}}),u=new Oe({props:{label:"Census",$$slots:{default:[ll]},$$scope:{ctx:s}}}),f=new wn({props:{style:s[6]}}),{c(){d(e.$$.fragment),n=A(),d(t.$$.fragment),r=A(),d(o.$$.fragment),i=A(),d(u.$$.fragment),l=A(),d(f.$$.fragment)},m(c,$){w(e,c,$),p(c,n,$),w(t,c,$),p(c,r,$),w(o,c,$),p(c,i,$),w(u,c,$),p(c,l,$),w(f,c,$),a=!0},p(c,$){const h={};$&262144&&(h.$$scope={dirty:$,ctx:c}),e.$set(h);const v={};$&262144&&(v.$$scope={dirty:$,ctx:c}),t.$set(v);const y={};$&262144&&(y.$$scope={dirty:$,ctx:c}),o.$set(y);const C={};$&262144&&(C.$$scope={dirty:$,ctx:c}),u.$set(C)},i(c){a||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(f.$$.fragment,c),a=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(f.$$.fragment,c),a=!1},d(c){c&&(m(n),m(r),m(i),m(l)),k(e,c),k(t,c),k(o,c),k(u,c),k(f,c)}}}function al(s){let e,n,t,r,o,i,u,l,f,a,c;return e=new dn({props:{colorInterventions:It("v1")}}),t=new X({props:{layer:"interventions-points",tooltip:s[8],clickable:!1}}),o=new X({props:{layer:"interventions-lines",tooltip:s[8],clickable:!1}}),u=new X({props:{layer:"interventions-polygons",tooltip:s[8],clickable:!1}}),a=new Oe({props:{label:"Layers",open:!0,$$slots:{default:[il]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment),n=A(),d(t.$$.fragment),r=A(),d(o.$$.fragment),i=A(),d(u.$$.fragment),l=A(),f=M("div"),d(a.$$.fragment),j(f,"class","top-right svelte-12h3i77")},m($,h){w(e,$,h),p($,n,h),w(t,$,h),p($,r,h),w(o,$,h),p($,i,h),w(u,$,h),p($,l,h),p($,f,h),w(a,f,null),c=!0},p($,h){const v={};h&262144&&(v.$$scope={dirty:h,ctx:$}),a.$set(v)},i($){c||(g(e.$$.fragment,$),g(t.$$.fragment,$),g(o.$$.fragment,$),g(u.$$.fragment,$),g(a.$$.fragment,$),c=!0)},o($){_(e.$$.fragment,$),_(t.$$.fragment,$),_(o.$$.fragment,$),_(u.$$.fragment,$),_(a.$$.fragment,$),c=!1},d($){$&&(m(n),m(r),m(i),m(l),m(f)),k(e,$),k(t,$),k(o,$),k(u,$),k(a)}}}function cl(s){let e,n,t,r,o;return n=new Xo({}),r=new _n({props:{style:s[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[al]},$$scope:{ctx:s}}}),{c(){e=M("div"),d(n.$$.fragment),t=A(),d(r.$$.fragment),j(e,"slot","main")},m(i,u){p(i,e,u),w(n,e,null),S(e,t),w(r,e,null),o=!0},p(i,u){const l={};u&262144&&(l.$$scope={dirty:u,ctx:i}),r.$set(l)},i(i){o||(g(n.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){_(n.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&m(e),k(n),k(r)}}}function fl(s){let e,n;return e=new hn({props:{$$slots:{main:[cl],sidebar:[Qo]},$$scope:{ctx:s}}}),{c(){d(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,[r]){const o={};r&262207&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ul(s,e,n){let t,r;W(s,Y,T=>n(12,t=T)),W(s,xe,T=>n(5,r=T));let o=null;rt(async()=>{ln();let T=await an();n(0,o=new Set(T.features.map(U=>U.properties.name)))});let u=new URLSearchParams(window.location.search).get("style")||"dataviz",l="",f=new Map,a=new Set,c="";zt(()=>{xe.set(cn())});function $(T){try{let U=JSON.parse(T);n(2,f=_r(U)),xe.set(U),n(1,l=""),t==null||t.fitBounds(Et(U),{padding:20,animate:!1})}catch(U){n(1,l=`Couldn't load schemes from a file: ${U}`)}}function h(T){let U=T.properties;var O='<div style="max-width: 30vw;">';return O+=`<h2>${v(U.name)} (${U.intervention_type})</h2>`,O+=`<p>Scheme reference: ${U.scheme_reference}</p>`,U.length_meters&&(O+=`<p>Length: ${fn(U.length_meters)}</p>`),U.description&&(O+=`<p>${v(U.description)}</p>`),O+="</div>",O}function v(T){return c?T.replace(new RegExp(c,"gi"),U=>`<mark>${U}</mark>`):T}const y=()=>window.open("index.html");function C(T){a=T,n(3,a)}function L(T){c=T,n(4,c)}return[o,l,f,a,c,r,u,$,h,y,C,L]}class $l extends R{constructor(e){super(),G(this,e,ul,fl,H,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new $l({target:document.getElementById("app")});
