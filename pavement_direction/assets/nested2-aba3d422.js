import{S as Y,i as K,s as J,e as T,j as G,ao as Ce,k as $,a7 as te,p,aU as Xl,b as W,c as V,f as O,h as v,m as w,x as Ze,n as X,t as g,o as d,q as k,O as bt,T as vt,U as wt,V as kt,b2 as Vn,l as h,ab as je,_ as ce,$ as $e,aX as yt,v as b,J as B,Z as Ee,a0 as Dn,a1 as Jl,r as Ae,a2 as Yl,a3 as Kl,a4 as ct,a5 as Zl,a6 as Ql,b3 as Co,Y as Tt,b4 as Xn,b5 as To,G as Ct,aO as yn,aF as Sn,P as x,I as Oe,a as $t,aT as Oo,av as pt,aj as jn,an as nn,u as Rn,F as Cn,w as Ye,b1 as ee,b6 as he,b7 as Le,H as Q,D as qe,W as ne,b8 as ae,ag as fn,N as xl,aZ as xt,b9 as $n,ba as at,R as eo,E as to,bb as Lo,bc as Ao,g as Tn,al as Io,C as No,a$ as Jn,ap as Po,aq as Yn,ar as Kn,as as on,b0 as Zn,L as Mo,d as Fo,M as Eo,z as Do}from"./index-ab57762b.js";import{l as q,d as Ke,a as jo,g as Re,f as Ro,M as Bo,k as dt,h as xe,i as le,R as zo,C as mt,m as Ho,S as qo,B as Go,c as Qn,b as It,Z as Uo,G as Wo}from"./ZoomOutMap-6669f6f0.js";import{P as fe}from"./Popup-6961336d.js";function Vo(l){let e;return{c(){e=T("span"),G(e,"class","svelte-kzgqtg"),Ce(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Ce(e,"background",n[0])},i:te,o:te,d(n){n&&p(e)}}}function Xo(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Pe extends Y{constructor(e){super(),K(this,e,Xo,Vo,J,{color:0})}}const Jo="/atip/pavement_direction/assets/help-d011708a.svg";function Yo(l){let e,n;const t=l[1].default,r=bt(t,l,l[4],null);return{c(){e=T("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&vt(r,t,o,o[4],n?kt(t,o[4],s,null):wt(o[4]),null)},i(o){n||(g(r,o),n=!0)},o(o){d(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function Ko(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[Yo]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new Xl({props:a}),W.push(()=>V(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${Jo}" title="Help" alt="Help"/>`,n=O(),v(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),w(t,f,c),o=!0,s||(u=Ze(e,"click",l[2]),s=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,_.open=f[0],X(()=>r=!1)),t.$set(_)},i(f){o||(g(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),k(t,f),s=!1,u()}}}function Zo(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class me extends Y{constructor(e){super(),K(this,e,Zo,Ko,J,{})}}const Qo=l=>({}),xn=l=>({}),xo=l=>({}),er=l=>({});function es(l){let e,n,t,r,o,s,u,i,a,f,c;const _=l[4].sidebar,m=bt(_,l,l[3],er),y=l[4].main,C=bt(y,l,l[3],xn);return{c(){e=T("div"),n=T("aside"),t=T("div"),m&&m.c(),r=O(),o=T("button"),o.textContent="â†’",u=O(),i=T("main"),C&&C.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(o,"type","button"),G(o,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(n,"class",s=Vn(l[1]?"":"collapsed")+" svelte-1n0etgd"),Ce(n,"--sidebarWidth",l[0]),G(i,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(S,I){$(S,e,I),h(e,n),h(n,t),m&&m.m(t,null),h(n,r),h(n,o),h(e,u),h(e,i),C&&C.m(i,null),a=!0,f||(c=Ze(o,"click",l[2]),f=!0)},p(S,[I]){m&&m.p&&(!a||I&8)&&vt(m,_,S,S[3],a?kt(_,S[3],I,xo):wt(S[3]),er),(!a||I&2&&s!==(s=Vn(S[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(n,"class",s),(!a||I&1)&&Ce(n,"--sidebarWidth",S[0]),C&&C.p&&(!a||I&8)&&vt(C,y,S,S[3],a?kt(y,S[3],I,Qo):wt(S[3]),xn)},i(S){a||(g(m,S),g(C,S),a=!0)},o(S){d(m,S),d(C,S),a=!1},d(S){S&&p(e),m&&m.d(S),C&&C.d(S),f=!1,c()}}}function ts(l,e,n){let{$$slots:t={},$$scope:r}=e,{sidebarWidth:o="25rem"}=e,s=!0;function u(){n(1,s=!s)}return l.$$set=i=>{"sidebarWidth"in i&&n(0,o=i.sidebarWidth),"$$scope"in i&&n(3,r=i.$$scope)},[o,s,u,r,t]}class ns extends Y{constructor(e){super(),K(this,e,ts,es,J,{sidebarWidth:0})}}function tr(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function nr(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Pe({props:{color:l[2]}}),{c(){e=T("li"),v(n.$$.fragment),t=O(),o=b(r),s=O()},m(i,a){$(i,e,a),w(n,e,null),h(e,t),h(e,o),h(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&B(o,r)},i(i){u||(g(n.$$.fragment,i),u=!0)},o(i){d(n.$$.fragment,i),u=!1},d(i){i&&p(e),k(n)}}}function rs(l){let e,n,t=je(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=nr(tr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){e=T("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=je(s[0]);let i;for(i=0;i<t.length;i+=1){const a=tr(s,t,i);r[i]?(r[i].p(a,u),g(r[i],1)):(r[i]=nr(a),r[i].c(),g(r[i],1),r[i].m(e,null))}for(ce(),i=t.length;i<r.length;i+=1)o(i);$e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)g(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),yt(r,s)}}}function ls(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class Bn extends Y{constructor(e){super(),K(this,e,ls,rs,J,{rows:0})}}function rr(l){let e=l[0],n,t,r=lr(l);return{c(){r.c(),n=Ee()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?(ce(),d(r,1,1,te),$e(),r=lr(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function lr(l){let e;const n=l[10].default,t=bt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&vt(t,n,r,r[9],e?kt(n,r[9],o,null):wt(r[9]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function os(l){let e,n,t=l[0]&&rr(l);return{c(){t&&t.c(),e=Ee()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=rr(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function ss(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Dn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=Jl();Ae(l,f,y=>n(8,r=y)),Ae(l,c,y=>n(0,t=y));let _,m=!0;return Yl(()=>{t&&_&&r&&(Kl(f,t,_),ct(c,t=null,t),n(6,_=void 0))}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(ct(c,t=u,t),Zl(r,t,Ql({type:"raster",tiles:i,tileSize:a}),y=>r&&y===t,()=>{t&&(n(6,_=r==null?void 0:r.getSource(t)),n(7,m=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,_=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&_&&(m?n(7,m=!1):_.setTiles(i))},[t,f,c,u,i,a,_,m,r,s,o]}class is extends Y{constructor(e){super(),K(this,e,ss,os,J,{id:3,tiles:4,tileSize:5})}}function as(l){let e;const n=l[16].default,t=bt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&vt(t,n,r,r[24],e?kt(n,r[24],o,null):wt(r[24]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function fs(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[as]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Co({props:o}),W.push(()=>V(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){v(e.$$.fragment)},m(s,u){w(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function us(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Dn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:m=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:I=!1}=e,{hovered:R=null}=e,{eventsIfTopMost:A=!1}=e,{interactive:M=!0}=e;function L(D){R=D,n(0,R)}function P(D){Tt.call(this,l,D)}function E(D){Tt.call(this,l,D)}function N(D){Tt.call(this,l,D)}function j(D){Tt.call(this,l,D)}function U(D){Tt.call(this,l,D)}function H(D){Tt.call(this,l,D)}return l.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,s=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,i=D.beforeId),"beforeLayerType"in D&&n(5,a=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,_=D.filter),"applyToClusters"in D&&n(9,m=D.applyToClusters),"minzoom"in D&&n(10,y=D.minzoom),"maxzoom"in D&&n(11,C=D.maxzoom),"hoverCursor"in D&&n(12,S=D.hoverCursor),"manageHoverState"in D&&n(13,I=D.manageHoverState),"hovered"in D&&n(0,R=D.hovered),"eventsIfTopMost"in D&&n(14,A=D.eventsIfTopMost),"interactive"in D&&n(15,M=D.interactive),"$$scope"in D&&n(24,r=D.$$scope)},[R,o,s,u,i,a,f,c,_,m,y,C,S,I,A,M,t,L,P,E,N,j,U,H,r]}class pn extends Y{constructor(e){super(),K(this,e,us,fs,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function or(l){let e=l[0],n,t,r=sr(l);return{c(){r.c(),n=Ee()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&J(e,e=o[0])?(ce(),d(r,1,1,te),$e(),r=sr(o),r.c(),g(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function sr(l){let e;const n=l[9].default,t=bt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&vt(t,n,r,r[8],e?kt(n,r[8],o,null):wt(r[8]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function cs(l){let e,n,t=l[0]&&or(l);return{c(){t&&t.c(),e=Ee()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&g(t,1)):(t=or(r),t.c(),g(t,1),t.m(e.parentNode,e)):t&&(ce(),d(t,1,1,()=>{t=null}),$e())},i(r){n||(g(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function $s(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Dn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!Xn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new To;Xn.addProtocol("pmtiles",y.tile)}const{map:c,self:_}=Jl();Ae(l,c,y=>n(7,r=y)),Ae(l,_,y=>n(0,t=y));let m;return Yl(()=>{t&&r&&(Kl(c,t,m),ct(_,t=null,t),m=void 0)}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(ct(_,t=u,t),Zl(r,t,Ql({type:"vector",url:i,tiles:a,promoteId:f}),y=>r&&y===t,()=>{t&&(m=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{m=r==null?void 0:r.getSource(u)}))},[t,c,_,u,i,a,f,r,s,o]}class ke extends Y{constructor(e){super(),K(this,e,$s,cs,J,{id:3,url:4,tiles:5,promoteId:6})}}function ir(l,e,n){const t=l.slice();return t[11]=e[n],t[12]=e,t[13]=n,t}function ps(l){let e,n,t;return n=new $t({props:{$$slots:{default:[_s]},$$scope:{ctx:l}}}),n.$on("click",l[9]),{c(){e=T("div"),v(n.$$.fragment)},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&16384&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function ms(l){let e,n,t,r,o,s,u,i,a,f;n=new $t({props:{$$slots:{default:[gs]},$$scope:{ctx:l}}}),n.$on("click",l[4]);let c=l[2]&&ar(l);o=new Re({props:{label:"Help",$$slots:{default:[ds]},$$scope:{ctx:l}}}),u=new Ro({}),u.$on("click",l[3]);let _=je(l[0]),m=[];for(let C=0;C<_.length;C+=1)m[C]=fr(ir(l,_,C));const y=C=>d(m[C],1,1,()=>{m[C]=null});return{c(){e=T("div"),v(n.$$.fragment),t=O(),c&&c.c(),r=O(),v(o.$$.fragment),s=O(),v(u.$$.fragment),i=O();for(let C=0;C<m.length;C+=1)m[C].c();a=Ee()},m(C,S){$(C,e,S),w(n,e,null),$(C,t,S),c&&c.m(C,S),$(C,r,S),w(o,C,S),$(C,s,S),w(u,C,S),$(C,i,S);for(let I=0;I<m.length;I+=1)m[I]&&m[I].m(C,S);$(C,a,S),f=!0},p(C,S){const I={};S&16384&&(I.$$scope={dirty:S,ctx:C}),n.$set(I),C[2]?c?c.p(C,S):(c=ar(C),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null);const R={};if(S&16384&&(R.$$scope={dirty:S,ctx:C}),o.$set(R),S&65){_=je(C[0]);let A;for(A=0;A<_.length;A+=1){const M=ir(C,_,A);m[A]?(m[A].p(M,S),g(m[A],1)):(m[A]=fr(M),m[A].c(),g(m[A],1),m[A].m(a.parentNode,a))}for(ce(),A=_.length;A<m.length;A+=1)y(A);$e()}},i(C){if(!f){g(n.$$.fragment,C),g(o.$$.fragment,C),g(u.$$.fragment,C);for(let S=0;S<_.length;S+=1)g(m[S]);f=!0}},o(C){d(n.$$.fragment,C),d(o.$$.fragment,C),d(u.$$.fragment,C),m=m.filter(Boolean);for(let S=0;S<m.length;S+=1)d(m[S]);f=!1},d(C){C&&(p(e),p(t),p(r),p(s),p(i),p(a)),k(n),c&&c.d(C),k(o,C),k(u,C),yt(m,C)}}}function _s(l){let e;return{c(){e=b("Measure lines")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gs(l){let e;return{c(){e=b("Stop measuring")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ar(l){let e,n,t=l[2].toFixed(2)+"",r,o;return{c(){e=T("p"),n=b("Length: "),r=b(t),o=b(" meters")},m(s,u){$(s,e,u),h(e,n),h(e,r),h(e,o)},p(s,u){u&4&&t!==(t=s[2].toFixed(2)+"")&&B(r,t)},d(s){s&&p(e)}}}function ds(l){let e;return{c(){e=T("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){$(n,e,t)},p:te,d(n){n&&p(e)}}}function hs(l){let e,n;return{c(){e=T("span"),n=O(),G(e,"class","dot svelte-1tzt432")},m(t,r){$(t,e,r),$(t,n,r)},p:te,d(t){t&&(p(e),p(n))}}}function fr(l){let e,n,t;function r(u){l[7](u,l[11],l[12],l[13])}function o(){return l[8](l[13])}let s={draggable:!0,$$slots:{default:[hs]},$$scope:{ctx:l}};return l[11]!==void 0&&(s.lngLat=l[11]),e=new Bo({props:s}),W.push(()=>V(e,"lngLat",r)),e.$on("click",o),{c(){v(e.$$.fragment)},m(u,i){w(e,u,i),t=!0},p(u,i){l=u;const a={};i&16384&&(a.$$scope={dirty:i,ctx:l}),!n&&i&1&&(n=!0,a.lngLat=l[11],X(()=>n=!1)),e.$set(a)},i(u){t||(g(e.$$.fragment,u),t=!0)},o(u){d(e.$$.fragment,u),t=!1},d(u){k(e,u)}}}function bs(l){let e,n;const t=[q("measurement-line"),{paint:{"line-color":Ke.measuringLine,"line-width":5}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u={};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function vs(l){let e,n,t,r,o,s,u;const i=[ms,ps],a=[];function f(c,_){return c[1]?0:1}return e=f(l),n=a[e]=i[e](l),r=new Ct({props:{data:l[0].length<2?yn():Sn(l[0]),$$slots:{default:[bs]},$$scope:{ctx:l}}}),{c(){n.c(),t=O(),v(r.$$.fragment)},m(c,_){a[e].m(c,_),$(c,t,_),w(r,c,_),o=!0,s||(u=Ze(window,"keydown",l[5]),s=!0)},p(c,[_]){let m=e;e=f(c),e===m?a[e].p(c,_):(ce(),d(a[m],1,1,()=>{a[m]=null}),$e(),n=a[e],n?n.p(c,_):(n=a[e]=i[e](c),n.c()),g(n,1),n.m(t.parentNode,t));const y={};_&1&&(y.data=c[0].length<2?yn():Sn(c[0])),_&16384&&(y.$$scope={dirty:_,ctx:c}),r.$set(y)},i(c){o||(g(n),g(r.$$.fragment,c),o=!0)},o(c){d(n),d(r.$$.fragment,c),o=!1},d(c){c&&p(t),a[e].d(c),k(r,c),s=!1,u()}}}function ws(l,e,n){let t,r=!1,o=[];function s(y){return y.length<2?null:1e3*jo(Sn(y),{units:"kilometers"})}function u(y){n(0,o=[...o,y.detail.lngLat.toArray()])}function i(){n(1,r=!1),n(0,o=[])}function a(y){r&&y.key==="Escape"&&(y.stopPropagation(),i())}function f(y){o.splice(y,1),n(0,o)}function c(y,C,S,I){S[I]=y,n(0,o)}const _=y=>f(y),m=()=>n(1,r=!0);return l.$$.update=()=>{l.$$.dirty&1&&n(2,t=s(o))},[o,r,t,u,i,a,f,c,_,m]}class ks extends Y{constructor(e){super(),K(this,e,ws,vs,J,{})}}const ys={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Be=Uint8Array,ht=Uint16Array,no=Uint32Array,ro=new Be([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lo=new Be([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ss=new Be([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),oo=function(l,e){for(var n=new ht(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new no(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},so=oo(ro,2),io=so[0],Cs=so[1];io[28]=258,Cs[258]=28;var Ts=oo(lo,0),Os=Ts[0],On=new ht(32768);for(var we=0;we<32768;++we){var ft=(we&43690)>>>1|(we&21845)<<1;ft=(ft&52428)>>>2|(ft&13107)<<2,ft=(ft&61680)>>>4|(ft&3855)<<4,On[we]=((ft&65280)>>>8|(ft&255)<<8)>>>1}var Qt=function(l,e,n){for(var t=l.length,r=0,o=new ht(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new ht(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new ht(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[On[c]>>>i]=a}else for(u=new ht(t),r=0;r<t;++r)l[r]&&(u[r]=On[s[l[r]-1]++]>>>15-l[r]);return u},rn=new Be(288);for(var we=0;we<144;++we)rn[we]=8;for(var we=144;we<256;++we)rn[we]=9;for(var we=256;we<280;++we)rn[we]=7;for(var we=280;we<288;++we)rn[we]=8;var ao=new Be(32);for(var we=0;we<32;++we)ao[we]=5;var Ls=Qt(rn,9,1),As=Qt(ao,5,1),mn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},Ue=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},_n=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Is=function(l){return(l+7)/8|0},zn=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?ht:l.BYTES_PER_ELEMENT==4?no:Be)(n-e);return t.set(l.subarray(e,n)),t},Ns=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],We=function(l,e,n){var t=new Error(e||Ns[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,We),!n)throw t;return t},Ps=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Be(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Be(t*3));var s=function(ge){var ve=e.length;if(ge>ve){var _e=new Be(Math.max(ve*2,ge));_e.set(e),e=_e}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,_=n.m,m=n.n,y=t*8;do{if(!f){u=Ue(l,i,1);var C=Ue(l,i+1,3);if(i+=3,C)if(C==1)f=Ls,c=As,_=9,m=5;else if(C==2){var A=Ue(l,i,31)+257,M=Ue(l,i+10,15)+4,L=A+Ue(l,i+5,31)+1;i+=14;for(var P=new Be(L),E=new Be(19),N=0;N<M;++N)E[Ss[N]]=Ue(l,i+N*3,7);i+=M*3;for(var j=mn(E),U=(1<<j)-1,H=Qt(E,j,1),N=0;N<L;){var D=H[Ue(l,i,U)];i+=D&15;var S=D>>>4;if(S<16)P[N++]=S;else{var F=0,z=0;for(S==16?(z=3+Ue(l,i,3),i+=2,F=P[N-1]):S==17?(z=3+Ue(l,i,7),i+=3):S==18&&(z=11+Ue(l,i,127),i+=7);z--;)P[N++]=F}}var oe=P.subarray(0,A),se=P.subarray(A);_=mn(oe),m=mn(se),f=Qt(oe,_,1),c=Qt(se,m,1)}else We(1);else{var S=Is(i)+4,I=l[S-4]|l[S-3]<<8,R=S+I;if(R>t){o&&We(0);break}r&&s(a+I),e.set(l.subarray(S,R),a),n.b=a+=I,n.p=i=R*8,n.f=u;continue}if(i>y){o&&We(0);break}}r&&s(a+131072);for(var ye=(1<<_)-1,de=(1<<m)-1,Se=i;;Se=i){var F=f[_n(l,i)&ye],ie=F>>>4;if(i+=F&15,i>y){o&&We(0);break}if(F||We(2),ie<256)e[a++]=ie;else if(ie==256){Se=i,f=null;break}else{var Ne=ie-254;if(ie>264){var N=ie-257,Te=ro[N];Ne=Ue(l,i,(1<<Te)-1)+io[N],i+=Te}var be=c[_n(l,i)&de],re=be>>>4;be||We(3),i+=be&15;var se=Os[re];if(re>3){var Te=lo[re];se+=_n(l,i)&(1<<Te)-1,i+=Te}if(i>y){o&&We(0);break}r&&s(a+131072);for(var pe=a+Ne;a<pe;a+=4)e[a]=e[a-se],e[a+1]=e[a+1-se],e[a+2]=e[a+2-se],e[a+3]=e[a+3-se];a=pe}}n.l=f,n.p=Se,n.b=a,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=m)}while(!u);return a==e.length?e:zn(e,0,a)},Ms=new Be(0),Je=function(l,e){return l[e]|l[e+1]<<8},Ve=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},gn=function(l,e){return Ve(l,e)+Ve(l,e+4)*4294967296};function Fs(l,e){return Ps(l,e)}var Ln=typeof TextDecoder<"u"&&new TextDecoder,Es=0;try{Ln.decode(Ms,{stream:!0}),Es=1}catch{}var Ds=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,zn(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function fo(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(Ln)return Ln.decode(l);var r=Ds(l),o=r[0],s=r[1];return s.length&&We(8),o}}var js=function(l,e){return e+30+Je(l,e+26)+Je(l,e+28)},Rs=function(l,e,n){var t=Je(l,e+28),r=fo(l.subarray(e+46,e+46+t),!(Je(l,e+8)&2048)),o=e+46+t,s=Ve(l,e+20),u=n&&s==4294967295?Bs(l,o):[s,Ve(l,e+24),Ve(l,e+42)],i=u[0],a=u[1],f=u[2];return[Je(l,e+10),i,a,r,o+Je(l,e+30)+Je(l,e+32),f]},Bs=function(l,e){for(;Je(l,e)!=1;e+=4+Je(l,e+2));return[gn(l,e+12),gn(l,e+4),gn(l,e+20)]};function zs(l,e){for(var n={},t=l.length-22;Ve(l,t)!=101010256;--t)(!t||l.length-t>65558)&&We(13);var r=Je(l,t+8);if(!r)return{};var o=Ve(l,t+16),s=o==4294967295||r==65535;if(s){var u=Ve(l,t-12);s=Ve(l,u)==101075792,s&&(r=Ve(l,u+32),o=Ve(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=Rs(l,o,s),c=f[0],_=f[1],m=f[2],y=f[3],C=f[4],S=f[5],I=js(l,S);o=C,(!i||i({name:y,size:_,originalSize:m,compression:c}))&&(c?c==8?n[y]=Fs(l.subarray(I,I+_),new Be(m)):We(14,"unknown compression type "+c):n[y]=zn(l,I,I+_))}return n}function Hs(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(dn):dn(l)}function dn(l){var e=new Uint8Array(l),n=zs(e);return Promise.resolve(qs(n))}function qs(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=fo(l[r])}return e}function Qe(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&St(t)===e)return t;n++}}function ln(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&St(r)===e&&n.push(r),t++}return n}function un(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&St(r)===e&&n(r,t):n(r,t),t++}}function Gs(l,e,n){var t=[];return un(l,e,function(r,o){t.push(n(r,o))}),t}var Us=/.+\:/;function St(l){return l.tagName.replace(Us,"")}function uo(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+St(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=uo(l.childNodes[t]),t++;return e+="</"+St(l)+">",e}function Ws(l){var e=l.documentElement,n=Qe(e,"sheetData"),t=[];return un(n,"row",function(r){un(r,"c",function(o){t.push(o)})}),t}function Vs(l,e){return Qe(e,"v")}function Xs(l,e){if(e.firstChild&&St(e.firstChild)==="is"&&e.firstChild.firstChild&&St(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Js(l){var e=l.documentElement,n=Qe(e,"dimension");if(n)return n.getAttribute("ref")}function Ys(l){var e=l.documentElement,n=Qe(e,"cellStyleXfs");return n?ln(n,"xf"):[]}function Ks(l){var e=l.documentElement,n=Qe(e,"cellXfs");return n?ln(n,"xf"):[]}function Zs(l){var e=l.documentElement,n=Qe(e,"numFmts");return n?ln(n,"numFmt"):[]}function Qs(l){var e=l.documentElement;return Gs(e,"si",function(n){var t=Qe(n,"t");if(t)return t.textContent;var r="";return un(n,"r",function(o){r+=Qe(o,"t").textContent}),r})}function xs(l){var e=l.documentElement;return Qe(e,"workbookPr")}function ei(l){var e=l.documentElement;return ln(e,"Relationship")}function ti(l){var e=l.documentElement,n=Qe(e,"sheets");return ln(n,"sheet")}function ni(l,e){var n=e.createDocument(l),t={},r=xs(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return ti(n).forEach(o),t}function ri(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=hn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=hn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=hn(u);break}};return ei(n).forEach(r),t}function hn(l){return l[0]==="/"?l.slice(1):"xl/"+l}function ur(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function cr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ur(Object(n),!0).forEach(function(t){li(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function li(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function oi(l,e){if(!l)return{};var n=e.createDocument(l),t=Ys(n).map(bn),r=Zs(n).map(si).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?cr(cr({},t[u.xfId]),bn(u,r)):bn(u,r)};return Ks(n).map(o)}function si(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function bn(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function ii(l,e){return l?Qs(e.createDocument(l)):[]}function co(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function ai(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=fi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fi(l,e){if(l){if(typeof l=="string")return $r(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $r(l,e)}}function $r(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ui(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(ci.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&mi(t.numberFormat.template))return!0}}var ci=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],$i=/^\[\$-414\]/,pi=/;@$/;function mi(l){l=l.toLowerCase(),l=l.replace($i,""),l=l.replace(pi,"");for(var e=l.split(/\W+/),n=ai(e),t;!(t=n()).done;){var r=t.value;if(_i.indexOf(r)<0)return!1}return!0}var _i=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function gi(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=vn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=vn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=vn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=di(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var _=ui(o(),s,a);_?(l=pr(l),l=co(l,i)):l=(a.parseNumber||pr)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function di(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function vn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function pr(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var hi=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function bi(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function vi(l){for(var e=0,n=0;n<l.length;)e*=26,e+=hi.indexOf(l[n]),n++;return e}function $o(l){return l=l.split(/(\d+)/),[parseInt(l[1]),vi(l[0].trim())]}function wi(l,e,n,t,r,o,s){var u=$o(l.getAttribute("r")),i=Vs(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:gi(a,f,{getInlineStringValue:function(){return Xs(e,l)},getInlineStringXml:function(){return uo(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function ki(l,e,n,t,r,o){var s=Ws(l);return s.length===0?[]:s.map(function(u){return wi(u,l,e,n,t,r,o)})}function yi(l,e){return Oi(l)||Ti(l,e)||Ci(l,e)||Si()}function Si(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ci(l,e){if(l){if(typeof l=="string")return mr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(l,e)}}function mr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ti(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Oi(l){if(Array.isArray(l))return l}function Li(l){var e=Js(l);if(e)return e=e.split(":").map($o).map(function(n){var t=yi(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Ai(l,e,n,t,r,o){var s=e.createDocument(l),u=ki(s,e,n,t,r,o),i=Li(s)||bi(u);return{cells:u,dimensions:i}}function Ii(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Ni(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ni(l,e){if(l){if(typeof l=="string")return _r(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _r(l,e)}}function _r(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Pi(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=Ii(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Mi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Fi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fi(l,e){if(l){if(typeof l=="string")return gr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gr(l,e)}}function gr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ei(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=Mi(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function Di(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=po(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ji(l,e){return zi(l)||Bi(l,e)||po(l,e)||Ri()}function Ri(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function po(l,e){if(l){if(typeof l=="string")return dr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(l,e)}}function dr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Bi(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function zi(l){if(Array.isArray(l))return l}function Hi(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=ji(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=Di(t),_;!(_=c()).done;){var m=_.value,y=m.row-1,C=m.column-1;C<s&&y<u&&(i[y][C]=m.value)}var S=e.rowMap;if(S)for(var I=0;I<i.length;)S[I]=I,I++;return i=Pi(Ei(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(i=e.transformData(i)),i}function qi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Gi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gi(l,e){if(l){if(typeof l=="string")return hr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hr(l,e)}}function hr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function br(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Ui(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?br(Object(n),!0).forEach(function(t){Wi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):br(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Wi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Vi(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Ui({sheet:1},n));var t=function(_){if(!l[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return l[_]},r=ri(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?ii(t(r.sharedStrings),e):[],s=r.styles?oi(t(r.styles),e):{},u=ni(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var i=Xi(n.sheet,u.sheets);if(!i||!r.sheets[i])throw Ji(n.sheet,u.sheets);var a=Ai(t(r.sheets[i]),e,o,s,u,n),f=Hi(a,n);return n.properties?{data:f,properties:u}:f}function Xi(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=qi(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Ji(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function An(l){"@babel/helpers - typeof";return An=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},An(l)}function vr(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Yi(l,e,n){return e&&vr(l.prototype,e),n&&vr(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function Ki(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function Zi(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&en(l,e)}function Qi(l){var e=mo();return function(){var t=tn(l),r;if(e){var o=tn(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return xi(this,r)}}function xi(l,e){if(e&&(An(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ea(l)}function ea(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function In(l){var e=typeof Map=="function"?new Map:void 0;return In=function(t){if(t===null||!ta(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return an(t,arguments,tn(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),en(r,t)},In(l)}function an(l,e,n){return mo()?an=Reflect.construct:an=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&en(a,s.prototype),a},an.apply(null,arguments)}function mo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ta(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function en(l,e){return en=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},en(l,e)}function tn(l){return tn=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},tn(l)}var ze=function(l){Zi(n,l);var e=Qi(n);function n(t){var r;return Ki(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Yi(n)}(In(Error));function na(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new ze("not_a_number")}if(typeof l!="number")throw new ze("not_a_number");if(isNaN(l))throw new ze("invalid_number");if(!isFinite(l))throw new ze("out_of_bounds");return l}function ra(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new ze("invalid_number");if(!isFinite(l))throw new ze("out_of_bounds");return String(l)}throw new ze("not_a_string")}function la(l){if(typeof l=="boolean")return l;throw new ze("not_a_boolean")}function oa(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new ze("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new ze("invalid_number");if(!isFinite(l))throw new ze("out_of_bounds");var t=co(l,n);if(isNaN(t.valueOf()))throw new ze("out_of_bounds");return t}throw new ze("not_a_date")}function sa(l,e){return fa(l)||aa(l,e)||_o(l,e)||ia()}function ia(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function aa(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function fa(l){if(Array.isArray(l))return l}function Nn(l){"@babel/helpers - typeof";return Nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nn(l)}function ua(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=_o(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _o(l,e){if(l){if(typeof l=="string")return wr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return wr(l,e)}}function wr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function kr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function yr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kr(Object(n),!0).forEach(function(t){ca(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ca(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var Sr={isColumnOriented:!1};function $a(l,e,n){n?n=yr(yr({},Sr),n):n=Sr;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;ga(e),r&&(l=_a(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=go(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var _=ua(a),m;!(m=_()).done;){var y=m.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function go(l,e,n,t,r,o){for(var s={},u=!0,i=function(R){var A=R.column,M=R.value,L=R.error,P=R.reason,E={error:L,row:n+1,column:A,value:M};return P&&(E.reason=P),l[A].type&&(E.type=l[A].type),E},a=[],f=function(){var R=_[c],A=l[R],M=Nn(A.type)==="object"&&!Array.isArray(A.type),L=e[t.indexOf(R)];L===void 0&&(L=null);var P=void 0,E=void 0,N=void 0;if(M)P=go(A.type,e,n,t,r,o);else if(L===null)P=null;else if(Array.isArray(A.type)){var j=!1,U=ma(L).map(function(D){var F=Cr(D,A,o);return F.error&&(P=D,E=F.error,N=F.reason),F.value!==null&&(j=!0),F.value});E||(P=j?U:null)}else{var H=Cr(L,A,o);E=H.error,N=H.reason,P=E?L:H.value}!E&&P===null&&(typeof A.required=="function"?a.push({column:R}):A.required===!0&&(E="required")),E?r.push(i({column:R,value:P,error:E,reason:N})):(u&&P!==null&&(u=!1),(P!==null||o.includeNullValues)&&(s[A.prop]=P))},c=0,_=Object.keys(l);c<_.length;c++)f();if(u)return null;for(var m=0,y=a;m<y.length;m++){var C=y[m].column,S=l[C].required(s);S&&r.push(i({column:C,value:null,error:"required"}))}return s}function Cr(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=Ot(l,e.parse):e.type?t=pa(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function Ot(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function pa(l,e,n){switch(e){case String:return Ot(l,ra);case Number:return Ot(l,na);case Date:return Ot(l,function(t){return oa(t,{properties:n.properties})});case Boolean:return Ot(l,la);default:if(typeof e=="function")return Ot(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function ho(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=ho(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function ma(l){for(var e=[],n=0;n<l.length;){var t=ho(l,",",n),r=sa(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var _a=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function ga(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function Pn(l){"@babel/helpers - typeof";return Pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Pn(l)}function bo(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;Pn(o)==="object"&&(o=Object.keys(l[r])[0],s=bo(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var da=["schema","map"];function Tr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function sn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Tr(Object(n),!0).forEach(function(t){ha(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Tr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function ha(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ba(l,e){if(l==null)return{};var n=va(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function va(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function wa(l,e,n){var t=n.schema,r=n.map,o=ba(n,da);!t&&r&&(t=bo(r));var s=Vi(l,e,sn(sn({},o),{},{properties:t||o.properties}));return t?$a(s.data,t,sn(sn({},o),{},{properties:s.properties})):s}function ka(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Hs(l).then(function(n){return wa(n,ys,e)})}function ya(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>Sa(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function Sa(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function Ca(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await ka(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Oo(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Mn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function Ta(l){return pt(["get","intervention_type"],{area:Ke.area,route:Ke.route,crossing:Ke.crossing,other:Ke.other},"white")}function Oa(l){return[["Areas",Ke.area],["Routes",Ke.route],["Crossings",Ke.crossing],["Other",Ke.other]]}const Z={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},He=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Fn(){let[l,e]=vo(Mn,Z.funding_programmes);return[pt(["get","funding_programme"],l,"grey"),e]}function La(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=vo(l,Z.current_milestone);return[pt(["get","current_milestone"],e,"grey"),n]}function vo(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Aa(l){let e,n;return e=new Bn({props:{rows:l[1]}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Ia(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new dt({props:u}),W.push(()=>V(e,"value",s)),e.$on("change",l[2]),r=new Re({props:{label:"Legend",$$slots:{default:[Aa]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],X(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}function Na(l,e,n){let t;Ae(l,jn,a=>n(4,t=a));let r="fundingProgramme",[o,s]=Fn();function u(){let a;r=="interventionType"?(a=Ta(),n(1,s=Oa())):r=="fundingProgramme"?n(1,[a,s]=Fn(),s):r=="currentMilestone"&&n(1,[a,s]=La(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class Pa extends Y{constructor(e){super(),K(this,e,Na,Ia,J,{})}}const Lt=nn({type:"FeatureCollection",features:[],schemes:{}}),cn=nn(new Map),Or=nn(!0),Nt=nn(""),Pt=nn("");function Ma(l){let e;return{c(){e=b("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fa(l){let e;return{c(){e=b("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ea(l){let e,n,t,r,o,s;return t=new $t({props:{$$slots:{default:[Fa]},$$scope:{ctx:l}}}),t.$on("click",l[19]),{c(){e=T("input"),n=O(),v(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,i){$(u,e,i),Ye(e,l[7]),$(u,n,i),w(t,u,i),r=!0,o||(s=Ze(e,"input",l[18]),o=!0)},p(u,i){i&128&&e.value!==u[7]&&Ye(e,u[7]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(g(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),k(t,u),o=!1,s()}}}function Da(l){let e;return{c(){e=b("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(l){let e,n,t,r,o,s;return t=new $t({props:{$$slots:{default:[Da]},$$scope:{ctx:l}}}),t.$on("click",l[21]),{c(){e=T("input"),n=O(),v(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,i){$(u,e,i),Ye(e,l[6]),$(u,n,i),w(t,u,i),r=!0,o||(s=Ze(e,"input",l[20]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&Ye(e,u[6]);const a={};i&134217728&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(g(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),k(t,u),o=!1,s()}}}function Ra(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,y,C,S,I,R,A,M;e=new $t({props:{$$slots:{default:[Ma]},$$scope:{ctx:l}}}),e.$on("click",l[13]);function L(F){l[14](F)}let P={label:"Authority or region",choices:l[8],emptyOption:!0};l[2]!==void 0&&(P.value=l[2]),t=new dt({props:P}),W.push(()=>V(t,"value",L));function E(F){l[15](F)}let N={label:"Funding programme",choices:l[9],emptyOption:!0};l[3]!==void 0&&(N.value=l[3]),s=new dt({props:N}),W.push(()=>V(s,"value",E));function j(F){l[16](F)}let U={label:"Current milestone",choices:l[10],emptyOption:!0};l[4]!==void 0&&(U.value=l[4]),a=new dt({props:U}),W.push(()=>V(a,"value",j));function H(F){l[17](F)}let D={label:"Sketch source",choices:l[12],emptyOption:!0};return l[5]!==void 0&&(D.value=l[5]),_=new dt({props:D}),W.push(()=>V(_,"value",H)),C=new Cn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Ea]},$$scope:{ctx:l}}}),I=new Cn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[ja]},$$scope:{ctx:l}}}),A=new Pa({}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment),o=O(),v(s.$$.fragment),i=O(),v(a.$$.fragment),c=O(),v(_.$$.fragment),y=O(),v(C.$$.fragment),S=O(),v(I.$$.fragment),R=O(),v(A.$$.fragment)},m(F,z){w(e,F,z),$(F,n,z),w(t,F,z),$(F,o,z),w(s,F,z),$(F,i,z),w(a,F,z),$(F,c,z),w(_,F,z),$(F,y,z),w(C,F,z),$(F,S,z),w(I,F,z),$(F,R,z),w(A,F,z),M=!0},p(F,z){const oe={};z&134217728&&(oe.$$scope={dirty:z,ctx:F}),e.$set(oe);const se={};z&256&&(se.choices=F[8]),!r&&z&4&&(r=!0,se.value=F[2],X(()=>r=!1)),t.$set(se);const ye={};z&512&&(ye.choices=F[9]),!u&&z&8&&(u=!0,ye.value=F[3],X(()=>u=!1)),s.$set(ye);const de={};z&1024&&(de.choices=F[10]),!f&&z&16&&(f=!0,de.value=F[4],X(()=>f=!1)),a.$set(de);const Se={};!m&&z&32&&(m=!0,Se.value=F[5],X(()=>m=!1)),_.$set(Se);const ie={};z&134217856&&(ie.$$scope={dirty:z,ctx:F}),C.$set(ie);const Ne={};z&134217792&&(Ne.$$scope={dirty:z,ctx:F}),I.$set(Ne)},i(F){M||(g(e.$$.fragment,F),g(t.$$.fragment,F),g(s.$$.fragment,F),g(a.$$.fragment,F),g(_.$$.fragment,F),g(C.$$.fragment,F),g(I.$$.fragment,F),g(A.$$.fragment,F),M=!0)},o(F){d(e.$$.fragment,F),d(t.$$.fragment,F),d(s.$$.fragment,F),d(a.$$.fragment,F),d(_.$$.fragment,F),d(C.$$.fragment,F),d(I.$$.fragment,F),d(A.$$.fragment,F),M=!1},d(F){F&&(p(n),p(o),p(i),p(c),p(y),p(S),p(R)),k(e,F),k(t,F),k(s,F),k(a,F),k(_,F),k(C,F),k(I,F),k(A,F)}}}function Ba(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[11].route.toLocaleString()+"",s,u,i=l[11].area.toLocaleString()+"",a,f,c=l[11].crossing.toLocaleString()+"",_,m,y=l[11].other.toLocaleString()+"",C,S,I=Lr(l[11].totalLength).toFixed(1)+"",R,A;return{c(){e=b("Showing "),t=b(n),r=b(" schemes ("),s=b(o),u=b(`
    routes, `),a=b(i),f=b(` areas,
    `),_=b(c),m=b(" crossings, "),C=b(y),S=b(`
    other, with total LineString length of `),R=b(I),A=b(" miles)")},m(M,L){$(M,e,L),$(M,t,L),$(M,r,L),$(M,s,L),$(M,u,L),$(M,a,L),$(M,f,L),$(M,_,L),$(M,m,L),$(M,C,L),$(M,S,L),$(M,R,L),$(M,A,L)},p(M,L){L&1&&n!==(n=M[0].size.toLocaleString()+"")&&B(t,n),L&2048&&o!==(o=M[11].route.toLocaleString()+"")&&B(s,o),L&2048&&i!==(i=M[11].area.toLocaleString()+"")&&B(a,i),L&2048&&c!==(c=M[11].crossing.toLocaleString()+"")&&B(_,c),L&2048&&y!==(y=M[11].other.toLocaleString()+"")&&B(C,y),L&2048&&I!==(I=Lr(M[11].totalLength).toFixed(1)+"")&&B(R,I)},d(M){M&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(_),p(m),p(C),p(S),p(R),p(A))}}}function za(l){let e,n,t;function r(s){l[22](s)}let o={$$slots:{default:[Ba]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){v(e.$$.fragment)},m(s,u){w(e,s,u),t=!0},p(s,u){const i={};u&134219777&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function Ha(l){let e,n,t,r;return e=new Re({props:{label:"Filters",$$slots:{default:[Ra]},$$scope:{ctx:l}}}),t=new xe({props:{small:!0,$$slots:{default:[za]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(o,s){w(e,o,s),$(o,n,s),w(t,o,s),r=!0},p(o,[s]){const u={};s&134219772&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&134219779&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),k(e,o),k(t,o)}}}function Lr(l){return l*621371e-9}function qa(l,e,n){let t,r,o,s;Ae(l,Pt,z=>n(6,t=z)),Ae(l,Nt,z=>n(7,r=z)),Ae(l,Lt,z=>n(23,o=z)),Ae(l,cn,z=>n(24,s=z));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],_=new Set(Mn.slice(0,-1)),m="",y=[],C="",S=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],I="",R={area:0,route:0,crossing:0,other:0,totalLength:0};Rn(()=>{var ye,de,Se;let z=new Set,oe=new Set,se=new Set;for(let ie of s.values())(ye=ie.browse)!=null&&ye.authority_or_region&&z.add(ie.browse.authority_or_region),(de=ie.browse)!=null&&de.funding_programme&&oe.add(ie.browse.funding_programme),(Se=ie.browse)!=null&&Se.current_milestone&&se.add(ie.browse.current_milestone);n(8,a=Array.from(z.entries())),a.sort(),n(9,c=Mn.map(ie=>[ie,ie])),n(10,y=Array.from(se.entries())),y.sort()});function A(z,oe,se,ye,de,Se){let ie=oe.toLowerCase(),Ne=se.toLowerCase(),Te=re=>{var pe,ge,ve,_e,Ie,Me,At;if(ie&&!((pe=re.properties.name)!=null&&pe.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))return!1;if(z||Ne||ye||de||Se){let Xe=s.get(re.properties.scheme_reference);if(ye&&((ve=Xe.browse)==null?void 0:ve.authority_or_region)!=ye||de&&de!=="Other"&&((_e=Xe.browse)==null?void 0:_e.funding_programme)!=de||de==="Other"&&_.has(((Ie=Xe.browse)==null?void 0:Ie.funding_programme)??"")||Se&&((Me=Xe.browse)==null?void 0:Me.current_milestone)!=Se||Ne&&!Xe.scheme_reference.toLowerCase().includes(Ne)&&!(Xe.scheme_name??"").toLowerCase().includes(Ne)||z&&z!=="Both"&&z!==((At=Xe.browse)==null?void 0:At.sketch_source))return!1}return!0};n(0,u=new Set(o.features.filter(Te).map(re=>re.properties.scheme_reference))),n(11,R={area:0,route:0,crossing:0,other:0,totalLength:0});let be=re=>{var pe,ge;return!(!u.has(re.properties.scheme_reference)||ie&&!((pe=re.properties.name)!=null&&pe.toLowerCase().includes(ie))&&!((ge=re.properties.description)!=null&&ge.toLowerCase().includes(ie)))};for(let re of o.features)be(re)?(delete re.properties.hide_while_editing,n(11,R[re.properties.intervention_type]++,R),re.geometry.type=="LineString"&&re.properties.length_meters&&n(11,R.totalLength+=re.properties.length_meters,R)):re.properties.hide_while_editing=!0;Lt.set(o),n(11,R)}function M(){n(5,I=""),n(2,f=""),n(3,m=""),n(4,C=""),ct(Nt,r="",r),ct(Pt,t="",t)}function L(z){f=z,n(2,f)}function P(z){m=z,n(3,m)}function E(z){C=z,n(4,C)}function N(z){I=z,n(5,I)}function j(){r=this.value,Nt.set(r)}const U=()=>ct(Nt,r="",r);function H(){t=this.value,Pt.set(t)}const D=()=>ct(Pt,t="",t);function F(z){i=z,n(1,i)}return l.$$set=z=>{"schemesToBeShown"in z&&n(0,u=z.schemesToBeShown),"show"in z&&n(1,i=z.show)},l.$$.update=()=>{l.$$.dirty&252&&A(I,r,t,f,m,C)},[u,i,f,m,C,I,t,r,a,c,y,R,S,M,L,P,E,N,j,U,H,D,F]}class Ga extends Y{constructor(e){super(),K(this,e,qa,Ha,J,{schemesToBeShown:0,show:1})}}function Ua(l){let e;return{c(){e=b(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wa(l){let e,n,t,r,o;return t=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ua]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=b("License: "),v(t.$$.fragment),r=b(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),h(e,n),w(t,e,null),h(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(g(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),k(t)}}}class De extends Y{constructor(e){super(),K(this,e,null,Wa,J,{})}}function Ar(l,e,n){const t=l.slice();return t[2]=e[n],t}function Ir(l,e,n){const t=l.slice();return t[5]=e[n],t}function Nr(l){let e,n;return{c(){e=T("span"),n=b(`Â 
    `),Ce(e,"background",l[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,r){$(t,e,r),h(e,n)},p(t,r){r&1&&Ce(e,"background",t[5])},d(t){t&&p(e)}}}function Pr(l){let e,n=l[2]+"",t;return{c(){e=T("span"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&B(t,n)},d(r){r&&p(e)}}}function Va(l){let e,n,t,r=je(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=Nr(Ir(l,r,i));let s=je(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=Pr(Ar(l,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=O(),t=T("div");for(let i=0;i<u.length;i+=1)u[i].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=je(i[0]);let f;for(f=0;f<r.length;f+=1){const c=Ir(i,r,f);o[f]?o[f].p(c,a):(o[f]=Nr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=je(i[1]);let f;for(f=0;f<s.length;f+=1){const c=Ar(i,s,f);u[f]?u[f].p(c,a):(u[f]=Pr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:te,o:te,d(i){i&&(p(e),p(n),p(t)),yt(o,i),yt(u,i)}}}function Xa(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ge extends Y{constructor(e){super(),K(this,e,Xa,Va,J,{colorScale:0,limits:1})}}function Mr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Ja(l){let e;return{c(){e=b("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ya(l){let e;return{c(){e=b(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ka(l){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Za(l){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qa(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ya]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ka]},$$scope:{ctx:l}}}),f=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Za]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=b("Car/van availability data is from the 2021 census, via "),v(t.$$.fragment),r=b(". Output area boundaries from "),v(o.$$.fragment),s=b("."),u=O(),i=T("p"),a=b("License: "),v(f.$$.fragment),c=b(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(m,y){$(m,e,y),h(e,n),w(t,e,null),h(e,r),w(o,e,null),h(e,s),$(m,u,y),$(m,i,y),h(i,a),w(f,i,null),h(i,c),_=!0},p(m,y){const C={};y&65536&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&65536&&(S.$$scope={dirty:y,ctx:m}),o.$set(S);const I={};y&65536&&(I.$$scope={dirty:y,ctx:m}),f.$set(I)},i(m){_||(g(t.$$.fragment,m),g(o.$$.fragment,m),g(f.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(o.$$.fragment,m),d(f.$$.fragment,m),_=!1},d(m){m&&(p(e),p(u),p(i)),k(t),k(o),k(f)}}}function xa(l){let e,n,t;return n=new me({props:{$$slots:{default:[Qa]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function Fr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ef(l){let e;return{c(){e=b("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tf(l){let e;return{c(){e=b(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nf(l){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(l){let e;return{c(){e=b(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,y;return o=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[tf]},$$scope:{ctx:l}}}),u=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[nf]},$$scope:{ctx:l}}}),_=new ee({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[rf]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=T("p"),r=b("Car/van availability data is from the 2021 census, via "),v(o.$$.fragment),s=b(". Output area boundaries from "),v(u.$$.fragment),i=b("."),a=O(),f=T("p"),c=b("License: "),v(_.$$.fragment),m=b(`. Contains OS data Â© Crown copyright and database
        right 2023.`)},m(C,S){$(C,e,S),$(C,n,S),$(C,t,S),h(t,r),w(o,t,null),h(t,s),w(u,t,null),h(t,i),$(C,a,S),$(C,f,S),h(f,c),w(_,f,null),h(f,m),y=!0},p(C,S){const I={};S&65536&&(I.$$scope={dirty:S,ctx:C}),o.$set(I);const R={};S&65536&&(R.$$scope={dirty:S,ctx:C}),u.$set(R);const A={};S&65536&&(A.$$scope={dirty:S,ctx:C}),_.$set(A)},i(C){y||(g(o.$$.fragment,C),g(u.$$.fragment,C),g(_.$$.fragment,C),y=!0)},o(C){d(o.$$.fragment,C),d(u.$$.fragment,C),d(_.$$.fragment,C),y=!1},d(C){C&&(p(e),p(n),p(t),p(a),p(f)),k(o),k(u),k(_)}}}function of(l){let e,n,t;return n=new me({props:{$$slots:{default:[lf]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function Er(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function sf(l){let e;return{c(){e=b("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function af(l){let e;return{c(){e=b(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ff(l){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uf(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[af]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ff]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=T("p"),n=b("Population density data is from the 2021 census, via "),v(t.$$.fragment),r=b(". Output area boundaries from "),v(o.$$.fragment),s=b("."),u=O(),v(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),w(t,e,null),h(e,r),w(o,e,null),h(e,s),$(f,u,c),w(i,f,c),a=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&65536&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),k(t),k(o),k(i,f)}}}function cf(l){let e,n,t;return n=new me({props:{$$slots:{default:[uf]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function Dr(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[4],limits:l[6]().map(bf)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=O(),v(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),w(t,o,s),r=!0},p:te,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),k(t,o)}}}function $f(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=T("p"),n=b("There are "),t=T("b"),o=b(r),s=b(`
          people per square kilometre in `),i=b(u)},m(a,f){$(a,e,f),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&B(o,r),f&8192&&u!==(u=a[14]+"")&&B(i,u)},d(a){a&&p(e)}}}function pf(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=T("p"),n=b("Households in "),r=b(t),o=b(` have an average of
          `),s=T("b"),i=b(u),a=b(`
          cars`)},m(f,c){$(f,e,c),h(e,n),h(e,r),h(e,o),h(e,s),h(s,i),h(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(r,t),c&8200&&u!==(u=f[15]+"")&&B(i,u)},d(f){f&&p(e)}}}function mf(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=T("p"),n=T("b"),r=b(t),o=b("%"),s=b(`
          of households in `),i=b(u),a=b(" have 1 or more cars")},m(f,c){$(f,e,c),h(e,n),h(n,r),h(n,o),h(e,s),h(e,i),h(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(r,t),c&8192&&u!==(u=f[14]+"")&&B(i,u)},d(f){f&&p(e)}}}function _f(l){Mr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?mf:o[3]=="average_cars_per_household"?pf:$f}let t=n(l),r=t(l);return{c(){r.c(),e=Ee()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){Mr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function gf(l){let e,n;return e=new fe({props:{$$slots:{default:[_f,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function df(l){let e,n,t,r;const o=[q(tt),{sourceLayer:tt},{paint:{"fill-color":Le(["get",l[3]],l[6](),l[4]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[gf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",l[5]);const u=[q(`${tt}-outline`),{sourceLayer:tt},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(a,f){w(e,a,f),$(a,n,f),w(t,a,f),r=!0},p(a,f){const c=f&88?ne(o,[f&0&&ae(q(tt)),f&0&&{sourceLayer:tt},f&88&&{paint:{"fill-color":Le(["get",a[3]],a[6](),a[4]),"fill-opacity":Q(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&8?ne(u,[f&0&&ae(q(`${tt}-outline`)),f&0&&{sourceLayer:tt},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),k(e,a),k(t,a)}}}function hf(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,y;function C(N){l[7](N)}let S={$$slots:{right:[xa],default:[Ja]},$$scope:{ctx:l}};l[0]!==void 0&&(S.checked=l[0]),e=new le({props:S}),W.push(()=>V(e,"checked",C)),e.$on("change",l[8]);let I=l[3]=="percent_households_with_car"&&Fr(l);function R(N){l[9](N)}let A={$$slots:{right:[of],default:[ef]},$$scope:{ctx:l}};l[1]!==void 0&&(A.checked=l[1]),o=new le({props:A}),W.push(()=>V(o,"checked",R)),o.$on("change",l[10]);let M=l[3]=="average_cars_per_household"&&Er(l);function L(N){l[11](N)}let P={$$slots:{right:[cf],default:[sf]},$$scope:{ctx:l}};l[2]!==void 0&&(P.checked=l[2]),a=new le({props:P}),W.push(()=>V(a,"checked",L)),a.$on("change",l[12]);let E=l[3]=="population_density"&&Dr(l);return m=new ke({props:{url:`pmtiles://${he()}/v1/${tt}.pmtiles`,$$slots:{default:[df]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),I&&I.c(),r=O(),v(o.$$.fragment),u=O(),M&&M.c(),i=O(),v(a.$$.fragment),c=O(),E&&E.c(),_=O(),v(m.$$.fragment)},m(N,j){w(e,N,j),$(N,t,j),I&&I.m(N,j),$(N,r,j),w(o,N,j),$(N,u,j),M&&M.m(N,j),$(N,i,j),w(a,N,j),$(N,c,j),E&&E.m(N,j),$(N,_,j),w(m,N,j),y=!0},p(N,[j]){const U={};j&65536&&(U.$$scope={dirty:j,ctx:N}),!n&&j&1&&(n=!0,U.checked=N[0],X(()=>n=!1)),e.$set(U),N[3]=="percent_households_with_car"?I?(I.p(N,j),j&8&&g(I,1)):(I=Fr(N),I.c(),g(I,1),I.m(r.parentNode,r)):I&&(ce(),d(I,1,1,()=>{I=null}),$e());const H={};j&65536&&(H.$$scope={dirty:j,ctx:N}),!s&&j&2&&(s=!0,H.checked=N[1],X(()=>s=!1)),o.$set(H),N[3]=="average_cars_per_household"?M?(M.p(N,j),j&8&&g(M,1)):(M=Er(N),M.c(),g(M,1),M.m(i.parentNode,i)):M&&(ce(),d(M,1,1,()=>{M=null}),$e());const D={};j&65536&&(D.$$scope={dirty:j,ctx:N}),!f&&j&4&&(f=!0,D.checked=N[2],X(()=>f=!1)),a.$set(D),N[3]=="population_density"?E?(E.p(N,j),j&8&&g(E,1)):(E=Dr(N),E.c(),g(E,1),E.m(_.parentNode,_)):E&&(ce(),d(E,1,1,()=>{E=null}),$e());const F={};j&65544&&(F.$$scope={dirty:j,ctx:N}),m.$set(F)},i(N){y||(g(e.$$.fragment,N),g(I),g(o.$$.fragment,N),g(M),g(a.$$.fragment,N),g(E),g(m.$$.fragment,N),y=!0)},o(N){d(e.$$.fragment,N),d(I),d(o.$$.fragment,N),d(M),d(a.$$.fragment,N),d(E),d(m.$$.fragment,N),y=!1},d(N){N&&(p(t),p(r),p(u),p(i),p(c),p(_)),k(e,N),I&&I.d(N),k(o,N),M&&M.d(N),k(a,N),E&&E.d(N),k(m,N)}}}let tt="census_output_areas";const bf=l=>l.toLocaleString();function vf(l,e,n){let t=Z.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(S){let I=S.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${I}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${I}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(S){r=S,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function _(S){o=S,n(1,o)}const m=()=>{n(0,r=!1),n(2,s=!1)};function y(S){s=S,n(2,s)}const C=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,_,m,y,C]}class wf extends Y{constructor(e){super(),K(this,e,vf,hf,J,{})}}function kf(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){v(e.$$.fragment),n=b(`
  Combined authorities`)},m(r,o){w(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),k(e,r)}}}function yf(l){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sf(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[yf]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=b("Data from "),v(t.$$.fragment),r=b(", as of December 2022."),o=O(),v(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),w(t,e,null),h(e,r),$(i,o,a),w(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),k(t),k(s,i)}}}function Cf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Sf]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function Tf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Of(l){let e,n;return e=new fe({props:{$$slots:{default:[Tf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Lf(l){let e,n,t,r;const o=[q(Mt),{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Of]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",If);const u=[q(`${Mt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(a,f){w(e,a,f),$(a,n,f),w(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(q(Mt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(q(`${Mt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),k(e,a),k(t,a)}}}function Af(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Cf],default:[kf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new Ct({props:{data:`${he()}/v1/${Mt}.geojson`,$$slots:{default:[Lf]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}let Mt="combined_authorities";function If(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Nf(l,e,n){let t=Z.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Pf extends Y{constructor(e){super(),K(this,e,Nf,Af,J,{})}}function Mf(l){let e;return{c(){e=b("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ff(l){let e;return{c(){e=b(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ef(l){let e;return{c(){e=b(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Df(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Ff]},$$scope:{ctx:l}}}),o=new ee({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Ef]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=T("p"),n=b("The 2019 English IMD scores come from "),v(t.$$.fragment),r=b(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),v(o.$$.fragment),s=b("."),u=O(),v(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),w(t,e,null),h(e,r),w(o,e,null),h(e,s),$(f,u,c),w(i,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),k(t),k(o),k(i,f)}}}function jf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Df]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function jr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Rf(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,_=l[4].rank.toLocaleString()+"",m,y;return{c(){e=T("p"),t=b(n),r=b(` has an IMD score of
        `),o=T("b"),u=b(s),i=O(),a=T("p"),f=b("Rank: "),c=T("b"),m=b(_),y=b(`
        / 32,844 LSOAs`)},m(C,S){$(C,e,S),h(e,t),h(e,r),h(e,o),h(o,u),$(C,i,S),$(C,a,S),h(a,f),h(a,c),h(c,m),h(a,y)},p(C,S){S&16&&n!==(n=C[4].LSOA11CD+"")&&B(t,n),S&16&&s!==(s=C[4].score+"")&&B(u,s),S&16&&_!==(_=C[4].rank.toLocaleString()+"")&&B(m,_)},d(C){C&&(p(e),p(i),p(a))}}}function Bf(l){let e,n;return e=new fe({props:{$$slots:{default:[Rf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function zf(l){let e,n,t,r;const o=[q(nt),{sourceLayer:nt},{paint:{"fill-color":Le(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":Q(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Bf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s});const u=[q(`${nt}-outline`),{sourceLayer:nt},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(a,f){w(e,a,f),$(a,n,f),w(t,a,f),r=!0},p(a,f){const c=f&7?ne(o,[f&0&&ae(q(nt)),f&0&&{sourceLayer:nt},f&6&&{paint:{"fill-color":Le(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Q(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?ne(u,[f&0&&ae(q(`${nt}-outline`)),f&0&&{sourceLayer:nt},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),k(e,a),k(t,a)}}}function Hf(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[jf],default:[Mf]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&jr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${nt}.pmtiles`,$$slots:{default:[zf]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),a&&a.c(),r=O(),v(o.$$.fragment)},m(f,c){w(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),w(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=jr(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),k(e,f),a&&a.d(f),k(o,f)}}}let nt="imd";function qf(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Gf extends Y{constructor(e){super(),K(this,e,qf,Hf,J,{})}}function Uf(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){v(e.$$.fragment),n=b(`
  Local Authority Districts`)},m(r,o){w(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),k(e,r)}}}function Wf(l){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vf(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[Wf]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=b("Data from "),v(t.$$.fragment),r=b(", as of January 2024."),o=O(),v(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),w(t,e,null),h(e,r),$(i,o,a),w(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),k(t),k(s,i)}}}function Xf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Vf]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function Jf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Yf(l){let e,n;return e=new fe({props:{$$slots:{default:[Jf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Kf(l){let e,n,t,r;const o=[q(Ft),{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Yf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",Qf);const u=[q(`${Ft}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(a,f){w(e,a,f),$(a,n,f),w(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(q(Ft)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(q(`${Ft}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),k(e,a),k(t,a)}}}function Zf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Xf],default:[Uf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new Ct({props:{data:`${he()}/v1/${Ft}.geojson`,$$slots:{default:[Kf]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}let Ft="local_authority_districts";function Qf(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function xf(l,e,n){let t=Z.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class eu extends Y{constructor(e){super(),K(this,e,xf,Zf,J,{})}}function tu(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){v(e.$$.fragment),n=b(`
  Local Planning Authorities`)},m(r,o){w(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),k(e,r)}}}function nu(l){let e;return{c(){e=b(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ru(l){let e;return{c(){e=b(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lu(l){let e;return{c(){e=b(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ou(l){let e;return{c(){e=b("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function su(l){let e;return{c(){e=b(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,y,C,S,I,R,A,M,L,P;return t=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[nu]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ru]},$$scope:{ctx:l}}}),u=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[lu]},$$scope:{ctx:l}}}),m=new ee({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ou]},$$scope:{ctx:l}}}),R=new ee({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[su]},$$scope:{ctx:l}}}),L=new De({}),{c(){e=T("p"),n=b("LPAs may be a "),v(t.$$.fragment),r=b(", "),v(o.$$.fragment),s=b("y, or "),v(u.$$.fragment),i=b("."),a=O(),f=T("p"),c=T("strong"),_=b(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),v(m.$$.fragment),y=b(" to get more details."),C=O(),S=T("p"),I=b("Data from ONS Geography via "),v(R.$$.fragment),A=b(", as of November 2022."),M=O(),v(L.$$.fragment)},m(E,N){$(E,e,N),h(e,n),w(t,e,null),h(e,r),w(o,e,null),h(e,s),w(u,e,null),h(e,i),$(E,a,N),$(E,f,N),h(f,c),h(c,_),w(m,c,null),h(c,y),$(E,C,N),$(E,S,N),h(S,I),w(R,S,null),h(S,A),$(E,M,N),w(L,E,N),P=!0},p(E,N){const j={};N&16&&(j.$$scope={dirty:N,ctx:E}),t.$set(j);const U={};N&16&&(U.$$scope={dirty:N,ctx:E}),o.$set(U);const H={};N&16&&(H.$$scope={dirty:N,ctx:E}),u.$set(H);const D={};N&16&&(D.$$scope={dirty:N,ctx:E}),m.$set(D);const F={};N&16&&(F.$$scope={dirty:N,ctx:E}),R.$set(F)},i(E){P||(g(t.$$.fragment,E),g(o.$$.fragment,E),g(u.$$.fragment,E),g(m.$$.fragment,E),g(R.$$.fragment,E),g(L.$$.fragment,E),P=!0)},o(E){d(t.$$.fragment,E),d(o.$$.fragment,E),d(u.$$.fragment,E),d(m.$$.fragment,E),d(R.$$.fragment,E),d(L.$$.fragment,E),P=!1},d(E){E&&(p(e),p(a),p(f),p(C),p(S),p(M)),k(t),k(o),k(u),k(m),k(R),k(L,E)}}}function au(l){let e,n,t;return n=new me({props:{$$slots:{default:[iu]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function fu(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function uu(l){let e,n;return e=new fe({props:{$$slots:{default:[fu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function cu(l){let e,n,t,r;const o=[q(rt),{sourceLayer:rt},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[uu]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s});const u=[q(`${rt}-outline`),{sourceLayer:rt},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(a,f){w(e,a,f),$(a,n,f),w(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(q(rt)),f&0&&{sourceLayer:rt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(q(`${rt}-outline`)),f&0&&{sourceLayer:rt},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),k(e,a),k(t,a)}}}function $u(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[au],default:[tu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${rt}.pmtiles`,$$slots:{default:[cu]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}let rt="local_planning_authorities";function pu(l,e,n){let t=Z.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class mu extends Y{constructor(e){super(),K(this,e,pu,$u,J,{})}}function _u(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){v(e.$$.fragment),n=b(`
  Parliamentary constituencies`)},m(r,o){w(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),k(e,r)}}}function gu(l){let e;return{c(){e=b(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function du(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[gu]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=b("Data from "),v(t.$$.fragment),r=b(", as of May 2023."),o=O(),v(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),w(t,e,null),h(e,r),$(i,o,a),w(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),k(t),k(s,i)}}}function hu(l){let e,n,t;return n=new me({props:{$$slots:{default:[du]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function bu(l){let e,n=l[3].Name+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&B(t,n)},d(r){r&&p(e)}}}function vu(l){let e,n;return e=new fe({props:{$$slots:{default:[bu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function wu(l){let e,n,t,r;const o=[q(lt),{sourceLayer:lt},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[vu]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",yu);const u=[q(`${lt}-outline`),{sourceLayer:lt},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(a,f){w(e,a,f),$(a,n,f),w(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(q(lt)),f&0&&{sourceLayer:lt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(q(`${lt}-outline`)),f&0&&{sourceLayer:lt},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),k(e,a),k(t,a)}}}function ku(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[hu],default:[_u]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${lt}.pmtiles`,$$slots:{default:[wu]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}let lt="parliamentary_constituencies";function yu(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Su(l,e,n){let t=Z.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Cu extends Y{constructor(e){super(),K(this,e,Su,ku,J,{})}}function Tu(l){let e;return{c(){e=b("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ou(l){let e;return{c(){e=b(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lu(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ou]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=T("p"),n=b("Most layers show air quality data from "),v(t.$$.fragment),r=b(`. The measurements are annual means, in units of
        Âµgm
        `),o=T("sup"),o.textContent="3",s=b(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=O(),v(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),w(t,e,null),h(e,r),h(e,o),h(e,s),$(f,u,c),w(i,f,c),a=!0},p(f,c){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){a||(g(t.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),k(t),k(i,f)}}}function Au(l){let e,n,t;return n=new me({props:{$$slots:{default:[Lu]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function Rr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,_,m,y,C,S,I,R;function A(L){l[7](L)}let M={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return l[0]!==void 0&&(M.value=l[0]),e=new dt({props:M}),W.push(()=>V(e,"value",A)),{c(){v(e.$$.fragment),t=O(),r=T("p"),s=b(o),u=O(),i=T("div"),a=T("label"),f=b(`Opacity
      `),c=T("input"),_=O(),m=T("img"),G(c,"type","range"),G(c,"min","0"),G(c,"max","100"),fn(m.src,y=l[5](l[0]))||G(m,"src",y),G(m,"width",150),G(m,"alt",C=`Legend for ${l[0]} layer`)},m(L,P){w(e,L,P),$(L,t,P),$(L,r,P),h(r,s),$(L,u,P),$(L,i,P),h(i,a),h(a,f),h(a,c),Ye(c,l[2]),$(L,_,P),$(L,m,P),S=!0,I||(R=[Ze(c,"change",l[8]),Ze(c,"input",l[8])],I=!0)},p(L,P){const E={};!n&&P&1&&(n=!0,E.value=L[0],X(()=>n=!1)),e.$set(E),(!S||P&1)&&o!==(o=L[3](L[0])+"")&&B(s,o),P&4&&Ye(c,L[2]),(!S||P&1&&!fn(m.src,y=L[5](L[0])))&&G(m,"src",y),(!S||P&1&&C!==(C=`Legend for ${L[0]} layer`))&&G(m,"alt",C)},i(L){S||(g(e.$$.fragment,L),S=!0)},o(L){d(e.$$.fragment,L),S=!1},d(L){L&&(p(t),p(r),p(u),p(i),p(_),p(m)),k(e,L),I=!1,xl(R)}}}function Iu(l){let e,n;const t=[q("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new zo({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&6?ne(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function Nu(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={$$slots:{right:[Au],default:[Tu]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[1]&&Rr(l);return o=new is({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Iu]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),a&&a.c(),r=O(),v(o.$$.fragment)},m(f,c){w(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),w(o,f,c),s=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&g(a,1)):(a=Rr(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&1&&(m.tiles=[f[4](f[0])]),c&2054&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),k(e,f),a&&a.d(f),k(o,f)}}}function Pu(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${C}`}function f(y){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${C}`}function c(y){r=y,n(1,r)}function _(y){s=y,n(0,s)}function m(){o=xt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s])},[s,r,o,i,a,f,c,_,m]}class Mu extends Y{constructor(e){super(),K(this,e,Pu,Nu,J,{})}}function Fu(l){let e;return{c(){e=b("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Eu(l){let e;return{c(){e=b(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Du(l){let e,n,t,r,o,s,u,i,a;return o=new ee({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Eu]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=T("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=O(),t=T("p"),r=b("Data from June 2019, produced by "),v(o.$$.fragment),s=b(". See there for methodology details"),u=O(),v(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),w(o,t,null),h(t,s),$(f,u,c),w(i,f,c),a=!0},p(f,c){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),k(o),k(i,f)}}}function ju(l){let e,n,t;return n=new me({props:{$$slots:{default:[Du]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function Br(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["55","65","75",">"]}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Ru(l){let e,n=l[3].noiseclass+"",t,r,o=zr(l[3].noiseclass)+"",s,u;return{c(){e=T("p"),t=b(n),r=b(" dB ("),s=b(o),u=b(")")},m(i,a){$(i,e,a),h(e,t),h(e,r),h(e,s),h(e,u)},p(i,a){a&8&&n!==(n=i[3].noiseclass+"")&&B(t,n),a&8&&o!==(o=zr(i[3].noiseclass)+"")&&B(s,o)},d(i){i&&p(e)}}}function Bu(l){let e,n;return e=new fe({props:{$$slots:{default:[Ru,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function zu(l){let e,n;const t=[q(Et),{sourceLayer:Et},{paint:{"fill-color":pt(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][0],"65.0-69.9":l[1][1],"70.0-74.9":l[1][1],">=75.0":l[1][2]},"red"),"fill-opacity":Q(.5,.8)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Bu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(q(Et)),s&0&&{sourceLayer:Et},s&2&&{paint:{"fill-color":pt(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":Q(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function Hu(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[ju],default:[Fu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Br(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Et}.pmtiles`,$$slots:{default:[zu]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),a&&a.c(),r=O(),v(o.$$.fragment)},m(f,c){w(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),w(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=Br(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&17&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),k(e,f),a&&a.d(f),k(o,f)}}}let Et="road_noise";function zr(l){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[l]}function qu(l,e,n){let t=[Z.sequential_low_to_high[0],Z.sequential_low_to_high[2],Z.sequential_low_to_high[4]],r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Gu extends Y{constructor(e){super(),K(this,e,qu,Hu,J,{})}}function Uu(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){v(e.$$.fragment),n=b(`
  Wards`)},m(r,o){w(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),k(e,r)}}}function Wu(l){let e;return{c(){e=b(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vu(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Wu]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=b("Data from "),v(t.$$.fragment),r=b(", as of May 2023."),o=O(),v(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),w(t,e,null),h(e,r),$(i,o,a),w(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),k(t),k(s,i)}}}function Xu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Vu]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function Ju(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Yu(l){let e,n;return e=new fe({props:{$$slots:{default:[Ju,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Ku(l){let e,n,t,r;const o=[q(ot),{sourceLayer:ot},{paint:{"fill-color":l[1],"fill-opacity":Q(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Yu]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new qe({props:s}),e.$on("click",Qu);const u=[q(`${ot}-outline`),{sourceLayer:ot},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new Oe({props:i}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(a,f){w(e,a,f),$(a,n,f),w(t,a,f),r=!0},p(a,f){const c=f&3?ne(o,[f&0&&ae(q(ot)),f&0&&{sourceLayer:ot},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Q(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?ne(u,[f&0&&ae(q(`${ot}-outline`)),f&0&&{sourceLayer:ot},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),k(e,a),k(t,a)}}}function Zu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Xu],default:[Uu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${ot}.pmtiles`,$$slots:{default:[Ku]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}let ot="wards";function Qu(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function xu(l,e,n){let t=Z.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class ec extends Y{constructor(e){super(),K(this,e,xu,Zu,J,{})}}function tc(l){let e;return{c(){e=b("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nc(l){let e,n,t,r;return t=new ee({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[tc]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=b("License: "),v(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),w(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&p(e),k(t)}}}class et extends Y{constructor(e){super(),K(this,e,null,nc,J,{})}}function rc(l){let e,n,t;return e=new Pe({props:{color:Z.bus_route_with_lane}}),{c(){v(e.$$.fragment),n=b(`
  Bus routes`)},m(r,o){w(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),k(e,r)}}}function lc(l){let e;return{c(){e=b(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oc(l){let e,n,t,r,o,s,u,i,a;return o=new ee({props:{href:"https://gtfs.org",$$slots:{default:[lc]},$$scope:{ctx:l}}}),i=new et({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=T("p"),r=b("Note this data is from OpenStreetMap (as of 9 August 2023), not "),v(o.$$.fragment),s=b(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),v(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),w(o,t,null),h(t,s),$(f,u,c),w(i,f,c),a=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),k(o),k(i,f)}}}function sc(l){let e,n,t;return n=new me({props:{$$slots:{default:[oc]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function ic(l){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ac(l){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fc(l){let e;function n(o,s){return o[2].has_bus_lane?ac:ic}let t=n(l),r=t(l);return{c(){r.c(),e=Ee()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function uc(l){let e,n;return e=new fe({props:{$$slots:{default:[fc,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function cc(l){let e,n;const t=[q(Dt),{sourceLayer:Dt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],Z.bus_route_with_lane,Z.bus_route_without_lane],"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[uc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(q(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function $c(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[sc],default:[rc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Dt}.pmtiles`,$$slots:{default:[cc]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}let Dt="bus_routes";function pc(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class mc extends Y{constructor(e){super(),K(this,e,pc,$c,J,{})}}function Hr(l){const e=Sc(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function qr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function _c(l){let e;return{c(){e=b("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gc(l){let e,n,t,r,o,s,u,i;return u=new et({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=O(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=O(),v(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),w(u,a,f),i=!0},p:te,i(a){i||(g(u.$$.fragment,a),i=!0)},o(a){d(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),k(u,a)}}}function dc(l){let e,n,t;return n=new me({props:{$$slots:{default:[gc]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function Gr(l){let e,n,t;return n=new xe({props:{$$slots:{default:[bc]},$$scope:{ctx:l}}}),{c(){e=T("div"),v(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function hc(l){let e,n,t=l[9]+"",r,o,s;return e=new Pe({props:{color:l[10]}}),{c(){v(e.$$.fragment),n=O(),r=b(t),o=O()},m(u,i){w(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:te,i(u){s||(g(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),k(e,u)}}}function Ur(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[hc]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){v(e.$$.fragment)},m(s,u){w(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function bc(l){let e,n,t=je(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Ur(qr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Ee()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=je(s[2]);let i;for(i=0;i<t.length;i+=1){const a=qr(s,t,i);r[i]?(r[i].p(a,u),g(r[i],1)):(r[i]=Ur(a),r[i].c(),g(r[i],1),r[i].m(e.parentNode,e))}for(ce(),i=t.length;i<r.length;i+=1)o(i);$e()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)g(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),yt(r,s)}}}function vc(l){Hr(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,_,m=l[8]+"",y;return{c(){e=T("h2"),t=b(n),r=O(),o=T("p"),s=b("Direction: "),u=T("b"),a=O(),f=T("p"),c=b("Width: "),_=T("b"),y=b(m)},m(C,S){$(C,e,S),h(e,t),$(C,r,S),$(C,o,S),h(o,s),h(o,u),u.innerHTML=i,$(C,a,S),$(C,f,S),h(f,c),h(f,_),h(_,y)},p(C,S){Hr(C),S&32&&n!==(n=C[6]+"")&&B(t,n),S&32&&i!==(i=C[7]+"")&&(u.innerHTML=i),S&32&&m!==(m=C[8]+"")&&B(y,m)},d(C){C&&(p(e),p(r),p(o),p(a),p(f))}}}function wc(l){let e,n;return e=new fe({props:{$$slots:{default:[vc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function kc(l){let e,n;const t=[q(jt),{sourceLayer:jt},{paint:{"line-color":pt(["get","kind"],{track:Z.cycle_paths.track,lane:Z.cycle_paths.lane,shared_use_segregated:Z.cycle_paths.shared_use_segregated,shared_use_unsegregated:Z.cycle_paths.shared_use_unsegregated},"red"),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Wr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[wc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),e.$on("click",Cc),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(q(jt)),s&0&&{sourceLayer:jt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Wr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function yc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[dc],default:[_c]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&Gr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${jt}.pmtiles`,$$slots:{default:[kc]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),a&&a.c(),r=O(),v(o.$$.fragment)},m(f,c){w(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),w(o,f,c),s=!0},p(f,[c]){const _={};c&8192&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=Gr(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&8195&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),k(e,f),a&&a.d(f),k(o,f)}}}let jt="cycle_paths";function Sc(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function Cc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Wr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function Tc(l,e,n){let t=[["track","Separated tracks",Z.cycle_paths.track],["lane","Unprotected lanes",Z.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",Z.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",Z.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class Oc extends Y{constructor(e){super(),K(this,e,Tc,yc,J,{})}}function Lc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){v(e.$$.fragment),n=b(`
  Major Road Network`)},m(r,o){w(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),k(e,r)}}}function Ac(l){let e;return{c(){e=b(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ic(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Ac]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=b("Data from the "),v(t.$$.fragment),r=b(", as of September 2021."),o=O(),v(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),w(t,e,null),h(e,r),$(i,o,a),w(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),k(t),k(s,i)}}}function Nc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ic]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function Pc(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function Mc(l){let e,n;return e=new fe({props:{$$slots:{default:[Pc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Fc(l){let e,n;const t=[q(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Mc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(q(Rt)),s&0&&{sourceLayer:Rt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function Ec(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Nc],default:[Lc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Rt}.pmtiles`,$$slots:{default:[Fc]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}let Rt="mrn";function Dc(l,e,n){let t=Z.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class jc extends Y{constructor(e){super(),K(this,e,Dc,Ec,J,{})}}function Rc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){v(e.$$.fragment),n=b(`
  Strategic Road Network`)},m(r,o){w(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),k(e,r)}}}function Bc(l){let e;return{c(){e=b(`OS Open Roads
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zc(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Bc]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=b("Data from "),v(t.$$.fragment),r=b(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),o=O(),v(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),w(t,e,null),h(e,r),$(i,o,a),w(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),k(t),k(s,i)}}}function Hc(l){let e,n,t;return n=new me({props:{$$slots:{default:[zc]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function qc(l){let e,n=(l[3].name??"Unknown SRN road")+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown SRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function Gc(l){let e,n;return e=new fe({props:{$$slots:{default:[qc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Uc(l){let e,n;const t=[q(Bt),{sourceLayer:Bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Gc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(q(Bt)),s&0&&{sourceLayer:Bt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function Wc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Hc],default:[Rc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Bt}.pmtiles`,$$slots:{default:[Uc]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}let Bt="srn";function Vc(l,e,n){let t=Z.srn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Xc extends Y{constructor(e){super(),K(this,e,Vc,Wc,J,{})}}function Jc(l){let e,n,t;return e=new Pe({props:{color:l[1]}}),{c(){v(e.$$.fragment),n=b(`
  National Cycle Network`)},m(r,o){w(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),k(e,r)}}}function Yc(l){let e;return{c(){e=b(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Kc(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Yc]},$$scope:{ctx:l}}}),s=new De({}),{c(){e=T("p"),n=b("Data from Sustrans about the "),v(t.$$.fragment),r=b(", downloaded on 22/01/2024."),o=O(),v(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),w(t,e,null),h(e,r),$(i,o,a),w(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),k(t),k(s,i)}}}function Zc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Kc]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function Vr(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=T("li"),n=b("Description: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&B(o,r)},d(s){s&&p(e)}}}function Xr(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=T("li"),n=b("Is greenway: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&B(o,r)},d(s){s&&p(e)}}}function Jr(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=T("li"),n=b("Route type: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&B(o,r)},d(s){s&&p(e)}}}function Yr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=T("li"),n=b("Route number: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&B(o,r)},d(s){s&&p(e)}}}function Kr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=T("li"),n=b("Route Category: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&B(o,r)},d(s){s&&p(e)}}}function Zr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=T("li"),n=b("Open Status: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&B(o,r)},d(s){s&&p(e)}}}function Qr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=T("li"),n=b("Surface: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&B(o,r)},d(s){s&&p(e)}}}function xr(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=T("li"),n=b("Quality: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&B(o,r)},d(s){s&&p(e)}}}function el(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=T("li"),n=b("Road Class: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&B(o,r)},d(s){s&&p(e)}}}function Qc(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&Vr(l),c=l[3].Greenway&&Xr(l),_=l[3].RouteType&&Jr(l),m=l[3].RouteNo&&Yr(l),y=l[3].RouteCat&&Kr(l),C=l[3].OpenStatus&&Zr(l),S=l[3].Surface&&Qr(l),I=l[3].Quality&&xr(l),R=l[3].RoadClass&&el(l);return{c(){e=T("ul"),f&&f.c(),n=O(),c&&c.c(),t=O(),_&&_.c(),r=O(),m&&m.c(),o=O(),y&&y.c(),s=O(),C&&C.c(),u=O(),S&&S.c(),i=O(),I&&I.c(),a=O(),R&&R.c()},m(A,M){$(A,e,M),f&&f.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),_&&_.m(e,null),h(e,r),m&&m.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),C&&C.m(e,null),h(e,u),S&&S.m(e,null),h(e,i),I&&I.m(e,null),h(e,a),R&&R.m(e,null)},p(A,M){A[3].Desc_?f?f.p(A,M):(f=Vr(A),f.c(),f.m(e,n)):f&&(f.d(1),f=null),A[3].Greenway?c?c.p(A,M):(c=Xr(A),c.c(),c.m(e,t)):c&&(c.d(1),c=null),A[3].RouteType?_?_.p(A,M):(_=Jr(A),_.c(),_.m(e,r)):_&&(_.d(1),_=null),A[3].RouteNo?m?m.p(A,M):(m=Yr(A),m.c(),m.m(e,o)):m&&(m.d(1),m=null),A[3].RouteCat?y?y.p(A,M):(y=Kr(A),y.c(),y.m(e,s)):y&&(y.d(1),y=null),A[3].OpenStatus?C?C.p(A,M):(C=Zr(A),C.c(),C.m(e,u)):C&&(C.d(1),C=null),A[3].Surface?S?S.p(A,M):(S=Qr(A),S.c(),S.m(e,i)):S&&(S.d(1),S=null),A[3].Quality?I?I.p(A,M):(I=xr(A),I.c(),I.m(e,a)):I&&(I.d(1),I=null),A[3].RoadClass?R?R.p(A,M):(R=el(A),R.c(),R.m(e,null)):R&&(R.d(1),R=null)},d(A){A&&p(e),f&&f.d(),c&&c.d(),_&&_.d(),m&&m.d(),y&&y.d(),C&&C.d(),S&&S.d(),I&&I.d(),R&&R.d()}}}function xc(l){let e,n;return e=new fe({props:{$$slots:{default:[Qc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function e$(l){let e,n;const t=[q(zt),{sourceLayer:zt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[xc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(q(zt)),s&0&&{sourceLayer:zt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function t$(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Zc],default:[Jc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${zt}.pmtiles`,$$slots:{default:[e$]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}let zt="national_cycle_network";function n$(l,e,n){let t=Z.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class r$ extends Y{constructor(e){super(),K(this,e,n$,t$,J,{})}}function l$(l){let e;return{c(){e=b("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function o$(l){let e;return{c(){e=b(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function s$(l){let e,n,t,r,o,s,u,i,a,f,c;return a=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[o$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,n=O(),t=T("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,r=O(),o=T("p"),o.textContent="Data valid as of 1 January, 2024",s=O(),u=T("p"),i=b(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),v(a.$$.fragment),f=b(".")},m(_,m){$(_,e,m),$(_,n,m),$(_,t,m),$(_,r,m),$(_,o,m),$(_,s,m),$(_,u,m),h(u,i),w(a,u,null),h(u,f),c=!0},p(_,m){const y={};m&32&&(y.$$scope={dirty:m,ctx:_}),a.$set(y)},i(_){c||(g(a.$$.fragment,_),c=!0)},o(_){d(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(r),p(o),p(s),p(u)),k(a)}}}function i$(l){let e,n,t;return n=new me({props:{$$slots:{default:[s$]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function tl(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function a$(l){let e,n,t=_t(l[4].angle-90)+"",r;return{c(){e=T("p"),n=new at(!1),r=b(" side of the road: no pavement"),n.a=r},m(o,s){$(o,e,s),n.m(t,e),h(e,r)},p(o,s){s&16&&t!==(t=_t(o[4].angle-90)+"")&&n.p(t)},d(o){o&&p(e)}}}function f$(l){let e,n,t=_t(l[4].angle-90)+"",r,o,s=l[4].left_average+"",u,i,a,f=l[4].left_minimum+"",c,_;return{c(){e=T("p"),n=new at(!1),r=b(` side of the road:
          `),o=T("b"),u=b(s),i=b(`
          m average,
          `),a=T("b"),c=b(f),_=b(`
          m minimum`),n.a=r},m(m,y){$(m,e,y),n.m(t,e),h(e,r),h(e,o),h(o,u),h(e,i),h(e,a),h(a,c),h(e,_)},p(m,y){y&16&&t!==(t=_t(m[4].angle-90)+"")&&n.p(t),y&16&&s!==(s=m[4].left_average+"")&&B(u,s),y&16&&f!==(f=m[4].left_minimum+"")&&B(c,f)},d(m){m&&p(e)}}}function u$(l){let e,n,t=_t(l[4].angle+90)+"",r;return{c(){e=T("p"),n=new at(!1),r=b(" side of the road: no pavement"),n.a=r},m(o,s){$(o,e,s),n.m(t,e),h(e,r)},p(o,s){s&16&&t!==(t=_t(o[4].angle+90)+"")&&n.p(t)},d(o){o&&p(e)}}}function c$(l){let e,n,t=_t(l[4].angle+90)+"",r,o,s=l[4].right_average+"",u,i,a,f=l[4].right_minimum+"",c,_;return{c(){e=T("p"),n=new at(!1),r=b(` side of the road:
          `),o=T("b"),u=b(s),i=b(`
          m average,
          `),a=T("b"),c=b(f),_=b(`
          m minimum`),n.a=r},m(m,y){$(m,e,y),n.m(t,e),h(e,r),h(e,o),h(o,u),h(e,i),h(e,a),h(a,c),h(e,_)},p(m,y){y&16&&t!==(t=_t(m[4].angle+90)+"")&&n.p(t),y&16&&s!==(s=m[4].right_average+"")&&B(u,s),y&16&&f!==(f=m[4].right_minimum+"")&&B(c,f)},d(m){m&&p(e)}}}function $$(l){let e,n;function t(a,f){return a[4].left_average?f$:a$}let r=t(l),o=r(l);function s(a,f){return a[4].right_average?c$:u$}let u=s(l),i=u(l);return{c(){o.c(),e=O(),i.c(),n=Ee()},m(a,f){o.m(a,f),$(a,e,f),i.m(a,f),$(a,n,f)},p(a,f){r===(r=t(a))&&o?o.p(a,f):(o.d(1),o=r(a),o&&(o.c(),o.m(e.parentNode,e))),u===(u=s(a))&&i?i.p(a,f):(i.d(1),i=u(a),i&&(i.c(),i.m(n.parentNode,n)))},d(a){a&&(p(e),p(n)),o.d(a),i.d(a)}}}function p$(l){let e,n;return e=new fe({props:{openOn:"hover",$$slots:{default:[$$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function m$(l){let e,n;const t=[q(Ht),{sourceLayer:Ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],l[2],l[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[p$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(q(Ht)),s&0&&{sourceLayer:Ht},t[2],t[3],s&6&&{paint:{"line-color":Le(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":He,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function _$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[i$],default:[l$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&tl(l);return o=new ke({props:{url:`pmtiles://${$n()}/v1/${Ht}.pmtiles`,$$slots:{default:[m$]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),a&&a.c(),r=O(),v(o.$$.fragment)},m(f,c){w(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),w(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=tl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),k(e,f),a&&a.d(f),k(o,f)}}}let Ht="pavement_widths";function g$(l){return l<45||l>315?"N":l<90?"NE":l<135?"E":l<180?"SE":l<225?"S":l<270?"SW":l<315?"W":"NW"}function _t(l){return`${g$(l)} <span style="display: inline-block; rotate: ${l}deg">â¬†</span>`}function d$(l,e,n){let t=Z.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class h$ extends Y{constructor(e){super(),K(this,e,d$,_$,J,{})}}function b$(l){let e;return{c(){e=b("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function v$(l){let e;return{c(){e=b("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function w$(l){let e;return{c(){e=b("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function k$(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new ee({props:{href:"https://www.pct.bike",$$slots:{default:[v$]},$$scope:{ctx:l}}}),a=new ee({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[w$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=O(),o=T("p"),s=b("See "),v(u.$$.fragment),i=b(" and "),v(a.$$.fragment),f=b(" for details on methodology and data sources.")},m(_,m){$(_,e,m),$(_,n,m),$(_,t,m),$(_,r,m),$(_,o,m),h(o,s),w(u,o,null),h(o,i),w(a,o,null),h(o,f),c=!0},p(_,m){const y={};m&1024&&(y.$$scope={dirty:m,ctx:_}),u.$set(y);const C={};m&1024&&(C.$$scope={dirty:m,ctx:_}),a.$set(C)},i(_){c||(g(u.$$.fragment,_),g(a.$$.fragment,_),c=!0)},o(_){d(u.$$.fragment,_),d(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(r),p(o)),k(u),k(a)}}}function y$(l){let e,n,t;return n=new me({props:{$$slots:{default:[k$]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function nl(l){let e,n,t,r,o,s,u,i;e=new Ge({props:{colorScale:l[3],limits:l[4]}});function a(m){l[7](m)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new eo({props:f}),W.push(()=>V(t,"value",a));function c(m){l[8](m)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(_.value=l[1]),s=new dt({props:_}),W.push(()=>V(s,"value",c)),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment),o=O(),v(s.$$.fragment)},m(m,y){w(e,m,y),$(m,n,y),w(t,m,y),$(m,o,y),w(s,m,y),i=!0},p(m,y){const C={};!r&&y&1&&(r=!0,C.value=m[0],X(()=>r=!1)),t.$set(C);const S={};!u&&y&2&&(u=!0,S.value=m[1],X(()=>u=!1)),s.$set(S)},i(m){i||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(s.$$.fragment,m),i=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(s.$$.fragment,m),i=!1},d(m){m&&(p(n),p(o)),k(e,m),k(t,m),k(s,m)}}}function S$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new at(!1),t=Ee(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function C$(l){let e,n;return e=new fe({props:{$$slots:{default:[S$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function T$(l){let e,n;const t=[q(it),{sourceLayer:it},{paint:{"line-color":Le(["get",l[1]],l[4],l[3]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[2]&&l[0]==it?"visible":"none"}}];let r={$$slots:{default:[C$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ae(q(it)),s&0&&{sourceLayer:it},s&26&&{paint:{"line-color":Le(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":Q(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==it?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function O$(l){let e,n=l[5](l[9])+"",t;return{c(){e=new at(!1),t=Ee(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function L$(l){let e,n;return e=new fe({props:{$$slots:{default:[O$,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function A$(l){let e,n;const t=[q(gt),{sourceLayer:gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get",l[1]],l[4],l[3]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[2]&&l[0]==gt?"visible":"none"}}];let r={$$slots:{default:[L$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&31?ne(t,[s&0&&ae(q(gt)),s&0&&{sourceLayer:gt},t[2],t[3],s&26&&{paint:{"line-color":Le(["get",o[1]],o[4],o[3]),"line-width":He,"line-opacity":Q(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==gt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function I$(l){let e,n,t,r,o,s,u,i;function a(_){l[6](_)}let f={$$slots:{right:[y$],default:[b$]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),W.push(()=>V(e,"checked",a));let c=l[2]&&nl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${it}.pmtiles`,$$slots:{default:[T$]},$$scope:{ctx:l}}}),u=new ke({props:{url:`pmtiles://${he()}/v1/${gt}.pmtiles`,$$slots:{default:[A$]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),c&&c.c(),r=O(),v(o.$$.fragment),s=O(),v(u.$$.fragment)},m(_,m){w(e,_,m),$(_,t,m),c&&c.m(_,m),$(_,r,m),w(o,_,m),$(_,s,m),w(u,_,m),i=!0},p(_,[m]){const y={};m&1024&&(y.$$scope={dirty:m,ctx:_}),!n&&m&4&&(n=!0,y.checked=_[2],X(()=>n=!1)),e.$set(y),_[2]?c?(c.p(_,m),m&4&&g(c,1)):(c=nl(_),c.c(),g(c,1),c.m(r.parentNode,r)):c&&(ce(),d(c,1,1,()=>{c=null}),$e());const C={};m&1031&&(C.$$scope={dirty:m,ctx:_}),o.$set(C);const S={};m&1031&&(S.$$scope={dirty:m,ctx:_}),u.$set(S)},i(_){i||(g(e.$$.fragment,_),g(c),g(o.$$.fragment,_),g(u.$$.fragment,_),i=!0)},o(_){d(e.$$.fragment,_),d(c),d(o.$$.fragment,_),d(u.$$.fragment,_),i=!1},d(_){_&&(p(t),p(r),p(s)),k(e,_),c&&c.d(_),k(o,_),k(u,_)}}}let it="pct_commute",gt="pct_school";function N$(l,e,n){let t=Z.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=it,s="baseline",u=!1;function i(_){let m=_.baseline,y=_.gov_target,C=_.go_dutch,S=`<h2>Trip purpose: ${o==it?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${m.toLocaleString()}</b></p>`,m==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let I=(y/m).toFixed(1),R=(C/m).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${R}x</b> of baseline)</p>`}return S}function a(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){s=_,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class P$ extends Y{constructor(e){super(),K(this,e,N$,I$,J,{})}}function M$(l){let e;return{c(){e=b("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function F$(l){let e;return{c(){e=b("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function E$(l){let e;return{c(){e=b(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function D$(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new ee({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[F$]},$$scope:{ctx:l}}}),f=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[E$]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=b("The average speed data is collected over a six-month period by "),v(t.$$.fragment),r=b(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",u=O(),i=T("p"),a=b(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),v(f.$$.fragment),c=b(".")},m(m,y){$(m,e,y),h(e,n),w(t,e,null),h(e,r),$(m,o,y),$(m,s,y),$(m,u,y),$(m,i,y),h(i,a),w(f,i,null),h(i,c),_=!0},p(m,y){const C={};y&256&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&256&&(S.$$scope={dirty:y,ctx:m}),f.$set(S)},i(m){_||(g(t.$$.fragment,m),g(f.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(f.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(u),p(i)),k(t),k(f)}}}function j$(l){let e,n,t;return n=new me({props:{$$slots:{default:[D$]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function rl(l){let e,n,t,r,o;e=new Ge({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new eo({props:u}),W.push(()=>V(t,"value",s)),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(i,a){w(e,i,a),$(i,n,a),w(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],X(()=>r=!1)),t.$set(f)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),k(e,i),k(t,i)}}}function R$(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,_=l[4][l[7].highest_description]+"",m,y;return{c(){e=T("p"),n=b("Posted speed limit: "),r=b(t),o=b(" mph"),s=O(),u=T("p"),i=b("Highest average speed: "),f=b(a),c=b(" mph (during "),m=b(_),y=b(")")},m(C,S){$(C,e,S),h(e,n),h(e,r),h(e,o),$(C,s,S),$(C,u,S),h(u,i),h(u,f),h(u,c),h(u,m),h(u,y)},p(C,S){S&128&&t!==(t=C[7].indicative_mph+"")&&B(r,t),S&128&&a!==(a=C[7].highest_mph+"")&&B(f,a),S&128&&_!==(_=C[4][C[7].highest_description]+"")&&B(m,_)},d(C){C&&(p(e),p(s),p(u))}}}function B$(l){let e,n;return e=new fe({props:{$$slots:{default:[R$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function z$(l){let e,n;const t=[q(qt),{sourceLayer:qt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get",l[0]],l[3],l[2]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[B$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&15?ne(t,[s&0&&ae(q(qt)),s&0&&{sourceLayer:qt},t[2],t[3],s&13&&{paint:{"line-color":Le(["get",o[0]],o[3],o[2]),"line-width":He,"line-opacity":Q(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function H$(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={$$slots:{right:[j$],default:[M$]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[1]&&rl(l);return o=new ke({props:{url:`pmtiles://${$n()}/v1/${qt}.pmtiles`,$$slots:{default:[z$]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),a&&a.c(),r=O(),v(o.$$.fragment)},m(f,c){w(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),w(o,f,c),s=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],X(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&g(a,1)):(a=rl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&259&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),k(e,f),a&&a.d(f),k(o,f)}}}let qt="road_speeds";function q$(l,e,n){let t=Z.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class G$ extends Y{constructor(e){super(),K(this,e,q$,H$,J,{})}}function U$(l){let e;return{c(){e=b("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function W$(l){let e;return{c(){e=b(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function V$(l){let e,n,t,r,o,s,u,i,a;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[W$]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",r=O(),o=T("p"),s=b(`License: Contains OS data Â© Crown copyright and database right
        2023. Made available under the `),v(u.$$.fragment),i=b(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),h(o,s),w(u,o,null),h(o,i),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(g(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),k(u)}}}function X$(l){let e,n,t;return n=new me({props:{$$slots:{default:[V$]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function ll(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function J$(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",_,m;return{c(){e=T("p"),n=b("Average width: "),t=T("b"),o=b(r),s=b(`
        meters`),u=O(),i=T("p"),a=b("Minimum width: "),f=T("b"),_=b(c),m=b(`
        meters`)},m(y,C){$(y,e,C),h(e,n),h(e,t),h(t,o),h(e,s),$(y,u,C),$(y,i,C),h(i,a),h(i,f),h(f,_),h(i,m)},p(y,C){C&16&&r!==(r=y[4].average+"")&&B(o,r),C&16&&c!==(c=y[4].minimum+"")&&B(_,c)},d(y){y&&(p(e),p(u),p(i))}}}function Y$(l){let e,n;return e=new fe({props:{$$slots:{default:[J$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function K$(l){let e,n;const t=[q(Gt),{sourceLayer:Gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Le(["get","average"],l[2],l[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Y$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(q(Gt)),s&0&&{sourceLayer:Gt},t[2],t[3],s&6&&{paint:{"line-color":Le(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":Q(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function Z$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[X$],default:[U$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&ll(l);return o=new ke({props:{url:`pmtiles://${$n()}/v1/${Gt}.pmtiles`,$$slots:{default:[K$]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),a&&a.c(),r=O(),v(o.$$.fragment)},m(f,c){w(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),w(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=ll(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),k(e,f),a&&a.d(f),k(o,f)}}}let Gt="road_widths";function Q$(l,e,n){let t=Z.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class x$ extends Y{constructor(e){super(),K(this,e,Q$,Z$,J,{})}}function ep(l){let e,n,t;return e=new Pe({props:{color:Z.trams}}),{c(){v(e.$$.fragment),n=b(`
  Trams`)},m(r,o){w(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),k(e,r)}}}function tp(l){let e,n,t,r;return t=new et({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=O(),v(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),w(t,o,s),r=!0},p:te,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),k(t,o)}}}function np(l){let e,n,t;return n=new me({props:{$$slots:{default:[tp]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function rp(l){let e,n;const t=[q(Ut),{sourceLayer:Ut},{paint:{"line-color":Z.trams,"line-width":5,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new Oe({props:r}),e.$on("click",op),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(q(Ut)),s&0&&{sourceLayer:Ut},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function lp(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[np],default:[ep]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Ut}.pmtiles`,$$slots:{default:[rp]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}let Ut="trams";function op(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function sp(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class ip extends Y{constructor(e){super(),K(this,e,sp,lp,J,{})}}function ap(l){let e;return{c(){e=b("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fp(l){let e;return{c(){e=b(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function up(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[fp]},$$scope:{ctx:l}}}),i=new De({}),{c(){e=T("p"),n=b("Data from the "),v(t.$$.fragment),r=b(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=O(),s=T("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=O(),v(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),w(t,e,null),h(e,r),$(f,o,c),$(f,s,c),$(f,u,c),w(i,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){a||(g(t.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),k(t),k(i,f)}}}function cp(l){let e,n,t;return n=new me({props:{$$slots:{default:[up]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function ol(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",n=O(),v(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),w(t,o,s),r=!0},p:te,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),k(t,o)}}}function $p(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,_,m,y,C,S=l[4].peak_description+"",I,R,A,M,L,P=l[4].total+"",E,N,j=l[4].total_description+"",U,H;return{c(){e=T("p"),n=b("Stop name: "),t=T("b"),o=b(r),s=O(),u=T("p"),i=b("Peak: "),a=T("b"),c=b(f),_=b(`
        buses during the busiest hour of any day`),m=O(),y=T("p"),C=b("The peak hour is "),I=b(S),R=O(),A=T("p"),M=b("Total buses per day: "),L=T("b"),E=b(P),N=b(`
        (for `),U=b(j),H=b(", the busiest day of the week)")},m(D,F){$(D,e,F),h(e,n),h(e,t),h(t,o),$(D,s,F),$(D,u,F),h(u,i),h(u,a),h(a,c),h(u,_),$(D,m,F),$(D,y,F),h(y,C),h(y,I),$(D,R,F),$(D,A,F),h(A,M),h(A,L),h(L,E),h(A,N),h(A,U),h(A,H)},p(D,F){F&16&&r!==(r=D[4].stop_name+"")&&B(o,r),F&16&&f!==(f=D[4].peak+"")&&B(c,f),F&16&&S!==(S=D[4].peak_description+"")&&B(I,S),F&16&&P!==(P=D[4].total+"")&&B(E,P),F&16&&j!==(j=D[4].total_description+"")&&B(U,j)},d(D){D&&(p(e),p(s),p(u),p(m),p(y),p(R),p(A))}}}function pp(l){let e,n;return e=new fe({props:{$$slots:{default:[$p,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function mp(l){let e,n;const t=[q(Wt),{sourceLayer:Wt},{paint:{"circle-color":Le(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[pp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new mt({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(q(Wt)),s&0&&{sourceLayer:Wt},s&6&&{paint:{"circle-color":Le(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function _p(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[cp],default:[ap]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&ol(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Wt}.pmtiles`,$$slots:{default:[mp]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),a&&a.c(),r=O(),v(o.$$.fragment)},m(f,c){w(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),w(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=ol(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),k(e,f),a&&a.d(f),k(o,f)}}}let Wt="bus_stops";function gp(l,e,n){let t=Z.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class dp extends Y{constructor(e){super(),K(this,e,gp,_p,J,{})}}function hp(l){let e,n,t;return{c(){e=T("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=Ze(e,"change",l[5]),n=!0)},p:te,d(r){r&&p(e),l[7](null),n=!1,t()}}}function sl(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[vp]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function bp(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Pe({props:{color:Vt}}),{c(){v(e.$$.fragment),n=b(`
        Show `),r=b(t),o=b(" issues")},m(u,i){w(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&B(r,t)},i(u){s||(g(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),k(e,u)}}}function vp(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[bp]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),W.push(()=>V(e,"checked",r)),{c(){v(e.$$.fragment)},m(s,u){w(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(g(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){k(e,s)}}}function wp(l){let e,n,t,r,o,s;e=new Cn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[hp]},$$scope:{ctx:l}}}),t=new to({props:{errorMessage:l[3]}});let u=l[2]>0&&sl(l);return{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment),r=O(),u&&u.c(),o=Ee()},m(i,a){w(e,i,a),$(i,n,a),w(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&g(u,1)):(u=sl(i),u.c(),g(u,1),u.m(o.parentNode,o)):u&&(ce(),d(u,1,1,()=>{u=null}),$e())},i(i){s||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(u),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(u),s=!1},d(i){i&&(p(n),p(r),p(o)),k(e,i),k(t,i),u&&u.d(i)}}}function kp(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,_,m,y,C=l[10].notes+"",S,I,R,A,M,L,P,E=l[10].id+"",N,j,U,H,D,F=(l[10].inspector??"???")+"",z,oe,se,ye=l[10].submission_time+"",de,Se,ie,Ne,Te,be=l[10].scheme_reference+"",re,pe,ge,ve=l[10].current_design_stage+"",_e;return{c(){e=T("div"),n=T("h2"),r=b(t),o=O(),s=T("p"),u=T("u"),u.textContent="Location",i=b(`
          : `),f=b(a),c=O(),_=T("p"),m=T("u"),m.textContent="Notes",y=b(`
          : `),S=b(C),I=O(),R=T("hr"),A=O(),M=T("p"),L=b("Critical issue ID: "),P=T("b"),N=b(E),j=O(),U=T("p"),H=b("Submitted by "),D=T("b"),z=b(F),oe=b(`
          at
          `),se=T("b"),de=b(ye),Se=O(),ie=T("p"),Ne=b("For scheme "),Te=T("b"),re=b(be),pe=b(`
          in stage
          `),ge=T("b"),_e=b(ve),Ce(e,"max-width","30vw")},m(Ie,Me){$(Ie,e,Me),h(e,n),h(n,r),h(e,o),h(e,s),h(s,u),h(s,i),h(s,f),h(e,c),h(e,_),h(_,m),h(_,y),h(_,S),h(e,I),h(e,R),h(e,A),h(e,M),h(M,L),h(M,P),h(P,N),h(e,j),h(e,U),h(U,H),h(U,D),h(D,z),h(U,oe),h(U,se),h(se,de),h(e,Se),h(e,ie),h(ie,Ne),h(ie,Te),h(Te,re),h(ie,pe),h(ie,ge),h(ge,_e)},p(Ie,Me){Me&1024&&t!==(t=Ie[10].critical_type+"")&&B(r,t),Me&1024&&a!==(a=Ie[10].location_description+"")&&B(f,a),Me&1024&&C!==(C=Ie[10].notes+"")&&B(S,C),Me&1024&&E!==(E=Ie[10].id+"")&&B(N,E),Me&1024&&F!==(F=(Ie[10].inspector??"???")+"")&&B(z,F),Me&1024&&ye!==(ye=Ie[10].submission_time+"")&&B(de,ye),Me&1024&&be!==(be=Ie[10].scheme_reference+"")&&B(re,be),Me&1024&&ve!==(ve=Ie[10].current_design_stage+"")&&B(_e,ve)},d(Ie){Ie&&p(e)}}}function yp(l){let e,n;return e=new fe({props:{$$slots:{default:[kp,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Sp(l){let e,n,t,r,o,s;const u=[q("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":Vt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let m=0;m<u.length;m+=1)i=x(i,u[m]);e=new mt({props:i}),e.$on("click",l[6]);const a=[q("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let m=0;m<a.length;m+=1)f=x(f,a[m]);t=new pn({props:f});const c=[q("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Vt,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let _={$$slots:{default:[yp]},$$scope:{ctx:l}};for(let m=0;m<c.length;m+=1)_=x(_,c[m]);return o=new mt({props:_}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment),r=O(),v(o.$$.fragment)},m(m,y){w(e,m,y),$(m,n,y),w(t,m,y),$(m,r,y),w(o,m,y),s=!0},p(m,y){const C=y&2?ne(u,[u[0],u[1],y&0&&{paint:{"circle-color":Vt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:m[1]?"visible":"none"}},u[4]]):{};e.$set(C);const S=y&2?ne(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:m[1]?"visible":"none"}}]):{};t.$set(S);const I=y&2?ne(c,[c[0],c[1],c[2],c[3],y&0&&{paint:{"circle-color":Vt,"circle-opacity":Q(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:m[1]?"visible":"none"}}]):{};y&2048&&(I.$$scope={dirty:y,ctx:m}),o.$set(I)},i(m){s||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),s=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),s=!1},d(m){m&&(p(n),p(r)),k(e,m),k(t,m),k(o,m)}}}function Cp(l){let e,n,t,r;return e=new Re({props:{label:"Critical Issues",$$slots:{default:[wp]},$$scope:{ctx:l}}}),t=new Ct({props:{id:wo,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Sp]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(o,s){w(e,o,s),$(o,n,s),w(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),k(e,o),k(t,o)}}}let wo="criticals",Vt="red";function Tp(l,e,n){let t;Ae(l,jn,m=>n(9,t=m));let r,o=!0,s=0,u="",i=yn();async function a(m){try{n(4,i=await Ca(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}async function f(m){let y=await t.getSource(wo).getClusterExpansionZoom(m.detail.features[0].properties.cluster_id);t.easeTo({center:m.detail.features[0].geometry.coordinates,zoom:y})}function c(m){W[m?"unshift":"push"](()=>{r=m,n(0,r)})}function _(m){o=m,n(1,o)}return[r,o,s,u,i,a,f,c,_]}class Op extends Y{constructor(e){super(),K(this,e,Tp,Cp,J,{})}}function Lp(l){let e;return{c(){e=b("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ap(l){let e;return{c(){e=b("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ip(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Ap]},$$scope:{ctx:l}}}),s=new et({}),{c(){e=T("p"),n=b("This shows "),v(t.$$.fragment),r=b(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),v(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),w(t,e,null),h(e,r),$(i,o,a),w(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),k(t),k(s,i)}}}function Np(l){let e,n,t;return n=new me({props:{$$slots:{default:[Ip]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function il(l){let e,n;return e=new Bn({props:{rows:l[1]}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Pp(l){let e,n=al(l[3])+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=al(r[3])+"")&&B(t,n)},d(r){r&&p(e)}}}function Mp(l){let e,n;return e=new fe({props:{$$slots:{default:[Pp,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Fp(l){let e,n;const t=[q(Xt),{sourceLayer:Xt},{paint:{"circle-color":pt(["get","crossing"],{traffic_signals:Z.signalized_crossing},Z.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Mp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new mt({props:r}),e.$on("click",Dp),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(q(Xt)),s&0&&{sourceLayer:Xt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function Ep(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[Np],default:[Lp]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&il(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Xt}.pmtiles`,$$slots:{default:[Fp]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),a&&a.c(),r=O(),v(o.$$.fragment)},m(f,c){w(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),w(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=il(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&17&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),k(e,f),a&&a.d(f),k(o,f)}}}let Xt="crossings";function al(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function Dp(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function jp(l,e,n){let t=!1,r=[["Signalized",Z.signalized_crossing],["Other",Z.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class Rp extends Y{constructor(e){super(),K(this,e,jp,Ep,J,{})}}function Bp(l){let e;return{c(){e=b("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zp(l){let e;return{c(){e=b("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hp(l){let e,n,t,r,o,s,u,i,a,f,c,_,m;return u=new ee({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[zp]},$$scope:{ctx:l}}}),f=new De({}),_=new et({}),{c(){e=T("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=O(),t=T("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=O(),o=T("p"),s=b("This layer is built from "),v(u.$$.fragment),i=b(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=O(),v(f.$$.fragment),c=O(),v(_.$$.fragment)},m(y,C){$(y,e,C),$(y,n,C),$(y,t,C),$(y,r,C),$(y,o,C),h(o,s),w(u,o,null),h(o,i),$(y,a,C),w(f,y,C),$(y,c,C),w(_,y,C),m=!0},p(y,C){const S={};C&32&&(S.$$scope={dirty:C,ctx:y}),u.$set(S)},i(y){m||(g(u.$$.fragment,y),g(f.$$.fragment,y),g(_.$$.fragment,y),m=!0)},o(y){d(u.$$.fragment,y),d(f.$$.fragment,y),d(_.$$.fragment,y),m=!1},d(y){y&&(p(e),p(n),p(t),p(r),p(o),p(a),p(c)),k(u),k(f,y),k(_,y)}}}function qp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Hp]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function fl(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Gp(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=T("p"),n=b("Gradient: "),t=T("b"),o=b(r),s=b(`
        %`)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,i){i&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&B(o,r)},d(u){u&&p(e)}}}function Up(l){let e,n;return e=new fe({props:{$$slots:{default:[Gp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Wp(l){let e,n,t,r;const o=[q(st),{sourceLayer:st},{manageHoverState:!0},{paint:{"line-color":Le(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":He,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[Up]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Oe({props:s});const u=[q(st+"_arrows"),{sourceLayer:st},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=x(i,u[a]);return t=new pn({props:i}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(a,f){w(e,a,f),$(a,n,f),w(t,a,f),r=!0},p(a,f){const c=f&7?ne(o,[f&0&&ae(q(st)),f&0&&{sourceLayer:st},o[2],f&6&&{paint:{"line-color":Le(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":He,"line-opacity":Q(1,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?ne(u,[f&0&&ae(q(st+"_arrows")),f&0&&{sourceLayer:st},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(g(e.$$.fragment,a),g(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),k(e,a),k(t,a)}}}function Vp(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[qp],default:[Bp]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&fl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${st}.pmtiles`,$$slots:{default:[Wp]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),a&&a.c(),r=O(),v(o.$$.fragment)},m(f,c){w(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),w(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=fl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&33&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),k(e,f),a&&a.d(f),k(o,f)}}}let st="gradient";function Xp(l,e,n){let t=Z.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Jp extends Y{constructor(e){super(),K(this,e,Xp,Vp,J,{})}}function Yp(l){let e,n,t;return{c(){e=T("img"),t=b(`
  Cycle parking`),fn(e.src,n=Lo)||G(e,"src",n),G(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:te,d(r){r&&(p(e),p(t))}}}function Kp(l){let e;return{c(){e=b("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zp(l){let e;return{c(){e=b("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qp(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Kp]},$$scope:{ctx:l}}}),i=new ee({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Zp]},$$scope:{ctx:l}}}),f=new et({}),{c(){e=T("p"),n=b("Cycle parking, according to "),v(t.$$.fragment),r=b(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),s=T("p"),u=b("Icon from "),v(i.$$.fragment),a=O(),v(f.$$.fragment)},m(_,m){$(_,e,m),h(e,n),w(t,e,null),h(e,r),$(_,o,m),$(_,s,m),h(s,u),w(i,s,null),$(_,a,m),w(f,_,m),c=!0},p(_,m){const y={};m&8&&(y.$$scope={dirty:m,ctx:_}),t.$set(y);const C={};m&8&&(C.$$scope={dirty:m,ctx:_}),i.$set(C)},i(_){c||(g(t.$$.fragment,_),g(i.$$.fragment,_),g(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(i.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(o),p(s),p(a)),k(t),k(i),k(f,_)}}}function xp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Qp]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function em(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=T("p"),n=b("Capacity: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&B(o,r)},d(s){s&&p(e)}}}function tm(l){let e,n;return e=new fe({props:{$$slots:{default:[em,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function nm(l){let e,n;const t=[q(Jt),{sourceLayer:Jt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[tm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new pn({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(q(Jt)),s&0&&{sourceLayer:Jt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function rm(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[xp],default:[Yp]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Jt}.pmtiles`,$$slots:{default:[nm]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}let Jt="cycle_parking";function lm(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class om extends Y{constructor(e){super(),K(this,e,lm,rm,J,{})}}function sm(l){let e;return{c(){e=b("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function im(l){let e,n,t,r;return t=new et({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=O(),v(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),w(t,o,s),r=!0},p:te,i(o){r||(g(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),k(t,o)}}}function am(l){let e,n,t;return n=new me({props:{$$slots:{default:[im]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function ul(l){let e,n,t;return n=new xe({props:{$$slots:{default:[$m]},$$scope:{ctx:l}}}),{c(){e=T("div"),v(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function fm(l){let e,n,t;return e=new Pe({props:{color:Z.education.schools}}),{c(){v(e.$$.fragment),n=b(`
        Schools`)},m(r,o){w(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),k(e,r)}}}function um(l){let e,n,t;return e=new Pe({props:{color:Z.education.colleges}}),{c(){v(e.$$.fragment),n=b(`
        Colleges`)},m(r,o){w(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),k(e,r)}}}function cm(l){let e,n,t;return e=new Pe({props:{color:Z.education.universities}}),{c(){v(e.$$.fragment),n=b(`
        Universities`)},m(r,o){w(e,r,o),$(r,n,o),t=!0},p:te,i(r){t||(g(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),k(e,r)}}}function $m(l){let e,n,t,r,o,s,u,i,a;function f(S){l[3](S)}let c={$$slots:{default:[fm]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),W.push(()=>V(e,"checked",f));function _(S){l[4](S)}let m={$$slots:{default:[um]},$$scope:{ctx:l}};l[1].college!==void 0&&(m.checked=l[1].college),r=new le({props:m}),W.push(()=>V(r,"checked",_));function y(S){l[5](S)}let C={$$slots:{default:[cm]},$$scope:{ctx:l}};return l[1].university!==void 0&&(C.checked=l[1].university),u=new le({props:C}),W.push(()=>V(u,"checked",y)),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment),s=O(),v(u.$$.fragment)},m(S,I){w(e,S,I),$(S,t,I),w(r,S,I),$(S,s,I),w(u,S,I),a=!0},p(S,I){const R={};I&128&&(R.$$scope={dirty:I,ctx:S}),!n&&I&2&&(n=!0,R.checked=S[1].school,X(()=>n=!1)),e.$set(R);const A={};I&128&&(A.$$scope={dirty:I,ctx:S}),!o&&I&2&&(o=!0,A.checked=S[1].college,X(()=>o=!1)),r.$set(A);const M={};I&128&&(M.$$scope={dirty:I,ctx:S}),!i&&I&2&&(i=!0,M.checked=S[1].university,X(()=>i=!1)),u.$set(M)},i(S){a||(g(e.$$.fragment,S),g(r.$$.fragment,S),g(u.$$.fragment,S),a=!0)},o(S){d(e.$$.fragment,S),d(r.$$.fragment,S),d(u.$$.fragment,S),a=!1},d(S){S&&(p(t),p(s)),k(e,S),k(r,S),k(u,S)}}}function pm(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&B(t,n)},d(r){r&&p(e)}}}function mm(l){let e,n;return e=new fe({props:{$$slots:{default:[pm,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function _m(l){let e,n;const t=[q(Yt),{sourceLayer:Yt},{paint:{"fill-color":pt(["get","type"],{school:Z.education.schools,college:Z.education.colleges,university:Z.education.universities},"grey"),"fill-opacity":Q(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:cl(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[mm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&3?ne(t,[s&0&&ae(q(Yt)),s&0&&{sourceLayer:Yt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:cl(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function gm(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[am],default:[sm]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&ul(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Yt}.pmtiles`,$$slots:{default:[_m]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),a&&a.c(),r=O(),v(o.$$.fragment)},m(f,c){w(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),w(o,f,c),s=!0},p(f,[c]){const _={};c&128&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=ul(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&131&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),k(e,f),a&&a.d(f),k(o,f)}}}let Yt="education";function cl(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function dm(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class hm extends Y{constructor(e){super(),K(this,e,dm,gm,J,{})}}function bm(l){let e,n,t,r;return e=new Pe({props:{color:l[4]}}),{c(){v(e.$$.fragment),n=O(),t=b(l[2])},m(o,s){w(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&B(t,o[2])},i(o){r||(g(e.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),k(e,o)}}}function vm(l){let e;const n=l[5].default,t=bt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&vt(t,n,r,r[7],e?kt(n,r[7],o,null):wt(r[7]),null)},i(r){e||(g(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function wm(l){let e,n,t;return n=new me({props:{$$slots:{default:[vm]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function km(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&B(t,n)},d(r){r&&p(e)}}}function ym(l){let e,n;return e=new fe({props:{$$slots:{default:[km,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Sm(l){let e,n;const t=[q(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":Q(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[ym]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&25?ne(t,[s&1&&ae(q(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Q(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function Cm(l){let e,n,t,r,o;function s(i){l[6](i)}let u={$$slots:{right:[wm],default:[bm]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${l[0]}.pmtiles`,$$slots:{default:[Sm]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],X(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${he()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}function Tm(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=Z[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class ko extends Y{constructor(e){super(),K(this,e,Tm,Cm,J,{name:0,singularNoun:1,pluralNoun:2})}}function Om(l){let e;return{c(){e=b("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lm(l){let e,n,t,r,o,s,u;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Om]},$$scope:{ctx:l}}}),s=new et({}),{c(){e=T("p"),n=b("This shows "),v(t.$$.fragment),r=b(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),v(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),w(t,e,null),h(e,r),$(i,o,a),w(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),k(t),k(s,i)}}}function Am(l){let e,n;return e=new ko({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Lm]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}class Im extends Y{constructor(e){super(),K(this,e,null,Am,J,{})}}function Nm(l){let e,n,t;return{c(){e=T("img"),t=b(`
  Railway Stations`),fn(e.src,n=Ao)||G(e,"src",n),G(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:te,d(r){r&&(p(e),p(t))}}}function Pm(l){let e;return{c(){e=b("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mm(l){let e;return{c(){e=b(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fm(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Pm]},$$scope:{ctx:l}}}),i=new ee({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Mm]},$$scope:{ctx:l}}}),c=new et({}),{c(){e=T("p"),n=b("This shows "),v(t.$$.fragment),r=b(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),s=T("p"),u=b("Icon from "),v(i.$$.fragment),a=b(". (Note that not all stations shown are National Rail.)"),f=O(),v(c.$$.fragment)},m(m,y){$(m,e,y),h(e,n),w(t,e,null),h(e,r),$(m,o,y),$(m,s,y),h(s,u),w(i,s,null),h(s,a),$(m,f,y),w(c,m,y),_=!0},p(m,y){const C={};y&8&&(C.$$scope={dirty:y,ctx:m}),t.$set(C);const S={};y&8&&(S.$$scope={dirty:y,ctx:m}),i.$set(S)},i(m){_||(g(t.$$.fragment,m),g(i.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(t.$$.fragment,m),d(i.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(e),p(o),p(s),p(f)),k(t),k(i),k(c,m)}}}function Em(l){let e,n,t;return n=new me({props:{$$slots:{default:[Fm]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function Dm(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&B(t,n)},d(r){r&&p(e)}}}function jm(l){let e,n;return e=new fe({props:{$$slots:{default:[Dm,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Rm(l){let e,n;const t=[q(En),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[jm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new pn({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&1?ne(t,[s&0&&ae(q(En)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function Bm(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Em],default:[Nm]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),W.push(()=>V(e,"checked",s)),r=new Ct({props:{data:`${he()}/v1/${En}.geojson`,$$slots:{default:[Rm]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],X(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}let En="railway_stations";function zm(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Hm extends Y{constructor(e){super(),K(this,e,zm,Bm,J,{})}}function qm(l){let e;return{c(){e=b("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gm(l){let e;return{c(){e=b("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Um(l){let e,n,t,r,o,s,u,i,a;return t=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[qm]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Gm]},$$scope:{ctx:l}}}),i=new et({}),{c(){e=T("p"),n=b("This shows "),v(t.$$.fragment),r=b(" and "),v(o.$$.fragment),s=b(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),v(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),w(t,e,null),h(e,r),w(o,e,null),h(e,s),$(f,u,c),w(i,f,c),a=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){a||(g(t.$$.fragment,f),g(o.$$.fragment,f),g(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),k(t),k(o),k(i,f)}}}function Wm(l){let e,n;return e=new ko({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Um]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}class Vm extends Y{constructor(e){super(),K(this,e,null,Wm,J,{})}}function Xm(l){let e;return{c(){e=b("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jm(l){let e;return{c(){e=b("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ym(l){let e;return{c(){e=b("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Km(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,y,C,S,I,R,A,M,L,P,E;return t=new ee({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Jm]},$$scope:{ctx:l}}}),I=new ee({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Ym]},$$scope:{ctx:l}}}),P=new De({}),{c(){e=T("p"),n=b("This layer shows collisions recorded in the "),v(t.$$.fragment),r=b(" dataset. Please note these limitations:"),o=O(),s=T("ul"),u=T("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=O(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=O(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,_=O(),m=T("li"),m.textContent='The "pedestrians" category also include mobility scooters',y=O(),C=T("li"),S=b("All limitations "),v(I.$$.fragment),R=b(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),A=O(),M=T("p"),M.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=O(),v(P.$$.fragment)},m(N,j){$(N,e,j),h(e,n),w(t,e,null),h(e,r),$(N,o,j),$(N,s,j),h(s,u),h(s,i),h(s,a),h(s,f),h(s,c),h(s,_),h(s,m),h(s,y),h(s,C),h(C,S),w(I,C,null),h(C,R),$(N,A,j),$(N,M,j),$(N,L,j),w(P,N,j),E=!0},p(N,j){const U={};j&16777216&&(U.$$scope={dirty:j,ctx:N}),t.$set(U);const H={};j&16777216&&(H.$$scope={dirty:j,ctx:N}),I.$set(H)},i(N){E||(g(t.$$.fragment,N),g(I.$$.fragment,N),g(P.$$.fragment,N),E=!0)},o(N){d(t.$$.fragment,N),d(I.$$.fragment,N),d(P.$$.fragment,N),E=!1},d(N){N&&(p(e),p(o),p(s),p(A),p(M),p(L)),k(t),k(I),k(P,N)}}}function Zm(l){let e,n,t;return n=new me({props:{$$slots:{default:[Km]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function $l(l){let e,n,t,r,o,s,u,i,a,f,c,_,m;return n=new xe({props:{small:!0,$$slots:{default:[n_]},$$scope:{ctx:l}}}),f=new Bn({props:{rows:l[14]}}),{c(){e=T("div"),v(n.$$.fragment),t=O(),r=T("div"),o=b(`Filter years:
      `),s=T("input"),u=b(`
      -
      `),i=T("input"),a=O(),v(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(y,C){$(y,e,C),w(n,e,null),h(e,t),h(e,r),h(r,o),h(r,s),Ye(s,l[4]),h(r,u),h(r,i),Ye(i,l[5]),h(e,a),w(f,e,null),c=!0,_||(m=[Ze(s,"input",l[20]),Ze(i,"input",l[21])],_=!0)},p(y,C){const S={};C&16777231&&(S.$$scope={dirty:C,ctx:y}),n.$set(S),C&16&&xt(s.value)!==y[4]&&Ye(s,y[4]),C&32&&xt(i.value)!==y[5]&&Ye(i,y[5])},i(y){c||(g(n.$$.fragment,y),g(f.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(f.$$.fragment,y),c=!1},d(y){y&&p(e),k(n),k(f),_=!1,xl(m)}}}function Qm(l){let e;return{c(){e=b("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xm(l){let e;return{c(){e=b("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function e_(l){let e;return{c(){e=b("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function t_(l){let e;return{c(){e=b("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function n_(l){let e,n,t,r,o,s,u,i,a,f,c,_;function m(L){l[16](L)}let y={$$slots:{default:[Qm]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new le({props:y}),W.push(()=>V(e,"checked",m));function C(L){l[17](L)}let S={$$slots:{default:[xm]},$$scope:{ctx:l}};l[1]!==void 0&&(S.checked=l[1]),r=new le({props:S}),W.push(()=>V(r,"checked",C));function I(L){l[18](L)}let R={$$slots:{default:[e_]},$$scope:{ctx:l}};l[2]!==void 0&&(R.checked=l[2]),u=new le({props:R}),W.push(()=>V(u,"checked",I));function A(L){l[19](L)}let M={$$slots:{default:[t_]},$$scope:{ctx:l}};return l[3]!==void 0&&(M.checked=l[3]),f=new le({props:M}),W.push(()=>V(f,"checked",A)),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment),s=O(),v(u.$$.fragment),a=O(),v(f.$$.fragment)},m(L,P){w(e,L,P),$(L,t,P),w(r,L,P),$(L,s,P),w(u,L,P),$(L,a,P),w(f,L,P),_=!0},p(L,P){const E={};P&16777216&&(E.$$scope={dirty:P,ctx:L}),!n&&P&1&&(n=!0,E.checked=L[0],X(()=>n=!1)),e.$set(E);const N={};P&16777216&&(N.$$scope={dirty:P,ctx:L}),!o&&P&2&&(o=!0,N.checked=L[1],X(()=>o=!1)),r.$set(N);const j={};P&16777216&&(j.$$scope={dirty:P,ctx:L}),!i&&P&4&&(i=!0,j.checked=L[2],X(()=>i=!1)),u.$set(j);const U={};P&16777216&&(U.$$scope={dirty:P,ctx:L}),!c&&P&8&&(c=!0,U.checked=L[3],X(()=>c=!1)),f.$set(U)},i(L){_||(g(e.$$.fragment,L),g(r.$$.fragment,L),g(u.$$.fragment,L),g(f.$$.fragment,L),_=!0)},o(L){d(e.$$.fragment,L),d(r.$$.fragment,L),d(u.$$.fragment,L),d(f.$$.fragment,L),_=!1},d(L){L&&(p(t),p(s),p(a)),k(e,L),k(r,L),k(u,L),k(f,L)}}}function pl(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=b("Pedestrian location: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&B(o,r)},d(s){s&&p(e)}}}function ml(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=b("Pedestrian movement: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&B(o,r)},d(s){s&&p(e)}}}function r_(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,_,m,y,C,S=_l(l[23])+"",I,R,A,M,L,P=l[23].pedestrian_location&&pl(l),E=l[23].pedestrian_movement&&ml(l);return{c(){e=T("p"),n=b("Year: "),t=T("b"),o=b(r),s=O(),u=T("p"),i=b("Severity: "),a=T("b"),c=b(f),_=O(),m=T("p"),y=b("Casualties: "),C=T("b"),I=b(S),R=O(),P&&P.c(),A=O(),E&&E.c(),M=O(),L=T("p"),L.textContent="Click to open full report in CycleStreets"},m(N,j){$(N,e,j),h(e,n),h(e,t),h(t,o),$(N,s,j),$(N,u,j),h(u,i),h(u,a),h(a,c),$(N,_,j),$(N,m,j),h(m,y),h(m,C),h(C,I),$(N,R,j),P&&P.m(N,j),$(N,A,j),E&&E.m(N,j),$(N,M,j),$(N,L,j)},p(N,j){j&8388608&&r!==(r=N[23].year+"")&&B(o,r),j&8388608&&f!==(f=N[10][N[23].severity]+"")&&B(c,f),j&8388608&&S!==(S=_l(N[23])+"")&&B(I,S),N[23].pedestrian_location?P?P.p(N,j):(P=pl(N),P.c(),P.m(A.parentNode,A)):P&&(P.d(1),P=null),N[23].pedestrian_movement?E?E.p(N,j):(E=ml(N),E.c(),E.m(M.parentNode,M)):E&&(E.d(1),E=null)},d(N){N&&(p(e),p(s),p(u),p(_),p(m),p(R),p(A),p(M),p(L)),P&&P.d(N),E&&E.d(N)}}}function l_(l){let e,n;return e=new fe({props:{$$slots:{default:[r_,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function o_(l){let e,n;const t=[q(Kt),{sourceLayer:Kt},{paint:{"circle-color":Le(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[l_]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new mt({props:r}),e.$on("click",i_),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&14528?ne(t,[s&0&&ae(q(Kt)),s&0&&{sourceLayer:Kt},s&14336&&{paint:{"circle-color":Le(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function s_(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={$$slots:{right:[Zm],default:[Xm]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[6]&&$l(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Kt}.pmtiles`,$$slots:{default:[o_]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),a&&a.c(),r=O(),v(o.$$.fragment)},m(f,c){w(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),w(o,f,c),s=!0},p(f,[c]){const _={};c&16777216&&(_.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,_.checked=f[6],X(()=>n=!1)),e.$set(_),f[6]?a?(a.p(f,c),c&64&&g(a,1)):(a=$l(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&16777408&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),k(e,f),a&&a.d(f),k(o,f)}}}let Kt="stats19";function _l(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function i_(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function a_(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(U,H,D,F,z,oe){let se=["any"];return o&&se.push(["get","pedestrian"]),s&&se.push(["get","cyclist"]),u&&se.push(["get","horse_rider"]),i&&se.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],se]}let _={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},m={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},C=Z.sequential_low_to_high[4],S=Z.sequential_low_to_high[2],I=Z.sequential_low_to_high[0],R=[["Fatal",C],["Serious",S],["Slight",I]];function A(U){r=U,n(6,r)}function M(U){o=U,n(0,o)}function L(U){s=U,n(1,s)}function P(U){u=U,n(2,u)}function E(U){i=U,n(3,i)}function N(){a=xt(this.value),n(4,a)}function j(){f=xt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,_,m,y,C,S,I,R,A,M,L,P,E,N,j]}class f_ extends Y{constructor(e){super(),K(this,e,a_,s_,J,{})}}function u_(l){let e;return{c(){e=b("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function c_(l){let e;return{c(){e=b(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $_(l){let e;return{c(){e=b("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function p_(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new ee({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[c_]},$$scope:{ctx:l}}}),o=new ee({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[$_]},$$scope:{ctx:l}}}),f=new De({}),{c(){e=T("p"),n=b("AADF (annual average daily flow) data from "),v(t.$$.fragment),r=b(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),v(o.$$.fragment),s=b(" for details and caveats about the measurements."),u=O(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=O(),v(f.$$.fragment)},m(_,m){$(_,e,m),h(e,n),w(t,e,null),h(e,r),w(o,e,null),h(e,s),$(_,u,m),$(_,i,m),$(_,a,m),w(f,_,m),c=!0},p(_,m){const y={};m&64&&(y.$$scope={dirty:m,ctx:_}),t.$set(y);const C={};m&64&&(C.$$scope={dirty:m,ctx:_}),o.$set(C)},i(_){c||(g(t.$$.fragment,_),g(o.$$.fragment,_),g(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(u),p(i),p(a)),k(t),k(o),k(f,_)}}}function m_(l){let e,n,t;return n=new me({props:{$$slots:{default:[p_]},$$scope:{ctx:l}}}),{c(){e=T("span"),v(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function gl(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[3]}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function __(l){let e,n=l[5].location+"",t,r,o,s,u=l[5].year+"",i,a,f,c=l[5].motor_vehicles.toLocaleString()+"",_,m,y,C,S=l[5].year+"",I,R,A,M=l[5].pedal_cycles.toLocaleString()+"",L,P,E,N,j,U=l[5].method+"",H;return{c(){e=T("h2"),t=b(n),r=O(),o=T("p"),s=b("Total motor vehicles ("),i=b(u),a=b(` AADF):
        `),f=T("b"),_=b(c),m=O(),y=T("p"),C=b("Total pedal cycles ("),I=b(S),R=b(` AADF):
        `),A=T("b"),L=b(M),P=O(),E=T("p"),N=b("Count method: "),j=T("b"),H=b(U)},m(D,F){$(D,e,F),h(e,t),$(D,r,F),$(D,o,F),h(o,s),h(o,i),h(o,a),h(o,f),h(f,_),$(D,m,F),$(D,y,F),h(y,C),h(y,I),h(y,R),h(y,A),h(A,L),$(D,P,F),$(D,E,F),h(E,N),h(E,j),h(j,H)},p(D,F){F&32&&n!==(n=D[5].location+"")&&B(t,n),F&32&&u!==(u=D[5].year+"")&&B(i,u),F&32&&c!==(c=D[5].motor_vehicles.toLocaleString()+"")&&B(_,c),F&32&&S!==(S=D[5].year+"")&&B(I,S),F&32&&M!==(M=D[5].pedal_cycles.toLocaleString()+"")&&B(L,M),F&32&&U!==(U=D[5].method+"")&&B(H,U)},d(D){D&&(p(e),p(r),p(o),p(m),p(y),p(P),p(E))}}}function g_(l){let e,n;return e=new fe({props:{$$slots:{default:[__,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function d_(l){let e,n;const t=[q(Zt),{sourceLayer:Zt},{paint:{"circle-color":Le(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[g_]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new mt({props:r}),e.$on("click",b_),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&7?ne(t,[s&0&&ae(q(Zt)),s&0&&{sourceLayer:Zt},s&6&&{paint:{"circle-color":Le(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function h_(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={$$slots:{right:[m_],default:[u_]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),W.push(()=>V(e,"checked",u));let a=l[0]&&gl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Zt}.pmtiles`,$$slots:{default:[d_]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),t=O(),a&&a.c(),r=O(),v(o.$$.fragment)},m(f,c){w(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),w(o,f,c),s=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],X(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&g(a,1)):(a=gl(f),a.c(),g(a,1),a.m(r.parentNode,r)):a&&(ce(),d(a,1,1,()=>{a=null}),$e());const m={};c&65&&(m.$$scope={dirty:c,ctx:f}),o.$set(m)},i(f){s||(g(e.$$.fragment,f),g(a),g(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),k(e,f),a&&a.d(f),k(o,f)}}}let Zt="vehicle_counts";function b_(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function v_(l,e,n){let t=Z.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class w_ extends Y{constructor(e){super(),K(this,e,v_,h_,J,{})}}function k_(l){let e,n,t,r,o,s,u,i;return e=new hm({}),t=new Im({}),o=new Vm({}),u=new Hm({}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment),r=O(),v(o.$$.fragment),s=O(),v(u.$$.fragment)},m(a,f){w(e,a,f),$(a,n,f),w(t,a,f),$(a,r,f),w(o,a,f),$(a,s,f),w(u,a,f),i=!0},i(a){i||(g(e.$$.fragment,a),g(t.$$.fragment,a),g(o.$$.fragment,a),g(u.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),k(e,a),k(t,a),k(o,a),k(u,a)}}}function y_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[k_]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function S_(l){let e,n,t,r,o,s,u,i,a,f,c,_;return e=new Oc({}),t=new r$({}),o=new jc({}),u=new Xc({}),a=new om({}),c=new Rp({}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment),r=O(),v(o.$$.fragment),s=O(),v(u.$$.fragment),i=O(),v(a.$$.fragment),f=O(),v(c.$$.fragment)},m(m,y){w(e,m,y),$(m,n,y),w(t,m,y),$(m,r,y),w(o,m,y),$(m,s,y),w(u,m,y),$(m,i,y),w(a,m,y),$(m,f,y),w(c,m,y),_=!0},i(m){_||(g(e.$$.fragment,m),g(t.$$.fragment,m),g(o.$$.fragment,m),g(u.$$.fragment,m),g(a.$$.fragment,m),g(c.$$.fragment,m),_=!0)},o(m){d(e.$$.fragment,m),d(t.$$.fragment,m),d(o.$$.fragment,m),d(u.$$.fragment,m),d(a.$$.fragment,m),d(c.$$.fragment,m),_=!1},d(m){m&&(p(n),p(r),p(s),p(i),p(f)),k(e,m),k(t,m),k(o,m),k(u,m),k(a,m),k(c,m)}}}function C_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[S_]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function T_(l){let e,n,t,r,o,s;return e=new mc({}),t=new ip({}),o=new dp({}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment),r=O(),v(o.$$.fragment)},m(u,i){w(e,u,i),$(u,n,i),w(t,u,i),$(u,r,i),w(o,u,i),s=!0},i(u){s||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),k(e,u),k(t,u),k(o,u)}}}function O_(l){let e,n,t,r,o,s,u,i,a,f;return e=new Cu({}),t=new ec({}),o=new Pf({}),u=new eu({}),a=new mu({}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment),r=O(),v(o.$$.fragment),s=O(),v(u.$$.fragment),i=O(),v(a.$$.fragment)},m(c,_){w(e,c,_),$(c,n,_),w(t,c,_),$(c,r,_),w(o,c,_),$(c,s,_),w(u,c,_),$(c,i,_),w(a,c,_),f=!0},i(c){f||(g(e.$$.fragment,c),g(t.$$.fragment,c),g(o.$$.fragment,c),g(u.$$.fragment,c),g(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),k(e,c),k(t,c),k(o,c),k(u,c),k(a,c)}}}function L_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[O_]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function A_(l){let e,n,t,r;return e=new wf({}),t=new Gf({}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(o,s){w(e,o,s),$(o,n,s),w(t,o,s),r=!0},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),k(e,o),k(t,o)}}}function I_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[A_]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function N_(l){let e,n,t,r,o,s;return e=new x$({}),t=new h$({}),o=new G$({}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment),r=O(),v(o.$$.fragment)},m(u,i){w(e,u,i),$(u,n,i),w(t,u,i),$(u,r,i),w(o,u,i),s=!0},i(u){s||(g(e.$$.fragment,u),g(t.$$.fragment,u),g(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),k(e,u),k(t,u),k(o,u)}}}function P_(l){let e,n,t,r,o,s,u,i,a=Tn()=="Private (development)",f,c,_,m,y;e=new w_({}),t=new f_({}),o=new P$({}),u=new Jp({});let C=a&&N_();return c=new Mu({}),m=new Gu({}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment),r=O(),v(o.$$.fragment),s=O(),v(u.$$.fragment),i=O(),C&&C.c(),f=O(),v(c.$$.fragment),_=O(),v(m.$$.fragment)},m(S,I){w(e,S,I),$(S,n,I),w(t,S,I),$(S,r,I),w(o,S,I),$(S,s,I),w(u,S,I),$(S,i,I),C&&C.m(S,I),$(S,f,I),w(c,S,I),$(S,_,I),w(m,S,I),y=!0},p:te,i(S){y||(g(e.$$.fragment,S),g(t.$$.fragment,S),g(o.$$.fragment,S),g(u.$$.fragment,S),g(C),g(c.$$.fragment,S),g(m.$$.fragment,S),y=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(o.$$.fragment,S),d(u.$$.fragment,S),d(C),d(c.$$.fragment,S),d(m.$$.fragment,S),y=!1},d(S){S&&(p(n),p(r),p(s),p(i),p(f),p(_)),k(e,S),k(t,S),k(o,S),k(u,S),C&&C.d(S),k(c,S),k(m,S)}}}function M_(l){let e,n;return e=new xe({props:{small:!0,$$slots:{default:[P_]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function F_(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new qo({props:u}),W.push(()=>V(e,"enabled",s)),r=new ks({}),{c(){v(e.$$.fragment),t=O(),v(r.$$.fragment)},m(i,a){w(e,i,a),$(i,t,a),w(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],X(()=>n=!1)),e.$set(f)},i(i){o||(g(e.$$.fragment,i),g(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),k(e,i),k(r,i)}}}function E_(l){let e,n,t,r,o,s,u,i,a,f,c,_,m,y,C,S,I,R;return e=new Op({}),t=new Re({props:{label:"Trip generators",$$slots:{default:[y_]},$$scope:{ctx:l}}}),o=new Re({props:{label:"Existing infrastructure",$$slots:{default:[C_]},$$scope:{ctx:l}}}),u=new Re({props:{label:"Public transit",$$slots:{default:[T_]},$$scope:{ctx:l}}}),a=new Re({props:{label:"Boundaries",$$slots:{default:[L_]},$$scope:{ctx:l}}}),c=new Re({props:{label:"Census",$$slots:{default:[I_]},$$scope:{ctx:l}}}),m=new Re({props:{label:"Other",$$slots:{default:[M_]},$$scope:{ctx:l}}}),C=new Re({props:{label:"Tools",$$slots:{default:[F_]},$$scope:{ctx:l}}}),I=new Ho({props:{disabled:!l[1]}}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment),r=O(),v(o.$$.fragment),s=O(),v(u.$$.fragment),i=O(),v(a.$$.fragment),f=O(),v(c.$$.fragment),_=O(),v(m.$$.fragment),y=O(),v(C.$$.fragment),S=O(),v(I.$$.fragment)},m(A,M){w(e,A,M),$(A,n,M),w(t,A,M),$(A,r,M),w(o,A,M),$(A,s,M),w(u,A,M),$(A,i,M),w(a,A,M),$(A,f,M),w(c,A,M),$(A,_,M),w(m,A,M),$(A,y,M),w(C,A,M),$(A,S,M),w(I,A,M),R=!0},p(A,M){const L={};M&16&&(L.$$scope={dirty:M,ctx:A}),t.$set(L);const P={};M&16&&(P.$$scope={dirty:M,ctx:A}),o.$set(P);const E={};M&16&&(E.$$scope={dirty:M,ctx:A}),u.$set(E);const N={};M&16&&(N.$$scope={dirty:M,ctx:A}),a.$set(N);const j={};M&16&&(j.$$scope={dirty:M,ctx:A}),c.$set(j);const U={};M&16&&(U.$$scope={dirty:M,ctx:A}),m.$set(U);const H={};M&17&&(H.$$scope={dirty:M,ctx:A}),C.$set(H);const D={};M&2&&(D.disabled=!A[1]),I.$set(D)},i(A){R||(g(e.$$.fragment,A),g(t.$$.fragment,A),g(o.$$.fragment,A),g(u.$$.fragment,A),g(a.$$.fragment,A),g(c.$$.fragment,A),g(m.$$.fragment,A),g(C.$$.fragment,A),g(I.$$.fragment,A),R=!0)},o(A){d(e.$$.fragment,A),d(t.$$.fragment,A),d(o.$$.fragment,A),d(u.$$.fragment,A),d(a.$$.fragment,A),d(c.$$.fragment,A),d(m.$$.fragment,A),d(C.$$.fragment,A),d(I.$$.fragment,A),R=!1},d(A){A&&(p(n),p(r),p(s),p(i),p(f),p(_),p(y),p(S)),k(e,A),k(t,A),k(o,A),k(u,A),k(a,A),k(c,A),k(m,A),k(C,A),k(I,A)}}}function D_(l){let e,n;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=x(r,t[o]);return e=new qe({props:r}),{c(){v(e.$$.fragment)},m(o,s){w(e,o,s),n=!0},p(o,s){const u=s&2?ne(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(g(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){k(e,o)}}}function j_(l){let e,n,t,r;return e=new Re({props:{label:"Layers",open:!0,$$slots:{default:[E_]},$$scope:{ctx:l}}}),t=new Ct({props:{data:l[2],$$slots:{default:[D_]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(o,s){w(e,o,s),$(o,n,s),w(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),k(e,o),k(t,o)}}}function R_(l,e,n){let t,r;Ae(l,Or,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&Or.set(!t)},[t,r,o,s]}class B_ extends Y{constructor(e){super(),K(this,e,R_,j_,J,{})}}function dl(l){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function z_(l){let e,n=l[0]&&dl();return{c(){n&&n.c(),e=Ee()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=dl(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:te,o:te,d(t){t&&p(e),n&&n.d(t)}}}function H_(l,e,n){let{loadFile:t}=e,r=!0;return Rn(async()=>{let s=await(await fetch(`${$n()}/v1/all_schemes_output.geojson.gz`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class q_ extends Y{constructor(e){super(),K(this,e,H_,z_,J,{loadFile:1})}}function hl(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=b("Current milestone: "),r=b(t)},m(s,u){$(s,e,u),h(e,n),h(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&B(r,t)},d(s){s&&p(e)}}}function G_(l){let e;return{c(){e=b("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function U_(l){let e;return{c(){e=b("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function W_(l){let e,n,t,r;return e=new $t({props:{$$slots:{default:[G_]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new $t({props:{$$slots:{default:[U_]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(o,s){w(e,o,s),$(o,n,s),w(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),k(e,o),k(t,o)}}}function V_(l){var j,U,H,D;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((j=l[0].browse)==null?void 0:j.authority_or_region)+"",a,f,c,_,m=((U=l[0].browse)==null?void 0:U.capital_scheme_id)+"",y,C,S,I,R=((H=l[0].browse)==null?void 0:H.funding_programme)+"",A,M,L,P,E,N=((D=l[0].browse)==null?void 0:D.current_milestone)&&hl(l);return P=new Go({props:{$$slots:{default:[W_]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=b("Scheme reference: "),r=b(t),o=O(),s=T("p"),u=b("Authority or region: "),a=b(i),f=O(),c=T("p"),_=b("Capital scheme ID: "),y=b(m),C=O(),S=T("p"),I=b("Funding programme: "),A=b(R),M=O(),N&&N.c(),L=O(),v(P.$$.fragment)},m(F,z){$(F,e,z),h(e,n),h(e,r),$(F,o,z),$(F,s,z),h(s,u),h(s,a),$(F,f,z),$(F,c,z),h(c,_),h(c,y),$(F,C,z),$(F,S,z),h(S,I),h(S,A),$(F,M,z),N&&N.m(F,z),$(F,L,z),w(P,F,z),E=!0},p(F,z){var se,ye,de,Se;(!E||z&1)&&t!==(t=F[0].scheme_reference+"")&&B(r,t),(!E||z&1)&&i!==(i=((se=F[0].browse)==null?void 0:se.authority_or_region)+"")&&B(a,i),(!E||z&1)&&m!==(m=((ye=F[0].browse)==null?void 0:ye.capital_scheme_id)+"")&&B(y,m),(!E||z&1)&&R!==(R=((de=F[0].browse)==null?void 0:de.funding_programme)+"")&&B(A,R),(Se=F[0].browse)!=null&&Se.current_milestone?N?N.p(F,z):(N=hl(F),N.c(),N.m(L.parentNode,L)):N&&(N.d(1),N=null);const oe={};z&32&&(oe.$$scope={dirty:z,ctx:F}),P.$set(oe)},i(F){E||(g(P.$$.fragment,F),E=!0)},o(F){d(P.$$.fragment,F),E=!1},d(F){F&&(p(e),p(o),p(s),p(f),p(c),p(C),p(S),p(M),p(L)),N&&N.d(F),k(P,F)}}}function X_(l){let e,n;return e=new Re({props:{label:`${l[0].scheme_name}`,$$slots:{default:[V_]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function J_(l,e,n){let t,r;Ae(l,Lt,i=>n(3,t=i)),Ae(l,jn,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Io(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";No(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class Y_ extends Y{constructor(e){super(),K(this,e,J_,X_,J,{scheme:0})}}function bl(l){let e,n,t,r=l[0].status+"",o;return{c(){e=T("p"),n=b("Status: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].status+"")&&B(o,r)},d(s){s&&p(e)}}}function vl(l){let e,n,t,r=l[0].timescale+"",o;return{c(){e=T("p"),n=b("Timescale: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale+"")&&B(o,r)},d(s){s&&p(e)}}}function wl(l){let e,n,t,r=l[0].timescale_year+"",o;return{c(){e=T("p"),n=b("Estimated completion year: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale_year+"")&&B(o,r)},d(s){s&&p(e)}}}function kl(l){let e,n,t,r=l[0].year_published+"",o;return{c(){e=T("p"),n=b("Scheme most recently published: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_published+"")&&B(o,r)},d(s){s&&p(e)}}}function yl(l){let e,n,t,r=l[0].year_consulted+"",o;return{c(){e=T("p"),n=b("Scheme most recently consulted on: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_consulted+"")&&B(o,r)},d(s){s&&p(e)}}}function K_(l){let e,n,t,r,o,s=l[0].status&&bl(l),u=l[0].timescale&&vl(l),i=l[0].timescale_year&&wl(l),a=l[0].year_published&&kl(l),f=l[0].year_consulted&&yl(l);return{c(){s&&s.c(),e=O(),u&&u.c(),n=O(),i&&i.c(),t=O(),a&&a.c(),r=O(),f&&f.c(),o=Ee()},m(c,_){s&&s.m(c,_),$(c,e,_),u&&u.m(c,_),$(c,n,_),i&&i.m(c,_),$(c,t,_),a&&a.m(c,_),$(c,r,_),f&&f.m(c,_),$(c,o,_)},p(c,[_]){c[0].status?s?s.p(c,_):(s=bl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?u?u.p(c,_):(u=vl(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),c[0].timescale_year?i?i.p(c,_):(i=wl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,_):(a=kl(c),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null),c[0].year_consulted?f?f.p(c,_):(f=yl(c),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i:te,o:te,d(c){c&&(p(e),p(n),p(t),p(r),p(o)),s&&s.d(c),u&&u.d(c),i&&i.d(c),a&&a.d(c),f&&f.d(c)}}}function Z_(l,e,n){let{props:t}=e;return l.$$set=r=>{"props"in r&&n(0,t=r.props)},[t]}class yo extends Y{constructor(e){super(),K(this,e,Z_,K_,J,{props:0})}}function Sl(l){let e,n,t,r=l[0].budget.toLocaleString()+"",o,s;return{c(){e=T("p"),n=b("Cost: "),t=T("b"),o=b(r),s=b(`
    GBP`)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,i){i&1&&r!==(r=u[0].budget.toLocaleString()+"")&&B(o,r)},d(u){u&&p(e)}}}function Cl(l){let e;return{c(){e=T("p"),e.textContent="Development is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tl(l){let e;return{c(){e=T("p"),e.textContent="Construction is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ol(l){let e,n,t,r;return{c(){e=T("p"),n=b("Funding sources: "),t=T("b"),r=b(l[1])},m(o,s){$(o,e,s),h(e,n),h(e,t),h(t,r)},p(o,s){s&2&&B(r,o[1])},d(o){o&&p(e)}}}function Q_(l){let e,n,t,r,o=l[0].budget&&Sl(l),s=l[0].development_funded&&Cl(),u=l[0].construction_funded&&Tl(),i=l[1]&&Ol(l);return{c(){o&&o.c(),e=O(),s&&s.c(),n=O(),u&&u.c(),t=O(),i&&i.c(),r=Ee()},m(a,f){o&&o.m(a,f),$(a,e,f),s&&s.m(a,f),$(a,n,f),u&&u.m(a,f),$(a,t,f),i&&i.m(a,f),$(a,r,f)},p(a,[f]){a[0].budget?o?o.p(a,f):(o=Sl(a),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),a[0].development_funded?s||(s=Cl(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),a[0].construction_funded?u||(u=Tl(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),a[1]?i?i.p(a,f):(i=Ol(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i:te,o:te,d(a){a&&(p(e),p(n),p(t),p(r)),o&&o.d(a),s&&s.d(a),u&&u.d(a),i&&i.d(a)}}}function x_(l){if(!l.funding_sources)return"";let e=[];for(let n of["atf2","atf3","atf4","atf4e","crsts","luf"])l.funding_sources[n]&&e.push(n.toUpperCase());return l.funding_sources.other&&e.push(l.funding_sources.other),e.join(", ")}function eg(l,e,n){let t,{props:r}=e;return l.$$set=o=>{"props"in o&&n(0,r=o.props)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=x_(r))},[r,t]}class So extends Y{constructor(e){super(),K(this,e,eg,Q_,J,{props:0})}}function wn(l){const e=l.slice(),n=e[1].pipeline;return e[5]=n,e}function kn(l){const e=l.slice(),n=e[0].pipeline;return e[5]=n,e}function Ll(l){let e,n,t,r=Jn(l[0].length_meters)+"",o;return{c(){e=T("p"),n=b("Length: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=Jn(s[0].length_meters)+"")&&B(o,r)},d(s){s&&p(e)}}}function Al(l){let e,n=ut(l[0].description,l[2])+"";return{c(){e=T("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=ut(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Il(l){let e,n,t,r,o,s,u,i=l[5].atf4_type&&Nl(l),a=l[5].accuracy&&Pl(l),f=l[5].is_alternative&&Ml();return r=new So({props:{props:l[5]}}),s=new yo({props:{props:l[5]}}),{c(){i&&i.c(),e=O(),a&&a.c(),n=O(),f&&f.c(),t=O(),v(r.$$.fragment),o=O(),v(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),w(r,c,_),$(c,o,_),w(s,c,_),u=!0},p(c,_){c[5].atf4_type?i?i.p(c,_):(i=Nl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].accuracy?a?a.p(c,_):(a=Pl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].is_alternative?f||(f=Ml(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const m={};_&1&&(m.props=c[5]),r.$set(m);const y={};_&1&&(y.props=c[5]),s.$set(y)},i(c){u||(g(r.$$.fragment,c),g(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),f&&f.d(c),k(r,c),k(s,c)}}}function Nl(l){let e,n,t,r=l[5].atf4_type+"",o;return{c(){e=T("p"),n=b("ATF4 type: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].atf4_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Pl(l){let e,n,t,r=l[5].accuracy+"",o;return{c(){e=T("p"),n=b("Accuracy: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].accuracy+"")&&B(o,r)},d(s){s&&p(e)}}}function Ml(l){let e;return{c(){e=T("p"),e.textContent="Represents an alternative route"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.capital_scheme_id)+"",o;return{c(){e=T("p"),n=b("Capital scheme ID: "),t=T("b"),o=b(r)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o)},p(u,i){var a;i&2&&r!==(r=((a=u[1].browse)==null?void 0:a.capital_scheme_id)+"")&&B(o,r)},d(u){u&&p(e)}}}function El(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.current_milestone)+"",o;return{c(){e=T("p"),n=b("Current milestone: "),t=T("b"),o=b(r)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o)},p(u,i){var a;i&2&&r!==(r=((a=u[1].browse)==null?void 0:a.current_milestone)+"")&&B(o,r)},d(u){u&&p(e)}}}function Dl(l){let e,n,t,r,o,s,u,i=l[5].scheme_type&&jl(l),a=l[5].atf4_lead_type&&Rl(l),f=l[5].scheme_description&&Bl(l);return r=new So({props:{props:l[5]}}),s=new yo({props:{props:l[5]}}),{c(){i&&i.c(),e=O(),a&&a.c(),n=O(),f&&f.c(),t=O(),v(r.$$.fragment),o=O(),v(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),w(r,c,_),$(c,o,_),w(s,c,_),u=!0},p(c,_){c[5].scheme_type?i?i.p(c,_):(i=jl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].atf4_lead_type?a?a.p(c,_):(a=Rl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].scheme_description?f?f.p(c,_):(f=Bl(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const m={};_&2&&(m.props=c[5]),r.$set(m);const y={};_&2&&(y.props=c[5]),s.$set(y)},i(c){u||(g(r.$$.fragment,c),g(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),f&&f.d(c),k(r,c),k(s,c)}}}function jl(l){let e,n,t,r=l[5].scheme_type+"",o;return{c(){e=T("p"),n=b("Scheme type: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].scheme_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Rl(l){let e,n,t,r=l[5].atf4_lead_type+"",o;return{c(){e=T("p"),n=b("ATF4 lead type: "),t=T("b"),o=b(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].atf4_lead_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Bl(l){let e,n,t=l[5].scheme_description+"",r;return{c(){e=T("p"),n=b("Descripton: "),r=b(t)},m(o,s){$(o,e,s),h(e,n),h(e,r)},p(o,s){s&2&&t!==(t=o[5].scheme_description+"")&&B(r,t)},d(o){o&&p(e)}}}function tg(l){var Ie,Me,At,Xe;let e,n,t,r=ut(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,_,m,y,C,S,I,R=ut(l[1].scheme_name??"",l[3])+"",A,M,L=ut(l[0].scheme_reference,l[3])+"",P,E,N,j,U,H=((Ie=l[1].browse)==null?void 0:Ie.authority_or_region)+"",D,F,z,oe,se,ye,de=((Me=l[1].browse)==null?void 0:Me.funding_programme)+"",Se,ie,Ne,Te,be=l[0].length_meters&&Ll(l),re=l[0].description&&Al(l),pe=l[0].pipeline&&Il(kn(l)),ge=((At=l[1].browse)==null?void 0:At.capital_scheme_id)&&Fl(l),ve=((Xe=l[1].browse)==null?void 0:Xe.current_milestone)&&El(l),_e=l[1].pipeline&&Dl(wn(l));return{c(){e=T("div"),n=T("h2"),t=new at(!1),o=b(" ("),u=b(s),i=b(")"),a=O(),be&&be.c(),f=O(),re&&re.c(),c=O(),pe&&pe.c(),_=O(),m=T("hr"),y=O(),C=T("p"),S=b("Part of scheme: "),I=new at(!1),A=b(" ("),M=new at(!1),P=b(")"),E=O(),N=T("p"),j=b("Authority or region: "),U=T("b"),D=b(H),F=O(),ge&&ge.c(),z=O(),oe=T("p"),se=b("Funding programme: "),ye=T("b"),Se=b(de),ie=O(),ve&&ve.c(),Ne=O(),_e&&_e.c(),t.a=o,I.a=A,M.a=P,Ce(e,"max-width","30vw"),Ce(e,"max-height","60vh"),Ce(e,"overflow","auto")},m(ue,Fe){$(ue,e,Fe),h(e,n),t.m(r,n),h(n,o),h(n,u),h(n,i),h(e,a),be&&be.m(e,null),h(e,f),re&&re.m(e,null),h(e,c),pe&&pe.m(e,null),h(e,_),h(e,m),h(e,y),h(e,C),h(C,S),I.m(R,C),h(C,A),M.m(L,C),h(C,P),h(e,E),h(e,N),h(N,j),h(N,U),h(U,D),h(e,F),ge&&ge.m(e,null),h(e,z),h(e,oe),h(oe,se),h(oe,ye),h(ye,Se),h(e,ie),ve&&ve.m(e,null),h(e,Ne),_e&&_e.m(e,null),Te=!0},p(ue,[Fe]){var qn,Gn,Un,Wn;(!Te||Fe&5)&&r!==(r=ut(ue[0].name,ue[2])+"")&&t.p(r),(!Te||Fe&1)&&s!==(s=ue[0].intervention_type+"")&&B(u,s),ue[0].length_meters?be?be.p(ue,Fe):(be=Ll(ue),be.c(),be.m(e,f)):be&&(be.d(1),be=null),ue[0].description?re?re.p(ue,Fe):(re=Al(ue),re.c(),re.m(e,c)):re&&(re.d(1),re=null),ue[0].pipeline?pe?(pe.p(kn(ue),Fe),Fe&1&&g(pe,1)):(pe=Il(kn(ue)),pe.c(),g(pe,1),pe.m(e,_)):pe&&(ce(),d(pe,1,1,()=>{pe=null}),$e()),(!Te||Fe&10)&&R!==(R=ut(ue[1].scheme_name??"",ue[3])+"")&&I.p(R),(!Te||Fe&9)&&L!==(L=ut(ue[0].scheme_reference,ue[3])+"")&&M.p(L),(!Te||Fe&2)&&H!==(H=((qn=ue[1].browse)==null?void 0:qn.authority_or_region)+"")&&B(D,H),(Gn=ue[1].browse)!=null&&Gn.capital_scheme_id?ge?ge.p(ue,Fe):(ge=Fl(ue),ge.c(),ge.m(e,z)):ge&&(ge.d(1),ge=null),(!Te||Fe&2)&&de!==(de=((Un=ue[1].browse)==null?void 0:Un.funding_programme)+"")&&B(Se,de),(Wn=ue[1].browse)!=null&&Wn.current_milestone?ve?ve.p(ue,Fe):(ve=El(ue),ve.c(),ve.m(e,Ne)):ve&&(ve.d(1),ve=null),ue[1].pipeline?_e?(_e.p(wn(ue),Fe),Fe&2&&g(_e,1)):(_e=Dl(wn(ue)),_e.c(),g(_e,1),_e.m(e,null)):_e&&(ce(),d(_e,1,1,()=>{_e=null}),$e())},i(ue){Te||(g(pe),g(_e),Te=!0)},o(ue){d(pe),d(_e),Te=!1},d(ue){ue&&p(e),be&&be.d(),re&&re.d(),pe&&pe.d(),ge&&ge.d(),ve&&ve.d(),_e&&_e.d()}}}function ut(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function ng(l,e,n){let t,r,o,s;Ae(l,cn,i=>n(4,r=i)),Ae(l,Nt,i=>n(2,o=i)),Ae(l,Pt,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class Hn extends Y{constructor(e){super(),K(this,e,ng,tg,J,{props:0})}}function rg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function lg(l){let e,n;return e=new Hn({props:{props:l[6]}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function og(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[rg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[lg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(o,s){w(e,o,s),$(o,n,s),w(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),k(e,o),k(t,o)}}}function sg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function ig(l){let e,n;return e=new Hn({props:{props:l[6]}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ag(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[sg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[ig,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(o,s){w(e,o,s),$(o,n,s),w(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),k(e,o),k(t,o)}}}function fg(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=b(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function ug(l){let e,n;return e=new Hn({props:{props:l[6]}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function cg(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[fg,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[ug,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(o,s){w(e,o,s),$(o,n,s),w(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(g(e.$$.fragment,o),g(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),k(e,o),k(t,o)}}}function $g(l){let e,n,t,r,o,s,u,i,a,f;const c=[q("interventions-points"),{filter:["all",Yn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":Qn,"circle-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let _={$$slots:{default:[og]},$$scope:{ctx:l}};for(let L=0;L<c.length;L+=1)_=x(_,c[L]);e=new mt({props:_});const m=[q("interventions-lines"),{filter:["all",Kn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":It,"line-opacity":Q(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[ag]},$$scope:{ctx:l}};for(let L=0;L<m.length;L+=1)y=x(y,m[L]);t=new Oe({props:y});const C=[q("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*It,"circle-opacity":0,"circle-stroke-color":Ke.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let S={};for(let L=0;L<C.length;L+=1)S=x(S,C[L]);o=new mt({props:S});const I=[q("interventions-polygons"),{filter:["all",on,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":Q(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let R={$$slots:{default:[cg]},$$scope:{ctx:l}};for(let L=0;L<I.length;L+=1)R=x(R,I[L]);u=new qe({props:R});const A=[q("interventions-polygons-outlines"),{filter:["all",on,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*It}},{layout:{visibility:l[0]?"visible":"none"}}];let M={};for(let L=0;L<A.length;L+=1)M=x(M,A[L]);return a=new Oe({props:M}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment),r=O(),v(o.$$.fragment),s=O(),v(u.$$.fragment),i=O(),v(a.$$.fragment)},m(L,P){w(e,L,P),$(L,n,P),w(t,L,P),$(L,r,P),w(o,L,P),$(L,s,P),w(u,L,P),$(L,i,P),w(a,L,P),f=!0},p(L,P){const E=P&29?ne(c,[c[0],P&24&&{filter:["all",Yn,L[3],L[4]]},c[2],c[3],P&4&&{paint:{"circle-color":L[2],"circle-radius":Qn,"circle-opacity":Q(1,.5)}},P&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};P&128&&(E.$$scope={dirty:P,ctx:L}),e.$set(E);const N=P&13?ne(m,[m[0],P&8&&{filter:["all",Kn,L[3]]},m[2],m[3],P&4&&{paint:{"line-color":L[2],"line-width":It,"line-opacity":Q(1,.5)}},P&1&&{layout:{visibility:L[0]?"visible":"none"}},m[6]]):{};P&128&&(N.$$scope={dirty:P,ctx:L}),t.$set(N);const j=P&1?ne(C,[C[0],C[1],C[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(j);const U=P&13?ne(I,[I[0],P&8&&{filter:["all",on,L[3]]},I[2],I[3],P&4&&{paint:{"fill-color":L[2],"fill-opacity":Q(.2,.5)}},P&1&&{layout:{visibility:L[0]?"visible":"none"}},I[6]]):{};P&128&&(U.$$scope={dirty:P,ctx:L}),u.$set(U);const H=P&13?ne(A,[A[0],P&8&&{filter:["all",on,L[3]]},P&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*It}},P&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(H)},i(L){f||(g(e.$$.fragment,L),g(t.$$.fragment,L),g(o.$$.fragment,L),g(u.$$.fragment,L),g(a.$$.fragment,L),f=!0)},o(L){d(e.$$.fragment,L),d(t.$$.fragment,L),d(o.$$.fragment,L),d(u.$$.fragment,L),d(a.$$.fragment,L),f=!1},d(L){L&&(p(n),p(r),p(s),p(i)),k(e,L),k(t,L),k(o,L),k(u,L),k(a,L)}}}function pg(l){let e,n;return e=new Ct({props:{data:l[1],$$slots:{default:[$g]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function mg(l,e,n){let t,r;Ae(l,Lt,a=>n(5,r=a));let{showSchemes:o}=e,[s]=Fn();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=Po(r))},[o,t,s,u,i,r]}class _g extends Y{constructor(e){super(),K(this,e,mg,pg,J,{showSchemes:0})}}function zl(l,e,n){const t=l.slice();return t[13]=e[n],t}function Hl(l,e,n){const t=l.slice();return t[16]=e[n],t}function gg(l){let e,n;return e=new q_({props:{loadFile:l[7]}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p:te,i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function ql(l){let e,n,t,r,o;e=new $t({props:{$$slots:{default:[dg]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[hg]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new Xl({props:u}),W.push(()=>V(t,"open",s)),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment)},m(i,a){w(e,i,a),$(i,n,a),w(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],X(()=>r=!1)),t.$set(c)},i(i){o||(g(e.$$.fragment,i),g(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),k(e,i),k(t,i)}}}function dg(l){let e;return{c(){e=b("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gl(l){let e,n,t=l[16]+"",r;return{c(){e=T("li"),n=T("p"),r=b(t)},m(o,s){$(o,e,s),h(e,n),h(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&B(r,t)},d(o){o&&p(e)}}}function hg(l){let e,n,t,r,o=je(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=Gl(Hl(l,o,u));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=O(),r=T("ul");for(let u=0;u<s.length;u+=1)s[u].c();G(e,"class","govuk-prose")},m(u,i){$(u,e,i),h(e,n),h(e,t),h(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=je(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=Hl(u,o,a);s[a]?s[a].p(f,i):(s[a]=Gl(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),yt(s,u)}}}function Ul(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new Ga({props:u}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){v(e.$$.fragment)},m(i,a){w(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],X(()=>t=!1)),e.$set(f)},i(i){r||(g(e.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),r=!1},d(i){k(e,i)}}}function Wl(l){let e,n;return e=new Y_({props:{scheme:l[13]}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function Vl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&Wl(l);return{c(){r&&r.c(),n=Ee()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&g(r,1)):(r=Wl(o),r.c(),g(r,1),r.m(n.parentNode,n)):r&&(ce(),d(r,1,1,()=>{r=null}),$e())},i(o){t||(g(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function bg(l){let e,n,t,r,o,s,u,i,a,f,c=Tn()=="Private (development)",_,m,y,C,S,I,R,A,M;o=new Uo({props:{boundaryGeojson:l[4]}}),a=new Mo({});let L=c&&gg(l),P=l[4].notes&&ql(l);y=new Fo({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),S=new to({props:{errorMessage:l[0]}});let E=l[6].size>0&&Ul(l),N=je(l[6].values()),j=[];for(let H=0;H<N.length;H+=1)j[H]=Vl(zl(l,N,H));const U=H=>d(j[H],1,1,()=>{j[H]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",r=O(),v(o.$$.fragment),s=O(),u=T("p"),u.textContent=`App version: ${Tn()}`,i=O(),v(a.$$.fragment),f=O(),L&&L.c(),_=O(),P&&P.c(),m=O(),v(y.$$.fragment),C=O(),v(S.$$.fragment),I=O(),E&&E.c(),R=O(),A=T("ul");for(let H=0;H<j.length;H+=1)j[H].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(H,D){$(H,e,D),h(e,n),h(n,t),h(n,r),w(o,n,null),h(e,s),h(e,u),h(e,i),w(a,e,null),h(e,f),L&&L.m(e,null),h(e,_),P&&P.m(e,null),h(e,m),w(y,e,null),h(e,C),w(S,e,null),h(e,I),E&&E.m(e,null),h(e,R),h(e,A);for(let F=0;F<j.length;F+=1)j[F]&&j[F].m(A,null);M=!0},p(H,D){const F={};D&16&&(F.boundaryGeojson=H[4]),o.$set(F),c&&L.p(H,D),H[4].notes?P?(P.p(H,D),D&16&&g(P,1)):(P=ql(H),P.c(),g(P,1),P.m(e,m)):P&&(ce(),d(P,1,1,()=>{P=null}),$e());const z={};if(D&1&&(z.errorMessage=H[0]),S.$set(z),H[6].size>0?E?(E.p(H,D),D&64&&g(E,1)):(E=Ul(H),E.c(),g(E,1),E.m(e,R)):E&&(ce(),d(E,1,1,()=>{E=null}),$e()),D&66){N=je(H[6].values());let oe;for(oe=0;oe<N.length;oe+=1){const se=zl(H,N,oe);j[oe]?(j[oe].p(se,D),g(j[oe],1)):(j[oe]=Vl(se),j[oe].c(),g(j[oe],1),j[oe].m(A,null))}for(ce(),oe=N.length;oe<j.length;oe+=1)U(oe);$e()}},i(H){if(!M){g(o.$$.fragment,H),g(a.$$.fragment,H),g(L),g(P),g(y.$$.fragment,H),g(S.$$.fragment,H),g(E);for(let D=0;D<N.length;D+=1)g(j[D]);M=!0}},o(H){d(o.$$.fragment,H),d(a.$$.fragment,H),d(L),d(P),d(y.$$.fragment,H),d(S.$$.fragment,H),d(E),j=j.filter(Boolean);for(let D=0;D<j.length;D+=1)d(j[D]);M=!1},d(H){H&&p(e),k(o),k(a),L&&L.d(),P&&P.d(),k(y),k(S),E&&E.d(),yt(j,H)}}}function vg(l){let e,n,t,r,o,s,u;return e=new Wo({}),t=new _g({props:{showSchemes:l[2]}}),s=new B_({}),{c(){v(e.$$.fragment),n=O(),v(t.$$.fragment),r=O(),o=T("div"),v(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){w(e,i,a),$(i,n,a),w(t,i,a),$(i,r,a),$(i,o,a),w(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(g(e.$$.fragment,i),g(t.$$.fragment,i),g(s.$$.fragment,i),u=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),k(e,i),k(t,i),k(s)}}}function wg(l){let e,n,t;return n=new Eo({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[vg]},$$scope:{ctx:l}}}),{c(){e=T("div"),v(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),w(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(g(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),k(n)}}}function kg(l){let e,n;return e=new ns({props:{$$slots:{main:[wg],sidebar:[bg]},$$scope:{ctx:l}}}),{c(){v(e.$$.fragment)},m(t,r){w(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(g(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){k(e,t)}}}function yg(l,e,n){let t,r,o;Ae(l,Lt,S=>n(4,t=S)),Ae(l,Zn,S=>n(5,r=S)),Ae(l,cn,S=>n(6,o=S)),Rn(()=>{Do()});const s=new URLSearchParams(window.location.search);Zn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(S){try{Lt.set(JSON.parse(S)),cn.set(ya(t)),n(0,u="")}catch(I){n(0,u=`The file you loaded is broken: ${I}`)}}const _=()=>n(3,f=!0);function m(S){f=S,n(3,f)}function y(S){i=S,n(1,i)}function C(S){a=S,n(2,a)}return[u,i,a,f,t,r,o,c,_,m,y,C]}class Sg extends Y{constructor(e){super(),K(this,e,yg,kg,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new Sg({target:document.getElementById("app")});
