import{S as q,i as W,s as G,e as A,h as z,$ as Ce,j as $,W as ee,o as p,aP as Qr,b as K,c as Q,d as T,g as h,m as b,w as St,l as x,t as m,n as _,p as v,X as Pt,Y as Mt,Z as Et,_ as Nt,a7 as qe,J as fe,K as ue,aQ as Ot,u as w,k,D as R,I as Ae,N as cn,O as Cr,q as me,P as Tr,Q as Ar,T as Ct,U as Lr,V as Ir,aX as xr,aY as it,a4 as bn,aZ as el,f as $n,aO as tl,ar as zt,aj as Jt,ae as pn,r as mn,F as Pr,a as rn,v as qt,aW as V,a_ as ge,a$ as ve,B as J,ah as Z,C as de,ak as Y,b0 as ne,G as Dt,H as nl,aS as rl,ab as vn,b1 as Kt,R as Mr,b2 as _n,E as Er,as as ll,ag as ol,aU as wn,al as sl,am as kn,an as yn,ao as Bt,aV as Sn,L as il,M as al,y as fl}from"./index-ed9cbab0.js";import{C as Me,d as Ye,j as Tt,f as Ft,h as ie,l as B,c as Wt,k as ul,S as cl,B as $l,b as wt,G as pl}from"./StreetViewTool-ae05a636.js";import{a as Qe,F as ml}from"./Popup-d13023b3.js";import{P as le}from"./Popup-656b8fe5.js";import{R as _l,C as nt,Z as gl}from"./ZoomOutMap-9d473b0c.js";import{L as dl,a as hl}from"./LineMeasureController-757e55a0.js";function bl(r){let e;return{c(){e=A("span"),z(e,"class","svelte-kzgqtg"),Ce(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Ce(e,"background",n[0])},i:ee,o:ee,d(n){n&&p(e)}}}function vl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class ke extends q{constructor(e){super(),W(this,e,vl,bl,G,{color:0})}}const wl="/atip/pavement_width/assets/help-d011708a.svg";function kl(r){let e,n;const t=r[1].default,l=Pt(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),z(e,"class","govuk-prose")},m(o,i){$(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&Mt(l,t,o,o[4],n?Nt(t,o[4],i,null):Et(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){_(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function yl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[kl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Qr({props:a}),K.push(()=>Q(t,"open",s)),{c(){e=A("button"),e.innerHTML=`<img src="${wl}" title="Help" alt="Help"/>`,n=T(),h(t.$$.fragment),z(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,i||(u=St(e,"click",r[2]),i=!0)},p(f,[c]){const d={};c&16&&(d.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,d.open=f[0],x(()=>l=!1)),t.$set(d)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),i=!1,u()}}}function Sl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class ae extends q{constructor(e){super(),W(this,e,Sl,yl,G,{})}}function On(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Cn(r){let e,n,t,l=r[1]+"",o,i,u;return n=new ke({props:{color:r[2]}}),{c(){e=A("li"),h(n.$$.fragment),t=T(),o=w(l),i=T()},m(s,a){$(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p(s,a){const f={};a&1&&(f.color=s[2]),n.$set(f),(!u||a&1)&&l!==(l=s[1]+"")&&R(o,l)},i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){_(n.$$.fragment,s),u=!1},d(s){s&&p(e),v(n)}}}function Ol(r){let e,n,t=qe(r[0]),l=[];for(let i=0;i<t.length;i+=1)l[i]=Cn(On(r,t,i));const o=i=>_(l[i],1,1,()=>{l[i]=null});return{c(){e=A("ul");for(let i=0;i<l.length;i+=1)l[i].c()},m(i,u){$(i,e,u);for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(e,null);n=!0},p(i,u){if(u&1){t=qe(i[0]);let s;for(s=0;s<t.length;s+=1){const a=On(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=Cn(a),l[s].c(),m(l[s],1),l[s].m(e,null))}for(fe(),s=t.length;s<l.length;s+=1)o(s);ue()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)_(l[u]);n=!1},d(i){i&&p(e),Ot(l,i)}}}function Cl(r){let e,n;return e=new Me({props:{label:"Legend",$$slots:{default:[Ol]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tl(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class Al extends q{constructor(e){super(),W(this,e,Tl,Cl,G,{rows:0})}}function Tn(r){let e=r[0],n,t,l=An(r);return{c(){l.c(),n=Ae()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&G(e,e=o[0])?(fe(),_(l,1,1,ee),ue(),l=An(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){_(l),t=!1},d(o){o&&p(n),l.d(o)}}}function An(r){let e;const n=r[10].default,t=Pt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Mt(t,n,l,l[9],e?Nt(n,l[9],o,null):Et(l[9]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Ll(r){let e,n,t=r[0]&&Tn(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Tn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(fe(),_(t,1,1,()=>{t=null}),ue())},i(l){n||(m(t),n=!0)},o(l){_(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function Il(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=cn("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=Cr();me(r,f,y=>n(8,l=y)),me(r,c,y=>n(0,t=y));let d,g=!0;return Tr(()=>{t&&d&&l&&(Ar(f,t,d),Ct(c,t=null,t),n(6,d=void 0))}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,s=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,i=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Ct(c,t=u,t),Lr(l,t,Ir({type:"raster",tiles:s,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,d=l==null?void 0:l.getSource(t)),n(7,g=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,d=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&d&&(g?n(7,g=!1):d.setTiles(s))},[t,f,c,u,s,a,d,g,l,i,o]}class Pl extends q{constructor(e){super(),W(this,e,Il,Ll,G,{id:3,tiles:4,tileSize:5})}}function Ml(r){let e;const n=r[16].default,t=Pt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Mt(t,n,l,l[24],e?Nt(n,l[24],o,null):Et(l[24]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function El(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[Ml]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new xr({props:o}),K.push(()=>Q(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Nl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=cn("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:d=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:O=!1}=e,{hovered:E=null}=e,{eventsIfTopMost:F=!1}=e,{interactive:N=!0}=e;function L(j){E=j,n(0,E)}function D(j){it.call(this,r,j)}function M(j){it.call(this,r,j)}function I(j){it.call(this,r,j)}function P(j){it.call(this,r,j)}function H(j){it.call(this,r,j)}function X(j){it.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,i=j.source),"sourceLayer"in j&&n(3,u=j.sourceLayer),"beforeId"in j&&n(4,s=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,f=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,d=j.filter),"applyToClusters"in j&&n(9,g=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,S=j.maxzoom),"hoverCursor"in j&&n(12,C=j.hoverCursor),"manageHoverState"in j&&n(13,O=j.manageHoverState),"hovered"in j&&n(0,E=j.hovered),"eventsIfTopMost"in j&&n(14,F=j.eventsIfTopMost),"interactive"in j&&n(15,N=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[E,o,i,u,s,a,f,c,d,g,y,S,C,O,F,N,t,L,D,M,I,P,H,X,l]}class Dl extends q{constructor(e){super(),W(this,e,Nl,El,G,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Ln(r){let e=r[0],n,t,l=In(r);return{c(){l.c(),n=Ae()},m(o,i){l.m(o,i),$(o,n,i),t=!0},p(o,i){i&1&&G(e,e=o[0])?(fe(),_(l,1,1,ee),ue(),l=In(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||(m(l),t=!0)},o(o){_(l),t=!1},d(o){o&&p(n),l.d(o)}}}function In(r){let e;const n=r[9].default,t=Pt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Mt(t,n,l,l[8],e?Nt(n,l[8],o,null):Et(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Fl(r){let e,n,t=r[0]&&Ln(r);return{c(){t&&t.c(),e=Ae()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Ln(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(fe(),_(t,1,1,()=>{t=null}),ue())},i(l){n||(m(t),n=!0)},o(l){_(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function jl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=cn("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!bn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new el;bn.addProtocol("pmtiles",y.tile)}const{map:c,self:d}=Cr();me(r,c,y=>n(7,l=y)),me(r,d,y=>n(0,t=y));let g;return Tr(()=>{t&&l&&(Ar(c,t,g),Ct(d,t=null,t),g=void 0)}),r.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,s=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,i=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Ct(d,t=u,t),Lr(l,t,Ir({type:"vector",url:s,tiles:a,promoteId:f}),y=>l&&y===t,()=>{t&&(g=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{g=l==null?void 0:l.getSource(u)}))},[t,c,d,u,s,a,f,l,i,o]}class he extends q{constructor(e){super(),W(this,e,jl,Fl,G,{id:3,url:4,tiles:5,promoteId:6})}}function Rl(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bl(r){let e,n,t=r[0]=="Private (development)"&&Rl();return{c(){t&&t.c(),e=T(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),$(l,e,o),$(l,n,o)},p:ee,d(l){l&&(p(e),p(n)),t&&t.d(l)}}}function Hl(r){let e,n,t,l,o,i;return o=new ae({props:{$$slots:{default:[Bl]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=T(),h(o.$$.fragment)},m(u,s){$(u,e,s),k(e,n),k(e,t),k(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||(m(o.$$.fragment,u),i=!0)},o(u){_(o.$$.fragment,u),i=!1},d(u){u&&p(e),v(o)}}}function Ul(r){return[$n()]}class Gl extends q{constructor(e){super(),W(this,e,Ul,Hl,G,{})}}const zl={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Se=Uint8Array,ot=Uint16Array,Nr=Uint32Array,Dr=new Se([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Fr=new Se([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ql=new Se([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jr=function(r,e){for(var n=new ot(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new Nr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Rr=jr(Dr,2),Br=Rr[0],Wl=Rr[1];Br[28]=258,Wl[258]=28;var Vl=jr(Fr,0),Xl=Vl[0],ln=new ot(32768);for(var se=0;se<32768;++se){var et=(se&43690)>>>1|(se&21845)<<1;et=(et&52428)>>>2|(et&13107)<<2,et=(et&61680)>>>4|(et&3855)<<4,ln[se]=((et&65280)>>>8|(et&255)<<8)>>>1}var yt=function(r,e,n){for(var t=r.length,l=0,o=new ot(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new ot(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new ot(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,d=c|(1<<f)-1;c<=d;++c)u[ln[c]>>>s]=a}else for(u=new ot(t),l=0;l<t;++l)r[l]&&(u[l]=ln[i[r[l]-1]++]>>>15-r[l]);return u},jt=new Se(288);for(var se=0;se<144;++se)jt[se]=8;for(var se=144;se<256;++se)jt[se]=9;for(var se=256;se<280;++se)jt[se]=7;for(var se=280;se<288;++se)jt[se]=8;var Hr=new Se(32);for(var se=0;se<32;++se)Hr[se]=5;var Jl=yt(jt,9,1),Kl=yt(Hr,5,1),Zt=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Ie=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},Yt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Zl=function(r){return(r+7)/8|0},gn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?ot:r.BYTES_PER_ELEMENT==4?Nr:Se)(n-e);return t.set(r.subarray(e,n)),t},Yl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Pe=function(r,e,n){var t=new Error(e||Yl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Pe),!n)throw t;return t},Ql=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Se(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Se(t*3));var i=function(_e){var je=e.length;if(_e>je){var Ke=new Se(Math.max(je*2,_e));Ke.set(e),e=Ke}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,d=n.m,g=n.n,y=t*8;do{if(!f){u=Ie(r,s,1);var S=Ie(r,s+1,3);if(s+=3,S)if(S==1)f=Jl,c=Kl,d=9,g=5;else if(S==2){var F=Ie(r,s,31)+257,N=Ie(r,s+10,15)+4,L=F+Ie(r,s+5,31)+1;s+=14;for(var D=new Se(L),M=new Se(19),I=0;I<N;++I)M[ql[I]]=Ie(r,s+I*3,7);s+=N*3;for(var P=Zt(M),H=(1<<P)-1,X=yt(M,P,1),I=0;I<L;){var j=X[Ie(r,s,H)];s+=j&15;var C=j>>>4;if(C<16)D[I++]=C;else{var U=0,$e=0;for(C==16?($e=3+Ie(r,s,3),s+=2,U=D[I-1]):C==17?($e=3+Ie(r,s,7),s+=3):C==18&&($e=11+Ie(r,s,127),s+=7);$e--;)D[I++]=U}}var De=D.subarray(0,F),be=D.subarray(F);d=Zt(De),g=Zt(be),f=yt(De,d,1),c=yt(be,g,1)}else Pe(1);else{var C=Zl(s)+4,O=r[C-4]|r[C-3]<<8,E=C+O;if(E>t){o&&Pe(0);break}l&&i(a+O),e.set(r.subarray(C,E),a),n.b=a+=O,n.p=s=E*8,n.f=u;continue}if(s>y){o&&Pe(0);break}}l&&i(a+131072);for(var Je=(1<<d)-1,pe=(1<<g)-1,ce=s;;ce=s){var U=f[Yt(r,s)&Je],re=U>>>4;if(s+=U&15,s>y){o&&Pe(0);break}if(U||Pe(2),re<256)e[a++]=re;else if(re==256){ce=s,f=null;break}else{var xe=re-254;if(re>264){var I=re-257,Te=Dr[I];xe=Ie(r,s,(1<<Te)-1)+Br[I],s+=Te}var Le=c[Yt(r,s)&pe],Fe=Le>>>4;Le||Pe(3),s+=Le&15;var be=Xl[Fe];if(Fe>3){var Te=Fr[Fe];be+=Yt(r,s)&(1<<Te)-1,s+=Te}if(s>y){o&&Pe(0);break}l&&i(a+131072);for(var oe=a+xe;a<oe;a+=4)e[a]=e[a-be],e[a+1]=e[a+1-be],e[a+2]=e[a+2-be],e[a+3]=e[a+3-be];a=oe}}n.l=f,n.p=ce,n.b=a,n.f=u,f&&(u=1,n.m=d,n.d=c,n.n=g)}while(!u);return a==e.length?e:gn(e,0,a)},xl=new Se(0),ze=function(r,e){return r[e]|r[e+1]<<8},Ee=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Qt=function(r,e){return Ee(r,e)+Ee(r,e+4)*4294967296};function eo(r,e){return Ql(r,e)}var on=typeof TextDecoder<"u"&&new TextDecoder,to=0;try{on.decode(xl,{stream:!0}),to=1}catch{}var no=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,gn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Ur(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(on)return on.decode(r);var l=no(r),o=l[0],i=l[1];return i.length&&Pe(8),o}}var ro=function(r,e){return e+30+ze(r,e+26)+ze(r,e+28)},lo=function(r,e,n){var t=ze(r,e+28),l=Ur(r.subarray(e+46,e+46+t),!(ze(r,e+8)&2048)),o=e+46+t,i=Ee(r,e+20),u=n&&i==4294967295?oo(r,o):[i,Ee(r,e+24),Ee(r,e+42)],s=u[0],a=u[1],f=u[2];return[ze(r,e+10),s,a,l,o+ze(r,e+30)+ze(r,e+32),f]},oo=function(r,e){for(;ze(r,e)!=1;e+=4+ze(r,e+2));return[Qt(r,e+12),Qt(r,e+4),Qt(r,e+20)]};function so(r,e){for(var n={},t=r.length-22;Ee(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Pe(13);var l=ze(r,t+8);if(!l)return{};var o=Ee(r,t+16),i=o==4294967295||l==65535;if(i){var u=Ee(r,t-12);i=Ee(r,u)==101075792,i&&(l=Ee(r,u+32),o=Ee(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=lo(r,o,i),c=f[0],d=f[1],g=f[2],y=f[3],S=f[4],C=f[5],O=ro(r,C);o=S,(!s||s({name:y,size:d,originalSize:g,compression:c}))&&(c?c==8?n[y]=eo(r.subarray(O,O+d),new Se(g)):Pe(14,"unknown compression type "+c):n[y]=gn(r,O,O+d))}return n}function io(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(xt):xt(r)}function xt(r){var e=new Uint8Array(r),n=so(e);return Promise.resolve(ao(n))}function ao(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Ur(r[l])}return e}function We(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&st(t)===e)return t;n++}}function Rt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&st(l)===e&&n.push(l),t++}return n}function Vt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&st(l)===e&&n(l,t):n(l,t),t++}}function fo(r,e,n){var t=[];return Vt(r,e,function(l,o){t.push(n(l,o))}),t}var uo=/.+\:/;function st(r){return r.tagName.replace(uo,"")}function Gr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+st(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Gr(r.childNodes[t]),t++;return e+="</"+st(r)+">",e}function co(r){var e=r.documentElement,n=We(e,"sheetData"),t=[];return Vt(n,"row",function(l){Vt(l,"c",function(o){t.push(o)})}),t}function $o(r,e){return We(e,"v")}function po(r,e){if(e.firstChild&&st(e.firstChild)==="is"&&e.firstChild.firstChild&&st(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function mo(r){var e=r.documentElement,n=We(e,"dimension");if(n)return n.getAttribute("ref")}function _o(r){var e=r.documentElement,n=We(e,"cellStyleXfs");return n?Rt(n,"xf"):[]}function go(r){var e=r.documentElement,n=We(e,"cellXfs");return n?Rt(n,"xf"):[]}function ho(r){var e=r.documentElement,n=We(e,"numFmts");return n?Rt(n,"numFmt"):[]}function bo(r){var e=r.documentElement;return fo(e,"si",function(n){var t=We(n,"t");if(t)return t.textContent;var l="";return Vt(n,"r",function(o){l+=We(o,"t").textContent}),l})}function vo(r){var e=r.documentElement;return We(e,"workbookPr")}function wo(r){var e=r.documentElement;return Rt(e,"Relationship")}function ko(r){var e=r.documentElement,n=We(e,"sheets");return Rt(n,"sheet")}function yo(r,e){var n=e.createDocument(r),t={},l=vo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return ko(n).forEach(o),t}function So(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=en(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=en(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=en(u);break}};return wo(n).forEach(l),t}function en(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Pn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Mn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Pn(Object(n),!0).forEach(function(t){Oo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Oo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Co(r,e){if(!r)return{};var n=e.createDocument(r),t=_o(n).map(tn),l=ho(n).map(To).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Mn(Mn({},t[u.xfId]),tn(u,l)):tn(u,l)};return go(n).map(o)}function To(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function tn(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Ao(r,e){return r?bo(e.createDocument(r)):[]}function zr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Lo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Io(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Io(r,e){if(r){if(typeof r=="string")return En(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return En(r,e)}}function En(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Po(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(Mo.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&Do(l.numberFormat.template))return!0}}var Mo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Eo=/^\[\$-414\]/,No=/;@$/;function Do(r){r=r.toLowerCase(),r=r.replace(Eo,""),r=r.replace(No,"");for(var e=r.split(/\W+/),n=Lo(e),t;!(t=n()).done;){var l=t.value;if(Fo.indexOf(l)<0)return!1}return!0}var Fo=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function jo(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=nn(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=nn(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=nn(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=Ro(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var d=Number(r);if(isNaN(d))throw new Error('Invalid "numeric" cell value: '.concat(r));r=d,Po(r,o(),i,a)&&(r=zr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function Ro(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function nn(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var Bo=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Ho(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function Uo(r){for(var e=0,n=0;n<r.length;)e*=26,e+=Bo.indexOf(r[n]),n++;return e}function qr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Uo(r[0].trim())]}function Go(r,e,n,t,l,o,i){var u=qr(r.getAttribute("r")),s=$o(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:jo(a,f,{getInlineStringValue:function(){return po(e,r)},getInlineStringXml:function(){return Gr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function zo(r,e,n,t,l,o){var i=co(r);return i.length===0?[]:i.map(function(u){return Go(u,r,e,n,t,l,o)})}function qo(r,e){return Jo(r)||Xo(r,e)||Vo(r,e)||Wo()}function Wo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vo(r,e){if(r){if(typeof r=="string")return Nn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nn(r,e)}}function Nn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Xo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Jo(r){if(Array.isArray(r))return r}function Ko(r){var e=mo(r);if(e)return e=e.split(":").map(qr).map(function(n){var t=qo(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Zo(r,e,n,t,l,o){var i=e.createDocument(r),u=zo(i,e,n,t,l,o),s=Ko(i)||Ho(u);return{cells:u,dimensions:s}}function Yo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Qo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qo(r,e){if(r){if(typeof r=="string")return Dn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dn(r,e)}}function Dn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function xo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=Yo(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function es(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ts(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ts(r,e){if(r){if(typeof r=="string")return Fn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fn(r,e)}}function Fn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ns(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=es(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function rs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Wr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ls(r,e){return is(r)||ss(r,e)||Wr(r,e)||os()}function os(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wr(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ss(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function is(r){if(Array.isArray(r))return r}function as(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=ls(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=rs(t),d;!(d=c()).done;){var g=d.value,y=g.row-1,S=g.column-1;S<i&&y<u&&(s[y][S]=g.value)}var C=e.rowMap;if(C)for(var O=0;O<s.length;)C[O]=O,O++;return s=xo(ns(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:C}),e.transformData&&(s=e.transformData(s)),s}function fs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=us(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function us(r,e){if(r){if(typeof r=="string")return Rn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rn(r,e)}}function Rn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Bn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function cs(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bn(Object(n),!0).forEach(function(t){$s(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function $s(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ps(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=cs({sheet:1},n));var t=function(d){if(!r[d])throw new Error('"'.concat(d,'" file not found inside the *.xlsx file zip archive'));return r[d]},l=So(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Ao(t(l.sharedStrings),e):[],i=l.styles?Co(t(l.styles),e):{},u=yo(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var d=c.name;return{name:d}});var s=ms(n.sheet,u.sheets);if(!s||!l.sheets[s])throw _s(n.sheet,u.sheets);var a=Zo(t(l.sheets[s]),e,o,i,u,n),f=as(a,n);return n.properties?{data:f,properties:u}:f}function ms(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=fs(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function _s(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function sn(r){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(r)}function Hn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function gs(r,e,n){return e&&Hn(r.prototype,e),n&&Hn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function ds(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function hs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&At(r,e)}function bs(r){var e=Vr();return function(){var t=Lt(r),l;if(e){var o=Lt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return vs(this,l)}}function vs(r,e){if(e&&(sn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ws(r)}function ws(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function an(r){var e=typeof Map=="function"?new Map:void 0;return an=function(t){if(t===null||!ks(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Ut(t,arguments,Lt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),At(l,t)},an(r)}function Ut(r,e,n){return Vr()?Ut=Reflect.construct:Ut=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&At(a,i.prototype),a},Ut.apply(null,arguments)}function Vr(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ks(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function At(r,e){return At=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},At(r,e)}function Lt(r){return Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Lt(r)}var Oe=function(r){hs(n,r);var e=bs(n);function n(t){var l;return ds(this,n),l=e.call(this,"invalid"),l.reason=t,l}return gs(n)}(an(Error));function ys(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Oe("not_a_number")}if(typeof r!="number")throw new Oe("not_a_number");if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return r}function Ss(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");return String(r)}throw new Oe("not_a_string")}function Os(r){if(typeof r=="boolean")return r;throw new Oe("not_a_boolean")}function Cs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Oe("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Oe("invalid_number");if(!isFinite(r))throw new Oe("out_of_bounds");var t=zr(r,n);if(isNaN(t.valueOf()))throw new Oe("out_of_bounds");return t}throw new Oe("not_a_date")}function Ts(r,e){return Is(r)||Ls(r,e)||Xr(r,e)||As()}function As(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ls(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Is(r){if(Array.isArray(r))return r}function fn(r){"@babel/helpers - typeof";return fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fn(r)}function Ps(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Xr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xr(r,e){if(r){if(typeof r=="string")return Un(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Un(r,e)}}function Un(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Gn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function zn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gn(Object(n),!0).forEach(function(t){Ms(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ms(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var qn={isColumnOriented:!1};function Es(r,e,n){n?n=zn(zn({},qn),n):n=qn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;js(e),l&&(r=Fs(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Jr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var d=Ps(a),g;!(g=d()).done;){var y=g.value;y.row=o[y.row-1]+1}return{rows:s,errors:a}}function Jr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var d=f[a],g=r[d],y=fn(g.type)==="object"&&!Array.isArray(g.type),S=e[t.indexOf(d)];S===void 0&&(S=null);var C=void 0,O=void 0,E=void 0;if(y)C=Jr(g.type,e,n,t,l,o);else if(S===null)C=null;else if(Array.isArray(g.type)){var F=!1,N=Ds(S).map(function(D){var M=Wn(D,g,o);return M.error&&(C=D,O=M.error,E=M.reason),M.value!==null&&(F=!0),M.value});O||(C=F?N:null)}else{var L=Wn(S,g,o);O=L.error,E=L.reason,C=O?S:L.value}!O&&C===null&&g.required&&(O="required"),O?(O={error:O,row:n+1,column:d,value:C},E&&(O.reason=E),g.type&&(O.type=g.type),l.push(O)):(u&&C!==null&&(u=!1),(C!==null||o.includeNullValues)&&(i[g.prop]=C))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function Wn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=at(r,e.parse):e.type?t=Ns(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function at(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Ns(r,e,n){switch(e){case String:return at(r,Ss);case Number:return at(r,ys);case Date:return at(r,function(t){return Cs(t,{properties:n.properties})});case Boolean:return at(r,Os);default:if(typeof e=="function")return at(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Kr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Kr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function Ds(r){for(var e=[],n=0;n<r.length;){var t=Kr(r,",",n),l=Ts(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var Fs=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function js(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function un(r){"@babel/helpers - typeof";return un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(r)}function Zr(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;un(o)==="object"&&(o=Object.keys(r[l])[0],i=Zr(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var Rs=["schema","map"];function Vn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Ht(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vn(Object(n),!0).forEach(function(t){Bs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Bs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Hs(r,e){if(r==null)return{};var n=Us(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Us(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function Gs(r,e,n){var t=n.schema,l=n.map,o=Hs(n,Rs);!t&&l&&(t=Zr(l));var i=ps(r,e,Ht(Ht({},o),{},{properties:t||o.properties}));return t?Es(i.data,t,Ht(Ht({},o),{},{properties:i.properties})):i}function zs(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return io(r).then(function(n){return Gs(n,zl,e)})}function qs(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>Ws(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(l.browse.num_features=l.browse.num_features!==void 0?l.browse.num_features+1:1,t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function Ws(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Vs(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await zs(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=tl(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}function Yr(r){return zt(["get","intervention_type"],{area:Ye.area,route:Ye.route,crossing:Ye.crossing,other:Ye.other},"white")}function Xn(r){return[["Areas",Ye.area],["Routes",Ye.route],["Crossings",Ye.crossing],["Other",Ye.other]]}const te={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},Ne=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20],vt=Jt({type:"FeatureCollection",features:[],schemes:{}}),It=Jt(new Map),Jn=Jt(!0),Gt=Jt("");function Xs(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Tt({props:u}),K.push(()=>Q(e,"value",i)),e.$on("change",r[2]),l=new Al({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],x(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function Kn(r,e){let n=[],t={},l=0;for(let o of r){let i=e[l++%e.length];t[o]=i,n.push([o,i])}return[t,n]}function Js(r,e,n){let t,l;me(r,It,c=>n(4,t=c)),me(r,pn,c=>n(5,l=c));let o="interventionType",i=Xn();function u(){let c;o=="interventionType"?(c=Yr(),n(1,i=Xn())):o=="fundingProgramme"?c=s():o=="currentMilestone"&&(c=a()),l.setPaintProperty("interventions-points","circle-color",c),l.setPaintProperty("interventions-lines","line-color",c),l.setPaintProperty("interventions-polygons","fill-color",c),l.setPaintProperty("interventions-polygons-outlines","line-color",c)}function s(){var C;let c=new Set;for(let O of t.values())(C=O.browse)!=null&&C.funding_programme&&c.add(O.browse.funding_programme);let d=Array.from(c);d.sort();let[g,y]=Kn(d,te.funding_programmes),S=zt(["get","funding_programme"],g,"grey");return n(1,i=y),S}function a(){let c=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[d,g]=Kn(c,te.current_milestone),y=zt(["get","current_milestone"],d,"grey");return n(1,i=g),y}function f(c){o=c,n(0,o)}return[o,i,u,f]}class Ks extends q{constructor(e){super(),W(this,e,Js,Xs,G,{})}}function Zs(r){let e;return{c(){e=w("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ys(r){let e,n,t,l,o,i;return t=new rn({props:{$$slots:{default:[Zs]},$$scope:{ctx:r}}}),t.$on("click",r[11]),{c(){e=A("input"),n=T(),h(t.$$.fragment),z(e,"type","text"),z(e,"class","govuk-input govuk-input--width-10"),z(e,"id","filterText")},m(u,s){$(u,e,s),qt(e,r[4]),$(u,n,s),b(t,u,s),l=!0,o||(i=St(e,"input",r[10]),o=!0)},p(u,s){s&16&&e.value!==u[4]&&qt(e,u[4]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||(m(t.$$.fragment,u),l=!0)},o(u){_(t.$$.fragment,u),l=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,i()}}}function Qs(r){let e,n,t,l,o,i,u,s,a,f;function c(S){r[8](S)}let d={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[2]!==void 0&&(d.value=r[2]),e=new Tt({props:d}),K.push(()=>Q(e,"value",c));function g(S){r[9](S)}let y={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[3]!==void 0&&(y.value=r[3]),l=new Tt({props:y}),K.push(()=>Q(l,"value",g)),u=new Pr({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Ys]},$$scope:{ctx:r}}}),a=new Ks({}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment),i=T(),h(u.$$.fragment),s=T(),h(a.$$.fragment)},m(S,C){b(e,S,C),$(S,t,C),b(l,S,C),$(S,i,C),b(u,S,C),$(S,s,C),b(a,S,C),f=!0},p(S,C){const O={};C&32&&(O.choices=S[5]),!n&&C&4&&(n=!0,O.value=S[2],x(()=>n=!1)),e.$set(O);const E={};C&64&&(E.choices=S[6]),!o&&C&8&&(o=!0,E.value=S[3],x(()=>o=!1)),l.$set(E);const F={};C&65552&&(F.$$scope={dirty:C,ctx:S}),u.$set(F)},i(S){f||(m(e.$$.fragment,S),m(l.$$.fragment,S),m(u.$$.fragment,S),m(a.$$.fragment,S),f=!0)},o(S){_(e.$$.fragment,S),_(l.$$.fragment,S),_(u.$$.fragment,S),_(a.$$.fragment,S),f=!1},d(S){S&&(p(t),p(i),p(s)),v(e,S),v(l,S),v(u,S),v(a,S)}}}function xs(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",d,g,y=r[7].other.toLocaleString()+"",S,C,O=Zn(r[7].totalLength).toFixed(1)+"",E,F;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),d=w(c),g=w(" crossings, "),S=w(y),C=w(`
    other, with total LineString length of `),E=w(O),F=w(" miles)")},m(N,L){$(N,e,L),$(N,t,L),$(N,l,L),$(N,i,L),$(N,u,L),$(N,a,L),$(N,f,L),$(N,d,L),$(N,g,L),$(N,S,L),$(N,C,L),$(N,E,L),$(N,F,L)},p(N,L){L&1&&n!==(n=N[0].size.toLocaleString()+"")&&R(t,n),L&128&&o!==(o=N[7].route.toLocaleString()+"")&&R(i,o),L&128&&s!==(s=N[7].area.toLocaleString()+"")&&R(a,s),L&128&&c!==(c=N[7].crossing.toLocaleString()+"")&&R(d,c),L&128&&y!==(y=N[7].other.toLocaleString()+"")&&R(S,y),L&128&&O!==(O=Zn(N[7].totalLength).toFixed(1)+"")&&R(E,O)},d(N){N&&(p(e),p(t),p(l),p(i),p(u),p(a),p(f),p(d),p(g),p(S),p(C),p(E),p(F))}}}function ei(r){let e,n,t;function l(i){r[12](i)}let o={id:"show-schemes",$$slots:{default:[xs]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ie({props:o}),K.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65665&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function ti(r){let e,n,t,l;return e=new Me({props:{label:"Filters",$$slots:{default:[Qs]},$$scope:{ctx:r}}}),t=new Ft({props:{small:!0,$$slots:{default:[ei]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65660&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65667&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Zn(r){return r*621371e-9}function ni(r,e,n){let t,l,o;me(r,Gt,F=>n(4,t=F)),me(r,vt,F=>n(13,l=F)),me(r,It,F=>n(14,o=F));let{schemesToBeShown:i=new Set}=e,{show:u=!0}=e,s=[],a="",f=[],c="",d={area:0,route:0,crossing:0,other:0,totalLength:0};mn(()=>{var L,D;let F=new Set,N=new Set;for(let M of o.values())(L=M.browse)!=null&&L.authority_or_region&&F.add(M.browse.authority_or_region),(D=M.browse)!=null&&D.funding_programme&&N.add(M.browse.funding_programme);n(5,s=Array.from(F.entries())),s.sort(),n(6,f=Array.from(N.entries())),f.sort()});function g(F,N,L){let D=F.toLowerCase(),M=P=>{var H,X,j,U;if(D&&!((H=P.properties.name)!=null&&H.toLowerCase().includes(D))&&!((X=P.properties.description)!=null&&X.toLowerCase().includes(D)))return!1;if(N||L){let $e=o.get(P.properties.scheme_reference);if(N&&((j=$e.browse)==null?void 0:j.authority_or_region)!=N||L&&((U=$e.browse)==null?void 0:U.funding_programme)!=L)return!1}return!0};n(0,i=new Set(l.features.filter(M).map(P=>P.properties.scheme_reference))),n(7,d={area:0,route:0,crossing:0,other:0,totalLength:0});let I=P=>{var H,X;return!(!i.has(P.properties.scheme_reference)||D&&!((H=P.properties.name)!=null&&H.toLowerCase().includes(D))&&!((X=P.properties.description)!=null&&X.toLowerCase().includes(D)))};for(let P of l.features)I(P)?(delete P.properties.hide_while_editing,n(7,d[P.properties.intervention_type]++,d),P.geometry.type=="LineString"&&P.properties.length_meters&&n(7,d.totalLength+=P.properties.length_meters,d)):P.properties.hide_while_editing=!0;vt.set(l),n(7,d)}function y(F){a=F,n(2,a)}function S(F){c=F,n(3,c)}function C(){t=this.value,Gt.set(t)}const O=()=>Ct(Gt,t="",t);function E(F){u=F,n(1,u)}return r.$$set=F=>{"schemesToBeShown"in F&&n(0,i=F.schemesToBeShown),"show"in F&&n(1,u=F.show)},r.$$.update=()=>{r.$$.dirty&28&&g(t,a,c)},[i,u,a,c,t,s,f,d,y,S,C,O,E]}class ri extends q{constructor(e){super(),W(this,e,ni,ti,G,{schemesToBeShown:0,show:1})}}function li(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oi(r){let e,n,t,l,o;return t=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[li]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data © Crown copyright and database right
  2023.`)},m(i,u){$(i,e,u),k(e,n),b(t,e,null),k(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||(m(t.$$.fragment,i),o=!0)},o(i){_(t.$$.fragment,i),o=!1},d(i){i&&p(e),v(t)}}}class Ve extends q{constructor(e){super(),W(this,e,null,oi,G,{})}}function Yn(r,e,n){const t=r.slice();return t[2]=e[n],t}function Qn(r,e,n){const t=r.slice();return t[5]=e[n],t}function xn(r){let e,n;return{c(){e=A("span"),n=w(` 
    `),Ce(e,"background",r[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,l){$(t,e,l),k(e,n)},p(t,l){l&1&&Ce(e,"background",t[5])},d(t){t&&p(e)}}}function er(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&R(t,n)},d(l){l&&p(e)}}}function si(r){let e,n,t,l=qe(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=xn(Qn(r,l,s));let i=qe(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=er(Yn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=T(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(s,a){$(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(s,n,a),$(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=qe(s[0]);let f;for(f=0;f<l.length;f+=1){const c=Qn(s,l,f);o[f]?o[f].p(c,a):(o[f]=xn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=qe(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Yn(s,i,f);u[f]?u[f].p(c,a):(u[f]=er(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:ee,o:ee,d(s){s&&(p(e),p(n),p(t)),Ot(o,s),Ot(u,s)}}}function ii(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Xe extends q{constructor(e){super(),W(this,e,ii,si,G,{colorScale:0,limits:1})}}function tr(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function ai(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fi(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ui(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ci(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $i(r){let e,n,t,l,o,i,u,s,a,f,c,d;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[fi]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ui]},$$scope:{ctx:r}}}),f=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ci]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=T(),s=A("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(g,y){$(g,e,y),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(g,u,y),$(g,s,y),k(s,a),b(f,s,null),k(s,c),d=!0},p(g,y){const S={};y&65536&&(S.$$scope={dirty:y,ctx:g}),t.$set(S);const C={};y&65536&&(C.$$scope={dirty:y,ctx:g}),o.$set(C);const O={};y&65536&&(O.$$scope={dirty:y,ctx:g}),f.$set(O)},i(g){d||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),d=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),d=!1},d(g){g&&(p(e),p(u),p(s)),v(t),v(o),v(f)}}}function pi(r){let e,n,t;return n=new ae({props:{$$slots:{default:[$i]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function nr(r){let e,n;return e=new Xe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mi(r){let e;return{c(){e=w("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _i(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function di(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hi(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y;return o=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[_i]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[gi]},$$scope:{ctx:r}}}),d=new V({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[di]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=T(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=T(),f=A("p"),c=w("License: "),h(d.$$.fragment),g=w(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(S,C){$(S,e,C),$(S,n,C),$(S,t,C),k(t,l),b(o,t,null),k(t,i),b(u,t,null),k(t,s),$(S,a,C),$(S,f,C),k(f,c),b(d,f,null),k(f,g),y=!0},p(S,C){const O={};C&65536&&(O.$$scope={dirty:C,ctx:S}),o.$set(O);const E={};C&65536&&(E.$$scope={dirty:C,ctx:S}),u.$set(E);const F={};C&65536&&(F.$$scope={dirty:C,ctx:S}),d.$set(F)},i(S){y||(m(o.$$.fragment,S),m(u.$$.fragment,S),m(d.$$.fragment,S),y=!0)},o(S){_(o.$$.fragment,S),_(u.$$.fragment,S),_(d.$$.fragment,S),y=!1},d(S){S&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(d)}}}function bi(r){let e,n,t;return n=new ae({props:{$$slots:{default:[hi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function rr(r){let e,n;return e=new Xe({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function vi(r){let e;return{c(){e=w("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wi(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ki(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yi(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[wi]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ki]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=T(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Si(r){let e,n,t;return n=new ae({props:{$$slots:{default:[yi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function lr(r){let e,n,t,l;return t=new Xe({props:{colorScale:r[4],limits:r[6]().map(Mi)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=T(),h(t.$$.fragment)},m(o,i){$(o,e,i),$(o,n,i),b(t,o,i),l=!0},p:ee,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Oi(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){$(a,e,f),k(e,n),k(e,t),k(t,o),k(e,i),k(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&R(o,l),f&8192&&u!==(u=a[14]+"")&&R(s,u)},d(a){a&&p(e)}}}function Ci(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=A("b"),s=w(u),a=w(`
          cars`)},m(f,c){$(f,e,c),k(e,n),k(e,l),k(e,o),k(e,i),k(i,s),k(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&R(l,t),c&8200&&u!==(u=f[15]+"")&&R(s,u)},d(f){f&&p(e)}}}function Ti(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){$(f,e,c),k(e,n),k(n,l),k(n,o),k(e,i),k(e,s),k(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&R(l,t),c&8192&&u!==(u=f[14]+"")&&R(s,u)},d(f){f&&p(e)}}}function Ai(r){tr(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?Ti:o[3]=="average_cars_per_household"?Ci:Oi}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){tr(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Li(r){let e,n;return e=new le({props:{$$slots:{default:[Ai,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ii(r){let e,n,t,l;const o=[B(Ze),{sourceLayer:Ze},{paint:{"fill-color":ve(["get",r[3]],r[6](),r[4]),"fill-opacity":J(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Li]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Qe({props:i}),e.$on("click",r[5]);const u=[B(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new de({props:s}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?Y(o,[f&0&&ne(B(Ze)),f&0&&{sourceLayer:Ze},f&88&&{paint:{"fill-color":ve(["get",a[3]],a[6](),a[4]),"fill-opacity":J(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&8?Y(u,[f&0&&ne(B(`${Ze}-outline`)),f&0&&{sourceLayer:Ze},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Pi(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y;function S(I){r[7](I)}let C={id:"percent_households_with_car",$$slots:{right:[pi],default:[ai]},$$scope:{ctx:r}};r[0]!==void 0&&(C.checked=r[0]),e=new ie({props:C}),K.push(()=>Q(e,"checked",S)),e.$on("change",r[8]);let O=r[3]=="percent_households_with_car"&&nr(r);function E(I){r[9](I)}let F={id:"average_cars_per_household",$$slots:{right:[bi],default:[mi]},$$scope:{ctx:r}};r[1]!==void 0&&(F.checked=r[1]),o=new ie({props:F}),K.push(()=>Q(o,"checked",E)),o.$on("change",r[10]);let N=r[3]=="average_cars_per_household"&&rr(r);function L(I){r[11](I)}let D={id:"population_density",$$slots:{right:[Si],default:[vi]},$$scope:{ctx:r}};r[2]!==void 0&&(D.checked=r[2]),a=new ie({props:D}),K.push(()=>Q(a,"checked",L)),a.$on("change",r[12]);let M=r[3]=="population_density"&&lr(r);return g=new he({props:{url:`pmtiles://${ge()}/v1/${Ze}.pmtiles`,$$slots:{default:[Ii]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),O&&O.c(),l=T(),h(o.$$.fragment),u=T(),N&&N.c(),s=T(),h(a.$$.fragment),c=T(),M&&M.c(),d=T(),h(g.$$.fragment)},m(I,P){b(e,I,P),$(I,t,P),O&&O.m(I,P),$(I,l,P),b(o,I,P),$(I,u,P),N&&N.m(I,P),$(I,s,P),b(a,I,P),$(I,c,P),M&&M.m(I,P),$(I,d,P),b(g,I,P),y=!0},p(I,[P]){const H={};P&65536&&(H.$$scope={dirty:P,ctx:I}),!n&&P&1&&(n=!0,H.checked=I[0],x(()=>n=!1)),e.$set(H),I[3]=="percent_households_with_car"?O?(O.p(I,P),P&8&&m(O,1)):(O=nr(I),O.c(),m(O,1),O.m(l.parentNode,l)):O&&(fe(),_(O,1,1,()=>{O=null}),ue());const X={};P&65536&&(X.$$scope={dirty:P,ctx:I}),!i&&P&2&&(i=!0,X.checked=I[1],x(()=>i=!1)),o.$set(X),I[3]=="average_cars_per_household"?N?(N.p(I,P),P&8&&m(N,1)):(N=rr(I),N.c(),m(N,1),N.m(s.parentNode,s)):N&&(fe(),_(N,1,1,()=>{N=null}),ue());const j={};P&65536&&(j.$$scope={dirty:P,ctx:I}),!f&&P&4&&(f=!0,j.checked=I[2],x(()=>f=!1)),a.$set(j),I[3]=="population_density"?M?(M.p(I,P),P&8&&m(M,1)):(M=lr(I),M.c(),m(M,1),M.m(d.parentNode,d)):M&&(fe(),_(M,1,1,()=>{M=null}),ue());const U={};P&65544&&(U.$$scope={dirty:P,ctx:I}),g.$set(U)},i(I){y||(m(e.$$.fragment,I),m(O),m(o.$$.fragment,I),m(N),m(a.$$.fragment,I),m(M),m(g.$$.fragment,I),y=!0)},o(I){_(e.$$.fragment,I),_(O),_(o.$$.fragment,I),_(N),_(a.$$.fragment,I),_(M),_(g.$$.fragment,I),y=!1},d(I){I&&(p(t),p(l),p(u),p(s),p(c),p(d)),v(e,I),O&&O.d(I),v(o,I),N&&N.d(I),v(a,I),M&&M.d(I),v(g,I)}}}let Ze="census_output_areas";const Mi=r=>r.toLocaleString();function Ei(r,e,n){let t=te.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(C){let O=C.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${O}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${O}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(C){l=C,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function d(C){o=C,n(1,o)}const g=()=>{n(0,l=!1),n(2,i=!1)};function y(C){i=C,n(2,i)}const S=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,d,g,y,S]}class Ni extends q{constructor(e){super(),W(this,e,Ei,Pi,G,{})}}function Di(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Fi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ji(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Fi]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=T(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ri(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ji]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Bi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function Hi(r){let e,n;return e=new le({props:{$$slots:{default:[Bi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ui(r){let e,n,t,l;const o=[B(ft),{paint:{"fill-color":r[1],"fill-opacity":J(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Hi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Qe({props:i}),e.$on("click",zi);const u=[B(`${ft}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new de({props:s}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(ft)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":J(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${ft}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Gi(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ft,$$slots:{right:[Ri],default:[Di]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>Q(e,"checked",i)),l=new Dt({props:{data:`${ge()}/v1/${ft}.geojson`,$$slots:{default:[Ui]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ft="combined_authorities";function zi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function qi(r,e,n){let t=te.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Wi extends q{constructor(e){super(),W(this,e,qi,Gi,G,{})}}function Vi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ji(r){let e;return{c(){e=w(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ki(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Xi]},$$scope:{ctx:r}}}),o=new V({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Ji]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=T(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Zi(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ki]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function or(r){let e,n;return e=new Xe({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yi(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,d=r[4].rank.toLocaleString()+"",g,y;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(i),s=T(),a=A("p"),f=w("Rank: "),c=A("b"),g=w(d),y=w(`
        / 32,844 LSOAs`)},m(S,C){$(S,e,C),k(e,t),k(e,l),k(e,o),k(o,u),$(S,s,C),$(S,a,C),k(a,f),k(a,c),k(c,g),k(a,y)},p(S,C){C&16&&n!==(n=S[4].LSOA11CD+"")&&R(t,n),C&16&&i!==(i=S[4].score+"")&&R(u,i),C&16&&d!==(d=S[4].rank.toLocaleString()+"")&&R(g,d)},d(S){S&&(p(e),p(s),p(a))}}}function Qi(r){let e,n;return e=new le({props:{$$slots:{default:[Yi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xi(r){let e,n,t,l;const o=[B(Re),{sourceLayer:Re},{paint:{"fill-color":ve(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":J(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Qi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Qe({props:i});const u=[B(`${Re}-outline`),{sourceLayer:Re},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new de({props:s}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?Y(o,[f&0&&ne(B(Re)),f&0&&{sourceLayer:Re},f&6&&{paint:{"fill-color":ve(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":J(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&1?Y(u,[f&0&&ne(B(`${Re}-outline`)),f&0&&{sourceLayer:Re},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ea(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:Re,$$slots:{right:[Zi],default:[Vi]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),K.push(()=>Q(e,"checked",u));let a=r[0]&&or(r);return o=new he({props:{url:`pmtiles://${ge()}/v1/${Re}.pmtiles`,$$slots:{default:[xi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=or(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),_(a,1,1,()=>{a=null}),ue());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let Re="imd";function ta(r,e,n){let t=te.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class na extends q{constructor(e){super(),W(this,e,ta,ea,G,{})}}function ra(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function la(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oa(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[la]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=T(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function sa(r){let e,n,t;return n=new ae({props:{$$slots:{default:[oa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ia(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function aa(r){let e,n;return e=new le({props:{$$slots:{default:[ia,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fa(r){let e,n,t,l;const o=[B(ut),{paint:{"fill-color":r[1],"fill-opacity":J(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[aa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Qe({props:i}),e.$on("click",ca);const u=[B(`${ut}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new de({props:s}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(ut)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":J(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${ut}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ua(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ut,$$slots:{right:[sa],default:[ra]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>Q(e,"checked",i)),l=new Dt({props:{data:`${ge()}/v1/${ut}.geojson`,$$slots:{default:[fa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ut="local_authority_districts";function ca(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function $a(r,e,n){let t=te.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class pa extends q{constructor(e){super(),W(this,e,$a,ua,G,{})}}function ma(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function _a(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ga(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function da(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ha(r){let e;return{c(){e=w("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ba(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function va(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y,S,C,O,E,F,N,L,D;return t=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[_a]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ga]},$$scope:{ctx:r}}}),u=new V({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[da]},$$scope:{ctx:r}}}),g=new V({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[ha]},$$scope:{ctx:r}}}),E=new V({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[ba]},$$scope:{ctx:r}}}),L=new Ve({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=T(),f=A("p"),c=A("strong"),d=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(g.$$.fragment),y=w(" to get more details."),S=T(),C=A("p"),O=w("Data from ONS Geography via "),h(E.$$.fragment),F=w(", as of November 2022."),N=T(),h(L.$$.fragment)},m(M,I){$(M,e,I),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),b(u,e,null),k(e,s),$(M,a,I),$(M,f,I),k(f,c),k(c,d),b(g,c,null),k(c,y),$(M,S,I),$(M,C,I),k(C,O),b(E,C,null),k(C,F),$(M,N,I),b(L,M,I),D=!0},p(M,I){const P={};I&16&&(P.$$scope={dirty:I,ctx:M}),t.$set(P);const H={};I&16&&(H.$$scope={dirty:I,ctx:M}),o.$set(H);const X={};I&16&&(X.$$scope={dirty:I,ctx:M}),u.$set(X);const j={};I&16&&(j.$$scope={dirty:I,ctx:M}),g.$set(j);const U={};I&16&&(U.$$scope={dirty:I,ctx:M}),E.$set(U)},i(M){D||(m(t.$$.fragment,M),m(o.$$.fragment,M),m(u.$$.fragment,M),m(g.$$.fragment,M),m(E.$$.fragment,M),m(L.$$.fragment,M),D=!0)},o(M){_(t.$$.fragment,M),_(o.$$.fragment,M),_(u.$$.fragment,M),_(g.$$.fragment,M),_(E.$$.fragment,M),_(L.$$.fragment,M),D=!1},d(M){M&&(p(e),p(a),p(f),p(S),p(C),p(N)),v(t),v(o),v(u),v(g),v(E),v(L,M)}}}function wa(r){let e,n,t;return n=new ae({props:{$$slots:{default:[va]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function ka(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function ya(r){let e,n;return e=new le({props:{$$slots:{default:[ka,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sa(r){let e,n,t,l;const o=[B(Be),{sourceLayer:Be},{paint:{"fill-color":r[1],"fill-opacity":J(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[ya]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Qe({props:i});const u=[B(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new de({props:s}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(Be)),f&0&&{sourceLayer:Be},f&2&&{paint:{"fill-color":a[1],"fill-opacity":J(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${Be}-outline`)),f&0&&{sourceLayer:Be},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Oa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Be,$$slots:{right:[wa],default:[ma]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>Q(e,"checked",i)),l=new he({props:{url:`pmtiles://${ge()}/v1/${Be}.pmtiles`,$$slots:{default:[Sa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Be="local_planning_authorities";function Ca(r,e,n){let t=te.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ta extends q{constructor(e){super(),W(this,e,Ca,Oa,G,{})}}function Aa(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function La(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ia(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[La]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=T(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Pa(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ma(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&R(t,n)},d(l){l&&p(e)}}}function Ea(r){let e,n;return e=new le({props:{$$slots:{default:[Ma,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Na(r){let e,n,t,l;const o=[B(He),{sourceLayer:He},{paint:{"fill-color":r[1],"fill-opacity":J(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ea]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Qe({props:i}),e.$on("click",Fa);const u=[B(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new de({props:s}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(He)),f&0&&{sourceLayer:He},f&2&&{paint:{"fill-color":a[1],"fill-opacity":J(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${He}-outline`)),f&0&&{sourceLayer:He},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Da(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:He,$$slots:{right:[Pa],default:[Aa]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>Q(e,"checked",i)),l=new he({props:{url:`pmtiles://${ge()}/v1/${He}.pmtiles`,$$slots:{default:[Na]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let He="parliamentary_constituencies";function Fa(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function ja(r,e,n){let t=te.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ra extends q{constructor(e){super(),W(this,e,ja,Da,G,{})}}function Ba(r){let e;return{c(){e=w("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ha(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ua(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ga(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function za(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y,S,C;return t=new V({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ha]},$$scope:{ctx:r}}}),f=new V({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Ua]},$$scope:{ctx:r}}}),d=new V({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Ga]},$$scope:{ctx:r}}}),S=new Ve({}),{c(){e=A("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        µgm
        `),o=A("sup"),o.textContent="3",i=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=T(),s=A("p"),a=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(d.$$.fragment),g=w("."),y=T(),h(S.$$.fragment)},m(O,E){$(O,e,E),k(e,n),b(t,e,null),k(e,l),k(e,o),k(e,i),$(O,u,E),$(O,s,E),k(s,a),b(f,s,null),k(s,c),b(d,s,null),k(s,g),$(O,y,E),b(S,O,E),C=!0},p(O,E){const F={};E&2048&&(F.$$scope={dirty:E,ctx:O}),t.$set(F);const N={};E&2048&&(N.$$scope={dirty:E,ctx:O}),f.$set(N);const L={};E&2048&&(L.$$scope={dirty:E,ctx:O}),d.$set(L)},i(O){C||(m(t.$$.fragment,O),m(f.$$.fragment,O),m(d.$$.fragment,O),m(S.$$.fragment,O),C=!0)},o(O){_(t.$$.fragment,O),_(f.$$.fragment,O),_(d.$$.fragment,O),_(S.$$.fragment,O),C=!1},d(O){O&&(p(e),p(u),p(s),p(y)),v(t),v(f),v(d),v(S,O)}}}function qa(r){let e,n,t;return n=new ae({props:{$$slots:{default:[za]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function sr(r){let e,n,t,l,o=r[3](r[0])+"",i,u,s,a,f,c,d,g,y,S,C,O,E;function F(I){r[7](I)}let N={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(N.value=r[0]),e=new Tt({props:N}),K.push(()=>Q(e,"value",F));const L=[Va,Wa],D=[];function M(I,P){return I[0]=="Noise"?0:1}return g=M(r),y=D[g]=L[g](r),{c(){h(e.$$.fragment),t=T(),l=A("p"),i=w(o),u=T(),s=A("div"),a=A("label"),f=w(`Opacity
      `),c=A("input"),d=T(),y.c(),S=Ae(),z(c,"type","range"),z(c,"min","0"),z(c,"max","100")},m(I,P){b(e,I,P),$(I,t,P),$(I,l,P),k(l,i),$(I,u,P),$(I,s,P),k(s,a),k(a,f),k(a,c),qt(c,r[2]),$(I,d,P),D[g].m(I,P),$(I,S,P),C=!0,O||(E=[St(c,"change",r[8]),St(c,"input",r[8])],O=!0)},p(I,P){const H={};!n&&P&1&&(n=!0,H.value=I[0],x(()=>n=!1)),e.$set(H),(!C||P&1)&&o!==(o=I[3](I[0])+"")&&R(i,o),P&4&&qt(c,I[2]);let X=g;g=M(I),g===X?D[g].p(I,P):(fe(),_(D[X],1,1,()=>{D[X]=null}),ue(),y=D[g],y?y.p(I,P):(y=D[g]=L[g](I),y.c()),m(y,1),y.m(S.parentNode,S))},i(I){C||(m(e.$$.fragment,I),m(y),C=!0)},o(I){_(e.$$.fragment,I),_(y),C=!1},d(I){I&&(p(t),p(l),p(u),p(s),p(d),p(S)),v(e,I),D[g].d(I),O=!1,nl(E)}}}function Wa(r){let e,n,t;return{c(){e=A("img"),vn(e.src,n=r[5](r[0]))||z(e,"src",n),z(e,"width",150),z(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!vn(e.src,n=l[5](l[0]))&&z(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&z(e,"alt",t)},i:ee,o:ee,d(l){l&&p(e)}}}function Va(r){let e,n;return e=new Xe({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xa(r){let e,n;const t=[B("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new _l({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&6?Y(t,[t[0],i&4&&{paint:{"raster-opacity":o[2]/100}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ja(r){let e,n,t,l,o,i;function u(f){r[6](f)}let s={id:"pollution",$$slots:{right:[qa],default:[Ba]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new ie({props:s}),K.push(()=>Q(e,"checked",u));let a=r[1]&&sr(r);return o=new Pl({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Xa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],x(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=sr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),_(a,1,1,()=>{a=null}),ue());const g={};c&1&&(g.tiles=[f[4](f[0])]),c&2054&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}function Ka(r,e,n){let t,l=!1,o=50,i="PM25_viridis";function u(){return i=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${i}/MapServer/WMSServer`}function s(y){return t[1]}function a(y){let S=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${S}`}function f(y){let S=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${S}`}function c(y){l=y,n(1,l)}function d(y){i=y,n(0,i)}function g(){o=rl(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[i])},[i,l,o,s,a,f,c,d,g]}class Za extends q{constructor(e){super(),W(this,e,Ka,Ja,G,{})}}function Ya(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Qa(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Qa]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=T(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function ef(r){let e,n,t;return n=new ae({props:{$$slots:{default:[xa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function tf(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&R(t,n)},d(l){l&&p(e)}}}function nf(r){let e,n;return e=new le({props:{$$slots:{default:[tf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rf(r){let e,n,t,l;const o=[B(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":J(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[nf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Z(i,o[a]);e=new Qe({props:i}),e.$on("click",of);const u=[B(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Z(s,u[a]);return t=new de({props:s}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?Y(o,[f&0&&ne(B(Ue)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"fill-color":a[1],"fill-opacity":J(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const d=f&3?Y(u,[f&0&&ne(B(`${Ue}-outline`)),f&0&&{sourceLayer:Ue},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(d)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function lf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ue,$$slots:{right:[ef],default:[Ya]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>Q(e,"checked",i)),l=new he({props:{url:`pmtiles://${ge()}/v1/${Ue}.pmtiles`,$$slots:{default:[rf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Ue="wards";function of(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function sf(r,e,n){let t=te.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class af extends q{constructor(e){super(),W(this,e,sf,lf,G,{})}}function ff(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uf(r){let e,n,t,l;return t=new V({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[ff]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){$(o,e,i),k(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&p(e),v(t)}}}class rt extends q{constructor(e){super(),W(this,e,null,uf,G,{})}}function cf(r){let e,n,t;return e=new ke({props:{color:te.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function $f(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pf(r){let e,n,t,l,o,i,u,s,a;return o=new V({props:{href:"https://gtfs.org",$$slots:{default:[$f]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=T(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=T(),h(s.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),k(t,l),b(o,t,null),k(t,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&8&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(s,f)}}}function mf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[pf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function _f(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gf(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function df(r){let e;function n(o,i){return o[2].has_bus_lane?gf:_f}let t=n(r),l=t(r);return{c(){l.c(),e=Ae()},m(o,i){l.m(o,i),$(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function hf(r){let e,n;return e=new le({props:{$$slots:{default:[df,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bf(r){let e,n;const t=[B(ct),{sourceLayer:ct},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],te.bus_route_with_lane,te.bus_route_without_lane],"line-width":5,"line-opacity":J(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[hf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Y(t,[i&0&&ne(B(ct)),i&0&&{sourceLayer:ct},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vf(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:ct,$$slots:{right:[mf],default:[cf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>Q(e,"checked",i)),l=new he({props:{url:`pmtiles://${ge()}/v1/${ct}.pmtiles`,$$slots:{default:[bf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ct="bus_routes";function wf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class kf extends q{constructor(e){super(),W(this,e,wf,vf,G,{})}}function ir(r){const e=If(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function ar(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function yf(r){let e;return{c(){e=w("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sf(r){let e,n,t,l,o,i,u,s;return u=new rt({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=T(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=T(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=T(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,l,f),$(a,o,f),$(a,i,f),b(u,a,f),s=!0},p:ee,i(a){s||(m(u.$$.fragment,a),s=!0)},o(a){_(u.$$.fragment,a),s=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(i)),v(u,a)}}}function Of(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Sf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function fr(r){let e,n,t=qe(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=ur(ar(r,t,i));const o=i=>_(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=Ae()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);$(i,e,u),n=!0},p(i,u){if(u&2){t=qe(i[1]);let s;for(s=0;s<t.length;s+=1){const a=ar(i,t,s);l[s]?(l[s].p(a,u),m(l[s],1)):(l[s]=ur(a),l[s].c(),m(l[s],1),l[s].m(e.parentNode,e))}for(fe(),s=t.length;s<l.length;s+=1)o(s);ue()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)m(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)_(l[u]);n=!1},d(i){i&&p(e),Ot(l,i)}}}function ur(r){let e,n,t,l=r[7]+"",o,i,u;return n=new ke({props:{color:r[8]}}),{c(){e=A("div"),h(n.$$.fragment),t=T(),o=w(l),i=T()},m(s,a){$(s,e,a),b(n,e,null),k(e,t),k(e,o),k(e,i),u=!0},p:ee,i(s){u||(m(n.$$.fragment,s),u=!0)},o(s){_(n.$$.fragment,s),u=!1},d(s){s&&p(e),v(n)}}}function Cf(r){ir(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,d,g=r[6]+"",y;return{c(){e=A("h2"),t=w(n),l=T(),o=A("p"),i=w("Direction: "),u=A("b"),a=T(),f=A("p"),c=w("Width: "),d=A("b"),y=w(g)},m(S,C){$(S,e,C),k(e,t),$(S,l,C),$(S,o,C),k(o,i),k(o,u),u.innerHTML=s,$(S,a,C),$(S,f,C),k(f,c),k(f,d),k(d,y)},p(S,C){ir(S),C&8&&n!==(n=S[4]+"")&&R(t,n),C&8&&s!==(s=S[5]+"")&&(u.innerHTML=s),C&8&&g!==(g=S[6]+"")&&R(y,g)},d(S){S&&(p(e),p(l),p(o),p(a),p(f))}}}function Tf(r){let e,n;return e=new le({props:{$$slots:{default:[Cf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Af(r){let e,n;const t=[B($t),{sourceLayer:$t},{paint:{"line-color":zt(["get","kind"],{track:te.cycle_paths.track,lane:te.cycle_paths.lane,shared_use_segregated:te.cycle_paths.shared_use_segregated,shared_use_unsegregated:te.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ne,"line-opacity":J(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[Tf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new de({props:l}),e.$on("click",Pf),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?Y(t,[i&0&&ne(B($t)),i&0&&{sourceLayer:$t},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Lf(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:$t,$$slots:{right:[Of],default:[yf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),K.push(()=>Q(e,"checked",u));let a=r[0]&&fr(r);return o=new he({props:{url:`pmtiles://${ge()}/v1/${$t}.pmtiles`,$$slots:{default:[Af]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&2048&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=fr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),_(a,1,1,()=>{a=null}),ue());const g={};c&2049&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let $t="cycle_paths";function If(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function Pf(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Mf(r,e,n){let t=[["Separated tracks",te.cycle_paths.track],["Unprotected lanes",te.cycle_paths.lane],["Shared-use (segregated)",te.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",te.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ef extends q{constructor(e){super(),W(this,e,Mf,Lf,G,{})}}function Nf(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Df(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ff(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Df]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=T(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function jf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Ff]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Rf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&R(t,n)},d(l){l&&p(e)}}}function Bf(r){let e,n;return e=new le({props:{$$slots:{default:[Rf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hf(r){let e,n;const t=[B(pt),{sourceLayer:pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":J(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Bf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(B(pt)),i&0&&{sourceLayer:pt},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":J(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Uf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:pt,$$slots:{right:[jf],default:[Nf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>Q(e,"checked",i)),l=new he({props:{url:`pmtiles://${ge()}/v1/${pt}.pmtiles`,$$slots:{default:[Hf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let pt="mrn";function Gf(r,e,n){let t=te.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class zf extends q{constructor(e){super(),W(this,e,Gf,Uf,G,{})}}function qf(r){let e;return{c(){e=w("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vf(r){let e,n,t,l,o,i,u,s,a;return u=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Wf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road.`,n=T(),t=A("p"),t.textContent="Data valid as of 1 January, 2024",l=T(),o=A("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),k(o,i),b(u,o,null),k(o,s),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),u.$set(d)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),v(u)}}}function Xf(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Vf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function cr(r){let e,n;return e=new Xe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jf(r){let e,n,t,l=r[4].side+"",o,i,u,s,a,f=r[4].average+"",c,d,g,y,S,C,O=r[4].minimum+"",E,F;return{c(){e=A("p"),n=w("Side of the road: "),t=A("b"),o=w(l),i=T(),u=A("p"),s=w("Average width: "),a=A("b"),c=w(f),d=w(`
        meters`),g=T(),y=A("p"),S=w("Minimum width: "),C=A("b"),E=w(O),F=w(`
        meters`)},m(N,L){$(N,e,L),k(e,n),k(e,t),k(t,o),$(N,i,L),$(N,u,L),k(u,s),k(u,a),k(a,c),k(u,d),$(N,g,L),$(N,y,L),k(y,S),k(y,C),k(C,E),k(y,F)},p(N,L){L&16&&l!==(l=N[4].side+"")&&R(o,l),L&16&&f!==(f=N[4].average+"")&&R(c,f),L&16&&O!==(O=N[4].minimum+"")&&R(E,O)},d(N){N&&(p(e),p(i),p(u),p(g),p(y))}}}function Kf(r){let e,n;return e=new le({props:{$$slots:{default:[Jf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zf(r){let e,n;const t=[B(mt),{sourceLayer:mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get","average"],r[2],r[1]),"line-width":Ne,"line-opacity":J(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Kf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Y(t,[i&0&&ne(B(mt)),i&0&&{sourceLayer:mt},t[2],t[3],i&6&&{paint:{"line-color":ve(["get","average"],o[2],o[1]),"line-width":Ne,"line-opacity":J(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yf(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:mt,$$slots:{right:[Xf],default:[qf]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),K.push(()=>Q(e,"checked",u));let a=r[0]&&cr(r);return o=new he({props:{url:`pmtiles://${Kt()}/v1/${mt}.pmtiles`,$$slots:{default:[Zf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=cr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),_(a,1,1,()=>{a=null}),ue());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let mt="pavement_widths";function Qf(r,e,n){let t=te.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class xf extends q{constructor(e){super(),W(this,e,Qf,Yf,G,{})}}function eu(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tu(r){let e;return{c(){e=w("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nu(r){let e;return{c(){e=w("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ru(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new V({props:{href:"https://www.pct.bike",$$slots:{default:[tu]},$$scope:{ctx:r}}}),a=new V({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=T(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=T(),o=A("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(d,g){$(d,e,g),$(d,n,g),$(d,t,g),$(d,l,g),$(d,o,g),k(o,i),b(u,o,null),k(o,s),b(a,o,null),k(o,f),c=!0},p(d,g){const y={};g&1024&&(y.$$scope={dirty:g,ctx:d}),u.$set(y);const S={};g&1024&&(S.$$scope={dirty:g,ctx:d}),a.$set(S)},i(d){c||(m(u.$$.fragment,d),m(a.$$.fragment,d),c=!0)},o(d){_(u.$$.fragment,d),_(a.$$.fragment,d),c=!1},d(d){d&&(p(e),p(n),p(t),p(l),p(o)),v(u),v(a)}}}function lu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[ru]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function $r(r){let e,n,t,l,o,i,u,s;e=new Xe({props:{colorScale:r[3],limits:r[4]}});function a(g){r[7](g)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new Mr({props:f}),K.push(()=>Q(t,"value",a));function c(g){r[8](g)}let d={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(d.value=r[1]),i=new Tt({props:d}),K.push(()=>Q(i,"value",c)),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),o=T(),h(i.$$.fragment)},m(g,y){b(e,g,y),$(g,n,y),b(t,g,y),$(g,o,y),b(i,g,y),s=!0},p(g,y){const S={};!l&&y&1&&(l=!0,S.value=g[0],x(()=>l=!1)),t.$set(S);const C={};!u&&y&2&&(u=!0,C.value=g[1],x(()=>u=!1)),i.$set(C)},i(g){s||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(i.$$.fragment,g),s=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(i.$$.fragment,g),s=!1},d(g){g&&(p(n),p(o)),v(e,g),v(t,g),v(i,g)}}}function ou(r){let e,n=r[5](r[9])+"",t;return{c(){e=new _n(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function su(r){let e,n;return e=new le({props:{$$slots:{default:[ou,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function iu(r){let e,n;const t=[B(Ge),{sourceLayer:Ge},{paint:{"line-color":ve(["get",r[1]],r[4],r[3]),"line-width":Ne,"line-opacity":J(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ge?"visible":"none"}}];let l={$$slots:{default:[su]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Y(t,[i&0&&ne(B(Ge)),i&0&&{sourceLayer:Ge},i&26&&{paint:{"line-color":ve(["get",o[1]],o[4],o[3]),"line-width":Ne,"line-opacity":J(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ge?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function au(r){let e,n=r[5](r[9])+"",t;return{c(){e=new _n(!1),t=Ae(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function fu(r){let e,n;return e=new le({props:{$$slots:{default:[au,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uu(r){let e,n;const t=[B(lt),{sourceLayer:lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get",r[1]],r[4],r[3]),"line-width":Ne,"line-opacity":J(1,.5)}},{layout:{visibility:r[2]&&r[0]==lt?"visible":"none"}}];let l={$$slots:{default:[fu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?Y(t,[i&0&&ne(B(lt)),i&0&&{sourceLayer:lt},t[2],t[3],i&26&&{paint:{"line-color":ve(["get",o[1]],o[4],o[3]),"line-width":Ne,"line-opacity":J(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==lt?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function cu(r){let e,n,t,l,o,i,u,s;function a(d){r[6](d)}let f={id:Ge,$$slots:{right:[lu],default:[eu]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new ie({props:f}),K.push(()=>Q(e,"checked",a));let c=r[2]&&$r(r);return o=new he({props:{url:`pmtiles://${ge()}/v1/${Ge}.pmtiles`,$$slots:{default:[iu]},$$scope:{ctx:r}}}),u=new he({props:{url:`pmtiles://${ge()}/v1/${lt}.pmtiles`,$$slots:{default:[uu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),c&&c.c(),l=T(),h(o.$$.fragment),i=T(),h(u.$$.fragment)},m(d,g){b(e,d,g),$(d,t,g),c&&c.m(d,g),$(d,l,g),b(o,d,g),$(d,i,g),b(u,d,g),s=!0},p(d,[g]){const y={};g&1024&&(y.$$scope={dirty:g,ctx:d}),!n&&g&4&&(n=!0,y.checked=d[2],x(()=>n=!1)),e.$set(y),d[2]?c?(c.p(d,g),g&4&&m(c,1)):(c=$r(d),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(fe(),_(c,1,1,()=>{c=null}),ue());const S={};g&1031&&(S.$$scope={dirty:g,ctx:d}),o.$set(S);const C={};g&1031&&(C.$$scope={dirty:g,ctx:d}),u.$set(C)},i(d){s||(m(e.$$.fragment,d),m(c),m(o.$$.fragment,d),m(u.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(c),_(o.$$.fragment,d),_(u.$$.fragment,d),s=!1},d(d){d&&(p(t),p(l),p(i)),v(e,d),c&&c.d(d),v(o,d),v(u,d)}}}let Ge="pct_commute",lt="pct_school";function $u(r,e,n){let t=te.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ge,i="baseline",u=!1;function s(d){let g=d.baseline,y=d.gov_target,S=d.go_dutch,C=`<h2>Trip purpose: ${o==Ge?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)C+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let O=(y/g).toFixed(1),E=(S/g).toFixed(1);C+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${O}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${E}x</b> of baseline)</p>`}return C}function a(d){u=d,n(2,u)}function f(d){o=d,n(0,o)}function c(d){i=d,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class pu extends q{constructor(e){super(),W(this,e,$u,cu,G,{})}}function mu(r){let e;return{c(){e=w("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _u(r){let e;return{c(){e=w("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function du(r){let e,n,t,l,o,i,u,s,a,f,c,d;return t=new V({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[_u]},$$scope:{ctx:r}}}),f=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=T(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=T(),s=A("p"),a=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(g,y){$(g,e,y),k(e,n),b(t,e,null),k(e,l),$(g,o,y),$(g,i,y),$(g,u,y),$(g,s,y),k(s,a),b(f,s,null),k(s,c),d=!0},p(g,y){const S={};y&256&&(S.$$scope={dirty:y,ctx:g}),t.$set(S);const C={};y&256&&(C.$$scope={dirty:y,ctx:g}),f.$set(C)},i(g){d||(m(t.$$.fragment,g),m(f.$$.fragment,g),d=!0)},o(g){_(t.$$.fragment,g),_(f.$$.fragment,g),d=!1},d(g){g&&(p(e),p(o),p(i),p(u),p(s)),v(t),v(f)}}}function hu(r){let e,n,t;return n=new ae({props:{$$slots:{default:[du]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function pr(r){let e,n,t,l,o;e=new Xe({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new Mr({props:u}),K.push(()=>Q(t,"value",i)),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],x(()=>l=!1)),t.$set(f)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),o=!1},d(s){s&&p(n),v(e,s),v(t,s)}}}function bu(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,d=r[4][r[7].highest_description]+"",g,y;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=T(),u=A("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),g=w(d),y=w(")")},m(S,C){$(S,e,C),k(e,n),k(e,l),k(e,o),$(S,i,C),$(S,u,C),k(u,s),k(u,f),k(u,c),k(u,g),k(u,y)},p(S,C){C&128&&t!==(t=S[7].indicative_mph+"")&&R(l,t),C&128&&a!==(a=S[7].highest_mph+"")&&R(f,a),C&128&&d!==(d=S[4][S[7].highest_description]+"")&&R(g,d)},d(S){S&&(p(e),p(i),p(u))}}}function vu(r){let e,n;return e=new le({props:{$$slots:{default:[bu,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wu(r){let e,n;const t=[B(_t),{sourceLayer:_t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get",r[0]],r[3],r[2]),"line-width":Ne,"line-opacity":J(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[vu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?Y(t,[i&0&&ne(B(_t)),i&0&&{sourceLayer:_t},t[2],t[3],i&13&&{paint:{"line-color":ve(["get",o[0]],o[3],o[2]),"line-width":Ne,"line-opacity":J(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ku(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:_t,$$slots:{right:[hu],default:[mu]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new ie({props:s}),K.push(()=>Q(e,"checked",u));let a=r[1]&&pr(r);return o=new he({props:{url:`pmtiles://${Kt()}/v1/${_t}.pmtiles`,$$slots:{default:[wu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&256&&(d.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,d.checked=f[1],x(()=>n=!1)),e.$set(d),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=pr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),_(a,1,1,()=>{a=null}),ue());const g={};c&259&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let _t="road_speeds";function yu(r,e,n){let t=te.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class Su extends q{constructor(e){super(),W(this,e,yu,ku,G,{})}}function Ou(r){let e;return{c(){e=w("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tu(r){let e,n,t,l,o,i,u,s,a;return u=new V({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Cu]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=T(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=T(),o=A("p"),i=w(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,l,c),$(f,o,c),k(o,i),b(u,o,null),k(o,s),a=!0},p(f,c){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),u.$set(d)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(l),p(o)),v(u)}}}function Au(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function mr(r){let e,n;return e=new Xe({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lu(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",d,g;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),i=w(`
        meters`),u=T(),s=A("p"),a=w("Minimum width: "),f=A("b"),d=w(c),g=w(`
        meters`)},m(y,S){$(y,e,S),k(e,n),k(e,t),k(t,o),k(e,i),$(y,u,S),$(y,s,S),k(s,a),k(s,f),k(f,d),k(s,g)},p(y,S){S&16&&l!==(l=y[4].average+"")&&R(o,l),S&16&&c!==(c=y[4].minimum+"")&&R(d,c)},d(y){y&&(p(e),p(u),p(s))}}}function Iu(r){let e,n;return e=new le({props:{$$slots:{default:[Lu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Pu(r){let e,n;const t=[B(gt),{sourceLayer:gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get","average"],r[2],r[1]),"line-width":Ne,"line-opacity":J(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Iu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new de({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Y(t,[i&0&&ne(B(gt)),i&0&&{sourceLayer:gt},t[2],t[3],i&6&&{paint:{"line-color":ve(["get","average"],o[2],o[1]),"line-width":Ne,"line-opacity":J(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Mu(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:gt,$$slots:{right:[Au],default:[Ou]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),K.push(()=>Q(e,"checked",u));let a=r[0]&&mr(r);return o=new he({props:{url:`pmtiles://${Kt()}/v1/${gt}.pmtiles`,$$slots:{default:[Pu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=mr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),_(a,1,1,()=>{a=null}),ue());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let gt="road_widths";function Eu(r,e,n){let t=te.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Nu extends q{constructor(e){super(),W(this,e,Eu,Mu,G,{})}}function Du(r){let e,n,t;return{c(){e=A("input"),z(e,"class","govuk-file-upload"),z(e,"id","load-criticals"),z(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=St(e,"change",r[5]),n=!0)},p:ee,d(l){l&&p(e),r[7](null),n=!1,t()}}}function _r(r){let e,n;return e=new Ft({props:{small:!0,$$slots:{default:[ju]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fu(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new ke({props:{color:kt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),$(u,n,s),$(u,l,s),$(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&R(l,t)},i(u){i||(m(e.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),i=!1},d(u){u&&(p(n),p(l),p(o)),v(e,u)}}}function ju(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[Fu]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ie({props:o}),K.push(()=>Q(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],x(()=>n=!1)),e.$set(s)},i(i){t||(m(e.$$.fragment,i),t=!0)},o(i){_(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function Ru(r){let e,n,t,l,o,i;e=new Pr({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Du]},$$scope:{ctx:r}}}),t=new Er({props:{errorMessage:r[3]}});let u=r[2]>0&&_r(r);return{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),u&&u.c(),o=Ae()},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),u&&u.m(s,a),$(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&m(u,1)):(u=_r(s),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(fe(),_(u,1,1,()=>{u=null}),ue())},i(s){i||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(u),i=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(u),i=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),u&&u.d(s)}}}function Bu(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,d,g,y,S=r[10].notes+"",C,O,E,F,N,L,D,M=r[10].id+"",I,P,H,X,j,U=(r[10].inspector??"???")+"",$e,De,be,Je=r[10].submission_time+"",pe,ce,re,xe,Te,Le=r[10].scheme_reference+"",Fe,oe,_e,je=r[10].current_design_stage+"",Ke;return{c(){e=A("div"),n=A("h2"),l=w(t),o=T(),i=A("p"),u=A("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=T(),d=A("p"),g=A("u"),g.textContent="Notes",y=w(`
          : `),C=w(S),O=T(),E=A("hr"),F=T(),N=A("p"),L=w("Critical issue ID: "),D=A("b"),I=w(M),P=T(),H=A("p"),X=w("Submitted by "),j=A("b"),$e=w(U),De=w(`
          at
          `),be=A("b"),pe=w(Je),ce=T(),re=A("p"),xe=w("For scheme "),Te=A("b"),Fe=w(Le),oe=w(`
          in stage
          `),_e=A("b"),Ke=w(je),Ce(e,"max-width","30vw")},m(we,ye){$(we,e,ye),k(e,n),k(n,l),k(e,o),k(e,i),k(i,u),k(i,s),k(i,f),k(e,c),k(e,d),k(d,g),k(d,y),k(d,C),k(e,O),k(e,E),k(e,F),k(e,N),k(N,L),k(N,D),k(D,I),k(e,P),k(e,H),k(H,X),k(H,j),k(j,$e),k(H,De),k(H,be),k(be,pe),k(e,ce),k(e,re),k(re,xe),k(re,Te),k(Te,Fe),k(re,oe),k(re,_e),k(_e,Ke)},p(we,ye){ye&1024&&t!==(t=we[10].critical_type+"")&&R(l,t),ye&1024&&a!==(a=we[10].location_description+"")&&R(f,a),ye&1024&&S!==(S=we[10].notes+"")&&R(C,S),ye&1024&&M!==(M=we[10].id+"")&&R(I,M),ye&1024&&U!==(U=(we[10].inspector??"???")+"")&&R($e,U),ye&1024&&Je!==(Je=we[10].submission_time+"")&&R(pe,Je),ye&1024&&Le!==(Le=we[10].scheme_reference+"")&&R(Fe,Le),ye&1024&&je!==(je=we[10].current_design_stage+"")&&R(Ke,je)},d(we){we&&p(e)}}}function Hu(r){let e,n;return e=new le({props:{$$slots:{default:[Bu,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uu(r){let e,n,t,l,o,i;const u=[B(`${tt}-clusters`),{applyToClusters:!0},{paint:{"circle-color":kt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let g=0;g<u.length;g+=1)s=Z(s,u[g]);e=new nt({props:s}),e.$on("click",r[6]);const a=[B(`${tt}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let g=0;g<a.length;g+=1)f=Z(f,a[g]);t=new Dl({props:f});const c=[B(`${tt}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":kt,"circle-opacity":J(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let d={$$slots:{default:[Hu]},$$scope:{ctx:r}};for(let g=0;g<c.length;g+=1)d=Z(d,c[g]);return o=new nt({props:d}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment)},m(g,y){b(e,g,y),$(g,n,y),b(t,g,y),$(g,l,y),b(o,g,y),i=!0},p(g,y){const S=y&2?Y(u,[y&0&&ne(B(`${tt}-clusters`)),u[1],y&0&&{paint:{"circle-color":kt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:g[1]?"visible":"none"}},u[4]]):{};e.$set(S);const C=y&2?Y(a,[y&0&&ne(B(`${tt}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:g[1]?"visible":"none"}}]):{};t.$set(C);const O=y&2?Y(c,[y&0&&ne(B(`${tt}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":kt,"circle-opacity":J(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:g[1]?"visible":"none"}}]):{};y&2048&&(O.$$scope={dirty:y,ctx:g}),o.$set(O)},i(g){i||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(o.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),i=!1},d(g){g&&(p(n),p(l)),v(e,g),v(t,g),v(o,g)}}}function Gu(r){let e,n,t,l;return e=new Me({props:{label:"Critical Issues",$$slots:{default:[Ru]},$$scope:{ctx:r}}}),t=new Dt({props:{id:tt,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let tt="criticals",kt="red";function zu(r,e,n){let t;me(r,pn,g=>n(9,t=g));let l,o=!0,i=0,u="",s=ll();async function a(g){try{n(4,s=await Vs(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}function f(g){t.getSource(tt).getClusterExpansionZoom(g.detail.features[0].properties.cluster_id,(y,S)=>{y||t.easeTo({center:g.detail.features[0].geometry.coordinates,zoom:S})})}function c(g){K[g?"unshift":"push"](()=>{l=g,n(0,l)})}function d(g){o=g,n(1,o)}return[l,o,i,u,s,a,f,c,d]}class qu extends q{constructor(e){super(),W(this,e,zu,Gu,G,{})}}function Wu(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Vu(r){let e;return{c(){e=w("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xu(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Vu]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=T(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Ju(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Xu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ku(r){let e,n=gr(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=gr(l[3])+"")&&R(t,n)},d(l){l&&p(e)}}}function Zu(r){let e,n;return e=new le({props:{$$slots:{default:[Ku,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yu(r){let e,n;const t=[B(dt),{sourceLayer:dt},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Zu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new nt({props:l}),e.$on("click",xu),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(B(dt)),i&0&&{sourceLayer:dt},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Qu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:dt,$$slots:{right:[Ju],default:[Wu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>Q(e,"checked",i)),l=new he({props:{url:`pmtiles://${ge()}/v1/${dt}.pmtiles`,$$slots:{default:[Yu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let dt="crossings";function gr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function xu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function ec(r,e,n){let t=te.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class tc extends q{constructor(e){super(),W(this,e,ec,Qu,G,{})}}function nc(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function rc(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lc(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[rc]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=T(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function oc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[lc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function sc(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(i,u){$(i,e,u),k(e,n),k(e,t),k(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&R(o,l)},d(i){i&&p(e)}}}function ic(r){let e,n;return e=new le({props:{$$slots:{default:[sc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ac(r){let e,n;const t=[B(ht),{sourceLayer:ht},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[ic]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new nt({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(B(ht)),i&0&&{sourceLayer:ht},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function fc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ht,$$slots:{right:[oc],default:[nc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>Q(e,"checked",i)),l=new he({props:{url:`pmtiles://${ge()}/v1/${ht}.pmtiles`,$$slots:{default:[ac]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let ht="cycle_parking";function uc(r,e,n){let t=te.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class cc extends q{constructor(e){super(),W(this,e,uc,fc,G,{})}}function $c(r){let e,n,t,l;return e=new ke({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=T(),t=w(r[2])},m(o,i){b(e,o,i),$(o,n,i),$(o,t,i),l=!0},p(o,i){(!l||i&4)&&R(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function pc(r){let e;const n=r[5].default,t=Pt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Mt(t,n,l,l[7],e?Nt(n,l[7],o,null):Et(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function mc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[pc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function _c(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&R(t,n)},d(l){l&&p(e)}}}function gc(r){let e,n;return e=new le({props:{$$slots:{default:[_c,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dc(r){let e,n;const t=[B(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":J(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[gc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new Qe({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?Y(t,[i&1&&ne(B(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":J(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function hc(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[mc],default:[$c]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new ie({props:u}),K.push(()=>Q(e,"checked",i)),l=new he({props:{url:`pmtiles://${ge()}/v1/${r[0]}.pmtiles`,$$slots:{default:[dc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],x(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${ge()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function bc(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=te[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class dn extends q{constructor(e){super(),W(this,e,bc,hc,G,{name:0,singularNoun:1,pluralNoun:2})}}function vc(r){let e;return{c(){e=w("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wc(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[vc]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=T(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function kc(r){let e,n;return e=new dn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class yc extends q{constructor(e){super(),W(this,e,null,kc,G,{})}}function Sc(r){let e,n,t;return e=new ke({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ee,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Oc(r){let e;return{c(){e=w("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cc(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Oc]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=T(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Tc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Cc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ac(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&R(t,n)},d(l){l&&p(e)}}}function Lc(r){let e,n;return e=new le({props:{$$slots:{default:[Ac,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ic(r){let e,n;const t=[B(Xt),{paint:{"circle-color":r[1],"circle-radius":Wt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Lc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new nt({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?Y(t,[i&0&&ne(B(Xt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Wt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Pc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Xt,$$slots:{right:[Tc],default:[Sc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new ie({props:u}),K.push(()=>Q(e,"checked",i)),l=new Dt({props:{data:`${ge()}/v1/${Xt}.geojson`,$$slots:{default:[Ic]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],x(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}let Xt="railway_stations";function Mc(r,e,n){let t=te.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Ec extends q{constructor(e){super(),W(this,e,Mc,Pc,G,{})}}function Nc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Dc(r){let e,n,t,l,o,i,u;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[Nc]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=T(),h(i.$$.fragment)},m(s,a){$(s,e,a),k(e,n),b(t,e,null),k(e,l),$(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||(m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(e),p(o)),v(t),v(i,s)}}}function Fc(r){let e,n;return e=new dn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[Dc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class jc extends q{constructor(e){super(),W(this,e,null,Fc,G,{})}}function Rc(r){let e;return{c(){e=w("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bc(r){let e;return{c(){e=w("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hc(r){let e,n,t,l,o,i,u,s,a;return t=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Rc]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Bc]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=T(),h(s.$$.fragment)},m(f,c){$(f,e,c),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(f,u,c),b(s,f,c),a=!0},p(f,c){const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),t.$set(d);const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(s.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(s.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(s,f)}}}function Uc(r){let e,n;return e=new dn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Hc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Gc extends q{constructor(e){super(),W(this,e,null,Uc,G,{})}}function zc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wc(r){let e;return{c(){e=w("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vc(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new V({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[qc]},$$scope:{ctx:r}}}),o=new V({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Wc]},$$scope:{ctx:r}}}),f=new Ve({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=T(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=T(),h(f.$$.fragment)},m(d,g){$(d,e,g),k(e,n),b(t,e,null),k(e,l),b(o,e,null),k(e,i),$(d,u,g),$(d,s,g),$(d,a,g),b(f,d,g),c=!0},p(d,g){const y={};g&64&&(y.$$scope={dirty:g,ctx:d}),t.$set(y);const S={};g&64&&(S.$$scope={dirty:g,ctx:d}),o.$set(S)},i(d){c||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),c=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),c=!1},d(d){d&&(p(e),p(u),p(s),p(a)),v(t),v(o),v(f,d)}}}function Xc(r){let e,n,t;return n=new ae({props:{$$slots:{default:[Vc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),z(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function dr(r){let e,n;return e=new Xe({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,d,g,y=r[5].pedal_cycles_2022.toLocaleString()+"",S,C,O,E,F,N=r[5].method+"",L;return{c(){e=A("h2"),t=w(n),l=T(),o=A("p"),i=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(s),f=T(),c=A("p"),d=w("Total pedal cycles (2022 AADF): "),g=A("b"),S=w(y),C=T(),O=A("p"),E=w("Count method: "),F=A("b"),L=w(N)},m(D,M){$(D,e,M),k(e,t),$(D,l,M),$(D,o,M),k(o,i),k(o,u),k(u,a),$(D,f,M),$(D,c,M),k(c,d),k(c,g),k(g,S),$(D,C,M),$(D,O,M),k(O,E),k(O,F),k(F,L)},p(D,M){M&32&&n!==(n=D[5].location+"")&&R(t,n),M&32&&s!==(s=D[5].motor_vehicles_2022.toLocaleString()+"")&&R(a,s),M&32&&y!==(y=D[5].pedal_cycles_2022.toLocaleString()+"")&&R(S,y),M&32&&N!==(N=D[5].method+"")&&R(L,N)},d(D){D&&(p(e),p(l),p(o),p(f),p(c),p(C),p(O))}}}function Kc(r){let e,n;return e=new le({props:{$$slots:{default:[Jc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zc(r){let e,n;const t=[B(bt),{sourceLayer:bt},{paint:{"circle-color":ve(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Kc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Z(l,t[o]);return e=new nt({props:l}),e.$on("click",Qc),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?Y(t,[i&0&&ne(B(bt)),i&0&&{sourceLayer:bt},i&6&&{paint:{"circle-color":ve(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:bt,$$slots:{right:[Xc],default:[zc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new ie({props:s}),K.push(()=>Q(e,"checked",u));let a=r[0]&&dr(r);return o=new he({props:{url:`pmtiles://${ge()}/v1/${bt}.pmtiles`,$$slots:{default:[Zc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),a&&a.c(),l=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,l,c),b(o,f,c),i=!0},p(f,[c]){const d={};c&64&&(d.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,d.checked=f[0],x(()=>n=!1)),e.$set(d),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=dr(f),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(fe(),_(a,1,1,()=>{a=null}),ue());const g={};c&65&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),i=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),i=!1},d(f){f&&(p(t),p(l)),v(e,f),a&&a.d(f),v(o,f)}}}let bt="vehicle_counts";function Qc(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function xc(r,e,n){let t=te.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class e$ extends q{constructor(e){super(),W(this,e,xc,Yc,G,{})}}function t$(r){let e,n,t,l,o,i,u,s;return e=new jc({}),t=new yc({}),o=new Gc({}),u=new Ec({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment),i=T(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,l,f),b(o,a,f),$(a,i,f),b(u,a,f),s=!0},i(a){s||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),s=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),s=!1},d(a){a&&(p(n),p(l),p(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function n$(r){let e,n;return e=new Ft({props:{small:!0,$$slots:{default:[t$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function r$(r){let e,n,t,l,o,i,u,s,a,f;return e=new Ef({}),t=new zf({}),o=new kf({}),u=new cc({}),a=new tc({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment),i=T(),h(u.$$.fragment),s=T(),h(a.$$.fragment)},m(c,d){b(e,c,d),$(c,n,d),b(t,c,d),$(c,l,d),b(o,c,d),$(c,i,d),b(u,c,d),$(c,s,d),b(a,c,d),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function l$(r){let e,n;return e=new Ft({props:{small:!0,$$slots:{default:[r$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function o$(r){let e,n,t,l,o,i,u,s,a,f;return e=new Ra({}),t=new af({}),o=new Wi({}),u=new pa({}),a=new Ta({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment),i=T(),h(u.$$.fragment),s=T(),h(a.$$.fragment)},m(c,d){b(e,c,d),$(c,n,d),b(t,c,d),$(c,l,d),b(o,c,d),$(c,i,d),b(u,c,d),$(c,s,d),b(a,c,d),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(l),p(i),p(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function s$(r){let e,n;return e=new Ft({props:{small:!0,$$slots:{default:[o$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function i$(r){let e,n,t,l;return e=new Ni({}),t=new na({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function a$(r){let e,n,t,l,o,i;return e=new Nu({}),t=new xf({}),o=new Su({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment)},m(u,s){b(e,u,s),$(u,n,s),b(t,u,s),$(u,l,s),b(o,u,s),i=!0},i(u){i||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),i=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),i=!1},d(u){u&&(p(n),p(l)),v(e,u),v(t,u),v(o,u)}}}function f$(r){let e,n,t,l,o=$n()=="Private (development)",i,u,s;e=new e$({}),t=new pu({});let a=o&&a$();return u=new Za({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),a&&a.c(),i=T(),h(u.$$.fragment)},m(f,c){b(e,f,c),$(f,n,c),b(t,f,c),$(f,l,c),a&&a.m(f,c),$(f,i,c),b(u,f,c),s=!0},p:ee,i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(a),m(u.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(a),_(u.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(i)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function u$(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new cl({props:u}),K.push(()=>Q(e,"enabled",i)),l=new dl({}),{c(){h(e.$$.fragment),t=T(),h(l.$$.fragment)},m(s,a){b(e,s,a),$(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],x(()=>n=!1)),e.$set(f)},i(s){o||(m(e.$$.fragment,s),m(l.$$.fragment,s),o=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),o=!1},d(s){s&&p(t),v(e,s),v(l,s)}}}function c$(r){let e,n,t,l,o,i,u,s,a,f,c,d,g,y,S,C;return e=new qu({}),t=new Me({props:{label:"Trip generators",$$slots:{default:[n$]},$$scope:{ctx:r}}}),o=new Me({props:{label:"Existing infrastructure",$$slots:{default:[l$]},$$scope:{ctx:r}}}),u=new Me({props:{label:"Boundaries",$$slots:{default:[s$]},$$scope:{ctx:r}}}),a=new Me({props:{label:"Census",$$slots:{default:[i$]},$$scope:{ctx:r}}}),c=new Me({props:{label:"Other",$$slots:{default:[f$]},$$scope:{ctx:r}}}),g=new Me({props:{label:"Tools",$$slots:{default:[u$]},$$scope:{ctx:r}}}),S=new ul({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment),i=T(),h(u.$$.fragment),s=T(),h(a.$$.fragment),f=T(),h(c.$$.fragment),d=T(),h(g.$$.fragment),y=T(),h(S.$$.fragment)},m(O,E){b(e,O,E),$(O,n,E),b(t,O,E),$(O,l,E),b(o,O,E),$(O,i,E),b(u,O,E),$(O,s,E),b(a,O,E),$(O,f,E),b(c,O,E),$(O,d,E),b(g,O,E),$(O,y,E),b(S,O,E),C=!0},p(O,E){const F={};E&8&&(F.$$scope={dirty:E,ctx:O}),t.$set(F);const N={};E&8&&(N.$$scope={dirty:E,ctx:O}),o.$set(N);const L={};E&8&&(L.$$scope={dirty:E,ctx:O}),u.$set(L);const D={};E&8&&(D.$$scope={dirty:E,ctx:O}),a.$set(D);const M={};E&8&&(M.$$scope={dirty:E,ctx:O}),c.$set(M);const I={};E&9&&(I.$$scope={dirty:E,ctx:O}),g.$set(I);const P={};E&2&&(P.disabled=!O[1]),S.$set(P)},i(O){C||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(o.$$.fragment,O),m(u.$$.fragment,O),m(a.$$.fragment,O),m(c.$$.fragment,O),m(g.$$.fragment,O),m(S.$$.fragment,O),C=!0)},o(O){_(e.$$.fragment,O),_(t.$$.fragment,O),_(o.$$.fragment,O),_(u.$$.fragment,O),_(a.$$.fragment,O),_(c.$$.fragment,O),_(g.$$.fragment,O),_(S.$$.fragment,O),C=!1},d(O){O&&(p(n),p(l),p(i),p(s),p(f),p(d),p(y)),v(e,O),v(t,O),v(o,O),v(u,O),v(a,O),v(c,O),v(g,O),v(S,O)}}}function $$(r){let e,n;return e=new Me({props:{label:"Layers",open:!0,$$slots:{default:[c$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function p$(r,e,n){let t,l;me(r,Jn,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&Jn.set(!t)},[t,l,o]}class m$ extends q{constructor(e){super(),W(this,e,p$,$$,G,{})}}function _$(r,e,n){let{loadFile:t}=e;return mn(async()=>{let o=await(await fetch(`${Kt()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class g$ extends q{constructor(e){super(),W(this,e,_$,null,G,{loadFile:0})}}function hr(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=A("p"),n=w("Current milestone: "),l=w(t)},m(i,u){$(i,e,u),k(e,n),k(e,l)},p(i,u){var s;u&1&&t!==(t=((s=i[0].browse)==null?void 0:s.current_milestone)+"")&&R(l,t)},d(i){i&&p(e)}}}function d$(r){let e;return{c(){e=w("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function h$(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function b$(r){let e,n,t,l;return e=new rn({props:{$$slots:{default:[d$]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new rn({props:{$$slots:{default:[h$]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&32&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function v$(r){var N,L,D,M;let e,n,t=((N=r[0].browse)==null?void 0:N.authority_or_region)+"",l,o,i,u,s=((L=r[0].browse)==null?void 0:L.capital_scheme_id)+"",a,f,c,d,g=((D=r[0].browse)==null?void 0:D.funding_programme)+"",y,S,C,O,E,F=((M=r[0].browse)==null?void 0:M.current_milestone)&&hr(r);return O=new $l({props:{$$slots:{default:[b$]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=T(),i=A("p"),u=w("Capital scheme ID: "),a=w(s),f=T(),c=A("p"),d=w("Funding programme: "),y=w(g),S=T(),F&&F.c(),C=T(),h(O.$$.fragment)},m(I,P){$(I,e,P),k(e,n),k(e,l),$(I,o,P),$(I,i,P),k(i,u),k(i,a),$(I,f,P),$(I,c,P),k(c,d),k(c,y),$(I,S,P),F&&F.m(I,P),$(I,C,P),b(O,I,P),E=!0},p(I,P){var X,j,U,$e;(!E||P&1)&&t!==(t=((X=I[0].browse)==null?void 0:X.authority_or_region)+"")&&R(l,t),(!E||P&1)&&s!==(s=((j=I[0].browse)==null?void 0:j.capital_scheme_id)+"")&&R(a,s),(!E||P&1)&&g!==(g=((U=I[0].browse)==null?void 0:U.funding_programme)+"")&&R(y,g),($e=I[0].browse)!=null&&$e.current_milestone?F?F.p(I,P):(F=hr(I),F.c(),F.m(C.parentNode,C)):F&&(F.d(1),F=null);const H={};P&32&&(H.$$scope={dirty:P,ctx:I}),O.$set(H)},i(I){E||(m(O.$$.fragment,I),E=!0)},o(I){_(O.$$.fragment,I),E=!1},d(I){I&&(p(e),p(o),p(i),p(f),p(c),p(S),p(C)),F&&F.d(I),v(O,I)}}}function w$(r){var t;let e,n;return e=new Me({props:{label:`${r[0].scheme_reference}: ${(t=r[0].browse)==null?void 0:t.num_features} features`,$$slots:{default:[v$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(l,o){b(e,l,o),n=!0},p(l,[o]){var u;const i={};o&1&&(i.label=`${l[0].scheme_reference}: ${(u=l[0].browse)==null?void 0:u.num_features} features`),o&33&&(i.$$scope={dirty:o,ctx:l}),e.$set(i)},i(l){n||(m(e.$$.fragment,l),n=!0)},o(l){_(e.$$.fragment,l),n=!1},d(l){v(e,l)}}}function k$(r,e,n){let t,l;me(r,vt,s=>n(3,t=s)),me(r,pn,s=>n(4,l=s));let{scheme:o}=e;function i(){let s={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(ol(s),{padding:20,animate:!1})}function u(){var f,c;let s={type:"FeatureCollection",features:t.features.filter(d=>d.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(s)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=s=>{"scheme"in s&&n(0,o=s.scheme)},[o,i,u]}class y$ extends q{constructor(e){super(),W(this,e,k$,w$,G,{scheme:0})}}function br(r){let e,n,t=wn(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,i){$(o,e,i),k(e,n),k(e,l)},p(o,i){i&1&&t!==(t=wn(o[0].length_meters)+"")&&R(l,t)},d(o){o&&p(e)}}}function vr(r){let e,n=r[2](r[0].description)+"";return{c(){e=A("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[2](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function wr(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=A("p"),n=w("Current milestone: "),l=w(t)},m(i,u){$(i,e,u),k(e,n),k(e,l)},p(i,u){var s;u&2&&t!==(t=((s=i[1].browse)==null?void 0:s.current_milestone)+"")&&R(l,t)},d(i){i&&p(e)}}}function S$(r){var xe,Te,Le,Fe;let e,n,t,l=r[2](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,d,g,y,S,C=r[0].scheme_reference+"",O,E,F,N,L=((xe=r[1].browse)==null?void 0:xe.authority_or_region)+"",D,M,I,P,H=((Te=r[1].browse)==null?void 0:Te.capital_scheme_id)+"",X,j,U,$e,De=((Le=r[1].browse)==null?void 0:Le.funding_programme)+"",be,Je,pe=r[0].length_meters&&br(r),ce=r[0].description&&vr(r),re=((Fe=r[1].browse)==null?void 0:Fe.current_milestone)&&wr(r);return{c(){e=A("div"),n=A("h2"),t=new _n(!1),o=w(" ("),u=w(i),s=w(")"),a=T(),pe&&pe.c(),f=T(),ce&&ce.c(),c=T(),d=A("hr"),g=T(),y=A("p"),S=w("Part of scheme: "),O=w(C),E=T(),F=A("p"),N=w("Authority or region: "),D=w(L),M=T(),I=A("p"),P=w("Capital scheme ID: "),X=w(H),j=T(),U=A("p"),$e=w("Funding programme: "),be=w(De),Je=T(),re&&re.c(),t.a=o,Ce(e,"max-width","30vw")},m(oe,_e){$(oe,e,_e),k(e,n),t.m(l,n),k(n,o),k(n,u),k(n,s),k(e,a),pe&&pe.m(e,null),k(e,f),ce&&ce.m(e,null),k(e,c),k(e,d),k(e,g),k(e,y),k(y,S),k(y,O),k(e,E),k(e,F),k(F,N),k(F,D),k(e,M),k(e,I),k(I,P),k(I,X),k(e,j),k(e,U),k(U,$e),k(U,be),k(e,Je),re&&re.m(e,null)},p(oe,[_e]){var je,Ke,we,ye;_e&1&&l!==(l=oe[2](oe[0].name)+"")&&t.p(l),_e&1&&i!==(i=oe[0].intervention_type+"")&&R(u,i),oe[0].length_meters?pe?pe.p(oe,_e):(pe=br(oe),pe.c(),pe.m(e,f)):pe&&(pe.d(1),pe=null),oe[0].description?ce?ce.p(oe,_e):(ce=vr(oe),ce.c(),ce.m(e,c)):ce&&(ce.d(1),ce=null),_e&1&&C!==(C=oe[0].scheme_reference+"")&&R(O,C),_e&2&&L!==(L=((je=oe[1].browse)==null?void 0:je.authority_or_region)+"")&&R(D,L),_e&2&&H!==(H=((Ke=oe[1].browse)==null?void 0:Ke.capital_scheme_id)+"")&&R(X,H),_e&2&&De!==(De=((we=oe[1].browse)==null?void 0:we.funding_programme)+"")&&R(be,De),(ye=oe[1].browse)!=null&&ye.current_milestone?re?re.p(oe,_e):(re=wr(oe),re.c(),re.m(e,null)):re&&(re.d(1),re=null)},i:ee,o:ee,d(oe){oe&&p(e),pe&&pe.d(),ce&&ce.d(),re&&re.d()}}}function O$(r,e,n){let t,l,o;me(r,Gt,s=>n(4,l=s)),me(r,It,s=>n(3,o=s));let{props:i}=e;function u(s){return l?s.replace(new RegExp(l,"gi"),a=>`<mark>${a}</mark>`):s}return r.$$set=s=>{"props"in s&&n(0,i=s.props)},r.$$.update=()=>{r.$$.dirty&9&&n(1,t=o.get(i.scheme_reference))},[i,t,u,o]}class hn extends q{constructor(e){super(),W(this,e,O$,S$,G,{props:0})}}function C$(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function T$(r){let e,n;return e=new hn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function A$(r){let e,n,t,l;return e=new le({props:{popupClass:"border-popup",$$slots:{default:[C$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[T$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function L$(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function I$(r){let e,n;return e=new hn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function P$(r){let e,n,t,l;return e=new le({props:{popupClass:"border-popup",$$slots:{default:[L$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[I$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function M$(r){let e,n=r[6].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){$(l,e,o),k(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&R(t,n)},d(l){l&&p(e)}}}function E$(r){let e,n;return e=new hn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function N$(r){let e,n,t,l;return e=new le({props:{popupClass:"border-popup",$$slots:{default:[M$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new le({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[E$,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment)},m(o,i){b(e,o,i),$(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&192&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&192&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function D$(r){let e,n,t,l,o,i,u,s,a,f;const c=[B("interventions-points"),{filter:["all",kn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Wt,"circle-opacity":J(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let d={$$slots:{default:[A$]},$$scope:{ctx:r}};for(let L=0;L<c.length;L+=1)d=Z(d,c[L]);e=new nt({props:d});const g=[B("interventions-lines"),{filter:["all",yn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":wt,"line-opacity":J(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[P$]},$$scope:{ctx:r}};for(let L=0;L<g.length;L+=1)y=Z(y,g[L]);t=new de({props:y});const S=[B("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*wt,"circle-opacity":0,"circle-stroke-color":Ye.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let C={};for(let L=0;L<S.length;L+=1)C=Z(C,S[L]);o=new nt({props:C});const O=[B("interventions-polygons"),{filter:["all",Bt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":J(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let E={$$slots:{default:[N$]},$$scope:{ctx:r}};for(let L=0;L<O.length;L+=1)E=Z(E,O[L]);u=new Qe({props:E});const F=[B("interventions-polygons-outlines"),{filter:["all",Bt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*wt}},{layout:{visibility:r[0]?"visible":"none"}}];let N={};for(let L=0;L<F.length;L+=1)N=Z(N,F[L]);return a=new de({props:N}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),h(o.$$.fragment),i=T(),h(u.$$.fragment),s=T(),h(a.$$.fragment)},m(L,D){b(e,L,D),$(L,n,D),b(t,L,D),$(L,l,D),b(o,L,D),$(L,i,D),b(u,L,D),$(L,s,D),b(a,L,D),f=!0},p(L,D){const M=D&29?Y(c,[c[0],D&24&&{filter:["all",kn,L[3],L[4]]},c[2],c[3],D&4&&{paint:{"circle-color":L[2],"circle-radius":Wt,"circle-opacity":J(1,.5)}},D&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};D&128&&(M.$$scope={dirty:D,ctx:L}),e.$set(M);const I=D&13?Y(g,[g[0],D&8&&{filter:["all",yn,L[3]]},g[2],g[3],D&4&&{paint:{"line-color":L[2],"line-width":wt,"line-opacity":J(1,.5)}},D&1&&{layout:{visibility:L[0]?"visible":"none"}},g[6]]):{};D&128&&(I.$$scope={dirty:D,ctx:L}),t.$set(I);const P=D&1?Y(S,[S[0],S[1],S[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(P);const H=D&13?Y(O,[O[0],D&8&&{filter:["all",Bt,L[3]]},O[2],O[3],D&4&&{paint:{"fill-color":L[2],"fill-opacity":J(.2,.5)}},D&1&&{layout:{visibility:L[0]?"visible":"none"}},O[6]]):{};D&128&&(H.$$scope={dirty:D,ctx:L}),u.$set(H);const X=D&13?Y(F,[F[0],D&8&&{filter:["all",Bt,L[3]]},D&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*wt}},D&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(X)},i(L){f||(m(e.$$.fragment,L),m(t.$$.fragment,L),m(o.$$.fragment,L),m(u.$$.fragment,L),m(a.$$.fragment,L),f=!0)},o(L){_(e.$$.fragment,L),_(t.$$.fragment,L),_(o.$$.fragment,L),_(u.$$.fragment,L),_(a.$$.fragment,L),f=!1},d(L){L&&(p(n),p(l),p(i),p(s)),v(e,L),v(t,L),v(o,L),v(u,L),v(a,L)}}}function F$(r){let e,n;return e=new Dt({props:{data:r[1],$$slots:{default:[D$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function j$(r,e,n){let t,l;me(r,vt,a=>n(5,l=a));let{showSchemes:o}=e,i=Yr();const u=["!=",["get","hide_while_editing"],!0],s=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=sl(l))},[o,t,i,u,s,l]}class R$ extends q{constructor(e){super(),W(this,e,j$,F$,G,{showSchemes:0})}}function kr(r,e,n){const t=r.slice();return t[10]=e[n],t}function B$(r){let e,n;return e=new g$({props:{loadFile:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ee,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yr(r){let e,n,t,l;function o(s){r[7](s)}function i(s){r[8](s)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new ri({props:u}),K.push(()=>Q(e,"schemesToBeShown",o)),K.push(()=>Q(e,"show",i)),{c(){h(e.$$.fragment)},m(s,a){b(e,s,a),l=!0},p(s,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=s[1],x(()=>n=!1)),!t&&a&4&&(t=!0,f.show=s[2],x(()=>t=!1)),e.$set(f)},i(s){l||(m(e.$$.fragment,s),l=!0)},o(s){_(e.$$.fragment,s),l=!1},d(s){v(e,s)}}}function Sr(r){let e,n;return e=new y$({props:{scheme:r[10]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&32&&(o.scheme=t[10]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Or(r){let e=r[1].has(r[10].scheme_reference),n,t,l=e&&Sr(r);return{c(){l&&l.c(),n=Ae()},m(o,i){l&&l.m(o,i),$(o,n,i),t=!0},p(o,i){i&34&&(e=o[1].has(o[10].scheme_reference)),e?l?(l.p(o,i),i&34&&m(l,1)):(l=Sr(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(fe(),_(l,1,1,()=>{l=null}),ue())},i(o){t||(m(l),t=!0)},o(o){_(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function H$(r){let e,n,t,l,o,i,u,s,a,f,c=$n()=="Private (development)",d,g,y,S,C,O,E,F;o=new gl({props:{boundaryGeojson:r[3]}}),u=new Gl({}),a=new il({});let N=c&&B$(r);g=new ml({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[6]}}),S=new Er({props:{errorMessage:r[0]}});let L=r[5].size>0&&yr(r),D=qe(r[5].values()),M=[];for(let P=0;P<D.length;P+=1)M[P]=Or(kr(r,D,P));const I=P=>_(M[P],1,1,()=>{M[P]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=T(),h(o.$$.fragment),i=T(),h(u.$$.fragment),s=T(),h(a.$$.fragment),f=T(),N&&N.c(),d=T(),h(g.$$.fragment),y=T(),h(S.$$.fragment),C=T(),L&&L.c(),O=T(),E=A("ul");for(let P=0;P<M.length;P+=1)M[P].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),z(e,"slot","sidebar"),z(e,"class","govuk-prose")},m(P,H){$(P,e,H),k(e,n),k(n,t),k(n,l),b(o,n,null),k(e,i),b(u,e,null),k(e,s),b(a,e,null),k(e,f),N&&N.m(e,null),k(e,d),b(g,e,null),k(e,y),b(S,e,null),k(e,C),L&&L.m(e,null),k(e,O),k(e,E);for(let X=0;X<M.length;X+=1)M[X]&&M[X].m(E,null);F=!0},p(P,H){const X={};H&8&&(X.boundaryGeojson=P[3]),o.$set(X),c&&N.p(P,H);const j={};if(H&1&&(j.errorMessage=P[0]),S.$set(j),P[5].size>0?L?(L.p(P,H),H&32&&m(L,1)):(L=yr(P),L.c(),m(L,1),L.m(e,O)):L&&(fe(),_(L,1,1,()=>{L=null}),ue()),H&34){D=qe(P[5].values());let U;for(U=0;U<D.length;U+=1){const $e=kr(P,D,U);M[U]?(M[U].p($e,H),m(M[U],1)):(M[U]=Or($e),M[U].c(),m(M[U],1),M[U].m(E,null))}for(fe(),U=D.length;U<M.length;U+=1)I(U);ue()}},i(P){if(!F){m(o.$$.fragment,P),m(u.$$.fragment,P),m(a.$$.fragment,P),m(N),m(g.$$.fragment,P),m(S.$$.fragment,P),m(L);for(let H=0;H<D.length;H+=1)m(M[H]);F=!0}},o(P){_(o.$$.fragment,P),_(u.$$.fragment,P),_(a.$$.fragment,P),_(N),_(g.$$.fragment,P),_(S.$$.fragment,P),_(L),M=M.filter(Boolean);for(let H=0;H<M.length;H+=1)_(M[H]);F=!1},d(P){P&&p(e),v(o),v(u),v(a),N&&N.d(),v(g),v(S),L&&L.d(),Ot(M,P)}}}function U$(r){let e,n,t,l,o,i,u;return e=new pl({}),t=new R$({props:{showSchemes:r[2]}}),i=new m$({}),{c(){h(e.$$.fragment),n=T(),h(t.$$.fragment),l=T(),o=A("div"),h(i.$$.fragment),z(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),$(s,n,a),b(t,s,a),$(s,l,a),$(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&4&&(f.showSchemes=s[2]),t.$set(f)},i(s){u||(m(e.$$.fragment,s),m(t.$$.fragment,s),m(i.$$.fragment,s),u=!0)},o(s){_(e.$$.fragment,s),_(t.$$.fragment,s),_(i.$$.fragment,s),u=!1},d(s){s&&(p(n),p(l),p(o)),v(e,s),v(t,s),v(i)}}}function G$(r){let e,n,t;return n=new al({props:{style:r[4],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[U$]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),z(e,"slot","main")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.style=l[4]),o&8196&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function z$(r){let e,n;return e=new hl({props:{$$slots:{main:[G$],sidebar:[H$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&8255&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function q$(r,e,n){let t,l,o;me(r,vt,g=>n(3,t=g)),me(r,Sn,g=>n(4,l=g)),me(r,It,g=>n(5,o=g)),mn(()=>{fl()});const i=new URLSearchParams(window.location.search);Sn.set(i.get("style")||"dataviz");let u="",s=new Set,a=!0;function f(g){try{vt.set(JSON.parse(g)),It.set(qs(t)),n(0,u="")}catch(y){n(0,u=`The file you loaded is broken: ${y}`)}}function c(g){s=g,n(1,s)}function d(g){a=g,n(2,a)}return[u,s,a,t,l,o,f,c,d]}class W$ extends q{constructor(e){super(),W(this,e,q$,z$,G,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new W$({target:document.getElementById("app")});
