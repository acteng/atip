import{S as B,i as E,s as P,C as q,e as p,h as m,j as g,k as v,H as G,I as W,J as F,t as y,l as k,p as h,f as z,w as D,F as de,g as O,m as M,q as j,O as Q,aa as me,aJ as _e,aX as U,Q as pe,aI as ge,M as he,aY as be,v as X,u as R,x as ie,b as re,c as ve,o as ye,R as Y,P as I,aZ as K,W as N,X as A,A as J,ad as ce,a as ke,T as we,B as $e,$ as Ce,Z as Se,a5 as V,a4 as x,_ as Le,a9 as Oe,a8 as Me,a7 as ee,y as ue,n as fe,a_ as je,r as Be}from"./stores-ed173441.js";function Ee(a){let e,l,t;const n=a[3].default,s=q(n,a,a[2],null);return{c(){e=p("fieldset"),l=p("div"),s&&s.c(),m(l,"class",a[0]),m(l,"data-module","govuk-checkboxes"),m(e,"class","govuk-fieldset")},m(o,r){g(o,e,r),v(e,l),s&&s.m(l,null),t=!0},p(o,[r]){s&&s.p&&(!t||r&4)&&G(s,n,o,o[2],t?F(n,o[2],r,null):W(o[2]),null)},i(o){t||(y(s,o),t=!0)},o(o){k(s,o),t=!1},d(o){o&&h(e),s&&s.d(o)}}}function Pe(a,e,l){let{$$slots:t={},$$scope:n}=e,{small:s=!1}=e,o=s?"govuk-checkboxes--small":"govuk-checkboxes";return a.$$set=r=>{"small"in r&&l(1,s=r.small),"$$scope"in r&&l(2,n=r.$$scope)},[o,s,n,t]}class ft extends B{constructor(e){super(),E(this,e,Pe,Ee,P,{small:1})}}function Re(a){let e,l,t,n,s,o,r;const u=a[4].default,c=q(u,a,a[3],null);return{c(){e=p("div"),l=p("input"),t=z(),n=p("label"),c&&c.c(),m(l,"type","checkbox"),m(l,"class","govuk-checkboxes__input"),m(l,"id",a[1]),m(n,"class","govuk-label govuk-checkboxes__label"),m(n,"for",a[1]),m(n,"title",a[2]),m(e,"class","govuk-checkboxes__item")},m(i,f){g(i,e,f),v(e,l),l.checked=a[0],v(e,t),v(e,n),c&&c.m(n,null),s=!0,o||(r=D(l,"change",a[5]),o=!0)},p(i,[f]){(!s||f&2)&&m(l,"id",i[1]),f&1&&(l.checked=i[0]),c&&c.p&&(!s||f&8)&&G(c,u,i,i[3],s?F(u,i[3],f,null):W(i[3]),null),(!s||f&2)&&m(n,"for",i[1]),(!s||f&4)&&m(n,"title",i[2])},i(i){s||(y(c,i),s=!0)},o(i){k(c,i),s=!1},d(i){i&&h(e),c&&c.d(i),o=!1,r()}}}function ze(a,e,l){let{$$slots:t={},$$scope:n}=e,{id:s}=e,{checked:o}=e,{hint:r}=e;function u(){o=this.checked,l(0,o)}return a.$$set=c=>{"id"in c&&l(1,s=c.id),"checked"in c&&l(0,o=c.checked),"hint"in c&&l(2,r=c.hint),"$$scope"in c&&l(3,n=c.$$scope)},[o,s,r,n,t,u]}class dt extends B{constructor(e){super(),E(this,e,ze,Re,P,{id:1,checked:0,hint:2})}}function te(a,e,l){const t=a.slice();return t[8]=e[l][0],t[9]=e[l][1],t}function le(a){let e;return{c(){e=p("option"),e.__value="",X(e,e.__value)},m(l,t){g(l,e,t)},d(l){l&&h(e)}}}function ne(a){let e,l=a[9]+"",t,n;return{c(){e=p("option"),t=R(l),e.__value=n=a[8],X(e,e.__value)},m(s,o){g(s,e,o),v(e,t)},p(s,o){o&8&&l!==(l=s[9]+"")&&ie(t,l),o&8&&n!==(n=s[8])&&(e.__value=n,X(e,e.__value))},d(s){s&&h(e)}}}function Te(a){let e,l,t,n,s=a[4]&&le(),o=Q(a[3]),r=[];for(let u=0;u<o.length;u+=1)r[u]=ne(te(a,o,u));return{c(){e=p("select"),s&&s.c(),l=me();for(let u=0;u<r.length;u+=1)r[u].c();m(e,"class","govuk-select"),m(e,"id",a[2]),e.disabled=a[5],a[0]===void 0&&_e(()=>a[7].call(e))},m(u,c){g(u,e,c),s&&s.m(e,null),v(e,l);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);U(e,a[0],!0),t||(n=[D(e,"change",a[7]),D(e,"change",a[6])],t=!0)},p(u,c){if(u[4]?s||(s=le(),s.c(),s.m(e,l)):s&&(s.d(1),s=null),c&8){o=Q(u[3]);let i;for(i=0;i<o.length;i+=1){const f=te(u,o,i);r[i]?r[i].p(f,c):(r[i]=ne(f),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=o.length}c&4&&m(e,"id",u[2]),c&32&&(e.disabled=u[5]),c&9&&U(e,u[0])},d(u){u&&h(e),s&&s.d(),pe(r,u),t=!1,ge(n)}}}function Ze(a){let e,l;return e=new de({props:{label:a[1],id:a[2],$$slots:{default:[Te]},$$scope:{ctx:a}}}),{c(){O(e.$$.fragment)},m(t,n){M(e,t,n),l=!0},p(t,[n]){const s={};n&2&&(s.label=t[1]),n&4&&(s.id=t[2]),n&4157&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function qe(a,e,l){let{label:t}=e,{id:n}=e,{choices:s}=e,{emptyOption:o=!1}=e,{disabled:r=!1}=e,{value:u}=e;function c(f){he.call(this,a,f)}function i(){u=be(this),l(0,u),l(3,s)}return a.$$set=f=>{"label"in f&&l(1,t=f.label),"id"in f&&l(2,n=f.id),"choices"in f&&l(3,s=f.choices),"emptyOption"in f&&l(4,o=f.emptyOption),"disabled"in f&&l(5,r=f.disabled),"value"in f&&l(0,u=f.value)},[u,t,n,s,o,r,c,i]}class Ge extends B{constructor(e){super(),E(this,e,qe,Ze,P,{label:1,id:2,choices:3,emptyOption:4,disabled:5,value:0})}}function We(a){let e,l,t;function n(o){a[2](o)}let s={label:"Basemap",id:"basemap",choices:[["streets","Streets"],["hybrid","Satellite"]]};return a[0]!==void 0&&(s.value=a[0]),e=new Ge({props:s}),re.push(()=>ve(e,"value",n)),e.$on("change",a[1]),{c(){O(e.$$.fragment)},m(o,r){M(e,o,r),t=!0},p(o,[r]){const u={};!l&&r&1&&(l=!0,u.value=o[0],ye(()=>l=!1)),e.$set(u)},i(o){t||(y(e.$$.fragment,o),t=!0)},o(o){k(e.$$.fragment,o),t=!1},d(o){j(e,o)}}}function Fe(a,e,l){let{style:t}=e;function n(){let o=new URLSearchParams(window.location.search);o.set("style",t);let r=`${window.location.pathname}?${o.toString()}${window.location.hash}`;window.location.href=r}function s(o){t=o,l(0,t)}return a.$$set=o=>{"style"in o&&l(0,t=o.style)},[t,n,s]}class mt extends B{constructor(e){super(),E(this,e,Fe,We,P,{style:0})}}function Ie(a){let e,l,t,n,s,o,r;const u=a[3].default,c=q(u,a,a[2],null);return{c(){e=p("details"),l=p("summary"),t=p("span"),n=R(a[0]),s=z(),o=p("div"),c&&c.c(),m(t,"class","govuk-details__summary-text"),m(l,"class","govuk-details__summary"),m(o,"class","govuk-details__text"),e.open=a[1],m(e,"class","govuk-details"),m(e,"data-module","govuk-details")},m(i,f){g(i,e,f),v(e,l),v(l,t),v(t,n),v(e,s),v(e,o),c&&c.m(o,null),r=!0},p(i,[f]){(!r||f&1)&&ie(n,i[0]),c&&c.p&&(!r||f&4)&&G(c,u,i,i[2],r?F(u,i[2],f,null):W(i[2]),null),(!r||f&2)&&(e.open=i[1])},i(i){r||(y(c,i),r=!0)},o(i){k(c,i),r=!1},d(i){i&&h(e),c&&c.d(i)}}}function Je(a,e,l){let{$$slots:t={},$$scope:n}=e,{label:s}=e,{open:o=!1}=e;return a.$$set=r=>{"label"in r&&l(0,s=r.label),"open"in r&&l(1,o=r.open),"$$scope"in r&&l(2,n=r.$$scope)},[s,o,n,t]}class De extends B{constructor(e){super(),E(this,e,Je,Ie,P,{label:0,open:1})}}function Ne(a){let e;return{c(){e=p("span"),m(e,"class","svelte-kzgqtg"),Y(e,"background",a[0])},m(l,t){g(l,e,t)},p(l,[t]){t&1&&Y(e,"background",l[0])},i:I,o:I,d(l){l&&h(e)}}}function Ae(a,e,l){let{color:t}=e;return a.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class T extends B{constructor(e){super(),E(this,e,Ae,Ne,P,{color:0})}}const He=a=>({}),se=a=>({}),Xe=a=>({}),oe=a=>({});function Qe(a){let e,l,t,n,s,o,r,u,c,i,f;const w=a[3].sidebar,b=q(w,a,a[2],oe),$=a[3].main,C=q($,a,a[2],se);return{c(){e=p("div"),l=p("aside"),t=p("div"),b&&b.c(),n=z(),s=p("button"),s.textContent="â†’",r=z(),u=p("main"),C&&C.c(),m(t,"class","sidebar-content content-container svelte-ect12w"),m(s,"type","button"),m(s,"class","sidebar-toggle rounded-rect svelte-ect12w"),m(l,"class",o=K(a[0]?"":"collapsed")+" svelte-ect12w"),m(u,"class","svelte-ect12w"),m(e,"class","overall-layout svelte-ect12w")},m(_,d){g(_,e,d),v(e,l),v(l,t),b&&b.m(t,null),v(l,n),v(l,s),v(e,r),v(e,u),C&&C.m(u,null),c=!0,i||(f=D(s,"click",a[1]),i=!0)},p(_,[d]){b&&b.p&&(!c||d&4)&&G(b,w,_,_[2],c?F(w,_[2],d,Xe):W(_[2]),oe),(!c||d&1&&o!==(o=K(_[0]?"":"collapsed")+" svelte-ect12w"))&&m(l,"class",o),C&&C.p&&(!c||d&4)&&G(C,$,_,_[2],c?F($,_[2],d,He):W(_[2]),se)},i(_){c||(y(b,_),y(C,_),c=!0)},o(_){k(b,_),k(C,_),c=!1},d(_){_&&h(e),b&&b.d(_),C&&C.d(_),i=!1,f()}}}function Ue(a,e,l){let{$$slots:t={},$$scope:n}=e,s=!0;function o(){l(0,s=!s)}return a.$$set=r=>{"$$scope"in r&&l(2,n=r.$$scope)},[s,o,n,t]}class _t extends B{constructor(e){super(),E(this,e,Ue,Qe,P,{})}}function Ye(a,e,l){let t;N(a,A,c=>l(2,t=c));let{layers:n}=e,{contents:s}=e,o=new J.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});t.on("mousemove",r),t.on("mouseout",u),ce(()=>{t.off("mousemove",r),t.off("mouseout",u),o.remove()});function r(c){if(!n.every(f=>t.getLayer(f))){o.remove();return}let i=t.queryRenderedFeatures(c.point,{layers:n});i.length>0?o.setLngLat(c.lngLat).setHTML(s(i[0].properties)).addTo(t):o.remove()}function u(){o.remove()}return a.$$set=c=>{"layers"in c&&l(0,n=c.layers),"contents"in c&&l(1,s=c.contents)},[n,s]}class pt extends B{constructor(e){super(),E(this,e,Ye,null,P,{layers:0,contents:1})}}const Ke="/atip/poi_layers/assets/zoom_out_map-b2e1091a.svg";function Ve(a){let e,l;return{c(){e=p("img"),we(e.src,l=Ke)||m(e,"src",l),m(e,"alt","Zoom to show entire boundary")},m(t,n){g(t,e,n)},p:I,d(t){t&&h(e)}}}function xe(a){let e,l;return e=new ke({props:{title:"Zoom to show entire boundary",$$slots:{default:[Ve]},$$scope:{ctx:a}}}),e.$on("click",a[0]),{c(){O(e.$$.fragment)},m(t,n){M(e,t,n),l=!0},p(t,[n]){const s={};n&8&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(y(e.$$.fragment,t),l=!0)},o(t){k(e.$$.fragment,t),l=!1},d(t){j(e,t)}}}function et(a,e,l){let t;N(a,A,o=>l(2,t=o));let{boundaryGeojson:n}=e;function s(){t.fitBounds($e(n),{padding:20,animate:!0,duration:500})}return a.$$set=o=>{"boundaryGeojson"in o&&l(1,n=o.boundaryGeojson)},[s,n]}class gt extends B{constructor(e){super(),E(this,e,et,xe,P,{boundaryGeojson:1})}}const S={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black"},tt=10,H=10;let Z="interventions";function lt(a,e,l){let t,n;N(a,A,i=>l(1,t=i)),N(a,Ce,i=>l(2,n=i));let{schema:s}=e;Se(t,Z,n);const o=["match",["get","intervention_type"],"area",S.area,"route",S.route,"crossing",S.crossing,"other",S.other,"white"],r=["match",["get","reference_type",["get","planning"]],"preapp",S.preapp,"outline",S.outline,"reserved matters",S["reserved matters"],"local plan",S["local plan"],"white"],u=["!=","hide_while_editing",!0];return V(t,{id:"interventions-points",source:Z,filter:["all",Oe,u,["!=","endpoint",!0]],color:o,radius:tt}),x(t,{id:"interventions-lines",source:Z,filter:["all",Me,u],color:o,width:H}),V(t,{id:"interventions-lines-endpoints",source:Z,filter:["==","endpoint",!0],radius:.5*H,opacity:0,strokeColor:S.lineEndpointColor,strokeWidth:2}),Le(t,{id:"interventions-polygons",source:Z,filter:["all",ee,u],color:s=="planning"?r:o,opacity:.2}),x(t,{id:"interventions-polygon-outlines",source:Z,filter:["all",ee,u],color:s=="planning"?r:o,opacity:.5,width:.7*H}),a.$$set=i=>{"schema"in i&&l(0,s=i.schema)},a.$$.update=()=>{if(a.$$.dirty&6){let i=JSON.parse(JSON.stringify(n)),f=[];for(let w of i.features)if(w.geometry.type=="LineString"&&!w.properties.hide_while_editing)for(let b of[w.geometry.coordinates[0],w.geometry.coordinates[w.geometry.coordinates.length-1]])f.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:b}});i.features=i.features.concat(f),t.getSource(Z).setData(i)}},[s,t,n]}class ht extends B{constructor(e){super(),E(this,e,lt,null,P,{schema:0})}}function nt(a){let e,l,t,n,s,o,r,u,c,i,f,w,b,$,C,_;return l=new T({props:{color:S.area}}),o=new T({props:{color:S.route}}),i=new T({props:{color:S.crossing}}),$=new T({props:{color:S.other}}),{c(){e=p("li"),O(l.$$.fragment),t=R(`
          Areas`),n=z(),s=p("li"),O(o.$$.fragment),r=R(`
          Routes`),u=z(),c=p("li"),O(i.$$.fragment),f=R(`
          Crossings`),w=z(),b=p("li"),O($.$$.fragment),C=R(`
          Other`)},m(d,L){g(d,e,L),M(l,e,null),v(e,t),g(d,n,L),g(d,s,L),M(o,s,null),v(s,r),g(d,u,L),g(d,c,L),M(i,c,null),v(c,f),g(d,w,L),g(d,b,L),M($,b,null),v(b,C),_=!0},p:I,i(d){_||(y(l.$$.fragment,d),y(o.$$.fragment,d),y(i.$$.fragment,d),y($.$$.fragment,d),_=!0)},o(d){k(l.$$.fragment,d),k(o.$$.fragment,d),k(i.$$.fragment,d),k($.$$.fragment,d),_=!1},d(d){d&&(h(e),h(n),h(s),h(u),h(c),h(w),h(b)),j(l),j(o),j(i),j($)}}}function st(a){let e,l,t,n,s,o,r,u,c,i,f,w,b,$,C,_;return l=new T({props:{color:S.preapp}}),o=new T({props:{color:S.outline}}),i=new T({props:{color:S["reserved matters"]}}),$=new T({props:{color:S["local plan"]}}),{c(){e=p("li"),O(l.$$.fragment),t=R(`
          Preapp`),n=z(),s=p("li"),O(o.$$.fragment),r=R(`
          Outline`),u=z(),c=p("li"),O(i.$$.fragment),f=R(`
          Reserved matters`),w=z(),b=p("li"),O($.$$.fragment),C=R(`
          Local plan`)},m(d,L){g(d,e,L),M(l,e,null),v(e,t),g(d,n,L),g(d,s,L),M(o,s,null),v(s,r),g(d,u,L),g(d,c,L),M(i,c,null),v(c,f),g(d,w,L),g(d,b,L),M($,b,null),v(b,C),_=!0},p:I,i(d){_||(y(l.$$.fragment,d),y(o.$$.fragment,d),y(i.$$.fragment,d),y($.$$.fragment,d),_=!0)},o(d){k(l.$$.fragment,d),k(o.$$.fragment,d),k(i.$$.fragment,d),k($.$$.fragment,d),_=!1},d(d){d&&(h(e),h(n),h(s),h(u),h(c),h(w),h(b)),j(l),j(o),j(i),j($)}}}function ot(a){let e,l,t,n;const s=[st,nt],o=[];function r(u,c){return u[0]=="planning"?0:1}return l=r(a),t=o[l]=s[l](a),{c(){e=p("ul"),t.c()},m(u,c){g(u,e,c),o[l].m(e,null),n=!0},p(u,c){let i=l;l=r(u),l===i?o[l].p(u,c):(ue(),k(o[i],1,1,()=>{o[i]=null}),fe(),t=o[l],t?t.p(u,c):(t=o[l]=s[l](u),t.c()),y(t,1),t.m(e,null))},i(u){n||(y(t),n=!0)},o(u){k(t),n=!1},d(u){u&&h(e),o[l].d()}}}function at(a){let e,l,t;return l=new De({props:{label:"Objects",open:!0,$$slots:{default:[ot]},$$scope:{ctx:a}}}),{c(){e=p("div"),O(l.$$.fragment),m(e,"class","svelte-eycl9h")},m(n,s){g(n,e,s),M(l,e,null),t=!0},p(n,[s]){const o={};s&3&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(y(l.$$.fragment,n),t=!0)},o(n){k(l.$$.fragment,n),t=!1},d(n){n&&h(e),j(l)}}}function it(a,e,l){let{schema:t}=e;return a.$$set=n=>{"schema"in n&&l(0,t=n.schema)},[t]}class bt extends B{constructor(e){super(),E(this,e,it,at,P,{schema:0})}}function ae(a){let e;const l=a[4].default,t=q(l,a,a[3],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&G(t,l,n,n[3],e?F(l,n[3],s,null):W(n[3]),null)},i(n){e||(y(t,n),e=!0)},o(n){k(t,n),e=!1},d(n){t&&t.d(n)}}}function rt(a){let e,l,t=a[1]&&ae(a);return{c(){e=p("div"),t&&t.c(),m(e,"class","map svelte-12dpf1u")},m(n,s){g(n,e,s),t&&t.m(e,null),a[5](e),l=!0},p(n,[s]){n[1]?t?(t.p(n,s),s&2&&y(t,1)):(t=ae(n),t.c(),y(t,1),t.m(e,null)):t&&(ue(),k(t,1,1,()=>{t=null}),fe())},i(n){l||(y(t),l=!0)},o(n){k(t),l=!1},d(n){n&&h(e),t&&t.d(),a[5](null)}}}function ct(a,e,l){let{$$slots:t={},$$scope:n}=e,{style:s}=e,o,r,u=!1;je("setCamera",!window.location.hash),Be(()=>{o=new J.Map({container:r,style:`https://api.maptiler.com/maps/${s}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),o.addControl(new J.ScaleControl({})),o.addControl(new J.NavigationControl({visualizePitch:!0}),"bottom-right"),o.on("load",()=>{l(1,u=!0),A.set(o)}),new ResizeObserver(()=>{o.resize()}).observe(r)}),ce(()=>{o.remove()});function c(i){re[i?"unshift":"push"](()=>{r=i,l(0,r)})}return a.$$set=i=>{"style"in i&&l(2,s=i.style),"$$scope"in i&&l(3,n=i.$$scope)},[r,u,s,n,t,c]}class vt extends B{constructor(e){super(),E(this,e,ct,rt,P,{style:2})}}export{mt as B,De as C,ht as I,_t as L,pt as M,Ge as S,gt as Z,tt as a,ft as b,S as c,dt as d,vt as e,bt as f,T as g,H as l};
