import{S as B,i as j,s as E,F as re,g as D,m as F,t as C,l as O,q as I,P as Q,e as _,aa as ce,h as p,aJ as ue,j as b,k as m,aX as U,w as A,p as h,Q as fe,aI as de,N as _e,aY as me,v as H,u as L,x as ae,C as Z,f as M,D as z,G,H as W,aZ as Y,W as q,X as J,A as T,ad as oe,b as ie,c as pe,o as ge,$ as be,Z as he,a5 as K,a4 as V,_ as ve,a9 as ye,a8 as we,a7 as $,R as P,I as X,y as ke,n as Se,a_ as Ce,r as Le,a as Oe,T as Me,B as Be}from"./stores-15f891d8.js";function x(a,e,l){const t=a.slice();return t[8]=e[l][0],t[9]=e[l][1],t}function ee(a){let e;return{c(){e=_("option"),e.__value="",H(e,e.__value)},m(l,t){b(l,e,t)},d(l){l&&h(e)}}}function te(a){let e,l=a[9]+"",t,n;return{c(){e=_("option"),t=L(l),e.__value=n=a[8],H(e,e.__value)},m(s,o){b(s,e,o),m(e,t)},p(s,o){o&8&&l!==(l=s[9]+"")&&ae(t,l),o&8&&n!==(n=s[8])&&(e.__value=n,H(e,e.__value))},d(s){s&&h(e)}}}function je(a){let e,l,t,n,s=a[4]&&ee(),o=Q(a[3]),r=[];for(let u=0;u<o.length;u+=1)r[u]=te(x(a,o,u));return{c(){e=_("select"),s&&s.c(),l=ce();for(let u=0;u<r.length;u+=1)r[u].c();p(e,"class","govuk-select"),p(e,"id",a[2]),e.disabled=a[5],a[0]===void 0&&ue(()=>a[7].call(e))},m(u,c){b(u,e,c),s&&s.m(e,null),m(e,l);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);U(e,a[0],!0),t||(n=[A(e,"change",a[7]),A(e,"change",a[6])],t=!0)},p(u,c){if(u[4]?s||(s=ee(),s.c(),s.m(e,l)):s&&(s.d(1),s=null),c&8){o=Q(u[3]);let i;for(i=0;i<o.length;i+=1){const d=x(u,o,i);r[i]?r[i].p(d,c):(r[i]=te(d),r[i].c(),r[i].m(e,null))}for(;i<r.length;i+=1)r[i].d(1);r.length=o.length}c&4&&p(e,"id",u[2]),c&32&&(e.disabled=u[5]),c&9&&U(e,u[0])},d(u){u&&h(e),s&&s.d(),fe(r,u),t=!1,de(n)}}}function Ee(a){let e,l;return e=new re({props:{label:a[1],id:a[2],$$slots:{default:[je]},$$scope:{ctx:a}}}),{c(){D(e.$$.fragment)},m(t,n){F(e,t,n),l=!0},p(t,[n]){const s={};n&2&&(s.label=t[1]),n&4&&(s.id=t[2]),n&4157&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){O(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function Pe(a,e,l){let{label:t}=e,{id:n}=e,{choices:s}=e,{emptyOption:o=!1}=e,{disabled:r=!1}=e,{value:u}=e;function c(d){_e.call(this,a,d)}function i(){u=me(this),l(0,u),l(3,s)}return a.$$set=d=>{"label"in d&&l(1,t=d.label),"id"in d&&l(2,n=d.id),"choices"in d&&l(3,s=d.choices),"emptyOption"in d&&l(4,o=d.emptyOption),"disabled"in d&&l(5,r=d.disabled),"value"in d&&l(0,u=d.value)},[u,t,n,s,o,r,c,i]}class Re extends B{constructor(e){super(),j(this,e,Pe,Ee,E,{label:1,id:2,choices:3,emptyOption:4,disabled:5,value:0})}}function Te(a){let e,l,t,n,s,o,r;const u=a[3].default,c=Z(u,a,a[2],null);return{c(){e=_("details"),l=_("summary"),t=_("span"),n=L(a[0]),s=M(),o=_("div"),c&&c.c(),p(t,"class","govuk-details__summary-text"),p(l,"class","govuk-details__summary"),p(o,"class","govuk-details__text"),e.open=a[1],p(e,"class","govuk-details"),p(e,"data-module","govuk-details")},m(i,d){b(i,e,d),m(e,l),m(l,t),m(t,n),m(e,s),m(e,o),c&&c.m(o,null),r=!0},p(i,[d]){(!r||d&1)&&ae(n,i[0]),c&&c.p&&(!r||d&4)&&z(c,u,i,i[2],r?W(u,i[2],d,null):G(i[2]),null),(!r||d&2)&&(e.open=i[1])},i(i){r||(C(c,i),r=!0)},o(i){O(c,i),r=!1},d(i){i&&h(e),c&&c.d(i)}}}function Ze(a,e,l){let{$$slots:t={},$$scope:n}=e,{label:s}=e,{open:o=!1}=e;return a.$$set=r=>{"label"in r&&l(0,s=r.label),"open"in r&&l(1,o=r.open),"$$scope"in r&&l(2,n=r.$$scope)},[s,o,n,t]}class ze extends B{constructor(e){super(),j(this,e,Ze,Te,E,{label:0,open:1})}}const Ge=a=>({}),le=a=>({}),We=a=>({}),ne=a=>({});function qe(a){let e,l,t,n,s,o,r,u,c,i,d;const y=a[3].sidebar,g=Z(y,a,a[2],ne),S=a[3].main,w=Z(S,a,a[2],le);return{c(){e=_("div"),l=_("aside"),t=_("div"),g&&g.c(),n=M(),s=_("button"),s.textContent="â†’",r=M(),u=_("main"),w&&w.c(),p(t,"class","sidebar-content content-container svelte-ect12w"),p(s,"type","button"),p(s,"class","sidebar-toggle rounded-rect svelte-ect12w"),p(l,"class",o=Y(a[0]?"":"collapsed")+" svelte-ect12w"),p(u,"class","svelte-ect12w"),p(e,"class","overall-layout svelte-ect12w")},m(f,v){b(f,e,v),m(e,l),m(l,t),g&&g.m(t,null),m(l,n),m(l,s),m(e,r),m(e,u),w&&w.m(u,null),c=!0,i||(d=A(s,"click",a[1]),i=!0)},p(f,[v]){g&&g.p&&(!c||v&4)&&z(g,y,f,f[2],c?W(y,f[2],v,We):G(f[2]),ne),(!c||v&1&&o!==(o=Y(f[0]?"":"collapsed")+" svelte-ect12w"))&&p(l,"class",o),w&&w.p&&(!c||v&4)&&z(w,S,f,f[2],c?W(S,f[2],v,Ge):G(f[2]),le)},i(f){c||(C(g,f),C(w,f),c=!0)},o(f){O(g,f),O(w,f),c=!1},d(f){f&&h(e),g&&g.d(f),w&&w.d(f),i=!1,d()}}}function De(a,e,l){let{$$slots:t={},$$scope:n}=e,s=!0;function o(){l(0,s=!s)}return a.$$set=r=>{"$$scope"in r&&l(2,n=r.$$scope)},[s,o,n,t]}class nt extends B{constructor(e){super(),j(this,e,De,qe,E,{})}}function Fe(a,e,l){let t;q(a,J,c=>l(2,t=c));let{layers:n}=e,{contents:s}=e,o=new T.Popup({closeButton:!1,closeOnClick:!1,maxWidth:"none"});t.on("mousemove",r),t.on("mouseout",u),oe(()=>{t.off("mousemove",r),t.off("mouseout",u),o.remove()});function r(c){if(!n.every(d=>t.getLayer(d))){o.remove();return}let i=t.queryRenderedFeatures(c.point,{layers:n});i.length>0?o.setLngLat(c.lngLat).setHTML(s(i[0].properties)).addTo(t):o.remove()}function u(){o.remove()}return a.$$set=c=>{"layers"in c&&l(0,n=c.layers),"contents"in c&&l(1,s=c.contents)},[n,s]}class st extends B{constructor(e){super(),j(this,e,Fe,null,E,{layers:0,contents:1})}}function Ie(a){let e,l,t,n;function s(r){a[2](r)}let o={label:"Basemap",id:"basemap",choices:[["streets","Streets"],["hybrid","Satellite"]]};return a[0]!==void 0&&(o.value=a[0]),l=new Re({props:o}),ie.push(()=>pe(l,"value",s)),l.$on("change",a[1]),{c(){e=_("div"),D(l.$$.fragment),p(e,"class","svelte-1tbnm6i")},m(r,u){b(r,e,u),F(l,e,null),n=!0},p(r,[u]){const c={};!t&&u&1&&(t=!0,c.value=r[0],ge(()=>t=!1)),l.$set(c)},i(r){n||(C(l.$$.fragment,r),n=!0)},o(r){O(l.$$.fragment,r),n=!1},d(r){r&&h(e),I(l)}}}function Je(a,e,l){let{style:t}=e;function n(){let o=new URLSearchParams(window.location.search);o.set("style",t);let r=`${window.location.pathname}?${o.toString()}${window.location.hash}`;window.location.href=r}function s(o){t=o,l(0,t)}return a.$$set=o=>{"style"in o&&l(0,t=o.style)},[t,n,s]}class at extends B{constructor(e){super(),j(this,e,Je,Ie,E,{style:0})}}const k={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black"},Ne=10,N=10;let R="interventions";function Ae(a,e,l){let t,n;q(a,J,i=>l(1,t=i)),q(a,be,i=>l(2,n=i));let{schema:s}=e;he(t,R,n);const o=["match",["get","intervention_type"],"area",k.area,"route",k.route,"crossing",k.crossing,"other",k.other,"white"],r=["match",["get","reference_type",["get","planning"]],"preapp",k.preapp,"outline",k.outline,"reserved matters",k["reserved matters"],"local plan",k["local plan"],"white"],u=["!=","hide_while_editing",!0];return K(t,{id:"interventions-points",source:R,filter:["all",ye,u,["!=","endpoint",!0]],color:o,radius:Ne}),V(t,{id:"interventions-lines",source:R,filter:["all",we,u],color:o,width:N}),K(t,{id:"interventions-lines-endpoints",source:R,filter:["==","endpoint",!0],radius:.5*N,opacity:0,strokeColor:k.lineEndpointColor,strokeWidth:2}),ve(t,{id:"interventions-polygons",source:R,filter:["all",$,u],color:s=="planning"?r:o,opacity:.2}),V(t,{id:"interventions-polygon-outlines",source:R,filter:["all",$,u],color:s=="planning"?r:o,opacity:.5,width:.7*N}),a.$$set=i=>{"schema"in i&&l(0,s=i.schema)},a.$$.update=()=>{if(a.$$.dirty&6){let i=JSON.parse(JSON.stringify(n)),d=[];for(let y of i.features)if(y.geometry.type=="LineString"&&!y.properties.hide_while_editing)for(let g of[y.geometry.coordinates[0],y.geometry.coordinates[y.geometry.coordinates.length-1]])d.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:g}});i.features=i.features.concat(d),t.getSource(R).setData(i)}},[s,t,n]}class ot extends B{constructor(e){super(),j(this,e,Ae,null,E,{schema:0})}}function He(a){let e,l,t,n,s,o,r,u,c,i,d,y,g,S,w;return{c(){e=_("li"),l=_("span"),t=L(`
          Areas`),n=M(),s=_("li"),o=_("span"),r=L(`
          Routes`),u=M(),c=_("li"),i=_("span"),d=L(`
          Crossings`),y=M(),g=_("li"),S=_("span"),w=L(`
          Other`),p(l,"class","svelte-l42ea0"),P(l,"background",k.area),p(o,"class","svelte-l42ea0"),P(o,"background",k.route),p(i,"class","svelte-l42ea0"),P(i,"background",k.crossing),p(S,"class","svelte-l42ea0"),P(S,"background",k.other)},m(f,v){b(f,e,v),m(e,l),m(e,t),b(f,n,v),b(f,s,v),m(s,o),m(s,r),b(f,u,v),b(f,c,v),m(c,i),m(c,d),b(f,y,v),b(f,g,v),m(g,S),m(g,w)},p:X,d(f){f&&(h(e),h(n),h(s),h(u),h(c),h(y),h(g))}}}function Xe(a){let e,l,t,n,s,o,r,u,c,i,d,y,g,S,w;return{c(){e=_("li"),l=_("span"),t=L(`
          Preapp`),n=M(),s=_("li"),o=_("span"),r=L(`
          Outline`),u=M(),c=_("li"),i=_("span"),d=L(`
          Reserved matters`),y=M(),g=_("li"),S=_("span"),w=L(`
          Local plan`),p(l,"class","svelte-l42ea0"),P(l,"background",k.preapp),p(o,"class","svelte-l42ea0"),P(o,"background",k.outline),p(i,"class","svelte-l42ea0"),P(i,"background",k["reserved matters"]),p(S,"class","svelte-l42ea0"),P(S,"background",k["local plan"])},m(f,v){b(f,e,v),m(e,l),m(e,t),b(f,n,v),b(f,s,v),m(s,o),m(s,r),b(f,u,v),b(f,c,v),m(c,i),m(c,d),b(f,y,v),b(f,g,v),m(g,S),m(g,w)},p:X,d(f){f&&(h(e),h(n),h(s),h(u),h(c),h(y),h(g))}}}function Qe(a){let e;function l(s,o){return s[0]=="planning"?Xe:He}let t=l(a),n=t(a);return{c(){e=_("ul"),n.c()},m(s,o){b(s,e,o),n.m(e,null)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e,null)))},d(s){s&&h(e),n.d()}}}function Ue(a){let e,l,t;return l=new ze({props:{label:"Objects",open:!0,$$slots:{default:[Qe]},$$scope:{ctx:a}}}),{c(){e=_("div"),D(l.$$.fragment),p(e,"class","svelte-l42ea0")},m(n,s){b(n,e,s),F(l,e,null),t=!0},p(n,[s]){const o={};s&3&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(C(l.$$.fragment,n),t=!0)},o(n){O(l.$$.fragment,n),t=!1},d(n){n&&h(e),I(l)}}}function Ye(a,e,l){let{schema:t}=e;return a.$$set=n=>{"schema"in n&&l(0,t=n.schema)},[t]}class it extends B{constructor(e){super(),j(this,e,Ye,Ue,E,{schema:0})}}function se(a){let e;const l=a[4].default,t=Z(l,a,a[3],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&z(t,l,n,n[3],e?W(l,n[3],s,null):G(n[3]),null)},i(n){e||(C(t,n),e=!0)},o(n){O(t,n),e=!1},d(n){t&&t.d(n)}}}function Ke(a){let e,l,t=a[1]&&se(a);return{c(){e=_("div"),t&&t.c(),p(e,"class","map svelte-12dpf1u")},m(n,s){b(n,e,s),t&&t.m(e,null),a[5](e),l=!0},p(n,[s]){n[1]?t?(t.p(n,s),s&2&&C(t,1)):(t=se(n),t.c(),C(t,1),t.m(e,null)):t&&(ke(),O(t,1,1,()=>{t=null}),Se())},i(n){l||(C(t),l=!0)},o(n){O(t),l=!1},d(n){n&&h(e),t&&t.d(),a[5](null)}}}function Ve(a,e,l){let{$$slots:t={},$$scope:n}=e,{style:s}=e,o,r,u=!1;Ce("setCamera",!window.location.hash),Le(()=>{o=new T.Map({container:r,style:`https://api.maptiler.com/maps/${s}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),o.addControl(new T.ScaleControl({})),o.addControl(new T.NavigationControl({visualizePitch:!0}),"bottom-right"),o.on("load",()=>{l(1,u=!0),J.set(o)}),new ResizeObserver(()=>{o.resize()}).observe(r)}),oe(()=>{o.remove()});function c(i){ie[i?"unshift":"push"](()=>{r=i,l(0,r)})}return a.$$set=i=>{"style"in i&&l(2,s=i.style),"$$scope"in i&&l(3,n=i.$$scope)},[r,u,s,n,t,c]}class rt extends B{constructor(e){super(),j(this,e,Ve,Ke,E,{style:2})}}const $e="/atip/poi_layers/assets/zoom_out_map-b2e1091a.svg";function xe(a){let e,l;return{c(){e=_("img"),Me(e.src,l=$e)||p(e,"src",l),p(e,"alt","Zoom to show entire boundary")},m(t,n){b(t,e,n)},p:X,d(t){t&&h(e)}}}function et(a){let e,l;return e=new Oe({props:{title:"Zoom to show entire boundary",$$slots:{default:[xe]},$$scope:{ctx:a}}}),e.$on("click",a[0]),{c(){D(e.$$.fragment)},m(t,n){F(e,t,n),l=!0},p(t,[n]){const s={};n&8&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(C(e.$$.fragment,t),l=!0)},o(t){O(e.$$.fragment,t),l=!1},d(t){I(e,t)}}}function tt(a,e,l){let t;q(a,J,o=>l(2,t=o));let{boundaryGeojson:n}=e;function s(){t.fitBounds(Be(n),{padding:20,animate:!0,duration:500})}return a.$$set=o=>{"boundaryGeojson"in o&&l(1,n=o.boundaryGeojson)},[s,n]}class ct extends B{constructor(e){super(),j(this,e,tt,et,E,{boundaryGeojson:1})}}export{at as B,ze as C,ot as I,nt as L,st as M,Re as S,ct as Z,Ne as a,rt as b,k as c,it as d,N as l};
