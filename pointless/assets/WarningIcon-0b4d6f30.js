import{S as Q,i as J,s as X,Q as ye,e as P,b as c,c as p,o as R,T as be,U as ve,V as we,t as E,q as F,d as L,a as K,m as Ce,Z as N,_ as Oe,bh as Pn,X as Zt,$ as le,y as de,P as Me,W as Tn,j as Y,p as j,v as x,E as Cn,av as Je,a4 as Ge,bi as Sn,bj as yt,aw as zn,bk as En,Y as We,ag as Rn,aW as Bn,bl as In,bm as Fn,g as qe,h as Ye,u as je,w as Se,aX as bt,bn as _e,n as H,aT as Le,aU as ne,b5 as Xe,bo as An,z as ze,r as Ee,bp as Wt,a7 as qt,bq as On,b0 as Gn,b1 as Un,b3 as Ht,x as Zn,br as Wn,b7 as Nt,l as qn,aJ as vt,aK as Qe,aM as Hn,aP as wt,aR as Ae,aS as Vt,aO as Fe,b6 as Dt,a5 as Kt,bs as kt,bt as ft,aC as Nn,bu as Vn,a9 as pt,f as ct,aV as Dn,az as Lt,bv as Kn,R as Qn}from"./index-99995cf7.js";function Jn(n){let e,t,r;const i=n[3].default,l=ye(i,n,n[2],null);return{c(){e=P("fieldset"),t=P("div"),l&&l.c(),c(t,"class",n[0]),c(t,"data-module","govuk-checkboxes"),c(e,"class","govuk-fieldset")},m(o,s){p(o,e,s),R(e,t),l&&l.m(t,null),r=!0},p(o,[s]){l&&l.p&&(!r||s&4)&&be(l,i,o,o[2],r?we(i,o[2],s,null):ve(o[2]),null)},i(o){r||(E(l,o),r=!0)},o(o){F(l,o),r=!1},d(o){o&&L(e),l&&l.d(o)}}}function Xn(n,e,t){let{$$slots:r={},$$scope:i}=e,{small:l=!1}=e,o=l?"govuk-checkboxes--small":"govuk-checkboxes";return n.$$set=s=>{"small"in s&&t(1,l=s.small),"$$scope"in s&&t(2,i=s.$$scope)},[o,l,i,r]}class Yi extends Q{constructor(e){super(),J(this,e,Xn,Jn,X,{small:1})}}const Yn=n=>({}),Mt=n=>({});function jn(n){let e,t,r,i,l,o,s,a,f;const u=n[5].default,d=ye(u,n,n[4],null),h=n[5].right,g=ye(h,n,n[4],Mt);return{c(){e=P("div"),t=P("input"),r=K(),i=P("label"),d&&d.c(),l=K(),o=P("span"),g&&g.c(),c(t,"type","checkbox"),c(t,"class","govuk-checkboxes__input"),c(t,"id",n[3]),c(i,"class","govuk-label govuk-checkboxes__label"),c(i,"for",n[3]),c(i,"title",n[1]),Ce(o,"float","right"),c(e,"class","govuk-checkboxes__item"),c(e,"style",n[2])},m(y,C){p(y,e,C),R(e,t),t.checked=n[0],R(e,r),R(e,i),d&&d.m(i,null),R(e,l),R(e,o),g&&g.m(o,null),s=!0,a||(f=[N(t,"change",n[7]),N(t,"change",n[6])],a=!0)},p(y,[C]){C&1&&(t.checked=y[0]),d&&d.p&&(!s||C&16)&&be(d,u,y,y[4],s?we(u,y[4],C,null):ve(y[4]),null),(!s||C&2)&&c(i,"title",y[1]),g&&g.p&&(!s||C&16)&&be(g,h,y,y[4],s?we(h,y[4],C,Yn):ve(y[4]),Mt)},i(y){s||(E(d,y),E(g,y),s=!0)},o(y){F(d,y),F(g,y),s=!1},d(y){y&&L(e),d&&d.d(y),g&&g.d(y),a=!1,Oe(f)}}}function xn(n,e,t){let{$$slots:r={},$$scope:i}=e;const l=Pn(r);let{checked:o}=e,{hint:s=null}=e,f=l.right!==void 0?"float: none":"",u=Zt();function d(g){le.call(this,n,g)}function h(){o=this.checked,t(0,o)}return n.$$set=g=>{"checked"in g&&t(0,o=g.checked),"hint"in g&&t(1,s=g.hint),"$$scope"in g&&t(4,i=g.$$scope)},[o,s,f,u,i,r,d,h]}class ji extends Q{constructor(e){super(),J(this,e,xn,jn,X,{checked:0,hint:1})}}function $n(n){let e,t,r,i,l,o,s;const a=n[3].default,f=ye(a,n,n[2],null);return{c(){e=P("details"),t=P("summary"),r=P("span"),i=de(n[0]),l=K(),o=P("div"),f&&f.c(),c(r,"class","govuk-details__summary-text"),c(t,"class","govuk-details__summary"),c(o,"class","govuk-details__text"),e.open=n[1],c(e,"class","govuk-details"),c(e,"data-module","govuk-details")},m(u,d){p(u,e,d),R(e,t),R(t,r),R(r,i),R(e,l),R(e,o),f&&f.m(o,null),s=!0},p(u,[d]){(!s||d&1)&&Me(i,u[0]),f&&f.p&&(!s||d&4)&&be(f,a,u,u[2],s?we(a,u[2],d,null):ve(u[2]),null),(!s||d&2)&&(e.open=u[1])},i(u){s||(E(f,u),s=!0)},o(u){F(f,u),s=!1},d(u){u&&L(e),f&&f.d(u)}}}function er(n,e,t){let{$$slots:r={},$$scope:i}=e,{label:l}=e,{open:o=!1}=e;return n.$$set=s=>{"label"in s&&t(0,l=s.label),"open"in s&&t(1,o=s.open),"$$scope"in s&&t(2,i=s.$$scope)},[l,o,i,r]}class tr extends Q{constructor(e){super(),J(this,e,er,$n,X,{label:0,open:1})}}function Pt(n,e,t){const r=n.slice();return r[10]=e[t][0],r[11]=e[t][1],r}function Tt(n){let e,t;return{c(){e=P("div"),t=de(n[2]),c(e,"class","govuk-hint")},m(r,i){p(r,e,i),R(e,t)},p(r,i){i&4&&Me(t,r[2])},d(r){r&&L(e)}}}function Ct(n){let e;return{c(){e=P("option"),e.__value="",We(e,e.__value)},m(t,r){p(t,e,r)},d(t){t&&L(e)}}}function St(n){let e,t=n[11]+"",r,i;return{c(){e=P("option"),r=de(t),e.__value=i=n[10],We(e,e.__value)},m(l,o){p(l,e,o),R(e,r)},p(l,o){o&8&&t!==(t=l[11]+"")&&Me(r,t),o&8&&i!==(i=l[10])&&(e.__value=i,We(e,e.__value))},d(l){l&&L(e)}}}function nr(n){let e,t,r,i,l,o,s,a;e=new Cn({props:{errorMessage:n[6]}});let f=n[2]&&Tt(n),u=n[4]&&Ct(),d=Je(n[3]),h=[];for(let g=0;g<d.length;g+=1)h[g]=St(Pt(n,d,g));return{c(){Y(e.$$.fragment),t=K(),f&&f.c(),r=K(),i=P("select"),u&&u.c(),l=Ge();for(let g=0;g<h.length;g+=1)h[g].c();c(i,"class","govuk-select"),c(i,"id",n[7]),i.disabled=n[5],n[0]===void 0&&Sn(()=>n[9].call(i))},m(g,y){j(e,g,y),p(g,t,y),f&&f.m(g,y),p(g,r,y),p(g,i,y),u&&u.m(i,null),R(i,l);for(let C=0;C<h.length;C+=1)h[C]&&h[C].m(i,null);yt(i,n[0],!0),o=!0,s||(a=[N(i,"change",n[9]),N(i,"change",n[8])],s=!0)},p(g,y){const C={};if(y&64&&(C.errorMessage=g[6]),e.$set(C),g[2]?f?f.p(g,y):(f=Tt(g),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null),g[4]?u||(u=Ct(),u.c(),u.m(i,l)):u&&(u.d(1),u=null),y&8){d=Je(g[3]);let b;for(b=0;b<d.length;b+=1){const M=Pt(g,d,b);h[b]?h[b].p(M,y):(h[b]=St(M),h[b].c(),h[b].m(i,null))}for(;b<h.length;b+=1)h[b].d(1);h.length=d.length}(!o||y&32)&&(i.disabled=g[5]),y&9&&yt(i,g[0])},i(g){o||(E(e.$$.fragment,g),o=!0)},o(g){F(e.$$.fragment,g),o=!1},d(g){g&&(L(t),L(r),L(i)),x(e,g),f&&f.d(g),u&&u.d(),zn(h,g),s=!1,Oe(a)}}}function rr(n){let e,t;return e=new Tn({props:{label:n[1],id:n[7],$$slots:{default:[nr]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment)},m(r,i){j(e,r,i),t=!0},p(r,[i]){const l={};i&2&&(l.label=r[1]),i&16509&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){x(e,r)}}}function ir(n,e,t){let{label:r}=e,{hint:i=""}=e,{choices:l}=e,{emptyOption:o=!1}=e,{disabled:s=!1}=e,{errorMessage:a=""}=e,{value:f}=e,u=Zt();function d(g){le.call(this,n,g)}function h(){f=En(this),t(0,f),t(3,l)}return n.$$set=g=>{"label"in g&&t(1,r=g.label),"hint"in g&&t(2,i=g.hint),"choices"in g&&t(3,l=g.choices),"emptyOption"in g&&t(4,o=g.emptyOption),"disabled"in g&&t(5,s=g.disabled),"errorMessage"in g&&t(6,a=g.errorMessage),"value"in g&&t(0,f=g.value)},[f,r,i,l,o,s,a,u,d,h]}class lr extends Q{constructor(e){super(),J(this,e,ir,rr,X,{label:1,hint:2,choices:3,emptyOption:4,disabled:5,errorMessage:6,value:0})}}function xi(n,e){let t=new Set(n.getStyle().layers.filter(r=>r.type=="line").map(r=>r.id));if(e=="dataviz")return["Road network","Path"].filter(r=>t.has(r));if(e=="hybrid")return["Path","Road","Tunnel"].filter(r=>t.has(r));if(e=="streets"){let r=[];for(let i of["road","bridge","tunnel"])for(let l of["link","minor","minor_construction","motorway","motorway_construction","motorway_link","path_pedestrian","secondary_tertiary","secondary_tertiary_construction","service_track","service_track_construction","street","trunk_primary","trunk_primary_construction","trunk_primary_link"])r.push(`${i}_${l}`);return r.filter(i=>t.has(i))}return e=="uk-openzoomstack-light"?n.getStyle().layers.filter(r=>r["source-layer"]=="roads"&&r.type=="line").map(r=>r.id):[]}let T=n=>n,te=n=>n,or=n=>n,sr=n=>n,ar=n=>n,fr=n=>n,ur=n=>n,cr=[ur("raster-basemap"),T("parliamentary_constituencies"),T("parliamentary_constituencies-outline"),T("wards"),T("wards-outline"),T("combined_authorities"),T("combined_authorities-outline"),T("local_authority_districts"),T("local_authority_districts-outline"),T("local_planning_authorities"),T("local_planning_authorities-outline"),T("census_output_areas"),T("census_output_areas-outline"),T("imd"),T("imd-outline"),T("pollution"),T("road_noise"),T("mrn"),T("srn"),T("bus_routes"),T("trams"),T("national_cycle_network"),T("cycle_paths"),T("pct_commute"),T("pct_school"),T("road_widths"),T("road_speeds"),T("pavement_widths"),T("gradient"),T("gradient_arrows"),T("education"),T("hospitals"),T("sports_spaces"),T("railway_stations"),T("cycle_parking"),T("crossings"),T("vehicle_counts"),T("stats19"),T("bus_stops"),te("interventions-coverage-polygons-outlines"),te("interventions-polygons"),te("interventions-polygons-outlines"),te("hover-polygons"),T("atf-interventions-polygons"),T("lcwip-interventions-polygons"),T("atf-interventions-polygons-outlines"),T("lcwip-interventions-polygons-outlines"),te("hover-lines"),te("interventions-lines"),te("interventions-lines-endpoints"),T("atf-interventions-lines"),T("lcwip-interventions-lines"),T("atf-interventions-lines-endpoints"),T("lcwip-interventions-lines-endpoints"),te("hover-points"),te("interventions-points"),T("atf-interventions-points"),T("lcwip-interventions-points"),T("problems"),te("edit-polygon-fill"),te("edit-polygon-lines"),te("edit-polygon-vertices"),te("draw-split-route"),te("route-points"),te("route-lines"),te("route-polygons"),or("road_label"),fr(sr(ar("Road labels"))),te("boundary"),T("measurement-line"),te("georeferenced-image"),T("cover-interactive-layers")],dr=Rn(null);function mr(n,e){return{id:e,beforeId:gr(n,e)}}function gr(n,e){let t=Bn(dr);if(!t){console.warn(`getBeforeId(${e}) called before map is ready. Z-ordering may be incorrect.`);return}let r,i=!1;for(let l=n.layerZorder.length-1;l>=0;l--){let o=n.layerZorder[l];if(o==e){i=!0;break}t.getLayer(o)&&(r=o)}if(!i)throw new Error(`Layer ID ${e} not defined in layerZorder`);return r}const $i=["==",["geometry-type"],"Polygon"],el=["==",["geometry-type"],"LineString"],tl=["==",["geometry-type"],"Point"];function nl(){return{type:"FeatureCollection",features:[]}}function rl(n,e,t){let r=["match",n];for(let[i,l]of Object.entries(e))r.push(i),r.push(l);return r.push(t),r}function hr(n){return In(n)}function il(n){var t,r;let e={type:"FeatureCollection",features:[]};for(let i of n.features)if(e.features.push(i),i.geometry.type=="LineString"&&!((t=i.properties)!=null&&t.hide_while_editing))for(let l of[i.geometry.coordinates[0],i.geometry.coordinates[i.geometry.coordinates.length-1]])e.features.push({type:"Feature",properties:{endpoint:!0,scheme_reference:(r=i.properties)==null?void 0:r.scheme_reference},geometry:{type:"Point",coordinates:l}});return e}function ll(n,e,t){let r=["step",n];for(let i=1;i<e.length;i++)r.push(t[i-1]),r.push(e[i]);return r.push(t[t.length-1]),r}function ol(n){return n<1e3?Math.round(n)+" m":(n/1e3).toFixed(1)+"km"}function sl(n){return mr({layerZorder:cr},n)}function zt(n){let e;return{c(){e=P("p"),e.innerHTML=`Google <a href="https://cloud.google.com/maps-platform/terms/" target="_blank">Terms of Use</a>
    and
    <a href="https://www.google.com/policies/privacy/" target="_blank">Privacy Policy</a>`},m(t,r){p(t,e,r)},d(t){t&&L(e)}}}function _r(n){let e,t,r,i,l;function o(f){n[2](f)}let s={label:"Basemap",choices:Fn(),disabled:n[0]};n[1]!==void 0&&(s.value=n[1]),e=new lr({props:s}),qe.push(()=>Ye(e,"value",o));let a=n[1]=="google"&&zt();return{c(){Y(e.$$.fragment),r=K(),a&&a.c(),i=Ge()},m(f,u){j(e,f,u),p(f,r,u),a&&a.m(f,u),p(f,i,u),l=!0},p(f,[u]){const d={};u&1&&(d.disabled=f[0]),!t&&u&2&&(t=!0,d.value=f[1],je(()=>t=!1)),e.$set(d),f[1]=="google"?a||(a=zt(),a.c(),a.m(i.parentNode,i)):a&&(a.d(1),a=null)},i(f){l||(E(e.$$.fragment,f),l=!0)},o(f){F(e.$$.fragment,f),l=!1},d(f){f&&(L(r),L(i)),x(e,f),a&&a.d(f)}}}function yr(n,e,t){let r;Se(n,bt,o=>t(1,r=o));let{disabled:i=!1}=e;function l(o){r=o,bt.set(r)}return n.$$set=o=>{"disabled"in o&&t(0,i=o.disabled)},[i,r,l]}class al extends Q{constructor(e){super(),J(this,e,yr,_r,X,{disabled:0})}}function br(n){let e,t;return{c(){e=_e("svg"),t=_e("path"),c(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),c(e,"viewBox","0 0 14 14"),c(e,"width","13"),c(e,"height","13"),c(e,"class","svelte-en2qvf")},m(r,i){p(r,e,i),R(e,t)},p:H,i:H,o:H,d(r){r&&L(e)}}}class Qt extends Q{constructor(e){super(),J(this,e,null,br,X,{})}}function vr(n){let e,t;return{c(){e=_e("svg"),t=_e("path"),c(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),c(e,"viewBox","0 0 30 30"),c(e,"fill","none"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"class","svelte-d2loi5")},m(r,i){p(r,e,i),R(e,t)},p:H,i:H,o:H,d(r){r&&L(e)}}}class Jt extends Q{constructor(e){super(),J(this,e,null,vr,X,{})}}function wr(n){let e,t;return{c(){e=P("img"),ne(e.src,t=n[3]+"area.svg")||c(e,"src",t),c(e,"alt",n[6]),c(e,"class","svelte-ltkwvy")},m(r,i){p(r,e,i)},p(r,i){i&8&&!ne(e.src,t=r[3]+"area.svg")&&c(e,"src",t),i&64&&c(e,"alt",r[6])},d(r){r&&L(e)}}}function kr(n){let e,t;return{c(){e=P("img"),ne(e.src,t=n[3]+"reverse.svg")||c(e,"src",t),c(e,"alt",n[6]),c(e,"class","svelte-ltkwvy")},m(r,i){p(r,e,i)},p(r,i){i&8&&!ne(e.src,t=r[3]+"reverse.svg")&&c(e,"src",t),i&64&&c(e,"alt",r[6])},d(r){r&&L(e)}}}function pr(n){let e,t;return{c(){e=P("img"),ne(e.src,t=n[3]+"poi.svg")||c(e,"src",t),c(e,"alt",n[6]),c(e,"class","svelte-ltkwvy")},m(r,i){p(r,e,i)},p(r,i){i&8&&!ne(e.src,t=r[3]+"poi.svg")&&c(e,"src",t),i&64&&c(e,"alt",r[6])},d(r){r&&L(e)}}}function Lr(n){let e,t;return{c(){e=P("img"),ne(e.src,t=n[3]+"postal_code.svg")||c(e,"src",t),c(e,"alt",n[6]),c(e,"class","svelte-ltkwvy")},m(r,i){p(r,e,i)},p(r,i){i&8&&!ne(e.src,t=r[3]+"postal_code.svg")&&c(e,"src",t),i&64&&c(e,"alt",r[6])},d(r){r&&L(e)}}}function Mr(n){let e,t;return{c(){e=P("img"),ne(e.src,t=n[3]+"street.svg")||c(e,"src",t),c(e,"alt",n[6]),c(e,"class","svelte-ltkwvy")},m(r,i){p(r,e,i)},p(r,i){i&8&&!ne(e.src,t=r[3]+"street.svg")&&c(e,"src",t),i&64&&c(e,"alt",r[6])},d(r){r&&L(e)}}}function Pr(n){let e,t;return{c(){e=P("img"),ne(e.src,t=n[3]+"road.svg")||c(e,"src",t),c(e,"alt",n[6]),c(e,"class","svelte-ltkwvy")},m(r,i){p(r,e,i)},p(r,i){i&8&&!ne(e.src,t=r[3]+"road.svg")&&c(e,"src",t),i&64&&c(e,"alt",r[6])},d(r){r&&L(e)}}}function Tr(n){let e,t;return{c(){e=P("img"),ne(e.src,t=n[3]+"housenumber.svg")||c(e,"src",t),c(e,"alt",n[6]),c(e,"class","svelte-ltkwvy")},m(r,i){p(r,e,i)},p(r,i){i&8&&!ne(e.src,t=r[3]+"housenumber.svg")&&c(e,"src",t),i&64&&c(e,"alt",r[6])},d(r){r&&L(e)}}}function Cr(n){let e,t,r,i;return{c(){e=P("img"),ne(e.src,t=n[5])||c(e,"src",t),c(e,"alt",n[4]),c(e,"class","svelte-ltkwvy")},m(l,o){p(l,e,o),r||(i=N(e,"error",n[14]),r=!0)},p(l,o){o&32&&!ne(e.src,t=l[5])&&c(e,"src",t),o&16&&c(e,"alt",l[4])},d(l){l&&L(e),r=!1,i()}}}function Et(n){let e,t;return{c(){e=P("span"),t=de(n[6]),c(e,"class","secondary svelte-ltkwvy")},m(r,i){p(r,e,i),R(e,t)},p(r,i){i&64&&Me(t,r[6])},d(r){r&&L(e)}}}function Sr(n){var W,q;let e,t,r,i,l,o,s,a,f=(n[7]?n[0].place_name:n[0].place_name.replace(/,.*/,""))+"",u,d,h=n[2]==="always"||n[2]&&!n[0].address&&((W=n[0].properties)==null?void 0:W.kind)!=="road"&&((q=n[0].properties)==null?void 0:q.kind)!=="road_relation"&&!n[0].id.startsWith("address.")&&!n[0].id.startsWith("postal_code.")&&(!n[0].id.startsWith("poi.")||!n[5])&&!n[7],g,y,C=(n[7]?"":n[0].place_name.replace(/[^,]*,?\s*/,""))+"",b,M,U;function v(B,S){var oe,_;return S&1&&(t=null),S&1&&(r=null),S&1&&(i=null),B[5]?Cr:B[0].address?Tr:((oe=B[0].properties)==null?void 0:oe.kind)==="road"||((_=B[0].properties)==null?void 0:_.kind)==="road_relation"?Pr:(t==null&&(t=!!B[0].id.startsWith("address.")),t?Mr:(r==null&&(r=!!B[0].id.startsWith("postal_code.")),r?Lr:(i==null&&(i=!!B[0].id.startsWith("poi.")),i?pr:B[7]?kr:wr)))}let z=v(n,-1),w=z(n),Z=h&&Et(n);return{c(){e=P("li"),w.c(),l=K(),o=P("span"),s=P("span"),a=P("span"),u=de(f),d=K(),Z&&Z.c(),g=K(),y=P("span"),b=de(C),c(a,"class","primary svelte-ltkwvy"),c(s,"class","svelte-ltkwvy"),c(y,"class","line2 svelte-ltkwvy"),c(o,"class","texts svelte-ltkwvy"),c(e,"tabindex","0"),c(e,"data-selected",n[1]),c(e,"class","svelte-ltkwvy"),Le(e,"selected",n[1])},m(B,S){p(B,e,S),w.m(e,null),R(e,l),R(e,o),R(o,s),R(s,a),R(a,u),R(s,d),Z&&Z.m(s,null),R(o,g),R(o,y),R(y,b),M||(U=[N(e,"mouseenter",n[12]),N(e,"focus",n[13])],M=!0)},p(B,[S]){var oe,_;z===(z=v(B,S))&&w?w.p(B,S):(w.d(1),w=z(B),w&&(w.c(),w.m(e,l))),S&1&&f!==(f=(B[7]?B[0].place_name:B[0].place_name.replace(/,.*/,""))+"")&&Me(u,f),S&37&&(h=B[2]==="always"||B[2]&&!B[0].address&&((oe=B[0].properties)==null?void 0:oe.kind)!=="road"&&((_=B[0].properties)==null?void 0:_.kind)!=="road_relation"&&!B[0].id.startsWith("address.")&&!B[0].id.startsWith("postal_code.")&&(!B[0].id.startsWith("poi.")||!B[5])&&!B[7]),h?Z?Z.p(B,S):(Z=Et(B),Z.c(),Z.m(s,null)):Z&&(Z.d(1),Z=null),S&1&&C!==(C=(B[7]?"":B[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&Me(b,C),S&2&&c(e,"data-selected",B[1]),S&2&&Le(e,"selected",B[1])},i:H,o:H,d(B){B&&L(e),w.d(),Z&&Z.d(),M=!1,Oe(U)}}}function zr(n,e,t){var v;let r,i,{feature:l}=e,{selected:o=!1}=e,{showPlaceType:s}=e,{missingIconsCache:a}=e,{iconsBaseUrl:f}=e;const u=(v=l.properties)==null?void 0:v.categories;let d,h,g=0,y=l.place_type[0]==="reverse";function C(z){h&&a.add(h),t(10,g++,g)}function b(z){le.call(this,n,z)}function M(z){le.call(this,n,z)}const U=z=>C(z.currentTarget);return n.$$set=z=>{"feature"in z&&t(0,l=z.feature),"selected"in z&&t(1,o=z.selected),"showPlaceType"in z&&t(2,s=z.showPlaceType),"missingIconsCache"in z&&t(9,a=z.missingIconsCache),"iconsBaseUrl"in z&&t(3,f=z.iconsBaseUrl)},n.$$.update=()=>{var z,w,Z,W;if(n.$$.dirty&3640)do t(11,r--,r),t(4,d=u==null?void 0:u[r]),t(5,h=d?f+d.replace(/ /g,"_")+".svg":void 0);while(r>-1&&(!h||a.has(h)));n.$$.dirty&1&&t(6,i=l.id.startsWith("poi.")?(w=(z=l.properties)==null?void 0:z.categories)==null?void 0:w.join(", "):((W=(Z=l.properties)==null?void 0:Z.place_type_name)==null?void 0:W[0])??l.place_type[0])},t(11,r=(u==null?void 0:u.length)??0),[l,o,s,f,d,h,i,y,C,a,g,r,b,M,U]}class Er extends Q{constructor(e){super(),J(this,e,zr,Sr,X,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function Rr(n){let e;return{c(){e=P("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',c(e,"class","svelte-7cmwmc")},m(t,r){p(t,e,r)},p:H,i:H,o:H,d(t){t&&L(e)}}}class Br extends Q{constructor(e){super(),J(this,e,null,Rr,X,{})}}function Ir(n){let e,t;return{c(){e=_e("svg"),t=_e("path"),c(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),c(e,"viewBox","0 0 60.006 21.412"),c(e,"width","14"),c(e,"height","20"),c(e,"class","svelte-en2qvf")},m(r,i){p(r,e,i),R(e,t)},p:H,i:H,o:H,d(r){r&&L(e)}}}class Fr extends Q{constructor(e){super(),J(this,e,null,Ir,X,{})}}function Ar(n){let e,t,r;return{c(){e=_e("svg"),t=_e("circle"),r=_e("path"),c(t,"cx","4.789"),c(t,"cy","4.787"),c(t,"r","3.85"),Ce(t,"stroke-width","1.875"),Ce(t,"fill","none"),c(r,"d","M12.063 12.063 7.635 7.635"),Ce(r,"stroke-width","1.875"),Ce(r,"stroke-linecap","round"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"width","13"),c(e,"height","13"),c(e,"viewBox","0 0 13 13"),c(e,"class","svelte-1bpbt60")},m(i,l){p(i,e,l),R(e,t),R(e,r)},p:H,i:H,o:H,d(i){i&&L(e)}}}class Or extends Q{constructor(e){super(),J(this,e,null,Ar,X,{})}}function Gr(n,e,t){const r=e[1],i=e[0],l=r-i;return n===r&&t?n:((n-i)%l+l)%l+i}function Rt(n){const e=[...n];return e[2]<e[0]&&(e[2]+=360),e}let Ze;async function Ur(n,e,t){const r=n==null?void 0:n.getCenterAndZoom();for(const i of e??[])if(!(r&&(i.minZoom!=null&&i.minZoom>r[0]||i.maxZoom!=null&&i.maxZoom<r[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(Ze&&i.cachedLocationExpiry&&Ze.time+i.cachedLocationExpiry>Date.now()){if(!Ze.coords)break e;return Ze.coords}let l;try{return l=await new Promise((o,s)=>{t.signal.addEventListener("abort",()=>{s(Error("aborted"))}),navigator.geolocation.getCurrentPosition(a=>{o([a.coords.longitude,a.coords.latitude].map(f=>f.toFixed(6)).join(","))},a=>{s(a)},i)}),l}catch{}finally{i.cachedLocationExpiry&&(Ze={time:Date.now(),coords:l})}if(t.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(r&&i.type==="map-center")return r[1].toFixed(6)+","+r[2].toFixed(6)}}function Bt(n,e,t){const r=n.slice();return r[81]=e[t],r[83]=t,r}function It(n){let e,t;return e=new Br({}),{c(){Y(e.$$.fragment)},m(r,i){j(e,r,i),t=!0},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){x(e,r)}}}function Ft(n){let e,t,r,i,l;return t=new Fr({}),{c(){e=P("button"),Y(t.$$.fragment),c(e,"type","button"),c(e,"title",n[9]),c(e,"class","svelte-zh3kmv"),Le(e,"active",n[0])},m(o,s){p(o,e,s),j(t,e,null),r=!0,i||(l=N(e,"click",n[67]),i=!0)},p(o,s){(!r||s[0]&512)&&c(e,"title",o[9]),(!r||s[0]&1)&&Le(e,"active",o[0])},i(o){r||(E(t.$$.fragment,o),r=!0)},o(o){F(t.$$.fragment,o),r=!1},d(o){o&&L(e),x(t),i=!1,l()}}}function Zr(n){let e,t=[],r=new Map,i,l,o,s=Je(n[14]);const a=f=>f[81].id+(f[81].address?","+f[81].address:"");for(let f=0;f<s.length;f+=1){let u=Bt(n,s,f),d=a(u);r.set(d,t[f]=At(d,u))}return{c(){e=P("ul");for(let f=0;f<t.length;f+=1)t[f].c();c(e,"class","svelte-zh3kmv")},m(f,u){p(f,e,u);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);i=!0,l||(o=[N(e,"mouseleave",n[71]),N(e,"blur",n[72])],l=!0)},p(f,u){u[0]&17880064&&(s=Je(f[14]),ze(),t=Gn(t,u,a,1,f,s,r,e,Un,At,null,Bt),Ee())},i(f){if(!i){for(let u=0;u<s.length;u+=1)E(t[u]);i=!0}},o(f){for(let u=0;u<t.length;u+=1)F(t[u]);i=!1},d(f){f&&L(e);for(let u=0;u<t.length;u+=1)t[u].d();l=!1,Oe(o)}}}function Wr(n){let e,t,r,i,l,o;return t=new Jt({}),{c(){e=P("div"),Y(t.$$.fragment),r=K(),i=P("div"),l=de(n[7]),c(i,"class","svelte-zh3kmv"),c(e,"class","no-results svelte-zh3kmv")},m(s,a){p(s,e,a),j(t,e,null),R(e,r),R(e,i),R(i,l),o=!0},p(s,a){(!o||a[0]&128)&&Me(l,s[7])},i(s){o||(E(t.$$.fragment,s),o=!0)},o(s){F(t.$$.fragment,s),o=!1},d(s){s&&L(e),x(t)}}}function qr(n){let e="",t;return{c(){t=de(e)},m(r,i){p(r,t,i)},p:H,i:H,o:H,d(r){r&&L(t)}}}function Hr(n){let e,t,r,i,l,o,s,a,f,u,d;return t=new Jt({}),a=new Qt({}),{c(){e=P("div"),Y(t.$$.fragment),r=K(),i=P("div"),l=de(n[6]),o=K(),s=P("button"),Y(a.$$.fragment),c(i,"class","svelte-zh3kmv"),c(s,"class","svelte-zh3kmv"),c(e,"class","error svelte-zh3kmv")},m(h,g){p(h,e,g),j(t,e,null),R(e,r),R(e,i),R(i,l),R(e,o),R(e,s),j(a,s,null),f=!0,u||(d=N(s,"click",n[68]),u=!0)},p(h,g){(!f||g[0]&64)&&Me(l,h[6])},i(h){f||(E(t.$$.fragment,h),E(a.$$.fragment,h),f=!0)},o(h){F(t.$$.fragment,h),F(a.$$.fragment,h),f=!1},d(h){h&&L(e),x(t),x(a),u=!1,d()}}}function At(n,e){let t,r,i;function l(){return e[69](e[83])}function o(){return e[70](e[81])}return r=new Er({props:{feature:e[81],showPlaceType:e[10],selected:e[15]===e[83],missingIconsCache:e[20],iconsBaseUrl:e[12]}}),r.$on("mouseenter",l),r.$on("focus",o),{key:n,first:null,c(){t=Ge(),Y(r.$$.fragment),this.first=t},m(s,a){p(s,t,a),j(r,s,a),i=!0},p(s,a){e=s;const f={};a[0]&16384&&(f.feature=e[81]),a[0]&1024&&(f.showPlaceType=e[10]),a[0]&49152&&(f.selected=e[15]===e[83]),a[0]&4096&&(f.iconsBaseUrl=e[12]),r.$set(f)},i(s){i||(E(r.$$.fragment,s),i=!0)},o(s){F(r.$$.fragment,s),i=!1},d(s){s&&L(t),x(r,s)}}}function Nr(n){let e,t,r,i,l,o,s,a,f,u,d,h,g,y,C,b,M,U,v,z,w,Z=!1;l=new Or({}),d=new Qt({});let W=n[19]&&It(),q=n[5]===!0&&Ft(n);const B=n[59].default,S=ye(B,n,n[58],null),oe=[Hr,qr,Wr,Zr],_=[];function ke(I,V){var ie,k;return I[18]?0:I[16]?((ie=I[14])==null?void 0:ie.length)===0?2:I[16]&&((k=I[14])!=null&&k.length)?3:-1:1}return~(b=ke(n))&&(M=_[b]=oe[b](n)),{c(){e=K(),t=P("form"),r=P("div"),i=P("button"),Y(l.$$.fragment),o=K(),s=P("input"),a=K(),f=P("div"),u=P("button"),Y(d.$$.fragment),h=K(),W&&W.c(),g=K(),q&&q.c(),y=K(),S&&S.c(),C=K(),M&&M.c(),c(i,"class","search-button svelte-zh3kmv"),c(i,"type","button"),c(s,"placeholder",n[8]),c(s,"aria-label",n[8]),c(s,"class","svelte-zh3kmv"),c(u,"type","button"),c(u,"title",n[3]),c(u,"class","svelte-zh3kmv"),c(f,"class","clear-button-container svelte-zh3kmv"),Le(f,"displayable",n[1]!==""),c(r,"class","input-group svelte-zh3kmv"),c(t,"tabindex","0"),c(t,"class",U=Xe(n[2])+" svelte-zh3kmv"),Le(t,"can-collapse",n[4]&&n[1]==="")},m(I,V){p(I,e,V),p(I,t,V),R(t,r),R(r,i),j(l,i,null),R(r,o),R(r,s),n[61](s),We(s,n[1]),R(r,a),R(r,f),R(f,u),j(d,u,null),R(f,h),W&&W.m(f,null),R(r,g),q&&q.m(r,null),R(r,y),S&&S.m(r,null),R(t,C),~b&&_[b].m(t,null),v=!0,z||(w=[N(i,"click",n[60]),N(s,"input",n[62]),N(s,"focus",n[63]),N(s,"blur",n[64]),N(s,"keydown",n[22]),N(s,"input",n[65]),N(u,"click",n[66]),N(t,"submit",An(n[21]))],z=!0)},p(I,V){(!v||V[0]&256)&&c(s,"placeholder",I[8]),(!v||V[0]&256)&&c(s,"aria-label",I[8]),V[0]&2&&s.value!==I[1]&&We(s,I[1]),(!v||V[0]&8)&&c(u,"title",I[3]),I[19]?W?V[0]&524288&&E(W,1):(W=It(),W.c(),E(W,1),W.m(f,null)):W&&(ze(),F(W,1,1,()=>{W=null}),Ee()),(!v||V[0]&2)&&Le(f,"displayable",I[1]!==""),I[5]===!0?q?(q.p(I,V),V[0]&32&&E(q,1)):(q=Ft(I),q.c(),E(q,1),q.m(r,y)):q&&(ze(),F(q,1,1,()=>{q=null}),Ee()),S&&S.p&&(!v||V[1]&134217728)&&be(S,B,I,I[58],v?we(B,I[58],V,null):ve(I[58]),null);let ie=b;b=ke(I),b===ie?~b&&_[b].p(I,V):(M&&(ze(),F(_[ie],1,1,()=>{_[ie]=null}),Ee()),~b?(M=_[b],M?M.p(I,V):(M=_[b]=oe[b](I),M.c()),E(M,1),M.m(t,null)):M=null),(!v||V[0]&4&&U!==(U=Xe(I[2])+" svelte-zh3kmv"))&&c(t,"class",U),(!v||V[0]&22)&&Le(t,"can-collapse",I[4]&&I[1]==="")},i(I){v||(E(Z),E(l.$$.fragment,I),E(d.$$.fragment,I),E(W),E(q),E(S,I),E(M),v=!0)},o(I){F(Z),F(l.$$.fragment,I),F(d.$$.fragment,I),F(W),F(q),F(S,I),F(M),v=!1},d(I){I&&(L(e),L(t)),x(l),n[61](null),x(d),W&&W.d(),q&&q.d(),S&&S.d(I),~b&&_[b].d(),z=!1,Oe(w)}}}function Vr(n,e,t){let r,{$$slots:i={},$$scope:l}=e,{class:o=void 0}=e,{apiKey:s}=e,{bbox:a=void 0}=e,{clearButtonTitle:f="clear"}=e,{clearOnBlur:u=!1}=e,{collapsed:d=!1}=e,{country:h=void 0}=e,{debounceSearch:g=200}=e,{enableReverse:y=!1}=e,{errorMessage:C="Something went wrongâ€¦"}=e,{filter:b=()=>!0}=e,{flyTo:M=!0}=e,{fuzzyMatch:U=!0}=e,{language:v=void 0}=e,{limit:z=void 0}=e,{mapController:w=void 0}=e,{minLength:Z=2}=e,{noResultsMessage:W="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:q="Search"}=e,{proximity:B=[{type:"server-geolocation"}]}=e,{reverseActive:S=y==="always"}=e,{reverseButtonTitle:oe="toggle reverse geocoding"}=e,{searchValue:_=""}=e,{showFullGeometry:ke=!0}=e,{showPlaceType:I="ifNeeded"}=e,{showResultsWhileTyping:V=!0}=e,{selectFirst:ie=!0}=e,{flyToSelected:k=!1}=e,{markerOnSelected:ce=!0}=e,{types:se=void 0}=e,{excludeTypes:me=!1}=e,{zoom:Ue=16}=e,{maxZoom:Re=18}=e,{apiUrl:$e="https://api.maptiler.com/geocoding"}=e,{fetchParameters:et={}}=e,{iconsBaseUrl:mt="https://cdn.maptiler.com/maptiler-geocoding-control/v1.2.3/icons/"}=e,{adjustUrlQuery:tt=m=>{}}=e;function rn(){ge.focus()}function ln(){ge.blur()}function gt(m,ee=!0,ae=!1){t(1,_=m),ee?(t(15,D=-1),_t()):(lt(!ae,ae),setTimeout(()=>{ge.focus(),ge.select()}))}function on(){t(14,O=void 0),t(55,A=void 0),t(15,D=-1)}function sn(){t(54,$=[]),t(55,A=void 0)}let Be=!1,O,$,A,ht="",ge,D=-1,he,Ne=[],Te,Ie,Ve,nt;const an=new Set,pe=Wt();qt(()=>{w&&(w.setEventHandler(void 0),w.indicateReverse(!1),w.setSelectedMarker(-1),w.setMarkers(void 0,void 0))});function _t(m){if(Ie&&(clearTimeout(Ie),Ie=void 0),D>-1&&O)t(55,A=O[D]),t(1,_=A.place_type[0]==="reverse"?A.place_name:A.place_name.replace(/,.*/,"")),t(18,he=void 0),t(54,$=void 0),t(15,D=-1);else if(_){const ee=m||!rt(_);it(_,{exact:!0}).then(()=>{t(54,$=O),t(55,A=void 0),ee&&fn()}).catch(ae=>t(18,he=ae))}}function rt(m){try{return On(m,6)}catch{return!1}}async function it(m,{byId:ee=!1,exact:ae=!1}={}){t(18,he=void 0),Te==null||Te.abort();const fe=new AbortController;t(19,Te=fe);try{const G=rt(m),ue=new URLSearchParams;if(v!==void 0&&ue.set("language",Array.isArray(v)?v.join(","):v??""),se&&ue.set("types",se.join(",")),me&&ue.set("excludeTypes",String(me)),a&&ue.set("bbox",a.map(Ke=>Ke.toFixed(6)).join(",")),h&&ue.set("country",Array.isArray(h)?h.join(","):h),!ee&&!G){const Ke=await Ur(w,B,fe);Ke&&ue.set("proximity",Ke),(ae||!V)&&ue.set("autocomplete","false"),ue.set("fuzzyMatch",String(U))}z!==void 0&&(!G||(se==null?void 0:se.length)===1)&&ue.set("limit",String(z)),ue.set("key",s),tt(ue);const De=$e+"/"+encodeURIComponent(G?G.decimalLongitude+","+G.decimalLatitude:m)+".json?"+ue.toString();if(De===ht){ee?(t(14,O=void 0),t(55,A=Ne[0])):t(14,O=Ne);return}ht=De;const st=await fetch(De,{signal:fe.signal,...et});if(!st.ok)throw new Error(await st.text());const at=await st.json();pe("response",{url:De,featureCollection:at}),ee?(t(14,O=void 0),t(55,A=at.features[0]),Ne=[A]):(t(14,O=at.features.filter(b)),G&&O.unshift({type:"Feature",properties:{},id:"reverse_"+G.decimalLongitude+"_"+G.decimalLatitude,text:G.decimalLatitude+", "+G.decimalLongitude,place_name:G.decimalLatitude+", "+G.decimalLongitude,place_type:["reverse"],center:[G.decimalLongitude,G.decimalLatitude],bbox:[G.decimalLongitude,G.decimalLatitude,G.decimalLongitude,G.decimalLatitude],geometry:{type:"Point",coordinates:[G.decimalLongitude,G.decimalLatitude]}}),Ne=O,G&&ge.focus())}catch(G){if(G&&typeof G=="object"&&"name"in G&&G.name==="AbortError")return;throw G}finally{fe===Te&&t(19,Te=void 0)}}function fn(){var ae;if(!($!=null&&$.length)||!M)return;const m=[180,90,-180,-90],ee=!$.some(fe=>!fe.matching_text);for(const fe of $)if(ee||!fe.matching_text)for(const G of[0,1,2,3])m[G]=Math[G<2?"min":"max"](m[G],((ae=fe.bbox)==null?void 0:ae[G])??fe.center[G%2]);w&&$.length>0&&(A&&m[0]===m[2]&&m[1]===m[3]?w.flyTo(A.center,Ue):w.fitBounds(Rt(m),50,Re))}function un(m){t(0,S=y==="always"),t(14,O=void 0),t(55,A=void 0),t(15,D=-1),gt(m[1].toFixed(6)+", "+Gr(m[0],[-180,180],!0).toFixed(6),!1,!0)}function cn(m){if(!O)return;let ee=m.key==="ArrowDown"?1:m.key==="ArrowUp"?-1:0;ee&&(D===(ie?0:-1)&&ee===-1&&t(15,D=O.length),t(15,D+=ee),D>=O.length&&t(15,D=-1),D<0&&ie&&t(15,D=0),m.preventDefault())}function lt(m=!0,ee=!1){if(t(18,he=void 0),V||ee){if(Ie&&clearTimeout(Ie),_.length<Z)return;const ae=_;Ie=window.setTimeout(()=>{it(ae).catch(fe=>t(18,he=fe))},m?g:0)}else t(14,O=void 0),t(18,he=void 0)}function ot(m){t(55,A=m),t(1,_=m.place_name),t(15,D=-1)}const dn=()=>ge.focus();function mn(m){qe[m?"unshift":"push"](()=>{ge=m,t(17,ge)})}function gn(){_=this.value,t(1,_),t(13,Be),t(27,u)}const hn=()=>t(13,Be=!0),_n=()=>t(13,Be=!1),yn=()=>lt(),bn=()=>{t(1,_=""),ge.focus()},vn=()=>t(0,S=!S),wn=()=>t(18,he=void 0),kn=m=>t(15,D=m),pn=m=>ot(m),Ln=()=>{ie||t(15,D=-1)},Mn=()=>{};return n.$$set=m=>{"class"in m&&t(2,o=m.class),"apiKey"in m&&t(25,s=m.apiKey),"bbox"in m&&t(26,a=m.bbox),"clearButtonTitle"in m&&t(3,f=m.clearButtonTitle),"clearOnBlur"in m&&t(27,u=m.clearOnBlur),"collapsed"in m&&t(4,d=m.collapsed),"country"in m&&t(28,h=m.country),"debounceSearch"in m&&t(29,g=m.debounceSearch),"enableReverse"in m&&t(5,y=m.enableReverse),"errorMessage"in m&&t(6,C=m.errorMessage),"filter"in m&&t(30,b=m.filter),"flyTo"in m&&t(31,M=m.flyTo),"fuzzyMatch"in m&&t(32,U=m.fuzzyMatch),"language"in m&&t(33,v=m.language),"limit"in m&&t(34,z=m.limit),"mapController"in m&&t(35,w=m.mapController),"minLength"in m&&t(36,Z=m.minLength),"noResultsMessage"in m&&t(7,W=m.noResultsMessage),"placeholder"in m&&t(8,q=m.placeholder),"proximity"in m&&t(37,B=m.proximity),"reverseActive"in m&&t(0,S=m.reverseActive),"reverseButtonTitle"in m&&t(9,oe=m.reverseButtonTitle),"searchValue"in m&&t(1,_=m.searchValue),"showFullGeometry"in m&&t(38,ke=m.showFullGeometry),"showPlaceType"in m&&t(10,I=m.showPlaceType),"showResultsWhileTyping"in m&&t(39,V=m.showResultsWhileTyping),"selectFirst"in m&&t(11,ie=m.selectFirst),"flyToSelected"in m&&t(40,k=m.flyToSelected),"markerOnSelected"in m&&t(41,ce=m.markerOnSelected),"types"in m&&t(42,se=m.types),"excludeTypes"in m&&t(43,me=m.excludeTypes),"zoom"in m&&t(44,Ue=m.zoom),"maxZoom"in m&&t(45,Re=m.maxZoom),"apiUrl"in m&&t(46,$e=m.apiUrl),"fetchParameters"in m&&t(47,et=m.fetchParameters),"iconsBaseUrl"in m&&t(12,mt=m.iconsBaseUrl),"adjustUrlQuery"in m&&t(48,tt=m.adjustUrlQuery),"$$scope"in m&&t(58,l=m.$$scope)},n.$$.update=()=>{if(n.$$.dirty[0]&134225920&&setTimeout(()=>{t(16,Ve=Be),u&&!Be&&t(1,_="")}),n.$$.dirty[0]&16386|n.$$.dirty[1]&32&&_.length<Z&&(t(55,A=void 0),t(14,O=void 0),t(18,he=void 0),t(54,$=O)),n.$$.dirty[1]&16777344&&ke&&A&&!A.address&&A.geometry.type==="Point"&&A.place_type[0]!=="reverse"&&it(A.id,{byId:!0}).catch(m=>t(18,he=m)),n.$$.dirty[1]&50356241&&(w&&A&&A.id!==nt&&M&&(!A.bbox||A.bbox[0]===A.bbox[2]&&A.bbox[1]===A.bbox[3]?w.flyTo(A.center,A.id.startsWith("poi.")||A.id.startsWith("address.")?Re:Ue):w.fitBounds(Rt(A.bbox),50,Re),t(14,O=void 0),t(54,$=void 0),t(15,D=-1)),t(56,nt=A==null?void 0:A.id)),n.$$.dirty[0]&18432&&ie&&O!=null&&O.length&&t(15,D=0),n.$$.dirty[0]&2050&&(ie||t(15,D=-1)),n.$$.dirty[0]&16384|n.$$.dirty[1]&8388608&&$!==O&&t(54,$=void 0),n.$$.dirty[0]&81921|n.$$.dirty[1]&8388624&&w&&w.setEventHandler(m=>{switch(m.type){case"mapClick":S&&un(m.coordinates);break;case"markerClick":{const ee=O==null?void 0:O.find(ae=>ae.id===m.id);ee&&ot(ee)}break;case"markerMouseEnter":$&&t(15,D=Ve?(O==null?void 0:O.findIndex(ee=>ee.id===m.id))??-1:-1);break;case"markerMouseLeave":$&&t(15,D=-1);break}}),n.$$.dirty[0]&49152&&t(57,r=O==null?void 0:O[D]),n.$$.dirty[1]&67133969&&w&&r&&M&&k&&w.flyTo(r.center,r.id.startsWith("poi.")||r.id.startsWith("address.")?Re:Ue),n.$$.dirty[1]&1040&&(ce||w==null||w.setMarkers(void 0,void 0)),n.$$.dirty[1]&75498512&&w&&ce&&!$&&(w.setMarkers(r?[r]:void 0,void 0),w.setSelectedMarker(r?0:-1)),n.$$.dirty[1]&25165840&&w&&w.setMarkers($,A),n.$$.dirty[0]&32768|n.$$.dirty[1]&8388624&&$&&w&&w.setSelectedMarker(D),n.$$.dirty[0]&2|n.$$.dirty[1]&16&&w){const m=rt(_);w.setReverseMarker(m?[m.decimalLongitude,m.decimalLatitude]:void 0)}n.$$.dirty[1]&67108864&&pe("select",r),n.$$.dirty[1]&16777216&&pe("pick",A),n.$$.dirty[0]&81920&&pe("optionsVisibilityChange",Ve&&!!O),n.$$.dirty[0]&16384&&pe("featuresListed",O),n.$$.dirty[1]&8388608&&pe("featuresMarked",$),n.$$.dirty[0]&1&&pe("reverseToggle",S),n.$$.dirty[0]&2&&pe("queryChange",_),n.$$.dirty[0]&1|n.$$.dirty[1]&16&&w&&w.indicateReverse(S)},[S,_,o,f,d,y,C,W,q,oe,I,ie,mt,Be,O,D,Ve,ge,he,Te,an,_t,cn,lt,ot,s,a,u,h,g,b,M,U,v,z,w,Z,B,ke,V,k,ce,se,me,Ue,Re,$e,et,tt,rn,ln,gt,on,sn,$,A,nt,r,l,i,dn,mn,gn,hn,_n,yn,bn,vn,wn,kn,pn,Ln,Mn]}class Dr extends Q{constructor(e){super(),J(this,e,Vr,Nr,X,{class:2,apiKey:25,bbox:26,clearButtonTitle:3,clearOnBlur:27,collapsed:4,country:28,debounceSearch:29,enableReverse:5,errorMessage:6,filter:30,flyTo:31,fuzzyMatch:32,language:33,limit:34,mapController:35,minLength:36,noResultsMessage:7,placeholder:8,proximity:37,reverseActive:0,reverseButtonTitle:9,searchValue:1,showFullGeometry:38,showPlaceType:10,showResultsWhileTyping:39,selectFirst:11,flyToSelected:40,markerOnSelected:41,types:42,excludeTypes:43,zoom:44,maxZoom:45,apiUrl:46,fetchParameters:47,iconsBaseUrl:12,adjustUrlQuery:48,focus:49,blur:50,setQuery:51,clearList:52,clearMap:53},null,[-1,-1,-1])}get focus(){return this.$$.ctx[49]}get blur(){return this.$$.ctx[50]}get setQuery(){return this.$$.ctx[51]}get clearList(){return this.$$.ctx[52]}get clearMap(){return this.$$.ctx[53]}}function Ot(n){let e,t,r,i;return t=new Dr({props:{mapController:n[1],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){e=P("div"),Y(t.$$.fragment),c(e,"class",r=Xe(n[0])+" svelte-189syb7")},m(l,o){p(l,e,o),j(t,e,null),i=!0},p(l,o){const s={};o&2&&(s.mapController=l[1]),t.$set(s),(!i||o&1&&r!==(r=Xe(l[0])+" svelte-189syb7"))&&c(e,"class",r)},i(l){i||(E(t.$$.fragment,l),i=!0)},o(l){F(t.$$.fragment,l),i=!1},d(l){l&&L(e),x(t)}}}function Kr(n){let e,t,r=n[1]&&Ot(n);return{c(){r&&r.c(),e=Ge()},m(i,l){r&&r.m(i,l),p(i,e,l),t=!0},p(i,[l]){i[1]?r?(r.p(i,l),l&2&&E(r,1)):(r=Ot(i),r.c(),E(r,1),r.m(e.parentNode,e)):r&&(ze(),F(r,1,1,()=>{r=null}),Ee())},i(i){t||(E(r),t=!0)},o(i){F(r),t=!1},d(i){i&&L(e),r&&r.d(i)}}}function Qr(n,e,t){let r;Se(n,Ht,o=>t(2,r=o));let{position:i="top-left"}=e,l;return Zn(()=>{t(1,l=Wn(r,Nt))}),n.$$set=o=>{"position"in o&&t(0,i=o.position)},[i,l]}class fl extends Q{constructor(e){super(),J(this,e,Qr,Kr,X,{position:0})}}function Jr(n){let e,t,r;return{c(){e=P("div"),e.innerHTML=`<img src="${qn}" alt="Active Travel England logo" class="svelte-19t777m"/>`,t=K(),r=P("div"),c(e,"class","black-bar svelte-19t777m"),c(r,"class","green-bar svelte-19t777m")},m(i,l){p(i,e,l),p(i,t,l),p(i,r,l)},p:H,i:H,o:H,d(i){i&&(L(e),L(t),L(r))}}}class ul extends Q{constructor(e){super(),J(this,e,null,Jr,X,{})}}var Xr=Object.defineProperty,Pe=(n,e)=>Xr(n,"name",{value:e,configurable:!0});function ut(n){if(!n)throw new Error("coord is required");if(!Array.isArray(n)){if(n.type==="Feature"&&n.geometry!==null&&n.geometry.type==="Point")return[...n.geometry.coordinates];if(n.type==="Point")return[...n.coordinates]}if(Array.isArray(n)&&n.length>=2&&!Array.isArray(n[0])&&!Array.isArray(n[1]))return[...n];throw new Error("coord must be GeoJSON Point or an Array of numbers")}Pe(ut,"getCoord");function Yr(n){if(Array.isArray(n))return n;if(n.type==="Feature"){if(n.geometry!==null)return n.geometry.coordinates}else if(n.coordinates)return n.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}Pe(Yr,"getCoords");function Xt(n){if(n.length>1&&vt(n[0])&&vt(n[1]))return!0;if(Array.isArray(n[0])&&n[0].length)return Xt(n[0]);throw new Error("coordinates must only contain numbers")}Pe(Xt,"containsNumber");function jr(n,e,t){if(!e||!t)throw new Error("type and name required");if(!n||n.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.type)}Pe(jr,"geojsonType");function xr(n,e,t){if(!n)throw new Error("No feature passed");if(!t)throw new Error(".featureOf() requires a name");if(!n||n.type!=="Feature"||!n.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!n.geometry||n.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+n.geometry.type)}Pe(xr,"featureOf");function $r(n,e,t){if(!n)throw new Error("No featureCollection passed");if(!t)throw new Error(".collectionOf() requires a name");if(!n||n.type!=="FeatureCollection")throw new Error("Invalid input to "+t+", FeatureCollection required");for(const r of n.features){if(!r||r.type!=="Feature"||!r.geometry)throw new Error("Invalid input to "+t+", Feature with geometry required");if(!r.geometry||r.geometry.type!==e)throw new Error("Invalid input to "+t+": must be a "+e+", given "+r.geometry.type)}}Pe($r,"collectionOf");function ei(n){return n.type==="Feature"?n.geometry:n}Pe(ei,"getGeom");function ti(n,e){return n.type==="FeatureCollection"?"FeatureCollection":n.type==="GeometryCollection"?"GeometryCollection":n.type==="Feature"&&n.geometry!==null?n.geometry.type:n.type}Pe(ti,"getType");var ni=Object.defineProperty,ri=(n,e)=>ni(n,"name",{value:e,configurable:!0});function Yt(n,e,t={}){var r=ut(n),i=ut(e),l=Qe(i[1]-r[1]),o=Qe(i[0]-r[0]),s=Qe(r[1]),a=Qe(i[1]),f=Math.pow(Math.sin(l/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(s)*Math.cos(a);return Hn(2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),t.units)}ri(Yt,"distance");var ii=Object.defineProperty,re=(n,e)=>ii(n,"name",{value:e,configurable:!0});function He(n,e,t){if(n!==null)for(var r,i,l,o,s,a,f,u=0,d=0,h,g=n.type,y=g==="FeatureCollection",C=g==="Feature",b=y?n.features.length:1,M=0;M<b;M++){f=y?n.features[M].geometry:C?n.geometry:n,h=f?f.type==="GeometryCollection":!1,s=h?f.geometries.length:1;for(var U=0;U<s;U++){var v=0,z=0;if(o=h?f.geometries[U]:f,o!==null){a=o.coordinates;var w=o.type;switch(u=t&&(w==="Polygon"||w==="MultiPolygon")?1:0,w){case null:break;case"Point":if(e(a,d,M,v,z)===!1)return!1;d++,v++;break;case"LineString":case"MultiPoint":for(r=0;r<a.length;r++){if(e(a[r],d,M,v,z)===!1)return!1;d++,w==="MultiPoint"&&v++}w==="LineString"&&v++;break;case"Polygon":case"MultiLineString":for(r=0;r<a.length;r++){for(i=0;i<a[r].length-u;i++){if(e(a[r][i],d,M,v,z)===!1)return!1;d++}w==="MultiLineString"&&v++,w==="Polygon"&&z++}w==="Polygon"&&v++;break;case"MultiPolygon":for(r=0;r<a.length;r++){for(z=0,i=0;i<a[r].length;i++){for(l=0;l<a[r][i].length-u;l++){if(e(a[r][i][l],d,M,v,z)===!1)return!1;d++}z++}v++}break;case"GeometryCollection":for(r=0;r<o.geometries.length;r++)if(He(o.geometries[r],e,t)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}re(He,"coordEach");function li(n,e,t,r){var i=t;return He(n,function(l,o,s,a,f){o===0&&t===void 0?i=l:i=e(i,l,o,s,a,f)},r),i}re(li,"coordReduce");function jt(n,e){var t;switch(n.type){case"FeatureCollection":for(t=0;t<n.features.length&&e(n.features[t].properties,t)!==!1;t++);break;case"Feature":e(n.properties,0);break}}re(jt,"propEach");function oi(n,e,t){var r=t;return jt(n,function(i,l){l===0&&t===void 0?r=i:r=e(r,i,l)}),r}re(oi,"propReduce");function xt(n,e){if(n.type==="Feature")e(n,0);else if(n.type==="FeatureCollection")for(var t=0;t<n.features.length&&e(n.features[t],t)!==!1;t++);}re(xt,"featureEach");function si(n,e,t){var r=t;return xt(n,function(i,l){l===0&&t===void 0?r=i:r=e(r,i,l)}),r}re(si,"featureReduce");function ai(n){var e=[];return He(n,function(t){e.push(t)}),e}re(ai,"coordAll");function dt(n,e){var t,r,i,l,o,s,a,f,u,d,h=0,g=n.type==="FeatureCollection",y=n.type==="Feature",C=g?n.features.length:1;for(t=0;t<C;t++){for(s=g?n.features[t].geometry:y?n.geometry:n,f=g?n.features[t].properties:y?n.properties:{},u=g?n.features[t].bbox:y?n.bbox:void 0,d=g?n.features[t].id:y?n.id:void 0,a=s?s.type==="GeometryCollection":!1,o=a?s.geometries.length:1,i=0;i<o;i++){if(l=a?s.geometries[i]:s,l===null){if(e(null,h,f,u,d)===!1)return!1;continue}switch(l.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(l,h,f,u,d)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<l.geometries.length;r++)if(e(l.geometries[r],h,f,u,d)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}h++}}re(dt,"geomEach");function fi(n,e,t){var r=t;return dt(n,function(i,l,o,s,a){l===0&&t===void 0?r=i:r=e(r,i,l,o,s,a)}),r}re(fi,"geomReduce");function xe(n,e){dt(n,function(t,r,i,l,o){var s=t===null?null:t.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return e(wt(t,i,{bbox:l,id:o}),r,0)===!1?!1:void 0}var a;switch(s){case"MultiPoint":a="Point";break;case"MultiLineString":a="LineString";break;case"MultiPolygon":a="Polygon";break}for(var f=0;f<t.coordinates.length;f++){var u=t.coordinates[f],d={type:a,coordinates:u};if(e(wt(d,i),r,f)===!1)return!1}})}re(xe,"flattenEach");function ui(n,e,t){var r=t;return xe(n,function(i,l,o){l===0&&o===0&&t===void 0?r=i:r=e(r,i,l,o)}),r}re(ui,"flattenReduce");function $t(n,e){xe(n,function(t,r,i){var l=0;if(t.geometry){var o=t.geometry.type;if(!(o==="Point"||o==="MultiPoint")){var s,a=0,f=0,u=0;if(He(t,function(d,h,g,y,C){if(s===void 0||r>a||y>f||C>u){s=d,a=r,f=y,u=C,l=0;return}var b=Ae([s,d],t.properties);if(e(b,r,i,C,l)===!1)return!1;l++,s=d})===!1)return!1}}})}re($t,"segmentEach");function en(n,e,t){var r=t,i=!1;return $t(n,function(l,o,s,a,f){i===!1&&t===void 0?r=l:r=e(r,l,o,s,a,f),i=!0}),r}re(en,"segmentReduce");function tn(n,e){if(!n)throw new Error("geojson is required");xe(n,function(t,r,i){if(t.geometry!==null){var l=t.geometry.type,o=t.geometry.coordinates;switch(l){case"LineString":if(e(t,r,i,0,0)===!1)return!1;break;case"Polygon":for(var s=0;s<o.length;s++)if(e(Ae(o[s],t.properties),r,i,s)===!1)return!1;break}}})}re(tn,"lineEach");function ci(n,e,t){var r=t;return tn(n,function(i,l,o,s){l===0&&t===void 0?r=i:r=e(r,i,l,o,s)}),r}re(ci,"lineReduce");function di(n,e){if(e=e||{},!Vt(e))throw new Error("options is invalid");var t=e.featureIndex||0,r=e.multiFeatureIndex||0,i=e.geometryIndex||0,l=e.segmentIndex||0,o=e.properties,s;switch(n.type){case"FeatureCollection":t<0&&(t=n.features.length+t),o=o||n.features[t].properties,s=n.features[t].geometry;break;case"Feature":o=o||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var a=s.coordinates;switch(s.type){case"Point":case"MultiPoint":return null;case"LineString":return l<0&&(l=a.length+l-1),Ae([a[l],a[l+1]],o,e);case"Polygon":return i<0&&(i=a.length+i),l<0&&(l=a[i].length+l-1),Ae([a[i][l],a[i][l+1]],o,e);case"MultiLineString":return r<0&&(r=a.length+r),l<0&&(l=a[r].length+l-1),Ae([a[r][l],a[r][l+1]],o,e);case"MultiPolygon":return r<0&&(r=a.length+r),i<0&&(i=a[r].length+i),l<0&&(l=a[r][i].length-l-1),Ae([a[r][i][l],a[r][i][l+1]],o,e)}throw new Error("geojson is invalid")}re(di,"findSegment");function mi(n,e){if(e=e||{},!Vt(e))throw new Error("options is invalid");var t=e.featureIndex||0,r=e.multiFeatureIndex||0,i=e.geometryIndex||0,l=e.coordIndex||0,o=e.properties,s;switch(n.type){case"FeatureCollection":t<0&&(t=n.features.length+t),o=o||n.features[t].properties,s=n.features[t].geometry;break;case"Feature":o=o||n.properties,s=n.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":s=n;break;default:throw new Error("geojson is invalid")}if(s===null)return null;var a=s.coordinates;switch(s.type){case"Point":return Fe(a,o,e);case"MultiPoint":return r<0&&(r=a.length+r),Fe(a[r],o,e);case"LineString":return l<0&&(l=a.length+l),Fe(a[l],o,e);case"Polygon":return i<0&&(i=a.length+i),l<0&&(l=a[i].length+l),Fe(a[i][l],o,e);case"MultiLineString":return r<0&&(r=a.length+r),l<0&&(l=a[r].length+l),Fe(a[r][l],o,e);case"MultiPolygon":return r<0&&(r=a.length+r),i<0&&(i=a[r].length+i),l<0&&(l=a[r][i].length-l),Fe(a[r][i][l],o,e)}throw new Error("geojson is invalid")}re(mi,"findPoint");var gi=Object.defineProperty,hi=(n,e)=>gi(n,"name",{value:e,configurable:!0});function nn(n,e={}){return en(n,(t,r)=>{const i=r.geometry.coordinates;return t+Yt(i[0],i[1],e)},0)}hi(nn,"length");var cl=nn;const dl={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",hovering:"black",lineEndpointColor:"black",streetview:"blue",measuringLine:"cyan"},ml=10,gl=10;function hl(){return _i(["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"])}function _i(n){return n[Math.floor(Math.random()*n.length)]}function yi(n){let e;const t=n[16].default,r=ye(t,n,n[24],null);return{c(){r&&r.c()},m(i,l){r&&r.m(i,l),e=!0},p(i,l){r&&r.p&&(!e||l&16777216)&&be(r,t,i,i[24],e?we(t,i[24],l,null):ve(i[24]),null)},i(i){e||(E(r,i),e=!0)},o(i){F(r,i),e=!1},d(i){r&&r.d(i)}}}function bi(n){let e,t,r;function i(o){n[17](o)}let l={id:n[1],type:"circle",source:n[2],sourceLayer:n[3],beforeId:n[4],beforeLayerType:n[5],paint:n[6],layout:n[7],filter:n[8],applyToClusters:n[9],minzoom:n[10],maxzoom:n[11],hoverCursor:n[12],manageHoverState:n[13],eventsIfTopMost:n[14],interactive:n[15],$$slots:{default:[yi]},$$scope:{ctx:n}};return n[0]!==void 0&&(l.hovered=n[0]),e=new Dt({props:l}),qe.push(()=>Ye(e,"hovered",i)),e.$on("click",n[18]),e.$on("dblclick",n[19]),e.$on("contextmenu",n[20]),e.$on("mouseenter",n[21]),e.$on("mousemove",n[22]),e.$on("mouseleave",n[23]),{c(){Y(e.$$.fragment)},m(o,s){j(e,o,s),r=!0},p(o,[s]){const a={};s&2&&(a.id=o[1]),s&4&&(a.source=o[2]),s&8&&(a.sourceLayer=o[3]),s&16&&(a.beforeId=o[4]),s&32&&(a.beforeLayerType=o[5]),s&64&&(a.paint=o[6]),s&128&&(a.layout=o[7]),s&256&&(a.filter=o[8]),s&512&&(a.applyToClusters=o[9]),s&1024&&(a.minzoom=o[10]),s&2048&&(a.maxzoom=o[11]),s&4096&&(a.hoverCursor=o[12]),s&8192&&(a.manageHoverState=o[13]),s&16384&&(a.eventsIfTopMost=o[14]),s&32768&&(a.interactive=o[15]),s&16777216&&(a.$$scope={dirty:s,ctx:o}),!t&&s&1&&(t=!0,a.hovered=o[0],je(()=>t=!1)),e.$set(a)},i(o){r||(E(e.$$.fragment,o),r=!0)},o(o){F(e.$$.fragment,o),r=!1},d(o){x(e,o)}}}function vi(n,e,t){let{$$slots:r={},$$scope:i}=e,{id:l=Kt("circle")}=e,{source:o=void 0}=e,{sourceLayer:s=void 0}=e,{beforeId:a=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:u}=e,{layout:d=void 0}=e,{filter:h=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:b=void 0}=e,{manageHoverState:M=!1}=e,{hovered:U=null}=e,{eventsIfTopMost:v=!1}=e,{interactive:z=!0}=e;function w(_){U=_,t(0,U)}function Z(_){le.call(this,n,_)}function W(_){le.call(this,n,_)}function q(_){le.call(this,n,_)}function B(_){le.call(this,n,_)}function S(_){le.call(this,n,_)}function oe(_){le.call(this,n,_)}return n.$$set=_=>{"id"in _&&t(1,l=_.id),"source"in _&&t(2,o=_.source),"sourceLayer"in _&&t(3,s=_.sourceLayer),"beforeId"in _&&t(4,a=_.beforeId),"beforeLayerType"in _&&t(5,f=_.beforeLayerType),"paint"in _&&t(6,u=_.paint),"layout"in _&&t(7,d=_.layout),"filter"in _&&t(8,h=_.filter),"applyToClusters"in _&&t(9,g=_.applyToClusters),"minzoom"in _&&t(10,y=_.minzoom),"maxzoom"in _&&t(11,C=_.maxzoom),"hoverCursor"in _&&t(12,b=_.hoverCursor),"manageHoverState"in _&&t(13,M=_.manageHoverState),"hovered"in _&&t(0,U=_.hovered),"eventsIfTopMost"in _&&t(14,v=_.eventsIfTopMost),"interactive"in _&&t(15,z=_.interactive),"$$scope"in _&&t(24,i=_.$$scope)},[U,l,o,s,a,f,u,d,h,g,y,C,b,M,v,z,r,w,Z,W,q,B,S,oe,i]}class _l extends Q{constructor(e){super(),J(this,e,vi,bi,X,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}const wi=n=>({marker:n&8}),Gt=n=>({marker:n[3]});function ki(n){let e,t,r,i,l,o,s;const a=n[19].default,f=ye(a,n,n[18],Gt);return{c(){e=P("div"),f&&f.c(),c(e,"tabindex",t=n[1]?0:void 0),c(e,"role",r=n[1]?"button":void 0),Ce(e,"z-index",n[2])},m(u,d){p(u,e,d),f&&f.m(e,null),l=!0,o||(s=[kt(n[7].call(null,e)),kt(i=pi.call(null,e,n[0])),N(e,"click",ft(n[20])),N(e,"dblclick",ft(n[21])),N(e,"contextmenu",ft(n[22])),N(e,"mouseenter",n[23]),N(e,"mouseleave",n[24]),N(e,"mousemove",n[25]),N(e,"keydown",n[8])],o=!0)},p(u,[d]){f&&f.p&&(!l||d&262152)&&be(f,a,u,u[18],l?we(a,u[18],d,wi):ve(u[18]),Gt),(!l||d&2&&t!==(t=u[1]?0:void 0))&&c(e,"tabindex",t),(!l||d&2&&r!==(r=u[1]?"button":void 0))&&c(e,"role",r),i&&Nn(i.update)&&d&1&&i.update.call(null,u[0]),d&4&&Ce(e,"z-index",u[2])},i(u){l||(E(f,u),l=!0)},o(u){F(f,u),l=!1},d(u){u&&L(e),f&&f.d(u),o=!1,Oe(s)}}}function pi(n,e){const t=n.className;function r(i){i?n.className=`${t} ${i}`:n.className=t}return r(e),{update:r}}function Li(n,e,t){let r,i,l,{$$slots:o={},$$scope:s}=e,{marker:a=void 0}=e,{lngLat:f}=e,{class:u=void 0}=e,{interactive:d=!0}=e,{asButton:h=!1}=e,{draggable:g=!1}=e,{feature:y=null}=e,{offset:C=void 0}=e,{zIndex:b=void 0}=e,{rotation:M=0}=e,{opacity:U=1}=e;const v=Wt(),{map:z,layerEvent:w,self:Z}=Vn();Se(n,z,k=>t(27,l=k)),Se(n,w,k=>t(26,r=k)),Se(n,Z,k=>t(3,i=k));function W(k){pt(Z,i=new Nt.Marker({element:k,rotation:M,draggable:g,offset:C,opacity:U.toString()}).setLngLat(f).addTo(l),i),t(11,a=i);const ce=()=>S("dragstart"),se=()=>{q(),S("drag")},me=()=>{q(),S("dragend")};return g&&(i.on("dragstart",ce),i.on("drag",se),i.on("dragend",me)),{destroy(){g&&(i==null||i.off("dragstart",ce),i==null||i.off("drag",se),i==null||i.off("dragend",me)),t(11,a=void 0),i==null||i.remove()}}}function q(){let k=i==null?void 0:i.getLngLat();k&&(Array.isArray(f)?t(10,f=[k.lng,k.lat]):f&&"lon"in f?t(10,f={lon:k.lng,lat:k.lat}):t(10,f=k))}function B(k){k.key===" "&&(k.preventDefault(),k.stopPropagation(),S("click"))}function S(k){if(!d)return;let ce=i==null?void 0:i.getLngLat();if(!ce)return;const se=[ce.lng,ce.lat];let me={map:l,marker:i,lngLat:se,features:[{type:"Feature",properties:(y==null?void 0:y.properties)??{},geometry:{type:"Point",coordinates:se}}]};pt(w,r={...me,layerType:"marker",type:k},r),v(k,me)}const oe=()=>S("click"),_=()=>S("dblclick"),ke=()=>S("contextmenu"),I=k=>{S("mouseenter")},V=()=>{S("mouseleave")},ie=()=>S("mousemove");return n.$$set=k=>{"marker"in k&&t(11,a=k.marker),"lngLat"in k&&t(10,f=k.lngLat),"class"in k&&t(0,u=k.class),"interactive"in k&&t(12,d=k.interactive),"asButton"in k&&t(1,h=k.asButton),"draggable"in k&&t(13,g=k.draggable),"feature"in k&&t(14,y=k.feature),"offset"in k&&t(15,C=k.offset),"zIndex"in k&&t(2,b=k.zIndex),"rotation"in k&&t(16,M=k.rotation),"opacity"in k&&t(17,U=k.opacity),"$$scope"in k&&t(18,s=k.$$scope)},n.$$.update=()=>{n.$$.dirty&1032&&(i==null||i.setLngLat(f)),n.$$.dirty&32776&&(i==null||i.setOffset(C??[0,0])),n.$$.dirty&65544&&(i==null||i.setRotation(M)),n.$$.dirty&131080&&(i==null||i.setOpacity(U.toString()))},[u,h,b,i,z,w,Z,W,B,S,f,a,d,g,y,C,M,U,s,o,oe,_,ke,I,V,ie]}class yl extends Q{constructor(e){super(),J(this,e,Li,ki,X,{marker:11,lngLat:10,class:0,interactive:12,asButton:1,draggable:13,feature:14,offset:15,zIndex:2,rotation:16,opacity:17})}}function Mi(n){let e;const t=n[8].default,r=ye(t,n,n[15],null);return{c(){r&&r.c()},m(i,l){r&&r.m(i,l),e=!0},p(i,l){r&&r.p&&(!e||l&32768)&&be(r,t,i,i[15],e?we(t,i[15],l,null):ve(i[15]),null)},i(i){e||(E(r,i),e=!0)},o(i){F(r,i),e=!1},d(i){r&&r.d(i)}}}function Pi(n){let e,t;return e=new Dt({props:{id:n[0],type:"raster",source:n[1],beforeId:n[2],beforeLayerType:n[3],paint:n[4],layout:n[5],minzoom:n[6],maxzoom:n[7],$$slots:{default:[Mi]},$$scope:{ctx:n}}}),e.$on("click",n[9]),e.$on("dblclick",n[10]),e.$on("contextmenu",n[11]),e.$on("mouseenter",n[12]),e.$on("mousemove",n[13]),e.$on("mouseleave",n[14]),{c(){Y(e.$$.fragment)},m(r,i){j(e,r,i),t=!0},p(r,[i]){const l={};i&1&&(l.id=r[0]),i&2&&(l.source=r[1]),i&4&&(l.beforeId=r[2]),i&8&&(l.beforeLayerType=r[3]),i&16&&(l.paint=r[4]),i&32&&(l.layout=r[5]),i&64&&(l.minzoom=r[6]),i&128&&(l.maxzoom=r[7]),i&32768&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){x(e,r)}}}function Ti(n,e,t){let{$$slots:r={},$$scope:i}=e,{id:l=Kt("raster-layer")}=e,{source:o=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f}=e,{layout:u=void 0}=e,{minzoom:d=void 0}=e,{maxzoom:h=void 0}=e;function g(v){le.call(this,n,v)}function y(v){le.call(this,n,v)}function C(v){le.call(this,n,v)}function b(v){le.call(this,n,v)}function M(v){le.call(this,n,v)}function U(v){le.call(this,n,v)}return n.$$set=v=>{"id"in v&&t(0,l=v.id),"source"in v&&t(1,o=v.source),"beforeId"in v&&t(2,s=v.beforeId),"beforeLayerType"in v&&t(3,a=v.beforeLayerType),"paint"in v&&t(4,f=v.paint),"layout"in v&&t(5,u=v.layout),"minzoom"in v&&t(6,d=v.minzoom),"maxzoom"in v&&t(7,h=v.maxzoom),"$$scope"in v&&t(15,i=v.$$scope)},[l,o,s,a,f,u,d,h,r,g,y,C,b,M,U,i]}class bl extends Q{constructor(e){super(),J(this,e,Ti,Pi,X,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}const Ci="/atip/pointless/assets/zoom_out_map-b2e1091a.svg";function Si(n){let e,t;return{c(){e=P("img"),ne(e.src,t=Ci)||c(e,"src",t),c(e,"alt","Zoom to show entire boundary")},m(r,i){p(r,e,i)},p:H,d(r){r&&L(e)}}}function zi(n){let e,t;return e=new ct({props:{title:"Zoom to show entire boundary",$$slots:{default:[Si]},$$scope:{ctx:n}}}),e.$on("click",n[0]),{c(){Y(e.$$.fragment)},m(r,i){j(e,r,i),t=!0},p(r,[i]){const l={};i&8&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){x(e,r)}}}function Ei(n,e,t){let r;Se(n,Ht,o=>t(2,r=o));let{boundaryGeojson:i}=e;function l(){let o=hr(i);Number.isFinite(o[0])&&r.fitBounds(o,{padding:20,animate:!0,duration:500})}return n.$$set=o=>{"boundaryGeojson"in o&&t(1,i=o.boundaryGeojson)},[l,i]}class vl extends Q{constructor(e){super(),J(this,e,Ei,zi,X,{boundaryGeojson:1})}}const Ri="/atip/pointless/assets/help-d011708a.svg";function Bi(n){let e,t;const r=n[1].default,i=ye(r,n,n[4],null);return{c(){e=P("div"),i&&i.c(),c(e,"class","govuk-prose")},m(l,o){p(l,e,o),i&&i.m(e,null),t=!0},p(l,o){i&&i.p&&(!t||o&16)&&be(i,r,l,l[4],t?we(r,l[4],o,null):ve(l[4]),null)},i(l){t||(E(i,l),t=!0)},o(l){F(i,l),t=!1},d(l){l&&L(e),i&&i.d(l)}}}function Ii(n){let e,t,r,i,l,o,s;function a(u){n[3](u)}let f={title:"Help",$$slots:{default:[Bi]},$$scope:{ctx:n}};return n[0]!==void 0&&(f.open=n[0]),r=new Dn({props:f}),qe.push(()=>Ye(r,"open",a)),{c(){e=P("button"),e.innerHTML=`<img src="${Ri}" title="Help" alt="Help"/>`,t=K(),Y(r.$$.fragment),c(e,"class","svelte-gb6dzm")},m(u,d){p(u,e,d),p(u,t,d),j(r,u,d),l=!0,o||(s=N(e,"click",n[2]),o=!0)},p(u,[d]){const h={};d&16&&(h.$$scope={dirty:d,ctx:u}),!i&&d&1&&(i=!0,h.open=u[0],je(()=>i=!1)),r.$set(h)},i(u){l||(E(r.$$.fragment,u),l=!0)},o(u){F(r.$$.fragment,u),l=!1},d(u){u&&(L(e),L(t)),x(r,u),o=!1,s()}}}function Fi(n,e,t){let{$$slots:r={},$$scope:i}=e,l=!1;const o=()=>t(0,l=!0);function s(a){l=a,t(0,l)}return n.$$set=a=>{"$$scope"in a&&t(4,i=a.$$scope)},[l,r,o,s,i]}class wl extends Q{constructor(e){super(),J(this,e,Fi,Ii,X,{})}}function Ai(n){let e;return{c(){e=P("ul"),e.innerHTML=`<li><b>Click</b>
    on the map to open a new tab with a 3rd-party imagery provider</li> <li>Press <b>Escape</b>
    to exit this mode</li> <li>Cursor by <a href="https://icon-icons.com/icon/screenshot-cursor-camera/100181" target="_blank" rel="noreferrer">Luc Chaissac</a></li>`},m(t,r){p(t,e,r)},p:H,i:H,o:H,d(t){t&&L(e)}}}class Oi extends Q{constructor(e){super(),J(this,e,null,Ai,X,{})}}const Gi="/atip/pointless/assets/camera_cursor-824d29b6.svg",{window:Ui}=Kn;function Ut(n){let e,t,r,i;const l=[Wi,Zi],o=[];function s(a,f){return a[0]?0:1}return e=s(n),t=o[e]=l[e](n),{c(){t.c(),r=Ge()},m(a,f){o[e].m(a,f),p(a,r,f),i=!0},p(a,f){let u=e;e=s(a),e===u?o[e].p(a,f):(ze(),F(o[u],1,1,()=>{o[u]=null}),Ee(),t=o[e],t?t.p(a,f):(t=o[e]=l[e](a),t.c()),E(t,1),t.m(r.parentNode,r))},i(a){i||(E(t),i=!0)},o(a){F(t),i=!1},d(a){a&&L(r),o[e].d(a)}}}function Zi(n){let e,t;return e=new ct({props:{$$slots:{default:[qi]},$$scope:{ctx:n}}}),e.$on("click",n[8]),{c(){Y(e.$$.fragment)},m(r,i){j(e,r,i),t=!0},p(r,i){const l={};i&8192&&(l.$$scope={dirty:i,ctx:r}),e.$set(l)},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){x(e,r)}}}function Wi(n){let e,t,r,i,l,o,s;e=new ct({props:{$$slots:{default:[Hi]},$$scope:{ctx:n}}}),e.$on("click",n[6]);function a(u){n[7](u)}let f={label:"Source",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return n[2].streetViewImagery!==void 0&&(f.value=n[2].streetViewImagery),r=new Qn({props:f}),qe.push(()=>Ye(r,"value",a)),o=new tr({props:{label:"Help",$$slots:{default:[Ni]},$$scope:{ctx:n}}}),{c(){Y(e.$$.fragment),t=K(),Y(r.$$.fragment),l=K(),Y(o.$$.fragment)},m(u,d){j(e,u,d),p(u,t,d),j(r,u,d),p(u,l,d),j(o,u,d),s=!0},p(u,d){const h={};d&8192&&(h.$$scope={dirty:d,ctx:u}),e.$set(h);const g={};!i&&d&4&&(i=!0,g.value=u[2].streetViewImagery,je(()=>i=!1)),r.$set(g);const y={};d&8192&&(y.$$scope={dirty:d,ctx:u}),o.$set(y)},i(u){s||(E(e.$$.fragment,u),E(r.$$.fragment,u),E(o.$$.fragment,u),s=!0)},o(u){F(e.$$.fragment,u),F(r.$$.fragment,u),F(o.$$.fragment,u),s=!1},d(u){u&&(L(t),L(l)),x(e,u),x(r,u),x(o,u)}}}function qi(n){let e;return{c(){e=de("Enable Street View")},m(t,r){p(t,e,r)},d(t){t&&L(e)}}}function Hi(n){let e;return{c(){e=de("Disable Street View")},m(t,r){p(t,e,r)},d(t){t&&L(e)}}}function Ni(n){let e,t;return e=new Oi({}),{c(){Y(e.$$.fragment)},m(r,i){j(e,r,i),t=!0},i(r){t||(E(e.$$.fragment,r),t=!0)},o(r){F(e.$$.fragment,r),t=!1},d(r){x(e,r)}}}function Vi(n){let e,t,r,i,l=n[1]&&Ut(n);return{c(){l&&l.c(),e=Ge()},m(o,s){l&&l.m(o,s),p(o,e,s),t=!0,r||(i=N(Ui,"keydown",n[3]),r=!0)},p(o,[s]){o[1]?l?(l.p(o,s),s&2&&E(l,1)):(l=Ut(o),l.c(),E(l,1),l.m(e.parentNode,e)):l&&(ze(),F(l,1,1,()=>{l=null}),Ee())},i(o){t||(E(l),t=!0)},o(o){F(l),t=!1},d(o){o&&L(e),l&&l.d(o),r=!1,i()}}}function Di(n,e,t){let r;Se(n,Lt,b=>t(2,r=b));let{cfg:i}=e,{map:l}=e,{enabled:o}=e,{showControls:s=!0}=e,a=[];function f(){if(l){l.on("click",d),l.getCanvas().style.cursor=`url(${Gi}), auto`;for(let b of i.getStreetViewRoadLayerNames(l))a.push([b,l.getPaintProperty(b,"line-color")]),l.setPaintProperty(b,"line-color","cyan")}}function u(){if(l){l.off("click",d),l.getCanvas().style.cursor="inherit";for(let[b,M]of a)l.setPaintProperty(b,"line-color",M);a=[]}}qt(u);function d(b){if(!o)return;let M=b.lngLat.lng,U=b.lngLat.lat;r.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${U},${M}&cbp=11,0,0,0,0`,"_blank"):r.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${U}~${M}&style=x`,"_blank")}function h(b){o&&b.key=="Escape"&&(b.stopPropagation(),t(0,o=!1))}const g=()=>t(0,o=!1);function y(b){n.$$.not_equal(r.streetViewImagery,b)&&(r.streetViewImagery=b,Lt.set(r))}const C=()=>t(0,o=!0);return n.$$set=b=>{"cfg"in b&&t(4,i=b.cfg),"map"in b&&t(5,l=b.map),"enabled"in b&&t(0,o=b.enabled),"showControls"in b&&t(1,s=b.showControls)},n.$$.update=()=>{n.$$.dirty&1&&(o?f():u())},[o,s,r,h,i,l,g,y,C]}class kl extends Q{constructor(e){super(),J(this,e,Di,Vi,X,{cfg:4,map:5,enabled:0,showControls:1})}}const Ki="/atip/pointless/assets/warning-81bba3f6.svg";function Qi(n){let e,t;return{c(){e=P("img"),ne(e.src,t=Ki)||c(e,"src",t),c(e,"title",n[0]),c(e,"alt",n[0])},m(r,i){p(r,e,i)},p(r,[i]){i&1&&c(e,"title",r[0]),i&1&&c(e,"alt",r[0])},i:H,o:H,d(r){r&&L(e)}}}function Ji(n,e,t){let{text:r}=e;return n.$$set=i=>{"text"in i&&t(0,r=i.text)},[r]}class pl extends Q{constructor(e){super(),J(this,e,Ji,Qi,X,{text:0})}}export{al as B,_l as C,fl as G,wl as H,yl as M,bl as R,kl as S,pl as W,vl as Z,el as a,hr as b,tl as c,il as d,nl as e,rl as f,Oi as g,lr as h,$i as i,ji as j,Yi as k,mr as l,dr as m,xi as n,cr as o,ol as p,tr as q,hl as r,ul as s,cl as t,sl as u,dl as v,ll as w,ml as x,gl as y};
