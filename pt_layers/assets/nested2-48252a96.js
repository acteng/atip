import{S as J,i as K,s as Y,e as C,h as U,$ as Ce,j as $,W as ne,o as p,aP as tl,b as W,c as V,d as A,g as h,m as b,w as at,l as X,t as m,n as _,p as v,X as Gt,Y as Ut,Z as qt,_ as Wt,a7 as Ee,J as ge,K as de,aQ as Lt,u as k,k as w,D as B,I as Me,N as kn,O as nl,q as ve,P as rl,Q as ll,T as it,U as ol,V as sl,aX as Ll,aY as $t,a4 as Mn,aZ as Il,aO as Pl,ar as nn,ae as yn,aj as Vt,r as Sn,a as It,F as $n,v as Ye,aW as Q,a_ as be,a$ as ye,B as Z,ah as x,C as ke,ak as ee,b0 as ie,G as Mt,H as il,aS as Bt,ab as Nn,b1 as rn,R as al,b2 as jt,E as fl,as as Ml,f as pn,ag as Nl,aU as Fn,al as Fl,am as En,an as Dn,ao as Qt,aV as jn,L as El,M as Dl,y as jl}from"./index-762f508a.js";import{d as et,j as At,C as Fe,f as nt,h as ae,l as H,c as Zt,k as Rl,S as Bl,B as Hl,b as Nt,G as zl}from"./StreetViewTool-004f06b1.js";import{a as Je,F as Gl}from"./Popup-bc8d1c55.js";import{P as ce}from"./Popup-85e35e17.js";import{R as Ul,C as tt,Z as ql}from"./ZoomOutMap-34bc0336.js";import{L as Wl,a as Vl}from"./LineMeasureController-a5d51981.js";function Xl(r){let e;return{c(){e=C("span"),U(e,"class","svelte-kzgqtg"),Ce(e,"background",r[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Ce(e,"background",n[0])},i:ne,o:ne,d(n){n&&p(e)}}}function Yl(r,e,n){let{color:t}=e;return r.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class Oe extends J{constructor(e){super(),K(this,e,Yl,Xl,Y,{color:0})}}const Ql="/atip/pt_layers/assets/help-d011708a.svg";function Jl(r){let e,n;const t=r[1].default,l=Gt(t,r,r[4],null);return{c(){e=C("div"),l&&l.c(),U(e,"class","govuk-prose")},m(o,s){$(o,e,s),l&&l.m(e,null),n=!0},p(o,s){l&&l.p&&(!n||s&16)&&Ut(l,t,o,o[4],n?Wt(t,o[4],s,null):qt(o[4]),null)},i(o){n||(m(l,o),n=!0)},o(o){_(l,o),n=!1},d(o){o&&p(e),l&&l.d(o)}}}function Kl(r){let e,n,t,l,o,s,f;function i(u){r[3](u)}let a={title:"Help",$$slots:{default:[Jl]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new tl({props:a}),W.push(()=>V(t,"open",i)),{c(){e=C("button"),e.innerHTML=`<img src="${Ql}" title="Help" alt="Help"/>`,n=A(),h(t.$$.fragment),U(e,"class","svelte-7d9d1l")},m(u,c){$(u,e,c),$(u,n,c),b(t,u,c),o=!0,s||(f=at(e,"click",r[2]),s=!0)},p(u,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,g.open=u[0],X(()=>l=!1)),t.$set(g)},i(u){o||(m(t.$$.fragment,u),o=!0)},o(u){_(t.$$.fragment,u),o=!1},d(u){u&&(p(e),p(n)),v(t,u),s=!1,f()}}}function Zl(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const s=()=>n(0,o=!0);function f(i){o=i,n(0,o)}return r.$$set=i=>{"$$scope"in i&&n(4,l=i.$$scope)},[o,t,s,f,l]}class _e extends J{constructor(e){super(),K(this,e,Zl,Kl,Y,{})}}function Rn(r,e,n){const t=r.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Bn(r){let e,n,t,l=r[1]+"",o,s,f;return n=new Oe({props:{color:r[2]}}),{c(){e=C("li"),h(n.$$.fragment),t=A(),o=k(l),s=A()},m(i,a){$(i,e,a),b(n,e,null),w(e,t),w(e,o),w(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),n.$set(u),(!f||a&1)&&l!==(l=i[1]+"")&&B(o,l)},i(i){f||(m(n.$$.fragment,i),f=!0)},o(i){_(n.$$.fragment,i),f=!1},d(i){i&&p(e),v(n)}}}function xl(r){let e,n,t=Ee(r[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Bn(Rn(r,t,s));const o=s=>_(l[s],1,1,()=>{l[s]=null});return{c(){e=C("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,f){$(s,e,f);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[f]){if(f&1){t=Ee(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Rn(s,t,i);l[i]?(l[i].p(a,f),m(l[i],1)):(l[i]=Bn(a),l[i].c(),m(l[i],1),l[i].m(e,null))}for(ge(),i=t.length;i<l.length;i+=1)o(i);de()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)_(l[f]);n=!1},d(s){s&&p(e),Lt(l,s)}}}function eo(r,e,n){let{rows:t}=e;return r.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class ul extends J{constructor(e){super(),K(this,e,eo,xl,Y,{rows:0})}}function Hn(r){let e=r[0],n,t,l=zn(r);return{c(){l.c(),n=Me()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?(ge(),_(l,1,1,ne),de(),l=zn(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(m(l),t=!0)},o(o){_(l),t=!1},d(o){o&&p(n),l.d(o)}}}function zn(r){let e;const n=r[10].default,t=Gt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&Ut(t,n,l,l[9],e?Wt(n,l[9],o,null):qt(l[9]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function to(r){let e,n,t=r[0]&&Hn(r);return{c(){t&&t.c(),e=Me()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Hn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ge(),_(t,1,1,()=>{t=null}),de())},i(l){n||(m(t),n=!0)},o(l){_(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function no(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=kn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:u,self:c}=nl();ve(r,u,y=>n(8,l=y)),ve(r,c,y=>n(0,t=y));let g,d=!0;return rl(()=>{t&&g&&l&&(ll(u,t,g),it(c,t=null,t),n(6,g=void 0))}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==f&&(it(c,t=f,t),ol(l,t,sl({type:"raster",tiles:i,tileSize:a}),y=>l&&y===t,()=>{t&&(n(6,g=l==null?void 0:l.getSource(t)),n(7,d=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,g=l==null?void 0:l.getSource(f))})),r.$$.dirty&208&&g&&(d?n(7,d=!1):g.setTiles(i))},[t,u,c,f,i,a,g,d,l,s,o]}class ro extends J{constructor(e){super(),K(this,e,no,to,Y,{id:3,tiles:4,tileSize:5})}}function lo(r){let e;const n=r[16].default,t=Gt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&Ut(t,n,l,l[24],e?Wt(n,l[24],o,null):qt(l[24]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function oo(r){let e,n,t;function l(s){r[17](s)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[lo]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new Ll({props:o}),W.push(()=>V(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,i.hovered=s[0],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function so(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=kn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:O=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:I=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:P=!1}=e,{interactive:M=!0}=e;function L(j){D=j,n(0,D)}function N(j){$t.call(this,r,j)}function E(j){$t.call(this,r,j)}function S(j){$t.call(this,r,j)}function F(j){$t.call(this,r,j)}function G(j){$t.call(this,r,j)}function R(j){$t.call(this,r,j)}return r.$$set=j=>{"id"in j&&n(1,o=j.id),"source"in j&&n(2,s=j.source),"sourceLayer"in j&&n(3,f=j.sourceLayer),"beforeId"in j&&n(4,i=j.beforeId),"beforeLayerType"in j&&n(5,a=j.beforeLayerType),"paint"in j&&n(6,u=j.paint),"layout"in j&&n(7,c=j.layout),"filter"in j&&n(8,g=j.filter),"applyToClusters"in j&&n(9,d=j.applyToClusters),"minzoom"in j&&n(10,y=j.minzoom),"maxzoom"in j&&n(11,O=j.maxzoom),"hoverCursor"in j&&n(12,T=j.hoverCursor),"manageHoverState"in j&&n(13,I=j.manageHoverState),"hovered"in j&&n(0,D=j.hovered),"eventsIfTopMost"in j&&n(14,P=j.eventsIfTopMost),"interactive"in j&&n(15,M=j.interactive),"$$scope"in j&&n(24,l=j.$$scope)},[D,o,s,f,i,a,u,c,g,d,y,O,T,I,P,M,t,L,N,E,S,F,G,R,l]}class io extends J{constructor(e){super(),K(this,e,so,oo,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Gn(r){let e=r[0],n,t,l=Un(r);return{c(){l.c(),n=Me()},m(o,s){l.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?(ge(),_(l,1,1,ne),de(),l=Un(o),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(o,s)},i(o){t||(m(l),t=!0)},o(o){_(l),t=!1},d(o){o&&p(n),l.d(o)}}}function Un(r){let e;const n=r[9].default,t=Gt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&Ut(t,n,l,l[8],e?Wt(n,l[8],o,null):qt(l[8]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function ao(r){let e,n,t=r[0]&&Gn(r);return{c(){t&&t.c(),e=Me()},m(l,o){t&&t.m(l,o),$(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&m(t,1)):(t=Gn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ge(),_(t,1,1,()=>{t=null}),de())},i(l){n||(m(t),n=!0)},o(l){_(t),n=!1},d(l){l&&p(e),t&&t.d(l)}}}function fo(r,e,n){let t,l,{$$slots:o={},$$scope:s}=e,{id:f=kn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e;if(i&&i.includes("pmtiles://")&&!Mn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Il;Mn.addProtocol("pmtiles",y.tile)}const{map:c,self:g}=nl();ve(r,c,y=>n(7,l=y)),ve(r,g,y=>n(0,t=y));let d;return rl(()=>{t&&l&&(ll(c,t,d),it(g,t=null,t),d=void 0)}),r.$$set=y=>{"id"in y&&n(3,f=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,u=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==f&&(it(g,t=f,t),ol(l,t,sl({type:"vector",url:i,tiles:a,promoteId:u}),y=>l&&y===t,()=>{t&&(d=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{d=l==null?void 0:l.getSource(f)}))},[t,c,g,f,i,a,u,l,s,o]}class we extends J{constructor(e){super(),K(this,e,fo,ao,Y,{id:3,url:4,tiles:5,promoteId:6})}}const uo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Ie=Uint8Array,ut=Uint16Array,cl=Uint32Array,$l=new Ie([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),pl=new Ie([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),co=new Ie([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ml=function(r,e){for(var n=new ut(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new cl(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},_l=ml($l,2),gl=_l[0],$o=_l[1];gl[28]=258,$o[258]=28;var po=ml(pl,0),mo=po[0],mn=new ut(32768);for(var me=0;me<32768;++me){var lt=(me&43690)>>>1|(me&21845)<<1;lt=(lt&52428)>>>2|(lt&13107)<<2,lt=(lt&61680)>>>4|(lt&3855)<<4,mn[me]=((lt&65280)>>>8|(lt&255)<<8)>>>1}var Rt=function(r,e,n){for(var t=r.length,l=0,o=new ut(e);l<t;++l)r[l]&&++o[r[l]-1];var s=new ut(e);for(l=0;l<e;++l)s[l]=s[l-1]+o[l-1]<<1;var f;if(n){f=new ut(1<<e);var i=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],u=e-r[l],c=s[r[l]-1]++<<u,g=c|(1<<u)-1;c<=g;++c)f[mn[c]>>>i]=a}else for(f=new ut(t),l=0;l<t;++l)r[l]&&(f[l]=mn[s[r[l]-1]++]>>>15-r[l]);return f},Xt=new Ie(288);for(var me=0;me<144;++me)Xt[me]=8;for(var me=144;me<256;++me)Xt[me]=9;for(var me=256;me<280;++me)Xt[me]=7;for(var me=280;me<288;++me)Xt[me]=8;var dl=new Ie(32);for(var me=0;me<32;++me)dl[me]=5;var _o=Rt(Xt,9,1),go=Rt(dl,5,1),ln=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},Re=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},on=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},ho=function(r){return(r+7)/8|0},Cn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?ut:r.BYTES_PER_ELEMENT==4?cl:Ie)(n-e);return t.set(r.subarray(e,n)),t},bo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Be=function(r,e,n){var t=new Error(e||bo[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,Be),!n)throw t;return t},vo=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new Ie(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new Ie(t*3));var s=function(Ne){var Se=e.length;if(Ne>Se){var Ze=new Ie(Math.max(Se*2,Ne));Ze.set(e),e=Ze}},f=n.f||0,i=n.p||0,a=n.b||0,u=n.l,c=n.d,g=n.m,d=n.n,y=t*8;do{if(!u){f=Re(r,i,1);var O=Re(r,i+1,3);if(i+=3,O)if(O==1)u=_o,c=go,g=9,d=5;else if(O==2){var P=Re(r,i,31)+257,M=Re(r,i+10,15)+4,L=P+Re(r,i+5,31)+1;i+=14;for(var N=new Ie(L),E=new Ie(19),S=0;S<M;++S)E[co[S]]=Re(r,i+S*3,7);i+=M*3;for(var F=ln(E),G=(1<<F)-1,R=Rt(E,F,1),S=0;S<L;){var j=R[Re(r,i,G)];i+=j&15;var T=j>>>4;if(T<16)N[S++]=T;else{var z=0,q=0;for(T==16?(q=3+Re(r,i,3),i+=2,z=N[S-1]):T==17?(q=3+Re(r,i,7),i+=3):T==18&&(q=11+Re(r,i,127),i+=7);q--;)N[S++]=z}}var te=N.subarray(0,P),re=N.subarray(P);g=ln(te),d=ln(re),u=Rt(te,g,1),c=Rt(re,d,1)}else Be(1);else{var T=ho(i)+4,I=r[T-4]|r[T-3]<<8,D=T+I;if(D>t){o&&Be(0);break}l&&s(a+I),e.set(r.subarray(T,D),a),n.b=a+=I,n.p=i=D*8,n.f=f;continue}if(i>y){o&&Be(0);break}}l&&s(a+131072);for(var ue=(1<<g)-1,Le=(1<<d)-1,Te=i;;Te=i){var z=u[on(r,i)&ue],se=z>>>4;if(i+=z&15,i>y){o&&Be(0);break}if(z||Be(2),se<256)e[a++]=se;else if(se==256){Te=i,u=null;break}else{var Ae=se-254;if(se>264){var S=se-257,fe=$l[S];Ae=Re(r,i,(1<<fe)-1)+gl[S],i+=fe}var $e=c[on(r,i)&Le],pe=$e>>>4;$e||Be(3),i+=$e&15;var re=mo[pe];if(pe>3){var fe=pl[pe];re+=on(r,i)&(1<<fe)-1,i+=fe}if(i>y){o&&Be(0);break}l&&s(a+131072);for(var je=a+Ae;a<je;a+=4)e[a]=e[a-re],e[a+1]=e[a+1-re],e[a+2]=e[a+2-re],e[a+3]=e[a+3-re];a=je}}n.l=u,n.p=Te,n.b=a,n.f=f,u&&(f=1,n.m=g,n.d=c,n.n=d)}while(!f);return a==e.length?e:Cn(e,0,a)},wo=new Ie(0),Xe=function(r,e){return r[e]|r[e+1]<<8},He=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},sn=function(r,e){return He(r,e)+He(r,e+4)*4294967296};function ko(r,e){return vo(r,e)}var _n=typeof TextDecoder<"u"&&new TextDecoder,yo=0;try{_n.decode(wo,{stream:!0}),yo=1}catch{}var So=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,Cn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function hl(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(_n)return _n.decode(r);var l=So(r),o=l[0],s=l[1];return s.length&&Be(8),o}}var Co=function(r,e){return e+30+Xe(r,e+26)+Xe(r,e+28)},To=function(r,e,n){var t=Xe(r,e+28),l=hl(r.subarray(e+46,e+46+t),!(Xe(r,e+8)&2048)),o=e+46+t,s=He(r,e+20),f=n&&s==4294967295?Oo(r,o):[s,He(r,e+24),He(r,e+42)],i=f[0],a=f[1],u=f[2];return[Xe(r,e+10),i,a,l,o+Xe(r,e+30)+Xe(r,e+32),u]},Oo=function(r,e){for(;Xe(r,e)!=1;e+=4+Xe(r,e+2));return[sn(r,e+12),sn(r,e+4),sn(r,e+20)]};function Ao(r,e){for(var n={},t=r.length-22;He(r,t)!=101010256;--t)(!t||r.length-t>65558)&&Be(13);var l=Xe(r,t+8);if(!l)return{};var o=He(r,t+16),s=o==4294967295||l==65535;if(s){var f=He(r,t-12);s=He(r,f)==101075792,s&&(l=He(r,f+32),o=He(r,f+48))}for(var i=e&&e.filter,a=0;a<l;++a){var u=To(r,o,s),c=u[0],g=u[1],d=u[2],y=u[3],O=u[4],T=u[5],I=Co(r,T);o=O,(!i||i({name:y,size:g,originalSize:d,compression:c}))&&(c?c==8?n[y]=ko(r.subarray(I,I+g),new Ie(d)):Be(14,"unknown compression type "+c):n[y]=Cn(r,I,I+g))}return n}function Lo(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(an):an(r)}function an(r){var e=new Uint8Array(r),n=Ao(e);return Promise.resolve(Io(n))}function Io(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=hl(r[l])}return e}function Qe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&ct(t)===e)return t;n++}}function Yt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&ct(l)===e&&n.push(l),t++}return n}function xt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&ct(l)===e&&n(l,t):n(l,t),t++}}function Po(r,e,n){var t=[];return xt(r,e,function(l,o){t.push(n(l,o))}),t}var Mo=/.+\:/;function ct(r){return r.tagName.replace(Mo,"")}function bl(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+ct(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=bl(r.childNodes[t]),t++;return e+="</"+ct(r)+">",e}function No(r){var e=r.documentElement,n=Qe(e,"sheetData"),t=[];return xt(n,"row",function(l){xt(l,"c",function(o){t.push(o)})}),t}function Fo(r,e){return Qe(e,"v")}function Eo(r,e){if(e.firstChild&&ct(e.firstChild)==="is"&&e.firstChild.firstChild&&ct(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Do(r){var e=r.documentElement,n=Qe(e,"dimension");if(n)return n.getAttribute("ref")}function jo(r){var e=r.documentElement,n=Qe(e,"cellStyleXfs");return n?Yt(n,"xf"):[]}function Ro(r){var e=r.documentElement,n=Qe(e,"cellXfs");return n?Yt(n,"xf"):[]}function Bo(r){var e=r.documentElement,n=Qe(e,"numFmts");return n?Yt(n,"numFmt"):[]}function Ho(r){var e=r.documentElement;return Po(e,"si",function(n){var t=Qe(n,"t");if(t)return t.textContent;var l="";return xt(n,"r",function(o){l+=Qe(o,"t").textContent}),l})}function zo(r){var e=r.documentElement;return Qe(e,"workbookPr")}function Go(r){var e=r.documentElement;return Yt(e,"Relationship")}function Uo(r){var e=r.documentElement,n=Qe(e,"sheets");return Yt(n,"sheet")}function qo(r,e){var n=e.createDocument(r),t={},l=zo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(f){f.getAttribute("name")&&t.sheets.push({id:f.getAttribute("sheetId"),name:f.getAttribute("name"),relationId:f.getAttribute("r:id")})};return Uo(n).forEach(o),t}function Wo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(s){var f=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=fn(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=fn(f);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=fn(f);break}};return Go(n).forEach(l),t}function fn(r){return r[0]==="/"?r.slice(1):"xl/"+r}function qn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Wn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qn(Object(n),!0).forEach(function(t){Vo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Vo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Xo(r,e){if(!r)return{};var n=e.createDocument(r),t=jo(n).map(un),l=Bo(n).map(Yo).reduce(function(s,f){return s[f.id]=f,s},[]),o=function(f){return f.hasAttribute("xfId")?Wn(Wn({},t[f.xfId]),un(f,l)):un(f,l)};return Ro(n).map(o)}function Yo(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function un(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function Qo(r,e){return r?Ho(e.createDocument(r)):[]}function vl(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function Jo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ko(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ko(r,e){if(r){if(typeof r=="string")return Vn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vn(r,e)}}function Vn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Zo(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(xo.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&ns(l.numberFormat.template))return!0}}var xo=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],es=/^\[\$-414\]/,ts=/;@$/;function ns(r){r=r.toLowerCase(),r=r.replace(es,""),r=r.replace(ts,"");for(var e=r.split(/\W+/),n=Jo(e),t;!(t=n()).done;){var l=t.value;if(rs.indexOf(l)<0)return!1}return!0}var rs=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function ls(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,s=n.styles,f=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=cn(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=cn(r,a);break;case"s":var u=Number(r);if(isNaN(u))throw new Error('Invalid "shared" string index: '.concat(r));if(u>=f.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=f[u],r=cn(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=os(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var g=Number(r);if(isNaN(g))throw new Error('Invalid "numeric" cell value: '.concat(r));r=g,Zo(r,o(),s,a)&&(r=vl(r,i));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function os(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function cn(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var ss=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function is(r){var e=function(a,u){return a-u},n=r.map(function(i){return i.row}).sort(e),t=r.map(function(i){return i.column}).sort(e),l=n[0],o=n[n.length-1],s=t[0],f=t[t.length-1];return[{row:l,column:s},{row:o,column:f}]}function as(r){for(var e=0,n=0;n<r.length;)e*=26,e+=ss.indexOf(r[n]),n++;return e}function wl(r){return r=r.split(/(\d+)/),[parseInt(r[1]),as(r[0].trim())]}function fs(r,e,n,t,l,o,s){var f=wl(r.getAttribute("r")),i=Fo(e,r),a=i&&i.textContent,u;return r.hasAttribute("t")&&(u=r.getAttribute("t")),{row:f[0],column:f[1],value:ls(a,u,{getInlineStringValue:function(){return Eo(e,r)},getInlineStringXml:function(){return bl(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:s})}}function us(r,e,n,t,l,o){var s=No(r);return s.length===0?[]:s.map(function(f){return fs(f,r,e,n,t,l,o)})}function cs(r,e){return _s(r)||ms(r,e)||ps(r,e)||$s()}function $s(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ps(r,e){if(r){if(typeof r=="string")return Xn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xn(r,e)}}function Xn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ms(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function _s(r){if(Array.isArray(r))return r}function gs(r){var e=Do(r);if(e)return e=e.split(":").map(wl).map(function(n){var t=cs(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function ds(r,e,n,t,l,o){var s=e.createDocument(r),f=us(s,e,n,t,l,o),i=gs(s)||is(f);return{cells:f,dimensions:i}}function hs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=bs(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bs(r,e){if(r){if(typeof r=="string")return Yn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yn(r,e)}}function Yn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function vs(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=r.length-1;s>=0;){for(var f=!0,i=hs(r[s]),a;!(a=i()).done;){var u=a.value;if(l(u)!==null){f=!1;break}}if(f)r.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return r}function ws(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=ks(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ks(r,e){if(r){if(typeof r=="string")return Qn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qn(r,e)}}function Qn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function ys(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var s=!0,f=ws(r),i;!(i=f()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var u=0;u<r.length;)r[u].splice(o,1),u++;else if(l)break;o--}return r}function Ss(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=kl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cs(r,e){return As(r)||Os(r,e)||kl(r,e)||Ts()}function Ts(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kl(r,e){if(r){if(typeof r=="string")return Jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(r,e)}}function Jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Os(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function As(r){if(Array.isArray(r))return r}function Ls(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=Cs(n,2);l[0];for(var o=l[1],s=o.column,f=o.row,i=new Array(f),a=0;a<f;){i[a]=new Array(s);for(var u=0;u<s;)i[a][u]=null,u++;a++}for(var c=Ss(t),g;!(g=c()).done;){var d=g.value,y=d.row-1,O=d.column-1;O<s&&y<f&&(i[y][O]=d.value)}var T=e.rowMap;if(T)for(var I=0;I<i.length;)T[I]=I,I++;return i=vs(ys(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:T}),e.transformData&&(i=e.transformData(i)),i}function Is(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ps(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ps(r,e){if(r){if(typeof r=="string")return Kn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(r,e)}}function Kn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Zn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Ms(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zn(Object(n),!0).forEach(function(t){Ns(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ns(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Fs(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Ms({sheet:1},n));var t=function(g){if(!r[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return r[g]},l=Wo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?Qo(t(l.sharedStrings),e):[],s=l.styles?Xo(t(l.styles),e):{},f=qo(t("xl/workbook.xml"),e);if(n.getSheets)return f.sheets.map(function(c){var g=c.name;return{name:g}});var i=Es(n.sheet,f.sheets);if(!i||!l.sheets[i])throw Ds(n.sheet,f.sheets);var a=ds(t(l.sheets[i]),e,o,s,f,n),u=Ls(a,n);return n.properties?{data:u,properties:f}:u}function Es(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Is(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function Ds(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function gn(r){"@babel/helpers - typeof";return gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(r)}function xn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function js(r,e,n){return e&&xn(r.prototype,e),n&&xn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function Rs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Bs(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ht(r,e)}function Hs(r){var e=yl();return function(){var t=zt(r),l;if(e){var o=zt(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return zs(this,l)}}function zs(r,e){if(e&&(gn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gs(r)}function Gs(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function dn(r){var e=typeof Map=="function"?new Map:void 0;return dn=function(t){if(t===null||!Us(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Kt(t,arguments,zt(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ht(l,t)},dn(r)}function Kt(r,e,n){return yl()?Kt=Reflect.construct:Kt=function(l,o,s){var f=[null];f.push.apply(f,o);var i=Function.bind.apply(l,f),a=new i;return s&&Ht(a,s.prototype),a},Kt.apply(null,arguments)}function yl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Us(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ht(r,e){return Ht=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Ht(r,e)}function zt(r){return zt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},zt(r)}var Pe=function(r){Bs(n,r);var e=Hs(n);function n(t){var l;return Rs(this,n),l=e.call(this,"invalid"),l.reason=t,l}return js(n)}(dn(Error));function qs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new Pe("not_a_number")}if(typeof r!="number")throw new Pe("not_a_number");if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");return r}function Ws(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");return String(r)}throw new Pe("not_a_string")}function Vs(r){if(typeof r=="boolean")return r;throw new Pe("not_a_boolean")}function Xs(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new Pe("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new Pe("invalid_number");if(!isFinite(r))throw new Pe("out_of_bounds");var t=vl(r,n);if(isNaN(t.valueOf()))throw new Pe("out_of_bounds");return t}throw new Pe("not_a_date")}function Ys(r,e){return Ks(r)||Js(r,e)||Sl(r,e)||Qs()}function Qs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Js(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,s,f;try{for(n=n.call(r);!(l=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));l=!0);}catch(i){o=!0,f=i}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw f}}return t}}function Ks(r){if(Array.isArray(r))return r}function hn(r){"@babel/helpers - typeof";return hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(r)}function Zs(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Sl(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sl(r,e){if(r){if(typeof r=="string")return er(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(r,e)}}function er(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function tr(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function nr(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tr(Object(n),!0).forEach(function(t){xs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function xs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var rr={isColumnOriented:!1};function ei(r,e,n){n?n=nr(nr({},rr),n):n=rr;var t=n,l=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;li(e),l&&(r=ri(r));for(var f=r[0],i=[],a=[],u=1;u<r.length;u++){var c=Cl(e,r[u],u,f,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=Zs(a),d;!(d=g()).done;){var y=d.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function Cl(r,e,n,t,l,o){for(var s={},f=!0,i=function(){var g=u[a],d=r[g],y=hn(d.type)==="object"&&!Array.isArray(d.type),O=e[t.indexOf(g)];O===void 0&&(O=null);var T=void 0,I=void 0,D=void 0;if(y)T=Cl(d.type,e,n,t,l,o);else if(O===null)T=null;else if(Array.isArray(d.type)){var P=!1,M=ni(O).map(function(N){var E=lr(N,d,o);return E.error&&(T=N,I=E.error,D=E.reason),E.value!==null&&(P=!0),E.value});I||(T=P?M:null)}else{var L=lr(O,d,o);I=L.error,D=L.reason,T=I?O:L.value}!I&&T===null&&d.required&&(I="required"),I?(I={error:I,row:n+1,column:g,value:T},D&&(I.reason=D),d.type&&(I.type=d.type),l.push(I)):(f&&T!==null&&(f=!1),(T!==null||o.includeNullValues)&&(s[d.prop]=T))},a=0,u=Object.keys(r);a<u.length;a++)i();return f?null:s}function lr(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=pt(r,e.parse):e.type?t=ti(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function pt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function ti(r,e,n){switch(e){case String:return pt(r,Ws);case Number:return pt(r,qs);case Date:return pt(r,function(t){return Xs(t,{properties:n.properties})});case Boolean:return pt(r,Vs);default:if(typeof e=="function")return pt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Tl(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var s=Tl(r,'"',n+t+1);l+=s[0],t+=1+s[1]+1}else l+=o,t++}return[l,t]}function ni(r){for(var e=[],n=0;n<r.length;){var t=Tl(r,",",n),l=Ys(t,2),o=l[0],s=l[1];n+=s+1,e.push(o.trim())}return e}var ri=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function li(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function bn(r){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(r)}function Ol(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],s=void 0;bn(o)==="object"&&(o=Object.keys(r[l])[0],s=Ol(r[l][o])),e[l]={prop:o},s&&(e[l].type=s)}return e}var oi=["schema","map"];function or(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Jt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?or(Object(n),!0).forEach(function(t){si(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):or(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function si(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function ii(r,e){if(r==null)return{};var n=ai(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function ai(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function fi(r,e,n){var t=n.schema,l=n.map,o=ii(n,oi);!t&&l&&(t=Ol(l));var s=Fs(r,e,Jt(Jt({},o),{},{properties:t||o.properties}));return t?ei(s.data,t,Jt(Jt({},o),{},{properties:s.properties})):s}function ui(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Lo(r).then(function(n){return fi(n,uo,e)})}function ci(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,l);r.features=r.features.filter(t=>$i(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.browse&&(t.properties.funding_programme=l.browse.funding_programme,t.properties.current_milestone=l.browse.current_milestone,t.id=n++)}return e}function $i(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function pi(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await ui(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Pl(l.lat_lon.split(",").map(parseFloat).reverse()),s=l;s.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const vn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function mi(r){return nn(["get","intervention_type"],{area:et.area,route:et.route,crossing:et.crossing,other:et.other},"white")}function _i(r){return[["Areas",et.area],["Routes",et.route],["Crossings",et.crossing],["Other",et.other]]}const oe={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",trams:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"]},ze=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function wn(){let[r,e]=Al(vn,oe.funding_programmes);return[nn(["get","funding_programme"],r,"grey"),e]}function gi(){let r=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=Al(r,oe.current_milestone);return[nn(["get","current_milestone"],e,"grey"),n]}function Al(r,e){let n=[],t={},l=0;for(let o of r){let s=e[l++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function di(r){let e,n;return e=new ul({props:{rows:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hi(r){let e,n,t,l,o;function s(i){r[3](i)}let f={label:"Color interventions",id:"colorInterventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(f.value=r[0]),e=new At({props:f}),W.push(()=>V(e,"value",s)),e.$on("change",r[2]),l=new Fe({props:{label:"Legend",$$slots:{default:[di]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};!n&&a&1&&(n=!0,u.value=i[0],X(()=>n=!1)),e.$set(u);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}function bi(r,e,n){let t;ve(r,yn,a=>n(4,t=a));let l="fundingProgramme",[o,s]=wn();function f(){let a;l=="interventionType"?(a=mi(),n(1,s=_i())):l=="fundingProgramme"?n(1,[a,s]=wn(),s):l=="currentMilestone"&&n(1,[a,s]=gi(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){l=a,n(0,l)}return[l,s,f,i]}class vi extends J{constructor(e){super(),K(this,e,bi,hi,Y,{})}}const Pt=Vt({type:"FeatureCollection",features:[],schemes:{}}),en=Vt(new Map),sr=Vt(!0),Ft=Vt(""),Et=Vt("");function wi(r){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ki(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yi(r){let e,n,t,l,o,s;return t=new It({props:{$$slots:{default:[ki]},$$scope:{ctx:r}}}),t.$on("click",r[16]),{c(){e=C("input"),n=A(),h(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterInterventionText")},m(f,i){$(f,e,i),Ye(e,r[6]),$(f,n,i),b(t,f,i),l=!0,o||(s=at(e,"input",r[15]),o=!0)},p(f,i){i&64&&e.value!==f[6]&&Ye(e,f[6]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(m(t.$$.fragment,f),l=!0)},o(f){_(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),v(t,f),o=!1,s()}}}function Si(r){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ci(r){let e,n,t,l,o,s;return t=new It({props:{$$slots:{default:[Si]},$$scope:{ctx:r}}}),t.$on("click",r[18]),{c(){e=C("input"),n=A(),h(t.$$.fragment),U(e,"type","text"),U(e,"class","govuk-input govuk-input--width-10"),U(e,"id","filterSchemeText")},m(f,i){$(f,e,i),Ye(e,r[5]),$(f,n,i),b(t,f,i),l=!0,o||(s=at(e,"input",r[17]),o=!0)},p(f,i){i&32&&e.value!==f[5]&&Ye(e,f[5]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(m(t.$$.fragment,f),l=!0)},o(f){_(t.$$.fragment,f),l=!1},d(f){f&&(p(e),p(n)),v(t,f),o=!1,s()}}}function Ti(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y,O,T,I;e=new It({props:{$$slots:{default:[wi]},$$scope:{ctx:r}}}),e.$on("click",r[11]);function D(S){r[12](S)}let P={label:"Authority or region",id:"filterAuthority",choices:r[7],emptyOption:!0};r[2]!==void 0&&(P.value=r[2]),t=new At({props:P}),W.push(()=>V(t,"value",D));function M(S){r[13](S)}let L={label:"Funding programme",id:"filterFundingProgramme",choices:r[8],emptyOption:!0};r[3]!==void 0&&(L.value=r[3]),s=new At({props:L}),W.push(()=>V(s,"value",M));function N(S){r[14](S)}let E={label:"Current milestone",id:"filterCurrentMilestone",choices:r[9],emptyOption:!0};return r[4]!==void 0&&(E.value=r[4]),a=new At({props:E}),W.push(()=>V(a,"value",N)),g=new $n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[yi]},$$scope:{ctx:r}}}),y=new $n({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Ci]},$$scope:{ctx:r}}}),T=new vi({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),o=A(),h(s.$$.fragment),i=A(),h(a.$$.fragment),c=A(),h(g.$$.fragment),d=A(),h(y.$$.fragment),O=A(),h(T.$$.fragment)},m(S,F){b(e,S,F),$(S,n,F),b(t,S,F),$(S,o,F),b(s,S,F),$(S,i,F),b(a,S,F),$(S,c,F),b(g,S,F),$(S,d,F),b(y,S,F),$(S,O,F),b(T,S,F),I=!0},p(S,F){const G={};F&16777216&&(G.$$scope={dirty:F,ctx:S}),e.$set(G);const R={};F&128&&(R.choices=S[7]),!l&&F&4&&(l=!0,R.value=S[2],X(()=>l=!1)),t.$set(R);const j={};F&256&&(j.choices=S[8]),!f&&F&8&&(f=!0,j.value=S[3],X(()=>f=!1)),s.$set(j);const z={};F&512&&(z.choices=S[9]),!u&&F&16&&(u=!0,z.value=S[4],X(()=>u=!1)),a.$set(z);const q={};F&16777280&&(q.$$scope={dirty:F,ctx:S}),g.$set(q);const te={};F&16777248&&(te.$$scope={dirty:F,ctx:S}),y.$set(te)},i(S){I||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(s.$$.fragment,S),m(a.$$.fragment,S),m(g.$$.fragment,S),m(y.$$.fragment,S),m(T.$$.fragment,S),I=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(s.$$.fragment,S),_(a.$$.fragment,S),_(g.$$.fragment,S),_(y.$$.fragment,S),_(T.$$.fragment,S),I=!1},d(S){S&&(p(n),p(o),p(i),p(c),p(d),p(O)),v(e,S),v(t,S),v(s,S),v(a,S),v(g,S),v(y,S),v(T,S)}}}function Oi(r){let e,n=r[0].size.toLocaleString()+"",t,l,o=r[10].route.toLocaleString()+"",s,f,i=r[10].area.toLocaleString()+"",a,u,c=r[10].crossing.toLocaleString()+"",g,d,y=r[10].other.toLocaleString()+"",O,T,I=ir(r[10].totalLength).toFixed(1)+"",D,P;return{c(){e=k("Showing "),t=k(n),l=k(" schemes ("),s=k(o),f=k(`
    routes, `),a=k(i),u=k(` areas,
    `),g=k(c),d=k(" crossings, "),O=k(y),T=k(`
    other, with total LineString length of `),D=k(I),P=k(" miles)")},m(M,L){$(M,e,L),$(M,t,L),$(M,l,L),$(M,s,L),$(M,f,L),$(M,a,L),$(M,u,L),$(M,g,L),$(M,d,L),$(M,O,L),$(M,T,L),$(M,D,L),$(M,P,L)},p(M,L){L&1&&n!==(n=M[0].size.toLocaleString()+"")&&B(t,n),L&1024&&o!==(o=M[10].route.toLocaleString()+"")&&B(s,o),L&1024&&i!==(i=M[10].area.toLocaleString()+"")&&B(a,i),L&1024&&c!==(c=M[10].crossing.toLocaleString()+"")&&B(g,c),L&1024&&y!==(y=M[10].other.toLocaleString()+"")&&B(O,y),L&1024&&I!==(I=ir(M[10].totalLength).toFixed(1)+"")&&B(D,I)},d(M){M&&(p(e),p(t),p(l),p(s),p(f),p(a),p(u),p(g),p(d),p(O),p(T),p(D),p(P))}}}function Ai(r){let e,n,t;function l(s){r[19](s)}let o={id:"show-schemes",$$slots:{default:[Oi]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ae({props:o}),W.push(()=>V(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f&16778241&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Li(r){let e,n,t,l;return e=new Fe({props:{label:"Filters",$$slots:{default:[Ti]},$$scope:{ctx:r}}}),t=new nt({props:{small:!0,$$slots:{default:[Ai]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,[s]){const f={};s&16778236&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16778243&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function ir(r){return r*621371e-9}function Ii(r,e,n){let t,l,o,s;ve(r,Et,R=>n(5,t=R)),ve(r,Ft,R=>n(6,l=R)),ve(r,Pt,R=>n(20,o=R)),ve(r,en,R=>n(21,s=R));let{schemesToBeShown:f=new Set}=e,{show:i=!0}=e,a=[],u="",c=[],g=new Set(vn.slice(0,-1)),d="",y=[],O="",T={area:0,route:0,crossing:0,other:0,totalLength:0};Sn(()=>{var q,te,re;let R=new Set,j=new Set,z=new Set;for(let ue of s.values())(q=ue.browse)!=null&&q.authority_or_region&&R.add(ue.browse.authority_or_region),(te=ue.browse)!=null&&te.funding_programme&&j.add(ue.browse.funding_programme),(re=ue.browse)!=null&&re.current_milestone&&z.add(ue.browse.current_milestone);n(7,a=Array.from(R.entries())),a.sort(),n(8,c=vn.map(ue=>[ue,ue])),n(9,y=Array.from(z.entries())),y.sort()});function I(R,j,z,q,te){let re=R.toLowerCase(),ue=j.toLowerCase(),Le=se=>{var Ae,fe,$e,pe,je,Ne;if(re&&!((Ae=se.properties.name)!=null&&Ae.toLowerCase().includes(re))&&!((fe=se.properties.description)!=null&&fe.toLowerCase().includes(re)))return!1;if(ue||z||q||te){let Se=s.get(se.properties.scheme_reference);if(z&&(($e=Se.browse)==null?void 0:$e.authority_or_region)!=z||q&&q!=="Other"&&((pe=Se.browse)==null?void 0:pe.funding_programme)!=q||q==="Other"&&g.has(((je=Se.browse)==null?void 0:je.funding_programme)??"")||te&&((Ne=Se.browse)==null?void 0:Ne.current_milestone)!=te||ue&&!Se.scheme_reference.toLowerCase().includes(ue)&&!(Se.scheme_name??"").toLowerCase().includes(ue))return!1}return!0};n(0,f=new Set(o.features.filter(Le).map(se=>se.properties.scheme_reference))),n(10,T={area:0,route:0,crossing:0,other:0,totalLength:0});let Te=se=>{var Ae,fe;return!(!f.has(se.properties.scheme_reference)||re&&!((Ae=se.properties.name)!=null&&Ae.toLowerCase().includes(re))&&!((fe=se.properties.description)!=null&&fe.toLowerCase().includes(re)))};for(let se of o.features)Te(se)?(delete se.properties.hide_while_editing,n(10,T[se.properties.intervention_type]++,T),se.geometry.type=="LineString"&&se.properties.length_meters&&n(10,T.totalLength+=se.properties.length_meters,T)):se.properties.hide_while_editing=!0;Pt.set(o),n(10,T)}function D(){n(2,u=""),n(3,d=""),n(4,O=""),it(Ft,l="",l),it(Et,t="",t)}function P(R){u=R,n(2,u)}function M(R){d=R,n(3,d)}function L(R){O=R,n(4,O)}function N(){l=this.value,Ft.set(l)}const E=()=>it(Ft,l="",l);function S(){t=this.value,Et.set(t)}const F=()=>it(Et,t="",t);function G(R){i=R,n(1,i)}return r.$$set=R=>{"schemesToBeShown"in R&&n(0,f=R.schemesToBeShown),"show"in R&&n(1,i=R.show)},r.$$.update=()=>{r.$$.dirty&124&&I(l,t,u,d,O)},[f,i,u,d,O,t,l,a,c,y,T,D,P,M,L,N,E,S,F,G]}class Pi extends J{constructor(e){super(),K(this,e,Ii,Li,Y,{schemesToBeShown:0,show:1})}}function Mi(r){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ni(r){let e,n,t,l,o;return t=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Mi]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("License: "),h(t.$$.fragment),l=k(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,f){$(s,e,f),w(e,n),b(t,e,null),w(e,l),o=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){_(t.$$.fragment,s),o=!1},d(s){s&&p(e),v(t)}}}class De extends J{constructor(e){super(),K(this,e,null,Ni,Y,{})}}function ar(r,e,n){const t=r.slice();return t[2]=e[n],t}function fr(r,e,n){const t=r.slice();return t[5]=e[n],t}function ur(r){let e,n;return{c(){e=C("span"),n=k(` 
    `),Ce(e,"background",r[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,l){$(t,e,l),w(e,n)},p(t,l){l&1&&Ce(e,"background",t[5])},d(t){t&&p(e)}}}function cr(r){let e,n=r[2]+"",t;return{c(){e=C("span"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&B(t,n)},d(l){l&&p(e)}}}function Fi(r){let e,n,t,l=Ee(r[0]),o=[];for(let i=0;i<l.length;i+=1)o[i]=ur(fr(r,l,i));let s=Ee(r[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=cr(ar(r,s,i));return{c(){e=C("div");for(let i=0;i<o.length;i+=1)o[i].c();n=A(),t=C("div");for(let i=0;i<f.length;i+=1)f[i].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);$(i,n,a),$(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){l=Ee(i[0]);let u;for(u=0;u<l.length;u+=1){const c=fr(i,l,u);o[u]?o[u].p(c,a):(o[u]=ur(c),o[u].c(),o[u].m(e,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=l.length}if(a&2){s=Ee(i[1]);let u;for(u=0;u<s.length;u+=1){const c=ar(i,s,u);f[u]?f[u].p(c,a):(f[u]=cr(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:ne,o:ne,d(i){i&&(p(e),p(n),p(t)),Lt(o,i),Lt(f,i)}}}function Ei(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Ke extends J{constructor(e){super(),K(this,e,Ei,Fi,Y,{colorScale:0,limits:1})}}function $r(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Di(r){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ji(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ri(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bi(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hi(r){let e,n,t,l,o,s,f,i,a,u,c,g;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ji]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ri]},$$scope:{ctx:r}}}),u=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Bi]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),f=A(),i=C("p"),a=k("License: "),h(u.$$.fragment),c=k(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),$(d,f,y),$(d,i,y),w(i,a),b(u,i,null),w(i,c),g=!0},p(d,y){const O={};y&65536&&(O.$$scope={dirty:y,ctx:d}),t.$set(O);const T={};y&65536&&(T.$$scope={dirty:y,ctx:d}),o.$set(T);const I={};y&65536&&(I.$$scope={dirty:y,ctx:d}),u.$set(I)},i(d){g||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(u.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(u.$$.fragment,d),g=!1},d(d){d&&(p(e),p(f),p(i)),v(t),v(o),v(u)}}}function zi(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Hi]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function pr(r){let e,n;return e=new Ke({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gi(r){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ui(r){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qi(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(r){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y;return o=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ui]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[qi]},$$scope:{ctx:r}}}),g=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Wi]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=A(),t=C("p"),l=k("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=k(". Output area boundaries from "),h(f.$$.fragment),i=k("."),a=A(),u=C("p"),c=k("License: "),h(g.$$.fragment),d=k(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(O,T){$(O,e,T),$(O,n,T),$(O,t,T),w(t,l),b(o,t,null),w(t,s),b(f,t,null),w(t,i),$(O,a,T),$(O,u,T),w(u,c),b(g,u,null),w(u,d),y=!0},p(O,T){const I={};T&65536&&(I.$$scope={dirty:T,ctx:O}),o.$set(I);const D={};T&65536&&(D.$$scope={dirty:T,ctx:O}),f.$set(D);const P={};T&65536&&(P.$$scope={dirty:T,ctx:O}),g.$set(P)},i(O){y||(m(o.$$.fragment,O),m(f.$$.fragment,O),m(g.$$.fragment,O),y=!0)},o(O){_(o.$$.fragment,O),_(f.$$.fragment,O),_(g.$$.fragment,O),y=!1},d(O){O&&(p(e),p(n),p(t),p(a),p(u)),v(o),v(f),v(g)}}}function Xi(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Vi]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function mr(r){let e,n;return e=new Ke({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Yi(r){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Qi(r){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ji(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ki(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Qi]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ji]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=C("p"),n=k("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),f=A(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),$(u,f,c),b(i,u,c),a=!0},p(u,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const d={};c&65536&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){a||(m(t.$$.fragment,u),m(o.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),v(t),v(o),v(i,u)}}}function Zi(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Ki]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function _r(r){let e,n,t,l;return t=new Ke({props:{colorScale:r[4],limits:r[6]().map(sa)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",n=A(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),l=!0},p:ne,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function xi(r){let e,n,t,l=r[15].toLocaleString()+"",o,s,f=r[14]+"",i;return{c(){e=C("p"),n=k("There are "),t=C("b"),o=k(l),s=k(`
          people per square kilometre in `),i=k(f)},m(a,u){$(a,e,u),w(e,n),w(e,t),w(t,o),w(e,s),w(e,i)},p(a,u){u&8200&&l!==(l=a[15].toLocaleString()+"")&&B(o,l),u&8192&&f!==(f=a[14]+"")&&B(i,f)},d(a){a&&p(e)}}}function ea(r){let e,n,t=r[14]+"",l,o,s,f=r[15]+"",i,a;return{c(){e=C("p"),n=k("Households in "),l=k(t),o=k(` have an average of
          `),s=C("b"),i=k(f),a=k(`
          cars`)},m(u,c){$(u,e,c),w(e,n),w(e,l),w(e,o),w(e,s),w(s,i),w(e,a)},p(u,c){c&8192&&t!==(t=u[14]+"")&&B(l,t),c&8200&&f!==(f=u[15]+"")&&B(i,f)},d(u){u&&p(e)}}}function ta(r){let e,n,t=r[15]+"",l,o,s,f=r[14]+"",i,a;return{c(){e=C("p"),n=C("b"),l=k(t),o=k("%"),s=k(`
          of households in `),i=k(f),a=k(" have 1 or more cars")},m(u,c){$(u,e,c),w(e,n),w(n,l),w(n,o),w(e,s),w(e,i),w(e,a)},p(u,c){c&8200&&t!==(t=u[15]+"")&&B(l,t),c&8192&&f!==(f=u[14]+"")&&B(i,f)},d(u){u&&p(e)}}}function na(r){$r(r);let e;function n(o,s){return o[3]=="percent_households_with_car"?ta:o[3]=="average_cars_per_household"?ea:xi}let t=n(r),l=t(r);return{c(){l.c(),e=Me()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){$r(o),t===(t=n(o))&&l?l.p(o,s):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function ra(r){let e,n;return e=new ce({props:{$$slots:{default:[na,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function la(r){let e,n,t,l;const o=[H(xe),{sourceLayer:xe},{paint:{"fill-color":ye(["get",r[3]],r[6](),r[4]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ra]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Je({props:s}),e.$on("click",r[5]);const f=[H(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ke({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&88?ee(o,[u&0&&ie(H(xe)),u&0&&{sourceLayer:xe},u&88&&{paint:{"fill-color":ye(["get",a[3]],a[6](),a[4]),"fill-opacity":Z(.5,.7)}},u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};u&65544&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&8?ee(f,[u&0&&ie(H(`${xe}-outline`)),u&0&&{sourceLayer:xe},f[2],u&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function oa(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y;function O(S){r[7](S)}let T={id:"percent_households_with_car",$$slots:{right:[zi],default:[Di]},$$scope:{ctx:r}};r[0]!==void 0&&(T.checked=r[0]),e=new ae({props:T}),W.push(()=>V(e,"checked",O)),e.$on("change",r[8]);let I=r[3]=="percent_households_with_car"&&pr(r);function D(S){r[9](S)}let P={id:"average_cars_per_household",$$slots:{right:[Xi],default:[Gi]},$$scope:{ctx:r}};r[1]!==void 0&&(P.checked=r[1]),o=new ae({props:P}),W.push(()=>V(o,"checked",D)),o.$on("change",r[10]);let M=r[3]=="average_cars_per_household"&&mr(r);function L(S){r[11](S)}let N={id:"population_density",$$slots:{right:[Zi],default:[Yi]},$$scope:{ctx:r}};r[2]!==void 0&&(N.checked=r[2]),a=new ae({props:N}),W.push(()=>V(a,"checked",L)),a.$on("change",r[12]);let E=r[3]=="population_density"&&_r(r);return d=new we({props:{url:`pmtiles://${be()}/v1/${xe}.pmtiles`,$$slots:{default:[la]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),I&&I.c(),l=A(),h(o.$$.fragment),f=A(),M&&M.c(),i=A(),h(a.$$.fragment),c=A(),E&&E.c(),g=A(),h(d.$$.fragment)},m(S,F){b(e,S,F),$(S,t,F),I&&I.m(S,F),$(S,l,F),b(o,S,F),$(S,f,F),M&&M.m(S,F),$(S,i,F),b(a,S,F),$(S,c,F),E&&E.m(S,F),$(S,g,F),b(d,S,F),y=!0},p(S,[F]){const G={};F&65536&&(G.$$scope={dirty:F,ctx:S}),!n&&F&1&&(n=!0,G.checked=S[0],X(()=>n=!1)),e.$set(G),S[3]=="percent_households_with_car"?I?(I.p(S,F),F&8&&m(I,1)):(I=pr(S),I.c(),m(I,1),I.m(l.parentNode,l)):I&&(ge(),_(I,1,1,()=>{I=null}),de());const R={};F&65536&&(R.$$scope={dirty:F,ctx:S}),!s&&F&2&&(s=!0,R.checked=S[1],X(()=>s=!1)),o.$set(R),S[3]=="average_cars_per_household"?M?(M.p(S,F),F&8&&m(M,1)):(M=mr(S),M.c(),m(M,1),M.m(i.parentNode,i)):M&&(ge(),_(M,1,1,()=>{M=null}),de());const j={};F&65536&&(j.$$scope={dirty:F,ctx:S}),!u&&F&4&&(u=!0,j.checked=S[2],X(()=>u=!1)),a.$set(j),S[3]=="population_density"?E?(E.p(S,F),F&8&&m(E,1)):(E=_r(S),E.c(),m(E,1),E.m(g.parentNode,g)):E&&(ge(),_(E,1,1,()=>{E=null}),de());const z={};F&65544&&(z.$$scope={dirty:F,ctx:S}),d.$set(z)},i(S){y||(m(e.$$.fragment,S),m(I),m(o.$$.fragment,S),m(M),m(a.$$.fragment,S),m(E),m(d.$$.fragment,S),y=!0)},o(S){_(e.$$.fragment,S),_(I),_(o.$$.fragment,S),_(M),_(a.$$.fragment,S),_(E),_(d.$$.fragment,S),y=!1},d(S){S&&(p(t),p(l),p(f),p(i),p(c),p(g)),v(e,S),I&&I.d(S),v(o,S),M&&M.d(S),v(a,S),E&&E.d(S),v(d,S)}}}let xe="census_output_areas";const sa=r=>r.toLocaleString();function ia(r,e,n){let t=oe.sequential_low_to_high,l=!1,o=!1,s=!1,f="";function i(T){let I=T.detail.features[0].properties.OA21CD;f=="percent_households_with_car"||f=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${I}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${I}`,"_blank")}function a(){return f=="percent_households_with_car"?[0,20,40,60,80,100]:f=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function u(T){l=T,n(0,l)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(T){o=T,n(1,o)}const d=()=>{n(0,l=!1),n(2,s=!1)};function y(T){s=T,n(2,s)}const O=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,f="percent_households_with_car"):o?n(3,f="average_cars_per_household"):s?n(3,f="population_density"):n(3,f=""))},[l,o,s,f,t,i,a,u,c,g,d,y,O]}class aa extends J{constructor(e){super(),K(this,e,ia,oa,Y,{})}}function fa(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Combined authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function ua(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ca(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ua]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),l=k(", as of December 2022."),o=A(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function $a(r){let e,n,t;return n=new _e({props:{$$slots:{default:[ca]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function pa(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function ma(r){let e,n;return e=new ce({props:{$$slots:{default:[pa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _a(r){let e,n,t,l;const o=[H(mt),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ma]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Je({props:s}),e.$on("click",da);const f=[H(`${mt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ke({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?ee(o,[u&0&&ie(H(mt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?ee(f,[u&0&&ie(H(`${mt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ga(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:mt,$$slots:{right:[$a],default:[fa]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new Mt({props:{data:`${be()}/v1/${mt}.geojson`,$$slots:{default:[_a]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let mt="combined_authorities";function da(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function ha(r,e,n){let t=oe.combined_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class ba extends J{constructor(e){super(),K(this,e,ha,ga,Y,{})}}function va(r){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wa(r){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ka(r){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ya(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[wa]},$$scope:{ctx:r}}}),o=new Q({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ka]},$$scope:{ctx:r}}}),i=new De({}),{c(){e=C("p"),n=k("The 2019 English IMD scores come from "),h(t.$$.fragment),l=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=k("."),f=A(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),$(u,f,c),b(i,u,c),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const d={};c&32&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){a||(m(t.$$.fragment,u),m(o.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),v(t),v(o),v(i,u)}}}function Sa(r){let e,n,t;return n=new _e({props:{$$slots:{default:[ya]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function gr(r){let e,n;return e=new Ke({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ca(r){let e,n=r[4].LSOA11CD+"",t,l,o,s=r[4].score+"",f,i,a,u,c,g=r[4].rank.toLocaleString()+"",d,y;return{c(){e=C("p"),t=k(n),l=k(` has an IMD score of
        `),o=C("b"),f=k(s),i=A(),a=C("p"),u=k("Rank: "),c=C("b"),d=k(g),y=k(`
        / 32,844 LSOAs`)},m(O,T){$(O,e,T),w(e,t),w(e,l),w(e,o),w(o,f),$(O,i,T),$(O,a,T),w(a,u),w(a,c),w(c,d),w(a,y)},p(O,T){T&16&&n!==(n=O[4].LSOA11CD+"")&&B(t,n),T&16&&s!==(s=O[4].score+"")&&B(f,s),T&16&&g!==(g=O[4].rank.toLocaleString()+"")&&B(d,g)},d(O){O&&(p(e),p(i),p(a))}}}function Ta(r){let e,n;return e=new ce({props:{$$slots:{default:[Ca,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oa(r){let e,n,t,l;const o=[H(Ge),{sourceLayer:Ge},{paint:{"fill-color":ye(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ta]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Je({props:s});const f=[H(`${Ge}-outline`),{sourceLayer:Ge},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ke({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&7?ee(o,[u&0&&ie(H(Ge)),u&0&&{sourceLayer:Ge},u&6&&{paint:{"fill-color":ye(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Z(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&1?ee(f,[u&0&&ie(H(`${Ge}-outline`)),u&0&&{sourceLayer:Ge},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Aa(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:Ge,$$slots:{right:[Sa],default:[va]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&gr(r);return o=new we({props:{url:`pmtiles://${be()}/v1/${Ge}.pmtiles`,$$slots:{default:[Oa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=gr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&33&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let Ge="imd";function La(r,e,n){let t=oe.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class Ia extends J{constructor(e){super(),K(this,e,La,Aa,Y,{})}}function Pa(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ma(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Na(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Ma]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),l=k(", as of May 2023."),o=A(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Fa(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Na]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ea(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Da(r){let e,n;return e=new ce({props:{$$slots:{default:[Ea,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ja(r){let e,n,t,l;const o=[H(_t),{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Da]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Je({props:s}),e.$on("click",Ba);const f=[H(`${_t}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ke({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?ee(o,[u&0&&ie(H(_t)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?ee(f,[u&0&&ie(H(`${_t}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ra(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:_t,$$slots:{right:[Fa],default:[Pa]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new Mt({props:{data:`${be()}/v1/${_t}.geojson`,$$slots:{default:[ja]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let _t="local_authority_districts";function Ba(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Ha(r,e,n){let t=oe.local_authority_districts,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class za extends J{constructor(e){super(),K(this,e,Ha,Ra,Y,{})}}function Ga(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Ua(r){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qa(r){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wa(r){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Va(r){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xa(r){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ya(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y,O,T,I,D,P,M,L,N;return t=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Ua]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[qa]},$$scope:{ctx:r}}}),f=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Wa]},$$scope:{ctx:r}}}),d=new Q({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Va]},$$scope:{ctx:r}}}),D=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Xa]},$$scope:{ctx:r}}}),L=new De({}),{c(){e=C("p"),n=k("LPAs may be a "),h(t.$$.fragment),l=k(", "),h(o.$$.fragment),s=k("y, or "),h(f.$$.fragment),i=k("."),a=A(),u=C("p"),c=C("strong"),g=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),y=k(" to get more details."),O=A(),T=C("p"),I=k("Data from ONS Geography via "),h(D.$$.fragment),P=k(", as of November 2022."),M=A(),h(L.$$.fragment)},m(E,S){$(E,e,S),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),b(f,e,null),w(e,i),$(E,a,S),$(E,u,S),w(u,c),w(c,g),b(d,c,null),w(c,y),$(E,O,S),$(E,T,S),w(T,I),b(D,T,null),w(T,P),$(E,M,S),b(L,E,S),N=!0},p(E,S){const F={};S&16&&(F.$$scope={dirty:S,ctx:E}),t.$set(F);const G={};S&16&&(G.$$scope={dirty:S,ctx:E}),o.$set(G);const R={};S&16&&(R.$$scope={dirty:S,ctx:E}),f.$set(R);const j={};S&16&&(j.$$scope={dirty:S,ctx:E}),d.$set(j);const z={};S&16&&(z.$$scope={dirty:S,ctx:E}),D.$set(z)},i(E){N||(m(t.$$.fragment,E),m(o.$$.fragment,E),m(f.$$.fragment,E),m(d.$$.fragment,E),m(D.$$.fragment,E),m(L.$$.fragment,E),N=!0)},o(E){_(t.$$.fragment,E),_(o.$$.fragment,E),_(f.$$.fragment,E),_(d.$$.fragment,E),_(D.$$.fragment,E),_(L.$$.fragment,E),N=!1},d(E){E&&(p(e),p(a),p(u),p(O),p(T),p(M)),v(t),v(o),v(f),v(d),v(D),v(L,E)}}}function Qa(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Ya]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Ja(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Ka(r){let e,n;return e=new ce({props:{$$slots:{default:[Ja,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Za(r){let e,n,t,l;const o=[H(Ue),{sourceLayer:Ue},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ka]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Je({props:s});const f=[H(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ke({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?ee(o,[u&0&&ie(H(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?ee(f,[u&0&&ie(H(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function xa(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Ue,$$slots:{right:[Qa],default:[Ga]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${Ue}.pmtiles`,$$slots:{default:[Za]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let Ue="local_planning_authorities";function ef(r,e,n){let t=oe.local_planning_authorities,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class tf extends J{constructor(e){super(),K(this,e,ef,xa,Y,{})}}function nf(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function rf(r){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[rf]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),l=k(", as of May 2023."),o=A(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function of(r){let e,n,t;return n=new _e({props:{$$slots:{default:[lf]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function sf(r){let e,n=r[3].Name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&B(t,n)},d(l){l&&p(e)}}}function af(r){let e,n;return e=new ce({props:{$$slots:{default:[sf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ff(r){let e,n,t,l;const o=[H(qe),{sourceLayer:qe},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[af]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Je({props:s}),e.$on("click",cf);const f=[H(`${qe}-outline`),{sourceLayer:qe},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ke({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?ee(o,[u&0&&ie(H(qe)),u&0&&{sourceLayer:qe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?ee(f,[u&0&&ie(H(`${qe}-outline`)),u&0&&{sourceLayer:qe},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function uf(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:qe,$$slots:{right:[of],default:[nf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${qe}.pmtiles`,$$slots:{default:[ff]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let qe="parliamentary_constituencies";function cf(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function $f(r,e,n){let t=oe.parliamentary_constituencies,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class pf extends J{constructor(e){super(),K(this,e,$f,uf,Y,{})}}function mf(r){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _f(r){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gf(r){let e;return{c(){e=k(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function df(r){let e;return{c(){e=k(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hf(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y,O,T;return t=new Q({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[_f]},$$scope:{ctx:r}}}),u=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[gf]},$$scope:{ctx:r}}}),g=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[df]},$$scope:{ctx:r}}}),O=new De({}),{c(){e=C("p"),n=k("Most layers show air quality data from "),h(t.$$.fragment),l=k(`. The measurements are annual means, in units of
        µgm
        `),o=C("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),f=A(),i=C("p"),a=k("The noise layer is from "),h(u.$$.fragment),c=k(", using 2017 data. See their "),h(g.$$.fragment),d=k("."),y=A(),h(O.$$.fragment)},m(I,D){$(I,e,D),w(e,n),b(t,e,null),w(e,l),w(e,o),w(e,s),$(I,f,D),$(I,i,D),w(i,a),b(u,i,null),w(i,c),b(g,i,null),w(i,d),$(I,y,D),b(O,I,D),T=!0},p(I,D){const P={};D&2048&&(P.$$scope={dirty:D,ctx:I}),t.$set(P);const M={};D&2048&&(M.$$scope={dirty:D,ctx:I}),u.$set(M);const L={};D&2048&&(L.$$scope={dirty:D,ctx:I}),g.$set(L)},i(I){T||(m(t.$$.fragment,I),m(u.$$.fragment,I),m(g.$$.fragment,I),m(O.$$.fragment,I),T=!0)},o(I){_(t.$$.fragment,I),_(u.$$.fragment,I),_(g.$$.fragment,I),_(O.$$.fragment,I),T=!1},d(I){I&&(p(e),p(f),p(i),p(y)),v(t),v(u),v(g),v(O,I)}}}function bf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function dr(r){let e,n,t,l,o=r[3](r[0])+"",s,f,i,a,u,c,g,d,y,O,T,I,D;function P(S){r[7](S)}let M={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(M.value=r[0]),e=new At({props:M}),W.push(()=>V(e,"value",P));const L=[wf,vf],N=[];function E(S,F){return S[0]=="Noise"?0:1}return d=E(r),y=N[d]=L[d](r),{c(){h(e.$$.fragment),t=A(),l=C("p"),s=k(o),f=A(),i=C("div"),a=C("label"),u=k(`Opacity
      `),c=C("input"),g=A(),y.c(),O=Me(),U(c,"type","range"),U(c,"min","0"),U(c,"max","100")},m(S,F){b(e,S,F),$(S,t,F),$(S,l,F),w(l,s),$(S,f,F),$(S,i,F),w(i,a),w(a,u),w(a,c),Ye(c,r[2]),$(S,g,F),N[d].m(S,F),$(S,O,F),T=!0,I||(D=[at(c,"change",r[8]),at(c,"input",r[8])],I=!0)},p(S,F){const G={};!n&&F&1&&(n=!0,G.value=S[0],X(()=>n=!1)),e.$set(G),(!T||F&1)&&o!==(o=S[3](S[0])+"")&&B(s,o),F&4&&Ye(c,S[2]);let R=d;d=E(S),d===R?N[d].p(S,F):(ge(),_(N[R],1,1,()=>{N[R]=null}),de(),y=N[d],y?y.p(S,F):(y=N[d]=L[d](S),y.c()),m(y,1),y.m(O.parentNode,O))},i(S){T||(m(e.$$.fragment,S),m(y),T=!0)},o(S){_(e.$$.fragment,S),_(y),T=!1},d(S){S&&(p(t),p(l),p(f),p(i),p(g),p(O)),v(e,S),N[d].d(S),I=!1,il(D)}}}function vf(r){let e,n,t;return{c(){e=C("img"),Nn(e.src,n=r[5](r[0]))||U(e,"src",n),U(e,"width",150),U(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){$(l,e,o)},p(l,o){o&1&&!Nn(e.src,n=l[5](l[0]))&&U(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&U(e,"alt",t)},i:ne,o:ne,d(l){l&&p(e)}}}function wf(r){let e,n;return e=new Ke({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kf(r){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Ul({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&6?ee(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function yf(r){let e,n,t,l,o,s;function f(u){r[6](u)}let i={id:"pollution",$$slots:{right:[bf],default:[mf]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[1]&&dr(r);return o=new ro({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[kf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,g.checked=u[1],X(()=>n=!1)),e.$set(g),u[1]?a?(a.p(u,c),c&2&&m(a,1)):(a=dr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&1&&(d.tiles=[u[4](u[0])]),c&2054&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}function Sf(r,e,n){let t,l=!1,o=50,s="PM25_viridis";function f(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let O=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${f()}?bbox={bbox-epsg-3857}&${O}`}function u(y){let O=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${f()}?${O}`}function c(y){l=y,n(1,l)}function g(y){s=y,n(0,s)}function d(){o=Bt(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,l,o,i,a,u,c,g,d]}class Cf extends J{constructor(e){super(),K(this,e,Sf,yf,Y,{})}}function Tf(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Wards`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Of(r){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Af(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Of]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),l=k(", as of May 2023."),o=A(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Lf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Af]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function If(r){let e,n=r[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Pf(r){let e,n;return e=new ce({props:{$$slots:{default:[If,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mf(r){let e,n,t,l;const o=[H(We),{sourceLayer:We},{paint:{"fill-color":r[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Pf]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)s=x(s,o[a]);e=new Je({props:s}),e.$on("click",Ff);const f=[H(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ke({props:i}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?ee(o,[u&0&&ie(H(We)),u&0&&{sourceLayer:We},u&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};u&16&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const g=u&3?ee(f,[u&0&&ie(H(`${We}-outline`)),u&0&&{sourceLayer:We},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Nf(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:We,$$slots:{right:[Lf],default:[Tf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${We}.pmtiles`,$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let We="wards";function Ff(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Ef(r,e,n){let t=oe.wards,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Df extends J{constructor(e){super(),K(this,e,Ef,Nf,Y,{})}}function jf(r){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rf(r){let e,n,t,l;return t=new Q({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[jf]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("License: "),h(t.$$.fragment)},m(o,s){$(o,e,s),w(e,n),b(t,e,null),l=!0},p(o,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:o}),t.$set(f)},i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&p(e),v(t)}}}class rt extends J{constructor(e){super(),K(this,e,null,Rf,Y,{})}}function Bf(r){let e,n,t;return e=new Oe({props:{color:oe.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=k(`
  Bus routes`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Hf(r){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zf(r){let e,n,t,l,o,s,f,i,a;return o=new Q({props:{href:"https://gtfs.org",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=A(),t=C("p"),l=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),f=A(),h(i.$$.fragment)},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),w(t,l),b(o,t,null),w(t,s),$(u,f,c),b(i,u,c),a=!0},p(u,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:u}),o.$set(g)},i(u){a||(m(o.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(o.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(f)),v(o),v(i,u)}}}function Gf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[zf]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Uf(r){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qf(r){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wf(r){let e;function n(o,s){return o[2].has_bus_lane?qf:Uf}let t=n(r),l=t(r);return{c(){l.c(),e=Me()},m(o,s){l.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&p(e),l.d(o)}}}function Vf(r){let e,n;return e=new ce({props:{$$slots:{default:[Wf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xf(r){let e,n;const t=[H(gt),{sourceLayer:gt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],oe.bus_route_with_lane,oe.bus_route_without_lane],"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Vf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&1?ee(t,[s&0&&ie(H(gt)),s&0&&{sourceLayer:gt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yf(r){let e,n,t,l,o;function s(i){r[1](i)}let f={id:gt,$$slots:{right:[Gf],default:[Bf]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${gt}.pmtiles`,$$slots:{default:[Xf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let gt="bus_routes";function Qf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Jf extends J{constructor(e){super(),K(this,e,Qf,Yf,Y,{})}}function hr(r){const e=su(r[5]);r[6]=e[0],r[7]=e[1],r[8]=e[2]}function br(r,e,n){const t=r.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function Kf(r){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zf(r){let e,n,t,l,o,s,f,i;return f=new rt({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=A(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=A(),o=C("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=A(),h(f.$$.fragment)},m(a,u){$(a,e,u),$(a,n,u),$(a,t,u),$(a,l,u),$(a,o,u),$(a,s,u),b(f,a,u),i=!0},p:ne,i(a){i||(m(f.$$.fragment,a),i=!0)},o(a){_(f.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(l),p(o),p(s)),v(f,a)}}}function xf(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Zf]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function vr(r){let e,n,t;return n=new nt({props:{$$slots:{default:[tu]},$$scope:{ctx:r}}}),{c(){e=C("div"),h(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function eu(r){let e,n,t=r[9]+"",l,o,s;return e=new Oe({props:{color:r[10]}}),{c(){h(e.$$.fragment),n=A(),l=k(t),o=A()},m(f,i){b(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p:ne,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),v(e,f)}}}function wr(r){let e,n,t;function l(s){r[4](s,r[6])}let o={id:r[6],$$slots:{default:[eu]},$$scope:{ctx:r}};return r[1][r[6]]!==void 0&&(o.checked=r[1][r[6]]),e=new ae({props:o}),W.push(()=>V(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){r=s;const i={};f&8192&&(i.$$scope={dirty:f,ctx:r}),!n&&f&6&&(n=!0,i.checked=r[1][r[6]],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function tu(r){let e,n,t=Ee(r[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=wr(br(r,t,s));const o=s=>_(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=Me()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);$(s,e,f),n=!0},p(s,f){if(f&6){t=Ee(s[2]);let i;for(i=0;i<t.length;i+=1){const a=br(s,t,i);l[i]?(l[i].p(a,f),m(l[i],1)):(l[i]=wr(a),l[i].c(),m(l[i],1),l[i].m(e.parentNode,e))}for(ge(),i=t.length;i<l.length;i+=1)o(i);de()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)_(l[f]);n=!1},d(s){s&&p(e),Lt(l,s)}}}function nu(r){hr(r);let e,n=r[6]+"",t,l,o,s,f,i=r[7]+"",a,u,c,g,d=r[8]+"",y;return{c(){e=C("h2"),t=k(n),l=A(),o=C("p"),s=k("Direction: "),f=C("b"),a=A(),u=C("p"),c=k("Width: "),g=C("b"),y=k(d)},m(O,T){$(O,e,T),w(e,t),$(O,l,T),$(O,o,T),w(o,s),w(o,f),f.innerHTML=i,$(O,a,T),$(O,u,T),w(u,c),w(u,g),w(g,y)},p(O,T){hr(O),T&32&&n!==(n=O[6]+"")&&B(t,n),T&32&&i!==(i=O[7]+"")&&(f.innerHTML=i),T&32&&d!==(d=O[8]+"")&&B(y,d)},d(O){O&&(p(e),p(l),p(o),p(a),p(u))}}}function ru(r){let e,n;return e=new ce({props:{$$slots:{default:[nu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8224&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lu(r){let e,n;const t=[H(dt),{sourceLayer:dt},{paint:{"line-color":nn(["get","kind"],{track:oe.cycle_paths.track,lane:oe.cycle_paths.lane,shared_use_segregated:oe.cycle_paths.shared_use_segregated,shared_use_unsegregated:oe.cycle_paths.shared_use_unsegregated},"red"),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{filter:kr(r[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[ru]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),e.$on("click",iu),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?ee(t,[s&0&&ie(H(dt)),s&0&&{sourceLayer:dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:kr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ou(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:dt,$$slots:{right:[xf],default:[Kf]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&vr(r);return o=new we({props:{url:`pmtiles://${be()}/v1/${dt}.pmtiles`,$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=vr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&8195&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let dt="cycle_paths";function su(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function iu(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function kr(r){let e=Object.keys(r).filter(n=>r[n]);return["in",["get","kind"],["literal",e]]}function au(r,e,n){let t=[["track","Separated tracks",oe.cycle_paths.track],["lane","Unprotected lanes",oe.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",oe.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",oe.cycle_paths.shared_use_unsegregated]],l=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){l=i,n(0,l)}function f(i,a){r.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[l,o,t,s,f]}class fu extends J{constructor(e){super(),K(this,e,au,ou,Y,{})}}function uu(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Major Road Network`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function cu(r){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $u(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[cu]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=C("p"),n=k("Data from the "),h(t.$$.fragment),l=k(", as of September 2021."),o=A(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function pu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[$u]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function mu(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&B(t,n)},d(l){l&&p(e)}}}function _u(r){let e,n;return e=new ce({props:{$$slots:{default:[mu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gu(r){let e,n;const t=[H(ht),{sourceLayer:ht},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[_u]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?ee(t,[s&0&&ie(H(ht)),s&0&&{sourceLayer:ht},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function du(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:ht,$$slots:{right:[pu],default:[uu]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${ht}.pmtiles`,$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let ht="mrn";function hu(r,e,n){let t=oe.mrn,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class bu extends J{constructor(e){super(),K(this,e,hu,du,Y,{})}}function vu(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  National Cycle Network`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function wu(r){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ku(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[wu]},$$scope:{ctx:r}}}),s=new De({}),{c(){e=C("p"),n=k("Data from Sustrans about the "),h(t.$$.fragment),l=k(", downloaded on 22/01/2024."),o=A(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function yu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[ku]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function yr(r){let e,n,t,l=r[3].Desc_+"",o;return{c(){e=C("li"),n=k("Description: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].Desc_+"")&&B(o,l)},d(s){s&&p(e)}}}function Sr(r){let e,n,t,l=r[3].Greenway+"",o;return{c(){e=C("li"),n=k("Is greenway: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].Greenway+"")&&B(o,l)},d(s){s&&p(e)}}}function Cr(r){let e,n,t,l=r[3].RouteType+"",o;return{c(){e=C("li"),n=k("Route type: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteType+"")&&B(o,l)},d(s){s&&p(e)}}}function Tr(r){let e,n,t,l=r[3].RouteNo+"",o;return{c(){e=C("li"),n=k("Route number: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteNo+"")&&B(o,l)},d(s){s&&p(e)}}}function Or(r){let e,n,t,l=r[3].RouteCat+"",o;return{c(){e=C("li"),n=k("Route Category: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].RouteCat+"")&&B(o,l)},d(s){s&&p(e)}}}function Ar(r){let e,n,t,l=r[3].OpenStatus+"",o;return{c(){e=C("li"),n=k("Open Status: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].OpenStatus+"")&&B(o,l)},d(s){s&&p(e)}}}function Lr(r){let e,n,t,l=r[3].Surface+"",o;return{c(){e=C("li"),n=k("Surface: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].Surface+"")&&B(o,l)},d(s){s&&p(e)}}}function Ir(r){let e,n,t,l=r[3].Quality+"",o;return{c(){e=C("li"),n=k("Quality: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].Quality+"")&&B(o,l)},d(s){s&&p(e)}}}function Pr(r){let e,n,t,l=r[3].RoadClass+"",o;return{c(){e=C("li"),n=k("Road Class: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=s[3].RoadClass+"")&&B(o,l)},d(s){s&&p(e)}}}function Su(r){let e,n,t,l,o,s,f,i,a,u=r[3].Desc_&&yr(r),c=r[3].Greenway&&Sr(r),g=r[3].RouteType&&Cr(r),d=r[3].RouteNo&&Tr(r),y=r[3].RouteCat&&Or(r),O=r[3].OpenStatus&&Ar(r),T=r[3].Surface&&Lr(r),I=r[3].Quality&&Ir(r),D=r[3].RoadClass&&Pr(r);return{c(){e=C("ul"),u&&u.c(),n=A(),c&&c.c(),t=A(),g&&g.c(),l=A(),d&&d.c(),o=A(),y&&y.c(),s=A(),O&&O.c(),f=A(),T&&T.c(),i=A(),I&&I.c(),a=A(),D&&D.c()},m(P,M){$(P,e,M),u&&u.m(e,null),w(e,n),c&&c.m(e,null),w(e,t),g&&g.m(e,null),w(e,l),d&&d.m(e,null),w(e,o),y&&y.m(e,null),w(e,s),O&&O.m(e,null),w(e,f),T&&T.m(e,null),w(e,i),I&&I.m(e,null),w(e,a),D&&D.m(e,null)},p(P,M){P[3].Desc_?u?u.p(P,M):(u=yr(P),u.c(),u.m(e,n)):u&&(u.d(1),u=null),P[3].Greenway?c?c.p(P,M):(c=Sr(P),c.c(),c.m(e,t)):c&&(c.d(1),c=null),P[3].RouteType?g?g.p(P,M):(g=Cr(P),g.c(),g.m(e,l)):g&&(g.d(1),g=null),P[3].RouteNo?d?d.p(P,M):(d=Tr(P),d.c(),d.m(e,o)):d&&(d.d(1),d=null),P[3].RouteCat?y?y.p(P,M):(y=Or(P),y.c(),y.m(e,s)):y&&(y.d(1),y=null),P[3].OpenStatus?O?O.p(P,M):(O=Ar(P),O.c(),O.m(e,f)):O&&(O.d(1),O=null),P[3].Surface?T?T.p(P,M):(T=Lr(P),T.c(),T.m(e,i)):T&&(T.d(1),T=null),P[3].Quality?I?I.p(P,M):(I=Ir(P),I.c(),I.m(e,a)):I&&(I.d(1),I=null),P[3].RoadClass?D?D.p(P,M):(D=Pr(P),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(P){P&&p(e),u&&u.d(),c&&c.d(),g&&g.d(),d&&d.d(),y&&y.d(),O&&O.d(),T&&T.d(),I&&I.d(),D&&D.d()}}}function Cu(r){let e,n;return e=new ce({props:{$$slots:{default:[Su,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Tu(r){let e,n;const t=[H(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Cu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?ee(t,[s&0&&ie(H(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ou(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:bt,$$slots:{right:[yu],default:[vu]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${bt}.pmtiles`,$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let bt="national_cycle_network";function Au(r,e,n){let t=oe.national_cycle_network,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Lu extends J{constructor(e){super(),K(this,e,Au,Ou,Y,{})}}function Iu(r){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pu(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mu(r){let e,n,t,l,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Pu]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=A(),t=C("p"),t.textContent="Data valid as of 1 January, 2024",l=A(),o=C("p"),s=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),w(o,s),b(f,o,null),w(o,i),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),f.$set(g)},i(u){a||(m(f.$$.fragment,u),a=!0)},o(u){_(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),v(f)}}}function Nu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Mu]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Mr(r){let e,n;return e=new Ke({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fu(r){let e,n,t,l=r[4].side+"",o,s,f,i,a,u=r[4].average+"",c,g,d,y,O,T,I=r[4].minimum+"",D,P;return{c(){e=C("p"),n=k("Side of the road: "),t=C("b"),o=k(l),s=A(),f=C("p"),i=k("Average width: "),a=C("b"),c=k(u),g=k(`
        meters`),d=A(),y=C("p"),O=k("Minimum width: "),T=C("b"),D=k(I),P=k(`
        meters`)},m(M,L){$(M,e,L),w(e,n),w(e,t),w(t,o),$(M,s,L),$(M,f,L),w(f,i),w(f,a),w(a,c),w(f,g),$(M,d,L),$(M,y,L),w(y,O),w(y,T),w(T,D),w(y,P)},p(M,L){L&16&&l!==(l=M[4].side+"")&&B(o,l),L&16&&u!==(u=M[4].average+"")&&B(c,u),L&16&&I!==(I=M[4].minimum+"")&&B(D,I)},d(M){M&&(p(e),p(s),p(f),p(d),p(y))}}}function Eu(r){let e,n;return e=new ce({props:{$$slots:{default:[Fu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Du(r){let e,n;const t=[H(vt),{sourceLayer:vt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get","average"],r[2],r[1]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Eu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&7?ee(t,[s&0&&ie(H(vt)),s&0&&{sourceLayer:vt},t[2],t[3],s&6&&{paint:{"line-color":ye(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ju(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:vt,$$slots:{right:[Nu],default:[Iu]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&Mr(r);return o=new we({props:{url:`pmtiles://${rn()}/v1/${vt}.pmtiles`,$$slots:{default:[Du]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=Mr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&33&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let vt="pavement_widths";function Ru(r,e,n){let t=oe.sequential_low_to_high,l=[0,2,4,6,8,13],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class Bu extends J{constructor(e){super(),K(this,e,Ru,ju,Y,{})}}function Hu(r){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zu(r){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gu(r){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uu(r){let e,n,t,l,o,s,f,i,a,u,c;return f=new Q({props:{href:"https://www.pct.bike",$$slots:{default:[zu]},$$scope:{ctx:r}}}),a=new Q({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Gu]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=A(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=A(),o=C("p"),s=k("See "),h(f.$$.fragment),i=k(" and "),h(a.$$.fragment),u=k(" for details on methodology and data sources.")},m(g,d){$(g,e,d),$(g,n,d),$(g,t,d),$(g,l,d),$(g,o,d),w(o,s),b(f,o,null),w(o,i),b(a,o,null),w(o,u),c=!0},p(g,d){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),f.$set(y);const O={};d&1024&&(O.$$scope={dirty:d,ctx:g}),a.$set(O)},i(g){c||(m(f.$$.fragment,g),m(a.$$.fragment,g),c=!0)},o(g){_(f.$$.fragment,g),_(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(l),p(o)),v(f),v(a)}}}function qu(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Nr(r){let e,n,t,l,o,s,f,i;e=new Ke({props:{colorScale:r[3],limits:r[4]}});function a(d){r[7](d)}let u={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(u.value=r[0]),t=new al({props:u}),W.push(()=>V(t,"value",a));function c(d){r[8](d)}let g={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(g.value=r[1]),s=new At({props:g}),W.push(()=>V(s,"value",c)),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),o=A(),h(s.$$.fragment)},m(d,y){b(e,d,y),$(d,n,y),b(t,d,y),$(d,o,y),b(s,d,y),i=!0},p(d,y){const O={};!l&&y&1&&(l=!0,O.value=d[0],X(()=>l=!1)),t.$set(O);const T={};!f&&y&2&&(f=!0,T.value=d[1],X(()=>f=!1)),s.$set(T)},i(d){i||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(s.$$.fragment,d),i=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(s.$$.fragment,d),i=!1},d(d){d&&(p(n),p(o)),v(e,d),v(t,d),v(s,d)}}}function Wu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new jt(!1),t=Me(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Vu(r){let e,n;return e=new ce({props:{$$slots:{default:[Wu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xu(r){let e,n;const t=[H(Ve),{sourceLayer:Ve},{paint:{"line-color":ye(["get",r[1]],r[4],r[3]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ve?"visible":"none"}}];let l={$$slots:{default:[Vu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&31?ee(t,[s&0&&ie(H(Ve)),s&0&&{sourceLayer:Ve},s&26&&{paint:{"line-color":ye(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==Ve?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yu(r){let e,n=r[5](r[9])+"",t;return{c(){e=new jt(!1),t=Me(),e.a=t},m(l,o){e.m(n,l,o),$(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(p(t),e.d())}}}function Qu(r){let e,n;return e=new ce({props:{$$slots:{default:[Yu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ju(r){let e,n;const t=[H(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get",r[1]],r[4],r[3]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[2]&&r[0]==ft?"visible":"none"}}];let l={$$slots:{default:[Qu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&31?ee(t,[s&0&&ie(H(ft)),s&0&&{sourceLayer:ft},t[2],t[3],s&26&&{paint:{"line-color":ye(["get",o[1]],o[4],o[3]),"line-width":ze,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ft?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ku(r){let e,n,t,l,o,s,f,i;function a(g){r[6](g)}let u={id:Ve,$$slots:{right:[qu],default:[Hu]},$$scope:{ctx:r}};r[2]!==void 0&&(u.checked=r[2]),e=new ae({props:u}),W.push(()=>V(e,"checked",a));let c=r[2]&&Nr(r);return o=new we({props:{url:`pmtiles://${be()}/v1/${Ve}.pmtiles`,$$slots:{default:[Xu]},$$scope:{ctx:r}}}),f=new we({props:{url:`pmtiles://${be()}/v1/${ft}.pmtiles`,$$slots:{default:[Ju]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),c&&c.c(),l=A(),h(o.$$.fragment),s=A(),h(f.$$.fragment)},m(g,d){b(e,g,d),$(g,t,d),c&&c.m(g,d),$(g,l,d),b(o,g,d),$(g,s,d),b(f,g,d),i=!0},p(g,[d]){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),!n&&d&4&&(n=!0,y.checked=g[2],X(()=>n=!1)),e.$set(y),g[2]?c?(c.p(g,d),d&4&&m(c,1)):(c=Nr(g),c.c(),m(c,1),c.m(l.parentNode,l)):c&&(ge(),_(c,1,1,()=>{c=null}),de());const O={};d&1031&&(O.$$scope={dirty:d,ctx:g}),o.$set(O);const T={};d&1031&&(T.$$scope={dirty:d,ctx:g}),f.$set(T)},i(g){i||(m(e.$$.fragment,g),m(c),m(o.$$.fragment,g),m(f.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(f.$$.fragment,g),i=!1},d(g){g&&(p(t),p(l),p(s)),v(e,g),c&&c.d(g),v(o,g),v(f,g)}}}let Ve="pct_commute",ft="pct_school";function Zu(r,e,n){let t=oe.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Ve,s="baseline",f=!1;function i(g){let d=g.baseline,y=g.gov_target,O=g.go_dutch,T=`<h2>Trip purpose: ${o==Ve?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)T+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${O.toLocaleString()}</b></p>`;else{let I=(y/d).toFixed(1),D=(O/d).toFixed(1);T+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${O.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return T}function a(g){f=g,n(2,f)}function u(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,f,t,l,i,a,u,c]}class xu extends J{constructor(e){super(),K(this,e,Zu,Ku,Y,{})}}function ec(r){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tc(r){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nc(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rc(r){let e,n,t,l,o,s,f,i,a,u,c,g;return t=new Q({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[tc]},$$scope:{ctx:r}}}),u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=A(),s=C("p"),s.textContent="Data valid as of 1 September, 2023",f=A(),i=C("p"),a=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),c=k(".")},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,l),$(d,o,y),$(d,s,y),$(d,f,y),$(d,i,y),w(i,a),b(u,i,null),w(i,c),g=!0},p(d,y){const O={};y&256&&(O.$$scope={dirty:y,ctx:d}),t.$set(O);const T={};y&256&&(T.$$scope={dirty:y,ctx:d}),u.$set(T)},i(d){g||(m(t.$$.fragment,d),m(u.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(u.$$.fragment,d),g=!1},d(d){d&&(p(e),p(o),p(s),p(f),p(i)),v(t),v(u)}}}function lc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Fr(r){let e,n,t,l,o;e=new Ke({props:{colorScale:r[2],limits:r[3]}});function s(i){r[6](i)}let f={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(f.value=r[0]),t=new al({props:f}),W.push(()=>V(t,"value",s)),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const u={};!l&&a&1&&(l=!0,u.value=i[0],X(()=>l=!1)),t.$set(u)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function oc(r){let e,n,t=r[7].indicative_mph+"",l,o,s,f,i,a=r[7].highest_mph+"",u,c,g=r[4][r[7].highest_description]+"",d,y;return{c(){e=C("p"),n=k("Posted speed limit: "),l=k(t),o=k(" mph"),s=A(),f=C("p"),i=k("Highest average speed: "),u=k(a),c=k(" mph (during "),d=k(g),y=k(")")},m(O,T){$(O,e,T),w(e,n),w(e,l),w(e,o),$(O,s,T),$(O,f,T),w(f,i),w(f,u),w(f,c),w(f,d),w(f,y)},p(O,T){T&128&&t!==(t=O[7].indicative_mph+"")&&B(l,t),T&128&&a!==(a=O[7].highest_mph+"")&&B(u,a),T&128&&g!==(g=O[4][O[7].highest_description]+"")&&B(d,g)},d(O){O&&(p(e),p(s),p(f))}}}function sc(r){let e,n;return e=new ce({props:{$$slots:{default:[oc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ic(r){let e,n;const t=[H(wt),{sourceLayer:wt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get",r[0]],r[3],r[2]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[sc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&15?ee(t,[s&0&&ie(H(wt)),s&0&&{sourceLayer:wt},t[2],t[3],s&13&&{paint:{"line-color":ye(["get",o[0]],o[3],o[2]),"line-width":ze,"line-opacity":Z(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ac(r){let e,n,t,l,o,s;function f(u){r[5](u)}let i={id:wt,$$slots:{right:[lc],default:[ec]},$$scope:{ctx:r}};r[1]!==void 0&&(i.checked=r[1]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[1]&&Fr(r);return o=new we({props:{url:`pmtiles://${rn()}/v1/${wt}.pmtiles`,$$slots:{default:[ic]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:u}),!n&&c&2&&(n=!0,g.checked=u[1],X(()=>n=!1)),e.$set(g),u[1]?a?(a.p(u,c),c&2&&m(a,1)):(a=Fr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&259&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let wt="road_speeds";function fc(r,e,n){let t=oe.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",s=!1,f={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(u){s=u,n(1,s)}function a(u){o=u,n(0,o)}return[o,s,t,l,f,i,a]}class uc extends J{constructor(e){super(),K(this,e,fc,ac,Y,{})}}function cc(r){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $c(r){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pc(r){let e,n,t,l,o,s,f,i,a;return f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=A(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",l=A(),o=C("p"),s=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),i=k(".")},m(u,c){$(u,e,c),$(u,n,c),$(u,t,c),$(u,l,c),$(u,o,c),w(o,s),b(f,o,null),w(o,i),a=!0},p(u,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),f.$set(g)},i(u){a||(m(f.$$.fragment,u),a=!0)},o(u){_(f.$$.fragment,u),a=!1},d(u){u&&(p(e),p(n),p(t),p(l),p(o)),v(f)}}}function mc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[pc]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Er(r){let e,n;return e=new Ke({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _c(r){let e,n,t,l=r[4].average+"",o,s,f,i,a,u,c=r[4].minimum+"",g,d;return{c(){e=C("p"),n=k("Average width: "),t=C("b"),o=k(l),s=k(`
        meters`),f=A(),i=C("p"),a=k("Minimum width: "),u=C("b"),g=k(c),d=k(`
        meters`)},m(y,O){$(y,e,O),w(e,n),w(e,t),w(t,o),w(e,s),$(y,f,O),$(y,i,O),w(i,a),w(i,u),w(u,g),w(i,d)},p(y,O){O&16&&l!==(l=y[4].average+"")&&B(o,l),O&16&&c!==(c=y[4].minimum+"")&&B(g,c)},d(y){y&&(p(e),p(f),p(i))}}}function gc(r){let e,n;return e=new ce({props:{$$slots:{default:[_c,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dc(r){let e,n;const t=[H(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ye(["get","average"],r[2],r[1]),"line-width":ze,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[gc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&7?ee(t,[s&0&&ie(H(kt)),s&0&&{sourceLayer:kt},t[2],t[3],s&6&&{paint:{"line-color":ye(["get","average"],o[2],o[1]),"line-width":ze,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function hc(r){let e,n,t,l,o,s;function f(u){r[3](u)}let i={id:kt,$$slots:{right:[mc],default:[cc]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&Er(r);return o=new we({props:{url:`pmtiles://${rn()}/v1/${kt}.pmtiles`,$$slots:{default:[dc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=Er(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&33&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let kt="road_widths";function bc(r,e,n){let t=oe.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function s(f){o=f,n(0,o)}return[o,t,l,s]}class vc extends J{constructor(e){super(),K(this,e,bc,hc,Y,{})}}function wc(r){let e,n,t;return e=new Oe({props:{color:oe.trams}}),{c(){h(e.$$.fragment),n=k(`
  Trams`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function kc(r){let e,n,t,l;return t=new rt({}),{c(){e=C("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=A(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),l=!0},p:ne,i(o){l||(m(t.$$.fragment,o),l=!0)},o(o){_(t.$$.fragment,o),l=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function yc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[kc]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Sc(r){let e,n;const t=[H(yt),{sourceLayer:yt},{paint:{"line-color":oe.trams,"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new ke({props:l}),e.$on("click",Tc),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&1?ee(t,[s&0&&ie(H(yt)),s&0&&{sourceLayer:yt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Cc(r){let e,n,t,l,o;function s(i){r[1](i)}let f={id:yt,$$slots:{right:[yc],default:[wc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${yt}.pmtiles`,$$slots:{default:[Sc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&4&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let yt="trams";function Tc(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Oc(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class Ac extends J{constructor(e){super(),K(this,e,Oc,Cc,Y,{})}}function Lc(r){let e,n,t;return{c(){e=C("input"),U(e,"class","govuk-file-upload"),U(e,"id","load-criticals"),U(e,"type","file")},m(l,o){$(l,e,o),r[7](e),n||(t=at(e,"change",r[5]),n=!0)},p:ne,d(l){l&&p(e),r[7](null),n=!1,t()}}}function Dr(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[Pc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ic(r){let e,n,t=r[2].toLocaleString()+"",l,o,s;return e=new Oe({props:{color:Dt}}),{c(){h(e.$$.fragment),n=k(`
        Show `),l=k(t),o=k(" issues")},m(f,i){b(e,f,i),$(f,n,i),$(f,l,i),$(f,o,i),s=!0},p(f,i){(!s||i&4)&&t!==(t=f[2].toLocaleString()+"")&&B(l,t)},i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l),p(o)),v(e,f)}}}function Pc(r){let e,n,t;function l(s){r[8](s)}let o={id:"show-criticals",$$slots:{default:[Ic]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new ae({props:o}),W.push(()=>V(e,"checked",l)),{c(){h(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f&2052&&(i.$$scope={dirty:f,ctx:s}),!n&&f&2&&(n=!0,i.checked=s[1],X(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Mc(r){let e,n,t,l,o,s;e=new $n({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[Lc]},$$scope:{ctx:r}}}),t=new fl({props:{errorMessage:r[3]}});let f=r[2]>0&&Dr(r);return{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),f&&f.c(),o=Me()},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,l,a),f&&f.m(i,a),$(i,o,a),s=!0},p(i,a){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?f?(f.p(i,a),a&4&&m(f,1)):(f=Dr(i),f.c(),m(f,1),f.m(o.parentNode,o)):f&&(ge(),_(f,1,1,()=>{f=null}),de())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(f),s=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(f),s=!1},d(i){i&&(p(n),p(l),p(o)),v(e,i),v(t,i),f&&f.d(i)}}}function Nc(r){let e,n,t=r[10].critical_type+"",l,o,s,f,i,a=r[10].location_description+"",u,c,g,d,y,O=r[10].notes+"",T,I,D,P,M,L,N,E=r[10].id+"",S,F,G,R,j,z=(r[10].inspector??"???")+"",q,te,re,ue=r[10].submission_time+"",Le,Te,se,Ae,fe,$e=r[10].scheme_reference+"",pe,je,Ne,Se=r[10].current_design_stage+"",Ze;return{c(){e=C("div"),n=C("h2"),l=k(t),o=A(),s=C("p"),f=C("u"),f.textContent="Location",i=k(`
          : `),u=k(a),c=A(),g=C("p"),d=C("u"),d.textContent="Notes",y=k(`
          : `),T=k(O),I=A(),D=C("hr"),P=A(),M=C("p"),L=k("Critical issue ID: "),N=C("b"),S=k(E),F=A(),G=C("p"),R=k("Submitted by "),j=C("b"),q=k(z),te=k(`
          at
          `),re=C("b"),Le=k(ue),Te=A(),se=C("p"),Ae=k("For scheme "),fe=C("b"),pe=k($e),je=k(`
          in stage
          `),Ne=C("b"),Ze=k(Se),Ce(e,"max-width","30vw")},m(le,he){$(le,e,he),w(e,n),w(n,l),w(e,o),w(e,s),w(s,f),w(s,i),w(s,u),w(e,c),w(e,g),w(g,d),w(g,y),w(g,T),w(e,I),w(e,D),w(e,P),w(e,M),w(M,L),w(M,N),w(N,S),w(e,F),w(e,G),w(G,R),w(G,j),w(j,q),w(G,te),w(G,re),w(re,Le),w(e,Te),w(e,se),w(se,Ae),w(se,fe),w(fe,pe),w(se,je),w(se,Ne),w(Ne,Ze)},p(le,he){he&1024&&t!==(t=le[10].critical_type+"")&&B(l,t),he&1024&&a!==(a=le[10].location_description+"")&&B(u,a),he&1024&&O!==(O=le[10].notes+"")&&B(T,O),he&1024&&E!==(E=le[10].id+"")&&B(S,E),he&1024&&z!==(z=(le[10].inspector??"???")+"")&&B(q,z),he&1024&&ue!==(ue=le[10].submission_time+"")&&B(Le,ue),he&1024&&$e!==($e=le[10].scheme_reference+"")&&B(pe,$e),he&1024&&Se!==(Se=le[10].current_design_stage+"")&&B(Ze,Se)},d(le){le&&p(e)}}}function Fc(r){let e,n;return e=new ce({props:{$$slots:{default:[Nc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ec(r){let e,n,t,l,o,s;const f=[H(`${ot}-clusters`),{applyToClusters:!0},{paint:{"circle-color":Dt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let d=0;d<f.length;d+=1)i=x(i,f[d]);e=new tt({props:i}),e.$on("click",r[6]);const a=[H(`${ot}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let u={};for(let d=0;d<a.length;d+=1)u=x(u,a[d]);t=new io({props:u});const c=[H(`${ot}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Dt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let g={$$slots:{default:[Fc]},$$scope:{ctx:r}};for(let d=0;d<c.length;d+=1)g=x(g,c[d]);return o=new tt({props:g}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment)},m(d,y){b(e,d,y),$(d,n,y),b(t,d,y),$(d,l,y),b(o,d,y),s=!0},p(d,y){const O=y&2?ee(f,[y&0&&ie(H(`${ot}-clusters`)),f[1],y&0&&{paint:{"circle-color":Dt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:d[1]?"visible":"none"}},f[4]]):{};e.$set(O);const T=y&2?ee(a,[y&0&&ie(H(`${ot}-counts`)),a[1],y&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(T);const I=y&2?ee(c,[y&0&&ie(H(`${ot}-points`)),c[1],c[2],c[3],y&0&&{paint:{"circle-color":Dt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};y&2048&&(I.$$scope={dirty:y,ctx:d}),o.$set(I)},i(d){s||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(o.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),s=!1},d(d){d&&(p(n),p(l)),v(e,d),v(t,d),v(o,d)}}}function Dc(r){let e,n,t,l;return e=new Fe({props:{label:"Critical Issues",$$slots:{default:[Mc]},$$scope:{ctx:r}}}),t=new Mt({props:{id:ot,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[Ec]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,[s]){const f={};s&2063&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let ot="criticals",Dt="red";function jc(r,e,n){let t;ve(r,yn,d=>n(9,t=d));let l,o=!0,s=0,f="",i=Ml();async function a(d){try{n(4,i=await pi(l.files[0])),n(2,s=i.features.length),n(3,f="")}catch(y){n(3,f=`The file you loaded is broken: ${y}`)}}function u(d){t.getSource(ot).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id,(y,O)=>{y||t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:O})})}function c(d){W[d?"unshift":"push"](()=>{l=d,n(0,l)})}function g(d){o=d,n(1,o)}return[l,o,s,f,i,a,u,c,g]}class Rc extends J{constructor(e){super(),K(this,e,jc,Dc,Y,{})}}function Bc(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Crossings`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Hc(r){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zc(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Hc]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=A(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Gc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[zc]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Uc(r){let e,n=jr(r[3])+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=jr(l[3])+"")&&B(t,n)},d(l){l&&p(e)}}}function qc(r){let e,n;return e=new ce({props:{$$slots:{default:[Uc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wc(r){let e,n;const t=[H(St),{sourceLayer:St},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[qc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new tt({props:l}),e.$on("click",Xc),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?ee(t,[s&0&&ie(H(St)),s&0&&{sourceLayer:St},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Vc(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:St,$$slots:{right:[Gc],default:[Bc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${St}.pmtiles`,$$slots:{default:[Wc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let St="crossings";function jr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Xc(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Yc(r,e,n){let t=oe.crossings,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class Qc extends J{constructor(e){super(),K(this,e,Yc,Vc,Y,{})}}function Jc(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Cycle parking`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function Kc(r){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zc(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Kc]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("Cycle parking, according to "),h(t.$$.fragment),l=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=A(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function xc(r){let e,n,t;return n=new _e({props:{$$slots:{default:[Zc]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function e$(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=C("p"),n=k("Capacity: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8&&l!==(l=(s[3].capacity??"unknown")+"")&&B(o,l)},d(s){s&&p(e)}}}function t$(r){let e,n;return e=new ce({props:{$$slots:{default:[e$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function n$(r){let e,n;const t=[H(Ct),{sourceLayer:Ct},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[t$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new tt({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?ee(t,[s&0&&ie(H(Ct)),s&0&&{sourceLayer:Ct},s&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function r$(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:Ct,$$slots:{right:[xc],default:[Jc]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${Ct}.pmtiles`,$$slots:{default:[n$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let Ct="cycle_parking";function l$(r,e,n){let t=oe.cycle_parking,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class o$ extends J{constructor(e){super(),K(this,e,l$,r$,Y,{})}}function s$(r){let e,n,t,l;return e=new Oe({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=A(),t=k(r[2])},m(o,s){b(e,o,s),$(o,n,s),$(o,t,s),l=!0},p(o,s){(!l||s&4)&&B(t,o[2])},i(o){l||(m(e.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),l=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function i$(r){let e;const n=r[5].default,t=Gt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&Ut(t,n,l,l[7],e?Wt(n,l[7],o,null):qt(l[7]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function a$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[i$]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function f$(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&B(t,n)},d(l){l&&p(e)}}}function u$(r){let e,n;return e=new ce({props:{$$slots:{default:[f$,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function c$(r){let e,n;const t=[H(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":Z(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[u$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&25?ee(t,[s&1&&ie(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Z(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function $$(r){let e,n,t,l,o;function s(i){r[6](i)}let f={id:r[0],$$slots:{right:[a$],default:[s$]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.checked=r[3]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new we({props:{url:`pmtiles://${be()}/v1/${r[0]}.pmtiles`,$$slots:{default:[c$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&1&&(u.id=i[0]),a&132&&(u.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,u.checked=i[3],X(()=>n=!1)),e.$set(u);const c={};a&1&&(c.url=`pmtiles://${be()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}function p$(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:f}=e,i=oe[o],a=!1;function u(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,f=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,s,f,a,i,t,u,l]}class Tn extends J{constructor(e){super(),K(this,e,p$,$$,Y,{name:0,singularNoun:1,pluralNoun:2})}}function m$(r){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[m$]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),l=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=A(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function g$(r){let e,n;return e=new Tn({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[_$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class d$ extends J{constructor(e){super(),K(this,e,null,g$,Y,{})}}function h$(r){let e,n,t;return e=new Oe({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=k(`
  Railway Stations`)},m(l,o){b(e,l,o),$(l,n,o),t=!0},p:ne,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&p(n),v(e,l)}}}function b$(r){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function v$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[b$]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),l=k(" data from OpenStreetMap (as of 9 August 2023)."),o=A(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function w$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[v$]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function k$(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&B(t,n)},d(l){l&&p(e)}}}function y$(r){let e,n;return e=new ce({props:{$$slots:{default:[k$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function S$(r){let e,n;const t=[H(tn),{paint:{"circle-color":r[1],"circle-radius":Zt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[y$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new tt({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&3?ee(t,[s&0&&ie(H(tn)),s&2&&{paint:{"circle-color":o[1],"circle-radius":Zt/2}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function C$(r){let e,n,t,l,o;function s(i){r[2](i)}let f={id:tn,$$slots:{right:[w$],default:[h$]},$$scope:{ctx:r}};return r[0]!==void 0&&(f.checked=r[0]),e=new ae({props:f}),W.push(()=>V(e,"checked",s)),l=new Mt({props:{data:`${be()}/v1/${tn}.geojson`,$$slots:{default:[S$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.checked=i[0],X(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}let tn="railway_stations";function T$(r,e,n){let t=oe.railway_stations,l=!1;function o(s){l=s,n(0,l)}return[l,t,o]}class O$ extends J{constructor(e){super(),K(this,e,T$,C$,Y,{})}}function A$(r){let e;return{c(){e=k("primary and secondary schools")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function L$(r){let e,n,t,l,o,s,f;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[A$]},$$scope:{ctx:r}}}),s=new rt({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),l=k(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=A(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,l),$(i,o,a),b(s,i,a),f=!0},p(i,a){const u={};a&1&&(u.$$scope={dirty:a,ctx:i}),t.$set(u)},i(i){f||(m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function I$(r){let e,n;return e=new Tn({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[L$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class P$ extends J{constructor(e){super(),K(this,e,null,I$,Y,{})}}function M$(r){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function N$(r){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function F$(r){let e,n,t,l,o,s,f,i,a;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[M$]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[N$]},$$scope:{ctx:r}}}),i=new rt({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),l=k(" and "),h(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),f=A(),h(i.$$.fragment)},m(u,c){$(u,e,c),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),$(u,f,c),b(i,u,c),a=!0},p(u,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:u}),t.$set(g);const d={};c&1&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){a||(m(t.$$.fragment,u),m(o.$$.fragment,u),m(i.$$.fragment,u),a=!0)},o(u){_(t.$$.fragment,u),_(o.$$.fragment,u),_(i.$$.fragment,u),a=!1},d(u){u&&(p(e),p(f)),v(t),v(o),v(i,u)}}}function E$(r){let e,n;return e=new Tn({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[F$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class D$ extends J{constructor(e){super(),K(this,e,null,E$,Y,{})}}function j$(r){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function R$(r){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function B$(r){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function H$(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y,O,T,I,D,P,M,L,N,E;return t=new Q({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[R$]},$$scope:{ctx:r}}}),I=new Q({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[B$]},$$scope:{ctx:r}}}),N=new De({}),{c(){e=C("p"),n=k("This layer shows collisions recorded in the "),h(t.$$.fragment),l=k(" dataset. Please note these limitations:"),o=A(),s=C("ul"),f=C("li"),f.textContent="Only collisions between 2017 and 2022 are included",i=A(),a=C("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,u=A(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=A(),d=C("li"),d.textContent='The "pedestrians" category also include mobility scooters',y=A(),O=C("li"),T=k("All limitations "),h(I.$$.fragment),D=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),P=A(),M=C("p"),M.textContent="You can click a point to open the full report, thanks to CycleStreets.",L=A(),h(N.$$.fragment)},m(S,F){$(S,e,F),w(e,n),b(t,e,null),w(e,l),$(S,o,F),$(S,s,F),w(s,f),w(s,i),w(s,a),w(s,u),w(s,c),w(s,g),w(s,d),w(s,y),w(s,O),w(O,T),b(I,O,null),w(O,D),$(S,P,F),$(S,M,F),$(S,L,F),b(N,S,F),E=!0},p(S,F){const G={};F&16777216&&(G.$$scope={dirty:F,ctx:S}),t.$set(G);const R={};F&16777216&&(R.$$scope={dirty:F,ctx:S}),I.$set(R)},i(S){E||(m(t.$$.fragment,S),m(I.$$.fragment,S),m(N.$$.fragment,S),E=!0)},o(S){_(t.$$.fragment,S),_(I.$$.fragment,S),_(N.$$.fragment,S),E=!1},d(S){S&&(p(e),p(o),p(s),p(P),p(M),p(L)),v(t),v(I),v(N,S)}}}function z$(r){let e,n,t;return n=new _e({props:{$$slots:{default:[H$]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Rr(r){let e,n,t,l,o,s,f,i,a,u,c,g,d;return n=new nt({props:{small:!0,$$slots:{default:[V$]},$$scope:{ctx:r}}}),u=new ul({props:{rows:r[14]}}),{c(){e=C("div"),h(n.$$.fragment),t=A(),l=C("div"),o=k(`Filter years:
      `),s=C("input"),f=k(`
      -
      `),i=C("input"),a=A(),h(u.$$.fragment),U(s,"type","number"),U(s,"min",2017),U(s,"max",2022),U(s,"class","svelte-1ft65rw"),U(i,"type","number"),U(i,"min",2017),U(i,"max",2022),U(i,"class","svelte-1ft65rw"),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(y,O){$(y,e,O),b(n,e,null),w(e,t),w(e,l),w(l,o),w(l,s),Ye(s,r[4]),w(l,f),w(l,i),Ye(i,r[5]),w(e,a),b(u,e,null),c=!0,g||(d=[at(s,"input",r[20]),at(i,"input",r[21])],g=!0)},p(y,O){const T={};O&16777231&&(T.$$scope={dirty:O,ctx:y}),n.$set(T),O&16&&Bt(s.value)!==y[4]&&Ye(s,y[4]),O&32&&Bt(i.value)!==y[5]&&Ye(i,y[5])},i(y){c||(m(n.$$.fragment,y),m(u.$$.fragment,y),c=!0)},o(y){_(n.$$.fragment,y),_(u.$$.fragment,y),c=!1},d(y){y&&p(e),v(n),v(u),g=!1,il(d)}}}function G$(r){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function U$(r){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function q$(r){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function W$(r){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function V$(r){let e,n,t,l,o,s,f,i,a,u,c,g;function d(L){r[16](L)}let y={id:"stats19-pedestrians",$$slots:{default:[G$]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new ae({props:y}),W.push(()=>V(e,"checked",d));function O(L){r[17](L)}let T={id:"stats19-cyclists",$$slots:{default:[U$]},$$scope:{ctx:r}};r[1]!==void 0&&(T.checked=r[1]),l=new ae({props:T}),W.push(()=>V(l,"checked",O));function I(L){r[18](L)}let D={id:"stats19-horse-riders",$$slots:{default:[q$]},$$scope:{ctx:r}};r[2]!==void 0&&(D.checked=r[2]),f=new ae({props:D}),W.push(()=>V(f,"checked",I));function P(L){r[19](L)}let M={id:"stats19-other",$$slots:{default:[W$]},$$scope:{ctx:r}};return r[3]!==void 0&&(M.checked=r[3]),u=new ae({props:M}),W.push(()=>V(u,"checked",P)),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment),s=A(),h(f.$$.fragment),a=A(),h(u.$$.fragment)},m(L,N){b(e,L,N),$(L,t,N),b(l,L,N),$(L,s,N),b(f,L,N),$(L,a,N),b(u,L,N),g=!0},p(L,N){const E={};N&16777216&&(E.$$scope={dirty:N,ctx:L}),!n&&N&1&&(n=!0,E.checked=L[0],X(()=>n=!1)),e.$set(E);const S={};N&16777216&&(S.$$scope={dirty:N,ctx:L}),!o&&N&2&&(o=!0,S.checked=L[1],X(()=>o=!1)),l.$set(S);const F={};N&16777216&&(F.$$scope={dirty:N,ctx:L}),!i&&N&4&&(i=!0,F.checked=L[2],X(()=>i=!1)),f.$set(F);const G={};N&16777216&&(G.$$scope={dirty:N,ctx:L}),!c&&N&8&&(c=!0,G.checked=L[3],X(()=>c=!1)),u.$set(G)},i(L){g||(m(e.$$.fragment,L),m(l.$$.fragment,L),m(f.$$.fragment,L),m(u.$$.fragment,L),g=!0)},o(L){_(e.$$.fragment,L),_(l.$$.fragment,L),_(f.$$.fragment,L),_(u.$$.fragment,L),g=!1},d(L){L&&(p(t),p(s),p(a)),v(e,L),v(l,L),v(f,L),v(u,L)}}}function Br(r){let e,n,t,l=r[8][r[23].pedestrian_location]+"",o;return{c(){e=C("p"),n=k("Pedestrian location: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8388608&&l!==(l=s[8][s[23].pedestrian_location]+"")&&B(o,l)},d(s){s&&p(e)}}}function Hr(r){let e,n,t,l=r[9][r[23].pedestrian_movement]+"",o;return{c(){e=C("p"),n=k("Pedestrian movement: "),t=C("b"),o=k(l)},m(s,f){$(s,e,f),w(e,n),w(e,t),w(t,o)},p(s,f){f&8388608&&l!==(l=s[9][s[23].pedestrian_movement]+"")&&B(o,l)},d(s){s&&p(e)}}}function X$(r){let e,n,t,l=r[23].year+"",o,s,f,i,a,u=r[10][r[23].severity]+"",c,g,d,y,O,T=zr(r[23])+"",I,D,P,M,L,N=r[23].pedestrian_location&&Br(r),E=r[23].pedestrian_movement&&Hr(r);return{c(){e=C("p"),n=k("Year: "),t=C("b"),o=k(l),s=A(),f=C("p"),i=k("Severity: "),a=C("b"),c=k(u),g=A(),d=C("p"),y=k("Casualties: "),O=C("b"),I=k(T),D=A(),N&&N.c(),P=A(),E&&E.c(),M=A(),L=C("p"),L.textContent="Click to open full report in CycleStreets"},m(S,F){$(S,e,F),w(e,n),w(e,t),w(t,o),$(S,s,F),$(S,f,F),w(f,i),w(f,a),w(a,c),$(S,g,F),$(S,d,F),w(d,y),w(d,O),w(O,I),$(S,D,F),N&&N.m(S,F),$(S,P,F),E&&E.m(S,F),$(S,M,F),$(S,L,F)},p(S,F){F&8388608&&l!==(l=S[23].year+"")&&B(o,l),F&8388608&&u!==(u=S[10][S[23].severity]+"")&&B(c,u),F&8388608&&T!==(T=zr(S[23])+"")&&B(I,T),S[23].pedestrian_location?N?N.p(S,F):(N=Br(S),N.c(),N.m(P.parentNode,P)):N&&(N.d(1),N=null),S[23].pedestrian_movement?E?E.p(S,F):(E=Hr(S),E.c(),E.m(M.parentNode,M)):E&&(E.d(1),E=null)},d(S){S&&(p(e),p(s),p(f),p(g),p(d),p(D),p(P),p(M),p(L)),N&&N.d(S),E&&E.d(S)}}}function Y$(r){let e,n;return e=new ce({props:{$$slots:{default:[X$,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&25165824&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Q$(r){let e,n;const t=[H(Tt),{sourceLayer:Tt},{paint:{"circle-color":ye(["get","severity"],[1,2,3],[r[11],r[12],r[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[7]},{layout:{visibility:r[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Y$]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new tt({props:l}),e.$on("click",K$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&14528?ee(t,[s&0&&ie(H(Tt)),s&0&&{sourceLayer:Tt},s&14336&&{paint:{"circle-color":ye(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function J$(r){let e,n,t,l,o,s;function f(u){r[15](u)}let i={id:Tt,$$slots:{right:[z$],default:[j$]},$$scope:{ctx:r}};r[6]!==void 0&&(i.checked=r[6]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[6]&&Rr(r);return o=new we({props:{url:`pmtiles://${be()}/v1/${Tt}.pmtiles`,$$slots:{default:[Q$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:u}),!n&&c&64&&(n=!0,g.checked=u[6],X(()=>n=!1)),e.$set(g),u[6]?a?(a.p(u,c),c&64&&m(a,1)):(a=Rr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&16777408&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let Tt="stats19";function zr(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function K$(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function Z$(r,e,n){let t,l=!1,o=!0,s=!0,f=!0,i=!1,a=2017,u=2022;function c(G,R,j,z,q,te){let re=["any"];return o&&re.push(["get","pedestrian"]),s&&re.push(["get","cyclist"]),f&&re.push(["get","horse_rider"]),i&&re.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],u],re]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},d={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},O=oe.sequential_low_to_high[4],T=oe.sequential_low_to_high[2],I=oe.sequential_low_to_high[0],D=[["Fatal",O],["Serious",T],["Slight",I]];function P(G){l=G,n(6,l)}function M(G){o=G,n(0,o)}function L(G){s=G,n(1,s)}function N(G){f=G,n(2,f)}function E(G){i=G,n(3,i)}function S(){a=Bt(this.value),n(4,a)}function F(){u=Bt(this.value),n(5,u)}return r.$$.update=()=>{r.$$.dirty&63&&n(7,t=c())},[o,s,f,i,a,u,l,t,g,d,y,O,T,I,D,P,M,L,N,E,S,F]}class x$ extends J{constructor(e){super(),K(this,e,Z$,J$,Y,{})}}function ep(r){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tp(r){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function np(r){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rp(r){let e,n,t,l,o,s,f,i,a,u,c;return t=new Q({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[tp]},$$scope:{ctx:r}}}),o=new Q({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[np]},$$scope:{ctx:r}}}),u=new De({}),{c(){e=C("p"),n=k("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),s=k(" for details and caveats about the measurements."),f=A(),i=C("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=A(),h(u.$$.fragment)},m(g,d){$(g,e,d),w(e,n),b(t,e,null),w(e,l),b(o,e,null),w(e,s),$(g,f,d),$(g,i,d),$(g,a,d),b(u,g,d),c=!0},p(g,d){const y={};d&64&&(y.$$scope={dirty:d,ctx:g}),t.$set(y);const O={};d&64&&(O.$$scope={dirty:d,ctx:g}),o.$set(O)},i(g){c||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(u.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(u.$$.fragment,g),c=!1},d(g){g&&(p(e),p(f),p(i),p(a)),v(t),v(o),v(u,g)}}}function lp(r){let e,n,t;return n=new _e({props:{$$slots:{default:[rp]},$$scope:{ctx:r}}}),{c(){e=C("span"),h(n.$$.fragment),U(e,"slot","right")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function Gr(r){let e,n;return e=new Ke({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function op(r){let e,n=r[5].location+"",t,l,o,s,f,i=r[5].motor_vehicles_2022.toLocaleString()+"",a,u,c,g,d,y=r[5].pedal_cycles_2022.toLocaleString()+"",O,T,I,D,P,M=r[5].method+"",L;return{c(){e=C("h2"),t=k(n),l=A(),o=C("p"),s=k("Total motor vehicles (2022 AADF): "),f=C("b"),a=k(i),u=A(),c=C("p"),g=k("Total pedal cycles (2022 AADF): "),d=C("b"),O=k(y),T=A(),I=C("p"),D=k("Count method: "),P=C("b"),L=k(M)},m(N,E){$(N,e,E),w(e,t),$(N,l,E),$(N,o,E),w(o,s),w(o,f),w(f,a),$(N,u,E),$(N,c,E),w(c,g),w(c,d),w(d,O),$(N,T,E),$(N,I,E),w(I,D),w(I,P),w(P,L)},p(N,E){E&32&&n!==(n=N[5].location+"")&&B(t,n),E&32&&i!==(i=N[5].motor_vehicles_2022.toLocaleString()+"")&&B(a,i),E&32&&y!==(y=N[5].pedal_cycles_2022.toLocaleString()+"")&&B(O,y),E&32&&M!==(M=N[5].method+"")&&B(L,M)},d(N){N&&(p(e),p(l),p(o),p(u),p(c),p(T),p(I))}}}function sp(r){let e,n;return e=new ce({props:{$$slots:{default:[op,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ip(r){let e,n;const t=[H(Ot),{sourceLayer:Ot},{paint:{"circle-color":ye(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[sp]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new tt({props:l}),e.$on("click",fp),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&7?ee(t,[s&0&&ie(H(Ot)),s&0&&{sourceLayer:Ot},s&6&&{paint:{"circle-color":ye(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:o}),e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ap(r){let e,n,t,l,o,s;function f(u){r[4](u)}let i={id:Ot,$$slots:{right:[lp],default:[ep]},$$scope:{ctx:r}};r[0]!==void 0&&(i.checked=r[0]),e=new ae({props:i}),W.push(()=>V(e,"checked",f));let a=r[0]&&Gr(r);return o=new we({props:{url:`pmtiles://${be()}/v1/${Ot}.pmtiles`,$$slots:{default:[ip]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=A(),a&&a.c(),l=A(),h(o.$$.fragment)},m(u,c){b(e,u,c),$(u,t,c),a&&a.m(u,c),$(u,l,c),b(o,u,c),s=!0},p(u,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,g.checked=u[0],X(()=>n=!1)),e.$set(g),u[0]?a?(a.p(u,c),c&1&&m(a,1)):(a=Gr(u),a.c(),m(a,1),a.m(l.parentNode,l)):a&&(ge(),_(a,1,1,()=>{a=null}),de());const d={};c&65&&(d.$$scope={dirty:c,ctx:u}),o.$set(d)},i(u){s||(m(e.$$.fragment,u),m(a),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(a),_(o.$$.fragment,u),s=!1},d(u){u&&(p(t),p(l)),v(e,u),a&&a.d(u),v(o,u)}}}let Ot="vehicle_counts";function fp(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function up(r,e,n){let t=oe.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function f(i){s=i,n(0,s)}return[s,t,l,o,f]}class cp extends J{constructor(e){super(),K(this,e,up,ap,Y,{})}}function $p(r){let e,n,t,l,o,s,f,i;return e=new P$({}),t=new d$({}),o=new D$({}),f=new O$({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),s=A(),h(f.$$.fragment)},m(a,u){b(e,a,u),$(a,n,u),b(t,a,u),$(a,l,u),b(o,a,u),$(a,s,u),b(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(p(n),p(l),p(s)),v(e,a),v(t,a),v(o,a),v(f,a)}}}function pp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[$p]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mp(r){let e,n,t,l,o,s,f,i,a,u;return e=new fu({}),t=new Lu({}),o=new bu({}),f=new o$({}),a=new Qc({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),s=A(),h(f.$$.fragment),i=A(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,l,g),b(o,c,g),$(c,s,g),b(f,c,g),$(c,i,g),b(a,c,g),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(p(n),p(l),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(f,c),v(a,c)}}}function _p(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[mp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gp(r){let e,n,t,l;return e=new Jf({}),t=new Ac({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function dp(r){let e,n,t,l,o,s,f,i,a,u;return e=new pf({}),t=new Df({}),o=new ba({}),f=new za({}),a=new tf({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),s=A(),h(f.$$.fragment),i=A(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,l,g),b(o,c,g),$(c,s,g),b(f,c,g),$(c,i,g),b(a,c,g),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(p(n),p(l),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(f,c),v(a,c)}}}function hp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[dp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bp(r){let e,n,t,l;return e=new aa({}),t=new Ia({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function vp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[bp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wp(r){let e,n,t,l,o,s;return e=new vc({}),t=new Bu({}),o=new uc({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment)},m(f,i){b(e,f,i),$(f,n,i),b(t,f,i),$(f,l,i),b(o,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(o.$$.fragment,f),s=!1},d(f){f&&(p(n),p(l)),v(e,f),v(t,f),v(o,f)}}}function kp(r){let e,n,t,l,o,s,f=pn()=="Private (development)",i,a,u;e=new cp({}),t=new x$({}),o=new xu({});let c=f&&wp();return a=new Cf({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),s=A(),c&&c.c(),i=A(),h(a.$$.fragment)},m(g,d){b(e,g,d),$(g,n,d),b(t,g,d),$(g,l,d),b(o,g,d),$(g,s,d),c&&c.m(g,d),$(g,i,d),b(a,g,d),u=!0},p:ne,i(g){u||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(o.$$.fragment,g),m(c),m(a.$$.fragment,g),u=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),_(c),_(a.$$.fragment,g),u=!1},d(g){g&&(p(n),p(l),p(s),p(i)),v(e,g),v(t,g),v(o,g),c&&c.d(g),v(a,g)}}}function yp(r){let e,n;return e=new nt({props:{small:!0,$$slots:{default:[kp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&16&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sp(r){let e,n,t,l,o;function s(i){r[3](i)}let f={};return r[0]!==void 0&&(f.enabled=r[0]),e=new Bl({props:f}),W.push(()=>V(e,"enabled",s)),l=new Wl({}),{c(){h(e.$$.fragment),t=A(),h(l.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(l,i,a),o=!0},p(i,a){const u={};!n&&a&1&&(n=!0,u.enabled=i[0],X(()=>n=!1)),e.$set(u)},i(i){o||(m(e.$$.fragment,i),m(l.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(l,i)}}}function Cp(r){let e,n,t,l,o,s,f,i,a,u,c,g,d,y,O,T,I,D;return e=new Rc({}),t=new Fe({props:{label:"Trip generators",$$slots:{default:[pp]},$$scope:{ctx:r}}}),o=new Fe({props:{label:"Existing infrastructure",$$slots:{default:[_p]},$$scope:{ctx:r}}}),f=new Fe({props:{label:"Public transit",$$slots:{default:[gp]},$$scope:{ctx:r}}}),a=new Fe({props:{label:"Boundaries",$$slots:{default:[hp]},$$scope:{ctx:r}}}),c=new Fe({props:{label:"Census",$$slots:{default:[vp]},$$scope:{ctx:r}}}),d=new Fe({props:{label:"Other",$$slots:{default:[yp]},$$scope:{ctx:r}}}),O=new Fe({props:{label:"Tools",$$slots:{default:[Sp]},$$scope:{ctx:r}}}),I=new Rl({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),s=A(),h(f.$$.fragment),i=A(),h(a.$$.fragment),u=A(),h(c.$$.fragment),g=A(),h(d.$$.fragment),y=A(),h(O.$$.fragment),T=A(),h(I.$$.fragment)},m(P,M){b(e,P,M),$(P,n,M),b(t,P,M),$(P,l,M),b(o,P,M),$(P,s,M),b(f,P,M),$(P,i,M),b(a,P,M),$(P,u,M),b(c,P,M),$(P,g,M),b(d,P,M),$(P,y,M),b(O,P,M),$(P,T,M),b(I,P,M),D=!0},p(P,M){const L={};M&16&&(L.$$scope={dirty:M,ctx:P}),t.$set(L);const N={};M&16&&(N.$$scope={dirty:M,ctx:P}),o.$set(N);const E={};M&16&&(E.$$scope={dirty:M,ctx:P}),f.$set(E);const S={};M&16&&(S.$$scope={dirty:M,ctx:P}),a.$set(S);const F={};M&16&&(F.$$scope={dirty:M,ctx:P}),c.$set(F);const G={};M&16&&(G.$$scope={dirty:M,ctx:P}),d.$set(G);const R={};M&17&&(R.$$scope={dirty:M,ctx:P}),O.$set(R);const j={};M&2&&(j.disabled=!P[1]),I.$set(j)},i(P){D||(m(e.$$.fragment,P),m(t.$$.fragment,P),m(o.$$.fragment,P),m(f.$$.fragment,P),m(a.$$.fragment,P),m(c.$$.fragment,P),m(d.$$.fragment,P),m(O.$$.fragment,P),m(I.$$.fragment,P),D=!0)},o(P){_(e.$$.fragment,P),_(t.$$.fragment,P),_(o.$$.fragment,P),_(f.$$.fragment,P),_(a.$$.fragment,P),_(c.$$.fragment,P),_(d.$$.fragment,P),_(O.$$.fragment,P),_(I.$$.fragment,P),D=!1},d(P){P&&(p(n),p(l),p(s),p(i),p(u),p(g),p(y),p(T)),v(e,P),v(t,P),v(o,P),v(f,P),v(a,P),v(c,P),v(d,P),v(O,P),v(I,P)}}}function Tp(r){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let l={};for(let o=0;o<t.length;o+=1)l=x(l,t[o]);return e=new Je({props:l}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const f=s&2?ee(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(f)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Op(r){let e,n,t,l;return e=new Fe({props:{label:"Layers",open:!0,$$slots:{default:[Cp]},$$scope:{ctx:r}}}),t=new Mt({props:{data:r[2],$$slots:{default:[Tp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,[s]){const f={};s&19&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Ap(r,e,n){let t,l;ve(r,sr,f=>n(1,l=f));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(f){t=f,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&sr.set(!t)},[t,l,o,s]}class Lp extends J{constructor(e){super(),K(this,e,Ap,Op,Y,{})}}function Ur(r){let e;return{c(){e=C("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ip(r){let e,n=r[0]&&Ur();return{c(){n&&n.c(),e=Me()},m(t,l){n&&n.m(t,l),$(t,e,l)},p(t,[l]){t[0]?n||(n=Ur(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(t){t&&p(e),n&&n.d(t)}}}function Pp(r,e,n){let{loadFile:t}=e,l=!0;return Sn(async()=>{let s=await(await fetch(`${rn()}/v1/random_schemes.geojson`)).text();t(s),n(0,l=!1)}),r.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[l,t]}class Mp extends J{constructor(e){super(),K(this,e,Pp,Ip,Y,{loadFile:1})}}function qr(r){var o;let e,n,t=((o=r[0].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=C("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),w(e,n),w(e,l)},p(s,f){var i;f&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&B(l,t)},d(s){s&&p(e)}}}function Np(r){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fp(r){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ep(r){let e,n,t,l;return e=new It({props:{$$slots:{default:[Np]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new It({props:{$$slots:{default:[Fp]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,s){const f={};s&32&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Dp(r){var F,G,R,j;let e,n,t=r[0].scheme_reference+"",l,o,s,f,i=((F=r[0].browse)==null?void 0:F.authority_or_region)+"",a,u,c,g,d=((G=r[0].browse)==null?void 0:G.capital_scheme_id)+"",y,O,T,I,D=((R=r[0].browse)==null?void 0:R.funding_programme)+"",P,M,L,N,E,S=((j=r[0].browse)==null?void 0:j.current_milestone)&&qr(r);return N=new Hl({props:{$$slots:{default:[Ep]},$$scope:{ctx:r}}}),{c(){e=C("p"),n=k("Scheme reference: "),l=k(t),o=A(),s=C("p"),f=k("Authority or region: "),a=k(i),u=A(),c=C("p"),g=k("Capital scheme ID: "),y=k(d),O=A(),T=C("p"),I=k("Funding programme: "),P=k(D),M=A(),S&&S.c(),L=A(),h(N.$$.fragment)},m(z,q){$(z,e,q),w(e,n),w(e,l),$(z,o,q),$(z,s,q),w(s,f),w(s,a),$(z,u,q),$(z,c,q),w(c,g),w(c,y),$(z,O,q),$(z,T,q),w(T,I),w(T,P),$(z,M,q),S&&S.m(z,q),$(z,L,q),b(N,z,q),E=!0},p(z,q){var re,ue,Le,Te;(!E||q&1)&&t!==(t=z[0].scheme_reference+"")&&B(l,t),(!E||q&1)&&i!==(i=((re=z[0].browse)==null?void 0:re.authority_or_region)+"")&&B(a,i),(!E||q&1)&&d!==(d=((ue=z[0].browse)==null?void 0:ue.capital_scheme_id)+"")&&B(y,d),(!E||q&1)&&D!==(D=((Le=z[0].browse)==null?void 0:Le.funding_programme)+"")&&B(P,D),(Te=z[0].browse)!=null&&Te.current_milestone?S?S.p(z,q):(S=qr(z),S.c(),S.m(L.parentNode,L)):S&&(S.d(1),S=null);const te={};q&32&&(te.$$scope={dirty:q,ctx:z}),N.$set(te)},i(z){E||(m(N.$$.fragment,z),E=!0)},o(z){_(N.$$.fragment,z),E=!1},d(z){z&&(p(e),p(o),p(s),p(u),p(c),p(O),p(T),p(M),p(L)),S&&S.d(z),v(N,z)}}}function jp(r){let e,n;return e=new Fe({props:{label:`${r[0].scheme_name}`,$$slots:{default:[Dp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_name}`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rp(r,e,n){let t,l;ve(r,Pt,i=>n(3,t=i)),ve(r,yn,i=>n(4,l=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};l==null||l.fitBounds(Nl(i),{padding:20,animate:!1})}function f(){var u,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((u=o.browse)==null?void 0:u.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,f]}class Bp extends J{constructor(e){super(),K(this,e,Rp,jp,Y,{scheme:0})}}function Wr(r){let e,n,t=Fn(r[0].length_meters)+"",l;return{c(){e=C("p"),n=k("Length: "),l=k(t)},m(o,s){$(o,e,s),w(e,n),w(e,l)},p(o,s){s&1&&t!==(t=Fn(o[0].length_meters)+"")&&B(l,t)},d(o){o&&p(e)}}}function Vr(r){let e,n=st(r[0].description,r[2])+"";return{c(){e=C("p")},m(t,l){$(t,e,l),e.innerHTML=n},p(t,l){l&5&&n!==(n=st(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function Xr(r){var o;let e,n,t=((o=r[1].browse)==null?void 0:o.current_milestone)+"",l;return{c(){e=C("p"),n=k("Current milestone: "),l=k(t)},m(s,f){$(s,e,f),w(e,n),w(e,l)},p(s,f){var i;f&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&B(l,t)},d(s){s&&p(e)}}}function Hp(r){var je,Ne,Se,Ze;let e,n,t,l=st(r[0].name,r[2])+"",o,s=r[0].intervention_type+"",f,i,a,u,c,g,d,y,O,T,I=st(r[1].scheme_name??"",r[3])+"",D,P,M=st(r[0].scheme_reference,r[3])+"",L,N,E,S,F=((je=r[1].browse)==null?void 0:je.authority_or_region)+"",G,R,j,z,q=((Ne=r[1].browse)==null?void 0:Ne.capital_scheme_id)+"",te,re,ue,Le,Te=((Se=r[1].browse)==null?void 0:Se.funding_programme)+"",se,Ae,fe=r[0].length_meters&&Wr(r),$e=r[0].description&&Vr(r),pe=((Ze=r[1].browse)==null?void 0:Ze.current_milestone)&&Xr(r);return{c(){e=C("div"),n=C("h2"),t=new jt(!1),o=k(" ("),f=k(s),i=k(")"),a=A(),fe&&fe.c(),u=A(),$e&&$e.c(),c=A(),g=C("hr"),d=A(),y=C("p"),O=k("Part of scheme: "),T=new jt(!1),D=k(" ("),P=new jt(!1),L=k(")"),N=A(),E=C("p"),S=k("Authority or region: "),G=k(F),R=A(),j=C("p"),z=k("Capital scheme ID: "),te=k(q),re=A(),ue=C("p"),Le=k("Funding programme: "),se=k(Te),Ae=A(),pe&&pe.c(),t.a=o,T.a=D,P.a=L,Ce(e,"max-width","30vw")},m(le,he){$(le,e,he),w(e,n),t.m(l,n),w(n,o),w(n,f),w(n,i),w(e,a),fe&&fe.m(e,null),w(e,u),$e&&$e.m(e,null),w(e,c),w(e,g),w(e,d),w(e,y),w(y,O),T.m(I,y),w(y,D),P.m(M,y),w(y,L),w(e,N),w(e,E),w(E,S),w(E,G),w(e,R),w(e,j),w(j,z),w(j,te),w(e,re),w(e,ue),w(ue,Le),w(ue,se),w(e,Ae),pe&&pe.m(e,null)},p(le,[he]){var An,Ln,In,Pn;he&5&&l!==(l=st(le[0].name,le[2])+"")&&t.p(l),he&1&&s!==(s=le[0].intervention_type+"")&&B(f,s),le[0].length_meters?fe?fe.p(le,he):(fe=Wr(le),fe.c(),fe.m(e,u)):fe&&(fe.d(1),fe=null),le[0].description?$e?$e.p(le,he):($e=Vr(le),$e.c(),$e.m(e,c)):$e&&($e.d(1),$e=null),he&10&&I!==(I=st(le[1].scheme_name??"",le[3])+"")&&T.p(I),he&9&&M!==(M=st(le[0].scheme_reference,le[3])+"")&&P.p(M),he&2&&F!==(F=((An=le[1].browse)==null?void 0:An.authority_or_region)+"")&&B(G,F),he&2&&q!==(q=((Ln=le[1].browse)==null?void 0:Ln.capital_scheme_id)+"")&&B(te,q),he&2&&Te!==(Te=((In=le[1].browse)==null?void 0:In.funding_programme)+"")&&B(se,Te),(Pn=le[1].browse)!=null&&Pn.current_milestone?pe?pe.p(le,he):(pe=Xr(le),pe.c(),pe.m(e,null)):pe&&(pe.d(1),pe=null)},i:ne,o:ne,d(le){le&&p(e),fe&&fe.d(),$e&&$e.d(),pe&&pe.d()}}}function st(r,e){return e?r.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):r}function zp(r,e,n){let t,l,o,s;ve(r,en,i=>n(4,l=i)),ve(r,Ft,i=>n(2,o=i)),ve(r,Et,i=>n(3,s=i));let{props:f}=e;return r.$$set=i=>{"props"in i&&n(0,f=i.props)},r.$$.update=()=>{r.$$.dirty&17&&n(1,t=l.get(f.scheme_reference))},[f,t,o,s,l]}class On extends J{constructor(e){super(),K(this,e,zp,Hp,Y,{props:0})}}function Gp(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Up(r){let e,n;return e=new On({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qp(r){let e,n,t,l;return e=new ce({props:{popupClass:"border-popup",$$slots:{default:[Gp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Up,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Wp(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Vp(r){let e,n;return e=new On({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xp(r){let e,n,t,l;return e=new ce({props:{popupClass:"border-popup",$$slots:{default:[Wp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Vp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Yp(r){let e,n=r[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(l,o){$(l,e,o),w(e,t)},p(l,o){o&64&&n!==(n=l[6].name+"")&&B(t,n)},d(l){l&&p(e)}}}function Qp(r){let e,n;return e=new On({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jp(r){let e,n,t,l;return e=new ce({props:{popupClass:"border-popup",$$slots:{default:[Yp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),t=new ce({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Qp,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),l=!0},p(o,s){const f={};s&192&&(f.$$scope={dirty:s,ctx:o}),e.$set(f);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){l||(m(e.$$.fragment,o),m(t.$$.fragment,o),l=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),l=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Kp(r){let e,n,t,l,o,s,f,i,a,u;const c=[H("interventions-points"),{filter:["all",En,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Zt,"circle-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[qp]},$$scope:{ctx:r}};for(let L=0;L<c.length;L+=1)g=x(g,c[L]);e=new tt({props:g});const d=[H("interventions-lines"),{filter:["all",Dn,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":Nt,"line-opacity":Z(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[Xp]},$$scope:{ctx:r}};for(let L=0;L<d.length;L+=1)y=x(y,d[L]);t=new ke({props:y});const O=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Nt,"circle-opacity":0,"circle-stroke-color":et.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let T={};for(let L=0;L<O.length;L+=1)T=x(T,O[L]);o=new tt({props:T});const I=[H("interventions-polygons"),{filter:["all",Qt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":Z(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[Jp]},$$scope:{ctx:r}};for(let L=0;L<I.length;L+=1)D=x(D,I[L]);f=new Je({props:D});const P=[H("interventions-polygons-outlines"),{filter:["all",Qt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*Nt}},{layout:{visibility:r[0]?"visible":"none"}}];let M={};for(let L=0;L<P.length;L+=1)M=x(M,P[L]);return a=new ke({props:M}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),h(o.$$.fragment),s=A(),h(f.$$.fragment),i=A(),h(a.$$.fragment)},m(L,N){b(e,L,N),$(L,n,N),b(t,L,N),$(L,l,N),b(o,L,N),$(L,s,N),b(f,L,N),$(L,i,N),b(a,L,N),u=!0},p(L,N){const E=N&29?ee(c,[c[0],N&24&&{filter:["all",En,L[3],L[4]]},c[2],c[3],N&4&&{paint:{"circle-color":L[2],"circle-radius":Zt,"circle-opacity":Z(1,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},c[6]]):{};N&128&&(E.$$scope={dirty:N,ctx:L}),e.$set(E);const S=N&13?ee(d,[d[0],N&8&&{filter:["all",Dn,L[3]]},d[2],d[3],N&4&&{paint:{"line-color":L[2],"line-width":Nt,"line-opacity":Z(1,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},d[6]]):{};N&128&&(S.$$scope={dirty:N,ctx:L}),t.$set(S);const F=N&1?ee(O,[O[0],O[1],O[2],{layout:{visibility:L[0]?"visible":"none"}}]):{};o.$set(F);const G=N&13?ee(I,[I[0],N&8&&{filter:["all",Qt,L[3]]},I[2],I[3],N&4&&{paint:{"fill-color":L[2],"fill-opacity":Z(.2,.5)}},N&1&&{layout:{visibility:L[0]?"visible":"none"}},I[6]]):{};N&128&&(G.$$scope={dirty:N,ctx:L}),f.$set(G);const R=N&13?ee(P,[P[0],N&8&&{filter:["all",Qt,L[3]]},N&4&&{paint:{"line-color":L[2],"line-opacity":.5,"line-width":.7*Nt}},N&1&&{layout:{visibility:L[0]?"visible":"none"}}]):{};a.$set(R)},i(L){u||(m(e.$$.fragment,L),m(t.$$.fragment,L),m(o.$$.fragment,L),m(f.$$.fragment,L),m(a.$$.fragment,L),u=!0)},o(L){_(e.$$.fragment,L),_(t.$$.fragment,L),_(o.$$.fragment,L),_(f.$$.fragment,L),_(a.$$.fragment,L),u=!1},d(L){L&&(p(n),p(l),p(s),p(i)),v(e,L),v(t,L),v(o,L),v(f,L),v(a,L)}}}function Zp(r){let e,n;return e=new Mt({props:{data:r[1],$$slots:{default:[Kp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&2&&(o.data=t[1]),l&129&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xp(r,e,n){let t,l;ve(r,Pt,a=>n(5,l=a));let{showSchemes:o}=e,[s]=wn();const f=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return r.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&n(1,t=Fl(l))},[o,t,s,f,i,l]}class em extends J{constructor(e){super(),K(this,e,xp,Zp,Y,{showSchemes:0})}}function Yr(r,e,n){const t=r.slice();return t[13]=e[n],t}function Qr(r,e,n){const t=r.slice();return t[16]=e[n],t}function tm(r){let e,n;return e=new Mp({props:{loadFile:r[7]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jr(r){let e,n,t,l,o;e=new It({props:{$$slots:{default:[nm]},$$scope:{ctx:r}}}),e.$on("click",r[8]);function s(i){r[9](i)}let f={title:"About this scheme data",$$slots:{default:[rm]},$$scope:{ctx:r}};return r[3]!==void 0&&(f.open=r[3]),t=new tl({props:f}),W.push(()=>V(t,"open",s)),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const u={};a&524288&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!l&&a&8&&(l=!0,c.open=i[3],X(()=>l=!1)),t.$set(c)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function nm(r){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Kr(r){let e,n,t=r[16]+"",l;return{c(){e=C("li"),n=C("p"),l=k(t)},m(o,s){$(o,e,s),w(e,n),w(n,l)},p(o,s){s&16&&t!==(t=o[16]+"")&&B(l,t)},d(o){o&&p(e)}}}function rm(r){let e,n,t,l,o=Ee(r[4].notes),s=[];for(let f=0;f<o.length;f+=1)s[f]=Kr(Qr(r,o,f));return{c(){e=C("div"),n=C("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=A(),l=C("ul");for(let f=0;f<s.length;f+=1)s[f].c();U(e,"class","govuk-prose")},m(f,i){$(f,e,i),w(e,n),w(e,t),w(e,l);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(l,null)},p(f,i){if(i&16){o=Ee(f[4].notes);let a;for(a=0;a<o.length;a+=1){const u=Qr(f,o,a);s[a]?s[a].p(u,i):(s[a]=Kr(u),s[a].c(),s[a].m(l,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(f){f&&p(e),Lt(s,f)}}}function Zr(r){let e,n,t,l;function o(i){r[10](i)}function s(i){r[11](i)}let f={};return r[1]!==void 0&&(f.schemesToBeShown=r[1]),r[2]!==void 0&&(f.show=r[2]),e=new Pi({props:f}),W.push(()=>V(e,"schemesToBeShown",o)),W.push(()=>V(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),l=!0},p(i,a){const u={};!n&&a&2&&(n=!0,u.schemesToBeShown=i[1],X(()=>n=!1)),!t&&a&4&&(t=!0,u.show=i[2],X(()=>t=!1)),e.$set(u)},i(i){l||(m(e.$$.fragment,i),l=!0)},o(i){_(e.$$.fragment,i),l=!1},d(i){v(e,i)}}}function xr(r){let e,n;return e=new Bp({props:{scheme:r[13]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function el(r){let e=r[1].has(r[13].scheme_reference),n,t,l=e&&xr(r);return{c(){l&&l.c(),n=Me()},m(o,s){l&&l.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?l?(l.p(o,s),s&66&&m(l,1)):(l=xr(o),l.c(),m(l,1),l.m(n.parentNode,n)):l&&(ge(),_(l,1,1,()=>{l=null}),de())},i(o){t||(m(l),t=!0)},o(o){_(l),t=!1},d(o){o&&p(n),l&&l.d(o)}}}function lm(r){let e,n,t,l,o,s,f,i,a,u,c=pn()=="Private (development)",g,d,y,O,T,I,D,P,M;o=new ql({props:{boundaryGeojson:r[4]}}),a=new El({});let L=c&&tm(r),N=r[4].notes&&Jr(r);y=new Gl({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),T=new fl({props:{errorMessage:r[0]}});let E=r[6].size>0&&Zr(r),S=Ee(r[6].values()),F=[];for(let R=0;R<S.length;R+=1)F[R]=el(Yr(r,S,R));const G=R=>_(F[R],1,1,()=>{F[R]=null});return{c(){e=C("div"),n=C("div"),t=C("h1"),t.textContent="Browse schemes",l=A(),h(o.$$.fragment),s=A(),f=C("p"),f.textContent=`App version: ${pn()}`,i=A(),h(a.$$.fragment),u=A(),L&&L.c(),g=A(),N&&N.c(),d=A(),h(y.$$.fragment),O=A(),h(T.$$.fragment),I=A(),E&&E.c(),D=A(),P=C("ul");for(let R=0;R<F.length;R+=1)F[R].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),U(e,"slot","sidebar"),U(e,"class","govuk-prose")},m(R,j){$(R,e,j),w(e,n),w(n,t),w(n,l),b(o,n,null),w(e,s),w(e,f),w(e,i),b(a,e,null),w(e,u),L&&L.m(e,null),w(e,g),N&&N.m(e,null),w(e,d),b(y,e,null),w(e,O),b(T,e,null),w(e,I),E&&E.m(e,null),w(e,D),w(e,P);for(let z=0;z<F.length;z+=1)F[z]&&F[z].m(P,null);M=!0},p(R,j){const z={};j&16&&(z.boundaryGeojson=R[4]),o.$set(z),c&&L.p(R,j),R[4].notes?N?(N.p(R,j),j&16&&m(N,1)):(N=Jr(R),N.c(),m(N,1),N.m(e,d)):N&&(ge(),_(N,1,1,()=>{N=null}),de());const q={};if(j&1&&(q.errorMessage=R[0]),T.$set(q),R[6].size>0?E?(E.p(R,j),j&64&&m(E,1)):(E=Zr(R),E.c(),m(E,1),E.m(e,D)):E&&(ge(),_(E,1,1,()=>{E=null}),de()),j&66){S=Ee(R[6].values());let te;for(te=0;te<S.length;te+=1){const re=Yr(R,S,te);F[te]?(F[te].p(re,j),m(F[te],1)):(F[te]=el(re),F[te].c(),m(F[te],1),F[te].m(P,null))}for(ge(),te=S.length;te<F.length;te+=1)G(te);de()}},i(R){if(!M){m(o.$$.fragment,R),m(a.$$.fragment,R),m(L),m(N),m(y.$$.fragment,R),m(T.$$.fragment,R),m(E);for(let j=0;j<S.length;j+=1)m(F[j]);M=!0}},o(R){_(o.$$.fragment,R),_(a.$$.fragment,R),_(L),_(N),_(y.$$.fragment,R),_(T.$$.fragment,R),_(E),F=F.filter(Boolean);for(let j=0;j<F.length;j+=1)_(F[j]);M=!1},d(R){R&&p(e),v(o),v(a),L&&L.d(),N&&N.d(),v(y),v(T),E&&E.d(),Lt(F,R)}}}function om(r){let e,n,t,l,o,s,f;return e=new zl({}),t=new em({props:{showSchemes:r[2]}}),s=new Lp({}),{c(){h(e.$$.fragment),n=A(),h(t.$$.fragment),l=A(),o=C("div"),h(s.$$.fragment),U(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,l,a),$(i,o,a),b(s,o,null),f=!0},p(i,a){const u={};a&4&&(u.showSchemes=i[2]),t.$set(u)},i(i){f||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),f=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),f=!1},d(i){i&&(p(n),p(l),p(o)),v(e,i),v(t,i),v(s)}}}function sm(r){let e,n,t;return n=new Dl({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[om]},$$scope:{ctx:r}}}),{c(){e=C("div"),h(n.$$.fragment),U(e,"slot","main")},m(l,o){$(l,e,o),b(n,e,null),t=!0},p(l,o){const s={};o&32&&(s.style=l[5]),o&524292&&(s.$$scope={dirty:o,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&p(e),v(n)}}}function im(r){let e,n;return e=new Vl({props:{$$slots:{main:[sm],sidebar:[lm]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&524415&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function am(r,e,n){let t,l,o;ve(r,Pt,T=>n(4,t=T)),ve(r,jn,T=>n(5,l=T)),ve(r,en,T=>n(6,o=T)),Sn(()=>{jl()});const s=new URLSearchParams(window.location.search);jn.set(s.get("style")||"dataviz");let f="",i=new Set,a=!0,u=!1;function c(T){try{Pt.set(JSON.parse(T)),en.set(ci(t)),n(0,f="")}catch(I){n(0,f=`The file you loaded is broken: ${I}`)}}const g=()=>n(3,u=!0);function d(T){u=T,n(3,u)}function y(T){i=T,n(1,i)}function O(T){a=T,n(2,a)}return[f,i,a,u,t,l,o,c,g,d,y,O]}class fm extends J{constructor(e){super(),K(this,e,am,im,Y,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new fm({target:document.getElementById("app")});
