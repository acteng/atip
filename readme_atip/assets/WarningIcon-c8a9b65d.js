import{A as xt,e as ot,y as $t,z as en}from"./files-66cbce12.js";import{S as te,i as ne,s as le,G as Se,g as S,h as _e,j as X,k as d,l as T,n as z,z as ze,H as Me,I as Ce,J as Ie,t as L,e as I,o as p,b as Re,a as Fe,c as Y,D as Ue,m as x,d as Ze,f as $,x as pe,ag as rt,ao as ge,v as F,a8 as be,a1 as V,a2 as Ve,a3 as oe,ad as ee,aj as We,a0 as st,ap as Lt,A as we,w as ve,aq as Tt,E as pt,ar as tn,ah as nn,q as ln,as as on,ak as zt,p as at,at as ft,au as et,a6 as rn,F as ut,a4 as ct}from"./stores-74292f1d.js";import{S as sn}from"./colors-fb13c314.js";import{k as an,e as St,g as Mt,l as fn,m as un}from"./MapLibreMap-150eee90.js";import{M as cn}from"./Modal-40114435.js";import{R as dn}from"./index-04694884.js";import{S as Ct}from"./SecondaryButton-6680b1e1.js";function mn(l){let e,t,n,i,o,r,s;const c=l[3].default,f=Se(c,l,l[2],null);return{c(){e=S("details"),t=S("summary"),n=S("span"),i=_e(l[0]),o=X(),r=S("div"),f&&f.c(),d(n,"class","govuk-details__summary-text"),d(t,"class","govuk-details__summary"),d(r,"class","govuk-details__text"),e.open=l[1],d(e,"class","govuk-details"),d(e,"data-module","govuk-details")},m(a,m){T(a,e,m),z(e,t),z(t,n),z(n,i),z(e,o),z(e,r),f&&f.m(r,null),s=!0},p(a,[m]){(!s||m&1)&&ze(i,a[0]),f&&f.p&&(!s||m&4)&&Me(f,c,a,a[2],s?Ie(c,a[2],m,null):Ce(a[2]),null),(!s||m&2)&&(e.open=a[1])},i(a){s||(L(f,a),s=!0)},o(a){I(f,a),s=!1},d(a){a&&p(e),f&&f.d(a)}}}function gn(l,e,t){let{$$slots:n={},$$scope:i}=e,{label:o}=e,{open:r=!1}=e;return l.$$set=s=>{"label"in s&&t(0,o=s.label),"open"in s&&t(1,r=s.open),"$$scope"in s&&t(2,i=s.$$scope)},[o,r,i,n]}class _n extends te{constructor(e){super(),ne(this,e,gn,mn,le,{label:0,open:1})}}const Il=["==",["geometry-type"],"Polygon"],Pl=["==",["geometry-type"],"LineString"],Bl=["==",["geometry-type"],"Point"];function Rl(){return{type:"FeatureCollection",features:[]}}function Ul(l,e,t){let n=["match",l];for(let[i,o]of Object.entries(e))n.push(i),n.push(o);return n.push(t),n}function El(l){return xt(l)}function Al(l){var t,n;let e={type:"FeatureCollection",features:[]};for(let i of l.features)if(e.features.push(i),i.geometry.type=="LineString"&&!((t=i.properties)!=null&&t.hide_while_editing))for(let o of[i.geometry.coordinates[0],i.geometry.coordinates[i.geometry.coordinates.length-1]])e.features.push({type:"Feature",properties:{endpoint:!0,scheme_reference:(n=i.properties)==null?void 0:n.scheme_reference},geometry:{type:"Point",coordinates:o}});return e}function dt(l){let e;return{c(){e=S("p"),e.innerHTML=`Google <a href="https://cloud.google.com/maps-platform/terms/" target="_blank">Terms of Use</a>
    and
    <a href="https://www.google.com/policies/privacy/" target="_blank">Privacy Policy</a>`},m(t,n){T(t,e,n)},d(t){t&&p(e)}}}function hn(l){let e,t,n,i,o;function r(f){l[2](f)}let s={label:"Basemap",choices:an(),disabled:l[0]};l[1]!==void 0&&(s.value=l[1]),e=new sn({props:s}),Re.push(()=>Fe(e,"value",r));let c=l[1]=="google"&&dt();return{c(){Y(e.$$.fragment),n=X(),c&&c.c(),i=Ue()},m(f,a){x(e,f,a),T(f,n,a),c&&c.m(f,a),T(f,i,a),o=!0},p(f,[a]){const m={};a&1&&(m.disabled=f[0]),!t&&a&2&&(t=!0,m.value=f[1],Ze(()=>t=!1)),e.$set(m),f[1]=="google"?c||(c=dt(),c.c(),c.m(i.parentNode,i)):c&&(c.d(1),c=null)},i(f){o||(L(e.$$.fragment,f),o=!0)},o(f){I(e.$$.fragment,f),o=!1},d(f){f&&(p(n),p(i)),$(e,f),c&&c.d(f)}}}function bn(l,e,t){let n;pe(l,rt,r=>t(1,n=r));let{disabled:i=!1}=e;function o(r){n=r,rt.set(n)}return l.$$set=r=>{"disabled"in r&&t(0,i=r.disabled)},[i,n,o]}class jl extends te{constructor(e){super(),ne(this,e,bn,hn,le,{disabled:0})}}function yn(l){let e,t;return{c(){e=ge("svg"),t=ge("path"),d(t,"d","M13.12.706a.982.982 0 0 0-1.391 0L6.907 5.517 2.087.696a.982.982 0 1 0-1.391 1.39l4.821 4.821L.696 11.73a.982.982 0 1 0 1.39 1.39l4.821-4.821 4.822 4.821a.982.982 0 1 0 1.39-1.39L8.298 6.908l4.821-4.822a.988.988 0 0 0 0-1.38Z"),d(e,"viewBox","0 0 14 14"),d(e,"width","13"),d(e,"height","13"),d(e,"class","svelte-en2qvf")},m(n,i){T(n,e,i),z(e,t)},p:F,i:F,o:F,d(n){n&&p(e)}}}class It extends te{constructor(e){super(),ne(this,e,null,yn,le,{})}}function kn(l){let e,t;return{c(){e=ge("svg"),t=ge("path"),d(t,"d","M15 0C6.705 0 0 6.705 0 15C0 23.295 6.705 30 15 30C23.295 30 30 23.295 30 15C30 6.705 23.295 0 15 0ZM22.5 20.385L20.385 22.5L15 17.115L9.615 22.5L7.5 20.385L12.885 15L7.5 9.615L9.615 7.5L15 12.885L20.385 7.5L22.5 9.615L17.115 15L22.5 20.385Z"),d(e,"viewBox","0 0 30 30"),d(e,"fill","none"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"class","svelte-d2loi5")},m(n,i){T(n,e,i),z(e,t)},p:F,i:F,o:F,d(n){n&&p(e)}}}class Pt extends te{constructor(e){super(),ne(this,e,null,kn,le,{})}}function wn(l){let e,t;return{c(){e=S("img"),ee(e.src,t=l[3]+"area.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){T(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"area.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function vn(l){let e,t;return{c(){e=S("img"),ee(e.src,t=l[3]+"reverse.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){T(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"reverse.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function Ln(l){let e,t;return{c(){e=S("img"),ee(e.src,t=l[3]+"poi.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){T(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"poi.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function Tn(l){let e,t;return{c(){e=S("img"),ee(e.src,t=l[3]+"postal_code.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){T(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"postal_code.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function pn(l){let e,t;return{c(){e=S("img"),ee(e.src,t=l[3]+"street.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){T(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"street.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function zn(l){let e,t;return{c(){e=S("img"),ee(e.src,t=l[3]+"road.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){T(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"road.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function Sn(l){let e,t;return{c(){e=S("img"),ee(e.src,t=l[3]+"housenumber.svg")||d(e,"src",t),d(e,"alt",l[6]),d(e,"class","svelte-ltkwvy")},m(n,i){T(n,e,i)},p(n,i){i&8&&!ee(e.src,t=n[3]+"housenumber.svg")&&d(e,"src",t),i&64&&d(e,"alt",n[6])},d(n){n&&p(e)}}}function Mn(l){let e,t,n,i;return{c(){e=S("img"),ee(e.src,t=l[5])||d(e,"src",t),d(e,"alt",l[4]),d(e,"class","svelte-ltkwvy")},m(o,r){T(o,e,r),n||(i=V(e,"error",l[14]),n=!0)},p(o,r){r&32&&!ee(e.src,t=o[5])&&d(e,"src",t),r&16&&d(e,"alt",o[4])},d(o){o&&p(e),n=!1,i()}}}function mt(l){let e,t;return{c(){e=S("span"),t=_e(l[6]),d(e,"class","secondary svelte-ltkwvy")},m(n,i){T(n,e,i),z(e,t)},p(n,i){i&64&&ze(t,n[6])},d(n){n&&p(e)}}}function Cn(l){let e,t,n,i,o,r,s,c,f,a=(l[7]?l[0].place_name:l[0].place_name.replace(/,.*/,""))+"",m,v,U=l[2]==="always"||l[2]!=="never"&&!l[0].address&&!l[0].id.startsWith("road.")&&!l[0].id.startsWith("address.")&&!l[0].id.startsWith("postal_code.")&&(!l[0].id.startsWith("poi.")||!l[5])&&!l[7],E,O,h=(l[7]?"":l[0].place_name.replace(/[^,]*,?\s*/,""))+"",M,A,k;function B(b,H){return H&1&&(t=null),H&1&&(n=null),H&1&&(i=null),H&1&&(o=null),b[5]?Mn:b[0].address?Sn:(t==null&&(t=!!b[0].id.startsWith("road.")),t?zn:(n==null&&(n=!!b[0].id.startsWith("address.")),n?pn:(i==null&&(i=!!b[0].id.startsWith("postal_code.")),i?Tn:(o==null&&(o=!!b[0].id.startsWith("poi.")),o?Ln:b[7]?vn:wn))))}let D=B(l,-1),j=D(l),g=U&&mt(l);return{c(){e=S("li"),j.c(),r=X(),s=S("span"),c=S("span"),f=S("span"),m=_e(a),v=X(),g&&g.c(),E=X(),O=S("span"),M=_e(h),d(f,"class","primary svelte-ltkwvy"),d(c,"class","svelte-ltkwvy"),d(O,"class","line2 svelte-ltkwvy"),d(s,"class","texts svelte-ltkwvy"),d(e,"tabindex","0"),d(e,"data-selected",l[1]),d(e,"class","svelte-ltkwvy"),be(e,"selected",l[1])},m(b,H){T(b,e,H),j.m(e,null),z(e,r),z(e,s),z(s,c),z(c,f),z(f,m),z(c,v),g&&g.m(c,null),z(s,E),z(s,O),z(O,M),A||(k=[V(e,"mouseenter",l[12]),V(e,"focus",l[13])],A=!0)},p(b,[H]){D===(D=B(b,H))&&j?j.p(b,H):(j.d(1),j=D(b),j&&(j.c(),j.m(e,r))),H&1&&a!==(a=(b[7]?b[0].place_name:b[0].place_name.replace(/,.*/,""))+"")&&ze(m,a),H&37&&(U=b[2]==="always"||b[2]!=="never"&&!b[0].address&&!b[0].id.startsWith("road.")&&!b[0].id.startsWith("address.")&&!b[0].id.startsWith("postal_code.")&&(!b[0].id.startsWith("poi.")||!b[5])&&!b[7]),U?g?g.p(b,H):(g=mt(b),g.c(),g.m(c,null)):g&&(g.d(1),g=null),H&1&&h!==(h=(b[7]?"":b[0].place_name.replace(/[^,]*,?\s*/,""))+"")&&ze(M,h),H&2&&d(e,"data-selected",b[1]),H&2&&be(e,"selected",b[1])},i:F,o:F,d(b){b&&p(e),j.d(),g&&g.d(),A=!1,Ve(k)}}}function In(l,e,t){var k;let n,i,{feature:o}=e,{selected:r=!1}=e,{showPlaceType:s}=e,{missingIconsCache:c}=e,{iconsBaseUrl:f}=e;const a=(k=o.properties)==null?void 0:k.categories;let m,v,U=0,E=o.place_type[0]==="reverse";function O(){v&&c.add(v),t(10,U++,U)}function h(B){oe.call(this,l,B)}function M(B){oe.call(this,l,B)}const A=()=>O();return l.$$set=B=>{"feature"in B&&t(0,o=B.feature),"selected"in B&&t(1,r=B.selected),"showPlaceType"in B&&t(2,s=B.showPlaceType),"missingIconsCache"in B&&t(9,c=B.missingIconsCache),"iconsBaseUrl"in B&&t(3,f=B.iconsBaseUrl)},l.$$.update=()=>{var B,D,j,g;if(l.$$.dirty&3640)do t(11,n--,n),t(4,m=a==null?void 0:a[n]),t(5,v=m?f+m.replace(/ /g,"_")+".svg":void 0);while(n>-1&&(!v||c.has(v)));l.$$.dirty&1&&t(6,i=((D=(B=o.properties)==null?void 0:B.categories)==null?void 0:D.join(", "))??((g=(j=o.properties)==null?void 0:j.place_type_name)==null?void 0:g[0])??o.place_type[0])},t(11,n=(a==null?void 0:a.length)??0),[o,r,s,f,m,v,i,E,O,c,U,n,h,M,A]}class Pn extends te{constructor(e){super(),ne(this,e,In,Cn,le,{feature:0,selected:1,showPlaceType:2,missingIconsCache:9,iconsBaseUrl:3})}}function Bn(l){let e;return{c(){e=S("div"),e.innerHTML='<svg viewBox="0 0 18 18" width="24" height="24" class="svelte-7cmwmc"><path fill="#333" d="M4.4 4.4l.8.8c2.1-2.1 5.5-2.1 7.6 0l.8-.8c-2.5-2.5-6.7-2.5-9.2 0z"></path><path opacity=".1" d="M12.8 12.9c-2.1 2.1-5.5 2.1-7.6 0-2.1-2.1-2.1-5.5 0-7.7l-.8-.8c-2.5 2.5-2.5 6.7 0 9.2s6.6 2.5 9.2 0 2.5-6.6 0-9.2l-.8.8c2.2 2.1 2.2 5.6 0 7.7z"></path></svg>',d(e,"class","svelte-7cmwmc")},m(t,n){T(t,e,n)},p:F,i:F,o:F,d(t){t&&p(e)}}}class Rn extends te{constructor(e){super(),ne(this,e,null,Bn,le,{})}}function Un(l){let e,t;return{c(){e=ge("svg"),t=ge("path"),d(t,"d","M30.003-26.765C13.46-26.765 0-14.158 0 1.337c0 23.286 24.535 42.952 28.39 46.04.24.192.402.316.471.376.323.282.732.424 1.142.424.41 0 .82-.142 1.142-.424.068-.06.231-.183.471-.376 3.856-3.09 28.39-22.754 28.39-46.04 0-15.495-13.46-28.102-30.003-28.102Zm1.757 12.469c4.38 0 7.858 1.052 10.431 3.158 2.595 2.105 3.89 4.913 3.89 8.422 0 2.34-.53 4.362-1.593 6.063-1.063 1.702-3.086 3.616-6.063 5.742-2.042 1.51-3.337 2.659-3.89 3.446-.532.787-.8 1.82-.8 3.096v1.914h-8.449V15.18c0-2.041.434-3.815 1.306-5.325.872-1.51 2.467-3.118 4.785-4.82 2.233-1.594 3.7-2.89 4.402-3.889a5.582 5.582 0 0 0 1.087-3.35c0-1.382-.51-2.435-1.531-3.158-1.02-.723-2.45-1.087-4.28-1.087-3.19 0-6.826 1.047-10.91 3.131l-3.472-6.986c4.742-2.659 9.77-3.992 15.087-3.992Zm-1.88 37.324c1.765 0 3.124.472 4.08 1.408.98.936 1.47 2.276 1.47 4.02 0 1.68-.49 3.007-1.47 3.985-.977.957-2.336 1.435-4.08 1.435-1.787 0-3.171-.465-4.15-1.4-.978-.958-1.47-2.298-1.47-4.02 0-1.787.48-3.14 1.436-4.054.957-.915 2.355-1.374 4.184-1.374Z"),d(e,"viewBox","0 0 60.006 21.412"),d(e,"width","14"),d(e,"height","20"),d(e,"class","svelte-en2qvf")},m(n,i){T(n,e,i),z(e,t)},p:F,i:F,o:F,d(n){n&&p(e)}}}class En extends te{constructor(e){super(),ne(this,e,null,Un,le,{})}}function An(l){let e,t,n;return{c(){e=ge("svg"),t=ge("circle"),n=ge("path"),d(t,"cx","4.789"),d(t,"cy","4.787"),d(t,"r","3.85"),d(t,"class","svelte-1aq105l"),d(n,"d","M12.063 12.063 7.635 7.635"),d(n,"class","svelte-1aq105l"),d(e,"xmlns","http://www.w3.org/2000/svg"),d(e,"width","13"),d(e,"height","13"),d(e,"viewBox","0 0 13 13"),d(e,"class","svelte-1aq105l")},m(i,o){T(i,e,o),z(e,t),z(e,n)},p:F,i:F,o:F,d(i){i&&p(e)}}}class jn extends te{constructor(e){super(),ne(this,e,null,An,le,{})}}function Hn(l,e,t){const n=e[1],i=e[0],o=n-i;return l===n&&t?l:((l-i)%o+o)%o+i}function gt(l){const e=[...l];return e[2]<e[0]&&(Math.abs((e[0]+e[2]+360)/2)>Math.abs((e[0]-360+e[2])/2)?e[0]-=360:e[2]+=360),e}let Be;async function On(l,e,t){const n=l==null?void 0:l.getCenterAndZoom();for(const i of e??[])if(!(n&&(i.minZoom!=null&&i.minZoom>n[0]||i.maxZoom!=null&&i.maxZoom<n[0]))){if(i.type==="fixed")return i.coordinates.join(",");e:if(i.type==="client-geolocation"){if(Be&&i.cachedLocationExpiry&&Be.time+i.cachedLocationExpiry>Date.now()){if(!Be.coords)break e;return Be.coords}let o;try{return o=await new Promise((r,s)=>{t.signal.addEventListener("abort",()=>{s(Error("aborted"))}),navigator.geolocation.getCurrentPosition(c=>{r([c.coords.longitude,c.coords.latitude].map(f=>f.toFixed(6)).join(","))},c=>{s(c)},i)}),o}catch{}finally{i.cachedLocationExpiry&&(Be={time:Date.now(),coords:o})}if(t.signal.aborted)return}if(i.type==="server-geolocation")return"ip";if(n&&i.type==="map-center")return n[1].toFixed(6)+","+n[2].toFixed(6)}}function _t(l,e,t){const n=l.slice();return n[84]=e[t],n[86]=t,n}function ht(l){let e,t;return e=new Rn({}),{c(){Y(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function bt(l){let e,t,n,i,o;return t=new En({}),{c(){e=S("button"),Y(t.$$.fragment),d(e,"type","button"),d(e,"title",l[9]),d(e,"class","svelte-bz0zu3"),be(e,"active",l[0])},m(r,s){T(r,e,s),x(t,e,null),n=!0,i||(o=V(e,"click",l[69]),i=!0)},p(r,s){(!n||s[0]&512)&&d(e,"title",r[9]),(!n||s[0]&1)&&be(e,"active",r[0])},i(r){n||(L(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){r&&p(e),$(t),i=!1,o()}}}function Wn(l){let e,t=[],n=new Map,i,o,r,s=ot(l[14]);const c=f=>f[84].id+(f[84].address?","+f[84].address:"");for(let f=0;f<s.length;f+=1){let a=_t(l,s,f),m=c(a);n.set(m,t[f]=yt(m,a))}return{c(){e=S("ul");for(let f=0;f<t.length;f+=1)t[f].c();d(e,"class","options svelte-bz0zu3")},m(f,a){T(f,e,a);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);i=!0,o||(r=[V(e,"mouseleave",l[73]),V(e,"blur",l[74])],o=!0)},p(f,a){a[0]&17880064&&(s=ot(f[14]),we(),t=$t(t,a,c,1,f,s,n,e,en,yt,null,_t),ve())},i(f){if(!i){for(let a=0;a<s.length;a+=1)L(t[a]);i=!0}},o(f){for(let a=0;a<t.length;a+=1)I(t[a]);i=!1},d(f){f&&p(e);for(let a=0;a<t.length;a+=1)t[a].d();o=!1,Ve(r)}}}function Fn(l){let e,t,n,i,o,r;return t=new Pt({}),{c(){e=S("div"),Y(t.$$.fragment),n=X(),i=S("div"),o=_e(l[7]),d(i,"class","svelte-bz0zu3"),d(e,"class","no-results svelte-bz0zu3")},m(s,c){T(s,e,c),x(t,e,null),z(e,n),z(e,i),z(i,o),r=!0},p(s,c){(!r||c[0]&128)&&ze(o,s[7])},i(s){r||(L(t.$$.fragment,s),r=!0)},o(s){I(t.$$.fragment,s),r=!1},d(s){s&&p(e),$(t)}}}function Zn(l){let e="",t;return{c(){t=_e(e)},m(n,i){T(n,t,i)},p:F,i:F,o:F,d(n){n&&p(t)}}}function Vn(l){let e,t,n,i,o,r,s,c,f,a,m;return t=new Pt({}),c=new It({}),{c(){e=S("div"),Y(t.$$.fragment),n=X(),i=S("div"),o=_e(l[6]),r=X(),s=S("button"),Y(c.$$.fragment),d(i,"class","svelte-bz0zu3"),d(s,"class","svelte-bz0zu3"),d(e,"class","error svelte-bz0zu3")},m(v,U){T(v,e,U),x(t,e,null),z(e,n),z(e,i),z(i,o),z(e,r),z(e,s),x(c,s,null),f=!0,a||(m=V(s,"click",l[70]),a=!0)},p(v,U){(!f||U[0]&64)&&ze(o,v[6])},i(v){f||(L(t.$$.fragment,v),L(c.$$.fragment,v),f=!0)},o(v){I(t.$$.fragment,v),I(c.$$.fragment,v),f=!1},d(v){v&&p(e),$(t),$(c),a=!1,m()}}}function yt(l,e){let t,n,i;function o(){return e[71](e[86])}function r(){return e[72](e[84])}return n=new Pn({props:{feature:e[84],showPlaceType:e[10],selected:e[15]===e[86],missingIconsCache:e[20],iconsBaseUrl:e[12]}}),n.$on("mouseenter",o),n.$on("focus",r),{key:l,first:null,c(){t=Ue(),Y(n.$$.fragment),this.first=t},m(s,c){T(s,t,c),x(n,s,c),i=!0},p(s,c){e=s;const f={};c[0]&16384&&(f.feature=e[84]),c[0]&1024&&(f.showPlaceType=e[10]),c[0]&49152&&(f.selected=e[15]===e[86]),c[0]&4096&&(f.iconsBaseUrl=e[12]),n.$set(f)},i(s){i||(L(n.$$.fragment,s),i=!0)},o(s){I(n.$$.fragment,s),i=!1},d(s){s&&p(t),$(n,s)}}}function Dn(l){let e,t,n,i,o,r,s,c,f,a,m,v,U,E,O,h,M,A,k,B,D,j=!1;o=new jn({}),m=new It({});let g=l[19]&&ht(),b=l[5]==="button"&&bt(l);const H=l[61].default,J=Se(H,l,l[60],null),G=[Vn,Zn,Fn,Wn],_=[];function ye(y,W){var se,me;return y[18]?0:y[16]?((se=y[14])==null?void 0:se.length)===0?2:y[16]&&((me=y[14])!=null&&me.length)?3:-1:1}return~(h=ye(l))&&(M=_[h]=G[h](l)),{c(){e=X(),t=S("form"),n=S("div"),i=S("button"),Y(o.$$.fragment),r=X(),s=S("input"),c=X(),f=S("div"),a=S("button"),Y(m.$$.fragment),v=X(),g&&g.c(),U=X(),b&&b.c(),E=X(),J&&J.c(),O=X(),M&&M.c(),d(i,"class","search-button svelte-bz0zu3"),d(i,"type","button"),d(s,"placeholder",l[8]),d(s,"aria-label",l[8]),d(s,"class","svelte-bz0zu3"),d(a,"type","button"),d(a,"title",l[3]),d(a,"class","svelte-bz0zu3"),d(f,"class","clear-button-container svelte-bz0zu3"),be(f,"displayable",l[1]!==""),d(n,"class","input-group svelte-bz0zu3"),d(t,"tabindex","0"),d(t,"class",A=We(l[2])+" svelte-bz0zu3"),be(t,"can-collapse",l[4]&&l[1]==="")},m(y,W){T(y,e,W),T(y,t,W),z(t,n),z(n,i),x(o,i,null),z(n,r),z(n,s),l[63](s),st(s,l[1]),z(n,c),z(n,f),z(f,a),x(m,a,null),z(f,v),g&&g.m(f,null),z(n,U),b&&b.m(n,null),z(n,E),J&&J.m(n,null),z(t,O),~h&&_[h].m(t,null),k=!0,B||(D=[V(i,"click",l[62]),V(s,"input",l[64]),V(s,"focus",l[65]),V(s,"blur",l[66]),V(s,"keydown",l[22]),V(s,"input",l[67]),V(a,"click",l[68]),V(t,"submit",Lt(l[21]))],B=!0)},p(y,W){(!k||W[0]&256)&&d(s,"placeholder",y[8]),(!k||W[0]&256)&&d(s,"aria-label",y[8]),W[0]&2&&s.value!==y[1]&&st(s,y[1]),(!k||W[0]&8)&&d(a,"title",y[3]),y[19]?g?W[0]&524288&&L(g,1):(g=ht(),g.c(),L(g,1),g.m(f,null)):g&&(we(),I(g,1,1,()=>{g=null}),ve()),(!k||W[0]&2)&&be(f,"displayable",y[1]!==""),y[5]==="button"?b?(b.p(y,W),W[0]&32&&L(b,1)):(b=bt(y),b.c(),L(b,1),b.m(n,E)):b&&(we(),I(b,1,1,()=>{b=null}),ve()),J&&J.p&&(!k||W[1]&536870912)&&Me(J,H,y,y[60],k?Ie(H,y[60],W,null):Ce(y[60]),null);let se=h;h=ye(y),h===se?~h&&_[h].p(y,W):(M&&(we(),I(_[se],1,1,()=>{_[se]=null}),ve()),~h?(M=_[h],M?M.p(y,W):(M=_[h]=G[h](y),M.c()),L(M,1),M.m(t,null)):M=null),(!k||W[0]&4&&A!==(A=We(y[2])+" svelte-bz0zu3"))&&d(t,"class",A),(!k||W[0]&22)&&be(t,"can-collapse",y[4]&&y[1]==="")},i(y){k||(L(j),L(o.$$.fragment,y),L(m.$$.fragment,y),L(g),L(b),L(J,y),L(M),k=!0)},o(y){I(j),I(o.$$.fragment,y),I(m.$$.fragment,y),I(g),I(b),I(J,y),I(M),k=!1},d(y){y&&(p(e),p(t)),$(o),l[63](null),$(m),g&&g.d(),b&&b.d(),J&&J.d(y),~h&&_[h].d(),B=!1,Ve(D)}}}function qn(l,e,t){let n,i,{$$slots:o={},$$scope:r}=e;const s={continental_marine:4,country:4,major_landform:8,region:5,subregion:6,county:7,joint_municipality:8,joint_submunicipality:9,municipality:10,municipal_district:11,locality:12,neighbourhood:13,place:14,postal_code:14,road:16,poi:17,address:18,"poi.peak":15,"poi.shop":18,"poi.cafe":18,"poi.restaurant":18,"poi.aerodrome":13};let{class:c=void 0}=e,{apiKey:f}=e,{bbox:a=void 0}=e,{clearButtonTitle:m="clear"}=e,{clearOnBlur:v=!1}=e,{collapsed:U=!1}=e,{country:E=void 0}=e,{debounceSearch:O=200}=e,{enableReverse:h="never"}=e,{errorMessage:M="Something went wrong…"}=e,{filter:A=()=>!0}=e,{flyTo:k=!0}=e,{fuzzyMatch:B=!0}=e,{language:D=void 0}=e,{limit:j=void 0}=e,{mapController:g=void 0}=e,{minLength:b=2}=e,{noResultsMessage:H="Oops! Looks like you're trying to predict something that's not quite right. We can't seem to find what you're looking for. Maybe try double-checking your spelling or try a different search term. Keep on typing - we'll do our best to get you where you need to go!"}=e,{placeholder:J="Search"}=e,{proximity:G=[{type:"server-geolocation"}]}=e,{reverseActive:_=h==="always"}=e,{reverseButtonTitle:ye="toggle reverse geocoding"}=e,{searchValue:y=""}=e,{pickedResultStyle:W="full-geometry"}=e,{showPlaceType:se="if-needed"}=e,{showResultsWhileTyping:me=!0}=e,{selectFirst:w=!0}=e,{flyToSelected:ae=!1}=e,{markerOnSelected:fe=!0}=e,{types:ie=void 0}=e,{exhaustiveReverseGeocoding:De=!1}=e,{excludeTypes:Ee=!1}=e,{zoom:Ae=s}=e,{apiUrl:qe="https://api.maptiler.com/geocoding"}=e,{fetchParameters:Ge={}}=e,{iconsBaseUrl:tt="https://cdn.maptiler.com/maptiler-geocoding-control/v2.0.1/icons/"}=e,{adjustUrlQuery:Ke=()=>{}}=e;function Bt(){ue.focus()}function Rt(){ue.blur()}function nt(u,q=!0,N=!1){t(1,y=u),q?(t(15,Z=-1),it()):(Xe(!N,N),setTimeout(()=>{ue.focus(),ue.select()}))}function Ut(){t(14,R=void 0),t(56,C=void 0),t(15,Z=-1)}function Et(){t(55,K=[]),t(56,C=void 0)}let Le=!1,R,K,C,lt="",ue,Z=-1,ce,je=[],ke,Te,He,Qe;const At=new Set,he=Tt();pt(()=>{g&&(g.setEventHandler(void 0),g.indicateReverse(!1),g.setSelectedMarker(-1),g.setFeatures(void 0,void 0,!1))});function it(u){if(Te&&(clearTimeout(Te),Te=void 0),Z>-1&&R)t(56,C=R[Z]),t(1,y=C.place_type[0]==="reverse"?C.place_name:C.place_name.replace(/,.*/,"")),t(18,ce=void 0),t(55,K=void 0),t(15,Z=-1);else if(y){const q=u||!Ne(y);Je(y,{exact:!0}).then(()=>{t(55,K=R),t(56,C=void 0),q&&jt()}).catch(N=>t(18,ce=N))}}function Ne(u){try{return tn(u,6)}catch{return!1}}async function Je(u,{byId:q=!1,exact:N=!1}={}){t(18,ce=void 0),ke==null||ke.abort();const re=new AbortController;t(19,ke=re);try{const P=Ne(u),Q=new URLSearchParams;if(D!==void 0&&Q.set("language",Array.isArray(D)?D.join(","):D??""),ie&&Q.set("types",ie.join(",")),Ee&&Q.set("excludeTypes",String(Ee)),a&&Q.set("bbox",a.map(Oe=>Oe.toFixed(6)).join(",")),E&&Q.set("country",Array.isArray(E)?E.join(","):E),!q&&!P){const Oe=await On(g,G,re);Oe&&Q.set("proximity",Oe),(N||!me)&&Q.set("autocomplete","false"),Q.set("fuzzyMatch",String(B))}j!==void 0&&(De||!P||(ie==null?void 0:ie.length)===1)&&Q.set("limit",String(j)),Q.set("key",f),Ke(Q);const de=qe+"/"+encodeURIComponent(P?P.decimalLongitude+","+P.decimalLatitude:u)+".json?"+Q.toString();if(de===lt){q?(t(14,R=void 0),t(56,C=je[0])):t(14,R=je);return}lt=de;const xe=await fetch(de,{signal:re.signal,...Ge});if(!xe.ok)throw new Error(await xe.text());const $e=await xe.json();he("response",{url:de,featureCollection:$e}),q?(t(14,R=void 0),t(56,C=$e.features[0]),je=[C]):(t(14,R=$e.features.filter(A)),P&&R.unshift({type:"Feature",properties:{},id:"reverse_"+P.decimalLongitude+"_"+P.decimalLatitude,text:P.decimalLatitude+", "+P.decimalLongitude,place_name:P.decimalLatitude+", "+P.decimalLongitude,place_type:["reverse"],center:[P.decimalLongitude,P.decimalLatitude],bbox:[P.decimalLongitude,P.decimalLatitude,P.decimalLongitude,P.decimalLatitude],geometry:{type:"Point",coordinates:[P.decimalLongitude,P.decimalLatitude]}}),je=R,P&&ue.focus())}catch(P){if(P&&typeof P=="object"&&"name"in P&&P.name==="AbortError")return;throw P}finally{re===ke&&t(19,ke=void 0)}}function jt(){var re;if(!(K!=null&&K.length)||!k)return;const u=[180,90,-180,-90],q=!K.some(P=>!P.matching_text);let N;for(const P of K){const Q=Pe(P);if(N=N===void 0?Q:Q===void 0?N:Math.max(N,Q),q||!P.matching_text)for(const de of[0,1,2,3])u[de]=Math[de<2?"min":"max"](u[de],((re=P.bbox)==null?void 0:re[de])??P.center[de%2])}g&&K.length>0&&(C&&u[0]===u[2]&&u[1]===u[3]?g.flyTo(C.center,Pe(C)):g.fitBounds(gt(u),50,N))}function Pe(u){var N;if(!u.bbox||u.bbox[0]!==u.bbox[2]&&u.bbox[1]!==u.bbox[3])return;const q=u.id.replace(/\..*/,"");return(Array.isArray((N=u.properties)==null?void 0:N.categories)?u.properties.categories.reduce((re,P)=>{const Q=Ae[q+"."+P];return re===void 0?Q:Q===void 0?re:Math.max(re,Q)},void 0):void 0)??Ae[q]}function Ht(u){t(0,_=h==="always"),t(14,R=void 0),t(56,C=void 0),t(15,Z=-1),nt(u[1].toFixed(6)+", "+Hn(u[0],[-180,180],!0).toFixed(6),!1,!0)}function Ot(u){if(!R)return;let q=u.key==="ArrowDown"?1:u.key==="ArrowUp"?-1:0;q&&(Z===(w?0:-1)&&q===-1&&t(15,Z=R.length),t(15,Z+=q),Z>=R.length&&t(15,Z=-1),Z<0&&w&&t(15,Z=0),u.preventDefault())}function Xe(u=!0,q=!1){if(t(18,ce=void 0),me||q){if(Te&&clearTimeout(Te),y.length<b)return;const N=y;Te=window.setTimeout(()=>{Je(N).catch(re=>t(18,ce=re))},u?O:0)}else t(14,R=void 0),t(18,ce=void 0)}function Ye(u){t(56,C=u),t(1,y=u.place_name),t(15,Z=-1)}const Wt=()=>ue.focus();function Ft(u){Re[u?"unshift":"push"](()=>{ue=u,t(17,ue)})}function Zt(){y=this.value,t(1,y),t(13,Le),t(28,v)}const Vt=()=>t(13,Le=!0),Dt=()=>t(13,Le=!1),qt=()=>Xe(),Gt=()=>{t(1,y=""),ue.focus()},Kt=()=>t(0,_=!_),Qt=()=>t(18,ce=void 0),Nt=u=>t(15,Z=u),Jt=u=>Ye(u),Xt=()=>{w||t(15,Z=-1)},Yt=()=>{};return l.$$set=u=>{"class"in u&&t(2,c=u.class),"apiKey"in u&&t(26,f=u.apiKey),"bbox"in u&&t(27,a=u.bbox),"clearButtonTitle"in u&&t(3,m=u.clearButtonTitle),"clearOnBlur"in u&&t(28,v=u.clearOnBlur),"collapsed"in u&&t(4,U=u.collapsed),"country"in u&&t(29,E=u.country),"debounceSearch"in u&&t(30,O=u.debounceSearch),"enableReverse"in u&&t(5,h=u.enableReverse),"errorMessage"in u&&t(6,M=u.errorMessage),"filter"in u&&t(31,A=u.filter),"flyTo"in u&&t(32,k=u.flyTo),"fuzzyMatch"in u&&t(33,B=u.fuzzyMatch),"language"in u&&t(34,D=u.language),"limit"in u&&t(35,j=u.limit),"mapController"in u&&t(36,g=u.mapController),"minLength"in u&&t(37,b=u.minLength),"noResultsMessage"in u&&t(7,H=u.noResultsMessage),"placeholder"in u&&t(8,J=u.placeholder),"proximity"in u&&t(38,G=u.proximity),"reverseActive"in u&&t(0,_=u.reverseActive),"reverseButtonTitle"in u&&t(9,ye=u.reverseButtonTitle),"searchValue"in u&&t(1,y=u.searchValue),"pickedResultStyle"in u&&t(39,W=u.pickedResultStyle),"showPlaceType"in u&&t(10,se=u.showPlaceType),"showResultsWhileTyping"in u&&t(40,me=u.showResultsWhileTyping),"selectFirst"in u&&t(11,w=u.selectFirst),"flyToSelected"in u&&t(41,ae=u.flyToSelected),"markerOnSelected"in u&&t(42,fe=u.markerOnSelected),"types"in u&&t(43,ie=u.types),"exhaustiveReverseGeocoding"in u&&t(44,De=u.exhaustiveReverseGeocoding),"excludeTypes"in u&&t(45,Ee=u.excludeTypes),"zoom"in u&&t(46,Ae=u.zoom),"apiUrl"in u&&t(47,qe=u.apiUrl),"fetchParameters"in u&&t(48,Ge=u.fetchParameters),"iconsBaseUrl"in u&&t(12,tt=u.iconsBaseUrl),"adjustUrlQuery"in u&&t(49,Ke=u.adjustUrlQuery),"$$scope"in u&&t(60,r=u.$$scope)},l.$$.update=()=>{if(l.$$.dirty[0]&32&&t(0,_=h==="always"),l.$$.dirty[0]&268443648&&setTimeout(()=>{t(16,He=Le),v&&!Le&&t(1,y="")}),l.$$.dirty[0]&16386|l.$$.dirty[1]&64&&y.length<b&&(t(56,C=void 0),t(14,R=void 0),t(18,ce=void 0),t(55,K=R)),l.$$.dirty[1]&33554688&&W!=="marker-only"&&C&&!C.address&&C.geometry.type==="Point"&&C.place_type[0]!=="reverse"&&Je(C.id,{byId:!0}).catch(u=>t(18,ce=u)),l.$$.dirty[1]&100663330&&(g&&C&&C.id!==Qe&&k&&(!C.bbox||C.bbox[0]===C.bbox[2]&&C.bbox[1]===C.bbox[3]?g.flyTo(C.center,Pe(C)):g.fitBounds(gt(C.bbox),50,Pe(C)),t(14,R=void 0),t(55,K=void 0),t(15,Z=-1)),t(57,Qe=C==null?void 0:C.id)),l.$$.dirty[0]&18432&&w&&R!=null&&R.length&&t(15,Z=0),l.$$.dirty[0]&2&&t(15,Z=-1),l.$$.dirty[0]&16384|l.$$.dirty[1]&16777216&&K!==R&&t(55,K=void 0),l.$$.dirty[0]&81921|l.$$.dirty[1]&16777248&&g&&g.setEventHandler(u=>{switch(u.type){case"mapClick":_&&Ht(u.coordinates);break;case"markerClick":{const q=R==null?void 0:R.find(N=>N.id===u.id);q&&Ye(q)}break;case"markerMouseEnter":K&&t(15,Z=He?(R==null?void 0:R.findIndex(q=>q.id===u.id))??-1:-1);break;case"markerMouseLeave":K&&t(15,Z=-1);break}}),l.$$.dirty[0]&49152&&t(58,i=R==null?void 0:R[Z]),l.$$.dirty[1]&134218786&&g&&i&&k&&ae&&g.flyTo(i.center,Pe(i)),l.$$.dirty[1]&256&&t(59,n=W==="full-geometry-including-polygon-center-marker"),l.$$.dirty[1]&268437536&&(fe||g==null||g.setFeatures(void 0,void 0,n)),l.$$.dirty[1]&419432480&&g&&fe&&!K&&(g.setFeatures(i?[i]:void 0,void 0,n),g.setSelectedMarker(i?0:-1)),l.$$.dirty[1]&318767136&&g&&g.setFeatures(K,C,n),l.$$.dirty[0]&32768|l.$$.dirty[1]&16777248&&K&&g&&g.setSelectedMarker(Z),l.$$.dirty[0]&2|l.$$.dirty[1]&32&&g){const u=Ne(y);g.setReverseMarker(u?[u.decimalLongitude,u.decimalLatitude]:void 0)}l.$$.dirty[1]&134217728&&he("select",{feature:i}),l.$$.dirty[1]&33554432&&he("pick",{feature:C}),l.$$.dirty[0]&81920&&he("optionsvisibilitychange",{optionsVisible:He&&!!R}),l.$$.dirty[0]&16384&&he("featureslisted",{features:R}),l.$$.dirty[1]&16777216&&he("featuresmarked",{features:K}),l.$$.dirty[0]&1&&he("reversetoggle",{reverse:_}),l.$$.dirty[0]&2&&he("querychange",{query:y}),l.$$.dirty[0]&1|l.$$.dirty[1]&32&&g&&g.indicateReverse(_)},[_,y,c,m,U,h,M,H,J,ye,se,w,tt,Le,R,Z,He,ue,ce,ke,At,it,Ot,Xe,Ye,s,f,a,v,E,O,A,k,B,D,j,g,b,G,W,me,ae,fe,ie,De,Ee,Ae,qe,Ge,Ke,Bt,Rt,nt,Ut,Et,K,C,Qe,i,n,r,o,Wt,Ft,Zt,Vt,Dt,qt,Gt,Kt,Qt,Nt,Jt,Xt,Yt]}class Gn extends te{constructor(e){super(),ne(this,e,qn,Dn,le,{ZOOM_DEFAULTS:25,class:2,apiKey:26,bbox:27,clearButtonTitle:3,clearOnBlur:28,collapsed:4,country:29,debounceSearch:30,enableReverse:5,errorMessage:6,filter:31,flyTo:32,fuzzyMatch:33,language:34,limit:35,mapController:36,minLength:37,noResultsMessage:7,placeholder:8,proximity:38,reverseActive:0,reverseButtonTitle:9,searchValue:1,pickedResultStyle:39,showPlaceType:10,showResultsWhileTyping:40,selectFirst:11,flyToSelected:41,markerOnSelected:42,types:43,exhaustiveReverseGeocoding:44,excludeTypes:45,zoom:46,apiUrl:47,fetchParameters:48,iconsBaseUrl:12,adjustUrlQuery:49,focus:50,blur:51,setQuery:52,clearList:53,clearMap:54},null,[-1,-1,-1])}get ZOOM_DEFAULTS(){return this.$$.ctx[25]}get focus(){return this.$$.ctx[50]}get blur(){return this.$$.ctx[51]}get setQuery(){return this.$$.ctx[52]}get clearList(){return this.$$.ctx[53]}get clearMap(){return this.$$.ctx[54]}}function kt(l){let e,t,n,i;return t=new Gn({props:{mapController:l[1],apiKey:"MZEJTanw3WpxRvt7qDfo",country:"gb"}}),{c(){e=S("div"),Y(t.$$.fragment),d(e,"class",n=We(l[0])+" svelte-189syb7")},m(o,r){T(o,e,r),x(t,e,null),i=!0},p(o,r){const s={};r&2&&(s.mapController=o[1]),t.$set(s),(!i||r&1&&n!==(n=We(o[0])+" svelte-189syb7"))&&d(e,"class",n)},i(o){i||(L(t.$$.fragment,o),i=!0)},o(o){I(t.$$.fragment,o),i=!1},d(o){o&&p(e),$(t)}}}function Kn(l){let e,t,n=l[1]&&kt(l);return{c(){n&&n.c(),e=Ue()},m(i,o){n&&n.m(i,o),T(i,e,o),t=!0},p(i,[o]){i[1]?n?(n.p(i,o),o&2&&L(n,1)):(n=kt(i),n.c(),L(n,1),n.m(e.parentNode,e)):n&&(we(),I(n,1,1,()=>{n=null}),ve())},i(i){t||(L(n),t=!0)},o(i){I(n),t=!1},d(i){i&&p(e),n&&n.d(i)}}}function Qn(l,e,t){let n;pe(l,nn,r=>t(2,n=r));let{position:i="top-left"}=e,o;return ln(()=>{t(1,o=on(n,zt))}),l.$$set=r=>{"position"in r&&t(0,i=r.position)},[i,o]}class Hl extends te{constructor(e){super(),ne(this,e,Qn,Kn,le,{position:0})}}function Nn(l){let e;const t=l[16].default,n=Se(t,l,l[24],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&16777216)&&Me(n,t,i,i[24],e?Ie(t,i[24],o,null):Ce(i[24]),null)},i(i){e||(L(n,i),e=!0)},o(i){I(n,i),e=!1},d(i){n&&n.d(i)}}}function Jn(l){let e,t,n;function i(r){l[17](r)}let o={id:l[1],type:"circle",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[Nn]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new St({props:o}),Re.push(()=>Fe(e,"hovered",i)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){Y(e.$$.fragment)},m(r,s){x(e,r,s),n=!0},p(r,[s]){const c={};s&2&&(c.id=r[1]),s&4&&(c.source=r[2]),s&8&&(c.sourceLayer=r[3]),s&16&&(c.beforeId=r[4]),s&32&&(c.beforeLayerType=r[5]),s&64&&(c.paint=r[6]),s&128&&(c.layout=r[7]),s&256&&(c.filter=r[8]),s&512&&(c.applyToClusters=r[9]),s&1024&&(c.minzoom=r[10]),s&2048&&(c.maxzoom=r[11]),s&4096&&(c.hoverCursor=r[12]),s&8192&&(c.manageHoverState=r[13]),s&16384&&(c.eventsIfTopMost=r[14]),s&32768&&(c.interactive=r[15]),s&16777216&&(c.$$scope={dirty:s,ctx:r}),!t&&s&1&&(t=!0,c.hovered=r[0],Ze(()=>t=!1)),e.$set(c)},i(r){n||(L(e.$$.fragment,r),n=!0)},o(r){I(e.$$.fragment,r),n=!1},d(r){$(e,r)}}}function Xn(l,e,t){let{$$slots:n={},$$scope:i}=e,{id:o=Mt("circle")}=e,{source:r=void 0}=e,{sourceLayer:s=void 0}=e,{beforeId:c=void 0}=e,{beforeLayerType:f=void 0}=e,{paint:a}=e,{layout:m=void 0}=e,{filter:v=void 0}=e,{applyToClusters:U=void 0}=e,{minzoom:E=void 0}=e,{maxzoom:O=void 0}=e,{hoverCursor:h=void 0}=e,{manageHoverState:M=!1}=e,{hovered:A=null}=e,{eventsIfTopMost:k=!1}=e,{interactive:B=!0}=e;function D(_){A=_,t(0,A)}function j(_){oe.call(this,l,_)}function g(_){oe.call(this,l,_)}function b(_){oe.call(this,l,_)}function H(_){oe.call(this,l,_)}function J(_){oe.call(this,l,_)}function G(_){oe.call(this,l,_)}return l.$$set=_=>{"id"in _&&t(1,o=_.id),"source"in _&&t(2,r=_.source),"sourceLayer"in _&&t(3,s=_.sourceLayer),"beforeId"in _&&t(4,c=_.beforeId),"beforeLayerType"in _&&t(5,f=_.beforeLayerType),"paint"in _&&t(6,a=_.paint),"layout"in _&&t(7,m=_.layout),"filter"in _&&t(8,v=_.filter),"applyToClusters"in _&&t(9,U=_.applyToClusters),"minzoom"in _&&t(10,E=_.minzoom),"maxzoom"in _&&t(11,O=_.maxzoom),"hoverCursor"in _&&t(12,h=_.hoverCursor),"manageHoverState"in _&&t(13,M=_.manageHoverState),"hovered"in _&&t(0,A=_.hovered),"eventsIfTopMost"in _&&t(14,k=_.eventsIfTopMost),"interactive"in _&&t(15,B=_.interactive),"$$scope"in _&&t(24,i=_.$$scope)},[A,o,r,s,c,f,a,m,v,U,E,O,h,M,k,B,n,D,j,g,b,H,J,G,i]}class Ol extends te{constructor(e){super(),ne(this,e,Xn,Jn,le,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}const Yn=l=>({marker:l&8}),wt=l=>({marker:l[3]});function xn(l){let e,t,n,i,o,r,s;const c=l[19].default,f=Se(c,l,l[18],wt);return{c(){e=S("div"),f&&f.c(),d(e,"tabindex",t=l[1]?0:void 0),d(e,"role",n=l[1]?"button":void 0),at(e,"z-index",l[2])},m(a,m){T(a,e,m),f&&f.m(e,null),o=!0,r||(s=[ft(l[7].call(null,e)),ft(i=$n.call(null,e,l[0])),V(e,"click",et(l[20])),V(e,"dblclick",et(l[21])),V(e,"contextmenu",et(Lt(l[22]))),V(e,"mouseenter",l[23]),V(e,"mouseleave",l[24]),V(e,"mousemove",l[25]),V(e,"keydown",l[8])],r=!0)},p(a,[m]){f&&f.p&&(!o||m&262152)&&Me(f,c,a,a[18],o?Ie(c,a[18],m,Yn):Ce(a[18]),wt),(!o||m&2&&t!==(t=a[1]?0:void 0))&&d(e,"tabindex",t),(!o||m&2&&n!==(n=a[1]?"button":void 0))&&d(e,"role",n),i&&rn(i.update)&&m&1&&i.update.call(null,a[0]),m&4&&at(e,"z-index",a[2])},i(a){o||(L(f,a),o=!0)},o(a){I(f,a),o=!1},d(a){a&&p(e),f&&f.d(a),r=!1,Ve(s)}}}function $n(l,e){const t=l.className;function n(i){i?l.className=`${t} ${i}`:l.className=t}return n(e),{update:n}}function el(l,e,t){let n,i,o,{$$slots:r={},$$scope:s}=e,{marker:c=void 0}=e,{lngLat:f}=e,{class:a=void 0}=e,{interactive:m=!0}=e,{asButton:v=!1}=e,{draggable:U=!1}=e,{feature:E=null}=e,{offset:O=void 0}=e,{zIndex:h=void 0}=e,{rotation:M=0}=e,{opacity:A=1}=e;const k=Tt(),{map:B,layerEvent:D,self:j,markerClickManager:g}=fn();pe(l,B,w=>t(27,o=w)),pe(l,D,w=>t(26,n=w)),pe(l,j,w=>t(3,i=w));function b(w){ut(j,i=new zt.Marker({element:w,rotation:M,draggable:U,offset:O,opacity:A.toString()}).setLngLat(f).addTo(o),i),t(11,c=i);const ae=()=>G("dragstart"),fe=()=>{H(),G("drag")},ie=()=>{H(),G("dragend")};return U&&(i.on("dragstart",ae),i.on("drag",fe),i.on("dragend",ie)),{destroy(){U&&(i==null||i.off("dragstart",ae),i==null||i.off("drag",fe),i==null||i.off("dragend",ie)),t(11,c=void 0),i==null||i.remove()}}}function H(){let w=i==null?void 0:i.getLngLat();w&&(Array.isArray(f)?t(10,f=[w.lng,w.lat]):f&&"lon"in f?t(10,f={lon:w.lng,lat:w.lat}):t(10,f=w))}function J(w){w.key===" "&&(w.preventDefault(),w.stopPropagation(),G("click"))}function G(w){if(!m)return;let ae=i==null?void 0:i.getLngLat();if(!ae)return;const fe=[ae.lng,ae.lat];let ie={map:o,marker:i,lngLat:fe,features:[{type:"Feature",properties:(E==null?void 0:E.properties)??{},geometry:{type:"Point",coordinates:fe}}]};(w==="click"||w==="contextmenu")&&g.handleClick(ie),ut(D,n={...ie,layerType:"marker",type:w},n),k(w,ie)}const _=()=>G("click"),ye=()=>G("dblclick"),y=()=>{G("contextmenu")},W=()=>{G("mouseenter")},se=()=>{G("mouseleave")},me=()=>G("mousemove");return l.$$set=w=>{"marker"in w&&t(11,c=w.marker),"lngLat"in w&&t(10,f=w.lngLat),"class"in w&&t(0,a=w.class),"interactive"in w&&t(12,m=w.interactive),"asButton"in w&&t(1,v=w.asButton),"draggable"in w&&t(13,U=w.draggable),"feature"in w&&t(14,E=w.feature),"offset"in w&&t(15,O=w.offset),"zIndex"in w&&t(2,h=w.zIndex),"rotation"in w&&t(16,M=w.rotation),"opacity"in w&&t(17,A=w.opacity),"$$scope"in w&&t(18,s=w.$$scope)},l.$$.update=()=>{l.$$.dirty&1032&&(i==null||i.setLngLat(f)),l.$$.dirty&32776&&(i==null||i.setOffset(O??[0,0])),l.$$.dirty&65544&&(i==null||i.setRotation(M)),l.$$.dirty&131080&&(i==null||i.setOpacity(A.toString()))},[a,v,h,i,B,D,j,b,J,G,f,c,m,U,E,O,M,A,s,r,_,ye,y,W,se,me]}class Wl extends te{constructor(e){super(),ne(this,e,el,xn,le,{marker:11,lngLat:10,class:0,interactive:12,asButton:1,draggable:13,feature:14,offset:15,zIndex:2,rotation:16,opacity:17})}}function tl(l){let e;const t=l[8].default,n=Se(t,l,l[15],null);return{c(){n&&n.c()},m(i,o){n&&n.m(i,o),e=!0},p(i,o){n&&n.p&&(!e||o&32768)&&Me(n,t,i,i[15],e?Ie(t,i[15],o,null):Ce(i[15]),null)},i(i){e||(L(n,i),e=!0)},o(i){I(n,i),e=!1},d(i){n&&n.d(i)}}}function nl(l){let e,t;return e=new St({props:{id:l[0],type:"raster",source:l[1],beforeId:l[2],beforeLayerType:l[3],paint:l[4],layout:l[5],minzoom:l[6],maxzoom:l[7],$$slots:{default:[tl]},$$scope:{ctx:l}}}),e.$on("click",l[9]),e.$on("dblclick",l[10]),e.$on("contextmenu",l[11]),e.$on("mouseenter",l[12]),e.$on("mousemove",l[13]),e.$on("mouseleave",l[14]),{c(){Y(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,[i]){const o={};i&1&&(o.id=n[0]),i&2&&(o.source=n[1]),i&4&&(o.beforeId=n[2]),i&8&&(o.beforeLayerType=n[3]),i&16&&(o.paint=n[4]),i&32&&(o.layout=n[5]),i&64&&(o.minzoom=n[6]),i&128&&(o.maxzoom=n[7]),i&32768&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function ll(l,e,t){let{$$slots:n={},$$scope:i}=e,{id:o=Mt("raster-layer")}=e,{source:r=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:c=void 0}=e,{paint:f}=e,{layout:a=void 0}=e,{minzoom:m=void 0}=e,{maxzoom:v=void 0}=e;function U(k){oe.call(this,l,k)}function E(k){oe.call(this,l,k)}function O(k){oe.call(this,l,k)}function h(k){oe.call(this,l,k)}function M(k){oe.call(this,l,k)}function A(k){oe.call(this,l,k)}return l.$$set=k=>{"id"in k&&t(0,o=k.id),"source"in k&&t(1,r=k.source),"beforeId"in k&&t(2,s=k.beforeId),"beforeLayerType"in k&&t(3,c=k.beforeLayerType),"paint"in k&&t(4,f=k.paint),"layout"in k&&t(5,a=k.layout),"minzoom"in k&&t(6,m=k.minzoom),"maxzoom"in k&&t(7,v=k.maxzoom),"$$scope"in k&&t(15,i=k.$$scope)},[o,r,s,c,f,a,m,v,n,U,E,O,h,M,A,i]}class Fl extends te{constructor(e){super(),ne(this,e,ll,nl,le,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}const il="/atip/readme_atip/assets/help-d011708a.svg";function ol(l){let e,t;const n=l[1].default,i=Se(n,l,l[4],null);return{c(){e=S("div"),i&&i.c(),d(e,"class","govuk-prose")},m(o,r){T(o,e,r),i&&i.m(e,null),t=!0},p(o,r){i&&i.p&&(!t||r&16)&&Me(i,n,o,o[4],t?Ie(n,o[4],r,null):Ce(o[4]),null)},i(o){t||(L(i,o),t=!0)},o(o){I(i,o),t=!1},d(o){o&&p(e),i&&i.d(o)}}}function rl(l){let e,t,n,i,o,r,s;function c(a){l[3](a)}let f={title:"Help",$$slots:{default:[ol]},$$scope:{ctx:l}};return l[0]!==void 0&&(f.open=l[0]),n=new cn({props:f}),Re.push(()=>Fe(n,"open",c)),{c(){e=S("button"),e.innerHTML=`<img src="${il}" title="Help" alt="Help"/>`,t=X(),Y(n.$$.fragment),d(e,"class","svelte-gb6dzm")},m(a,m){T(a,e,m),T(a,t,m),x(n,a,m),o=!0,r||(s=V(e,"click",l[2]),r=!0)},p(a,[m]){const v={};m&16&&(v.$$scope={dirty:m,ctx:a}),!i&&m&1&&(i=!0,v.open=a[0],Ze(()=>i=!1)),n.$set(v)},i(a){o||(L(n.$$.fragment,a),o=!0)},o(a){I(n.$$.fragment,a),o=!1},d(a){a&&(p(e),p(t)),$(n,a),r=!1,s()}}}function sl(l,e,t){let{$$slots:n={},$$scope:i}=e,o=!1;const r=()=>t(0,o=!0);function s(c){o=c,t(0,o)}return l.$$set=c=>{"$$scope"in c&&t(4,i=c.$$scope)},[o,n,r,s,i]}class Zl extends te{constructor(e){super(),ne(this,e,sl,rl,le,{})}}function al(l){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
    on the map to open a new tab with a 3rd-party imagery provider</li> <li>Press <b>Escape</b>
    to exit this mode</li> <li>Cursor by <a href="https://icon-icons.com/icon/screenshot-cursor-camera/100181" target="_blank" rel="noreferrer">Luc Chaissac</a></li>`},m(t,n){T(t,e,n)},p:F,i:F,o:F,d(t){t&&p(e)}}}class fl extends te{constructor(e){super(),ne(this,e,null,al,le,{})}}const ul="/atip/readme_atip/assets/camera_cursor-824d29b6.svg",{window:cl}=un;function vt(l){let e,t,n,i;const o=[ml,dl],r=[];function s(c,f){return c[0]?0:1}return e=s(l),t=r[e]=o[e](l),{c(){t.c(),n=Ue()},m(c,f){r[e].m(c,f),T(c,n,f),i=!0},p(c,f){let a=e;e=s(c),e===a?r[e].p(c,f):(we(),I(r[a],1,1,()=>{r[a]=null}),ve(),t=r[e],t?t.p(c,f):(t=r[e]=o[e](c),t.c()),L(t,1),t.m(n.parentNode,n))},i(c){i||(L(t),i=!0)},o(c){I(t),i=!1},d(c){c&&p(n),r[e].d(c)}}}function dl(l){let e,t;return e=new Ct({props:{$$slots:{default:[gl]},$$scope:{ctx:l}}}),e.$on("click",l[8]),{c(){Y(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},p(n,i){const o={};i&8192&&(o.$$scope={dirty:i,ctx:n}),e.$set(o)},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function ml(l){let e,t,n,i,o,r,s;e=new Ct({props:{$$slots:{default:[_l]},$$scope:{ctx:l}}}),e.$on("click",l[6]);function c(a){l[7](a)}let f={label:"Source",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return l[2].streetViewImagery!==void 0&&(f.value=l[2].streetViewImagery),n=new dn({props:f}),Re.push(()=>Fe(n,"value",c)),r=new _n({props:{label:"Help",$$slots:{default:[hl]},$$scope:{ctx:l}}}),{c(){Y(e.$$.fragment),t=X(),Y(n.$$.fragment),o=X(),Y(r.$$.fragment)},m(a,m){x(e,a,m),T(a,t,m),x(n,a,m),T(a,o,m),x(r,a,m),s=!0},p(a,m){const v={};m&8192&&(v.$$scope={dirty:m,ctx:a}),e.$set(v);const U={};!i&&m&4&&(i=!0,U.value=a[2].streetViewImagery,Ze(()=>i=!1)),n.$set(U);const E={};m&8192&&(E.$$scope={dirty:m,ctx:a}),r.$set(E)},i(a){s||(L(e.$$.fragment,a),L(n.$$.fragment,a),L(r.$$.fragment,a),s=!0)},o(a){I(e.$$.fragment,a),I(n.$$.fragment,a),I(r.$$.fragment,a),s=!1},d(a){a&&(p(t),p(o)),$(e,a),$(n,a),$(r,a)}}}function gl(l){let e;return{c(){e=_e("Enable Street View")},m(t,n){T(t,e,n)},d(t){t&&p(e)}}}function _l(l){let e;return{c(){e=_e("Disable Street View")},m(t,n){T(t,e,n)},d(t){t&&p(e)}}}function hl(l){let e,t;return e=new fl({}),{c(){Y(e.$$.fragment)},m(n,i){x(e,n,i),t=!0},i(n){t||(L(e.$$.fragment,n),t=!0)},o(n){I(e.$$.fragment,n),t=!1},d(n){$(e,n)}}}function bl(l){let e,t,n,i,o=l[1]&&vt(l);return{c(){o&&o.c(),e=Ue()},m(r,s){o&&o.m(r,s),T(r,e,s),t=!0,n||(i=V(cl,"keydown",l[3]),n=!0)},p(r,[s]){r[1]?o?(o.p(r,s),s&2&&L(o,1)):(o=vt(r),o.c(),L(o,1),o.m(e.parentNode,e)):o&&(we(),I(o,1,1,()=>{o=null}),ve())},i(r){t||(L(o),t=!0)},o(r){I(o),t=!1},d(r){r&&p(e),o&&o.d(r),n=!1,i()}}}function yl(l,e,t){let n;pe(l,ct,h=>t(2,n=h));let{cfg:i}=e,{map:o}=e,{enabled:r}=e,{showControls:s=!0}=e,c=[];function f(){if(o){o.on("click",m),o.getCanvas().style.cursor=`url(${ul}), auto`;for(let h of i.getStreetViewRoadLayerNames(o))c.push([h,o.getPaintProperty(h,"line-color")]),o.setPaintProperty(h,"line-color","cyan")}}function a(){if(o){o.off("click",m),o.getCanvas().style.cursor="inherit";for(let[h,M]of c)o.setPaintProperty(h,"line-color",M);c=[]}}pt(a);function m(h){if(!r)return;let M=h.lngLat.lng,A=h.lngLat.lat;n.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${A},${M}&cbp=11,0,0,0,0`,"_blank"):n.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${A}~${M}&style=x`,"_blank")}function v(h){r&&h.key=="Escape"&&(h.stopPropagation(),t(0,r=!1))}const U=()=>t(0,r=!1);function E(h){l.$$.not_equal(n.streetViewImagery,h)&&(n.streetViewImagery=h,ct.set(n))}const O=()=>t(0,r=!0);return l.$$set=h=>{"cfg"in h&&t(4,i=h.cfg),"map"in h&&t(5,o=h.map),"enabled"in h&&t(0,r=h.enabled),"showControls"in h&&t(1,s=h.showControls)},l.$$.update=()=>{l.$$.dirty&1&&(r?f():a())},[r,s,n,v,i,o,U,E,O]}class Vl extends te{constructor(e){super(),ne(this,e,yl,bl,le,{cfg:4,map:5,enabled:0,showControls:1})}}const kl="/atip/readme_atip/assets/warning-81bba3f6.svg";function wl(l){let e,t;return{c(){e=S("img"),ee(e.src,t=kl)||d(e,"src",t),d(e,"title",l[0]),d(e,"alt",l[0])},m(n,i){T(n,e,i)},p(n,[i]){i&1&&d(e,"title",n[0]),i&1&&d(e,"alt",n[0])},i:F,o:F,d(n){n&&p(e)}}}function vl(l,e,t){let{text:n}=e;return l.$$set=i=>{"text"in i&&t(0,n=i.text)},[n]}class Dl extends te{constructor(e){super(),ne(this,e,vl,wl,le,{text:0})}}export{jl as B,Ol as C,Hl as G,Zl as H,Wl as M,Fl as R,Vl as S,Dl as W,Pl as a,El as b,Bl as c,Al as d,Rl as e,Ul as f,fl as g,_n as h,Il as i};
