import{S as V,i as K,s as Q,e as S,d as A,b as ie,f as g,q as J,k as d,J as Ut,a as L,aB as Wn,g as $,aa as Kt,K as Bt,L as Et,M as Wt,h as m,j as _,C as ke,v as ye,y as Ee,c as w,t as y,m as b,A as G,l as v,r as U,u as E,w as W,N as Qt,G as de,aC as Yn,x as Y,H as Mr,I as ht,aD as Wr,at as kn,Y as X,az as _n,av as On,Z as Ie,aE as me,aF as Xt,aG as zt,ak as cn,a9 as ft,ab as Yr,aH as Jr,U as jr,o as Nr,aI as Qr,aJ as Fr,aA as Vr,ay as yn,B as Kr,n as Zr}from"./index-2ed455cc.js";import{g as te,a as oe}from"./spread-8a54911c.js";import{c as q,d as lt,t as Xr,a as Be,C as Fe,e as be,S as ln,M as xr,p as Jn,f as Qn,h as en,g as eo,m as Vn}from"./Modal-00f4acc8.js";import{e as Kn,h as rt,M as to,b as Rr,H as no,f as Me,C as ct,a as Sn,c as Tn,d as lo,i as fn,W as Pr,B as ro,S as oo,G as so}from"./WarningIcon-b1dc0aab.js";import{d as io,g as Dr,u as ao,r as fo,b as uo,c as co,G as pt,a as _e,e as $o,h as ee,F as Ne,i as po,j as mo,k as _o,L as go,M as ho}from"./MapLibreMap-6fe7c664.js";import{R as Mn,F as Ar,a as un,E as wo}from"./Radio-6c995736.js";import{S as We,B as bo}from"./SecondaryButton-c93395e6.js";import{E as re,H as vo}from"./Header-bb262ebf.js";import{e as ge,f as Zn,b as ko,s as yo,g as So,d as To}from"./files-8a75b3d9.js";import{P as ae,A as Gr}from"./Popup-9de6e5dc.js";import{D as Co}from"./DefaultButton-975b38ee.js";function Lo(o){let e;return{c(){e=S("span"),A(e,"class","svelte-kzgqtg"),ie(e,"background",o[0])},m(l,t){g(l,e,t)},p(l,[t]){t&1&&ie(e,"background",l[0])},i:J,o:J,d(l){l&&d(e)}}}function Io(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Te extends V{constructor(e){super(),K(this,e,Io,Lo,Q,{color:0})}}const Oo=o=>({}),Xn=o=>({}),Mo=o=>({}),xn=o=>({});function jo(o){let e,l,t,n,r,s,f,i,a,u,c;const p=o[4].sidebar,h=Ut(p,o,o[3],xn),k=o[4].main,C=Ut(k,o,o[3],Xn);return{c(){e=S("div"),l=S("aside"),t=S("div"),h&&h.c(),n=L(),r=S("button"),r.textContent="â†’",f=L(),i=S("main"),C&&C.c(),A(t,"class","sidebar-content content-container svelte-1n0etgd"),A(r,"type","button"),A(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),A(l,"class",s=Wn(o[1]?"":"collapsed")+" svelte-1n0etgd"),ie(l,"--sidebarWidth",o[0]),A(i,"class","svelte-1n0etgd"),A(e,"class","overall-layout svelte-1n0etgd")},m(T,I){g(T,e,I),$(e,l),$(l,t),h&&h.m(t,null),$(l,n),$(l,r),$(e,f),$(e,i),C&&C.m(i,null),a=!0,u||(c=Kt(r,"click",o[2]),u=!0)},p(T,[I]){h&&h.p&&(!a||I&8)&&Bt(h,p,T,T[3],a?Wt(p,T[3],I,Mo):Et(T[3]),xn),(!a||I&2&&s!==(s=Wn(T[1]?"":"collapsed")+" svelte-1n0etgd"))&&A(l,"class",s),(!a||I&1)&&ie(l,"--sidebarWidth",T[0]),C&&C.p&&(!a||I&8)&&Bt(C,k,T,T[3],a?Wt(k,T[3],I,Oo):Et(T[3]),Xn)},i(T){a||(m(h,T),m(C,T),a=!0)},o(T){_(h,T),_(C,T),a=!1},d(T){T&&d(e),h&&h.d(T),C&&C.d(T),u=!1,c()}}}function No(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){l(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,s,f,n,t]}class Fo extends V{constructor(e){super(),K(this,e,No,jo,Q,{sidebarWidth:0})}}function el(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function tl(o){let e,l,t,n=o[1]+"",r,s,f;return l=new Te({props:{color:o[2]}}),{c(){e=S("li"),w(l.$$.fragment),t=L(),r=y(n),s=L()},m(i,a){g(i,e,a),b(l,e,null),$(e,t),$(e,r),$(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&G(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){_(l.$$.fragment,i),f=!1},d(i){i&&d(e),v(l)}}}function Ro(o){let e,l,t=ge(o[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=tl(el(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){e=S("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,f){g(s,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[f]){if(f&1){t=ge(s[0]);let i;for(i=0;i<t.length;i+=1){const a=el(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=tl(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(ke(),i=t.length;i<n.length;i+=1)r(i);ye()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),Ee(n,s)}}}function Po(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Yt extends V{constructor(e){super(),K(this,e,Po,Ro,Q,{rows:0})}}function Do(o){let e;const l=o[16].default,t=Ut(l,o,o[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&Bt(t,l,n,n[24],e?Wt(l,n[24],r,null):Et(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Ao(o){let e,l,t;function n(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[Do]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new io({props:r}),U.push(()=>E(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!l&&f&1&&(l=!0,i.hovered=s[0],W(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Go(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=Dr("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:h=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:I=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:F=!0}=e;function O(D){j=D,l(0,j)}function M(D){Qt.call(this,o,D)}function H(D){Qt.call(this,o,D)}function R(D){Qt.call(this,o,D)}function P(D){Qt.call(this,o,D)}function B(D){Qt.call(this,o,D)}function ue(D){Qt.call(this,o,D)}return o.$$set=D=>{"id"in D&&l(1,r=D.id),"source"in D&&l(2,s=D.source),"sourceLayer"in D&&l(3,f=D.sourceLayer),"beforeId"in D&&l(4,i=D.beforeId),"beforeLayerType"in D&&l(5,a=D.beforeLayerType),"paint"in D&&l(6,u=D.paint),"layout"in D&&l(7,c=D.layout),"filter"in D&&l(8,p=D.filter),"applyToClusters"in D&&l(9,h=D.applyToClusters),"minzoom"in D&&l(10,k=D.minzoom),"maxzoom"in D&&l(11,C=D.maxzoom),"hoverCursor"in D&&l(12,T=D.hoverCursor),"manageHoverState"in D&&l(13,I=D.manageHoverState),"hovered"in D&&l(0,j=D.hovered),"eventsIfTopMost"in D&&l(14,N=D.eventsIfTopMost),"interactive"in D&&l(15,F=D.interactive),"$$scope"in D&&l(24,n=D.$$scope)},[j,r,s,f,i,a,u,c,p,h,k,C,T,I,N,F,t,O,M,H,R,P,B,ue,n]}class jn extends V{constructor(e){super(),K(this,e,Go,Ao,Q,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function nl(o){let e=o[0],l,t,n=ll(o);return{c(){n.c(),l=de()},m(r,s){n.m(r,s),g(r,l,s),t=!0},p(r,s){s&1&&Q(e,e=r[0])?(ke(),_(n,1,1,J),ye(),n=ll(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n.d(r)}}}function ll(o){let e;const l=o[15].default,t=Ut(l,o,o[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&Bt(t,l,n,n[14],e?Wt(l,n[14],r,null):Et(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function qo(o){let e,l,t=o[0]&&nl(o);return{c(){t&&t.c(),e=de()},m(n,r){t&&t.m(n,r),g(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=nl(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ke(),_(t,1,1,()=>{t=null}),ye())},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&d(e),t&&t.d(n)}}}function Ho(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Dr("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:p=null}=e,{attribution:h=null}=e,{minzoom:k=null}=e,{maxzoom:C=null}=e,{volatile:T=null}=e;if(i&&i.includes("pmtiles://")&&!Yn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let F=new Wr;Yn.addProtocol("pmtiles",F.tile)}const{map:I,self:j}=ao();Y(o,I,F=>l(13,n=F)),Y(o,j,F=>l(0,t=F));let N;return Mr(()=>{t&&n&&(fo(I,t,N),ht(j,t=null,t),N=void 0)}),o.$$set=F=>{"id"in F&&l(3,f=F.id),"url"in F&&l(4,i=F.url),"tiles"in F&&l(5,a=F.tiles),"promoteId"in F&&l(6,u=F.promoteId),"bounds"in F&&l(7,c=F.bounds),"scheme"in F&&l(8,p=F.scheme),"attribution"in F&&l(9,h=F.attribution),"minzoom"in F&&l(10,k=F.minzoom),"maxzoom"in F&&l(11,C=F.maxzoom),"volatile"in F&&l(12,T=F.volatile),"$$scope"in F&&l(14,s=F.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==f&&(ht(j,t=f,t),uo(n,t,co({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:p,attribution:h,minzoom:k,maxzoom:C,volatile:T}),F=>n&&F===t,()=>{t&&(N=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{N=n==null?void 0:n.getSource(f)}))},[t,I,j,f,i,a,u,c,p,h,k,C,T,n,s,r]}class pe extends V{constructor(e){super(),K(this,e,Ho,qo,Q,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function rl(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function zo(o){let e,l,t;return l=new We({props:{$$slots:{default:[Bo]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=S("div"),w(l.$$.fragment)},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Uo(o){let e,l,t,n,r,s,f,i,a,u;l=new We({props:{$$slots:{default:[Eo]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&ol(o);r=new rt({props:{label:"Help",$$slots:{default:[Wo]},$$scope:{ctx:o}}}),f=new $o({}),f.$on("click",o[3]);let p=ge(o[0]),h=[];for(let C=0;C<p.length;C+=1)h[C]=sl(rl(o,p,C));const k=C=>_(h[C],1,1,()=>{h[C]=null});return{c(){e=S("div"),w(l.$$.fragment),t=L(),c&&c.c(),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L();for(let C=0;C<h.length;C+=1)h[C].c();a=de()},m(C,T){g(C,e,T),b(l,e,null),g(C,t,T),c&&c.m(C,T),g(C,n,T),b(r,C,T),g(C,s,T),b(f,C,T),g(C,i,T);for(let I=0;I<h.length;I+=1)h[I]&&h[I].m(C,T);g(C,a,T),u=!0},p(C,T){const I={};T&16384&&(I.$$scope={dirty:T,ctx:C}),l.$set(I),C[2]?c?c.p(C,T):(c=ol(C),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const j={};if(T&16384&&(j.$$scope={dirty:T,ctx:C}),r.$set(j),T&65){p=ge(C[0]);let N;for(N=0;N<p.length;N+=1){const F=rl(C,p,N);h[N]?(h[N].p(F,T),m(h[N],1)):(h[N]=sl(F),h[N].c(),m(h[N],1),h[N].m(a.parentNode,a))}for(ke(),N=p.length;N<h.length;N+=1)k(N);ye()}},i(C){if(!u){m(l.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C);for(let T=0;T<p.length;T+=1)m(h[T]);u=!0}},o(C){_(l.$$.fragment,C),_(r.$$.fragment,C),_(f.$$.fragment,C),h=h.filter(Boolean);for(let T=0;T<h.length;T+=1)_(h[T]);u=!1},d(C){C&&(d(e),d(t),d(n),d(s),d(i),d(a)),v(l),c&&c.d(C),v(r,C),v(f,C),Ee(h,C)}}}function Bo(o){let e;return{c(){e=y("Measure lines")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Eo(o){let e;return{c(){e=y("Stop measuring")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ol(o){let e,l,t=o[2].toFixed(2)+"",n,r;return{c(){e=S("p"),l=y("Length: "),n=y(t),r=y(" meters")},m(s,f){g(s,e,f),$(e,l),$(e,n),$(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&G(n,t)},d(s){s&&d(e)}}}function Wo(o){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){g(l,e,t)},p:J,d(l){l&&d(e)}}}function Yo(o){let e,l;return{c(){e=S("span"),l=L(),A(e,"class","dot svelte-1tzt432")},m(t,n){g(t,e,n),g(t,l,n)},p:J,d(t){t&&(d(e),d(l))}}}function sl(o){let e,l,t;function n(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[Yo]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new to({props:s}),U.push(()=>E(e,"lngLat",n)),e.$on("click",r),{c(){w(e.$$.fragment)},m(f,i){b(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!l&&i&1&&(l=!0,a.lngLat=o[11],W(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){_(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function Jo(o){let e,l;const t=[q("measurement-line"),{paint:{"line-color":lt.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Qo(o){let e,l,t,n,r,s,f;const i=[Uo,zo],a=[];function u(c,p){return c[1]?0:1}return e=u(o),l=a[e]=i[e](o),n=new pt({props:{data:o[0].length<2?Kn():kn(o[0]),$$slots:{default:[Jo]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),w(n.$$.fragment)},m(c,p){a[e].m(c,p),g(c,t,p),b(n,c,p),r=!0,s||(f=Kt(window,"keydown",o[5]),s=!0)},p(c,[p]){let h=e;e=u(c),e===h?a[e].p(c,p):(ke(),_(a[h],1,1,()=>{a[h]=null}),ye(),l=a[e],l?l.p(c,p):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const k={};p&1&&(k.data=c[0].length<2?Kn():kn(c[0])),p&16384&&(k.$$scope={dirty:p,ctx:c}),n.$set(k)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){_(l),_(n.$$.fragment,c),r=!1},d(c){c&&d(t),a[e].d(c),v(n,c),s=!1,f()}}}function Vo(o,e,l){let t,n=!1,r=[];function s(k){return k.length<2?null:1e3*Xr(kn(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),l(0,r)}function c(k,C,T,I){T[I]=k,l(0,r)}const p=k=>u(k),h=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=s(r))},[r,n,t,f,i,a,u,c,p,h]}class Ko extends V{constructor(e){super(),K(this,e,Vo,Qo,Q,{})}}const Zo="/atip/refactor-browse-sketch-layers/assets/zoom_out_map-b2e1091a.svg";function Xo(o){let e,l;return{c(){e=S("img"),On(e.src,l=Zo)||A(e,"src",l),A(e,"alt","Zoom to show entire boundary")},m(t,n){g(t,e,n)},p:J,d(t){t&&d(e)}}}function xo(o){let e,l;return e=new We({props:{title:"Zoom to show entire boundary",$$slots:{default:[Xo]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function es(o,e,l){let t;Y(o,_n,s=>l(2,t=s));let{boundaryGeojson:n}=e;function r(){let s=Rr(n);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&l(1,n=s.boundaryGeojson)},[r,n]}class ts extends V{constructor(e){super(),K(this,e,es,xo,Q,{boundaryGeojson:1})}}const ne={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",cycle_route:"green",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},rights_of_way:{footpath:"red",bridleway:"green",restricted_byway:"blue",boat:"orange"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},He=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];let Cn=Ie(new Map),tn=Ie(new Set);const ns=o=>({}),il=o=>({}),ls=o=>({}),al=o=>({}),rs=o=>({}),fl=o=>({});function os(o){let e;return{c(){e=y(o[2])},m(l,t){g(l,e,t)},p(l,t){t&4&&G(e,l[2])},d(l){l&&d(e)}}}function ss(o){let e,l,t;const n=o[7].icon,r=Ut(n,o,o[10],fl);return{c(){r&&r.c(),e=L(),l=y(o[2])},m(s,f){r&&r.m(s,f),g(s,e,f),g(s,l,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&Bt(r,n,s,s[10],t?Wt(n,s[10],f,rs):Et(s[10]),fl),(!t||f&4)&&G(l,s[2])},i(s){t||(m(r,s),t=!0)},o(s){_(r,s),t=!1},d(s){s&&(d(e),d(l)),r&&r.d(s)}}}function is(o){let e;const l=o[7].help,t=Ut(l,o,o[10],al);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&Bt(t,l,n,n[10],e?Wt(l,n[10],r,ls):Et(n[10]),al)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function as(o){let e;return{c(){e=y("X")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function fs(o){let e,l,t,n,r,s,f,i,a;function u(p){o[8](p)}let c={$$slots:{default:[ss]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),l=new Be({props:c}),U.push(()=>E(l,"checked",u)),s=new no({props:{$$slots:{default:[is]},$$scope:{ctx:o}}}),i=new We({props:{$$slots:{default:[as]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=S("div"),w(l.$$.fragment),n=L(),r=S("span"),w(s.$$.fragment),f=L(),w(i.$$.fragment),ie(e,"display","flex"),ie(e,"justify-content","space-between")},m(p,h){g(p,e,h),b(l,e,null),$(e,n),$(e,r),b(s,r,null),$(r,f),b(i,r,null),a=!0},p(p,h){const k={};h&1028&&(k.$$scope={dirty:h,ctx:p}),!t&&h&1&&(t=!0,k.checked=p[0],W(()=>t=!1)),l.$set(k);const C={};h&1024&&(C.$$scope={dirty:h,ctx:p}),s.$set(C);const T={};h&1024&&(T.$$scope={dirty:h,ctx:p}),i.$set(T)},i(p){a||(m(l.$$.fragment,p),m(s.$$.fragment,p),m(i.$$.fragment,p),a=!0)},o(p){_(l.$$.fragment,p),_(s.$$.fragment,p),_(i.$$.fragment,p),a=!1},d(p){p&&d(e),v(l),v(s),v(i)}}}function ul(o){let e;const l=o[7].controls,t=Ut(l,o,o[10],il);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&Bt(t,l,n,n[10],e?Wt(l,n[10],r,ns):Et(n[10]),il)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function us(o){let e,l,t,n,r,s;e=new Be({props:{checked:o[4].has(o[1]),$$slots:{default:[os]},$$scope:{ctx:o}}}),e.$on("change",o[5]),n=new Fe({props:{small:!0,$$slots:{default:[fs]},$$scope:{ctx:o}}});let f=o[0]&&ul(o);return{c(){w(e.$$.fragment),l=L(),t=S("div"),w(n.$$.fragment),r=L(),f&&f.c()},m(i,a){b(e,i,a),g(i,l,a),g(i,t,a),b(n,t,null),$(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=ul(i),f.c(),m(f,1),f.m(t,null)):f&&(ke(),_(f,1,1,()=>{f=null}),ye())},i(i){s||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),s=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),_(f),s=!1},d(i){i&&(d(l),d(t)),v(e,i),v(n),f&&f.d(),o[9](null)}}}function cs(o,e,l){let t;Y(o,tn,k=>l(4,t=k));let{$$slots:n={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),tn.set(t));let a=null;Mr(()=>{Cn.update(k=>(k.delete(s),k))});function u(){tn.update(k=>(k.has(s)?(k.delete(s),l(0,i=!1)):(k.add(s),l(0,i=!0)),k))}function c(){t.delete(s),tn.set(t),l(0,i=!1)}function p(k){i=k,l(0,i)}function h(k){U[k?"unshift":"push"](()=>{a=k,l(3,a),l(1,s)})}return o.$$set=k=>{"name"in k&&l(1,s=k.name),"title"in k&&l(2,f=k.title),"show"in k&&l(0,i=k.show),"$$scope"in k&&l(10,r=k.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&Cn.update(k=>(l(3,a.style.display="none",a),k.set(s,a),k))},[i,s,f,a,t,u,c,n,p,h,r]}class fe extends V{constructor(e){super(),K(this,e,cs,us,Q,{name:1,title:2,show:0})}}function $s(o){let e;return{c(){e=y(`Open Government License
  `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ps(o){let e,l,t,n,r;return t=new re({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[$s]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("License: "),w(t.$$.fragment),n=y(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,f){g(s,e,f),$(e,l),b(t,e,null),$(e,n),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){_(t.$$.fragment,s),r=!1},d(s){s&&d(e),v(t)}}}class Oe extends V{constructor(e){super(),K(this,e,null,ps,Q,{})}}function cl(o,e,l){const t=o.slice();return t[2]=e[l],t}function $l(o,e,l){const t=o.slice();return t[5]=e[l],t}function pl(o){let e,l;return{c(){e=S("span"),l=y(`Â 
    `),ie(e,"background",o[5]),ie(e,"width","100%"),ie(e,"border","1px solid black")},m(t,n){g(t,e,n),$(e,l)},p(t,n){n&1&&ie(e,"background",t[5])},d(t){t&&d(e)}}}function ml(o){let e,l=o[2]+"",t;return{c(){e=S("span"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&G(t,l)},d(n){n&&d(e)}}}function ms(o){let e,l,t,n=ge(o[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=pl($l(o,n,i));let s=ge(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=ml(cl(o,s,i));return{c(){e=S("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=S("div");for(let i=0;i<f.length;i+=1)f[i].c();ie(e,"display","flex"),ie(t,"display","flex"),ie(t,"justify-content","space-between")},m(i,a){g(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);g(i,l,a),g(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=ge(i[0]);let u;for(u=0;u<n.length;u+=1){const c=$l(i,n,u);r[u]?r[u].p(c,a):(r[u]=pl(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){s=ge(i[1]);let u;for(u=0;u<s.length;u+=1){const c=cl(i,s,u);f[u]?f[u].p(c,a):(f[u]=ml(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:J,o:J,d(i){i&&(d(e),d(l),d(t)),Ee(r,i),Ee(f,i)}}}function _s(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Je extends V{constructor(e){super(),K(this,e,_s,ms,Q,{colorScale:0,limits:1})}}const _l=Ie(!0);let Ln=Ie(null);function Nn(o){window.history.replaceState(null,"",o.toString()),window.localStorage.setItem("browsepage-querystring",o.searchParams.toString())}function $e(o){let e=new URLSearchParams(window.location.search).has(o),l=Ie(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),Nn(n)}),l}function Jt(o,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Ie(n);return s.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),Nn(i)}),s}function gl(o){const e=o[7].OA21CD;o[8]=e;const l=o[7][o[0].kind];o[9]=l}function gs(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ws]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[bs]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("Population density data is from the 2021 census, via "),w(t.$$.fragment),n=y(". Output area boundaries from "),w(r.$$.fragment),s=y(".")},m(i,a){g(i,e,a),$(e,l),b(t,e,null),$(e,n),b(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&d(e),v(t),v(r)}}}function ds(o){let e,l,t,n,r,s,f,i,a;return r=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[vs]},$$scope:{ctx:o}}}),f=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ks]},$$scope:{ctx:o}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=S("p"),n=y("Car/van availability data is from the 2021 census, via "),w(r.$$.fragment),s=y(". Output area boundaries from "),w(f.$$.fragment),i=y(".")},m(u,c){g(u,e,c),g(u,l,c),g(u,t,c),$(t,n),b(r,t,null),$(t,s),b(f,t,null),$(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){_(r.$$.fragment,u),_(f.$$.fragment,u),a=!1},d(u){u&&(d(e),d(l),d(t)),v(r),v(f)}}}function hs(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ys]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ss]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("Car/van availability data is from the 2021 census, via "),w(t.$$.fragment),n=y(". Output area boundaries from "),w(r.$$.fragment),s=y(".")},m(i,a){g(i,e,a),$(e,l),b(t,e,null),$(e,n),b(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&d(e),v(t),v(r)}}}function ws(o){let e;return{c(){e=y(`NOMIS TS006
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function bs(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function vs(o){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ks(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ys(o){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ss(o){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ts(o){let e,l,t,n,r,s;const f=[hs,ds,gs],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(o),t=i[l]=f[l](o),r=new Oe({}),{c(){e=S("span"),t.c(),n=L(),w(r.$$.fragment),A(e,"slot","help")},m(u,c){g(u,e,c),i[l].m(e,null),$(e,n),b(r,e,null),s=!0},p(u,c){let p=l;l=a(u),l!==p&&(ke(),_(i[p],1,1,()=>{i[p]=null}),ye(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){_(t),_(r.$$.fragment,u),s=!1},d(u){u&&d(e),i[l].d(),v(r)}}}function Cs(o){let e,l,t,n;return t=new Je({props:{colorScale:o[1],limits:$t(o[0].kind).map(dl)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",l=L(),w(t.$$.fragment)},m(r,s){g(r,e,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&1&&(f.limits=$t(r[0].kind).map(dl)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&(d(e),d(l)),v(t,r)}}}function Ls(o){let e,l;return e=new Je({props:{colorScale:o[1],limits:$t(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=$t(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Is(o){let e,l;return e=new Je({props:{colorScale:o[1],limits:$t(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=$t(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Os(o){let e,l,t,n,r,s,f;function i(h){o[4](h)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),l=new Mn({props:a}),U.push(()=>E(l,"value",i));const u=[Is,Ls,Cs],c=[];function p(h,k){return h[0].kind=="percent_households_with_car"?0:h[0].kind=="average_cars_per_household"?1:h[0].kind=="population_density"?2:-1}return~(r=p(o))&&(s=c[r]=u[r](o)),{c(){e=S("div"),w(l.$$.fragment),n=L(),s&&s.c(),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(h,k){g(h,e,k),b(l,e,null),$(e,n),~r&&c[r].m(e,null),f=!0},p(h,k){const C={};!t&&k&1&&(t=!0,C.value=h[0].kind,W(()=>t=!1)),l.$set(C);let T=r;r=p(h),r===T?~r&&c[r].p(h,k):(s&&(ke(),_(c[T],1,1,()=>{c[T]=null}),ye()),~r?(s=c[r],s?s.p(h,k):(s=c[r]=u[r](h),s.c()),m(s,1),s.m(e,null)):s=null)},i(h){f||(m(l.$$.fragment,h),m(s),f=!0)},o(h){_(l.$$.fragment,h),_(s),f=!1},d(h){h&&d(e),v(l),~r&&c[r].d()}}}function Ms(o){let e,l,t,n=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=S("p"),l=y("There are "),t=S("b"),r=y(n),s=y(`
          people per square kilometre in `),i=y(f)},m(a,u){g(a,e,u),$(e,l),$(e,t),$(t,r),$(e,s),$(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&G(r,n),u&128&&f!==(f=a[8]+"")&&G(i,f)},d(a){a&&d(e)}}}function js(o){let e,l,t=o[8]+"",n,r,s,f=o[9]+"",i,a;return{c(){e=S("p"),l=y("Households in "),n=y(t),r=y(` have an average of
          `),s=S("b"),i=y(f),a=y(`
          cars`)},m(u,c){g(u,e,c),$(e,l),$(e,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&G(n,t),c&129&&f!==(f=u[9]+"")&&G(i,f)},d(u){u&&d(e)}}}function Ns(o){let e,l,t=o[9]+"",n,r,s,f=o[8]+"",i,a;return{c(){e=S("p"),l=S("b"),n=y(t),r=y("%"),s=y(`
          of households in `),i=y(f),a=y(" have 1 or more cars")},m(u,c){g(u,e,c),$(e,l),$(l,n),$(l,r),$(e,s),$(e,i),$(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&G(n,t),c&128&&f!==(f=u[8]+"")&&G(i,f)},d(u){u&&d(e)}}}function Fs(o){gl(o);let e;function l(r,s){return r[0].kind=="percent_households_with_car"?Ns:r[0].kind=="average_cars_per_household"?js:Ms}let t=l(o),n=t(o);return{c(){n.c(),e=de()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){gl(r),t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function Rs(o){let e,l;return e=new ae({props:{$$slots:{default:[Fs,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ps(o){let e,l,t,n;const r=[q(Ve),{sourceLayer:Ve},{paint:{"fill-color":be(["get",o[0].kind],$t(o[0].kind),o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Rs]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Ne({props:s}),e.$on("click",o[3]);const f=[q(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&oe(q(Ve)),u&0&&{sourceLayer:Ve},u&3&&{paint:{"fill-color":be(["get",a[0].kind],$t(a[0].kind),a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?te(f,[u&0&&oe(q(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ds(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ve,title:"2021 census",$$slots:{controls:[Os],help:[Ts]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ve}.pmtiles`,$$slots:{default:[Ps]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,W(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ve="census_output_areas";function As(o){return o.show?o.kind:null}function Gs(o){return{show:!0,kind:o}}function $t(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const dl=o=>o.toLocaleString();function qs(o,e,l){let t,n=ne.sequential_low_to_high,s=Jt(Ve,{show:!1,kind:"percent_households_with_car"},As,Gs);Y(o,s,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,n,s,f,i,a]}class Hs extends V{constructor(e){super(),K(this,e,qs,Ds,Q,{})}}function zs(o){let e,l,t;return l=new Te({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Us(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Bs(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[Us]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(", as of May 2024."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Es(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&d(e)}}}function Ws(o){let e,l;return e=new ae({props:{$$slots:{default:[Es,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ys(o){let e,l,t,n;const r=[q(wt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ws]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Ne({props:s}),e.$on("click",Vs);const f=[q(`${wt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&oe(q(wt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?te(f,[u&0&&oe(q(`${wt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Js(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:wt,title:Qs,$$slots:{help:[Bs],icon:[zs]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pt({props:{data:`${me()}/v1/${wt}.geojson`,$$slots:{default:[Ys]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let wt="combined_authorities",Qs="Combined authorities";function Vs(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function Ks(o,e,l){let t,n=ne.combined_authorities,r=$e(wt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Zs extends V{constructor(e){super(),K(this,e,Ks,Js,Q,{})}}function Xs(o){let e;return{c(){e=y(`DLUCH GIS
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function xs(o){let e;return{c(){e=y(`here
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ei(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Xs]},$$scope:{ctx:o}}}),s=new re({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[xs]},$$scope:{ctx:o}}}),a=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("The 2019 English IMD scores come from "),w(n.$$.fragment),r=y(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),w(s.$$.fragment),f=y("."),i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),b(n,l,null),$(l,r),b(s,l,null),$(l,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&64&&(h.$$scope={dirty:p,ctx:c}),n.$set(h);const k={};p&64&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(s),v(a)}}}function ti(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ni(o){let e,l=o[5].LSOA11CD+"",t,n,r,s=o[5].score+"",f,i,a,u,c,p=o[5].rank.toLocaleString()+"",h,k;return{c(){e=S("p"),t=y(l),n=y(` has an IMD score of
        `),r=S("b"),f=y(s),i=L(),a=S("p"),u=y("Rank: "),c=S("b"),h=y(p),k=y(`
        / 32,844 LSOAs`)},m(C,T){g(C,e,T),$(e,t),$(e,n),$(e,r),$(r,f),g(C,i,T),g(C,a,T),$(a,u),$(a,c),$(c,h),$(a,k)},p(C,T){T&32&&l!==(l=C[5].LSOA11CD+"")&&G(t,l),T&32&&s!==(s=C[5].score+"")&&G(f,s),T&32&&p!==(p=C[5].rank.toLocaleString()+"")&&G(h,p)},d(C){C&&(d(e),d(i),d(a))}}}function li(o){let e,l;return e=new ae({props:{$$slots:{default:[ni,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ri(o){let e,l,t,n;const r=[q(Ke),{sourceLayer:Ke},{paint:{"fill-color":be(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[li]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Ne({props:s});const f=[q(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&7?te(r,[u&0&&oe(q(Ke)),u&0&&{sourceLayer:Ke},u&6&&{paint:{"fill-color":be(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?te(f,[u&0&&oe(q(`${Ke}-outline`)),u&0&&{sourceLayer:Ke},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function oi(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ke,title:si,$$slots:{controls:[ti],help:[ei]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ke}.pmtiles`,$$slots:{default:[ri]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ke="imd",si="Indices of Multiple Deprivation";function ii(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,2,4,6,8,10],s=$e(Ke);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class ai extends V{constructor(e){super(),K(this,e,ii,oi,Q,{})}}function fi(o){let e,l,t;return l=new Te({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ui(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ci(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[ui]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(", as of May 2024."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function $i(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&d(e)}}}function pi(o){let e,l;return e=new ae({props:{$$slots:{default:[$i,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function mi(o){let e,l,t,n;const r=[q(bt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[pi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Ne({props:s}),e.$on("click",di);const f=[q(`${bt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&oe(q(bt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?te(f,[u&0&&oe(q(`${bt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function _i(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:bt,title:gi,$$slots:{help:[ci],icon:[fi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pt({props:{data:`${me()}/v1/${bt}.geojson`,$$slots:{default:[mi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let bt="local_authority_districts",gi="Local Authority Districts";function di(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function hi(o,e,l){let t,n=ne.local_authority_districts,r=$e(bt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class wi extends V{constructor(e){super(),K(this,e,hi,_i,Q,{})}}function bi(o){let e,l,t;return l=new Te({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function vi(o){let e;return{c(){e=y(`local authority
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ki(o){let e;return{c(){e=y(`national park authorit
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function yi(o){let e;return{c(){e=y(`development corporation
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Si(o){let e;return{c(){e=y("this map")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ti(o){let e;return{c(){e=y(`planning.data.gov.uk
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ci(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,j,N,F,O,M,H;return n=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[vi]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ki]},$$scope:{ctx:o}}}),i=new re({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[yi]},$$scope:{ctx:o}}}),k=new re({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Si]},$$scope:{ctx:o}}}),N=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ti]},$$scope:{ctx:o}}}),M=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("LPAs may be a "),w(n.$$.fragment),r=y(", "),w(s.$$.fragment),f=y("y, or "),w(i.$$.fragment),a=y("."),u=L(),c=S("p"),p=S("strong"),h=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),w(k.$$.fragment),C=y(" to get more details."),T=L(),I=S("p"),j=y("Data from ONS Geography via "),w(N.$$.fragment),F=y(", as of November 2022."),O=L(),w(M.$$.fragment),A(e,"slot","help")},m(R,P){g(R,e,P),$(e,l),$(l,t),b(n,l,null),$(l,r),b(s,l,null),$(l,f),b(i,l,null),$(l,a),$(e,u),$(e,c),$(c,p),$(p,h),b(k,p,null),$(p,C),$(e,T),$(e,I),$(I,j),b(N,I,null),$(I,F),$(e,O),b(M,e,null),H=!0},p(R,P){const B={};P&32&&(B.$$scope={dirty:P,ctx:R}),n.$set(B);const ue={};P&32&&(ue.$$scope={dirty:P,ctx:R}),s.$set(ue);const D={};P&32&&(D.$$scope={dirty:P,ctx:R}),i.$set(D);const x={};P&32&&(x.$$scope={dirty:P,ctx:R}),k.$set(x);const Z={};P&32&&(Z.$$scope={dirty:P,ctx:R}),N.$set(Z)},i(R){H||(m(n.$$.fragment,R),m(s.$$.fragment,R),m(i.$$.fragment,R),m(k.$$.fragment,R),m(N.$$.fragment,R),m(M.$$.fragment,R),H=!0)},o(R){_(n.$$.fragment,R),_(s.$$.fragment,R),_(i.$$.fragment,R),_(k.$$.fragment,R),_(N.$$.fragment,R),_(M.$$.fragment,R),H=!1},d(R){R&&d(e),v(n),v(s),v(i),v(k),v(N),v(M)}}}function Li(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&d(e)}}}function Ii(o){let e,l;return e=new ae({props:{$$slots:{default:[Li,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Oi(o){let e,l,t,n;const r=[q(Ze),{sourceLayer:Ze},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ii]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Ne({props:s});const f=[q(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&oe(q(Ze)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?te(f,[u&0&&oe(q(`${Ze}-outline`)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Mi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ze,title:ji,$$slots:{help:[Ci],icon:[bi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ze}.pmtiles`,$$slots:{default:[Oi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ze="local_planning_authorities",ji="Local Planning Authorities";function Ni(o,e,l){let t,n=ne.local_planning_authorities,r=$e(Ze);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Fi extends V{constructor(e){super(),K(this,e,Ni,Mi,Q,{})}}function Ri(o){let e;return{c(){e=y("Ordnance Survey MasterMap Topography layer")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Pi(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-mastermap-topography-layer",$$slots:{default:[Ri]},$$scope:{ctx:o}}}),c=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("This shows all polygons from the "),w(n.$$.fragment),r=y(` related to roads. This is useful in conjunction with the OS
      road and pavement width layers, to see specifically where width varies.`),s=L(),f=S("p"),f.textContent="Data is from February 2025.",i=L(),a=S("p"),a.textContent=`The layer is only visible when you zoom in close to the map. Note there
      may be missing polygons near bridges.`,u=L(),w(c.$$.fragment),A(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),$(e,a),$(e,u),b(c,e,null),p=!0},p(h,k){const C={};k&16&&(C.$$scope={dirty:k,ctx:h}),n.$set(C)},i(h){p||(m(n.$$.fragment,h),m(c.$$.fragment,h),p=!0)},o(h){_(n.$$.fragment,h),_(c.$$.fragment,h),p=!1},d(h){h&&d(e),v(n),v(c)}}}function Di(o){let e,l,t;return l=new Yt({props:{rows:o[2]}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ai(o){let e,l;const t=[q(rn),{sourceLayer:"topographic_area"},{paint:{"fill-color":Me(["get","style_description"],{"Road Or Track Fill":"black","Traffic Calming Fill":"#3b3b3b","Roadside Manmade Fill":"grey","Roadside Natural Fill":"green","Path Fill":"brown","Track Fill":"brown"},"red"),"fill-opacity":ee(.8,.3)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0}];let n={};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Ne({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(rn)),t[1],t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Gi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:rn,title:"OS MasterMap",$$slots:{controls:[Di],help:[Pi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${Xt()}/v1/${rn}.pmtiles`,minzoom:16,maxzoom:16,promoteId:"toid",$$slots:{default:[Ai]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let rn="osmm";function qi(o,e,l){let t,n=$e(rn);Y(o,n,f=>l(0,t=f));let r=[["roads","black"],["traffic calming","#3b3b3b"],["pavement","grey"],["roadside natural","green"],["paths and tracks","brown"]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class Hi extends V{constructor(e){super(),K(this,e,qi,Gi,Q,{})}}function zi(o){let e,l,t;return l=new Te({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ui(o){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Bi(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Ui]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(", as of October 2024."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Ei(o){let e,l=o[4].Name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&G(t,l)},d(n){n&&d(e)}}}function Wi(o){let e,l;return e=new ae({props:{$$slots:{default:[Ei,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Yi(o){let e,l,t,n;const r=[q(Xe),{sourceLayer:Xe},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Wi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Ne({props:s}),e.$on("click",Vi);const f=[q(`${Xe}-outline`),{sourceLayer:Xe},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&oe(q(Xe)),u&0&&{sourceLayer:Xe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?te(f,[u&0&&oe(q(`${Xe}-outline`)),u&0&&{sourceLayer:Xe},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ji(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Xe,title:Qi,$$slots:{help:[Bi],icon:[zi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Xe}.pmtiles`,$$slots:{default:[Yi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Xe="parliamentary_constituencies",Qi="Parliamentary constituencies";function Vi(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Ki(o,e,l){let t,n=ne.parliamentary_constituencies,r=$e(Xe);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Zi extends V{constructor(e){super(),K(this,e,Ki,Ji,Q,{})}}function Xi(o){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function xi(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Xi]},$$scope:{ctx:o}}}),a=new Oe({}),{c(){e=S("span"),l=S("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=S("p"),r=y("Data from June 2019, produced by "),w(s.$$.fragment),f=y(". See there for methodology details"),i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),b(s,n,null),$(n,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&32&&(h.$$scope={dirty:p,ctx:c}),s.$set(h)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(s),v(a)}}}function ea(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ta(o){let e,l=o[4].noiseclass+"",t,n,r=hl(o[4].noiseclass)+"",s,f;return{c(){e=S("p"),t=y(l),n=y(" dB ("),s=y(r),f=y(")")},m(i,a){g(i,e,a),$(e,t),$(e,n),$(e,s),$(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&G(t,l),a&16&&r!==(r=hl(i[4].noiseclass)+"")&&G(s,r)},d(i){i&&d(e)}}}function na(o){let e,l;return e=new ae({props:{$$slots:{default:[ta,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function la(o){let e,l;const t=[q(vt),{sourceLayer:vt},{paint:{"fill-color":Me(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":ee(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[na]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Ne({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&oe(q(vt)),s&0&&{sourceLayer:vt},s&2&&{paint:{"fill-color":Me(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":ee(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ra(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:vt,title:oa,$$slots:{controls:[ea],help:[xi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${vt}.pmtiles`,$$slots:{default:[la]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let vt="road_noise",oa="Road noise";function hl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function sa(o,e,l){let t,n=[ne.sequential_low_to_high[0],ne.sequential_low_to_high[2],ne.sequential_low_to_high[4]],r=$e(vt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ia extends V{constructor(e){super(),K(this,e,sa,ra,Q,{})}}function aa(o){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function fa(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://www.gov.uk/government/collections/rural-urban-classification",$$slots:{default:[aa]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=S("span"),l=S("p"),t=y(`The 2011 Rural Urban Classification distinguishes four urban and six rural
      categories. The data comes from `),w(n.$$.fragment),r=y(". Note this is data from 2011."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function ua(o){let e,l,t;return l=new Yt({props:{rows:Object.entries(o[2])}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ca(o){let e,l=o[4].OA11CD+"",t,n,r=o[4].RUC11.startsWith("U")?"an":"a",s,f,i,a=o[4].RUC11+"",u;return{c(){e=S("p"),t=y(l),n=y(" is "),s=y(r),f=L(),i=S("b"),u=y(a)},m(c,p){g(c,e,p),$(e,t),$(e,n),$(e,s),$(e,f),$(e,i),$(i,u)},p(c,p){p&16&&l!==(l=c[4].OA11CD+"")&&G(t,l),p&16&&r!==(r=c[4].RUC11.startsWith("U")?"an":"a")&&G(s,r),p&16&&a!==(a=c[4].RUC11+"")&&G(u,a)},d(c){c&&d(e)}}}function $a(o){let e,l;return e=new ae({props:{$$slots:{default:[ca,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function pa(o){let e,l,t,n;const r=[q(Vt),{sourceLayer:nn},{paint:{"fill-color":Me(["get","RUC11"],o[2],"cyan"),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[$a]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Ne({props:s});const f=[q(`${Vt}-outline`),{sourceLayer:nn},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&5?te(r,[u&0&&oe(q(Vt)),u&0&&{sourceLayer:nn},u&4&&{paint:{"fill-color":Me(["get","RUC11"],a[2],"cyan"),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?te(f,[u&0&&oe(q(`${Vt}-outline`)),u&0&&{sourceLayer:nn},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function ma(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Vt,title:_a,$$slots:{controls:[ua],help:[fa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${nn}.pmtiles`,$$slots:{default:[pa]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Vt="ruc",nn="rural_urban_classification",_a="Rural Urban Classification";function ga(o,e,l){let t,n=$e(Vt);Y(o,n,f=>l(0,t=f));let r={"Urban major conurbation":"#fe2200","Urban minor conurbation":"#ff6f00","Urban city and town in a sparse setting":"#ffa602","Urban city and town":"#ffe400","Rural town and fringe in a sparse setting":"#006100","Rural town and fringe":"#4a8a02","Rural village in a sparse setting":"#8cb503","Rural village":"#d6e601","Rural hamlets and isolated dwellings in a sparse setting":"#a1d99b","Rural hamlets and isolated dwellings":"#e5f5e0"};function s(f){t=f,n.set(t)}return[t,n,r,s]}class da extends V{constructor(e){super(),K(this,e,ga,ma,Q,{})}}function ha(o){let e,l,t;return l=new Te({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function wa(o){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ba(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[wa]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(", as of May 2023."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function va(o){let e,l=o[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&d(e)}}}function ka(o){let e,l;return e=new ae({props:{$$slots:{default:[va,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ya(o){let e,l,t,n;const r=[q(xe),{sourceLayer:xe},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ka]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new Ne({props:s}),e.$on("click",Ca);const f=[q(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new _e({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&oe(q(xe)),u&0&&{sourceLayer:xe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?te(f,[u&0&&oe(q(`${xe}-outline`)),u&0&&{sourceLayer:xe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Sa(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:xe,title:Ta,$$slots:{help:[ba],icon:[ha]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${xe}.pmtiles`,$$slots:{default:[ya]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let xe="wards",Ta="Wards";function Ca(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function La(o,e,l){let t,n=ne.wards,r=$e(xe);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ia extends V{constructor(e){super(),K(this,e,La,Sa,Q,{})}}function Oa(o){let e;return{c(){e=y("Open Data Commons Open Database License")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ma(o){let e,l,t,n;return t=new re({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Oa]},$$scope:{ctx:o}}}),{c(){e=S("p"),l=y("License: "),w(t.$$.fragment)},m(r,s){g(r,e,s),$(e,l),b(t,e,null),n=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&d(e),v(t)}}}class tt extends V{constructor(e){super(),K(this,e,null,Ma,Q,{})}}function ja(o){let e,l,t;return l=new Te({props:{color:ne.bus_route_with_lane}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Na(o){let e;return{c(){e=y(`GTFS
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Fa(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://gtfs.org",$$slots:{default:[Na]},$$scope:{ctx:o}}}),a=new tt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=S("p"),r=y("Note this data is from OpenStreetMap (as of 20 October 2024), not "),w(s.$$.fragment),f=y(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),b(s,n,null),$(n,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&16&&(h.$$scope={dirty:p,ctx:c}),s.$set(h)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(s),v(a)}}}function Ra(o){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Pa(o){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Da(o){let e;function l(r,s){return r[3].has_bus_lane?Pa:Ra}let t=l(o),n=t(o);return{c(){n.c(),e=de()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function Aa(o){let e,l;return e=new ae({props:{$$slots:{default:[Da,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ga(o){let e,l;const t=[q(kt),{sourceLayer:kt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ne.bus_route_with_lane,ne.bus_route_without_lane],"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Aa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(kt)),s&0&&{sourceLayer:kt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function qa(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:kt,title:Ha,$$slots:{help:[Fa],icon:[ja]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${kt}.pmtiles`,$$slots:{default:[Ga]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let kt="bus_routes",Ha="Bus routes";function za(o,e,l){let t,n=$e(kt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Ua extends V{constructor(e){super(),K(this,e,za,qa,Q,{})}}function wl(o){const e=xa(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function bl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function Ba(o){let e,l,t,n,r,s,f,i,a;return i=new tt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=S("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),s=S("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),w(i.$$.fragment),A(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),b(i,e,null),a=!0},p:J,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){_(i.$$.fragment,u),a=!1},d(u){u&&d(e),v(i)}}}function Ea(o){let e,l,t=o[13]+"",n,r,s;return e=new Te({props:{color:o[14]}}),{c(){w(e.$$.fragment),l=L(),n=y(t),r=L()},m(f,i){b(e,f,i),g(f,l,i),g(f,n,i),g(f,r,i),s=!0},p:J,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n),d(r)),v(e,f)}}}function vl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[Ea]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Be({props:r}),U.push(()=>E(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],W(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Wa(o){let e,l,t=ge(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=vl(bl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f&5){t=ge(s[2]);let i;for(i=0;i<t.length;i+=1){const a=bl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=vl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(ke(),i=t.length;i<n.length;i+=1)r(i);ye()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),Ee(n,s)}}}function Ya(o){let e,l,t;return l=new Fe({props:{small:!0,$$slots:{default:[Wa]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ja(o){wl(o);let e,l=o[10]+"",t,n,r,s,f,i=o[11]+"",a,u,c,p,h=o[12]+"",k;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),s=y("Direction: "),f=S("b"),a=L(),u=S("p"),c=y("Width: "),p=S("b"),k=y(h)},m(C,T){g(C,e,T),$(e,t),g(C,n,T),g(C,r,T),$(r,s),$(r,f),f.innerHTML=i,g(C,a,T),g(C,u,T),$(u,c),$(u,p),$(p,k)},p(C,T){wl(C),T&512&&l!==(l=C[10]+"")&&G(t,l),T&512&&i!==(i=C[11]+"")&&(f.innerHTML=i),T&512&&h!==(h=C[12]+"")&&G(k,h)},d(C){C&&(d(e),d(n),d(r),d(a),d(u))}}}function Qa(o){let e,l;return e=new ae({props:{$$slots:{default:[Ja,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Va(o){let e,l;const t=[q(yt),{sourceLayer:yt},{paint:{"line-color":Me(["get","kind"],{track:ne.cycle_paths.track,lane:ne.cycle_paths.lane,shared_use_segregated:ne.cycle_paths.shared_use_segregated,shared_use_unsegregated:ne.cycle_paths.shared_use_unsegregated},"red"),"line-width":He,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[Qa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),e.$on("click",ef),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?te(t,[s&0&&oe(q(yt)),s&0&&{sourceLayer:yt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ka(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:yt,title:Za,$$slots:{controls:[Ya],help:[Ba]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${yt}.pmtiles`,$$slots:{default:[Va]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,W(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let yt="cycle_paths",Za="Cycle paths";function Xa(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function xa(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function ef(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function tf(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(p){return p.show?n.filter(h=>p[h]).join(","):null}let f=Jt(yt,r,s,Xa);Y(o,f,p=>l(0,t=p));let i=[["track","Separated tracks",ne.cycle_paths.track],["lane","Unprotected lanes",ne.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",ne.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",ne.cycle_paths.shared_use_unsegregated]];function a(p){let h=n.filter(k=>p[k]);return["in",["get","kind"],["literal",h]]}function u(p,h){o.$$.not_equal(t[h],p)&&(t[h]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class nf extends V{constructor(e){super(),K(this,e,tf,Ka,Q,{})}}function lf(o){let e,l,t;return l=new Te({props:{color:ne.cycle_route}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function rf(o){let e;return{c(){e=y("OpenStreetMap")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function of(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:route%3Dbicycle",$$slots:{default:[rf]},$$scope:{ctx:o}}}),f=new tt({}),{c(){e=S("span"),l=S("p"),t=y("This shows all cycle routes, according to "),w(n.$$.fragment),r=y(` (as of 20 October 2024). The quality of the route or infrastructure
      along it is not shown here. Not all routes are official, named routes -- click
      one to see more information.`),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function sf(o){let e=(o[3].name||"untitled route")+"",l;return{c(){l=y(e)},m(t,n){g(t,l,n)},p(t,n){n&8&&e!==(e=(t[3].name||"untitled route")+"")&&G(l,e)},d(t){t&&d(l)}}}function af(o){let e,l;return e=new ae({props:{$$slots:{default:[sf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ff(o){let e,l;const t=[q(St),{sourceLayer:St},{paint:{"line-color":ee(ne.cycle_route,"red"),"line-width":8}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[af]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),e.$on("click",$f),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(St)),s&0&&{sourceLayer:St},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function uf(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:St,title:cf,$$slots:{help:[of],icon:[lf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${St}.pmtiles`,$$slots:{default:[ff]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let St="cycle_routes",cf="Cycle routes";function $f(o){window.open(`http://openstreetmap.org/relation/${o.detail.features[0].properties.osm_relation}`,"_blank")}function pf(o,e,l){let t,n=$e(St);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class mf extends V{constructor(e){super(),K(this,e,pf,uf,Q,{})}}function _f(o){let e;return{c(){e=y("OS Terrain 50")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function gf(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[_f]},$$scope:{ctx:o}}}),c=new Oe({}),h=new tt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=S("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),s=S("p"),f=y("This layer is built from "),w(i.$$.fragment),a=y(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),w(c.$$.fragment),p=L(),w(h.$$.fragment),A(e,"slot","help")},m(C,T){g(C,e,T),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),b(i,s,null),$(s,a),$(e,u),b(c,e,null),$(e,p),b(h,e,null),k=!0},p(C,T){const I={};T&64&&(I.$$scope={dirty:T,ctx:C}),i.$set(I)},i(C){k||(m(i.$$.fragment,C),m(c.$$.fragment,C),m(h.$$.fragment,C),k=!0)},o(C){_(i.$$.fragment,C),_(c.$$.fragment,C),_(h.$$.fragment,C),k=!1},d(C){C&&d(e),v(i),v(c),v(h)}}}function df(o){let e,l,t,n,r;return l=new Je({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),w(l.$$.fragment),t=L(),n=S("p"),n.innerHTML=`<img src="${po}" alt="arrow"/>
      Arrows point uphill`,A(e,"slot","controls")},m(s,f){g(s,e,f),b(l,e,null),$(e,t),$(e,n),r=!0},p:J,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),r=!1},d(s){s&&d(e),v(l)}}}function hf(o){let e,l,t,n=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=S("p"),l=y("Gradient: "),t=S("b"),r=y(n),s=y(`
        %`)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(t,r),$(e,s)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&G(r,n)},d(f){f&&d(e)}}}function wf(o){let e,l;return e=new ae({props:{$$slots:{default:[hf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function bf(o){let e,l,t,n;const r=[q(et),{sourceLayer:et},{manageHoverState:!0},{paint:{"line-color":be(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":He,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[wf]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new _e({props:s});const f=[q(et+"_arrows"),{sourceLayer:et},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new jn({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&7?te(r,[u&0&&oe(q(et)),u&0&&{sourceLayer:et},r[2],u&6&&{paint:{"line-color":be(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":He,"line-opacity":ee(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?te(f,[u&0&&oe(q(et+"_arrows")),u&0&&{sourceLayer:et},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function vf(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:et,title:kf,$$slots:{controls:[df],help:[gf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${et}.pmtiles`,$$slots:{default:[bf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let et="gradient",kf="Gradients";function yf(o,e,l){let t,n=ne.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=$e(et);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Sf extends V{constructor(e){super(),K(this,e,yf,vf,Q,{})}}function Tf(o){let e,l,t;return l=new Te({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Cf(o){let e;return{c(){e=y(`Major Road Network
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Lf(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Cf]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),w(n.$$.fragment),r=y(", as of September 2021."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function If(o){let e,l=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&G(t,l)},d(n){n&&d(e)}}}function Of(o){let e,l;return e=new ae({props:{$$slots:{default:[If,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Mf(o){let e,l;const t=[q(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Of]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&oe(q(Tt)),s&0&&{sourceLayer:Tt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function jf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Tt,title:Nf,$$slots:{help:[Lf],icon:[Tf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Tt}.pmtiles`,$$slots:{default:[Mf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Tt="mrn",Nf="Major Road Network";function Ff(o,e,l){let t,n=ne.mrn,r=$e(Tt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Rf extends V{constructor(e){super(),K(this,e,Ff,jf,Q,{})}}function Pf(o){let e,l,t;return l=new Te({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Df(o){let e;return{c(){e=y(`National Cycle Network
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Af(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Df]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("Data from Sustrans about the "),w(n.$$.fragment),r=y(", downloaded on 22/01/2024."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function kl(o){let e,l,t,n=o[4].Desc_+"",r;return{c(){e=S("li"),l=y("Description: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Desc_+"")&&G(r,n)},d(s){s&&d(e)}}}function yl(o){let e,l,t,n=o[4].Greenway+"",r;return{c(){e=S("li"),l=y("Is greenway: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Greenway+"")&&G(r,n)},d(s){s&&d(e)}}}function Sl(o){let e,l,t,n=o[4].RouteType+"",r;return{c(){e=S("li"),l=y("Route type: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteType+"")&&G(r,n)},d(s){s&&d(e)}}}function Tl(o){let e,l,t,n=o[4].RouteNo+"",r;return{c(){e=S("li"),l=y("Route number: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteNo+"")&&G(r,n)},d(s){s&&d(e)}}}function Cl(o){let e,l,t,n=o[4].RouteCat+"",r;return{c(){e=S("li"),l=y("Route Category: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteCat+"")&&G(r,n)},d(s){s&&d(e)}}}function Ll(o){let e,l,t,n=o[4].OpenStatus+"",r;return{c(){e=S("li"),l=y("Open Status: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].OpenStatus+"")&&G(r,n)},d(s){s&&d(e)}}}function Il(o){let e,l,t,n=o[4].Surface+"",r;return{c(){e=S("li"),l=y("Surface: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Surface+"")&&G(r,n)},d(s){s&&d(e)}}}function Ol(o){let e,l,t,n=o[4].Quality+"",r;return{c(){e=S("li"),l=y("Quality: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Quality+"")&&G(r,n)},d(s){s&&d(e)}}}function Ml(o){let e,l,t,n=o[4].RoadClass+"",r;return{c(){e=S("li"),l=y("Road Class: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RoadClass+"")&&G(r,n)},d(s){s&&d(e)}}}function Gf(o){let e,l,t,n,r,s,f,i,a,u=o[4].Desc_&&kl(o),c=o[4].Greenway&&yl(o),p=o[4].RouteType&&Sl(o),h=o[4].RouteNo&&Tl(o),k=o[4].RouteCat&&Cl(o),C=o[4].OpenStatus&&Ll(o),T=o[4].Surface&&Il(o),I=o[4].Quality&&Ol(o),j=o[4].RoadClass&&Ml(o);return{c(){e=S("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),p&&p.c(),n=L(),h&&h.c(),r=L(),k&&k.c(),s=L(),C&&C.c(),f=L(),T&&T.c(),i=L(),I&&I.c(),a=L(),j&&j.c()},m(N,F){g(N,e,F),u&&u.m(e,null),$(e,l),c&&c.m(e,null),$(e,t),p&&p.m(e,null),$(e,n),h&&h.m(e,null),$(e,r),k&&k.m(e,null),$(e,s),C&&C.m(e,null),$(e,f),T&&T.m(e,null),$(e,i),I&&I.m(e,null),$(e,a),j&&j.m(e,null)},p(N,F){N[4].Desc_?u?u.p(N,F):(u=kl(N),u.c(),u.m(e,l)):u&&(u.d(1),u=null),N[4].Greenway?c?c.p(N,F):(c=yl(N),c.c(),c.m(e,t)):c&&(c.d(1),c=null),N[4].RouteType?p?p.p(N,F):(p=Sl(N),p.c(),p.m(e,n)):p&&(p.d(1),p=null),N[4].RouteNo?h?h.p(N,F):(h=Tl(N),h.c(),h.m(e,r)):h&&(h.d(1),h=null),N[4].RouteCat?k?k.p(N,F):(k=Cl(N),k.c(),k.m(e,s)):k&&(k.d(1),k=null),N[4].OpenStatus?C?C.p(N,F):(C=Ll(N),C.c(),C.m(e,f)):C&&(C.d(1),C=null),N[4].Surface?T?T.p(N,F):(T=Il(N),T.c(),T.m(e,i)):T&&(T.d(1),T=null),N[4].Quality?I?I.p(N,F):(I=Ol(N),I.c(),I.m(e,a)):I&&(I.d(1),I=null),N[4].RoadClass?j?j.p(N,F):(j=Ml(N),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},d(N){N&&d(e),u&&u.d(),c&&c.d(),p&&p.d(),h&&h.d(),k&&k.d(),C&&C.d(),T&&T.d(),I&&I.d(),j&&j.d()}}}function qf(o){let e,l;return e=new ae({props:{$$slots:{default:[Gf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Hf(o){let e,l;const t=[q(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[qf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&oe(q(Ct)),s&0&&{sourceLayer:Ct},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function zf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ct,title:Uf,$$slots:{help:[Af],icon:[Pf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ct}.pmtiles`,$$slots:{default:[Hf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ct="national_cycle_network",Uf="National Cycle Network";function Bf(o,e,l){let t,n=ne.national_cycle_network,r=$e(Ct);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ef extends V{constructor(e){super(),K(this,e,Bf,zf,Q,{})}}function jl(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function Wf(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Yf(o){let e,l,t,n,r,s,f,i,a,u,c,p;return u=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Wf]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=S("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),s=S("p"),s.textContent="Data valid as of 1 January, 2024",f=L(),i=S("p"),a=y(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),w(u.$$.fragment),c=y("."),A(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),$(e,i),$(i,a),b(u,i,null),$(i,c),p=!0},p(h,k){const C={};k&4096&&(C.$$scope={dirty:k,ctx:h}),u.$set(C)},i(h){p||(m(u.$$.fragment,h),p=!0)},o(h){_(u.$$.fragment,h),p=!1},d(h){h&&d(e),v(u)}}}function Jf(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Qf(o){let e,l,t=$n(o[6].angle+o[9])+"",n;return{c(){e=S("p"),l=new zt(!1),n=y(` side of the road: no pavement
          `),l.a=n},m(r,s){g(r,e,s),l.m(t,e),$(e,n)},p(r,s){s&64&&t!==(t=$n(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&d(e)}}}function Vf(o){let e,l,t=$n(o[6].angle+o[9])+"",n,r,s=o[7]+"",f,i,a,u=o[8]+"",c,p;return{c(){e=S("p"),l=new zt(!1),n=y(` side of the road:
            `),r=S("b"),f=y(s),i=y(`
            m average,
            `),a=S("b"),c=y(u),p=y(`
            m minimum
          `),l.a=n},m(h,k){g(h,e,k),l.m(t,e),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,c),$(e,p)},p(h,k){k&64&&t!==(t=$n(h[6].angle+h[9])+"")&&l.p(t),k&64&&s!==(s=h[7]+"")&&G(f,s),k&64&&u!==(u=h[8]+"")&&G(c,u)},d(h){h&&d(e)}}}function Nl(o){let e;function l(r,s){return r[7]?Vf:Qf}let t=l(o),n=t(o);return{c(){n.c(),e=de()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function Kf(o){let e,l=ge([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Nl(jl(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=de()},m(n,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(n,r);g(n,e,r)},p(n,r){if(r&64){l=ge([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=jl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Nl(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(n){n&&d(e),Ee(t,n)}}}function Zf(o){let e,l;return e=new ae({props:{openOn:"hover",$$slots:{default:[Kf,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Xf(o){let e,l;const t=[q(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":He,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Zf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(Lt)),s&0&&{sourceLayer:Lt},t[2],t[3],s&6&&{paint:{"line-color":be(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":He,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function xf(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Lt,title:eu,$$slots:{controls:[Jf],help:[Yf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${Xt()}/v1/${Lt}.pmtiles`,$$slots:{default:[Xf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Lt="pavement_widths",eu="OS Pavement widths";function tu(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function $n(o){return`${tu(o)} <span style="display: inline-block; rotate: ${o}deg">â¬†</span>`}function nu(o,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=$e(Lt);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class lu extends V{constructor(e){super(),K(this,e,nu,xf,Q,{})}}function ru(o){let e;return{c(){e=y("the PCT website")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ou(o){let e;return{c(){e=y("2017 journal article")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function su(o){let e,l,t,n,r,s,f,i,a,u,c,p;return i=new re({props:{href:"https://www.pct.bike",$$slots:{default:[ru]},$$scope:{ctx:o}}}),u=new re({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[ou]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=S("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),s=S("p"),f=y("See "),w(i.$$.fragment),a=y(" and "),w(u.$$.fragment),c=y(" for details on methodology and data sources."),A(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),b(i,s,null),$(s,a),b(u,s,null),$(s,c),p=!0},p(h,k){const C={};k&1024&&(C.$$scope={dirty:k,ctx:h}),i.$set(C);const T={};k&1024&&(T.$$scope={dirty:k,ctx:h}),u.$set(T)},i(h){p||(m(i.$$.fragment,h),m(u.$$.fragment,h),p=!0)},o(h){_(i.$$.fragment,h),_(u.$$.fragment,h),p=!1},d(h){h&&d(e),v(i),v(u)}}}function iu(o){let e,l,t,n,r,s,f,i,a;l=new Je({props:{colorScale:o[1],limits:o[2]}});function u(k){o[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),n=new Mn({props:c}),U.push(()=>E(n,"value",u));function p(k){o[6](k)}let h={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(h.value=o[0].scenario),f=new ln({props:h}),U.push(()=>E(f,"value",p)),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(k,C){g(k,e,C),b(l,e,null),$(e,t),b(n,e,null),$(e,s),b(f,e,null),a=!0},p(k,C){const T={};!r&&C&1&&(r=!0,T.value=k[0].tripPurpose,W(()=>r=!1)),n.$set(T);const I={};!i&&C&1&&(i=!0,I.value=k[0].scenario,W(()=>i=!1)),f.$set(I)},i(k){a||(m(l.$$.fragment,k),m(n.$$.fragment,k),m(f.$$.fragment,k),a=!0)},o(k){_(l.$$.fragment,k),_(n.$$.fragment,k),_(f.$$.fragment,k),a=!1},d(k){k&&d(e),v(l),v(n),v(f)}}}function au(o){let e,l=o[4](o[9])+"",t;return{c(){e=new zt(!1),t=de(),e.a=t},m(n,r){e.m(l,n,r),g(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(d(t),e.d())}}}function fu(o){let e,l;return e=new ae({props:{$$slots:{default:[au,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function uu(o){let e,l;const t=[q(ot),{sourceLayer:ot},{paint:{"line-color":be(["get",o[0].scenario],o[2],o[1]),"line-width":He,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==ot?"visible":"none"}}];let n={$$slots:{default:[fu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(ot)),s&0&&{sourceLayer:ot},s&7&&{paint:{"line-color":be(["get",r[0].scenario],r[2],r[1]),"line-width":He,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==ot?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function cu(o){let e,l=o[4](o[9])+"",t;return{c(){e=new zt(!1),t=de(),e.a=t},m(n,r){e.m(l,n,r),g(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(d(t),e.d())}}}function $u(o){let e,l;return e=new ae({props:{$$slots:{default:[cu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function pu(o){let e,l;const t=[q(dt),{sourceLayer:dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get",o[0].scenario],o[2],o[1]),"line-width":He,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==dt?"visible":"none"}}];let n={$$slots:{default:[$u]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(dt)),s&0&&{sourceLayer:dt},t[2],t[3],s&7&&{paint:{"line-color":be(["get",r[0].scenario],r[2],r[1]),"line-width":He,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==dt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function mu(o){let e,l,t,n,r,s,f;function i(u){o[7](u)}let a={name:qr,title:_u,$$slots:{controls:[iu],help:[su]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new fe({props:a}),U.push(()=>E(e,"show",i)),n=new pe({props:{url:`pmtiles://${me()}/v1/${ot}.pmtiles`,$$slots:{default:[uu]},$$scope:{ctx:o}}}),s=new pe({props:{url:`pmtiles://${me()}/v1/${dt}.pmtiles`,$$slots:{default:[pu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(u,c){b(e,u,c),g(u,t,c),b(n,u,c),g(u,r,c),b(s,u,c),f=!0},p(u,[c]){const p={};c&1025&&(p.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,p.show=u[0].show,W(()=>l=!1)),e.$set(p);const h={};c&1025&&(h.$$scope={dirty:c,ctx:u}),n.$set(h);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),s.$set(k)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(e.$$.fragment,u),_(n.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(t),d(r)),v(e,u),v(n,u),v(s,u)}}}let qr="pct",ot="pct_commute",dt="pct_school",_u="Propensity to Cycle Tool";function gu(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function du(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function hu(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=Jt(qr,{show:!1,tripPurpose:ot,scenario:"baseline"},gu,du);Y(o,f,p=>l(0,t=p));function i(p){let h=p.baseline,k=p.gov_target,C=p.go_dutch,T=`<h2>Trip purpose: ${t.tripPurpose==ot?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${h.toLocaleString()}</b></p>`,h==0)T+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let I=(k/h).toFixed(1),j=(C/h).toFixed(1);T+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${j}x</b> of baseline)</p>`}return T}function a(p){o.$$.not_equal(t.tripPurpose,p)&&(t.tripPurpose=p,f.set(t))}function u(p){o.$$.not_equal(t.scenario,p)&&(t.scenario=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,n,r,f,i,a,u,c]}class wu extends V{constructor(e){super(),K(this,e,hu,mu,Q,{})}}function Fl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[11]=e[l][1],t[12]=e[l][2],t[13]=e,t[14]=l,t}function bu(o){let e;return{c(){e=y(`rowmaps.com
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function vu(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://www.rowmaps.com",$$slots:{default:[bu]},$$scope:{ctx:o}}}),a=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("These public rights of way are aggregated from 137 authorities, thanks to "),w(n.$$.fragment),r=y(`. The licenses for each authority may vary, but most use
      the Open Government License v3 or Creative Commons.`),s=L(),f=S("p"),f.textContent="This data is current as of 15 November, 2024.",i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&32768&&(h.$$scope={dirty:p,ctx:c}),n.$set(h)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(a)}}}function ku(o){let e,l,t=o[11]+"",n,r,s;return e=new Te({props:{color:o[12]}}),{c(){w(e.$$.fragment),l=L(),n=y(t),r=L()},m(f,i){b(e,f,i),g(f,l,i),g(f,n,i),g(f,r,i),s=!0},p:J,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n),d(r)),v(e,f)}}}function Rl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[ku]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Be({props:r}),U.push(()=>E(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f&32768&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],W(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function yu(o){let e,l,t=ge(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Rl(Fl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f&5){t=ge(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Fl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Rl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(ke(),i=t.length;i<n.length;i+=1)r(i);ye()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),Ee(n,s)}}}function Su(o){let e,l,t;return l=new Fe({props:{small:!0,$$slots:{default:[yu]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Tu(o){let e,l=o[9].kind+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&512&&l!==(l=n[9].kind+"")&&G(t,l)},d(n){n&&d(e)}}}function Cu(o){let e,l;return e=new ae({props:{$$slots:{default:[Tu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&33280&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Lu(o){let e,l;const t=[q(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Me(["get","kind"],{footpath:ne.rights_of_way.footpath,bridleway:ne.rights_of_way.bridleway,"restricted byway":ne.rights_of_way.restricted_byway,"byway open to all traffic":ne.rights_of_way.boat},"red"),"line-width":He,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])}];let n={$$slots:{default:[Cu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?te(t,[s&0&&oe(q(It)),s&0&&{sourceLayer:It},t[2],t[3],t[4],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])}]):{};s&32768&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Iu(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:It,title:Ou,$$slots:{controls:[Su],help:[vu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${It}.pmtiles`,$$slots:{default:[Lu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32769&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,W(()=>l=!1)),e.$set(u);const c={};a&32769&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let It="rights_of_way",Ou="Rights of Way";function Mu(o){return{show:!0,footpath:o.includes("footpath"),bridleway:o.includes("bridleway"),restricted_byway:o.includes("restricted_byway"),boat:o.includes("boat")}}function ju(o,e,l){let t,n=["footpath","bridleway","restricted_byway","boat"],r={show:!1,footpath:!0,bridleway:!0,restricted_byway:!0,boat:!0};function s(p){return p.show?n.filter(h=>p[h]).join(","):null}let f=Jt(It,r,s,Mu);Y(o,f,p=>l(0,t=p));let i=[["footpath","Footpath",ne.rights_of_way.footpath],["bridleway","Bridleway",ne.rights_of_way.bridleway],["restricted_byway","Restricted byway",ne.rights_of_way.restricted_byway],["boat","Byway open to all traffic",ne.rights_of_way.boat]];function a(p){let h=n.filter(k=>p[k]).map(k=>({footpath:"footpath",bridleway:"bridleway",restricted_byway:"restricted byway",boat:"byway open to all traffic"})[k]);return["in",["get","kind"],["literal",h]]}function u(p,h){o.$$.not_equal(t[h],p)&&(t[h]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class Nu extends V{constructor(e){super(),K(this,e,ju,Iu,Q,{})}}function Fu(o){let e;return{c(){e=y("Basemap")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ru(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Pu(o){let e,l,t,n,r,s,f,i,a,u,c,p,h;return n=new re({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Fu]},$$scope:{ctx:o}}}),c=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ru]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),t=y("The average speed data is collected over a six-month period by "),w(n.$$.fragment),r=y(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=L(),f=S("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=S("p"),u=y(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),w(c.$$.fragment),p=y("."),A(e,"slot","help")},m(k,C){g(k,e,C),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),$(e,a),$(a,u),b(c,a,null),$(a,p),h=!0},p(k,C){const T={};C&512&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const I={};C&512&&(I.$$scope={dirty:C,ctx:k}),c.$set(I)},i(k){h||(m(n.$$.fragment,k),m(c.$$.fragment,k),h=!0)},o(k){_(n.$$.fragment,k),_(c.$$.fragment,k),h=!1},d(k){k&&d(e),v(n),v(c)}}}function Du(o){let e,l,t,n,r,s;l=new Je({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),n=new Mn({props:i}),U.push(()=>E(n,"value",f)),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(a,u){g(a,e,u),b(l,e,null),$(e,t),b(n,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,W(()=>r=!1)),n.$set(c)},i(a){s||(m(l.$$.fragment,a),m(n.$$.fragment,a),s=!0)},o(a){_(l.$$.fragment,a),_(n.$$.fragment,a),s=!1},d(a){a&&d(e),v(l),v(n)}}}function Au(o){let e,l,t=o[8].indicative_mph+"",n,r,s,f,i,a=o[8].highest_mph+"",u,c,p=o[4][o[8].highest_description]+"",h,k;return{c(){e=S("p"),l=y("Posted speed limit: "),n=y(t),r=y(" mph"),s=L(),f=S("p"),i=y("Highest average speed: "),u=y(a),c=y(" mph (during "),h=y(p),k=y(")")},m(C,T){g(C,e,T),$(e,l),$(e,n),$(e,r),g(C,s,T),g(C,f,T),$(f,i),$(f,u),$(f,c),$(f,h),$(f,k)},p(C,T){T&256&&t!==(t=C[8].indicative_mph+"")&&G(n,t),T&256&&a!==(a=C[8].highest_mph+"")&&G(u,a),T&256&&p!==(p=C[4][C[8].highest_description]+"")&&G(h,p)},d(C){C&&(d(e),d(s),d(f))}}}function Gu(o){let e,l;return e=new ae({props:{$$slots:{default:[Au,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function qu(o){let e,l;const t=[q(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get",o[0].kind],o[2],o[1]),"line-width":He,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[Gu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(Ot)),s&0&&{sourceLayer:Ot},t[2],t[3],s&7&&{paint:{"line-color":be(["get",r[0].kind],r[2],r[1]),"line-width":He,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Hu(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Ot,title:zu,$$slots:{controls:[Du],help:[Pu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${Xt()}/v1/${Ot}.pmtiles`,$$slots:{default:[qu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,W(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ot="road_speeds",zu="OS Speeds";function Uu(o){return o.show?o.kind:null}function Bu(o){return{show:!0,kind:o}}function Eu(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,20,30,40,50,90],f=Jt(Ot,{show:!1,kind:"indicative_mph"},Uu,Bu);Y(o,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class Wu extends V{constructor(e){super(),K(this,e,Eu,Hu,Q,{})}}function Yu(o){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ju(o){let e,l,t,n,r,s,f,i,a,u;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Yu]},$$scope:{ctx:o}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=S("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),s=S("p"),f=y(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),w(i.$$.fragment),a=y("."),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),b(i,s,null),$(s,a),u=!0},p(c,p){const h={};p&64&&(h.$$scope={dirty:p,ctx:c}),i.$set(h)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){_(i.$$.fragment,c),u=!1},d(c){c&&d(e),v(i)}}}function Qu(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Vu(o){let e,l,t,n=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",p,h;return{c(){e=S("p"),l=y("Average width: "),t=S("b"),r=y(n),s=y(`
        meters`),f=L(),i=S("p"),a=y("Minimum width: "),u=S("b"),p=y(c),h=y(`
        meters`)},m(k,C){g(k,e,C),$(e,l),$(e,t),$(t,r),$(e,s),g(k,f,C),g(k,i,C),$(i,a),$(i,u),$(u,p),$(i,h)},p(k,C){C&32&&n!==(n=k[5].average+"")&&G(r,n),C&32&&c!==(c=k[5].minimum+"")&&G(p,c)},d(k){k&&(d(e),d(f),d(i))}}}function Ku(o){let e,l;return e=new ae({props:{$$slots:{default:[Vu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Zu(o){let e,l;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":be(["get","average"],o[2],o[1]),"line-width":He,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Ku]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&6&&{paint:{"line-color":be(["get","average"],r[2],r[1]),"line-width":He,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Xu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Mt,title:xu,$$slots:{controls:[Qu],help:[Ju]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${Xt()}/v1/${Mt}.pmtiles`,$$slots:{default:[Zu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Mt="road_widths",xu="OS Road widths";function ec(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,5,10,15,20,100],s=$e(Mt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class tc extends V{constructor(e){super(),K(this,e,ec,Xu,Q,{})}}function nc(o){let e,l,t;return l=new Te({props:{color:o[1]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function lc(o){let e;return{c(){e=y(`OS Open Roads
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function rc(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[lc]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),w(n.$$.fragment),r=y(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function oc(o){let e,l=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&G(t,l)},d(n){n&&d(e)}}}function sc(o){let e,l;return e=new ae({props:{$$slots:{default:[oc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ic(o){let e,l;const t=[q(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[sc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&oe(q(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ac(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:jt,title:fc,$$slots:{help:[rc],icon:[nc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${jt}.pmtiles`,$$slots:{default:[ic]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let jt="srn",fc="Strategic Road Network";function uc(o,e,l){let t,n=ne.srn,r=$e(jt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class cc extends V{constructor(e){super(),K(this,e,uc,ac,Q,{})}}function $c(o){let e,l,t;return l=new Te({props:{color:ne.trams}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function pc(o){let e,l,t,n,r;return n=new tt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),w(n.$$.fragment),A(e,"slot","help")},m(s,f){g(s,e,f),$(e,l),$(e,t),b(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function mc(o){let e,l;const t=[q(Nt),{sourceLayer:Nt},{paint:{"line-color":ne.trams,"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new _e({props:n}),e.$on("click",dc),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function _c(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Nt,title:gc,$$slots:{help:[pc],icon:[$c]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Nt}.pmtiles`,$$slots:{default:[mc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Nt="trams",gc="Trams";function dc(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function hc(o,e,l){let t,n=$e(Nt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class wc extends V{constructor(e){super(),K(this,e,hc,_c,Q,{})}}function bc(o){let e;return{c(){e=y(`Bus Open Data Service
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function vc(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[bc]},$$scope:{ctx:o}}}),a=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),w(n.$$.fragment),r=y(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=L(),f=S("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&64&&(h.$$scope={dirty:p,ctx:c}),n.$set(h)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(a)}}}function kc(o){let e,l,t,n,r;return n=new Je({props:{colorScale:o[1],limits:o[2]}}),{c(){e=S("div"),l=S("p"),l.textContent="Peak hourly frequency:",t=L(),w(n.$$.fragment),A(e,"slot","controls")},m(s,f){g(s,e,f),$(e,l),$(e,t),b(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function yc(o){let e,l,t,n=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,p,h,k,C,T=o[5].peak_description+"",I,j,N,F,O,M=o[5].total+"",H,R,P=o[5].total_description+"",B,ue;return{c(){e=S("p"),l=y("Stop name: "),t=S("b"),r=y(n),s=L(),f=S("p"),i=y("Peak: "),a=S("b"),c=y(u),p=y(`
        buses during the busiest hour of any day`),h=L(),k=S("p"),C=y("The peak hour is "),I=y(T),j=L(),N=S("p"),F=y("Total buses per day: "),O=S("b"),H=y(M),R=y(`
        (for `),B=y(P),ue=y(", the busiest day of the week)")},m(D,x){g(D,e,x),$(e,l),$(e,t),$(t,r),g(D,s,x),g(D,f,x),$(f,i),$(f,a),$(a,c),$(f,p),g(D,h,x),g(D,k,x),$(k,C),$(k,I),g(D,j,x),g(D,N,x),$(N,F),$(N,O),$(O,H),$(N,R),$(N,B),$(N,ue)},p(D,x){x&32&&n!==(n=D[5].stop_name+"")&&G(r,n),x&32&&u!==(u=D[5].peak+"")&&G(c,u),x&32&&T!==(T=D[5].peak_description+"")&&G(I,T),x&32&&M!==(M=D[5].total+"")&&G(H,M),x&32&&P!==(P=D[5].total_description+"")&&G(B,P)},d(D){D&&(d(e),d(s),d(f),d(h),d(k),d(j),d(N))}}}function Sc(o){let e,l;return e=new ae({props:{$$slots:{default:[yc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Tc(o){let e,l;const t=[q(Ft),{sourceLayer:Ft},{paint:{"circle-color":be(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Sc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ct({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(Ft)),s&0&&{sourceLayer:Ft},s&6&&{paint:{"circle-color":be(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Cc(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ft,title:Lc,$$slots:{controls:[kc],help:[vc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ft}.pmtiles`,$$slots:{default:[Tc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ft="bus_stops",Lc="Bus stops";function Ic(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,3,10,20,30,100],s=$e(Ft);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Oc extends V{constructor(e){super(),K(this,e,Ic,Cc,Q,{})}}function Mc(o){let e;return{c(){e=y("crossing")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function jc(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Mc]},$$scope:{ctx:o}}}),f=new tt({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),w(n.$$.fragment),r=y(" data from OpenStreetMap (as of 5 January 2025)."),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Nc(o){let e,l,t;return l=new Yt({props:{rows:o[2]}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Fc(o){let e,l=(o[4].class||"Unknown")+"",t,n;return{c(){e=S("p"),t=y(l),n=y(" crossing")},m(r,s){g(r,e,s),$(e,t),$(e,n)},p(r,s){s&16&&l!==(l=(r[4].class||"Unknown")+"")&&G(t,l)},d(r){r&&d(e)}}}function Rc(o){let e,l;return e=new ae({props:{$$slots:{default:[Fc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Pc(o){let e,l=(o[4].class||"Unknown")+"",t,n;return{c(){e=S("p"),t=y(l),n=y(" crossing")},m(r,s){g(r,e,s),$(e,t),$(e,n)},p(r,s){s&16&&l!==(l=(r[4].class||"Unknown")+"")&&G(t,l)},d(r){r&&d(e)}}}function Dc(o){let e,l;return e=new ae({props:{$$slots:{default:[Pc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ac(o){let e,l,t,n;const r=[q("crossings-lines"),{sourceLayer:Rt},{filter:Sn},{paint:{"line-color":Me(["get","class"],Object.fromEntries(o[2]),"red"),"line-width":3}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let s={$$slots:{default:[Rc]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=X(s,r[a]);e=new _e({props:s}),e.$on("click",Pl);const f=[q("crossings-points"),{sourceLayer:Rt},{filter:Tn},{paint:{"circle-color":Me(["get","class"],Object.fromEntries(o[2]),"red"),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let i={$$slots:{default:[Dc]},$$scope:{ctx:o}};for(let a=0;a<f.length;a+=1)i=X(i,f[a]);return t=new ct({props:i}),t.$on("click",Pl),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&5?te(r,[r[0],u&0&&{sourceLayer:Rt},r[2],u&4&&{paint:{"line-color":Me(["get","class"],Object.fromEntries(a[2]),"red"),"line-width":3}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&5?te(f,[f[0],u&0&&{sourceLayer:Rt},f[2],u&4&&{paint:{"circle-color":Me(["get","class"],Object.fromEntries(a[2]),"red"),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},f[5],f[6]]):{};u&32&&(p.$$scope={dirty:u,ctx:a}),t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Gc(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Rt,title:qc,$$slots:{controls:[Nc],help:[jc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Rt}.pmtiles`,$$slots:{default:[Ac]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Rt="crossings",qc="Crossings";function Pl(o){window.open(`https://www.openstreetmap.org/${o.detail.features[0].properties.osm}`,"_blank")}function Hc(o,e,l){let t,n=$e(Rt);Y(o,n,f=>l(0,t=f));let r=[["Zebra","#66C5CC"],["Parallel","#F6CF71"],["Pelican","#F89C74"],["Puffin","#DCB0F2"],["Toucan","#87C55F"],["Pegasus","#9EB9F3"],["Uncontrolled","#FE88B1"],["Signalised","#C9DB74"],["Unknown","red"]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class zc extends V{constructor(e){super(),K(this,e,Hc,Gc,Q,{})}}function Uc(o){let e,l;return{c(){e=S("img"),A(e,"slot","icon"),On(e.src,l=mo)||A(e,"src",l),A(e,"alt","a logo representing cycle parking")},m(t,n){g(t,e,n)},p:J,d(t){t&&d(e)}}}function Bc(o){let e;return{c(){e=y("OpenStreetMap")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ec(o){let e;return{c(){e=y("OpenStreetMap Carto")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Wc(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Bc]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Ec]},$$scope:{ctx:o}}}),c=new tt({}),{c(){e=S("span"),l=S("p"),t=y("Cycle parking, according to "),w(n.$$.fragment),r=y(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=L(),f=S("p"),i=y("Icon from "),w(a.$$.fragment),u=L(),w(c.$$.fragment),A(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),b(a,f,null),$(e,u),b(c,e,null),p=!0},p(h,k){const C={};k&16&&(C.$$scope={dirty:k,ctx:h}),n.$set(C);const T={};k&16&&(T.$$scope={dirty:k,ctx:h}),a.$set(T)},i(h){p||(m(n.$$.fragment,h),m(a.$$.fragment,h),m(c.$$.fragment,h),p=!0)},o(h){_(n.$$.fragment,h),_(a.$$.fragment,h),_(c.$$.fragment,h),p=!1},d(h){h&&d(e),v(n),v(a),v(c)}}}function Yc(o){let e,l,t,n=(o[3].capacity??"unknown")+"",r;return{c(){e=S("p"),l=y("Capacity: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&8&&n!==(n=(s[3].capacity??"unknown")+"")&&G(r,n)},d(s){s&&d(e)}}}function Jc(o){let e,l;return e=new ae({props:{$$slots:{default:[Yc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qc(o){let e,l;const t=[q(Pt),{sourceLayer:Pt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Jc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new jn({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(Pt)),s&0&&{sourceLayer:Pt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Vc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Pt,title:Kc,$$slots:{help:[Wc],icon:[Uc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Pt}.pmtiles`,$$slots:{default:[Qc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Pt="cycle_parking",Kc="Cycle parking";function Zc(o,e,l){let t,n=$e(Pt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Xc extends V{constructor(e){super(),K(this,e,Zc,Vc,Q,{})}}function xc(o){let e,l,t,n,r;return n=new tt({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),w(n.$$.fragment),A(e,"slot","help")},m(s,f){g(s,e,f),$(e,l),$(e,t),b(n,e,null),r=!0},p:J,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function e$(o){let e,l,t;return e=new Te({props:{color:ne.education.schools}}),{c(){w(e.$$.fragment),l=y(`
        Schools`)},m(n,r){b(e,n,r),g(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function t$(o){let e,l,t;return e=new Te({props:{color:ne.education.colleges}}),{c(){w(e.$$.fragment),l=y(`
        Colleges`)},m(n,r){b(e,n,r),g(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function n$(o){let e,l,t;return e=new Te({props:{color:ne.education.universities}}),{c(){w(e.$$.fragment),l=y(`
        Universities`)},m(n,r){b(e,n,r),g(n,l,r),t=!0},p:J,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function l$(o){let e,l,t,n,r,s,f,i,a;function u(T){o[3](T)}let c={$$slots:{default:[e$]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new Be({props:c}),U.push(()=>E(e,"checked",u));function p(T){o[4](T)}let h={$$slots:{default:[t$]},$$scope:{ctx:o}};o[0].college!==void 0&&(h.checked=o[0].college),n=new Be({props:h}),U.push(()=>E(n,"checked",p));function k(T){o[5](T)}let C={$$slots:{default:[n$]},$$scope:{ctx:o}};return o[0].university!==void 0&&(C.checked=o[0].university),f=new Be({props:C}),U.push(()=>E(f,"checked",k)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment)},m(T,I){b(e,T,I),g(T,t,I),b(n,T,I),g(T,s,I),b(f,T,I),a=!0},p(T,I){const j={};I&2048&&(j.$$scope={dirty:I,ctx:T}),!l&&I&1&&(l=!0,j.checked=T[0].school,W(()=>l=!1)),e.$set(j);const N={};I&2048&&(N.$$scope={dirty:I,ctx:T}),!r&&I&1&&(r=!0,N.checked=T[0].college,W(()=>r=!1)),n.$set(N);const F={};I&2048&&(F.$$scope={dirty:I,ctx:T}),!i&&I&1&&(i=!0,F.checked=T[0].university,W(()=>i=!1)),f.$set(F)},i(T){a||(m(e.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),a=!0)},o(T){_(e.$$.fragment,T),_(n.$$.fragment,T),_(f.$$.fragment,T),a=!1},d(T){T&&(d(t),d(s)),v(e,T),v(n,T),v(f,T)}}}function r$(o){let e,l,t;return l=new Fe({props:{small:!0,$$slots:{default:[l$]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function o$(o){let e,l=(o[10].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&G(t,l)},d(n){n&&d(e)}}}function s$(o){let e,l;return e=new ae({props:{$$slots:{default:[o$,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function i$(o){let e,l;const t=[q(Dt),{sourceLayer:Dt},{paint:{"fill-color":Me(["get","type"],{school:ne.education.schools,college:ne.education.colleges,university:ne.education.universities},"grey"),"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[s$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Ne({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&5?te(t,[s&0&&oe(q(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function a$(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Dt,title:f$,$$slots:{controls:[r$],help:[xc]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Dt}.pmtiles`,$$slots:{default:[i$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,W(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Dt="education",f$="Education";function u$(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function c$(o,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(h){return h.show?n.filter(k=>h[k]).join(","):null}let f=Jt(Dt,r,s,u$);Y(o,f,h=>l(0,t=h));function i(h){let k=n.filter(C=>h[C]);return["in",["get","type"],["literal",k]]}function a(h){o.$$.not_equal(t.school,h)&&(t.school=h,f.set(t))}function u(h){o.$$.not_equal(t.college,h)&&(t.college=h,f.set(t))}function c(h){o.$$.not_equal(t.university,h)&&(t.university=h,f.set(t))}function p(h){o.$$.not_equal(t.show,h)&&(t.show=h,f.set(t))}return[t,f,i,a,u,c,p]}class $$ extends V{constructor(e){super(),K(this,e,c$,a$,Q,{})}}function p$(o){let e,l,t;return l=new Te({props:{color:ne.hospitals}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function m$(o){let e;return{c(){e=y("hospital")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function _$(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[m$]},$$scope:{ctx:o}}}),f=new tt({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),w(n.$$.fragment),r=y(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=L(),w(f.$$.fragment),A(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function g$(o){let e,l=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&G(t,l)},d(n){n&&d(e)}}}function d$(o){let e,l;return e=new ae({props:{$$slots:{default:[g$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function h$(o){let e,l;const t=[q(At),{sourceLayer:At},{paint:{"fill-color":ne.hospitals,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[d$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Ne({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(At)),s&0&&{sourceLayer:At},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function w$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:At,title:b$,$$slots:{help:[_$],icon:[p$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${At}.pmtiles`,$$slots:{default:[h$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let At="hospitals",b$="Hospitals";function v$(o,e,l){let t,n=$e(At);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class k$ extends V{constructor(e){super(),K(this,e,v$,w$,Q,{})}}function Dl(o,e,l){const t=o.slice();return t[6]=e[l],t}function y$(o){let e;return{c(){e=S("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,A(e,"slot","help")},m(l,t){g(l,e,t)},p:J,d(l){l&&d(e)}}}function S$(o){let e,l,t;return l=new Yt({props:{rows:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function T$(o){let e,l=o[5]["Issue ID"]+"",t,n,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=S("h2"),t=y(l),n=y(" - "),s=y(r),f=L(),i=S("p"),u=y(a)},m(c,p){g(c,e,p),$(e,t),$(e,n),$(e,s),g(c,f,p),g(c,i,p),$(i,u)},p(c,p){p&32&&l!==(l=c[5]["Issue ID"]+"")&&G(t,l),p&32&&r!==(r=c[5].Code+"")&&G(s,r),p&32&&a!==(a=c[5]["Issue Stage"]+"")&&G(u,a)},d(c){c&&(d(e),d(f),d(i))}}}function Al(o){let e,l=o[6]+"",t,n,r,s=o[5][o[6]]+"",f,i;return{c(){e=S("p"),t=y(l),n=y(`:
            `),r=S("b"),f=y(s),i=L()},m(a,u){g(a,e,u),$(e,t),$(e,n),$(e,r),$(r,f),$(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&G(f,s)},d(a){a&&d(e)}}}function C$(o){let e,l=ge(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Al(Dl(o,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();ie(e,"max-width","30vw"),ie(e,"max-height","60vh"),ie(e,"overflow","auto")},m(n,r){g(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&36){l=ge(n[2]);let s;for(s=0;s<l.length;s+=1){const f=Dl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Al(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&d(e),Ee(t,n)}}}function L$(o){let e,l,t,n;return e=new ae({props:{openOn:"hover",$$slots:{default:[T$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[C$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function I$(o){let e,l;const t=[q(pn),{paint:{"circle-color":Me(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[L$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ct({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?te(t,[s&0&&oe(q(pn)),s&8&&{paint:{"circle-color":Me(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function O$(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:pn,title:M$,$$slots:{controls:[S$],help:[y$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pt({props:{data:`${Xt()}/v1/problems.geojson.gz`,$$slots:{default:[I$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let pn="problems",M$="Issues & Conflicts";function j$(o,e,l){let t,n=$e(pn);Y(o,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,s,f]}class N$ extends V{constructor(e){super(),K(this,e,j$,O$,Q,{})}}function F$(o){let e,l;return{c(){e=S("img"),A(e,"slot","icon"),On(e.src,l=_o)||A(e,"src",l),A(e,"alt","A logo representing a train")},m(t,n){g(t,e,n)},p:J,d(t){t&&d(e)}}}function R$(o){let e;return{c(){e=y("railway station")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function P$(o){let e;return{c(){e=y(`National Rail
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function D$(o){let e,l,t,n,r,s,f,i,a,u,c,p,h;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[R$]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[P$]},$$scope:{ctx:o}}}),p=new tt({}),{c(){e=S("div"),l=S("p"),t=y("This shows "),w(n.$$.fragment),r=y(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),f=S("p"),i=y("Icon from "),w(a.$$.fragment),u=y(". (Note that not all stations shown are National Rail.)"),c=L(),w(p.$$.fragment),A(e,"slot","help")},m(k,C){g(k,e,C),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),b(a,f,null),$(f,u),$(e,c),b(p,e,null),h=!0},p(k,C){const T={};C&16&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const I={};C&16&&(I.$$scope={dirty:C,ctx:k}),a.$set(I)},i(k){h||(m(n.$$.fragment,k),m(a.$$.fragment,k),m(p.$$.fragment,k),h=!0)},o(k){_(n.$$.fragment,k),_(a.$$.fragment,k),_(p.$$.fragment,k),h=!1},d(k){k&&d(e),v(n),v(a),v(p)}}}function A$(o){let e,l=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&G(t,l)},d(n){n&&d(e)}}}function G$(o){let e,l;return e=new ae({props:{$$slots:{default:[A$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function q$(o){let e,l;const t=[q(on),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[G$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new jn({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(on)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function H$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:on,title:z$,$$slots:{help:[D$],icon:[F$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pt({props:{data:`${me()}/v1/${on}.geojson`,$$slots:{default:[q$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let on="railway_stations",z$="Railway stations";function U$(o,e,l){let t,n=$e(on);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class B$ extends V{constructor(e){super(),K(this,e,U$,H$,Q,{})}}function E$(o){let e,l,t;return l=new Te({props:{color:ne.sports_spaces}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","icon")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function W$(o){let e;return{c(){e=y("sports pitches")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Y$(o){let e;return{c(){e=y("sports centres")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function J$(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[W$]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Y$]},$$scope:{ctx:o}}}),a=new tt({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),w(n.$$.fragment),r=y(" and "),w(s.$$.fragment),f=y(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),w(a.$$.fragment),A(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),b(n,l,null),$(l,r),b(s,l,null),$(l,f),$(e,i),b(a,e,null),u=!0},p(c,p){const h={};p&16&&(h.$$scope={dirty:p,ctx:c}),n.$set(h);const k={};p&16&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(s),v(a)}}}function Q$(o){let e,l=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&G(t,l)},d(n){n&&d(e)}}}function V$(o){let e,l;return e=new ae({props:{$$slots:{default:[Q$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function K$(o){let e,l;const t=[q(Gt),{sourceLayer:Gt},{paint:{"fill-color":ne.sports_spaces,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[V$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Ne({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&oe(q(Gt)),s&0&&{sourceLayer:Gt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Z$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Gt,title:X$,$$slots:{help:[J$],icon:[E$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Gt}.pmtiles`,$$slots:{default:[K$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Gt="sports_spaces",X$="Sports spaces";function x$(o,e,l){let t,n=$e(Gt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class ep extends V{constructor(e){super(),K(this,e,x$,Z$,Q,{})}}function tp(o){let e;return{c(){e=y("DfT stats19")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function np(o){let e;return{c(){e=y("documented by DfT")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function lp(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,j,N,F,O,M,H,R;return n=new re({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[tp]},$$scope:{ctx:o}}}),j=new re({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[np]},$$scope:{ctx:o}}}),H=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("This layer shows collisions recorded in the "),w(n.$$.fragment),r=y(" dataset, as of 30 September 2024. Please note these limitations:"),s=L(),f=S("ul"),i=S("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=S("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),p=S("li"),p.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,h=L(),k=S("li"),k.textContent='The "pedestrians" category also include mobility scooters',C=L(),T=S("li"),I=y("All limitations "),w(j.$$.fragment),N=y(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),F=L(),O=S("p"),O.textContent="You can click a point to open the full report, thanks to CycleStreets.",M=L(),w(H.$$.fragment),A(e,"slot","help")},m(P,B){g(P,e,B),$(e,l),$(l,t),b(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),$(f,a),$(f,u),$(f,c),$(f,p),$(f,h),$(f,k),$(f,C),$(f,T),$(T,I),b(j,T,null),$(T,N),$(e,F),$(e,O),$(e,M),b(H,e,null),R=!0},p(P,B){const ue={};B&4194304&&(ue.$$scope={dirty:B,ctx:P}),n.$set(ue);const D={};B&4194304&&(D.$$scope={dirty:B,ctx:P}),j.$set(D)},i(P){R||(m(n.$$.fragment,P),m(j.$$.fragment,P),m(H.$$.fragment,P),R=!0)},o(P){_(n.$$.fragment,P),_(j.$$.fragment,P),_(H.$$.fragment,P),R=!1},d(P){P&&d(e),v(n),v(j),v(H)}}}function rp(o){let e;return{c(){e=y("Pedestrians")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function op(o){let e;return{c(){e=y("Cyclists")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function sp(o){let e;return{c(){e=y("Horse riders")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ip(o){let e;return{c(){e=y("Other")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ap(o){let e,l,t,n,r,s,f,i,a,u,c,p;function h(O){o[10](O)}let k={$$slots:{default:[rp]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(k.checked=o[0].pedestrians),e=new Be({props:k}),U.push(()=>E(e,"checked",h));function C(O){o[11](O)}let T={$$slots:{default:[op]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(T.checked=o[0].cyclists),n=new Be({props:T}),U.push(()=>E(n,"checked",C));function I(O){o[12](O)}let j={$$slots:{default:[sp]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(j.checked=o[0].horseRiders),f=new Be({props:j}),U.push(()=>E(f,"checked",I));function N(O){o[13](O)}let F={$$slots:{default:[ip]},$$scope:{ctx:o}};return o[0].other!==void 0&&(F.checked=o[0].other),u=new Be({props:F}),U.push(()=>E(u,"checked",N)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment)},m(O,M){b(e,O,M),g(O,t,M),b(n,O,M),g(O,s,M),b(f,O,M),g(O,a,M),b(u,O,M),p=!0},p(O,M){const H={};M&4194304&&(H.$$scope={dirty:M,ctx:O}),!l&&M&1&&(l=!0,H.checked=O[0].pedestrians,W(()=>l=!1)),e.$set(H);const R={};M&4194304&&(R.$$scope={dirty:M,ctx:O}),!r&&M&1&&(r=!0,R.checked=O[0].cyclists,W(()=>r=!1)),n.$set(R);const P={};M&4194304&&(P.$$scope={dirty:M,ctx:O}),!i&&M&1&&(i=!0,P.checked=O[0].horseRiders,W(()=>i=!1)),f.$set(P);const B={};M&4194304&&(B.$$scope={dirty:M,ctx:O}),!c&&M&1&&(c=!0,B.checked=O[0].other,W(()=>c=!1)),u.$set(B)},i(O){p||(m(e.$$.fragment,O),m(n.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),p=!0)},o(O){_(e.$$.fragment,O),_(n.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),p=!1},d(O){O&&(d(t),d(s),d(a)),v(e,O),v(n,O),v(f,O),v(u,O)}}}function fp(o){let e,l,t,n,r,s,f,i,a,u,c,p,h;return l=new Fe({props:{small:!0,$$slots:{default:[ap]},$$scope:{ctx:o}}}),u=new Yt({props:{rows:o[9]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),n=S("div"),r=y(`Filter years:
      `),s=S("input"),f=y(`
      -
      `),i=S("input"),a=L(),w(u.$$.fragment),A(s,"type","number"),A(s,"min",2017),A(s,"max",2023),A(s,"class","svelte-1ft65rw"),A(i,"type","number"),A(i,"min",2017),A(i,"max",2023),A(i,"class","svelte-1ft65rw"),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(k,C){g(k,e,C),b(l,e,null),$(e,t),$(e,n),$(n,r),$(n,s),ft(s,o[0].minYear),$(n,f),$(n,i),ft(i,o[0].maxYear),$(e,a),b(u,e,null),c=!0,p||(h=[Kt(s,"input",o[14]),Kt(i,"input",o[15])],p=!0)},p(k,C){const T={};C&4194305&&(T.$$scope={dirty:C,ctx:k}),l.$set(T),C&1&&cn(s.value)!==k[0].minYear&&ft(s,k[0].minYear),C&1&&cn(i.value)!==k[0].maxYear&&ft(i,k[0].maxYear)},i(k){c||(m(l.$$.fragment,k),m(u.$$.fragment,k),c=!0)},o(k){_(l.$$.fragment,k),_(u.$$.fragment,k),c=!1},d(k){k&&d(e),v(l),v(u),p=!1,Yr(h)}}}function Gl(o){let e,l,t,n=o[3][o[21].pedestrian_location]+"",r;return{c(){e=S("p"),l=y("Pedestrian location: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[3][s[21].pedestrian_location]+"")&&G(r,n)},d(s){s&&d(e)}}}function ql(o){let e,l,t,n=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=S("p"),l=y("Pedestrian movement: "),t=S("b"),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[4][s[21].pedestrian_movement]+"")&&G(r,n)},d(s){s&&d(e)}}}function up(o){let e,l,t,n=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,p,h,k,C,T=Hl(o[21])+"",I,j,N,F,O,M=o[21].pedestrian_location&&Gl(o),H=o[21].pedestrian_movement&&ql(o);return{c(){e=S("p"),l=y("Year: "),t=S("b"),r=y(n),s=L(),f=S("p"),i=y("Severity: "),a=S("b"),c=y(u),p=L(),h=S("p"),k=y("Casualties: "),C=S("b"),I=y(T),j=L(),M&&M.c(),N=L(),H&&H.c(),F=L(),O=S("p"),O.textContent="Click to open full report in CycleStreets"},m(R,P){g(R,e,P),$(e,l),$(e,t),$(t,r),g(R,s,P),g(R,f,P),$(f,i),$(f,a),$(a,c),g(R,p,P),g(R,h,P),$(h,k),$(h,C),$(C,I),g(R,j,P),M&&M.m(R,P),g(R,N,P),H&&H.m(R,P),g(R,F,P),g(R,O,P)},p(R,P){P&2097152&&n!==(n=R[21].year+"")&&G(r,n),P&2097152&&u!==(u=R[5][R[21].severity]+"")&&G(c,u),P&2097152&&T!==(T=Hl(R[21])+"")&&G(I,T),R[21].pedestrian_location?M?M.p(R,P):(M=Gl(R),M.c(),M.m(N.parentNode,N)):M&&(M.d(1),M=null),R[21].pedestrian_movement?H?H.p(R,P):(H=ql(R),H.c(),H.m(F.parentNode,F)):H&&(H.d(1),H=null)},d(R){R&&(d(e),d(s),d(f),d(p),d(h),d(j),d(N),d(F),d(O)),M&&M.d(R),H&&H.d(R)}}}function cp(o){let e,l;return e=new ae({props:{$$slots:{default:[up,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function $p(o){let e,l;const t=[q(qt),{sourceLayer:qt},{paint:{"circle-color":be(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[cp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ct({props:n}),e.$on("click",gp),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&451?te(t,[s&0&&oe(q(qt)),s&0&&{sourceLayer:qt},s&448&&{paint:{"circle-color":be(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function pp(o){let e,l,t,n,r;function s(i){o[16](i)}let f={name:qt,title:mp,$$slots:{controls:[fp],help:[lp]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${qt}.pmtiles`,$$slots:{default:[$p]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,W(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let qt="stats19",mp="Stats19";function _p(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Hl(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function gp(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function dp(o,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(R){return R.show?`${r.filter(B=>R[B]).join(",")}/${R.minYear}/${R.maxYear}`:null}let i=Jt(qt,s,f,_p);Y(o,i,R=>l(0,n=R));function a(R,P,B,ue,D,x){let Z=["any"];return n.pedestrians&&Z.push(["get","pedestrian"]),n.cyclists&&Z.push(["get","cyclist"]),n.horseRiders&&Z.push(["get","horse_rider"]),n.other&&Z.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],Z]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},p={1:"Fatal",2:"Serious",3:"Slight"},h=ne.sequential_low_to_high[4],k=ne.sequential_low_to_high[2],C=ne.sequential_low_to_high[0],T=[["Fatal",h],["Serious",k],["Slight",C]];function I(R){o.$$.not_equal(n.pedestrians,R)&&(n.pedestrians=R,i.set(n))}function j(R){o.$$.not_equal(n.cyclists,R)&&(n.cyclists=R,i.set(n))}function N(R){o.$$.not_equal(n.horseRiders,R)&&(n.horseRiders=R,i.set(n))}function F(R){o.$$.not_equal(n.other,R)&&(n.other=R,i.set(n))}function O(){n.minYear=cn(this.value),i.set(n)}function M(){n.maxYear=cn(this.value),i.set(n)}function H(R){o.$$.not_equal(n.show,R)&&(n.show=R,i.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,p,h,k,C,T,I,j,N,F,O,M,H]}class hp extends V{constructor(e){super(),K(this,e,dp,pp,Q,{})}}function zl(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Ul(o){let e,l,t=o[1]+"",n,r,s,f=o[2]+"",i,a;return{c(){e=S("tr"),l=S("td"),n=y(t),r=L(),s=S("td"),i=y(f),a=L()},m(u,c){g(u,e,c),$(e,l),$(l,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&1&&t!==(t=u[1]+"")&&G(n,t),c&1&&f!==(f=u[2]+"")&&G(i,f)},d(u){u&&d(e)}}}function wp(o){let e,l,t,n,r=ge(Object.entries(o[0])),s=[];for(let f=0;f<r.length;f+=1)s[f]=Ul(zl(o,r,f));return{c(){e=S("table"),l=S("thead"),l.innerHTML="<tr><th>Key</th> <th>Value</th></tr>",t=L(),n=S("tbody");for(let f=0;f<s.length;f+=1)s[f].c()},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,n);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,null)},p(f,i){if(i&1){r=ge(Object.entries(f[0]));let a;for(a=0;a<r.length;a+=1){const u=zl(f,r,a);s[a]?s[a].p(u,i):(s[a]=Ul(u),s[a].c(),s[a].m(n,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(f){f&&d(e),Ee(s,f)}}}function bp(o){let e,l;return e=new ae({props:{openOn:"click",$$slots:{default:[wp,({props:t})=>({0:t}),({props:t})=>t?1:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&33&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}class Fn extends V{constructor(e){super(),K(this,e,null,bp,Q,{})}}function vp(o){let e;return{c(){e=S("span"),e.innerHTML="<p>This is your own GeoJSON file.</p>",A(e,"slot","help")},m(l,t){g(l,e,t)},p:J,d(l){l&&d(e)}}}function kp(o){let e,l,t,n,r,s,f,i=o[0].features.length.toLocaleString()+"",a,u,c;return l=new Ar({props:{label:"Load your own GeoJSON file",onLoad:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),n=S("p"),n.innerHTML="<i>Note this file doesn&#39;t leave your computer; it&#39;s not uploaded anywhere</i>",r=L(),s=S("p"),f=y("Currently showing "),a=y(i),u=y(" features"),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(p,h){g(p,e,h),b(l,e,null),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),$(s,a),$(s,u),c=!0},p(p,h){(!c||h&1)&&i!==(i=p[0].features.length.toLocaleString()+"")&&G(a,i)},i(p){c||(m(l.$$.fragment,p),c=!0)},o(p){_(l.$$.fragment,p),c=!1},d(p){p&&d(e),v(l)}}}function yp(o){let e,l;return e=new Fn({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Sp(o){let e,l;return e=new Fn({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Tp(o){let e,l;return e=new Fn({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Cp(o){let e,l,t,n,r,s,f,i;const a=[q("user_data_polygons"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Polygon"]},{paint:{"fill-color":"blue","fill-opacity":ee(.5,1)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let u={$$slots:{default:[yp]},$$scope:{ctx:o}};for(let I=0;I<a.length;I+=1)u=X(u,a[I]);e=new Ne({props:u});const c=[q("user_data_polygons-outline"),{paint:{"line-color":"black","line-width":2.5}},{layout:{visibility:o[1]?"visible":"none"}}];let p={};for(let I=0;I<c.length;I+=1)p=X(p,c[I]);t=new _e({props:p});const h=[q("user_data_lines"),{manageHoverState:!0},{filter:["==",["geometry-type"],"LineString"]},{paint:{"line-color":"green","line-width":ee(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let k={$$slots:{default:[Sp]},$$scope:{ctx:o}};for(let I=0;I<h.length;I+=1)k=X(k,h[I]);r=new _e({props:k});const C=[q("user_data_points"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Point"]},{paint:{"circle-color":"red","circle-radius":ee(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let T={$$slots:{default:[Tp]},$$scope:{ctx:o}};for(let I=0;I<C.length;I+=1)T=X(T,C[I]);return f=new ct({props:T}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(I,j){b(e,I,j),g(I,l,j),b(t,I,j),g(I,n,j),b(r,I,j),g(I,s,j),b(f,I,j),i=!0},p(I,j){const N=j&2?te(a,[a[0],a[1],a[2],a[3],{layout:{visibility:I[1]?"visible":"none"}},a[5],a[6]]):{};j&32&&(N.$$scope={dirty:j,ctx:I}),e.$set(N);const F=j&2?te(c,[c[0],c[1],{layout:{visibility:I[1]?"visible":"none"}}]):{};t.$set(F);const O=j&2?te(h,[h[0],h[1],h[2],h[3],{layout:{visibility:I[1]?"visible":"none"}},h[5],h[6]]):{};j&32&&(O.$$scope={dirty:j,ctx:I}),r.$set(O);const M=j&2?te(C,[C[0],C[1],C[2],C[3],{layout:{visibility:I[1]?"visible":"none"}},C[5],C[6]]):{};j&32&&(M.$$scope={dirty:j,ctx:I}),f.$set(M)},i(I){i||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(r.$$.fragment,I),m(f.$$.fragment,I),i=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(r.$$.fragment,I),_(f.$$.fragment,I),i=!1},d(I){I&&(d(l),d(n),d(s)),v(e,I),v(t,I),v(r,I),v(f,I)}}}function Lp(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Hr,title:Ip,$$slots:{controls:[kp],help:[vp]},$$scope:{ctx:o}};return o[1]!==void 0&&(f.show=o[1]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pt({props:{data:o[0],generateId:!0,$$slots:{default:[Cp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&33&&(u.$$scope={dirty:a,ctx:i}),!l&&a&2&&(l=!0,u.show=i[1],W(()=>l=!1)),e.$set(u);const c={};a&1&&(c.data=i[0]),a&34&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Hr="user_data",Ip="Your own GeoJSON file";function Op(o,e,l){let t,n=$e(Hr);Y(o,n,i=>l(1,t=i));let r={type:"FeatureCollection",features:[]};function s(i,a){try{l(0,r=JSON.parse(a))}catch(u){window.alert(`Couldn't load ${i} -- is it GeoJSON? ${u}`)}}function f(i){t=i,n.set(t)}return[r,t,n,s,f]}class Mp extends V{constructor(e){super(),K(this,e,Op,Lp,Q,{})}}function jp(o){let e;return{c(){e=y(`DfT road statistics
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Np(o){let e;return{c(){e=y("methodology")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Fp(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[jp]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Np]},$$scope:{ctx:o}}}),c=new Oe({}),{c(){e=S("span"),l=S("p"),t=y("AADF (annual average daily flow) data from "),w(n.$$.fragment),r=y(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),w(s.$$.fragment),f=y(" for details and caveats about the measurements."),i=L(),a=S("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),w(c.$$.fragment),A(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(l,t),b(n,l,null),$(l,r),b(s,l,null),$(l,f),$(e,i),$(e,a),$(e,u),b(c,e,null),p=!0},p(h,k){const C={};k&128&&(C.$$scope={dirty:k,ctx:h}),n.$set(C);const T={};k&128&&(T.$$scope={dirty:k,ctx:h}),s.$set(T)},i(h){p||(m(n.$$.fragment,h),m(s.$$.fragment,h),m(c.$$.fragment,h),p=!0)},o(h){_(n.$$.fragment,h),_(s.$$.fragment,h),_(c.$$.fragment,h),p=!1},d(h){h&&d(e),v(n),v(s),v(c)}}}function Rp(o){let e,l,t;return l=new Je({props:{colorScale:o[1],limits:o[3]}}),{c(){e=S("span"),w(l.$$.fragment),A(e,"slot","controls")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p:J,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Pp(o){let e,l=o[6].location+"",t,n,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",p,h,k,C,T=o[6].year+"",I,j,N,F=o[6].pedal_cycles.toLocaleString()+"",O,M,H,R,P,B=o[6].method+"",ue;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),s=y("Total motor vehicles ("),i=y(f),a=y(` AADF):
        `),u=S("b"),p=y(c),h=L(),k=S("p"),C=y("Total pedal cycles ("),I=y(T),j=y(` AADF):
        `),N=S("b"),O=y(F),M=L(),H=S("p"),R=y("Count method: "),P=S("b"),ue=y(B)},m(D,x){g(D,e,x),$(e,t),g(D,n,x),g(D,r,x),$(r,s),$(r,i),$(r,a),$(r,u),$(u,p),g(D,h,x),g(D,k,x),$(k,C),$(k,I),$(k,j),$(k,N),$(N,O),g(D,M,x),g(D,H,x),$(H,R),$(H,P),$(P,ue)},p(D,x){x&64&&l!==(l=D[6].location+"")&&G(t,l),x&64&&f!==(f=D[6].year+"")&&G(i,f),x&64&&c!==(c=D[6].motor_vehicles.toLocaleString()+"")&&G(p,c),x&64&&T!==(T=D[6].year+"")&&G(I,T),x&64&&F!==(F=D[6].pedal_cycles.toLocaleString()+"")&&G(O,F),x&64&&B!==(B=D[6].method+"")&&G(ue,B)},d(D){D&&(d(e),d(n),d(r),d(h),d(k),d(M),d(H))}}}function Dp(o){let e,l;return e=new ae({props:{$$slots:{default:[Pp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ap(o){let e,l;const t=[q(Ht),{sourceLayer:Ht},{paint:{"circle-color":be(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Dp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new ct({props:n}),e.$on("click",Hp),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&oe(q(Ht)),s&0&&{sourceLayer:Ht},s&6&&{paint:{"circle-color":be(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Gp(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ht,title:qp,$$slots:{controls:[Rp],help:[Fp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),U.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${me()}/v1/${Ht}.pmtiles`,$$slots:{default:[Ap]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],W(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ht="vehicle_counts",qp="Vehicle counts";function Hp(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function zp(o,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=$e(Ht);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class Up extends V{constructor(e){super(),K(this,e,zp,Gp,Q,{})}}function Bp(o){return Me(["get","intervention_type"],{area:lt.area,route:lt.route,crossing:lt.crossing,other:lt.other},"white")}function Ep(o){return[["Areas",lt.area],["Routes",lt.route],["Crossings",lt.crossing],["Other",lt.other]]}let Zt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},In={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function Wp(o,e,l,t){var f,i,a;let n={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},r={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},s={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};for(let[u,c]of Object.entries(o.schemes))((f=c.browse)==null?void 0:f.sketch_source)==="LCWIP mapping"?r.schemes[u]=c:((i=c.browse)==null?void 0:i.sketch_source)==="ATF assessment"?n.schemes[u]=c:((a=c.browse)==null?void 0:a.sketch_source)==="Final inspection sketches"&&(s.schemes[u]=c);for(let u of o.features){if(!Yp(u))continue;let c=u.properties.scheme_reference,p={},h={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};u.properties.sketch_source==="ATF assessment"&&Object.hasOwn(n.schemes,c)?(p=n.schemes[c],h=n):u.properties.sketch_source==="LCWIP mapping"&&Object.hasOwn(r.schemes,c)?(p=r.schemes[c],h=r):u.properties.sketch_source==="Final inspection sketches"&&Object.hasOwn(s.schemes,c)&&(p=s.schemes[c],h=s),p.browse&&(u.properties.funding_programme=p.browse.funding_programme,u.properties.current_milestone=p.browse.current_milestone),u.id=h.features.length+1,h.features.push(u)}e.set(n),l.set(r),t.set(s)}function Yp(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}function Jp(){let o={type:"FeatureCollection",features:[],schemes:{},notes:["These schemes are everything you've drawn in this browser using Scheme Sketcher. The data source and accuracy depend on whatever files you imported, created, or edited yourself."]};for(let l=0;l<window.localStorage.length;l++){let t=window.localStorage.key(l),n=t.split("/");if(!(n.length!=3||n[0]!="sketch"))try{let r=JSON.parse(window.localStorage.getItem(t));if(r.features.length==0)continue;for(let s of Object.values(r.schemes))s.browse={authority_or_region:n[1],local_filename:n[2]};o.schemes={...o.schemes,...r.schemes},o.features=[...o.features,...r.features]}catch{}}let e=1;for(let l of o.features)l.id=e++;return o}function Bl(o,e,l){const t=o.slice();return t[30]=e[l][0],t[31]=e[l][1],t[32]=e,t[33]=l,t}function El(o,e,l){const t=o.slice();return t[34]=e[l],t[35]=e,t[36]=l,t}function Qp(o){let e;return{c(){e=y("Filters")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Vp(o){let e;return{c(){e=y("Reset all filters")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Kp(o){let e,l,t,n,r,s,f,i;e=new un({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[xp]},$$scope:{ctx:o}}});function a(h){o[25](h)}let u={label:"Scheme name or reference",options:mn(o[0])};o[1]!==void 0&&(u.value=o[1]),t=new Gr({props:u}),U.push(()=>E(t,"value",a));function c(h){o[26](h)}let p={label:"Authority or region",choices:o[11],emptyOption:!0};return o[4]!==void 0&&(p.value=o[4]),s=new ln({props:p}),U.push(()=>E(s,"value",c)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),r=L(),w(s.$$.fragment)},m(h,k){b(e,h,k),g(h,l,k),b(t,h,k),g(h,r,k),b(s,h,k),i=!0},p(h,k){const C={};k[0]&4|k[1]&64&&(C.$$scope={dirty:k,ctx:h}),e.$set(C);const T={};k[0]&1&&(T.options=mn(h[0])),!n&&k[0]&2&&(n=!0,T.value=h[1],W(()=>n=!1)),t.$set(T);const I={};k[0]&2048&&(I.choices=h[11]),!f&&k[0]&16&&(f=!0,I.value=h[4],W(()=>f=!1)),s.$set(I)},i(h){i||(m(e.$$.fragment,h),m(t.$$.fragment,h),m(s.$$.fragment,h),i=!0)},o(h){_(e.$$.fragment,h),_(t.$$.fragment,h),_(s.$$.fragment,h),i=!1},d(h){h&&(d(l),d(r)),v(e,h),v(t,h),v(s,h)}}}function Zp(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,j;t=new un({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[tm]},$$scope:{ctx:o}}});function N(P){o[18](P)}let F={label:"Scheme name or reference",options:mn(o[0])};o[1]!==void 0&&(F.value=o[1]),r=new Gr({props:F}),U.push(()=>E(r,"value",N));function O(P){o[19](P)}let M={label:"Authority or region",choices:o[11],emptyOption:!0};o[4]!==void 0&&(M.value=o[4]),i=new ln({props:M}),U.push(()=>E(i,"value",O));function H(P){o[20](P)}let R={label:"Current milestone",choices:o[12],emptyOption:!0};return o[6]!==void 0&&(R.value=o[6]),c=new ln({props:R}),U.push(()=>E(c,"value",H)),C=new un({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[rm]},$$scope:{ctx:o}}}),I=new un({props:{label:"Intervention types",id:"filterInterventionTypes",$$slots:{default:[im]},$$scope:{ctx:o}}}),{c(){e=S("div"),l=S("div"),w(t.$$.fragment),n=L(),w(r.$$.fragment),f=L(),w(i.$$.fragment),u=L(),w(c.$$.fragment),h=L(),k=S("div"),w(C.$$.fragment),T=L(),w(I.$$.fragment),A(l,"class","govuk-grid-column-one-half"),A(k,"class","govuk-grid-column-one-half"),A(e,"class","govuk-grid-row")},m(P,B){g(P,e,B),$(e,l),b(t,l,null),$(l,n),b(r,l,null),$(l,f),b(i,l,null),$(l,u),b(c,l,null),$(e,h),$(e,k),b(C,k,null),$(k,T),b(I,k,null),j=!0},p(P,B){const ue={};B[0]&4|B[1]&64&&(ue.$$scope={dirty:B,ctx:P}),t.$set(ue);const D={};B[0]&1&&(D.options=mn(P[0])),!s&&B[0]&2&&(s=!0,D.value=P[1],W(()=>s=!1)),r.$set(D);const x={};B[0]&2048&&(x.choices=P[11]),!a&&B[0]&16&&(a=!0,x.value=P[4],W(()=>a=!1)),i.$set(x);const Z={};!p&&B[0]&64&&(p=!0,Z.value=P[6],W(()=>p=!1)),c.$set(Z);const ce={};B[0]&32|B[1]&64&&(ce.$$scope={dirty:B,ctx:P}),C.$set(ce);const he={};B[0]&128|B[1]&64&&(he.$$scope={dirty:B,ctx:P}),I.$set(he)},i(P){j||(m(t.$$.fragment,P),m(r.$$.fragment,P),m(i.$$.fragment,P),m(c.$$.fragment,P),m(C.$$.fragment,P),m(I.$$.fragment,P),j=!0)},o(P){_(t.$$.fragment,P),_(r.$$.fragment,P),_(i.$$.fragment,P),_(c.$$.fragment,P),_(C.$$.fragment,P),_(I.$$.fragment,P),j=!1},d(P){P&&d(e),v(t),v(r),v(i),v(c),v(C),v(I)}}}function Xp(o){let e;return{c(){e=y("Clear")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function xp(o){let e,l,t,n,r,s;return t=new We({props:{$$slots:{default:[Xp]},$$scope:{ctx:o}}}),t.$on("click",o[24]),{c(){e=S("input"),l=L(),w(t.$$.fragment),A(e,"type","text"),A(e,"class","govuk-input govuk-input--width-10"),A(e,"id","filterInterventionText")},m(f,i){g(f,e,i),ft(e,o[2]),g(f,l,i),b(t,f,i),n=!0,r||(s=Kt(e,"input",o[23]),r=!0)},p(f,i){i[0]&4&&e.value!==f[2]&&ft(e,f[2]);const a={};i[1]&64&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(d(e),d(l)),v(t,f),r=!1,s()}}}function em(o){let e;return{c(){e=y("Clear")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function tm(o){let e,l,t,n,r,s;return t=new We({props:{$$slots:{default:[em]},$$scope:{ctx:o}}}),t.$on("click",o[17]),{c(){e=S("input"),l=L(),w(t.$$.fragment),A(e,"type","text"),A(e,"class","govuk-input govuk-input--width-10"),A(e,"id","filterInterventionText")},m(f,i){g(f,e,i),ft(e,o[2]),g(f,l,i),b(t,f,i),n=!0,r||(s=Kt(e,"input",o[16]),r=!0)},p(f,i){i[0]&4&&e.value!==f[2]&&ft(e,f[2]);const a={};i[1]&64&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(d(e),d(l)),v(t,f),r=!1,s()}}}function nm(o){let e=o[34]+"",l,t;return{c(){l=y(e),t=L()},m(n,r){g(n,l,r),g(n,t,r)},p:J,d(n){n&&(d(l),d(t))}}}function Wl(o){let e,l,t;function n(s){o[21](s,o[34])}let r={$$slots:{default:[nm]},$$scope:{ctx:o}};return o[5][o[34]]!==void 0&&(r.checked=o[5][o[34]]),e=new Be({props:r}),U.push(()=>E(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f[1]&64&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&32&&(l=!0,i.checked=o[5][o[34]],W(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function lm(o){let e,l,t=ge(Object.keys(Zt)),n=[];for(let s=0;s<t.length;s+=1)n[s]=Wl(El(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f[0]&32){t=ge(Object.keys(Zt));let i;for(i=0;i<t.length;i+=1){const a=El(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Wl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(ke(),i=t.length;i<n.length;i+=1)r(i);ye()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),Ee(n,s)}}}function rm(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[lm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function om(o){let e=o[31]+"",l,t;return{c(){l=y(e),t=L()},m(n,r){g(n,l,r),g(n,t,r)},p:J,d(n){n&&(d(l),d(t))}}}function Yl(o){let e,l,t;function n(s){o[22](s,o[30])}let r={$$slots:{default:[om]},$$scope:{ctx:o}};return o[7][o[30]]!==void 0&&(r.checked=o[7][o[30]]),e=new Be({props:r}),U.push(()=>E(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f[1]&64&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&8320&&(l=!0,i.checked=o[7][o[30]],W(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function sm(o){let e,l,t=ge(o[13]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Yl(Bl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=de()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f[0]&8320){t=ge(s[13]);let i;for(i=0;i<t.length;i+=1){const a=Bl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Yl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(ke(),i=t.length;i<n.length;i+=1)r(i);ye()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),Ee(n,s)}}}function im(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[sm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n[0]&128|n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function am(o){let e;return{c(){e=y("Done")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function fm(o){let e,l,t,n,r=o[10].interventions.toLocaleString()+"",s,f,i,a,u=o[9].size.toLocaleString()+"",c,p,h,k,C,T=Jl(o[10].totalLength).toFixed(1)+"",I,j,N,F,O,M,H,R,P,B;F=new We({props:{$$slots:{default:[Vp]},$$scope:{ctx:o}}}),F.$on("click",o[14]);const ue=[Zp,Kp],D=[];function x(Z,ce){return Z[3]=="ATF"?0:1}return M=x(o),H=D[M]=ue[M](o),P=new Co({props:{$$slots:{default:[am]},$$scope:{ctx:o}}}),P.$on("click",o[27]),{c(){e=S("p"),e.textContent="Showing:",l=L(),t=S("ul"),n=S("li"),s=y(r),f=y(" interventions"),i=L(),a=S("li"),c=y(u),p=y(" schemes"),h=L(),k=S("li"),C=y("total route length of "),I=y(T),j=y(" miles"),N=L(),w(F.$$.fragment),O=L(),H.c(),R=L(),w(P.$$.fragment)},m(Z,ce){g(Z,e,ce),g(Z,l,ce),g(Z,t,ce),$(t,n),$(n,s),$(n,f),$(t,i),$(t,a),$(a,c),$(a,p),$(t,h),$(t,k),$(k,C),$(k,I),$(k,j),g(Z,N,ce),b(F,Z,ce),g(Z,O,ce),D[M].m(Z,ce),g(Z,R,ce),b(P,Z,ce),B=!0},p(Z,ce){(!B||ce[0]&1024)&&r!==(r=Z[10].interventions.toLocaleString()+"")&&G(s,r),(!B||ce[0]&512)&&u!==(u=Z[9].size.toLocaleString()+"")&&G(c,u),(!B||ce[0]&1024)&&T!==(T=Jl(Z[10].totalLength).toFixed(1)+"")&&G(I,T);const he={};ce[1]&64&&(he.$$scope={dirty:ce,ctx:Z}),F.$set(he);let le=M;M=x(Z),M===le?D[M].p(Z,ce):(ke(),_(D[le],1,1,()=>{D[le]=null}),ye(),H=D[M],H?H.p(Z,ce):(H=D[M]=ue[M](Z),H.c()),m(H,1),H.m(R.parentNode,R));const Se={};ce[1]&64&&(Se.$$scope={dirty:ce,ctx:Z}),P.$set(Se)},i(Z){B||(m(F.$$.fragment,Z),m(H),m(P.$$.fragment,Z),B=!0)},o(Z){_(F.$$.fragment,Z),_(H),_(P.$$.fragment,Z),B=!1},d(Z){Z&&(d(e),d(l),d(t),d(N),d(O),d(R)),v(F,Z),D[M].d(Z),v(P,Z)}}}function um(o){let e,l,t,n,r;e=new We({props:{$$slots:{default:[Qp]},$$scope:{ctx:o}}}),e.$on("click",o[15]);function s(i){o[28](i)}let f={title:`Filter ${o[3]} schemes`,$$slots:{default:[fm]},$$scope:{ctx:o}};return o[8]!==void 0&&(f.open=o[8]),t=new xr({props:f}),U.push(()=>E(t,"open",s)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(i,a){b(e,i,a),g(i,l,a),b(t,i,a),r=!0},p(i,a){const u={};a[1]&64&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a[0]&8&&(c.title=`Filter ${i[3]} schemes`),a[0]&4095|a[1]&64&&(c.$$scope={dirty:a,ctx:i}),!n&&a[0]&256&&(n=!0,c.open=i[8],W(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),r=!1},d(i){i&&d(l),v(e,i),v(t,i)}}}function cm(o){var t;let e=new Set;for(let n of Object.values(o.schemes))(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Jl(o){return o*621371e-9}function mn(o){let e=[];for(let l of Object.values(o.schemes))e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function $m(o,e,l){let t,{source:n}=e,{schemesGj:r}=e,{filterSchemeText:s}=e,{filterInterventionText:f}=e,i=!1,a=new Set,u={interventions:0,totalLength:0},c=Object.keys(In).map(le=>[le,le]),p="",h=Object.fromEntries(Object.keys(Zt).map(le=>[le,!0])),k="",C=[["route","Routes"],["area","Areas"],["crossing","Crossings"],["other","Other"]],T=Object.fromEntries(C.map(([le,Se])=>[le,!0]));function I(le,Se,nt,mt,ze,st){let Ye=le.toLowerCase(),it=Se.toLowerCase(),_t=z=>{var je,xt,Qe,Ue;if(Ye&&!((je=z.properties.name)!=null&&je.toLowerCase().includes(Ye))&&!((xt=z.properties.description)!=null&&xt.toLowerCase().includes(Ye)))return!1;let ve=r.schemes[z.properties.scheme_reference];return!(nt&&((Qe=ve.browse)==null?void 0:Qe.authority_or_region)!=nt||n=="ATF"&&ve.browse.funding_programme&&!mt[ve.browse.funding_programme]||ze&&((Ue=ve.browse)==null?void 0:Ue.current_milestone)!=ze||it&&!ve.scheme_reference.toLowerCase().includes(it)&&!(ve.scheme_name??"").toLowerCase().includes(it))};l(9,a=new Set(r.features.filter(_t).map(z=>z.properties.scheme_reference))),l(10,u={interventions:0,totalLength:0});let gt=z=>{var ve,je;return!(!a.has(z.properties.scheme_reference)||Ye&&!((ve=z.properties.name)!=null&&ve.toLowerCase().includes(Ye))&&!((je=z.properties.description)!=null&&je.toLowerCase().includes(Ye))||n=="ATF"&&!st[z.properties.intervention_type])};for(let z of r.features)gt(z)?(delete z.properties.hide_while_editing,l(10,u.interventions++,u),z.geometry.type=="LineString"&&z.properties.length_meters&&l(10,u.totalLength+=z.properties.length_meters,u)):z.properties.hide_while_editing=!0;l(0,r),l(10,u)}function j(){l(4,p=""),l(5,h=Object.fromEntries(Object.keys(Zt).map(le=>[le,!0]))),l(6,k=""),l(2,f=""),l(1,s="")}const N=()=>l(8,i=!0);function F(){f=this.value,l(2,f)}const O=()=>l(2,f="");function M(le){s=le,l(1,s)}function H(le){p=le,l(4,p)}function R(le){k=le,l(6,k)}function P(le,Se){o.$$.not_equal(h[Se],le)&&(h[Se]=le,l(5,h))}function B(le,Se){o.$$.not_equal(T[Se],le)&&(T[Se]=le,l(7,T))}function ue(){f=this.value,l(2,f)}const D=()=>l(2,f="");function x(le){s=le,l(1,s)}function Z(le){p=le,l(4,p)}const ce=()=>l(8,i=!1);function he(le){i=le,l(8,i)}return o.$$set=le=>{"source"in le&&l(3,n=le.source),"schemesGj"in le&&l(0,r=le.schemesGj),"filterSchemeText"in le&&l(1,s=le.filterSchemeText),"filterInterventionText"in le&&l(2,f=le.filterInterventionText)},o.$$.update=()=>{o.$$.dirty[0]&1&&l(11,t=cm(r)),o.$$.dirty[0]&246&&I(f,s,p,h,k,T)},[r,s,f,n,p,h,k,T,i,a,u,t,c,C,j,N,F,O,M,H,R,P,B,ue,D,x,Z,ce,he]}class zr extends V{constructor(e){super(),K(this,e,$m,um,Q,{source:3,schemesGj:0,filterSchemeText:1,filterInterventionText:2},null,[-1,-1])}}function Ql(o){let e,l,t,n=o[0].budget.toLocaleString()+"",r,s;return{c(){e=S("p"),l=S("b"),l.textContent="Cost",t=y(`
    : `),r=y(n),s=y(`
    GBP`)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r),$(e,s)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&G(r,n)},d(f){f&&d(e)}}}function Vl(o){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Kl(o){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Zl(o){let e,l,t,n;return{c(){e=S("p"),l=S("b"),l.textContent="Funding sources",t=y(`
    : `),n=y(o[1])},m(r,s){g(r,e,s),$(e,l),$(e,t),$(e,n)},p(r,s){s&2&&G(n,r[1])},d(r){r&&d(e)}}}function pm(o){let e,l,t,n,r=o[0].budget&&Ql(o),s=o[0].development_funded&&Vl(),f=o[0].construction_funded&&Kl(),i=o[1]&&Zl(o);return{c(){r&&r.c(),e=L(),s&&s.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=de()},m(a,u){r&&r.m(a,u),g(a,e,u),s&&s.m(a,u),g(a,l,u),f&&f.m(a,u),g(a,t,u),i&&i.m(a,u),g(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=Ql(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=Vl(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=Kl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=Zl(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:J,o:J,d(a){a&&(d(e),d(l),d(t),d(n)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function mm(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function _m(o,e,l){let t,{props:n}=e;return o.$$set=r=>{"props"in r&&l(0,n=r.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=mm(n))},[n,t]}class Ur extends V{constructor(e){super(),K(this,e,_m,pm,Q,{props:0})}}function Xl(o){let e,l,t,n=o[0].status+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Status",t=y(`
    : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].status+"")&&G(r,n)},d(s){s&&d(e)}}}function xl(o){let e,l,t,n=o[0].timescale+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Timescale",t=y(`
    : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale+"")&&G(r,n)},d(s){s&&d(e)}}}function er(o){let e,l,t,n=o[0].timescale_year+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Estimated completion year",t=y(`
    : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale_year+"")&&G(r,n)},d(s){s&&d(e)}}}function tr(o){let e,l,t,n=o[0].year_published+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently published",t=y(`
    : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_published+"")&&G(r,n)},d(s){s&&d(e)}}}function nr(o){let e,l,t,n=o[0].year_consulted+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently consulted on",t=y(`
    : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_consulted+"")&&G(r,n)},d(s){s&&d(e)}}}function gm(o){let e,l,t,n,r,s=o[0].status&&Xl(o),f=o[0].timescale&&xl(o),i=o[0].timescale_year&&er(o),a=o[0].year_published&&tr(o),u=o[0].year_consulted&&nr(o);return{c(){s&&s.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=de()},m(c,p){s&&s.m(c,p),g(c,e,p),f&&f.m(c,p),g(c,l,p),i&&i.m(c,p),g(c,t,p),a&&a.m(c,p),g(c,n,p),u&&u.m(c,p),g(c,r,p)},p(c,[p]){c[0].status?s?s.p(c,p):(s=Xl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,p):(f=xl(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,p):(i=er(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,p):(a=tr(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,p):(u=nr(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:J,o:J,d(c){c&&(d(e),d(l),d(t),d(n),d(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function dm(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Br extends V{constructor(e){super(),K(this,e,dm,gm,Q,{props:0})}}function gn(o){const e=o.slice(),l=e[5].pipeline;return e[11]=l,e}function dn(o){const e=o.slice(),l=JSON.parse(e[1].v2);return e[11]=l,e}function hn(o){const e=o.slice(),l=JSON.parse(e[1].pipeline);return e[11]=l,e}function lr(o){let e,l,t,n=Jn(o[1].length_meters)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Length",t=y(`
        : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=Jn(s[1].length_meters)+"")&&G(r,n)},d(s){s&&d(e)}}}function rr(o){let e,l=at(o[1].description,o[3])+"";return{c(){e=S("p")},m(t,n){g(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=at(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&d(e)}}}function or(o){let e,l,t,n,r,s,f,i=o[11].atf4_type&&sr(o),a=o[11].accuracy&&ir(o),u=o[11].is_alternative&&ar();return n=new Ur({props:{props:o[11]}}),s=new Br({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,p){i&&i.m(c,p),g(c,e,p),a&&a.m(c,p),g(c,l,p),u&&u.m(c,p),g(c,t,p),b(n,c,p),g(c,r,p),b(s,c,p),f=!0},p(c,p){c[11].atf4_type?i?i.p(c,p):(i=sr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].accuracy?a?a.p(c,p):(a=ir(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].is_alternative?u||(u=ar(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const h={};p&2&&(h.props=c[11]),n.$set(h);const k={};p&2&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(d(e),d(l),d(t),d(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function sr(o){let e,l,t,n=o[11].atf4_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 type",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].atf4_type+"")&&G(r,n)},d(s){s&&d(e)}}}function ir(o){let e,l,t,n=o[11].accuracy+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Accuracy",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].accuracy+"")&&G(r,n)},d(s){s&&d(e)}}}function ar(o){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function fr(o){let e,l,t,n=o[11].intervention_type&&ur(o),r=o[11].work_type&&cr(o),s=o[11].intended_uses&&$r(o);return{c(){n&&n.c(),e=L(),r&&r.c(),l=L(),s&&s.c(),t=de()},m(f,i){n&&n.m(f,i),g(f,e,i),r&&r.m(f,i),g(f,l,i),s&&s.m(f,i),g(f,t,i)},p(f,i){f[11].intervention_type?n?n.p(f,i):(n=ur(f),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),f[11].work_type?r?r.p(f,i):(r=cr(f),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null),f[11].intended_uses?s?s.p(f,i):(s=$r(f),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(f){f&&(d(e),d(l),d(t)),n&&n.d(f),r&&r.d(f),s&&s.d(f)}}}function ur(o){let e,l,t,n=o[11].intervention_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Type",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].intervention_type+"")&&G(r,n)},d(s){s&&d(e)}}}function cr(o){let e,l,t,n=o[11].work_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="What kind of infrastructure is mapped",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].work_type+"")&&G(r,n)},d(s){s&&d(e)}}}function $r(o){let e,l,t,n=o[11].intended_uses+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Intended uses",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].intended_uses+"")&&G(r,n)},d(s){s&&d(e)}}}function pr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Capital scheme ID",t=y(`
        : `),r=y(n)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&G(r,n)},d(f){f&&d(e)}}}function mr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.funding_programme)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Funding programme",t=y(`
        : `),r=y(n)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&G(r,n)},d(f){f&&d(e)}}}function _r(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Current milestone",t=y(`
        : `),r=y(n)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&G(r,n)},d(f){f&&d(e)}}}function gr(o){let e,l,t,n,r,s,f,i=o[11].scheme_type&&dr(o),a=o[11].atf4_lead_type&&hr(o),u=o[11].scheme_description&&wr(o);return n=new Ur({props:{props:o[11]}}),s=new Br({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,p){i&&i.m(c,p),g(c,e,p),a&&a.m(c,p),g(c,l,p),u&&u.m(c,p),g(c,t,p),b(n,c,p),g(c,r,p),b(s,c,p),f=!0},p(c,p){c[11].scheme_type?i?i.p(c,p):(i=dr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].atf4_lead_type?a?a.p(c,p):(a=hr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].scheme_description?u?u.p(c,p):(u=wr(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const h={};p&32&&(h.props=c[11]),n.$set(h);const k={};p&32&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(d(e),d(l),d(t),d(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function dr(o){let e,l,t,n=o[11].scheme_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme type",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_type+"")&&G(r,n)},d(s){s&&d(e)}}}function hr(o){let e,l,t,n=o[11].atf4_lead_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 lead type",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].atf4_lead_type+"")&&G(r,n)},d(s){s&&d(e)}}}function wr(o){let e,l,t,n=o[11].scheme_description+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Descripton",t=y(`
          : `),r=y(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_description+"")&&G(r,n)},d(s){s&&d(e)}}}function hm(o){let e;return{c(){e=y("Edit a copy of this scheme")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function wm(o){let e;return{c(){e=y("Edit your existing version of this scheme")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function bm(o){let e;function l(r,s){var f;return(f=r[5].browse)!=null&&f.local_filename?wm:hm}let t=l(o),n=t(o);return{c(){n.c(),e=de()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function vm(o){let e;return{c(){e=y("Zoom to show entire scheme")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function br(o){var Pn,Dn,An,Gn;let e,l,t,n,r,s,f,i=at(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,p,h,k,C,T,I,j,N,F,O,M,H,R,P,B,ue=at(o[5].scheme_name??"",o[2])+"",D,x,Z,ce,he,le=at(o[1].scheme_reference,o[2])+"",Se,nt,mt,ze,st=((Pn=o[5].browse)==null?void 0:Pn.authority_or_region)+"",Ye,it,_t,gt,z,ve,je,xt,Qe,Ue,Re=o[1].length_meters&&lr(o),Pe=o[1].description&&rr(o),Ce=o[1].pipeline&&or(hn(o)),De=o[1].v2&&fr(dn(o)),Ae=((Dn=o[5].browse)==null?void 0:Dn.capital_scheme_id)&&pr(o),Ge=((An=o[5].browse)==null?void 0:An.funding_programme)&&mr(o),qe=((Gn=o[5].browse)==null?void 0:Gn.current_milestone)&&_r(o),Le=o[5].pipeline&&gr(gn(o));return je=new We({props:{$$slots:{default:[bm]},$$scope:{ctx:o}}}),je.$on("click",o[7]),Qe=new We({props:{$$slots:{default:[vm]},$$scope:{ctx:o}}}),Qe.$on("click",o[6]),{c(){e=S("div"),l=S("h2"),l.textContent="Intervention",t=L(),n=S("p"),r=S("b"),r.textContent="Name",s=y(`
      : `),f=new zt(!1),a=y(" ("),c=y(u),p=y(")"),h=L(),Re&&Re.c(),k=L(),Pe&&Pe.c(),C=L(),Ce&&Ce.c(),T=L(),De&&De.c(),I=L(),j=S("hr"),N=L(),F=S("h2"),O=y(o[0]),M=L(),H=S("p"),R=S("b"),R.textContent="Scheme name",P=y(`
      : `),B=new zt(!1),D=L(),x=S("p"),Z=S("b"),Z.textContent="Scheme reference",ce=y(`
      : `),he=new zt(!1),Se=L(),nt=S("p"),mt=S("b"),mt.textContent="Authority or region",ze=y(`
      : `),Ye=y(st),it=L(),Ae&&Ae.c(),_t=L(),Ge&&Ge.c(),gt=L(),qe&&qe.c(),z=L(),Le&&Le.c(),ve=L(),w(je.$$.fragment),xt=L(),w(Qe.$$.fragment),f.a=a,B.a=null,he.a=null,ie(e,"max-width","30vw"),ie(e,"max-height","60vh"),ie(e,"overflow","auto")},m(se,we){g(se,e,we),$(e,l),$(e,t),$(e,n),$(n,r),$(n,s),f.m(i,n),$(n,a),$(n,c),$(n,p),$(e,h),Re&&Re.m(e,null),$(e,k),Pe&&Pe.m(e,null),$(e,C),Ce&&Ce.m(e,null),$(e,T),De&&De.m(e,null),$(e,I),$(e,j),$(e,N),$(e,F),$(F,O),$(e,M),$(e,H),$(H,R),$(H,P),B.m(ue,H),$(e,D),$(e,x),$(x,Z),$(x,ce),he.m(le,x),$(e,Se),$(e,nt),$(nt,mt),$(nt,ze),$(nt,Ye),$(e,it),Ae&&Ae.m(e,null),$(e,_t),Ge&&Ge.m(e,null),$(e,gt),qe&&qe.m(e,null),$(e,z),Le&&Le.m(e,null),$(e,ve),b(je,e,null),$(e,xt),b(Qe,e,null),o[9](e),Ue=!0},p(se,we){var zn,Un,Bn,En;(!Ue||we&10)&&i!==(i=at(se[1].name,se[3])+"")&&f.p(i),(!Ue||we&2)&&u!==(u=se[1].intervention_type+"")&&G(c,u),se[1].length_meters?Re?Re.p(se,we):(Re=lr(se),Re.c(),Re.m(e,k)):Re&&(Re.d(1),Re=null),se[1].description?Pe?Pe.p(se,we):(Pe=rr(se),Pe.c(),Pe.m(e,C)):Pe&&(Pe.d(1),Pe=null),se[1].pipeline?Ce?(Ce.p(hn(se),we),we&2&&m(Ce,1)):(Ce=or(hn(se)),Ce.c(),m(Ce,1),Ce.m(e,T)):Ce&&(ke(),_(Ce,1,1,()=>{Ce=null}),ye()),se[1].v2?De?De.p(dn(se),we):(De=fr(dn(se)),De.c(),De.m(e,I)):De&&(De.d(1),De=null),(!Ue||we&1)&&G(O,se[0]),(!Ue||we&36)&&ue!==(ue=at(se[5].scheme_name??"",se[2])+"")&&B.p(ue),(!Ue||we&6)&&le!==(le=at(se[1].scheme_reference,se[2])+"")&&he.p(le),(!Ue||we&32)&&st!==(st=((zn=se[5].browse)==null?void 0:zn.authority_or_region)+"")&&G(Ye,st),(Un=se[5].browse)!=null&&Un.capital_scheme_id?Ae?Ae.p(se,we):(Ae=pr(se),Ae.c(),Ae.m(e,_t)):Ae&&(Ae.d(1),Ae=null),(Bn=se[5].browse)!=null&&Bn.funding_programme?Ge?Ge.p(se,we):(Ge=mr(se),Ge.c(),Ge.m(e,gt)):Ge&&(Ge.d(1),Ge=null),(En=se[5].browse)!=null&&En.current_milestone?qe?qe.p(se,we):(qe=_r(se),qe.c(),qe.m(e,z)):qe&&(qe.d(1),qe=null),se[5].pipeline?Le?(Le.p(gn(se),we),we&32&&m(Le,1)):(Le=gr(gn(se)),Le.c(),m(Le,1),Le.m(e,ve)):Le&&(ke(),_(Le,1,1,()=>{Le=null}),ye());const qn={};we&4128&&(qn.$$scope={dirty:we,ctx:se}),je.$set(qn);const Hn={};we&4096&&(Hn.$$scope={dirty:we,ctx:se}),Qe.$set(Hn)},i(se){Ue||(m(Ce),m(Le),m(je.$$.fragment,se),m(Qe.$$.fragment,se),Ue=!0)},o(se){_(Ce),_(Le),_(je.$$.fragment,se),_(Qe.$$.fragment,se),Ue=!1},d(se){se&&d(e),Re&&Re.d(),Pe&&Pe.d(),Ce&&Ce.d(),De&&De.d(),Ae&&Ae.d(),Ge&&Ge.d(),qe&&qe.d(),Le&&Le.d(),v(je),v(Qe),o[9](null)}}}function km(o){let e=o[1],l,t,n=br(o);return{c(){n.c(),l=de()},m(r,s){n.m(r,s),g(r,l,s),t=!0},p(r,[s]){s&2&&Q(e,e=r[1])?(ke(),_(n,1,1,J),ye(),n=br(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n.d(r)}}}function at(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function ym(o,e,l){let t,n;Y(o,_n,k=>l(10,n=k));let{description:r}=e,{props:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,u;Jr(()=>{u&&l(4,u.scrollTop=0,u)});function c(){let k={type:"FeatureCollection",features:f.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(Rr(k),{padding:20,animate:!1})}function p(){var I,j,N;let k={type:"FeatureCollection",features:f.features.filter(F=>F.properties.scheme_reference==t.scheme_reference),schemes:{}};k.schemes[t.scheme_reference]=t;let C=(I=t.browse)==null?void 0:I.authority_or_region;if(!C){window.alert("This scheme has no authority specified, you can't edit this");return}let T=t.pipeline?"pipeline":t.v2?"v2":"v1";if((j=t.browse)!=null&&j.local_filename)window.open(Zn(C,(N=t.browse)==null?void 0:N.local_filename,T),"_blank");else{let F=`browse_copy_${t.scheme_reference}`,O=ko(C,k);for(let M of O.features)delete M.properties.funding_programme,delete M.properties.current_milestone;yo(So(C,F),JSON.stringify(O)),window.open(Zn(C,F,T),"_blank")}}function h(k){U[k?"unshift":"push"](()=>{u=k,l(4,u)})}return o.$$set=k=>{"description"in k&&l(0,r=k.description),"props"in k&&l(1,s=k.props),"schemesGj"in k&&l(8,f=k.schemesGj),"filterSchemeText"in k&&l(2,i=k.filterSchemeText),"filterInterventionText"in k&&l(3,a=k.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=f.schemes[s.scheme_reference])},[r,s,i,a,u,t,c,p,f,h]}class Rn extends V{constructor(e){super(),K(this,e,ym,km,Q,{description:0,props:1,schemesGj:8,filterSchemeText:2,filterInterventionText:3})}}function Sm(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&d(e)}}}function Tm(o){let e,l;return e=new Rn({props:{description:o[1].title,props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1].title),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Cm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Sm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Tm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function Lm(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&d(e)}}}function Im(o){let e,l;return e=new Rn({props:{description:o[1].title,props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1].title),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Om(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Lm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Im,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function Mm(o){let e,l=o[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&d(e)}}}function jm(o){let e,l;return e=new Rn({props:{description:o[1].title,props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1].title),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Nm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Mm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[jm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function Fm(o){let e,l,t,n,r,s,f,i,a,u;const c=[q(`${o[0]}-interventions-points`),{filter:["all",Tn,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[1].colour,"circle-radius":Qn,"circle-opacity":ee(1,.5)}},{layout:{visibility:o[7]?"visible":"none"}},{hoverCursor:"pointer"}];let p={$$slots:{default:[Cm]},$$scope:{ctx:o}};for(let O=0;O<c.length;O+=1)p=X(p,c[O]);e=new ct({props:p});const h=[q(`${o[0]}-interventions-lines`),{filter:["all",Sn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1].colour,"line-width":en,"line-opacity":ee(1,.5)}},{layout:{visibility:o[7]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[Om]},$$scope:{ctx:o}};for(let O=0;O<h.length;O+=1)k=X(k,h[O]);t=new _e({props:k});const C=[q(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*en,"circle-opacity":0,"circle-stroke-color":lt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[7]?"visible":"none"}}];let T={};for(let O=0;O<C.length;O+=1)T=X(T,C[O]);r=new ct({props:T});const I=[q(`${o[0]}-interventions-polygons`),{filter:["all",fn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[1].colour,"fill-opacity":ee(.2,.5)}},{layout:{visibility:o[7]?"visible":"none"}},{hoverCursor:"pointer"}];let j={$$slots:{default:[Nm]},$$scope:{ctx:o}};for(let O=0;O<I.length;O+=1)j=X(j,I[O]);f=new Ne({props:j});const N=[q(`${o[0]}-interventions-polygons-outlines`),{filter:["all",fn,o[8]]},{paint:{"line-color":o[1].colour,"line-opacity":.5,"line-width":.7*en}},{layout:{visibility:o[7]?"visible":"none"}}];let F={};for(let O=0;O<N.length;O+=1)F=X(F,N[O]);return a=new _e({props:F}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(O,M){b(e,O,M),g(O,l,M),b(t,O,M),g(O,n,M),b(r,O,M),g(O,s,M),b(f,O,M),g(O,i,M),b(a,O,M),u=!0},p(O,M){const H=M&899?te(c,[M&1&&oe(q(`${O[0]}-interventions-points`)),M&768&&{filter:["all",Tn,O[8],O[9]]},c[2],c[3],M&2&&{paint:{"circle-color":O[1].colour,"circle-radius":Qn,"circle-opacity":ee(1,.5)}},M&128&&{layout:{visibility:O[7]?"visible":"none"}},c[6]]):{};M&2106&&(H.$$scope={dirty:M,ctx:O}),e.$set(H);const R=M&387?te(h,[M&1&&oe(q(`${O[0]}-interventions-lines`)),M&256&&{filter:["all",Sn,O[8]]},h[2],h[3],M&2&&{paint:{"line-color":O[1].colour,"line-width":en,"line-opacity":ee(1,.5)}},M&128&&{layout:{visibility:O[7]?"visible":"none"}},h[6]]):{};M&2106&&(R.$$scope={dirty:M,ctx:O}),t.$set(R);const P=M&129?te(C,[M&1&&oe(q(`${O[0]}-interventions-lines-endpoints`)),C[1],C[2],M&128&&{layout:{visibility:O[7]?"visible":"none"}}]):{};r.$set(P);const B=M&387?te(I,[M&1&&oe(q(`${O[0]}-interventions-polygons`)),M&256&&{filter:["all",fn,O[8]]},I[2],I[3],M&2&&{paint:{"fill-color":O[1].colour,"fill-opacity":ee(.2,.5)}},M&128&&{layout:{visibility:O[7]?"visible":"none"}},I[6]]):{};M&2106&&(B.$$scope={dirty:M,ctx:O}),f.$set(B);const ue=M&387?te(N,[M&1&&oe(q(`${O[0]}-interventions-polygons-outlines`)),M&256&&{filter:["all",fn,O[8]]},M&2&&{paint:{"line-color":O[1].colour,"line-opacity":.5,"line-width":.7*en}},M&128&&{layout:{visibility:O[7]?"visible":"none"}}]):{};a.$set(ue)},i(O){u||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(r.$$.fragment,O),m(f.$$.fragment,O),m(a.$$.fragment,O),u=!0)},o(O){_(e.$$.fragment,O),_(t.$$.fragment,O),_(r.$$.fragment,O),_(f.$$.fragment,O),_(a.$$.fragment,O),u=!1},d(O){O&&(d(l),d(n),d(s),d(i)),v(e,O),v(t,O),v(r,O),v(f,O),v(a,O)}}}function Rm(o){let e,l;return e=new pt({props:{data:o[6],$$slots:{default:[Fm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&64&&(r.data=t[6]),n&2235&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Pm(o,e,l){let t,n,r=J,s=()=>(r(),r=jr(a,C=>l(7,n=C)),a);o.$$.on_destroy.push(()=>r());let{name:f}=e,{details:i}=e,{show:a}=e;s();let{schemesGj:u}=e,{filterSchemeText:c}=e,{filterInterventionText:p}=e;const h=["!=",["get","hide_while_editing"],!0],k=["!=",["get","endpoint"],!0];return o.$$set=C=>{"name"in C&&l(0,f=C.name),"details"in C&&l(1,i=C.details),"show"in C&&s(l(2,a=C.show)),"schemesGj"in C&&l(3,u=C.schemesGj),"filterSchemeText"in C&&l(4,c=C.filterSchemeText),"filterInterventionText"in C&&l(5,p=C.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&8&&l(6,t=lo(u))},[f,i,a,u,c,p,t,n,h,k]}class wn extends V{constructor(e){super(),K(this,e,Pm,Rm,Q,{name:0,details:1,show:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5})}}function Dm(o){let e;function l(r,s){return r[2]<=100?qm:Gm}let t=l(o),n=t(o);return{c(){n.c(),e=de()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:J,o:J,d(r){r&&d(e),n.d(r)}}}function Am(o){let e,l;return e=new We({props:{$$slots:{default:[Hm]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Gm(o){let e;return{c(){e=S("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){g(l,e,t)},p:J,d(l){l&&d(e)}}}function qm(o){let e,l,t;return{c(){e=S("label"),l=y(`Downloading scheme data
      `),t=S("progress"),t.value=o[2],A(t,"class","svelte-q3473n")},m(n,r){g(n,e,r),$(e,l),$(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&d(e)}}}function Hm(o){let e;return{c(){e=y("Load latest scheme data")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function zm(o){let e,l,t,n;const r=[Am,Dm],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(l=s[e]=r[e](o)),{c(){l&&l.c(),t=de()},m(i,a){~e&&s[e].m(i,a),g(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(l&&(ke(),_(s[u],1,1,()=>{s[u]=null}),ye()),~e?(l=s[e],l?l.p(i,a):(l=s[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){_(l),n=!1},d(i){i&&d(t),~e&&s[e].d(i)}}}function Um(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await Qr(`${Xt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,s=c)});l(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}Nr(async()=>{n&&await f()});async function i(){l(0,n=!0),await f();let a=new URL(window.location.href);a.searchParams.delete("disable_schemes"),Nn(a)}return o.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,s,i,t]}class Bm extends V{constructor(e){super(),K(this,e,Um,zm,Q,{loadFile:4})}}function vr(o,e,l){const t=o.slice();return t[10]=e[l],t}function kr(o){let e,l;return e=new fe({props:{name:o[0].name,title:o[0].title,show:o[3],$$slots:{controls:[Wm],help:[Em]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.name=t[0].name),n&1&&(r.title=t[0].title),n&8&&(r.show=t[3]),n&8231&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function yr(o){let e,l,t=o[10]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,s){g(r,e,s),$(e,l),$(l,n)},p(r,s){s&32&&t!==(t=r[10]+"")&&G(n,t)},d(r){r&&d(e)}}}function Em(o){let e,l,t,n,r,s,f;t=new Pr({props:{text:"Scheme data caveats"}});let i=ge(o[5].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=yr(vr(o,i,u));return{c(){e=S("span"),l=S("p"),w(t.$$.fragment),n=y(`Please note there are data
        quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();A(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),b(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c&32){i=ge(u[5].notes??[]);let p;for(p=0;p<i.length;p+=1){const h=vr(u,i,p);a[p]?a[p].p(h,c):(a[p]=yr(h),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),Ee(a,u)}}}function Wm(o){let e,l,t,n,r,s,f,i,a,u,c;function p(j){o[6](j)}function h(j){o[7](j)}function k(j){o[8](j)}let C={source:"ATF"};o[5]!==void 0&&(C.schemesGj=o[5]),o[2]!==void 0&&(C.filterSchemeText=o[2]),o[1]!==void 0&&(C.filterInterventionText=o[1]),l=new zr({props:C}),U.push(()=>E(l,"schemesGj",p)),U.push(()=>E(l,"filterSchemeText",h)),U.push(()=>E(l,"filterInterventionText",k));function T(j){o[9](j)}let I={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0].style!==void 0&&(I.value=o[0].style),f=new ln({props:I}),U.push(()=>E(f,"value",T)),u=new Yt({props:{rows:o[0].legend}}),{c(){e=S("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(j,N){g(j,e,N),b(l,e,null),$(e,s),b(f,e,null),$(e,a),b(u,e,null),c=!0},p(j,N){const F={};!t&&N&32&&(t=!0,F.schemesGj=j[5],W(()=>t=!1)),!n&&N&4&&(n=!0,F.filterSchemeText=j[2],W(()=>n=!1)),!r&&N&2&&(r=!0,F.filterInterventionText=j[1],W(()=>r=!1)),l.$set(F);const O={};!i&&N&1&&(i=!0,O.value=j[0].style,W(()=>i=!1)),f.$set(O);const M={};N&1&&(M.rows=j[0].legend),u.$set(M)},i(j){c||(m(l.$$.fragment,j),m(f.$$.fragment,j),m(u.$$.fragment,j),c=!0)},o(j){_(l.$$.fragment,j),_(f.$$.fragment,j),_(u.$$.fragment,j),c=!1},d(j){j&&d(e),v(l),v(f),v(u)}}}function Ym(o){let e=Object.entries(o[5].schemes).length>0,l,t,n=e&&kr(o);return{c(){n&&n.c(),l=de()},m(r,s){n&&n.m(r,s),g(r,l,s),t=!0},p(r,[s]){s&32&&(e=Object.entries(r[5].schemes).length>0),e?n?(n.p(r,s),s&32&&m(n,1)):(n=kr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n&&(ke(),_(n,1,1,()=>{n=null}),ye())},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n&&n.d(r)}}}function Jm(o,e,l){let t,n=J,r=()=>(n(),n=jr(i,C=>l(5,t=C)),i);o.$$.on_destroy.push(()=>n());let{details:s}=e;console.log(`details - ${JSON.stringify(s)}`),console.log(s),console.log(`name - ${s.name}`);let{show:f}=e,{schemes:i}=e;r(),console.log(i);let{filterSchemeText:a}=e,{filterInterventionText:u}=e;function c(C){t=C,i.set(t)}function p(C){u=C,l(2,u)}function h(C){a=C,l(1,a)}function k(C){o.$$.not_equal(s.style,C)&&(s.style=C,l(0,s))}return o.$$set=C=>{"details"in C&&l(0,s=C.details),"show"in C&&l(3,f=C.show),"schemes"in C&&r(l(4,i=C.schemes)),"filterSchemeText"in C&&l(1,a=C.filterSchemeText),"filterInterventionText"in C&&l(2,u=C.filterInterventionText)},[s,a,u,f,i,t,c,p,h,k]}class bn extends V{constructor(e){super(),K(this,e,Jm,Ym,Q,{details:0,show:3,schemes:4,filterSchemeText:1,filterInterventionText:2})}}const ut=Ie({type:"FeatureCollection",features:[],schemes:{}}),Qm=Ie(""),Vm=Ie(""),sn=Ie({type:"FeatureCollection",features:[],schemes:{}}),Km=Ie(""),Zm=Ie(""),an=Ie({type:"FeatureCollection",features:[],schemes:{}}),Xm=Ie(""),xm=Ie(""),vn=Ie({type:"FeatureCollection",features:[],schemes:{}}),Sr=Ie(""),Tr=Ie("");function Cr(o,e,l){const t=o.slice();return t[40]=e[l],t}function e_(o){let e,l;return e=new Bm({props:{loadFile:o[22]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:J,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function t_(o){let e,l,t,n,r,s;return e=new bn({props:{details:o[0]+",",show:o[18]+",",schemes:ut+",",filterSchemeText:o[8]+",",filterInterventionText:o[9]+","}}),t=new bn({props:{details:o[2]+",",show:o[20]+",",schemes:sn+",",filterSchemeText:o[10]+",",filterInterventionText:o[11]+","}}),r=new bn({props:{details:o[1]+",",show:o[19]+",",schemes:an+",",filterSchemeText:o[12]+",",filterInterventionText:o[13]+","}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){b(e,f,i),g(f,l,i),b(t,f,i),g(f,n,i),b(r,f,i),s=!0},p(f,i){const a={};i[0]&1&&(a.details=f[0]+","),i[0]&256&&(a.filterSchemeText=f[8]+","),i[0]&512&&(a.filterInterventionText=f[9]+","),e.$set(a);const u={};i[0]&4&&(u.details=f[2]+","),i[0]&1024&&(u.filterSchemeText=f[10]+","),i[0]&2048&&(u.filterInterventionText=f[11]+","),t.$set(u);const c={};i[0]&2&&(c.details=f[1]+","),i[0]&4096&&(c.filterSchemeText=f[12]+","),i[0]&8192&&(c.filterInterventionText=f[13]+","),r.$set(c)},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n)),v(e,f),v(t,f),v(r,f)}}}function n_(o){let e,l,t=ut&&sn&&an&&t_(o);return{c(){t&&t.c(),e=de()},m(n,r){t&&t.m(n,r),g(n,e,r),l=!0},p(n,r){ut&&sn&&an&&t.p(n,r)},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&d(e),t&&t.d(n)}}}function l_(o){let e;return{c(){e=y("Show your sketches")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Lr(o){let e,l,t;function n(s){o[28](s)}let r={name:Er,title:c_,$$slots:{controls:[i_],help:[r_]},$$scope:{ctx:o}};return o[7]!==void 0&&(r.show=o[7]),e=new fe({props:r}),U.push(()=>E(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&49248|f[1]&4096&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&128&&(l=!0,i.show=s[7],W(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ir(o){let e,l,t=o[40]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,s){g(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&64&&t!==(t=r[40]+"")&&G(n,t)},d(r){r&&d(e)}}}function r_(o){let e,l,t,n,r,s,f;t=new Pr({props:{text:"Scheme data caveats"}});let i=ge(o[6].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Ir(Cr(o,i,u));return{c(){e=S("span"),l=S("p"),w(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();A(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),b(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&64){i=ge(u[6].notes??[]);let p;for(p=0;p<i.length;p+=1){const h=Cr(u,i,p);a[p]?a[p].p(h,c):(a[p]=Ir(h),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),Ee(a,u)}}}function o_(o){let e;return{c(){e=y("Download all schemes")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function s_(o){let e,l,t,n,r,s,f;function i(p){o[25](p)}function a(p){o[26](p)}function u(p){o[27](p)}let c={source:"Local"};return o[6]!==void 0&&(c.schemesGj=o[6]),o[14]!==void 0&&(c.filterSchemeText=o[14]),o[15]!==void 0&&(c.filterInterventionText=o[15]),e=new zr({props:c}),U.push(()=>E(e,"schemesGj",i)),U.push(()=>E(e,"filterSchemeText",a)),U.push(()=>E(e,"filterInterventionText",u)),s=new We({props:{$$slots:{default:[o_]},$$scope:{ctx:o}}}),s.$on("click",o[24]),{c(){w(e.$$.fragment),r=L(),w(s.$$.fragment)},m(p,h){b(e,p,h),g(p,r,h),b(s,p,h),f=!0},p(p,h){const k={};!l&&h[0]&64&&(l=!0,k.schemesGj=p[6],W(()=>l=!1)),!t&&h[0]&16384&&(t=!0,k.filterSchemeText=p[14],W(()=>t=!1)),!n&&h[0]&32768&&(n=!0,k.filterInterventionText=p[15],W(()=>n=!1)),e.$set(k);const C={};h[1]&4096&&(C.$$scope={dirty:h,ctx:p}),s.$set(C)},i(p){f||(m(e.$$.fragment,p),m(s.$$.fragment,p),f=!0)},o(p){_(e.$$.fragment,p),_(s.$$.fragment,p),f=!1},d(p){p&&d(r),v(e,p),v(s,p)}}}function i_(o){let e,l,t,n,r;return l=new bo({props:{$$slots:{default:[s_]},$$scope:{ctx:o}}}),n=new Yt({props:{rows:o[5]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),A(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(s,f){g(s,e,f),b(l,e,null),$(e,t),b(n,e,null),r=!0},p(s,f){const i={};f[0]&49216|f[1]&4096&&(i.$$scope={dirty:f,ctx:s}),l.$set(i);const a={};f[0]&32&&(a.rows=s[5]),n.$set(a)},i(s){r||(m(l.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(l),v(n)}}}function a_(o){let e=Object.entries(o[6].schemes).length>0,l,t,n=e&&Lr(o);return{c(){n&&n.c(),l=de()},m(r,s){n&&n.m(r,s),g(r,l,s),t=!0},p(r,s){s[0]&64&&(e=Object.entries(r[6].schemes).length>0),e?n?(n.p(r,s),s[0]&64&&m(n,1)):(n=Lr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n&&(ke(),_(n,1,1,()=>{n=null}),ye())},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n&&n.d(r)}}}function f_(o){let e=Fr()=="Private (development)",l,t,n,r,s,f,i,a,u,c,p,h,k,C=e&&e_(o);return t=new Fe({props:{small:!0,$$slots:{default:[n_]},$$scope:{ctx:o}}}),r=new Ar({props:{label:"Load schemes from GeoJSON",onLoad:o[22]}}),f=new wo({props:{errorMessage:o[4]}}),c=new We({props:{$$slots:{default:[l_]},$$scope:{ctx:o}}}),c.$on("click",o[23]),h=new Fe({props:{small:!0,$$slots:{default:[a_]},$$scope:{ctx:o}}}),{c(){C&&C.c(),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),a=S("hr"),u=L(),w(c.$$.fragment),p=L(),w(h.$$.fragment)},m(T,I){C&&C.m(T,I),g(T,l,I),b(t,T,I),g(T,n,I),b(r,T,I),g(T,s,I),b(f,T,I),g(T,i,I),g(T,a,I),g(T,u,I),b(c,T,I),g(T,p,I),b(h,T,I),k=!0},p(T,I){e&&C.p(T,I);const j={};I[0]&16135|I[1]&4096&&(j.$$scope={dirty:I,ctx:T}),t.$set(j);const N={};I[0]&16&&(N.errorMessage=T[4]),f.$set(N);const F={};I[1]&4096&&(F.$$scope={dirty:I,ctx:T}),c.$set(F);const O={};I[0]&49376|I[1]&4096&&(O.$$scope={dirty:I,ctx:T}),h.$set(O)},i(T){k||(m(C),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(c.$$.fragment,T),m(h.$$.fragment,T),k=!0)},o(T){_(C),_(t.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),_(c.$$.fragment,T),_(h.$$.fragment,T),k=!1},d(T){T&&(d(l),d(n),d(s),d(i),d(a),d(u),d(p)),C&&C.d(T),v(t,T),v(r,T),v(f,T),v(c,T),v(h,T)}}}function u_(o){let e,l,t,n,r,s,f,i;return e=new rt({props:{label:"Schemes",open:!0,$$slots:{default:[f_]},$$scope:{ctx:o}}}),t=new wn({props:{name:"atf",details:o[0],show:o[18],schemesGj:o[3],filterSchemeText:o[8],filterInterventionText:o[9]}}),r=new wn({props:{name:"finalInspections",details:o[2],show:o[20],schemesGj:o[16],filterSchemeText:o[10],filterInterventionText:o[11]}}),f=new wn({props:{name:"lcwip",details:o[1],show:o[19],schemesGj:o[17],filterSchemeText:o[12],filterInterventionText:o[13]}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),g(a,n,u),b(r,a,u),g(a,s,u),b(f,a,u),i=!0},p(a,u){const c={};u[0]&65527|u[1]&4096&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p={};u[0]&1&&(p.details=a[0]),u[0]&8&&(p.schemesGj=a[3]),u[0]&256&&(p.filterSchemeText=a[8]),u[0]&512&&(p.filterInterventionText=a[9]),t.$set(p);const h={};u[0]&4&&(h.details=a[2]),u[0]&65536&&(h.schemesGj=a[16]),u[0]&1024&&(h.filterSchemeText=a[10]),u[0]&2048&&(h.filterInterventionText=a[11]),r.$set(h);const k={};u[0]&2&&(k.details=a[1]),u[0]&131072&&(k.schemesGj=a[17]),u[0]&4096&&(k.filterSchemeText=a[12]),u[0]&8192&&(k.filterInterventionText=a[13]),f.$set(k)},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(d(l),d(n),d(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}let Er="local_schemes",c_="Your schemes";function $_(o,e,l){let t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,j,N,F;Y(o,vn,z=>l(6,r=z)),Y(o,ut,z=>l(3,u=z)),Y(o,Vm,z=>l(8,c=z)),Y(o,Qm,z=>l(9,p=z)),Y(o,Zm,z=>l(10,h=z)),Y(o,Km,z=>l(11,k=z)),Y(o,xm,z=>l(12,C=z)),Y(o,Xm,z=>l(13,T=z)),Y(o,Tr,z=>l(14,I=z)),Y(o,Sr,z=>l(15,j=z)),Y(o,sn,z=>l(16,N=z)),Y(o,an,z=>l(17,F=z));let O="";const[M,H]=ze("fundingProgramme");let R={name:"atf_schemes",title:"ATF schemes",style:"fundingProgramme",colour:M,legend:H};const P=$e("atf_schemes");Y(o,P,z=>l(32,a=z));const[B,ue]=ze("fundingProgramme");let D={name:"lcwip_schemes",title:"LCWIP schemes",style:"fundingProgramme",colour:B,legend:ue};const x=$e("lcwip_schemes");Y(o,x,z=>l(31,i=z)),console.log(R),console.log(JSON.stringify(R));const[Z,ce]=ze("fundingProgramme");let he={name:"finalInspections_schemes",title:"Final Inspections schemes",style:"fundingProgramme",colour:Z,legend:ce};const le=$e("finalInspections_schemes");Y(o,le,z=>l(30,f=z));let Se=$e(Er);Y(o,Se,z=>l(7,s=z));function nt(z,ve){try{Wp(JSON.parse(ve),ut,an,sn),ht(P,a=!0,a),ht(x,i=!0,i),ht(le,f=!0,f),l(4,O="")}catch(je){l(4,O=`The file you loaded is broken: ${je}`)}}function mt(){ht(vn,r=Jp(),r),ht(Se,s=!0,s)}function ze(z){return z=="interventionType"?[Bp(),Ep()]:z=="fundingProgramme"?[Me(["get","funding_programme"],Zt,"grey"),Object.entries(Zt)]:z=="currentMilestone"?[Me(["get","current_milestone"],In,"grey"),Object.entries(In)]:["red",[]]}function st(){To("all_your_schemes.geojson",JSON.stringify(r,null,"  "))}function Ye(z){r=z,vn.set(r)}function it(z){I=z,Tr.set(I)}function _t(z){j=z,Sr.set(j)}function gt(z){s=z,Se.set(s)}return o.$$.update=()=>{if(o.$$.dirty[0]&1){const[z,ve]=ze(R.style);l(0,R.colour=z,R),l(0,R.legend=ve,R)}if(o.$$.dirty[0]&2){const[z,ve]=ze(D.style);l(1,D.colour=z,D),l(1,D.legend=ve,D)}if(o.$$.dirty[0]&8&&(console.log(ut),console.log(u),console.log(JSON.stringify(ut))),o.$$.dirty[0]&4){const[z,ve]=ze(he.style);l(2,he.colour=z,he),l(2,he.legend=ve,he)}},l(5,[t,n]=ze("interventionType"),n),[R,D,he,u,O,n,r,s,c,p,h,k,C,T,I,j,N,F,P,x,le,Se,nt,mt,st,Ye,it,_t,gt]}class p_ extends V{constructor(e){super(),K(this,e,$_,u_,Q,{},null,[-1,-1])}}function m_(o){let e,l,t,n,r,s,f,i;return e=new $$({}),t=new k$({}),r=new ep({}),f=new B$({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){b(e,a,u),g(a,l,u),b(t,a,u),g(a,n,u),b(r,a,u),g(a,s,u),b(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(d(l),d(n),d(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function __(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[m_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function g_(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T;return e=new nf({}),t=new mf({}),r=new Ef({}),f=new Rf({}),a=new cc({}),c=new Xc({}),h=new zc({}),C=new Nu({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment),u=L(),w(c.$$.fragment),p=L(),w(h.$$.fragment),k=L(),w(C.$$.fragment)},m(I,j){b(e,I,j),g(I,l,j),b(t,I,j),g(I,n,j),b(r,I,j),g(I,s,j),b(f,I,j),g(I,i,j),b(a,I,j),g(I,u,j),b(c,I,j),g(I,p,j),b(h,I,j),g(I,k,j),b(C,I,j),T=!0},i(I){T||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(r.$$.fragment,I),m(f.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(h.$$.fragment,I),m(C.$$.fragment,I),T=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(r.$$.fragment,I),_(f.$$.fragment,I),_(a.$$.fragment,I),_(c.$$.fragment,I),_(h.$$.fragment,I),_(C.$$.fragment,I),T=!1},d(I){I&&(d(l),d(n),d(s),d(i),d(u),d(p),d(k)),v(e,I),v(t,I),v(r,I),v(f,I),v(a,I),v(c,I),v(h,I),v(C,I)}}}function d_(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[g_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function h_(o){let e,l,t,n,r,s;return e=new Ua({}),t=new wc({}),r=new Oc({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){b(e,f,i),g(f,l,i),b(t,f,i),g(f,n,i),b(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n)),v(e,f),v(t,f),v(r,f)}}}function w_(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[h_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function b_(o){let e,l,t,n,r,s,f,i,a,u;return e=new Zi({}),t=new Ia({}),r=new Zs({}),f=new wi({}),a=new Fi({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,p){b(e,c,p),g(c,l,p),b(t,c,p),g(c,n,p),b(r,c,p),g(c,s,p),b(f,c,p),g(c,i,p),b(a,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(d(l),d(n),d(s),d(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function v_(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[b_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function k_(o){let e,l,t,n,r,s;return e=new Hs({}),t=new ai({}),r=new da({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){b(e,f,i),g(f,l,i),b(t,f,i),g(f,n,i),b(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n)),v(e,f),v(t,f),v(r,f)}}}function y_(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[k_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function S_(o){let e,l,t,n,r,s,f,i,a,u;return e=new Hi({}),t=new tc({}),r=new lu({}),f=new Wu({}),a=new N$({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,p){b(e,c,p),g(c,l,p),b(t,c,p),g(c,n,p),b(r,c,p),g(c,s,p),b(f,c,p),g(c,i,p),b(a,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(d(l),d(n),d(s),d(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function T_(o){let e,l,t,n,r,s,f,i,a=Fr()=="Private (development)",u,c,p,h,k;e=new Up({}),t=new hp({}),r=new wu({}),f=new Sf({});let C=a&&S_();return c=new ia({}),h=new Mp({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),C&&C.c(),u=L(),w(c.$$.fragment),p=L(),w(h.$$.fragment)},m(T,I){b(e,T,I),g(T,l,I),b(t,T,I),g(T,n,I),b(r,T,I),g(T,s,I),b(f,T,I),g(T,i,I),C&&C.m(T,I),g(T,u,I),b(c,T,I),g(T,p,I),b(h,T,I),k=!0},p:J,i(T){k||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(C),m(c.$$.fragment,T),m(h.$$.fragment,T),k=!0)},o(T){_(e.$$.fragment,T),_(t.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),_(C),_(c.$$.fragment,T),_(h.$$.fragment,T),k=!1},d(T){T&&(d(l),d(n),d(s),d(i),d(u),d(p)),v(e,T),v(t,T),v(r,T),v(f,T),C&&C.d(T),v(c,T),v(h,T)}}}function C_(o){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[T_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function L_(o){let e,l,t,n,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new oo({props:f}),U.push(()=>E(e,"enabled",s)),n=new Ko({}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],W(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}function I_(o){let e,l;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=X(n,t[r]);return e=new Ne({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&2?te(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function O_(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C,T,I,j,N,F,O;return l=new p_({}),n=new rt({props:{label:"Trip generators",$$slots:{default:[__]},$$scope:{ctx:o}}}),s=new rt({props:{label:"Existing infrastructure",$$slots:{default:[d_]},$$scope:{ctx:o}}}),i=new rt({props:{label:"Public transport",$$slots:{default:[w_]},$$scope:{ctx:o}}}),u=new rt({props:{label:"Boundaries",$$slots:{default:[v_]},$$scope:{ctx:o}}}),p=new rt({props:{label:"Census",$$slots:{default:[y_]},$$scope:{ctx:o}}}),k=new rt({props:{label:"Other",$$slots:{default:[C_]},$$scope:{ctx:o}}}),T=new rt({props:{label:"Tools",$$slots:{default:[L_]},$$scope:{ctx:o}}}),j=new ro({props:{disabled:!o[1]}}),F=new pt({props:{data:o[4],$$slots:{default:[I_]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment),f=L(),w(i.$$.fragment),a=L(),w(u.$$.fragment),c=L(),w(p.$$.fragment),h=L(),w(k.$$.fragment),C=L(),w(T.$$.fragment),I=L(),w(j.$$.fragment),N=L(),w(F.$$.fragment)},m(M,H){g(M,e,H),b(l,e,null),$(e,t),b(n,e,null),$(e,r),b(s,e,null),$(e,f),b(i,e,null),$(e,a),b(u,e,null),$(e,c),b(p,e,null),$(e,h),b(k,e,null),$(e,C),b(T,e,null),$(e,I),b(j,e,null),o[7](e),g(M,N,H),b(F,M,H),O=!0},p(M,[H]){const R={};H&512&&(R.$$scope={dirty:H,ctx:M}),n.$set(R);const P={};H&512&&(P.$$scope={dirty:H,ctx:M}),s.$set(P);const B={};H&512&&(B.$$scope={dirty:H,ctx:M}),i.$set(B);const ue={};H&512&&(ue.$$scope={dirty:H,ctx:M}),u.$set(ue);const D={};H&512&&(D.$$scope={dirty:H,ctx:M}),p.$set(D);const x={};H&512&&(x.$$scope={dirty:H,ctx:M}),k.$set(x);const Z={};H&521&&(Z.$$scope={dirty:H,ctx:M}),T.$set(Z);const ce={};H&2&&(ce.disabled=!M[1]),j.$set(ce);const he={};H&514&&(he.$$scope={dirty:H,ctx:M}),F.$set(he)},i(M){O||(m(l.$$.fragment,M),m(n.$$.fragment,M),m(s.$$.fragment,M),m(i.$$.fragment,M),m(u.$$.fragment,M),m(p.$$.fragment,M),m(k.$$.fragment,M),m(T.$$.fragment,M),m(j.$$.fragment,M),m(F.$$.fragment,M),O=!0)},o(M){_(l.$$.fragment,M),_(n.$$.fragment,M),_(s.$$.fragment,M),_(i.$$.fragment,M),_(u.$$.fragment,M),_(p.$$.fragment,M),_(k.$$.fragment,M),_(T.$$.fragment,M),_(j.$$.fragment,M),_(F.$$.fragment,M),O=!1},d(M){M&&(d(e),d(N)),v(l),v(n),v(s),v(i),v(u),v(p),v(k),v(T),v(j),o[7](null),v(F,M)}}}const M_="browsepage-querystring";function j_(o,e,l){let t,n,r,s;Y(o,_l,p=>l(1,n=p)),Y(o,Ln,p=>l(2,r=p)),Y(o,_n,p=>l(3,s=p));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:p=>eo(p,Vr(yn))};const a=new URLSearchParams(window.location.search);if(!a||a.size===1&&a.keys().next().value=="style"){let p=new URL(window.location.href);const h=window.localStorage.getItem(M_)||"",k=new URLSearchParams(h);for(const[C,T]of k)T==null?p.searchParams.delete(C):p.searchParams.set(C,T);window.history.replaceState(null,"",p.toString())}function u(p){t=p,l(0,t),l(1,n)}function c(p){U[p?"unshift":"push"](()=>{r=p,Ln.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&_l.set(!t)},[t,n,r,s,f,i,u,c]}class N_ extends V{constructor(e){super(),K(this,e,j_,O_,Q,{})}}function F_(o){let e,l,t;return{c(){e=S("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=S("div")},m(n,r){g(n,e,r),g(n,l,r),g(n,t,r),o[3](t)},p:J,i:J,o:J,d(n){n&&(d(e),d(l),d(t)),o[3](null)}}}function R_(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function P_(o,e,l){let t,n;Y(o,Cn,f=>l(1,t=f)),Y(o,tn,f=>l(2,n=f));let r=null;function s(f){U[f?"unshift":"push"](()=>{r=f,l(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&R_(r,n,t)},[r,t,n,s]}class D_ extends V{constructor(e){super(),K(this,e,P_,F_,Q,{})}}function A_(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,C;return l=new vo({}),n=new Kr({}),f=new go({}),p=new ts({props:{boundaryGeojson:o[3]}}),{c(){e=S("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),s=S("div"),w(f.$$.fragment),i=L(),a=S("div"),u=S("h1"),u.textContent="Scheme Browser",c=L(),w(p.$$.fragment),h=L(),k=S("div"),ie(s,"border-bottom","1px solid #b1b4b6"),ie(a,"display","flex"),ie(a,"justify-content","space-between"),A(e,"slot","sidebar"),A(e,"class","govuk-prose")},m(T,I){g(T,e,I),b(l,e,null),$(e,t),b(n,e,null),$(e,r),$(e,s),b(f,s,null),$(e,i),$(e,a),$(a,u),$(a,c),b(p,a,null),$(e,h),$(e,k),o[6](k),C=!0},p(T,I){const j={};I&8&&(j.boundaryGeojson=T[3]),p.$set(j)},i(T){C||(m(l.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),m(p.$$.fragment,T),C=!0)},o(T){_(l.$$.fragment,T),_(n.$$.fragment,T),_(f.$$.fragment,T),_(p.$$.fragment,T),C=!1},d(T){T&&d(e),v(l),v(n),v(f),v(p),o[6](null)}}}function Or(o){let e,l;return e=new N_({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function G_(o){let e,l,t,n;e=new so({});let r=o[2]&&Or();return{c(){w(e.$$.fragment),l=L(),r&&r.c(),t=de()},m(s,f){b(e,s,f),g(s,l,f),r&&r.m(s,f),g(s,t,f),n=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=Or(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(ke(),_(r,1,1,()=>{r=null}),ye())},i(s){n||(m(e.$$.fragment,s),m(r),n=!0)},o(s){_(e.$$.fragment,s),_(r),n=!1},d(s){s&&(d(l),d(t)),v(e,s),r&&r.d(s)}}}function q_(o){let e,l,t;return l=new ho({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[G_]},$$scope:{ctx:o}}}),{c(){e=S("div"),w(l.$$.fragment),A(e,"slot","main")},m(n,r){g(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&2&&(s.style=n[1]),r&260&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function H_(o){let e,l,t,n,r;return e=new Fo({props:{$$slots:{main:[q_],sidebar:[A_]},$$scope:{ctx:o}}}),n=new D_({}),{c(){w(e.$$.fragment),l=L(),t=S("div"),w(n.$$.fragment),A(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){b(e,s,f),g(s,l,f),g(s,t,f),b(n,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(e.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&(d(l),d(t)),v(e,s),v(n)}}}function z_(o,e,l){let t,n,r,s,f;Y(o,Ln,c=>l(4,t=c)),Y(o,_n,c=>l(5,n=c)),Y(o,yn,c=>l(1,r=c)),Y(o,Vn,c=>l(2,s=c)),Y(o,ut,c=>l(3,f=c)),Nr(()=>{Zr()});const i=new URLSearchParams(window.location.search);yn.set(i.get("style")||"dataviz");let a;function u(c){U[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&Vn.set(n),o.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,n,u]}class U_ extends V{constructor(e){super(),K(this,e,z_,H_,Q,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new U_({target:document.getElementById("app")});
