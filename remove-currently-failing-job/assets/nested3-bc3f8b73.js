import{S as Z,i as X,s as J,g as y,k as G,p as le,l as g,v as Q,o as d,J as pt,j as L,az as Bn,n as $,a7 as mt,K as _t,L as gt,M as dt,t as m,e as _,C as be,w as we,y as qe,c as b,h as S,m as w,A,f as v,G as ge,aA as on,x as Y,H as Sn,I as $t,aB as Dr,b as B,a as E,d as U,a9 as Jt,ar as hn,V as ee,ax as cn,at as Xt,W as Le,aC as $e,ag as xt,a6 as tt,a8 as Gr,aD as tn,aE as Ut,q as Fr,aF as no,aG as lo,aH as Ar,ay as ro,aw as bn,B as oo,r as so}from"./index-5559958e.js";import{g as ne,a as se}from"./spread-8a54911c.js";import{c as q,d as nt,t as io,a as Be,C as Ge,e as ve,S as Wt,p as En,f as Un,h as Qt,g as ao,m as Wn}from"./colors-6a71c64b.js";import{e as Yn,h as ot,M as fo,b as qr,H as uo,R as co,f as Ze,C as ht,d as $o,c as Jn,a as Vn,i as ln,W as Tn,B as po,S as mo,G as _o}from"./WarningIcon-02ae7d79.js";import{g as Cn,u as zr,r as Hr,b as Br,c as Er,e as go,G as wt,a as _e,d as ho,h as te,F as Ae,f as bo,i as wo,j as vo,L as ko,M as yo}from"./MapLibreMap-3f106732.js";import{R as Ln,F as Ur,a as wn,E as So}from"./Radio-09323b57.js";import{E as re,H as To}from"./Header-a1734efd.js";import{e as me,f as Kn,b as Co,s as Lo,g as Io,d as Mo}from"./files-e7ad9990.js";import{S as ze}from"./SecondaryButton-8c396610.js";import{P as ie,A as Wr}from"./Popup-457f49ca.js";import{B as Oo}from"./ButtonGroup-194a2bbf.js";import{D as jo}from"./DefaultButton-edb71345.js";import{M as No}from"./Modal-026626d9.js";function Po(o){let e;return{c(){e=y("span"),G(e,"class","svelte-kzgqtg"),le(e,"background",o[0])},m(l,t){g(l,e,t)},p(l,[t]){t&1&&le(e,"background",l[0])},i:Q,o:Q,d(l){l&&d(e)}}}function Ro(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Se extends Z{constructor(e){super(),X(this,e,Ro,Po,J,{color:0})}}const Do=o=>({}),Qn=o=>({}),Go=o=>({}),Zn=o=>({});function Fo(o){let e,l,t,n,r,s,f,i,a,u,c;const p=o[4].sidebar,h=pt(p,o,o[3],Zn),k=o[4].main,T=pt(k,o,o[3],Qn);return{c(){e=y("div"),l=y("aside"),t=y("div"),h&&h.c(),n=L(),r=y("button"),r.textContent="â†’",f=L(),i=y("main"),T&&T.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(r,"type","button"),G(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(l,"class",s=Bn(o[1]?"":"collapsed")+" svelte-1n0etgd"),le(l,"--sidebarWidth",o[0]),G(i,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(C,I){g(C,e,I),$(e,l),$(l,t),h&&h.m(t,null),$(l,n),$(l,r),$(e,f),$(e,i),T&&T.m(i,null),a=!0,u||(c=mt(r,"click",o[2]),u=!0)},p(C,[I]){h&&h.p&&(!a||I&8)&&_t(h,p,C,C[3],a?dt(p,C[3],I,Go):gt(C[3]),Zn),(!a||I&2&&s!==(s=Bn(C[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(l,"class",s),(!a||I&1)&&le(l,"--sidebarWidth",C[0]),T&&T.p&&(!a||I&8)&&_t(T,k,C,C[3],a?dt(k,C[3],I,Do):gt(C[3]),Qn)},i(C){a||(m(h,C),m(T,C),a=!0)},o(C){_(h,C),_(T,C),a=!1},d(C){C&&d(e),h&&h.d(C),T&&T.d(C),u=!1,c()}}}function Ao(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){l(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,s,f,n,t]}class qo extends Z{constructor(e){super(),X(this,e,Ao,Fo,J,{sidebarWidth:0})}}function Xn(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function xn(o){let e,l,t,n=o[1]+"",r,s,f;return l=new Se({props:{color:o[2]}}),{c(){e=y("li"),b(l.$$.fragment),t=L(),r=S(n),s=L()},m(i,a){g(i,e,a),w(l,e,null),$(e,t),$(e,r),$(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&A(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){_(l.$$.fragment,i),f=!1},d(i){i&&d(e),v(l)}}}function zo(o){let e,l,t=me(o[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=xn(Xn(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){e=y("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,f){g(s,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[f]){if(f&1){t=me(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Xn(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=xn(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),qe(n,s)}}}function Ho(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class Kt extends Z{constructor(e){super(),X(this,e,Ho,zo,J,{rows:0})}}function el(o){let e=o[0],l,t,n=tl(o);return{c(){n.c(),l=ge()},m(r,s){n.m(r,s),g(r,l,s),t=!0},p(r,s){s&1&&J(e,e=r[0])?(be(),_(n,1,1,Q),we(),n=tl(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n.d(r)}}}function tl(o){let e;const l=o[17].default,t=pt(l,o,o[16],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&65536)&&_t(t,l,n,n[16],e?dt(l,n[16],r,null):gt(n[16]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Bo(o){let e,l,t=o[0]&&el(o);return{c(){t&&t.c(),e=ge()},m(n,r){t&&t.m(n,r),g(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=el(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),_(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&d(e),t&&t.d(n)}}}function Eo(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Cn("raster-source")}=e,{tiles:i=void 0}=e,{tileSize:a=void 0}=e,{url:u=void 0}=e,{bounds:c=null}=e,{scheme:p=null}=e,{attribution:h=null}=e,{minzoom:k=null}=e,{maxzoom:T=null}=e,{volatile:C=null}=e;if(u&&u.includes("pmtiles://")&&!on.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let O=new Dr;on.addProtocol("pmtiles",O.tile)}const{map:I,self:M}=zr();Y(o,I,O=>l(15,n=O)),Y(o,M,O=>l(0,t=O));let N,P=!0;return Sn(()=>{t&&N&&n&&(Hr(I,t,N),$t(M,t=null,t),l(13,N=void 0))}),o.$$set=O=>{"id"in O&&l(3,f=O.id),"tiles"in O&&l(4,i=O.tiles),"tileSize"in O&&l(5,a=O.tileSize),"url"in O&&l(6,u=O.url),"bounds"in O&&l(7,c=O.bounds),"scheme"in O&&l(8,p=O.scheme),"attribution"in O&&l(9,h=O.attribution),"minzoom"in O&&l(10,k=O.minzoom),"maxzoom"in O&&l(11,T=O.maxzoom),"volatile"in O&&l(12,C=O.volatile),"$$scope"in O&&l(16,s=O.$$scope)},o.$$.update=()=>{o.$$.dirty&49145&&n&&t!==f&&($t(M,t=f,t),Br(n,t,Er({type:"raster",tiles:i,tileSize:a,url:u,bounds:c,scheme:p,attribution:h,minzoom:k,maxzoom:T,volatile:C}),O=>n&&O===t,()=>{t&&(l(13,N=n==null?void 0:n.getSource(t)),l(14,P=!0))})),o.$$.dirty&32776&&(n==null||n.on("style.load",()=>{l(13,N=n==null?void 0:n.getSource(f))})),o.$$.dirty&24656&&N&&(P?l(14,P=!1):i?N.setTiles(i):N.setUrl(u))},[t,I,M,f,i,a,u,c,p,h,k,T,C,N,P,n,s,r]}class Uo extends Z{constructor(e){super(),X(this,e,Eo,Bo,J,{id:3,tiles:4,tileSize:5,url:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function Wo(o){let e;const l=o[16].default,t=pt(l,o,o[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&_t(t,l,n,n[24],e?dt(l,n[24],r,null):gt(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Yo(o){let e,l,t;function n(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[Wo]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new go({props:r}),B.push(()=>E(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!l&&f&1&&(l=!0,i.hovered=s[0],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Jo(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=Cn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:p=void 0}=e,{applyToClusters:h=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:I=!1}=e,{hovered:M=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:P=!0}=e;function O(F){M=F,l(0,M)}function j(F){Jt.call(this,o,F)}function R(F){Jt.call(this,o,F)}function D(F){Jt.call(this,o,F)}function z(F){Jt.call(this,o,F)}function V(F){Jt.call(this,o,F)}function ae(F){Jt.call(this,o,F)}return o.$$set=F=>{"id"in F&&l(1,r=F.id),"source"in F&&l(2,s=F.source),"sourceLayer"in F&&l(3,f=F.sourceLayer),"beforeId"in F&&l(4,i=F.beforeId),"beforeLayerType"in F&&l(5,a=F.beforeLayerType),"paint"in F&&l(6,u=F.paint),"layout"in F&&l(7,c=F.layout),"filter"in F&&l(8,p=F.filter),"applyToClusters"in F&&l(9,h=F.applyToClusters),"minzoom"in F&&l(10,k=F.minzoom),"maxzoom"in F&&l(11,T=F.maxzoom),"hoverCursor"in F&&l(12,C=F.hoverCursor),"manageHoverState"in F&&l(13,I=F.manageHoverState),"hovered"in F&&l(0,M=F.hovered),"eventsIfTopMost"in F&&l(14,N=F.eventsIfTopMost),"interactive"in F&&l(15,P=F.interactive),"$$scope"in F&&l(24,n=F.$$scope)},[M,r,s,f,i,a,u,c,p,h,k,T,C,I,N,P,t,O,j,R,D,z,V,ae,n]}class In extends Z{constructor(e){super(),X(this,e,Jo,Yo,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function nl(o){let e=o[0],l,t,n=ll(o);return{c(){n.c(),l=ge()},m(r,s){n.m(r,s),g(r,l,s),t=!0},p(r,s){s&1&&J(e,e=r[0])?(be(),_(n,1,1,Q),we(),n=ll(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n.d(r)}}}function ll(o){let e;const l=o[15].default,t=pt(l,o,o[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&_t(t,l,n,n[14],e?dt(l,n[14],r,null):gt(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Vo(o){let e,l,t=o[0]&&nl(o);return{c(){t&&t.c(),e=ge()},m(n,r){t&&t.m(n,r),g(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=nl(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(be(),_(t,1,1,()=>{t=null}),we())},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&d(e),t&&t.d(n)}}}function Ko(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Cn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:p=null}=e,{attribution:h=null}=e,{minzoom:k=null}=e,{maxzoom:T=null}=e,{volatile:C=null}=e;if(i&&i.includes("pmtiles://")&&!on.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let P=new Dr;on.addProtocol("pmtiles",P.tile)}const{map:I,self:M}=zr();Y(o,I,P=>l(13,n=P)),Y(o,M,P=>l(0,t=P));let N;return Sn(()=>{t&&n&&(Hr(I,t,N),$t(M,t=null,t),N=void 0)}),o.$$set=P=>{"id"in P&&l(3,f=P.id),"url"in P&&l(4,i=P.url),"tiles"in P&&l(5,a=P.tiles),"promoteId"in P&&l(6,u=P.promoteId),"bounds"in P&&l(7,c=P.bounds),"scheme"in P&&l(8,p=P.scheme),"attribution"in P&&l(9,h=P.attribution),"minzoom"in P&&l(10,k=P.minzoom),"maxzoom"in P&&l(11,T=P.maxzoom),"volatile"in P&&l(12,C=P.volatile),"$$scope"in P&&l(14,s=P.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==f&&($t(M,t=f,t),Br(n,t,Er({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:p,attribution:h,minzoom:k,maxzoom:T,volatile:C}),P=>n&&P===t,()=>{t&&(N=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{N=n==null?void 0:n.getSource(f)}))},[t,I,M,f,i,a,u,c,p,h,k,T,C,n,s,r]}class pe extends Z{constructor(e){super(),X(this,e,Ko,Vo,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function rl(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Qo(o){let e,l,t;return l=new ze({props:{$$slots:{default:[Xo]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=y("div"),b(l.$$.fragment)},m(n,r){g(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Zo(o){let e,l,t,n,r,s,f,i,a,u;l=new ze({props:{$$slots:{default:[xo]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&ol(o);r=new ot({props:{label:"Help",$$slots:{default:[es]},$$scope:{ctx:o}}}),f=new ho({}),f.$on("click",o[3]);let p=me(o[0]),h=[];for(let T=0;T<p.length;T+=1)h[T]=sl(rl(o,p,T));const k=T=>_(h[T],1,1,()=>{h[T]=null});return{c(){e=y("div"),b(l.$$.fragment),t=L(),c&&c.c(),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L();for(let T=0;T<h.length;T+=1)h[T].c();a=ge()},m(T,C){g(T,e,C),w(l,e,null),g(T,t,C),c&&c.m(T,C),g(T,n,C),w(r,T,C),g(T,s,C),w(f,T,C),g(T,i,C);for(let I=0;I<h.length;I+=1)h[I]&&h[I].m(T,C);g(T,a,C),u=!0},p(T,C){const I={};C&16384&&(I.$$scope={dirty:C,ctx:T}),l.$set(I),T[2]?c?c.p(T,C):(c=ol(T),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const M={};if(C&16384&&(M.$$scope={dirty:C,ctx:T}),r.$set(M),C&65){p=me(T[0]);let N;for(N=0;N<p.length;N+=1){const P=rl(T,p,N);h[N]?(h[N].p(P,C),m(h[N],1)):(h[N]=sl(P),h[N].c(),m(h[N],1),h[N].m(a.parentNode,a))}for(be(),N=p.length;N<h.length;N+=1)k(N);we()}},i(T){if(!u){m(l.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T);for(let C=0;C<p.length;C+=1)m(h[C]);u=!0}},o(T){_(l.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),h=h.filter(Boolean);for(let C=0;C<h.length;C+=1)_(h[C]);u=!1},d(T){T&&(d(e),d(t),d(n),d(s),d(i),d(a)),v(l),c&&c.d(T),v(r,T),v(f,T),qe(h,T)}}}function Xo(o){let e;return{c(){e=S("Measure lines")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function xo(o){let e;return{c(){e=S("Stop measuring")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ol(o){let e,l,t=o[2].toFixed(2)+"",n,r;return{c(){e=y("p"),l=S("Length: "),n=S(t),r=S(" meters")},m(s,f){g(s,e,f),$(e,l),$(e,n),$(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&A(n,t)},d(s){s&&d(e)}}}function es(o){let e;return{c(){e=y("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){g(l,e,t)},p:Q,d(l){l&&d(e)}}}function ts(o){let e,l;return{c(){e=y("span"),l=L(),G(e,"class","dot svelte-1tzt432")},m(t,n){g(t,e,n),g(t,l,n)},p:Q,d(t){t&&(d(e),d(l))}}}function sl(o){let e,l,t;function n(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[ts]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new fo({props:s}),B.push(()=>E(e,"lngLat",n)),e.$on("click",r),{c(){b(e.$$.fragment)},m(f,i){w(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!l&&i&1&&(l=!0,a.lngLat=o[11],U(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){_(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function ns(o){let e,l;const t=[q("measurement-line"),{paint:{"line-color":nt.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ls(o){let e,l,t,n,r,s,f;const i=[Zo,Qo],a=[];function u(c,p){return c[1]?0:1}return e=u(o),l=a[e]=i[e](o),n=new wt({props:{data:o[0].length<2?Yn():hn(o[0]),$$slots:{default:[ns]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),b(n.$$.fragment)},m(c,p){a[e].m(c,p),g(c,t,p),w(n,c,p),r=!0,s||(f=mt(window,"keydown",o[5]),s=!0)},p(c,[p]){let h=e;e=u(c),e===h?a[e].p(c,p):(be(),_(a[h],1,1,()=>{a[h]=null}),we(),l=a[e],l?l.p(c,p):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const k={};p&1&&(k.data=c[0].length<2?Yn():hn(c[0])),p&16384&&(k.$$scope={dirty:p,ctx:c}),n.$set(k)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){_(l),_(n.$$.fragment,c),r=!1},d(c){c&&d(t),a[e].d(c),v(n,c),s=!1,f()}}}function rs(o,e,l){let t,n=!1,r=[];function s(k){return k.length<2?null:1e3*io(hn(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),l(0,r)}function c(k,T,C,I){C[I]=k,l(0,r)}const p=k=>u(k),h=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=s(r))},[r,n,t,f,i,a,u,c,p,h]}class os extends Z{constructor(e){super(),X(this,e,rs,ls,J,{})}}const ss="/atip/remove-currently-failing-job/assets/zoom_out_map-b2e1091a.svg";function is(o){let e,l;return{c(){e=y("img"),Xt(e.src,l=ss)||G(e,"src",l),G(e,"alt","Zoom to show entire boundary")},m(t,n){g(t,e,n)},p:Q,d(t){t&&d(e)}}}function as(o){let e,l;return e=new ze({props:{title:"Zoom to show entire boundary",$$slots:{default:[is]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function fs(o,e,l){let t;Y(o,cn,s=>l(2,t=s));let{boundaryGeojson:n}=e;function r(){let s=qr(n);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&l(1,n=s.boundaryGeojson)},[r,n]}class us extends Z{constructor(e){super(),X(this,e,fs,as,J,{boundaryGeojson:1})}}const K={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},rights_of_way:{footpath:"red",bridleway:"green",restricted_byway:"blue",boat:"orange"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Fe=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function cs(o){let e;return{c(){e=S(`Open Government License
  `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function $s(o){let e,l,t,n,r;return t=new re({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[cs]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("License: "),b(t.$$.fragment),n=S(`. Contains OS data Â© Crown copyright and database right
  2023.`)},m(s,f){g(s,e,f),$(e,l),w(t,e,null),$(e,n),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){_(t.$$.fragment,s),r=!1},d(s){s&&d(e),v(t)}}}class Te extends Z{constructor(e){super(),X(this,e,null,$s,J,{})}}function il(o,e,l){const t=o.slice();return t[2]=e[l],t}function al(o,e,l){const t=o.slice();return t[5]=e[l],t}function fl(o){let e,l;return{c(){e=y("span"),l=S(`Â 
    `),le(e,"background",o[5]),le(e,"width","100%"),le(e,"border","1px solid black")},m(t,n){g(t,e,n),$(e,l)},p(t,n){n&1&&le(e,"background",t[5])},d(t){t&&d(e)}}}function ul(o){let e,l=o[2]+"",t;return{c(){e=y("span"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&A(t,l)},d(n){n&&d(e)}}}function ps(o){let e,l,t,n=me(o[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=fl(al(o,n,i));let s=me(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=ul(il(o,s,i));return{c(){e=y("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=y("div");for(let i=0;i<f.length;i+=1)f[i].c();le(e,"display","flex"),le(t,"display","flex"),le(t,"justify-content","space-between")},m(i,a){g(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);g(i,l,a),g(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=me(i[0]);let u;for(u=0;u<n.length;u+=1){const c=al(i,n,u);r[u]?r[u].p(c,a):(r[u]=fl(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){s=me(i[1]);let u;for(u=0;u<s.length;u+=1){const c=il(i,s,u);f[u]?f[u].p(c,a):(f[u]=ul(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:Q,o:Q,d(i){i&&(d(e),d(l),d(t)),qe(r,i),qe(f,i)}}}function ms(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Ee extends Z{constructor(e){super(),X(this,e,ms,ps,J,{colorScale:0,limits:1})}}function ce(o){let e=new URLSearchParams(window.location.search).has(o),l=Le(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),window.history.replaceState(null,"",n.toString())}),l}function vt(o,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Le(n);return s.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),window.history.replaceState(null,"",i.toString())}),s}let vn=Le(new Map),Zt=Le(new Set);const _s=o=>({}),cl=o=>({}),gs=o=>({}),$l=o=>({}),ds=o=>({}),pl=o=>({});function hs(o){let e;return{c(){e=S(o[2])},m(l,t){g(l,e,t)},p(l,t){t&4&&A(e,l[2])},d(l){l&&d(e)}}}function bs(o){let e,l,t;const n=o[7].icon,r=pt(n,o,o[10],pl);return{c(){r&&r.c(),e=L(),l=S(o[2])},m(s,f){r&&r.m(s,f),g(s,e,f),g(s,l,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&_t(r,n,s,s[10],t?dt(n,s[10],f,ds):gt(s[10]),pl),(!t||f&4)&&A(l,s[2])},i(s){t||(m(r,s),t=!0)},o(s){_(r,s),t=!1},d(s){s&&(d(e),d(l)),r&&r.d(s)}}}function ws(o){let e;const l=o[7].help,t=pt(l,o,o[10],$l);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&_t(t,l,n,n[10],e?dt(l,n[10],r,gs):gt(n[10]),$l)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function vs(o){let e;return{c(){e=S("X")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ks(o){let e,l,t,n,r,s,f,i,a;function u(p){o[8](p)}let c={$$slots:{default:[bs]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),l=new Be({props:c}),B.push(()=>E(l,"checked",u)),s=new uo({props:{$$slots:{default:[ws]},$$scope:{ctx:o}}}),i=new ze({props:{$$slots:{default:[vs]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=y("div"),b(l.$$.fragment),n=L(),r=y("span"),b(s.$$.fragment),f=L(),b(i.$$.fragment),le(e,"display","flex"),le(e,"justify-content","space-between")},m(p,h){g(p,e,h),w(l,e,null),$(e,n),$(e,r),w(s,r,null),$(r,f),w(i,r,null),a=!0},p(p,h){const k={};h&1028&&(k.$$scope={dirty:h,ctx:p}),!t&&h&1&&(t=!0,k.checked=p[0],U(()=>t=!1)),l.$set(k);const T={};h&1024&&(T.$$scope={dirty:h,ctx:p}),s.$set(T);const C={};h&1024&&(C.$$scope={dirty:h,ctx:p}),i.$set(C)},i(p){a||(m(l.$$.fragment,p),m(s.$$.fragment,p),m(i.$$.fragment,p),a=!0)},o(p){_(l.$$.fragment,p),_(s.$$.fragment,p),_(i.$$.fragment,p),a=!1},d(p){p&&d(e),v(l),v(s),v(i)}}}function ml(o){let e;const l=o[7].controls,t=pt(l,o,o[10],cl);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&_t(t,l,n,n[10],e?dt(l,n[10],r,_s):gt(n[10]),cl)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function ys(o){let e,l,t,n,r,s;e=new Be({props:{checked:o[4].has(o[1]),$$slots:{default:[hs]},$$scope:{ctx:o}}}),e.$on("change",o[5]),n=new Ge({props:{small:!0,$$slots:{default:[ks]},$$scope:{ctx:o}}});let f=o[0]&&ml(o);return{c(){b(e.$$.fragment),l=L(),t=y("div"),b(n.$$.fragment),r=L(),f&&f.c()},m(i,a){w(e,i,a),g(i,l,a),g(i,t,a),w(n,t,null),$(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=ml(i),f.c(),m(f,1),f.m(t,null)):f&&(be(),_(f,1,1,()=>{f=null}),we())},i(i){s||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),s=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),_(f),s=!1},d(i){i&&(d(l),d(t)),v(e,i),v(n),f&&f.d(),o[9](null)}}}function Ss(o,e,l){let t;Y(o,Zt,k=>l(4,t=k));let{$$slots:n={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),Zt.set(t));let a=null;Sn(()=>{vn.update(k=>(k.delete(s),k))});function u(){Zt.update(k=>(k.has(s)?(k.delete(s),l(0,i=!1)):(k.add(s),l(0,i=!0)),k))}function c(){t.delete(s),Zt.set(t),l(0,i=!1)}function p(k){i=k,l(0,i)}function h(k){B[k?"unshift":"push"](()=>{a=k,l(3,a),l(1,s)})}return o.$$set=k=>{"name"in k&&l(1,s=k.name),"title"in k&&l(2,f=k.title),"show"in k&&l(0,i=k.show),"$$scope"in k&&l(10,r=k.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&vn.update(k=>(l(3,a.style.display="none",a),k.set(s,a),k))},[i,s,f,a,t,u,c,n,p,h,r]}class fe extends Z{constructor(e){super(),X(this,e,Ss,ys,J,{name:1,title:2,show:0})}}function _l(o){const e=o[7].OA21CD;o[8]=e;const l=o[7][o[0].kind];o[9]=l}function Ts(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Is]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ms]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("Population density data is from the 2021 census, via "),b(t.$$.fragment),n=S(". Output area boundaries from "),b(r.$$.fragment),s=S(".")},m(i,a){g(i,e,a),$(e,l),w(t,e,null),$(e,n),w(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&d(e),v(t),v(r)}}}function Cs(o){let e,l,t,n,r,s,f,i,a;return r=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Os]},$$scope:{ctx:o}}}),f=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[js]},$$scope:{ctx:o}}}),{c(){e=y("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=y("p"),n=S("Car/van availability data is from the 2021 census, via "),b(r.$$.fragment),s=S(". Output area boundaries from "),b(f.$$.fragment),i=S(".")},m(u,c){g(u,e,c),g(u,l,c),g(u,t,c),$(t,n),w(r,t,null),$(t,s),w(f,t,null),$(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){_(r.$$.fragment,u),_(f.$$.fragment,u),a=!1},d(u){u&&(d(e),d(l),d(t)),v(r),v(f)}}}function Ls(o){let e,l,t,n,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ns]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ps]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),n=S(". Output area boundaries from "),b(r.$$.fragment),s=S(".")},m(i,a){g(i,e,a),$(e,l),w(t,e,null),$(e,n),w(r,e,null),$(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&d(e),v(t),v(r)}}}function Is(o){let e;return{c(){e=S(`NOMIS TS006
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ms(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Os(o){let e;return{c(){e=S(`NOMIS TS045
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function js(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ns(o){let e;return{c(){e=S(`NOMIS TS045
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ps(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Rs(o){let e,l,t,n,r,s;const f=[Ls,Cs,Ts],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(o),t=i[l]=f[l](o),r=new Te({}),{c(){e=y("span"),t.c(),n=L(),b(r.$$.fragment),G(e,"slot","help")},m(u,c){g(u,e,c),i[l].m(e,null),$(e,n),w(r,e,null),s=!0},p(u,c){let p=l;l=a(u),l!==p&&(be(),_(i[p],1,1,()=>{i[p]=null}),we(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){_(t),_(r.$$.fragment,u),s=!1},d(u){u&&d(e),i[l].d(),v(r)}}}function Ds(o){let e,l,t,n;return t=new Ee({props:{colorScale:o[1],limits:bt(o[0].kind).map(gl)}}),{c(){e=y("p"),e.textContent="(people per square kilometres)",l=L(),b(t.$$.fragment)},m(r,s){g(r,e,s),g(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&1&&(f.limits=bt(r[0].kind).map(gl)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&(d(e),d(l)),v(t,r)}}}function Gs(o){let e,l;return e=new Ee({props:{colorScale:o[1],limits:bt(o[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=bt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Fs(o){let e,l;return e=new Ee({props:{colorScale:o[1],limits:bt(o[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=bt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function As(o){let e,l,t,n,r,s,f;function i(h){o[4](h)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),l=new Ln({props:a}),B.push(()=>E(l,"value",i));const u=[Fs,Gs,Ds],c=[];function p(h,k){return h[0].kind=="percent_households_with_car"?0:h[0].kind=="average_cars_per_household"?1:h[0].kind=="population_density"?2:-1}return~(r=p(o))&&(s=c[r]=u[r](o)),{c(){e=y("div"),b(l.$$.fragment),n=L(),s&&s.c(),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(h,k){g(h,e,k),w(l,e,null),$(e,n),~r&&c[r].m(e,null),f=!0},p(h,k){const T={};!t&&k&1&&(t=!0,T.value=h[0].kind,U(()=>t=!1)),l.$set(T);let C=r;r=p(h),r===C?~r&&c[r].p(h,k):(s&&(be(),_(c[C],1,1,()=>{c[C]=null}),we()),~r?(s=c[r],s?s.p(h,k):(s=c[r]=u[r](h),s.c()),m(s,1),s.m(e,null)):s=null)},i(h){f||(m(l.$$.fragment,h),m(s),f=!0)},o(h){_(l.$$.fragment,h),_(s),f=!1},d(h){h&&d(e),v(l),~r&&c[r].d()}}}function qs(o){let e,l,t,n=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=y("p"),l=S("There are "),t=y("b"),r=S(n),s=S(`
          people per square kilometre in `),i=S(f)},m(a,u){g(a,e,u),$(e,l),$(e,t),$(t,r),$(e,s),$(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&A(r,n),u&128&&f!==(f=a[8]+"")&&A(i,f)},d(a){a&&d(e)}}}function zs(o){let e,l,t=o[8]+"",n,r,s,f=o[9]+"",i,a;return{c(){e=y("p"),l=S("Households in "),n=S(t),r=S(` have an average of
          `),s=y("b"),i=S(f),a=S(`
          cars`)},m(u,c){g(u,e,c),$(e,l),$(e,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&A(n,t),c&129&&f!==(f=u[9]+"")&&A(i,f)},d(u){u&&d(e)}}}function Hs(o){let e,l,t=o[9]+"",n,r,s,f=o[8]+"",i,a;return{c(){e=y("p"),l=y("b"),n=S(t),r=S("%"),s=S(`
          of households in `),i=S(f),a=S(" have 1 or more cars")},m(u,c){g(u,e,c),$(e,l),$(l,n),$(l,r),$(e,s),$(e,i),$(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&A(n,t),c&128&&f!==(f=u[8]+"")&&A(i,f)},d(u){u&&d(e)}}}function Bs(o){_l(o);let e;function l(r,s){return r[0].kind=="percent_households_with_car"?Hs:r[0].kind=="average_cars_per_household"?zs:qs}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){_l(r),t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function Es(o){let e,l;return e=new ie({props:{$$slots:{default:[Bs,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Us(o){let e,l,t,n;const r=[q(We),{sourceLayer:We},{paint:{"fill-color":ve(["get",o[0].kind],bt(o[0].kind),o[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Es]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s}),e.$on("click",o[3]);const f=[q(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),g(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(We)),u&0&&{sourceLayer:We},u&3&&{paint:{"fill-color":ve(["get",a[0].kind],bt(a[0].kind),a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?ne(f,[u&0&&se(q(`${We}-outline`)),u&0&&{sourceLayer:We},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ws(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:We,title:"2021 census",$$slots:{controls:[As],help:[Rs]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${We}.pmtiles`,$$slots:{default:[Us]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let We="census_output_areas";function Ys(o){return o.show?o.kind:null}function Js(o){return{show:!0,kind:o}}function bt(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const gl=o=>o.toLocaleString();function Vs(o,e,l){let t,n=K.sequential_low_to_high,s=vt(We,{show:!1,kind:"percent_households_with_car"},Ys,Js);Y(o,s,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,n,s,f,i,a]}class Ks extends Z{constructor(e){super(),X(this,e,Vs,Ws,J,{})}}function Qs(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Zs(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Xs(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[Zs]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(", as of May 2024."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function xs(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&d(e)}}}function ei(o){let e,l;return e=new ie({props:{$$slots:{default:[xs,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ti(o){let e,l,t,n;const r=[q(yt),{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ei]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s}),e.$on("click",ri);const f=[q(`${yt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),g(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(yt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&se(q(`${yt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function ni(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:yt,title:li,$$slots:{help:[Xs],icon:[Qs]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new wt({props:{data:`${$e()}/v1/${yt}.geojson`,$$slots:{default:[ti]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let yt="combined_authorities",li="Combined authorities";function ri(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function oi(o,e,l){let t,n=K.combined_authorities,r=ce(yt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class si extends Z{constructor(e){super(),X(this,e,oi,ni,J,{})}}function ii(o){let e;return{c(){e=S(`DLUCH GIS
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ai(o){let e;return{c(){e=S(`here
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function fi(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[ii]},$$scope:{ctx:o}}}),s=new re({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ai]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=y("span"),l=y("p"),t=S("The 2019 English IMD scores come from "),b(n.$$.fragment),r=S(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),b(s.$$.fragment),f=S("."),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),$(e,i),w(a,e,null),u=!0},p(c,p){const h={};p&64&&(h.$$scope={dirty:p,ctx:c}),n.$set(h);const k={};p&64&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(s),v(a)}}}function ui(o){let e,l,t;return l=new Ee({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ci(o){let e,l=o[5].LSOA11CD+"",t,n,r,s=o[5].score+"",f,i,a,u,c,p=o[5].rank.toLocaleString()+"",h,k;return{c(){e=y("p"),t=S(l),n=S(` has an IMD score of
        `),r=y("b"),f=S(s),i=L(),a=y("p"),u=S("Rank: "),c=y("b"),h=S(p),k=S(`
        / 32,844 LSOAs`)},m(T,C){g(T,e,C),$(e,t),$(e,n),$(e,r),$(r,f),g(T,i,C),g(T,a,C),$(a,u),$(a,c),$(c,h),$(a,k)},p(T,C){C&32&&l!==(l=T[5].LSOA11CD+"")&&A(t,l),C&32&&s!==(s=T[5].score+"")&&A(f,s),C&32&&p!==(p=T[5].rank.toLocaleString()+"")&&A(h,p)},d(T){T&&(d(e),d(i),d(a))}}}function $i(o){let e,l;return e=new ie({props:{$$slots:{default:[ci,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function pi(o){let e,l,t,n;const r=[q(Ye),{sourceLayer:Ye},{paint:{"fill-color":ve(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[$i]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s});const f=[q(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),g(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?ne(r,[u&0&&se(q(Ye)),u&0&&{sourceLayer:Ye},u&6&&{paint:{"fill-color":ve(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?ne(f,[u&0&&se(q(`${Ye}-outline`)),u&0&&{sourceLayer:Ye},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function mi(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ye,title:_i,$$slots:{controls:[ui],help:[fi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ye}.pmtiles`,$$slots:{default:[pi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ye="imd",_i="Indices of Multiple Deprivation";function gi(o,e,l){let t,n=K.sequential_low_to_high,r=[0,2,4,6,8,10],s=ce(Ye);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class di extends Z{constructor(e){super(),X(this,e,gi,mi,J,{})}}function hi(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function bi(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function wi(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[bi]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(", as of May 2024."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function vi(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&d(e)}}}function ki(o){let e,l;return e=new ie({props:{$$slots:{default:[vi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function yi(o){let e,l,t,n;const r=[q(St),{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ki]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s}),e.$on("click",Ci);const f=[q(`${St}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),g(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(St)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&se(q(`${St}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Si(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:St,title:Ti,$$slots:{help:[wi],icon:[hi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new wt({props:{data:`${$e()}/v1/${St}.geojson`,$$slots:{default:[yi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let St="local_authority_districts",Ti="Local Authority Districts";function Ci(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function Li(o,e,l){let t,n=K.local_authority_districts,r=ce(St);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ii extends Z{constructor(e){super(),X(this,e,Li,Si,J,{})}}function Mi(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Oi(o){let e;return{c(){e=S(`local authority
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ji(o){let e;return{c(){e=S(`national park authorit
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ni(o){let e;return{c(){e=S(`development corporation
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Pi(o){let e;return{c(){e=S("this map")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ri(o){let e;return{c(){e=S(`planning.data.gov.uk
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Di(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,T,C,I,M,N,P,O,j,R;return n=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Oi]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ji]},$$scope:{ctx:o}}}),i=new re({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ni]},$$scope:{ctx:o}}}),k=new re({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Pi]},$$scope:{ctx:o}}}),N=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ri]},$$scope:{ctx:o}}}),j=new Te({}),{c(){e=y("span"),l=y("p"),t=S("LPAs may be a "),b(n.$$.fragment),r=S(", "),b(s.$$.fragment),f=S("y, or "),b(i.$$.fragment),a=S("."),u=L(),c=y("p"),p=y("strong"),h=S(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),b(k.$$.fragment),T=S(" to get more details."),C=L(),I=y("p"),M=S("Data from ONS Geography via "),b(N.$$.fragment),P=S(", as of November 2022."),O=L(),b(j.$$.fragment),G(e,"slot","help")},m(D,z){g(D,e,z),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),w(i,l,null),$(l,a),$(e,u),$(e,c),$(c,p),$(p,h),w(k,p,null),$(p,T),$(e,C),$(e,I),$(I,M),w(N,I,null),$(I,P),$(e,O),w(j,e,null),R=!0},p(D,z){const V={};z&32&&(V.$$scope={dirty:z,ctx:D}),n.$set(V);const ae={};z&32&&(ae.$$scope={dirty:z,ctx:D}),s.$set(ae);const F={};z&32&&(F.$$scope={dirty:z,ctx:D}),i.$set(F);const x={};z&32&&(x.$$scope={dirty:z,ctx:D}),k.$set(x);const H={};z&32&&(H.$$scope={dirty:z,ctx:D}),N.$set(H)},i(D){R||(m(n.$$.fragment,D),m(s.$$.fragment,D),m(i.$$.fragment,D),m(k.$$.fragment,D),m(N.$$.fragment,D),m(j.$$.fragment,D),R=!0)},o(D){_(n.$$.fragment,D),_(s.$$.fragment,D),_(i.$$.fragment,D),_(k.$$.fragment,D),_(N.$$.fragment,D),_(j.$$.fragment,D),R=!1},d(D){D&&d(e),v(n),v(s),v(i),v(k),v(N),v(j)}}}function Gi(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&d(e)}}}function Fi(o){let e,l;return e=new ie({props:{$$slots:{default:[Gi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ai(o){let e,l,t,n;const r=[q(Je),{sourceLayer:Je},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Fi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s});const f=[q(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),g(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(Je)),u&0&&{sourceLayer:Je},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&se(q(`${Je}-outline`)),u&0&&{sourceLayer:Je},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function qi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Je,title:zi,$$slots:{help:[Di],icon:[Mi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Je}.pmtiles`,$$slots:{default:[Ai]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Je="local_planning_authorities",zi="Local Planning Authorities";function Hi(o,e,l){let t,n=K.local_planning_authorities,r=ce(Je);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Bi extends Z{constructor(e){super(),X(this,e,Hi,qi,J,{})}}function Ei(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ui(o){let e;return{c(){e=S(`Ordnance Survey Boundary-Line
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Wi(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Ui]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(", as of October 2024."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Yi(o){let e,l=o[4].Name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&A(t,l)},d(n){n&&d(e)}}}function Ji(o){let e,l;return e=new ie({props:{$$slots:{default:[Yi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Vi(o){let e,l,t,n;const r=[q(Ve),{sourceLayer:Ve},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ji]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s}),e.$on("click",Zi);const f=[q(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),g(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(Ve)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&se(q(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ki(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ve,title:Qi,$$slots:{help:[Wi],icon:[Ei]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ve}.pmtiles`,$$slots:{default:[Vi]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ve="parliamentary_constituencies",Qi="Parliamentary constituencies";function Zi(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Xi(o,e,l){let t,n=K.parliamentary_constituencies,r=ce(Ve);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class xi extends Z{constructor(e){super(),X(this,e,Xi,Ki,J,{})}}function ea(o){let e;return{c(){e=S(`DEFRA
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ta(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[ea]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Most layers show air quality data from "),b(n.$$.fragment),r=S(`. The measurements are annual means, in units of Âµgm
      `),s=y("sup"),s.textContent="3",f=S(`
      . Note the particulate matter layers are not corrected for natural sources.`),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),$(l,s),$(l,f),$(e,i),w(a,e,null),u=!0},p(c,p){const h={};p&4096&&(h.$$scope={dirty:p,ctx:c}),n.$set(h)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(a)}}}function na(o){let e,l,t,n,r,s=o[3](o[0].pollutant)+"",f,i,a,u,c,p,h,k,T,C,I,M,N;function P(j){o[5](j)}let O={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return o[0].pollutant!==void 0&&(O.value=o[0].pollutant),l=new Wt({props:O}),B.push(()=>E(l,"value",P)),{c(){e=y("div"),b(l.$$.fragment),n=L(),r=y("p"),f=S(s),i=L(),a=y("div"),u=y("label"),c=S(`Opacity
        `),p=y("input"),h=L(),k=y("img"),G(p,"type","range"),G(p,"min","0"),G(p,"max","100"),Xt(k.src,T=o[4](o[0].pollutant))||G(k,"src",T),G(k,"width",150),G(k,"alt",C=`Legend for ${o[0].pollutant} layer`),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(j,R){g(j,e,R),w(l,e,null),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,u),$(u,c),$(u,p),tt(p,o[0].opacity),$(e,h),$(e,k),I=!0,M||(N=[mt(p,"change",o[6]),mt(p,"input",o[6])],M=!0)},p(j,R){const D={};!t&&R&1&&(t=!0,D.value=j[0].pollutant,U(()=>t=!1)),l.$set(D),(!I||R&1)&&s!==(s=j[3](j[0].pollutant)+"")&&A(f,s),R&1&&tt(p,j[0].opacity),(!I||R&1&&!Xt(k.src,T=j[4](j[0].pollutant)))&&G(k,"src",T),(!I||R&1&&C!==(C=`Legend for ${j[0].pollutant} layer`))&&G(k,"alt",C)},i(j){I||(m(l.$$.fragment,j),I=!0)},o(j){_(l.$$.fragment,j),I=!1},d(j){j&&d(e),v(l),M=!1,Gr(N)}}}function la(o){let e,l;const t=[q(sn),{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new co({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(sn)),s&1&&{paint:{"raster-opacity":r[0].opacity/100}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ra(o){let e,l,t,n,r;function s(i){o[7](i)}let f={name:sn,title:oa,$$slots:{controls:[na],help:[ta]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new Uo({props:{tiles:[o[1]],tileSize:256,$$slots:{default:[la]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&2&&(c.tiles=[i[1]]),a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let sn="pollution",oa="Pollution";function sa(o){return o.show?`${o.pollutant}/${o.opacity}`:null}function ia(o){let[e,l]=o.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function aa(o,e,l){let t,n,r,f=vt(sn,{show:!1,pollutant:"PM25_viridis",opacity:50},sa,ia);Y(o,f,T=>l(0,r=T));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(T){return t[1]}function u(T){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${C}`}function c(T){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${C}`}function p(T){o.$$.not_equal(r.pollutant,T)&&(r.pollutant=T,f.set(r))}function h(){r.opacity=xt(this.value),f.set(r)}function k(T){o.$$.not_equal(r.show,T)&&(r.show=T,f.set(r))}return o.$$.update=()=>{o.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),o.$$.dirty&1&&l(1,n=u(r.pollutant))},[r,n,f,a,c,p,h,k]}class fa extends Z{constructor(e){super(),X(this,e,aa,ra,J,{})}}function ua(o){let e;return{c(){e=S(`DEFRA
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ca(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[ua]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=y("span"),l=y("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=y("p"),r=S("Data from June 2019, produced by "),b(s.$$.fragment),f=S(". See there for methodology details"),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),w(s,n,null),$(n,f),$(e,i),w(a,e,null),u=!0},p(c,p){const h={};p&32&&(h.$$scope={dirty:p,ctx:c}),s.$set(h)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(s),v(a)}}}function $a(o){let e,l,t;return l=new Ee({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function pa(o){let e,l=o[4].noiseclass+"",t,n,r=dl(o[4].noiseclass)+"",s,f;return{c(){e=y("p"),t=S(l),n=S(" dB ("),s=S(r),f=S(")")},m(i,a){g(i,e,a),$(e,t),$(e,n),$(e,s),$(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&A(t,l),a&16&&r!==(r=dl(i[4].noiseclass)+"")&&A(s,r)},d(i){i&&d(e)}}}function ma(o){let e,l;return e=new ie({props:{$$slots:{default:[pa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function _a(o){let e,l;const t=[q(Tt),{sourceLayer:Tt},{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":te(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ma]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&se(q(Tt)),s&0&&{sourceLayer:Tt},s&2&&{paint:{"fill-color":Ze(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":te(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ga(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Tt,title:da,$$slots:{controls:[$a],help:[ca]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Tt}.pmtiles`,$$slots:{default:[_a]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Tt="road_noise",da="Road noise";function dl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function ha(o,e,l){let t,n=[K.sequential_low_to_high[0],K.sequential_low_to_high[2],K.sequential_low_to_high[4]],r=ce(Tt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ba extends Z{constructor(e){super(),X(this,e,ha,ga,J,{})}}function hl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[11]=e[l][1],t[12]=e[l][2],t[13]=e,t[14]=l,t}function wa(o){let e;return{c(){e=S(`rowmaps.com
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function va(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://www.rowmaps.com",$$slots:{default:[wa]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=y("span"),l=y("p"),t=S("These public rights of way are aggregated from 137 authorities, thanks to "),b(n.$$.fragment),r=S(`. The licenses for each authority may vary, but most use
      the Open Government License v3 or Creative Commons.`),s=L(),f=y("p"),f.textContent="This data is current as of 15 November, 2024.",i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),w(a,e,null),u=!0},p(c,p){const h={};p&32768&&(h.$$scope={dirty:p,ctx:c}),n.$set(h)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(a)}}}function ka(o){let e,l,t=o[11]+"",n,r,s;return e=new Se({props:{color:o[12]}}),{c(){b(e.$$.fragment),l=L(),n=S(t),r=L()},m(f,i){w(e,f,i),g(f,l,i),g(f,n,i),g(f,r,i),s=!0},p:Q,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n),d(r)),v(e,f)}}}function bl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[ka]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Be({props:r}),B.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){o=s;const i={};f&32768&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function ya(o){let e,l,t=me(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=bl(hl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ge()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f&5){t=me(s[2]);let i;for(i=0;i<t.length;i+=1){const a=hl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=bl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),qe(n,s)}}}function Sa(o){let e,l,t;return l=new Ge({props:{small:!0,$$slots:{default:[ya]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ta(o){let e,l=o[9].kind+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&512&&l!==(l=n[9].kind+"")&&A(t,l)},d(n){n&&d(e)}}}function Ca(o){let e,l;return e=new ie({props:{$$slots:{default:[Ta,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&33280&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function La(o){let e,l;const t=[q(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Ze(["get","kind"],{footpath:K.rights_of_way.footpath,bridleway:K.rights_of_way.bridleway,"restricted byway":K.rights_of_way.restricted_byway,"byway open to all traffic":K.rights_of_way.boat},"red"),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])}];let n={$$slots:{default:[Ca]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&se(q(Ct)),s&0&&{sourceLayer:Ct},t[2],t[3],t[4],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])}]):{};s&32768&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ia(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ct,title:Ma,$$slots:{controls:[Sa],help:[va]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ct}.pmtiles`,$$slots:{default:[La]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32769&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&32769&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ct="rights_of_way",Ma="Rights of Way";function Oa(o){return{show:!0,footpath:o.includes("footpath"),bridleway:o.includes("bridleway"),restricted_byway:o.includes("restricted_byway"),boat:o.includes("boat")}}function ja(o,e,l){let t,n=["footpath","bridleway","restricted_byway","boat"],r={show:!1,footpath:!0,bridleway:!0,restricted_byway:!0,boat:!0};function s(p){return p.show?n.filter(h=>p[h]).join(","):null}let f=vt(Ct,r,s,Oa);Y(o,f,p=>l(0,t=p));let i=[["footpath","Footpath",K.rights_of_way.footpath],["bridleway","Bridleway",K.rights_of_way.bridleway],["restricted_byway","Restricted byway",K.rights_of_way.restricted_byway],["boat","Byway open to all traffic",K.rights_of_way.boat]];function a(p){let h=n.filter(k=>p[k]).map(k=>({footpath:"footpath",bridleway:"bridleway",restricted_byway:"restricted byway",boat:"byway open to all traffic"})[k]);return["in",["get","kind"],["literal",h]]}function u(p,h){o.$$.not_equal(t[h],p)&&(t[h]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class Na extends Z{constructor(e){super(),X(this,e,ja,Ia,J,{})}}function Pa(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ra(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Da(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ra]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(", as of May 2023."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Ga(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&d(e)}}}function Fa(o){let e,l;return e=new ie({props:{$$slots:{default:[Ga,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Aa(o){let e,l,t,n;const r=[q(Ke),{sourceLayer:Ke},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Fa]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new Ae({props:s}),e.$on("click",Ha);const f=[q(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new _e({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),g(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?ne(r,[u&0&&se(q(Ke)),u&0&&{sourceLayer:Ke},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&3?ne(f,[u&0&&se(q(`${Ke}-outline`)),u&0&&{sourceLayer:Ke},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function qa(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ke,title:za,$$slots:{help:[Da],icon:[Pa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ke}.pmtiles`,$$slots:{default:[Aa]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ke="wards",za="Wards";function Ha(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Ba(o,e,l){let t,n=K.wards,r=ce(Ke);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Ea extends Z{constructor(e){super(),X(this,e,Ba,qa,J,{})}}function Ua(o){let e;return{c(){e=S("Open Data Commons Open Database License")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Wa(o){let e,l,t,n;return t=new re({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Ua]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("License: "),b(t.$$.fragment)},m(r,s){g(r,e,s),$(e,l),w(t,e,null),n=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&d(e),v(t)}}}class lt extends Z{constructor(e){super(),X(this,e,null,Wa,J,{})}}function Ya(o){let e,l,t;return l=new Se({props:{color:K.bus_route_with_lane}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ja(o){let e;return{c(){e=S(`GTFS
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Va(o){let e,l,t,n,r,s,f,i,a,u;return s=new re({props:{href:"https://gtfs.org",$$slots:{default:[Ja]},$$scope:{ctx:o}}}),a=new lt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=y("p"),r=S("Note this data is from OpenStreetMap (as of 20 October 2024), not "),b(s.$$.fragment),f=S(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(e,t),$(e,n),$(n,r),w(s,n,null),$(n,f),$(e,i),w(a,e,null),u=!0},p(c,p){const h={};p&16&&(h.$$scope={dirty:p,ctx:c}),s.$set(h)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(s),v(a)}}}function Ka(o){let e;return{c(){e=y("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Qa(o){let e;return{c(){e=y("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Za(o){let e;function l(r,s){return r[3].has_bus_lane?Qa:Ka}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function Xa(o){let e,l;return e=new ie({props:{$$slots:{default:[Za,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function xa(o){let e,l;const t=[q(Lt),{sourceLayer:Lt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],K.bus_route_with_lane,K.bus_route_without_lane],"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Xa]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(Lt)),s&0&&{sourceLayer:Lt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ef(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Lt,title:tf,$$slots:{help:[Va],icon:[Ya]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Lt}.pmtiles`,$$slots:{default:[xa]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Lt="bus_routes",tf="Bus routes";function nf(o,e,l){let t,n=ce(Lt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class lf extends Z{constructor(e){super(),X(this,e,nf,ef,J,{})}}function wl(o){const e=_f(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function vl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function rf(o){let e,l,t,n,r,s,f,i,a;return i=new lt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=y("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),s=y("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),b(i.$$.fragment),G(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),w(i,e,null),a=!0},p:Q,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){_(i.$$.fragment,u),a=!1},d(u){u&&d(e),v(i)}}}function of(o){let e,l,t=o[13]+"",n,r,s;return e=new Se({props:{color:o[14]}}),{c(){b(e.$$.fragment),l=L(),n=S(t),r=L()},m(f,i){w(e,f,i),g(f,l,i),g(f,n,i),g(f,r,i),s=!0},p:Q,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n),d(r)),v(e,f)}}}function kl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[of]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Be({props:r}),B.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function sf(o){let e,l,t=me(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=kl(vl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ge()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f&5){t=me(s[2]);let i;for(i=0;i<t.length;i+=1){const a=vl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=kl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),qe(n,s)}}}function af(o){let e,l,t;return l=new Ge({props:{small:!0,$$slots:{default:[sf]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ff(o){wl(o);let e,l=o[10]+"",t,n,r,s,f,i=o[11]+"",a,u,c,p,h=o[12]+"",k;return{c(){e=y("h2"),t=S(l),n=L(),r=y("p"),s=S("Direction: "),f=y("b"),a=L(),u=y("p"),c=S("Width: "),p=y("b"),k=S(h)},m(T,C){g(T,e,C),$(e,t),g(T,n,C),g(T,r,C),$(r,s),$(r,f),f.innerHTML=i,g(T,a,C),g(T,u,C),$(u,c),$(u,p),$(p,k)},p(T,C){wl(T),C&512&&l!==(l=T[10]+"")&&A(t,l),C&512&&i!==(i=T[11]+"")&&(f.innerHTML=i),C&512&&h!==(h=T[12]+"")&&A(k,h)},d(T){T&&(d(e),d(n),d(r),d(a),d(u))}}}function uf(o){let e,l;return e=new ie({props:{$$slots:{default:[ff,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function cf(o){let e,l;const t=[q(It),{sourceLayer:It},{paint:{"line-color":Ze(["get","kind"],{track:K.cycle_paths.track,lane:K.cycle_paths.lane,shared_use_segregated:K.cycle_paths.shared_use_segregated,shared_use_unsegregated:K.cycle_paths.shared_use_unsegregated},"red"),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[uf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),e.$on("click",gf),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&se(q(It)),s&0&&{sourceLayer:It},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function $f(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:It,title:pf,$$slots:{controls:[af],help:[rf]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${It}.pmtiles`,$$slots:{default:[cf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let It="cycle_paths",pf="Cycle paths";function mf(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function _f(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function gf(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function df(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(p){return p.show?n.filter(h=>p[h]).join(","):null}let f=vt(It,r,s,mf);Y(o,f,p=>l(0,t=p));let i=[["track","Separated tracks",K.cycle_paths.track],["lane","Unprotected lanes",K.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",K.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",K.cycle_paths.shared_use_unsegregated]];function a(p){let h=n.filter(k=>p[k]);return["in",["get","kind"],["literal",h]]}function u(p,h){o.$$.not_equal(t[h],p)&&(t[h]=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,f,i,a,u,c]}class hf extends Z{constructor(e){super(),X(this,e,df,$f,J,{})}}function bf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function wf(o){let e;return{c(){e=S(`Major Road Network
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function vf(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[wf]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from the "),b(n.$$.fragment),r=S(", as of September 2021."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function kf(o){let e,l=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&A(t,l)},d(n){n&&d(e)}}}function yf(o){let e,l;return e=new ie({props:{$$slots:{default:[kf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Sf(o){let e,l;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[yf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&se(q(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Tf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Mt,title:Cf,$$slots:{help:[vf],icon:[bf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Mt}.pmtiles`,$$slots:{default:[Sf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Mt="mrn",Cf="Major Road Network";function Lf(o,e,l){let t,n=K.mrn,r=ce(Mt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class If extends Z{constructor(e){super(),X(this,e,Lf,Tf,J,{})}}function Mf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Of(o){let e;return{c(){e=S(`OS Open Roads
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function jf(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Of]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),b(n.$$.fragment),r=S(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Nf(o){let e,l=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&A(t,l)},d(n){n&&d(e)}}}function Pf(o){let e,l;return e=new ie({props:{$$slots:{default:[Nf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Rf(o){let e,l;const t=[q(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Pf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&se(q(Ot)),s&0&&{sourceLayer:Ot},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Df(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ot,title:Gf,$$slots:{help:[jf],icon:[Mf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ot}.pmtiles`,$$slots:{default:[Rf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ot="srn",Gf="Strategic Road Network";function Ff(o,e,l){let t,n=K.srn,r=ce(Ot);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Af extends Z{constructor(e){super(),X(this,e,Ff,Df,J,{})}}function qf(o){let e,l,t;return l=new Se({props:{color:o[1]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function zf(o){let e;return{c(){e=S(`National Cycle Network
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Hf(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[zf]},$$scope:{ctx:o}}}),f=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from Sustrans about the "),b(n.$$.fragment),r=S(", downloaded on 22/01/2024."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function yl(o){let e,l,t,n=o[4].Desc_+"",r;return{c(){e=y("li"),l=S("Description: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Desc_+"")&&A(r,n)},d(s){s&&d(e)}}}function Sl(o){let e,l,t,n=o[4].Greenway+"",r;return{c(){e=y("li"),l=S("Is greenway: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Greenway+"")&&A(r,n)},d(s){s&&d(e)}}}function Tl(o){let e,l,t,n=o[4].RouteType+"",r;return{c(){e=y("li"),l=S("Route type: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteType+"")&&A(r,n)},d(s){s&&d(e)}}}function Cl(o){let e,l,t,n=o[4].RouteNo+"",r;return{c(){e=y("li"),l=S("Route number: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteNo+"")&&A(r,n)},d(s){s&&d(e)}}}function Ll(o){let e,l,t,n=o[4].RouteCat+"",r;return{c(){e=y("li"),l=S("Route Category: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteCat+"")&&A(r,n)},d(s){s&&d(e)}}}function Il(o){let e,l,t,n=o[4].OpenStatus+"",r;return{c(){e=y("li"),l=S("Open Status: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].OpenStatus+"")&&A(r,n)},d(s){s&&d(e)}}}function Ml(o){let e,l,t,n=o[4].Surface+"",r;return{c(){e=y("li"),l=S("Surface: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Surface+"")&&A(r,n)},d(s){s&&d(e)}}}function Ol(o){let e,l,t,n=o[4].Quality+"",r;return{c(){e=y("li"),l=S("Quality: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].Quality+"")&&A(r,n)},d(s){s&&d(e)}}}function jl(o){let e,l,t,n=o[4].RoadClass+"",r;return{c(){e=y("li"),l=S("Road Class: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&16&&n!==(n=s[4].RoadClass+"")&&A(r,n)},d(s){s&&d(e)}}}function Bf(o){let e,l,t,n,r,s,f,i,a,u=o[4].Desc_&&yl(o),c=o[4].Greenway&&Sl(o),p=o[4].RouteType&&Tl(o),h=o[4].RouteNo&&Cl(o),k=o[4].RouteCat&&Ll(o),T=o[4].OpenStatus&&Il(o),C=o[4].Surface&&Ml(o),I=o[4].Quality&&Ol(o),M=o[4].RoadClass&&jl(o);return{c(){e=y("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),p&&p.c(),n=L(),h&&h.c(),r=L(),k&&k.c(),s=L(),T&&T.c(),f=L(),C&&C.c(),i=L(),I&&I.c(),a=L(),M&&M.c()},m(N,P){g(N,e,P),u&&u.m(e,null),$(e,l),c&&c.m(e,null),$(e,t),p&&p.m(e,null),$(e,n),h&&h.m(e,null),$(e,r),k&&k.m(e,null),$(e,s),T&&T.m(e,null),$(e,f),C&&C.m(e,null),$(e,i),I&&I.m(e,null),$(e,a),M&&M.m(e,null)},p(N,P){N[4].Desc_?u?u.p(N,P):(u=yl(N),u.c(),u.m(e,l)):u&&(u.d(1),u=null),N[4].Greenway?c?c.p(N,P):(c=Sl(N),c.c(),c.m(e,t)):c&&(c.d(1),c=null),N[4].RouteType?p?p.p(N,P):(p=Tl(N),p.c(),p.m(e,n)):p&&(p.d(1),p=null),N[4].RouteNo?h?h.p(N,P):(h=Cl(N),h.c(),h.m(e,r)):h&&(h.d(1),h=null),N[4].RouteCat?k?k.p(N,P):(k=Ll(N),k.c(),k.m(e,s)):k&&(k.d(1),k=null),N[4].OpenStatus?T?T.p(N,P):(T=Il(N),T.c(),T.m(e,f)):T&&(T.d(1),T=null),N[4].Surface?C?C.p(N,P):(C=Ml(N),C.c(),C.m(e,i)):C&&(C.d(1),C=null),N[4].Quality?I?I.p(N,P):(I=Ol(N),I.c(),I.m(e,a)):I&&(I.d(1),I=null),N[4].RoadClass?M?M.p(N,P):(M=jl(N),M.c(),M.m(e,null)):M&&(M.d(1),M=null)},d(N){N&&d(e),u&&u.d(),c&&c.d(),p&&p.d(),h&&h.d(),k&&k.d(),T&&T.d(),C&&C.d(),I&&I.d(),M&&M.d()}}}function Ef(o){let e,l;return e=new ie({props:{$$slots:{default:[Bf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Uf(o){let e,l;const t=[q(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Ef]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&3?ne(t,[s&0&&se(q(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Wf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:jt,title:Yf,$$slots:{help:[Hf],icon:[qf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${jt}.pmtiles`,$$slots:{default:[Uf]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let jt="national_cycle_network",Yf="National Cycle Network";function Jf(o,e,l){let t,n=K.national_cycle_network,r=ce(jt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Vf extends Z{constructor(e){super(),X(this,e,Jf,Wf,J,{})}}function Nl(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function Kf(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Qf(o){let e,l,t,n,r,s,f,i,a,u,c,p;return u=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Kf]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=y("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),s=y("p"),s.textContent="Data valid as of 1 January, 2024",f=L(),i=y("p"),a=S(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),b(u.$$.fragment),c=S("."),G(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(e,f),$(e,i),$(i,a),w(u,i,null),$(i,c),p=!0},p(h,k){const T={};k&4096&&(T.$$scope={dirty:k,ctx:h}),u.$set(T)},i(h){p||(m(u.$$.fragment,h),p=!0)},o(h){_(u.$$.fragment,h),p=!1},d(h){h&&d(e),v(u)}}}function Zf(o){let e,l,t;return l=new Ee({props:{colorScale:o[1],limits:o[3]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Xf(o){let e,l,t=an(o[6].angle+o[9])+"",n;return{c(){e=y("p"),l=new Ut(!1),n=S(` side of the road: no pavement
          `),l.a=n},m(r,s){g(r,e,s),l.m(t,e),$(e,n)},p(r,s){s&64&&t!==(t=an(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&d(e)}}}function xf(o){let e,l,t=an(o[6].angle+o[9])+"",n,r,s=o[7]+"",f,i,a,u=o[8]+"",c,p;return{c(){e=y("p"),l=new Ut(!1),n=S(` side of the road:
            `),r=y("b"),f=S(s),i=S(`
            m average,
            `),a=y("b"),c=S(u),p=S(`
            m minimum
          `),l.a=n},m(h,k){g(h,e,k),l.m(t,e),$(e,n),$(e,r),$(r,f),$(e,i),$(e,a),$(a,c),$(e,p)},p(h,k){k&64&&t!==(t=an(h[6].angle+h[9])+"")&&l.p(t),k&64&&s!==(s=h[7]+"")&&A(f,s),k&64&&u!==(u=h[8]+"")&&A(c,u)},d(h){h&&d(e)}}}function Pl(o){let e;function l(r,s){return r[7]?xf:Xf}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function eu(o){let e,l=me([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Pl(Nl(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ge()},m(n,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(n,r);g(n,e,r)},p(n,r){if(r&64){l=me([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=Nl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Pl(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(n){n&&d(e),qe(t,n)}}}function tu(o){let e,l;return e=new ie({props:{openOn:"hover",$$slots:{default:[eu,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function nu(o){let e,l;const t=[q(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[tu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Nt)),s&0&&{sourceLayer:Nt},t[2],t[3],s&6&&{paint:{"line-color":ve(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Fe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function lu(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Nt,title:ru,$$slots:{controls:[Zf],help:[Qf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${tn()}/v1/${Nt}.pmtiles`,$$slots:{default:[nu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Nt="pavement_widths",ru="OS Pavement widths";function ou(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function an(o){return`${ou(o)} <span style="display: inline-block; rotate: ${o}deg">â¬†</span>`}function su(o,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=ce(Nt);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class iu extends Z{constructor(e){super(),X(this,e,su,lu,J,{})}}function au(o){let e;return{c(){e=S("the PCT website")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function fu(o){let e;return{c(){e=S("2017 journal article")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function uu(o){let e,l,t,n,r,s,f,i,a,u,c,p;return i=new re({props:{href:"https://www.pct.bike",$$slots:{default:[au]},$$scope:{ctx:o}}}),u=new re({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[fu]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=y("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),s=y("p"),f=S("See "),b(i.$$.fragment),a=S(" and "),b(u.$$.fragment),c=S(" for details on methodology and data sources."),G(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),w(i,s,null),$(s,a),w(u,s,null),$(s,c),p=!0},p(h,k){const T={};k&1024&&(T.$$scope={dirty:k,ctx:h}),i.$set(T);const C={};k&1024&&(C.$$scope={dirty:k,ctx:h}),u.$set(C)},i(h){p||(m(i.$$.fragment,h),m(u.$$.fragment,h),p=!0)},o(h){_(i.$$.fragment,h),_(u.$$.fragment,h),p=!1},d(h){h&&d(e),v(i),v(u)}}}function cu(o){let e,l,t,n,r,s,f,i,a;l=new Ee({props:{colorScale:o[1],limits:o[2]}});function u(k){o[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),n=new Ln({props:c}),B.push(()=>E(n,"value",u));function p(k){o[6](k)}let h={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(h.value=o[0].scenario),f=new Wt({props:h}),B.push(()=>E(f,"value",p)),{c(){e=y("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(k,T){g(k,e,T),w(l,e,null),$(e,t),w(n,e,null),$(e,s),w(f,e,null),a=!0},p(k,T){const C={};!r&&T&1&&(r=!0,C.value=k[0].tripPurpose,U(()=>r=!1)),n.$set(C);const I={};!i&&T&1&&(i=!0,I.value=k[0].scenario,U(()=>i=!1)),f.$set(I)},i(k){a||(m(l.$$.fragment,k),m(n.$$.fragment,k),m(f.$$.fragment,k),a=!0)},o(k){_(l.$$.fragment,k),_(n.$$.fragment,k),_(f.$$.fragment,k),a=!1},d(k){k&&d(e),v(l),v(n),v(f)}}}function $u(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Ut(!1),t=ge(),e.a=t},m(n,r){e.m(l,n,r),g(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(d(t),e.d())}}}function pu(o){let e,l;return e=new ie({props:{$$slots:{default:[$u,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function mu(o){let e,l;const t=[q(st),{sourceLayer:st},{paint:{"line-color":ve(["get",o[0].scenario],o[2],o[1]),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==st?"visible":"none"}}];let n={$$slots:{default:[pu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(st)),s&0&&{sourceLayer:st},s&7&&{paint:{"line-color":ve(["get",r[0].scenario],r[2],r[1]),"line-width":Fe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==st?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function _u(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Ut(!1),t=ge(),e.a=t},m(n,r){e.m(l,n,r),g(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(d(t),e.d())}}}function gu(o){let e,l;return e=new ie({props:{$$slots:{default:[_u,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function du(o){let e,l;const t=[q(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get",o[0].scenario],o[2],o[1]),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==kt?"visible":"none"}}];let n={$$slots:{default:[gu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(kt)),s&0&&{sourceLayer:kt},t[2],t[3],s&7&&{paint:{"line-color":ve(["get",r[0].scenario],r[2],r[1]),"line-width":Fe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==kt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function hu(o){let e,l,t,n,r,s,f;function i(u){o[7](u)}let a={name:Yr,title:bu,$$slots:{controls:[cu],help:[uu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new fe({props:a}),B.push(()=>E(e,"show",i)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${st}.pmtiles`,$$slots:{default:[mu]},$$scope:{ctx:o}}}),s=new pe({props:{url:`pmtiles://${$e()}/v1/${kt}.pmtiles`,$$slots:{default:[du]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(u,c){w(e,u,c),g(u,t,c),w(n,u,c),g(u,r,c),w(s,u,c),f=!0},p(u,[c]){const p={};c&1025&&(p.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,p.show=u[0].show,U(()=>l=!1)),e.$set(p);const h={};c&1025&&(h.$$scope={dirty:c,ctx:u}),n.$set(h);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),s.$set(k)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(e.$$.fragment,u),_(n.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(t),d(r)),v(e,u),v(n,u),v(s,u)}}}let Yr="pct",st="pct_commute",kt="pct_school",bu="Propensity to Cycle Tool";function wu(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function vu(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function ku(o,e,l){let t,n=K.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=vt(Yr,{show:!1,tripPurpose:st,scenario:"baseline"},wu,vu);Y(o,f,p=>l(0,t=p));function i(p){let h=p.baseline,k=p.gov_target,T=p.go_dutch,C=`<h2>Trip purpose: ${t.tripPurpose==st?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${h.toLocaleString()}</b></p>`,h==0)C+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let I=(k/h).toFixed(1),M=(T/h).toFixed(1);C+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${M}x</b> of baseline)</p>`}return C}function a(p){o.$$.not_equal(t.tripPurpose,p)&&(t.tripPurpose=p,f.set(t))}function u(p){o.$$.not_equal(t.scenario,p)&&(t.scenario=p,f.set(t))}function c(p){o.$$.not_equal(t.show,p)&&(t.show=p,f.set(t))}return[t,n,r,f,i,a,u,c]}class yu extends Z{constructor(e){super(),X(this,e,ku,hu,J,{})}}function Su(o){let e;return{c(){e=S("Basemap")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Tu(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Cu(o){let e,l,t,n,r,s,f,i,a,u,c,p,h;return n=new re({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Su]},$$scope:{ctx:o}}}),c=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Tu]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),t=S("The average speed data is collected over a six-month period by "),b(n.$$.fragment),r=S(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=L(),f=y("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=y("p"),u=S(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),b(c.$$.fragment),p=S("."),G(e,"slot","help")},m(k,T){g(k,e,T),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),$(e,a),$(a,u),w(c,a,null),$(a,p),h=!0},p(k,T){const C={};T&512&&(C.$$scope={dirty:T,ctx:k}),n.$set(C);const I={};T&512&&(I.$$scope={dirty:T,ctx:k}),c.$set(I)},i(k){h||(m(n.$$.fragment,k),m(c.$$.fragment,k),h=!0)},o(k){_(n.$$.fragment,k),_(c.$$.fragment,k),h=!1},d(k){k&&d(e),v(n),v(c)}}}function Lu(o){let e,l,t,n,r,s;l=new Ee({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),n=new Ln({props:i}),B.push(()=>E(n,"value",f)),{c(){e=y("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(a,u){g(a,e,u),w(l,e,null),$(e,t),w(n,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,U(()=>r=!1)),n.$set(c)},i(a){s||(m(l.$$.fragment,a),m(n.$$.fragment,a),s=!0)},o(a){_(l.$$.fragment,a),_(n.$$.fragment,a),s=!1},d(a){a&&d(e),v(l),v(n)}}}function Iu(o){let e,l,t=o[8].indicative_mph+"",n,r,s,f,i,a=o[8].highest_mph+"",u,c,p=o[4][o[8].highest_description]+"",h,k;return{c(){e=y("p"),l=S("Posted speed limit: "),n=S(t),r=S(" mph"),s=L(),f=y("p"),i=S("Highest average speed: "),u=S(a),c=S(" mph (during "),h=S(p),k=S(")")},m(T,C){g(T,e,C),$(e,l),$(e,n),$(e,r),g(T,s,C),g(T,f,C),$(f,i),$(f,u),$(f,c),$(f,h),$(f,k)},p(T,C){C&256&&t!==(t=T[8].indicative_mph+"")&&A(n,t),C&256&&a!==(a=T[8].highest_mph+"")&&A(u,a),C&256&&p!==(p=T[4][T[8].highest_description]+"")&&A(h,p)},d(T){T&&(d(e),d(s),d(f))}}}function Mu(o){let e,l;return e=new ie({props:{$$slots:{default:[Iu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ou(o){let e,l;const t=[q(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get",o[0].kind],o[2],o[1]),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[Mu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Pt)),s&0&&{sourceLayer:Pt},t[2],t[3],s&7&&{paint:{"line-color":ve(["get",r[0].kind],r[2],r[1]),"line-width":Fe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ju(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Pt,title:Nu,$$slots:{controls:[Lu],help:[Cu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${tn()}/v1/${Pt}.pmtiles`,$$slots:{default:[Ou]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Pt="road_speeds",Nu="OS Speeds";function Pu(o){return o.show?o.kind:null}function Ru(o){return{show:!0,kind:o}}function Du(o,e,l){let t,n=K.sequential_low_to_high,r=[0,20,30,40,50,90],f=vt(Pt,{show:!1,kind:"indicative_mph"},Pu,Ru);Y(o,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class Gu extends Z{constructor(e){super(),X(this,e,Du,ju,J,{})}}function Fu(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Au(o){let e,l,t,n,r,s,f,i,a,u;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Fu]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=y("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),s=y("p"),f=S(`License: Contains OS data Â© Crown copyright and database right 2023.
      Made available under the `),b(i.$$.fragment),a=S("."),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),w(i,s,null),$(s,a),u=!0},p(c,p){const h={};p&64&&(h.$$scope={dirty:p,ctx:c}),i.$set(h)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){_(i.$$.fragment,c),u=!1},d(c){c&&d(e),v(i)}}}function qu(o){let e,l,t;return l=new Ee({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function zu(o){let e,l,t,n=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",p,h;return{c(){e=y("p"),l=S("Average width: "),t=y("b"),r=S(n),s=S(`
        meters`),f=L(),i=y("p"),a=S("Minimum width: "),u=y("b"),p=S(c),h=S(`
        meters`)},m(k,T){g(k,e,T),$(e,l),$(e,t),$(t,r),$(e,s),g(k,f,T),g(k,i,T),$(i,a),$(i,u),$(u,p),$(i,h)},p(k,T){T&32&&n!==(n=k[5].average+"")&&A(r,n),T&32&&c!==(c=k[5].minimum+"")&&A(p,c)},d(k){k&&(d(e),d(f),d(i))}}}function Hu(o){let e,l;return e=new ie({props:{$$slots:{default:[zu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Bu(o){let e,l;const t=[q(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ve(["get","average"],o[2],o[1]),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Hu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Rt)),s&0&&{sourceLayer:Rt},t[2],t[3],s&6&&{paint:{"line-color":ve(["get","average"],r[2],r[1]),"line-width":Fe,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Eu(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Rt,title:Uu,$$slots:{controls:[qu],help:[Au]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${tn()}/v1/${Rt}.pmtiles`,$$slots:{default:[Bu]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Rt="road_widths",Uu="OS Road widths";function Wu(o,e,l){let t,n=K.sequential_low_to_high,r=[0,5,10,15,20,100],s=ce(Rt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Yu extends Z{constructor(e){super(),X(this,e,Wu,Eu,J,{})}}function Ju(o){let e,l,t;return l=new Se({props:{color:K.trams}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Vu(o){let e,l,t,n,r;return n=new lt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),b(n.$$.fragment),G(e,"slot","help")},m(s,f){g(s,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:Q,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function Ku(o){let e,l;const t=[q(Dt),{sourceLayer:Dt},{paint:{"line-color":K.trams,"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new _e({props:n}),e.$on("click",Xu),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Qu(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Dt,title:Zu,$$slots:{help:[Vu],icon:[Ju]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Dt}.pmtiles`,$$slots:{default:[Ku]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Dt="trams",Zu="Trams";function Xu(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function xu(o,e,l){let t,n=ce(Dt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class ec extends Z{constructor(e){super(),X(this,e,xu,Qu,J,{})}}function tc(o){let e;return{c(){e=S(`Bus Open Data Service
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function nc(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[tc]},$$scope:{ctx:o}}}),a=new Te({}),{c(){e=y("span"),l=y("p"),t=S("Data from the "),b(n.$$.fragment),r=S(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=L(),f=y("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(e,i),w(a,e,null),u=!0},p(c,p){const h={};p&64&&(h.$$scope={dirty:p,ctx:c}),n.$set(h)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(a)}}}function lc(o){let e,l,t,n,r;return n=new Ee({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("div"),l=y("p"),l.textContent="Peak hourly frequency:",t=L(),b(n.$$.fragment),G(e,"slot","controls")},m(s,f){g(s,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:Q,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function rc(o){let e,l,t,n=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,p,h,k,T,C=o[5].peak_description+"",I,M,N,P,O,j=o[5].total+"",R,D,z=o[5].total_description+"",V,ae;return{c(){e=y("p"),l=S("Stop name: "),t=y("b"),r=S(n),s=L(),f=y("p"),i=S("Peak: "),a=y("b"),c=S(u),p=S(`
        buses during the busiest hour of any day`),h=L(),k=y("p"),T=S("The peak hour is "),I=S(C),M=L(),N=y("p"),P=S("Total buses per day: "),O=y("b"),R=S(j),D=S(`
        (for `),V=S(z),ae=S(", the busiest day of the week)")},m(F,x){g(F,e,x),$(e,l),$(e,t),$(t,r),g(F,s,x),g(F,f,x),$(f,i),$(f,a),$(a,c),$(f,p),g(F,h,x),g(F,k,x),$(k,T),$(k,I),g(F,M,x),g(F,N,x),$(N,P),$(N,O),$(O,R),$(N,D),$(N,V),$(N,ae)},p(F,x){x&32&&n!==(n=F[5].stop_name+"")&&A(r,n),x&32&&u!==(u=F[5].peak+"")&&A(c,u),x&32&&C!==(C=F[5].peak_description+"")&&A(I,C),x&32&&j!==(j=F[5].total+"")&&A(R,j),x&32&&z!==(z=F[5].total_description+"")&&A(V,z)},d(F){F&&(d(e),d(s),d(f),d(h),d(k),d(M),d(N))}}}function oc(o){let e,l;return e=new ie({props:{$$slots:{default:[rc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function sc(o){let e,l;const t=[q(Gt),{sourceLayer:Gt},{paint:{"circle-color":ve(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[oc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new ht({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Gt)),s&0&&{sourceLayer:Gt},s&6&&{paint:{"circle-color":ve(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ic(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Gt,title:ac,$$slots:{controls:[lc],help:[nc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Gt}.pmtiles`,$$slots:{default:[sc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Gt="bus_stops",ac="Bus stops";function fc(o,e,l){let t,n=K.sequential_low_to_high,r=[0,3,10,20,30,100],s=ce(Gt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class uc extends Z{constructor(e){super(),X(this,e,fc,ic,J,{})}}function cc(o){let e;return{c(){e=S("crossing")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function $c(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[cc]},$$scope:{ctx:o}}}),f=new lt({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),b(n.$$.fragment),r=S(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function pc(o){let e,l,t;return l=new Kt({props:{rows:o[2]}}),{c(){e=y("div"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function mc(o){let e,l=Rl(o[4])+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&16&&l!==(l=Rl(n[4])+"")&&A(t,l)},d(n){n&&d(e)}}}function _c(o){let e,l;return e=new ie({props:{$$slots:{default:[mc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function gc(o){let e,l;const t=[q(Ft),{sourceLayer:Ft},{paint:{"circle-color":Ze(["get","crossing"],{traffic_signals:K.signalized_crossing},K.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[_c]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new ht({props:n}),e.$on("click",bc),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(Ft)),s&0&&{sourceLayer:Ft},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function dc(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ft,title:hc,$$slots:{controls:[pc],help:[$c]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ft}.pmtiles`,$$slots:{default:[gc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ft="crossings",hc="Crossings";function Rl(o){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[o.crossing]??`Unknown crossing type (${o.crossing})`}function bc(o){window.open(`http://openstreetmap.org/node/${o.detail.features[0].properties.osm_id}`,"_blank")}function wc(o,e,l){let t,n=ce(Ft);Y(o,n,f=>l(0,t=f));let r=[["Signalized",K.signalized_crossing],["Other",K.other_crossing]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class vc extends Z{constructor(e){super(),X(this,e,wc,dc,J,{})}}function kc(o){let e;return{c(){e=S("OS Terrain 50")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function yc(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[kc]},$$scope:{ctx:o}}}),c=new Te({}),h=new lt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=y("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),s=y("p"),f=S("This layer is built from "),b(i.$$.fragment),a=S(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),b(c.$$.fragment),p=L(),b(h.$$.fragment),G(e,"slot","help")},m(T,C){g(T,e,C),$(e,l),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),w(i,s,null),$(s,a),$(e,u),w(c,e,null),$(e,p),w(h,e,null),k=!0},p(T,C){const I={};C&64&&(I.$$scope={dirty:C,ctx:T}),i.$set(I)},i(T){k||(m(i.$$.fragment,T),m(c.$$.fragment,T),m(h.$$.fragment,T),k=!0)},o(T){_(i.$$.fragment,T),_(c.$$.fragment,T),_(h.$$.fragment,T),k=!1},d(T){T&&d(e),v(i),v(c),v(h)}}}function Sc(o){let e,l,t,n,r;return l=new Ee({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("span"),b(l.$$.fragment),t=L(),n=y("p"),n.innerHTML=`<img src="${bo}" alt="arrow"/>
      Arrows point uphill`,G(e,"slot","controls")},m(s,f){g(s,e,f),w(l,e,null),$(e,t),$(e,n),r=!0},p:Q,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),r=!1},d(s){s&&d(e),v(l)}}}function Tc(o){let e,l,t,n=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=y("p"),l=S("Gradient: "),t=y("b"),r=S(n),s=S(`
        %`)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(t,r),$(e,s)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&A(r,n)},d(f){f&&d(e)}}}function Cc(o){let e,l;return e=new ie({props:{$$slots:{default:[Tc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Lc(o){let e,l,t,n;const r=[q(Qe),{sourceLayer:Qe},{manageHoverState:!0},{paint:{"line-color":ve(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":Fe,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[Cc]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ee(s,r[a]);e=new _e({props:s});const f=[q(Qe+"_arrows"),{sourceLayer:Qe},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ee(i,f[a]);return t=new In({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),g(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?ne(r,[u&0&&se(q(Qe)),u&0&&{sourceLayer:Qe},r[2],u&6&&{paint:{"line-color":ve(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Fe,"line-opacity":te(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p=u&1?ne(f,[u&0&&se(q(Qe+"_arrows")),u&0&&{sourceLayer:Qe},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(p)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ic(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Qe,title:Mc,$$slots:{controls:[Sc],help:[yc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Qe}.pmtiles`,$$slots:{default:[Lc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Qe="gradient",Mc="Gradients";function Oc(o,e,l){let t,n=K.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=ce(Qe);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class jc extends Z{constructor(e){super(),X(this,e,Oc,Ic,J,{})}}function Nc(o){let e,l;return{c(){e=y("img"),G(e,"slot","icon"),Xt(e.src,l=wo)||G(e,"src",l),G(e,"alt","a logo representing cycle parking")},m(t,n){g(t,e,n)},p:Q,d(t){t&&d(e)}}}function Pc(o){let e;return{c(){e=S("OpenStreetMap")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Rc(o){let e;return{c(){e=S("OpenStreetMap Carto")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Dc(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Pc]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Rc]},$$scope:{ctx:o}}}),c=new lt({}),{c(){e=y("span"),l=y("p"),t=S("Cycle parking, according to "),b(n.$$.fragment),r=S(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=L(),f=y("p"),i=S("Icon from "),b(a.$$.fragment),u=L(),b(c.$$.fragment),G(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),w(a,f,null),$(e,u),w(c,e,null),p=!0},p(h,k){const T={};k&16&&(T.$$scope={dirty:k,ctx:h}),n.$set(T);const C={};k&16&&(C.$$scope={dirty:k,ctx:h}),a.$set(C)},i(h){p||(m(n.$$.fragment,h),m(a.$$.fragment,h),m(c.$$.fragment,h),p=!0)},o(h){_(n.$$.fragment,h),_(a.$$.fragment,h),_(c.$$.fragment,h),p=!1},d(h){h&&d(e),v(n),v(a),v(c)}}}function Gc(o){let e,l,t,n=(o[3].capacity??"unknown")+"",r;return{c(){e=y("p"),l=S("Capacity: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&8&&n!==(n=(s[3].capacity??"unknown")+"")&&A(r,n)},d(s){s&&d(e)}}}function Fc(o){let e,l;return e=new ie({props:{$$slots:{default:[Gc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ac(o){let e,l;const t=[q(At),{sourceLayer:At},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Fc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new In({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(At)),s&0&&{sourceLayer:At},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function qc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:At,title:zc,$$slots:{help:[Dc],icon:[Nc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${At}.pmtiles`,$$slots:{default:[Ac]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let At="cycle_parking",zc="Cycle parking";function Hc(o,e,l){let t,n=ce(At);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Bc extends Z{constructor(e){super(),X(this,e,Hc,qc,J,{})}}function Ec(o){let e,l,t,n,r;return n=new lt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),b(n.$$.fragment),G(e,"slot","help")},m(s,f){g(s,e,f),$(e,l),$(e,t),w(n,e,null),r=!0},p:Q,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function Uc(o){let e,l,t;return e=new Se({props:{color:K.education.schools}}),{c(){b(e.$$.fragment),l=S(`
        Schools`)},m(n,r){w(e,n,r),g(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function Wc(o){let e,l,t;return e=new Se({props:{color:K.education.colleges}}),{c(){b(e.$$.fragment),l=S(`
        Colleges`)},m(n,r){w(e,n,r),g(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function Yc(o){let e,l,t;return e=new Se({props:{color:K.education.universities}}),{c(){b(e.$$.fragment),l=S(`
        Universities`)},m(n,r){w(e,n,r),g(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function Jc(o){let e,l,t,n,r,s,f,i,a;function u(C){o[3](C)}let c={$$slots:{default:[Uc]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new Be({props:c}),B.push(()=>E(e,"checked",u));function p(C){o[4](C)}let h={$$slots:{default:[Wc]},$$scope:{ctx:o}};o[0].college!==void 0&&(h.checked=o[0].college),n=new Be({props:h}),B.push(()=>E(n,"checked",p));function k(C){o[5](C)}let T={$$slots:{default:[Yc]},$$scope:{ctx:o}};return o[0].university!==void 0&&(T.checked=o[0].university),f=new Be({props:T}),B.push(()=>E(f,"checked",k)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment)},m(C,I){w(e,C,I),g(C,t,I),w(n,C,I),g(C,s,I),w(f,C,I),a=!0},p(C,I){const M={};I&2048&&(M.$$scope={dirty:I,ctx:C}),!l&&I&1&&(l=!0,M.checked=C[0].school,U(()=>l=!1)),e.$set(M);const N={};I&2048&&(N.$$scope={dirty:I,ctx:C}),!r&&I&1&&(r=!0,N.checked=C[0].college,U(()=>r=!1)),n.$set(N);const P={};I&2048&&(P.$$scope={dirty:I,ctx:C}),!i&&I&1&&(i=!0,P.checked=C[0].university,U(()=>i=!1)),f.$set(P)},i(C){a||(m(e.$$.fragment,C),m(n.$$.fragment,C),m(f.$$.fragment,C),a=!0)},o(C){_(e.$$.fragment,C),_(n.$$.fragment,C),_(f.$$.fragment,C),a=!1},d(C){C&&(d(t),d(s)),v(e,C),v(n,C),v(f,C)}}}function Vc(o){let e,l,t;return l=new Ge({props:{small:!0,$$slots:{default:[Jc]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Kc(o){let e,l=(o[10].name??"Unnamed institution")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&A(t,l)},d(n){n&&d(e)}}}function Qc(o){let e,l;return e=new ie({props:{$$slots:{default:[Kc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Zc(o){let e,l;const t=[q(qt),{sourceLayer:qt},{paint:{"fill-color":Ze(["get","type"],{school:K.education.schools,college:K.education.colleges,university:K.education.universities},"grey"),"fill-opacity":te(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Qc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&5?ne(t,[s&0&&se(q(qt)),s&0&&{sourceLayer:qt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Xc(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:qt,title:xc,$$slots:{controls:[Vc],help:[Ec]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${qt}.pmtiles`,$$slots:{default:[Zc]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let qt="education",xc="Education";function e$(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function t$(o,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(h){return h.show?n.filter(k=>h[k]).join(","):null}let f=vt(qt,r,s,e$);Y(o,f,h=>l(0,t=h));function i(h){let k=n.filter(T=>h[T]);return["in",["get","type"],["literal",k]]}function a(h){o.$$.not_equal(t.school,h)&&(t.school=h,f.set(t))}function u(h){o.$$.not_equal(t.college,h)&&(t.college=h,f.set(t))}function c(h){o.$$.not_equal(t.university,h)&&(t.university=h,f.set(t))}function p(h){o.$$.not_equal(t.show,h)&&(t.show=h,f.set(t))}return[t,f,i,a,u,c,p]}class n$ extends Z{constructor(e){super(),X(this,e,t$,Xc,J,{})}}function l$(o){let e,l,t;return l=new Se({props:{color:K.hospitals}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function r$(o){let e;return{c(){e=S("hospital")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function o$(o){let e,l,t,n,r,s,f,i;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[r$]},$$scope:{ctx:o}}}),f=new lt({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),b(n.$$.fragment),r=S(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=L(),b(f.$$.fragment),G(e,"slot","help")},m(a,u){g(a,e,u),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),w(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function s$(o){let e,l=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&A(t,l)},d(n){n&&d(e)}}}function i$(o){let e,l;return e=new ie({props:{$$slots:{default:[s$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function a$(o){let e,l;const t=[q(zt),{sourceLayer:zt},{paint:{"fill-color":K.hospitals,"fill-opacity":te(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[i$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(zt)),s&0&&{sourceLayer:zt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function f$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:zt,title:u$,$$slots:{help:[o$],icon:[l$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${zt}.pmtiles`,$$slots:{default:[a$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let zt="hospitals",u$="Hospitals";function c$(o,e,l){let t,n=ce(zt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class $$ extends Z{constructor(e){super(),X(this,e,c$,f$,J,{})}}function p$(o){let e,l;return{c(){e=y("img"),G(e,"slot","icon"),Xt(e.src,l=vo)||G(e,"src",l),G(e,"alt","A logo representing a train")},m(t,n){g(t,e,n)},p:Q,d(t){t&&d(e)}}}function m$(o){let e;return{c(){e=S("railway station")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function _$(o){let e;return{c(){e=S(`National Rail
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function g$(o){let e,l,t,n,r,s,f,i,a,u,c,p,h;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[m$]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[_$]},$$scope:{ctx:o}}}),p=new lt({}),{c(){e=y("div"),l=y("p"),t=S("This shows "),b(n.$$.fragment),r=S(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),f=y("p"),i=S("Icon from "),b(a.$$.fragment),u=S(". (Note that not all stations shown are National Rail.)"),c=L(),b(p.$$.fragment),G(e,"slot","help")},m(k,T){g(k,e,T),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),w(a,f,null),$(f,u),$(e,c),w(p,e,null),h=!0},p(k,T){const C={};T&16&&(C.$$scope={dirty:T,ctx:k}),n.$set(C);const I={};T&16&&(I.$$scope={dirty:T,ctx:k}),a.$set(I)},i(k){h||(m(n.$$.fragment,k),m(a.$$.fragment,k),m(p.$$.fragment,k),h=!0)},o(k){_(n.$$.fragment,k),_(a.$$.fragment,k),_(p.$$.fragment,k),h=!1},d(k){k&&d(e),v(n),v(a),v(p)}}}function d$(o){let e,l=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&A(t,l)},d(n){n&&d(e)}}}function h$(o){let e,l;return e=new ie({props:{$$slots:{default:[d$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function b$(o){let e,l;const t=[q(en),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[h$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new In({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(en)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function w$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:en,title:v$,$$slots:{help:[g$],icon:[p$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new wt({props:{data:`${$e()}/v1/${en}.geojson`,$$slots:{default:[b$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let en="railway_stations",v$="Railway stations";function k$(o,e,l){let t,n=ce(en);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class y$ extends Z{constructor(e){super(),X(this,e,k$,w$,J,{})}}function S$(o){let e,l,t;return l=new Se({props:{color:K.sports_spaces}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","icon")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function T$(o){let e;return{c(){e=S("sports pitches")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function C$(o){let e;return{c(){e=S("sports centres")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function L$(o){let e,l,t,n,r,s,f,i,a,u;return n=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[T$]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[C$]},$$scope:{ctx:o}}}),a=new lt({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),b(n.$$.fragment),r=S(" and "),b(s.$$.fragment),f=S(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),b(a.$$.fragment),G(e,"slot","help")},m(c,p){g(c,e,p),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),$(e,i),w(a,e,null),u=!0},p(c,p){const h={};p&16&&(h.$$scope={dirty:p,ctx:c}),n.$set(h);const k={};p&16&&(k.$$scope={dirty:p,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(s),v(a)}}}function I$(o){let e,l=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&A(t,l)},d(n){n&&d(e)}}}function M$(o){let e,l;return e=new ie({props:{$$slots:{default:[I$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function O$(o){let e,l;const t=[q(Ht),{sourceLayer:Ht},{paint:{"fill-color":K.sports_spaces,"fill-opacity":te(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[M$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&1?ne(t,[s&0&&se(q(Ht)),s&0&&{sourceLayer:Ht},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function j$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Ht,title:N$,$$slots:{help:[L$],icon:[S$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Ht}.pmtiles`,$$slots:{default:[O$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ht="sports_spaces",N$="Sports spaces";function P$(o,e,l){let t,n=ce(Ht);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class R$ extends Z{constructor(e){super(),X(this,e,P$,j$,J,{})}}function D$(o){let e;return{c(){e=S("DfT stats19")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function G$(o){let e;return{c(){e=S("documented by DfT")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function F$(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,T,C,I,M,N,P,O,j,R,D;return n=new re({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[D$]},$$scope:{ctx:o}}}),M=new re({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[G$]},$$scope:{ctx:o}}}),R=new Te({}),{c(){e=y("span"),l=y("p"),t=S("This layer shows collisions recorded in the "),b(n.$$.fragment),r=S(" dataset, as of 30 September 2024. Please note these limitations:"),s=L(),f=y("ul"),i=y("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=y("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),p=y("li"),p.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,h=L(),k=y("li"),k.textContent='The "pedestrians" category also include mobility scooters',T=L(),C=y("li"),I=S("All limitations "),b(M.$$.fragment),N=S(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),P=L(),O=y("p"),O.textContent="You can click a point to open the full report, thanks to CycleStreets.",j=L(),b(R.$$.fragment),G(e,"slot","help")},m(z,V){g(z,e,V),$(e,l),$(l,t),w(n,l,null),$(l,r),$(e,s),$(e,f),$(f,i),$(f,a),$(f,u),$(f,c),$(f,p),$(f,h),$(f,k),$(f,T),$(f,C),$(C,I),w(M,C,null),$(C,N),$(e,P),$(e,O),$(e,j),w(R,e,null),D=!0},p(z,V){const ae={};V&4194304&&(ae.$$scope={dirty:V,ctx:z}),n.$set(ae);const F={};V&4194304&&(F.$$scope={dirty:V,ctx:z}),M.$set(F)},i(z){D||(m(n.$$.fragment,z),m(M.$$.fragment,z),m(R.$$.fragment,z),D=!0)},o(z){_(n.$$.fragment,z),_(M.$$.fragment,z),_(R.$$.fragment,z),D=!1},d(z){z&&d(e),v(n),v(M),v(R)}}}function A$(o){let e;return{c(){e=S("Pedestrians")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function q$(o){let e;return{c(){e=S("Cyclists")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function z$(o){let e;return{c(){e=S("Horse riders")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function H$(o){let e;return{c(){e=S("Other")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function B$(o){let e,l,t,n,r,s,f,i,a,u,c,p;function h(O){o[10](O)}let k={$$slots:{default:[A$]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(k.checked=o[0].pedestrians),e=new Be({props:k}),B.push(()=>E(e,"checked",h));function T(O){o[11](O)}let C={$$slots:{default:[q$]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(C.checked=o[0].cyclists),n=new Be({props:C}),B.push(()=>E(n,"checked",T));function I(O){o[12](O)}let M={$$slots:{default:[z$]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(M.checked=o[0].horseRiders),f=new Be({props:M}),B.push(()=>E(f,"checked",I));function N(O){o[13](O)}let P={$$slots:{default:[H$]},$$scope:{ctx:o}};return o[0].other!==void 0&&(P.checked=o[0].other),u=new Be({props:P}),B.push(()=>E(u,"checked",N)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),s=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment)},m(O,j){w(e,O,j),g(O,t,j),w(n,O,j),g(O,s,j),w(f,O,j),g(O,a,j),w(u,O,j),p=!0},p(O,j){const R={};j&4194304&&(R.$$scope={dirty:j,ctx:O}),!l&&j&1&&(l=!0,R.checked=O[0].pedestrians,U(()=>l=!1)),e.$set(R);const D={};j&4194304&&(D.$$scope={dirty:j,ctx:O}),!r&&j&1&&(r=!0,D.checked=O[0].cyclists,U(()=>r=!1)),n.$set(D);const z={};j&4194304&&(z.$$scope={dirty:j,ctx:O}),!i&&j&1&&(i=!0,z.checked=O[0].horseRiders,U(()=>i=!1)),f.$set(z);const V={};j&4194304&&(V.$$scope={dirty:j,ctx:O}),!c&&j&1&&(c=!0,V.checked=O[0].other,U(()=>c=!1)),u.$set(V)},i(O){p||(m(e.$$.fragment,O),m(n.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),p=!0)},o(O){_(e.$$.fragment,O),_(n.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),p=!1},d(O){O&&(d(t),d(s),d(a)),v(e,O),v(n,O),v(f,O),v(u,O)}}}function E$(o){let e,l,t,n,r,s,f,i,a,u,c,p,h;return l=new Ge({props:{small:!0,$$slots:{default:[B$]},$$scope:{ctx:o}}}),u=new Kt({props:{rows:o[9]}}),{c(){e=y("div"),b(l.$$.fragment),t=L(),n=y("div"),r=S(`Filter years:
      `),s=y("input"),f=S(`
      -
      `),i=y("input"),a=L(),b(u.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2023),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2023),G(i,"class","svelte-1ft65rw"),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(k,T){g(k,e,T),w(l,e,null),$(e,t),$(e,n),$(n,r),$(n,s),tt(s,o[0].minYear),$(n,f),$(n,i),tt(i,o[0].maxYear),$(e,a),w(u,e,null),c=!0,p||(h=[mt(s,"input",o[14]),mt(i,"input",o[15])],p=!0)},p(k,T){const C={};T&4194305&&(C.$$scope={dirty:T,ctx:k}),l.$set(C),T&1&&xt(s.value)!==k[0].minYear&&tt(s,k[0].minYear),T&1&&xt(i.value)!==k[0].maxYear&&tt(i,k[0].maxYear)},i(k){c||(m(l.$$.fragment,k),m(u.$$.fragment,k),c=!0)},o(k){_(l.$$.fragment,k),_(u.$$.fragment,k),c=!1},d(k){k&&d(e),v(l),v(u),p=!1,Gr(h)}}}function Dl(o){let e,l,t,n=o[3][o[21].pedestrian_location]+"",r;return{c(){e=y("p"),l=S("Pedestrian location: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[3][s[21].pedestrian_location]+"")&&A(r,n)},d(s){s&&d(e)}}}function Gl(o){let e,l,t,n=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=y("p"),l=S("Pedestrian movement: "),t=y("b"),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(t,r)},p(s,f){f&2097152&&n!==(n=s[4][s[21].pedestrian_movement]+"")&&A(r,n)},d(s){s&&d(e)}}}function U$(o){let e,l,t,n=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,p,h,k,T,C=Fl(o[21])+"",I,M,N,P,O,j=o[21].pedestrian_location&&Dl(o),R=o[21].pedestrian_movement&&Gl(o);return{c(){e=y("p"),l=S("Year: "),t=y("b"),r=S(n),s=L(),f=y("p"),i=S("Severity: "),a=y("b"),c=S(u),p=L(),h=y("p"),k=S("Casualties: "),T=y("b"),I=S(C),M=L(),j&&j.c(),N=L(),R&&R.c(),P=L(),O=y("p"),O.textContent="Click to open full report in CycleStreets"},m(D,z){g(D,e,z),$(e,l),$(e,t),$(t,r),g(D,s,z),g(D,f,z),$(f,i),$(f,a),$(a,c),g(D,p,z),g(D,h,z),$(h,k),$(h,T),$(T,I),g(D,M,z),j&&j.m(D,z),g(D,N,z),R&&R.m(D,z),g(D,P,z),g(D,O,z)},p(D,z){z&2097152&&n!==(n=D[21].year+"")&&A(r,n),z&2097152&&u!==(u=D[5][D[21].severity]+"")&&A(c,u),z&2097152&&C!==(C=Fl(D[21])+"")&&A(I,C),D[21].pedestrian_location?j?j.p(D,z):(j=Dl(D),j.c(),j.m(N.parentNode,N)):j&&(j.d(1),j=null),D[21].pedestrian_movement?R?R.p(D,z):(R=Gl(D),R.c(),R.m(P.parentNode,P)):R&&(R.d(1),R=null)},d(D){D&&(d(e),d(s),d(f),d(p),d(h),d(M),d(N),d(P),d(O)),j&&j.d(D),R&&R.d(D)}}}function W$(o){let e,l;return e=new ie({props:{$$slots:{default:[U$,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Y$(o){let e,l;const t=[q(Bt),{sourceLayer:Bt},{paint:{"circle-color":ve(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[W$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new ht({props:n}),e.$on("click",Q$),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&451?ne(t,[s&0&&se(q(Bt)),s&0&&{sourceLayer:Bt},s&448&&{paint:{"circle-color":ve(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function J$(o){let e,l,t,n,r;function s(i){o[16](i)}let f={name:Bt,title:V$,$$slots:{controls:[E$],help:[F$]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Bt}.pmtiles`,$$slots:{default:[Y$]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,U(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Bt="stats19",V$="Stats19";function K$(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Fl(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function Q$(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function Z$(o,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(D){return D.show?`${r.filter(V=>D[V]).join(",")}/${D.minYear}/${D.maxYear}`:null}let i=vt(Bt,s,f,K$);Y(o,i,D=>l(0,n=D));function a(D,z,V,ae,F,x){let H=["any"];return n.pedestrians&&H.push(["get","pedestrian"]),n.cyclists&&H.push(["get","cyclist"]),n.horseRiders&&H.push(["get","horse_rider"]),n.other&&H.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],H]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},p={1:"Fatal",2:"Serious",3:"Slight"},h=K.sequential_low_to_high[4],k=K.sequential_low_to_high[2],T=K.sequential_low_to_high[0],C=[["Fatal",h],["Serious",k],["Slight",T]];function I(D){o.$$.not_equal(n.pedestrians,D)&&(n.pedestrians=D,i.set(n))}function M(D){o.$$.not_equal(n.cyclists,D)&&(n.cyclists=D,i.set(n))}function N(D){o.$$.not_equal(n.horseRiders,D)&&(n.horseRiders=D,i.set(n))}function P(D){o.$$.not_equal(n.other,D)&&(n.other=D,i.set(n))}function O(){n.minYear=xt(this.value),i.set(n)}function j(){n.maxYear=xt(this.value),i.set(n)}function R(D){o.$$.not_equal(n.show,D)&&(n.show=D,i.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,p,h,k,T,C,I,M,N,P,O,j,R]}class X$ extends Z{constructor(e){super(),X(this,e,Z$,J$,J,{})}}function x$(o){let e;return{c(){e=S(`DfT road statistics
      `)},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function ep(o){let e;return{c(){e=S("methodology")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function tp(o){let e,l,t,n,r,s,f,i,a,u,c,p;return n=new re({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[x$]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[ep]},$$scope:{ctx:o}}}),c=new Te({}),{c(){e=y("span"),l=y("p"),t=S("AADF (annual average daily flow) data from "),b(n.$$.fragment),r=S(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),b(s.$$.fragment),f=S(" for details and caveats about the measurements."),i=L(),a=y("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),b(c.$$.fragment),G(e,"slot","help")},m(h,k){g(h,e,k),$(e,l),$(l,t),w(n,l,null),$(l,r),w(s,l,null),$(l,f),$(e,i),$(e,a),$(e,u),w(c,e,null),p=!0},p(h,k){const T={};k&128&&(T.$$scope={dirty:k,ctx:h}),n.$set(T);const C={};k&128&&(C.$$scope={dirty:k,ctx:h}),s.$set(C)},i(h){p||(m(n.$$.fragment,h),m(s.$$.fragment,h),m(c.$$.fragment,h),p=!0)},o(h){_(n.$$.fragment,h),_(s.$$.fragment,h),_(c.$$.fragment,h),p=!1},d(h){h&&d(e),v(n),v(s),v(c)}}}function np(o){let e,l,t;return l=new Ee({props:{colorScale:o[1],limits:o[3]}}),{c(){e=y("span"),b(l.$$.fragment),G(e,"slot","controls")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function lp(o){let e,l=o[6].location+"",t,n,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",p,h,k,T,C=o[6].year+"",I,M,N,P=o[6].pedal_cycles.toLocaleString()+"",O,j,R,D,z,V=o[6].method+"",ae;return{c(){e=y("h2"),t=S(l),n=L(),r=y("p"),s=S("Total motor vehicles ("),i=S(f),a=S(` AADF):
        `),u=y("b"),p=S(c),h=L(),k=y("p"),T=S("Total pedal cycles ("),I=S(C),M=S(` AADF):
        `),N=y("b"),O=S(P),j=L(),R=y("p"),D=S("Count method: "),z=y("b"),ae=S(V)},m(F,x){g(F,e,x),$(e,t),g(F,n,x),g(F,r,x),$(r,s),$(r,i),$(r,a),$(r,u),$(u,p),g(F,h,x),g(F,k,x),$(k,T),$(k,I),$(k,M),$(k,N),$(N,O),g(F,j,x),g(F,R,x),$(R,D),$(R,z),$(z,ae)},p(F,x){x&64&&l!==(l=F[6].location+"")&&A(t,l),x&64&&f!==(f=F[6].year+"")&&A(i,f),x&64&&c!==(c=F[6].motor_vehicles.toLocaleString()+"")&&A(p,c),x&64&&C!==(C=F[6].year+"")&&A(I,C),x&64&&P!==(P=F[6].pedal_cycles.toLocaleString()+"")&&A(O,P),x&64&&V!==(V=F[6].method+"")&&A(ae,V)},d(F){F&&(d(e),d(n),d(r),d(h),d(k),d(j),d(R))}}}function rp(o){let e,l;return e=new ie({props:{$$slots:{default:[lp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function op(o){let e,l;const t=[q(Et),{sourceLayer:Et},{paint:{"circle-color":ve(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[rp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new ht({props:n}),e.$on("click",ap),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&7?ne(t,[s&0&&se(q(Et)),s&0&&{sourceLayer:Et},s&6&&{paint:{"circle-color":ve(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function sp(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Et,title:ip,$$slots:{controls:[np],help:[tp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new pe({props:{url:`pmtiles://${$e()}/v1/${Et}.pmtiles`,$$slots:{default:[op]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Et="vehicle_counts",ip="Vehicle counts";function ap(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function fp(o,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=ce(Et);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class up extends Z{constructor(e){super(),X(this,e,fp,sp,J,{})}}function Al(o,e,l){const t=o.slice();return t[6]=e[l],t}function cp(o){let e;return{c(){e=y("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,G(e,"slot","help")},m(l,t){g(l,e,t)},p:Q,d(l){l&&d(e)}}}function $p(o){let e,l,t;return l=new Kt({props:{rows:o[3]}}),{c(){e=y("div"),b(l.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function pp(o){let e,l=o[5]["Issue ID"]+"",t,n,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=y("h2"),t=S(l),n=S(" - "),s=S(r),f=L(),i=y("p"),u=S(a)},m(c,p){g(c,e,p),$(e,t),$(e,n),$(e,s),g(c,f,p),g(c,i,p),$(i,u)},p(c,p){p&32&&l!==(l=c[5]["Issue ID"]+"")&&A(t,l),p&32&&r!==(r=c[5].Code+"")&&A(s,r),p&32&&a!==(a=c[5]["Issue Stage"]+"")&&A(u,a)},d(c){c&&(d(e),d(f),d(i))}}}function ql(o){let e,l=o[6]+"",t,n,r,s=o[5][o[6]]+"",f,i;return{c(){e=y("p"),t=S(l),n=S(`:
            `),r=y("b"),f=S(s),i=L()},m(a,u){g(a,e,u),$(e,t),$(e,n),$(e,r),$(r,f),$(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&A(f,s)},d(a){a&&d(e)}}}function mp(o){let e,l=me(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=ql(Al(o,l,n));return{c(){e=y("div");for(let n=0;n<t.length;n+=1)t[n].c();le(e,"max-width","30vw"),le(e,"max-height","60vh"),le(e,"overflow","auto")},m(n,r){g(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&36){l=me(n[2]);let s;for(s=0;s<l.length;s+=1){const f=Al(n,l,s);t[s]?t[s].p(f,r):(t[s]=ql(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&d(e),qe(t,n)}}}function _p(o){let e,l,t,n;return e=new ie({props:{openOn:"hover",$$slots:{default:[pp,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[mp,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),g(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function gp(o){let e,l;const t=[q(fn),{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[_p]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new ht({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&9?ne(t,[s&0&&se(q(fn)),s&8&&{paint:{"circle-color":Ze(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function dp(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:fn,title:hp,$$slots:{controls:[$p],help:[cp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new wt({props:{data:`${tn()}/v1/problems.geojson.gz`,$$slots:{default:[gp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],U(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let fn="problems",hp="Issues & Conflicts";function bp(o,e,l){let t,n=ce(fn);Y(o,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,s,f]}class wp extends Z{constructor(e){super(),X(this,e,bp,dp,J,{})}}function zl(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Hl(o){let e,l,t=o[1]+"",n,r,s,f=o[2]+"",i,a;return{c(){e=y("tr"),l=y("td"),n=S(t),r=L(),s=y("td"),i=S(f),a=L()},m(u,c){g(u,e,c),$(e,l),$(l,n),$(e,r),$(e,s),$(s,i),$(e,a)},p(u,c){c&1&&t!==(t=u[1]+"")&&A(n,t),c&1&&f!==(f=u[2]+"")&&A(i,f)},d(u){u&&d(e)}}}function vp(o){let e,l,t,n,r=me(Object.entries(o[0])),s=[];for(let f=0;f<r.length;f+=1)s[f]=Hl(zl(o,r,f));return{c(){e=y("table"),l=y("thead"),l.innerHTML="<tr><th>Key</th> <th>Value</th></tr>",t=L(),n=y("tbody");for(let f=0;f<s.length;f+=1)s[f].c()},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,n);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,null)},p(f,i){if(i&1){r=me(Object.entries(f[0]));let a;for(a=0;a<r.length;a+=1){const u=zl(f,r,a);s[a]?s[a].p(u,i):(s[a]=Hl(u),s[a].c(),s[a].m(n,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(f){f&&d(e),qe(s,f)}}}function kp(o){let e,l;return e=new ie({props:{openOn:"click",$$slots:{default:[vp,({props:t})=>({0:t}),({props:t})=>t?1:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&33&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}class Mn extends Z{constructor(e){super(),X(this,e,null,kp,J,{})}}function yp(o){let e;return{c(){e=y("span"),e.innerHTML="<p>This is your own GeoJSON file.</p>",G(e,"slot","help")},m(l,t){g(l,e,t)},p:Q,d(l){l&&d(e)}}}function Sp(o){let e,l,t,n,r,s,f,i=o[0].features.length.toLocaleString()+"",a,u,c;return l=new Ur({props:{label:"Load your own GeoJSON file",onLoad:o[3]}}),{c(){e=y("div"),b(l.$$.fragment),t=L(),n=y("p"),n.innerHTML="<i>Note this file doesn&#39;t leave your computer; it&#39;s not uploaded anywhere</i>",r=L(),s=y("p"),f=S("Currently showing "),a=S(i),u=S(" features"),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(p,h){g(p,e,h),w(l,e,null),$(e,t),$(e,n),$(e,r),$(e,s),$(s,f),$(s,a),$(s,u),c=!0},p(p,h){(!c||h&1)&&i!==(i=p[0].features.length.toLocaleString()+"")&&A(a,i)},i(p){c||(m(l.$$.fragment,p),c=!0)},o(p){_(l.$$.fragment,p),c=!1},d(p){p&&d(e),v(l)}}}function Tp(o){let e,l;return e=new Mn({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Cp(o){let e,l;return e=new Mn({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Lp(o){let e,l;return e=new Mn({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ip(o){let e,l,t,n,r,s,f,i;const a=[q("user_data_polygons"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Polygon"]},{paint:{"fill-color":"blue","fill-opacity":te(.5,1)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let u={$$slots:{default:[Tp]},$$scope:{ctx:o}};for(let I=0;I<a.length;I+=1)u=ee(u,a[I]);e=new Ae({props:u});const c=[q("user_data_polygons-outline"),{paint:{"line-color":"black","line-width":2.5}},{layout:{visibility:o[1]?"visible":"none"}}];let p={};for(let I=0;I<c.length;I+=1)p=ee(p,c[I]);t=new _e({props:p});const h=[q("user_data_lines"),{manageHoverState:!0},{filter:["==",["geometry-type"],"LineString"]},{paint:{"line-color":"green","line-width":te(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let k={$$slots:{default:[Cp]},$$scope:{ctx:o}};for(let I=0;I<h.length;I+=1)k=ee(k,h[I]);r=new _e({props:k});const T=[q("user_data_points"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Point"]},{paint:{"circle-color":"red","circle-radius":te(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let C={$$slots:{default:[Lp]},$$scope:{ctx:o}};for(let I=0;I<T.length;I+=1)C=ee(C,T[I]);return f=new ht({props:C}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(I,M){w(e,I,M),g(I,l,M),w(t,I,M),g(I,n,M),w(r,I,M),g(I,s,M),w(f,I,M),i=!0},p(I,M){const N=M&2?ne(a,[a[0],a[1],a[2],a[3],{layout:{visibility:I[1]?"visible":"none"}},a[5],a[6]]):{};M&32&&(N.$$scope={dirty:M,ctx:I}),e.$set(N);const P=M&2?ne(c,[c[0],c[1],{layout:{visibility:I[1]?"visible":"none"}}]):{};t.$set(P);const O=M&2?ne(h,[h[0],h[1],h[2],h[3],{layout:{visibility:I[1]?"visible":"none"}},h[5],h[6]]):{};M&32&&(O.$$scope={dirty:M,ctx:I}),r.$set(O);const j=M&2?ne(T,[T[0],T[1],T[2],T[3],{layout:{visibility:I[1]?"visible":"none"}},T[5],T[6]]):{};M&32&&(j.$$scope={dirty:M,ctx:I}),f.$set(j)},i(I){i||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(r.$$.fragment,I),m(f.$$.fragment,I),i=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(r.$$.fragment,I),_(f.$$.fragment,I),i=!1},d(I){I&&(d(l),d(n),d(s)),v(e,I),v(t,I),v(r,I),v(f,I)}}}function Mp(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Jr,title:Op,$$slots:{controls:[Sp],help:[yp]},$$scope:{ctx:o}};return o[1]!==void 0&&(f.show=o[1]),e=new fe({props:f}),B.push(()=>E(e,"show",s)),n=new wt({props:{data:o[0],generateId:!0,$$slots:{default:[Ip]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&33&&(u.$$scope={dirty:a,ctx:i}),!l&&a&2&&(l=!0,u.show=i[1],U(()=>l=!1)),e.$set(u);const c={};a&1&&(c.data=i[0]),a&34&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Jr="user_data",Op="Your own GeoJSON file";function jp(o,e,l){let t,n=ce(Jr);Y(o,n,i=>l(1,t=i));let r={type:"FeatureCollection",features:[]};function s(i,a){try{l(0,r=JSON.parse(a))}catch(u){window.alert(`Couldn't load ${i} -- is it GeoJSON? ${u}`)}}function f(i){t=i,n.set(t)}return[r,t,n,s,f]}class Np extends Z{constructor(e){super(),X(this,e,jp,Mp,J,{})}}function Pp(o){let e;function l(r,s){return r[2]<=100?Gp:Dp}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:Q,o:Q,d(r){r&&d(e),n.d(r)}}}function Rp(o){let e,l;return e=new ze({props:{$$slots:{default:[Fp]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Dp(o){let e;return{c(){e=y("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){g(l,e,t)},p:Q,d(l){l&&d(e)}}}function Gp(o){let e,l,t;return{c(){e=y("label"),l=S(`Downloading scheme data
      `),t=y("progress"),t.value=o[2],G(t,"class","svelte-q3473n")},m(n,r){g(n,e,r),$(e,l),$(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&d(e)}}}function Fp(o){let e;return{c(){e=S("Load latest scheme data")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Ap(o){let e,l,t,n;const r=[Rp,Pp],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(l=s[e]=r[e](o)),{c(){l&&l.c(),t=ge()},m(i,a){~e&&s[e].m(i,a),g(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(l&&(be(),_(s[u],1,1,()=>{s[u]=null}),we()),~e?(l=s[e],l?l.p(i,a):(l=s[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){_(l),n=!1},d(i){i&&d(t),~e&&s[e].d(i)}}}function qp(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await no(`${tn()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,s=c)});l(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}Fr(async()=>{n&&await f()});async function i(){l(0,n=!0),await f()}return o.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,s,i,t]}class zp extends Z{constructor(e){super(),X(this,e,qp,Ap,J,{loadFile:4})}}function Hp(o,e,l){let t={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},n={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};for(let[r,s]of Object.entries(o.schemes))s.pipeline?n.schemes[r]=s:t.schemes[r]=s;for(let r of o.features){if(!Bp(r))continue;let s=r.properties.scheme_reference,f=Object.hasOwn(t.schemes,s),i=f?t.schemes[s]:n.schemes[s];i.browse&&(r.properties.funding_programme=i.browse.funding_programme,r.properties.current_milestone=i.browse.current_milestone);let a=f?t:n;r.id=a.features.length+1,a.features.push(r)}e.set(t),l.set(n)}function Bp(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}function Ep(){let o={type:"FeatureCollection",features:[],schemes:{},notes:["These schemes are everything you've drawn in this browser using Scheme Sketcher. The data source and accuracy depend on whatever files you imported, created, or edited yourself."]};for(let l=0;l<window.localStorage.length;l++){let t=window.localStorage.key(l),n=t.split("/");if(!(n.length!=3||n[0]!="sketch"))try{let r=JSON.parse(window.localStorage.getItem(t));if(r.features.length==0)continue;for(let s of Object.values(r.schemes))s.browse={authority_or_region:n[1],local_filename:n[2]};o.schemes={...o.schemes,...r.schemes},o.features=[...o.features,...r.features]}catch{}}let e=1;for(let l of o.features)l.id=e++;return o}let Vt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},kn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function Bl(o,e,l){const t=o.slice();return t[27]=e[l],t[28]=e,t[29]=l,t}function Up(o){let e;return{c(){e=S("Filters")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Wp(o){let e;return{c(){e=S("Reset all filters")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Yp(o){let e,l,t,n,r,s,f,i;e=new wn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Kp]},$$scope:{ctx:o}}});function a(h){o[22](h)}let u={label:"Scheme name or reference",options:un(o[0])};o[1]!==void 0&&(u.value=o[1]),t=new Wr({props:u}),B.push(()=>E(t,"value",a));function c(h){o[23](h)}let p={label:"Authority or region",choices:o[10],emptyOption:!0};return o[4]!==void 0&&(p.value=o[4]),s=new Wt({props:p}),B.push(()=>E(s,"value",c)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),r=L(),b(s.$$.fragment)},m(h,k){w(e,h,k),g(h,l,k),w(t,h,k),g(h,r,k),w(s,h,k),i=!0},p(h,k){const T={};k&1073741828&&(T.$$scope={dirty:k,ctx:h}),e.$set(T);const C={};k&1&&(C.options=un(h[0])),!n&&k&2&&(n=!0,C.value=h[1],U(()=>n=!1)),t.$set(C);const I={};k&1024&&(I.choices=h[10]),!f&&k&16&&(f=!0,I.value=h[4],U(()=>f=!1)),s.$set(I)},i(h){i||(m(e.$$.fragment,h),m(t.$$.fragment,h),m(s.$$.fragment,h),i=!0)},o(h){_(e.$$.fragment,h),_(t.$$.fragment,h),_(s.$$.fragment,h),i=!1},d(h){h&&(d(l),d(r)),v(e,h),v(t,h),v(s,h)}}}function Jp(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,T,C;t=new wn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Zp]},$$scope:{ctx:o}}});function I(R){o[16](R)}let M={label:"Scheme name or reference",options:un(o[0])};o[1]!==void 0&&(M.value=o[1]),r=new Wr({props:M}),B.push(()=>E(r,"value",I));function N(R){o[17](R)}let P={label:"Authority or region",choices:o[10],emptyOption:!0};o[4]!==void 0&&(P.value=o[4]),i=new Wt({props:P}),B.push(()=>E(i,"value",N)),p=new wn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[em]},$$scope:{ctx:o}}});function O(R){o[19](R)}let j={label:"Current milestone",choices:o[11],emptyOption:!0};return o[6]!==void 0&&(j.value=o[6]),k=new Wt({props:j}),B.push(()=>E(k,"value",O)),{c(){e=y("div"),l=y("div"),b(t.$$.fragment),n=L(),b(r.$$.fragment),f=L(),b(i.$$.fragment),u=L(),c=y("div"),b(p.$$.fragment),h=L(),b(k.$$.fragment),G(l,"class","govuk-grid-column-one-half"),G(c,"class","govuk-grid-column-one-half"),G(e,"class","govuk-grid-row")},m(R,D){g(R,e,D),$(e,l),w(t,l,null),$(l,n),w(r,l,null),$(l,f),w(i,l,null),$(e,u),$(e,c),w(p,c,null),$(c,h),w(k,c,null),C=!0},p(R,D){const z={};D&1073741828&&(z.$$scope={dirty:D,ctx:R}),t.$set(z);const V={};D&1&&(V.options=un(R[0])),!s&&D&2&&(s=!0,V.value=R[1],U(()=>s=!1)),r.$set(V);const ae={};D&1024&&(ae.choices=R[10]),!a&&D&16&&(a=!0,ae.value=R[4],U(()=>a=!1)),i.$set(ae);const F={};D&1073741856&&(F.$$scope={dirty:D,ctx:R}),p.$set(F);const x={};!T&&D&64&&(T=!0,x.value=R[6],U(()=>T=!1)),k.$set(x)},i(R){C||(m(t.$$.fragment,R),m(r.$$.fragment,R),m(i.$$.fragment,R),m(p.$$.fragment,R),m(k.$$.fragment,R),C=!0)},o(R){_(t.$$.fragment,R),_(r.$$.fragment,R),_(i.$$.fragment,R),_(p.$$.fragment,R),_(k.$$.fragment,R),C=!1},d(R){R&&d(e),v(t),v(r),v(i),v(p),v(k)}}}function Vp(o){let e;return{c(){e=S("Clear")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Kp(o){let e,l,t,n,r,s;return t=new ze({props:{$$slots:{default:[Vp]},$$scope:{ctx:o}}}),t.$on("click",o[21]),{c(){e=y("input"),l=L(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){g(f,e,i),tt(e,o[2]),g(f,l,i),w(t,f,i),n=!0,r||(s=mt(e,"input",o[20]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&tt(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(d(e),d(l)),v(t,f),r=!1,s()}}}function Qp(o){let e;return{c(){e=S("Clear")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function Zp(o){let e,l,t,n,r,s;return t=new ze({props:{$$slots:{default:[Qp]},$$scope:{ctx:o}}}),t.$on("click",o[15]),{c(){e=y("input"),l=L(),b(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){g(f,e,i),tt(e,o[2]),g(f,l,i),w(t,f,i),n=!0,r||(s=mt(e,"input",o[14]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&tt(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(d(e),d(l)),v(t,f),r=!1,s()}}}function Xp(o){let e=o[27]+"",l,t;return{c(){l=S(e),t=L()},m(n,r){g(n,l,r),g(n,t,r)},p:Q,d(n){n&&(d(l),d(t))}}}function El(o){let e,l,t;function n(s){o[18](s,o[27])}let r={$$slots:{default:[Xp]},$$scope:{ctx:o}};return o[5][o[27]]!==void 0&&(r.checked=o[5][o[27]]),e=new Be({props:r}),B.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){o=s;const i={};f&1073741824&&(i.$$scope={dirty:f,ctx:o}),!l&&f&32&&(l=!0,i.checked=o[5][o[27]],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function xp(o){let e,l,t=me(Object.keys(Vt)),n=[];for(let s=0;s<t.length;s+=1)n[s]=El(Bl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ge()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);g(s,e,f),l=!0},p(s,f){if(f&32){t=me(Object.keys(Vt));let i;for(i=0;i<t.length;i+=1){const a=Bl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=El(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(be(),i=t.length;i<n.length;i+=1)r(i);we()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),qe(n,s)}}}function em(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[xp]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1073741856&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function tm(o){let e;return{c(){e=S("Done")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function nm(o){let e,l,t,n,r=o[9].interventions.toLocaleString()+"",s,f,i,a,u=o[8].size.toLocaleString()+"",c,p,h,k,T,C=Ul(o[9].totalLength).toFixed(1)+"",I,M,N,P,O,j,R,D,z,V;P=new ze({props:{$$slots:{default:[Wp]},$$scope:{ctx:o}}}),P.$on("click",o[12]);const ae=[Jp,Yp],F=[];function x(H,ue){return H[3]=="ATF"?0:1}return j=x(o),R=F[j]=ae[j](o),z=new jo({props:{$$slots:{default:[tm]},$$scope:{ctx:o}}}),z.$on("click",o[24]),{c(){e=y("p"),e.textContent="Showing:",l=L(),t=y("ul"),n=y("li"),s=S(r),f=S(" interventions"),i=L(),a=y("li"),c=S(u),p=S(" schemes"),h=L(),k=y("li"),T=S("total route length of "),I=S(C),M=S(" miles"),N=L(),b(P.$$.fragment),O=L(),R.c(),D=L(),b(z.$$.fragment)},m(H,ue){g(H,e,ue),g(H,l,ue),g(H,t,ue),$(t,n),$(n,s),$(n,f),$(t,i),$(t,a),$(a,c),$(a,p),$(t,h),$(t,k),$(k,T),$(k,I),$(k,M),g(H,N,ue),w(P,H,ue),g(H,O,ue),F[j].m(H,ue),g(H,D,ue),w(z,H,ue),V=!0},p(H,ue){(!V||ue&512)&&r!==(r=H[9].interventions.toLocaleString()+"")&&A(s,r),(!V||ue&256)&&u!==(u=H[8].size.toLocaleString()+"")&&A(c,u),(!V||ue&512)&&C!==(C=Ul(H[9].totalLength).toFixed(1)+"")&&A(I,C);const Ce={};ue&1073741824&&(Ce.$$scope={dirty:ue,ctx:H}),P.$set(Ce);let He=j;j=x(H),j===He?F[j].p(H,ue):(be(),_(F[He],1,1,()=>{F[He]=null}),we(),R=F[j],R?R.p(H,ue):(R=F[j]=ae[j](H),R.c()),m(R,1),R.m(D.parentNode,D));const Xe={};ue&1073741824&&(Xe.$$scope={dirty:ue,ctx:H}),z.$set(Xe)},i(H){V||(m(P.$$.fragment,H),m(R),m(z.$$.fragment,H),V=!0)},o(H){_(P.$$.fragment,H),_(R),_(z.$$.fragment,H),V=!1},d(H){H&&(d(e),d(l),d(t),d(N),d(O),d(D)),v(P,H),F[j].d(H),v(z,H)}}}function lm(o){let e,l,t,n,r;e=new ze({props:{$$slots:{default:[Up]},$$scope:{ctx:o}}}),e.$on("click",o[13]);function s(i){o[25](i)}let f={title:`Filter ${o[3]} schemes`,$$slots:{default:[nm]},$$scope:{ctx:o}};return o[7]!==void 0&&(f.open=o[7]),t=new No({props:f}),B.push(()=>E(t,"open",s)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){w(e,i,a),g(i,l,a),w(t,i,a),r=!0},p(i,[a]){const u={};a&1073741824&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.title=`Filter ${i[3]} schemes`),a&1073743871&&(c.$$scope={dirty:a,ctx:i}),!n&&a&128&&(n=!0,c.open=i[7],U(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),r=!1},d(i){i&&d(l),v(e,i),v(t,i)}}}function rm(o){var t;let e=new Set;for(let n of Object.values(o.schemes))(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Ul(o){return o*621371e-9}function un(o){let e=[];for(let l of Object.values(o.schemes))e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function om(o,e,l){let t,{source:n}=e,{schemesGj:r}=e,{filterSchemeText:s}=e,{filterInterventionText:f}=e,i=!1,a=new Set,u={interventions:0,totalLength:0},c=Object.keys(kn).map(H=>[H,H]),p="",h=Object.fromEntries(Object.keys(Vt).map(H=>[H,!0])),k="";function T(H,ue,Ce,He,Xe){let Ie=H.toLowerCase(),rt=ue.toLowerCase(),Yt=de=>{var Ue,at,ft,ut;if(Ie&&!((Ue=de.properties.name)!=null&&Ue.toLowerCase().includes(Ie))&&!((at=de.properties.description)!=null&&at.toLowerCase().includes(Ie)))return!1;let Me=r.schemes[de.properties.scheme_reference];return!(Ce&&((ft=Me.browse)==null?void 0:ft.authority_or_region)!=Ce||n=="ATF"&&Me.browse.funding_programme&&!He[Me.browse.funding_programme]||Xe&&((ut=Me.browse)==null?void 0:ut.current_milestone)!=Xe||rt&&!Me.scheme_reference.toLowerCase().includes(rt)&&!(Me.scheme_name??"").toLowerCase().includes(rt))};l(8,a=new Set(r.features.filter(Yt).map(de=>de.properties.scheme_reference))),l(9,u={interventions:0,totalLength:0});let it=de=>{var Me,Ue;return!(!a.has(de.properties.scheme_reference)||Ie&&!((Me=de.properties.name)!=null&&Me.toLowerCase().includes(Ie))&&!((Ue=de.properties.description)!=null&&Ue.toLowerCase().includes(Ie)))};for(let de of r.features)it(de)?(delete de.properties.hide_while_editing,l(9,u.interventions++,u),de.geometry.type=="LineString"&&de.properties.length_meters&&l(9,u.totalLength+=de.properties.length_meters,u)):de.properties.hide_while_editing=!0;l(0,r),l(9,u)}function C(){l(4,p=""),l(5,h=Object.fromEntries(Object.keys(Vt).map(H=>[H,!0]))),l(6,k=""),l(2,f=""),l(1,s="")}const I=()=>l(7,i=!0);function M(){f=this.value,l(2,f)}const N=()=>l(2,f="");function P(H){s=H,l(1,s)}function O(H){p=H,l(4,p)}function j(H,ue){o.$$.not_equal(h[ue],H)&&(h[ue]=H,l(5,h))}function R(H){k=H,l(6,k)}function D(){f=this.value,l(2,f)}const z=()=>l(2,f="");function V(H){s=H,l(1,s)}function ae(H){p=H,l(4,p)}const F=()=>l(7,i=!1);function x(H){i=H,l(7,i)}return o.$$set=H=>{"source"in H&&l(3,n=H.source),"schemesGj"in H&&l(0,r=H.schemesGj),"filterSchemeText"in H&&l(1,s=H.filterSchemeText),"filterInterventionText"in H&&l(2,f=H.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&1&&l(10,t=rm(r)),o.$$.dirty&118&&T(f,s,p,h,k)},[r,s,f,n,p,h,k,i,a,u,t,c,C,I,M,N,P,O,j,R,D,z,V,ae,F,x]}class On extends Z{constructor(e){super(),X(this,e,om,lm,J,{source:3,schemesGj:0,filterSchemeText:1,filterInterventionText:2})}}const rn=Le({type:"FeatureCollection",features:[],schemes:{}}),Wl=Le(""),Yl=Le(""),$n=Le({type:"FeatureCollection",features:[],schemes:{}}),Jl=Le(""),Vl=Le(""),pn=Le({type:"FeatureCollection",features:[],schemes:{}}),Kl=Le(""),Ql=Le("");function Zl(o){let e,l,t,n=o[0].status+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Status",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].status+"")&&A(r,n)},d(s){s&&d(e)}}}function Xl(o){let e,l,t,n=o[0].timescale+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Timescale",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale+"")&&A(r,n)},d(s){s&&d(e)}}}function xl(o){let e,l,t,n=o[0].timescale_year+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Estimated completion year",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale_year+"")&&A(r,n)},d(s){s&&d(e)}}}function er(o){let e,l,t,n=o[0].year_published+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme most recently published",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_published+"")&&A(r,n)},d(s){s&&d(e)}}}function tr(o){let e,l,t,n=o[0].year_consulted+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme most recently consulted on",t=S(`
    : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&1&&n!==(n=s[0].year_consulted+"")&&A(r,n)},d(s){s&&d(e)}}}function sm(o){let e,l,t,n,r,s=o[0].status&&Zl(o),f=o[0].timescale&&Xl(o),i=o[0].timescale_year&&xl(o),a=o[0].year_published&&er(o),u=o[0].year_consulted&&tr(o);return{c(){s&&s.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=ge()},m(c,p){s&&s.m(c,p),g(c,e,p),f&&f.m(c,p),g(c,l,p),i&&i.m(c,p),g(c,t,p),a&&a.m(c,p),g(c,n,p),u&&u.m(c,p),g(c,r,p)},p(c,[p]){c[0].status?s?s.p(c,p):(s=Zl(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,p):(f=Xl(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,p):(i=xl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,p):(a=er(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,p):(u=tr(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:Q,o:Q,d(c){c&&(d(e),d(l),d(t),d(n),d(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function im(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Vr extends Z{constructor(e){super(),X(this,e,im,sm,J,{props:0})}}function nr(o){let e,l,t,n=o[0].budget.toLocaleString()+"",r,s;return{c(){e=y("p"),l=y("b"),l.textContent="Cost",t=S(`
    : `),r=S(n),s=S(`
    GBP`)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r),$(e,s)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&A(r,n)},d(f){f&&d(e)}}}function lr(o){let e;return{c(){e=y("p"),e.textContent="Development is fully funded"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function rr(o){let e;return{c(){e=y("p"),e.textContent="Construction is fully funded"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function or(o){let e,l,t,n;return{c(){e=y("p"),l=y("b"),l.textContent="Funding sources",t=S(`
    : `),n=S(o[1])},m(r,s){g(r,e,s),$(e,l),$(e,t),$(e,n)},p(r,s){s&2&&A(n,r[1])},d(r){r&&d(e)}}}function am(o){let e,l,t,n,r=o[0].budget&&nr(o),s=o[0].development_funded&&lr(),f=o[0].construction_funded&&rr(),i=o[1]&&or(o);return{c(){r&&r.c(),e=L(),s&&s.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=ge()},m(a,u){r&&r.m(a,u),g(a,e,u),s&&s.m(a,u),g(a,l,u),f&&f.m(a,u),g(a,t,u),i&&i.m(a,u),g(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=nr(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=lr(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=rr(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=or(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:Q,o:Q,d(a){a&&(d(e),d(l),d(t),d(n)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function fm(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function um(o,e,l){let t,{props:n}=e;return o.$$set=r=>{"props"in r&&l(0,n=r.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=fm(n))},[n,t]}class Kr extends Z{constructor(e){super(),X(this,e,um,am,J,{props:0})}}function mn(o){const e=o.slice(),l=e[5].pipeline;return e[11]=l,e}function _n(o){const e=o.slice(),l=JSON.parse(e[1].v2);return e[11]=l,e}function gn(o){const e=o.slice(),l=JSON.parse(e[1].pipeline);return e[11]=l,e}function sr(o){let e,l,t,n=En(o[1].length_meters)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Length",t=S(`
        : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=En(s[1].length_meters)+"")&&A(r,n)},d(s){s&&d(e)}}}function ir(o){let e,l=ct(o[1].description,o[3])+"";return{c(){e=y("p")},m(t,n){g(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=ct(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&d(e)}}}function ar(o){let e,l,t,n,r,s,f,i=o[11].atf4_type&&fr(o),a=o[11].accuracy&&ur(o),u=o[11].is_alternative&&cr();return n=new Kr({props:{props:o[11]}}),s=new Vr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(c,p){i&&i.m(c,p),g(c,e,p),a&&a.m(c,p),g(c,l,p),u&&u.m(c,p),g(c,t,p),w(n,c,p),g(c,r,p),w(s,c,p),f=!0},p(c,p){c[11].atf4_type?i?i.p(c,p):(i=fr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].accuracy?a?a.p(c,p):(a=ur(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].is_alternative?u||(u=cr(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const h={};p&2&&(h.props=c[11]),n.$set(h);const k={};p&2&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(d(e),d(l),d(t),d(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function fr(o){let e,l,t,n=o[11].atf4_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="ATF4 type",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].atf4_type+"")&&A(r,n)},d(s){s&&d(e)}}}function ur(o){let e,l,t,n=o[11].accuracy+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Accuracy",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].accuracy+"")&&A(r,n)},d(s){s&&d(e)}}}function cr(o){let e;return{c(){e=y("p"),e.textContent="Represents an alternative route"},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function $r(o){let e,l,t,n=o[11].intervention_type&&pr(o),r=o[11].work_type&&mr(o),s=o[11].intended_uses&&_r(o);return{c(){n&&n.c(),e=L(),r&&r.c(),l=L(),s&&s.c(),t=ge()},m(f,i){n&&n.m(f,i),g(f,e,i),r&&r.m(f,i),g(f,l,i),s&&s.m(f,i),g(f,t,i)},p(f,i){f[11].intervention_type?n?n.p(f,i):(n=pr(f),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),f[11].work_type?r?r.p(f,i):(r=mr(f),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null),f[11].intended_uses?s?s.p(f,i):(s=_r(f),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(f){f&&(d(e),d(l),d(t)),n&&n.d(f),r&&r.d(f),s&&s.d(f)}}}function pr(o){let e,l,t,n=o[11].intervention_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Type",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].intervention_type+"")&&A(r,n)},d(s){s&&d(e)}}}function mr(o){let e,l,t,n=o[11].work_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="What kind of infrastructure is mapped",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].work_type+"")&&A(r,n)},d(s){s&&d(e)}}}function _r(o){let e,l,t,n=o[11].intended_uses+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Intended uses",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&2&&n!==(n=s[11].intended_uses+"")&&A(r,n)},d(s){s&&d(e)}}}function gr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Capital scheme ID",t=S(`
        : `),r=S(n)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&A(r,n)},d(f){f&&d(e)}}}function dr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.funding_programme)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Funding programme",t=S(`
        : `),r=S(n)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&A(r,n)},d(f){f&&d(e)}}}function hr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Current milestone",t=S(`
        : `),r=S(n)},m(f,i){g(f,e,i),$(e,l),$(e,t),$(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&A(r,n)},d(f){f&&d(e)}}}function br(o){let e,l,t,n,r,s,f,i=o[11].scheme_type&&wr(o),a=o[11].atf4_lead_type&&vr(o),u=o[11].scheme_description&&kr(o);return n=new Kr({props:{props:o[11]}}),s=new Vr({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment)},m(c,p){i&&i.m(c,p),g(c,e,p),a&&a.m(c,p),g(c,l,p),u&&u.m(c,p),g(c,t,p),w(n,c,p),g(c,r,p),w(s,c,p),f=!0},p(c,p){c[11].scheme_type?i?i.p(c,p):(i=wr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].atf4_lead_type?a?a.p(c,p):(a=vr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].scheme_description?u?u.p(c,p):(u=kr(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const h={};p&32&&(h.props=c[11]),n.$set(h);const k={};p&32&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(d(e),d(l),d(t),d(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function wr(o){let e,l,t,n=o[11].scheme_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme type",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_type+"")&&A(r,n)},d(s){s&&d(e)}}}function vr(o){let e,l,t,n=o[11].atf4_lead_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="ATF4 lead type",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].atf4_lead_type+"")&&A(r,n)},d(s){s&&d(e)}}}function kr(o){let e,l,t,n=o[11].scheme_description+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Descripton",t=S(`
          : `),r=S(n)},m(s,f){g(s,e,f),$(e,l),$(e,t),$(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_description+"")&&A(r,n)},d(s){s&&d(e)}}}function cm(o){let e;return{c(){e=S("Edit a copy of this scheme")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function $m(o){let e;return{c(){e=S("Edit your existing version of this scheme")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function pm(o){let e;function l(r,s){var f;return(f=r[5].browse)!=null&&f.local_filename?$m:cm}let t=l(o),n=t(o);return{c(){n.c(),e=ge()},m(r,s){n.m(r,s),g(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function mm(o){let e;return{c(){e=S("Zoom to show entire scheme")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function yr(o){var Nn,Pn,Rn,Dn;let e,l,t,n,r,s,f,i=ct(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,p,h,k,T,C,I,M,N,P,O,j,R,D,z,V,ae=ct(o[5].scheme_name??"",o[2])+"",F,x,H,ue,Ce,He=ct(o[1].scheme_reference,o[2])+"",Xe,Ie,rt,Yt,it=((Nn=o[5].browse)==null?void 0:Nn.authority_or_region)+"",de,Me,Ue,at,ft,ut,W,nn,xe,et,Oe=o[1].length_meters&&sr(o),je=o[1].description&&ir(o),ke=o[1].pipeline&&ar(gn(o)),Ne=o[1].v2&&$r(_n(o)),Pe=((Pn=o[5].browse)==null?void 0:Pn.capital_scheme_id)&&gr(o),Re=((Rn=o[5].browse)==null?void 0:Rn.funding_programme)&&dr(o),De=((Dn=o[5].browse)==null?void 0:Dn.current_milestone)&&hr(o),ye=o[5].pipeline&&br(mn(o));return W=new ze({props:{$$slots:{default:[pm]},$$scope:{ctx:o}}}),W.$on("click",o[7]),xe=new ze({props:{$$slots:{default:[mm]},$$scope:{ctx:o}}}),xe.$on("click",o[6]),{c(){e=y("div"),l=y("h2"),l.textContent="Intervention",t=L(),n=y("p"),r=y("b"),r.textContent="Name",s=S(`
      : `),f=new Ut(!1),a=S(" ("),c=S(u),p=S(")"),h=L(),Oe&&Oe.c(),k=L(),je&&je.c(),T=L(),ke&&ke.c(),C=L(),Ne&&Ne.c(),I=L(),M=y("hr"),N=L(),P=y("h2"),O=S(o[0]),j=L(),R=y("p"),D=y("b"),D.textContent="Scheme name",z=S(`
      : `),V=new Ut(!1),F=L(),x=y("p"),H=y("b"),H.textContent="Scheme reference",ue=S(`
      : `),Ce=new Ut(!1),Xe=L(),Ie=y("p"),rt=y("b"),rt.textContent="Authority or region",Yt=S(`
      : `),de=S(it),Me=L(),Pe&&Pe.c(),Ue=L(),Re&&Re.c(),at=L(),De&&De.c(),ft=L(),ye&&ye.c(),ut=L(),b(W.$$.fragment),nn=L(),b(xe.$$.fragment),f.a=a,V.a=null,Ce.a=null,le(e,"max-width","30vw"),le(e,"max-height","60vh"),le(e,"overflow","auto")},m(oe,he){g(oe,e,he),$(e,l),$(e,t),$(e,n),$(n,r),$(n,s),f.m(i,n),$(n,a),$(n,c),$(n,p),$(e,h),Oe&&Oe.m(e,null),$(e,k),je&&je.m(e,null),$(e,T),ke&&ke.m(e,null),$(e,C),Ne&&Ne.m(e,null),$(e,I),$(e,M),$(e,N),$(e,P),$(P,O),$(e,j),$(e,R),$(R,D),$(R,z),V.m(ae,R),$(e,F),$(e,x),$(x,H),$(x,ue),Ce.m(He,x),$(e,Xe),$(e,Ie),$(Ie,rt),$(Ie,Yt),$(Ie,de),$(e,Me),Pe&&Pe.m(e,null),$(e,Ue),Re&&Re.m(e,null),$(e,at),De&&De.m(e,null),$(e,ft),ye&&ye.m(e,null),$(e,ut),w(W,e,null),$(e,nn),w(xe,e,null),o[9](e),et=!0},p(oe,he){var An,qn,zn,Hn;(!et||he&10)&&i!==(i=ct(oe[1].name,oe[3])+"")&&f.p(i),(!et||he&2)&&u!==(u=oe[1].intervention_type+"")&&A(c,u),oe[1].length_meters?Oe?Oe.p(oe,he):(Oe=sr(oe),Oe.c(),Oe.m(e,k)):Oe&&(Oe.d(1),Oe=null),oe[1].description?je?je.p(oe,he):(je=ir(oe),je.c(),je.m(e,T)):je&&(je.d(1),je=null),oe[1].pipeline?ke?(ke.p(gn(oe),he),he&2&&m(ke,1)):(ke=ar(gn(oe)),ke.c(),m(ke,1),ke.m(e,C)):ke&&(be(),_(ke,1,1,()=>{ke=null}),we()),oe[1].v2?Ne?Ne.p(_n(oe),he):(Ne=$r(_n(oe)),Ne.c(),Ne.m(e,I)):Ne&&(Ne.d(1),Ne=null),(!et||he&1)&&A(O,oe[0]),(!et||he&36)&&ae!==(ae=ct(oe[5].scheme_name??"",oe[2])+"")&&V.p(ae),(!et||he&6)&&He!==(He=ct(oe[1].scheme_reference,oe[2])+"")&&Ce.p(He),(!et||he&32)&&it!==(it=((An=oe[5].browse)==null?void 0:An.authority_or_region)+"")&&A(de,it),(qn=oe[5].browse)!=null&&qn.capital_scheme_id?Pe?Pe.p(oe,he):(Pe=gr(oe),Pe.c(),Pe.m(e,Ue)):Pe&&(Pe.d(1),Pe=null),(zn=oe[5].browse)!=null&&zn.funding_programme?Re?Re.p(oe,he):(Re=dr(oe),Re.c(),Re.m(e,at)):Re&&(Re.d(1),Re=null),(Hn=oe[5].browse)!=null&&Hn.current_milestone?De?De.p(oe,he):(De=hr(oe),De.c(),De.m(e,ft)):De&&(De.d(1),De=null),oe[5].pipeline?ye?(ye.p(mn(oe),he),he&32&&m(ye,1)):(ye=br(mn(oe)),ye.c(),m(ye,1),ye.m(e,ut)):ye&&(be(),_(ye,1,1,()=>{ye=null}),we());const Gn={};he&4128&&(Gn.$$scope={dirty:he,ctx:oe}),W.$set(Gn);const Fn={};he&4096&&(Fn.$$scope={dirty:he,ctx:oe}),xe.$set(Fn)},i(oe){et||(m(ke),m(ye),m(W.$$.fragment,oe),m(xe.$$.fragment,oe),et=!0)},o(oe){_(ke),_(ye),_(W.$$.fragment,oe),_(xe.$$.fragment,oe),et=!1},d(oe){oe&&d(e),Oe&&Oe.d(),je&&je.d(),ke&&ke.d(),Ne&&Ne.d(),Pe&&Pe.d(),Re&&Re.d(),De&&De.d(),ye&&ye.d(),v(W),v(xe),o[9](null)}}}function _m(o){let e=o[1],l,t,n=yr(o);return{c(){n.c(),l=ge()},m(r,s){n.m(r,s),g(r,l,s),t=!0},p(r,[s]){s&2&&J(e,e=r[1])?(be(),_(n,1,1,Q),we(),n=yr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n.d(r)}}}function ct(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function gm(o,e,l){let t,n;Y(o,cn,k=>l(10,n=k));let{description:r}=e,{props:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,u;lo(()=>{u&&l(4,u.scrollTop=0,u)});function c(){let k={type:"FeatureCollection",features:f.features.filter(T=>T.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(qr(k),{padding:20,animate:!1})}function p(){var I,M,N;let k={type:"FeatureCollection",features:f.features.filter(P=>P.properties.scheme_reference==t.scheme_reference),schemes:{}};k.schemes[t.scheme_reference]=t;let T=(I=t.browse)==null?void 0:I.authority_or_region;if(!T){window.alert("This scheme has no authority specified, you can't edit this");return}let C=t.pipeline?"pipeline":t.v2?"v2":"v1";if((M=t.browse)!=null&&M.local_filename)window.open(Kn(T,(N=t.browse)==null?void 0:N.local_filename,C),"_blank");else{let P=`browse_copy_${t.scheme_reference}`,O=Co(T,k);for(let j of O.features)delete j.properties.funding_programme,delete j.properties.current_milestone;Lo(Io(T,P),JSON.stringify(O)),window.open(Kn(T,P,C),"_blank")}}function h(k){B[k?"unshift":"push"](()=>{u=k,l(4,u)})}return o.$$set=k=>{"description"in k&&l(0,r=k.description),"props"in k&&l(1,s=k.props),"schemesGj"in k&&l(8,f=k.schemesGj),"filterSchemeText"in k&&l(2,i=k.filterSchemeText),"filterInterventionText"in k&&l(3,a=k.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=f.schemes[s.scheme_reference])},[r,s,i,a,u,t,c,p,f,h]}class jn extends Z{constructor(e){super(),X(this,e,gm,_m,J,{description:0,props:1,schemesGj:8,filterSchemeText:2,filterInterventionText:3})}}function dm(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&d(e)}}}function hm(o){let e,l;return e=new jn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function bm(o){let e,l,t,n;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[dm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[hm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),g(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function wm(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&d(e)}}}function vm(o){let e,l;return e=new jn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function km(o){let e,l,t,n;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[wm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[vm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),g(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function ym(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){g(n,e,r),$(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&d(e)}}}function Sm(o){let e,l;return e=new jn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Tm(o){let e,l,t,n;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[ym,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Sm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),g(r,l,s),w(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function Cm(o){let e,l,t,n,r,s,f,i,a,u;const c=[q(`${o[0]}-interventions-points`),{filter:["all",Jn,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":Un,"circle-opacity":te(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let p={$$slots:{default:[bm]},$$scope:{ctx:o}};for(let O=0;O<c.length;O+=1)p=ee(p,c[O]);e=new ht({props:p});const h=[q(`${o[0]}-interventions-lines`),{filter:["all",Vn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":Qt,"line-opacity":te(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[km]},$$scope:{ctx:o}};for(let O=0;O<h.length;O+=1)k=ee(k,h[O]);t=new _e({props:k});const T=[q(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Qt,"circle-opacity":0,"circle-stroke-color":nt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[2]?"visible":"none"}}];let C={};for(let O=0;O<T.length;O+=1)C=ee(C,T[O]);r=new ht({props:C});const I=[q(`${o[0]}-interventions-polygons`),{filter:["all",ln,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":te(.2,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let M={$$slots:{default:[Tm]},$$scope:{ctx:o}};for(let O=0;O<I.length;O+=1)M=ee(M,I[O]);f=new Ae({props:M});const N=[q(`${o[0]}-interventions-polygons-outlines`),{filter:["all",ln,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*Qt}},{layout:{visibility:o[2]?"visible":"none"}}];let P={};for(let O=0;O<N.length;O+=1)P=ee(P,N[O]);return a=new _e({props:P}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(O,j){w(e,O,j),g(O,l,j),w(t,O,j),g(O,n,j),w(r,O,j),g(O,s,j),w(f,O,j),g(O,i,j),w(a,O,j),u=!0},p(O,j){const R=j&837?ne(c,[j&1&&se(q(`${O[0]}-interventions-points`)),j&768&&{filter:["all",Jn,O[8],O[9]]},c[2],c[3],j&64&&{paint:{"circle-color":O[6],"circle-radius":Un,"circle-opacity":te(1,.5)}},j&4&&{layout:{visibility:O[2]?"visible":"none"}},c[6]]):{};j&2106&&(R.$$scope={dirty:j,ctx:O}),e.$set(R);const D=j&325?ne(h,[j&1&&se(q(`${O[0]}-interventions-lines`)),j&256&&{filter:["all",Vn,O[8]]},h[2],h[3],j&64&&{paint:{"line-color":O[6],"line-width":Qt,"line-opacity":te(1,.5)}},j&4&&{layout:{visibility:O[2]?"visible":"none"}},h[6]]):{};j&2106&&(D.$$scope={dirty:j,ctx:O}),t.$set(D);const z=j&5?ne(T,[j&1&&se(q(`${O[0]}-interventions-lines-endpoints`)),T[1],T[2],j&4&&{layout:{visibility:O[2]?"visible":"none"}}]):{};r.$set(z);const V=j&325?ne(I,[j&1&&se(q(`${O[0]}-interventions-polygons`)),j&256&&{filter:["all",ln,O[8]]},I[2],I[3],j&64&&{paint:{"fill-color":O[6],"fill-opacity":te(.2,.5)}},j&4&&{layout:{visibility:O[2]?"visible":"none"}},I[6]]):{};j&2106&&(V.$$scope={dirty:j,ctx:O}),f.$set(V);const ae=j&325?ne(N,[j&1&&se(q(`${O[0]}-interventions-polygons-outlines`)),j&256&&{filter:["all",ln,O[8]]},j&64&&{paint:{"line-color":O[6],"line-opacity":.5,"line-width":.7*Qt}},j&4&&{layout:{visibility:O[2]?"visible":"none"}}]):{};a.$set(ae)},i(O){u||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(r.$$.fragment,O),m(f.$$.fragment,O),m(a.$$.fragment,O),u=!0)},o(O){_(e.$$.fragment,O),_(t.$$.fragment,O),_(r.$$.fragment,O),_(f.$$.fragment,O),_(a.$$.fragment,O),u=!1},d(O){O&&(d(l),d(n),d(s),d(i)),v(e,O),v(t,O),v(r,O),v(f,O),v(a,O)}}}function Lm(o){let e,l;return e=new wt({props:{data:o[7],$$slots:{default:[Cm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Im(o,e,l){let t,{name:n}=e,{description:r}=e,{show:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],p=["!=",["get","endpoint"],!0];return o.$$set=h=>{"name"in h&&l(0,n=h.name),"description"in h&&l(1,r=h.description),"show"in h&&l(2,s=h.show),"schemesGj"in h&&l(3,f=h.schemesGj),"filterSchemeText"in h&&l(4,i=h.filterSchemeText),"filterInterventionText"in h&&l(5,a=h.filterInterventionText),"color"in h&&l(6,u=h.color)},o.$$.update=()=>{o.$$.dirty&8&&l(7,t=$o(f))},[n,r,s,f,i,a,u,t,c,p]}class dn extends Z{constructor(e){super(),X(this,e,Im,Lm,J,{name:0,description:1,show:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function Mm(o){return Ze(["get","intervention_type"],{area:nt.area,route:nt.route,crossing:nt.crossing,other:nt.other},"white")}function Om(o){return[["Areas",nt.area],["Routes",nt.route],["Crossings",nt.crossing],["Other",nt.other]]}function Sr(o,e,l){const t=o.slice();return t[42]=e[l],t}function Tr(o,e,l){const t=o.slice();return t[42]=e[l],t}function Cr(o,e,l){const t=o.slice();return t[42]=e[l],t}function jm(o){let e,l;return e=new zp({props:{loadFile:o[24]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p:Q,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Lr(o){let e,l,t;function n(s){o[31](s)}let r={name:Qr,title:Zr,$$slots:{controls:[Pm],help:[Nm]},$$scope:{ctx:o}};return o[12]!==void 0&&(r.show=o[12]),e=new fe({props:r}),B.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){const i={};f[0]&57473|f[1]&262144&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&4096&&(l=!0,i.show=s[12],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ir(o){let e,l,t=o[42]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){g(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&8192&&t!==(t=r[42]+"")&&A(n,t)},d(r){r&&d(e)}}}function Nm(o){let e,l,t,n,r,s,f;t=new Tn({props:{text:"Scheme data caveats"}});let i=me(o[13].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Ir(Cr(o,i,u));return{c(){e=y("span"),l=y("p"),b(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),w(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&8192){i=me(u[13].notes??[]);let p;for(p=0;p<i.length;p+=1){const h=Cr(u,i,p);a[p]?a[p].p(h,c):(a[p]=Ir(h),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),qe(a,u)}}}function Pm(o){let e,l,t,n,r,s,f,i,a,u,c;function p(M){o[27](M)}function h(M){o[28](M)}function k(M){o[29](M)}let T={source:"ATF"};o[13]!==void 0&&(T.schemesGj=o[13]),o[14]!==void 0&&(T.filterSchemeText=o[14]),o[15]!==void 0&&(T.filterInterventionText=o[15]),l=new On({props:T}),B.push(()=>E(l,"schemesGj",p)),B.push(()=>E(l,"filterSchemeText",h)),B.push(()=>E(l,"filterInterventionText",k));function C(M){o[30](M)}let I={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(I.value=o[0]),f=new Wt({props:I}),B.push(()=>E(f,"value",C)),u=new Kt({props:{rows:o[7]}}),{c(){e=y("div"),b(l.$$.fragment),s=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(M,N){g(M,e,N),w(l,e,null),$(e,s),w(f,e,null),$(e,a),w(u,e,null),c=!0},p(M,N){const P={};!t&&N[0]&8192&&(t=!0,P.schemesGj=M[13],U(()=>t=!1)),!n&&N[0]&16384&&(n=!0,P.filterSchemeText=M[14],U(()=>n=!1)),!r&&N[0]&32768&&(r=!0,P.filterInterventionText=M[15],U(()=>r=!1)),l.$set(P);const O={};!i&&N[0]&1&&(i=!0,O.value=M[0],U(()=>i=!1)),f.$set(O);const j={};N[0]&128&&(j.rows=M[7]),u.$set(j)},i(M){c||(m(l.$$.fragment,M),m(f.$$.fragment,M),m(u.$$.fragment,M),c=!0)},o(M){_(l.$$.fragment,M),_(f.$$.fragment,M),_(u.$$.fragment,M),c=!1},d(M){M&&d(e),v(l),v(f),v(u)}}}function Mr(o){let e,l,t;function n(s){o[36](s)}let r={name:Xr,title:xr,$$slots:{controls:[Dm],help:[Rm]},$$scope:{ctx:o}};return o[11]!==void 0&&(r.show=o[11]),e=new fe({props:r}),B.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){const i={};f[0]&458786|f[1]&262144&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&2048&&(l=!0,i.show=s[11],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Or(o){let e,l,t=o[42]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){g(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&65536&&t!==(t=r[42]+"")&&A(n,t)},d(r){r&&d(e)}}}function Rm(o){let e,l,t,n,r,s,f;t=new Tn({props:{text:"Scheme data caveats"}});let i=me(o[16].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Or(Tr(o,i,u));return{c(){e=y("span"),l=y("p"),b(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),w(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&65536){i=me(u[16].notes??[]);let p;for(p=0;p<i.length;p+=1){const h=Tr(u,i,p);a[p]?a[p].p(h,c):(a[p]=Or(h),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),qe(a,u)}}}function Dm(o){let e,l,t,n,r,s,f,i,a,u,c;function p(M){o[32](M)}function h(M){o[33](M)}function k(M){o[34](M)}let T={source:"LCWIP"};o[16]!==void 0&&(T.schemesGj=o[16]),o[17]!==void 0&&(T.filterSchemeText=o[17]),o[18]!==void 0&&(T.filterInterventionText=o[18]),l=new On({props:T}),B.push(()=>E(l,"schemesGj",p)),B.push(()=>E(l,"filterSchemeText",h)),B.push(()=>E(l,"filterInterventionText",k));function C(M){o[35](M)}let I={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(I.value=o[1]),f=new Wt({props:I}),B.push(()=>E(f,"value",C)),u=new Kt({props:{rows:o[5]}}),{c(){e=y("div"),b(l.$$.fragment),s=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(M,N){g(M,e,N),w(l,e,null),$(e,s),w(f,e,null),$(e,a),w(u,e,null),c=!0},p(M,N){const P={};!t&&N[0]&65536&&(t=!0,P.schemesGj=M[16],U(()=>t=!1)),!n&&N[0]&131072&&(n=!0,P.filterSchemeText=M[17],U(()=>n=!1)),!r&&N[0]&262144&&(r=!0,P.filterInterventionText=M[18],U(()=>r=!1)),l.$set(P);const O={};!i&&N[0]&2&&(i=!0,O.value=M[1],U(()=>i=!1)),f.$set(O);const j={};N[0]&32&&(j.rows=M[5]),u.$set(j)},i(M){c||(m(l.$$.fragment,M),m(f.$$.fragment,M),m(u.$$.fragment,M),c=!0)},o(M){_(l.$$.fragment,M),_(f.$$.fragment,M),_(u.$$.fragment,M),c=!1},d(M){M&&d(e),v(l),v(f),v(u)}}}function Gm(o){let e=Object.entries(o[13].schemes).length>0,l,t=Object.entries(o[16].schemes).length>0,n,r,s=e&&Lr(o),f=t&&Mr(o);return{c(){s&&s.c(),l=L(),f&&f.c(),n=ge()},m(i,a){s&&s.m(i,a),g(i,l,a),f&&f.m(i,a),g(i,n,a),r=!0},p(i,a){a[0]&8192&&(e=Object.entries(i[13].schemes).length>0),e?s?(s.p(i,a),a[0]&8192&&m(s,1)):(s=Lr(i),s.c(),m(s,1),s.m(l.parentNode,l)):s&&(be(),_(s,1,1,()=>{s=null}),we()),a[0]&65536&&(t=Object.entries(i[16].schemes).length>0),t?f?(f.p(i,a),a[0]&65536&&m(f,1)):(f=Mr(i),f.c(),m(f,1),f.m(n.parentNode,n)):f&&(be(),_(f,1,1,()=>{f=null}),we())},i(i){r||(m(s),m(f),r=!0)},o(i){_(s),_(f),r=!1},d(i){i&&(d(l),d(n)),s&&s.d(i),f&&f.d(i)}}}function Fm(o){let e;return{c(){e=S("Show your sketches")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function jr(o){let e,l,t;function n(s){o[40](s)}let r={name:eo,title:to,$$slots:{controls:[Hm],help:[Am]},$$scope:{ctx:o}};return o[10]!==void 0&&(r.show=o[10]),e=new fe({props:r}),B.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(s,f){w(e,s,f),t=!0},p(s,f){const i={};f[0]&1573384|f[1]&262144&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&1024&&(l=!0,i.show=s[10],U(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Nr(o){let e,l,t=o[42]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){g(r,e,s),$(e,l),$(l,n)},p(r,s){s[0]&512&&t!==(t=r[42]+"")&&A(n,t)},d(r){r&&d(e)}}}function Am(o){let e,l,t,n,r,s,f;t=new Tn({props:{text:"Scheme data caveats"}});let i=me(o[9].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Nr(Sr(o,i,u));return{c(){e=y("span"),l=y("p"),b(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){g(u,e,c),$(e,l),w(t,l,null),$(l,n),$(e,r),$(e,s);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(s,null);f=!0},p(u,c){if(c[0]&512){i=me(u[9].notes??[]);let p;for(p=0;p<i.length;p+=1){const h=Sr(u,i,p);a[p]?a[p].p(h,c):(a[p]=Nr(h),a[p].c(),a[p].m(s,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),qe(a,u)}}}function qm(o){let e;return{c(){e=S("Download all schemes")},m(l,t){g(l,e,t)},d(l){l&&d(e)}}}function zm(o){let e,l,t,n,r,s,f;function i(p){o[37](p)}function a(p){o[38](p)}function u(p){o[39](p)}let c={source:"Local"};return o[9]!==void 0&&(c.schemesGj=o[9]),o[19]!==void 0&&(c.filterSchemeText=o[19]),o[20]!==void 0&&(c.filterInterventionText=o[20]),e=new On({props:c}),B.push(()=>E(e,"schemesGj",i)),B.push(()=>E(e,"filterSchemeText",a)),B.push(()=>E(e,"filterInterventionText",u)),s=new ze({props:{$$slots:{default:[qm]},$$scope:{ctx:o}}}),s.$on("click",o[26]),{c(){b(e.$$.fragment),r=L(),b(s.$$.fragment)},m(p,h){w(e,p,h),g(p,r,h),w(s,p,h),f=!0},p(p,h){const k={};!l&&h[0]&512&&(l=!0,k.schemesGj=p[9],U(()=>l=!1)),!t&&h[0]&524288&&(t=!0,k.filterSchemeText=p[19],U(()=>t=!1)),!n&&h[0]&1048576&&(n=!0,k.filterInterventionText=p[20],U(()=>n=!1)),e.$set(k);const T={};h[1]&262144&&(T.$$scope={dirty:h,ctx:p}),s.$set(T)},i(p){f||(m(e.$$.fragment,p),m(s.$$.fragment,p),f=!0)},o(p){_(e.$$.fragment,p),_(s.$$.fragment,p),f=!1},d(p){p&&d(r),v(e,p),v(s,p)}}}function Hm(o){let e,l,t,n,r;return l=new Oo({props:{$$slots:{default:[zm]},$$scope:{ctx:o}}}),n=new Kt({props:{rows:o[3]}}),{c(){e=y("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),G(e,"slot","controls"),le(e,"border","1px solid black"),le(e,"padding","8px")},m(s,f){g(s,e,f),w(l,e,null),$(e,t),w(n,e,null),r=!0},p(s,f){const i={};f[0]&1573376|f[1]&262144&&(i.$$scope={dirty:f,ctx:s}),l.$set(i);const a={};f[0]&8&&(a.rows=s[3]),n.$set(a)},i(s){r||(m(l.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(l),v(n)}}}function Bm(o){let e=Object.entries(o[9].schemes).length>0,l,t,n=e&&jr(o);return{c(){n&&n.c(),l=ge()},m(r,s){n&&n.m(r,s),g(r,l,s),t=!0},p(r,s){s[0]&512&&(e=Object.entries(r[9].schemes).length>0),e?n?(n.p(r,s),s[0]&512&&m(n,1)):(n=jr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n&&(be(),_(n,1,1,()=>{n=null}),we())},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n&&n.d(r)}}}function Em(o){let e=Ar()=="Private (development)",l,t,n,r,s,f,i,a,u,c,p,h,k,T=e&&jm(o);return t=new Ge({props:{small:!0,$$slots:{default:[Gm]},$$scope:{ctx:o}}}),r=new Ur({props:{label:"Load schemes from GeoJSON",onLoad:o[24]}}),f=new So({props:{errorMessage:o[2]}}),c=new ze({props:{$$slots:{default:[Fm]},$$scope:{ctx:o}}}),c.$on("click",o[25]),h=new Ge({props:{small:!0,$$slots:{default:[Bm]},$$scope:{ctx:o}}}),{c(){T&&T.c(),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),a=y("hr"),u=L(),b(c.$$.fragment),p=L(),b(h.$$.fragment)},m(C,I){T&&T.m(C,I),g(C,l,I),w(t,C,I),g(C,n,I),w(r,C,I),g(C,s,I),w(f,C,I),g(C,i,I),g(C,a,I),g(C,u,I),w(c,C,I),g(C,p,I),w(h,C,I),k=!0},p(C,I){e&&T.p(C,I);const M={};I[0]&522403|I[1]&262144&&(M.$$scope={dirty:I,ctx:C}),t.$set(M);const N={};I[0]&4&&(N.errorMessage=C[2]),f.$set(N);const P={};I[1]&262144&&(P.$$scope={dirty:I,ctx:C}),c.$set(P);const O={};I[0]&1574408|I[1]&262144&&(O.$$scope={dirty:I,ctx:C}),h.$set(O)},i(C){k||(m(T),m(t.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C),m(c.$$.fragment,C),m(h.$$.fragment,C),k=!0)},o(C){_(T),_(t.$$.fragment,C),_(r.$$.fragment,C),_(f.$$.fragment,C),_(c.$$.fragment,C),_(h.$$.fragment,C),k=!1},d(C){C&&(d(l),d(n),d(s),d(i),d(a),d(u),d(p)),T&&T.d(C),v(t,C),v(r,C),v(f,C),v(c,C),v(h,C)}}}function Um(o){let e,l,t,n,r,s,f,i;return e=new ot({props:{label:"Schemes",open:!0,$$slots:{default:[Em]},$$scope:{ctx:o}}}),t=new dn({props:{name:"atf",description:Zr,show:o[12],schemesGj:o[13],filterSchemeText:o[14],filterInterventionText:o[15],color:o[8]}}),r=new dn({props:{name:"lcwip",description:xr,show:o[11],schemesGj:o[16],filterSchemeText:o[17],filterInterventionText:o[18],color:o[6]}}),f=new dn({props:{name:"local",description:to,show:o[10],schemesGj:o[9],filterSchemeText:o[19],filterInterventionText:o[20],color:o[4]}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),g(a,l,u),w(t,a,u),g(a,n,u),w(r,a,u),g(a,s,u),w(f,a,u),i=!0},p(a,u){const c={};u[0]&2096815|u[1]&262144&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const p={};u[0]&4096&&(p.show=a[12]),u[0]&8192&&(p.schemesGj=a[13]),u[0]&16384&&(p.filterSchemeText=a[14]),u[0]&32768&&(p.filterInterventionText=a[15]),u[0]&256&&(p.color=a[8]),t.$set(p);const h={};u[0]&2048&&(h.show=a[11]),u[0]&65536&&(h.schemesGj=a[16]),u[0]&131072&&(h.filterSchemeText=a[17]),u[0]&262144&&(h.filterInterventionText=a[18]),u[0]&64&&(h.color=a[6]),r.$set(h);const k={};u[0]&1024&&(k.show=a[10]),u[0]&512&&(k.schemesGj=a[9]),u[0]&524288&&(k.filterSchemeText=a[19]),u[0]&1048576&&(k.filterInterventionText=a[20]),u[0]&16&&(k.color=a[4]),f.$set(k)},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(d(l),d(n),d(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}let Qr="atf_schemes",Zr="ATF schemes",Xr="lcwip_schemes",xr="LCWIP schemes",eo="local_schemes",to="Your schemes";function Wm(o,e,l){let t,n,r,s,f,i,a,u,c,p,h,k,T,C,I,M,N,P;Y(o,pn,W=>l(9,a=W)),Y(o,rn,W=>l(13,h=W)),Y(o,Yl,W=>l(14,k=W)),Y(o,Wl,W=>l(15,T=W)),Y(o,$n,W=>l(16,C=W)),Y(o,Vl,W=>l(17,I=W)),Y(o,Jl,W=>l(18,M=W)),Y(o,Ql,W=>l(19,N=W)),Y(o,Kl,W=>l(20,P=W));let O="",j=ce(Qr);Y(o,j,W=>l(12,p=W));let R="fundingProgramme",D=ce(Xr);Y(o,D,W=>l(11,c=W));let z="interventionType",V=ce(eo);Y(o,V,W=>l(10,u=W));function ae(W,nn){try{Hp(JSON.parse(nn),rn,$n),$t(j,p=!0,p),$t(D,c=!0,c),l(2,O="")}catch(xe){l(2,O=`The file you loaded is broken: ${xe}`)}}function F(){$t(pn,a=Ep(),a),$t(V,u=!0,u)}function x(W){return W=="interventionType"?[Mm(),Om()]:W=="fundingProgramme"?[Ze(["get","funding_programme"],Vt,"grey"),Object.entries(Vt)]:W=="currentMilestone"?[Ze(["get","current_milestone"],kn,"grey"),Object.entries(kn)]:["red",[]]}function H(){Mo("all_your_schemes.geojson",JSON.stringify(a,null,"  "))}function ue(W){h=W,rn.set(h)}function Ce(W){k=W,Yl.set(k)}function He(W){T=W,Wl.set(T)}function Xe(W){R=W,l(0,R)}function Ie(W){p=W,j.set(p)}function rt(W){C=W,$n.set(C)}function Yt(W){I=W,Vl.set(I)}function it(W){M=W,Jl.set(M)}function de(W){z=W,l(1,z)}function Me(W){c=W,D.set(c)}function Ue(W){a=W,pn.set(a)}function at(W){N=W,Ql.set(N)}function ft(W){P=W,Kl.set(P)}function ut(W){u=W,V.set(u)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(8,[t,n]=x(R),t,(l(7,n),l(0,R))),o.$$.dirty[0]&2&&l(6,[r,s]=x(z),r,(l(5,s),l(1,z)))},l(4,[f,i]=x("interventionType"),f,l(3,i)),[R,z,O,i,f,s,r,n,t,a,u,c,p,h,k,T,C,I,M,N,P,j,D,V,ae,F,H,ue,Ce,He,Xe,Ie,rt,Yt,it,de,Me,Ue,at,ft,ut]}class Ym extends Z{constructor(e){super(),X(this,e,Wm,Um,J,{},null,[-1,-1])}}const Pr=Le(!0);let yn=Le(null);function Jm(o){let e,l,t,n,r,s,f,i;return e=new n$({}),t=new $$({}),r=new R$({}),f=new y$({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),g(a,l,u),w(t,a,u),g(a,n,u),w(r,a,u),g(a,s,u),w(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(d(l),d(n),d(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function Vm(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[Jm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Km(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k;return e=new hf({}),t=new Vf({}),r=new If({}),f=new Af({}),a=new Bc({}),c=new vc({}),h=new Na({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),u=L(),b(c.$$.fragment),p=L(),b(h.$$.fragment)},m(T,C){w(e,T,C),g(T,l,C),w(t,T,C),g(T,n,C),w(r,T,C),g(T,s,C),w(f,T,C),g(T,i,C),w(a,T,C),g(T,u,C),w(c,T,C),g(T,p,C),w(h,T,C),k=!0},i(T){k||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(a.$$.fragment,T),m(c.$$.fragment,T),m(h.$$.fragment,T),k=!0)},o(T){_(e.$$.fragment,T),_(t.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),_(a.$$.fragment,T),_(c.$$.fragment,T),_(h.$$.fragment,T),k=!1},d(T){T&&(d(l),d(n),d(s),d(i),d(u),d(p)),v(e,T),v(t,T),v(r,T),v(f,T),v(a,T),v(c,T),v(h,T)}}}function Qm(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[Km]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Zm(o){let e,l,t,n,r,s;return e=new lf({}),t=new ec({}),r=new uc({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,i){w(e,f,i),g(f,l,i),w(t,f,i),g(f,n,i),w(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n)),v(e,f),v(t,f),v(r,f)}}}function Xm(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[Zm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function xm(o){let e,l,t,n,r,s,f,i,a,u;return e=new xi({}),t=new Ea({}),r=new si({}),f=new Ii({}),a=new Bi({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(c,p){w(e,c,p),g(c,l,p),w(t,c,p),g(c,n,p),w(r,c,p),g(c,s,p),w(f,c,p),g(c,i,p),w(a,c,p),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(d(l),d(n),d(s),d(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function e_(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[xm]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function t_(o){let e,l,t,n;return e=new Ks({}),t=new di({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,s){w(e,r,s),g(r,l,s),w(t,r,s),n=!0},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function n_(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[t_]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function l_(o){let e,l,t,n,r,s,f,i;return e=new Yu({}),t=new iu({}),r=new Gu({}),f=new wp({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),g(a,l,u),w(t,a,u),g(a,n,u),w(r,a,u),g(a,s,u),w(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(d(l),d(n),d(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function r_(o){let e,l,t,n,r,s,f,i,a=Ar()=="Private (development)",u,c,p,h,k,T,C;e=new up({}),t=new X$({}),r=new yu({}),f=new jc({});let I=a&&l_();return c=new fa({}),h=new ba({}),T=new Np({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),s=L(),b(f.$$.fragment),i=L(),I&&I.c(),u=L(),b(c.$$.fragment),p=L(),b(h.$$.fragment),k=L(),b(T.$$.fragment)},m(M,N){w(e,M,N),g(M,l,N),w(t,M,N),g(M,n,N),w(r,M,N),g(M,s,N),w(f,M,N),g(M,i,N),I&&I.m(M,N),g(M,u,N),w(c,M,N),g(M,p,N),w(h,M,N),g(M,k,N),w(T,M,N),C=!0},p:Q,i(M){C||(m(e.$$.fragment,M),m(t.$$.fragment,M),m(r.$$.fragment,M),m(f.$$.fragment,M),m(I),m(c.$$.fragment,M),m(h.$$.fragment,M),m(T.$$.fragment,M),C=!0)},o(M){_(e.$$.fragment,M),_(t.$$.fragment,M),_(r.$$.fragment,M),_(f.$$.fragment,M),_(I),_(c.$$.fragment,M),_(h.$$.fragment,M),_(T.$$.fragment,M),C=!1},d(M){M&&(d(l),d(n),d(s),d(i),d(u),d(p),d(k)),v(e,M),v(t,M),v(r,M),v(f,M),I&&I.d(M),v(c,M),v(h,M),v(T,M)}}}function o_(o){let e,l;return e=new Ge({props:{small:!0,$$slots:{default:[r_]},$$scope:{ctx:o}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function s_(o){let e,l,t,n,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new mo({props:f}),B.push(()=>E(e,"enabled",s)),n=new os({}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),g(i,t,a),w(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],U(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}function i_(o){let e,l;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=ee(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,s){w(e,r,s),l=!0},p(r,s){const f=s&2?ne(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function a_(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,T,C,I,M,N,P,O;return l=new Ym({}),n=new ot({props:{label:"Trip generators",$$slots:{default:[Vm]},$$scope:{ctx:o}}}),s=new ot({props:{label:"Existing infrastructure",$$slots:{default:[Qm]},$$scope:{ctx:o}}}),i=new ot({props:{label:"Public transport",$$slots:{default:[Xm]},$$scope:{ctx:o}}}),u=new ot({props:{label:"Boundaries",$$slots:{default:[e_]},$$scope:{ctx:o}}}),p=new ot({props:{label:"Census",$$slots:{default:[n_]},$$scope:{ctx:o}}}),k=new ot({props:{label:"Other",$$slots:{default:[o_]},$$scope:{ctx:o}}}),C=new ot({props:{label:"Tools",$$slots:{default:[s_]},$$scope:{ctx:o}}}),M=new po({props:{disabled:!o[1]}}),P=new wt({props:{data:o[4],$$slots:{default:[i_]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(s.$$.fragment),f=L(),b(i.$$.fragment),a=L(),b(u.$$.fragment),c=L(),b(p.$$.fragment),h=L(),b(k.$$.fragment),T=L(),b(C.$$.fragment),I=L(),b(M.$$.fragment),N=L(),b(P.$$.fragment)},m(j,R){g(j,e,R),w(l,e,null),$(e,t),w(n,e,null),$(e,r),w(s,e,null),$(e,f),w(i,e,null),$(e,a),w(u,e,null),$(e,c),w(p,e,null),$(e,h),w(k,e,null),$(e,T),w(C,e,null),$(e,I),w(M,e,null),o[7](e),g(j,N,R),w(P,j,R),O=!0},p(j,[R]){const D={};R&256&&(D.$$scope={dirty:R,ctx:j}),n.$set(D);const z={};R&256&&(z.$$scope={dirty:R,ctx:j}),s.$set(z);const V={};R&256&&(V.$$scope={dirty:R,ctx:j}),i.$set(V);const ae={};R&256&&(ae.$$scope={dirty:R,ctx:j}),u.$set(ae);const F={};R&256&&(F.$$scope={dirty:R,ctx:j}),p.$set(F);const x={};R&256&&(x.$$scope={dirty:R,ctx:j}),k.$set(x);const H={};R&265&&(H.$$scope={dirty:R,ctx:j}),C.$set(H);const ue={};R&2&&(ue.disabled=!j[1]),M.$set(ue);const Ce={};R&258&&(Ce.$$scope={dirty:R,ctx:j}),P.$set(Ce)},i(j){O||(m(l.$$.fragment,j),m(n.$$.fragment,j),m(s.$$.fragment,j),m(i.$$.fragment,j),m(u.$$.fragment,j),m(p.$$.fragment,j),m(k.$$.fragment,j),m(C.$$.fragment,j),m(M.$$.fragment,j),m(P.$$.fragment,j),O=!0)},o(j){_(l.$$.fragment,j),_(n.$$.fragment,j),_(s.$$.fragment,j),_(i.$$.fragment,j),_(u.$$.fragment,j),_(p.$$.fragment,j),_(k.$$.fragment,j),_(C.$$.fragment,j),_(M.$$.fragment,j),_(P.$$.fragment,j),O=!1},d(j){j&&(d(e),d(N)),v(l),v(n),v(s),v(i),v(u),v(p),v(k),v(C),v(M),o[7](null),v(P,j)}}}function f_(o,e,l){let t,n,r,s;Y(o,Pr,c=>l(1,n=c)),Y(o,yn,c=>l(2,r=c)),Y(o,cn,c=>l(3,s=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>ao(c,ro(bn))};function a(c){t=c,l(0,t),l(1,n)}function u(c){B[c?"unshift":"push"](()=>{r=c,yn.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&Pr.set(!t)},[t,n,r,s,f,i,a,u]}class u_ extends Z{constructor(e){super(),X(this,e,f_,a_,J,{})}}function c_(o){let e,l,t;return{c(){e=y("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=y("div")},m(n,r){g(n,e,r),g(n,l,r),g(n,t,r),o[3](t)},p:Q,i:Q,o:Q,d(n){n&&(d(e),d(l),d(t)),o[3](null)}}}function $_(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function p_(o,e,l){let t,n;Y(o,vn,f=>l(1,t=f)),Y(o,Zt,f=>l(2,n=f));let r=null;function s(f){B[f?"unshift":"push"](()=>{r=f,l(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&$_(r,n,t)},[r,t,n,s]}class m_ extends Z{constructor(e){super(),X(this,e,p_,c_,J,{})}}function __(o){let e,l,t,n,r,s,f,i,a,u,c,p,h,k,T;return l=new To({}),n=new oo({}),f=new ko({}),p=new us({props:{boundaryGeojson:o[3]}}),{c(){e=y("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),s=y("div"),b(f.$$.fragment),i=L(),a=y("div"),u=y("h1"),u.textContent="Scheme Browser",c=L(),b(p.$$.fragment),h=L(),k=y("div"),le(s,"border-bottom","1px solid #b1b4b6"),le(a,"display","flex"),le(a,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(C,I){g(C,e,I),w(l,e,null),$(e,t),w(n,e,null),$(e,r),$(e,s),w(f,s,null),$(e,i),$(e,a),$(a,u),$(a,c),w(p,a,null),$(e,h),$(e,k),o[6](k),T=!0},p(C,I){const M={};I&8&&(M.boundaryGeojson=C[3]),p.$set(M)},i(C){T||(m(l.$$.fragment,C),m(n.$$.fragment,C),m(f.$$.fragment,C),m(p.$$.fragment,C),T=!0)},o(C){_(l.$$.fragment,C),_(n.$$.fragment,C),_(f.$$.fragment,C),_(p.$$.fragment,C),T=!1},d(C){C&&d(e),v(l),v(n),v(f),v(p),o[6](null)}}}function Rr(o){let e,l;return e=new u_({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function g_(o){let e,l,t,n;e=new _o({});let r=o[2]&&Rr();return{c(){b(e.$$.fragment),l=L(),r&&r.c(),t=ge()},m(s,f){w(e,s,f),g(s,l,f),r&&r.m(s,f),g(s,t,f),n=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=Rr(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(be(),_(r,1,1,()=>{r=null}),we())},i(s){n||(m(e.$$.fragment,s),m(r),n=!0)},o(s){_(e.$$.fragment,s),_(r),n=!1},d(s){s&&(d(l),d(t)),v(e,s),r&&r.d(s)}}}function d_(o){let e,l,t;return l=new yo({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[g_]},$$scope:{ctx:o}}}),{c(){e=y("div"),b(l.$$.fragment),G(e,"slot","main")},m(n,r){g(n,e,r),w(l,e,null),t=!0},p(n,r){const s={};r&2&&(s.style=n[1]),r&260&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function h_(o){let e,l,t,n,r;return e=new qo({props:{$$slots:{main:[d_],sidebar:[__]},$$scope:{ctx:o}}}),n=new m_({}),{c(){b(e.$$.fragment),l=L(),t=y("div"),b(n.$$.fragment),G(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){w(e,s,f),g(s,l,f),g(s,t,f),w(n,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(e.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&(d(l),d(t)),v(e,s),v(n)}}}function b_(o,e,l){let t,n,r,s,f;Y(o,yn,c=>l(4,t=c)),Y(o,cn,c=>l(5,n=c)),Y(o,bn,c=>l(1,r=c)),Y(o,Wn,c=>l(2,s=c)),Y(o,rn,c=>l(3,f=c)),Fr(()=>{so()});const i=new URLSearchParams(window.location.search);bn.set(i.get("style")||"dataviz");let a;function u(c){B[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&Wn.set(n),o.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,n,u]}class w_ extends Z{constructor(e){super(),X(this,e,b_,h_,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new w_({target:document.getElementById("app")});
