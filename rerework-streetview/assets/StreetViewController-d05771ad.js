var Pe=Object.defineProperty;var Be=(s,e,t)=>e in s?Pe(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var A=(s,e,t)=>(Be(s,typeof e!="symbol"?e+"":e,t),t);import{S as C,i as L,s as V,G as I,e as h,h as p,j as w,k,K as D,L as H,M as O,t as g,l as b,p as $,f as E,X as Q,w as G,aL as Se,P as Ce,aZ as Me,F as Ie,g as P,m as B,q as M,V as F,ad as x,aM as De,a_ as se,W as Le,a$ as He,v as X,u as N,U as ee,b as W,c as te,o as ne,x as Y,Q as Oe,aH as Ve,b0 as oe,y as T,n as q,b1 as Re,r as je,A as K,B as Z,ag as ze,aC as Ge,a as le,_ as z,C as Te,a2 as qe,a0 as Ne,a8 as ae,a7 as ie,a1 as Ze,ac as Ae,ab as Fe,aa as re,az as ce,b2 as J,aA as ue,R as We,b3 as fe}from"./MapLibreMap.svelte_svelte_type_style_lang-8940004f.js";function Ke(s){let e,t,n;const l=s[3].default,o=I(l,s,s[2],null);return{c(){e=h("fieldset"),t=h("div"),o&&o.c(),p(t,"class",s[0]),p(t,"data-module","govuk-checkboxes"),p(e,"class","govuk-fieldset")},m(a,r){w(a,e,r),k(e,t),o&&o.m(t,null),n=!0},p(a,[r]){o&&o.p&&(!n||r&4)&&D(o,l,a,a[2],n?O(l,a[2],r,null):H(a[2]),null)},i(a){n||(g(o,a),n=!0)},o(a){b(o,a),n=!1},d(a){a&&$(e),o&&o.d(a)}}}function Je(s,e,t){let{$$slots:n={},$$scope:l}=e,{small:o=!1}=e,a=o?"govuk-checkboxes--small":"govuk-checkboxes";return s.$$set=r=>{"small"in r&&t(1,o=r.small),"$$scope"in r&&t(2,l=r.$$scope)},[a,o,l,n]}class qt extends C{constructor(e){super(),L(this,e,Je,Ke,V,{small:1})}}const Ue=s=>({}),de=s=>({});function Qe(s){let e,t,n,l,o,a,r,i,c;const u=s[5].default,d=I(u,s,s[4],null),m=s[5].right,_=I(m,s,s[4],de);return{c(){e=h("div"),t=h("input"),n=E(),l=h("label"),d&&d.c(),o=E(),a=h("span"),_&&_.c(),p(t,"type","checkbox"),p(t,"class","govuk-checkboxes__input"),p(t,"id",s[1]),p(l,"class","govuk-label govuk-checkboxes__label"),p(l,"for",s[1]),p(l,"title",s[2]),Q(a,"float","right"),p(e,"class","govuk-checkboxes__item"),p(e,"style",s[3])},m(f,v){w(f,e,v),k(e,t),t.checked=s[0],k(e,n),k(e,l),d&&d.m(l,null),k(e,o),k(e,a),_&&_.m(a,null),r=!0,i||(c=[G(t,"change",s[7]),G(t,"change",s[6])],i=!0)},p(f,[v]){(!r||v&2)&&p(t,"id",f[1]),v&1&&(t.checked=f[0]),d&&d.p&&(!r||v&16)&&D(d,u,f,f[4],r?O(u,f[4],v,null):H(f[4]),null),(!r||v&2)&&p(l,"for",f[1]),(!r||v&4)&&p(l,"title",f[2]),_&&_.p&&(!r||v&16)&&D(_,m,f,f[4],r?O(m,f[4],v,Ue):H(f[4]),de)},i(f){r||(g(d,f),g(_,f),r=!0)},o(f){b(d,f),b(_,f),r=!1},d(f){f&&$(e),d&&d.d(f),_&&_.d(f),i=!1,Se(c)}}}function Xe(s,e,t){let{$$slots:n={},$$scope:l}=e;const o=Me(n);let{id:a}=e,{checked:r}=e,{hint:i=null}=e,u=o.right!==void 0?"float: none":"";function d(_){Ce.call(this,s,_)}function m(){r=this.checked,t(0,r)}return s.$$set=_=>{"id"in _&&t(1,a=_.id),"checked"in _&&t(0,r=_.checked),"hint"in _&&t(2,i=_.hint),"$$scope"in _&&t(4,l=_.$$scope)},[r,a,i,u,l,n,d,m]}class Nt extends C{constructor(e){super(),L(this,e,Xe,Qe,V,{id:1,checked:0,hint:2})}}function _e(s,e,t){const n=s.slice();return n[8]=e[t][0],n[9]=e[t][1],n}function me(s){let e;return{c(){e=h("option"),e.__value="",X(e,e.__value)},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function pe(s){let e,t=s[9]+"",n,l;return{c(){e=h("option"),n=N(t),e.__value=l=s[8],X(e,e.__value)},m(o,a){w(o,e,a),k(e,n)},p(o,a){a&8&&t!==(t=o[9]+"")&&ee(n,t),a&8&&l!==(l=o[8])&&(e.__value=l,X(e,e.__value))},d(o){o&&$(e)}}}function Ye(s){let e,t,n,l,o=s[4]&&me(),a=F(s[3]),r=[];for(let i=0;i<a.length;i+=1)r[i]=pe(_e(s,a,i));return{c(){e=h("select"),o&&o.c(),t=x();for(let i=0;i<r.length;i+=1)r[i].c();p(e,"class","govuk-select"),p(e,"id",s[2]),e.disabled=s[5],s[0]===void 0&&De(()=>s[7].call(e))},m(i,c){w(i,e,c),o&&o.m(e,null),k(e,t);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);se(e,s[0],!0),n||(l=[G(e,"change",s[7]),G(e,"change",s[6])],n=!0)},p(i,c){if(i[4]?o||(o=me(),o.c(),o.m(e,t)):o&&(o.d(1),o=null),c&8){a=F(i[3]);let u;for(u=0;u<a.length;u+=1){const d=_e(i,a,u);r[u]?r[u].p(d,c):(r[u]=pe(d),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=a.length}c&4&&p(e,"id",i[2]),c&32&&(e.disabled=i[5]),c&9&&se(e,i[0])},d(i){i&&$(e),o&&o.d(),Le(r,i),n=!1,Se(l)}}}function xe(s){let e,t;return e=new Ie({props:{label:s[1],id:s[2],$$slots:{default:[Ye]},$$scope:{ctx:s}}}),{c(){P(e.$$.fragment)},m(n,l){B(e,n,l),t=!0},p(n,[l]){const o={};l&2&&(o.label=n[1]),l&4&&(o.id=n[2]),l&4157&&(o.$$scope={dirty:l,ctx:n}),e.$set(o)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function et(s,e,t){let{label:n}=e,{id:l}=e,{choices:o}=e,{emptyOption:a=!1}=e,{disabled:r=!1}=e,{value:i}=e;function c(d){Ce.call(this,s,d)}function u(){i=He(this),t(0,i),t(3,o)}return s.$$set=d=>{"label"in d&&t(1,n=d.label),"id"in d&&t(2,l=d.id),"choices"in d&&t(3,o=d.choices),"emptyOption"in d&&t(4,a=d.emptyOption),"disabled"in d&&t(5,r=d.disabled),"value"in d&&t(0,i=d.value)},[i,n,l,o,a,r,c,u]}class tt extends C{constructor(e){super(),L(this,e,et,xe,V,{label:1,id:2,choices:3,emptyOption:4,disabled:5,value:0})}}function nt(s){let e,t,n;function l(a){s[2](a)}let o={label:"Basemap",id:"basemap",choices:[["streets","Streets"],["hybrid","Satellite"],["dataviz","Dataviz"]]};return s[0]!==void 0&&(o.value=s[0]),e=new tt({props:o}),W.push(()=>te(e,"value",l)),e.$on("change",s[1]),{c(){P(e.$$.fragment)},m(a,r){B(e,a,r),n=!0},p(a,[r]){const i={};!t&&r&1&&(t=!0,i.value=a[0],ne(()=>t=!1)),e.$set(i)},i(a){n||(g(e.$$.fragment,a),n=!0)},o(a){b(e.$$.fragment,a),n=!1},d(a){M(e,a)}}}function lt(s,e,t){let{style:n}=e;function l(){let a=new URLSearchParams(window.location.search);a.set("style",n);let r=`${window.location.pathname}?${a.toString()}${window.location.hash}`;window.location.href=r}function o(a){n=a,t(0,n)}return s.$$set=a=>{"style"in a&&t(0,n=a.style)},[n,l,o]}class Zt extends C{constructor(e){super(),L(this,e,lt,nt,V,{style:0})}}function st(s){let e,t,n,l,o,a,r;const i=s[3].default,c=I(i,s,s[2],null);return{c(){e=h("details"),t=h("summary"),n=h("span"),l=N(s[0]),o=E(),a=h("div"),c&&c.c(),p(n,"class","govuk-details__summary-text"),p(t,"class","govuk-details__summary"),p(a,"class","govuk-details__text"),e.open=s[1],p(e,"class","govuk-details"),p(e,"data-module","govuk-details")},m(u,d){w(u,e,d),k(e,t),k(t,n),k(n,l),k(e,o),k(e,a),c&&c.m(a,null),r=!0},p(u,[d]){(!r||d&1)&&ee(l,u[0]),c&&c.p&&(!r||d&4)&&D(c,i,u,u[2],r?O(i,u[2],d,null):H(u[2]),null),(!r||d&2)&&(e.open=u[1])},i(u){r||(g(c,u),r=!0)},o(u){b(c,u),r=!1},d(u){u&&$(e),c&&c.d(u)}}}function ot(s,e,t){let{$$slots:n={},$$scope:l}=e,{label:o}=e,{open:a=!1}=e;return s.$$set=r=>{"label"in r&&t(0,o=r.label),"open"in r&&t(1,a=r.open),"$$scope"in r&&t(2,l=r.$$scope)},[o,a,l,n]}class Ee extends C{constructor(e){super(),L(this,e,ot,st,V,{label:0,open:1})}}function at(s){let e;return{c(){e=h("span"),p(e,"class","svelte-kzgqtg"),Q(e,"background",s[0])},m(t,n){w(t,e,n)},p(t,[n]){n&1&&Q(e,"background",t[0])},i:Y,o:Y,d(t){t&&$(e)}}}function it(s,e,t){let{color:n}=e;return s.$$set=l=>{"color"in l&&t(0,n=l.color)},[n]}class rt extends C{constructor(e){super(),L(this,e,it,at,V,{color:0})}}const ct="/atip/rerework-streetview/assets/help-d011708a.svg";function ut(s){let e,t;const n=s[1].default,l=I(n,s,s[4],null);return{c(){e=h("div"),l&&l.c(),p(e,"class","govuk-prose")},m(o,a){w(o,e,a),l&&l.m(e,null),t=!0},p(o,a){l&&l.p&&(!t||a&16)&&D(l,n,o,o[4],t?O(n,o[4],a,null):H(o[4]),null)},i(o){t||(g(l,o),t=!0)},o(o){b(l,o),t=!1},d(o){o&&$(e),l&&l.d(o)}}}function ft(s){let e,t,n,l,o,a,r,i,c;function u(m){s[3](m)}let d={title:"Help",$$slots:{default:[ut]},$$scope:{ctx:s}};return s[0]!==void 0&&(d.open=s[0]),o=new Oe({props:d}),W.push(()=>te(o,"open",u)),{c(){e=h("button"),t=h("img"),l=E(),P(o.$$.fragment),Ve(t.src,n=ct)||p(t,"src",n),p(t,"title","Help"),p(t,"alt","Help"),p(e,"class","svelte-7d9d1l")},m(m,_){w(m,e,_),k(e,t),w(m,l,_),B(o,m,_),r=!0,i||(c=G(e,"click",s[2]),i=!0)},p(m,[_]){const f={};_&16&&(f.$$scope={dirty:_,ctx:m}),!a&&_&1&&(a=!0,f.open=m[0],ne(()=>a=!1)),o.$set(f)},i(m){r||(g(o.$$.fragment,m),r=!0)},o(m){b(o.$$.fragment,m),r=!1},d(m){m&&($(e),$(l)),M(o,m),i=!1,c()}}}function dt(s,e,t){let{$$slots:n={},$$scope:l}=e,o=!1;const a=()=>t(0,o=!0);function r(i){o=i,t(0,o)}return s.$$set=i=>{"$$scope"in i&&t(4,l=i.$$scope)},[o,n,a,r,l]}class At extends C{constructor(e){super(),L(this,e,dt,ft,V,{})}}const _t=s=>({}),ge=s=>({}),mt=s=>({}),he=s=>({});function pt(s){let e,t,n,l,o,a,r,i,c,u,d;const m=s[3].sidebar,_=I(m,s,s[2],he),f=s[3].main,v=I(f,s,s[2],ge);return{c(){e=h("div"),t=h("aside"),n=h("div"),_&&_.c(),l=E(),o=h("button"),o.textContent="â†’",r=E(),i=h("main"),v&&v.c(),p(n,"class","sidebar-content content-container svelte-ect12w"),p(o,"type","button"),p(o,"class","sidebar-toggle rounded-rect svelte-ect12w"),p(t,"class",a=oe(s[0]?"":"collapsed")+" svelte-ect12w"),p(i,"class","svelte-ect12w"),p(e,"class","overall-layout svelte-ect12w")},m(y,R){w(y,e,R),k(e,t),k(t,n),_&&_.m(n,null),k(t,l),k(t,o),k(e,r),k(e,i),v&&v.m(i,null),c=!0,u||(d=G(o,"click",s[1]),u=!0)},p(y,[R]){_&&_.p&&(!c||R&4)&&D(_,m,y,y[2],c?O(m,y[2],R,mt):H(y[2]),he),(!c||R&1&&a!==(a=oe(y[0]?"":"collapsed")+" svelte-ect12w"))&&p(t,"class",a),v&&v.p&&(!c||R&4)&&D(v,f,y,y[2],c?O(f,y[2],R,_t):H(y[2]),ge)},i(y){c||(g(_,y),g(v,y),c=!0)},o(y){b(_,y),b(v,y),c=!1},d(y){y&&$(e),_&&_.d(y),v&&v.d(y),u=!1,d()}}}function gt(s,e,t){let{$$slots:n={},$$scope:l}=e,o=!0;function a(){t(0,o=!o)}return s.$$set=r=>{"$$scope"in r&&t(2,l=r.$$scope)},[o,a,l,n]}class Ft extends C{constructor(e){super(),L(this,e,gt,pt,V,{})}}function be(s,e,t){const n=s.slice();return n[1]=e[t][0],n[2]=e[t][1],n}function ve(s){let e,t,n,l=s[1]+"",o,a,r;return t=new rt({props:{color:s[2]}}),{c(){e=h("li"),P(t.$$.fragment),n=E(),o=N(l),a=E()},m(i,c){w(i,e,c),B(t,e,null),k(e,n),k(e,o),k(e,a),r=!0},p(i,c){const u={};c&1&&(u.color=i[2]),t.$set(u),(!r||c&1)&&l!==(l=i[1]+"")&&ee(o,l)},i(i){r||(g(t.$$.fragment,i),r=!0)},o(i){b(t.$$.fragment,i),r=!1},d(i){i&&$(e),M(t)}}}function ht(s){let e,t,n=F(s[0]),l=[];for(let a=0;a<n.length;a+=1)l[a]=ve(be(s,n,a));const o=a=>b(l[a],1,1,()=>{l[a]=null});return{c(){e=h("ul");for(let a=0;a<l.length;a+=1)l[a].c()},m(a,r){w(a,e,r);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);t=!0},p(a,r){if(r&1){n=F(a[0]);let i;for(i=0;i<n.length;i+=1){const c=be(a,n,i);l[i]?(l[i].p(c,r),g(l[i],1)):(l[i]=ve(c),l[i].c(),g(l[i],1),l[i].m(e,null))}for(T(),i=n.length;i<l.length;i+=1)o(i);q()}},i(a){if(!t){for(let r=0;r<n.length;r+=1)g(l[r]);t=!0}},o(a){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)b(l[r]);t=!1},d(a){a&&$(e),Le(l,a)}}}function bt(s){let e,t;return e=new Ee({props:{label:"Legend",$$slots:{default:[ht]},$$scope:{ctx:s}}}),{c(){P(e.$$.fragment)},m(n,l){B(e,n,l),t=!0},p(n,[l]){const o={};l&33&&(o.$$scope={dirty:l,ctx:n}),e.$set(o)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function vt(s,e,t){let{rows:n}=e;return s.$$set=l=>{"rows"in l&&t(0,n=l.rows)},[n]}class Wt extends C{constructor(e){super(),L(this,e,vt,bt,V,{rows:0})}}function ke(s){let e;const t=s[5].default,n=I(t,s,s[4],null);return{c(){n&&n.c()},m(l,o){n&&n.m(l,o),e=!0},p(l,o){n&&n.p&&(!e||o&16)&&D(n,t,l,l[4],e?O(t,l[4],o,null):H(l[4]),null)},i(l){e||(g(n,l),e=!0)},o(l){b(n,l),e=!1},d(l){n&&n.d(l)}}}function kt(s){let e,t,n=s[1]&&ke(s);return{c(){e=h("div"),n&&n.c(),p(e,"class","map svelte-12dpf1u")},m(l,o){w(l,e,o),n&&n.m(e,null),s[6](e),t=!0},p(l,[o]){l[1]?n?(n.p(l,o),o&2&&g(n,1)):(n=ke(l),n.c(),g(n,1),n.m(e,null)):n&&(T(),b(n,1,1,()=>{n=null}),q())},i(l){t||(g(n),t=!0)},o(l){b(n),t=!1},d(l){l&&$(e),n&&n.d(),s[6](null)}}}function yt(s,e,t){let{$$slots:n={},$$scope:l}=e,{style:o}=e,{startBounds:a=null}=e,r,i,c=!1,u=!window.location.hash;Re("setCamera",u),je(()=>{r=new K.Map({container:i,style:`https://api.maptiler.com/maps/${o}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),r.addControl(new K.ScaleControl({})),r.addControl(new K.NavigationControl({visualizePitch:!0}),"bottom-right"),r.on("load",()=>{t(1,c=!0),u&&a&&r.fitBounds(a,{animate:!1}),Z.set(r)}),new ResizeObserver(()=>{r.resize()}).observe(i)}),ze(()=>{r.remove()});function d(m){W[m?"unshift":"push"](()=>{i=m,t(0,i)})}return s.$$set=m=>{"style"in m&&t(2,o=m.style),"startBounds"in m&&t(3,a=m.startBounds),"$$scope"in m&&t(4,l=m.$$scope)},[i,c,o,a,l,n,d]}class Kt extends C{constructor(e){super(),L(this,e,yt,kt,V,{style:2,startBounds:3})}}const wt="/atip/rerework-streetview/assets/zoom_out_map-b2e1091a.svg";class $t{constructor(e){A(this,"id");A(this,"defaultPaintValues");A(this,"changedValues",[]);this.id=e.id,this.defaultPaintValues=this.getLayerValues(e)}getLayerValues(e){return Object.keys(e.paint?e.paint:{}).map(t=>[t,e.paint[t]])}setProperty(e,t,n){e.setPaintProperty(this.id,t,n),this.changedValues.push(t)}returnToDefaultPaintValues(e){this.defaultPaintValues.forEach(([t,n])=>{e.setPaintProperty(this.id,t,n)}),this.changedValues=[]}}const St=["road_minor","road_secondary_tertiary","road_motorway","road_trunk_primary","road_link","road_motorway_link","road_trunk_primary_link","road_minor","bridge_street","bridge_minor","bridge_secondary_tertiary","bridge_trunk_primary","bridge_motorway","tunnel_minor","tunnel_secondary_tertiary","tunnel_trunk_primary","tunnel_motorway","road_service_track","Road network"],Ct=()=>Ge(Z).getStyle().layers.filter(e=>St.includes(e.id)).map(e=>new $t(e));function Lt(s){let e,t;return{c(){e=h("img"),Ve(e.src,t=wt)||p(e,"src",t),p(e,"alt","Zoom to show entire boundary")},m(n,l){w(n,e,l)},p:Y,d(n){n&&$(e)}}}function Vt(s){let e,t;return e=new le({props:{title:"Zoom to show entire boundary",$$slots:{default:[Lt]},$$scope:{ctx:s}}}),e.$on("click",s[0]),{c(){P(e.$$.fragment)},m(n,l){B(e,n,l),t=!0},p(n,[l]){const o={};l&8&&(o.$$scope={dirty:l,ctx:n}),e.$set(o)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Et(s,e,t){let n;z(s,Z,a=>t(2,n=a));let{boundaryGeojson:l}=e;function o(){n.fitBounds(Te(l),{padding:20,animate:!0,duration:500})}return s.$$set=a=>{"boundaryGeojson"in a&&t(1,l=a.boundaryGeojson)},[o,l]}class Jt extends C{constructor(e){super(),L(this,e,Et,Vt,V,{boundaryGeojson:1})}}const S={area:"#D94324",route:"#555F5E",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black"},Pt=10,U=10;let j="interventions";function Bt(s,e,t){let n,l;z(s,Z,i=>t(1,n=i)),z(s,qe,i=>t(2,l=i));let{colorInterventions:o}=e;Ne(n,j,l);const a=["!=","hide_while_editing",!0];return ae(n,{id:"interventions-points",source:j,filter:["all",Ae,a,["!=","endpoint",!0]],color:o,radius:Pt}),ie(n,{id:"interventions-lines",source:j,filter:["all",Fe,a],color:o,width:U}),ae(n,{id:"interventions-lines-endpoints",source:j,filter:["==","endpoint",!0],radius:.5*U,opacity:0,strokeColor:S.lineEndpointColor,strokeWidth:2}),Ze(n,{id:"interventions-polygons",source:j,filter:["all",re,a],color:o,opacity:.2}),ie(n,{id:"interventions-polygon-outlines",source:j,filter:["all",re,a],color:o,opacity:.5,width:.7*U}),s.$$set=i=>{"colorInterventions"in i&&t(0,o=i.colorInterventions)},s.$$.update=()=>{if(s.$$.dirty&6){let i=JSON.parse(JSON.stringify(l)),c=[];for(let u of i.features)if(u.geometry.type=="LineString"&&!u.properties.hide_while_editing)for(let d of[u.geometry.coordinates[0],u.geometry.coordinates[u.geometry.coordinates.length-1]])c.push({type:"Feature",properties:{endpoint:!0},geometry:{type:"Point",coordinates:d}});i.features=i.features.concat(c),n.getSource(j).setData(i)}},[o,n,l]}class Ut extends C{constructor(e){super(),L(this,e,Bt,null,V,{colorInterventions:0})}}function Qt(s){return{v1:"Scheme Design",v2:"Experimental Scheme Design",planning:"Development Planning",criticals:"Critical Issues",atf4:"ATF4 Scheme"}[s]}function Xt(s){return{v1:"an intervention",v2:"an intervention",planning:"a development",criticals:"a critical issue",atf4:"an intervention"}[s]}function Yt(s){return{v1:"interventions",v2:"interventions",planning:"developments",criticals:"critical issues",atf4:"interventions"}[s]}function xt(s){return s=="planning"?ce(["get","reference_type",["get","planning"]],{preapp:S.preapp,outline:S.outline,"reserved matters":S["reserved matters"],"local plan":S["local plan"]},"black"):ce(["get","intervention_type"],{area:S.area,route:S.route,crossing:S.crossing,other:S.other},"white")}function en(s){return s=="planning"?[["Preapp",S.preapp],["Outline",S.outline],["Reserved matters",S["reserved matters"]],["Local plan",S["local plan"]]]:[["Areas",S.area],["Routes",S.route],["Crossings",S.crossing],["Other",S.other]]}const Mt="/atip/rerework-streetview/assets/camera_cursor-824d29b6.svg";function ye(s){let e,t,n,l;const o=[Dt,It],a=[];function r(i,c){return i[4]?1:0}return e=r(s),t=a[e]=o[e](s),{c(){t.c(),n=x()},m(i,c){a[e].m(i,c),w(i,n,c),l=!0},p(i,c){let u=e;e=r(i),e===u?a[e].p(i,c):(T(),b(a[u],1,1,()=>{a[u]=null}),q(),t=a[e],t?t.p(i,c):(t=a[e]=o[e](i),t.c()),g(t,1),t.m(n.parentNode,n))},i(i){l||(g(t),l=!0)},o(i){b(t),l=!1},d(i){i&&$(n),a[e].d(i)}}}function It(s){let e,t;return e=new le({props:{$$slots:{default:[Ht]},$$scope:{ctx:s}}}),e.$on("click",s[3]),{c(){P(e.$$.fragment)},m(n,l){B(e,n,l),t=!0},p(n,l){const o={};l&2048&&(o.$$scope={dirty:l,ctx:n}),e.$set(o)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Dt(s){let e,t;return e=new le({props:{$$slots:{default:[Ot]},$$scope:{ctx:s}}}),e.$on("click",s[2]),{c(){P(e.$$.fragment)},m(n,l){B(e,n,l),t=!0},p(n,l){const o={};l&2048&&(o.$$scope={dirty:l,ctx:n}),e.$set(o)},i(n){t||(g(e.$$.fragment,n),t=!0)},o(n){b(e.$$.fragment,n),t=!1},d(n){M(e,n)}}}function Ht(s){let e;return{c(){e=N("Disable Street View")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Ot(s){let e;return{c(){e=N("Enable Street View")},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function we(s){let e,t,n,l,o;function a(i){s[7](i)}let r={legend:"Source",id:"streetViewImagery",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return s[5].streetViewImagery!==void 0&&(r.value=s[5].streetViewImagery),e=new We({props:r}),W.push(()=>te(e,"value",a)),l=new Ee({props:{label:"Help",$$slots:{default:[Rt]},$$scope:{ctx:s}}}),{c(){P(e.$$.fragment),n=E(),P(l.$$.fragment)},m(i,c){B(e,i,c),w(i,n,c),B(l,i,c),o=!0},p(i,c){const u={};!t&&c&32&&(t=!0,u.value=i[5].streetViewImagery,ne(()=>t=!1)),e.$set(u);const d={};c&2050&&(d.$$scope={dirty:c,ctx:i}),l.$set(d)},i(i){o||(g(e.$$.fragment,i),g(l.$$.fragment,i),o=!0)},o(i){b(e.$$.fragment,i),b(l.$$.fragment,i),o=!1},d(i){i&&$(n),M(e,i),M(l,i)}}}function $e(s){let e;return{c(){e=h("li"),e.innerHTML=`Press <b>Escape</b>
          to exit this mode`},m(t,n){w(t,e,n)},d(t){t&&$(e)}}}function Rt(s){let e,t,n,l,o,a=s[1]&&$e();return{c(){e=h("ul"),t=h("li"),t.innerHTML=`<b>Click</b>
        on the map to open a new tab with a 3rd-party imagery provider`,n=E(),a&&a.c(),l=E(),o=h("li"),o.innerHTML='Cursor by <a href="https://icon-icons.com/icon/screenshot-cursor-camera/100181">Luc Chaissac</a>'},m(r,i){w(r,e,i),k(e,t),k(e,n),a&&a.m(e,null),k(e,l),k(e,o)},p(r,i){r[1]?a||(a=$e(),a.c(),a.m(e,l)):a&&(a.d(1),a=null)},d(r){r&&$(e),a&&a.d()}}}function jt(s){let e,t,n,l=s[0]&&ye(s),o=s[4]&&we(s);return{c(){l&&l.c(),e=E(),o&&o.c(),t=x()},m(a,r){l&&l.m(a,r),w(a,e,r),o&&o.m(a,r),w(a,t,r),n=!0},p(a,[r]){a[0]?l?(l.p(a,r),r&1&&g(l,1)):(l=ye(a),l.c(),g(l,1),l.m(e.parentNode,e)):l&&(T(),b(l,1,1,()=>{l=null}),q()),a[4]?o?(o.p(a,r),r&16&&g(o,1)):(o=we(a),o.c(),g(o,1),o.m(t.parentNode,t)):o&&(T(),b(o,1,1,()=>{o=null}),q())},i(a){n||(g(l),g(o),n=!0)},o(a){b(l),b(o),n=!1},d(a){a&&($(e),$(t)),l&&l.d(a),o&&o.d(a)}}}function zt(s,e,t){let n,l,o;z(s,Z,f=>t(8,n=f)),z(s,J,f=>t(9,l=f)),z(s,ue,f=>t(5,o=f));let{displayEnableButton:a=!1}=e,{escapeKeyExits:r=!1}=e;const i=Ct();let c;const u=f=>{if(c){let v=f.lngLat.lng,y=f.lngLat.lat;o.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${y},${v}&cbp=11,0,0,0,0`,"_blank"):o.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${y}~${v}&style=x`,"_blank")}};function d(){t(4,c=!0),fe(J,l=!0,l),n.on("click",u);const f=`url(${Mt}), auto`;console.log(f),n.getCanvas().style.cursor=f,i.forEach(v=>{v.setProperty(n,"line-color","blue")})}function m(){t(4,c=!1),fe(J,l=!1,l),n.off("click",u),n.getCanvas().style.cursor="inherit",i.forEach(f=>{f.returnToDefaultPaintValues(n)})}function _(f){s.$$.not_equal(o.streetViewImagery,f)&&(o.streetViewImagery=f,ue.set(o))}return s.$$set=f=>{"displayEnableButton"in f&&t(0,a=f.displayEnableButton),"escapeKeyExits"in f&&t(1,r=f.escapeKeyExits)},[a,r,d,m,c,o,u,_]}class tn extends C{constructor(e){super(),L(this,e,zt,jt,V,{displayEnableButton:0,escapeKeyExits:1,handleMapClickEvent:6,enableStreetView:2,disableStreetView:3})}get handleMapClickEvent(){return this.$$.ctx[6]}get enableStreetView(){return this.$$.ctx[2]}get disableStreetView(){return this.$$.ctx[3]}}export{Zt as B,Ee as C,At as H,Ut as I,Ft as L,Kt as M,tn as S,Jt as Z,Pt as a,qt as b,S as c,Nt as d,tt as e,Yt as f,Qt as g,xt as h,Wt as i,en as j,rt as k,U as l,Xt as s};
