import{S as q,i as W,s as z,au as Gr,b as V,c as X,e as A,d as C,g as h,h as H,j as p,m as b,w as Tt,l as Z,t as $,n as d,o as m,p as v,aS as mt,aT as _t,aU as gt,aV as dt,aW as $r,aX as Ht,aY as be,_ as ve,$ as ie,a0 as ae,aZ as pr,q as Ne,am as mr,a_ as _r,av as Nt,a$ as gr,b0 as dr,I as te,b1 as $n,b2 as zr,u as w,k as S,f as rn,an as Hr,C as ln,aG as hr,r as on,F as br,a as Yt,v as Dt,D as B,aR as U,aH as qe,aA as Te,aI as Rt,b3 as fe,P as R,b4 as $e,A as K,Q as Y,B as ue,Z as J,b5 as ne,G as Lt,ax as Ur,aw as qr,H as pn,R as vr,b6 as sn,b7 as an,E as wr,ap as Wr,b8 as mn,O as Vr,aM as _n,V as Xr,W as gn,X as dn,Y as Ft,aQ as hn,L as Zr,M as Kr,x as Yr}from"./index-91515738.js";import{S as Ot,e as Ie,f as It,C as le,c as Bt,i as Jr,g as Qr,B as xr,a as kt,b as el,G as tl}from"./StreetViewTool-6e22f86c.js";import{L as nl,s as bn,c as kr,a as ge,C as We,Z as rl}from"./schemas-400ec908.js";import{a as Re,F as ll}from"./Popup-c21e23c1.js";import{P as oe}from"./Popup-798c3b3c.js";import{L as ol,a as sl}from"./LineMeasureController-c8459e51.js";const il="/atip/revert_superscheme/assets/help-d011708a.svg";function al(r){let e,n;const t=r[1].default,l=mt(t,r,r[4],null);return{c(){e=A("div"),l&&l.c(),H(e,"class","govuk-prose")},m(o,i){p(o,e,i),l&&l.m(e,null),n=!0},p(o,i){l&&l.p&&(!n||i&16)&&_t(l,t,o,o[4],n?dt(t,o[4],i,null):gt(o[4]),null)},i(o){n||($(l,o),n=!0)},o(o){d(l,o),n=!1},d(o){o&&m(e),l&&l.d(o)}}}function fl(r){let e,n,t,l,o,i,u;function s(f){r[3](f)}let a={title:"Help",$$slots:{default:[al]},$$scope:{ctx:r}};return r[0]!==void 0&&(a.open=r[0]),t=new Gr({props:a}),V.push(()=>X(t,"open",s)),{c(){e=A("button"),e.innerHTML=`<img src="${il}" title="Help" alt="Help"/>`,n=C(),h(t.$$.fragment),H(e,"class","svelte-7d9d1l")},m(f,c){p(f,e,c),p(f,n,c),b(t,f,c),o=!0,i||(u=Tt(e,"click",r[2]),i=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,_.open=f[0],Z(()=>l=!1)),t.$set(_)},i(f){o||($(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(m(e),m(n)),v(t,f),i=!1,u()}}}function ul(r,e,n){let{$$slots:t={},$$scope:l}=e,o=!1;const i=()=>n(0,o=!0);function u(s){o=s,n(0,o)}return r.$$set=s=>{"$$scope"in s&&n(4,l=s.$$scope)},[o,t,i,u,l]}class se extends q{constructor(e){super(),W(this,e,ul,fl,z,{})}}function cl(r){let e;const n=r[8].default,t=mt(n,r,r[15],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&32768)&&_t(t,n,l,l[15],e?dt(n,l[15],o,null):gt(l[15]),null)},i(l){e||($(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function $l(r){let e,n;return e=new $r({props:{id:r[0],type:"raster",source:r[1],beforeId:r[2],beforeLayerType:r[3],paint:r[4],layout:r[5],minzoom:r[6],maxzoom:r[7],$$slots:{default:[cl]},$$scope:{ctx:r}}}),e.$on("click",r[9]),e.$on("dblclick",r[10]),e.$on("contextmenu",r[11]),e.$on("mouseenter",r[12]),e.$on("mousemove",r[13]),e.$on("mouseleave",r[14]),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.id=t[0]),l&2&&(o.source=t[1]),l&4&&(o.beforeId=t[2]),l&8&&(o.beforeLayerType=t[3]),l&16&&(o.paint=t[4]),l&32&&(o.layout=t[5]),l&64&&(o.minzoom=t[6]),l&128&&(o.maxzoom=t[7]),l&32768&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=Ht("raster-layer")}=e,{source:i=void 0}=e,{beforeId:u=void 0}=e,{beforeLayerType:s=void 0}=e,{paint:a}=e,{layout:f=void 0}=e,{minzoom:c=void 0}=e,{maxzoom:_=void 0}=e;function g(M){be.call(this,r,M)}function k(M){be.call(this,r,M)}function T(M){be.call(this,r,M)}function O(M){be.call(this,r,M)}function y(M){be.call(this,r,M)}function L(M){be.call(this,r,M)}return r.$$set=M=>{"id"in M&&n(0,o=M.id),"source"in M&&n(1,i=M.source),"beforeId"in M&&n(2,u=M.beforeId),"beforeLayerType"in M&&n(3,s=M.beforeLayerType),"paint"in M&&n(4,a=M.paint),"layout"in M&&n(5,f=M.layout),"minzoom"in M&&n(6,c=M.minzoom),"maxzoom"in M&&n(7,_=M.maxzoom),"$$scope"in M&&n(15,l=M.$$scope)},[o,i,u,s,a,f,c,_,t,g,k,T,O,y,L,l]}class ml extends q{constructor(e){super(),W(this,e,pl,$l,z,{id:0,source:1,beforeId:2,beforeLayerType:3,paint:4,layout:5,minzoom:6,maxzoom:7})}}function vn(r){let e=r[0],n,t,l=wn(r);return{c(){l.c(),n=ve()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&z(e,e=o[0])?(ie(),d(l,1,1,te),ae(),l=wn(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){d(l),t=!1},d(o){o&&m(n),l.d(o)}}}function wn(r){let e;const n=r[10].default,t=mt(n,r,r[9],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&512)&&_t(t,n,l,l[9],e?dt(n,l[9],o,null):gt(l[9]),null)},i(l){e||($(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function _l(r){let e,n,t=r[0]&&vn(r);return{c(){t&&t.c(),e=ve()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=vn(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),d(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){d(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function gl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=Ht("raster-source")}=e,{tiles:s}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=pr();Ne(r,f,k=>n(8,l=k)),Ne(r,c,k=>n(0,t=k));let _,g=!0;return mr(()=>{t&&_&&l&&(_r(f,t,_),Nt(c,t=null,t),n(6,_=void 0))}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"tiles"in k&&n(4,s=k.tiles),"tileSize"in k&&n(5,a=k.tileSize),"$$scope"in k&&n(9,i=k.$$scope)},r.$$.update=()=>{r.$$.dirty&377&&l&&t!==u&&(Nt(c,t=u,t),gr(l,t,dr({type:"raster",tiles:s,tileSize:a}),k=>l&&k===t,()=>{t&&(n(6,_=l==null?void 0:l.getSource(t)),n(7,g=!0))})),r.$$.dirty&264&&(l==null||l.on("style.load",()=>{n(6,_=l==null?void 0:l.getSource(u))})),r.$$.dirty&208&&_&&(g?n(7,g=!1):_.setTiles(s))},[t,f,c,u,s,a,_,g,l,i,o]}class dl extends q{constructor(e){super(),W(this,e,gl,_l,z,{id:3,tiles:4,tileSize:5})}}function hl(r){let e;const n=r[16].default,t=mt(n,r,r[24],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&16777216)&&_t(t,n,l,l[24],e?dt(n,l[24],o,null):gt(l[24]),null)},i(l){e||($(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function bl(r){let e,n,t;function l(i){r[17](i)}let o={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[hl]},$$scope:{ctx:r}};return r[0]!==void 0&&(o.hovered=r[0]),e=new $r({props:o}),V.push(()=>X(e,"hovered",l)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,[u]){const s={};u&2&&(s.id=i[1]),u&4&&(s.source=i[2]),u&8&&(s.sourceLayer=i[3]),u&16&&(s.beforeId=i[4]),u&32&&(s.beforeLayerType=i[5]),u&64&&(s.paint=i[6]),u&128&&(s.layout=i[7]),u&256&&(s.filter=i[8]),u&512&&(s.applyToClusters=i[9]),u&1024&&(s.minzoom=i[10]),u&2048&&(s.maxzoom=i[11]),u&4096&&(s.hoverCursor=i[12]),u&8192&&(s.manageHoverState=i[13]),u&16384&&(s.eventsIfTopMost=i[14]),u&32768&&(s.interactive=i[15]),u&16777216&&(s.$$scope={dirty:u,ctx:i}),!n&&u&1&&(n=!0,s.hovered=i[0],Z(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function vl(r,e,n){let{$$slots:t={},$$scope:l}=e,{id:o=Ht("symbol")}=e,{source:i=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:s=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:O=void 0}=e,{manageHoverState:y=!1}=e,{hovered:L=null}=e,{eventsIfTopMost:M=!1}=e,{interactive:N=!0}=e;function P(D){L=D,n(0,L)}function E(D){be.call(this,r,D)}function j(D){be.call(this,r,D)}function I(D){be.call(this,r,D)}function F(D){be.call(this,r,D)}function G(D){be.call(this,r,D)}function Q(D){be.call(this,r,D)}return r.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,i=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,s=D.beforeId),"beforeLayerType"in D&&n(5,a=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,_=D.filter),"applyToClusters"in D&&n(9,g=D.applyToClusters),"minzoom"in D&&n(10,k=D.minzoom),"maxzoom"in D&&n(11,T=D.maxzoom),"hoverCursor"in D&&n(12,O=D.hoverCursor),"manageHoverState"in D&&n(13,y=D.manageHoverState),"hovered"in D&&n(0,L=D.hovered),"eventsIfTopMost"in D&&n(14,M=D.eventsIfTopMost),"interactive"in D&&n(15,N=D.interactive),"$$scope"in D&&n(24,l=D.$$scope)},[L,o,i,u,s,a,f,c,_,g,k,T,O,y,M,N,t,P,E,j,I,F,G,Q,l]}class wl extends q{constructor(e){super(),W(this,e,vl,bl,z,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function kn(r){let e=r[0],n,t,l=yn(r);return{c(){l.c(),n=ve()},m(o,i){l.m(o,i),p(o,n,i),t=!0},p(o,i){i&1&&z(e,e=o[0])?(ie(),d(l,1,1,te),ae(),l=yn(o),l.c(),$(l,1),l.m(n.parentNode,n)):l.p(o,i)},i(o){t||($(l),t=!0)},o(o){d(l),t=!1},d(o){o&&m(n),l.d(o)}}}function yn(r){let e;const n=r[9].default,t=mt(n,r,r[8],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&256)&&_t(t,n,l,l[8],e?dt(n,l[8],o,null):gt(l[8]),null)},i(l){e||($(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function kl(r){let e,n,t=r[0]&&kn(r);return{c(){t&&t.c(),e=ve()},m(l,o){t&&t.m(l,o),p(l,e,o),n=!0},p(l,[o]){l[0]?t?(t.p(l,o),o&1&&$(t,1)):(t=kn(l),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(ie(),d(t,1,1,()=>{t=null}),ae())},i(l){n||($(t),n=!0)},o(l){d(t),n=!1},d(l){l&&m(e),t&&t.d(l)}}}function yl(r,e,n){let t,l,{$$slots:o={},$$scope:i}=e,{id:u=Ht("vector")}=e,{url:s=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(s&&s.includes("pmtiles://")&&!$n.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let k=new zr;$n.addProtocol("pmtiles",k.tile)}const{map:c,self:_}=pr();Ne(r,c,k=>n(7,l=k)),Ne(r,_,k=>n(0,t=k));let g;return mr(()=>{t&&l&&(_r(c,t,g),Nt(_,t=null,t),g=void 0)}),r.$$set=k=>{"id"in k&&n(3,u=k.id),"url"in k&&n(4,s=k.url),"tiles"in k&&n(5,a=k.tiles),"promoteId"in k&&n(6,f=k.promoteId),"$$scope"in k&&n(8,i=k.$$scope)},r.$$.update=()=>{r.$$.dirty&249&&l&&t!==u&&(Nt(_,t=u,t),gr(l,t,dr({type:"vector",url:s,tiles:a,promoteId:f}),k=>l&&k===t,()=>{t&&(g=l==null?void 0:l.getSource(t))})),r.$$.dirty&136&&(l==null||l.on("style.load",()=>{g=l==null?void 0:l.getSource(u)}))},[t,c,_,u,s,a,f,l,i,o]}class ce extends q{constructor(e){super(),W(this,e,yl,kl,z,{id:3,url:4,tiles:5,promoteId:6})}}function Sl(r){let e;return{c(){e=A("p"),e.textContent=`The scheme data shown is fake. Load the real data from a file below.
        We're working to put real scheme data here.`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Tl(r){let e,n,t=r[0]=="Private (development)"&&Sl();return{c(){t&&t.c(),e=C(),n=A("p"),n.textContent="Note the ATF scheme data has not been validated."},m(l,o){t&&t.m(l,o),p(l,e,o),p(l,n,o)},p:te,d(l){l&&(m(e),m(n)),t&&t.d(l)}}}function Ol(r){let e,n,t,l,o,i;return o=new se({props:{$$slots:{default:[Tl]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("App version: "),t=w(r[0]),l=C(),h(o.$$.fragment)},m(u,s){p(u,e,s),S(e,n),S(e,t),S(e,l),b(o,e,null),i=!0},p(u,[s]){const a={};s&2&&(a.$$scope={dirty:s,ctx:u}),o.$set(a)},i(u){i||($(o.$$.fragment,u),i=!0)},o(u){d(o.$$.fragment,u),i=!1},d(u){u&&m(e),v(o)}}}function Cl(r){return[rn()]}class Al extends q{constructor(e){super(),W(this,e,Cl,Ol,z,{})}}const Ll={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var me=Uint8Array,Je=Uint16Array,yr=Uint32Array,Sr=new me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Tr=new me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Il=new me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Or=function(r,e){for(var n=new Je(31),t=0;t<31;++t)n[t]=e+=1<<r[t-1];for(var l=new yr(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)l[o]=o-n[t]<<5|t;return[n,l]},Cr=Or(Sr,2),Ar=Cr[0],Pl=Cr[1];Ar[28]=258,Pl[258]=28;var Ml=Or(Tr,0),Fl=Ml[0],Jt=new Je(32768);for(var re=0;re<32768;++re){var ze=(re&43690)>>>1|(re&21845)<<1;ze=(ze&52428)>>>2|(ze&13107)<<2,ze=(ze&61680)>>>4|(ze&3855)<<4,Jt[re]=((ze&65280)>>>8|(ze&255)<<8)>>>1}var St=function(r,e,n){for(var t=r.length,l=0,o=new Je(e);l<t;++l)r[l]&&++o[r[l]-1];var i=new Je(e);for(l=0;l<e;++l)i[l]=i[l-1]+o[l-1]<<1;var u;if(n){u=new Je(1<<e);var s=15-e;for(l=0;l<t;++l)if(r[l])for(var a=l<<4|r[l],f=e-r[l],c=i[r[l]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[Jt[c]>>>s]=a}else for(u=new Je(t),l=0;l<t;++l)r[l]&&(u[l]=Jt[i[r[l]-1]++]>>>15-r[l]);return u},Pt=new me(288);for(var re=0;re<144;++re)Pt[re]=8;for(var re=144;re<256;++re)Pt[re]=9;for(var re=256;re<280;++re)Pt[re]=7;for(var re=280;re<288;++re)Pt[re]=8;var Lr=new me(32);for(var re=0;re<32;++re)Lr[re]=5;var jl=St(Pt,9,1),El=St(Lr,5,1),Ut=function(r){for(var e=r[0],n=1;n<r.length;++n)r[n]>e&&(e=r[n]);return e},ke=function(r,e,n){var t=e/8|0;return(r[t]|r[t+1]<<8)>>(e&7)&n},qt=function(r,e){var n=e/8|0;return(r[n]|r[n+1]<<8|r[n+2]<<16)>>(e&7)},Nl=function(r){return(r+7)/8|0},fn=function(r,e,n){(e==null||e<0)&&(e=0),(n==null||n>r.length)&&(n=r.length);var t=new(r.BYTES_PER_ELEMENT==2?Je:r.BYTES_PER_ELEMENT==4?yr:me)(n-e);return t.set(r.subarray(e,n)),t},Dl=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ye=function(r,e,n){var t=new Error(e||Dl[r]);if(t.code=r,Error.captureStackTrace&&Error.captureStackTrace(t,ye),!n)throw t;return t},Rl=function(r,e,n){var t=r.length;if(!t||n&&n.f&&!n.l)return e||new me(0);var l=!e||n,o=!n||n.i;n||(n={}),e||(e=new me(t*3));var i=function(tt){var Ze=e.length;if(tt>Ze){var nt=new me(Math.max(Ze*2,tt));nt.set(e),e=nt}},u=n.f||0,s=n.p||0,a=n.b||0,f=n.l,c=n.d,_=n.m,g=n.n,k=t*8;do{if(!f){u=ke(r,s,1);var T=ke(r,s+1,3);if(s+=3,T)if(T==1)f=jl,c=El,_=9,g=5;else if(T==2){var M=ke(r,s,31)+257,N=ke(r,s+10,15)+4,P=M+ke(r,s+5,31)+1;s+=14;for(var E=new me(P),j=new me(19),I=0;I<N;++I)j[Il[I]]=ke(r,s+I*3,7);s+=N*3;for(var F=Ut(j),G=(1<<F)-1,Q=St(j,F,1),I=0;I<P;){var D=Q[ke(r,s,G)];s+=D&15;var O=D>>>4;if(O<16)E[I++]=O;else{var x=0,we=0;for(O==16?(we=3+ke(r,s,3),s+=2,x=E[I-1]):O==17?(we=3+ke(r,s,7),s+=3):O==18&&(we=11+ke(r,s,127),s+=7);we--;)E[I++]=x}}var ht=E.subarray(0,M),de=E.subarray(M);_=Ut(ht),g=Ut(de),f=St(ht,_,1),c=St(de,g,1)}else ye(1);else{var O=Nl(s)+4,y=r[O-4]|r[O-3]<<8,L=O+y;if(L>t){o&&ye(0);break}l&&i(a+y),e.set(r.subarray(O,L),a),n.b=a+=y,n.p=s=L*8,n.f=u;continue}if(s>k){o&&ye(0);break}}l&&i(a+131072);for(var xe=(1<<_)-1,bt=(1<<g)-1,et=s;;et=s){var x=f[qt(r,s)&xe],pe=x>>>4;if(s+=x&15,s>k){o&&ye(0);break}if(x||ye(2),pe<256)e[a++]=pe;else if(pe==256){et=s,f=null;break}else{var vt=pe-254;if(pe>264){var I=pe-257,Ee=Sr[I];vt=ke(r,s,(1<<Ee)-1)+Ar[I],s+=Ee}var Ge=c[qt(r,s)&bt],Xe=Ge>>>4;Ge||ye(3),s+=Ge&15;var de=Fl[Xe];if(Xe>3){var Ee=Tr[Xe];de+=qt(r,s)&(1<<Ee)-1,s+=Ee}if(s>k){o&&ye(0);break}l&&i(a+131072);for(var wt=a+vt;a<wt;a+=4)e[a]=e[a-de],e[a+1]=e[a+1-de],e[a+2]=e[a+2-de],e[a+3]=e[a+3-de];a=wt}}n.l=f,n.p=et,n.b=a,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=g)}while(!u);return a==e.length?e:fn(e,0,a)},Bl=new me(0),Me=function(r,e){return r[e]|r[e+1]<<8},Se=function(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16|r[e+3]<<24)>>>0},Wt=function(r,e){return Se(r,e)+Se(r,e+4)*4294967296};function Gl(r,e){return Rl(r,e)}var Qt=typeof TextDecoder<"u"&&new TextDecoder,zl=0;try{Qt.decode(Bl,{stream:!0}),zl=1}catch{}var Hl=function(r){for(var e="",n=0;;){var t=r[n++],l=(t>127)+(t>223)+(t>239);if(n+l>r.length)return[e,fn(r,n-1)];l?l==3?(t=((t&15)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):l&1?e+=String.fromCharCode((t&31)<<6|r[n++]&63):e+=String.fromCharCode((t&15)<<12|(r[n++]&63)<<6|r[n++]&63):e+=String.fromCharCode(t)}};function Ir(r,e){if(e){for(var n="",t=0;t<r.length;t+=16384)n+=String.fromCharCode.apply(null,r.subarray(t,t+16384));return n}else{if(Qt)return Qt.decode(r);var l=Hl(r),o=l[0],i=l[1];return i.length&&ye(8),o}}var Ul=function(r,e){return e+30+Me(r,e+26)+Me(r,e+28)},ql=function(r,e,n){var t=Me(r,e+28),l=Ir(r.subarray(e+46,e+46+t),!(Me(r,e+8)&2048)),o=e+46+t,i=Se(r,e+20),u=n&&i==4294967295?Wl(r,o):[i,Se(r,e+24),Se(r,e+42)],s=u[0],a=u[1],f=u[2];return[Me(r,e+10),s,a,l,o+Me(r,e+30)+Me(r,e+32),f]},Wl=function(r,e){for(;Me(r,e)!=1;e+=4+Me(r,e+2));return[Wt(r,e+12),Wt(r,e+4),Wt(r,e+20)]};function Vl(r,e){for(var n={},t=r.length-22;Se(r,t)!=101010256;--t)(!t||r.length-t>65558)&&ye(13);var l=Me(r,t+8);if(!l)return{};var o=Se(r,t+16),i=o==4294967295||l==65535;if(i){var u=Se(r,t-12);i=Se(r,u)==101075792,i&&(l=Se(r,u+32),o=Se(r,u+48))}for(var s=e&&e.filter,a=0;a<l;++a){var f=ql(r,o,i),c=f[0],_=f[1],g=f[2],k=f[3],T=f[4],O=f[5],y=Ul(r,O);o=T,(!s||s({name:k,size:_,originalSize:g,compression:c}))&&(c?c==8?n[k]=Gl(r.subarray(y,y+_),new me(g)):ye(14,"unknown compression type "+c):n[k]=fn(r,y,y+_))}return n}function Xl(r){return r instanceof File||r instanceof Blob?r.arrayBuffer().then(Vt):Vt(r)}function Vt(r){var e=new Uint8Array(r),n=Vl(e);return Promise.resolve(Zl(n))}function Zl(r){for(var e=[],n=0,t=Object.keys(r);n<t.length;n++){var l=t[n];e[l]=Ir(r[l])}return e}function Fe(r,e){for(var n=0;n<r.childNodes.length;){var t=r.childNodes[n];if(t.nodeType===1&&Qe(t)===e)return t;n++}}function Mt(r,e){for(var n=[],t=0;t<r.childNodes.length;){var l=r.childNodes[t];l.nodeType===1&&Qe(l)===e&&n.push(l),t++}return n}function Gt(r,e,n){for(var t=0;t<r.childNodes.length;){var l=r.childNodes[t];e?l.nodeType===1&&Qe(l)===e&&n(l,t):n(l,t),t++}}function Kl(r,e,n){var t=[];return Gt(r,e,function(l,o){t.push(n(l,o))}),t}var Yl=/.+\:/;function Qe(r){return r.tagName.replace(Yl,"")}function Pr(r){if(r.nodeType!==1)return r.textContent;for(var e="<"+Qe(r),n=0;n<r.attributes.length;)e+=" "+r.attributes[n].name+'="'+r.attributes[n].value+'"',n++;e+=">";for(var t=0;t<r.childNodes.length;)e+=Pr(r.childNodes[t]),t++;return e+="</"+Qe(r)+">",e}function Jl(r){var e=r.documentElement,n=Fe(e,"sheetData"),t=[];return Gt(n,"row",function(l){Gt(l,"c",function(o){t.push(o)})}),t}function Ql(r,e){return Fe(e,"v")}function xl(r,e){if(e.firstChild&&Qe(e.firstChild)==="is"&&e.firstChild.firstChild&&Qe(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function eo(r){var e=r.documentElement,n=Fe(e,"dimension");if(n)return n.getAttribute("ref")}function to(r){var e=r.documentElement,n=Fe(e,"cellStyleXfs");return n?Mt(n,"xf"):[]}function no(r){var e=r.documentElement,n=Fe(e,"cellXfs");return n?Mt(n,"xf"):[]}function ro(r){var e=r.documentElement,n=Fe(e,"numFmts");return n?Mt(n,"numFmt"):[]}function lo(r){var e=r.documentElement;return Kl(e,"si",function(n){var t=Fe(n,"t");if(t)return t.textContent;var l="";return Gt(n,"r",function(o){l+=Fe(o,"t").textContent}),l})}function oo(r){var e=r.documentElement;return Fe(e,"workbookPr")}function so(r){var e=r.documentElement;return Mt(e,"Relationship")}function io(r){var e=r.documentElement,n=Fe(e,"sheets");return Mt(n,"sheet")}function ao(r,e){var n=e.createDocument(r),t={},l=oo(n);l&&l.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return io(n).forEach(o),t}function fo(r,e){var n=e.createDocument(r),t={sheets:{},sharedStrings:void 0,styles:void 0},l=function(i){var u=i.getAttribute("Target"),s=i.getAttribute("Type");switch(s){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=Xt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=Xt(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[i.getAttribute("Id")]=Xt(u);break}};return so(n).forEach(l),t}function Xt(r){return r[0]==="/"?r.slice(1):"xl/"+r}function Sn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Tn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Sn(Object(n),!0).forEach(function(t){uo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function uo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function co(r,e){if(!r)return{};var n=e.createDocument(r),t=to(n).map(Zt),l=ro(n).map($o).reduce(function(i,u){return i[u.id]=u,i},[]),o=function(u){return u.hasAttribute("xfId")?Tn(Tn({},t[u.xfId]),Zt(u,l)):Zt(u,l)};return no(n).map(o)}function $o(r){return{id:r.getAttribute("numFmtId"),template:r.getAttribute("formatCode")}}function Zt(r,e){var n={};if(r.hasAttribute("numFmtId")){var t=r.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function po(r,e){return r?lo(e.createDocument(r)):[]}function Mr(r,e){e&&e.epoch1904&&(r+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((r-n)*24*t))}function mo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=_o(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _o(r,e){if(r){if(typeof r=="string")return On(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return On(r,e)}}function On(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function go(r,e,n,t){if(e){var l=n[e];if(!l)throw new Error("Cell style not found: ".concat(e));if(!l.numberFormat)return!1;if(ho.indexOf(Number(l.numberFormat.id))>=0||t.dateFormat&&l.numberFormat.template===t.dateFormat||t.smartDateParser!==!1&&l.numberFormat.template&&wo(l.numberFormat.template))return!0}}var ho=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],bo=/^\[\$-414\]/,vo=/;@$/;function wo(r){r=r.toLowerCase(),r=r.replace(bo,""),r=r.replace(vo,"");for(var e=r.split(/\W+/),n=mo(e),t;!(t=n()).done;){var l=t.value;if(ko.indexOf(l)<0)return!1}return!0}var ko=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function yo(r,e,n){var t=n.getInlineStringValue,l=n.getInlineStringXml,o=n.getStyleId,i=n.styles,u=n.values,s=n.properties,a=n.options;switch(e||(e="n"),e){case"str":r=Kt(r,a);break;case"inlineStr":if(r=t(),r===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(l()));r=Kt(r,a);break;case"s":var f=Number(r);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(r));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(r));r=u[f],r=Kt(r,a);break;case"b":if(r==="1")r=!0;else if(r==="0")r=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(r));break;case"z":r=void 0;break;case"e":r=So(r);break;case"d":if(r===void 0)break;var c=new Date(r);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(r));r=c;break;case"n":if(r===void 0)break;var _=Number(r);if(isNaN(_))throw new Error('Invalid "numeric" cell value: '.concat(r));r=_,go(r,o(),i,a)&&(r=Mr(r,s));break;default:throw new TypeError("Cell type not supported: ".concat(e))}return r===void 0&&(r=null),r}function So(r){switch(r){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(r)}}function Kt(r,e){return e.trim!==!1&&(r=r.trim()),r===""&&(r=void 0),r}var To=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Oo(r){var e=function(a,f){return a-f},n=r.map(function(s){return s.row}).sort(e),t=r.map(function(s){return s.column}).sort(e),l=n[0],o=n[n.length-1],i=t[0],u=t[t.length-1];return[{row:l,column:i},{row:o,column:u}]}function Co(r){for(var e=0,n=0;n<r.length;)e*=26,e+=To.indexOf(r[n]),n++;return e}function Fr(r){return r=r.split(/(\d+)/),[parseInt(r[1]),Co(r[0].trim())]}function Ao(r,e,n,t,l,o,i){var u=Fr(r.getAttribute("r")),s=Ql(e,r),a=s&&s.textContent,f;return r.hasAttribute("t")&&(f=r.getAttribute("t")),{row:u[0],column:u[1],value:yo(a,f,{getInlineStringValue:function(){return xl(e,r)},getInlineStringXml:function(){return Pr(r)},getStyleId:function(){return r.getAttribute("s")},styles:l,values:t,properties:o,options:i})}}function Lo(r,e,n,t,l,o){var i=Jl(r);return i.length===0?[]:i.map(function(u){return Ao(u,r,e,n,t,l,o)})}function Io(r,e){return jo(r)||Fo(r,e)||Mo(r,e)||Po()}function Po(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mo(r,e){if(r){if(typeof r=="string")return Cn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cn(r,e)}}function Cn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Fo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function jo(r){if(Array.isArray(r))return r}function Eo(r){var e=eo(r);if(e)return e=e.split(":").map(Fr).map(function(n){var t=Io(n,2),l=t[0],o=t[1];return{row:l,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function No(r,e,n,t,l,o){var i=e.createDocument(r),u=Lo(i,e,n,t,l,o),s=Eo(i)||Oo(u);return{cells:u,dimensions:s}}function Do(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Ro(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ro(r,e){if(r){if(typeof r=="string")return An(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return An(r,e)}}function An(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Bo(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,l=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,i=r.length-1;i>=0;){for(var u=!0,s=Do(r[i]),a;!(a=s()).done;){var f=a.value;if(l(f)!==null){u=!1;break}}if(u)r.splice(i,1),n&&n.splice(i,1);else if(o)break;i--}return r}function Go(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=zo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zo(r,e){if(r){if(typeof r=="string")return Ln(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ln(r,e)}}function Ln(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Ho(r){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,l=e.onlyTrimAtTheEnd,o=r[0].length-1;o>=0;){for(var i=!0,u=Go(r),s;!(s=u()).done;){var a=s.value;if(t(a[o])!==null){i=!1;break}}if(i)for(var f=0;f<r.length;)r[f].splice(o,1),f++;else if(l)break;o--}return r}function Uo(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=jr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qo(r,e){return Xo(r)||Vo(r,e)||jr(r,e)||Wo()}function Wo(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jr(r,e){if(r){if(typeof r=="string")return In(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return In(r,e)}}function In(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Vo(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Xo(r){if(Array.isArray(r))return r}function Zo(r,e){var n=r.dimensions,t=r.cells;if(t.length===0)return[];var l=qo(n,2);l[0];for(var o=l[1],i=o.column,u=o.row,s=new Array(u),a=0;a<u;){s[a]=new Array(i);for(var f=0;f<i;)s[a][f]=null,f++;a++}for(var c=Uo(t),_;!(_=c()).done;){var g=_.value,k=g.row-1,T=g.column-1;T<i&&k<u&&(s[k][T]=g.value)}var O=e.rowMap;if(O)for(var y=0;y<s.length;)O[y]=y,y++;return s=Bo(Ho(s,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:O}),e.transformData&&(s=e.transformData(s)),s}function Ko(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Yo(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yo(r,e){if(r){if(typeof r=="string")return Pn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pn(r,e)}}function Pn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function Mn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Jo(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Mn(Object(n),!0).forEach(function(t){Qo(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Qo(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function xo(r,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Jo({sheet:1},n));var t=function(_){if(!r[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return r[_]},l=fo(t("xl/_rels/workbook.xml.rels"),e),o=l.sharedStrings?po(t(l.sharedStrings),e):[],i=l.styles?co(t(l.styles),e):{},u=ao(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var s=es(n.sheet,u.sheets);if(!s||!l.sheets[s])throw ts(n.sheet,u.sheets);var a=No(t(l.sheets[s]),e,o,i,u,n),f=Zo(a,n);return n.properties?{data:f,properties:u}:f}function es(r,e){if(typeof r=="number"){var n=e[r-1];return n&&n.relationId}for(var t=Ko(e),l;!(l=t()).done;){var o=l.value;if(o.name===r)return o.relationId}}function ts(r,e){var n=e&&e.map(function(t,l){return'"'.concat(t.name,'" (#').concat(l+1,")")}).join(", ");return new Error("Sheet ".concat(typeof r=="number"?"#"+r:'"'+r+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function xt(r){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(r)}function Fn(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function ns(r,e,n){return e&&Fn(r.prototype,e),n&&Fn(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r}function rs(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function ls(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),e&&Ct(r,e)}function os(r){var e=Er();return function(){var t=At(r),l;if(e){var o=At(this).constructor;l=Reflect.construct(t,arguments,o)}else l=t.apply(this,arguments);return ss(this,l)}}function ss(r,e){if(e&&(xt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return is(r)}function is(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function en(r){var e=typeof Map=="function"?new Map:void 0;return en=function(t){if(t===null||!as(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,l)}function l(){return Et(t,arguments,At(this).constructor)}return l.prototype=Object.create(t.prototype,{constructor:{value:l,enumerable:!1,writable:!0,configurable:!0}}),Ct(l,t)},en(r)}function Et(r,e,n){return Er()?Et=Reflect.construct:Et=function(l,o,i){var u=[null];u.push.apply(u,o);var s=Function.bind.apply(l,u),a=new s;return i&&Ct(a,i.prototype),a},Et.apply(null,arguments)}function Er(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function as(r){return Function.toString.call(r).indexOf("[native code]")!==-1}function Ct(r,e){return Ct=Object.setPrototypeOf||function(t,l){return t.__proto__=l,t},Ct(r,e)}function At(r){return At=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},At(r)}var _e=function(r){ls(n,r);var e=os(n);function n(t){var l;return rs(this,n),l=e.call(this,"invalid"),l.reason=t,l}return ns(n)}(en(Error));function fs(r){if(typeof r=="string"){var e=r;if(r=Number(r),String(r)!==e)throw new _e("not_a_number")}if(typeof r!="number")throw new _e("not_a_number");if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return r}function us(r){if(typeof r=="string")return r;if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");return String(r)}throw new _e("not_a_string")}function cs(r){if(typeof r=="boolean")return r;throw new _e("not_a_boolean")}function $s(r,e){var n=e.properties;if(r instanceof Date){if(isNaN(r.valueOf()))throw new _e("out_of_bounds");return r}if(typeof r=="number"){if(isNaN(r))throw new _e("invalid_number");if(!isFinite(r))throw new _e("out_of_bounds");var t=Mr(r,n);if(isNaN(t.valueOf()))throw new _e("out_of_bounds");return t}throw new _e("not_a_date")}function ps(r,e){return gs(r)||_s(r,e)||Nr(r,e)||ms()}function ms(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _s(r,e){var n=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n!=null){var t=[],l=!0,o=!1,i,u;try{for(n=n.call(r);!(l=(i=n.next()).done)&&(t.push(i.value),!(e&&t.length===e));l=!0);}catch(s){o=!0,u=s}finally{try{!l&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function gs(r){if(Array.isArray(r))return r}function tn(r){"@babel/helpers - typeof";return tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(r)}function ds(r,e){var n=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(n)return(n=n.call(r)).next.bind(n);if(Array.isArray(r)||(n=Nr(r))||e&&r&&typeof r.length=="number"){n&&(r=n);var t=0;return function(){return t>=r.length?{done:!0}:{done:!1,value:r[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Nr(r,e){if(r){if(typeof r=="string")return jn(r,e);var n=Object.prototype.toString.call(r).slice(8,-1);if(n==="Object"&&r.constructor&&(n=r.constructor.name),n==="Map"||n==="Set")return Array.from(r);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jn(r,e)}}function jn(r,e){(e==null||e>r.length)&&(e=r.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=r[n];return t}function En(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function Nn(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?En(Object(n),!0).forEach(function(t){hs(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function hs(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}var Dn={isColumnOriented:!1};function bs(r,e,n){n?n=Nn(Nn({},Dn),n):n=Dn;var t=n,l=t.isColumnOriented,o=t.rowMap,i=t.ignoreEmptyRows;ys(e),l&&(r=ks(r));for(var u=r[0],s=[],a=[],f=1;f<r.length;f++){var c=Dr(e,r[f],f,u,a,n);(c!==null||i===!1)&&s.push(c)}if(o)for(var _=ds(a),g;!(g=_()).done;){var k=g.value;k.row=o[k.row-1]+1}return{rows:s,errors:a}}function Dr(r,e,n,t,l,o){for(var i={},u=!0,s=function(){var _=f[a],g=r[_],k=tn(g.type)==="object"&&!Array.isArray(g.type),T=e[t.indexOf(_)];T===void 0&&(T=null);var O=void 0,y=void 0,L=void 0;if(k)O=Dr(g.type,e,n,t,l,o);else if(T===null)O=null;else if(Array.isArray(g.type)){var M=!1,N=ws(T).map(function(E){var j=Rn(E,g,o);return j.error&&(O=E,y=j.error,L=j.reason),j.value!==null&&(M=!0),j.value});y||(O=M?N:null)}else{var P=Rn(T,g,o);y=P.error,L=P.reason,O=y?T:P.value}!y&&O===null&&g.required&&(y="required"),y?(y={error:y,row:n+1,column:_,value:O},L&&(y.reason=L),g.type&&(y.type=g.type),l.push(y)):(u&&O!==null&&(u=!1),(O!==null||o.includeNullValues)&&(i[g.prop]=O))},a=0,f=Object.keys(r);a<f.length;a++)s();return u?null:i}function Rn(r,e,n){if(r===null)return{value:null};var t;if(e.parse?t=rt(r,e.parse):e.type?t=vs(r,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:r},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(l){return{error:l.message}}}return t}function rt(r,e){try{return r=e(r),r===void 0?{value:null}:{value:r}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function vs(r,e,n){switch(e){case String:return rt(r,us);case Number:return rt(r,fs);case Date:return rt(r,function(t){return $s(t,{properties:n.properties})});case Boolean:return rt(r,cs);default:if(typeof e=="function")return rt(r,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Rr(r,e,n){for(var t=0,l="";n+t<r.length;){var o=r[n+t];if(o===e)return[l,t];if(o==='"'){var i=Rr(r,'"',n+t+1);l+=i[0],t+=1+i[1]+1}else l+=o,t++}return[l,t]}function ws(r){for(var e=[],n=0;n<r.length;){var t=Rr(r,",",n),l=ps(t,2),o=l[0],i=l[1];n+=i+1,e.push(o.trim())}return e}var ks=function(e){return e[0].map(function(n,t){return e.map(function(l){return l[t]})})};function ys(r){for(var e=0,n=Object.keys(r);e<n.length;e++){var t=n[e],l=r[t];if(!l.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function nn(r){"@babel/helpers - typeof";return nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(r)}function Br(r){for(var e={},n=0,t=Object.keys(r);n<t.length;n++){var l=t[n],o=r[l],i=void 0;nn(o)==="object"&&(o=Object.keys(r[l])[0],i=Br(r[l][o])),e[l]={prop:o},i&&(e[l].type=i)}return e}var Ss=["schema","map"];function Bn(r,e){var n=Object.keys(r);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(r);e&&(t=t.filter(function(l){return Object.getOwnPropertyDescriptor(r,l).enumerable})),n.push.apply(n,t)}return n}function jt(r){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bn(Object(n),!0).forEach(function(t){Ts(r,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(n)):Bn(Object(n)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(n,t))})}return r}function Ts(r,e,n){return e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n,r}function Os(r,e){if(r==null)return{};var n=Cs(r,e),t,l;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(r);for(l=0;l<o.length;l++)t=o[l],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(r,t)&&(n[t]=r[t])}return n}function Cs(r,e){if(r==null)return{};var n={},t=Object.keys(r),l,o;for(o=0;o<t.length;o++)l=t[o],!(e.indexOf(l)>=0)&&(n[l]=r[l]);return n}function As(r,e,n){var t=n.schema,l=n.map,o=Os(n,Ss);!t&&l&&(t=Br(l));var i=xo(r,e,jt(jt({},o),{},{properties:t||o.properties}));return t?bs(i.data,t,jt(jt({},o),{},{properties:i.properties})):i}function Ls(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Xl(r).then(function(n){return As(n,Ll,e)})}function Is(r){let e=new Map;for(let[t,l]of Object.entries(r.schemes))e.set(t,{scheme_reference:t,num_features:0,authority_or_region:l.authority_or_region,capital_scheme_id:l.capital_scheme_id,funding_programme:l.funding_programme});r.features=r.features.filter(t=>Ps(t));let n=1;for(let t of r.features){let l=e.get(t.properties.scheme_reference);l.num_features++,t.properties.funding_programme=l.funding_programme,t.id=n++}return e}function Ps(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}async function Ms(r){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ls(r,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let l of n){let o=Hr(l.lat_lon.split(",").map(parseFloat).reverse()),i=l;i.submission_time=l.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:i,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const ee={schools:"#007DBB",hospitals:"#B73D25",mrn:"#006478",sports_spaces:"#013220",railway_stations:"#A52A2A",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",cycle_parking:"black",crossings:"green",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],atf2:"#00AFFF",atf3:"#FF62DC",atf4:"#FFD833"},De=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Fs(r){let e,n,t,l,o;function i(s){r[3](s)}let u={label:"Color interventions",id:"colorInterventions",choices:[["interventionType","By intervention type"],["fundingProgramme","By funding programme"]]};return r[0]!==void 0&&(u.value=r[0]),e=new Ot({props:u}),V.push(()=>X(e,"value",i)),e.$on("change",r[2]),l=new nl({props:{rows:r[1]}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};!n&&a&1&&(n=!0,f.value=s[0],Z(()=>n=!1)),e.$set(f);const c={};a&2&&(c.rows=s[1]),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function js(r,e,n){let t;Ne(r,ln,s=>n(4,t=s));let l="interventionType",o=bn("v1");function i(){let s;l=="interventionType"?(s=kr("v1"),n(1,o=bn("v1"))):(s=hr(["get","funding_programme"],{ATF2:ee.atf2,ATF3:ee.atf3,ATF4:ee.atf4},"grey"),n(1,o=[["ATF2",ee.atf2],["ATF3",ee.atf3],["ATF4",ee.atf4]])),t.setPaintProperty("interventions-points","circle-color",s),t.setPaintProperty("interventions-lines","line-color",s),t.setPaintProperty("interventions-polygons","fill-color",s),t.setPaintProperty("interventions-polygons-outlines","line-color",s)}function u(s){l=s,n(0,l)}return[l,o,i,u]}class Es extends q{constructor(e){super(),W(this,e,js,Fs,z,{})}}function Ns(r){let e;return{c(){e=w("Clear")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ds(r){let e,n,t,l,o,i;return t=new Yt({props:{$$slots:{default:[Ns]},$$scope:{ctx:r}}}),t.$on("click",r[13]),{c(){e=A("input"),n=C(),h(t.$$.fragment),H(e,"type","text"),H(e,"class","govuk-input govuk-input--width-10"),H(e,"id","filterText")},m(u,s){p(u,e,s),Dt(e,r[0]),p(u,n,s),b(t,u,s),l=!0,o||(i=Tt(e,"input",r[12]),o=!0)},p(u,s){s&1&&e.value!==u[0]&&Dt(e,u[0]);const a={};s&65536&&(a.$$scope={dirty:s,ctx:u}),t.$set(a)},i(u){l||($(t.$$.fragment,u),l=!0)},o(u){d(t.$$.fragment,u),l=!1},d(u){u&&(m(e),m(n)),v(t,u),o=!1,i()}}}function Rs(r){let e,n,t,l,o,i,u,s,a,f;function c(T){r[10](T)}let _={label:"Authority or region",id:"filterAuthority",choices:r[5],emptyOption:!0};r[3]!==void 0&&(_.value=r[3]),e=new Ot({props:_}),V.push(()=>X(e,"value",c));function g(T){r[11](T)}let k={label:"Funding programme",id:"filterFundingProgramme",choices:r[6],emptyOption:!0};return r[4]!==void 0&&(k.value=r[4]),l=new Ot({props:k}),V.push(()=>X(l,"value",g)),u=new br({props:{label:"Intervention name or description",id:"filterText",$$slots:{default:[Ds]},$$scope:{ctx:r}}}),a=new Es({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(T,O){b(e,T,O),p(T,t,O),b(l,T,O),p(T,i,O),b(u,T,O),p(T,s,O),b(a,T,O),f=!0},p(T,O){const y={};O&32&&(y.choices=T[5]),!n&&O&8&&(n=!0,y.value=T[3],Z(()=>n=!1)),e.$set(y);const L={};O&64&&(L.choices=T[6]),!o&&O&16&&(o=!0,L.value=T[4],Z(()=>o=!1)),l.$set(L);const M={};O&65537&&(M.$$scope={dirty:O,ctx:T}),u.$set(M)},i(T){f||($(e.$$.fragment,T),$(l.$$.fragment,T),$(u.$$.fragment,T),$(a.$$.fragment,T),f=!0)},o(T){d(e.$$.fragment,T),d(l.$$.fragment,T),d(u.$$.fragment,T),d(a.$$.fragment,T),f=!1},d(T){T&&(m(t),m(i),m(s)),v(e,T),v(l,T),v(u,T),v(a,T)}}}function Bs(r){let e,n=r[1].size.toLocaleString()+"",t,l,o=r[7].route.toLocaleString()+"",i,u,s=r[7].area.toLocaleString()+"",a,f,c=r[7].crossing.toLocaleString()+"",_,g,k=r[7].other.toLocaleString()+"",T,O;return{c(){e=w("Showing "),t=w(n),l=w(" schemes ("),i=w(o),u=w(`
    routes, `),a=w(s),f=w(` areas,
    `),_=w(c),g=w(" crossings, "),T=w(k),O=w(`
    other)`)},m(y,L){p(y,e,L),p(y,t,L),p(y,l,L),p(y,i,L),p(y,u,L),p(y,a,L),p(y,f,L),p(y,_,L),p(y,g,L),p(y,T,L),p(y,O,L)},p(y,L){L&2&&n!==(n=y[1].size.toLocaleString()+"")&&B(t,n),L&128&&o!==(o=y[7].route.toLocaleString()+"")&&B(i,o),L&128&&s!==(s=y[7].area.toLocaleString()+"")&&B(a,s),L&128&&c!==(c=y[7].crossing.toLocaleString()+"")&&B(_,c),L&128&&k!==(k=y[7].other.toLocaleString()+"")&&B(T,k)},d(y){y&&(m(e),m(t),m(l),m(i),m(u),m(a),m(f),m(_),m(g),m(T),m(O))}}}function Gs(r){let e,n,t;function l(i){r[14](i)}let o={id:"show-schemes",$$slots:{default:[Bs]},$$scope:{ctx:r}};return r[2]!==void 0&&(o.checked=r[2]),e=new le({props:o}),V.push(()=>X(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&65666&&(s.$$scope={dirty:u,ctx:i}),!n&&u&4&&(n=!0,s.checked=i[2],Z(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function zs(r){let e,n,t,l;return e=new Ie({props:{label:"Filters",$$slots:{default:[Rs]},$$scope:{ctx:r}}}),t=new It({props:{small:!0,$$slots:{default:[Gs]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&65657&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&65670&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Hs(r,e,n){let{schemesGj:t}=e,{schemes:l}=e,{schemesToBeShown:o=new Set}=e,{filterText:i=""}=e,{show:u=!0}=e,s=[],a="",f=[],c="",_={area:0,route:0,crossing:0,other:0};on(()=>{let M=new Set,N=new Set;for(let P of l.values())P.authority_or_region&&M.add(P.authority_or_region),P.funding_programme&&N.add(P.funding_programme);n(5,s=Array.from(M.entries())),s.sort(),n(6,f=Array.from(N.entries())),f.sort()});function g(M,N,P){let E=M.toLowerCase(),j=F=>{var G,Q;if(E&&!((G=F.properties.name)!=null&&G.toLowerCase().includes(E))&&!((Q=F.properties.description)!=null&&Q.toLowerCase().includes(E)))return!1;if(N||P){let D=l.get(F.properties.scheme_reference);if(N&&D.authority_or_region!=N||P&&D.funding_programme!=P)return!1}return!0};n(1,o=new Set(t.features.filter(j).map(F=>F.properties.scheme_reference))),n(7,_={area:0,route:0,crossing:0,other:0});let I=F=>{var G,Q;return!(!o.has(F.properties.scheme_reference)||E&&!((G=F.properties.name)!=null&&G.toLowerCase().includes(E))&&!((Q=F.properties.description)!=null&&Q.toLowerCase().includes(E)))};for(let F of t.features)I(F)?(delete F.properties.hide_while_editing,n(7,_[F.properties.intervention_type]++,_)):F.properties.hide_while_editing=!0;n(8,t),n(7,_)}function k(M){a=M,n(3,a)}function T(M){c=M,n(4,c)}function O(){i=this.value,n(0,i)}const y=()=>n(0,i="");function L(M){u=M,n(2,u)}return r.$$set=M=>{"schemesGj"in M&&n(8,t=M.schemesGj),"schemes"in M&&n(9,l=M.schemes),"schemesToBeShown"in M&&n(1,o=M.schemesToBeShown),"filterText"in M&&n(0,i=M.filterText),"show"in M&&n(2,u=M.show)},r.$$.update=()=>{r.$$.dirty&25&&g(i,a,c)},[i,o,u,a,c,s,f,_,t,l,k,T,O,y,L]}class Us extends q{constructor(e){super(),W(this,e,Hs,zs,z,{schemesGj:8,schemes:9,schemesToBeShown:1,filterText:0,show:2})}}function qs(r){let e;return{c(){e=w(`Open Government License
  `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ws(r){let e,n,t,l,o;return t=new U({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[qs]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment),l=w(`. Contains OS data  Crown copyright and database right
  2023.`)},m(i,u){p(i,e,u),S(e,n),b(t,e,null),S(e,l),o=!0},p(i,[u]){const s={};u&1&&(s.$$scope={dirty:u,ctx:i}),t.$set(s)},i(i){o||($(t.$$.fragment,i),o=!0)},o(i){d(t.$$.fragment,i),o=!1},d(i){i&&m(e),v(t)}}}class je extends q{constructor(e){super(),W(this,e,null,Ws,z,{})}}function Gn(r,e,n){const t=r.slice();return t[2]=e[n],t}function zn(r,e,n){const t=r.slice();return t[5]=e[n],t}function Hn(r){let e,n;return{c(){e=A("span"),n=w(`
    `),Te(e,"background",r[5]),Te(e,"width","100%"),Te(e,"border","1px solid black")},m(t,l){p(t,e,l),S(e,n)},p(t,l){l&1&&Te(e,"background",t[5])},d(t){t&&m(e)}}}function Un(r){let e,n=r[2]+"",t;return{c(){e=A("span"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&2&&n!==(n=l[2]+"")&&B(t,n)},d(l){l&&m(e)}}}function Vs(r){let e,n,t,l=qe(r[0]),o=[];for(let s=0;s<l.length;s+=1)o[s]=Hn(zn(r,l,s));let i=qe(r[1]),u=[];for(let s=0;s<i.length;s+=1)u[s]=Un(Gn(r,i,s));return{c(){e=A("div");for(let s=0;s<o.length;s+=1)o[s].c();n=C(),t=A("div");for(let s=0;s<u.length;s+=1)u[s].c();Te(e,"display","flex"),Te(t,"display","flex"),Te(t,"justify-content","space-between")},m(s,a){p(s,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);p(s,n,a),p(s,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(s,[a]){if(a&1){l=qe(s[0]);let f;for(f=0;f<l.length;f+=1){const c=zn(s,l,f);o[f]?o[f].p(c,a):(o[f]=Hn(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=l.length}if(a&2){i=qe(s[1]);let f;for(f=0;f<i.length;f+=1){const c=Gn(s,i,f);u[f]?u[f].p(c,a):(u[f]=Un(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=i.length}},i:te,o:te,d(s){s&&(m(e),m(n),m(t)),Rt(o,s),Rt(u,s)}}}function Xs(r,e,n){let{colorScale:t}=e,{limits:l}=e;return r.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,l=o.limits)},[t,l]}class Be extends q{constructor(e){super(),W(this,e,Xs,Vs,z,{colorScale:0,limits:1})}}function qn(r){const e=r[13].OA21CD;r[14]=e;const n=r[13][r[3]];r[15]=n}function Zs(r){let e;return{c(){e=w("Percent of households with a car")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ks(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ys(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Js(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qs(r){let e,n,t,l,o,i,u,s,a,f,c,_;return t=new U({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ks]},$$scope:{ctx:r}}}),o=new U({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ys]},$$scope:{ctx:r}}}),f=new U({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Js]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),s=A("p"),a=w("License: "),h(f.$$.fragment),c=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(g,k){p(g,e,k),S(e,n),b(t,e,null),S(e,l),b(o,e,null),S(e,i),p(g,u,k),p(g,s,k),S(s,a),b(f,s,null),S(s,c),_=!0},p(g,k){const T={};k&65536&&(T.$$scope={dirty:k,ctx:g}),t.$set(T);const O={};k&65536&&(O.$$scope={dirty:k,ctx:g}),o.$set(O);const y={};k&65536&&(y.$$scope={dirty:k,ctx:g}),f.$set(y)},i(g){_||($(t.$$.fragment,g),$(o.$$.fragment,g),$(f.$$.fragment,g),_=!0)},o(g){d(t.$$.fragment,g),d(o.$$.fragment,g),d(f.$$.fragment,g),_=!1},d(g){g&&(m(e),m(u),m(s)),v(t),v(o),v(f)}}}function xs(r){let e,n,t;return n=new se({props:{$$slots:{default:[Qs]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Wn(r){let e,n;return e=new Be({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ei(r){let e;return{c(){e=w("Average cars per household")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ti(r){let e;return{c(){e=w(`NOMIS TS045
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ni(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ri(r){let e;return{c(){e=w(`Open Government License
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function li(r){let e,n,t,l,o,i,u,s,a,f,c,_,g,k;return o=new U({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ti]},$$scope:{ctx:r}}}),u=new U({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ni]},$$scope:{ctx:r}}}),_=new U({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ri]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=C(),t=A("p"),l=w("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),i=w(". Output area boundaries from "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=w("License: "),h(_.$$.fragment),g=w(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(T,O){p(T,e,O),p(T,n,O),p(T,t,O),S(t,l),b(o,t,null),S(t,i),b(u,t,null),S(t,s),p(T,a,O),p(T,f,O),S(f,c),b(_,f,null),S(f,g),k=!0},p(T,O){const y={};O&65536&&(y.$$scope={dirty:O,ctx:T}),o.$set(y);const L={};O&65536&&(L.$$scope={dirty:O,ctx:T}),u.$set(L);const M={};O&65536&&(M.$$scope={dirty:O,ctx:T}),_.$set(M)},i(T){k||($(o.$$.fragment,T),$(u.$$.fragment,T),$(_.$$.fragment,T),k=!0)},o(T){d(o.$$.fragment,T),d(u.$$.fragment,T),d(_.$$.fragment,T),k=!1},d(T){T&&(m(e),m(n),m(t),m(a),m(f)),v(o),v(u),v(_)}}}function oi(r){let e,n,t;return n=new se({props:{$$slots:{default:[li]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Vn(r){let e,n;return e=new Be({props:{colorScale:r[4],limits:r[6]()}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function si(r){let e;return{c(){e=w("Population density")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ii(r){let e;return{c(){e=w(`NOMIS TS006
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ai(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function fi(r){let e,n,t,l,o,i,u,s,a;return t=new U({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ii]},$$scope:{ctx:r}}}),o=new U({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ai]},$$scope:{ctx:r}}}),s=new je({}),{c(){e=A("p"),n=w("Population density data is from the 2021 census, via "),h(t.$$.fragment),l=w(". Output area boundaries from "),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),S(e,n),b(t,e,null),S(e,l),b(o,e,null),S(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function ui(r){let e,n,t;return n=new se({props:{$$slots:{default:[fi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&65536&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Xn(r){let e,n,t,l;return t=new Be({props:{colorScale:r[4],limits:r[6]().map(hi)}}),{c(){e=A("p"),e.textContent="(people per square kilometres)",n=C(),h(t.$$.fragment)},m(o,i){p(o,e,i),p(o,n,i),b(t,o,i),l=!0},p:te,i(o){l||($(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&(m(e),m(n)),v(t,o)}}}function ci(r){let e,n,t,l=r[15].toLocaleString()+"",o,i,u=r[14]+"",s;return{c(){e=A("p"),n=w("There are "),t=A("b"),o=w(l),i=w(`
          people per square kilometre in `),s=w(u)},m(a,f){p(a,e,f),S(e,n),S(e,t),S(t,o),S(e,i),S(e,s)},p(a,f){f&8200&&l!==(l=a[15].toLocaleString()+"")&&B(o,l),f&8192&&u!==(u=a[14]+"")&&B(s,u)},d(a){a&&m(e)}}}function $i(r){let e,n,t=r[14]+"",l,o,i,u=r[15]+"",s,a;return{c(){e=A("p"),n=w("Households in "),l=w(t),o=w(` have an average of
          `),i=A("b"),s=w(u),a=w(`
          cars`)},m(f,c){p(f,e,c),S(e,n),S(e,l),S(e,o),S(e,i),S(i,s),S(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(l,t),c&8200&&u!==(u=f[15]+"")&&B(s,u)},d(f){f&&m(e)}}}function pi(r){let e,n,t=r[15]+"",l,o,i,u=r[14]+"",s,a;return{c(){e=A("p"),n=A("b"),l=w(t),o=w("%"),i=w(`
          of households in `),s=w(u),a=w(" have 1 or more cars")},m(f,c){p(f,e,c),S(e,n),S(n,l),S(n,o),S(e,i),S(e,s),S(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(l,t),c&8192&&u!==(u=f[14]+"")&&B(s,u)},d(f){f&&m(e)}}}function mi(r){qn(r);let e;function n(o,i){return o[3]=="percent_households_with_car"?pi:o[3]=="average_cars_per_household"?$i:ci}let t=n(r),l=t(r);return{c(){l.c(),e=ve()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){qn(o),t===(t=n(o))&&l?l.p(o,i):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function _i(r){let e,n;return e=new oe({props:{$$slots:{default:[mi,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&73736&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gi(r){let e,n,t,l;const o=[R(Ke),{sourceLayer:Ke},{paint:{"fill-color":$e(["get",r[3]],r[6](),r[4]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[_i]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Re({props:i}),e.$on("click",r[5]);const u=[R(`${Ke}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3]!=""?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&88?J(o,[f&0&&ne(R(Ke)),f&0&&{sourceLayer:Ke},f&88&&{paint:{"fill-color":$e(["get",a[3]],a[6](),a[4]),"fill-opacity":K(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&8?J(u,[f&0&&ne(R(`${Ke}-outline`)),u[1],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function di(r){let e,n,t,l,o,i,u,s,a,f,c,_,g,k;function T(I){r[7](I)}let O={id:"percent_households_with_car",$$slots:{right:[xs],default:[Zs]},$$scope:{ctx:r}};r[0]!==void 0&&(O.checked=r[0]),e=new le({props:O}),V.push(()=>X(e,"checked",T)),e.$on("change",r[8]);let y=r[3]=="percent_households_with_car"&&Wn(r);function L(I){r[9](I)}let M={id:"average_cars_per_household",$$slots:{right:[oi],default:[ei]},$$scope:{ctx:r}};r[1]!==void 0&&(M.checked=r[1]),o=new le({props:M}),V.push(()=>X(o,"checked",L)),o.$on("change",r[10]);let N=r[3]=="average_cars_per_household"&&Vn(r);function P(I){r[11](I)}let E={id:"population_density",$$slots:{right:[ui],default:[si]},$$scope:{ctx:r}};r[2]!==void 0&&(E.checked=r[2]),a=new le({props:E}),V.push(()=>X(a,"checked",P)),a.$on("change",r[12]);let j=r[3]=="population_density"&&Xn(r);return g=new ce({props:{url:`pmtiles://${fe()}/v1/${Ke}.pmtiles`,$$slots:{default:[gi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),y&&y.c(),l=C(),h(o.$$.fragment),u=C(),N&&N.c(),s=C(),h(a.$$.fragment),c=C(),j&&j.c(),_=C(),h(g.$$.fragment)},m(I,F){b(e,I,F),p(I,t,F),y&&y.m(I,F),p(I,l,F),b(o,I,F),p(I,u,F),N&&N.m(I,F),p(I,s,F),b(a,I,F),p(I,c,F),j&&j.m(I,F),p(I,_,F),b(g,I,F),k=!0},p(I,[F]){const G={};F&65536&&(G.$$scope={dirty:F,ctx:I}),!n&&F&1&&(n=!0,G.checked=I[0],Z(()=>n=!1)),e.$set(G),I[3]=="percent_households_with_car"?y?(y.p(I,F),F&8&&$(y,1)):(y=Wn(I),y.c(),$(y,1),y.m(l.parentNode,l)):y&&(ie(),d(y,1,1,()=>{y=null}),ae());const Q={};F&65536&&(Q.$$scope={dirty:F,ctx:I}),!i&&F&2&&(i=!0,Q.checked=I[1],Z(()=>i=!1)),o.$set(Q),I[3]=="average_cars_per_household"?N?(N.p(I,F),F&8&&$(N,1)):(N=Vn(I),N.c(),$(N,1),N.m(s.parentNode,s)):N&&(ie(),d(N,1,1,()=>{N=null}),ae());const D={};F&65536&&(D.$$scope={dirty:F,ctx:I}),!f&&F&4&&(f=!0,D.checked=I[2],Z(()=>f=!1)),a.$set(D),I[3]=="population_density"?j?(j.p(I,F),F&8&&$(j,1)):(j=Xn(I),j.c(),$(j,1),j.m(_.parentNode,_)):j&&(ie(),d(j,1,1,()=>{j=null}),ae());const x={};F&65544&&(x.$$scope={dirty:F,ctx:I}),g.$set(x)},i(I){k||($(e.$$.fragment,I),$(y),$(o.$$.fragment,I),$(N),$(a.$$.fragment,I),$(j),$(g.$$.fragment,I),k=!0)},o(I){d(e.$$.fragment,I),d(y),d(o.$$.fragment,I),d(N),d(a.$$.fragment,I),d(j),d(g.$$.fragment,I),k=!1},d(I){I&&(m(t),m(l),m(u),m(s),m(c),m(_)),v(e,I),y&&y.d(I),v(o,I),N&&N.d(I),v(a,I),j&&j.d(I),v(g,I)}}}let Ke="census_output_areas";const hi=r=>r.toLocaleString();function bi(r,e,n){let t=ee.sequential_low_to_high,l=!1,o=!1,i=!1,u="";function s(O){let y=O.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${y}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${y}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(O){l=O,n(0,l)}const c=()=>{n(1,o=!1),n(2,i=!1)};function _(O){o=O,n(1,o)}const g=()=>{n(0,l=!1),n(2,i=!1)};function k(O){i=O,n(2,i)}const T=()=>{n(0,l=!1),n(1,o=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(l?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):i?n(3,u="population_density"):n(3,u=""))},[l,o,i,u,t,s,a,f,c,_,g,k,T]}class vi extends q{constructor(e){super(),W(this,e,bi,di,z,{})}}function wi(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Combined authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function ki(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function yi(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ki]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of December 2022."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Si(r){let e,n,t;return n=new se({props:{$$slots:{default:[yi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Ti(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function Oi(r){let e,n;return e=new oe({props:{$$slots:{default:[Ti,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ci(r){let e,n,t,l;const o=[R(lt),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Oi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Re({props:i}),e.$on("click",Li);const u=[R(`${lt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&ne(R(lt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?J(u,[f&0&&ne(R(`${lt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Ai(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:lt,$$slots:{right:[Si],default:[wi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new Lt({props:{data:`${fe()}/v1/${lt}.geojson`,$$slots:{default:[Ci]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Z(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let lt="combined_authorities";function Li(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ii(r,e,n){let t=ee.combined_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Pi extends q{constructor(e){super(),W(this,e,Ii,Ai,z,{})}}function Mi(r){let e;return{c(){e=w("Indices of Multiple Deprivation")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Fi(r){let e;return{c(){e=w(`DLUCH GIS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ji(r){let e;return{c(){e=w(`here
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ei(r){let e,n,t,l,o,i,u,s,a;return t=new U({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Fi]},$$scope:{ctx:r}}}),o=new U({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ji]},$$scope:{ctx:r}}}),s=new je({}),{c(){e=A("p"),n=w("The 2019 English IMD scores come from "),h(t.$$.fragment),l=w(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),i=w("."),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),S(e,n),b(t,e,null),S(e,l),b(o,e,null),S(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function Ni(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ei]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Zn(r){let e,n;return e=new Be({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Di(r){let e,n=r[4].LSOA11CD+"",t,l,o,i=r[4].score+"",u,s,a,f,c,_=r[4].rank.toLocaleString()+"",g,k;return{c(){e=A("p"),t=w(n),l=w(` has an IMD score of
        `),o=A("b"),u=w(i),s=C(),a=A("p"),f=w("Rank: "),c=A("b"),g=w(_),k=w(`
        / 32,844 LSOAs`)},m(T,O){p(T,e,O),S(e,t),S(e,l),S(e,o),S(o,u),p(T,s,O),p(T,a,O),S(a,f),S(a,c),S(c,g),S(a,k)},p(T,O){O&16&&n!==(n=T[4].LSOA11CD+"")&&B(t,n),O&16&&i!==(i=T[4].score+"")&&B(u,i),O&16&&_!==(_=T[4].rank.toLocaleString()+"")&&B(g,_)},d(T){T&&(m(e),m(s),m(a))}}}function Ri(r){let e,n;return e=new oe({props:{$$slots:{default:[Di,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bi(r){let e,n,t,l;const o=[R(He),{sourceLayer:He},{paint:{"fill-color":$e(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":K(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[Ri]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Re({props:i});const u=[R(`${He}-outline`),{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&7?J(o,[f&0&&ne(R(He)),f&0&&{sourceLayer:He},f&6&&{paint:{"fill-color":$e(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":K(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?J(u,[f&0&&ne(R(`${He}-outline`)),u[1],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Gi(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:He,$$slots:{right:[Ni],default:[Mi]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&Zn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${He}.pmtiles`,$$slots:{default:[Bi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],Z(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=Zn(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let He="imd";function zi(r,e,n){let t=ee.sequential_low_to_high,l=[0,2,4,6,8,10],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class Hi extends q{constructor(e){super(),W(this,e,zi,Gi,z,{})}}function Ui(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Authority Districts`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function qi(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Wi(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[qi]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Vi(r){let e,n,t;return n=new se({props:{$$slots:{default:[Wi]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Xi(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function Zi(r){let e,n;return e=new oe({props:{$$slots:{default:[Xi,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ki(r){let e,n,t,l;const o=[R(ot),{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Zi]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Re({props:i}),e.$on("click",Ji);const u=[R(`${ot}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&ne(R(ot)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?J(u,[f&0&&ne(R(`${ot}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function Yi(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ot,$$slots:{right:[Vi],default:[Ui]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new Lt({props:{data:`${fe()}/v1/${ot}.geojson`,$$slots:{default:[Ki]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Z(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ot="local_authority_districts";function Ji(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function Qi(r,e,n){let t=ee.local_authority_districts,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class xi extends q{constructor(e){super(),W(this,e,Qi,Yi,z,{})}}function ea(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Local Planning Authorities`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function ta(r){let e;return{c(){e=w(`local authority
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function na(r){let e;return{c(){e=w(`national park authorit
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ra(r){let e;return{c(){e=w(`development corporation
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function la(r){let e;return{c(){e=w("this map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function oa(r){let e;return{c(){e=w(`planning.data.gov.uk
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function sa(r){let e,n,t,l,o,i,u,s,a,f,c,_,g,k,T,O,y,L,M,N,P,E;return t=new U({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ta]},$$scope:{ctx:r}}}),o=new U({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[na]},$$scope:{ctx:r}}}),u=new U({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[ra]},$$scope:{ctx:r}}}),g=new U({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[la]},$$scope:{ctx:r}}}),L=new U({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[oa]},$$scope:{ctx:r}}}),P=new je({}),{c(){e=A("p"),n=w("LPAs may be a "),h(t.$$.fragment),l=w(", "),h(o.$$.fragment),i=w("y, or "),h(u.$$.fragment),s=w("."),a=C(),f=A("p"),c=A("strong"),_=w(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(g.$$.fragment),k=w(" to get more details."),T=C(),O=A("p"),y=w("Data from ONS Geography via "),h(L.$$.fragment),M=w(", as of November 2022."),N=C(),h(P.$$.fragment)},m(j,I){p(j,e,I),S(e,n),b(t,e,null),S(e,l),b(o,e,null),S(e,i),b(u,e,null),S(e,s),p(j,a,I),p(j,f,I),S(f,c),S(c,_),b(g,c,null),S(c,k),p(j,T,I),p(j,O,I),S(O,y),b(L,O,null),S(O,M),p(j,N,I),b(P,j,I),E=!0},p(j,I){const F={};I&16&&(F.$$scope={dirty:I,ctx:j}),t.$set(F);const G={};I&16&&(G.$$scope={dirty:I,ctx:j}),o.$set(G);const Q={};I&16&&(Q.$$scope={dirty:I,ctx:j}),u.$set(Q);const D={};I&16&&(D.$$scope={dirty:I,ctx:j}),g.$set(D);const x={};I&16&&(x.$$scope={dirty:I,ctx:j}),L.$set(x)},i(j){E||($(t.$$.fragment,j),$(o.$$.fragment,j),$(u.$$.fragment,j),$(g.$$.fragment,j),$(L.$$.fragment,j),$(P.$$.fragment,j),E=!0)},o(j){d(t.$$.fragment,j),d(o.$$.fragment,j),d(u.$$.fragment,j),d(g.$$.fragment,j),d(L.$$.fragment,j),d(P.$$.fragment,j),E=!1},d(j){j&&(m(e),m(a),m(f),m(T),m(O),m(N)),v(t),v(o),v(u),v(g),v(L),v(P,j)}}}function ia(r){let e,n,t;return n=new se({props:{$$slots:{default:[sa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function aa(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function fa(r){let e,n;return e=new oe({props:{$$slots:{default:[aa,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ua(r){let e,n,t,l;const o=[R(Ce),{sourceLayer:Ce},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let i={$$slots:{default:[fa]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Re({props:i});const u=[R(`${Ce}-outline`),{sourceLayer:Ce},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&ne(R(Ce)),f&0&&{sourceLayer:Ce},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?J(u,[f&0&&ne(R(`${Ce}-outline`)),f&0&&{sourceLayer:Ce},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function ca(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ce,$$slots:{right:[ia],default:[ea]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ce}.pmtiles`,$$slots:{default:[ua]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Z(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ce="local_planning_authorities";function $a(r,e,n){let t=ee.local_planning_authorities,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class pa extends q{constructor(e){super(),W(this,e,$a,ca,z,{})}}function ma(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Parliamentary constituencies`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function _a(r){let e;return{c(){e=w(`Ordnance Survey Boundary-Line
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ga(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[_a]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function da(r){let e,n,t;return n=new se({props:{$$slots:{default:[ga]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ha(r){let e,n=r[3].Name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=l[3].Name+"")&&B(t,n)},d(l){l&&m(e)}}}function ba(r){let e,n;return e=new oe({props:{$$slots:{default:[ha,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function va(r){let e,n,t,l;const o=[R(Ae),{sourceLayer:Ae},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[ba]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Re({props:i}),e.$on("click",ka);const u=[R(`${Ae}-outline`),{sourceLayer:Ae},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&ne(R(Ae)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?J(u,[f&0&&ne(R(`${Ae}-outline`)),f&0&&{sourceLayer:Ae},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function wa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Ae,$$slots:{right:[da],default:[ma]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Ae}.pmtiles`,$$slots:{default:[va]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Z(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Ae="parliamentary_constituencies";function ka(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function ya(r,e,n){let t=ee.parliamentary_constituencies,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Sa extends q{constructor(e){super(),W(this,e,ya,wa,z,{})}}function Ta(r){let e;return{c(){e=w("Pollution")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Oa(r){let e;return{c(){e=w(`DEFRA
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ca(r){let e;return{c(){e=w(`Extrium
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Aa(r){let e;return{c(){e=w(`FAQ
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function La(r){let e,n,t,l,o,i,u,s,a,f,c,_,g,k,T,O;return t=new U({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Oa]},$$scope:{ctx:r}}}),f=new U({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Ca]},$$scope:{ctx:r}}}),_=new U({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[Aa]},$$scope:{ctx:r}}}),T=new je({}),{c(){e=A("p"),n=w("Most layers show air quality data from "),h(t.$$.fragment),l=w(`. The measurements are annual means, in units of
        gm
        `),o=A("sup"),o.textContent="3",i=w(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=C(),s=A("p"),a=w("The noise layer is from "),h(f.$$.fragment),c=w(", using 2017 data. See their "),h(_.$$.fragment),g=w("."),k=C(),h(T.$$.fragment)},m(y,L){p(y,e,L),S(e,n),b(t,e,null),S(e,l),S(e,o),S(e,i),p(y,u,L),p(y,s,L),S(s,a),b(f,s,null),S(s,c),b(_,s,null),S(s,g),p(y,k,L),b(T,y,L),O=!0},p(y,L){const M={};L&2048&&(M.$$scope={dirty:L,ctx:y}),t.$set(M);const N={};L&2048&&(N.$$scope={dirty:L,ctx:y}),f.$set(N);const P={};L&2048&&(P.$$scope={dirty:L,ctx:y}),_.$set(P)},i(y){O||($(t.$$.fragment,y),$(f.$$.fragment,y),$(_.$$.fragment,y),$(T.$$.fragment,y),O=!0)},o(y){d(t.$$.fragment,y),d(f.$$.fragment,y),d(_.$$.fragment,y),d(T.$$.fragment,y),O=!1},d(y){y&&(m(e),m(u),m(s),m(k)),v(t),v(f),v(_),v(T,y)}}}function Ia(r){let e,n,t;return n=new se({props:{$$slots:{default:[La]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Kn(r){let e,n,t,l,o=r[3](r[0])+"",i,u,s,a,f,c,_,g,k,T,O,y,L;function M(I){r[7](I)}let N={label:"Pollutant",id:"pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};r[0]!==void 0&&(N.value=r[0]),e=new Ot({props:N}),V.push(()=>X(e,"value",M));const P=[Ma,Pa],E=[];function j(I,F){return I[0]=="Noise"?0:1}return g=j(r),k=E[g]=P[g](r),{c(){h(e.$$.fragment),t=C(),l=A("p"),i=w(o),u=C(),s=A("div"),a=A("label"),f=w(`Opacity
      `),c=A("input"),_=C(),k.c(),T=ve(),H(c,"type","range"),H(c,"min","0"),H(c,"max","100")},m(I,F){b(e,I,F),p(I,t,F),p(I,l,F),S(l,i),p(I,u,F),p(I,s,F),S(s,a),S(a,f),S(a,c),Dt(c,r[2]),p(I,_,F),E[g].m(I,F),p(I,T,F),O=!0,y||(L=[Tt(c,"change",r[8]),Tt(c,"input",r[8])],y=!0)},p(I,F){const G={};!n&&F&1&&(n=!0,G.value=I[0],Z(()=>n=!1)),e.$set(G),(!O||F&1)&&o!==(o=I[3](I[0])+"")&&B(i,o),F&4&&Dt(c,I[2]);let Q=g;g=j(I),g===Q?E[g].p(I,F):(ie(),d(E[Q],1,1,()=>{E[Q]=null}),ae(),k=E[g],k?k.p(I,F):(k=E[g]=P[g](I),k.c()),$(k,1),k.m(T.parentNode,T))},i(I){O||($(e.$$.fragment,I),$(k),O=!0)},o(I){d(e.$$.fragment,I),d(k),O=!1},d(I){I&&(m(t),m(l),m(u),m(s),m(_),m(T)),v(e,I),E[g].d(I),y=!1,Ur(L)}}}function Pa(r){let e,n,t;return{c(){e=A("img"),pn(e.src,n=r[5](r[0]))||H(e,"src",n),H(e,"width",150),H(e,"alt",t=`Legend for ${r[0]} layer`)},m(l,o){p(l,e,o)},p(l,o){o&1&&!pn(e.src,n=l[5](l[0]))&&H(e,"src",n),o&1&&t!==(t=`Legend for ${l[0]} layer`)&&H(e,"alt",t)},i:te,o:te,d(l){l&&m(e)}}}function Ma(r){let e,n;return e=new Be({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fa(r){let e,n;const t=[R("pollution"),{paint:{"raster-opacity":r[2]/100}},{layout:{visibility:r[1]?"visible":"none"}}];let l={};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ml({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&6?J(t,[t[0],i&4&&{paint:{"raster-opacity":o[2]/100}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ja(r){let e,n,t,l,o,i;function u(f){r[6](f)}let s={id:"pollution",$$slots:{right:[Ia],default:[Ta]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[1]&&Kn(r);return o=new dl({props:{tiles:[r[4](r[0])],tileSize:256,$$slots:{default:[Fa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],Z(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&$(a,1)):(a=Kn(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const g={};c&1&&(g.tiles=[f[4](f[0])]),c&2054&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}function Ea(r,e,n){let t,l=!1,o=50,i="PM25_viridis";function u(){return i=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${i}/MapServer/WMSServer`}function s(k){return t[1]}function a(k){let T=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${T}`}function f(k){let T=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${T}`}function c(k){l=k,n(1,l)}function _(k){i=k,n(0,i)}function g(){o=qr(this.value),n(2,o)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[i])},[i,l,o,s,a,f,c,_,g]}class Na extends q{constructor(e){super(),W(this,e,Ea,ja,z,{})}}function Da(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Wards`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ra(r){let e;return{c(){e=w(`ONS Geography
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ba(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Ra]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=A("p"),n=w("Data from "),h(t.$$.fragment),l=w(", as of May 2023."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Ga(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ba]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function za(r){let e,n=r[3].name+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=l[3].name+"")&&B(t,n)},d(l){l&&m(e)}}}function Ha(r){let e,n;return e=new oe({props:{$$slots:{default:[za,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ua(r){let e,n,t,l;const o=[R(Le),{sourceLayer:Le},{paint:{"fill-color":r[1],"fill-opacity":K(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let i={$$slots:{default:[Ha]},$$scope:{ctx:r}};for(let a=0;a<o.length;a+=1)i=Y(i,o[a]);e=new Re({props:i}),e.$on("click",Wa);const u=[R(`${Le}-outline`),{sourceLayer:Le},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let s={};for(let a=0;a<u.length;a+=1)s=Y(s,u[a]);return t=new ue({props:s}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),l=!0},p(a,f){const c=f&3?J(o,[f&0&&ne(R(Le)),f&0&&{sourceLayer:Le},f&2&&{paint:{"fill-color":a[1],"fill-opacity":K(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?J(u,[f&0&&ne(R(`${Le}-outline`)),f&0&&{sourceLayer:Le},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){l||($(e.$$.fragment,a),$(t.$$.fragment,a),l=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),l=!1},d(a){a&&m(n),v(e,a),v(t,a)}}}function qa(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:Le,$$slots:{right:[Ga],default:[Da]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${Le}.pmtiles`,$$slots:{default:[Ua]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Z(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let Le="wards";function Wa(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Va(r,e,n){let t=ee.wards,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Xa extends q{constructor(e){super(),W(this,e,Va,qa,z,{})}}function Za(r){let e;return{c(){e=w("Open Data Commons Open Database License")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ka(r){let e,n,t,l;return t=new U({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Za]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("License: "),h(t.$$.fragment)},m(o,i){p(o,e,i),S(e,n),b(t,e,null),l=!0},p(o,[i]){const u={};i&1&&(u.$$scope={dirty:i,ctx:o}),t.$set(u)},i(o){l||($(t.$$.fragment,o),l=!0)},o(o){d(t.$$.fragment,o),l=!1},d(o){o&&m(e),v(t)}}}class Ve extends q{constructor(e){super(),W(this,e,null,Ka,z,{})}}function Ya(r){let e,n,t;return e=new ge({props:{color:ee.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=w(`
  Bus routes`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Ja(r){let e;return{c(){e=w(`GTFS
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Qa(r){let e,n,t,l,o,i,u,s,a;return o=new U({props:{href:"https://gtfs.org",$$slots:{default:[Ja]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=C(),t=A("p"),l=w("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),i=w(`, and doesn't include which routes are run or the
        frequency of service.`),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),S(t,l),b(o,t,null),S(t,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||($(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(u)),v(o),v(s,f)}}}function xa(r){let e,n,t;return n=new se({props:{$$slots:{default:[Qa]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&8&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function ef(r){let e;return{c(){e=A("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function tf(r){let e;return{c(){e=A("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function nf(r){let e;function n(o,i){return o[2].has_bus_lane?tf:ef}let t=n(r),l=t(r);return{c(){l.c(),e=ve()},m(o,i){l.m(o,i),p(o,e,i)},p(o,i){t!==(t=n(o))&&(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){o&&m(e),l.d(o)}}}function rf(r){let e,n;return e=new oe({props:{$$slots:{default:[nf,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&12&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lf(r){let e,n;const t=[R(st),{sourceLayer:st},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ee.bus_route_with_lane,ee.bus_route_without_lane],"line-width":5,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[rf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?J(t,[i&0&&ne(R(st)),i&0&&{sourceLayer:st},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&8&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function of(r){let e,n,t,l,o;function i(s){r[1](s)}let u={id:st,$$slots:{right:[xa],default:[Ya]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${st}.pmtiles`,$$slots:{default:[lf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Z(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let st="bus_routes";function sf(r,e,n){let t=!1;function l(o){t=o,n(0,t)}return[t,l]}class af extends q{constructor(e){super(),W(this,e,sf,of,z,{})}}function Yn(r){const e=gf(r[3]);r[4]=e[0],r[5]=e[1],r[6]=e[2]}function Jn(r,e,n){const t=r.slice();return t[7]=e[n][0],t[8]=e[n][1],t}function ff(r){let e;return{c(){e=w("Cycle paths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function uf(r){let e,n,t,l,o,i,u,s;return u=new Ve({}),{c(){e=A("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=C(),t=A("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,l=C(),o=A("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,i=C(),h(u.$$.fragment)},m(a,f){p(a,e,f),p(a,n,f),p(a,t,f),p(a,l,f),p(a,o,f),p(a,i,f),b(u,a,f),s=!0},p:te,i(a){s||($(u.$$.fragment,a),s=!0)},o(a){d(u.$$.fragment,a),s=!1},d(a){a&&(m(e),m(n),m(t),m(l),m(o),m(i)),v(u,a)}}}function cf(r){let e,n,t;return n=new se({props:{$$slots:{default:[uf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&2048&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Qn(r){let e,n,t=qe(r[1]),l=[];for(let i=0;i<t.length;i+=1)l[i]=xn(Jn(r,t,i));const o=i=>d(l[i],1,1,()=>{l[i]=null});return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=ve()},m(i,u){for(let s=0;s<l.length;s+=1)l[s]&&l[s].m(i,u);p(i,e,u),n=!0},p(i,u){if(u&2){t=qe(i[1]);let s;for(s=0;s<t.length;s+=1){const a=Jn(i,t,s);l[s]?(l[s].p(a,u),$(l[s],1)):(l[s]=xn(a),l[s].c(),$(l[s],1),l[s].m(e.parentNode,e))}for(ie(),s=t.length;s<l.length;s+=1)o(s);ae()}},i(i){if(!n){for(let u=0;u<t.length;u+=1)$(l[u]);n=!0}},o(i){l=l.filter(Boolean);for(let u=0;u<l.length;u+=1)d(l[u]);n=!1},d(i){i&&m(e),Rt(l,i)}}}function xn(r){let e,n,t,l=r[7]+"",o,i,u;return n=new ge({props:{color:r[8]}}),{c(){e=A("div"),h(n.$$.fragment),t=C(),o=w(l),i=C()},m(s,a){p(s,e,a),b(n,e,null),S(e,t),S(e,o),S(e,i),u=!0},p:te,i(s){u||($(n.$$.fragment,s),u=!0)},o(s){d(n.$$.fragment,s),u=!1},d(s){s&&m(e),v(n)}}}function $f(r){Yn(r);let e,n=r[4]+"",t,l,o,i,u,s=r[5]+"",a,f,c,_,g=r[6]+"",k;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Direction: "),u=A("b"),a=C(),f=A("p"),c=w("Width: "),_=A("b"),k=w(g)},m(T,O){p(T,e,O),S(e,t),p(T,l,O),p(T,o,O),S(o,i),S(o,u),u.innerHTML=s,p(T,a,O),p(T,f,O),S(f,c),S(f,_),S(_,k)},p(T,O){Yn(T),O&8&&n!==(n=T[4]+"")&&B(t,n),O&8&&s!==(s=T[5]+"")&&(u.innerHTML=s),O&8&&g!==(g=T[6]+"")&&B(k,g)},d(T){T&&(m(e),m(l),m(o),m(a),m(f))}}}function pf(r){let e,n;return e=new oe({props:{$$slots:{default:[$f,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2056&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mf(r){let e,n;const t=[R(it),{sourceLayer:it},{paint:{"line-color":hr(["get","kind"],{track:ee.cycle_paths.track,lane:ee.cycle_paths.lane,shared_use_segregated:ee.cycle_paths.shared_use_segregated,shared_use_unsegregated:ee.cycle_paths.shared_use_unsegregated},"red"),"line-width":De,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[pf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),e.$on("click",df),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&1?J(t,[i&0&&ne(R(it)),i&0&&{sourceLayer:it},t[2],i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};i&2048&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _f(r){let e,n,t,l,o,i;function u(f){r[2](f)}let s={id:it,$$slots:{right:[cf],default:[ff]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&Qn(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${it}.pmtiles`,$$slots:{default:[mf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],Z(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=Qn(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const g={};c&2049&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let it="cycle_paths";function gf(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${n} ${r.direction}`,t]}function df(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function hf(r,e,n){let t=[["Separated tracks",ee.cycle_paths.track],["Unprotected lanes",ee.cycle_paths.lane],["Shared-use (segregated)",ee.cycle_paths.shared_use_segregated],["Shared-use (unsegregated)",ee.cycle_paths.shared_use_unsegregated]],l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class bf extends q{constructor(e){super(),W(this,e,hf,_f,z,{})}}function vf(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Major Road Network`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function wf(r){let e;return{c(){e=w(`Major Road Network
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function kf(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[wf]},$$scope:{ctx:r}}}),i=new je({}),{c(){e=A("p"),n=w("Data from the "),h(t.$$.fragment),l=w(", as of September 2021."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function yf(r){let e,n,t;return n=new se({props:{$$slots:{default:[kf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Sf(r){let e,n=(r[3].name??"Unknown MRN road")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unknown MRN road")+"")&&B(t,n)},d(l){l&&m(e)}}}function Tf(r){let e,n;return e=new oe({props:{$$slots:{default:[Sf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Of(r){let e,n;const t=[R(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[Tf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&ne(R(at)),i&0&&{sourceLayer:at},t[2],t[3],i&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Cf(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:at,$$slots:{right:[yf],default:[vf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${at}.pmtiles`,$$slots:{default:[Of]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Z(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let at="mrn";function Af(r,e,n){let t=ee.mrn,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Lf extends q{constructor(e){super(),W(this,e,Af,Cf,z,{})}}function If(r){let e;return{c(){e=w("Propensity to Cycle Tool")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Pf(r){let e;return{c(){e=w("the PCT website")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Mf(r){let e;return{c(){e=w("2017 journal article")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ff(r){let e,n,t,l,o,i,u,s,a,f,c;return u=new U({props:{href:"https://www.pct.bike",$$slots:{default:[Pf]},$$scope:{ctx:r}}}),a=new U({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=C(),t=A("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,l=C(),o=A("p"),i=w("See "),h(u.$$.fragment),s=w(" and "),h(a.$$.fragment),f=w(" for details on methodology and data sources.")},m(_,g){p(_,e,g),p(_,n,g),p(_,t,g),p(_,l,g),p(_,o,g),S(o,i),b(u,o,null),S(o,s),b(a,o,null),S(o,f),c=!0},p(_,g){const k={};g&1024&&(k.$$scope={dirty:g,ctx:_}),u.$set(k);const T={};g&1024&&(T.$$scope={dirty:g,ctx:_}),a.$set(T)},i(_){c||($(u.$$.fragment,_),$(a.$$.fragment,_),c=!0)},o(_){d(u.$$.fragment,_),d(a.$$.fragment,_),c=!1},d(_){_&&(m(e),m(n),m(t),m(l),m(o)),v(u),v(a)}}}function jf(r){let e,n,t;return n=new se({props:{$$slots:{default:[Ff]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&1024&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function er(r){let e,n,t,l,o,i,u,s;e=new Be({props:{colorScale:r[3],limits:r[4]}});function a(g){r[7](g)}let f={legend:"Trip purpose",id:"tripPurpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0]!==void 0&&(f.value=r[0]),t=new vr({props:f}),V.push(()=>X(t,"value",a));function c(g){r[8](g)}let _={label:"Scenario",id:"scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[1]!==void 0&&(_.value=r[1]),i=new Ot({props:_}),V.push(()=>X(i,"value",c)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),o=C(),h(i.$$.fragment)},m(g,k){b(e,g,k),p(g,n,k),b(t,g,k),p(g,o,k),b(i,g,k),s=!0},p(g,k){const T={};!l&&k&1&&(l=!0,T.value=g[0],Z(()=>l=!1)),t.$set(T);const O={};!u&&k&2&&(u=!0,O.value=g[1],Z(()=>u=!1)),i.$set(O)},i(g){s||($(e.$$.fragment,g),$(t.$$.fragment,g),$(i.$$.fragment,g),s=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(i.$$.fragment,g),s=!1},d(g){g&&(m(n),m(o)),v(e,g),v(t,g),v(i,g)}}}function Ef(r){let e,n=r[5](r[9])+"",t;return{c(){e=new sn(!1),t=ve(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Nf(r){let e,n;return e=new oe({props:{$$slots:{default:[Ef,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Df(r){let e,n;const t=[R(Pe),{sourceLayer:Pe},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":De,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Pe?"visible":"none"}}];let l={$$slots:{default:[Nf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?J(t,[i&0&&ne(R(Pe)),i&0&&{sourceLayer:Pe},i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":De,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Pe?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Rf(r){let e,n=r[5](r[9])+"",t;return{c(){e=new sn(!1),t=ve(),e.a=t},m(l,o){e.m(n,l,o),p(l,t,o)},p(l,o){o&512&&n!==(n=l[5](l[9])+"")&&e.p(n)},d(l){l&&(m(t),e.d())}}}function Bf(r){let e,n;return e=new oe({props:{$$slots:{default:[Rf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&1536&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gf(r){let e,n;const t=[R(Ye),{sourceLayer:Ye},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[1]],r[4],r[3]),"line-width":De,"line-opacity":K(1,.5)}},{layout:{visibility:r[2]&&r[0]==Ye?"visible":"none"}}];let l={$$slots:{default:[Bf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&31?J(t,[i&0&&ne(R(Ye)),i&0&&{sourceLayer:Ye},t[2],t[3],i&26&&{paint:{"line-color":$e(["get",o[1]],o[4],o[3]),"line-width":De,"line-opacity":K(1,.5)}},i&5&&{layout:{visibility:o[2]&&o[0]==Ye?"visible":"none"}}]):{};i&1024&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function zf(r){let e,n,t,l,o,i,u,s;function a(_){r[6](_)}let f={id:Pe,$$slots:{right:[jf],default:[If]},$$scope:{ctx:r}};r[2]!==void 0&&(f.checked=r[2]),e=new le({props:f}),V.push(()=>X(e,"checked",a));let c=r[2]&&er(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${Pe}.pmtiles`,$$slots:{default:[Df]},$$scope:{ctx:r}}}),u=new ce({props:{url:`pmtiles://${fe()}/v1/${Ye}.pmtiles`,$$slots:{default:[Gf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),c&&c.c(),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(_,g){b(e,_,g),p(_,t,g),c&&c.m(_,g),p(_,l,g),b(o,_,g),p(_,i,g),b(u,_,g),s=!0},p(_,[g]){const k={};g&1024&&(k.$$scope={dirty:g,ctx:_}),!n&&g&4&&(n=!0,k.checked=_[2],Z(()=>n=!1)),e.$set(k),_[2]?c?(c.p(_,g),g&4&&$(c,1)):(c=er(_),c.c(),$(c,1),c.m(l.parentNode,l)):c&&(ie(),d(c,1,1,()=>{c=null}),ae());const T={};g&1031&&(T.$$scope={dirty:g,ctx:_}),o.$set(T);const O={};g&1031&&(O.$$scope={dirty:g,ctx:_}),u.$set(O)},i(_){s||($(e.$$.fragment,_),$(c),$(o.$$.fragment,_),$(u.$$.fragment,_),s=!0)},o(_){d(e.$$.fragment,_),d(c),d(o.$$.fragment,_),d(u.$$.fragment,_),s=!1},d(_){_&&(m(t),m(l),m(i)),v(e,_),c&&c.d(_),v(o,_),v(u,_)}}}let Pe="pct_commute",Ye="pct_school";function Hf(r,e,n){let t=ee.sequential_low_to_high,l=[0,50,100,500,1e3,2e3],o=Pe,i="baseline",u=!1;function s(_){let g=_.baseline,k=_.gov_target,T=_.go_dutch,O=`<h2>Trip purpose: ${o==Pe?"commuting":"school"}</h2>`;if(O+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)O+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,O+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let y=(k/g).toFixed(1),L=(T/g).toFixed(1);O+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${y}x</b> of baseline)</p>`,O+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${L}x</b> of baseline)</p>`}return O}function a(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){i=_,n(1,i)}return[o,i,u,t,l,s,a,f,c]}class Uf extends q{constructor(e){super(),W(this,e,Hf,zf,z,{})}}function qf(r){let e;return{c(){e=w("OS Speeds")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Wf(r){let e;return{c(){e=w("Basemap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Vf(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Xf(r){let e,n,t,l,o,i,u,s,a,f,c,_;return t=new U({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Wf]},$$scope:{ctx:r}}}),f=new U({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Vf]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("The average speed data is collected over a six-month period by "),h(t.$$.fragment),l=w(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=C(),i=A("p"),i.textContent="Data valid as of 1 September, 2023",u=C(),s=A("p"),a=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=w(".")},m(g,k){p(g,e,k),S(e,n),b(t,e,null),S(e,l),p(g,o,k),p(g,i,k),p(g,u,k),p(g,s,k),S(s,a),b(f,s,null),S(s,c),_=!0},p(g,k){const T={};k&256&&(T.$$scope={dirty:k,ctx:g}),t.$set(T);const O={};k&256&&(O.$$scope={dirty:k,ctx:g}),f.$set(O)},i(g){_||($(t.$$.fragment,g),$(f.$$.fragment,g),_=!0)},o(g){d(t.$$.fragment,g),d(f.$$.fragment,g),_=!1},d(g){g&&(m(e),m(o),m(i),m(u),m(s)),v(t),v(f)}}}function Zf(r){let e,n,t;return n=new se({props:{$$slots:{default:[Xf]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&256&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function tr(r){let e,n,t,l,o;e=new Be({props:{colorScale:r[2],limits:r[3]}});function i(s){r[6](s)}let u={legend:"Show speed types",id:"showSpeed",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0]!==void 0&&(u.value=r[0]),t=new vr({props:u}),V.push(()=>X(t,"value",i)),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),o=!0},p(s,a){const f={};!l&&a&1&&(l=!0,f.value=s[0],Z(()=>l=!1)),t.$set(f)},i(s){o||($(e.$$.fragment,s),$(t.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),o=!1},d(s){s&&m(n),v(e,s),v(t,s)}}}function Kf(r){let e,n,t=r[7].indicative_mph+"",l,o,i,u,s,a=r[7].highest_mph+"",f,c,_=r[4][r[7].highest_description]+"",g,k;return{c(){e=A("p"),n=w("Posted speed limit: "),l=w(t),o=w(" mph"),i=C(),u=A("p"),s=w("Highest average speed: "),f=w(a),c=w(" mph (during "),g=w(_),k=w(")")},m(T,O){p(T,e,O),S(e,n),S(e,l),S(e,o),p(T,i,O),p(T,u,O),S(u,s),S(u,f),S(u,c),S(u,g),S(u,k)},p(T,O){O&128&&t!==(t=T[7].indicative_mph+"")&&B(l,t),O&128&&a!==(a=T[7].highest_mph+"")&&B(f,a),O&128&&_!==(_=T[4][T[7].highest_description]+"")&&B(g,_)},d(T){T&&(m(e),m(i),m(u))}}}function Yf(r){let e,n;return e=new oe({props:{$$slots:{default:[Kf,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&384&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jf(r){let e,n;const t=[R(ft),{sourceLayer:ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get",r[0]],r[3],r[2]),"line-width":De,"line-opacity":K(1,.5)}},{layout:{visibility:r[1]?"visible":"none"}}];let l={$$slots:{default:[Yf]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&15?J(t,[i&0&&ne(R(ft)),i&0&&{sourceLayer:ft},t[2],t[3],i&13&&{paint:{"line-color":$e(["get",o[0]],o[3],o[2]),"line-width":De,"line-opacity":K(1,.5)}},i&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};i&256&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Qf(r){let e,n,t,l,o,i;function u(f){r[5](f)}let s={id:ft,$$slots:{right:[Zf],default:[qf]},$$scope:{ctx:r}};r[1]!==void 0&&(s.checked=r[1]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[1]&&tr(r);return o=new ce({props:{url:`pmtiles://${an()}/v1/${ft}.pmtiles`,$$slots:{default:[Jf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],Z(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&$(a,1)):(a=tr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const g={};c&259&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ft="road_speeds";function xf(r,e,n){let t=ee.sequential_low_to_high,l=[0,20,30,40,50,90],o="indicative_mph",i=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function s(f){i=f,n(1,i)}function a(f){o=f,n(0,o)}return[o,i,t,l,u,s,a]}class eu extends q{constructor(e){super(),W(this,e,xf,Qf,z,{})}}function tu(r){let e;return{c(){e=w("OS Road widths")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function nu(r){let e;return{c(){e=w(`Public Sector Geospatial Agreement
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ru(r){let e,n,t,l,o,i,u,s,a;return u=new U({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[nu]},$$scope:{ctx:r}}}),{c(){e=A("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=C(),t=A("p"),t.textContent="Data valid as of 1 September, 2023",l=C(),o=A("p"),i=w(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),s=w(".")},m(f,c){p(f,e,c),p(f,n,c),p(f,t,c),p(f,l,c),p(f,o,c),S(o,i),b(u,o,null),S(o,s),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||($(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(m(e),m(n),m(t),m(l),m(o)),v(u)}}}function lu(r){let e,n,t;return n=new se({props:{$$slots:{default:[ru]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&32&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function nr(r){let e,n;return e=new Be({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ou(r){let e,n,t,l=r[4].average+"",o,i,u,s,a,f,c=r[4].minimum+"",_,g;return{c(){e=A("p"),n=w("Average width: "),t=A("b"),o=w(l),i=w(`
        meters`),u=C(),s=A("p"),a=w("Minimum width: "),f=A("b"),_=w(c),g=w(`
        meters`)},m(k,T){p(k,e,T),S(e,n),S(e,t),S(t,o),S(e,i),p(k,u,T),p(k,s,T),S(s,a),S(s,f),S(f,_),S(s,g)},p(k,T){T&16&&l!==(l=k[4].average+"")&&B(o,l),T&16&&c!==(c=k[4].minimum+"")&&B(_,c)},d(k){k&&(m(e),m(u),m(s))}}}function su(r){let e,n;return e=new oe({props:{$$slots:{default:[ou,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&48&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function iu(r){let e,n;const t=[R(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":$e(["get","average"],r[2],r[1]),"line-width":De,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[su]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new ue({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?J(t,[i&0&&ne(R(ut)),i&0&&{sourceLayer:ut},t[2],t[3],i&6&&{paint:{"line-color":$e(["get","average"],o[2],o[1]),"line-width":De,"line-opacity":K(1,.5)}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function au(r){let e,n,t,l,o,i;function u(f){r[3](f)}let s={id:ut,$$slots:{right:[lu],default:[tu]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&nr(r);return o=new ce({props:{url:`pmtiles://${an()}/v1/${ut}.pmtiles`,$$slots:{default:[iu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],Z(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=nr(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let ut="road_widths";function fu(r,e,n){let t=ee.sequential_low_to_high,l=[0,5,10,15,20,100],o=!1;function i(u){o=u,n(0,o)}return[o,t,l,i]}class uu extends q{constructor(e){super(),W(this,e,fu,au,z,{})}}function cu(r){let e,n,t;return{c(){e=A("input"),H(e,"class","govuk-file-upload"),H(e,"id","load-criticals"),H(e,"type","file")},m(l,o){p(l,e,o),r[7](e),n||(t=Tt(e,"change",r[5]),n=!0)},p:te,d(l){l&&m(e),r[7](null),n=!1,t()}}}function rr(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[pu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2054&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $u(r){let e,n,t=r[2].toLocaleString()+"",l,o,i;return e=new ge({props:{color:yt}}),{c(){h(e.$$.fragment),n=w(`
        Show `),l=w(t),o=w(" issues")},m(u,s){b(e,u,s),p(u,n,s),p(u,l,s),p(u,o,s),i=!0},p(u,s){(!i||s&4)&&t!==(t=u[2].toLocaleString()+"")&&B(l,t)},i(u){i||($(e.$$.fragment,u),i=!0)},o(u){d(e.$$.fragment,u),i=!1},d(u){u&&(m(n),m(l),m(o)),v(e,u)}}}function pu(r){let e,n,t;function l(i){r[8](i)}let o={id:"show-criticals",$$slots:{default:[$u]},$$scope:{ctx:r}};return r[1]!==void 0&&(o.checked=r[1]),e=new le({props:o}),V.push(()=>X(e,"checked",l)),{c(){h(e.$$.fragment)},m(i,u){b(e,i,u),t=!0},p(i,u){const s={};u&2052&&(s.$$scope={dirty:u,ctx:i}),!n&&u&2&&(n=!0,s.checked=i[1],Z(()=>n=!1)),e.$set(s)},i(i){t||($(e.$$.fragment,i),t=!0)},o(i){d(e.$$.fragment,i),t=!1},d(i){v(e,i)}}}function mu(r){let e,n,t,l,o,i;e=new br({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[cu]},$$scope:{ctx:r}}}),t=new wr({props:{errorMessage:r[3]}});let u=r[2]>0&&rr(r);return{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),u&&u.c(),o=ve()},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),u&&u.m(s,a),p(s,o,a),i=!0},p(s,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:s}),e.$set(f);const c={};a&8&&(c.errorMessage=s[3]),t.$set(c),s[2]>0?u?(u.p(s,a),a&4&&$(u,1)):(u=rr(s),u.c(),$(u,1),u.m(o.parentNode,o)):u&&(ie(),d(u,1,1,()=>{u=null}),ae())},i(s){i||($(e.$$.fragment,s),$(t.$$.fragment,s),$(u),i=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(u),i=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),u&&u.d(s)}}}function _u(r){let e,n,t=r[10].critical_type+"",l,o,i,u,s,a=r[10].location_description+"",f,c,_,g,k,T=r[10].notes+"",O,y,L,M,N,P,E,j=r[10].id+"",I,F,G,Q,D,x=(r[10].inspector??"???")+"",we,ht,de,xe=r[10].submission_time+"",bt,et,pe,vt,Ee,Ge=r[10].scheme_reference+"",Xe,wt,tt,Ze=r[10].current_design_stage+"",nt;return{c(){e=A("div"),n=A("h2"),l=w(t),o=C(),i=A("p"),u=A("u"),u.textContent="Location",s=w(`
          : `),f=w(a),c=C(),_=A("p"),g=A("u"),g.textContent="Notes",k=w(`
          : `),O=w(T),y=C(),L=A("hr"),M=C(),N=A("p"),P=w("Critical issue ID: "),E=A("b"),I=w(j),F=C(),G=A("p"),Q=w("Submitted by "),D=A("b"),we=w(x),ht=w(`
          at
          `),de=A("b"),bt=w(xe),et=C(),pe=A("p"),vt=w("For scheme "),Ee=A("b"),Xe=w(Ge),wt=w(`
          in stage
          `),tt=A("b"),nt=w(Ze),Te(e,"max-width","30vw")},m(he,Oe){p(he,e,Oe),S(e,n),S(n,l),S(e,o),S(e,i),S(i,u),S(i,s),S(i,f),S(e,c),S(e,_),S(_,g),S(_,k),S(_,O),S(e,y),S(e,L),S(e,M),S(e,N),S(N,P),S(N,E),S(E,I),S(e,F),S(e,G),S(G,Q),S(G,D),S(D,we),S(G,ht),S(G,de),S(de,bt),S(e,et),S(e,pe),S(pe,vt),S(pe,Ee),S(Ee,Xe),S(pe,wt),S(pe,tt),S(tt,nt)},p(he,Oe){Oe&1024&&t!==(t=he[10].critical_type+"")&&B(l,t),Oe&1024&&a!==(a=he[10].location_description+"")&&B(f,a),Oe&1024&&T!==(T=he[10].notes+"")&&B(O,T),Oe&1024&&j!==(j=he[10].id+"")&&B(I,j),Oe&1024&&x!==(x=(he[10].inspector??"???")+"")&&B(we,x),Oe&1024&&xe!==(xe=he[10].submission_time+"")&&B(bt,xe),Oe&1024&&Ge!==(Ge=he[10].scheme_reference+"")&&B(Xe,Ge),Oe&1024&&Ze!==(Ze=he[10].current_design_stage+"")&&B(nt,Ze)},d(he){he&&m(e)}}}function gu(r){let e,n;return e=new oe({props:{$$slots:{default:[_u,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&3072&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function du(r){let e,n,t,l,o,i;const u=[R(`${Ue}-clusters`),{applyToClusters:!0},{paint:{"circle-color":yt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:r[1]?"visible":"none"}},{hoverCursor:"pointer"}];let s={};for(let g=0;g<u.length;g+=1)s=Y(s,u[g]);e=new We({props:s}),e.$on("click",r[6]);const a=[R(`${Ue}-counts`),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:r[1]?"visible":"none"}}];let f={};for(let g=0;g<a.length;g+=1)f=Y(f,a[g]);t=new wl({props:f});const c=[R(`${Ue}-points`),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":yt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:r[1]?"visible":"none"}}];let _={$$slots:{default:[gu]},$$scope:{ctx:r}};for(let g=0;g<c.length;g+=1)_=Y(_,c[g]);return o=new We({props:_}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment)},m(g,k){b(e,g,k),p(g,n,k),b(t,g,k),p(g,l,k),b(o,g,k),i=!0},p(g,k){const T=k&2?J(u,[k&0&&ne(R(`${Ue}-clusters`)),u[1],k&0&&{paint:{"circle-color":yt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},k&2&&{layout:{visibility:g[1]?"visible":"none"}},u[4]]):{};e.$set(T);const O=k&2?J(a,[k&0&&ne(R(`${Ue}-counts`)),a[1],k&2&&{layout:{"text-field":"{point_count_abbreviated}",visibility:g[1]?"visible":"none"}}]):{};t.$set(O);const y=k&2?J(c,[k&0&&ne(R(`${Ue}-points`)),c[1],c[2],c[3],k&0&&{paint:{"circle-color":yt,"circle-opacity":K(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},k&2&&{layout:{visibility:g[1]?"visible":"none"}}]):{};k&2048&&(y.$$scope={dirty:k,ctx:g}),o.$set(y)},i(g){i||($(e.$$.fragment,g),$(t.$$.fragment,g),$(o.$$.fragment,g),i=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),i=!1},d(g){g&&(m(n),m(l)),v(e,g),v(t,g),v(o,g)}}}function hu(r){let e,n,t,l;return e=new Ie({props:{label:"Critical Issues",$$slots:{default:[mu]},$$scope:{ctx:r}}}),t=new Lt({props:{id:Ue,data:r[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[du]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,[i]){const u={};i&2063&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&16&&(s.data=o[4]),i&2050&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}let Ue="criticals",yt="red";function bu(r,e,n){let t;Ne(r,ln,g=>n(9,t=g));let l,o=!0,i=0,u="",s=Wr();async function a(g){try{n(4,s=await Ms(l.files[0])),n(2,i=s.features.length),n(3,u="")}catch(k){n(3,u=`The file you loaded is broken: ${k}`)}}function f(g){t.getSource(Ue).getClusterExpansionZoom(g.detail.features[0].properties.cluster_id,(k,T)=>{k||t.easeTo({center:g.detail.features[0].geometry.coordinates,zoom:T})})}function c(g){V[g?"unshift":"push"](()=>{l=g,n(0,l)})}function _(g){o=g,n(1,o)}return[l,o,i,u,s,a,f,c,_]}class vu extends q{constructor(e){super(),W(this,e,bu,hu,z,{})}}function wu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Crossings`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function ku(r){let e;return{c(){e=w("crossing")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function yu(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[ku]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Su(r){let e,n,t;return n=new se({props:{$$slots:{default:[yu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Tu(r){let e,n=lr(r[3])+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=lr(l[3])+"")&&B(t,n)},d(l){l&&m(e)}}}function Ou(r){let e,n;return e=new oe({props:{$$slots:{default:[Tu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Cu(r){let e,n;const t=[R(ct),{sourceLayer:ct},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Ou]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new We({props:l}),e.$on("click",Lu),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&ne(R(ct)),i&0&&{sourceLayer:ct},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Au(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:ct,$$slots:{right:[Su],default:[wu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${ct}.pmtiles`,$$slots:{default:[Cu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Z(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let ct="crossings";function lr(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Lu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Iu(r,e,n){let t=ee.crossings,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class Pu extends q{constructor(e){super(),W(this,e,Iu,Au,z,{})}}function Mu(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Cycle parking`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function Fu(r){let e;return{c(){e=w("OpenStreetMap")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function ju(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Fu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("Cycle parking, according to "),h(t.$$.fragment),l=w(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Eu(r){let e,n,t;return n=new se({props:{$$slots:{default:[ju]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Nu(r){let e,n,t,l=(r[3].capacity??"unknown")+"",o;return{c(){e=A("p"),n=w("Capacity: "),t=A("b"),o=w(l)},m(i,u){p(i,e,u),S(e,n),S(e,t),S(t,o)},p(i,u){u&8&&l!==(l=(i[3].capacity??"unknown")+"")&&B(o,l)},d(i){i&&m(e)}}}function Du(r){let e,n;return e=new oe({props:{$$slots:{default:[Nu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ru(r){let e,n;const t=[R($t),{sourceLayer:$t},{paint:{"circle-color":r[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Du]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new We({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&ne(R($t)),i&0&&{sourceLayer:$t},i&2&&{paint:{"circle-color":o[1],"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Bu(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:$t,$$slots:{right:[Eu],default:[Mu]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${$t}.pmtiles`,$$slots:{default:[Ru]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Z(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let $t="cycle_parking";function Gu(r,e,n){let t=ee.cycle_parking,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class zu extends q{constructor(e){super(),W(this,e,Gu,Bu,z,{})}}function Hu(r){let e,n,t,l;return e=new ge({props:{color:r[4]}}),{c(){h(e.$$.fragment),n=C(),t=w(r[2])},m(o,i){b(e,o,i),p(o,n,i),p(o,t,i),l=!0},p(o,i){(!l||i&4)&&B(t,o[2])},i(o){l||($(e.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),l=!1},d(o){o&&(m(n),m(t)),v(e,o)}}}function Uu(r){let e;const n=r[5].default,t=mt(n,r,r[7],null);return{c(){t&&t.c()},m(l,o){t&&t.m(l,o),e=!0},p(l,o){t&&t.p&&(!e||o&128)&&_t(t,n,l,l[7],e?dt(n,l[7],o,null):gt(l[7]),null)},i(l){e||($(t,l),e=!0)},o(l){d(t,l),e=!1},d(l){t&&t.d(l)}}}function qu(r){let e,n,t;return n=new se({props:{$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&128&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function Wu(r){let e,n=(r[8].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&258&&n!==(n=(l[8].name??`Unnamed ${l[1]}`)+"")&&B(t,n)},d(l){l&&m(e)}}}function Vu(r){let e,n;return e=new oe({props:{$$slots:{default:[Wu,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xu(r){let e,n;const t=[R(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":K(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Vu]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new Re({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&25?J(t,[i&1&&ne(R(o[0])),i&1&&{sourceLayer:o[0]},i&16&&{paint:{"fill-color":o[4],"fill-opacity":K(.7,1)}},i&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};i&130&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Zu(r){let e,n,t,l,o;function i(s){r[6](s)}let u={id:r[0],$$slots:{right:[qu],default:[Hu]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new ce({props:{url:`pmtiles://${fe()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Xu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&1&&(f.id=s[0]),a&132&&(f.$$scope={dirty:a,ctx:s}),!n&&a&8&&(n=!0,f.checked=s[3],Z(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${fe()}/v1/${s[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function Ku(r,e,n){let{$$slots:t={},$$scope:l}=e,{name:o}=e,{singularNoun:i}=e,{pluralNoun:u}=e,s=ee[o],a=!1;function f(c){a=c,n(3,a)}return r.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,i=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,l=c.$$scope)},[o,i,u,a,s,t,f,l]}class un extends q{constructor(e){super(),W(this,e,Ku,Zu,z,{name:0,singularNoun:1,pluralNoun:2})}}function Yu(r){let e;return{c(){e=w("hospital")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Ju(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Yu]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function Qu(r){let e,n;return e=new un({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Ju]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class xu extends q{constructor(e){super(),W(this,e,null,Qu,z,{})}}function ec(r){let e,n,t;return e=new ge({props:{color:r[1]}}),{c(){h(e.$$.fragment),n=w(`
  Railway Stations`)},m(l,o){b(e,l,o),p(l,n,o),t=!0},p:te,i(l){t||($(e.$$.fragment,l),t=!0)},o(l){d(e.$$.fragment,l),t=!1},d(l){l&&m(n),v(e,l)}}}function tc(r){let e;return{c(){e=w("railway station")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function nc(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[tc]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" data from OpenStreetMap (as of 9 August 2023)."),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function rc(r){let e,n,t;return n=new se({props:{$$slots:{default:[nc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&16&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function lc(r){let e,n=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=A("p"),t=w(n)},m(l,o){p(l,e,o),S(e,t)},p(l,o){o&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&B(t,n)},d(l){l&&m(e)}}}function oc(r){let e,n;return e=new oe({props:{$$slots:{default:[lc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&24&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sc(r){let e,n;const t=[R(zt),{paint:{"circle-color":r[1],"circle-radius":Bt/2}},{layout:{visibility:r[0]?"visible":"none"}}];let l={$$slots:{default:[oc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new We({props:l}),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&3?J(t,[i&0&&ne(R(zt)),i&2&&{paint:{"circle-color":o[1],"circle-radius":Bt/2}},i&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};i&16&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function ic(r){let e,n,t,l,o;function i(s){r[2](s)}let u={id:zt,$$slots:{right:[rc],default:[ec]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new le({props:u}),V.push(()=>X(e,"checked",i)),l=new Lt({props:{data:`${fe()}/v1/${zt}.geojson`,$$slots:{default:[sc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:s}),!n&&a&1&&(n=!0,f.checked=s[0],Z(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:s}),l.$set(c)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}let zt="railway_stations";function ac(r,e,n){let t=ee.railway_stations,l=!1;function o(i){l=i,n(0,l)}return[l,t,o]}class fc extends q{constructor(e){super(),W(this,e,ac,ic,z,{})}}function uc(r){let e;return{c(){e=w("primary and secondary schools")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function cc(r){let e,n,t,l,o,i,u;return t=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dschool",$$slots:{default:[uc]},$$scope:{ctx:r}}}),i=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(` from OpenStreetMap (as of 9 August 2023). It doesn't include
    kindergartens, colleges, universities, or other training schools.`),o=C(),h(i.$$.fragment)},m(s,a){p(s,e,a),S(e,n),b(t,e,null),S(e,l),p(s,o,a),b(i,s,a),u=!0},p(s,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:s}),t.$set(f)},i(s){u||($(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(m(e),m(o)),v(t),v(i,s)}}}function $c(r){let e,n;return e=new un({props:{name:"schools",singularNoun:"school",pluralNoun:"Schools",$$slots:{default:[cc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class pc extends q{constructor(e){super(),W(this,e,null,$c,z,{})}}function mc(r){let e;return{c(){e=w("sports pitches")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function _c(r){let e;return{c(){e=w("sports centres")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function gc(r){let e,n,t,l,o,i,u,s,a;return t=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[mc]},$$scope:{ctx:r}}}),o=new U({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[_c]},$$scope:{ctx:r}}}),s=new Ve({}),{c(){e=A("p"),n=w("This shows "),h(t.$$.fragment),l=w(" and "),h(o.$$.fragment),i=w(" data from OpenStreetMap (as of 9 August 2023)."),u=C(),h(s.$$.fragment)},m(f,c){p(f,e,c),S(e,n),b(t,e,null),S(e,l),b(o,e,null),S(e,i),p(f,u,c),b(s,f,c),a=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||($(t.$$.fragment,f),$(o.$$.fragment,f),$(s.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(s.$$.fragment,f),a=!1},d(f){f&&(m(e),m(u)),v(t),v(o),v(s,f)}}}function dc(r){let e,n;return e=new un({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[gc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class hc extends q{constructor(e){super(),W(this,e,null,dc,z,{})}}function bc(r){let e;return{c(){e=w("Vehicle counts")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function vc(r){let e;return{c(){e=w(`DfT road statistics
        `)},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function wc(r){let e;return{c(){e=w("methodology")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function kc(r){let e,n,t,l,o,i,u,s,a,f,c;return t=new U({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[vc]},$$scope:{ctx:r}}}),o=new U({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[wc]},$$scope:{ctx:r}}}),f=new je({}),{c(){e=A("p"),n=w("2022 AADF (annual average daily flow) data from "),h(t.$$.fragment),l=w(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. See `),h(o.$$.fragment),i=w(" for details and caveats about the measurements."),u=C(),s=A("p"),s.textContent=`The colors show motor vehicles AADF, not pedal cycles. Click a point for
        full data.`,a=C(),h(f.$$.fragment)},m(_,g){p(_,e,g),S(e,n),b(t,e,null),S(e,l),b(o,e,null),S(e,i),p(_,u,g),p(_,s,g),p(_,a,g),b(f,_,g),c=!0},p(_,g){const k={};g&64&&(k.$$scope={dirty:g,ctx:_}),t.$set(k);const T={};g&64&&(T.$$scope={dirty:g,ctx:_}),o.$set(T)},i(_){c||($(t.$$.fragment,_),$(o.$$.fragment,_),$(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(m(e),m(u),m(s),m(a)),v(t),v(o),v(f,_)}}}function yc(r){let e,n,t;return n=new se({props:{$$slots:{default:[kc]},$$scope:{ctx:r}}}),{c(){e=A("span"),h(n.$$.fragment),H(e,"slot","right")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function or(r){let e,n;return e=new Be({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sc(r){let e,n=r[5].location+"",t,l,o,i,u,s=r[5].motor_vehicles_2022.toLocaleString()+"",a,f,c,_,g,k=r[5].pedal_cycles_2022.toLocaleString()+"",T,O,y,L,M,N=r[5].method+"",P;return{c(){e=A("h2"),t=w(n),l=C(),o=A("p"),i=w("Total motor vehicles (2022 AADF): "),u=A("b"),a=w(s),f=C(),c=A("p"),_=w("Total pedal cycles (2022 AADF): "),g=A("b"),T=w(k),O=C(),y=A("p"),L=w("Count method: "),M=A("b"),P=w(N)},m(E,j){p(E,e,j),S(e,t),p(E,l,j),p(E,o,j),S(o,i),S(o,u),S(u,a),p(E,f,j),p(E,c,j),S(c,_),S(c,g),S(g,T),p(E,O,j),p(E,y,j),S(y,L),S(y,M),S(M,P)},p(E,j){j&32&&n!==(n=E[5].location+"")&&B(t,n),j&32&&s!==(s=E[5].motor_vehicles_2022.toLocaleString()+"")&&B(a,s),j&32&&k!==(k=E[5].pedal_cycles_2022.toLocaleString()+"")&&B(T,k),j&32&&N!==(N=E[5].method+"")&&B(P,N)},d(E){E&&(m(e),m(l),m(o),m(f),m(c),m(O),m(y))}}}function Tc(r){let e,n;return e=new oe({props:{$$slots:{default:[Sc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&96&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Oc(r){let e,n;const t=[R(pt),{sourceLayer:pt},{paint:{"circle-color":$e(["get","motor_vehicles_2022"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Tc]},$$scope:{ctx:r}};for(let o=0;o<t.length;o+=1)l=Y(l,t[o]);return e=new We({props:l}),e.$on("click",Ac),{c(){h(e.$$.fragment)},m(o,i){b(e,o,i),n=!0},p(o,i){const u=i&7?J(t,[i&0&&ne(R(pt)),i&0&&{sourceLayer:pt},i&6&&{paint:{"circle-color":$e(["get","motor_vehicles_2022"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},i&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};i&64&&(u.$$scope={dirty:i,ctx:o}),e.$set(u)},i(o){n||($(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Cc(r){let e,n,t,l,o,i;function u(f){r[4](f)}let s={id:pt,$$slots:{right:[yc],default:[bc]},$$scope:{ctx:r}};r[0]!==void 0&&(s.checked=r[0]),e=new le({props:s}),V.push(()=>X(e,"checked",u));let a=r[0]&&or(r);return o=new ce({props:{url:`pmtiles://${fe()}/v1/${pt}.pmtiles`,$$slots:{default:[Oc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=C(),a&&a.c(),l=C(),h(o.$$.fragment)},m(f,c){b(e,f,c),p(f,t,c),a&&a.m(f,c),p(f,l,c),b(o,f,c),i=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],Z(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&$(a,1)):(a=or(f),a.c(),$(a,1),a.m(l.parentNode,l)):a&&(ie(),d(a,1,1,()=>{a=null}),ae());const g={};c&65&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){i||($(e.$$.fragment,f),$(a),$(o.$$.fragment,f),i=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),i=!1},d(f){f&&(m(t),m(l)),v(e,f),a&&a.d(f),v(o,f)}}}let pt="vehicle_counts";function Ac(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function Lc(r,e,n){let t=ee.sequential_low_to_high,l=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],i=!1;function u(s){i=s,n(0,i)}return[i,t,l,o,u]}class Ic extends q{constructor(e){super(),W(this,e,Lc,Cc,z,{})}}function Pc(r){let e,n,t,l,o,i,u,s;return e=new pc({}),t=new xu({}),o=new hc({}),u=new fc({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment)},m(a,f){b(e,a,f),p(a,n,f),b(t,a,f),p(a,l,f),b(o,a,f),p(a,i,f),b(u,a,f),s=!0},i(a){s||($(e.$$.fragment,a),$(t.$$.fragment,a),$(o.$$.fragment,a),$(u.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),s=!1},d(a){a&&(m(n),m(l),m(i)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function Mc(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[Pc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fc(r){let e,n,t,l,o,i,u,s,a,f;return e=new bf({}),t=new Lf({}),o=new af({}),u=new zu({}),a=new Pu({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,_){b(e,c,_),p(c,n,_),b(t,c,_),p(c,l,_),b(o,c,_),p(c,i,_),b(u,c,_),p(c,s,_),b(a,c,_),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function jc(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[Fc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ec(r){let e,n,t,l,o,i,u,s,a,f;return e=new Sa({}),t=new Xa({}),o=new Pi({}),u=new xi({}),a=new pa({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(c,_){b(e,c,_),p(c,n,_),b(t,c,_),p(c,l,_),b(o,c,_),p(c,i,_),b(u,c,_),p(c,s,_),b(a,c,_),f=!0},i(c){f||($(e.$$.fragment,c),$(t.$$.fragment,c),$(o.$$.fragment,c),$(u.$$.fragment,c),$(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(m(n),m(l),m(i),m(s)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function Nc(r){let e,n;return e=new It({props:{small:!0,$$slots:{default:[Ec]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&8&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Dc(r){let e,n,t,l;return e=new vi({}),t=new Hi({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Rc(r){let e,n,t,l;return e=new uu({}),t=new eu({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Bc(r){let e,n,t,l,o=rn()=="Private (development)",i,u,s;e=new Ic({}),t=new Uf({});let a=o&&Rc();return u=new Na({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),a&&a.c(),i=C(),h(u.$$.fragment)},m(f,c){b(e,f,c),p(f,n,c),b(t,f,c),p(f,l,c),a&&a.m(f,c),p(f,i,c),b(u,f,c),s=!0},p:te,i(f){s||($(e.$$.fragment,f),$(t.$$.fragment,f),$(a),$(u.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(a),d(u.$$.fragment,f),s=!1},d(f){f&&(m(n),m(l),m(i)),v(e,f),v(t,f),a&&a.d(f),v(u,f)}}}function Gc(r){let e,n,t,l,o;function i(s){r[2](s)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new Qr({props:u}),V.push(()=>X(e,"enabled",i)),l=new ol({}),{c(){h(e.$$.fragment),t=C(),h(l.$$.fragment)},m(s,a){b(e,s,a),p(s,t,a),b(l,s,a),o=!0},p(s,a){const f={};!n&&a&1&&(n=!0,f.enabled=s[0],Z(()=>n=!1)),e.$set(f)},i(s){o||($(e.$$.fragment,s),$(l.$$.fragment,s),o=!0)},o(s){d(e.$$.fragment,s),d(l.$$.fragment,s),o=!1},d(s){s&&m(t),v(e,s),v(l,s)}}}function zc(r){let e,n,t,l,o,i,u,s,a,f,c,_,g,k,T,O;return e=new vu({}),t=new Ie({props:{label:"Trip generators",$$slots:{default:[Mc]},$$scope:{ctx:r}}}),o=new Ie({props:{label:"Existing infrastructure",$$slots:{default:[jc]},$$scope:{ctx:r}}}),u=new Ie({props:{label:"Boundaries",$$slots:{default:[Nc]},$$scope:{ctx:r}}}),a=new Ie({props:{label:"Census",$$slots:{default:[Dc]},$$scope:{ctx:r}}}),c=new Ie({props:{label:"Other",$$slots:{default:[Bc]},$$scope:{ctx:r}}}),g=new Ie({props:{label:"Tools",$$slots:{default:[Gc]},$$scope:{ctx:r}}}),T=new Jr({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),h(c.$$.fragment),_=C(),h(g.$$.fragment),k=C(),h(T.$$.fragment)},m(y,L){b(e,y,L),p(y,n,L),b(t,y,L),p(y,l,L),b(o,y,L),p(y,i,L),b(u,y,L),p(y,s,L),b(a,y,L),p(y,f,L),b(c,y,L),p(y,_,L),b(g,y,L),p(y,k,L),b(T,y,L),O=!0},p(y,L){const M={};L&8&&(M.$$scope={dirty:L,ctx:y}),t.$set(M);const N={};L&8&&(N.$$scope={dirty:L,ctx:y}),o.$set(N);const P={};L&8&&(P.$$scope={dirty:L,ctx:y}),u.$set(P);const E={};L&8&&(E.$$scope={dirty:L,ctx:y}),a.$set(E);const j={};L&8&&(j.$$scope={dirty:L,ctx:y}),c.$set(j);const I={};L&9&&(I.$$scope={dirty:L,ctx:y}),g.$set(I);const F={};L&2&&(F.disabled=!y[1]),T.$set(F)},i(y){O||($(e.$$.fragment,y),$(t.$$.fragment,y),$(o.$$.fragment,y),$(u.$$.fragment,y),$(a.$$.fragment,y),$(c.$$.fragment,y),$(g.$$.fragment,y),$(T.$$.fragment,y),O=!0)},o(y){d(e.$$.fragment,y),d(t.$$.fragment,y),d(o.$$.fragment,y),d(u.$$.fragment,y),d(a.$$.fragment,y),d(c.$$.fragment,y),d(g.$$.fragment,y),d(T.$$.fragment,y),O=!1},d(y){y&&(m(n),m(l),m(i),m(s),m(f),m(_),m(k)),v(e,y),v(t,y),v(o,y),v(u,y),v(a,y),v(c,y),v(g,y),v(T,y)}}}function Hc(r){let e,n;return e=new Ie({props:{label:"Layers",open:!0,$$slots:{default:[zc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&11&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Uc(r,e,n){let t,l;Ne(r,mn,i=>n(1,l=i));function o(i){t=i,n(0,t),n(1,l)}return r.$$.update=()=>{r.$$.dirty&2&&n(0,t=!l),r.$$.dirty&1&&mn.set(!t)},[t,l,o]}class qc extends q{constructor(e){super(),W(this,e,Uc,Hc,z,{})}}function Wc(r,e,n){let{loadFile:t}=e;return on(async()=>{let o=await(await fetch(`${an()}/v1/random_schemes.geojson`)).text();t(o)}),r.$$set=l=>{"loadFile"in l&&n(0,t=l.loadFile)},[t]}class Vc extends q{constructor(e){super(),W(this,e,Wc,null,z,{loadFile:0})}}function Xc(r){let e;return{c(){e=w("Show on map")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Zc(r){let e;return{c(){e=w("Edit scheme locally")},m(n,t){p(n,e,t)},d(n){n&&m(e)}}}function Kc(r){let e,n,t,l;return e=new Yt({props:{$$slots:{default:[Xc]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Yt({props:{$$slots:{default:[Zc]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment)},m(o,i){b(e,o,i),p(o,n,i),b(t,o,i),l=!0},p(o,i){const u={};i&32&&(u.$$scope={dirty:i,ctx:o}),e.$set(u);const s={};i&32&&(s.$$scope={dirty:i,ctx:o}),t.$set(s)},i(o){l||($(e.$$.fragment,o),$(t.$$.fragment,o),l=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),l=!1},d(o){o&&m(n),v(e,o),v(t,o)}}}function Yc(r){let e,n,t=r[0].authority_or_region+"",l,o,i,u,s=r[0].capital_scheme_id+"",a,f,c,_,g=r[0].funding_programme+"",k,T,O,y;return O=new xr({props:{$$slots:{default:[Kc]},$$scope:{ctx:r}}}),{c(){e=A("p"),n=w("Authority or region: "),l=w(t),o=C(),i=A("p"),u=w("Capital scheme ID: "),a=w(s),f=C(),c=A("p"),_=w("Funding programme: "),k=w(g),T=C(),h(O.$$.fragment)},m(L,M){p(L,e,M),S(e,n),S(e,l),p(L,o,M),p(L,i,M),S(i,u),S(i,a),p(L,f,M),p(L,c,M),S(c,_),S(c,k),p(L,T,M),b(O,L,M),y=!0},p(L,M){(!y||M&1)&&t!==(t=L[0].authority_or_region+"")&&B(l,t),(!y||M&1)&&s!==(s=L[0].capital_scheme_id+"")&&B(a,s),(!y||M&1)&&g!==(g=L[0].funding_programme+"")&&B(k,g);const N={};M&32&&(N.$$scope={dirty:M,ctx:L}),O.$set(N)},i(L){y||($(O.$$.fragment,L),y=!0)},o(L){d(O.$$.fragment,L),y=!1},d(L){L&&(m(e),m(o),m(i),m(f),m(c),m(T)),v(O,L)}}}function Jc(r){let e,n;return e=new Ie({props:{label:`${r[0].scheme_reference}: ${r[0].num_features} features`,$$slots:{default:[Yc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&1&&(o.label=`${t[0].scheme_reference}: ${t[0].num_features} features`),l&33&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qc(r,e,n){let t;Ne(r,ln,s=>n(4,t=s));let{schemesGj:l}=e,{scheme:o}=e;function i(){let s={type:"FeatureCollection",features:l.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};t==null||t.fitBounds(Vr(s),{padding:20,animate:!1})}function u(){let s={type:"FeatureCollection",features:l.features.filter(f=>f.properties.scheme_reference==o.scheme_reference)},a=o.authority_or_region;window.localStorage.setItem(a,JSON.stringify(s)),window.open(`scheme.html?authority=${o.authority_or_region}`,"_blank")}return r.$$set=s=>{"schemesGj"in s&&n(3,l=s.schemesGj),"scheme"in s&&n(0,o=s.scheme)},[o,i,u,l]}class xc extends q{constructor(e){super(),W(this,e,Qc,Jc,z,{schemesGj:3,scheme:0})}}function sr(r){let e,n,t=_n(r[0].length_meters)+"",l;return{c(){e=A("p"),n=w("Length: "),l=w(t)},m(o,i){p(o,e,i),S(e,n),S(e,l)},p(o,i){i&1&&t!==(t=_n(o[0].length_meters)+"")&&B(l,t)},d(o){o&&m(e)}}}function ir(r){let e,n=r[1](r[0].description)+"";return{c(){e=A("p")},m(t,l){p(t,e,l),e.innerHTML=n},p(t,l){l&1&&n!==(n=t[1](t[0].description)+"")&&(e.innerHTML=n)},d(t){t&&m(e)}}}function e$(r){let e,n,t,l=r[1](r[0].name)+"",o,i=r[0].intervention_type+"",u,s,a,f,c,_=r[0].scheme_reference+"",g,k,T,O=r[0].length_meters&&sr(r),y=r[0].description&&ir(r);return{c(){e=A("div"),n=A("h2"),t=new sn(!1),o=w(" ("),u=w(i),s=w(")"),a=C(),f=A("p"),c=w("Scheme reference: "),g=w(_),k=C(),O&&O.c(),T=C(),y&&y.c(),t.a=o,Te(e,"max-width","30vw")},m(L,M){p(L,e,M),S(e,n),t.m(l,n),S(n,o),S(n,u),S(n,s),S(e,a),S(e,f),S(f,c),S(f,g),S(e,k),O&&O.m(e,null),S(e,T),y&&y.m(e,null)},p(L,[M]){M&1&&l!==(l=L[1](L[0].name)+"")&&t.p(l),M&1&&i!==(i=L[0].intervention_type+"")&&B(u,i),M&1&&_!==(_=L[0].scheme_reference+"")&&B(g,_),L[0].length_meters?O?O.p(L,M):(O=sr(L),O.c(),O.m(e,T)):O&&(O.d(1),O=null),L[0].description?y?y.p(L,M):(y=ir(L),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},i:te,o:te,d(L){L&&m(e),O&&O.d(),y&&y.d()}}}function t$(r,e,n){let{props:t}=e,{filterText:l}=e;function o(i){return l?i.replace(new RegExp(l,"gi"),u=>`<mark>${u}</mark>`):i}return r.$$set=i=>{"props"in i&&n(0,t=i.props),"filterText"in i&&n(2,l=i.filterText)},[t,o,l]}class cn extends q{constructor(e){super(),W(this,e,t$,e$,z,{props:0,filterText:2})}}function n$(r){let e,n;return e=new cn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function r$(r){let e,n;return e=new oe({props:{$$slots:{default:[n$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function l$(r){let e,n;return e=new cn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function o$(r){let e,n;return e=new oe({props:{$$slots:{default:[l$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function s$(r){let e,n;return e=new cn({props:{props:r[7],filterText:r[1]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&128&&(o.props=t[7]),l&2&&(o.filterText=t[1]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function i$(r){let e,n;return e=new oe({props:{$$slots:{default:[s$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&386&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function a$(r){let e,n,t,l,o,i,u,s,a,f;const c=[R("interventions-points"),{filter:["all",gn,r[4],r[5]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[3],"circle-radius":Bt,"circle-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let _={$$slots:{default:[r$]},$$scope:{ctx:r}};for(let P=0;P<c.length;P+=1)_=Y(_,c[P]);e=new We({props:_});const g=[R("interventions-lines"),{filter:["all",dn,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[3],"line-width":kt,"line-opacity":K(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let k={$$slots:{default:[o$]},$$scope:{ctx:r}};for(let P=0;P<g.length;P+=1)k=Y(k,g[P]);t=new ue({props:k});const T=[R("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*kt,"circle-opacity":0,"circle-stroke-color":el.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let O={};for(let P=0;P<T.length;P+=1)O=Y(O,T[P]);o=new We({props:O});const y=[R("interventions-polygons"),{filter:["all",Ft,r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[3],"fill-opacity":K(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let L={$$slots:{default:[i$]},$$scope:{ctx:r}};for(let P=0;P<y.length;P+=1)L=Y(L,y[P]);u=new Re({props:L});const M=[R("interventions-polygons-outlines"),{filter:["all",Ft,r[4]]},{paint:{"line-color":r[3],"line-opacity":.5,"line-width":.7*kt}},{layout:{visibility:r[0]?"visible":"none"}}];let N={};for(let P=0;P<M.length;P+=1)N=Y(N,M[P]);return a=new ue({props:N}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment)},m(P,E){b(e,P,E),p(P,n,E),b(t,P,E),p(P,l,E),b(o,P,E),p(P,i,E),b(u,P,E),p(P,s,E),b(a,P,E),f=!0},p(P,E){const j=E&57?J(c,[c[0],E&48&&{filter:["all",gn,P[4],P[5]]},c[2],c[3],E&8&&{paint:{"circle-color":P[3],"circle-radius":Bt,"circle-opacity":K(1,.5)}},E&1&&{layout:{visibility:P[0]?"visible":"none"}}]):{};E&258&&(j.$$scope={dirty:E,ctx:P}),e.$set(j);const I=E&25?J(g,[g[0],E&16&&{filter:["all",dn,P[4]]},g[2],g[3],E&8&&{paint:{"line-color":P[3],"line-width":kt,"line-opacity":K(1,.5)}},E&1&&{layout:{visibility:P[0]?"visible":"none"}}]):{};E&258&&(I.$$scope={dirty:E,ctx:P}),t.$set(I);const F=E&1?J(T,[T[0],T[1],T[2],{layout:{visibility:P[0]?"visible":"none"}}]):{};o.$set(F);const G=E&25?J(y,[y[0],E&16&&{filter:["all",Ft,P[4]]},y[2],y[3],E&8&&{paint:{"fill-color":P[3],"fill-opacity":K(.2,.5)}},E&1&&{layout:{visibility:P[0]?"visible":"none"}}]):{};E&258&&(G.$$scope={dirty:E,ctx:P}),u.$set(G);const Q=E&25?J(M,[M[0],E&16&&{filter:["all",Ft,P[4]]},E&8&&{paint:{"line-color":P[3],"line-opacity":.5,"line-width":.7*kt}},E&1&&{layout:{visibility:P[0]?"visible":"none"}}]):{};a.$set(Q)},i(P){f||($(e.$$.fragment,P),$(t.$$.fragment,P),$(o.$$.fragment,P),$(u.$$.fragment,P),$(a.$$.fragment,P),f=!0)},o(P){d(e.$$.fragment,P),d(t.$$.fragment,P),d(o.$$.fragment,P),d(u.$$.fragment,P),d(a.$$.fragment,P),f=!1},d(P){P&&(m(n),m(l),m(i),m(s)),v(e,P),v(t,P),v(o,P),v(u,P),v(a,P)}}}function f$(r){let e,n;return e=new Lt({props:{data:r[2],$$slots:{default:[a$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&4&&(o.data=t[2]),l&259&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function u$(r,e,n){let t,{schemesGj:l}=e,{showSchemes:o}=e,{filterText:i}=e,u=kr("v1");const s=["!=","hide_while_editing",!0],a=["!=","endpoint",!0];return r.$$set=f=>{"schemesGj"in f&&n(6,l=f.schemesGj),"showSchemes"in f&&n(0,o=f.showSchemes),"filterText"in f&&n(1,i=f.filterText)},r.$$.update=()=>{r.$$.dirty&64&&n(2,t=Xr(l))},[o,i,t,u,s,a,l]}class c$ extends q{constructor(e){super(),W(this,e,u$,f$,z,{schemesGj:6,showSchemes:0,filterText:1})}}function ar(r,e,n){const t=r.slice();return t[13]=e[n],t}function $$(r){let e,n;return e=new Vc({props:{loadFile:r[7]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:te,i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fr(r){let e,n,t,l,o,i;function u(_){r[8](_)}function s(_){r[9](_)}function a(_){r[10](_)}function f(_){r[11](_)}let c={schemes:r[2]};return r[1]!==void 0&&(c.schemesGj=r[1]),r[3]!==void 0&&(c.schemesToBeShown=r[3]),r[4]!==void 0&&(c.filterText=r[4]),r[5]!==void 0&&(c.show=r[5]),e=new Us({props:c}),V.push(()=>X(e,"schemesGj",u)),V.push(()=>X(e,"schemesToBeShown",s)),V.push(()=>X(e,"filterText",a)),V.push(()=>X(e,"show",f)),{c(){h(e.$$.fragment)},m(_,g){b(e,_,g),i=!0},p(_,g){const k={};g&4&&(k.schemes=_[2]),!n&&g&2&&(n=!0,k.schemesGj=_[1],Z(()=>n=!1)),!t&&g&8&&(t=!0,k.schemesToBeShown=_[3],Z(()=>t=!1)),!l&&g&16&&(l=!0,k.filterText=_[4],Z(()=>l=!1)),!o&&g&32&&(o=!0,k.show=_[5],Z(()=>o=!1)),e.$set(k)},i(_){i||($(e.$$.fragment,_),i=!0)},o(_){d(e.$$.fragment,_),i=!1},d(_){v(e,_)}}}function ur(r){let e,n;return e=new xc({props:{schemesGj:r[1],scheme:r[13]}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const o={};l&2&&(o.schemesGj=t[1]),l&4&&(o.scheme=t[13]),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cr(r){let e=r[3].has(r[13].scheme_reference),n,t,l=e&&ur(r);return{c(){l&&l.c(),n=ve()},m(o,i){l&&l.m(o,i),p(o,n,i),t=!0},p(o,i){i&12&&(e=o[3].has(o[13].scheme_reference)),e?l?(l.p(o,i),i&12&&$(l,1)):(l=ur(o),l.c(),$(l,1),l.m(n.parentNode,n)):l&&(ie(),d(l,1,1,()=>{l=null}),ae())},i(o){t||($(l),t=!0)},o(o){d(l),t=!1},d(o){o&&m(n),l&&l.d(o)}}}function p$(r){let e,n,t,l,o,i,u,s,a,f,c=rn()=="Private (development)",_,g,k,T,O,y,L,M;o=new rl({props:{boundaryGeojson:r[1]}}),u=new Al({}),a=new Zr({});let N=c&&$$(r);g=new ll({props:{label:"Load schemes from GeoJSON",id:"load-geojson",loadFile:r[7]}}),T=new wr({props:{errorMessage:r[0]}});let P=r[2].size>0&&fr(r),E=qe(r[2].values()),j=[];for(let F=0;F<E.length;F+=1)j[F]=cr(ar(r,E,F));const I=F=>d(j[F],1,1,()=>{j[F]=null});return{c(){e=A("div"),n=A("div"),t=A("h1"),t.textContent="Browse schemes",l=C(),h(o.$$.fragment),i=C(),h(u.$$.fragment),s=C(),h(a.$$.fragment),f=C(),N&&N.c(),_=C(),h(g.$$.fragment),k=C(),h(T.$$.fragment),O=C(),P&&P.c(),y=C(),L=A("ul");for(let F=0;F<j.length;F+=1)j[F].c();Te(n,"display","flex"),Te(n,"justify-content","space-between"),H(e,"slot","sidebar"),H(e,"class","govuk-prose")},m(F,G){p(F,e,G),S(e,n),S(n,t),S(n,l),b(o,n,null),S(e,i),b(u,e,null),S(e,s),b(a,e,null),S(e,f),N&&N.m(e,null),S(e,_),b(g,e,null),S(e,k),b(T,e,null),S(e,O),P&&P.m(e,null),S(e,y),S(e,L);for(let Q=0;Q<j.length;Q+=1)j[Q]&&j[Q].m(L,null);M=!0},p(F,G){const Q={};G&2&&(Q.boundaryGeojson=F[1]),o.$set(Q),c&&N.p(F,G);const D={};if(G&1&&(D.errorMessage=F[0]),T.$set(D),F[2].size>0?P?(P.p(F,G),G&4&&$(P,1)):(P=fr(F),P.c(),$(P,1),P.m(e,y)):P&&(ie(),d(P,1,1,()=>{P=null}),ae()),G&14){E=qe(F[2].values());let x;for(x=0;x<E.length;x+=1){const we=ar(F,E,x);j[x]?(j[x].p(we,G),$(j[x],1)):(j[x]=cr(we),j[x].c(),$(j[x],1),j[x].m(L,null))}for(ie(),x=E.length;x<j.length;x+=1)I(x);ae()}},i(F){if(!M){$(o.$$.fragment,F),$(u.$$.fragment,F),$(a.$$.fragment,F),$(N),$(g.$$.fragment,F),$(T.$$.fragment,F),$(P);for(let G=0;G<E.length;G+=1)$(j[G]);M=!0}},o(F){d(o.$$.fragment,F),d(u.$$.fragment,F),d(a.$$.fragment,F),d(N),d(g.$$.fragment,F),d(T.$$.fragment,F),d(P),j=j.filter(Boolean);for(let G=0;G<j.length;G+=1)d(j[G]);M=!1},d(F){F&&m(e),v(o),v(u),v(a),N&&N.d(),v(g),v(T),P&&P.d(),Rt(j,F)}}}function m$(r){let e,n,t,l,o,i,u;return e=new tl({}),t=new c$({props:{schemesGj:r[1],filterText:r[4],showSchemes:r[5]}}),i=new qc({}),{c(){h(e.$$.fragment),n=C(),h(t.$$.fragment),l=C(),o=A("div"),h(i.$$.fragment),H(o,"class","top-right svelte-u44ed2")},m(s,a){b(e,s,a),p(s,n,a),b(t,s,a),p(s,l,a),p(s,o,a),b(i,o,null),u=!0},p(s,a){const f={};a&2&&(f.schemesGj=s[1]),a&16&&(f.filterText=s[4]),a&32&&(f.showSchemes=s[5]),t.$set(f)},i(s){u||($(e.$$.fragment,s),$(t.$$.fragment,s),$(i.$$.fragment,s),u=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),d(i.$$.fragment,s),u=!1},d(s){s&&(m(n),m(l),m(o)),v(e,s),v(t,s),v(i)}}}function _$(r){let e,n,t;return n=new Kr({props:{style:r[6],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[m$]},$$scope:{ctx:r}}}),{c(){e=A("div"),h(n.$$.fragment),H(e,"slot","main")},m(l,o){p(l,e,o),b(n,e,null),t=!0},p(l,o){const i={};o&64&&(i.style=l[6]),o&65586&&(i.$$scope={dirty:o,ctx:l}),n.$set(i)},i(l){t||($(n.$$.fragment,l),t=!0)},o(l){d(n.$$.fragment,l),t=!1},d(l){l&&m(e),v(n)}}}function g$(r){let e,n;return e=new sl({props:{$$slots:{main:[_$],sidebar:[p$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const o={};l&65663&&(o.$$scope={dirty:l,ctx:t}),e.$set(o)},i(t){n||($(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function d$(r,e,n){let t;Ne(r,hn,O=>n(6,t=O)),on(()=>{Yr()});const l=new URLSearchParams(window.location.search);hn.set(l.get("style")||"dataviz");let o="",i={type:"FeatureCollection",features:[],schemes:{}},u=new Map,s=new Set,a="",f=!0;function c(O){try{n(1,i=JSON.parse(O)),n(2,u=Is(i)),n(0,o="")}catch(y){n(0,o=`The file you loaded is broken: ${y}`)}}function _(O){i=O,n(1,i)}function g(O){s=O,n(3,s)}function k(O){a=O,n(4,a)}function T(O){f=O,n(5,f)}return[o,i,u,s,a,f,t,c,_,g,k,T]}class h$ extends q{constructor(e){super(),W(this,e,d$,g$,z,{})}}document.body.className=document.body.className?document.body.className+" js-enabled":"js-enabled";new h$({target:document.getElementById("app")});
