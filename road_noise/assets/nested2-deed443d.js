import{S as J,i as K,s as Y,e as T,h as G,a0 as Se,j as $,X as ne,o as p,aQ as $l,b as U,c as W,d as L,g as h,m as b,w as it,l as V,t as m,n as _,p as v,Y as Vt,Z as Xt,_ as Yt,$ as Qt,a8 as Re,K as $e,N as pe,aR as gt,u as k,k as w,D as z,J as Fe,O as Tn,P as pl,q as ke,Q as ml,T as _l,U as st,V as gl,W as dl,aY as Hl,aZ as pt,a5 as Dn,a_ as ql,aP as Gl,as as at,af as On,ak as Jt,r as Ln,a as dt,F as _n,v as We,aX as Q,a$ as he,b0 as we,B as Z,ai as ee,C as ye,al as te,b1 as ae,G as bt,I as hl,aT as Gt,ac as nn,b2 as on,R as bl,b3 as Ht,E as vl,aK as Ul,b4 as Wl,b5 as Vl,f as gn,ah as Xl,aV as jn,am as Yl,an as Rn,ao as Bn,ap as xt,aW as zn,L as Ql,M as Jl,y as Kl}from"./index-a817c799.js";import{d as rt,j as _t,C as je,f as Xe,h as le,l as H,k as Zl,S as xl,B as eo,c as Hn,b as vt,G as to}from"./StreetViewTool-cd2c1c89.js";import{a as Be,F as no}from"./Popup-e90832ec.js";import{P as fe}from"./Popup-24ec26a0.js";import{R as ro,C as ft,Z as lo}from"./ZoomOutMap-0b8a8c61.js";import{L as oo,a as so}from"./LineMeasureController-c2b50ad1.js";function io(l){let e;return{c(){e=T("span"),G(e,"class","svelte-kzgqtg"),Se(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Se(e,"background",n[0])},i:ne,o:ne,d(n){n&&p(e)}}}function ao(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Oe extends J{constructor(e){super(),K(this,e,ao,io,Y,{color:0})}}const fo="/atip/road_noise/assets/help-d011708a.svg";function uo(l){let e,n;const t=l[1].default,r=Vt(t,l,l[4],null);return{c(){e=T("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&Xt(r,t,o,o[4],n?Qt(t,o[4],s,null):Yt(o[4]),null)},i(o){n||(m(r,o),n=!0)},o(o){_(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function co(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[uo]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new $l({props:a}),U.push(()=>W(t,"open",i)),{c(){e=T("button"),e.innerHTML=`<img src="${fo}" title="Help" alt="Help"/>`,n=L(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,s||(u=it(e,"click",l[2]),s=!0)},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,g.open=f[0],V(()=>r=!1)),t.$set(g)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),s=!1,u()}}}function $o(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class me extends J{constructor(e){super(),K(this,e,$o,co,Y,{})}}function qn(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Gn(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Oe({props:{color:l[2]}}),{c(){e=T("li"),h(n.$$.fragment),t=L(),o=k(r),s=L()},m(i,a){$(i,e,a),b(n,e,null),w(e,t),w(e,o),w(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&z(o,r)},i(i){u||(m(n.$$.fragment,i),u=!0)},o(i){_(n.$$.fragment,i),u=!1},d(i){i&&p(e),v(n)}}}function po(l){let e,n,t=Re(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Gn(qn(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){e=T("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=Re(s[0]);let i;for(i=0;i<t.length;i+=1){const a=qn(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Gn(a),r[i].c(),m(r[i],1),r[i].m(e,null))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),gt(r,s)}}}function mo(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class An extends J{constructor(e){super(),K(this,e,mo,po,Y,{rows:0})}}function Un(l){let e=l[0],n,t,r=Wn(l);return{c(){r.c(),n=Fe()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),_(r,1,1,ne),pe(),r=Wn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Wn(l){let e;const n=l[10].default,t=Vt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&Xt(t,n,r,r[9],e?Qt(n,r[9],o,null):Yt(r[9]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function _o(l){let e,n,t=l[0]&&Un(l);return{c(){t&&t.c(),e=Fe()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Un(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),_(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function go(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Tn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=pl();ke(l,f,y=>n(8,r=y)),ke(l,c,y=>n(0,t=y));let g,d=!0;return ml(()=>{t&&g&&r&&(_l(f,t,g),st(c,t=null,t),n(6,g=void 0))}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(st(c,t=u,t),gl(r,t,dl({type:"raster",tiles:i,tileSize:a}),y=>r&&y===t,()=>{t&&(n(6,g=r==null?void 0:r.getSource(t)),n(7,d=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,g=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&g&&(d?n(7,d=!1):g.setTiles(i))},[t,f,c,u,i,a,g,d,r,s,o]}class ho extends J{constructor(e){super(),K(this,e,go,_o,Y,{id:3,tiles:4,tileSize:5})}}function bo(l){let e;const n=l[16].default,t=Vt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&Xt(t,n,r,r[24],e?Qt(n,r[24],o,null):Yt(r[24]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function vo(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[bo]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Hl({props:o}),U.push(()=>W(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function wo(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Tn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:O=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:I=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:M=!1}=e,{interactive:P=!0}=e;function A(D){j=D,n(0,j)}function F(D){pt.call(this,l,D)}function E(D){pt.call(this,l,D)}function C(D){pt.call(this,l,D)}function N(D){pt.call(this,l,D)}function q(D){pt.call(this,l,D)}function R(D){pt.call(this,l,D)}return l.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,s=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,i=D.beforeId),"beforeLayerType"in D&&n(5,a=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,g=D.filter),"applyToClusters"in D&&n(9,d=D.applyToClusters),"minzoom"in D&&n(10,y=D.minzoom),"maxzoom"in D&&n(11,O=D.maxzoom),"hoverCursor"in D&&n(12,S=D.hoverCursor),"manageHoverState"in D&&n(13,I=D.manageHoverState),"hovered"in D&&n(0,j=D.hovered),"eventsIfTopMost"in D&&n(14,M=D.eventsIfTopMost),"interactive"in D&&n(15,P=D.interactive),"$$scope"in D&&n(24,r=D.$$scope)},[j,o,s,u,i,a,f,c,g,d,y,O,S,I,M,P,t,A,F,E,C,N,q,R,r]}class sn extends J{constructor(e){super(),K(this,e,wo,vo,Y,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Vn(l){let e=l[0],n,t,r=Xn(l);return{c(){r.c(),n=Fe()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&Y(e,e=o[0])?($e(),_(r,1,1,ne),pe(),r=Xn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Xn(l){let e;const n=l[9].default,t=Vt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&Xt(t,n,r,r[8],e?Qt(n,r[8],o,null):Yt(r[8]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function ko(l){let e,n,t=l[0]&&Vn(l);return{c(){t&&t.c(),e=Fe()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Vn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),_(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function yo(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Tn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!Dn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new ql;Dn.addProtocol("pmtiles",y.tile)}const{map:c,self:g}=pl();ke(l,c,y=>n(7,r=y)),ke(l,g,y=>n(0,t=y));let d;return ml(()=>{t&&r&&(_l(c,t,d),st(g,t=null,t),d=void 0)}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(st(g,t=u,t),gl(r,t,dl({type:"vector",url:i,tiles:a,promoteId:f}),y=>r&&y===t,()=>{t&&(d=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{d=r==null?void 0:r.getSource(u)}))},[t,c,g,u,i,a,f,r,s,o]}class be extends J{constructor(e){super(),K(this,e,yo,ko,Y,{id:3,url:4,tiles:5,promoteId:6})}}const So={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var Me=Uint8Array,ct=Uint16Array,wl=Uint32Array,kl=new Me([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),yl=new Me([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Co=new Me([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Sl=function(l,e){for(var n=new ct(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new wl(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},Cl=Sl(kl,2),Tl=Cl[0],To=Cl[1];Tl[28]=258,To[258]=28;var Oo=Sl(yl,0),Lo=Oo[0],dn=new ct(32768);for(var de=0;de<32768;++de){var lt=(de&43690)>>>1|(de&21845)<<1;lt=(lt&52428)>>>2|(lt&13107)<<2,lt=(lt&61680)>>>4|(lt&3855)<<4,dn[de]=((lt&65280)>>>8|(lt&255)<<8)>>>1}var qt=function(l,e,n){for(var t=l.length,r=0,o=new ct(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new ct(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new ct(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,g=c|(1<<f)-1;c<=g;++c)u[dn[c]>>>i]=a}else for(u=new ct(t),r=0;r<t;++r)l[r]&&(u[r]=dn[s[l[r]-1]++]>>>15-l[r]);return u},Kt=new Me(288);for(var de=0;de<144;++de)Kt[de]=8;for(var de=144;de<256;++de)Kt[de]=9;for(var de=256;de<280;++de)Kt[de]=7;for(var de=280;de<288;++de)Kt[de]=8;var Ol=new Me(32);for(var de=0;de<32;++de)Ol[de]=5;var Ao=qt(Kt,9,1),Io=qt(Ol,5,1),an=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},He=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},fn=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Mo=function(l){return(l+7)/8|0},In=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?ct:l.BYTES_PER_ELEMENT==4?wl:Me)(n-e);return t.set(l.subarray(e,n)),t},Po=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],qe=function(l,e,n){var t=new Error(e||Po[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,qe),!n)throw t;return t},No=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new Me(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new Me(t*3));var s=function(De){var Ce=e.length;if(De>Ce){var Qe=new Me(Math.max(Ce*2,De));Qe.set(e),e=Qe}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,g=n.m,d=n.n,y=t*8;do{if(!f){u=He(l,i,1);var O=He(l,i+1,3);if(i+=3,O)if(O==1)f=Ao,c=Io,g=9,d=5;else if(O==2){var M=He(l,i,31)+257,P=He(l,i+10,15)+4,A=M+He(l,i+5,31)+1;i+=14;for(var F=new Me(A),E=new Me(19),C=0;C<P;++C)E[Co[C]]=He(l,i+C*3,7);i+=P*3;for(var N=an(E),q=(1<<N)-1,R=qt(E,N,1),C=0;C<A;){var D=R[He(l,i,q)];i+=D&15;var S=D>>>4;if(S<16)F[C++]=S;else{var B=0,X=0;for(S==16?(X=3+He(l,i,3),i+=2,B=F[C-1]):S==17?(X=3+He(l,i,7),i+=3):S==18&&(X=11+He(l,i,127),i+=7);X--;)F[C++]=B}}var re=F.subarray(0,M),oe=F.subarray(M);g=an(re),d=an(oe),f=qt(re,g,1),c=qt(oe,d,1)}else qe(1);else{var S=Mo(i)+4,I=l[S-4]|l[S-3]<<8,j=S+I;if(j>t){o&&qe(0);break}r&&s(a+I),e.set(l.subarray(S,j),a),n.b=a+=I,n.p=i=j*8,n.f=u;continue}if(i>y){o&&qe(0);break}}r&&s(a+131072);for(var ce=(1<<g)-1,Ie=(1<<d)-1,Te=i;;Te=i){var B=f[fn(l,i)&ce],ie=B>>>4;if(i+=B&15,i>y){o&&qe(0);break}if(B||qe(2),ie<256)e[a++]=ie;else if(ie==256){Te=i,f=null;break}else{var Ae=ie-254;if(ie>264){var C=ie-257,ue=kl[C];Ae=He(l,i,(1<<ue)-1)+Tl[C],i+=ue}var _e=c[fn(l,i)&Ie],ge=_e>>>4;_e||qe(3),i+=_e&15;var oe=Lo[ge];if(ge>3){var ue=yl[ge];oe+=fn(l,i)&(1<<ue)-1,i+=ue}if(i>y){o&&qe(0);break}r&&s(a+131072);for(var ze=a+Ae;a<ze;a+=4)e[a]=e[a-oe],e[a+1]=e[a+1-oe],e[a+2]=e[a+2-oe],e[a+3]=e[a+3-oe];a=ze}}n.l=f,n.p=Te,n.b=a,n.f=u,f&&(u=1,n.m=g,n.d=c,n.n=d)}while(!u);return a==e.length?e:In(e,0,a)},Fo=new Me(0),Ue=function(l,e){return l[e]|l[e+1]<<8},Ge=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},un=function(l,e){return Ge(l,e)+Ge(l,e+4)*4294967296};function Eo(l,e){return No(l,e)}var hn=typeof TextDecoder<"u"&&new TextDecoder,Do=0;try{hn.decode(Fo,{stream:!0}),Do=1}catch{}var jo=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,In(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function Ll(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(hn)return hn.decode(l);var r=jo(l),o=r[0],s=r[1];return s.length&&qe(8),o}}var Ro=function(l,e){return e+30+Ue(l,e+26)+Ue(l,e+28)},Bo=function(l,e,n){var t=Ue(l,e+28),r=Ll(l.subarray(e+46,e+46+t),!(Ue(l,e+8)&2048)),o=e+46+t,s=Ge(l,e+20),u=n&&s==4294967295?zo(l,o):[s,Ge(l,e+24),Ge(l,e+42)],i=u[0],a=u[1],f=u[2];return[Ue(l,e+10),i,a,r,o+Ue(l,e+30)+Ue(l,e+32),f]},zo=function(l,e){for(;Ue(l,e)!=1;e+=4+Ue(l,e+2));return[un(l,e+12),un(l,e+4),un(l,e+20)]};function Ho(l,e){for(var n={},t=l.length-22;Ge(l,t)!=101010256;--t)(!t||l.length-t>65558)&&qe(13);var r=Ue(l,t+8);if(!r)return{};var o=Ge(l,t+16),s=o==4294967295||r==65535;if(s){var u=Ge(l,t-12);s=Ge(l,u)==101075792,s&&(r=Ge(l,u+32),o=Ge(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=Bo(l,o,s),c=f[0],g=f[1],d=f[2],y=f[3],O=f[4],S=f[5],I=Ro(l,S);o=O,(!i||i({name:y,size:g,originalSize:d,compression:c}))&&(c?c==8?n[y]=Eo(l.subarray(I,I+g),new Me(d)):qe(14,"unknown compression type "+c):n[y]=In(l,I,I+g))}return n}function qo(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(cn):cn(l)}function cn(l){var e=new Uint8Array(l),n=Ho(e);return Promise.resolve(Go(n))}function Go(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=Ll(l[r])}return e}function Ve(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&$t(t)===e)return t;n++}}function Zt(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&$t(r)===e&&n.push(r),t++}return n}function rn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&$t(r)===e&&n(r,t):n(r,t),t++}}function Uo(l,e,n){var t=[];return rn(l,e,function(r,o){t.push(n(r,o))}),t}var Wo=/.+\:/;function $t(l){return l.tagName.replace(Wo,"")}function Al(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+$t(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=Al(l.childNodes[t]),t++;return e+="</"+$t(l)+">",e}function Vo(l){var e=l.documentElement,n=Ve(e,"sheetData"),t=[];return rn(n,"row",function(r){rn(r,"c",function(o){t.push(o)})}),t}function Xo(l,e){return Ve(e,"v")}function Yo(l,e){if(e.firstChild&&$t(e.firstChild)==="is"&&e.firstChild.firstChild&&$t(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Qo(l){var e=l.documentElement,n=Ve(e,"dimension");if(n)return n.getAttribute("ref")}function Jo(l){var e=l.documentElement,n=Ve(e,"cellStyleXfs");return n?Zt(n,"xf"):[]}function Ko(l){var e=l.documentElement,n=Ve(e,"cellXfs");return n?Zt(n,"xf"):[]}function Zo(l){var e=l.documentElement,n=Ve(e,"numFmts");return n?Zt(n,"numFmt"):[]}function xo(l){var e=l.documentElement;return Uo(e,"si",function(n){var t=Ve(n,"t");if(t)return t.textContent;var r="";return rn(n,"r",function(o){r+=Ve(o,"t").textContent}),r})}function es(l){var e=l.documentElement;return Ve(e,"workbookPr")}function ts(l){var e=l.documentElement;return Zt(e,"Relationship")}function ns(l){var e=l.documentElement,n=Ve(e,"sheets");return Zt(n,"sheet")}function rs(l,e){var n=e.createDocument(l),t={},r=es(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return ns(n).forEach(o),t}function ls(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=$n(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=$n(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=$n(u);break}};return ts(n).forEach(r),t}function $n(l){return l[0]==="/"?l.slice(1):"xl/"+l}function Yn(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Qn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Yn(Object(n),!0).forEach(function(t){os(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Yn(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function os(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ss(l,e){if(!l)return{};var n=e.createDocument(l),t=Jo(n).map(pn),r=Zo(n).map(is).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?Qn(Qn({},t[u.xfId]),pn(u,r)):pn(u,r)};return Ko(n).map(o)}function is(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function pn(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function as(l,e){return l?xo(e.createDocument(l)):[]}function Il(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function fs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=us(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function us(l,e){if(l){if(typeof l=="string")return Jn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jn(l,e)}}function Jn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function cs(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if($s.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&_s(t.numberFormat.template))return!0}}var $s=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],ps=/^\[\$-414\]/,ms=/;@$/;function _s(l){l=l.toLowerCase(),l=l.replace(ps,""),l=l.replace(ms,"");for(var e=l.split(/\W+/),n=fs(e),t;!(t=n()).done;){var r=t.value;if(gs.indexOf(r)<0)return!1}return!0}var gs=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function ds(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=mn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=mn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=mn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=hs(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var g=cs(o(),s,a);g?(l=Kn(l),l=Il(l,i)):l=(a.parseNumber||Kn)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function hs(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function mn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function Kn(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var bs=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function vs(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function ws(l){for(var e=0,n=0;n<l.length;)e*=26,e+=bs.indexOf(l[n]),n++;return e}function Ml(l){return l=l.split(/(\d+)/),[parseInt(l[1]),ws(l[0].trim())]}function ks(l,e,n,t,r,o,s){var u=Ml(l.getAttribute("r")),i=Xo(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:ds(a,f,{getInlineStringValue:function(){return Yo(e,l)},getInlineStringXml:function(){return Al(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function ys(l,e,n,t,r,o){var s=Vo(l);return s.length===0?[]:s.map(function(u){return ks(u,l,e,n,t,r,o)})}function Ss(l,e){return Ls(l)||Os(l,e)||Ts(l,e)||Cs()}function Cs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ts(l,e){if(l){if(typeof l=="string")return Zn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Zn(l,e)}}function Zn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Os(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Ls(l){if(Array.isArray(l))return l}function As(l){var e=Qo(l);if(e)return e=e.split(":").map(Ml).map(function(n){var t=Ss(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function Is(l,e,n,t,r,o){var s=e.createDocument(l),u=ys(s,e,n,t,r,o),i=As(s)||vs(u);return{cells:u,dimensions:i}}function Ms(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Ps(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ps(l,e){if(l){if(typeof l=="string")return xn(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xn(l,e)}}function xn(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ns(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=Ms(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function Fs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Es(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Es(l,e){if(l){if(typeof l=="string")return er(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(l,e)}}function er(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Ds(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=Fs(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function js(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Pl(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rs(l,e){return Hs(l)||zs(l,e)||Pl(l,e)||Bs()}function Bs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pl(l,e){if(l){if(typeof l=="string")return tr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tr(l,e)}}function tr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function zs(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Hs(l){if(Array.isArray(l))return l}function qs(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=Rs(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=js(t),g;!(g=c()).done;){var d=g.value,y=d.row-1,O=d.column-1;O<s&&y<u&&(i[y][O]=d.value)}var S=e.rowMap;if(S)for(var I=0;I<i.length;)S[I]=I,I++;return i=Ns(Ds(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(i=e.transformData(i)),i}function Gs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Us(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Us(l,e){if(l){if(typeof l=="string")return nr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(l,e)}}function nr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function rr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Ws(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rr(Object(n),!0).forEach(function(t){Vs(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Vs(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Xs(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Ws({sheet:1},n));var t=function(g){if(!l[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return l[g]},r=ls(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?as(t(r.sharedStrings),e):[],s=r.styles?ss(t(r.styles),e):{},u=rs(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var g=c.name;return{name:g}});var i=Ys(n.sheet,u.sheets);if(!i||!r.sheets[i])throw Qs(n.sheet,u.sheets);var a=Is(t(r.sheets[i]),e,o,s,u,n),f=qs(a,n);return n.properties?{data:f,properties:u}:f}function Ys(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=Gs(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Qs(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function bn(l){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(l)}function lr(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Js(l,e,n){return e&&lr(l.prototype,e),n&&lr(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function Ks(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function Zs(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&Ut(l,e)}function xs(l){var e=Nl();return function(){var t=Wt(l),r;if(e){var o=Wt(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return ei(this,r)}}function ei(l,e){if(e&&(bn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ti(l)}function ti(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function vn(l){var e=typeof Map=="function"?new Map:void 0;return vn=function(t){if(t===null||!ni(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return tn(t,arguments,Wt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Ut(r,t)},vn(l)}function tn(l,e,n){return Nl()?tn=Reflect.construct:tn=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&Ut(a,s.prototype),a},tn.apply(null,arguments)}function Nl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ni(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function Ut(l,e){return Ut=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},Ut(l,e)}function Wt(l){return Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Wt(l)}var Pe=function(l){Zs(n,l);var e=xs(n);function n(t){var r;return Ks(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Js(n)}(vn(Error));function ri(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new Pe("not_a_number")}if(typeof l!="number")throw new Pe("not_a_number");if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");return l}function li(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");return String(l)}throw new Pe("not_a_string")}function oi(l){if(typeof l=="boolean")return l;throw new Pe("not_a_boolean")}function si(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new Pe("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new Pe("invalid_number");if(!isFinite(l))throw new Pe("out_of_bounds");var t=Il(l,n);if(isNaN(t.valueOf()))throw new Pe("out_of_bounds");return t}throw new Pe("not_a_date")}function ii(l,e){return ui(l)||fi(l,e)||Fl(l,e)||ai()}function ai(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fi(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ui(l){if(Array.isArray(l))return l}function wn(l){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(l)}function ci(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Fl(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fl(l,e){if(l){if(typeof l=="string")return or(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return or(l,e)}}function or(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function sr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function ir(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?sr(Object(n),!0).forEach(function(t){$i(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):sr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function $i(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var ar={isColumnOriented:!1};function pi(l,e,n){n?n=ir(ir({},ar),n):n=ar;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;di(e),r&&(l=gi(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=El(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=ci(a),d;!(d=g()).done;){var y=d.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function El(l,e,n,t,r,o){for(var s={},u=!0,i=function(j){var M=j.column,P=j.value,A=j.error,F=j.reason,E={error:A,row:n+1,column:M,value:P};return F&&(E.reason=F),l[M].type&&(E.type=l[M].type),E},a=[],f=function(){var j=g[c],M=l[j],P=wn(M.type)==="object"&&!Array.isArray(M.type),A=e[t.indexOf(j)];A===void 0&&(A=null);var F=void 0,E=void 0,C=void 0;if(P)F=El(M.type,e,n,t,r,o);else if(A===null)F=null;else if(Array.isArray(M.type)){var N=!1,q=_i(A).map(function(D){var B=fr(D,M,o);return B.error&&(F=D,E=B.error,C=B.reason),B.value!==null&&(N=!0),B.value});E||(F=N?q:null)}else{var R=fr(A,M,o);E=R.error,C=R.reason,F=E?A:R.value}!E&&F===null&&(typeof M.required=="function"?a.push({column:j}):M.required===!0&&(E="required")),E?r.push(i({column:j,value:F,error:E,reason:C})):(u&&F!==null&&(u=!1),(F!==null||o.includeNullValues)&&(s[M.prop]=F))},c=0,g=Object.keys(l);c<g.length;c++)f();if(u)return null;for(var d=0,y=a;d<y.length;d++){var O=y[d].column,S=l[O].required(s);S&&r.push(i({column:O,value:null,error:"required"}))}return s}function fr(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=mt(l,e.parse):e.type?t=mi(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function mt(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function mi(l,e,n){switch(e){case String:return mt(l,li);case Number:return mt(l,ri);case Date:return mt(l,function(t){return si(t,{properties:n.properties})});case Boolean:return mt(l,oi);default:if(typeof e=="function")return mt(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Dl(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=Dl(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function _i(l){for(var e=[],n=0;n<l.length;){var t=Dl(l,",",n),r=ii(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var gi=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function di(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function kn(l){"@babel/helpers - typeof";return kn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kn(l)}function jl(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;kn(o)==="object"&&(o=Object.keys(l[r])[0],s=jl(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var hi=["schema","map"];function ur(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function en(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ur(Object(n),!0).forEach(function(t){bi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function bi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function vi(l,e){if(l==null)return{};var n=wi(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function wi(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function ki(l,e,n){var t=n.schema,r=n.map,o=vi(n,hi);!t&&r&&(t=jl(r));var s=Xs(l,e,en(en({},o),{},{properties:t||o.properties}));return t?pi(s.data,t,en(en({},o),{},{properties:s.properties})):s}function yi(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return qo(l).then(function(n){return ki(n,So,e)})}function Si(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>Ci(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function Ci(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function Ti(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await yi(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Gl(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const yn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function Oi(l){return at(["get","intervention_type"],{area:rt.area,route:rt.route,crossing:rt.crossing,other:rt.other},"white")}function Li(l){return[["Areas",rt.area],["Routes",rt.route],["Crossings",rt.crossing],["Other",rt.other]]}const x={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},Ne=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Sn(){let[l,e]=Rl(yn,x.funding_programmes);return[at(["get","funding_programme"],l,"grey"),e]}function Ai(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=Rl(l,x.current_milestone);return[at(["get","current_milestone"],e,"grey"),n]}function Rl(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function Ii(l){let e,n;return e=new An({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mi(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new _t({props:u}),U.push(()=>W(e,"value",s)),e.$on("change",l[2]),r=new je({props:{label:"Legend",$$slots:{default:[Ii]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],V(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Pi(l,e,n){let t;ke(l,On,a=>n(4,t=a));let r="fundingProgramme",[o,s]=Sn();function u(){let a;r=="interventionType"?(a=Oi(),n(1,s=Li())):r=="fundingProgramme"?n(1,[a,s]=Sn(),s):r=="currentMilestone"&&n(1,[a,s]=Ai(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class Ni extends J{constructor(e){super(),K(this,e,Pi,Mi,Y,{})}}const ht=Jt({type:"FeatureCollection",features:[],schemes:{}}),ln=Jt(new Map),cr=Jt(!0),wt=Jt(""),kt=Jt("");function Fi(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ei(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Di(l){let e,n,t,r,o,s;return t=new dt({props:{$$slots:{default:[Ei]},$$scope:{ctx:l}}}),t.$on("click",l[16]),{c(){e=T("input"),n=L(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,i){$(u,e,i),We(e,l[6]),$(u,n,i),b(t,u,i),r=!0,o||(s=it(e,"input",l[15]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&We(e,u[6]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function ji(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ri(l){let e,n,t,r,o,s;return t=new dt({props:{$$slots:{default:[ji]},$$scope:{ctx:l}}}),t.$on("click",l[18]),{c(){e=T("input"),n=L(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,i){$(u,e,i),We(e,l[5]),$(u,n,i),b(t,u,i),r=!0,o||(s=it(e,"input",l[17]),o=!0)},p(u,i){i&32&&e.value!==u[5]&&We(e,u[5]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function Bi(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,O,S,I;e=new dt({props:{$$slots:{default:[Fi]},$$scope:{ctx:l}}}),e.$on("click",l[11]);function j(C){l[12](C)}let M={label:"Authority or region",choices:l[7],emptyOption:!0};l[2]!==void 0&&(M.value=l[2]),t=new _t({props:M}),U.push(()=>W(t,"value",j));function P(C){l[13](C)}let A={label:"Funding programme",choices:l[8],emptyOption:!0};l[3]!==void 0&&(A.value=l[3]),s=new _t({props:A}),U.push(()=>W(s,"value",P));function F(C){l[14](C)}let E={label:"Current milestone",choices:l[9],emptyOption:!0};return l[4]!==void 0&&(E.value=l[4]),a=new _t({props:E}),U.push(()=>W(a,"value",F)),g=new _n({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Di]},$$scope:{ctx:l}}}),y=new _n({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Ri]},$$scope:{ctx:l}}}),S=new Ni({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(s.$$.fragment),i=L(),h(a.$$.fragment),c=L(),h(g.$$.fragment),d=L(),h(y.$$.fragment),O=L(),h(S.$$.fragment)},m(C,N){b(e,C,N),$(C,n,N),b(t,C,N),$(C,o,N),b(s,C,N),$(C,i,N),b(a,C,N),$(C,c,N),b(g,C,N),$(C,d,N),b(y,C,N),$(C,O,N),b(S,C,N),I=!0},p(C,N){const q={};N&16777216&&(q.$$scope={dirty:N,ctx:C}),e.$set(q);const R={};N&128&&(R.choices=C[7]),!r&&N&4&&(r=!0,R.value=C[2],V(()=>r=!1)),t.$set(R);const D={};N&256&&(D.choices=C[8]),!u&&N&8&&(u=!0,D.value=C[3],V(()=>u=!1)),s.$set(D);const B={};N&512&&(B.choices=C[9]),!f&&N&16&&(f=!0,B.value=C[4],V(()=>f=!1)),a.$set(B);const X={};N&16777280&&(X.$$scope={dirty:N,ctx:C}),g.$set(X);const re={};N&16777248&&(re.$$scope={dirty:N,ctx:C}),y.$set(re)},i(C){I||(m(e.$$.fragment,C),m(t.$$.fragment,C),m(s.$$.fragment,C),m(a.$$.fragment,C),m(g.$$.fragment,C),m(y.$$.fragment,C),m(S.$$.fragment,C),I=!0)},o(C){_(e.$$.fragment,C),_(t.$$.fragment,C),_(s.$$.fragment,C),_(a.$$.fragment,C),_(g.$$.fragment,C),_(y.$$.fragment,C),_(S.$$.fragment,C),I=!1},d(C){C&&(p(n),p(o),p(i),p(c),p(d),p(O)),v(e,C),v(t,C),v(s,C),v(a,C),v(g,C),v(y,C),v(S,C)}}}function zi(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[10].route.toLocaleString()+"",s,u,i=l[10].area.toLocaleString()+"",a,f,c=l[10].crossing.toLocaleString()+"",g,d,y=l[10].other.toLocaleString()+"",O,S,I=$r(l[10].totalLength).toFixed(1)+"",j,M;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),g=k(c),d=k(" crossings, "),O=k(y),S=k(`
    other, with total LineString length of `),j=k(I),M=k(" miles)")},m(P,A){$(P,e,A),$(P,t,A),$(P,r,A),$(P,s,A),$(P,u,A),$(P,a,A),$(P,f,A),$(P,g,A),$(P,d,A),$(P,O,A),$(P,S,A),$(P,j,A),$(P,M,A)},p(P,A){A&1&&n!==(n=P[0].size.toLocaleString()+"")&&z(t,n),A&1024&&o!==(o=P[10].route.toLocaleString()+"")&&z(s,o),A&1024&&i!==(i=P[10].area.toLocaleString()+"")&&z(a,i),A&1024&&c!==(c=P[10].crossing.toLocaleString()+"")&&z(g,c),A&1024&&y!==(y=P[10].other.toLocaleString()+"")&&z(O,y),A&1024&&I!==(I=$r(P[10].totalLength).toFixed(1)+"")&&z(j,I)},d(P){P&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(g),p(d),p(O),p(S),p(j),p(M))}}}function Hi(l){let e,n,t;function r(s){l[19](s)}let o={$$slots:{default:[zi]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&16778241&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function qi(l){let e,n,t,r;return e=new je({props:{label:"Filters",$$slots:{default:[Bi]},$$scope:{ctx:l}}}),t=new Xe({props:{small:!0,$$slots:{default:[Hi]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&16778236&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16778243&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function $r(l){return l*621371e-9}function Gi(l,e,n){let t,r,o,s;ke(l,kt,R=>n(5,t=R)),ke(l,wt,R=>n(6,r=R)),ke(l,ht,R=>n(20,o=R)),ke(l,ln,R=>n(21,s=R));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],g=new Set(yn.slice(0,-1)),d="",y=[],O="",S={area:0,route:0,crossing:0,other:0,totalLength:0};Ln(()=>{var X,re,oe;let R=new Set,D=new Set,B=new Set;for(let ce of s.values())(X=ce.browse)!=null&&X.authority_or_region&&R.add(ce.browse.authority_or_region),(re=ce.browse)!=null&&re.funding_programme&&D.add(ce.browse.funding_programme),(oe=ce.browse)!=null&&oe.current_milestone&&B.add(ce.browse.current_milestone);n(7,a=Array.from(R.entries())),a.sort(),n(8,c=yn.map(ce=>[ce,ce])),n(9,y=Array.from(B.entries())),y.sort()});function I(R,D,B,X,re){let oe=R.toLowerCase(),ce=D.toLowerCase(),Ie=ie=>{var Ae,ue,_e,ge,ze,De;if(oe&&!((Ae=ie.properties.name)!=null&&Ae.toLowerCase().includes(oe))&&!((ue=ie.properties.description)!=null&&ue.toLowerCase().includes(oe)))return!1;if(ce||B||X||re){let Ce=s.get(ie.properties.scheme_reference);if(B&&((_e=Ce.browse)==null?void 0:_e.authority_or_region)!=B||X&&X!=="Other"&&((ge=Ce.browse)==null?void 0:ge.funding_programme)!=X||X==="Other"&&g.has(((ze=Ce.browse)==null?void 0:ze.funding_programme)??"")||re&&((De=Ce.browse)==null?void 0:De.current_milestone)!=re||ce&&!Ce.scheme_reference.toLowerCase().includes(ce)&&!(Ce.scheme_name??"").toLowerCase().includes(ce))return!1}return!0};n(0,u=new Set(o.features.filter(Ie).map(ie=>ie.properties.scheme_reference))),n(10,S={area:0,route:0,crossing:0,other:0,totalLength:0});let Te=ie=>{var Ae,ue;return!(!u.has(ie.properties.scheme_reference)||oe&&!((Ae=ie.properties.name)!=null&&Ae.toLowerCase().includes(oe))&&!((ue=ie.properties.description)!=null&&ue.toLowerCase().includes(oe)))};for(let ie of o.features)Te(ie)?(delete ie.properties.hide_while_editing,n(10,S[ie.properties.intervention_type]++,S),ie.geometry.type=="LineString"&&ie.properties.length_meters&&n(10,S.totalLength+=ie.properties.length_meters,S)):ie.properties.hide_while_editing=!0;ht.set(o),n(10,S)}function j(){n(2,f=""),n(3,d=""),n(4,O=""),st(wt,r="",r),st(kt,t="",t)}function M(R){f=R,n(2,f)}function P(R){d=R,n(3,d)}function A(R){O=R,n(4,O)}function F(){r=this.value,wt.set(r)}const E=()=>st(wt,r="",r);function C(){t=this.value,kt.set(t)}const N=()=>st(kt,t="",t);function q(R){i=R,n(1,i)}return l.$$set=R=>{"schemesToBeShown"in R&&n(0,u=R.schemesToBeShown),"show"in R&&n(1,i=R.show)},l.$$.update=()=>{l.$$.dirty&124&&I(r,t,f,d,O)},[u,i,f,d,O,t,r,a,c,y,S,j,M,P,A,F,E,C,N,q]}class Ui extends J{constructor(e){super(),K(this,e,Gi,qi,Y,{schemesToBeShown:0,show:1})}}function Wi(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vi(l){let e,n,t,r,o;return t=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Wi]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),h(t.$$.fragment),r=k(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),w(e,n),b(t,e,null),w(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){_(t.$$.fragment,s),o=!1},d(s){s&&p(e),v(t)}}}class Le extends J{constructor(e){super(),K(this,e,null,Vi,Y,{})}}function pr(l,e,n){const t=l.slice();return t[2]=e[n],t}function mr(l,e,n){const t=l.slice();return t[5]=e[n],t}function _r(l){let e,n;return{c(){e=T("span"),n=k(` 
    `),Se(e,"background",l[5]),Se(e,"width","100%"),Se(e,"border","1px solid black")},m(t,r){$(t,e,r),w(e,n)},p(t,r){r&1&&Se(e,"background",t[5])},d(t){t&&p(e)}}}function gr(l){let e,n=l[2]+"",t;return{c(){e=T("span"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&z(t,n)},d(r){r&&p(e)}}}function Xi(l){let e,n,t,r=Re(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=_r(mr(l,r,i));let s=Re(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=gr(pr(l,s,i));return{c(){e=T("div");for(let i=0;i<o.length;i+=1)o[i].c();n=L(),t=T("div");for(let i=0;i<u.length;i+=1)u[i].c();Se(e,"display","flex"),Se(t,"display","flex"),Se(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=Re(i[0]);let f;for(f=0;f<r.length;f+=1){const c=mr(i,r,f);o[f]?o[f].p(c,a):(o[f]=_r(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=Re(i[1]);let f;for(f=0;f<s.length;f+=1){const c=pr(i,s,f);u[f]?u[f].p(c,a):(u[f]=gr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:ne,o:ne,d(i){i&&(p(e),p(n),p(t)),gt(o,i),gt(u,i)}}}function Yi(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ee extends J{constructor(e){super(),K(this,e,Yi,Xi,Y,{colorScale:0,limits:1})}}function dr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Qi(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ji(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ki(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Zi(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xi(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ji]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ki]},$$scope:{ctx:l}}}),f=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Zi]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),u=L(),i=T("p"),a=k("License: "),h(f.$$.fragment),c=k(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(d,u,y),$(d,i,y),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,y){const O={};y&65536&&(O.$$scope={dirty:y,ctx:d}),t.$set(O);const S={};y&65536&&(S.$$scope={dirty:y,ctx:d}),o.$set(S);const I={};y&65536&&(I.$$scope={dirty:y,ctx:d}),f.$set(I)},i(d){g||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(u),p(i)),v(t),v(o),v(f)}}}function ea(l){let e,n,t;return n=new me({props:{$$slots:{default:[xi]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function hr(l){let e,n;return e=new Ee({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ta(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function na(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ra(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function la(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oa(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y;return o=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[na]},$$scope:{ctx:l}}}),u=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ra]},$$scope:{ctx:l}}}),g=new Q({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[la]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=L(),t=T("p"),r=k("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=k(". Output area boundaries from "),h(u.$$.fragment),i=k("."),a=L(),f=T("p"),c=k("License: "),h(g.$$.fragment),d=k(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(O,S){$(O,e,S),$(O,n,S),$(O,t,S),w(t,r),b(o,t,null),w(t,s),b(u,t,null),w(t,i),$(O,a,S),$(O,f,S),w(f,c),b(g,f,null),w(f,d),y=!0},p(O,S){const I={};S&65536&&(I.$$scope={dirty:S,ctx:O}),o.$set(I);const j={};S&65536&&(j.$$scope={dirty:S,ctx:O}),u.$set(j);const M={};S&65536&&(M.$$scope={dirty:S,ctx:O}),g.$set(M)},i(O){y||(m(o.$$.fragment,O),m(u.$$.fragment,O),m(g.$$.fragment,O),y=!0)},o(O){_(o.$$.fragment,O),_(u.$$.fragment,O),_(g.$$.fragment,O),y=!1},d(O){O&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(g)}}}function sa(l){let e,n,t;return n=new me({props:{$$slots:{default:[oa]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function br(l){let e,n;return e=new Ee({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ia(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function aa(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fa(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ua(l){let e,n,t,r,o,s,u,i,a;return t=new Q({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[aa]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[fa]},$$scope:{ctx:l}}}),i=new Le({}),{c(){e=T("p"),n=k("Population density data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function ca(l){let e,n,t;return n=new me({props:{$$slots:{default:[ua]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function vr(l){let e,n,t,r;return t=new Ee({props:{colorScale:l[4],limits:l[6]().map(ba)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function $a(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=T("p"),n=k("There are "),t=T("b"),o=k(r),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){$(a,e,f),w(e,n),w(e,t),w(t,o),w(e,s),w(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&z(o,r),f&8192&&u!==(u=a[14]+"")&&z(i,u)},d(a){a&&p(e)}}}function pa(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=T("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=T("b"),i=k(u),a=k(`
          cars`)},m(f,c){$(f,e,c),w(e,n),w(e,r),w(e,o),w(e,s),w(s,i),w(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&z(r,t),c&8200&&u!==(u=f[15]+"")&&z(i,u)},d(f){f&&p(e)}}}function ma(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=T("p"),n=T("b"),r=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){$(f,e,c),w(e,n),w(n,r),w(n,o),w(e,s),w(e,i),w(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&z(r,t),c&8192&&u!==(u=f[14]+"")&&z(i,u)},d(f){f&&p(e)}}}function _a(l){dr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?ma:o[3]=="average_cars_per_household"?pa:$a}let t=n(l),r=t(l);return{c(){r.c(),e=Fe()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){dr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function ga(l){let e,n;return e=new fe({props:{$$slots:{default:[_a,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function da(l){let e,n,t,r;const o=[H(Je),{sourceLayer:Je},{paint:{"fill-color":we(["get",l[3]],l[6](),l[4]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ga]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Be({props:s}),e.$on("click",l[5]);const u=[H(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&88?te(o,[f&0&&ae(H(Je)),f&0&&{sourceLayer:Je},f&88&&{paint:{"fill-color":we(["get",a[3]],a[6](),a[4]),"fill-opacity":Z(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&8?te(u,[f&0&&ae(H(`${Je}-outline`)),f&0&&{sourceLayer:Je},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ha(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y;function O(C){l[7](C)}let S={$$slots:{right:[ea],default:[Qi]},$$scope:{ctx:l}};l[0]!==void 0&&(S.checked=l[0]),e=new le({props:S}),U.push(()=>W(e,"checked",O)),e.$on("change",l[8]);let I=l[3]=="percent_households_with_car"&&hr(l);function j(C){l[9](C)}let M={$$slots:{right:[sa],default:[ta]},$$scope:{ctx:l}};l[1]!==void 0&&(M.checked=l[1]),o=new le({props:M}),U.push(()=>W(o,"checked",j)),o.$on("change",l[10]);let P=l[3]=="average_cars_per_household"&&br(l);function A(C){l[11](C)}let F={$$slots:{right:[ca],default:[ia]},$$scope:{ctx:l}};l[2]!==void 0&&(F.checked=l[2]),a=new le({props:F}),U.push(()=>W(a,"checked",A)),a.$on("change",l[12]);let E=l[3]=="population_density"&&vr(l);return d=new be({props:{url:`pmtiles://${he()}/v1/${Je}.pmtiles`,$$slots:{default:[da]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),I&&I.c(),r=L(),h(o.$$.fragment),u=L(),P&&P.c(),i=L(),h(a.$$.fragment),c=L(),E&&E.c(),g=L(),h(d.$$.fragment)},m(C,N){b(e,C,N),$(C,t,N),I&&I.m(C,N),$(C,r,N),b(o,C,N),$(C,u,N),P&&P.m(C,N),$(C,i,N),b(a,C,N),$(C,c,N),E&&E.m(C,N),$(C,g,N),b(d,C,N),y=!0},p(C,[N]){const q={};N&65536&&(q.$$scope={dirty:N,ctx:C}),!n&&N&1&&(n=!0,q.checked=C[0],V(()=>n=!1)),e.$set(q),C[3]=="percent_households_with_car"?I?(I.p(C,N),N&8&&m(I,1)):(I=hr(C),I.c(),m(I,1),I.m(r.parentNode,r)):I&&($e(),_(I,1,1,()=>{I=null}),pe());const R={};N&65536&&(R.$$scope={dirty:N,ctx:C}),!s&&N&2&&(s=!0,R.checked=C[1],V(()=>s=!1)),o.$set(R),C[3]=="average_cars_per_household"?P?(P.p(C,N),N&8&&m(P,1)):(P=br(C),P.c(),m(P,1),P.m(i.parentNode,i)):P&&($e(),_(P,1,1,()=>{P=null}),pe());const D={};N&65536&&(D.$$scope={dirty:N,ctx:C}),!f&&N&4&&(f=!0,D.checked=C[2],V(()=>f=!1)),a.$set(D),C[3]=="population_density"?E?(E.p(C,N),N&8&&m(E,1)):(E=vr(C),E.c(),m(E,1),E.m(g.parentNode,g)):E&&($e(),_(E,1,1,()=>{E=null}),pe());const B={};N&65544&&(B.$$scope={dirty:N,ctx:C}),d.$set(B)},i(C){y||(m(e.$$.fragment,C),m(I),m(o.$$.fragment,C),m(P),m(a.$$.fragment,C),m(E),m(d.$$.fragment,C),y=!0)},o(C){_(e.$$.fragment,C),_(I),_(o.$$.fragment,C),_(P),_(a.$$.fragment,C),_(E),_(d.$$.fragment,C),y=!1},d(C){C&&(p(t),p(r),p(u),p(i),p(c),p(g)),v(e,C),I&&I.d(C),v(o,C),P&&P.d(C),v(a,C),E&&E.d(C),v(d,C)}}}let Je="census_output_areas";const ba=l=>l.toLocaleString();function va(l,e,n){let t=x.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(S){let I=S.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${I}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${I}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(S){r=S,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(S){o=S,n(1,o)}const d=()=>{n(0,r=!1),n(2,s=!1)};function y(S){s=S,n(2,s)}const O=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,g,d,y,O]}class wa extends J{constructor(e){super(),K(this,e,va,ha,Y,{})}}function ka(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function ya(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sa(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[ya]},$$scope:{ctx:l}}}),s=new Le({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of December 2022."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Ca(l){let e,n,t;return n=new me({props:{$$slots:{default:[Sa]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ta(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Oa(l){let e,n;return e=new fe({props:{$$slots:{default:[Ta,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function La(l){let e,n,t,r;const o=[H(yt),{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Oa]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Be({props:s}),e.$on("click",Ia);const u=[H(`${yt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(yt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(H(`${yt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Aa(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Ca],default:[ka]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new bt({props:{data:`${he()}/v1/${yt}.geojson`,$$slots:{default:[La]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let yt="combined_authorities";function Ia(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ma(l,e,n){let t=x.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Pa extends J{constructor(e){super(),K(this,e,Ma,Aa,Y,{})}}function Na(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fa(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ea(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Da(l){let e,n,t,r,o,s,u,i,a;return t=new Q({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Fa]},$$scope:{ctx:l}}}),o=new Q({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Ea]},$$scope:{ctx:l}}}),i=new Le({}),{c(){e=T("p"),n=k("The 2019 English IMD scores come from "),h(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=k("."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function ja(l){let e,n,t;return n=new me({props:{$$slots:{default:[Da]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function wr(l){let e,n;return e=new Ee({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ra(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,g=l[4].rank.toLocaleString()+"",d,y;return{c(){e=T("p"),t=k(n),r=k(` has an IMD score of
        `),o=T("b"),u=k(s),i=L(),a=T("p"),f=k("Rank: "),c=T("b"),d=k(g),y=k(`
        / 32,844 LSOAs`)},m(O,S){$(O,e,S),w(e,t),w(e,r),w(e,o),w(o,u),$(O,i,S),$(O,a,S),w(a,f),w(a,c),w(c,d),w(a,y)},p(O,S){S&16&&n!==(n=O[4].LSOA11CD+"")&&z(t,n),S&16&&s!==(s=O[4].score+"")&&z(u,s),S&16&&g!==(g=O[4].rank.toLocaleString()+"")&&z(d,g)},d(O){O&&(p(e),p(i),p(a))}}}function Ba(l){let e,n;return e=new fe({props:{$$slots:{default:[Ra,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function za(l){let e,n,t,r;const o=[H(Ke),{sourceLayer:Ke},{paint:{"fill-color":we(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Ba]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Be({props:s});const u=[H(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(H(Ke)),f&0&&{sourceLayer:Ke},f&6&&{paint:{"fill-color":we(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Z(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?te(u,[f&0&&ae(H(`${Ke}-outline`)),f&0&&{sourceLayer:Ke},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ha(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[ja],default:[Na]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&wr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Ke}.pmtiles`,$$slots:{default:[za]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=wr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ke="imd";function qa(l,e,n){let t=x.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Ga extends J{constructor(e){super(),K(this,e,qa,Ha,Y,{})}}function Ua(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Wa(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Va(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Wa]},$$scope:{ctx:l}}}),s=new Le({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Xa(l){let e,n,t;return n=new me({props:{$$slots:{default:[Va]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ya(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Qa(l){let e,n;return e=new fe({props:{$$slots:{default:[Ya,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ja(l){let e,n,t,r;const o=[H(St),{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Qa]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Be({props:s}),e.$on("click",Za);const u=[H(`${St}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(St)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(H(`${St}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ka(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Xa],default:[Ua]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new bt({props:{data:`${he()}/v1/${St}.geojson`,$$slots:{default:[Ja]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let St="local_authority_districts";function Za(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function xa(l,e,n){let t=x.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class ef extends J{constructor(e){super(),K(this,e,xa,Ka,Y,{})}}function tf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function nf(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rf(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lf(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function of(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sf(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function af(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,O,S,I,j,M,P,A,F;return t=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[nf]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[rf]},$$scope:{ctx:l}}}),u=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[lf]},$$scope:{ctx:l}}}),d=new Q({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[of]},$$scope:{ctx:l}}}),j=new Q({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[sf]},$$scope:{ctx:l}}}),A=new Le({}),{c(){e=T("p"),n=k("LPAs may be a "),h(t.$$.fragment),r=k(", "),h(o.$$.fragment),s=k("y, or "),h(u.$$.fragment),i=k("."),a=L(),f=T("p"),c=T("strong"),g=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),y=k(" to get more details."),O=L(),S=T("p"),I=k("Data from ONS Geography via "),h(j.$$.fragment),M=k(", as of November 2022."),P=L(),h(A.$$.fragment)},m(E,C){$(E,e,C),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),b(u,e,null),w(e,i),$(E,a,C),$(E,f,C),w(f,c),w(c,g),b(d,c,null),w(c,y),$(E,O,C),$(E,S,C),w(S,I),b(j,S,null),w(S,M),$(E,P,C),b(A,E,C),F=!0},p(E,C){const N={};C&16&&(N.$$scope={dirty:C,ctx:E}),t.$set(N);const q={};C&16&&(q.$$scope={dirty:C,ctx:E}),o.$set(q);const R={};C&16&&(R.$$scope={dirty:C,ctx:E}),u.$set(R);const D={};C&16&&(D.$$scope={dirty:C,ctx:E}),d.$set(D);const B={};C&16&&(B.$$scope={dirty:C,ctx:E}),j.$set(B)},i(E){F||(m(t.$$.fragment,E),m(o.$$.fragment,E),m(u.$$.fragment,E),m(d.$$.fragment,E),m(j.$$.fragment,E),m(A.$$.fragment,E),F=!0)},o(E){_(t.$$.fragment,E),_(o.$$.fragment,E),_(u.$$.fragment,E),_(d.$$.fragment,E),_(j.$$.fragment,E),_(A.$$.fragment,E),F=!1},d(E){E&&(p(e),p(a),p(f),p(O),p(S),p(P)),v(t),v(o),v(u),v(d),v(j),v(A,E)}}}function ff(l){let e,n,t;return n=new me({props:{$$slots:{default:[af]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function uf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function cf(l){let e,n;return e=new fe({props:{$$slots:{default:[uf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $f(l){let e,n,t,r;const o=[H(Ze),{sourceLayer:Ze},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[cf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Be({props:s});const u=[H(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(Ze)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(H(`${Ze}-outline`)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function pf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[ff],default:[tf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${Ze}.pmtiles`,$$slots:{default:[$f]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ze="local_planning_authorities";function mf(l,e,n){let t=x.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class _f extends J{constructor(e){super(),K(this,e,mf,pf,Y,{})}}function gf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function df(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hf(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[df]},$$scope:{ctx:l}}}),s=new Le({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function bf(l){let e,n,t;return n=new me({props:{$$slots:{default:[hf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function vf(l){let e,n=l[3].Name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&z(t,n)},d(r){r&&p(e)}}}function wf(l){let e,n;return e=new fe({props:{$$slots:{default:[vf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kf(l){let e,n,t,r;const o=[H(xe),{sourceLayer:xe},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[wf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Be({props:s}),e.$on("click",Sf);const u=[H(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(xe)),f&0&&{sourceLayer:xe},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(H(`${xe}-outline`)),f&0&&{sourceLayer:xe},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function yf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[bf],default:[gf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${xe}.pmtiles`,$$slots:{default:[kf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let xe="parliamentary_constituencies";function Sf(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Cf(l,e,n){let t=x.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Tf extends J{constructor(e){super(),K(this,e,Cf,yf,Y,{})}}function Of(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lf(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Af(l){let e;return{c(){e=k(`Extrium
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function If(l){let e;return{c(){e=k(`FAQ
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mf(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,O,S;return t=new Q({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Lf]},$$scope:{ctx:l}}}),f=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer.html",$$slots:{default:[Af]},$$scope:{ctx:l}}}),g=new Q({props:{href:"http://www.extrium.co.uk/noiseviewer/FAQs.pdf",$$slots:{default:[If]},$$scope:{ctx:l}}}),O=new Le({}),{c(){e=T("p"),n=k("Most layers show air quality data from "),h(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        µgm
        `),o=T("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=L(),i=T("p"),a=k("The noise layer is from "),h(f.$$.fragment),c=k(", using 2017 data. See their "),h(g.$$.fragment),d=k("."),y=L(),h(O.$$.fragment)},m(I,j){$(I,e,j),w(e,n),b(t,e,null),w(e,r),w(e,o),w(e,s),$(I,u,j),$(I,i,j),w(i,a),b(f,i,null),w(i,c),b(g,i,null),w(i,d),$(I,y,j),b(O,I,j),S=!0},p(I,j){const M={};j&2048&&(M.$$scope={dirty:j,ctx:I}),t.$set(M);const P={};j&2048&&(P.$$scope={dirty:j,ctx:I}),f.$set(P);const A={};j&2048&&(A.$$scope={dirty:j,ctx:I}),g.$set(A)},i(I){S||(m(t.$$.fragment,I),m(f.$$.fragment,I),m(g.$$.fragment,I),m(O.$$.fragment,I),S=!0)},o(I){_(t.$$.fragment,I),_(f.$$.fragment,I),_(g.$$.fragment,I),_(O.$$.fragment,I),S=!1},d(I){I&&(p(e),p(u),p(i),p(y)),v(t),v(f),v(g),v(O,I)}}}function Pf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Mf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function kr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,g,d,y,O,S,I,j;function M(C){l[7](C)}let P={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};l[0]!==void 0&&(P.value=l[0]),e=new _t({props:P}),U.push(()=>W(e,"value",M));const A=[Ff,Nf],F=[];function E(C,N){return C[0]=="Noise"?0:1}return d=E(l),y=F[d]=A[d](l),{c(){h(e.$$.fragment),t=L(),r=T("p"),s=k(o),u=L(),i=T("div"),a=T("label"),f=k(`Opacity
      `),c=T("input"),g=L(),y.c(),O=Fe(),G(c,"type","range"),G(c,"min","0"),G(c,"max","100")},m(C,N){b(e,C,N),$(C,t,N),$(C,r,N),w(r,s),$(C,u,N),$(C,i,N),w(i,a),w(a,f),w(a,c),We(c,l[2]),$(C,g,N),F[d].m(C,N),$(C,O,N),S=!0,I||(j=[it(c,"change",l[8]),it(c,"input",l[8])],I=!0)},p(C,N){const q={};!n&&N&1&&(n=!0,q.value=C[0],V(()=>n=!1)),e.$set(q),(!S||N&1)&&o!==(o=C[3](C[0])+"")&&z(s,o),N&4&&We(c,C[2]);let R=d;d=E(C),d===R?F[d].p(C,N):($e(),_(F[R],1,1,()=>{F[R]=null}),pe(),y=F[d],y?y.p(C,N):(y=F[d]=A[d](C),y.c()),m(y,1),y.m(O.parentNode,O))},i(C){S||(m(e.$$.fragment,C),m(y),S=!0)},o(C){_(e.$$.fragment,C),_(y),S=!1},d(C){C&&(p(t),p(r),p(u),p(i),p(g),p(O)),v(e,C),F[d].d(C),I=!1,hl(j)}}}function Nf(l){let e,n,t;return{c(){e=T("img"),nn(e.src,n=l[5](l[0]))||G(e,"src",n),G(e,"width",150),G(e,"alt",t=`Legend for ${l[0]} layer`)},m(r,o){$(r,e,o)},p(r,o){o&1&&!nn(e.src,n=r[5](r[0]))&&G(e,"src",n),o&1&&t!==(t=`Legend for ${r[0]} layer`)&&G(e,"alt",t)},i:ne,o:ne,d(r){r&&p(e)}}}function Ff(l){let e,n;return e=new Ee({props:{colorScale:["#FF6600","#FF3333","#990033","#AD9AD6","#0000E0"],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ef(l){let e,n;const t=[H("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ro({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Df(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={$$slots:{right:[Pf],default:[Of]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&kr(l);return o=new ho({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Ef]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=kr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&1&&(d.tiles=[f[4](f[0])]),c&2054&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}function jf(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return s=="Noise"?"http://wms.extrium.co.uk/geoserver/NoiseE/wms":`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let O=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${O}`}function f(y){let O=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${O}`}function c(y){r=y,n(1,r)}function g(y){s=y,n(0,s)}function d(){o=Gt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"],Noise:["NoiseE:RD_LQ16_R3","Annual average noise level for the 16-hour period between 0700-2300 (dB)"]}[s])},[s,r,o,i,a,f,c,g,d]}class Rf extends J{constructor(e){super(),K(this,e,jf,Df,Y,{})}}function Bf(l){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zf(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hf(l){let e,n,t,r,o,s,u,i,a;return o=new Q({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[zf]},$$scope:{ctx:l}}}),i=new Le({}),{c(){e=T("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=L(),t=T("p"),r=k("Data from June 2019, produced by "),h(o.$$.fragment),s=k(". See there for methodology details"),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),w(t,r),b(o,t,null),w(t,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(i,f)}}}function qf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Hf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function yr(l){let e,n;return e=new Ee({props:{colorScale:l[1],limits:["55","60","65","70","75",">"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gf(l){let e,n=l[3].noiseclass+"",t,r;return{c(){e=T("p"),t=k(n),r=k(" dB")},m(o,s){$(o,e,s),w(e,t),w(e,r)},p(o,s){s&8&&n!==(n=o[3].noiseclass+"")&&z(t,n)},d(o){o&&p(e)}}}function Uf(l){let e,n;return e=new fe({props:{$$slots:{default:[Gf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wf(l){let e,n;const t=[H(Ct),{sourceLayer:Ct},{paint:{"fill-color":at(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][1],"65.0-69.9":l[1][2],"70.0-74.9":l[1][3],">=75.0":l[1][4]},"red"),"fill-opacity":Z(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Uf]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Be({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(Ct)),s&0&&{sourceLayer:Ct},s&2&&{paint:{"fill-color":at(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][1],"65.0-69.9":o[1][2],"70.0-74.9":o[1][3],">=75.0":o[1][4]},"red"),"fill-opacity":Z(.5,.7)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Vf(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[qf],default:[Bf]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&yr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Ct}.pmtiles`,$$slots:{default:[Wf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=yr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&17&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ct="road_noise";function Xf(l,e,n){let t=x.sequential_low_to_high,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Yf extends J{constructor(e){super(),K(this,e,Xf,Vf,Y,{})}}function Qf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Wards`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Jf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Kf(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Jf]},$$scope:{ctx:l}}}),s=new Le({}),{c(){e=T("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Zf(l){let e,n,t;return n=new me({props:{$$slots:{default:[Kf]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function xf(l){let e,n=l[3].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function eu(l){let e,n;return e=new fe({props:{$$slots:{default:[xf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function tu(l){let e,n,t,r;const o=[H(et),{sourceLayer:et},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[eu]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Be({props:s}),e.$on("click",ru);const u=[H(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new ye({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ae(H(et)),f&0&&{sourceLayer:et},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ae(H(`${et}-outline`)),f&0&&{sourceLayer:et},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function nu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Zf],default:[Qf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${et}.pmtiles`,$$slots:{default:[tu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let et="wards";function ru(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function lu(l,e,n){let t=x.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class ou extends J{constructor(e){super(),K(this,e,lu,nu,Y,{})}}function su(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function iu(l){let e,n,t,r;return t=new Q({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[su]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("License: "),h(t.$$.fragment)},m(o,s){$(o,e,s),w(e,n),b(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&p(e),v(t)}}}class Ye extends J{constructor(e){super(),K(this,e,null,iu,Y,{})}}function au(l){let e,n,t;return e=new Oe({props:{color:x.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function fu(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uu(l){let e,n,t,r,o,s,u,i,a;return o=new Q({props:{href:"https://gtfs.org",$$slots:{default:[fu]},$$scope:{ctx:l}}}),i=new Ye({}),{c(){e=T("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=L(),t=T("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),w(t,r),b(o,t,null),w(t,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(i,f)}}}function cu(l){let e,n,t;return n=new me({props:{$$slots:{default:[uu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function $u(l){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pu(l){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mu(l){let e;function n(o,s){return o[2].has_bus_lane?pu:$u}let t=n(l),r=t(l);return{c(){r.c(),e=Fe()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function _u(l){let e,n;return e=new fe({props:{$$slots:{default:[mu,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gu(l){let e,n;const t=[H(Tt),{sourceLayer:Tt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],x.bus_route_with_lane,x.bus_route_without_lane],"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[_u]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(Tt)),s&0&&{sourceLayer:Tt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function du(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[cu],default:[au]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${Tt}.pmtiles`,$$slots:{default:[gu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Tt="bus_routes";function hu(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class bu extends J{constructor(e){super(),K(this,e,hu,du,Y,{})}}function Sr(l){const e=Au(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function Cr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function vu(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wu(l){let e,n,t,r,o,s,u,i;return u=new Ye({}),{c(){e=T("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=L(),t=T("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=L(),o=T("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=L(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),b(u,a,f),i=!0},p:ne,i(a){i||(m(u.$$.fragment,a),i=!0)},o(a){_(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),v(u,a)}}}function ku(l){let e,n,t;return n=new me({props:{$$slots:{default:[wu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Tr(l){let e,n,t;return n=new Xe({props:{$$slots:{default:[Su]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function yu(l){let e,n,t=l[9]+"",r,o,s;return e=new Oe({props:{color:l[10]}}),{c(){h(e.$$.fragment),n=L(),r=k(t),o=L()},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:ne,i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function Or(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[yu]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Su(l){let e,n,t=Re(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Or(Cr(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=Fe()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=Re(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Cr(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Or(a),r[i].c(),m(r[i],1),r[i].m(e.parentNode,e))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),gt(r,s)}}}function Cu(l){Sr(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,g,d=l[8]+"",y;return{c(){e=T("h2"),t=k(n),r=L(),o=T("p"),s=k("Direction: "),u=T("b"),a=L(),f=T("p"),c=k("Width: "),g=T("b"),y=k(d)},m(O,S){$(O,e,S),w(e,t),$(O,r,S),$(O,o,S),w(o,s),w(o,u),u.innerHTML=i,$(O,a,S),$(O,f,S),w(f,c),w(f,g),w(g,y)},p(O,S){Sr(O),S&32&&n!==(n=O[6]+"")&&z(t,n),S&32&&i!==(i=O[7]+"")&&(u.innerHTML=i),S&32&&d!==(d=O[8]+"")&&z(y,d)},d(O){O&&(p(e),p(r),p(o),p(a),p(f))}}}function Tu(l){let e,n;return e=new fe({props:{$$slots:{default:[Cu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ou(l){let e,n;const t=[H(Ot),{sourceLayer:Ot},{paint:{"line-color":at(["get","kind"],{track:x.cycle_paths.track,lane:x.cycle_paths.lane,shared_use_segregated:x.cycle_paths.shared_use_segregated,shared_use_unsegregated:x.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Lr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[Tu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),e.$on("click",Iu),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(Ot)),s&0&&{sourceLayer:Ot},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Lr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Lu(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[ku],default:[vu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Tr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Ot}.pmtiles`,$$slots:{default:[Ou]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Tr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&8195&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ot="cycle_paths";function Au(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function Iu(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Lr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function Mu(l,e,n){let t=[["track","Separated tracks",x.cycle_paths.track],["lane","Unprotected lanes",x.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",x.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",x.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class Pu extends J{constructor(e){super(),K(this,e,Mu,Lu,Y,{})}}function Nu(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Fu(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Eu(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Fu]},$$scope:{ctx:l}}}),s=new Le({}),{c(){e=T("p"),n=k("Data from the "),h(t.$$.fragment),r=k(", as of September 2021."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Du(l){let e,n,t;return n=new me({props:{$$slots:{default:[Eu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function ju(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&z(t,n)},d(r){r&&p(e)}}}function Ru(l){let e,n;return e=new fe({props:{$$slots:{default:[ju,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bu(l){let e,n;const t=[H(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Ru]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(Lt)),s&0&&{sourceLayer:Lt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function zu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Du],default:[Nu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${Lt}.pmtiles`,$$slots:{default:[Bu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Lt="mrn";function Hu(l,e,n){let t=x.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class qu extends J{constructor(e){super(),K(this,e,Hu,zu,Y,{})}}function Gu(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Uu(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wu(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Uu]},$$scope:{ctx:l}}}),s=new Le({}),{c(){e=T("p"),n=k("Data from Sustrans about the "),h(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Vu(l){let e,n,t;return n=new me({props:{$$slots:{default:[Wu]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ar(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=T("li"),n=k("Description: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&z(o,r)},d(s){s&&p(e)}}}function Ir(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=T("li"),n=k("Is greenway: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&z(o,r)},d(s){s&&p(e)}}}function Mr(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=T("li"),n=k("Route type: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&z(o,r)},d(s){s&&p(e)}}}function Pr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=T("li"),n=k("Route number: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&z(o,r)},d(s){s&&p(e)}}}function Nr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=T("li"),n=k("Route Category: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&z(o,r)},d(s){s&&p(e)}}}function Fr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=T("li"),n=k("Open Status: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&z(o,r)},d(s){s&&p(e)}}}function Er(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=T("li"),n=k("Surface: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&z(o,r)},d(s){s&&p(e)}}}function Dr(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=T("li"),n=k("Quality: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&z(o,r)},d(s){s&&p(e)}}}function jr(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=T("li"),n=k("Road Class: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&z(o,r)},d(s){s&&p(e)}}}function Xu(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&Ar(l),c=l[3].Greenway&&Ir(l),g=l[3].RouteType&&Mr(l),d=l[3].RouteNo&&Pr(l),y=l[3].RouteCat&&Nr(l),O=l[3].OpenStatus&&Fr(l),S=l[3].Surface&&Er(l),I=l[3].Quality&&Dr(l),j=l[3].RoadClass&&jr(l);return{c(){e=T("ul"),f&&f.c(),n=L(),c&&c.c(),t=L(),g&&g.c(),r=L(),d&&d.c(),o=L(),y&&y.c(),s=L(),O&&O.c(),u=L(),S&&S.c(),i=L(),I&&I.c(),a=L(),j&&j.c()},m(M,P){$(M,e,P),f&&f.m(e,null),w(e,n),c&&c.m(e,null),w(e,t),g&&g.m(e,null),w(e,r),d&&d.m(e,null),w(e,o),y&&y.m(e,null),w(e,s),O&&O.m(e,null),w(e,u),S&&S.m(e,null),w(e,i),I&&I.m(e,null),w(e,a),j&&j.m(e,null)},p(M,P){M[3].Desc_?f?f.p(M,P):(f=Ar(M),f.c(),f.m(e,n)):f&&(f.d(1),f=null),M[3].Greenway?c?c.p(M,P):(c=Ir(M),c.c(),c.m(e,t)):c&&(c.d(1),c=null),M[3].RouteType?g?g.p(M,P):(g=Mr(M),g.c(),g.m(e,r)):g&&(g.d(1),g=null),M[3].RouteNo?d?d.p(M,P):(d=Pr(M),d.c(),d.m(e,o)):d&&(d.d(1),d=null),M[3].RouteCat?y?y.p(M,P):(y=Nr(M),y.c(),y.m(e,s)):y&&(y.d(1),y=null),M[3].OpenStatus?O?O.p(M,P):(O=Fr(M),O.c(),O.m(e,u)):O&&(O.d(1),O=null),M[3].Surface?S?S.p(M,P):(S=Er(M),S.c(),S.m(e,i)):S&&(S.d(1),S=null),M[3].Quality?I?I.p(M,P):(I=Dr(M),I.c(),I.m(e,a)):I&&(I.d(1),I=null),M[3].RoadClass?j?j.p(M,P):(j=jr(M),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},d(M){M&&p(e),f&&f.d(),c&&c.d(),g&&g.d(),d&&d.d(),y&&y.d(),O&&O.d(),S&&S.d(),I&&I.d(),j&&j.d()}}}function Yu(l){let e,n;return e=new fe({props:{$$slots:{default:[Xu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qu(l){let e,n;const t=[H(At),{sourceLayer:At},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Yu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(At)),s&0&&{sourceLayer:At},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ju(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Vu],default:[Gu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${At}.pmtiles`,$$slots:{default:[Qu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let At="national_cycle_network";function Ku(l,e,n){let t=x.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Zu extends J{constructor(e){super(),K(this,e,Ku,Ju,Y,{})}}function xu(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ec(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tc(l){let e,n,t,r,o,s,u,i,a;return u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ec]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=L(),t=T("p"),t.textContent="Data valid as of 1 January, 2024",r=L(),o=T("p"),s=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function nc(l){let e,n,t;return n=new me({props:{$$slots:{default:[tc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Rr(l){let e,n;return e=new Ee({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rc(l){let e,n,t,r=l[4].side+"",o,s,u,i,a,f=l[4].average+"",c,g,d,y,O,S,I=l[4].minimum+"",j,M;return{c(){e=T("p"),n=k("Side of the road: "),t=T("b"),o=k(r),s=L(),u=T("p"),i=k("Average width: "),a=T("b"),c=k(f),g=k(`
        meters`),d=L(),y=T("p"),O=k("Minimum width: "),S=T("b"),j=k(I),M=k(`
        meters`)},m(P,A){$(P,e,A),w(e,n),w(e,t),w(t,o),$(P,s,A),$(P,u,A),w(u,i),w(u,a),w(a,c),w(u,g),$(P,d,A),$(P,y,A),w(y,O),w(y,S),w(S,j),w(y,M)},p(P,A){A&16&&r!==(r=P[4].side+"")&&z(o,r),A&16&&f!==(f=P[4].average+"")&&z(c,f),A&16&&I!==(I=P[4].minimum+"")&&z(j,I)},d(P){P&&(p(e),p(s),p(u),p(d),p(y))}}}function lc(l){let e,n;return e=new fe({props:{$$slots:{default:[rc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function oc(l){let e,n;const t=[H(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],l[2],l[1]),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[lc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(H(It)),s&0&&{sourceLayer:It},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Ne,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function sc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[nc],default:[xu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Rr(l);return o=new be({props:{url:`pmtiles://${on()}/v1/${It}.pmtiles`,$$slots:{default:[oc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Rr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let It="pavement_widths";function ic(l,e,n){let t=x.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class ac extends J{constructor(e){super(),K(this,e,ic,sc,Y,{})}}function fc(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uc(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cc(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $c(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new Q({props:{href:"https://www.pct.bike",$$slots:{default:[uc]},$$scope:{ctx:l}}}),a=new Q({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[cc]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=L(),t=T("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=L(),o=T("p"),s=k("See "),h(u.$$.fragment),i=k(" and "),h(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(g,d){$(g,e,d),$(g,n,d),$(g,t,d),$(g,r,d),$(g,o,d),w(o,s),b(u,o,null),w(o,i),b(a,o,null),w(o,f),c=!0},p(g,d){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),u.$set(y);const O={};d&1024&&(O.$$scope={dirty:d,ctx:g}),a.$set(O)},i(g){c||(m(u.$$.fragment,g),m(a.$$.fragment,g),c=!0)},o(g){_(u.$$.fragment,g),_(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(r),p(o)),v(u),v(a)}}}function pc(l){let e,n,t;return n=new me({props:{$$slots:{default:[$c]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Br(l){let e,n,t,r,o,s,u,i;e=new Ee({props:{colorScale:l[3],limits:l[4]}});function a(d){l[7](d)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new bl({props:f}),U.push(()=>W(t,"value",a));function c(d){l[8](d)}let g={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(g.value=l[1]),s=new _t({props:g}),U.push(()=>W(s,"value",c)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),o=L(),h(s.$$.fragment)},m(d,y){b(e,d,y),$(d,n,y),b(t,d,y),$(d,o,y),b(s,d,y),i=!0},p(d,y){const O={};!r&&y&1&&(r=!0,O.value=d[0],V(()=>r=!1)),t.$set(O);const S={};!u&&y&2&&(u=!0,S.value=d[1],V(()=>u=!1)),s.$set(S)},i(d){i||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(s.$$.fragment,d),i=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(s.$$.fragment,d),i=!1},d(d){d&&(p(n),p(o)),v(e,d),v(t,d),v(s,d)}}}function mc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Ht(!1),t=Fe(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function _c(l){let e,n;return e=new fe({props:{$$slots:{default:[mc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gc(l){let e,n;const t=[H(nt),{sourceLayer:nt},{paint:{"line-color":we(["get",l[1]],l[4],l[3]),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[2]&&l[0]==nt?"visible":"none"}}];let r={$$slots:{default:[_c]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(H(nt)),s&0&&{sourceLayer:nt},s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Ne,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==nt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function dc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Ht(!1),t=Fe(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function hc(l){let e,n;return e=new fe({props:{$$slots:{default:[dc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bc(l){let e,n;const t=[H(ut),{sourceLayer:ut},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",l[1]],l[4],l[3]),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[2]&&l[0]==ut?"visible":"none"}}];let r={$$slots:{default:[hc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ae(H(ut)),s&0&&{sourceLayer:ut},t[2],t[3],s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Ne,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==ut?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vc(l){let e,n,t,r,o,s,u,i;function a(g){l[6](g)}let f={$$slots:{right:[pc],default:[fc]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),U.push(()=>W(e,"checked",a));let c=l[2]&&Br(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${nt}.pmtiles`,$$slots:{default:[gc]},$$scope:{ctx:l}}}),u=new be({props:{url:`pmtiles://${he()}/v1/${ut}.pmtiles`,$$slots:{default:[bc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),c&&c.c(),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment)},m(g,d){b(e,g,d),$(g,t,d),c&&c.m(g,d),$(g,r,d),b(o,g,d),$(g,s,d),b(u,g,d),i=!0},p(g,[d]){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),!n&&d&4&&(n=!0,y.checked=g[2],V(()=>n=!1)),e.$set(y),g[2]?c?(c.p(g,d),d&4&&m(c,1)):(c=Br(g),c.c(),m(c,1),c.m(r.parentNode,r)):c&&($e(),_(c,1,1,()=>{c=null}),pe());const O={};d&1031&&(O.$$scope={dirty:d,ctx:g}),o.$set(O);const S={};d&1031&&(S.$$scope={dirty:d,ctx:g}),u.$set(S)},i(g){i||(m(e.$$.fragment,g),m(c),m(o.$$.fragment,g),m(u.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(u.$$.fragment,g),i=!1},d(g){g&&(p(t),p(r),p(s)),v(e,g),c&&c.d(g),v(o,g),v(u,g)}}}let nt="pct_commute",ut="pct_school";function wc(l,e,n){let t=x.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=nt,s="baseline",u=!1;function i(g){let d=g.baseline,y=g.gov_target,O=g.go_dutch,S=`<h2>Trip purpose: ${o==nt?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${O.toLocaleString()}</b></p>`;else{let I=(y/d).toFixed(1),j=(O/d).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${O.toLocaleString()} (<b>${j}x</b> of baseline)</p>`}return S}function a(g){u=g,n(2,u)}function f(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class kc extends J{constructor(e){super(),K(this,e,wc,vc,Y,{})}}function yc(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sc(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tc(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new Q({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Sc]},$$scope:{ctx:l}}}),f=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Cc]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("The average speed data is collected over a six-month period by "),h(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=L(),s=T("p"),s.textContent="Data valid as of 1 September, 2023",u=L(),i=T("p"),a=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=k(".")},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,r),$(d,o,y),$(d,s,y),$(d,u,y),$(d,i,y),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,y){const O={};y&256&&(O.$$scope={dirty:y,ctx:d}),t.$set(O);const S={};y&256&&(S.$$scope={dirty:y,ctx:d}),f.$set(S)},i(d){g||(m(t.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(o),p(s),p(u),p(i)),v(t),v(f)}}}function Oc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Tc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function zr(l){let e,n,t,r,o;e=new Ee({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new bl({props:u}),U.push(()=>W(t,"value",s)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],V(()=>r=!1)),t.$set(f)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function Lc(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,g=l[4][l[7].highest_description]+"",d,y;return{c(){e=T("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=L(),u=T("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),d=k(g),y=k(")")},m(O,S){$(O,e,S),w(e,n),w(e,r),w(e,o),$(O,s,S),$(O,u,S),w(u,i),w(u,f),w(u,c),w(u,d),w(u,y)},p(O,S){S&128&&t!==(t=O[7].indicative_mph+"")&&z(r,t),S&128&&a!==(a=O[7].highest_mph+"")&&z(f,a),S&128&&g!==(g=O[4][O[7].highest_description]+"")&&z(d,g)},d(O){O&&(p(e),p(s),p(u))}}}function Ac(l){let e,n;return e=new fe({props:{$$slots:{default:[Lc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ic(l){let e,n;const t=[H(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",l[0]],l[3],l[2]),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[Ac]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&15?te(t,[s&0&&ae(H(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&13&&{paint:{"line-color":we(["get",o[0]],o[3],o[2]),"line-width":Ne,"line-opacity":Z(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Mc(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={$$slots:{right:[Oc],default:[yc]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&zr(l);return o=new be({props:{url:`pmtiles://${on()}/v1/${Mt}.pmtiles`,$$slots:{default:[Ic]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=zr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Mt="road_speeds";function Pc(l,e,n){let t=x.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class Nc extends J{constructor(e){super(),K(this,e,Pc,Mc,Y,{})}}function Fc(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ec(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Dc(l){let e,n,t,r,o,s,u,i,a;return u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Ec]},$$scope:{ctx:l}}}),{c(){e=T("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=L(),t=T("p"),t.textContent="Data valid as of 1 September, 2023",r=L(),o=T("p"),s=k(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function jc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Dc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Hr(l){let e,n;return e=new Ee({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rc(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",g,d;return{c(){e=T("p"),n=k("Average width: "),t=T("b"),o=k(r),s=k(`
        meters`),u=L(),i=T("p"),a=k("Minimum width: "),f=T("b"),g=k(c),d=k(`
        meters`)},m(y,O){$(y,e,O),w(e,n),w(e,t),w(t,o),w(e,s),$(y,u,O),$(y,i,O),w(i,a),w(i,f),w(f,g),w(i,d)},p(y,O){O&16&&r!==(r=y[4].average+"")&&z(o,r),O&16&&c!==(c=y[4].minimum+"")&&z(g,c)},d(y){y&&(p(e),p(u),p(i))}}}function Bc(l){let e,n;return e=new fe({props:{$$slots:{default:[Rc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zc(l){let e,n;const t=[H(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],l[2],l[1]),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Bc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(H(Pt)),s&0&&{sourceLayer:Pt},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Ne,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Hc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[jc],default:[Fc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Hr(l);return o=new be({props:{url:`pmtiles://${on()}/v1/${Pt}.pmtiles`,$$slots:{default:[zc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Hr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Pt="road_widths";function qc(l,e,n){let t=x.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Gc extends J{constructor(e){super(),K(this,e,qc,Hc,Y,{})}}function Uc(l){let e,n,t;return e=new Oe({props:{color:x.trams}}),{c(){h(e.$$.fragment),n=k(`
  Trams`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Wc(l){let e,n,t,r;return t=new Ye({}),{c(){e=T("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Vc(l){let e,n,t;return n=new me({props:{$$slots:{default:[Wc]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Xc(l){let e,n;const t=[H(Nt),{sourceLayer:Nt},{paint:{"line-color":x.trams,"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ye({props:r}),e.$on("click",Qc),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(Nt)),s&0&&{sourceLayer:Nt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yc(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Vc],default:[Uc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${Nt}.pmtiles`,$$slots:{default:[Xc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Nt="trams";function Qc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Jc(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Kc extends J{constructor(e){super(),K(this,e,Jc,Yc,Y,{})}}function Zc(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xc(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function e$(l){let e,n,t,r,o,s,u,i,a;return t=new Q({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[xc]},$$scope:{ctx:l}}}),i=new Le({}),{c(){e=T("p"),n=k("Data from the "),h(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=L(),s=T("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),$(f,o,c),$(f,s,c),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),v(t),v(i,f)}}}function t$(l){let e,n,t;return n=new me({props:{$$slots:{default:[e$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function qr(l){let e,n,t,r;return t=new Ee({props:{colorScale:l[1],limits:l[2]}}),{c(){e=T("p"),e.textContent="Peak hourly frequency:",n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function n$(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,g,d,y,O,S=l[4].peak_description+"",I,j,M,P,A,F=l[4].total+"",E,C,N=l[4].total_description+"",q,R;return{c(){e=T("p"),n=k("Stop name: "),t=T("b"),o=k(r),s=L(),u=T("p"),i=k("Peak: "),a=T("b"),c=k(f),g=k(`
        buses during the busiest hour of any day`),d=L(),y=T("p"),O=k("The peak hour is "),I=k(S),j=L(),M=T("p"),P=k("Total buses per day: "),A=T("b"),E=k(F),C=k(`
        (for `),q=k(N),R=k(", the busiest day of the week)")},m(D,B){$(D,e,B),w(e,n),w(e,t),w(t,o),$(D,s,B),$(D,u,B),w(u,i),w(u,a),w(a,c),w(u,g),$(D,d,B),$(D,y,B),w(y,O),w(y,I),$(D,j,B),$(D,M,B),w(M,P),w(M,A),w(A,E),w(M,C),w(M,q),w(M,R)},p(D,B){B&16&&r!==(r=D[4].stop_name+"")&&z(o,r),B&16&&f!==(f=D[4].peak+"")&&z(c,f),B&16&&S!==(S=D[4].peak_description+"")&&z(I,S),B&16&&F!==(F=D[4].total+"")&&z(E,F),B&16&&N!==(N=D[4].total_description+"")&&z(q,N)},d(D){D&&(p(e),p(s),p(u),p(d),p(y),p(j),p(M))}}}function r$(l){let e,n;return e=new fe({props:{$$slots:{default:[n$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function l$(l){let e,n;const t=[H(Ft),{sourceLayer:Ft},{paint:{"circle-color":we(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[r$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ft({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(H(Ft)),s&0&&{sourceLayer:Ft},s&6&&{paint:{"circle-color":we(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function o$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[t$],default:[Zc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&qr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Ft}.pmtiles`,$$slots:{default:[l$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=qr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ft="bus_stops";function s$(l,e,n){let t=x.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class i$ extends J{constructor(e){super(),K(this,e,s$,o$,Y,{})}}function a$(l){let e,n,t;return{c(){e=T("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=it(e,"change",l[5]),n=!0)},p:ne,d(r){r&&p(e),l[7](null),n=!1,t()}}}function Gr(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[u$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function f$(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Oe({props:{color:Et}}),{c(){h(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&z(r,t)},i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function u$(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[f$]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function c$(l){let e,n,t,r,o,s;e=new _n({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[a$]},$$scope:{ctx:l}}}),t=new vl({props:{errorMessage:l[3]}});let u=l[2]>0&&Gr(l);return{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),u&&u.c(),o=Fe()},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&m(u,1)):(u=Gr(i),u.c(),m(u,1),u.m(o.parentNode,o)):u&&($e(),_(u,1,1,()=>{u=null}),pe())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(u),s=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(u),s=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),u&&u.d(i)}}}function $$(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,g,d,y,O=l[10].notes+"",S,I,j,M,P,A,F,E=l[10].id+"",C,N,q,R,D,B=(l[10].inspector??"???")+"",X,re,oe,ce=l[10].submission_time+"",Ie,Te,ie,Ae,ue,_e=l[10].scheme_reference+"",ge,ze,De,Ce=l[10].current_design_stage+"",Qe;return{c(){e=T("div"),n=T("h2"),r=k(t),o=L(),s=T("p"),u=T("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=L(),g=T("p"),d=T("u"),d.textContent="Notes",y=k(`
          : `),S=k(O),I=L(),j=T("hr"),M=L(),P=T("p"),A=k("Critical issue ID: "),F=T("b"),C=k(E),N=L(),q=T("p"),R=k("Submitted by "),D=T("b"),X=k(B),re=k(`
          at
          `),oe=T("b"),Ie=k(ce),Te=L(),ie=T("p"),Ae=k("For scheme "),ue=T("b"),ge=k(_e),ze=k(`
          in stage
          `),De=T("b"),Qe=k(Ce),Se(e,"max-width","30vw")},m(se,ve){$(se,e,ve),w(e,n),w(n,r),w(e,o),w(e,s),w(s,u),w(s,i),w(s,f),w(e,c),w(e,g),w(g,d),w(g,y),w(g,S),w(e,I),w(e,j),w(e,M),w(e,P),w(P,A),w(P,F),w(F,C),w(e,N),w(e,q),w(q,R),w(q,D),w(D,X),w(q,re),w(q,oe),w(oe,Ie),w(e,Te),w(e,ie),w(ie,Ae),w(ie,ue),w(ue,ge),w(ie,ze),w(ie,De),w(De,Qe)},p(se,ve){ve&1024&&t!==(t=se[10].critical_type+"")&&z(r,t),ve&1024&&a!==(a=se[10].location_description+"")&&z(f,a),ve&1024&&O!==(O=se[10].notes+"")&&z(S,O),ve&1024&&E!==(E=se[10].id+"")&&z(C,E),ve&1024&&B!==(B=(se[10].inspector??"???")+"")&&z(X,B),ve&1024&&ce!==(ce=se[10].submission_time+"")&&z(Ie,ce),ve&1024&&_e!==(_e=se[10].scheme_reference+"")&&z(ge,_e),ve&1024&&Ce!==(Ce=se[10].current_design_stage+"")&&z(Qe,Ce)},d(se){se&&p(e)}}}function p$(l){let e,n;return e=new fe({props:{$$slots:{default:[$$,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function m$(l){let e,n,t,r,o,s;const u=[H("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":Et,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let d=0;d<u.length;d+=1)i=ee(i,u[d]);e=new ft({props:i}),e.$on("click",l[6]);const a=[H("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=ee(f,a[d]);t=new sn({props:f});const c=[H("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Et,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let g={$$slots:{default:[p$]},$$scope:{ctx:l}};for(let d=0;d<c.length;d+=1)g=ee(g,c[d]);return o=new ft({props:g}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(d,y){b(e,d,y),$(d,n,y),b(t,d,y),$(d,r,y),b(o,d,y),s=!0},p(d,y){const O=y&2?te(u,[u[0],u[1],y&0&&{paint:{"circle-color":Et,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(O);const S=y&2?te(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(S);const I=y&2?te(c,[c[0],c[1],c[2],c[3],y&0&&{paint:{"circle-color":Et,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};y&2048&&(I.$$scope={dirty:y,ctx:d}),o.$set(I)},i(d){s||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(o.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),s=!1},d(d){d&&(p(n),p(r)),v(e,d),v(t,d),v(o,d)}}}function _$(l){let e,n,t,r;return e=new je({props:{label:"Critical Issues",$$slots:{default:[c$]},$$scope:{ctx:l}}}),t=new bt({props:{id:Bl,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[m$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let Bl="criticals",Et="red";function g$(l,e,n){let t;ke(l,On,d=>n(9,t=d));let r,o=!0,s=0,u="",i=Ul();async function a(d){try{n(4,i=await Ti(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}async function f(d){let y=await t.getSource(Bl).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id);t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:y})}function c(d){U[d?"unshift":"push"](()=>{r=d,n(0,r)})}function g(d){o=d,n(1,o)}return[r,o,s,u,i,a,f,c,g]}class d$ extends J{constructor(e){super(),K(this,e,g$,_$,Y,{})}}function h$(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function b$(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function v$(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[b$]},$$scope:{ctx:l}}}),s=new Ye({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function w$(l){let e,n,t;return n=new me({props:{$$slots:{default:[v$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ur(l){let e,n;return e=new An({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function k$(l){let e,n=Wr(l[3])+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=Wr(r[3])+"")&&z(t,n)},d(r){r&&p(e)}}}function y$(l){let e,n;return e=new fe({props:{$$slots:{default:[k$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function S$(l){let e,n;const t=[H(Dt),{sourceLayer:Dt},{paint:{"circle-color":at(["get","crossing"],{traffic_signals:x.signalized_crossing},x.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[y$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ft({props:r}),e.$on("click",T$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(Dt)),s&0&&{sourceLayer:Dt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function C$(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[w$],default:[h$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Ur(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Dt}.pmtiles`,$$slots:{default:[S$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Ur(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&17&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Dt="crossings";function Wr(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function T$(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function O$(l,e,n){let t=!1,r=[["Signalized",x.signalized_crossing],["Other",x.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class L$ extends J{constructor(e){super(),K(this,e,O$,C$,Y,{})}}function A$(l){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function I$(l){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function M$(l){let e,n,t,r,o,s,u,i,a,f,c,g,d;return u=new Q({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[I$]},$$scope:{ctx:l}}}),f=new Le({}),g=new Ye({}),{c(){e=T("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=L(),t=T("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=L(),o=T("p"),s=k("This layer is built from "),h(u.$$.fragment),i=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=L(),h(f.$$.fragment),c=L(),h(g.$$.fragment)},m(y,O){$(y,e,O),$(y,n,O),$(y,t,O),$(y,r,O),$(y,o,O),w(o,s),b(u,o,null),w(o,i),$(y,a,O),b(f,y,O),$(y,c,O),b(g,y,O),d=!0},p(y,O){const S={};O&32&&(S.$$scope={dirty:O,ctx:y}),u.$set(S)},i(y){d||(m(u.$$.fragment,y),m(f.$$.fragment,y),m(g.$$.fragment,y),d=!0)},o(y){_(u.$$.fragment,y),_(f.$$.fragment,y),_(g.$$.fragment,y),d=!1},d(y){y&&(p(e),p(n),p(t),p(r),p(o),p(a),p(c)),v(u),v(f,y),v(g,y)}}}function P$(l){let e,n,t;return n=new me({props:{$$slots:{default:[M$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Vr(l){let e,n;return e=new Ee({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function N$(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=T("p"),n=k("Gradient: "),t=T("b"),o=k(r),s=k(`
        %`)},m(u,i){$(u,e,i),w(e,n),w(e,t),w(t,o),w(e,s)},p(u,i){i&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&z(o,r)},d(u){u&&p(e)}}}function F$(l){let e,n;return e=new fe({props:{$$slots:{default:[N$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function E$(l){let e,n,t,r;const o=[H(tt),{sourceLayer:tt},{manageHoverState:!0},{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":Ne,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[F$]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new ye({props:s});const u=[H(tt+"_arrows"),{sourceLayer:tt},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new sn({props:i}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ae(H(tt)),f&0&&{sourceLayer:tt},o[2],f&6&&{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Ne,"line-opacity":Z(1,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?te(u,[f&0&&ae(H(tt+"_arrows")),f&0&&{sourceLayer:tt},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function D$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[P$],default:[A$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Vr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${tt}.pmtiles`,$$slots:{default:[E$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Vr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let tt="gradient";function j$(l,e,n){let t=x.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class R$ extends J{constructor(e){super(),K(this,e,j$,D$,Y,{})}}function B$(l){let e,n,t;return{c(){e=T("img"),t=k(`
  Cycle parking`),nn(e.src,n=Wl)||G(e,"src",n),G(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function z$(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function H$(l){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function q$(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[z$]},$$scope:{ctx:l}}}),i=new Q({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[H$]},$$scope:{ctx:l}}}),f=new Ye({}),{c(){e=T("p"),n=k("Cycle parking, according to "),h(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=L(),s=T("p"),u=k("Icon from "),h(i.$$.fragment),a=L(),h(f.$$.fragment)},m(g,d){$(g,e,d),w(e,n),b(t,e,null),w(e,r),$(g,o,d),$(g,s,d),w(s,u),b(i,s,null),$(g,a,d),b(f,g,d),c=!0},p(g,d){const y={};d&8&&(y.$$scope={dirty:d,ctx:g}),t.$set(y);const O={};d&8&&(O.$$scope={dirty:d,ctx:g}),i.$set(O)},i(g){c||(m(t.$$.fragment,g),m(i.$$.fragment,g),m(f.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(i.$$.fragment,g),_(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(o),p(s),p(a)),v(t),v(i),v(f,g)}}}function G$(l){let e,n,t;return n=new me({props:{$$slots:{default:[q$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function U$(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=T("p"),n=k("Capacity: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&z(o,r)},d(s){s&&p(e)}}}function W$(l){let e,n;return e=new fe({props:{$$slots:{default:[U$,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function V$(l){let e,n;const t=[H(jt),{sourceLayer:jt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[W$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new sn({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(jt)),s&0&&{sourceLayer:jt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function X$(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[G$],default:[B$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${jt}.pmtiles`,$$slots:{default:[V$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let jt="cycle_parking";function Y$(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Q$ extends J{constructor(e){super(),K(this,e,Y$,X$,Y,{})}}function J$(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function K$(l){let e,n,t,r;return t=new Ye({}),{c(){e=T("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=L(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Z$(l){let e,n,t;return n=new me({props:{$$slots:{default:[K$]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Xr(l){let e,n,t;return n=new Xe({props:{$$slots:{default:[np]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function x$(l){let e,n,t;return e=new Oe({props:{color:x.education.schools}}),{c(){h(e.$$.fragment),n=k(`
        Schools`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function ep(l){let e,n,t;return e=new Oe({props:{color:x.education.colleges}}),{c(){h(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function tp(l){let e,n,t;return e=new Oe({props:{color:x.education.universities}}),{c(){h(e.$$.fragment),n=k(`
        Universities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function np(l){let e,n,t,r,o,s,u,i,a;function f(S){l[3](S)}let c={$$slots:{default:[x$]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),U.push(()=>W(e,"checked",f));function g(S){l[4](S)}let d={$$slots:{default:[ep]},$$scope:{ctx:l}};l[1].college!==void 0&&(d.checked=l[1].college),r=new le({props:d}),U.push(()=>W(r,"checked",g));function y(S){l[5](S)}let O={$$slots:{default:[tp]},$$scope:{ctx:l}};return l[1].university!==void 0&&(O.checked=l[1].university),u=new le({props:O}),U.push(()=>W(u,"checked",y)),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment),s=L(),h(u.$$.fragment)},m(S,I){b(e,S,I),$(S,t,I),b(r,S,I),$(S,s,I),b(u,S,I),a=!0},p(S,I){const j={};I&128&&(j.$$scope={dirty:I,ctx:S}),!n&&I&2&&(n=!0,j.checked=S[1].school,V(()=>n=!1)),e.$set(j);const M={};I&128&&(M.$$scope={dirty:I,ctx:S}),!o&&I&2&&(o=!0,M.checked=S[1].college,V(()=>o=!1)),r.$set(M);const P={};I&128&&(P.$$scope={dirty:I,ctx:S}),!i&&I&2&&(i=!0,P.checked=S[1].university,V(()=>i=!1)),u.$set(P)},i(S){a||(m(e.$$.fragment,S),m(r.$$.fragment,S),m(u.$$.fragment,S),a=!0)},o(S){_(e.$$.fragment,S),_(r.$$.fragment,S),_(u.$$.fragment,S),a=!1},d(S){S&&(p(t),p(s)),v(e,S),v(r,S),v(u,S)}}}function rp(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&z(t,n)},d(r){r&&p(e)}}}function lp(l){let e,n;return e=new fe({props:{$$slots:{default:[rp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function op(l){let e,n;const t=[H(Rt),{sourceLayer:Rt},{paint:{"fill-color":at(["get","type"],{school:x.education.schools,college:x.education.colleges,university:x.education.universities},"grey"),"fill-opacity":Z(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Yr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[lp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Be({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ae(H(Rt)),s&0&&{sourceLayer:Rt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Yr(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function sp(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[Z$],default:[J$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Xr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Rt}.pmtiles`,$$slots:{default:[op]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&128&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Xr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&131&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Rt="education";function Yr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function ip(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class ap extends J{constructor(e){super(),K(this,e,ip,sp,Y,{})}}function fp(l){let e,n,t,r;return e=new Oe({props:{color:l[4]}}),{c(){h(e.$$.fragment),n=L(),t=k(l[2])},m(o,s){b(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&z(t,o[2])},i(o){r||(m(e.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function up(l){let e;const n=l[5].default,t=Vt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&Xt(t,n,r,r[7],e?Qt(n,r[7],o,null):Yt(r[7]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function cp(l){let e,n,t;return n=new me({props:{$$slots:{default:[up]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function $p(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&z(t,n)},d(r){r&&p(e)}}}function pp(l){let e,n;return e=new fe({props:{$$slots:{default:[$p,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mp(l){let e,n;const t=[H(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":Z(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[pp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Be({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&25?te(t,[s&1&&ae(H(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Z(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function _p(l){let e,n,t,r,o;function s(i){l[6](i)}let u={$$slots:{right:[cp],default:[fp]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${he()}/v1/${l[0]}.pmtiles`,$$slots:{default:[mp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],V(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${he()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function gp(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=x[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class zl extends J{constructor(e){super(),K(this,e,gp,_p,Y,{name:0,singularNoun:1,pluralNoun:2})}}function dp(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hp(l){let e,n,t,r,o,s,u;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[dp]},$$scope:{ctx:l}}}),s=new Ye({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=L(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function bp(l){let e,n;return e=new zl({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[hp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class vp extends J{constructor(e){super(),K(this,e,null,bp,Y,{})}}function wp(l){let e,n,t;return{c(){e=T("img"),t=k(`
  Railway Stations`),nn(e.src,n=Vl)||G(e,"src",n),G(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function kp(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yp(l){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sp(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[kp]},$$scope:{ctx:l}}}),i=new Q({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[yp]},$$scope:{ctx:l}}}),c=new Ye({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),s=T("p"),u=k("Icon from "),h(i.$$.fragment),a=k(". (Note that not all stations shown are National Rail.)"),f=L(),h(c.$$.fragment)},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,r),$(d,o,y),$(d,s,y),w(s,u),b(i,s,null),w(s,a),$(d,f,y),b(c,d,y),g=!0},p(d,y){const O={};y&8&&(O.$$scope={dirty:y,ctx:d}),t.$set(O);const S={};y&8&&(S.$$scope={dirty:y,ctx:d}),i.$set(S)},i(d){g||(m(t.$$.fragment,d),m(i.$$.fragment,d),m(c.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(i.$$.fragment,d),_(c.$$.fragment,d),g=!1},d(d){d&&(p(e),p(o),p(s),p(f)),v(t),v(i),v(c,d)}}}function Cp(l){let e,n,t;return n=new me({props:{$$slots:{default:[Sp]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Tp(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&z(t,n)},d(r){r&&p(e)}}}function Op(l){let e,n;return e=new fe({props:{$$slots:{default:[Tp,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lp(l){let e,n;const t=[H(Cn),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Op]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new sn({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ae(H(Cn)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Ap(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Cp],default:[wp]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new bt({props:{data:`${he()}/v1/${Cn}.geojson`,$$slots:{default:[Lp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Cn="railway_stations";function Ip(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Mp extends J{constructor(e){super(),K(this,e,Ip,Ap,Y,{})}}function Pp(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Np(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fp(l){let e,n,t,r,o,s,u,i,a;return t=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Pp]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Np]},$$scope:{ctx:l}}}),i=new Ye({}),{c(){e=T("p"),n=k("This shows "),h(t.$$.fragment),r=k(" and "),h(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=L(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function Ep(l){let e,n;return e=new zl({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[Fp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Dp extends J{constructor(e){super(),K(this,e,null,Ep,Y,{})}}function jp(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rp(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bp(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function zp(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,O,S,I,j,M,P,A,F,E;return t=new Q({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[Rp]},$$scope:{ctx:l}}}),I=new Q({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Bp]},$$scope:{ctx:l}}}),F=new Le({}),{c(){e=T("p"),n=k("This layer shows collisions recorded in the "),h(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=L(),s=T("ul"),u=T("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=L(),a=T("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=L(),c=T("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=L(),d=T("li"),d.textContent='The "pedestrians" category also include mobility scooters',y=L(),O=T("li"),S=k("All limitations "),h(I.$$.fragment),j=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),M=L(),P=T("p"),P.textContent="You can click a point to open the full report, thanks to CycleStreets.",A=L(),h(F.$$.fragment)},m(C,N){$(C,e,N),w(e,n),b(t,e,null),w(e,r),$(C,o,N),$(C,s,N),w(s,u),w(s,i),w(s,a),w(s,f),w(s,c),w(s,g),w(s,d),w(s,y),w(s,O),w(O,S),b(I,O,null),w(O,j),$(C,M,N),$(C,P,N),$(C,A,N),b(F,C,N),E=!0},p(C,N){const q={};N&16777216&&(q.$$scope={dirty:N,ctx:C}),t.$set(q);const R={};N&16777216&&(R.$$scope={dirty:N,ctx:C}),I.$set(R)},i(C){E||(m(t.$$.fragment,C),m(I.$$.fragment,C),m(F.$$.fragment,C),E=!0)},o(C){_(t.$$.fragment,C),_(I.$$.fragment,C),_(F.$$.fragment,C),E=!1},d(C){C&&(p(e),p(o),p(s),p(M),p(P),p(A)),v(t),v(I),v(F,C)}}}function Hp(l){let e,n,t;return n=new me({props:{$$slots:{default:[zp]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Qr(l){let e,n,t,r,o,s,u,i,a,f,c,g,d;return n=new Xe({props:{small:!0,$$slots:{default:[Vp]},$$scope:{ctx:l}}}),f=new An({props:{rows:l[14]}}),{c(){e=T("div"),h(n.$$.fragment),t=L(),r=T("div"),o=k(`Filter years:
      `),s=T("input"),u=k(`
      -
      `),i=T("input"),a=L(),h(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),Se(e,"border","1px solid black"),Se(e,"padding","8px")},m(y,O){$(y,e,O),b(n,e,null),w(e,t),w(e,r),w(r,o),w(r,s),We(s,l[4]),w(r,u),w(r,i),We(i,l[5]),w(e,a),b(f,e,null),c=!0,g||(d=[it(s,"input",l[20]),it(i,"input",l[21])],g=!0)},p(y,O){const S={};O&16777231&&(S.$$scope={dirty:O,ctx:y}),n.$set(S),O&16&&Gt(s.value)!==y[4]&&We(s,y[4]),O&32&&Gt(i.value)!==y[5]&&We(i,y[5])},i(y){c||(m(n.$$.fragment,y),m(f.$$.fragment,y),c=!0)},o(y){_(n.$$.fragment,y),_(f.$$.fragment,y),c=!1},d(y){y&&p(e),v(n),v(f),g=!1,hl(d)}}}function qp(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gp(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Up(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wp(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vp(l){let e,n,t,r,o,s,u,i,a,f,c,g;function d(A){l[16](A)}let y={$$slots:{default:[qp]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new le({props:y}),U.push(()=>W(e,"checked",d));function O(A){l[17](A)}let S={$$slots:{default:[Gp]},$$scope:{ctx:l}};l[1]!==void 0&&(S.checked=l[1]),r=new le({props:S}),U.push(()=>W(r,"checked",O));function I(A){l[18](A)}let j={$$slots:{default:[Up]},$$scope:{ctx:l}};l[2]!==void 0&&(j.checked=l[2]),u=new le({props:j}),U.push(()=>W(u,"checked",I));function M(A){l[19](A)}let P={$$slots:{default:[Wp]},$$scope:{ctx:l}};return l[3]!==void 0&&(P.checked=l[3]),f=new le({props:P}),U.push(()=>W(f,"checked",M)),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment),s=L(),h(u.$$.fragment),a=L(),h(f.$$.fragment)},m(A,F){b(e,A,F),$(A,t,F),b(r,A,F),$(A,s,F),b(u,A,F),$(A,a,F),b(f,A,F),g=!0},p(A,F){const E={};F&16777216&&(E.$$scope={dirty:F,ctx:A}),!n&&F&1&&(n=!0,E.checked=A[0],V(()=>n=!1)),e.$set(E);const C={};F&16777216&&(C.$$scope={dirty:F,ctx:A}),!o&&F&2&&(o=!0,C.checked=A[1],V(()=>o=!1)),r.$set(C);const N={};F&16777216&&(N.$$scope={dirty:F,ctx:A}),!i&&F&4&&(i=!0,N.checked=A[2],V(()=>i=!1)),u.$set(N);const q={};F&16777216&&(q.$$scope={dirty:F,ctx:A}),!c&&F&8&&(c=!0,q.checked=A[3],V(()=>c=!1)),f.$set(q)},i(A){g||(m(e.$$.fragment,A),m(r.$$.fragment,A),m(u.$$.fragment,A),m(f.$$.fragment,A),g=!0)},o(A){_(e.$$.fragment,A),_(r.$$.fragment,A),_(u.$$.fragment,A),_(f.$$.fragment,A),g=!1},d(A){A&&(p(t),p(s),p(a)),v(e,A),v(r,A),v(u,A),v(f,A)}}}function Jr(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=T("p"),n=k("Pedestrian location: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&z(o,r)},d(s){s&&p(e)}}}function Kr(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=T("p"),n=k("Pedestrian movement: "),t=T("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&z(o,r)},d(s){s&&p(e)}}}function Xp(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,g,d,y,O,S=Zr(l[23])+"",I,j,M,P,A,F=l[23].pedestrian_location&&Jr(l),E=l[23].pedestrian_movement&&Kr(l);return{c(){e=T("p"),n=k("Year: "),t=T("b"),o=k(r),s=L(),u=T("p"),i=k("Severity: "),a=T("b"),c=k(f),g=L(),d=T("p"),y=k("Casualties: "),O=T("b"),I=k(S),j=L(),F&&F.c(),M=L(),E&&E.c(),P=L(),A=T("p"),A.textContent="Click to open full report in CycleStreets"},m(C,N){$(C,e,N),w(e,n),w(e,t),w(t,o),$(C,s,N),$(C,u,N),w(u,i),w(u,a),w(a,c),$(C,g,N),$(C,d,N),w(d,y),w(d,O),w(O,I),$(C,j,N),F&&F.m(C,N),$(C,M,N),E&&E.m(C,N),$(C,P,N),$(C,A,N)},p(C,N){N&8388608&&r!==(r=C[23].year+"")&&z(o,r),N&8388608&&f!==(f=C[10][C[23].severity]+"")&&z(c,f),N&8388608&&S!==(S=Zr(C[23])+"")&&z(I,S),C[23].pedestrian_location?F?F.p(C,N):(F=Jr(C),F.c(),F.m(M.parentNode,M)):F&&(F.d(1),F=null),C[23].pedestrian_movement?E?E.p(C,N):(E=Kr(C),E.c(),E.m(P.parentNode,P)):E&&(E.d(1),E=null)},d(C){C&&(p(e),p(s),p(u),p(g),p(d),p(j),p(M),p(P),p(A)),F&&F.d(C),E&&E.d(C)}}}function Yp(l){let e,n;return e=new fe({props:{$$slots:{default:[Xp,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qp(l){let e,n;const t=[H(Bt),{sourceLayer:Bt},{paint:{"circle-color":we(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Yp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ft({props:r}),e.$on("click",Kp),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&14528?te(t,[s&0&&ae(H(Bt)),s&0&&{sourceLayer:Bt},s&14336&&{paint:{"circle-color":we(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Jp(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={$$slots:{right:[Hp],default:[jp]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[6]&&Qr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${Bt}.pmtiles`,$$slots:{default:[Qp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,g.checked=f[6],V(()=>n=!1)),e.$set(g),f[6]?a?(a.p(f,c),c&64&&m(a,1)):(a=Qr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&16777408&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Bt="stats19";function Zr(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function Kp(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function Zp(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(q,R,D,B,X,re){let oe=["any"];return o&&oe.push(["get","pedestrian"]),s&&oe.push(["get","cyclist"]),u&&oe.push(["get","horse_rider"]),i&&oe.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],oe]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},d={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},O=x.sequential_low_to_high[4],S=x.sequential_low_to_high[2],I=x.sequential_low_to_high[0],j=[["Fatal",O],["Serious",S],["Slight",I]];function M(q){r=q,n(6,r)}function P(q){o=q,n(0,o)}function A(q){s=q,n(1,s)}function F(q){u=q,n(2,u)}function E(q){i=q,n(3,i)}function C(){a=Gt(this.value),n(4,a)}function N(){f=Gt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,g,d,y,O,S,I,j,M,P,A,F,E,C,N]}class xp extends J{constructor(e){super(),K(this,e,Zp,Jp,Y,{})}}function em(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tm(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function nm(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rm(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new Q({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[tm]},$$scope:{ctx:l}}}),o=new Q({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[nm]},$$scope:{ctx:l}}}),f=new Le({}),{c(){e=T("p"),n=k("AADF (annual average daily flow) data from "),h(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),h(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=L(),i=T("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=L(),h(f.$$.fragment)},m(g,d){$(g,e,d),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(g,u,d),$(g,i,d),$(g,a,d),b(f,g,d),c=!0},p(g,d){const y={};d&64&&(y.$$scope={dirty:d,ctx:g}),t.$set(y);const O={};d&64&&(O.$$scope={dirty:d,ctx:g}),o.$set(O)},i(g){c||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(u),p(i),p(a)),v(t),v(o),v(f,g)}}}function lm(l){let e,n,t;return n=new me({props:{$$slots:{default:[rm]},$$scope:{ctx:l}}}),{c(){e=T("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function xr(l){let e,n;return e=new Ee({props:{colorScale:l[1],limits:l[3]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function om(l){let e,n=l[5].location+"",t,r,o,s,u=l[5].year+"",i,a,f,c=l[5].motor_vehicles.toLocaleString()+"",g,d,y,O,S=l[5].year+"",I,j,M,P=l[5].pedal_cycles.toLocaleString()+"",A,F,E,C,N,q=l[5].method+"",R;return{c(){e=T("h2"),t=k(n),r=L(),o=T("p"),s=k("Total motor vehicles ("),i=k(u),a=k(` AADF):
        `),f=T("b"),g=k(c),d=L(),y=T("p"),O=k("Total pedal cycles ("),I=k(S),j=k(` AADF):
        `),M=T("b"),A=k(P),F=L(),E=T("p"),C=k("Count method: "),N=T("b"),R=k(q)},m(D,B){$(D,e,B),w(e,t),$(D,r,B),$(D,o,B),w(o,s),w(o,i),w(o,a),w(o,f),w(f,g),$(D,d,B),$(D,y,B),w(y,O),w(y,I),w(y,j),w(y,M),w(M,A),$(D,F,B),$(D,E,B),w(E,C),w(E,N),w(N,R)},p(D,B){B&32&&n!==(n=D[5].location+"")&&z(t,n),B&32&&u!==(u=D[5].year+"")&&z(i,u),B&32&&c!==(c=D[5].motor_vehicles.toLocaleString()+"")&&z(g,c),B&32&&S!==(S=D[5].year+"")&&z(I,S),B&32&&P!==(P=D[5].pedal_cycles.toLocaleString()+"")&&z(A,P),B&32&&q!==(q=D[5].method+"")&&z(R,q)},d(D){D&&(p(e),p(r),p(o),p(d),p(y),p(F),p(E))}}}function sm(l){let e,n;return e=new fe({props:{$$slots:{default:[om,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function im(l){let e,n;const t=[H(zt),{sourceLayer:zt},{paint:{"circle-color":we(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[sm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ft({props:r}),e.$on("click",fm),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ae(H(zt)),s&0&&{sourceLayer:zt},s&6&&{paint:{"circle-color":we(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function am(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={$$slots:{right:[lm],default:[em]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&xr(l);return o=new be({props:{url:`pmtiles://${he()}/v1/${zt}.pmtiles`,$$slots:{default:[im]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=L(),a&&a.c(),r=L(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=xr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let zt="vehicle_counts";function fm(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function um(l,e,n){let t=x.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class cm extends J{constructor(e){super(),K(this,e,um,am,Y,{})}}function $m(l){let e,n,t,r,o,s,u,i;return e=new ap({}),t=new vp({}),o=new Dp({}),u=new Mp({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,r,f),b(o,a,f),$(a,s,f),b(u,a,f),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function pm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[$m]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function mm(l){let e,n,t,r,o,s,u,i,a,f;return e=new Pu({}),t=new Zu({}),o=new qu({}),u=new Q$({}),a=new L$({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function _m(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[mm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function gm(l){let e,n,t,r,o,s;return e=new bu({}),t=new Kc({}),o=new i$({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function dm(l){let e,n,t,r,o,s,u,i,a,f;return e=new Tf({}),t=new ou({}),o=new Pa({}),u=new ef({}),a=new _f({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function hm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[dm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bm(l){let e,n,t,r;return e=new wa({}),t=new Ga({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function vm(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[bm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wm(l){let e,n,t,r,o,s;return e=new Gc({}),t=new ac({}),o=new Nc({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function km(l){let e,n,t,r,o,s,u,i,a=gn()=="Private (development)",f,c,g,d,y;e=new cm({}),t=new xp({}),o=new kc({}),u=new R$({});let O=a&&wm();return c=new Rf({}),d=new Yf({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),O&&O.c(),f=L(),h(c.$$.fragment),g=L(),h(d.$$.fragment)},m(S,I){b(e,S,I),$(S,n,I),b(t,S,I),$(S,r,I),b(o,S,I),$(S,s,I),b(u,S,I),$(S,i,I),O&&O.m(S,I),$(S,f,I),b(c,S,I),$(S,g,I),b(d,S,I),y=!0},p:ne,i(S){y||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(o.$$.fragment,S),m(u.$$.fragment,S),m(O),m(c.$$.fragment,S),m(d.$$.fragment,S),y=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(o.$$.fragment,S),_(u.$$.fragment,S),_(O),_(c.$$.fragment,S),_(d.$$.fragment,S),y=!1},d(S){S&&(p(n),p(r),p(s),p(i),p(f),p(g)),v(e,S),v(t,S),v(o,S),v(u,S),O&&O.d(S),v(c,S),v(d,S)}}}function ym(l){let e,n;return e=new Xe({props:{small:!0,$$slots:{default:[km]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sm(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new xl({props:u}),U.push(()=>W(e,"enabled",s)),r=new oo({}),{c(){h(e.$$.fragment),t=L(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],V(()=>n=!1)),e.$set(f)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Cm(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,O,S,I,j;return e=new d$({}),t=new je({props:{label:"Trip generators",$$slots:{default:[pm]},$$scope:{ctx:l}}}),o=new je({props:{label:"Existing infrastructure",$$slots:{default:[_m]},$$scope:{ctx:l}}}),u=new je({props:{label:"Public transit",$$slots:{default:[gm]},$$scope:{ctx:l}}}),a=new je({props:{label:"Boundaries",$$slots:{default:[hm]},$$scope:{ctx:l}}}),c=new je({props:{label:"Census",$$slots:{default:[vm]},$$scope:{ctx:l}}}),d=new je({props:{label:"Other",$$slots:{default:[ym]},$$scope:{ctx:l}}}),O=new je({props:{label:"Tools",$$slots:{default:[Sm]},$$scope:{ctx:l}}}),I=new Zl({props:{disabled:!l[1]}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment),f=L(),h(c.$$.fragment),g=L(),h(d.$$.fragment),y=L(),h(O.$$.fragment),S=L(),h(I.$$.fragment)},m(M,P){b(e,M,P),$(M,n,P),b(t,M,P),$(M,r,P),b(o,M,P),$(M,s,P),b(u,M,P),$(M,i,P),b(a,M,P),$(M,f,P),b(c,M,P),$(M,g,P),b(d,M,P),$(M,y,P),b(O,M,P),$(M,S,P),b(I,M,P),j=!0},p(M,P){const A={};P&16&&(A.$$scope={dirty:P,ctx:M}),t.$set(A);const F={};P&16&&(F.$$scope={dirty:P,ctx:M}),o.$set(F);const E={};P&16&&(E.$$scope={dirty:P,ctx:M}),u.$set(E);const C={};P&16&&(C.$$scope={dirty:P,ctx:M}),a.$set(C);const N={};P&16&&(N.$$scope={dirty:P,ctx:M}),c.$set(N);const q={};P&16&&(q.$$scope={dirty:P,ctx:M}),d.$set(q);const R={};P&17&&(R.$$scope={dirty:P,ctx:M}),O.$set(R);const D={};P&2&&(D.disabled=!M[1]),I.$set(D)},i(M){j||(m(e.$$.fragment,M),m(t.$$.fragment,M),m(o.$$.fragment,M),m(u.$$.fragment,M),m(a.$$.fragment,M),m(c.$$.fragment,M),m(d.$$.fragment,M),m(O.$$.fragment,M),m(I.$$.fragment,M),j=!0)},o(M){_(e.$$.fragment,M),_(t.$$.fragment,M),_(o.$$.fragment,M),_(u.$$.fragment,M),_(a.$$.fragment,M),_(c.$$.fragment,M),_(d.$$.fragment,M),_(O.$$.fragment,M),_(I.$$.fragment,M),j=!1},d(M){M&&(p(n),p(r),p(s),p(i),p(f),p(g),p(y),p(S)),v(e,M),v(t,M),v(o,M),v(u,M),v(a,M),v(c,M),v(d,M),v(O,M),v(I,M)}}}function Tm(l){let e,n;const t=[H("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Be({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Om(l){let e,n,t,r;return e=new je({props:{label:"Layers",open:!0,$$slots:{default:[Cm]},$$scope:{ctx:l}}}),t=new bt({props:{data:l[2],$$slots:{default:[Tm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Lm(l,e,n){let t,r;ke(l,cr,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&cr.set(!t)},[t,r,o,s]}class Am extends J{constructor(e){super(),K(this,e,Lm,Om,Y,{})}}function el(l){let e;return{c(){e=T("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Im(l){let e,n=l[0]&&el();return{c(){n&&n.c(),e=Fe()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=el(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(t){t&&p(e),n&&n.d(t)}}}function Mm(l,e,n){let{loadFile:t}=e,r=!0;return Ln(async()=>{let s=await(await fetch(`${on()}/v1/random_schemes.geojson`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class Pm extends J{constructor(e){super(),K(this,e,Mm,Im,Y,{loadFile:1})}}function tl(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function Nm(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fm(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Em(l){let e,n,t,r;return e=new dt({props:{$$slots:{default:[Nm]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new dt({props:{$$slots:{default:[Fm]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Dm(l){var N,q,R,D;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((N=l[0].browse)==null?void 0:N.authority_or_region)+"",a,f,c,g,d=((q=l[0].browse)==null?void 0:q.capital_scheme_id)+"",y,O,S,I,j=((R=l[0].browse)==null?void 0:R.funding_programme)+"",M,P,A,F,E,C=((D=l[0].browse)==null?void 0:D.current_milestone)&&tl(l);return F=new eo({props:{$$slots:{default:[Em]},$$scope:{ctx:l}}}),{c(){e=T("p"),n=k("Scheme reference: "),r=k(t),o=L(),s=T("p"),u=k("Authority or region: "),a=k(i),f=L(),c=T("p"),g=k("Capital scheme ID: "),y=k(d),O=L(),S=T("p"),I=k("Funding programme: "),M=k(j),P=L(),C&&C.c(),A=L(),h(F.$$.fragment)},m(B,X){$(B,e,X),w(e,n),w(e,r),$(B,o,X),$(B,s,X),w(s,u),w(s,a),$(B,f,X),$(B,c,X),w(c,g),w(c,y),$(B,O,X),$(B,S,X),w(S,I),w(S,M),$(B,P,X),C&&C.m(B,X),$(B,A,X),b(F,B,X),E=!0},p(B,X){var oe,ce,Ie,Te;(!E||X&1)&&t!==(t=B[0].scheme_reference+"")&&z(r,t),(!E||X&1)&&i!==(i=((oe=B[0].browse)==null?void 0:oe.authority_or_region)+"")&&z(a,i),(!E||X&1)&&d!==(d=((ce=B[0].browse)==null?void 0:ce.capital_scheme_id)+"")&&z(y,d),(!E||X&1)&&j!==(j=((Ie=B[0].browse)==null?void 0:Ie.funding_programme)+"")&&z(M,j),(Te=B[0].browse)!=null&&Te.current_milestone?C?C.p(B,X):(C=tl(B),C.c(),C.m(A.parentNode,A)):C&&(C.d(1),C=null);const re={};X&32&&(re.$$scope={dirty:X,ctx:B}),F.$set(re)},i(B){E||(m(F.$$.fragment,B),E=!0)},o(B){_(F.$$.fragment,B),E=!1},d(B){B&&(p(e),p(o),p(s),p(f),p(c),p(O),p(S),p(P),p(A)),C&&C.d(B),v(F,B)}}}function jm(l){let e,n;return e=new je({props:{label:`${l[0].scheme_name}`,$$slots:{default:[Dm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Rm(l,e,n){let t,r;ke(l,ht,i=>n(3,t=i)),ke(l,On,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(Xl(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class Bm extends J{constructor(e){super(),K(this,e,Rm,jm,Y,{scheme:0})}}function nl(l){let e,n,t=jn(l[0].length_meters)+"",r;return{c(){e=T("p"),n=k("Length: "),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(e,r)},p(o,s){s&1&&t!==(t=jn(o[0].length_meters)+"")&&z(r,t)},d(o){o&&p(e)}}}function rl(l){let e,n=ot(l[0].description,l[2])+"";return{c(){e=T("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=ot(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function ll(l){var o;let e,n,t=((o=l[1].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=T("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function zm(l){var ze,De,Ce,Qe;let e,n,t,r=ot(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,g,d,y,O,S,I=ot(l[1].scheme_name??"",l[3])+"",j,M,P=ot(l[0].scheme_reference,l[3])+"",A,F,E,C,N=((ze=l[1].browse)==null?void 0:ze.authority_or_region)+"",q,R,D,B,X=((De=l[1].browse)==null?void 0:De.capital_scheme_id)+"",re,oe,ce,Ie,Te=((Ce=l[1].browse)==null?void 0:Ce.funding_programme)+"",ie,Ae,ue=l[0].length_meters&&nl(l),_e=l[0].description&&rl(l),ge=((Qe=l[1].browse)==null?void 0:Qe.current_milestone)&&ll(l);return{c(){e=T("div"),n=T("h2"),t=new Ht(!1),o=k(" ("),u=k(s),i=k(")"),a=L(),ue&&ue.c(),f=L(),_e&&_e.c(),c=L(),g=T("hr"),d=L(),y=T("p"),O=k("Part of scheme: "),S=new Ht(!1),j=k(" ("),M=new Ht(!1),A=k(")"),F=L(),E=T("p"),C=k("Authority or region: "),q=k(N),R=L(),D=T("p"),B=k("Capital scheme ID: "),re=k(X),oe=L(),ce=T("p"),Ie=k("Funding programme: "),ie=k(Te),Ae=L(),ge&&ge.c(),t.a=o,S.a=j,M.a=A,Se(e,"max-width","30vw")},m(se,ve){$(se,e,ve),w(e,n),t.m(r,n),w(n,o),w(n,u),w(n,i),w(e,a),ue&&ue.m(e,null),w(e,f),_e&&_e.m(e,null),w(e,c),w(e,g),w(e,d),w(e,y),w(y,O),S.m(I,y),w(y,j),M.m(P,y),w(y,A),w(e,F),w(e,E),w(E,C),w(E,q),w(e,R),w(e,D),w(D,B),w(D,re),w(e,oe),w(e,ce),w(ce,Ie),w(ce,ie),w(e,Ae),ge&&ge.m(e,null)},p(se,[ve]){var Pn,Nn,Fn,En;ve&5&&r!==(r=ot(se[0].name,se[2])+"")&&t.p(r),ve&1&&s!==(s=se[0].intervention_type+"")&&z(u,s),se[0].length_meters?ue?ue.p(se,ve):(ue=nl(se),ue.c(),ue.m(e,f)):ue&&(ue.d(1),ue=null),se[0].description?_e?_e.p(se,ve):(_e=rl(se),_e.c(),_e.m(e,c)):_e&&(_e.d(1),_e=null),ve&10&&I!==(I=ot(se[1].scheme_name??"",se[3])+"")&&S.p(I),ve&9&&P!==(P=ot(se[0].scheme_reference,se[3])+"")&&M.p(P),ve&2&&N!==(N=((Pn=se[1].browse)==null?void 0:Pn.authority_or_region)+"")&&z(q,N),ve&2&&X!==(X=((Nn=se[1].browse)==null?void 0:Nn.capital_scheme_id)+"")&&z(re,X),ve&2&&Te!==(Te=((Fn=se[1].browse)==null?void 0:Fn.funding_programme)+"")&&z(ie,Te),(En=se[1].browse)!=null&&En.current_milestone?ge?ge.p(se,ve):(ge=ll(se),ge.c(),ge.m(e,null)):ge&&(ge.d(1),ge=null)},i:ne,o:ne,d(se){se&&p(e),ue&&ue.d(),_e&&_e.d(),ge&&ge.d()}}}function ot(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function Hm(l,e,n){let t,r,o,s;ke(l,ln,i=>n(4,r=i)),ke(l,wt,i=>n(2,o=i)),ke(l,kt,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class Mn extends J{constructor(e){super(),K(this,e,Hm,zm,Y,{props:0})}}function qm(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Gm(l){let e,n;return e=new Mn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Um(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[qm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Gm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Wm(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Vm(l){let e,n;return e=new Mn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xm(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Wm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Vm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Ym(l){let e,n=l[6].name+"",t;return{c(){e=T("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Qm(l){let e,n;return e=new Mn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jm(l){let e,n,t,r;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Ym,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Qm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Km(l){let e,n,t,r,o,s,u,i,a,f;const c=[H("interventions-points"),{filter:["all",Rn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":Hn,"circle-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[Um]},$$scope:{ctx:l}};for(let A=0;A<c.length;A+=1)g=ee(g,c[A]);e=new ft({props:g});const d=[H("interventions-lines"),{filter:["all",Bn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":vt,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[Xm]},$$scope:{ctx:l}};for(let A=0;A<d.length;A+=1)y=ee(y,d[A]);t=new ye({props:y});const O=[H("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*vt,"circle-opacity":0,"circle-stroke-color":rt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let S={};for(let A=0;A<O.length;A+=1)S=ee(S,O[A]);o=new ft({props:S});const I=[H("interventions-polygons"),{filter:["all",xt,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":Z(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let j={$$slots:{default:[Jm]},$$scope:{ctx:l}};for(let A=0;A<I.length;A+=1)j=ee(j,I[A]);u=new Be({props:j});const M=[H("interventions-polygons-outlines"),{filter:["all",xt,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*vt}},{layout:{visibility:l[0]?"visible":"none"}}];let P={};for(let A=0;A<M.length;A+=1)P=ee(P,M[A]);return a=new ye({props:P}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),h(o.$$.fragment),s=L(),h(u.$$.fragment),i=L(),h(a.$$.fragment)},m(A,F){b(e,A,F),$(A,n,F),b(t,A,F),$(A,r,F),b(o,A,F),$(A,s,F),b(u,A,F),$(A,i,F),b(a,A,F),f=!0},p(A,F){const E=F&29?te(c,[c[0],F&24&&{filter:["all",Rn,A[3],A[4]]},c[2],c[3],F&4&&{paint:{"circle-color":A[2],"circle-radius":Hn,"circle-opacity":Z(1,.5)}},F&1&&{layout:{visibility:A[0]?"visible":"none"}},c[6]]):{};F&128&&(E.$$scope={dirty:F,ctx:A}),e.$set(E);const C=F&13?te(d,[d[0],F&8&&{filter:["all",Bn,A[3]]},d[2],d[3],F&4&&{paint:{"line-color":A[2],"line-width":vt,"line-opacity":Z(1,.5)}},F&1&&{layout:{visibility:A[0]?"visible":"none"}},d[6]]):{};F&128&&(C.$$scope={dirty:F,ctx:A}),t.$set(C);const N=F&1?te(O,[O[0],O[1],O[2],{layout:{visibility:A[0]?"visible":"none"}}]):{};o.$set(N);const q=F&13?te(I,[I[0],F&8&&{filter:["all",xt,A[3]]},I[2],I[3],F&4&&{paint:{"fill-color":A[2],"fill-opacity":Z(.2,.5)}},F&1&&{layout:{visibility:A[0]?"visible":"none"}},I[6]]):{};F&128&&(q.$$scope={dirty:F,ctx:A}),u.$set(q);const R=F&13?te(M,[M[0],F&8&&{filter:["all",xt,A[3]]},F&4&&{paint:{"line-color":A[2],"line-opacity":.5,"line-width":.7*vt}},F&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};a.$set(R)},i(A){f||(m(e.$$.fragment,A),m(t.$$.fragment,A),m(o.$$.fragment,A),m(u.$$.fragment,A),m(a.$$.fragment,A),f=!0)},o(A){_(e.$$.fragment,A),_(t.$$.fragment,A),_(o.$$.fragment,A),_(u.$$.fragment,A),_(a.$$.fragment,A),f=!1},d(A){A&&(p(n),p(r),p(s),p(i)),v(e,A),v(t,A),v(o,A),v(u,A),v(a,A)}}}function Zm(l){let e,n;return e=new bt({props:{data:l[1],$$slots:{default:[Km]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xm(l,e,n){let t,r;ke(l,ht,a=>n(5,r=a));let{showSchemes:o}=e,[s]=Sn();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=Yl(r))},[o,t,s,u,i,r]}class e_ extends J{constructor(e){super(),K(this,e,xm,Zm,Y,{showSchemes:0})}}function ol(l,e,n){const t=l.slice();return t[13]=e[n],t}function sl(l,e,n){const t=l.slice();return t[16]=e[n],t}function t_(l){let e,n;return e=new Pm({props:{loadFile:l[7]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function il(l){let e,n,t,r,o;e=new dt({props:{$$slots:{default:[n_]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[r_]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new $l({props:u}),U.push(()=>W(t,"open",s)),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],V(()=>r=!1)),t.$set(c)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function n_(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function al(l){let e,n,t=l[16]+"",r;return{c(){e=T("li"),n=T("p"),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&z(r,t)},d(o){o&&p(e)}}}function r_(l){let e,n,t,r,o=Re(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=al(sl(l,o,u));return{c(){e=T("div"),n=T("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=L(),r=T("ul");for(let u=0;u<s.length;u+=1)s[u].c();G(e,"class","govuk-prose")},m(u,i){$(u,e,i),w(e,n),w(e,t),w(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=Re(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=sl(u,o,a);s[a]?s[a].p(f,i):(s[a]=al(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),gt(s,u)}}}function fl(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new Ui({props:u}),U.push(()=>W(e,"schemesToBeShown",o)),U.push(()=>W(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],V(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],V(()=>t=!1)),e.$set(f)},i(i){r||(m(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){v(e,i)}}}function ul(l){let e,n;return e=new Bm({props:{scheme:l[13]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&ul(l);return{c(){r&&r.c(),n=Fe()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&m(r,1)):(r=ul(o),r.c(),m(r,1),r.m(n.parentNode,n)):r&&($e(),_(r,1,1,()=>{r=null}),pe())},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function l_(l){let e,n,t,r,o,s,u,i,a,f,c=gn()=="Private (development)",g,d,y,O,S,I,j,M,P;o=new lo({props:{boundaryGeojson:l[4]}}),a=new Ql({});let A=c&&t_(l),F=l[4].notes&&il(l);y=new no({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),S=new vl({props:{errorMessage:l[0]}});let E=l[6].size>0&&fl(l),C=Re(l[6].values()),N=[];for(let R=0;R<C.length;R+=1)N[R]=cl(ol(l,C,R));const q=R=>_(N[R],1,1,()=>{N[R]=null});return{c(){e=T("div"),n=T("div"),t=T("h1"),t.textContent="Browse schemes",r=L(),h(o.$$.fragment),s=L(),u=T("p"),u.textContent=`App version: ${gn()}`,i=L(),h(a.$$.fragment),f=L(),A&&A.c(),g=L(),F&&F.c(),d=L(),h(y.$$.fragment),O=L(),h(S.$$.fragment),I=L(),E&&E.c(),j=L(),M=T("ul");for(let R=0;R<N.length;R+=1)N[R].c();Se(n,"display","flex"),Se(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(R,D){$(R,e,D),w(e,n),w(n,t),w(n,r),b(o,n,null),w(e,s),w(e,u),w(e,i),b(a,e,null),w(e,f),A&&A.m(e,null),w(e,g),F&&F.m(e,null),w(e,d),b(y,e,null),w(e,O),b(S,e,null),w(e,I),E&&E.m(e,null),w(e,j),w(e,M);for(let B=0;B<N.length;B+=1)N[B]&&N[B].m(M,null);P=!0},p(R,D){const B={};D&16&&(B.boundaryGeojson=R[4]),o.$set(B),c&&A.p(R,D),R[4].notes?F?(F.p(R,D),D&16&&m(F,1)):(F=il(R),F.c(),m(F,1),F.m(e,d)):F&&($e(),_(F,1,1,()=>{F=null}),pe());const X={};if(D&1&&(X.errorMessage=R[0]),S.$set(X),R[6].size>0?E?(E.p(R,D),D&64&&m(E,1)):(E=fl(R),E.c(),m(E,1),E.m(e,j)):E&&($e(),_(E,1,1,()=>{E=null}),pe()),D&66){C=Re(R[6].values());let re;for(re=0;re<C.length;re+=1){const oe=ol(R,C,re);N[re]?(N[re].p(oe,D),m(N[re],1)):(N[re]=cl(oe),N[re].c(),m(N[re],1),N[re].m(M,null))}for($e(),re=C.length;re<N.length;re+=1)q(re);pe()}},i(R){if(!P){m(o.$$.fragment,R),m(a.$$.fragment,R),m(A),m(F),m(y.$$.fragment,R),m(S.$$.fragment,R),m(E);for(let D=0;D<C.length;D+=1)m(N[D]);P=!0}},o(R){_(o.$$.fragment,R),_(a.$$.fragment,R),_(A),_(F),_(y.$$.fragment,R),_(S.$$.fragment,R),_(E),N=N.filter(Boolean);for(let D=0;D<N.length;D+=1)_(N[D]);P=!1},d(R){R&&p(e),v(o),v(a),A&&A.d(),F&&F.d(),v(y),v(S),E&&E.d(),gt(N,R)}}}function o_(l){let e,n,t,r,o,s,u;return e=new to({}),t=new e_({props:{showSchemes:l[2]}}),s=new Am({}),{c(){h(e.$$.fragment),n=L(),h(t.$$.fragment),r=L(),o=T("div"),h(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),$(i,o,a),b(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),v(s)}}}function s_(l){let e,n,t;return n=new Jl({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[o_]},$$scope:{ctx:l}}}),{c(){e=T("div"),h(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function i_(l){let e,n;return e=new so({props:{$$slots:{main:[s_],sidebar:[l_]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function a_(l,e,n){let t,r,o;ke(l,ht,S=>n(4,t=S)),ke(l,zn,S=>n(5,r=S)),ke(l,ln,S=>n(6,o=S)),Ln(()=>{Kl()});const s=new URLSearchParams(window.location.search);zn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(S){try{ht.set(JSON.parse(S)),ln.set(Si(t)),n(0,u="")}catch(I){n(0,u=`The file you loaded is broken: ${I}`)}}const g=()=>n(3,f=!0);function d(S){f=S,n(3,f)}function y(S){i=S,n(1,i)}function O(S){a=S,n(2,a)}return[u,i,a,f,t,r,o,c,g,d,y,O]}class f_ extends J{constructor(e){super(),K(this,e,a_,i_,Y,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new f_({target:document.getElementById("app")});
