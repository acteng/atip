import{S as X,i as x,s as Q,e as T,d as F,b as ee,f as g,q as Z,j as d,G as $t,a as C,ao as qn,g as p,a3 as mt,H as _t,I as gt,J as dt,t as m,h as _,A as _e,v as ge,y as qe,c as w,l as L,m as b,z as q,k as v,D as he,ap as un,x as Y,E as Mn,F as pt,aq as Nr,r as B,u as U,w as W,a5 as Yt,P as ne,ak as _n,ag as Zt,N as Se,Q as le,R as oe,ad as Kt,a2 as tt,a4 as Pr,ar as Et,o as Ar,as as xr,an as eo,aj as yn,n as to}from"./stores-b221a5b6.js";import{e as $e,z as Sn,S as Be,G as ce,R as On,H as xt,I as no,M as lo,o as Tn,j as zn,f as ro,s as oo,h as so,J as Rr,F as io,E as ao}from"./files-b61f28dc.js";import{c as z,d as nt,t as fo,a as Ee,C as De,e as we,S as st,p as Hn,f as En,h as Vt,g as uo,m as Bn}from"./colors-9777e399.js";import{e as Un,h as rt,M as co,b as Dr,H as po,R as $o,f as Xe,C as Bt,d as mo,c as Wn,a as Yn,i as sn,W as gn,B as _o,S as go,G as ho}from"./WarningIcon-b6f9ff66.js";import{g as jn,u as Gr,r as Fr,b as qr,c as zr,e as wo,G as Ut,a as de,d as bo,E as re,h as te,F as ze,f as vo,i as ko,j as yo,A as So,L as To,M as Lo}from"./MapLibreMap-cb28518e.js";import{P as ie,A as Hr}from"./Popup-d3bd9202.js";import{D as Co}from"./DefaultButton-02dbbd38.js";import{H as Io}from"./Header-28aaef1f.js";function Mo(o){let e;return{c(){e=T("span"),F(e,"class","svelte-kzgqtg"),ee(e,"background",o[0])},m(n,t){g(n,e,t)},p(n,[t]){t&1&&ee(e,"background",n[0])},i:Z,o:Z,d(n){n&&d(e)}}}function Oo(o,e,n){let{color:t}=e;return o.$$set=l=>{"color"in l&&n(0,t=l.color)},[t]}class Te extends X{constructor(e){super(),x(this,e,Oo,Mo,Q,{color:0})}}const jo=o=>({}),Jn=o=>({}),No=o=>({}),Vn=o=>({});function Po(o){let e,n,t,l,r,s,f,i,a,u,c;const $=o[4].sidebar,h=$t($,o,o[3],Vn),k=o[4].main,S=$t(k,o,o[3],Jn);return{c(){e=T("div"),n=T("aside"),t=T("div"),h&&h.c(),l=C(),r=T("button"),r.textContent="→",f=C(),i=T("main"),S&&S.c(),F(t,"class","sidebar-content content-container svelte-1n0etgd"),F(r,"type","button"),F(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),F(n,"class",s=qn(o[1]?"":"collapsed")+" svelte-1n0etgd"),ee(n,"--sidebarWidth",o[0]),F(i,"class","svelte-1n0etgd"),F(e,"class","overall-layout svelte-1n0etgd")},m(y,O){g(y,e,O),p(e,n),p(n,t),h&&h.m(t,null),p(n,l),p(n,r),p(e,f),p(e,i),S&&S.m(i,null),a=!0,u||(c=mt(r,"click",o[2]),u=!0)},p(y,[O]){h&&h.p&&(!a||O&8)&&_t(h,$,y,y[3],a?dt($,y[3],O,No):gt(y[3]),Vn),(!a||O&2&&s!==(s=qn(y[1]?"":"collapsed")+" svelte-1n0etgd"))&&F(n,"class",s),(!a||O&1)&&ee(n,"--sidebarWidth",y[0]),S&&S.p&&(!a||O&8)&&_t(S,k,y,y[3],a?dt(k,y[3],O,jo):gt(y[3]),Jn)},i(y){a||(m(h,y),m(S,y),a=!0)},o(y){_(h,y),_(S,y),a=!1},d(y){y&&d(e),h&&h.d(y),S&&S.d(y),u=!1,c()}}}function Ao(o,e,n){let{$$slots:t={},$$scope:l}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){n(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&n(0,r=i.sidebarWidth),"$$scope"in i&&n(3,l=i.$$scope)},[r,s,f,l,t]}class Ro extends X{constructor(e){super(),x(this,e,Ao,Po,Q,{sidebarWidth:0})}}function Qn(o,e,n){const t=o.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Zn(o){let e,n,t,l=o[1]+"",r,s,f;return n=new Te({props:{color:o[2]}}),{c(){e=T("li"),w(n.$$.fragment),t=C(),r=L(l),s=C()},m(i,a){g(i,e,a),b(n,e,null),p(e,t),p(e,r),p(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),n.$set(u),(!f||a&1)&&l!==(l=i[1]+"")&&q(r,l)},i(i){f||(m(n.$$.fragment,i),f=!0)},o(i){_(n.$$.fragment,i),f=!1},d(i){i&&d(e),v(n)}}}function Do(o){let e,n,t=$e(o[0]),l=[];for(let s=0;s<t.length;s+=1)l[s]=Zn(Qn(o,t,s));const r=s=>_(l[s],1,1,()=>{l[s]=null});return{c(){e=T("ul");for(let s=0;s<l.length;s+=1)l[s].c()},m(s,f){g(s,e,f);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);n=!0},p(s,[f]){if(f&1){t=$e(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Qn(s,t,i);l[i]?(l[i].p(a,f),m(l[i],1)):(l[i]=Zn(a),l[i].c(),m(l[i],1),l[i].m(e,null))}for(_e(),i=t.length;i<l.length;i+=1)r(i);ge()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)_(l[f]);n=!1},d(s){s&&d(e),qe(l,s)}}}function Go(o,e,n){let{rows:t}=e;return o.$$set=l=>{"rows"in l&&n(0,t=l.rows)},[t]}class Wt extends X{constructor(e){super(),x(this,e,Go,Do,Q,{rows:0})}}function Kn(o){let e=o[0],n,t,l=Xn(o);return{c(){l.c(),n=he()},m(r,s){l.m(r,s),g(r,n,s),t=!0},p(r,s){s&1&&Q(e,e=r[0])?(_e(),_(l,1,1,Z),ge(),l=Xn(r),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(r,s)},i(r){t||(m(l),t=!0)},o(r){_(l),t=!1},d(r){r&&d(n),l.d(r)}}}function Xn(o){let e;const n=o[17].default,t=$t(n,o,o[16],null);return{c(){t&&t.c()},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&65536)&&_t(t,n,l,l[16],e?dt(n,l[16],r,null):gt(l[16]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Fo(o){let e,n,t=o[0]&&Kn(o);return{c(){t&&t.c(),e=he()},m(l,r){t&&t.m(l,r),g(l,e,r),n=!0},p(l,[r]){l[0]?t?(t.p(l,r),r&1&&m(t,1)):(t=Kn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(_e(),_(t,1,1,()=>{t=null}),ge())},i(l){n||(m(t),n=!0)},o(l){_(t),n=!1},d(l){l&&d(e),t&&t.d(l)}}}function qo(o,e,n){let t,l,{$$slots:r={},$$scope:s}=e,{id:f=jn("raster-source")}=e,{tiles:i=void 0}=e,{tileSize:a=void 0}=e,{url:u=void 0}=e,{bounds:c=null}=e,{scheme:$=null}=e,{attribution:h=null}=e,{minzoom:k=null}=e,{maxzoom:S=null}=e,{volatile:y=null}=e;if(u&&u.includes("pmtiles://")&&!un.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let M=new Nr;un.addProtocol("pmtiles",M.tile)}const{map:O,self:I}=Gr();Y(o,O,M=>n(15,l=M)),Y(o,I,M=>n(0,t=M));let N,P=!0;return Mn(()=>{t&&N&&l&&(Fr(O,t,N),pt(I,t=null,t),n(13,N=void 0))}),o.$$set=M=>{"id"in M&&n(3,f=M.id),"tiles"in M&&n(4,i=M.tiles),"tileSize"in M&&n(5,a=M.tileSize),"url"in M&&n(6,u=M.url),"bounds"in M&&n(7,c=M.bounds),"scheme"in M&&n(8,$=M.scheme),"attribution"in M&&n(9,h=M.attribution),"minzoom"in M&&n(10,k=M.minzoom),"maxzoom"in M&&n(11,S=M.maxzoom),"volatile"in M&&n(12,y=M.volatile),"$$scope"in M&&n(16,s=M.$$scope)},o.$$.update=()=>{o.$$.dirty&49145&&l&&t!==f&&(pt(I,t=f,t),qr(l,t,zr({type:"raster",tiles:i,tileSize:a,url:u,bounds:c,scheme:$,attribution:h,minzoom:k,maxzoom:S,volatile:y}),M=>l&&M===t,()=>{t&&(n(13,N=l==null?void 0:l.getSource(t)),n(14,P=!0))})),o.$$.dirty&32776&&(l==null||l.on("style.load",()=>{n(13,N=l==null?void 0:l.getSource(f))})),o.$$.dirty&24656&&N&&(P?n(14,P=!1):i?N.setTiles(i):N.setUrl(u))},[t,O,I,f,i,a,u,c,$,h,k,S,y,N,P,l,s,r]}class zo extends X{constructor(e){super(),x(this,e,qo,Fo,Q,{id:3,tiles:4,tileSize:5,url:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function Ho(o){let e;const n=o[16].default,t=$t(n,o,o[24],null);return{c(){t&&t.c()},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&16777216)&&_t(t,n,l,l[24],e?dt(n,l[24],r,null):gt(l[24]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Eo(o){let e,n,t;function l(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[Ho]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new wo({props:r}),B.push(()=>U(e,"hovered",l)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!n&&f&1&&(n=!0,i.hovered=s[0],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Bo(o,e,n){let{$$slots:t={},$$scope:l}=e,{id:r=jn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:$=void 0}=e,{applyToClusters:h=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:y=void 0}=e,{manageHoverState:O=!1}=e,{hovered:I=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:P=!0}=e;function M(G){I=G,n(0,I)}function j(G){Yt.call(this,o,G)}function A(G){Yt.call(this,o,G)}function R(G){Yt.call(this,o,G)}function H(G){Yt.call(this,o,G)}function J(G){Yt.call(this,o,G)}function ae(G){Yt.call(this,o,G)}return o.$$set=G=>{"id"in G&&n(1,r=G.id),"source"in G&&n(2,s=G.source),"sourceLayer"in G&&n(3,f=G.sourceLayer),"beforeId"in G&&n(4,i=G.beforeId),"beforeLayerType"in G&&n(5,a=G.beforeLayerType),"paint"in G&&n(6,u=G.paint),"layout"in G&&n(7,c=G.layout),"filter"in G&&n(8,$=G.filter),"applyToClusters"in G&&n(9,h=G.applyToClusters),"minzoom"in G&&n(10,k=G.minzoom),"maxzoom"in G&&n(11,S=G.maxzoom),"hoverCursor"in G&&n(12,y=G.hoverCursor),"manageHoverState"in G&&n(13,O=G.manageHoverState),"hovered"in G&&n(0,I=G.hovered),"eventsIfTopMost"in G&&n(14,N=G.eventsIfTopMost),"interactive"in G&&n(15,P=G.interactive),"$$scope"in G&&n(24,l=G.$$scope)},[I,r,s,f,i,a,u,c,$,h,k,S,y,O,N,P,t,M,j,A,R,H,J,ae,l]}class Nn extends X{constructor(e){super(),x(this,e,Bo,Eo,Q,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function xn(o){let e=o[0],n,t,l=el(o);return{c(){l.c(),n=he()},m(r,s){l.m(r,s),g(r,n,s),t=!0},p(r,s){s&1&&Q(e,e=r[0])?(_e(),_(l,1,1,Z),ge(),l=el(r),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(r,s)},i(r){t||(m(l),t=!0)},o(r){_(l),t=!1},d(r){r&&d(n),l.d(r)}}}function el(o){let e;const n=o[15].default,t=$t(n,o,o[14],null);return{c(){t&&t.c()},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&16384)&&_t(t,n,l,l[14],e?dt(n,l[14],r,null):gt(l[14]),null)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function Uo(o){let e,n,t=o[0]&&xn(o);return{c(){t&&t.c(),e=he()},m(l,r){t&&t.m(l,r),g(l,e,r),n=!0},p(l,[r]){l[0]?t?(t.p(l,r),r&1&&m(t,1)):(t=xn(l),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(_e(),_(t,1,1,()=>{t=null}),ge())},i(l){n||(m(t),n=!0)},o(l){_(t),n=!1},d(l){l&&d(e),t&&t.d(l)}}}function Wo(o,e,n){let t,l,{$$slots:r={},$$scope:s}=e,{id:f=jn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:$=null}=e,{attribution:h=null}=e,{minzoom:k=null}=e,{maxzoom:S=null}=e,{volatile:y=null}=e;if(i&&i.includes("pmtiles://")&&!un.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let P=new Nr;un.addProtocol("pmtiles",P.tile)}const{map:O,self:I}=Gr();Y(o,O,P=>n(13,l=P)),Y(o,I,P=>n(0,t=P));let N;return Mn(()=>{t&&l&&(Fr(O,t,N),pt(I,t=null,t),N=void 0)}),o.$$set=P=>{"id"in P&&n(3,f=P.id),"url"in P&&n(4,i=P.url),"tiles"in P&&n(5,a=P.tiles),"promoteId"in P&&n(6,u=P.promoteId),"bounds"in P&&n(7,c=P.bounds),"scheme"in P&&n(8,$=P.scheme),"attribution"in P&&n(9,h=P.attribution),"minzoom"in P&&n(10,k=P.minzoom),"maxzoom"in P&&n(11,S=P.maxzoom),"volatile"in P&&n(12,y=P.volatile),"$$scope"in P&&n(14,s=P.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&l&&t!==f&&(pt(I,t=f,t),qr(l,t,zr({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:$,attribution:h,minzoom:k,maxzoom:S,volatile:y}),P=>l&&P===t,()=>{t&&(N=l==null?void 0:l.getSource(t))})),o.$$.dirty&8200&&(l==null||l.on("style.load",()=>{N=l==null?void 0:l.getSource(f)}))},[t,O,I,f,i,a,u,c,$,h,k,S,y,l,s,r]}class pe extends X{constructor(e){super(),x(this,e,Wo,Uo,Q,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function tl(o,e,n){const t=o.slice();return t[11]=e[n],t[12]=e,t[13]=n,t}function Yo(o){let e,n,t;return n=new Be({props:{$$slots:{default:[Vo]},$$scope:{ctx:o}}}),n.$on("click",o[9]),{c(){e=T("div"),w(n.$$.fragment)},m(l,r){g(l,e,r),b(n,e,null),t=!0},p(l,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function Jo(o){let e,n,t,l,r,s,f,i,a,u;n=new Be({props:{$$slots:{default:[Qo]},$$scope:{ctx:o}}}),n.$on("click",o[4]);let c=o[2]&&nl(o);r=new rt({props:{label:"Help",$$slots:{default:[Zo]},$$scope:{ctx:o}}}),f=new bo({}),f.$on("click",o[3]);let $=$e(o[0]),h=[];for(let S=0;S<$.length;S+=1)h[S]=ll(tl(o,$,S));const k=S=>_(h[S],1,1,()=>{h[S]=null});return{c(){e=T("div"),w(n.$$.fragment),t=C(),c&&c.c(),l=C(),w(r.$$.fragment),s=C(),w(f.$$.fragment),i=C();for(let S=0;S<h.length;S+=1)h[S].c();a=he()},m(S,y){g(S,e,y),b(n,e,null),g(S,t,y),c&&c.m(S,y),g(S,l,y),b(r,S,y),g(S,s,y),b(f,S,y),g(S,i,y);for(let O=0;O<h.length;O+=1)h[O]&&h[O].m(S,y);g(S,a,y),u=!0},p(S,y){const O={};y&16384&&(O.$$scope={dirty:y,ctx:S}),n.$set(O),S[2]?c?c.p(S,y):(c=nl(S),c.c(),c.m(l.parentNode,l)):c&&(c.d(1),c=null);const I={};if(y&16384&&(I.$$scope={dirty:y,ctx:S}),r.$set(I),y&65){$=$e(S[0]);let N;for(N=0;N<$.length;N+=1){const P=tl(S,$,N);h[N]?(h[N].p(P,y),m(h[N],1)):(h[N]=ll(P),h[N].c(),m(h[N],1),h[N].m(a.parentNode,a))}for(_e(),N=$.length;N<h.length;N+=1)k(N);ge()}},i(S){if(!u){m(n.$$.fragment,S),m(r.$$.fragment,S),m(f.$$.fragment,S);for(let y=0;y<$.length;y+=1)m(h[y]);u=!0}},o(S){_(n.$$.fragment,S),_(r.$$.fragment,S),_(f.$$.fragment,S),h=h.filter(Boolean);for(let y=0;y<h.length;y+=1)_(h[y]);u=!1},d(S){S&&(d(e),d(t),d(l),d(s),d(i),d(a)),v(n),c&&c.d(S),v(r,S),v(f,S),qe(h,S)}}}function Vo(o){let e;return{c(){e=L("Measure lines")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Qo(o){let e;return{c(){e=L("Stop measuring")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function nl(o){let e,n,t=o[2].toFixed(2)+"",l,r;return{c(){e=T("p"),n=L("Length: "),l=L(t),r=L(" meters")},m(s,f){g(s,e,f),p(e,n),p(e,l),p(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&q(l,t)},d(s){s&&d(e)}}}function Zo(o){let e;return{c(){e=T("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(n,t){g(n,e,t)},p:Z,d(n){n&&d(e)}}}function Ko(o){let e,n;return{c(){e=T("span"),n=C(),F(e,"class","dot svelte-1tzt432")},m(t,l){g(t,e,l),g(t,n,l)},p:Z,d(t){t&&(d(e),d(n))}}}function ll(o){let e,n,t;function l(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[Ko]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new co({props:s}),B.push(()=>U(e,"lngLat",l)),e.$on("click",r),{c(){w(e.$$.fragment)},m(f,i){b(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!n&&i&1&&(n=!0,a.lngLat=o[11],W(()=>n=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){_(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function Xo(o){let e,n;const t=[z("measurement-line"),{paint:{"line-color":nt.measuringLine,"line-width":5}}];let l={};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new de({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f={};e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function xo(o){let e,n,t,l,r,s,f;const i=[Jo,Yo],a=[];function u(c,$){return c[1]?0:1}return e=u(o),n=a[e]=i[e](o),l=new Ut({props:{data:o[0].length<2?Un():Sn(o[0]),$$slots:{default:[Xo]},$$scope:{ctx:o}}}),{c(){n.c(),t=C(),w(l.$$.fragment)},m(c,$){a[e].m(c,$),g(c,t,$),b(l,c,$),r=!0,s||(f=mt(window,"keydown",o[5]),s=!0)},p(c,[$]){let h=e;e=u(c),e===h?a[e].p(c,$):(_e(),_(a[h],1,1,()=>{a[h]=null}),ge(),n=a[e],n?n.p(c,$):(n=a[e]=i[e](c),n.c()),m(n,1),n.m(t.parentNode,t));const k={};$&1&&(k.data=c[0].length<2?Un():Sn(c[0])),$&16384&&(k.$$scope={dirty:$,ctx:c}),l.$set(k)},i(c){r||(m(n),m(l.$$.fragment,c),r=!0)},o(c){_(n),_(l.$$.fragment,c),r=!1},d(c){c&&d(t),a[e].d(c),v(l,c),s=!1,f()}}}function es(o,e,n){let t,l=!1,r=[];function s(k){return k.length<2?null:1e3*fo(Sn(k),{units:"kilometers"})}function f(k){n(0,r=[...r,k.detail.lngLat.toArray()])}function i(){n(1,l=!1),n(0,r=[])}function a(k){l&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),n(0,r)}function c(k,S,y,O){y[O]=k,n(0,r)}const $=k=>u(k),h=()=>n(1,l=!0);return o.$$.update=()=>{o.$$.dirty&1&&n(2,t=s(r))},[r,l,t,f,i,a,u,c,$,h]}class ts extends X{constructor(e){super(),x(this,e,es,xo,Q,{})}}const ns="/atip/route_snapper_next_gen/assets/zoom_out_map-b2e1091a.svg";function ls(o){let e,n;return{c(){e=T("img"),Zt(e.src,n=ns)||F(e,"src",n),F(e,"alt","Zoom to show entire boundary")},m(t,l){g(t,e,l)},p:Z,d(t){t&&d(e)}}}function rs(o){let e,n;return e=new Be({props:{title:"Zoom to show entire boundary",$$slots:{default:[ls]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const r={};l&8&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function os(o,e,n){let t;Y(o,_n,s=>n(2,t=s));let{boundaryGeojson:l}=e;function r(){let s=Dr(l);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&n(1,l=s.boundaryGeojson)},[r,l]}class ss extends X{constructor(e){super(),x(this,e,os,rs,Q,{boundaryGeojson:1})}}const V={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},rights_of_way:{footpath:"red",bridleway:"green",restricted_byway:"blue",boat:"orange"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Ge=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function is(o){let e;return{c(){e=L(`Open Government License
  `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function as(o){let e,n,t,l,r;return t=new re({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[is]},$$scope:{ctx:o}}}),{c(){e=T("p"),n=L("License: "),w(t.$$.fragment),l=L(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,f){g(s,e,f),p(e,n),b(t,e,null),p(e,l),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){_(t.$$.fragment,s),r=!1},d(s){s&&d(e),v(t)}}}class Le extends X{constructor(e){super(),x(this,e,null,as,Q,{})}}function rl(o,e,n){const t=o.slice();return t[2]=e[n],t}function ol(o,e,n){const t=o.slice();return t[5]=e[n],t}function sl(o){let e,n;return{c(){e=T("span"),n=L(` 
    `),ee(e,"background",o[5]),ee(e,"width","100%"),ee(e,"border","1px solid black")},m(t,l){g(t,e,l),p(e,n)},p(t,l){l&1&&ee(e,"background",t[5])},d(t){t&&d(e)}}}function il(o){let e,n=o[2]+"",t;return{c(){e=T("span"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&2&&n!==(n=l[2]+"")&&q(t,n)},d(l){l&&d(e)}}}function fs(o){let e,n,t,l=$e(o[0]),r=[];for(let i=0;i<l.length;i+=1)r[i]=sl(ol(o,l,i));let s=$e(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=il(rl(o,s,i));return{c(){e=T("div");for(let i=0;i<r.length;i+=1)r[i].c();n=C(),t=T("div");for(let i=0;i<f.length;i+=1)f[i].c();ee(e,"display","flex"),ee(t,"display","flex"),ee(t,"justify-content","space-between")},m(i,a){g(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);g(i,n,a),g(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){l=$e(i[0]);let u;for(u=0;u<l.length;u+=1){const c=ol(i,l,u);r[u]?r[u].p(c,a):(r[u]=sl(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=l.length}if(a&2){s=$e(i[1]);let u;for(u=0;u<s.length;u+=1){const c=rl(i,s,u);f[u]?f[u].p(c,a):(f[u]=il(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:Z,o:Z,d(i){i&&(d(e),d(n),d(t)),qe(r,i),qe(f,i)}}}function us(o,e,n){let{colorScale:t}=e,{limits:l}=e;return o.$$set=r=>{"colorScale"in r&&n(0,t=r.colorScale),"limits"in r&&n(1,l=r.limits)},[t,l]}class Ue extends X{constructor(e){super(),x(this,e,us,fs,Q,{colorScale:0,limits:1})}}function ue(o){let e=new URLSearchParams(window.location.search).has(o),n=Se(e);return n.subscribe(t=>{let l=new URL(window.location.href);t?l.searchParams.set(o,"1"):l.searchParams.delete(o),window.history.replaceState(null,"",l.toString())}),n}function wt(o,e,n,t){let l=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{l=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Se(l);return s.subscribe(f=>{let i=new URL(window.location.href),a=n(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),window.history.replaceState(null,"",i.toString())}),s}let Ln=Se(new Map),Qt=Se(new Set);const cs=o=>({}),al=o=>({}),ps=o=>({}),fl=o=>({}),$s=o=>({}),ul=o=>({});function ms(o){let e;return{c(){e=L(o[2])},m(n,t){g(n,e,t)},p(n,t){t&4&&q(e,n[2])},d(n){n&&d(e)}}}function _s(o){let e,n,t;const l=o[7].icon,r=$t(l,o,o[10],ul);return{c(){r&&r.c(),e=C(),n=L(o[2])},m(s,f){r&&r.m(s,f),g(s,e,f),g(s,n,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&_t(r,l,s,s[10],t?dt(l,s[10],f,$s):gt(s[10]),ul),(!t||f&4)&&q(n,s[2])},i(s){t||(m(r,s),t=!0)},o(s){_(r,s),t=!1},d(s){s&&(d(e),d(n)),r&&r.d(s)}}}function gs(o){let e;const n=o[7].help,t=$t(n,o,o[10],fl);return{c(){t&&t.c()},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&1024)&&_t(t,n,l,l[10],e?dt(n,l[10],r,ps):gt(l[10]),fl)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function ds(o){let e;return{c(){e=L("X")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function hs(o){let e,n,t,l,r,s,f,i,a;function u($){o[8]($)}let c={$$slots:{default:[_s]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),n=new Ee({props:c}),B.push(()=>U(n,"checked",u)),s=new po({props:{$$slots:{default:[gs]},$$scope:{ctx:o}}}),i=new Be({props:{$$slots:{default:[ds]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=T("div"),w(n.$$.fragment),l=C(),r=T("span"),w(s.$$.fragment),f=C(),w(i.$$.fragment),ee(e,"display","flex"),ee(e,"justify-content","space-between")},m($,h){g($,e,h),b(n,e,null),p(e,l),p(e,r),b(s,r,null),p(r,f),b(i,r,null),a=!0},p($,h){const k={};h&1028&&(k.$$scope={dirty:h,ctx:$}),!t&&h&1&&(t=!0,k.checked=$[0],W(()=>t=!1)),n.$set(k);const S={};h&1024&&(S.$$scope={dirty:h,ctx:$}),s.$set(S);const y={};h&1024&&(y.$$scope={dirty:h,ctx:$}),i.$set(y)},i($){a||(m(n.$$.fragment,$),m(s.$$.fragment,$),m(i.$$.fragment,$),a=!0)},o($){_(n.$$.fragment,$),_(s.$$.fragment,$),_(i.$$.fragment,$),a=!1},d($){$&&d(e),v(n),v(s),v(i)}}}function cl(o){let e;const n=o[7].controls,t=$t(n,o,o[10],al);return{c(){t&&t.c()},m(l,r){t&&t.m(l,r),e=!0},p(l,r){t&&t.p&&(!e||r&1024)&&_t(t,n,l,l[10],e?dt(n,l[10],r,cs):gt(l[10]),al)},i(l){e||(m(t,l),e=!0)},o(l){_(t,l),e=!1},d(l){t&&t.d(l)}}}function ws(o){let e,n,t,l,r,s;e=new Ee({props:{checked:o[4].has(o[1]),$$slots:{default:[ms]},$$scope:{ctx:o}}}),e.$on("change",o[5]),l=new De({props:{small:!0,$$slots:{default:[hs]},$$scope:{ctx:o}}});let f=o[0]&&cl(o);return{c(){w(e.$$.fragment),n=C(),t=T("div"),w(l.$$.fragment),r=C(),f&&f.c()},m(i,a){b(e,i,a),g(i,n,a),g(i,t,a),b(l,t,null),p(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),l.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=cl(i),f.c(),m(f,1),f.m(t,null)):f&&(_e(),_(f,1,1,()=>{f=null}),ge())},i(i){s||(m(e.$$.fragment,i),m(l.$$.fragment,i),m(f),s=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),_(f),s=!1},d(i){i&&(d(n),d(t)),v(e,i),v(l),f&&f.d(),o[9](null)}}}function bs(o,e,n){let t;Y(o,Qt,k=>n(4,t=k));let{$$slots:l={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),Qt.set(t));let a=null;Mn(()=>{Ln.update(k=>(k.delete(s),k))});function u(){Qt.update(k=>(k.has(s)?(k.delete(s),n(0,i=!1)):(k.add(s),n(0,i=!0)),k))}function c(){t.delete(s),Qt.set(t),n(0,i=!1)}function $(k){i=k,n(0,i)}function h(k){B[k?"unshift":"push"](()=>{a=k,n(3,a),n(1,s)})}return o.$$set=k=>{"name"in k&&n(1,s=k.name),"title"in k&&n(2,f=k.title),"show"in k&&n(0,i=k.show),"$$scope"in k&&n(10,r=k.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&Ln.update(k=>(n(3,a.style.display="none",a),k.set(s,a),k))},[i,s,f,a,t,u,c,l,$,h,r]}class fe extends X{constructor(e){super(),x(this,e,bs,ws,Q,{name:1,title:2,show:0})}}function pl(o){const e=o[7].OA21CD;o[8]=e;const n=o[7][o[0].kind];o[9]=n}function vs(o){let e,n,t,l,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ss]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ts]},$$scope:{ctx:o}}}),{c(){e=T("p"),n=L("Population density data is from the 2021 census, via "),w(t.$$.fragment),l=L(". Output area boundaries from "),w(r.$$.fragment),s=L(".")},m(i,a){g(i,e,a),p(e,n),b(t,e,null),p(e,l),b(r,e,null),p(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&d(e),v(t),v(r)}}}function ks(o){let e,n,t,l,r,s,f,i,a;return r=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ls]},$$scope:{ctx:o}}}),f=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Cs]},$$scope:{ctx:o}}}),{c(){e=T("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=C(),t=T("p"),l=L("Car/van availability data is from the 2021 census, via "),w(r.$$.fragment),s=L(". Output area boundaries from "),w(f.$$.fragment),i=L(".")},m(u,c){g(u,e,c),g(u,n,c),g(u,t,c),p(t,l),b(r,t,null),p(t,s),b(f,t,null),p(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){_(r.$$.fragment,u),_(f.$$.fragment,u),a=!1},d(u){u&&(d(e),d(n),d(t)),v(r),v(f)}}}function ys(o){let e,n,t,l,r,s,f;return t=new re({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Is]},$$scope:{ctx:o}}}),r=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ms]},$$scope:{ctx:o}}}),{c(){e=T("p"),n=L("Car/van availability data is from the 2021 census, via "),w(t.$$.fragment),l=L(". Output area boundaries from "),w(r.$$.fragment),s=L(".")},m(i,a){g(i,e,a),p(e,n),b(t,e,null),p(e,l),b(r,e,null),p(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&d(e),v(t),v(r)}}}function Ss(o){let e;return{c(){e=L(`NOMIS TS006
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ts(o){let e;return{c(){e=L(`ONS Geography
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ls(o){let e;return{c(){e=L(`NOMIS TS045
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Cs(o){let e;return{c(){e=L(`ONS Geography
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Is(o){let e;return{c(){e=L(`NOMIS TS045
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ms(o){let e;return{c(){e=L(`ONS Geography
        `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Os(o){let e,n,t,l,r,s;const f=[ys,ks,vs],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return n=a(o),t=i[n]=f[n](o),r=new Le({}),{c(){e=T("span"),t.c(),l=C(),w(r.$$.fragment),F(e,"slot","help")},m(u,c){g(u,e,c),i[n].m(e,null),p(e,l),b(r,e,null),s=!0},p(u,c){let $=n;n=a(u),n!==$&&(_e(),_(i[$],1,1,()=>{i[$]=null}),ge(),t=i[n],t||(t=i[n]=f[n](u),t.c()),m(t,1),t.m(e,l))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){_(t),_(r.$$.fragment,u),s=!1},d(u){u&&d(e),i[n].d(),v(r)}}}function js(o){let e,n,t,l;return t=new Ue({props:{colorScale:o[1],limits:ht(o[0].kind).map($l)}}),{c(){e=T("p"),e.textContent="(people per square kilometres)",n=C(),w(t.$$.fragment)},m(r,s){g(r,e,s),g(r,n,s),b(t,r,s),l=!0},p(r,s){const f={};s&1&&(f.limits=ht(r[0].kind).map($l)),t.$set(f)},i(r){l||(m(t.$$.fragment,r),l=!0)},o(r){_(t.$$.fragment,r),l=!1},d(r){r&&(d(e),d(n)),v(t,r)}}}function Ns(o){let e,n;return e=new Ue({props:{colorScale:o[1],limits:ht(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&1&&(r.limits=ht(t[0].kind)),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ps(o){let e,n;return e=new Ue({props:{colorScale:o[1],limits:ht(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&1&&(r.limits=ht(t[0].kind)),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function As(o){let e,n,t,l,r,s,f;function i(h){o[4](h)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),n=new On({props:a}),B.push(()=>U(n,"value",i));const u=[Ps,Ns,js],c=[];function $(h,k){return h[0].kind=="percent_households_with_car"?0:h[0].kind=="average_cars_per_household"?1:h[0].kind=="population_density"?2:-1}return~(r=$(o))&&(s=c[r]=u[r](o)),{c(){e=T("div"),w(n.$$.fragment),l=C(),s&&s.c(),F(e,"slot","controls"),ee(e,"border","1px solid black"),ee(e,"padding","8px")},m(h,k){g(h,e,k),b(n,e,null),p(e,l),~r&&c[r].m(e,null),f=!0},p(h,k){const S={};!t&&k&1&&(t=!0,S.value=h[0].kind,W(()=>t=!1)),n.$set(S);let y=r;r=$(h),r===y?~r&&c[r].p(h,k):(s&&(_e(),_(c[y],1,1,()=>{c[y]=null}),ge()),~r?(s=c[r],s?s.p(h,k):(s=c[r]=u[r](h),s.c()),m(s,1),s.m(e,null)):s=null)},i(h){f||(m(n.$$.fragment,h),m(s),f=!0)},o(h){_(n.$$.fragment,h),_(s),f=!1},d(h){h&&d(e),v(n),~r&&c[r].d()}}}function Rs(o){let e,n,t,l=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=T("p"),n=L("There are "),t=T("b"),r=L(l),s=L(`
          people per square kilometre in `),i=L(f)},m(a,u){g(a,e,u),p(e,n),p(e,t),p(t,r),p(e,s),p(e,i)},p(a,u){u&129&&l!==(l=a[9].toLocaleString()+"")&&q(r,l),u&128&&f!==(f=a[8]+"")&&q(i,f)},d(a){a&&d(e)}}}function Ds(o){let e,n,t=o[8]+"",l,r,s,f=o[9]+"",i,a;return{c(){e=T("p"),n=L("Households in "),l=L(t),r=L(` have an average of
          `),s=T("b"),i=L(f),a=L(`
          cars`)},m(u,c){g(u,e,c),p(e,n),p(e,l),p(e,r),p(e,s),p(s,i),p(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&q(l,t),c&129&&f!==(f=u[9]+"")&&q(i,f)},d(u){u&&d(e)}}}function Gs(o){let e,n,t=o[9]+"",l,r,s,f=o[8]+"",i,a;return{c(){e=T("p"),n=T("b"),l=L(t),r=L("%"),s=L(`
          of households in `),i=L(f),a=L(" have 1 or more cars")},m(u,c){g(u,e,c),p(e,n),p(n,l),p(n,r),p(e,s),p(e,i),p(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&q(l,t),c&128&&f!==(f=u[8]+"")&&q(i,f)},d(u){u&&d(e)}}}function Fs(o){pl(o);let e;function n(r,s){return r[0].kind=="percent_households_with_car"?Gs:r[0].kind=="average_cars_per_household"?Ds:Rs}let t=n(o),l=t(o);return{c(){l.c(),e=he()},m(r,s){l.m(r,s),g(r,e,s)},p(r,s){pl(r),t===(t=n(r))&&l?l.p(r,s):(l.d(1),l=t(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&d(e),l.d(r)}}}function qs(o){let e,n;return e=new ie({props:{$$slots:{default:[Fs,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&1153&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zs(o){let e,n,t,l;const r=[z(Ye),{sourceLayer:Ye},{paint:{"fill-color":we(["get",o[0].kind],ht(o[0].kind),o[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[qs]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new ze({props:s}),e.$on("click",o[3]);const f=[z(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(Ye)),u&0&&{sourceLayer:Ye},u&3&&{paint:{"fill-color":we(["get",a[0].kind],ht(a[0].kind),a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?le(f,[u&0&&oe(z(`${Ye}-outline`)),u&0&&{sourceLayer:Ye},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&d(n),v(e,a),v(t,a)}}}function Hs(o){let e,n,t,l,r;function s(i){o[5](i)}let f={name:Ye,title:"2021 census",$$slots:{controls:[As],help:[Os]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ye}.pmtiles`,$$slots:{default:[zs]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0].show,W(()=>n=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Ye="census_output_areas";function Es(o){return o.show?o.kind:null}function Bs(o){return{show:!0,kind:o}}function ht(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const $l=o=>o.toLocaleString();function Us(o,e,n){let t,l=V.sequential_low_to_high,s=wt(Ye,{show:!1,kind:"percent_households_with_car"},Es,Bs);Y(o,s,u=>n(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,l,s,f,i,a]}class Ws extends X{constructor(e){super(),x(this,e,Us,Hs,Q,{})}}function Ys(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","icon")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function Js(o){let e;return{c(){e=L(`ONS Geography
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Vs(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[Js]},$$scope:{ctx:o}}}),f=new Le({}),{c(){e=T("span"),n=T("p"),t=L("Data from "),w(l.$$.fragment),r=L(", as of May 2024."),s=C(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){g(a,e,u),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(l.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(l),v(f)}}}function Qs(o){let e,n=o[4].name+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=l[4].name+"")&&q(t,n)},d(l){l&&d(e)}}}function Zs(o){let e,n;return e=new ie({props:{$$slots:{default:[Qs,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ks(o){let e,n,t,l;const r=[z(vt),{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Zs]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new ze({props:s}),e.$on("click",ei);const f=[z(`${vt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(vt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(z(`${vt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&d(n),v(e,a),v(t,a)}}}function Xs(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:vt,title:xs,$$slots:{help:[Vs],icon:[Ys]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new Ut({props:{data:`${ce()}/v1/${vt}.geojson`,$$slots:{default:[Ks]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let vt="combined_authorities",xs="Combined authorities";function ei(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function ti(o,e,n){let t,l=V.combined_authorities,r=ue(vt);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class ni extends X{constructor(e){super(),x(this,e,ti,Xs,Q,{})}}function li(o){let e;return{c(){e=L(`DLUCH GIS
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ri(o){let e;return{c(){e=L(`here
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function oi(o){let e,n,t,l,r,s,f,i,a,u;return l=new re({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[li]},$$scope:{ctx:o}}}),s=new re({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[ri]},$$scope:{ctx:o}}}),a=new Le({}),{c(){e=T("span"),n=T("p"),t=L("The 2019 English IMD scores come from "),w(l.$$.fragment),r=L(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),w(s.$$.fragment),f=L("."),i=C(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){g(c,e,$),p(e,n),p(n,t),b(l,n,null),p(n,r),b(s,n,null),p(n,f),p(e,i),b(a,e,null),u=!0},p(c,$){const h={};$&64&&(h.$$scope={dirty:$,ctx:c}),l.$set(h);const k={};$&64&&(k.$$scope={dirty:$,ctx:c}),s.$set(k)},i(c){u||(m(l.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(l.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(l),v(s),v(a)}}}function si(o){let e,n,t;return n=new Ue({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","controls")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function ii(o){let e,n=o[5].LSOA11CD+"",t,l,r,s=o[5].score+"",f,i,a,u,c,$=o[5].rank.toLocaleString()+"",h,k;return{c(){e=T("p"),t=L(n),l=L(` has an IMD score of
        `),r=T("b"),f=L(s),i=C(),a=T("p"),u=L("Rank: "),c=T("b"),h=L($),k=L(`
        / 32,844 LSOAs`)},m(S,y){g(S,e,y),p(e,t),p(e,l),p(e,r),p(r,f),g(S,i,y),g(S,a,y),p(a,u),p(a,c),p(c,h),p(a,k)},p(S,y){y&32&&n!==(n=S[5].LSOA11CD+"")&&q(t,n),y&32&&s!==(s=S[5].score+"")&&q(f,s),y&32&&$!==($=S[5].rank.toLocaleString()+"")&&q(h,$)},d(S){S&&(d(e),d(i),d(a))}}}function ai(o){let e,n;return e=new ie({props:{$$slots:{default:[ii,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&96&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function fi(o){let e,n,t,l;const r=[z(Je),{sourceLayer:Je},{paint:{"fill-color":we(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[ai]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new ze({props:s});const f=[z(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&7?le(r,[u&0&&oe(z(Je)),u&0&&{sourceLayer:Je},u&6&&{paint:{"fill-color":we(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?le(f,[u&0&&oe(z(`${Je}-outline`)),u&0&&{sourceLayer:Je},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&d(n),v(e,a),v(t,a)}}}function ui(o){let e,n,t,l,r;function s(i){o[4](i)}let f={name:Je,title:ci,$$slots:{controls:[si],help:[oi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Je}.pmtiles`,$$slots:{default:[fi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Je="imd",ci="Indices of Multiple Deprivation";function pi(o,e,n){let t,l=V.sequential_low_to_high,r=[0,2,4,6,8,10],s=ue(Je);Y(o,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,r,s,f]}class $i extends X{constructor(e){super(),x(this,e,pi,ui,Q,{})}}function mi(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","icon")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function _i(o){let e;return{c(){e=L(`ONS Geography
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function gi(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[_i]},$$scope:{ctx:o}}}),f=new Le({}),{c(){e=T("span"),n=T("p"),t=L("Data from "),w(l.$$.fragment),r=L(", as of May 2024."),s=C(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){g(a,e,u),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(l.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(l),v(f)}}}function di(o){let e,n=o[4].name+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=l[4].name+"")&&q(t,n)},d(l){l&&d(e)}}}function hi(o){let e,n;return e=new ie({props:{$$slots:{default:[di,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function wi(o){let e,n,t,l;const r=[z(kt),{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[hi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new ze({props:s}),e.$on("click",ki);const f=[z(`${kt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(kt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(z(`${kt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&d(n),v(e,a),v(t,a)}}}function bi(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:kt,title:vi,$$slots:{help:[gi],icon:[mi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new Ut({props:{data:`${ce()}/v1/${kt}.geojson`,$$slots:{default:[wi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let kt="local_authority_districts",vi="Local Authority Districts";function ki(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function yi(o,e,n){let t,l=V.local_authority_districts,r=ue(kt);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class Si extends X{constructor(e){super(),x(this,e,yi,bi,Q,{})}}function Ti(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","icon")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function Li(o){let e;return{c(){e=L(`local authority
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ci(o){let e;return{c(){e=L(`national park authorit
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ii(o){let e;return{c(){e=L(`development corporation
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Mi(o){let e;return{c(){e=L("this map")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Oi(o){let e;return{c(){e=L(`planning.data.gov.uk
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ji(o){let e,n,t,l,r,s,f,i,a,u,c,$,h,k,S,y,O,I,N,P,M,j,A;return l=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Li]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Ci]},$$scope:{ctx:o}}}),i=new re({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ii]},$$scope:{ctx:o}}}),k=new re({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Mi]},$$scope:{ctx:o}}}),N=new re({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Oi]},$$scope:{ctx:o}}}),j=new Le({}),{c(){e=T("span"),n=T("p"),t=L("LPAs may be a "),w(l.$$.fragment),r=L(", "),w(s.$$.fragment),f=L("y, or "),w(i.$$.fragment),a=L("."),u=C(),c=T("p"),$=T("strong"),h=L(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),w(k.$$.fragment),S=L(" to get more details."),y=C(),O=T("p"),I=L("Data from ONS Geography via "),w(N.$$.fragment),P=L(", as of November 2022."),M=C(),w(j.$$.fragment),F(e,"slot","help")},m(R,H){g(R,e,H),p(e,n),p(n,t),b(l,n,null),p(n,r),b(s,n,null),p(n,f),b(i,n,null),p(n,a),p(e,u),p(e,c),p(c,$),p($,h),b(k,$,null),p($,S),p(e,y),p(e,O),p(O,I),b(N,O,null),p(O,P),p(e,M),b(j,e,null),A=!0},p(R,H){const J={};H&32&&(J.$$scope={dirty:H,ctx:R}),l.$set(J);const ae={};H&32&&(ae.$$scope={dirty:H,ctx:R}),s.$set(ae);const G={};H&32&&(G.$$scope={dirty:H,ctx:R}),i.$set(G);const K={};H&32&&(K.$$scope={dirty:H,ctx:R}),k.$set(K);const E={};H&32&&(E.$$scope={dirty:H,ctx:R}),N.$set(E)},i(R){A||(m(l.$$.fragment,R),m(s.$$.fragment,R),m(i.$$.fragment,R),m(k.$$.fragment,R),m(N.$$.fragment,R),m(j.$$.fragment,R),A=!0)},o(R){_(l.$$.fragment,R),_(s.$$.fragment,R),_(i.$$.fragment,R),_(k.$$.fragment,R),_(N.$$.fragment,R),_(j.$$.fragment,R),A=!1},d(R){R&&d(e),v(l),v(s),v(i),v(k),v(N),v(j)}}}function Ni(o){let e,n=o[4].name+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=l[4].name+"")&&q(t,n)},d(l){l&&d(e)}}}function Pi(o){let e,n;return e=new ie({props:{$$slots:{default:[Ni,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ai(o){let e,n,t,l;const r=[z(Ve),{sourceLayer:Ve},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Pi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new ze({props:s});const f=[z(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(Ve)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(z(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&d(n),v(e,a),v(t,a)}}}function Ri(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:Ve,title:Di,$$slots:{help:[ji],icon:[Ti]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ve}.pmtiles`,$$slots:{default:[Ai]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Ve="local_planning_authorities",Di="Local Planning Authorities";function Gi(o,e,n){let t,l=V.local_planning_authorities,r=ue(Ve);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class Fi extends X{constructor(e){super(),x(this,e,Gi,Ri,Q,{})}}function qi(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","icon")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function zi(o){let e;return{c(){e=L(`Ordnance Survey Boundary-Line
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Hi(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[zi]},$$scope:{ctx:o}}}),f=new Le({}),{c(){e=T("span"),n=T("p"),t=L("Data from "),w(l.$$.fragment),r=L(", as of October 2024."),s=C(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){g(a,e,u),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(l.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(l),v(f)}}}function Ei(o){let e,n=o[4].Name+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=l[4].Name+"")&&q(t,n)},d(l){l&&d(e)}}}function Bi(o){let e,n;return e=new ie({props:{$$slots:{default:[Ei,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ui(o){let e,n,t,l;const r=[z(Qe),{sourceLayer:Qe},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Bi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new ze({props:s}),e.$on("click",Ji);const f=[z(`${Qe}-outline`),{sourceLayer:Qe},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(Qe)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(z(`${Qe}-outline`)),u&0&&{sourceLayer:Qe},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&d(n),v(e,a),v(t,a)}}}function Wi(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:Qe,title:Yi,$$slots:{help:[Hi],icon:[qi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Qe}.pmtiles`,$$slots:{default:[Ui]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Qe="parliamentary_constituencies",Yi="Parliamentary constituencies";function Ji(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Vi(o,e,n){let t,l=V.parliamentary_constituencies,r=ue(Qe);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class Qi extends X{constructor(e){super(),x(this,e,Vi,Wi,Q,{})}}function Zi(o){let e;return{c(){e=L(`DEFRA
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ki(o){let e,n,t,l,r,s,f,i,a,u;return l=new re({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Zi]},$$scope:{ctx:o}}}),a=new Le({}),{c(){e=T("span"),n=T("p"),t=L("Most layers show air quality data from "),w(l.$$.fragment),r=L(`. The measurements are annual means, in units of µgm
      `),s=T("sup"),s.textContent="3",f=L(`
      . Note the particulate matter layers are not corrected for natural sources.`),i=C(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){g(c,e,$),p(e,n),p(n,t),b(l,n,null),p(n,r),p(n,s),p(n,f),p(e,i),b(a,e,null),u=!0},p(c,$){const h={};$&4096&&(h.$$scope={dirty:$,ctx:c}),l.$set(h)},i(c){u||(m(l.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(l.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(l),v(a)}}}function Xi(o){let e,n,t,l,r,s=o[3](o[0].pollutant)+"",f,i,a,u,c,$,h,k,S,y,O,I,N;function P(j){o[5](j)}let M={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return o[0].pollutant!==void 0&&(M.value=o[0].pollutant),n=new st({props:M}),B.push(()=>U(n,"value",P)),{c(){e=T("div"),w(n.$$.fragment),l=C(),r=T("p"),f=L(s),i=C(),a=T("div"),u=T("label"),c=L(`Opacity
        `),$=T("input"),h=C(),k=T("img"),F($,"type","range"),F($,"min","0"),F($,"max","100"),Zt(k.src,S=o[4](o[0].pollutant))||F(k,"src",S),F(k,"width",150),F(k,"alt",y=`Legend for ${o[0].pollutant} layer`),F(e,"slot","controls"),ee(e,"border","1px solid black"),ee(e,"padding","8px")},m(j,A){g(j,e,A),b(n,e,null),p(e,l),p(e,r),p(r,f),p(e,i),p(e,a),p(a,u),p(u,c),p(u,$),tt($,o[0].opacity),p(e,h),p(e,k),O=!0,I||(N=[mt($,"change",o[6]),mt($,"input",o[6])],I=!0)},p(j,A){const R={};!t&&A&1&&(t=!0,R.value=j[0].pollutant,W(()=>t=!1)),n.$set(R),(!O||A&1)&&s!==(s=j[3](j[0].pollutant)+"")&&q(f,s),A&1&&tt($,j[0].opacity),(!O||A&1&&!Zt(k.src,S=j[4](j[0].pollutant)))&&F(k,"src",S),(!O||A&1&&y!==(y=`Legend for ${j[0].pollutant} layer`))&&F(k,"alt",y)},i(j){O||(m(n.$$.fragment,j),O=!0)},o(j){_(n.$$.fragment,j),O=!1},d(j){j&&d(e),v(n),I=!1,Pr(N)}}}function xi(o){let e,n;const t=[z(cn),{paint:{"raster-opacity":o[0].opacity/100}},{layout:{visibility:o[0].show?"visible":"none"}}];let l={};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new $o({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(cn)),s&1&&{paint:{"raster-opacity":r[0].opacity/100}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function ea(o){let e,n,t,l,r;function s(i){o[7](i)}let f={name:cn,title:ta,$$slots:{controls:[Xi],help:[Ki]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new zo({props:{tiles:[o[1]],tileSize:256,$$slots:{default:[xi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0].show,W(()=>n=!1)),e.$set(u);const c={};a&2&&(c.tiles=[i[1]]),a&4097&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let cn="pollution",ta="Pollution";function na(o){return o.show?`${o.pollutant}/${o.opacity}`:null}function la(o){let[e,n]=o.split("/");return{show:!0,pollutant:e,opacity:parseInt(n)}}function ra(o,e,n){let t,l,r,f=wt(cn,{show:!1,pollutant:"PM25_viridis",opacity:50},na,la);Y(o,f,S=>n(0,r=S));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(S){return t[1]}function u(S){let y=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${y}`}function c(S){let y=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${y}`}function $(S){o.$$.not_equal(r.pollutant,S)&&(r.pollutant=S,f.set(r))}function h(){r.opacity=Kt(this.value),f.set(r)}function k(S){o.$$.not_equal(r.show,S)&&(r.show=S,f.set(r))}return o.$$.update=()=>{o.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),o.$$.dirty&1&&n(1,l=u(r.pollutant))},[r,l,f,a,c,$,h,k]}class oa extends X{constructor(e){super(),x(this,e,ra,ea,Q,{})}}function sa(o){let e;return{c(){e=L(`DEFRA
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ia(o){let e,n,t,l,r,s,f,i,a,u;return s=new re({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[sa]},$$scope:{ctx:o}}}),a=new Le({}),{c(){e=T("span"),n=T("p"),n.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=C(),l=T("p"),r=L("Data from June 2019, produced by "),w(s.$$.fragment),f=L(". See there for methodology details"),i=C(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){g(c,e,$),p(e,n),p(e,t),p(e,l),p(l,r),b(s,l,null),p(l,f),p(e,i),b(a,e,null),u=!0},p(c,$){const h={};$&32&&(h.$$scope={dirty:$,ctx:c}),s.$set(h)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(s),v(a)}}}function aa(o){let e,n,t;return n=new Ue({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","controls")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function fa(o){let e,n=o[4].noiseclass+"",t,l,r=ml(o[4].noiseclass)+"",s,f;return{c(){e=T("p"),t=L(n),l=L(" dB ("),s=L(r),f=L(")")},m(i,a){g(i,e,a),p(e,t),p(e,l),p(e,s),p(e,f)},p(i,a){a&16&&n!==(n=i[4].noiseclass+"")&&q(t,n),a&16&&r!==(r=ml(i[4].noiseclass)+"")&&q(s,r)},d(i){i&&d(e)}}}function ua(o){let e,n;return e=new ie({props:{$$slots:{default:[fa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ca(o){let e,n;const t=[z(yt),{sourceLayer:yt},{paint:{"fill-color":Xe(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":te(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[ua]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new ze({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(z(yt)),s&0&&{sourceLayer:yt},s&2&&{paint:{"fill-color":Xe(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":te(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function pa(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:yt,title:$a,$$slots:{controls:[aa],help:[ia]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${yt}.pmtiles`,$$slots:{default:[ca]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let yt="road_noise",$a="Road noise";function ml(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function ma(o,e,n){let t,l=[V.sequential_low_to_high[0],V.sequential_low_to_high[2],V.sequential_low_to_high[4]],r=ue(yt);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class _a extends X{constructor(e){super(),x(this,e,ma,pa,Q,{})}}function _l(o,e,n){const t=o.slice();return t[10]=e[n][0],t[11]=e[n][1],t[12]=e[n][2],t[13]=e,t[14]=n,t}function ga(o){let e;return{c(){e=L(`rowmaps.com
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function da(o){let e,n,t,l,r,s,f,i,a,u;return l=new re({props:{href:"https://www.rowmaps.com",$$slots:{default:[ga]},$$scope:{ctx:o}}}),a=new Le({}),{c(){e=T("span"),n=T("p"),t=L("These public rights of way are aggregated from 137 authorities, thanks to "),w(l.$$.fragment),r=L(`. The licenses for each authority may vary, but most use
      the Open Government License v3 or Creative Commons.`),s=C(),f=T("p"),f.textContent="This data is current as of 15 November, 2024.",i=C(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){g(c,e,$),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),p(e,f),p(e,i),b(a,e,null),u=!0},p(c,$){const h={};$&32768&&(h.$$scope={dirty:$,ctx:c}),l.$set(h)},i(c){u||(m(l.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(l.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(l),v(a)}}}function ha(o){let e,n,t=o[11]+"",l,r,s;return e=new Te({props:{color:o[12]}}),{c(){w(e.$$.fragment),n=C(),l=L(t),r=C()},m(f,i){b(e,f,i),g(f,n,i),g(f,l,i),g(f,r,i),s=!0},p:Z,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(d(n),d(l),d(r)),v(e,f)}}}function gl(o){let e,n,t;function l(s){o[4](s,o[10])}let r={$$slots:{default:[ha]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Ee({props:r}),B.push(()=>U(e,"checked",l)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f&32768&&(i.$$scope={dirty:f,ctx:o}),!n&&f&5&&(n=!0,i.checked=o[0][o[10]],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function wa(o){let e,n,t=$e(o[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=gl(_l(o,t,s));const r=s=>_(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=he()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);g(s,e,f),n=!0},p(s,f){if(f&5){t=$e(s[2]);let i;for(i=0;i<t.length;i+=1){const a=_l(s,t,i);l[i]?(l[i].p(a,f),m(l[i],1)):(l[i]=gl(a),l[i].c(),m(l[i],1),l[i].m(e.parentNode,e))}for(_e(),i=t.length;i<l.length;i+=1)r(i);ge()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)_(l[f]);n=!1},d(s){s&&d(e),qe(l,s)}}}function ba(o){let e,n,t;return n=new De({props:{small:!0,$$slots:{default:[wa]},$$scope:{ctx:o}}}),{c(){e=T("div"),w(n.$$.fragment),F(e,"slot","controls"),ee(e,"border","1px solid black"),ee(e,"padding","8px")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p(l,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function va(o){let e,n=o[9].kind+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&512&&n!==(n=l[9].kind+"")&&q(t,n)},d(l){l&&d(e)}}}function ka(o){let e,n;return e=new ie({props:{$$slots:{default:[va,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&33280&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ya(o){let e,n;const t=[z(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Xe(["get","kind"],{footpath:V.rights_of_way.footpath,bridleway:V.rights_of_way.bridleway,"restricted byway":V.rights_of_way.restricted_byway,"byway open to all traffic":V.rights_of_way.boat},"red"),"line-width":Ge,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])}];let l={$$slots:{default:[ka]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new de({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&9?le(t,[s&0&&oe(z(St)),s&0&&{sourceLayer:St},t[2],t[3],t[4],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])}]):{};s&32768&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function Sa(o){let e,n,t,l,r;function s(i){o[5](i)}let f={name:St,title:Ta,$$slots:{controls:[ba],help:[da]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${St}.pmtiles`,$$slots:{default:[ya]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&32769&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0].show,W(()=>n=!1)),e.$set(u);const c={};a&32769&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let St="rights_of_way",Ta="Rights of Way";function La(o){return{show:!0,footpath:o.includes("footpath"),bridleway:o.includes("bridleway"),restricted_byway:o.includes("restricted_byway"),boat:o.includes("boat")}}function Ca(o,e,n){let t,l=["footpath","bridleway","restricted_byway","boat"],r={show:!1,footpath:!0,bridleway:!0,restricted_byway:!0,boat:!0};function s($){return $.show?l.filter(h=>$[h]).join(","):null}let f=wt(St,r,s,La);Y(o,f,$=>n(0,t=$));let i=[["footpath","Footpath",V.rights_of_way.footpath],["bridleway","Bridleway",V.rights_of_way.bridleway],["restricted_byway","Restricted byway",V.rights_of_way.restricted_byway],["boat","Byway open to all traffic",V.rights_of_way.boat]];function a($){let h=l.filter(k=>$[k]).map(k=>({footpath:"footpath",bridleway:"bridleway",restricted_byway:"restricted byway",boat:"byway open to all traffic"})[k]);return["in",["get","kind"],["literal",h]]}function u($,h){o.$$.not_equal(t[h],$)&&(t[h]=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,f,i,a,u,c]}class Ia extends X{constructor(e){super(),x(this,e,Ca,Sa,Q,{})}}function Ma(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","icon")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function Oa(o){let e;return{c(){e=L(`ONS Geography
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ja(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[Oa]},$$scope:{ctx:o}}}),f=new Le({}),{c(){e=T("span"),n=T("p"),t=L("Data from "),w(l.$$.fragment),r=L(", as of May 2023."),s=C(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){g(a,e,u),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(l.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(l),v(f)}}}function Na(o){let e,n=o[4].name+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=l[4].name+"")&&q(t,n)},d(l){l&&d(e)}}}function Pa(o){let e,n;return e=new ie({props:{$$slots:{default:[Na,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Aa(o){let e,n,t,l;const r=[z(Ze),{sourceLayer:Ze},{paint:{"fill-color":o[1],"fill-opacity":te(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Pa]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new ze({props:s}),e.$on("click",Ga);const f=[z(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&3?le(r,[u&0&&oe(z(Ze)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?le(f,[u&0&&oe(z(`${Ze}-outline`)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&d(n),v(e,a),v(t,a)}}}function Ra(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:Ze,title:Da,$$slots:{help:[ja],icon:[Ma]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ze}.pmtiles`,$$slots:{default:[Aa]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Ze="wards",Da="Wards";function Ga(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Fa(o,e,n){let t,l=V.wards,r=ue(Ze);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class qa extends X{constructor(e){super(),x(this,e,Fa,Ra,Q,{})}}function za(o){let e;return{c(){e=L("Open Data Commons Open Database License")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ha(o){let e,n,t,l;return t=new re({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[za]},$$scope:{ctx:o}}}),{c(){e=T("p"),n=L("License: "),w(t.$$.fragment)},m(r,s){g(r,e,s),p(e,n),b(t,e,null),l=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){l||(m(t.$$.fragment,r),l=!0)},o(r){_(t.$$.fragment,r),l=!1},d(r){r&&d(e),v(t)}}}class lt extends X{constructor(e){super(),x(this,e,null,Ha,Q,{})}}function Ea(o){let e,n,t;return n=new Te({props:{color:V.bus_route_with_lane}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","icon")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function Ba(o){let e;return{c(){e=L(`GTFS
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ua(o){let e,n,t,l,r,s,f,i,a,u;return s=new re({props:{href:"https://gtfs.org",$$slots:{default:[Ba]},$$scope:{ctx:o}}}),a=new lt({}),{c(){e=T("span"),n=T("p"),n.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=C(),l=T("p"),r=L("Note this data is from OpenStreetMap (as of 20 October 2024), not "),w(s.$$.fragment),f=L(`, and doesn't include which routes are run or the frequency
      of service.`),i=C(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){g(c,e,$),p(e,n),p(e,t),p(e,l),p(l,r),b(s,l,null),p(l,f),p(e,i),b(a,e,null),u=!0},p(c,$){const h={};$&16&&(h.$$scope={dirty:$,ctx:c}),s.$set(h)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(s),v(a)}}}function Wa(o){let e;return{c(){e=T("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ya(o){let e;return{c(){e=T("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Ja(o){let e;function n(r,s){return r[3].has_bus_lane?Ya:Wa}let t=n(o),l=t(o);return{c(){l.c(),e=he()},m(r,s){l.m(r,s),g(r,e,s)},p(r,s){t!==(t=n(r))&&(l.d(1),l=t(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&d(e),l.d(r)}}}function Va(o){let e,n;return e=new ie({props:{$$slots:{default:[Ja,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&24&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Qa(o){let e,n;const t=[z(Tt),{sourceLayer:Tt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],V.bus_route_with_lane,V.bus_route_without_lane],"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Va]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new de({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Tt)),s&0&&{sourceLayer:Tt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function Za(o){let e,n,t,l,r;function s(i){o[2](i)}let f={name:Tt,title:Ka,$$slots:{help:[Ua],icon:[Ea]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Tt}.pmtiles`,$$slots:{default:[Qa]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Tt="bus_routes",Ka="Bus routes";function Xa(o,e,n){let t,l=ue(Tt);Y(o,l,s=>n(0,t=s));function r(s){t=s,l.set(t)}return[t,l,r]}class xa extends X{constructor(e){super(),x(this,e,Xa,Za,Q,{})}}function dl(o){const e=cf(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function hl(o,e,n){const t=o.slice();return t[10]=e[n][0],t[13]=e[n][1],t[14]=e[n][2],t[15]=e,t[16]=n,t}function ef(o){let e,n,t,l,r,s,f,i,a;return i=new lt({}),{c(){e=T("span"),n=T("p"),n.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=C(),l=T("ul"),l.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=C(),s=T("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=C(),w(i.$$.fragment),F(e,"slot","help")},m(u,c){g(u,e,c),p(e,n),p(e,t),p(e,l),p(e,r),p(e,s),p(e,f),b(i,e,null),a=!0},p:Z,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){_(i.$$.fragment,u),a=!1},d(u){u&&d(e),v(i)}}}function tf(o){let e,n,t=o[13]+"",l,r,s;return e=new Te({props:{color:o[14]}}),{c(){w(e.$$.fragment),n=C(),l=L(t),r=C()},m(f,i){b(e,f,i),g(f,n,i),g(f,l,i),g(f,r,i),s=!0},p:Z,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(d(n),d(l),d(r)),v(e,f)}}}function wl(o){let e,n,t;function l(s){o[4](s,o[10])}let r={$$slots:{default:[tf]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new Ee({props:r}),B.push(()=>U(e,"checked",l)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!n&&f&5&&(n=!0,i.checked=o[0][o[10]],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function nf(o){let e,n,t=$e(o[2]),l=[];for(let s=0;s<t.length;s+=1)l[s]=wl(hl(o,t,s));const r=s=>_(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=he()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);g(s,e,f),n=!0},p(s,f){if(f&5){t=$e(s[2]);let i;for(i=0;i<t.length;i+=1){const a=hl(s,t,i);l[i]?(l[i].p(a,f),m(l[i],1)):(l[i]=wl(a),l[i].c(),m(l[i],1),l[i].m(e.parentNode,e))}for(_e(),i=t.length;i<l.length;i+=1)r(i);ge()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)_(l[f]);n=!1},d(s){s&&d(e),qe(l,s)}}}function lf(o){let e,n,t;return n=new De({props:{small:!0,$$slots:{default:[nf]},$$scope:{ctx:o}}}),{c(){e=T("div"),w(n.$$.fragment),F(e,"slot","controls"),ee(e,"border","1px solid black"),ee(e,"padding","8px")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p(l,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function rf(o){dl(o);let e,n=o[10]+"",t,l,r,s,f,i=o[11]+"",a,u,c,$,h=o[12]+"",k;return{c(){e=T("h2"),t=L(n),l=C(),r=T("p"),s=L("Direction: "),f=T("b"),a=C(),u=T("p"),c=L("Width: "),$=T("b"),k=L(h)},m(S,y){g(S,e,y),p(e,t),g(S,l,y),g(S,r,y),p(r,s),p(r,f),f.innerHTML=i,g(S,a,y),g(S,u,y),p(u,c),p(u,$),p($,k)},p(S,y){dl(S),y&512&&n!==(n=S[10]+"")&&q(t,n),y&512&&i!==(i=S[11]+"")&&(f.innerHTML=i),y&512&&h!==(h=S[12]+"")&&q(k,h)},d(S){S&&(d(e),d(l),d(r),d(a),d(u))}}}function of(o){let e,n;return e=new ie({props:{$$slots:{default:[rf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&131584&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sf(o){let e,n;const t=[z(Lt),{sourceLayer:Lt},{paint:{"line-color":Xe(["get","kind"],{track:V.cycle_paths.track,lane:V.cycle_paths.lane,shared_use_segregated:V.cycle_paths.shared_use_segregated,shared_use_unsegregated:V.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ge,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={$$slots:{default:[of]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new de({props:l}),e.$on("click",pf),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&9?le(t,[s&0&&oe(z(Lt)),s&0&&{sourceLayer:Lt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function af(o){let e,n,t,l,r;function s(i){o[5](i)}let f={name:Lt,title:ff,$$slots:{controls:[lf],help:[ef]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Lt}.pmtiles`,$$slots:{default:[sf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0].show,W(()=>n=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Lt="cycle_paths",ff="Cycle paths";function uf(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function cf(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${n} ${o.direction}`,t]}function pf(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function $f(o,e,n){let t,l=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s($){return $.show?l.filter(h=>$[h]).join(","):null}let f=wt(Lt,r,s,uf);Y(o,f,$=>n(0,t=$));let i=[["track","Separated tracks",V.cycle_paths.track],["lane","Unprotected lanes",V.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",V.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",V.cycle_paths.shared_use_unsegregated]];function a($){let h=l.filter(k=>$[k]);return["in",["get","kind"],["literal",h]]}function u($,h){o.$$.not_equal(t[h],$)&&(t[h]=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,f,i,a,u,c]}class mf extends X{constructor(e){super(),x(this,e,$f,af,Q,{})}}function _f(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","icon")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function gf(o){let e;return{c(){e=L(`Major Road Network
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function df(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[gf]},$$scope:{ctx:o}}}),f=new Le({}),{c(){e=T("span"),n=T("p"),t=L("Data from the "),w(l.$$.fragment),r=L(", as of September 2021."),s=C(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){g(a,e,u),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(l.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(l),v(f)}}}function hf(o){let e,n=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=(l[4].name??"Unknown MRN road")+"")&&q(t,n)},d(l){l&&d(e)}}}function wf(o){let e,n;return e=new ie({props:{$$slots:{default:[hf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bf(o){let e,n;const t=[z(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[wf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new de({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(z(Ct)),s&0&&{sourceLayer:Ct},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function vf(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:Ct,title:kf,$$slots:{help:[df],icon:[_f]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ct}.pmtiles`,$$slots:{default:[bf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Ct="mrn",kf="Major Road Network";function yf(o,e,n){let t,l=V.mrn,r=ue(Ct);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class Sf extends X{constructor(e){super(),x(this,e,yf,vf,Q,{})}}function Tf(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","icon")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function Lf(o){let e;return{c(){e=L(`OS Open Roads
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Cf(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Lf]},$$scope:{ctx:o}}}),f=new Le({}),{c(){e=T("span"),n=T("p"),t=L("Data from "),w(l.$$.fragment),r=L(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=C(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){g(a,e,u),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(l.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(l),v(f)}}}function If(o){let e,n=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=(l[4].name??"Unknown SRN road")+"")&&q(t,n)},d(l){l&&d(e)}}}function Mf(o){let e,n;return e=new ie({props:{$$slots:{default:[If,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Of(o){let e,n;const t=[z(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[Mf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new de({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(z(It)),s&0&&{sourceLayer:It},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function jf(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:It,title:Nf,$$slots:{help:[Cf],icon:[Tf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${It}.pmtiles`,$$slots:{default:[Of]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let It="srn",Nf="Strategic Road Network";function Pf(o,e,n){let t,l=V.srn,r=ue(It);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class Af extends X{constructor(e){super(),x(this,e,Pf,jf,Q,{})}}function Rf(o){let e,n,t;return n=new Te({props:{color:o[1]}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","icon")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function Df(o){let e;return{c(){e=L(`National Cycle Network
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Gf(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Df]},$$scope:{ctx:o}}}),f=new Le({}),{c(){e=T("span"),n=T("p"),t=L("Data from Sustrans about the "),w(l.$$.fragment),r=L(", downloaded on 22/01/2024."),s=C(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){g(a,e,u),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(l.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(l),v(f)}}}function bl(o){let e,n,t,l=o[4].Desc_+"",r;return{c(){e=T("li"),n=L("Description: "),t=T("b"),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].Desc_+"")&&q(r,l)},d(s){s&&d(e)}}}function vl(o){let e,n,t,l=o[4].Greenway+"",r;return{c(){e=T("li"),n=L("Is greenway: "),t=T("b"),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].Greenway+"")&&q(r,l)},d(s){s&&d(e)}}}function kl(o){let e,n,t,l=o[4].RouteType+"",r;return{c(){e=T("li"),n=L("Route type: "),t=T("b"),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].RouteType+"")&&q(r,l)},d(s){s&&d(e)}}}function yl(o){let e,n,t,l=o[4].RouteNo+"",r;return{c(){e=T("li"),n=L("Route number: "),t=T("b"),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].RouteNo+"")&&q(r,l)},d(s){s&&d(e)}}}function Sl(o){let e,n,t,l=o[4].RouteCat+"",r;return{c(){e=T("li"),n=L("Route Category: "),t=T("b"),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].RouteCat+"")&&q(r,l)},d(s){s&&d(e)}}}function Tl(o){let e,n,t,l=o[4].OpenStatus+"",r;return{c(){e=T("li"),n=L("Open Status: "),t=T("b"),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].OpenStatus+"")&&q(r,l)},d(s){s&&d(e)}}}function Ll(o){let e,n,t,l=o[4].Surface+"",r;return{c(){e=T("li"),n=L("Surface: "),t=T("b"),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].Surface+"")&&q(r,l)},d(s){s&&d(e)}}}function Cl(o){let e,n,t,l=o[4].Quality+"",r;return{c(){e=T("li"),n=L("Quality: "),t=T("b"),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].Quality+"")&&q(r,l)},d(s){s&&d(e)}}}function Il(o){let e,n,t,l=o[4].RoadClass+"",r;return{c(){e=T("li"),n=L("Road Class: "),t=T("b"),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&16&&l!==(l=s[4].RoadClass+"")&&q(r,l)},d(s){s&&d(e)}}}function Ff(o){let e,n,t,l,r,s,f,i,a,u=o[4].Desc_&&bl(o),c=o[4].Greenway&&vl(o),$=o[4].RouteType&&kl(o),h=o[4].RouteNo&&yl(o),k=o[4].RouteCat&&Sl(o),S=o[4].OpenStatus&&Tl(o),y=o[4].Surface&&Ll(o),O=o[4].Quality&&Cl(o),I=o[4].RoadClass&&Il(o);return{c(){e=T("ul"),u&&u.c(),n=C(),c&&c.c(),t=C(),$&&$.c(),l=C(),h&&h.c(),r=C(),k&&k.c(),s=C(),S&&S.c(),f=C(),y&&y.c(),i=C(),O&&O.c(),a=C(),I&&I.c()},m(N,P){g(N,e,P),u&&u.m(e,null),p(e,n),c&&c.m(e,null),p(e,t),$&&$.m(e,null),p(e,l),h&&h.m(e,null),p(e,r),k&&k.m(e,null),p(e,s),S&&S.m(e,null),p(e,f),y&&y.m(e,null),p(e,i),O&&O.m(e,null),p(e,a),I&&I.m(e,null)},p(N,P){N[4].Desc_?u?u.p(N,P):(u=bl(N),u.c(),u.m(e,n)):u&&(u.d(1),u=null),N[4].Greenway?c?c.p(N,P):(c=vl(N),c.c(),c.m(e,t)):c&&(c.d(1),c=null),N[4].RouteType?$?$.p(N,P):($=kl(N),$.c(),$.m(e,l)):$&&($.d(1),$=null),N[4].RouteNo?h?h.p(N,P):(h=yl(N),h.c(),h.m(e,r)):h&&(h.d(1),h=null),N[4].RouteCat?k?k.p(N,P):(k=Sl(N),k.c(),k.m(e,s)):k&&(k.d(1),k=null),N[4].OpenStatus?S?S.p(N,P):(S=Tl(N),S.c(),S.m(e,f)):S&&(S.d(1),S=null),N[4].Surface?y?y.p(N,P):(y=Ll(N),y.c(),y.m(e,i)):y&&(y.d(1),y=null),N[4].Quality?O?O.p(N,P):(O=Cl(N),O.c(),O.m(e,a)):O&&(O.d(1),O=null),N[4].RoadClass?I?I.p(N,P):(I=Il(N),I.c(),I.m(e,null)):I&&(I.d(1),I=null)},d(N){N&&d(e),u&&u.d(),c&&c.d(),$&&$.d(),h&&h.d(),k&&k.d(),S&&S.d(),y&&y.d(),O&&O.d(),I&&I.d()}}}function qf(o){let e,n;return e=new ie({props:{$$slots:{default:[Ff,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zf(o){let e,n;const t=[z(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[qf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new de({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&3?le(t,[s&0&&oe(z(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function Hf(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:Mt,title:Ef,$$slots:{help:[Gf],icon:[Rf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Mt}.pmtiles`,$$slots:{default:[zf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Mt="national_cycle_network",Ef="National Cycle Network";function Bf(o,e,n){let t,l=V.national_cycle_network,r=ue(Mt);Y(o,r,f=>n(0,t=f));function s(f){t=f,r.set(t)}return[t,l,r,s]}class Uf extends X{constructor(e){super(),x(this,e,Bf,Hf,Q,{})}}function Ml(o,e,n){const t=o.slice();return t[7]=e[n][0],t[8]=e[n][1],t[9]=e[n][2],t}function Wf(o){let e;return{c(){e=L(`Public Sector Geospatial Agreement
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Yf(o){let e,n,t,l,r,s,f,i,a,u,c,$;return u=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Wf]},$$scope:{ctx:o}}}),{c(){e=T("span"),n=T("p"),n.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=C(),l=T("p"),l.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=C(),s=T("p"),s.textContent="Data valid as of 1 January, 2024",f=C(),i=T("p"),a=L(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(u.$$.fragment),c=L("."),F(e,"slot","help")},m(h,k){g(h,e,k),p(e,n),p(e,t),p(e,l),p(e,r),p(e,s),p(e,f),p(e,i),p(i,a),b(u,i,null),p(i,c),$=!0},p(h,k){const S={};k&4096&&(S.$$scope={dirty:k,ctx:h}),u.$set(S)},i(h){$||(m(u.$$.fragment,h),$=!0)},o(h){_(u.$$.fragment,h),$=!1},d(h){h&&d(e),v(u)}}}function Jf(o){let e,n,t;return n=new Ue({props:{colorScale:o[1],limits:o[3]}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","controls")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function Vf(o){let e,n,t=pn(o[6].angle+o[9])+"",l;return{c(){e=T("p"),n=new Et(!1),l=L(` side of the road: no pavement
          `),n.a=l},m(r,s){g(r,e,s),n.m(t,e),p(e,l)},p(r,s){s&64&&t!==(t=pn(r[6].angle+r[9])+"")&&n.p(t)},d(r){r&&d(e)}}}function Qf(o){let e,n,t=pn(o[6].angle+o[9])+"",l,r,s=o[7]+"",f,i,a,u=o[8]+"",c,$;return{c(){e=T("p"),n=new Et(!1),l=L(` side of the road:
            `),r=T("b"),f=L(s),i=L(`
            m average,
            `),a=T("b"),c=L(u),$=L(`
            m minimum
          `),n.a=l},m(h,k){g(h,e,k),n.m(t,e),p(e,l),p(e,r),p(r,f),p(e,i),p(e,a),p(a,c),p(e,$)},p(h,k){k&64&&t!==(t=pn(h[6].angle+h[9])+"")&&n.p(t),k&64&&s!==(s=h[7]+"")&&q(f,s),k&64&&u!==(u=h[8]+"")&&q(c,u)},d(h){h&&d(e)}}}function Ol(o){let e;function n(r,s){return r[7]?Qf:Vf}let t=n(o),l=t(o);return{c(){l.c(),e=he()},m(r,s){l.m(r,s),g(r,e,s)},p(r,s){t===(t=n(r))&&l?l.p(r,s):(l.d(1),l=t(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&d(e),l.d(r)}}}function Zf(o){let e,n=$e([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let l=0;l<2;l+=1)t[l]=Ol(Ml(o,n,l));return{c(){for(let l=0;l<2;l+=1)t[l].c();e=he()},m(l,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(l,r);g(l,e,r)},p(l,r){if(r&64){n=$e([[l[6].left_average,l[6].left_minimum,-90],[l[6].right_average,l[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=Ml(l,n,s);t[s]?t[s].p(f,r):(t[s]=Ol(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(l){l&&d(e),qe(t,l)}}}function Kf(o){let e,n;return e=new ie({props:{openOn:"hover",$$slots:{default:[Zf,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&4160&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xf(o){let e,n;const t=[z(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":Ge,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[Kf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new de({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(Ot)),s&0&&{sourceLayer:Ot},t[2],t[3],s&6&&{paint:{"line-color":we(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Ge,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function xf(o){let e,n,t,l,r;function s(i){o[5](i)}let f={name:Ot,title:eu,$$slots:{controls:[Jf],help:[Yf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${xt()}/v1/${Ot}.pmtiles`,$$slots:{default:[Xf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Ot="pavement_widths",eu="OS Pavement widths";function tu(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function pn(o){return`${tu(o)} <span style="display: inline-block; rotate: ${o}deg">⬆</span>`}function nu(o,e,n){let t,l=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=ue(Ot);Y(o,f,a=>n(0,t=a));function i(a){t=a,f.set(t)}return[t,l,r,s,f,i]}class lu extends X{constructor(e){super(),x(this,e,nu,xf,Q,{})}}function ru(o){let e;return{c(){e=L("the PCT website")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ou(o){let e;return{c(){e=L("2017 journal article")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function su(o){let e,n,t,l,r,s,f,i,a,u,c,$;return i=new re({props:{href:"https://www.pct.bike",$$slots:{default:[ru]},$$scope:{ctx:o}}}),u=new re({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[ou]},$$scope:{ctx:o}}}),{c(){e=T("span"),n=T("p"),n.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=C(),l=T("p"),l.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=C(),s=T("p"),f=L("See "),w(i.$$.fragment),a=L(" and "),w(u.$$.fragment),c=L(" for details on methodology and data sources."),F(e,"slot","help")},m(h,k){g(h,e,k),p(e,n),p(e,t),p(e,l),p(e,r),p(e,s),p(s,f),b(i,s,null),p(s,a),b(u,s,null),p(s,c),$=!0},p(h,k){const S={};k&1024&&(S.$$scope={dirty:k,ctx:h}),i.$set(S);const y={};k&1024&&(y.$$scope={dirty:k,ctx:h}),u.$set(y)},i(h){$||(m(i.$$.fragment,h),m(u.$$.fragment,h),$=!0)},o(h){_(i.$$.fragment,h),_(u.$$.fragment,h),$=!1},d(h){h&&d(e),v(i),v(u)}}}function iu(o){let e,n,t,l,r,s,f,i,a;n=new Ue({props:{colorScale:o[1],limits:o[2]}});function u(k){o[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),l=new On({props:c}),B.push(()=>U(l,"value",u));function $(k){o[6](k)}let h={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(h.value=o[0].scenario),f=new st({props:h}),B.push(()=>U(f,"value",$)),{c(){e=T("div"),w(n.$$.fragment),t=C(),w(l.$$.fragment),s=C(),w(f.$$.fragment),F(e,"slot","controls"),ee(e,"border","1px solid black"),ee(e,"padding","8px")},m(k,S){g(k,e,S),b(n,e,null),p(e,t),b(l,e,null),p(e,s),b(f,e,null),a=!0},p(k,S){const y={};!r&&S&1&&(r=!0,y.value=k[0].tripPurpose,W(()=>r=!1)),l.$set(y);const O={};!i&&S&1&&(i=!0,O.value=k[0].scenario,W(()=>i=!1)),f.$set(O)},i(k){a||(m(n.$$.fragment,k),m(l.$$.fragment,k),m(f.$$.fragment,k),a=!0)},o(k){_(n.$$.fragment,k),_(l.$$.fragment,k),_(f.$$.fragment,k),a=!1},d(k){k&&d(e),v(n),v(l),v(f)}}}function au(o){let e,n=o[4](o[9])+"",t;return{c(){e=new Et(!1),t=he(),e.a=t},m(l,r){e.m(n,l,r),g(l,t,r)},p(l,r){r&512&&n!==(n=l[4](l[9])+"")&&e.p(n)},d(l){l&&(d(t),e.d())}}}function fu(o){let e,n;return e=new ie({props:{$$slots:{default:[au,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&1536&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function uu(o){let e,n;const t=[z(ot),{sourceLayer:ot},{paint:{"line-color":we(["get",o[0].scenario],o[2],o[1]),"line-width":Ge,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==ot?"visible":"none"}}];let l={$$slots:{default:[fu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new de({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(ot)),s&0&&{sourceLayer:ot},s&7&&{paint:{"line-color":we(["get",r[0].scenario],r[2],r[1]),"line-width":Ge,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==ot?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function cu(o){let e,n=o[4](o[9])+"",t;return{c(){e=new Et(!1),t=he(),e.a=t},m(l,r){e.m(n,l,r),g(l,t,r)},p(l,r){r&512&&n!==(n=l[4](l[9])+"")&&e.p(n)},d(l){l&&(d(t),e.d())}}}function pu(o){let e,n;return e=new ie({props:{$$slots:{default:[cu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&1536&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $u(o){let e,n;const t=[z(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",o[0].scenario],o[2],o[1]),"line-width":Ge,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==bt?"visible":"none"}}];let l={$$slots:{default:[pu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new de({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&7&&{paint:{"line-color":we(["get",r[0].scenario],r[2],r[1]),"line-width":Ge,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==bt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function mu(o){let e,n,t,l,r,s,f;function i(u){o[7](u)}let a={name:Er,title:_u,$$slots:{controls:[iu],help:[su]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new fe({props:a}),B.push(()=>U(e,"show",i)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${ot}.pmtiles`,$$slots:{default:[uu]},$$scope:{ctx:o}}}),s=new pe({props:{url:`pmtiles://${ce()}/v1/${bt}.pmtiles`,$$slots:{default:[$u]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment),r=C(),w(s.$$.fragment)},m(u,c){b(e,u,c),g(u,t,c),b(l,u,c),g(u,r,c),b(s,u,c),f=!0},p(u,[c]){const $={};c&1025&&($.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,$.show=u[0].show,W(()=>n=!1)),e.$set($);const h={};c&1025&&(h.$$scope={dirty:c,ctx:u}),l.$set(h);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),s.$set(k)},i(u){f||(m(e.$$.fragment,u),m(l.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(e.$$.fragment,u),_(l.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(t),d(r)),v(e,u),v(l,u),v(s,u)}}}let Er="pct",ot="pct_commute",bt="pct_school",_u="Propensity to Cycle Tool";function gu(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function du(o){let[e,n]=o.split("/");return{show:!0,tripPurpose:e,scenario:n}}function hu(o,e,n){let t,l=V.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=wt(Er,{show:!1,tripPurpose:ot,scenario:"baseline"},gu,du);Y(o,f,$=>n(0,t=$));function i($){let h=$.baseline,k=$.gov_target,S=$.go_dutch,y=`<h2>Trip purpose: ${t.tripPurpose==ot?"commuting":"school"}</h2>`;if(y+=`<p>Baseline (2011): <b>${h.toLocaleString()}</b></p>`,h==0)y+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,y+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let O=(k/h).toFixed(1),I=(S/h).toFixed(1);y+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${O}x</b> of baseline)</p>`,y+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${I}x</b> of baseline)</p>`}return y}function a($){o.$$.not_equal(t.tripPurpose,$)&&(t.tripPurpose=$,f.set(t))}function u($){o.$$.not_equal(t.scenario,$)&&(t.scenario=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,l,r,f,i,a,u,c]}class wu extends X{constructor(e){super(),x(this,e,hu,mu,Q,{})}}function bu(o){let e;return{c(){e=L("Basemap")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function vu(o){let e;return{c(){e=L(`Public Sector Geospatial Agreement
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ku(o){let e,n,t,l,r,s,f,i,a,u,c,$,h;return l=new re({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[bu]},$$scope:{ctx:o}}}),c=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[vu]},$$scope:{ctx:o}}}),{c(){e=T("span"),n=T("p"),t=L("The average speed data is collected over a six-month period by "),w(l.$$.fragment),r=L(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=C(),f=T("p"),f.textContent="Data valid as of 1 September, 2023",i=C(),a=T("p"),u=L(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(c.$$.fragment),$=L("."),F(e,"slot","help")},m(k,S){g(k,e,S),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),p(e,f),p(e,i),p(e,a),p(a,u),b(c,a,null),p(a,$),h=!0},p(k,S){const y={};S&512&&(y.$$scope={dirty:S,ctx:k}),l.$set(y);const O={};S&512&&(O.$$scope={dirty:S,ctx:k}),c.$set(O)},i(k){h||(m(l.$$.fragment,k),m(c.$$.fragment,k),h=!0)},o(k){_(l.$$.fragment,k),_(c.$$.fragment,k),h=!1},d(k){k&&d(e),v(l),v(c)}}}function yu(o){let e,n,t,l,r,s;n=new Ue({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),l=new On({props:i}),B.push(()=>U(l,"value",f)),{c(){e=T("div"),w(n.$$.fragment),t=C(),w(l.$$.fragment),F(e,"slot","controls"),ee(e,"border","1px solid black"),ee(e,"padding","8px")},m(a,u){g(a,e,u),b(n,e,null),p(e,t),b(l,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,W(()=>r=!1)),l.$set(c)},i(a){s||(m(n.$$.fragment,a),m(l.$$.fragment,a),s=!0)},o(a){_(n.$$.fragment,a),_(l.$$.fragment,a),s=!1},d(a){a&&d(e),v(n),v(l)}}}function Su(o){let e,n,t=o[8].indicative_mph+"",l,r,s,f,i,a=o[8].highest_mph+"",u,c,$=o[4][o[8].highest_description]+"",h,k;return{c(){e=T("p"),n=L("Posted speed limit: "),l=L(t),r=L(" mph"),s=C(),f=T("p"),i=L("Highest average speed: "),u=L(a),c=L(" mph (during "),h=L($),k=L(")")},m(S,y){g(S,e,y),p(e,n),p(e,l),p(e,r),g(S,s,y),g(S,f,y),p(f,i),p(f,u),p(f,c),p(f,h),p(f,k)},p(S,y){y&256&&t!==(t=S[8].indicative_mph+"")&&q(l,t),y&256&&a!==(a=S[8].highest_mph+"")&&q(u,a),y&256&&$!==($=S[4][S[8].highest_description]+"")&&q(h,$)},d(S){S&&(d(e),d(s),d(f))}}}function Tu(o){let e,n;return e=new ie({props:{$$slots:{default:[Su,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&768&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lu(o){let e,n;const t=[z(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",o[0].kind],o[2],o[1]),"line-width":Ge,"line-opacity":te(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let l={$$slots:{default:[Tu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new de({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&7&&{paint:{"line-color":we(["get",r[0].kind],r[2],r[1]),"line-width":Ge,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function Cu(o){let e,n,t,l,r;function s(i){o[6](i)}let f={name:jt,title:Iu,$$slots:{controls:[yu],help:[ku]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${xt()}/v1/${jt}.pmtiles`,$$slots:{default:[Lu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0].show,W(()=>n=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let jt="road_speeds",Iu="OS Speeds";function Mu(o){return o.show?o.kind:null}function Ou(o){return{show:!0,kind:o}}function ju(o,e,n){let t,l=V.sequential_low_to_high,r=[0,20,30,40,50,90],f=wt(jt,{show:!1,kind:"indicative_mph"},Mu,Ou);Y(o,f,c=>n(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,l,r,f,i,a,u]}class Nu extends X{constructor(e){super(),x(this,e,ju,Cu,Q,{})}}function Pu(o){let e;return{c(){e=L(`Public Sector Geospatial Agreement
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Au(o){let e,n,t,l,r,s,f,i,a,u;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Pu]},$$scope:{ctx:o}}}),{c(){e=T("span"),n=T("p"),n.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=C(),l=T("p"),l.textContent="Data valid as of 1 September, 2023",r=C(),s=T("p"),f=L(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(i.$$.fragment),a=L("."),F(e,"slot","help")},m(c,$){g(c,e,$),p(e,n),p(e,t),p(e,l),p(e,r),p(e,s),p(s,f),b(i,s,null),p(s,a),u=!0},p(c,$){const h={};$&64&&(h.$$scope={dirty:$,ctx:c}),i.$set(h)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){_(i.$$.fragment,c),u=!1},d(c){c&&d(e),v(i)}}}function Ru(o){let e,n,t;return n=new Ue({props:{colorScale:o[1],limits:o[2]}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","controls")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function Du(o){let e,n,t,l=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",$,h;return{c(){e=T("p"),n=L("Average width: "),t=T("b"),r=L(l),s=L(`
        meters`),f=C(),i=T("p"),a=L("Minimum width: "),u=T("b"),$=L(c),h=L(`
        meters`)},m(k,S){g(k,e,S),p(e,n),p(e,t),p(t,r),p(e,s),g(k,f,S),g(k,i,S),p(i,a),p(i,u),p(u,$),p(i,h)},p(k,S){S&32&&l!==(l=k[5].average+"")&&q(r,l),S&32&&c!==(c=k[5].minimum+"")&&q($,c)},d(k){k&&(d(e),d(f),d(i))}}}function Gu(o){let e,n;return e=new ie({props:{$$slots:{default:[Du,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&96&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fu(o){let e,n;const t=[z(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Ge,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[Gu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new de({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(Nt)),s&0&&{sourceLayer:Nt},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],r[2],r[1]),"line-width":Ge,"line-opacity":te(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function qu(o){let e,n,t,l,r;function s(i){o[4](i)}let f={name:Nt,title:zu,$$slots:{controls:[Ru],help:[Au]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${xt()}/v1/${Nt}.pmtiles`,$$slots:{default:[Fu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Nt="road_widths",zu="OS Road widths";function Hu(o,e,n){let t,l=V.sequential_low_to_high,r=[0,5,10,15,20,100],s=ue(Nt);Y(o,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,r,s,f]}class Eu extends X{constructor(e){super(),x(this,e,Hu,qu,Q,{})}}function Bu(o){let e,n,t;return n=new Te({props:{color:V.trams}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","icon")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function Uu(o){let e,n,t,l,r;return l=new lt({}),{c(){e=T("span"),n=T("p"),n.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=C(),w(l.$$.fragment),F(e,"slot","help")},m(s,f){g(s,e,f),p(e,n),p(e,t),b(l,e,null),r=!0},p:Z,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),r=!1},d(s){s&&d(e),v(l)}}}function Wu(o){let e,n;const t=[z(Pt),{sourceLayer:Pt},{paint:{"line-color":V.trams,"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let l={};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new de({props:l}),e.$on("click",Vu),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Pt)),s&0&&{sourceLayer:Pt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function Yu(o){let e,n,t,l,r;function s(i){o[2](i)}let f={name:Pt,title:Ju,$$slots:{help:[Uu],icon:[Bu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Pt}.pmtiles`,$$slots:{default:[Wu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Pt="trams",Ju="Trams";function Vu(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Qu(o,e,n){let t,l=ue(Pt);Y(o,l,s=>n(0,t=s));function r(s){t=s,l.set(t)}return[t,l,r]}class Zu extends X{constructor(e){super(),x(this,e,Qu,Yu,Q,{})}}function Ku(o){let e;return{c(){e=L(`Bus Open Data Service
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Xu(o){let e,n,t,l,r,s,f,i,a,u;return l=new re({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Ku]},$$scope:{ctx:o}}}),a=new Le({}),{c(){e=T("span"),n=T("p"),t=L("Data from the "),w(l.$$.fragment),r=L(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=C(),f=T("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=C(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){g(c,e,$),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),p(e,f),p(e,i),b(a,e,null),u=!0},p(c,$){const h={};$&64&&(h.$$scope={dirty:$,ctx:c}),l.$set(h)},i(c){u||(m(l.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(l.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(l),v(a)}}}function xu(o){let e,n,t,l,r;return l=new Ue({props:{colorScale:o[1],limits:o[2]}}),{c(){e=T("div"),n=T("p"),n.textContent="Peak hourly frequency:",t=C(),w(l.$$.fragment),F(e,"slot","controls")},m(s,f){g(s,e,f),p(e,n),p(e,t),b(l,e,null),r=!0},p:Z,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),r=!1},d(s){s&&d(e),v(l)}}}function ec(o){let e,n,t,l=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,$,h,k,S,y=o[5].peak_description+"",O,I,N,P,M,j=o[5].total+"",A,R,H=o[5].total_description+"",J,ae;return{c(){e=T("p"),n=L("Stop name: "),t=T("b"),r=L(l),s=C(),f=T("p"),i=L("Peak: "),a=T("b"),c=L(u),$=L(`
        buses during the busiest hour of any day`),h=C(),k=T("p"),S=L("The peak hour is "),O=L(y),I=C(),N=T("p"),P=L("Total buses per day: "),M=T("b"),A=L(j),R=L(`
        (for `),J=L(H),ae=L(", the busiest day of the week)")},m(G,K){g(G,e,K),p(e,n),p(e,t),p(t,r),g(G,s,K),g(G,f,K),p(f,i),p(f,a),p(a,c),p(f,$),g(G,h,K),g(G,k,K),p(k,S),p(k,O),g(G,I,K),g(G,N,K),p(N,P),p(N,M),p(M,A),p(N,R),p(N,J),p(N,ae)},p(G,K){K&32&&l!==(l=G[5].stop_name+"")&&q(r,l),K&32&&u!==(u=G[5].peak+"")&&q(c,u),K&32&&y!==(y=G[5].peak_description+"")&&q(O,y),K&32&&j!==(j=G[5].total+"")&&q(A,j),K&32&&H!==(H=G[5].total_description+"")&&q(J,H)},d(G){G&&(d(e),d(s),d(f),d(h),d(k),d(I),d(N))}}}function tc(o){let e,n;return e=new ie({props:{$$slots:{default:[ec,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&96&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nc(o){let e,n;const t=[z(At),{sourceLayer:At},{paint:{"circle-color":we(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[tc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new Bt({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(At)),s&0&&{sourceLayer:At},s&6&&{paint:{"circle-color":we(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function lc(o){let e,n,t,l,r;function s(i){o[4](i)}let f={name:At,title:rc,$$slots:{controls:[xu],help:[Xu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${At}.pmtiles`,$$slots:{default:[nc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let At="bus_stops",rc="Bus stops";function oc(o,e,n){let t,l=V.sequential_low_to_high,r=[0,3,10,20,30,100],s=ue(At);Y(o,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,r,s,f]}class sc extends X{constructor(e){super(),x(this,e,oc,lc,Q,{})}}function ic(o){let e;return{c(){e=L("crossing")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ac(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[ic]},$$scope:{ctx:o}}}),f=new lt({}),{c(){e=T("span"),n=T("p"),t=L("This shows "),w(l.$$.fragment),r=L(" data from OpenStreetMap (as of 20 October 2024)."),s=C(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){g(a,e,u),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(l.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(l),v(f)}}}function fc(o){let e,n,t;return n=new Wt({props:{rows:o[2]}}),{c(){e=T("div"),w(n.$$.fragment),F(e,"slot","controls")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function uc(o){let e,n=jl(o[4])+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&16&&n!==(n=jl(l[4])+"")&&q(t,n)},d(l){l&&d(e)}}}function cc(o){let e,n;return e=new ie({props:{$$slots:{default:[uc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&48&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function pc(o){let e,n;const t=[z(Rt),{sourceLayer:Rt},{paint:{"circle-color":Xe(["get","crossing"],{traffic_signals:V.signalized_crossing},V.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[cc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new Bt({props:l}),e.$on("click",_c),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Rt)),s&0&&{sourceLayer:Rt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function $c(o){let e,n,t,l,r;function s(i){o[3](i)}let f={name:Rt,title:mc,$$slots:{controls:[fc],help:[ac]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Rt}.pmtiles`,$$slots:{default:[pc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Rt="crossings",mc="Crossings";function jl(o){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[o.crossing]??`Unknown crossing type (${o.crossing})`}function _c(o){window.open(`http://openstreetmap.org/node/${o.detail.features[0].properties.osm_id}`,"_blank")}function gc(o,e,n){let t,l=ue(Rt);Y(o,l,f=>n(0,t=f));let r=[["Signalized",V.signalized_crossing],["Other",V.other_crossing]];function s(f){t=f,l.set(t)}return[t,l,r,s]}class dc extends X{constructor(e){super(),x(this,e,gc,$c,Q,{})}}function hc(o){let e;return{c(){e=L("OS Terrain 50")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function wc(o){let e,n,t,l,r,s,f,i,a,u,c,$,h,k;return i=new re({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[hc]},$$scope:{ctx:o}}}),c=new Le({}),h=new lt({}),{c(){e=T("span"),n=T("p"),n.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=C(),l=T("p"),l.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=C(),s=T("p"),f=L("This layer is built from "),w(i.$$.fragment),a=L(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=C(),w(c.$$.fragment),$=C(),w(h.$$.fragment),F(e,"slot","help")},m(S,y){g(S,e,y),p(e,n),p(e,t),p(e,l),p(e,r),p(e,s),p(s,f),b(i,s,null),p(s,a),p(e,u),b(c,e,null),p(e,$),b(h,e,null),k=!0},p(S,y){const O={};y&64&&(O.$$scope={dirty:y,ctx:S}),i.$set(O)},i(S){k||(m(i.$$.fragment,S),m(c.$$.fragment,S),m(h.$$.fragment,S),k=!0)},o(S){_(i.$$.fragment,S),_(c.$$.fragment,S),_(h.$$.fragment,S),k=!1},d(S){S&&d(e),v(i),v(c),v(h)}}}function bc(o){let e,n,t,l,r;return n=new Ue({props:{colorScale:o[1],limits:o[2]}}),{c(){e=T("span"),w(n.$$.fragment),t=C(),l=T("p"),l.innerHTML=`<img src="${vo}" alt="arrow"/>
      Arrows point uphill`,F(e,"slot","controls")},m(s,f){g(s,e,f),b(n,e,null),p(e,t),p(e,l),r=!0},p:Z,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function vc(o){let e,n,t,l=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=T("p"),n=L("Gradient: "),t=T("b"),r=L(l),s=L(`
        %`)},m(f,i){g(f,e,i),p(e,n),p(e,t),p(t,r),p(e,s)},p(f,i){i&32&&l!==(l=Math.abs(f[5].gradient)/100+"")&&q(r,l)},d(f){f&&d(e)}}}function kc(o){let e,n;return e=new ie({props:{$$slots:{default:[vc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&96&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function yc(o){let e,n,t,l;const r=[z(Ke),{sourceLayer:Ke},{manageHoverState:!0},{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":Ge,"line-opacity":te(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[kc]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=ne(s,r[a]);e=new de({props:s});const f=[z(Ke+"_arrows"),{sourceLayer:Ke},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new Nn({props:i}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(a,u){b(e,a,u),g(a,n,u),b(t,a,u),l=!0},p(a,u){const c=u&7?le(r,[u&0&&oe(z(Ke)),u&0&&{sourceLayer:Ke},r[2],u&6&&{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Ge,"line-opacity":te(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?le(f,[u&0&&oe(z(Ke+"_arrows")),u&0&&{sourceLayer:Ke},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){l||(m(e.$$.fragment,a),m(t.$$.fragment,a),l=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),l=!1},d(a){a&&d(n),v(e,a),v(t,a)}}}function Sc(o){let e,n,t,l,r;function s(i){o[4](i)}let f={name:Ke,title:Tc,$$slots:{controls:[bc],help:[wc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ke}.pmtiles`,$$slots:{default:[yc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Ke="gradient",Tc="Gradients";function Lc(o,e,n){let t,l=V.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=ue(Ke);Y(o,s,i=>n(0,t=i));function f(i){t=i,s.set(t)}return[t,l,r,s,f]}class Cc extends X{constructor(e){super(),x(this,e,Lc,Sc,Q,{})}}function Ic(o){let e,n;return{c(){e=T("img"),F(e,"slot","icon"),Zt(e.src,n=ko)||F(e,"src",n),F(e,"alt","a logo representing cycle parking")},m(t,l){g(t,e,l)},p:Z,d(t){t&&d(e)}}}function Mc(o){let e;return{c(){e=L("OpenStreetMap")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Oc(o){let e;return{c(){e=L("OpenStreetMap Carto")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function jc(o){let e,n,t,l,r,s,f,i,a,u,c,$;return l=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[Mc]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[Oc]},$$scope:{ctx:o}}}),c=new lt({}),{c(){e=T("span"),n=T("p"),t=L("Cycle parking, according to "),w(l.$$.fragment),r=L(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=C(),f=T("p"),i=L("Icon from "),w(a.$$.fragment),u=C(),w(c.$$.fragment),F(e,"slot","help")},m(h,k){g(h,e,k),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),p(e,f),p(f,i),b(a,f,null),p(e,u),b(c,e,null),$=!0},p(h,k){const S={};k&16&&(S.$$scope={dirty:k,ctx:h}),l.$set(S);const y={};k&16&&(y.$$scope={dirty:k,ctx:h}),a.$set(y)},i(h){$||(m(l.$$.fragment,h),m(a.$$.fragment,h),m(c.$$.fragment,h),$=!0)},o(h){_(l.$$.fragment,h),_(a.$$.fragment,h),_(c.$$.fragment,h),$=!1},d(h){h&&d(e),v(l),v(a),v(c)}}}function Nc(o){let e,n,t,l=(o[3].capacity??"unknown")+"",r;return{c(){e=T("p"),n=L("Capacity: "),t=T("b"),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&8&&l!==(l=(s[3].capacity??"unknown")+"")&&q(r,l)},d(s){s&&d(e)}}}function Pc(o){let e,n;return e=new ie({props:{$$slots:{default:[Nc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&24&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ac(o){let e,n;const t=[z(Dt),{sourceLayer:Dt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[Pc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new Nn({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Dt)),s&0&&{sourceLayer:Dt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function Rc(o){let e,n,t,l,r;function s(i){o[2](i)}let f={name:Dt,title:Dc,$$slots:{help:[jc],icon:[Ic]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Dt}.pmtiles`,$$slots:{default:[Ac]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Dt="cycle_parking",Dc="Cycle parking";function Gc(o,e,n){let t,l=ue(Dt);Y(o,l,s=>n(0,t=s));function r(s){t=s,l.set(t)}return[t,l,r]}class Fc extends X{constructor(e){super(),x(this,e,Gc,Rc,Q,{})}}function qc(o){let e,n,t,l,r;return l=new lt({}),{c(){e=T("span"),n=T("p"),n.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=C(),w(l.$$.fragment),F(e,"slot","help")},m(s,f){g(s,e,f),p(e,n),p(e,t),b(l,e,null),r=!0},p:Z,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),r=!1},d(s){s&&d(e),v(l)}}}function zc(o){let e,n,t;return e=new Te({props:{color:V.education.schools}}),{c(){w(e.$$.fragment),n=L(`
        Schools`)},m(l,r){b(e,l,r),g(l,n,r),t=!0},p:Z,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&d(n),v(e,l)}}}function Hc(o){let e,n,t;return e=new Te({props:{color:V.education.colleges}}),{c(){w(e.$$.fragment),n=L(`
        Colleges`)},m(l,r){b(e,l,r),g(l,n,r),t=!0},p:Z,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&d(n),v(e,l)}}}function Ec(o){let e,n,t;return e=new Te({props:{color:V.education.universities}}),{c(){w(e.$$.fragment),n=L(`
        Universities`)},m(l,r){b(e,l,r),g(l,n,r),t=!0},p:Z,i(l){t||(m(e.$$.fragment,l),t=!0)},o(l){_(e.$$.fragment,l),t=!1},d(l){l&&d(n),v(e,l)}}}function Bc(o){let e,n,t,l,r,s,f,i,a;function u(y){o[3](y)}let c={$$slots:{default:[zc]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new Ee({props:c}),B.push(()=>U(e,"checked",u));function $(y){o[4](y)}let h={$$slots:{default:[Hc]},$$scope:{ctx:o}};o[0].college!==void 0&&(h.checked=o[0].college),l=new Ee({props:h}),B.push(()=>U(l,"checked",$));function k(y){o[5](y)}let S={$$slots:{default:[Ec]},$$scope:{ctx:o}};return o[0].university!==void 0&&(S.checked=o[0].university),f=new Ee({props:S}),B.push(()=>U(f,"checked",k)),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment),s=C(),w(f.$$.fragment)},m(y,O){b(e,y,O),g(y,t,O),b(l,y,O),g(y,s,O),b(f,y,O),a=!0},p(y,O){const I={};O&2048&&(I.$$scope={dirty:O,ctx:y}),!n&&O&1&&(n=!0,I.checked=y[0].school,W(()=>n=!1)),e.$set(I);const N={};O&2048&&(N.$$scope={dirty:O,ctx:y}),!r&&O&1&&(r=!0,N.checked=y[0].college,W(()=>r=!1)),l.$set(N);const P={};O&2048&&(P.$$scope={dirty:O,ctx:y}),!i&&O&1&&(i=!0,P.checked=y[0].university,W(()=>i=!1)),f.$set(P)},i(y){a||(m(e.$$.fragment,y),m(l.$$.fragment,y),m(f.$$.fragment,y),a=!0)},o(y){_(e.$$.fragment,y),_(l.$$.fragment,y),_(f.$$.fragment,y),a=!1},d(y){y&&(d(t),d(s)),v(e,y),v(l,y),v(f,y)}}}function Uc(o){let e,n,t;return n=new De({props:{small:!0,$$slots:{default:[Bc]},$$scope:{ctx:o}}}),{c(){e=T("div"),w(n.$$.fragment),F(e,"slot","controls"),ee(e,"border","1px solid black"),ee(e,"padding","8px")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p(l,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function Wc(o){let e,n=(o[10].name??"Unnamed institution")+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&1024&&n!==(n=(l[10].name??"Unnamed institution")+"")&&q(t,n)},d(l){l&&d(e)}}}function Yc(o){let e,n;return e=new ie({props:{$$slots:{default:[Wc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&3072&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jc(o){let e,n;const t=[z(Gt),{sourceLayer:Gt},{paint:{"fill-color":Xe(["get","type"],{school:V.education.schools,college:V.education.colleges,university:V.education.universities},"grey"),"fill-opacity":te(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Yc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new ze({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&5?le(t,[s&0&&oe(z(Gt)),s&0&&{sourceLayer:Gt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function Vc(o){let e,n,t,l,r;function s(i){o[6](i)}let f={name:Gt,title:Qc,$$slots:{controls:[Uc],help:[qc]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Gt}.pmtiles`,$$slots:{default:[Jc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0].show,W(()=>n=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Gt="education",Qc="Education";function Zc(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function Kc(o,e,n){let t,l=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(h){return h.show?l.filter(k=>h[k]).join(","):null}let f=wt(Gt,r,s,Zc);Y(o,f,h=>n(0,t=h));function i(h){let k=l.filter(S=>h[S]);return["in",["get","type"],["literal",k]]}function a(h){o.$$.not_equal(t.school,h)&&(t.school=h,f.set(t))}function u(h){o.$$.not_equal(t.college,h)&&(t.college=h,f.set(t))}function c(h){o.$$.not_equal(t.university,h)&&(t.university=h,f.set(t))}function $(h){o.$$.not_equal(t.show,h)&&(t.show=h,f.set(t))}return[t,f,i,a,u,c,$]}class Xc extends X{constructor(e){super(),x(this,e,Kc,Vc,Q,{})}}function xc(o){let e,n,t;return n=new Te({props:{color:V.hospitals}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","icon")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function ep(o){let e;return{c(){e=L("hospital")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function tp(o){let e,n,t,l,r,s,f,i;return l=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[ep]},$$scope:{ctx:o}}}),f=new lt({}),{c(){e=T("span"),n=T("p"),t=L("This shows "),w(l.$$.fragment),r=L(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=C(),w(f.$$.fragment),F(e,"slot","help")},m(a,u){g(a,e,u),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),l.$set(c)},i(a){i||(m(l.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(l.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(l),v(f)}}}function np(o){let e,n=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&8&&n!==(n=(l[3].name??"Unnamed hospital")+"")&&q(t,n)},d(l){l&&d(e)}}}function lp(o){let e,n;return e=new ie({props:{$$slots:{default:[np,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&24&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rp(o){let e,n;const t=[z(Ft),{sourceLayer:Ft},{paint:{"fill-color":V.hospitals,"fill-opacity":te(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[lp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new ze({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Ft)),s&0&&{sourceLayer:Ft},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function op(o){let e,n,t,l,r;function s(i){o[2](i)}let f={name:Ft,title:sp,$$slots:{help:[tp],icon:[xc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ft}.pmtiles`,$$slots:{default:[rp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Ft="hospitals",sp="Hospitals";function ip(o,e,n){let t,l=ue(Ft);Y(o,l,s=>n(0,t=s));function r(s){t=s,l.set(t)}return[t,l,r]}class ap extends X{constructor(e){super(),x(this,e,ip,op,Q,{})}}function fp(o){let e,n;return{c(){e=T("img"),F(e,"slot","icon"),Zt(e.src,n=yo)||F(e,"src",n),F(e,"alt","A logo representing a train")},m(t,l){g(t,e,l)},p:Z,d(t){t&&d(e)}}}function up(o){let e;return{c(){e=L("railway station")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function cp(o){let e;return{c(){e=L(`National Rail
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function pp(o){let e,n,t,l,r,s,f,i,a,u,c,$,h;return l=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[up]},$$scope:{ctx:o}}}),a=new re({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[cp]},$$scope:{ctx:o}}}),$=new lt({}),{c(){e=T("div"),n=T("p"),t=L("This shows "),w(l.$$.fragment),r=L(" data from OpenStreetMap (as of 20 October 2024)."),s=C(),f=T("p"),i=L("Icon from "),w(a.$$.fragment),u=L(". (Note that not all stations shown are National Rail.)"),c=C(),w($.$$.fragment),F(e,"slot","help")},m(k,S){g(k,e,S),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),p(e,f),p(f,i),b(a,f,null),p(f,u),p(e,c),b($,e,null),h=!0},p(k,S){const y={};S&16&&(y.$$scope={dirty:S,ctx:k}),l.$set(y);const O={};S&16&&(O.$$scope={dirty:S,ctx:k}),a.$set(O)},i(k){h||(m(l.$$.fragment,k),m(a.$$.fragment,k),m($.$$.fragment,k),h=!0)},o(k){_(l.$$.fragment,k),_(a.$$.fragment,k),_($.$$.fragment,k),h=!1},d(k){k&&d(e),v(l),v(a),v($)}}}function $p(o){let e,n=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&8&&n!==(n=(l[3].name??"Unnamed railway station")+"")&&q(t,n)},d(l){l&&d(e)}}}function mp(o){let e,n;return e=new ie({props:{$$slots:{default:[$p,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&24&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function _p(o){let e,n;const t=[z(Xt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let l={$$slots:{default:[mp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new Nn({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(Xt)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function gp(o){let e,n,t,l,r;function s(i){o[2](i)}let f={name:Xt,title:dp,$$slots:{help:[pp],icon:[fp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new Ut({props:{data:`${ce()}/v1/${Xt}.geojson`,$$slots:{default:[_p]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Xt="railway_stations",dp="Railway stations";function hp(o,e,n){let t,l=ue(Xt);Y(o,l,s=>n(0,t=s));function r(s){t=s,l.set(t)}return[t,l,r]}class wp extends X{constructor(e){super(),x(this,e,hp,gp,Q,{})}}function bp(o){let e,n,t;return n=new Te({props:{color:V.sports_spaces}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","icon")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function vp(o){let e;return{c(){e=L("sports pitches")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function kp(o){let e;return{c(){e=L("sports centres")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function yp(o){let e,n,t,l,r,s,f,i,a,u;return l=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[vp]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[kp]},$$scope:{ctx:o}}}),a=new lt({}),{c(){e=T("span"),n=T("p"),t=L("This shows "),w(l.$$.fragment),r=L(" and "),w(s.$$.fragment),f=L(" data from OpenStreetMap (as of 20 October 2024)."),i=C(),w(a.$$.fragment),F(e,"slot","help")},m(c,$){g(c,e,$),p(e,n),p(n,t),b(l,n,null),p(n,r),b(s,n,null),p(n,f),p(e,i),b(a,e,null),u=!0},p(c,$){const h={};$&16&&(h.$$scope={dirty:$,ctx:c}),l.$set(h);const k={};$&16&&(k.$$scope={dirty:$,ctx:c}),s.$set(k)},i(c){u||(m(l.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(l.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(l),v(s),v(a)}}}function Sp(o){let e,n=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&8&&n!==(n=(l[3].name??"Unnamed sports space")+"")&&q(t,n)},d(l){l&&d(e)}}}function Tp(o){let e,n;return e=new ie({props:{$$slots:{default:[Sp,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&24&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Lp(o){let e,n;const t=[z(qt),{sourceLayer:qt},{paint:{"fill-color":V.sports_spaces,"fill-opacity":te(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let l={$$slots:{default:[Tp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new ze({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&1?le(t,[s&0&&oe(z(qt)),s&0&&{sourceLayer:qt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function Cp(o){let e,n,t,l,r;function s(i){o[2](i)}let f={name:qt,title:Ip,$$slots:{help:[yp],icon:[bp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${qt}.pmtiles`,$$slots:{default:[Lp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let qt="sports_spaces",Ip="Sports spaces";function Mp(o,e,n){let t,l=ue(qt);Y(o,l,s=>n(0,t=s));function r(s){t=s,l.set(t)}return[t,l,r]}class Op extends X{constructor(e){super(),x(this,e,Mp,Cp,Q,{})}}function jp(o){let e;return{c(){e=L("DfT stats19")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Np(o){let e;return{c(){e=L("documented by DfT")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Pp(o){let e,n,t,l,r,s,f,i,a,u,c,$,h,k,S,y,O,I,N,P,M,j,A,R;return l=new re({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[jp]},$$scope:{ctx:o}}}),I=new re({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Np]},$$scope:{ctx:o}}}),A=new Le({}),{c(){e=T("span"),n=T("p"),t=L("This layer shows collisions recorded in the "),w(l.$$.fragment),r=L(" dataset, as of 30 September 2024. Please note these limitations:"),s=C(),f=T("ul"),i=T("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=C(),u=T("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=C(),$=T("li"),$.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,h=C(),k=T("li"),k.textContent='The "pedestrians" category also include mobility scooters',S=C(),y=T("li"),O=L("All limitations "),w(I.$$.fragment),N=L(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),P=C(),M=T("p"),M.textContent="You can click a point to open the full report, thanks to CycleStreets.",j=C(),w(A.$$.fragment),F(e,"slot","help")},m(H,J){g(H,e,J),p(e,n),p(n,t),b(l,n,null),p(n,r),p(e,s),p(e,f),p(f,i),p(f,a),p(f,u),p(f,c),p(f,$),p(f,h),p(f,k),p(f,S),p(f,y),p(y,O),b(I,y,null),p(y,N),p(e,P),p(e,M),p(e,j),b(A,e,null),R=!0},p(H,J){const ae={};J&4194304&&(ae.$$scope={dirty:J,ctx:H}),l.$set(ae);const G={};J&4194304&&(G.$$scope={dirty:J,ctx:H}),I.$set(G)},i(H){R||(m(l.$$.fragment,H),m(I.$$.fragment,H),m(A.$$.fragment,H),R=!0)},o(H){_(l.$$.fragment,H),_(I.$$.fragment,H),_(A.$$.fragment,H),R=!1},d(H){H&&d(e),v(l),v(I),v(A)}}}function Ap(o){let e;return{c(){e=L("Pedestrians")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Rp(o){let e;return{c(){e=L("Cyclists")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Dp(o){let e;return{c(){e=L("Horse riders")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Gp(o){let e;return{c(){e=L("Other")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Fp(o){let e,n,t,l,r,s,f,i,a,u,c,$;function h(M){o[10](M)}let k={$$slots:{default:[Ap]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(k.checked=o[0].pedestrians),e=new Ee({props:k}),B.push(()=>U(e,"checked",h));function S(M){o[11](M)}let y={$$slots:{default:[Rp]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(y.checked=o[0].cyclists),l=new Ee({props:y}),B.push(()=>U(l,"checked",S));function O(M){o[12](M)}let I={$$slots:{default:[Dp]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(I.checked=o[0].horseRiders),f=new Ee({props:I}),B.push(()=>U(f,"checked",O));function N(M){o[13](M)}let P={$$slots:{default:[Gp]},$$scope:{ctx:o}};return o[0].other!==void 0&&(P.checked=o[0].other),u=new Ee({props:P}),B.push(()=>U(u,"checked",N)),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment),s=C(),w(f.$$.fragment),a=C(),w(u.$$.fragment)},m(M,j){b(e,M,j),g(M,t,j),b(l,M,j),g(M,s,j),b(f,M,j),g(M,a,j),b(u,M,j),$=!0},p(M,j){const A={};j&4194304&&(A.$$scope={dirty:j,ctx:M}),!n&&j&1&&(n=!0,A.checked=M[0].pedestrians,W(()=>n=!1)),e.$set(A);const R={};j&4194304&&(R.$$scope={dirty:j,ctx:M}),!r&&j&1&&(r=!0,R.checked=M[0].cyclists,W(()=>r=!1)),l.$set(R);const H={};j&4194304&&(H.$$scope={dirty:j,ctx:M}),!i&&j&1&&(i=!0,H.checked=M[0].horseRiders,W(()=>i=!1)),f.$set(H);const J={};j&4194304&&(J.$$scope={dirty:j,ctx:M}),!c&&j&1&&(c=!0,J.checked=M[0].other,W(()=>c=!1)),u.$set(J)},i(M){$||(m(e.$$.fragment,M),m(l.$$.fragment,M),m(f.$$.fragment,M),m(u.$$.fragment,M),$=!0)},o(M){_(e.$$.fragment,M),_(l.$$.fragment,M),_(f.$$.fragment,M),_(u.$$.fragment,M),$=!1},d(M){M&&(d(t),d(s),d(a)),v(e,M),v(l,M),v(f,M),v(u,M)}}}function qp(o){let e,n,t,l,r,s,f,i,a,u,c,$,h;return n=new De({props:{small:!0,$$slots:{default:[Fp]},$$scope:{ctx:o}}}),u=new Wt({props:{rows:o[9]}}),{c(){e=T("div"),w(n.$$.fragment),t=C(),l=T("div"),r=L(`Filter years:
      `),s=T("input"),f=L(`
      -
      `),i=T("input"),a=C(),w(u.$$.fragment),F(s,"type","number"),F(s,"min",2017),F(s,"max",2023),F(s,"class","svelte-1ft65rw"),F(i,"type","number"),F(i,"min",2017),F(i,"max",2023),F(i,"class","svelte-1ft65rw"),F(e,"slot","controls"),ee(e,"border","1px solid black"),ee(e,"padding","8px")},m(k,S){g(k,e,S),b(n,e,null),p(e,t),p(e,l),p(l,r),p(l,s),tt(s,o[0].minYear),p(l,f),p(l,i),tt(i,o[0].maxYear),p(e,a),b(u,e,null),c=!0,$||(h=[mt(s,"input",o[14]),mt(i,"input",o[15])],$=!0)},p(k,S){const y={};S&4194305&&(y.$$scope={dirty:S,ctx:k}),n.$set(y),S&1&&Kt(s.value)!==k[0].minYear&&tt(s,k[0].minYear),S&1&&Kt(i.value)!==k[0].maxYear&&tt(i,k[0].maxYear)},i(k){c||(m(n.$$.fragment,k),m(u.$$.fragment,k),c=!0)},o(k){_(n.$$.fragment,k),_(u.$$.fragment,k),c=!1},d(k){k&&d(e),v(n),v(u),$=!1,Pr(h)}}}function Nl(o){let e,n,t,l=o[3][o[21].pedestrian_location]+"",r;return{c(){e=T("p"),n=L("Pedestrian location: "),t=T("b"),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&2097152&&l!==(l=s[3][s[21].pedestrian_location]+"")&&q(r,l)},d(s){s&&d(e)}}}function Pl(o){let e,n,t,l=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=T("p"),n=L("Pedestrian movement: "),t=T("b"),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(t,r)},p(s,f){f&2097152&&l!==(l=s[4][s[21].pedestrian_movement]+"")&&q(r,l)},d(s){s&&d(e)}}}function zp(o){let e,n,t,l=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,$,h,k,S,y=Al(o[21])+"",O,I,N,P,M,j=o[21].pedestrian_location&&Nl(o),A=o[21].pedestrian_movement&&Pl(o);return{c(){e=T("p"),n=L("Year: "),t=T("b"),r=L(l),s=C(),f=T("p"),i=L("Severity: "),a=T("b"),c=L(u),$=C(),h=T("p"),k=L("Casualties: "),S=T("b"),O=L(y),I=C(),j&&j.c(),N=C(),A&&A.c(),P=C(),M=T("p"),M.textContent="Click to open full report in CycleStreets"},m(R,H){g(R,e,H),p(e,n),p(e,t),p(t,r),g(R,s,H),g(R,f,H),p(f,i),p(f,a),p(a,c),g(R,$,H),g(R,h,H),p(h,k),p(h,S),p(S,O),g(R,I,H),j&&j.m(R,H),g(R,N,H),A&&A.m(R,H),g(R,P,H),g(R,M,H)},p(R,H){H&2097152&&l!==(l=R[21].year+"")&&q(r,l),H&2097152&&u!==(u=R[5][R[21].severity]+"")&&q(c,u),H&2097152&&y!==(y=Al(R[21])+"")&&q(O,y),R[21].pedestrian_location?j?j.p(R,H):(j=Nl(R),j.c(),j.m(N.parentNode,N)):j&&(j.d(1),j=null),R[21].pedestrian_movement?A?A.p(R,H):(A=Pl(R),A.c(),A.m(P.parentNode,P)):A&&(A.d(1),A=null)},d(R){R&&(d(e),d(s),d(f),d($),d(h),d(I),d(N),d(P),d(M)),j&&j.d(R),A&&A.d(R)}}}function Hp(o){let e,n;return e=new ie({props:{$$slots:{default:[zp,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&6291456&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ep(o){let e,n;const t=[z(zt),{sourceLayer:zt},{paint:{"circle-color":we(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[Hp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new Bt({props:l}),e.$on("click",Yp),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&451?le(t,[s&0&&oe(z(zt)),s&0&&{sourceLayer:zt},s&448&&{paint:{"circle-color":we(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function Bp(o){let e,n,t,l,r;function s(i){o[16](i)}let f={name:zt,title:Up,$$slots:{controls:[qp],help:[Pp]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${zt}.pmtiles`,$$slots:{default:[Ep]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0].show,W(()=>n=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let zt="stats19",Up="Stats19";function Wp(o){let[e,n,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(n),maxYear:parseInt(t)}}function Al(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function Yp(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function Jp(o,e,n){let t,l,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(R){return R.show?`${r.filter(J=>R[J]).join(",")}/${R.minYear}/${R.maxYear}`:null}let i=wt(zt,s,f,Wp);Y(o,i,R=>n(0,l=R));function a(R,H,J,ae,G,K){let E=["any"];return l.pedestrians&&E.push(["get","pedestrian"]),l.cyclists&&E.push(["get","cyclist"]),l.horseRiders&&E.push(["get","horse_rider"]),l.other&&E.push(["get","other"]),["all",[">=",["get","year"],l.minYear],["<=",["get","year"],l.maxYear],E]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},$={1:"Fatal",2:"Serious",3:"Slight"},h=V.sequential_low_to_high[4],k=V.sequential_low_to_high[2],S=V.sequential_low_to_high[0],y=[["Fatal",h],["Serious",k],["Slight",S]];function O(R){o.$$.not_equal(l.pedestrians,R)&&(l.pedestrians=R,i.set(l))}function I(R){o.$$.not_equal(l.cyclists,R)&&(l.cyclists=R,i.set(l))}function N(R){o.$$.not_equal(l.horseRiders,R)&&(l.horseRiders=R,i.set(l))}function P(R){o.$$.not_equal(l.other,R)&&(l.other=R,i.set(l))}function M(){l.minYear=Kt(this.value),i.set(l)}function j(){l.maxYear=Kt(this.value),i.set(l)}function A(R){o.$$.not_equal(l.show,R)&&(l.show=R,i.set(l))}return o.$$.update=()=>{o.$$.dirty&1&&n(1,t=a(l.minYear,l.maxYear,l.pedestrians,l.cyclists,l.horseRiders,l.other))},[l,t,i,u,c,$,h,k,S,y,O,I,N,P,M,j,A]}class Vp extends X{constructor(e){super(),x(this,e,Jp,Bp,Q,{})}}function Qp(o){let e;return{c(){e=L(`DfT road statistics
      `)},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Zp(o){let e;return{c(){e=L("methodology")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Kp(o){let e,n,t,l,r,s,f,i,a,u,c,$;return l=new re({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Qp]},$$scope:{ctx:o}}}),s=new re({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Zp]},$$scope:{ctx:o}}}),c=new Le({}),{c(){e=T("span"),n=T("p"),t=L("AADF (annual average daily flow) data from "),w(l.$$.fragment),r=L(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),w(s.$$.fragment),f=L(" for details and caveats about the measurements."),i=C(),a=T("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=C(),w(c.$$.fragment),F(e,"slot","help")},m(h,k){g(h,e,k),p(e,n),p(n,t),b(l,n,null),p(n,r),b(s,n,null),p(n,f),p(e,i),p(e,a),p(e,u),b(c,e,null),$=!0},p(h,k){const S={};k&128&&(S.$$scope={dirty:k,ctx:h}),l.$set(S);const y={};k&128&&(y.$$scope={dirty:k,ctx:h}),s.$set(y)},i(h){$||(m(l.$$.fragment,h),m(s.$$.fragment,h),m(c.$$.fragment,h),$=!0)},o(h){_(l.$$.fragment,h),_(s.$$.fragment,h),_(c.$$.fragment,h),$=!1},d(h){h&&d(e),v(l),v(s),v(c)}}}function Xp(o){let e,n,t;return n=new Ue({props:{colorScale:o[1],limits:o[3]}}),{c(){e=T("span"),w(n.$$.fragment),F(e,"slot","controls")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function xp(o){let e,n=o[6].location+"",t,l,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",$,h,k,S,y=o[6].year+"",O,I,N,P=o[6].pedal_cycles.toLocaleString()+"",M,j,A,R,H,J=o[6].method+"",ae;return{c(){e=T("h2"),t=L(n),l=C(),r=T("p"),s=L("Total motor vehicles ("),i=L(f),a=L(` AADF):
        `),u=T("b"),$=L(c),h=C(),k=T("p"),S=L("Total pedal cycles ("),O=L(y),I=L(` AADF):
        `),N=T("b"),M=L(P),j=C(),A=T("p"),R=L("Count method: "),H=T("b"),ae=L(J)},m(G,K){g(G,e,K),p(e,t),g(G,l,K),g(G,r,K),p(r,s),p(r,i),p(r,a),p(r,u),p(u,$),g(G,h,K),g(G,k,K),p(k,S),p(k,O),p(k,I),p(k,N),p(N,M),g(G,j,K),g(G,A,K),p(A,R),p(A,H),p(H,ae)},p(G,K){K&64&&n!==(n=G[6].location+"")&&q(t,n),K&64&&f!==(f=G[6].year+"")&&q(i,f),K&64&&c!==(c=G[6].motor_vehicles.toLocaleString()+"")&&q($,c),K&64&&y!==(y=G[6].year+"")&&q(O,y),K&64&&P!==(P=G[6].pedal_cycles.toLocaleString()+"")&&q(M,P),K&64&&J!==(J=G[6].method+"")&&q(ae,J)},d(G){G&&(d(e),d(l),d(r),d(h),d(k),d(j),d(A))}}}function e$(o){let e,n;return e=new ie({props:{$$slots:{default:[xp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&192&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function t$(o){let e,n;const t=[z(Ht),{sourceLayer:Ht},{paint:{"circle-color":we(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[e$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new Bt({props:l}),e.$on("click",r$),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&7?le(t,[s&0&&oe(z(Ht)),s&0&&{sourceLayer:Ht},s&6&&{paint:{"circle-color":we(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function n$(o){let e,n,t,l,r;function s(i){o[5](i)}let f={name:Ht,title:l$,$$slots:{controls:[Xp],help:[Kp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new pe({props:{url:`pmtiles://${ce()}/v1/${Ht}.pmtiles`,$$slots:{default:[t$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let Ht="vehicle_counts",l$="Vehicle counts";function r$(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function o$(o,e,n){let t,l=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=ue(Ht);Y(o,f,a=>n(0,t=a));function i(a){t=a,f.set(t)}return[t,l,r,s,f,i]}class s$ extends X{constructor(e){super(),x(this,e,o$,n$,Q,{})}}function Rl(o,e,n){const t=o.slice();return t[6]=e[n],t}function i$(o){let e;return{c(){e=T("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,F(e,"slot","help")},m(n,t){g(n,e,t)},p:Z,d(n){n&&d(e)}}}function a$(o){let e,n,t;return n=new Wt({props:{rows:o[3]}}),{c(){e=T("div"),w(n.$$.fragment),F(e,"slot","controls"),ee(e,"border","1px solid black"),ee(e,"padding","8px")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p:Z,i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function f$(o){let e,n=o[5]["Issue ID"]+"",t,l,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=T("h2"),t=L(n),l=L(" - "),s=L(r),f=C(),i=T("p"),u=L(a)},m(c,$){g(c,e,$),p(e,t),p(e,l),p(e,s),g(c,f,$),g(c,i,$),p(i,u)},p(c,$){$&32&&n!==(n=c[5]["Issue ID"]+"")&&q(t,n),$&32&&r!==(r=c[5].Code+"")&&q(s,r),$&32&&a!==(a=c[5]["Issue Stage"]+"")&&q(u,a)},d(c){c&&(d(e),d(f),d(i))}}}function Dl(o){let e,n=o[6]+"",t,l,r,s=o[5][o[6]]+"",f,i;return{c(){e=T("p"),t=L(n),l=L(`:
            `),r=T("b"),f=L(s),i=C()},m(a,u){g(a,e,u),p(e,t),p(e,l),p(e,r),p(r,f),p(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&q(f,s)},d(a){a&&d(e)}}}function u$(o){let e,n=$e(o[2]),t=[];for(let l=0;l<n.length;l+=1)t[l]=Dl(Rl(o,n,l));return{c(){e=T("div");for(let l=0;l<t.length;l+=1)t[l].c();ee(e,"max-width","30vw"),ee(e,"max-height","60vh"),ee(e,"overflow","auto")},m(l,r){g(l,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(l,r){if(r&36){n=$e(l[2]);let s;for(s=0;s<n.length;s+=1){const f=Rl(l,n,s);t[s]?t[s].p(f,r):(t[s]=Dl(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=n.length}},d(l){l&&d(e),qe(t,l)}}}function c$(o){let e,n,t,l;return e=new ie({props:{openOn:"hover",$$slots:{default:[f$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[u$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,n,s),b(t,r,s),l=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){l||(m(e.$$.fragment,r),m(t.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),l=!1},d(r){r&&d(n),v(e,r),v(t,r)}}}function p$(o){let e,n;const t=[z($n),{paint:{"circle-color":Xe(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let l={$$slots:{default:[c$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new Bt({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&9?le(t,[s&0&&oe(z($n)),s&8&&{paint:{"circle-color":Xe(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function $$(o){let e,n,t,l,r;function s(i){o[4](i)}let f={name:$n,title:m$,$$slots:{controls:[a$],help:[i$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new fe({props:f}),B.push(()=>U(e,"show",s)),l=new Ut({props:{data:`${xt()}/v1/problems.geojson.gz`,$$slots:{default:[p$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,u.show=i[0],W(()=>n=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),l.$set(c)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}let $n="problems",m$="Issues & Conflicts";function _$(o,e,n){let t,l=ue($n);Y(o,l,i=>n(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,l.set(t)}return[t,l,r,s,f]}class g$ extends X{constructor(e){super(),x(this,e,_$,$$,Q,{})}}function d$(o){let e;function n(r,s){return r[2]<=100?b$:w$}let t=n(o),l=t(o);return{c(){l.c(),e=he()},m(r,s){l.m(r,s),g(r,e,s)},p(r,s){t===(t=n(r))&&l?l.p(r,s):(l.d(1),l=t(r),l&&(l.c(),l.m(e.parentNode,e)))},i:Z,o:Z,d(r){r&&d(e),l.d(r)}}}function h$(o){let e,n;return e=new Be({props:{$$slots:{default:[v$]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&64&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function w$(o){let e;return{c(){e=T("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(n,t){g(n,e,t)},p:Z,d(n){n&&d(e)}}}function b$(o){let e,n,t;return{c(){e=T("label"),n=L(`Downloading scheme data
      `),t=T("progress"),t.value=o[2],F(t,"class","svelte-q3473n")},m(l,r){g(l,e,r),p(e,n),p(e,t)},p(l,r){r&4&&(t.value=l[2])},d(l){l&&d(e)}}}function v$(o){let e;return{c(){e=L("Load latest scheme data")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function k$(o){let e,n,t,l;const r=[h$,d$],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(n=s[e]=r[e](o)),{c(){n&&n.c(),t=he()},m(i,a){~e&&s[e].m(i,a),g(i,t,a),l=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(n&&(_e(),_(s[u],1,1,()=>{s[u]=null}),ge()),~e?(n=s[e],n?n.p(i,a):(n=s[e]=r[e](i),n.c()),m(n,1),n.m(t.parentNode,t)):n=null)},i(i){l||(m(n),l=!0)},o(i){_(n),l=!1},d(i){i&&d(t),~e&&s[e].d(i)}}}function y$(o,e,n){let{loadFile:t}=e,l=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await no(`${xt()}/v1/all_schemes_output.geojson.gz`,c=>{n(2,s=c)});n(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),n(1,r=!1)}Ar(async()=>{l&&await f()});async function i(){n(0,l=!0),await f()}return o.$$set=a=>{"loadFile"in a&&n(4,t=a.loadFile)},[l,r,s,i,t]}class S$ extends X{constructor(e){super(),x(this,e,y$,k$,Q,{loadFile:4})}}function Gl(o,e,n){let t={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},l={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};for(let[r,s]of Object.entries(o.schemes))s.pipeline?l.schemes[r]=s:t.schemes[r]=s;for(let r of o.features){if(!T$(r))continue;let s=r.properties.scheme_reference,f=Object.hasOwn(t.schemes,s),i=f?t.schemes[s]:l.schemes[s];i.browse&&(r.properties.funding_programme=i.browse.funding_programme,r.properties.current_milestone=i.browse.current_milestone);let a=f?t:l;r.id=a.features.length+1,a.features.push(r)}e.set(t),n.set(l)}function T$(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}function L$(){let o={type:"FeatureCollection",features:[],schemes:{},notes:["These schemes are everything you've drawn in this browser using Scheme Sketcher. The data source and accuracy depend on whatever files you imported, created, or edited yourself."]};for(let n=0;n<window.localStorage.length;n++){let t=window.localStorage.key(n),l=t.split("/");if(!(l.length!=3||l[0]!="sketch"))try{let r=JSON.parse(window.localStorage.getItem(t));if(r.features.length==0)continue;for(let s of Object.values(r.schemes))s.browse={authority_or_region:l[1],local_filename:l[2]};o.schemes={...o.schemes,...r.schemes},o.features=[...o.features,...r.features]}catch{}}let e=1;for(let n of o.features)n.id=e++;return o}let Jt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},Cn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function Fl(o,e,n){const t=o.slice();return t[27]=e[n],t[28]=e,t[29]=n,t}function C$(o){let e;return{c(){e=L("Filters")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function I$(o){let e;return{c(){e=L("Reset all filters")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function M$(o){let e,n,t,l,r,s,f,i;e=new Tn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[N$]},$$scope:{ctx:o}}});function a(h){o[22](h)}let u={label:"Scheme name or reference",options:mn(o[0])};o[1]!==void 0&&(u.value=o[1]),t=new Hr({props:u}),B.push(()=>U(t,"value",a));function c(h){o[23](h)}let $={label:"Authority or region",choices:o[10],emptyOption:!0};return o[4]!==void 0&&($.value=o[4]),s=new st({props:$}),B.push(()=>U(s,"value",c)),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment),r=C(),w(s.$$.fragment)},m(h,k){b(e,h,k),g(h,n,k),b(t,h,k),g(h,r,k),b(s,h,k),i=!0},p(h,k){const S={};k&1073741828&&(S.$$scope={dirty:k,ctx:h}),e.$set(S);const y={};k&1&&(y.options=mn(h[0])),!l&&k&2&&(l=!0,y.value=h[1],W(()=>l=!1)),t.$set(y);const O={};k&1024&&(O.choices=h[10]),!f&&k&16&&(f=!0,O.value=h[4],W(()=>f=!1)),s.$set(O)},i(h){i||(m(e.$$.fragment,h),m(t.$$.fragment,h),m(s.$$.fragment,h),i=!0)},o(h){_(e.$$.fragment,h),_(t.$$.fragment,h),_(s.$$.fragment,h),i=!1},d(h){h&&(d(n),d(r)),v(e,h),v(t,h),v(s,h)}}}function O$(o){let e,n,t,l,r,s,f,i,a,u,c,$,h,k,S,y;t=new Tn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[A$]},$$scope:{ctx:o}}});function O(A){o[16](A)}let I={label:"Scheme name or reference",options:mn(o[0])};o[1]!==void 0&&(I.value=o[1]),r=new Hr({props:I}),B.push(()=>U(r,"value",O));function N(A){o[17](A)}let P={label:"Authority or region",choices:o[10],emptyOption:!0};o[4]!==void 0&&(P.value=o[4]),i=new st({props:P}),B.push(()=>U(i,"value",N)),$=new Tn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[G$]},$$scope:{ctx:o}}});function M(A){o[19](A)}let j={label:"Current milestone",choices:o[11],emptyOption:!0};return o[6]!==void 0&&(j.value=o[6]),k=new st({props:j}),B.push(()=>U(k,"value",M)),{c(){e=T("div"),n=T("div"),w(t.$$.fragment),l=C(),w(r.$$.fragment),f=C(),w(i.$$.fragment),u=C(),c=T("div"),w($.$$.fragment),h=C(),w(k.$$.fragment),F(n,"class","govuk-grid-column-one-half"),F(c,"class","govuk-grid-column-one-half"),F(e,"class","govuk-grid-row")},m(A,R){g(A,e,R),p(e,n),b(t,n,null),p(n,l),b(r,n,null),p(n,f),b(i,n,null),p(e,u),p(e,c),b($,c,null),p(c,h),b(k,c,null),y=!0},p(A,R){const H={};R&1073741828&&(H.$$scope={dirty:R,ctx:A}),t.$set(H);const J={};R&1&&(J.options=mn(A[0])),!s&&R&2&&(s=!0,J.value=A[1],W(()=>s=!1)),r.$set(J);const ae={};R&1024&&(ae.choices=A[10]),!a&&R&16&&(a=!0,ae.value=A[4],W(()=>a=!1)),i.$set(ae);const G={};R&1073741856&&(G.$$scope={dirty:R,ctx:A}),$.$set(G);const K={};!S&&R&64&&(S=!0,K.value=A[6],W(()=>S=!1)),k.$set(K)},i(A){y||(m(t.$$.fragment,A),m(r.$$.fragment,A),m(i.$$.fragment,A),m($.$$.fragment,A),m(k.$$.fragment,A),y=!0)},o(A){_(t.$$.fragment,A),_(r.$$.fragment,A),_(i.$$.fragment,A),_($.$$.fragment,A),_(k.$$.fragment,A),y=!1},d(A){A&&d(e),v(t),v(r),v(i),v($),v(k)}}}function j$(o){let e;return{c(){e=L("Clear")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function N$(o){let e,n,t,l,r,s;return t=new Be({props:{$$slots:{default:[j$]},$$scope:{ctx:o}}}),t.$on("click",o[21]),{c(){e=T("input"),n=C(),w(t.$$.fragment),F(e,"type","text"),F(e,"class","govuk-input govuk-input--width-10"),F(e,"id","filterInterventionText")},m(f,i){g(f,e,i),tt(e,o[2]),g(f,n,i),b(t,f,i),l=!0,r||(s=mt(e,"input",o[20]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&tt(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(m(t.$$.fragment,f),l=!0)},o(f){_(t.$$.fragment,f),l=!1},d(f){f&&(d(e),d(n)),v(t,f),r=!1,s()}}}function P$(o){let e;return{c(){e=L("Clear")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function A$(o){let e,n,t,l,r,s;return t=new Be({props:{$$slots:{default:[P$]},$$scope:{ctx:o}}}),t.$on("click",o[15]),{c(){e=T("input"),n=C(),w(t.$$.fragment),F(e,"type","text"),F(e,"class","govuk-input govuk-input--width-10"),F(e,"id","filterInterventionText")},m(f,i){g(f,e,i),tt(e,o[2]),g(f,n,i),b(t,f,i),l=!0,r||(s=mt(e,"input",o[14]),r=!0)},p(f,i){i&4&&e.value!==f[2]&&tt(e,f[2]);const a={};i&1073741824&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){l||(m(t.$$.fragment,f),l=!0)},o(f){_(t.$$.fragment,f),l=!1},d(f){f&&(d(e),d(n)),v(t,f),r=!1,s()}}}function R$(o){let e=o[27]+"",n,t;return{c(){n=L(e),t=C()},m(l,r){g(l,n,r),g(l,t,r)},p:Z,d(l){l&&(d(n),d(t))}}}function ql(o){let e,n,t;function l(s){o[18](s,o[27])}let r={$$slots:{default:[R$]},$$scope:{ctx:o}};return o[5][o[27]]!==void 0&&(r.checked=o[5][o[27]]),e=new Ee({props:r}),B.push(()=>U(e,"checked",l)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f&1073741824&&(i.$$scope={dirty:f,ctx:o}),!n&&f&32&&(n=!0,i.checked=o[5][o[27]],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function D$(o){let e,n,t=$e(Object.keys(Jt)),l=[];for(let s=0;s<t.length;s+=1)l[s]=ql(Fl(o,t,s));const r=s=>_(l[s],1,1,()=>{l[s]=null});return{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=he()},m(s,f){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(s,f);g(s,e,f),n=!0},p(s,f){if(f&32){t=$e(Object.keys(Jt));let i;for(i=0;i<t.length;i+=1){const a=Fl(s,t,i);l[i]?(l[i].p(a,f),m(l[i],1)):(l[i]=ql(a),l[i].c(),m(l[i],1),l[i].m(e.parentNode,e))}for(_e(),i=t.length;i<l.length;i+=1)r(i);ge()}},i(s){if(!n){for(let f=0;f<t.length;f+=1)m(l[f]);n=!0}},o(s){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)_(l[f]);n=!1},d(s){s&&d(e),qe(l,s)}}}function G$(o){let e,n;return e=new De({props:{small:!0,$$slots:{default:[D$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&1073741856&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function F$(o){let e;return{c(){e=L("Done")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function q$(o){let e,n,t,l,r=o[9].interventions.toLocaleString()+"",s,f,i,a,u=o[8].size.toLocaleString()+"",c,$,h,k,S,y=zl(o[9].totalLength).toFixed(1)+"",O,I,N,P,M,j,A,R,H,J;P=new Be({props:{$$slots:{default:[I$]},$$scope:{ctx:o}}}),P.$on("click",o[12]);const ae=[O$,M$],G=[];function K(E,se){return E[3]=="ATF"?0:1}return j=K(o),A=G[j]=ae[j](o),H=new Co({props:{$$slots:{default:[F$]},$$scope:{ctx:o}}}),H.$on("click",o[24]),{c(){e=T("p"),e.textContent="Showing:",n=C(),t=T("ul"),l=T("li"),s=L(r),f=L(" interventions"),i=C(),a=T("li"),c=L(u),$=L(" schemes"),h=C(),k=T("li"),S=L("total route length of "),O=L(y),I=L(" miles"),N=C(),w(P.$$.fragment),M=C(),A.c(),R=C(),w(H.$$.fragment)},m(E,se){g(E,e,se),g(E,n,se),g(E,t,se),p(t,l),p(l,s),p(l,f),p(t,i),p(t,a),p(a,c),p(a,$),p(t,h),p(t,k),p(k,S),p(k,O),p(k,I),g(E,N,se),b(P,E,se),g(E,M,se),G[j].m(E,se),g(E,R,se),b(H,E,se),J=!0},p(E,se){(!J||se&512)&&r!==(r=E[9].interventions.toLocaleString()+"")&&q(s,r),(!J||se&256)&&u!==(u=E[8].size.toLocaleString()+"")&&q(c,u),(!J||se&512)&&y!==(y=zl(E[9].totalLength).toFixed(1)+"")&&q(O,y);const ye={};se&1073741824&&(ye.$$scope={dirty:se,ctx:E}),P.$set(ye);let Re=j;j=K(E),j===Re?G[j].p(E,se):(_e(),_(G[Re],1,1,()=>{G[Re]=null}),ge(),A=G[j],A?A.p(E,se):(A=G[j]=ae[j](E),A.c()),m(A,1),A.m(R.parentNode,R));const Ce={};se&1073741824&&(Ce.$$scope={dirty:se,ctx:E}),H.$set(Ce)},i(E){J||(m(P.$$.fragment,E),m(A),m(H.$$.fragment,E),J=!0)},o(E){_(P.$$.fragment,E),_(A),_(H.$$.fragment,E),J=!1},d(E){E&&(d(e),d(n),d(t),d(N),d(M),d(R)),v(P,E),G[j].d(E),v(H,E)}}}function z$(o){let e,n,t,l,r;e=new Be({props:{$$slots:{default:[C$]},$$scope:{ctx:o}}}),e.$on("click",o[13]);function s(i){o[25](i)}let f={title:`Filter ${o[3]} schemes`,$$slots:{default:[q$]},$$scope:{ctx:o}};return o[7]!==void 0&&(f.open=o[7]),t=new lo({props:f}),B.push(()=>U(t,"open",s)),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(i,a){b(e,i,a),g(i,n,a),b(t,i,a),r=!0},p(i,[a]){const u={};a&1073741824&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&8&&(c.title=`Filter ${i[3]} schemes`),a&1073743871&&(c.$$scope={dirty:a,ctx:i}),!l&&a&128&&(l=!0,c.open=i[7],W(()=>l=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),r=!1},d(i){i&&d(n),v(e,i),v(t,i)}}}function H$(o){var t;let e=new Set;for(let l of Object.values(o.schemes))(t=l.browse)!=null&&t.authority_or_region&&e.add(l.browse.authority_or_region);let n=Array.from(e.entries());return n.sort(),n}function zl(o){return o*621371e-9}function mn(o){let e=[];for(let n of Object.values(o.schemes))e.push([n.scheme_reference,n.scheme_reference]),n.scheme_name&&e.push([n.scheme_name,n.scheme_name]);return e}function E$(o,e,n){let t,{source:l}=e,{schemesGj:r}=e,{filterSchemeText:s}=e,{filterInterventionText:f}=e,i=!1,a=new Set,u={interventions:0,totalLength:0},c=Object.keys(Cn).map(E=>[E,E]),$="",h=Object.fromEntries(Object.keys(Jt).map(E=>[E,!0])),k="";function S(E,se,ye,Re,Ce){let Ie=E.toLowerCase(),it=se.toLowerCase(),at=be=>{var We,ft,ut,Fe;if(Ie&&!((We=be.properties.name)!=null&&We.toLowerCase().includes(Ie))&&!((ft=be.properties.description)!=null&&ft.toLowerCase().includes(Ie)))return!1;let Ae=r.schemes[be.properties.scheme_reference];return!(ye&&((ut=Ae.browse)==null?void 0:ut.authority_or_region)!=ye||l=="ATF"&&Ae.browse.funding_programme&&!Re[Ae.browse.funding_programme]||Ce&&((Fe=Ae.browse)==null?void 0:Fe.current_milestone)!=Ce||it&&!Ae.scheme_reference.toLowerCase().includes(it)&&!(Ae.scheme_name??"").toLowerCase().includes(it))};n(8,a=new Set(r.features.filter(at).map(be=>be.properties.scheme_reference))),n(9,u={interventions:0,totalLength:0});let xe=be=>{var Ae,We;return!(!a.has(be.properties.scheme_reference)||Ie&&!((Ae=be.properties.name)!=null&&Ae.toLowerCase().includes(Ie))&&!((We=be.properties.description)!=null&&We.toLowerCase().includes(Ie)))};for(let be of r.features)xe(be)?(delete be.properties.hide_while_editing,n(9,u.interventions++,u),be.geometry.type=="LineString"&&be.properties.length_meters&&n(9,u.totalLength+=be.properties.length_meters,u)):be.properties.hide_while_editing=!0;n(0,r),n(9,u)}function y(){n(4,$=""),n(5,h=Object.fromEntries(Object.keys(Jt).map(E=>[E,!0]))),n(6,k=""),n(2,f=""),n(1,s="")}const O=()=>n(7,i=!0);function I(){f=this.value,n(2,f)}const N=()=>n(2,f="");function P(E){s=E,n(1,s)}function M(E){$=E,n(4,$)}function j(E,se){o.$$.not_equal(h[se],E)&&(h[se]=E,n(5,h))}function A(E){k=E,n(6,k)}function R(){f=this.value,n(2,f)}const H=()=>n(2,f="");function J(E){s=E,n(1,s)}function ae(E){$=E,n(4,$)}const G=()=>n(7,i=!1);function K(E){i=E,n(7,i)}return o.$$set=E=>{"source"in E&&n(3,l=E.source),"schemesGj"in E&&n(0,r=E.schemesGj),"filterSchemeText"in E&&n(1,s=E.filterSchemeText),"filterInterventionText"in E&&n(2,f=E.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&1&&n(10,t=H$(r)),o.$$.dirty&118&&S(f,s,$,h,k)},[r,s,f,l,$,h,k,i,a,u,t,c,y,O,I,N,P,M,j,A,R,H,J,ae,G,K]}class dn extends X{constructor(e){super(),x(this,e,E$,z$,Q,{source:3,schemesGj:0,filterSchemeText:1,filterInterventionText:2})}}const fn=Se({type:"FeatureCollection",features:[],schemes:{}}),Hl=Se(""),El=Se(""),hn=Se({type:"FeatureCollection",features:[],schemes:{}}),Bl=Se(""),Ul=Se(""),wn=Se({type:"FeatureCollection",features:[],schemes:{}}),Wl=Se(""),Yl=Se(""),bn=Se({type:"FeatureCollection",features:[],schemes:{}}),Jl=Se(""),Vl=Se("");function Ql(o){let e,n,t,l=o[0].status+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="Status",t=L(`
    : `),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&1&&l!==(l=s[0].status+"")&&q(r,l)},d(s){s&&d(e)}}}function Zl(o){let e,n,t,l=o[0].timescale+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="Timescale",t=L(`
    : `),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&1&&l!==(l=s[0].timescale+"")&&q(r,l)},d(s){s&&d(e)}}}function Kl(o){let e,n,t,l=o[0].timescale_year+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="Estimated completion year",t=L(`
    : `),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&1&&l!==(l=s[0].timescale_year+"")&&q(r,l)},d(s){s&&d(e)}}}function Xl(o){let e,n,t,l=o[0].year_published+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="Scheme most recently published",t=L(`
    : `),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&1&&l!==(l=s[0].year_published+"")&&q(r,l)},d(s){s&&d(e)}}}function xl(o){let e,n,t,l=o[0].year_consulted+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="Scheme most recently consulted on",t=L(`
    : `),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&1&&l!==(l=s[0].year_consulted+"")&&q(r,l)},d(s){s&&d(e)}}}function B$(o){let e,n,t,l,r,s=o[0].status&&Ql(o),f=o[0].timescale&&Zl(o),i=o[0].timescale_year&&Kl(o),a=o[0].year_published&&Xl(o),u=o[0].year_consulted&&xl(o);return{c(){s&&s.c(),e=C(),f&&f.c(),n=C(),i&&i.c(),t=C(),a&&a.c(),l=C(),u&&u.c(),r=he()},m(c,$){s&&s.m(c,$),g(c,e,$),f&&f.m(c,$),g(c,n,$),i&&i.m(c,$),g(c,t,$),a&&a.m(c,$),g(c,l,$),u&&u.m(c,$),g(c,r,$)},p(c,[$]){c[0].status?s?s.p(c,$):(s=Ql(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,$):(f=Zl(c),f.c(),f.m(n.parentNode,n)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,$):(i=Kl(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,$):(a=Xl(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,$):(u=xl(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:Z,o:Z,d(c){c&&(d(e),d(n),d(t),d(l),d(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function U$(o,e,n){let{props:t}=e;return o.$$set=l=>{"props"in l&&n(0,t=l.props)},[t]}class Br extends X{constructor(e){super(),x(this,e,U$,B$,Q,{props:0})}}function er(o){let e,n,t,l=o[0].budget.toLocaleString()+"",r,s;return{c(){e=T("p"),n=T("b"),n.textContent="Cost",t=L(`
    : `),r=L(l),s=L(`
    GBP`)},m(f,i){g(f,e,i),p(e,n),p(e,t),p(e,r),p(e,s)},p(f,i){i&1&&l!==(l=f[0].budget.toLocaleString()+"")&&q(r,l)},d(f){f&&d(e)}}}function tr(o){let e;return{c(){e=T("p"),e.textContent="Development is fully funded"},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function nr(o){let e;return{c(){e=T("p"),e.textContent="Construction is fully funded"},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function lr(o){let e,n,t,l;return{c(){e=T("p"),n=T("b"),n.textContent="Funding sources",t=L(`
    : `),l=L(o[1])},m(r,s){g(r,e,s),p(e,n),p(e,t),p(e,l)},p(r,s){s&2&&q(l,r[1])},d(r){r&&d(e)}}}function W$(o){let e,n,t,l,r=o[0].budget&&er(o),s=o[0].development_funded&&tr(),f=o[0].construction_funded&&nr(),i=o[1]&&lr(o);return{c(){r&&r.c(),e=C(),s&&s.c(),n=C(),f&&f.c(),t=C(),i&&i.c(),l=he()},m(a,u){r&&r.m(a,u),g(a,e,u),s&&s.m(a,u),g(a,n,u),f&&f.m(a,u),g(a,t,u),i&&i.m(a,u),g(a,l,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=er(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=tr(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=nr(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=lr(a),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null)},i:Z,o:Z,d(a){a&&(d(e),d(n),d(t),d(l)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function Y$(o){if(!o.funding_sources)return"";let e=[];for(let n of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[n]&&e.push(n.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function J$(o,e,n){let t,{props:l}=e;return o.$$set=r=>{"props"in r&&n(0,l=r.props)},o.$$.update=()=>{o.$$.dirty&1&&n(1,t=Y$(l))},[l,t]}class Ur extends X{constructor(e){super(),x(this,e,J$,W$,Q,{props:0})}}function vn(o){const e=o.slice(),n=e[5].pipeline;return e[11]=n,e}function kn(o){const e=o.slice(),n=e[1].pipeline;return e[11]=n,e}function rr(o){let e,n,t,l=Hn(o[1].length_meters)+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="Length",t=L(`
        : `),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&2&&l!==(l=Hn(s[1].length_meters)+"")&&q(r,l)},d(s){s&&d(e)}}}function or(o){let e,n=ct(o[1].description,o[3])+"";return{c(){e=T("p")},m(t,l){g(t,e,l),e.innerHTML=n},p(t,l){l&10&&n!==(n=ct(t[1].description,t[3])+"")&&(e.innerHTML=n)},d(t){t&&d(e)}}}function sr(o){let e,n,t,l,r,s,f,i=o[11].atf4_type&&ir(o),a=o[11].accuracy&&ar(o),u=o[11].is_alternative&&fr();return l=new Ur({props:{props:o[11]}}),s=new Br({props:{props:o[11]}}),{c(){i&&i.c(),e=C(),a&&a.c(),n=C(),u&&u.c(),t=C(),w(l.$$.fragment),r=C(),w(s.$$.fragment)},m(c,$){i&&i.m(c,$),g(c,e,$),a&&a.m(c,$),g(c,n,$),u&&u.m(c,$),g(c,t,$),b(l,c,$),g(c,r,$),b(s,c,$),f=!0},p(c,$){c[11].atf4_type?i?i.p(c,$):(i=ir(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].accuracy?a?a.p(c,$):(a=ar(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[11].is_alternative?u||(u=fr(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const h={};$&2&&(h.props=c[11]),l.$set(h);const k={};$&2&&(k.props=c[11]),s.$set(k)},i(c){f||(m(l.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(l.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(d(e),d(n),d(t),d(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(l,c),v(s,c)}}}function ir(o){let e,n,t,l=o[11].atf4_type+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="ATF4 type",t=L(`
          : `),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&2&&l!==(l=s[11].atf4_type+"")&&q(r,l)},d(s){s&&d(e)}}}function ar(o){let e,n,t,l=o[11].accuracy+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="Accuracy",t=L(`
          : `),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&2&&l!==(l=s[11].accuracy+"")&&q(r,l)},d(s){s&&d(e)}}}function fr(o){let e;return{c(){e=T("p"),e.textContent="Represents an alternative route"},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function ur(o){var s;let e,n,t,l=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="Capital scheme ID",t=L(`
        : `),r=L(l)},m(f,i){g(f,e,i),p(e,n),p(e,t),p(e,r)},p(f,i){var a;i&32&&l!==(l=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&q(r,l)},d(f){f&&d(e)}}}function cr(o){var s;let e,n,t,l=((s=o[5].browse)==null?void 0:s.funding_programme)+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="Funding programme",t=L(`
        : `),r=L(l)},m(f,i){g(f,e,i),p(e,n),p(e,t),p(e,r)},p(f,i){var a;i&32&&l!==(l=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&q(r,l)},d(f){f&&d(e)}}}function pr(o){var s;let e,n,t,l=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="Current milestone",t=L(`
        : `),r=L(l)},m(f,i){g(f,e,i),p(e,n),p(e,t),p(e,r)},p(f,i){var a;i&32&&l!==(l=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&q(r,l)},d(f){f&&d(e)}}}function $r(o){let e,n,t,l,r,s,f,i=o[11].scheme_type&&mr(o),a=o[11].atf4_lead_type&&_r(o),u=o[11].scheme_description&&gr(o);return l=new Ur({props:{props:o[11]}}),s=new Br({props:{props:o[11]}}),{c(){i&&i.c(),e=C(),a&&a.c(),n=C(),u&&u.c(),t=C(),w(l.$$.fragment),r=C(),w(s.$$.fragment)},m(c,$){i&&i.m(c,$),g(c,e,$),a&&a.m(c,$),g(c,n,$),u&&u.m(c,$),g(c,t,$),b(l,c,$),g(c,r,$),b(s,c,$),f=!0},p(c,$){c[11].scheme_type?i?i.p(c,$):(i=mr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].atf4_lead_type?a?a.p(c,$):(a=_r(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[11].scheme_description?u?u.p(c,$):(u=gr(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const h={};$&32&&(h.props=c[11]),l.$set(h);const k={};$&32&&(k.props=c[11]),s.$set(k)},i(c){f||(m(l.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(l.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(d(e),d(n),d(t),d(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(l,c),v(s,c)}}}function mr(o){let e,n,t,l=o[11].scheme_type+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="Scheme type",t=L(`
          : `),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&32&&l!==(l=s[11].scheme_type+"")&&q(r,l)},d(s){s&&d(e)}}}function _r(o){let e,n,t,l=o[11].atf4_lead_type+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="ATF4 lead type",t=L(`
          : `),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&32&&l!==(l=s[11].atf4_lead_type+"")&&q(r,l)},d(s){s&&d(e)}}}function gr(o){let e,n,t,l=o[11].scheme_description+"",r;return{c(){e=T("p"),n=T("b"),n.textContent="Descripton",t=L(`
          : `),r=L(l)},m(s,f){g(s,e,f),p(e,n),p(e,t),p(e,r)},p(s,f){f&32&&l!==(l=s[11].scheme_description+"")&&q(r,l)},d(s){s&&d(e)}}}function V$(o){let e;return{c(){e=L("Edit a copy of this scheme")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Q$(o){let e;return{c(){e=L("Edit your existing version of this scheme")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Z$(o){let e;function n(r,s){var f;return(f=r[5].browse)!=null&&f.local_filename?Q$:V$}let t=n(o),l=t(o);return{c(){l.c(),e=he()},m(r,s){l.m(r,s),g(r,e,s)},p(r,s){t!==(t=n(r))&&(l.d(1),l=t(r),l&&(l.c(),l.m(e.parentNode,e)))},d(r){r&&d(e),l.d(r)}}}function K$(o){let e;return{c(){e=L("Zoom to show entire scheme")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function dr(o){var tn,nn,ln,rn;let e,n,t,l,r,s,f,i=ct(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,$,h,k,S,y,O,I,N,P,M,j,A,R,H,J=ct(o[5].scheme_name??"",o[2])+"",ae,G,K,E,se,ye=ct(o[1].scheme_reference,o[2])+"",Re,Ce,Ie,it,at=((tn=o[5].browse)==null?void 0:tn.authority_or_region)+"",xe,be,Ae,We,ft,ut,Fe,en,et,He,Me=o[1].length_meters&&rr(o),Oe=o[1].description&&or(o),ve=o[1].pipeline&&sr(kn(o)),je=((nn=o[5].browse)==null?void 0:nn.capital_scheme_id)&&ur(o),Ne=((ln=o[5].browse)==null?void 0:ln.funding_programme)&&cr(o),Pe=((rn=o[5].browse)==null?void 0:rn.current_milestone)&&pr(o),ke=o[5].pipeline&&$r(vn(o));return Fe=new Be({props:{$$slots:{default:[Z$]},$$scope:{ctx:o}}}),Fe.$on("click",o[7]),et=new Be({props:{$$slots:{default:[K$]},$$scope:{ctx:o}}}),et.$on("click",o[6]),{c(){e=T("div"),n=T("h2"),n.textContent="Intervention",t=C(),l=T("p"),r=T("b"),r.textContent="Name",s=L(`
      : `),f=new Et(!1),a=L(" ("),c=L(u),$=L(")"),h=C(),Me&&Me.c(),k=C(),Oe&&Oe.c(),S=C(),ve&&ve.c(),y=C(),O=T("hr"),I=C(),N=T("h2"),P=L(o[0]),M=C(),j=T("p"),A=T("b"),A.textContent="Scheme name",R=L(`
      : `),H=new Et(!1),ae=C(),G=T("p"),K=T("b"),K.textContent="Scheme reference",E=L(`
      : `),se=new Et(!1),Re=C(),Ce=T("p"),Ie=T("b"),Ie.textContent="Authority or region",it=L(`
      : `),xe=L(at),be=C(),je&&je.c(),Ae=C(),Ne&&Ne.c(),We=C(),Pe&&Pe.c(),ft=C(),ke&&ke.c(),ut=C(),w(Fe.$$.fragment),en=C(),w(et.$$.fragment),f.a=a,H.a=null,se.a=null,ee(e,"max-width","30vw"),ee(e,"max-height","60vh"),ee(e,"overflow","auto")},m(D,me){g(D,e,me),p(e,n),p(e,t),p(e,l),p(l,r),p(l,s),f.m(i,l),p(l,a),p(l,c),p(l,$),p(e,h),Me&&Me.m(e,null),p(e,k),Oe&&Oe.m(e,null),p(e,S),ve&&ve.m(e,null),p(e,y),p(e,O),p(e,I),p(e,N),p(N,P),p(e,M),p(e,j),p(j,A),p(j,R),H.m(J,j),p(e,ae),p(e,G),p(G,K),p(G,E),se.m(ye,G),p(e,Re),p(e,Ce),p(Ce,Ie),p(Ce,it),p(Ce,xe),p(e,be),je&&je.m(e,null),p(e,Ae),Ne&&Ne.m(e,null),p(e,We),Pe&&Pe.m(e,null),p(e,ft),ke&&ke.m(e,null),p(e,ut),b(Fe,e,null),p(e,en),b(et,e,null),o[9](e),He=!0},p(D,me){var Rn,Dn,Gn,Fn;(!He||me&10)&&i!==(i=ct(D[1].name,D[3])+"")&&f.p(i),(!He||me&2)&&u!==(u=D[1].intervention_type+"")&&q(c,u),D[1].length_meters?Me?Me.p(D,me):(Me=rr(D),Me.c(),Me.m(e,k)):Me&&(Me.d(1),Me=null),D[1].description?Oe?Oe.p(D,me):(Oe=or(D),Oe.c(),Oe.m(e,S)):Oe&&(Oe.d(1),Oe=null),D[1].pipeline?ve?(ve.p(kn(D),me),me&2&&m(ve,1)):(ve=sr(kn(D)),ve.c(),m(ve,1),ve.m(e,y)):ve&&(_e(),_(ve,1,1,()=>{ve=null}),ge()),(!He||me&1)&&q(P,D[0]),(!He||me&36)&&J!==(J=ct(D[5].scheme_name??"",D[2])+"")&&H.p(J),(!He||me&6)&&ye!==(ye=ct(D[1].scheme_reference,D[2])+"")&&se.p(ye),(!He||me&32)&&at!==(at=((Rn=D[5].browse)==null?void 0:Rn.authority_or_region)+"")&&q(xe,at),(Dn=D[5].browse)!=null&&Dn.capital_scheme_id?je?je.p(D,me):(je=ur(D),je.c(),je.m(e,Ae)):je&&(je.d(1),je=null),(Gn=D[5].browse)!=null&&Gn.funding_programme?Ne?Ne.p(D,me):(Ne=cr(D),Ne.c(),Ne.m(e,We)):Ne&&(Ne.d(1),Ne=null),(Fn=D[5].browse)!=null&&Fn.current_milestone?Pe?Pe.p(D,me):(Pe=pr(D),Pe.c(),Pe.m(e,ft)):Pe&&(Pe.d(1),Pe=null),D[5].pipeline?ke?(ke.p(vn(D),me),me&32&&m(ke,1)):(ke=$r(vn(D)),ke.c(),m(ke,1),ke.m(e,ut)):ke&&(_e(),_(ke,1,1,()=>{ke=null}),ge());const on={};me&4128&&(on.$$scope={dirty:me,ctx:D}),Fe.$set(on);const An={};me&4096&&(An.$$scope={dirty:me,ctx:D}),et.$set(An)},i(D){He||(m(ve),m(ke),m(Fe.$$.fragment,D),m(et.$$.fragment,D),He=!0)},o(D){_(ve),_(ke),_(Fe.$$.fragment,D),_(et.$$.fragment,D),He=!1},d(D){D&&d(e),Me&&Me.d(),Oe&&Oe.d(),ve&&ve.d(),je&&je.d(),Ne&&Ne.d(),Pe&&Pe.d(),ke&&ke.d(),v(Fe),v(et),o[9](null)}}}function X$(o){let e=o[1],n,t,l=dr(o);return{c(){l.c(),n=he()},m(r,s){l.m(r,s),g(r,n,s),t=!0},p(r,[s]){s&2&&Q(e,e=r[1])?(_e(),_(l,1,1,Z),ge(),l=dr(r),l.c(),m(l,1),l.m(n.parentNode,n)):l.p(r,s)},i(r){t||(m(l),t=!0)},o(r){_(l),t=!1},d(r){r&&d(n),l.d(r)}}}function ct(o,e){return e?o.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):o}function x$(o,e,n){let t,l;Y(o,_n,k=>n(10,l=k));let{description:r}=e,{props:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,u;xr(()=>{u&&n(4,u.scrollTop=0,u)});function c(){let k={type:"FeatureCollection",features:f.features.filter(S=>S.properties.scheme_reference==t.scheme_reference)};l==null||l.fitBounds(Dr(k),{padding:20,animate:!1})}function $(){var O,I,N;let k={type:"FeatureCollection",features:f.features.filter(P=>P.properties.scheme_reference==t.scheme_reference),schemes:{}};k.schemes[t.scheme_reference]=t;let S=(O=t.browse)==null?void 0:O.authority_or_region;if(!S){window.alert("This scheme has no authority specified, you can't edit this");return}let y=t.pipeline?"pipeline":"v1";if((I=t.browse)!=null&&I.local_filename)window.open(zn(S,(N=t.browse)==null?void 0:N.local_filename,y),"_blank");else{let P=`browse_copy_${t.scheme_reference}`,M=ro(S,k);for(let j of M.features)delete j.properties.funding_programme,delete j.properties.current_milestone;oo(so(S,P),JSON.stringify(M)),window.open(zn(S,P,y),"_blank")}}function h(k){B[k?"unshift":"push"](()=>{u=k,n(4,u)})}return o.$$set=k=>{"description"in k&&n(0,r=k.description),"props"in k&&n(1,s=k.props),"schemesGj"in k&&n(8,f=k.schemesGj),"filterSchemeText"in k&&n(2,i=k.filterSchemeText),"filterInterventionText"in k&&n(3,a=k.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&n(5,t=f.schemes[s.scheme_reference])},[r,s,i,a,u,t,c,$,f,h]}class Pn extends X{constructor(e){super(),x(this,e,x$,X$,Q,{description:0,props:1,schemesGj:8,filterSchemeText:2,filterInterventionText:3})}}function em(o){let e,n=o[10].name+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&1024&&n!==(n=l[10].name+"")&&q(t,n)},d(l){l&&d(e)}}}function tm(o){let e,n;return e=new Pn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&2&&(r.description=t[1]),l&1024&&(r.props=t[10]),l&8&&(r.schemesGj=t[3]),l&16&&(r.filterSchemeText=t[4]),l&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function nm(o){let e,n,t,l;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[em,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[tm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,n,s),b(t,r,s),l=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){l||(m(e.$$.fragment,r),m(t.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),l=!1},d(r){r&&d(n),v(e,r),v(t,r)}}}function lm(o){let e,n=o[10].name+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&1024&&n!==(n=l[10].name+"")&&q(t,n)},d(l){l&&d(e)}}}function rm(o){let e,n;return e=new Pn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&2&&(r.description=t[1]),l&1024&&(r.props=t[10]),l&8&&(r.schemesGj=t[3]),l&16&&(r.filterSchemeText=t[4]),l&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function om(o){let e,n,t,l;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[lm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[rm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,n,s),b(t,r,s),l=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){l||(m(e.$$.fragment,r),m(t.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),l=!1},d(r){r&&d(n),v(e,r),v(t,r)}}}function sm(o){let e,n=o[10].name+"",t;return{c(){e=T("p"),t=L(n)},m(l,r){g(l,e,r),p(e,t)},p(l,r){r&1024&&n!==(n=l[10].name+"")&&q(t,n)},d(l){l&&d(e)}}}function im(o){let e,n;return e=new Pn({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&2&&(r.description=t[1]),l&1024&&(r.props=t[10]),l&8&&(r.schemesGj=t[3]),l&16&&(r.filterSchemeText=t[4]),l&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function am(o){let e,n,t,l;return e=new ie({props:{popupClass:"border-popup",$$slots:{default:[sm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ie({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[im,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,n,s),b(t,r,s),l=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){l||(m(e.$$.fragment,r),m(t.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),l=!1},d(r){r&&d(n),v(e,r),v(t,r)}}}function fm(o){let e,n,t,l,r,s,f,i,a,u;const c=[z(`${o[0]}-interventions-points`),{filter:["all",Wn,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":En,"circle-opacity":te(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let $={$$slots:{default:[nm]},$$scope:{ctx:o}};for(let M=0;M<c.length;M+=1)$=ne($,c[M]);e=new Bt({props:$});const h=[z(`${o[0]}-interventions-lines`),{filter:["all",Yn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":Vt,"line-opacity":te(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[om]},$$scope:{ctx:o}};for(let M=0;M<h.length;M+=1)k=ne(k,h[M]);t=new de({props:k});const S=[z(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Vt,"circle-opacity":0,"circle-stroke-color":nt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[2]?"visible":"none"}}];let y={};for(let M=0;M<S.length;M+=1)y=ne(y,S[M]);r=new Bt({props:y});const O=[z(`${o[0]}-interventions-polygons`),{filter:["all",sn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":te(.2,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let I={$$slots:{default:[am]},$$scope:{ctx:o}};for(let M=0;M<O.length;M+=1)I=ne(I,O[M]);f=new ze({props:I});const N=[z(`${o[0]}-interventions-polygons-outlines`),{filter:["all",sn,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*Vt}},{layout:{visibility:o[2]?"visible":"none"}}];let P={};for(let M=0;M<N.length;M+=1)P=ne(P,N[M]);return a=new de({props:P}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment),l=C(),w(r.$$.fragment),s=C(),w(f.$$.fragment),i=C(),w(a.$$.fragment)},m(M,j){b(e,M,j),g(M,n,j),b(t,M,j),g(M,l,j),b(r,M,j),g(M,s,j),b(f,M,j),g(M,i,j),b(a,M,j),u=!0},p(M,j){const A=j&837?le(c,[j&1&&oe(z(`${M[0]}-interventions-points`)),j&768&&{filter:["all",Wn,M[8],M[9]]},c[2],c[3],j&64&&{paint:{"circle-color":M[6],"circle-radius":En,"circle-opacity":te(1,.5)}},j&4&&{layout:{visibility:M[2]?"visible":"none"}},c[6]]):{};j&2106&&(A.$$scope={dirty:j,ctx:M}),e.$set(A);const R=j&325?le(h,[j&1&&oe(z(`${M[0]}-interventions-lines`)),j&256&&{filter:["all",Yn,M[8]]},h[2],h[3],j&64&&{paint:{"line-color":M[6],"line-width":Vt,"line-opacity":te(1,.5)}},j&4&&{layout:{visibility:M[2]?"visible":"none"}},h[6]]):{};j&2106&&(R.$$scope={dirty:j,ctx:M}),t.$set(R);const H=j&5?le(S,[j&1&&oe(z(`${M[0]}-interventions-lines-endpoints`)),S[1],S[2],j&4&&{layout:{visibility:M[2]?"visible":"none"}}]):{};r.$set(H);const J=j&325?le(O,[j&1&&oe(z(`${M[0]}-interventions-polygons`)),j&256&&{filter:["all",sn,M[8]]},O[2],O[3],j&64&&{paint:{"fill-color":M[6],"fill-opacity":te(.2,.5)}},j&4&&{layout:{visibility:M[2]?"visible":"none"}},O[6]]):{};j&2106&&(J.$$scope={dirty:j,ctx:M}),f.$set(J);const ae=j&325?le(N,[j&1&&oe(z(`${M[0]}-interventions-polygons-outlines`)),j&256&&{filter:["all",sn,M[8]]},j&64&&{paint:{"line-color":M[6],"line-opacity":.5,"line-width":.7*Vt}},j&4&&{layout:{visibility:M[2]?"visible":"none"}}]):{};a.$set(ae)},i(M){u||(m(e.$$.fragment,M),m(t.$$.fragment,M),m(r.$$.fragment,M),m(f.$$.fragment,M),m(a.$$.fragment,M),u=!0)},o(M){_(e.$$.fragment,M),_(t.$$.fragment,M),_(r.$$.fragment,M),_(f.$$.fragment,M),_(a.$$.fragment,M),u=!1},d(M){M&&(d(n),d(l),d(s),d(i)),v(e,M),v(t,M),v(r,M),v(f,M),v(a,M)}}}function um(o){let e,n;return e=new Ut({props:{data:o[7],$$slots:{default:[fm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,[l]){const r={};l&128&&(r.data=t[7]),l&2175&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function cm(o,e,n){let t,{name:l}=e,{description:r}=e,{show:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],$=["!=",["get","endpoint"],!0];return o.$$set=h=>{"name"in h&&n(0,l=h.name),"description"in h&&n(1,r=h.description),"show"in h&&n(2,s=h.show),"schemesGj"in h&&n(3,f=h.schemesGj),"filterSchemeText"in h&&n(4,i=h.filterSchemeText),"filterInterventionText"in h&&n(5,a=h.filterInterventionText),"color"in h&&n(6,u=h.color)},o.$$.update=()=>{o.$$.dirty&8&&n(7,t=mo(f))},[l,r,s,f,i,a,u,t,c,$]}class an extends X{constructor(e){super(),x(this,e,cm,um,Q,{name:0,description:1,show:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function pm(o){return Xe(["get","intervention_type"],{area:nt.area,route:nt.route,crossing:nt.crossing,other:nt.other},"white")}function $m(o){return[["Areas",nt.area],["Routes",nt.route],["Crossings",nt.crossing],["Other",nt.other]]}function hr(o,e,n){const t=o.slice();return t[56]=e[n],t}function wr(o,e,n){const t=o.slice();return t[56]=e[n],t}function br(o,e,n){const t=o.slice();return t[56]=e[n],t}function vr(o,e,n){const t=o.slice();return t[56]=e[n],t}function mm(o){let e,n;return e=new S$({props:{loadFile:o[33]}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p:Z,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kr(o){let e,n,t;function l(s){o[39](s)}let r={name:Wr,title:Yr,$$slots:{controls:[gm],help:[_m]},$$scope:{ctx:o}};return o[16]!==void 0&&(r.show=o[16]),e=new fe({props:r}),B.push(()=>U(e,"show",l)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&919553|f[2]&8&&(i.$$scope={dirty:f,ctx:s}),!n&&f[0]&65536&&(n=!0,i.show=s[16],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function yr(o){let e,n,t=o[56]+"",l;return{c(){e=T("li"),n=T("p"),l=L(t)},m(r,s){g(r,e,s),p(e,n),p(n,l)},p(r,s){s[0]&131072&&t!==(t=r[56]+"")&&q(l,t)},d(r){r&&d(e)}}}function _m(o){let e,n,t,l,r,s,f;t=new gn({props:{text:"Scheme data caveats"}});let i=$e(o[17].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=yr(vr(o,i,u));return{c(){e=T("span"),n=T("p"),w(t.$$.fragment),l=L(`Please note there are data
            quality caveats for all scheme data:`),r=C(),s=T("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){g(u,e,c),p(e,n),b(t,n,null),p(n,l),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&131072){i=$e(u[17].notes??[]);let $;for($=0;$<i.length;$+=1){const h=vr(u,i,$);a[$]?a[$].p(h,c):(a[$]=yr(h),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),qe(a,u)}}}function gm(o){let e,n,t,l,r,s,f,i,a,u,c;function $(I){o[35](I)}function h(I){o[36](I)}function k(I){o[37](I)}let S={source:"ATF"};o[17]!==void 0&&(S.schemesGj=o[17]),o[18]!==void 0&&(S.filterSchemeText=o[18]),o[19]!==void 0&&(S.filterInterventionText=o[19]),n=new dn({props:S}),B.push(()=>U(n,"schemesGj",$)),B.push(()=>U(n,"filterSchemeText",h)),B.push(()=>U(n,"filterInterventionText",k));function y(I){o[38](I)}let O={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(O.value=o[0]),f=new st({props:O}),B.push(()=>U(f,"value",y)),u=new Wt({props:{rows:o[11]}}),{c(){e=T("div"),w(n.$$.fragment),s=C(),w(f.$$.fragment),a=C(),w(u.$$.fragment),F(e,"slot","controls"),ee(e,"border","1px solid black"),ee(e,"padding","8px")},m(I,N){g(I,e,N),b(n,e,null),p(e,s),b(f,e,null),p(e,a),b(u,e,null),c=!0},p(I,N){const P={};!t&&N[0]&131072&&(t=!0,P.schemesGj=I[17],W(()=>t=!1)),!l&&N[0]&262144&&(l=!0,P.filterSchemeText=I[18],W(()=>l=!1)),!r&&N[0]&524288&&(r=!0,P.filterInterventionText=I[19],W(()=>r=!1)),n.$set(P);const M={};!i&&N[0]&1&&(i=!0,M.value=I[0],W(()=>i=!1)),f.$set(M);const j={};N[0]&2048&&(j.rows=I[11]),u.$set(j)},i(I){c||(m(n.$$.fragment,I),m(f.$$.fragment,I),m(u.$$.fragment,I),c=!0)},o(I){_(n.$$.fragment,I),_(f.$$.fragment,I),_(u.$$.fragment,I),c=!1},d(I){I&&d(e),v(n),v(f),v(u)}}}function Sr(o){let e,n,t;function l(s){o[44](s)}let r={name:Jr,title:Vr,$$slots:{controls:[hm],help:[dm]},$$scope:{ctx:o}};return o[15]!==void 0&&(r.show=o[15]),e=new fe({props:r}),B.push(()=>U(e,"show",l)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&7340546|f[2]&8&&(i.$$scope={dirty:f,ctx:s}),!n&&f[0]&32768&&(n=!0,i.show=s[15],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Tr(o){let e,n,t=o[56]+"",l;return{c(){e=T("li"),n=T("p"),l=L(t)},m(r,s){g(r,e,s),p(e,n),p(n,l)},p(r,s){s[0]&1048576&&t!==(t=r[56]+"")&&q(l,t)},d(r){r&&d(e)}}}function dm(o){let e,n,t,l,r,s,f;t=new gn({props:{text:"Scheme data caveats"}});let i=$e(o[20].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Tr(br(o,i,u));return{c(){e=T("span"),n=T("p"),w(t.$$.fragment),l=L(`Please note there are data
            quality caveats for all scheme data:`),r=C(),s=T("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){g(u,e,c),p(e,n),b(t,n,null),p(n,l),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&1048576){i=$e(u[20].notes??[]);let $;for($=0;$<i.length;$+=1){const h=br(u,i,$);a[$]?a[$].p(h,c):(a[$]=Tr(h),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),qe(a,u)}}}function hm(o){let e,n,t,l,r,s,f,i,a,u,c;function $(I){o[40](I)}function h(I){o[41](I)}function k(I){o[42](I)}let S={source:"LCWIP"};o[20]!==void 0&&(S.schemesGj=o[20]),o[21]!==void 0&&(S.filterSchemeText=o[21]),o[22]!==void 0&&(S.filterInterventionText=o[22]),n=new dn({props:S}),B.push(()=>U(n,"schemesGj",$)),B.push(()=>U(n,"filterSchemeText",h)),B.push(()=>U(n,"filterInterventionText",k));function y(I){o[43](I)}let O={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(O.value=o[1]),f=new st({props:O}),B.push(()=>U(f,"value",y)),u=new Wt({props:{rows:o[9]}}),{c(){e=T("div"),w(n.$$.fragment),s=C(),w(f.$$.fragment),a=C(),w(u.$$.fragment),F(e,"slot","controls"),ee(e,"border","1px solid black"),ee(e,"padding","8px")},m(I,N){g(I,e,N),b(n,e,null),p(e,s),b(f,e,null),p(e,a),b(u,e,null),c=!0},p(I,N){const P={};!t&&N[0]&1048576&&(t=!0,P.schemesGj=I[20],W(()=>t=!1)),!l&&N[0]&2097152&&(l=!0,P.filterSchemeText=I[21],W(()=>l=!1)),!r&&N[0]&4194304&&(r=!0,P.filterInterventionText=I[22],W(()=>r=!1)),n.$set(P);const M={};!i&&N[0]&2&&(i=!0,M.value=I[1],W(()=>i=!1)),f.$set(M);const j={};N[0]&512&&(j.rows=I[9]),u.$set(j)},i(I){c||(m(n.$$.fragment,I),m(f.$$.fragment,I),m(u.$$.fragment,I),c=!0)},o(I){_(n.$$.fragment,I),_(f.$$.fragment,I),_(u.$$.fragment,I),c=!1},d(I){I&&d(e),v(n),v(f),v(u)}}}function wm(o){let e=Object.entries(o[17].schemes).length>0,n,t=Object.entries(o[20].schemes).length>0,l,r,s=e&&kr(o),f=t&&Sr(o);return{c(){s&&s.c(),n=C(),f&&f.c(),l=he()},m(i,a){s&&s.m(i,a),g(i,n,a),f&&f.m(i,a),g(i,l,a),r=!0},p(i,a){a[0]&131072&&(e=Object.entries(i[17].schemes).length>0),e?s?(s.p(i,a),a[0]&131072&&m(s,1)):(s=kr(i),s.c(),m(s,1),s.m(n.parentNode,n)):s&&(_e(),_(s,1,1,()=>{s=null}),ge()),a[0]&1048576&&(t=Object.entries(i[20].schemes).length>0),t?f?(f.p(i,a),a[0]&1048576&&m(f,1)):(f=Sr(i),f.c(),m(f,1),f.m(l.parentNode,l)):f&&(_e(),_(f,1,1,()=>{f=null}),ge())},i(i){r||(m(s),m(f),r=!0)},o(i){_(s),_(f),r=!1},d(i){i&&(d(n),d(l)),s&&s.d(i),f&&f.d(i)}}}function bm(o){let e;return{c(){e=L("Show your sketches")},m(n,t){g(n,e,t)},d(n){n&&d(e)}}}function Lr(o){let e,n,t;function l(s){o[49](s)}let r={name:Qr,title:Zr,$$slots:{controls:[km],help:[vm]},$$scope:{ctx:o}};return o[14]!==void 0&&(r.show=o[14]),e=new fe({props:r}),B.push(()=>U(e,"show",l)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&58720388|f[2]&8&&(i.$$scope={dirty:f,ctx:s}),!n&&f[0]&16384&&(n=!0,i.show=s[14],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Cr(o){let e,n,t=o[56]+"",l;return{c(){e=T("li"),n=T("p"),l=L(t)},m(r,s){g(r,e,s),p(e,n),p(n,l)},p(r,s){s[0]&8388608&&t!==(t=r[56]+"")&&q(l,t)},d(r){r&&d(e)}}}function vm(o){let e,n,t,l,r,s,f;t=new gn({props:{text:"Scheme data caveats"}});let i=$e(o[23].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Cr(wr(o,i,u));return{c(){e=T("span"),n=T("p"),w(t.$$.fragment),l=L(`Please note there are data
            quality caveats for all scheme data:`),r=C(),s=T("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){g(u,e,c),p(e,n),b(t,n,null),p(n,l),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&8388608){i=$e(u[23].notes??[]);let $;for($=0;$<i.length;$+=1){const h=wr(u,i,$);a[$]?a[$].p(h,c):(a[$]=Cr(h),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),qe(a,u)}}}function km(o){let e,n,t,l,r,s,f,i,a,u,c;function $(I){o[45](I)}function h(I){o[46](I)}function k(I){o[47](I)}let S={source:"ATF"};o[23]!==void 0&&(S.schemesGj=o[23]),o[24]!==void 0&&(S.filterSchemeText=o[24]),o[25]!==void 0&&(S.filterInterventionText=o[25]),n=new dn({props:S}),B.push(()=>U(n,"schemesGj",$)),B.push(()=>U(n,"filterSchemeText",h)),B.push(()=>U(n,"filterInterventionText",k));function y(I){o[48](I)}let O={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[2]!==void 0&&(O.value=o[2]),f=new st({props:O}),B.push(()=>U(f,"value",y)),u=new Wt({props:{rows:o[7]}}),{c(){e=T("div"),w(n.$$.fragment),s=C(),w(f.$$.fragment),a=C(),w(u.$$.fragment),F(e,"slot","controls"),ee(e,"border","1px solid black"),ee(e,"padding","8px")},m(I,N){g(I,e,N),b(n,e,null),p(e,s),b(f,e,null),p(e,a),b(u,e,null),c=!0},p(I,N){const P={};!t&&N[0]&8388608&&(t=!0,P.schemesGj=I[23],W(()=>t=!1)),!l&&N[0]&16777216&&(l=!0,P.filterSchemeText=I[24],W(()=>l=!1)),!r&&N[0]&33554432&&(r=!0,P.filterInterventionText=I[25],W(()=>r=!1)),n.$set(P);const M={};!i&&N[0]&4&&(i=!0,M.value=I[2],W(()=>i=!1)),f.$set(M);const j={};N[0]&128&&(j.rows=I[7]),u.$set(j)},i(I){c||(m(n.$$.fragment,I),m(f.$$.fragment,I),m(u.$$.fragment,I),c=!0)},o(I){_(n.$$.fragment,I),_(f.$$.fragment,I),_(u.$$.fragment,I),c=!1},d(I){I&&d(e),v(n),v(f),v(u)}}}function Ir(o){let e,n,t;function l(s){o[54](s)}let r={name:Kr,title:Xr,$$slots:{controls:[Sm],help:[ym]},$$scope:{ctx:o}};return o[13]!==void 0&&(r.show=o[13]),e=new fe({props:r}),B.push(()=>U(e,"show",l)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&469762088|f[2]&8&&(i.$$scope={dirty:f,ctx:s}),!n&&f[0]&8192&&(n=!0,i.show=s[13],W(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Mr(o){let e,n,t=o[56]+"",l;return{c(){e=T("li"),n=T("p"),l=L(t)},m(r,s){g(r,e,s),p(e,n),p(n,l)},p(r,s){s[0]&67108864&&t!==(t=r[56]+"")&&q(l,t)},d(r){r&&d(e)}}}function ym(o){let e,n,t,l,r,s,f;t=new gn({props:{text:"Scheme data caveats"}});let i=$e(o[26].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Mr(hr(o,i,u));return{c(){e=T("span"),n=T("p"),w(t.$$.fragment),l=L(`Please note there are data
            quality caveats for all scheme data:`),r=C(),s=T("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){g(u,e,c),p(e,n),b(t,n,null),p(n,l),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&67108864){i=$e(u[26].notes??[]);let $;for($=0;$<i.length;$+=1){const h=hr(u,i,$);a[$]?a[$].p(h,c):(a[$]=Mr(h),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),qe(a,u)}}}function Sm(o){let e,n,t,l,r,s,f,i,a,u,c;function $(I){o[50](I)}function h(I){o[51](I)}function k(I){o[52](I)}let S={source:"LCWIP"};o[26]!==void 0&&(S.schemesGj=o[26]),o[27]!==void 0&&(S.filterSchemeText=o[27]),o[28]!==void 0&&(S.filterInterventionText=o[28]),n=new dn({props:S}),B.push(()=>U(n,"schemesGj",$)),B.push(()=>U(n,"filterSchemeText",h)),B.push(()=>U(n,"filterInterventionText",k));function y(I){o[53](I)}let O={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[3]!==void 0&&(O.value=o[3]),f=new st({props:O}),B.push(()=>U(f,"value",y)),u=new Wt({props:{rows:o[5]}}),{c(){e=T("div"),w(n.$$.fragment),s=C(),w(f.$$.fragment),a=C(),w(u.$$.fragment),F(e,"slot","controls"),ee(e,"border","1px solid black"),ee(e,"padding","8px")},m(I,N){g(I,e,N),b(n,e,null),p(e,s),b(f,e,null),p(e,a),b(u,e,null),c=!0},p(I,N){const P={};!t&&N[0]&67108864&&(t=!0,P.schemesGj=I[26],W(()=>t=!1)),!l&&N[0]&134217728&&(l=!0,P.filterSchemeText=I[27],W(()=>l=!1)),!r&&N[0]&268435456&&(r=!0,P.filterInterventionText=I[28],W(()=>r=!1)),n.$set(P);const M={};!i&&N[0]&8&&(i=!0,M.value=I[3],W(()=>i=!1)),f.$set(M);const j={};N[0]&32&&(j.rows=I[5]),u.$set(j)},i(I){c||(m(n.$$.fragment,I),m(f.$$.fragment,I),m(u.$$.fragment,I),c=!0)},o(I){_(n.$$.fragment,I),_(f.$$.fragment,I),_(u.$$.fragment,I),c=!1},d(I){I&&d(e),v(n),v(f),v(u)}}}function Tm(o){let e=Object.entries(o[23].schemes).length>0,n,t=Object.entries(o[26].schemes).length>0,l,r,s=e&&Lr(o),f=t&&Ir(o);return{c(){s&&s.c(),n=C(),f&&f.c(),l=he()},m(i,a){s&&s.m(i,a),g(i,n,a),f&&f.m(i,a),g(i,l,a),r=!0},p(i,a){a[0]&8388608&&(e=Object.entries(i[23].schemes).length>0),e?s?(s.p(i,a),a[0]&8388608&&m(s,1)):(s=Lr(i),s.c(),m(s,1),s.m(n.parentNode,n)):s&&(_e(),_(s,1,1,()=>{s=null}),ge()),a[0]&67108864&&(t=Object.entries(i[26].schemes).length>0),t?f?(f.p(i,a),a[0]&67108864&&m(f,1)):(f=Ir(i),f.c(),m(f,1),f.m(l.parentNode,l)):f&&(_e(),_(f,1,1,()=>{f=null}),ge())},i(i){r||(m(s),m(f),r=!0)},o(i){_(s),_(f),r=!1},d(i){i&&(d(n),d(l)),s&&s.d(i),f&&f.d(i)}}}function Lm(o){let e=Rr()=="Private (development)",n,t,l,r,s,f,i,a,u,c,$,h,k,S=e&&mm(o);return t=new De({props:{small:!0,$$slots:{default:[wm]},$$scope:{ctx:o}}}),r=new io({props:{label:"Load schemes from GeoJSON",onLoad:o[33]}}),f=new ao({props:{errorMessage:o[4]}}),c=new Be({props:{$$slots:{default:[bm]},$$scope:{ctx:o}}}),c.$on("click",o[34]),h=new De({props:{small:!0,$$slots:{default:[Tm]},$$scope:{ctx:o}}}),{c(){S&&S.c(),n=C(),w(t.$$.fragment),l=C(),w(r.$$.fragment),s=C(),w(f.$$.fragment),i=C(),a=T("hr"),u=C(),w(c.$$.fragment),$=C(),w(h.$$.fragment)},m(y,O){S&&S.m(y,O),g(y,n,O),b(t,y,O),g(y,l,O),b(r,y,O),g(y,s,O),b(f,y,O),g(y,i,O),g(y,a,O),g(y,u,O),b(c,y,O),g(y,$,O),b(h,y,O),k=!0},p(y,O){e&&S.p(y,O);const I={};O[0]&8358403|O[2]&8&&(I.$$scope={dirty:O,ctx:y}),t.$set(I);const N={};O[0]&16&&(N.errorMessage=y[4]),f.$set(N);const P={};O[2]&8&&(P.$$scope={dirty:O,ctx:y}),c.$set(P);const M={};O[0]&528507052|O[2]&8&&(M.$$scope={dirty:O,ctx:y}),h.$set(M)},i(y){k||(m(S),m(t.$$.fragment,y),m(r.$$.fragment,y),m(f.$$.fragment,y),m(c.$$.fragment,y),m(h.$$.fragment,y),k=!0)},o(y){_(S),_(t.$$.fragment,y),_(r.$$.fragment,y),_(f.$$.fragment,y),_(c.$$.fragment,y),_(h.$$.fragment,y),k=!1},d(y){y&&(d(n),d(l),d(s),d(i),d(a),d(u),d($)),S&&S.d(y),v(t,y),v(r,y),v(f,y),v(c,y),v(h,y)}}}function Cm(o){let e,n,t,l,r,s,f,i,a,u;return e=new rt({props:{label:"Schemes",open:!0,$$slots:{default:[Lm]},$$scope:{ctx:o}}}),t=new an({props:{name:"main_atf",description:Yr,show:o[16],schemesGj:o[17],filterSchemeText:o[18],filterInterventionText:o[19],color:o[12]}}),r=new an({props:{name:"main_lcwip",description:Vr,show:o[15],schemesGj:o[20],filterSchemeText:o[21],filterInterventionText:o[22],color:o[10]}}),f=new an({props:{name:"local_atf",description:Zr,show:o[14],schemesGj:o[23],filterSchemeText:o[24],filterInterventionText:o[25],color:o[8]}}),a=new an({props:{name:"local_lcwip",description:Xr,show:o[13],schemesGj:o[26],filterSchemeText:o[27],filterInterventionText:o[28],color:o[6]}}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment),l=C(),w(r.$$.fragment),s=C(),w(f.$$.fragment),i=C(),w(a.$$.fragment)},m(c,$){b(e,c,$),g(c,n,$),b(t,c,$),g(c,l,$),b(r,c,$),g(c,s,$),b(f,c,$),g(c,i,$),b(a,c,$),u=!0},p(c,$){const h={};$[0]&536865471|$[2]&8&&(h.$$scope={dirty:$,ctx:c}),e.$set(h);const k={};$[0]&65536&&(k.show=c[16]),$[0]&131072&&(k.schemesGj=c[17]),$[0]&262144&&(k.filterSchemeText=c[18]),$[0]&524288&&(k.filterInterventionText=c[19]),$[0]&4096&&(k.color=c[12]),t.$set(k);const S={};$[0]&32768&&(S.show=c[15]),$[0]&1048576&&(S.schemesGj=c[20]),$[0]&2097152&&(S.filterSchemeText=c[21]),$[0]&4194304&&(S.filterInterventionText=c[22]),$[0]&1024&&(S.color=c[10]),r.$set(S);const y={};$[0]&16384&&(y.show=c[14]),$[0]&8388608&&(y.schemesGj=c[23]),$[0]&16777216&&(y.filterSchemeText=c[24]),$[0]&33554432&&(y.filterInterventionText=c[25]),$[0]&256&&(y.color=c[8]),f.$set(y);const O={};$[0]&8192&&(O.show=c[13]),$[0]&67108864&&(O.schemesGj=c[26]),$[0]&134217728&&(O.filterSchemeText=c[27]),$[0]&268435456&&(O.filterInterventionText=c[28]),$[0]&64&&(O.color=c[6]),a.$set(O)},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(d(n),d(l),d(s),d(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}let Wr="main_atf_schemes",Yr="ATF schemes",Jr="main_lcwip_schemes",Vr="LCWIP schemes",Qr="local_atf_schemes",Zr="Your ATF schemes",Kr="local_lcwip_schemes",Xr="Your LCWIP schemes";function Im(o,e,n){let t,l,r,s,f,i,a,u,c,$,h,k,S,y,O,I,N,P,M,j,A,R,H,J;Y(o,fn,D=>n(17,S=D)),Y(o,El,D=>n(18,y=D)),Y(o,Hl,D=>n(19,O=D)),Y(o,hn,D=>n(20,I=D)),Y(o,Ul,D=>n(21,N=D)),Y(o,Bl,D=>n(22,P=D)),Y(o,wn,D=>n(23,M=D)),Y(o,Yl,D=>n(24,j=D)),Y(o,Wl,D=>n(25,A=D)),Y(o,bn,D=>n(26,R=D)),Y(o,Vl,D=>n(27,H=D)),Y(o,Jl,D=>n(28,J=D));let ae="",G=ue(Wr);Y(o,G,D=>n(16,k=D));let K="fundingProgramme",E=ue(Jr);Y(o,E,D=>n(15,h=D));let se="interventionType",ye=ue(Qr);Y(o,ye,D=>n(14,$=D));let Re="fundingProgramme",Ce=ue(Kr);Y(o,Ce,D=>n(13,c=D));let Ie="interventionType";function it(D,me){try{Gl(JSON.parse(me),fn,hn),pt(G,k=!0,k),pt(E,h=!0,h),n(4,ae="")}catch(on){n(4,ae=`The file you loaded is broken: ${on}`)}}function at(){Gl(L$(),wn,bn),pt(ye,$=!0,$),pt(Ce,c=!0,c)}function xe(D){return D=="interventionType"?[pm(),$m()]:D=="fundingProgramme"?[Xe(["get","funding_programme"],Jt,"grey"),Object.entries(Jt)]:D=="currentMilestone"?[Xe(["get","current_milestone"],Cn,"grey"),Object.entries(Cn)]:["red",[]]}function be(D){S=D,fn.set(S)}function Ae(D){y=D,El.set(y)}function We(D){O=D,Hl.set(O)}function ft(D){K=D,n(0,K)}function ut(D){k=D,G.set(k)}function Fe(D){I=D,hn.set(I)}function en(D){N=D,Ul.set(N)}function et(D){P=D,Bl.set(P)}function He(D){se=D,n(1,se)}function Me(D){h=D,E.set(h)}function Oe(D){M=D,wn.set(M)}function ve(D){j=D,Yl.set(j)}function je(D){A=D,Wl.set(A)}function Ne(D){Re=D,n(2,Re)}function Pe(D){$=D,ye.set($)}function ke(D){R=D,bn.set(R)}function tn(D){H=D,Vl.set(H)}function nn(D){J=D,Jl.set(J)}function ln(D){Ie=D,n(3,Ie)}function rn(D){c=D,Ce.set(c)}return o.$$.update=()=>{o.$$.dirty[0]&1&&n(12,[t,l]=xe(K),t,(n(11,l),n(0,K))),o.$$.dirty[0]&2&&n(10,[r,s]=xe(se),r,(n(9,s),n(1,se))),o.$$.dirty[0]&4&&n(8,[f,i]=xe(Re),f,(n(7,i),n(2,Re))),o.$$.dirty[0]&8&&n(6,[a,u]=xe(Ie),a,(n(5,u),n(3,Ie)))},[K,se,Re,Ie,ae,u,a,i,f,s,r,l,t,c,$,h,k,S,y,O,I,N,P,M,j,A,R,H,J,G,E,ye,Ce,it,at,be,Ae,We,ft,ut,Fe,en,et,He,Me,Oe,ve,je,Ne,Pe,ke,tn,nn,ln,rn]}class Mm extends X{constructor(e){super(),x(this,e,Im,Cm,Q,{},null,[-1,-1,-1])}}const Or=Se(!0);let In=Se(null);function Om(o){let e,n,t,l,r,s,f,i;return e=new Xc({}),t=new ap({}),r=new Op({}),f=new wp({}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment),l=C(),w(r.$$.fragment),s=C(),w(f.$$.fragment)},m(a,u){b(e,a,u),g(a,n,u),b(t,a,u),g(a,l,u),b(r,a,u),g(a,s,u),b(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(d(n),d(l),d(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function jm(o){let e,n;return e=new De({props:{small:!0,$$slots:{default:[Om]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nm(o){let e,n,t,l,r,s,f,i,a,u,c,$,h,k;return e=new mf({}),t=new Uf({}),r=new Sf({}),f=new Af({}),a=new Fc({}),c=new dc({}),h=new Ia({}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment),l=C(),w(r.$$.fragment),s=C(),w(f.$$.fragment),i=C(),w(a.$$.fragment),u=C(),w(c.$$.fragment),$=C(),w(h.$$.fragment)},m(S,y){b(e,S,y),g(S,n,y),b(t,S,y),g(S,l,y),b(r,S,y),g(S,s,y),b(f,S,y),g(S,i,y),b(a,S,y),g(S,u,y),b(c,S,y),g(S,$,y),b(h,S,y),k=!0},i(S){k||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(r.$$.fragment,S),m(f.$$.fragment,S),m(a.$$.fragment,S),m(c.$$.fragment,S),m(h.$$.fragment,S),k=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(r.$$.fragment,S),_(f.$$.fragment,S),_(a.$$.fragment,S),_(c.$$.fragment,S),_(h.$$.fragment,S),k=!1},d(S){S&&(d(n),d(l),d(s),d(i),d(u),d($)),v(e,S),v(t,S),v(r,S),v(f,S),v(a,S),v(c,S),v(h,S)}}}function Pm(o){let e,n;return e=new De({props:{small:!0,$$slots:{default:[Nm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Am(o){let e,n,t,l,r,s;return e=new xa({}),t=new Zu({}),r=new sc({}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment),l=C(),w(r.$$.fragment)},m(f,i){b(e,f,i),g(f,n,i),b(t,f,i),g(f,l,i),b(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(d(n),d(l)),v(e,f),v(t,f),v(r,f)}}}function Rm(o){let e,n;return e=new De({props:{small:!0,$$slots:{default:[Am]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Dm(o){let e,n,t,l,r,s,f,i,a,u;return e=new Qi({}),t=new qa({}),r=new ni({}),f=new Si({}),a=new Fi({}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment),l=C(),w(r.$$.fragment),s=C(),w(f.$$.fragment),i=C(),w(a.$$.fragment)},m(c,$){b(e,c,$),g(c,n,$),b(t,c,$),g(c,l,$),b(r,c,$),g(c,s,$),b(f,c,$),g(c,i,$),b(a,c,$),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(d(n),d(l),d(s),d(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function Gm(o){let e,n;return e=new De({props:{small:!0,$$slots:{default:[Dm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Fm(o){let e,n,t,l;return e=new Ws({}),t=new $i({}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment)},m(r,s){b(e,r,s),g(r,n,s),b(t,r,s),l=!0},i(r){l||(m(e.$$.fragment,r),m(t.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),l=!1},d(r){r&&d(n),v(e,r),v(t,r)}}}function qm(o){let e,n;return e=new De({props:{small:!0,$$slots:{default:[Fm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function zm(o){let e,n,t,l,r,s,f,i;return e=new Eu({}),t=new lu({}),r=new Nu({}),f=new g$({}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment),l=C(),w(r.$$.fragment),s=C(),w(f.$$.fragment)},m(a,u){b(e,a,u),g(a,n,u),b(t,a,u),g(a,l,u),b(r,a,u),g(a,s,u),b(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(d(n),d(l),d(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function Hm(o){let e,n,t,l,r,s,f,i,a=Rr()=="Private (development)",u,c,$,h,k;e=new s$({}),t=new Vp({}),r=new wu({}),f=new Cc({});let S=a&&zm();return c=new oa({}),h=new _a({}),{c(){w(e.$$.fragment),n=C(),w(t.$$.fragment),l=C(),w(r.$$.fragment),s=C(),w(f.$$.fragment),i=C(),S&&S.c(),u=C(),w(c.$$.fragment),$=C(),w(h.$$.fragment)},m(y,O){b(e,y,O),g(y,n,O),b(t,y,O),g(y,l,O),b(r,y,O),g(y,s,O),b(f,y,O),g(y,i,O),S&&S.m(y,O),g(y,u,O),b(c,y,O),g(y,$,O),b(h,y,O),k=!0},p:Z,i(y){k||(m(e.$$.fragment,y),m(t.$$.fragment,y),m(r.$$.fragment,y),m(f.$$.fragment,y),m(S),m(c.$$.fragment,y),m(h.$$.fragment,y),k=!0)},o(y){_(e.$$.fragment,y),_(t.$$.fragment,y),_(r.$$.fragment,y),_(f.$$.fragment,y),_(S),_(c.$$.fragment,y),_(h.$$.fragment,y),k=!1},d(y){y&&(d(n),d(l),d(s),d(i),d(u),d($)),v(e,y),v(t,y),v(r,y),v(f,y),S&&S.d(y),v(c,y),v(h,y)}}}function Em(o){let e,n;return e=new De({props:{small:!0,$$slots:{default:[Hm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},p(t,l){const r={};l&256&&(r.$$scope={dirty:l,ctx:t}),e.$set(r)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Bm(o){let e,n,t,l,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new go({props:f}),B.push(()=>U(e,"enabled",s)),l=new ts({}),{c(){w(e.$$.fragment),t=C(),w(l.$$.fragment)},m(i,a){b(e,i,a),g(i,t,a),b(l,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!n&&a&1&&(n=!0,u.enabled=i[0],W(()=>n=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(l.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(l.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(l,i)}}}function Um(o){let e,n;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let l={};for(let r=0;r<t.length;r+=1)l=ne(l,t[r]);return e=new ze({props:l}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),n=!0},p(r,s){const f=s&2?le(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){n||(m(e.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),n=!1},d(r){v(e,r)}}}function Wm(o){let e,n,t,l,r,s,f,i,a,u,c,$,h,k,S,y,O,I,N,P,M;return n=new Mm({}),l=new rt({props:{label:"Trip generators",$$slots:{default:[jm]},$$scope:{ctx:o}}}),s=new rt({props:{label:"Existing infrastructure",$$slots:{default:[Pm]},$$scope:{ctx:o}}}),i=new rt({props:{label:"Public transport",$$slots:{default:[Rm]},$$scope:{ctx:o}}}),u=new rt({props:{label:"Boundaries",$$slots:{default:[Gm]},$$scope:{ctx:o}}}),$=new rt({props:{label:"Census",$$slots:{default:[qm]},$$scope:{ctx:o}}}),k=new rt({props:{label:"Other",$$slots:{default:[Em]},$$scope:{ctx:o}}}),y=new rt({props:{label:"Tools",$$slots:{default:[Bm]},$$scope:{ctx:o}}}),I=new _o({props:{disabled:!o[1]}}),P=new Ut({props:{data:o[4],$$slots:{default:[Um]},$$scope:{ctx:o}}}),{c(){e=T("div"),w(n.$$.fragment),t=C(),w(l.$$.fragment),r=C(),w(s.$$.fragment),f=C(),w(i.$$.fragment),a=C(),w(u.$$.fragment),c=C(),w($.$$.fragment),h=C(),w(k.$$.fragment),S=C(),w(y.$$.fragment),O=C(),w(I.$$.fragment),N=C(),w(P.$$.fragment)},m(j,A){g(j,e,A),b(n,e,null),p(e,t),b(l,e,null),p(e,r),b(s,e,null),p(e,f),b(i,e,null),p(e,a),b(u,e,null),p(e,c),b($,e,null),p(e,h),b(k,e,null),p(e,S),b(y,e,null),p(e,O),b(I,e,null),o[7](e),g(j,N,A),b(P,j,A),M=!0},p(j,[A]){const R={};A&256&&(R.$$scope={dirty:A,ctx:j}),l.$set(R);const H={};A&256&&(H.$$scope={dirty:A,ctx:j}),s.$set(H);const J={};A&256&&(J.$$scope={dirty:A,ctx:j}),i.$set(J);const ae={};A&256&&(ae.$$scope={dirty:A,ctx:j}),u.$set(ae);const G={};A&256&&(G.$$scope={dirty:A,ctx:j}),$.$set(G);const K={};A&256&&(K.$$scope={dirty:A,ctx:j}),k.$set(K);const E={};A&265&&(E.$$scope={dirty:A,ctx:j}),y.$set(E);const se={};A&2&&(se.disabled=!j[1]),I.$set(se);const ye={};A&258&&(ye.$$scope={dirty:A,ctx:j}),P.$set(ye)},i(j){M||(m(n.$$.fragment,j),m(l.$$.fragment,j),m(s.$$.fragment,j),m(i.$$.fragment,j),m(u.$$.fragment,j),m($.$$.fragment,j),m(k.$$.fragment,j),m(y.$$.fragment,j),m(I.$$.fragment,j),m(P.$$.fragment,j),M=!0)},o(j){_(n.$$.fragment,j),_(l.$$.fragment,j),_(s.$$.fragment,j),_(i.$$.fragment,j),_(u.$$.fragment,j),_($.$$.fragment,j),_(k.$$.fragment,j),_(y.$$.fragment,j),_(I.$$.fragment,j),_(P.$$.fragment,j),M=!1},d(j){j&&(d(e),d(N)),v(n),v(l),v(s),v(i),v(u),v($),v(k),v(y),v(I),o[7](null),v(P,j)}}}function Ym(o,e,n){let t,l,r,s;Y(o,Or,c=>n(1,l=c)),Y(o,In,c=>n(2,r=c)),Y(o,_n,c=>n(3,s=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>uo(c,eo(yn))};function a(c){t=c,n(0,t),n(1,l)}function u(c){B[c?"unshift":"push"](()=>{r=c,In.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&n(0,t=!l),o.$$.dirty&1&&Or.set(!t)},[t,l,r,s,f,i,a,u]}class Jm extends X{constructor(e){super(),x(this,e,Ym,Wm,Q,{})}}function Vm(o){let e,n,t;return{c(){e=T("p"),e.innerHTML="<b>Selected layers</b>",n=C(),t=T("div")},m(l,r){g(l,e,r),g(l,n,r),g(l,t,r),o[3](t)},p:Z,i:Z,o:Z,d(l){l&&(d(e),d(n),d(t)),o[3](null)}}}function Qm(o,e,n){if(o){o.innerHTML="";for(let t of e){let l=n.get(t);l&&(l.style.display="block",o.appendChild(l))}}}function Zm(o,e,n){let t,l;Y(o,Ln,f=>n(1,t=f)),Y(o,Qt,f=>n(2,l=f));let r=null;function s(f){B[f?"unshift":"push"](()=>{r=f,n(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&Qm(r,l,t)},[r,t,l,s]}class Km extends X{constructor(e){super(),x(this,e,Zm,Vm,Q,{})}}function Xm(o){let e,n,t,l,r,s,f,i,a,u,c,$,h,k,S;return n=new Io({}),l=new So({}),f=new To({}),$=new ss({props:{boundaryGeojson:o[3]}}),{c(){e=T("div"),w(n.$$.fragment),t=C(),w(l.$$.fragment),r=C(),s=T("div"),w(f.$$.fragment),i=C(),a=T("div"),u=T("h1"),u.textContent="Scheme Browser",c=C(),w($.$$.fragment),h=C(),k=T("div"),ee(s,"border-bottom","1px solid #b1b4b6"),ee(a,"display","flex"),ee(a,"justify-content","space-between"),F(e,"slot","sidebar"),F(e,"class","govuk-prose")},m(y,O){g(y,e,O),b(n,e,null),p(e,t),b(l,e,null),p(e,r),p(e,s),b(f,s,null),p(e,i),p(e,a),p(a,u),p(a,c),b($,a,null),p(e,h),p(e,k),o[6](k),S=!0},p(y,O){const I={};O&8&&(I.boundaryGeojson=y[3]),$.$set(I)},i(y){S||(m(n.$$.fragment,y),m(l.$$.fragment,y),m(f.$$.fragment,y),m($.$$.fragment,y),S=!0)},o(y){_(n.$$.fragment,y),_(l.$$.fragment,y),_(f.$$.fragment,y),_($.$$.fragment,y),S=!1},d(y){y&&d(e),v(n),v(l),v(f),v($),o[6](null)}}}function jr(o){let e,n;return e=new Jm({}),{c(){w(e.$$.fragment)},m(t,l){b(e,t,l),n=!0},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xm(o){let e,n,t,l;e=new ho({});let r=o[2]&&jr();return{c(){w(e.$$.fragment),n=C(),r&&r.c(),t=he()},m(s,f){b(e,s,f),g(s,n,f),r&&r.m(s,f),g(s,t,f),l=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=jr(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(_e(),_(r,1,1,()=>{r=null}),ge())},i(s){l||(m(e.$$.fragment,s),m(r),l=!0)},o(s){_(e.$$.fragment,s),_(r),l=!1},d(s){s&&(d(n),d(t)),v(e,s),r&&r.d(s)}}}function e_(o){let e,n,t;return n=new Lo({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[xm]},$$scope:{ctx:o}}}),{c(){e=T("div"),w(n.$$.fragment),F(e,"slot","main")},m(l,r){g(l,e,r),b(n,e,null),t=!0},p(l,r){const s={};r&2&&(s.style=l[1]),r&260&&(s.$$scope={dirty:r,ctx:l}),n.$set(s)},i(l){t||(m(n.$$.fragment,l),t=!0)},o(l){_(n.$$.fragment,l),t=!1},d(l){l&&d(e),v(n)}}}function t_(o){let e,n,t,l,r;return e=new Ro({props:{$$slots:{main:[e_],sidebar:[Xm]},$$scope:{ctx:o}}}),l=new Km({}),{c(){w(e.$$.fragment),n=C(),t=T("div"),w(l.$$.fragment),F(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){b(e,s,f),g(s,n,f),g(s,t,f),b(l,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(l.$$.fragment,s),r=!0)},o(s){_(e.$$.fragment,s),_(l.$$.fragment,s),r=!1},d(s){s&&(d(n),d(t)),v(e,s),v(l)}}}function n_(o,e,n){let t,l,r,s,f;Y(o,In,c=>n(4,t=c)),Y(o,_n,c=>n(5,l=c)),Y(o,yn,c=>n(1,r=c)),Y(o,Bn,c=>n(2,s=c)),Y(o,fn,c=>n(3,f=c)),Ar(()=>{to()});const i=new URLSearchParams(window.location.search);yn.set(i.get("style")||"dataviz");let a;function u(c){B[c?"unshift":"push"](()=>{a=c,n(0,a),n(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&l&&Bn.set(l),o.$$.dirty&17&&a&&t&&(n(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,l,u]}class l_ extends X{constructor(e){super(),x(this,e,n_,t_,Q,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new l_({target:document.getElementById("app")});
