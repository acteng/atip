import{E as M,s as I,N as $,S as B,i as O,e as h,f,g as C,n as v,U as A,o as y,V as Q,p as S,ar as x,P as ee,as as z,Q as Y,w as D,B as L,C as T,D as V,b as te,c as q,at as W,h as b,l as E,H as se,t as Z,au as ne,A as K,r as le,a0 as H,W as oe,Y as ie,$ as P}from"./maplibre_helpers-8102a46e.js";const F=[];function w(s,e=M){let t;const n=new Set;function l(a){if(I(s,a)&&(s=a,t)){const u=!F.length;for(const r of n)r[1](),F.push(r,s);if(u){for(let r=0;r<F.length;r+=2)F[r][0](F[r+1]);F.length=0}}}function o(a){l(a(s))}function i(a,u=M){const r=[a,u];return n.add(r),n.size===1&&(t=e(l)||M),a(s),()=>{n.delete(r),n.size===0&&(t(),t=null)}}return{set:l,update:o,subscribe:i}}function ae(s){return s=="google"||s=="bing"}const X=w(null),qe=w(null),re=w($()),ue=w(null),ce=w(null),fe=w(null),de=w(null),pe=w(_e());pe.subscribe(s=>window.localStorage.setItem("userSettings",JSON.stringify(s)));function Be(s){let e=new Set;for(let n of s.features)e.add(n.id);let t=e.size+1;for(;e.has(t);)t++;return t}function Oe(s){console.log(`Deleting intervention ${s}`),re.update(e=>(e.features=e.features.filter(t=>t.id!=s),e)),ue.set(null),ce.set(null),fe.set(null),de.set(null)}function _e(){let s={streetViewImagery:"google",avoidDoublingBack:!1};try{let e=JSON.parse(window.localStorage.getItem("userSettings")||"{}");ae(e.streetViewImagery)&&(s.streetViewImagery=e.streetViewImagery),typeof e.avoidDoublingBack=="boolean"&&(s.avoidDoublingBack=e.avoidDoublingBack)}catch(e){console.log(`Couldn't parse userSettings from local storage: ${e}`)}return s}function R(s){let e;const t=s[4].default,n=D(t,s,s[3],null);return{c(){n&&n.c()},m(l,o){n&&n.m(l,o),e=!0},p(l,o){n&&n.p&&(!e||o&8)&&L(n,t,l,l[3],e?V(t,l[3],o,null):T(l[3]),null)},i(l){e||(v(n,l),e=!0)},o(l){y(n,l),e=!1},d(l){n&&n.d(l)}}}function me(s){let e,t,n=s[1]&&R(s);return{c(){e=h("div"),n&&n.c(),f(e,"class","map svelte-12dpf1u")},m(l,o){C(l,e,o),n&&n.m(e,null),s[5](e),t=!0},p(l,[o]){l[1]?n?(n.p(l,o),o&2&&v(n,1)):(n=R(l),n.c(),v(n,1),n.m(e,null)):n&&(A(),y(n,1,1,()=>{n=null}),Q())},i(l){t||(v(n),t=!0)},o(l){y(n),t=!1},d(l){l&&S(e),n&&n.d(),s[5](null)}}}function be(s,e,t){let{$$slots:n={},$$scope:l}=e,{style:o}=e,i,a,u=!1;x("setCamera",!window.location.hash),ee(()=>{i=new z.Map({container:a,style:`https://api.maptiler.com/maps/${o}/style.json?key=MZEJTanw3WpxRvt7qDfo`,hash:!0}),i.addControl(new z.ScaleControl({})),i.addControl(new z.NavigationControl({visualizePitch:!0}),"bottom-right"),i.on("load",()=>{t(1,u=!0),X.set(i)}),new ResizeObserver(()=>{i.resize()}).observe(a)}),Y(()=>{i.remove()});function r(m){te[m?"unshift":"push"](()=>{a=m,t(0,a)})}return s.$$set=m=>{"style"in m&&t(2,o=m.style),"$$scope"in m&&t(3,l=m.$$scope)},[a,u,o,l,n,r]}class ze extends B{constructor(e){super(),O(this,e,be,me,I,{style:2})}}const ge=s=>({}),J=s=>({}),he=s=>({}),j=s=>({});function ve(s){let e,t,n,l,o,i,a,u,r,m,d;const p=s[3].sidebar,c=D(p,s,s[2],j),N=s[3].main,g=D(N,s,s[2],J);return{c(){e=h("div"),t=h("aside"),n=h("div"),c&&c.c(),l=q(),o=h("button"),o.textContent="â†’",a=q(),u=h("main"),g&&g.c(),f(n,"class","sidebar-content content-container svelte-ect12w"),f(o,"type","button"),f(o,"class","sidebar-toggle rounded-rect svelte-ect12w"),f(t,"class",i=W(s[0]?"":"collapsed")+" svelte-ect12w"),f(u,"class","svelte-ect12w"),f(e,"class","overall-layout svelte-ect12w")},m(_,k){C(_,e,k),b(e,t),b(t,n),c&&c.m(n,null),b(t,l),b(t,o),b(e,a),b(e,u),g&&g.m(u,null),r=!0,m||(d=E(o,"click",s[1]),m=!0)},p(_,[k]){c&&c.p&&(!r||k&4)&&L(c,p,_,_[2],r?V(p,_[2],k,he):T(_[2]),j),(!r||k&1&&i!==(i=W(_[0]?"":"collapsed")+" svelte-ect12w"))&&f(t,"class",i),g&&g.p&&(!r||k&4)&&L(g,N,_,_[2],r?V(N,_[2],k,ge):T(_[2]),J)},i(_){r||(v(c,_),v(g,_),r=!0)},o(_){y(c,_),y(g,_),r=!1},d(_){_&&S(e),c&&c.d(_),g&&g.d(_),m=!1,d()}}}function ye(s,e,t){let{$$slots:n={},$$scope:l}=e,o=!0;function i(){t(0,o=!o)}return s.$$set=a=>{"$$scope"in a&&t(2,l=a.$$scope)},[o,i,l,n]}class De extends B{constructor(e){super(),O(this,e,ye,ve,I,{})}}const Le={area:"#e41a1c",route:"#377eb8",crossing:"#4daf4a",other:"#984ea3",preapp:"#e41a1c",outline:"#377eb8","reserved matters":"#4daf4a","local plan":"#984ea3",hovering:"black",lineEndpointColor:"black"},Te=10,Ve=10;function we(s,e,t){let n;se(s,X,r=>t(2,n=r));let{layers:l}=e,{contents:o}=e,i=new z.Popup({closeButton:!1,closeOnClick:!1});n.on("mousemove",a),n.on("mouseout",u),Y(()=>{n.off("mousemove",a),n.off("mouseout",u),i.remove()});function a(r){if(!l.every(d=>n.getLayer(d))){i.remove();return}let m=n.queryRenderedFeatures(r.point,{layers:l});m.length>0?i.setLngLat(r.lngLat).setHTML(o(m[0].properties)).addTo(n):i.remove()}function u(){i.remove()}return s.$$set=r=>{"layers"in r&&t(0,l=r.layers),"contents"in r&&t(1,o=r.contents)},[l,o]}class Ee extends B{constructor(e){super(),O(this,e,we,null,I,{layers:0,contents:1})}}function ke(s){const e=s-1;return e*e*e+1}function G(s,{delay:e=0,duration:t=400,easing:n=ke}={}){const l=getComputedStyle(s),o=+l.opacity,i=parseFloat(l.height),a=parseFloat(l.paddingTop),u=parseFloat(l.paddingBottom),r=parseFloat(l.marginTop),m=parseFloat(l.marginBottom),d=parseFloat(l.borderTopWidth),p=parseFloat(l.borderBottomWidth);return{delay:e,duration:t,easing:n,css:c=>`overflow: hidden;opacity: ${Math.min(c*20,1)*o};height: ${c*i}px;padding-top: ${c*a}px;padding-bottom: ${c*u}px;margin-top: ${c*r}px;margin-bottom: ${c*m}px;border-top-width: ${c*d}px;border-bottom-width: ${c*p}px;`}}function Ce(s){let e,t,n,l,o,i,a;return{c(){e=h("label"),t=h("input"),n=q(),l=h("button"),o=Z(s[0]),f(t,"type","file"),f(t,"id",s[1]),f(t,"class","svelte-a846bd"),f(l,"type","button")},m(u,r){C(u,e,r),b(e,t),b(e,n),b(e,l),b(l,o),i||(a=[E(t,"change",function(){ne(s[2])&&s[2].apply(this,arguments)}),E(l,"click",s[3])],i=!0)},p(u,[r]){s=u,r&2&&f(t,"id",s[1]),r&1&&K(o,s[0])},i:M,o:M,d(u){u&&S(e),i=!1,le(a)}}}function Se(s,e,t){let{label:n}=e,{uniqueId:l}=e,{loadFile:o}=e;function i(){document.getElementById(l).click()}return s.$$set=a=>{"label"in a&&t(0,n=a.label),"uniqueId"in a&&t(1,l=a.uniqueId),"loadFile"in a&&t(2,o=a.loadFile)},[n,l,o,i]}class Ne extends B{constructor(e){super(),O(this,e,Se,Ce,I,{label:0,uniqueId:1,loadFile:2})}}function U(s){let e,t,n;const l=s[3].default,o=D(l,s,s[2],null);return{c(){e=h("div"),o&&o.c()},m(i,a){C(i,e,a),o&&o.m(e,null),n=!0},p(i,a){o&&o.p&&(!n||a&4)&&L(o,l,i,i[2],n?V(l,i[2],a,null):T(i[2]),null)},i(i){n||(v(o,i),ie(()=>{t||(t=P(e,G,{duration:100},!0)),t.run(1)}),n=!0)},o(i){y(o,i),t||(t=P(e,G,{duration:100},!1)),t.run(0),n=!1},d(i){i&&S(e),o&&o.d(i),i&&t&&t.end()}}}function Fe(s){let e,t,n,l,o,i,a,u,r,m,d=s[0]&&U(s);return{c(){e=h("button"),t=H("svg"),n=H("path"),l=q(),o=Z(s[1]),i=q(),d&&d.c(),a=oe(),f(n,"d","M9 5l7 7-7 7"),f(t,"style","tran"),f(t,"width","20"),f(t,"height","20"),f(t,"fill","none"),f(t,"stroke-linecap","round"),f(t,"stroke-linejoin","round"),f(t,"stroke-width","2"),f(t,"viewBox","0 0 24 24"),f(t,"stroke","currentColor"),f(t,"class","svelte-una9lq"),f(e,"aria-expanded",s[0]),f(e,"class","svelte-una9lq")},m(p,c){C(p,e,c),b(e,t),b(t,n),b(e,l),b(e,o),C(p,i,c),d&&d.m(p,c),C(p,a,c),u=!0,r||(m=E(e,"click",s[4]),r=!0)},p(p,[c]){(!u||c&2)&&K(o,p[1]),(!u||c&1)&&f(e,"aria-expanded",p[0]),p[0]?d?(d.p(p,c),c&1&&v(d,1)):(d=U(p),d.c(),v(d,1),d.m(a.parentNode,a)):d&&(A(),y(d,1,1,()=>{d=null}),Q())},i(p){u||(v(d),u=!0)},o(p){y(d),u=!1},d(p){p&&S(e),p&&S(i),d&&d.d(p),p&&S(a),r=!1,m()}}}function Ie(s,e,t){let{$$slots:n={},$$scope:l}=e,{label:o}=e,{open:i=!1}=e;const a=()=>t(0,i=!i);return s.$$set=u=>{"label"in u&&t(1,o=u.label),"open"in u&&t(0,i=u.open),"$$scope"in u&&t(2,l=u.$$scope)},[i,o,l,n,a]}class We extends B{constructor(e){super(),O(this,e,Ie,Fe,I,{label:1,open:0})}}export{We as C,Ne as F,De as L,Ee as M,ce as a,fe as b,Le as c,Oe as d,Te as e,ue as f,re as g,ze as h,Ve as l,X as m,Be as n,de as o,qe as r,G as s,pe as u};
