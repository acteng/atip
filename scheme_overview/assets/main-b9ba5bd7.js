import{S as N,i as P,s as R,b as O,a as U,e as d,c as A,t as V,d as Z,f as c,g as E,h as o,j as M,m as z,l as B,k as G,n as H,o as K,p as I,q as Q,r as X,u as Y,v as x}from"./maplibre_helpers-a0686a8c.js";import{A as tt,a as et}from"./authorities-45e3029c.js";function at(a){let e,m,k,l,g,w,C,h,u,T,S,j,p,i,b,L,q,_,n,y,r,s,f,$,D;function W(t){a[8](t)}let F={};return a[1]!==void 0&&(F.open=a[1]),r=new tt({props:F}),O.push(()=>U(r,"open",W,a[1])),{c(){e=d("div"),m=d("h1"),m.textContent="Welcome to ATIP v2",k=A(),l=d("button"),l.textContent="About",g=A(),w=d("p"),w.textContent="Select Transport Authority or Local Authority District:",C=A(),h=d("div"),u=d("input"),T=A(),S=d("datalist"),j=A(),p=d("button"),i=V("Start"),L=A(),q=d("p"),q.textContent="Or pick a Transport Authority on the map",_=A(),n=d("div"),y=A(),Z(r.$$.fragment),c(l,"type","button"),c(l,"class","svelte-ynp6gq"),c(u,"data-testid","transport-authority"),c(u,"list","authorities-list"),c(S,"id","authorities-list"),c(p,"type","button"),p.disabled=b=!a[3],c(p,"class","svelte-ynp6gq"),c(e,"class","left svelte-ynp6gq"),c(n,"id","map"),c(n,"class","svelte-ynp6gq")},m(t,v){E(t,e,v),o(e,m),o(e,k),o(e,l),o(e,g),o(e,w),o(e,C),o(e,h),o(h,u),M(u,a[0]),o(h,T),o(h,S),a[7](S),o(h,j),o(h,p),o(p,i),o(e,L),o(e,q),E(t,_,v),E(t,n,v),E(t,y,v),z(r,t,v),f=!0,$||(D=[B(l,"click",a[5]),B(u,"input",a[6]),B(p,"click",a[4])],$=!0)},p(t,[v]){v&1&&u.value!==t[0]&&M(u,t[0]),(!f||v&8&&b!==(b=!t[3]))&&(p.disabled=b);const J={};!s&&v&2&&(s=!0,J.open=t[1],G(()=>s=!1)),r.$set(J)},i(t){f||(H(r.$$.fragment,t),f=!0)},o(t){K(r.$$.fragment,t),f=!1},d(t){t&&I(e),a[7](null),t&&I(_),t&&I(n),t&&I(y),Q(r,t),$=!1,X(D)}}}function nt(a,e,m){let k,l=!1,g,w,C=new Set;async function h(){let i="boundary",b="boundary-layer";const q=await(await fetch(et)).text(),_=JSON.parse(q);for(let s of _.features){let f=document.createElement("option");f.value=s.properties.name,w.appendChild(f),C.add(s.properties.name)}_.features=_.features.filter(s=>s.properties.level=="TA");let n=new Y.Map({container:"map",style:"https://api.maptiler.com/maps/streets/style.json?key=MZEJTanw3WpxRvt7qDfo"}),y=null;function r(){y!==null&&n.setFeatureState({source:i,id:y},{hover:!1})}n.on("load",function(){n.fitBounds(x(_),{padding:20,animate:!1}),n.addSource(i,{type:"geojson",data:_,generateId:!0}),n.addLayer({id:b,source:i,type:"fill",paint:{"fill-color":"rgb(200, 100, 240)","fill-outline-color":"rgb(200, 100, 240)","fill-opacity":["case",["boolean",["feature-state","hover"],!1],.8,.4]}}),n.on("mousemove",b,s=>{s.features.length>0&&(r(),y=s.features[0].id,n.setFeatureState({source:i,id:y},{hover:!0}))}),n.on("mouseleave",b,()=>{r(),y=null}),n.on("click",b,function(s){let f=s.features[0].properties.name;window.location.href=`scheme.html?authority=${f}`})})}h();function u(){window.location.href=`scheme.html?authority=${g}`}const T=()=>m(1,l=!l);function S(){g=this.value,m(0,g)}function j(i){O[i?"unshift":"push"](()=>{w=i,m(2,w)})}function p(i){l=i,m(1,l)}return a.$$.update=()=>{a.$$.dirty&1&&m(3,k=C.has(g))},[g,l,w,k,u,T,S,j,p]}class ot extends N{constructor(e){super(),P(this,e,nt,at,R,{})}}new ot({target:document.getElementById("app")});
