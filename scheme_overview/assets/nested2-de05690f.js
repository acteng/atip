import{S as M,i as G,s as P,d as S,m as B,n as h,o as g,q as C,F as T,e as w,c as b,f as N,g as k,h as c,l as A,V as E,W as H,p as L,N as R,G as U,t as j,B as F}from"./FileInput-ddab9480.js";import{L as V,h as W,g as z,C as D,I as K,B as Q,i as X,M as Y}from"./InterventionLayer-bae67c04.js";function O(u,e,l){const t=u.slice();return t[6]=e[l],t}function Z(u){let e,l,t,s=u[6].file_name+"",o,m,$,d,n=u[6].scheme_priority+"",f,v,_,r,I=u[6].authority_code+"",i,p;return{c(){e=w("ul"),l=w("li"),t=j("Filename: "),o=j(s),m=b(),$=w("li"),d=j("Priority: "),f=j(n),v=b(),_=w("li"),r=j("Authority code: "),i=j(I),p=b()},m(a,y){k(a,e,y),c(e,l),c(l,t),c(l,o),c(e,m),c(e,$),c($,d),c($,f),c(e,v),c(e,_),c(_,r),c(_,i),k(a,p,y)},p(a,y){y&1&&s!==(s=a[6].file_name+"")&&F(o,s),y&1&&n!==(n=a[6].scheme_priority+"")&&F(f,n),y&1&&I!==(I=a[6].authority_code+"")&&F(i,I)},d(a){a&&L(e),a&&L(p)}}}function q(u){let e,l;return e=new D({props:{label:`${u[6].internal_scheme_id}: ${u[6].num_features} features`,$$slots:{default:[Z]},$$scope:{ctx:u}}}),{c(){S(e.$$.fragment)},m(t,s){B(e,t,s),l=!0},p(t,s){const o={};s&1&&(o.label=`${t[6].internal_scheme_id}: ${t[6].num_features} features`),s&513&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}function x(u){let e,l,t,s,o,m,$,d,n,f,v;m=new T({props:{label:"Load from GeoJSON",uniqueId:"load_geojson",loadFile:u[2]}});let _=u[0],r=[];for(let i=0;i<_.length;i+=1)r[i]=q(O(u,_,i));const I=i=>g(r[i],1,1,()=>{r[i]=null});return{c(){e=w("div"),l=w("button"),l.textContent="Home",t=b(),s=w("h1"),s.textContent="Browse schemes",o=b(),S(m.$$.fragment),$=b(),d=w("ul");for(let i=0;i<r.length;i+=1)r[i].c();N(l,"type","button"),N(e,"slot","sidebar")},m(i,p){k(i,e,p),c(e,l),c(e,t),c(e,s),c(e,o),B(m,e,null),c(e,$),c(e,d);for(let a=0;a<r.length;a+=1)r[a].m(d,null);n=!0,f||(v=A(l,"click",u[3]),f=!0)},p(i,p){if(p&1){_=i[0];let a;for(a=0;a<_.length;a+=1){const y=O(i,_,a);r[a]?(r[a].p(y,p),h(r[a],1)):(r[a]=q(y),r[a].c(),h(r[a],1),r[a].m(d,null))}for(E(),a=_.length;a<r.length;a+=1)I(a);H()}},i(i){if(!n){h(m.$$.fragment,i);for(let p=0;p<_.length;p+=1)h(r[p]);n=!0}},o(i){g(m.$$.fragment,i),r=r.filter(Boolean);for(let p=0;p<r.length;p+=1)g(r[p]);n=!1},d(i){i&&L(e),C(m),R(r,i),f=!1,v()}}}function ee(u){let e,l,t,s,o,m,$,d;return e=new K({props:{schema:J}}),t=new Q({props:{style:u[1]}}),o=new X({props:{schema:J}}),$=new Y({props:{layers:["interventions-points","interventions-lines","interventions-polygons"],contents:le}}),{c(){S(e.$$.fragment),l=b(),S(t.$$.fragment),s=b(),S(o.$$.fragment),m=b(),S($.$$.fragment)},m(n,f){B(e,n,f),k(n,l,f),B(t,n,f),k(n,s,f),B(o,n,f),k(n,m,f),B($,n,f),d=!0},p:U,i(n){d||(h(e.$$.fragment,n),h(t.$$.fragment,n),h(o.$$.fragment,n),h($.$$.fragment,n),d=!0)},o(n){g(e.$$.fragment,n),g(t.$$.fragment,n),g(o.$$.fragment,n),g($.$$.fragment,n),d=!1},d(n){C(e,n),n&&L(l),C(t,n),n&&L(s),C(o,n),n&&L(m),C($,n)}}}function te(u){let e,l,t;return l=new W({props:{style:u[1],$$slots:{default:[ee]},$$scope:{ctx:u}}}),{c(){e=w("div"),S(l.$$.fragment),N(e,"slot","main")},m(s,o){k(s,e,o),B(l,e,null),t=!0},p(s,o){const m={};o&512&&(m.$$scope={dirty:o,ctx:s}),l.$set(m)},i(s){t||(h(l.$$.fragment,s),t=!0)},o(s){g(l.$$.fragment,s),t=!1},d(s){s&&L(e),C(l)}}}function ne(u){let e,l;return e=new V({props:{$$slots:{main:[te],sidebar:[x]},$$scope:{ctx:u}}}),{c(){S(e.$$.fragment)},m(t,s){B(e,t,s),l=!0},p(t,[s]){const o={};s&513&&(o.$$scope={dirty:s,ctx:t}),e.$set(o)},i(t){l||(h(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){C(e,t)}}}const J="v1";function le(u){return JSON.stringify(u)}function se(u,e,l){let s=new URLSearchParams(window.location.search).get("style")||"streets",o=[];function m(n){try{let f=JSON.parse(n);z.set(f),$(f)}catch(f){window.alert(`Couldn't load schemes from a file: ${f}`)}}function $(n){var v;let f={};for(let _ of n.features){let r=_.properties;f[v=r.atip_file_name]||(f[v]={file_name:r.atip_file_name,authority_code:r.authority_code,internal_scheme_id:r.internal_scheme_id,scheme_priority:r.scheme_priority,num_features:0}),f[r.atip_file_name].num_features++}l(0,o=Object.values(f))}return[o,s,m,()=>window.open("index.html")]}class re extends M{constructor(e){super(),G(this,e,se,ne,P,{})}}new re({target:document.getElementById("app")});
