import{S as Z,i as X,s as V,e as y,d as G,b as re,f as h,q as Q,k as d,J as Wt,a as L,aB as Kn,g as p,aa as Xt,K as Yt,L as Jt,M as Qt,h as m,j as _,C as we,v as be,y as Ae,c as w,t as S,m as b,A,l as v,r as z,u as U,w as E,N as Kt,G as ve,aC as Zn,x as Y,H as Qr,I as vt,aD as co,at as Nn,Y as x,az as Sn,av as qn,Z as Ie,aE as _e,aF as en,aG as Et,ak as bn,a9 as ct,ab as $o,aH as po,o as Vr,aI as mo,aJ as Kr,aA as _o,ay as Fn,B as go,n as ho}from"./index-46d90933.js";import{g as te,a as ie}from"./spread-8a54911c.js";import{c as q,d as rt,t as wo,a as We,C as Be,e as ke,S as $t,M as bo,p as Xn,f as xn,h as tn,g as vo,m as el}from"./Modal-797bcf8d.js";import{e as tl,h as st,M as ko,b as Zr,H as yo,f as je,C as pt,a as Rn,c as Pn,d as So,i as _n,W as sn,B as To,S as Co,G as Lo}from"./WarningIcon-1321ee68.js";import{d as Io,g as Xr,u as Oo,r as jo,b as Mo,c as No,G as _t,a as ge,e as Fo,h as ee,F as qe,i as Ro,j as Po,k as Go,L as Do,M as Ao}from"./MapLibreMap-77c3124b.js";import{R as Hn,F as xr,a as dn,E as qo}from"./Radio-f3408d53.js";import{S as Ye,B as Ho}from"./SecondaryButton-1a5f9970.js";import{E as oe,H as zo}from"./Header-01bebf13.js";import{e as $e,f as nl,b as Bo,s as Uo,g as Eo,d as Wo}from"./files-d6df10c0.js";import{P as ae,A as eo}from"./Popup-6d6ce6b2.js";import{D as Yo}from"./DefaultButton-59603d29.js";function Jo(o){let e;return{c(){e=y("span"),G(e,"class","svelte-kzgqtg"),re(e,"background",o[0])},m(l,t){h(l,e,t)},p(l,[t]){t&1&&re(e,"background",l[0])},i:Q,o:Q,d(l){l&&d(e)}}}function Qo(o,e,l){let{color:t}=e;return o.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Le extends Z{constructor(e){super(),X(this,e,Qo,Jo,V,{color:0})}}const Vo=o=>({}),ll=o=>({}),Ko=o=>({}),rl=o=>({});function Zo(o){let e,l,t,n,r,s,f,i,a,u,c;const $=o[4].sidebar,g=Wt($,o,o[3],rl),k=o[4].main,C=Wt(k,o,o[3],ll);return{c(){e=y("div"),l=y("aside"),t=y("div"),g&&g.c(),n=L(),r=y("button"),r.textContent="→",f=L(),i=y("main"),C&&C.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(r,"type","button"),G(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(l,"class",s=Kn(o[1]?"":"collapsed")+" svelte-1n0etgd"),re(l,"--sidebarWidth",o[0]),G(i,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(T,I){h(T,e,I),p(e,l),p(l,t),g&&g.m(t,null),p(l,n),p(l,r),p(e,f),p(e,i),C&&C.m(i,null),a=!0,u||(c=Xt(r,"click",o[2]),u=!0)},p(T,[I]){g&&g.p&&(!a||I&8)&&Yt(g,$,T,T[3],a?Qt($,T[3],I,Ko):Jt(T[3]),rl),(!a||I&2&&s!==(s=Kn(T[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(l,"class",s),(!a||I&1)&&re(l,"--sidebarWidth",T[0]),C&&C.p&&(!a||I&8)&&Yt(C,k,T,T[3],a?Qt(k,T[3],I,Vo):Jt(T[3]),ll)},i(T){a||(m(g,T),m(C,T),a=!0)},o(T){_(g,T),_(C,T),a=!1},d(T){T&&d(e),g&&g.d(T),C&&C.d(T),u=!1,c()}}}function Xo(o,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,s=!0;function f(){l(1,s=!s)}return o.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,s,f,n,t]}class xo extends Z{constructor(e){super(),X(this,e,Xo,Zo,V,{sidebarWidth:0})}}function ol(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function sl(o){let e,l,t,n=o[1]+"",r,s,f;return l=new Le({props:{color:o[2]}}),{c(){e=y("li"),w(l.$$.fragment),t=L(),r=S(n),s=L()},m(i,a){h(i,e,a),b(l,e,null),p(e,t),p(e,r),p(e,s),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&A(r,n)},i(i){f||(m(l.$$.fragment,i),f=!0)},o(i){_(l.$$.fragment,i),f=!1},d(i){i&&d(e),v(l)}}}function es(o){let e,l,t=$e(o[0]),n=[];for(let s=0;s<t.length;s+=1)n[s]=sl(ol(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){e=y("ul");for(let s=0;s<n.length;s+=1)n[s].c()},m(s,f){h(s,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(s,[f]){if(f&1){t=$e(s[0]);let i;for(i=0;i<t.length;i+=1){const a=ol(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=sl(a),n[i].c(),m(n[i],1),n[i].m(e,null))}for(we(),i=t.length;i<n.length;i+=1)r(i);be()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),Ae(n,s)}}}function ts(o,e,l){let{rows:t}=e;return o.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class ot extends Z{constructor(e){super(),X(this,e,ts,es,V,{rows:0})}}function ns(o){let e;const l=o[16].default,t=Wt(l,o,o[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&Yt(t,l,n,n[24],e?Qt(l,n[24],r,null):Jt(n[24]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function ls(o){let e,l,t;function n(s){o[17](s)}let r={id:o[1],type:"symbol",source:o[2],sourceLayer:o[3],beforeId:o[4],beforeLayerType:o[5],paint:o[6],layout:o[7],filter:o[8],applyToClusters:o[9],minzoom:o[10],maxzoom:o[11],hoverCursor:o[12],manageHoverState:o[13],eventsIfTopMost:o[14],interactive:o[15],$$slots:{default:[ns]},$$scope:{ctx:o}};return o[0]!==void 0&&(r.hovered=o[0]),e=new Io({props:r}),z.push(()=>U(e,"hovered",n)),e.$on("click",o[18]),e.$on("dblclick",o[19]),e.$on("contextmenu",o[20]),e.$on("mouseenter",o[21]),e.$on("mousemove",o[22]),e.$on("mouseleave",o[23]),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,[f]){const i={};f&2&&(i.id=s[1]),f&4&&(i.source=s[2]),f&8&&(i.sourceLayer=s[3]),f&16&&(i.beforeId=s[4]),f&32&&(i.beforeLayerType=s[5]),f&64&&(i.paint=s[6]),f&128&&(i.layout=s[7]),f&256&&(i.filter=s[8]),f&512&&(i.applyToClusters=s[9]),f&1024&&(i.minzoom=s[10]),f&2048&&(i.maxzoom=s[11]),f&4096&&(i.hoverCursor=s[12]),f&8192&&(i.manageHoverState=s[13]),f&16384&&(i.eventsIfTopMost=s[14]),f&32768&&(i.interactive=s[15]),f&16777216&&(i.$$scope={dirty:f,ctx:s}),!l&&f&1&&(l=!0,i.hovered=s[0],E(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function rs(o,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=Xr("symbol")}=e,{source:s=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:$=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:C=void 0}=e,{hoverCursor:T=void 0}=e,{manageHoverState:I=!1}=e,{hovered:O=null}=e,{eventsIfTopMost:N=!1}=e,{interactive:F=!0}=e;function M(D){O=D,l(0,O)}function j(D){Kt.call(this,o,D)}function H(D){Kt.call(this,o,D)}function P(D){Kt.call(this,o,D)}function R(D){Kt.call(this,o,D)}function W(D){Kt.call(this,o,D)}function ce(D){Kt.call(this,o,D)}return o.$$set=D=>{"id"in D&&l(1,r=D.id),"source"in D&&l(2,s=D.source),"sourceLayer"in D&&l(3,f=D.sourceLayer),"beforeId"in D&&l(4,i=D.beforeId),"beforeLayerType"in D&&l(5,a=D.beforeLayerType),"paint"in D&&l(6,u=D.paint),"layout"in D&&l(7,c=D.layout),"filter"in D&&l(8,$=D.filter),"applyToClusters"in D&&l(9,g=D.applyToClusters),"minzoom"in D&&l(10,k=D.minzoom),"maxzoom"in D&&l(11,C=D.maxzoom),"hoverCursor"in D&&l(12,T=D.hoverCursor),"manageHoverState"in D&&l(13,I=D.manageHoverState),"hovered"in D&&l(0,O=D.hovered),"eventsIfTopMost"in D&&l(14,N=D.eventsIfTopMost),"interactive"in D&&l(15,F=D.interactive),"$$scope"in D&&l(24,n=D.$$scope)},[O,r,s,f,i,a,u,c,$,g,k,C,T,I,N,F,t,M,j,H,P,R,W,ce,n]}class zn extends Z{constructor(e){super(),X(this,e,rs,ls,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function il(o){let e=o[0],l,t,n=al(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),h(r,l,s),t=!0},p(r,s){s&1&&V(e,e=r[0])?(we(),_(n,1,1,Q),be(),n=al(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n.d(r)}}}function al(o){let e;const l=o[15].default,t=Wt(l,o,o[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&Yt(t,l,n,n[14],e?Qt(l,n[14],r,null):Jt(n[14]),null)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function os(o){let e,l,t=o[0]&&il(o);return{c(){t&&t.c(),e=ve()},m(n,r){t&&t.m(n,r),h(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&m(t,1)):(t=il(n),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(we(),_(t,1,1,()=>{t=null}),be())},i(n){l||(m(t),l=!0)},o(n){_(t),l=!1},d(n){n&&d(e),t&&t.d(n)}}}function ss(o,e,l){let t,n,{$$slots:r={},$$scope:s}=e,{id:f=Xr("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:$=null}=e,{attribution:g=null}=e,{minzoom:k=null}=e,{maxzoom:C=null}=e,{volatile:T=null}=e;if(i&&i.includes("pmtiles://")&&!Zn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let F=new co;Zn.addProtocol("pmtiles",F.tile)}const{map:I,self:O}=Oo();Y(o,I,F=>l(13,n=F)),Y(o,O,F=>l(0,t=F));let N;return Qr(()=>{t&&n&&(jo(I,t,N),vt(O,t=null,t),N=void 0)}),o.$$set=F=>{"id"in F&&l(3,f=F.id),"url"in F&&l(4,i=F.url),"tiles"in F&&l(5,a=F.tiles),"promoteId"in F&&l(6,u=F.promoteId),"bounds"in F&&l(7,c=F.bounds),"scheme"in F&&l(8,$=F.scheme),"attribution"in F&&l(9,g=F.attribution),"minzoom"in F&&l(10,k=F.minzoom),"maxzoom"in F&&l(11,C=F.maxzoom),"volatile"in F&&l(12,T=F.volatile),"$$scope"in F&&l(14,s=F.$$scope)},o.$$.update=()=>{o.$$.dirty&16377&&n&&t!==f&&(vt(O,t=f,t),Mo(n,t,No({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:$,attribution:g,minzoom:k,maxzoom:C,volatile:T}),F=>n&&F===t,()=>{t&&(N=n==null?void 0:n.getSource(t))})),o.$$.dirty&8200&&(n==null||n.on("style.load",()=>{N=n==null?void 0:n.getSource(f)}))},[t,I,O,f,i,a,u,c,$,g,k,C,T,n,s,r]}class me extends Z{constructor(e){super(),X(this,e,ss,os,V,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function fl(o,e,l){const t=o.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function is(o){let e,l,t;return l=new Ye({props:{$$slots:{default:[fs]},$$scope:{ctx:o}}}),l.$on("click",o[9]),{c(){e=y("div"),w(l.$$.fragment)},m(n,r){h(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&16384&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function as(o){let e,l,t,n,r,s,f,i,a,u;l=new Ye({props:{$$slots:{default:[us]},$$scope:{ctx:o}}}),l.$on("click",o[4]);let c=o[2]&&ul(o);r=new st({props:{label:"Help",$$slots:{default:[cs]},$$scope:{ctx:o}}}),f=new Fo({}),f.$on("click",o[3]);let $=$e(o[0]),g=[];for(let C=0;C<$.length;C+=1)g[C]=cl(fl(o,$,C));const k=C=>_(g[C],1,1,()=>{g[C]=null});return{c(){e=y("div"),w(l.$$.fragment),t=L(),c&&c.c(),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L();for(let C=0;C<g.length;C+=1)g[C].c();a=ve()},m(C,T){h(C,e,T),b(l,e,null),h(C,t,T),c&&c.m(C,T),h(C,n,T),b(r,C,T),h(C,s,T),b(f,C,T),h(C,i,T);for(let I=0;I<g.length;I+=1)g[I]&&g[I].m(C,T);h(C,a,T),u=!0},p(C,T){const I={};T&16384&&(I.$$scope={dirty:T,ctx:C}),l.$set(I),C[2]?c?c.p(C,T):(c=ul(C),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const O={};if(T&16384&&(O.$$scope={dirty:T,ctx:C}),r.$set(O),T&65){$=$e(C[0]);let N;for(N=0;N<$.length;N+=1){const F=fl(C,$,N);g[N]?(g[N].p(F,T),m(g[N],1)):(g[N]=cl(F),g[N].c(),m(g[N],1),g[N].m(a.parentNode,a))}for(we(),N=$.length;N<g.length;N+=1)k(N);be()}},i(C){if(!u){m(l.$$.fragment,C),m(r.$$.fragment,C),m(f.$$.fragment,C);for(let T=0;T<$.length;T+=1)m(g[T]);u=!0}},o(C){_(l.$$.fragment,C),_(r.$$.fragment,C),_(f.$$.fragment,C),g=g.filter(Boolean);for(let T=0;T<g.length;T+=1)_(g[T]);u=!1},d(C){C&&(d(e),d(t),d(n),d(s),d(i),d(a)),v(l),c&&c.d(C),v(r,C),v(f,C),Ae(g,C)}}}function fs(o){let e;return{c(){e=S("Measure lines")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function us(o){let e;return{c(){e=S("Stop measuring")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function ul(o){let e,l,t=o[2].toFixed(2)+"",n,r;return{c(){e=y("p"),l=S("Length: "),n=S(t),r=S(" meters")},m(s,f){h(s,e,f),p(e,l),p(e,n),p(e,r)},p(s,f){f&4&&t!==(t=s[2].toFixed(2)+"")&&A(n,t)},d(s){s&&d(e)}}}function cs(o){let e;return{c(){e=y("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){h(l,e,t)},p:Q,d(l){l&&d(e)}}}function $s(o){let e,l;return{c(){e=y("span"),l=L(),G(e,"class","dot svelte-1tzt432")},m(t,n){h(t,e,n),h(t,l,n)},p:Q,d(t){t&&(d(e),d(l))}}}function cl(o){let e,l,t;function n(f){o[7](f,o[11],o[12],o[13])}function r(){return o[8](o[13])}let s={draggable:!0,$$slots:{default:[$s]},$$scope:{ctx:o}};return o[11]!==void 0&&(s.lngLat=o[11]),e=new ko({props:s}),z.push(()=>U(e,"lngLat",n)),e.$on("click",r),{c(){w(e.$$.fragment)},m(f,i){b(e,f,i),t=!0},p(f,i){o=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:o}),!l&&i&1&&(l=!0,a.lngLat=o[11],E(()=>l=!1)),e.$set(a)},i(f){t||(m(e.$$.fragment,f),t=!0)},o(f){_(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function ps(o){let e,l;const t=[q("measurement-line"),{paint:{"line-color":rt.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f={};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ms(o){let e,l,t,n,r,s,f;const i=[as,is],a=[];function u(c,$){return c[1]?0:1}return e=u(o),l=a[e]=i[e](o),n=new _t({props:{data:o[0].length<2?tl():Nn(o[0]),$$slots:{default:[ps]},$$scope:{ctx:o}}}),{c(){l.c(),t=L(),w(n.$$.fragment)},m(c,$){a[e].m(c,$),h(c,t,$),b(n,c,$),r=!0,s||(f=Xt(window,"keydown",o[5]),s=!0)},p(c,[$]){let g=e;e=u(c),e===g?a[e].p(c,$):(we(),_(a[g],1,1,()=>{a[g]=null}),be(),l=a[e],l?l.p(c,$):(l=a[e]=i[e](c),l.c()),m(l,1),l.m(t.parentNode,t));const k={};$&1&&(k.data=c[0].length<2?tl():Nn(c[0])),$&16384&&(k.$$scope={dirty:$,ctx:c}),n.$set(k)},i(c){r||(m(l),m(n.$$.fragment,c),r=!0)},o(c){_(l),_(n.$$.fragment,c),r=!1},d(c){c&&d(t),a[e].d(c),v(n,c),s=!1,f()}}}function _s(o,e,l){let t,n=!1,r=[];function s(k){return k.length<2?null:1e3*wo(Nn(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),l(0,r)}function c(k,C,T,I){T[I]=k,l(0,r)}const $=k=>u(k),g=()=>l(1,n=!0);return o.$$.update=()=>{o.$$.dirty&1&&l(2,t=s(r))},[r,n,t,f,i,a,u,c,$,g]}class gs extends Z{constructor(e){super(),X(this,e,_s,ms,V,{})}}const hs="/atip/show-final-inspections-sketches/assets/zoom_out_map-b2e1091a.svg";function ds(o){let e,l;return{c(){e=y("img"),qn(e.src,l=hs)||G(e,"src",l),G(e,"alt","Zoom to show entire boundary")},m(t,n){h(t,e,n)},p:Q,d(t){t&&d(e)}}}function ws(o){let e,l;return e=new Ye({props:{title:"Zoom to show entire boundary",$$slots:{default:[ds]},$$scope:{ctx:o}}}),e.$on("click",o[0]),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&8&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function bs(o,e,l){let t;Y(o,Sn,s=>l(2,t=s));let{boundaryGeojson:n}=e;function r(){let s=Zr(n);Number.isFinite(s[0])&&t.fitBounds(s,{padding:20,animate:!0,duration:500})}return o.$$set=s=>{"boundaryGeojson"in s&&l(1,n=s.boundaryGeojson)},[r,n]}class vs extends Z{constructor(e){super(),X(this,e,bs,ws,V,{boundaryGeojson:1})}}const ne={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",cycle_route:"green",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},rights_of_way:{footpath:"red",bridleway:"green",restricted_byway:"blue",boat:"orange"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},Ue=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];let Gn=Ie(new Map),nn=Ie(new Set);const ks=o=>({}),$l=o=>({}),ys=o=>({}),pl=o=>({}),Ss=o=>({}),ml=o=>({});function Ts(o){let e;return{c(){e=S(o[2])},m(l,t){h(l,e,t)},p(l,t){t&4&&A(e,l[2])},d(l){l&&d(e)}}}function Cs(o){let e,l,t;const n=o[7].icon,r=Wt(n,o,o[10],ml);return{c(){r&&r.c(),e=L(),l=S(o[2])},m(s,f){r&&r.m(s,f),h(s,e,f),h(s,l,f),t=!0},p(s,f){r&&r.p&&(!t||f&1024)&&Yt(r,n,s,s[10],t?Qt(n,s[10],f,Ss):Jt(s[10]),ml),(!t||f&4)&&A(l,s[2])},i(s){t||(m(r,s),t=!0)},o(s){_(r,s),t=!1},d(s){s&&(d(e),d(l)),r&&r.d(s)}}}function Ls(o){let e;const l=o[7].help,t=Wt(l,o,o[10],pl);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&Yt(t,l,n,n[10],e?Qt(l,n[10],r,ys):Jt(n[10]),pl)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function Is(o){let e;return{c(){e=S("X")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Os(o){let e,l,t,n,r,s,f,i,a;function u($){o[8]($)}let c={$$slots:{default:[Cs]},$$scope:{ctx:o}};return o[0]!==void 0&&(c.checked=o[0]),l=new We({props:c}),z.push(()=>U(l,"checked",u)),s=new yo({props:{$$slots:{default:[Ls]},$$scope:{ctx:o}}}),i=new Ye({props:{$$slots:{default:[Is]},$$scope:{ctx:o}}}),i.$on("click",o[6]),{c(){e=y("div"),w(l.$$.fragment),n=L(),r=y("span"),w(s.$$.fragment),f=L(),w(i.$$.fragment),re(e,"display","flex"),re(e,"justify-content","space-between")},m($,g){h($,e,g),b(l,e,null),p(e,n),p(e,r),b(s,r,null),p(r,f),b(i,r,null),a=!0},p($,g){const k={};g&1028&&(k.$$scope={dirty:g,ctx:$}),!t&&g&1&&(t=!0,k.checked=$[0],E(()=>t=!1)),l.$set(k);const C={};g&1024&&(C.$$scope={dirty:g,ctx:$}),s.$set(C);const T={};g&1024&&(T.$$scope={dirty:g,ctx:$}),i.$set(T)},i($){a||(m(l.$$.fragment,$),m(s.$$.fragment,$),m(i.$$.fragment,$),a=!0)},o($){_(l.$$.fragment,$),_(s.$$.fragment,$),_(i.$$.fragment,$),a=!1},d($){$&&d(e),v(l),v(s),v(i)}}}function _l(o){let e;const l=o[7].controls,t=Wt(l,o,o[10],$l);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&Yt(t,l,n,n[10],e?Qt(l,n[10],r,ks):Jt(n[10]),$l)},i(n){e||(m(t,n),e=!0)},o(n){_(t,n),e=!1},d(n){t&&t.d(n)}}}function js(o){let e,l,t,n,r,s;e=new We({props:{checked:o[4].has(o[1]),$$slots:{default:[Ts]},$$scope:{ctx:o}}}),e.$on("change",o[5]),n=new Be({props:{small:!0,$$slots:{default:[Os]},$$scope:{ctx:o}}});let f=o[0]&&_l(o);return{c(){w(e.$$.fragment),l=L(),t=y("div"),w(n.$$.fragment),r=L(),f&&f.c()},m(i,a){b(e,i,a),h(i,l,a),h(i,t,a),b(n,t,null),p(t,r),f&&f.m(t,null),o[9](t),s=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&m(f,1)):(f=_l(i),f.c(),m(f,1),f.m(t,null)):f&&(we(),_(f,1,1,()=>{f=null}),be())},i(i){s||(m(e.$$.fragment,i),m(n.$$.fragment,i),m(f),s=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),_(f),s=!1},d(i){i&&(d(l),d(t)),v(e,i),v(n),f&&f.d(),o[9](null)}}}function Ms(o,e,l){let t;Y(o,nn,k=>l(4,t=k));let{$$slots:n={},$$scope:r}=e,{name:s}=e,{title:f}=e,{show:i}=e;i&&(t.add(s),nn.set(t));let a=null;Qr(()=>{Gn.update(k=>(k.delete(s),k))});function u(){nn.update(k=>(k.has(s)?(k.delete(s),l(0,i=!1)):(k.add(s),l(0,i=!0)),k))}function c(){t.delete(s),nn.set(t),l(0,i=!1)}function $(k){i=k,l(0,i)}function g(k){z[k?"unshift":"push"](()=>{a=k,l(3,a),l(1,s)})}return o.$$set=k=>{"name"in k&&l(1,s=k.name),"title"in k&&l(2,f=k.title),"show"in k&&l(0,i=k.show),"$$scope"in k&&l(10,r=k.$$scope)},o.$$.update=()=>{o.$$.dirty&10&&a&&Gn.update(k=>(l(3,a.style.display="none",a),k.set(s,a),k))},[i,s,f,a,t,u,c,n,$,g,r]}class ue extends Z{constructor(e){super(),X(this,e,Ms,js,V,{name:1,title:2,show:0})}}function Ns(o){let e;return{c(){e=S(`Open Government License
  `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Fs(o){let e,l,t,n,r;return t=new oe({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ns]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("License: "),w(t.$$.fragment),n=S(`. Contains OS data © Crown copyright and database right
  2023.`)},m(s,f){h(s,e,f),p(e,l),b(t,e,null),p(e,n),r=!0},p(s,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:s}),t.$set(i)},i(s){r||(m(t.$$.fragment,s),r=!0)},o(s){_(t.$$.fragment,s),r=!1},d(s){s&&d(e),v(t)}}}class Oe extends Z{constructor(e){super(),X(this,e,null,Fs,V,{})}}function gl(o,e,l){const t=o.slice();return t[2]=e[l],t}function hl(o,e,l){const t=o.slice();return t[5]=e[l],t}function dl(o){let e,l;return{c(){e=y("span"),l=S(` 
    `),re(e,"background",o[5]),re(e,"width","100%"),re(e,"border","1px solid black")},m(t,n){h(t,e,n),p(e,l)},p(t,n){n&1&&re(e,"background",t[5])},d(t){t&&d(e)}}}function wl(o){let e,l=o[2]+"",t;return{c(){e=y("span"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&A(t,l)},d(n){n&&d(e)}}}function Rs(o){let e,l,t,n=$e(o[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=dl(hl(o,n,i));let s=$e(o[1]),f=[];for(let i=0;i<s.length;i+=1)f[i]=wl(gl(o,s,i));return{c(){e=y("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=y("div");for(let i=0;i<f.length;i+=1)f[i].c();re(e,"display","flex"),re(t,"display","flex"),re(t,"justify-content","space-between")},m(i,a){h(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);h(i,l,a),h(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=$e(i[0]);let u;for(u=0;u<n.length;u+=1){const c=hl(i,n,u);r[u]?r[u].p(c,a):(r[u]=dl(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){s=$e(i[1]);let u;for(u=0;u<s.length;u+=1){const c=gl(i,s,u);f[u]?f[u].p(c,a):(f[u]=wl(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=s.length}},i:Q,o:Q,d(i){i&&(d(e),d(l),d(t)),Ae(r,i),Ae(f,i)}}}function Ps(o,e,l){let{colorScale:t}=e,{limits:n}=e;return o.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Qe extends Z{constructor(e){super(),X(this,e,Ps,Rs,V,{colorScale:0,limits:1})}}const bl=Ie(!0);let Dn=Ie(null);function Bn(o){window.history.replaceState(null,"",o.toString()),window.localStorage.setItem("browsepage-querystring",o.searchParams.toString())}function pe(o){let e=new URLSearchParams(window.location.search).has(o),l=Ie(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(o,"1"):n.searchParams.delete(o),Bn(n)}),l}function Vt(o,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(o);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${o}=${r} failed, using default value: ${f}`)}let s=Ie(n);return s.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(o):i.searchParams.set(o,a),Bn(i)}),s}function vl(o){const e=o[7].OA21CD;o[8]=e;const l=o[7][o[0].kind];o[9]=l}function Gs(o){let e,l,t,n,r,s,f;return t=new oe({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[qs]},$$scope:{ctx:o}}}),r=new oe({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Hs]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("Population density data is from the 2021 census, via "),w(t.$$.fragment),n=S(". Output area boundaries from "),w(r.$$.fragment),s=S(".")},m(i,a){h(i,e,a),p(e,l),b(t,e,null),p(e,n),b(r,e,null),p(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&d(e),v(t),v(r)}}}function Ds(o){let e,l,t,n,r,s,f,i,a;return r=new oe({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[zs]},$$scope:{ctx:o}}}),f=new oe({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Bs]},$$scope:{ctx:o}}}),{c(){e=y("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=y("p"),n=S("Car/van availability data is from the 2021 census, via "),w(r.$$.fragment),s=S(". Output area boundaries from "),w(f.$$.fragment),i=S(".")},m(u,c){h(u,e,c),h(u,l,c),h(u,t,c),p(t,n),b(r,t,null),p(t,s),b(f,t,null),p(t,i),a=!0},i(u){a||(m(r.$$.fragment,u),m(f.$$.fragment,u),a=!0)},o(u){_(r.$$.fragment,u),_(f.$$.fragment,u),a=!1},d(u){u&&(d(e),d(l),d(t)),v(r),v(f)}}}function As(o){let e,l,t,n,r,s,f;return t=new oe({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Us]},$$scope:{ctx:o}}}),r=new oe({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Es]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("Car/van availability data is from the 2021 census, via "),w(t.$$.fragment),n=S(". Output area boundaries from "),w(r.$$.fragment),s=S(".")},m(i,a){h(i,e,a),p(e,l),b(t,e,null),p(e,n),b(r,e,null),p(e,s),f=!0},i(i){f||(m(t.$$.fragment,i),m(r.$$.fragment,i),f=!0)},o(i){_(t.$$.fragment,i),_(r.$$.fragment,i),f=!1},d(i){i&&d(e),v(t),v(r)}}}function qs(o){let e;return{c(){e=S(`NOMIS TS006
        `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Hs(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function zs(o){let e;return{c(){e=S(`NOMIS TS045
        `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Bs(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Us(o){let e;return{c(){e=S(`NOMIS TS045
        `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Es(o){let e;return{c(){e=S(`ONS Geography
        `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Ws(o){let e,l,t,n,r,s;const f=[As,Ds,Gs],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(o),t=i[l]=f[l](o),r=new Oe({}),{c(){e=y("span"),t.c(),n=L(),w(r.$$.fragment),G(e,"slot","help")},m(u,c){h(u,e,c),i[l].m(e,null),p(e,n),b(r,e,null),s=!0},p(u,c){let $=l;l=a(u),l!==$&&(we(),_(i[$],1,1,()=>{i[$]=null}),be(),t=i[l],t||(t=i[l]=f[l](u),t.c()),m(t,1),t.m(e,n))},i(u){s||(m(t),m(r.$$.fragment,u),s=!0)},o(u){_(t),_(r.$$.fragment,u),s=!1},d(u){u&&d(e),i[l].d(),v(r)}}}function Ys(o){let e,l,t,n;return t=new Qe({props:{colorScale:o[1],limits:mt(o[0].kind).map(kl)}}),{c(){e=y("p"),e.textContent="(people per square kilometres)",l=L(),w(t.$$.fragment)},m(r,s){h(r,e,s),h(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&1&&(f.limits=mt(r[0].kind).map(kl)),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&(d(e),d(l)),v(t,r)}}}function Js(o){let e,l;return e=new Qe({props:{colorScale:o[1],limits:mt(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=mt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qs(o){let e,l;return e=new Qe({props:{colorScale:o[1],limits:mt(o[0].kind)}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=mt(t[0].kind)),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Vs(o){let e,l,t,n,r,s,f;function i(g){o[4](g)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};o[0].kind!==void 0&&(a.value=o[0].kind),l=new Hn({props:a}),z.push(()=>U(l,"value",i));const u=[Qs,Js,Ys],c=[];function $(g,k){return g[0].kind=="percent_households_with_car"?0:g[0].kind=="average_cars_per_household"?1:g[0].kind=="population_density"?2:-1}return~(r=$(o))&&(s=c[r]=u[r](o)),{c(){e=y("div"),w(l.$$.fragment),n=L(),s&&s.c(),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(g,k){h(g,e,k),b(l,e,null),p(e,n),~r&&c[r].m(e,null),f=!0},p(g,k){const C={};!t&&k&1&&(t=!0,C.value=g[0].kind,E(()=>t=!1)),l.$set(C);let T=r;r=$(g),r===T?~r&&c[r].p(g,k):(s&&(we(),_(c[T],1,1,()=>{c[T]=null}),be()),~r?(s=c[r],s?s.p(g,k):(s=c[r]=u[r](g),s.c()),m(s,1),s.m(e,null)):s=null)},i(g){f||(m(l.$$.fragment,g),m(s),f=!0)},o(g){_(l.$$.fragment,g),_(s),f=!1},d(g){g&&d(e),v(l),~r&&c[r].d()}}}function Ks(o){let e,l,t,n=o[9].toLocaleString()+"",r,s,f=o[8]+"",i;return{c(){e=y("p"),l=S("There are "),t=y("b"),r=S(n),s=S(`
          people per square kilometre in `),i=S(f)},m(a,u){h(a,e,u),p(e,l),p(e,t),p(t,r),p(e,s),p(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&A(r,n),u&128&&f!==(f=a[8]+"")&&A(i,f)},d(a){a&&d(e)}}}function Zs(o){let e,l,t=o[8]+"",n,r,s,f=o[9]+"",i,a;return{c(){e=y("p"),l=S("Households in "),n=S(t),r=S(` have an average of
          `),s=y("b"),i=S(f),a=S(`
          cars`)},m(u,c){h(u,e,c),p(e,l),p(e,n),p(e,r),p(e,s),p(s,i),p(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&A(n,t),c&129&&f!==(f=u[9]+"")&&A(i,f)},d(u){u&&d(e)}}}function Xs(o){let e,l,t=o[9]+"",n,r,s,f=o[8]+"",i,a;return{c(){e=y("p"),l=y("b"),n=S(t),r=S("%"),s=S(`
          of households in `),i=S(f),a=S(" have 1 or more cars")},m(u,c){h(u,e,c),p(e,l),p(l,n),p(l,r),p(e,s),p(e,i),p(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&A(n,t),c&128&&f!==(f=u[8]+"")&&A(i,f)},d(u){u&&d(e)}}}function xs(o){vl(o);let e;function l(r,s){return r[0].kind=="percent_households_with_car"?Xs:r[0].kind=="average_cars_per_household"?Zs:Ks}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),h(r,e,s)},p(r,s){vl(r),t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function ei(o){let e,l;return e=new ae({props:{$$slots:{default:[xs,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ti(o){let e,l,t,n;const r=[q(Ve),{sourceLayer:Ve},{paint:{"fill-color":ke(["get",o[0].kind],mt(o[0].kind),o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ei]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new qe({props:s}),e.$on("click",o[3]);const f=[q(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),h(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&ie(q(Ve)),u&0&&{sourceLayer:Ve},u&3&&{paint:{"fill-color":ke(["get",a[0].kind],mt(a[0].kind),a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?te(f,[u&0&&ie(q(`${Ve}-outline`)),u&0&&{sourceLayer:Ve},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function ni(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ve,title:"2021 census",$$slots:{controls:[Vs],help:[Ws]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Ve}.pmtiles`,$$slots:{default:[ti]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,E(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ve="census_output_areas";function li(o){return o.show?o.kind:null}function ri(o){return{show:!0,kind:o}}function mt(o){return o=="percent_households_with_car"?[0,20,40,60,80,100]:o=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const kl=o=>o.toLocaleString();function oi(o,e,l){let t,n=ne.sequential_low_to_high,s=Vt(Ve,{show:!1,kind:"percent_households_with_car"},li,ri);Y(o,s,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){o.$$.not_equal(t.kind,u)&&(t.kind=u,s.set(t))}function a(u){o.$$.not_equal(t.show,u)&&(t.show=u,s.set(t))}return[t,n,s,f,i,a]}class si extends Z{constructor(e){super(),X(this,e,oi,ni,V,{})}}function ii(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ai(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function fi(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://geoportal.statistics.gov.uk/datasets/8369f71423ba474ebdbac60a539b53c8_0/explore",$$slots:{default:[ai]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(", as of May 2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){h(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function ui(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&d(e)}}}function ci(o){let e,l;return e=new ae({props:{$$slots:{default:[ui,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function $i(o){let e,l,t,n;const r=[q(kt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ci]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new qe({props:s}),e.$on("click",_i);const f=[q(`${kt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),h(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&ie(q(kt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?te(f,[u&0&&ie(q(`${kt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function pi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:kt,title:mi,$$slots:{help:[fi],icon:[ii]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new _t({props:{data:`${_e()}/v1/${kt}.geojson`,$$slots:{default:[$i]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let kt="combined_authorities",mi="Combined authorities";function _i(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.CAUTH24CD}`,"_blank")}function gi(o,e,l){let t,n=ne.combined_authorities,r=pe(kt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class hi extends Z{constructor(e){super(),X(this,e,gi,pi,V,{})}}function di(o){let e;return{c(){e=S(`DLUCH GIS
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function wi(o){let e;return{c(){e=S(`here
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function bi(o){let e,l,t,n,r,s,f,i,a,u;return n=new oe({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[di]},$$scope:{ctx:o}}}),s=new oe({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[wi]},$$scope:{ctx:o}}}),a=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("The 2019 English IMD scores come from "),w(n.$$.fragment),r=S(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),w(s.$$.fragment),f=S("."),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,$){h(c,e,$),p(e,l),p(l,t),b(n,l,null),p(l,r),b(s,l,null),p(l,f),p(e,i),b(a,e,null),u=!0},p(c,$){const g={};$&64&&(g.$$scope={dirty:$,ctx:c}),n.$set(g);const k={};$&64&&(k.$$scope={dirty:$,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(s),v(a)}}}function vi(o){let e,l,t;return l=new Qe({props:{colorScale:o[1],limits:["Least deprived","Most deprived"]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ki(o){let e,l=o[5].LSOA11CD+"",t,n,r,s=o[5].score+"",f,i,a,u,c,$=o[5].rank.toLocaleString()+"",g,k;return{c(){e=y("p"),t=S(l),n=S(` has an IMD score of
        `),r=y("b"),f=S(s),i=L(),a=y("p"),u=S("Rank: "),c=y("b"),g=S($),k=S(`
        / 32,844 LSOAs`)},m(C,T){h(C,e,T),p(e,t),p(e,n),p(e,r),p(r,f),h(C,i,T),h(C,a,T),p(a,u),p(a,c),p(c,g),p(a,k)},p(C,T){T&32&&l!==(l=C[5].LSOA11CD+"")&&A(t,l),T&32&&s!==(s=C[5].score+"")&&A(f,s),T&32&&$!==($=C[5].rank.toLocaleString()+"")&&A(g,$)},d(C){C&&(d(e),d(i),d(a))}}}function yi(o){let e,l;return e=new ae({props:{$$slots:{default:[ki,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Si(o){let e,l,t,n;const r=[q(Ke),{sourceLayer:Ke},{paint:{"fill-color":ke(["-",10,["get","decile"]],o[2],o[1]),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[yi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new qe({props:s});const f=[q(`${Ke}-outline`),{sourceLayer:Ke},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),h(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&7?te(r,[u&0&&ie(q(Ke)),u&0&&{sourceLayer:Ke},u&6&&{paint:{"fill-color":ke(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?te(f,[u&0&&ie(q(`${Ke}-outline`)),u&0&&{sourceLayer:Ke},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ti(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ke,title:Ci,$$slots:{controls:[vi],help:[bi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Ke}.pmtiles`,$$slots:{default:[Si]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ke="imd",Ci="Indices of Multiple Deprivation";function Li(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,2,4,6,8,10],s=pe(Ke);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Ii extends Z{constructor(e){super(),X(this,e,Li,Ti,V,{})}}function Oi(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ji(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Mi(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://geoportal.statistics.gov.uk/datasets/fb6ab0ce776243339e45e33444f431c8_0/explore",$$slots:{default:[ji]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(", as of May 2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){h(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Ni(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&d(e)}}}function Fi(o){let e,l;return e=new ae({props:{$$slots:{default:[Ni,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ri(o){let e,l,t,n;const r=[q(yt),{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Fi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new qe({props:s}),e.$on("click",Di);const f=[q(`${yt}-outline`),{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),h(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&ie(q(yt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?te(f,[u&0&&ie(q(`${yt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Pi(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:yt,title:Gi,$$slots:{help:[Mi],icon:[Oi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new _t({props:{data:`${_e()}/v1/${yt}.geojson`,$$slots:{default:[Ri]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let yt="local_authority_districts",Gi="Local Authority Districts";function Di(o){window.open(`https://www.ons.gov.uk/visualisations/areas/${o.detail.features[0].properties.LAD24CD}`,"_blank")}function Ai(o,e,l){let t,n=ne.local_authority_districts,r=pe(yt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class qi extends Z{constructor(e){super(),X(this,e,Ai,Pi,V,{})}}function Hi(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function zi(o){let e;return{c(){e=S(`local authority
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Bi(o){let e;return{c(){e=S(`national park authorit
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Ui(o){let e;return{c(){e=S(`development corporation
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Ei(o){let e;return{c(){e=S("this map")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Wi(o){let e;return{c(){e=S(`planning.data.gov.uk
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Yi(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,k,C,T,I,O,N,F,M,j,H;return n=new oe({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[zi]},$$scope:{ctx:o}}}),s=new oe({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Bi]},$$scope:{ctx:o}}}),i=new oe({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ui]},$$scope:{ctx:o}}}),k=new oe({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Ei]},$$scope:{ctx:o}}}),N=new oe({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Wi]},$$scope:{ctx:o}}}),j=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("LPAs may be a "),w(n.$$.fragment),r=S(", "),w(s.$$.fragment),f=S("y, or "),w(i.$$.fragment),a=S("."),u=L(),c=y("p"),$=y("strong"),g=S(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),w(k.$$.fragment),C=S(" to get more details."),T=L(),I=y("p"),O=S("Data from ONS Geography via "),w(N.$$.fragment),F=S(", as of November 2022."),M=L(),w(j.$$.fragment),G(e,"slot","help")},m(P,R){h(P,e,R),p(e,l),p(l,t),b(n,l,null),p(l,r),b(s,l,null),p(l,f),b(i,l,null),p(l,a),p(e,u),p(e,c),p(c,$),p($,g),b(k,$,null),p($,C),p(e,T),p(e,I),p(I,O),b(N,I,null),p(I,F),p(e,M),b(j,e,null),H=!0},p(P,R){const W={};R&32&&(W.$$scope={dirty:R,ctx:P}),n.$set(W);const ce={};R&32&&(ce.$$scope={dirty:R,ctx:P}),s.$set(ce);const D={};R&32&&(D.$$scope={dirty:R,ctx:P}),i.$set(D);const K={};R&32&&(K.$$scope={dirty:R,ctx:P}),k.$set(K);const J={};R&32&&(J.$$scope={dirty:R,ctx:P}),N.$set(J)},i(P){H||(m(n.$$.fragment,P),m(s.$$.fragment,P),m(i.$$.fragment,P),m(k.$$.fragment,P),m(N.$$.fragment,P),m(j.$$.fragment,P),H=!0)},o(P){_(n.$$.fragment,P),_(s.$$.fragment,P),_(i.$$.fragment,P),_(k.$$.fragment,P),_(N.$$.fragment,P),_(j.$$.fragment,P),H=!1},d(P){P&&d(e),v(n),v(s),v(i),v(k),v(N),v(j)}}}function Ji(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&d(e)}}}function Qi(o){let e,l;return e=new ae({props:{$$slots:{default:[Ji,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Vi(o){let e,l,t,n;const r=[q(Ze),{sourceLayer:Ze},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Qi]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new qe({props:s});const f=[q(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),h(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&ie(q(Ze)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?te(f,[u&0&&ie(q(`${Ze}-outline`)),u&0&&{sourceLayer:Ze},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ki(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ze,title:Zi,$$slots:{help:[Yi],icon:[Hi]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Ze}.pmtiles`,$$slots:{default:[Vi]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ze="local_planning_authorities",Zi="Local Planning Authorities";function Xi(o,e,l){let t,n=ne.local_planning_authorities,r=pe(Ze);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class xi extends Z{constructor(e){super(),X(this,e,Xi,Ki,V,{})}}function ea(o){let e;return{c(){e=S("Ordnance Survey MasterMap Topography layer")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function ta(o){let e,l,t,n,r,s,f,i,a,u,c,$;return n=new oe({props:{href:"https://www.ordnancesurvey.co.uk/products/os-mastermap-topography-layer",$$slots:{default:[ea]},$$scope:{ctx:o}}}),c=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("This shows all polygons from the "),w(n.$$.fragment),r=S(` related to roads. This is useful in conjunction with the OS
      road and pavement width layers, to see specifically where width varies.`),s=L(),f=y("p"),f.textContent="Data is from February 2025.",i=L(),a=y("p"),a.textContent=`The layer is only visible when you zoom in close to the map. Note there
      may be missing polygons near bridges.`,u=L(),w(c.$$.fragment),G(e,"slot","help")},m(g,k){h(g,e,k),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(e,i),p(e,a),p(e,u),b(c,e,null),$=!0},p(g,k){const C={};k&16&&(C.$$scope={dirty:k,ctx:g}),n.$set(C)},i(g){$||(m(n.$$.fragment,g),m(c.$$.fragment,g),$=!0)},o(g){_(n.$$.fragment,g),_(c.$$.fragment,g),$=!1},d(g){g&&d(e),v(n),v(c)}}}function na(o){let e,l,t;return l=new ot({props:{rows:o[2]}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function la(o){let e,l;const t=[q(rn),{sourceLayer:"topographic_area"},{paint:{"fill-color":je(["get","style_description"],{"Road Or Track Fill":"black","Traffic Calming Fill":"#3b3b3b","Roadside Manmade Fill":"grey","Roadside Natural Fill":"green","Path Fill":"brown","Track Fill":"brown"},"red"),"fill-opacity":ee(.8,.3)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0}];let n={};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new qe({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&ie(q(rn)),t[1],t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ra(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:rn,title:"OS MasterMap",$$slots:{controls:[na],help:[ta]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${en()}/v1/${rn}.pmtiles`,minzoom:16,maxzoom:16,promoteId:"toid",$$slots:{default:[la]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let rn="osmm";function oa(o,e,l){let t,n=pe(rn);Y(o,n,f=>l(0,t=f));let r=[["roads","black"],["traffic calming","#3b3b3b"],["pavement","grey"],["roadside natural","green"],["paths and tracks","brown"]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class sa extends Z{constructor(e){super(),X(this,e,oa,ra,V,{})}}function ia(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function aa(o){let e;return{c(){e=S(`Ordnance Survey Boundary-Line
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function fa(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[aa]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(", as of October 2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){h(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function ua(o){let e,l=o[4].Name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&A(t,l)},d(n){n&&d(e)}}}function ca(o){let e,l;return e=new ae({props:{$$slots:{default:[ua,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function $a(o){let e,l,t,n;const r=[q(Xe),{sourceLayer:Xe},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ca]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new qe({props:s}),e.$on("click",_a);const f=[q(`${Xe}-outline`),{sourceLayer:Xe},{paint:{"line-color":o[1],"line-width":5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),h(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&ie(q(Xe)),u&0&&{sourceLayer:Xe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?te(f,[u&0&&ie(q(`${Xe}-outline`)),u&0&&{sourceLayer:Xe},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function pa(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Xe,title:ma,$$slots:{help:[fa],icon:[ia]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Xe}.pmtiles`,$$slots:{default:[$a]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Xe="parliamentary_constituencies",ma="Parliamentary constituencies";function _a(o){let e=o.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function ga(o,e,l){let t,n=ne.parliamentary_constituencies,r=pe(Xe);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class ha extends Z{constructor(e){super(),X(this,e,ga,pa,V,{})}}function da(o){let e;return{c(){e=S(`DEFRA
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function wa(o){let e,l,t,n,r,s,f,i,a,u;return s=new oe({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[da]},$$scope:{ctx:o}}}),a=new Oe({}),{c(){e=y("span"),l=y("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=y("p"),r=S("Data from June 2019, produced by "),w(s.$$.fragment),f=S(". See there for methodology details"),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,$){h(c,e,$),p(e,l),p(e,t),p(e,n),p(n,r),b(s,n,null),p(n,f),p(e,i),b(a,e,null),u=!0},p(c,$){const g={};$&32&&(g.$$scope={dirty:$,ctx:c}),s.$set(g)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(s),v(a)}}}function ba(o){let e,l,t;return l=new Qe({props:{colorScale:o[1],limits:["55","65","75",">"]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function va(o){let e,l=o[4].noiseclass+"",t,n,r=yl(o[4].noiseclass)+"",s,f;return{c(){e=y("p"),t=S(l),n=S(" dB ("),s=S(r),f=S(")")},m(i,a){h(i,e,a),p(e,t),p(e,n),p(e,s),p(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&A(t,l),a&16&&r!==(r=yl(i[4].noiseclass)+"")&&A(s,r)},d(i){i&&d(e)}}}function ka(o){let e,l;return e=new ae({props:{$$slots:{default:[va,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ya(o){let e,l;const t=[q(St),{sourceLayer:St},{paint:{"fill-color":je(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":ee(.5,.8)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ka]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new qe({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&ie(q(St)),s&0&&{sourceLayer:St},s&2&&{paint:{"fill-color":je(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":ee(.5,.8)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Sa(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:St,title:Ta,$$slots:{controls:[ba],help:[wa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${St}.pmtiles`,$$slots:{default:[ya]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let St="road_noise",Ta="Road noise";function yl(o){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[o]}function Ca(o,e,l){let t,n=[ne.sequential_low_to_high[0],ne.sequential_low_to_high[2],ne.sequential_low_to_high[4]],r=pe(St);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class La extends Z{constructor(e){super(),X(this,e,Ca,Sa,V,{})}}function Ia(o){let e;return{c(){e=S(`DEFRA
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Oa(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://www.gov.uk/government/collections/rural-urban-classification",$$slots:{default:[Ia]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S(`The 2011 Rural Urban Classification distinguishes four urban and six rural
      categories. The data comes from `),w(n.$$.fragment),r=S(". Note this is data from 2011."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){h(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function ja(o){let e,l,t;return l=new ot({props:{rows:Object.entries(o[2])}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Ma(o){let e,l=o[4].OA11CD+"",t,n,r=o[4].RUC11.startsWith("U")?"an":"a",s,f,i,a=o[4].RUC11+"",u;return{c(){e=y("p"),t=S(l),n=S(" is "),s=S(r),f=L(),i=y("b"),u=S(a)},m(c,$){h(c,e,$),p(e,t),p(e,n),p(e,s),p(e,f),p(e,i),p(i,u)},p(c,$){$&16&&l!==(l=c[4].OA11CD+"")&&A(t,l),$&16&&r!==(r=c[4].RUC11.startsWith("U")?"an":"a")&&A(s,r),$&16&&a!==(a=c[4].RUC11+"")&&A(u,a)},d(c){c&&d(e)}}}function Na(o){let e,l;return e=new ae({props:{$$slots:{default:[Ma,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Fa(o){let e,l,t,n;const r=[q(Zt),{sourceLayer:ln},{paint:{"fill-color":je(["get","RUC11"],o[2],"cyan"),"fill-opacity":ee(.5,.7)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Na]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new qe({props:s});const f=[q(`${Zt}-outline`),{sourceLayer:ln},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),h(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&5?te(r,[u&0&&ie(q(Zt)),u&0&&{sourceLayer:ln},u&4&&{paint:{"fill-color":je(["get","RUC11"],a[2],"cyan"),"fill-opacity":ee(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?te(f,[u&0&&ie(q(`${Zt}-outline`)),u&0&&{sourceLayer:ln},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ra(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Zt,title:Pa,$$slots:{controls:[ja],help:[Oa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${ln}.pmtiles`,$$slots:{default:[Fa]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Zt="ruc",ln="rural_urban_classification",Pa="Rural Urban Classification";function Ga(o,e,l){let t,n=pe(Zt);Y(o,n,f=>l(0,t=f));let r={"Urban major conurbation":"#fe2200","Urban minor conurbation":"#ff6f00","Urban city and town in a sparse setting":"#ffa602","Urban city and town":"#ffe400","Rural town and fringe in a sparse setting":"#006100","Rural town and fringe":"#4a8a02","Rural village in a sparse setting":"#8cb503","Rural village":"#d6e601","Rural hamlets and isolated dwellings in a sparse setting":"#a1d99b","Rural hamlets and isolated dwellings":"#e5f5e0"};function s(f){t=f,n.set(t)}return[t,n,r,s]}class Da extends Z{constructor(e){super(),X(this,e,Ga,Ra,V,{})}}function Aa(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function qa(o){let e;return{c(){e=S(`ONS Geography
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Ha(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[qa]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(", as of May 2023."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){h(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function za(o){let e,l=o[4].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&A(t,l)},d(n){n&&d(e)}}}function Ba(o){let e,l;return e=new ae({props:{$$slots:{default:[za,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ua(o){let e,l,t,n;const r=[q(xe),{sourceLayer:xe},{paint:{"fill-color":o[1],"fill-opacity":ee(0,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Ba]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new qe({props:s}),e.$on("click",Ya);const f=[q(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":o[1],"line-width":2.5}},{layout:{visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new ge({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),h(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&3?te(r,[u&0&&ie(q(xe)),u&0&&{sourceLayer:xe},u&2&&{paint:{"fill-color":a[1],"fill-opacity":ee(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&3?te(f,[u&0&&ie(q(`${xe}-outline`)),u&0&&{sourceLayer:xe},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function Ea(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:xe,title:Wa,$$slots:{help:[Ha],icon:[Aa]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${xe}.pmtiles`,$$slots:{default:[Ua]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let xe="wards",Wa="Wards";function Ya(o){let e=encodeURIComponent(o.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Ja(o,e,l){let t,n=ne.wards,r=pe(xe);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Qa extends Z{constructor(e){super(),X(this,e,Ja,Ea,V,{})}}function Va(o){let e;return{c(){e=S("Open Data Commons Open Database License")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Ka(o){let e,l,t,n;return t=new oe({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Va]},$$scope:{ctx:o}}}),{c(){e=y("p"),l=S("License: "),w(t.$$.fragment)},m(r,s){h(r,e,s),p(e,l),b(t,e,null),n=!0},p(r,[s]){const f={};s&1&&(f.$$scope={dirty:s,ctx:r}),t.$set(f)},i(r){n||(m(t.$$.fragment,r),n=!0)},o(r){_(t.$$.fragment,r),n=!1},d(r){r&&d(e),v(t)}}}class tt extends Z{constructor(e){super(),X(this,e,null,Ka,V,{})}}function Za(o){let e,l,t;return l=new Le({props:{color:ne.bus_route_with_lane}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Xa(o){let e;return{c(){e=S(`GTFS
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function xa(o){let e,l,t,n,r,s,f,i,a,u;return s=new oe({props:{href:"https://gtfs.org",$$slots:{default:[Xa]},$$scope:{ctx:o}}}),a=new tt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=y("p"),r=S("Note this data is from OpenStreetMap (as of 20 October 2024), not "),w(s.$$.fragment),f=S(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,$){h(c,e,$),p(e,l),p(e,t),p(e,n),p(n,r),b(s,n,null),p(n,f),p(e,i),b(a,e,null),u=!0},p(c,$){const g={};$&16&&(g.$$scope={dirty:$,ctx:c}),s.$set(g)},i(c){u||(m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(s),v(a)}}}function ef(o){let e;return{c(){e=y("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function tf(o){let e;return{c(){e=y("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function nf(o){let e;function l(r,s){return r[3].has_bus_lane?tf:ef}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),h(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function lf(o){let e,l;return e=new ae({props:{$$slots:{default:[nf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function rf(o){let e,l;const t=[q(Tt),{sourceLayer:Tt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],ne.bus_route_with_lane,ne.bus_route_without_lane],"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[lf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&ie(q(Tt)),s&0&&{sourceLayer:Tt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function of(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Tt,title:sf,$$slots:{help:[xa],icon:[Za]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Tt}.pmtiles`,$$slots:{default:[rf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Tt="bus_routes",sf="Bus routes";function af(o,e,l){let t,n=pe(Tt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class ff extends Z{constructor(e){super(),X(this,e,af,of,V,{})}}function Sl(o){const e=bf(o[9]);o[10]=e[0],o[11]=e[1],o[12]=e[2]}function Tl(o,e,l){const t=o.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function uf(o){let e,l,t,n,r,s,f,i,a;return i=new tt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 20 October 2024).`,t=L(),n=y("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),s=y("p"),s.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),w(i.$$.fragment),G(e,"slot","help")},m(u,c){h(u,e,c),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(e,f),b(i,e,null),a=!0},p:Q,i(u){a||(m(i.$$.fragment,u),a=!0)},o(u){_(i.$$.fragment,u),a=!1},d(u){u&&d(e),v(i)}}}function cf(o){let e,l,t=o[13]+"",n,r,s;return e=new Le({props:{color:o[14]}}),{c(){w(e.$$.fragment),l=L(),n=S(t),r=L()},m(f,i){b(e,f,i),h(f,l,i),h(f,n,i),h(f,r,i),s=!0},p:Q,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n),d(r)),v(e,f)}}}function Cl(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[cf]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new We({props:r}),z.push(()=>U(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f&131072&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],E(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function $f(o){let e,l,t=$e(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Cl(Tl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);h(s,e,f),l=!0},p(s,f){if(f&5){t=$e(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Tl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Cl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(we(),i=t.length;i<n.length;i+=1)r(i);be()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),Ae(n,s)}}}function pf(o){let e,l,t;return l=new Be({props:{small:!0,$$slots:{default:[$f]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&131073&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function mf(o){Sl(o);let e,l=o[10]+"",t,n,r,s,f,i=o[11]+"",a,u,c,$,g=o[12]+"",k;return{c(){e=y("h2"),t=S(l),n=L(),r=y("p"),s=S("Direction: "),f=y("b"),a=L(),u=y("p"),c=S("Width: "),$=y("b"),k=S(g)},m(C,T){h(C,e,T),p(e,t),h(C,n,T),h(C,r,T),p(r,s),p(r,f),f.innerHTML=i,h(C,a,T),h(C,u,T),p(u,c),p(u,$),p($,k)},p(C,T){Sl(C),T&512&&l!==(l=C[10]+"")&&A(t,l),T&512&&i!==(i=C[11]+"")&&(f.innerHTML=i),T&512&&g!==(g=C[12]+"")&&A(k,g)},d(C){C&&(d(e),d(n),d(r),d(a),d(u))}}}function _f(o){let e,l;return e=new ae({props:{$$slots:{default:[mf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function gf(o){let e,l;const t=[q(Ct),{sourceLayer:Ct},{paint:{"line-color":je(["get","kind"],{track:ne.cycle_paths.track,lane:ne.cycle_paths.lane,shared_use_segregated:ne.cycle_paths.shared_use_segregated,shared_use_unsegregated:ne.cycle_paths.shared_use_unsegregated},"red"),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[_f]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),e.$on("click",vf),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?te(t,[s&0&&ie(q(Ct)),s&0&&{sourceLayer:Ct},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};s&131072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function hf(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ct,title:df,$$slots:{controls:[pf],help:[uf]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Ct}.pmtiles`,$$slots:{default:[gf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,E(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ct="cycle_paths",df="Cycle paths";function wf(o){return{show:!0,track:o.includes("track"),lane:o.includes("lane"),shared_use_segregated:o.includes("shared_use_segregated"),shared_use_unsegregated:o.includes("shared_use_unsegregated")}}function bf(o){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[o.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[o.direction],t=o.width=="unknown"?"unknown":`${o.width} meters`;return[e,`${l} ${o.direction}`,t]}function vf(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function kf(o,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s($){return $.show?n.filter(g=>$[g]).join(","):null}let f=Vt(Ct,r,s,wf);Y(o,f,$=>l(0,t=$));let i=[["track","Separated tracks",ne.cycle_paths.track],["lane","Unprotected lanes",ne.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",ne.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",ne.cycle_paths.shared_use_unsegregated]];function a($){let g=n.filter(k=>$[k]);return["in",["get","kind"],["literal",g]]}function u($,g){o.$$.not_equal(t[g],$)&&(t[g]=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,f,i,a,u,c]}class yf extends Z{constructor(e){super(),X(this,e,kf,hf,V,{})}}function Sf(o){let e,l,t;return l=new Le({props:{color:ne.cycle_route}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Tf(o){let e;return{c(){e=S("OpenStreetMap")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Cf(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:route%3Dbicycle",$$slots:{default:[Tf]},$$scope:{ctx:o}}}),f=new tt({}),{c(){e=y("span"),l=y("p"),t=S("This shows all cycle routes, according to "),w(n.$$.fragment),r=S(` (as of 20 October 2024). The quality of the route or infrastructure
      along it is not shown here. Not all routes are official, named routes -- click
      one to see more information.`),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){h(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Lf(o){let e=(o[3].name||"untitled route")+"",l;return{c(){l=S(e)},m(t,n){h(t,l,n)},p(t,n){n&8&&e!==(e=(t[3].name||"untitled route")+"")&&A(l,e)},d(t){t&&d(l)}}}function If(o){let e,l;return e=new ae({props:{$$slots:{default:[Lf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Of(o){let e,l;const t=[q(Lt),{sourceLayer:Lt},{paint:{"line-color":ee(ne.cycle_route,"red"),"line-width":8}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[If]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),e.$on("click",Nf),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&ie(q(Lt)),s&0&&{sourceLayer:Lt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function jf(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Lt,title:Mf,$$slots:{help:[Cf],icon:[Sf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Lt}.pmtiles`,$$slots:{default:[Of]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Lt="cycle_routes",Mf="Cycle routes";function Nf(o){window.open(`http://openstreetmap.org/relation/${o.detail.features[0].properties.osm_relation}`,"_blank")}function Ff(o,e,l){let t,n=pe(Lt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class Rf extends Z{constructor(e){super(),X(this,e,Ff,jf,V,{})}}function Pf(o){let e;return{c(){e=S("OS Terrain 50")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Gf(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,k;return i=new oe({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Pf]},$$scope:{ctx:o}}}),c=new Oe({}),g=new tt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=y("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),s=y("p"),f=S("This layer is built from "),w(i.$$.fragment),a=S(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),w(c.$$.fragment),$=L(),w(g.$$.fragment),G(e,"slot","help")},m(C,T){h(C,e,T),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),b(i,s,null),p(s,a),p(e,u),b(c,e,null),p(e,$),b(g,e,null),k=!0},p(C,T){const I={};T&64&&(I.$$scope={dirty:T,ctx:C}),i.$set(I)},i(C){k||(m(i.$$.fragment,C),m(c.$$.fragment,C),m(g.$$.fragment,C),k=!0)},o(C){_(i.$$.fragment,C),_(c.$$.fragment,C),_(g.$$.fragment,C),k=!1},d(C){C&&d(e),v(i),v(c),v(g)}}}function Df(o){let e,l,t,n,r;return l=new Qe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("span"),w(l.$$.fragment),t=L(),n=y("p"),n.innerHTML=`<img src="${Ro}" alt="arrow"/>
      Arrows point uphill`,G(e,"slot","controls")},m(s,f){h(s,e,f),b(l,e,null),p(e,t),p(e,n),r=!0},p:Q,i(s){r||(m(l.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),r=!1},d(s){s&&d(e),v(l)}}}function Af(o){let e,l,t,n=Math.abs(o[5].gradient)/100+"",r,s;return{c(){e=y("p"),l=S("Gradient: "),t=y("b"),r=S(n),s=S(`
        %`)},m(f,i){h(f,e,i),p(e,l),p(e,t),p(t,r),p(e,s)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&A(r,n)},d(f){f&&d(e)}}}function qf(o){let e,l;return e=new ae({props:{$$slots:{default:[Af,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Hf(o){let e,l,t,n;const r=[q(et),{sourceLayer:et},{manageHoverState:!0},{paint:{"line-color":ke(["/",["abs",["get","gradient"]],100],o[2],o[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let s={$$slots:{default:[qf]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new ge({props:s});const f=[q(et+"_arrows"),{sourceLayer:et},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:o[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new zn({props:i}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),h(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&7?te(r,[u&0&&ie(q(et)),u&0&&{sourceLayer:et},r[2],u&6&&{paint:{"line-color":ke(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&1?te(f,[u&0&&ie(q(et+"_arrows")),u&0&&{sourceLayer:et},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function zf(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:et,title:Bf,$$slots:{controls:[Df],help:[Gf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${et}.pmtiles`,$$slots:{default:[Hf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let et="gradient",Bf="Gradients";function Uf(o,e,l){let t,n=ne.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],s=pe(et);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Ef extends Z{constructor(e){super(),X(this,e,Uf,zf,V,{})}}function Wf(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Yf(o){let e;return{c(){e=S(`Major Road Network
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Jf(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Yf]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from the "),w(n.$$.fragment),r=S(", as of September 2021."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){h(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Qf(o){let e,l=(o[4].name??"Unknown MRN road")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&A(t,l)},d(n){n&&d(e)}}}function Vf(o){let e,l;return e=new ae({props:{$$slots:{default:[Qf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Kf(o){let e,l;const t=[q(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Vf]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&ie(q(It)),s&0&&{sourceLayer:It},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Zf(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:It,title:Xf,$$slots:{help:[Jf],icon:[Wf]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${It}.pmtiles`,$$slots:{default:[Kf]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let It="mrn",Xf="Major Road Network";function xf(o,e,l){let t,n=ne.mrn,r=pe(It);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class eu extends Z{constructor(e){super(),X(this,e,xf,Zf,V,{})}}function tu(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function nu(o){let e;return{c(){e=S(`National Cycle Network
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function lu(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[nu]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from Sustrans about the "),w(n.$$.fragment),r=S(", downloaded on 22/01/2024."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){h(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Ll(o){let e,l,t,n=o[4].Desc_+"",r;return{c(){e=y("li"),l=S("Description: "),t=y("b"),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Desc_+"")&&A(r,n)},d(s){s&&d(e)}}}function Il(o){let e,l,t,n=o[4].Greenway+"",r;return{c(){e=y("li"),l=S("Is greenway: "),t=y("b"),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Greenway+"")&&A(r,n)},d(s){s&&d(e)}}}function Ol(o){let e,l,t,n=o[4].RouteType+"",r;return{c(){e=y("li"),l=S("Route type: "),t=y("b"),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteType+"")&&A(r,n)},d(s){s&&d(e)}}}function jl(o){let e,l,t,n=o[4].RouteNo+"",r;return{c(){e=y("li"),l=S("Route number: "),t=y("b"),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteNo+"")&&A(r,n)},d(s){s&&d(e)}}}function Ml(o){let e,l,t,n=o[4].RouteCat+"",r;return{c(){e=y("li"),l=S("Route Category: "),t=y("b"),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RouteCat+"")&&A(r,n)},d(s){s&&d(e)}}}function Nl(o){let e,l,t,n=o[4].OpenStatus+"",r;return{c(){e=y("li"),l=S("Open Status: "),t=y("b"),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].OpenStatus+"")&&A(r,n)},d(s){s&&d(e)}}}function Fl(o){let e,l,t,n=o[4].Surface+"",r;return{c(){e=y("li"),l=S("Surface: "),t=y("b"),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Surface+"")&&A(r,n)},d(s){s&&d(e)}}}function Rl(o){let e,l,t,n=o[4].Quality+"",r;return{c(){e=y("li"),l=S("Quality: "),t=y("b"),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].Quality+"")&&A(r,n)},d(s){s&&d(e)}}}function Pl(o){let e,l,t,n=o[4].RoadClass+"",r;return{c(){e=y("li"),l=S("Road Class: "),t=y("b"),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&16&&n!==(n=s[4].RoadClass+"")&&A(r,n)},d(s){s&&d(e)}}}function ru(o){let e,l,t,n,r,s,f,i,a,u=o[4].Desc_&&Ll(o),c=o[4].Greenway&&Il(o),$=o[4].RouteType&&Ol(o),g=o[4].RouteNo&&jl(o),k=o[4].RouteCat&&Ml(o),C=o[4].OpenStatus&&Nl(o),T=o[4].Surface&&Fl(o),I=o[4].Quality&&Rl(o),O=o[4].RoadClass&&Pl(o);return{c(){e=y("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),$&&$.c(),n=L(),g&&g.c(),r=L(),k&&k.c(),s=L(),C&&C.c(),f=L(),T&&T.c(),i=L(),I&&I.c(),a=L(),O&&O.c()},m(N,F){h(N,e,F),u&&u.m(e,null),p(e,l),c&&c.m(e,null),p(e,t),$&&$.m(e,null),p(e,n),g&&g.m(e,null),p(e,r),k&&k.m(e,null),p(e,s),C&&C.m(e,null),p(e,f),T&&T.m(e,null),p(e,i),I&&I.m(e,null),p(e,a),O&&O.m(e,null)},p(N,F){N[4].Desc_?u?u.p(N,F):(u=Ll(N),u.c(),u.m(e,l)):u&&(u.d(1),u=null),N[4].Greenway?c?c.p(N,F):(c=Il(N),c.c(),c.m(e,t)):c&&(c.d(1),c=null),N[4].RouteType?$?$.p(N,F):($=Ol(N),$.c(),$.m(e,n)):$&&($.d(1),$=null),N[4].RouteNo?g?g.p(N,F):(g=jl(N),g.c(),g.m(e,r)):g&&(g.d(1),g=null),N[4].RouteCat?k?k.p(N,F):(k=Ml(N),k.c(),k.m(e,s)):k&&(k.d(1),k=null),N[4].OpenStatus?C?C.p(N,F):(C=Nl(N),C.c(),C.m(e,f)):C&&(C.d(1),C=null),N[4].Surface?T?T.p(N,F):(T=Fl(N),T.c(),T.m(e,i)):T&&(T.d(1),T=null),N[4].Quality?I?I.p(N,F):(I=Rl(N),I.c(),I.m(e,a)):I&&(I.d(1),I=null),N[4].RoadClass?O?O.p(N,F):(O=Pl(N),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},d(N){N&&d(e),u&&u.d(),c&&c.d(),$&&$.d(),g&&g.d(),k&&k.d(),C&&C.d(),T&&T.d(),I&&I.d(),O&&O.d()}}}function ou(o){let e,l;return e=new ae({props:{$$slots:{default:[ru,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function su(o){let e,l;const t=[q(Ot),{sourceLayer:Ot},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":4,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[ou]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&ie(q(Ot)),s&0&&{sourceLayer:Ot},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function iu(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Ot,title:au,$$slots:{help:[lu],icon:[tu]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Ot}.pmtiles`,$$slots:{default:[su]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ot="national_cycle_network",au="National Cycle Network";function fu(o,e,l){let t,n=ne.national_cycle_network,r=pe(Ot);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class uu extends Z{constructor(e){super(),X(this,e,fu,iu,V,{})}}function Gl(o,e,l){const t=o.slice();return t[7]=e[l][0],t[8]=e[l][1],t[9]=e[l][2],t}function cu(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function $u(o){let e,l,t,n,r,s,f,i,a,u,c,$;return u=new oe({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[cu]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=y("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),s=y("p"),s.textContent="Data valid as of 1 January, 2024",f=L(),i=y("p"),a=S(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(u.$$.fragment),c=S("."),G(e,"slot","help")},m(g,k){h(g,e,k),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(e,f),p(e,i),p(i,a),b(u,i,null),p(i,c),$=!0},p(g,k){const C={};k&4096&&(C.$$scope={dirty:k,ctx:g}),u.$set(C)},i(g){$||(m(u.$$.fragment,g),$=!0)},o(g){_(u.$$.fragment,g),$=!1},d(g){g&&d(e),v(u)}}}function pu(o){let e,l,t;return l=new Qe({props:{colorScale:o[1],limits:o[3]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function mu(o){let e,l,t=vn(o[6].angle+o[9])+"",n;return{c(){e=y("p"),l=new Et(!1),n=S(` side of the road: no pavement
          `),l.a=n},m(r,s){h(r,e,s),l.m(t,e),p(e,n)},p(r,s){s&64&&t!==(t=vn(r[6].angle+r[9])+"")&&l.p(t)},d(r){r&&d(e)}}}function _u(o){let e,l,t=vn(o[6].angle+o[9])+"",n,r,s=o[7]+"",f,i,a,u=o[8]+"",c,$;return{c(){e=y("p"),l=new Et(!1),n=S(` side of the road:
            `),r=y("b"),f=S(s),i=S(`
            m average,
            `),a=y("b"),c=S(u),$=S(`
            m minimum
          `),l.a=n},m(g,k){h(g,e,k),l.m(t,e),p(e,n),p(e,r),p(r,f),p(e,i),p(e,a),p(a,c),p(e,$)},p(g,k){k&64&&t!==(t=vn(g[6].angle+g[9])+"")&&l.p(t),k&64&&s!==(s=g[7]+"")&&A(f,s),k&64&&u!==(u=g[8]+"")&&A(c,u)},d(g){g&&d(e)}}}function Dl(o){let e;function l(r,s){return r[7]?_u:mu}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),h(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function gu(o){let e,l=$e([[o[6].left_average,o[6].left_minimum,-90],[o[6].right_average,o[6].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Dl(Gl(o,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=ve()},m(n,r){for(let s=0;s<2;s+=1)t[s]&&t[s].m(n,r);h(n,e,r)},p(n,r){if(r&64){l=$e([[n[6].left_average,n[6].left_minimum,-90],[n[6].right_average,n[6].right_minimum,90]]);let s;for(s=0;s<2;s+=1){const f=Gl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Dl(f),t[s].c(),t[s].m(e.parentNode,e))}for(;s<2;s+=1)t[s].d(1)}},d(n){n&&d(e),Ae(t,n)}}}function hu(o){let e,l;return e=new ae({props:{openOn:"hover",$$slots:{default:[gu,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&4160&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function du(o){let e,l;const t=[q(jt),{sourceLayer:jt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],o[2],o[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[hu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&ie(q(jt)),s&0&&{sourceLayer:jt},t[2],t[3],s&6&&{paint:{"line-color":ke(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&4096&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function wu(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:jt,title:bu,$$slots:{controls:[pu],help:[$u]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${en()}/v1/${jt}.pmtiles`,$$slots:{default:[du]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&4096&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let jt="pavement_widths",bu="OS Pavement widths";function vu(o){let e=Math.floor((o+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function vn(o){return`${vu(o)} <span style="display: inline-block; rotate: ${o}deg">⬆</span>`}function ku(o,e,l){let t,n=["black","red","orange","green"],r=[0,1.5,2,3,100],s=["0-1.5m","1.5-2m","2-3m",">3m"],f=pe(jt);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class yu extends Z{constructor(e){super(),X(this,e,ku,wu,V,{})}}function Su(o){let e;return{c(){e=S("the PCT website")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Tu(o){let e;return{c(){e=S("2017 journal article")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Cu(o){let e,l,t,n,r,s,f,i,a,u,c,$;return i=new oe({props:{href:"https://www.pct.bike",$$slots:{default:[Su]},$$scope:{ctx:o}}}),u=new oe({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Tu]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=y("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),s=y("p"),f=S("See "),w(i.$$.fragment),a=S(" and "),w(u.$$.fragment),c=S(" for details on methodology and data sources."),G(e,"slot","help")},m(g,k){h(g,e,k),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),b(i,s,null),p(s,a),b(u,s,null),p(s,c),$=!0},p(g,k){const C={};k&1024&&(C.$$scope={dirty:k,ctx:g}),i.$set(C);const T={};k&1024&&(T.$$scope={dirty:k,ctx:g}),u.$set(T)},i(g){$||(m(i.$$.fragment,g),m(u.$$.fragment,g),$=!0)},o(g){_(i.$$.fragment,g),_(u.$$.fragment,g),$=!1},d(g){g&&d(e),v(i),v(u)}}}function Lu(o){let e,l,t,n,r,s,f,i,a;l=new Qe({props:{colorScale:o[1],limits:o[2]}});function u(k){o[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};o[0].tripPurpose!==void 0&&(c.value=o[0].tripPurpose),n=new Hn({props:c}),z.push(()=>U(n,"value",u));function $(k){o[6](k)}let g={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return o[0].scenario!==void 0&&(g.value=o[0].scenario),f=new $t({props:g}),z.push(()=>U(f,"value",$)),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(k,C){h(k,e,C),b(l,e,null),p(e,t),b(n,e,null),p(e,s),b(f,e,null),a=!0},p(k,C){const T={};!r&&C&1&&(r=!0,T.value=k[0].tripPurpose,E(()=>r=!1)),n.$set(T);const I={};!i&&C&1&&(i=!0,I.value=k[0].scenario,E(()=>i=!1)),f.$set(I)},i(k){a||(m(l.$$.fragment,k),m(n.$$.fragment,k),m(f.$$.fragment,k),a=!0)},o(k){_(l.$$.fragment,k),_(n.$$.fragment,k),_(f.$$.fragment,k),a=!1},d(k){k&&d(e),v(l),v(n),v(f)}}}function Iu(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Et(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),h(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(d(t),e.d())}}}function Ou(o){let e,l;return e=new ae({props:{$$slots:{default:[Iu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ju(o){let e,l;const t=[q(it),{sourceLayer:it},{paint:{"line-color":ke(["get",o[0].scenario],o[2],o[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==it?"visible":"none"}}];let n={$$slots:{default:[Ou]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&ie(q(it)),s&0&&{sourceLayer:it},s&7&&{paint:{"line-color":ke(["get",r[0].scenario],r[2],r[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==it?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Mu(o){let e,l=o[4](o[9])+"",t;return{c(){e=new Et(!1),t=ve(),e.a=t},m(n,r){e.m(l,n,r),h(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(d(t),e.d())}}}function Nu(o){let e,l;return e=new ae({props:{$$slots:{default:[Mu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Fu(o){let e,l;const t=[q(bt),{sourceLayer:bt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",o[0].scenario],o[2],o[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show&&o[0].tripPurpose==bt?"visible":"none"}}];let n={$$slots:{default:[Nu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&ie(q(bt)),s&0&&{sourceLayer:bt},t[2],t[3],s&7&&{paint:{"line-color":ke(["get",r[0].scenario],r[2],r[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==bt?"visible":"none"}}]):{};s&1024&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ru(o){let e,l,t,n,r,s,f;function i(u){o[7](u)}let a={name:to,title:Pu,$$slots:{controls:[Lu],help:[Cu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(a.show=o[0].show),e=new ue({props:a}),z.push(()=>U(e,"show",i)),n=new me({props:{url:`pmtiles://${_e()}/v1/${it}.pmtiles`,$$slots:{default:[ju]},$$scope:{ctx:o}}}),s=new me({props:{url:`pmtiles://${_e()}/v1/${bt}.pmtiles`,$$slots:{default:[Fu]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(u,c){b(e,u,c),h(u,t,c),b(n,u,c),h(u,r,c),b(s,u,c),f=!0},p(u,[c]){const $={};c&1025&&($.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,$.show=u[0].show,E(()=>l=!1)),e.$set($);const g={};c&1025&&(g.$$scope={dirty:c,ctx:u}),n.$set(g);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),s.$set(k)},i(u){f||(m(e.$$.fragment,u),m(n.$$.fragment,u),m(s.$$.fragment,u),f=!0)},o(u){_(e.$$.fragment,u),_(n.$$.fragment,u),_(s.$$.fragment,u),f=!1},d(u){u&&(d(t),d(r)),v(e,u),v(n,u),v(s,u)}}}let to="pct",it="pct_commute",bt="pct_school",Pu="Propensity to Cycle Tool";function Gu(o){return o.show?`${o.tripPurpose}/${o.scenario}`:null}function Du(o){let[e,l]=o.split("/");return{show:!0,tripPurpose:e,scenario:l}}function Au(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=Vt(to,{show:!1,tripPurpose:it,scenario:"baseline"},Gu,Du);Y(o,f,$=>l(0,t=$));function i($){let g=$.baseline,k=$.gov_target,C=$.go_dutch,T=`<h2>Trip purpose: ${t.tripPurpose==it?"commuting":"school"}</h2>`;if(T+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)T+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,T+=`<p>Go Dutch: <b>${C.toLocaleString()}</b></p>`;else{let I=(k/g).toFixed(1),O=(C/g).toFixed(1);T+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${I}x</b> of baseline)</p>`,T+=`<p>Go Dutch: ${C.toLocaleString()} (<b>${O}x</b> of baseline)</p>`}return T}function a($){o.$$.not_equal(t.tripPurpose,$)&&(t.tripPurpose=$,f.set(t))}function u($){o.$$.not_equal(t.scenario,$)&&(t.scenario=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,n,r,f,i,a,u,c]}class qu extends Z{constructor(e){super(),X(this,e,Au,Ru,V,{})}}function Al(o,e,l){const t=o.slice();return t[10]=e[l][0],t[11]=e[l][1],t[12]=e[l][2],t[13]=e,t[14]=l,t}function Hu(o){let e;return{c(){e=S(`rowmaps.com
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function zu(o){let e,l,t,n,r,s,f,i,a,u;return n=new oe({props:{href:"https://www.rowmaps.com",$$slots:{default:[Hu]},$$scope:{ctx:o}}}),a=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("These public rights of way are aggregated from 137 authorities, thanks to "),w(n.$$.fragment),r=S(`. The licenses for each authority may vary, but most use
      the Open Government License v3 or Creative Commons.`),s=L(),f=y("p"),f.textContent="This data is current as of 15 November, 2024.",i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,$){h(c,e,$),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(e,i),b(a,e,null),u=!0},p(c,$){const g={};$&32768&&(g.$$scope={dirty:$,ctx:c}),n.$set(g)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(a)}}}function Bu(o){let e,l,t=o[11]+"",n,r,s;return e=new Le({props:{color:o[12]}}),{c(){w(e.$$.fragment),l=L(),n=S(t),r=L()},m(f,i){b(e,f,i),h(f,l,i),h(f,n,i),h(f,r,i),s=!0},p:Q,i(f){s||(m(e.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n),d(r)),v(e,f)}}}function ql(o){let e,l,t;function n(s){o[4](s,o[10])}let r={$$slots:{default:[Bu]},$$scope:{ctx:o}};return o[0][o[10]]!==void 0&&(r.checked=o[0][o[10]]),e=new We({props:r}),z.push(()=>U(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f&32768&&(i.$$scope={dirty:f,ctx:o}),!l&&f&5&&(l=!0,i.checked=o[0][o[10]],E(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Uu(o){let e,l,t=$e(o[2]),n=[];for(let s=0;s<t.length;s+=1)n[s]=ql(Al(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);h(s,e,f),l=!0},p(s,f){if(f&5){t=$e(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Al(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=ql(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(we(),i=t.length;i<n.length;i+=1)r(i);be()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),Ae(n,s)}}}function Eu(o){let e,l,t;return l=new Be({props:{small:!0,$$slots:{default:[Uu]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&32769&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Wu(o){let e,l=o[9].kind+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&512&&l!==(l=n[9].kind+"")&&A(t,l)},d(n){n&&d(e)}}}function Yu(o){let e,l;return e=new ae({props:{$$slots:{default:[Wu,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&33280&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ju(o){let e,l;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":je(["get","kind"],{footpath:ne.rights_of_way.footpath,bridleway:ne.rights_of_way.bridleway,"restricted byway":ne.rights_of_way.restricted_byway,"byway open to all traffic":ne.rights_of_way.boat},"red"),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[3](o[0])}];let n={$$slots:{default:[Yu]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?te(t,[s&0&&ie(q(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],t[4],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&9&&{filter:r[3](r[0])}]):{};s&32768&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Qu(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Mt,title:Vu,$$slots:{controls:[Eu],help:[zu]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Mt}.pmtiles`,$$slots:{default:[Ju]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32769&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,E(()=>l=!1)),e.$set(u);const c={};a&32769&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Mt="rights_of_way",Vu="Rights of Way";function Ku(o){return{show:!0,footpath:o.includes("footpath"),bridleway:o.includes("bridleway"),restricted_byway:o.includes("restricted_byway"),boat:o.includes("boat")}}function Zu(o,e,l){let t,n=["footpath","bridleway","restricted_byway","boat"],r={show:!1,footpath:!0,bridleway:!0,restricted_byway:!0,boat:!0};function s($){return $.show?n.filter(g=>$[g]).join(","):null}let f=Vt(Mt,r,s,Ku);Y(o,f,$=>l(0,t=$));let i=[["footpath","Footpath",ne.rights_of_way.footpath],["bridleway","Bridleway",ne.rights_of_way.bridleway],["restricted_byway","Restricted byway",ne.rights_of_way.restricted_byway],["boat","Byway open to all traffic",ne.rights_of_way.boat]];function a($){let g=n.filter(k=>$[k]).map(k=>({footpath:"footpath",bridleway:"bridleway",restricted_byway:"restricted byway",boat:"byway open to all traffic"})[k]);return["in",["get","kind"],["literal",g]]}function u($,g){o.$$.not_equal(t[g],$)&&(t[g]=$,f.set(t))}function c($){o.$$.not_equal(t.show,$)&&(t.show=$,f.set(t))}return[t,f,i,a,u,c]}class Xu extends Z{constructor(e){super(),X(this,e,Zu,Qu,V,{})}}function xu(o){let e;return{c(){e=S("Basemap")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function ec(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function tc(o){let e,l,t,n,r,s,f,i,a,u,c,$,g;return n=new oe({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[xu]},$$scope:{ctx:o}}}),c=new oe({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ec]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),t=S("The average speed data is collected over a six-month period by "),w(n.$$.fragment),r=S(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),s=L(),f=y("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=y("p"),u=S(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(c.$$.fragment),$=S("."),G(e,"slot","help")},m(k,C){h(k,e,C),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(e,i),p(e,a),p(a,u),b(c,a,null),p(a,$),g=!0},p(k,C){const T={};C&512&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const I={};C&512&&(I.$$scope={dirty:C,ctx:k}),c.$set(I)},i(k){g||(m(n.$$.fragment,k),m(c.$$.fragment,k),g=!0)},o(k){_(n.$$.fragment,k),_(c.$$.fragment,k),g=!1},d(k){k&&d(e),v(n),v(c)}}}function nc(o){let e,l,t,n,r,s;l=new Qe({props:{colorScale:o[1],limits:o[2]}});function f(a){o[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return o[0].kind!==void 0&&(i.value=o[0].kind),n=new Hn({props:i}),z.push(()=>U(n,"value",f)),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(a,u){h(a,e,u),b(l,e,null),p(e,t),b(n,e,null),s=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,E(()=>r=!1)),n.$set(c)},i(a){s||(m(l.$$.fragment,a),m(n.$$.fragment,a),s=!0)},o(a){_(l.$$.fragment,a),_(n.$$.fragment,a),s=!1},d(a){a&&d(e),v(l),v(n)}}}function lc(o){let e,l,t=o[8].indicative_mph+"",n,r,s,f,i,a=o[8].highest_mph+"",u,c,$=o[4][o[8].highest_description]+"",g,k;return{c(){e=y("p"),l=S("Posted speed limit: "),n=S(t),r=S(" mph"),s=L(),f=y("p"),i=S("Highest average speed: "),u=S(a),c=S(" mph (during "),g=S($),k=S(")")},m(C,T){h(C,e,T),p(e,l),p(e,n),p(e,r),h(C,s,T),h(C,f,T),p(f,i),p(f,u),p(f,c),p(f,g),p(f,k)},p(C,T){T&256&&t!==(t=C[8].indicative_mph+"")&&A(n,t),T&256&&a!==(a=C[8].highest_mph+"")&&A(u,a),T&256&&$!==($=C[4][C[8].highest_description]+"")&&A(g,$)},d(C){C&&(d(e),d(s),d(f))}}}function rc(o){let e,l;return e=new ae({props:{$$slots:{default:[lc,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function oc(o){let e,l;const t=[q(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get",o[0].kind],o[2],o[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0].show?"visible":"none"}}];let n={$$slots:{default:[rc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&ie(q(Nt)),s&0&&{sourceLayer:Nt},t[2],t[3],s&7&&{paint:{"line-color":ke(["get",r[0].kind],r[2],r[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function sc(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:Nt,title:ic,$$slots:{controls:[nc],help:[tc]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${en()}/v1/${Nt}.pmtiles`,$$slots:{default:[oc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,E(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Nt="road_speeds",ic="OS Speeds";function ac(o){return o.show?o.kind:null}function fc(o){return{show:!0,kind:o}}function uc(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,20,30,40,50,90],f=Vt(Nt,{show:!1,kind:"indicative_mph"},ac,fc);Y(o,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){o.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){o.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class cc extends Z{constructor(e){super(),X(this,e,uc,sc,V,{})}}function $c(o){let e;return{c(){e=S(`Public Sector Geospatial Agreement
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function pc(o){let e,l,t,n,r,s,f,i,a,u;return i=new oe({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[$c]},$$scope:{ctx:o}}}),{c(){e=y("span"),l=y("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=y("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),s=y("p"),f=S(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),w(i.$$.fragment),a=S("."),G(e,"slot","help")},m(c,$){h(c,e,$),p(e,l),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),b(i,s,null),p(s,a),u=!0},p(c,$){const g={};$&64&&(g.$$scope={dirty:$,ctx:c}),i.$set(g)},i(c){u||(m(i.$$.fragment,c),u=!0)},o(c){_(i.$$.fragment,c),u=!1},d(c){c&&d(e),v(i)}}}function mc(o){let e,l,t;return l=new Qe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function _c(o){let e,l,t,n=o[5].average+"",r,s,f,i,a,u,c=o[5].minimum+"",$,g;return{c(){e=y("p"),l=S("Average width: "),t=y("b"),r=S(n),s=S(`
        meters`),f=L(),i=y("p"),a=S("Minimum width: "),u=y("b"),$=S(c),g=S(`
        meters`)},m(k,C){h(k,e,C),p(e,l),p(e,t),p(t,r),p(e,s),h(k,f,C),h(k,i,C),p(i,a),p(i,u),p(u,$),p(i,g)},p(k,C){C&32&&n!==(n=k[5].average+"")&&A(r,n),C&32&&c!==(c=k[5].minimum+"")&&A($,c)},d(k){k&&(d(e),d(f),d(i))}}}function gc(o){let e,l;return e=new ae({props:{$$slots:{default:[_c,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function hc(o){let e,l;const t=[q(Ft),{sourceLayer:Ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":ke(["get","average"],o[2],o[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[gc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&ie(q(Ft)),s&0&&{sourceLayer:Ft},t[2],t[3],s&6&&{paint:{"line-color":ke(["get","average"],r[2],r[1]),"line-width":Ue,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function dc(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Ft,title:wc,$$slots:{controls:[mc],help:[pc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${en()}/v1/${Ft}.pmtiles`,$$slots:{default:[hc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ft="road_widths",wc="OS Road widths";function bc(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,5,10,15,20,100],s=pe(Ft);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class vc extends Z{constructor(e){super(),X(this,e,bc,dc,V,{})}}function kc(o){let e,l,t;return l=new Le({props:{color:o[1]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function yc(o){let e;return{c(){e=S(`OS Open Roads
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Sc(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[yc]},$$scope:{ctx:o}}}),f=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from "),w(n.$$.fragment),r=S(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){h(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Tc(o){let e,l=(o[4].name??"Unknown SRN road")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&A(t,l)},d(n){n&&d(e)}}}function Cc(o){let e,l;return e=new ae({props:{$$slots:{default:[Tc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Lc(o){let e,l;const t=[q(Rt),{sourceLayer:Rt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[1],"line-width":7,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[Cc]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&3?te(t,[s&0&&ie(q(Rt)),s&0&&{sourceLayer:Rt},t[2],t[3],s&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":ee(1,.5)}},s&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};s&32&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Ic(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Rt,title:Oc,$$slots:{help:[Sc],icon:[kc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Rt}.pmtiles`,$$slots:{default:[Lc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Rt="srn",Oc="Strategic Road Network";function jc(o,e,l){let t,n=ne.srn,r=pe(Rt);Y(o,r,f=>l(0,t=f));function s(f){t=f,r.set(t)}return[t,n,r,s]}class Mc extends Z{constructor(e){super(),X(this,e,jc,Ic,V,{})}}function Nc(o){let e,l,t;return l=new Le({props:{color:ne.trams}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function Fc(o){let e,l,t,n,r;return n=new tt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 20 October 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),w(n.$$.fragment),G(e,"slot","help")},m(s,f){h(s,e,f),p(e,l),p(e,t),b(n,e,null),r=!0},p:Q,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function Rc(o){let e,l;const t=[q(Pt),{sourceLayer:Pt},{paint:{"line-color":ne.trams,"line-width":5,"line-opacity":ee(1,.5)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new ge({props:n}),e.$on("click",Dc),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&ie(q(Pt)),s&0&&{sourceLayer:Pt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Pc(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Pt,title:Gc,$$slots:{help:[Fc],icon:[Nc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Pt}.pmtiles`,$$slots:{default:[Rc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Pt="trams",Gc="Trams";function Dc(o){window.open(`http://openstreetmap.org/way/${o.detail.features[0].properties.osm_id}`,"_blank")}function Ac(o,e,l){let t,n=pe(Pt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class qc extends Z{constructor(e){super(),X(this,e,Ac,Pc,V,{})}}function Hc(o){let e;return{c(){e=S(`Bus Open Data Service
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function zc(o){let e,l,t,n,r,s,f,i,a,u;return n=new oe({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Hc]},$$scope:{ctx:o}}}),a=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("Data from the "),w(n.$$.fragment),r=S(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),s=L(),f=y("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,$){h(c,e,$),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(e,i),b(a,e,null),u=!0},p(c,$){const g={};$&64&&(g.$$scope={dirty:$,ctx:c}),n.$set(g)},i(c){u||(m(n.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(a)}}}function Bc(o){let e,l,t,n,r;return n=new Qe({props:{colorScale:o[1],limits:o[2]}}),{c(){e=y("div"),l=y("p"),l.textContent="Peak hourly frequency:",t=L(),w(n.$$.fragment),G(e,"slot","controls")},m(s,f){h(s,e,f),p(e,l),p(e,t),b(n,e,null),r=!0},p:Q,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function Uc(o){let e,l,t,n=o[5].stop_name+"",r,s,f,i,a,u=o[5].peak+"",c,$,g,k,C,T=o[5].peak_description+"",I,O,N,F,M,j=o[5].total+"",H,P,R=o[5].total_description+"",W,ce;return{c(){e=y("p"),l=S("Stop name: "),t=y("b"),r=S(n),s=L(),f=y("p"),i=S("Peak: "),a=y("b"),c=S(u),$=S(`
        buses during the busiest hour of any day`),g=L(),k=y("p"),C=S("The peak hour is "),I=S(T),O=L(),N=y("p"),F=S("Total buses per day: "),M=y("b"),H=S(j),P=S(`
        (for `),W=S(R),ce=S(", the busiest day of the week)")},m(D,K){h(D,e,K),p(e,l),p(e,t),p(t,r),h(D,s,K),h(D,f,K),p(f,i),p(f,a),p(a,c),p(f,$),h(D,g,K),h(D,k,K),p(k,C),p(k,I),h(D,O,K),h(D,N,K),p(N,F),p(N,M),p(M,H),p(N,P),p(N,W),p(N,ce)},p(D,K){K&32&&n!==(n=D[5].stop_name+"")&&A(r,n),K&32&&u!==(u=D[5].peak+"")&&A(c,u),K&32&&T!==(T=D[5].peak_description+"")&&A(I,T),K&32&&j!==(j=D[5].total+"")&&A(H,j),K&32&&R!==(R=D[5].total_description+"")&&A(W,R)},d(D){D&&(d(e),d(s),d(f),d(g),d(k),d(O),d(N))}}}function Ec(o){let e,l;return e=new ae({props:{$$slots:{default:[Uc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Wc(o){let e,l;const t=[q(Gt),{sourceLayer:Gt},{paint:{"circle-color":ke(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ec]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new pt({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&ie(q(Gt)),s&0&&{sourceLayer:Gt},s&6&&{paint:{"circle-color":ke(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Yc(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:Gt,title:Jc,$$slots:{controls:[Bc],help:[zc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Gt}.pmtiles`,$$slots:{default:[Wc]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Gt="bus_stops",Jc="Bus stops";function Qc(o,e,l){let t,n=ne.sequential_low_to_high,r=[0,3,10,20,30,100],s=pe(Gt);Y(o,s,i=>l(0,t=i));function f(i){t=i,s.set(t)}return[t,n,r,s,f]}class Vc extends Z{constructor(e){super(),X(this,e,Qc,Yc,V,{})}}function Kc(o){let e;return{c(){e=S("crossing")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Zc(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Kc]},$$scope:{ctx:o}}}),f=new tt({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),w(n.$$.fragment),r=S(" data from OpenStreetMap (as of 5 January 2025)."),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){h(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function Xc(o){let e,l,t;return l=new ot({props:{rows:o[2]}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function xc(o){let e,l=(o[4].class||"Unknown")+"",t,n;return{c(){e=y("p"),t=S(l),n=S(" crossing")},m(r,s){h(r,e,s),p(e,t),p(e,n)},p(r,s){s&16&&l!==(l=(r[4].class||"Unknown")+"")&&A(t,l)},d(r){r&&d(e)}}}function e$(o){let e,l;return e=new ae({props:{$$slots:{default:[xc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function t$(o){let e,l=(o[4].class||"Unknown")+"",t,n;return{c(){e=y("p"),t=S(l),n=S(" crossing")},m(r,s){h(r,e,s),p(e,t),p(e,n)},p(r,s){s&16&&l!==(l=(r[4].class||"Unknown")+"")&&A(t,l)},d(r){r&&d(e)}}}function n$(o){let e,l;return e=new ae({props:{$$slots:{default:[t$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function l$(o){let e,l,t,n;const r=[q("crossings-lines"),{sourceLayer:Dt},{filter:Rn},{paint:{"line-color":je(["get","class"],Object.fromEntries(o[2]),"red"),"line-width":3}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let s={$$slots:{default:[e$]},$$scope:{ctx:o}};for(let a=0;a<r.length;a+=1)s=x(s,r[a]);e=new ge({props:s}),e.$on("click",Hl);const f=[q("crossings-points"),{sourceLayer:Dt},{filter:Pn},{paint:{"circle-color":je(["get","class"],Object.fromEntries(o[2]),"red"),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let i={$$slots:{default:[n$]},$$scope:{ctx:o}};for(let a=0;a<f.length;a+=1)i=x(i,f[a]);return t=new pt({props:i}),t.$on("click",Hl),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(a,u){b(e,a,u),h(a,l,u),b(t,a,u),n=!0},p(a,u){const c=u&5?te(r,[r[0],u&0&&{sourceLayer:Dt},r[2],u&4&&{paint:{"line-color":je(["get","class"],Object.fromEntries(a[2]),"red"),"line-width":3}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const $=u&5?te(f,[f[0],u&0&&{sourceLayer:Dt},f[2],u&4&&{paint:{"circle-color":je(["get","class"],Object.fromEntries(a[2]),"red"),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},f[5],f[6]]):{};u&32&&($.$$scope={dirty:u,ctx:a}),t.$set($)},i(a){n||(m(e.$$.fragment,a),m(t.$$.fragment,a),n=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),n=!1},d(a){a&&d(l),v(e,a),v(t,a)}}}function r$(o){let e,l,t,n,r;function s(i){o[3](i)}let f={name:Dt,title:o$,$$slots:{controls:[Xc],help:[Zc]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Dt}.pmtiles`,$$slots:{default:[l$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Dt="crossings",o$="Crossings";function Hl(o){window.open(`https://www.openstreetmap.org/${o.detail.features[0].properties.osm}`,"_blank")}function s$(o,e,l){let t,n=pe(Dt);Y(o,n,f=>l(0,t=f));let r=[["Zebra","#66C5CC"],["Parallel","#F6CF71"],["Pelican","#F89C74"],["Puffin","#DCB0F2"],["Toucan","#87C55F"],["Pegasus","#9EB9F3"],["Uncontrolled","#FE88B1"],["Signalised","#C9DB74"],["Unknown","red"]];function s(f){t=f,n.set(t)}return[t,n,r,s]}class i$ extends Z{constructor(e){super(),X(this,e,s$,r$,V,{})}}function a$(o){let e,l;return{c(){e=y("img"),G(e,"slot","icon"),qn(e.src,l=Po)||G(e,"src",l),G(e,"alt","a logo representing cycle parking")},m(t,n){h(t,e,n)},p:Q,d(t){t&&d(e)}}}function f$(o){let e;return{c(){e=S("OpenStreetMap")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function u$(o){let e;return{c(){e=S("OpenStreetMap Carto")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function c$(o){let e,l,t,n,r,s,f,i,a,u,c,$;return n=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[f$]},$$scope:{ctx:o}}}),a=new oe({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[u$]},$$scope:{ctx:o}}}),c=new tt({}),{c(){e=y("span"),l=y("p"),t=S("Cycle parking, according to "),w(n.$$.fragment),r=S(` (as of 20 October 2024). The type of parking, public/private
      access, and whether it's covered are not shown.`),s=L(),f=y("p"),i=S("Icon from "),w(a.$$.fragment),u=L(),w(c.$$.fragment),G(e,"slot","help")},m(g,k){h(g,e,k),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(f,i),b(a,f,null),p(e,u),b(c,e,null),$=!0},p(g,k){const C={};k&16&&(C.$$scope={dirty:k,ctx:g}),n.$set(C);const T={};k&16&&(T.$$scope={dirty:k,ctx:g}),a.$set(T)},i(g){$||(m(n.$$.fragment,g),m(a.$$.fragment,g),m(c.$$.fragment,g),$=!0)},o(g){_(n.$$.fragment,g),_(a.$$.fragment,g),_(c.$$.fragment,g),$=!1},d(g){g&&d(e),v(n),v(a),v(c)}}}function $$(o){let e,l,t,n=(o[3].capacity??"unknown")+"",r;return{c(){e=y("p"),l=S("Capacity: "),t=y("b"),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&8&&n!==(n=(s[3].capacity??"unknown")+"")&&A(r,n)},d(s){s&&d(e)}}}function p$(o){let e,l;return e=new ae({props:{$$slots:{default:[$$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function m$(o){let e,l;const t=[q(At),{sourceLayer:At},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[p$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new zn({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&ie(q(At)),s&0&&{sourceLayer:At},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function _$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:At,title:g$,$$slots:{help:[c$],icon:[a$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${At}.pmtiles`,$$slots:{default:[m$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let At="cycle_parking",g$="Cycle parking";function h$(o,e,l){let t,n=pe(At);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class d$ extends Z{constructor(e){super(),X(this,e,h$,_$,V,{})}}function w$(o){let e,l,t,n,r;return n=new tt({}),{c(){e=y("span"),l=y("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      20 October 2024).`,t=L(),w(n.$$.fragment),G(e,"slot","help")},m(s,f){h(s,e,f),p(e,l),p(e,t),b(n,e,null),r=!0},p:Q,i(s){r||(m(n.$$.fragment,s),r=!0)},o(s){_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(n)}}}function b$(o){let e,l,t;return e=new Le({props:{color:ne.education.schools}}),{c(){w(e.$$.fragment),l=S(`
        Schools`)},m(n,r){b(e,n,r),h(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function v$(o){let e,l,t;return e=new Le({props:{color:ne.education.colleges}}),{c(){w(e.$$.fragment),l=S(`
        Colleges`)},m(n,r){b(e,n,r),h(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function k$(o){let e,l,t;return e=new Le({props:{color:ne.education.universities}}),{c(){w(e.$$.fragment),l=S(`
        Universities`)},m(n,r){b(e,n,r),h(n,l,r),t=!0},p:Q,i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){_(e.$$.fragment,n),t=!1},d(n){n&&d(l),v(e,n)}}}function y$(o){let e,l,t,n,r,s,f,i,a;function u(T){o[3](T)}let c={$$slots:{default:[b$]},$$scope:{ctx:o}};o[0].school!==void 0&&(c.checked=o[0].school),e=new We({props:c}),z.push(()=>U(e,"checked",u));function $(T){o[4](T)}let g={$$slots:{default:[v$]},$$scope:{ctx:o}};o[0].college!==void 0&&(g.checked=o[0].college),n=new We({props:g}),z.push(()=>U(n,"checked",$));function k(T){o[5](T)}let C={$$slots:{default:[k$]},$$scope:{ctx:o}};return o[0].university!==void 0&&(C.checked=o[0].university),f=new We({props:C}),z.push(()=>U(f,"checked",k)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment)},m(T,I){b(e,T,I),h(T,t,I),b(n,T,I),h(T,s,I),b(f,T,I),a=!0},p(T,I){const O={};I&2048&&(O.$$scope={dirty:I,ctx:T}),!l&&I&1&&(l=!0,O.checked=T[0].school,E(()=>l=!1)),e.$set(O);const N={};I&2048&&(N.$$scope={dirty:I,ctx:T}),!r&&I&1&&(r=!0,N.checked=T[0].college,E(()=>r=!1)),n.$set(N);const F={};I&2048&&(F.$$scope={dirty:I,ctx:T}),!i&&I&1&&(i=!0,F.checked=T[0].university,E(()=>i=!1)),f.$set(F)},i(T){a||(m(e.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),a=!0)},o(T){_(e.$$.fragment,T),_(n.$$.fragment,T),_(f.$$.fragment,T),a=!1},d(T){T&&(d(t),d(s)),v(e,T),v(n,T),v(f,T)}}}function S$(o){let e,l,t;return l=new Be({props:{small:!0,$$slots:{default:[y$]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&2049&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function T$(o){let e,l=(o[10].name??"Unnamed institution")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&A(t,l)},d(n){n&&d(e)}}}function C$(o){let e,l;return e=new ae({props:{$$slots:{default:[T$,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function L$(o){let e,l;const t=[q(qt),{sourceLayer:qt},{paint:{"fill-color":je(["get","type"],{school:ne.education.schools,college:ne.education.colleges,university:ne.education.universities},"grey"),"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0].show?"visible":"none"}},{filter:o[2](o[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[C$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new qe({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&5?te(t,[s&0&&ie(q(qt)),s&0&&{sourceLayer:qt},t[2],s&1&&{layout:{visibility:r[0].show?"visible":"none"}},s&5&&{filter:r[2](r[0])},t[5],t[6]]):{};s&2048&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function I$(o){let e,l,t,n,r;function s(i){o[6](i)}let f={name:qt,title:O$,$$slots:{controls:[S$],help:[w$]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${qt}.pmtiles`,$$slots:{default:[L$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,E(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let qt="education",O$="Education";function j$(o){return{show:!0,school:o.includes("school"),college:o.includes("college"),university:o.includes("university")}}function M$(o,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function s(g){return g.show?n.filter(k=>g[k]).join(","):null}let f=Vt(qt,r,s,j$);Y(o,f,g=>l(0,t=g));function i(g){let k=n.filter(C=>g[C]);return["in",["get","type"],["literal",k]]}function a(g){o.$$.not_equal(t.school,g)&&(t.school=g,f.set(t))}function u(g){o.$$.not_equal(t.college,g)&&(t.college=g,f.set(t))}function c(g){o.$$.not_equal(t.university,g)&&(t.university=g,f.set(t))}function $(g){o.$$.not_equal(t.show,g)&&(t.show=g,f.set(t))}return[t,f,i,a,u,c,$]}class N$ extends Z{constructor(e){super(),X(this,e,M$,I$,V,{})}}function F$(o){let e,l,t;return l=new Le({props:{color:ne.hospitals}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function R$(o){let e;return{c(){e=S("hospital")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function P$(o){let e,l,t,n,r,s,f,i;return n=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[R$]},$$scope:{ctx:o}}}),f=new tt({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),w(n.$$.fragment),r=S(` data from OpenStreetMap (as of 20 October 2024). It doesn't
      include outpatient clinics or individual doctor's offices.`),s=L(),w(f.$$.fragment),G(e,"slot","help")},m(a,u){h(a,e,u),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),b(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||(m(n.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(n.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&d(e),v(n),v(f)}}}function G$(o){let e,l=(o[3].name??"Unnamed hospital")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&A(t,l)},d(n){n&&d(e)}}}function D$(o){let e,l;return e=new ae({props:{$$slots:{default:[G$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function A$(o){let e,l;const t=[q(Ht),{sourceLayer:Ht},{paint:{"fill-color":ne.hospitals,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[D$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new qe({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&ie(q(Ht)),s&0&&{sourceLayer:Ht},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function q$(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:Ht,title:H$,$$slots:{help:[P$],icon:[F$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Ht}.pmtiles`,$$slots:{default:[A$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ht="hospitals",H$="Hospitals";function z$(o,e,l){let t,n=pe(Ht);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class B$ extends Z{constructor(e){super(),X(this,e,z$,q$,V,{})}}function zl(o,e,l){const t=o.slice();return t[6]=e[l],t}function U$(o){let e;return{c(){e=y("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,G(e,"slot","help")},m(l,t){h(l,e,t)},p:Q,d(l){l&&d(e)}}}function E$(o){let e,l,t;return l=new ot({props:{rows:o[3]}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function W$(o){let e,l=o[5]["Issue ID"]+"",t,n,r=o[5].Code+"",s,f,i,a=o[5]["Issue Stage"]+"",u;return{c(){e=y("h2"),t=S(l),n=S(" - "),s=S(r),f=L(),i=y("p"),u=S(a)},m(c,$){h(c,e,$),p(e,t),p(e,n),p(e,s),h(c,f,$),h(c,i,$),p(i,u)},p(c,$){$&32&&l!==(l=c[5]["Issue ID"]+"")&&A(t,l),$&32&&r!==(r=c[5].Code+"")&&A(s,r),$&32&&a!==(a=c[5]["Issue Stage"]+"")&&A(u,a)},d(c){c&&(d(e),d(f),d(i))}}}function Bl(o){let e,l=o[6]+"",t,n,r,s=o[5][o[6]]+"",f,i;return{c(){e=y("p"),t=S(l),n=S(`:
            `),r=y("b"),f=S(s),i=L()},m(a,u){h(a,e,u),p(e,t),p(e,n),p(e,r),p(r,f),p(e,i)},p(a,u){u&32&&s!==(s=a[5][a[6]]+"")&&A(f,s)},d(a){a&&d(e)}}}function Y$(o){let e,l=$e(o[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Bl(zl(o,l,n));return{c(){e=y("div");for(let n=0;n<t.length;n+=1)t[n].c();re(e,"max-width","30vw"),re(e,"max-height","60vh"),re(e,"overflow","auto")},m(n,r){h(n,e,r);for(let s=0;s<t.length;s+=1)t[s]&&t[s].m(e,null)},p(n,r){if(r&36){l=$e(n[2]);let s;for(s=0;s<l.length;s+=1){const f=zl(n,l,s);t[s]?t[s].p(f,r):(t[s]=Bl(f),t[s].c(),t[s].m(e,null))}for(;s<t.length;s+=1)t[s].d(1);t.length=l.length}},d(n){n&&d(e),Ae(t,n)}}}function J$(o){let e,l,t,n;return e=new ae({props:{openOn:"hover",$$slots:{default:[W$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Y$,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),h(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&544&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&544&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function Q$(o){let e,l;const t=[q(kn),{paint:{"circle-color":je(["get","Design Review Status"],Object.fromEntries(o[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[J$]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new pt({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&9?te(t,[s&0&&ie(q(kn)),s&8&&{paint:{"circle-color":je(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};s&512&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function V$(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:kn,title:K$,$$slots:{controls:[E$],help:[U$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new _t({props:{data:`${en()}/v1/problems.geojson.gz`,$$slots:{default:[Q$]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let kn="problems",K$="Issues & Conflicts";function Z$(o,e,l){let t,n=pe(kn);Y(o,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],s=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,s,f]}class X$ extends Z{constructor(e){super(),X(this,e,Z$,V$,V,{})}}function x$(o){let e,l;return{c(){e=y("img"),G(e,"slot","icon"),qn(e.src,l=Go)||G(e,"src",l),G(e,"alt","A logo representing a train")},m(t,n){h(t,e,n)},p:Q,d(t){t&&d(e)}}}function ep(o){let e;return{c(){e=S("railway station")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function tp(o){let e;return{c(){e=S(`National Rail
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function np(o){let e,l,t,n,r,s,f,i,a,u,c,$,g;return n=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[ep]},$$scope:{ctx:o}}}),a=new oe({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[tp]},$$scope:{ctx:o}}}),$=new tt({}),{c(){e=y("div"),l=y("p"),t=S("This shows "),w(n.$$.fragment),r=S(" data from OpenStreetMap (as of 20 October 2024)."),s=L(),f=y("p"),i=S("Icon from "),w(a.$$.fragment),u=S(". (Note that not all stations shown are National Rail.)"),c=L(),w($.$$.fragment),G(e,"slot","help")},m(k,C){h(k,e,C),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(f,i),b(a,f,null),p(f,u),p(e,c),b($,e,null),g=!0},p(k,C){const T={};C&16&&(T.$$scope={dirty:C,ctx:k}),n.$set(T);const I={};C&16&&(I.$$scope={dirty:C,ctx:k}),a.$set(I)},i(k){g||(m(n.$$.fragment,k),m(a.$$.fragment,k),m($.$$.fragment,k),g=!0)},o(k){_(n.$$.fragment,k),_(a.$$.fragment,k),_($.$$.fragment,k),g=!1},d(k){k&&d(e),v(n),v(a),v($)}}}function lp(o){let e,l=(o[3].name??"Unnamed railway station")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&A(t,l)},d(n){n&&d(e)}}}function rp(o){let e,l;return e=new ae({props:{$$slots:{default:[lp,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function op(o){let e,l;const t=[q(on),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}];let n={$$slots:{default:[rp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new zn({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&ie(q(on)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function sp(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:on,title:ip,$$slots:{help:[np],icon:[x$]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new _t({props:{data:`${_e()}/v1/${on}.geojson`,$$slots:{default:[op]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let on="railway_stations",ip="Railway stations";function ap(o,e,l){let t,n=pe(on);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class fp extends Z{constructor(e){super(),X(this,e,ap,sp,V,{})}}function up(o){let e,l,t;return l=new Le({props:{color:ne.sports_spaces}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","icon")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function cp(o){let e;return{c(){e=S("sports pitches")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function $p(o){let e;return{c(){e=S("sports centres")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function pp(o){let e,l,t,n,r,s,f,i,a,u;return n=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[cp]},$$scope:{ctx:o}}}),s=new oe({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[$p]},$$scope:{ctx:o}}}),a=new tt({}),{c(){e=y("span"),l=y("p"),t=S("This shows "),w(n.$$.fragment),r=S(" and "),w(s.$$.fragment),f=S(" data from OpenStreetMap (as of 20 October 2024)."),i=L(),w(a.$$.fragment),G(e,"slot","help")},m(c,$){h(c,e,$),p(e,l),p(l,t),b(n,l,null),p(l,r),b(s,l,null),p(l,f),p(e,i),b(a,e,null),u=!0},p(c,$){const g={};$&16&&(g.$$scope={dirty:$,ctx:c}),n.$set(g);const k={};$&16&&(k.$$scope={dirty:$,ctx:c}),s.$set(k)},i(c){u||(m(n.$$.fragment,c),m(s.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&d(e),v(n),v(s),v(a)}}}function mp(o){let e,l=(o[3].name??"Unnamed sports space")+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&A(t,l)},d(n){n&&d(e)}}}function _p(o){let e,l;return e=new ae({props:{$$slots:{default:[mp,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function gp(o){let e,l;const t=[q(zt),{sourceLayer:zt},{paint:{"fill-color":ne.sports_spaces,"fill-opacity":ee(.7,1)}},{layout:{visibility:o[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[_p]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new qe({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&1?te(t,[s&0&&ie(q(zt)),s&0&&{sourceLayer:zt},t[2],s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function hp(o){let e,l,t,n,r;function s(i){o[2](i)}let f={name:zt,title:dp,$$slots:{help:[pp],icon:[up]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${zt}.pmtiles`,$$slots:{default:[gp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let zt="sports_spaces",dp="Sports spaces";function wp(o,e,l){let t,n=pe(zt);Y(o,n,s=>l(0,t=s));function r(s){t=s,n.set(t)}return[t,n,r]}class bp extends Z{constructor(e){super(),X(this,e,wp,hp,V,{})}}function vp(o){let e;return{c(){e=S("DfT stats19")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function kp(o){let e;return{c(){e=S("documented by DfT")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function yp(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,k,C,T,I,O,N,F,M,j,H,P;return n=new oe({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[vp]},$$scope:{ctx:o}}}),O=new oe({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[kp]},$$scope:{ctx:o}}}),H=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("This layer shows collisions recorded in the "),w(n.$$.fragment),r=S(" dataset, as of 30 September 2024. Please note these limitations:"),s=L(),f=y("ul"),i=y("li"),i.textContent="Only collisions between 2017 and 2023 are included",a=L(),u=y("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),$=y("li"),$.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,g=L(),k=y("li"),k.textContent='The "pedestrians" category also include mobility scooters',C=L(),T=y("li"),I=S("All limitations "),w(O.$$.fragment),N=S(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),F=L(),M=y("p"),M.textContent="You can click a point to open the full report, thanks to CycleStreets.",j=L(),w(H.$$.fragment),G(e,"slot","help")},m(R,W){h(R,e,W),p(e,l),p(l,t),b(n,l,null),p(l,r),p(e,s),p(e,f),p(f,i),p(f,a),p(f,u),p(f,c),p(f,$),p(f,g),p(f,k),p(f,C),p(f,T),p(T,I),b(O,T,null),p(T,N),p(e,F),p(e,M),p(e,j),b(H,e,null),P=!0},p(R,W){const ce={};W&4194304&&(ce.$$scope={dirty:W,ctx:R}),n.$set(ce);const D={};W&4194304&&(D.$$scope={dirty:W,ctx:R}),O.$set(D)},i(R){P||(m(n.$$.fragment,R),m(O.$$.fragment,R),m(H.$$.fragment,R),P=!0)},o(R){_(n.$$.fragment,R),_(O.$$.fragment,R),_(H.$$.fragment,R),P=!1},d(R){R&&d(e),v(n),v(O),v(H)}}}function Sp(o){let e;return{c(){e=S("Pedestrians")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Tp(o){let e;return{c(){e=S("Cyclists")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Cp(o){let e;return{c(){e=S("Horse riders")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Lp(o){let e;return{c(){e=S("Other")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Ip(o){let e,l,t,n,r,s,f,i,a,u,c,$;function g(M){o[10](M)}let k={$$slots:{default:[Sp]},$$scope:{ctx:o}};o[0].pedestrians!==void 0&&(k.checked=o[0].pedestrians),e=new We({props:k}),z.push(()=>U(e,"checked",g));function C(M){o[11](M)}let T={$$slots:{default:[Tp]},$$scope:{ctx:o}};o[0].cyclists!==void 0&&(T.checked=o[0].cyclists),n=new We({props:T}),z.push(()=>U(n,"checked",C));function I(M){o[12](M)}let O={$$slots:{default:[Cp]},$$scope:{ctx:o}};o[0].horseRiders!==void 0&&(O.checked=o[0].horseRiders),f=new We({props:O}),z.push(()=>U(f,"checked",I));function N(M){o[13](M)}let F={$$slots:{default:[Lp]},$$scope:{ctx:o}};return o[0].other!==void 0&&(F.checked=o[0].other),u=new We({props:F}),z.push(()=>U(u,"checked",N)),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment)},m(M,j){b(e,M,j),h(M,t,j),b(n,M,j),h(M,s,j),b(f,M,j),h(M,a,j),b(u,M,j),$=!0},p(M,j){const H={};j&4194304&&(H.$$scope={dirty:j,ctx:M}),!l&&j&1&&(l=!0,H.checked=M[0].pedestrians,E(()=>l=!1)),e.$set(H);const P={};j&4194304&&(P.$$scope={dirty:j,ctx:M}),!r&&j&1&&(r=!0,P.checked=M[0].cyclists,E(()=>r=!1)),n.$set(P);const R={};j&4194304&&(R.$$scope={dirty:j,ctx:M}),!i&&j&1&&(i=!0,R.checked=M[0].horseRiders,E(()=>i=!1)),f.$set(R);const W={};j&4194304&&(W.$$scope={dirty:j,ctx:M}),!c&&j&1&&(c=!0,W.checked=M[0].other,E(()=>c=!1)),u.$set(W)},i(M){$||(m(e.$$.fragment,M),m(n.$$.fragment,M),m(f.$$.fragment,M),m(u.$$.fragment,M),$=!0)},o(M){_(e.$$.fragment,M),_(n.$$.fragment,M),_(f.$$.fragment,M),_(u.$$.fragment,M),$=!1},d(M){M&&(d(t),d(s),d(a)),v(e,M),v(n,M),v(f,M),v(u,M)}}}function Op(o){let e,l,t,n,r,s,f,i,a,u,c,$,g;return l=new Be({props:{small:!0,$$slots:{default:[Ip]},$$scope:{ctx:o}}}),u=new ot({props:{rows:o[9]}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),n=y("div"),r=S(`Filter years:
      `),s=y("input"),f=S(`
      -
      `),i=y("input"),a=L(),w(u.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2023),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2023),G(i,"class","svelte-1ft65rw"),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(k,C){h(k,e,C),b(l,e,null),p(e,t),p(e,n),p(n,r),p(n,s),ct(s,o[0].minYear),p(n,f),p(n,i),ct(i,o[0].maxYear),p(e,a),b(u,e,null),c=!0,$||(g=[Xt(s,"input",o[14]),Xt(i,"input",o[15])],$=!0)},p(k,C){const T={};C&4194305&&(T.$$scope={dirty:C,ctx:k}),l.$set(T),C&1&&bn(s.value)!==k[0].minYear&&ct(s,k[0].minYear),C&1&&bn(i.value)!==k[0].maxYear&&ct(i,k[0].maxYear)},i(k){c||(m(l.$$.fragment,k),m(u.$$.fragment,k),c=!0)},o(k){_(l.$$.fragment,k),_(u.$$.fragment,k),c=!1},d(k){k&&d(e),v(l),v(u),$=!1,$o(g)}}}function Ul(o){let e,l,t,n=o[3][o[21].pedestrian_location]+"",r;return{c(){e=y("p"),l=S("Pedestrian location: "),t=y("b"),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&2097152&&n!==(n=s[3][s[21].pedestrian_location]+"")&&A(r,n)},d(s){s&&d(e)}}}function El(o){let e,l,t,n=o[4][o[21].pedestrian_movement]+"",r;return{c(){e=y("p"),l=S("Pedestrian movement: "),t=y("b"),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(t,r)},p(s,f){f&2097152&&n!==(n=s[4][s[21].pedestrian_movement]+"")&&A(r,n)},d(s){s&&d(e)}}}function jp(o){let e,l,t,n=o[21].year+"",r,s,f,i,a,u=o[5][o[21].severity]+"",c,$,g,k,C,T=Wl(o[21])+"",I,O,N,F,M,j=o[21].pedestrian_location&&Ul(o),H=o[21].pedestrian_movement&&El(o);return{c(){e=y("p"),l=S("Year: "),t=y("b"),r=S(n),s=L(),f=y("p"),i=S("Severity: "),a=y("b"),c=S(u),$=L(),g=y("p"),k=S("Casualties: "),C=y("b"),I=S(T),O=L(),j&&j.c(),N=L(),H&&H.c(),F=L(),M=y("p"),M.textContent="Click to open full report in CycleStreets"},m(P,R){h(P,e,R),p(e,l),p(e,t),p(t,r),h(P,s,R),h(P,f,R),p(f,i),p(f,a),p(a,c),h(P,$,R),h(P,g,R),p(g,k),p(g,C),p(C,I),h(P,O,R),j&&j.m(P,R),h(P,N,R),H&&H.m(P,R),h(P,F,R),h(P,M,R)},p(P,R){R&2097152&&n!==(n=P[21].year+"")&&A(r,n),R&2097152&&u!==(u=P[5][P[21].severity]+"")&&A(c,u),R&2097152&&T!==(T=Wl(P[21])+"")&&A(I,T),P[21].pedestrian_location?j?j.p(P,R):(j=Ul(P),j.c(),j.m(N.parentNode,N)):j&&(j.d(1),j=null),P[21].pedestrian_movement?H?H.p(P,R):(H=El(P),H.c(),H.m(F.parentNode,F)):H&&(H.d(1),H=null)},d(P){P&&(d(e),d(s),d(f),d($),d(g),d(O),d(N),d(F),d(M)),j&&j.d(P),H&&H.d(P)}}}function Mp(o){let e,l;return e=new ae({props:{$$slots:{default:[jp,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Np(o){let e,l;const t=[q(Bt),{sourceLayer:Bt},{paint:{"circle-color":ke(["get","severity"],[1,2,3],[o[6],o[7],o[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:o[1]},{layout:{visibility:o[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Mp]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new pt({props:n}),e.$on("click",Gp),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&451?te(t,[s&0&&ie(q(Bt)),s&0&&{sourceLayer:Bt},s&448&&{paint:{"circle-color":ke(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&2&&{filter:r[1]},s&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};s&4194304&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Fp(o){let e,l,t,n,r;function s(i){o[16](i)}let f={name:Bt,title:Rp,$$slots:{controls:[Op],help:[yp]},$$scope:{ctx:o}};return o[0].show!==void 0&&(f.show=o[0].show),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Bt}.pmtiles`,$$slots:{default:[Np]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,E(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Bt="stats19",Rp="Stats19";function Pp(o){let[e,l,t]=o.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Wl(o){let e=[];return o.pedestrian&&e.push("pedestrian"),o.cyclist&&e.push("cyclist"),o.horse_rider&&e.push("horse rider"),o.other&&e.push("other"),e.join(", ")}function Gp(o){window.open(`https://www.cyclestreets.net/collisions/reports/${o.detail.features[0].properties.accident_index}`,"_blank")}function Dp(o,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],s={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2023};function f(P){return P.show?`${r.filter(W=>P[W]).join(",")}/${P.minYear}/${P.maxYear}`:null}let i=Vt(Bt,s,f,Pp);Y(o,i,P=>l(0,n=P));function a(P,R,W,ce,D,K){let J=["any"];return n.pedestrians&&J.push(["get","pedestrian"]),n.cyclists&&J.push(["get","cyclist"]),n.horseRiders&&J.push(["get","horse_rider"]),n.other&&J.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],J]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},$={1:"Fatal",2:"Serious",3:"Slight"},g=ne.sequential_low_to_high[4],k=ne.sequential_low_to_high[2],C=ne.sequential_low_to_high[0],T=[["Fatal",g],["Serious",k],["Slight",C]];function I(P){o.$$.not_equal(n.pedestrians,P)&&(n.pedestrians=P,i.set(n))}function O(P){o.$$.not_equal(n.cyclists,P)&&(n.cyclists=P,i.set(n))}function N(P){o.$$.not_equal(n.horseRiders,P)&&(n.horseRiders=P,i.set(n))}function F(P){o.$$.not_equal(n.other,P)&&(n.other=P,i.set(n))}function M(){n.minYear=bn(this.value),i.set(n)}function j(){n.maxYear=bn(this.value),i.set(n)}function H(P){o.$$.not_equal(n.show,P)&&(n.show=P,i.set(n))}return o.$$.update=()=>{o.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,$,g,k,C,T,I,O,N,F,M,j,H]}class Ap extends Z{constructor(e){super(),X(this,e,Dp,Fp,V,{})}}function Yl(o,e,l){const t=o.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Jl(o){let e,l,t=o[1]+"",n,r,s,f=o[2]+"",i,a;return{c(){e=y("tr"),l=y("td"),n=S(t),r=L(),s=y("td"),i=S(f),a=L()},m(u,c){h(u,e,c),p(e,l),p(l,n),p(e,r),p(e,s),p(s,i),p(e,a)},p(u,c){c&1&&t!==(t=u[1]+"")&&A(n,t),c&1&&f!==(f=u[2]+"")&&A(i,f)},d(u){u&&d(e)}}}function qp(o){let e,l,t,n,r=$e(Object.entries(o[0])),s=[];for(let f=0;f<r.length;f+=1)s[f]=Jl(Yl(o,r,f));return{c(){e=y("table"),l=y("thead"),l.innerHTML="<tr><th>Key</th> <th>Value</th></tr>",t=L(),n=y("tbody");for(let f=0;f<s.length;f+=1)s[f].c()},m(f,i){h(f,e,i),p(e,l),p(e,t),p(e,n);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(n,null)},p(f,i){if(i&1){r=$e(Object.entries(f[0]));let a;for(a=0;a<r.length;a+=1){const u=Yl(f,r,a);s[a]?s[a].p(u,i):(s[a]=Jl(u),s[a].c(),s[a].m(n,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=r.length}},d(f){f&&d(e),Ae(s,f)}}}function Hp(o){let e,l;return e=new ae({props:{openOn:"click",$$slots:{default:[qp,({props:t})=>({0:t}),({props:t})=>t?1:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&33&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}class Un extends Z{constructor(e){super(),X(this,e,null,Hp,V,{})}}function zp(o){let e;return{c(){e=y("span"),e.innerHTML="<p>This is your own GeoJSON file.</p>",G(e,"slot","help")},m(l,t){h(l,e,t)},p:Q,d(l){l&&d(e)}}}function Bp(o){let e,l,t,n,r,s,f,i=o[0].features.length.toLocaleString()+"",a,u,c;return l=new xr({props:{label:"Load your own GeoJSON file",onLoad:o[3]}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),n=y("p"),n.innerHTML="<i>Note this file doesn&#39;t leave your computer; it&#39;s not uploaded anywhere</i>",r=L(),s=y("p"),f=S("Currently showing "),a=S(i),u=S(" features"),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m($,g){h($,e,g),b(l,e,null),p(e,t),p(e,n),p(e,r),p(e,s),p(s,f),p(s,a),p(s,u),c=!0},p($,g){(!c||g&1)&&i!==(i=$[0].features.length.toLocaleString()+"")&&A(a,i)},i($){c||(m(l.$$.fragment,$),c=!0)},o($){_(l.$$.fragment,$),c=!1},d($){$&&d(e),v(l)}}}function Up(o){let e,l;return e=new Un({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ep(o){let e,l;return e=new Un({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Wp(o){let e,l;return e=new Un({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Yp(o){let e,l,t,n,r,s,f,i;const a=[q("user_data_polygons"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Polygon"]},{paint:{"fill-color":"blue","fill-opacity":ee(.5,1)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let u={$$slots:{default:[Up]},$$scope:{ctx:o}};for(let I=0;I<a.length;I+=1)u=x(u,a[I]);e=new qe({props:u});const c=[q("user_data_polygons-outline"),{paint:{"line-color":"black","line-width":2.5}},{layout:{visibility:o[1]?"visible":"none"}}];let $={};for(let I=0;I<c.length;I+=1)$=x($,c[I]);t=new ge({props:$});const g=[q("user_data_lines"),{manageHoverState:!0},{filter:["==",["geometry-type"],"LineString"]},{paint:{"line-color":"green","line-width":ee(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let k={$$slots:{default:[Ep]},$$scope:{ctx:o}};for(let I=0;I<g.length;I+=1)k=x(k,g[I]);r=new ge({props:k});const C=[q("user_data_points"),{manageHoverState:!0},{filter:["==",["geometry-type"],"Point"]},{paint:{"circle-color":"red","circle-radius":ee(3,5)}},{layout:{visibility:o[1]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let T={$$slots:{default:[Wp]},$$scope:{ctx:o}};for(let I=0;I<C.length;I+=1)T=x(T,C[I]);return f=new pt({props:T}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(I,O){b(e,I,O),h(I,l,O),b(t,I,O),h(I,n,O),b(r,I,O),h(I,s,O),b(f,I,O),i=!0},p(I,O){const N=O&2?te(a,[a[0],a[1],a[2],a[3],{layout:{visibility:I[1]?"visible":"none"}},a[5],a[6]]):{};O&32&&(N.$$scope={dirty:O,ctx:I}),e.$set(N);const F=O&2?te(c,[c[0],c[1],{layout:{visibility:I[1]?"visible":"none"}}]):{};t.$set(F);const M=O&2?te(g,[g[0],g[1],g[2],g[3],{layout:{visibility:I[1]?"visible":"none"}},g[5],g[6]]):{};O&32&&(M.$$scope={dirty:O,ctx:I}),r.$set(M);const j=O&2?te(C,[C[0],C[1],C[2],C[3],{layout:{visibility:I[1]?"visible":"none"}},C[5],C[6]]):{};O&32&&(j.$$scope={dirty:O,ctx:I}),f.$set(j)},i(I){i||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(r.$$.fragment,I),m(f.$$.fragment,I),i=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(r.$$.fragment,I),_(f.$$.fragment,I),i=!1},d(I){I&&(d(l),d(n),d(s)),v(e,I),v(t,I),v(r,I),v(f,I)}}}function Jp(o){let e,l,t,n,r;function s(i){o[4](i)}let f={name:no,title:Qp,$$slots:{controls:[Bp],help:[zp]},$$scope:{ctx:o}};return o[1]!==void 0&&(f.show=o[1]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new _t({props:{data:o[0],generateId:!0,$$slots:{default:[Yp]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&33&&(u.$$scope={dirty:a,ctx:i}),!l&&a&2&&(l=!0,u.show=i[1],E(()=>l=!1)),e.$set(u);const c={};a&1&&(c.data=i[0]),a&34&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let no="user_data",Qp="Your own GeoJSON file";function Vp(o,e,l){let t,n=pe(no);Y(o,n,i=>l(1,t=i));let r={type:"FeatureCollection",features:[]};function s(i,a){try{l(0,r=JSON.parse(a))}catch(u){window.alert(`Couldn't load ${i} -- is it GeoJSON? ${u}`)}}function f(i){t=i,n.set(t)}return[r,t,n,s,f]}class Kp extends Z{constructor(e){super(),X(this,e,Vp,Jp,V,{})}}function Zp(o){let e;return{c(){e=S(`DfT road statistics
      `)},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Xp(o){let e;return{c(){e=S("methodology")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function xp(o){let e,l,t,n,r,s,f,i,a,u,c,$;return n=new oe({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Zp]},$$scope:{ctx:o}}}),s=new oe({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[Xp]},$$scope:{ctx:o}}}),c=new Oe({}),{c(){e=y("span"),l=y("p"),t=S("AADF (annual average daily flow) data from "),w(n.$$.fragment),r=S(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),w(s.$$.fragment),f=S(" for details and caveats about the measurements."),i=L(),a=y("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),w(c.$$.fragment),G(e,"slot","help")},m(g,k){h(g,e,k),p(e,l),p(l,t),b(n,l,null),p(l,r),b(s,l,null),p(l,f),p(e,i),p(e,a),p(e,u),b(c,e,null),$=!0},p(g,k){const C={};k&128&&(C.$$scope={dirty:k,ctx:g}),n.$set(C);const T={};k&128&&(T.$$scope={dirty:k,ctx:g}),s.$set(T)},i(g){$||(m(n.$$.fragment,g),m(s.$$.fragment,g),m(c.$$.fragment,g),$=!0)},o(g){_(n.$$.fragment,g),_(s.$$.fragment,g),_(c.$$.fragment,g),$=!1},d(g){g&&d(e),v(n),v(s),v(c)}}}function em(o){let e,l,t;return l=new Qe({props:{colorScale:o[1],limits:o[3]}}),{c(){e=y("span"),w(l.$$.fragment),G(e,"slot","controls")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p:Q,i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function tm(o){let e,l=o[6].location+"",t,n,r,s,f=o[6].year+"",i,a,u,c=o[6].motor_vehicles.toLocaleString()+"",$,g,k,C,T=o[6].year+"",I,O,N,F=o[6].pedal_cycles.toLocaleString()+"",M,j,H,P,R,W=o[6].method+"",ce;return{c(){e=y("h2"),t=S(l),n=L(),r=y("p"),s=S("Total motor vehicles ("),i=S(f),a=S(` AADF):
        `),u=y("b"),$=S(c),g=L(),k=y("p"),C=S("Total pedal cycles ("),I=S(T),O=S(` AADF):
        `),N=y("b"),M=S(F),j=L(),H=y("p"),P=S("Count method: "),R=y("b"),ce=S(W)},m(D,K){h(D,e,K),p(e,t),h(D,n,K),h(D,r,K),p(r,s),p(r,i),p(r,a),p(r,u),p(u,$),h(D,g,K),h(D,k,K),p(k,C),p(k,I),p(k,O),p(k,N),p(N,M),h(D,j,K),h(D,H,K),p(H,P),p(H,R),p(R,ce)},p(D,K){K&64&&l!==(l=D[6].location+"")&&A(t,l),K&64&&f!==(f=D[6].year+"")&&A(i,f),K&64&&c!==(c=D[6].motor_vehicles.toLocaleString()+"")&&A($,c),K&64&&T!==(T=D[6].year+"")&&A(I,T),K&64&&F!==(F=D[6].pedal_cycles.toLocaleString()+"")&&A(M,F),K&64&&W!==(W=D[6].method+"")&&A(ce,W)},d(D){D&&(d(e),d(n),d(r),d(g),d(k),d(j),d(H))}}}function nm(o){let e,l;return e=new ae({props:{$$slots:{default:[tm,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function lm(o){let e,l;const t=[q(Ut),{sourceLayer:Ut},{paint:{"circle-color":ke(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:o[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[nm]},$$scope:{ctx:o}};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new pt({props:n}),e.$on("click",sm),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&7?te(t,[s&0&&ie(q(Ut)),s&0&&{sourceLayer:Ut},s&6&&{paint:{"circle-color":ke(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};s&128&&(f.$$scope={dirty:s,ctx:r}),e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function rm(o){let e,l,t,n,r;function s(i){o[5](i)}let f={name:Ut,title:om,$$slots:{controls:[em],help:[xp]},$$scope:{ctx:o}};return o[0]!==void 0&&(f.show=o[0]),e=new ue({props:f}),z.push(()=>U(e,"show",s)),n=new me({props:{url:`pmtiles://${_e()}/v1/${Ut}.pmtiles`,$$slots:{default:[lm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],E(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}let Ut="vehicle_counts",om="Vehicle counts";function sm(o){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${o.detail.features[0].properties.count_point}`,"_blank")}function im(o,e,l){let t,n=["green","orange","red","black"],r=[0,2500,8e3,15e3,205e3],s=["0-2.5k","2.5-8k","8-15k",">15k"],f=pe(Ut);Y(o,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,s,f,i]}class am extends Z{constructor(e){super(),X(this,e,im,rm,V,{})}}function fm(o){return je(["get","intervention_type"],{area:rt.area,route:rt.route,crossing:rt.crossing,other:rt.other},"white")}function um(o){return[["Areas",rt.area],["Routes",rt.route],["Crossings",rt.crossing],["Other",rt.other]]}let xt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},An={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function cm(o,e,l,t){var f,i,a;let n={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},r={type:"FeatureCollection",features:[],schemes:{},notes:o.notes},s={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};for(let[u,c]of Object.entries(o.schemes))((f=c.browse)==null?void 0:f.sketch_source)==="LCWIP mapping"?r.schemes[u]=c:((i=c.browse)==null?void 0:i.sketch_source)=="ATF assessment"?n.schemes[u]=c:((a=c.browse)==null?void 0:a.sketch_source)=="Final inspection sketches"&&(s.schemes[u]=c);for(let u of o.features){if(!$m(u))continue;let c=u.properties.scheme_reference,$={},g={type:"FeatureCollection",features:[],schemes:{},notes:o.notes};u.properties.sketch_source==="ATF assessment"&&Object.hasOwn(n.schemes,c)?($=n.schemes[c],g=n):u.properties.sketch_source==="LCWIP mapping"&&Object.hasOwn(r.schemes,c)?($=r.schemes[c],g=r):u.properties.sketch_source==="Final inspection sketches"&&Object.hasOwn(s.schemes,c)&&($=s.schemes[c],g=s),$.browse&&(u.properties.funding_programme=$.browse.funding_programme,u.properties.current_milestone=$.browse.current_milestone),u.id=g.features.length+1,g.features.push(u)}e.set(n),l.set(r),t.set(s)}function $m(o){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(o.properties.id)}function pm(){let o={type:"FeatureCollection",features:[],schemes:{},notes:["These schemes are everything you've drawn in this browser using Scheme Sketcher. The data source and accuracy depend on whatever files you imported, created, or edited yourself."]};for(let l=0;l<window.localStorage.length;l++){let t=window.localStorage.key(l),n=t.split("/");if(!(n.length!=3||n[0]!="sketch"))try{let r=JSON.parse(window.localStorage.getItem(t));if(r.features.length==0)continue;for(let s of Object.values(r.schemes))s.browse={authority_or_region:n[1],local_filename:n[2]};o.schemes={...o.schemes,...r.schemes},o.features=[...o.features,...r.features]}catch{}}let e=1;for(let l of o.features)l.id=e++;return o}function Ql(o,e,l){const t=o.slice();return t[30]=e[l][0],t[31]=e[l][1],t[32]=e,t[33]=l,t}function Vl(o,e,l){const t=o.slice();return t[34]=e[l],t[35]=e,t[36]=l,t}function mm(o){let e;return{c(){e=S("Filters")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function _m(o){let e;return{c(){e=S("Reset all filters")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function gm(o){let e,l,t,n,r,s,f,i;e=new dn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[wm]},$$scope:{ctx:o}}});function a(g){o[25](g)}let u={label:"Scheme name or reference",options:yn(o[0])};o[1]!==void 0&&(u.value=o[1]),t=new eo({props:u}),z.push(()=>U(t,"value",a));function c(g){o[26](g)}let $={label:"Authority or region",choices:o[11],emptyOption:!0};return o[4]!==void 0&&($.value=o[4]),s=new $t({props:$}),z.push(()=>U(s,"value",c)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),r=L(),w(s.$$.fragment)},m(g,k){b(e,g,k),h(g,l,k),b(t,g,k),h(g,r,k),b(s,g,k),i=!0},p(g,k){const C={};k[0]&4|k[1]&64&&(C.$$scope={dirty:k,ctx:g}),e.$set(C);const T={};k[0]&1&&(T.options=yn(g[0])),!n&&k[0]&2&&(n=!0,T.value=g[1],E(()=>n=!1)),t.$set(T);const I={};k[0]&2048&&(I.choices=g[11]),!f&&k[0]&16&&(f=!0,I.value=g[4],E(()=>f=!1)),s.$set(I)},i(g){i||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(s.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(t.$$.fragment,g),_(s.$$.fragment,g),i=!1},d(g){g&&(d(l),d(r)),v(e,g),v(t,g),v(s,g)}}}function hm(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,k,C,T,I,O;t=new dn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[vm]},$$scope:{ctx:o}}});function N(R){o[18](R)}let F={label:"Scheme name or reference",options:yn(o[0])};o[1]!==void 0&&(F.value=o[1]),r=new eo({props:F}),z.push(()=>U(r,"value",N));function M(R){o[19](R)}let j={label:"Authority or region",choices:o[11],emptyOption:!0};o[4]!==void 0&&(j.value=o[4]),i=new $t({props:j}),z.push(()=>U(i,"value",M));function H(R){o[20](R)}let P={label:"Current milestone",choices:o[12],emptyOption:!0};return o[6]!==void 0&&(P.value=o[6]),c=new $t({props:P}),z.push(()=>U(c,"value",H)),C=new dn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[Sm]},$$scope:{ctx:o}}}),I=new dn({props:{label:"Intervention types",id:"filterInterventionTypes",$$slots:{default:[Lm]},$$scope:{ctx:o}}}),{c(){e=y("div"),l=y("div"),w(t.$$.fragment),n=L(),w(r.$$.fragment),f=L(),w(i.$$.fragment),u=L(),w(c.$$.fragment),g=L(),k=y("div"),w(C.$$.fragment),T=L(),w(I.$$.fragment),G(l,"class","govuk-grid-column-one-half"),G(k,"class","govuk-grid-column-one-half"),G(e,"class","govuk-grid-row")},m(R,W){h(R,e,W),p(e,l),b(t,l,null),p(l,n),b(r,l,null),p(l,f),b(i,l,null),p(l,u),b(c,l,null),p(e,g),p(e,k),b(C,k,null),p(k,T),b(I,k,null),O=!0},p(R,W){const ce={};W[0]&4|W[1]&64&&(ce.$$scope={dirty:W,ctx:R}),t.$set(ce);const D={};W[0]&1&&(D.options=yn(R[0])),!s&&W[0]&2&&(s=!0,D.value=R[1],E(()=>s=!1)),r.$set(D);const K={};W[0]&2048&&(K.choices=R[11]),!a&&W[0]&16&&(a=!0,K.value=R[4],E(()=>a=!1)),i.$set(K);const J={};!$&&W[0]&64&&($=!0,J.value=R[6],E(()=>$=!1)),c.$set(J);const fe={};W[0]&32|W[1]&64&&(fe.$$scope={dirty:W,ctx:R}),C.$set(fe);const ye={};W[0]&128|W[1]&64&&(ye.$$scope={dirty:W,ctx:R}),I.$set(ye)},i(R){O||(m(t.$$.fragment,R),m(r.$$.fragment,R),m(i.$$.fragment,R),m(c.$$.fragment,R),m(C.$$.fragment,R),m(I.$$.fragment,R),O=!0)},o(R){_(t.$$.fragment,R),_(r.$$.fragment,R),_(i.$$.fragment,R),_(c.$$.fragment,R),_(C.$$.fragment,R),_(I.$$.fragment,R),O=!1},d(R){R&&d(e),v(t),v(r),v(i),v(c),v(C),v(I)}}}function dm(o){let e;return{c(){e=S("Clear")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function wm(o){let e,l,t,n,r,s;return t=new Ye({props:{$$slots:{default:[dm]},$$scope:{ctx:o}}}),t.$on("click",o[24]),{c(){e=y("input"),l=L(),w(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){h(f,e,i),ct(e,o[2]),h(f,l,i),b(t,f,i),n=!0,r||(s=Xt(e,"input",o[23]),r=!0)},p(f,i){i[0]&4&&e.value!==f[2]&&ct(e,f[2]);const a={};i[1]&64&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(d(e),d(l)),v(t,f),r=!1,s()}}}function bm(o){let e;return{c(){e=S("Clear")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function vm(o){let e,l,t,n,r,s;return t=new Ye({props:{$$slots:{default:[bm]},$$scope:{ctx:o}}}),t.$on("click",o[17]),{c(){e=y("input"),l=L(),w(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(f,i){h(f,e,i),ct(e,o[2]),h(f,l,i),b(t,f,i),n=!0,r||(s=Xt(e,"input",o[16]),r=!0)},p(f,i){i[0]&4&&e.value!==f[2]&&ct(e,f[2]);const a={};i[1]&64&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||(m(t.$$.fragment,f),n=!0)},o(f){_(t.$$.fragment,f),n=!1},d(f){f&&(d(e),d(l)),v(t,f),r=!1,s()}}}function km(o){let e=o[34]+"",l,t;return{c(){l=S(e),t=L()},m(n,r){h(n,l,r),h(n,t,r)},p:Q,d(n){n&&(d(l),d(t))}}}function Kl(o){let e,l,t;function n(s){o[21](s,o[34])}let r={$$slots:{default:[km]},$$scope:{ctx:o}};return o[5][o[34]]!==void 0&&(r.checked=o[5][o[34]]),e=new We({props:r}),z.push(()=>U(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f[1]&64&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&32&&(l=!0,i.checked=o[5][o[34]],E(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function ym(o){let e,l,t=$e(Object.keys(xt)),n=[];for(let s=0;s<t.length;s+=1)n[s]=Kl(Vl(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);h(s,e,f),l=!0},p(s,f){if(f[0]&32){t=$e(Object.keys(xt));let i;for(i=0;i<t.length;i+=1){const a=Vl(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Kl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(we(),i=t.length;i<n.length;i+=1)r(i);be()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),Ae(n,s)}}}function Sm(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[ym]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Tm(o){let e=o[31]+"",l,t;return{c(){l=S(e),t=L()},m(n,r){h(n,l,r),h(n,t,r)},p:Q,d(n){n&&(d(l),d(t))}}}function Zl(o){let e,l,t;function n(s){o[22](s,o[30])}let r={$$slots:{default:[Tm]},$$scope:{ctx:o}};return o[7][o[30]]!==void 0&&(r.checked=o[7][o[30]]),e=new We({props:r}),z.push(()=>U(e,"checked",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){o=s;const i={};f[1]&64&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&8320&&(l=!0,i.checked=o[7][o[30]],E(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Cm(o){let e,l,t=$e(o[13]),n=[];for(let s=0;s<t.length;s+=1)n[s]=Zl(Ql(o,t,s));const r=s=>_(n[s],1,1,()=>{n[s]=null});return{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=ve()},m(s,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(s,f);h(s,e,f),l=!0},p(s,f){if(f[0]&8320){t=$e(s[13]);let i;for(i=0;i<t.length;i+=1){const a=Ql(s,t,i);n[i]?(n[i].p(a,f),m(n[i],1)):(n[i]=Zl(a),n[i].c(),m(n[i],1),n[i].m(e.parentNode,e))}for(we(),i=t.length;i<n.length;i+=1)r(i);be()}},i(s){if(!l){for(let f=0;f<t.length;f+=1)m(n[f]);l=!0}},o(s){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)_(n[f]);l=!1},d(s){s&&d(e),Ae(n,s)}}}function Lm(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[Cm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n[0]&128|n[1]&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Im(o){let e;return{c(){e=S("Done")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Om(o){let e,l,t,n,r=o[10].interventions.toLocaleString()+"",s,f,i,a,u=o[9].size.toLocaleString()+"",c,$,g,k,C,T=Xl(o[10].totalLength).toFixed(1)+"",I,O,N,F,M,j,H,P,R,W;F=new Ye({props:{$$slots:{default:[_m]},$$scope:{ctx:o}}}),F.$on("click",o[14]);const ce=[hm,gm],D=[];function K(J,fe){return J[3]=="ATF"?0:1}return j=K(o),H=D[j]=ce[j](o),R=new Yo({props:{$$slots:{default:[Im]},$$scope:{ctx:o}}}),R.$on("click",o[27]),{c(){e=y("p"),e.textContent="Showing:",l=L(),t=y("ul"),n=y("li"),s=S(r),f=S(" interventions"),i=L(),a=y("li"),c=S(u),$=S(" schemes"),g=L(),k=y("li"),C=S("total route length of "),I=S(T),O=S(" miles"),N=L(),w(F.$$.fragment),M=L(),H.c(),P=L(),w(R.$$.fragment)},m(J,fe){h(J,e,fe),h(J,l,fe),h(J,t,fe),p(t,n),p(n,s),p(n,f),p(t,i),p(t,a),p(a,c),p(a,$),p(t,g),p(t,k),p(k,C),p(k,I),p(k,O),h(J,N,fe),b(F,J,fe),h(J,M,fe),D[j].m(J,fe),h(J,P,fe),b(R,J,fe),W=!0},p(J,fe){(!W||fe[0]&1024)&&r!==(r=J[10].interventions.toLocaleString()+"")&&A(s,r),(!W||fe[0]&512)&&u!==(u=J[9].size.toLocaleString()+"")&&A(c,u),(!W||fe[0]&1024)&&T!==(T=Xl(J[10].totalLength).toFixed(1)+"")&&A(I,T);const ye={};fe[1]&64&&(ye.$$scope={dirty:fe,ctx:J}),F.$set(ye);let le=j;j=K(J),j===le?D[j].p(J,fe):(we(),_(D[le],1,1,()=>{D[le]=null}),be(),H=D[j],H?H.p(J,fe):(H=D[j]=ce[j](J),H.c()),m(H,1),H.m(P.parentNode,P));const Ce={};fe[1]&64&&(Ce.$$scope={dirty:fe,ctx:J}),R.$set(Ce)},i(J){W||(m(F.$$.fragment,J),m(H),m(R.$$.fragment,J),W=!0)},o(J){_(F.$$.fragment,J),_(H),_(R.$$.fragment,J),W=!1},d(J){J&&(d(e),d(l),d(t),d(N),d(M),d(P)),v(F,J),D[j].d(J),v(R,J)}}}function jm(o){let e,l,t,n,r;e=new Ye({props:{$$slots:{default:[mm]},$$scope:{ctx:o}}}),e.$on("click",o[15]);function s(i){o[28](i)}let f={title:`Filter ${o[3]} schemes`,$$slots:{default:[Om]},$$scope:{ctx:o}};return o[8]!==void 0&&(f.open=o[8]),t=new bo({props:f}),z.push(()=>U(t,"open",s)),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(i,a){b(e,i,a),h(i,l,a),b(t,i,a),r=!0},p(i,a){const u={};a[1]&64&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a[0]&8&&(c.title=`Filter ${i[3]} schemes`),a[0]&4095|a[1]&64&&(c.$$scope={dirty:a,ctx:i}),!n&&a[0]&256&&(n=!0,c.open=i[8],E(()=>n=!1)),t.$set(c)},i(i){r||(m(e.$$.fragment,i),m(t.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),r=!1},d(i){i&&d(l),v(e,i),v(t,i)}}}function Mm(o){var t;let e=new Set;for(let n of Object.values(o.schemes))(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Xl(o){return o*621371e-9}function yn(o){let e=[];for(let l of Object.values(o.schemes))e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function Nm(o,e,l){let t,{source:n}=e,{schemesGj:r}=e,{filterSchemeText:s}=e,{filterInterventionText:f}=e,i=!1,a=new Set,u={interventions:0,totalLength:0},c=Object.keys(An).map(le=>[le,le]),$="",g=Object.fromEntries(Object.keys(xt).map(le=>[le,!0])),k="",C=[["route","Routes"],["area","Areas"],["crossing","Crossings"],["other","Other"]],T=Object.fromEntries(C.map(([le,Ce])=>[le,!0]));function I(le,Ce,nt,gt,lt,at){let Je=le.toLowerCase(),ft=Ce.toLowerCase(),ht=de=>{var Me,wt,Ee,ze;if(Je&&!((Me=de.properties.name)!=null&&Me.toLowerCase().includes(Je))&&!((wt=de.properties.description)!=null&&wt.toLowerCase().includes(Je)))return!1;let He=r.schemes[de.properties.scheme_reference];return!(nt&&((Ee=He.browse)==null?void 0:Ee.authority_or_region)!=nt||n=="ATF"&&He.browse.funding_programme&&!gt[He.browse.funding_programme]||lt&&((ze=He.browse)==null?void 0:ze.current_milestone)!=lt||ft&&!He.scheme_reference.toLowerCase().includes(ft)&&!(He.scheme_name??"").toLowerCase().includes(ft))};l(9,a=new Set(r.features.filter(ht).map(de=>de.properties.scheme_reference))),l(10,u={interventions:0,totalLength:0});let dt=de=>{var He,Me;return!(!a.has(de.properties.scheme_reference)||Je&&!((He=de.properties.name)!=null&&He.toLowerCase().includes(Je))&&!((Me=de.properties.description)!=null&&Me.toLowerCase().includes(Je))||n=="ATF"&&!at[de.properties.intervention_type])};for(let de of r.features)dt(de)?(delete de.properties.hide_while_editing,l(10,u.interventions++,u),de.geometry.type=="LineString"&&de.properties.length_meters&&l(10,u.totalLength+=de.properties.length_meters,u)):de.properties.hide_while_editing=!0;l(0,r),l(10,u)}function O(){l(4,$=""),l(5,g=Object.fromEntries(Object.keys(xt).map(le=>[le,!0]))),l(6,k=""),l(2,f=""),l(1,s="")}const N=()=>l(8,i=!0);function F(){f=this.value,l(2,f)}const M=()=>l(2,f="");function j(le){s=le,l(1,s)}function H(le){$=le,l(4,$)}function P(le){k=le,l(6,k)}function R(le,Ce){o.$$.not_equal(g[Ce],le)&&(g[Ce]=le,l(5,g))}function W(le,Ce){o.$$.not_equal(T[Ce],le)&&(T[Ce]=le,l(7,T))}function ce(){f=this.value,l(2,f)}const D=()=>l(2,f="");function K(le){s=le,l(1,s)}function J(le){$=le,l(4,$)}const fe=()=>l(8,i=!1);function ye(le){i=le,l(8,i)}return o.$$set=le=>{"source"in le&&l(3,n=le.source),"schemesGj"in le&&l(0,r=le.schemesGj),"filterSchemeText"in le&&l(1,s=le.filterSchemeText),"filterInterventionText"in le&&l(2,f=le.filterInterventionText)},o.$$.update=()=>{o.$$.dirty[0]&1&&l(11,t=Mm(r)),o.$$.dirty[0]&246&&I(f,s,$,g,k,T)},[r,s,f,n,$,g,k,T,i,a,u,t,c,C,O,N,F,M,j,H,P,R,W,ce,D,K,J,fe,ye]}class an extends Z{constructor(e){super(),X(this,e,Nm,jm,V,{source:3,schemesGj:0,filterSchemeText:1,filterInterventionText:2},null,[-1,-1])}}function xl(o){let e,l,t,n=o[0].budget.toLocaleString()+"",r,s;return{c(){e=y("p"),l=y("b"),l.textContent="Cost",t=S(`
    : `),r=S(n),s=S(`
    GBP`)},m(f,i){h(f,e,i),p(e,l),p(e,t),p(e,r),p(e,s)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&A(r,n)},d(f){f&&d(e)}}}function er(o){let e;return{c(){e=y("p"),e.textContent="Development is fully funded"},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function tr(o){let e;return{c(){e=y("p"),e.textContent="Construction is fully funded"},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function nr(o){let e,l,t,n;return{c(){e=y("p"),l=y("b"),l.textContent="Funding sources",t=S(`
    : `),n=S(o[1])},m(r,s){h(r,e,s),p(e,l),p(e,t),p(e,n)},p(r,s){s&2&&A(n,r[1])},d(r){r&&d(e)}}}function Fm(o){let e,l,t,n,r=o[0].budget&&xl(o),s=o[0].development_funded&&er(),f=o[0].construction_funded&&tr(),i=o[1]&&nr(o);return{c(){r&&r.c(),e=L(),s&&s.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=ve()},m(a,u){r&&r.m(a,u),h(a,e,u),s&&s.m(a,u),h(a,l,u),f&&f.m(a,u),h(a,t,u),i&&i.m(a,u),h(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=xl(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?s||(s=er(),s.c(),s.m(l.parentNode,l)):s&&(s.d(1),s=null),a[0].construction_funded?f||(f=tr(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=nr(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:Q,o:Q,d(a){a&&(d(e),d(l),d(t),d(n)),r&&r.d(a),s&&s.d(a),f&&f.d(a),i&&i.d(a)}}}function Rm(o){if(!o.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])o.funding_sources[l]&&e.push(l.toUpperCase());return o.funding_sources.other&&e.push(o.funding_sources.other),e.join(", ")}function Pm(o,e,l){let t,{props:n}=e;return o.$$set=r=>{"props"in r&&l(0,n=r.props)},o.$$.update=()=>{o.$$.dirty&1&&l(1,t=Rm(n))},[n,t]}class lo extends Z{constructor(e){super(),X(this,e,Pm,Fm,V,{props:0})}}function lr(o){let e,l,t,n=o[0].status+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Status",t=S(`
    : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].status+"")&&A(r,n)},d(s){s&&d(e)}}}function rr(o){let e,l,t,n=o[0].timescale+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Timescale",t=S(`
    : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale+"")&&A(r,n)},d(s){s&&d(e)}}}function or(o){let e,l,t,n=o[0].timescale_year+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Estimated completion year",t=S(`
    : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].timescale_year+"")&&A(r,n)},d(s){s&&d(e)}}}function sr(o){let e,l,t,n=o[0].year_published+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme most recently published",t=S(`
    : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].year_published+"")&&A(r,n)},d(s){s&&d(e)}}}function ir(o){let e,l,t,n=o[0].year_consulted+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme most recently consulted on",t=S(`
    : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&1&&n!==(n=s[0].year_consulted+"")&&A(r,n)},d(s){s&&d(e)}}}function Gm(o){let e,l,t,n,r,s=o[0].status&&lr(o),f=o[0].timescale&&rr(o),i=o[0].timescale_year&&or(o),a=o[0].year_published&&sr(o),u=o[0].year_consulted&&ir(o);return{c(){s&&s.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=ve()},m(c,$){s&&s.m(c,$),h(c,e,$),f&&f.m(c,$),h(c,l,$),i&&i.m(c,$),h(c,t,$),a&&a.m(c,$),h(c,n,$),u&&u.m(c,$),h(c,r,$)},p(c,[$]){c[0].status?s?s.p(c,$):(s=lr(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?f?f.p(c,$):(f=rr(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,$):(i=or(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,$):(a=sr(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,$):(u=ir(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:Q,o:Q,d(c){c&&(d(e),d(l),d(t),d(n),d(r)),s&&s.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function Dm(o,e,l){let{props:t}=e;return o.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class ro extends Z{constructor(e){super(),X(this,e,Dm,Gm,V,{props:0})}}function Tn(o){const e=o.slice(),l=e[5].pipeline;return e[11]=l,e}function Cn(o){const e=o.slice(),l=JSON.parse(e[1].v2);return e[11]=l,e}function Ln(o){const e=o.slice(),l=JSON.parse(e[1].pipeline);return e[11]=l,e}function ar(o){let e,l,t,n=Xn(o[1].length_meters)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Length",t=S(`
        : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=Xn(s[1].length_meters)+"")&&A(r,n)},d(s){s&&d(e)}}}function fr(o){let e,l=ut(o[1].description,o[3])+"";return{c(){e=y("p")},m(t,n){h(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=ut(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&d(e)}}}function ur(o){let e,l,t,n,r,s,f,i=o[11].atf4_type&&cr(o),a=o[11].accuracy&&$r(o),u=o[11].is_alternative&&pr();return n=new lo({props:{props:o[11]}}),s=new ro({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,$){i&&i.m(c,$),h(c,e,$),a&&a.m(c,$),h(c,l,$),u&&u.m(c,$),h(c,t,$),b(n,c,$),h(c,r,$),b(s,c,$),f=!0},p(c,$){c[11].atf4_type?i?i.p(c,$):(i=cr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].accuracy?a?a.p(c,$):(a=$r(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].is_alternative?u||(u=pr(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const g={};$&2&&(g.props=c[11]),n.$set(g);const k={};$&2&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(d(e),d(l),d(t),d(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function cr(o){let e,l,t,n=o[11].atf4_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="ATF4 type",t=S(`
          : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].atf4_type+"")&&A(r,n)},d(s){s&&d(e)}}}function $r(o){let e,l,t,n=o[11].accuracy+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Accuracy",t=S(`
          : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].accuracy+"")&&A(r,n)},d(s){s&&d(e)}}}function pr(o){let e;return{c(){e=y("p"),e.textContent="Represents an alternative route"},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function mr(o){let e,l,t,n=o[11].intervention_type&&_r(o),r=o[11].work_type&&gr(o),s=o[11].intended_uses&&hr(o);return{c(){n&&n.c(),e=L(),r&&r.c(),l=L(),s&&s.c(),t=ve()},m(f,i){n&&n.m(f,i),h(f,e,i),r&&r.m(f,i),h(f,l,i),s&&s.m(f,i),h(f,t,i)},p(f,i){f[11].intervention_type?n?n.p(f,i):(n=_r(f),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null),f[11].work_type?r?r.p(f,i):(r=gr(f),r.c(),r.m(l.parentNode,l)):r&&(r.d(1),r=null),f[11].intended_uses?s?s.p(f,i):(s=hr(f),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(f){f&&(d(e),d(l),d(t)),n&&n.d(f),r&&r.d(f),s&&s.d(f)}}}function _r(o){let e,l,t,n=o[11].intervention_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Type",t=S(`
          : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].intervention_type+"")&&A(r,n)},d(s){s&&d(e)}}}function gr(o){let e,l,t,n=o[11].work_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="What kind of infrastructure is mapped",t=S(`
          : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].work_type+"")&&A(r,n)},d(s){s&&d(e)}}}function hr(o){let e,l,t,n=o[11].intended_uses+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Intended uses",t=S(`
          : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&2&&n!==(n=s[11].intended_uses+"")&&A(r,n)},d(s){s&&d(e)}}}function dr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.capital_scheme_id)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Capital scheme ID",t=S(`
        : `),r=S(n)},m(f,i){h(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&A(r,n)},d(f){f&&d(e)}}}function wr(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.funding_programme)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Funding programme",t=S(`
        : `),r=S(n)},m(f,i){h(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&A(r,n)},d(f){f&&d(e)}}}function br(o){var s;let e,l,t,n=((s=o[5].browse)==null?void 0:s.current_milestone)+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Current milestone",t=S(`
        : `),r=S(n)},m(f,i){h(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&A(r,n)},d(f){f&&d(e)}}}function vr(o){let e,l,t,n,r,s,f,i=o[11].scheme_type&&kr(o),a=o[11].atf4_lead_type&&yr(o),u=o[11].scheme_description&&Sr(o);return n=new lo({props:{props:o[11]}}),s=new ro({props:{props:o[11]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment)},m(c,$){i&&i.m(c,$),h(c,e,$),a&&a.m(c,$),h(c,l,$),u&&u.m(c,$),h(c,t,$),b(n,c,$),h(c,r,$),b(s,c,$),f=!0},p(c,$){c[11].scheme_type?i?i.p(c,$):(i=kr(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[11].atf4_lead_type?a?a.p(c,$):(a=yr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[11].scheme_description?u?u.p(c,$):(u=Sr(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const g={};$&32&&(g.props=c[11]),n.$set(g);const k={};$&32&&(k.props=c[11]),s.$set(k)},i(c){f||(m(n.$$.fragment,c),m(s.$$.fragment,c),f=!0)},o(c){_(n.$$.fragment,c),_(s.$$.fragment,c),f=!1},d(c){c&&(d(e),d(l),d(t),d(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(s,c)}}}function kr(o){let e,l,t,n=o[11].scheme_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Scheme type",t=S(`
          : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_type+"")&&A(r,n)},d(s){s&&d(e)}}}function yr(o){let e,l,t,n=o[11].atf4_lead_type+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="ATF4 lead type",t=S(`
          : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&32&&n!==(n=s[11].atf4_lead_type+"")&&A(r,n)},d(s){s&&d(e)}}}function Sr(o){let e,l,t,n=o[11].scheme_description+"",r;return{c(){e=y("p"),l=y("b"),l.textContent="Descripton",t=S(`
          : `),r=S(n)},m(s,f){h(s,e,f),p(e,l),p(e,t),p(e,r)},p(s,f){f&32&&n!==(n=s[11].scheme_description+"")&&A(r,n)},d(s){s&&d(e)}}}function Am(o){let e;return{c(){e=S("Edit a copy of this scheme")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function qm(o){let e;return{c(){e=S("Edit your existing version of this scheme")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Hm(o){let e;function l(r,s){var f;return(f=r[5].browse)!=null&&f.local_filename?qm:Am}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),h(r,e,s)},p(r,s){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&d(e),n.d(r)}}}function zm(o){let e;return{c(){e=S("Zoom to show entire scheme")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Tr(o){var fn,un,cn,$n;let e,l,t,n,r,s,f,i=ut(o[1].name,o[3])+"",a,u=o[1].intervention_type+"",c,$,g,k,C,T,I,O,N,F,M,j,H,P,R,W,ce=ut(o[5].scheme_name??"",o[2])+"",D,K,J,fe,ye,le=ut(o[1].scheme_reference,o[2])+"",Ce,nt,gt,lt,at=((fn=o[5].browse)==null?void 0:fn.authority_or_region)+"",Je,ft,ht,dt,de,He,Me,wt,Ee,ze,Ne=o[1].length_meters&&ar(o),Fe=o[1].description&&fr(o),Se=o[1].pipeline&&ur(Ln(o)),Re=o[1].v2&&mr(Cn(o)),Pe=((un=o[5].browse)==null?void 0:un.capital_scheme_id)&&dr(o),Ge=((cn=o[5].browse)==null?void 0:cn.funding_programme)&&wr(o),De=(($n=o[5].browse)==null?void 0:$n.current_milestone)&&br(o),Te=o[5].pipeline&&vr(Tn(o));return Me=new Ye({props:{$$slots:{default:[Hm]},$$scope:{ctx:o}}}),Me.$on("click",o[7]),Ee=new Ye({props:{$$slots:{default:[zm]},$$scope:{ctx:o}}}),Ee.$on("click",o[6]),{c(){e=y("div"),l=y("h2"),l.textContent="Intervention",t=L(),n=y("p"),r=y("b"),r.textContent="Name",s=S(`
      : `),f=new Et(!1),a=S(" ("),c=S(u),$=S(")"),g=L(),Ne&&Ne.c(),k=L(),Fe&&Fe.c(),C=L(),Se&&Se.c(),T=L(),Re&&Re.c(),I=L(),O=y("hr"),N=L(),F=y("h2"),M=S(o[0]),j=L(),H=y("p"),P=y("b"),P.textContent="Scheme name",R=S(`
      : `),W=new Et(!1),D=L(),K=y("p"),J=y("b"),J.textContent="Scheme reference",fe=S(`
      : `),ye=new Et(!1),Ce=L(),nt=y("p"),gt=y("b"),gt.textContent="Authority or region",lt=S(`
      : `),Je=S(at),ft=L(),Pe&&Pe.c(),ht=L(),Ge&&Ge.c(),dt=L(),De&&De.c(),de=L(),Te&&Te.c(),He=L(),w(Me.$$.fragment),wt=L(),w(Ee.$$.fragment),f.a=a,W.a=null,ye.a=null,re(e,"max-width","30vw"),re(e,"max-height","60vh"),re(e,"overflow","auto")},m(se,he){h(se,e,he),p(e,l),p(e,t),p(e,n),p(n,r),p(n,s),f.m(i,n),p(n,a),p(n,c),p(n,$),p(e,g),Ne&&Ne.m(e,null),p(e,k),Fe&&Fe.m(e,null),p(e,C),Se&&Se.m(e,null),p(e,T),Re&&Re.m(e,null),p(e,I),p(e,O),p(e,N),p(e,F),p(F,M),p(e,j),p(e,H),p(H,P),p(H,R),W.m(ce,H),p(e,D),p(e,K),p(K,J),p(K,fe),ye.m(le,K),p(e,Ce),p(e,nt),p(nt,gt),p(nt,lt),p(nt,Je),p(e,ft),Pe&&Pe.m(e,null),p(e,ht),Ge&&Ge.m(e,null),p(e,dt),De&&De.m(e,null),p(e,de),Te&&Te.m(e,null),p(e,He),b(Me,e,null),p(e,wt),b(Ee,e,null),o[9](e),ze=!0},p(se,he){var mn,Jn,Qn,Vn;(!ze||he&10)&&i!==(i=ut(se[1].name,se[3])+"")&&f.p(i),(!ze||he&2)&&u!==(u=se[1].intervention_type+"")&&A(c,u),se[1].length_meters?Ne?Ne.p(se,he):(Ne=ar(se),Ne.c(),Ne.m(e,k)):Ne&&(Ne.d(1),Ne=null),se[1].description?Fe?Fe.p(se,he):(Fe=fr(se),Fe.c(),Fe.m(e,C)):Fe&&(Fe.d(1),Fe=null),se[1].pipeline?Se?(Se.p(Ln(se),he),he&2&&m(Se,1)):(Se=ur(Ln(se)),Se.c(),m(Se,1),Se.m(e,T)):Se&&(we(),_(Se,1,1,()=>{Se=null}),be()),se[1].v2?Re?Re.p(Cn(se),he):(Re=mr(Cn(se)),Re.c(),Re.m(e,I)):Re&&(Re.d(1),Re=null),(!ze||he&1)&&A(M,se[0]),(!ze||he&36)&&ce!==(ce=ut(se[5].scheme_name??"",se[2])+"")&&W.p(ce),(!ze||he&6)&&le!==(le=ut(se[1].scheme_reference,se[2])+"")&&ye.p(le),(!ze||he&32)&&at!==(at=((mn=se[5].browse)==null?void 0:mn.authority_or_region)+"")&&A(Je,at),(Jn=se[5].browse)!=null&&Jn.capital_scheme_id?Pe?Pe.p(se,he):(Pe=dr(se),Pe.c(),Pe.m(e,ht)):Pe&&(Pe.d(1),Pe=null),(Qn=se[5].browse)!=null&&Qn.funding_programme?Ge?Ge.p(se,he):(Ge=wr(se),Ge.c(),Ge.m(e,dt)):Ge&&(Ge.d(1),Ge=null),(Vn=se[5].browse)!=null&&Vn.current_milestone?De?De.p(se,he):(De=br(se),De.c(),De.m(e,de)):De&&(De.d(1),De=null),se[5].pipeline?Te?(Te.p(Tn(se),he),he&32&&m(Te,1)):(Te=vr(Tn(se)),Te.c(),m(Te,1),Te.m(e,He)):Te&&(we(),_(Te,1,1,()=>{Te=null}),be());const B={};he&4128&&(B.$$scope={dirty:he,ctx:se}),Me.$set(B);const pn={};he&4096&&(pn.$$scope={dirty:he,ctx:se}),Ee.$set(pn)},i(se){ze||(m(Se),m(Te),m(Me.$$.fragment,se),m(Ee.$$.fragment,se),ze=!0)},o(se){_(Se),_(Te),_(Me.$$.fragment,se),_(Ee.$$.fragment,se),ze=!1},d(se){se&&d(e),Ne&&Ne.d(),Fe&&Fe.d(),Se&&Se.d(),Re&&Re.d(),Pe&&Pe.d(),Ge&&Ge.d(),De&&De.d(),Te&&Te.d(),v(Me),v(Ee),o[9](null)}}}function Bm(o){let e=o[1],l,t,n=Tr(o);return{c(){n.c(),l=ve()},m(r,s){n.m(r,s),h(r,l,s),t=!0},p(r,[s]){s&2&&V(e,e=r[1])?(we(),_(n,1,1,Q),be(),n=Tr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n.p(r,s)},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n.d(r)}}}function ut(o,e){return e?o.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):o}function Um(o,e,l){let t,n;Y(o,Sn,k=>l(10,n=k));let{description:r}=e,{props:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,u;po(()=>{u&&l(4,u.scrollTop=0,u)});function c(){let k={type:"FeatureCollection",features:f.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(Zr(k),{padding:20,animate:!1})}function $(){var I,O,N;let k={type:"FeatureCollection",features:f.features.filter(F=>F.properties.scheme_reference==t.scheme_reference),schemes:{}};k.schemes[t.scheme_reference]=t;let C=(I=t.browse)==null?void 0:I.authority_or_region;if(!C){window.alert("This scheme has no authority specified, you can't edit this");return}let T=t.pipeline?"pipeline":t.v2?"v2":"v1";if((O=t.browse)!=null&&O.local_filename)window.open(nl(C,(N=t.browse)==null?void 0:N.local_filename,T),"_blank");else{let F=`browse_copy_${t.scheme_reference}`,M=Bo(C,k);for(let j of M.features)delete j.properties.funding_programme,delete j.properties.current_milestone;Uo(Eo(C,F),JSON.stringify(M)),window.open(nl(C,F,T),"_blank")}}function g(k){z[k?"unshift":"push"](()=>{u=k,l(4,u)})}return o.$$set=k=>{"description"in k&&l(0,r=k.description),"props"in k&&l(1,s=k.props),"schemesGj"in k&&l(8,f=k.schemesGj),"filterSchemeText"in k&&l(2,i=k.filterSchemeText),"filterInterventionText"in k&&l(3,a=k.filterInterventionText)},o.$$.update=()=>{o.$$.dirty&258&&l(5,t=f.schemes[s.scheme_reference])},[r,s,i,a,u,t,c,$,f,g]}class En extends Z{constructor(e){super(),X(this,e,Um,Bm,V,{description:0,props:1,schemesGj:8,filterSchemeText:2,filterInterventionText:3})}}function Em(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&d(e)}}}function Wm(o){let e,l;return e=new En({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ym(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Em,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Wm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),h(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function Jm(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&d(e)}}}function Qm(o){let e,l;return e=new En({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Vm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Jm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Qm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),h(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function Km(o){let e,l=o[10].name+"",t;return{c(){e=y("p"),t=S(l)},m(n,r){h(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&A(t,l)},d(n){n&&d(e)}}}function Zm(o){let e,l;return e=new En({props:{description:o[1],props:o[10],schemesGj:o[3],filterSchemeText:o[4],filterInterventionText:o[5]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&2&&(r.description=t[1]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Xm(o){let e,l,t,n;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Km,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Zm,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment)},m(r,s){b(e,r,s),h(r,l,s),b(t,r,s),n=!0},p(r,s){const f={};s&3072&&(f.$$scope={dirty:s,ctx:r}),e.$set(f);const i={};s&3130&&(i.$$scope={dirty:s,ctx:r}),t.$set(i)},i(r){n||(m(e.$$.fragment,r),m(t.$$.fragment,r),n=!0)},o(r){_(e.$$.fragment,r),_(t.$$.fragment,r),n=!1},d(r){r&&d(l),v(e,r),v(t,r)}}}function xm(o){let e,l,t,n,r,s,f,i,a,u;const c=[q(`${o[0]}-interventions-points`),{filter:["all",Pn,o[8],o[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":o[6],"circle-radius":xn,"circle-opacity":ee(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let $={$$slots:{default:[Ym]},$$scope:{ctx:o}};for(let M=0;M<c.length;M+=1)$=x($,c[M]);e=new pt({props:$});const g=[q(`${o[0]}-interventions-lines`),{filter:["all",Rn,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":o[6],"line-width":tn,"line-opacity":ee(1,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[Vm]},$$scope:{ctx:o}};for(let M=0;M<g.length;M+=1)k=x(k,g[M]);t=new ge({props:k});const C=[q(`${o[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*tn,"circle-opacity":0,"circle-stroke-color":rt.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:o[2]?"visible":"none"}}];let T={};for(let M=0;M<C.length;M+=1)T=x(T,C[M]);r=new pt({props:T});const I=[q(`${o[0]}-interventions-polygons`),{filter:["all",_n,o[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":o[6],"fill-opacity":ee(.2,.5)}},{layout:{visibility:o[2]?"visible":"none"}},{hoverCursor:"pointer"}];let O={$$slots:{default:[Xm]},$$scope:{ctx:o}};for(let M=0;M<I.length;M+=1)O=x(O,I[M]);f=new qe({props:O});const N=[q(`${o[0]}-interventions-polygons-outlines`),{filter:["all",_n,o[8]]},{paint:{"line-color":o[6],"line-opacity":.5,"line-width":.7*tn}},{layout:{visibility:o[2]?"visible":"none"}}];let F={};for(let M=0;M<N.length;M+=1)F=x(F,N[M]);return a=new ge({props:F}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(M,j){b(e,M,j),h(M,l,j),b(t,M,j),h(M,n,j),b(r,M,j),h(M,s,j),b(f,M,j),h(M,i,j),b(a,M,j),u=!0},p(M,j){const H=j&837?te(c,[j&1&&ie(q(`${M[0]}-interventions-points`)),j&768&&{filter:["all",Pn,M[8],M[9]]},c[2],c[3],j&64&&{paint:{"circle-color":M[6],"circle-radius":xn,"circle-opacity":ee(1,.5)}},j&4&&{layout:{visibility:M[2]?"visible":"none"}},c[6]]):{};j&2106&&(H.$$scope={dirty:j,ctx:M}),e.$set(H);const P=j&325?te(g,[j&1&&ie(q(`${M[0]}-interventions-lines`)),j&256&&{filter:["all",Rn,M[8]]},g[2],g[3],j&64&&{paint:{"line-color":M[6],"line-width":tn,"line-opacity":ee(1,.5)}},j&4&&{layout:{visibility:M[2]?"visible":"none"}},g[6]]):{};j&2106&&(P.$$scope={dirty:j,ctx:M}),t.$set(P);const R=j&5?te(C,[j&1&&ie(q(`${M[0]}-interventions-lines-endpoints`)),C[1],C[2],j&4&&{layout:{visibility:M[2]?"visible":"none"}}]):{};r.$set(R);const W=j&325?te(I,[j&1&&ie(q(`${M[0]}-interventions-polygons`)),j&256&&{filter:["all",_n,M[8]]},I[2],I[3],j&64&&{paint:{"fill-color":M[6],"fill-opacity":ee(.2,.5)}},j&4&&{layout:{visibility:M[2]?"visible":"none"}},I[6]]):{};j&2106&&(W.$$scope={dirty:j,ctx:M}),f.$set(W);const ce=j&325?te(N,[j&1&&ie(q(`${M[0]}-interventions-polygons-outlines`)),j&256&&{filter:["all",_n,M[8]]},j&64&&{paint:{"line-color":M[6],"line-opacity":.5,"line-width":.7*tn}},j&4&&{layout:{visibility:M[2]?"visible":"none"}}]):{};a.$set(ce)},i(M){u||(m(e.$$.fragment,M),m(t.$$.fragment,M),m(r.$$.fragment,M),m(f.$$.fragment,M),m(a.$$.fragment,M),u=!0)},o(M){_(e.$$.fragment,M),_(t.$$.fragment,M),_(r.$$.fragment,M),_(f.$$.fragment,M),_(a.$$.fragment,M),u=!1},d(M){M&&(d(l),d(n),d(s),d(i)),v(e,M),v(t,M),v(r,M),v(f,M),v(a,M)}}}function e_(o){let e,l;return e=new _t({props:{data:o[7],$$slots:{default:[xm]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function t_(o,e,l){let t,{name:n}=e,{description:r}=e,{show:s}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],$=["!=",["get","endpoint"],!0];return o.$$set=g=>{"name"in g&&l(0,n=g.name),"description"in g&&l(1,r=g.description),"show"in g&&l(2,s=g.show),"schemesGj"in g&&l(3,f=g.schemesGj),"filterSchemeText"in g&&l(4,i=g.filterSchemeText),"filterInterventionText"in g&&l(5,a=g.filterInterventionText),"color"in g&&l(6,u=g.color)},o.$$.update=()=>{o.$$.dirty&8&&l(7,t=So(f))},[n,r,s,f,i,a,u,t,c,$]}class gn extends Z{constructor(e){super(),X(this,e,t_,e_,V,{name:0,description:1,show:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function n_(o){let e;function l(r,s){return r[2]<=100?o_:r_}let t=l(o),n=t(o);return{c(){n.c(),e=ve()},m(r,s){n.m(r,s),h(r,e,s)},p(r,s){t===(t=l(r))&&n?n.p(r,s):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:Q,o:Q,d(r){r&&d(e),n.d(r)}}}function l_(o){let e,l;return e=new Ye({props:{$$slots:{default:[s_]},$$scope:{ctx:o}}}),e.$on("click",o[3]),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function r_(o){let e;return{c(){e=y("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){h(l,e,t)},p:Q,d(l){l&&d(e)}}}function o_(o){let e,l,t;return{c(){e=y("label"),l=S(`Downloading scheme data
      `),t=y("progress"),t.value=o[2],G(t,"class","svelte-q3473n")},m(n,r){h(n,e,r),p(e,l),p(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&d(e)}}}function s_(o){let e;return{c(){e=S("Load latest scheme data")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function i_(o){let e,l,t,n;const r=[l_,n_],s=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(o))&&(l=s[e]=r[e](o)),{c(){l&&l.c(),t=ve()},m(i,a){~e&&s[e].m(i,a),h(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&s[e].p(i,a):(l&&(we(),_(s[u],1,1,()=>{s[u]=null}),be()),~e?(l=s[e],l?l.p(i,a):(l=s[e]=r[e](i),l.c()),m(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||(m(l),n=!0)},o(i){_(l),n=!1},d(i){i&&d(t),~e&&s[e].d(i)}}}function a_(o,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,s=0;async function f(){let a=await mo(`${en()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,s=c)});l(2,s=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}Vr(async()=>{n&&await f()});async function i(){l(0,n=!0),await f();let a=new URL(window.location.href);a.searchParams.delete("disable_schemes"),Bn(a)}return o.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,s,i,t]}class f_ extends Z{constructor(e){super(),X(this,e,a_,i_,V,{loadFile:4})}}const wn=Ie({type:"FeatureCollection",features:[],schemes:{}}),Cr=Ie(""),Lr=Ie(""),In=Ie({type:"FeatureCollection",features:[],schemes:{}}),Ir=Ie(""),Or=Ie(""),hn=Ie({type:"FeatureCollection",features:[],schemes:{}}),On=Ie(""),jn=Ie(""),Mn=Ie({type:"FeatureCollection",features:[],schemes:{}}),jr=Ie(""),Mr=Ie("");function Nr(o,e,l){const t=o.slice();return t[60]=e[l],t}function Fr(o,e,l){const t=o.slice();return t[60]=e[l],t}function Rr(o,e,l){const t=o.slice();return t[60]=e[l],t}function Pr(o,e,l){const t=o.slice();return t[60]=e[l],t}function Gr(o,e,l){const t=o.slice();return t[60]=e[l],t}function u_(o){let e,l;return e=new f_({props:{loadFile:o[32]}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:Q,i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Dr(o){let e,l,t;function n(s){o[39](s)}let r={name:oo,title:so,$$slots:{controls:[$_],help:[c_]},$$scope:{ctx:o}};return o[16]!==void 0&&(r.show=o[16]),e=new ue({props:r}),z.push(()=>U(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&918529|f[2]&512&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&65536&&(l=!0,i.show=s[16],E(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ar(o){let e,l,t=o[60]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){h(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&131072&&t!==(t=r[60]+"")&&A(n,t)},d(r){r&&d(e)}}}function c_(o){let e,l,t,n,r,s,f;t=new sn({props:{text:"Scheme data caveats"}});let i=$e(o[17].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Ar(Gr(o,i,u));return{c(){e=y("span"),l=y("p"),w(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){h(u,e,c),p(e,l),b(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&131072){i=$e(u[17].notes??[]);let $;for($=0;$<i.length;$+=1){const g=Gr(u,i,$);a[$]?a[$].p(g,c):(a[$]=Ar(g),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),Ae(a,u)}}}function $_(o){let e,l,t,n,r,s,f,i,a,u,c;function $(O){o[35](O)}function g(O){o[36](O)}function k(O){o[37](O)}let C={source:"ATF"};o[17]!==void 0&&(C.schemesGj=o[17]),o[18]!==void 0&&(C.filterSchemeText=o[18]),o[19]!==void 0&&(C.filterInterventionText=o[19]),l=new an({props:C}),z.push(()=>U(l,"schemesGj",$)),z.push(()=>U(l,"filterSchemeText",g)),z.push(()=>U(l,"filterInterventionText",k));function T(O){o[38](O)}let I={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return o[0]!==void 0&&(I.value=o[0]),f=new $t({props:I}),z.push(()=>U(f,"value",T)),u=new ot({props:{rows:o[10]}}),{c(){e=y("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(O,N){h(O,e,N),b(l,e,null),p(e,s),b(f,e,null),p(e,a),b(u,e,null),c=!0},p(O,N){const F={};!t&&N[0]&131072&&(t=!0,F.schemesGj=O[17],E(()=>t=!1)),!n&&N[0]&262144&&(n=!0,F.filterSchemeText=O[18],E(()=>n=!1)),!r&&N[0]&524288&&(r=!0,F.filterInterventionText=O[19],E(()=>r=!1)),l.$set(F);const M={};!i&&N[0]&1&&(i=!0,M.value=O[0],E(()=>i=!1)),f.$set(M);const j={};N[0]&1024&&(j.rows=O[10]),u.$set(j)},i(O){c||(m(l.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),c=!0)},o(O){_(l.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),c=!1},d(O){O&&d(e),v(l),v(f),v(u)}}}function qr(o){let e,l,t;function n(s){o[44](s)}let r={name:io,title:ao,$$slots:{controls:[m_],help:[p_]},$$scope:{ctx:o}};return o[14]!==void 0&&(r.show=o[14]),e=new ue({props:r}),z.push(()=>U(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&7340104|f[2]&512&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&16384&&(l=!0,i.show=s[14],E(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Hr(o){let e,l,t=o[60]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){h(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&1048576&&t!==(t=r[60]+"")&&A(n,t)},d(r){r&&d(e)}}}function p_(o){let e,l,t,n,r,s,f;t=new sn({props:{text:"Scheme data caveats"}});let i=$e(o[20].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Hr(Pr(o,i,u));return{c(){e=y("span"),l=y("p"),w(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){h(u,e,c),p(e,l),b(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&1048576){i=$e(u[20].notes??[]);let $;for($=0;$<i.length;$+=1){const g=Pr(u,i,$);a[$]?a[$].p(g,c):(a[$]=Hr(g),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),Ae(a,u)}}}function m_(o){let e,l,t,n,r,s,f,i,a,u,c;function $(O){o[40](O)}function g(O){o[41](O)}function k(O){o[42](O)}let C={source:"LCWIP"};o[20]!==void 0&&(C.schemesGj=o[20]),o[21]!==void 0&&(C.filterSchemeText=o[21]),o[22]!==void 0&&(C.filterInterventionText=o[22]),l=new an({props:C}),z.push(()=>U(l,"schemesGj",$)),z.push(()=>U(l,"filterSchemeText",g)),z.push(()=>U(l,"filterInterventionText",k));function T(O){o[43](O)}let I={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[3]!==void 0&&(I.value=o[3]),f=new $t({props:I}),z.push(()=>U(f,"value",T)),u=new ot({props:{rows:o[6]}}),{c(){e=y("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(O,N){h(O,e,N),b(l,e,null),p(e,s),b(f,e,null),p(e,a),b(u,e,null),c=!0},p(O,N){const F={};!t&&N[0]&1048576&&(t=!0,F.schemesGj=O[20],E(()=>t=!1)),!n&&N[0]&2097152&&(n=!0,F.filterSchemeText=O[21],E(()=>n=!1)),!r&&N[0]&4194304&&(r=!0,F.filterInterventionText=O[22],E(()=>r=!1)),l.$set(F);const M={};!i&&N[0]&8&&(i=!0,M.value=O[3],E(()=>i=!1)),f.$set(M);const j={};N[0]&64&&(j.rows=O[6]),u.$set(j)},i(O){c||(m(l.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),c=!0)},o(O){_(l.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),c=!1},d(O){O&&d(e),v(l),v(f),v(u)}}}function zr(o){let e,l,t;function n(s){o[49](s)}let r={name:Wn,title:Yn,$$slots:{controls:[g_],help:[__]},$$scope:{ctx:o}};return o[15]!==void 0&&(r.show=o[15]),e=new ue({props:r}),z.push(()=>U(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&58720514|f[2]&512&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&32768&&(l=!0,i.show=s[15],E(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Br(o){let e,l,t=o[60]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){h(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&8388608&&t!==(t=r[60]+"")&&A(n,t)},d(r){r&&d(e)}}}function __(o){let e,l,t,n,r,s,f;t=new sn({props:{text:"Scheme data caveats"}});let i=$e(o[23].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Br(Rr(o,i,u));return{c(){e=y("span"),l=y("p"),w(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){h(u,e,c),p(e,l),b(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&8388608){i=$e(u[23].notes??[]);let $;for($=0;$<i.length;$+=1){const g=Rr(u,i,$);a[$]?a[$].p(g,c):(a[$]=Br(g),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),Ae(a,u)}}}function g_(o){let e,l,t,n,r,s,f,i,a,u,c;function $(O){o[45](O)}function g(O){o[46](O)}function k(O){o[47](O)}let C={source:"LCWIP"};o[23]!==void 0&&(C.schemesGj=o[23]),o[24]!==void 0&&(C.filterSchemeText=o[24]),o[25]!==void 0&&(C.filterInterventionText=o[25]),l=new an({props:C}),z.push(()=>U(l,"schemesGj",$)),z.push(()=>U(l,"filterSchemeText",g)),z.push(()=>U(l,"filterInterventionText",k));function T(O){o[48](O)}let I={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(I.value=o[1]),f=new $t({props:I}),z.push(()=>U(f,"value",T)),u=new ot({props:{rows:o[8]}}),{c(){e=y("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(O,N){h(O,e,N),b(l,e,null),p(e,s),b(f,e,null),p(e,a),b(u,e,null),c=!0},p(O,N){const F={};!t&&N[0]&8388608&&(t=!0,F.schemesGj=O[23],E(()=>t=!1)),!n&&N[0]&16777216&&(n=!0,F.filterSchemeText=O[24],E(()=>n=!1)),!r&&N[0]&33554432&&(r=!0,F.filterInterventionText=O[25],E(()=>r=!1)),l.$set(F);const M={};!i&&N[0]&2&&(i=!0,M.value=O[1],E(()=>i=!1)),f.$set(M);const j={};N[0]&256&&(j.rows=O[8]),u.$set(j)},i(O){c||(m(l.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),c=!0)},o(O){_(l.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),c=!1},d(O){O&&d(e),v(l),v(f),v(u)}}}function Ur(o){let e,l,t;function n(s){o[54](s)}let r={name:Wn,title:Yn,$$slots:{controls:[d_],help:[h_]},$$scope:{ctx:o}};return o[15]!==void 0&&(r.show=o[15]),e=new ue({props:r}),z.push(()=>U(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&58720514|f[2]&512&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&32768&&(l=!0,i.show=s[15],E(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Er(o){let e,l,t=o[60]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){h(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&8388608&&t!==(t=r[60]+"")&&A(n,t)},d(r){r&&d(e)}}}function h_(o){let e,l,t,n,r,s,f;t=new sn({props:{text:"Scheme data caveats"}});let i=$e(o[23].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Er(Fr(o,i,u));return{c(){e=y("span"),l=y("p"),w(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){h(u,e,c),p(e,l),b(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&8388608){i=$e(u[23].notes??[]);let $;for($=0;$<i.length;$+=1){const g=Fr(u,i,$);a[$]?a[$].p(g,c):(a[$]=Er(g),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),Ae(a,u)}}}function d_(o){let e,l,t,n,r,s,f,i,a,u,c;function $(O){o[50](O)}function g(O){o[51](O)}function k(O){o[52](O)}let C={source:"LCWIP"};o[23]!==void 0&&(C.schemesGj=o[23]),o[24]!==void 0&&(C.filterSchemeText=o[24]),o[25]!==void 0&&(C.filterInterventionText=o[25]),l=new an({props:C}),z.push(()=>U(l,"schemesGj",$)),z.push(()=>U(l,"filterSchemeText",g)),z.push(()=>U(l,"filterInterventionText",k));function T(O){o[53](O)}let I={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return o[1]!==void 0&&(I.value=o[1]),f=new $t({props:I}),z.push(()=>U(f,"value",T)),u=new ot({props:{rows:o[8]}}),{c(){e=y("div"),w(l.$$.fragment),s=L(),w(f.$$.fragment),a=L(),w(u.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(O,N){h(O,e,N),b(l,e,null),p(e,s),b(f,e,null),p(e,a),b(u,e,null),c=!0},p(O,N){const F={};!t&&N[0]&8388608&&(t=!0,F.schemesGj=O[23],E(()=>t=!1)),!n&&N[0]&16777216&&(n=!0,F.filterSchemeText=O[24],E(()=>n=!1)),!r&&N[0]&33554432&&(r=!0,F.filterInterventionText=O[25],E(()=>r=!1)),l.$set(F);const M={};!i&&N[0]&2&&(i=!0,M.value=O[1],E(()=>i=!1)),f.$set(M);const j={};N[0]&256&&(j.rows=O[8]),u.$set(j)},i(O){c||(m(l.$$.fragment,O),m(f.$$.fragment,O),m(u.$$.fragment,O),c=!0)},o(O){_(l.$$.fragment,O),_(f.$$.fragment,O),_(u.$$.fragment,O),c=!1},d(O){O&&d(e),v(l),v(f),v(u)}}}function w_(o){let e=Object.entries(o[17].schemes).length>0,l,t=Object.entries(o[20].schemes).length>0,n,r=Object.entries(o[23].schemes).length>0,s,f=Object.entries(o[23].schemes).length>0,i,a,u=e&&Dr(o),c=t&&qr(o),$=r&&zr(o),g=f&&Ur(o);return{c(){u&&u.c(),l=L(),c&&c.c(),n=L(),$&&$.c(),s=L(),g&&g.c(),i=ve()},m(k,C){u&&u.m(k,C),h(k,l,C),c&&c.m(k,C),h(k,n,C),$&&$.m(k,C),h(k,s,C),g&&g.m(k,C),h(k,i,C),a=!0},p(k,C){C[0]&131072&&(e=Object.entries(k[17].schemes).length>0),e?u?(u.p(k,C),C[0]&131072&&m(u,1)):(u=Dr(k),u.c(),m(u,1),u.m(l.parentNode,l)):u&&(we(),_(u,1,1,()=>{u=null}),be()),C[0]&1048576&&(t=Object.entries(k[20].schemes).length>0),t?c?(c.p(k,C),C[0]&1048576&&m(c,1)):(c=qr(k),c.c(),m(c,1),c.m(n.parentNode,n)):c&&(we(),_(c,1,1,()=>{c=null}),be()),C[0]&8388608&&(r=Object.entries(k[23].schemes).length>0),r?$?($.p(k,C),C[0]&8388608&&m($,1)):($=zr(k),$.c(),m($,1),$.m(s.parentNode,s)):$&&(we(),_($,1,1,()=>{$=null}),be()),C[0]&8388608&&(f=Object.entries(k[23].schemes).length>0),f?g?(g.p(k,C),C[0]&8388608&&m(g,1)):(g=Ur(k),g.c(),m(g,1),g.m(i.parentNode,i)):g&&(we(),_(g,1,1,()=>{g=null}),be())},i(k){a||(m(u),m(c),m($),m(g),a=!0)},o(k){_(u),_(c),_($),_(g),a=!1},d(k){k&&(d(l),d(n),d(s),d(i)),u&&u.d(k),c&&c.d(k),$&&$.d(k),g&&g.d(k)}}}function b_(o){let e;return{c(){e=S("Show your sketches")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function Wr(o){let e,l,t;function n(s){o[58](s)}let r={name:fo,title:uo,$$slots:{controls:[S_],help:[v_]},$$scope:{ctx:o}};return o[13]!==void 0&&(r.show=o[13]),e=new ue({props:r}),z.push(()=>U(e,"show",n)),{c(){w(e.$$.fragment)},m(s,f){b(e,s,f),t=!0},p(s,f){const i={};f[0]&201330704|f[2]&512&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&8192&&(l=!0,i.show=s[13],E(()=>l=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Yr(o){let e,l,t=o[60]+"",n;return{c(){e=y("li"),l=y("p"),n=S(t)},m(r,s){h(r,e,s),p(e,l),p(l,n)},p(r,s){s[0]&4096&&t!==(t=r[60]+"")&&A(n,t)},d(r){r&&d(e)}}}function v_(o){let e,l,t,n,r,s,f;t=new sn({props:{text:"Scheme data caveats"}});let i=$e(o[12].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=Yr(Nr(o,i,u));return{c(){e=y("span"),l=y("p"),w(t.$$.fragment),n=S(`Please note there are data
            quality caveats for all scheme data:`),r=L(),s=y("ul");for(let u=0;u<a.length;u+=1)a[u].c();G(e,"slot","help")},m(u,c){h(u,e,c),p(e,l),b(t,l,null),p(l,n),p(e,r),p(e,s);for(let $=0;$<a.length;$+=1)a[$]&&a[$].m(s,null);f=!0},p(u,c){if(c[0]&4096){i=$e(u[12].notes??[]);let $;for($=0;$<i.length;$+=1){const g=Nr(u,i,$);a[$]?a[$].p(g,c):(a[$]=Yr(g),a[$].c(),a[$].m(s,null))}for(;$<a.length;$+=1)a[$].d(1);a.length=i.length}},i(u){f||(m(t.$$.fragment,u),f=!0)},o(u){_(t.$$.fragment,u),f=!1},d(u){u&&d(e),v(t),Ae(a,u)}}}function k_(o){let e;return{c(){e=S("Download all schemes")},m(l,t){h(l,e,t)},d(l){l&&d(e)}}}function y_(o){let e,l,t,n,r,s,f;function i($){o[55]($)}function a($){o[56]($)}function u($){o[57]($)}let c={source:"Local"};return o[12]!==void 0&&(c.schemesGj=o[12]),o[26]!==void 0&&(c.filterSchemeText=o[26]),o[27]!==void 0&&(c.filterInterventionText=o[27]),e=new an({props:c}),z.push(()=>U(e,"schemesGj",i)),z.push(()=>U(e,"filterSchemeText",a)),z.push(()=>U(e,"filterInterventionText",u)),s=new Ye({props:{$$slots:{default:[k_]},$$scope:{ctx:o}}}),s.$on("click",o[34]),{c(){w(e.$$.fragment),r=L(),w(s.$$.fragment)},m($,g){b(e,$,g),h($,r,g),b(s,$,g),f=!0},p($,g){const k={};!l&&g[0]&4096&&(l=!0,k.schemesGj=$[12],E(()=>l=!1)),!t&&g[0]&67108864&&(t=!0,k.filterSchemeText=$[26],E(()=>t=!1)),!n&&g[0]&134217728&&(n=!0,k.filterInterventionText=$[27],E(()=>n=!1)),e.$set(k);const C={};g[2]&512&&(C.$$scope={dirty:g,ctx:$}),s.$set(C)},i($){f||(m(e.$$.fragment,$),m(s.$$.fragment,$),f=!0)},o($){_(e.$$.fragment,$),_(s.$$.fragment,$),f=!1},d($){$&&d(r),v(e,$),v(s,$)}}}function S_(o){let e,l,t,n,r;return l=new Ho({props:{$$slots:{default:[y_]},$$scope:{ctx:o}}}),n=new ot({props:{rows:o[4]}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),G(e,"slot","controls"),re(e,"border","1px solid black"),re(e,"padding","8px")},m(s,f){h(s,e,f),b(l,e,null),p(e,t),b(n,e,null),r=!0},p(s,f){const i={};f[0]&201330688|f[2]&512&&(i.$$scope={dirty:f,ctx:s}),l.$set(i);const a={};f[0]&16&&(a.rows=s[4]),n.$set(a)},i(s){r||(m(l.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(l.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&d(e),v(l),v(n)}}}function T_(o){let e=Object.entries(o[12].schemes).length>0,l,t,n=e&&Wr(o);return{c(){n&&n.c(),l=ve()},m(r,s){n&&n.m(r,s),h(r,l,s),t=!0},p(r,s){s[0]&4096&&(e=Object.entries(r[12].schemes).length>0),e?n?(n.p(r,s),s[0]&4096&&m(n,1)):(n=Wr(r),n.c(),m(n,1),n.m(l.parentNode,l)):n&&(we(),_(n,1,1,()=>{n=null}),be())},i(r){t||(m(n),t=!0)},o(r){_(n),t=!1},d(r){r&&d(l),n&&n.d(r)}}}function C_(o){let e=Kr()=="Private (development)",l,t,n,r,s,f,i,a,u,c,$,g,k,C=e&&u_(o);return t=new Be({props:{small:!0,$$slots:{default:[w_]},$$scope:{ctx:o}}}),r=new xr({props:{label:"Load schemes from GeoJSON",onLoad:o[32]}}),f=new qo({props:{errorMessage:o[2]}}),c=new Ye({props:{$$slots:{default:[b_]},$$scope:{ctx:o}}}),c.$on("click",o[33]),g=new Be({props:{small:!0,$$slots:{default:[T_]},$$scope:{ctx:o}}}),{c(){C&&C.c(),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),a=y("hr"),u=L(),w(c.$$.fragment),$=L(),w(g.$$.fragment)},m(T,I){C&&C.m(T,I),h(T,l,I),b(t,T,I),h(T,n,I),b(r,T,I),h(T,s,I),b(f,T,I),h(T,i,I),h(T,a,I),h(T,u,I),b(c,T,I),h(T,$,I),b(g,T,I),k=!0},p(T,I){e&&C.p(T,I);const O={};I[0]&67093835|I[2]&512&&(O.$$scope={dirty:I,ctx:T}),t.$set(O);const N={};I[0]&4&&(N.errorMessage=T[2]),f.$set(N);const F={};I[2]&512&&(F.$$scope={dirty:I,ctx:T}),c.$set(F);const M={};I[0]&201338896|I[2]&512&&(M.$$scope={dirty:I,ctx:T}),g.$set(M)},i(T){k||(m(C),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(c.$$.fragment,T),m(g.$$.fragment,T),k=!0)},o(T){_(C),_(t.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),_(c.$$.fragment,T),_(g.$$.fragment,T),k=!1},d(T){T&&(d(l),d(n),d(s),d(i),d(a),d(u),d($)),C&&C.d(T),v(t,T),v(r,T),v(f,T),v(c,T),v(g,T)}}}function L_(o){let e,l,t,n,r,s,f,i,a,u;return e=new st({props:{label:"Schemes",open:!0,$$slots:{default:[C_]},$$scope:{ctx:o}}}),t=new gn({props:{name:"atf",description:so,show:o[16],schemesGj:o[17],filterSchemeText:o[18],filterInterventionText:o[19],color:o[11]}}),r=new gn({props:{name:"finalInspections",description:ao,show:o[14],schemesGj:o[20],filterSchemeText:o[21],filterInterventionText:o[22],color:o[7]}}),f=new gn({props:{name:"lcwip",description:Yn,show:o[15],schemesGj:o[23],filterSchemeText:o[24],filterInterventionText:o[25],color:o[9]}}),a=new gn({props:{name:"local",description:uo,show:o[13],schemesGj:o[12],filterSchemeText:o[26],filterInterventionText:o[27],color:o[5]}}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,$){b(e,c,$),h(c,l,$),b(t,c,$),h(c,n,$),b(r,c,$),h(c,s,$),b(f,c,$),h(c,i,$),b(a,c,$),u=!0},p(c,$){const g={};$[0]&268432735|$[2]&512&&(g.$$scope={dirty:$,ctx:c}),e.$set(g);const k={};$[0]&65536&&(k.show=c[16]),$[0]&131072&&(k.schemesGj=c[17]),$[0]&262144&&(k.filterSchemeText=c[18]),$[0]&524288&&(k.filterInterventionText=c[19]),$[0]&2048&&(k.color=c[11]),t.$set(k);const C={};$[0]&16384&&(C.show=c[14]),$[0]&1048576&&(C.schemesGj=c[20]),$[0]&2097152&&(C.filterSchemeText=c[21]),$[0]&4194304&&(C.filterInterventionText=c[22]),$[0]&128&&(C.color=c[7]),r.$set(C);const T={};$[0]&32768&&(T.show=c[15]),$[0]&8388608&&(T.schemesGj=c[23]),$[0]&16777216&&(T.filterSchemeText=c[24]),$[0]&33554432&&(T.filterInterventionText=c[25]),$[0]&512&&(T.color=c[9]),f.$set(T);const I={};$[0]&8192&&(I.show=c[13]),$[0]&4096&&(I.schemesGj=c[12]),$[0]&67108864&&(I.filterSchemeText=c[26]),$[0]&134217728&&(I.filterInterventionText=c[27]),$[0]&32&&(I.color=c[5]),a.$set(I)},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(d(l),d(n),d(s),d(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}let oo="atf_schemes",so="ATF schemes",Wn="lcwip_schemes",Yn="LCWIP schemes",io="final_inspections_schemes",ao="Final inspection schemes",fo="local_schemes",uo="Your schemes";function I_(o,e,l){let t,n,r,s,f,i,a,u,c,$,g,k,C,T,I,O,N,F,M,j,H,P,R,W;Y(o,Mn,B=>l(12,c=B)),Y(o,wn,B=>l(17,T=B)),Y(o,Lr,B=>l(18,I=B)),Y(o,Cr,B=>l(19,O=B)),Y(o,In,B=>l(20,N=B)),Y(o,Or,B=>l(21,F=B)),Y(o,Ir,B=>l(22,M=B)),Y(o,hn,B=>l(23,j=B)),Y(o,jn,B=>l(24,H=B)),Y(o,On,B=>l(25,P=B)),Y(o,Mr,B=>l(26,R=B)),Y(o,jr,B=>l(27,W=B));let ce="",D=pe(oo);Y(o,D,B=>l(16,C=B));let K="fundingProgramme",J=pe(Wn);Y(o,J,B=>l(15,k=B));let fe="interventionType",ye=pe(io);Y(o,ye,B=>l(14,g=B));let le="interventionType",Ce=pe(fo);Y(o,Ce,B=>l(13,$=B));function nt(B,pn){try{cm(JSON.parse(pn),wn,hn,In),vt(D,C=!0,C),vt(J,k=!0,k),vt(ye,g=!0,g),l(2,ce="")}catch(mn){l(2,ce=`The file you loaded is broken: ${mn}`)}}function gt(){vt(Mn,c=pm(),c),vt(Ce,$=!0,$)}function lt(B){return B=="interventionType"?[fm(),um()]:B=="fundingProgramme"?[je(["get","funding_programme"],xt,"grey"),Object.entries(xt)]:B=="currentMilestone"?[je(["get","current_milestone"],An,"grey"),Object.entries(An)]:["red",[]]}function at(){Wo("all_your_schemes.geojson",JSON.stringify(c,null,"  "))}function Je(B){T=B,wn.set(T)}function ft(B){I=B,Lr.set(I)}function ht(B){O=B,Cr.set(O)}function dt(B){K=B,l(0,K)}function de(B){C=B,D.set(C)}function He(B){N=B,In.set(N)}function Me(B){F=B,Or.set(F)}function wt(B){M=B,Ir.set(M)}function Ee(B){le=B,l(3,le)}function ze(B){g=B,ye.set(g)}function Ne(B){j=B,hn.set(j)}function Fe(B){H=B,jn.set(H)}function Se(B){P=B,On.set(P)}function Re(B){fe=B,l(1,fe)}function Pe(B){k=B,J.set(k)}function Ge(B){j=B,hn.set(j)}function De(B){H=B,jn.set(H)}function Te(B){P=B,On.set(P)}function fn(B){fe=B,l(1,fe)}function un(B){k=B,J.set(k)}function cn(B){c=B,Mn.set(c)}function $n(B){R=B,Mr.set(R)}function se(B){W=B,jr.set(W)}function he(B){$=B,Ce.set($)}return o.$$.update=()=>{o.$$.dirty[0]&1&&l(11,[t,n]=lt(K),t,(l(10,n),l(0,K))),o.$$.dirty[0]&2&&l(9,[r,s]=lt(fe),r,(l(8,s),l(1,fe)))},l(7,[f,i]=lt("interventionType"),f,l(6,i)),l(5,[a,u]=lt("interventionType"),a,l(4,u)),[K,fe,ce,le,u,a,i,f,s,r,n,t,c,$,g,k,C,T,I,O,N,F,M,j,H,P,R,W,D,J,ye,Ce,nt,gt,at,Je,ft,ht,dt,de,He,Me,wt,Ee,ze,Ne,Fe,Se,Re,Pe,Ge,De,Te,fn,un,cn,$n,se,he]}class O_ extends Z{constructor(e){super(),X(this,e,I_,L_,V,{},null,[-1,-1,-1])}}function j_(o){let e,l,t,n,r,s,f,i;return e=new N$({}),t=new B$({}),r=new bp({}),f=new fp({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment)},m(a,u){b(e,a,u),h(a,l,u),b(t,a,u),h(a,n,u),b(r,a,u),h(a,s,u),b(f,a,u),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(r.$$.fragment,a),m(f.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(r.$$.fragment,a),_(f.$$.fragment,a),i=!1},d(a){a&&(d(l),d(n),d(s)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function M_(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[j_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function N_(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,k,C,T;return e=new yf({}),t=new Rf({}),r=new uu({}),f=new eu({}),a=new Mc({}),c=new d$({}),g=new i$({}),C=new Xu({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment),u=L(),w(c.$$.fragment),$=L(),w(g.$$.fragment),k=L(),w(C.$$.fragment)},m(I,O){b(e,I,O),h(I,l,O),b(t,I,O),h(I,n,O),b(r,I,O),h(I,s,O),b(f,I,O),h(I,i,O),b(a,I,O),h(I,u,O),b(c,I,O),h(I,$,O),b(g,I,O),h(I,k,O),b(C,I,O),T=!0},i(I){T||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(r.$$.fragment,I),m(f.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(g.$$.fragment,I),m(C.$$.fragment,I),T=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(r.$$.fragment,I),_(f.$$.fragment,I),_(a.$$.fragment,I),_(c.$$.fragment,I),_(g.$$.fragment,I),_(C.$$.fragment,I),T=!1},d(I){I&&(d(l),d(n),d(s),d(i),d(u),d($),d(k)),v(e,I),v(t,I),v(r,I),v(f,I),v(a,I),v(c,I),v(g,I),v(C,I)}}}function F_(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[N_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function R_(o){let e,l,t,n,r,s;return e=new ff({}),t=new qc({}),r=new Vc({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){b(e,f,i),h(f,l,i),b(t,f,i),h(f,n,i),b(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n)),v(e,f),v(t,f),v(r,f)}}}function P_(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[R_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function G_(o){let e,l,t,n,r,s,f,i,a,u;return e=new ha({}),t=new Qa({}),r=new hi({}),f=new qi({}),a=new xi({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,$){b(e,c,$),h(c,l,$),b(t,c,$),h(c,n,$),b(r,c,$),h(c,s,$),b(f,c,$),h(c,i,$),b(a,c,$),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(d(l),d(n),d(s),d(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function D_(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[G_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function A_(o){let e,l,t,n,r,s;return e=new si({}),t=new Ii({}),r=new Da({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment)},m(f,i){b(e,f,i),h(f,l,i),b(t,f,i),h(f,n,i),b(r,f,i),s=!0},i(f){s||(m(e.$$.fragment,f),m(t.$$.fragment,f),m(r.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(t.$$.fragment,f),_(r.$$.fragment,f),s=!1},d(f){f&&(d(l),d(n)),v(e,f),v(t,f),v(r,f)}}}function q_(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[A_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function H_(o){let e,l,t,n,r,s,f,i,a,u;return e=new sa({}),t=new vc({}),r=new yu({}),f=new cc({}),a=new X$({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),w(a.$$.fragment)},m(c,$){b(e,c,$),h(c,l,$),b(t,c,$),h(c,n,$),b(r,c,$),h(c,s,$),b(f,c,$),h(c,i,$),b(a,c,$),u=!0},i(c){u||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(r.$$.fragment,c),m(f.$$.fragment,c),m(a.$$.fragment,c),u=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(r.$$.fragment,c),_(f.$$.fragment,c),_(a.$$.fragment,c),u=!1},d(c){c&&(d(l),d(n),d(s),d(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function z_(o){let e,l,t,n,r,s,f,i,a=Kr()=="Private (development)",u,c,$,g,k;e=new am({}),t=new Ap({}),r=new qu({}),f=new Ef({});let C=a&&H_();return c=new La({}),g=new Kp({}),{c(){w(e.$$.fragment),l=L(),w(t.$$.fragment),n=L(),w(r.$$.fragment),s=L(),w(f.$$.fragment),i=L(),C&&C.c(),u=L(),w(c.$$.fragment),$=L(),w(g.$$.fragment)},m(T,I){b(e,T,I),h(T,l,I),b(t,T,I),h(T,n,I),b(r,T,I),h(T,s,I),b(f,T,I),h(T,i,I),C&&C.m(T,I),h(T,u,I),b(c,T,I),h(T,$,I),b(g,T,I),k=!0},p:Q,i(T){k||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(r.$$.fragment,T),m(f.$$.fragment,T),m(C),m(c.$$.fragment,T),m(g.$$.fragment,T),k=!0)},o(T){_(e.$$.fragment,T),_(t.$$.fragment,T),_(r.$$.fragment,T),_(f.$$.fragment,T),_(C),_(c.$$.fragment,T),_(g.$$.fragment,T),k=!1},d(T){T&&(d(l),d(n),d(s),d(i),d(u),d($)),v(e,T),v(t,T),v(r,T),v(f,T),C&&C.d(T),v(c,T),v(g,T)}}}function B_(o){let e,l;return e=new Be({props:{small:!0,$$slots:{default:[z_]},$$scope:{ctx:o}}}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const r={};n&512&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function U_(o){let e,l,t,n,r;function s(i){o[6](i)}let f={cfg:o[5],map:o[3]};return o[0]!==void 0&&(f.enabled=o[0]),e=new Co({props:f}),z.push(()=>U(e,"enabled",s)),n=new gs({}),{c(){w(e.$$.fragment),t=L(),w(n.$$.fragment)},m(i,a){b(e,i,a),h(i,t,a),b(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],E(()=>l=!1)),e.$set(u)},i(i){r||(m(e.$$.fragment,i),m(n.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),_(n.$$.fragment,i),r=!1},d(i){i&&d(t),v(e,i),v(n,i)}}}function E_(o){let e,l;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:o[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=x(n,t[r]);return e=new qe({props:n}),{c(){w(e.$$.fragment)},m(r,s){b(e,r,s),l=!0},p(r,s){const f=s&2?te(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||(m(e.$$.fragment,r),l=!0)},o(r){_(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function W_(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,k,C,T,I,O,N,F,M;return l=new O_({}),n=new st({props:{label:"Trip generators",$$slots:{default:[M_]},$$scope:{ctx:o}}}),s=new st({props:{label:"Existing infrastructure",$$slots:{default:[F_]},$$scope:{ctx:o}}}),i=new st({props:{label:"Public transport",$$slots:{default:[P_]},$$scope:{ctx:o}}}),u=new st({props:{label:"Boundaries",$$slots:{default:[D_]},$$scope:{ctx:o}}}),$=new st({props:{label:"Census",$$slots:{default:[q_]},$$scope:{ctx:o}}}),k=new st({props:{label:"Other",$$slots:{default:[B_]},$$scope:{ctx:o}}}),T=new st({props:{label:"Tools",$$slots:{default:[U_]},$$scope:{ctx:o}}}),O=new To({props:{disabled:!o[1]}}),F=new _t({props:{data:o[4],$$slots:{default:[E_]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),w(s.$$.fragment),f=L(),w(i.$$.fragment),a=L(),w(u.$$.fragment),c=L(),w($.$$.fragment),g=L(),w(k.$$.fragment),C=L(),w(T.$$.fragment),I=L(),w(O.$$.fragment),N=L(),w(F.$$.fragment)},m(j,H){h(j,e,H),b(l,e,null),p(e,t),b(n,e,null),p(e,r),b(s,e,null),p(e,f),b(i,e,null),p(e,a),b(u,e,null),p(e,c),b($,e,null),p(e,g),b(k,e,null),p(e,C),b(T,e,null),p(e,I),b(O,e,null),o[7](e),h(j,N,H),b(F,j,H),M=!0},p(j,[H]){const P={};H&512&&(P.$$scope={dirty:H,ctx:j}),n.$set(P);const R={};H&512&&(R.$$scope={dirty:H,ctx:j}),s.$set(R);const W={};H&512&&(W.$$scope={dirty:H,ctx:j}),i.$set(W);const ce={};H&512&&(ce.$$scope={dirty:H,ctx:j}),u.$set(ce);const D={};H&512&&(D.$$scope={dirty:H,ctx:j}),$.$set(D);const K={};H&512&&(K.$$scope={dirty:H,ctx:j}),k.$set(K);const J={};H&521&&(J.$$scope={dirty:H,ctx:j}),T.$set(J);const fe={};H&2&&(fe.disabled=!j[1]),O.$set(fe);const ye={};H&514&&(ye.$$scope={dirty:H,ctx:j}),F.$set(ye)},i(j){M||(m(l.$$.fragment,j),m(n.$$.fragment,j),m(s.$$.fragment,j),m(i.$$.fragment,j),m(u.$$.fragment,j),m($.$$.fragment,j),m(k.$$.fragment,j),m(T.$$.fragment,j),m(O.$$.fragment,j),m(F.$$.fragment,j),M=!0)},o(j){_(l.$$.fragment,j),_(n.$$.fragment,j),_(s.$$.fragment,j),_(i.$$.fragment,j),_(u.$$.fragment,j),_($.$$.fragment,j),_(k.$$.fragment,j),_(T.$$.fragment,j),_(O.$$.fragment,j),_(F.$$.fragment,j),M=!1},d(j){j&&(d(e),d(N)),v(l),v(n),v(s),v(i),v(u),v($),v(k),v(T),v(O),o[7](null),v(F,j)}}}const Y_="browsepage-querystring";function J_(o,e,l){let t,n,r,s;Y(o,bl,$=>l(1,n=$)),Y(o,Dn,$=>l(2,r=$)),Y(o,Sn,$=>l(3,s=$));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:$=>vo($,_o(Fn))};const a=new URLSearchParams(window.location.search);if(!a||a.size===1&&a.keys().next().value=="style"){let $=new URL(window.location.href);const g=window.localStorage.getItem(Y_)||"",k=new URLSearchParams(g);for(const[C,T]of k)T==null?$.searchParams.delete(C):$.searchParams.set(C,T);window.history.replaceState(null,"",$.toString())}function u($){t=$,l(0,t),l(1,n)}function c($){z[$?"unshift":"push"](()=>{r=$,Dn.set(r)})}return o.$$.update=()=>{o.$$.dirty&2&&l(0,t=!n),o.$$.dirty&1&&bl.set(!t)},[t,n,r,s,f,i,u,c]}class Q_ extends Z{constructor(e){super(),X(this,e,J_,W_,V,{})}}function V_(o){let e,l,t;return{c(){e=y("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=y("div")},m(n,r){h(n,e,r),h(n,l,r),h(n,t,r),o[3](t)},p:Q,i:Q,o:Q,d(n){n&&(d(e),d(l),d(t)),o[3](null)}}}function K_(o,e,l){if(o){o.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",o.appendChild(n))}}}function Z_(o,e,l){let t,n;Y(o,Gn,f=>l(1,t=f)),Y(o,nn,f=>l(2,n=f));let r=null;function s(f){z[f?"unshift":"push"](()=>{r=f,l(0,r)})}return o.$$.update=()=>{o.$$.dirty&7&&K_(r,n,t)},[r,t,n,s]}class X_ extends Z{constructor(e){super(),X(this,e,Z_,V_,V,{})}}function x_(o){let e,l,t,n,r,s,f,i,a,u,c,$,g,k,C;return l=new zo({}),n=new go({}),f=new Do({}),$=new vs({props:{boundaryGeojson:o[3]}}),{c(){e=y("div"),w(l.$$.fragment),t=L(),w(n.$$.fragment),r=L(),s=y("div"),w(f.$$.fragment),i=L(),a=y("div"),u=y("h1"),u.textContent="Scheme Browser",c=L(),w($.$$.fragment),g=L(),k=y("div"),re(s,"border-bottom","1px solid #b1b4b6"),re(a,"display","flex"),re(a,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(T,I){h(T,e,I),b(l,e,null),p(e,t),b(n,e,null),p(e,r),p(e,s),b(f,s,null),p(e,i),p(e,a),p(a,u),p(a,c),b($,a,null),p(e,g),p(e,k),o[6](k),C=!0},p(T,I){const O={};I&8&&(O.boundaryGeojson=T[3]),$.$set(O)},i(T){C||(m(l.$$.fragment,T),m(n.$$.fragment,T),m(f.$$.fragment,T),m($.$$.fragment,T),C=!0)},o(T){_(l.$$.fragment,T),_(n.$$.fragment,T),_(f.$$.fragment,T),_($.$$.fragment,T),C=!1},d(T){T&&d(e),v(l),v(n),v(f),v($),o[6](null)}}}function Jr(o){let e,l;return e=new Q_({}),{c(){w(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(m(e.$$.fragment,t),l=!0)},o(t){_(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function eg(o){let e,l,t,n;e=new Lo({});let r=o[2]&&Jr();return{c(){w(e.$$.fragment),l=L(),r&&r.c(),t=ve()},m(s,f){b(e,s,f),h(s,l,f),r&&r.m(s,f),h(s,t,f),n=!0},p(s,f){s[2]?r?f&4&&m(r,1):(r=Jr(),r.c(),m(r,1),r.m(t.parentNode,t)):r&&(we(),_(r,1,1,()=>{r=null}),be())},i(s){n||(m(e.$$.fragment,s),m(r),n=!0)},o(s){_(e.$$.fragment,s),_(r),n=!1},d(s){s&&(d(l),d(t)),v(e,s),r&&r.d(s)}}}function tg(o){let e,l,t;return l=new Ao({props:{style:o[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[eg]},$$scope:{ctx:o}}}),{c(){e=y("div"),w(l.$$.fragment),G(e,"slot","main")},m(n,r){h(n,e,r),b(l,e,null),t=!0},p(n,r){const s={};r&2&&(s.style=n[1]),r&260&&(s.$$scope={dirty:r,ctx:n}),l.$set(s)},i(n){t||(m(l.$$.fragment,n),t=!0)},o(n){_(l.$$.fragment,n),t=!1},d(n){n&&d(e),v(l)}}}function ng(o){let e,l,t,n,r;return e=new xo({props:{$$slots:{main:[tg],sidebar:[x_]},$$scope:{ctx:o}}}),n=new X_({}),{c(){w(e.$$.fragment),l=L(),t=y("div"),w(n.$$.fragment),G(t,"class","top-right govuk-prose svelte-u44ed2")},m(s,f){b(e,s,f),h(s,l,f),h(s,t,f),b(n,t,null),r=!0},p(s,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:s}),e.$set(i)},i(s){r||(m(e.$$.fragment,s),m(n.$$.fragment,s),r=!0)},o(s){_(e.$$.fragment,s),_(n.$$.fragment,s),r=!1},d(s){s&&(d(l),d(t)),v(e,s),v(n)}}}function lg(o,e,l){let t,n,r,s,f;Y(o,Dn,c=>l(4,t=c)),Y(o,Sn,c=>l(5,n=c)),Y(o,Fn,c=>l(1,r=c)),Y(o,el,c=>l(2,s=c)),Y(o,wn,c=>l(3,f=c)),Vr(()=>{ho()});const i=new URLSearchParams(window.location.search);Fn.set(i.get("style")||"dataviz");let a;function u(c){z[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return o.$$.update=()=>{o.$$.dirty&32&&n&&el.set(n),o.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,s,f,t,n,u]}class rg extends Z{constructor(e){super(),X(this,e,lg,ng,V,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new rg({target:document.getElementById("app")});
