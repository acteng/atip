import{S as K,i as X,s as J,e as S,b as F,m as ie,c as d,n as Q,d as h,aU as vr,g as H,h as E,a as L,j as b,p as w,_ as rt,u as B,t as $,q as g,v,Q as st,T as ot,U as it,V as at,b5 as qn,o as p,am as ve,z as _e,r as ge,av as Ke,y,P as G,aa as we,ab as wn,ac as kr,w as Y,ad as vn,ae as yr,af as Yt,ag as Sr,ah as Tr,b6 as Ar,W as Wt,b7 as zn,b8 as Fr,G as zt,aP as un,a0 as ne,N as de,f as Xe,aR as Gr,b4 as le,a9 as Pe,b9 as pe,K as te,J as Ae,a2 as re,at as se,R as kn,b1 as Zt,aT as tn,Z as Qe,$ as Cr,ba as Xt,bb as Ft,bc as qr,bd as zr,x as yn,be as Hr,D as Er,X as cn,b3 as Sn,bf as Br,I as Ur,k as Tn,F as Wr,E as Yr,aV as Jr,aW as pn,A as Vr,L as Qr,M as Zr,B as Kr}from"./index-a0e9aad7.js";import{e as Hn,s as z,u as Ze,t as Xr,q as nt,M as xr,a as Je,C as Fe,v as he,R as es,k as Gt,h as xe,f as qt,b as ts,p as En,g as ns,d as Bn,w as Un,c as Wn,x as Vt,i as en,W as Lr,B as ls,S as rs,n as ss,H as os,Z as is,G as as,m as Yn}from"./ZoomOutMap-64c1fa50.js";import{P as fe,A as Mr}from"./Popup-0c2666aa.js";function fs(s){let e;return{c(){e=S("span"),F(e,"class","svelte-kzgqtg"),ie(e,"background",s[0])},m(l,t){d(l,e,t)},p(l,[t]){t&1&&ie(e,"background",l[0])},i:Q,o:Q,d(l){l&&h(e)}}}function us(s,e,l){let{color:t}=e;return s.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Se extends K{constructor(e){super(),X(this,e,us,fs,J,{color:0})}}const cs="/atip/show-local-sketches-browse-page/assets/help-d011708a.svg";function ps(s){let e,l;const t=s[1].default,n=st(t,s,s[4],null);return{c(){e=S("div"),n&&n.c(),F(e,"class","govuk-prose")},m(r,o){d(r,e,o),n&&n.m(e,null),l=!0},p(r,o){n&&n.p&&(!l||o&16)&&ot(n,t,r,r[4],l?at(t,r[4],o,null):it(r[4]),null)},i(r){l||($(n,r),l=!0)},o(r){g(n,r),l=!1},d(r){r&&h(e),n&&n.d(r)}}}function $s(s){let e,l,t,n,r,o,f;function i(u){s[3](u)}let a={title:"Help",$$slots:{default:[ps]},$$scope:{ctx:s}};return s[0]!==void 0&&(a.open=s[0]),t=new vr({props:a}),H.push(()=>E(t,"open",i)),{c(){e=S("button"),e.innerHTML=`<img src="${cs}" title="Help" alt="Help"/>`,l=L(),b(t.$$.fragment),F(e,"class","svelte-7d9d1l")},m(u,c){d(u,e,c),d(u,l,c),w(t,u,c),r=!0,o||(f=rt(e,"click",s[2]),o=!0)},p(u,[c]){const m={};c&16&&(m.$$scope={dirty:c,ctx:u}),!n&&c&1&&(n=!0,m.open=u[0],B(()=>n=!1)),t.$set(m)},i(u){r||($(t.$$.fragment,u),r=!0)},o(u){g(t.$$.fragment,u),r=!1},d(u){u&&(h(e),h(l)),v(t,u),o=!1,f()}}}function ms(s,e,l){let{$$slots:t={},$$scope:n}=e,r=!1;const o=()=>l(0,r=!0);function f(i){r=i,l(0,r)}return s.$$set=i=>{"$$scope"in i&&l(4,n=i.$$scope)},[r,t,o,f,n]}class _s extends K{constructor(e){super(),X(this,e,ms,$s,J,{})}}const gs=s=>({}),Jn=s=>({}),ds=s=>({}),Vn=s=>({});function hs(s){let e,l,t,n,r,o,f,i,a,u,c;const m=s[4].sidebar,_=st(m,s,s[3],Vn),k=s[4].main,T=st(k,s,s[3],Jn);return{c(){e=S("div"),l=S("aside"),t=S("div"),_&&_.c(),n=L(),r=S("button"),r.textContent="→",f=L(),i=S("main"),T&&T.c(),F(t,"class","sidebar-content content-container svelte-1n0etgd"),F(r,"type","button"),F(r,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),F(l,"class",o=qn(s[1]?"":"collapsed")+" svelte-1n0etgd"),ie(l,"--sidebarWidth",s[0]),F(i,"class","svelte-1n0etgd"),F(e,"class","overall-layout svelte-1n0etgd")},m(C,N){d(C,e,N),p(e,l),p(l,t),_&&_.m(t,null),p(l,n),p(l,r),p(e,f),p(e,i),T&&T.m(i,null),a=!0,u||(c=rt(r,"click",s[2]),u=!0)},p(C,[N]){_&&_.p&&(!a||N&8)&&ot(_,m,C,C[3],a?at(m,C[3],N,ds):it(C[3]),Vn),(!a||N&2&&o!==(o=qn(C[1]?"":"collapsed")+" svelte-1n0etgd"))&&F(l,"class",o),(!a||N&1)&&ie(l,"--sidebarWidth",C[0]),T&&T.p&&(!a||N&8)&&ot(T,k,C,C[3],a?at(k,C[3],N,gs):it(C[3]),Jn)},i(C){a||($(_,C),$(T,C),a=!0)},o(C){g(_,C),g(T,C),a=!1},d(C){C&&h(e),_&&_.d(C),T&&T.d(C),u=!1,c()}}}function bs(s,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:r="25rem"}=e,o=!0;function f(){l(1,o=!o)}return s.$$set=i=>{"sidebarWidth"in i&&l(0,r=i.sidebarWidth),"$$scope"in i&&l(3,n=i.$$scope)},[r,o,f,n,t]}class ws extends K{constructor(e){super(),X(this,e,bs,hs,J,{sidebarWidth:0})}}function Qn(s,e,l){const t=s.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function Zn(s){let e,l,t,n=s[1]+"",r,o,f;return l=new Se({props:{color:s[2]}}),{c(){e=S("li"),b(l.$$.fragment),t=L(),r=y(n),o=L()},m(i,a){d(i,e,a),w(l,e,null),p(e,t),p(e,r),p(e,o),f=!0},p(i,a){const u={};a&1&&(u.color=i[2]),l.$set(u),(!f||a&1)&&n!==(n=i[1]+"")&&G(r,n)},i(i){f||($(l.$$.fragment,i),f=!0)},o(i){g(l.$$.fragment,i),f=!1},d(i){i&&h(e),v(l)}}}function vs(s){let e,l,t=ve(s[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=Zn(Qn(s,t,o));const r=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){e=S("ul");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,f){d(o,e,f);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(e,null);l=!0},p(o,[f]){if(f&1){t=ve(o[0]);let i;for(i=0;i<t.length;i+=1){const a=Qn(o,t,i);n[i]?(n[i].p(a,f),$(n[i],1)):(n[i]=Zn(a),n[i].c(),$(n[i],1),n[i].m(e,null))}for(_e(),i=t.length;i<n.length;i+=1)r(i);ge()}},i(o){if(!l){for(let f=0;f<t.length;f+=1)$(n[f]);l=!0}},o(o){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(o){o&&h(e),Ke(n,o)}}}function ks(s,e,l){let{rows:t}=e;return s.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class xt extends K{constructor(e){super(),X(this,e,ks,vs,J,{rows:0})}}function Kn(s){let e=s[0],l,t,n=Xn(s);return{c(){n.c(),l=we()},m(r,o){n.m(r,o),d(r,l,o),t=!0},p(r,o){o&1&&J(e,e=r[0])?(_e(),g(n,1,1,Q),ge(),n=Xn(r),n.c(),$(n,1),n.m(l.parentNode,l)):n.p(r,o)},i(r){t||($(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function Xn(s){let e;const l=s[16].default,t=st(l,s,s[15],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&32768)&&ot(t,l,n,n[15],e?at(l,n[15],r,null):it(n[15]),null)},i(n){e||($(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function ys(s){let e,l,t=s[0]&&Kn(s);return{c(){t&&t.c(),e=we()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&$(t,1)):(t=Kn(n),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(_e(),g(t,1,1,()=>{t=null}),ge())},i(n){l||($(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Ss(s,e,l){let t,n,{$$slots:r={},$$scope:o}=e,{id:f=wn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e,{bounds:u=null}=e,{scheme:c=null}=e,{attribution:m=null}=e,{minzoom:_=null}=e,{maxzoom:k=null}=e,{volatile:T=null}=e;const{map:C,self:N}=kr();Y(s,C,M=>l(14,n=M)),Y(s,N,M=>l(0,t=M));let D,j=!0;return vn(()=>{t&&D&&n&&(yr(C,t,D),Yt(N,t=null,t),l(12,D=void 0))}),s.$$set=M=>{"id"in M&&l(3,f=M.id),"tiles"in M&&l(4,i=M.tiles),"tileSize"in M&&l(5,a=M.tileSize),"bounds"in M&&l(6,u=M.bounds),"scheme"in M&&l(7,c=M.scheme),"attribution"in M&&l(8,m=M.attribution),"minzoom"in M&&l(9,_=M.minzoom),"maxzoom"in M&&l(10,k=M.maxzoom),"volatile"in M&&l(11,T=M.volatile),"$$scope"in M&&l(15,o=M.$$scope)},s.$$.update=()=>{s.$$.dirty&24569&&n&&t!==f&&(Yt(N,t=f,t),Sr(n,t,Tr({type:"raster",tiles:i,tileSize:a,bounds:u,scheme:c,attribution:m,minzoom:_,maxzoom:k,volatile:T}),M=>n&&M===t,()=>{t&&(l(12,D=n==null?void 0:n.getSource(t)),l(13,j=!0))})),s.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,D=n==null?void 0:n.getSource(f))})),s.$$.dirty&12304&&D&&(j?l(13,j=!1):D.setTiles(i))},[t,C,N,f,i,a,u,c,m,_,k,T,D,j,n,o,r]}class Ts extends K{constructor(e){super(),X(this,e,Ss,ys,J,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function Cs(s){let e;const l=s[16].default,t=st(l,s,s[24],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16777216)&&ot(t,l,n,n[24],e?at(l,n[24],r,null):it(n[24]),null)},i(n){e||($(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Ls(s){let e,l,t;function n(o){s[17](o)}let r={id:s[1],type:"symbol",source:s[2],sourceLayer:s[3],beforeId:s[4],beforeLayerType:s[5],paint:s[6],layout:s[7],filter:s[8],applyToClusters:s[9],minzoom:s[10],maxzoom:s[11],hoverCursor:s[12],manageHoverState:s[13],eventsIfTopMost:s[14],interactive:s[15],$$slots:{default:[Cs]},$$scope:{ctx:s}};return s[0]!==void 0&&(r.hovered=s[0]),e=new Ar({props:r}),H.push(()=>E(e,"hovered",n)),e.$on("click",s[18]),e.$on("dblclick",s[19]),e.$on("contextmenu",s[20]),e.$on("mouseenter",s[21]),e.$on("mousemove",s[22]),e.$on("mouseleave",s[23]),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,[f]){const i={};f&2&&(i.id=o[1]),f&4&&(i.source=o[2]),f&8&&(i.sourceLayer=o[3]),f&16&&(i.beforeId=o[4]),f&32&&(i.beforeLayerType=o[5]),f&64&&(i.paint=o[6]),f&128&&(i.layout=o[7]),f&256&&(i.filter=o[8]),f&512&&(i.applyToClusters=o[9]),f&1024&&(i.minzoom=o[10]),f&2048&&(i.maxzoom=o[11]),f&4096&&(i.hoverCursor=o[12]),f&8192&&(i.manageHoverState=o[13]),f&16384&&(i.eventsIfTopMost=o[14]),f&32768&&(i.interactive=o[15]),f&16777216&&(i.$$scope={dirty:f,ctx:o}),!l&&f&1&&(l=!0,i.hovered=o[0],B(()=>l=!1)),e.$set(i)},i(o){t||($(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function Ms(s,e,l){let{$$slots:t={},$$scope:n}=e,{id:r=wn("symbol")}=e,{source:o=void 0}=e,{sourceLayer:f=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:u=void 0}=e,{layout:c=void 0}=e,{filter:m=void 0}=e,{applyToClusters:_=void 0}=e,{minzoom:k=void 0}=e,{maxzoom:T=void 0}=e,{hoverCursor:C=void 0}=e,{manageHoverState:N=!1}=e,{hovered:D=null}=e,{eventsIfTopMost:j=!1}=e,{interactive:M=!0}=e;function O(A){D=A,l(0,D)}function I(A){Wt.call(this,s,A)}function R(A){Wt.call(this,s,A)}function P(A){Wt.call(this,s,A)}function q(A){Wt.call(this,s,A)}function Z(A){Wt.call(this,s,A)}function ae(A){Wt.call(this,s,A)}return s.$$set=A=>{"id"in A&&l(1,r=A.id),"source"in A&&l(2,o=A.source),"sourceLayer"in A&&l(3,f=A.sourceLayer),"beforeId"in A&&l(4,i=A.beforeId),"beforeLayerType"in A&&l(5,a=A.beforeLayerType),"paint"in A&&l(6,u=A.paint),"layout"in A&&l(7,c=A.layout),"filter"in A&&l(8,m=A.filter),"applyToClusters"in A&&l(9,_=A.applyToClusters),"minzoom"in A&&l(10,k=A.minzoom),"maxzoom"in A&&l(11,T=A.maxzoom),"hoverCursor"in A&&l(12,C=A.hoverCursor),"manageHoverState"in A&&l(13,N=A.manageHoverState),"hovered"in A&&l(0,D=A.hovered),"eventsIfTopMost"in A&&l(14,j=A.eventsIfTopMost),"interactive"in A&&l(15,M=A.interactive),"$$scope"in A&&l(24,n=A.$$scope)},[D,r,o,f,i,a,u,c,m,_,k,T,C,N,j,M,t,O,I,R,P,q,Z,ae,n]}class Cn extends K{constructor(e){super(),X(this,e,Ms,Ls,J,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function xn(s){let e=s[0],l,t,n=el(s);return{c(){n.c(),l=we()},m(r,o){n.m(r,o),d(r,l,o),t=!0},p(r,o){o&1&&J(e,e=r[0])?(_e(),g(n,1,1,Q),ge(),n=el(r),n.c(),$(n,1),n.m(l.parentNode,l)):n.p(r,o)},i(r){t||($(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function el(s){let e;const l=s[15].default,t=st(l,s,s[14],null);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&16384)&&ot(t,l,n,n[14],e?at(l,n[14],r,null):it(n[14]),null)},i(n){e||($(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Is(s){let e,l,t=s[0]&&xn(s);return{c(){t&&t.c(),e=we()},m(n,r){t&&t.m(n,r),d(n,e,r),l=!0},p(n,[r]){n[0]?t?(t.p(n,r),r&1&&$(t,1)):(t=xn(n),t.c(),$(t,1),t.m(e.parentNode,e)):t&&(_e(),g(t,1,1,()=>{t=null}),ge())},i(n){l||($(t),l=!0)},o(n){g(t),l=!1},d(n){n&&h(e),t&&t.d(n)}}}function Os(s,e,l){let t,n,{$$slots:r={},$$scope:o}=e,{id:f=wn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:u=null}=e,{bounds:c=null}=e,{scheme:m=null}=e,{attribution:_=null}=e,{minzoom:k=null}=e,{maxzoom:T=null}=e,{volatile:C=null}=e;if(i&&i.includes("pmtiles://")&&!zn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let M=new Fr;zn.addProtocol("pmtiles",M.tile)}const{map:N,self:D}=kr();Y(s,N,M=>l(13,n=M)),Y(s,D,M=>l(0,t=M));let j;return vn(()=>{t&&n&&(yr(N,t,j),Yt(D,t=null,t),j=void 0)}),s.$$set=M=>{"id"in M&&l(3,f=M.id),"url"in M&&l(4,i=M.url),"tiles"in M&&l(5,a=M.tiles),"promoteId"in M&&l(6,u=M.promoteId),"bounds"in M&&l(7,c=M.bounds),"scheme"in M&&l(8,m=M.scheme),"attribution"in M&&l(9,_=M.attribution),"minzoom"in M&&l(10,k=M.minzoom),"maxzoom"in M&&l(11,T=M.maxzoom),"volatile"in M&&l(12,C=M.volatile),"$$scope"in M&&l(14,o=M.$$scope)},s.$$.update=()=>{s.$$.dirty&16377&&n&&t!==f&&(Yt(D,t=f,t),Sr(n,t,Tr({type:"vector",url:i,tiles:a,promoteId:u,bounds:c,scheme:m,attribution:_,minzoom:k,maxzoom:T,volatile:C}),M=>n&&M===t,()=>{t&&(j=n==null?void 0:n.getSource(t))})),s.$$.dirty&8200&&(n==null||n.on("style.load",()=>{j=n==null?void 0:n.getSource(f)}))},[t,N,D,f,i,a,u,c,m,_,k,T,C,n,o,r]}class $e extends K{constructor(e){super(),X(this,e,Os,Is,J,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function tl(s,e,l){const t=s.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function Ns(s){let e,l,t;return l=new Xe({props:{$$slots:{default:[Ps]},$$scope:{ctx:s}}}),l.$on("click",s[9]),{c(){e=S("div"),b(l.$$.fragment)},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const o={};r&16384&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function js(s){let e,l,t,n,r,o,f,i,a,u;l=new Xe({props:{$$slots:{default:[Rs]},$$scope:{ctx:s}}}),l.$on("click",s[4]);let c=s[2]&&nl(s);r=new nt({props:{label:"Help",$$slots:{default:[Ds]},$$scope:{ctx:s}}}),f=new Gr({}),f.$on("click",s[3]);let m=ve(s[0]),_=[];for(let T=0;T<m.length;T+=1)_[T]=ll(tl(s,m,T));const k=T=>g(_[T],1,1,()=>{_[T]=null});return{c(){e=S("div"),b(l.$$.fragment),t=L(),c&&c.c(),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L();for(let T=0;T<_.length;T+=1)_[T].c();a=we()},m(T,C){d(T,e,C),w(l,e,null),d(T,t,C),c&&c.m(T,C),d(T,n,C),w(r,T,C),d(T,o,C),w(f,T,C),d(T,i,C);for(let N=0;N<_.length;N+=1)_[N]&&_[N].m(T,C);d(T,a,C),u=!0},p(T,C){const N={};C&16384&&(N.$$scope={dirty:C,ctx:T}),l.$set(N),T[2]?c?c.p(T,C):(c=nl(T),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const D={};if(C&16384&&(D.$$scope={dirty:C,ctx:T}),r.$set(D),C&65){m=ve(T[0]);let j;for(j=0;j<m.length;j+=1){const M=tl(T,m,j);_[j]?(_[j].p(M,C),$(_[j],1)):(_[j]=ll(M),_[j].c(),$(_[j],1),_[j].m(a.parentNode,a))}for(_e(),j=m.length;j<_.length;j+=1)k(j);ge()}},i(T){if(!u){$(l.$$.fragment,T),$(r.$$.fragment,T),$(f.$$.fragment,T);for(let C=0;C<m.length;C+=1)$(_[C]);u=!0}},o(T){g(l.$$.fragment,T),g(r.$$.fragment,T),g(f.$$.fragment,T),_=_.filter(Boolean);for(let C=0;C<_.length;C+=1)g(_[C]);u=!1},d(T){T&&(h(e),h(t),h(n),h(o),h(i),h(a)),v(l),c&&c.d(T),v(r,T),v(f,T),Ke(_,T)}}}function Ps(s){let e;return{c(){e=y("Measure lines")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Rs(s){let e;return{c(){e=y("Stop measuring")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function nl(s){let e,l,t=s[2].toFixed(2)+"",n,r;return{c(){e=S("p"),l=y("Length: "),n=y(t),r=y(" meters")},m(o,f){d(o,e,f),p(e,l),p(e,n),p(e,r)},p(o,f){f&4&&t!==(t=o[2].toFixed(2)+"")&&G(n,t)},d(o){o&&h(e)}}}function Ds(s){let e;return{c(){e=S("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function As(s){let e,l;return{c(){e=S("span"),l=L(),F(e,"class","dot svelte-1tzt432")},m(t,n){d(t,e,n),d(t,l,n)},p:Q,d(t){t&&(h(e),h(l))}}}function ll(s){let e,l,t;function n(f){s[7](f,s[11],s[12],s[13])}function r(){return s[8](s[13])}let o={draggable:!0,$$slots:{default:[As]},$$scope:{ctx:s}};return s[11]!==void 0&&(o.lngLat=s[11]),e=new xr({props:o}),H.push(()=>E(e,"lngLat",n)),e.$on("click",r),{c(){b(e.$$.fragment)},m(f,i){w(e,f,i),t=!0},p(f,i){s=f;const a={};i&16384&&(a.$$scope={dirty:i,ctx:s}),!l&&i&1&&(l=!0,a.lngLat=s[11],B(()=>l=!1)),e.$set(a)},i(f){t||($(e.$$.fragment,f),t=!0)},o(f){g(e.$$.fragment,f),t=!1},d(f){v(e,f)}}}function Fs(s){let e,l;const t=[z("measurement-line"),{paint:{"line-color":Ze.measuringLine,"line-width":5}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f={};e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Gs(s){let e,l,t,n,r,o,f;const i=[js,Ns],a=[];function u(c,m){return c[1]?0:1}return e=u(s),l=a[e]=i[e](s),n=new zt({props:{data:s[0].length<2?Hn():un(s[0]),$$slots:{default:[Fs]},$$scope:{ctx:s}}}),{c(){l.c(),t=L(),b(n.$$.fragment)},m(c,m){a[e].m(c,m),d(c,t,m),w(n,c,m),r=!0,o||(f=rt(window,"keydown",s[5]),o=!0)},p(c,[m]){let _=e;e=u(c),e===_?a[e].p(c,m):(_e(),g(a[_],1,1,()=>{a[_]=null}),ge(),l=a[e],l?l.p(c,m):(l=a[e]=i[e](c),l.c()),$(l,1),l.m(t.parentNode,t));const k={};m&1&&(k.data=c[0].length<2?Hn():un(c[0])),m&16384&&(k.$$scope={dirty:m,ctx:c}),n.$set(k)},i(c){r||($(l),$(n.$$.fragment,c),r=!0)},o(c){g(l),g(n.$$.fragment,c),r=!1},d(c){c&&h(t),a[e].d(c),v(n,c),o=!1,f()}}}function qs(s,e,l){let t,n=!1,r=[];function o(k){return k.length<2?null:1e3*Xr(un(k),{units:"kilometers"})}function f(k){l(0,r=[...r,k.detail.lngLat.toArray()])}function i(){l(1,n=!1),l(0,r=[])}function a(k){n&&k.key==="Escape"&&(k.stopPropagation(),i())}function u(k){r.splice(k,1),l(0,r)}function c(k,T,C,N){C[N]=k,l(0,r)}const m=k=>u(k),_=()=>l(1,n=!0);return s.$$.update=()=>{s.$$.dirty&1&&l(2,t=o(r))},[r,n,t,f,i,a,u,c,m,_]}class zs extends K{constructor(e){super(),X(this,e,qs,Gs,J,{})}}function Hs(){const s=[];for(const l in window.localStorage){const t=window.localStorage[l];try{const n=typeof t=="string"?JSON.parse(t):t;Bs(n)&&s.push(Es(n,l))}catch(n){console.log(`Cannot parse string at local storage[${l}] due to: ${n}`)}}let e={type:"FeatureCollection",features:[],schemes:{}};return s.forEach(l=>{e.features=e.features.concat(l.features),Object.keys(l.schemes).forEach(t=>{e.schemes[t]=l.schemes[t]})}),e}function Es(s,e){return Object.keys(s.schemes).forEach(l=>{const t=s.schemes[l];t.browse=t.browse||{authority_or_region:e,capital_scheme_id:l}}),s}function Bs(s){return s!==void 0&&s.type==="FeatureCollection"&&Array.isArray(s.features)&&typeof s.schemes=="object"}const x={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],gradient_flat_to_steep:["#267300","#FFAA00","#E60000","#A80000","#730000","#000000"]},De=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Us(s){let e;return{c(){e=y(`Open Government License
  `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ws(s){let e,l,t,n,r;return t=new le({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Us]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("License: "),b(t.$$.fragment),n=y(`. Contains OS data © Crown copyright and database right
  2023.`)},m(o,f){d(o,e,f),p(e,l),w(t,e,null),p(e,n),r=!0},p(o,[f]){const i={};f&1&&(i.$$scope={dirty:f,ctx:o}),t.$set(i)},i(o){r||($(t.$$.fragment,o),r=!0)},o(o){g(t.$$.fragment,o),r=!1},d(o){o&&h(e),v(t)}}}class Te extends K{constructor(e){super(),X(this,e,null,Ws,J,{})}}function rl(s,e,l){const t=s.slice();return t[2]=e[l],t}function sl(s,e,l){const t=s.slice();return t[5]=e[l],t}function ol(s){let e,l;return{c(){e=S("span"),l=y(` 
    `),ie(e,"background",s[5]),ie(e,"width","100%"),ie(e,"border","1px solid black")},m(t,n){d(t,e,n),p(e,l)},p(t,n){n&1&&ie(e,"background",t[5])},d(t){t&&h(e)}}}function il(s){let e,l=s[2]+"",t;return{c(){e=S("span"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&2&&l!==(l=n[2]+"")&&G(t,l)},d(n){n&&h(e)}}}function Ys(s){let e,l,t,n=ve(s[0]),r=[];for(let i=0;i<n.length;i+=1)r[i]=ol(sl(s,n,i));let o=ve(s[1]),f=[];for(let i=0;i<o.length;i+=1)f[i]=il(rl(s,o,i));return{c(){e=S("div");for(let i=0;i<r.length;i+=1)r[i].c();l=L(),t=S("div");for(let i=0;i<f.length;i+=1)f[i].c();ie(e,"display","flex"),ie(t,"display","flex"),ie(t,"justify-content","space-between")},m(i,a){d(i,e,a);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);d(i,l,a),d(i,t,a);for(let u=0;u<f.length;u+=1)f[u]&&f[u].m(t,null)},p(i,[a]){if(a&1){n=ve(i[0]);let u;for(u=0;u<n.length;u+=1){const c=sl(i,n,u);r[u]?r[u].p(c,a):(r[u]=ol(c),r[u].c(),r[u].m(e,null))}for(;u<r.length;u+=1)r[u].d(1);r.length=n.length}if(a&2){o=ve(i[1]);let u;for(u=0;u<o.length;u+=1){const c=rl(i,o,u);f[u]?f[u].p(c,a):(f[u]=il(c),f[u].c(),f[u].m(t,null))}for(;u<f.length;u+=1)f[u].d(1);f.length=o.length}},i:Q,o:Q,d(i){i&&(h(e),h(l),h(t)),Ke(r,i),Ke(f,i)}}}function Js(s,e,l){let{colorScale:t}=e,{limits:n}=e;return s.$$set=r=>{"colorScale"in r&&l(0,t=r.colorScale),"limits"in r&&l(1,n=r.limits)},[t,n]}class Ge extends K{constructor(e){super(),X(this,e,Js,Ys,J,{colorScale:0,limits:1})}}function ce(s){let e=new URLSearchParams(window.location.search).has(s),l=Pe(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(s,"1"):n.searchParams.delete(s),window.history.replaceState(null,"",n.toString())}),l}function Ht(s,e,l,t){let n=e,r=new URLSearchParams(window.location.search).get(s);if(r!=null)try{n=t(r)}catch(f){console.warn(`Parsing URL parameter ${s}=${r} failed, using default value: ${f}`)}let o=Pe(n);return o.subscribe(f=>{let i=new URL(window.location.href),a=l(f);a==null?i.searchParams.delete(s):i.searchParams.set(s,a),window.history.replaceState(null,"",i.toString())}),o}let $n=Pe(new Map),Qt=Pe(new Set);const Vs=s=>({}),al=s=>({}),Qs=s=>({}),fl=s=>({}),Zs=s=>({}),ul=s=>({});function Ks(s){let e;return{c(){e=y(s[2])},m(l,t){d(l,e,t)},p(l,t){t&4&&G(e,l[2])},d(l){l&&h(e)}}}function Xs(s){let e,l,t;const n=s[7].icon,r=st(n,s,s[10],ul);return{c(){r&&r.c(),e=L(),l=y(s[2])},m(o,f){r&&r.m(o,f),d(o,e,f),d(o,l,f),t=!0},p(o,f){r&&r.p&&(!t||f&1024)&&ot(r,n,o,o[10],t?at(n,o[10],f,Zs):it(o[10]),ul),(!t||f&4)&&G(l,o[2])},i(o){t||($(r,o),t=!0)},o(o){g(r,o),t=!1},d(o){o&&(h(e),h(l)),r&&r.d(o)}}}function xs(s){let e;const l=s[7].help,t=st(l,s,s[10],fl);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&ot(t,l,n,n[10],e?at(l,n[10],r,Qs):it(n[10]),fl)},i(n){e||($(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function eo(s){let e;return{c(){e=y("X")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function to(s){let e,l,t,n,r,o,f,i,a;function u(m){s[8](m)}let c={$$slots:{default:[Xs]},$$scope:{ctx:s}};return s[0]!==void 0&&(c.checked=s[0]),l=new Je({props:c}),H.push(()=>E(l,"checked",u)),o=new _s({props:{$$slots:{default:[xs]},$$scope:{ctx:s}}}),i=new Xe({props:{$$slots:{default:[eo]},$$scope:{ctx:s}}}),i.$on("click",s[6]),{c(){e=S("div"),b(l.$$.fragment),n=L(),r=S("span"),b(o.$$.fragment),f=L(),b(i.$$.fragment),ie(e,"display","flex"),ie(e,"justify-content","space-between")},m(m,_){d(m,e,_),w(l,e,null),p(e,n),p(e,r),w(o,r,null),p(r,f),w(i,r,null),a=!0},p(m,_){const k={};_&1028&&(k.$$scope={dirty:_,ctx:m}),!t&&_&1&&(t=!0,k.checked=m[0],B(()=>t=!1)),l.$set(k);const T={};_&1024&&(T.$$scope={dirty:_,ctx:m}),o.$set(T);const C={};_&1024&&(C.$$scope={dirty:_,ctx:m}),i.$set(C)},i(m){a||($(l.$$.fragment,m),$(o.$$.fragment,m),$(i.$$.fragment,m),a=!0)},o(m){g(l.$$.fragment,m),g(o.$$.fragment,m),g(i.$$.fragment,m),a=!1},d(m){m&&h(e),v(l),v(o),v(i)}}}function cl(s){let e;const l=s[7].controls,t=st(l,s,s[10],al);return{c(){t&&t.c()},m(n,r){t&&t.m(n,r),e=!0},p(n,r){t&&t.p&&(!e||r&1024)&&ot(t,l,n,n[10],e?at(l,n[10],r,Vs):it(n[10]),al)},i(n){e||($(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function no(s){let e,l,t,n,r,o;e=new Je({props:{checked:s[4].has(s[1]),$$slots:{default:[Ks]},$$scope:{ctx:s}}}),e.$on("change",s[5]),n=new Fe({props:{small:!0,$$slots:{default:[to]},$$scope:{ctx:s}}});let f=s[0]&&cl(s);return{c(){b(e.$$.fragment),l=L(),t=S("div"),b(n.$$.fragment),r=L(),f&&f.c()},m(i,a){w(e,i,a),d(i,l,a),d(i,t,a),w(n,t,null),p(t,r),f&&f.m(t,null),s[9](t),o=!0},p(i,[a]){const u={};a&18&&(u.checked=i[4].has(i[1])),a&1028&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a&1029&&(c.$$scope={dirty:a,ctx:i}),n.$set(c),i[0]?f?(f.p(i,a),a&1&&$(f,1)):(f=cl(i),f.c(),$(f,1),f.m(t,null)):f&&(_e(),g(f,1,1,()=>{f=null}),ge())},i(i){o||($(e.$$.fragment,i),$(n.$$.fragment,i),$(f),o=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),g(f),o=!1},d(i){i&&(h(l),h(t)),v(e,i),v(n),f&&f.d(),s[9](null)}}}function lo(s,e,l){let t;Y(s,Qt,k=>l(4,t=k));let{$$slots:n={},$$scope:r}=e,{name:o}=e,{title:f}=e,{show:i}=e;i&&(t.add(o),Qt.set(t));let a=null;vn(()=>{$n.update(k=>(k.delete(o),k))});function u(){Qt.update(k=>(k.has(o)?(k.delete(o),l(0,i=!1)):(k.add(o),l(0,i=!0)),k))}function c(){t.delete(o),Qt.set(t),l(0,i=!1)}function m(k){i=k,l(0,i)}function _(k){H[k?"unshift":"push"](()=>{a=k,l(3,a),l(1,o)})}return s.$$set=k=>{"name"in k&&l(1,o=k.name),"title"in k&&l(2,f=k.title),"show"in k&&l(0,i=k.show),"$$scope"in k&&l(10,r=k.$$scope)},s.$$.update=()=>{s.$$.dirty&10&&a&&$n.update(k=>(l(3,a.style.display="none",a),k.set(o,a),k))},[i,o,f,a,t,u,c,n,m,_,r]}class ue extends K{constructor(e){super(),X(this,e,lo,no,J,{name:1,title:2,show:0})}}function pl(s){const e=s[7].OA21CD;s[8]=e;const l=s[7][s[0].kind];s[9]=l}function ro(s){let e,l,t,n,r,o,f;return t=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[io]},$$scope:{ctx:s}}}),r=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ao]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("Population density data is from the 2021 census, via "),b(t.$$.fragment),n=y(". Output area boundaries from "),b(r.$$.fragment),o=y(".")},m(i,a){d(i,e,a),p(e,l),w(t,e,null),p(e,n),w(r,e,null),p(e,o),f=!0},i(i){f||($(t.$$.fragment,i),$(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function so(s){let e,l,t,n,r,o,f,i,a;return r=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[fo]},$$scope:{ctx:s}}}),f=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[uo]},$$scope:{ctx:s}}}),{c(){e=S("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=L(),t=S("p"),n=y("Car/van availability data is from the 2021 census, via "),b(r.$$.fragment),o=y(". Output area boundaries from "),b(f.$$.fragment),i=y(".")},m(u,c){d(u,e,c),d(u,l,c),d(u,t,c),p(t,n),w(r,t,null),p(t,o),w(f,t,null),p(t,i),a=!0},i(u){a||($(r.$$.fragment,u),$(f.$$.fragment,u),a=!0)},o(u){g(r.$$.fragment,u),g(f.$$.fragment,u),a=!1},d(u){u&&(h(e),h(l),h(t)),v(r),v(f)}}}function oo(s){let e,l,t,n,r,o,f;return t=new le({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[co]},$$scope:{ctx:s}}}),r=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[po]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),n=y(". Output area boundaries from "),b(r.$$.fragment),o=y(".")},m(i,a){d(i,e,a),p(e,l),w(t,e,null),p(e,n),w(r,e,null),p(e,o),f=!0},i(i){f||($(t.$$.fragment,i),$(r.$$.fragment,i),f=!0)},o(i){g(t.$$.fragment,i),g(r.$$.fragment,i),f=!1},d(i){i&&h(e),v(t),v(r)}}}function io(s){let e;return{c(){e=y(`NOMIS TS006
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ao(s){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fo(s){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function uo(s){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function co(s){let e;return{c(){e=y(`NOMIS TS045
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function po(s){let e;return{c(){e=y(`ONS Geography
        `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $o(s){let e,l,t,n,r,o;const f=[oo,so,ro],i=[];function a(u,c){return u[0].kind=="percent_households_with_car"?0:u[0].kind=="average_cars_per_household"?1:2}return l=a(s),t=i[l]=f[l](s),r=new Te({}),{c(){e=S("span"),t.c(),n=L(),b(r.$$.fragment),F(e,"slot","help")},m(u,c){d(u,e,c),i[l].m(e,null),p(e,n),w(r,e,null),o=!0},p(u,c){let m=l;l=a(u),l!==m&&(_e(),g(i[m],1,1,()=>{i[m]=null}),ge(),t=i[l],t||(t=i[l]=f[l](u),t.c()),$(t,1),t.m(e,n))},i(u){o||($(t),$(r.$$.fragment,u),o=!0)},o(u){g(t),g(r.$$.fragment,u),o=!1},d(u){u&&h(e),i[l].d(),v(r)}}}function mo(s){let e,l,t,n;return t=new Ge({props:{colorScale:s[1],limits:mt(s[0].kind).map($l)}}),{c(){e=S("p"),e.textContent="(people per square kilometres)",l=L(),b(t.$$.fragment)},m(r,o){d(r,e,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&1&&(f.limits=mt(r[0].kind).map($l)),t.$set(f)},i(r){n||($(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&(h(e),h(l)),v(t,r)}}}function _o(s){let e,l;return e=new Ge({props:{colorScale:s[1],limits:mt(s[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=mt(t[0].kind)),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function go(s){let e,l;return e=new Ge({props:{colorScale:s[1],limits:mt(s[0].kind)}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.limits=mt(t[0].kind)),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ho(s){let e,l,t,n,r,o,f;function i(_){s[4](_)}let a={label:"Dataset",choices:[["percent_households_with_car","Percent of households with a car"],["average_cars_per_household","Average cars per household"],["population_density","Population density"]],inlineSmall:!0};s[0].kind!==void 0&&(a.value=s[0].kind),l=new kn({props:a}),H.push(()=>E(l,"value",i));const u=[go,_o,mo],c=[];function m(_,k){return _[0].kind=="percent_households_with_car"?0:_[0].kind=="average_cars_per_household"?1:_[0].kind=="population_density"?2:-1}return~(r=m(s))&&(o=c[r]=u[r](s)),{c(){e=S("div"),b(l.$$.fragment),n=L(),o&&o.c(),F(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(_,k){d(_,e,k),w(l,e,null),p(e,n),~r&&c[r].m(e,null),f=!0},p(_,k){const T={};!t&&k&1&&(t=!0,T.value=_[0].kind,B(()=>t=!1)),l.$set(T);let C=r;r=m(_),r===C?~r&&c[r].p(_,k):(o&&(_e(),g(c[C],1,1,()=>{c[C]=null}),ge()),~r?(o=c[r],o?o.p(_,k):(o=c[r]=u[r](_),o.c()),$(o,1),o.m(e,null)):o=null)},i(_){f||($(l.$$.fragment,_),$(o),f=!0)},o(_){g(l.$$.fragment,_),g(o),f=!1},d(_){_&&h(e),v(l),~r&&c[r].d()}}}function bo(s){let e,l,t,n=s[9].toLocaleString()+"",r,o,f=s[8]+"",i;return{c(){e=S("p"),l=y("There are "),t=S("b"),r=y(n),o=y(`
          people per square kilometre in `),i=y(f)},m(a,u){d(a,e,u),p(e,l),p(e,t),p(t,r),p(e,o),p(e,i)},p(a,u){u&129&&n!==(n=a[9].toLocaleString()+"")&&G(r,n),u&128&&f!==(f=a[8]+"")&&G(i,f)},d(a){a&&h(e)}}}function wo(s){let e,l,t=s[8]+"",n,r,o,f=s[9]+"",i,a;return{c(){e=S("p"),l=y("Households in "),n=y(t),r=y(` have an average of
          `),o=S("b"),i=y(f),a=y(`
          cars`)},m(u,c){d(u,e,c),p(e,l),p(e,n),p(e,r),p(e,o),p(o,i),p(e,a)},p(u,c){c&128&&t!==(t=u[8]+"")&&G(n,t),c&129&&f!==(f=u[9]+"")&&G(i,f)},d(u){u&&h(e)}}}function vo(s){let e,l,t=s[9]+"",n,r,o,f=s[8]+"",i,a;return{c(){e=S("p"),l=S("b"),n=y(t),r=y("%"),o=y(`
          of households in `),i=y(f),a=y(" have 1 or more cars")},m(u,c){d(u,e,c),p(e,l),p(l,n),p(l,r),p(e,o),p(e,i),p(e,a)},p(u,c){c&129&&t!==(t=u[9]+"")&&G(n,t),c&128&&f!==(f=u[8]+"")&&G(i,f)},d(u){u&&h(e)}}}function ko(s){pl(s);let e;function l(r,o){return r[0].kind=="percent_households_with_car"?vo:r[0].kind=="average_cars_per_household"?wo:bo}let t=l(s),n=t(s);return{c(){n.c(),e=we()},m(r,o){n.m(r,o),d(r,e,o)},p(r,o){pl(r),t===(t=l(r))&&n?n.p(r,o):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function yo(s){let e,l;return e=new fe({props:{$$slots:{default:[ko,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1153&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function So(s){let e,l,t,n;const r=[z(He),{sourceLayer:He},{paint:{"fill-color":he(["get",s[0].kind],mt(s[0].kind),s[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:s[0].show?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[yo]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Ae({props:o}),e.$on("click",s[3]);const f=[z(`${He}-outline`),{sourceLayer:He},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:s[0].show?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(z(He)),u&0&&{sourceLayer:He},u&3&&{paint:{"fill-color":he(["get",a[0].kind],mt(a[0].kind),a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0].show?"visible":"none"}},r[4],r[5],r[6]]):{};u&1025&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&1?re(f,[u&0&&se(z(`${He}-outline`)),u&0&&{sourceLayer:He},f[2],u&1&&{layout:{visibility:a[0].show?"visible":"none"}}]):{};t.$set(m)},i(a){n||($(e.$$.fragment,a),$(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function To(s){let e,l,t,n,r;function o(i){s[5](i)}let f={name:He,title:"2021 census",$$slots:{controls:[ho],help:[$o]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${He}.pmtiles`,$$slots:{default:[So]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&1025&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&1025&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let He="census_output_areas";function Co(s){return s.show?s.kind:null}function Lo(s){return{show:!0,kind:s}}function mt(s){return s=="percent_households_with_car"?[0,20,40,60,80,100]:s=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const $l=s=>s.toLocaleString();function Mo(s,e,l){let t,n=x.sequential_low_to_high,o=Ht(He,{show:!1,kind:"percent_households_with_car"},Co,Lo);Y(s,o,u=>l(0,t=u));function f(u){let c=u.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${c}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${c}`,"_blank")}function i(u){s.$$.not_equal(t.kind,u)&&(t.kind=u,o.set(t))}function a(u){s.$$.not_equal(t.show,u)&&(t.show=u,o.set(t))}return[t,n,o,f,i,a]}class Io extends K{constructor(e){super(),X(this,e,Mo,To,J,{})}}function Oo(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function No(s){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function jo(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[No]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of December 2022."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||($(n.$$.fragment,a),$(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Po(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function Ro(s){let e,l;return e=new fe({props:{$$slots:{default:[Po,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Do(s){let e,l,t,n;const r=[z(dt),{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Ro]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Ae({props:o}),e.$on("click",Go);const f=[z(`${dt}-outline`),{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(z(dt)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&3?re(f,[u&0&&se(z(`${dt}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){n||($(e.$$.fragment,a),$(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ao(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:dt,title:Fo,$$slots:{help:[jo],icon:[Oo]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new zt({props:{data:`${pe()}/v1/${dt}.geojson`,$$slots:{default:[Do]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let dt="combined_authorities",Fo="Combined authorities";function Go(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.features[0].properties.CAUTH22CD}`,"_blank")}function qo(s,e,l){let t,n=x.combined_authorities,r=ce(dt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class zo extends K{constructor(e){super(),X(this,e,qo,Ao,J,{})}}function Ho(s){let e;return{c(){e=y(`DLUCH GIS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Eo(s){let e;return{c(){e=y(`here
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Bo(s){let e,l,t,n,r,o,f,i,a,u;return n=new le({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Ho]},$$scope:{ctx:s}}}),o=new le({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Eo]},$$scope:{ctx:s}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("The 2019 English IMD scores come from "),b(n.$$.fragment),r=y(`. Note the LSOAs identified are from the 2011 census. A
      detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),f=y("."),i=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,m){d(c,e,m),p(e,l),p(l,t),w(n,l,null),p(l,r),w(o,l,null),p(l,f),p(e,i),w(a,e,null),u=!0},p(c,m){const _={};m&64&&(_.$$scope={dirty:m,ctx:c}),n.$set(_);const k={};m&64&&(k.$$scope={dirty:m,ctx:c}),o.$set(k)},i(c){u||($(n.$$.fragment,c),$(o.$$.fragment,c),$(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(o),v(a)}}}function Uo(s){let e,l,t;return l=new Ge({props:{colorScale:s[1],limits:["Least deprived","Most deprived"]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Wo(s){let e,l=s[5].LSOA11CD+"",t,n,r,o=s[5].score+"",f,i,a,u,c,m=s[5].rank.toLocaleString()+"",_,k;return{c(){e=S("p"),t=y(l),n=y(` has an IMD score of
        `),r=S("b"),f=y(o),i=L(),a=S("p"),u=y("Rank: "),c=S("b"),_=y(m),k=y(`
        / 32,844 LSOAs`)},m(T,C){d(T,e,C),p(e,t),p(e,n),p(e,r),p(r,f),d(T,i,C),d(T,a,C),p(a,u),p(a,c),p(c,_),p(a,k)},p(T,C){C&32&&l!==(l=T[5].LSOA11CD+"")&&G(t,l),C&32&&o!==(o=T[5].score+"")&&G(f,o),C&32&&m!==(m=T[5].rank.toLocaleString()+"")&&G(_,m)},d(T){T&&(h(e),h(i),h(a))}}}function Yo(s){let e,l;return e=new fe({props:{$$slots:{default:[Wo,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Jo(s){let e,l,t,n;const r=[z(Ee),{sourceLayer:Ee},{paint:{"fill-color":he(["-",10,["get","decile"]],s[2],s[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[Yo]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Ae({props:o});const f=[z(`${Ee}-outline`),{sourceLayer:Ee},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?re(r,[u&0&&se(z(Ee)),u&0&&{sourceLayer:Ee},u&6&&{paint:{"fill-color":he(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":te(.5,.7)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&1?re(f,[u&0&&se(z(`${Ee}-outline`)),u&0&&{sourceLayer:Ee},f[2],u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){n||($(e.$$.fragment,a),$(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Vo(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:Ee,title:Qo,$$slots:{controls:[Uo],help:[Bo]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${Ee}.pmtiles`,$$slots:{default:[Jo]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ee="imd",Qo="Indices of Multiple Deprivation";function Zo(s,e,l){let t,n=x.sequential_low_to_high,r=[0,2,4,6,8,10],o=ce(Ee);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class Ko extends K{constructor(e){super(),X(this,e,Zo,Vo,J,{})}}function Xo(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function xo(s){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ei(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[xo]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of January 2024."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||($(n.$$.fragment,a),$(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function ti(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function ni(s){let e,l;return e=new fe({props:{$$slots:{default:[ti,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function li(s){let e,l,t,n;const r=[z(ht),{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[ni]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Ae({props:o}),e.$on("click",oi);const f=[z(`${ht}-outline`),{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(z(ht)),u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[3],r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&3?re(f,[u&0&&se(z(`${ht}-outline`)),u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){n||($(e.$$.fragment,a),$(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function ri(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:ht,title:si,$$slots:{help:[ei],icon:[Xo]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new zt({props:{data:`${pe()}/v1/${ht}.geojson`,$$slots:{default:[li]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let ht="local_authority_districts",si="Local Authority Districts";function oi(s){window.open(`https://www.ons.gov.uk/visualisations/areas/${s.detail.features[0].properties.LAD23CD}`,"_blank")}function ii(s,e,l){let t,n=x.local_authority_districts,r=ce(ht);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class ai extends K{constructor(e){super(),X(this,e,ii,ri,J,{})}}function fi(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ui(s){let e;return{c(){e=y(`local authority
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ci(s){let e;return{c(){e=y(`national park authorit
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function pi(s){let e;return{c(){e=y(`development corporation
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function $i(s){let e;return{c(){e=y("this map")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function mi(s){let e;return{c(){e=y(`planning.data.gov.uk
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _i(s){let e,l,t,n,r,o,f,i,a,u,c,m,_,k,T,C,N,D,j,M,O,I,R;return n=new le({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[ui]},$$scope:{ctx:s}}}),o=new le({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ci]},$$scope:{ctx:s}}}),i=new le({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[pi]},$$scope:{ctx:s}}}),k=new le({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[$i]},$$scope:{ctx:s}}}),j=new le({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[mi]},$$scope:{ctx:s}}}),I=new Te({}),{c(){e=S("span"),l=S("p"),t=y("LPAs may be a "),b(n.$$.fragment),r=y(", "),b(o.$$.fragment),f=y("y, or "),b(i.$$.fragment),a=y("."),u=L(),c=S("p"),m=S("strong"),_=y(`Note there are overlapping LPAs near Northhamptonshire. Only one
        authority name is shown when hovering. Use `),b(k.$$.fragment),T=y(" to get more details."),C=L(),N=S("p"),D=y("Data from ONS Geography via "),b(j.$$.fragment),M=y(", as of November 2022."),O=L(),b(I.$$.fragment),F(e,"slot","help")},m(P,q){d(P,e,q),p(e,l),p(l,t),w(n,l,null),p(l,r),w(o,l,null),p(l,f),w(i,l,null),p(l,a),p(e,u),p(e,c),p(c,m),p(m,_),w(k,m,null),p(m,T),p(e,C),p(e,N),p(N,D),w(j,N,null),p(N,M),p(e,O),w(I,e,null),R=!0},p(P,q){const Z={};q&32&&(Z.$$scope={dirty:q,ctx:P}),n.$set(Z);const ae={};q&32&&(ae.$$scope={dirty:q,ctx:P}),o.$set(ae);const A={};q&32&&(A.$$scope={dirty:q,ctx:P}),i.$set(A);const ee={};q&32&&(ee.$$scope={dirty:q,ctx:P}),k.$set(ee);const V={};q&32&&(V.$$scope={dirty:q,ctx:P}),j.$set(V)},i(P){R||($(n.$$.fragment,P),$(o.$$.fragment,P),$(i.$$.fragment,P),$(k.$$.fragment,P),$(j.$$.fragment,P),$(I.$$.fragment,P),R=!0)},o(P){g(n.$$.fragment,P),g(o.$$.fragment,P),g(i.$$.fragment,P),g(k.$$.fragment,P),g(j.$$.fragment,P),g(I.$$.fragment,P),R=!1},d(P){P&&h(e),v(n),v(o),v(i),v(k),v(j),v(I)}}}function gi(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function di(s){let e,l;return e=new fe({props:{$$slots:{default:[gi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function hi(s){let e,l,t,n;const r=[z(Be),{sourceLayer:Be},{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[di]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Ae({props:o});const f=[z(`${Be}-outline`),{sourceLayer:Be},{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(z(Be)),u&0&&{sourceLayer:Be},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&3?re(f,[u&0&&se(z(`${Be}-outline`)),u&0&&{sourceLayer:Be},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){n||($(e.$$.fragment,a),$(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function bi(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:Be,title:wi,$$slots:{help:[_i],icon:[fi]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${Be}.pmtiles`,$$slots:{default:[hi]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Be="local_planning_authorities",wi="Local Planning Authorities";function vi(s,e,l){let t,n=x.local_planning_authorities,r=ce(Be);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class ki extends K{constructor(e){super(),X(this,e,vi,bi,J,{})}}function yi(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Si(s){let e;return{c(){e=y(`Ordnance Survey Boundary-Line
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ti(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Si]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2023."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||($(n.$$.fragment,a),$(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Ci(s){let e,l=s[4].Name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].Name+"")&&G(t,l)},d(n){n&&h(e)}}}function Li(s){let e,l;return e=new fe({props:{$$slots:{default:[Ci,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Mi(s){let e,l,t,n;const r=[z(Ue),{sourceLayer:Ue},{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Li]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Ae({props:o}),e.$on("click",Ni);const f=[z(`${Ue}-outline`),{sourceLayer:Ue},{paint:{"line-color":s[1],"line-width":5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(z(Ue)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&3?re(f,[u&0&&se(z(`${Ue}-outline`)),u&0&&{sourceLayer:Ue},u&2&&{paint:{"line-color":a[1],"line-width":5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){n||($(e.$$.fragment,a),$(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Ii(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:Ue,title:Oi,$$slots:{help:[Ti],icon:[yi]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${Ue}.pmtiles`,$$slots:{default:[Mi]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ue="parliamentary_constituencies",Oi="Parliamentary constituencies";function Ni(s){let e=s.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function ji(s,e,l){let t,n=x.parliamentary_constituencies,r=ce(Ue);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class Pi extends K{constructor(e){super(),X(this,e,ji,Ii,J,{})}}function Ri(s){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Di(s){let e,l,t,n,r,o,f,i,a,u;return n=new le({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ri]},$$scope:{ctx:s}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Most layers show air quality data from "),b(n.$$.fragment),r=y(`. The measurements are annual means, in units of µgm
      `),o=S("sup"),o.textContent="3",f=y(`
      . Note the particulate matter layers are not corrected for natural sources.`),i=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,m){d(c,e,m),p(e,l),p(l,t),w(n,l,null),p(l,r),p(l,o),p(l,f),p(e,i),w(a,e,null),u=!0},p(c,m){const _={};m&4096&&(_.$$scope={dirty:m,ctx:c}),n.$set(_)},i(c){u||($(n.$$.fragment,c),$(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function Ai(s){let e,l,t,n,r,o=s[3](s[0].pollutant)+"",f,i,a,u,c,m,_,k,T,C,N,D,j;function M(I){s[5](I)}let O={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return s[0].pollutant!==void 0&&(O.value=s[0].pollutant),l=new Gt({props:O}),H.push(()=>E(l,"value",M)),{c(){e=S("div"),b(l.$$.fragment),n=L(),r=S("p"),f=y(o),i=L(),a=S("div"),u=S("label"),c=y(`Opacity
        `),m=S("input"),_=L(),k=S("img"),F(m,"type","range"),F(m,"min","0"),F(m,"max","100"),tn(k.src,T=s[4](s[0].pollutant))||F(k,"src",T),F(k,"width",150),F(k,"alt",C=`Legend for ${s[0].pollutant} layer`),F(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(I,R){d(I,e,R),w(l,e,null),p(e,n),p(e,r),p(r,f),p(e,i),p(e,a),p(a,u),p(u,c),p(u,m),Qe(m,s[0].opacity),p(e,_),p(e,k),N=!0,D||(j=[rt(m,"change",s[6]),rt(m,"input",s[6])],D=!0)},p(I,R){const P={};!t&&R&1&&(t=!0,P.value=I[0].pollutant,B(()=>t=!1)),l.$set(P),(!N||R&1)&&o!==(o=I[3](I[0].pollutant)+"")&&G(f,o),R&1&&Qe(m,I[0].opacity),(!N||R&1&&!tn(k.src,T=I[4](I[0].pollutant)))&&F(k,"src",T),(!N||R&1&&C!==(C=`Legend for ${I[0].pollutant} layer`))&&F(k,"alt",C)},i(I){N||($(l.$$.fragment,I),N=!0)},o(I){g(l.$$.fragment,I),N=!1},d(I){I&&h(e),v(l),D=!1,Cr(j)}}}function Fi(s){let e,l;const t=[z(nn),{paint:{"raster-opacity":s[0].opacity/100}},{layout:{visibility:s[0].show?"visible":"none"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new es({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(z(nn)),o&1&&{paint:{"raster-opacity":r[0].opacity/100}},o&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Gi(s){let e,l,t,n,r;function o(i){s[7](i)}let f={name:nn,title:qi,$$slots:{controls:[Ai],help:[Di]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new Ts({props:{tiles:[s[1]],tileSize:256,$$slots:{default:[Fi]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4097&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2&&(c.tiles=[i[1]]),a&4097&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let nn="pollution",qi="Pollution";function zi(s){return s.show?`${s.pollutant}/${s.opacity}`:null}function Hi(s){let[e,l]=s.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function Ei(s,e,l){let t,n,r,f=Ht(nn,{show:!1,pollutant:"PM25_viridis",opacity:50},zi,Hi);Y(s,f,T=>l(0,r=T));function i(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${r.pollutant}/MapServer/WMSServer`}function a(T){return t[1]}function u(T){let C=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${i()}?bbox={bbox-epsg-3857}&${C}`}function c(T){let C=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${i()}?${C}`}function m(T){s.$$.not_equal(r.pollutant,T)&&(r.pollutant=T,f.set(r))}function _(){r.opacity=Zt(this.value),f.set(r)}function k(T){s.$$.not_equal(r.show,T)&&(r.show=T,f.set(r))}return s.$$.update=()=>{s.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[r.pollutant]),s.$$.dirty&1&&l(1,n=u(r.pollutant))},[r,n,f,a,c,m,_,k]}class Bi extends K{constructor(e){super(),X(this,e,Ei,Gi,J,{})}}function Ui(s){let e;return{c(){e=y(`DEFRA
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Wi(s){let e,l,t,n,r,o,f,i,a,u;return o=new le({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Ui]},$$scope:{ctx:s}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),l.textContent=`This is the LAeq,16h dataset showing annual average noise levels in units
      of decibels for the 16-hour period between 7am and 11pm. Only roads in
      areas with at least 100,000 people are included.`,t=L(),n=S("p"),r=y("Data from June 2019, produced by "),b(o.$$.fragment),f=y(". See there for methodology details"),i=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,m){d(c,e,m),p(e,l),p(e,t),p(e,n),p(n,r),w(o,n,null),p(n,f),p(e,i),w(a,e,null),u=!0},p(c,m){const _={};m&32&&(_.$$scope={dirty:m,ctx:c}),o.$set(_)},i(c){u||($(o.$$.fragment,c),$(a.$$.fragment,c),u=!0)},o(c){g(o.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(o),v(a)}}}function Yi(s){let e,l,t;return l=new Ge({props:{colorScale:s[1],limits:["55","65","75",">"]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ji(s){let e,l=s[4].noiseclass+"",t,n,r=ml(s[4].noiseclass)+"",o,f;return{c(){e=S("p"),t=y(l),n=y(" dB ("),o=y(r),f=y(")")},m(i,a){d(i,e,a),p(e,t),p(e,n),p(e,o),p(e,f)},p(i,a){a&16&&l!==(l=i[4].noiseclass+"")&&G(t,l),a&16&&r!==(r=ml(i[4].noiseclass)+"")&&G(o,r)},d(i){i&&h(e)}}}function Vi(s){let e,l;return e=new fe({props:{$$slots:{default:[Ji,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Qi(s){let e,l;const t=[z(bt),{sourceLayer:bt},{paint:{"fill-color":xe(["get","noiseclass"],{"55.0-59.9":s[1][0],"60.0-64.9":s[1][0],"65.0-69.9":s[1][1],"70.0-74.9":s[1][1],">=75.0":s[1][2]},"red"),"fill-opacity":te(.5,.8)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Vi]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&3?re(t,[o&0&&se(z(bt)),o&0&&{sourceLayer:bt},o&2&&{paint:{"fill-color":xe(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":te(.5,.8)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Zi(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:bt,title:Ki,$$slots:{controls:[Yi],help:[Wi]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${bt}.pmtiles`,$$slots:{default:[Qi]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let bt="road_noise",Ki="Road noise";function ml(s){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[s]}function Xi(s,e,l){let t,n=[x.sequential_low_to_high[0],x.sequential_low_to_high[2],x.sequential_low_to_high[4]],r=ce(bt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class xi extends K{constructor(e){super(),X(this,e,Xi,Zi,J,{})}}function ea(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ta(s){let e;return{c(){e=y(`ONS Geography
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function na(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[ta]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(", as of May 2023."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||($(n.$$.fragment,a),$(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function la(s){let e,l=s[4].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=n[4].name+"")&&G(t,l)},d(n){n&&h(e)}}}function ra(s){let e,l;return e=new fe({props:{$$slots:{default:[la,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function sa(s){let e,l,t,n;const r=[z(We),{sourceLayer:We},{paint:{"fill-color":s[1],"fill-opacity":te(0,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[ra]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new Ae({props:o}),e.$on("click",aa);const f=[z(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":s[1],"line-width":2.5}},{layout:{visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new de({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&3?re(r,[u&0&&se(z(We)),u&0&&{sourceLayer:We},u&2&&{paint:{"fill-color":a[1],"fill-opacity":te(0,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}},r[4],r[5],r[6]]):{};u&32&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&3?re(f,[u&0&&se(z(`${We}-outline`)),u&0&&{sourceLayer:We},u&2&&{paint:{"line-color":a[1],"line-width":2.5}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){n||($(e.$$.fragment,a),$(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function oa(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:We,title:ia,$$slots:{help:[na],icon:[ea]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${We}.pmtiles`,$$slots:{default:[sa]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let We="wards",ia="Wards";function aa(s){let e=encodeURIComponent(s.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function fa(s,e,l){let t,n=x.wards,r=ce(We);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class ua extends K{constructor(e){super(),X(this,e,fa,oa,J,{})}}function ca(s){let e;return{c(){e=y("Open Data Commons Open Database License")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function pa(s){let e,l,t,n;return t=new le({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[ca]},$$scope:{ctx:s}}}),{c(){e=S("p"),l=y("License: "),b(t.$$.fragment)},m(r,o){d(r,e,o),p(e,l),w(t,e,null),n=!0},p(r,[o]){const f={};o&1&&(f.$$scope={dirty:o,ctx:r}),t.$set(f)},i(r){n||($(t.$$.fragment,r),n=!0)},o(r){g(t.$$.fragment,r),n=!1},d(r){r&&h(e),v(t)}}}class et extends K{constructor(e){super(),X(this,e,null,pa,J,{})}}function $a(s){let e,l,t;return l=new Se({props:{color:x.bus_route_with_lane}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function ma(s){let e;return{c(){e=y(`GTFS
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function _a(s){let e,l,t,n,r,o,f,i,a,u;return o=new le({props:{href:"https://gtfs.org",$$slots:{default:[ma]},$$scope:{ctx:s}}}),a=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all roads with at least one bus route crossing them. It also
      shows whether the road has a bus lane or not.`,t=L(),n=S("p"),r=y("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),f=y(`, and doesn't include which routes are run or the frequency
      of service.`),i=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,m){d(c,e,m),p(e,l),p(e,t),p(e,n),p(n,r),w(o,n,null),p(n,f),p(e,i),w(a,e,null),u=!0},p(c,m){const _={};m&16&&(_.$$scope={dirty:m,ctx:c}),o.$set(_)},i(c){u||($(o.$$.fragment,c),$(a.$$.fragment,c),u=!0)},o(c){g(o.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(o),v(a)}}}function ga(s){let e;return{c(){e=S("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function da(s){let e;return{c(){e=S("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ha(s){let e;function l(r,o){return r[3].has_bus_lane?da:ga}let t=l(s),n=t(s);return{c(){n.c(),e=we()},m(r,o){n.m(r,o),d(r,e,o)},p(r,o){t!==(t=l(r))&&(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function ba(s){let e,l;return e=new fe({props:{$$slots:{default:[ha,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function wa(s){let e,l;const t=[z(wt),{sourceLayer:wt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],x.bus_route_with_lane,x.bus_route_without_lane],"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ba]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(z(wt)),o&0&&{sourceLayer:wt},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function va(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:wt,title:ka,$$slots:{help:[_a],icon:[$a]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${wt}.pmtiles`,$$slots:{default:[wa]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let wt="bus_routes",ka="Bus routes";function ya(s,e,l){let t,n=ce(wt);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class Sa extends K{constructor(e){super(),X(this,e,ya,va,J,{})}}function _l(s){const e=Da(s[9]);s[10]=e[0],s[11]=e[1],s[12]=e[2]}function gl(s,e,l){const t=s.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function Ta(s){let e,l,t,n,r,o,f,i,a;return i=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
      of 15 August 2023).`,t=L(),n=S("ul"),n.innerHTML=`<li><b>Separated tracks</b>
        include fully or partly segregated cycletracks alongside a carriageway, stepped
        cycletracks, and tracks off the carriageway entirely. They&#39;re also separated
        from foot traffic.</li> <li><b>Unprotected lanes</b>
        are mandatory or advisory lanes on the carriageway, without any physical
        protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
        paths are split between cycle and foot traffic, and are separated from motor
        traffic somehow. There can be segregation between cyclists and pedestrians
        or not.</li>`,r=L(),o=S("p"),o.textContent=`Note there are many known limitations with this layer. Data in
      OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
      processing is also imperfect. You can click a segment to see full
      OpenStreetMap data. Please do report issues with the classification or
      data.`,f=L(),b(i.$$.fragment),F(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(e,f),w(i,e,null),a=!0},p:Q,i(u){a||($(i.$$.fragment,u),a=!0)},o(u){g(i.$$.fragment,u),a=!1},d(u){u&&h(e),v(i)}}}function Ca(s){let e,l,t=s[13]+"",n,r,o;return e=new Se({props:{color:s[14]}}),{c(){b(e.$$.fragment),l=L(),n=y(t),r=L()},m(f,i){w(e,f,i),d(f,l,i),d(f,n,i),d(f,r,i),o=!0},p:Q,i(f){o||($(e.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),o=!1},d(f){f&&(h(l),h(n),h(r)),v(e,f)}}}function dl(s){let e,l,t;function n(o){s[4](o,s[10])}let r={$$slots:{default:[Ca]},$$scope:{ctx:s}};return s[0][s[10]]!==void 0&&(r.checked=s[0][s[10]]),e=new Je({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,f){s=o;const i={};f&131072&&(i.$$scope={dirty:f,ctx:s}),!l&&f&5&&(l=!0,i.checked=s[0][s[10]],B(()=>l=!1)),e.$set(i)},i(o){t||($(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function La(s){let e,l,t=ve(s[2]),n=[];for(let o=0;o<t.length;o+=1)n[o]=dl(gl(s,t,o));const r=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=we()},m(o,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(o,f);d(o,e,f),l=!0},p(o,f){if(f&5){t=ve(o[2]);let i;for(i=0;i<t.length;i+=1){const a=gl(o,t,i);n[i]?(n[i].p(a,f),$(n[i],1)):(n[i]=dl(a),n[i].c(),$(n[i],1),n[i].m(e.parentNode,e))}for(_e(),i=t.length;i<n.length;i+=1)r(i);ge()}},i(o){if(!l){for(let f=0;f<t.length;f+=1)$(n[f]);l=!0}},o(o){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(o){o&&h(e),Ke(n,o)}}}function Ma(s){let e,l,t;return l=new Fe({props:{small:!0,$$slots:{default:[La]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const o={};r&131073&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Ia(s){_l(s);let e,l=s[10]+"",t,n,r,o,f,i=s[11]+"",a,u,c,m,_=s[12]+"",k;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),o=y("Direction: "),f=S("b"),a=L(),u=S("p"),c=y("Width: "),m=S("b"),k=y(_)},m(T,C){d(T,e,C),p(e,t),d(T,n,C),d(T,r,C),p(r,o),p(r,f),f.innerHTML=i,d(T,a,C),d(T,u,C),p(u,c),p(u,m),p(m,k)},p(T,C){_l(T),C&512&&l!==(l=T[10]+"")&&G(t,l),C&512&&i!==(i=T[11]+"")&&(f.innerHTML=i),C&512&&_!==(_=T[12]+"")&&G(k,_)},d(T){T&&(h(e),h(n),h(r),h(a),h(u))}}}function Oa(s){let e,l;return e=new fe({props:{$$slots:{default:[Ia,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&131584&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Na(s){let e,l;const t=[z(vt),{sourceLayer:vt},{paint:{"line-color":xe(["get","kind"],{track:x.cycle_paths.track,lane:x.cycle_paths.lane,shared_use_segregated:x.cycle_paths.shared_use_segregated,shared_use_unsegregated:x.cycle_paths.shared_use_unsegregated},"red"),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show?"visible":"none"}},{filter:s[3](s[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[Oa]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new de({props:n}),e.$on("click",Aa),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&9?re(t,[o&0&&se(z(vt)),o&0&&{sourceLayer:vt},t[2],o&1&&{layout:{visibility:r[0].show?"visible":"none"}},o&9&&{filter:r[3](r[0])},t[5],t[6],t[7]]):{};o&131072&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function ja(s){let e,l,t,n,r;function o(i){s[5](i)}let f={name:vt,title:Pa,$$slots:{controls:[Ma],help:[Ta]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${vt}.pmtiles`,$$slots:{default:[Na]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&131073&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&131073&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let vt="cycle_paths",Pa="Cycle paths";function Ra(s){return{show:!0,track:s.includes("track"),lane:s.includes("lane"),shared_use_segregated:s.includes("shared_use_segregated"),shared_use_unsegregated:s.includes("shared_use_unsegregated")}}function Da(s){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[s.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[s.direction],t=s.width=="unknown"?"unknown":`${s.width} meters`;return[e,`${l} ${s.direction}`,t]}function Aa(s){window.open(`http://openstreetmap.org/way/${s.detail.features[0].properties.osm_id}`,"_blank")}function Fa(s,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],r={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function o(m){return m.show?n.filter(_=>m[_]).join(","):null}let f=Ht(vt,r,o,Ra);Y(s,f,m=>l(0,t=m));let i=[["track","Separated tracks",x.cycle_paths.track],["lane","Unprotected lanes",x.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",x.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",x.cycle_paths.shared_use_unsegregated]];function a(m){let _=n.filter(k=>m[k]);return["in",["get","kind"],["literal",_]]}function u(m,_){s.$$.not_equal(t[_],m)&&(t[_]=m,f.set(t))}function c(m){s.$$.not_equal(t.show,m)&&(t.show=m,f.set(t))}return[t,f,i,a,u,c]}class Ga extends K{constructor(e){super(),X(this,e,Fa,ja,J,{})}}function qa(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function za(s){let e;return{c(){e=y(`Major Road Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ha(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[za]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),b(n.$$.fragment),r=y(", as of September 2021."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||($(n.$$.fragment,a),$(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Ea(s){let e,l=(s[4].name??"Unknown MRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&G(t,l)},d(n){n&&h(e)}}}function Ba(s){let e,l;return e=new fe({props:{$$slots:{default:[Ea,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ua(s){let e,l;const t=[z(kt),{sourceLayer:kt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[Ba]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&3?re(t,[o&0&&se(z(kt)),o&0&&{sourceLayer:kt},t[2],t[3],o&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Wa(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:kt,title:Ya,$$slots:{help:[Ha],icon:[qa]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${kt}.pmtiles`,$$slots:{default:[Ua]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let kt="mrn",Ya="Major Road Network";function Ja(s,e,l){let t,n=x.mrn,r=ce(kt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class Va extends K{constructor(e){super(),X(this,e,Ja,Wa,J,{})}}function Qa(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Za(s){let e;return{c(){e=y(`OS Open Roads
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ka(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[Za]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from "),b(n.$$.fragment),r=y(`, as of December 2023. The SRN is equivalent to trunk
      roads.`),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||($(n.$$.fragment,a),$(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Xa(s){let e,l=(s[4].name??"Unknown SRN road")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&G(t,l)},d(n){n&&h(e)}}}function xa(s){let e,l;return e=new fe({props:{$$slots:{default:[Xa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function ef(s){let e,l;const t=[z(yt),{sourceLayer:yt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[xa]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&3?re(t,[o&0&&se(z(yt)),o&0&&{sourceLayer:yt},t[2],t[3],o&2&&{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function tf(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:yt,title:nf,$$slots:{help:[Ka],icon:[Qa]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${yt}.pmtiles`,$$slots:{default:[ef]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let yt="srn",nf="Strategic Road Network";function lf(s,e,l){let t,n=x.srn,r=ce(yt);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class rf extends K{constructor(e){super(),X(this,e,lf,tf,J,{})}}function sf(s){let e,l,t;return l=new Se({props:{color:s[1]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function of(s){let e;return{c(){e=y(`National Cycle Network
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function af(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[of]},$$scope:{ctx:s}}}),f=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from Sustrans about the "),b(n.$$.fragment),r=y(", downloaded on 22/01/2024."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||($(n.$$.fragment,a),$(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function hl(s){let e,l,t,n=s[4].Desc_+"",r;return{c(){e=S("li"),l=y("Description: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].Desc_+"")&&G(r,n)},d(o){o&&h(e)}}}function bl(s){let e,l,t,n=s[4].Greenway+"",r;return{c(){e=S("li"),l=y("Is greenway: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].Greenway+"")&&G(r,n)},d(o){o&&h(e)}}}function wl(s){let e,l,t,n=s[4].RouteType+"",r;return{c(){e=S("li"),l=y("Route type: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].RouteType+"")&&G(r,n)},d(o){o&&h(e)}}}function vl(s){let e,l,t,n=s[4].RouteNo+"",r;return{c(){e=S("li"),l=y("Route number: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].RouteNo+"")&&G(r,n)},d(o){o&&h(e)}}}function kl(s){let e,l,t,n=s[4].RouteCat+"",r;return{c(){e=S("li"),l=y("Route Category: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].RouteCat+"")&&G(r,n)},d(o){o&&h(e)}}}function yl(s){let e,l,t,n=s[4].OpenStatus+"",r;return{c(){e=S("li"),l=y("Open Status: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].OpenStatus+"")&&G(r,n)},d(o){o&&h(e)}}}function Sl(s){let e,l,t,n=s[4].Surface+"",r;return{c(){e=S("li"),l=y("Surface: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].Surface+"")&&G(r,n)},d(o){o&&h(e)}}}function Tl(s){let e,l,t,n=s[4].Quality+"",r;return{c(){e=S("li"),l=y("Quality: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].Quality+"")&&G(r,n)},d(o){o&&h(e)}}}function Cl(s){let e,l,t,n=s[4].RoadClass+"",r;return{c(){e=S("li"),l=y("Road Class: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&16&&n!==(n=o[4].RoadClass+"")&&G(r,n)},d(o){o&&h(e)}}}function ff(s){let e,l,t,n,r,o,f,i,a,u=s[4].Desc_&&hl(s),c=s[4].Greenway&&bl(s),m=s[4].RouteType&&wl(s),_=s[4].RouteNo&&vl(s),k=s[4].RouteCat&&kl(s),T=s[4].OpenStatus&&yl(s),C=s[4].Surface&&Sl(s),N=s[4].Quality&&Tl(s),D=s[4].RoadClass&&Cl(s);return{c(){e=S("ul"),u&&u.c(),l=L(),c&&c.c(),t=L(),m&&m.c(),n=L(),_&&_.c(),r=L(),k&&k.c(),o=L(),T&&T.c(),f=L(),C&&C.c(),i=L(),N&&N.c(),a=L(),D&&D.c()},m(j,M){d(j,e,M),u&&u.m(e,null),p(e,l),c&&c.m(e,null),p(e,t),m&&m.m(e,null),p(e,n),_&&_.m(e,null),p(e,r),k&&k.m(e,null),p(e,o),T&&T.m(e,null),p(e,f),C&&C.m(e,null),p(e,i),N&&N.m(e,null),p(e,a),D&&D.m(e,null)},p(j,M){j[4].Desc_?u?u.p(j,M):(u=hl(j),u.c(),u.m(e,l)):u&&(u.d(1),u=null),j[4].Greenway?c?c.p(j,M):(c=bl(j),c.c(),c.m(e,t)):c&&(c.d(1),c=null),j[4].RouteType?m?m.p(j,M):(m=wl(j),m.c(),m.m(e,n)):m&&(m.d(1),m=null),j[4].RouteNo?_?_.p(j,M):(_=vl(j),_.c(),_.m(e,r)):_&&(_.d(1),_=null),j[4].RouteCat?k?k.p(j,M):(k=kl(j),k.c(),k.m(e,o)):k&&(k.d(1),k=null),j[4].OpenStatus?T?T.p(j,M):(T=yl(j),T.c(),T.m(e,f)):T&&(T.d(1),T=null),j[4].Surface?C?C.p(j,M):(C=Sl(j),C.c(),C.m(e,i)):C&&(C.d(1),C=null),j[4].Quality?N?N.p(j,M):(N=Tl(j),N.c(),N.m(e,a)):N&&(N.d(1),N=null),j[4].RoadClass?D?D.p(j,M):(D=Cl(j),D.c(),D.m(e,null)):D&&(D.d(1),D=null)},d(j){j&&h(e),u&&u.d(),c&&c.d(),m&&m.d(),_&&_.d(),k&&k.d(),T&&T.d(),C&&C.d(),N&&N.d(),D&&D.d()}}}function uf(s){let e,l;return e=new fe({props:{$$slots:{default:[ff,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function cf(s){let e,l;const t=[z(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[1],"line-width":4,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[uf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&3?re(t,[o&0&&se(z(St)),o&0&&{sourceLayer:St},t[2],t[3],o&2&&{paint:{"line-color":r[1],"line-width":4,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function pf(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:St,title:$f,$$slots:{help:[af],icon:[sf]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${St}.pmtiles`,$$slots:{default:[cf]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let St="national_cycle_network",$f="National Cycle Network";function mf(s,e,l){let t,n=x.national_cycle_network,r=ce(St);Y(s,r,f=>l(0,t=f));function o(f){t=f,r.set(t)}return[t,n,r,o]}class _f extends K{constructor(e){super(),X(this,e,mf,pf,J,{})}}function Ll(s,e,l){const t=s.slice();return t[6]=e[l][0],t[7]=e[l][1],t[8]=e[l][2],t}function gf(s){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function df(s){let e,l,t,n,r,o,f,i,a,u,c,m;return u=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[gf]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows the average and minimum pavement width (in meters) from
      Ordnance Survey. Because the shape of pavement may vary along a road, both
      average and minimum are reported. Measurements may be available for the
      left side of the road, the right, or both. The coloring shows the larger
      of the two average widths, and the line thickness has no meaning. Hover
      over a line to see if there's pavement on one or both sides of the road.
      (You won't be able to distinguish left and right though; use the OS Road
      basemap instead.)`,t=L(),n=S("p"),n.textContent=`Note these measurements are difficult to interpret near dual carriageways
      (shown as parallel lines).`,r=L(),o=S("p"),o.textContent="Data valid as of 1 January, 2024",f=L(),i=S("p"),a=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(u.$$.fragment),c=y("."),F(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(e,f),p(e,i),p(i,a),w(u,i,null),p(i,c),m=!0},p(_,k){const T={};k&2048&&(T.$$scope={dirty:k,ctx:_}),u.$set(T)},i(_){m||($(u.$$.fragment,_),m=!0)},o(_){g(u.$$.fragment,_),m=!1},d(_){_&&h(e),v(u)}}}function hf(s){let e,l,t;return l=new Ge({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function bf(s){let e,l,t=ln(s[5].angle+s[8])+"",n;return{c(){e=S("p"),l=new Ft(!1),n=y(` side of the road: no pavement
          `),l.a=n},m(r,o){d(r,e,o),l.m(t,e),p(e,n)},p(r,o){o&32&&t!==(t=ln(r[5].angle+r[8])+"")&&l.p(t)},d(r){r&&h(e)}}}function wf(s){let e,l,t=ln(s[5].angle+s[8])+"",n,r,o=s[6]+"",f,i,a,u=s[7]+"",c,m;return{c(){e=S("p"),l=new Ft(!1),n=y(` side of the road:
            `),r=S("b"),f=y(o),i=y(`
            m average,
            `),a=S("b"),c=y(u),m=y(`
            m minimum
          `),l.a=n},m(_,k){d(_,e,k),l.m(t,e),p(e,n),p(e,r),p(r,f),p(e,i),p(e,a),p(a,c),p(e,m)},p(_,k){k&32&&t!==(t=ln(_[5].angle+_[8])+"")&&l.p(t),k&32&&o!==(o=_[6]+"")&&G(f,o),k&32&&u!==(u=_[7]+"")&&G(c,u)},d(_){_&&h(e)}}}function Ml(s){let e;function l(r,o){return r[6]?wf:bf}let t=l(s),n=t(s);return{c(){n.c(),e=we()},m(r,o){n.m(r,o),d(r,e,o)},p(r,o){t===(t=l(r))&&n?n.p(r,o):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},d(r){r&&h(e),n.d(r)}}}function vf(s){let e,l=ve([[s[5].left_average,s[5].left_minimum,-90],[s[5].right_average,s[5].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=Ml(Ll(s,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=we()},m(n,r){for(let o=0;o<2;o+=1)t[o]&&t[o].m(n,r);d(n,e,r)},p(n,r){if(r&32){l=ve([[n[5].left_average,n[5].left_minimum,-90],[n[5].right_average,n[5].right_minimum,90]]);let o;for(o=0;o<2;o+=1){const f=Ll(n,l,o);t[o]?t[o].p(f,r):(t[o]=Ml(f),t[o].c(),t[o].m(e.parentNode,e))}for(;o<2;o+=1)t[o].d(1)}},d(n){n&&h(e),Ke(t,n)}}}function kf(s){let e,l;return e=new fe({props:{openOn:"hover",$$slots:{default:[vf,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&2080&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function yf(s){let e,l;const t=[z(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],s[2],s[1]),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[kf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(z(Tt)),o&0&&{sourceLayer:Tt},t[2],t[3],o&6&&{paint:{"line-color":he(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":De,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&2048&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Sf(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:Tt,title:Tf,$$slots:{controls:[hf],help:[df]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${Xt()}/v1/${Tt}.pmtiles`,$$slots:{default:[yf]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&2048&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Tt="pavement_widths",Tf="OS Pavement widths";function Cf(s){let e=Math.floor((s+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function ln(s){return`${Cf(s)} <span style="display: inline-block; rotate: ${s}deg">⬆</span>`}function Lf(s,e,l){let t,n=x.sequential_low_to_high,r=[0,2,4,6,8,13],o=ce(Tt);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class Mf extends K{constructor(e){super(),X(this,e,Lf,Sf,J,{})}}function If(s){let e;return{c(){e=y("the PCT website")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Of(s){let e;return{c(){e=y("2017 journal article")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Nf(s){let e,l,t,n,r,o,f,i,a,u,c,m;return i=new le({props:{href:"https://www.pct.bike",$$slots:{default:[If]},$$scope:{ctx:s}}}),u=new le({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Of]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),l.textContent=`The PCT shows major links on the transport network on which there is high
      latent demand for cycling under scenarios of change, based on the
      "fastest" routes from CycleStreets. Counts approximate daily rush hour
      traffic levels.`,t=L(),n=S("p"),n.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
      Please use this layer with caution.`,r=L(),o=S("p"),f=y("See "),b(i.$$.fragment),a=y(" and "),b(u.$$.fragment),c=y(" for details on methodology and data sources."),F(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(o,f),w(i,o,null),p(o,a),w(u,o,null),p(o,c),m=!0},p(_,k){const T={};k&1024&&(T.$$scope={dirty:k,ctx:_}),i.$set(T);const C={};k&1024&&(C.$$scope={dirty:k,ctx:_}),u.$set(C)},i(_){m||($(i.$$.fragment,_),$(u.$$.fragment,_),m=!0)},o(_){g(i.$$.fragment,_),g(u.$$.fragment,_),m=!1},d(_){_&&h(e),v(i),v(u)}}}function jf(s){let e,l,t,n,r,o,f,i,a;l=new Ge({props:{colorScale:s[1],limits:s[2]}});function u(k){s[5](k)}let c={label:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};s[0].tripPurpose!==void 0&&(c.value=s[0].tripPurpose),n=new kn({props:c}),H.push(()=>E(n,"value",u));function m(k){s[6](k)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return s[0].scenario!==void 0&&(_.value=s[0].scenario),f=new Gt({props:_}),H.push(()=>E(f,"value",m)),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),o=L(),b(f.$$.fragment),F(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(k,T){d(k,e,T),w(l,e,null),p(e,t),w(n,e,null),p(e,o),w(f,e,null),a=!0},p(k,T){const C={};!r&&T&1&&(r=!0,C.value=k[0].tripPurpose,B(()=>r=!1)),n.$set(C);const N={};!i&&T&1&&(i=!0,N.value=k[0].scenario,B(()=>i=!1)),f.$set(N)},i(k){a||($(l.$$.fragment,k),$(n.$$.fragment,k),$(f.$$.fragment,k),a=!0)},o(k){g(l.$$.fragment,k),g(n.$$.fragment,k),g(f.$$.fragment,k),a=!1},d(k){k&&h(e),v(l),v(n),v(f)}}}function Pf(s){let e,l=s[4](s[9])+"",t;return{c(){e=new Ft(!1),t=we(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Rf(s){let e,l;return e=new fe({props:{$$slots:{default:[Pf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Df(s){let e,l;const t=[z(lt),{sourceLayer:lt},{paint:{"line-color":he(["get",s[0].scenario],s[2],s[1]),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show&&s[0].tripPurpose==lt?"visible":"none"}}];let n={$$slots:{default:[Rf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(z(lt)),o&0&&{sourceLayer:lt},o&7&&{paint:{"line-color":he(["get",r[0].scenario],r[2],r[1]),"line-width":De,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==lt?"visible":"none"}}]):{};o&1024&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Af(s){let e,l=s[4](s[9])+"",t;return{c(){e=new Ft(!1),t=we(),e.a=t},m(n,r){e.m(l,n,r),d(n,t,r)},p(n,r){r&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(h(t),e.d())}}}function Ff(s){let e,l;return e=new fe({props:{$$slots:{default:[Af,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1536&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Gf(s){let e,l;const t=[z(gt),{sourceLayer:gt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["get",s[0].scenario],s[2],s[1]),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show&&s[0].tripPurpose==gt?"visible":"none"}}];let n={$$slots:{default:[Ff]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(z(gt)),o&0&&{sourceLayer:gt},t[2],t[3],o&7&&{paint:{"line-color":he(["get",r[0].scenario],r[2],r[1]),"line-width":De,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0].show&&r[0].tripPurpose==gt?"visible":"none"}}]):{};o&1024&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function qf(s){let e,l,t,n,r,o,f;function i(u){s[7](u)}let a={name:Ir,title:zf,$$slots:{controls:[jf],help:[Nf]},$$scope:{ctx:s}};return s[0].show!==void 0&&(a.show=s[0].show),e=new ue({props:a}),H.push(()=>E(e,"show",i)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${lt}.pmtiles`,$$slots:{default:[Df]},$$scope:{ctx:s}}}),o=new $e({props:{url:`pmtiles://${pe()}/v1/${gt}.pmtiles`,$$slots:{default:[Gf]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(o.$$.fragment)},m(u,c){w(e,u,c),d(u,t,c),w(n,u,c),d(u,r,c),w(o,u,c),f=!0},p(u,[c]){const m={};c&1025&&(m.$$scope={dirty:c,ctx:u}),!l&&c&1&&(l=!0,m.show=u[0].show,B(()=>l=!1)),e.$set(m);const _={};c&1025&&(_.$$scope={dirty:c,ctx:u}),n.$set(_);const k={};c&1025&&(k.$$scope={dirty:c,ctx:u}),o.$set(k)},i(u){f||($(e.$$.fragment,u),$(n.$$.fragment,u),$(o.$$.fragment,u),f=!0)},o(u){g(e.$$.fragment,u),g(n.$$.fragment,u),g(o.$$.fragment,u),f=!1},d(u){u&&(h(t),h(r)),v(e,u),v(n,u),v(o,u)}}}let Ir="pct",lt="pct_commute",gt="pct_school",zf="Propensity to Cycle Tool";function Hf(s){return s.show?`${s.tripPurpose}/${s.scenario}`:null}function Ef(s){let[e,l]=s.split("/");return{show:!0,tripPurpose:e,scenario:l}}function Bf(s,e,l){let t,n=x.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],f=Ht(Ir,{show:!1,tripPurpose:lt,scenario:"baseline"},Hf,Ef);Y(s,f,m=>l(0,t=m));function i(m){let _=m.baseline,k=m.gov_target,T=m.go_dutch,C=`<h2>Trip purpose: ${t.tripPurpose==lt?"commuting":"school"}</h2>`;if(C+=`<p>Baseline (2011): <b>${_.toLocaleString()}</b></p>`,_==0)C+=`<p>Government target (2025): <b>${k.toLocaleString()}</b></p>`,C+=`<p>Go Dutch: <b>${T.toLocaleString()}</b></p>`;else{let N=(k/_).toFixed(1),D=(T/_).toFixed(1);C+=`<p>Government target (2025): ${k.toLocaleString()} (<b>${N}x</b> of baseline)</p>`,C+=`<p>Go Dutch: ${T.toLocaleString()} (<b>${D}x</b> of baseline)</p>`}return C}function a(m){s.$$.not_equal(t.tripPurpose,m)&&(t.tripPurpose=m,f.set(t))}function u(m){s.$$.not_equal(t.scenario,m)&&(t.scenario=m,f.set(t))}function c(m){s.$$.not_equal(t.show,m)&&(t.show=m,f.set(t))}return[t,n,r,f,i,a,u,c]}class Uf extends K{constructor(e){super(),X(this,e,Bf,qf,J,{})}}function Wf(s){let e;return{c(){e=y("Basemap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Yf(s){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Jf(s){let e,l,t,n,r,o,f,i,a,u,c,m,_;return n=new le({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Wf]},$$scope:{ctx:s}}}),c=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Yf]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),t=y("The average speed data is collected over a six-month period by "),b(n.$$.fragment),r=y(` from 135,000 vehicle telematic systems and provided through
      Ordnance Survey. The averages are grouped by different time periods for weekdays
      and weekends. This map shows the highest average.`),o=L(),f=S("p"),f.textContent="Data valid as of 1 September, 2023",i=L(),a=S("p"),u=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(c.$$.fragment),m=y("."),F(e,"slot","help")},m(k,T){d(k,e,T),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(e,i),p(e,a),p(a,u),w(c,a,null),p(a,m),_=!0},p(k,T){const C={};T&512&&(C.$$scope={dirty:T,ctx:k}),n.$set(C);const N={};T&512&&(N.$$scope={dirty:T,ctx:k}),c.$set(N)},i(k){_||($(n.$$.fragment,k),$(c.$$.fragment,k),_=!0)},o(k){g(n.$$.fragment,k),g(c.$$.fragment,k),_=!1},d(k){k&&h(e),v(n),v(c)}}}function Vf(s){let e,l,t,n,r,o;l=new Ge({props:{colorScale:s[1],limits:s[2]}});function f(a){s[5](a)}let i={label:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return s[0].kind!==void 0&&(i.value=s[0].kind),n=new kn({props:i}),H.push(()=>E(n,"value",f)),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),F(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(a,u){d(a,e,u),w(l,e,null),p(e,t),w(n,e,null),o=!0},p(a,u){const c={};!r&&u&1&&(r=!0,c.value=a[0].kind,B(()=>r=!1)),n.$set(c)},i(a){o||($(l.$$.fragment,a),$(n.$$.fragment,a),o=!0)},o(a){g(l.$$.fragment,a),g(n.$$.fragment,a),o=!1},d(a){a&&h(e),v(l),v(n)}}}function Qf(s){let e,l,t=s[8].indicative_mph+"",n,r,o,f,i,a=s[8].highest_mph+"",u,c,m=s[4][s[8].highest_description]+"",_,k;return{c(){e=S("p"),l=y("Posted speed limit: "),n=y(t),r=y(" mph"),o=L(),f=S("p"),i=y("Highest average speed: "),u=y(a),c=y(" mph (during "),_=y(m),k=y(")")},m(T,C){d(T,e,C),p(e,l),p(e,n),p(e,r),d(T,o,C),d(T,f,C),p(f,i),p(f,u),p(f,c),p(f,_),p(f,k)},p(T,C){C&256&&t!==(t=T[8].indicative_mph+"")&&G(n,t),C&256&&a!==(a=T[8].highest_mph+"")&&G(u,a),C&256&&m!==(m=T[4][T[8].highest_description]+"")&&G(_,m)},d(T){T&&(h(e),h(o),h(f))}}}function Zf(s){let e,l;return e=new fe({props:{$$slots:{default:[Qf,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&768&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Kf(s){let e,l;const t=[z(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["get",s[0].kind],s[2],s[1]),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:s[0].show?"visible":"none"}}];let n={$$slots:{default:[Zf]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(z(Ct)),o&0&&{sourceLayer:Ct},t[2],t[3],o&7&&{paint:{"line-color":he(["get",r[0].kind],r[2],r[1]),"line-width":De,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0].show?"visible":"none"}}]):{};o&512&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Xf(s){let e,l,t,n,r;function o(i){s[6](i)}let f={name:Ct,title:xf,$$slots:{controls:[Vf],help:[Jf]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${Xt()}/v1/${Ct}.pmtiles`,$$slots:{default:[Kf]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&513&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ct="road_speeds",xf="OS Speeds";function eu(s){return s.show?s.kind:null}function tu(s){return{show:!0,kind:s}}function nu(s,e,l){let t,n=x.sequential_low_to_high,r=[0,20,30,40,50,90],f=Ht(Ct,{show:!1,kind:"indicative_mph"},eu,tu);Y(s,f,c=>l(0,t=c));let i={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function a(c){s.$$.not_equal(t.kind,c)&&(t.kind=c,f.set(t))}function u(c){s.$$.not_equal(t.show,c)&&(t.show=c,f.set(t))}return[t,n,r,f,i,a,u]}class lu extends K{constructor(e){super(),X(this,e,nu,Xf,J,{})}}function ru(s){let e;return{c(){e=y(`Public Sector Geospatial Agreement
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function su(s){let e,l,t,n,r,o,f,i,a,u;return i=new le({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[ru]},$$scope:{ctx:s}}}),{c(){e=S("span"),l=S("p"),l.textContent=`This is average and minimum road carriageway width (in meters) from
      Ordnance Survey. The coloring shows the average width, and the line
      thickness has no meaning. Be careful interpreting the data near dual
      carriageways and crossing islands.`,t=L(),n=S("p"),n.textContent="Data valid as of 1 September, 2023",r=L(),o=S("p"),f=y(`License: Contains OS data © Crown copyright and database right 2023.
      Made available under the `),b(i.$$.fragment),a=y("."),F(e,"slot","help")},m(c,m){d(c,e,m),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(o,f),w(i,o,null),p(o,a),u=!0},p(c,m){const _={};m&64&&(_.$$scope={dirty:m,ctx:c}),i.$set(_)},i(c){u||($(i.$$.fragment,c),u=!0)},o(c){g(i.$$.fragment,c),u=!1},d(c){c&&h(e),v(i)}}}function ou(s){let e,l,t;return l=new Ge({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function iu(s){let e,l,t,n=s[5].average+"",r,o,f,i,a,u,c=s[5].minimum+"",m,_;return{c(){e=S("p"),l=y("Average width: "),t=S("b"),r=y(n),o=y(`
        meters`),f=L(),i=S("p"),a=y("Minimum width: "),u=S("b"),m=y(c),_=y(`
        meters`)},m(k,T){d(k,e,T),p(e,l),p(e,t),p(t,r),p(e,o),d(k,f,T),d(k,i,T),p(i,a),p(i,u),p(u,m),p(i,_)},p(k,T){T&32&&n!==(n=k[5].average+"")&&G(r,n),T&32&&c!==(c=k[5].minimum+"")&&G(m,c)},d(k){k&&(h(e),h(f),h(i))}}}function au(s){let e,l;return e=new fe({props:{$$slots:{default:[iu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function fu(s){let e,l;const t=[z(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":he(["get","average"],s[2],s[1]),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[au]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new de({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(z(Lt)),o&0&&{sourceLayer:Lt},t[2],t[3],o&6&&{paint:{"line-color":he(["get","average"],r[2],r[1]),"line-width":De,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:r[0]?"visible":"none"}}]):{};o&64&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function uu(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:Lt,title:cu,$$slots:{controls:[ou],help:[su]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${Xt()}/v1/${Lt}.pmtiles`,$$slots:{default:[fu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Lt="road_widths",cu="OS Road widths";function pu(s,e,l){let t,n=x.sequential_low_to_high,r=[0,5,10,15,20,100],o=ce(Lt);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class $u extends K{constructor(e){super(),X(this,e,pu,uu,J,{})}}function mu(s){let e,l,t;return l=new Se({props:{color:x.trams}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function _u(s){let e,l,t,n,r;return n=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows all trams and light rail lines, according to OpenStreetMap (as
      of 7 February 2024). When these are close to a scheme, interactions
      between the modes must be designed carefully.`,t=L(),b(n.$$.fragment),F(e,"slot","help")},m(o,f){d(o,e,f),p(e,l),p(e,t),w(n,e,null),r=!0},p:Q,i(o){r||($(n.$$.fragment,o),r=!0)},o(o){g(n.$$.fragment,o),r=!1},d(o){o&&h(e),v(n)}}}function gu(s){let e,l;const t=[z(Mt),{sourceLayer:Mt},{paint:{"line-color":x.trams,"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new de({props:n}),e.$on("click",bu),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(z(Mt)),o&0&&{sourceLayer:Mt},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function du(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:Mt,title:hu,$$slots:{help:[_u],icon:[mu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${Mt}.pmtiles`,$$slots:{default:[gu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&8&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Mt="trams",hu="Trams";function bu(s){window.open(`http://openstreetmap.org/way/${s.detail.features[0].properties.osm_id}`,"_blank")}function wu(s,e,l){let t,n=ce(Mt);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class vu extends K{constructor(e){super(),X(this,e,wu,du,J,{})}}function ku(s){let e;return{c(){e=y(`Bus Open Data Service
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function yu(s){let e,l,t,n,r,o,f,i,a,u;return n=new le({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[ku]},$$scope:{ctx:s}}}),a=new Te({}),{c(){e=S("span"),l=S("p"),t=y("Data from the "),b(n.$$.fragment),r=y(`, as of 7 February 2024. To calculate frequency, every
      scheduled arrival time per stop is considered, grouped by day of the week.
      The total daily count is just the number of scheduled arrivals for a day.
      The peak hour frequency is the highest number of buses in any one hour
      window. That window might not lined up perfectly on the hour -- a peak
      hour might occur from 8:25 to 9:25,for example.`),o=L(),f=S("p"),f.textContent=`There are known limitations with this layer, so please use caution when
      using these numbers. Some stops may not be shown at all. Frequency could
      be over- or under-counted, due to exceptions to the regular daily schedule
      of a service.`,i=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,m){d(c,e,m),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(e,i),w(a,e,null),u=!0},p(c,m){const _={};m&64&&(_.$$scope={dirty:m,ctx:c}),n.$set(_)},i(c){u||($(n.$$.fragment,c),$(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(a)}}}function Su(s){let e,l,t,n,r;return n=new Ge({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("div"),l=S("p"),l.textContent="Peak hourly frequency:",t=L(),b(n.$$.fragment),F(e,"slot","controls")},m(o,f){d(o,e,f),p(e,l),p(e,t),w(n,e,null),r=!0},p:Q,i(o){r||($(n.$$.fragment,o),r=!0)},o(o){g(n.$$.fragment,o),r=!1},d(o){o&&h(e),v(n)}}}function Tu(s){let e,l,t,n=s[5].stop_name+"",r,o,f,i,a,u=s[5].peak+"",c,m,_,k,T,C=s[5].peak_description+"",N,D,j,M,O,I=s[5].total+"",R,P,q=s[5].total_description+"",Z,ae;return{c(){e=S("p"),l=y("Stop name: "),t=S("b"),r=y(n),o=L(),f=S("p"),i=y("Peak: "),a=S("b"),c=y(u),m=y(`
        buses during the busiest hour of any day`),_=L(),k=S("p"),T=y("The peak hour is "),N=y(C),D=L(),j=S("p"),M=y("Total buses per day: "),O=S("b"),R=y(I),P=y(`
        (for `),Z=y(q),ae=y(", the busiest day of the week)")},m(A,ee){d(A,e,ee),p(e,l),p(e,t),p(t,r),d(A,o,ee),d(A,f,ee),p(f,i),p(f,a),p(a,c),p(f,m),d(A,_,ee),d(A,k,ee),p(k,T),p(k,N),d(A,D,ee),d(A,j,ee),p(j,M),p(j,O),p(O,R),p(j,P),p(j,Z),p(j,ae)},p(A,ee){ee&32&&n!==(n=A[5].stop_name+"")&&G(r,n),ee&32&&u!==(u=A[5].peak+"")&&G(c,u),ee&32&&C!==(C=A[5].peak_description+"")&&G(N,C),ee&32&&I!==(I=A[5].total+"")&&G(R,I),ee&32&&q!==(q=A[5].total_description+"")&&G(Z,q)},d(A){A&&(h(e),h(o),h(f),h(_),h(k),h(D),h(j))}}}function Cu(s){let e,l;return e=new fe({props:{$$slots:{default:[Tu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Lu(s){let e,l;const t=[z(It),{sourceLayer:It},{paint:{"circle-color":he(["get","peak"],s[2],s[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Cu]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new qt({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(z(It)),o&0&&{sourceLayer:It},o&6&&{paint:{"circle-color":he(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&64&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Mu(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:It,title:Iu,$$slots:{controls:[Su],help:[yu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${It}.pmtiles`,$$slots:{default:[Lu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let It="bus_stops",Iu="Bus stops";function Ou(s,e,l){let t,n=x.sequential_low_to_high,r=[0,3,10,20,30,100],o=ce(It);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class Nu extends K{constructor(e){super(),X(this,e,Ou,Mu,J,{})}}function ju(s){let e;return{c(){e=y("crossing")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Pu(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[ju]},$$scope:{ctx:s}}}),f=new et({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&32&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||($(n.$$.fragment,a),$(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Ru(s){let e,l,t;return l=new xt({props:{rows:s[2]}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Du(s){let e,l=Il(s[4])+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&16&&l!==(l=Il(n[4])+"")&&G(t,l)},d(n){n&&h(e)}}}function Au(s){let e,l;return e=new fe({props:{$$slots:{default:[Du,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&48&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Fu(s){let e,l;const t=[z(Ot),{sourceLayer:Ot},{paint:{"circle-color":xe(["get","crossing"],{traffic_signals:x.signalized_crossing},x.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:s[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Au]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new qt({props:n}),e.$on("click",zu),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(z(Ot)),o&0&&{sourceLayer:Ot},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Gu(s){let e,l,t,n,r;function o(i){s[3](i)}let f={name:Ot,title:qu,$$slots:{controls:[Ru],help:[Pu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${Ot}.pmtiles`,$$slots:{default:[Fu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&32&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&33&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ot="crossings",qu="Crossings";function Il(s){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[s.crossing]??`Unknown crossing type (${s.crossing})`}function zu(s){window.open(`http://openstreetmap.org/node/${s.detail.features[0].properties.osm_id}`,"_blank")}function Hu(s,e,l){let t,n=ce(Ot);Y(s,n,f=>l(0,t=f));let r=[["Signalized",x.signalized_crossing],["Other",x.other_crossing]];function o(f){t=f,n.set(t)}return[t,n,r,o]}class Eu extends K{constructor(e){super(),X(this,e,Hu,Gu,J,{})}}function Bu(s){let e;return{c(){e=y("OS Terrain 50")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Uu(s){let e,l,t,n,r,o,f,i,a,u,c,m,_,k;return i=new le({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[Bu]},$$scope:{ctx:s}}}),c=new Te({}),_=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This layer shows the steepness of roads, with the arrows pointing uphill.
      You have to zoom in to see all roads.`,t=L(),n=S("p"),n.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending on
      the underlying Digital Elevation Model used.`,r=L(),o=S("p"),f=y("This layer is built from "),b(i.$$.fragment),a=y(` and roads from OpenStreetMap. The data is valid as of 18 February
      2024.`),u=L(),b(c.$$.fragment),m=L(),b(_.$$.fragment),F(e,"slot","help")},m(T,C){d(T,e,C),p(e,l),p(e,t),p(e,n),p(e,r),p(e,o),p(o,f),w(i,o,null),p(o,a),p(e,u),w(c,e,null),p(e,m),w(_,e,null),k=!0},p(T,C){const N={};C&64&&(N.$$scope={dirty:C,ctx:T}),i.$set(N)},i(T){k||($(i.$$.fragment,T),$(c.$$.fragment,T),$(_.$$.fragment,T),k=!0)},o(T){g(i.$$.fragment,T),g(c.$$.fragment,T),g(_.$$.fragment,T),k=!1},d(T){T&&h(e),v(i),v(c),v(_)}}}function Wu(s){let e,l,t;return l=new Ge({props:{colorScale:s[1],limits:s[2]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Yu(s){let e,l,t,n=Math.abs(s[5].gradient)/100+"",r,o;return{c(){e=S("p"),l=y("Gradient: "),t=S("b"),r=y(n),o=y(`
        %`)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(t,r),p(e,o)},p(f,i){i&32&&n!==(n=Math.abs(f[5].gradient)/100+"")&&G(r,n)},d(f){f&&h(e)}}}function Ju(s){let e,l;return e=new fe({props:{$$slots:{default:[Yu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&96&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Vu(s){let e,l,t,n;const r=[z(Ye),{sourceLayer:Ye},{manageHoverState:!0},{paint:{"line-color":he(["/",["abs",["get","gradient"]],100],s[2],s[1]),"line-width":De,"line-opacity":te(1,.5)}},{layout:{visibility:s[0]?"visible":"none"}}];let o={$$slots:{default:[Ju]},$$scope:{ctx:s}};for(let a=0;a<r.length;a+=1)o=ne(o,r[a]);e=new de({props:o});const f=[z(Ye+"_arrows"),{sourceLayer:Ye},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:s[0]?"visible":"none"}}];let i={};for(let a=0;a<f.length;a+=1)i=ne(i,f[a]);return t=new Cn({props:i}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),n=!0},p(a,u){const c=u&7?re(r,[u&0&&se(z(Ye)),u&0&&{sourceLayer:Ye},r[2],u&6&&{paint:{"line-color":he(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":De,"line-opacity":te(1,.5)}},u&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};u&64&&(c.$$scope={dirty:u,ctx:a}),e.$set(c);const m=u&1?re(f,[u&0&&se(z(Ye+"_arrows")),u&0&&{sourceLayer:Ye},f[2],f[3],u&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(m)},i(a){n||($(e.$$.fragment,a),$(t.$$.fragment,a),n=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),n=!1},d(a){a&&h(l),v(e,a),v(t,a)}}}function Qu(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:Ye,title:Zu,$$slots:{controls:[Wu],help:[Uu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${Ye}.pmtiles`,$$slots:{default:[Vu]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&64&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&65&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Ye="gradient",Zu="Gradients";function Ku(s,e,l){let t,n=x.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=ce(Ye);Y(s,o,i=>l(0,t=i));function f(i){t=i,o.set(t)}return[t,n,r,o,f]}class Xu extends K{constructor(e){super(),X(this,e,Ku,Qu,J,{})}}function xu(s){let e,l;return{c(){e=S("img"),F(e,"slot","icon"),tn(e.src,l=qr)||F(e,"src",l),F(e,"alt","a logo representing cycle parking")},m(t,n){d(t,e,n)},p:Q,d(t){t&&h(e)}}}function ec(s){let e;return{c(){e=y("OpenStreetMap")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function tc(s){let e;return{c(){e=y("OpenStreetMap Carto")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function nc(s){let e,l,t,n,r,o,f,i,a,u,c,m;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[ec]},$$scope:{ctx:s}}}),a=new le({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[tc]},$$scope:{ctx:s}}}),c=new et({}),{c(){e=S("span"),l=S("p"),t=y("Cycle parking, according to "),b(n.$$.fragment),r=y(` (as of 9 August 2023). The type of parking, public/private
      access, and whether it's covered are not shown.`),o=L(),f=S("p"),i=y("Icon from "),b(a.$$.fragment),u=L(),b(c.$$.fragment),F(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(f,i),w(a,f,null),p(e,u),w(c,e,null),m=!0},p(_,k){const T={};k&16&&(T.$$scope={dirty:k,ctx:_}),n.$set(T);const C={};k&16&&(C.$$scope={dirty:k,ctx:_}),a.$set(C)},i(_){m||($(n.$$.fragment,_),$(a.$$.fragment,_),$(c.$$.fragment,_),m=!0)},o(_){g(n.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),m=!1},d(_){_&&h(e),v(n),v(a),v(c)}}}function lc(s){let e,l,t,n=(s[3].capacity??"unknown")+"",r;return{c(){e=S("p"),l=y("Capacity: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&8&&n!==(n=(o[3].capacity??"unknown")+"")&&G(r,n)},d(o){o&&h(e)}}}function rc(s){let e,l;return e=new fe({props:{$$slots:{default:[lc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function sc(s){let e,l;const t=[z(Nt),{sourceLayer:Nt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[rc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Cn({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(z(Nt)),o&0&&{sourceLayer:Nt},o&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function oc(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:Nt,title:ic,$$slots:{help:[nc],icon:[xu]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${Nt}.pmtiles`,$$slots:{default:[sc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Nt="cycle_parking",ic="Cycle parking";function ac(s,e,l){let t,n=ce(Nt);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class fc extends K{constructor(e){super(),X(this,e,ac,oc,J,{})}}function uc(s){let e,l,t,n,r;return n=new et({}),{c(){e=S("span"),l=S("p"),l.textContent=`This shows different places of education according to OpenStreetMap (as of
      07 February 2024).`,t=L(),b(n.$$.fragment),F(e,"slot","help")},m(o,f){d(o,e,f),p(e,l),p(e,t),w(n,e,null),r=!0},p:Q,i(o){r||($(n.$$.fragment,o),r=!0)},o(o){g(n.$$.fragment,o),r=!1},d(o){o&&h(e),v(n)}}}function cc(s){let e,l,t;return e=new Se({props:{color:x.education.schools}}),{c(){b(e.$$.fragment),l=y(`
        Schools`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function pc(s){let e,l,t;return e=new Se({props:{color:x.education.colleges}}),{c(){b(e.$$.fragment),l=y(`
        Colleges`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function $c(s){let e,l,t;return e=new Se({props:{color:x.education.universities}}),{c(){b(e.$$.fragment),l=y(`
        Universities`)},m(n,r){w(e,n,r),d(n,l,r),t=!0},p:Q,i(n){t||($(e.$$.fragment,n),t=!0)},o(n){g(e.$$.fragment,n),t=!1},d(n){n&&h(l),v(e,n)}}}function mc(s){let e,l,t,n,r,o,f,i,a;function u(C){s[3](C)}let c={$$slots:{default:[cc]},$$scope:{ctx:s}};s[0].school!==void 0&&(c.checked=s[0].school),e=new Je({props:c}),H.push(()=>E(e,"checked",u));function m(C){s[4](C)}let _={$$slots:{default:[pc]},$$scope:{ctx:s}};s[0].college!==void 0&&(_.checked=s[0].college),n=new Je({props:_}),H.push(()=>E(n,"checked",m));function k(C){s[5](C)}let T={$$slots:{default:[$c]},$$scope:{ctx:s}};return s[0].university!==void 0&&(T.checked=s[0].university),f=new Je({props:T}),H.push(()=>E(f,"checked",k)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),o=L(),b(f.$$.fragment)},m(C,N){w(e,C,N),d(C,t,N),w(n,C,N),d(C,o,N),w(f,C,N),a=!0},p(C,N){const D={};N&2048&&(D.$$scope={dirty:N,ctx:C}),!l&&N&1&&(l=!0,D.checked=C[0].school,B(()=>l=!1)),e.$set(D);const j={};N&2048&&(j.$$scope={dirty:N,ctx:C}),!r&&N&1&&(r=!0,j.checked=C[0].college,B(()=>r=!1)),n.$set(j);const M={};N&2048&&(M.$$scope={dirty:N,ctx:C}),!i&&N&1&&(i=!0,M.checked=C[0].university,B(()=>i=!1)),f.$set(M)},i(C){a||($(e.$$.fragment,C),$(n.$$.fragment,C),$(f.$$.fragment,C),a=!0)},o(C){g(e.$$.fragment,C),g(n.$$.fragment,C),g(f.$$.fragment,C),a=!1},d(C){C&&(h(t),h(o)),v(e,C),v(n,C),v(f,C)}}}function _c(s){let e,l,t;return l=new Fe({props:{small:!0,$$slots:{default:[mc]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const o={};r&2049&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function gc(s){let e,l=(s[10].name??"Unnamed institution")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&G(t,l)},d(n){n&&h(e)}}}function dc(s){let e,l;return e=new fe({props:{$$slots:{default:[gc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&3072&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function hc(s){let e,l;const t=[z(jt),{sourceLayer:jt},{paint:{"fill-color":xe(["get","type"],{school:x.education.schools,college:x.education.colleges,university:x.education.universities},"grey"),"fill-opacity":te(.7,1)}},{layout:{visibility:s[0].show?"visible":"none"}},{filter:s[2](s[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[dc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&5?re(t,[o&0&&se(z(jt)),o&0&&{sourceLayer:jt},t[2],o&1&&{layout:{visibility:r[0].show?"visible":"none"}},o&5&&{filter:r[2](r[0])},t[5],t[6]]):{};o&2048&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function bc(s){let e,l,t,n,r;function o(i){s[6](i)}let f={name:jt,title:wc,$$slots:{controls:[_c],help:[uc]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${jt}.pmtiles`,$$slots:{default:[hc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&2049&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&2049&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let jt="education",wc="Education";function vc(s){return{show:!0,school:s.includes("school"),college:s.includes("college"),university:s.includes("university")}}function kc(s,e,l){let t,n=["school","college","university"],r={show:!1,school:!0,college:!0,university:!0};function o(_){return _.show?n.filter(k=>_[k]).join(","):null}let f=Ht(jt,r,o,vc);Y(s,f,_=>l(0,t=_));function i(_){let k=n.filter(T=>_[T]);return["in",["get","type"],["literal",k]]}function a(_){s.$$.not_equal(t.school,_)&&(t.school=_,f.set(t))}function u(_){s.$$.not_equal(t.college,_)&&(t.college=_,f.set(t))}function c(_){s.$$.not_equal(t.university,_)&&(t.university=_,f.set(t))}function m(_){s.$$.not_equal(t.show,_)&&(t.show=_,f.set(t))}return[t,f,i,a,u,c,m]}class yc extends K{constructor(e){super(),X(this,e,kc,bc,J,{})}}function Sc(s){let e,l,t;return l=new Se({props:{color:x.hospitals}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Tc(s){let e;return{c(){e=y("hospital")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Cc(s){let e,l,t,n,r,o,f,i;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Tc]},$$scope:{ctx:s}}}),f=new et({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
      outpatient clinics or individual doctor's offices.`),o=L(),b(f.$$.fragment),F(e,"slot","help")},m(a,u){d(a,e,u),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),w(f,e,null),i=!0},p(a,u){const c={};u&16&&(c.$$scope={dirty:u,ctx:a}),n.$set(c)},i(a){i||($(n.$$.fragment,a),$(f.$$.fragment,a),i=!0)},o(a){g(n.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&h(e),v(n),v(f)}}}function Lc(s){let e,l=(s[3].name??"Unnamed hospital")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed hospital")+"")&&G(t,l)},d(n){n&&h(e)}}}function Mc(s){let e,l;return e=new fe({props:{$$slots:{default:[Lc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Ic(s){let e,l;const t=[z(Pt),{sourceLayer:Pt},{paint:{"fill-color":x.hospitals,"fill-opacity":te(.7,1)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Mc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(z(Pt)),o&0&&{sourceLayer:Pt},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Oc(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:Pt,title:Nc,$$slots:{help:[Cc],icon:[Sc]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${Pt}.pmtiles`,$$slots:{default:[Ic]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Pt="hospitals",Nc="Hospitals";function jc(s,e,l){let t,n=ce(Pt);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class Pc extends K{constructor(e){super(),X(this,e,jc,Oc,J,{})}}function Rc(s){let e,l;return{c(){e=S("img"),F(e,"slot","icon"),tn(e.src,l=zr)||F(e,"src",l),F(e,"alt","A logo representing a train")},m(t,n){d(t,e,n)},p:Q,d(t){t&&h(e)}}}function Dc(s){let e;return{c(){e=y("railway station")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ac(s){let e;return{c(){e=y(`National Rail
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Fc(s){let e,l,t,n,r,o,f,i,a,u,c,m,_;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Dc]},$$scope:{ctx:s}}}),a=new le({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Ac]},$$scope:{ctx:s}}}),m=new et({}),{c(){e=S("div"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" data from OpenStreetMap (as of 9 August 2023)."),o=L(),f=S("p"),i=y("Icon from "),b(a.$$.fragment),u=y(". (Note that not all stations shown are National Rail.)"),c=L(),b(m.$$.fragment),F(e,"slot","help")},m(k,T){d(k,e,T),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(f,i),w(a,f,null),p(f,u),p(e,c),w(m,e,null),_=!0},p(k,T){const C={};T&16&&(C.$$scope={dirty:T,ctx:k}),n.$set(C);const N={};T&16&&(N.$$scope={dirty:T,ctx:k}),a.$set(N)},i(k){_||($(n.$$.fragment,k),$(a.$$.fragment,k),$(m.$$.fragment,k),_=!0)},o(k){g(n.$$.fragment,k),g(a.$$.fragment,k),g(m.$$.fragment,k),_=!1},d(k){k&&h(e),v(n),v(a),v(m)}}}function Gc(s){let e,l=(s[3].name??"Unnamed railway station")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&G(t,l)},d(n){n&&h(e)}}}function qc(s){let e,l;return e=new fe({props:{$$slots:{default:[Gc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function zc(s){let e,l;const t=[z(Kt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}];let n={$$slots:{default:[qc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Cn({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(z(Kt)),o&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Hc(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:Kt,title:Ec,$$slots:{help:[Fc],icon:[Rc]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new zt({props:{data:`${pe()}/v1/${Kt}.geojson`,$$slots:{default:[zc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Kt="railway_stations",Ec="Railway stations";function Bc(s,e,l){let t,n=ce(Kt);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class Uc extends K{constructor(e){super(),X(this,e,Bc,Hc,J,{})}}function Wc(s){let e,l,t;return l=new Se({props:{color:x.sports_spaces}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","icon")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Yc(s){let e;return{c(){e=y("sports pitches")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Jc(s){let e;return{c(){e=y("sports centres")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Vc(s){let e,l,t,n,r,o,f,i,a,u;return n=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Yc]},$$scope:{ctx:s}}}),o=new le({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Jc]},$$scope:{ctx:s}}}),a=new et({}),{c(){e=S("span"),l=S("p"),t=y("This shows "),b(n.$$.fragment),r=y(" and "),b(o.$$.fragment),f=y(" data from OpenStreetMap (as of 9 August 2023)."),i=L(),b(a.$$.fragment),F(e,"slot","help")},m(c,m){d(c,e,m),p(e,l),p(l,t),w(n,l,null),p(l,r),w(o,l,null),p(l,f),p(e,i),w(a,e,null),u=!0},p(c,m){const _={};m&16&&(_.$$scope={dirty:m,ctx:c}),n.$set(_);const k={};m&16&&(k.$$scope={dirty:m,ctx:c}),o.$set(k)},i(c){u||($(n.$$.fragment,c),$(o.$$.fragment,c),$(a.$$.fragment,c),u=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&h(e),v(n),v(o),v(a)}}}function Qc(s){let e,l=(s[3].name??"Unnamed sports space")+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&8&&l!==(l=(n[3].name??"Unnamed sports space")+"")&&G(t,l)},d(n){n&&h(e)}}}function Zc(s){let e,l;return e=new fe({props:{$$slots:{default:[Qc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&24&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Kc(s){let e,l;const t=[z(Rt),{sourceLayer:Rt},{paint:{"fill-color":x.sports_spaces,"fill-opacity":te(.7,1)}},{layout:{visibility:s[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Zc]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&1?re(t,[o&0&&se(z(Rt)),o&0&&{sourceLayer:Rt},t[2],o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Xc(s){let e,l,t,n,r;function o(i){s[2](i)}let f={name:Rt,title:xc,$$slots:{help:[Vc],icon:[Wc]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${Rt}.pmtiles`,$$slots:{default:[Kc]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&16&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Rt="sports_spaces",xc="Sports spaces";function ep(s,e,l){let t,n=ce(Rt);Y(s,n,o=>l(0,t=o));function r(o){t=o,n.set(t)}return[t,n,r]}class tp extends K{constructor(e){super(),X(this,e,ep,Xc,J,{})}}function np(s){let e;return{c(){e=y("DfT stats19")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function lp(s){let e;return{c(){e=y("documented by DfT")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function rp(s){let e,l,t,n,r,o,f,i,a,u,c,m,_,k,T,C,N,D,j,M,O,I,R,P;return n=new le({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[np]},$$scope:{ctx:s}}}),D=new le({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[lp]},$$scope:{ctx:s}}}),R=new Te({}),{c(){e=S("span"),l=S("p"),t=y("This layer shows collisions recorded in the "),b(n.$$.fragment),r=y(" dataset. Please note these limitations:"),o=L(),f=S("ul"),i=S("li"),i.textContent="Only collisions between 2017 and 2022 are included",a=L(),u=S("li"),u.textContent=`This tool is intended to be used at high-zoom levels, while inspecting a
        scheme or development area. Not all points are shown at lower zoom
        levels. Do not use this to look for trends across a city or region
        scale.`,c=L(),m=S("li"),m.textContent=`Approximately 150 collisions from the source data aren't included, due
        to problems with the recorded location`,_=L(),k=S("li"),k.textContent='The "pedestrians" category also include mobility scooters',T=L(),C=S("li"),N=y("All limitations "),b(D.$$.fragment),j=y(` also apply. Not all collisions or near misses are reported.
        There's nuance with the severity categories.`),M=L(),O=S("p"),O.textContent="You can click a point to open the full report, thanks to CycleStreets.",I=L(),b(R.$$.fragment),F(e,"slot","help")},m(q,Z){d(q,e,Z),p(e,l),p(l,t),w(n,l,null),p(l,r),p(e,o),p(e,f),p(f,i),p(f,a),p(f,u),p(f,c),p(f,m),p(f,_),p(f,k),p(f,T),p(f,C),p(C,N),w(D,C,null),p(C,j),p(e,M),p(e,O),p(e,I),w(R,e,null),P=!0},p(q,Z){const ae={};Z&4194304&&(ae.$$scope={dirty:Z,ctx:q}),n.$set(ae);const A={};Z&4194304&&(A.$$scope={dirty:Z,ctx:q}),D.$set(A)},i(q){P||($(n.$$.fragment,q),$(D.$$.fragment,q),$(R.$$.fragment,q),P=!0)},o(q){g(n.$$.fragment,q),g(D.$$.fragment,q),g(R.$$.fragment,q),P=!1},d(q){q&&h(e),v(n),v(D),v(R)}}}function sp(s){let e;return{c(){e=y("Pedestrians")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function op(s){let e;return{c(){e=y("Cyclists")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ip(s){let e;return{c(){e=y("Horse riders")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ap(s){let e;return{c(){e=y("Other")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function fp(s){let e,l,t,n,r,o,f,i,a,u,c,m;function _(O){s[10](O)}let k={$$slots:{default:[sp]},$$scope:{ctx:s}};s[0].pedestrians!==void 0&&(k.checked=s[0].pedestrians),e=new Je({props:k}),H.push(()=>E(e,"checked",_));function T(O){s[11](O)}let C={$$slots:{default:[op]},$$scope:{ctx:s}};s[0].cyclists!==void 0&&(C.checked=s[0].cyclists),n=new Je({props:C}),H.push(()=>E(n,"checked",T));function N(O){s[12](O)}let D={$$slots:{default:[ip]},$$scope:{ctx:s}};s[0].horseRiders!==void 0&&(D.checked=s[0].horseRiders),f=new Je({props:D}),H.push(()=>E(f,"checked",N));function j(O){s[13](O)}let M={$$slots:{default:[ap]},$$scope:{ctx:s}};return s[0].other!==void 0&&(M.checked=s[0].other),u=new Je({props:M}),H.push(()=>E(u,"checked",j)),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment),o=L(),b(f.$$.fragment),a=L(),b(u.$$.fragment)},m(O,I){w(e,O,I),d(O,t,I),w(n,O,I),d(O,o,I),w(f,O,I),d(O,a,I),w(u,O,I),m=!0},p(O,I){const R={};I&4194304&&(R.$$scope={dirty:I,ctx:O}),!l&&I&1&&(l=!0,R.checked=O[0].pedestrians,B(()=>l=!1)),e.$set(R);const P={};I&4194304&&(P.$$scope={dirty:I,ctx:O}),!r&&I&1&&(r=!0,P.checked=O[0].cyclists,B(()=>r=!1)),n.$set(P);const q={};I&4194304&&(q.$$scope={dirty:I,ctx:O}),!i&&I&1&&(i=!0,q.checked=O[0].horseRiders,B(()=>i=!1)),f.$set(q);const Z={};I&4194304&&(Z.$$scope={dirty:I,ctx:O}),!c&&I&1&&(c=!0,Z.checked=O[0].other,B(()=>c=!1)),u.$set(Z)},i(O){m||($(e.$$.fragment,O),$(n.$$.fragment,O),$(f.$$.fragment,O),$(u.$$.fragment,O),m=!0)},o(O){g(e.$$.fragment,O),g(n.$$.fragment,O),g(f.$$.fragment,O),g(u.$$.fragment,O),m=!1},d(O){O&&(h(t),h(o),h(a)),v(e,O),v(n,O),v(f,O),v(u,O)}}}function up(s){let e,l,t,n,r,o,f,i,a,u,c,m,_;return l=new Fe({props:{small:!0,$$slots:{default:[fp]},$$scope:{ctx:s}}}),u=new xt({props:{rows:s[9]}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),n=S("div"),r=y(`Filter years:
      `),o=S("input"),f=y(`
      -
      `),i=S("input"),a=L(),b(u.$$.fragment),F(o,"type","number"),F(o,"min",2017),F(o,"max",2022),F(o,"class","svelte-1ft65rw"),F(i,"type","number"),F(i,"min",2017),F(i,"max",2022),F(i,"class","svelte-1ft65rw"),F(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(k,T){d(k,e,T),w(l,e,null),p(e,t),p(e,n),p(n,r),p(n,o),Qe(o,s[0].minYear),p(n,f),p(n,i),Qe(i,s[0].maxYear),p(e,a),w(u,e,null),c=!0,m||(_=[rt(o,"input",s[14]),rt(i,"input",s[15])],m=!0)},p(k,T){const C={};T&4194305&&(C.$$scope={dirty:T,ctx:k}),l.$set(C),T&1&&Zt(o.value)!==k[0].minYear&&Qe(o,k[0].minYear),T&1&&Zt(i.value)!==k[0].maxYear&&Qe(i,k[0].maxYear)},i(k){c||($(l.$$.fragment,k),$(u.$$.fragment,k),c=!0)},o(k){g(l.$$.fragment,k),g(u.$$.fragment,k),c=!1},d(k){k&&h(e),v(l),v(u),m=!1,Cr(_)}}}function Ol(s){let e,l,t,n=s[3][s[21].pedestrian_location]+"",r;return{c(){e=S("p"),l=y("Pedestrian location: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&2097152&&n!==(n=o[3][o[21].pedestrian_location]+"")&&G(r,n)},d(o){o&&h(e)}}}function Nl(s){let e,l,t,n=s[4][s[21].pedestrian_movement]+"",r;return{c(){e=S("p"),l=y("Pedestrian movement: "),t=S("b"),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(t,r)},p(o,f){f&2097152&&n!==(n=o[4][o[21].pedestrian_movement]+"")&&G(r,n)},d(o){o&&h(e)}}}function cp(s){let e,l,t,n=s[21].year+"",r,o,f,i,a,u=s[5][s[21].severity]+"",c,m,_,k,T,C=jl(s[21])+"",N,D,j,M,O,I=s[21].pedestrian_location&&Ol(s),R=s[21].pedestrian_movement&&Nl(s);return{c(){e=S("p"),l=y("Year: "),t=S("b"),r=y(n),o=L(),f=S("p"),i=y("Severity: "),a=S("b"),c=y(u),m=L(),_=S("p"),k=y("Casualties: "),T=S("b"),N=y(C),D=L(),I&&I.c(),j=L(),R&&R.c(),M=L(),O=S("p"),O.textContent="Click to open full report in CycleStreets"},m(P,q){d(P,e,q),p(e,l),p(e,t),p(t,r),d(P,o,q),d(P,f,q),p(f,i),p(f,a),p(a,c),d(P,m,q),d(P,_,q),p(_,k),p(_,T),p(T,N),d(P,D,q),I&&I.m(P,q),d(P,j,q),R&&R.m(P,q),d(P,M,q),d(P,O,q)},p(P,q){q&2097152&&n!==(n=P[21].year+"")&&G(r,n),q&2097152&&u!==(u=P[5][P[21].severity]+"")&&G(c,u),q&2097152&&C!==(C=jl(P[21])+"")&&G(N,C),P[21].pedestrian_location?I?I.p(P,q):(I=Ol(P),I.c(),I.m(j.parentNode,j)):I&&(I.d(1),I=null),P[21].pedestrian_movement?R?R.p(P,q):(R=Nl(P),R.c(),R.m(M.parentNode,M)):R&&(R.d(1),R=null)},d(P){P&&(h(e),h(o),h(f),h(m),h(_),h(D),h(j),h(M),h(O)),I&&I.d(P),R&&R.d(P)}}}function pp(s){let e,l;return e=new fe({props:{$$slots:{default:[cp,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&6291456&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function $p(s){let e,l;const t=[z(Dt),{sourceLayer:Dt},{paint:{"circle-color":he(["get","severity"],[1,2,3],[s[6],s[7],s[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:s[1]},{layout:{visibility:s[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[pp]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new qt({props:n}),e.$on("click",dp),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&451?re(t,[o&0&&se(z(Dt)),o&0&&{sourceLayer:Dt},o&448&&{paint:{"circle-color":he(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&2&&{filter:r[1]},o&1&&{layout:{visibility:r[0].show?"visible":"none"}},t[5],t[6]]):{};o&4194304&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function mp(s){let e,l,t,n,r;function o(i){s[16](i)}let f={name:Dt,title:_p,$$slots:{controls:[up],help:[rp]},$$scope:{ctx:s}};return s[0].show!==void 0&&(f.show=s[0].show),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${Dt}.pmtiles`,$$slots:{default:[$p]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&4194305&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0].show,B(()=>l=!1)),e.$set(u);const c={};a&4194307&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let Dt="stats19",_p="Stats19";function gp(s){let[e,l,t]=s.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function jl(s){let e=[];return s.pedestrian&&e.push("pedestrian"),s.cyclist&&e.push("cyclist"),s.horse_rider&&e.push("horse rider"),s.other&&e.push("other"),e.join(", ")}function dp(s){window.open(`https://www.cyclestreets.net/collisions/reports/${s.detail.features[0].properties.accident_index}`,"_blank")}function hp(s,e,l){let t,n,r=["pedestrians","cyclists","horseRiders","other"],o={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function f(P){return P.show?`${r.filter(Z=>P[Z]).join(",")}/${P.minYear}/${P.maxYear}`:null}let i=Ht(Dt,o,f,gp);Y(s,i,P=>l(0,n=P));function a(P,q,Z,ae,A,ee){let V=["any"];return n.pedestrians&&V.push(["get","pedestrian"]),n.cyclists&&V.push(["get","cyclist"]),n.horseRiders&&V.push(["get","horse_rider"]),n.other&&V.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],V]}let u={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},m={1:"Fatal",2:"Serious",3:"Slight"},_=x.sequential_low_to_high[4],k=x.sequential_low_to_high[2],T=x.sequential_low_to_high[0],C=[["Fatal",_],["Serious",k],["Slight",T]];function N(P){s.$$.not_equal(n.pedestrians,P)&&(n.pedestrians=P,i.set(n))}function D(P){s.$$.not_equal(n.cyclists,P)&&(n.cyclists=P,i.set(n))}function j(P){s.$$.not_equal(n.horseRiders,P)&&(n.horseRiders=P,i.set(n))}function M(P){s.$$.not_equal(n.other,P)&&(n.other=P,i.set(n))}function O(){n.minYear=Zt(this.value),i.set(n)}function I(){n.maxYear=Zt(this.value),i.set(n)}function R(P){s.$$.not_equal(n.show,P)&&(n.show=P,i.set(n))}return s.$$.update=()=>{s.$$.dirty&1&&l(1,t=a(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,i,u,c,m,_,k,T,C,N,D,j,M,O,I,R]}class bp extends K{constructor(e){super(),X(this,e,hp,mp,J,{})}}function wp(s){let e;return{c(){e=y(`DfT road statistics
      `)},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function vp(s){let e;return{c(){e=y("methodology")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function kp(s){let e,l,t,n,r,o,f,i,a,u,c,m;return n=new le({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[wp]},$$scope:{ctx:s}}}),o=new le({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[vp]},$$scope:{ctx:s}}}),c=new Te({}),{c(){e=S("span"),l=S("p"),t=y("AADF (annual average daily flow) data from "),b(n.$$.fragment),r=y(`. This counts the total daily number of vehicles traveling
      past a count point (in both directions) on an average day of the year.
      Data from the latest year available is shown. See `),b(o.$$.fragment),f=y(" for details and caveats about the measurements."),i=L(),a=S("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
      thicker when the latest data is a manual or automatic count, and thinner
      when it's an estimate from previous years or nearby counters. Click a
      point for full data.`,u=L(),b(c.$$.fragment),F(e,"slot","help")},m(_,k){d(_,e,k),p(e,l),p(l,t),w(n,l,null),p(l,r),w(o,l,null),p(l,f),p(e,i),p(e,a),p(e,u),w(c,e,null),m=!0},p(_,k){const T={};k&128&&(T.$$scope={dirty:k,ctx:_}),n.$set(T);const C={};k&128&&(C.$$scope={dirty:k,ctx:_}),o.$set(C)},i(_){m||($(n.$$.fragment,_),$(o.$$.fragment,_),$(c.$$.fragment,_),m=!0)},o(_){g(n.$$.fragment,_),g(o.$$.fragment,_),g(c.$$.fragment,_),m=!1},d(_){_&&h(e),v(n),v(o),v(c)}}}function yp(s){let e,l,t;return l=new Ge({props:{colorScale:s[1],limits:s[3]}}),{c(){e=S("span"),b(l.$$.fragment),F(e,"slot","controls")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Sp(s){let e,l=s[6].location+"",t,n,r,o,f=s[6].year+"",i,a,u,c=s[6].motor_vehicles.toLocaleString()+"",m,_,k,T,C=s[6].year+"",N,D,j,M=s[6].pedal_cycles.toLocaleString()+"",O,I,R,P,q,Z=s[6].method+"",ae;return{c(){e=S("h2"),t=y(l),n=L(),r=S("p"),o=y("Total motor vehicles ("),i=y(f),a=y(` AADF):
        `),u=S("b"),m=y(c),_=L(),k=S("p"),T=y("Total pedal cycles ("),N=y(C),D=y(` AADF):
        `),j=S("b"),O=y(M),I=L(),R=S("p"),P=y("Count method: "),q=S("b"),ae=y(Z)},m(A,ee){d(A,e,ee),p(e,t),d(A,n,ee),d(A,r,ee),p(r,o),p(r,i),p(r,a),p(r,u),p(u,m),d(A,_,ee),d(A,k,ee),p(k,T),p(k,N),p(k,D),p(k,j),p(j,O),d(A,I,ee),d(A,R,ee),p(R,P),p(R,q),p(q,ae)},p(A,ee){ee&64&&l!==(l=A[6].location+"")&&G(t,l),ee&64&&f!==(f=A[6].year+"")&&G(i,f),ee&64&&c!==(c=A[6].motor_vehicles.toLocaleString()+"")&&G(m,c),ee&64&&C!==(C=A[6].year+"")&&G(N,C),ee&64&&M!==(M=A[6].pedal_cycles.toLocaleString()+"")&&G(O,M),ee&64&&Z!==(Z=A[6].method+"")&&G(ae,Z)},d(A){A&&(h(e),h(n),h(r),h(_),h(k),h(I),h(R))}}}function Tp(s){let e,l;return e=new fe({props:{$$slots:{default:[Sp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&192&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Cp(s){let e,l;const t=[z(At),{sourceLayer:At},{paint:{"circle-color":he(["get","motor_vehicles"],s[2],s[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:s[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Tp]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new qt({props:n}),e.$on("click",Ip),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&7?re(t,[o&0&&se(z(At)),o&0&&{sourceLayer:At},o&6&&{paint:{"circle-color":he(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[4],t[5]]):{};o&128&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Lp(s){let e,l,t,n,r;function o(i){s[5](i)}let f={name:At,title:Mp,$$slots:{controls:[yp],help:[kp]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new $e({props:{url:`pmtiles://${pe()}/v1/${At}.pmtiles`,$$slots:{default:[Cp]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&128&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&129&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let At="vehicle_counts",Mp="Vehicle counts";function Ip(s){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${s.detail.features[0].properties.count_point}`,"_blank")}function Op(s,e,l){let t,n=x.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],f=ce(At);Y(s,f,a=>l(0,t=a));function i(a){t=a,f.set(t)}return[t,n,r,o,f,i]}class Np extends K{constructor(e){super(),X(this,e,Op,Lp,J,{})}}function Pl(s,e,l){const t=s.slice();return t[6]=e[l],t}function jp(s){let e;return{c(){e=S("span"),e.innerHTML=`<p>Critical issues and policy conflicts from the Design Assistance Log. This
      is internally collected data.</p> <p>This layer is manually copied from a copy of the DA Log. The data is
      recent as of 10 June 2024.</p>`,F(e,"slot","help")},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function Pp(s){let e,l,t;return l=new xt({props:{rows:s[3]}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p:Q,i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function Rp(s){let e,l=s[5]["Issue ID"]+"",t,n,r=s[5].Code+"",o,f,i,a=s[5]["Issue Stage"]+"",u;return{c(){e=S("h2"),t=y(l),n=y(" - "),o=y(r),f=L(),i=S("p"),u=y(a)},m(c,m){d(c,e,m),p(e,t),p(e,n),p(e,o),d(c,f,m),d(c,i,m),p(i,u)},p(c,m){m&32&&l!==(l=c[5]["Issue ID"]+"")&&G(t,l),m&32&&r!==(r=c[5].Code+"")&&G(o,r),m&32&&a!==(a=c[5]["Issue Stage"]+"")&&G(u,a)},d(c){c&&(h(e),h(f),h(i))}}}function Rl(s){let e,l=s[6]+"",t,n,r,o=s[5][s[6]]+"",f,i;return{c(){e=S("p"),t=y(l),n=y(`:
            `),r=S("b"),f=y(o),i=L()},m(a,u){d(a,e,u),p(e,t),p(e,n),p(e,r),p(r,f),p(e,i)},p(a,u){u&32&&o!==(o=a[5][a[6]]+"")&&G(f,o)},d(a){a&&h(e)}}}function Dp(s){let e,l=ve(s[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Rl(Pl(s,l,n));return{c(){e=S("div");for(let n=0;n<t.length;n+=1)t[n].c();ie(e,"max-width","30vw"),ie(e,"max-height","60vh"),ie(e,"overflow","auto")},m(n,r){d(n,e,r);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,r){if(r&36){l=ve(n[2]);let o;for(o=0;o<l.length;o+=1){const f=Pl(n,l,o);t[o]?t[o].p(f,r):(t[o]=Rl(f),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&h(e),Ke(t,n)}}}function Ap(s){let e,l,t,n;return e=new fe({props:{openOn:"hover",$$slots:{default:[Rp,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:s}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Dp,({props:r})=>({5:r}),({props:r})=>r?32:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&544&&(f.$$scope={dirty:o,ctx:r}),e.$set(f);const i={};o&544&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||($(e.$$.fragment,r),$(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function Fp(s){let e,l;const t=[z(rn),{paint:{"circle-color":xe(["get","Design Review Status"],Object.fromEntries(s[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:s[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Ap]},$$scope:{ctx:s}};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new qt({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&9?re(t,[o&0&&se(z(rn)),o&8&&{paint:{"circle-color":xe(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&1&&{layout:{visibility:r[0]?"visible":"none"}},t[3],t[4]]):{};o&512&&(f.$$scope={dirty:o,ctx:r}),e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function Gp(s){let e,l,t,n,r;function o(i){s[4](i)}let f={name:rn,title:qp,$$slots:{controls:[Pp],help:[jp]},$$scope:{ctx:s}};return s[0]!==void 0&&(f.show=s[0]),e=new ue({props:f}),H.push(()=>E(e,"show",o)),n=new zt({props:{data:`${Xt()}/v1/problems.geojson.gz`,$$slots:{default:[Fp]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,[a]){const u={};a&512&&(u.$$scope={dirty:a,ctx:i}),!l&&a&1&&(l=!0,u.show=i[0],B(()=>l=!1)),e.$set(u);const c={};a&513&&(c.$$scope={dirty:a,ctx:i}),n.$set(c)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}let rn="problems",qp="Issues & Conflicts";function zp(s,e,l){let t,n=ce(rn);Y(s,n,i=>l(0,t=i));let r=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],o=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function f(i){t=i,n.set(t)}return[t,n,r,o,f]}class Hp extends K{constructor(e){super(),X(this,e,zp,Gp,J,{})}}function Ep(s){let e;function l(r,o){return r[2]<=100?Wp:Up}let t=l(s),n=t(s);return{c(){n.c(),e=we()},m(r,o){n.m(r,o),d(r,e,o)},p(r,o){t===(t=l(r))&&n?n.p(r,o):(n.d(1),n=t(r),n&&(n.c(),n.m(e.parentNode,e)))},i:Q,o:Q,d(r){r&&h(e),n.d(r)}}}function Bp(s){let e,l;return e=new Xe({props:{$$slots:{default:[Yp]},$$scope:{ctx:s}}}),e.$on("click",s[3]),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&64&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function Up(s){let e;return{c(){e=S("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){d(l,e,t)},p:Q,d(l){l&&h(e)}}}function Wp(s){let e,l,t;return{c(){e=S("label"),l=y(`Downloading scheme data
      `),t=S("progress"),t.value=s[2],F(t,"class","svelte-q3473n")},m(n,r){d(n,e,r),p(e,l),p(e,t)},p(n,r){r&4&&(t.value=n[2])},d(n){n&&h(e)}}}function Yp(s){let e;return{c(){e=y("Load latest scheme data")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Jp(s){let e,l,t,n;const r=[Bp,Ep],o=[];function f(i,a){return i[0]?i[1]?1:-1:0}return~(e=f(s))&&(l=o[e]=r[e](s)),{c(){l&&l.c(),t=we()},m(i,a){~e&&o[e].m(i,a),d(i,t,a),n=!0},p(i,[a]){let u=e;e=f(i),e===u?~e&&o[e].p(i,a):(l&&(_e(),g(o[u],1,1,()=>{o[u]=null}),ge()),~e?(l=o[e],l?l.p(i,a):(l=o[e]=r[e](i),l.c()),$(l,1),l.m(t.parentNode,t)):l=null)},i(i){n||($(l),n=!0)},o(i){g(l),n=!1},d(i){i&&h(t),~e&&o[e].d(i)}}}function Vp(s,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),r=!0,o=0;async function f(){let a=await Hr(`${Xt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,o=c)});l(2,o=100);let u=new TextDecoder().decode(a);t("all_schemes_output.geojson",u),l(1,r=!1)}yn(async()=>{n&&await f()});async function i(){l(0,n=!0),await f()}return s.$$set=a=>{"loadFile"in a&&l(4,t=a.loadFile)},[n,r,o,i,t]}class Qp extends K{constructor(e){super(),X(this,e,Vp,Jp,J,{loadFile:4})}}const sn=Pe({type:"FeatureCollection",features:[],schemes:{}}),mn=Pe(new Map),Dl=Pe(""),Al=Pe(""),_n=Pe({type:"FeatureCollection",features:[],schemes:{}}),gn=Pe(new Map),Fl=Pe(""),Gl=Pe("");function Zp(s){let e={type:"FeatureCollection",features:[],schemes:{},notes:s.notes},l=new Map,t={type:"FeatureCollection",features:[],schemes:{},notes:s.notes},n=new Map;for(let[r,o]of Object.entries(s.schemes))o.pipeline?(n.set(r,o),t.schemes[r]=o):(l.set(r,o),e.schemes[r]=o);for(let r of s.features){if(!Kp(r))continue;let o=r.properties.scheme_reference,f=l.has(o),a=(f?l:n).get(o);a.browse&&(r.properties.funding_programme=a.browse.funding_programme,r.properties.current_milestone=a.browse.current_milestone);let u=f?e:t;r.id=u.features.length+1,u.features.push(r)}sn.set(e),mn.set(l),_n.set(t),gn.set(n)}function Kp(s){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(s.properties.id)}let Jt={ATF2:"#66c2a5","ATF2 or ATF3":"#fc8d62",ATF3:"#8da0cb",ATF4:"#e78ac3",ATF4E:"#a6d854"},dn={removed:"grey","no data":"grey","not progressed":"red",superseded:"red","preliminary design completed":"#fbb862","feasability design completed":"#eddc76","detailed design completed":"#dafd9d","consruction started":"#76c384","construction completed":"#488f31"};function ql(s,e,l){const t=s.slice();return t[28]=e[l],t[29]=e,t[30]=l,t}function Xp(s){let e;return{c(){e=y("Filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function xp(s){let e;return{c(){e=y("Reset all filters")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function e$(s){let e,l,t,n,r,o,f,i;e=new cn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[l$]},$$scope:{ctx:s}}});function a(_){s[23](_)}let u={label:"Scheme name or reference",options:on(s[3])};s[0]!==void 0&&(u.value=s[0]),t=new Mr({props:u}),H.push(()=>E(t,"value",a));function c(_){s[24](_)}let m={label:"Authority or region",choices:s[10],emptyOption:!0};return s[4]!==void 0&&(m.value=s[4]),o=new Gt({props:m}),H.push(()=>E(o,"value",c)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),r=L(),b(o.$$.fragment)},m(_,k){w(e,_,k),d(_,l,k),w(t,_,k),d(_,r,k),w(o,_,k),i=!0},p(_,k){const T={};k[0]&2|k[1]&1&&(T.$$scope={dirty:k,ctx:_}),e.$set(T);const C={};k[0]&8&&(C.options=on(_[3])),!n&&k[0]&1&&(n=!0,C.value=_[0],B(()=>n=!1)),t.$set(C);const N={};k[0]&1024&&(N.choices=_[10]),!f&&k[0]&16&&(f=!0,N.value=_[4],B(()=>f=!1)),o.$set(N)},i(_){i||($(e.$$.fragment,_),$(t.$$.fragment,_),$(o.$$.fragment,_),i=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(o.$$.fragment,_),i=!1},d(_){_&&(h(l),h(r)),v(e,_),v(t,_),v(o,_)}}}function t$(s){let e,l,t,n,r,o,f,i,a,u,c,m,_,k,T,C;t=new cn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[s$]},$$scope:{ctx:s}}});function N(R){s[17](R)}let D={label:"Scheme name or reference",options:on(s[3])};s[0]!==void 0&&(D.value=s[0]),r=new Mr({props:D}),H.push(()=>E(r,"value",N));function j(R){s[18](R)}let M={label:"Authority or region",choices:s[10],emptyOption:!0};s[4]!==void 0&&(M.value=s[4]),i=new Gt({props:M}),H.push(()=>E(i,"value",j)),m=new cn({props:{label:"Funding programmes",id:"filterFundingProgrammes",$$slots:{default:[a$]},$$scope:{ctx:s}}});function O(R){s[20](R)}let I={label:"Current milestone",choices:s[11],emptyOption:!0};return s[6]!==void 0&&(I.value=s[6]),k=new Gt({props:I}),H.push(()=>E(k,"value",O)),{c(){e=S("div"),l=S("div"),b(t.$$.fragment),n=L(),b(r.$$.fragment),f=L(),b(i.$$.fragment),u=L(),c=S("div"),b(m.$$.fragment),_=L(),b(k.$$.fragment),F(l,"class","govuk-grid-column-one-half"),F(c,"class","govuk-grid-column-one-half"),F(e,"class","govuk-grid-row")},m(R,P){d(R,e,P),p(e,l),w(t,l,null),p(l,n),w(r,l,null),p(l,f),w(i,l,null),p(e,u),p(e,c),w(m,c,null),p(c,_),w(k,c,null),C=!0},p(R,P){const q={};P[0]&2|P[1]&1&&(q.$$scope={dirty:P,ctx:R}),t.$set(q);const Z={};P[0]&8&&(Z.options=on(R[3])),!o&&P[0]&1&&(o=!0,Z.value=R[0],B(()=>o=!1)),r.$set(Z);const ae={};P[0]&1024&&(ae.choices=R[10]),!a&&P[0]&16&&(a=!0,ae.value=R[4],B(()=>a=!1)),i.$set(ae);const A={};P[0]&32|P[1]&1&&(A.$$scope={dirty:P,ctx:R}),m.$set(A);const ee={};!T&&P[0]&64&&(T=!0,ee.value=R[6],B(()=>T=!1)),k.$set(ee)},i(R){C||($(t.$$.fragment,R),$(r.$$.fragment,R),$(i.$$.fragment,R),$(m.$$.fragment,R),$(k.$$.fragment,R),C=!0)},o(R){g(t.$$.fragment,R),g(r.$$.fragment,R),g(i.$$.fragment,R),g(m.$$.fragment,R),g(k.$$.fragment,R),C=!1},d(R){R&&h(e),v(t),v(r),v(i),v(m),v(k)}}}function n$(s){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function l$(s){let e,l,t,n,r,o;return t=new Xe({props:{$$slots:{default:[n$]},$$scope:{ctx:s}}}),t.$on("click",s[22]),{c(){e=S("input"),l=L(),b(t.$$.fragment),F(e,"type","text"),F(e,"class","govuk-input govuk-input--width-10"),F(e,"id","filterInterventionText")},m(f,i){d(f,e,i),Qe(e,s[1]),d(f,l,i),w(t,f,i),n=!0,r||(o=rt(e,"input",s[21]),r=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&Qe(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||($(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,o()}}}function r$(s){let e;return{c(){e=y("Clear")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function s$(s){let e,l,t,n,r,o;return t=new Xe({props:{$$slots:{default:[r$]},$$scope:{ctx:s}}}),t.$on("click",s[16]),{c(){e=S("input"),l=L(),b(t.$$.fragment),F(e,"type","text"),F(e,"class","govuk-input govuk-input--width-10"),F(e,"id","filterInterventionText")},m(f,i){d(f,e,i),Qe(e,s[1]),d(f,l,i),w(t,f,i),n=!0,r||(o=rt(e,"input",s[15]),r=!0)},p(f,i){i[0]&2&&e.value!==f[1]&&Qe(e,f[1]);const a={};i[1]&1&&(a.$$scope={dirty:i,ctx:f}),t.$set(a)},i(f){n||($(t.$$.fragment,f),n=!0)},o(f){g(t.$$.fragment,f),n=!1},d(f){f&&(h(e),h(l)),v(t,f),r=!1,o()}}}function o$(s){let e=s[28]+"",l,t;return{c(){l=y(e),t=L()},m(n,r){d(n,l,r),d(n,t,r)},p:Q,d(n){n&&(h(l),h(t))}}}function zl(s){let e,l,t;function n(o){s[19](o,s[28])}let r={$$slots:{default:[o$]},$$scope:{ctx:s}};return s[5][s[28]]!==void 0&&(r.checked=s[5][s[28]]),e=new Je({props:r}),H.push(()=>E(e,"checked",n)),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,f){s=o;const i={};f[1]&1&&(i.$$scope={dirty:f,ctx:s}),!l&&f[0]&32&&(l=!0,i.checked=s[5][s[28]],B(()=>l=!1)),e.$set(i)},i(o){t||($(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function i$(s){let e,l,t=ve(Object.keys(Jt)),n=[];for(let o=0;o<t.length;o+=1)n[o]=zl(ql(s,t,o));const r=o=>g(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=we()},m(o,f){for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(o,f);d(o,e,f),l=!0},p(o,f){if(f[0]&32){t=ve(Object.keys(Jt));let i;for(i=0;i<t.length;i+=1){const a=ql(o,t,i);n[i]?(n[i].p(a,f),$(n[i],1)):(n[i]=zl(a),n[i].c(),$(n[i],1),n[i].m(e.parentNode,e))}for(_e(),i=t.length;i<n.length;i+=1)r(i);ge()}},i(o){if(!l){for(let f=0;f<t.length;f+=1)$(n[f]);l=!0}},o(o){n=n.filter(Boolean);for(let f=0;f<n.length;f+=1)g(n[f]);l=!1},d(o){o&&h(e),Ke(n,o)}}}function a$(s){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[i$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n[0]&32|n[1]&1&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function f$(s){let e;return{c(){e=y("Done")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function u$(s){let e,l,t,n,r=s[9].interventions.toLocaleString()+"",o,f,i,a,u=s[8].size.toLocaleString()+"",c,m,_,k,T,C=Hl(s[9].totalLength).toFixed(1)+"",N,D,j,M,O,I,R,P,q,Z;M=new Xe({props:{$$slots:{default:[xp]},$$scope:{ctx:s}}}),M.$on("click",s[12]);const ae=[t$,e$],A=[];function ee(V,W){return V[2]=="ATF"?0:1}return I=ee(s),R=A[I]=ae[I](s),q=new Er({props:{$$slots:{default:[f$]},$$scope:{ctx:s}}}),q.$on("click",s[25]),{c(){e=S("p"),e.textContent="Showing:",l=L(),t=S("ul"),n=S("li"),o=y(r),f=y(" interventions"),i=L(),a=S("li"),c=y(u),m=y(" schemes"),_=L(),k=S("li"),T=y("total route length of "),N=y(C),D=y(" miles"),j=L(),b(M.$$.fragment),O=L(),R.c(),P=L(),b(q.$$.fragment)},m(V,W){d(V,e,W),d(V,l,W),d(V,t,W),p(t,n),p(n,o),p(n,f),p(t,i),p(t,a),p(a,c),p(a,m),p(t,_),p(t,k),p(k,T),p(k,N),p(k,D),d(V,j,W),w(M,V,W),d(V,O,W),A[I].m(V,W),d(V,P,W),w(q,V,W),Z=!0},p(V,W){(!Z||W[0]&512)&&r!==(r=V[9].interventions.toLocaleString()+"")&&G(o,r),(!Z||W[0]&256)&&u!==(u=V[8].size.toLocaleString()+"")&&G(c,u),(!Z||W[0]&512)&&C!==(C=Hl(V[9].totalLength).toFixed(1)+"")&&G(N,C);const Ce={};W[1]&1&&(Ce.$$scope={dirty:W,ctx:V}),M.$set(Ce);let Re=I;I=ee(V),I===Re?A[I].p(V,W):(_e(),g(A[Re],1,1,()=>{A[Re]=null}),ge(),R=A[I],R?R.p(V,W):(R=A[I]=ae[I](V),R.c()),$(R,1),R.m(P.parentNode,P));const qe={};W[1]&1&&(qe.$$scope={dirty:W,ctx:V}),q.$set(qe)},i(V){Z||($(M.$$.fragment,V),$(R),$(q.$$.fragment,V),Z=!0)},o(V){g(M.$$.fragment,V),g(R),g(q.$$.fragment,V),Z=!1},d(V){V&&(h(e),h(l),h(t),h(j),h(O),h(P)),v(M,V),A[I].d(V),v(q,V)}}}function c$(s){let e,l,t,n,r;e=new Xe({props:{$$slots:{default:[Xp]},$$scope:{ctx:s}}}),e.$on("click",s[14]);function o(i){s[26](i)}let f={title:`Filter ${s[2]} schemes`,$$slots:{default:[u$]},$$scope:{ctx:s}};return s[7]!==void 0&&(f.open=s[7]),t=new vr({props:f}),H.push(()=>E(t,"open",o)),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(i,a){w(e,i,a),d(i,l,a),w(t,i,a),r=!0},p(i,a){const u={};a[1]&1&&(u.$$scope={dirty:a,ctx:i}),e.$set(u);const c={};a[0]&4&&(c.title=`Filter ${i[2]} schemes`),a[0]&2047|a[1]&1&&(c.$$scope={dirty:a,ctx:i}),!n&&a[0]&128&&(n=!0,c.open=i[7],B(()=>n=!1)),t.$set(c)},i(i){r||($(e.$$.fragment,i),$(t.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(t.$$.fragment,i),r=!1},d(i){i&&h(l),v(e,i),v(t,i)}}}function p$(s){var t;let e=new Set;for(let n of s.values())(t=n.browse)!=null&&t.authority_or_region&&e.add(n.browse.authority_or_region);let l=Array.from(e.entries());return l.sort(),l}function Hl(s){return s*621371e-9}function on(s){let e=[];for(let l of s.values())e.push([l.scheme_reference,l.scheme_reference]),l.scheme_name&&e.push([l.scheme_name,l.scheme_name]);return e}function $$(s,e,l){let t,{source:n}=e,{schemes:r}=e,{schemesGj:o}=e,{filterSchemeText:f}=e,{filterInterventionText:i}=e,a=!1,u=new Set,c={interventions:0,totalLength:0},m=Object.keys(dn).map(W=>[W,W]),_="",k=Object.fromEntries(Object.keys(Jt).map(W=>[W,!0])),T="";function C(W,Ce,Re,qe,_t){let Le=W.toLowerCase(),tt=Ce.toLowerCase(),Et=me=>{var ze,ut,Bt,Ut;if(Le&&!((ze=me.properties.name)!=null&&ze.toLowerCase().includes(Le))&&!((ut=me.properties.description)!=null&&ut.toLowerCase().includes(Le)))return!1;let U=r.get(me.properties.scheme_reference);return!(Re&&((Bt=U.browse)==null?void 0:Bt.authority_or_region)!=Re||n=="ATF"&&!qe[U.browse.funding_programme]||_t&&((Ut=U.browse)==null?void 0:Ut.current_milestone)!=_t||tt&&!U.scheme_reference.toLowerCase().includes(tt)&&!(U.scheme_name??"").toLowerCase().includes(tt))};l(8,u=new Set(o.features.filter(Et).map(me=>me.properties.scheme_reference))),l(9,c={interventions:0,totalLength:0});let ft=me=>{var U,ze;return!(!u.has(me.properties.scheme_reference)||Le&&!((U=me.properties.name)!=null&&U.toLowerCase().includes(Le))&&!((ze=me.properties.description)!=null&&ze.toLowerCase().includes(Le)))};for(let me of o.features)ft(me)?(delete me.properties.hide_while_editing,l(9,c.interventions++,c),me.geometry.type=="LineString"&&me.properties.length_meters&&l(9,c.totalLength+=me.properties.length_meters,c)):me.properties.hide_while_editing=!0;l(13,o),l(9,c)}function N(){l(4,_=""),l(5,k=Object.fromEntries(Object.keys(Jt).map(W=>[W,!0]))),l(6,T=""),l(1,i=""),l(0,f="")}const D=()=>l(7,a=!0);function j(){i=this.value,l(1,i)}const M=()=>l(1,i="");function O(W){f=W,l(0,f)}function I(W){_=W,l(4,_)}function R(W,Ce){s.$$.not_equal(k[Ce],W)&&(k[Ce]=W,l(5,k))}function P(W){T=W,l(6,T)}function q(){i=this.value,l(1,i)}const Z=()=>l(1,i="");function ae(W){f=W,l(0,f)}function A(W){_=W,l(4,_)}const ee=()=>l(7,a=!1);function V(W){a=W,l(7,a)}return s.$$set=W=>{"source"in W&&l(2,n=W.source),"schemes"in W&&l(3,r=W.schemes),"schemesGj"in W&&l(13,o=W.schemesGj),"filterSchemeText"in W&&l(0,f=W.filterSchemeText),"filterInterventionText"in W&&l(1,i=W.filterInterventionText)},s.$$.update=()=>{s.$$.dirty[0]&8&&l(10,t=p$(r)),s.$$.dirty[0]&115&&C(i,f,_,k,T)},[f,i,n,r,_,k,T,a,u,c,t,m,N,o,D,j,M,O,I,R,P,q,Z,ae,A,ee,V]}class Or extends K{constructor(e){super(),X(this,e,$$,c$,J,{source:2,schemes:3,schemesGj:13,filterSchemeText:0,filterInterventionText:1},null,[-1,-1])}}function El(s){let e,l,t,n=s[0].status+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Status",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].status+"")&&G(r,n)},d(o){o&&h(e)}}}function Bl(s){let e,l,t,n=s[0].timescale+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Timescale",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].timescale+"")&&G(r,n)},d(o){o&&h(e)}}}function Ul(s){let e,l,t,n=s[0].timescale_year+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Estimated completion year",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].timescale_year+"")&&G(r,n)},d(o){o&&h(e)}}}function Wl(s){let e,l,t,n=s[0].year_published+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently published",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].year_published+"")&&G(r,n)},d(o){o&&h(e)}}}function Yl(s){let e,l,t,n=s[0].year_consulted+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme most recently consulted on",t=y(`
    : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&1&&n!==(n=o[0].year_consulted+"")&&G(r,n)},d(o){o&&h(e)}}}function m$(s){let e,l,t,n,r,o=s[0].status&&El(s),f=s[0].timescale&&Bl(s),i=s[0].timescale_year&&Ul(s),a=s[0].year_published&&Wl(s),u=s[0].year_consulted&&Yl(s);return{c(){o&&o.c(),e=L(),f&&f.c(),l=L(),i&&i.c(),t=L(),a&&a.c(),n=L(),u&&u.c(),r=we()},m(c,m){o&&o.m(c,m),d(c,e,m),f&&f.m(c,m),d(c,l,m),i&&i.m(c,m),d(c,t,m),a&&a.m(c,m),d(c,n,m),u&&u.m(c,m),d(c,r,m)},p(c,[m]){c[0].status?o?o.p(c,m):(o=El(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[0].timescale?f?f.p(c,m):(f=Bl(c),f.c(),f.m(l.parentNode,l)):f&&(f.d(1),f=null),c[0].timescale_year?i?i.p(c,m):(i=Ul(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,m):(a=Wl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[0].year_consulted?u?u.p(c,m):(u=Yl(c),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i:Q,o:Q,d(c){c&&(h(e),h(l),h(t),h(n),h(r)),o&&o.d(c),f&&f.d(c),i&&i.d(c),a&&a.d(c),u&&u.d(c)}}}function _$(s,e,l){let{props:t}=e;return s.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class Nr extends K{constructor(e){super(),X(this,e,_$,m$,J,{props:0})}}function Jl(s){let e,l,t,n=s[0].budget.toLocaleString()+"",r,o;return{c(){e=S("p"),l=S("b"),l.textContent="Cost",t=y(`
    : `),r=y(n),o=y(`
    GBP`)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r),p(e,o)},p(f,i){i&1&&n!==(n=f[0].budget.toLocaleString()+"")&&G(r,n)},d(f){f&&h(e)}}}function Vl(s){let e;return{c(){e=S("p"),e.textContent="Development is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Ql(s){let e;return{c(){e=S("p"),e.textContent="Construction is fully funded"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function Zl(s){let e,l,t,n;return{c(){e=S("p"),l=S("b"),l.textContent="Funding sources",t=y(`
    : `),n=y(s[1])},m(r,o){d(r,e,o),p(e,l),p(e,t),p(e,n)},p(r,o){o&2&&G(n,r[1])},d(r){r&&h(e)}}}function g$(s){let e,l,t,n,r=s[0].budget&&Jl(s),o=s[0].development_funded&&Vl(),f=s[0].construction_funded&&Ql(),i=s[1]&&Zl(s);return{c(){r&&r.c(),e=L(),o&&o.c(),l=L(),f&&f.c(),t=L(),i&&i.c(),n=we()},m(a,u){r&&r.m(a,u),d(a,e,u),o&&o.m(a,u),d(a,l,u),f&&f.m(a,u),d(a,t,u),i&&i.m(a,u),d(a,n,u)},p(a,[u]){a[0].budget?r?r.p(a,u):(r=Jl(a),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),a[0].development_funded?o||(o=Vl(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),a[0].construction_funded?f||(f=Ql(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null),a[1]?i?i.p(a,u):(i=Zl(a),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null)},i:Q,o:Q,d(a){a&&(h(e),h(l),h(t),h(n)),r&&r.d(a),o&&o.d(a),f&&f.d(a),i&&i.d(a)}}}function d$(s){if(!s.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])s.funding_sources[l]&&e.push(l.toUpperCase());return s.funding_sources.other&&e.push(s.funding_sources.other),e.join(", ")}function h$(s,e,l){let t,{props:n}=e;return s.$$set=r=>{"props"in r&&l(0,n=r.props)},s.$$.update=()=>{s.$$.dirty&1&&l(1,t=d$(n))},[n,t]}class jr extends K{constructor(e){super(),X(this,e,h$,g$,J,{props:0})}}function an(s){const e=s.slice(),l=e[5].pipeline;return e[12]=l,e}function fn(s){const e=s.slice(),l=e[1].pipeline;return e[12]=l,e}function Kl(s){let e,l,t,n=En(s[1].length_meters)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Length",t=y(`
        : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&2&&n!==(n=En(o[1].length_meters)+"")&&G(r,n)},d(o){o&&h(e)}}}function Xl(s){let e,l=$t(s[1].description,s[3])+"";return{c(){e=S("p")},m(t,n){d(t,e,n),e.innerHTML=l},p(t,n){n&10&&l!==(l=$t(t[1].description,t[3])+"")&&(e.innerHTML=l)},d(t){t&&h(e)}}}function xl(s){let e,l,t,n,r,o,f,i=s[12].atf4_type&&er(s),a=s[12].accuracy&&tr(s),u=s[12].is_alternative&&nr();return n=new jr({props:{props:s[12]}}),o=new Nr({props:{props:s[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(o.$$.fragment)},m(c,m){i&&i.m(c,m),d(c,e,m),a&&a.m(c,m),d(c,l,m),u&&u.m(c,m),d(c,t,m),w(n,c,m),d(c,r,m),w(o,c,m),f=!0},p(c,m){c[12].atf4_type?i?i.p(c,m):(i=er(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].accuracy?a?a.p(c,m):(a=tr(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].is_alternative?u||(u=nr(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};m&2&&(_.props=c[12]),n.$set(_);const k={};m&2&&(k.props=c[12]),o.$set(k)},i(c){f||($(n.$$.fragment,c),$(o.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(o,c)}}}function er(s){let e,l,t,n=s[12].atf4_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 type",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&2&&n!==(n=o[12].atf4_type+"")&&G(r,n)},d(o){o&&h(e)}}}function tr(s){let e,l,t,n=s[12].accuracy+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Accuracy",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&2&&n!==(n=o[12].accuracy+"")&&G(r,n)},d(o){o&&h(e)}}}function nr(s){let e;return{c(){e=S("p"),e.textContent="Represents an alternative route"},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function lr(s){var o;let e,l,t,n=((o=s[5].browse)==null?void 0:o.capital_scheme_id)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Capital scheme ID",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.capital_scheme_id)+"")&&G(r,n)},d(f){f&&h(e)}}}function rr(s){var o;let e,l,t,n=((o=s[5].browse)==null?void 0:o.funding_programme)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Funding programme",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.funding_programme)+"")&&G(r,n)},d(f){f&&h(e)}}}function sr(s){var o;let e,l,t,n=((o=s[5].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Current milestone",t=y(`
        : `),r=y(n)},m(f,i){d(f,e,i),p(e,l),p(e,t),p(e,r)},p(f,i){var a;i&32&&n!==(n=((a=f[5].browse)==null?void 0:a.current_milestone)+"")&&G(r,n)},d(f){f&&h(e)}}}function or(s){let e,l,t,n,r,o,f,i=s[12].scheme_type&&ir(s),a=s[12].atf4_lead_type&&ar(s),u=s[12].scheme_description&&fr(s);return n=new jr({props:{props:s[12]}}),o=new Nr({props:{props:s[12]}}),{c(){i&&i.c(),e=L(),a&&a.c(),l=L(),u&&u.c(),t=L(),b(n.$$.fragment),r=L(),b(o.$$.fragment)},m(c,m){i&&i.m(c,m),d(c,e,m),a&&a.m(c,m),d(c,l,m),u&&u.m(c,m),d(c,t,m),w(n,c,m),d(c,r,m),w(o,c,m),f=!0},p(c,m){c[12].scheme_type?i?i.p(c,m):(i=ir(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[12].atf4_lead_type?a?a.p(c,m):(a=ar(c),a.c(),a.m(l.parentNode,l)):a&&(a.d(1),a=null),c[12].scheme_description?u?u.p(c,m):(u=fr(c),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null);const _={};m&32&&(_.props=c[12]),n.$set(_);const k={};m&32&&(k.props=c[12]),o.$set(k)},i(c){f||($(n.$$.fragment,c),$(o.$$.fragment,c),f=!0)},o(c){g(n.$$.fragment,c),g(o.$$.fragment,c),f=!1},d(c){c&&(h(e),h(l),h(t),h(r)),i&&i.d(c),a&&a.d(c),u&&u.d(c),v(n,c),v(o,c)}}}function ir(s){let e,l,t,n=s[12].scheme_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Scheme type",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&32&&n!==(n=o[12].scheme_type+"")&&G(r,n)},d(o){o&&h(e)}}}function ar(s){let e,l,t,n=s[12].atf4_lead_type+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="ATF4 lead type",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&32&&n!==(n=o[12].atf4_lead_type+"")&&G(r,n)},d(o){o&&h(e)}}}function fr(s){let e,l,t,n=s[12].scheme_description+"",r;return{c(){e=S("p"),l=S("b"),l.textContent="Descripton",t=y(`
          : `),r=y(n)},m(o,f){d(o,e,f),p(e,l),p(e,t),p(e,r)},p(o,f){f&32&&n!==(n=o[12].scheme_description+"")&&G(r,n)},d(o){o&&h(e)}}}function b$(s){let e;return{c(){e=y("Zoom to show entire scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function w$(s){let e;return{c(){e=y("Edit a copy of this scheme")},m(l,t){d(l,e,t)},d(l){l&&h(e)}}}function ur(s){var In,On,Nn,jn;let e,l,t,n,r,o,f,i=$t(s[1].name,s[3])+"",a,u=s[1].intervention_type+"",c,m,_,k,T,C,N,D,j,M=s[0].toUpperCase()+"",O,I,R,P,q,Z,ae,A=$t(s[5].scheme_name??"",s[2])+"",ee,V,W,Ce,Re,qe=$t(s[1].scheme_reference,s[2])+"",_t,Le,tt,Et,ft=((In=s[5].browse)==null?void 0:In.authority_or_region)+"",me,U,ze,ut,Bt,Ut,ct,Mn,pt,Ve,Me=s[1].length_meters&&Kl(s),Ie=s[1].description&&Xl(s),ke=s[1].pipeline&&xl(fn(s)),Oe=((On=s[5].browse)==null?void 0:On.capital_scheme_id)&&lr(s),Ne=((Nn=s[5].browse)==null?void 0:Nn.funding_programme)&&rr(s),je=((jn=s[5].browse)==null?void 0:jn.current_milestone)&&sr(s),ye=s[5].pipeline&&or(an(s));return ct=new Xe({props:{$$slots:{default:[b$]},$$scope:{ctx:s}}}),ct.$on("click",s[6]),pt=new Xe({props:{$$slots:{default:[w$]},$$scope:{ctx:s}}}),pt.$on("click",s[7]),{c(){e=S("div"),l=S("h2"),l.textContent="Intervention",t=L(),n=S("p"),r=S("b"),r.textContent="Name",o=y(`
      : `),f=new Ft(!1),a=y(" ("),c=y(u),m=y(")"),_=L(),Me&&Me.c(),k=L(),Ie&&Ie.c(),T=L(),ke&&ke.c(),C=L(),N=S("hr"),D=L(),j=S("h2"),O=y(M),I=y(" Scheme"),R=L(),P=S("p"),q=S("b"),q.textContent="Scheme name",Z=y(`
      : `),ae=new Ft(!1),ee=L(),V=S("p"),W=S("b"),W.textContent="Scheme reference",Ce=y(`
      : `),Re=new Ft(!1),_t=L(),Le=S("p"),tt=S("b"),tt.textContent="Authority or region",Et=y(`
      : `),me=y(ft),U=L(),Oe&&Oe.c(),ze=L(),Ne&&Ne.c(),ut=L(),je&&je.c(),Bt=L(),ye&&ye.c(),Ut=L(),b(ct.$$.fragment),Mn=L(),b(pt.$$.fragment),f.a=a,ae.a=null,Re.a=null,ie(e,"max-width","30vw"),ie(e,"max-height","60vh"),ie(e,"overflow","auto")},m(oe,be){d(oe,e,be),p(e,l),p(e,t),p(e,n),p(n,r),p(n,o),f.m(i,n),p(n,a),p(n,c),p(n,m),p(e,_),Me&&Me.m(e,null),p(e,k),Ie&&Ie.m(e,null),p(e,T),ke&&ke.m(e,null),p(e,C),p(e,N),p(e,D),p(e,j),p(j,O),p(j,I),p(e,R),p(e,P),p(P,q),p(P,Z),ae.m(A,P),p(e,ee),p(e,V),p(V,W),p(V,Ce),Re.m(qe,V),p(e,_t),p(e,Le),p(Le,tt),p(Le,Et),p(Le,me),p(e,U),Oe&&Oe.m(e,null),p(e,ze),Ne&&Ne.m(e,null),p(e,ut),je&&je.m(e,null),p(e,Bt),ye&&ye.m(e,null),p(e,Ut),w(ct,e,null),p(e,Mn),w(pt,e,null),s[10](e),Ve=!0},p(oe,be){var Dn,An,Fn,Gn;(!Ve||be&10)&&i!==(i=$t(oe[1].name,oe[3])+"")&&f.p(i),(!Ve||be&2)&&u!==(u=oe[1].intervention_type+"")&&G(c,u),oe[1].length_meters?Me?Me.p(oe,be):(Me=Kl(oe),Me.c(),Me.m(e,k)):Me&&(Me.d(1),Me=null),oe[1].description?Ie?Ie.p(oe,be):(Ie=Xl(oe),Ie.c(),Ie.m(e,T)):Ie&&(Ie.d(1),Ie=null),oe[1].pipeline?ke?(ke.p(fn(oe),be),be&2&&$(ke,1)):(ke=xl(fn(oe)),ke.c(),$(ke,1),ke.m(e,C)):ke&&(_e(),g(ke,1,1,()=>{ke=null}),ge()),(!Ve||be&1)&&M!==(M=oe[0].toUpperCase()+"")&&G(O,M),(!Ve||be&36)&&A!==(A=$t(oe[5].scheme_name??"",oe[2])+"")&&ae.p(A),(!Ve||be&6)&&qe!==(qe=$t(oe[1].scheme_reference,oe[2])+"")&&Re.p(qe),(!Ve||be&32)&&ft!==(ft=((Dn=oe[5].browse)==null?void 0:Dn.authority_or_region)+"")&&G(me,ft),(An=oe[5].browse)!=null&&An.capital_scheme_id?Oe?Oe.p(oe,be):(Oe=lr(oe),Oe.c(),Oe.m(e,ze)):Oe&&(Oe.d(1),Oe=null),(Fn=oe[5].browse)!=null&&Fn.funding_programme?Ne?Ne.p(oe,be):(Ne=rr(oe),Ne.c(),Ne.m(e,ut)):Ne&&(Ne.d(1),Ne=null),(Gn=oe[5].browse)!=null&&Gn.current_milestone?je?je.p(oe,be):(je=sr(oe),je.c(),je.m(e,Bt)):je&&(je.d(1),je=null),oe[5].pipeline?ye?(ye.p(an(oe),be),be&32&&$(ye,1)):(ye=or(an(oe)),ye.c(),$(ye,1),ye.m(e,Ut)):ye&&(_e(),g(ye,1,1,()=>{ye=null}),ge());const Pn={};be&8192&&(Pn.$$scope={dirty:be,ctx:oe}),ct.$set(Pn);const Rn={};be&8192&&(Rn.$$scope={dirty:be,ctx:oe}),pt.$set(Rn)},i(oe){Ve||($(ke),$(ye),$(ct.$$.fragment,oe),$(pt.$$.fragment,oe),Ve=!0)},o(oe){g(ke),g(ye),g(ct.$$.fragment,oe),g(pt.$$.fragment,oe),Ve=!1},d(oe){oe&&h(e),Me&&Me.d(),Ie&&Ie.d(),ke&&ke.d(),Oe&&Oe.d(),Ne&&Ne.d(),je&&je.d(),ye&&ye.d(),v(ct),v(pt),s[10](null)}}}function v$(s){let e=s[1],l,t,n=ur(s);return{c(){n.c(),l=we()},m(r,o){n.m(r,o),d(r,l,o),t=!0},p(r,[o]){o&2&&J(e,e=r[1])?(_e(),g(n,1,1,Q),ge(),n=ur(r),n.c(),$(n,1),n.m(l.parentNode,l)):n.p(r,o)},i(r){t||($(n),t=!0)},o(r){g(n),t=!1},d(r){r&&h(l),n.d(r)}}}function $t(s,e){return e?s.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):s}function k$(s,e,l){let t,n;Y(s,Sn,T=>l(11,n=T));let{source:r}=e,{props:o}=e,{schemes:f}=e,{schemesGj:i}=e,{filterSchemeText:a}=e,{filterInterventionText:u}=e,c;Br(()=>{c&&l(4,c.scrollTop=0,c)});function m(){let T={type:"FeatureCollection",features:i.features.filter(C=>C.properties.scheme_reference==t.scheme_reference)};n==null||n.fitBounds(ts(T),{padding:20,animate:!1})}function _(){var D,j;let T={type:"FeatureCollection",features:i.features.filter(M=>M.properties.scheme_reference==t.scheme_reference),schemes:{}};T.schemes[t.scheme_reference]=t;let C=((D=t.browse)==null?void 0:D.authority_or_region)||"unknown authority",N=t.pipeline?"pipeline":"v1";N=="pipeline"&&(C+="_pipeline"),Ur(C,JSON.stringify(T)),window.open(`scheme.html?authority=${(j=t.browse)==null?void 0:j.authority_or_region}&schema=${N}`,"_blank")}function k(T){H[T?"unshift":"push"](()=>{c=T,l(4,c)})}return s.$$set=T=>{"source"in T&&l(0,r=T.source),"props"in T&&l(1,o=T.props),"schemes"in T&&l(8,f=T.schemes),"schemesGj"in T&&l(9,i=T.schemesGj),"filterSchemeText"in T&&l(2,a=T.filterSchemeText),"filterInterventionText"in T&&l(3,u=T.filterInterventionText)},s.$$.update=()=>{s.$$.dirty&258&&l(5,t=f.get(o.scheme_reference))},[r,o,a,u,c,t,m,_,f,i,k]}class Ln extends K{constructor(e){super(),X(this,e,k$,v$,J,{source:0,props:1,schemes:8,schemesGj:9,filterSchemeText:2,filterInterventionText:3})}}function y$(s){let e,l=s[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&h(e)}}}function S$(s){let e,l;return e=new Ln({props:{source:s[0],props:s[10],schemesGj:s[3],schemes:s[2],filterSchemeText:s[4],filterInterventionText:s[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function T$(s){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[y$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[S$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&3072&&(f.$$scope={dirty:o,ctx:r}),e.$set(f);const i={};o&3133&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||($(e.$$.fragment,r),$(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function C$(s){let e,l=s[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&h(e)}}}function L$(s){let e,l;return e=new Ln({props:{source:s[0],props:s[10],schemesGj:s[3],schemes:s[2],filterSchemeText:s[4],filterInterventionText:s[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function M$(s){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[C$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[L$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&3072&&(f.$$scope={dirty:o,ctx:r}),e.$set(f);const i={};o&3133&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||($(e.$$.fragment,r),$(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function I$(s){let e,l=s[10].name+"",t;return{c(){e=S("p"),t=y(l)},m(n,r){d(n,e,r),p(e,t)},p(n,r){r&1024&&l!==(l=n[10].name+"")&&G(t,l)},d(n){n&&h(e)}}}function O$(s){let e,l;return e=new Ln({props:{source:s[0],props:s[10],schemesGj:s[3],schemes:s[2],filterSchemeText:s[4],filterInterventionText:s[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&1&&(r.source=t[0]),n&1024&&(r.props=t[10]),n&8&&(r.schemesGj=t[3]),n&4&&(r.schemes=t[2]),n&16&&(r.filterSchemeText=t[4]),n&32&&(r.filterInterventionText=t[5]),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function N$(s){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[I$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[O$,({props:r})=>({10:r}),({props:r})=>r?1024:0]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},p(r,o){const f={};o&3072&&(f.$$scope={dirty:o,ctx:r}),e.$set(f);const i={};o&3133&&(i.$$scope={dirty:o,ctx:r}),t.$set(i)},i(r){n||($(e.$$.fragment,r),$(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function j$(s){let e,l,t,n,r,o,f,i,a,u;const c=[z(`${s[0]}-interventions-points`),{filter:["all",Bn,s[8],s[9]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":s[6],"circle-radius":Un,"circle-opacity":te(1,.5)}},{layout:{visibility:s[1]?"visible":"none"}},{hoverCursor:"pointer"}];let m={$$slots:{default:[T$]},$$scope:{ctx:s}};for(let O=0;O<c.length;O+=1)m=ne(m,c[O]);e=new qt({props:m});const _=[z(`${s[0]}-interventions-lines`),{filter:["all",Wn,s[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":s[6],"line-width":Vt,"line-opacity":te(1,.5)}},{layout:{visibility:s[1]?"visible":"none"}},{hoverCursor:"pointer"}];let k={$$slots:{default:[M$]},$$scope:{ctx:s}};for(let O=0;O<_.length;O+=1)k=ne(k,_[O]);t=new de({props:k});const T=[z(`${s[0]}-interventions-lines-endpoints`),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*Vt,"circle-opacity":0,"circle-stroke-color":Ze.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:s[1]?"visible":"none"}}];let C={};for(let O=0;O<T.length;O+=1)C=ne(C,T[O]);r=new qt({props:C});const N=[z(`${s[0]}-interventions-polygons`),{filter:["all",en,s[8]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":s[6],"fill-opacity":te(.2,.5)}},{layout:{visibility:s[1]?"visible":"none"}},{hoverCursor:"pointer"}];let D={$$slots:{default:[N$]},$$scope:{ctx:s}};for(let O=0;O<N.length;O+=1)D=ne(D,N[O]);f=new Ae({props:D});const j=[z(`${s[0]}-interventions-polygons-outlines`),{filter:["all",en,s[8]]},{paint:{"line-color":s[6],"line-opacity":.5,"line-width":.7*Vt}},{layout:{visibility:s[1]?"visible":"none"}}];let M={};for(let O=0;O<j.length;O+=1)M=ne(M,j[O]);return a=new de({props:M}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(O,I){w(e,O,I),d(O,l,I),w(t,O,I),d(O,n,I),w(r,O,I),d(O,o,I),w(f,O,I),d(O,i,I),w(a,O,I),u=!0},p(O,I){const R=I&835?re(c,[I&1&&se(z(`${O[0]}-interventions-points`)),I&768&&{filter:["all",Bn,O[8],O[9]]},c[2],c[3],I&64&&{paint:{"circle-color":O[6],"circle-radius":Un,"circle-opacity":te(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},c[6]]):{};I&2109&&(R.$$scope={dirty:I,ctx:O}),e.$set(R);const P=I&323?re(_,[I&1&&se(z(`${O[0]}-interventions-lines`)),I&256&&{filter:["all",Wn,O[8]]},_[2],_[3],I&64&&{paint:{"line-color":O[6],"line-width":Vt,"line-opacity":te(1,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},_[6]]):{};I&2109&&(P.$$scope={dirty:I,ctx:O}),t.$set(P);const q=I&3?re(T,[I&1&&se(z(`${O[0]}-interventions-lines-endpoints`)),T[1],T[2],I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};r.$set(q);const Z=I&323?re(N,[I&1&&se(z(`${O[0]}-interventions-polygons`)),I&256&&{filter:["all",en,O[8]]},N[2],N[3],I&64&&{paint:{"fill-color":O[6],"fill-opacity":te(.2,.5)}},I&2&&{layout:{visibility:O[1]?"visible":"none"}},N[6]]):{};I&2109&&(Z.$$scope={dirty:I,ctx:O}),f.$set(Z);const ae=I&323?re(j,[I&1&&se(z(`${O[0]}-interventions-polygons-outlines`)),I&256&&{filter:["all",en,O[8]]},I&64&&{paint:{"line-color":O[6],"line-opacity":.5,"line-width":.7*Vt}},I&2&&{layout:{visibility:O[1]?"visible":"none"}}]):{};a.$set(ae)},i(O){u||($(e.$$.fragment,O),$(t.$$.fragment,O),$(r.$$.fragment,O),$(f.$$.fragment,O),$(a.$$.fragment,O),u=!0)},o(O){g(e.$$.fragment,O),g(t.$$.fragment,O),g(r.$$.fragment,O),g(f.$$.fragment,O),g(a.$$.fragment,O),u=!1},d(O){O&&(h(l),h(n),h(o),h(i)),v(e,O),v(t,O),v(r,O),v(f,O),v(a,O)}}}function P$(s){let e,l;return e=new zt({props:{data:s[7],$$slots:{default:[j$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,[n]){const r={};n&128&&(r.data=t[7]),n&2175&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function R$(s,e,l){let t,{source:n}=e,{show:r}=e,{schemes:o}=e,{schemesGj:f}=e,{filterSchemeText:i}=e,{filterInterventionText:a}=e,{color:u}=e;const c=["!=",["get","hide_while_editing"],!0],m=["!=",["get","endpoint"],!0];return s.$$set=_=>{"source"in _&&l(0,n=_.source),"show"in _&&l(1,r=_.show),"schemes"in _&&l(2,o=_.schemes),"schemesGj"in _&&l(3,f=_.schemesGj),"filterSchemeText"in _&&l(4,i=_.filterSchemeText),"filterInterventionText"in _&&l(5,a=_.filterInterventionText),"color"in _&&l(6,u=_.color)},s.$$.update=()=>{s.$$.dirty&8&&l(7,t=ns(f))},[n,r,o,f,i,a,u,t,c,m]}class hn extends K{constructor(e){super(),X(this,e,R$,P$,J,{source:0,show:1,schemes:2,schemesGj:3,filterSchemeText:4,filterInterventionText:5,color:6})}}function D$(s){return xe(["get","intervention_type"],{area:Ze.area,route:Ze.route,crossing:Ze.crossing,other:Ze.other},"white")}function A$(s){return[["Areas",Ze.area],["Routes",Ze.route],["Crossings",Ze.crossing],["Other",Ze.other]]}function cr(s,e,l){const t=s.slice();return t[38]=e[l],t}function pr(s,e,l){const t=s.slice();return t[38]=e[l],t}function F$(s){let e,l;return e=new Qp({props:{loadFile:s[23]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p:Q,i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function $r(s){let e,l,t;function n(o){s[29](o)}let r={name:Pr,title:W$,$$slots:{controls:[q$],help:[G$]},$$scope:{ctx:s}};return s[9]!==void 0&&(r.show=s[9]),e=new ue({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,f){const i={};f[0]&15425|f[1]&4096&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&512&&(l=!0,i.show=o[9],B(()=>l=!1)),e.$set(i)},i(o){t||($(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function mr(s){let e,l,t=s[38]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,o){d(r,e,o),p(e,l),p(l,n)},p(r,o){o[0]&2048&&t!==(t=r[38]+"")&&G(n,t)},d(r){r&&h(e)}}}function G$(s){let e,l,t,n,r,o,f;t=new Lr({props:{text:"Scheme data caveats"}});let i=ve(s[11].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=mr(pr(s,i,u));return{c(){e=S("span"),l=S("p"),b(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),o=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),w(t,l,null),p(l,n),p(e,r),p(e,o);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(o,null);f=!0},p(u,c){if(c[0]&2048){i=ve(u[11].notes??[]);let m;for(m=0;m<i.length;m+=1){const _=pr(u,i,m);a[m]?a[m].p(_,c):(a[m]=mr(_),a[m].c(),a[m].m(o,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=i.length}},i(u){f||($(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),Ke(a,u)}}}function q$(s){let e,l,t,n,r,o,f,i,a,u,c,m;function _(M){s[24](M)}function k(M){s[25](M)}function T(M){s[26](M)}function C(M){s[27](M)}let N={source:"ATF"};s[11]!==void 0&&(N.schemesGj=s[11]),s[10]!==void 0&&(N.schemes=s[10]),s[12]!==void 0&&(N.filterSchemeText=s[12]),s[13]!==void 0&&(N.filterInterventionText=s[13]),l=new Or({props:N}),H.push(()=>E(l,"schemesGj",_)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",T)),H.push(()=>E(l,"filterInterventionText",C));function D(M){s[28](M)}let j={label:"Colour interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return s[0]!==void 0&&(j.value=s[0]),i=new Gt({props:j}),H.push(()=>E(i,"value",D)),c=new xt({props:{rows:s[6]}}),{c(){e=S("div"),b(l.$$.fragment),f=L(),b(i.$$.fragment),u=L(),b(c.$$.fragment),F(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(M,O){d(M,e,O),w(l,e,null),p(e,f),w(i,e,null),p(e,u),w(c,e,null),m=!0},p(M,O){const I={};!t&&O[0]&2048&&(t=!0,I.schemesGj=M[11],B(()=>t=!1)),!n&&O[0]&1024&&(n=!0,I.schemes=M[10],B(()=>n=!1)),!r&&O[0]&4096&&(r=!0,I.filterSchemeText=M[12],B(()=>r=!1)),!o&&O[0]&8192&&(o=!0,I.filterInterventionText=M[13],B(()=>o=!1)),l.$set(I);const R={};!a&&O[0]&1&&(a=!0,R.value=M[0],B(()=>a=!1)),i.$set(R);const P={};O[0]&64&&(P.rows=M[6]),c.$set(P)},i(M){m||($(l.$$.fragment,M),$(i.$$.fragment,M),$(c.$$.fragment,M),m=!0)},o(M){g(l.$$.fragment,M),g(i.$$.fragment,M),g(c.$$.fragment,M),m=!1},d(M){M&&h(e),v(l),v(i),v(c)}}}function _r(s){let e,l,t;function n(o){s[35](o)}let r={name:Rr,title:Y$,$$slots:{controls:[H$],help:[z$]},$$scope:{ctx:s}};return s[8]!==void 0&&(r.show=s[8]),e=new ue({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,f){const i={};f[0]&245778|f[1]&4096&&(i.$$scope={dirty:f,ctx:o}),!l&&f[0]&256&&(l=!0,i.show=o[8],B(()=>l=!1)),e.$set(i)},i(o){t||($(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function gr(s){let e,l,t=s[38]+"",n;return{c(){e=S("li"),l=S("p"),n=y(t)},m(r,o){d(r,e,o),p(e,l),p(l,n)},p(r,o){o[0]&32768&&t!==(t=r[38]+"")&&G(n,t)},d(r){r&&h(e)}}}function z$(s){let e,l,t,n,r,o,f;t=new Lr({props:{text:"Scheme data caveats"}});let i=ve(s[15].notes??[]),a=[];for(let u=0;u<i.length;u+=1)a[u]=gr(cr(s,i,u));return{c(){e=S("span"),l=S("p"),b(t.$$.fragment),n=y(`Please note there are data
            quality caveats for all scheme data:`),r=L(),o=S("ul");for(let u=0;u<a.length;u+=1)a[u].c();F(e,"slot","help")},m(u,c){d(u,e,c),p(e,l),w(t,l,null),p(l,n),p(e,r),p(e,o);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(o,null);f=!0},p(u,c){if(c[0]&32768){i=ve(u[15].notes??[]);let m;for(m=0;m<i.length;m+=1){const _=cr(u,i,m);a[m]?a[m].p(_,c):(a[m]=gr(_),a[m].c(),a[m].m(o,null))}for(;m<a.length;m+=1)a[m].d(1);a.length=i.length}},i(u){f||($(t.$$.fragment,u),f=!0)},o(u){g(t.$$.fragment,u),f=!1},d(u){u&&h(e),v(t),Ke(a,u)}}}function H$(s){let e,l,t,n,r,o,f,i,a,u,c,m;function _(M){s[30](M)}function k(M){s[31](M)}function T(M){s[32](M)}function C(M){s[33](M)}let N={source:"LCWIP"};s[15]!==void 0&&(N.schemesGj=s[15]),s[14]!==void 0&&(N.schemes=s[14]),s[16]!==void 0&&(N.filterSchemeText=s[16]),s[17]!==void 0&&(N.filterInterventionText=s[17]),l=new Or({props:N}),H.push(()=>E(l,"schemesGj",_)),H.push(()=>E(l,"schemes",k)),H.push(()=>E(l,"filterSchemeText",T)),H.push(()=>E(l,"filterInterventionText",C));function D(M){s[34](M)}let j={label:"Colour interventions",choices:[["interventionType","By intervention type"]]};return s[1]!==void 0&&(j.value=s[1]),i=new Gt({props:j}),H.push(()=>E(i,"value",D)),c=new xt({props:{rows:s[4]}}),{c(){e=S("div"),b(l.$$.fragment),f=L(),b(i.$$.fragment),u=L(),b(c.$$.fragment),F(e,"slot","controls"),ie(e,"border","1px solid black"),ie(e,"padding","8px")},m(M,O){d(M,e,O),w(l,e,null),p(e,f),w(i,e,null),p(e,u),w(c,e,null),m=!0},p(M,O){const I={};!t&&O[0]&32768&&(t=!0,I.schemesGj=M[15],B(()=>t=!1)),!n&&O[0]&16384&&(n=!0,I.schemes=M[14],B(()=>n=!1)),!r&&O[0]&65536&&(r=!0,I.filterSchemeText=M[16],B(()=>r=!1)),!o&&O[0]&131072&&(o=!0,I.filterInterventionText=M[17],B(()=>o=!1)),l.$set(I);const R={};!a&&O[0]&2&&(a=!0,R.value=M[1],B(()=>a=!1)),i.$set(R);const P={};O[0]&16&&(P.rows=M[4]),c.$set(P)},i(M){m||($(l.$$.fragment,M),$(i.$$.fragment,M),$(c.$$.fragment,M),m=!0)},o(M){g(l.$$.fragment,M),g(i.$$.fragment,M),g(c.$$.fragment,M),m=!1},d(M){M&&h(e),v(l),v(i),v(c)}}}function dr(s){let e,l,t;function n(o){s[36](o)}let r={name:Dr,title:J$};return s[18]!==void 0&&(r.show=s[18]),e=new ue({props:r}),H.push(()=>E(e,"show",n)),{c(){b(e.$$.fragment)},m(o,f){w(e,o,f),t=!0},p(o,f){const i={};!l&&f[0]&262144&&(l=!0,i.show=o[18],B(()=>l=!1)),e.$set(i)},i(o){t||($(e.$$.fragment,o),t=!0)},o(o){g(e.$$.fragment,o),t=!1},d(o){v(e,o)}}}function E$(s){let e,l,t,n,r=s[10].size>0&&$r(s),o=s[14].size>0&&_r(s),f=s[3]!=null&&s[3].features.length>0&&dr(s);return{c(){r&&r.c(),e=L(),o&&o.c(),l=L(),f&&f.c(),t=we()},m(i,a){r&&r.m(i,a),d(i,e,a),o&&o.m(i,a),d(i,l,a),f&&f.m(i,a),d(i,t,a),n=!0},p(i,a){i[10].size>0?r?(r.p(i,a),a[0]&1024&&$(r,1)):(r=$r(i),r.c(),$(r,1),r.m(e.parentNode,e)):r&&(_e(),g(r,1,1,()=>{r=null}),ge()),i[14].size>0?o?(o.p(i,a),a[0]&16384&&$(o,1)):(o=_r(i),o.c(),$(o,1),o.m(l.parentNode,l)):o&&(_e(),g(o,1,1,()=>{o=null}),ge()),i[3]!=null&&i[3].features.length>0?f?(f.p(i,a),a[0]&8&&$(f,1)):(f=dr(i),f.c(),$(f,1),f.m(t.parentNode,t)):f&&(_e(),g(f,1,1,()=>{f=null}),ge())},i(i){n||($(r),$(o),$(f),n=!0)},o(i){g(r),g(o),g(f),n=!1},d(i){i&&(h(e),h(l),h(t)),r&&r.d(i),o&&o.d(i),f&&f.d(i)}}}function B$(s){let e=Tn()=="Private (development)",l,t,n,r,o,f,i,a=e&&F$(s);return t=new Fe({props:{small:!0,$$slots:{default:[E$]},$$scope:{ctx:s}}}),r=new Wr({props:{label:"Load schemes from GeoJSON",onLoad:s[23]}}),f=new Yr({props:{errorMessage:s[2]}}),{c(){a&&a.c(),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment)},m(u,c){a&&a.m(u,c),d(u,l,c),w(t,u,c),d(u,n,c),w(r,u,c),d(u,o,c),w(f,u,c),i=!0},p(u,c){e&&a.p(u,c);const m={};c[0]&524123|c[1]&4096&&(m.$$scope={dirty:c,ctx:u}),t.$set(m);const _={};c[0]&4&&(_.errorMessage=u[2]),f.$set(_)},i(u){i||($(a),$(t.$$.fragment,u),$(r.$$.fragment,u),$(f.$$.fragment,u),i=!0)},o(u){g(a),g(t.$$.fragment,u),g(r.$$.fragment,u),g(f.$$.fragment,u),i=!1},d(u){u&&(h(l),h(n),h(o)),a&&a.d(u),v(t,u),v(r,u),v(f,u)}}}function hr(s){let e,l;return e=new hn({props:{source:"local-sketches",show:s[18],schemesGj:s[3],schemes:s[22],filterSchemeText:s[16],filterInterventionText:s[17],color:s[5]}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n[0]&262144&&(r.show=t[18]),n[0]&8&&(r.schemesGj=t[3]),n[0]&65536&&(r.filterSchemeText=t[16]),n[0]&131072&&(r.filterInterventionText=t[17]),n[0]&32&&(r.color=t[5]),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function U$(s){let e,l,t,n,r,o,f,i;e=new nt({props:{label:"Schemes",open:!0,$$slots:{default:[B$]},$$scope:{ctx:s}}}),t=new hn({props:{source:"atf",show:s[9],schemesGj:s[11],schemes:s[10],filterSchemeText:s[12],filterInterventionText:s[13],color:s[7]}}),r=new hn({props:{source:"lcwip",show:s[8],schemesGj:s[15],schemes:s[14],filterSchemeText:s[16],filterInterventionText:s[17],color:s[5]}});let a=s[3]!=null&&hr(s);return{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),a&&a.c(),f=we()},m(u,c){w(e,u,c),d(u,l,c),w(t,u,c),d(u,n,c),w(r,u,c),d(u,o,c),a&&a.m(u,c),d(u,f,c),i=!0},p(u,c){const m={};c[0]&524127|c[1]&4096&&(m.$$scope={dirty:c,ctx:u}),e.$set(m);const _={};c[0]&512&&(_.show=u[9]),c[0]&2048&&(_.schemesGj=u[11]),c[0]&1024&&(_.schemes=u[10]),c[0]&4096&&(_.filterSchemeText=u[12]),c[0]&8192&&(_.filterInterventionText=u[13]),c[0]&128&&(_.color=u[7]),t.$set(_);const k={};c[0]&256&&(k.show=u[8]),c[0]&32768&&(k.schemesGj=u[15]),c[0]&16384&&(k.schemes=u[14]),c[0]&65536&&(k.filterSchemeText=u[16]),c[0]&131072&&(k.filterInterventionText=u[17]),c[0]&32&&(k.color=u[5]),r.$set(k),u[3]!=null?a?(a.p(u,c),c[0]&8&&$(a,1)):(a=hr(u),a.c(),$(a,1),a.m(f.parentNode,f)):a&&(_e(),g(a,1,1,()=>{a=null}),ge())},i(u){i||($(e.$$.fragment,u),$(t.$$.fragment,u),$(r.$$.fragment,u),$(a),i=!0)},o(u){g(e.$$.fragment,u),g(t.$$.fragment,u),g(r.$$.fragment,u),g(a),i=!1},d(u){u&&(h(l),h(n),h(o),h(f)),v(e,u),v(t,u),v(r,u),a&&a.d(u)}}}let Pr="atf_schemes",W$="ATF schemes",Rr="lcwip_schemes",Y$="LCWIP schemes",Dr="local_sketches_schemes",J$="Local Sketches Schemes";function V$(s,e,l){let t,n,r,o,f,i,a,u,c,m,_,k,T,C,N;Y(s,mn,U=>l(10,a=U)),Y(s,sn,U=>l(11,u=U)),Y(s,Al,U=>l(12,c=U)),Y(s,Dl,U=>l(13,m=U)),Y(s,gn,U=>l(14,_=U)),Y(s,_n,U=>l(15,k=U)),Y(s,Gl,U=>l(16,T=U)),Y(s,Fl,U=>l(17,C=U));let D="",j=ce(Pr);Y(s,j,U=>l(9,i=U));let M="fundingProgramme",O=ce(Rr);Y(s,O,U=>l(8,f=U));let I="interventionType",R=ce(Dr);Y(s,R,U=>l(18,N=U));let P={features:[],type:"FeatureCollection",schemes:{}},q=new Map;yn(()=>{l(3,P=Hs()),Object.keys(P.schemes).forEach(U=>{q==null||q.set(U,P==null?void 0:P.schemes[U])})});function Z(U,ze){try{Zp(JSON.parse(ze)),Yt(j,i=!0,i),Yt(O,f=!0,f),l(2,D="")}catch(ut){l(2,D=`The file you loaded is broken: ${ut}`)}}function ae(U){return U=="interventionType"?[D$(),A$()]:U=="fundingProgramme"?[xe(["get","funding_programme"],Jt,"grey"),Object.entries(Jt)]:U=="currentMilestone"?[xe(["get","current_milestone"],dn,"grey"),Object.entries(dn)]:["red",[]]}function A(U){u=U,sn.set(u)}function ee(U){a=U,mn.set(a)}function V(U){c=U,Al.set(c)}function W(U){m=U,Dl.set(m)}function Ce(U){M=U,l(0,M)}function Re(U){i=U,j.set(i)}function qe(U){k=U,_n.set(k)}function _t(U){_=U,gn.set(_)}function Le(U){T=U,Gl.set(T)}function tt(U){C=U,Fl.set(C)}function Et(U){I=U,l(1,I)}function ft(U){f=U,O.set(f)}function me(U){N=U,R.set(N)}return s.$$.update=()=>{s.$$.dirty[0]&1&&l(7,[t,n]=ae(M),t,(l(6,n),l(0,M))),s.$$.dirty[0]&2&&l(5,[r,o]=ae(I),r,(l(4,o),l(1,I)))},[M,I,D,P,o,r,n,t,f,i,a,u,c,m,_,k,T,C,N,j,O,R,q,Z,A,ee,V,W,Ce,Re,qe,_t,Le,tt,Et,ft,me]}class Q$ extends K{constructor(e){super(),X(this,e,V$,U$,J,{},null,[-1,-1])}}const br=Pe(!0);let bn=Pe(null);function Z$(s){let e,l,t,n,r,o,f,i;return e=new yc({}),t=new Pc({}),r=new tp({}),f=new Uc({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,o,u),w(f,a,u),i=!0},i(a){i||($(e.$$.fragment,a),$(t.$$.fragment,a),$(r.$$.fragment,a),$(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(o)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function K$(s){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[Z$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function X$(s){let e,l,t,n,r,o,f,i,a,u,c,m;return e=new Ga({}),t=new _f({}),r=new Va({}),f=new rf({}),a=new fc({}),c=new Eu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment),u=L(),b(c.$$.fragment)},m(_,k){w(e,_,k),d(_,l,k),w(t,_,k),d(_,n,k),w(r,_,k),d(_,o,k),w(f,_,k),d(_,i,k),w(a,_,k),d(_,u,k),w(c,_,k),m=!0},i(_){m||($(e.$$.fragment,_),$(t.$$.fragment,_),$(r.$$.fragment,_),$(f.$$.fragment,_),$(a.$$.fragment,_),$(c.$$.fragment,_),m=!0)},o(_){g(e.$$.fragment,_),g(t.$$.fragment,_),g(r.$$.fragment,_),g(f.$$.fragment,_),g(a.$$.fragment,_),g(c.$$.fragment,_),m=!1},d(_){_&&(h(l),h(n),h(o),h(i),h(u)),v(e,_),v(t,_),v(r,_),v(f,_),v(a,_),v(c,_)}}}function x$(s){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[X$]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function em(s){let e,l,t,n,r,o;return e=new Sa({}),t=new vu({}),r=new Nu({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment)},m(f,i){w(e,f,i),d(f,l,i),w(t,f,i),d(f,n,i),w(r,f,i),o=!0},i(f){o||($(e.$$.fragment,f),$(t.$$.fragment,f),$(r.$$.fragment,f),o=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(r.$$.fragment,f),o=!1},d(f){f&&(h(l),h(n)),v(e,f),v(t,f),v(r,f)}}}function tm(s){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[em]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function nm(s){let e,l,t,n,r,o,f,i,a,u;return e=new Pi({}),t=new ua({}),r=new zo({}),f=new ai({}),a=new ki({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L(),b(a.$$.fragment)},m(c,m){w(e,c,m),d(c,l,m),w(t,c,m),d(c,n,m),w(r,c,m),d(c,o,m),w(f,c,m),d(c,i,m),w(a,c,m),u=!0},i(c){u||($(e.$$.fragment,c),$(t.$$.fragment,c),$(r.$$.fragment,c),$(f.$$.fragment,c),$(a.$$.fragment,c),u=!0)},o(c){g(e.$$.fragment,c),g(t.$$.fragment,c),g(r.$$.fragment,c),g(f.$$.fragment,c),g(a.$$.fragment,c),u=!1},d(c){c&&(h(l),h(n),h(o),h(i)),v(e,c),v(t,c),v(r,c),v(f,c),v(a,c)}}}function lm(s){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[nm]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function rm(s){let e,l,t,n;return e=new Io({}),t=new Ko({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment)},m(r,o){w(e,r,o),d(r,l,o),w(t,r,o),n=!0},i(r){n||($(e.$$.fragment,r),$(t.$$.fragment,r),n=!0)},o(r){g(e.$$.fragment,r),g(t.$$.fragment,r),n=!1},d(r){r&&h(l),v(e,r),v(t,r)}}}function sm(s){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[rm]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function om(s){let e,l,t,n,r,o,f,i;return e=new $u({}),t=new Mf({}),r=new lu({}),f=new Hp({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment)},m(a,u){w(e,a,u),d(a,l,u),w(t,a,u),d(a,n,u),w(r,a,u),d(a,o,u),w(f,a,u),i=!0},i(a){i||($(e.$$.fragment,a),$(t.$$.fragment,a),$(r.$$.fragment,a),$(f.$$.fragment,a),i=!0)},o(a){g(e.$$.fragment,a),g(t.$$.fragment,a),g(r.$$.fragment,a),g(f.$$.fragment,a),i=!1},d(a){a&&(h(l),h(n),h(o)),v(e,a),v(t,a),v(r,a),v(f,a)}}}function im(s){let e,l,t,n,r,o,f,i,a=Tn()=="Private (development)",u,c,m,_,k;e=new Np({}),t=new bp({}),r=new Uf({}),f=new Xu({});let T=a&&om();return c=new Bi({}),_=new xi({}),{c(){b(e.$$.fragment),l=L(),b(t.$$.fragment),n=L(),b(r.$$.fragment),o=L(),b(f.$$.fragment),i=L(),T&&T.c(),u=L(),b(c.$$.fragment),m=L(),b(_.$$.fragment)},m(C,N){w(e,C,N),d(C,l,N),w(t,C,N),d(C,n,N),w(r,C,N),d(C,o,N),w(f,C,N),d(C,i,N),T&&T.m(C,N),d(C,u,N),w(c,C,N),d(C,m,N),w(_,C,N),k=!0},p:Q,i(C){k||($(e.$$.fragment,C),$(t.$$.fragment,C),$(r.$$.fragment,C),$(f.$$.fragment,C),$(T),$(c.$$.fragment,C),$(_.$$.fragment,C),k=!0)},o(C){g(e.$$.fragment,C),g(t.$$.fragment,C),g(r.$$.fragment,C),g(f.$$.fragment,C),g(T),g(c.$$.fragment,C),g(_.$$.fragment,C),k=!1},d(C){C&&(h(l),h(n),h(o),h(i),h(u),h(m)),v(e,C),v(t,C),v(r,C),v(f,C),T&&T.d(C),v(c,C),v(_,C)}}}function am(s){let e,l;return e=new Fe({props:{small:!0,$$slots:{default:[im]},$$scope:{ctx:s}}}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},p(t,n){const r={};n&256&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function fm(s){let e,l,t,n,r;function o(i){s[6](i)}let f={cfg:s[5],map:s[3]};return s[0]!==void 0&&(f.enabled=s[0]),e=new rs({props:f}),H.push(()=>E(e,"enabled",o)),n=new zs({}),{c(){b(e.$$.fragment),t=L(),b(n.$$.fragment)},m(i,a){w(e,i,a),d(i,t,a),w(n,i,a),r=!0},p(i,a){const u={};a&8&&(u.map=i[3]),!l&&a&1&&(l=!0,u.enabled=i[0],B(()=>l=!1)),e.$set(u)},i(i){r||($(e.$$.fragment,i),$(n.$$.fragment,i),r=!0)},o(i){g(e.$$.fragment,i),g(n.$$.fragment,i),r=!1},d(i){i&&h(t),v(e,i),v(n,i)}}}function um(s){let e,l;const t=[z("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:s[1]?"none":"visible"}}];let n={};for(let r=0;r<t.length;r+=1)n=ne(n,t[r]);return e=new Ae({props:n}),{c(){b(e.$$.fragment)},m(r,o){w(e,r,o),l=!0},p(r,o){const f=o&2?re(t,[t[0],t[1],{layout:{visibility:r[1]?"none":"visible"}}]):{};e.$set(f)},i(r){l||($(e.$$.fragment,r),l=!0)},o(r){g(e.$$.fragment,r),l=!1},d(r){v(e,r)}}}function cm(s){let e,l,t,n,r,o,f,i,a,u,c,m,_,k,T,C,N,D,j,M,O;return l=new Q$({}),n=new nt({props:{label:"Trip generators",$$slots:{default:[K$]},$$scope:{ctx:s}}}),o=new nt({props:{label:"Existing infrastructure",$$slots:{default:[x$]},$$scope:{ctx:s}}}),i=new nt({props:{label:"Public transport",$$slots:{default:[tm]},$$scope:{ctx:s}}}),u=new nt({props:{label:"Boundaries",$$slots:{default:[lm]},$$scope:{ctx:s}}}),m=new nt({props:{label:"Census",$$slots:{default:[sm]},$$scope:{ctx:s}}}),k=new nt({props:{label:"Other",$$slots:{default:[am]},$$scope:{ctx:s}}}),C=new nt({props:{label:"Tools",$$slots:{default:[fm]},$$scope:{ctx:s}}}),D=new ls({props:{disabled:!s[1]}}),M=new zt({props:{data:s[4],$$slots:{default:[um]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),b(o.$$.fragment),f=L(),b(i.$$.fragment),a=L(),b(u.$$.fragment),c=L(),b(m.$$.fragment),_=L(),b(k.$$.fragment),T=L(),b(C.$$.fragment),N=L(),b(D.$$.fragment),j=L(),b(M.$$.fragment)},m(I,R){d(I,e,R),w(l,e,null),p(e,t),w(n,e,null),p(e,r),w(o,e,null),p(e,f),w(i,e,null),p(e,a),w(u,e,null),p(e,c),w(m,e,null),p(e,_),w(k,e,null),p(e,T),w(C,e,null),p(e,N),w(D,e,null),s[7](e),d(I,j,R),w(M,I,R),O=!0},p(I,[R]){const P={};R&256&&(P.$$scope={dirty:R,ctx:I}),n.$set(P);const q={};R&256&&(q.$$scope={dirty:R,ctx:I}),o.$set(q);const Z={};R&256&&(Z.$$scope={dirty:R,ctx:I}),i.$set(Z);const ae={};R&256&&(ae.$$scope={dirty:R,ctx:I}),u.$set(ae);const A={};R&256&&(A.$$scope={dirty:R,ctx:I}),m.$set(A);const ee={};R&256&&(ee.$$scope={dirty:R,ctx:I}),k.$set(ee);const V={};R&265&&(V.$$scope={dirty:R,ctx:I}),C.$set(V);const W={};R&2&&(W.disabled=!I[1]),D.$set(W);const Ce={};R&258&&(Ce.$$scope={dirty:R,ctx:I}),M.$set(Ce)},i(I){O||($(l.$$.fragment,I),$(n.$$.fragment,I),$(o.$$.fragment,I),$(i.$$.fragment,I),$(u.$$.fragment,I),$(m.$$.fragment,I),$(k.$$.fragment,I),$(C.$$.fragment,I),$(D.$$.fragment,I),$(M.$$.fragment,I),O=!0)},o(I){g(l.$$.fragment,I),g(n.$$.fragment,I),g(o.$$.fragment,I),g(i.$$.fragment,I),g(u.$$.fragment,I),g(m.$$.fragment,I),g(k.$$.fragment,I),g(C.$$.fragment,I),g(D.$$.fragment,I),g(M.$$.fragment,I),O=!1},d(I){I&&(h(e),h(j)),v(l),v(n),v(o),v(i),v(u),v(m),v(k),v(C),v(D),s[7](null),v(M,I)}}}function pm(s,e,l){let t,n,r,o;Y(s,br,c=>l(1,n=c)),Y(s,bn,c=>l(2,r=c)),Y(s,Sn,c=>l(3,o=c));let f={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}},i={getStreetViewRoadLayerNames:c=>ss(c,Jr(pn))};function a(c){t=c,l(0,t),l(1,n)}function u(c){H[c?"unshift":"push"](()=>{r=c,bn.set(r)})}return s.$$.update=()=>{s.$$.dirty&2&&l(0,t=!n),s.$$.dirty&1&&br.set(!t)},[t,n,r,o,f,i,a,u]}class $m extends K{constructor(e){super(),X(this,e,pm,cm,J,{})}}function mm(s){let e,l,t;return{c(){e=S("p"),e.innerHTML="<b>Selected layers</b>",l=L(),t=S("div")},m(n,r){d(n,e,r),d(n,l,r),d(n,t,r),s[3](t)},p:Q,i:Q,o:Q,d(n){n&&(h(e),h(l),h(t)),s[3](null)}}}function _m(s,e,l){if(s){s.innerHTML="";for(let t of e){let n=l.get(t);n&&(n.style.display="block",s.appendChild(n))}}}function gm(s,e,l){let t,n;Y(s,$n,f=>l(1,t=f)),Y(s,Qt,f=>l(2,n=f));let r=null;function o(f){H[f?"unshift":"push"](()=>{r=f,l(0,r)})}return s.$$.update=()=>{s.$$.dirty&7&&_m(r,n,t)},[r,t,n,o]}class dm extends K{constructor(e){super(),X(this,e,gm,mm,J,{})}}function hm(s){let e,l,t,n,r,o,f,i,a,u,c,m,_,k,T,C,N;return l=new os({}),n=new Vr({}),f=new Qr({}),k=new is({props:{boundaryGeojson:s[3]}}),{c(){e=S("div"),b(l.$$.fragment),t=L(),b(n.$$.fragment),r=L(),o=S("div"),b(f.$$.fragment),i=L(),a=S("p"),a.textContent=`App version: ${Tn()}`,u=L(),c=S("div"),m=S("h1"),m.textContent="Scheme Browser",_=L(),b(k.$$.fragment),T=L(),C=S("div"),ie(o,"border-bottom","1px solid #b1b4b6"),ie(c,"display","flex"),ie(c,"justify-content","space-between"),F(e,"slot","sidebar"),F(e,"class","govuk-prose")},m(D,j){d(D,e,j),w(l,e,null),p(e,t),w(n,e,null),p(e,r),p(e,o),w(f,o,null),p(o,i),p(o,a),p(e,u),p(e,c),p(c,m),p(c,_),w(k,c,null),p(e,T),p(e,C),s[6](C),N=!0},p(D,j){const M={};j&8&&(M.boundaryGeojson=D[3]),k.$set(M)},i(D){N||($(l.$$.fragment,D),$(n.$$.fragment,D),$(f.$$.fragment,D),$(k.$$.fragment,D),N=!0)},o(D){g(l.$$.fragment,D),g(n.$$.fragment,D),g(f.$$.fragment,D),g(k.$$.fragment,D),N=!1},d(D){D&&h(e),v(l),v(n),v(f),v(k),s[6](null)}}}function wr(s){let e,l;return e=new $m({}),{c(){b(e.$$.fragment)},m(t,n){w(e,t,n),l=!0},i(t){l||($(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){v(e,t)}}}function bm(s){let e,l,t,n;e=new as({});let r=s[2]&&wr();return{c(){b(e.$$.fragment),l=L(),r&&r.c(),t=we()},m(o,f){w(e,o,f),d(o,l,f),r&&r.m(o,f),d(o,t,f),n=!0},p(o,f){o[2]?r?f&4&&$(r,1):(r=wr(),r.c(),$(r,1),r.m(t.parentNode,t)):r&&(_e(),g(r,1,1,()=>{r=null}),ge())},i(o){n||($(e.$$.fragment,o),$(r),n=!0)},o(o){g(e.$$.fragment,o),g(r),n=!1},d(o){o&&(h(l),h(t)),v(e,o),r&&r.d(o)}}}function wm(s){let e,l,t;return l=new Zr({props:{style:s[1],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[bm]},$$scope:{ctx:s}}}),{c(){e=S("div"),b(l.$$.fragment),F(e,"slot","main")},m(n,r){d(n,e,r),w(l,e,null),t=!0},p(n,r){const o={};r&2&&(o.style=n[1]),r&260&&(o.$$scope={dirty:r,ctx:n}),l.$set(o)},i(n){t||($(l.$$.fragment,n),t=!0)},o(n){g(l.$$.fragment,n),t=!1},d(n){n&&h(e),v(l)}}}function vm(s){let e,l,t,n,r;return e=new ws({props:{$$slots:{main:[wm],sidebar:[hm]},$$scope:{ctx:s}}}),n=new dm({}),{c(){b(e.$$.fragment),l=L(),t=S("div"),b(n.$$.fragment),F(t,"class","top-right govuk-prose svelte-u44ed2")},m(o,f){w(e,o,f),d(o,l,f),d(o,t,f),w(n,t,null),r=!0},p(o,[f]){const i={};f&271&&(i.$$scope={dirty:f,ctx:o}),e.$set(i)},i(o){r||($(e.$$.fragment,o),$(n.$$.fragment,o),r=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),r=!1},d(o){o&&(h(l),h(t)),v(e,o),v(n)}}}function km(s,e,l){let t,n,r,o,f;Y(s,bn,c=>l(4,t=c)),Y(s,Sn,c=>l(5,n=c)),Y(s,pn,c=>l(1,r=c)),Y(s,Yn,c=>l(2,o=c)),Y(s,sn,c=>l(3,f=c)),yn(()=>{Kr()});const i=new URLSearchParams(window.location.search);pn.set(i.get("style")||"dataviz");let a;function u(c){H[c?"unshift":"push"](()=>{a=c,l(0,a),l(4,t)})}return s.$$.update=()=>{s.$$.dirty&32&&n&&Yn.set(n),s.$$.dirty&17&&a&&t&&(l(0,a.innerHTML="",a),a.appendChild(t))},[a,r,o,f,t,n,u]}class ym extends K{constructor(e){super(),X(this,e,km,vm,J,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new ym({target:document.getElementById("app")});
