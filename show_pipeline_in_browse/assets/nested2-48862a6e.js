import{S as Y,i as J,s as X,e as C,h as H,a1 as Ce,j as $,Y as ne,o as p,aR as Rl,b as U,c as W,d as T,g as b,m as v,w as ft,l as V,t as m,n as d,p as w,Z as Jt,_ as Kt,$ as Qt,a0 as Zt,a9 as qe,N as ue,O as ce,aU as ht,u as k,k as h,H as B,K as De,P as Nn,Q as Bl,q as Oe,T as zl,U as ql,V as at,W as Hl,X as Gl,a$ as _o,b0 as _t,a6 as Gn,b1 as go,aQ as ho,at as ut,ag as Pn,al as xt,r as Mn,a as bt,F as vn,v as Ye,a_ as x,b2 as he,b3 as Se,C as Z,aj as ee,D as Te,am as te,b4 as se,G as wt,ad as on,J as Ul,aW as Vt,b5 as fn,R as Wl,b6 as Ut,E as Vl,aL as bo,b7 as vo,b8 as wo,f as wn,ai as ko,B as yo,aY as Un,an as So,ao as Wn,ap as Vn,aq as nn,aZ as Xn,L as Co,M as To,y as Oo}from"./index-d2f27b37.js";import{d as ot,j as dt,C as ze,f as Ke,h as le,l as q,k as Lo,S as Ao,B as Io,c as Yn,b as kt,G as No}from"./StreetViewTool-ef0b03b7.js";import{a as He,F as Po}from"./Popup-eafde190.js";import{P as ae}from"./Popup-a2371866.js";import{R as Mo,C as ct,Z as Fo}from"./ZoomOutMap-e0697df4.js";import{L as Do,a as Eo}from"./LineMeasureController-04a862a9.js";function jo(l){let e;return{c(){e=C("span"),H(e,"class","svelte-kzgqtg"),Ce(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&Ce(e,"background",n[0])},i:ne,o:ne,d(n){n&&p(e)}}}function Ro(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Le extends Y{constructor(e){super(),J(this,e,Ro,jo,X,{color:0})}}const Bo="/atip/show_pipeline_in_browse/assets/help-d011708a.svg";function zo(l){let e,n;const t=l[1].default,r=Jt(t,l,l[4],null);return{c(){e=C("div"),r&&r.c(),H(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&Kt(r,t,o,o[4],n?Zt(t,o[4],s,null):Qt(o[4]),null)},i(o){n||(m(r,o),n=!0)},o(o){d(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function qo(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[zo]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new Rl({props:a}),U.push(()=>W(t,"open",i)),{c(){e=C("button"),e.innerHTML=`<img src="${Bo}" title="Help" alt="Help"/>`,n=T(),b(t.$$.fragment),H(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),v(t,f,c),o=!0,s||(u=ft(e,"click",l[2]),s=!0)},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,_.open=f[0],V(()=>r=!1)),t.$set(_)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){d(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),w(t,f),s=!1,u()}}}function Ho(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class $e extends Y{constructor(e){super(),J(this,e,Ho,qo,X,{})}}function Jn(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Kn(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Le({props:{color:l[2]}}),{c(){e=C("li"),b(n.$$.fragment),t=T(),o=k(r),s=T()},m(i,a){$(i,e,a),v(n,e,null),h(e,t),h(e,o),h(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&B(o,r)},i(i){u||(m(n.$$.fragment,i),u=!0)},o(i){d(n.$$.fragment,i),u=!1},d(i){i&&p(e),w(n)}}}function Go(l){let e,n,t=qe(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Kn(Jn(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){e=C("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=qe(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Jn(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Kn(a),r[i].c(),m(r[i],1),r[i].m(e,null))}for(ue(),i=t.length;i<r.length;i+=1)o(i);ce()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),ht(r,s)}}}function Uo(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class Fn extends Y{constructor(e){super(),J(this,e,Uo,Go,X,{rows:0})}}function Qn(l){let e=l[0],n,t,r=Zn(l);return{c(){r.c(),n=De()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&X(e,e=o[0])?(ue(),d(r,1,1,ne),ce(),r=Zn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Zn(l){let e;const n=l[10].default,t=Jt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&Kt(t,n,r,r[9],e?Zt(n,r[9],o,null):Qt(r[9]),null)},i(r){e||(m(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function Wo(l){let e,n,t=l[0]&&Qn(l);return{c(){t&&t.c(),e=De()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Qn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ue(),d(t,1,1,()=>{t=null}),ce())},i(r){n||(m(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function Vo(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Nn("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=Bl();Oe(l,f,y=>n(8,r=y)),Oe(l,c,y=>n(0,t=y));let _,g=!0;return zl(()=>{t&&_&&r&&(ql(f,t,_),at(c,t=null,t),n(6,_=void 0))}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(at(c,t=u,t),Hl(r,t,Gl({type:"raster",tiles:i,tileSize:a}),y=>r&&y===t,()=>{t&&(n(6,_=r==null?void 0:r.getSource(t)),n(7,g=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,_=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&_&&(g?n(7,g=!1):_.setTiles(i))},[t,f,c,u,i,a,_,g,r,s,o]}class Xo extends Y{constructor(e){super(),J(this,e,Vo,Wo,X,{id:3,tiles:4,tileSize:5})}}function Yo(l){let e;const n=l[16].default,t=Jt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&Kt(t,n,r,r[24],e?Zt(n,r[24],o,null):Qt(r[24]),null)},i(r){e||(m(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function Jo(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[Yo]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new _o({props:o}),U.push(()=>W(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ko(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Nn("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:_=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:L=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:N=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:I=!1}=e,{interactive:M=!0}=e;function A(E){j=E,n(0,j)}function P(E){_t.call(this,l,E)}function F(E){_t.call(this,l,E)}function O(E){_t.call(this,l,E)}function D(E){_t.call(this,l,E)}function G(E){_t.call(this,l,E)}function R(E){_t.call(this,l,E)}return l.$$set=E=>{"id"in E&&n(1,o=E.id),"source"in E&&n(2,s=E.source),"sourceLayer"in E&&n(3,u=E.sourceLayer),"beforeId"in E&&n(4,i=E.beforeId),"beforeLayerType"in E&&n(5,a=E.beforeLayerType),"paint"in E&&n(6,f=E.paint),"layout"in E&&n(7,c=E.layout),"filter"in E&&n(8,_=E.filter),"applyToClusters"in E&&n(9,g=E.applyToClusters),"minzoom"in E&&n(10,y=E.minzoom),"maxzoom"in E&&n(11,L=E.maxzoom),"hoverCursor"in E&&n(12,S=E.hoverCursor),"manageHoverState"in E&&n(13,N=E.manageHoverState),"hovered"in E&&n(0,j=E.hovered),"eventsIfTopMost"in E&&n(14,I=E.eventsIfTopMost),"interactive"in E&&n(15,M=E.interactive),"$$scope"in E&&n(24,r=E.$$scope)},[j,o,s,u,i,a,f,c,_,g,y,L,S,N,I,M,t,A,P,F,O,D,G,R,r]}class un extends Y{constructor(e){super(),J(this,e,Ko,Jo,X,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function xn(l){let e=l[0],n,t,r=er(l);return{c(){r.c(),n=De()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&X(e,e=o[0])?(ue(),d(r,1,1,ne),ce(),r=er(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r.d(o)}}}function er(l){let e;const n=l[9].default,t=Jt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&Kt(t,n,r,r[8],e?Zt(n,r[8],o,null):Qt(r[8]),null)},i(r){e||(m(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function Qo(l){let e,n,t=l[0]&&xn(l);return{c(){t&&t.c(),e=De()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=xn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&(ue(),d(t,1,1,()=>{t=null}),ce())},i(r){n||(m(t),n=!0)},o(r){d(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function Zo(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Nn("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!Gn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new go;Gn.addProtocol("pmtiles",y.tile)}const{map:c,self:_}=Bl();Oe(l,c,y=>n(7,r=y)),Oe(l,_,y=>n(0,t=y));let g;return zl(()=>{t&&r&&(ql(c,t,g),at(_,t=null,t),g=void 0)}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(at(_,t=u,t),Hl(r,t,Gl({type:"vector",url:i,tiles:a,promoteId:f}),y=>r&&y===t,()=>{t&&(g=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{g=r==null?void 0:r.getSource(u)}))},[t,c,_,u,i,a,f,r,s,o]}class ke extends Y{constructor(e){super(),J(this,e,Zo,Qo,X,{id:3,url:4,tiles:5,promoteId:6})}}const xo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var je=Uint8Array,pt=Uint16Array,Xl=Uint32Array,Yl=new je([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Jl=new je([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),es=new je([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Kl=function(l,e){for(var n=new pt(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new Xl(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},Ql=Kl(Yl,2),Zl=Ql[0],ts=Ql[1];Zl[28]=258,ts[258]=28;var ns=Kl(Jl,0),rs=ns[0],kn=new pt(32768);for(var we=0;we<32768;++we){var st=(we&43690)>>>1|(we&21845)<<1;st=(st&52428)>>>2|(st&13107)<<2,st=(st&61680)>>>4|(st&3855)<<4,kn[we]=((st&65280)>>>8|(st&255)<<8)>>>1}var Wt=function(l,e,n){for(var t=l.length,r=0,o=new pt(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new pt(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new pt(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,_=c|(1<<f)-1;c<=_;++c)u[kn[c]>>>i]=a}else for(u=new pt(t),r=0;r<t;++r)l[r]&&(u[r]=kn[s[l[r]-1]++]>>>15-l[r]);return u},en=new je(288);for(var we=0;we<144;++we)en[we]=8;for(var we=144;we<256;++we)en[we]=9;for(var we=256;we<280;++we)en[we]=7;for(var we=280;we<288;++we)en[we]=8;var xl=new je(32);for(var we=0;we<32;++we)xl[we]=5;var ls=Wt(en,9,1),os=Wt(xl,5,1),cn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},Ue=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},$n=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},ss=function(l){return(l+7)/8|0},Dn=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?pt:l.BYTES_PER_ELEMENT==4?Xl:je)(n-e);return t.set(l.subarray(e,n)),t},is=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],We=function(l,e,n){var t=new Error(e||is[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,We),!n)throw t;return t},as=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new je(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new je(t*3));var s=function(ye){var pe=e.length;if(ye>pe){var ve=new je(Math.max(pe*2,ye));ve.set(e),e=ve}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,_=n.m,g=n.n,y=t*8;do{if(!f){u=Ue(l,i,1);var L=Ue(l,i+1,3);if(i+=3,L)if(L==1)f=ls,c=os,_=9,g=5;else if(L==2){var I=Ue(l,i,31)+257,M=Ue(l,i+10,15)+4,A=I+Ue(l,i+5,31)+1;i+=14;for(var P=new je(A),F=new je(19),O=0;O<M;++O)F[es[O]]=Ue(l,i+O*3,7);i+=M*3;for(var D=cn(F),G=(1<<D)-1,R=Wt(F,D,1),O=0;O<A;){var E=R[Ue(l,i,G)];i+=E&15;var S=E>>>4;if(S<16)P[O++]=S;else{var z=0,Q=0;for(S==16?(Q=3+Ue(l,i,3),i+=2,z=P[O-1]):S==17?(Q=3+Ue(l,i,7),i+=3):S==18&&(Q=11+Ue(l,i,127),i+=7);Q--;)P[O++]=z}}var re=P.subarray(0,I),oe=P.subarray(I);_=cn(re),g=cn(oe),f=Wt(re,_,1),c=Wt(oe,g,1)}else We(1);else{var S=ss(i)+4,N=l[S-4]|l[S-3]<<8,j=S+N;if(j>t){o&&We(0);break}r&&s(a+N),e.set(l.subarray(S,j),a),n.b=a+=N,n.p=i=j*8,n.f=u;continue}if(i>y){o&&We(0);break}}r&&s(a+131072);for(var me=(1<<_)-1,Ne=(1<<g)-1,Pe=i;;Pe=i){var z=f[$n(l,i)&me],ie=z>>>4;if(i+=z&15,i>y){o&&We(0);break}if(z||We(2),ie<256)e[a++]=ie;else if(ie==256){Pe=i,f=null;break}else{var Me=ie-254;if(ie>264){var O=ie-257,ge=Yl[O];Me=Ue(l,i,(1<<ge)-1)+Zl[O],i+=ge}var de=c[$n(l,i)&Ne],be=de>>>4;de||We(3),i+=de&15;var oe=rs[be];if(be>3){var ge=Jl[be];oe+=$n(l,i)&(1<<ge)-1,i+=ge}if(i>y){o&&We(0);break}r&&s(a+131072);for(var _e=a+Me;a<_e;a+=4)e[a]=e[a-oe],e[a+1]=e[a+1-oe],e[a+2]=e[a+2-oe],e[a+3]=e[a+3-oe];a=_e}}n.l=f,n.p=Pe,n.b=a,n.f=u,f&&(u=1,n.m=_,n.d=c,n.n=g)}while(!u);return a==e.length?e:Dn(e,0,a)},fs=new je(0),Xe=function(l,e){return l[e]|l[e+1]<<8},Ve=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},pn=function(l,e){return Ve(l,e)+Ve(l,e+4)*4294967296};function us(l,e){return as(l,e)}var yn=typeof TextDecoder<"u"&&new TextDecoder,cs=0;try{yn.decode(fs,{stream:!0}),cs=1}catch{}var $s=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,Dn(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function eo(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(yn)return yn.decode(l);var r=$s(l),o=r[0],s=r[1];return s.length&&We(8),o}}var ps=function(l,e){return e+30+Xe(l,e+26)+Xe(l,e+28)},ms=function(l,e,n){var t=Xe(l,e+28),r=eo(l.subarray(e+46,e+46+t),!(Xe(l,e+8)&2048)),o=e+46+t,s=Ve(l,e+20),u=n&&s==4294967295?_s(l,o):[s,Ve(l,e+24),Ve(l,e+42)],i=u[0],a=u[1],f=u[2];return[Xe(l,e+10),i,a,r,o+Xe(l,e+30)+Xe(l,e+32),f]},_s=function(l,e){for(;Xe(l,e)!=1;e+=4+Xe(l,e+2));return[pn(l,e+12),pn(l,e+4),pn(l,e+20)]};function gs(l,e){for(var n={},t=l.length-22;Ve(l,t)!=101010256;--t)(!t||l.length-t>65558)&&We(13);var r=Xe(l,t+8);if(!r)return{};var o=Ve(l,t+16),s=o==4294967295||r==65535;if(s){var u=Ve(l,t-12);s=Ve(l,u)==101075792,s&&(r=Ve(l,u+32),o=Ve(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=ms(l,o,s),c=f[0],_=f[1],g=f[2],y=f[3],L=f[4],S=f[5],N=ps(l,S);o=L,(!i||i({name:y,size:_,originalSize:g,compression:c}))&&(c?c==8?n[y]=us(l.subarray(N,N+_),new je(g)):We(14,"unknown compression type "+c):n[y]=Dn(l,N,N+_))}return n}function ds(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(mn):mn(l)}function mn(l){var e=new Uint8Array(l),n=gs(e);return Promise.resolve(hs(n))}function hs(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=eo(l[r])}return e}function Je(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&mt(t)===e)return t;n++}}function tn(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&mt(r)===e&&n.push(r),t++}return n}function sn(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&mt(r)===e&&n(r,t):n(r,t),t++}}function bs(l,e,n){var t=[];return sn(l,e,function(r,o){t.push(n(r,o))}),t}var vs=/.+\:/;function mt(l){return l.tagName.replace(vs,"")}function to(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+mt(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=to(l.childNodes[t]),t++;return e+="</"+mt(l)+">",e}function ws(l){var e=l.documentElement,n=Je(e,"sheetData"),t=[];return sn(n,"row",function(r){sn(r,"c",function(o){t.push(o)})}),t}function ks(l,e){return Je(e,"v")}function ys(l,e){if(e.firstChild&&mt(e.firstChild)==="is"&&e.firstChild.firstChild&&mt(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function Ss(l){var e=l.documentElement,n=Je(e,"dimension");if(n)return n.getAttribute("ref")}function Cs(l){var e=l.documentElement,n=Je(e,"cellStyleXfs");return n?tn(n,"xf"):[]}function Ts(l){var e=l.documentElement,n=Je(e,"cellXfs");return n?tn(n,"xf"):[]}function Os(l){var e=l.documentElement,n=Je(e,"numFmts");return n?tn(n,"numFmt"):[]}function Ls(l){var e=l.documentElement;return bs(e,"si",function(n){var t=Je(n,"t");if(t)return t.textContent;var r="";return sn(n,"r",function(o){r+=Je(o,"t").textContent}),r})}function As(l){var e=l.documentElement;return Je(e,"workbookPr")}function Is(l){var e=l.documentElement;return tn(e,"Relationship")}function Ns(l){var e=l.documentElement,n=Je(e,"sheets");return tn(n,"sheet")}function Ps(l,e){var n=e.createDocument(l),t={},r=As(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return Ns(n).forEach(o),t}function Ms(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=_n(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=_n(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=_n(u);break}};return Is(n).forEach(r),t}function _n(l){return l[0]==="/"?l.slice(1):"xl/"+l}function tr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function nr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tr(Object(n),!0).forEach(function(t){Fs(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):tr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Fs(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Ds(l,e){if(!l)return{};var n=e.createDocument(l),t=Cs(n).map(gn),r=Os(n).map(Es).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?nr(nr({},t[u.xfId]),gn(u,r)):gn(u,r)};return Ts(n).map(o)}function Es(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function gn(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function js(l,e){return l?Ls(e.createDocument(l)):[]}function no(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function Rs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Bs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bs(l,e){if(l){if(typeof l=="string")return rr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rr(l,e)}}function rr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function zs(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(qs.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&Us(t.numberFormat.template))return!0}}var qs=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],Hs=/^\[\$-414\]/,Gs=/;@$/;function Us(l){l=l.toLowerCase(),l=l.replace(Hs,""),l=l.replace(Gs,"");for(var e=l.split(/\W+/),n=Rs(e),t;!(t=n()).done;){var r=t.value;if(Ws.indexOf(r)<0)return!1}return!0}var Ws=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Vs(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=dn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=dn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=dn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=Xs(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var _=zs(o(),s,a);_?(l=lr(l),l=no(l,i)):l=(a.parseNumber||lr)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function Xs(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function dn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function lr(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var Ys=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Js(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function Ks(l){for(var e=0,n=0;n<l.length;)e*=26,e+=Ys.indexOf(l[n]),n++;return e}function ro(l){return l=l.split(/(\d+)/),[parseInt(l[1]),Ks(l[0].trim())]}function Qs(l,e,n,t,r,o,s){var u=ro(l.getAttribute("r")),i=ks(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:Vs(a,f,{getInlineStringValue:function(){return ys(e,l)},getInlineStringXml:function(){return to(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function Zs(l,e,n,t,r,o){var s=ws(l);return s.length===0?[]:s.map(function(u){return Qs(u,l,e,n,t,r,o)})}function xs(l,e){return ri(l)||ni(l,e)||ti(l,e)||ei()}function ei(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ti(l,e){if(l){if(typeof l=="string")return or(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return or(l,e)}}function or(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ni(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function ri(l){if(Array.isArray(l))return l}function li(l){var e=Ss(l);if(e)return e=e.split(":").map(ro).map(function(n){var t=xs(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function oi(l,e,n,t,r,o){var s=e.createDocument(l),u=Zs(s,e,n,t,r,o),i=li(s)||Js(u);return{cells:u,dimensions:i}}function si(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ii(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ii(l,e){if(l){if(typeof l=="string")return sr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sr(l,e)}}function sr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ai(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=si(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function fi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ui(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ui(l,e){if(l){if(typeof l=="string")return ir(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ir(l,e)}}function ir(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ci(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=fi(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function $i(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=lo(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pi(l,e){return gi(l)||_i(l,e)||lo(l,e)||mi()}function mi(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lo(l,e){if(l){if(typeof l=="string")return ar(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ar(l,e)}}function ar(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function _i(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function gi(l){if(Array.isArray(l))return l}function di(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=pi(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=$i(t),_;!(_=c()).done;){var g=_.value,y=g.row-1,L=g.column-1;L<s&&y<u&&(i[y][L]=g.value)}var S=e.rowMap;if(S)for(var N=0;N<i.length;)S[N]=N,N++;return i=ai(ci(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(i=e.transformData(i)),i}function hi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=bi(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bi(l,e){if(l){if(typeof l=="string")return fr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fr(l,e)}}function fr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ur(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function vi(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ur(Object(n),!0).forEach(function(t){wi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function wi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ki(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=vi({sheet:1},n));var t=function(_){if(!l[_])throw new Error('"'.concat(_,'" file not found inside the *.xlsx file zip archive'));return l[_]},r=Ms(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?js(t(r.sharedStrings),e):[],s=r.styles?Ds(t(r.styles),e):{},u=Ps(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var _=c.name;return{name:_}});var i=yi(n.sheet,u.sheets);if(!i||!r.sheets[i])throw Si(n.sheet,u.sheets);var a=oi(t(r.sheets[i]),e,o,s,u,n),f=di(a,n);return n.properties?{data:f,properties:u}:f}function yi(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=hi(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function Si(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function Sn(l){"@babel/helpers - typeof";return Sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(l)}function cr(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function Ci(l,e,n){return e&&cr(l.prototype,e),n&&cr(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function Ti(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function Oi(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&Xt(l,e)}function Li(l){var e=oo();return function(){var t=Yt(l),r;if(e){var o=Yt(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return Ai(this,r)}}function Ai(l,e){if(e&&(Sn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ii(l)}function Ii(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function Cn(l){var e=typeof Map=="function"?new Map:void 0;return Cn=function(t){if(t===null||!Ni(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return ln(t,arguments,Yt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Xt(r,t)},Cn(l)}function ln(l,e,n){return oo()?ln=Reflect.construct:ln=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&Xt(a,s.prototype),a},ln.apply(null,arguments)}function oo(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ni(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function Xt(l,e){return Xt=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},Xt(l,e)}function Yt(l){return Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Yt(l)}var Re=function(l){Oi(n,l);var e=Li(n);function n(t){var r;return Ti(this,n),r=e.call(this,"invalid"),r.reason=t,r}return Ci(n)}(Cn(Error));function Pi(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new Re("not_a_number")}if(typeof l!="number")throw new Re("not_a_number");if(isNaN(l))throw new Re("invalid_number");if(!isFinite(l))throw new Re("out_of_bounds");return l}function Mi(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new Re("invalid_number");if(!isFinite(l))throw new Re("out_of_bounds");return String(l)}throw new Re("not_a_string")}function Fi(l){if(typeof l=="boolean")return l;throw new Re("not_a_boolean")}function Di(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new Re("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new Re("invalid_number");if(!isFinite(l))throw new Re("out_of_bounds");var t=no(l,n);if(isNaN(t.valueOf()))throw new Re("out_of_bounds");return t}throw new Re("not_a_date")}function Ei(l,e){return Bi(l)||Ri(l,e)||so(l,e)||ji()}function ji(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ri(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Bi(l){if(Array.isArray(l))return l}function Tn(l){"@babel/helpers - typeof";return Tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Tn(l)}function zi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=so(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function so(l,e){if(l){if(typeof l=="string")return $r(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $r(l,e)}}function $r(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function pr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function mr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?pr(Object(n),!0).forEach(function(t){qi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):pr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function qi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var _r={isColumnOriented:!1};function Hi(l,e,n){n?n=mr(mr({},_r),n):n=_r;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;Vi(e),r&&(l=Wi(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=io(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var _=zi(a),g;!(g=_()).done;){var y=g.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function io(l,e,n,t,r,o){for(var s={},u=!0,i=function(j){var I=j.column,M=j.value,A=j.error,P=j.reason,F={error:A,row:n+1,column:I,value:M};return P&&(F.reason=P),l[I].type&&(F.type=l[I].type),F},a=[],f=function(){var j=_[c],I=l[j],M=Tn(I.type)==="object"&&!Array.isArray(I.type),A=e[t.indexOf(j)];A===void 0&&(A=null);var P=void 0,F=void 0,O=void 0;if(M)P=io(I.type,e,n,t,r,o);else if(A===null)P=null;else if(Array.isArray(I.type)){var D=!1,G=Ui(A).map(function(E){var z=gr(E,I,o);return z.error&&(P=E,F=z.error,O=z.reason),z.value!==null&&(D=!0),z.value});F||(P=D?G:null)}else{var R=gr(A,I,o);F=R.error,O=R.reason,P=F?A:R.value}!F&&P===null&&(typeof I.required=="function"?a.push({column:j}):I.required===!0&&(F="required")),F?r.push(i({column:j,value:P,error:F,reason:O})):(u&&P!==null&&(u=!1),(P!==null||o.includeNullValues)&&(s[I.prop]=P))},c=0,_=Object.keys(l);c<_.length;c++)f();if(u)return null;for(var g=0,y=a;g<y.length;g++){var L=y[g].column,S=l[L].required(s);S&&r.push(i({column:L,value:null,error:"required"}))}return s}function gr(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=gt(l,e.parse):e.type?t=Gi(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function gt(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function Gi(l,e,n){switch(e){case String:return gt(l,Mi);case Number:return gt(l,Pi);case Date:return gt(l,function(t){return Di(t,{properties:n.properties})});case Boolean:return gt(l,Fi);default:if(typeof e=="function")return gt(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function ao(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=ao(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function Ui(l){for(var e=[],n=0;n<l.length;){var t=ao(l,",",n),r=Ei(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var Wi=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function Vi(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function On(l){"@babel/helpers - typeof";return On=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},On(l)}function fo(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;On(o)==="object"&&(o=Object.keys(l[r])[0],s=fo(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var Xi=["schema","map"];function dr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function rn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dr(Object(n),!0).forEach(function(t){Yi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Yi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Ji(l,e){if(l==null)return{};var n=Ki(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function Ki(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function Qi(l,e,n){var t=n.schema,r=n.map,o=Ji(n,Xi);!t&&r&&(t=fo(r));var s=ki(l,e,rn(rn({},o),{},{properties:t||o.properties}));return t?Hi(s.data,t,rn(rn({},o),{},{properties:s.properties})):s}function Zi(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return ds(l).then(function(n){return Qi(n,xo,e)})}function xi(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>ea(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function ea(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function ta(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Zi(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=ho(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Ln=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function na(l){return ut(["get","intervention_type"],{area:ot.area,route:ot.route,crossing:ot.crossing,other:ot.other},"white")}function ra(l){return[["Areas",ot.area],["Routes",ot.route],["Crossings",ot.crossing],["Other",ot.other]]}const K={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},Be=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function An(){let[l,e]=uo(Ln,K.funding_programmes);return[ut(["get","funding_programme"],l,"grey"),e]}function la(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=uo(l,K.current_milestone);return[ut(["get","current_milestone"],e,"grey"),n]}function uo(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function oa(l){let e,n;return e=new Fn({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function sa(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new dt({props:u}),U.push(()=>W(e,"value",s)),e.$on("change",l[2]),r=new ze({props:{label:"Legend",$$slots:{default:[oa]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],V(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function ia(l,e,n){let t;Oe(l,Pn,a=>n(4,t=a));let r="fundingProgramme",[o,s]=An();function u(){let a;r=="interventionType"?(a=na(),n(1,s=ra())):r=="fundingProgramme"?n(1,[a,s]=An(),s):r=="currentMilestone"&&n(1,[a,s]=la(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class aa extends Y{constructor(e){super(),J(this,e,ia,sa,X,{})}}const vt=xt({type:"FeatureCollection",features:[],schemes:{}}),an=xt(new Map),hr=xt(!0),yt=xt(""),St=xt("");function fa(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ua(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ca(l){let e,n,t,r,o,s;return t=new bt({props:{$$slots:{default:[ua]},$$scope:{ctx:l}}}),t.$on("click",l[16]),{c(){e=C("input"),n=T(),b(t.$$.fragment),H(e,"type","text"),H(e,"class","govuk-input govuk-input--width-10"),H(e,"id","filterInterventionText")},m(u,i){$(u,e,i),Ye(e,l[6]),$(u,n,i),v(t,u,i),r=!0,o||(s=ft(e,"input",l[15]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&Ye(e,u[6]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function $a(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pa(l){let e,n,t,r,o,s;return t=new bt({props:{$$slots:{default:[$a]},$$scope:{ctx:l}}}),t.$on("click",l[18]),{c(){e=C("input"),n=T(),b(t.$$.fragment),H(e,"type","text"),H(e,"class","govuk-input govuk-input--width-10"),H(e,"id","filterSchemeText")},m(u,i){$(u,e,i),Ye(e,l[5]),$(u,n,i),v(t,u,i),r=!0,o||(s=ft(e,"input",l[17]),o=!0)},p(u,i){i&32&&e.value!==u[5]&&Ye(e,u[5]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){d(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),w(t,u),o=!1,s()}}}function ma(l){let e,n,t,r,o,s,u,i,a,f,c,_,g,y,L,S,N;e=new bt({props:{$$slots:{default:[fa]},$$scope:{ctx:l}}}),e.$on("click",l[11]);function j(O){l[12](O)}let I={label:"Authority or region",choices:l[7],emptyOption:!0};l[2]!==void 0&&(I.value=l[2]),t=new dt({props:I}),U.push(()=>W(t,"value",j));function M(O){l[13](O)}let A={label:"Funding programme",choices:l[8],emptyOption:!0};l[3]!==void 0&&(A.value=l[3]),s=new dt({props:A}),U.push(()=>W(s,"value",M));function P(O){l[14](O)}let F={label:"Current milestone",choices:l[9],emptyOption:!0};return l[4]!==void 0&&(F.value=l[4]),a=new dt({props:F}),U.push(()=>W(a,"value",P)),_=new vn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[ca]},$$scope:{ctx:l}}}),y=new vn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[pa]},$$scope:{ctx:l}}}),S=new aa({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),o=T(),b(s.$$.fragment),i=T(),b(a.$$.fragment),c=T(),b(_.$$.fragment),g=T(),b(y.$$.fragment),L=T(),b(S.$$.fragment)},m(O,D){v(e,O,D),$(O,n,D),v(t,O,D),$(O,o,D),v(s,O,D),$(O,i,D),v(a,O,D),$(O,c,D),v(_,O,D),$(O,g,D),v(y,O,D),$(O,L,D),v(S,O,D),N=!0},p(O,D){const G={};D&16777216&&(G.$$scope={dirty:D,ctx:O}),e.$set(G);const R={};D&128&&(R.choices=O[7]),!r&&D&4&&(r=!0,R.value=O[2],V(()=>r=!1)),t.$set(R);const E={};D&256&&(E.choices=O[8]),!u&&D&8&&(u=!0,E.value=O[3],V(()=>u=!1)),s.$set(E);const z={};D&512&&(z.choices=O[9]),!f&&D&16&&(f=!0,z.value=O[4],V(()=>f=!1)),a.$set(z);const Q={};D&16777280&&(Q.$$scope={dirty:D,ctx:O}),_.$set(Q);const re={};D&16777248&&(re.$$scope={dirty:D,ctx:O}),y.$set(re)},i(O){N||(m(e.$$.fragment,O),m(t.$$.fragment,O),m(s.$$.fragment,O),m(a.$$.fragment,O),m(_.$$.fragment,O),m(y.$$.fragment,O),m(S.$$.fragment,O),N=!0)},o(O){d(e.$$.fragment,O),d(t.$$.fragment,O),d(s.$$.fragment,O),d(a.$$.fragment,O),d(_.$$.fragment,O),d(y.$$.fragment,O),d(S.$$.fragment,O),N=!1},d(O){O&&(p(n),p(o),p(i),p(c),p(g),p(L)),w(e,O),w(t,O),w(s,O),w(a,O),w(_,O),w(y,O),w(S,O)}}}function _a(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[10].route.toLocaleString()+"",s,u,i=l[10].area.toLocaleString()+"",a,f,c=l[10].crossing.toLocaleString()+"",_,g,y=l[10].other.toLocaleString()+"",L,S,N=br(l[10].totalLength).toFixed(1)+"",j,I;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),_=k(c),g=k(" crossings, "),L=k(y),S=k(`
    other, with total LineString length of `),j=k(N),I=k(" miles)")},m(M,A){$(M,e,A),$(M,t,A),$(M,r,A),$(M,s,A),$(M,u,A),$(M,a,A),$(M,f,A),$(M,_,A),$(M,g,A),$(M,L,A),$(M,S,A),$(M,j,A),$(M,I,A)},p(M,A){A&1&&n!==(n=M[0].size.toLocaleString()+"")&&B(t,n),A&1024&&o!==(o=M[10].route.toLocaleString()+"")&&B(s,o),A&1024&&i!==(i=M[10].area.toLocaleString()+"")&&B(a,i),A&1024&&c!==(c=M[10].crossing.toLocaleString()+"")&&B(_,c),A&1024&&y!==(y=M[10].other.toLocaleString()+"")&&B(L,y),A&1024&&N!==(N=br(M[10].totalLength).toFixed(1)+"")&&B(j,N)},d(M){M&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(_),p(g),p(L),p(S),p(j),p(I))}}}function ga(l){let e,n,t;function r(s){l[19](s)}let o={$$slots:{default:[_a]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&16778241&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function da(l){let e,n,t,r;return e=new ze({props:{label:"Filters",$$slots:{default:[ma]},$$scope:{ctx:l}}}),t=new Ke({props:{small:!0,$$slots:{default:[ga]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&16778236&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16778243&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function br(l){return l*621371e-9}function ha(l,e,n){let t,r,o,s;Oe(l,St,R=>n(5,t=R)),Oe(l,yt,R=>n(6,r=R)),Oe(l,vt,R=>n(20,o=R)),Oe(l,an,R=>n(21,s=R));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],_=new Set(Ln.slice(0,-1)),g="",y=[],L="",S={area:0,route:0,crossing:0,other:0,totalLength:0};Mn(()=>{var Q,re,oe;let R=new Set,E=new Set,z=new Set;for(let me of s.values())(Q=me.browse)!=null&&Q.authority_or_region&&R.add(me.browse.authority_or_region),(re=me.browse)!=null&&re.funding_programme&&E.add(me.browse.funding_programme),(oe=me.browse)!=null&&oe.current_milestone&&z.add(me.browse.current_milestone);n(7,a=Array.from(R.entries())),a.sort(),n(8,c=Ln.map(me=>[me,me])),n(9,y=Array.from(z.entries())),y.sort()});function N(R,E,z,Q,re){let oe=R.toLowerCase(),me=E.toLowerCase(),Ne=ie=>{var Me,ge,de,be,_e,ye;if(oe&&!((Me=ie.properties.name)!=null&&Me.toLowerCase().includes(oe))&&!((ge=ie.properties.description)!=null&&ge.toLowerCase().includes(oe)))return!1;if(me||z||Q||re){let pe=s.get(ie.properties.scheme_reference);if(z&&((de=pe.browse)==null?void 0:de.authority_or_region)!=z||Q&&Q!=="Other"&&((be=pe.browse)==null?void 0:be.funding_programme)!=Q||Q==="Other"&&_.has(((_e=pe.browse)==null?void 0:_e.funding_programme)??"")||re&&((ye=pe.browse)==null?void 0:ye.current_milestone)!=re||me&&!pe.scheme_reference.toLowerCase().includes(me)&&!(pe.scheme_name??"").toLowerCase().includes(me))return!1}return!0};n(0,u=new Set(o.features.filter(Ne).map(ie=>ie.properties.scheme_reference))),n(10,S={area:0,route:0,crossing:0,other:0,totalLength:0});let Pe=ie=>{var Me,ge;return!(!u.has(ie.properties.scheme_reference)||oe&&!((Me=ie.properties.name)!=null&&Me.toLowerCase().includes(oe))&&!((ge=ie.properties.description)!=null&&ge.toLowerCase().includes(oe)))};for(let ie of o.features)Pe(ie)?(delete ie.properties.hide_while_editing,n(10,S[ie.properties.intervention_type]++,S),ie.geometry.type=="LineString"&&ie.properties.length_meters&&n(10,S.totalLength+=ie.properties.length_meters,S)):ie.properties.hide_while_editing=!0;vt.set(o),n(10,S)}function j(){n(2,f=""),n(3,g=""),n(4,L=""),at(yt,r="",r),at(St,t="",t)}function I(R){f=R,n(2,f)}function M(R){g=R,n(3,g)}function A(R){L=R,n(4,L)}function P(){r=this.value,yt.set(r)}const F=()=>at(yt,r="",r);function O(){t=this.value,St.set(t)}const D=()=>at(St,t="",t);function G(R){i=R,n(1,i)}return l.$$set=R=>{"schemesToBeShown"in R&&n(0,u=R.schemesToBeShown),"show"in R&&n(1,i=R.show)},l.$$.update=()=>{l.$$.dirty&124&&N(r,t,f,g,L)},[u,i,f,g,L,t,r,a,c,y,S,j,I,M,A,P,F,O,D,G]}class ba extends Y{constructor(e){super(),J(this,e,ha,da,X,{schemesToBeShown:0,show:1})}}function va(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wa(l){let e,n,t,r,o;return t=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[va]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("License: "),b(t.$$.fragment),r=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),h(e,n),v(t,e,null),h(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){d(t.$$.fragment,s),o=!1},d(s){s&&p(e),w(t)}}}class Ie extends Y{constructor(e){super(),J(this,e,null,wa,X,{})}}function vr(l,e,n){const t=l.slice();return t[2]=e[n],t}function wr(l,e,n){const t=l.slice();return t[5]=e[n],t}function kr(l){let e,n;return{c(){e=C("span"),n=k(`
    `),Ce(e,"background",l[5]),Ce(e,"width","100%"),Ce(e,"border","1px solid black")},m(t,r){$(t,e,r),h(e,n)},p(t,r){r&1&&Ce(e,"background",t[5])},d(t){t&&p(e)}}}function yr(l){let e,n=l[2]+"",t;return{c(){e=C("span"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&B(t,n)},d(r){r&&p(e)}}}function ka(l){let e,n,t,r=qe(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=kr(wr(l,r,i));let s=qe(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=yr(vr(l,s,i));return{c(){e=C("div");for(let i=0;i<o.length;i+=1)o[i].c();n=T(),t=C("div");for(let i=0;i<u.length;i+=1)u[i].c();Ce(e,"display","flex"),Ce(t,"display","flex"),Ce(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=qe(i[0]);let f;for(f=0;f<r.length;f+=1){const c=wr(i,r,f);o[f]?o[f].p(c,a):(o[f]=kr(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=qe(i[1]);let f;for(f=0;f<s.length;f+=1){const c=vr(i,s,f);u[f]?u[f].p(c,a):(u[f]=yr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:ne,o:ne,d(i){i&&(p(e),p(n),p(t)),ht(o,i),ht(u,i)}}}function ya(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ge extends Y{constructor(e){super(),J(this,e,ya,ka,X,{colorScale:0,limits:1})}}function Sr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function Sa(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ca(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ta(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Oa(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function La(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Ca]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ta]},$$scope:{ctx:l}}}),f=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Oa]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("Car/van availability data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=T(),i=C("p"),a=k("License: "),b(f.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(g,y){$(g,e,y),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(g,u,y),$(g,i,y),h(i,a),v(f,i,null),h(i,c),_=!0},p(g,y){const L={};y&65536&&(L.$$scope={dirty:y,ctx:g}),t.$set(L);const S={};y&65536&&(S.$$scope={dirty:y,ctx:g}),o.$set(S);const N={};y&65536&&(N.$$scope={dirty:y,ctx:g}),f.$set(N)},i(g){_||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),_=!0)},o(g){d(t.$$.fragment,g),d(o.$$.fragment,g),d(f.$$.fragment,g),_=!1},d(g){g&&(p(e),p(u),p(i)),w(t),w(o),w(f)}}}function Aa(l){let e,n,t;return n=new $e({props:{$$slots:{default:[La]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Cr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ia(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Na(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pa(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ma(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fa(l){let e,n,t,r,o,s,u,i,a,f,c,_,g,y;return o=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Na]},$$scope:{ctx:l}}}),u=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Pa]},$$scope:{ctx:l}}}),_=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Ma]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=T(),t=C("p"),r=k("Car/van availability data is from the 2021 census, via "),b(o.$$.fragment),s=k(". Output area boundaries from "),b(u.$$.fragment),i=k("."),a=T(),f=C("p"),c=k("License: "),b(_.$$.fragment),g=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(L,S){$(L,e,S),$(L,n,S),$(L,t,S),h(t,r),v(o,t,null),h(t,s),v(u,t,null),h(t,i),$(L,a,S),$(L,f,S),h(f,c),v(_,f,null),h(f,g),y=!0},p(L,S){const N={};S&65536&&(N.$$scope={dirty:S,ctx:L}),o.$set(N);const j={};S&65536&&(j.$$scope={dirty:S,ctx:L}),u.$set(j);const I={};S&65536&&(I.$$scope={dirty:S,ctx:L}),_.$set(I)},i(L){y||(m(o.$$.fragment,L),m(u.$$.fragment,L),m(_.$$.fragment,L),y=!0)},o(L){d(o.$$.fragment,L),d(u.$$.fragment,L),d(_.$$.fragment,L),y=!1},d(L){L&&(p(e),p(n),p(t),p(a),p(f)),w(o),w(u),w(_)}}}function Da(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Fa]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Tr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ea(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ja(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ra(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ba(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ja]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Ra]},$$scope:{ctx:l}}}),i=new Ie({}),{c(){e=C("p"),n=k("Population density data is from the 2021 census, via "),b(t.$$.fragment),r=k(". Output area boundaries from "),b(o.$$.fragment),s=k("."),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&65536&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function za(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Ba]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Or(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[4],limits:l[6]().map(Ya)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",n=T(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function qa(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=C("p"),n=k("There are "),t=C("b"),o=k(r),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){$(a,e,f),h(e,n),h(e,t),h(t,o),h(e,s),h(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&B(o,r),f&8192&&u!==(u=a[14]+"")&&B(i,u)},d(a){a&&p(e)}}}function Ha(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=C("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=C("b"),i=k(u),a=k(`
          cars`)},m(f,c){$(f,e,c),h(e,n),h(e,r),h(e,o),h(e,s),h(s,i),h(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&B(r,t),c&8200&&u!==(u=f[15]+"")&&B(i,u)},d(f){f&&p(e)}}}function Ga(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=C("p"),n=C("b"),r=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){$(f,e,c),h(e,n),h(n,r),h(n,o),h(e,s),h(e,i),h(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&B(r,t),c&8192&&u!==(u=f[14]+"")&&B(i,u)},d(f){f&&p(e)}}}function Ua(l){Sr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?Ga:o[3]=="average_cars_per_household"?Ha:qa}let t=n(l),r=t(l);return{c(){r.c(),e=De()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){Sr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function Wa(l){let e,n;return e=new ae({props:{$$slots:{default:[Ua,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Va(l){let e,n,t,r;const o=[q(Ze),{sourceLayer:Ze},{paint:{"fill-color":Se(["get",l[3]],l[6](),l[4]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Wa]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",l[5]);const u=[q(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Te({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&88?te(o,[f&0&&se(q(Ze)),f&0&&{sourceLayer:Ze},f&88&&{paint:{"fill-color":Se(["get",a[3]],a[6](),a[4]),"fill-opacity":Z(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&8?te(u,[f&0&&se(q(`${Ze}-outline`)),f&0&&{sourceLayer:Ze},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Xa(l){let e,n,t,r,o,s,u,i,a,f,c,_,g,y;function L(O){l[7](O)}let S={$$slots:{right:[Aa],default:[Sa]},$$scope:{ctx:l}};l[0]!==void 0&&(S.checked=l[0]),e=new le({props:S}),U.push(()=>W(e,"checked",L)),e.$on("change",l[8]);let N=l[3]=="percent_households_with_car"&&Cr(l);function j(O){l[9](O)}let I={$$slots:{right:[Da],default:[Ia]},$$scope:{ctx:l}};l[1]!==void 0&&(I.checked=l[1]),o=new le({props:I}),U.push(()=>W(o,"checked",j)),o.$on("change",l[10]);let M=l[3]=="average_cars_per_household"&&Tr(l);function A(O){l[11](O)}let P={$$slots:{right:[za],default:[Ea]},$$scope:{ctx:l}};l[2]!==void 0&&(P.checked=l[2]),a=new le({props:P}),U.push(()=>W(a,"checked",A)),a.$on("change",l[12]);let F=l[3]=="population_density"&&Or(l);return g=new ke({props:{url:`pmtiles://${he()}/v1/${Ze}.pmtiles`,$$slots:{default:[Va]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),N&&N.c(),r=T(),b(o.$$.fragment),u=T(),M&&M.c(),i=T(),b(a.$$.fragment),c=T(),F&&F.c(),_=T(),b(g.$$.fragment)},m(O,D){v(e,O,D),$(O,t,D),N&&N.m(O,D),$(O,r,D),v(o,O,D),$(O,u,D),M&&M.m(O,D),$(O,i,D),v(a,O,D),$(O,c,D),F&&F.m(O,D),$(O,_,D),v(g,O,D),y=!0},p(O,[D]){const G={};D&65536&&(G.$$scope={dirty:D,ctx:O}),!n&&D&1&&(n=!0,G.checked=O[0],V(()=>n=!1)),e.$set(G),O[3]=="percent_households_with_car"?N?(N.p(O,D),D&8&&m(N,1)):(N=Cr(O),N.c(),m(N,1),N.m(r.parentNode,r)):N&&(ue(),d(N,1,1,()=>{N=null}),ce());const R={};D&65536&&(R.$$scope={dirty:D,ctx:O}),!s&&D&2&&(s=!0,R.checked=O[1],V(()=>s=!1)),o.$set(R),O[3]=="average_cars_per_household"?M?(M.p(O,D),D&8&&m(M,1)):(M=Tr(O),M.c(),m(M,1),M.m(i.parentNode,i)):M&&(ue(),d(M,1,1,()=>{M=null}),ce());const E={};D&65536&&(E.$$scope={dirty:D,ctx:O}),!f&&D&4&&(f=!0,E.checked=O[2],V(()=>f=!1)),a.$set(E),O[3]=="population_density"?F?(F.p(O,D),D&8&&m(F,1)):(F=Or(O),F.c(),m(F,1),F.m(_.parentNode,_)):F&&(ue(),d(F,1,1,()=>{F=null}),ce());const z={};D&65544&&(z.$$scope={dirty:D,ctx:O}),g.$set(z)},i(O){y||(m(e.$$.fragment,O),m(N),m(o.$$.fragment,O),m(M),m(a.$$.fragment,O),m(F),m(g.$$.fragment,O),y=!0)},o(O){d(e.$$.fragment,O),d(N),d(o.$$.fragment,O),d(M),d(a.$$.fragment,O),d(F),d(g.$$.fragment,O),y=!1},d(O){O&&(p(t),p(r),p(u),p(i),p(c),p(_)),w(e,O),N&&N.d(O),w(o,O),M&&M.d(O),w(a,O),F&&F.d(O),w(g,O)}}}let Ze="census_output_areas";const Ya=l=>l.toLocaleString();function Ja(l,e,n){let t=K.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(S){let N=S.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${N}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${N}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(S){r=S,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function _(S){o=S,n(1,o)}const g=()=>{n(0,r=!1),n(2,s=!1)};function y(S){s=S,n(2,s)}const L=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,_,g,y,L]}class Ka extends Y{constructor(e){super(),J(this,e,Ja,Xa,X,{})}}function Qa(l){let e,n,t;return e=new Le({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Za(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Za]},$$scope:{ctx:l}}}),s=new Ie({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of December 2022."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function ef(l){let e,n,t;return n=new $e({props:{$$slots:{default:[xa]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function tf(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function nf(l){let e,n;return e=new ae({props:{$$slots:{default:[tf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rf(l){let e,n,t,r;const o=[q(Ct),{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[nf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",of);const u=[q(`${Ct}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Te({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&se(q(Ct)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&se(q(`${Ct}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function lf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[ef],default:[Qa]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new wt({props:{data:`${he()}/v1/${Ct}.geojson`,$$slots:{default:[rf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Ct="combined_authorities";function of(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function sf(l,e,n){let t=K.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class af extends Y{constructor(e){super(),J(this,e,sf,lf,X,{})}}function ff(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uf(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[uf]},$$scope:{ctx:l}}}),o=new x({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[cf]},$$scope:{ctx:l}}}),i=new Ie({}),{c(){e=C("p"),n=k("The 2019 English IMD scores come from "),b(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),b(o.$$.fragment),s=k("."),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function pf(l){let e,n,t;return n=new $e({props:{$$slots:{default:[$f]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Lr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mf(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,_=l[4].rank.toLocaleString()+"",g,y;return{c(){e=C("p"),t=k(n),r=k(` has an IMD score of
        `),o=C("b"),u=k(s),i=T(),a=C("p"),f=k("Rank: "),c=C("b"),g=k(_),y=k(`
        / 32,844 LSOAs`)},m(L,S){$(L,e,S),h(e,t),h(e,r),h(e,o),h(o,u),$(L,i,S),$(L,a,S),h(a,f),h(a,c),h(c,g),h(a,y)},p(L,S){S&16&&n!==(n=L[4].LSOA11CD+"")&&B(t,n),S&16&&s!==(s=L[4].score+"")&&B(u,s),S&16&&_!==(_=L[4].rank.toLocaleString()+"")&&B(g,_)},d(L){L&&(p(e),p(i),p(a))}}}function _f(l){let e,n;return e=new ae({props:{$$slots:{default:[mf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gf(l){let e,n,t,r;const o=[q(xe),{sourceLayer:xe},{paint:{"fill-color":Se(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[_f]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s});const u=[q(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Te({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&se(q(xe)),f&0&&{sourceLayer:xe},f&6&&{paint:{"fill-color":Se(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Z(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?te(u,[f&0&&se(q(`${xe}-outline`)),f&0&&{sourceLayer:xe},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function df(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[pf],default:[ff]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Lr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${xe}.pmtiles`,$$slots:{default:[gf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],V(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Lr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(ue(),d(a,1,1,()=>{a=null}),ce());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let xe="imd";function hf(l,e,n){let t=K.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class bf extends Y{constructor(e){super(),J(this,e,hf,df,X,{})}}function vf(l){let e,n,t;return e=new Le({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function wf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kf(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[wf]},$$scope:{ctx:l}}}),s=new Ie({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of January 2024."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function yf(l){let e,n,t;return n=new $e({props:{$$slots:{default:[kf]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Sf(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Cf(l){let e,n;return e=new ae({props:{$$slots:{default:[Sf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Tf(l){let e,n,t,r;const o=[q(Tt),{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Cf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",Lf);const u=[q(`${Tt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Te({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&se(q(Tt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&se(q(`${Tt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Of(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[yf],default:[vf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new wt({props:{data:`${he()}/v1/${Tt}.geojson`,$$slots:{default:[Tf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Tt="local_authority_districts";function Lf(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function Af(l,e,n){let t=K.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class If extends Y{constructor(e){super(),J(this,e,Af,Of,X,{})}}function Nf(l){let e,n,t;return e=new Le({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Pf(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Mf(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ff(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Df(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ef(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jf(l){let e,n,t,r,o,s,u,i,a,f,c,_,g,y,L,S,N,j,I,M,A,P;return t=new x({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[Pf]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[Mf]},$$scope:{ctx:l}}}),u=new x({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[Ff]},$$scope:{ctx:l}}}),g=new x({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[Df]},$$scope:{ctx:l}}}),j=new x({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Ef]},$$scope:{ctx:l}}}),A=new Ie({}),{c(){e=C("p"),n=k("LPAs may be a "),b(t.$$.fragment),r=k(", "),b(o.$$.fragment),s=k("y, or "),b(u.$$.fragment),i=k("."),a=T(),f=C("p"),c=C("strong"),_=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),b(g.$$.fragment),y=k(" to get more details."),L=T(),S=C("p"),N=k("Data from ONS Geography via "),b(j.$$.fragment),I=k(", as of November 2022."),M=T(),b(A.$$.fragment)},m(F,O){$(F,e,O),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),v(u,e,null),h(e,i),$(F,a,O),$(F,f,O),h(f,c),h(c,_),v(g,c,null),h(c,y),$(F,L,O),$(F,S,O),h(S,N),v(j,S,null),h(S,I),$(F,M,O),v(A,F,O),P=!0},p(F,O){const D={};O&16&&(D.$$scope={dirty:O,ctx:F}),t.$set(D);const G={};O&16&&(G.$$scope={dirty:O,ctx:F}),o.$set(G);const R={};O&16&&(R.$$scope={dirty:O,ctx:F}),u.$set(R);const E={};O&16&&(E.$$scope={dirty:O,ctx:F}),g.$set(E);const z={};O&16&&(z.$$scope={dirty:O,ctx:F}),j.$set(z)},i(F){P||(m(t.$$.fragment,F),m(o.$$.fragment,F),m(u.$$.fragment,F),m(g.$$.fragment,F),m(j.$$.fragment,F),m(A.$$.fragment,F),P=!0)},o(F){d(t.$$.fragment,F),d(o.$$.fragment,F),d(u.$$.fragment,F),d(g.$$.fragment,F),d(j.$$.fragment,F),d(A.$$.fragment,F),P=!1},d(F){F&&(p(e),p(a),p(f),p(L),p(S),p(M)),w(t),w(o),w(u),w(g),w(j),w(A,F)}}}function Rf(l){let e,n,t;return n=new $e({props:{$$slots:{default:[jf]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Bf(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function zf(l){let e,n;return e=new ae({props:{$$slots:{default:[Bf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qf(l){let e,n,t,r;const o=[q(et),{sourceLayer:et},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[zf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s});const u=[q(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Te({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&se(q(et)),f&0&&{sourceLayer:et},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&se(q(`${et}-outline`)),f&0&&{sourceLayer:et},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Hf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Rf],default:[Nf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${et}.pmtiles`,$$slots:{default:[qf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let et="local_planning_authorities";function Gf(l,e,n){let t=K.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Uf extends Y{constructor(e){super(),J(this,e,Gf,Hf,X,{})}}function Wf(l){let e,n,t;return e=new Le({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Vf(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xf(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Vf]},$$scope:{ctx:l}}}),s=new Ie({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Yf(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Xf]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Jf(l){let e,n=l[3].Name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&B(t,n)},d(r){r&&p(e)}}}function Kf(l){let e,n;return e=new ae({props:{$$slots:{default:[Jf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qf(l){let e,n,t,r;const o=[q(tt),{sourceLayer:tt},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Kf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",xf);const u=[q(`${tt}-outline`),{sourceLayer:tt},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Te({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&se(q(tt)),f&0&&{sourceLayer:tt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&se(q(`${tt}-outline`)),f&0&&{sourceLayer:tt},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Zf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Yf],default:[Wf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${tt}.pmtiles`,$$slots:{default:[Qf]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let tt="parliamentary_constituencies";function xf(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function eu(l,e,n){let t=K.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class tu extends Y{constructor(e){super(),J(this,e,eu,Zf,X,{})}}function nu(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ru(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lu(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[ru]},$$scope:{ctx:l}}}),i=new Ie({}),{c(){e=C("p"),n=k("Most layers show air quality data from "),b(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        gm
        `),o=C("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),h(e,o),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(i,f)}}}function ou(l){let e,n,t;return n=new $e({props:{$$slots:{default:[lu]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Ar(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,_,g,y,L,S,N,j;function I(A){l[7](A)}let M={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return l[0]!==void 0&&(M.value=l[0]),e=new dt({props:M}),U.push(()=>W(e,"value",I)),{c(){b(e.$$.fragment),t=T(),r=C("p"),s=k(o),u=T(),i=C("div"),a=C("label"),f=k(`Opacity
      `),c=C("input"),_=T(),g=C("img"),H(c,"type","range"),H(c,"min","0"),H(c,"max","100"),on(g.src,y=l[5](l[0]))||H(g,"src",y),H(g,"width",150),H(g,"alt",L=`Legend for ${l[0]} layer`)},m(A,P){v(e,A,P),$(A,t,P),$(A,r,P),h(r,s),$(A,u,P),$(A,i,P),h(i,a),h(a,f),h(a,c),Ye(c,l[2]),$(A,_,P),$(A,g,P),S=!0,N||(j=[ft(c,"change",l[8]),ft(c,"input",l[8])],N=!0)},p(A,P){const F={};!n&&P&1&&(n=!0,F.value=A[0],V(()=>n=!1)),e.$set(F),(!S||P&1)&&o!==(o=A[3](A[0])+"")&&B(s,o),P&4&&Ye(c,A[2]),(!S||P&1&&!on(g.src,y=A[5](A[0])))&&H(g,"src",y),(!S||P&1&&L!==(L=`Legend for ${A[0]} layer`))&&H(g,"alt",L)},i(A){S||(m(e.$$.fragment,A),S=!0)},o(A){d(e.$$.fragment,A),S=!1},d(A){A&&(p(t),p(r),p(u),p(i),p(_),p(g)),w(e,A),N=!1,Ul(j)}}}function su(l){let e,n;const t=[q("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Mo({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function iu(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={$$slots:{right:[ou],default:[nu]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&Ar(l);return o=new Xo({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[su]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&2048&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],V(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=Ar(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(ue(),d(a,1,1,()=>{a=null}),ce());const g={};c&1&&(g.tiles=[f[4](f[0])]),c&2054&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}function au(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let L=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${L}`}function f(y){let L=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${L}`}function c(y){r=y,n(1,r)}function _(y){s=y,n(0,s)}function g(){o=Vt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s])},[s,r,o,i,a,f,c,_,g]}class fu extends Y{constructor(e){super(),J(this,e,au,iu,X,{})}}function uu(l){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cu(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $u(l){let e,n,t,r,o,s,u,i,a;return o=new x({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[cu]},$$scope:{ctx:l}}}),i=new Ie({}),{c(){e=C("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=T(),t=C("p"),r=k("Data from June 2019, produced by "),b(o.$$.fragment),s=k(". See there for methodology details"),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(i,f)}}}function pu(l){let e,n,t;return n=new $e({props:{$$slots:{default:[$u]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Ir(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["55","65","75",">"]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mu(l){let e,n=l[3].noiseclass+"",t,r,o=Nr(l[3].noiseclass)+"",s,u;return{c(){e=C("p"),t=k(n),r=k(" dB ("),s=k(o),u=k(")")},m(i,a){$(i,e,a),h(e,t),h(e,r),h(e,s),h(e,u)},p(i,a){a&8&&n!==(n=i[3].noiseclass+"")&&B(t,n),a&8&&o!==(o=Nr(i[3].noiseclass)+"")&&B(s,o)},d(i){i&&p(e)}}}function _u(l){let e,n;return e=new ae({props:{$$slots:{default:[mu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gu(l){let e,n;const t=[q(Ot),{sourceLayer:Ot},{paint:{"fill-color":ut(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][0],"65.0-69.9":l[1][1],"70.0-74.9":l[1][1],">=75.0":l[1][2]},"red"),"fill-opacity":Z(.5,.8)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[_u]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new He({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&se(q(Ot)),s&0&&{sourceLayer:Ot},s&2&&{paint:{"fill-color":ut(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":Z(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function du(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[pu],default:[uu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Ir(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Ot}.pmtiles`,$$slots:{default:[gu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],V(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Ir(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(ue(),d(a,1,1,()=>{a=null}),ce());const g={};c&17&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Ot="road_noise";function Nr(l){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[l]}function hu(l,e,n){let t=[K.sequential_low_to_high[0],K.sequential_low_to_high[2],K.sequential_low_to_high[4]],r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class bu extends Y{constructor(e){super(),J(this,e,hu,du,X,{})}}function vu(l){let e,n,t;return e=new Le({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Wards`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function wu(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ku(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[wu]},$$scope:{ctx:l}}}),s=new Ie({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),r=k(", as of May 2023."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function yu(l){let e,n,t;return n=new $e({props:{$$slots:{default:[ku]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Su(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&B(t,n)},d(r){r&&p(e)}}}function Cu(l){let e,n;return e=new ae({props:{$$slots:{default:[Su,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Tu(l){let e,n,t,r;const o=[q(nt),{sourceLayer:nt},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Cu]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",Lu);const u=[q(`${nt}-outline`),{sourceLayer:nt},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Te({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&se(q(nt)),f&0&&{sourceLayer:nt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&3?te(u,[f&0&&se(q(`${nt}-outline`)),f&0&&{sourceLayer:nt},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function Ou(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[yu],default:[vu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${nt}.pmtiles`,$$slots:{default:[Tu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let nt="wards";function Lu(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function Au(l,e,n){let t=K.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Iu extends Y{constructor(e){super(),J(this,e,Au,Ou,X,{})}}function Nu(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pu(l){let e,n,t,r;return t=new x({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[Nu]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("License: "),b(t.$$.fragment)},m(o,s){$(o,e,s),h(e,n),v(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&p(e),w(t)}}}class Qe extends Y{constructor(e){super(),J(this,e,null,Pu,X,{})}}function Mu(l){let e,n,t;return e=new Le({props:{color:K.bus_route_with_lane}}),{c(){b(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Fu(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Du(l){let e,n,t,r,o,s,u,i,a;return o=new x({props:{href:"https://gtfs.org",$$slots:{default:[Fu]},$$scope:{ctx:l}}}),i=new Qe({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=T(),t=C("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),b(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),h(t,r),v(o,t,null),h(t,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&8&&(_.$$scope={dirty:c,ctx:f}),o.$set(_)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),w(o),w(i,f)}}}function Eu(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Du]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ju(l){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ru(l){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bu(l){let e;function n(o,s){return o[2].has_bus_lane?Ru:ju}let t=n(l),r=t(l);return{c(){r.c(),e=De()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function zu(l){let e,n;return e=new ae({props:{$$slots:{default:[Bu,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function qu(l){let e,n;const t=[q(Lt),{sourceLayer:Lt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],K.bus_route_with_lane,K.bus_route_without_lane],"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[zu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Te({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&se(q(Lt)),s&0&&{sourceLayer:Lt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Hu(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Eu],default:[Mu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Lt}.pmtiles`,$$slots:{default:[qu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Lt="bus_routes";function Gu(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Uu extends Y{constructor(e){super(),J(this,e,Gu,Hu,X,{})}}function Pr(l){const e=ec(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function Mr(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function Wu(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vu(l){let e,n,t,r,o,s,u,i;return u=new Qe({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=T(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=T(),o=C("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=T(),b(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),v(u,a,f),i=!0},p:ne,i(a){i||(m(u.$$.fragment,a),i=!0)},o(a){d(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),w(u,a)}}}function Xu(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Vu]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Fr(l){let e,n,t;return n=new Ke({props:{$$slots:{default:[Ju]},$$scope:{ctx:l}}}),{c(){e=C("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Yu(l){let e,n,t=l[9]+"",r,o,s;return e=new Le({props:{color:l[10]}}),{c(){b(e.$$.fragment),n=T(),r=k(t),o=T()},m(u,i){v(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:ne,i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function Dr(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[Yu]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function Ju(l){let e,n,t=qe(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Dr(Mr(l,t,s));const o=s=>d(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=De()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=qe(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Mr(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Dr(a),r[i].c(),m(r[i],1),r[i].m(e.parentNode,e))}for(ue(),i=t.length;i<r.length;i+=1)o(i);ce()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)d(r[u]);n=!1},d(s){s&&p(e),ht(r,s)}}}function Ku(l){Pr(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,_,g=l[8]+"",y;return{c(){e=C("h2"),t=k(n),r=T(),o=C("p"),s=k("Direction: "),u=C("b"),a=T(),f=C("p"),c=k("Width: "),_=C("b"),y=k(g)},m(L,S){$(L,e,S),h(e,t),$(L,r,S),$(L,o,S),h(o,s),h(o,u),u.innerHTML=i,$(L,a,S),$(L,f,S),h(f,c),h(f,_),h(_,y)},p(L,S){Pr(L),S&32&&n!==(n=L[6]+"")&&B(t,n),S&32&&i!==(i=L[7]+"")&&(u.innerHTML=i),S&32&&g!==(g=L[8]+"")&&B(y,g)},d(L){L&&(p(e),p(r),p(o),p(a),p(f))}}}function Qu(l){let e,n;return e=new ae({props:{$$slots:{default:[Ku,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Zu(l){let e,n;const t=[q(At),{sourceLayer:At},{paint:{"line-color":ut(["get","kind"],{track:K.cycle_paths.track,lane:K.cycle_paths.lane,shared_use_segregated:K.cycle_paths.shared_use_segregated,shared_use_unsegregated:K.cycle_paths.shared_use_unsegregated},"red"),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Er(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[Qu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Te({props:r}),e.$on("click",tc),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&se(q(At)),s&0&&{sourceLayer:At},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Er(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function xu(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Xu],default:[Wu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Fr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${At}.pmtiles`,$$slots:{default:[Zu]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&8192&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],V(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Fr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(ue(),d(a,1,1,()=>{a=null}),ce());const g={};c&8195&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let At="cycle_paths";function ec(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function tc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Er(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function nc(l,e,n){let t=[["track","Separated tracks",K.cycle_paths.track],["lane","Unprotected lanes",K.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",K.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",K.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class rc extends Y{constructor(e){super(),J(this,e,nc,xu,X,{})}}function lc(l){let e,n,t;return e=new Le({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function oc(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sc(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[oc]},$$scope:{ctx:l}}}),s=new Ie({}),{c(){e=C("p"),n=k("Data from the "),b(t.$$.fragment),r=k(", as of September 2021."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function ic(l){let e,n,t;return n=new $e({props:{$$slots:{default:[sc]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function ac(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function fc(l){let e,n;return e=new ae({props:{$$slots:{default:[ac,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function uc(l){let e,n;const t=[q(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[fc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Te({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&se(q(It)),s&0&&{sourceLayer:It},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function cc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[ic],default:[lc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${It}.pmtiles`,$$slots:{default:[uc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let It="mrn";function $c(l,e,n){let t=K.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class pc extends Y{constructor(e){super(),J(this,e,$c,cc,X,{})}}function mc(l){let e,n,t;return e=new Le({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  Strategic Road Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function _c(l){let e;return{c(){e=k(`OS Open Roads
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gc(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[_c]},$$scope:{ctx:l}}}),s=new Ie({}),{c(){e=C("p"),n=k("Data from "),b(t.$$.fragment),r=k(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function dc(l){let e,n,t;return n=new $e({props:{$$slots:{default:[gc]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function hc(l){let e,n=(l[3].name??"Unknown SRN road")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown SRN road")+"")&&B(t,n)},d(r){r&&p(e)}}}function bc(l){let e,n;return e=new ae({props:{$$slots:{default:[hc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function vc(l){let e,n;const t=[q(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[bc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Te({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&se(q(Nt)),s&0&&{sourceLayer:Nt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function wc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[dc],default:[mc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Nt}.pmtiles`,$$slots:{default:[vc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Nt="srn";function kc(l,e,n){let t=K.srn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class yc extends Y{constructor(e){super(),J(this,e,kc,wc,X,{})}}function Sc(l){let e,n,t;return e=new Le({props:{color:l[1]}}),{c(){b(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Cc(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tc(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Cc]},$$scope:{ctx:l}}}),s=new Ie({}),{c(){e=C("p"),n=k("Data from Sustrans about the "),b(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function Oc(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Tc]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function jr(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=C("li"),n=k("Description: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&B(o,r)},d(s){s&&p(e)}}}function Rr(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=C("li"),n=k("Is greenway: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&B(o,r)},d(s){s&&p(e)}}}function Br(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=C("li"),n=k("Route type: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&B(o,r)},d(s){s&&p(e)}}}function zr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=C("li"),n=k("Route number: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&B(o,r)},d(s){s&&p(e)}}}function qr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=C("li"),n=k("Route Category: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&B(o,r)},d(s){s&&p(e)}}}function Hr(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=C("li"),n=k("Open Status: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&B(o,r)},d(s){s&&p(e)}}}function Gr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=C("li"),n=k("Surface: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&B(o,r)},d(s){s&&p(e)}}}function Ur(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=C("li"),n=k("Quality: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&B(o,r)},d(s){s&&p(e)}}}function Wr(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=C("li"),n=k("Road Class: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&B(o,r)},d(s){s&&p(e)}}}function Lc(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&jr(l),c=l[3].Greenway&&Rr(l),_=l[3].RouteType&&Br(l),g=l[3].RouteNo&&zr(l),y=l[3].RouteCat&&qr(l),L=l[3].OpenStatus&&Hr(l),S=l[3].Surface&&Gr(l),N=l[3].Quality&&Ur(l),j=l[3].RoadClass&&Wr(l);return{c(){e=C("ul"),f&&f.c(),n=T(),c&&c.c(),t=T(),_&&_.c(),r=T(),g&&g.c(),o=T(),y&&y.c(),s=T(),L&&L.c(),u=T(),S&&S.c(),i=T(),N&&N.c(),a=T(),j&&j.c()},m(I,M){$(I,e,M),f&&f.m(e,null),h(e,n),c&&c.m(e,null),h(e,t),_&&_.m(e,null),h(e,r),g&&g.m(e,null),h(e,o),y&&y.m(e,null),h(e,s),L&&L.m(e,null),h(e,u),S&&S.m(e,null),h(e,i),N&&N.m(e,null),h(e,a),j&&j.m(e,null)},p(I,M){I[3].Desc_?f?f.p(I,M):(f=jr(I),f.c(),f.m(e,n)):f&&(f.d(1),f=null),I[3].Greenway?c?c.p(I,M):(c=Rr(I),c.c(),c.m(e,t)):c&&(c.d(1),c=null),I[3].RouteType?_?_.p(I,M):(_=Br(I),_.c(),_.m(e,r)):_&&(_.d(1),_=null),I[3].RouteNo?g?g.p(I,M):(g=zr(I),g.c(),g.m(e,o)):g&&(g.d(1),g=null),I[3].RouteCat?y?y.p(I,M):(y=qr(I),y.c(),y.m(e,s)):y&&(y.d(1),y=null),I[3].OpenStatus?L?L.p(I,M):(L=Hr(I),L.c(),L.m(e,u)):L&&(L.d(1),L=null),I[3].Surface?S?S.p(I,M):(S=Gr(I),S.c(),S.m(e,i)):S&&(S.d(1),S=null),I[3].Quality?N?N.p(I,M):(N=Ur(I),N.c(),N.m(e,a)):N&&(N.d(1),N=null),I[3].RoadClass?j?j.p(I,M):(j=Wr(I),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},d(I){I&&p(e),f&&f.d(),c&&c.d(),_&&_.d(),g&&g.d(),y&&y.d(),L&&L.d(),S&&S.d(),N&&N.d(),j&&j.d()}}}function Ac(l){let e,n;return e=new ae({props:{$$slots:{default:[Lc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ic(l){let e,n;const t=[q(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Ac]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Te({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&se(q(Pt)),s&0&&{sourceLayer:Pt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Nc(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Oc],default:[Sc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Pt}.pmtiles`,$$slots:{default:[Ic]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Pt="national_cycle_network";function Pc(l,e,n){let t=K.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Mc extends Y{constructor(e){super(),J(this,e,Pc,Nc,X,{})}}function Fc(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Dc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ec(l){let e,n,t,r,o,s,u,i,a;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Dc]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=T(),t=C("p"),t.textContent="Data valid as of 1 January, 2024",r=T(),o=C("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),w(u)}}}function jc(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Ec]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Vr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Rc(l){let e,n,t,r=l[4].side+"",o,s,u,i,a,f=l[4].average+"",c,_,g,y,L,S,N=l[4].minimum+"",j,I;return{c(){e=C("p"),n=k("Side of the road: "),t=C("b"),o=k(r),s=T(),u=C("p"),i=k("Average width: "),a=C("b"),c=k(f),_=k(`
        meters`),g=T(),y=C("p"),L=k("Minimum width: "),S=C("b"),j=k(N),I=k(`
        meters`)},m(M,A){$(M,e,A),h(e,n),h(e,t),h(t,o),$(M,s,A),$(M,u,A),h(u,i),h(u,a),h(a,c),h(u,_),$(M,g,A),$(M,y,A),h(y,L),h(y,S),h(S,j),h(y,I)},p(M,A){A&16&&r!==(r=M[4].side+"")&&B(o,r),A&16&&f!==(f=M[4].average+"")&&B(c,f),A&16&&N!==(N=M[4].minimum+"")&&B(j,N)},d(M){M&&(p(e),p(s),p(u),p(g),p(y))}}}function Bc(l){let e,n;return e=new ae({props:{$$slots:{default:[Rc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zc(l){let e,n;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Se(["get","average"],l[2],l[1]),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Bc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Te({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&se(q(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&6&&{paint:{"line-color":Se(["get","average"],o[2],o[1]),"line-width":Be,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function qc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[jc],default:[Fc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Vr(l);return o=new ke({props:{url:`pmtiles://${fn()}/v1/${Mt}.pmtiles`,$$slots:{default:[zc]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],V(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Vr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(ue(),d(a,1,1,()=>{a=null}),ce());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Mt="pavement_widths";function Hc(l,e,n){let t=K.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Gc extends Y{constructor(e){super(),J(this,e,Hc,qc,X,{})}}function Uc(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wc(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vc(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xc(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new x({props:{href:"https://www.pct.bike",$$slots:{default:[Wc]},$$scope:{ctx:l}}}),a=new x({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[Vc]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=T(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=T(),o=C("p"),s=k("See "),b(u.$$.fragment),i=k(" and "),b(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(_,g){$(_,e,g),$(_,n,g),$(_,t,g),$(_,r,g),$(_,o,g),h(o,s),v(u,o,null),h(o,i),v(a,o,null),h(o,f),c=!0},p(_,g){const y={};g&1024&&(y.$$scope={dirty:g,ctx:_}),u.$set(y);const L={};g&1024&&(L.$$scope={dirty:g,ctx:_}),a.$set(L)},i(_){c||(m(u.$$.fragment,_),m(a.$$.fragment,_),c=!0)},o(_){d(u.$$.fragment,_),d(a.$$.fragment,_),c=!1},d(_){_&&(p(e),p(n),p(t),p(r),p(o)),w(u),w(a)}}}function Yc(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Xc]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Xr(l){let e,n,t,r,o,s,u,i;e=new Ge({props:{colorScale:l[3],limits:l[4]}});function a(g){l[7](g)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new Wl({props:f}),U.push(()=>W(t,"value",a));function c(g){l[8](g)}let _={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(_.value=l[1]),s=new dt({props:_}),U.push(()=>W(s,"value",c)),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),o=T(),b(s.$$.fragment)},m(g,y){v(e,g,y),$(g,n,y),v(t,g,y),$(g,o,y),v(s,g,y),i=!0},p(g,y){const L={};!r&&y&1&&(r=!0,L.value=g[0],V(()=>r=!1)),t.$set(L);const S={};!u&&y&2&&(u=!0,S.value=g[1],V(()=>u=!1)),s.$set(S)},i(g){i||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(s.$$.fragment,g),i=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(s.$$.fragment,g),i=!1},d(g){g&&(p(n),p(o)),w(e,g),w(t,g),w(s,g)}}}function Jc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Ut(!1),t=De(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function Kc(l){let e,n;return e=new ae({props:{$$slots:{default:[Jc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qc(l){let e,n;const t=[q(lt),{sourceLayer:lt},{paint:{"line-color":Se(["get",l[1]],l[4],l[3]),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[2]&&l[0]==lt?"visible":"none"}}];let r={$$slots:{default:[Kc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Te({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&se(q(lt)),s&0&&{sourceLayer:lt},s&26&&{paint:{"line-color":Se(["get",o[1]],o[4],o[3]),"line-width":Be,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==lt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Zc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Ut(!1),t=De(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function xc(l){let e,n;return e=new ae({props:{$$slots:{default:[Zc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function e$(l){let e,n;const t=[q($t),{sourceLayer:$t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Se(["get",l[1]],l[4],l[3]),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[2]&&l[0]==$t?"visible":"none"}}];let r={$$slots:{default:[xc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Te({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&se(q($t)),s&0&&{sourceLayer:$t},t[2],t[3],s&26&&{paint:{"line-color":Se(["get",o[1]],o[4],o[3]),"line-width":Be,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==$t?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function t$(l){let e,n,t,r,o,s,u,i;function a(_){l[6](_)}let f={$$slots:{right:[Yc],default:[Uc]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),U.push(()=>W(e,"checked",a));let c=l[2]&&Xr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${lt}.pmtiles`,$$slots:{default:[Qc]},$$scope:{ctx:l}}}),u=new ke({props:{url:`pmtiles://${he()}/v1/${$t}.pmtiles`,$$slots:{default:[e$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),c&&c.c(),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment)},m(_,g){v(e,_,g),$(_,t,g),c&&c.m(_,g),$(_,r,g),v(o,_,g),$(_,s,g),v(u,_,g),i=!0},p(_,[g]){const y={};g&1024&&(y.$$scope={dirty:g,ctx:_}),!n&&g&4&&(n=!0,y.checked=_[2],V(()=>n=!1)),e.$set(y),_[2]?c?(c.p(_,g),g&4&&m(c,1)):(c=Xr(_),c.c(),m(c,1),c.m(r.parentNode,r)):c&&(ue(),d(c,1,1,()=>{c=null}),ce());const L={};g&1031&&(L.$$scope={dirty:g,ctx:_}),o.$set(L);const S={};g&1031&&(S.$$scope={dirty:g,ctx:_}),u.$set(S)},i(_){i||(m(e.$$.fragment,_),m(c),m(o.$$.fragment,_),m(u.$$.fragment,_),i=!0)},o(_){d(e.$$.fragment,_),d(c),d(o.$$.fragment,_),d(u.$$.fragment,_),i=!1},d(_){_&&(p(t),p(r),p(s)),w(e,_),c&&c.d(_),w(o,_),w(u,_)}}}let lt="pct_commute",$t="pct_school";function n$(l,e,n){let t=K.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=lt,s="baseline",u=!1;function i(_){let g=_.baseline,y=_.gov_target,L=_.go_dutch,S=`<h2>Trip purpose: ${o==lt?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${L.toLocaleString()}</b></p>`;else{let N=(y/g).toFixed(1),j=(L/g).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${N}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${L.toLocaleString()} (<b>${j}x</b> of baseline)</p>`}return S}function a(_){u=_,n(2,u)}function f(_){o=_,n(0,o)}function c(_){s=_,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class r$ extends Y{constructor(e){super(),J(this,e,n$,t$,X,{})}}function l$(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function o$(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function s$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function i$(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new x({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[o$]},$$scope:{ctx:l}}}),f=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[s$]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("The average speed data is collected over a six-month period by "),b(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=T(),s=C("p"),s.textContent="Data valid as of 1 September, 2023",u=T(),i=C("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(f.$$.fragment),c=k(".")},m(g,y){$(g,e,y),h(e,n),v(t,e,null),h(e,r),$(g,o,y),$(g,s,y),$(g,u,y),$(g,i,y),h(i,a),v(f,i,null),h(i,c),_=!0},p(g,y){const L={};y&256&&(L.$$scope={dirty:y,ctx:g}),t.$set(L);const S={};y&256&&(S.$$scope={dirty:y,ctx:g}),f.$set(S)},i(g){_||(m(t.$$.fragment,g),m(f.$$.fragment,g),_=!0)},o(g){d(t.$$.fragment,g),d(f.$$.fragment,g),_=!1},d(g){g&&(p(e),p(o),p(s),p(u),p(i)),w(t),w(f)}}}function a$(l){let e,n,t;return n=new $e({props:{$$slots:{default:[i$]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Yr(l){let e,n,t,r,o;e=new Ge({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new Wl({props:u}),U.push(()=>W(t,"value",s)),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],V(()=>r=!1)),t.$set(f)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function f$(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,_=l[4][l[7].highest_description]+"",g,y;return{c(){e=C("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=T(),u=C("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),g=k(_),y=k(")")},m(L,S){$(L,e,S),h(e,n),h(e,r),h(e,o),$(L,s,S),$(L,u,S),h(u,i),h(u,f),h(u,c),h(u,g),h(u,y)},p(L,S){S&128&&t!==(t=L[7].indicative_mph+"")&&B(r,t),S&128&&a!==(a=L[7].highest_mph+"")&&B(f,a),S&128&&_!==(_=L[4][L[7].highest_description]+"")&&B(g,_)},d(L){L&&(p(e),p(s),p(u))}}}function u$(l){let e,n;return e=new ae({props:{$$slots:{default:[f$,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function c$(l){let e,n;const t=[q(Ft),{sourceLayer:Ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Se(["get",l[0]],l[3],l[2]),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[u$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Te({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&15?te(t,[s&0&&se(q(Ft)),s&0&&{sourceLayer:Ft},t[2],t[3],s&13&&{paint:{"line-color":Se(["get",o[0]],o[3],o[2]),"line-width":Be,"line-opacity":Z(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function $$(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={$$slots:{right:[a$],default:[l$]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&Yr(l);return o=new ke({props:{url:`pmtiles://${fn()}/v1/${Ft}.pmtiles`,$$slots:{default:[c$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&256&&(_.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,_.checked=f[1],V(()=>n=!1)),e.$set(_),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=Yr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(ue(),d(a,1,1,()=>{a=null}),ce());const g={};c&259&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Ft="road_speeds";function p$(l,e,n){let t=K.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class m$ extends Y{constructor(e){super(),J(this,e,p$,$$,X,{})}}function _$(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function g$(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function d$(l){let e,n,t,r,o,s,u,i,a;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[g$]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=T(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",r=T(),o=C("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),b(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),h(o,s),v(u,o,null),h(o,i),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),u.$set(_)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){d(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),w(u)}}}function h$(l){let e,n,t;return n=new $e({props:{$$slots:{default:[d$]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Jr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function b$(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",_,g;return{c(){e=C("p"),n=k("Average width: "),t=C("b"),o=k(r),s=k(`
        meters`),u=T(),i=C("p"),a=k("Minimum width: "),f=C("b"),_=k(c),g=k(`
        meters`)},m(y,L){$(y,e,L),h(e,n),h(e,t),h(t,o),h(e,s),$(y,u,L),$(y,i,L),h(i,a),h(i,f),h(f,_),h(i,g)},p(y,L){L&16&&r!==(r=y[4].average+"")&&B(o,r),L&16&&c!==(c=y[4].minimum+"")&&B(_,c)},d(y){y&&(p(e),p(u),p(i))}}}function v$(l){let e,n;return e=new ae({props:{$$slots:{default:[b$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function w$(l){let e,n;const t=[q(Dt),{sourceLayer:Dt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":Se(["get","average"],l[2],l[1]),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[v$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Te({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&se(q(Dt)),s&0&&{sourceLayer:Dt},t[2],t[3],s&6&&{paint:{"line-color":Se(["get","average"],o[2],o[1]),"line-width":Be,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function k$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[h$],default:[_$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Jr(l);return o=new ke({props:{url:`pmtiles://${fn()}/v1/${Dt}.pmtiles`,$$slots:{default:[w$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],V(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Jr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(ue(),d(a,1,1,()=>{a=null}),ce());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Dt="road_widths";function y$(l,e,n){let t=K.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class S$ extends Y{constructor(e){super(),J(this,e,y$,k$,X,{})}}function C$(l){let e,n,t;return e=new Le({props:{color:K.trams}}),{c(){b(e.$$.fragment),n=k(`
  Trams`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function T$(l){let e,n,t,r;return t=new Qe({}),{c(){e=C("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=T(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function O$(l){let e,n,t;return n=new $e({props:{$$slots:{default:[T$]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function L$(l){let e,n;const t=[q(Et),{sourceLayer:Et},{paint:{"line-color":K.trams,"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Te({props:r}),e.$on("click",I$),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&se(q(Et)),s&0&&{sourceLayer:Et},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function A$(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[O$],default:[C$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${Et}.pmtiles`,$$slots:{default:[L$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let Et="trams";function I$(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function N$(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class P$ extends Y{constructor(e){super(),J(this,e,N$,A$,X,{})}}function M$(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function F$(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function D$(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[F$]},$$scope:{ctx:l}}}),i=new Ie({}),{c(){e=C("p"),n=k("Data from the "),b(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=T(),s=C("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),$(f,o,c),$(f,s,c),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),t.$set(_)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),w(t),w(i,f)}}}function E$(l){let e,n,t;return n=new $e({props:{$$slots:{default:[D$]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Kr(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){e=C("p"),e.textContent="Peak hourly frequency:",n=T(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function j$(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,_,g,y,L,S=l[4].peak_description+"",N,j,I,M,A,P=l[4].total+"",F,O,D=l[4].total_description+"",G,R;return{c(){e=C("p"),n=k("Stop name: "),t=C("b"),o=k(r),s=T(),u=C("p"),i=k("Peak: "),a=C("b"),c=k(f),_=k(`
        buses during the busiest hour of any day`),g=T(),y=C("p"),L=k("The peak hour is "),N=k(S),j=T(),I=C("p"),M=k("Total buses per day: "),A=C("b"),F=k(P),O=k(`
        (for `),G=k(D),R=k(", the busiest day of the week)")},m(E,z){$(E,e,z),h(e,n),h(e,t),h(t,o),$(E,s,z),$(E,u,z),h(u,i),h(u,a),h(a,c),h(u,_),$(E,g,z),$(E,y,z),h(y,L),h(y,N),$(E,j,z),$(E,I,z),h(I,M),h(I,A),h(A,F),h(I,O),h(I,G),h(I,R)},p(E,z){z&16&&r!==(r=E[4].stop_name+"")&&B(o,r),z&16&&f!==(f=E[4].peak+"")&&B(c,f),z&16&&S!==(S=E[4].peak_description+"")&&B(N,S),z&16&&P!==(P=E[4].total+"")&&B(F,P),z&16&&D!==(D=E[4].total_description+"")&&B(G,D)},d(E){E&&(p(e),p(s),p(u),p(g),p(y),p(j),p(I))}}}function R$(l){let e,n;return e=new ae({props:{$$slots:{default:[j$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function B$(l){let e,n;const t=[q(jt),{sourceLayer:jt},{paint:{"circle-color":Se(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[R$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ct({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&se(q(jt)),s&0&&{sourceLayer:jt},s&6&&{paint:{"circle-color":Se(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function z$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[E$],default:[M$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Kr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${jt}.pmtiles`,$$slots:{default:[B$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],V(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Kr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(ue(),d(a,1,1,()=>{a=null}),ce());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let jt="bus_stops";function q$(l,e,n){let t=K.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class H$ extends Y{constructor(e){super(),J(this,e,q$,z$,X,{})}}function G$(l){let e,n,t;return{c(){e=C("input"),H(e,"class","govuk-file-upload"),H(e,"id","load-criticals"),H(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=ft(e,"change",l[5]),n=!0)},p:ne,d(r){r&&p(e),l[7](null),n=!1,t()}}}function Qr(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[W$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function U$(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Le({props:{color:Rt}}),{c(){b(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(u,i){v(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&B(r,t)},i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),w(e,u)}}}function W$(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[U$]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){b(e.$$.fragment)},m(s,u){v(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){d(e.$$.fragment,s),t=!1},d(s){w(e,s)}}}function V$(l){let e,n,t,r,o,s;e=new vn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[G$]},$$scope:{ctx:l}}}),t=new Vl({props:{errorMessage:l[3]}});let u=l[2]>0&&Qr(l);return{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),u&&u.c(),o=De()},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&m(u,1)):(u=Qr(i),u.c(),m(u,1),u.m(o.parentNode,o)):u&&(ue(),d(u,1,1,()=>{u=null}),ce())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(u),s=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(u),s=!1},d(i){i&&(p(n),p(r),p(o)),w(e,i),w(t,i),u&&u.d(i)}}}function X$(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,_,g,y,L=l[10].notes+"",S,N,j,I,M,A,P,F=l[10].id+"",O,D,G,R,E,z=(l[10].inspector??"???")+"",Q,re,oe,me=l[10].submission_time+"",Ne,Pe,ie,Me,ge,de=l[10].scheme_reference+"",be,_e,ye,pe=l[10].current_design_stage+"",ve;return{c(){e=C("div"),n=C("h2"),r=k(t),o=T(),s=C("p"),u=C("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=T(),_=C("p"),g=C("u"),g.textContent="Notes",y=k(`
          : `),S=k(L),N=T(),j=C("hr"),I=T(),M=C("p"),A=k("Critical issue ID: "),P=C("b"),O=k(F),D=T(),G=C("p"),R=k("Submitted by "),E=C("b"),Q=k(z),re=k(`
          at
          `),oe=C("b"),Ne=k(me),Pe=T(),ie=C("p"),Me=k("For scheme "),ge=C("b"),be=k(de),_e=k(`
          in stage
          `),ye=C("b"),ve=k(pe),Ce(e,"max-width","30vw")},m(Fe,Ee){$(Fe,e,Ee),h(e,n),h(n,r),h(e,o),h(e,s),h(s,u),h(s,i),h(s,f),h(e,c),h(e,_),h(_,g),h(_,y),h(_,S),h(e,N),h(e,j),h(e,I),h(e,M),h(M,A),h(M,P),h(P,O),h(e,D),h(e,G),h(G,R),h(G,E),h(E,Q),h(G,re),h(G,oe),h(oe,Ne),h(e,Pe),h(e,ie),h(ie,Me),h(ie,ge),h(ge,be),h(ie,_e),h(ie,ye),h(ye,ve)},p(Fe,Ee){Ee&1024&&t!==(t=Fe[10].critical_type+"")&&B(r,t),Ee&1024&&a!==(a=Fe[10].location_description+"")&&B(f,a),Ee&1024&&L!==(L=Fe[10].notes+"")&&B(S,L),Ee&1024&&F!==(F=Fe[10].id+"")&&B(O,F),Ee&1024&&z!==(z=(Fe[10].inspector??"???")+"")&&B(Q,z),Ee&1024&&me!==(me=Fe[10].submission_time+"")&&B(Ne,me),Ee&1024&&de!==(de=Fe[10].scheme_reference+"")&&B(be,de),Ee&1024&&pe!==(pe=Fe[10].current_design_stage+"")&&B(ve,pe)},d(Fe){Fe&&p(e)}}}function Y$(l){let e,n;return e=new ae({props:{$$slots:{default:[X$,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function J$(l){let e,n,t,r,o,s;const u=[q("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":Rt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let g=0;g<u.length;g+=1)i=ee(i,u[g]);e=new ct({props:i}),e.$on("click",l[6]);const a=[q("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let g=0;g<a.length;g+=1)f=ee(f,a[g]);t=new un({props:f});const c=[q("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":Rt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let _={$$slots:{default:[Y$]},$$scope:{ctx:l}};for(let g=0;g<c.length;g+=1)_=ee(_,c[g]);return o=new ct({props:_}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment)},m(g,y){v(e,g,y),$(g,n,y),v(t,g,y),$(g,r,y),v(o,g,y),s=!0},p(g,y){const L=y&2?te(u,[u[0],u[1],y&0&&{paint:{"circle-color":Rt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:g[1]?"visible":"none"}},u[4]]):{};e.$set(L);const S=y&2?te(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:g[1]?"visible":"none"}}]):{};t.$set(S);const N=y&2?te(c,[c[0],c[1],c[2],c[3],y&0&&{paint:{"circle-color":Rt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:g[1]?"visible":"none"}}]):{};y&2048&&(N.$$scope={dirty:y,ctx:g}),o.$set(N)},i(g){s||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(o.$$.fragment,g),s=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),s=!1},d(g){g&&(p(n),p(r)),w(e,g),w(t,g),w(o,g)}}}function K$(l){let e,n,t,r;return e=new ze({props:{label:"Critical Issues",$$slots:{default:[V$]},$$scope:{ctx:l}}}),t=new wt({props:{id:co,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[J$]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}let co="criticals",Rt="red";function Q$(l,e,n){let t;Oe(l,Pn,g=>n(9,t=g));let r,o=!0,s=0,u="",i=bo();async function a(g){try{n(4,i=await ta(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}async function f(g){let y=await t.getSource(co).getClusterExpansionZoom(g.detail.features[0].properties.cluster_id);t.easeTo({center:g.detail.features[0].geometry.coordinates,zoom:y})}function c(g){U[g?"unshift":"push"](()=>{r=g,n(0,r)})}function _(g){o=g,n(1,o)}return[r,o,s,u,i,a,f,c,_]}class Z$ extends Y{constructor(e){super(),J(this,e,Q$,K$,X,{})}}function x$(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ep(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function tp(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[ep]},$$scope:{ctx:l}}}),s=new Qe({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function np(l){let e,n,t;return n=new $e({props:{$$slots:{default:[tp]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Zr(l){let e,n;return e=new Fn({props:{rows:l[1]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function rp(l){let e,n=xr(l[3])+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&8&&n!==(n=xr(r[3])+"")&&B(t,n)},d(r){r&&p(e)}}}function lp(l){let e,n;return e=new ae({props:{$$slots:{default:[rp,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function op(l){let e,n;const t=[q(Bt),{sourceLayer:Bt},{paint:{"circle-color":ut(["get","crossing"],{traffic_signals:K.signalized_crossing},K.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[lp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ct({props:r}),e.$on("click",ip),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&se(q(Bt)),s&0&&{sourceLayer:Bt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function sp(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[np],default:[x$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Zr(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Bt}.pmtiles`,$$slots:{default:[op]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],V(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Zr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(ue(),d(a,1,1,()=>{a=null}),ce());const g={};c&17&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Bt="crossings";function xr(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function ip(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function ap(l,e,n){let t=!1,r=[["Signalized",K.signalized_crossing],["Other",K.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class fp extends Y{constructor(e){super(),J(this,e,ap,sp,X,{})}}function up(l){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cp(l){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $p(l){let e,n,t,r,o,s,u,i,a,f,c,_,g;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[cp]},$$scope:{ctx:l}}}),f=new Ie({}),_=new Qe({}),{c(){e=C("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=T(),t=C("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=T(),o=C("p"),s=k("This layer is built from "),b(u.$$.fragment),i=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=T(),b(f.$$.fragment),c=T(),b(_.$$.fragment)},m(y,L){$(y,e,L),$(y,n,L),$(y,t,L),$(y,r,L),$(y,o,L),h(o,s),v(u,o,null),h(o,i),$(y,a,L),v(f,y,L),$(y,c,L),v(_,y,L),g=!0},p(y,L){const S={};L&32&&(S.$$scope={dirty:L,ctx:y}),u.$set(S)},i(y){g||(m(u.$$.fragment,y),m(f.$$.fragment,y),m(_.$$.fragment,y),g=!0)},o(y){d(u.$$.fragment,y),d(f.$$.fragment,y),d(_.$$.fragment,y),g=!1},d(y){y&&(p(e),p(n),p(t),p(r),p(o),p(a),p(c)),w(u),w(f,y),w(_,y)}}}function pp(l){let e,n,t;return n=new $e({props:{$$slots:{default:[$p]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function el(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function mp(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=C("p"),n=k("Gradient: "),t=C("b"),o=k(r),s=k(`
        %`)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,i){i&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&B(o,r)},d(u){u&&p(e)}}}function _p(l){let e,n;return e=new ae({props:{$$slots:{default:[mp,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function gp(l){let e,n,t,r;const o=[q(rt),{sourceLayer:rt},{manageHoverState:!0},{paint:{"line-color":Se(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":Be,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[_p]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Te({props:s});const u=[q(rt+"_arrows"),{sourceLayer:rt},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new un({props:i}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&se(q(rt)),f&0&&{sourceLayer:rt},o[2],f&6&&{paint:{"line-color":Se(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Be,"line-opacity":Z(1,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const _=f&1?te(u,[f&0&&se(q(rt+"_arrows")),f&0&&{sourceLayer:rt},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(_)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),r=!1},d(a){a&&p(n),w(e,a),w(t,a)}}}function dp(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[pp],default:[up]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&el(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${rt}.pmtiles`,$$slots:{default:[gp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&32&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],V(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=el(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(ue(),d(a,1,1,()=>{a=null}),ce());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let rt="gradient";function hp(l,e,n){let t=K.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class bp extends Y{constructor(e){super(),J(this,e,hp,dp,X,{})}}function vp(l){let e,n,t;return{c(){e=C("img"),t=k(`
  Cycle parking`),on(e.src,n=vo)||H(e,"src",n),H(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function wp(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function kp(l){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function yp(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[wp]},$$scope:{ctx:l}}}),i=new x({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[kp]},$$scope:{ctx:l}}}),f=new Qe({}),{c(){e=C("p"),n=k("Cycle parking, according to "),b(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=T(),s=C("p"),u=k("Icon from "),b(i.$$.fragment),a=T(),b(f.$$.fragment)},m(_,g){$(_,e,g),h(e,n),v(t,e,null),h(e,r),$(_,o,g),$(_,s,g),h(s,u),v(i,s,null),$(_,a,g),v(f,_,g),c=!0},p(_,g){const y={};g&8&&(y.$$scope={dirty:g,ctx:_}),t.$set(y);const L={};g&8&&(L.$$scope={dirty:g,ctx:_}),i.$set(L)},i(_){c||(m(t.$$.fragment,_),m(i.$$.fragment,_),m(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(i.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(o),p(s),p(a)),w(t),w(i),w(f,_)}}}function Sp(l){let e,n,t;return n=new $e({props:{$$slots:{default:[yp]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Cp(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=C("p"),n=k("Capacity: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&B(o,r)},d(s){s&&p(e)}}}function Tp(l){let e,n;return e=new ae({props:{$$slots:{default:[Cp,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Op(l){let e,n;const t=[q(zt),{sourceLayer:zt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Tp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new un({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&se(q(zt)),s&0&&{sourceLayer:zt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Lp(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Sp],default:[vp]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${zt}.pmtiles`,$$slots:{default:[Op]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let zt="cycle_parking";function Ap(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Ip extends Y{constructor(e){super(),J(this,e,Ap,Lp,X,{})}}function Np(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Pp(l){let e,n,t,r;return t=new Qe({}),{c(){e=C("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=T(),b(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),v(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){d(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),w(t,o)}}}function Mp(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Pp]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function tl(l){let e,n,t;return n=new Ke({props:{$$slots:{default:[jp]},$$scope:{ctx:l}}}),{c(){e=C("div"),b(n.$$.fragment),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Fp(l){let e,n,t;return e=new Le({props:{color:K.education.schools}}),{c(){b(e.$$.fragment),n=k(`
        Schools`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Dp(l){let e,n,t;return e=new Le({props:{color:K.education.colleges}}),{c(){b(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function Ep(l){let e,n,t;return e=new Le({props:{color:K.education.universities}}),{c(){b(e.$$.fragment),n=k(`
        Universities`)},m(r,o){v(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){d(e.$$.fragment,r),t=!1},d(r){r&&p(n),w(e,r)}}}function jp(l){let e,n,t,r,o,s,u,i,a;function f(S){l[3](S)}let c={$$slots:{default:[Fp]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),U.push(()=>W(e,"checked",f));function _(S){l[4](S)}let g={$$slots:{default:[Dp]},$$scope:{ctx:l}};l[1].college!==void 0&&(g.checked=l[1].college),r=new le({props:g}),U.push(()=>W(r,"checked",_));function y(S){l[5](S)}let L={$$slots:{default:[Ep]},$$scope:{ctx:l}};return l[1].university!==void 0&&(L.checked=l[1].university),u=new le({props:L}),U.push(()=>W(u,"checked",y)),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment),s=T(),b(u.$$.fragment)},m(S,N){v(e,S,N),$(S,t,N),v(r,S,N),$(S,s,N),v(u,S,N),a=!0},p(S,N){const j={};N&128&&(j.$$scope={dirty:N,ctx:S}),!n&&N&2&&(n=!0,j.checked=S[1].school,V(()=>n=!1)),e.$set(j);const I={};N&128&&(I.$$scope={dirty:N,ctx:S}),!o&&N&2&&(o=!0,I.checked=S[1].college,V(()=>o=!1)),r.$set(I);const M={};N&128&&(M.$$scope={dirty:N,ctx:S}),!i&&N&2&&(i=!0,M.checked=S[1].university,V(()=>i=!1)),u.$set(M)},i(S){a||(m(e.$$.fragment,S),m(r.$$.fragment,S),m(u.$$.fragment,S),a=!0)},o(S){d(e.$$.fragment,S),d(r.$$.fragment,S),d(u.$$.fragment,S),a=!1},d(S){S&&(p(t),p(s)),w(e,S),w(r,S),w(u,S)}}}function Rp(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&B(t,n)},d(r){r&&p(e)}}}function Bp(l){let e,n;return e=new ae({props:{$$slots:{default:[Rp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zp(l){let e,n;const t=[q(qt),{sourceLayer:qt},{paint:{"fill-color":ut(["get","type"],{school:K.education.schools,college:K.education.colleges,university:K.education.universities},"grey"),"fill-opacity":Z(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:nl(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Bp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new He({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&se(q(qt)),s&0&&{sourceLayer:qt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:nl(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function qp(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[Mp],default:[Np]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&tl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${qt}.pmtiles`,$$slots:{default:[zp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&128&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],V(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=tl(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(ue(),d(a,1,1,()=>{a=null}),ce());const g={};c&131&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let qt="education";function nl(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function Hp(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class Gp extends Y{constructor(e){super(),J(this,e,Hp,qp,X,{})}}function Up(l){let e,n,t,r;return e=new Le({props:{color:l[4]}}),{c(){b(e.$$.fragment),n=T(),t=k(l[2])},m(o,s){v(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&B(t,o[2])},i(o){r||(m(e.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),w(e,o)}}}function Wp(l){let e;const n=l[5].default,t=Jt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&Kt(t,n,r,r[7],e?Zt(n,r[7],o,null):Qt(r[7]),null)},i(r){e||(m(t,r),e=!0)},o(r){d(t,r),e=!1},d(r){t&&t.d(r)}}}function Vp(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Wp]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function Xp(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&B(t,n)},d(r){r&&p(e)}}}function Yp(l){let e,n;return e=new ae({props:{$$slots:{default:[Xp,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jp(l){let e,n;const t=[q(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":Z(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Yp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new He({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&25?te(t,[s&1&&se(q(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Z(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Kp(l){let e,n,t,r,o;function s(i){l[6](i)}let u={$$slots:{right:[Vp],default:[Up]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new ke({props:{url:`pmtiles://${he()}/v1/${l[0]}.pmtiles`,$$slots:{default:[Jp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],V(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${he()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function Qp(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=K[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class $o extends Y{constructor(e){super(),J(this,e,Qp,Kp,X,{name:0,singularNoun:1,pluralNoun:2})}}function Zp(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xp(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Zp]},$$scope:{ctx:l}}}),s=new Qe({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=T(),b(s.$$.fragment)},m(i,a){$(i,e,a),h(e,n),v(t,e,null),h(e,r),$(i,o,a),v(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),w(t),w(s,i)}}}function em(l){let e,n;return e=new $o({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[xp]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class tm extends Y{constructor(e){super(),J(this,e,null,em,X,{})}}function nm(l){let e,n,t;return{c(){e=C("img"),t=k(`
  Railway Stations`),on(e.src,n=wo)||H(e,"src",n),H(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function rm(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lm(l){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function om(l){let e,n,t,r,o,s,u,i,a,f,c,_;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[rm]},$$scope:{ctx:l}}}),i=new x({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[lm]},$$scope:{ctx:l}}}),c=new Qe({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=T(),s=C("p"),u=k("Icon from "),b(i.$$.fragment),a=k(". (Note that not all stations shown are National Rail.)"),f=T(),b(c.$$.fragment)},m(g,y){$(g,e,y),h(e,n),v(t,e,null),h(e,r),$(g,o,y),$(g,s,y),h(s,u),v(i,s,null),h(s,a),$(g,f,y),v(c,g,y),_=!0},p(g,y){const L={};y&8&&(L.$$scope={dirty:y,ctx:g}),t.$set(L);const S={};y&8&&(S.$$scope={dirty:y,ctx:g}),i.$set(S)},i(g){_||(m(t.$$.fragment,g),m(i.$$.fragment,g),m(c.$$.fragment,g),_=!0)},o(g){d(t.$$.fragment,g),d(i.$$.fragment,g),d(c.$$.fragment,g),_=!1},d(g){g&&(p(e),p(o),p(s),p(f)),w(t),w(i),w(c,g)}}}function sm(l){let e,n,t;return n=new $e({props:{$$slots:{default:[om]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function im(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&B(t,n)},d(r){r&&p(e)}}}function am(l){let e,n;return e=new ae({props:{$$slots:{default:[im,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function fm(l){let e,n;const t=[q(In),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[am]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new un({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&se(q(In)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function um(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[sm],default:[nm]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new wt({props:{data:`${he()}/v1/${In}.geojson`,$$slots:{default:[fm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}let In="railway_stations";function cm(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class $m extends Y{constructor(e){super(),J(this,e,cm,um,X,{})}}function pm(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mm(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _m(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[pm]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[mm]},$$scope:{ctx:l}}}),i=new Qe({}),{c(){e=C("p"),n=k("This shows "),b(t.$$.fragment),r=k(" and "),b(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=T(),b(i.$$.fragment)},m(f,c){$(f,e,c),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(f,u,c),v(i,f,c),a=!0},p(f,c){const _={};c&1&&(_.$$scope={dirty:c,ctx:f}),t.$set(_);const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){d(t.$$.fragment,f),d(o.$$.fragment,f),d(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),w(t),w(o),w(i,f)}}}function gm(l){let e,n;return e=new $o({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[_m]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}class dm extends Y{constructor(e){super(),J(this,e,null,gm,X,{})}}function hm(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function bm(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function vm(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wm(l){let e,n,t,r,o,s,u,i,a,f,c,_,g,y,L,S,N,j,I,M,A,P,F;return t=new x({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[bm]},$$scope:{ctx:l}}}),N=new x({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[vm]},$$scope:{ctx:l}}}),P=new Ie({}),{c(){e=C("p"),n=k("This layer shows collisions recorded in the "),b(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=T(),s=C("ul"),u=C("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=T(),a=C("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=T(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,_=T(),g=C("li"),g.textContent='The "pedestrians" category also include mobility scooters',y=T(),L=C("li"),S=k("All limitations "),b(N.$$.fragment),j=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),I=T(),M=C("p"),M.textContent="You can click a point to open the full report, thanks to CycleStreets.",A=T(),b(P.$$.fragment)},m(O,D){$(O,e,D),h(e,n),v(t,e,null),h(e,r),$(O,o,D),$(O,s,D),h(s,u),h(s,i),h(s,a),h(s,f),h(s,c),h(s,_),h(s,g),h(s,y),h(s,L),h(L,S),v(N,L,null),h(L,j),$(O,I,D),$(O,M,D),$(O,A,D),v(P,O,D),F=!0},p(O,D){const G={};D&16777216&&(G.$$scope={dirty:D,ctx:O}),t.$set(G);const R={};D&16777216&&(R.$$scope={dirty:D,ctx:O}),N.$set(R)},i(O){F||(m(t.$$.fragment,O),m(N.$$.fragment,O),m(P.$$.fragment,O),F=!0)},o(O){d(t.$$.fragment,O),d(N.$$.fragment,O),d(P.$$.fragment,O),F=!1},d(O){O&&(p(e),p(o),p(s),p(I),p(M),p(A)),w(t),w(N),w(P,O)}}}function km(l){let e,n,t;return n=new $e({props:{$$slots:{default:[wm]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function rl(l){let e,n,t,r,o,s,u,i,a,f,c,_,g;return n=new Ke({props:{small:!0,$$slots:{default:[Om]},$$scope:{ctx:l}}}),f=new Fn({props:{rows:l[14]}}),{c(){e=C("div"),b(n.$$.fragment),t=T(),r=C("div"),o=k(`Filter years:
      `),s=C("input"),u=k(`
      -
      `),i=C("input"),a=T(),b(f.$$.fragment),H(s,"type","number"),H(s,"min",2017),H(s,"max",2022),H(s,"class","svelte-1ft65rw"),H(i,"type","number"),H(i,"min",2017),H(i,"max",2022),H(i,"class","svelte-1ft65rw"),Ce(e,"border","1px solid black"),Ce(e,"padding","8px")},m(y,L){$(y,e,L),v(n,e,null),h(e,t),h(e,r),h(r,o),h(r,s),Ye(s,l[4]),h(r,u),h(r,i),Ye(i,l[5]),h(e,a),v(f,e,null),c=!0,_||(g=[ft(s,"input",l[20]),ft(i,"input",l[21])],_=!0)},p(y,L){const S={};L&16777231&&(S.$$scope={dirty:L,ctx:y}),n.$set(S),L&16&&Vt(s.value)!==y[4]&&Ye(s,y[4]),L&32&&Vt(i.value)!==y[5]&&Ye(i,y[5])},i(y){c||(m(n.$$.fragment,y),m(f.$$.fragment,y),c=!0)},o(y){d(n.$$.fragment,y),d(f.$$.fragment,y),c=!1},d(y){y&&p(e),w(n),w(f),_=!1,Ul(g)}}}function ym(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Sm(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cm(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tm(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Om(l){let e,n,t,r,o,s,u,i,a,f,c,_;function g(A){l[16](A)}let y={$$slots:{default:[ym]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new le({props:y}),U.push(()=>W(e,"checked",g));function L(A){l[17](A)}let S={$$slots:{default:[Sm]},$$scope:{ctx:l}};l[1]!==void 0&&(S.checked=l[1]),r=new le({props:S}),U.push(()=>W(r,"checked",L));function N(A){l[18](A)}let j={$$slots:{default:[Cm]},$$scope:{ctx:l}};l[2]!==void 0&&(j.checked=l[2]),u=new le({props:j}),U.push(()=>W(u,"checked",N));function I(A){l[19](A)}let M={$$slots:{default:[Tm]},$$scope:{ctx:l}};return l[3]!==void 0&&(M.checked=l[3]),f=new le({props:M}),U.push(()=>W(f,"checked",I)),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment),s=T(),b(u.$$.fragment),a=T(),b(f.$$.fragment)},m(A,P){v(e,A,P),$(A,t,P),v(r,A,P),$(A,s,P),v(u,A,P),$(A,a,P),v(f,A,P),_=!0},p(A,P){const F={};P&16777216&&(F.$$scope={dirty:P,ctx:A}),!n&&P&1&&(n=!0,F.checked=A[0],V(()=>n=!1)),e.$set(F);const O={};P&16777216&&(O.$$scope={dirty:P,ctx:A}),!o&&P&2&&(o=!0,O.checked=A[1],V(()=>o=!1)),r.$set(O);const D={};P&16777216&&(D.$$scope={dirty:P,ctx:A}),!i&&P&4&&(i=!0,D.checked=A[2],V(()=>i=!1)),u.$set(D);const G={};P&16777216&&(G.$$scope={dirty:P,ctx:A}),!c&&P&8&&(c=!0,G.checked=A[3],V(()=>c=!1)),f.$set(G)},i(A){_||(m(e.$$.fragment,A),m(r.$$.fragment,A),m(u.$$.fragment,A),m(f.$$.fragment,A),_=!0)},o(A){d(e.$$.fragment,A),d(r.$$.fragment,A),d(u.$$.fragment,A),d(f.$$.fragment,A),_=!1},d(A){A&&(p(t),p(s),p(a)),w(e,A),w(r,A),w(u,A),w(f,A)}}}function ll(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=C("p"),n=k("Pedestrian location: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&B(o,r)},d(s){s&&p(e)}}}function ol(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=C("p"),n=k("Pedestrian movement: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&B(o,r)},d(s){s&&p(e)}}}function Lm(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,_,g,y,L,S=sl(l[23])+"",N,j,I,M,A,P=l[23].pedestrian_location&&ll(l),F=l[23].pedestrian_movement&&ol(l);return{c(){e=C("p"),n=k("Year: "),t=C("b"),o=k(r),s=T(),u=C("p"),i=k("Severity: "),a=C("b"),c=k(f),_=T(),g=C("p"),y=k("Casualties: "),L=C("b"),N=k(S),j=T(),P&&P.c(),I=T(),F&&F.c(),M=T(),A=C("p"),A.textContent="Click to open full report in CycleStreets"},m(O,D){$(O,e,D),h(e,n),h(e,t),h(t,o),$(O,s,D),$(O,u,D),h(u,i),h(u,a),h(a,c),$(O,_,D),$(O,g,D),h(g,y),h(g,L),h(L,N),$(O,j,D),P&&P.m(O,D),$(O,I,D),F&&F.m(O,D),$(O,M,D),$(O,A,D)},p(O,D){D&8388608&&r!==(r=O[23].year+"")&&B(o,r),D&8388608&&f!==(f=O[10][O[23].severity]+"")&&B(c,f),D&8388608&&S!==(S=sl(O[23])+"")&&B(N,S),O[23].pedestrian_location?P?P.p(O,D):(P=ll(O),P.c(),P.m(I.parentNode,I)):P&&(P.d(1),P=null),O[23].pedestrian_movement?F?F.p(O,D):(F=ol(O),F.c(),F.m(M.parentNode,M)):F&&(F.d(1),F=null)},d(O){O&&(p(e),p(s),p(u),p(_),p(g),p(j),p(I),p(M),p(A)),P&&P.d(O),F&&F.d(O)}}}function Am(l){let e,n;return e=new ae({props:{$$slots:{default:[Lm,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Im(l){let e,n;const t=[q(Ht),{sourceLayer:Ht},{paint:{"circle-color":Se(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Am]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ct({props:r}),e.$on("click",Pm),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&14528?te(t,[s&0&&se(q(Ht)),s&0&&{sourceLayer:Ht},s&14336&&{paint:{"circle-color":Se(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Nm(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={$$slots:{right:[km],default:[hm]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[6]&&rl(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Ht}.pmtiles`,$$slots:{default:[Im]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&16777216&&(_.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,_.checked=f[6],V(()=>n=!1)),e.$set(_),f[6]?a?(a.p(f,c),c&64&&m(a,1)):(a=rl(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(ue(),d(a,1,1,()=>{a=null}),ce());const g={};c&16777408&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Ht="stats19";function sl(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function Pm(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function Mm(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(G,R,E,z,Q,re){let oe=["any"];return o&&oe.push(["get","pedestrian"]),s&&oe.push(["get","cyclist"]),u&&oe.push(["get","horse_rider"]),i&&oe.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],oe]}let _={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},g={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},L=K.sequential_low_to_high[4],S=K.sequential_low_to_high[2],N=K.sequential_low_to_high[0],j=[["Fatal",L],["Serious",S],["Slight",N]];function I(G){r=G,n(6,r)}function M(G){o=G,n(0,o)}function A(G){s=G,n(1,s)}function P(G){u=G,n(2,u)}function F(G){i=G,n(3,i)}function O(){a=Vt(this.value),n(4,a)}function D(){f=Vt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,_,g,y,L,S,N,j,I,M,A,P,F,O,D]}class Fm extends Y{constructor(e){super(),J(this,e,Mm,Nm,X,{})}}function Dm(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Em(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jm(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rm(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new x({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[Em]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[jm]},$$scope:{ctx:l}}}),f=new Ie({}),{c(){e=C("p"),n=k("AADF (annual average daily flow) data from "),b(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),b(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=T(),i=C("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=T(),b(f.$$.fragment)},m(_,g){$(_,e,g),h(e,n),v(t,e,null),h(e,r),v(o,e,null),h(e,s),$(_,u,g),$(_,i,g),$(_,a,g),v(f,_,g),c=!0},p(_,g){const y={};g&64&&(y.$$scope={dirty:g,ctx:_}),t.$set(y);const L={};g&64&&(L.$$scope={dirty:g,ctx:_}),o.$set(L)},i(_){c||(m(t.$$.fragment,_),m(o.$$.fragment,_),m(f.$$.fragment,_),c=!0)},o(_){d(t.$$.fragment,_),d(o.$$.fragment,_),d(f.$$.fragment,_),c=!1},d(_){_&&(p(e),p(u),p(i),p(a)),w(t),w(o),w(f,_)}}}function Bm(l){let e,n,t;return n=new $e({props:{$$slots:{default:[Rm]},$$scope:{ctx:l}}}),{c(){e=C("span"),b(n.$$.fragment),H(e,"slot","right")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function il(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[3]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function zm(l){let e,n=l[5].location+"",t,r,o,s,u=l[5].year+"",i,a,f,c=l[5].motor_vehicles.toLocaleString()+"",_,g,y,L,S=l[5].year+"",N,j,I,M=l[5].pedal_cycles.toLocaleString()+"",A,P,F,O,D,G=l[5].method+"",R;return{c(){e=C("h2"),t=k(n),r=T(),o=C("p"),s=k("Total motor vehicles ("),i=k(u),a=k(` AADF):
        `),f=C("b"),_=k(c),g=T(),y=C("p"),L=k("Total pedal cycles ("),N=k(S),j=k(` AADF):
        `),I=C("b"),A=k(M),P=T(),F=C("p"),O=k("Count method: "),D=C("b"),R=k(G)},m(E,z){$(E,e,z),h(e,t),$(E,r,z),$(E,o,z),h(o,s),h(o,i),h(o,a),h(o,f),h(f,_),$(E,g,z),$(E,y,z),h(y,L),h(y,N),h(y,j),h(y,I),h(I,A),$(E,P,z),$(E,F,z),h(F,O),h(F,D),h(D,R)},p(E,z){z&32&&n!==(n=E[5].location+"")&&B(t,n),z&32&&u!==(u=E[5].year+"")&&B(i,u),z&32&&c!==(c=E[5].motor_vehicles.toLocaleString()+"")&&B(_,c),z&32&&S!==(S=E[5].year+"")&&B(N,S),z&32&&M!==(M=E[5].pedal_cycles.toLocaleString()+"")&&B(A,M),z&32&&G!==(G=E[5].method+"")&&B(R,G)},d(E){E&&(p(e),p(r),p(o),p(g),p(y),p(P),p(F))}}}function qm(l){let e,n;return e=new ae({props:{$$slots:{default:[zm,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Hm(l){let e,n;const t=[q(Gt),{sourceLayer:Gt},{paint:{"circle-color":Se(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[qm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ct({props:r}),e.$on("click",Um),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&se(q(Gt)),s&0&&{sourceLayer:Gt},s&6&&{paint:{"circle-color":Se(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function Gm(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={$$slots:{right:[Bm],default:[Dm]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&il(l);return o=new ke({props:{url:`pmtiles://${he()}/v1/${Gt}.pmtiles`,$$slots:{default:[Hm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),t=T(),a&&a.c(),r=T(),b(o.$$.fragment)},m(f,c){v(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),v(o,f,c),s=!0},p(f,[c]){const _={};c&64&&(_.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,_.checked=f[0],V(()=>n=!1)),e.$set(_),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=il(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&(ue(),d(a,1,1,()=>{a=null}),ce());const g={};c&65&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){d(e.$$.fragment,f),d(a),d(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),w(e,f),a&&a.d(f),w(o,f)}}}let Gt="vehicle_counts";function Um(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function Wm(l,e,n){let t=K.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class Vm extends Y{constructor(e){super(),J(this,e,Wm,Gm,X,{})}}function Xm(l){let e,n,t,r,o,s,u,i;return e=new Gp({}),t=new tm({}),o=new dm({}),u=new $m({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment)},m(a,f){v(e,a,f),$(a,n,f),v(t,a,f),$(a,r,f),v(o,a,f),$(a,s,f),v(u,a,f),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),i=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),d(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),w(e,a),w(t,a),w(o,a),w(u,a)}}}function Ym(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[Xm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Jm(l){let e,n,t,r,o,s,u,i,a,f,c,_;return e=new rc({}),t=new Mc({}),o=new pc({}),u=new yc({}),a=new Ip({}),c=new fp({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),b(a.$$.fragment),f=T(),b(c.$$.fragment)},m(g,y){v(e,g,y),$(g,n,y),v(t,g,y),$(g,r,y),v(o,g,y),$(g,s,y),v(u,g,y),$(g,i,y),v(a,g,y),$(g,f,y),v(c,g,y),_=!0},i(g){_||(m(e.$$.fragment,g),m(t.$$.fragment,g),m(o.$$.fragment,g),m(u.$$.fragment,g),m(a.$$.fragment,g),m(c.$$.fragment,g),_=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),d(u.$$.fragment,g),d(a.$$.fragment,g),d(c.$$.fragment,g),_=!1},d(g){g&&(p(n),p(r),p(s),p(i),p(f)),w(e,g),w(t,g),w(o,g),w(u,g),w(a,g),w(c,g)}}}function Km(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[Jm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Qm(l){let e,n,t,r,o,s;return e=new Uu({}),t=new P$({}),o=new H$({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment)},m(u,i){v(e,u,i),$(u,n,i),v(t,u,i),$(u,r,i),v(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function Zm(l){let e,n,t,r,o,s,u,i,a,f;return e=new tu({}),t=new Iu({}),o=new af({}),u=new If({}),a=new Uf({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),b(a.$$.fragment)},m(c,_){v(e,c,_),$(c,n,_),v(t,c,_),$(c,r,_),v(o,c,_),$(c,s,_),v(u,c,_),$(c,i,_),v(a,c,_),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(o.$$.fragment,c),d(u.$$.fragment,c),d(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),w(e,c),w(t,c),w(o,c),w(u,c),w(a,c)}}}function xm(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[Zm]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function e_(l){let e,n,t,r;return e=new Ka({}),t=new bf({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function t_(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[e_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function n_(l){let e,n,t,r,o,s;return e=new S$({}),t=new Gc({}),o=new m$({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment)},m(u,i){v(e,u,i),$(u,n,i),v(t,u,i),$(u,r,i),v(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),w(e,u),w(t,u),w(o,u)}}}function r_(l){let e,n,t,r,o,s,u,i,a=wn()=="Private (development)",f,c,_,g,y;e=new Vm({}),t=new Fm({}),o=new r$({}),u=new bp({});let L=a&&n_();return c=new fu({}),g=new bu({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),L&&L.c(),f=T(),b(c.$$.fragment),_=T(),b(g.$$.fragment)},m(S,N){v(e,S,N),$(S,n,N),v(t,S,N),$(S,r,N),v(o,S,N),$(S,s,N),v(u,S,N),$(S,i,N),L&&L.m(S,N),$(S,f,N),v(c,S,N),$(S,_,N),v(g,S,N),y=!0},p:ne,i(S){y||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(o.$$.fragment,S),m(u.$$.fragment,S),m(L),m(c.$$.fragment,S),m(g.$$.fragment,S),y=!0)},o(S){d(e.$$.fragment,S),d(t.$$.fragment,S),d(o.$$.fragment,S),d(u.$$.fragment,S),d(L),d(c.$$.fragment,S),d(g.$$.fragment,S),y=!1},d(S){S&&(p(n),p(r),p(s),p(i),p(f),p(_)),w(e,S),w(t,S),w(o,S),w(u,S),L&&L.d(S),w(c,S),w(g,S)}}}function l_(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[r_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function o_(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new Ao({props:u}),U.push(()=>W(e,"enabled",s)),r=new Do({}),{c(){b(e.$$.fragment),t=T(),b(r.$$.fragment)},m(i,a){v(e,i,a),$(i,t,a),v(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],V(()=>n=!1)),e.$set(f)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(r.$$.fragment,i),o=!1},d(i){i&&p(t),w(e,i),w(r,i)}}}function s_(l){let e,n,t,r,o,s,u,i,a,f,c,_,g,y,L,S,N,j;return e=new Z$({}),t=new ze({props:{label:"Trip generators",$$slots:{default:[Ym]},$$scope:{ctx:l}}}),o=new ze({props:{label:"Existing infrastructure",$$slots:{default:[Km]},$$scope:{ctx:l}}}),u=new ze({props:{label:"Public transit",$$slots:{default:[Qm]},$$scope:{ctx:l}}}),a=new ze({props:{label:"Boundaries",$$slots:{default:[xm]},$$scope:{ctx:l}}}),c=new ze({props:{label:"Census",$$slots:{default:[t_]},$$scope:{ctx:l}}}),g=new ze({props:{label:"Other",$$slots:{default:[l_]},$$scope:{ctx:l}}}),L=new ze({props:{label:"Tools",$$slots:{default:[o_]},$$scope:{ctx:l}}}),N=new Lo({props:{disabled:!l[1]}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),b(a.$$.fragment),f=T(),b(c.$$.fragment),_=T(),b(g.$$.fragment),y=T(),b(L.$$.fragment),S=T(),b(N.$$.fragment)},m(I,M){v(e,I,M),$(I,n,M),v(t,I,M),$(I,r,M),v(o,I,M),$(I,s,M),v(u,I,M),$(I,i,M),v(a,I,M),$(I,f,M),v(c,I,M),$(I,_,M),v(g,I,M),$(I,y,M),v(L,I,M),$(I,S,M),v(N,I,M),j=!0},p(I,M){const A={};M&16&&(A.$$scope={dirty:M,ctx:I}),t.$set(A);const P={};M&16&&(P.$$scope={dirty:M,ctx:I}),o.$set(P);const F={};M&16&&(F.$$scope={dirty:M,ctx:I}),u.$set(F);const O={};M&16&&(O.$$scope={dirty:M,ctx:I}),a.$set(O);const D={};M&16&&(D.$$scope={dirty:M,ctx:I}),c.$set(D);const G={};M&16&&(G.$$scope={dirty:M,ctx:I}),g.$set(G);const R={};M&17&&(R.$$scope={dirty:M,ctx:I}),L.$set(R);const E={};M&2&&(E.disabled=!I[1]),N.$set(E)},i(I){j||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(o.$$.fragment,I),m(u.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(g.$$.fragment,I),m(L.$$.fragment,I),m(N.$$.fragment,I),j=!0)},o(I){d(e.$$.fragment,I),d(t.$$.fragment,I),d(o.$$.fragment,I),d(u.$$.fragment,I),d(a.$$.fragment,I),d(c.$$.fragment,I),d(g.$$.fragment,I),d(L.$$.fragment,I),d(N.$$.fragment,I),j=!1},d(I){I&&(p(n),p(r),p(s),p(i),p(f),p(_),p(y),p(S)),w(e,I),w(t,I),w(o,I),w(u,I),w(a,I),w(c,I),w(g,I),w(L,I),w(N,I)}}}function i_(l){let e,n;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new He({props:r}),{c(){b(e.$$.fragment)},m(o,s){v(e,o,s),n=!0},p(o,s){const u=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){d(e.$$.fragment,o),n=!1},d(o){w(e,o)}}}function a_(l){let e,n,t,r;return e=new ze({props:{label:"Layers",open:!0,$$slots:{default:[s_]},$$scope:{ctx:l}}}),t=new wt({props:{data:l[2],$$slots:{default:[i_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function f_(l,e,n){let t,r;Oe(l,hr,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&hr.set(!t)},[t,r,o,s]}class u_ extends Y{constructor(e){super(),J(this,e,f_,a_,X,{})}}function al(l){let e;return{c(){e=C("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function c_(l){let e,n=l[0]&&al();return{c(){n&&n.c(),e=De()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=al(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(t){t&&p(e),n&&n.d(t)}}}function $_(l,e,n){let{loadFile:t}=e,r=!0;return Mn(async()=>{let s=await(await fetch(`${fn()}/v1/all_schemes_output.geojson.gz`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class p_ extends Y{constructor(e){super(),J(this,e,$_,c_,X,{loadFile:1})}}function fl(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=C("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),h(e,n),h(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&B(r,t)},d(s){s&&p(e)}}}function m_(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function __(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function g_(l){let e,n,t,r;return e=new bt({props:{$$slots:{default:[m_]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new bt({props:{$$slots:{default:[__]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function d_(l){var D,G,R,E;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((D=l[0].browse)==null?void 0:D.authority_or_region)+"",a,f,c,_,g=((G=l[0].browse)==null?void 0:G.capital_scheme_id)+"",y,L,S,N,j=((R=l[0].browse)==null?void 0:R.funding_programme)+"",I,M,A,P,F,O=((E=l[0].browse)==null?void 0:E.current_milestone)&&fl(l);return P=new Io({props:{$$slots:{default:[g_]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("Scheme reference: "),r=k(t),o=T(),s=C("p"),u=k("Authority or region: "),a=k(i),f=T(),c=C("p"),_=k("Capital scheme ID: "),y=k(g),L=T(),S=C("p"),N=k("Funding programme: "),I=k(j),M=T(),O&&O.c(),A=T(),b(P.$$.fragment)},m(z,Q){$(z,e,Q),h(e,n),h(e,r),$(z,o,Q),$(z,s,Q),h(s,u),h(s,a),$(z,f,Q),$(z,c,Q),h(c,_),h(c,y),$(z,L,Q),$(z,S,Q),h(S,N),h(S,I),$(z,M,Q),O&&O.m(z,Q),$(z,A,Q),v(P,z,Q),F=!0},p(z,Q){var oe,me,Ne,Pe;(!F||Q&1)&&t!==(t=z[0].scheme_reference+"")&&B(r,t),(!F||Q&1)&&i!==(i=((oe=z[0].browse)==null?void 0:oe.authority_or_region)+"")&&B(a,i),(!F||Q&1)&&g!==(g=((me=z[0].browse)==null?void 0:me.capital_scheme_id)+"")&&B(y,g),(!F||Q&1)&&j!==(j=((Ne=z[0].browse)==null?void 0:Ne.funding_programme)+"")&&B(I,j),(Pe=z[0].browse)!=null&&Pe.current_milestone?O?O.p(z,Q):(O=fl(z),O.c(),O.m(A.parentNode,A)):O&&(O.d(1),O=null);const re={};Q&32&&(re.$$scope={dirty:Q,ctx:z}),P.$set(re)},i(z){F||(m(P.$$.fragment,z),F=!0)},o(z){d(P.$$.fragment,z),F=!1},d(z){z&&(p(e),p(o),p(s),p(f),p(c),p(L),p(S),p(M),p(A)),O&&O.d(z),w(P,z)}}}function h_(l){let e,n;return e=new ze({props:{label:`${l[0].scheme_name}`,$$slots:{default:[d_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function b_(l,e,n){let t,r;Oe(l,vt,i=>n(3,t=i)),Oe(l,Pn,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(ko(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(_=>_.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";yo(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class v_ extends Y{constructor(e){super(),J(this,e,b_,h_,X,{scheme:0})}}function ul(l){let e,n,t,r=l[0].status+"",o;return{c(){e=C("p"),n=k("Status: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].status+"")&&B(o,r)},d(s){s&&p(e)}}}function cl(l){let e,n,t,r=l[0].timescale+"",o;return{c(){e=C("p"),n=k("Timescale: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale+"")&&B(o,r)},d(s){s&&p(e)}}}function $l(l){let e,n,t,r=l[0].timescale_year+"",o;return{c(){e=C("p"),n=k("Estimated completion year: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].timescale_year+"")&&B(o,r)},d(s){s&&p(e)}}}function pl(l){let e,n,t,r=l[0].year_published+"",o;return{c(){e=C("p"),n=k("Scheme most recently published: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_published+"")&&B(o,r)},d(s){s&&p(e)}}}function ml(l){let e,n,t,r=l[0].year_consulted+"",o;return{c(){e=C("p"),n=k("Scheme most recently consulted on: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[0].year_consulted+"")&&B(o,r)},d(s){s&&p(e)}}}function w_(l){let e,n,t,r,o,s=l[0].status&&ul(l),u=l[0].timescale&&cl(l),i=l[0].timescale_year&&$l(l),a=l[0].year_published&&pl(l),f=l[0].year_consulted&&ml(l);return{c(){s&&s.c(),e=T(),u&&u.c(),n=T(),i&&i.c(),t=T(),a&&a.c(),r=T(),f&&f.c(),o=De()},m(c,_){s&&s.m(c,_),$(c,e,_),u&&u.m(c,_),$(c,n,_),i&&i.m(c,_),$(c,t,_),a&&a.m(c,_),$(c,r,_),f&&f.m(c,_),$(c,o,_)},p(c,[_]){c[0].status?s?s.p(c,_):(s=ul(c),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),c[0].timescale?u?u.p(c,_):(u=cl(c),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),c[0].timescale_year?i?i.p(c,_):(i=$l(c),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),c[0].year_published?a?a.p(c,_):(a=pl(c),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null),c[0].year_consulted?f?f.p(c,_):(f=ml(c),f.c(),f.m(o.parentNode,o)):f&&(f.d(1),f=null)},i:ne,o:ne,d(c){c&&(p(e),p(n),p(t),p(r),p(o)),s&&s.d(c),u&&u.d(c),i&&i.d(c),a&&a.d(c),f&&f.d(c)}}}function k_(l,e,n){let{props:t}=e;return l.$$set=r=>{"props"in r&&n(0,t=r.props)},[t]}class po extends Y{constructor(e){super(),J(this,e,k_,w_,X,{props:0})}}function _l(l){let e,n,t,r=l[0].budget.toLocaleString()+"",o,s;return{c(){e=C("p"),n=k("Cost: "),t=C("b"),o=k(r),s=k(`
     GBP`)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o),h(e,s)},p(u,i){i&1&&r!==(r=u[0].budget.toLocaleString()+"")&&B(o,r)},d(u){u&&p(e)}}}function gl(l){let e;return{c(){e=C("p"),e.textContent="Development is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function dl(l){let e;return{c(){e=C("p"),e.textContent="Construction is fully funded"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function hl(l){let e,n,t,r;return{c(){e=C("p"),n=k("Funding sources: "),t=C("b"),r=k(l[1])},m(o,s){$(o,e,s),h(e,n),h(e,t),h(t,r)},p(o,s){s&2&&B(r,o[1])},d(o){o&&p(e)}}}function y_(l){let e,n,t,r,o=l[0].budget&&_l(l),s=l[0].development_funded&&gl(),u=l[0].construction_funded&&dl(),i=l[1]&&hl(l);return{c(){o&&o.c(),e=T(),s&&s.c(),n=T(),u&&u.c(),t=T(),i&&i.c(),r=De()},m(a,f){o&&o.m(a,f),$(a,e,f),s&&s.m(a,f),$(a,n,f),u&&u.m(a,f),$(a,t,f),i&&i.m(a,f),$(a,r,f)},p(a,[f]){a[0].budget?o?o.p(a,f):(o=_l(a),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),a[0].development_funded?s||(s=gl(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),a[0].construction_funded?u||(u=dl(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),a[1]?i?i.p(a,f):(i=hl(a),i.c(),i.m(r.parentNode,r)):i&&(i.d(1),i=null)},i:ne,o:ne,d(a){a&&(p(e),p(n),p(t),p(r)),o&&o.d(a),s&&s.d(a),u&&u.d(a),i&&i.d(a)}}}function S_(l){if(!l.funding_sources)return"";let e=[];for(let n of["atf2","atf3","atf4","atf4e","crsts","luf"])l.funding_sources[n]&&e.push(n.toUpperCase());return l.funding_sources.other&&e.push(l.funding_sources.other),e.join(", ")}function C_(l,e,n){let t,{props:r}=e;return l.$$set=o=>{"props"in o&&n(0,r=o.props)},l.$$.update=()=>{l.$$.dirty&1&&n(1,t=S_(r))},[r,t]}class mo extends Y{constructor(e){super(),J(this,e,C_,y_,X,{props:0})}}function hn(l){const e=l.slice(),n=e[1].pipeline;return e[5]=n,e}function bn(l){const e=l.slice(),n=e[0].pipeline;return e[5]=n,e}function bl(l){let e,n,t,r=Un(l[0].length_meters)+"",o;return{c(){e=C("p"),n=k("Length: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=Un(s[0].length_meters)+"")&&B(o,r)},d(s){s&&p(e)}}}function vl(l){let e,n=it(l[0].description,l[2])+"";return{c(){e=C("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=it(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function wl(l){let e,n,t,r,o,s,u,i=l[5].atf4_type&&kl(l),a=l[5].accuracy&&yl(l),f=l[5].is_alternative&&Sl();return r=new mo({props:{props:l[5]}}),s=new po({props:{props:l[5]}}),{c(){i&&i.c(),e=T(),a&&a.c(),n=T(),f&&f.c(),t=T(),b(r.$$.fragment),o=T(),b(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),v(r,c,_),$(c,o,_),v(s,c,_),u=!0},p(c,_){c[5].atf4_type?i?i.p(c,_):(i=kl(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].accuracy?a?a.p(c,_):(a=yl(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].is_alternative?f||(f=Sl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const g={};_&1&&(g.props=c[5]),r.$set(g);const y={};_&1&&(y.props=c[5]),s.$set(y)},i(c){u||(m(r.$$.fragment,c),m(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function kl(l){let e,n,t,r=l[5].atf4_type+"",o;return{c(){e=C("p"),n=k("ATF4 type: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].atf4_type+"")&&B(o,r)},d(s){s&&p(e)}}}function yl(l){let e,n,t,r=l[5].accuracy+"",o;return{c(){e=C("p"),n=k("Accuracy: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&1&&r!==(r=s[5].accuracy+"")&&B(o,r)},d(s){s&&p(e)}}}function Sl(l){let e;return{c(){e=C("p"),e.textContent="Represents an alternative route"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.capital_scheme_id)+"",o;return{c(){e=C("p"),n=k("Capital scheme ID: "),t=C("b"),o=k(r)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o)},p(u,i){var a;i&2&&r!==(r=((a=u[1].browse)==null?void 0:a.capital_scheme_id)+"")&&B(o,r)},d(u){u&&p(e)}}}function Tl(l){var s;let e,n,t,r=((s=l[1].browse)==null?void 0:s.current_milestone)+"",o;return{c(){e=C("p"),n=k("Current milestone: "),t=C("b"),o=k(r)},m(u,i){$(u,e,i),h(e,n),h(e,t),h(t,o)},p(u,i){var a;i&2&&r!==(r=((a=u[1].browse)==null?void 0:a.current_milestone)+"")&&B(o,r)},d(u){u&&p(e)}}}function Ol(l){let e,n,t,r,o,s,u,i=l[5].scheme_type&&Ll(l),a=l[5].atf4_lead_type&&Al(l),f=l[5].scheme_description&&Il(l);return r=new mo({props:{props:l[5]}}),s=new po({props:{props:l[5]}}),{c(){i&&i.c(),e=T(),a&&a.c(),n=T(),f&&f.c(),t=T(),b(r.$$.fragment),o=T(),b(s.$$.fragment)},m(c,_){i&&i.m(c,_),$(c,e,_),a&&a.m(c,_),$(c,n,_),f&&f.m(c,_),$(c,t,_),v(r,c,_),$(c,o,_),v(s,c,_),u=!0},p(c,_){c[5].scheme_type?i?i.p(c,_):(i=Ll(c),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),c[5].atf4_lead_type?a?a.p(c,_):(a=Al(c),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),c[5].scheme_description?f?f.p(c,_):(f=Il(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const g={};_&2&&(g.props=c[5]),r.$set(g);const y={};_&2&&(y.props=c[5]),s.$set(y)},i(c){u||(m(r.$$.fragment,c),m(s.$$.fragment,c),u=!0)},o(c){d(r.$$.fragment,c),d(s.$$.fragment,c),u=!1},d(c){c&&(p(e),p(n),p(t),p(o)),i&&i.d(c),a&&a.d(c),f&&f.d(c),w(r,c),w(s,c)}}}function Ll(l){let e,n,t,r=l[5].scheme_type+"",o;return{c(){e=C("p"),n=k("Scheme type: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].scheme_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Al(l){let e,n,t,r=l[5].atf4_lead_type+"",o;return{c(){e=C("p"),n=k("ATF4 lead type: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),h(e,n),h(e,t),h(t,o)},p(s,u){u&2&&r!==(r=s[5].atf4_lead_type+"")&&B(o,r)},d(s){s&&p(e)}}}function Il(l){let e,n,t=l[5].scheme_description+"",r;return{c(){e=C("p"),n=k("Descripton: "),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(e,r)},p(o,s){s&2&&t!==(t=o[5].scheme_description+"")&&B(r,t)},d(o){o&&p(e)}}}function T_(l){var Fe,Ee,jn,Rn;let e,n,t,r=it(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,_,g,y,L,S,N,j=it(l[1].scheme_name??"",l[3])+"",I,M,A=it(l[0].scheme_reference,l[3])+"",P,F,O,D,G,R=((Fe=l[1].browse)==null?void 0:Fe.authority_or_region)+"",E,z,Q,re,oe,me,Ne=((Ee=l[1].browse)==null?void 0:Ee.funding_programme)+"",Pe,ie,Me,ge,de=l[0].length_meters&&bl(l),be=l[0].description&&vl(l),_e=l[0].pipeline&&wl(bn(l)),ye=((jn=l[1].browse)==null?void 0:jn.capital_scheme_id)&&Cl(l),pe=((Rn=l[1].browse)==null?void 0:Rn.current_milestone)&&Tl(l),ve=l[1].pipeline&&Ol(hn(l));return{c(){e=C("div"),n=C("h2"),t=new Ut(!1),o=k(" ("),u=k(s),i=k(")"),a=T(),de&&de.c(),f=T(),be&&be.c(),c=T(),_e&&_e.c(),_=T(),g=C("hr"),y=T(),L=C("p"),S=k("Part of scheme: "),N=new Ut(!1),I=k(" ("),M=new Ut(!1),P=k(")"),F=T(),O=C("p"),D=k("Authority or region: "),G=C("b"),E=k(R),z=T(),ye&&ye.c(),Q=T(),re=C("p"),oe=k("Funding programme: "),me=C("b"),Pe=k(Ne),ie=T(),pe&&pe.c(),Me=T(),ve&&ve.c(),t.a=o,N.a=I,M.a=P,Ce(e,"max-width","30vw"),Ce(e,"max-height","60vh"),Ce(e,"overflow","auto")},m(fe,Ae){$(fe,e,Ae),h(e,n),t.m(r,n),h(n,o),h(n,u),h(n,i),h(e,a),de&&de.m(e,null),h(e,f),be&&be.m(e,null),h(e,c),_e&&_e.m(e,null),h(e,_),h(e,g),h(e,y),h(e,L),h(L,S),N.m(j,L),h(L,I),M.m(A,L),h(L,P),h(e,F),h(e,O),h(O,D),h(O,G),h(G,E),h(e,z),ye&&ye.m(e,null),h(e,Q),h(e,re),h(re,oe),h(re,me),h(me,Pe),h(e,ie),pe&&pe.m(e,null),h(e,Me),ve&&ve.m(e,null),ge=!0},p(fe,[Ae]){var Bn,zn,qn,Hn;(!ge||Ae&5)&&r!==(r=it(fe[0].name,fe[2])+"")&&t.p(r),(!ge||Ae&1)&&s!==(s=fe[0].intervention_type+"")&&B(u,s),fe[0].length_meters?de?de.p(fe,Ae):(de=bl(fe),de.c(),de.m(e,f)):de&&(de.d(1),de=null),fe[0].description?be?be.p(fe,Ae):(be=vl(fe),be.c(),be.m(e,c)):be&&(be.d(1),be=null),fe[0].pipeline?_e?(_e.p(bn(fe),Ae),Ae&1&&m(_e,1)):(_e=wl(bn(fe)),_e.c(),m(_e,1),_e.m(e,_)):_e&&(ue(),d(_e,1,1,()=>{_e=null}),ce()),(!ge||Ae&10)&&j!==(j=it(fe[1].scheme_name??"",fe[3])+"")&&N.p(j),(!ge||Ae&9)&&A!==(A=it(fe[0].scheme_reference,fe[3])+"")&&M.p(A),(!ge||Ae&2)&&R!==(R=((Bn=fe[1].browse)==null?void 0:Bn.authority_or_region)+"")&&B(E,R),(zn=fe[1].browse)!=null&&zn.capital_scheme_id?ye?ye.p(fe,Ae):(ye=Cl(fe),ye.c(),ye.m(e,Q)):ye&&(ye.d(1),ye=null),(!ge||Ae&2)&&Ne!==(Ne=((qn=fe[1].browse)==null?void 0:qn.funding_programme)+"")&&B(Pe,Ne),(Hn=fe[1].browse)!=null&&Hn.current_milestone?pe?pe.p(fe,Ae):(pe=Tl(fe),pe.c(),pe.m(e,Me)):pe&&(pe.d(1),pe=null),fe[1].pipeline?ve?(ve.p(hn(fe),Ae),Ae&2&&m(ve,1)):(ve=Ol(hn(fe)),ve.c(),m(ve,1),ve.m(e,null)):ve&&(ue(),d(ve,1,1,()=>{ve=null}),ce())},i(fe){ge||(m(_e),m(ve),ge=!0)},o(fe){d(_e),d(ve),ge=!1},d(fe){fe&&p(e),de&&de.d(),be&&be.d(),_e&&_e.d(),ye&&ye.d(),pe&&pe.d(),ve&&ve.d()}}}function it(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function O_(l,e,n){let t,r,o,s;Oe(l,an,i=>n(4,r=i)),Oe(l,yt,i=>n(2,o=i)),Oe(l,St,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class En extends Y{constructor(e){super(),J(this,e,O_,T_,X,{props:0})}}function L_(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function A_(l){let e,n;return e=new En({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function I_(l){let e,n,t,r;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[L_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[A_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function N_(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function P_(l){let e,n;return e=new En({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function M_(l){let e,n,t,r;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[N_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[P_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function F_(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),h(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&B(t,n)},d(r){r&&p(e)}}}function D_(l){let e,n;return e=new En({props:{props:l[6]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function E_(l){let e,n,t,r;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[F_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[D_,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(o,s){v(e,o,s),$(o,n,s),v(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){d(e.$$.fragment,o),d(t.$$.fragment,o),r=!1},d(o){o&&p(n),w(e,o),w(t,o)}}}function j_(l){let e,n,t,r,o,s,u,i,a,f;const c=[q("interventions-points"),{filter:["all",Wn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":Yn,"circle-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let _={$$slots:{default:[I_]},$$scope:{ctx:l}};for(let A=0;A<c.length;A+=1)_=ee(_,c[A]);e=new ct({props:_});const g=[q("interventions-lines"),{filter:["all",Vn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":kt,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[M_]},$$scope:{ctx:l}};for(let A=0;A<g.length;A+=1)y=ee(y,g[A]);t=new Te({props:y});const L=[q("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*kt,"circle-opacity":0,"circle-stroke-color":ot.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let S={};for(let A=0;A<L.length;A+=1)S=ee(S,L[A]);o=new ct({props:S});const N=[q("interventions-polygons"),{filter:["all",nn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":Z(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let j={$$slots:{default:[E_]},$$scope:{ctx:l}};for(let A=0;A<N.length;A+=1)j=ee(j,N[A]);u=new He({props:j});const I=[q("interventions-polygons-outlines"),{filter:["all",nn,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*kt}},{layout:{visibility:l[0]?"visible":"none"}}];let M={};for(let A=0;A<I.length;A+=1)M=ee(M,I[A]);return a=new Te({props:M}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),b(o.$$.fragment),s=T(),b(u.$$.fragment),i=T(),b(a.$$.fragment)},m(A,P){v(e,A,P),$(A,n,P),v(t,A,P),$(A,r,P),v(o,A,P),$(A,s,P),v(u,A,P),$(A,i,P),v(a,A,P),f=!0},p(A,P){const F=P&29?te(c,[c[0],P&24&&{filter:["all",Wn,A[3],A[4]]},c[2],c[3],P&4&&{paint:{"circle-color":A[2],"circle-radius":Yn,"circle-opacity":Z(1,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}},c[6]]):{};P&128&&(F.$$scope={dirty:P,ctx:A}),e.$set(F);const O=P&13?te(g,[g[0],P&8&&{filter:["all",Vn,A[3]]},g[2],g[3],P&4&&{paint:{"line-color":A[2],"line-width":kt,"line-opacity":Z(1,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}},g[6]]):{};P&128&&(O.$$scope={dirty:P,ctx:A}),t.$set(O);const D=P&1?te(L,[L[0],L[1],L[2],{layout:{visibility:A[0]?"visible":"none"}}]):{};o.$set(D);const G=P&13?te(N,[N[0],P&8&&{filter:["all",nn,A[3]]},N[2],N[3],P&4&&{paint:{"fill-color":A[2],"fill-opacity":Z(.2,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}},N[6]]):{};P&128&&(G.$$scope={dirty:P,ctx:A}),u.$set(G);const R=P&13?te(I,[I[0],P&8&&{filter:["all",nn,A[3]]},P&4&&{paint:{"line-color":A[2],"line-opacity":.5,"line-width":.7*kt}},P&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};a.$set(R)},i(A){f||(m(e.$$.fragment,A),m(t.$$.fragment,A),m(o.$$.fragment,A),m(u.$$.fragment,A),m(a.$$.fragment,A),f=!0)},o(A){d(e.$$.fragment,A),d(t.$$.fragment,A),d(o.$$.fragment,A),d(u.$$.fragment,A),d(a.$$.fragment,A),f=!1},d(A){A&&(p(n),p(r),p(s),p(i)),w(e,A),w(t,A),w(o,A),w(u,A),w(a,A)}}}function R_(l){let e,n;return e=new wt({props:{data:l[1],$$slots:{default:[j_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function B_(l,e,n){let t,r;Oe(l,vt,a=>n(5,r=a));let{showSchemes:o}=e,[s]=An();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=So(r))},[o,t,s,u,i,r]}class z_ extends Y{constructor(e){super(),J(this,e,B_,R_,X,{showSchemes:0})}}function Nl(l,e,n){const t=l.slice();return t[13]=e[n],t}function Pl(l,e,n){const t=l.slice();return t[16]=e[n],t}function q_(l){let e,n;return e=new p_({props:{loadFile:l[7]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Ml(l){let e,n,t,r,o;e=new bt({props:{$$slots:{default:[H_]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[G_]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new Rl({props:u}),U.push(()=>W(t,"open",s)),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment)},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],V(()=>r=!1)),t.$set(c)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),o=!1},d(i){i&&p(n),w(e,i),w(t,i)}}}function H_(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Fl(l){let e,n,t=l[16]+"",r;return{c(){e=C("li"),n=C("p"),r=k(t)},m(o,s){$(o,e,s),h(e,n),h(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&B(r,t)},d(o){o&&p(e)}}}function G_(l){let e,n,t,r,o=qe(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=Fl(Pl(l,o,u));return{c(){e=C("div"),n=C("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=T(),r=C("ul");for(let u=0;u<s.length;u+=1)s[u].c();H(e,"class","govuk-prose")},m(u,i){$(u,e,i),h(e,n),h(e,t),h(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=qe(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=Pl(u,o,a);s[a]?s[a].p(f,i):(s[a]=Fl(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),ht(s,u)}}}function Dl(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new ba({props:u}),U.push(()=>W(e,"schemesToBeShown",o)),U.push(()=>W(e,"show",s)),{c(){b(e.$$.fragment)},m(i,a){v(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],V(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],V(()=>t=!1)),e.$set(f)},i(i){r||(m(e.$$.fragment,i),r=!0)},o(i){d(e.$$.fragment,i),r=!1},d(i){w(e,i)}}}function El(l){let e,n;return e=new v_({props:{scheme:l[13]}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function jl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&El(l);return{c(){r&&r.c(),n=De()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&m(r,1)):(r=El(o),r.c(),m(r,1),r.m(n.parentNode,n)):r&&(ue(),d(r,1,1,()=>{r=null}),ce())},i(o){t||(m(r),t=!0)},o(o){d(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function U_(l){let e,n,t,r,o,s,u,i,a,f,c=wn()=="Private (development)",_,g,y,L,S,N,j,I,M;o=new Fo({props:{boundaryGeojson:l[4]}}),a=new Co({});let A=c&&q_(l),P=l[4].notes&&Ml(l);y=new Po({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),S=new Vl({props:{errorMessage:l[0]}});let F=l[6].size>0&&Dl(l),O=qe(l[6].values()),D=[];for(let R=0;R<O.length;R+=1)D[R]=jl(Nl(l,O,R));const G=R=>d(D[R],1,1,()=>{D[R]=null});return{c(){e=C("div"),n=C("div"),t=C("h1"),t.textContent="Browse schemes",r=T(),b(o.$$.fragment),s=T(),u=C("p"),u.textContent=`App version: ${wn()}`,i=T(),b(a.$$.fragment),f=T(),A&&A.c(),_=T(),P&&P.c(),g=T(),b(y.$$.fragment),L=T(),b(S.$$.fragment),N=T(),F&&F.c(),j=T(),I=C("ul");for(let R=0;R<D.length;R+=1)D[R].c();Ce(n,"display","flex"),Ce(n,"justify-content","space-between"),H(e,"slot","sidebar"),H(e,"class","govuk-prose")},m(R,E){$(R,e,E),h(e,n),h(n,t),h(n,r),v(o,n,null),h(e,s),h(e,u),h(e,i),v(a,e,null),h(e,f),A&&A.m(e,null),h(e,_),P&&P.m(e,null),h(e,g),v(y,e,null),h(e,L),v(S,e,null),h(e,N),F&&F.m(e,null),h(e,j),h(e,I);for(let z=0;z<D.length;z+=1)D[z]&&D[z].m(I,null);M=!0},p(R,E){const z={};E&16&&(z.boundaryGeojson=R[4]),o.$set(z),c&&A.p(R,E),R[4].notes?P?(P.p(R,E),E&16&&m(P,1)):(P=Ml(R),P.c(),m(P,1),P.m(e,g)):P&&(ue(),d(P,1,1,()=>{P=null}),ce());const Q={};if(E&1&&(Q.errorMessage=R[0]),S.$set(Q),R[6].size>0?F?(F.p(R,E),E&64&&m(F,1)):(F=Dl(R),F.c(),m(F,1),F.m(e,j)):F&&(ue(),d(F,1,1,()=>{F=null}),ce()),E&66){O=qe(R[6].values());let re;for(re=0;re<O.length;re+=1){const oe=Nl(R,O,re);D[re]?(D[re].p(oe,E),m(D[re],1)):(D[re]=jl(oe),D[re].c(),m(D[re],1),D[re].m(I,null))}for(ue(),re=O.length;re<D.length;re+=1)G(re);ce()}},i(R){if(!M){m(o.$$.fragment,R),m(a.$$.fragment,R),m(A),m(P),m(y.$$.fragment,R),m(S.$$.fragment,R),m(F);for(let E=0;E<O.length;E+=1)m(D[E]);M=!0}},o(R){d(o.$$.fragment,R),d(a.$$.fragment,R),d(A),d(P),d(y.$$.fragment,R),d(S.$$.fragment,R),d(F),D=D.filter(Boolean);for(let E=0;E<D.length;E+=1)d(D[E]);M=!1},d(R){R&&p(e),w(o),w(a),A&&A.d(),P&&P.d(),w(y),w(S),F&&F.d(),ht(D,R)}}}function W_(l){let e,n,t,r,o,s,u;return e=new No({}),t=new z_({props:{showSchemes:l[2]}}),s=new u_({}),{c(){b(e.$$.fragment),n=T(),b(t.$$.fragment),r=T(),o=C("div"),b(s.$$.fragment),H(o,"class","top-right svelte-u44ed2")},m(i,a){v(e,i,a),$(i,n,a),v(t,i,a),$(i,r,a),$(i,o,a),v(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),w(e,i),w(t,i),w(s)}}}function V_(l){let e,n,t;return n=new To({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[W_]},$$scope:{ctx:l}}}),{c(){e=C("div"),b(n.$$.fragment),H(e,"slot","main")},m(r,o){$(r,e,o),v(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){d(n.$$.fragment,r),t=!1},d(r){r&&p(e),w(n)}}}function X_(l){let e,n;return e=new Eo({props:{$$slots:{main:[V_],sidebar:[U_]},$$scope:{ctx:l}}}),{c(){b(e.$$.fragment)},m(t,r){v(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){d(e.$$.fragment,t),n=!1},d(t){w(e,t)}}}function Y_(l,e,n){let t,r,o;Oe(l,vt,S=>n(4,t=S)),Oe(l,Xn,S=>n(5,r=S)),Oe(l,an,S=>n(6,o=S)),Mn(()=>{Oo()});const s=new URLSearchParams(window.location.search);Xn.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(S){try{vt.set(JSON.parse(S)),an.set(xi(t)),n(0,u="")}catch(N){n(0,u=`The file you loaded is broken: ${N}`)}}const _=()=>n(3,f=!0);function g(S){f=S,n(3,f)}function y(S){i=S,n(1,i)}function L(S){a=S,n(2,a)}return[u,i,a,f,t,r,o,c,_,g,y,L]}class J_ extends Y{constructor(e){super(),J(this,e,Y_,X_,X,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new J_({target:document.getElementById("app")});
