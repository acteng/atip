import{S as K,i as Q,s as X,e as C,h as G,a0 as ye,j as $,X as ne,o as p,aQ as bl,b as U,c as W,d as O,g as h,m as b,w as ft,l as V,t as m,n as _,p as v,Y as Jt,Z as Yt,_ as Kt,$ as Qt,a8 as ze,K as $e,N as pe,aR as ht,u as k,k as w,D as z,J as qe,O as Ln,P as vl,q as Se,Q as wl,T as kl,U as at,V as yl,W as Sl,aY as Jl,aZ as _t,a5 as zn,a_ as Yl,aP as Kl,as as ut,af as An,ak as Zt,r as In,a as bt,F as dn,v as Je,aX as x,a$ as de,b0 as we,B as Z,ai as ee,C as Ce,al as te,b1 as ie,G as wt,ac as ln,I as Cl,aT as Wt,b2 as an,R as Tl,b3 as Gt,E as Ol,aK as Ql,b4 as Zl,b5 as xl,f as hn,ah as eo,aV as qn,am as to,an as Hn,ao as Gn,ap as tn,aW as Un,L as no,M as ro,y as lo}from"./index-1db5471c.js";import{d as ot,j as dt,C as Be,f as Ke,h as le,l as q,k as oo,S as so,B as io,c as Wn,b as kt,G as ao}from"./StreetViewTool-469d9d6b.js";import{a as He,F as fo}from"./Popup-6f6a7c0f.js";import{P as ae}from"./Popup-e4ae80c0.js";import{R as uo,C as ct,Z as co}from"./ZoomOutMap-e861417f.js";import{L as $o,a as po}from"./LineMeasureController-a3a581fc.js";function mo(l){let e;return{c(){e=C("span"),G(e,"class","svelte-kzgqtg"),ye(e,"background",l[0])},m(n,t){$(n,e,t)},p(n,[t]){t&1&&ye(e,"background",n[0])},i:ne,o:ne,d(n){n&&p(e)}}}function _o(l,e,n){let{color:t}=e;return l.$$set=r=>{"color"in r&&n(0,t=r.color)},[t]}class Oe extends K{constructor(e){super(),Q(this,e,_o,mo,X,{color:0})}}const go="/atip/show_pipeline_in_browse/assets/help-d011708a.svg";function ho(l){let e,n;const t=l[1].default,r=Jt(t,l,l[4],null);return{c(){e=C("div"),r&&r.c(),G(e,"class","govuk-prose")},m(o,s){$(o,e,s),r&&r.m(e,null),n=!0},p(o,s){r&&r.p&&(!n||s&16)&&Yt(r,t,o,o[4],n?Qt(t,o[4],s,null):Kt(o[4]),null)},i(o){n||(m(r,o),n=!0)},o(o){_(r,o),n=!1},d(o){o&&p(e),r&&r.d(o)}}}function bo(l){let e,n,t,r,o,s,u;function i(f){l[3](f)}let a={title:"Help",$$slots:{default:[ho]},$$scope:{ctx:l}};return l[0]!==void 0&&(a.open=l[0]),t=new bl({props:a}),U.push(()=>W(t,"open",i)),{c(){e=C("button"),e.innerHTML=`<img src="${go}" title="Help" alt="Help"/>`,n=O(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,n,c),b(t,f,c),o=!0,s||(u=ft(e,"click",l[2]),s=!0)},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!r&&c&1&&(r=!0,g.open=f[0],V(()=>r=!1)),t.$set(g)},i(f){o||(m(t.$$.fragment,f),o=!0)},o(f){_(t.$$.fragment,f),o=!1},d(f){f&&(p(e),p(n)),v(t,f),s=!1,u()}}}function vo(l,e,n){let{$$slots:t={},$$scope:r}=e,o=!1;const s=()=>n(0,o=!0);function u(i){o=i,n(0,o)}return l.$$set=i=>{"$$scope"in i&&n(4,r=i.$$scope)},[o,t,s,u,r]}class ce extends K{constructor(e){super(),Q(this,e,vo,bo,X,{})}}function Vn(l,e,n){const t=l.slice();return t[1]=e[n][0],t[2]=e[n][1],t}function Xn(l){let e,n,t,r=l[1]+"",o,s,u;return n=new Oe({props:{color:l[2]}}),{c(){e=C("li"),h(n.$$.fragment),t=O(),o=k(r),s=O()},m(i,a){$(i,e,a),b(n,e,null),w(e,t),w(e,o),w(e,s),u=!0},p(i,a){const f={};a&1&&(f.color=i[2]),n.$set(f),(!u||a&1)&&r!==(r=i[1]+"")&&z(o,r)},i(i){u||(m(n.$$.fragment,i),u=!0)},o(i){_(n.$$.fragment,i),u=!1},d(i){i&&p(e),v(n)}}}function wo(l){let e,n,t=ze(l[0]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Xn(Vn(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){e=C("ul");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,u){$(s,e,u);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);n=!0},p(s,[u]){if(u&1){t=ze(s[0]);let i;for(i=0;i<t.length;i+=1){const a=Vn(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Xn(a),r[i].c(),m(r[i],1),r[i].m(e,null))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),ht(r,s)}}}function ko(l,e,n){let{rows:t}=e;return l.$$set=r=>{"rows"in r&&n(0,t=r.rows)},[t]}class Mn extends K{constructor(e){super(),Q(this,e,ko,wo,X,{rows:0})}}function Jn(l){let e=l[0],n,t,r=Yn(l);return{c(){r.c(),n=qe()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&X(e,e=o[0])?($e(),_(r,1,1,ne),pe(),r=Yn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Yn(l){let e;const n=l[10].default,t=Jt(n,l,l[9],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&512)&&Yt(t,n,r,r[9],e?Qt(n,r[9],o,null):Kt(r[9]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function yo(l){let e,n,t=l[0]&&Jn(l);return{c(){t&&t.c(),e=qe()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Jn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),_(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function So(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Ln("raster-source")}=e,{tiles:i}=e,{tileSize:a=void 0}=e;const{map:f,self:c}=vl();Se(l,f,y=>n(8,r=y)),Se(l,c,y=>n(0,t=y));let g,d=!0;return wl(()=>{t&&g&&r&&(kl(f,t,g),at(c,t=null,t),n(6,g=void 0))}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"tiles"in y&&n(4,i=y.tiles),"tileSize"in y&&n(5,a=y.tileSize),"$$scope"in y&&n(9,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&377&&r&&t!==u&&(at(c,t=u,t),yl(r,t,Sl({type:"raster",tiles:i,tileSize:a}),y=>r&&y===t,()=>{t&&(n(6,g=r==null?void 0:r.getSource(t)),n(7,d=!0))})),l.$$.dirty&264&&(r==null||r.on("style.load",()=>{n(6,g=r==null?void 0:r.getSource(u))})),l.$$.dirty&208&&g&&(d?n(7,d=!1):g.setTiles(i))},[t,f,c,u,i,a,g,d,r,s,o]}class Co extends K{constructor(e){super(),Q(this,e,So,yo,X,{id:3,tiles:4,tileSize:5})}}function To(l){let e;const n=l[16].default,t=Jt(n,l,l[24],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&16777216)&&Yt(t,n,r,r[24],e?Qt(n,r[24],o,null):Kt(r[24]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function Oo(l){let e,n,t;function r(s){l[17](s)}let o={id:l[1],type:"symbol",source:l[2],sourceLayer:l[3],beforeId:l[4],beforeLayerType:l[5],paint:l[6],layout:l[7],filter:l[8],applyToClusters:l[9],minzoom:l[10],maxzoom:l[11],hoverCursor:l[12],manageHoverState:l[13],eventsIfTopMost:l[14],interactive:l[15],$$slots:{default:[To]},$$scope:{ctx:l}};return l[0]!==void 0&&(o.hovered=l[0]),e=new Jl({props:o}),U.push(()=>W(e,"hovered",r)),e.$on("click",l[18]),e.$on("dblclick",l[19]),e.$on("contextmenu",l[20]),e.$on("mouseenter",l[21]),e.$on("mousemove",l[22]),e.$on("mouseleave",l[23]),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,[u]){const i={};u&2&&(i.id=s[1]),u&4&&(i.source=s[2]),u&8&&(i.sourceLayer=s[3]),u&16&&(i.beforeId=s[4]),u&32&&(i.beforeLayerType=s[5]),u&64&&(i.paint=s[6]),u&128&&(i.layout=s[7]),u&256&&(i.filter=s[8]),u&512&&(i.applyToClusters=s[9]),u&1024&&(i.minzoom=s[10]),u&2048&&(i.maxzoom=s[11]),u&4096&&(i.hoverCursor=s[12]),u&8192&&(i.manageHoverState=s[13]),u&16384&&(i.eventsIfTopMost=s[14]),u&32768&&(i.interactive=s[15]),u&16777216&&(i.$$scope={dirty:u,ctx:s}),!n&&u&1&&(n=!0,i.hovered=s[0],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Lo(l,e,n){let{$$slots:t={},$$scope:r}=e,{id:o=Ln("symbol")}=e,{source:s=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:i=void 0}=e,{beforeLayerType:a=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:g=void 0}=e,{applyToClusters:d=void 0}=e,{minzoom:y=void 0}=e,{maxzoom:L=void 0}=e,{hoverCursor:S=void 0}=e,{manageHoverState:M=!1}=e,{hovered:j=null}=e,{eventsIfTopMost:I=!1}=e,{interactive:N=!0}=e;function A(D){j=D,n(0,j)}function P(D){_t.call(this,l,D)}function F(D){_t.call(this,l,D)}function T(D){_t.call(this,l,D)}function E(D){_t.call(this,l,D)}function H(D){_t.call(this,l,D)}function R(D){_t.call(this,l,D)}return l.$$set=D=>{"id"in D&&n(1,o=D.id),"source"in D&&n(2,s=D.source),"sourceLayer"in D&&n(3,u=D.sourceLayer),"beforeId"in D&&n(4,i=D.beforeId),"beforeLayerType"in D&&n(5,a=D.beforeLayerType),"paint"in D&&n(6,f=D.paint),"layout"in D&&n(7,c=D.layout),"filter"in D&&n(8,g=D.filter),"applyToClusters"in D&&n(9,d=D.applyToClusters),"minzoom"in D&&n(10,y=D.minzoom),"maxzoom"in D&&n(11,L=D.maxzoom),"hoverCursor"in D&&n(12,S=D.hoverCursor),"manageHoverState"in D&&n(13,M=D.manageHoverState),"hovered"in D&&n(0,j=D.hovered),"eventsIfTopMost"in D&&n(14,I=D.eventsIfTopMost),"interactive"in D&&n(15,N=D.interactive),"$$scope"in D&&n(24,r=D.$$scope)},[j,o,s,u,i,a,f,c,g,d,y,L,S,M,I,N,t,A,P,F,T,E,H,R,r]}class fn extends K{constructor(e){super(),Q(this,e,Lo,Oo,X,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Kn(l){let e=l[0],n,t,r=Qn(l);return{c(){r.c(),n=qe()},m(o,s){r.m(o,s),$(o,n,s),t=!0},p(o,s){s&1&&X(e,e=o[0])?($e(),_(r,1,1,ne),pe(),r=Qn(o),r.c(),m(r,1),r.m(n.parentNode,n)):r.p(o,s)},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r.d(o)}}}function Qn(l){let e;const n=l[9].default,t=Jt(n,l,l[8],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&256)&&Yt(t,n,r,r[8],e?Qt(n,r[8],o,null):Kt(r[8]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function Ao(l){let e,n,t=l[0]&&Kn(l);return{c(){t&&t.c(),e=qe()},m(r,o){t&&t.m(r,o),$(r,e,o),n=!0},p(r,[o]){r[0]?t?(t.p(r,o),o&1&&m(t,1)):(t=Kn(r),t.c(),m(t,1),t.m(e.parentNode,e)):t&&($e(),_(t,1,1,()=>{t=null}),pe())},i(r){n||(m(t),n=!0)},o(r){_(t),n=!1},d(r){r&&p(e),t&&t.d(r)}}}function Io(l,e,n){let t,r,{$$slots:o={},$$scope:s}=e,{id:u=Ln("vector")}=e,{url:i=null}=e,{tiles:a=null}=e,{promoteId:f=null}=e;if(i&&i.includes("pmtiles://")&&!zn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let y=new Yl;zn.addProtocol("pmtiles",y.tile)}const{map:c,self:g}=vl();Se(l,c,y=>n(7,r=y)),Se(l,g,y=>n(0,t=y));let d;return wl(()=>{t&&r&&(kl(c,t,d),at(g,t=null,t),d=void 0)}),l.$$set=y=>{"id"in y&&n(3,u=y.id),"url"in y&&n(4,i=y.url),"tiles"in y&&n(5,a=y.tiles),"promoteId"in y&&n(6,f=y.promoteId),"$$scope"in y&&n(8,s=y.$$scope)},l.$$.update=()=>{l.$$.dirty&249&&r&&t!==u&&(at(g,t=u,t),yl(r,t,Sl({type:"vector",url:i,tiles:a,promoteId:f}),y=>r&&y===t,()=>{t&&(d=r==null?void 0:r.getSource(t))})),l.$$.dirty&136&&(r==null||r.on("style.load",()=>{d=r==null?void 0:r.getSource(u)}))},[t,c,g,u,i,a,f,r,s,o]}class be extends K{constructor(e){super(),Q(this,e,Io,Ao,X,{id:3,url:4,tiles:5,promoteId:6})}}const Mo={createDocument:function(e){return new DOMParser().parseFromString(e.trim(),"text/xml")}};var De=Uint8Array,pt=Uint16Array,Ll=Uint32Array,Al=new De([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Il=new De([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Po=new De([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Ml=function(l,e){for(var n=new pt(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new Ll(n[30]),t=1;t<30;++t)for(var o=n[t];o<n[t+1];++o)r[o]=o-n[t]<<5|t;return[n,r]},Pl=Ml(Al,2),Nl=Pl[0],No=Pl[1];Nl[28]=258,No[258]=28;var Fo=Ml(Il,0),Eo=Fo[0],bn=new pt(32768);for(var ge=0;ge<32768;++ge){var st=(ge&43690)>>>1|(ge&21845)<<1;st=(st&52428)>>>2|(st&13107)<<2,st=(st&61680)>>>4|(st&3855)<<4,bn[ge]=((st&65280)>>>8|(st&255)<<8)>>>1}var Ut=function(l,e,n){for(var t=l.length,r=0,o=new pt(e);r<t;++r)l[r]&&++o[l[r]-1];var s=new pt(e);for(r=0;r<e;++r)s[r]=s[r-1]+o[r-1]<<1;var u;if(n){u=new pt(1<<e);var i=15-e;for(r=0;r<t;++r)if(l[r])for(var a=r<<4|l[r],f=e-l[r],c=s[l[r]-1]++<<f,g=c|(1<<f)-1;c<=g;++c)u[bn[c]>>>i]=a}else for(u=new pt(t),r=0;r<t;++r)l[r]&&(u[r]=bn[s[l[r]-1]++]>>>15-l[r]);return u},xt=new De(288);for(var ge=0;ge<144;++ge)xt[ge]=8;for(var ge=144;ge<256;++ge)xt[ge]=9;for(var ge=256;ge<280;++ge)xt[ge]=7;for(var ge=280;ge<288;++ge)xt[ge]=8;var Fl=new De(32);for(var ge=0;ge<32;++ge)Fl[ge]=5;var Do=Ut(xt,9,1),jo=Ut(Fl,5,1),un=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},Ue=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},cn=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},Ro=function(l){return(l+7)/8|0},Pn=function(l,e,n){(e==null||e<0)&&(e=0),(n==null||n>l.length)&&(n=l.length);var t=new(l.BYTES_PER_ELEMENT==2?pt:l.BYTES_PER_ELEMENT==4?Ll:De)(n-e);return t.set(l.subarray(e,n)),t},Bo=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],We=function(l,e,n){var t=new Error(e||Bo[l]);if(t.code=l,Error.captureStackTrace&&Error.captureStackTrace(t,We),!n)throw t;return t},zo=function(l,e,n){var t=l.length;if(!t||n&&n.f&&!n.l)return e||new De(0);var r=!e||n,o=!n||n.i;n||(n={}),e||(e=new De(t*3));var s=function(he){var fe=e.length;if(he>fe){var ke=new De(Math.max(fe*2,he));ke.set(e),e=ke}},u=n.f||0,i=n.p||0,a=n.b||0,f=n.l,c=n.d,g=n.m,d=n.n,y=t*8;do{if(!f){u=Ue(l,i,1);var L=Ue(l,i+1,3);if(i+=3,L)if(L==1)f=Do,c=jo,g=9,d=5;else if(L==2){var I=Ue(l,i,31)+257,N=Ue(l,i+10,15)+4,A=I+Ue(l,i+5,31)+1;i+=14;for(var P=new De(A),F=new De(19),T=0;T<N;++T)F[Po[T]]=Ue(l,i+T*3,7);i+=N*3;for(var E=un(F),H=(1<<E)-1,R=Ut(F,E,1),T=0;T<A;){var D=R[Ue(l,i,H)];i+=D&15;var S=D>>>4;if(S<16)P[T++]=S;else{var B=0,Y=0;for(S==16?(Y=3+Ue(l,i,3),i+=2,B=P[T-1]):S==17?(Y=3+Ue(l,i,7),i+=3):S==18&&(Y=11+Ue(l,i,127),i+=7);Y--;)P[T++]=B}}var re=P.subarray(0,I),oe=P.subarray(I);g=un(re),d=un(oe),f=Ut(re,g,1),c=Ut(oe,d,1)}else We(1);else{var S=Ro(i)+4,M=l[S-4]|l[S-3]<<8,j=S+M;if(j>t){o&&We(0);break}r&&s(a+M),e.set(l.subarray(S,j),a),n.b=a+=M,n.p=i=j*8,n.f=u;continue}if(i>y){o&&We(0);break}}r&&s(a+131072);for(var me=(1<<g)-1,Le=(1<<d)-1,Ne=i;;Ne=i){var B=f[cn(l,i)&me],se=B>>>4;if(i+=B&15,i>y){o&&We(0);break}if(B||We(2),se<256)e[a++]=se;else if(se==256){Ne=i,f=null;break}else{var Ae=se-254;if(se>264){var T=se-257,Te=Al[T];Ae=Ue(l,i,(1<<Te)-1)+Nl[T],i+=Te}var Ie=c[cn(l,i)&Le],_e=Ie>>>4;Ie||We(3),i+=Ie&15;var oe=Eo[_e];if(_e>3){var Te=Il[_e];oe+=cn(l,i)&(1<<Te)-1,i+=Te}if(i>y){o&&We(0);break}r&&s(a+131072);for(var ve=a+Ae;a<ve;a+=4)e[a]=e[a-oe],e[a+1]=e[a+1-oe],e[a+2]=e[a+2-oe],e[a+3]=e[a+3-oe];a=ve}}n.l=f,n.p=Ne,n.b=a,n.f=u,f&&(u=1,n.m=g,n.d=c,n.n=d)}while(!u);return a==e.length?e:Pn(e,0,a)},qo=new De(0),Xe=function(l,e){return l[e]|l[e+1]<<8},Ve=function(l,e){return(l[e]|l[e+1]<<8|l[e+2]<<16|l[e+3]<<24)>>>0},$n=function(l,e){return Ve(l,e)+Ve(l,e+4)*4294967296};function Ho(l,e){return zo(l,e)}var vn=typeof TextDecoder<"u"&&new TextDecoder,Go=0;try{vn.decode(qo,{stream:!0}),Go=1}catch{}var Uo=function(l){for(var e="",n=0;;){var t=l[n++],r=(t>127)+(t>223)+(t>239);if(n+r>l.length)return[e,Pn(l,n-1)];r?r==3?(t=((t&15)<<18|(l[n++]&63)<<12|(l[n++]&63)<<6|l[n++]&63)-65536,e+=String.fromCharCode(55296|t>>10,56320|t&1023)):r&1?e+=String.fromCharCode((t&31)<<6|l[n++]&63):e+=String.fromCharCode((t&15)<<12|(l[n++]&63)<<6|l[n++]&63):e+=String.fromCharCode(t)}};function El(l,e){if(e){for(var n="",t=0;t<l.length;t+=16384)n+=String.fromCharCode.apply(null,l.subarray(t,t+16384));return n}else{if(vn)return vn.decode(l);var r=Uo(l),o=r[0],s=r[1];return s.length&&We(8),o}}var Wo=function(l,e){return e+30+Xe(l,e+26)+Xe(l,e+28)},Vo=function(l,e,n){var t=Xe(l,e+28),r=El(l.subarray(e+46,e+46+t),!(Xe(l,e+8)&2048)),o=e+46+t,s=Ve(l,e+20),u=n&&s==4294967295?Xo(l,o):[s,Ve(l,e+24),Ve(l,e+42)],i=u[0],a=u[1],f=u[2];return[Xe(l,e+10),i,a,r,o+Xe(l,e+30)+Xe(l,e+32),f]},Xo=function(l,e){for(;Xe(l,e)!=1;e+=4+Xe(l,e+2));return[$n(l,e+12),$n(l,e+4),$n(l,e+20)]};function Jo(l,e){for(var n={},t=l.length-22;Ve(l,t)!=101010256;--t)(!t||l.length-t>65558)&&We(13);var r=Xe(l,t+8);if(!r)return{};var o=Ve(l,t+16),s=o==4294967295||r==65535;if(s){var u=Ve(l,t-12);s=Ve(l,u)==101075792,s&&(r=Ve(l,u+32),o=Ve(l,u+48))}for(var i=e&&e.filter,a=0;a<r;++a){var f=Vo(l,o,s),c=f[0],g=f[1],d=f[2],y=f[3],L=f[4],S=f[5],M=Wo(l,S);o=L,(!i||i({name:y,size:g,originalSize:d,compression:c}))&&(c?c==8?n[y]=Ho(l.subarray(M,M+g),new De(d)):We(14,"unknown compression type "+c):n[y]=Pn(l,M,M+g))}return n}function Yo(l){return l instanceof File||l instanceof Blob?l.arrayBuffer().then(pn):pn(l)}function pn(l){var e=new Uint8Array(l),n=Jo(e);return Promise.resolve(Ko(n))}function Ko(l){for(var e=[],n=0,t=Object.keys(l);n<t.length;n++){var r=t[n];e[r]=El(l[r])}return e}function Ye(l,e){for(var n=0;n<l.childNodes.length;){var t=l.childNodes[n];if(t.nodeType===1&&mt(t)===e)return t;n++}}function en(l,e){for(var n=[],t=0;t<l.childNodes.length;){var r=l.childNodes[t];r.nodeType===1&&mt(r)===e&&n.push(r),t++}return n}function on(l,e,n){for(var t=0;t<l.childNodes.length;){var r=l.childNodes[t];e?r.nodeType===1&&mt(r)===e&&n(r,t):n(r,t),t++}}function Qo(l,e,n){var t=[];return on(l,e,function(r,o){t.push(n(r,o))}),t}var Zo=/.+\:/;function mt(l){return l.tagName.replace(Zo,"")}function Dl(l){if(l.nodeType!==1)return l.textContent;for(var e="<"+mt(l),n=0;n<l.attributes.length;)e+=" "+l.attributes[n].name+'="'+l.attributes[n].value+'"',n++;e+=">";for(var t=0;t<l.childNodes.length;)e+=Dl(l.childNodes[t]),t++;return e+="</"+mt(l)+">",e}function xo(l){var e=l.documentElement,n=Ye(e,"sheetData"),t=[];return on(n,"row",function(r){on(r,"c",function(o){t.push(o)})}),t}function es(l,e){return Ye(e,"v")}function ts(l,e){if(e.firstChild&&mt(e.firstChild)==="is"&&e.firstChild.firstChild&&mt(e.firstChild.firstChild)==="t")return e.firstChild.firstChild.textContent}function ns(l){var e=l.documentElement,n=Ye(e,"dimension");if(n)return n.getAttribute("ref")}function rs(l){var e=l.documentElement,n=Ye(e,"cellStyleXfs");return n?en(n,"xf"):[]}function ls(l){var e=l.documentElement,n=Ye(e,"cellXfs");return n?en(n,"xf"):[]}function os(l){var e=l.documentElement,n=Ye(e,"numFmts");return n?en(n,"numFmt"):[]}function ss(l){var e=l.documentElement;return Qo(e,"si",function(n){var t=Ye(n,"t");if(t)return t.textContent;var r="";return on(n,"r",function(o){r+=Ye(o,"t").textContent}),r})}function is(l){var e=l.documentElement;return Ye(e,"workbookPr")}function as(l){var e=l.documentElement;return en(e,"Relationship")}function fs(l){var e=l.documentElement,n=Ye(e,"sheets");return en(n,"sheet")}function us(l,e){var n=e.createDocument(l),t={},r=is(n);r&&r.getAttribute("date1904")==="1"&&(t.epoch1904=!0),t.sheets=[];var o=function(u){u.getAttribute("name")&&t.sheets.push({id:u.getAttribute("sheetId"),name:u.getAttribute("name"),relationId:u.getAttribute("r:id")})};return fs(n).forEach(o),t}function cs(l,e){var n=e.createDocument(l),t={sheets:{},sharedStrings:void 0,styles:void 0},r=function(s){var u=s.getAttribute("Target"),i=s.getAttribute("Type");switch(i){case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles":t.styles=mn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings":t.sharedStrings=mn(u);break;case"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet":t.sheets[s.getAttribute("Id")]=mn(u);break}};return as(n).forEach(r),t}function mn(l){return l[0]==="/"?l.slice(1):"xl/"+l}function Zn(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function xn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Zn(Object(n),!0).forEach(function(t){$s(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):Zn(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function $s(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ps(l,e){if(!l)return{};var n=e.createDocument(l),t=rs(n).map(_n),r=os(n).map(ms).reduce(function(s,u){return s[u.id]=u,s},[]),o=function(u){return u.hasAttribute("xfId")?xn(xn({},t[u.xfId]),_n(u,r)):_n(u,r)};return ls(n).map(o)}function ms(l){return{id:l.getAttribute("numFmtId"),template:l.getAttribute("formatCode")}}function _n(l,e){var n={};if(l.hasAttribute("numFmtId")){var t=l.getAttribute("numFmtId");e[t]?n.numberFormat=e[t]:n.numberFormat={id:t}}return n}function _s(l,e){return l?ss(e.createDocument(l)):[]}function jl(l,e){e&&e.epoch1904&&(l+=1462);var n=70*365+19,t=60*60*1e3;return new Date(Math.round((l-n)*24*t))}function gs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ds(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ds(l,e){if(l){if(typeof l=="string")return er(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return er(l,e)}}function er(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function hs(l,e,n){if(l){var t=e[l];if(!t)throw new Error("Cell style not found: ".concat(l));if(!t.numberFormat)return!1;if(bs.indexOf(Number(t.numberFormat.id))>=0||n.dateFormat&&t.numberFormat.template===n.dateFormat||n.smartDateParser!==!1&&t.numberFormat.template&&ks(t.numberFormat.template))return!0}}var bs=[14,15,16,17,18,19,20,21,22,27,30,36,45,46,47,50,57],vs=/^\[\$-414\]/,ws=/;@$/;function ks(l){l=l.toLowerCase(),l=l.replace(vs,""),l=l.replace(ws,"");for(var e=l.split(/\W+/),n=gs(e),t;!(t=n()).done;){var r=t.value;if(ys.indexOf(r)<0)return!1}return!0}var ys=["ss","mm","h","hh","am","pm","d","dd","m","mm","mmm","mmmm","yy","yyyy","e"];function Ss(l,e,n){var t=n.getInlineStringValue,r=n.getInlineStringXml,o=n.getStyleId,s=n.styles,u=n.values,i=n.properties,a=n.options;switch(e||(e="n"),e){case"str":l=gn(l,a);break;case"inlineStr":if(l=t(),l===void 0)throw new Error('Unsupported "inline string" cell value structure: '.concat(r()));l=gn(l,a);break;case"s":var f=Number(l);if(isNaN(f))throw new Error('Invalid "shared" string index: '.concat(l));if(f>=u.length)throw new Error('An out-of-bounds "shared" string index: '.concat(l));l=u[f],l=gn(l,a);break;case"b":if(l==="1")l=!0;else if(l==="0")l=!1;else throw new Error('Unsupported "boolean" cell value: '.concat(l));break;case"z":l=void 0;break;case"e":l=Cs(l);break;case"d":if(l===void 0)break;var c=new Date(l);if(isNaN(c.valueOf()))throw new Error('Unsupported "date" cell value: '.concat(l));l=c;break;case"n":if(l===void 0)break;var g=hs(o(),s,a);g?(l=tr(l),l=jl(l,i)):l=(a.parseNumber||tr)(l);break;default:throw new TypeError("Cell type not supported: ".concat(e))}return l===void 0&&(l=null),l}function Cs(l){switch(l){case 0:return"#NULL!";case 7:return"#DIV/0!";case 15:return"#VALUE!";case 23:return"#REF!";case 29:return"#NAME?";case 36:return"#NUM!";case 42:return"#N/A";case 43:return"#GETTING_DATA";default:return"#ERROR_".concat(l)}}function gn(l,e){return e.trim!==!1&&(l=l.trim()),l===""&&(l=void 0),l}function tr(l){var e=Number(l);if(isNaN(e))throw new Error('Invalid "numeric" cell value: '.concat(l));return e}var Ts=["","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Os(l){var e=function(a,f){return a-f},n=l.map(function(i){return i.row}).sort(e),t=l.map(function(i){return i.column}).sort(e),r=n[0],o=n[n.length-1],s=t[0],u=t[t.length-1];return[{row:r,column:s},{row:o,column:u}]}function Ls(l){for(var e=0,n=0;n<l.length;)e*=26,e+=Ts.indexOf(l[n]),n++;return e}function Rl(l){return l=l.split(/(\d+)/),[parseInt(l[1]),Ls(l[0].trim())]}function As(l,e,n,t,r,o,s){var u=Rl(l.getAttribute("r")),i=es(e,l),a=i&&i.textContent,f;return l.hasAttribute("t")&&(f=l.getAttribute("t")),{row:u[0],column:u[1],value:Ss(a,f,{getInlineStringValue:function(){return ts(e,l)},getInlineStringXml:function(){return Dl(l)},getStyleId:function(){return l.getAttribute("s")},styles:r,values:t,properties:o,options:s})}}function Is(l,e,n,t,r,o){var s=xo(l);return s.length===0?[]:s.map(function(u){return As(u,l,e,n,t,r,o)})}function Ms(l,e){return Es(l)||Fs(l,e)||Ns(l,e)||Ps()}function Ps(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ns(l,e){if(l){if(typeof l=="string")return nr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nr(l,e)}}function nr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Fs(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Es(l){if(Array.isArray(l))return l}function Ds(l){var e=ns(l);if(e)return e=e.split(":").map(Rl).map(function(n){var t=Ms(n,2),r=t[0],o=t[1];return{row:r,column:o}}),e.length===1&&(e=[e[0],e[0]]),e}function js(l,e,n,t,r,o){var s=e.createDocument(l),u=Is(s,e,n,t,r,o),i=Ds(s)||Os(u);return{cells:u,dimensions:i}}function Rs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Bs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bs(l,e){if(l){if(typeof l=="string")return rr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rr(l,e)}}function rr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function zs(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.rowMap,t=e.accessor,r=t===void 0?function(c){return c}:t,o=e.onlyTrimAtTheEnd,s=l.length-1;s>=0;){for(var u=!0,i=Rs(l[s]),a;!(a=i()).done;){var f=a.value;if(r(f)!==null){u=!1;break}}if(u)l.splice(s,1),n&&n.splice(s,1);else if(o)break;s--}return l}function qs(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Hs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hs(l,e){if(l){if(typeof l=="string")return lr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lr(l,e)}}function lr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Gs(l){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.accessor,t=n===void 0?function(c){return c}:n,r=e.onlyTrimAtTheEnd,o=l[0].length-1;o>=0;){for(var s=!0,u=qs(l),i;!(i=u()).done;){var a=i.value;if(t(a[o])!==null){s=!1;break}}if(s)for(var f=0;f<l.length;)l[f].splice(o,1),f++;else if(r)break;o--}return l}function Us(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Bl(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ws(l,e){return Js(l)||Xs(l,e)||Bl(l,e)||Vs()}function Vs(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bl(l,e){if(l){if(typeof l=="string")return or(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return or(l,e)}}function or(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function Xs(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function Js(l){if(Array.isArray(l))return l}function Ys(l,e){var n=l.dimensions,t=l.cells;if(t.length===0)return[];var r=Ws(n,2);r[0];for(var o=r[1],s=o.column,u=o.row,i=new Array(u),a=0;a<u;){i[a]=new Array(s);for(var f=0;f<s;)i[a][f]=null,f++;a++}for(var c=Us(t),g;!(g=c()).done;){var d=g.value,y=d.row-1,L=d.column-1;L<s&&y<u&&(i[y][L]=d.value)}var S=e.rowMap;if(S)for(var M=0;M<i.length;)S[M]=M,M++;return i=zs(Gs(i,{onlyTrimAtTheEnd:!0}),{onlyTrimAtTheEnd:!0,rowMap:S}),e.transformData&&(i=e.transformData(i)),i}function Ks(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=Qs(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qs(l,e){if(l){if(typeof l=="string")return sr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sr(l,e)}}function sr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ir(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function Zs(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ir(Object(n),!0).forEach(function(t){xs(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function xs(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function ei(l,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};n.sheet||(n=Zs({sheet:1},n));var t=function(g){if(!l[g])throw new Error('"'.concat(g,'" file not found inside the *.xlsx file zip archive'));return l[g]},r=cs(t("xl/_rels/workbook.xml.rels"),e),o=r.sharedStrings?_s(t(r.sharedStrings),e):[],s=r.styles?ps(t(r.styles),e):{},u=us(t("xl/workbook.xml"),e);if(n.getSheets)return u.sheets.map(function(c){var g=c.name;return{name:g}});var i=ti(n.sheet,u.sheets);if(!i||!r.sheets[i])throw ni(n.sheet,u.sheets);var a=js(t(r.sheets[i]),e,o,s,u,n),f=Ys(a,n);return n.properties?{data:f,properties:u}:f}function ti(l,e){if(typeof l=="number"){var n=e[l-1];return n&&n.relationId}for(var t=Ks(e),r;!(r=t()).done;){var o=r.value;if(o.name===l)return o.relationId}}function ni(l,e){var n=e&&e.map(function(t,r){return'"'.concat(t.name,'" (#').concat(r+1,")")}).join(", ");return new Error("Sheet ".concat(typeof l=="number"?"#"+l:'"'+l+'"'," not found in the *.xlsx file.").concat(e?" Available sheets: "+n+".":""))}function wn(l){"@babel/helpers - typeof";return wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wn(l)}function ar(l,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}function ri(l,e,n){return e&&ar(l.prototype,e),n&&ar(l,n),Object.defineProperty(l,"prototype",{writable:!1}),l}function li(l,e){if(!(l instanceof e))throw new TypeError("Cannot call a class as a function")}function oi(l,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");l.prototype=Object.create(e&&e.prototype,{constructor:{value:l,writable:!0,configurable:!0}}),Object.defineProperty(l,"prototype",{writable:!1}),e&&Vt(l,e)}function si(l){var e=zl();return function(){var t=Xt(l),r;if(e){var o=Xt(this).constructor;r=Reflect.construct(t,arguments,o)}else r=t.apply(this,arguments);return ii(this,r)}}function ii(l,e){if(e&&(wn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ai(l)}function ai(l){if(l===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l}function kn(l){var e=typeof Map=="function"?new Map:void 0;return kn=function(t){if(t===null||!fi(t))return t;if(typeof t!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return rn(t,arguments,Xt(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),Vt(r,t)},kn(l)}function rn(l,e,n){return zl()?rn=Reflect.construct:rn=function(r,o,s){var u=[null];u.push.apply(u,o);var i=Function.bind.apply(r,u),a=new i;return s&&Vt(a,s.prototype),a},rn.apply(null,arguments)}function zl(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fi(l){return Function.toString.call(l).indexOf("[native code]")!==-1}function Vt(l,e){return Vt=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t},Vt(l,e)}function Xt(l){return Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Xt(l)}var je=function(l){oi(n,l);var e=si(n);function n(t){var r;return li(this,n),r=e.call(this,"invalid"),r.reason=t,r}return ri(n)}(kn(Error));function ui(l){if(typeof l=="string"){var e=l;if(l=Number(l),String(l)!==e)throw new je("not_a_number")}if(typeof l!="number")throw new je("not_a_number");if(isNaN(l))throw new je("invalid_number");if(!isFinite(l))throw new je("out_of_bounds");return l}function ci(l){if(typeof l=="string")return l;if(typeof l=="number"){if(isNaN(l))throw new je("invalid_number");if(!isFinite(l))throw new je("out_of_bounds");return String(l)}throw new je("not_a_string")}function $i(l){if(typeof l=="boolean")return l;throw new je("not_a_boolean")}function pi(l,e){var n=e.properties;if(l instanceof Date){if(isNaN(l.valueOf()))throw new je("out_of_bounds");return l}if(typeof l=="number"){if(isNaN(l))throw new je("invalid_number");if(!isFinite(l))throw new je("out_of_bounds");var t=jl(l,n);if(isNaN(t.valueOf()))throw new je("out_of_bounds");return t}throw new je("not_a_date")}function mi(l,e){return di(l)||gi(l,e)||ql(l,e)||_i()}function _i(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gi(l,e){var n=l==null?null:typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n!=null){var t=[],r=!0,o=!1,s,u;try{for(n=n.call(l);!(r=(s=n.next()).done)&&(t.push(s.value),!(e&&t.length===e));r=!0);}catch(i){o=!0,u=i}finally{try{!r&&n.return!=null&&n.return()}finally{if(o)throw u}}return t}}function di(l){if(Array.isArray(l))return l}function yn(l){"@babel/helpers - typeof";return yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yn(l)}function hi(l,e){var n=typeof Symbol<"u"&&l[Symbol.iterator]||l["@@iterator"];if(n)return(n=n.call(l)).next.bind(n);if(Array.isArray(l)||(n=ql(l))||e&&l&&typeof l.length=="number"){n&&(l=n);var t=0;return function(){return t>=l.length?{done:!0}:{done:!1,value:l[t++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ql(l,e){if(l){if(typeof l=="string")return fr(l,e);var n=Object.prototype.toString.call(l).slice(8,-1);if(n==="Object"&&l.constructor&&(n=l.constructor.name),n==="Map"||n==="Set")return Array.from(l);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fr(l,e)}}function fr(l,e){(e==null||e>l.length)&&(e=l.length);for(var n=0,t=new Array(e);n<e;n++)t[n]=l[n];return t}function ur(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function cr(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ur(Object(n),!0).forEach(function(t){bi(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):ur(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function bi(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}var $r={isColumnOriented:!1};function vi(l,e,n){n?n=cr(cr({},$r),n):n=$r;var t=n,r=t.isColumnOriented,o=t.rowMap,s=t.ignoreEmptyRows;Si(e),r&&(l=yi(l));for(var u=l[0],i=[],a=[],f=1;f<l.length;f++){var c=Hl(e,l[f],f,u,a,n);(c!==null||s===!1)&&i.push(c)}if(o)for(var g=hi(a),d;!(d=g()).done;){var y=d.value;y.row=o[y.row-1]+1}return{rows:i,errors:a}}function Hl(l,e,n,t,r,o){for(var s={},u=!0,i=function(j){var I=j.column,N=j.value,A=j.error,P=j.reason,F={error:A,row:n+1,column:I,value:N};return P&&(F.reason=P),l[I].type&&(F.type=l[I].type),F},a=[],f=function(){var j=g[c],I=l[j],N=yn(I.type)==="object"&&!Array.isArray(I.type),A=e[t.indexOf(j)];A===void 0&&(A=null);var P=void 0,F=void 0,T=void 0;if(N)P=Hl(I.type,e,n,t,r,o);else if(A===null)P=null;else if(Array.isArray(I.type)){var E=!1,H=ki(A).map(function(D){var B=pr(D,I,o);return B.error&&(P=D,F=B.error,T=B.reason),B.value!==null&&(E=!0),B.value});F||(P=E?H:null)}else{var R=pr(A,I,o);F=R.error,T=R.reason,P=F?A:R.value}!F&&P===null&&(typeof I.required=="function"?a.push({column:j}):I.required===!0&&(F="required")),F?r.push(i({column:j,value:P,error:F,reason:T})):(u&&P!==null&&(u=!1),(P!==null||o.includeNullValues)&&(s[I.prop]=P))},c=0,g=Object.keys(l);c<g.length;c++)f();if(u)return null;for(var d=0,y=a;d<y.length;d++){var L=y[d].column,S=l[L].required(s);S&&r.push(i({column:L,value:null,error:"required"}))}return s}function pr(l,e,n){if(l===null)return{value:null};var t;if(e.parse?t=gt(l,e.parse):e.type?t=wi(l,Array.isArray(e.type)?e.type[0]:e.type,n):t={value:l},t.error)return t;if(t.value!==null){if(e.oneOf&&e.oneOf.indexOf(t.value)<0)return{error:"invalid",reason:"unknown"};if(e.validate)try{e.validate(t.value)}catch(r){return{error:r.message}}}return t}function gt(l,e){try{return l=e(l),l===void 0?{value:null}:{value:l}}catch(t){var n={error:t.message};return t.reason&&(n.reason=t.reason),n}}function wi(l,e,n){switch(e){case String:return gt(l,ci);case Number:return gt(l,ui);case Date:return gt(l,function(t){return pi(t,{properties:n.properties})});case Boolean:return gt(l,$i);default:if(typeof e=="function")return gt(l,e);throw new Error("Unsupported schema type: ".concat(e&&e.name||e))}}function Gl(l,e,n){for(var t=0,r="";n+t<l.length;){var o=l[n+t];if(o===e)return[r,t];if(o==='"'){var s=Gl(l,'"',n+t+1);r+=s[0],t+=1+s[1]+1}else r+=o,t++}return[r,t]}function ki(l){for(var e=[],n=0;n<l.length;){var t=Gl(l,",",n),r=mi(t,2),o=r[0],s=r[1];n+=s+1,e.push(o.trim())}return e}var yi=function(e){return e[0].map(function(n,t){return e.map(function(r){return r[t]})})};function Si(l){for(var e=0,n=Object.keys(l);e<n.length;e++){var t=n[e],r=l[t];if(!r.prop)throw new Error('"prop" not defined for schema entry "'.concat(t,'".'))}}function Sn(l){"@babel/helpers - typeof";return Sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Sn(l)}function Ul(l){for(var e={},n=0,t=Object.keys(l);n<t.length;n++){var r=t[n],o=l[r],s=void 0;Sn(o)==="object"&&(o=Object.keys(l[r])[0],s=Ul(l[r][o])),e[r]={prop:o},s&&(e[r].type=s)}return e}var Ci=["schema","map"];function mr(l,e){var n=Object.keys(l);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(l);e&&(t=t.filter(function(r){return Object.getOwnPropertyDescriptor(l,r).enumerable})),n.push.apply(n,t)}return n}function nn(l){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mr(Object(n),!0).forEach(function(t){Ti(l,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(l,Object.getOwnPropertyDescriptors(n)):mr(Object(n)).forEach(function(t){Object.defineProperty(l,t,Object.getOwnPropertyDescriptor(n,t))})}return l}function Ti(l,e,n){return e in l?Object.defineProperty(l,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):l[e]=n,l}function Oi(l,e){if(l==null)return{};var n=Li(l,e),t,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(l);for(r=0;r<o.length;r++)t=o[r],!(e.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(l,t)&&(n[t]=l[t])}return n}function Li(l,e){if(l==null)return{};var n={},t=Object.keys(l),r,o;for(o=0;o<t.length;o++)r=t[o],!(e.indexOf(r)>=0)&&(n[r]=l[r]);return n}function Ai(l,e,n){var t=n.schema,r=n.map,o=Oi(n,Ci);!t&&r&&(t=Ul(r));var s=ei(l,e,nn(nn({},o),{},{properties:t||o.properties}));return t?vi(s.data,t,nn(nn({},o),{},{properties:s.properties})):s}function Ii(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Yo(l).then(function(n){return Ai(n,Mo,e)})}function Mi(l){let e=new Map;for(let[t,r]of Object.entries(l.schemes))e.set(t,r);l.features=l.features.filter(t=>Pi(t));let n=1;for(let t of l.features){let r=e.get(t.properties.scheme_reference);r.browse&&(t.properties.funding_programme=r.browse.funding_programme,t.properties.current_milestone=r.browse.current_milestone,t.id=n++)}return e}function Pi(l){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(l.properties.id)}async function Ni(l){let e={ID:"id",Inspector:"inspector","Submission Time":"submission_time","Please enter the Scheme Reference number, (e.g. ATF2_WYO_01)":"scheme_reference","Please enter current Design Stage":"current_design_stage","Select Critical Issue type below:":"critical_type","Please Enter Latitude and Longitude \n(Right click on location in Google, left click on information to copy to clipboard, paste below)":"lat_lon",Column1:"location_description","Enter any additional information (e.g. any comments or notes about this critical issue)":"notes"},{rows:n}=await Ii(l,{map:e,sheet:"Form Input"}),t={type:"FeatureCollection",features:[]};for(let r of n){let o=Kl(r.lat_lon.split(",").map(parseFloat).reverse()),s=r;s.submission_time=r.submission_time.toLocaleString(),t.features.push({type:"Feature",properties:s,geometry:{type:"Point",coordinates:o},id:t.features.length+1})}return t}const Cn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function Fi(l){return ut(["get","intervention_type"],{area:ot.area,route:ot.route,crossing:ot.crossing,other:ot.other},"white")}function Ei(l){return[["Areas",ot.area],["Routes",ot.route],["Crossings",ot.crossing],["Other",ot.other]]}const J={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},Re=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function Tn(){let[l,e]=Wl(Cn,J.funding_programmes);return[ut(["get","funding_programme"],l,"grey"),e]}function Di(){let l=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,n]=Wl(l,J.current_milestone);return[ut(["get","current_milestone"],e,"grey"),n]}function Wl(l,e){let n=[],t={},r=0;for(let o of l){let s=e[r++%e.length];t[o]=s,n.push([o,s])}return[t,n]}function ji(l){let e,n;return e=new Mn({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2&&(o.rows=t[1]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ri(l){let e,n,t,r,o;function s(i){l[3](i)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return l[0]!==void 0&&(u.value=l[0]),e=new dt({props:u}),U.push(()=>W(e,"value",s)),e.$on("change",l[2]),r=new Be({props:{label:"Legend",$$slots:{default:[ji]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};!n&&a&1&&(n=!0,f.value=i[0],V(()=>n=!1)),e.$set(f);const c={};a&66&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Bi(l,e,n){let t;Se(l,An,a=>n(4,t=a));let r="fundingProgramme",[o,s]=Tn();function u(){let a;r=="interventionType"?(a=Fi(),n(1,s=Ei())):r=="fundingProgramme"?n(1,[a,s]=Tn(),s):r=="currentMilestone"&&n(1,[a,s]=Di(),s),t.setPaintProperty("interventions-points","circle-color",a),t.setPaintProperty("interventions-lines","line-color",a),t.setPaintProperty("interventions-polygons","fill-color",a),t.setPaintProperty("interventions-polygons-outlines","line-color",a)}function i(a){r=a,n(0,r)}return[r,s,u,i]}class zi extends K{constructor(e){super(),Q(this,e,Bi,Ri,X,{})}}const vt=Zt({type:"FeatureCollection",features:[],schemes:{}}),sn=Zt(new Map),_r=Zt(!0),yt=Zt(""),St=Zt("");function qi(l){let e;return{c(){e=k("Reset all filters")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hi(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gi(l){let e,n,t,r,o,s;return t=new bt({props:{$$slots:{default:[Hi]},$$scope:{ctx:l}}}),t.$on("click",l[16]),{c(){e=C("input"),n=O(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,i){$(u,e,i),Je(e,l[6]),$(u,n,i),b(t,u,i),r=!0,o||(s=ft(e,"input",l[15]),o=!0)},p(u,i){i&64&&e.value!==u[6]&&Je(e,u[6]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function Ui(l){let e;return{c(){e=k("Clear")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Wi(l){let e,n,t,r,o,s;return t=new bt({props:{$$slots:{default:[Ui]},$$scope:{ctx:l}}}),t.$on("click",l[18]),{c(){e=C("input"),n=O(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,i){$(u,e,i),Je(e,l[5]),$(u,n,i),b(t,u,i),r=!0,o||(s=ft(e,"input",l[17]),o=!0)},p(u,i){i&32&&e.value!==u[5]&&Je(e,u[5]);const a={};i&16777216&&(a.$$scope={dirty:i,ctx:u}),t.$set(a)},i(u){r||(m(t.$$.fragment,u),r=!0)},o(u){_(t.$$.fragment,u),r=!1},d(u){u&&(p(e),p(n)),v(t,u),o=!1,s()}}}function Vi(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,L,S,M;e=new bt({props:{$$slots:{default:[qi]},$$scope:{ctx:l}}}),e.$on("click",l[11]);function j(T){l[12](T)}let I={label:"Authority or region",choices:l[7],emptyOption:!0};l[2]!==void 0&&(I.value=l[2]),t=new dt({props:I}),U.push(()=>W(t,"value",j));function N(T){l[13](T)}let A={label:"Funding programme",choices:l[8],emptyOption:!0};l[3]!==void 0&&(A.value=l[3]),s=new dt({props:A}),U.push(()=>W(s,"value",N));function P(T){l[14](T)}let F={label:"Current milestone",choices:l[9],emptyOption:!0};return l[4]!==void 0&&(F.value=l[4]),a=new dt({props:F}),U.push(()=>W(a,"value",P)),g=new dn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Gi]},$$scope:{ctx:l}}}),y=new dn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[Wi]},$$scope:{ctx:l}}}),S=new zi({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(s.$$.fragment),i=O(),h(a.$$.fragment),c=O(),h(g.$$.fragment),d=O(),h(y.$$.fragment),L=O(),h(S.$$.fragment)},m(T,E){b(e,T,E),$(T,n,E),b(t,T,E),$(T,o,E),b(s,T,E),$(T,i,E),b(a,T,E),$(T,c,E),b(g,T,E),$(T,d,E),b(y,T,E),$(T,L,E),b(S,T,E),M=!0},p(T,E){const H={};E&16777216&&(H.$$scope={dirty:E,ctx:T}),e.$set(H);const R={};E&128&&(R.choices=T[7]),!r&&E&4&&(r=!0,R.value=T[2],V(()=>r=!1)),t.$set(R);const D={};E&256&&(D.choices=T[8]),!u&&E&8&&(u=!0,D.value=T[3],V(()=>u=!1)),s.$set(D);const B={};E&512&&(B.choices=T[9]),!f&&E&16&&(f=!0,B.value=T[4],V(()=>f=!1)),a.$set(B);const Y={};E&16777280&&(Y.$$scope={dirty:E,ctx:T}),g.$set(Y);const re={};E&16777248&&(re.$$scope={dirty:E,ctx:T}),y.$set(re)},i(T){M||(m(e.$$.fragment,T),m(t.$$.fragment,T),m(s.$$.fragment,T),m(a.$$.fragment,T),m(g.$$.fragment,T),m(y.$$.fragment,T),m(S.$$.fragment,T),M=!0)},o(T){_(e.$$.fragment,T),_(t.$$.fragment,T),_(s.$$.fragment,T),_(a.$$.fragment,T),_(g.$$.fragment,T),_(y.$$.fragment,T),_(S.$$.fragment,T),M=!1},d(T){T&&(p(n),p(o),p(i),p(c),p(d),p(L)),v(e,T),v(t,T),v(s,T),v(a,T),v(g,T),v(y,T),v(S,T)}}}function Xi(l){let e,n=l[0].size.toLocaleString()+"",t,r,o=l[10].route.toLocaleString()+"",s,u,i=l[10].area.toLocaleString()+"",a,f,c=l[10].crossing.toLocaleString()+"",g,d,y=l[10].other.toLocaleString()+"",L,S,M=gr(l[10].totalLength).toFixed(1)+"",j,I;return{c(){e=k("Showing "),t=k(n),r=k(" schemes ("),s=k(o),u=k(`
    routes, `),a=k(i),f=k(` areas,
    `),g=k(c),d=k(" crossings, "),L=k(y),S=k(`
    other, with total LineString length of `),j=k(M),I=k(" miles)")},m(N,A){$(N,e,A),$(N,t,A),$(N,r,A),$(N,s,A),$(N,u,A),$(N,a,A),$(N,f,A),$(N,g,A),$(N,d,A),$(N,L,A),$(N,S,A),$(N,j,A),$(N,I,A)},p(N,A){A&1&&n!==(n=N[0].size.toLocaleString()+"")&&z(t,n),A&1024&&o!==(o=N[10].route.toLocaleString()+"")&&z(s,o),A&1024&&i!==(i=N[10].area.toLocaleString()+"")&&z(a,i),A&1024&&c!==(c=N[10].crossing.toLocaleString()+"")&&z(g,c),A&1024&&y!==(y=N[10].other.toLocaleString()+"")&&z(L,y),A&1024&&M!==(M=gr(N[10].totalLength).toFixed(1)+"")&&z(j,M)},d(N){N&&(p(e),p(t),p(r),p(s),p(u),p(a),p(f),p(g),p(d),p(L),p(S),p(j),p(I))}}}function Ji(l){let e,n,t;function r(s){l[19](s)}let o={$$slots:{default:[Xi]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&16778241&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Yi(l){let e,n,t,r;return e=new Be({props:{label:"Filters",$$slots:{default:[Vi]},$$scope:{ctx:l}}}),t=new Ke({props:{small:!0,$$slots:{default:[Ji]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&16778236&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16778243&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function gr(l){return l*621371e-9}function Ki(l,e,n){let t,r,o,s;Se(l,St,R=>n(5,t=R)),Se(l,yt,R=>n(6,r=R)),Se(l,vt,R=>n(20,o=R)),Se(l,sn,R=>n(21,s=R));let{schemesToBeShown:u=new Set}=e,{show:i=!0}=e,a=[],f="",c=[],g=new Set(Cn.slice(0,-1)),d="",y=[],L="",S={area:0,route:0,crossing:0,other:0,totalLength:0};In(()=>{var Y,re,oe;let R=new Set,D=new Set,B=new Set;for(let me of s.values())(Y=me.browse)!=null&&Y.authority_or_region&&R.add(me.browse.authority_or_region),(re=me.browse)!=null&&re.funding_programme&&D.add(me.browse.funding_programme),(oe=me.browse)!=null&&oe.current_milestone&&B.add(me.browse.current_milestone);n(7,a=Array.from(R.entries())),a.sort(),n(8,c=Cn.map(me=>[me,me])),n(9,y=Array.from(B.entries())),y.sort()});function M(R,D,B,Y,re){let oe=R.toLowerCase(),me=D.toLowerCase(),Le=se=>{var Ae,Te,Ie,_e,ve,he;if(oe&&!((Ae=se.properties.name)!=null&&Ae.toLowerCase().includes(oe))&&!((Te=se.properties.description)!=null&&Te.toLowerCase().includes(oe)))return!1;if(me||B||Y||re){let fe=s.get(se.properties.scheme_reference);if(B&&((Ie=fe.browse)==null?void 0:Ie.authority_or_region)!=B||Y&&Y!=="Other"&&((_e=fe.browse)==null?void 0:_e.funding_programme)!=Y||Y==="Other"&&g.has(((ve=fe.browse)==null?void 0:ve.funding_programme)??"")||re&&((he=fe.browse)==null?void 0:he.current_milestone)!=re||me&&!fe.scheme_reference.toLowerCase().includes(me)&&!(fe.scheme_name??"").toLowerCase().includes(me))return!1}return!0};n(0,u=new Set(o.features.filter(Le).map(se=>se.properties.scheme_reference))),n(10,S={area:0,route:0,crossing:0,other:0,totalLength:0});let Ne=se=>{var Ae,Te;return!(!u.has(se.properties.scheme_reference)||oe&&!((Ae=se.properties.name)!=null&&Ae.toLowerCase().includes(oe))&&!((Te=se.properties.description)!=null&&Te.toLowerCase().includes(oe)))};for(let se of o.features)Ne(se)?(delete se.properties.hide_while_editing,n(10,S[se.properties.intervention_type]++,S),se.geometry.type=="LineString"&&se.properties.length_meters&&n(10,S.totalLength+=se.properties.length_meters,S)):se.properties.hide_while_editing=!0;vt.set(o),n(10,S)}function j(){n(2,f=""),n(3,d=""),n(4,L=""),at(yt,r="",r),at(St,t="",t)}function I(R){f=R,n(2,f)}function N(R){d=R,n(3,d)}function A(R){L=R,n(4,L)}function P(){r=this.value,yt.set(r)}const F=()=>at(yt,r="",r);function T(){t=this.value,St.set(t)}const E=()=>at(St,t="",t);function H(R){i=R,n(1,i)}return l.$$set=R=>{"schemesToBeShown"in R&&n(0,u=R.schemesToBeShown),"show"in R&&n(1,i=R.show)},l.$$.update=()=>{l.$$.dirty&124&&M(r,t,f,d,L)},[u,i,f,d,L,t,r,a,c,y,S,j,I,N,A,P,F,T,E,H]}class Qi extends K{constructor(e){super(),Q(this,e,Ki,Yi,X,{schemesToBeShown:0,show:1})}}function Zi(l){let e;return{c(){e=k(`Open Government License
  `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xi(l){let e,n,t,r,o;return t=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[Zi]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("License: "),h(t.$$.fragment),r=k(`. Contains OS data  Crown copyright and database right
  2023.`)},m(s,u){$(s,e,u),w(e,n),b(t,e,null),w(e,r),o=!0},p(s,[u]){const i={};u&1&&(i.$$scope={dirty:u,ctx:s}),t.$set(i)},i(s){o||(m(t.$$.fragment,s),o=!0)},o(s){_(t.$$.fragment,s),o=!1},d(s){s&&p(e),v(t)}}}class Pe extends K{constructor(e){super(),Q(this,e,null,xi,X,{})}}function dr(l,e,n){const t=l.slice();return t[2]=e[n],t}function hr(l,e,n){const t=l.slice();return t[5]=e[n],t}function br(l){let e,n;return{c(){e=C("span"),n=k(`
    `),ye(e,"background",l[5]),ye(e,"width","100%"),ye(e,"border","1px solid black")},m(t,r){$(t,e,r),w(e,n)},p(t,r){r&1&&ye(e,"background",t[5])},d(t){t&&p(e)}}}function vr(l){let e,n=l[2]+"",t;return{c(){e=C("span"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&2&&n!==(n=r[2]+"")&&z(t,n)},d(r){r&&p(e)}}}function ea(l){let e,n,t,r=ze(l[0]),o=[];for(let i=0;i<r.length;i+=1)o[i]=br(hr(l,r,i));let s=ze(l[1]),u=[];for(let i=0;i<s.length;i+=1)u[i]=vr(dr(l,s,i));return{c(){e=C("div");for(let i=0;i<o.length;i+=1)o[i].c();n=O(),t=C("div");for(let i=0;i<u.length;i+=1)u[i].c();ye(e,"display","flex"),ye(t,"display","flex"),ye(t,"justify-content","space-between")},m(i,a){$(i,e,a);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(e,null);$(i,n,a),$(i,t,a);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(i,[a]){if(a&1){r=ze(i[0]);let f;for(f=0;f<r.length;f+=1){const c=hr(i,r,f);o[f]?o[f].p(c,a):(o[f]=br(c),o[f].c(),o[f].m(e,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=r.length}if(a&2){s=ze(i[1]);let f;for(f=0;f<s.length;f+=1){const c=dr(i,s,f);u[f]?u[f].p(c,a):(u[f]=vr(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=s.length}},i:ne,o:ne,d(i){i&&(p(e),p(n),p(t)),ht(o,i),ht(u,i)}}}function ta(l,e,n){let{colorScale:t}=e,{limits:r}=e;return l.$$set=o=>{"colorScale"in o&&n(0,t=o.colorScale),"limits"in o&&n(1,r=o.limits)},[t,r]}class Ge extends K{constructor(e){super(),Q(this,e,ta,ea,X,{colorScale:0,limits:1})}}function wr(l){const e=l[13].OA21CD;l[14]=e;const n=l[13][l[3]];l[15]=n}function na(l){let e;return{c(){e=k("Percent of households with a car")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ra(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function la(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function oa(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sa(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[ra]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[la]},$$scope:{ctx:l}}}),f=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[oa]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),u=O(),i=C("p"),a=k("License: "),h(f.$$.fragment),c=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(d,u,y),$(d,i,y),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,y){const L={};y&65536&&(L.$$scope={dirty:y,ctx:d}),t.$set(L);const S={};y&65536&&(S.$$scope={dirty:y,ctx:d}),o.$set(S);const M={};y&65536&&(M.$$scope={dirty:y,ctx:d}),f.$set(M)},i(d){g||(m(t.$$.fragment,d),m(o.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(o.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(u),p(i)),v(t),v(o),v(f)}}}function ia(l){let e,n,t;return n=new ce({props:{$$slots:{default:[sa]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function kr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function aa(l){let e;return{c(){e=k("Average cars per household")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function fa(l){let e;return{c(){e=k(`NOMIS TS045
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ua(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ca(l){let e;return{c(){e=k(`Open Government License
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $a(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y;return o=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[fa]},$$scope:{ctx:l}}}),u=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ua]},$$scope:{ctx:l}}}),g=new x({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ca]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,n=O(),t=C("p"),r=k("Car/van availability data is from the 2021 census, via "),h(o.$$.fragment),s=k(". Output area boundaries from "),h(u.$$.fragment),i=k("."),a=O(),f=C("p"),c=k("License: "),h(g.$$.fragment),d=k(`. Contains OS data  Crown copyright and database
        right 2023.`)},m(L,S){$(L,e,S),$(L,n,S),$(L,t,S),w(t,r),b(o,t,null),w(t,s),b(u,t,null),w(t,i),$(L,a,S),$(L,f,S),w(f,c),b(g,f,null),w(f,d),y=!0},p(L,S){const M={};S&65536&&(M.$$scope={dirty:S,ctx:L}),o.$set(M);const j={};S&65536&&(j.$$scope={dirty:S,ctx:L}),u.$set(j);const I={};S&65536&&(I.$$scope={dirty:S,ctx:L}),g.$set(I)},i(L){y||(m(o.$$.fragment,L),m(u.$$.fragment,L),m(g.$$.fragment,L),y=!0)},o(L){_(o.$$.fragment,L),_(u.$$.fragment,L),_(g.$$.fragment,L),y=!1},d(L){L&&(p(e),p(n),p(t),p(a),p(f)),v(o),v(u),v(g)}}}function pa(l){let e,n,t;return n=new ce({props:{$$slots:{default:[$a]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function yr(l){let e,n;return e=new Ge({props:{colorScale:l[4],limits:l[6]()}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ma(l){let e;return{c(){e=k("Population density")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _a(l){let e;return{c(){e=k(`NOMIS TS006
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ga(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function da(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[_a]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[ga]},$$scope:{ctx:l}}}),i=new Pe({}),{c(){e=C("p"),n=k("Population density data is from the 2021 census, via "),h(t.$$.fragment),r=k(". Output area boundaries from "),h(o.$$.fragment),s=k("."),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&65536&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&65536&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function ha(l){let e,n,t;return n=new ce({props:{$$slots:{default:[da]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&65536&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Sr(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[4],limits:l[6]().map(Ta)}}),{c(){e=C("p"),e.textContent="(people per square kilometres)",n=O(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function ba(l){let e,n,t,r=l[15].toLocaleString()+"",o,s,u=l[14]+"",i;return{c(){e=C("p"),n=k("There are "),t=C("b"),o=k(r),s=k(`
          people per square kilometre in `),i=k(u)},m(a,f){$(a,e,f),w(e,n),w(e,t),w(t,o),w(e,s),w(e,i)},p(a,f){f&8200&&r!==(r=a[15].toLocaleString()+"")&&z(o,r),f&8192&&u!==(u=a[14]+"")&&z(i,u)},d(a){a&&p(e)}}}function va(l){let e,n,t=l[14]+"",r,o,s,u=l[15]+"",i,a;return{c(){e=C("p"),n=k("Households in "),r=k(t),o=k(` have an average of
          `),s=C("b"),i=k(u),a=k(`
          cars`)},m(f,c){$(f,e,c),w(e,n),w(e,r),w(e,o),w(e,s),w(s,i),w(e,a)},p(f,c){c&8192&&t!==(t=f[14]+"")&&z(r,t),c&8200&&u!==(u=f[15]+"")&&z(i,u)},d(f){f&&p(e)}}}function wa(l){let e,n,t=l[15]+"",r,o,s,u=l[14]+"",i,a;return{c(){e=C("p"),n=C("b"),r=k(t),o=k("%"),s=k(`
          of households in `),i=k(u),a=k(" have 1 or more cars")},m(f,c){$(f,e,c),w(e,n),w(n,r),w(n,o),w(e,s),w(e,i),w(e,a)},p(f,c){c&8200&&t!==(t=f[15]+"")&&z(r,t),c&8192&&u!==(u=f[14]+"")&&z(i,u)},d(f){f&&p(e)}}}function ka(l){wr(l);let e;function n(o,s){return o[3]=="percent_households_with_car"?wa:o[3]=="average_cars_per_household"?va:ba}let t=n(l),r=t(l);return{c(){r.c(),e=qe()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){wr(o),t===(t=n(o))&&r?r.p(o,s):(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function ya(l){let e,n;return e=new ae({props:{$$slots:{default:[ka,({props:t})=>({13:t}),({props:t})=>t?8192:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&73736&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sa(l){let e,n,t,r;const o=[q(Ze),{sourceLayer:Ze},{paint:{"fill-color":we(["get",l[3]],l[6](),l[4]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:l[3]!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ya]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",l[5]);const u=[q(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[3]!=""?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Ce({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&88?te(o,[f&0&&ie(q(Ze)),f&0&&{sourceLayer:Ze},f&88&&{paint:{"fill-color":we(["get",a[3]],a[6](),a[4]),"fill-opacity":Z(.5,.7)}},f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}},o[4],o[5],o[6]]):{};f&65544&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&8?te(u,[f&0&&ie(q(`${Ze}-outline`)),f&0&&{sourceLayer:Ze},u[2],f&8&&{layout:{visibility:a[3]!=""?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ca(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y;function L(T){l[7](T)}let S={$$slots:{right:[ia],default:[na]},$$scope:{ctx:l}};l[0]!==void 0&&(S.checked=l[0]),e=new le({props:S}),U.push(()=>W(e,"checked",L)),e.$on("change",l[8]);let M=l[3]=="percent_households_with_car"&&kr(l);function j(T){l[9](T)}let I={$$slots:{right:[pa],default:[aa]},$$scope:{ctx:l}};l[1]!==void 0&&(I.checked=l[1]),o=new le({props:I}),U.push(()=>W(o,"checked",j)),o.$on("change",l[10]);let N=l[3]=="average_cars_per_household"&&yr(l);function A(T){l[11](T)}let P={$$slots:{right:[ha],default:[ma]},$$scope:{ctx:l}};l[2]!==void 0&&(P.checked=l[2]),a=new le({props:P}),U.push(()=>W(a,"checked",A)),a.$on("change",l[12]);let F=l[3]=="population_density"&&Sr(l);return d=new be({props:{url:`pmtiles://${de()}/v1/${Ze}.pmtiles`,$$slots:{default:[Sa]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),M&&M.c(),r=O(),h(o.$$.fragment),u=O(),N&&N.c(),i=O(),h(a.$$.fragment),c=O(),F&&F.c(),g=O(),h(d.$$.fragment)},m(T,E){b(e,T,E),$(T,t,E),M&&M.m(T,E),$(T,r,E),b(o,T,E),$(T,u,E),N&&N.m(T,E),$(T,i,E),b(a,T,E),$(T,c,E),F&&F.m(T,E),$(T,g,E),b(d,T,E),y=!0},p(T,[E]){const H={};E&65536&&(H.$$scope={dirty:E,ctx:T}),!n&&E&1&&(n=!0,H.checked=T[0],V(()=>n=!1)),e.$set(H),T[3]=="percent_households_with_car"?M?(M.p(T,E),E&8&&m(M,1)):(M=kr(T),M.c(),m(M,1),M.m(r.parentNode,r)):M&&($e(),_(M,1,1,()=>{M=null}),pe());const R={};E&65536&&(R.$$scope={dirty:E,ctx:T}),!s&&E&2&&(s=!0,R.checked=T[1],V(()=>s=!1)),o.$set(R),T[3]=="average_cars_per_household"?N?(N.p(T,E),E&8&&m(N,1)):(N=yr(T),N.c(),m(N,1),N.m(i.parentNode,i)):N&&($e(),_(N,1,1,()=>{N=null}),pe());const D={};E&65536&&(D.$$scope={dirty:E,ctx:T}),!f&&E&4&&(f=!0,D.checked=T[2],V(()=>f=!1)),a.$set(D),T[3]=="population_density"?F?(F.p(T,E),E&8&&m(F,1)):(F=Sr(T),F.c(),m(F,1),F.m(g.parentNode,g)):F&&($e(),_(F,1,1,()=>{F=null}),pe());const B={};E&65544&&(B.$$scope={dirty:E,ctx:T}),d.$set(B)},i(T){y||(m(e.$$.fragment,T),m(M),m(o.$$.fragment,T),m(N),m(a.$$.fragment,T),m(F),m(d.$$.fragment,T),y=!0)},o(T){_(e.$$.fragment,T),_(M),_(o.$$.fragment,T),_(N),_(a.$$.fragment,T),_(F),_(d.$$.fragment,T),y=!1},d(T){T&&(p(t),p(r),p(u),p(i),p(c),p(g)),v(e,T),M&&M.d(T),v(o,T),N&&N.d(T),v(a,T),F&&F.d(T),v(d,T)}}}let Ze="census_output_areas";const Ta=l=>l.toLocaleString();function Oa(l,e,n){let t=J.sequential_low_to_high,r=!1,o=!1,s=!1,u="";function i(S){let M=S.detail.features[0].properties.OA21CD;u=="percent_households_with_car"||u=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${M}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${M}`,"_blank")}function a(){return u=="percent_households_with_car"?[0,20,40,60,80,100]:u=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}function f(S){r=S,n(0,r)}const c=()=>{n(1,o=!1),n(2,s=!1)};function g(S){o=S,n(1,o)}const d=()=>{n(0,r=!1),n(2,s=!1)};function y(S){s=S,n(2,s)}const L=()=>{n(0,r=!1),n(1,o=!1)};return l.$$.update=()=>{l.$$.dirty&7&&(r?n(3,u="percent_households_with_car"):o?n(3,u="average_cars_per_household"):s?n(3,u="population_density"):n(3,u=""))},[r,o,s,u,t,i,a,f,c,g,d,y,L]}class La extends K{constructor(e){super(),Q(this,e,Oa,Ca,X,{})}}function Aa(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Combined authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Ia(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ma(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[Ia]},$$scope:{ctx:l}}}),s=new Pe({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of December 2022."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Pa(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Ma]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Na(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Fa(l){let e,n;return e=new ae({props:{$$slots:{default:[Na,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Ea(l){let e,n,t,r;const o=[q(Ct),{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Fa]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",ja);const u=[q(`${Ct}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Ce({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ie(q(Ct)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ie(q(`${Ct}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Da(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Pa],default:[Aa]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new wt({props:{data:`${de()}/v1/${Ct}.geojson`,$$slots:{default:[Ea]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Ct="combined_authorities";function ja(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Ra(l,e,n){let t=J.combined_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Ba extends K{constructor(e){super(),Q(this,e,Ra,Da,X,{})}}function za(l){let e;return{c(){e=k("Indices of Multiple Deprivation")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qa(l){let e;return{c(){e=k(`DLUCH GIS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ha(l){let e;return{c(){e=k(`here
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ga(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[qa]},$$scope:{ctx:l}}}),o=new x({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[Ha]},$$scope:{ctx:l}}}),i=new Pe({}),{c(){e=C("p"),n=k("The 2019 English IMD scores come from "),h(t.$$.fragment),r=k(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(o.$$.fragment),s=k("."),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&32&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function Ua(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Ga]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Cr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Wa(l){let e,n=l[4].LSOA11CD+"",t,r,o,s=l[4].score+"",u,i,a,f,c,g=l[4].rank.toLocaleString()+"",d,y;return{c(){e=C("p"),t=k(n),r=k(` has an IMD score of
        `),o=C("b"),u=k(s),i=O(),a=C("p"),f=k("Rank: "),c=C("b"),d=k(g),y=k(`
        / 32,844 LSOAs`)},m(L,S){$(L,e,S),w(e,t),w(e,r),w(e,o),w(o,u),$(L,i,S),$(L,a,S),w(a,f),w(a,c),w(c,d),w(a,y)},p(L,S){S&16&&n!==(n=L[4].LSOA11CD+"")&&z(t,n),S&16&&s!==(s=L[4].score+"")&&z(u,s),S&16&&g!==(g=L[4].rank.toLocaleString()+"")&&z(d,g)},d(L){L&&(p(e),p(i),p(a))}}}function Va(l){let e,n;return e=new ae({props:{$$slots:{default:[Wa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xa(l){let e,n,t,r;const o=[q(xe),{sourceLayer:xe},{paint:{"fill-color":we(["-",10,["get","decile"]],l[2],l[1]),"fill-opacity":Z(.5,.7)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[Va]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s});const u=[q(`${xe}-outline`),{sourceLayer:xe},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Ce({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ie(q(xe)),f&0&&{sourceLayer:xe},f&6&&{paint:{"fill-color":we(["-",10,["get","decile"]],a[2],a[1]),"fill-opacity":Z(.5,.7)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?te(u,[f&0&&ie(q(`${xe}-outline`)),f&0&&{sourceLayer:xe},u[2],f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function Ja(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Ua],default:[za]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Cr(l);return o=new be({props:{url:`pmtiles://${de()}/v1/${xe}.pmtiles`,$$slots:{default:[Xa]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Cr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let xe="imd";function Ya(l,e,n){let t=J.sequential_low_to_high,r=[0,2,4,6,8,10],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Ka extends K{constructor(e){super(),Q(this,e,Ya,Ja,X,{})}}function Qa(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Authority Districts`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Za(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function xa(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::local-authority-districts-may-2023-boundaries-uk-buc/explore",$$slots:{default:[Za]},$$scope:{ctx:l}}}),s=new Pe({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function ef(l){let e,n,t;return n=new ce({props:{$$slots:{default:[xa]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function tf(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function nf(l){let e,n;return e=new ae({props:{$$slots:{default:[tf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function rf(l){let e,n,t,r;const o=[q(Tt),{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[nf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",of);const u=[q(`${Tt}-outline`),{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Ce({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ie(q(Tt)),f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[3],o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ie(q(`${Tt}-outline`)),f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function lf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[ef],default:[Qa]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new wt({props:{data:`${de()}/v1/${Tt}.geojson`,$$slots:{default:[rf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Tt="local_authority_districts";function of(l){window.open(`https://www.ons.gov.uk/visualisations/areas/${l.detail.features[0].properties.LAD23CD}`,"_blank")}function sf(l,e,n){let t=J.local_authority_districts,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class af extends K{constructor(e){super(),Q(this,e,sf,lf,X,{})}}function ff(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Local Planning Authorities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function uf(l){let e;return{c(){e=k(`local authority
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function cf(l){let e;return{c(){e=k(`national park authorit
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function $f(l){let e;return{c(){e=k(`development corporation
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pf(l){let e;return{c(){e=k("this map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mf(l){let e;return{c(){e=k(`planning.data.gov.uk
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _f(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,L,S,M,j,I,N,A,P;return t=new x({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[uf]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[cf]},$$scope:{ctx:l}}}),u=new x({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[$f]},$$scope:{ctx:l}}}),d=new x({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[pf]},$$scope:{ctx:l}}}),j=new x({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[mf]},$$scope:{ctx:l}}}),A=new Pe({}),{c(){e=C("p"),n=k("LPAs may be a "),h(t.$$.fragment),r=k(", "),h(o.$$.fragment),s=k("y, or "),h(u.$$.fragment),i=k("."),a=O(),f=C("p"),c=C("strong"),g=k(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(d.$$.fragment),y=k(" to get more details."),L=O(),S=C("p"),M=k("Data from ONS Geography via "),h(j.$$.fragment),I=k(", as of November 2022."),N=O(),h(A.$$.fragment)},m(F,T){$(F,e,T),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),b(u,e,null),w(e,i),$(F,a,T),$(F,f,T),w(f,c),w(c,g),b(d,c,null),w(c,y),$(F,L,T),$(F,S,T),w(S,M),b(j,S,null),w(S,I),$(F,N,T),b(A,F,T),P=!0},p(F,T){const E={};T&16&&(E.$$scope={dirty:T,ctx:F}),t.$set(E);const H={};T&16&&(H.$$scope={dirty:T,ctx:F}),o.$set(H);const R={};T&16&&(R.$$scope={dirty:T,ctx:F}),u.$set(R);const D={};T&16&&(D.$$scope={dirty:T,ctx:F}),d.$set(D);const B={};T&16&&(B.$$scope={dirty:T,ctx:F}),j.$set(B)},i(F){P||(m(t.$$.fragment,F),m(o.$$.fragment,F),m(u.$$.fragment,F),m(d.$$.fragment,F),m(j.$$.fragment,F),m(A.$$.fragment,F),P=!0)},o(F){_(t.$$.fragment,F),_(o.$$.fragment,F),_(u.$$.fragment,F),_(d.$$.fragment,F),_(j.$$.fragment,F),_(A.$$.fragment,F),P=!1},d(F){F&&(p(e),p(a),p(f),p(L),p(S),p(N)),v(t),v(o),v(u),v(d),v(j),v(A,F)}}}function gf(l){let e,n,t;return n=new ce({props:{$$slots:{default:[_f]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function df(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function hf(l){let e,n;return e=new ae({props:{$$slots:{default:[df,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bf(l){let e,n,t,r;const o=[q(et),{sourceLayer:et},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let s={$$slots:{default:[hf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s});const u=[q(`${et}-outline`),{sourceLayer:et},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Ce({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ie(q(et)),f&0&&{sourceLayer:et},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ie(q(`${et}-outline`)),f&0&&{sourceLayer:et},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function vf(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[gf],default:[ff]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${de()}/v1/${et}.pmtiles`,$$slots:{default:[bf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let et="local_planning_authorities";function wf(l,e,n){let t=J.local_planning_authorities,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class kf extends K{constructor(e){super(),Q(this,e,wf,vf,X,{})}}function yf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Parliamentary constituencies`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Sf(l){let e;return{c(){e=k(`Ordnance Survey Boundary-Line
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Cf(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Sf]},$$scope:{ctx:l}}}),s=new Pe({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Tf(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Cf]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Of(l){let e,n=l[3].Name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].Name+"")&&z(t,n)},d(r){r&&p(e)}}}function Lf(l){let e,n;return e=new ae({props:{$$slots:{default:[Of,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Af(l){let e,n,t,r;const o=[q(tt),{sourceLayer:tt},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[Lf]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",Mf);const u=[q(`${tt}-outline`),{sourceLayer:tt},{paint:{"line-color":l[1],"line-width":5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Ce({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ie(q(tt)),f&0&&{sourceLayer:tt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ie(q(`${tt}-outline`)),f&0&&{sourceLayer:tt},f&2&&{paint:{"line-color":a[1],"line-width":5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function If(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Tf],default:[yf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${de()}/v1/${tt}.pmtiles`,$$slots:{default:[Af]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let tt="parliamentary_constituencies";function Mf(l){let e=l.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Pf(l,e,n){let t=J.parliamentary_constituencies,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Nf extends K{constructor(e){super(),Q(this,e,Pf,If,X,{})}}function Ff(l){let e;return{c(){e=k("Pollution")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ef(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Df(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Ef]},$$scope:{ctx:l}}}),i=new Pe({}),{c(){e=C("p"),n=k("Most layers show air quality data from "),h(t.$$.fragment),r=k(`. The measurements are annual means, in units of
        gm
        `),o=C("sup"),o.textContent="3",s=k(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),w(e,o),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),t.$set(g)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(i,f)}}}function jf(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Df]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&2048&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Tr(l){let e,n,t,r,o=l[3](l[0])+"",s,u,i,a,f,c,g,d,y,L,S,M,j;function I(A){l[7](A)}let N={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return l[0]!==void 0&&(N.value=l[0]),e=new dt({props:N}),U.push(()=>W(e,"value",I)),{c(){h(e.$$.fragment),t=O(),r=C("p"),s=k(o),u=O(),i=C("div"),a=C("label"),f=k(`Opacity
      `),c=C("input"),g=O(),d=C("img"),G(c,"type","range"),G(c,"min","0"),G(c,"max","100"),ln(d.src,y=l[5](l[0]))||G(d,"src",y),G(d,"width",150),G(d,"alt",L=`Legend for ${l[0]} layer`)},m(A,P){b(e,A,P),$(A,t,P),$(A,r,P),w(r,s),$(A,u,P),$(A,i,P),w(i,a),w(a,f),w(a,c),Je(c,l[2]),$(A,g,P),$(A,d,P),S=!0,M||(j=[ft(c,"change",l[8]),ft(c,"input",l[8])],M=!0)},p(A,P){const F={};!n&&P&1&&(n=!0,F.value=A[0],V(()=>n=!1)),e.$set(F),(!S||P&1)&&o!==(o=A[3](A[0])+"")&&z(s,o),P&4&&Je(c,A[2]),(!S||P&1&&!ln(d.src,y=A[5](A[0])))&&G(d,"src",y),(!S||P&1&&L!==(L=`Legend for ${A[0]} layer`))&&G(d,"alt",L)},i(A){S||(m(e.$$.fragment,A),S=!0)},o(A){_(e.$$.fragment,A),S=!1},d(A){A&&(p(t),p(r),p(u),p(i),p(g),p(d)),v(e,A),M=!1,Cl(j)}}}function Rf(l){let e,n;const t=[q("pollution"),{paint:{"raster-opacity":l[2]/100}},{layout:{visibility:l[1]?"visible":"none"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new uo({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&6?te(t,[t[0],s&4&&{paint:{"raster-opacity":o[2]/100}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Bf(l){let e,n,t,r,o,s;function u(f){l[6](f)}let i={$$slots:{right:[jf],default:[Ff]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&Tr(l);return o=new Co({props:{tiles:[l[4](l[0])],tileSize:256,$$slots:{default:[Rf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&2048&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=Tr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&1&&(d.tiles=[f[4](f[0])]),c&2054&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}function zf(l,e,n){let t,r=!1,o=50,s="PM25_viridis";function u(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s}/MapServer/WMSServer`}function i(y){return t[1]}function a(y){let L=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${u()}?bbox={bbox-epsg-3857}&${L}`}function f(y){let L=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${u()}?${L}`}function c(y){r=y,n(1,r)}function g(y){s=y,n(0,s)}function d(){o=Wt(this.value),n(2,o)}return l.$$.update=()=>{l.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s])},[s,r,o,i,a,f,c,g,d]}class qf extends K{constructor(e){super(),Q(this,e,zf,Bf,X,{})}}function Hf(l){let e;return{c(){e=k("Road noise")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gf(l){let e;return{c(){e=k(`DEFRA
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Uf(l){let e,n,t,r,o,s,u,i,a;return o=new x({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[Gf]},$$scope:{ctx:l}}}),i=new Pe({}),{c(){e=C("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,n=O(),t=C("p"),r=k("Data from June 2019, produced by "),h(o.$$.fragment),s=k(". See there for methodology details"),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),w(t,r),b(o,t,null),w(t,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(i,f)}}}function Wf(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Uf]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Or(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:["55","65","75",">"]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Vf(l){let e,n=l[3].noiseclass+"",t,r,o=Lr(l[3].noiseclass)+"",s,u;return{c(){e=C("p"),t=k(n),r=k(" dB ("),s=k(o),u=k(")")},m(i,a){$(i,e,a),w(e,t),w(e,r),w(e,s),w(e,u)},p(i,a){a&8&&n!==(n=i[3].noiseclass+"")&&z(t,n),a&8&&o!==(o=Lr(i[3].noiseclass)+"")&&z(s,o)},d(i){i&&p(e)}}}function Xf(l){let e,n;return e=new ae({props:{$$slots:{default:[Vf,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Jf(l){let e,n;const t=[q(Ot),{sourceLayer:Ot},{paint:{"fill-color":ut(["get","noiseclass"],{"55.0-59.9":l[1][0],"60.0-64.9":l[1][0],"65.0-69.9":l[1][1],"70.0-74.9":l[1][1],">=75.0":l[1][2]},"red"),"fill-opacity":Z(.5,.8)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[Xf]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new He({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ie(q(Ot)),s&0&&{sourceLayer:Ot},s&2&&{paint:{"fill-color":ut(["get","noiseclass"],{"55.0-59.9":o[1][0],"60.0-64.9":o[1][0],"65.0-69.9":o[1][1],"70.0-74.9":o[1][1],">=75.0":o[1][2]},"red"),"fill-opacity":Z(.5,.8)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Yf(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[Wf],default:[Hf]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Or(l);return o=new be({props:{url:`pmtiles://${de()}/v1/${Ot}.pmtiles`,$$slots:{default:[Jf]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Or(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&17&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ot="road_noise";function Lr(l){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[l]}function Kf(l,e,n){let t=[J.sequential_low_to_high[0],J.sequential_low_to_high[2],J.sequential_low_to_high[4]],r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Qf extends K{constructor(e){super(),Q(this,e,Kf,Yf,X,{})}}function Zf(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Wards`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function xf(l){let e;return{c(){e=k(`ONS Geography
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function eu(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[xf]},$$scope:{ctx:l}}}),s=new Pe({}),{c(){e=C("p"),n=k("Data from "),h(t.$$.fragment),r=k(", as of May 2023."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function tu(l){let e,n,t;return n=new ce({props:{$$slots:{default:[eu]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function nu(l){let e,n=l[3].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=r[3].name+"")&&z(t,n)},d(r){r&&p(e)}}}function ru(l){let e,n;return e=new ae({props:{$$slots:{default:[nu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function lu(l){let e,n,t,r;const o=[q(nt),{sourceLayer:nt},{paint:{"fill-color":l[1],"fill-opacity":Z(0,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let s={$$slots:{default:[ru]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new He({props:s}),e.$on("click",su);const u=[q(`${nt}-outline`),{sourceLayer:nt},{paint:{"line-color":l[1],"line-width":2.5}},{layout:{visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new Ce({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&3?te(o,[f&0&&ie(q(nt)),f&0&&{sourceLayer:nt},f&2&&{paint:{"fill-color":a[1],"fill-opacity":Z(0,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}},o[4],o[5],o[6]]):{};f&16&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&3?te(u,[f&0&&ie(q(`${nt}-outline`)),f&0&&{sourceLayer:nt},f&2&&{paint:{"line-color":a[1],"line-width":2.5}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function ou(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[tu],default:[Zf]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${de()}/v1/${nt}.pmtiles`,$$slots:{default:[lu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let nt="wards";function su(l){let e=encodeURIComponent(l.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function iu(l,e,n){let t=J.wards,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class au extends K{constructor(e){super(),Q(this,e,iu,ou,X,{})}}function fu(l){let e;return{c(){e=k("Open Data Commons Open Database License")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function uu(l){let e,n,t,r;return t=new x({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[fu]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("License: "),h(t.$$.fragment)},m(o,s){$(o,e,s),w(e,n),b(t,e,null),r=!0},p(o,[s]){const u={};s&1&&(u.$$scope={dirty:s,ctx:o}),t.$set(u)},i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&p(e),v(t)}}}class Qe extends K{constructor(e){super(),Q(this,e,null,uu,X,{})}}function cu(l){let e,n,t;return e=new Oe({props:{color:J.bus_route_with_lane}}),{c(){h(e.$$.fragment),n=k(`
  Bus routes`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function $u(l){let e;return{c(){e=k(`GTFS
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pu(l){let e,n,t,r,o,s,u,i,a;return o=new x({props:{href:"https://gtfs.org",$$slots:{default:[$u]},$$scope:{ctx:l}}}),i=new Qe({}),{c(){e=C("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,n=O(),t=C("p"),r=k("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(o.$$.fragment),s=k(`, and doesn't include which routes are run or the
        frequency of service.`),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),w(t,r),b(o,t,null),w(t,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&8&&(g.$$scope={dirty:c,ctx:f}),o.$set(g)},i(f){a||(m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(u)),v(o),v(i,f)}}}function mu(l){let e,n,t;return n=new ce({props:{$$slots:{default:[pu]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function _u(l){let e;return{c(){e=C("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function gu(l){let e;return{c(){e=C("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function du(l){let e;function n(o,s){return o[2].has_bus_lane?gu:_u}let t=n(l),r=t(l);return{c(){r.c(),e=qe()},m(o,s){r.m(o,s),$(o,e,s)},p(o,s){t!==(t=n(o))&&(r.d(1),r=t(o),r&&(r.c(),r.m(e.parentNode,e)))},d(o){o&&p(e),r.d(o)}}}function hu(l){let e,n;return e=new ae({props:{$$slots:{default:[du,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bu(l){let e,n;const t=[q(Lt),{sourceLayer:Lt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],J.bus_route_with_lane,J.bus_route_without_lane],"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[hu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ce({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ie(q(Lt)),s&0&&{sourceLayer:Lt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vu(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[mu],default:[cu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${de()}/v1/${Lt}.pmtiles`,$$slots:{default:[bu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Lt="bus_routes";function wu(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class ku extends K{constructor(e){super(),Q(this,e,wu,vu,X,{})}}function Ar(l){const e=Pu(l[5]);l[6]=e[0],l[7]=e[1],l[8]=e[2]}function Ir(l,e,n){const t=l.slice();return t[6]=e[n][0],t[9]=e[n][1],t[10]=e[n][2],t[11]=e,t[12]=n,t}function yu(l){let e;return{c(){e=k("Cycle paths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Su(l){let e,n,t,r,o,s,u,i;return u=new Qe({}),{c(){e=C("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,n=O(),t=C("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,r=O(),o=C("p"),o.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,s=O(),h(u.$$.fragment)},m(a,f){$(a,e,f),$(a,n,f),$(a,t,f),$(a,r,f),$(a,o,f),$(a,s,f),b(u,a,f),i=!0},p:ne,i(a){i||(m(u.$$.fragment,a),i=!0)},o(a){_(u.$$.fragment,a),i=!1},d(a){a&&(p(e),p(n),p(t),p(r),p(o),p(s)),v(u,a)}}}function Cu(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Su]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8192&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Mr(l){let e,n,t;return n=new Ke({props:{$$slots:{default:[Ou]},$$scope:{ctx:l}}}),{c(){e=C("div"),h(n.$$.fragment),ye(e,"border","1px solid black"),ye(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8194&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Tu(l){let e,n,t=l[9]+"",r,o,s;return e=new Oe({props:{color:l[10]}}),{c(){h(e.$$.fragment),n=O(),r=k(t),o=O()},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p:ne,i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function Pr(l){let e,n,t;function r(s){l[4](s,l[6])}let o={$$slots:{default:[Tu]},$$scope:{ctx:l}};return l[1][l[6]]!==void 0&&(o.checked=l[1][l[6]]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){l=s;const i={};u&8192&&(i.$$scope={dirty:u,ctx:l}),!n&&u&6&&(n=!0,i.checked=l[1][l[6]],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function Ou(l){let e,n,t=ze(l[2]),r=[];for(let s=0;s<t.length;s+=1)r[s]=Pr(Ir(l,t,s));const o=s=>_(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=qe()},m(s,u){for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(s,u);$(s,e,u),n=!0},p(s,u){if(u&6){t=ze(s[2]);let i;for(i=0;i<t.length;i+=1){const a=Ir(s,t,i);r[i]?(r[i].p(a,u),m(r[i],1)):(r[i]=Pr(a),r[i].c(),m(r[i],1),r[i].m(e.parentNode,e))}for($e(),i=t.length;i<r.length;i+=1)o(i);pe()}},i(s){if(!n){for(let u=0;u<t.length;u+=1)m(r[u]);n=!0}},o(s){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)_(r[u]);n=!1},d(s){s&&p(e),ht(r,s)}}}function Lu(l){Ar(l);let e,n=l[6]+"",t,r,o,s,u,i=l[7]+"",a,f,c,g,d=l[8]+"",y;return{c(){e=C("h2"),t=k(n),r=O(),o=C("p"),s=k("Direction: "),u=C("b"),a=O(),f=C("p"),c=k("Width: "),g=C("b"),y=k(d)},m(L,S){$(L,e,S),w(e,t),$(L,r,S),$(L,o,S),w(o,s),w(o,u),u.innerHTML=i,$(L,a,S),$(L,f,S),w(f,c),w(f,g),w(g,y)},p(L,S){Ar(L),S&32&&n!==(n=L[6]+"")&&z(t,n),S&32&&i!==(i=L[7]+"")&&(u.innerHTML=i),S&32&&d!==(d=L[8]+"")&&z(y,d)},d(L){L&&(p(e),p(r),p(o),p(a),p(f))}}}function Au(l){let e,n;return e=new ae({props:{$$slots:{default:[Lu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&8224&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Iu(l){let e,n;const t=[q(At),{sourceLayer:At},{paint:{"line-color":ut(["get","kind"],{track:J.cycle_paths.track,lane:J.cycle_paths.lane,shared_use_segregated:J.cycle_paths.shared_use_segregated,shared_use_unsegregated:J.cycle_paths.shared_use_unsegregated},"red"),"line-width":Re,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:Nr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={$$slots:{default:[Au]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ce({props:r}),e.$on("click",Nu),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ie(q(At)),s&0&&{sourceLayer:At},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:Nr(o[1])},t[5],t[6],t[7]]):{};s&8192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Mu(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[Cu],default:[yu]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Mr(l);return o=new be({props:{url:`pmtiles://${de()}/v1/${At}.pmtiles`,$$slots:{default:[Iu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&8192&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Mr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&8195&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let At="cycle_paths";function Pu(l){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[l.kind],n={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[l.direction],t=l.width=="unknown"?"unknown":`${l.width} meters`;return[e,`${n} ${l.direction}`,t]}function Nu(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function Nr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","kind"],["literal",e]]}function Fu(l,e,n){let t=[["track","Separated tracks",J.cycle_paths.track],["lane","Unprotected lanes",J.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",J.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",J.cycle_paths.shared_use_unsegregated]],r=!1,o={track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function s(i){r=i,n(0,r)}function u(i,a){l.$$.not_equal(o[a],i)&&(o[a]=i,n(1,o))}return[r,o,t,s,u]}class Eu extends K{constructor(e){super(),Q(this,e,Fu,Mu,X,{})}}function Du(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  Major Road Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function ju(l){let e;return{c(){e=k(`Major Road Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ru(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[ju]},$$scope:{ctx:l}}}),s=new Pe({}),{c(){e=C("p"),n=k("Data from the "),h(t.$$.fragment),r=k(", as of September 2021."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Bu(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Ru]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function zu(l){let e,n=(l[3].name??"Unknown MRN road")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=(r[3].name??"Unknown MRN road")+"")&&z(t,n)},d(r){r&&p(e)}}}function qu(l){let e,n;return e=new ae({props:{$$slots:{default:[zu,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Hu(l){let e,n;const t=[q(It),{sourceLayer:It},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":7,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[qu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ce({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ie(q(It)),s&0&&{sourceLayer:It},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":7,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Gu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Bu],default:[Du]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${de()}/v1/${It}.pmtiles`,$$slots:{default:[Hu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let It="mrn";function Uu(l,e,n){let t=J.mrn,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class Wu extends K{constructor(e){super(),Q(this,e,Uu,Gu,X,{})}}function Vu(l){let e,n,t;return e=new Oe({props:{color:l[1]}}),{c(){h(e.$$.fragment),n=k(`
  National Cycle Network`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Xu(l){let e;return{c(){e=k(`National Cycle Network
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ju(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[Xu]},$$scope:{ctx:l}}}),s=new Pe({}),{c(){e=C("p"),n=k("Data from Sustrans about the "),h(t.$$.fragment),r=k(", downloaded on 22/01/2024."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function Yu(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Ju]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Fr(l){let e,n,t,r=l[3].Desc_+"",o;return{c(){e=C("li"),n=k("Description: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Desc_+"")&&z(o,r)},d(s){s&&p(e)}}}function Er(l){let e,n,t,r=l[3].Greenway+"",o;return{c(){e=C("li"),n=k("Is greenway: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Greenway+"")&&z(o,r)},d(s){s&&p(e)}}}function Dr(l){let e,n,t,r=l[3].RouteType+"",o;return{c(){e=C("li"),n=k("Route type: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteType+"")&&z(o,r)},d(s){s&&p(e)}}}function jr(l){let e,n,t,r=l[3].RouteNo+"",o;return{c(){e=C("li"),n=k("Route number: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteNo+"")&&z(o,r)},d(s){s&&p(e)}}}function Rr(l){let e,n,t,r=l[3].RouteCat+"",o;return{c(){e=C("li"),n=k("Route Category: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RouteCat+"")&&z(o,r)},d(s){s&&p(e)}}}function Br(l){let e,n,t,r=l[3].OpenStatus+"",o;return{c(){e=C("li"),n=k("Open Status: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].OpenStatus+"")&&z(o,r)},d(s){s&&p(e)}}}function zr(l){let e,n,t,r=l[3].Surface+"",o;return{c(){e=C("li"),n=k("Surface: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Surface+"")&&z(o,r)},d(s){s&&p(e)}}}function qr(l){let e,n,t,r=l[3].Quality+"",o;return{c(){e=C("li"),n=k("Quality: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].Quality+"")&&z(o,r)},d(s){s&&p(e)}}}function Hr(l){let e,n,t,r=l[3].RoadClass+"",o;return{c(){e=C("li"),n=k("Road Class: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8&&r!==(r=s[3].RoadClass+"")&&z(o,r)},d(s){s&&p(e)}}}function Ku(l){let e,n,t,r,o,s,u,i,a,f=l[3].Desc_&&Fr(l),c=l[3].Greenway&&Er(l),g=l[3].RouteType&&Dr(l),d=l[3].RouteNo&&jr(l),y=l[3].RouteCat&&Rr(l),L=l[3].OpenStatus&&Br(l),S=l[3].Surface&&zr(l),M=l[3].Quality&&qr(l),j=l[3].RoadClass&&Hr(l);return{c(){e=C("ul"),f&&f.c(),n=O(),c&&c.c(),t=O(),g&&g.c(),r=O(),d&&d.c(),o=O(),y&&y.c(),s=O(),L&&L.c(),u=O(),S&&S.c(),i=O(),M&&M.c(),a=O(),j&&j.c()},m(I,N){$(I,e,N),f&&f.m(e,null),w(e,n),c&&c.m(e,null),w(e,t),g&&g.m(e,null),w(e,r),d&&d.m(e,null),w(e,o),y&&y.m(e,null),w(e,s),L&&L.m(e,null),w(e,u),S&&S.m(e,null),w(e,i),M&&M.m(e,null),w(e,a),j&&j.m(e,null)},p(I,N){I[3].Desc_?f?f.p(I,N):(f=Fr(I),f.c(),f.m(e,n)):f&&(f.d(1),f=null),I[3].Greenway?c?c.p(I,N):(c=Er(I),c.c(),c.m(e,t)):c&&(c.d(1),c=null),I[3].RouteType?g?g.p(I,N):(g=Dr(I),g.c(),g.m(e,r)):g&&(g.d(1),g=null),I[3].RouteNo?d?d.p(I,N):(d=jr(I),d.c(),d.m(e,o)):d&&(d.d(1),d=null),I[3].RouteCat?y?y.p(I,N):(y=Rr(I),y.c(),y.m(e,s)):y&&(y.d(1),y=null),I[3].OpenStatus?L?L.p(I,N):(L=Br(I),L.c(),L.m(e,u)):L&&(L.d(1),L=null),I[3].Surface?S?S.p(I,N):(S=zr(I),S.c(),S.m(e,i)):S&&(S.d(1),S=null),I[3].Quality?M?M.p(I,N):(M=qr(I),M.c(),M.m(e,a)):M&&(M.d(1),M=null),I[3].RoadClass?j?j.p(I,N):(j=Hr(I),j.c(),j.m(e,null)):j&&(j.d(1),j=null)},d(I){I&&p(e),f&&f.d(),c&&c.d(),g&&g.d(),d&&d.d(),y&&y.d(),L&&L.d(),S&&S.d(),M&&M.d(),j&&j.d()}}}function Qu(l){let e,n;return e=new ae({props:{$$slots:{default:[Ku,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zu(l){let e,n;const t=[q(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[1],"line-width":4,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Qu]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ce({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ie(q(Mt)),s&0&&{sourceLayer:Mt},t[2],t[3],s&2&&{paint:{"line-color":o[1],"line-width":4,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function xu(l){let e,n,t,r,o;function s(i){l[2](i)}let u={$$slots:{right:[Yu],default:[Vu]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${de()}/v1/${Mt}.pmtiles`,$$slots:{default:[Zu]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&17&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Mt="national_cycle_network";function ec(l,e,n){let t=J.national_cycle_network,r=!1;function o(s){r=s,n(0,r)}return[r,t,o]}class tc extends K{constructor(e){super(),Q(this,e,ec,xu,X,{})}}function nc(l){let e;return{c(){e=k("OS Pavement widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function rc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lc(l){let e,n,t,r,o,s,u,i,a;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[rc]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`This is average and minimum pavement width (in meters) from Ordnance
        Survey. The coloring shows the average width, and the line thickness has
        no meaning. Hover over a line to see if there's pavement on one or both
        sides of the road. (You won't be able to distinguish left and right
        though; use the OS Road basemap instead.)`,n=O(),t=C("p"),t.textContent="Data valid as of 1 January, 2024",r=O(),o=C("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function oc(l){let e,n,t;return n=new ce({props:{$$slots:{default:[lc]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Gr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function sc(l){let e,n,t,r=l[4].side+"",o,s,u,i,a,f=l[4].average+"",c,g,d,y,L,S,M=l[4].minimum+"",j,I;return{c(){e=C("p"),n=k("Side of the road: "),t=C("b"),o=k(r),s=O(),u=C("p"),i=k("Average width: "),a=C("b"),c=k(f),g=k(`
        meters`),d=O(),y=C("p"),L=k("Minimum width: "),S=C("b"),j=k(M),I=k(`
        meters`)},m(N,A){$(N,e,A),w(e,n),w(e,t),w(t,o),$(N,s,A),$(N,u,A),w(u,i),w(u,a),w(a,c),w(u,g),$(N,d,A),$(N,y,A),w(y,L),w(y,S),w(S,j),w(y,I)},p(N,A){A&16&&r!==(r=N[4].side+"")&&z(o,r),A&16&&f!==(f=N[4].average+"")&&z(c,f),A&16&&M!==(M=N[4].minimum+"")&&z(j,M)},d(N){N&&(p(e),p(s),p(u),p(d),p(y))}}}function ic(l){let e,n;return e=new ae({props:{$$slots:{default:[sc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ac(l){let e,n;const t=[q(Pt),{sourceLayer:Pt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],l[2],l[1]),"line-width":Re,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[ic]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ce({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ie(q(Pt)),s&0&&{sourceLayer:Pt},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Re,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function fc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[oc],default:[nc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Gr(l);return o=new be({props:{url:`pmtiles://${an()}/v1/${Pt}.pmtiles`,$$slots:{default:[ac]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Gr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Pt="pavement_widths";function uc(l,e,n){let t=J.sequential_low_to_high,r=[0,2,4,6,8,13],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class cc extends K{constructor(e){super(),Q(this,e,uc,fc,X,{})}}function $c(l){let e;return{c(){e=k("Propensity to Cycle Tool")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function pc(l){let e;return{c(){e=k("the PCT website")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function mc(l){let e;return{c(){e=k("2017 journal article")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _c(l){let e,n,t,r,o,s,u,i,a,f,c;return u=new x({props:{href:"https://www.pct.bike",$$slots:{default:[pc]},$$scope:{ctx:l}}}),a=new x({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[mc]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,n=O(),t=C("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,r=O(),o=C("p"),s=k("See "),h(u.$$.fragment),i=k(" and "),h(a.$$.fragment),f=k(" for details on methodology and data sources.")},m(g,d){$(g,e,d),$(g,n,d),$(g,t,d),$(g,r,d),$(g,o,d),w(o,s),b(u,o,null),w(o,i),b(a,o,null),w(o,f),c=!0},p(g,d){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),u.$set(y);const L={};d&1024&&(L.$$scope={dirty:d,ctx:g}),a.$set(L)},i(g){c||(m(u.$$.fragment,g),m(a.$$.fragment,g),c=!0)},o(g){_(u.$$.fragment,g),_(a.$$.fragment,g),c=!1},d(g){g&&(p(e),p(n),p(t),p(r),p(o)),v(u),v(a)}}}function gc(l){let e,n,t;return n=new ce({props:{$$slots:{default:[_c]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&1024&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ur(l){let e,n,t,r,o,s,u,i;e=new Ge({props:{colorScale:l[3],limits:l[4]}});function a(d){l[7](d)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};l[0]!==void 0&&(f.value=l[0]),t=new Tl({props:f}),U.push(()=>W(t,"value",a));function c(d){l[8](d)}let g={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return l[1]!==void 0&&(g.value=l[1]),s=new dt({props:g}),U.push(()=>W(s,"value",c)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),o=O(),h(s.$$.fragment)},m(d,y){b(e,d,y),$(d,n,y),b(t,d,y),$(d,o,y),b(s,d,y),i=!0},p(d,y){const L={};!r&&y&1&&(r=!0,L.value=d[0],V(()=>r=!1)),t.$set(L);const S={};!u&&y&2&&(u=!0,S.value=d[1],V(()=>u=!1)),s.$set(S)},i(d){i||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(s.$$.fragment,d),i=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(s.$$.fragment,d),i=!1},d(d){d&&(p(n),p(o)),v(e,d),v(t,d),v(s,d)}}}function dc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Gt(!1),t=qe(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function hc(l){let e,n;return e=new ae({props:{$$slots:{default:[dc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bc(l){let e,n;const t=[q(lt),{sourceLayer:lt},{paint:{"line-color":we(["get",l[1]],l[4],l[3]),"line-width":Re,"line-opacity":Z(1,.5)}},{layout:{visibility:l[2]&&l[0]==lt?"visible":"none"}}];let r={$$slots:{default:[hc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ce({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ie(q(lt)),s&0&&{sourceLayer:lt},s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Re,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==lt?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function vc(l){let e,n=l[5](l[9])+"",t;return{c(){e=new Gt(!1),t=qe(),e.a=t},m(r,o){e.m(n,r,o),$(r,t,o)},p(r,o){o&512&&n!==(n=r[5](r[9])+"")&&e.p(n)},d(r){r&&(p(t),e.d())}}}function wc(l){let e,n;return e=new ae({props:{$$slots:{default:[vc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&1536&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function kc(l){let e,n;const t=[q($t),{sourceLayer:$t},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",l[1]],l[4],l[3]),"line-width":Re,"line-opacity":Z(1,.5)}},{layout:{visibility:l[2]&&l[0]==$t?"visible":"none"}}];let r={$$slots:{default:[wc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ce({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&31?te(t,[s&0&&ie(q($t)),s&0&&{sourceLayer:$t},t[2],t[3],s&26&&{paint:{"line-color":we(["get",o[1]],o[4],o[3]),"line-width":Re,"line-opacity":Z(1,.5)}},s&5&&{layout:{visibility:o[2]&&o[0]==$t?"visible":"none"}}]):{};s&1024&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function yc(l){let e,n,t,r,o,s,u,i;function a(g){l[6](g)}let f={$$slots:{right:[gc],default:[$c]},$$scope:{ctx:l}};l[2]!==void 0&&(f.checked=l[2]),e=new le({props:f}),U.push(()=>W(e,"checked",a));let c=l[2]&&Ur(l);return o=new be({props:{url:`pmtiles://${de()}/v1/${lt}.pmtiles`,$$slots:{default:[bc]},$$scope:{ctx:l}}}),u=new be({props:{url:`pmtiles://${de()}/v1/${$t}.pmtiles`,$$slots:{default:[kc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),c&&c.c(),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment)},m(g,d){b(e,g,d),$(g,t,d),c&&c.m(g,d),$(g,r,d),b(o,g,d),$(g,s,d),b(u,g,d),i=!0},p(g,[d]){const y={};d&1024&&(y.$$scope={dirty:d,ctx:g}),!n&&d&4&&(n=!0,y.checked=g[2],V(()=>n=!1)),e.$set(y),g[2]?c?(c.p(g,d),d&4&&m(c,1)):(c=Ur(g),c.c(),m(c,1),c.m(r.parentNode,r)):c&&($e(),_(c,1,1,()=>{c=null}),pe());const L={};d&1031&&(L.$$scope={dirty:d,ctx:g}),o.$set(L);const S={};d&1031&&(S.$$scope={dirty:d,ctx:g}),u.$set(S)},i(g){i||(m(e.$$.fragment,g),m(c),m(o.$$.fragment,g),m(u.$$.fragment,g),i=!0)},o(g){_(e.$$.fragment,g),_(c),_(o.$$.fragment,g),_(u.$$.fragment,g),i=!1},d(g){g&&(p(t),p(r),p(s)),v(e,g),c&&c.d(g),v(o,g),v(u,g)}}}let lt="pct_commute",$t="pct_school";function Sc(l,e,n){let t=J.sequential_low_to_high,r=[0,50,100,500,1e3,2e3],o=lt,s="baseline",u=!1;function i(g){let d=g.baseline,y=g.gov_target,L=g.go_dutch,S=`<h2>Trip purpose: ${o==lt?"commuting":"school"}</h2>`;if(S+=`<p>Baseline (2011): <b>${d.toLocaleString()}</b></p>`,d==0)S+=`<p>Government target (2025): <b>${y.toLocaleString()}</b></p>`,S+=`<p>Go Dutch: <b>${L.toLocaleString()}</b></p>`;else{let M=(y/d).toFixed(1),j=(L/d).toFixed(1);S+=`<p>Government target (2025): ${y.toLocaleString()} (<b>${M}x</b> of baseline)</p>`,S+=`<p>Go Dutch: ${L.toLocaleString()} (<b>${j}x</b> of baseline)</p>`}return S}function a(g){u=g,n(2,u)}function f(g){o=g,n(0,o)}function c(g){s=g,n(1,s)}return[o,s,u,t,r,i,a,f,c]}class Cc extends K{constructor(e){super(),Q(this,e,Sc,yc,X,{})}}function Tc(l){let e;return{c(){e=k("OS Speeds")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Oc(l){let e;return{c(){e=k("Basemap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Lc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Ac(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new x({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[Oc]},$$scope:{ctx:l}}}),f=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Lc]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("The average speed data is collected over a six-month period by "),h(t.$$.fragment),r=k(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),o=O(),s=C("p"),s.textContent="Data valid as of 1 September, 2023",u=O(),i=C("p"),a=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=k(".")},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,r),$(d,o,y),$(d,s,y),$(d,u,y),$(d,i,y),w(i,a),b(f,i,null),w(i,c),g=!0},p(d,y){const L={};y&256&&(L.$$scope={dirty:y,ctx:d}),t.$set(L);const S={};y&256&&(S.$$scope={dirty:y,ctx:d}),f.$set(S)},i(d){g||(m(t.$$.fragment,d),m(f.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(f.$$.fragment,d),g=!1},d(d){d&&(p(e),p(o),p(s),p(u),p(i)),v(t),v(f)}}}function Ic(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Ac]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&256&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Wr(l){let e,n,t,r,o;e=new Ge({props:{colorScale:l[2],limits:l[3]}});function s(i){l[6](i)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return l[0]!==void 0&&(u.value=l[0]),t=new Tl({props:u}),U.push(()=>W(t,"value",s)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};!r&&a&1&&(r=!0,f.value=i[0],V(()=>r=!1)),t.$set(f)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function Mc(l){let e,n,t=l[7].indicative_mph+"",r,o,s,u,i,a=l[7].highest_mph+"",f,c,g=l[4][l[7].highest_description]+"",d,y;return{c(){e=C("p"),n=k("Posted speed limit: "),r=k(t),o=k(" mph"),s=O(),u=C("p"),i=k("Highest average speed: "),f=k(a),c=k(" mph (during "),d=k(g),y=k(")")},m(L,S){$(L,e,S),w(e,n),w(e,r),w(e,o),$(L,s,S),$(L,u,S),w(u,i),w(u,f),w(u,c),w(u,d),w(u,y)},p(L,S){S&128&&t!==(t=L[7].indicative_mph+"")&&z(r,t),S&128&&a!==(a=L[7].highest_mph+"")&&z(f,a),S&128&&g!==(g=L[4][L[7].highest_description]+"")&&z(d,g)},d(L){L&&(p(e),p(s),p(u))}}}function Pc(l){let e,n;return e=new ae({props:{$$slots:{default:[Mc,({props:t})=>({7:t}),({props:t})=>t?128:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&384&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Nc(l){let e,n;const t=[q(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",l[0]],l[3],l[2]),"line-width":Re,"line-opacity":Z(1,.5)}},{layout:{visibility:l[1]?"visible":"none"}}];let r={$$slots:{default:[Pc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ce({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&15?te(t,[s&0&&ie(q(Nt)),s&0&&{sourceLayer:Nt},t[2],t[3],s&13&&{paint:{"line-color":we(["get",o[0]],o[3],o[2]),"line-width":Re,"line-opacity":Z(1,.5)}},s&2&&{layout:{visibility:o[1]?"visible":"none"}}]):{};s&256&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Fc(l){let e,n,t,r,o,s;function u(f){l[5](f)}let i={$$slots:{right:[Ic],default:[Tc]},$$scope:{ctx:l}};l[1]!==void 0&&(i.checked=l[1]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[1]&&Wr(l);return o=new be({props:{url:`pmtiles://${an()}/v1/${Nt}.pmtiles`,$$slots:{default:[Nc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&256&&(g.$$scope={dirty:c,ctx:f}),!n&&c&2&&(n=!0,g.checked=f[1],V(()=>n=!1)),e.$set(g),f[1]?a?(a.p(f,c),c&2&&m(a,1)):(a=Wr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&259&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Nt="road_speeds";function Ec(l,e,n){let t=J.sequential_low_to_high,r=[0,20,30,40,50,90],o="indicative_mph",s=!1,u={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(f){s=f,n(1,s)}function a(f){o=f,n(0,o)}return[o,s,t,r,u,i,a]}class Dc extends K{constructor(e){super(),Q(this,e,Ec,Fc,X,{})}}function jc(l){let e;return{c(){e=k("OS Road widths")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rc(l){let e;return{c(){e=k(`Public Sector Geospatial Agreement
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Bc(l){let e,n,t,r,o,s,u,i,a;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Rc]},$$scope:{ctx:l}}}),{c(){e=C("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,n=O(),t=C("p"),t.textContent="Data valid as of 1 September, 2023",r=O(),o=C("p"),s=k(`License: Contains OS data  Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),i=k(".")},m(f,c){$(f,e,c),$(f,n,c),$(f,t,c),$(f,r,c),$(f,o,c),w(o,s),b(u,o,null),w(o,i),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),u.$set(g)},i(f){a||(m(u.$$.fragment,f),a=!0)},o(f){_(u.$$.fragment,f),a=!1},d(f){f&&(p(e),p(n),p(t),p(r),p(o)),v(u)}}}function zc(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Bc]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Vr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qc(l){let e,n,t,r=l[4].average+"",o,s,u,i,a,f,c=l[4].minimum+"",g,d;return{c(){e=C("p"),n=k("Average width: "),t=C("b"),o=k(r),s=k(`
        meters`),u=O(),i=C("p"),a=k("Minimum width: "),f=C("b"),g=k(c),d=k(`
        meters`)},m(y,L){$(y,e,L),w(e,n),w(e,t),w(t,o),w(e,s),$(y,u,L),$(y,i,L),w(i,a),w(i,f),w(f,g),w(i,d)},p(y,L){L&16&&r!==(r=y[4].average+"")&&z(o,r),L&16&&c!==(c=y[4].minimum+"")&&z(g,c)},d(y){y&&(p(e),p(u),p(i))}}}function Hc(l){let e,n;return e=new ae({props:{$$slots:{default:[qc,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Gc(l){let e,n;const t=[q(Ft),{sourceLayer:Ft},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],l[2],l[1]),"line-width":Re,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Hc]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ce({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ie(q(Ft)),s&0&&{sourceLayer:Ft},t[2],t[3],s&6&&{paint:{"line-color":we(["get","average"],o[2],o[1]),"line-width":Re,"line-opacity":Z(1,.5)}},s&1&&{layout:{visibility:o[0]?"visible":"none"}}]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Uc(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[zc],default:[jc]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Vr(l);return o=new be({props:{url:`pmtiles://${an()}/v1/${Ft}.pmtiles`,$$slots:{default:[Gc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Vr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ft="road_widths";function Wc(l,e,n){let t=J.sequential_low_to_high,r=[0,5,10,15,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class Vc extends K{constructor(e){super(),Q(this,e,Wc,Uc,X,{})}}function Xc(l){let e,n,t;return e=new Oe({props:{color:J.trams}}),{c(){h(e.$$.fragment),n=k(`
  Trams`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function Jc(l){let e,n,t,r;return t=new Qe({}),{c(){e=C("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,n=O(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function Yc(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Jc]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&4&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Kc(l){let e,n;const t=[q(Et),{sourceLayer:Et},{paint:{"line-color":J.trams,"line-width":5,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new Ce({props:r}),e.$on("click",Zc),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ie(q(Et)),s&0&&{sourceLayer:Et},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Qc(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Yc],default:[Xc]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${de()}/v1/${Et}.pmtiles`,$$slots:{default:[Kc]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&4&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&5&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Et="trams";function Zc(l){window.open(`http://openstreetmap.org/way/${l.detail.features[0].properties.osm_id}`,"_blank")}function xc(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class e$ extends K{constructor(e){super(),Q(this,e,xc,Qc,X,{})}}function t$(l){let e;return{c(){e=k("Bus stops")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function n$(l){let e;return{c(){e=k(`Bus Open Data Service
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function r$(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[n$]},$$scope:{ctx:l}}}),i=new Pe({}),{c(){e=C("p"),n=k("Data from the "),h(t.$$.fragment),r=k(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),o=O(),s=C("p"),s.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),$(f,o,c),$(f,s,c),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),t.$set(g)},i(f){a||(m(t.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(o),p(s),p(u)),v(t),v(i,f)}}}function l$(l){let e,n,t;return n=new ce({props:{$$slots:{default:[r$]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Xr(l){let e,n,t,r;return t=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){e=C("p"),e.textContent="Peak hourly frequency:",n=O(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function o$(l){let e,n,t,r=l[4].stop_name+"",o,s,u,i,a,f=l[4].peak+"",c,g,d,y,L,S=l[4].peak_description+"",M,j,I,N,A,P=l[4].total+"",F,T,E=l[4].total_description+"",H,R;return{c(){e=C("p"),n=k("Stop name: "),t=C("b"),o=k(r),s=O(),u=C("p"),i=k("Peak: "),a=C("b"),c=k(f),g=k(`
        buses during the busiest hour of any day`),d=O(),y=C("p"),L=k("The peak hour is "),M=k(S),j=O(),I=C("p"),N=k("Total buses per day: "),A=C("b"),F=k(P),T=k(`
        (for `),H=k(E),R=k(", the busiest day of the week)")},m(D,B){$(D,e,B),w(e,n),w(e,t),w(t,o),$(D,s,B),$(D,u,B),w(u,i),w(u,a),w(a,c),w(u,g),$(D,d,B),$(D,y,B),w(y,L),w(y,M),$(D,j,B),$(D,I,B),w(I,N),w(I,A),w(A,F),w(I,T),w(I,H),w(I,R)},p(D,B){B&16&&r!==(r=D[4].stop_name+"")&&z(o,r),B&16&&f!==(f=D[4].peak+"")&&z(c,f),B&16&&S!==(S=D[4].peak_description+"")&&z(M,S),B&16&&P!==(P=D[4].total+"")&&z(F,P),B&16&&E!==(E=D[4].total_description+"")&&z(H,E)},d(D){D&&(p(e),p(s),p(u),p(d),p(y),p(j),p(I))}}}function s$(l){let e,n;return e=new ae({props:{$$slots:{default:[o$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function i$(l){let e,n;const t=[q(Dt),{sourceLayer:Dt},{paint:{"circle-color":we(["get","peak"],l[2],l[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[s$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ct({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ie(q(Dt)),s&0&&{sourceLayer:Dt},s&6&&{paint:{"circle-color":we(["get","peak"],o[2],o[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function a$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[l$],default:[t$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Xr(l);return o=new be({props:{url:`pmtiles://${de()}/v1/${Dt}.pmtiles`,$$slots:{default:[i$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Xr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Dt="bus_stops";function f$(l,e,n){let t=J.sequential_low_to_high,r=[0,3,10,20,30,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class u$ extends K{constructor(e){super(),Q(this,e,f$,a$,X,{})}}function c$(l){let e,n,t;return{c(){e=C("input"),G(e,"class","govuk-file-upload"),G(e,"id","load-criticals"),G(e,"type","file")},m(r,o){$(r,e,o),l[7](e),n||(t=ft(e,"change",l[5]),n=!0)},p:ne,d(r){r&&p(e),l[7](null),n=!1,t()}}}function Jr(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[p$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&2054&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function $$(l){let e,n,t=l[2].toLocaleString()+"",r,o,s;return e=new Oe({props:{color:jt}}),{c(){h(e.$$.fragment),n=k(`
        Show `),r=k(t),o=k(" issues")},m(u,i){b(e,u,i),$(u,n,i),$(u,r,i),$(u,o,i),s=!0},p(u,i){(!s||i&4)&&t!==(t=u[2].toLocaleString()+"")&&z(r,t)},i(u){s||(m(e.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r),p(o)),v(e,u)}}}function p$(l){let e,n,t;function r(s){l[8](s)}let o={$$slots:{default:[$$]},$$scope:{ctx:l}};return l[1]!==void 0&&(o.checked=l[1]),e=new le({props:o}),U.push(()=>W(e,"checked",r)),{c(){h(e.$$.fragment)},m(s,u){b(e,s,u),t=!0},p(s,u){const i={};u&2052&&(i.$$scope={dirty:u,ctx:s}),!n&&u&2&&(n=!0,i.checked=s[1],V(()=>n=!1)),e.$set(i)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){_(e.$$.fragment,s),t=!1},d(s){v(e,s)}}}function m$(l){let e,n,t,r,o,s;e=new dn({props:{label:"Load from .xlsx",id:"load-criticals",$$slots:{default:[c$]},$$scope:{ctx:l}}}),t=new Ol({props:{errorMessage:l[3]}});let u=l[2]>0&&Jr(l);return{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),u&&u.c(),o=qe()},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),u&&u.m(i,a),$(i,o,a),s=!0},p(i,a){const f={};a&2049&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&8&&(c.errorMessage=i[3]),t.$set(c),i[2]>0?u?(u.p(i,a),a&4&&m(u,1)):(u=Jr(i),u.c(),m(u,1),u.m(o.parentNode,o)):u&&($e(),_(u,1,1,()=>{u=null}),pe())},i(i){s||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(u),s=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(u),s=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),u&&u.d(i)}}}function _$(l){let e,n,t=l[10].critical_type+"",r,o,s,u,i,a=l[10].location_description+"",f,c,g,d,y,L=l[10].notes+"",S,M,j,I,N,A,P,F=l[10].id+"",T,E,H,R,D,B=(l[10].inspector??"???")+"",Y,re,oe,me=l[10].submission_time+"",Le,Ne,se,Ae,Te,Ie=l[10].scheme_reference+"",_e,ve,he,fe=l[10].current_design_stage+"",ke;return{c(){e=C("div"),n=C("h2"),r=k(t),o=O(),s=C("p"),u=C("u"),u.textContent="Location",i=k(`
          : `),f=k(a),c=O(),g=C("p"),d=C("u"),d.textContent="Notes",y=k(`
          : `),S=k(L),M=O(),j=C("hr"),I=O(),N=C("p"),A=k("Critical issue ID: "),P=C("b"),T=k(F),E=O(),H=C("p"),R=k("Submitted by "),D=C("b"),Y=k(B),re=k(`
          at
          `),oe=C("b"),Le=k(me),Ne=O(),se=C("p"),Ae=k("For scheme "),Te=C("b"),_e=k(Ie),ve=k(`
          in stage
          `),he=C("b"),ke=k(fe),ye(e,"max-width","30vw")},m(Me,Ee){$(Me,e,Ee),w(e,n),w(n,r),w(e,o),w(e,s),w(s,u),w(s,i),w(s,f),w(e,c),w(e,g),w(g,d),w(g,y),w(g,S),w(e,M),w(e,j),w(e,I),w(e,N),w(N,A),w(N,P),w(P,T),w(e,E),w(e,H),w(H,R),w(H,D),w(D,Y),w(H,re),w(H,oe),w(oe,Le),w(e,Ne),w(e,se),w(se,Ae),w(se,Te),w(Te,_e),w(se,ve),w(se,he),w(he,ke)},p(Me,Ee){Ee&1024&&t!==(t=Me[10].critical_type+"")&&z(r,t),Ee&1024&&a!==(a=Me[10].location_description+"")&&z(f,a),Ee&1024&&L!==(L=Me[10].notes+"")&&z(S,L),Ee&1024&&F!==(F=Me[10].id+"")&&z(T,F),Ee&1024&&B!==(B=(Me[10].inspector??"???")+"")&&z(Y,B),Ee&1024&&me!==(me=Me[10].submission_time+"")&&z(Le,me),Ee&1024&&Ie!==(Ie=Me[10].scheme_reference+"")&&z(_e,Ie),Ee&1024&&fe!==(fe=Me[10].current_design_stage+"")&&z(ke,fe)},d(Me){Me&&p(e)}}}function g$(l){let e,n;return e=new ae({props:{$$slots:{default:[_$,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&3072&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function d$(l){let e,n,t,r,o,s;const u=[q("criticals-clusters"),{applyToClusters:!0},{paint:{"circle-color":jt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},{layout:{visibility:l[1]?"visible":"none"}},{hoverCursor:"pointer"}];let i={};for(let d=0;d<u.length;d+=1)i=ee(i,u[d]);e=new ct({props:i}),e.$on("click",l[6]);const a=[q("criticals-counts"),{applyToClusters:!0},{layout:{"text-field":"{point_count_abbreviated}",visibility:l[1]?"visible":"none"}}];let f={};for(let d=0;d<a.length;d+=1)f=ee(f,a[d]);t=new fn({props:f});const c=[q("criticals-points"),{applyToClusters:!1},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":jt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},{layout:{visibility:l[1]?"visible":"none"}}];let g={$$slots:{default:[g$]},$$scope:{ctx:l}};for(let d=0;d<c.length;d+=1)g=ee(g,c[d]);return o=new ct({props:g}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment)},m(d,y){b(e,d,y),$(d,n,y),b(t,d,y),$(d,r,y),b(o,d,y),s=!0},p(d,y){const L=y&2?te(u,[u[0],u[1],y&0&&{paint:{"circle-color":jt,"circle-opacity":.9,"circle-radius":["step",["get","point_count"],20,15,30,30,40]}},y&2&&{layout:{visibility:d[1]?"visible":"none"}},u[4]]):{};e.$set(L);const S=y&2?te(a,[a[0],a[1],{layout:{"text-field":"{point_count_abbreviated}",visibility:d[1]?"visible":"none"}}]):{};t.$set(S);const M=y&2?te(c,[c[0],c[1],c[2],c[3],y&0&&{paint:{"circle-color":jt,"circle-opacity":Z(.9,.5),"circle-radius":15,"circle-stroke-color":"black","circle-stroke-width":3}},y&2&&{layout:{visibility:d[1]?"visible":"none"}}]):{};y&2048&&(M.$$scope={dirty:y,ctx:d}),o.$set(M)},i(d){s||(m(e.$$.fragment,d),m(t.$$.fragment,d),m(o.$$.fragment,d),s=!0)},o(d){_(e.$$.fragment,d),_(t.$$.fragment,d),_(o.$$.fragment,d),s=!1},d(d){d&&(p(n),p(r)),v(e,d),v(t,d),v(o,d)}}}function h$(l){let e,n,t,r;return e=new Be({props:{label:"Critical Issues",$$slots:{default:[m$]},$$scope:{ctx:l}}}),t=new wt({props:{id:Vl,data:l[4],cluster:{radius:500,maxZoom:14},$$slots:{default:[d$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&2063&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&16&&(i.data=o[4]),s&2050&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}let Vl="criticals",jt="red";function b$(l,e,n){let t;Se(l,An,d=>n(9,t=d));let r,o=!0,s=0,u="",i=Ql();async function a(d){try{n(4,i=await Ni(r.files[0])),n(2,s=i.features.length),n(3,u="")}catch(y){n(3,u=`The file you loaded is broken: ${y}`)}}async function f(d){let y=await t.getSource(Vl).getClusterExpansionZoom(d.detail.features[0].properties.cluster_id);t.easeTo({center:d.detail.features[0].geometry.coordinates,zoom:y})}function c(d){U[d?"unshift":"push"](()=>{r=d,n(0,r)})}function g(d){o=d,n(1,o)}return[r,o,s,u,i,a,f,c,g]}class v$ extends K{constructor(e){super(),Q(this,e,b$,h$,X,{})}}function w$(l){let e;return{c(){e=k("Crossings")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function k$(l){let e;return{c(){e=k("crossing")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function y$(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[k$]},$$scope:{ctx:l}}}),s=new Qe({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&16&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function S$(l){let e,n,t;return n=new ce({props:{$$slots:{default:[y$]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Yr(l){let e,n;return e=new Mn({props:{rows:l[1]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function C$(l){let e,n=Kr(l[3])+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&8&&n!==(n=Kr(r[3])+"")&&z(t,n)},d(r){r&&p(e)}}}function T$(l){let e,n;return e=new ae({props:{$$slots:{default:[C$,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&24&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function O$(l){let e,n;const t=[q(Rt),{sourceLayer:Rt},{paint:{"circle-color":ut(["get","crossing"],{traffic_signals:J.signalized_crossing},J.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[T$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ct({props:r}),e.$on("click",A$),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ie(q(Rt)),s&0&&{sourceLayer:Rt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&16&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function L$(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[S$],default:[w$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Yr(l);return o=new be({props:{url:`pmtiles://${de()}/v1/${Rt}.pmtiles`,$$slots:{default:[O$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Yr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&17&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Rt="crossings";function Kr(l){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[l.crossing]??`Unknown crossing type (${l.crossing})`}function A$(l){window.open(`http://openstreetmap.org/node/${l.detail.features[0].properties.osm_id}`,"_blank")}function I$(l,e,n){let t=!1,r=[["Signalized",J.signalized_crossing],["Other",J.other_crossing]];function o(s){t=s,n(0,t)}return[t,r,o]}class M$ extends K{constructor(e){super(),Q(this,e,I$,L$,X,{})}}function P$(l){let e;return{c(){e=k("Gradients")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function N$(l){let e;return{c(){e=k("OS Terrain 50")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function F$(l){let e,n,t,r,o,s,u,i,a,f,c,g,d;return u=new x({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[N$]},$$scope:{ctx:l}}}),f=new Pe({}),g=new Qe({}),{c(){e=C("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,n=O(),t=C("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,r=O(),o=C("p"),s=k("This layer is built from "),h(u.$$.fragment),i=k(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),a=O(),h(f.$$.fragment),c=O(),h(g.$$.fragment)},m(y,L){$(y,e,L),$(y,n,L),$(y,t,L),$(y,r,L),$(y,o,L),w(o,s),b(u,o,null),w(o,i),$(y,a,L),b(f,y,L),$(y,c,L),b(g,y,L),d=!0},p(y,L){const S={};L&32&&(S.$$scope={dirty:L,ctx:y}),u.$set(S)},i(y){d||(m(u.$$.fragment,y),m(f.$$.fragment,y),m(g.$$.fragment,y),d=!0)},o(y){_(u.$$.fragment,y),_(f.$$.fragment,y),_(g.$$.fragment,y),d=!1},d(y){y&&(p(e),p(n),p(t),p(r),p(o),p(a),p(c)),v(u),v(f,y),v(g,y)}}}function E$(l){let e,n,t;return n=new ce({props:{$$slots:{default:[F$]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Qr(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[2]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function D$(l){let e,n,t,r=Math.abs(l[4].gradient)/100+"",o,s;return{c(){e=C("p"),n=k("Gradient: "),t=C("b"),o=k(r),s=k(`
        %`)},m(u,i){$(u,e,i),w(e,n),w(e,t),w(t,o),w(e,s)},p(u,i){i&16&&r!==(r=Math.abs(u[4].gradient)/100+"")&&z(o,r)},d(u){u&&p(e)}}}function j$(l){let e,n;return e=new ae({props:{$$slots:{default:[D$,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&48&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function R$(l){let e,n,t,r;const o=[q(rt),{sourceLayer:rt},{manageHoverState:!0},{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],l[2],l[1]),"line-width":Re,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}}];let s={$$slots:{default:[j$]},$$scope:{ctx:l}};for(let a=0;a<o.length;a+=1)s=ee(s,o[a]);e=new Ce({props:s});const u=[q(rt+"_arrows"),{sourceLayer:rt},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:l[0]?"visible":"none"}}];let i={};for(let a=0;a<u.length;a+=1)i=ee(i,u[a]);return t=new fn({props:i}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),r=!0},p(a,f){const c=f&7?te(o,[f&0&&ie(q(rt)),f&0&&{sourceLayer:rt},o[2],f&6&&{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],a[2],a[1]),"line-width":Re,"line-opacity":Z(1,.5)}},f&1&&{layout:{visibility:a[0]?"visible":"none"}}]):{};f&32&&(c.$$scope={dirty:f,ctx:a}),e.$set(c);const g=f&1?te(u,[f&0&&ie(q(rt+"_arrows")),f&0&&{sourceLayer:rt},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:a[0]?"visible":"none"}}]):{};t.$set(g)},i(a){r||(m(e.$$.fragment,a),m(t.$$.fragment,a),r=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),r=!1},d(a){a&&p(n),v(e,a),v(t,a)}}}function B$(l){let e,n,t,r,o,s;function u(f){l[3](f)}let i={$$slots:{right:[E$],default:[P$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Qr(l);return o=new be({props:{url:`pmtiles://${de()}/v1/${rt}.pmtiles`,$$slots:{default:[R$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&32&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Qr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&33&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let rt="gradient";function z$(l,e,n){let t=J.gradient_flat_to_steep,r=[0,3,5,8,10,20,100],o=!1;function s(u){o=u,n(0,o)}return[o,t,r,s]}class q$ extends K{constructor(e){super(),Q(this,e,z$,B$,X,{})}}function H$(l){let e,n,t;return{c(){e=C("img"),t=k(`
  Cycle parking`),ln(e.src,n=Zl)||G(e,"src",n),G(e,"alt","a logo representing cycle parking")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function G$(l){let e;return{c(){e=k("OpenStreetMap")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function U$(l){let e;return{c(){e=k("OpenStreetMap Carto")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function W$(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[G$]},$$scope:{ctx:l}}}),i=new x({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[U$]},$$scope:{ctx:l}}}),f=new Qe({}),{c(){e=C("p"),n=k("Cycle parking, according to "),h(t.$$.fragment),r=k(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),o=O(),s=C("p"),u=k("Icon from "),h(i.$$.fragment),a=O(),h(f.$$.fragment)},m(g,d){$(g,e,d),w(e,n),b(t,e,null),w(e,r),$(g,o,d),$(g,s,d),w(s,u),b(i,s,null),$(g,a,d),b(f,g,d),c=!0},p(g,d){const y={};d&8&&(y.$$scope={dirty:d,ctx:g}),t.$set(y);const L={};d&8&&(L.$$scope={dirty:d,ctx:g}),i.$set(L)},i(g){c||(m(t.$$.fragment,g),m(i.$$.fragment,g),m(f.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(i.$$.fragment,g),_(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(o),p(s),p(a)),v(t),v(i),v(f,g)}}}function V$(l){let e,n,t;return n=new ce({props:{$$slots:{default:[W$]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function X$(l){let e,n,t,r=(l[2].capacity??"unknown")+"",o;return{c(){e=C("p"),n=k("Capacity: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&4&&r!==(r=(s[2].capacity??"unknown")+"")&&z(o,r)},d(s){s&&p(e)}}}function J$(l){let e,n;return e=new ae({props:{$$slots:{default:[X$,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Y$(l){let e,n;const t=[q(Bt),{sourceLayer:Bt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[J$]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new fn({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ie(q(Bt)),s&0&&{sourceLayer:Bt},s&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function K$(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[V$],default:[H$]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${de()}/v1/${Bt}.pmtiles`,$$slots:{default:[Y$]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let Bt="cycle_parking";function Q$(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Z$ extends K{constructor(e){super(),Q(this,e,Q$,K$,X,{})}}function x$(l){let e;return{c(){e=k("Education")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function ep(l){let e,n,t,r;return t=new Qe({}),{c(){e=C("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,n=O(),h(t.$$.fragment)},m(o,s){$(o,e,s),$(o,n,s),b(t,o,s),r=!0},p:ne,i(o){r||(m(t.$$.fragment,o),r=!0)},o(o){_(t.$$.fragment,o),r=!1},d(o){o&&(p(e),p(n)),v(t,o)}}}function tp(l){let e,n,t;return n=new ce({props:{$$slots:{default:[ep]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Zr(l){let e,n,t;return n=new Ke({props:{$$slots:{default:[op]},$$scope:{ctx:l}}}),{c(){e=C("div"),h(n.$$.fragment),ye(e,"border","1px solid black"),ye(e,"padding","8px")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&130&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function np(l){let e,n,t;return e=new Oe({props:{color:J.education.schools}}),{c(){h(e.$$.fragment),n=k(`
        Schools`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function rp(l){let e,n,t;return e=new Oe({props:{color:J.education.colleges}}),{c(){h(e.$$.fragment),n=k(`
        Colleges`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function lp(l){let e,n,t;return e=new Oe({props:{color:J.education.universities}}),{c(){h(e.$$.fragment),n=k(`
        Universities`)},m(r,o){b(e,r,o),$(r,n,o),t=!0},p:ne,i(r){t||(m(e.$$.fragment,r),t=!0)},o(r){_(e.$$.fragment,r),t=!1},d(r){r&&p(n),v(e,r)}}}function op(l){let e,n,t,r,o,s,u,i,a;function f(S){l[3](S)}let c={$$slots:{default:[np]},$$scope:{ctx:l}};l[1].school!==void 0&&(c.checked=l[1].school),e=new le({props:c}),U.push(()=>W(e,"checked",f));function g(S){l[4](S)}let d={$$slots:{default:[rp]},$$scope:{ctx:l}};l[1].college!==void 0&&(d.checked=l[1].college),r=new le({props:d}),U.push(()=>W(r,"checked",g));function y(S){l[5](S)}let L={$$slots:{default:[lp]},$$scope:{ctx:l}};return l[1].university!==void 0&&(L.checked=l[1].university),u=new le({props:L}),U.push(()=>W(u,"checked",y)),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment),s=O(),h(u.$$.fragment)},m(S,M){b(e,S,M),$(S,t,M),b(r,S,M),$(S,s,M),b(u,S,M),a=!0},p(S,M){const j={};M&128&&(j.$$scope={dirty:M,ctx:S}),!n&&M&2&&(n=!0,j.checked=S[1].school,V(()=>n=!1)),e.$set(j);const I={};M&128&&(I.$$scope={dirty:M,ctx:S}),!o&&M&2&&(o=!0,I.checked=S[1].college,V(()=>o=!1)),r.$set(I);const N={};M&128&&(N.$$scope={dirty:M,ctx:S}),!i&&M&2&&(i=!0,N.checked=S[1].university,V(()=>i=!1)),u.$set(N)},i(S){a||(m(e.$$.fragment,S),m(r.$$.fragment,S),m(u.$$.fragment,S),a=!0)},o(S){_(e.$$.fragment,S),_(r.$$.fragment,S),_(u.$$.fragment,S),a=!1},d(S){S&&(p(t),p(s)),v(e,S),v(r,S),v(u,S)}}}function sp(l){let e,n=(l[6].name??"Unnamed institution")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=(r[6].name??"Unnamed institution")+"")&&z(t,n)},d(r){r&&p(e)}}}function ip(l){let e,n;return e=new ae({props:{$$slots:{default:[sp,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&192&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ap(l){let e,n;const t=[q(zt),{sourceLayer:zt},{paint:{"fill-color":ut(["get","type"],{school:J.education.schools,college:J.education.colleges,university:J.education.universities},"grey"),"fill-opacity":Z(.7,1)}},{layout:{visibility:l[0]?"visible":"none"}},{filter:xr(l[1])},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[ip]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new He({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&3?te(t,[s&0&&ie(q(zt)),s&0&&{sourceLayer:zt},t[2],s&1&&{layout:{visibility:o[0]?"visible":"none"}},s&2&&{filter:xr(o[1])},t[5],t[6]]):{};s&128&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function fp(l){let e,n,t,r,o,s;function u(f){l[2](f)}let i={$$slots:{right:[tp],default:[x$]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&Zr(l);return o=new be({props:{url:`pmtiles://${de()}/v1/${zt}.pmtiles`,$$slots:{default:[ap]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&128&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=Zr(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&131&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let zt="education";function xr(l){let e=Object.keys(l).filter(n=>l[n]);return["in",["get","type"],["literal",e]]}function up(l,e,n){let t=!1;const r={school:!0,college:!0,university:!0};function o(a){t=a,n(0,t)}function s(a){l.$$.not_equal(r.school,a)&&(r.school=a,n(1,r))}function u(a){l.$$.not_equal(r.college,a)&&(r.college=a,n(1,r))}function i(a){l.$$.not_equal(r.university,a)&&(r.university=a,n(1,r))}return[t,r,o,s,u,i]}class cp extends K{constructor(e){super(),Q(this,e,up,fp,X,{})}}function $p(l){let e,n,t,r;return e=new Oe({props:{color:l[4]}}),{c(){h(e.$$.fragment),n=O(),t=k(l[2])},m(o,s){b(e,o,s),$(o,n,s),$(o,t,s),r=!0},p(o,s){(!r||s&4)&&z(t,o[2])},i(o){r||(m(e.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),r=!1},d(o){o&&(p(n),p(t)),v(e,o)}}}function pp(l){let e;const n=l[5].default,t=Jt(n,l,l[7],null);return{c(){t&&t.c()},m(r,o){t&&t.m(r,o),e=!0},p(r,o){t&&t.p&&(!e||o&128)&&Yt(t,n,r,r[7],e?Qt(n,r[7],o,null):Kt(r[7]),null)},i(r){e||(m(t,r),e=!0)},o(r){_(t,r),e=!1},d(r){t&&t.d(r)}}}function mp(l){let e,n,t;return n=new ce({props:{$$slots:{default:[pp]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&128&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function _p(l){let e,n=(l[8].name??`Unnamed ${l[1]}`)+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&258&&n!==(n=(r[8].name??`Unnamed ${r[1]}`)+"")&&z(t,n)},d(r){r&&p(e)}}}function gp(l){let e,n;return e=new ae({props:{$$slots:{default:[_p,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&386&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dp(l){let e,n;const t=[q(l[0]),{sourceLayer:l[0]},{paint:{"fill-color":l[4],"fill-opacity":Z(.7,1)}},{layout:{visibility:l[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let r={$$slots:{default:[gp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new He({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&25?te(t,[s&1&&ie(q(o[0])),s&1&&{sourceLayer:o[0]},s&16&&{paint:{"fill-color":o[4],"fill-opacity":Z(.7,1)}},s&8&&{layout:{visibility:o[3]?"visible":"none"}},t[4],t[5]]):{};s&130&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function hp(l){let e,n,t,r,o;function s(i){l[6](i)}let u={$$slots:{right:[mp],default:[$p]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.checked=l[3]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new be({props:{url:`pmtiles://${de()}/v1/${l[0]}.pmtiles`,$$slots:{default:[dp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&132&&(f.$$scope={dirty:a,ctx:i}),!n&&a&8&&(n=!0,f.checked=i[3],V(()=>n=!1)),e.$set(f);const c={};a&1&&(c.url=`pmtiles://${de()}/v1/${i[0]}.pmtiles`),a&139&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function bp(l,e,n){let{$$slots:t={},$$scope:r}=e,{name:o}=e,{singularNoun:s}=e,{pluralNoun:u}=e,i=J[o],a=!1;function f(c){a=c,n(3,a)}return l.$$set=c=>{"name"in c&&n(0,o=c.name),"singularNoun"in c&&n(1,s=c.singularNoun),"pluralNoun"in c&&n(2,u=c.pluralNoun),"$$scope"in c&&n(7,r=c.$$scope)},[o,s,u,a,i,t,f,r]}class Xl extends K{constructor(e){super(),Q(this,e,bp,hp,X,{name:0,singularNoun:1,pluralNoun:2})}}function vp(l){let e;return{c(){e=k("hospital")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function wp(l){let e,n,t,r,o,s,u;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[vp]},$$scope:{ctx:l}}}),s=new Qe({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),r=k(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),o=O(),h(s.$$.fragment)},m(i,a){$(i,e,a),w(e,n),b(t,e,null),w(e,r),$(i,o,a),b(s,i,a),u=!0},p(i,a){const f={};a&1&&(f.$$scope={dirty:a,ctx:i}),t.$set(f)},i(i){u||(m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(e),p(o)),v(t),v(s,i)}}}function kp(l){let e,n;return e=new Xl({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[wp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class yp extends K{constructor(e){super(),Q(this,e,null,kp,X,{})}}function Sp(l){let e,n,t;return{c(){e=C("img"),t=k(`
  Railway Stations`),ln(e.src,n=xl)||G(e,"src",n),G(e,"alt","A logo representing a train")},m(r,o){$(r,e,o),$(r,t,o)},p:ne,d(r){r&&(p(e),p(t))}}}function Cp(l){let e;return{c(){e=k("railway station")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Tp(l){let e;return{c(){e=k(`National Rail
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Op(l){let e,n,t,r,o,s,u,i,a,f,c,g;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Cp]},$$scope:{ctx:l}}}),i=new x({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Tp]},$$scope:{ctx:l}}}),c=new Qe({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),r=k(" data from OpenStreetMap (as of 9 August 2023)."),o=O(),s=C("p"),u=k("Icon from "),h(i.$$.fragment),a=k(". (Note that not all stations shown are National Rail.)"),f=O(),h(c.$$.fragment)},m(d,y){$(d,e,y),w(e,n),b(t,e,null),w(e,r),$(d,o,y),$(d,s,y),w(s,u),b(i,s,null),w(s,a),$(d,f,y),b(c,d,y),g=!0},p(d,y){const L={};y&8&&(L.$$scope={dirty:y,ctx:d}),t.$set(L);const S={};y&8&&(S.$$scope={dirty:y,ctx:d}),i.$set(S)},i(d){g||(m(t.$$.fragment,d),m(i.$$.fragment,d),m(c.$$.fragment,d),g=!0)},o(d){_(t.$$.fragment,d),_(i.$$.fragment,d),_(c.$$.fragment,d),g=!1},d(d){d&&(p(e),p(o),p(s),p(f)),v(t),v(i),v(c,d)}}}function Lp(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Op]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&8&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function Ap(l){let e,n=(l[2].name??"Unnamed railway station")+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&4&&n!==(n=(r[2].name??"Unnamed railway station")+"")&&z(t,n)},d(r){r&&p(e)}}}function Ip(l){let e,n;return e=new ae({props:{$$slots:{default:[Ap,({props:t})=>({2:t}),({props:t})=>t?4:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&12&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Mp(l){let e,n;const t=[q(On),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:l[0]?"visible":"none"}}];let r={$$slots:{default:[Ip]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new fn({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&1?te(t,[s&0&&ie(q(On)),s&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:o[0]?"visible":"none"}}]):{};s&8&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Pp(l){let e,n,t,r,o;function s(i){l[1](i)}let u={$$slots:{right:[Lp],default:[Sp]},$$scope:{ctx:l}};return l[0]!==void 0&&(u.checked=l[0]),e=new le({props:u}),U.push(()=>W(e,"checked",s)),r=new wt({props:{data:`${de()}/v1/${On}.geojson`,$$slots:{default:[Mp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,[a]){const f={};a&8&&(f.$$scope={dirty:a,ctx:i}),!n&&a&1&&(n=!0,f.checked=i[0],V(()=>n=!1)),e.$set(f);const c={};a&9&&(c.$$scope={dirty:a,ctx:i}),r.$set(c)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}let On="railway_stations";function Np(l,e,n){let t=!1;function r(o){t=o,n(0,t)}return[t,r]}class Fp extends K{constructor(e){super(),Q(this,e,Np,Pp,X,{})}}function Ep(l){let e;return{c(){e=k("sports pitches")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Dp(l){let e;return{c(){e=k("sports centres")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jp(l){let e,n,t,r,o,s,u,i,a;return t=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[Ep]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[Dp]},$$scope:{ctx:l}}}),i=new Qe({}),{c(){e=C("p"),n=k("This shows "),h(t.$$.fragment),r=k(" and "),h(o.$$.fragment),s=k(" data from OpenStreetMap (as of 9 August 2023)."),u=O(),h(i.$$.fragment)},m(f,c){$(f,e,c),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(f,u,c),b(i,f,c),a=!0},p(f,c){const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),t.$set(g);const d={};c&1&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){a||(m(t.$$.fragment,f),m(o.$$.fragment,f),m(i.$$.fragment,f),a=!0)},o(f){_(t.$$.fragment,f),_(o.$$.fragment,f),_(i.$$.fragment,f),a=!1},d(f){f&&(p(e),p(u)),v(t),v(o),v(i,f)}}}function Rp(l){let e,n;return e=new Xl({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[jp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}class Bp extends K{constructor(e){super(),Q(this,e,null,Rp,X,{})}}function zp(l){let e;return{c(){e=k("Stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function qp(l){let e;return{c(){e=k("DfT stats19")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Hp(l){let e;return{c(){e=k("documented by DfT")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Gp(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,L,S,M,j,I,N,A,P,F;return t=new x({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[qp]},$$scope:{ctx:l}}}),M=new x({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[Hp]},$$scope:{ctx:l}}}),P=new Pe({}),{c(){e=C("p"),n=k("This layer shows collisions recorded in the "),h(t.$$.fragment),r=k(" dataset. Please note these limitations:"),o=O(),s=C("ul"),u=C("li"),u.textContent="Only collisions between 2017 and 2022 are included",i=O(),a=C("li"),a.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=O(),c=C("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,g=O(),d=C("li"),d.textContent='The "pedestrians" category also include mobility scooters',y=O(),L=C("li"),S=k("All limitations "),h(M.$$.fragment),j=k(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),I=O(),N=C("p"),N.textContent="You can click a point to open the full report, thanks to CycleStreets.",A=O(),h(P.$$.fragment)},m(T,E){$(T,e,E),w(e,n),b(t,e,null),w(e,r),$(T,o,E),$(T,s,E),w(s,u),w(s,i),w(s,a),w(s,f),w(s,c),w(s,g),w(s,d),w(s,y),w(s,L),w(L,S),b(M,L,null),w(L,j),$(T,I,E),$(T,N,E),$(T,A,E),b(P,T,E),F=!0},p(T,E){const H={};E&16777216&&(H.$$scope={dirty:E,ctx:T}),t.$set(H);const R={};E&16777216&&(R.$$scope={dirty:E,ctx:T}),M.$set(R)},i(T){F||(m(t.$$.fragment,T),m(M.$$.fragment,T),m(P.$$.fragment,T),F=!0)},o(T){_(t.$$.fragment,T),_(M.$$.fragment,T),_(P.$$.fragment,T),F=!1},d(T){T&&(p(e),p(o),p(s),p(I),p(N),p(A)),v(t),v(M),v(P,T)}}}function Up(l){let e,n,t;return n=new ce({props:{$$slots:{default:[Gp]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&16777216&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function el(l){let e,n,t,r,o,s,u,i,a,f,c,g,d;return n=new Ke({props:{small:!0,$$slots:{default:[Yp]},$$scope:{ctx:l}}}),f=new Mn({props:{rows:l[14]}}),{c(){e=C("div"),h(n.$$.fragment),t=O(),r=C("div"),o=k(`Filter years:
      `),s=C("input"),u=k(`
      -
      `),i=C("input"),a=O(),h(f.$$.fragment),G(s,"type","number"),G(s,"min",2017),G(s,"max",2022),G(s,"class","svelte-1ft65rw"),G(i,"type","number"),G(i,"min",2017),G(i,"max",2022),G(i,"class","svelte-1ft65rw"),ye(e,"border","1px solid black"),ye(e,"padding","8px")},m(y,L){$(y,e,L),b(n,e,null),w(e,t),w(e,r),w(r,o),w(r,s),Je(s,l[4]),w(r,u),w(r,i),Je(i,l[5]),w(e,a),b(f,e,null),c=!0,g||(d=[ft(s,"input",l[20]),ft(i,"input",l[21])],g=!0)},p(y,L){const S={};L&16777231&&(S.$$scope={dirty:L,ctx:y}),n.$set(S),L&16&&Wt(s.value)!==y[4]&&Je(s,y[4]),L&32&&Wt(i.value)!==y[5]&&Je(i,y[5])},i(y){c||(m(n.$$.fragment,y),m(f.$$.fragment,y),c=!0)},o(y){_(n.$$.fragment,y),_(f.$$.fragment,y),c=!1},d(y){y&&p(e),v(n),v(f),g=!1,Cl(d)}}}function Wp(l){let e;return{c(){e=k("Pedestrians")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Vp(l){let e;return{c(){e=k("Cyclists")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Xp(l){let e;return{c(){e=k("Horse riders")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Jp(l){let e;return{c(){e=k("Other")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Yp(l){let e,n,t,r,o,s,u,i,a,f,c,g;function d(A){l[16](A)}let y={$$slots:{default:[Wp]},$$scope:{ctx:l}};l[0]!==void 0&&(y.checked=l[0]),e=new le({props:y}),U.push(()=>W(e,"checked",d));function L(A){l[17](A)}let S={$$slots:{default:[Vp]},$$scope:{ctx:l}};l[1]!==void 0&&(S.checked=l[1]),r=new le({props:S}),U.push(()=>W(r,"checked",L));function M(A){l[18](A)}let j={$$slots:{default:[Xp]},$$scope:{ctx:l}};l[2]!==void 0&&(j.checked=l[2]),u=new le({props:j}),U.push(()=>W(u,"checked",M));function I(A){l[19](A)}let N={$$slots:{default:[Jp]},$$scope:{ctx:l}};return l[3]!==void 0&&(N.checked=l[3]),f=new le({props:N}),U.push(()=>W(f,"checked",I)),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment),s=O(),h(u.$$.fragment),a=O(),h(f.$$.fragment)},m(A,P){b(e,A,P),$(A,t,P),b(r,A,P),$(A,s,P),b(u,A,P),$(A,a,P),b(f,A,P),g=!0},p(A,P){const F={};P&16777216&&(F.$$scope={dirty:P,ctx:A}),!n&&P&1&&(n=!0,F.checked=A[0],V(()=>n=!1)),e.$set(F);const T={};P&16777216&&(T.$$scope={dirty:P,ctx:A}),!o&&P&2&&(o=!0,T.checked=A[1],V(()=>o=!1)),r.$set(T);const E={};P&16777216&&(E.$$scope={dirty:P,ctx:A}),!i&&P&4&&(i=!0,E.checked=A[2],V(()=>i=!1)),u.$set(E);const H={};P&16777216&&(H.$$scope={dirty:P,ctx:A}),!c&&P&8&&(c=!0,H.checked=A[3],V(()=>c=!1)),f.$set(H)},i(A){g||(m(e.$$.fragment,A),m(r.$$.fragment,A),m(u.$$.fragment,A),m(f.$$.fragment,A),g=!0)},o(A){_(e.$$.fragment,A),_(r.$$.fragment,A),_(u.$$.fragment,A),_(f.$$.fragment,A),g=!1},d(A){A&&(p(t),p(s),p(a)),v(e,A),v(r,A),v(u,A),v(f,A)}}}function tl(l){let e,n,t,r=l[8][l[23].pedestrian_location]+"",o;return{c(){e=C("p"),n=k("Pedestrian location: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[8][s[23].pedestrian_location]+"")&&z(o,r)},d(s){s&&p(e)}}}function nl(l){let e,n,t,r=l[9][l[23].pedestrian_movement]+"",o;return{c(){e=C("p"),n=k("Pedestrian movement: "),t=C("b"),o=k(r)},m(s,u){$(s,e,u),w(e,n),w(e,t),w(t,o)},p(s,u){u&8388608&&r!==(r=s[9][s[23].pedestrian_movement]+"")&&z(o,r)},d(s){s&&p(e)}}}function Kp(l){let e,n,t,r=l[23].year+"",o,s,u,i,a,f=l[10][l[23].severity]+"",c,g,d,y,L,S=rl(l[23])+"",M,j,I,N,A,P=l[23].pedestrian_location&&tl(l),F=l[23].pedestrian_movement&&nl(l);return{c(){e=C("p"),n=k("Year: "),t=C("b"),o=k(r),s=O(),u=C("p"),i=k("Severity: "),a=C("b"),c=k(f),g=O(),d=C("p"),y=k("Casualties: "),L=C("b"),M=k(S),j=O(),P&&P.c(),I=O(),F&&F.c(),N=O(),A=C("p"),A.textContent="Click to open full report in CycleStreets"},m(T,E){$(T,e,E),w(e,n),w(e,t),w(t,o),$(T,s,E),$(T,u,E),w(u,i),w(u,a),w(a,c),$(T,g,E),$(T,d,E),w(d,y),w(d,L),w(L,M),$(T,j,E),P&&P.m(T,E),$(T,I,E),F&&F.m(T,E),$(T,N,E),$(T,A,E)},p(T,E){E&8388608&&r!==(r=T[23].year+"")&&z(o,r),E&8388608&&f!==(f=T[10][T[23].severity]+"")&&z(c,f),E&8388608&&S!==(S=rl(T[23])+"")&&z(M,S),T[23].pedestrian_location?P?P.p(T,E):(P=tl(T),P.c(),P.m(I.parentNode,I)):P&&(P.d(1),P=null),T[23].pedestrian_movement?F?F.p(T,E):(F=nl(T),F.c(),F.m(N.parentNode,N)):F&&(F.d(1),F=null)},d(T){T&&(p(e),p(s),p(u),p(g),p(d),p(j),p(I),p(N),p(A)),P&&P.d(T),F&&F.d(T)}}}function Qp(l){let e,n;return e=new ae({props:{$$slots:{default:[Kp,({props:t})=>({23:t}),({props:t})=>t?8388608:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&25165824&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Zp(l){let e,n;const t=[q(qt),{sourceLayer:qt},{paint:{"circle-color":we(["get","severity"],[1,2,3],[l[11],l[12],l[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:l[7]},{layout:{visibility:l[6]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[Qp]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ct({props:r}),e.$on("click",em),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&14528?te(t,[s&0&&ie(q(qt)),s&0&&{sourceLayer:qt},s&14336&&{paint:{"circle-color":we(["get","severity"],[1,2,3],[o[11],o[12],o[13]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},s&128&&{filter:o[7]},s&64&&{layout:{visibility:o[6]?"visible":"none"}},t[5],t[6]]):{};s&16777216&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function xp(l){let e,n,t,r,o,s;function u(f){l[15](f)}let i={$$slots:{right:[Up],default:[zp]},$$scope:{ctx:l}};l[6]!==void 0&&(i.checked=l[6]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[6]&&el(l);return o=new be({props:{url:`pmtiles://${de()}/v1/${qt}.pmtiles`,$$slots:{default:[Zp]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&16777216&&(g.$$scope={dirty:c,ctx:f}),!n&&c&64&&(n=!0,g.checked=f[6],V(()=>n=!1)),e.$set(g),f[6]?a?(a.p(f,c),c&64&&m(a,1)):(a=el(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&16777408&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let qt="stats19";function rl(l){let e=[];return l.pedestrian&&e.push("pedestrian"),l.cyclist&&e.push("cyclist"),l.horse_rider&&e.push("horse rider"),l.other&&e.push("other"),e.join(", ")}function em(l){window.open(`https://www.cyclestreets.net/collisions/reports/${l.detail.features[0].properties.accident_index}`,"_blank")}function tm(l,e,n){let t,r=!1,o=!0,s=!0,u=!0,i=!1,a=2017,f=2022;function c(H,R,D,B,Y,re){let oe=["any"];return o&&oe.push(["get","pedestrian"]),s&&oe.push(["get","cyclist"]),u&&oe.push(["get","horse_rider"]),i&&oe.push(["get","other"]),["all",[">=",["get","year"],a],["<=",["get","year"],f],oe]}let g={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},d={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},y={1:"Fatal",2:"Serious",3:"Slight"},L=J.sequential_low_to_high[4],S=J.sequential_low_to_high[2],M=J.sequential_low_to_high[0],j=[["Fatal",L],["Serious",S],["Slight",M]];function I(H){r=H,n(6,r)}function N(H){o=H,n(0,o)}function A(H){s=H,n(1,s)}function P(H){u=H,n(2,u)}function F(H){i=H,n(3,i)}function T(){a=Wt(this.value),n(4,a)}function E(){f=Wt(this.value),n(5,f)}return l.$$.update=()=>{l.$$.dirty&63&&n(7,t=c())},[o,s,u,i,a,f,r,t,g,d,y,L,S,M,j,I,N,A,P,F,T,E]}class nm extends K{constructor(e){super(),Q(this,e,tm,xp,X,{})}}function rm(l){let e;return{c(){e=k("Vehicle counts")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function lm(l){let e;return{c(){e=k(`DfT road statistics
        `)},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function om(l){let e;return{c(){e=k("methodology")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function sm(l){let e,n,t,r,o,s,u,i,a,f,c;return t=new x({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[lm]},$$scope:{ctx:l}}}),o=new x({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[om]},$$scope:{ctx:l}}}),f=new Pe({}),{c(){e=C("p"),n=k("AADF (annual average daily flow) data from "),h(t.$$.fragment),r=k(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),h(o.$$.fragment),s=k(" for details and caveats about the measurements."),u=O(),i=C("p"),i.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,a=O(),h(f.$$.fragment)},m(g,d){$(g,e,d),w(e,n),b(t,e,null),w(e,r),b(o,e,null),w(e,s),$(g,u,d),$(g,i,d),$(g,a,d),b(f,g,d),c=!0},p(g,d){const y={};d&64&&(y.$$scope={dirty:d,ctx:g}),t.$set(y);const L={};d&64&&(L.$$scope={dirty:d,ctx:g}),o.$set(L)},i(g){c||(m(t.$$.fragment,g),m(o.$$.fragment,g),m(f.$$.fragment,g),c=!0)},o(g){_(t.$$.fragment,g),_(o.$$.fragment,g),_(f.$$.fragment,g),c=!1},d(g){g&&(p(e),p(u),p(i),p(a)),v(t),v(o),v(f,g)}}}function im(l){let e,n,t;return n=new ce({props:{$$slots:{default:[sm]},$$scope:{ctx:l}}}),{c(){e=C("span"),h(n.$$.fragment),G(e,"slot","right")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&64&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function ll(l){let e,n;return e=new Ge({props:{colorScale:l[1],limits:l[3]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function am(l){let e,n=l[5].location+"",t,r,o,s,u=l[5].year+"",i,a,f,c=l[5].motor_vehicles.toLocaleString()+"",g,d,y,L,S=l[5].year+"",M,j,I,N=l[5].pedal_cycles.toLocaleString()+"",A,P,F,T,E,H=l[5].method+"",R;return{c(){e=C("h2"),t=k(n),r=O(),o=C("p"),s=k("Total motor vehicles ("),i=k(u),a=k(` AADF):
        `),f=C("b"),g=k(c),d=O(),y=C("p"),L=k("Total pedal cycles ("),M=k(S),j=k(` AADF):
        `),I=C("b"),A=k(N),P=O(),F=C("p"),T=k("Count method: "),E=C("b"),R=k(H)},m(D,B){$(D,e,B),w(e,t),$(D,r,B),$(D,o,B),w(o,s),w(o,i),w(o,a),w(o,f),w(f,g),$(D,d,B),$(D,y,B),w(y,L),w(y,M),w(y,j),w(y,I),w(I,A),$(D,P,B),$(D,F,B),w(F,T),w(F,E),w(E,R)},p(D,B){B&32&&n!==(n=D[5].location+"")&&z(t,n),B&32&&u!==(u=D[5].year+"")&&z(i,u),B&32&&c!==(c=D[5].motor_vehicles.toLocaleString()+"")&&z(g,c),B&32&&S!==(S=D[5].year+"")&&z(M,S),B&32&&N!==(N=D[5].pedal_cycles.toLocaleString()+"")&&z(A,N),B&32&&H!==(H=D[5].method+"")&&z(R,H)},d(D){D&&(p(e),p(r),p(o),p(d),p(y),p(P),p(F))}}}function fm(l){let e,n;return e=new ae({props:{$$slots:{default:[am,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&96&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function um(l){let e,n;const t=[q(Ht),{sourceLayer:Ht},{paint:{"circle-color":we(["get","motor_vehicles"],l[2],l[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let r={$$slots:{default:[fm]},$$scope:{ctx:l}};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new ct({props:r}),e.$on("click",$m),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&7?te(t,[s&0&&ie(q(Ht)),s&0&&{sourceLayer:Ht},s&6&&{paint:{"circle-color":we(["get","motor_vehicles"],o[2],o[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},s&1&&{layout:{visibility:o[0]?"visible":"none"}},t[4],t[5]]):{};s&64&&(u.$$scope={dirty:s,ctx:o}),e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function cm(l){let e,n,t,r,o,s;function u(f){l[4](f)}let i={$$slots:{right:[im],default:[rm]},$$scope:{ctx:l}};l[0]!==void 0&&(i.checked=l[0]),e=new le({props:i}),U.push(()=>W(e,"checked",u));let a=l[0]&&ll(l);return o=new be({props:{url:`pmtiles://${de()}/v1/${Ht}.pmtiles`,$$slots:{default:[um]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),t=O(),a&&a.c(),r=O(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),a&&a.m(f,c),$(f,r,c),b(o,f,c),s=!0},p(f,[c]){const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,g.checked=f[0],V(()=>n=!1)),e.$set(g),f[0]?a?(a.p(f,c),c&1&&m(a,1)):(a=ll(f),a.c(),m(a,1),a.m(r.parentNode,r)):a&&($e(),_(a,1,1,()=>{a=null}),pe());const d={};c&65&&(d.$$scope={dirty:c,ctx:f}),o.$set(d)},i(f){s||(m(e.$$.fragment,f),m(a),m(o.$$.fragment,f),s=!0)},o(f){_(e.$$.fragment,f),_(a),_(o.$$.fragment,f),s=!1},d(f){f&&(p(t),p(r)),v(e,f),a&&a.d(f),v(o,f)}}}let Ht="vehicle_counts";function $m(l){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${l.detail.features[0].properties.count_point}`,"_blank")}function pm(l,e,n){let t=J.sequential_low_to_high,r=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],s=!1;function u(i){s=i,n(0,s)}return[s,t,r,o,u]}class mm extends K{constructor(e){super(),Q(this,e,pm,cm,X,{})}}function _m(l){let e,n,t,r,o,s,u,i;return e=new cp({}),t=new yp({}),o=new Bp({}),u=new Fp({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment)},m(a,f){b(e,a,f),$(a,n,f),b(t,a,f),$(a,r,f),b(o,a,f),$(a,s,f),b(u,a,f),i=!0},i(a){i||(m(e.$$.fragment,a),m(t.$$.fragment,a),m(o.$$.fragment,a),m(u.$$.fragment,a),i=!0)},o(a){_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),_(u.$$.fragment,a),i=!1},d(a){a&&(p(n),p(r),p(s)),v(e,a),v(t,a),v(o,a),v(u,a)}}}function gm(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[_m]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function dm(l){let e,n,t,r,o,s,u,i,a,f;return e=new Eu({}),t=new tc({}),o=new Wu({}),u=new Z$({}),a=new M$({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function hm(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[dm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function bm(l){let e,n,t,r,o,s;return e=new ku({}),t=new e$({}),o=new u$({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function vm(l){let e,n,t,r,o,s,u,i,a,f;return e=new Nf({}),t=new au({}),o=new Ba({}),u=new af({}),a=new kf({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),h(a.$$.fragment)},m(c,g){b(e,c,g),$(c,n,g),b(t,c,g),$(c,r,g),b(o,c,g),$(c,s,g),b(u,c,g),$(c,i,g),b(a,c,g),f=!0},i(c){f||(m(e.$$.fragment,c),m(t.$$.fragment,c),m(o.$$.fragment,c),m(u.$$.fragment,c),m(a.$$.fragment,c),f=!0)},o(c){_(e.$$.fragment,c),_(t.$$.fragment,c),_(o.$$.fragment,c),_(u.$$.fragment,c),_(a.$$.fragment,c),f=!1},d(c){c&&(p(n),p(r),p(s),p(i)),v(e,c),v(t,c),v(o,c),v(u,c),v(a,c)}}}function wm(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[vm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function km(l){let e,n,t,r;return e=new La({}),t=new Ka({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function ym(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[km]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Sm(l){let e,n,t,r,o,s;return e=new Vc({}),t=new cc({}),o=new Dc({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment)},m(u,i){b(e,u,i),$(u,n,i),b(t,u,i),$(u,r,i),b(o,u,i),s=!0},i(u){s||(m(e.$$.fragment,u),m(t.$$.fragment,u),m(o.$$.fragment,u),s=!0)},o(u){_(e.$$.fragment,u),_(t.$$.fragment,u),_(o.$$.fragment,u),s=!1},d(u){u&&(p(n),p(r)),v(e,u),v(t,u),v(o,u)}}}function Cm(l){let e,n,t,r,o,s,u,i,a=hn()=="Private (development)",f,c,g,d,y;e=new mm({}),t=new nm({}),o=new Cc({}),u=new q$({});let L=a&&Sm();return c=new qf({}),d=new Qf({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),L&&L.c(),f=O(),h(c.$$.fragment),g=O(),h(d.$$.fragment)},m(S,M){b(e,S,M),$(S,n,M),b(t,S,M),$(S,r,M),b(o,S,M),$(S,s,M),b(u,S,M),$(S,i,M),L&&L.m(S,M),$(S,f,M),b(c,S,M),$(S,g,M),b(d,S,M),y=!0},p:ne,i(S){y||(m(e.$$.fragment,S),m(t.$$.fragment,S),m(o.$$.fragment,S),m(u.$$.fragment,S),m(L),m(c.$$.fragment,S),m(d.$$.fragment,S),y=!0)},o(S){_(e.$$.fragment,S),_(t.$$.fragment,S),_(o.$$.fragment,S),_(u.$$.fragment,S),_(L),_(c.$$.fragment,S),_(d.$$.fragment,S),y=!1},d(S){S&&(p(n),p(r),p(s),p(i),p(f),p(g)),v(e,S),v(t,S),v(o,S),v(u,S),L&&L.d(S),v(c,S),v(d,S)}}}function Tm(l){let e,n;return e=new Ke({props:{small:!0,$$slots:{default:[Cm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&16&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Om(l){let e,n,t,r,o;function s(i){l[3](i)}let u={};return l[0]!==void 0&&(u.enabled=l[0]),e=new so({props:u}),U.push(()=>W(e,"enabled",s)),r=new $o({}),{c(){h(e.$$.fragment),t=O(),h(r.$$.fragment)},m(i,a){b(e,i,a),$(i,t,a),b(r,i,a),o=!0},p(i,a){const f={};!n&&a&1&&(n=!0,f.enabled=i[0],V(()=>n=!1)),e.$set(f)},i(i){o||(m(e.$$.fragment,i),m(r.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(r.$$.fragment,i),o=!1},d(i){i&&p(t),v(e,i),v(r,i)}}}function Lm(l){let e,n,t,r,o,s,u,i,a,f,c,g,d,y,L,S,M,j;return e=new v$({}),t=new Be({props:{label:"Trip generators",$$slots:{default:[gm]},$$scope:{ctx:l}}}),o=new Be({props:{label:"Existing infrastructure",$$slots:{default:[hm]},$$scope:{ctx:l}}}),u=new Be({props:{label:"Public transit",$$slots:{default:[bm]},$$scope:{ctx:l}}}),a=new Be({props:{label:"Boundaries",$$slots:{default:[wm]},$$scope:{ctx:l}}}),c=new Be({props:{label:"Census",$$slots:{default:[ym]},$$scope:{ctx:l}}}),d=new Be({props:{label:"Other",$$slots:{default:[Tm]},$$scope:{ctx:l}}}),L=new Be({props:{label:"Tools",$$slots:{default:[Om]},$$scope:{ctx:l}}}),M=new oo({props:{disabled:!l[1]}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),h(a.$$.fragment),f=O(),h(c.$$.fragment),g=O(),h(d.$$.fragment),y=O(),h(L.$$.fragment),S=O(),h(M.$$.fragment)},m(I,N){b(e,I,N),$(I,n,N),b(t,I,N),$(I,r,N),b(o,I,N),$(I,s,N),b(u,I,N),$(I,i,N),b(a,I,N),$(I,f,N),b(c,I,N),$(I,g,N),b(d,I,N),$(I,y,N),b(L,I,N),$(I,S,N),b(M,I,N),j=!0},p(I,N){const A={};N&16&&(A.$$scope={dirty:N,ctx:I}),t.$set(A);const P={};N&16&&(P.$$scope={dirty:N,ctx:I}),o.$set(P);const F={};N&16&&(F.$$scope={dirty:N,ctx:I}),u.$set(F);const T={};N&16&&(T.$$scope={dirty:N,ctx:I}),a.$set(T);const E={};N&16&&(E.$$scope={dirty:N,ctx:I}),c.$set(E);const H={};N&16&&(H.$$scope={dirty:N,ctx:I}),d.$set(H);const R={};N&17&&(R.$$scope={dirty:N,ctx:I}),L.$set(R);const D={};N&2&&(D.disabled=!I[1]),M.$set(D)},i(I){j||(m(e.$$.fragment,I),m(t.$$.fragment,I),m(o.$$.fragment,I),m(u.$$.fragment,I),m(a.$$.fragment,I),m(c.$$.fragment,I),m(d.$$.fragment,I),m(L.$$.fragment,I),m(M.$$.fragment,I),j=!0)},o(I){_(e.$$.fragment,I),_(t.$$.fragment,I),_(o.$$.fragment,I),_(u.$$.fragment,I),_(a.$$.fragment,I),_(c.$$.fragment,I),_(d.$$.fragment,I),_(L.$$.fragment,I),_(M.$$.fragment,I),j=!1},d(I){I&&(p(n),p(r),p(s),p(i),p(f),p(g),p(y),p(S)),v(e,I),v(t,I),v(o,I),v(u,I),v(a,I),v(c,I),v(d,I),v(L,I),v(M,I)}}}function Am(l){let e,n;const t=[q("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:l[1]?"none":"visible"}}];let r={};for(let o=0;o<t.length;o+=1)r=ee(r,t[o]);return e=new He({props:r}),{c(){h(e.$$.fragment)},m(o,s){b(e,o,s),n=!0},p(o,s){const u=s&2?te(t,[t[0],t[1],{layout:{visibility:o[1]?"none":"visible"}}]):{};e.$set(u)},i(o){n||(m(e.$$.fragment,o),n=!0)},o(o){_(e.$$.fragment,o),n=!1},d(o){v(e,o)}}}function Im(l){let e,n,t,r;return e=new Be({props:{label:"Layers",open:!0,$$slots:{default:[Lm]},$$scope:{ctx:l}}}),t=new wt({props:{data:l[2],$$slots:{default:[Am]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,[s]){const u={};s&19&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&18&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Mm(l,e,n){let t,r;Se(l,_r,u=>n(1,r=u));let o={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function s(u){t=u,n(0,t),n(1,r)}return l.$$.update=()=>{l.$$.dirty&2&&n(0,t=!r),l.$$.dirty&1&&_r.set(!t)},[t,r,o,s]}class Pm extends K{constructor(e){super(),Q(this,e,Mm,Im,X,{})}}function ol(l){let e;return{c(){e=C("p"),e.textContent="Loading scheme data..."},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Nm(l){let e,n=l[0]&&ol();return{c(){n&&n.c(),e=qe()},m(t,r){n&&n.m(t,r),$(t,e,r)},p(t,[r]){t[0]?n||(n=ol(),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:ne,o:ne,d(t){t&&p(e),n&&n.d(t)}}}function Fm(l,e,n){let{loadFile:t}=e,r=!0;return In(async()=>{let s=await(await fetch(`${an()}/v1/random_schemes.geojson`)).text();t(s),n(0,r=!1)}),l.$$set=o=>{"loadFile"in o&&n(1,t=o.loadFile)},[r,t]}class Em extends K{constructor(e){super(),Q(this,e,Fm,Nm,X,{loadFile:1})}}function sl(l){var o;let e,n,t=((o=l[0].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=C("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&1&&t!==(t=((i=s[0].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function Dm(l){let e;return{c(){e=k("Show on map")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function jm(l){let e;return{c(){e=k("Edit scheme locally")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function Rm(l){let e,n,t,r;return e=new bt({props:{$$slots:{default:[Dm]},$$scope:{ctx:l}}}),e.$on("click",l[1]),t=new bt({props:{$$slots:{default:[jm]},$$scope:{ctx:l}}}),t.$on("click",l[2]),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&32&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&32&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Bm(l){var E,H,R,D;let e,n,t=l[0].scheme_reference+"",r,o,s,u,i=((E=l[0].browse)==null?void 0:E.authority_or_region)+"",a,f,c,g,d=((H=l[0].browse)==null?void 0:H.capital_scheme_id)+"",y,L,S,M,j=((R=l[0].browse)==null?void 0:R.funding_programme)+"",I,N,A,P,F,T=((D=l[0].browse)==null?void 0:D.current_milestone)&&sl(l);return P=new io({props:{$$slots:{default:[Rm]},$$scope:{ctx:l}}}),{c(){e=C("p"),n=k("Scheme reference: "),r=k(t),o=O(),s=C("p"),u=k("Authority or region: "),a=k(i),f=O(),c=C("p"),g=k("Capital scheme ID: "),y=k(d),L=O(),S=C("p"),M=k("Funding programme: "),I=k(j),N=O(),T&&T.c(),A=O(),h(P.$$.fragment)},m(B,Y){$(B,e,Y),w(e,n),w(e,r),$(B,o,Y),$(B,s,Y),w(s,u),w(s,a),$(B,f,Y),$(B,c,Y),w(c,g),w(c,y),$(B,L,Y),$(B,S,Y),w(S,M),w(S,I),$(B,N,Y),T&&T.m(B,Y),$(B,A,Y),b(P,B,Y),F=!0},p(B,Y){var oe,me,Le,Ne;(!F||Y&1)&&t!==(t=B[0].scheme_reference+"")&&z(r,t),(!F||Y&1)&&i!==(i=((oe=B[0].browse)==null?void 0:oe.authority_or_region)+"")&&z(a,i),(!F||Y&1)&&d!==(d=((me=B[0].browse)==null?void 0:me.capital_scheme_id)+"")&&z(y,d),(!F||Y&1)&&j!==(j=((Le=B[0].browse)==null?void 0:Le.funding_programme)+"")&&z(I,j),(Ne=B[0].browse)!=null&&Ne.current_milestone?T?T.p(B,Y):(T=sl(B),T.c(),T.m(A.parentNode,A)):T&&(T.d(1),T=null);const re={};Y&32&&(re.$$scope={dirty:Y,ctx:B}),P.$set(re)},i(B){F||(m(P.$$.fragment,B),F=!0)},o(B){_(P.$$.fragment,B),F=!1},d(B){B&&(p(e),p(o),p(s),p(f),p(c),p(L),p(S),p(N),p(A)),T&&T.d(B),v(P,B)}}}function zm(l){let e,n;return e=new Be({props:{label:`${l[0].scheme_name}`,$$slots:{default:[Bm]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&1&&(o.label=`${t[0].scheme_name}`),r&33&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function qm(l,e,n){let t,r;Se(l,vt,i=>n(3,t=i)),Se(l,An,i=>n(4,r=i));let{scheme:o}=e;function s(){let i={type:"FeatureCollection",features:t.features.filter(a=>a.properties.scheme_reference==o.scheme_reference)};r==null||r.fitBounds(eo(i),{padding:20,animate:!1})}function u(){var f,c;let i={type:"FeatureCollection",features:t.features.filter(g=>g.properties.scheme_reference==o.scheme_reference)},a=((f=o.browse)==null?void 0:f.authority_or_region)||"unknown authority";window.localStorage.setItem(a,JSON.stringify(i)),window.open(`scheme.html?authority=${(c=o.browse)==null?void 0:c.authority_or_region}`,"_blank")}return l.$$set=i=>{"scheme"in i&&n(0,o=i.scheme)},[o,s,u]}class Hm extends K{constructor(e){super(),Q(this,e,qm,zm,X,{scheme:0})}}function il(l){let e,n,t=qn(l[0].length_meters)+"",r;return{c(){e=C("p"),n=k("Length: "),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(e,r)},p(o,s){s&1&&t!==(t=qn(o[0].length_meters)+"")&&z(r,t)},d(o){o&&p(e)}}}function al(l){let e,n=it(l[0].description,l[2])+"";return{c(){e=C("p")},m(t,r){$(t,e,r),e.innerHTML=n},p(t,r){r&5&&n!==(n=it(t[0].description,t[2])+"")&&(e.innerHTML=n)},d(t){t&&p(e)}}}function fl(l){let e,n=JSON.stringify(JSON.parse(l[0].pipeline),null,"  ")+"",t;return{c(){e=C("pre"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&1&&n!==(n=JSON.stringify(JSON.parse(r[0].pipeline),null,"  ")+"")&&z(t,n)},d(r){r&&p(e)}}}function ul(l){var o;let e,n,t=((o=l[1].browse)==null?void 0:o.current_milestone)+"",r;return{c(){e=C("p"),n=k("Current milestone: "),r=k(t)},m(s,u){$(s,e,u),w(e,n),w(e,r)},p(s,u){var i;u&2&&t!==(t=((i=s[1].browse)==null?void 0:i.current_milestone)+"")&&z(r,t)},d(s){s&&p(e)}}}function cl(l){let e,n=JSON.stringify(l[1].pipeline,null,"  ")+"",t;return{c(){e=C("pre"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&2&&n!==(n=JSON.stringify(r[1].pipeline,null,"  ")+"")&&z(t,n)},d(r){r&&p(e)}}}function Gm(l){var Me,Ee,Fn,En;let e,n,t,r=it(l[0].name,l[2])+"",o,s=l[0].intervention_type+"",u,i,a,f,c,g,d,y,L,S,M,j=it(l[1].scheme_name??"",l[3])+"",I,N,A=it(l[0].scheme_reference,l[3])+"",P,F,T,E,H=((Me=l[1].browse)==null?void 0:Me.authority_or_region)+"",R,D,B,Y,re=((Ee=l[1].browse)==null?void 0:Ee.capital_scheme_id)+"",oe,me,Le,Ne,se=((Fn=l[1].browse)==null?void 0:Fn.funding_programme)+"",Ae,Te,Ie,_e=l[0].length_meters&&il(l),ve=l[0].description&&al(l),he=l[0].pipeline&&fl(l),fe=((En=l[1].browse)==null?void 0:En.current_milestone)&&ul(l),ke=l[1].pipeline&&cl(l);return{c(){e=C("div"),n=C("h2"),t=new Gt(!1),o=k(" ("),u=k(s),i=k(")"),a=O(),_e&&_e.c(),f=O(),ve&&ve.c(),c=O(),he&&he.c(),g=O(),d=C("hr"),y=O(),L=C("p"),S=k("Part of scheme: "),M=new Gt(!1),I=k(" ("),N=new Gt(!1),P=k(")"),F=O(),T=C("p"),E=k("Authority or region: "),R=k(H),D=O(),B=C("p"),Y=k("Capital scheme ID: "),oe=k(re),me=O(),Le=C("p"),Ne=k("Funding programme: "),Ae=k(se),Te=O(),fe&&fe.c(),Ie=O(),ke&&ke.c(),t.a=o,M.a=I,N.a=P,ye(e,"max-width","30vw"),ye(e,"max-height","500px"),ye(e,"overflow","auto")},m(ue,Fe){$(ue,e,Fe),w(e,n),t.m(r,n),w(n,o),w(n,u),w(n,i),w(e,a),_e&&_e.m(e,null),w(e,f),ve&&ve.m(e,null),w(e,c),he&&he.m(e,null),w(e,g),w(e,d),w(e,y),w(e,L),w(L,S),M.m(j,L),w(L,I),N.m(A,L),w(L,P),w(e,F),w(e,T),w(T,E),w(T,R),w(e,D),w(e,B),w(B,Y),w(B,oe),w(e,me),w(e,Le),w(Le,Ne),w(Le,Ae),w(e,Te),fe&&fe.m(e,null),w(e,Ie),ke&&ke.m(e,null)},p(ue,[Fe]){var Dn,jn,Rn,Bn;Fe&5&&r!==(r=it(ue[0].name,ue[2])+"")&&t.p(r),Fe&1&&s!==(s=ue[0].intervention_type+"")&&z(u,s),ue[0].length_meters?_e?_e.p(ue,Fe):(_e=il(ue),_e.c(),_e.m(e,f)):_e&&(_e.d(1),_e=null),ue[0].description?ve?ve.p(ue,Fe):(ve=al(ue),ve.c(),ve.m(e,c)):ve&&(ve.d(1),ve=null),ue[0].pipeline?he?he.p(ue,Fe):(he=fl(ue),he.c(),he.m(e,g)):he&&(he.d(1),he=null),Fe&10&&j!==(j=it(ue[1].scheme_name??"",ue[3])+"")&&M.p(j),Fe&9&&A!==(A=it(ue[0].scheme_reference,ue[3])+"")&&N.p(A),Fe&2&&H!==(H=((Dn=ue[1].browse)==null?void 0:Dn.authority_or_region)+"")&&z(R,H),Fe&2&&re!==(re=((jn=ue[1].browse)==null?void 0:jn.capital_scheme_id)+"")&&z(oe,re),Fe&2&&se!==(se=((Rn=ue[1].browse)==null?void 0:Rn.funding_programme)+"")&&z(Ae,se),(Bn=ue[1].browse)!=null&&Bn.current_milestone?fe?fe.p(ue,Fe):(fe=ul(ue),fe.c(),fe.m(e,Ie)):fe&&(fe.d(1),fe=null),ue[1].pipeline?ke?ke.p(ue,Fe):(ke=cl(ue),ke.c(),ke.m(e,null)):ke&&(ke.d(1),ke=null)},i:ne,o:ne,d(ue){ue&&p(e),_e&&_e.d(),ve&&ve.d(),he&&he.d(),fe&&fe.d(),ke&&ke.d()}}}function it(l,e){return e?l.replace(new RegExp(e,"gi"),n=>`<mark>${n}</mark>`):l}function Um(l,e,n){let t,r,o,s;Se(l,sn,i=>n(4,r=i)),Se(l,yt,i=>n(2,o=i)),Se(l,St,i=>n(3,s=i));let{props:u}=e;return l.$$set=i=>{"props"in i&&n(0,u=i.props)},l.$$.update=()=>{l.$$.dirty&17&&n(1,t=r.get(u.scheme_reference))},[u,t,o,s,r]}class Nn extends K{constructor(e){super(),Q(this,e,Um,Gm,X,{props:0})}}function Wm(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Vm(l){let e,n;return e=new Nn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Xm(l){let e,n,t,r;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Wm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Vm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Jm(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Ym(l){let e,n;return e=new Nn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function Km(l){let e,n,t,r;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Jm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Ym,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function Qm(l){let e,n=l[6].name+"",t;return{c(){e=C("p"),t=k(n)},m(r,o){$(r,e,o),w(e,t)},p(r,o){o&64&&n!==(n=r[6].name+"")&&z(t,n)},d(r){r&&p(e)}}}function Zm(l){let e,n;return e=new Nn({props:{props:l[6]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.props=t[6]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function xm(l){let e,n,t,r;return e=new ae({props:{popupClass:"border-popup",$$slots:{default:[Qm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),t=new ae({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Zm,({props:o})=>({6:o}),({props:o})=>o?64:0]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(o,s){b(e,o,s),$(o,n,s),b(t,o,s),r=!0},p(o,s){const u={};s&192&&(u.$$scope={dirty:s,ctx:o}),e.$set(u);const i={};s&192&&(i.$$scope={dirty:s,ctx:o}),t.$set(i)},i(o){r||(m(e.$$.fragment,o),m(t.$$.fragment,o),r=!0)},o(o){_(e.$$.fragment,o),_(t.$$.fragment,o),r=!1},d(o){o&&p(n),v(e,o),v(t,o)}}}function e_(l){let e,n,t,r,o,s,u,i,a,f;const c=[q("interventions-points"),{filter:["all",Hn,l[3],l[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":l[2],"circle-radius":Wn,"circle-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let g={$$slots:{default:[Xm]},$$scope:{ctx:l}};for(let A=0;A<c.length;A+=1)g=ee(g,c[A]);e=new ct({props:g});const d=[q("interventions-lines"),{filter:["all",Gn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":l[2],"line-width":kt,"line-opacity":Z(1,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let y={$$slots:{default:[Km]},$$scope:{ctx:l}};for(let A=0;A<d.length;A+=1)y=ee(y,d[A]);t=new Ce({props:y});const L=[q("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*kt,"circle-opacity":0,"circle-stroke-color":ot.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:l[0]?"visible":"none"}}];let S={};for(let A=0;A<L.length;A+=1)S=ee(S,L[A]);o=new ct({props:S});const M=[q("interventions-polygons"),{filter:["all",tn,l[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":l[2],"fill-opacity":Z(.2,.5)}},{layout:{visibility:l[0]?"visible":"none"}},{hoverCursor:"pointer"}];let j={$$slots:{default:[xm]},$$scope:{ctx:l}};for(let A=0;A<M.length;A+=1)j=ee(j,M[A]);u=new He({props:j});const I=[q("interventions-polygons-outlines"),{filter:["all",tn,l[3]]},{paint:{"line-color":l[2],"line-opacity":.5,"line-width":.7*kt}},{layout:{visibility:l[0]?"visible":"none"}}];let N={};for(let A=0;A<I.length;A+=1)N=ee(N,I[A]);return a=new Ce({props:N}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),h(o.$$.fragment),s=O(),h(u.$$.fragment),i=O(),h(a.$$.fragment)},m(A,P){b(e,A,P),$(A,n,P),b(t,A,P),$(A,r,P),b(o,A,P),$(A,s,P),b(u,A,P),$(A,i,P),b(a,A,P),f=!0},p(A,P){const F=P&29?te(c,[c[0],P&24&&{filter:["all",Hn,A[3],A[4]]},c[2],c[3],P&4&&{paint:{"circle-color":A[2],"circle-radius":Wn,"circle-opacity":Z(1,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}},c[6]]):{};P&128&&(F.$$scope={dirty:P,ctx:A}),e.$set(F);const T=P&13?te(d,[d[0],P&8&&{filter:["all",Gn,A[3]]},d[2],d[3],P&4&&{paint:{"line-color":A[2],"line-width":kt,"line-opacity":Z(1,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}},d[6]]):{};P&128&&(T.$$scope={dirty:P,ctx:A}),t.$set(T);const E=P&1?te(L,[L[0],L[1],L[2],{layout:{visibility:A[0]?"visible":"none"}}]):{};o.$set(E);const H=P&13?te(M,[M[0],P&8&&{filter:["all",tn,A[3]]},M[2],M[3],P&4&&{paint:{"fill-color":A[2],"fill-opacity":Z(.2,.5)}},P&1&&{layout:{visibility:A[0]?"visible":"none"}},M[6]]):{};P&128&&(H.$$scope={dirty:P,ctx:A}),u.$set(H);const R=P&13?te(I,[I[0],P&8&&{filter:["all",tn,A[3]]},P&4&&{paint:{"line-color":A[2],"line-opacity":.5,"line-width":.7*kt}},P&1&&{layout:{visibility:A[0]?"visible":"none"}}]):{};a.$set(R)},i(A){f||(m(e.$$.fragment,A),m(t.$$.fragment,A),m(o.$$.fragment,A),m(u.$$.fragment,A),m(a.$$.fragment,A),f=!0)},o(A){_(e.$$.fragment,A),_(t.$$.fragment,A),_(o.$$.fragment,A),_(u.$$.fragment,A),_(a.$$.fragment,A),f=!1},d(A){A&&(p(n),p(r),p(s),p(i)),v(e,A),v(t,A),v(o,A),v(u,A),v(a,A)}}}function t_(l){let e,n;return e=new wt({props:{data:l[1],$$slots:{default:[e_]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&2&&(o.data=t[1]),r&129&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function n_(l,e,n){let t,r;Se(l,vt,a=>n(5,r=a));let{showSchemes:o}=e,[s]=Tn();const u=["!=",["get","hide_while_editing"],!0],i=["!=",["get","endpoint"],!0];return l.$$set=a=>{"showSchemes"in a&&n(0,o=a.showSchemes)},l.$$.update=()=>{l.$$.dirty&32&&n(1,t=to(r))},[o,t,s,u,i,r]}class r_ extends K{constructor(e){super(),Q(this,e,n_,t_,X,{showSchemes:0})}}function $l(l,e,n){const t=l.slice();return t[13]=e[n],t}function pl(l,e,n){const t=l.slice();return t[16]=e[n],t}function l_(l){let e,n;return e=new Em({props:{loadFile:l[7]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p:ne,i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function ml(l){let e,n,t,r,o;e=new bt({props:{$$slots:{default:[o_]},$$scope:{ctx:l}}}),e.$on("click",l[8]);function s(i){l[9](i)}let u={title:"About this scheme data",$$slots:{default:[s_]},$$scope:{ctx:l}};return l[3]!==void 0&&(u.open=l[3]),t=new bl({props:u}),U.push(()=>W(t,"open",s)),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment)},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),o=!0},p(i,a){const f={};a&524288&&(f.$$scope={dirty:a,ctx:i}),e.$set(f);const c={};a&524304&&(c.$$scope={dirty:a,ctx:i}),!r&&a&8&&(r=!0,c.open=i[3],V(()=>r=!1)),t.$set(c)},i(i){o||(m(e.$$.fragment,i),m(t.$$.fragment,i),o=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),o=!1},d(i){i&&p(n),v(e,i),v(t,i)}}}function o_(l){let e;return{c(){e=k("About the scheme data")},m(n,t){$(n,e,t)},d(n){n&&p(e)}}}function _l(l){let e,n,t=l[16]+"",r;return{c(){e=C("li"),n=C("p"),r=k(t)},m(o,s){$(o,e,s),w(e,n),w(n,r)},p(o,s){s&16&&t!==(t=o[16]+"")&&z(r,t)},d(o){o&&p(e)}}}function s_(l){let e,n,t,r,o=ze(l[4].notes),s=[];for(let u=0;u<o.length;u+=1)s[u]=_l(pl(l,o,u));return{c(){e=C("div"),n=C("p"),n.textContent="Please note there are data quality caveats for all scheme data:",t=O(),r=C("ul");for(let u=0;u<s.length;u+=1)s[u].c();G(e,"class","govuk-prose")},m(u,i){$(u,e,i),w(e,n),w(e,t),w(e,r);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(r,null)},p(u,i){if(i&16){o=ze(u[4].notes);let a;for(a=0;a<o.length;a+=1){const f=pl(u,o,a);s[a]?s[a].p(f,i):(s[a]=_l(f),s[a].c(),s[a].m(r,null))}for(;a<s.length;a+=1)s[a].d(1);s.length=o.length}},d(u){u&&p(e),ht(s,u)}}}function gl(l){let e,n,t,r;function o(i){l[10](i)}function s(i){l[11](i)}let u={};return l[1]!==void 0&&(u.schemesToBeShown=l[1]),l[2]!==void 0&&(u.show=l[2]),e=new Qi({props:u}),U.push(()=>W(e,"schemesToBeShown",o)),U.push(()=>W(e,"show",s)),{c(){h(e.$$.fragment)},m(i,a){b(e,i,a),r=!0},p(i,a){const f={};!n&&a&2&&(n=!0,f.schemesToBeShown=i[1],V(()=>n=!1)),!t&&a&4&&(t=!0,f.show=i[2],V(()=>t=!1)),e.$set(f)},i(i){r||(m(e.$$.fragment,i),r=!0)},o(i){_(e.$$.fragment,i),r=!1},d(i){v(e,i)}}}function dl(l){let e,n;return e=new Hm({props:{scheme:l[13]}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,r){const o={};r&64&&(o.scheme=t[13]),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function hl(l){let e=l[1].has(l[13].scheme_reference),n,t,r=e&&dl(l);return{c(){r&&r.c(),n=qe()},m(o,s){r&&r.m(o,s),$(o,n,s),t=!0},p(o,s){s&66&&(e=o[1].has(o[13].scheme_reference)),e?r?(r.p(o,s),s&66&&m(r,1)):(r=dl(o),r.c(),m(r,1),r.m(n.parentNode,n)):r&&($e(),_(r,1,1,()=>{r=null}),pe())},i(o){t||(m(r),t=!0)},o(o){_(r),t=!1},d(o){o&&p(n),r&&r.d(o)}}}function i_(l){let e,n,t,r,o,s,u,i,a,f,c=hn()=="Private (development)",g,d,y,L,S,M,j,I,N;o=new co({props:{boundaryGeojson:l[4]}}),a=new no({});let A=c&&l_(l),P=l[4].notes&&ml(l);y=new fo({props:{label:"Load schemes from GeoJSON",loadFile:l[7]}}),S=new Ol({props:{errorMessage:l[0]}});let F=l[6].size>0&&gl(l),T=ze(l[6].values()),E=[];for(let R=0;R<T.length;R+=1)E[R]=hl($l(l,T,R));const H=R=>_(E[R],1,1,()=>{E[R]=null});return{c(){e=C("div"),n=C("div"),t=C("h1"),t.textContent="Browse schemes",r=O(),h(o.$$.fragment),s=O(),u=C("p"),u.textContent=`App version: ${hn()}`,i=O(),h(a.$$.fragment),f=O(),A&&A.c(),g=O(),P&&P.c(),d=O(),h(y.$$.fragment),L=O(),h(S.$$.fragment),M=O(),F&&F.c(),j=O(),I=C("ul");for(let R=0;R<E.length;R+=1)E[R].c();ye(n,"display","flex"),ye(n,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(R,D){$(R,e,D),w(e,n),w(n,t),w(n,r),b(o,n,null),w(e,s),w(e,u),w(e,i),b(a,e,null),w(e,f),A&&A.m(e,null),w(e,g),P&&P.m(e,null),w(e,d),b(y,e,null),w(e,L),b(S,e,null),w(e,M),F&&F.m(e,null),w(e,j),w(e,I);for(let B=0;B<E.length;B+=1)E[B]&&E[B].m(I,null);N=!0},p(R,D){const B={};D&16&&(B.boundaryGeojson=R[4]),o.$set(B),c&&A.p(R,D),R[4].notes?P?(P.p(R,D),D&16&&m(P,1)):(P=ml(R),P.c(),m(P,1),P.m(e,d)):P&&($e(),_(P,1,1,()=>{P=null}),pe());const Y={};if(D&1&&(Y.errorMessage=R[0]),S.$set(Y),R[6].size>0?F?(F.p(R,D),D&64&&m(F,1)):(F=gl(R),F.c(),m(F,1),F.m(e,j)):F&&($e(),_(F,1,1,()=>{F=null}),pe()),D&66){T=ze(R[6].values());let re;for(re=0;re<T.length;re+=1){const oe=$l(R,T,re);E[re]?(E[re].p(oe,D),m(E[re],1)):(E[re]=hl(oe),E[re].c(),m(E[re],1),E[re].m(I,null))}for($e(),re=T.length;re<E.length;re+=1)H(re);pe()}},i(R){if(!N){m(o.$$.fragment,R),m(a.$$.fragment,R),m(A),m(P),m(y.$$.fragment,R),m(S.$$.fragment,R),m(F);for(let D=0;D<T.length;D+=1)m(E[D]);N=!0}},o(R){_(o.$$.fragment,R),_(a.$$.fragment,R),_(A),_(P),_(y.$$.fragment,R),_(S.$$.fragment,R),_(F),E=E.filter(Boolean);for(let D=0;D<E.length;D+=1)_(E[D]);N=!1},d(R){R&&p(e),v(o),v(a),A&&A.d(),P&&P.d(),v(y),v(S),F&&F.d(),ht(E,R)}}}function a_(l){let e,n,t,r,o,s,u;return e=new ao({}),t=new r_({props:{showSchemes:l[2]}}),s=new Pm({}),{c(){h(e.$$.fragment),n=O(),h(t.$$.fragment),r=O(),o=C("div"),h(s.$$.fragment),G(o,"class","top-right svelte-u44ed2")},m(i,a){b(e,i,a),$(i,n,a),b(t,i,a),$(i,r,a),$(i,o,a),b(s,o,null),u=!0},p(i,a){const f={};a&4&&(f.showSchemes=i[2]),t.$set(f)},i(i){u||(m(e.$$.fragment,i),m(t.$$.fragment,i),m(s.$$.fragment,i),u=!0)},o(i){_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),u=!1},d(i){i&&(p(n),p(r),p(o)),v(e,i),v(t,i),v(s)}}}function f_(l){let e,n,t;return n=new ro({props:{style:l[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[a_]},$$scope:{ctx:l}}}),{c(){e=C("div"),h(n.$$.fragment),G(e,"slot","main")},m(r,o){$(r,e,o),b(n,e,null),t=!0},p(r,o){const s={};o&32&&(s.style=r[5]),o&524292&&(s.$$scope={dirty:o,ctx:r}),n.$set(s)},i(r){t||(m(n.$$.fragment,r),t=!0)},o(r){_(n.$$.fragment,r),t=!1},d(r){r&&p(e),v(n)}}}function u_(l){let e,n;return e=new po({props:{$$slots:{main:[f_],sidebar:[i_]},$$scope:{ctx:l}}}),{c(){h(e.$$.fragment)},m(t,r){b(e,t,r),n=!0},p(t,[r]){const o={};r&524415&&(o.$$scope={dirty:r,ctx:t}),e.$set(o)},i(t){n||(m(e.$$.fragment,t),n=!0)},o(t){_(e.$$.fragment,t),n=!1},d(t){v(e,t)}}}function c_(l,e,n){let t,r,o;Se(l,vt,S=>n(4,t=S)),Se(l,Un,S=>n(5,r=S)),Se(l,sn,S=>n(6,o=S)),In(()=>{lo()});const s=new URLSearchParams(window.location.search);Un.set(s.get("style")||"dataviz");let u="",i=new Set,a=!0,f=!1;function c(S){try{vt.set(JSON.parse(S)),sn.set(Mi(t)),n(0,u="")}catch(M){n(0,u=`The file you loaded is broken: ${M}`)}}const g=()=>n(3,f=!0);function d(S){f=S,n(3,f)}function y(S){i=S,n(1,i)}function L(S){a=S,n(2,a)}return[u,i,a,f,t,r,o,c,g,d,y,L]}class $_ extends K{constructor(e){super(),Q(this,e,c_,u_,X,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new $_({target:document.getElementById("app")});
