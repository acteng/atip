var Ae=Object.defineProperty;var Re=(h,w,p)=>w in h?Ae(h,w,{enumerable:!0,configurable:!0,writable:!0,value:p}):h[w]=p;var ne=(h,w,p)=>(Re(h,typeof w!="symbol"?w+"":w,p),p);(function(){"use strict";/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const h=Symbol("Comlink.proxy"),w=Symbol("Comlink.endpoint"),p=Symbol("Comlink.releaseProxy"),B=Symbol("Comlink.finalizer"),F=Symbol("Comlink.thrown"),G=e=>typeof e=="object"&&e!==null||typeof e=="function",te={canHandle:e=>G(e)&&e[h],serialize(e){const{port1:n,port2:t}=new MessageChannel;return v(e,n),[t,[t]]},deserialize(e){return e.start(),se(e)}},re={canHandle:e=>G(e)&&F in e,serialize({value:e}){let n;return e instanceof Error?n={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:n={isError:!1,value:e},[n,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},Y=new Map([["proxy",te],["throw",re]]);function oe(e,n){for(const t of e)if(n===t||t==="*"||t instanceof RegExp&&t.test(n))return!0;return!1}function v(e,n=globalThis,t=["*"]){n.addEventListener("message",function r(o){if(!o||!o.data)return;if(!oe(t,o.origin)){console.warn(`Invalid origin '${o.origin}' for comlink proxy`);return}const{id:a,type:s,path:u}=Object.assign({path:[]},o.data),f=(o.data.argumentList||[]).map(E);let l;try{const _=u.slice(0,-1).reduce((d,j)=>d[j],e),m=u.reduce((d,j)=>d[j],e);switch(s){case"GET":l=m;break;case"SET":_[u.slice(-1)[0]]=E(o.data.value),l=!0;break;case"APPLY":l=m.apply(_,f);break;case"CONSTRUCT":{const d=new m(...f);l=_e(d)}break;case"ENDPOINT":{const{port1:d,port2:j}=new MessageChannel;v(e,j),l=fe(d,[d])}break;case"RELEASE":l=void 0;break;default:return}}catch(_){l={value:_,[F]:0}}Promise.resolve(l).catch(_=>({value:_,[F]:0})).then(_=>{const[m,d]=W(_);n.postMessage(Object.assign(Object.assign({},m),{id:a}),d),s==="RELEASE"&&(n.removeEventListener("message",r),J(n),B in e&&typeof e[B]=="function"&&e[B]())}).catch(_=>{const[m,d]=W({value:new TypeError("Unserializable return value"),[F]:0});n.postMessage(Object.assign(Object.assign({},m),{id:a}),d)})}),n.start&&n.start()}function ie(e){return e.constructor.name==="MessagePort"}function J(e){ie(e)&&e.close()}function se(e,n){return D(e,[],n)}function P(e){if(e)throw new Error("Proxy has been released and is not useable")}function X(e){return R(e,{type:"RELEASE"}).then(()=>{J(e)})}const C=new WeakMap,N="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const n=(C.get(e)||0)-1;C.set(e,n),n===0&&X(e)});function ce(e,n){const t=(C.get(n)||0)+1;C.set(n,t),N&&N.register(e,n,e)}function ae(e){N&&N.unregister(e)}function D(e,n=[],t=function(){}){let r=!1;const o=new Proxy(t,{get(a,s){if(P(r),s===p)return()=>{ae(o),X(e),r=!0};if(s==="then"){if(n.length===0)return{then:()=>o};const u=R(e,{type:"GET",path:n.map(f=>f.toString())}).then(E);return u.then.bind(u)}return D(e,[...n,s])},set(a,s,u){P(r);const[f,l]=W(u);return R(e,{type:"SET",path:[...n,s].map(_=>_.toString()),value:f},l).then(E)},apply(a,s,u){P(r);const f=n[n.length-1];if(f===w)return R(e,{type:"ENDPOINT"}).then(E);if(f==="bind")return D(e,n.slice(0,-1));const[l,_]=K(u);return R(e,{type:"APPLY",path:n.map(m=>m.toString()),argumentList:l},_).then(E)},construct(a,s){P(r);const[u,f]=K(s);return R(e,{type:"CONSTRUCT",path:n.map(l=>l.toString()),argumentList:u},f).then(E)}});return ce(o,e),o}function ue(e){return Array.prototype.concat.apply([],e)}function K(e){const n=e.map(W);return[n.map(t=>t[0]),ue(n.map(t=>t[1]))]}const Q=new WeakMap;function fe(e,n){return Q.set(e,n),e}function _e(e){return Object.assign(e,{[h]:!0})}function W(e){for(const[n,t]of Y)if(t.canHandle(e)){const[r,o]=t.serialize(e);return[{type:"HANDLER",name:n,value:r},o]}return[{type:"RAW",value:e},Q.get(e)||[]]}function E(e){switch(e.type){case"HANDLER":return Y.get(e.name).deserialize(e.value);case"RAW":return e.value}}function R(e,n,t){return new Promise(r=>{const o=le();e.addEventListener("message",function a(s){!s.data||!s.data.id||s.data.id!==o||(e.removeEventListener("message",a),r(s.data))}),e.start&&e.start(),e.postMessage(Object.assign({id:o},n),t)})}function le(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}let c;const y=new Array(128).fill(void 0);y.push(void 0,null,!0,!1);function i(e){return y[e]}let A=0,x=null;function k(){return(x===null||x.byteLength===0)&&(x=new Uint8Array(c.memory.buffer)),x}const U=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},ge=typeof U.encodeInto=="function"?function(e,n){return U.encodeInto(e,n)}:function(e,n){const t=U.encode(e);return n.set(t),{read:e.length,written:t.length}};function $(e,n,t){if(t===void 0){const u=U.encode(e),f=n(u.length)>>>0;return k().subarray(f,f+u.length).set(u),A=u.length,f}let r=e.length,o=n(r)>>>0;const a=k();let s=0;for(;s<r;s++){const u=e.charCodeAt(s);if(u>127)break;a[o+s]=u}if(s!==r){s!==0&&(e=e.slice(s)),o=t(o,r,r=s+e.length*3)>>>0;const u=k().subarray(o+s,o+r),f=ge(e,u);s+=f.written}return A=s,o}function M(e){return e==null}let T=null;function b(){return(T===null||T.byteLength===0)&&(T=new Int32Array(c.memory.buffer)),T}let O=y.length;function be(e){e<132||(y[e]=O,O=e)}function z(e){const n=i(e);return be(e),n}function g(e){O===y.length&&y.push(y.length+1);const n=O;return O=y[n],y[n]=e,n}let I=null;function de(){return(I===null||I.byteLength===0)&&(I=new Float64Array(c.memory.buffer)),I}const Z=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Z.decode();function S(e,n){return e=e>>>0,Z.decode(k().subarray(e,e+n))}let L=null;function we(){return(L===null||L.byteLength===0)&&(L=new BigInt64Array(c.memory.buffer)),L}function H(e){const n=typeof e;if(n=="number"||n=="boolean"||e==null)return`${e}`;if(n=="string")return`"${e}"`;if(n=="symbol"){const o=e.description;return o==null?"Symbol":`Symbol(${o})`}if(n=="function"){const o=e.name;return typeof o=="string"&&o.length>0?`Function(${o})`:"Function"}if(Array.isArray(e)){const o=e.length;let a="[";o>0&&(a+=H(e[0]));for(let s=1;s<o;s++)a+=", "+H(e[s]);return a+="]",a}const t=/\[object ([^\]]+)\]/.exec(toString.call(e));let r;if(t.length>1)r=t[1];else return toString.call(e);if(r=="Object")try{return"Object("+JSON.stringify(e)+")"}catch{return"Object"}return e instanceof Error?`${e.name}: ${e.message}
${e.stack}`:r}function ye(e,n){const t=n(e.length*1)>>>0;return k().set(e,t/1),A=e.length,t}function V(e,n){try{return e.apply(this,n)}catch(t){c.__wbindgen_exn_store(g(t))}}let q=class{static __wrap(n){n=n>>>0;const t=Object.create(q.prototype);return t.__wbg_ptr=n,t}__destroy_into_raw(){const n=this.__wbg_ptr;return this.__wbg_ptr=0,n}free(){const n=this.__destroy_into_raw();c.__wbg_routeinfo_free(n)}constructor(n){try{const a=c.__wbindgen_add_to_stack_pointer(-16),s=ye(n,c.__wbindgen_malloc),u=A;c.routeinfo_new(a,s,u);var t=b()[a/4+0],r=b()[a/4+1],o=b()[a/4+2];if(o)throw z(r);return q.__wrap(t)}finally{c.__wbindgen_add_to_stack_pointer(16)}}nameForRoute(n){let t,r;try{const _=c.__wbindgen_add_to_stack_pointer(-16);c.routeinfo_nameForRoute(_,this.__wbg_ptr,g(n));var o=b()[_/4+0],a=b()[_/4+1],s=b()[_/4+2],u=b()[_/4+3],f=o,l=a;if(u)throw f=0,l=0,z(s);return t=f,r=l,S(f,l)}finally{c.__wbindgen_add_to_stack_pointer(16),c.__wbindgen_free(t,r)}}speedLimitForRoute(n){let t,r;try{const _=c.__wbindgen_add_to_stack_pointer(-16);c.routeinfo_speedLimitForRoute(_,this.__wbg_ptr,g(n));var o=b()[_/4+0],a=b()[_/4+1],s=b()[_/4+2],u=b()[_/4+3],f=o,l=a;if(u)throw f=0,l=0,z(s);return t=f,r=l,S(f,l)}finally{c.__wbindgen_add_to_stack_pointer(16),c.__wbindgen_free(t,r)}}};async function me(e,n){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,n)}catch(r){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",r);else throw r}const t=await e.arrayBuffer();return await WebAssembly.instantiate(t,n)}else{const t=await WebAssembly.instantiate(e,n);return t instanceof WebAssembly.Instance?{instance:t,module:e}:t}}function he(){const e={};return e.wbg={},e.wbg.__wbindgen_string_get=function(n,t){const r=i(t),o=typeof r=="string"?r:void 0;var a=M(o)?0:$(o,c.__wbindgen_malloc,c.__wbindgen_realloc),s=A;b()[n/4+1]=s,b()[n/4+0]=a},e.wbg.__wbindgen_object_drop_ref=function(n){z(n)},e.wbg.__wbindgen_boolean_get=function(n){const t=i(n);return typeof t=="boolean"?t?1:0:2},e.wbg.__wbindgen_is_bigint=function(n){return typeof i(n)=="bigint"},e.wbg.__wbindgen_bigint_from_i64=function(n){return g(n)},e.wbg.__wbindgen_jsval_eq=function(n,t){return i(n)===i(t)},e.wbg.__wbindgen_number_get=function(n,t){const r=i(t),o=typeof r=="number"?r:void 0;de()[n/8+1]=M(o)?0:o,b()[n/4+0]=!M(o)},e.wbg.__wbindgen_is_object=function(n){const t=i(n);return typeof t=="object"&&t!==null},e.wbg.__wbindgen_in=function(n,t){return i(n)in i(t)},e.wbg.__wbindgen_bigint_from_u64=function(n){const t=BigInt.asUintN(64,n);return g(t)},e.wbg.__wbindgen_is_undefined=function(n){return i(n)===void 0},e.wbg.__wbindgen_error_new=function(n,t){const r=new Error(S(n,t));return g(r)},e.wbg.__wbindgen_string_new=function(n,t){const r=S(n,t);return g(r)},e.wbg.__wbindgen_jsval_loose_eq=function(n,t){return i(n)==i(t)},e.wbg.__wbindgen_object_clone_ref=function(n){const t=i(n);return g(t)},e.wbg.__wbg_getwithrefkey_5e6d9547403deab8=function(n,t){const r=i(n)[i(t)];return g(r)},e.wbg.__wbg_new_abda76e883ba8a5f=function(){const n=new Error;return g(n)},e.wbg.__wbg_stack_658279fe44541cf6=function(n,t){const r=i(t).stack,o=$(r,c.__wbindgen_malloc,c.__wbindgen_realloc),a=A;b()[n/4+1]=a,b()[n/4+0]=o},e.wbg.__wbg_error_f851667af71bcfc6=function(n,t){let r,o;try{r=n,o=t,console.error(S(n,t))}finally{c.__wbindgen_free(r,o)}},e.wbg.__wbg_debug_917e579618ee56f5=function(n){console.debug(i(n))},e.wbg.__wbg_error_ea7597dedb63d9a4=function(n){console.error(i(n))},e.wbg.__wbg_info_fc2a17f38101c41c=function(n){console.info(i(n))},e.wbg.__wbg_log_003c998d6df63565=function(n){console.log(i(n))},e.wbg.__wbg_warn_ebfcadd0780df93a=function(n){console.warn(i(n))},e.wbg.__wbg_get_e52aaca45f37b337=function(n,t){const r=i(n)[t>>>0];return g(r)},e.wbg.__wbg_length_070e3265c186df02=function(n){return i(n).length},e.wbg.__wbindgen_is_function=function(n){return typeof i(n)=="function"},e.wbg.__wbg_next_3975dcca26737a22=function(n){const t=i(n).next;return g(t)},e.wbg.__wbg_next_5a9700550e162aa3=function(){return V(function(n){const t=i(n).next();return g(t)},arguments)},e.wbg.__wbg_done_a184612220756243=function(n){return i(n).done},e.wbg.__wbg_value_6cc144c1d9645dd5=function(n){const t=i(n).value;return g(t)},e.wbg.__wbg_iterator_c1677479667ea090=function(){return g(Symbol.iterator)},e.wbg.__wbg_get_363c3b466fe4896b=function(){return V(function(n,t){const r=Reflect.get(i(n),i(t));return g(r)},arguments)},e.wbg.__wbg_call_f96b398515635514=function(){return V(function(n,t){const r=i(n).call(i(t));return g(r)},arguments)},e.wbg.__wbg_isArray_07d89ced8fb14171=function(n){return Array.isArray(i(n))},e.wbg.__wbg_instanceof_ArrayBuffer_de688b806c28ff28=function(n){let t;try{t=i(n)instanceof ArrayBuffer}catch{t=!1}return t},e.wbg.__wbg_isSafeInteger_fcdf4c4f25c86778=function(n){return Number.isSafeInteger(i(n))},e.wbg.__wbg_entries_c3e06bf0354f5d20=function(n){const t=Object.entries(i(n));return g(t)},e.wbg.__wbg_buffer_fcbfb6d88b2732e9=function(n){const t=i(n).buffer;return g(t)},e.wbg.__wbg_new_bc5d9aad3f9ac80e=function(n){const t=new Uint8Array(i(n));return g(t)},e.wbg.__wbg_set_4b3aa8445ac1e91c=function(n,t,r){i(n).set(i(t),r>>>0)},e.wbg.__wbg_length_d9c4ded7e708c6a1=function(n){return i(n).length},e.wbg.__wbg_instanceof_Uint8Array_4733577ba827276b=function(n){let t;try{t=i(n)instanceof Uint8Array}catch{t=!1}return t},e.wbg.__wbindgen_bigint_get_as_i64=function(n,t){const r=i(t),o=typeof r=="bigint"?r:void 0;we()[n/8+1]=M(o)?BigInt(0):o,b()[n/4+0]=!M(o)},e.wbg.__wbindgen_debug_string=function(n,t){const r=H(i(t)),o=$(r,c.__wbindgen_malloc,c.__wbindgen_realloc),a=A;b()[n/4+1]=a,b()[n/4+0]=o},e.wbg.__wbindgen_throw=function(n,t){throw new Error(S(n,t))},e.wbg.__wbindgen_memory=function(){const n=c.memory;return g(n)},e}function pe(e,n){return c=e.exports,ee.__wbindgen_wasm_module=n,L=null,I=null,T=null,x=null,c}async function ee(e){if(c!==void 0)return c;typeof e>"u"&&(e="/atip/speed_limit/assets/route_info_bg.wasm");const n=he();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:t,module:r}=await me(await e,n);return pe(t,r)}class Ee{constructor(){ne(this,"inner");this.inner=null}async loadFile(n){await ee(),console.log(`Grabbing A/B Street map model data from ${n}`);let r=await(await fetch(n)).arrayBuffer();this.inner=new q(new Uint8Array(r)),console.log("RouteInfo is ready!")}nameForRoute(n){if(!this.inner)throw new Error("Need to loadFile before using RouteInfo");return this.inner.nameForRoute(n)}speedLimitForRoute(n){if(!this.inner)throw new Error("Need to loadFile before using RouteInfo");return this.inner.speedLimitForRoute(n)}}v(Ee)})();
