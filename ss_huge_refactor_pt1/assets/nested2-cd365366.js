import{an as hs,aN as Xt,S as J,i as Z,s as V,aO as bs,b as U,c as W,h,m as b,n as Y,t as _,o as d,q as w,r as Q,aL as Ut,e as L,j as G,ar as _e,k as $,a6 as ne,p,aG as as,f as T,x as xe,N as ut,Q as ct,T as $t,U as pt,aP as hn,l as k,aa as Te,Z as ie,_ as ae,aq as lt,v,J as B,Y as Ce,$ as an,a0 as fs,a1 as fn,a2 as us,a3 as De,a4 as cs,a5 as $s,aQ as ws,X as ht,aR as bn,aS as ks,G as _t,aB as nn,O as le,H as be,a as Ee,aM as X,aT as wn,ae as vs,R as un,am as gt,u as cn,F as kn,w as Ke,aU as me,D as te,C as He,V as se,aV as oe,af as Jt,aF as ps,aK as Wt,aW as Yt,aX as ft,aY as ys,aZ as Ss,g as ln,a_ as Cs,B as Ls,L as Ts,d as Ms,E as Ns,M as Ps,y as Is}from"./index-8b819676.js";import{S as ot,e as vn,f as Xe,t as Os,d as qe,c as Rs,M as Ds,g as et,C as st,a as re,m as we,R as As,b as mt,B as Fs,h as qs,p as yn,i as zs,j as Sn,k as Cn,l as Ln,n as jt,o as Vt,Z as Bs,G as Hs}from"./ZoomOutMap-bff6ffab.js";import{P as fe}from"./Popup-ae1196e7.js";function js(r,e){let l=new Set(r.getStyle().layers.filter(t=>t.type=="line").map(t=>t.id));if(e=="dataviz")return["Road network","Path"].filter(t=>l.has(t));if(e=="hybrid")return["Path","Road","Tunnel"].filter(t=>l.has(t));if(e=="streets"){let t=[];for(let n of["road","bridge","tunnel"])for(let s of["link","minor","minor_construction","motorway","motorway_construction","motorway_link","path_pedestrian","secondary_tertiary","secondary_tertiary_construction","service_track","service_track_construction","street","trunk_primary","trunk_primary_construction","trunk_primary_link"])t.push(`${n}_${s}`);return t.filter(n=>l.has(n))}return e=="uk-openzoomstack-light"?r.getStyle().layers.filter(t=>t["source-layer"]=="roads"&&t.type=="line").map(t=>t.id):[]}function j(r){return{id:r,beforeId:Gs(r)}}function Gs(r){let e=hs(Xt);if(!e){console.warn(`getBeforeId(${r}) called before map is ready. Z-ordering may be incorrect.`);return}let l,t=!1;for(let n=Tn.length-1;n>=0;n--){let s=Tn[n];if(s==r){t=!0;break}e.getLayer(s)&&(l=s)}if(!t)throw new Error(`Layer ID ${r} not defined in layerZorder`);return l}let ee=r=>r,Le=r=>r,Es=r=>r,Us=r=>r,Ws=r=>r,Ys=r=>r,Vs=r=>r;const Tn=[Vs("raster-basemap"),ee("parliamentary_constituencies"),ee("parliamentary_constituencies-outline"),ee("wards"),ee("wards-outline"),ee("combined_authorities"),ee("combined_authorities-outline"),ee("local_authority_districts"),ee("local_authority_districts-outline"),ee("local_planning_authorities"),ee("local_planning_authorities-outline"),ee("census_output_areas"),ee("census_output_areas-outline"),ee("imd"),ee("imd-outline"),ee("pollution"),ee("road_noise"),ee("mrn"),ee("srn"),ee("bus_routes"),ee("trams"),ee("national_cycle_network"),ee("cycle_paths"),ee("pct_commute"),ee("pct_school"),ee("road_widths"),ee("road_speeds"),ee("pavement_widths"),ee("gradient"),ee("gradient_arrows"),ee("education"),ee("hospitals"),ee("sports_spaces"),ee("railway_stations"),ee("cycle_parking"),ee("crossings"),ee("vehicle_counts"),ee("stats19"),ee("bus_stops"),Le("interventions-coverage-polygons-outlines"),Le(ee("interventions-polygons")),Le(ee("interventions-polygons-outlines")),Le("hover-polygons"),Le("hover-lines"),Le(ee("interventions-lines")),Le(ee("interventions-lines-endpoints")),Le("hover-points"),Le(ee("interventions-points")),ee("problems"),Le("edit-polygon-fill"),Le("edit-polygon-lines"),Le("edit-polygon-vertices"),Le("draw-split-route"),Le("route-points"),Le("route-lines"),Le("route-polygons"),Es("road_label"),Ys(Us(Ws("Road labels"))),Le("boundary"),ee("measurement-line"),Le("georeferenced-image"),ee("cover-interactive-layers")];function Js(r){let e,l,t;function n(o){r[2](o)}let s={label:"Basemap",choices:bs(),disabled:r[0]};return r[1]!==void 0&&(s.value=r[1]),e=new ot({props:s}),U.push(()=>W(e,"value",n)),{c(){h(e.$$.fragment)},m(o,u){b(e,o,u),t=!0},p(o,[u]){const a={};u&1&&(a.disabled=o[0]),!l&&u&2&&(l=!0,a.value=o[1],Y(()=>l=!1)),e.$set(a)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function Zs(r,e,l){let t;Q(r,Ut,o=>l(1,t=o));let{disabled:n=!1}=e;function s(o){t=o,Ut.set(t)}return r.$$set=o=>{"disabled"in o&&l(0,n=o.disabled)},[n,t,s]}class Qs extends J{constructor(e){super(),Z(this,e,Zs,Js,V,{disabled:0})}}function Ks(r){let e;return{c(){e=L("span"),G(e,"class","svelte-kzgqtg"),_e(e,"background",r[0])},m(l,t){$(l,e,t)},p(l,[t]){t&1&&_e(e,"background",l[0])},i:ne,o:ne,d(l){l&&p(e)}}}function Xs(r,e,l){let{color:t}=e;return r.$$set=n=>{"color"in n&&l(0,t=n.color)},[t]}class Ae extends J{constructor(e){super(),Z(this,e,Xs,Ks,V,{color:0})}}const xs="/atip/ss_huge_refactor_pt1/assets/help-d011708a.svg";function er(r){let e,l;const t=r[1].default,n=ut(t,r,r[4],null);return{c(){e=L("div"),n&&n.c(),G(e,"class","govuk-prose")},m(s,o){$(s,e,o),n&&n.m(e,null),l=!0},p(s,o){n&&n.p&&(!l||o&16)&&ct(n,t,s,s[4],l?pt(t,s[4],o,null):$t(s[4]),null)},i(s){l||(_(n,s),l=!0)},o(s){d(n,s),l=!1},d(s){s&&p(e),n&&n.d(s)}}}function tr(r){let e,l,t,n,s,o,u;function a(f){r[3](f)}let i={title:"Help",$$slots:{default:[er]},$$scope:{ctx:r}};return r[0]!==void 0&&(i.open=r[0]),t=new as({props:i}),U.push(()=>W(t,"open",a)),{c(){e=L("button"),e.innerHTML=`<img src="${xs}" title="Help" alt="Help"/>`,l=T(),h(t.$$.fragment),G(e,"class","svelte-7d9d1l")},m(f,c){$(f,e,c),$(f,l,c),b(t,f,c),s=!0,o||(u=xe(e,"click",r[2]),o=!0)},p(f,[c]){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),!n&&c&1&&(n=!0,m.open=f[0],Y(()=>n=!1)),t.$set(m)},i(f){s||(_(t.$$.fragment,f),s=!0)},o(f){d(t.$$.fragment,f),s=!1},d(f){f&&(p(e),p(l)),w(t,f),o=!1,u()}}}function nr(r,e,l){let{$$slots:t={},$$scope:n}=e,s=!1;const o=()=>l(0,s=!0);function u(a){s=a,l(0,s)}return r.$$set=a=>{"$$scope"in a&&l(4,n=a.$$scope)},[s,t,o,u,n]}class $e extends J{constructor(e){super(),Z(this,e,nr,tr,V,{})}}const lr=r=>({}),Mn=r=>({}),sr=r=>({}),Nn=r=>({});function rr(r){let e,l,t,n,s,o,u,a,i,f,c;const m=r[4].sidebar,g=ut(m,r,r[3],Nn),C=r[4].main,S=ut(C,r,r[3],Mn);return{c(){e=L("div"),l=L("aside"),t=L("div"),g&&g.c(),n=T(),s=L("button"),s.textContent="→",u=T(),a=L("main"),S&&S.c(),G(t,"class","sidebar-content content-container svelte-1n0etgd"),G(s,"type","button"),G(s,"class","sidebar-toggle rounded-rect svelte-1n0etgd"),G(l,"class",o=hn(r[1]?"":"collapsed")+" svelte-1n0etgd"),_e(l,"--sidebarWidth",r[0]),G(a,"class","svelte-1n0etgd"),G(e,"class","overall-layout svelte-1n0etgd")},m(y,M){$(y,e,M),k(e,l),k(l,t),g&&g.m(t,null),k(l,n),k(l,s),k(e,u),k(e,a),S&&S.m(a,null),i=!0,f||(c=xe(s,"click",r[2]),f=!0)},p(y,[M]){g&&g.p&&(!i||M&8)&&ct(g,m,y,y[3],i?pt(m,y[3],M,sr):$t(y[3]),Nn),(!i||M&2&&o!==(o=hn(y[1]?"":"collapsed")+" svelte-1n0etgd"))&&G(l,"class",o),(!i||M&1)&&_e(l,"--sidebarWidth",y[0]),S&&S.p&&(!i||M&8)&&ct(S,C,y,y[3],i?pt(C,y[3],M,lr):$t(y[3]),Mn)},i(y){i||(_(g,y),_(S,y),i=!0)},o(y){d(g,y),d(S,y),i=!1},d(y){y&&p(e),g&&g.d(y),S&&S.d(y),f=!1,c()}}}function or(r,e,l){let{$$slots:t={},$$scope:n}=e,{sidebarWidth:s="25rem"}=e,o=!0;function u(){l(1,o=!o)}return r.$$set=a=>{"sidebarWidth"in a&&l(0,s=a.sidebarWidth),"$$scope"in a&&l(3,n=a.$$scope)},[s,o,u,n,t]}class ir extends J{constructor(e){super(),Z(this,e,or,rr,V,{sidebarWidth:0})}}function Pn(r,e,l){const t=r.slice();return t[1]=e[l][0],t[2]=e[l][1],t}function In(r){let e,l,t,n=r[1]+"",s,o,u;return l=new Ae({props:{color:r[2]}}),{c(){e=L("li"),h(l.$$.fragment),t=T(),s=v(n),o=T()},m(a,i){$(a,e,i),b(l,e,null),k(e,t),k(e,s),k(e,o),u=!0},p(a,i){const f={};i&1&&(f.color=a[2]),l.$set(f),(!u||i&1)&&n!==(n=a[1]+"")&&B(s,n)},i(a){u||(_(l.$$.fragment,a),u=!0)},o(a){d(l.$$.fragment,a),u=!1},d(a){a&&p(e),w(l)}}}function ar(r){let e,l,t=Te(r[0]),n=[];for(let o=0;o<t.length;o+=1)n[o]=In(Pn(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){e=L("ul");for(let o=0;o<n.length;o+=1)n[o].c()},m(o,u){$(o,e,u);for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(e,null);l=!0},p(o,[u]){if(u&1){t=Te(o[0]);let a;for(a=0;a<t.length;a+=1){const i=Pn(o,t,a);n[a]?(n[a].p(i,u),_(n[a],1)):(n[a]=In(i),n[a].c(),_(n[a],1),n[a].m(e,null))}for(ie(),a=t.length;a<n.length;a+=1)s(a);ae()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)_(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&p(e),lt(n,o)}}}function fr(r,e,l){let{rows:t}=e;return r.$$set=n=>{"rows"in n&&l(0,t=n.rows)},[t]}class xt extends J{constructor(e){super(),Z(this,e,fr,ar,V,{rows:0})}}function On(r){let e=r[0],l,t,n=Rn(r);return{c(){n.c(),l=Ce()},m(s,o){n.m(s,o),$(s,l,o),t=!0},p(s,o){o&1&&V(e,e=s[0])?(ie(),d(n,1,1,ne),ae(),n=Rn(s),n.c(),_(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(_(n),t=!0)},o(s){d(n),t=!1},d(s){s&&p(l),n.d(s)}}}function Rn(r){let e;const l=r[16].default,t=ut(l,r,r[15],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&32768)&&ct(t,l,n,n[15],e?pt(l,n[15],s,null):$t(n[15]),null)},i(n){e||(_(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function ur(r){let e,l,t=r[0]&&On(r);return{c(){t&&t.c(),e=Ce()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&_(t,1)):(t=On(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(ie(),d(t,1,1,()=>{t=null}),ae())},i(n){l||(_(t),l=!0)},o(n){d(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function cr(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=an("raster-source")}=e,{tiles:a}=e,{tileSize:i=void 0}=e,{bounds:f=null}=e,{scheme:c=null}=e,{attribution:m=null}=e,{minzoom:g=null}=e,{maxzoom:C=null}=e,{volatile:S=null}=e;const{map:y,self:M}=fs();Q(r,y,I=>l(14,n=I)),Q(r,M,I=>l(0,t=I));let O,A=!0;return fn(()=>{t&&O&&n&&(us(y,t,O),De(M,t=null,t),l(12,O=void 0))}),r.$$set=I=>{"id"in I&&l(3,u=I.id),"tiles"in I&&l(4,a=I.tiles),"tileSize"in I&&l(5,i=I.tileSize),"bounds"in I&&l(6,f=I.bounds),"scheme"in I&&l(7,c=I.scheme),"attribution"in I&&l(8,m=I.attribution),"minzoom"in I&&l(9,g=I.minzoom),"maxzoom"in I&&l(10,C=I.maxzoom),"volatile"in I&&l(11,S=I.volatile),"$$scope"in I&&l(15,o=I.$$scope)},r.$$.update=()=>{r.$$.dirty&24569&&n&&t!==u&&(De(M,t=u,t),cs(n,t,$s({type:"raster",tiles:a,tileSize:i,bounds:f,scheme:c,attribution:m,minzoom:g,maxzoom:C,volatile:S}),I=>n&&I===t,()=>{t&&(l(12,O=n==null?void 0:n.getSource(t)),l(13,A=!0))})),r.$$.dirty&16392&&(n==null||n.on("style.load",()=>{l(12,O=n==null?void 0:n.getSource(u))})),r.$$.dirty&12304&&O&&(A?l(13,A=!1):O.setTiles(a))},[t,y,M,u,a,i,f,c,m,g,C,S,O,A,n,o,s]}class $r extends J{constructor(e){super(),Z(this,e,cr,ur,V,{id:3,tiles:4,tileSize:5,bounds:6,scheme:7,attribution:8,minzoom:9,maxzoom:10,volatile:11})}}function pr(r){let e;const l=r[16].default,t=ut(l,r,r[24],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16777216)&&ct(t,l,n,n[24],e?pt(l,n[24],s,null):$t(n[24]),null)},i(n){e||(_(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function mr(r){let e,l,t;function n(o){r[17](o)}let s={id:r[1],type:"symbol",source:r[2],sourceLayer:r[3],beforeId:r[4],beforeLayerType:r[5],paint:r[6],layout:r[7],filter:r[8],applyToClusters:r[9],minzoom:r[10],maxzoom:r[11],hoverCursor:r[12],manageHoverState:r[13],eventsIfTopMost:r[14],interactive:r[15],$$slots:{default:[pr]},$$scope:{ctx:r}};return r[0]!==void 0&&(s.hovered=r[0]),e=new ws({props:s}),U.push(()=>W(e,"hovered",n)),e.$on("click",r[18]),e.$on("dblclick",r[19]),e.$on("contextmenu",r[20]),e.$on("mouseenter",r[21]),e.$on("mousemove",r[22]),e.$on("mouseleave",r[23]),{c(){h(e.$$.fragment)},m(o,u){b(e,o,u),t=!0},p(o,[u]){const a={};u&2&&(a.id=o[1]),u&4&&(a.source=o[2]),u&8&&(a.sourceLayer=o[3]),u&16&&(a.beforeId=o[4]),u&32&&(a.beforeLayerType=o[5]),u&64&&(a.paint=o[6]),u&128&&(a.layout=o[7]),u&256&&(a.filter=o[8]),u&512&&(a.applyToClusters=o[9]),u&1024&&(a.minzoom=o[10]),u&2048&&(a.maxzoom=o[11]),u&4096&&(a.hoverCursor=o[12]),u&8192&&(a.manageHoverState=o[13]),u&16384&&(a.eventsIfTopMost=o[14]),u&32768&&(a.interactive=o[15]),u&16777216&&(a.$$scope={dirty:u,ctx:o}),!l&&u&1&&(l=!0,a.hovered=o[0],Y(()=>l=!1)),e.$set(a)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function _r(r,e,l){let{$$slots:t={},$$scope:n}=e,{id:s=an("symbol")}=e,{source:o=void 0}=e,{sourceLayer:u=void 0}=e,{beforeId:a=void 0}=e,{beforeLayerType:i=void 0}=e,{paint:f=void 0}=e,{layout:c=void 0}=e,{filter:m=void 0}=e,{applyToClusters:g=void 0}=e,{minzoom:C=void 0}=e,{maxzoom:S=void 0}=e,{hoverCursor:y=void 0}=e,{manageHoverState:M=!1}=e,{hovered:O=null}=e,{eventsIfTopMost:A=!1}=e,{interactive:I=!0}=e;function N(q){O=q,l(0,O)}function R(q){ht.call(this,r,q)}function F(q){ht.call(this,r,q)}function P(q){ht.call(this,r,q)}function z(q){ht.call(this,r,q)}function x(q){ht.call(this,r,q)}function E(q){ht.call(this,r,q)}return r.$$set=q=>{"id"in q&&l(1,s=q.id),"source"in q&&l(2,o=q.source),"sourceLayer"in q&&l(3,u=q.sourceLayer),"beforeId"in q&&l(4,a=q.beforeId),"beforeLayerType"in q&&l(5,i=q.beforeLayerType),"paint"in q&&l(6,f=q.paint),"layout"in q&&l(7,c=q.layout),"filter"in q&&l(8,m=q.filter),"applyToClusters"in q&&l(9,g=q.applyToClusters),"minzoom"in q&&l(10,C=q.minzoom),"maxzoom"in q&&l(11,S=q.maxzoom),"hoverCursor"in q&&l(12,y=q.hoverCursor),"manageHoverState"in q&&l(13,M=q.manageHoverState),"hovered"in q&&l(0,O=q.hovered),"eventsIfTopMost"in q&&l(14,A=q.eventsIfTopMost),"interactive"in q&&l(15,I=q.interactive),"$$scope"in q&&l(24,n=q.$$scope)},[O,s,o,u,a,i,f,c,m,g,C,S,y,M,A,I,t,N,R,F,P,z,x,E,n]}class $n extends J{constructor(e){super(),Z(this,e,_r,mr,V,{id:1,source:2,sourceLayer:3,beforeId:4,beforeLayerType:5,paint:6,layout:7,filter:8,applyToClusters:9,minzoom:10,maxzoom:11,hoverCursor:12,manageHoverState:13,hovered:0,eventsIfTopMost:14,interactive:15})}}function Dn(r){let e=r[0],l,t,n=An(r);return{c(){n.c(),l=Ce()},m(s,o){n.m(s,o),$(s,l,o),t=!0},p(s,o){o&1&&V(e,e=s[0])?(ie(),d(n,1,1,ne),ae(),n=An(s),n.c(),_(n,1),n.m(l.parentNode,l)):n.p(s,o)},i(s){t||(_(n),t=!0)},o(s){d(n),t=!1},d(s){s&&p(l),n.d(s)}}}function An(r){let e;const l=r[15].default,t=ut(l,r,r[14],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&16384)&&ct(t,l,n,n[14],e?pt(l,n[14],s,null):$t(n[14]),null)},i(n){e||(_(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function gr(r){let e,l,t=r[0]&&Dn(r);return{c(){t&&t.c(),e=Ce()},m(n,s){t&&t.m(n,s),$(n,e,s),l=!0},p(n,[s]){n[0]?t?(t.p(n,s),s&1&&_(t,1)):(t=Dn(n),t.c(),_(t,1),t.m(e.parentNode,e)):t&&(ie(),d(t,1,1,()=>{t=null}),ae())},i(n){l||(_(t),l=!0)},o(n){d(t),l=!1},d(n){n&&p(e),t&&t.d(n)}}}function dr(r,e,l){let t,n,{$$slots:s={},$$scope:o}=e,{id:u=an("vector")}=e,{url:a=null}=e,{tiles:i=null}=e,{promoteId:f=null}=e,{bounds:c=null}=e,{scheme:m=null}=e,{attribution:g=null}=e,{minzoom:C=null}=e,{maxzoom:S=null}=e,{volatile:y=null}=e;if(a&&a.includes("pmtiles://")&&!bn.config.REGISTERED_PROTOCOLS.hasOwnProperty("pmtiles")){let I=new ks;bn.addProtocol("pmtiles",I.tile)}const{map:M,self:O}=fs();Q(r,M,I=>l(13,n=I)),Q(r,O,I=>l(0,t=I));let A;return fn(()=>{t&&n&&(us(M,t,A),De(O,t=null,t),A=void 0)}),r.$$set=I=>{"id"in I&&l(3,u=I.id),"url"in I&&l(4,a=I.url),"tiles"in I&&l(5,i=I.tiles),"promoteId"in I&&l(6,f=I.promoteId),"bounds"in I&&l(7,c=I.bounds),"scheme"in I&&l(8,m=I.scheme),"attribution"in I&&l(9,g=I.attribution),"minzoom"in I&&l(10,C=I.minzoom),"maxzoom"in I&&l(11,S=I.maxzoom),"volatile"in I&&l(12,y=I.volatile),"$$scope"in I&&l(14,o=I.$$scope)},r.$$.update=()=>{r.$$.dirty&16377&&n&&t!==u&&(De(O,t=u,t),cs(n,t,$s({type:"vector",url:a,tiles:i,promoteId:f,bounds:c,scheme:m,attribution:g,minzoom:C,maxzoom:S,volatile:y}),I=>n&&I===t,()=>{t&&(A=n==null?void 0:n.getSource(t))})),r.$$.dirty&8200&&(n==null||n.on("style.load",()=>{A=n==null?void 0:n.getSource(u)}))},[t,M,O,u,a,i,f,c,m,g,C,S,y,n,o,s]}class ge extends J{constructor(e){super(),Z(this,e,dr,gr,V,{id:3,url:4,tiles:5,promoteId:6,bounds:7,scheme:8,attribution:9,minzoom:10,maxzoom:11,volatile:12})}}function Fn(r,e,l){const t=r.slice();return t[11]=e[l],t[12]=e,t[13]=l,t}function hr(r){let e,l,t;return l=new Ee({props:{$$slots:{default:[wr]},$$scope:{ctx:r}}}),l.$on("click",r[9]),{c(){e=L("div"),h(l.$$.fragment)},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&16384&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function br(r){let e,l,t,n,s,o,u,a,i,f;l=new Ee({props:{$$slots:{default:[kr]},$$scope:{ctx:r}}}),l.$on("click",r[4]);let c=r[2]&&qn(r);s=new qe({props:{label:"Help",$$slots:{default:[vr]},$$scope:{ctx:r}}}),u=new Rs({}),u.$on("click",r[3]);let m=Te(r[0]),g=[];for(let S=0;S<m.length;S+=1)g[S]=zn(Fn(r,m,S));const C=S=>d(g[S],1,1,()=>{g[S]=null});return{c(){e=L("div"),h(l.$$.fragment),t=T(),c&&c.c(),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T();for(let S=0;S<g.length;S+=1)g[S].c();i=Ce()},m(S,y){$(S,e,y),b(l,e,null),$(S,t,y),c&&c.m(S,y),$(S,n,y),b(s,S,y),$(S,o,y),b(u,S,y),$(S,a,y);for(let M=0;M<g.length;M+=1)g[M]&&g[M].m(S,y);$(S,i,y),f=!0},p(S,y){const M={};y&16384&&(M.$$scope={dirty:y,ctx:S}),l.$set(M),S[2]?c?c.p(S,y):(c=qn(S),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null);const O={};if(y&16384&&(O.$$scope={dirty:y,ctx:S}),s.$set(O),y&65){m=Te(S[0]);let A;for(A=0;A<m.length;A+=1){const I=Fn(S,m,A);g[A]?(g[A].p(I,y),_(g[A],1)):(g[A]=zn(I),g[A].c(),_(g[A],1),g[A].m(i.parentNode,i))}for(ie(),A=m.length;A<g.length;A+=1)C(A);ae()}},i(S){if(!f){_(l.$$.fragment,S),_(s.$$.fragment,S),_(u.$$.fragment,S);for(let y=0;y<m.length;y+=1)_(g[y]);f=!0}},o(S){d(l.$$.fragment,S),d(s.$$.fragment,S),d(u.$$.fragment,S),g=g.filter(Boolean);for(let y=0;y<g.length;y+=1)d(g[y]);f=!1},d(S){S&&(p(e),p(t),p(n),p(o),p(a),p(i)),w(l),c&&c.d(S),w(s,S),w(u,S),lt(g,S)}}}function wr(r){let e;return{c(){e=v("Measure lines")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function kr(r){let e;return{c(){e=v("Stop measuring")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function qn(r){let e,l,t=r[2].toFixed(2)+"",n,s;return{c(){e=L("p"),l=v("Length: "),n=v(t),s=v(" meters")},m(o,u){$(o,e,u),k(e,l),k(e,n),k(e,s)},p(o,u){u&4&&t!==(t=o[2].toFixed(2)+"")&&B(n,t)},d(o){o&&p(e)}}}function vr(r){let e;return{c(){e=L("ul"),e.innerHTML=`<li><b>Click</b>
        on the map to place a new waypoint</li> <li><b>Click and drag</b>
        an existing waypoint to move it</li> <li><b>Click</b>
        an existing waypoint to delete it</li> <li>Press <b>Escape</b>
        to exit this mode</li>`},m(l,t){$(l,e,t)},p:ne,d(l){l&&p(e)}}}function yr(r){let e,l;return{c(){e=L("span"),l=T(),G(e,"class","dot svelte-1tzt432")},m(t,n){$(t,e,n),$(t,l,n)},p:ne,d(t){t&&(p(e),p(l))}}}function zn(r){let e,l,t;function n(u){r[7](u,r[11],r[12],r[13])}function s(){return r[8](r[13])}let o={draggable:!0,$$slots:{default:[yr]},$$scope:{ctx:r}};return r[11]!==void 0&&(o.lngLat=r[11]),e=new Ds({props:o}),U.push(()=>W(e,"lngLat",n)),e.$on("click",s),{c(){h(e.$$.fragment)},m(u,a){b(e,u,a),t=!0},p(u,a){r=u;const i={};a&16384&&(i.$$scope={dirty:a,ctx:r}),!l&&a&1&&(l=!0,i.lngLat=r[11],Y(()=>l=!1)),e.$set(i)},i(u){t||(_(e.$$.fragment,u),t=!0)},o(u){d(e.$$.fragment,u),t=!1},d(u){w(e,u)}}}function Sr(r){let e,l;const t=[j("measurement-line"),{paint:{"line-color":Xe.measuringLine,"line-width":5}}];let n={};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u={};e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Cr(r){let e,l,t,n,s,o,u;const a=[br,hr],i=[];function f(c,m){return c[1]?0:1}return e=f(r),l=i[e]=a[e](r),n=new _t({props:{data:r[0].length<2?vn():nn(r[0]),$$slots:{default:[Sr]},$$scope:{ctx:r}}}),{c(){l.c(),t=T(),h(n.$$.fragment)},m(c,m){i[e].m(c,m),$(c,t,m),b(n,c,m),s=!0,o||(u=xe(window,"keydown",r[5]),o=!0)},p(c,[m]){let g=e;e=f(c),e===g?i[e].p(c,m):(ie(),d(i[g],1,1,()=>{i[g]=null}),ae(),l=i[e],l?l.p(c,m):(l=i[e]=a[e](c),l.c()),_(l,1),l.m(t.parentNode,t));const C={};m&1&&(C.data=c[0].length<2?vn():nn(c[0])),m&16384&&(C.$$scope={dirty:m,ctx:c}),n.$set(C)},i(c){s||(_(l),_(n.$$.fragment,c),s=!0)},o(c){d(l),d(n.$$.fragment,c),s=!1},d(c){c&&p(t),i[e].d(c),w(n,c),o=!1,u()}}}function Lr(r,e,l){let t,n=!1,s=[];function o(C){return C.length<2?null:1e3*Os(nn(C),{units:"kilometers"})}function u(C){l(0,s=[...s,C.detail.lngLat.toArray()])}function a(){l(1,n=!1),l(0,s=[])}function i(C){n&&C.key==="Escape"&&(C.stopPropagation(),a())}function f(C){s.splice(C,1),l(0,s)}function c(C,S,y,M){y[M]=C,l(0,s)}const m=C=>f(C),g=()=>l(1,n=!0);return r.$$.update=()=>{r.$$.dirty&1&&l(2,t=o(s))},[s,n,t,u,a,i,f,c,m,g]}class Tr extends J{constructor(e){super(),Z(this,e,Lr,Cr,V,{})}}function Mr(r){let e;return{c(){e=v("Luc Chaissac")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Nr(r){let e,l,t,n,s,o,u,a,i;return a=new X({props:{href:"https://icon-icons.com/icon/screenshot-cursor-camera/100181",$$slots:{default:[Mr]},$$scope:{ctx:r}}}),{c(){e=L("ul"),l=L("li"),l.innerHTML=`<b>Click</b>
    on the map to open a new tab with a 3rd-party imagery provider`,t=T(),n=L("li"),n.innerHTML=`Press <b>Escape</b>
    to exit this mode`,s=T(),o=L("li"),u=v("Cursor by "),h(a.$$.fragment)},m(f,c){$(f,e,c),k(e,l),k(e,t),k(e,n),k(e,s),k(e,o),k(o,u),b(a,o,null),i=!0},p(f,[c]){const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),a.$set(m)},i(f){i||(_(a.$$.fragment,f),i=!0)},o(f){d(a.$$.fragment,f),i=!1},d(f){f&&p(e),w(a)}}}class Pr extends J{constructor(e){super(),Z(this,e,null,Nr,V,{})}}const Ir="/atip/ss_huge_refactor_pt1/assets/camera_cursor-824d29b6.svg",{window:Or}=vs;function Bn(r){let e,l,t,n;const s=[Dr,Rr],o=[];function u(a,i){return a[0]?0:1}return e=u(r),l=o[e]=s[e](r),{c(){l.c(),t=Ce()},m(a,i){o[e].m(a,i),$(a,t,i),n=!0},p(a,i){let f=e;e=u(a),e===f?o[e].p(a,i):(ie(),d(o[f],1,1,()=>{o[f]=null}),ae(),l=o[e],l?l.p(a,i):(l=o[e]=s[e](a),l.c()),_(l,1),l.m(t.parentNode,t))},i(a){n||(_(l),n=!0)},o(a){d(l),n=!1},d(a){a&&p(t),o[e].d(a)}}}function Rr(r){let e,l;return e=new Ee({props:{$$slots:{default:[Ar]},$$scope:{ctx:r}}}),e.$on("click",r[6]),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&8192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Dr(r){let e,l,t,n,s,o,u;e=new Ee({props:{$$slots:{default:[Fr]},$$scope:{ctx:r}}}),e.$on("click",r[4]);function a(f){r[5](f)}let i={legend:"Source",choices:[["google","Google Street View"],["bing","Bing Streetside"]]};return r[2].streetViewImagery!==void 0&&(i.value=r[2].streetViewImagery),t=new un({props:i}),U.push(()=>W(t,"value",a)),o=new qe({props:{label:"Help",$$slots:{default:[qr]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),s=T(),h(o.$$.fragment)},m(f,c){b(e,f,c),$(f,l,c),b(t,f,c),$(f,s,c),b(o,f,c),u=!0},p(f,c){const m={};c&8192&&(m.$$scope={dirty:c,ctx:f}),e.$set(m);const g={};!n&&c&4&&(n=!0,g.value=f[2].streetViewImagery,Y(()=>n=!1)),t.$set(g);const C={};c&8192&&(C.$$scope={dirty:c,ctx:f}),o.$set(C)},i(f){u||(_(e.$$.fragment,f),_(t.$$.fragment,f),_(o.$$.fragment,f),u=!0)},o(f){d(e.$$.fragment,f),d(t.$$.fragment,f),d(o.$$.fragment,f),u=!1},d(f){f&&(p(l),p(s)),w(e,f),w(t,f),w(o,f)}}}function Ar(r){let e;return{c(){e=v("Enable Street View")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Fr(r){let e;return{c(){e=v("Disable Street View")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function qr(r){let e,l;return e=new Pr({}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function zr(r){let e,l,t,n,s=r[1]&&Bn(r);return{c(){s&&s.c(),e=Ce()},m(o,u){s&&s.m(o,u),$(o,e,u),l=!0,t||(n=xe(Or,"keydown",r[3]),t=!0)},p(o,[u]){o[1]?s?(s.p(o,u),u&2&&_(s,1)):(s=Bn(o),s.c(),_(s,1),s.m(e.parentNode,e)):s&&(ie(),d(s,1,1,()=>{s=null}),ae())},i(o){l||(_(s),l=!0)},o(o){d(s),l=!1},d(o){o&&p(e),s&&s.d(o),t=!1,n()}}}function Br(r,e,l){let t,n,s;Q(r,wn,y=>l(2,t=y)),Q(r,Xt,y=>l(8,n=y)),Q(r,Ut,y=>l(9,s=y));let{enabled:o}=e,{showControls:u=!0}=e,a=[];function i(){n.on("click",c),n.getCanvas().style.cursor=`url(${Ir}), auto`;for(let y of js(n,s))a.push([y,n.getPaintProperty(y,"line-color")]),n.setPaintProperty(y,"line-color","cyan")}function f(){if(n){n.off("click",c),n.getCanvas().style.cursor="inherit";for(let[y,M]of a)n.setPaintProperty(y,"line-color",M);a=[]}}fn(f);function c(y){if(!o)return;let M=y.lngLat.lng,O=y.lngLat.lat;t.streetViewImagery=="google"?window.open(`http://maps.google.com/maps?q=&layer=c&cbll=${O},${M}&cbp=11,0,0,0,0`,"_blank"):t.streetViewImagery=="bing"&&window.open(`https://www.bing.com/maps?cp=${O}~${M}&style=x`,"_blank")}function m(y){o&&y.key=="Escape"&&(y.stopPropagation(),l(0,o=!1))}const g=()=>l(0,o=!1);function C(y){r.$$.not_equal(t.streetViewImagery,y)&&(t.streetViewImagery=y,wn.set(t))}const S=()=>l(0,o=!0);return r.$$set=y=>{"enabled"in y&&l(0,o=y.enabled),"showControls"in y&&l(1,u=y.showControls)},r.$$.update=()=>{r.$$.dirty&1&&(o?i():f())},[o,u,t,m,g,C,S]}class Hr extends J{constructor(e){super(),Z(this,e,Br,zr,V,{enabled:0,showControls:1})}}function jr(r){let e=new Map;for(let[t,n]of Object.entries(r.schemes))e.set(t,n);r.features=r.features.filter(t=>Gr(t));let l=1;for(let t of r.features){let n=e.get(t.properties.scheme_reference);n.browse&&(t.properties.funding_programme=n.browse.funding_programme,t.properties.current_milestone=n.browse.current_milestone,t.id=l++)}return e}function Gr(r){return!["eb0ad8ed183c137da4bae66afa944da9","0a568f07241be96f0a70aa73a0de80c8","6c4a5d57176eaeb3296eba790f869909","475e9a43749ce09c7edaaffa0ae57a2f","117b783cb2916a1bb4262960e523acc5","7a600e6342b226aa0983c8dfed19254f","84cc5eb1b52a4e49188058373e587ff0"].includes(r.properties.id)}const sn=["ATF2","ATF2 or ATF3","ATF3","ATF4","ATF4E","Planned pipeline","Other"];function Er(r){return et(["get","intervention_type"],{area:Xe.area,route:Xe.route,crossing:Xe.crossing,other:Xe.other},"white")}function Ur(r){return[["Areas",Xe.area],["Routes",Xe.route],["Crossings",Xe.crossing],["Other",Xe.other]]}const K={education:{schools:"#007DBB",colleges:"maroon",universities:"navy"},hospitals:"#B73D25",mrn:"#781400",srn:"#006478",national_cycle_network:"#640078",sports_spaces:"#013220",parliamentary_constituencies:"#006E59",wards:"purple",combined_authorities:"cyan",local_authority_districts:"orange",local_planning_authorities:"red",bus_route_with_lane:"#9362BA",bus_route_without_lane:"#C2A6D8",trams:"black",signalized_crossing:"green",other_crossing:"black",cycle_paths:{track:"#0000FF",lane:"#009FEF",shared_use_segregated:"#FF9900",shared_use_unsegregated:"#E7E700"},sequential_low_to_high:["#CDE594","#80C6A3","#1F9EB7","#186290","#080C54"],funding_programmes:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","grey"],current_milestone:["grey","grey","red","red","#fbb862","#eddc76","#dafd9d","#76c384","#488f31"],gradient_flat_to_steep:["#267300","#70A800","#FFAA00","#E60000","#A80000","#730000"]},ze=["interpolate",["exponential",1.6],["zoom"],3,1,7,2,18,20];function rn(){let[r,e]=ms(sn,K.funding_programmes);return[et(["get","funding_programme"],r,"grey"),e]}function Wr(){let r=["removed","no data","not progressed","superseded","preliminary design completed","feasability design completed","detailed design completed","consruction started","construction completed"],[e,l]=ms(r,K.current_milestone);return[et(["get","current_milestone"],e,"grey"),l]}function ms(r,e){let l=[],t={},n=0;for(let s of r){let o=e[n++%e.length];t[s]=o,l.push([s,o])}return[t,l]}function Yr(r){let e,l;return e=new xt({props:{rows:r[1]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&2&&(s.rows=t[1]),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Vr(r){let e,l,t,n,s;function o(a){r[3](a)}let u={label:"Color interventions",choices:[["fundingProgramme","By funding programme"],["interventionType","By intervention type"],["currentMilestone","By current milestone"]]};return r[0]!==void 0&&(u.value=r[0]),e=new ot({props:u}),U.push(()=>W(e,"value",o)),e.$on("change",r[2]),n=new qe({props:{label:"Legend",$$slots:{default:[Yr]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};!l&&i&1&&(l=!0,f.value=a[0],Y(()=>l=!1)),e.$set(f);const c={};i&66&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}function Jr(r,e,l){let t;Q(r,Xt,i=>l(4,t=i));let n="fundingProgramme",[s,o]=rn();function u(){let i;n=="interventionType"?(i=Er(),l(1,o=Ur())):n=="fundingProgramme"?l(1,[i,o]=rn(),o):n=="currentMilestone"&&l(1,[i,o]=Wr(),o),t.setPaintProperty("interventions-points","circle-color",i),t.setPaintProperty("interventions-lines","line-color",i),t.setPaintProperty("interventions-polygons","fill-color",i),t.setPaintProperty("interventions-polygons-outlines","line-color",i)}function a(i){n=i,l(0,n)}return[n,o,u,a]}class Zr extends J{constructor(e){super(),Z(this,e,Jr,Vr,V,{})}}const qt=gt({type:"FeatureCollection",features:[],schemes:{}}),Zt=gt(new Map),Hn=gt(!0),Gt=gt(""),Et=gt("");function Qr(r){let e;return{c(){e=v("Reset all filters")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Kr(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Xr(r){let e,l,t,n,s,o;return t=new Ee({props:{$$slots:{default:[Kr]},$$scope:{ctx:r}}}),t.$on("click",r[19]),{c(){e=L("input"),l=T(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterInterventionText")},m(u,a){$(u,e,a),Ke(e,r[7]),$(u,l,a),b(t,u,a),n=!0,s||(o=xe(e,"input",r[18]),s=!0)},p(u,a){a&128&&e.value!==u[7]&&Ke(e,u[7]);const i={};a&134217728&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){n||(_(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(l)),w(t,u),s=!1,o()}}}function xr(r){let e;return{c(){e=v("Clear")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function eo(r){let e,l,t,n,s,o;return t=new Ee({props:{$$slots:{default:[xr]},$$scope:{ctx:r}}}),t.$on("click",r[21]),{c(){e=L("input"),l=T(),h(t.$$.fragment),G(e,"type","text"),G(e,"class","govuk-input govuk-input--width-10"),G(e,"id","filterSchemeText")},m(u,a){$(u,e,a),Ke(e,r[6]),$(u,l,a),b(t,u,a),n=!0,s||(o=xe(e,"input",r[20]),s=!0)},p(u,a){a&64&&e.value!==u[6]&&Ke(e,u[6]);const i={};a&134217728&&(i.$$scope={dirty:a,ctx:u}),t.$set(i)},i(u){n||(_(t.$$.fragment,u),n=!0)},o(u){d(t.$$.fragment,u),n=!1},d(u){u&&(p(e),p(l)),w(t,u),s=!1,o()}}}function to(r){let e,l,t,n,s,o,u,a,i,f,c,m,g,C,S,y,M,O,A,I;e=new Ee({props:{$$slots:{default:[Qr]},$$scope:{ctx:r}}}),e.$on("click",r[13]);function N(D){r[14](D)}let R={label:"Authority or region",choices:r[8],emptyOption:!0};r[2]!==void 0&&(R.value=r[2]),t=new ot({props:R}),U.push(()=>W(t,"value",N));function F(D){r[15](D)}let P={label:"Funding programme",choices:r[9],emptyOption:!0};r[3]!==void 0&&(P.value=r[3]),o=new ot({props:P}),U.push(()=>W(o,"value",F));function z(D){r[16](D)}let x={label:"Current milestone",choices:r[10],emptyOption:!0};r[4]!==void 0&&(x.value=r[4]),i=new ot({props:x}),U.push(()=>W(i,"value",z));function E(D){r[17](D)}let q={label:"Sketch source",choices:r[12],emptyOption:!0};return r[5]!==void 0&&(q.value=r[5]),m=new ot({props:q}),U.push(()=>W(m,"value",E)),S=new kn({props:{label:"Intervention name or description",id:"filterInterventionText",$$slots:{default:[Xr]},$$scope:{ctx:r}}}),M=new kn({props:{label:"Scheme name or reference",id:"filterSchemeText",$$slots:{default:[eo]},$$scope:{ctx:r}}}),A=new Zr({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),s=T(),h(o.$$.fragment),a=T(),h(i.$$.fragment),c=T(),h(m.$$.fragment),C=T(),h(S.$$.fragment),y=T(),h(M.$$.fragment),O=T(),h(A.$$.fragment)},m(D,H){b(e,D,H),$(D,l,H),b(t,D,H),$(D,s,H),b(o,D,H),$(D,a,H),b(i,D,H),$(D,c,H),b(m,D,H),$(D,C,H),b(S,D,H),$(D,y,H),b(M,D,H),$(D,O,H),b(A,D,H),I=!0},p(D,H){const pe={};H&134217728&&(pe.$$scope={dirty:H,ctx:D}),e.$set(pe);const Me={};H&256&&(Me.choices=D[8]),!n&&H&4&&(n=!0,Me.value=D[2],Y(()=>n=!1)),t.$set(Me);const Ne={};H&512&&(Ne.choices=D[9]),!u&&H&8&&(u=!0,Ne.value=D[3],Y(()=>u=!1)),o.$set(Ne);const ye={};H&1024&&(ye.choices=D[10]),!f&&H&16&&(f=!0,ye.value=D[4],Y(()=>f=!1)),i.$set(ye);const Ie={};!g&&H&32&&(g=!0,Ie.value=D[5],Y(()=>g=!1)),m.$set(Ie);const he={};H&134217856&&(he.$$scope={dirty:H,ctx:D}),S.$set(he);const Ge={};H&134217792&&(Ge.$$scope={dirty:H,ctx:D}),M.$set(Ge)},i(D){I||(_(e.$$.fragment,D),_(t.$$.fragment,D),_(o.$$.fragment,D),_(i.$$.fragment,D),_(m.$$.fragment,D),_(S.$$.fragment,D),_(M.$$.fragment,D),_(A.$$.fragment,D),I=!0)},o(D){d(e.$$.fragment,D),d(t.$$.fragment,D),d(o.$$.fragment,D),d(i.$$.fragment,D),d(m.$$.fragment,D),d(S.$$.fragment,D),d(M.$$.fragment,D),d(A.$$.fragment,D),I=!1},d(D){D&&(p(l),p(s),p(a),p(c),p(C),p(y),p(O)),w(e,D),w(t,D),w(o,D),w(i,D),w(m,D),w(S,D),w(M,D),w(A,D)}}}function no(r){let e,l=r[0].size.toLocaleString()+"",t,n,s=r[11].route.toLocaleString()+"",o,u,a=r[11].area.toLocaleString()+"",i,f,c=r[11].crossing.toLocaleString()+"",m,g,C=r[11].other.toLocaleString()+"",S,y,M=jn(r[11].totalLength).toFixed(1)+"",O,A;return{c(){e=v("Showing "),t=v(l),n=v(" schemes ("),o=v(s),u=v(`
    routes, `),i=v(a),f=v(` areas,
    `),m=v(c),g=v(" crossings, "),S=v(C),y=v(`
    other, with total LineString length of `),O=v(M),A=v(" miles)")},m(I,N){$(I,e,N),$(I,t,N),$(I,n,N),$(I,o,N),$(I,u,N),$(I,i,N),$(I,f,N),$(I,m,N),$(I,g,N),$(I,S,N),$(I,y,N),$(I,O,N),$(I,A,N)},p(I,N){N&1&&l!==(l=I[0].size.toLocaleString()+"")&&B(t,l),N&2048&&s!==(s=I[11].route.toLocaleString()+"")&&B(o,s),N&2048&&a!==(a=I[11].area.toLocaleString()+"")&&B(i,a),N&2048&&c!==(c=I[11].crossing.toLocaleString()+"")&&B(m,c),N&2048&&C!==(C=I[11].other.toLocaleString()+"")&&B(S,C),N&2048&&M!==(M=jn(I[11].totalLength).toFixed(1)+"")&&B(O,M)},d(I){I&&(p(e),p(t),p(n),p(o),p(u),p(i),p(f),p(m),p(g),p(S),p(y),p(O),p(A))}}}function lo(r){let e,l,t;function n(o){r[22](o)}let s={$$slots:{default:[no]},$$scope:{ctx:r}};return r[1]!==void 0&&(s.checked=r[1]),e=new re({props:s}),U.push(()=>W(e,"checked",n)),{c(){h(e.$$.fragment)},m(o,u){b(e,o,u),t=!0},p(o,u){const a={};u&134219777&&(a.$$scope={dirty:u,ctx:o}),!l&&u&2&&(l=!0,a.checked=o[1],Y(()=>l=!1)),e.$set(a)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function so(r){let e,l,t,n;return e=new qe({props:{label:"Filters",$$slots:{default:[to]},$$scope:{ctx:r}}}),t=new st({props:{small:!0,$$slots:{default:[lo]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,[o]){const u={};o&134219772&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&134219779&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function jn(r){return r*621371e-9}function ro(r,e,l){let t,n,s,o;Q(r,Et,H=>l(6,t=H)),Q(r,Gt,H=>l(7,n=H)),Q(r,qt,H=>l(23,s=H)),Q(r,Zt,H=>l(24,o=H));let{schemesToBeShown:u=new Set}=e,{show:a=!0}=e,i=[],f="",c=[],m=new Set(sn.slice(0,-1)),g="",C=[],S="",y=[["ATF assessment","ATF assessment"],["LCWIP mapping","LCWIP mapping"],["Both","Both"]],M="",O={area:0,route:0,crossing:0,other:0,totalLength:0};cn(()=>{var Ne,ye,Ie;let H=new Set,pe=new Set,Me=new Set;for(let he of o.values())(Ne=he.browse)!=null&&Ne.authority_or_region&&H.add(he.browse.authority_or_region),(ye=he.browse)!=null&&ye.funding_programme&&pe.add(he.browse.funding_programme),(Ie=he.browse)!=null&&Ie.current_milestone&&Me.add(he.browse.current_milestone);l(8,i=Array.from(H.entries())),i.sort(),l(9,c=sn.map(he=>[he,he])),l(10,C=Array.from(Me.entries())),C.sort()});function A(H,pe,Me,Ne,ye,Ie){let he=pe.toLowerCase(),Ge=Me.toLowerCase(),Be=ce=>{var de,Se,Pe,ve,zt,Bt,Ht;if(he&&!((de=ce.properties.name)!=null&&de.toLowerCase().includes(he))&&!((Se=ce.properties.description)!=null&&Se.toLowerCase().includes(he)))return!1;if(H||Ge||Ne||ye||Ie){let Ue=o.get(ce.properties.scheme_reference);if(Ne&&((Pe=Ue.browse)==null?void 0:Pe.authority_or_region)!=Ne||ye&&ye!=="Other"&&((ve=Ue.browse)==null?void 0:ve.funding_programme)!=ye||ye==="Other"&&m.has(((zt=Ue.browse)==null?void 0:zt.funding_programme)??"")||Ie&&((Bt=Ue.browse)==null?void 0:Bt.current_milestone)!=Ie||Ge&&!Ue.scheme_reference.toLowerCase().includes(Ge)&&!(Ue.scheme_name??"").toLowerCase().includes(Ge)||H&&H!=="Both"&&H!==((Ht=Ue.browse)==null?void 0:Ht.sketch_source))return!1}return!0};l(0,u=new Set(s.features.filter(Be).map(ce=>ce.properties.scheme_reference))),l(11,O={area:0,route:0,crossing:0,other:0,totalLength:0});let Oe=ce=>{var de,Se;return!(!u.has(ce.properties.scheme_reference)||he&&!((de=ce.properties.name)!=null&&de.toLowerCase().includes(he))&&!((Se=ce.properties.description)!=null&&Se.toLowerCase().includes(he)))};for(let ce of s.features)Oe(ce)?(delete ce.properties.hide_while_editing,l(11,O[ce.properties.intervention_type]++,O),ce.geometry.type=="LineString"&&ce.properties.length_meters&&l(11,O.totalLength+=ce.properties.length_meters,O)):ce.properties.hide_while_editing=!0;qt.set(s),l(11,O)}function I(){l(5,M=""),l(2,f=""),l(3,g=""),l(4,S=""),De(Gt,n="",n),De(Et,t="",t)}function N(H){f=H,l(2,f)}function R(H){g=H,l(3,g)}function F(H){S=H,l(4,S)}function P(H){M=H,l(5,M)}function z(){n=this.value,Gt.set(n)}const x=()=>De(Gt,n="",n);function E(){t=this.value,Et.set(t)}const q=()=>De(Et,t="",t);function D(H){a=H,l(1,a)}return r.$$set=H=>{"schemesToBeShown"in H&&l(0,u=H.schemesToBeShown),"show"in H&&l(1,a=H.show)},r.$$.update=()=>{r.$$.dirty&252&&A(M,n,t,f,g,S)},[u,a,f,g,S,M,t,n,i,c,C,O,y,I,N,R,F,P,z,x,E,q,D]}class oo extends J{constructor(e){super(),Z(this,e,ro,so,V,{schemesToBeShown:0,show:1})}}function io(r){let e;return{c(){e=v(`Open Government License
  `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ao(r){let e,l,t,n,s;return t=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[io]},$$scope:{ctx:r}}}),{c(){e=L("p"),l=v("License: "),h(t.$$.fragment),n=v(`. Contains OS data © Crown copyright and database right
  2023.`)},m(o,u){$(o,e,u),k(e,l),b(t,e,null),k(e,n),s=!0},p(o,[u]){const a={};u&1&&(a.$$scope={dirty:u,ctx:o}),t.$set(a)},i(o){s||(_(t.$$.fragment,o),s=!0)},o(o){d(t.$$.fragment,o),s=!1},d(o){o&&p(e),w(t)}}}class Fe extends J{constructor(e){super(),Z(this,e,null,ao,V,{})}}function Gn(r,e,l){const t=r.slice();return t[2]=e[l],t}function En(r,e,l){const t=r.slice();return t[5]=e[l],t}function Un(r){let e,l;return{c(){e=L("span"),l=v(` 
    `),_e(e,"background",r[5]),_e(e,"width","100%"),_e(e,"border","1px solid black")},m(t,n){$(t,e,n),k(e,l)},p(t,n){n&1&&_e(e,"background",t[5])},d(t){t&&p(e)}}}function Wn(r){let e,l=r[2]+"",t;return{c(){e=L("span"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&2&&l!==(l=n[2]+"")&&B(t,l)},d(n){n&&p(e)}}}function fo(r){let e,l,t,n=Te(r[0]),s=[];for(let a=0;a<n.length;a+=1)s[a]=Un(En(r,n,a));let o=Te(r[1]),u=[];for(let a=0;a<o.length;a+=1)u[a]=Wn(Gn(r,o,a));return{c(){e=L("div");for(let a=0;a<s.length;a+=1)s[a].c();l=T(),t=L("div");for(let a=0;a<u.length;a+=1)u[a].c();_e(e,"display","flex"),_e(t,"display","flex"),_e(t,"justify-content","space-between")},m(a,i){$(a,e,i);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null);$(a,l,i),$(a,t,i);for(let f=0;f<u.length;f+=1)u[f]&&u[f].m(t,null)},p(a,[i]){if(i&1){n=Te(a[0]);let f;for(f=0;f<n.length;f+=1){const c=En(a,n,f);s[f]?s[f].p(c,i):(s[f]=Un(c),s[f].c(),s[f].m(e,null))}for(;f<s.length;f+=1)s[f].d(1);s.length=n.length}if(i&2){o=Te(a[1]);let f;for(f=0;f<o.length;f+=1){const c=Gn(a,o,f);u[f]?u[f].p(c,i):(u[f]=Wn(c),u[f].c(),u[f].m(t,null))}for(;f<u.length;f+=1)u[f].d(1);u.length=o.length}},i:ne,o:ne,d(a){a&&(p(e),p(l),p(t)),lt(s,a),lt(u,a)}}}function uo(r,e,l){let{colorScale:t}=e,{limits:n}=e;return r.$$set=s=>{"colorScale"in s&&l(0,t=s.colorScale),"limits"in s&&l(1,n=s.limits)},[t,n]}class je extends J{constructor(e){super(),Z(this,e,uo,fo,V,{colorScale:0,limits:1})}}function ke(r){let e=new URLSearchParams(window.location.search).has(r),l=gt(e);return l.subscribe(t=>{let n=new URL(window.location.href);t?n.searchParams.set(r,"1"):n.searchParams.delete(r),window.history.replaceState(null,"",n.toString())}),l}function dt(r,e,l,t){let n=e,s=new URLSearchParams(window.location.search).get(r);if(s!=null)try{n=t(s)}catch(u){console.warn(`Parsing URL parameter ${r}=${s} failed, using default value: ${u}`)}let o=gt(n);return o.subscribe(u=>{let a=new URL(window.location.href),i=l(u);i==null?a.searchParams.delete(r):a.searchParams.set(r,i),window.history.replaceState(null,"",a.toString())}),o}function Yn(r){const e=r[14].OA21CD;r[15]=e;const l=r[14][r[3].kind];r[16]=l}function co(r){let e;return{c(){e=v("Percent of households with a car")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $o(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function po(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function mo(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function _o(r){let e,l,t,n,s,o,u,a,i,f,c,m;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[$o]},$$scope:{ctx:r}}}),s=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[po]},$$scope:{ctx:r}}}),f=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[mo]},$$scope:{ctx:r}}}),{c(){e=L("p"),l=v("Car/van availability data is from the 2021 census, via "),h(t.$$.fragment),n=v(". Output area boundaries from "),h(s.$$.fragment),o=v("."),u=T(),a=L("p"),i=v("License: "),h(f.$$.fragment),c=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(g,C){$(g,e,C),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,o),$(g,u,C),$(g,a,C),k(a,i),b(f,a,null),k(a,c),m=!0},p(g,C){const S={};C&131072&&(S.$$scope={dirty:C,ctx:g}),t.$set(S);const y={};C&131072&&(y.$$scope={dirty:C,ctx:g}),s.$set(y);const M={};C&131072&&(M.$$scope={dirty:C,ctx:g}),f.$set(M)},i(g){m||(_(t.$$.fragment,g),_(s.$$.fragment,g),_(f.$$.fragment,g),m=!0)},o(g){d(t.$$.fragment,g),d(s.$$.fragment,g),d(f.$$.fragment,g),m=!1},d(g){g&&(p(e),p(u),p(a)),w(t),w(s),w(f)}}}function go(r){let e,l,t;return l=new $e({props:{$$slots:{default:[_o]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Vn(r){let e,l;return e=new je({props:{colorScale:r[4],limits:it(r[3].kind)}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=it(t[3].kind)),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ho(r){let e;return{c(){e=v("Average cars per household")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function bo(r){let e;return{c(){e=v(`NOMIS TS045
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function wo(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ko(r){let e;return{c(){e=v(`Open Government License
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function vo(r){let e,l,t,n,s,o,u,a,i,f,c,m,g,C;return s=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[bo]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[wo]},$$scope:{ctx:r}}}),m=new X({props:{href:"http://www.nationalarchives.gov.uk/doc/open-government-licence/version/3/",$$slots:{default:[ko]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`Where the census counts "3 or more cars or vans", the average shown here
        assumes 3.`,l=T(),t=L("p"),n=v("Car/van availability data is from the 2021 census, via "),h(s.$$.fragment),o=v(". Output area boundaries from "),h(u.$$.fragment),a=v("."),i=T(),f=L("p"),c=v("License: "),h(m.$$.fragment),g=v(`. Contains OS data © Crown copyright and database
        right 2023.`)},m(S,y){$(S,e,y),$(S,l,y),$(S,t,y),k(t,n),b(s,t,null),k(t,o),b(u,t,null),k(t,a),$(S,i,y),$(S,f,y),k(f,c),b(m,f,null),k(f,g),C=!0},p(S,y){const M={};y&131072&&(M.$$scope={dirty:y,ctx:S}),s.$set(M);const O={};y&131072&&(O.$$scope={dirty:y,ctx:S}),u.$set(O);const A={};y&131072&&(A.$$scope={dirty:y,ctx:S}),m.$set(A)},i(S){C||(_(s.$$.fragment,S),_(u.$$.fragment,S),_(m.$$.fragment,S),C=!0)},o(S){d(s.$$.fragment,S),d(u.$$.fragment,S),d(m.$$.fragment,S),C=!1},d(S){S&&(p(e),p(l),p(t),p(i),p(f)),w(s),w(u),w(m)}}}function yo(r){let e,l,t;return l=new $e({props:{$$slots:{default:[vo]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Jn(r){let e,l;return e=new je({props:{colorScale:r[4],limits:it(r[3].kind)}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&8&&(s.limits=it(t[3].kind)),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function So(r){let e;return{c(){e=v("Population density")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Co(r){let e;return{c(){e=v(`NOMIS TS006
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Lo(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function To(r){let e,l,t,n,s,o,u,a,i;return t=new X({props:{href:"https://www.nomisweb.co.uk/sources/census_2021_bulk",$$slots:{default:[Co]},$$scope:{ctx:r}}}),s=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::output-areas-2021-boundaries-ew-bgc/explore",$$slots:{default:[Lo]},$$scope:{ctx:r}}}),a=new Fe({}),{c(){e=L("p"),l=v("Population density data is from the 2021 census, via "),h(t.$$.fragment),n=v(". Output area boundaries from "),h(s.$$.fragment),o=v("."),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&131072&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const g={};c&131072&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){i||(_(t.$$.fragment,f),_(s.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(s),w(a,f)}}}function Mo(r){let e,l,t;return l=new $e({props:{$$slots:{default:[To]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Zn(r){let e,l,t,n;return t=new je({props:{colorScale:r[4],limits:it(r[3].kind).map(Qn)}}),{c(){e=L("p"),e.textContent="(people per square kilometres)",l=T(),h(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&8&&(u.limits=it(s[3].kind).map(Qn)),t.$set(u)},i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function No(r){let e,l,t,n=r[16].toLocaleString()+"",s,o,u=r[15]+"",a;return{c(){e=L("p"),l=v("There are "),t=L("b"),s=v(n),o=v(`
          people per square kilometre in `),a=v(u)},m(i,f){$(i,e,f),k(e,l),k(e,t),k(t,s),k(e,o),k(e,a)},p(i,f){f&16392&&n!==(n=i[16].toLocaleString()+"")&&B(s,n),f&16384&&u!==(u=i[15]+"")&&B(a,u)},d(i){i&&p(e)}}}function Po(r){let e,l,t=r[15]+"",n,s,o,u=r[16]+"",a,i;return{c(){e=L("p"),l=v("Households in "),n=v(t),s=v(` have an average of
          `),o=L("b"),a=v(u),i=v(`
          cars`)},m(f,c){$(f,e,c),k(e,l),k(e,n),k(e,s),k(e,o),k(o,a),k(e,i)},p(f,c){c&16384&&t!==(t=f[15]+"")&&B(n,t),c&16392&&u!==(u=f[16]+"")&&B(a,u)},d(f){f&&p(e)}}}function Io(r){let e,l,t=r[16]+"",n,s,o,u=r[15]+"",a,i;return{c(){e=L("p"),l=L("b"),n=v(t),s=v("%"),o=v(`
          of households in `),a=v(u),i=v(" have 1 or more cars")},m(f,c){$(f,e,c),k(e,l),k(l,n),k(l,s),k(e,o),k(e,a),k(e,i)},p(f,c){c&16392&&t!==(t=f[16]+"")&&B(n,t),c&16384&&u!==(u=f[15]+"")&&B(a,u)},d(f){f&&p(e)}}}function Oo(r){Yn(r);let e;function l(s,o){return s[3].kind=="percent_households_with_car"?Io:s[3].kind=="average_cars_per_household"?Po:No}let t=l(r),n=t(r);return{c(){n.c(),e=Ce()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){Yn(s),t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function Ro(r){let e,l;return e=new fe({props:{$$slots:{default:[Oo,({props:t})=>({14:t}),({props:t})=>t?16384:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&147464&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Do(r){let e,l,t,n;const s=[j(We),{sourceLayer:We},{paint:{"fill-color":we(["get",r[3].kind],it(r[3].kind),r[4]),"fill-opacity":te(.5,.7)}},{layout:{visibility:r[3].kind!=""?"visible":"none"}},{eventsIfTopMost:!0},{manageHoverState:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Ro]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=le(o,s[i]);e=new He({props:o}),e.$on("click",r[6]);const u=[j(`${We}-outline`),{sourceLayer:We},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[3].kind!=""?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=le(a,u[i]);return t=new be({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&24?se(s,[f&0&&oe(j(We)),f&0&&{sourceLayer:We},f&24&&{paint:{"fill-color":we(["get",i[3].kind],it(i[3].kind),i[4]),"fill-opacity":te(.5,.7)}},f&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}},s[4],s[5],s[6]]):{};f&131080&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&8?se(u,[f&0&&oe(j(`${We}-outline`)),f&0&&{sourceLayer:We},u[2],f&8&&{layout:{visibility:i[3].kind!=""?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function Ao(r){let e,l,t,n,s,o,u,a,i,f,c,m,g,C;function S(P){r[7](P)}let y={$$slots:{right:[go],default:[co]},$$scope:{ctx:r}};r[0]!==void 0&&(y.checked=r[0]),e=new re({props:y}),U.push(()=>W(e,"checked",S)),e.$on("change",r[8]);let M=r[3].kind=="percent_households_with_car"&&Vn(r);function O(P){r[9](P)}let A={$$slots:{right:[yo],default:[ho]},$$scope:{ctx:r}};r[1]!==void 0&&(A.checked=r[1]),s=new re({props:A}),U.push(()=>W(s,"checked",O)),s.$on("change",r[10]);let I=r[3].kind=="average_cars_per_household"&&Jn(r);function N(P){r[11](P)}let R={$$slots:{right:[Mo],default:[So]},$$scope:{ctx:r}};r[2]!==void 0&&(R.checked=r[2]),i=new re({props:R}),U.push(()=>W(i,"checked",N)),i.$on("change",r[12]);let F=r[3].kind=="population_density"&&Zn(r);return g=new ge({props:{url:`pmtiles://${me()}/v1/${We}.pmtiles`,$$slots:{default:[Do]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),M&&M.c(),n=T(),h(s.$$.fragment),u=T(),I&&I.c(),a=T(),h(i.$$.fragment),c=T(),F&&F.c(),m=T(),h(g.$$.fragment)},m(P,z){b(e,P,z),$(P,t,z),M&&M.m(P,z),$(P,n,z),b(s,P,z),$(P,u,z),I&&I.m(P,z),$(P,a,z),b(i,P,z),$(P,c,z),F&&F.m(P,z),$(P,m,z),b(g,P,z),C=!0},p(P,[z]){const x={};z&131072&&(x.$$scope={dirty:z,ctx:P}),!l&&z&1&&(l=!0,x.checked=P[0],Y(()=>l=!1)),e.$set(x),P[3].kind=="percent_households_with_car"?M?(M.p(P,z),z&8&&_(M,1)):(M=Vn(P),M.c(),_(M,1),M.m(n.parentNode,n)):M&&(ie(),d(M,1,1,()=>{M=null}),ae());const E={};z&131072&&(E.$$scope={dirty:z,ctx:P}),!o&&z&2&&(o=!0,E.checked=P[1],Y(()=>o=!1)),s.$set(E),P[3].kind=="average_cars_per_household"?I?(I.p(P,z),z&8&&_(I,1)):(I=Jn(P),I.c(),_(I,1),I.m(a.parentNode,a)):I&&(ie(),d(I,1,1,()=>{I=null}),ae());const q={};z&131072&&(q.$$scope={dirty:z,ctx:P}),!f&&z&4&&(f=!0,q.checked=P[2],Y(()=>f=!1)),i.$set(q),P[3].kind=="population_density"?F?(F.p(P,z),z&8&&_(F,1)):(F=Zn(P),F.c(),_(F,1),F.m(m.parentNode,m)):F&&(ie(),d(F,1,1,()=>{F=null}),ae());const D={};z&131080&&(D.$$scope={dirty:z,ctx:P}),g.$set(D)},i(P){C||(_(e.$$.fragment,P),_(M),_(s.$$.fragment,P),_(I),_(i.$$.fragment,P),_(F),_(g.$$.fragment,P),C=!0)},o(P){d(e.$$.fragment,P),d(M),d(s.$$.fragment,P),d(I),d(i.$$.fragment,P),d(F),d(g.$$.fragment,P),C=!1},d(P){P&&(p(t),p(n),p(u),p(a),p(c),p(m)),w(e,P),M&&M.d(P),w(s,P),I&&I.d(P),w(i,P),F&&F.d(P),w(g,P)}}}let We="census_output_areas";function Fo(r){return r.show?r.kind:null}function qo(r){return{show:!0,kind:r}}function it(r){return r=="percent_households_with_car"?[0,20,40,60,80,100]:r=="average_cars_per_household"?[0,.5,1,1.5,2,2.5]:[0,4700,13e3,33e3,94e3,198e4]}const Qn=r=>r.toLocaleString();function zo(r,e,l){let t,n=K.sequential_low_to_high,o=dt(We,{show:!1,kind:""},Fo,qo);Q(r,o,M=>l(3,t=M));let u=t.kind=="percent_households_with_car",a=t.kind=="average_cars_per_household",i=t.kind=="population_density";function f(M){let O=M.detail.features[0].properties.OA21CD;t.kind=="percent_households_with_car"||t.kind=="average_cars_per_household"?window.open(`https://www.ons.gov.uk/census/maps/choropleth/housing/number-of-cars-or-vans/number-of-cars-5a/no-cars-or-vans-in-household?oa=${O}`,"_blank"):window.open(`https://www.ons.gov.uk/census/maps/choropleth/population/population-density/population-density/persons-per-square-kilometre?oa=${O}`,"_blank")}function c(M){u=M,l(0,u)}const m=()=>{l(1,a=!1),l(2,i=!1)};function g(M){a=M,l(1,a)}const C=()=>{l(0,u=!1),l(2,i=!1)};function S(M){i=M,l(2,i)}const y=()=>{l(0,u=!1),l(1,a=!1)};return r.$$.update=()=>{r.$$.dirty&7&&(u?(De(o,t.show=!0,t),De(o,t.kind="percent_households_with_car",t)):a?(De(o,t.show=!0,t),De(o,t.kind="average_cars_per_household",t)):i?(De(o,t.show=!0,t),De(o,t.kind="population_density",t)):(De(o,t.show=!1,t),De(o,t.kind="",t)))},[u,a,i,t,n,o,f,c,m,g,C,S,y]}class Bo extends J{constructor(e){super(),Z(this,e,zo,Ao,V,{})}}function Ho(r){let e,l,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Combined authorities`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:ne,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function jo(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Go(r){let e,l,t,n,s,o,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::combined-authorities-december-2022-boundaries-en-buc/explore",$$slots:{default:[jo]},$$scope:{ctx:r}}}),o=new Fe({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of December 2022."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),k(e,l),b(t,e,null),k(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function Eo(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Go]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Uo(r){let e,l=r[4].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&B(t,l)},d(n){n&&p(e)}}}function Wo(r){let e,l;return e=new fe({props:{$$slots:{default:[Uo,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Yo(r){let e,l,t,n;const s=[j(bt),{paint:{"fill-color":r[1],"fill-opacity":te(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[Wo]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=le(o,s[i]);e=new He({props:o}),e.$on("click",Jo);const u=[j(`${bt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=le(a,u[i]);return t=new be({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?se(s,[f&0&&oe(j(bt)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":te(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[3],s[4],s[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?se(u,[f&0&&oe(j(`${bt}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function Vo(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Eo],default:[Ho]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),U.push(()=>W(e,"checked",o)),n=new _t({props:{data:`${me()}/v1/${bt}.geojson`,$$slots:{default:[Yo]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],Y(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let bt="combined_authorities";function Jo(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.CAUTH22CD}`,"_blank")}function Zo(r,e,l){let t,n=K.combined_authorities,s=ke(bt);Q(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Qo extends J{constructor(e){super(),Z(this,e,Zo,Vo,V,{})}}function Ko(r){let e;return{c(){e=v("Indices of Multiple Deprivation")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Xo(r){let e;return{c(){e=v(`DLUCH GIS
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function xo(r){let e;return{c(){e=v(`here
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ei(r){let e,l,t,n,s,o,u,a,i;return t=new X({props:{href:"https://data-communities.opendata.arcgis.com/datasets/communities::indices-of-multiple-deprivation-imd-2019-1/explore",$$slots:{default:[Xo]},$$scope:{ctx:r}}}),s=new X({props:{href:"http://dclgapps.communities.gov.uk/imd/iod_index.html",$$slots:{default:[xo]},$$scope:{ctx:r}}}),a=new Fe({}),{c(){e=L("p"),l=v("The 2019 English IMD scores come from "),h(t.$$.fragment),n=v(`. Note the LSOAs identified are from the 2011 census. A
        detailed breakdown of the score across different categories can be found `),h(s.$$.fragment),o=v("."),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const g={};c&64&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){i||(_(t.$$.fragment,f),_(s.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(s),w(a,f)}}}function ti(r){let e,l,t;return l=new $e({props:{$$slots:{default:[ei]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Kn(r){let e,l;return e=new je({props:{colorScale:r[1],limits:["Least deprived","Most deprived"]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:ne,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ni(r){let e,l=r[5].LSOA11CD+"",t,n,s,o=r[5].score+"",u,a,i,f,c,m=r[5].rank.toLocaleString()+"",g,C;return{c(){e=L("p"),t=v(l),n=v(` has an IMD score of
        `),s=L("b"),u=v(o),a=T(),i=L("p"),f=v("Rank: "),c=L("b"),g=v(m),C=v(`
        / 32,844 LSOAs`)},m(S,y){$(S,e,y),k(e,t),k(e,n),k(e,s),k(s,u),$(S,a,y),$(S,i,y),k(i,f),k(i,c),k(c,g),k(i,C)},p(S,y){y&32&&l!==(l=S[5].LSOA11CD+"")&&B(t,l),y&32&&o!==(o=S[5].score+"")&&B(u,o),y&32&&m!==(m=S[5].rank.toLocaleString()+"")&&B(g,m)},d(S){S&&(p(e),p(a),p(i))}}}function li(r){let e,l;return e=new fe({props:{$$slots:{default:[ni,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function si(r){let e,l,t,n;const s=[j(Ye),{sourceLayer:Ye},{paint:{"fill-color":we(["-",10,["get","decile"]],r[2],r[1]),"fill-opacity":te(.5,.7)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[li]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=le(o,s[i]);e=new He({props:o});const u=[j(`${Ye}-outline`),{sourceLayer:Ye},{paint:{"line-color":"black","line-width":.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=le(a,u[i]);return t=new be({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&7?se(s,[f&0&&oe(j(Ye)),f&0&&{sourceLayer:Ye},f&6&&{paint:{"fill-color":we(["-",10,["get","decile"]],i[2],i[1]),"fill-opacity":te(.5,.7)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5]]):{};f&64&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&1?se(u,[f&0&&oe(j(`${Ye}-outline`)),f&0&&{sourceLayer:Ye},u[2],f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function ri(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[ti],default:[Ko]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&Kn(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${Ye}.pmtiles`,$$slots:{default:[si]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],Y(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=Kn(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&65&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Ye="imd";function oi(r,e,l){let t,n=K.sequential_low_to_high,s=[0,2,4,6,8,10],o=ke(Ye);Q(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class ii extends J{constructor(e){super(),Z(this,e,oi,ri,V,{})}}function ai(r){let e,l,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Local Authority Districts`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:ne,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function fi(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ui(r){let e,l,t,n,s,o,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/maps/79a4e87783be4b6bbb96ddad6dda52a3",$$slots:{default:[fi]},$$scope:{ctx:r}}}),o=new Fe({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of January 2024."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),k(e,l),b(t,e,null),k(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function ci(r){let e,l,t;return l=new $e({props:{$$slots:{default:[ui]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function $i(r){let e,l=r[4].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&B(t,l)},d(n){n&&p(e)}}}function pi(r){let e,l;return e=new fe({props:{$$slots:{default:[$i,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function mi(r){let e,l,t,n;const s=[j(wt),{paint:{"fill-color":r[1],"fill-opacity":te(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[pi]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=le(o,s[i]);e=new He({props:o}),e.$on("click",gi);const u=[j(`${wt}-outline`),{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=le(a,u[i]);return t=new be({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?se(s,[f&0&&oe(j(wt)),f&2&&{paint:{"fill-color":i[1],"fill-opacity":te(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[3],s[4],s[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?se(u,[f&0&&oe(j(`${wt}-outline`)),f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function _i(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[ci],default:[ai]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),U.push(()=>W(e,"checked",o)),n=new _t({props:{data:`${me()}/v1/${wt}.geojson`,$$slots:{default:[mi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],Y(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let wt="local_authority_districts";function gi(r){window.open(`https://www.ons.gov.uk/visualisations/areas/${r.detail.features[0].properties.LAD23CD}`,"_blank")}function di(r,e,l){let t,n=K.local_authority_districts,s=ke(wt);Q(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class hi extends J{constructor(e){super(),Z(this,e,di,_i,V,{})}}function bi(r){let e,l,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Local Planning Authorities`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:ne,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function wi(r){let e;return{c(){e=v(`local authority
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ki(r){let e;return{c(){e=v(`national park authorit
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function vi(r){let e;return{c(){e=v(`development corporation
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function yi(r){let e;return{c(){e=v("this map")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Si(r){let e;return{c(){e=v(`planning.data.gov.uk
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ci(r){let e,l,t,n,s,o,u,a,i,f,c,m,g,C,S,y,M,O,A,I,N,R;return t=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-authority",$$slots:{default:[wi]},$$scope:{ctx:r}}}),s=new X({props:{href:"https://www.planning.data.gov.uk/dataset/national-park-authority",$$slots:{default:[ki]},$$scope:{ctx:r}}}),u=new X({props:{href:"https://www.planning.data.gov.uk/dataset/development-corporation",$$slots:{default:[vi]},$$scope:{ctx:r}}}),g=new X({props:{href:"https://www.planning.data.gov.uk/map/?dataset=local-planning-authority",$$slots:{default:[yi]},$$scope:{ctx:r}}}),O=new X({props:{href:"https://www.planning.data.gov.uk/dataset/local-planning-authority",$$slots:{default:[Si]},$$scope:{ctx:r}}}),N=new Fe({}),{c(){e=L("p"),l=v("LPAs may be a "),h(t.$$.fragment),n=v(", "),h(s.$$.fragment),o=v("y, or "),h(u.$$.fragment),a=v("."),i=T(),f=L("p"),c=L("strong"),m=v(`Note there are overlapping LPAs near Northhamptonshire. Only one
          authority name is shown when hovering. Use `),h(g.$$.fragment),C=v(" to get more details."),S=T(),y=L("p"),M=v("Data from ONS Geography via "),h(O.$$.fragment),A=v(", as of November 2022."),I=T(),h(N.$$.fragment)},m(F,P){$(F,e,P),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,o),b(u,e,null),k(e,a),$(F,i,P),$(F,f,P),k(f,c),k(c,m),b(g,c,null),k(c,C),$(F,S,P),$(F,y,P),k(y,M),b(O,y,null),k(y,A),$(F,I,P),b(N,F,P),R=!0},p(F,P){const z={};P&32&&(z.$$scope={dirty:P,ctx:F}),t.$set(z);const x={};P&32&&(x.$$scope={dirty:P,ctx:F}),s.$set(x);const E={};P&32&&(E.$$scope={dirty:P,ctx:F}),u.$set(E);const q={};P&32&&(q.$$scope={dirty:P,ctx:F}),g.$set(q);const D={};P&32&&(D.$$scope={dirty:P,ctx:F}),O.$set(D)},i(F){R||(_(t.$$.fragment,F),_(s.$$.fragment,F),_(u.$$.fragment,F),_(g.$$.fragment,F),_(O.$$.fragment,F),_(N.$$.fragment,F),R=!0)},o(F){d(t.$$.fragment,F),d(s.$$.fragment,F),d(u.$$.fragment,F),d(g.$$.fragment,F),d(O.$$.fragment,F),d(N.$$.fragment,F),R=!1},d(F){F&&(p(e),p(i),p(f),p(S),p(y),p(I)),w(t),w(s),w(u),w(g),w(O),w(N,F)}}}function Li(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Ci]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ti(r){let e,l=r[4].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&B(t,l)},d(n){n&&p(e)}}}function Mi(r){let e,l;return e=new fe({props:{$$slots:{default:[Ti,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ni(r){let e,l,t,n;const s=[j(Ve),{sourceLayer:Ve},{paint:{"fill-color":r[1],"fill-opacity":te(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let o={$$slots:{default:[Mi]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=le(o,s[i]);e=new He({props:o});const u=[j(`${Ve}-outline`),{sourceLayer:Ve},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=le(a,u[i]);return t=new be({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?se(s,[f&0&&oe(j(Ve)),f&0&&{sourceLayer:Ve},f&2&&{paint:{"fill-color":i[1],"fill-opacity":te(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?se(u,[f&0&&oe(j(`${Ve}-outline`)),f&0&&{sourceLayer:Ve},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function Pi(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Li],default:[bi]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),U.push(()=>W(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${Ve}.pmtiles`,$$slots:{default:[Ni]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],Y(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Ve="local_planning_authorities";function Ii(r,e,l){let t,n=K.local_planning_authorities,s=ke(Ve);Q(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Oi extends J{constructor(e){super(),Z(this,e,Ii,Pi,V,{})}}function Ri(r){let e,l,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Parliamentary constituencies`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:ne,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Di(r){let e;return{c(){e=v(`Ordnance Survey Boundary-Line
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ai(r){let e,l,t,n,s,o,u;return t=new X({props:{href:"https://www.ordnancesurvey.co.uk/products/boundary-line",$$slots:{default:[Di]},$$scope:{ctx:r}}}),o=new Fe({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of May 2023."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),k(e,l),b(t,e,null),k(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function Fi(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Ai]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function qi(r){let e,l=r[4].Name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=n[4].Name+"")&&B(t,l)},d(n){n&&p(e)}}}function zi(r){let e,l;return e=new fe({props:{$$slots:{default:[qi,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Bi(r){let e,l,t,n;const s=[j(Je),{sourceLayer:Je},{paint:{"fill-color":r[1],"fill-opacity":te(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[zi]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=le(o,s[i]);e=new He({props:o}),e.$on("click",ji);const u=[j(`${Je}-outline`),{sourceLayer:Je},{paint:{"line-color":r[1],"line-width":5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=le(a,u[i]);return t=new be({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?se(s,[f&0&&oe(j(Je)),f&0&&{sourceLayer:Je},f&2&&{paint:{"fill-color":i[1],"fill-opacity":te(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5],s[6]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?se(u,[f&0&&oe(j(`${Je}-outline`)),f&0&&{sourceLayer:Je},f&2&&{paint:{"line-color":i[1],"line-width":5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function Hi(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Fi],default:[Ri]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),U.push(()=>W(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${Je}.pmtiles`,$$slots:{default:[Bi]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],Y(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Je="parliamentary_constituencies";function ji(r){let e=r.detail.features[0].properties.Name;e=e.replace(/ Boro Const$/,""),e=e.replace(/ Co Const$/,""),e=encodeURIComponent(e),window.open(`https://members.parliament.uk/members/Commons?SearchText=${e}`,"_blank")}function Gi(r,e,l){let t,n=K.parliamentary_constituencies,s=ke(Je);Q(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Ei extends J{constructor(e){super(),Z(this,e,Gi,Hi,V,{})}}function Ui(r){let e;return{c(){e=v("Pollution")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Wi(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Yi(r){let e,l,t,n,s,o,u,a,i;return t=new X({props:{href:"https://uk-air.defra.gov.uk/data/wms-services",$$slots:{default:[Wi]},$$scope:{ctx:r}}}),a=new Fe({}),{c(){e=L("p"),l=v("Most layers show air quality data from "),h(t.$$.fragment),n=v(`. The measurements are annual means, in units of
        µgm
        `),s=L("sup"),s.textContent="3",o=v(`
        . Note the particulate matter layers are not corrected for natural sources.`),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),k(e,l),b(t,e,null),k(e,n),k(e,s),k(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&4096&&(m.$$scope={dirty:c,ctx:f}),t.$set(m)},i(f){i||(_(t.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(a,f)}}}function Vi(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Yi]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&4096&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Xn(r){let e,l,t,n,s=r[3](r[0].pollutant)+"",o,u,a,i,f,c,m,g,C,S,y,M,O;function A(N){r[6](N)}let I={label:"Pollutant",choices:[["PM25_viridis","Background PM2.5"],["PM10_viridis","Background PM10"],["NOx_viridis","Background NOx"],["PM25Roads_viridis","Roadside PM2.5"],["PM10Roads_viridis","Roadside PM10"],["NOxRoads_viridis","Roadside NOx"]]};return r[0].pollutant!==void 0&&(I.value=r[0].pollutant),e=new ot({props:I}),U.push(()=>W(e,"value",A)),{c(){h(e.$$.fragment),t=T(),n=L("p"),o=v(s),u=T(),a=L("div"),i=L("label"),f=v(`Opacity
      `),c=L("input"),m=T(),g=L("img"),G(c,"type","range"),G(c,"min","0"),G(c,"max","100"),Jt(g.src,C=r[4](r[0].pollutant))||G(g,"src",C),G(g,"width",150),G(g,"alt",S=`Legend for ${r[0].pollutant} layer`)},m(N,R){b(e,N,R),$(N,t,R),$(N,n,R),k(n,o),$(N,u,R),$(N,a,R),k(a,i),k(i,f),k(i,c),Ke(c,r[0].opacity),$(N,m,R),$(N,g,R),y=!0,M||(O=[xe(c,"change",r[7]),xe(c,"input",r[7])],M=!0)},p(N,R){const F={};!l&&R&1&&(l=!0,F.value=N[0].pollutant,Y(()=>l=!1)),e.$set(F),(!y||R&1)&&s!==(s=N[3](N[0].pollutant)+"")&&B(o,s),R&1&&Ke(c,N[0].opacity),(!y||R&1&&!Jt(g.src,C=N[4](N[0].pollutant)))&&G(g,"src",C),(!y||R&1&&S!==(S=`Legend for ${N[0].pollutant} layer`))&&G(g,"alt",S)},i(N){y||(_(e.$$.fragment,N),y=!0)},o(N){d(e.$$.fragment,N),y=!1},d(N){N&&(p(t),p(n),p(u),p(a),p(m),p(g)),w(e,N),M=!1,ps(O)}}}function Ji(r){let e,l;const t=[j("pollution"),{paint:{"raster-opacity":r[0].opacity/100}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new As({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?se(t,[t[0],{paint:{"raster-opacity":s[0].opacity/100}},{layout:{visibility:s[0].show?"visible":"none"}}]):{};e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Zi(r){let e,l,t,n,s,o;function u(f){r[5](f)}let a={$$slots:{right:[Vi],default:[Ui]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0].show&&Xn(r);return s=new $r({props:{tiles:[r[1]],tileSize:256,$$slots:{default:[Ji]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&4096&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,Y(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=Xn(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&2&&(g.tiles=[f[1]]),c&4097&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}function Qi(r){return r.show?`${r.pollutant}/${r.opacity}`:null}function Ki(r){let[e,l]=r.split("/");return{show:!0,pollutant:e,opacity:parseInt(l)}}function Xi(r,e,l){let t,n,s,u=dt("pollution",{show:!1,pollutant:"PM25_viridis",opacity:50},Qi,Ki);Q(r,u,S=>l(0,s=S));function a(){return`https://ukair.maps.rcdo.co.uk/ukairserver/services/aq_amb_2022/${s.pollutant}/MapServer/WMSServer`}function i(S){return t[1]}function f(S){let y=new URLSearchParams({request:"GetMap",version:"1.3.0",format:"image/png",crs:"EPSG:3857",width:"256",height:"256",styles:"",layers:t[0]}).toString();return`${a()}?bbox={bbox-epsg-3857}&${y}`}function c(S){let y=new URLSearchParams({request:"GetLegendGraphic",version:"1.3.0",format:"image/png",layer:t[0]}).toString();return`${a()}?${y}`}function m(S){r.$$.not_equal(s.show,S)&&(s.show=S,u.set(s))}function g(S){r.$$.not_equal(s.pollutant,S)&&(s.pollutant=S,u.set(s))}function C(){s.opacity=Wt(this.value),u.set(s)}return r.$$.update=()=>{r.$$.dirty&1&&(t={NOx_viridis:["22","Data for 2022"],PM25_viridis:["21","Data for 2022"],PM10_viridis:["22","Data for 2022"],NOxRoads_viridis:["22","Data for 2022"],PM25Roads_viridis:["14","Data for 2022"],PM10Roads_viridis:["22","Data for 2022"]}[s.pollutant]),r.$$.dirty&1&&l(1,n=f(s.pollutant))},[s,n,u,i,c,m,g,C]}class xi extends J{constructor(e){super(),Z(this,e,Xi,Zi,V,{})}}function ea(r){let e;return{c(){e=v("Road noise")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ta(r){let e;return{c(){e=v(`DEFRA
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function na(r){let e,l,t,n,s,o,u,a,i;return s=new X({props:{href:"https://environment.data.gov.uk/dataset/b9c6bf30-a02d-4378-94a0-2982de1bef86",$$slots:{default:[ta]},$$scope:{ctx:r}}}),a=new Fe({}),{c(){e=L("p"),e.textContent=`This is the LAeq,16h dataset showing annual average noise levels in
        units of decibels for the 16-hour period between 7am and 11pm. Only
        roads in areas with at least 100,000 people are included.`,l=T(),t=L("p"),n=v("Data from June 2019, produced by "),h(s.$$.fragment),o=v(". See there for methodology details"),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),$(f,l,c),$(f,t,c),k(t,n),b(s,t,null),k(t,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){i||(_(s.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(t),p(u)),w(s),w(a,f)}}}function la(r){let e,l,t;return l=new $e({props:{$$slots:{default:[na]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function xn(r){let e,l;return e=new je({props:{colorScale:r[1],limits:["55","65","75",">"]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:ne,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function sa(r){let e,l=r[4].noiseclass+"",t,n,s=el(r[4].noiseclass)+"",o,u;return{c(){e=L("p"),t=v(l),n=v(" dB ("),o=v(s),u=v(")")},m(a,i){$(a,e,i),k(e,t),k(e,n),k(e,o),k(e,u)},p(a,i){i&16&&l!==(l=a[4].noiseclass+"")&&B(t,l),i&16&&s!==(s=el(a[4].noiseclass)+"")&&B(o,s)},d(a){a&&p(e)}}}function ra(r){let e,l;return e=new fe({props:{$$slots:{default:[sa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function oa(r){let e,l;const t=[j(kt),{sourceLayer:kt},{paint:{"fill-color":et(["get","noiseclass"],{"55.0-59.9":r[1][0],"60.0-64.9":r[1][0],"65.0-69.9":r[1][1],"70.0-74.9":r[1][1],">=75.0":r[1][2]},"red"),"fill-opacity":te(.5,.8)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[ra]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new He({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&3?se(t,[o&0&&oe(j(kt)),o&0&&{sourceLayer:kt},o&2&&{paint:{"fill-color":et(["get","noiseclass"],{"55.0-59.9":s[1][0],"60.0-64.9":s[1][0],"65.0-69.9":s[1][1],"70.0-74.9":s[1][1],">=75.0":s[1][2]},"red"),"fill-opacity":te(.5,.8)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ia(r){let e,l,t,n,s,o;function u(f){r[3](f)}let a={$$slots:{right:[la],default:[ea]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&xn(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${kt}.pmtiles`,$$slots:{default:[oa]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],Y(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=xn(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let kt="road_noise";function el(r){return{"55.0-59.9":"Comfortable noise levels","60.0-64.9":"Comfortable noise levels","65.0-69.9":"Slightly noisy","70.0-74.9":"Slightly noisy",">=75.0":"Excessively noisy"}[r]}function aa(r,e,l){let t,n=[K.sequential_low_to_high[0],K.sequential_low_to_high[2],K.sequential_low_to_high[4]],s=ke(kt);Q(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class fa extends J{constructor(e){super(),Z(this,e,aa,ia,V,{})}}function ua(r){let e,l,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Wards`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:ne,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function ca(r){let e;return{c(){e=v(`ONS Geography
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $a(r){let e,l,t,n,s,o,u;return t=new X({props:{href:"https://geoportal.statistics.gov.uk/datasets/ons::wards-may-2023-boundaries-uk-bgc/explore",$$slots:{default:[ca]},$$scope:{ctx:r}}}),o=new Fe({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(", as of May 2023."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),k(e,l),b(t,e,null),k(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function pa(r){let e,l,t;return l=new $e({props:{$$slots:{default:[$a]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ma(r){let e,l=r[4].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=n[4].name+"")&&B(t,l)},d(n){n&&p(e)}}}function _a(r){let e,l;return e=new fe({props:{$$slots:{default:[ma,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ga(r){let e,l,t,n;const s=[j(Ze),{sourceLayer:Ze},{paint:{"fill-color":r[1],"fill-opacity":te(0,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let o={$$slots:{default:[_a]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=le(o,s[i]);e=new He({props:o}),e.$on("click",ha);const u=[j(`${Ze}-outline`),{sourceLayer:Ze},{paint:{"line-color":r[1],"line-width":2.5}},{layout:{visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=le(a,u[i]);return t=new be({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&3?se(s,[f&0&&oe(j(Ze)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"fill-color":i[1],"fill-opacity":te(0,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}},s[4],s[5],s[6]]):{};f&32&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&3?se(u,[f&0&&oe(j(`${Ze}-outline`)),f&0&&{sourceLayer:Ze},f&2&&{paint:{"line-color":i[1],"line-width":2.5}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function da(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[pa],default:[ua]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),U.push(()=>W(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${Ze}.pmtiles`,$$slots:{default:[ga]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],Y(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Ze="wards";function ha(r){let e=encodeURIComponent(r.detail.features[0].properties.name);window.open(`https://www.google.com/search?q=${e}+councillor`,"_blank")}function ba(r,e,l){let t,n=K.wards,s=ke(Ze);Q(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class wa extends J{constructor(e){super(),Z(this,e,ba,da,V,{})}}function ka(r){let e;return{c(){e=v("Open Data Commons Open Database License")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function va(r){let e,l,t,n;return t=new X({props:{href:"https://www.openstreetmap.org/copyright",$$slots:{default:[ka]},$$scope:{ctx:r}}}),{c(){e=L("p"),l=v("License: "),h(t.$$.fragment)},m(s,o){$(s,e,o),k(e,l),b(t,e,null),n=!0},p(s,[o]){const u={};o&1&&(u.$$scope={dirty:o,ctx:s}),t.$set(u)},i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&p(e),w(t)}}}class tt extends J{constructor(e){super(),Z(this,e,null,va,V,{})}}function ya(r){let e,l,t;return e=new Ae({props:{color:K.bus_route_with_lane}}),{c(){h(e.$$.fragment),l=v(`
  Bus routes`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:ne,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Sa(r){let e;return{c(){e=v(`GTFS
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ca(r){let e,l,t,n,s,o,u,a,i;return s=new X({props:{href:"https://gtfs.org",$$slots:{default:[Sa]},$$scope:{ctx:r}}}),a=new tt({}),{c(){e=L("p"),e.textContent=`This shows all roads with at least one bus route crossing them. It also
        shows whether the road has a bus lane or not.`,l=T(),t=L("p"),n=v("Note this data is from OpenStreetMap (as of 9 August 2023), not "),h(s.$$.fragment),o=v(`, and doesn't include which routes are run or the
        frequency of service.`),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),$(f,l,c),$(f,t,c),k(t,n),b(s,t,null),k(t,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&16&&(m.$$scope={dirty:c,ctx:f}),s.$set(m)},i(f){i||(_(s.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(t),p(u)),w(s),w(a,f)}}}function La(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Ca]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Ta(r){let e;return{c(){e=L("p"),e.textContent="At least one bus route crosses here, without any bus lanes"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ma(r){let e;return{c(){e=L("p"),e.textContent=`At least one bus route crosses here, with a bus lane in one or more
          directions`},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Na(r){let e;function l(s,o){return s[3].has_bus_lane?Ma:Ta}let t=l(r),n=t(r);return{c(){n.c(),e=Ce()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t!==(t=l(s))&&(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function Pa(r){let e,l;return e=new fe({props:{$$slots:{default:[Na,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ia(r){let e,l;const t=[j(vt),{sourceLayer:vt},{paint:{"line-color":["case",["boolean",["get","has_bus_lane"],!1],K.bus_route_with_lane,K.bus_route_without_lane],"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Pa]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?se(t,[o&0&&oe(j(vt)),o&0&&{sourceLayer:vt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Oa(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[La],default:[ya]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),U.push(()=>W(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${vt}.pmtiles`,$$slots:{default:[Ia]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],Y(()=>l=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let vt="bus_routes";function Ra(r,e,l){let t,n=ke(vt);Q(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Da extends J{constructor(e){super(),Z(this,e,Ra,Oa,V,{})}}function tl(r){const e=Wa(r[9]);r[10]=e[0],r[11]=e[1],r[12]=e[2]}function nl(r,e,l){const t=r.slice();return t[10]=e[l][0],t[13]=e[l][1],t[14]=e[l][2],t[15]=e,t[16]=l,t}function Aa(r){let e;return{c(){e=v("Cycle paths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Fa(r){let e,l,t,n,s,o,u,a;return u=new tt({}),{c(){e=L("p"),e.textContent=`This shows different types of cycle path, according to OpenStreetMap (as
        of 15 August 2023).`,l=T(),t=L("ul"),t.innerHTML=`<li><b>Separated tracks</b>
          include fully or partly segregated cycletracks alongside a carriageway,
          stepped cycletracks, and tracks off the carriageway entirely. They&#39;re also
          separated from foot traffic.</li> <li><b>Unprotected lanes</b>
          are mandatory or advisory lanes on the carriageway, without any physical
          protection. They do not included shared bus lanes.</li> <li><b>Shared-use</b>
          paths are split between cycle and foot traffic, and are separated from
          motor traffic somehow. There can be segregation between cyclists and pedestrians
          or not.</li>`,n=T(),s=L("p"),s.textContent=`Note there are many known limitations with this layer. Data in
        OpenStreetMap can be missing, mapped twice, or mapped incorrectly. Our
        processing is also imperfect. You can click a segment to see full
        OpenStreetMap data. Please do report issues with the classification or
        data.`,o=T(),h(u.$$.fragment)},m(i,f){$(i,e,f),$(i,l,f),$(i,t,f),$(i,n,f),$(i,s,f),$(i,o,f),b(u,i,f),a=!0},p:ne,i(i){a||(_(u.$$.fragment,i),a=!0)},o(i){d(u.$$.fragment,i),a=!1},d(i){i&&(p(e),p(l),p(t),p(n),p(s),p(o)),w(u,i)}}}function qa(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Fa]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131072&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function ll(r){let e,l,t;return l=new st({props:{$$slots:{default:[Ba]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(l.$$.fragment),_e(e,"border","1px solid black"),_e(e,"padding","8px")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&131073&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function za(r){let e,l,t=r[13]+"",n,s,o;return e=new Ae({props:{color:r[14]}}),{c(){h(e.$$.fragment),l=T(),n=v(t),s=T()},m(u,a){b(e,u,a),$(u,l,a),$(u,n,a),$(u,s,a),o=!0},p:ne,i(u){o||(_(e.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),o=!1},d(u){u&&(p(l),p(n),p(s)),w(e,u)}}}function sl(r){let e,l,t;function n(o){r[5](o,r[10])}let s={$$slots:{default:[za]},$$scope:{ctx:r}};return r[0][r[10]]!==void 0&&(s.checked=r[0][r[10]]),e=new re({props:s}),U.push(()=>W(e,"checked",n)),{c(){h(e.$$.fragment)},m(o,u){b(e,o,u),t=!0},p(o,u){r=o;const a={};u&131072&&(a.$$scope={dirty:u,ctx:r}),!l&&u&5&&(l=!0,a.checked=r[0][r[10]],Y(()=>l=!1)),e.$set(a)},i(o){t||(_(e.$$.fragment,o),t=!0)},o(o){d(e.$$.fragment,o),t=!1},d(o){w(e,o)}}}function Ba(r){let e,l,t=Te(r[2]),n=[];for(let o=0;o<t.length;o+=1)n[o]=sl(nl(r,t,o));const s=o=>d(n[o],1,1,()=>{n[o]=null});return{c(){for(let o=0;o<n.length;o+=1)n[o].c();e=Ce()},m(o,u){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(o,u);$(o,e,u),l=!0},p(o,u){if(u&5){t=Te(o[2]);let a;for(a=0;a<t.length;a+=1){const i=nl(o,t,a);n[a]?(n[a].p(i,u),_(n[a],1)):(n[a]=sl(i),n[a].c(),_(n[a],1),n[a].m(e.parentNode,e))}for(ie(),a=t.length;a<n.length;a+=1)s(a);ae()}},i(o){if(!l){for(let u=0;u<t.length;u+=1)_(n[u]);l=!0}},o(o){n=n.filter(Boolean);for(let u=0;u<n.length;u+=1)d(n[u]);l=!1},d(o){o&&p(e),lt(n,o)}}}function Ha(r){tl(r);let e,l=r[10]+"",t,n,s,o,u,a=r[11]+"",i,f,c,m,g=r[12]+"",C;return{c(){e=L("h2"),t=v(l),n=T(),s=L("p"),o=v("Direction: "),u=L("b"),i=T(),f=L("p"),c=v("Width: "),m=L("b"),C=v(g)},m(S,y){$(S,e,y),k(e,t),$(S,n,y),$(S,s,y),k(s,o),k(s,u),u.innerHTML=a,$(S,i,y),$(S,f,y),k(f,c),k(f,m),k(m,C)},p(S,y){tl(S),y&512&&l!==(l=S[10]+"")&&B(t,l),y&512&&a!==(a=S[11]+"")&&(u.innerHTML=a),y&512&&g!==(g=S[12]+"")&&B(C,g)},d(S){S&&(p(e),p(n),p(s),p(i),p(f))}}}function ja(r){let e,l;return e=new fe({props:{$$slots:{default:[Ha,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&131584&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ga(r){let e,l;const t=[j(yt),{sourceLayer:yt},{paint:{"line-color":et(["get","kind"],{track:K.cycle_paths.track,lane:K.cycle_paths.lane,shared_use_segregated:K.cycle_paths.shared_use_segregated,shared_use_unsegregated:K.cycle_paths.shared_use_unsegregated},"red"),"line-width":ze,"line-opacity":te(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[3](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={$$slots:{default:[ja]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new be({props:n}),e.$on("click",Ya),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&9?se(t,[o&0&&oe(j(yt)),o&0&&{sourceLayer:yt},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&9&&{filter:s[3](s[0])},t[5],t[6],t[7]]):{};o&131072&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Ea(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[qa],default:[Aa]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0].show&&ll(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${yt}.pmtiles`,$$slots:{default:[Ga]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&131072&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,Y(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=ll(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&131073&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let yt="cycle_paths";function Ua(r){return{show:!0,track:r.includes("track"),lane:r.includes("lane"),shared_use_segregated:r.includes("shared_use_segregated"),shared_use_unsegregated:r.includes("shared_use_unsegregated")}}function Wa(r){let e={track:"Separated track",lane:"Unprotected lane",shared_use_segregated:"Shared-use (segregated)",shared_use_unsegregated:"Shared-use (unsegregated)"}[r.kind],l={"one-way":"&uarr;","two-way":"&#8597;",unknown:""}[r.direction],t=r.width=="unknown"?"unknown":`${r.width} meters`;return[e,`${l} ${r.direction}`,t]}function Ya(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Va(r,e,l){let t,n=["track","lane","shared_use_segregated","shared_use_unsegregated"],s={show:!1,track:!0,lane:!0,shared_use_segregated:!0,shared_use_unsegregated:!0};function o(m){return m.show?n.filter(g=>m[g]).join(","):null}let u=dt(yt,s,o,Ua);Q(r,u,m=>l(0,t=m));let a=[["track","Separated tracks",K.cycle_paths.track],["lane","Unprotected lanes",K.cycle_paths.lane],["shared_use_segregated","Shared-use (segregated)",K.cycle_paths.shared_use_segregated],["shared_use_unsegregated","Shared-use (unsegregated)",K.cycle_paths.shared_use_unsegregated]];function i(m){let g=n.filter(C=>m[C]);return["in",["get","kind"],["literal",g]]}function f(m){r.$$.not_equal(t.show,m)&&(t.show=m,u.set(t))}function c(m,g){r.$$.not_equal(t[g],m)&&(t[g]=m,u.set(t))}return[t,u,a,i,f,c]}class Ja extends J{constructor(e){super(),Z(this,e,Va,Ea,V,{})}}function Za(r){let e,l,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Major Road Network`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:ne,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Qa(r){let e;return{c(){e=v(`Major Road Network
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ka(r){let e,l,t,n,s,o,u;return t=new X({props:{href:"https://maps.dft.gov.uk/major-road-network/index.html",$$slots:{default:[Qa]},$$scope:{ctx:r}}}),o=new Fe({}),{c(){e=L("p"),l=v("Data from the "),h(t.$$.fragment),n=v(", as of September 2021."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),k(e,l),b(t,e,null),k(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function Xa(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Ka]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function xa(r){let e,l=(r[4].name??"Unknown MRN road")+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown MRN road")+"")&&B(t,l)},d(n){n&&p(e)}}}function ef(r){let e,l;return e=new fe({props:{$$slots:{default:[xa,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function tf(r){let e,l;const t=[j(St),{sourceLayer:St},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[ef]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&3?se(t,[o&0&&oe(j(St)),o&0&&{sourceLayer:St},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function nf(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[Xa],default:[Za]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),U.push(()=>W(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${St}.pmtiles`,$$slots:{default:[tf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],Y(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let St="mrn";function lf(r,e,l){let t,n=K.mrn,s=ke(St);Q(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class sf extends J{constructor(e){super(),Z(this,e,lf,nf,V,{})}}function rf(r){let e,l,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  Strategic Road Network`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:ne,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function of(r){let e;return{c(){e=v(`OS Open Roads
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function af(r){let e,l,t,n,s,o,u;return t=new X({props:{href:"https://osdatahub.os.uk/downloads/open/OpenRoads",$$slots:{default:[of]},$$scope:{ctx:r}}}),o=new Fe({}),{c(){e=L("p"),l=v("Data from "),h(t.$$.fragment),n=v(`, as of December 2023. The SRN is equivalent to trunk
        roads.`),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),k(e,l),b(t,e,null),k(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function ff(r){let e,l,t;return l=new $e({props:{$$slots:{default:[af]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function uf(r){let e,l=(r[4].name??"Unknown SRN road")+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=(n[4].name??"Unknown SRN road")+"")&&B(t,l)},d(n){n&&p(e)}}}function cf(r){let e,l;return e=new fe({props:{$$slots:{default:[uf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function $f(r){let e,l;const t=[j(Ct),{sourceLayer:Ct},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":7,"line-opacity":te(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[cf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&3?se(t,[o&0&&oe(j(Ct)),o&0&&{sourceLayer:Ct},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":7,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function pf(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[ff],default:[rf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),U.push(()=>W(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${Ct}.pmtiles`,$$slots:{default:[$f]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],Y(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Ct="srn";function mf(r,e,l){let t,n=K.srn,s=ke(Ct);Q(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class _f extends J{constructor(e){super(),Z(this,e,mf,pf,V,{})}}function gf(r){let e,l,t;return e=new Ae({props:{color:r[1]}}),{c(){h(e.$$.fragment),l=v(`
  National Cycle Network`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:ne,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function df(r){let e;return{c(){e=v(`National Cycle Network
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function hf(r){let e,l,t,n,s,o,u;return t=new X({props:{href:"https://data-sustrans-uk.opendata.arcgis.com/",$$slots:{default:[df]},$$scope:{ctx:r}}}),o=new Fe({}),{c(){e=L("p"),l=v("Data from Sustrans about the "),h(t.$$.fragment),n=v(", downloaded on 22/01/2024."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),k(e,l),b(t,e,null),k(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function bf(r){let e,l,t;return l=new $e({props:{$$slots:{default:[hf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function rl(r){let e,l,t,n=r[4].Desc_+"",s;return{c(){e=L("li"),l=v("Description: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&16&&n!==(n=o[4].Desc_+"")&&B(s,n)},d(o){o&&p(e)}}}function ol(r){let e,l,t,n=r[4].Greenway+"",s;return{c(){e=L("li"),l=v("Is greenway: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&16&&n!==(n=o[4].Greenway+"")&&B(s,n)},d(o){o&&p(e)}}}function il(r){let e,l,t,n=r[4].RouteType+"",s;return{c(){e=L("li"),l=v("Route type: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteType+"")&&B(s,n)},d(o){o&&p(e)}}}function al(r){let e,l,t,n=r[4].RouteNo+"",s;return{c(){e=L("li"),l=v("Route number: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteNo+"")&&B(s,n)},d(o){o&&p(e)}}}function fl(r){let e,l,t,n=r[4].RouteCat+"",s;return{c(){e=L("li"),l=v("Route Category: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&16&&n!==(n=o[4].RouteCat+"")&&B(s,n)},d(o){o&&p(e)}}}function ul(r){let e,l,t,n=r[4].OpenStatus+"",s;return{c(){e=L("li"),l=v("Open Status: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&16&&n!==(n=o[4].OpenStatus+"")&&B(s,n)},d(o){o&&p(e)}}}function cl(r){let e,l,t,n=r[4].Surface+"",s;return{c(){e=L("li"),l=v("Surface: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&16&&n!==(n=o[4].Surface+"")&&B(s,n)},d(o){o&&p(e)}}}function $l(r){let e,l,t,n=r[4].Quality+"",s;return{c(){e=L("li"),l=v("Quality: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&16&&n!==(n=o[4].Quality+"")&&B(s,n)},d(o){o&&p(e)}}}function pl(r){let e,l,t,n=r[4].RoadClass+"",s;return{c(){e=L("li"),l=v("Road Class: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&16&&n!==(n=o[4].RoadClass+"")&&B(s,n)},d(o){o&&p(e)}}}function wf(r){let e,l,t,n,s,o,u,a,i,f=r[4].Desc_&&rl(r),c=r[4].Greenway&&ol(r),m=r[4].RouteType&&il(r),g=r[4].RouteNo&&al(r),C=r[4].RouteCat&&fl(r),S=r[4].OpenStatus&&ul(r),y=r[4].Surface&&cl(r),M=r[4].Quality&&$l(r),O=r[4].RoadClass&&pl(r);return{c(){e=L("ul"),f&&f.c(),l=T(),c&&c.c(),t=T(),m&&m.c(),n=T(),g&&g.c(),s=T(),C&&C.c(),o=T(),S&&S.c(),u=T(),y&&y.c(),a=T(),M&&M.c(),i=T(),O&&O.c()},m(A,I){$(A,e,I),f&&f.m(e,null),k(e,l),c&&c.m(e,null),k(e,t),m&&m.m(e,null),k(e,n),g&&g.m(e,null),k(e,s),C&&C.m(e,null),k(e,o),S&&S.m(e,null),k(e,u),y&&y.m(e,null),k(e,a),M&&M.m(e,null),k(e,i),O&&O.m(e,null)},p(A,I){A[4].Desc_?f?f.p(A,I):(f=rl(A),f.c(),f.m(e,l)):f&&(f.d(1),f=null),A[4].Greenway?c?c.p(A,I):(c=ol(A),c.c(),c.m(e,t)):c&&(c.d(1),c=null),A[4].RouteType?m?m.p(A,I):(m=il(A),m.c(),m.m(e,n)):m&&(m.d(1),m=null),A[4].RouteNo?g?g.p(A,I):(g=al(A),g.c(),g.m(e,s)):g&&(g.d(1),g=null),A[4].RouteCat?C?C.p(A,I):(C=fl(A),C.c(),C.m(e,o)):C&&(C.d(1),C=null),A[4].OpenStatus?S?S.p(A,I):(S=ul(A),S.c(),S.m(e,u)):S&&(S.d(1),S=null),A[4].Surface?y?y.p(A,I):(y=cl(A),y.c(),y.m(e,a)):y&&(y.d(1),y=null),A[4].Quality?M?M.p(A,I):(M=$l(A),M.c(),M.m(e,i)):M&&(M.d(1),M=null),A[4].RoadClass?O?O.p(A,I):(O=pl(A),O.c(),O.m(e,null)):O&&(O.d(1),O=null)},d(A){A&&p(e),f&&f.d(),c&&c.d(),m&&m.d(),g&&g.d(),C&&C.d(),S&&S.d(),y&&y.d(),M&&M.d(),O&&O.d()}}}function kf(r){let e,l;return e=new fe({props:{$$slots:{default:[wf,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function vf(r){let e,l;const t=[j(Lt),{sourceLayer:Lt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[1],"line-width":4,"line-opacity":te(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[kf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&3?se(t,[o&0&&oe(j(Lt)),o&0&&{sourceLayer:Lt},t[2],t[3],o&2&&{paint:{"line-color":s[1],"line-width":4,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function yf(r){let e,l,t,n,s;function o(a){r[3](a)}let u={$$slots:{right:[bf],default:[gf]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),U.push(()=>W(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${Lt}.pmtiles`,$$slots:{default:[vf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],Y(()=>l=!1)),e.$set(f);const c={};i&33&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Lt="national_cycle_network";function Sf(r,e,l){let t,n=K.national_cycle_network,s=ke(Lt);Q(r,s,u=>l(0,t=u));function o(u){t=u,s.set(t)}return[t,n,s,o]}class Cf extends J{constructor(e){super(),Z(this,e,Sf,yf,V,{})}}function ml(r,e,l){const t=r.slice();return t[6]=e[l][0],t[7]=e[l][1],t[8]=e[l][2],t}function Lf(r){let e;return{c(){e=v("OS Pavement widths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Tf(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Mf(r){let e,l,t,n,s,o,u,a,i,f,c;return i=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[Tf]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`This shows the average and minimum pavement width (in meters) from
        Ordnance Survey. Because the shape of pavement may vary along a road,
        both average and minimum are reported. Measurements may be available for
        the left side of the road, the right, or both. The coloring shows the
        larger of the two average widths, and the line thickness has no meaning.
        Hover over a line to see if there's pavement on one or both sides of the
        road. (You won't be able to distinguish left and right though; use the
        OS Road basemap instead.)`,l=T(),t=L("p"),t.textContent=`Note these measurements are difficult to interpret near dual
        carriageways (shown as parallel lines).`,n=T(),s=L("p"),s.textContent="Data valid as of 1 January, 2024",o=T(),u=L("p"),a=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(i.$$.fragment),f=v(".")},m(m,g){$(m,e,g),$(m,l,g),$(m,t,g),$(m,n,g),$(m,s,g),$(m,o,g),$(m,u,g),k(u,a),b(i,u,null),k(u,f),c=!0},p(m,g){const C={};g&2048&&(C.$$scope={dirty:g,ctx:m}),i.$set(C)},i(m){c||(_(i.$$.fragment,m),c=!0)},o(m){d(i.$$.fragment,m),c=!1},d(m){m&&(p(e),p(l),p(t),p(n),p(s),p(o),p(u)),w(i)}}}function Nf(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Mf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function _l(r){let e,l;return e=new je({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:ne,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Pf(r){let e,l,t=Qt(r[5].angle+r[8])+"",n;return{c(){e=L("p"),l=new ft(!1),n=v(` side of the road: no pavement
          `),l.a=n},m(s,o){$(s,e,o),l.m(t,e),k(e,n)},p(s,o){o&32&&t!==(t=Qt(s[5].angle+s[8])+"")&&l.p(t)},d(s){s&&p(e)}}}function If(r){let e,l,t=Qt(r[5].angle+r[8])+"",n,s,o=r[6]+"",u,a,i,f=r[7]+"",c,m;return{c(){e=L("p"),l=new ft(!1),n=v(` side of the road:
            `),s=L("b"),u=v(o),a=v(`
            m average,
            `),i=L("b"),c=v(f),m=v(`
            m minimum
          `),l.a=n},m(g,C){$(g,e,C),l.m(t,e),k(e,n),k(e,s),k(s,u),k(e,a),k(e,i),k(i,c),k(e,m)},p(g,C){C&32&&t!==(t=Qt(g[5].angle+g[8])+"")&&l.p(t),C&32&&o!==(o=g[6]+"")&&B(u,o),C&32&&f!==(f=g[7]+"")&&B(c,f)},d(g){g&&p(e)}}}function gl(r){let e;function l(s,o){return s[6]?If:Pf}let t=l(r),n=t(r);return{c(){n.c(),e=Ce()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},d(s){s&&p(e),n.d(s)}}}function Of(r){let e,l=Te([[r[5].left_average,r[5].left_minimum,-90],[r[5].right_average,r[5].right_minimum,90]]),t=[];for(let n=0;n<2;n+=1)t[n]=gl(ml(r,l,n));return{c(){for(let n=0;n<2;n+=1)t[n].c();e=Ce()},m(n,s){for(let o=0;o<2;o+=1)t[o]&&t[o].m(n,s);$(n,e,s)},p(n,s){if(s&32){l=Te([[n[5].left_average,n[5].left_minimum,-90],[n[5].right_average,n[5].right_minimum,90]]);let o;for(o=0;o<2;o+=1){const u=ml(n,l,o);t[o]?t[o].p(u,s):(t[o]=gl(u),t[o].c(),t[o].m(e.parentNode,e))}for(;o<2;o+=1)t[o].d(1)}},d(n){n&&p(e),lt(t,n)}}}function Rf(r){let e,l;return e=new fe({props:{openOn:"hover",$$slots:{default:[Of,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&2080&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Df(r){let e,l;const t=[j(Tt),{sourceLayer:Tt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],r[2],r[1]),"line-width":ze,"line-opacity":te(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Rf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&oe(j(Tt)),o&0&&{sourceLayer:Tt},t[2],t[3],o&6&&{paint:{"line-color":we(["max",["number",["get","left_average"],0],["number",["get","right_average"],0]],s[2],s[1]),"line-width":ze,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Af(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[Nf],default:[Lf]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&_l(r);return s=new ge({props:{url:`pmtiles://${Yt()}/v1/${Tt}.pmtiles`,$$slots:{default:[Df]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],Y(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=_l(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&2049&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Tt="pavement_widths";function Ff(r){let e=Math.floor((r+22.5)%360/45);return["N","NE","E","SE","S","SW","W","NW","N"][e]}function Qt(r){return`${Ff(r)} <span style="display: inline-block; rotate: ${r}deg">⬆</span>`}function qf(r,e,l){let t,n=K.sequential_low_to_high,s=[0,2,4,6,8,13],o=ke(Tt);Q(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class zf extends J{constructor(e){super(),Z(this,e,qf,Af,V,{})}}function Bf(r){let e;return{c(){e=v("Propensity to Cycle Tool")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Hf(r){let e;return{c(){e=v("the PCT website")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function jf(r){let e;return{c(){e=v("2017 journal article")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Gf(r){let e,l,t,n,s,o,u,a,i,f,c;return u=new X({props:{href:"https://www.pct.bike",$$slots:{default:[Hf]},$$scope:{ctx:r}}}),i=new X({props:{href:"https://www.jtlu.org/index.php/jtlu/article/view/862",$$slots:{default:[jf]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`The PCT shows major links on the transport network on which there is
        high latent demand for cycling under scenarios of change, based on the
        "fastest" routes from CycleStreets. Counts approximate daily rush hour
        traffic levels.`,l=T(),t=L("p"),t.textContent=`Note this layer uses 2011 census data and outdated OpenStreetMap data.
        Please use this layer with caution.`,n=T(),s=L("p"),o=v("See "),h(u.$$.fragment),a=v(" and "),h(i.$$.fragment),f=v(" for details on methodology and data sources.")},m(m,g){$(m,e,g),$(m,l,g),$(m,t,g),$(m,n,g),$(m,s,g),k(s,o),b(u,s,null),k(s,a),b(i,s,null),k(s,f),c=!0},p(m,g){const C={};g&1024&&(C.$$scope={dirty:g,ctx:m}),u.$set(C);const S={};g&1024&&(S.$$scope={dirty:g,ctx:m}),i.$set(S)},i(m){c||(_(u.$$.fragment,m),_(i.$$.fragment,m),c=!0)},o(m){d(u.$$.fragment,m),d(i.$$.fragment,m),c=!1},d(m){m&&(p(e),p(l),p(t),p(n),p(s)),w(u),w(i)}}}function Ef(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Gf]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&1024&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function dl(r){let e,l,t,n,s,o,u,a;e=new je({props:{colorScale:r[1],limits:r[2]}});function i(g){r[6](g)}let f={legend:"Trip purpose",choices:[["pct_commute","Commuting"],["pct_school","School"]],inlineSmall:!0};r[0].tripPurpose!==void 0&&(f.value=r[0].tripPurpose),t=new un({props:f}),U.push(()=>W(t,"value",i));function c(g){r[7](g)}let m={label:"Scenario",choices:[["baseline","Baseline (2011)"],["gov_target","Government target (2025)"],["go_dutch","Go Dutch"]]};return r[0].scenario!==void 0&&(m.value=r[0].scenario),o=new ot({props:m}),U.push(()=>W(o,"value",c)),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),s=T(),h(o.$$.fragment)},m(g,C){b(e,g,C),$(g,l,C),b(t,g,C),$(g,s,C),b(o,g,C),a=!0},p(g,C){const S={};!n&&C&1&&(n=!0,S.value=g[0].tripPurpose,Y(()=>n=!1)),t.$set(S);const y={};!u&&C&1&&(u=!0,y.value=g[0].scenario,Y(()=>u=!1)),o.$set(y)},i(g){a||(_(e.$$.fragment,g),_(t.$$.fragment,g),_(o.$$.fragment,g),a=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(o.$$.fragment,g),a=!1},d(g){g&&(p(l),p(s)),w(e,g),w(t,g),w(o,g)}}}function Uf(r){let e,l=r[4](r[9])+"",t;return{c(){e=new ft(!1),t=Ce(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function Wf(r){let e,l;return e=new fe({props:{$$slots:{default:[Uf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Yf(r){let e,l;const t=[j(nt),{sourceLayer:nt},{paint:{"line-color":we(["get",r[0].scenario],r[2],r[1]),"line-width":ze,"line-opacity":te(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==nt?"visible":"none"}}];let n={$$slots:{default:[Wf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&oe(j(nt)),o&0&&{sourceLayer:nt},o&7&&{paint:{"line-color":we(["get",s[0].scenario],s[2],s[1]),"line-width":ze,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==nt?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Vf(r){let e,l=r[4](r[9])+"",t;return{c(){e=new ft(!1),t=Ce(),e.a=t},m(n,s){e.m(l,n,s),$(n,t,s)},p(n,s){s&512&&l!==(l=n[4](n[9])+"")&&e.p(l)},d(n){n&&(p(t),e.d())}}}function Jf(r){let e,l;return e=new fe({props:{$$slots:{default:[Vf,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&1536&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Zf(r){let e,l;const t=[j(at),{sourceLayer:at},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",r[0].scenario],r[2],r[1]),"line-width":ze,"line-opacity":te(1,.5)}},{layout:{visibility:r[0].show&&r[0].tripPurpose==at?"visible":"none"}}];let n={$$slots:{default:[Jf]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&oe(j(at)),o&0&&{sourceLayer:at},t[2],t[3],o&7&&{paint:{"line-color":we(["get",s[0].scenario],s[2],s[1]),"line-width":ze,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:s[0].show&&s[0].tripPurpose==at?"visible":"none"}}]):{};o&1024&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Qf(r){let e,l,t,n,s,o,u,a;function i(m){r[5](m)}let f={$$slots:{right:[Ef],default:[Bf]},$$scope:{ctx:r}};r[0].show!==void 0&&(f.checked=r[0].show),e=new re({props:f}),U.push(()=>W(e,"checked",i));let c=r[0].show&&dl(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${nt}.pmtiles`,$$slots:{default:[Yf]},$$scope:{ctx:r}}}),u=new ge({props:{url:`pmtiles://${me()}/v1/${at}.pmtiles`,$$slots:{default:[Zf]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),c&&c.c(),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment)},m(m,g){b(e,m,g),$(m,t,g),c&&c.m(m,g),$(m,n,g),b(s,m,g),$(m,o,g),b(u,m,g),a=!0},p(m,[g]){const C={};g&1024&&(C.$$scope={dirty:g,ctx:m}),!l&&g&1&&(l=!0,C.checked=m[0].show,Y(()=>l=!1)),e.$set(C),m[0].show?c?(c.p(m,g),g&1&&_(c,1)):(c=dl(m),c.c(),_(c,1),c.m(n.parentNode,n)):c&&(ie(),d(c,1,1,()=>{c=null}),ae());const S={};g&1025&&(S.$$scope={dirty:g,ctx:m}),s.$set(S);const y={};g&1025&&(y.$$scope={dirty:g,ctx:m}),u.$set(y)},i(m){a||(_(e.$$.fragment,m),_(c),_(s.$$.fragment,m),_(u.$$.fragment,m),a=!0)},o(m){d(e.$$.fragment,m),d(c),d(s.$$.fragment,m),d(u.$$.fragment,m),a=!1},d(m){m&&(p(t),p(n),p(o)),w(e,m),c&&c.d(m),w(s,m),w(u,m)}}}let nt="pct_commute",at="pct_school";function Kf(r){return r.show?`${r.tripPurpose}/${r.scenario}`:null}function Xf(r){let[e,l]=r.split("/");return{show:!0,tripPurpose:e,scenario:l}}function xf(r,e,l){let t,n=K.sequential_low_to_high,s=[0,50,100,500,1e3,2e3],u=dt("pct",{show:!1,tripPurpose:nt,scenario:"baseline"},Kf,Xf);Q(r,u,m=>l(0,t=m));function a(m){let g=m.baseline,C=m.gov_target,S=m.go_dutch,y=`<h2>Trip purpose: ${t.tripPurpose==nt?"commuting":"school"}</h2>`;if(y+=`<p>Baseline (2011): <b>${g.toLocaleString()}</b></p>`,g==0)y+=`<p>Government target (2025): <b>${C.toLocaleString()}</b></p>`,y+=`<p>Go Dutch: <b>${S.toLocaleString()}</b></p>`;else{let M=(C/g).toFixed(1),O=(S/g).toFixed(1);y+=`<p>Government target (2025): ${C.toLocaleString()} (<b>${M}x</b> of baseline)</p>`,y+=`<p>Go Dutch: ${S.toLocaleString()} (<b>${O}x</b> of baseline)</p>`}return y}function i(m){r.$$.not_equal(t.show,m)&&(t.show=m,u.set(t))}function f(m){r.$$.not_equal(t.tripPurpose,m)&&(t.tripPurpose=m,u.set(t))}function c(m){r.$$.not_equal(t.scenario,m)&&(t.scenario=m,u.set(t))}return[t,n,s,u,a,i,f,c]}class eu extends J{constructor(e){super(),Z(this,e,xf,Qf,V,{})}}function tu(r){let e;return{c(){e=v("OS Speeds")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function nu(r){let e;return{c(){e=v("Basemap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function lu(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function su(r){let e,l,t,n,s,o,u,a,i,f,c,m;return t=new X({props:{href:"https://basemap.co.uk/speed-data",$$slots:{default:[nu]},$$scope:{ctx:r}}}),f=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[lu]},$$scope:{ctx:r}}}),{c(){e=L("p"),l=v("The average speed data is collected over a six-month period by "),h(t.$$.fragment),n=v(` from 135,000 vehicle telematic systems and provided through
        Ordnance Survey. The averages are grouped by different time periods for weekdays
        and weekends. This map shows the highest average.`),s=T(),o=L("p"),o.textContent="Data valid as of 1 September, 2023",u=T(),a=L("p"),i=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(f.$$.fragment),c=v(".")},m(g,C){$(g,e,C),k(e,l),b(t,e,null),k(e,n),$(g,s,C),$(g,o,C),$(g,u,C),$(g,a,C),k(a,i),b(f,a,null),k(a,c),m=!0},p(g,C){const S={};C&512&&(S.$$scope={dirty:C,ctx:g}),t.$set(S);const y={};C&512&&(y.$$scope={dirty:C,ctx:g}),f.$set(y)},i(g){m||(_(t.$$.fragment,g),_(f.$$.fragment,g),m=!0)},o(g){d(t.$$.fragment,g),d(f.$$.fragment,g),m=!1},d(g){g&&(p(e),p(s),p(o),p(u),p(a)),w(t),w(f)}}}function ru(r){let e,l,t;return l=new $e({props:{$$slots:{default:[su]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function hl(r){let e,l,t,n,s;e=new je({props:{colorScale:r[1],limits:r[2]}});function o(a){r[6](a)}let u={legend:"Show speed types",choices:[["indicative_mph","Posted speed limit"],["highest_mph","Highest measured average speed"]],inlineSmall:!0};return r[0].kind!==void 0&&(u.value=r[0].kind),t=new un({props:u}),U.push(()=>W(t,"value",o)),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(a,i){b(e,a,i),$(a,l,i),b(t,a,i),s=!0},p(a,i){const f={};!n&&i&1&&(n=!0,f.value=a[0].kind,Y(()=>n=!1)),t.$set(f)},i(a){s||(_(e.$$.fragment,a),_(t.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),s=!1},d(a){a&&p(l),w(e,a),w(t,a)}}}function ou(r){let e,l,t=r[8].indicative_mph+"",n,s,o,u,a,i=r[8].highest_mph+"",f,c,m=r[4][r[8].highest_description]+"",g,C;return{c(){e=L("p"),l=v("Posted speed limit: "),n=v(t),s=v(" mph"),o=T(),u=L("p"),a=v("Highest average speed: "),f=v(i),c=v(" mph (during "),g=v(m),C=v(")")},m(S,y){$(S,e,y),k(e,l),k(e,n),k(e,s),$(S,o,y),$(S,u,y),k(u,a),k(u,f),k(u,c),k(u,g),k(u,C)},p(S,y){y&256&&t!==(t=S[8].indicative_mph+"")&&B(n,t),y&256&&i!==(i=S[8].highest_mph+"")&&B(f,i),y&256&&m!==(m=S[4][S[8].highest_description]+"")&&B(g,m)},d(S){S&&(p(e),p(o),p(u))}}}function iu(r){let e,l;return e=new fe({props:{$$slots:{default:[ou,({props:t})=>({8:t}),({props:t})=>t?256:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&768&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function au(r){let e,l;const t=[j(Mt),{sourceLayer:Mt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get",r[0].kind],r[2],r[1]),"line-width":ze,"line-opacity":te(1,.5)}},{layout:{visibility:r[0].show?"visible":"none"}}];let n={$$slots:{default:[iu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&oe(j(Mt)),o&0&&{sourceLayer:Mt},t[2],t[3],o&7&&{paint:{"line-color":we(["get",s[0].kind],s[2],s[1]),"line-width":ze,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:s[0].show?"visible":"none"}}]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function fu(r){let e,l,t,n,s,o;function u(f){r[5](f)}let a={$$slots:{right:[ru],default:[tu]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0].show&&hl(r);return s=new ge({props:{url:`pmtiles://${Yt()}/v1/${Mt}.pmtiles`,$$slots:{default:[au]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&512&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,Y(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=hl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&513&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Mt="road_speeds";function uu(r){return r.show?r.kind:null}function cu(r){return{show:!0,kind:r}}function $u(r,e,l){let t,n=K.sequential_low_to_high,s=[0,20,30,40,50,90],u=dt(Mt,{show:!1,kind:"indicative_mph"},uu,cu);Q(r,u,c=>l(0,t=c));let a={mf4to7:"Monday-Friday 4-7am",mf7to9:"Monday-Friday 7-9am",mf9to12:"Monday-Friday 9am-12pm",mf12to14:"Monday-Friday 12-2pm",mf14to16:"Monday-Friday 2-4pm",mf16to19:"Monday-Friday 4-7pm",mf19to22:"Monday-Friday 7-10pm",mf22to4:"Monday-Friday 10pm-4am",ss4to7:"Saturday-Sunday 4-7am",ss7to10:"Saturday-Sunday 7-10am",ss10to14:"Saturday-Sunday 10am-2pm",ss14to19:"Saturday-Sunday 2-7pm",ss19to22:"Saturday-Sunday 7-10pm",ss22to4:"Saturday-Sunday 10pm-4am"};function i(c){r.$$.not_equal(t.show,c)&&(t.show=c,u.set(t))}function f(c){r.$$.not_equal(t.kind,c)&&(t.kind=c,u.set(t))}return[t,n,s,u,a,i,f]}class pu extends J{constructor(e){super(),Z(this,e,$u,fu,V,{})}}function mu(r){let e;return{c(){e=v("OS Road widths")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function _u(r){let e;return{c(){e=v(`Public Sector Geospatial Agreement
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function gu(r){let e,l,t,n,s,o,u,a,i;return u=new X({props:{href:"https://www.ordnancesurvey.co.uk/documents/licensing/psga-member-licence.pdf",$$slots:{default:[_u]},$$scope:{ctx:r}}}),{c(){e=L("p"),e.textContent=`This is average and minimum road carriageway width (in meters) from
        Ordnance Survey. The coloring shows the average width, and the line
        thickness has no meaning. Be careful interpreting the data near dual
        carriageways and crossing islands.`,l=T(),t=L("p"),t.textContent="Data valid as of 1 September, 2023",n=T(),s=L("p"),o=v(`License: Contains OS data © Crown copyright and database right
        2023. Made available under the `),h(u.$$.fragment),a=v(".")},m(f,c){$(f,e,c),$(f,l,c),$(f,t,c),$(f,n,c),$(f,s,c),k(s,o),b(u,s,null),k(s,a),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),u.$set(m)},i(f){i||(_(u.$$.fragment,f),i=!0)},o(f){d(u.$$.fragment,f),i=!1},d(f){f&&(p(e),p(l),p(t),p(n),p(s)),w(u)}}}function du(r){let e,l,t;return l=new $e({props:{$$slots:{default:[gu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function bl(r){let e,l;return e=new je({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:ne,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function hu(r){let e,l,t,n=r[5].average+"",s,o,u,a,i,f,c=r[5].minimum+"",m,g;return{c(){e=L("p"),l=v("Average width: "),t=L("b"),s=v(n),o=v(`
        meters`),u=T(),a=L("p"),i=v("Minimum width: "),f=L("b"),m=v(c),g=v(`
        meters`)},m(C,S){$(C,e,S),k(e,l),k(e,t),k(t,s),k(e,o),$(C,u,S),$(C,a,S),k(a,i),k(a,f),k(f,m),k(a,g)},p(C,S){S&32&&n!==(n=C[5].average+"")&&B(s,n),S&32&&c!==(c=C[5].minimum+"")&&B(m,c)},d(C){C&&(p(e),p(u),p(a))}}}function bu(r){let e,l;return e=new fe({props:{$$slots:{default:[hu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function wu(r){let e,l;const t=[j(Nt),{sourceLayer:Nt},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":we(["get","average"],r[2],r[1]),"line-width":ze,"line-opacity":te(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[bu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new be({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&oe(j(Nt)),o&0&&{sourceLayer:Nt},t[2],t[3],o&6&&{paint:{"line-color":we(["get","average"],s[2],s[1]),"line-width":ze,"line-opacity":te(1,.5)}},o&1&&{layout:{visibility:s[0]?"visible":"none"}}]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function ku(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[du],default:[mu]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&bl(r);return s=new ge({props:{url:`pmtiles://${Yt()}/v1/${Nt}.pmtiles`,$$slots:{default:[wu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],Y(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=bl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&65&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Nt="road_widths";function vu(r,e,l){let t,n=K.sequential_low_to_high,s=[0,5,10,15,20,100],o=ke(Nt);Q(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class yu extends J{constructor(e){super(),Z(this,e,vu,ku,V,{})}}function Su(r){let e,l,t;return e=new Ae({props:{color:K.trams}}),{c(){h(e.$$.fragment),l=v(`
  Trams`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:ne,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Cu(r){let e,l,t,n;return t=new tt({}),{c(){e=L("p"),e.textContent=`This shows all trams and light rail lines, according to OpenStreetMap
        (as of 7 February 2024). When these are close to a scheme, interactions
        between the modes must be designed carefully.`,l=T(),h(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),b(t,s,o),n=!0},p:ne,i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function Lu(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Cu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&8&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Tu(r){let e,l;const t=[j(Pt),{sourceLayer:Pt},{paint:{"line-color":K.trams,"line-width":5,"line-opacity":te(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0},{hoverCursor:"pointer"}];let n={};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new be({props:n}),e.$on("click",Nu),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?se(t,[o&0&&oe(j(Pt)),o&0&&{sourceLayer:Pt},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5],t[6]]):{};e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Mu(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[Lu],default:[Su]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),U.push(()=>W(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${Pt}.pmtiles`,$$slots:{default:[Tu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&8&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],Y(()=>l=!1)),e.$set(f);const c={};i&9&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Pt="trams";function Nu(r){window.open(`http://openstreetmap.org/way/${r.detail.features[0].properties.osm_id}`,"_blank")}function Pu(r,e,l){let t,n=ke(Pt);Q(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class Iu extends J{constructor(e){super(),Z(this,e,Pu,Mu,V,{})}}function Ou(r){let e;return{c(){e=v("Bus stops")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ru(r){let e;return{c(){e=v(`Bus Open Data Service
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Du(r){let e,l,t,n,s,o,u,a,i;return t=new X({props:{href:"https://data.bus-data.dft.gov.uk",$$slots:{default:[Ru]},$$scope:{ctx:r}}}),a=new Fe({}),{c(){e=L("p"),l=v("Data from the "),h(t.$$.fragment),n=v(`, as of 7 February 2024. To calculate frequency, every
        scheduled arrival time per stop is considered, grouped by day of the
        week. The total daily count is just the number of scheduled arrivals for
        a day. The peak hour frequency is the highest number of buses in any one
        hour window. That window might not lined up perfectly on the hour -- a
        peak hour might occur from 8:25 to 9:25,for example.`),s=T(),o=L("p"),o.textContent=`There are known limitations with this layer, so please use caution when
        using these numbers. Some stops may not be shown at all. Frequency could
        be over- or under-counted, due to exceptions to the regular daily
        schedule of a service.`,u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),k(e,l),b(t,e,null),k(e,n),$(f,s,c),$(f,o,c),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),t.$set(m)},i(f){i||(_(t.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(s),p(o),p(u)),w(t),w(a,f)}}}function Au(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Du]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function wl(r){let e,l,t,n;return t=new je({props:{colorScale:r[1],limits:r[2]}}),{c(){e=L("p"),e.textContent="Peak hourly frequency:",l=T(),h(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),b(t,s,o),n=!0},p:ne,i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function Fu(r){let e,l,t,n=r[5].stop_name+"",s,o,u,a,i,f=r[5].peak+"",c,m,g,C,S,y=r[5].peak_description+"",M,O,A,I,N,R=r[5].total+"",F,P,z=r[5].total_description+"",x,E;return{c(){e=L("p"),l=v("Stop name: "),t=L("b"),s=v(n),o=T(),u=L("p"),a=v("Peak: "),i=L("b"),c=v(f),m=v(`
        buses during the busiest hour of any day`),g=T(),C=L("p"),S=v("The peak hour is "),M=v(y),O=T(),A=L("p"),I=v("Total buses per day: "),N=L("b"),F=v(R),P=v(`
        (for `),x=v(z),E=v(", the busiest day of the week)")},m(q,D){$(q,e,D),k(e,l),k(e,t),k(t,s),$(q,o,D),$(q,u,D),k(u,a),k(u,i),k(i,c),k(u,m),$(q,g,D),$(q,C,D),k(C,S),k(C,M),$(q,O,D),$(q,A,D),k(A,I),k(A,N),k(N,F),k(A,P),k(A,x),k(A,E)},p(q,D){D&32&&n!==(n=q[5].stop_name+"")&&B(s,n),D&32&&f!==(f=q[5].peak+"")&&B(c,f),D&32&&y!==(y=q[5].peak_description+"")&&B(M,y),D&32&&R!==(R=q[5].total+"")&&B(F,R),D&32&&z!==(z=q[5].total_description+"")&&B(x,z)},d(q){q&&(p(e),p(o),p(u),p(g),p(C),p(O),p(A))}}}function qu(r){let e,l;return e=new fe({props:{$$slots:{default:[Fu,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function zu(r){let e,l;const t=[j(It),{sourceLayer:It},{paint:{"circle-color":we(["get","peak"],r[2],r[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[qu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new mt({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&oe(j(It)),o&0&&{sourceLayer:It},o&6&&{paint:{"circle-color":we(["get","peak"],s[2],s[1]),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&64&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Bu(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[Au],default:[Ou]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&wl(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${It}.pmtiles`,$$slots:{default:[zu]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],Y(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=wl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&65&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let It="bus_stops";function Hu(r,e,l){let t,n=K.sequential_low_to_high,s=[0,3,10,20,30,100],o=ke(It);Q(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class ju extends J{constructor(e){super(),Z(this,e,Hu,Bu,V,{})}}function Gu(r){let e;return{c(){e=v("Crossings")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Eu(r){let e;return{c(){e=v("crossing")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Uu(r){let e,l,t,n,s,o,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Key:crossing",$$slots:{default:[Eu]},$$scope:{ctx:r}}}),o=new tt({}),{c(){e=L("p"),l=v("This shows "),h(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),k(e,l),b(t,e,null),k(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&32&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function Wu(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Uu]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function kl(r){let e,l;return e=new xt({props:{rows:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:ne,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Yu(r){let e,l=vl(r[4])+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&16&&l!==(l=vl(n[4])+"")&&B(t,l)},d(n){n&&p(e)}}}function Vu(r){let e,l;return e=new fe({props:{$$slots:{default:[Yu,({props:t})=>({4:t}),({props:t})=>t?16:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&48&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Ju(r){let e,l;const t=[j(Ot),{sourceLayer:Ot},{paint:{"circle-color":et(["get","crossing"],{traffic_signals:K.signalized_crossing},K.other_crossing),"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,10]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[Vu]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new mt({props:n}),e.$on("click",Qu),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?se(t,[o&0&&oe(j(Ot)),o&0&&{sourceLayer:Ot},t[2],o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Zu(r){let e,l,t,n,s,o;function u(f){r[3](f)}let a={$$slots:{right:[Wu],default:[Gu]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&kl(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${Ot}.pmtiles`,$$slots:{default:[Ju]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&32&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],Y(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=kl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&33&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Ot="crossings";function vl(r){return{no:"Location where crossing is impossible/illegal but where there is a clear desire line to cross",traffic_signals:"Signalised crossing",marked:"Crossing with no traffic signals",uncontrolled:"Crossing with no traffic signals",unmarked:"Crossing with no markings or signals",zebra:"Zebra crossing",island:"Crossing with an island",informal:"Informal crossing with an obvious desire line, but no official infrastructure to support it"}[r.crossing]??`Unknown crossing type (${r.crossing})`}function Qu(r){window.open(`http://openstreetmap.org/node/${r.detail.features[0].properties.osm_id}`,"_blank")}function Ku(r,e,l){let t,n=ke(Ot);Q(r,n,u=>l(0,t=u));let s=[["Signalized",K.signalized_crossing],["Other",K.other_crossing]];function o(u){t=u,n.set(t)}return[t,n,s,o]}class Xu extends J{constructor(e){super(),Z(this,e,Ku,Zu,V,{})}}function xu(r){let e;return{c(){e=v("Gradients")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ec(r){let e;return{c(){e=v("OS Terrain 50")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function tc(r){let e,l,t,n,s,o,u,a,i,f,c,m,g;return u=new X({props:{href:"https://www.ordnancesurvey.co.uk/products/os-terrain-50",$$slots:{default:[ec]},$$scope:{ctx:r}}}),f=new Fe({}),m=new tt({}),{c(){e=L("p"),e.textContent=`This layer shows the steepness of roads, with the arrows pointing
        uphill. You have to zoom in to see all roads.`,l=T(),t=L("p"),t.textContent=`Note the gradient may be incorrect near bridges and tunnels, depending
        on the underlying Digital Elevation Model used.`,n=T(),s=L("p"),o=v("This layer is built from "),h(u.$$.fragment),a=v(` and roads from OpenStreetMap. The data is valid as of 18
        February 2024.`),i=T(),h(f.$$.fragment),c=T(),h(m.$$.fragment)},m(C,S){$(C,e,S),$(C,l,S),$(C,t,S),$(C,n,S),$(C,s,S),k(s,o),b(u,s,null),k(s,a),$(C,i,S),b(f,C,S),$(C,c,S),b(m,C,S),g=!0},p(C,S){const y={};S&64&&(y.$$scope={dirty:S,ctx:C}),u.$set(y)},i(C){g||(_(u.$$.fragment,C),_(f.$$.fragment,C),_(m.$$.fragment,C),g=!0)},o(C){d(u.$$.fragment,C),d(f.$$.fragment,C),d(m.$$.fragment,C),g=!1},d(C){C&&(p(e),p(l),p(t),p(n),p(s),p(i),p(c)),w(u),w(f,C),w(m,C)}}}function nc(r){let e,l,t;return l=new $e({props:{$$slots:{default:[tc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&64&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function yl(r){let e,l;return e=new je({props:{colorScale:r[1],limits:r[2]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:ne,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function lc(r){let e,l,t,n=Math.abs(r[5].gradient)/100+"",s,o;return{c(){e=L("p"),l=v("Gradient: "),t=L("b"),s=v(n),o=v(`
        %`)},m(u,a){$(u,e,a),k(e,l),k(e,t),k(t,s),k(e,o)},p(u,a){a&32&&n!==(n=Math.abs(u[5].gradient)/100+"")&&B(s,n)},d(u){u&&p(e)}}}function sc(r){let e,l;return e=new fe({props:{$$slots:{default:[lc,({props:t})=>({5:t}),({props:t})=>t?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&96&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function rc(r){let e,l,t,n;const s=[j(Qe),{sourceLayer:Qe},{manageHoverState:!0},{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],r[2],r[1]),"line-width":ze,"line-opacity":te(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}}];let o={$$slots:{default:[sc]},$$scope:{ctx:r}};for(let i=0;i<s.length;i+=1)o=le(o,s[i]);e=new be({props:o});const u=[j(Qe+"_arrows"),{sourceLayer:Qe},{minzoom:12},{filter:[">",["abs",["get","gradient"]],300]},{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:r[0]?"visible":"none"}}];let a={};for(let i=0;i<u.length;i+=1)a=le(a,u[i]);return t=new $n({props:a}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),n=!0},p(i,f){const c=f&7?se(s,[f&0&&oe(j(Qe)),f&0&&{sourceLayer:Qe},s[2],f&6&&{paint:{"line-color":we(["/",["abs",["get","gradient"]],100],i[2],i[1]),"line-width":ze,"line-opacity":te(1,.5)}},f&1&&{layout:{visibility:i[0]?"visible":"none"}}]):{};f&64&&(c.$$scope={dirty:f,ctx:i}),e.$set(c);const m=f&1?se(u,[f&0&&oe(j(Qe+"_arrows")),f&0&&{sourceLayer:Qe},u[2],u[3],f&1&&{layout:{"icon-image":"chevron","icon-size":1,"symbol-placement":"line","symbol-spacing":50,"icon-allow-overlap":!0,"icon-rotate":["case",["<",["get","gradient"],0],180,0],visibility:i[0]?"visible":"none"}}]):{};t.$set(m)},i(i){n||(_(e.$$.fragment,i),_(t.$$.fragment,i),n=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),n=!1},d(i){i&&p(l),w(e,i),w(t,i)}}}function oc(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[nc],default:[xu]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&yl(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${Qe}.pmtiles`,$$slots:{default:[rc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&64&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],Y(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=yl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&65&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Qe="gradient";function ic(r,e,l){let t,n=K.gradient_flat_to_steep,s=[0,3,5,8,10,20,100],o=ke(Qe);Q(r,o,a=>l(0,t=a));function u(a){t=a,o.set(t)}return[t,n,s,o,u]}class ac extends J{constructor(e){super(),Z(this,e,ic,oc,V,{})}}function fc(r){let e,l,t;return{c(){e=L("img"),t=v(`
  Cycle parking`),Jt(e.src,l=ys)||G(e,"src",l),G(e,"alt","a logo representing cycle parking")},m(n,s){$(n,e,s),$(n,t,s)},p:ne,d(n){n&&(p(e),p(t))}}}function uc(r){let e;return{c(){e=v("OpenStreetMap")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function cc(r){let e;return{c(){e=v("OpenStreetMap Carto")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function $c(r){let e,l,t,n,s,o,u,a,i,f,c;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dbicycle_parking",$$slots:{default:[uc]},$$scope:{ctx:r}}}),a=new X({props:{href:"https://github.com/gravitystorm/openstreetmap-carto",$$slots:{default:[cc]},$$scope:{ctx:r}}}),f=new tt({}),{c(){e=L("p"),l=v("Cycle parking, according to "),h(t.$$.fragment),n=v(` (as of 9 August 2023). The type of parking, public/private
        access, and whether it's covered are not shown.`),s=T(),o=L("p"),u=v("Icon from "),h(a.$$.fragment),i=T(),h(f.$$.fragment)},m(m,g){$(m,e,g),k(e,l),b(t,e,null),k(e,n),$(m,s,g),$(m,o,g),k(o,u),b(a,o,null),$(m,i,g),b(f,m,g),c=!0},p(m,g){const C={};g&16&&(C.$$scope={dirty:g,ctx:m}),t.$set(C);const S={};g&16&&(S.$$scope={dirty:g,ctx:m}),a.$set(S)},i(m){c||(_(t.$$.fragment,m),_(a.$$.fragment,m),_(f.$$.fragment,m),c=!0)},o(m){d(t.$$.fragment,m),d(a.$$.fragment,m),d(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(s),p(o),p(i)),w(t),w(a),w(f,m)}}}function pc(r){let e,l,t;return l=new $e({props:{$$slots:{default:[$c]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function mc(r){let e,l,t,n=(r[3].capacity??"unknown")+"",s;return{c(){e=L("p"),l=v("Capacity: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&8&&n!==(n=(o[3].capacity??"unknown")+"")&&B(s,n)},d(o){o&&p(e)}}}function _c(r){let e,l;return e=new fe({props:{$$slots:{default:[mc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function gc(r){let e,l;const t=[j(Rt),{sourceLayer:Rt},{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[_c]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new $n({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?se(t,[o&0&&oe(j(Rt)),o&0&&{sourceLayer:Rt},o&1&&{layout:{"icon-image":"cycle_parking","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function dc(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[pc],default:[fc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),U.push(()=>W(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${Rt}.pmtiles`,$$slots:{default:[gc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],Y(()=>l=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Rt="cycle_parking";function hc(r,e,l){let t,n=ke(Rt);Q(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class bc extends J{constructor(e){super(),Z(this,e,hc,dc,V,{})}}function wc(r){let e;return{c(){e=v("Education")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function kc(r){let e,l,t,n;return t=new tt({}),{c(){e=L("p"),e.textContent=`This shows different places of education according to OpenStreetMap (as
        of 07 February 2024).`,l=T(),h(t.$$.fragment)},m(s,o){$(s,e,o),$(s,l,o),b(t,s,o),n=!0},p:ne,i(s){n||(_(t.$$.fragment,s),n=!0)},o(s){d(t.$$.fragment,s),n=!1},d(s){s&&(p(e),p(l)),w(t,s)}}}function vc(r){let e,l,t;return l=new $e({props:{$$slots:{default:[kc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&2048&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Sl(r){let e,l,t;return l=new st({props:{$$slots:{default:[Lc]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(l.$$.fragment),_e(e,"border","1px solid black"),_e(e,"padding","8px")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&2049&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function yc(r){let e,l,t;return e=new Ae({props:{color:K.education.schools}}),{c(){h(e.$$.fragment),l=v(`
        Schools`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:ne,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Sc(r){let e,l,t;return e=new Ae({props:{color:K.education.colleges}}),{c(){h(e.$$.fragment),l=v(`
        Colleges`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:ne,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Cc(r){let e,l,t;return e=new Ae({props:{color:K.education.universities}}),{c(){h(e.$$.fragment),l=v(`
        Universities`)},m(n,s){b(e,n,s),$(n,l,s),t=!0},p:ne,i(n){t||(_(e.$$.fragment,n),t=!0)},o(n){d(e.$$.fragment,n),t=!1},d(n){n&&p(l),w(e,n)}}}function Lc(r){let e,l,t,n,s,o,u,a,i;function f(y){r[4](y)}let c={$$slots:{default:[yc]},$$scope:{ctx:r}};r[0].school!==void 0&&(c.checked=r[0].school),e=new re({props:c}),U.push(()=>W(e,"checked",f));function m(y){r[5](y)}let g={$$slots:{default:[Sc]},$$scope:{ctx:r}};r[0].college!==void 0&&(g.checked=r[0].college),n=new re({props:g}),U.push(()=>W(n,"checked",m));function C(y){r[6](y)}let S={$$slots:{default:[Cc]},$$scope:{ctx:r}};return r[0].university!==void 0&&(S.checked=r[0].university),u=new re({props:S}),U.push(()=>W(u,"checked",C)),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),o=T(),h(u.$$.fragment)},m(y,M){b(e,y,M),$(y,t,M),b(n,y,M),$(y,o,M),b(u,y,M),i=!0},p(y,M){const O={};M&2048&&(O.$$scope={dirty:M,ctx:y}),!l&&M&1&&(l=!0,O.checked=y[0].school,Y(()=>l=!1)),e.$set(O);const A={};M&2048&&(A.$$scope={dirty:M,ctx:y}),!s&&M&1&&(s=!0,A.checked=y[0].college,Y(()=>s=!1)),n.$set(A);const I={};M&2048&&(I.$$scope={dirty:M,ctx:y}),!a&&M&1&&(a=!0,I.checked=y[0].university,Y(()=>a=!1)),u.$set(I)},i(y){i||(_(e.$$.fragment,y),_(n.$$.fragment,y),_(u.$$.fragment,y),i=!0)},o(y){d(e.$$.fragment,y),d(n.$$.fragment,y),d(u.$$.fragment,y),i=!1},d(y){y&&(p(t),p(o)),w(e,y),w(n,y),w(u,y)}}}function Tc(r){let e,l=(r[10].name??"Unnamed institution")+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&1024&&l!==(l=(n[10].name??"Unnamed institution")+"")&&B(t,l)},d(n){n&&p(e)}}}function Mc(r){let e,l;return e=new fe({props:{$$slots:{default:[Tc,({props:t})=>({10:t}),({props:t})=>t?1024:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&3072&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Nc(r){let e,l;const t=[j(Dt),{sourceLayer:Dt},{paint:{"fill-color":et(["get","type"],{school:K.education.schools,college:K.education.colleges,university:K.education.universities},"grey"),"fill-opacity":te(.7,1)}},{layout:{visibility:r[0].show?"visible":"none"}},{filter:r[2](r[0])},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[Mc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new He({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&5?se(t,[o&0&&oe(j(Dt)),o&0&&{sourceLayer:Dt},t[2],o&1&&{layout:{visibility:s[0].show?"visible":"none"}},o&5&&{filter:s[2](s[0])},t[5],t[6]]):{};o&2048&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Pc(r){let e,l,t,n,s,o;function u(f){r[3](f)}let a={$$slots:{right:[vc],default:[wc]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0].show&&Sl(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${Dt}.pmtiles`,$$slots:{default:[Nc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&2048&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,Y(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=Sl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&2049&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Dt="education";function Ic(r){return{show:!0,school:r.includes("school"),college:r.includes("college"),university:r.includes("university")}}function Oc(r,e,l){let t,n=["school","college","university"],s={show:!1,school:!0,college:!0,university:!0};function o(g){return g.show?n.filter(C=>g[C]).join(","):null}let u=dt(Dt,s,o,Ic);Q(r,u,g=>l(0,t=g));function a(g){let C=n.filter(S=>g[S]);return["in",["get","type"],["literal",C]]}function i(g){r.$$.not_equal(t.show,g)&&(t.show=g,u.set(t))}function f(g){r.$$.not_equal(t.school,g)&&(t.school=g,u.set(t))}function c(g){r.$$.not_equal(t.college,g)&&(t.college=g,u.set(t))}function m(g){r.$$.not_equal(t.university,g)&&(t.university=g,u.set(t))}return[t,u,a,i,f,c,m]}class Rc extends J{constructor(e){super(),Z(this,e,Oc,Pc,V,{})}}function Dc(r){let e,l,t,n;return e=new Ae({props:{color:r[4]}}),{c(){h(e.$$.fragment),l=T(),t=v(r[2])},m(s,o){b(e,s,o),$(s,l,o),$(s,t,o),n=!0},p(s,o){(!n||o&4)&&B(t,s[2])},i(s){n||(_(e.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),n=!1},d(s){s&&(p(l),p(t)),w(e,s)}}}function Ac(r){let e;const l=r[6].default,t=ut(l,r,r[8],null);return{c(){t&&t.c()},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&256)&&ct(t,l,n,n[8],e?pt(l,n[8],s,null):$t(n[8]),null)},i(n){e||(_(t,n),e=!0)},o(n){d(t,n),e=!1},d(n){t&&t.d(n)}}}function Fc(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Ac]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&256&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function qc(r){let e,l=(r[9].name??`Unnamed ${r[1]}`)+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&514&&l!==(l=(n[9].name??`Unnamed ${n[1]}`)+"")&&B(t,l)},d(n){n&&p(e)}}}function zc(r){let e,l;return e=new fe({props:{$$slots:{default:[qc,({props:t})=>({9:t}),({props:t})=>t?512:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&770&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Bc(r){let e,l;const t=[j(r[0]),{sourceLayer:r[0]},{paint:{"fill-color":r[4],"fill-opacity":te(.7,1)}},{layout:{visibility:r[3]?"visible":"none"}},{manageHoverState:!0},{eventsIfTopMost:!0}];let n={$$slots:{default:[zc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new He({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&25?se(t,[o&1&&oe(j(s[0])),o&1&&{sourceLayer:s[0]},o&16&&{paint:{"fill-color":s[4],"fill-opacity":te(.7,1)}},o&8&&{layout:{visibility:s[3]?"visible":"none"}},t[4],t[5]]):{};o&258&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function Hc(r){let e,l,t,n,s;function o(a){r[7](a)}let u={$$slots:{right:[Fc],default:[Dc]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.checked=r[3]),e=new re({props:u}),U.push(()=>W(e,"checked",o)),n=new ge({props:{url:`pmtiles://${me()}/v1/${r[0]}.pmtiles`,$$slots:{default:[Bc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&260&&(f.$$scope={dirty:i,ctx:a}),!l&&i&8&&(l=!0,f.checked=a[3],Y(()=>l=!1)),e.$set(f);const c={};i&1&&(c.url=`pmtiles://${me()}/v1/${a[0]}.pmtiles`),i&267&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}function jc(r,e,l){let t,{$$slots:n={},$$scope:s}=e,{name:o}=e,{singularNoun:u}=e,{pluralNoun:a}=e,i=K[o],f=ke(o);Q(r,f,m=>l(3,t=m));function c(m){t=m,f.set(t)}return r.$$set=m=>{"name"in m&&l(0,o=m.name),"singularNoun"in m&&l(1,u=m.singularNoun),"pluralNoun"in m&&l(2,a=m.pluralNoun),"$$scope"in m&&l(8,s=m.$$scope)},[o,u,a,t,i,f,n,c,s]}class _s extends J{constructor(e){super(),Z(this,e,jc,Hc,V,{name:0,singularNoun:1,pluralNoun:2})}}function Gc(r){let e;return{c(){e=v("hospital")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Ec(r){let e,l,t,n,s,o,u;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:amenity%3Dhospital",$$slots:{default:[Gc]},$$scope:{ctx:r}}}),o=new tt({}),{c(){e=L("p"),l=v("This shows "),h(t.$$.fragment),n=v(` data from OpenStreetMap (as of 9 August 2023). It doesn't include
    outpatient clinics or individual doctor's offices.`),s=T(),h(o.$$.fragment)},m(a,i){$(a,e,i),k(e,l),b(t,e,null),k(e,n),$(a,s,i),b(o,a,i),u=!0},p(a,i){const f={};i&1&&(f.$$scope={dirty:i,ctx:a}),t.$set(f)},i(a){u||(_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(e),p(s)),w(t),w(o,a)}}}function Uc(r){let e,l;return e=new _s({props:{name:"hospitals",singularNoun:"hospital",pluralNoun:"Hospitals",$$slots:{default:[Ec]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}class Wc extends J{constructor(e){super(),Z(this,e,null,Uc,V,{})}}function Yc(r){let e,l,t;return{c(){e=L("img"),t=v(`
  Railway Stations`),Jt(e.src,l=Ss)||G(e,"src",l),G(e,"alt","A logo representing a train")},m(n,s){$(n,e,s),$(n,t,s)},p:ne,d(n){n&&(p(e),p(t))}}}function Vc(r){let e;return{c(){e=v("railway station")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Jc(r){let e;return{c(){e=v(`National Rail
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Zc(r){let e,l,t,n,s,o,u,a,i,f,c,m;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:railway%3Dstation",$$slots:{default:[Vc]},$$scope:{ctx:r}}}),a=new X({props:{href:"https://www.nationalrail.co.uk/",$$slots:{default:[Jc]},$$scope:{ctx:r}}}),c=new tt({}),{c(){e=L("p"),l=v("This shows "),h(t.$$.fragment),n=v(" data from OpenStreetMap (as of 9 August 2023)."),s=T(),o=L("p"),u=v("Icon from "),h(a.$$.fragment),i=v(". (Note that not all stations shown are National Rail.)"),f=T(),h(c.$$.fragment)},m(g,C){$(g,e,C),k(e,l),b(t,e,null),k(e,n),$(g,s,C),$(g,o,C),k(o,u),b(a,o,null),k(o,i),$(g,f,C),b(c,g,C),m=!0},p(g,C){const S={};C&16&&(S.$$scope={dirty:C,ctx:g}),t.$set(S);const y={};C&16&&(y.$$scope={dirty:C,ctx:g}),a.$set(y)},i(g){m||(_(t.$$.fragment,g),_(a.$$.fragment,g),_(c.$$.fragment,g),m=!0)},o(g){d(t.$$.fragment,g),d(a.$$.fragment,g),d(c.$$.fragment,g),m=!1},d(g){g&&(p(e),p(s),p(o),p(f)),w(t),w(a),w(c,g)}}}function Qc(r){let e,l,t;return l=new $e({props:{$$slots:{default:[Zc]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&16&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Kc(r){let e,l=(r[3].name??"Unnamed railway station")+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&8&&l!==(l=(n[3].name??"Unnamed railway station")+"")&&B(t,l)},d(n){n&&p(e)}}}function Xc(r){let e,l;return e=new fe({props:{$$slots:{default:[Kc,({props:t})=>({3:t}),({props:t})=>t?8:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&24&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function xc(r){let e,l;const t=[j(Kt),{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:r[0]?"visible":"none"}}];let n={$$slots:{default:[Xc]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new $n({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&1?se(t,[o&0&&oe(j(Kt)),o&1&&{layout:{"icon-image":"railway_station","icon-size":1,"icon-allow-overlap":!0,visibility:s[0]?"visible":"none"}}]):{};o&16&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function e$(r){let e,l,t,n,s;function o(a){r[2](a)}let u={$$slots:{right:[Qc],default:[Yc]},$$scope:{ctx:r}};return r[0]!==void 0&&(u.checked=r[0]),e=new re({props:u}),U.push(()=>W(e,"checked",o)),n=new _t({props:{data:`${me()}/v1/${Kt}.geojson`,$$slots:{default:[xc]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,[i]){const f={};i&16&&(f.$$scope={dirty:i,ctx:a}),!l&&i&1&&(l=!0,f.checked=a[0],Y(()=>l=!1)),e.$set(f);const c={};i&17&&(c.$$scope={dirty:i,ctx:a}),n.$set(c)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}let Kt="railway_stations";function t$(r,e,l){let t,n=ke(Kt);Q(r,n,o=>l(0,t=o));function s(o){t=o,n.set(t)}return[t,n,s]}class n$ extends J{constructor(e){super(),Z(this,e,t$,e$,V,{})}}function l$(r){let e;return{c(){e=v("sports pitches")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function s$(r){let e;return{c(){e=v("sports centres")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function r$(r){let e,l,t,n,s,o,u,a,i;return t=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dpitch",$$slots:{default:[l$]},$$scope:{ctx:r}}}),s=new X({props:{href:"https://wiki.openstreetmap.org/wiki/Tag:leisure%3Dsports_centre",$$slots:{default:[s$]},$$scope:{ctx:r}}}),a=new tt({}),{c(){e=L("p"),l=v("This shows "),h(t.$$.fragment),n=v(" and "),h(s.$$.fragment),o=v(" data from OpenStreetMap (as of 9 August 2023)."),u=T(),h(a.$$.fragment)},m(f,c){$(f,e,c),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,o),$(f,u,c),b(a,f,c),i=!0},p(f,c){const m={};c&1&&(m.$$scope={dirty:c,ctx:f}),t.$set(m);const g={};c&1&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){i||(_(t.$$.fragment,f),_(s.$$.fragment,f),_(a.$$.fragment,f),i=!0)},o(f){d(t.$$.fragment,f),d(s.$$.fragment,f),d(a.$$.fragment,f),i=!1},d(f){f&&(p(e),p(u)),w(t),w(s),w(a,f)}}}function o$(r){let e,l;return e=new _s({props:{name:"sports_spaces",singularNoun:"sports space",pluralNoun:"Sports spaces",$$slots:{default:[r$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}class i$ extends J{constructor(e){super(),Z(this,e,null,o$,V,{})}}function a$(r){let e;return{c(){e=v("Stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function f$(r){let e;return{c(){e=v("DfT stats19")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function u$(r){let e;return{c(){e=v("documented by DfT")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function c$(r){let e,l,t,n,s,o,u,a,i,f,c,m,g,C,S,y,M,O,A,I,N,R,F;return t=new X({props:{href:"https://www.data.gov.uk/dataset/cb7ae6f0-4be6-4935-9277-47e5ce24a11f/road-safety-data",$$slots:{default:[f$]},$$scope:{ctx:r}}}),M=new X({props:{href:"https://www.gov.uk/guidance/road-accident-and-safety-statistics-guidance",$$slots:{default:[u$]},$$scope:{ctx:r}}}),R=new Fe({}),{c(){e=L("p"),l=v("This layer shows collisions recorded in the "),h(t.$$.fragment),n=v(" dataset. Please note these limitations:"),s=T(),o=L("ul"),u=L("li"),u.textContent="Only collisions between 2017 and 2022 are included",a=T(),i=L("li"),i.textContent=`This tool is intended to be used at high-zoom levels, while inspecting
          a scheme or development area. Not all points are shown at lower zoom
          levels. Do not use this to look for trends across a city or region
          scale.`,f=T(),c=L("li"),c.textContent=`Approximately 150 collisions from the source data aren't included, due
          to problems with the recorded location`,m=T(),g=L("li"),g.textContent='The "pedestrians" category also include mobility scooters',C=T(),S=L("li"),y=v("All limitations "),h(M.$$.fragment),O=v(` also apply. Not all collisions or near misses are reported.
          There's nuance with the severity categories.`),A=T(),I=L("p"),I.textContent="You can click a point to open the full report, thanks to CycleStreets.",N=T(),h(R.$$.fragment)},m(P,z){$(P,e,z),k(e,l),b(t,e,null),k(e,n),$(P,s,z),$(P,o,z),k(o,u),k(o,a),k(o,i),k(o,f),k(o,c),k(o,m),k(o,g),k(o,C),k(o,S),k(S,y),b(M,S,null),k(S,O),$(P,A,z),$(P,I,z),$(P,N,z),b(R,P,z),F=!0},p(P,z){const x={};z&4194304&&(x.$$scope={dirty:z,ctx:P}),t.$set(x);const E={};z&4194304&&(E.$$scope={dirty:z,ctx:P}),M.$set(E)},i(P){F||(_(t.$$.fragment,P),_(M.$$.fragment,P),_(R.$$.fragment,P),F=!0)},o(P){d(t.$$.fragment,P),d(M.$$.fragment,P),d(R.$$.fragment,P),F=!1},d(P){P&&(p(e),p(s),p(o),p(A),p(I),p(N)),w(t),w(M),w(R,P)}}}function $$(r){let e,l,t;return l=new $e({props:{$$slots:{default:[c$]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&4194304&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Cl(r){let e,l,t,n,s,o,u,a,i,f,c,m,g;return l=new st({props:{small:!0,$$slots:{default:[d$]},$$scope:{ctx:r}}}),f=new xt({props:{rows:r[9]}}),{c(){e=L("div"),h(l.$$.fragment),t=T(),n=L("div"),s=v(`Filter years:
      `),o=L("input"),u=v(`
      -
      `),a=L("input"),i=T(),h(f.$$.fragment),G(o,"type","number"),G(o,"min",2017),G(o,"max",2022),G(o,"class","svelte-1ft65rw"),G(a,"type","number"),G(a,"min",2017),G(a,"max",2022),G(a,"class","svelte-1ft65rw"),_e(e,"border","1px solid black"),_e(e,"padding","8px")},m(C,S){$(C,e,S),b(l,e,null),k(e,t),k(e,n),k(n,s),k(n,o),Ke(o,r[0].minYear),k(n,u),k(n,a),Ke(a,r[0].maxYear),k(e,i),b(f,e,null),c=!0,m||(g=[xe(o,"input",r[15]),xe(a,"input",r[16])],m=!0)},p(C,S){const y={};S&4194305&&(y.$$scope={dirty:S,ctx:C}),l.$set(y),S&1&&Wt(o.value)!==C[0].minYear&&Ke(o,C[0].minYear),S&1&&Wt(a.value)!==C[0].maxYear&&Ke(a,C[0].maxYear)},i(C){c||(_(l.$$.fragment,C),_(f.$$.fragment,C),c=!0)},o(C){d(l.$$.fragment,C),d(f.$$.fragment,C),c=!1},d(C){C&&p(e),w(l),w(f),m=!1,ps(g)}}}function p$(r){let e;return{c(){e=v("Pedestrians")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function m$(r){let e;return{c(){e=v("Cyclists")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function _$(r){let e;return{c(){e=v("Horse riders")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function g$(r){let e;return{c(){e=v("Other")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function d$(r){let e,l,t,n,s,o,u,a,i,f,c,m;function g(N){r[11](N)}let C={$$slots:{default:[p$]},$$scope:{ctx:r}};r[0].pedestrians!==void 0&&(C.checked=r[0].pedestrians),e=new re({props:C}),U.push(()=>W(e,"checked",g));function S(N){r[12](N)}let y={$$slots:{default:[m$]},$$scope:{ctx:r}};r[0].cyclists!==void 0&&(y.checked=r[0].cyclists),n=new re({props:y}),U.push(()=>W(n,"checked",S));function M(N){r[13](N)}let O={$$slots:{default:[_$]},$$scope:{ctx:r}};r[0].horseRiders!==void 0&&(O.checked=r[0].horseRiders),u=new re({props:O}),U.push(()=>W(u,"checked",M));function A(N){r[14](N)}let I={$$slots:{default:[g$]},$$scope:{ctx:r}};return r[0].other!==void 0&&(I.checked=r[0].other),f=new re({props:I}),U.push(()=>W(f,"checked",A)),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment),o=T(),h(u.$$.fragment),i=T(),h(f.$$.fragment)},m(N,R){b(e,N,R),$(N,t,R),b(n,N,R),$(N,o,R),b(u,N,R),$(N,i,R),b(f,N,R),m=!0},p(N,R){const F={};R&4194304&&(F.$$scope={dirty:R,ctx:N}),!l&&R&1&&(l=!0,F.checked=N[0].pedestrians,Y(()=>l=!1)),e.$set(F);const P={};R&4194304&&(P.$$scope={dirty:R,ctx:N}),!s&&R&1&&(s=!0,P.checked=N[0].cyclists,Y(()=>s=!1)),n.$set(P);const z={};R&4194304&&(z.$$scope={dirty:R,ctx:N}),!a&&R&1&&(a=!0,z.checked=N[0].horseRiders,Y(()=>a=!1)),u.$set(z);const x={};R&4194304&&(x.$$scope={dirty:R,ctx:N}),!c&&R&1&&(c=!0,x.checked=N[0].other,Y(()=>c=!1)),f.$set(x)},i(N){m||(_(e.$$.fragment,N),_(n.$$.fragment,N),_(u.$$.fragment,N),_(f.$$.fragment,N),m=!0)},o(N){d(e.$$.fragment,N),d(n.$$.fragment,N),d(u.$$.fragment,N),d(f.$$.fragment,N),m=!1},d(N){N&&(p(t),p(o),p(i)),w(e,N),w(n,N),w(u,N),w(f,N)}}}function Ll(r){let e,l,t,n=r[3][r[21].pedestrian_location]+"",s;return{c(){e=L("p"),l=v("Pedestrian location: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&2097152&&n!==(n=o[3][o[21].pedestrian_location]+"")&&B(s,n)},d(o){o&&p(e)}}}function Tl(r){let e,l,t,n=r[4][r[21].pedestrian_movement]+"",s;return{c(){e=L("p"),l=v("Pedestrian movement: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&2097152&&n!==(n=o[4][o[21].pedestrian_movement]+"")&&B(s,n)},d(o){o&&p(e)}}}function h$(r){let e,l,t,n=r[21].year+"",s,o,u,a,i,f=r[5][r[21].severity]+"",c,m,g,C,S,y=Ml(r[21])+"",M,O,A,I,N,R=r[21].pedestrian_location&&Ll(r),F=r[21].pedestrian_movement&&Tl(r);return{c(){e=L("p"),l=v("Year: "),t=L("b"),s=v(n),o=T(),u=L("p"),a=v("Severity: "),i=L("b"),c=v(f),m=T(),g=L("p"),C=v("Casualties: "),S=L("b"),M=v(y),O=T(),R&&R.c(),A=T(),F&&F.c(),I=T(),N=L("p"),N.textContent="Click to open full report in CycleStreets"},m(P,z){$(P,e,z),k(e,l),k(e,t),k(t,s),$(P,o,z),$(P,u,z),k(u,a),k(u,i),k(i,c),$(P,m,z),$(P,g,z),k(g,C),k(g,S),k(S,M),$(P,O,z),R&&R.m(P,z),$(P,A,z),F&&F.m(P,z),$(P,I,z),$(P,N,z)},p(P,z){z&2097152&&n!==(n=P[21].year+"")&&B(s,n),z&2097152&&f!==(f=P[5][P[21].severity]+"")&&B(c,f),z&2097152&&y!==(y=Ml(P[21])+"")&&B(M,y),P[21].pedestrian_location?R?R.p(P,z):(R=Ll(P),R.c(),R.m(A.parentNode,A)):R&&(R.d(1),R=null),P[21].pedestrian_movement?F?F.p(P,z):(F=Tl(P),F.c(),F.m(I.parentNode,I)):F&&(F.d(1),F=null)},d(P){P&&(p(e),p(o),p(u),p(m),p(g),p(O),p(A),p(I),p(N)),R&&R.d(P),F&&F.d(P)}}}function b$(r){let e,l;return e=new fe({props:{$$slots:{default:[h$,({props:t})=>({21:t}),({props:t})=>t?2097152:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&6291456&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function w$(r){let e,l;const t=[j(At),{sourceLayer:At},{paint:{"circle-color":we(["get","severity"],[1,2,3],[r[6],r[7],r[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{filter:r[1]},{layout:{visibility:r[0].show?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[b$]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new mt({props:n}),e.$on("click",y$),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&451?se(t,[o&0&&oe(j(At)),o&0&&{sourceLayer:At},o&448&&{paint:{"circle-color":we(["get","severity"],[1,2,3],[s[6],s[7],s[8]]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&2&&{filter:s[1]},o&1&&{layout:{visibility:s[0].show?"visible":"none"}},t[5],t[6]]):{};o&4194304&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function k$(r){let e,l,t,n,s,o;function u(f){r[10](f)}let a={$$slots:{right:[$$],default:[a$]},$$scope:{ctx:r}};r[0].show!==void 0&&(a.checked=r[0].show),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0].show&&Cl(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${At}.pmtiles`,$$slots:{default:[w$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&4194304&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0].show,Y(()=>l=!1)),e.$set(m),f[0].show?i?(i.p(f,c),c&1&&_(i,1)):(i=Cl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&4194307&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let At="stats19";function v$(r){let[e,l,t]=r.split("/");return{show:!0,pedestrians:e.includes("pedestrians"),cyclists:e.includes("cyclists"),horseRiders:e.includes("horseRiders"),other:e.includes("other"),minYear:parseInt(l),maxYear:parseInt(t)}}function Ml(r){let e=[];return r.pedestrian&&e.push("pedestrian"),r.cyclist&&e.push("cyclist"),r.horse_rider&&e.push("horse rider"),r.other&&e.push("other"),e.join(", ")}function y$(r){window.open(`https://www.cyclestreets.net/collisions/reports/${r.detail.features[0].properties.accident_index}`,"_blank")}function S$(r,e,l){let t,n,s=["pedestrians","cyclists","horseRiders","other"],o={show:!1,pedestrians:!0,cyclists:!0,horseRiders:!0,other:!1,minYear:2017,maxYear:2022};function u(P){return P.show?`${s.filter(x=>P[x]).join(",")}/${P.minYear}/${P.maxYear}`:null}let a=dt(At,o,u,v$);Q(r,a,P=>l(0,n=P));function i(P,z,x,E,q,D){let H=["any"];return n.pedestrians&&H.push(["get","pedestrian"]),n.cyclists&&H.push(["get","cyclist"]),n.horseRiders&&H.push(["get","horse_rider"]),n.other&&H.push(["get","other"]),["all",[">=",["get","year"],n.minYear],["<=",["get","year"],n.maxYear],H]}let f={1:"Crossing on pedestrian crossing facility",2:"Crossing in zig-zag approach lines",3:"Crossing in zig-zag exit lines",4:"Crossing elsewhere within 50m. of pedestrian crossing",5:"In carriageway, crossing elsewhere",6:"On footway or verge",7:"On refuge, central island or central reservation",8:"In centre of carriageway - not on refuge, island or central reservation",9:"In carriageway, not crossing"},c={1:"Crossing from driver's nearside",2:"Crossing from nearside - masked by parked or stationary vehicle",3:"Crossing from driver's offside",4:"Crossing from offside - masked by parked or stationary vehicle",5:"In carriageway, stationary - not crossing (standing or playing)",6:"In carriageway, stationary - not crossing (standing or playing - masked by parked or stationary vehicle)",7:"Walking along in carriageway, facing traffic",8:"Walking along in carriageway, back to traffic"},m={1:"Fatal",2:"Serious",3:"Slight"},g=K.sequential_low_to_high[4],C=K.sequential_low_to_high[2],S=K.sequential_low_to_high[0],y=[["Fatal",g],["Serious",C],["Slight",S]];function M(P){r.$$.not_equal(n.show,P)&&(n.show=P,a.set(n))}function O(P){r.$$.not_equal(n.pedestrians,P)&&(n.pedestrians=P,a.set(n))}function A(P){r.$$.not_equal(n.cyclists,P)&&(n.cyclists=P,a.set(n))}function I(P){r.$$.not_equal(n.horseRiders,P)&&(n.horseRiders=P,a.set(n))}function N(P){r.$$.not_equal(n.other,P)&&(n.other=P,a.set(n))}function R(){n.minYear=Wt(this.value),a.set(n)}function F(){n.maxYear=Wt(this.value),a.set(n)}return r.$$.update=()=>{r.$$.dirty&1&&l(1,t=i(n.minYear,n.maxYear,n.pedestrians,n.cyclists,n.horseRiders,n.other))},[n,t,a,f,c,m,g,C,S,y,M,O,A,I,N,R,F]}class C$ extends J{constructor(e){super(),Z(this,e,S$,k$,V,{})}}function L$(r){let e;return{c(){e=v("Vehicle counts")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function T$(r){let e;return{c(){e=v(`DfT road statistics
        `)},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function M$(r){let e;return{c(){e=v("methodology")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function N$(r){let e,l,t,n,s,o,u,a,i,f,c;return t=new X({props:{href:"https://roadtraffic.dft.gov.uk/downloads",$$slots:{default:[T$]},$$scope:{ctx:r}}}),s=new X({props:{href:"https://storage.googleapis.com/dft-statistics/road-traffic/all-traffic-data-metadata.pdf",$$slots:{default:[M$]},$$scope:{ctx:r}}}),f=new Fe({}),{c(){e=L("p"),l=v("AADF (annual average daily flow) data from "),h(t.$$.fragment),n=v(`. This counts the total daily number of vehicles
        traveling past a count point (in both directions) on an average day of
        the year. Data from the latest year available is shown. See `),h(s.$$.fragment),o=v(" for details and caveats about the measurements."),u=T(),a=L("p"),a.textContent=`The colors show motor vehicles AADF, not pedal cycles. The outline is
        thicker when the latest data is a manual or automatic count, and thinner
        when it's an estimate from previous years or nearby counters. Click a
        point for full data.`,i=T(),h(f.$$.fragment)},m(m,g){$(m,e,g),k(e,l),b(t,e,null),k(e,n),b(s,e,null),k(e,o),$(m,u,g),$(m,a,g),$(m,i,g),b(f,m,g),c=!0},p(m,g){const C={};g&128&&(C.$$scope={dirty:g,ctx:m}),t.$set(C);const S={};g&128&&(S.$$scope={dirty:g,ctx:m}),s.$set(S)},i(m){c||(_(t.$$.fragment,m),_(s.$$.fragment,m),_(f.$$.fragment,m),c=!0)},o(m){d(t.$$.fragment,m),d(s.$$.fragment,m),d(f.$$.fragment,m),c=!1},d(m){m&&(p(e),p(u),p(a),p(i)),w(t),w(s),w(f,m)}}}function P$(r){let e,l,t;return l=new $e({props:{$$slots:{default:[N$]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&128&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Nl(r){let e,l;return e=new je({props:{colorScale:r[1],limits:r[3]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:ne,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function I$(r){let e,l=r[6].location+"",t,n,s,o,u=r[6].year+"",a,i,f,c=r[6].motor_vehicles.toLocaleString()+"",m,g,C,S,y=r[6].year+"",M,O,A,I=r[6].pedal_cycles.toLocaleString()+"",N,R,F,P,z,x=r[6].method+"",E;return{c(){e=L("h2"),t=v(l),n=T(),s=L("p"),o=v("Total motor vehicles ("),a=v(u),i=v(` AADF):
        `),f=L("b"),m=v(c),g=T(),C=L("p"),S=v("Total pedal cycles ("),M=v(y),O=v(` AADF):
        `),A=L("b"),N=v(I),R=T(),F=L("p"),P=v("Count method: "),z=L("b"),E=v(x)},m(q,D){$(q,e,D),k(e,t),$(q,n,D),$(q,s,D),k(s,o),k(s,a),k(s,i),k(s,f),k(f,m),$(q,g,D),$(q,C,D),k(C,S),k(C,M),k(C,O),k(C,A),k(A,N),$(q,R,D),$(q,F,D),k(F,P),k(F,z),k(z,E)},p(q,D){D&64&&l!==(l=q[6].location+"")&&B(t,l),D&64&&u!==(u=q[6].year+"")&&B(a,u),D&64&&c!==(c=q[6].motor_vehicles.toLocaleString()+"")&&B(m,c),D&64&&y!==(y=q[6].year+"")&&B(M,y),D&64&&I!==(I=q[6].pedal_cycles.toLocaleString()+"")&&B(N,I),D&64&&x!==(x=q[6].method+"")&&B(E,x)},d(q){q&&(p(e),p(n),p(s),p(g),p(C),p(R),p(F))}}}function O$(r){let e,l;return e=new fe({props:{$$slots:{default:[I$,({props:t})=>({6:t}),({props:t})=>t?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&192&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function R$(r){let e,l;const t=[j(Ft),{sourceLayer:Ft},{paint:{"circle-color":we(["get","motor_vehicles"],r[2],r[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[O$]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new mt({props:n}),e.$on("click",A$),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&7?se(t,[o&0&&oe(j(Ft)),o&0&&{sourceLayer:Ft},o&6&&{paint:{"circle-color":we(["get","motor_vehicles"],s[2],s[1]),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":["case",["in",["get","method"],["literal",["Manual count","Automatic counter"]]],1.5,.1]}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[4],t[5]]):{};o&128&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function D$(r){let e,l,t,n,s,o;function u(f){r[5](f)}let a={$$slots:{right:[P$],default:[L$]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&Nl(r);return s=new ge({props:{url:`pmtiles://${me()}/v1/${Ft}.pmtiles`,$$slots:{default:[R$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&128&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],Y(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=Nl(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&129&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let Ft="vehicle_counts";function A$(r){window.open(`https://roadtraffic.dft.gov.uk/manualcountpoints/${r.detail.features[0].properties.count_point}`,"_blank")}function F$(r,e,l){let t,n=K.sequential_low_to_high,s=[0,4e4,8e4,12e4,16e4,205e3],o=["","40k","80k","120k","160k",""],u=ke(Ft);Q(r,u,i=>l(0,t=i));function a(i){t=i,u.set(t)}return[t,n,s,o,u,a]}class q$ extends J{constructor(e){super(),Z(this,e,F$,D$,V,{})}}function Pl(r,e,l){const t=r.slice();return t[6]=e[l],t}function z$(r){let e;return{c(){e=v("Issues & Conflicts")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function B$(r){let e,l,t;return{c(){e=L("p"),e.textContent=`Critical issues and policy conflicts from the Design Assistance Log.
        This is internally collected data.`,l=T(),t=L("p"),t.textContent=`This layer is manually copied from a copy of the DA Log. The data is
        recent as of 10 June 2024.`},m(n,s){$(n,e,s),$(n,l,s),$(n,t,s)},p:ne,d(n){n&&(p(e),p(l),p(t))}}}function H$(r){let e,l,t;return l=new $e({props:{$$slots:{default:[B$]},$$scope:{ctx:r}}}),{c(){e=L("span"),h(l.$$.fragment),G(e,"slot","right")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&512&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function Il(r){let e,l;return e=new xt({props:{rows:r[3]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:ne,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function j$(r){let e,l=r[5]["Issue ID"]+"",t,n,s=r[5].Code+"",o,u,a,i=r[5]["Issue Stage"]+"",f;return{c(){e=L("h2"),t=v(l),n=v(" - "),o=v(s),u=T(),a=L("p"),f=v(i)},m(c,m){$(c,e,m),k(e,t),k(e,n),k(e,o),$(c,u,m),$(c,a,m),k(a,f)},p(c,m){m&32&&l!==(l=c[5]["Issue ID"]+"")&&B(t,l),m&32&&s!==(s=c[5].Code+"")&&B(o,s),m&32&&i!==(i=c[5]["Issue Stage"]+"")&&B(f,i)},d(c){c&&(p(e),p(u),p(a))}}}function Ol(r){let e,l=r[6]+"",t,n,s,o=r[5][r[6]]+"",u,a;return{c(){e=L("p"),t=v(l),n=v(`:
            `),s=L("b"),u=v(o),a=T()},m(i,f){$(i,e,f),k(e,t),k(e,n),k(e,s),k(s,u),k(e,a)},p(i,f){f&32&&o!==(o=i[5][i[6]]+"")&&B(u,o)},d(i){i&&p(e)}}}function G$(r){let e,l=Te(r[2]),t=[];for(let n=0;n<l.length;n+=1)t[n]=Ol(Pl(r,l,n));return{c(){e=L("div");for(let n=0;n<t.length;n+=1)t[n].c();_e(e,"max-width","30vw"),_e(e,"max-height","60vh"),_e(e,"overflow","auto")},m(n,s){$(n,e,s);for(let o=0;o<t.length;o+=1)t[o]&&t[o].m(e,null)},p(n,s){if(s&36){l=Te(n[2]);let o;for(o=0;o<l.length;o+=1){const u=Pl(n,l,o);t[o]?t[o].p(u,s):(t[o]=Ol(u),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},d(n){n&&p(e),lt(t,n)}}}function E$(r){let e,l,t,n;return e=new fe({props:{openOn:"hover",$$slots:{default:[j$,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[G$,({props:s})=>({5:s}),({props:s})=>s?32:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&544&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&544&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function U$(r){let e,l;const t=[j(on),{paint:{"circle-color":et(["get","Design Review Status"],Object.fromEntries(r[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"},{eventsIfTopMost:!0}];let n={$$slots:{default:[E$]},$$scope:{ctx:r}};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new mt({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&9?se(t,[o&0&&oe(j(on)),o&8&&{paint:{"circle-color":et(["get","Design Review Status"],Object.fromEntries(s[3]),"cyan"),"circle-opacity":.9,"circle-radius":["interpolate",["linear"],["zoom"],1,2,8,3,13,15],"circle-stroke-color":"black","circle-stroke-width":.1}},o&1&&{layout:{visibility:s[0]?"visible":"none"}},t[3],t[4]]):{};o&512&&(u.$$scope={dirty:o,ctx:s}),e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function W$(r){let e,l,t,n,s,o;function u(f){r[4](f)}let a={$$slots:{right:[H$],default:[z$]},$$scope:{ctx:r}};r[0]!==void 0&&(a.checked=r[0]),e=new re({props:a}),U.push(()=>W(e,"checked",u));let i=r[0]&&Il(r);return s=new _t({props:{data:`${Yt()}/v1/problems.geojson.gz`,$$slots:{default:[U$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),t=T(),i&&i.c(),n=T(),h(s.$$.fragment)},m(f,c){b(e,f,c),$(f,t,c),i&&i.m(f,c),$(f,n,c),b(s,f,c),o=!0},p(f,[c]){const m={};c&512&&(m.$$scope={dirty:c,ctx:f}),!l&&c&1&&(l=!0,m.checked=f[0],Y(()=>l=!1)),e.$set(m),f[0]?i?(i.p(f,c),c&1&&_(i,1)):(i=Il(f),i.c(),_(i,1),i.m(n.parentNode,n)):i&&(ie(),d(i,1,1,()=>{i=null}),ae());const g={};c&513&&(g.$$scope={dirty:c,ctx:f}),s.$set(g)},i(f){o||(_(e.$$.fragment,f),_(i),_(s.$$.fragment,f),o=!0)},o(f){d(e.$$.fragment,f),d(i),d(s.$$.fragment,f),o=!1},d(f){f&&(p(t),p(n)),w(e,f),i&&i.d(f),w(s,f)}}}let on="problems";function Y$(r,e,l){let t,n=ke(on);Q(r,n,a=>l(0,t=a));let s=["Issue ID","Scheme ID","Date Logged","Inspector","Street Location","Code","Issue Description","External Inspectorate Comment for LA","Issue Stage","Resolved by Design","Design Review Status","Date of Resolution","Design Resolution"],o=[["Outstanding","red"],["Pending","yellow"],["Resolved","green"],["Not Applicable","grey"],["No Resolution Planned","black"]];function u(a){t=a,n.set(t)}return[t,n,s,o,u]}class V$ extends J{constructor(e){super(),Z(this,e,Y$,W$,V,{})}}function J$(r){let e,l,t,n,s,o,u,a;return e=new Rc({}),t=new Wc({}),s=new i$({}),u=new n$({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),$(i,n,f),b(s,i,f),$(i,o,f),b(u,i,f),a=!0},i(i){a||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),_(u.$$.fragment,i),a=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),d(u.$$.fragment,i),a=!1},d(i){i&&(p(l),p(n),p(o)),w(e,i),w(t,i),w(s,i),w(u,i)}}}function Z$(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[J$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&16&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Q$(r){let e,l,t,n,s,o,u,a,i,f,c,m;return e=new Ja({}),t=new Cf({}),s=new sf({}),u=new _f({}),i=new bc({}),c=new Xu({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment),f=T(),h(c.$$.fragment)},m(g,C){b(e,g,C),$(g,l,C),b(t,g,C),$(g,n,C),b(s,g,C),$(g,o,C),b(u,g,C),$(g,a,C),b(i,g,C),$(g,f,C),b(c,g,C),m=!0},i(g){m||(_(e.$$.fragment,g),_(t.$$.fragment,g),_(s.$$.fragment,g),_(u.$$.fragment,g),_(i.$$.fragment,g),_(c.$$.fragment,g),m=!0)},o(g){d(e.$$.fragment,g),d(t.$$.fragment,g),d(s.$$.fragment,g),d(u.$$.fragment,g),d(i.$$.fragment,g),d(c.$$.fragment,g),m=!1},d(g){g&&(p(l),p(n),p(o),p(a),p(f)),w(e,g),w(t,g),w(s,g),w(u,g),w(i,g),w(c,g)}}}function K$(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[Q$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&16&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function X$(r){let e,l,t,n,s,o;return e=new Da({}),t=new Iu({}),s=new ju({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment)},m(u,a){b(e,u,a),$(u,l,a),b(t,u,a),$(u,n,a),b(s,u,a),o=!0},i(u){o||(_(e.$$.fragment,u),_(t.$$.fragment,u),_(s.$$.fragment,u),o=!0)},o(u){d(e.$$.fragment,u),d(t.$$.fragment,u),d(s.$$.fragment,u),o=!1},d(u){u&&(p(l),p(n)),w(e,u),w(t,u),w(s,u)}}}function x$(r){let e,l,t,n,s,o,u,a,i,f;return e=new Ei({}),t=new wa({}),s=new Qo({}),u=new hi({}),i=new Oi({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment)},m(c,m){b(e,c,m),$(c,l,m),b(t,c,m),$(c,n,m),b(s,c,m),$(c,o,m),b(u,c,m),$(c,a,m),b(i,c,m),f=!0},i(c){f||(_(e.$$.fragment,c),_(t.$$.fragment,c),_(s.$$.fragment,c),_(u.$$.fragment,c),_(i.$$.fragment,c),f=!0)},o(c){d(e.$$.fragment,c),d(t.$$.fragment,c),d(s.$$.fragment,c),d(u.$$.fragment,c),d(i.$$.fragment,c),f=!1},d(c){c&&(p(l),p(n),p(o),p(a)),w(e,c),w(t,c),w(s,c),w(u,c),w(i,c)}}}function ep(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[x$]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&16&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function tp(r){let e,l,t,n;return e=new Bo({}),t=new ii({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function np(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[tp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&16&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function lp(r){let e,l,t,n,s,o,u,a;return e=new yu({}),t=new zf({}),s=new pu({}),u=new V$({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment)},m(i,f){b(e,i,f),$(i,l,f),b(t,i,f),$(i,n,f),b(s,i,f),$(i,o,f),b(u,i,f),a=!0},i(i){a||(_(e.$$.fragment,i),_(t.$$.fragment,i),_(s.$$.fragment,i),_(u.$$.fragment,i),a=!0)},o(i){d(e.$$.fragment,i),d(t.$$.fragment,i),d(s.$$.fragment,i),d(u.$$.fragment,i),a=!1},d(i){i&&(p(l),p(n),p(o)),w(e,i),w(t,i),w(s,i),w(u,i)}}}function sp(r){let e,l,t,n,s,o,u,a,i=ln()=="Private (development)",f,c,m,g,C;e=new q$({}),t=new C$({}),s=new eu({}),u=new ac({});let S=i&&lp();return c=new xi({}),g=new fa({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T(),S&&S.c(),f=T(),h(c.$$.fragment),m=T(),h(g.$$.fragment)},m(y,M){b(e,y,M),$(y,l,M),b(t,y,M),$(y,n,M),b(s,y,M),$(y,o,M),b(u,y,M),$(y,a,M),S&&S.m(y,M),$(y,f,M),b(c,y,M),$(y,m,M),b(g,y,M),C=!0},p:ne,i(y){C||(_(e.$$.fragment,y),_(t.$$.fragment,y),_(s.$$.fragment,y),_(u.$$.fragment,y),_(S),_(c.$$.fragment,y),_(g.$$.fragment,y),C=!0)},o(y){d(e.$$.fragment,y),d(t.$$.fragment,y),d(s.$$.fragment,y),d(u.$$.fragment,y),d(S),d(c.$$.fragment,y),d(g.$$.fragment,y),C=!1},d(y){y&&(p(l),p(n),p(o),p(a),p(f),p(m)),w(e,y),w(t,y),w(s,y),w(u,y),S&&S.d(y),w(c,y),w(g,y)}}}function rp(r){let e,l;return e=new st({props:{small:!0,$$slots:{default:[sp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&16&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function op(r){let e,l,t,n,s;function o(a){r[3](a)}let u={};return r[0]!==void 0&&(u.enabled=r[0]),e=new Hr({props:u}),U.push(()=>W(e,"enabled",o)),n=new Tr({}),{c(){h(e.$$.fragment),t=T(),h(n.$$.fragment)},m(a,i){b(e,a,i),$(a,t,i),b(n,a,i),s=!0},p(a,i){const f={};!l&&i&1&&(l=!0,f.enabled=a[0],Y(()=>l=!1)),e.$set(f)},i(a){s||(_(e.$$.fragment,a),_(n.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(n.$$.fragment,a),s=!1},d(a){a&&p(t),w(e,a),w(n,a)}}}function ip(r){let e,l,t,n,s,o,u,a,i,f,c,m,g,C,S,y;return e=new qe({props:{label:"Trip generators",$$slots:{default:[Z$]},$$scope:{ctx:r}}}),t=new qe({props:{label:"Existing infrastructure",$$slots:{default:[K$]},$$scope:{ctx:r}}}),s=new qe({props:{label:"Public transport",$$slots:{default:[X$]},$$scope:{ctx:r}}}),u=new qe({props:{label:"Boundaries",$$slots:{default:[ep]},$$scope:{ctx:r}}}),i=new qe({props:{label:"Census",$$slots:{default:[np]},$$scope:{ctx:r}}}),c=new qe({props:{label:"Other",$$slots:{default:[rp]},$$scope:{ctx:r}}}),g=new qe({props:{label:"Tools",$$slots:{default:[op]},$$scope:{ctx:r}}}),S=new Qs({props:{disabled:!r[1]}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment),f=T(),h(c.$$.fragment),m=T(),h(g.$$.fragment),C=T(),h(S.$$.fragment)},m(M,O){b(e,M,O),$(M,l,O),b(t,M,O),$(M,n,O),b(s,M,O),$(M,o,O),b(u,M,O),$(M,a,O),b(i,M,O),$(M,f,O),b(c,M,O),$(M,m,O),b(g,M,O),$(M,C,O),b(S,M,O),y=!0},p(M,O){const A={};O&16&&(A.$$scope={dirty:O,ctx:M}),e.$set(A);const I={};O&16&&(I.$$scope={dirty:O,ctx:M}),t.$set(I);const N={};O&16&&(N.$$scope={dirty:O,ctx:M}),s.$set(N);const R={};O&16&&(R.$$scope={dirty:O,ctx:M}),u.$set(R);const F={};O&16&&(F.$$scope={dirty:O,ctx:M}),i.$set(F);const P={};O&16&&(P.$$scope={dirty:O,ctx:M}),c.$set(P);const z={};O&17&&(z.$$scope={dirty:O,ctx:M}),g.$set(z);const x={};O&2&&(x.disabled=!M[1]),S.$set(x)},i(M){y||(_(e.$$.fragment,M),_(t.$$.fragment,M),_(s.$$.fragment,M),_(u.$$.fragment,M),_(i.$$.fragment,M),_(c.$$.fragment,M),_(g.$$.fragment,M),_(S.$$.fragment,M),y=!0)},o(M){d(e.$$.fragment,M),d(t.$$.fragment,M),d(s.$$.fragment,M),d(u.$$.fragment,M),d(i.$$.fragment,M),d(c.$$.fragment,M),d(g.$$.fragment,M),d(S.$$.fragment,M),y=!1},d(M){M&&(p(l),p(n),p(o),p(a),p(f),p(m),p(C)),w(e,M),w(t,M),w(s,M),w(u,M),w(i,M),w(c,M),w(g,M),w(S,M)}}}function ap(r){let e,l;const t=[j("cover-interactive-layers"),{paint:{"fill-color":"black","fill-opacity":0}},{layout:{visibility:r[1]?"none":"visible"}}];let n={};for(let s=0;s<t.length;s+=1)n=le(n,t[s]);return e=new He({props:n}),{c(){h(e.$$.fragment)},m(s,o){b(e,s,o),l=!0},p(s,o){const u=o&2?se(t,[t[0],t[1],{layout:{visibility:s[1]?"none":"visible"}}]):{};e.$set(u)},i(s){l||(_(e.$$.fragment,s),l=!0)},o(s){d(e.$$.fragment,s),l=!1},d(s){w(e,s)}}}function fp(r){let e,l,t,n;return e=new qe({props:{label:"Layers",open:!0,$$slots:{default:[ip]},$$scope:{ctx:r}}}),t=new _t({props:{data:r[2],$$slots:{default:[ap]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,[o]){const u={};o&19&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&18&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function up(r,e,l){let t,n;Q(r,Hn,u=>l(1,n=u));let s={type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[180,90],[-180,90],[-180,-90],[180,-90],[180,90]]]}};function o(u){t=u,l(0,t),l(1,n)}return r.$$.update=()=>{r.$$.dirty&2&&l(0,t=!n),r.$$.dirty&1&&Hn.set(!t)},[t,n,s,o]}class cp extends J{constructor(e){super(),Z(this,e,up,fp,V,{})}}function $p(r){let e;function l(s,o){return s[2]<=100?_p:mp}let t=l(r),n=t(r);return{c(){n.c(),e=Ce()},m(s,o){n.m(s,o),$(s,e,o)},p(s,o){t===(t=l(s))&&n?n.p(s,o):(n.d(1),n=t(s),n&&(n.c(),n.m(e.parentNode,e)))},i:ne,o:ne,d(s){s&&p(e),n.d(s)}}}function pp(r){let e,l;return e=new Ee({props:{$$slots:{default:[gp]},$$scope:{ctx:r}}}),e.$on("click",r[3]),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function mp(r){let e;return{c(){e=L("label"),e.innerHTML=`Processing scheme data
      <progress class="svelte-q3473n"></progress>`},m(l,t){$(l,e,t)},p:ne,d(l){l&&p(e)}}}function _p(r){let e,l,t;return{c(){e=L("label"),l=v(`Downloading scheme data
      `),t=L("progress"),t.value=r[2],G(t,"class","svelte-q3473n")},m(n,s){$(n,e,s),k(e,l),k(e,t)},p(n,s){s&4&&(t.value=n[2])},d(n){n&&p(e)}}}function gp(r){let e;return{c(){e=v("Load latest scheme data")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function dp(r){let e,l,t,n;const s=[pp,$p],o=[];function u(a,i){return a[0]?a[1]?1:-1:0}return~(e=u(r))&&(l=o[e]=s[e](r)),{c(){l&&l.c(),t=Ce()},m(a,i){~e&&o[e].m(a,i),$(a,t,i),n=!0},p(a,[i]){let f=e;e=u(a),e===f?~e&&o[e].p(a,i):(l&&(ie(),d(o[f],1,1,()=>{o[f]=null}),ae()),~e?(l=o[e],l?l.p(a,i):(l=o[e]=s[e](a),l.c()),_(l,1),l.m(t.parentNode,t)):l=null)},i(a){n||(_(l),n=!0)},o(a){d(l),n=!1},d(a){a&&p(t),~e&&o[e].d(a)}}}function hp(r,e,l){let{loadFile:t}=e,n=!new URLSearchParams(window.location.search).has("disable_schemes"),s=!0,o=0;async function u(){let i=await Cs(`${Yt()}/v1/all_schemes_output.geojson.gz`,c=>{l(2,o=c)});l(2,o=100);let f=new TextDecoder().decode(i);t(f),l(1,s=!1)}cn(async()=>{n&&await u()});async function a(){l(0,n=!0),await u()}return r.$$set=i=>{"loadFile"in i&&l(4,t=i.loadFile)},[n,s,o,a,t]}class bp extends J{constructor(e){super(),Z(this,e,hp,dp,V,{loadFile:4})}}function Rl(r){var s;let e,l,t=((s=r[0].browse)==null?void 0:s.current_milestone)+"",n;return{c(){e=L("p"),l=v("Current milestone: "),n=v(t)},m(o,u){$(o,e,u),k(e,l),k(e,n)},p(o,u){var a;u&1&&t!==(t=((a=o[0].browse)==null?void 0:a.current_milestone)+"")&&B(n,t)},d(o){o&&p(e)}}}function wp(r){let e;return{c(){e=v("Show on map")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function kp(r){let e;return{c(){e=v("Edit scheme locally")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function vp(r){let e,l,t,n;return e=new Ee({props:{$$slots:{default:[wp]},$$scope:{ctx:r}}}),e.$on("click",r[1]),t=new Ee({props:{$$slots:{default:[kp]},$$scope:{ctx:r}}}),t.$on("click",r[2]),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&32&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&32&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function yp(r){var z,x,E,q;let e,l,t=r[0].scheme_reference+"",n,s,o,u,a=((z=r[0].browse)==null?void 0:z.authority_or_region)+"",i,f,c,m,g=((x=r[0].browse)==null?void 0:x.capital_scheme_id)+"",C,S,y,M,O=((E=r[0].browse)==null?void 0:E.funding_programme)+"",A,I,N,R,F,P=((q=r[0].browse)==null?void 0:q.current_milestone)&&Rl(r);return R=new Fs({props:{$$slots:{default:[vp]},$$scope:{ctx:r}}}),{c(){e=L("p"),l=v("Scheme reference: "),n=v(t),s=T(),o=L("p"),u=v("Authority or region: "),i=v(a),f=T(),c=L("p"),m=v("Capital scheme ID: "),C=v(g),S=T(),y=L("p"),M=v("Funding programme: "),A=v(O),I=T(),P&&P.c(),N=T(),h(R.$$.fragment)},m(D,H){$(D,e,H),k(e,l),k(e,n),$(D,s,H),$(D,o,H),k(o,u),k(o,i),$(D,f,H),$(D,c,H),k(c,m),k(c,C),$(D,S,H),$(D,y,H),k(y,M),k(y,A),$(D,I,H),P&&P.m(D,H),$(D,N,H),b(R,D,H),F=!0},p(D,H){var Me,Ne,ye,Ie;(!F||H&1)&&t!==(t=D[0].scheme_reference+"")&&B(n,t),(!F||H&1)&&a!==(a=((Me=D[0].browse)==null?void 0:Me.authority_or_region)+"")&&B(i,a),(!F||H&1)&&g!==(g=((Ne=D[0].browse)==null?void 0:Ne.capital_scheme_id)+"")&&B(C,g),(!F||H&1)&&O!==(O=((ye=D[0].browse)==null?void 0:ye.funding_programme)+"")&&B(A,O),(Ie=D[0].browse)!=null&&Ie.current_milestone?P?P.p(D,H):(P=Rl(D),P.c(),P.m(N.parentNode,N)):P&&(P.d(1),P=null);const pe={};H&32&&(pe.$$scope={dirty:H,ctx:D}),R.$set(pe)},i(D){F||(_(R.$$.fragment,D),F=!0)},o(D){d(R.$$.fragment,D),F=!1},d(D){D&&(p(e),p(s),p(o),p(f),p(c),p(S),p(y),p(I),p(N)),P&&P.d(D),w(R,D)}}}function Sp(r){let e,l;return e=new qe({props:{label:`${r[0].scheme_name}`,$$slots:{default:[yp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&1&&(s.label=`${t[0].scheme_name}`),n&33&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Cp(r,e,l){let t,n;Q(r,qt,a=>l(3,t=a)),Q(r,Xt,a=>l(4,n=a));let{scheme:s}=e;function o(){let a={type:"FeatureCollection",features:t.features.filter(i=>i.properties.scheme_reference==s.scheme_reference)};n==null||n.fitBounds(qs(a),{padding:20,animate:!1})}function u(){var f,c;let a={type:"FeatureCollection",features:t.features.filter(m=>m.properties.scheme_reference==s.scheme_reference)},i=((f=s.browse)==null?void 0:f.authority_or_region)||"unknown authority";Ls(i,JSON.stringify(a)),window.open(`scheme.html?authority=${(c=s.browse)==null?void 0:c.authority_or_region}`,"_blank")}return r.$$set=a=>{"scheme"in a&&l(0,s=a.scheme)},[s,o,u]}class Lp extends J{constructor(e){super(),Z(this,e,Cp,Sp,V,{scheme:0})}}function Dl(r){let e,l,t,n=r[0].status+"",s;return{c(){e=L("p"),l=v("Status: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&1&&n!==(n=o[0].status+"")&&B(s,n)},d(o){o&&p(e)}}}function Al(r){let e,l,t,n=r[0].timescale+"",s;return{c(){e=L("p"),l=v("Timescale: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&1&&n!==(n=o[0].timescale+"")&&B(s,n)},d(o){o&&p(e)}}}function Fl(r){let e,l,t,n=r[0].timescale_year+"",s;return{c(){e=L("p"),l=v("Estimated completion year: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&1&&n!==(n=o[0].timescale_year+"")&&B(s,n)},d(o){o&&p(e)}}}function ql(r){let e,l,t,n=r[0].year_published+"",s;return{c(){e=L("p"),l=v("Scheme most recently published: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&1&&n!==(n=o[0].year_published+"")&&B(s,n)},d(o){o&&p(e)}}}function zl(r){let e,l,t,n=r[0].year_consulted+"",s;return{c(){e=L("p"),l=v("Scheme most recently consulted on: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&1&&n!==(n=o[0].year_consulted+"")&&B(s,n)},d(o){o&&p(e)}}}function Tp(r){let e,l,t,n,s,o=r[0].status&&Dl(r),u=r[0].timescale&&Al(r),a=r[0].timescale_year&&Fl(r),i=r[0].year_published&&ql(r),f=r[0].year_consulted&&zl(r);return{c(){o&&o.c(),e=T(),u&&u.c(),l=T(),a&&a.c(),t=T(),i&&i.c(),n=T(),f&&f.c(),s=Ce()},m(c,m){o&&o.m(c,m),$(c,e,m),u&&u.m(c,m),$(c,l,m),a&&a.m(c,m),$(c,t,m),i&&i.m(c,m),$(c,n,m),f&&f.m(c,m),$(c,s,m)},p(c,[m]){c[0].status?o?o.p(c,m):(o=Dl(c),o.c(),o.m(e.parentNode,e)):o&&(o.d(1),o=null),c[0].timescale?u?u.p(c,m):(u=Al(c),u.c(),u.m(l.parentNode,l)):u&&(u.d(1),u=null),c[0].timescale_year?a?a.p(c,m):(a=Fl(c),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),c[0].year_published?i?i.p(c,m):(i=ql(c),i.c(),i.m(n.parentNode,n)):i&&(i.d(1),i=null),c[0].year_consulted?f?f.p(c,m):(f=zl(c),f.c(),f.m(s.parentNode,s)):f&&(f.d(1),f=null)},i:ne,o:ne,d(c){c&&(p(e),p(l),p(t),p(n),p(s)),o&&o.d(c),u&&u.d(c),a&&a.d(c),i&&i.d(c),f&&f.d(c)}}}function Mp(r,e,l){let{props:t}=e;return r.$$set=n=>{"props"in n&&l(0,t=n.props)},[t]}class gs extends J{constructor(e){super(),Z(this,e,Mp,Tp,V,{props:0})}}function Bl(r){let e,l,t,n=r[0].budget.toLocaleString()+"",s,o;return{c(){e=L("p"),l=v("Cost: "),t=L("b"),s=v(n),o=v(`
    GBP`)},m(u,a){$(u,e,a),k(e,l),k(e,t),k(t,s),k(e,o)},p(u,a){a&1&&n!==(n=u[0].budget.toLocaleString()+"")&&B(s,n)},d(u){u&&p(e)}}}function Hl(r){let e;return{c(){e=L("p"),e.textContent="Development is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function jl(r){let e;return{c(){e=L("p"),e.textContent="Construction is fully funded"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Gl(r){let e,l,t,n;return{c(){e=L("p"),l=v("Funding sources: "),t=L("b"),n=v(r[1])},m(s,o){$(s,e,o),k(e,l),k(e,t),k(t,n)},p(s,o){o&2&&B(n,s[1])},d(s){s&&p(e)}}}function Np(r){let e,l,t,n,s=r[0].budget&&Bl(r),o=r[0].development_funded&&Hl(),u=r[0].construction_funded&&jl(),a=r[1]&&Gl(r);return{c(){s&&s.c(),e=T(),o&&o.c(),l=T(),u&&u.c(),t=T(),a&&a.c(),n=Ce()},m(i,f){s&&s.m(i,f),$(i,e,f),o&&o.m(i,f),$(i,l,f),u&&u.m(i,f),$(i,t,f),a&&a.m(i,f),$(i,n,f)},p(i,[f]){i[0].budget?s?s.p(i,f):(s=Bl(i),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null),i[0].development_funded?o||(o=Hl(),o.c(),o.m(l.parentNode,l)):o&&(o.d(1),o=null),i[0].construction_funded?u||(u=jl(),u.c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),i[1]?a?a.p(i,f):(a=Gl(i),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i:ne,o:ne,d(i){i&&(p(e),p(l),p(t),p(n)),s&&s.d(i),o&&o.d(i),u&&u.d(i),a&&a.d(i)}}}function Pp(r){if(!r.funding_sources)return"";let e=[];for(let l of["atf2","atf3","atf4","atf4e","crsts","luf"])r.funding_sources[l]&&e.push(l.toUpperCase());return r.funding_sources.other&&e.push(r.funding_sources.other),e.join(", ")}function Ip(r,e,l){let t,{props:n}=e;return r.$$set=s=>{"props"in s&&l(0,n=s.props)},r.$$.update=()=>{r.$$.dirty&1&&l(1,t=Pp(n))},[n,t]}class ds extends J{constructor(e){super(),Z(this,e,Ip,Np,V,{props:0})}}function en(r){const e=r.slice(),l=e[1].pipeline;return e[5]=l,e}function tn(r){const e=r.slice(),l=e[0].pipeline;return e[5]=l,e}function El(r){let e,l,t,n=yn(r[0].length_meters)+"",s;return{c(){e=L("p"),l=v("Length: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&1&&n!==(n=yn(o[0].length_meters)+"")&&B(s,n)},d(o){o&&p(e)}}}function Ul(r){let e,l=rt(r[0].description,r[2])+"";return{c(){e=L("p")},m(t,n){$(t,e,n),e.innerHTML=l},p(t,n){n&5&&l!==(l=rt(t[0].description,t[2])+"")&&(e.innerHTML=l)},d(t){t&&p(e)}}}function Wl(r){let e,l,t,n,s,o,u,a=r[5].atf4_type&&Yl(r),i=r[5].accuracy&&Vl(r),f=r[5].is_alternative&&Jl();return n=new ds({props:{props:r[5]}}),o=new gs({props:{props:r[5]}}),{c(){a&&a.c(),e=T(),i&&i.c(),l=T(),f&&f.c(),t=T(),h(n.$$.fragment),s=T(),h(o.$$.fragment)},m(c,m){a&&a.m(c,m),$(c,e,m),i&&i.m(c,m),$(c,l,m),f&&f.m(c,m),$(c,t,m),b(n,c,m),$(c,s,m),b(o,c,m),u=!0},p(c,m){c[5].atf4_type?a?a.p(c,m):(a=Yl(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[5].accuracy?i?i.p(c,m):(i=Vl(c),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),c[5].is_alternative?f||(f=Jl(),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const g={};m&1&&(g.props=c[5]),n.$set(g);const C={};m&1&&(C.props=c[5]),o.$set(C)},i(c){u||(_(n.$$.fragment,c),_(o.$$.fragment,c),u=!0)},o(c){d(n.$$.fragment,c),d(o.$$.fragment,c),u=!1},d(c){c&&(p(e),p(l),p(t),p(s)),a&&a.d(c),i&&i.d(c),f&&f.d(c),w(n,c),w(o,c)}}}function Yl(r){let e,l,t,n=r[5].atf4_type+"",s;return{c(){e=L("p"),l=v("ATF4 type: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&1&&n!==(n=o[5].atf4_type+"")&&B(s,n)},d(o){o&&p(e)}}}function Vl(r){let e,l,t,n=r[5].accuracy+"",s;return{c(){e=L("p"),l=v("Accuracy: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&1&&n!==(n=o[5].accuracy+"")&&B(s,n)},d(o){o&&p(e)}}}function Jl(r){let e;return{c(){e=L("p"),e.textContent="Represents an alternative route"},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function Zl(r){var o;let e,l,t,n=((o=r[1].browse)==null?void 0:o.capital_scheme_id)+"",s;return{c(){e=L("p"),l=v("Capital scheme ID: "),t=L("b"),s=v(n)},m(u,a){$(u,e,a),k(e,l),k(e,t),k(t,s)},p(u,a){var i;a&2&&n!==(n=((i=u[1].browse)==null?void 0:i.capital_scheme_id)+"")&&B(s,n)},d(u){u&&p(e)}}}function Ql(r){var o;let e,l,t,n=((o=r[1].browse)==null?void 0:o.current_milestone)+"",s;return{c(){e=L("p"),l=v("Current milestone: "),t=L("b"),s=v(n)},m(u,a){$(u,e,a),k(e,l),k(e,t),k(t,s)},p(u,a){var i;a&2&&n!==(n=((i=u[1].browse)==null?void 0:i.current_milestone)+"")&&B(s,n)},d(u){u&&p(e)}}}function Kl(r){let e,l,t,n,s,o,u,a=r[5].scheme_type&&Xl(r),i=r[5].atf4_lead_type&&xl(r),f=r[5].scheme_description&&es(r);return n=new ds({props:{props:r[5]}}),o=new gs({props:{props:r[5]}}),{c(){a&&a.c(),e=T(),i&&i.c(),l=T(),f&&f.c(),t=T(),h(n.$$.fragment),s=T(),h(o.$$.fragment)},m(c,m){a&&a.m(c,m),$(c,e,m),i&&i.m(c,m),$(c,l,m),f&&f.m(c,m),$(c,t,m),b(n,c,m),$(c,s,m),b(o,c,m),u=!0},p(c,m){c[5].scheme_type?a?a.p(c,m):(a=Xl(c),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),c[5].atf4_lead_type?i?i.p(c,m):(i=xl(c),i.c(),i.m(l.parentNode,l)):i&&(i.d(1),i=null),c[5].scheme_description?f?f.p(c,m):(f=es(c),f.c(),f.m(t.parentNode,t)):f&&(f.d(1),f=null);const g={};m&2&&(g.props=c[5]),n.$set(g);const C={};m&2&&(C.props=c[5]),o.$set(C)},i(c){u||(_(n.$$.fragment,c),_(o.$$.fragment,c),u=!0)},o(c){d(n.$$.fragment,c),d(o.$$.fragment,c),u=!1},d(c){c&&(p(e),p(l),p(t),p(s)),a&&a.d(c),i&&i.d(c),f&&f.d(c),w(n,c),w(o,c)}}}function Xl(r){let e,l,t,n=r[5].scheme_type+"",s;return{c(){e=L("p"),l=v("Scheme type: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&2&&n!==(n=o[5].scheme_type+"")&&B(s,n)},d(o){o&&p(e)}}}function xl(r){let e,l,t,n=r[5].atf4_lead_type+"",s;return{c(){e=L("p"),l=v("ATF4 lead type: "),t=L("b"),s=v(n)},m(o,u){$(o,e,u),k(e,l),k(e,t),k(t,s)},p(o,u){u&2&&n!==(n=o[5].atf4_lead_type+"")&&B(s,n)},d(o){o&&p(e)}}}function es(r){let e,l,t=r[5].scheme_description+"",n;return{c(){e=L("p"),l=v("Descripton: "),n=v(t)},m(s,o){$(s,e,o),k(e,l),k(e,n)},p(s,o){o&2&&t!==(t=s[5].scheme_description+"")&&B(n,t)},d(s){s&&p(e)}}}function Op(r){var zt,Bt,Ht,Ue;let e,l,t,n=rt(r[0].name,r[2])+"",s,o=r[0].intervention_type+"",u,a,i,f,c,m,g,C,S,y,M,O=rt(r[1].scheme_name??"",r[3])+"",A,I,N=rt(r[0].scheme_reference,r[3])+"",R,F,P,z,x,E=((zt=r[1].browse)==null?void 0:zt.authority_or_region)+"",q,D,H,pe,Me,Ne,ye=((Bt=r[1].browse)==null?void 0:Bt.funding_programme)+"",Ie,he,Ge,Be,Oe=r[0].length_meters&&El(r),ce=r[0].description&&Ul(r),de=r[0].pipeline&&Wl(tn(r)),Se=((Ht=r[1].browse)==null?void 0:Ht.capital_scheme_id)&&Zl(r),Pe=((Ue=r[1].browse)==null?void 0:Ue.current_milestone)&&Ql(r),ve=r[1].pipeline&&Kl(en(r));return{c(){e=L("div"),l=L("h2"),t=new ft(!1),s=v(" ("),u=v(o),a=v(")"),i=T(),Oe&&Oe.c(),f=T(),ce&&ce.c(),c=T(),de&&de.c(),m=T(),g=L("hr"),C=T(),S=L("p"),y=v("Part of scheme: "),M=new ft(!1),A=v(" ("),I=new ft(!1),R=v(")"),F=T(),P=L("p"),z=v("Authority or region: "),x=L("b"),q=v(E),D=T(),Se&&Se.c(),H=T(),pe=L("p"),Me=v("Funding programme: "),Ne=L("b"),Ie=v(ye),he=T(),Pe&&Pe.c(),Ge=T(),ve&&ve.c(),t.a=s,M.a=A,I.a=R,_e(e,"max-width","30vw"),_e(e,"max-height","60vh"),_e(e,"overflow","auto")},m(ue,Re){$(ue,e,Re),k(e,l),t.m(n,l),k(l,s),k(l,u),k(l,a),k(e,i),Oe&&Oe.m(e,null),k(e,f),ce&&ce.m(e,null),k(e,c),de&&de.m(e,null),k(e,m),k(e,g),k(e,C),k(e,S),k(S,y),M.m(O,S),k(S,A),I.m(N,S),k(S,R),k(e,F),k(e,P),k(P,z),k(P,x),k(x,q),k(e,D),Se&&Se.m(e,null),k(e,H),k(e,pe),k(pe,Me),k(pe,Ne),k(Ne,Ie),k(e,he),Pe&&Pe.m(e,null),k(e,Ge),ve&&ve.m(e,null),Be=!0},p(ue,[Re]){var mn,_n,gn,dn;(!Be||Re&5)&&n!==(n=rt(ue[0].name,ue[2])+"")&&t.p(n),(!Be||Re&1)&&o!==(o=ue[0].intervention_type+"")&&B(u,o),ue[0].length_meters?Oe?Oe.p(ue,Re):(Oe=El(ue),Oe.c(),Oe.m(e,f)):Oe&&(Oe.d(1),Oe=null),ue[0].description?ce?ce.p(ue,Re):(ce=Ul(ue),ce.c(),ce.m(e,c)):ce&&(ce.d(1),ce=null),ue[0].pipeline?de?(de.p(tn(ue),Re),Re&1&&_(de,1)):(de=Wl(tn(ue)),de.c(),_(de,1),de.m(e,m)):de&&(ie(),d(de,1,1,()=>{de=null}),ae()),(!Be||Re&10)&&O!==(O=rt(ue[1].scheme_name??"",ue[3])+"")&&M.p(O),(!Be||Re&9)&&N!==(N=rt(ue[0].scheme_reference,ue[3])+"")&&I.p(N),(!Be||Re&2)&&E!==(E=((mn=ue[1].browse)==null?void 0:mn.authority_or_region)+"")&&B(q,E),(_n=ue[1].browse)!=null&&_n.capital_scheme_id?Se?Se.p(ue,Re):(Se=Zl(ue),Se.c(),Se.m(e,H)):Se&&(Se.d(1),Se=null),(!Be||Re&2)&&ye!==(ye=((gn=ue[1].browse)==null?void 0:gn.funding_programme)+"")&&B(Ie,ye),(dn=ue[1].browse)!=null&&dn.current_milestone?Pe?Pe.p(ue,Re):(Pe=Ql(ue),Pe.c(),Pe.m(e,Ge)):Pe&&(Pe.d(1),Pe=null),ue[1].pipeline?ve?(ve.p(en(ue),Re),Re&2&&_(ve,1)):(ve=Kl(en(ue)),ve.c(),_(ve,1),ve.m(e,null)):ve&&(ie(),d(ve,1,1,()=>{ve=null}),ae())},i(ue){Be||(_(de),_(ve),Be=!0)},o(ue){d(de),d(ve),Be=!1},d(ue){ue&&p(e),Oe&&Oe.d(),ce&&ce.d(),de&&de.d(),Se&&Se.d(),Pe&&Pe.d(),ve&&ve.d()}}}function rt(r,e){return e?r.replace(new RegExp(e,"gi"),l=>`<mark>${l}</mark>`):r}function Rp(r,e,l){let t,n,s,o;Q(r,Zt,a=>l(4,n=a)),Q(r,Gt,a=>l(2,s=a)),Q(r,Et,a=>l(3,o=a));let{props:u}=e;return r.$$set=a=>{"props"in a&&l(0,u=a.props)},r.$$.update=()=>{r.$$.dirty&17&&l(1,t=n.get(u.scheme_reference))},[u,t,s,o,n]}class pn extends J{constructor(e){super(),Z(this,e,Rp,Op,V,{props:0})}}function Dp(r){let e,l=r[6].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&64&&l!==(l=n[6].name+"")&&B(t,l)},d(n){n&&p(e)}}}function Ap(r){let e,l;return e=new pn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.props=t[6]),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Fp(r){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Dp,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[Ap,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function qp(r){let e,l=r[6].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&64&&l!==(l=n[6].name+"")&&B(t,l)},d(n){n&&p(e)}}}function zp(r){let e,l;return e=new pn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.props=t[6]),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Bp(r){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[qp,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[zp,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function Hp(r){let e,l=r[6].name+"",t;return{c(){e=L("p"),t=v(l)},m(n,s){$(n,e,s),k(e,t)},p(n,s){s&64&&l!==(l=n[6].name+"")&&B(t,l)},d(n){n&&p(e)}}}function jp(r){let e,l;return e=new pn({props:{props:r[6]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.props=t[6]),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Gp(r){let e,l,t,n;return e=new fe({props:{popupClass:"border-popup",$$slots:{default:[Hp,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),t=new fe({props:{openOn:"click",popupClass:"border-popup",$$slots:{default:[jp,({props:s})=>({6:s}),({props:s})=>s?64:0]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(s,o){b(e,s,o),$(s,l,o),b(t,s,o),n=!0},p(s,o){const u={};o&192&&(u.$$scope={dirty:o,ctx:s}),e.$set(u);const a={};o&192&&(a.$$scope={dirty:o,ctx:s}),t.$set(a)},i(s){n||(_(e.$$.fragment,s),_(t.$$.fragment,s),n=!0)},o(s){d(e.$$.fragment,s),d(t.$$.fragment,s),n=!1},d(s){s&&p(l),w(e,s),w(t,s)}}}function Ep(r){let e,l,t,n,s,o,u,a,i,f;const c=[j("interventions-points"),{filter:["all",Sn,r[3],r[4]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"circle-color":r[2],"circle-radius":Cn,"circle-opacity":te(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let m={$$slots:{default:[Fp]},$$scope:{ctx:r}};for(let N=0;N<c.length;N+=1)m=le(m,c[N]);e=new mt({props:m});const g=[j("interventions-lines"),{filter:["all",Ln,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"line-color":r[2],"line-width":jt,"line-opacity":te(1,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let C={$$slots:{default:[Bp]},$$scope:{ctx:r}};for(let N=0;N<g.length;N+=1)C=le(C,g[N]);t=new be({props:C});const S=[j("interventions-lines-endpoints"),{filter:["==","endpoint",!0]},{paint:{"circle-radius":.5*jt,"circle-opacity":0,"circle-stroke-color":Xe.lineEndpointColor,"circle-stroke-width":2}},{layout:{visibility:r[0]?"visible":"none"}}];let y={};for(let N=0;N<S.length;N+=1)y=le(y,S[N]);s=new mt({props:y});const M=[j("interventions-polygons"),{filter:["all",Vt,r[3]]},{manageHoverState:!0},{eventsIfTopMost:!0},{paint:{"fill-color":r[2],"fill-opacity":te(.2,.5)}},{layout:{visibility:r[0]?"visible":"none"}},{hoverCursor:"pointer"}];let O={$$slots:{default:[Gp]},$$scope:{ctx:r}};for(let N=0;N<M.length;N+=1)O=le(O,M[N]);u=new He({props:O});const A=[j("interventions-polygons-outlines"),{filter:["all",Vt,r[3]]},{paint:{"line-color":r[2],"line-opacity":.5,"line-width":.7*jt}},{layout:{visibility:r[0]?"visible":"none"}}];let I={};for(let N=0;N<A.length;N+=1)I=le(I,A[N]);return i=new be({props:I}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),h(s.$$.fragment),o=T(),h(u.$$.fragment),a=T(),h(i.$$.fragment)},m(N,R){b(e,N,R),$(N,l,R),b(t,N,R),$(N,n,R),b(s,N,R),$(N,o,R),b(u,N,R),$(N,a,R),b(i,N,R),f=!0},p(N,R){const F=R&29?se(c,[c[0],R&24&&{filter:["all",Sn,N[3],N[4]]},c[2],c[3],R&4&&{paint:{"circle-color":N[2],"circle-radius":Cn,"circle-opacity":te(1,.5)}},R&1&&{layout:{visibility:N[0]?"visible":"none"}},c[6]]):{};R&128&&(F.$$scope={dirty:R,ctx:N}),e.$set(F);const P=R&13?se(g,[g[0],R&8&&{filter:["all",Ln,N[3]]},g[2],g[3],R&4&&{paint:{"line-color":N[2],"line-width":jt,"line-opacity":te(1,.5)}},R&1&&{layout:{visibility:N[0]?"visible":"none"}},g[6]]):{};R&128&&(P.$$scope={dirty:R,ctx:N}),t.$set(P);const z=R&1?se(S,[S[0],S[1],S[2],{layout:{visibility:N[0]?"visible":"none"}}]):{};s.$set(z);const x=R&13?se(M,[M[0],R&8&&{filter:["all",Vt,N[3]]},M[2],M[3],R&4&&{paint:{"fill-color":N[2],"fill-opacity":te(.2,.5)}},R&1&&{layout:{visibility:N[0]?"visible":"none"}},M[6]]):{};R&128&&(x.$$scope={dirty:R,ctx:N}),u.$set(x);const E=R&13?se(A,[A[0],R&8&&{filter:["all",Vt,N[3]]},R&4&&{paint:{"line-color":N[2],"line-opacity":.5,"line-width":.7*jt}},R&1&&{layout:{visibility:N[0]?"visible":"none"}}]):{};i.$set(E)},i(N){f||(_(e.$$.fragment,N),_(t.$$.fragment,N),_(s.$$.fragment,N),_(u.$$.fragment,N),_(i.$$.fragment,N),f=!0)},o(N){d(e.$$.fragment,N),d(t.$$.fragment,N),d(s.$$.fragment,N),d(u.$$.fragment,N),d(i.$$.fragment,N),f=!1},d(N){N&&(p(l),p(n),p(o),p(a)),w(e,N),w(t,N),w(s,N),w(u,N),w(i,N)}}}function Up(r){let e,l;return e=new _t({props:{data:r[1],$$slots:{default:[Ep]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&2&&(s.data=t[1]),n&129&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function Wp(r,e,l){let t,n;Q(r,qt,i=>l(5,n=i));let{showSchemes:s}=e,[o]=rn();const u=["!=",["get","hide_while_editing"],!0],a=["!=",["get","endpoint"],!0];return r.$$set=i=>{"showSchemes"in i&&l(0,s=i.showSchemes)},r.$$.update=()=>{r.$$.dirty&32&&l(1,t=zs(n))},[s,t,o,u,a,n]}class Yp extends J{constructor(e){super(),Z(this,e,Wp,Up,V,{showSchemes:0})}}function ts(r,e,l){const t=r.slice();return t[13]=e[l],t}function ns(r,e,l){const t=r.slice();return t[16]=e[l],t}function Vp(r){let e,l;return e=new bp({props:{loadFile:r[7]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p:ne,i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function ls(r){let e,l,t,n,s;e=new Ee({props:{$$slots:{default:[Jp]},$$scope:{ctx:r}}}),e.$on("click",r[8]);function o(a){r[9](a)}let u={title:"About this scheme data",$$slots:{default:[Zp]},$$scope:{ctx:r}};return r[3]!==void 0&&(u.open=r[3]),t=new as({props:u}),U.push(()=>W(t,"open",o)),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment)},m(a,i){b(e,a,i),$(a,l,i),b(t,a,i),s=!0},p(a,i){const f={};i&524288&&(f.$$scope={dirty:i,ctx:a}),e.$set(f);const c={};i&524304&&(c.$$scope={dirty:i,ctx:a}),!n&&i&8&&(n=!0,c.open=a[3],Y(()=>n=!1)),t.$set(c)},i(a){s||(_(e.$$.fragment,a),_(t.$$.fragment,a),s=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),s=!1},d(a){a&&p(l),w(e,a),w(t,a)}}}function Jp(r){let e;return{c(){e=v("About the scheme data")},m(l,t){$(l,e,t)},d(l){l&&p(e)}}}function ss(r){let e,l,t=r[16]+"",n;return{c(){e=L("li"),l=L("p"),n=v(t)},m(s,o){$(s,e,o),k(e,l),k(l,n)},p(s,o){o&16&&t!==(t=s[16]+"")&&B(n,t)},d(s){s&&p(e)}}}function Zp(r){let e,l,t,n,s=Te(r[4].notes),o=[];for(let u=0;u<s.length;u+=1)o[u]=ss(ns(r,s,u));return{c(){e=L("div"),l=L("p"),l.textContent="Please note there are data quality caveats for all scheme data:",t=T(),n=L("ul");for(let u=0;u<o.length;u+=1)o[u].c();G(e,"class","govuk-prose")},m(u,a){$(u,e,a),k(e,l),k(e,t),k(e,n);for(let i=0;i<o.length;i+=1)o[i]&&o[i].m(n,null)},p(u,a){if(a&16){s=Te(u[4].notes);let i;for(i=0;i<s.length;i+=1){const f=ns(u,s,i);o[i]?o[i].p(f,a):(o[i]=ss(f),o[i].c(),o[i].m(n,null))}for(;i<o.length;i+=1)o[i].d(1);o.length=s.length}},d(u){u&&p(e),lt(o,u)}}}function rs(r){let e,l,t,n;function s(a){r[10](a)}function o(a){r[11](a)}let u={};return r[1]!==void 0&&(u.schemesToBeShown=r[1]),r[2]!==void 0&&(u.show=r[2]),e=new oo({props:u}),U.push(()=>W(e,"schemesToBeShown",s)),U.push(()=>W(e,"show",o)),{c(){h(e.$$.fragment)},m(a,i){b(e,a,i),n=!0},p(a,i){const f={};!l&&i&2&&(l=!0,f.schemesToBeShown=a[1],Y(()=>l=!1)),!t&&i&4&&(t=!0,f.show=a[2],Y(()=>t=!1)),e.$set(f)},i(a){n||(_(e.$$.fragment,a),n=!0)},o(a){d(e.$$.fragment,a),n=!1},d(a){w(e,a)}}}function os(r){let e,l;return e=new Lp({props:{scheme:r[13]}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,n){const s={};n&64&&(s.scheme=t[13]),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function is(r){let e=r[1].has(r[13].scheme_reference),l,t,n=e&&os(r);return{c(){n&&n.c(),l=Ce()},m(s,o){n&&n.m(s,o),$(s,l,o),t=!0},p(s,o){o&66&&(e=s[1].has(s[13].scheme_reference)),e?n?(n.p(s,o),o&66&&_(n,1)):(n=os(s),n.c(),_(n,1),n.m(l.parentNode,l)):n&&(ie(),d(n,1,1,()=>{n=null}),ae())},i(s){t||(_(n),t=!0)},o(s){d(n),t=!1},d(s){s&&p(l),n&&n.d(s)}}}function Qp(r){let e,l,t,n,s,o,u,a,i,f,c=ln()=="Private (development)",m,g,C,S,y,M,O,A,I;s=new Bs({props:{boundaryGeojson:r[4]}}),i=new Ts({});let N=c&&Vp(r),R=r[4].notes&&ls(r);C=new Ms({props:{label:"Load schemes from GeoJSON",loadFile:r[7]}}),y=new Ns({props:{errorMessage:r[0]}});let F=r[6].size>0&&rs(r),P=Te(r[6].values()),z=[];for(let E=0;E<P.length;E+=1)z[E]=is(ts(r,P,E));const x=E=>d(z[E],1,1,()=>{z[E]=null});return{c(){e=L("div"),l=L("div"),t=L("h1"),t.textContent="Browse schemes",n=T(),h(s.$$.fragment),o=T(),u=L("p"),u.textContent=`App version: ${ln()}`,a=T(),h(i.$$.fragment),f=T(),N&&N.c(),m=T(),R&&R.c(),g=T(),h(C.$$.fragment),S=T(),h(y.$$.fragment),M=T(),F&&F.c(),O=T(),A=L("ul");for(let E=0;E<z.length;E+=1)z[E].c();_e(l,"display","flex"),_e(l,"justify-content","space-between"),G(e,"slot","sidebar"),G(e,"class","govuk-prose")},m(E,q){$(E,e,q),k(e,l),k(l,t),k(l,n),b(s,l,null),k(e,o),k(e,u),k(e,a),b(i,e,null),k(e,f),N&&N.m(e,null),k(e,m),R&&R.m(e,null),k(e,g),b(C,e,null),k(e,S),b(y,e,null),k(e,M),F&&F.m(e,null),k(e,O),k(e,A);for(let D=0;D<z.length;D+=1)z[D]&&z[D].m(A,null);I=!0},p(E,q){const D={};q&16&&(D.boundaryGeojson=E[4]),s.$set(D),c&&N.p(E,q),E[4].notes?R?(R.p(E,q),q&16&&_(R,1)):(R=ls(E),R.c(),_(R,1),R.m(e,g)):R&&(ie(),d(R,1,1,()=>{R=null}),ae());const H={};if(q&1&&(H.errorMessage=E[0]),y.$set(H),E[6].size>0?F?(F.p(E,q),q&64&&_(F,1)):(F=rs(E),F.c(),_(F,1),F.m(e,O)):F&&(ie(),d(F,1,1,()=>{F=null}),ae()),q&66){P=Te(E[6].values());let pe;for(pe=0;pe<P.length;pe+=1){const Me=ts(E,P,pe);z[pe]?(z[pe].p(Me,q),_(z[pe],1)):(z[pe]=is(Me),z[pe].c(),_(z[pe],1),z[pe].m(A,null))}for(ie(),pe=P.length;pe<z.length;pe+=1)x(pe);ae()}},i(E){if(!I){_(s.$$.fragment,E),_(i.$$.fragment,E),_(N),_(R),_(C.$$.fragment,E),_(y.$$.fragment,E),_(F);for(let q=0;q<P.length;q+=1)_(z[q]);I=!0}},o(E){d(s.$$.fragment,E),d(i.$$.fragment,E),d(N),d(R),d(C.$$.fragment,E),d(y.$$.fragment,E),d(F),z=z.filter(Boolean);for(let q=0;q<z.length;q+=1)d(z[q]);I=!1},d(E){E&&p(e),w(s),w(i),N&&N.d(),R&&R.d(),w(C),w(y),F&&F.d(),lt(z,E)}}}function Kp(r){let e,l,t,n,s,o,u;return e=new Hs({}),t=new Yp({props:{showSchemes:r[2]}}),o=new cp({}),{c(){h(e.$$.fragment),l=T(),h(t.$$.fragment),n=T(),s=L("div"),h(o.$$.fragment),G(s,"class","top-right svelte-u44ed2")},m(a,i){b(e,a,i),$(a,l,i),b(t,a,i),$(a,n,i),$(a,s,i),b(o,s,null),u=!0},p(a,i){const f={};i&4&&(f.showSchemes=a[2]),t.$set(f)},i(a){u||(_(e.$$.fragment,a),_(t.$$.fragment,a),_(o.$$.fragment,a),u=!0)},o(a){d(e.$$.fragment,a),d(t.$$.fragment,a),d(o.$$.fragment,a),u=!1},d(a){a&&(p(l),p(n),p(s)),w(e,a),w(t,a),w(o)}}}function Xp(r){let e,l,t;return l=new Ps({props:{style:r[5],startBounds:[-5.96,49.89,2.31,55.94],$$slots:{default:[Kp]},$$scope:{ctx:r}}}),{c(){e=L("div"),h(l.$$.fragment),G(e,"slot","main")},m(n,s){$(n,e,s),b(l,e,null),t=!0},p(n,s){const o={};s&32&&(o.style=n[5]),s&524292&&(o.$$scope={dirty:s,ctx:n}),l.$set(o)},i(n){t||(_(l.$$.fragment,n),t=!0)},o(n){d(l.$$.fragment,n),t=!1},d(n){n&&p(e),w(l)}}}function xp(r){let e,l;return e=new ir({props:{$$slots:{main:[Xp],sidebar:[Qp]},$$scope:{ctx:r}}}),{c(){h(e.$$.fragment)},m(t,n){b(e,t,n),l=!0},p(t,[n]){const s={};n&524415&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){l||(_(e.$$.fragment,t),l=!0)},o(t){d(e.$$.fragment,t),l=!1},d(t){w(e,t)}}}function em(r,e,l){let t,n,s;Q(r,qt,y=>l(4,t=y)),Q(r,Ut,y=>l(5,n=y)),Q(r,Zt,y=>l(6,s=y)),cn(()=>{Is()});const o=new URLSearchParams(window.location.search);Ut.set(o.get("style")||"dataviz");let u="",a=new Set,i=!0,f=!1;function c(y){try{qt.set(JSON.parse(y)),Zt.set(jr(t)),l(0,u="")}catch(M){l(0,u=`The file you loaded is broken: ${M}`)}}const m=()=>l(3,f=!0);function g(y){f=y,l(3,f)}function C(y){a=y,l(1,a)}function S(y){i=y,l(2,i)}return[u,a,i,f,t,n,s,c,m,g,C,S]}class tm extends J{constructor(e){super(),Z(this,e,em,xp,V,{})}}document.body.className+=" js-enabled"+("noModule"in HTMLScriptElement.prototype?" govuk-frontend-supported":"");new tm({target:document.getElementById("app")});
